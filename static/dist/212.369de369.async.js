!(function(){var M5=(mt,W)=>(W=Symbol[mt])?W:Symbol.for("Symbol."+mt),Tde=mt=>{throw TypeError(mt)},gf=Math.pow;var P5=(mt,W,D)=>new Promise((q,G)=>{var E=ue=>{try{ne(D.next(ue))}catch(ce){G(ce)}},he=ue=>{try{ne(D.throw(ue))}catch(ce){G(ce)}},ne=ue=>ue.done?q(ue.value):Promise.resolve(ue.value).then(E,he);ne((D=D.apply(mt,W)).next())}),wde=function(mt,W){this[0]=mt,this[1]=W};var Sj=mt=>{var W=mt[M5("asyncIterator")],D=!1,q,G={};return W==null?(W=mt[M5("iterator")](),q=E=>G[E]=he=>W[E](he)):(W=W.call(mt),q=E=>G[E]=he=>{if(D){if(D=!1,E==="throw")throw he;return he}return D=!0,{done:!1,value:new wde(new Promise(ne=>{var ue=W[E](he);ue instanceof Object||Tde("Object expected"),ne(ue)}),1)}}),G[M5("iterator")]=()=>G,q("next"),"throw"in W?q("throw"):G.throw=E=>{throw E},"return"in W&&q("return"),G};(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[212],{25330:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};W.default=D},67303:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};W.default=D},83647:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};W.default=D},57583:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};W.default=D},29260:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};W.default=D},25828:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};W.default=D},64183:function(mt,W,D){"use strict";var q=D(67294),G=D(85591),E=function(){return E=Object.assign||function(ne){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var oe in ue)Object.prototype.hasOwnProperty.call(ue,oe)&&(ne[oe]=ue[oe])}return ne},E.apply(this,arguments)},he=(0,q.forwardRef)(function(ne,ue){return q.createElement(G.P,E({},ne,{chartType:"Area",ref:ue}))});W.Z=he},79611:function(mt,W,D){"use strict";var q=D(67294),G=D(85591),E=function(){return E=Object.assign||function(ne){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var oe in ue)Object.prototype.hasOwnProperty.call(ue,oe)&&(ne[oe]=ue[oe])}return ne},E.apply(this,arguments)},he=(0,q.forwardRef)(function(ne,ue){return q.createElement(G.P,E({},ne,{chartType:"Bar",ref:ue}))});W.Z=he},85591:function(mt,W,D){"use strict";D.d(W,{P:function(){return bde}});var q={};D.r(q),D.d(q,{area:function(){return iG},bottom:function(){return Sg},bottomLeft:function(){return Sg},bottomRight:function(){return Sg},inside:function(){return Sg},left:function(){return Sg},outside:function(){return sG},right:function(){return Sg},spider:function(){return uG},surround:function(){return fG},top:function(){return Sg},topLeft:function(){return Sg},topRight:function(){return Sg}});var G={};D.r(G),D.d(G,{interpolateBlues:function(){return XZ},interpolateBrBG:function(){return AZ},interpolateBuGn:function(){return NZ},interpolateBuPu:function(){return BZ},interpolateCividis:function(){return JZ},interpolateCool:function(){return oX},interpolateCubehelixDefault:function(){return rX},interpolateGnBu:function(){return FZ},interpolateGreens:function(){return $Z},interpolateGreys:function(){return YZ},interpolateInferno:function(){return dX},interpolateMagma:function(){return hX},interpolateOrRd:function(){return kZ},interpolateOranges:function(){return QZ},interpolatePRGn:function(){return OZ},interpolatePiYG:function(){return CZ},interpolatePlasma:function(){return pX},interpolatePuBu:function(){return UZ},interpolatePuBuGn:function(){return zZ},interpolatePuOr:function(){return RZ},interpolatePuRd:function(){return jZ},interpolatePurples:function(){return KZ},interpolateRainbow:function(){return aX},interpolateRdBu:function(){return MZ},interpolateRdGy:function(){return PZ},interpolateRdPu:function(){return VZ},interpolateRdYlBu:function(){return IZ},interpolateRdYlGn:function(){return LZ},interpolateReds:function(){return qZ},interpolateSinebow:function(){return uX},interpolateSpectral:function(){return DZ},interpolateTurbo:function(){return cX},interpolateViridis:function(){return fX},interpolateWarm:function(){return iX},interpolateYlGn:function(){return WZ},interpolateYlGnBu:function(){return HZ},interpolateYlOrBr:function(){return GZ},interpolateYlOrRd:function(){return ZZ},schemeAccent:function(){return JG},schemeBlues:function(){return iD},schemeBrBG:function(){return F6},schemeBuGn:function(){return Z6},schemeBuPu:function(){return X6},schemeCategory10:function(){return QG},schemeDark2:function(){return eZ},schemeGnBu:function(){return $6},schemeGreens:function(){return oD},schemeGreys:function(){return aD},schemeObservable10:function(){return tZ},schemeOrRd:function(){return Y6},schemeOranges:function(){return uD},schemePRGn:function(){return k6},schemePaired:function(){return nZ},schemePastel1:function(){return rZ},schemePastel2:function(){return iZ},schemePiYG:function(){return z6},schemePuBu:function(){return q6},schemePuBuGn:function(){return K6},schemePuOr:function(){return U6},schemePuRd:function(){return Q6},schemePurples:function(){return sD},schemeRdBu:function(){return j6},schemeRdGy:function(){return V6},schemeRdPu:function(){return J6},schemeRdYlBu:function(){return H6},schemeRdYlGn:function(){return W6},schemeReds:function(){return lD},schemeSet1:function(){return oZ},schemeSet2:function(){return aZ},schemeSet3:function(){return sZ},schemeSpectral:function(){return G6},schemeTableau10:function(){return lZ},schemeYlGn:function(){return tD},schemeYlGnBu:function(){return eD},schemeYlOrBr:function(){return nD},schemeYlOrRd:function(){return rD}});var E={};D.r(E),D.d(E,{geoAlbers:function(){return Az},geoAlbersUsa:function(){return nie},geoAzimuthalEqualArea:function(){return rie},geoAzimuthalEqualAreaRaw:function(){return LI},geoAzimuthalEquidistant:function(){return iie},geoAzimuthalEquidistantRaw:function(){return DI},geoConicConformal:function(){return aie},geoConicConformalRaw:function(){return Rz},geoConicEqualArea:function(){return $A},geoConicEqualAreaRaw:function(){return wz},geoConicEquidistant:function(){return lie},geoConicEquidistantRaw:function(){return Mz},geoEqualEarth:function(){return cie},geoEqualEarthRaw:function(){return NI},geoEquirectangular:function(){return sie},geoEquirectangularRaw:function(){return DE},geoGnomonic:function(){return fie},geoGnomonicRaw:function(){return BI},geoIdentity:function(){return hie},geoMercator:function(){return oie},geoMercatorRaw:function(){return LE},geoNaturalEarth1:function(){return die},geoNaturalEarth1Raw:function(){return FI},geoOrthographic:function(){return pie},geoOrthographicRaw:function(){return kI},geoProjection:function(){return zm},geoProjectionMutator:function(){return PI},geoStereographic:function(){return vie},geoStereographicRaw:function(){return zI},geoTransverseMercator:function(){return mie},geoTransverseMercatorRaw:function(){return UI}});var he={};D.r(he),D.d(he,{frequency:function(){return mae},id:function(){return gae},name:function(){return yae},weight:function(){return vae}});var ne=D(67294),ue=D(73935),ce=D.t(ue,2),xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xe.apply(this,arguments)},oe=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Ve=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(p){return function(v){return h([p,v])}}function h(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(s=p[0]&2?i.return:p[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,p[1])).done)return s;switch(i=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){n.label=p[1];break}if(p[0]===6&&n.label<s[1]){n.label=s[1],s=p;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(p);break}s[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(v){p=[6,v],i=0}finally{r=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},re=xe({},ce),me=re.version,Re=re.render,Y=re.unmountComponentAtNode,le;try{var K=Number((me||"").split(".")[0]);K>=18&&(le=re.createRoot)}catch(e){}function _e(e){var t=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&typeof t=="object"&&(t.usingClientEntryPoint=e)}var et="__rc_react_root__";function Je(e,t){_e(!0);var n=t[et]||le(t);_e(!1),n.render(e),t[et]=n}function Ot(e,t){Re(e,t)}function dt(e,t){}function bt(e,t){if(le){Je(e,t);return}Ot(e,t)}function Me(e){return oe(this,void 0,void 0,function(){return Ve(this,function(t){return[2,Promise.resolve().then(function(){var n;(n=e[et])===null||n===void 0||n.unmount(),delete e[et]})]})})}function we(e){Y(e)}function je(e){}function Ze(e){return oe(this,void 0,void 0,function(){return Ve(this,function(t){return le!==void 0?[2,Me(e)]:(we(e),[2])})})}var ut=new Map;ut.set("tooltip",document.createElement("div"));var Qt=function(e,t){t===void 0&&(t=!1);var n=null;if(t)n=ut.get("tooltip");else if(n=document.createElement("div"),e!=null&&e.key){var r=ut.get(e.key);r?n=r:ut.set(e.key,n)}return bt(e,n),n},De=function(e){var t=e.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",t.appendChild(r),t.appendChild(n)},St=function(e){var t=e.loadingTemplate,n=e.theme,r=n===void 0?"light":n,i=ne.useRef(null);ne.useEffect(function(){!t&&i.current&&De(i.current)},[]);var s=function(){return t||ne.createElement("div",{ref:i})};return ne.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},s())},Oe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var i=n.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||ne.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return t.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},t.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):ne.createElement(ne.Fragment,null,this.props.children)},t}(ne.Component),Ke=typeof global=="object"&&global&&global.Object===Object&&global,Xe=Ke,Pt=typeof self=="object"&&self&&self.Object===Object&&self,xt=Xe||Pt||Function("return this")(),Ie=xt,Wt=Ie.Symbol,hn=Wt,Pn=Object.prototype,$n=Pn.hasOwnProperty,nr=Pn.toString,Ft=hn?hn.toStringTag:void 0;function Jt(e){var t=$n.call(e,Ft),n=e[Ft];try{e[Ft]=void 0;var r=!0}catch(s){}var i=nr.call(e);return r&&(t?e[Ft]=n:delete e[Ft]),i}var ln=Jt,Un=Object.prototype,on=Un.toString;function zt(e){return on.call(e)}var kt=zt,ke="[object Null]",nt="[object Undefined]",Vt=hn?hn.toStringTag:void 0;function U(e){return e==null?e===void 0?nt:ke:Vt&&Vt in Object(e)?ln(e):kt(e)}var pe=U;function ct(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var de=ct,Yt="[object AsyncFunction]",sn="[object Function]",pn="[object GeneratorFunction]",Dn="[object Proxy]";function Wn(e){if(!de(e))return!1;var t=pe(e);return t==sn||t==pn||t==Yt||t==Dn}var Xn=Wn,dn=function(e){var t=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return t.test(e)},_t=Array.isArray,Rt=_t;function wn(){this.__data__=[],this.size=0}var In=wn;function Zn(e,t){return e===t||e!==e&&t!==t}var vt=Zn;function Ee(e,t){for(var n=e.length;n--;)if(vt(e[n][0],t))return n;return-1}var Fe=Ee,st=Array.prototype,It=st.splice;function Mt(e){var t=this.__data__,n=Fe(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():It.call(t,n,1),--this.size,!0}var En=Mt;function Yn(e){var t=this.__data__,n=Fe(t,e);return n<0?void 0:t[n][1]}var yr=Yn;function qn(e){return Fe(this.__data__,e)>-1}var Pe=qn;function Te(e,t){var n=this.__data__,r=Fe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Ue=Te;function ot(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ot.prototype.clear=In,ot.prototype.delete=En,ot.prototype.get=yr,ot.prototype.has=Pe,ot.prototype.set=Ue;var wt=ot;function $t(){this.__data__=new wt,this.size=0}var vn=$t;function Et(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Kt=Et;function Qn(e){return this.__data__.get(e)}var _r=Qn;function Vr(e){return this.__data__.has(e)}var pr=Vr,zr=Ie["__core-js_shared__"],gi=zr,wi=function(){var e=/[^.]+$/.exec(gi&&gi.keys&&gi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Sr(e){return!!wi&&wi in e}var Ti=Sr,hi=Function.prototype,ai=hi.toString;function Mo(e){if(e!=null){try{return ai.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var xi=Mo,ea=/[\\^$.*+?()[\]{}|]/g,va=/^\[object .+?Constructor\]$/,Ro=Function.prototype,$o=Object.prototype,Be=Ro.toString,rt=$o.hasOwnProperty,jt=RegExp("^"+Be.call(rt).replace(ea,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function un(e){if(!de(e)||Ti(e))return!1;var t=Xn(e)?jt:va;return t.test(xi(e))}var Nn=un;function Bn(e,t){return e==null?void 0:e[t]}var yn=Bn;function Cn(e,t){var n=yn(e,t);return Nn(n)?n:void 0}var dr=Cn,hr=dr(Ie,"Map"),Jr=hr,zi=dr(Object,"create"),Ji=zi;function ei(){this.__data__=Ji?Ji(null):{},this.size=0}var Hi=ei;function Ii(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Wr=Ii,Eo="__lodash_hash_undefined__",ci=Object.prototype,xo=ci.hasOwnProperty;function Wi(e){var t=this.__data__;if(Ji){var n=t[e];return n===Eo?void 0:n}return xo.call(t,e)?t[e]:void 0}var oo=Wi,Ao=Object.prototype,bs=Ao.hasOwnProperty;function ma(e){var t=this.__data__;return Ji?t[e]!==void 0:bs.call(t,e)}var ta=ma,vs="__lodash_hash_undefined__";function ms(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ji&&t===void 0?vs:t,this}var At=ms;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Gt.prototype.clear=Hi,Gt.prototype.delete=Wr,Gt.prototype.get=oo,Gt.prototype.has=ta,Gt.prototype.set=At;var jn=Gt;function Lr(){this.size=0,this.__data__={hash:new jn,map:new(Jr||wt),string:new jn}}var Oi=Lr;function Gi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Jo=Gi;function Gs(e,t){var n=e.__data__;return Jo(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ds=Gs;function zs(e){var t=Ds(this,e).delete(e);return this.size-=t?1:0,t}var hl=zs;function yh(e){return Ds(this,e).get(e)}var Np=yh;function Ed(e){return Ds(this,e).has(e)}var jl=Ed;function Pf(e,t){var n=Ds(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var If=Pf;function lu(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lu.prototype.clear=Oi,lu.prototype.delete=hl,lu.prototype.get=Np,lu.prototype.has=jl,lu.prototype.set=If;var ju=lu,uc=200;function Qf(e,t){var n=this.__data__;if(n instanceof wt){var r=n.__data__;if(!Jr||r.length<uc-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ju(r)}return n.set(e,t),this.size=n.size,this}var vu=Qf;function Cs(e){var t=this.__data__=new wt(e);this.size=t.size}Cs.prototype.clear=vn,Cs.prototype.delete=Kt,Cs.prototype.get=_r,Cs.prototype.has=pr,Cs.prototype.set=vu;var Ou=Cs,yf="__lodash_hash_undefined__";function Vh(e){return this.__data__.set(e,yf),this}var Bp=Vh;function _h(e){return this.__data__.has(e)}var Sd=_h;function Jf(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new ju;++t<n;)this.add(e[t])}Jf.prototype.add=Jf.prototype.push=Bp,Jf.prototype.has=Sd;var Hh=Jf;function Td(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var wd=Td;function m0(e,t){return e.has(t)}var Lf=m0,Fc=1,ap=2;function Vl(e,t,n,r,i,s){var l=n&Fc,c=e.length,h=t.length;if(c!=h&&!(l&&h>c))return!1;var p=s.get(e),v=s.get(t);if(p&&v)return p==t&&v==e;var y=-1,b=!0,w=n&ap?new Hh:void 0;for(s.set(e,t),s.set(t,e);++y<c;){var R=e[y],M=t[y];if(r)var I=l?r(M,R,y,t,e,s):r(R,M,y,e,t,s);if(I!==void 0){if(I)continue;b=!1;break}if(w){if(!wd(t,function(N,z){if(!Lf(w,z)&&(R===N||i(R,N,n,r,s)))return w.push(z)})){b=!1;break}}else if(!(R===M||i(R,M,n,r,s))){b=!1;break}}return s.delete(e),s.delete(t),b}var Ec=Vl,Qc=Ie.Uint8Array,mu=Qc;function Jc(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var cc=Jc;function ef(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Pl=ef,kc=1,_f=2,sp="[object Boolean]",Wh="[object Date]",gs="[object Error]",Ad="[object Map]",Gh="[object Number]",Od="[object RegExp]",ul="[object Set]",bh="[object String]",xh="[object Symbol]",ie="[object ArrayBuffer]",Se="[object DataView]",tt=hn?hn.prototype:void 0,cn=tt?tt.valueOf:void 0;function Q(e,t,n,r,i,s,l){switch(n){case Se:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ie:return!(e.byteLength!=t.byteLength||!s(new mu(e),new mu(t)));case sp:case Wh:case Gh:return vt(+e,+t);case gs:return e.name==t.name&&e.message==t.message;case Od:case bh:return e==t+"";case Ad:var c=cc;case ul:var h=r&kc;if(c||(c=Pl),e.size!=t.size&&!h)return!1;var p=l.get(e);if(p)return p==t;r|=_f,l.set(e,t);var v=Ec(c(e),c(t),r,i,s,l);return l.delete(e),v;case xh:if(cn)return cn.call(e)==cn.call(t)}return!1}var rr=Q;function Rr(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Li=Rr;function Ui(e,t,n){var r=t(e);return Rt(e)?r:Li(r,n(e))}var so=Ui;function uo(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var l=e[n];t(l,n,e)&&(s[i++]=l)}return s}var xa=uo;function Do(){return[]}var Ea=Do,ts=Object.prototype,da=ts.propertyIsEnumerable,Ta=Object.getOwnPropertySymbols,Rs=Ta?function(e){return e==null?[]:(e=Object(e),xa(Ta(e),function(t){return da.call(e,t)}))}:Ea,Ba=Rs;function Ha(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var fs=Ha;function tl(e){return e!=null&&typeof e=="object"}var ja=tl,Cu="[object Arguments]";function os(e){return ja(e)&&pe(e)==Cu}var Sc=os,fc=Object.prototype,Vu=fc.hasOwnProperty,eh=fc.propertyIsEnumerable,Cd=Sc(function(){return arguments}())?Sc:function(e){return ja(e)&&Vu.call(e,"callee")&&!eh.call(e,"callee")},bf=Cd;function Df(){return!1}var tf=Df,Eh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Sh=Eh&&typeof module=="object"&&module&&!module.nodeType&&module,Nf=Sh&&Sh.exports===Eh,g0=Nf?Ie.Buffer:void 0,Rd=g0?g0.isBuffer:void 0,Fp=Rd||tf,Bf=Fp,kp=9007199254740991,Md=/^(?:0|[1-9]\d*)$/;function lp(e,t){var n=typeof e;return t=t==null?kp:t,!!t&&(n=="number"||n!="symbol"&&Md.test(e))&&e>-1&&e%1==0&&e<t}var Ff=lp,zp=9007199254740991;function Th(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=zp}var Up=Th,kf="[object Arguments]",Zs="[object Array]",up="[object Boolean]",xf="[object Date]",ve="[object Error]",ze="[object Function]",yt="[object Map]",An="[object Number]",sr="[object Object]",Ur="[object RegExp]",yi="[object Set]",qi="[object String]",pa="[object WeakMap]",_a="[object ArrayBuffer]",xs="[object DataView]",Fa="[object Float32Array]",Ia="[object Float64Array]",Ru="[object Int8Array]",nf="[object Int16Array]",nl="[object Int32Array]",co="[object Uint8Array]",Yu="[object Uint8ClampedArray]",Pd="[object Uint16Array]",wh="[object Uint32Array]",wa={};wa[Fa]=wa[Ia]=wa[Ru]=wa[nf]=wa[nl]=wa[co]=wa[Yu]=wa[Pd]=wa[wh]=!0,wa[kf]=wa[Zs]=wa[_a]=wa[up]=wa[xs]=wa[xf]=wa[ve]=wa[ze]=wa[yt]=wa[An]=wa[sr]=wa[Ur]=wa[yi]=wa[qi]=wa[pa]=!1;function ns(e){return ja(e)&&Up(e.length)&&!!wa[pe(e)]}var y0=ns;function Zi(e){return function(t){return e(t)}}var Ef=Zi,Id=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ah=Id&&typeof module=="object"&&module&&!module.nodeType&&module,Sf=Ah&&Ah.exports===Id,hc=Sf&&Xe.process,_0=function(){try{var e=Ah&&Ah.require&&Ah.require("util").types;return e||hc&&hc.binding&&hc.binding("util")}catch(t){}}(),Oh=_0,Ku=Oh&&Oh.isTypedArray,th=Ku?Ef(Ku):y0,b0=th,Ld=Object.prototype,x0=Ld.hasOwnProperty;function iv(e,t){var n=Rt(e),r=!n&&bf(e),i=!n&&!r&&Bf(e),s=!n&&!r&&!i&&b0(e),l=n||r||i||s,c=l?fs(e.length,String):[],h=c.length;for(var p in e)(t||x0.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||s&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||Ff(p,h)))&&c.push(p);return c}var dc=iv,zc=Object.prototype;function ba(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||zc;return e===n}var pc=ba;function rf(e,t){return function(n){return e(t(n))}}var gu=rf,Zh=gu(Object.keys,Object),ql=Zh,Hu=Object.prototype,qu=Hu.hasOwnProperty;function cp(e){if(!pc(e))return ql(e);var t=[];for(var n in Object(e))qu.call(e,n)&&n!="constructor"&&t.push(n);return t}var No=cp;function So(e){return e!=null&&Up(e.length)&&!Xn(e)}var Ql=So;function Qu(e){return Ql(e)?dc(e):No(e)}var Ju=Qu;function dl(e){return so(e,Ju,Ba)}var Tc=dl,nh=1,Dd=Object.prototype,Ms=Dd.hasOwnProperty;function yu(e,t,n,r,i,s){var l=n&nh,c=Tc(e),h=c.length,p=Tc(t),v=p.length;if(h!=v&&!l)return!1;for(var y=h;y--;){var b=c[y];if(!(l?b in t:Ms.call(t,b)))return!1}var w=s.get(e),R=s.get(t);if(w&&R)return w==t&&R==e;var M=!0;s.set(e,t),s.set(t,e);for(var I=l;++y<h;){b=c[y];var N=e[b],z=t[b];if(r)var H=l?r(z,N,b,t,e,s):r(N,z,b,e,t,s);if(!(H===void 0?N===z||i(N,z,n,r,s):H)){M=!1;break}I||(I=b=="constructor")}if(M&&!I){var X=e.constructor,$=t.constructor;X!=$&&"constructor"in e&&"constructor"in t&&!(typeof X=="function"&&X instanceof X&&typeof $=="function"&&$ instanceof $)&&(M=!1)}return s.delete(e),s.delete(t),M}var E0=yu,Xh=dr(Ie,"DataView"),fp=Xh,Ch=dr(Ie,"Promise"),ec=Ch,hp=dr(Ie,"Set"),wc=hp,jp=dr(Ie,"WeakMap"),Uc=jp,Nd="[object Map]",S0="[object Object]",Rh="[object Promise]",$h="[object Set]",T0="[object WeakMap]",zf="[object DataView]",Uf=xi(fp),w0=xi(Jr),rh=xi(ec),Tf=xi(wc),ov=xi(Uc),jf=pe;(fp&&jf(new fp(new ArrayBuffer(1)))!=zf||Jr&&jf(new Jr)!=Nd||ec&&jf(ec.resolve())!=Rh||wc&&jf(new wc)!=$h||Uc&&jf(new Uc)!=T0)&&(jf=function(e){var t=pe(e),n=t==S0?e.constructor:void 0,r=n?xi(n):"";if(r)switch(r){case Uf:return zf;case w0:return Nd;case rh:return Rh;case Tf:return $h;case ov:return T0}return t});var Yh=jf,A0=1,_="[object Arguments]",S="[object Array]",x="[object Object]",O=Object.prototype,k=O.hasOwnProperty;function Z(e,t,n,r,i,s){var l=Rt(e),c=Rt(t),h=l?S:Yh(e),p=c?S:Yh(t);h=h==_?x:h,p=p==_?x:p;var v=h==x,y=p==x,b=h==p;if(b&&Bf(e)){if(!Bf(t))return!1;l=!0,v=!1}if(b&&!v)return s||(s=new Ou),l||b0(e)?Ec(e,t,n,r,i,s):rr(e,t,h,n,r,i,s);if(!(n&A0)){var w=v&&k.call(e,"__wrapped__"),R=y&&k.call(t,"__wrapped__");if(w||R){var M=w?e.value():e,I=R?t.value():t;return s||(s=new Ou),i(M,I,n,r,s)}}return b?(s||(s=new Ou),E0(e,t,n,r,i,s)):!1}var J=Z;function ge(e,t,n,r,i){return e===t?!0:e==null||t==null||!ja(e)&&!ja(t)?e!==e&&t!==t:J(e,t,n,r,ge,i)}var We=ge;function ht(e,t){return We(e,t)}var Ut=ht;function Ht(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Xt=Ht,bn=function(){try{var e=dr(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),mn=bn;function zn(e,t,n){t=="__proto__"&&mn?mn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var an=zn,kn=Object.prototype,er=kn.hasOwnProperty;function vr(e,t,n){var r=e[t];(!(er.call(e,t)&&vt(r,n))||n===void 0&&!(t in e))&&an(e,t,n)}var Mr=vr;function wr(e,t,n,r){var i=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],h=r?r(n[c],e[c],c,n,e):void 0;h===void 0&&(h=e[c]),i?an(n,c,h):Mr(n,c,h)}return n}var Fr=wr;function ti(e,t){return e&&Fr(t,Ju(t),e)}var Ni=ti;function Pi(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var lo=Pi,zo=Object.prototype,Wo=zo.hasOwnProperty;function Go(e){if(!de(e))return lo(e);var t=pc(e),n=[];for(var r in e)r=="constructor"&&(t||!Wo.call(e,r))||n.push(r);return n}var as=Go;function Or(e){return Ql(e)?dc(e,!0):as(e)}var en=Or;function ha(e,t){return e&&Fr(t,en(t),e)}var aa=ha,Yo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ga=Yo&&typeof module=="object"&&module&&!module.nodeType&&module,ra=ga&&ga.exports===Yo,Bo=ra?Ie.Buffer:void 0,uu=Bo?Bo.allocUnsafe:void 0;function El(e,t){if(t)return e.slice();var n=e.length,r=uu?uu(n):new e.constructor(n);return e.copy(r),r}var Mu=El;function cu(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Es=cu;function _l(e,t){return Fr(e,Ba(e),t)}var pl=_l,vc=gu(Object.getPrototypeOf,Object),Vf=vc,Ac=Object.getOwnPropertySymbols,of=Ac?function(e){for(var t=[];e;)Li(t,Ba(e)),e=Vf(e);return t}:Ea,jc=of;function dp(e,t){return Fr(e,jc(e),t)}var pp=dp;function Mh(e){return so(e,en,jc)}var Kh=Mh,qh=Object.prototype,ih=qh.hasOwnProperty;function Ai(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ih.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Il=Ai;function Ll(e){var t=new e.constructor(e.byteLength);return new mu(t).set(new mu(e)),t}var tc=Ll;function wf(e,t){var n=t?tc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Af=wf,Ga=/\w*$/;function Hl(e){var t=new e.constructor(e.source,Ga.exec(e));return t.lastIndex=e.lastIndex,t}var Jl=Hl,Hf=hn?hn.prototype:void 0,Vp=Hf?Hf.valueOf:void 0;function oh(e){return Vp?Object(Vp.call(e)):{}}var O0=oh;function Bd(e,t){var n=t?tc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Fd=Bd,Wf="[object Boolean]",Hp="[object Date]",Vv="[object Map]",kd="[object Number]",Oc="[object RegExp]",Xy="[object Set]",Hv="[object String]",Wp="[object Symbol]",$y="[object ArrayBuffer]",Lg="[object DataView]",Yy="[object Float32Array]",Um="[object Float64Array]",Wv="[object Int8Array]",av="[object Int16Array]",Ky="[object Int32Array]",Gp="[object Uint8Array]",Zp="[object Uint8ClampedArray]",jm="[object Uint16Array]",Vm="[object Uint32Array]";function Dg(e,t,n){var r=e.constructor;switch(t){case $y:return tc(e);case Wf:case Hp:return new r(+e);case Lg:return Af(e,n);case Yy:case Um:case Wv:case av:case Ky:case Gp:case Zp:case jm:case Vm:return Fd(e,n);case Vv:return new r;case kd:case Hv:return new r(e);case Oc:return Jl(e);case Xy:return new r;case Wp:return O0(e)}}var Gv=Dg,Zv=Object.create,Ng=function(){function e(){}return function(t){if(!de(t))return{};if(Zv)return Zv(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),sv=Ng;function C0(e){return typeof e.constructor=="function"&&!pc(e)?sv(Vf(e)):{}}var lv=C0,nc="[object Map]";function Xp(e){return ja(e)&&Yh(e)==nc}var Sl=Xp,Qh=Oh&&Oh.isMap,Hm=Qh?Ef(Qh):Sl,$p=Hm,Yp="[object Set]";function zd(e){return ja(e)&&Yh(e)==Yp}var Kp=zd,Jh=Oh&&Oh.isSet,af=Jh?Ef(Jh):Kp,qp=af,R0=1,Wm=2,ed=4,Of="[object Arguments]",Ph="[object Array]",Xv="[object Boolean]",$v="[object Date]",M0="[object Error]",Gf="[object Function]",Ud="[object GeneratorFunction]",qy="[object Map]",Qy="[object Number]",Yv="[object Object]",Bg="[object RegExp]",td="[object Set]",Jy="[object String]",ah="[object Symbol]",uv="[object WeakMap]",Qp="[object ArrayBuffer]",vp="[object DataView]",Fg="[object Float32Array]",mp="[object Float64Array]",Kv="[object Int8Array]",P0="[object Int16Array]",Cc="[object Int32Array]",mc="[object Uint8Array]",_u="[object Uint8ClampedArray]",sf="[object Uint16Array]",Rc="[object Uint32Array]",Ys={};Ys[Of]=Ys[Ph]=Ys[Qp]=Ys[vp]=Ys[Xv]=Ys[$v]=Ys[Fg]=Ys[mp]=Ys[Kv]=Ys[P0]=Ys[Cc]=Ys[qy]=Ys[Qy]=Ys[Yv]=Ys[Bg]=Ys[td]=Ys[Jy]=Ys[ah]=Ys[mc]=Ys[_u]=Ys[sf]=Ys[Rc]=!0,Ys[M0]=Ys[Gf]=Ys[uv]=!1;function I0(e,t,n,r,i,s){var l,c=t&R0,h=t&Wm,p=t&ed;if(n&&(l=i?n(e,r,i,s):n(e)),l!==void 0)return l;if(!de(e))return e;var v=Rt(e);if(v){if(l=Il(e),!c)return Es(e,l)}else{var y=Yh(e),b=y==Gf||y==Ud;if(Bf(e))return Mu(e,c);if(y==Yv||y==Of||b&&!i){if(l=h||b?{}:lv(e),!c)return h?pp(e,aa(l,e)):pl(e,Ni(l,e))}else{if(!Ys[y])return i?e:{};l=Gv(e,y,c)}}s||(s=new Ou);var w=s.get(e);if(w)return w;s.set(e,l),qp(e)?e.forEach(function(I){l.add(I0(I,t,n,I,e,s))}):$p(e)&&e.forEach(function(I,N){l.set(N,I0(I,t,n,N,e,s))});var R=p?h?Kh:Tc:h?en:Ju,M=v?void 0:R(e);return Xt(M||e,function(I,N){M&&(N=I,I=e[N]),Mr(l,N,I0(I,t,n,N,e,s))}),l}var kg=I0,e_=1,cv=4;function Gm(e){return kg(e,e_|cv)}var qv=Gm,Mc="[object Symbol]";function Qv(e){return typeof e=="symbol"||ja(e)&&pe(e)==Mc}var gp=Qv,Zm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fv=/^\w*$/;function yp(e,t){if(Rt(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||gp(e)?!0:fv.test(e)||!Zm.test(e)||t!=null&&e in Object(t)}var Xm=yp,t_="Expected a function";function Jv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(t_);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var l=e.apply(this,r);return n.cache=s.set(i,l)||s,l};return n.cache=new(Jv.Cache||ju),n}Jv.Cache=ju;var zg=Jv,He=500;function qt(e){var t=zg(e,function(r){return n.size===He&&n.clear(),r}),n=t.cache;return t}var Rn=qt,Ar=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$r=/\\(\\)?/g,Cr=Rn(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ar,function(n,r,i,s){t.push(i?s.replace($r,"$1"):r||n)}),t}),mr=Cr;function Ci(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var li=Ci,Bi=1/0,Ri=hn?hn.prototype:void 0,Di=Ri?Ri.toString:void 0;function Xi(e){if(typeof e=="string")return e;if(Rt(e))return li(e,Xi)+"";if(gp(e))return Di?Di.call(e):"";var t=e+"";return t=="0"&&1/e==-Bi?"-0":t}var pi=Xi;function ki(e){return e==null?"":pi(e)}var fr=ki;function kr(e,t){return Rt(e)?e:Xm(e,t)?[e]:mr(fr(e))}var _i=kr,io=1/0;function ri(e){if(typeof e=="string"||gp(e))return e;var t=e+"";return t=="0"&&1/e==-io?"-0":t}var eo=ri;function Ei(e,t){t=_i(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[eo(t[n++])];return n&&n==r?e:void 0}var to=Ei;function si(e,t,n){var r=e==null?void 0:to(e,t);return r===void 0?n:r}var di=si,Uo=function(){return Uo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Uo.apply(this,arguments)},ua=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Qi(e,t){var n=(0,ne.useRef)(),r=(0,ne.useRef)(),i=(0,ne.useRef)(null),s=t.onReady,l=t.onEvent,c=function(v,y){var b;v===void 0&&(v="image/png");var w=(b=i.current)===null||b===void 0?void 0:b.getElementsByTagName("canvas")[0];return w==null?void 0:w.toDataURL(v,y)},h=function(v,y,b){v===void 0&&(v="download"),y===void 0&&(y="image/png");var w=v;v.indexOf(".")===-1&&(w="".concat(v,".").concat(y.split("/")[1]));var R=c(y,b),M=document.createElement("a");return M.href=R,M.download=w,document.body.appendChild(M),M.click(),document.body.removeChild(M),M=null,w},p=function(v,y){y===void 0&&(y=!1);var b=Object.keys(v),w=y;b.forEach(function(R){var M=v[R];R==="tooltip"&&(w=!0),Xn(M)&&dn("".concat(M))?v[R]=function(){for(var I=[],N=0;N<arguments.length;N++)I[N]=arguments[N];return Qt(M.apply(void 0,I),w)}:Rt(M)?M.forEach(function(I){p(I,w)}):de(M)?p(M,w):w=y})};return(0,ne.useEffect)(function(){if(n.current&&!Ut(r.current,t)){var v=!1;if(r.current){var y=r.current,b=y.data,w=ua(y,["data"]),R=t.data,M=ua(t,["data"]);v=Ut(w,M)}r.current=qv(t),v?n.current.changeData(di(t,"data")):(p(t),n.current.update(t),n.current.render())}},[t]),(0,ne.useEffect)(function(){if(!i.current)return function(){return null};r.current||(r.current=qv(t)),p(t);var v=new e(i.current,Uo({},t));v.toDataURL=c,v.downloadImage=h,v.render(),n.current=v,s&&s(v);var y=function(b){l&&l(v,b)};return v.on("*",y),function(){n.current&&(n.current.destroy(),n.current.off("*",y),n.current=void 0)}},[]),{chart:n,container:i}}var Si="*",Yr=function(){function e(){this._events={}}return e.prototype.on=function(t,n,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:n,once:!!r}),this},e.prototype.once=function(t,n){return this.on(t,n,!0)},e.prototype.emit=function(t){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=this._events[t]||[],l=this._events[Si]||[],c=function(h){for(var p=h.length,v=0;v<p;v++)if(h[v]){var y=h[v],b=y.callback,w=y.once;w&&(h.splice(v,1),h.length===0&&delete n._events[t],p--,v--),b.apply(n,r)}};c(s),c(l)},e.prototype.off=function(t,n){if(!t)this._events={};else if(!n)delete this._events[t];else{for(var r=this._events[t]||[],i=r.length,s=0;s<i;s++)r[s].callback===n&&(r.splice(s,1),i--,s--);r.length===0&&delete this._events[t]}return this},e.prototype.getEvents=function(){return this._events},e}(),Fo=Yr;const La="main-layer",ao="label-layer",ca="element",sa="view",Ko="plot",hs="component",Tl="label",Wu="area",Za="mask",Wl={};function Ks(e,t){Object.assign(Wl,{[e]:t})}var se=D(97582),eu=D(38554),rs=eu,ur=D(77160),Kr=D(85975),Dl=D(49685);function Sa(){var e=new Dl.WT(9);return Dl.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function rc(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Us(e){var t=new glMatrix.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function qo(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ca(e,t,n,r,i,s,l,c,h){var p=new Dl.WT(9);return p[0]=e,p[1]=t,p[2]=n,p[3]=r,p[4]=i,p[5]=s,p[6]=l,p[7]=c,p[8]=h,p}function ds(e,t,n,r,i,s,l,c,h,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=l,e[6]=c,e[7]=h,e[8]=p,e}function fu(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ih(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function gn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8],y=v*l-c*p,b=-v*s+c*h,w=p*s-l*h,R=n*y+r*b+i*w;return R?(R=1/R,e[0]=y*R,e[1]=(-v*r+i*p)*R,e[2]=(c*r-i*l)*R,e[3]=b*R,e[4]=(v*n-i*h)*R,e[5]=(-c*n+i*s)*R,e[6]=w*R,e[7]=(-p*n+r*h)*R,e[8]=(l*n-r*s)*R,e):null}function Pr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8];return e[0]=l*v-c*p,e[1]=i*p-r*v,e[2]=r*c-i*l,e[3]=c*h-s*v,e[4]=n*v-i*h,e[5]=i*s-n*c,e[6]=s*p-l*h,e[7]=r*h-n*p,e[8]=n*l-r*s,e}function xr(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],l=e[5],c=e[6],h=e[7],p=e[8];return t*(p*s-l*h)+n*(-p*i+l*c)+r*(h*i-s*c)}function vo(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],w=n[1],R=n[2],M=n[3],I=n[4],N=n[5],z=n[6],H=n[7],X=n[8];return e[0]=b*r+w*l+R*p,e[1]=b*i+w*c+R*v,e[2]=b*s+w*h+R*y,e[3]=M*r+I*l+N*p,e[4]=M*i+I*c+N*v,e[5]=M*s+I*h+N*y,e[6]=z*r+H*l+X*p,e[7]=z*i+H*c+X*v,e[8]=z*s+H*h+X*y,e}function ka(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],w=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=l,e[4]=c,e[5]=h,e[6]=b*r+w*l+p,e[7]=b*i+w*c+v,e[8]=b*s+w*h+y,e}function Ps(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=Math.sin(n),w=Math.cos(n);return e[0]=w*r+b*l,e[1]=w*i+b*c,e[2]=w*s+b*h,e[3]=w*l-b*r,e[4]=w*c-b*i,e[5]=w*h-b*s,e[6]=p,e[7]=v,e[8]=y,e}function Dt(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function nn(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Mn(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Tr(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function br(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Vn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n+n,c=r+r,h=i+i,p=n*l,v=r*l,y=r*c,b=i*l,w=i*c,R=i*h,M=s*l,I=s*c,N=s*h;return e[0]=1-y-R,e[3]=v-N,e[6]=b+I,e[1]=v+N,e[4]=1-p-R,e[7]=w-M,e[2]=b-I,e[5]=w+M,e[8]=1-p-y,e}function Jn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8],y=t[9],b=t[10],w=t[11],R=t[12],M=t[13],I=t[14],N=t[15],z=n*c-r*l,H=n*h-i*l,X=n*p-s*l,$=r*h-i*c,te=r*p-s*c,fe=i*p-s*h,ye=v*M-y*R,Le=v*I-b*R,Ge=v*N-w*R,Qe=y*I-b*M,gt=y*N-w*M,qe=b*N-w*I,lt=z*qe-H*gt+X*Qe+$*Ge-te*Le+fe*ye;return lt?(lt=1/lt,e[0]=(c*qe-h*gt+p*Qe)*lt,e[1]=(h*Ge-l*qe-p*Le)*lt,e[2]=(l*gt-c*Ge+p*ye)*lt,e[3]=(i*gt-r*qe-s*Qe)*lt,e[4]=(n*qe-i*Ge+s*Le)*lt,e[5]=(r*Ge-n*gt-s*ye)*lt,e[6]=(M*fe-I*te+N*$)*lt,e[7]=(I*X-R*fe-N*H)*lt,e[8]=(R*te-M*X+N*z)*lt,e):null}function or(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function xn(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Gn(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function tn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Kn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function Dr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function jr(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function vi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Qr(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],l=e[4],c=e[5],h=e[6],p=e[7],v=e[8],y=t[0],b=t[1],w=t[2],R=t[3],M=t[4],I=t[5],N=t[6],z=t[7],H=t[8];return Math.abs(n-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-w)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-R)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(l-M)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-I)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-N)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(p-z)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(v-H)<=glMatrix.EPSILON*Math.max(1,Math.abs(v),Math.abs(H))}var bi=null,Io=null,Fi=D(98333);function $i(){var e=new Dl.WT(4);return Dl.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function na(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Zo(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Ns(e,t){var n=Math.acos(t[3])*2,r=Math.sin(n/2);return r>glMatrix.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Gu(e,t){var n=Jp(e,t);return Math.acos(2*n*n-1)}function tu(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=n[0],h=n[1],p=n[2],v=n[3];return e[0]=r*v+l*c+i*p-s*h,e[1]=i*v+l*h+s*c-r*p,e[2]=s*v+l*p+r*h-i*c,e[3]=l*v-r*c-i*h-s*p,e}function $m(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h+l*c,e[1]=i*h+s*c,e[2]=s*h-i*c,e[3]=l*h-r*c,e}function Cf(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h-s*c,e[1]=i*h+l*c,e[2]=s*h+r*c,e[3]=l*h-i*c,e}function n_(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h+i*c,e[1]=i*h-r*c,e[2]=s*h+l*c,e[3]=l*h-s*c,e}function _p(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function bp(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),c=Math.exp(s),h=l>0?c*Math.sin(l)/l:0;return e[0]=n*h,e[1]=r*h,e[2]=i*h,e[3]=c*Math.cos(l),e}function E1(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),c=l>0?Math.atan2(l,s)/l:0;return e[0]=n*c,e[1]=r*c,e[2]=i*c,e[3]=.5*Math.log(n*n+r*r+i*i+s*s),e}function px(e,t,n){return E1(e,t),Qm(e,e,n),bp(e,e),e}function r_(e,t,n,r){var i=t[0],s=t[1],l=t[2],c=t[3],h=n[0],p=n[1],v=n[2],y=n[3],b,w,R,M,I;return w=i*h+s*p+l*v+c*y,w<0&&(w=-w,h=-h,p=-p,v=-v,y=-y),1-w>Dl.Ib?(b=Math.acos(w),R=Math.sin(b),M=Math.sin((1-r)*b)/R,I=Math.sin(r*b)/R):(M=1-r,I=r),e[0]=M*i+I*h,e[1]=M*s+I*p,e[2]=M*l+I*v,e[3]=M*c+I*y,e}function S1(e){var t=glMatrix.RANDOM(),n=glMatrix.RANDOM(),r=glMatrix.RANDOM(),i=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=s*Math.sin(2*Math.PI*r),e[3]=s*Math.cos(2*Math.PI*r),e}function L0(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n+r*r+i*i+s*s,c=l?1/l:0;return e[0]=-n*c,e[1]=-r*c,e[2]=-i*c,e[3]=s*c,e}function vx(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Ym(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,l=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[l*3+l]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+l]-t[l*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[l]=(t[l*3+i]+t[i*3+l])*r}return e}function Ug(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var s=Math.sin(t),l=Math.cos(t),c=Math.sin(n),h=Math.cos(n),p=Math.sin(r),v=Math.cos(r);return e[0]=s*h*v-l*c*p,e[1]=l*c*v+s*h*p,e[2]=l*h*p-s*c*v,e[3]=l*h*v+s*c*p,e}function ic(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var wl=Fi.d9,Km=Fi.al,jg=Fi.JG,i_=Fi.t8,qm=Fi.IH,T1=tu,Qm=Fi.bA,Jp=Fi.AK,xp=Fi.t7,mx=Fi.kE,Pu=null,oc=Fi.we,D0=null,hv=Fi.Fv,qs=Fi.I6,w1=Fi.fS,e0=function(){var e=ur.Ue(),t=ur.al(1,0,0),n=ur.al(0,1,0);return function(r,i,s){var l=ur.AK(i,s);return l<-.999999?(ur.kC(e,t,i),ur.Zh(e)<1e-6&&ur.kC(e,n,i),ur.Fv(e,e),Zo(r,e,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(ur.kC(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+l,hv(r,r))}}(),nd=function(){var e=$i(),t=$i();return function(n,r,i,s,l,c){return r_(e,r,l,c),r_(t,i,s,c),r_(n,e,t,2*c*(1-c)),n}}(),gx=function(){var e=Sa();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],hv(t,Ym(t,e))}}(),em=D(31437),Gl=D(25897);function Qs(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var ya=D(95147),tm=D(95456),u=function(e){return(0,tm.Z)(e,"String")},d=D(81957),g={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function A(e){return Array.isArray(e)&&e.every(function(t){var n=t[0].toLowerCase();return g[n]===t.length-1&&"achlmqstvz".includes(n)})}function P(e){return A(e)&&e.every(function(t){var n=t[0];return n===n.toUpperCase()})}function B(e){return P(e)&&e.every(function(t){var n=t[0];return"ACLMQZ".includes(n)})}var j={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function ee(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=g[n]&&(n==="m"&&r.length>2?(e.segments.push([t].concat(r.splice(0,2))),n="l",t=t==="m"?"l":"L"):e.segments.push([t].concat(r.splice(0,g[n]))),!!g[n]););}function be(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);if(r===48){e.param=0,e.index+=1;return}if(r===49){e.param=1,e.index+=1;return}e.err='[path-util]: invalid Arc flag "'+n[t]+'", expecting 0 or 1 at index '+t}function Ne(e){return e>=48&&e<=57||e===43||e===45||e===46}function $e(e){return e>=48&&e<=57}function at(e){var t=e.max,n=e.pathValue,r=e.index,i=r,s=!1,l=!1,c=!1,h=!1,p;if(i>=t){e.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(p=n.charCodeAt(i),(p===43||p===45)&&(i+=1,p=n.charCodeAt(i)),!$e(p)&&p!==46){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" is not a number';return}if(p!==46){if(s=p===48,i+=1,p=n.charCodeAt(i),s&&i<t&&p&&$e(p)){e.err="[path-util]: Invalid path value at index "+r+', "'+n[r]+'" illegal number';return}for(;i<t&&$e(n.charCodeAt(i));)i+=1,l=!0;p=n.charCodeAt(i)}if(p===46){for(h=!0,i+=1;$e(n.charCodeAt(i));)i+=1,c=!0;p=n.charCodeAt(i)}if(p===101||p===69){if(h&&!l&&!c){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid float exponent';return}if(i+=1,p=n.charCodeAt(i),(p===43||p===45)&&(i+=1),i<t&&$e(n.charCodeAt(i)))for(;i<t&&$e(n.charCodeAt(i));)i+=1;else{e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid integer exponent';return}}e.index=i,e.param=+e.pathValue.slice(r,i)}function Tt(e){var t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&t.includes(e)}function Nt(e){for(var t=e.pathValue,n=e.max;e.index<n&&Tt(t.charCodeAt(e.index));)e.index+=1}function fn(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function _n(e){return(e|32)===97}function Hn(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),s=g[n[r].toLowerCase()];if(e.segmentStart=r,!fn(i)){e.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command';return}if(e.index+=1,Nt(e),e.data=[],!s){ee(e);return}for(;;){for(var l=s;l>0;l-=1){if(_n(i)&&(l===3||l===4)?be(e):at(e),e.err.length)return;e.data.push(e.param),Nt(e),e.index<t&&n.charCodeAt(e.index)===44&&(e.index+=1,Nt(e))}if(e.index>=e.max||!Ne(n.charCodeAt(e.index)))break}ee(e)}var Ln=function(){function e(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return e}();function cr(e){if(A(e))return[].concat(e);var t=new Ln(e);for(Nt(t);t.index<t.max&&!t.err.length;)Hn(t);return t.err?t.err:t.segments}function gr(e){if(P(e))return[].concat(e);var t=cr(e),n=0,r=0,i=0,s=0;return t.map(function(l){var c=l.slice(1).map(Number),h=l[0],p=h.toUpperCase();if(h==="M")return n=c[0],r=c[1],i=n,s=r,["M",n,r];var v;if(h!==p)switch(p){case"A":v=[p,c[0],c[1],c[2],c[3],c[4],c[5]+n,c[6]+r];break;case"V":v=[p,c[0]+r];break;case"H":v=[p,c[0]+n];break;default:{var y=c.map(function(w,R){return w+(R%2?r:n)});v=[p].concat(y)}}else v=[p].concat(c);var b=v.length;switch(p){case"Z":n=i,r=s;break;case"H":n=v[1];break;case"V":r=v[1];break;default:n=v[b-2],r=v[b-1],p==="M"&&(i=n,s=r)}return v})}function Ir(e,t){var n=e[0],r=t.x1,i=t.y1,s=t.x2,l=t.y2,c=e.slice(1).map(Number),h=e;if("TQ".includes(n)||(t.qx=null,t.qy=null),n==="H")h=["L",e[1],i];else if(n==="V")h=["L",r,e[1]];else if(n==="S"){var p=r*2-s,v=i*2-l;t.x1=p,t.y1=v,h=["C",p,v].concat(c)}else if(n==="T"){var y=r*2-t.qx,b=i*2-t.qy;t.qx=y,t.qy=b,h=["Q",y,b].concat(c)}else if(n==="Q"){var w=c[0],R=c[1];t.qx=w,t.qy=R}return h}function Nr(e){if(B(e))return[].concat(e);for(var t=gr(e),n=(0,se.pi)({},j),r=0;r<t.length;r+=1){t[r]=Ir(t[r],n);var i=t[r],s=i.length;n.x1=+i[s-2],n.y1=+i[s-1],n.x2=+i[s-4]||n.x1,n.y2=+i[s-3]||n.y1}return t}function Xr(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return[r+(s-r)*n,i+(l-i)*n]}function Mi(e,t,n,r,i){var s=Qs([e,t],[n,r]),l={x:0,y:0};if(typeof i=="number")if(i<=0)l={x:e,y:t};else if(i>=s)l={x:n,y:r};else{var c=Xr([e,t],[n,r],i/s),h=c[0],p=c[1];l={x:h,y:p}}return{length:s,point:l,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function Yi(e,t){var n=e.x,r=e.y,i=t.x,s=t.y,l=n*i+r*s,c=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(s,2))),h=n*s-r*i<0?-1:1,p=h*Math.acos(l/c);return p}function Lo(e,t,n,r,i,s,l,c,h,p){var v=Math.abs,y=Math.sin,b=Math.cos,w=Math.sqrt,R=Math.PI,M=v(n),I=v(r),N=(i%360+360)%360,z=N*(R/180);if(e===c&&t===h)return{x:e,y:t};if(M===0||I===0)return Mi(e,t,c,h,p).point;var H=(e-c)/2,X=(t-h)/2,$={x:b(z)*H+y(z)*X,y:-y(z)*H+b(z)*X},te=Math.pow($.x,2)/Math.pow(M,2)+Math.pow($.y,2)/Math.pow(I,2);te>1&&(M*=w(te),I*=w(te));var fe=Math.pow(M,2)*Math.pow(I,2)-Math.pow(M,2)*Math.pow($.y,2)-Math.pow(I,2)*Math.pow($.x,2),ye=Math.pow(M,2)*Math.pow($.y,2)+Math.pow(I,2)*Math.pow($.x,2),Le=fe/ye;Le=Le<0?0:Le;var Ge=(s!==l?1:-1)*w(Le),Qe={x:Ge*(M*$.y/I),y:Ge*(-(I*$.x)/M)},gt={x:b(z)*Qe.x-y(z)*Qe.y+(e+c)/2,y:y(z)*Qe.x+b(z)*Qe.y+(t+h)/2},qe={x:($.x-Qe.x)/M,y:($.y-Qe.y)/I},lt=Yi({x:1,y:0},qe),ft={x:(-$.x-Qe.x)/M,y:(-$.y-Qe.y)/I},pt=Yi(qe,ft);!l&&pt>0?pt-=2*R:l&&pt<0&&(pt+=2*R),pt%=2*R;var Zt=lt+pt*p,Ct=M*b(Zt),Lt=I*y(Zt),Tn={x:b(z)*Ct-y(z)*Lt+gt.x,y:y(z)*Ct+b(z)*Lt+gt.y};return Tn}function fo(e,t,n,r,i,s,l,c,h,p,v){var y,b=v.bbox,w=b===void 0?!0:b,R=v.length,M=R===void 0?!0:R,I=v.sampleSize,N=I===void 0?30:I,z=typeof p=="number",H=e,X=t,$=0,te=[H,X,$],fe=[H,X],ye=0,Le={x:0,y:0},Ge=[{x:H,y:X}];z&&p<=0&&(Le={x:H,y:X});for(var Qe=0;Qe<=N;Qe+=1){if(ye=Qe/N,y=Lo(e,t,n,r,i,s,l,c,h,ye),H=y.x,X=y.y,w&&Ge.push({x:H,y:X}),M&&($+=Qs(fe,[H,X])),fe=[H,X],z&&$>=p&&p>te[2]){var gt=($-p)/($-te[2]);Le={x:fe[0]*(1-gt)+te[0]*gt,y:fe[1]*(1-gt)+te[1]*gt}}te=[H,X,$]}return z&&p>=$&&(Le={x:c,y:h}),{length:$,point:Le,min:{x:Math.min.apply(null,Ge.map(function(qe){return qe.x})),y:Math.min.apply(null,Ge.map(function(qe){return qe.y}))},max:{x:Math.max.apply(null,Ge.map(function(qe){return qe.x})),y:Math.max.apply(null,Ge.map(function(qe){return qe.y}))}}}function Xo(e,t,n,r,i,s,l,c,h){var p=1-h;return{x:Math.pow(p,3)*e+3*Math.pow(p,2)*h*n+3*p*Math.pow(h,2)*i+Math.pow(h,3)*l,y:Math.pow(p,3)*t+3*Math.pow(p,2)*h*r+3*p*Math.pow(h,2)*s+Math.pow(h,3)*c}}function ho(e,t,n,r,i,s,l,c,h,p){var v,y=p.bbox,b=y===void 0?!0:y,w=p.length,R=w===void 0?!0:w,M=p.sampleSize,I=M===void 0?10:M,N=typeof h=="number",z=e,H=t,X=0,$=[z,H,X],te=[z,H],fe=0,ye={x:0,y:0},Le=[{x:z,y:H}];N&&h<=0&&(ye={x:z,y:H});for(var Ge=0;Ge<=I;Ge+=1){if(fe=Ge/I,v=Xo(e,t,n,r,i,s,l,c,fe),z=v.x,H=v.y,b&&Le.push({x:z,y:H}),R&&(X+=Qs(te,[z,H])),te=[z,H],N&&X>=h&&h>$[2]){var Qe=(X-h)/(X-$[2]);ye={x:te[0]*(1-Qe)+$[0]*Qe,y:te[1]*(1-Qe)+$[1]*Qe}}$=[z,H,X]}return N&&h>=X&&(ye={x:l,y:c}),{length:X,point:ye,min:{x:Math.min.apply(null,Le.map(function(gt){return gt.x})),y:Math.min.apply(null,Le.map(function(gt){return gt.y}))},max:{x:Math.max.apply(null,Le.map(function(gt){return gt.x})),y:Math.max.apply(null,Le.map(function(gt){return gt.y}))}}}function za(e,t,n,r,i,s,l){var c=1-l;return{x:Math.pow(c,2)*e+2*c*l*n+Math.pow(l,2)*i,y:Math.pow(c,2)*t+2*c*l*r+Math.pow(l,2)*s}}function oa(e,t,n,r,i,s,l,c){var h,p=c.bbox,v=p===void 0?!0:p,y=c.length,b=y===void 0?!0:y,w=c.sampleSize,R=w===void 0?10:w,M=typeof l=="number",I=e,N=t,z=0,H=[I,N,z],X=[I,N],$=0,te={x:0,y:0},fe=[{x:I,y:N}];M&&l<=0&&(te={x:I,y:N});for(var ye=0;ye<=R;ye+=1){if($=ye/R,h=za(e,t,n,r,i,s,$),I=h.x,N=h.y,v&&fe.push({x:I,y:N}),b&&(z+=Qs(X,[I,N])),X=[I,N],M&&z>=l&&l>H[2]){var Le=(z-l)/(z-H[2]);te={x:X[0]*(1-Le)+H[0]*Le,y:X[1]*(1-Le)+H[1]*Le}}H=[I,N,z]}return M&&l>=z&&(te={x:i,y:s}),{length:z,point:te,min:{x:Math.min.apply(null,fe.map(function(Ge){return Ge.x})),y:Math.min.apply(null,fe.map(function(Ge){return Ge.y}))},max:{x:Math.max.apply(null,fe.map(function(Ge){return Ge.x})),y:Math.max.apply(null,fe.map(function(Ge){return Ge.y}))}}}function Oo(e,t,n){for(var r,i,s,l,c,h,p=Nr(e),v=typeof t=="number",y,b=[],w,R=0,M=0,I=0,N=0,z,H=[],X=[],$=0,te={x:0,y:0},fe=te,ye=te,Le=te,Ge=0,Qe=0,gt=p.length;Qe<gt;Qe+=1)z=p[Qe],w=z[0],y=w==="M",b=y?b:[R,M].concat(z.slice(1)),y?(I=z[1],N=z[2],te={x:I,y:N},fe=te,$=0,v&&t<.001&&(Le=te)):w==="L"?(r=Mi(b[0],b[1],b[2],b[3],(t||0)-Ge),$=r.length,te=r.min,fe=r.max,ye=r.point):w==="A"?(i=fo(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],(t||0)-Ge,n||{}),$=i.length,te=i.min,fe=i.max,ye=i.point):w==="C"?(s=ho(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],(t||0)-Ge,n||{}),$=s.length,te=s.min,fe=s.max,ye=s.point):w==="Q"?(l=oa(b[0],b[1],b[2],b[3],b[4],b[5],(t||0)-Ge,n||{}),$=l.length,te=l.min,fe=l.max,ye=l.point):w==="Z"&&(b=[R,M,I,N],c=Mi(b[0],b[1],b[2],b[3],(t||0)-Ge),$=c.length,te=c.min,fe=c.max,ye=c.point),v&&Ge<t&&Ge+$>=t&&(Le=ye),X.push(fe),H.push(te),Ge+=$,h=w!=="Z"?z.slice(-2):[I,N],R=h[0],M=h[1];return v&&t>=Ge&&(Le={x:R,y:M}),{length:Ge,point:Le,min:{x:Math.min.apply(null,H.map(function(qe){return qe.x})),y:Math.min.apply(null,H.map(function(qe){return qe.y}))},max:{x:Math.max.apply(null,X.map(function(qe){return qe.x})),y:Math.max.apply(null,X.map(function(qe){return qe.y}))}}}function Xa(e,t){return Oo(e,void 0,(0,se.pi)((0,se.pi)({},t),{bbox:!1,length:!0})).length}var jo=function(e){return Array.isArray?Array.isArray(e):(0,tm.Z)(e,"Array")},Ya=function(e){if(jo(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},Vo=function(e){if(jo(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},Is=1e-5;function rl(e,t,n){return n===void 0&&(n=Is),Math.abs(e-t)<n}var Zl=function(e,t){return(e%t+t)%t},Nl=Zl;function Al(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]="A",e.splice(i+=1,0,["C"].concat(r.splice(0,6)));e.splice(n,1)}}function nu(e){return B(e)&&e.every(function(t){var n=t[0];return"MC".includes(n)})}function hu(e,t,n){var r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return{x:r,y:i}}function bu(e,t,n,r,i,s,l,c,h,p){var v=e,y=t,b=n,w=r,R=c,M=h,I=Math.PI*120/180,N=Math.PI/180*(+i||0),z=[],H,X,$,te,fe;if(p)X=p[0],$=p[1],te=p[2],fe=p[3];else{H=hu(v,y,-N),v=H.x,y=H.y,H=hu(R,M,-N),R=H.x,M=H.y;var ye=(v-R)/2,Le=(y-M)/2,Ge=ye*ye/(b*b)+Le*Le/(w*w);Ge>1&&(Ge=Math.sqrt(Ge),b*=Ge,w*=Ge);var Qe=b*b,gt=w*w,qe=(s===l?-1:1)*Math.sqrt(Math.abs((Qe*gt-Qe*Le*Le-gt*ye*ye)/(Qe*Le*Le+gt*ye*ye)));te=qe*b*Le/w+(v+R)/2,fe=qe*-w*ye/b+(y+M)/2,X=Math.asin(((y-fe)/w*Math.pow(10,9)>>0)/Math.pow(10,9)),$=Math.asin(((M-fe)/w*Math.pow(10,9)>>0)/Math.pow(10,9)),X=v<te?Math.PI-X:X,$=R<te?Math.PI-$:$,X<0&&(X=Math.PI*2+X),$<0&&($=Math.PI*2+$),l&&X>$&&(X-=Math.PI*2),!l&&$>X&&($-=Math.PI*2)}var lt=$-X;if(Math.abs(lt)>I){var ft=$,pt=R,Zt=M;$=X+I*(l&&$>X?1:-1),R=te+b*Math.cos($),M=fe+w*Math.sin($),z=bu(R,M,b,w,i,0,l,pt,Zt,[$,ft,te,fe])}lt=$-X;var Ct=Math.cos(X),Lt=Math.sin(X),Tn=Math.cos($),Fn=Math.sin($),ir=Math.tan(lt/4),tr=4/3*b*ir,Hr=4/3*w*ir,mi=[v,y],Ki=[v+tr*Lt,y-Hr*Ct],fi=[R+tr*Fn,M-Hr*Tn],Zr=[R,M];if(Ki[0]=2*mi[0]-Ki[0],Ki[1]=2*mi[1]-Ki[1],p)return Ki.concat(fi,Zr,z);z=Ki.concat(fi,Zr,z);for(var yo=[],po=0,ko=z.length;po<ko;po+=1)yo[po]=po%2?hu(z[po-1],z[po],N).y:hu(z[po],z[po+1],N).x;return yo}function Vc(e,t,n,r,i,s){var l=.3333333333333333,c=2/3;return[l*e+c*n,l*t+c*r,l*i+c*n,l*s+c*r,i,s]}var Iu=function(e,t,n,r){var i=.5,s=Xr([e,t],[n,r],i);return(0,se.ev)((0,se.ev)([],s,!0),[n,r,n,r],!1)};function Hc(e,t){var n=e[0],r=e.slice(1).map(Number),i=r[0],s=r[1],l,c=t.x1,h=t.y1,p=t.x,v=t.y;switch("TQ".includes(n)||(t.qx=null,t.qy=null),n){case"M":return t.x=i,t.y=s,e;case"A":return l=[c,h].concat(r),["C"].concat(bu(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9]));case"Q":return t.qx=i,t.qy=s,l=[c,h].concat(r),["C"].concat(Vc(l[0],l[1],l[2],l[3],l[4],l[5]));case"L":return["C"].concat(Iu(c,h,i,s));case"Z":return c===p&&h===v?["C",c,h,p,v,p,v]:["C"].concat(Iu(c,h,p,v));default:}return e}function Xl(e,t){if(t===void 0&&(t=!1),nu(e)){var n=[].concat(e);return t?[n,[]]:n}for(var r=Nr(e),i=(0,se.pi)({},j),s=[],l="",c=r.length,h,p,v=[],y=0;y<c;y+=1){r[y]&&(l=r[y][0]),s[y]=l;var b=Hc(r[y],i);r[y]=b,Al(r,s,y),c=r.length,l==="Z"&&v.push(y),h=r[y],p=h.length,i.x1=+h[p-2],i.y1=+h[p-1],i.x2=+h[p-4]||i.x1,i.y2=+h[p-3]||i.y1}return t?[r,v]:r}function ac(e,t){t===void 0&&(t=.5);var n=e.slice(0,2),r=e.slice(2,4),i=e.slice(4,6),s=e.slice(6,8),l=Xr(n,r,t),c=Xr(r,i,t),h=Xr(i,s,t),p=Xr(l,c,t),v=Xr(c,h,t),y=Xr(p,v,t);return[["C"].concat(l,p,y),["C"].concat(v,h,s)]}function Ka(e){return e.map(function(t,n,r){var i=n&&r[n-1].slice(-2).concat(t.slice(1)),s=n?ho(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,l;return n?l=s?ac(i):[t,t]:l=[t],{s:t,ss:l,l:s}})}function Js(e,t,n){var r=Ka(e),i=Ka(t),s=r.length,l=i.length,c=r.filter(function(I){return I.l}).length,h=i.filter(function(I){return I.l}).length,p=r.filter(function(I){return I.l}).reduce(function(I,N){var z=N.l;return I+z},0)/c||0,v=i.filter(function(I){return I.l}).reduce(function(I,N){var z=N.l;return I+z},0)/h||0,y=n||Math.max(s,l),b=[p,v],w=[y-s,y-l],R=0,M=[r,i].map(function(I,N){return I.l===y?I.map(function(z){return z.s}):I.map(function(z,H){return R=H&&w[N]&&z.l>=b[N],w[N]-=R?1:0,R?z.ss:[z.s]}).flat()});return M[0].length===M[1].length?M:Js(M[0],M[1],y)}function Xs(e,t,n,r,i,s,l,c){return 3*((c-t)*(n+i)-(l-e)*(r+s)+r*(e-i)-n*(t-s)+c*(i+e/3)-l*(s+t/3))/20}function ys(e){var t=0,n=0,r=0;return Xl(e).map(function(i){var s;switch(i[0]){case"M":return t=i[1],n=i[2],0;default:var l=i.slice(1),c=l[0],h=l[1],p=l[2],v=l[3],y=l[4],b=l[5];return r=Xs(t,n,c,h,p,v,y,b),s=i.slice(-2),t=s[0],n=s[1],r}}).reduce(function(i,s){return i+s},0)}function Wc(e){return ys(e)>=0}function gc(e){var t=e.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):e[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(n){return["C"].concat(n.slice(2))}))}function vl(e){return e.map(function(t){return Array.isArray(t)?[].concat(t):t})}function du(e){var t=e.length,n=t-1;return e.map(function(r,i){return e.map(function(s,l){var c=i+l,h;return l===0||e[c]&&e[c][0]==="M"?(h=e[c],["M"].concat(h.slice(-2))):(c>=t&&(c-=n),e[c])})})}function xu(e,t){var n=e.length-1,r=[],i=0,s=0,l=du(e);return l.forEach(function(c,h){e.slice(1).forEach(function(p,v){s+=Qs(e[(h+v)%n].slice(-2),t[v%n].slice(-2))}),r[h]=s,s=0}),i=r.indexOf(Math.min.apply(null,r)),l[i]}var Ss=function(e){return e===void 0},js=Ss,sh=function(e){return(0,tm.Z)(e,"Boolean")},jd=sh,ml=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"};function lh(e,t,n){return Oo(e,t,(0,se.pi)((0,se.pi)({},n),{bbox:!1,length:!0})).point}function Gc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vd(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zf(){}var Ep=.7,Lh=1/Ep,Dh="\\s*([+-]?\\d+)\\s*",N0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nm=/^#([0-9a-f]{3,8})$/,Vg=new RegExp("^rgb\\(".concat(Dh,",").concat(Dh,",").concat(Dh,"\\)$")),o_=new RegExp("^rgb\\(".concat(Xf,",").concat(Xf,",").concat(Xf,"\\)$")),rd=new RegExp("^rgba\\(".concat(Dh,",").concat(Dh,",").concat(Dh,",").concat(N0,"\\)$")),t0=new RegExp("^rgba\\(".concat(Xf,",").concat(Xf,",").concat(Xf,",").concat(N0,"\\)$")),dv=new RegExp("^hsl\\(".concat(N0,",").concat(Xf,",").concat(Xf,"\\)$")),B0=new RegExp("^hsla\\(".concat(N0,",").concat(Xf,",").concat(Xf,",").concat(N0,"\\)$")),pv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gc(Zf,F0,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:rm,formatHex:rm,formatHex8:a_,formatHsl:Jm,formatRgb:n0,toString:n0});function rm(){return this.rgb().formatHex()}function a_(){return this.rgb().formatHex8()}function Jm(){return l_(this).formatHsl()}function n0(){return this.rgb().formatRgb()}function F0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?im(t):n===3?new yc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?k0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?k0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vg.exec(e))?new yc(t[1],t[2],t[3],1):(t=o_.exec(e))?new yc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=rd.exec(e))?k0(t[1],t[2],t[3],t[4]):(t=t0.exec(e))?k0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dv.exec(e))?Hg(t[1],t[2]/100,t[3]/100,1):(t=B0.exec(e))?Hg(t[1],t[2]/100,t[3]/100,t[4]):pv.hasOwnProperty(e)?im(pv[e]):e==="transparent"?new yc(NaN,NaN,NaN,0):null}function im(e){return new yc(e>>16&255,e>>8&255,e&255,1)}function k0(e,t,n,r){return r<=0&&(e=t=n=NaN),new yc(e,t,n,r)}function om(e){return e instanceof Zf||(e=F0(e)),e?(e=e.rgb(),new yc(e.r,e.g,e.b,e.opacity)):new yc}function s_(e,t,n,r){return arguments.length===1?om(e):new yc(e,t,n,r==null?1:r)}function yc(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Gc(yc,s_,Vd(Zf,{brighter:function(t){return t=t==null?Lh:Math.pow(Lh,t),new yc(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Ep:Math.pow(Ep,t),new yc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new yc(Hd(this.r),Hd(this.g),Hd(this.b),Sp(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vv,formatHex:vv,formatHex8:am,formatRgb:sm,toString:sm}));function vv(){return"#".concat(id(this.r)).concat(id(this.g)).concat(id(this.b))}function am(){return"#".concat(id(this.r)).concat(id(this.g)).concat(id(this.b)).concat(id((isNaN(this.opacity)?1:this.opacity)*255))}function sm(){var e=Sp(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(Hd(this.r),", ").concat(Hd(this.g),", ").concat(Hd(this.b)).concat(e===1?")":", ".concat(e,")"))}function Sp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function id(e){return e=Hd(e),(e<16?"0":"")+e.toString(16)}function Hg(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new od(e,t,n,r)}function l_(e){if(e instanceof od)return new od(e.h,e.s,e.l,e.opacity);if(e instanceof Zf||(e=F0(e)),!e)return new od;if(e instanceof od)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,c=s-i,h=(s+i)/2;return c?(t===s?l=(n-r)/c+(n<r)*6:n===s?l=(r-t)/c+2:l=(t-n)/c+4,c/=h<.5?s+i:2-s-i,l*=60):c=h>0&&h<1?0:l,new od(l,c,h,e.opacity)}function u_(e,t,n,r){return arguments.length===1?l_(e):new od(e,t,n,r==null?1:r)}function od(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gc(od,u_,Vd(Zf,{brighter:function(t){return t=t==null?Lh:Math.pow(Lh,t),new od(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Ep:Math.pow(Ep,t),new od(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new yc(mv(t>=240?t-240:t+120,s,i),mv(t,s,i),mv(t<120?t+240:t-120,s,i),this.opacity)},clamp:function(){return new od(Wg(this.h),eg(this.s),eg(this.l),Sp(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=Sp(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(Wg(this.h),", ").concat(eg(this.s)*100,"%, ").concat(eg(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function Wg(e){return e=(e||0)%360,e<0?e+360:e}function eg(e){return Math.max(0,Math.min(1,e||0))}function mv(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function Ts(e,t,n,r){var i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}function uh(e,t){var n=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(e),!1)),r=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(t),!1)),i=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(e),!1)),s=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(t),!1));return{x:n,y:r,width:i-n,height:s-r}}function A1(e){return(e+Math.PI*2)%(Math.PI*2)}function r0(e,t){var n=Math.abs(e);return t>0?n:n*-1}function Gg(e,t,n,r,i,s){var l=n,c=r;if(l===0||c===0)return{x:e,y:t};for(var h=i-e,p=s-t,v=Math.abs(h),y=Math.abs(p),b=l*l,w=c*c,R=Math.PI/4,M=0,I=0,N=0;N<4;N++){M=l*Math.cos(R),I=c*Math.sin(R);var z=(b-w)*Math.pow(Math.cos(R),3)/l,H=(w-b)*Math.pow(Math.sin(R),3)/c,X=M-z,$=I-H,te=v-z,fe=y-H,ye=Math.hypot($,X),Le=Math.hypot(fe,te),Ge=ye*Math.asin((X*fe-$*te)/(ye*Le)),Qe=Ge/Math.sqrt(b+w-M*M-I*I);R+=Qe,R=Math.min(Math.PI/2,Math.max(0,R))}return{x:e+r0(M,h),y:t+r0(I,p)}}function c_(e,t,n,r,i,s,l,c){return-1*n*Math.cos(i)*Math.sin(c)-r*Math.sin(i)*Math.cos(c)}function Zg(e,t,n,r,i,s,l,c){return-1*n*Math.sin(i)*Math.sin(c)+r*Math.cos(i)*Math.cos(c)}function lf(e,t,n){return Math.atan(-t/e*Math.tan(n))}function Xg(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function tg(e,t,n,r,i,s){return n*Math.cos(i)*Math.cos(s)-r*Math.sin(i)*Math.sin(s)+e}function i0(e,t,n,r,i,s){return n*Math.sin(i)*Math.cos(s)+r*Math.cos(i)*Math.sin(s)+t}function $g(e,t,n,r){var i=Math.atan2(r*e,n*t);return(i+Math.PI*2)%(Math.PI*2)}function Yg(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function f_(e,t,n){var r=Math.cos(n),i=Math.sin(n);return[e*r-t*i,e*i+t*r]}function ng(e,t,n,r,i,s,l){for(var c=lf(n,r,i),h=1/0,p=-1/0,v=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var b=c+y;s<l?s<b&&b<l&&v.push(b):l<b&&b<s&&v.push(b)}for(var y=0;y<v.length;y++){var w=tg(e,t,n,r,i,v[y]);w<h&&(h=w),w>p&&(p=w)}for(var R=Xg(n,r,i),M=1/0,I=-1/0,N=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var z=R+y;s<l?s<z&&z<l&&N.push(z):l<z&&z<s&&N.push(z)}for(var y=0;y<N.length;y++){var H=i0(e,t,n,r,i,N[y]);H<M&&(M=H),H>I&&(I=H)}return{x:h,y:M,width:p-h,height:I-M}}function yx(e,t,n,r,i,s,l,c,h){var p=f_(c-e,h-t,-i),v=__read(p,2),y=v[0],b=v[1],w=Gg(0,0,n,r,y,b),R=$g(n,r,w.x,w.y);R<s?w=Yg(n,r,s):R>l&&(w=Yg(n,r,l));var M=f_(w.x,w.y,i);return{x:M[0]+e,y:M[1]+t}}function _x(e,t,n,r,i,s,l,c){var h=(l-s)*c+s,p=c_(e,t,n,r,i,s,l,h),v=Zg(e,t,n,r,i,s,l,h);return A1(Math.atan2(v,p))}var O1=1e-4;function h_(e,t,n,r,i,s){var l=-1,c=1/0,h=[n,r],p=20;s&&s>200&&(p=s/10);for(var v=1/p,y=v/10,b=0;b<=p;b++){var w=b*v,R=[i.apply(void 0,(0,se.ev)([],(0,se.CR)(e.concat([w])),!1)),i.apply(void 0,(0,se.ev)([],(0,se.CR)(t.concat([w])),!1))],M=Ts(h[0],h[1],R[0],R[1]);M<c&&(l=w,c=M)}if(l===0)return{x:e[0],y:t[0]};if(l===1){var I=e.length;return{x:e[I-1],y:t[I-1]}}c=1/0;for(var b=0;b<32&&!(y<O1);b++){var N=l-y,z=l+y,R=[i.apply(void 0,(0,se.ev)([],(0,se.CR)(e.concat([N])),!1)),i.apply(void 0,(0,se.ev)([],(0,se.CR)(t.concat([N])),!1))],M=Ts(h[0],h[1],R[0],R[1]);if(N>=0&&M<c)l=N,c=M;else{var H=[i.apply(void 0,(0,se.ev)([],(0,se.CR)(e.concat([z])),!1)),i.apply(void 0,(0,se.ev)([],(0,se.CR)(t.concat([z])),!1))],X=Ts(h[0],h[1],H[0],H[1]);z<=1&&X<c?(l=z,c=X):y*=.5}}return{x:i.apply(void 0,(0,se.ev)([],(0,se.CR)(e.concat([l])),!1)),y:i.apply(void 0,(0,se.ev)([],(0,se.CR)(t.concat([l])),!1))}}function d_(e,t){for(var n=0,r=e.length,i=0;i<r;i++){var s=e[i],l=t[i],c=e[(i+1)%r],h=t[(i+1)%r];n+=Ts(s,l,c,h)}return n/2}function Nh(e,t,n,r){return uh([e,n],[t,r])}function rg(e,t,n,r){return Ts(e,t,n,r)}function Wd(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}}function Tp(e,t,n,r,i,s){var l=(n-e)*(i-e)+(r-t)*(s-t);if(l<0)return Ts(e,t,i,s);var c=(n-e)*(n-e)+(r-t)*(r-t);return l>c?Ts(n,r,i,s):Kg(e,t,n,r,i,s)}function Kg(e,t,n,r,i,s){var l=[n-e,r-t];if(em.I6(l,[0,0]))return Math.sqrt((i-e)*(i-e)+(s-t)*(s-t));var c=[-l[1],l[0]];em.Fv(c,c);var h=[i-e,s-t];return Math.abs(em.AK(h,c))}function C1(e,t,n,r){return Math.atan2(r-t,n-e)}function ch(e,t,n,r,i){var s=1-i;return s*s*s*e+3*t*i*s*s+3*n*i*i*s+r*i*i*i}function Lu(e,t,n,r,i){var s=1-i;return 3*(s*s*(t-e)+2*s*i*(n-t)+i*i*(r-n))}function gv(e,t,n,r){var i=-3*e+9*t-9*n+3*r,s=6*e-12*t+6*n,l=3*t-3*e,c=[],h,p,v;if(rl(i,0))rl(s,0)||(h=-l/s,h>=0&&h<=1&&c.push(h));else{var y=s*s-4*i*l;rl(y,0)?c.push(-s/(2*i)):y>0&&(v=Math.sqrt(y),h=(-s+v)/(2*i),p=(-s-v)/(2*i),h>=0&&h<=1&&c.push(h),p>=0&&p<=1&&c.push(p))}return c}function lm(e,t,n,r,i,s,l,c,h){var p=ch(e,n,i,l,h),v=ch(t,r,s,c,h),y=Wd(e,t,n,r,h),b=Wd(n,r,i,s,h),w=Wd(i,s,l,c,h),R=Wd(y.x,y.y,b.x,b.y,h),M=Wd(b.x,b.y,w.x,w.y,h);return[[e,t,y.x,y.y,R.x,R.y,p,v],[p,v,M.x,M.y,w.x,w.y,l,c]]}function o0(e,t,n,r,i,s,l,c,h){if(h===0)return d_([e,n,i,l],[t,r,s,c]);var p=lm(e,t,n,r,i,s,l,c,.5),v=__spreadArray(__spreadArray([],__read(p[0]),!1),[h-1],!1),y=__spreadArray(__spreadArray([],__read(p[1]),!1),[h-1],!1);return o0.apply(void 0,__spreadArray([],__read(v),!1))+o0.apply(void 0,__spreadArray([],__read(y),!1))}function yv(e,t,n,r,i,s,l,c){for(var h=[e,l],p=[t,c],v=gv(e,n,i,l),y=gv(t,r,s,c),b=0;b<v.length;b++)h.push(ch(e,n,i,l,v[b]));for(var b=0;b<y.length;b++)p.push(ch(t,r,s,c,y[b]));return uh(h,p)}function bx(e,t,n,r,i,s,l,c){return o0(e,t,n,r,i,s,l,c,3)}function p_(e,t,n,r,i,s,l,c,h,p,v){return h_([e,n,i,l],[t,r,s,c],h,p,ch,v)}function v_(e,t,n,r,i,s,l,c,h,p,v){var y=p_(e,t,n,r,i,s,l,c,h,p,v);return Ts(y.x,y.y,h,p)}function ig(e,t,n,r,i,s,l,c,h){return{x:ch(e,n,i,l,h),y:ch(t,r,s,c,h)}}function R1(e,t,n,r,i,s,l,c,h){var p=Lu(e,n,i,l,h),v=Lu(t,r,s,c,h);return A1(Math.atan2(v,p))}function fh(e){for(var t=0,n=[],r=0;r<e.length-1;r++){var i=e[r],s=e[r+1],l=Ts(i[0],i[1],s[0],s[1]),c={from:i,to:s,length:l};n.push(c),t+=l}return{segments:n,totalLength:t}}function qg(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=Ts(r[0],r[1],i[0],i[1])}return t}function og(e,t){if(t>1||t<0||e.length<2)return null;var n=fh(e),r=n.segments,i=n.totalLength;if(i===0)return{x:e[0][0],y:e[0][1]};for(var s=0,l=null,c=0;c<r.length;c++){var h=r[c],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){var b=(t-s)/y;l=Wd(p[0],p[1],v[0],v[1],b);break}s+=y}return l}function ag(e,t){if(t>1||t<0||e.length<2)return 0;for(var n=fh(e),r=n.segments,i=n.totalLength,s=0,l=0,c=0;c<r.length;c++){var h=r[c],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){l=Math.atan2(v[1]-p[1],v[0]-p[0]);break}s+=y}return l}function Ol(e,t,n){for(var r=1/0,i=0;i<e.length-1;i++){var s=e[i],l=e[i+1],c=Tp(s[0],s[1],l[0],l[1],t,n);c<r&&(r=c)}return r}function m_(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];t.push(i[0]),n.push(i[1])}return uh(t,n)}function g_(e){return qg(e)}function eS(e,t){return og(e,t)}function xx(e,t,n){return Ol(e,t,n)}function M1(e,t){return ag(e,t)}function a0(e){var t=e.slice(0);return e.length&&t.push(e[0]),t}function tS(e){return m_(e)}function Ls(e){return qg(a0(e))}function Ex(e,t){return og(a0(e),t)}function nS(e,t,n){return Ol(a0(e),t,n)}function Gd(e,t){return ag(a0(e),t)}function s0(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function sg(e,t,n){var r=e+n-2*t;if(rl(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function P1(e,t,n,r,i,s,l){var c=s0(e,n,i,l),h=s0(t,r,s,l),p=Wd(e,t,n,r,l),v=Wd(n,r,i,s,l);return[[e,t,p.x,p.y,c,h],[c,h,v.x,v.y,i,s]]}function _v(e,t,n,r,i,s,l){if(l===0)return(Ts(e,t,n,r)+Ts(n,r,i,s)+Ts(e,t,i,s))/2;var c=P1(e,t,n,r,i,s,.5),h=c[0],p=c[1];return h.push(l-1),p.push(l-1),_v.apply(void 0,__spreadArray([],__read(h),!1))+_v.apply(void 0,__spreadArray([],__read(p),!1))}function Qg(e,t,n,r,i,s){var l=sg(e,n,i)[0],c=sg(t,r,s)[0],h=[e,i],p=[t,s];return l!==void 0&&h.push(s0(e,n,i,l)),c!==void 0&&p.push(s0(t,r,s,c)),uh(h,p)}function Sx(e,t,n,r,i,s){return _v(e,t,n,r,i,s,3)}function rS(e,t,n,r,i,s,l,c){return h_([e,n,i],[t,r,s],l,c,s0)}function wp(e,t,n,r,i,s,l,c){var h=rS(e,t,n,r,i,s,l,c);return Ts(h.x,h.y,l,c)}var z0=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof D.g!="undefined"?D.g:typeof self!="undefined"?self:{},bv={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(z0,function(){function n($,te,fe,ye,Le){r($,te,fe||0,ye||$.length-1,Le||s)}function r($,te,fe,ye,Le){for(;ye>fe;){if(ye-fe>600){var Ge=ye-fe+1,Qe=te-fe+1,gt=Math.log(Ge),qe=.5*Math.exp(2*gt/3),lt=.5*Math.sqrt(gt*qe*(Ge-qe)/Ge)*(Qe-Ge/2<0?-1:1),ft=Math.max(fe,Math.floor(te-Qe*qe/Ge+lt)),pt=Math.min(ye,Math.floor(te+(Ge-Qe)*qe/Ge+lt));r($,te,ft,pt,Le)}var Zt=$[te],Ct=fe,Lt=ye;for(i($,fe,te),Le($[ye],Zt)>0&&i($,fe,ye);Ct<Lt;){for(i($,Ct,Lt),Ct++,Lt--;Le($[Ct],Zt)<0;)Ct++;for(;Le($[Lt],Zt)>0;)Lt--}Le($[fe],Zt)===0?i($,fe,Lt):(Lt++,i($,Lt,ye)),Lt<=te&&(fe=Lt+1),te<=Lt&&(ye=Lt-1)}}function i($,te,fe){var ye=$[te];$[te]=$[fe],$[fe]=ye}function s($,te){return $<te?-1:$>te?1:0}var l=function(te){te===void 0&&(te=9),this._maxEntries=Math.max(4,te),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};l.prototype.all=function(){return this._all(this.data,[])},l.prototype.search=function(te){var fe=this.data,ye=[];if(!z(te,fe))return ye;for(var Le=this.toBBox,Ge=[];fe;){for(var Qe=0;Qe<fe.children.length;Qe++){var gt=fe.children[Qe],qe=fe.leaf?Le(gt):gt;z(te,qe)&&(fe.leaf?ye.push(gt):N(te,qe)?this._all(gt,ye):Ge.push(gt))}fe=Ge.pop()}return ye},l.prototype.collides=function(te){var fe=this.data;if(!z(te,fe))return!1;for(var ye=[];fe;){for(var Le=0;Le<fe.children.length;Le++){var Ge=fe.children[Le],Qe=fe.leaf?this.toBBox(Ge):Ge;if(z(te,Qe)){if(fe.leaf||N(te,Qe))return!0;ye.push(Ge)}}fe=ye.pop()}return!1},l.prototype.load=function(te){if(!(te&&te.length))return this;if(te.length<this._minEntries){for(var fe=0;fe<te.length;fe++)this.insert(te[fe]);return this}var ye=this._build(te.slice(),0,te.length-1,0);if(!this.data.children.length)this.data=ye;else if(this.data.height===ye.height)this._splitRoot(this.data,ye);else{if(this.data.height<ye.height){var Le=this.data;this.data=ye,ye=Le}this._insert(ye,this.data.height-ye.height-1,!0)}return this},l.prototype.insert=function(te){return te&&this._insert(te,this.data.height-1),this},l.prototype.clear=function(){return this.data=H([]),this},l.prototype.remove=function(te,fe){if(!te)return this;for(var ye=this.data,Le=this.toBBox(te),Ge=[],Qe=[],gt,qe,lt;ye||Ge.length;){if(ye||(ye=Ge.pop(),qe=Ge[Ge.length-1],gt=Qe.pop(),lt=!0),ye.leaf){var ft=c(te,ye.children,fe);if(ft!==-1)return ye.children.splice(ft,1),Ge.push(ye),this._condense(Ge),this}!lt&&!ye.leaf&&N(ye,Le)?(Ge.push(ye),Qe.push(gt),gt=0,qe=ye,ye=ye.children[0]):qe?(gt++,ye=qe.children[gt],lt=!1):ye=null}return this},l.prototype.toBBox=function(te){return te},l.prototype.compareMinX=function(te,fe){return te.minX-fe.minX},l.prototype.compareMinY=function(te,fe){return te.minY-fe.minY},l.prototype.toJSON=function(){return this.data},l.prototype.fromJSON=function(te){return this.data=te,this},l.prototype._all=function(te,fe){for(var ye=[];te;)te.leaf?fe.push.apply(fe,te.children):ye.push.apply(ye,te.children),te=ye.pop();return fe},l.prototype._build=function(te,fe,ye,Le){var Ge=ye-fe+1,Qe=this._maxEntries,gt;if(Ge<=Qe)return gt=H(te.slice(fe,ye+1)),h(gt,this.toBBox),gt;Le||(Le=Math.ceil(Math.log(Ge)/Math.log(Qe)),Qe=Math.ceil(Ge/Math.pow(Qe,Le-1))),gt=H([]),gt.leaf=!1,gt.height=Le;var qe=Math.ceil(Ge/Qe),lt=qe*Math.ceil(Math.sqrt(Qe));X(te,fe,ye,lt,this.compareMinX);for(var ft=fe;ft<=ye;ft+=lt){var pt=Math.min(ft+lt-1,ye);X(te,ft,pt,qe,this.compareMinY);for(var Zt=ft;Zt<=pt;Zt+=qe){var Ct=Math.min(Zt+qe-1,pt);gt.children.push(this._build(te,Zt,Ct,Le-1))}}return h(gt,this.toBBox),gt},l.prototype._chooseSubtree=function(te,fe,ye,Le){for(;Le.push(fe),!(fe.leaf||Le.length-1===ye);){for(var Ge=1/0,Qe=1/0,gt=void 0,qe=0;qe<fe.children.length;qe++){var lt=fe.children[qe],ft=w(lt),pt=M(te,lt)-ft;pt<Qe?(Qe=pt,Ge=ft<Ge?ft:Ge,gt=lt):pt===Qe&&ft<Ge&&(Ge=ft,gt=lt)}fe=gt||fe.children[0]}return fe},l.prototype._insert=function(te,fe,ye){var Le=ye?te:this.toBBox(te),Ge=[],Qe=this._chooseSubtree(Le,this.data,fe,Ge);for(Qe.children.push(te),v(Qe,Le);fe>=0&&Ge[fe].children.length>this._maxEntries;)this._split(Ge,fe),fe--;this._adjustParentBBoxes(Le,Ge,fe)},l.prototype._split=function(te,fe){var ye=te[fe],Le=ye.children.length,Ge=this._minEntries;this._chooseSplitAxis(ye,Ge,Le);var Qe=this._chooseSplitIndex(ye,Ge,Le),gt=H(ye.children.splice(Qe,ye.children.length-Qe));gt.height=ye.height,gt.leaf=ye.leaf,h(ye,this.toBBox),h(gt,this.toBBox),fe?te[fe-1].children.push(gt):this._splitRoot(ye,gt)},l.prototype._splitRoot=function(te,fe){this.data=H([te,fe]),this.data.height=te.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},l.prototype._chooseSplitIndex=function(te,fe,ye){for(var Le,Ge=1/0,Qe=1/0,gt=fe;gt<=ye-fe;gt++){var qe=p(te,0,gt,this.toBBox),lt=p(te,gt,ye,this.toBBox),ft=I(qe,lt),pt=w(qe)+w(lt);ft<Ge?(Ge=ft,Le=gt,Qe=pt<Qe?pt:Qe):ft===Ge&&pt<Qe&&(Qe=pt,Le=gt)}return Le||ye-fe},l.prototype._chooseSplitAxis=function(te,fe,ye){var Le=te.leaf?this.compareMinX:y,Ge=te.leaf?this.compareMinY:b,Qe=this._allDistMargin(te,fe,ye,Le),gt=this._allDistMargin(te,fe,ye,Ge);Qe<gt&&te.children.sort(Le)},l.prototype._allDistMargin=function(te,fe,ye,Le){te.children.sort(Le);for(var Ge=this.toBBox,Qe=p(te,0,fe,Ge),gt=p(te,ye-fe,ye,Ge),qe=R(Qe)+R(gt),lt=fe;lt<ye-fe;lt++){var ft=te.children[lt];v(Qe,te.leaf?Ge(ft):ft),qe+=R(Qe)}for(var pt=ye-fe-1;pt>=fe;pt--){var Zt=te.children[pt];v(gt,te.leaf?Ge(Zt):Zt),qe+=R(gt)}return qe},l.prototype._adjustParentBBoxes=function(te,fe,ye){for(var Le=ye;Le>=0;Le--)v(fe[Le],te)},l.prototype._condense=function(te){for(var fe=te.length-1,ye=void 0;fe>=0;fe--)te[fe].children.length===0?fe>0?(ye=te[fe-1].children,ye.splice(ye.indexOf(te[fe]),1)):this.clear():h(te[fe],this.toBBox)};function c($,te,fe){if(!fe)return te.indexOf($);for(var ye=0;ye<te.length;ye++)if(fe($,te[ye]))return ye;return-1}function h($,te){p($,0,$.children.length,te,$)}function p($,te,fe,ye,Le){Le||(Le=H(null)),Le.minX=1/0,Le.minY=1/0,Le.maxX=-1/0,Le.maxY=-1/0;for(var Ge=te;Ge<fe;Ge++){var Qe=$.children[Ge];v(Le,$.leaf?ye(Qe):Qe)}return Le}function v($,te){return $.minX=Math.min($.minX,te.minX),$.minY=Math.min($.minY,te.minY),$.maxX=Math.max($.maxX,te.maxX),$.maxY=Math.max($.maxY,te.maxY),$}function y($,te){return $.minX-te.minX}function b($,te){return $.minY-te.minY}function w($){return($.maxX-$.minX)*($.maxY-$.minY)}function R($){return $.maxX-$.minX+($.maxY-$.minY)}function M($,te){return(Math.max(te.maxX,$.maxX)-Math.min(te.minX,$.minX))*(Math.max(te.maxY,$.maxY)-Math.min(te.minY,$.minY))}function I($,te){var fe=Math.max($.minX,te.minX),ye=Math.max($.minY,te.minY),Le=Math.min($.maxX,te.maxX),Ge=Math.min($.maxY,te.maxY);return Math.max(0,Le-fe)*Math.max(0,Ge-ye)}function N($,te){return $.minX<=te.minX&&$.minY<=te.minY&&te.maxX<=$.maxX&&te.maxY<=$.maxY}function z($,te){return te.minX<=$.maxX&&te.minY<=$.maxY&&te.maxX>=$.minX&&te.maxY>=$.minY}function H($){return{children:$,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function X($,te,fe,ye,Le){for(var Ge=[te,fe];Ge.length;)if(fe=Ge.pop(),te=Ge.pop(),!(fe-te<=ye)){var Qe=te+Math.ceil((fe-te)/ye/2)*ye;n($,Qe,te,fe,Le),Ge.push(te,Qe,Qe,fe)}}return l})})(bv);var l0=bv.exports,ii;(function(e){e.GROUP="g",e.CIRCLE="circle",e.ELLIPSE="ellipse",e.IMAGE="image",e.RECT="rect",e.LINE="line",e.POLYLINE="polyline",e.POLYGON="polygon",e.TEXT="text",e.PATH="path",e.HTML="html",e.MESH="mesh"})(ii||(ii={}));var lg;(function(e){e[e.ZERO=0]="ZERO",e[e.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(lg||(lg={}));var xv=function(){function e(){this.plugins=[]}return e.prototype.addRenderingPlugin=function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)},e.prototype.removeAllRenderingPlugins=function(){var t=this;this.plugins.forEach(function(n){var r=t.context.renderingPlugins.indexOf(n);r>=0&&t.context.renderingPlugins.splice(r,1)})},e}(),iS=function(){function e(t){this.clipSpaceNearZ=lg.NEGATIVE_ONE,this.plugins=[],this.config=(0,se.pi)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},t)}return e.prototype.registerPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n===-1&&this.plugins.push(t)},e.prototype.unregisterPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n>-1&&this.plugins.splice(n,1)},e.prototype.getPlugins=function(){return this.plugins},e.prototype.getPlugin=function(t){return this.plugins.find(function(n){return n.name===t})},e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(t){Object.assign(this.config,t)},e}();function ug(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function y_(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Bl(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function bO(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function I5(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function oS(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Jg(e){return e===void 0?0:e>360||e<-360?e%360:e}function Rf(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),Array.isArray(e)&&e.length===3?ur.d9(e):(0,Gl.Z)(e)?ur.al(e,t,n):ur.al(e[0],e[1]||t,e[2]||n)}function il(e){return e*(Math.PI/180)}function Zd(e){return e*(180/Math.PI)}function xO(e){return e=e%400,e<0&&(e+=400),e/400*360}function L5(e){return e/360}function Tx(e){return 360*e}function D5(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n,c=r*r,h=i*i,p=s*s,v=l+c+h+p,y=n*s-r*i;return y>.499995*v?(e[0]=Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):y<-.499995*v?(e[0]=-Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):(e[0]=Math.asin(2*(n*i-s*r)),e[1]=Math.atan2(2*(n*s+r*i),1-2*(h+p)),e[2]=Math.atan2(2*(n*r+i*s),1-2*(c+h))),e}function EO(e,t){var n,r,i=Math.PI*.5,s=(0,se.CR)(Kr.getScaling(ur.Ue(),t),3),l=s[0],c=s[1],h=s[2],p=Math.asin(-t[2]/l);return p<i?p>-i?(n=Math.atan2(t[6]/c,t[10]/h),r=Math.atan2(t[1]/l,t[0]/l)):(r=0,n=-Math.atan2(t[4]/c,t[5]/c)):(r=0,n=Math.atan2(t[4]/c,t[5]/c)),e[0]=n,e[1]=p,e[2]=r,e}function aS(e,t){return t.length===16?EO(e,t):D5(e,t)}function sS(e,t,n,r,i){var s=Math.cos(e),l=Math.sin(e);return Ca(r*s,i*l,0,-r*l,i*s,0,t,n,1)}function ey(e,t,n,r,i,s,l,c){c===void 0&&(c=!1);var h=2*s/(n-t),p=2*s/(r-i),v=(n+t)/(n-t),y=(r+i)/(r-i),b,w;return c?(b=-l/(l-s),w=-l*s/(l-s)):(b=-(l+s)/(l-s),w=-2*l*s/(l-s)),e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=v,e[9]=y,e[10]=b,e[11]=-1,e[12]=0,e[13]=0,e[14]=w,e[15]=0,e}function lS(e){var t=e[0],n=e[1],r=e[3],i=e[4],s=Math.sqrt(t*t+n*n),l=Math.sqrt(r*r+i*i),c=t*i-n*r;c<0&&(t<i?s=-s:l=-l),s&&(t*=1/s,n*=1/s),l&&(r*=1/l,i*=1/l);var h=Math.atan2(n,t),p=Zd(h);return[e[6],e[7],s,l,p]}var U0=Kr.create(),Bh=Kr.create(),__=Fi.Ue(),$a=[ur.Ue(),ur.Ue(),ur.Ue()],Ax=ur.Ue();function N5(e,t,n,r,i,s){if(!I1(U0,e)||(Kr.copy(Bh,U0),Bh[3]=0,Bh[7]=0,Bh[11]=0,Bh[15]=1,Math.abs(Kr.determinant(Bh))<1e-8))return!1;var l=U0[3],c=U0[7],h=U0[11],p=U0[12],v=U0[13],y=U0[14],b=U0[15];if(l!==0||c!==0||h!==0){__[0]=l,__[1]=c,__[2]=h,__[3]=b;var w=Kr.invert(Bh,Bh);if(!w)return!1;Kr.transpose(Bh,Bh),Fi.fF(i,__,Bh)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=p,t[1]=v,t[2]=y,Ox($a,U0),n[0]=ur.kE($a[0]),ur.Fv($a[0],$a[0]),r[0]=ur.AK($a[0],$a[1]),uS($a[1],$a[1],$a[0],1,-r[0]),n[1]=ur.kE($a[1]),ur.Fv($a[1],$a[1]),r[0]/=n[1],r[1]=ur.AK($a[0],$a[2]),uS($a[2],$a[2],$a[0],1,-r[1]),r[2]=ur.AK($a[1],$a[2]),uS($a[2],$a[2],$a[1],1,-r[2]),n[2]=ur.kE($a[2]),ur.Fv($a[2],$a[2]),r[1]/=n[2],r[2]/=n[2],ur.kC(Ax,$a[1],$a[2]),ur.AK($a[0],Ax)<0)for(var R=0;R<3;R++)n[R]*=-1,$a[R][0]*=-1,$a[R][1]*=-1,$a[R][2]*=-1;return s[0]=.5*Math.sqrt(Math.max(1+$a[0][0]-$a[1][1]-$a[2][2],0)),s[1]=.5*Math.sqrt(Math.max(1-$a[0][0]+$a[1][1]-$a[2][2],0)),s[2]=.5*Math.sqrt(Math.max(1-$a[0][0]-$a[1][1]+$a[2][2],0)),s[3]=.5*Math.sqrt(Math.max(1+$a[0][0]+$a[1][1]+$a[2][2],0)),$a[2][1]>$a[1][2]&&(s[0]=-s[0]),$a[0][2]>$a[2][0]&&(s[1]=-s[1]),$a[1][0]>$a[0][1]&&(s[2]=-s[2]),!0}function I1(e,t){var n=t[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}function Ox(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function uS(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var _c=function(){function e(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return e.isEmpty=function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0},e.prototype.update=function(t,n){ug(this.center,t),ug(this.halfExtents,n),y_(this.min,this.center,this.halfExtents),Bl(this.max,this.center,this.halfExtents)},e.prototype.setMinMax=function(t,n){Bl(this.center,n,t),bO(this.center,this.center,.5),y_(this.halfExtents,n,t),bO(this.halfExtents,this.halfExtents,.5),ug(this.min,t),ug(this.max,n)},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.add=function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,r=n[0],i=n[1],s=n[2],l=this.halfExtents,c=l[0],h=l[1],p=l[2],v=r-c,y=r+c,b=i-h,w=i+h,R=s-p,M=s+p,I=t.center,N=I[0],z=I[1],H=I[2],X=t.halfExtents,$=X[0],te=X[1],fe=X[2],ye=N-$,Le=N+$,Ge=z-te,Qe=z+te,gt=H-fe,qe=H+fe;ye<v&&(v=ye),Le>y&&(y=Le),Ge<b&&(b=Ge),Qe>w&&(w=Qe),gt<R&&(R=gt),qe>M&&(M=qe),n[0]=(v+y)*.5,n[1]=(b+w)*.5,n[2]=(R+M)*.5,l[0]=(y-v)*.5,l[1]=(w-b)*.5,l[2]=(M-R)*.5,this.min[0]=v,this.min[1]=b,this.min[2]=R,this.max[0]=y,this.max[1]=w,this.max[2]=M}},e.prototype.setFromTransformedAABB=function(t,n){var r=this.center,i=this.halfExtents,s=t.center,l=t.halfExtents,c=n[0],h=n[4],p=n[8],v=n[1],y=n[5],b=n[9],w=n[2],R=n[6],M=n[10],I=Math.abs(c),N=Math.abs(h),z=Math.abs(p),H=Math.abs(v),X=Math.abs(y),$=Math.abs(b),te=Math.abs(w),fe=Math.abs(R),ye=Math.abs(M);r[0]=n[12]+c*s[0]+h*s[1]+p*s[2],r[1]=n[13]+v*s[0]+y*s[1]+b*s[2],r[2]=n[14]+w*s[0]+R*s[1]+M*s[2],i[0]=I*l[0]+N*l[1]+z*l[2],i[1]=H*l[0]+X*l[1]+$*l[2],i[2]=te*l[0]+fe*l[1]+ye*l[2],y_(this.min,r,i),Bl(this.max,r,i)},e.prototype.intersects=function(t){var n=this.getMax(),r=this.getMin(),i=t.getMax(),s=t.getMin();return r[0]<=i[0]&&n[0]>=s[0]&&r[1]<=i[1]&&n[1]>=s[1]&&r[2]<=i[2]&&n[2]>=s[2]},e.prototype.intersection=function(t){if(!this.intersects(t))return null;var n=new e,r=I5([0,0,0],this.getMin(),t.getMin()),i=oS([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n},e.prototype.getNegativeFarPoint=function(t){return t.pnVertexFlag===273?ug([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},e.prototype.getPositiveFarPoint=function(t){return t.pnVertexFlag===273?ug([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},e}(),B5=function(){function e(t,n){this.distance=t||0,this.normal=n||ur.al(0,1,0),this.updatePNVertexFlag()}return e.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},e.prototype.distanceToPoint=function(t){return ur.AK(t,this.normal)-this.distance},e.prototype.normalize=function(){var t=1/ur.Zh(this.normal);ur.bA(this.normal,this.normal,t),this.distance*=t},e.prototype.intersectsLine=function(t,n,r){var i=this.distanceToPoint(t),s=this.distanceToPoint(n),l=i/(i-s),c=l>=0&&l<=1;return c&&r&&ur.t7(r,t,n,l),c},e}(),um;(function(e){e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE"})(um||(um={}));var F5=function(){function e(t){if(this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new B5)}return e.prototype.extractFromVPMatrix=function(t){var n=(0,se.CR)(t,16),r=n[0],i=n[1],s=n[2],l=n[3],c=n[4],h=n[5],p=n[6],v=n[7],y=n[8],b=n[9],w=n[10],R=n[11],M=n[12],I=n[13],N=n[14],z=n[15];ur.t8(this.planes[0].normal,l-r,v-c,R-y),this.planes[0].distance=z-M,ur.t8(this.planes[1].normal,l+r,v+c,R+y),this.planes[1].distance=z+M,ur.t8(this.planes[2].normal,l+i,v+h,R+b),this.planes[2].distance=z+I,ur.t8(this.planes[3].normal,l-i,v-h,R-b),this.planes[3].distance=z-I,ur.t8(this.planes[4].normal,l-s,v-p,R-w),this.planes[4].distance=z-N,ur.t8(this.planes[5].normal,l+s,v+p,R+w),this.planes[5].distance=z+N,this.planes.forEach(function(H){H.normalize(),H.updatePNVertexFlag()})},e}(),$f=function(){function e(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},e}(),j0=function(){function e(t,n,r,i){this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i}return e.prototype.toJSON=function(){},e}(),ru="Method not implemented.",b_="Use document.documentElement instead.",SO="Cannot append a destroyed element.",Cl;(function(e){e[e.ORBITING=0]="ORBITING",e[e.EXPLORING=1]="EXPLORING",e[e.TRACKING=2]="TRACKING"})(Cl||(Cl={}));var x_;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROTATIONAL=1]="ROTATIONAL",e[e.TRANSLATIONAL=2]="TRANSLATIONAL",e[e.CINEMATIC=3]="CINEMATIC"})(x_||(x_={}));var ad;(function(e){e[e.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",e[e.PERSPECTIVE=1]="PERSPECTIVE"})(ad||(ad={}));var cS={UPDATED:"updated"},fS=2e-4,hS=function(){function e(){this.clipSpaceNearZ=lg.NEGATIVE_ONE,this.eventEmitter=new rs,this.matrix=Kr.create(),this.right=ur.al(1,0,0),this.up=ur.al(0,1,0),this.forward=ur.al(0,0,1),this.position=ur.al(0,0,1),this.focalPoint=ur.al(0,0,0),this.distanceVector=ur.al(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Kr.create(),this.projectionMatrixInverse=Kr.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Cl.EXPLORING,this.trackingMode=x_.DEFAULT,this.projectionMode=ad.PERSPECTIVE,this.frustum=new F5,this.orthoMatrix=Kr.create()}return e.prototype.isOrtho=function(){return this.projectionMode===ad.ORTHOGRAPHIC},e.prototype.getProjectionMode=function(){return this.projectionMode},e.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},e.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},e.prototype.getFrustum=function(){return this.frustum},e.prototype.getPosition=function(){return this.position},e.prototype.getFocalPoint=function(){return this.focalPoint},e.prototype.getDollyingStep=function(){return this.dollyingStep},e.prototype.getNear=function(){return this.near},e.prototype.getFar=function(){return this.far},e.prototype.getZoom=function(){return this.zoom},e.prototype.getOrthoMatrix=function(){return this.orthoMatrix},e.prototype.getView=function(){return this.view},e.prototype.setEnableUpdate=function(t){this.enableUpdate=t},e.prototype.setType=function(t,n){return this.type=t,this.type===Cl.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Cl.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},e.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},e.prototype.setTrackingMode=function(t){if(this.type!==Cl.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},e.prototype.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},e.prototype.getViewTransform=function(){return Kr.invert(Kr.create(),this.matrix)},e.prototype.getWorldTransform=function(){return this.matrix},e.prototype.jitterProjectionMatrix=function(t,n){var r=Kr.fromTranslation(Kr.create(),[t,n,0]);this.jitteredProjectionMatrix=Kr.multiply(Kr.create(),r,this.projectionMatrix)},e.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},e.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},e.prototype.setProjectionMatrix=function(t){this.projectionMatrix=t},e.prototype.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},e.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},e.prototype.setNear=function(t){return this.projectionMode===ad.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},e.prototype.setFar=function(t){return this.projectionMode===ad.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},e.prototype.setViewOffset=function(t,n,r,i,s,l){return this.aspect=t/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=l,this.projectionMode===ad.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===ad.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===ad.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===ad.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},e.prototype.setZoomByViewportPoint=function(t,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,s=r.y,l=this.roll;this.rotate(0,0,-l),this.setPosition(i,s),this.setFocalPoint(i,s),this.setZoom(t),this.rotate(0,0,l);var c=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),h=c.x,p=c.y,v=ur.al(h-i,p-s,0),y=ur.AK(v,this.right)/ur.kE(this.right),b=ur.AK(v,this.up)/ur.kE(this.up);return this.pan(-y,-b),this},e.prototype.setPerspective=function(t,n,r,i){var s;this.projectionMode=ad.PERSPECTIVE,this.fov=r,this.near=t,this.far=n,this.aspect=i;var l=this.near*Math.tan(il(.5*this.fov))/this.zoom,c=2*l,h=this.aspect*c,p=-.5*h;if(!((s=this.view)===null||s===void 0)&&s.enabled){var v=this.view.fullWidth,y=this.view.fullHeight;p+=this.view.offsetX*h/v,l-=this.view.offsetY*c/y,h*=this.view.width/v,c*=this.view.height/y}return ey(this.projectionMatrix,p,p+h,l,l-c,t,this.far,this.clipSpaceNearZ===lg.ZERO),Kr.scale(this.projectionMatrix,this.projectionMatrix,ur.al(1,-1,1)),Kr.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},e.prototype.setOrthographic=function(t,n,r,i,s,l){var c;this.projectionMode=ad.ORTHOGRAPHIC,this.rright=n,this.left=t,this.top=r,this.bottom=i,this.near=s,this.far=l;var h=(this.rright-this.left)/(2*this.zoom),p=(this.top-this.bottom)/(2*this.zoom),v=(this.rright+this.left)/2,y=(this.top+this.bottom)/2,b=v-h,w=v+h,R=y+p,M=y-p;if(!((c=this.view)===null||c===void 0)&&c.enabled){var I=(this.rright-this.left)/this.view.fullWidth/this.zoom,N=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=I*this.view.offsetX,w=b+I*this.view.width,R-=N*this.view.offsetY,M=R-N*this.view.height}return this.clipSpaceNearZ===lg.NEGATIVE_ONE?Kr.ortho(this.projectionMatrix,b,w,M,R,s,l):Kr.orthoZO(this.projectionMatrix,b,w,M,R,s,l),Kr.scale(this.projectionMatrix,this.projectionMatrix,ur.al(1,-1,1)),Kr.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},e.prototype.setPosition=function(t,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=Rf(t,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},e.prototype.setFocalPoint=function(t,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=ur.al(0,1,0);if(this.focalPoint=Rf(t,n,r),this.trackingMode===x_.CINEMATIC){var s=ur.$X(ur.Ue(),this.focalPoint,this.position);t=s[0],n=s[1],r=s[2];var l=ur.kE(s),c=Zd(Math.asin(n/l)),h=90+Zd(Math.atan2(r,t)),p=Kr.create();Kr.rotateY(p,p,il(h)),Kr.rotateX(p,p,il(c)),i=ur.fF(ur.Ue(),[0,1,0],p)}return Kr.invert(this.matrix,Kr.lookAt(Kr.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},e.prototype.getDistance=function(){return this.distance},e.prototype.getDistanceVector=function(){return this.distanceVector},e.prototype.setDistance=function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<fS&&(this.distance=fS),this.dollyingStep=this.distance/100;var n=ur.Ue();t=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=t*r[0]+i[0],n[1]=t*r[1]+i[1],n[2]=t*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},e.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},e.prototype.setMinDistance=function(t){return this.minDistance=t,this},e.prototype.setAzimuth=function(t){return this.azimuth=Jg(t),this.computeMatrix(),this._getAxes(),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getPosition():this.type===Cl.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getAzimuth=function(){return this.azimuth},e.prototype.setElevation=function(t){return this.elevation=Jg(t),this.computeMatrix(),this._getAxes(),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getPosition():this.type===Cl.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getElevation=function(){return this.elevation},e.prototype.setRoll=function(t){return this.roll=Jg(t),this.computeMatrix(),this._getAxes(),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getPosition():this.type===Cl.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getRoll=function(){return this.roll},e.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},e.prototype.computeMatrix=function(){var t=Zo($i(),[0,0,1],il(this.roll));Kr.identity(this.matrix);var n=Zo($i(),[1,0,0],il((this.rotateWorld&&this.type!==Cl.TRACKING||this.type===Cl.TRACKING?1:-1)*this.elevation)),r=Zo($i(),[0,1,0],il((this.rotateWorld&&this.type!==Cl.TRACKING||this.type===Cl.TRACKING?1:-1)*this.azimuth)),i=tu($i(),r,n);i=tu($i(),i,t);var s=Kr.fromQuat(Kr.create(),i);this.type===Cl.ORBITING||this.type===Cl.EXPLORING?(Kr.translate(this.matrix,this.matrix,this.focalPoint),Kr.multiply(this.matrix,this.matrix,s),Kr.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Cl.TRACKING&&(Kr.translate(this.matrix,this.matrix,this.position),Kr.multiply(this.matrix,this.matrix,s))},e.prototype._setPosition=function(t,n,r){this.position=Rf(t,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},e.prototype._getAxes=function(){ur.JG(this.right,Rf(Fi.fF(Fi.Ue(),[1,0,0,0],this.matrix))),ur.JG(this.up,Rf(Fi.fF(Fi.Ue(),[0,1,0,0],this.matrix))),ur.JG(this.forward,Rf(Fi.fF(Fi.Ue(),[0,0,1,0],this.matrix))),ur.Fv(this.right,this.right),ur.Fv(this.up,this.up),ur.Fv(this.forward,this.forward)},e.prototype._getAngles=function(){var t=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=ur.kE(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===Cl.TRACKING?(this.elevation=Zd(Math.asin(n/i)),this.azimuth=Zd(Math.atan2(-t,-r))):this.rotateWorld?(this.elevation=Zd(Math.asin(n/i)),this.azimuth=Zd(Math.atan2(-t,-r))):(this.elevation=-Zd(Math.asin(n/i)),this.azimuth=-Zd(Math.atan2(-t,-r)))},e.prototype._getPosition=function(){ur.JG(this.position,Rf(Fi.fF(Fi.Ue(),[0,0,0,1],this.matrix))),this._getDistance()},e.prototype._getFocalPoint=function(){ur.kK(this.distanceVector,[0,0,-this.distance],rc(Sa(),this.matrix)),ur.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()},e.prototype._getDistance=function(){this.distanceVector=ur.$X(ur.Ue(),this.focalPoint,this.position),this.distance=ur.kE(this.distanceVector),this.dollyingStep=this.distance/100},e.prototype._getOrthoMatrix=function(){if(this.projectionMode===ad.ORTHOGRAPHIC){var t=this.position,n=Zo($i(),[0,0,1],-this.roll*Math.PI/180);Kr.fromRotationTranslationScaleOrigin(this.orthoMatrix,n,ur.al((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),ur.al(this.zoom,this.zoom,1),t)}},e.prototype.triggerUpdate=function(){if(this.enableUpdate){var t=this.getViewTransform(),n=Kr.multiply(Kr.create(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(cS.UPDATED)}},e.prototype.rotate=function(t,n,r){throw new Error(ru)},e.prototype.pan=function(t,n){throw new Error(ru)},e.prototype.dolly=function(t){throw new Error(ru)},e.prototype.createLandmark=function(t,n){throw new Error(ru)},e.prototype.gotoLandmark=function(t,n){throw new Error(ru)},e.prototype.cancelLandmarkAnimation=function(){throw new Error(ru)},e}();function Mf(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=t?t.apply(this,r):r[0],l=n.cache;if(l.has(s))return l.get(s);var c=e.apply(this,r);return n.cache=l.set(s,c)||l,c};return n.cache=new(Mf.Cache||Map),n}Mf.Cache=Map;var _o;(function(e){e[e.kUnknown=0]="kUnknown",e[e.kNumber=1]="kNumber",e[e.kPercentage=2]="kPercentage",e[e.kEms=3]="kEms",e[e.kPixels=4]="kPixels",e[e.kRems=5]="kRems",e[e.kDegrees=6]="kDegrees",e[e.kRadians=7]="kRadians",e[e.kGradians=8]="kGradians",e[e.kTurns=9]="kTurns",e[e.kMilliseconds=10]="kMilliseconds",e[e.kSeconds=11]="kSeconds",e[e.kInteger=12]="kInteger"})(_o||(_o={}));var Eu;(function(e){e[e.kUNumber=0]="kUNumber",e[e.kUPercent=1]="kUPercent",e[e.kULength=2]="kULength",e[e.kUAngle=3]="kUAngle",e[e.kUTime=4]="kUTime",e[e.kUOther=5]="kUOther"})(Eu||(Eu={}));var dS;(function(e){e[e.kAll=0]="kAll",e[e.kNonNegative=1]="kNonNegative",e[e.kInteger=2]="kInteger",e[e.kNonNegativeInteger=3]="kNonNegativeInteger",e[e.kPositiveInteger=4]="kPositiveInteger"})(dS||(dS={}));var Cx;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(Cx||(Cx={}));var Rx;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(Rx||(Rx={}));var TO=[{name:"em",unit_type:_o.kEms},{name:"px",unit_type:_o.kPixels},{name:"deg",unit_type:_o.kDegrees},{name:"rad",unit_type:_o.kRadians},{name:"grad",unit_type:_o.kGradians},{name:"ms",unit_type:_o.kMilliseconds},{name:"s",unit_type:_o.kSeconds},{name:"rem",unit_type:_o.kRems},{name:"turn",unit_type:_o.kTurns}],cm;(function(e){e[e.kUnknownType=0]="kUnknownType",e[e.kUnparsedType=1]="kUnparsedType",e[e.kKeywordType=2]="kKeywordType",e[e.kUnitType=3]="kUnitType",e[e.kSumType=4]="kSumType",e[e.kProductType=5]="kProductType",e[e.kNegateType=6]="kNegateType",e[e.kInvertType=7]="kInvertType",e[e.kMinType=8]="kMinType",e[e.kMaxType=9]="kMaxType",e[e.kClampType=10]="kClampType",e[e.kTransformType=11]="kTransformType",e[e.kPositionType=12]="kPositionType",e[e.kURLImageType=13]="kURLImageType",e[e.kColorType=14]="kColorType",e[e.kUnsupportedColorType=15]="kUnsupportedColorType"})(cm||(cm={}));var wO=function(e){return TO.find(function(t){return t.name===e}).unit_type},AO=function(e){return e?e==="number"?_o.kNumber:e==="percent"||e==="%"?_o.kPercentage:wO(e):_o.kUnknown},pS=function(e){switch(e){case _o.kNumber:case _o.kInteger:return Eu.kUNumber;case _o.kPercentage:return Eu.kUPercent;case _o.kPixels:return Eu.kULength;case _o.kMilliseconds:case _o.kSeconds:return Eu.kUTime;case _o.kDegrees:case _o.kRadians:case _o.kGradians:case _o.kTurns:return Eu.kUAngle;default:return Eu.kUOther}},OO=function(e){switch(e){case Eu.kUNumber:return _o.kNumber;case Eu.kULength:return _o.kPixels;case Eu.kUPercent:return _o.kPercentage;case Eu.kUTime:return _o.kSeconds;case Eu.kUAngle:return _o.kDegrees;default:return _o.kUnknown}},vS=function(e){var t=1;switch(e){case _o.kPixels:case _o.kDegrees:case _o.kSeconds:break;case _o.kMilliseconds:t=.001;break;case _o.kRadians:t=180/Math.PI;break;case _o.kGradians:t=.9;break;case _o.kTurns:t=360;break}return t},Mx=function(e){switch(e){case _o.kNumber:case _o.kInteger:return"";case _o.kPercentage:return"%";case _o.kEms:return"em";case _o.kRems:return"rem";case _o.kPixels:return"px";case _o.kDegrees:return"deg";case _o.kRadians:return"rad";case _o.kGradians:return"grad";case _o.kMilliseconds:return"ms";case _o.kSeconds:return"s";case _o.kTurns:return"turn"}return""},E_=function(){function e(){}return e.isAngle=function(t){return t===_o.kDegrees||t===_o.kRadians||t===_o.kGradians||t===_o.kTurns},e.isLength=function(t){return t>=_o.kEms&&t<_o.kDegrees},e.isRelativeUnit=function(t){return t===_o.kPercentage||t===_o.kEms||t===_o.kRems},e.isTime=function(t){return t===_o.kSeconds||t===_o.kMilliseconds},e.prototype.toString=function(){return this.buildCSSText(Cx.kNo,Rx.kNo,"")},e.prototype.isNumericValue=function(){return this.getType()>=cm.kUnitType&&this.getType()<=cm.kClampType},e}(),CO=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.colorSpace=n,r}return t.prototype.getType=function(){return cm.kColorType},t.prototype.to=function(n){return this},t}(E_),V0;(function(e){e[e.Constant=0]="Constant",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"})(V0||(V0={}));var L1=function(e){(0,se.ZT)(t,e);function t(n,r){var i=e.call(this)||this;return i.type=n,i.value=r,i}return t.prototype.clone=function(){return new t(this.type,this.value)},t.prototype.buildCSSText=function(n,r,i){return i},t.prototype.getType=function(){return cm.kColorType},t}(E_),sd=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.value=n,r}return t.prototype.clone=function(){return new t(this.value)},t.prototype.getType=function(){return cm.kKeywordType},t.prototype.buildCSSText=function(n,r,i){return i+this.value},t}(E_),RO=Mf(function(e){return e===void 0&&(e=""),e.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}),mS=function(e){return e.split("").map(function(t,n){return t.toUpperCase()===t?"".concat(n!==0?"-":"").concat(t.toLowerCase()):t}).join("")};function MO(e){if(!e)throw new Error}function S_(e){return typeof e=="function"}function gS(e){return typeof e=="symbol"}var k5=function(e){return Object.fromEntries(Object.entries(e).filter(function(t){var n=__read(t,2),r=n[1];return r!==void 0}))},Px={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},yS=Mf(function(e){var t=RO(e),n=Px[t];return t=(n==null?void 0:n.alias)||t,t}),PO=function(e,t){t===void 0&&(t="");var n="";return Number.isFinite(e)?(MO(Number.isNaN(e)),n="NaN"):e>0?n="infinity":n="-infinity",n+=t},Ix=function(e){return OO(pS(e))},Fl=function(e){(0,se.ZT)(t,e);function t(n,r){r===void 0&&(r=_o.kNumber);var i=e.call(this)||this,s;return typeof r=="string"?s=AO(r):s=r,i.unit=s,i.value=n,i}return t.prototype.clone=function(){return new t(this.value,this.unit)},t.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},t.prototype.getType=function(){return cm.kUnitType},t.prototype.convertTo=function(n){if(this.unit===n)return new t(this.value,this.unit);var r=Ix(this.unit);if(r!==Ix(n)||r===_o.kUnknown)return null;var i=vS(this.unit)/vS(n);return new t(this.value*i,n)},t.prototype.buildCSSText=function(n,r,i){var s;switch(this.unit){case _o.kUnknown:break;case _o.kInteger:s=Number(this.value).toFixed(0);break;case _o.kNumber:case _o.kPercentage:case _o.kEms:case _o.kRems:case _o.kPixels:case _o.kDegrees:case _o.kRadians:case _o.kGradians:case _o.kMilliseconds:case _o.kSeconds:case _o.kTurns:{var l=-999999,c=999999,h=this.value,p=Mx(this.unit);if(h<l||h>c){var v=Mx(this.unit);!Number.isFinite(h)||Number.isNaN(h)?s=PO(h,v):s=h+(v||"")}else s="".concat(h).concat(p)}}return i+=s,i},t}(E_),bc=new Fl(0,"px");new Fl(1,"px");var Ap=new Fl(0,"deg"),Lx=function(e){(0,se.ZT)(t,e);function t(n,r,i,s,l){s===void 0&&(s=1),l===void 0&&(l=!1);var c=e.call(this,"rgb")||this;return c.r=n,c.g=r,c.b=i,c.alpha=s,c.isNone=l,c}return t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},t.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},t}(CO),Su=new sd("unset"),IO=new sd("initial"),LO=new sd("inherit"),_S={"":Su,unset:Su,initial:IO,inherit:LO},Dx=function(e){return _S[e]||(_S[e]=new sd(e)),_S[e]},ty=new Lx(0,0,0,0,!0),bS=new Lx(0,0,0,0),DO=Mf(function(e,t,n,r){return new Lx(e,t,n,r)},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")")}),$l=function(e,t){return t===void 0&&(t=_o.kNumber),new Fl(e,t)};new Fl(50,"%");var Nx;(function(e){e[e.Standard=0]="Standard"})(Nx||(Nx={}));var ny;(function(e){e[e.ADDED=0]="ADDED",e[e.REMOVED=1]="REMOVED",e[e.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(ny||(ny={}));var Bx={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new j0(0,0,0,0)},Co;(function(e){e.COORDINATE="<coordinate>",e.COLOR="<color>",e.PAINT="<paint>",e.NUMBER="<number>",e.ANGLE="<angle>",e.OPACITY_VALUE="<opacity-value>",e.SHADOW_BLUR="<shadow-blur>",e.LENGTH="<length>",e.PERCENTAGE="<percentage>",e.LENGTH_PERCENTAGE="<length> | <percentage>",e.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",e.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",e.LIST_OF_POINTS="<list-of-points>",e.PATH="<path>",e.FILTER="<filter>",e.Z_INDEX="<z-index>",e.OFFSET_DISTANCE="<offset-distance>",e.DEFINED_PATH="<defined-path>",e.MARKER="<marker>",e.TRANSFORM="<transform>",e.TRANSFORM_ORIGIN="<transform-origin>",e.TEXT="<text>",e.TEXT_TRANSFORM="<text-transform>"})(Co||(Co={}));function NO(e){var t=e.type,n=e.value;return t==="hex"?"#".concat(n):t==="literal"?n:t==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var xS=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(Zt){throw new Error(t+": "+Zt)}function r(){var Zt=i();return t.length>0&&n("Invalid input not EOF"),Zt}function i(){return H(s)}function s(){return l("linear-gradient",e.linearGradient,h)||l("repeating-linear-gradient",e.repeatingLinearGradient,h)||l("radial-gradient",e.radialGradient,y)||l("repeating-radial-gradient",e.repeatingRadialGradient,y)||l("conic-gradient",e.conicGradient,y)}function l(Zt,Ct,Lt){return c(Ct,function(Tn){var Fn=Lt();return Fn&&(ft(e.comma)||n("Missing comma before color stops")),{type:Zt,orientation:Fn,colorStops:H(X)}})}function c(Zt,Ct){var Lt=ft(Zt);if(Lt){ft(e.startCall)||n("Missing (");var Tn=Ct(Lt);return ft(e.endCall)||n("Missing )"),Tn}}function h(){return p()||v()}function p(){return lt("directional",e.sideOrCorner,1)}function v(){return lt("angular",e.angleValue,1)}function y(){var Zt,Ct=b(),Lt;return Ct&&(Zt=[],Zt.push(Ct),Lt=t,ft(e.comma)&&(Ct=b(),Ct?Zt.push(Ct):t=Lt)),Zt}function b(){var Zt=w()||R();if(Zt)Zt.at=I();else{var Ct=M();if(Ct){Zt=Ct;var Lt=I();Lt&&(Zt.at=Lt)}else{var Tn=N();Tn&&(Zt={type:"default-radial",at:Tn})}}return Zt}function w(){var Zt=lt("shape",/^(circle)/i,0);return Zt&&(Zt.style=qe()||M()),Zt}function R(){var Zt=lt("shape",/^(ellipse)/i,0);return Zt&&(Zt.style=Qe()||M()),Zt}function M(){return lt("extent-keyword",e.extentKeywords,1)}function I(){if(lt("position",/^at/,0)){var Zt=N();return Zt||n("Missing positioning value"),Zt}}function N(){var Zt=z();if(Zt.x||Zt.y)return{type:"position",value:Zt}}function z(){return{x:Qe(),y:Qe()}}function H(Zt){var Ct=Zt(),Lt=[];if(Ct)for(Lt.push(Ct);ft(e.comma);)Ct=Zt(),Ct?Lt.push(Ct):n("One extra comma");return Lt}function X(){var Zt=$();return Zt||n("Expected color definition"),Zt.length=Qe(),Zt}function $(){return fe()||Le()||ye()||te()}function te(){return lt("literal",e.literalColor,0)}function fe(){return lt("hex",e.hexColor,1)}function ye(){return c(e.rgbColor,function(){return{type:"rgb",value:H(Ge)}})}function Le(){return c(e.rgbaColor,function(){return{type:"rgba",value:H(Ge)}})}function Ge(){return ft(e.number)[1]}function Qe(){return lt("%",e.percentageValue,1)||gt()||qe()}function gt(){return lt("position-keyword",e.positionKeywords,1)}function qe(){return lt("px",e.pixelValue,1)||lt("em",e.emValue,1)}function lt(Zt,Ct,Lt){var Tn=ft(Ct);if(Tn)return{type:Zt,value:Tn[Lt]}}function ft(Zt){var Ct=/^[\n\r\t\s]+/.exec(t);Ct&&pt(Ct[0].length);var Lt=Zt.exec(t);return Lt&&pt(Lt[0].length),Lt}function pt(Zt){t=t.substring(Zt)}return function(Zt){return t=Zt,r()}}();function BO(e,t,n,r){var i=il(r.value),s=0,l=0,c=s+t/2,h=l+n/2,p=Math.abs(t*Math.cos(i))+Math.abs(n*Math.sin(i)),v=e[0]+c-Math.cos(i)*p/2,y=e[1]+h-Math.sin(i)*p/2,b=e[0]+c+Math.cos(i)*p/2,w=e[1]+h+Math.sin(i)*p/2;return{x1:v,y1:y,x2:b,y2:w}}function FO(e,t,n,r,i,s){var l=r.value,c=i.value;r.unit===_o.kPercentage&&(l=r.value/100*t),i.unit===_o.kPercentage&&(c=i.value/100*n);var h=Math.max(Qs([0,0],[l,c]),Qs([0,n],[l,c]),Qs([t,n],[l,c]),Qs([t,0],[l,c]));return s&&(s instanceof Fl?h=s.value:s instanceof sd&&(s.value==="closest-side"?h=Math.min(l,t-l,c,n-c):s.value==="farthest-side"?h=Math.max(l,t-l,c,n-c):s.value==="closest-corner"&&(h=Math.min(Qs([0,0],[l,c]),Qs([0,n],[l,c]),Qs([t,n],[l,c]),Qs([t,0],[l,c]))))),{x:l+e[0],y:c+e[1],r:h}}var ES=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,SS=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Fx=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,T_=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function kO(e){var t,n,r,i=e.length;e[i-1].length=(t=e[i-1].length)!==null&&t!==void 0?t:{type:"%",value:"100"},i>1&&(e[0].length=(n=e[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var s=0,l=Number(e[0].length.value),c=1;c<i;c++){var h=(r=e[c].length)===null||r===void 0?void 0:r.value;if(!(0,ya.Z)(h)&&!(0,ya.Z)(l)){for(var p=1;p<c-s;p++)e[s+p].length={type:"%",value:"".concat(l+(Number(h)-l)*p/(c-s))};s=c,l=Number(h)}}}var zO={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},UO=Mf(function(e){var t;return e.type==="angular"?t=Number(e.value):t=zO[e.value]||0,$l(t,"deg")}),TS=Mf(function(e){var t=50,n=50,r="%",i="%";if((e==null?void 0:e.type)==="position"){var s=e.value,l=s.x,c=s.y;(l==null?void 0:l.type)==="position-keyword"&&(l.value==="left"?t=0:l.value==="center"?t=50:l.value==="right"?t=100:l.value==="top"?n=0:l.value==="bottom"&&(n=100)),(c==null?void 0:c.type)==="position-keyword"&&(c.value==="left"?t=0:c.value==="center"?n=50:c.value==="right"?t=100:c.value==="top"?n=0:c.value==="bottom"&&(n=100)),((l==null?void 0:l.type)==="px"||(l==null?void 0:l.type)==="%"||(l==null?void 0:l.type)==="em")&&(r=l==null?void 0:l.type,t=Number(l.value)),((c==null?void 0:c.type)==="px"||(c==null?void 0:c.type)==="%"||(c==null?void 0:c.type)==="em")&&(i=c==null?void 0:c.type,n=Number(c.value))}return{cx:$l(t,r),cy:$l(n,i)}}),wS=Mf(function(e){var t;if(e.indexOf("linear")>-1||e.indexOf("radial")>-1){var n=xS(e);return n.map(function(c){var h=c.type,p=c.orientation,v=c.colorStops;kO(v);var y=v.map(function(H){return{offset:$l(Number(H.length.value),"%"),color:NO(H)}});if(h==="linear-gradient")return new L1(V0.LinearGradient,{angle:p?UO(p):Ap,steps:y});if(h==="radial-gradient"&&(p||(p=[{type:"shape",value:"circle"}]),p[0].type==="shape"&&p[0].value==="circle")){var b=TS(p[0].at),w=b.cx,R=b.cy,M=void 0;if(p[0].style){var I=p[0].style,N=I.type,z=I.value;N==="extent-keyword"?M=Dx(z):M=$l(z,N)}return new L1(V0.RadialGradient,{cx:w,cy:R,size:M,steps:y})}})}var r=e[0];if(e[1]==="("||e[2]==="("){if(r==="l"){var i=ES.exec(e);if(i){var s=((t=i[2].match(T_))===null||t===void 0?void 0:t.map(function(c){return c.split(":")}))||[];return[new L1(V0.LinearGradient,{angle:$l(parseFloat(i[1]),"deg"),steps:s.map(function(c){var h=(0,se.CR)(c,2),p=h[0],v=h[1];return{offset:$l(Number(p)*100,"%"),color:v}})})]}}else if(r==="r"){var l=AS(e);if(l)if(u(l))e=l;else return[new L1(V0.RadialGradient,l)]}else if(r==="p")return jO(e)}});function AS(e){var t,n=SS.exec(e);if(n){var r=((t=n[4].match(T_))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:$l(50,"%"),cy:$l(50,"%"),steps:r.map(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1];return{offset:$l(Number(l)*100,"%"),color:c}})}}return null}function jO(e){var t=Fx.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function z5(e){return!!e.type&&!!e.value}function w_(e){return e&&!!e.image}function D1(e){return e&&!(0,ya.Z)(e.r)&&!(0,ya.Z)(e.g)&&!(0,ya.Z)(e.b)}var H0=Mf(function(e){if(w_(e))return(0,se.pi)({repetition:"repeat"},e);if((0,ya.Z)(e)&&(e=""),e==="transparent")return bS;if(e==="currentColor")e="black";else if(e==="none")return ty;var t=wS(e);if(t)return t;var n=F0(e),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),DO.apply(void 0,(0,se.ev)([],(0,se.CR)(r),!1))});function OS(e,t){if(!(!D1(e)||!D1(t)))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round((0,d.Z)(r[i],0,255));return r[3]=(0,d.Z)(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function Ev(e,t){if((0,ya.Z)(t))return $l(0,"px");if(t="".concat(t).trim().toLowerCase(),isFinite(Number(t))){if("px".search(e)>=0)return $l(Number(t),"px");if("deg".search(e)>=0)return $l(Number(t),"deg")}var n=[];t=t.replace(e,function(i){return n.push(i),"U"+i});var r="U("+e.source+")";return n.map(function(i){return $l(Number(t.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var kx=function(e){return Ev(new RegExp("px","g"),e)},CS=Mf(kx),VO=function(e){return Ev(new RegExp("%","g"),e)};Mf(VO);var cg=function(e){return(0,Gl.Z)(e)||isFinite(Number(e))?$l(Number(e)||0,"px"):Ev(new RegExp("px|%|em|rem","g"),e)},ry=Mf(cg),zx=function(e){return Ev(new RegExp("deg|rad|grad|turn","g"),e)},RS=Mf(zx);function HO(e,t,n,r,i){i===void 0&&(i=0);var s="",l=e.value||0,c=t.value||0,h=Ix(e.unit),p=e.convertTo(h),v=t.convertTo(h);return p&&v?(l=p.value,c=v.value,s=Mx(e.unit)):(Fl.isLength(e.unit)||Fl.isLength(t.unit))&&(l=Xd(e,i,n),c=Xd(t,i,n),s="px"),[l,c,function(y){return r&&(y=Math.max(y,0)),y+s}]}function ld(e){var t=0;return e.unit===_o.kDegrees?t=e.value:e.unit===_o.kRadians?t=Zd(Number(e.value)):e.unit===_o.kTurns&&(t=Tx(Number(e.value))),t}function MS(e,t){var n;return Array.isArray(e)?n=e.map(function(r){return Number(r)}):u(e)?n=e.split(" ").map(function(r){return Number(r)}):(0,Gl.Z)(e)&&(n=[e]),t===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function PS(e){return u(e)?e.split(" ").map(function(t){return ry(t)}):e.map(function(t){return ry(t.toString())})}function Xd(e,t,n,r){if(r===void 0&&(r=!1),e.unit===_o.kPixels)return Number(e.value);if(e.unit===_o.kPercentage&&n){var i=n.nodeName===ii.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2}return 0}var WO=function(e){return Ev(/deg|rad|grad|turn|px|%/g,e)},GO=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function IS(e){if(e===void 0&&(e=""),e=e.toLowerCase().trim(),e==="none")return[];for(var t=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];if(i=r.index+r[0].length,GO.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(s){return WO(s)||H0(s)})}),t.lastIndex===e.length)return n}return[]}function LS(e){return e.toString()}var iy=function(e){return typeof e=="number"?$l(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?$l(Number(e)):$l(0)},fg=Mf(iy);Mf(function(e){return u(e)?e.split(" ").map(fg):e.map(fg)});function Ux(e,t){return[e,t,LS]}function jx(e,t){return function(n,r){return[n,r,function(i){return LS((0,d.Z)(i,e,t))}]}}function DS(e,t){if(e.length===t.length)return[e,t,function(n){return n}]}function Vx(e){return e.parsedStyle.d.totalLength===0&&(e.parsedStyle.d.totalLength=Xa(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength}function ZO(e){return e.parsedStyle.points.totalLength===0&&(e.parsedStyle.points.totalLength=g_(e.parsedStyle.points.points)),e.parsedStyle.points.totalLength}function XO(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t],i=r[0];if(i==="M"&&n){var s=n[0],l=[r[1],r[2]],c=void 0;s==="L"||s==="M"?c=[n[1],n[2]]:(s==="C"||s==="A"||s==="Q")&&(c=[n[n.length-2],n[n.length-1]]),c&&N1(l,c)&&(e.splice(t,1),t--)}}}function $O(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r],s=i[0];if(s==="C"||s==="A"||s==="Q"){t=!0;break}}return t}function U5(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var s=e[i],l=s[0];l==="M"?(r.length&&(n.push(r),r=[]),r.push([s[1],s[2]])):l==="Z"?r.length&&(t.push(r),r=[]):r.push([s[1],s[2]])}return r.length>0&&n.push(r),{polygons:t,polylines:n}}function N1(e,t){return e[0]===t[0]&&e[1]===t[1]}function Hx(e,t){for(var n=[],r=[],i=[],s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,h=l.params,p=l.prePoint,v=void 0;switch(l.command){case"Q":v=Qg(p[0],p[1],h[1],h[2],h[3],h[4]);break;case"C":v=yv(p[0],p[1],h[1],h[2],h[3],h[4],h[5],h[6]);break;case"A":var y=l.arcParams;v=ng(y.cx,y.cy,y.rx,y.ry,y.xRotation,y.startAngle,y.endAngle);break;default:n.push(c[0]),r.push(c[1]);break}v&&(l.box=v,n.push(v.x,v.x+v.width),r.push(v.y,v.y+v.height)),t&&(l.command==="L"||l.command==="M")&&l.prePoint&&l.nextPoint&&i.push(l)}n=n.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0}),r=r.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0});var b=Ya(n),w=Ya(r),R=Vo(n),M=Vo(r);if(i.length===0)return{x:b,y:w,width:R-b,height:M-w};for(var s=0;s<i.length;s++){var l=i[s],c=l.currentPoint,I=void 0;c[0]===b?(I=B1(l,t),b=b-I.xExtra):c[0]===R&&(I=B1(l,t),R=R+I.xExtra),c[1]===w?(I=B1(l,t),w=w-I.yExtra):c[1]===M&&(I=B1(l,t),M=M+I.yExtra)}return{x:b,y:w,width:R-b,height:M-w}}function B1(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,s=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),l=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),c=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),h=Math.acos((s+l-c)/(2*Math.sqrt(s)*Math.sqrt(l)));if(!h||Math.sin(h)===0||rl(h,0))return{xExtra:0,yExtra:0};var p=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),v=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));p=p>Math.PI/2?Math.PI-p:p,v=v>Math.PI/2?Math.PI-v:v;var y={xExtra:Math.cos(h/2-p)*(t/2*(1/Math.sin(h/2)))-t/2||0,yExtra:Math.cos(v-h/2)*(t/2*(1/Math.sin(h/2)))-t/2||0};return y}function NS(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}var BS=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),i=e.x*t.y-e.y*t.x<0?-1:1,s=i*Math.acos(n/r);return s},FS=function(e,t,n,r,i,s,l,c){t=Math.abs(t),n=Math.abs(n),r=Nl(r,360);var h=il(r);if(e.x===l.x&&e.y===l.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var p=(e.x-l.x)/2,v=(e.y-l.y)/2,y={x:Math.cos(h)*p+Math.sin(h)*v,y:-Math.sin(h)*p+Math.cos(h)*v},b=Math.pow(y.x,2)/Math.pow(t,2)+Math.pow(y.y,2)/Math.pow(n,2);b>1&&(t=Math.sqrt(b)*t,n=Math.sqrt(b)*n);var w=Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(y.y,2)-Math.pow(n,2)*Math.pow(y.x,2),R=Math.pow(t,2)*Math.pow(y.y,2)+Math.pow(n,2)*Math.pow(y.x,2),M=w/R;M=M<0?0:M;var I=(i!==s?1:-1)*Math.sqrt(M),N={x:I*(t*y.y/n),y:I*(-(n*y.x)/t)},z={x:Math.cos(h)*N.x-Math.sin(h)*N.y+(e.x+l.x)/2,y:Math.sin(h)*N.x+Math.cos(h)*N.y+(e.y+l.y)/2},H={x:(y.x-N.x)/t,y:(y.y-N.y)/n},X=BS({x:1,y:0},H),$={x:(-y.x-N.x)/t,y:(-y.y-N.y)/n},te=BS(H,$);!s&&te>0?te-=2*Math.PI:s&&te<0&&(te+=2*Math.PI),te%=2*Math.PI;var fe=X+te*c,ye=t*Math.cos(fe),Le=n*Math.sin(fe),Ge={x:Math.cos(h)*ye-Math.sin(h)*Le+z.x,y:Math.sin(h)*ye+Math.cos(h)*Le+z.y,ellipticalArcStartAngle:X,ellipticalArcEndAngle:X+te,ellipticalArcAngle:fe,ellipticalArcCenter:z,resultantRx:t,resultantRy:n};return Ge};function YO(e){for(var t=[],n=null,r=null,i=null,s=0,l=e.length,c=0;c<l;c++){var h=e[c];r=e[c+1];var p=h[0],v={command:p,prePoint:n,params:h,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(p){case"M":i=[h[1],h[2]],s=c;break;case"A":var y=KO(n,h);v.arcParams=y;break}if(p==="Z")n=i,r=e[s+1];else{var b=h.length;n=[h[b-2],h[b-1]]}r&&r[0]==="Z"&&(r=e[s],t[s]&&(t[s].prePoint=n)),v.currentPoint=n,t[s]&&N1(n,t[s].currentPoint)&&(t[s].prePoint=v.prePoint);var w=r?[r[r.length-2],r[r.length-1]]:null;v.nextPoint=w;var R=v.prePoint;if(["L","H","V"].includes(p))v.startTangent=[R[0]-n[0],R[1]-n[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]];else if(p==="Q"){var M=[h[1],h[2]];v.startTangent=[R[0]-M[0],R[1]-M[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]]}else if(p==="T"){var I=t[c-1],M=NS(I.currentPoint,R);I.command==="Q"?(v.command="Q",v.startTangent=[R[0]-M[0],R[1]-M[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]]):(v.command="TL",v.startTangent=[R[0]-n[0],R[1]-n[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]])}else if(p==="C"){var N=[h[1],h[2]],z=[h[3],h[4]];v.startTangent=[R[0]-N[0],R[1]-N[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]],v.startTangent[0]===0&&v.startTangent[1]===0&&(v.startTangent=[N[0]-z[0],N[1]-z[1]]),v.endTangent[0]===0&&v.endTangent[1]===0&&(v.endTangent=[z[0]-N[0],z[1]-N[1]])}else if(p==="S"){var I=t[c-1],N=NS(I.currentPoint,R),z=[h[1],h[2]];I.command==="C"?(v.command="C",v.startTangent=[R[0]-N[0],R[1]-N[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]]):(v.command="SQ",v.startTangent=[R[0]-z[0],R[1]-z[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]])}else if(p==="A"){var H=oy(v,0),X=H.x,$=H.y,te=oy(v,1,!1),fe=te.x,ye=te.y;v.startTangent=[X,$],v.endTangent=[fe,ye]}t.push(v)}return t}function oy(e,t,n){n===void 0&&(n=!0);var r=e.arcParams,i=r.rx,s=i===void 0?0:i,l=r.ry,c=l===void 0?0:l,h=r.xRotation,p=r.arcFlag,v=r.sweepFlag,y=FS({x:e.prePoint[0],y:e.prePoint[1]},s,c,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},t),b=FS({x:e.prePoint[0],y:e.prePoint[1]},s,c,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),w=b.x-y.x,R=b.y-y.y,M=Math.sqrt(w*w+R*R);return{x:-w/M,y:-R/M}}function fm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Wx(e,t){return fm(e)*fm(t)?(e[0]*t[0]+e[1]*t[1])/(fm(e)*fm(t)):1}function kS(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Wx(e,t))}function KO(e,t){var n=t[1],r=t[2],i=Nl(il(t[3]),Math.PI*2),s=t[4],l=t[5],c=e[0],h=e[1],p=t[6],v=t[7],y=Math.cos(i)*(c-p)/2+Math.sin(i)*(h-v)/2,b=-1*Math.sin(i)*(c-p)/2+Math.cos(i)*(h-v)/2,w=y*y/(n*n)+b*b/(r*r);w>1&&(n*=Math.sqrt(w),r*=Math.sqrt(w));var R=n*n*(b*b)+r*r*(y*y),M=R?Math.sqrt((n*n*(r*r)-R)/R):1;s===l&&(M*=-1),isNaN(M)&&(M=0);var I=r?M*n*b/r:0,N=n?M*-r*y/n:0,z=(c+p)/2+Math.cos(i)*I-Math.sin(i)*N,H=(h+v)/2+Math.sin(i)*I+Math.cos(i)*N,X=[(y-I)/n,(b-N)/r],$=[(-1*y-I)/n,(-1*b-N)/r],te=kS([1,0],X),fe=kS(X,$);return Wx(X,$)<=-1&&(fe=Math.PI),Wx(X,$)>=1&&(fe=0),l===0&&fe>0&&(fe=fe-2*Math.PI),l===1&&fe<0&&(fe=fe+2*Math.PI),{cx:z,cy:H,rx:N1(e,[p,v])?0:n,ry:N1(e,[p,v])?0:r,startAngle:te,endAngle:te+fe,xRotation:i,arcFlag:s,sweepFlag:l}}function zS(e,t,n){return e.reduce(function(r,i){var s="";if(i[0]==="M"||i[0]==="L"){var l=ur.al(i[1],i[2],0);n&&ur.fF(l,l,n),s="".concat(i[0]).concat(l[0],",").concat(l[1])}else if(i[0]==="Z")s=i[0];else if(i[0]==="C"){var c=ur.al(i[1],i[2],0),h=ur.al(i[3],i[4],0),p=ur.al(i[5],i[6],0);n&&(ur.fF(c,c,n),ur.fF(h,h,n),ur.fF(p,p,n)),s="".concat(i[0]).concat(c[0],",").concat(c[1],",").concat(h[0],",").concat(h[1],",").concat(p[0],",").concat(p[1])}else if(i[0]==="A"){var v=ur.al(i[6],i[7],0);n&&ur.fF(v,v,n),s="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(v[0],",").concat(v[1])}else if(i[0]==="Q"){var c=ur.al(i[1],i[2],0),h=ur.al(i[3],i[4],0);n&&(ur.fF(c,c,n),ur.fF(h,h,n)),s="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=s},"")}function qO(e,t,n,r){return[["M",e,t],["L",n,r]]}function US(e,t,n,r){var i=(-1+Math.sqrt(2))/3*4,s=e*i,l=t*i,c=n-e,h=n+e,p=r-t,v=r+t;return[["M",c,r],["C",c,r-l,n-s,p,n,p],["C",n+s,p,h,r-l,h,r],["C",h,r+l,n+s,v,n,v],["C",n-s,v,c,r+l,c,r],["Z"]]}function QO(e,t){var n=e.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return t&&n.push(["Z"]),n}function JO(e,t,n,r,i){if(i){var s=(0,se.CR)(i,4),l=s[0],c=s[1],h=s[2],p=s[3],v=e>0?1:-1,y=t>0?1:-1,b=v+y!==0?1:0;return[["M",v*l+n,r],["L",e-v*c+n,r],c?["A",c,c,0,0,b,e+n,y*c+r]:null,["L",e+n,t-y*h+r],h?["A",h,h,0,0,b,e+n-v*h,t+r]:null,["L",n+v*p,t+r],p?["A",p,p,0,0,b,n,t+r-y*p]:null,["L",n,y*l+r],l?["A",l,l,0,0,b,v*l+n,r]:null,["Z"]].filter(function(w){return w})}return[["M",n,r],["L",n+e,r],["L",n+e,r+t],["L",n,r+t],["Z"]]}function jS(e,t){t===void 0&&(t=e.getLocalTransform());var n=[];switch(e.nodeName){case ii.LINE:var r=e.parsedStyle,i=r.x1,s=i===void 0?0:i,l=r.y1,c=l===void 0?0:l,h=r.x2,p=h===void 0?0:h,v=r.y2,y=v===void 0?0:v;n=qO(s,c,p,y);break;case ii.CIRCLE:{var b=e.parsedStyle,w=b.r,R=w===void 0?0:w,M=b.cx,I=M===void 0?0:M,N=b.cy,z=N===void 0?0:N;n=US(R,R,I,z);break}case ii.ELLIPSE:{var H=e.parsedStyle,X=H.rx,$=X===void 0?0:X,te=H.ry,fe=te===void 0?0:te,ye=H.cx,I=ye===void 0?0:ye,Le=H.cy,z=Le===void 0?0:Le;n=US($,fe,I,z);break}case ii.POLYLINE:case ii.POLYGON:var Ge=e.parsedStyle.points;n=QO(Ge.points,e.nodeName===ii.POLYGON);break;case ii.RECT:var Qe=e.parsedStyle,gt=Qe.width,qe=gt===void 0?0:gt,lt=Qe.height,ft=lt===void 0?0:lt,pt=Qe.x,Zt=pt===void 0?0:pt,Ct=Qe.y,Lt=Ct===void 0?0:Ct,Tn=Qe.radius,Fn=Tn&&Tn.some(function(tr){return tr!==0});n=JO(qe,ft,Zt,Lt,Fn&&Tn.map(function(tr){return(0,d.Z)(tr,0,Math.min(Math.abs(qe)/2,Math.abs(ft)/2))}));break;case ii.PATH:var ir=e.parsedStyle.d.absolutePath;n=(0,se.ev)([],(0,se.CR)(ir),!1);break}if(n.length)return zS(n,e,t)}function j5(e,t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0);var s=e.map(function(l,c){var h=l[0],p=e[c+1],v=c===0&&(t!==0||n!==0),y=(c===e.length-1||p&&(p[0]==="M"||p[0]==="Z"))&&r!==0&&i!==0;switch(h){case"M":return v?"M ".concat(l[1]+t,",").concat(l[2]+n," L ").concat(l[1],",").concat(l[2]):"M ".concat(l[1],",").concat(l[2]);case"L":return"L ".concat(l[1]+(y?r:0),",").concat(l[2]+(y?i:0));case"Q":return"Q ".concat(l[1]," ").concat(l[2],",").concat(l[3]," ").concat(l[4])+(y?" L ".concat(l[3]+r,",").concat(l[4]+i):"");case"C":return"C ".concat(l[1]," ").concat(l[2],",").concat(l[3]," ").concat(l[4],",").concat(l[5]," ").concat(l[6])+(y?" L ".concat(l[5]+r,",").concat(l[6]+i):"");case"A":return"A ".concat(l[1]," ").concat(l[2]," ").concat(l[3]," ").concat(l[4]," ").concat(l[5]," ").concat(l[6]," ").concat(l[7])+(y?" L ".concat(l[6]+r,",").concat(l[7]+i):"");case"Z":return"Z"}}).join(" ");return~s.indexOf("NaN")?"":s}var VS=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=Nr(e)}catch(b){t=Nr(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}XO(t);var n=$O(t),r=U5(t),i=r.polygons,s=r.polylines,l=YO(t),c=Hx(l,0),h=c.x,p=c.y,v=c.width,y=c.height;return{absolutePath:t,hasArc:n,segments:l,polygons:i,polylines:s,totalLength:0,rect:{x:Number.isFinite(h)?h:0,y:Number.isFinite(p)?p:0,width:Number.isFinite(v)?v:0,height:Number.isFinite(y)?y:0}}},eC=Mf(VS);function Gx(e){return u(e)?eC(e):VS(e)}function tC(e,t,n){var r=e.curve,i=t.curve;(!r||r.length===0)&&(r=Xl(e.absolutePath,!1),e.curve=r),(!i||i.length===0)&&(i=Xl(t.absolutePath,!1),t.curve=i);var s=[r,i];r.length!==i.length&&(s=Js(r,i));var l=Wc(s[0])!==Wc(s[1])?gc(s[0]):vl(s[0]);return[l,xu(s[1],l),function(c){return c}]}function HS(e,t){var n;return u(e)?n=e.split(" ").map(function(r){var i=(0,se.CR)(r.split(","),2),s=i[0],l=i[1];return[Number(s),Number(l)]}):n=e,{points:n,totalLength:0,segments:[]}}function nC(e,t){return[e.points,t.points,function(n){return n}]}var sc=null;function ud(e){return function(t){var n=0;return e.map(function(r){return r===sc?t[n++]:r})}}function ay(e){return e}var F1={matrix:["NNNNNN",[sc,sc,0,0,sc,sc,0,0,0,0,1,0,sc,sc,0,1],ay],matrix3d:["NNNNNNNNNNNNNNNN",ay],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",ud([sc,sc,new Fl(1)]),ay],scalex:["N",ud([sc,new Fl(1),new Fl(1)]),ud([sc,new Fl(1)])],scaley:["N",ud([new Fl(1),sc,new Fl(1)]),ud([new Fl(1),sc])],scalez:["N",ud([new Fl(1),new Fl(1),sc])],scale3d:["NNN",ay],skew:["Aa",null,ay],skewx:["A",null,ud([sc,Ap])],skewy:["A",null,ud([Ap,sc])],translate:["Tt",ud([sc,sc,bc]),ay],translatex:["T",ud([sc,bc,bc]),ud([sc,bc])],translatey:["T",ud([bc,sc,bc]),ud([bc,sc])],translatez:["L",ud([bc,bc,sc])],translate3d:["TTL",ay]};function A_(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=F1[s];if(!l)return[];var c=r[2].split(","),h=l[0];if(h.length<c.length)return[];for(var p=[],v=0;v<h.length;v++){var y=c[v],b=h[v],w=void 0;if(y?w={A:function(R){return R.trim()==="0"?Ap:RS(R)},N:fg,T:ry,L:CS}[b.toUpperCase()](y):w={a:Ap,n:p[0],t:bc}[b],w===void 0)return[];p.push(w)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function WS(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=F1[s];if(!l)return[];var c=r[2].split(","),h=l[0];if(h.length<c.length)return[];for(var p=[],v=0;v<h.length;v++){var y=c[v],b=h[v],w=void 0;if(y?w={A:function(R){return R.trim()==="0"?Ap:zx(R)},N:iy,T:cg,L:kx}[b.toUpperCase()](y):w={a:Ap,n:p[0],t:bc}[b],w===void 0)return[];p.push(w)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function rC(e){var t,n,r,i;switch(e.t){case"rotatex":return i=il(ld(e.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=il(ld(e.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=il(ld(e.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=il(ld(e.d[3]));var s=t*t+n*n+r*r;if(s===0)t=1,n=0,r=0;else if(s!==1){var l=Math.sqrt(s);t/=l,n/=l,r/=l}var c=Math.sin(i/2),h=c*Math.cos(i/2),p=c*c;return[1-2*(n*n+r*r)*p,2*(t*n*p+r*h),2*(t*r*p-n*h),0,2*(t*n*p-r*h),1-2*(t*t+r*r)*p,2*(n*r*p+t*h),0,2*(t*r*p+n*h),2*(n*r*p-t*h),1-2*(t*t+n*n)*p,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var v=il(ld(e.d[0])),y=il(ld(e.d[1]));return[1,Math.tan(y),0,0,Math.tan(v),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=il(ld(e.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=il(ld(e.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return t=Xd(e.d[0],0,null)||0,n=Xd(e.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,0,1];case"translatex":return t=Xd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1];case"translatey":return n=Xd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=Xd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return t=Xd(e.d[0],0,null)||0,n=Xd(e.d[1],0,null)||0,r=Xd(e.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1];case"perspective":var b=Xd(e.d[0],0,null)||0,w=b?-1/b:0;return[1,0,0,0,0,1,0,0,0,0,1,w,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(R){return R.value})}}function hg(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function iC(e){return e.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(rC).reduce(hg)}function GS(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],s=[0,0,0,1];return N5(iC(e),t,n,r,i,s),[[t,n,r,s,i]]}var oC=function(){function e(r,i){for(var s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],l=0;l<4;l++)for(var c=0;c<4;c++)for(var h=0;h<4;h++)s[l][c]+=i[l][h]*r[h][c];return s}function t(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,s,l,c){for(var h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=0;p<4;p++)h[p][3]=c[p];for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[3][p]+=r[v]*h[v][p];var y=l[0],b=l[1],w=l[2],R=l[3],M=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];M[0][0]=1-2*(b*b+w*w),M[0][1]=2*(y*b-w*R),M[0][2]=2*(y*w+b*R),M[1][0]=2*(y*b+w*R),M[1][1]=1-2*(y*y+w*w),M[1][2]=2*(b*w-y*R),M[2][0]=2*(y*w-b*R),M[2][1]=2*(b*w+y*R),M[2][2]=1-2*(y*y+b*b),h=e(h,M);var I=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];s[2]&&(I[2][1]=s[2],h=e(h,I)),s[1]&&(I[2][1]=0,I[2][0]=s[0],h=e(h,I)),s[0]&&(I[2][0]=0,I[1][0]=s[0],h=e(h,I));for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[p][v]*=i[p];return t(h)?[h[0][0],h[0][1],h[1][0],h[1][1],h[3][0],h[3][1]]:h[0].concat(h[1],h[2],h[3])}return n}();function aC(e){return e.toFixed(6).replace(".000000","")}function ZS(e,t){var n,r;return e.decompositionPair!==t&&(e.decompositionPair=t,n=GS(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=GS(t)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?t[0].d:e[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var s=lC(n[0][3],r[0][3],i[5]),l=oC(i[0],i[1],i[2],s,i[4]),c=l.map(aC).join(",");return c}])}function sC(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function lC(e,t,n){var r=sC(e,t);r=(0,d.Z)(r,-1,1);var i=[];if(r===1)i=e;else for(var s=Math.acos(r),l=Math.sin(n*s)*1/Math.sqrt(1-r*r),c=0;c<4;c++)i.push(e[c]*(Math.cos(n*s)-r*l)+t[c]*l);return i}function Zx(e){return e.replace(/[xy]/,"")}function Xx(e){return e.replace(/(x|y|z|3d)?$/,"3d")}var uC=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function cC(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=function(te){var fe=e[te],ye=fe.t,Le=fe.d,Ge=ye.substring(0,5)==="scale"?1:0;t.push({t:ye,d:Le.map(function(Qe){return typeof Qe=="number"?$l(Ge):$l(Ge,Qe.unit)})})},s=0;s<e.length;s++)i(s)}var l=[],c=[],h=[];if(e.length!==t.length){var p=ZS(e,t);l=[p[0]],c=[p[1]],h=[["matrix",[p[2]]]]}else for(var s=0;s<e.length;s++){var v=e[s].t,y=t[s].t,b=e[s].d,w=t[s].d,R=F1[v],M=F1[y],I=void 0;if(uC(v,y)){var p=ZS([e[s]],[t[s]]);l.push(p[0]),c.push(p[1]),h.push(["matrix",[p[2]]]);continue}else if(v===y)I=v;else if(R[2]&&M[2]&&Zx(v)===Zx(y))I=Zx(v),b=R[2](b),w=M[2](w);else if(R[1]&&M[1]&&Xx(v)===Xx(y))I=Xx(v),b=R[1](b),w=M[1](w);else{var p=ZS(e,t);l=[p[0]],c=[p[1]],h=[["matrix",[p[2]]]];break}for(var N=[],z=[],H=[],X=0;X<b.length;X++){var p=HO(b[X],w[X],n,!1,X);N[X]=p[0],z[X]=p[1],H.push(p[2])}l.push(N),c.push(z),h.push([I,H])}if(r){var $=l;l=c,c=$}return[l,c,function(te){return te.map(function(fe,ye){var Le=fe.map(function(Ge,Qe){return h[ye][1][Qe](Ge)}).join(",");return h[ye][0]==="matrix"&&Le.split(",").length===16&&(h[ye][0]="matrix3d"),h[ye][0]==="matrix3d"&&Le.split(",").length===6&&(h[ye][0]="matrix"),h[ye][0]+"("+Le+")"}).join(" ")}]}var fC=Mf(function(e){if(u(e)){if(e==="text-anchor")return[$l(0,"px"),$l(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[ry(O_(t[0])),ry(O_(t[1]))]}else return[$l(e[0]||0,"px"),$l(e[1]||0,"px")]}),hC=function(e){if(u(e)){if(e==="text-anchor")return[$l(0,"px"),$l(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[cg(O_(t[0])),cg(O_(t[1]))]}else return[$l(e[0]||0,"px"),$l(e[1]||0,"px")]};function O_(e){return e==="center"?"50%":e==="left"||e==="top"?"0%":e==="right"||e==="bottom"?"100%":e}var $x=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Co.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Co.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Co.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Co.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Co.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Co.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Co.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Co.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Co.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Co.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Co.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Co.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Co.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Co.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Co.FILTER},{n:"clipPath",syntax:Co.DEFINED_PATH},{n:"textPath",syntax:Co.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Co.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Co.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Co.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Co.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Co.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Co.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Co.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Co.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Co.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Co.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Co.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Co.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Co.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Co.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Co.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Co.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Co.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Co.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Co.NUMBER,d:function(e){return e===ii.PATH||e===ii.POLYGON||e===ii.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Co.MARKER},{n:"markerEnd",syntax:Co.MARKER},{n:"markerMid",syntax:Co.MARKER},{n:"markerStartOffset",syntax:Co.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Co.LENGTH,l:!0,int:!0,d:"0"}],XS=$x.filter(function(e){return!!e.l}).map(function(e){return e.n}),hm={},sy=new WeakMap,$S=function(e,t){var n=sy.get(e);return!n||n.length===0?!0:n.includes(t)},dC=function(){function e(t){var n=this;this.runtime=t,$x.forEach(function(r){n.registerMetadata(r)})}return e.prototype.registerMetadata=function(t){(0,se.ev)([t.n],(0,se.CR)(t.a||[]),!1).forEach(function(n){hm[n]=t})},e.prototype.unregisterMetadata=function(t){delete hm[t]},e.prototype.getPropertySyntax=function(t){return this.runtime.CSSPropertySyntaxFactory[t]},e.prototype.processProperties=function(t,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var v=r.skipUpdateAttribute,y=r.skipParse,b=r.forceUpdateGeometry,w=r.usedAttributes,R=r.memoize,M=b,I=Object.keys(n);I.forEach(function(N){var z;v||(t.attributes[N]=n[N]),!M&&(!((z=hm[N])===null||z===void 0)&&z.l)&&(M=!0)}),y||I.forEach(function(N){t.computedStyle[N]=i.parseProperty(N,t.attributes[N],t,R)}),w!=null&&w.length&&(I=Array.from(new Set(I.concat(w)))),I.forEach(function(N){N in t.computedStyle&&(t.parsedStyle[N]=i.computeProperty(N,t.computedStyle[N],t,R))}),M&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t)),I.forEach(function(N){N in t.parsedStyle&&i.postProcessProperty(N,t,I)}),this.runtime.enableCSSParsing&&t.children.length&&I.forEach(function(N){N in t.parsedStyle&&i.isPropertyInheritable(N)&&t.children.forEach(function(z){z.internalSetAttribute(N,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(t.attributes,n);var s=Object.keys(n),l=t.parsedStyle.clipPath,c=t.parsedStyle.offsetPath;t.parsedStyle=Object.assign(t.parsedStyle,n);var h=!!r.forceUpdateGeometry;if(!h){for(var p=0;p<XS.length;p++)if(XS[p]in n){h=!0;break}}n.fill&&(t.parsedStyle.fill=H0(n.fill)),n.stroke&&(t.parsedStyle.stroke=H0(n.stroke)),n.shadowColor&&(t.parsedStyle.shadowColor=H0(n.shadowColor)),n.filter&&(t.parsedStyle.filter=IS(n.filter)),(0,ya.Z)(n.radius)||(t.parsedStyle.radius=MS(n.radius,4)),(0,ya.Z)(n.lineDash)||(t.parsedStyle.lineDash=MS(n.lineDash,2)),n.points&&(t.parsedStyle.points=HS(n.points)),n.d===""&&(t.parsedStyle.d=(0,se.pi)({},Bx)),n.d&&(t.parsedStyle.d=Gx(n.d)),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},t,null),js(n.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",l,n.clipPath,t,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",c,n.offsetPath,t,this.runtime),n.transform&&(t.parsedStyle.transform=A_(n.transform)),n.transformOrigin&&(t.parsedStyle.transformOrigin=fC(n.transformOrigin)),n.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),(0,ya.Z)(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(t,s),(0,ya.Z)(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(t,s),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(t,s),n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(t,s),h&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t))}},e.prototype.parseProperty=function(t,n,r,i){var s=hm[t],l=n;if((n===""||(0,ya.Z)(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")l=Dx(n);else if(s){var c=s.k,h=s.syntax,p=h&&this.getPropertySyntax(h);c&&c.indexOf(n)>-1?l=Dx(n):p&&(!i&&p.parserUnmemoize?l=p.parserUnmemoize(n,r):p.parser&&(l=p.parser(n,r)))}return l},e.prototype.computeProperty=function(t,n,r,i){var s=hm[t],l=r.id==="g-root",c=n;if(s){var h=s.syntax,p=s.inh,v=s.d;if(n instanceof sd){var y=n.value;if(y==="unset"&&(p&&!l?y="inherit":y="initial"),y==="initial")(0,ya.Z)(v)||(n=this.parseProperty(t,S_(v)?v(r.nodeName):v,r,i));else if(y==="inherit"){var b=this.tryToResolveProperty(r,t,{inherited:!0});if((0,ya.Z)(b)){this.addUnresolveProperty(r,t);return}else return b}}var w=h&&this.getPropertySyntax(h);if(w&&w.calculator){var R=r.parsedStyle[t];c=w.calculator(t,R,n,r,this.runtime)}else n instanceof sd?c=n.value:c=n}return c},e.prototype.postProcessProperty=function(t,n,r){var i=hm[t];if(i&&i.syntax){var s=i.syntax&&this.getPropertySyntax(i.syntax),l=s;l&&l.postProcessor&&l.postProcessor(n,r)}},e.prototype.addUnresolveProperty=function(t,n){var r=sy.get(t);r||(sy.set(t,[]),r=sy.get(t)),r.indexOf(n)===-1&&r.push(n)},e.prototype.tryToResolveProperty=function(t,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&t.parentElement&&$S(t.parentElement,n)){var s=t.parentElement.parsedStyle[n];return s==="unset"||s==="initial"||s==="inherit"?void 0:s}},e.prototype.recalc=function(t){var n=sy.get(t);if(n&&n.length){var r={};n.forEach(function(i){r[i]=t.attributes[i]}),this.processProperties(t,r),sy.delete(t)}},e.prototype.updateGeometry=function(t){var n=t.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=t.geometry;i.contentBounds||(i.contentBounds=new _c),i.renderBounds||(i.renderBounds=new _c);var s=t.parsedStyle,l=r.update(s,t),c=l.cx,h=c===void 0?0:c,p=l.cy,v=p===void 0?0:p,y=l.cz,b=y===void 0?0:y,w=l.hwidth,R=w===void 0?0:w,M=l.hheight,I=M===void 0?0:M,N=l.hdepth,z=N===void 0?0:N,H=[Math.abs(R),Math.abs(I),z],X=s,$=X.stroke,te=X.lineWidth,fe=te===void 0?1:te,ye=X.increasedLineWidthForHitTesting,Le=ye===void 0?0:ye,Ge=X.shadowType,Qe=Ge===void 0?"outer":Ge,gt=X.shadowColor,qe=X.filter,lt=qe===void 0?[]:qe,ft=X.transformOrigin,pt=[h,v,b];i.contentBounds.update(pt,H);var Zt=n===ii.POLYLINE||n===ii.POLYGON||n===ii.PATH?Math.SQRT2:.5,Ct=$&&!$.isNone;if(Ct){var Lt=((fe||0)+(Le||0))*Zt;H[0]+=Lt,H[1]+=Lt}if(i.renderBounds.update(pt,H),gt&&Qe&&Qe!=="inner"){var Tn=i.renderBounds,Fn=Tn.min,ir=Tn.max,tr=s,Hr=tr.shadowBlur,mi=tr.shadowOffsetX,Ki=tr.shadowOffsetY,fi=Hr||0,Zr=mi||0,yo=Ki||0,po=Fn[0]-fi+Zr,ko=ir[0]+fi+Zr,fa=Fn[1]-fi+yo,Oa=ir[1]+fi+yo;Fn[0]=Math.min(Fn[0],po),ir[0]=Math.max(ir[0],ko),Fn[1]=Math.min(Fn[1],fa),ir[1]=Math.max(ir[1],Oa),i.renderBounds.setMinMax(Fn,ir)}lt.forEach(function(Os){var Uu=Os.name,Kc=Os.params;if(Uu==="blur"){var Dp=Kc[0].value;i.renderBounds.update(i.renderBounds.center,Bl(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[Dp,Dp,0]))}else if(Uu==="drop-shadow"){var qc=Kc[0].value,gh=Kc[1].value,Bc=Kc[2].value,op=i.renderBounds,Ma=op.min,Pa=op.max,ll=Ma[0]-Bc+qc,cs=Pa[0]+Bc+qc,_s=Ma[1]-Bc+gh,xl=Pa[1]+Bc+gh;Ma[0]=Math.min(Ma[0],ll),Pa[0]=Math.max(Pa[0],cs),Ma[1]=Math.min(Ma[1],_s),Pa[1]=Math.max(Pa[1],xl),i.renderBounds.setMinMax(Ma,Pa)}}),t.geometry.dirty=!1;var Na=R<0,ks=I<0,Kl=(Na?-1:1)*(ft?Xd(ft[0],0,t,!0):0),Wa=(ks?-1:1)*(ft?Xd(ft[1],1,t,!0):0);(Kl||Wa)&&t.setOrigin(Kl,Wa)}},e.prototype.updateSizeAttenuation=function(t,n){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/n,t.nodeName===ii.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/n)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===ii.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))},e.prototype.isPropertyInheritable=function(t){var n=hm[t];return n?n.inh:!1},e}(),pC=function(){function e(){this.parser=RS,this.parserUnmemoize=zx,this.parserWithCSSDisabled=null,this.mixer=Ux}return e.prototype.calculator=function(t,n,r,i){return ld(r)},e}(),vC=function(){function e(){}return e.prototype.calculator=function(t,n,r,i,s){return r instanceof sd&&(r=null),s.sceneGraphService.updateDisplayObjectDependency(t,n,r,i),t==="clipPath"&&i.forEach(function(l){l.childNodes.length===0&&s.sceneGraphService.dirtifyToRoot(l)}),r},e}(),mC=function(){function e(){this.parser=H0,this.parserWithCSSDisabled=H0,this.mixer=OS}return e.prototype.calculator=function(t,n,r,i){return r instanceof sd?r.value==="none"?ty:bS:r},e}(),gC=function(){function e(){this.parser=IS}return e.prototype.calculator=function(t,n,r){return r instanceof sd?[]:r},e}();function YS(e){var t=e.parsedStyle.fontSize;return(0,ya.Z)(t)?null:t}var Yx=function(){function e(){this.parser=ry,this.parserUnmemoize=cg,this.parserWithCSSDisabled=null,this.mixer=Ux}return e.prototype.calculator=function(t,n,r,i,s){var l;if((0,Gl.Z)(r))return r;if(Fl.isRelativeUnit(r.unit)){var c=s.styleValueRegistry;if(r.unit===_o.kPercentage)return 0;if(r.unit===_o.kEms){if(i.parentNode){var h=YS(i.parentNode);if(h)return h*=r.value,h;c.addUnresolveProperty(i,t)}else c.addUnresolveProperty(i,t);return 0}else if(r.unit===_o.kRems){if(!((l=i==null?void 0:i.ownerDocument)===null||l===void 0)&&l.documentElement){var h=YS(i.ownerDocument.documentElement);if(h)return h*=r.value,h;c.addUnresolveProperty(i,t)}else c.addUnresolveProperty(i,t);return 0}}else return r.value},e}(),yC=function(){function e(){this.mixer=DS}return e.prototype.parser=function(t){var n=PS((0,Gl.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),V5=function(){function e(){this.mixer=DS}return e.prototype.parser=function(t){var n=PS((0,Gl.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),_C=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){r instanceof sd&&(r=null);var s=r==null?void 0:r.cloneNode(!0);return s&&(s.style.isMarker=!0),s},e}(),Kx=function(){function e(){this.mixer=Ux,this.parser=fg,this.parserUnmemoize=iy,this.parserWithCSSDisabled=null}return e.prototype.calculator=function(t,n,r){return r.value},e}(),bC=function(){function e(){this.parser=fg,this.parserUnmemoize=iy,this.parserWithCSSDisabled=null,this.mixer=jx(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e.prototype.postProcessor=function(t){var n=t.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var s=r.nodeName;if(s===ii.LINE||s===ii.PATH||s===ii.POLYLINE){var l=r.getPoint(i);l&&t.setLocalPosition(l.x,l.y)}}},e}(),xC=function(){function e(){this.parser=fg,this.parserUnmemoize=iy,this.parserWithCSSDisabled=null,this.mixer=jx(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e}(),EC=function(){function e(){this.parser=Gx,this.parserWithCSSDisabled=Gx,this.mixer=tC}return e.prototype.calculator=function(t,n,r){return r instanceof sd&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new j0(0,0,0,0)}:r},e}(),SC=function(){function e(){this.parser=HS,this.mixer=nC}return e}(),TC=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.mixer=jx(0,1/0),n}return t}(Yx),wC=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){return r instanceof sd?r.value==="unset"?"":r.value:"".concat(r)},e.prototype.postProcessor=function(t){t.nodeValue="".concat(t.parsedStyle.text)||""},e}(),k1=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){var s=i.getAttribute("text");if(s){var l=s;r.value==="capitalize"?l=s.charAt(0).toUpperCase()+s.slice(1):r.value==="lowercase"?l=s.toLowerCase():r.value==="uppercase"&&(l=s.toUpperCase()),i.parsedStyle.text=l}return r.value},e}(),qx={},AC=0;function OC(e,t){if(e){var n=typeof e=="string"?e:e.id||AC++;qx[n]&&qx[n].destroy(),qx[n]=t}}var C_=typeof window!="undefined"&&typeof window.document!="undefined";function H5(e){return!!e.getAttribute}function W5(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;KS(e[i],t)<0?n=i+1:r=i}return n}function KS(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var s=i.childNodes||[];return s.indexOf(e)-s.indexOf(t)}}return n-r}function qS(e){var t,n=e;do{var r=(t=n.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var CC="px";function RC(e,t,n){C_&&e.style&&(e.style.width=t+CC,e.style.height=n+CC)}function QS(e,t){if(C_)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function MC(e){var t=QS(e,"width");return t==="auto"?e.offsetWidth:parseFloat(t)}function PC(e){var t=QS(e,"height");return t==="auto"?e.offsetHeight:parseFloat(t)}var IC=1,JS={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},R_=typeof performance=="object"&&performance.now?performance:Date;function dg(e,t,n){e===void 0&&(e="auto");var r=!1,i=!1,s=!!t&&!t.isNone,l=!!n&&!n.isNone;return e==="visiblepainted"||e==="painted"||e==="auto"?(r=s,i=l):e==="visiblefill"||e==="fill"?r=!0:e==="visiblestroke"||e==="stroke"?i=!0:(e==="visible"||e==="all")&&(r=!0,i=!0),[r,i]}var LC=1,eT=function(){return LC++},u0=typeof self=="object"&&self.self==self?self:typeof D.g=="object"&&D.g.global==D.g?D.g:{},DC=Date.now(),NC=function(){return u0.performance&&typeof u0.performance.now=="function"?u0.performance.now():Date.now()-DC},ly={},M_=Date.now(),BC=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");var t=Date.now(),n=t-M_,r=n>16?0:16-n,i=eT();return ly[i]=e,Object.keys(ly).length>1||setTimeout(function(){M_=t;var s=ly;ly={},Object.keys(s).forEach(function(l){return s[l](NC())})},r),i},uy=function(e){delete ly[e]},FC=["","webkit","moz","ms","o"],tT=function(e){return typeof e!="string"?BC:e===""?u0.requestAnimationFrame:u0[e+"RequestAnimationFrame"]},kC=function(e){return typeof e!="string"?uy:e===""?u0.cancelAnimationFrame:u0[e+"CancelAnimationFrame"]||u0[e+"CancelRequestAnimationFrame"]},zC=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n=n+1}},$d=zC(FC,function(e){return!!tT(e)}),dm=tT($d),nT=kC($d);u0.requestAnimationFrame=dm,u0.cancelAnimationFrame=nT;var To=function(){function e(){this.callbacks=[]}return e.prototype.getCallbacksNum=function(){return this.callbacks.length},e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,(0,se.ev)([],(0,se.CR)(t),!1))}))},e}(),UC=function(){function e(){this.callbacks=[]}return e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,se.mG)(this,void 0,void 0,function(){var r,i,s,l;return(0,se.Jh)(this,function(c){switch(c.label){case 0:return this.callbacks.length?[4,(l=this.callbacks)[0].apply(l,(0,se.ev)([],(0,se.CR)(t),!1))]:[3,6];case 1:r=c.sent(),i=0,c.label=2;case 2:return i<this.callbacks.length-1?(s=this.callbacks[i],[4,s(r)]):[3,5];case 3:r=c.sent(),c.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},e}(),hh=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){var t=arguments;this.callbacks.forEach(function(n){n.apply(void 0,t)})},e}(),On=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){if(this.callbacks.length){for(var t=arguments,n=this.callbacks[0].apply(void 0,t),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},e}(),Hs=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ja=/([\"\'])[^\'\"]+\1/;function P_(e){for(var t=e.fontSize,n=t===void 0?16:t,r=e.fontFamily,i=r===void 0?"sans-serif":r,s=e.fontStyle,l=s===void 0?"normal":s,c=e.fontVariant,h=c===void 0?"normal":c,p=e.fontWeight,v=p===void 0?"normal":p,y=(0,Gl.Z)(n)&&"".concat(n,"px")||"16px",b=i.split(","),w=b.length-1;w>=0;w--){var R=b[w].trim();!Ja.test(R)&&Hs.indexOf(R)<0&&(R='"'.concat(R,'"')),b[w]=R}return"".concat(l," ").concat(h," ").concat(v," ").concat(y," ").concat(b.join(","))}function dh(e,t,n){return Kr.identity(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e}var qa=1e-5,uf=Kr.create(),ol=Kr.create();function Du(e,t){if(e.length){var n=Kr.identity(uf);e.forEach(function(r){var i=r.t,s=r.d;if(i==="scale"){var l=(s==null?void 0:s.map(function(N){return Math.max(N.value,qa)}))||[1,1];Kr.fromScaling(ol,[l[0],l[1],1])}else if(i==="scalex"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,qa)}))||[1];Kr.fromScaling(ol,[l[0],1,1])}else if(i==="scaley"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,qa)}))||[1];Kr.fromScaling(ol,[1,l[0],1])}else if(i==="scalez"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,qa)}))||[1];Kr.fromScaling(ol,[1,1,l[0]])}else if(i==="scale3d"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,qa)}))||[1,1,1];Kr.fromScaling(ol,[l[0],l[1],l[2]])}else if(i==="translate"){var c=s||[bc,bc];Kr.fromTranslation(ol,[c[0].value,c[1].value,0])}else if(i==="translatex"){var c=s||[bc];Kr.fromTranslation(ol,[c[0].value,0,0])}else if(i==="translatey"){var c=s||[bc];Kr.fromTranslation(ol,[0,c[0].value,0])}else if(i==="translatez"){var c=s||[bc];Kr.fromTranslation(ol,[0,0,c[0].value])}else if(i==="translate3d"){var c=s||[bc,bc,bc];Kr.fromTranslation(ol,[c[0].value,c[1].value,c[2].value])}else if(i==="rotate"){var h=s||[Ap];Kr.fromZRotation(ol,il(ld(h[0])))}else if(i==="rotatex"){var h=s||[Ap];Kr.fromXRotation(ol,il(ld(h[0])))}else if(i==="rotatey"){var h=s||[Ap];Kr.fromYRotation(ol,il(ld(h[0])))}else if(i==="rotatez"){var h=s||[Ap];Kr.fromZRotation(ol,il(ld(h[0])))}else if(i==="rotate3d"){var h=s||[bc,bc,bc,Ap];Kr.fromRotation(ol,il(ld(h[3])),[h[0].value,h[1].value,h[2].value])}else if(i==="skew"){var p=(s==null?void 0:s.map(function(N){return N.value}))||[0,0];dh(ol,il(p[0]),il(p[1]))}else if(i==="skewx"){var p=(s==null?void 0:s.map(function(z){return z.value}))||[0];dh(ol,il(p[0]),0)}else if(i==="skewy"){var p=(s==null?void 0:s.map(function(z){return z.value}))||[0];dh(ol,0,il(p[0]))}else if(i==="matrix"){var v=(0,se.CR)(s.map(function(N){return N.value}),6),y=v[0],b=v[1],w=v[2],R=v[3],M=v[4],I=v[5];Kr.set(ol,y,b,0,0,w,R,0,0,0,0,1,0,M,I,0,1)}else i==="matrix3d"&&Kr.set.apply(Kr,(0,se.ev)([ol],(0,se.CR)(s.map(function(N){return N.value})),!1));Kr.mul(n,n,ol)}),t.setLocalTransform(n)}else t.resetLocalTransform();return t.getLocalTransform()}var Zc=function(){function e(){this.parser=A_,this.parserUnmemoize=WS,this.parserWithCSSDisabled=WS,this.mixer=cC}return e.prototype.calculator=function(t,n,r,i){return r instanceof sd?[]:r},e.prototype.postProcessor=function(t){var n=t.parsedStyle.transform;Du(n,t)},e}(),xc=function(){function e(){this.parser=fC,this.parserUnmemoize=hC}return e.prototype.postProcessor=function(t){var n=t.parsedStyle.transformOrigin;n[0].unit===_o.kPixels&&n[1].unit===_o.kPixels?t.setOrigin(n[0].value,n[1].value):t.getGeometryBounds()},e}(),Rl=function(){function e(){this.parser=fg,this.parserUnmemoize=iy}return e.prototype.calculator=function(t,n,r,i){return r.value},e.prototype.postProcessor=function(t){if(t.parentNode){var n=t.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=ny.Z_INDEX_CHANGED)}},e}(),c0=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,s=t.cy,l=s===void 0?0:s,c=t.r,h=c===void 0?0:c;return{cx:i,cy:l,hwidth:h,hheight:h}},e}(),pg=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,s=t.cy,l=s===void 0?0:s,c=t.rx,h=c===void 0?0:c,p=t.ry,v=p===void 0?0:p;return{cx:i,cy:l,hwidth:h,hheight:v}},e}(),rT=function(){function e(){}return e.prototype.update=function(t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=Math.min(n,i),c=Math.max(n,i),h=Math.min(r,s),p=Math.max(r,s),v=c-l,y=p-h,b=v/2,w=y/2;return{cx:l+b,cy:h+w,hwidth:b,hheight:w}},e}(),ss=function(){function e(){}return e.prototype.update=function(t){var n=t.d,r=n.rect,i=r.x,s=r.y,l=r.width,c=r.height,h=l/2,p=c/2;return{cx:i+h,cy:s+p,hwidth:h,hheight:p}},e}(),Yf=function(){function e(){}return e.prototype.update=function(t){if(t.points&&jo(t.points.points)){var n=t.points.points,r=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(n.map(function(y){return y[0]})),!1)),i=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(n.map(function(y){return y[0]})),!1)),s=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(n.map(function(y){return y[1]})),!1)),l=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(n.map(function(y){return y[1]})),!1)),c=i-r,h=l-s,p=c/2,v=h/2;return{cx:r+p,cy:s+v,hwidth:p,hheight:v}}return{cx:0,cy:0,hwidth:0,hheight:0}},e}(),cf=function(){function e(){}return e.prototype.update=function(t,n){var r=t.x,i=r===void 0?0:r,s=t.y,l=s===void 0?0:s,c=t.src,h=t.width,p=h===void 0?0:h,v=t.height,y=v===void 0?0:v,b=p,w=y;return c&&!u(c)&&(b||(b=c.width,t.width=b),w||(w=c.height,t.height=w)),{cx:i+b/2,cy:l+w/2,hwidth:b/2,hheight:w/2}},e}(),Nu=function(){function e(t){this.globalRuntime=t}return e.prototype.isReadyToMeasure=function(t,n){var r=t.text,i=t.textAlign,s=t.textBaseline,l=t.fontSize,c=t.fontStyle,h=t.fontWeight,p=t.fontVariant,v=t.lineWidth;return qr.enableCSSParsing?r&&l&&c&&h&&p&&i&&s&&!(0,ya.Z)(v):r},e.prototype.update=function(t,n){var r,i,s=t.text,l=t.textAlign,c=l===void 0?"start":l,h=t.lineWidth,p=h===void 0?1:h,v=t.textBaseline,y=v===void 0?"alphabetic":v,b=t.dx,w=b===void 0?0:b,R=t.dy,M=R===void 0?0:R,I=t.x,N=I===void 0?0:I,z=t.y,H=z===void 0?0:z;if(!this.isReadyToMeasure(t,n))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var X=(((i=(r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,$=this.globalRuntime.textService.measureText(s,t,X);t.metrics=$;var te=$.width,fe=$.height,ye=$.lineHeight,Le=$.fontProperties,Ge=te/2,Qe=fe/2,gt=N+Ge;c==="center"||c==="middle"?gt+=p/2-Ge:(c==="right"||c==="end")&&(gt+=p-Ge*2);var qe=H-Qe;return y==="middle"?qe+=Qe:y==="top"||y==="hanging"?qe+=Qe*2:y==="alphabetic"?qe+=this.globalRuntime.enableCSSParsing?ye-Le.ascent:0:(y==="bottom"||y==="ideographic")&&(qe+=0),w&&(gt+=w),M&&(qe+=M),{cx:gt,cy:qe,hwidth:Ge,hheight:Qe}},e}(),G5=function(){function e(){}return e.prototype.update=function(t,n){return{cx:0,cy:0,hwidth:0,hheight:0}},e}();function Bu(e){return!!e.type}var cd=function(){function e(t){this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new $f,this.page=new $f,this.canvas=new $f,this.viewport=new $f,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(e.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},e.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.initEvent=function(){},e.prototype.initUIEvent=function(){},e.prototype.clone=function(){throw new Error(ru)},e}(),vg=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.client=new $f,n.movement=new $f,n.offset=new $f,n.global=new $f,n.screen=new $f,n}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),t.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},t.prototype.initMouseEvent=function(){throw new Error(ru)},t}(cd),cy=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return t.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},t.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},t.prototype.clone=function(){return this.manager.clonePointerEvent(this)},t}(vg),ni=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},t}(vg),Vi=function(e){(0,se.ZT)(t,e);function t(n,r){var i=e.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return t}(cd),jC=":",mo=function(){function e(){this.emitter=new rs}return e.prototype.on=function(t,n,r){return this.addEventListener(t,n,r),this},e.prototype.addEventListener=function(t,n,r){var i=jd(r)&&r||ml(r)&&r.capture,s=ml(r)&&r.once,l=S_(n)?void 0:n,c=!1,h="";if(t.indexOf(jC)>-1){var p=(0,se.CR)(t.split(jC),2),v=p[0],y=p[1];t=y,h=v,c=!0}if(t=i?"".concat(t,"capture"):t,n=S_(n)?n:n.handleEvent,c){var b=n;n=function(){for(var w,R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];((w=R[0].target)===null||w===void 0?void 0:w.name)===h&&b.apply(void 0,(0,se.ev)([],(0,se.CR)(R),!1))}}return s?this.emitter.once(t,n,l):this.emitter.on(t,n,l),this},e.prototype.off=function(t,n,r){return t?this.removeEventListener(t,n,r):this.removeAllEventListeners(),this},e.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},e.prototype.removeEventListener=function(t,n,r){var i=jd(r)&&r||ml(r)&&r.capture,s=S_(n)?void 0:n;return t=i?"".concat(t,"capture"):t,n=S_(n)?n:n==null?void 0:n.handleEvent,this.emitter.off(t,n,s),this},e.prototype.emit=function(t,n){this.dispatchEvent(new Vi(t,n))},e.prototype.dispatchEvent=function(t,n){var r,i;if(n===void 0&&(n=!1),!Bu(t))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var s;if(this.document?s=this:this.defaultView?s=this.defaultView:s=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,s){if(t.manager=s.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],n||(t.target=this),(i=t.manager)===null||i===void 0||i.dispatchEvent(t,t.type,n)}return!t.defaultPrevented},e}(),wo=function(e){(0,se.ZT)(t,e);function t(){var n=e.call(this)||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return t.isNode=function(n){return!!n.childNodes},Object.defineProperty(t.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===ii.TEXT&&(i+=this.style.text);try{for(var s=(0,se.XA)(this.childNodes),l=s.next();!l.done;l=s.next()){var c=l.value;c.nodeName===ii.TEXT?i+=c.nodeValue:i+=c.textContent}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===ii.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),t.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},t.prototype.hasChildNodes=function(){return this.childNodes.length>0},t.prototype.isDefaultNamespace=function(n){throw new Error(ru)},t.prototype.lookupNamespaceURI=function(n){throw new Error(ru)},t.prototype.lookupPrefix=function(n){throw new Error(ru)},t.prototype.normalize=function(){throw new Error(ru)},t.prototype.isEqualNode=function(n){return this===n},t.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),t.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,s=this,l=[i],c=[s];(r=i.parentNode)!==null&&r!==void 0?r:s.parentNode;)i=i.parentNode?(l.push(i.parentNode),i.parentNode):i,s=s.parentNode?(c.push(s.parentNode),s.parentNode):s;if(i!==s)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var h=l.length>c.length?l:c,p=h===l?c:l;if(h[h.length-p.length]===p[0])return h===l?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var v=h.length-p.length,y=p.length-1;y>=0;y--){var b=p[y],w=h[v+y];if(w!==b){var R=b.parentNode.childNodes;return R.indexOf(b)<R.indexOf(w)?p===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:h===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING},t.prototype.contain=function(n){return this.contains(n)},t.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},t.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},t.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(mo),ar=2048,z1=function(){function e(t,n){var r=this;this.globalRuntime=t,this.context=n,this.emitter=new rs,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Kr.create(),this.tmpVec3=ur.Ue(),this.onPointerDown=function(i){var s=r.createPointerEvent(i);if(r.dispatchEvent(s,"pointerdown"),s.pointerType==="touch")r.dispatchEvent(s,"touchstart");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;r.dispatchEvent(s,l?"rightdown":"mousedown")}var c=r.trackingData(i.pointerId);c.pressTargetsByButton[i.button]=s.composedPath(),r.freeEvent(s)},this.onPointerUp=function(i){var s,l=R_.now(),c=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(c,"pointerup"),c.pointerType==="touch")r.dispatchEvent(c,"touchend");else if(c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;r.dispatchEvent(c,h?"rightup":"mouseup")}var p=r.trackingData(i.pointerId),v=r.findMountedTarget(p.pressTargetsByButton[i.button]),y=v;if(v&&!c.composedPath().includes(v)){for(var b=v;b&&!c.composedPath().includes(b);){if(c.currentTarget=b,r.notifyTarget(c,"pointerupoutside"),c.pointerType==="touch")r.notifyTarget(c,"touchendoutside");else if(c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;r.notifyTarget(c,h?"rightupoutside":"mouseupoutside")}wo.isNode(b)&&(b=b.parentNode)}delete p.pressTargetsByButton[i.button],y=b}if(y){var w=r.clonePointerEvent(c,"click");w.target=y,w.path=[],p.clicksByButton[i.button]||(p.clicksByButton[i.button]={clickCount:0,target:w.target,timeStamp:l});var R=p.clicksByButton[i.button];R.target===w.target&&l-R.timeStamp<200?++R.clickCount:R.clickCount=1,R.target=w.target,R.timeStamp=l,w.detail=R.clickCount,!((s=c.detail)===null||s===void 0)&&s.preventClick||(!r.context.config.useNativeClickEvent&&(w.pointerType==="mouse"||w.pointerType==="touch")&&r.dispatchEvent(w,"click"),r.dispatchEvent(w,"pointertap")),r.freeEvent(w)}r.freeEvent(c)},this.onPointerMove=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),l=s.pointerType==="mouse"||s.pointerType==="pen",c=r.trackingData(i.pointerId),h=r.findMountedTarget(c.overTargets);if(c.overTargets&&h!==s.target){var p=i.type==="mousemove"?"mouseout":"pointerout",v=r.createPointerEvent(i,p,h||void 0);if(r.dispatchEvent(v,"pointerout"),l&&r.dispatchEvent(v,"mouseout"),!s.composedPath().includes(h)){var y=r.createPointerEvent(i,"pointerleave",h||void 0);for(y.eventPhase=y.AT_TARGET;y.target&&!s.composedPath().includes(y.target);)y.currentTarget=y.target,r.notifyTarget(y),l&&r.notifyTarget(y,"mouseleave"),wo.isNode(y.target)&&(y.target=y.target.parentNode);r.freeEvent(y)}r.freeEvent(v)}if(h!==s.target){var b=i.type==="mousemove"?"mouseover":"pointerover",w=r.clonePointerEvent(s,b);r.dispatchEvent(w,"pointerover"),l&&r.dispatchEvent(w,"mouseover");for(var R=h&&wo.isNode(h)&&h.parentNode;R&&R!==(wo.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&R!==s.target;)R=R.parentNode;var M=!R||R===(wo.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(M){var I=r.clonePointerEvent(s,"pointerenter");for(I.eventPhase=I.AT_TARGET;I.target&&I.target!==h&&I.target!==(wo.isNode(r.rootTarget)&&r.rootTarget.parentNode);)I.currentTarget=I.target,r.notifyTarget(I),l&&r.notifyTarget(I,"mouseenter"),wo.isNode(I.target)&&(I.target=I.target.parentNode);r.freeEvent(I)}r.freeEvent(w)}r.dispatchEvent(s,"pointermove"),s.pointerType==="touch"&&r.dispatchEvent(s,"touchmove"),l&&(r.dispatchEvent(s,"mousemove"),r.cursor=r.getCursor(s.target)),c.overTargets=s.composedPath(),r.freeEvent(s)},this.onPointerOut=function(i){var s=r.trackingData(i.pointerId);if(s.overTargets){var l=i.pointerType==="mouse"||i.pointerType==="pen",c=r.findMountedTarget(s.overTargets),h=r.createPointerEvent(i,"pointerout",c||void 0);r.dispatchEvent(h),l&&r.dispatchEvent(h,"mouseout");var p=r.createPointerEvent(i,"pointerleave",c||void 0);for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==(wo.isNode(r.rootTarget)&&r.rootTarget.parentNode);)p.currentTarget=p.target,r.notifyTarget(p),l&&r.notifyTarget(p,"mouseleave"),wo.isNode(p.target)&&(p.target=p.target.parentNode);s.overTargets=null,r.freeEvent(h),r.freeEvent(p)}r.cursor=null},this.onPointerOver=function(i){var s=r.trackingData(i.pointerId),l=r.createPointerEvent(i),c=l.pointerType==="mouse"||l.pointerType==="pen";r.dispatchEvent(l,"pointerover"),c&&r.dispatchEvent(l,"mouseover"),l.pointerType==="mouse"&&(r.cursor=r.getCursor(l.target));var h=r.clonePointerEvent(l,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==(wo.isNode(r.rootTarget)&&r.rootTarget.parentNode);)h.currentTarget=h.target,r.notifyTarget(h),c&&r.notifyTarget(h,"mouseenter"),wo.isNode(h.target)&&(h.target=h.target.parentNode);s.overTargets=l.composedPath(),r.freeEvent(l),r.freeEvent(h)},this.onPointerUpOutside=function(i){var s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.pressTargetsByButton[i.button]),c=r.createPointerEvent(i);if(l){for(var h=l;h;)c.currentTarget=h,r.notifyTarget(c,"pointerupoutside"),c.pointerType==="touch"||(c.pointerType==="mouse"||c.pointerType==="pen")&&r.notifyTarget(c,c.button===2?"rightupoutside":"mouseupoutside"),wo.isNode(h)&&(h=h.parentNode);delete s.pressTargetsByButton[i.button]}r.freeEvent(c)},this.onWheel=function(i){var s=r.createWheelEvent(i);r.dispatchEvent(s),r.freeEvent(s)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var s=r.createPointerEvent(i);r.dispatchEvent(s),r.freeEvent(s)}},this.onPointerCancel=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(s),r.freeEvent(s)}}return e.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},e.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},e.prototype.getScale=function(){var t=this.context.contextService.getBoundingClientRect(),n=1,r=1,i=this.context.contextService.getDomElement();if(i&&t){var s=i.offsetWidth,l=i.offsetHeight;s&&l&&(n=t.width/s,r=t.height/l)}return{scaleX:n,scaleY:r,bbox:t}},e.prototype.client2Viewport=function(t){var n=this.getScale(),r=n.scaleX,i=n.scaleY,s=n.bbox;return new $f((t.x-((s==null?void 0:s.left)||0))/r,(t.y-((s==null?void 0:s.top)||0))/i)},e.prototype.viewport2Client=function(t){var n=this.getScale(),r=n.scaleX,i=n.scaleY,s=n.bbox;return new $f((t.x+((s==null?void 0:s.left)||0))*r,(t.y+((s==null?void 0:s.top)||0))*i)},e.prototype.viewport2Canvas=function(t){var n=t.x,r=t.y,i=this.rootTarget.defaultView,s=i.getCamera(),l=this.context.config,c=l.width,h=l.height,p=s.getPerspectiveInverse(),v=s.getWorldTransform(),y=Kr.multiply(this.tmpMatrix,v,p),b=ur.t8(this.tmpVec3,n/c*2-1,(1-r/h)*2-1,0);return ur.fF(b,b,y),new $f(b[0],b[1])},e.prototype.canvas2Viewport=function(t){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),s=r.getViewTransform(),l=Kr.multiply(this.tmpMatrix,i,s),c=ur.t8(this.tmpVec3,t.x,t.y,0);ur.fF(this.tmpVec3,this.tmpVec3,l);var h=this.context.config,p=h.width,v=h.height;return new $f((c[0]+1)/2*p,(1-(c[1]+1)/2)*v)},e.prototype.setPickHandler=function(t){this.pickHandler=t},e.prototype.addEventMapping=function(t,n){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:n,priority:0}),this.mappingTable[t].sort(function(r,i){return r.priority-i.priority})},e.prototype.mapEvent=function(t){if(this.rootTarget){var n=this.mappingTable[t.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}},e.prototype.dispatchEvent=function(t,n,r){if(!r)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,n);else{t.eventPhase=t.AT_TARGET;var i=this.rootTarget.defaultView||null;t.currentTarget=i,this.notifyListeners(t,n)}this.emitter.emit(n||t.type,t)},e.prototype.propagate=function(t,n){if(t.target){var r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,n),!(t.propagationStopped||t.propagationImmediatelyStopped)){var s=r.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var i=s+1;i<r.length;i++)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return}}},e.prototype.propagationPath=function(t){var n=[t],r=this.rootTarget.defaultView||null;if(r&&r===t)return n.unshift(r.document),n;for(var i=0;i<ar&&t!==this.rootTarget;i++)wo.isNode(t)&&t.parentNode&&(n.push(t.parentNode),t=t.parentNode);return r&&n.push(r),n},e.prototype.hitTest=function(t){var n=t.viewportX,r=t.viewportY,i=this.context.config,s=i.width,l=i.height,c=i.disableHitTesting;return n<0||r<0||n>s||r>l?null:!c&&this.pickHandler(t)||this.rootTarget||null},e.prototype.isNativeEventFromCanvas=function(t,n){var r=n==null?void 0:n.target;if(r!=null&&r.shadowRoot&&(r=n.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return n!=null&&n.composedPath?n.composedPath().indexOf(t)>-1:!1},e.prototype.getExistedHTML=function(t){var n,r;if(t.nativeEvent.composedPath)try{for(var i=(0,se.XA)(t.nativeEvent.composedPath()),s=i.next();!s.done;s=i.next()){var l=s.value,c=this.nativeHTMLMap.get(l);if(c)return c}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},e.prototype.pickTarget=function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})},e.prototype.createPointerEvent=function(t,n,r,i){var s=this.allocateEvent(cy);this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t;var l=this.getExistedHTML(s),c=this.context.contextService.getDomElement();return s.target=r!=null?r:l||this.isNativeEventFromCanvas(c,s.nativeEvent)&&this.pickTarget(s)||i,typeof n=="string"&&(s.type=n),s},e.prototype.createWheelEvent=function(t){var n=this.allocateEvent(ni);this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t;var r=this.getExistedHTML(n),i=this.context.contextService.getDomElement();return n.target=r||this.isNativeEventFromCanvas(i,n.nativeEvent)&&this.pickTarget(n),n},e.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.prototype.cloneWheelEvent=function(t){var n=this.allocateEvent(ni);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=t.type,n},e.prototype.clonePointerEvent=function(t,n){var r=this.allocateEvent(cy);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=n!=null?n:r.type,r},e.prototype.copyPointerData=function(t,n){n.pointerId=t.pointerId,n.width=t.width,n.height=t.height,n.isPrimary=t.isPrimary,n.pointerType=t.pointerType,n.pressure=t.pressure,n.tangentialPressure=t.tangentialPressure,n.tiltX=t.tiltX,n.tiltY=t.tiltY,n.twist=t.twist},e.prototype.copyMouseData=function(t,n){n.altKey=t.altKey,n.button=t.button,n.buttons=t.buttons,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.client.copyFrom(t.client),n.movement.copyFrom(t.movement),n.canvas.copyFrom(t.canvas),n.screen.copyFrom(t.screen),n.global.copyFrom(t.global),n.offset.copyFrom(t.offset)},e.prototype.copyWheelData=function(t,n){n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ},e.prototype.copyData=function(t,n){n.isTrusted=t.isTrusted,n.timeStamp=R_.now(),n.type=t.type,n.detail=t.detail,n.view=t.view,n.page.copyFrom(t.page),n.viewport.copyFrom(t.viewport)},e.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var n=this.eventPool.get(t).pop()||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},e.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(t)},e.prototype.notifyTarget=function(t,n){n=n!=null?n:t.type;var r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,n)},e.prototype.notifyListeners=function(t,n){var r=t.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(t.currentTarget||i.context,t);else for(var s=0;s<i.length&&!t.propagationImmediatelyStopped;s++)i[s].once&&r.removeListener(n,i[s].fn,void 0,!0),i[s].fn.call(t.currentTarget||i[s].context,t)},e.prototype.findMountedTarget=function(t){if(!t)return null;for(var n=t[t.length-1],r=t.length-2;r>=0;r--){var i=t[r];if(i===this.rootTarget||wo.isNode(i)&&i.parentNode===n)n=t[r];else break}return n},e.prototype.getCursor=function(t){for(var n=t;n;){var r=H5(n)&&n.getAttribute("cursor");if(r)return r;n=wo.isNode(n)&&n.parentNode}},e}(),W0=function(){function e(){}return e.prototype.getOrCreateCanvas=function(t,n){if(this.canvas)return this.canvas;if(t||qr.offscreenCanvas)this.canvas=t||qr.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,se.pi)({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,se.pi)({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,se.pi)({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},e.prototype.getOrCreateContext=function(t,n){return this.context?this.context:(this.getOrCreateCanvas(t,n),this.context)},e}(),Yd;(function(e){e[e.CAMERA_CHANGED=0]="CAMERA_CHANGED",e[e.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",e[e.NONE=2]="NONE"})(Yd||(Yd={}));var iT=function(){function e(t,n){this.globalRuntime=t,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new hh,initAsync:new To,dirtycheck:new On,cull:new On,beginFrame:new hh,beforeRender:new hh,render:new hh,afterRender:new hh,endFrame:new hh,destroy:new hh,pick:new UC,pickSync:new On,pointerDown:new hh,pointerUp:new hh,pointerMove:new hh,pointerOut:new hh,pointerOver:new hh,pointerWheel:new hh,pointerCancel:new hh,click:new hh}}return e.prototype.init=function(t){var n=this,r=(0,se.pi)((0,se.pi)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){n.inited=!0,t()})},e.prototype.getStats=function(){return this.stats},e.prototype.disableDirtyRectangleRendering=function(){var t=this.context.config.renderer,n=t.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(Yd.CAMERA_CHANGED)},e.prototype.render=function(t,n,r){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var s=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(s.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),s.renderReasons.size&&this.inited){s.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var l=s.renderReasons.size===1&&s.renderReasons.has(Yd.CAMERA_CHANGED),c=!t.disableRenderHooks||!(t.disableRenderHooks&&l);c&&this.renderDisplayObject(s.root,t,s),this.hooks.beginFrame.call(n),c&&s.renderListCurrentFrame.forEach(function(h){i.hooks.beforeRender.call(h),i.hooks.render.call(h),i.hooks.afterRender.call(h)}),this.hooks.endFrame.call(n),s.renderListCurrentFrame=[],s.renderReasons.clear(),r()}},e.prototype.renderDisplayObject=function(t,n,r){var i=this,s=n.renderer.getConfig(),l=s.enableDirtyCheck,c=s.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(t);var h=t.renderable,p=l?h.dirty||r.dirtyRectangleRenderingDisabled?t:null:t;if(p){var v=c?this.hooks.cull.call(p,this.context.camera):p;v&&(this.stats.rendered++,r.renderListCurrentFrame.push(v))}t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var y=t.sortable;y.dirty&&(this.sort(t,y),y.dirty=!1,y.dirtyChildren=[],y.dirtyReason=void 0),(y.sorted||t.childNodes).forEach(function(b){i.renderDisplayObject(b,n,r)})},e.prototype.sort=function(t,n){n.sorted&&n.dirtyReason!==ny.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=t.childNodes.indexOf(r);if(i===-1){var s=n.sorted.indexOf(r);s>=0&&n.sorted.splice(s,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var l=W5(n.sorted,r);n.sorted.splice(l,0,r)}}):n.sorted=t.childNodes.slice().sort(KS)},e.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},e.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(Yd.DISPLAY_OBJECT_CHANGED)},e}(),oT=/\[\s*(.*)=(.*)\s*\]/,Z5=function(){function e(){}return e.prototype.selectOne=function(t,n){var r=this;if(t.startsWith("."))return n.find(function(c){return((c==null?void 0:c.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.find(function(c){return c.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.find(function(c){return n!==c&&(s==="name"?c.name===l:r.attributeToString(c,s)===l)}):null}else return n.find(function(c){return n!==c&&c.nodeName===t})},e.prototype.selectAll=function(t,n){var r=this;if(t.startsWith("."))return n.findAll(function(c){return n!==c&&((c==null?void 0:c.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.findAll(function(c){return n!==c&&c.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.findAll(function(c){return n!==c&&(s==="name"?c.name===l:r.attributeToString(c,s)===l)}):[]}else return n.findAll(function(c){return n!==c&&c.nodeName===t})},e.prototype.is=function(t,n){if(t.startsWith("."))return n.className===this.getIdOrClassname(t);if(t.startsWith("#"))return n.id===this.getIdOrClassname(t);if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,s=r.value;return i==="name"?n.name===s:this.attributeToString(n,i)===s}else return n.nodeName===t},e.prototype.getIdOrClassname=function(t){return t.substring(1)},e.prototype.getAttribute=function(t){var n=t.match(oT),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},e.prototype.attributeToString=function(t,n){if(!t.getAttribute)return"";var r=t.getAttribute(n);return(0,ya.Z)(r)?"":r.toString?r.toString():""},e}(),pm=function(e){(0,se.ZT)(t,e);function t(n,r,i,s,l,c,h,p){var v=e.call(this,null)||this;return v.relatedNode=r,v.prevValue=i,v.newValue=s,v.attrName=l,v.attrChange=c,v.prevParsedValue=h,v.newParsedValue=p,v.type=n,v}return t.ADDITION=2,t.MODIFICATION=1,t.REMOVAL=3,t}(cd),Ua;(function(e){e.REPARENT="reparent",e.DESTROY="destroy",e.ATTR_MODIFIED="DOMAttrModified",e.INSERTED="DOMNodeInserted",e.REMOVED="removed",e.MOUNTED="DOMNodeInsertedIntoDocument",e.UNMOUNTED="DOMNodeRemovedFromDocument",e.BOUNDS_CHANGED="bounds-changed",e.CULLED="culled"})(Ua||(Ua={}));function VC(e){var t=e.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0)}var aT=new pm(Ua.REPARENT,null,"","","",0,"",""),Va=function(){function e(t){var n=this;this.runtime=t,this.pendingEvents=[],this.boundsChangedEvent=new Vi(Ua.BOUNDS_CHANGED),this.rotate=function(){var r=$i();return function(i,s,l,c,h){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=!0),typeof s=="number"&&(s=ur.al(s,l,c));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,s);else{var v=$i();Ug(v,s[0],s[1],s[2]);var y=n.getRotation(i),b=n.getRotation(i.parentNode);jg(r,b),L0(r,r),tu(v,r,v),tu(p.localRotation,v,y),hv(p.localRotation,p.localRotation),h&&n.dirtifyLocal(i,p)}}}(),this.rotateLocal=function(){var r=$i();return function(i,s,l,c,h){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=!0),typeof s=="number"&&(s=ur.al(s,l,c));var p=i.transformable;Ug(r,s[0],s[1],s[2]),T1(p.localRotation,p.localRotation,r),h&&n.dirtifyLocal(i,p)}}(),this.setEulerAngles=function(){var r=$i();return function(i,s,l,c,h){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=!0),typeof s=="number"&&(s=ur.al(s,l,c));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,s);else{Ug(p.localRotation,s[0],s[1],s[2]);var v=n.getRotation(i.parentNode);jg(r,L0($i(),v)),T1(p.localRotation,p.localRotation,r),h&&n.dirtifyLocal(i,p)}}}(),this.translateLocal=function(){return function(r,i,s,l,c){s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=!0),typeof i=="number"&&(i=ur.al(i,s,l));var h=r.transformable;ur.fS(i,ur.Ue())||(ur.VC(i,i,h.localRotation),ur.IH(h.localPosition,h.localPosition,i),c&&n.dirtifyLocal(r,h))}}(),this.setPosition=function(){var r=Kr.create(),i=ur.Ue();return function(s,l,c){c===void 0&&(c=!0);var h=s.transformable;if(i[0]=l[0],i[1]=l[1],i[2]=l[2]||0,!ur.fS(n.getPosition(s),i)){if(ur.JG(h.position,i),s.parentNode===null||!s.parentNode.transformable)ur.JG(h.localPosition,i);else{var p=s.parentNode.transformable;Kr.copy(r,p.worldTransform),Kr.invert(r,r),ur.fF(h.localPosition,i,r)}c&&n.dirtifyLocal(s,h)}}}(),this.setLocalPosition=function(){var r=ur.Ue();return function(i,s,l){l===void 0&&(l=!0);var c=i.transformable;r[0]=s[0],r[1]=s[1],r[2]=s[2]||0,!ur.fS(c.localPosition,r)&&(ur.JG(c.localPosition,r),l&&n.dirtifyLocal(i,c))}}(),this.translate=function(){var r=ur.Ue(),i=ur.Ue(),s=ur.Ue();return function(l,c,h,p,v){h===void 0&&(h=0),p===void 0&&(p=0),v===void 0&&(v=!0),typeof c=="number"&&(c=ur.t8(i,c,h,p)),!ur.fS(c,r)&&(ur.IH(s,n.getPosition(l),c),n.setPosition(l,s,v))}}(),this.setRotation=function(){var r=$i();return function(i,s,l,c,h,p){p===void 0&&(p=!0);var v=i.transformable;if(typeof s=="number"&&(s=Km(s,l,c,h)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,s);else{var y=n.getRotation(i.parentNode);jg(r,y),L0(r,r),tu(v.localRotation,r,s),hv(v.localRotation,v.localRotation),p&&n.dirtifyLocal(i,v)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=Kr.create(),i=ur.Ue(),s=Km(0,0,0,1);return function(l){var c=l.localSkew[0]!==0||l.localSkew[1]!==0;if(c){if(Kr.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,ur.al(1,1,1),l.origin),l.localSkew[0]!==0||l.localSkew[1]!==0){var h=Kr.identity(r);h[4]=Math.tan(l.localSkew[0]),h[1]=Math.tan(l.localSkew[1]),Kr.multiply(l.localTransform,l.localTransform,h)}var p=Kr.fromRotationTranslationScaleOrigin(r,s,i,l.localScale,l.origin);Kr.multiply(l.localTransform,l.localTransform,p)}else Kr.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,l.localScale,l.origin)}}()}return e.prototype.matches=function(t,n){return this.runtime.sceneGraphSelector.is(t,n)},e.prototype.querySelector=function(t,n){return this.runtime.sceneGraphSelector.selectOne(t,n)},e.prototype.querySelectorAll=function(t,n){return this.runtime.sceneGraphSelector.selectAll(t,n)},e.prototype.attach=function(t,n,r){var i,s=!1;t.parentNode&&(s=t.parentNode!==n,this.detach(t)),t.parentNode=n,(0,ya.Z)(r)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(r,0,t);var l=n.sortable;(!((i=l==null?void 0:l.sorted)===null||i===void 0)&&i.length||t.parsedStyle.zIndex)&&(l.dirtyChildren.indexOf(t)===-1&&l.dirtyChildren.push(t),l.dirty=!0,l.dirtyReason=ny.ADDED);var c=t.transformable;c&&this.dirtifyWorld(t,c),c.frozen&&this.unfreezeParentToRoot(t),s&&t.dispatchEvent(aT)},e.prototype.detach=function(t){var n,r;if(t.parentNode){var i=t.transformable,s=t.parentNode.sortable;(!((n=s==null?void 0:s.sorted)===null||n===void 0)&&n.length||!((r=t.style)===null||r===void 0)&&r.zIndex)&&(s.dirtyChildren.indexOf(t)===-1&&s.dirtyChildren.push(t),s.dirty=!0,s.dirtyReason=ny.REMOVED);var l=t.parentNode.childNodes.indexOf(t);l>-1&&t.parentNode.childNodes.splice(l,1),i&&this.dirtifyWorld(t,i),t.parentNode=null}},e.prototype.getOrigin=function(t){return t.getGeometryBounds(),t.transformable.origin},e.prototype.setOrigin=function(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var s=t.transformable;if(!(n[0]===s.origin[0]&&n[1]===s.origin[1]&&n[2]===s.origin[2])){var l=s.origin;l[0]=n[0],l[1]=n[1],l[2]=n[2]||0,this.dirtifyLocal(t,s)}},e.prototype.setLocalEulerAngles=function(t,n,r,i,s){r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=!0),typeof n=="number"&&(n=ur.al(n,r,i));var l=t.transformable;Ug(l.localRotation,n[0],n[1],n[2]),s&&this.dirtifyLocal(t,l)},e.prototype.scaleLocal=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable;ur.Jp(i.localScale,i.localScale,ur.al(n[0],n[1],n[2]||1)),r&&this.dirtifyLocal(t,i)},e.prototype.setLocalScale=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable,s=ur.al(n[0],n[1],n[2]||i.localScale[2]);ur.fS(s,i.localScale)||(ur.JG(i.localScale,s),r&&this.dirtifyLocal(t,i))},e.prototype.setLocalRotation=function(t,n,r,i,s,l){l===void 0&&(l=!0),typeof n=="number"&&(n=Km(n,r,i,s));var c=t.transformable;jg(c.localRotation,n),l&&this.dirtifyLocal(t,c)},e.prototype.setLocalSkew=function(t,n,r){typeof n=="number"&&(n=em.al(n,r));var i=t.transformable;em.JG(i.localSkew,n),this.dirtifyLocal(t,i)},e.prototype.dirtifyLocal=function(t,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(t,n))},e.prototype.dirtifyWorld=function(t,n){n.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,n),this.dirtifyToRoot(t,!0)},e.prototype.triggerPendingEvents=function(){var t=this,n=new Set,r=function(i,s){i.isConnected&&!n.has(i.entity)&&(t.boundsChangedEvent.detail=s,t.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(t.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1];c.affectChildren?l.forEach(function(h){r(h,c)}):r(l,c)}),this.clearPendingEvents(),n.clear()},e.prototype.clearPendingEvents=function(){this.pendingEvents=[]},e.prototype.dirtifyToRoot=function(t,n){n===void 0&&(n=!1);var r=t;for(r.renderable&&(r.renderable.dirty=!0);r;)VC(r),r=r.parentNode;n&&t.forEach(function(i){VC(i)}),this.informDependentDisplayObjects(t),this.pendingEvents.push([t,{affectChildren:n}])},e.prototype.updateDisplayObjectDependency=function(t,n,r,i){if(n&&n!==r){var s=this.displayObjectDependencyMap.get(n);if(s&&s[t]){var l=s[t].indexOf(i);s[t].splice(l,1)}}if(r){var c=this.displayObjectDependencyMap.get(r);c||(this.displayObjectDependencyMap.set(r,{}),c=this.displayObjectDependencyMap.get(r)),c[t]||(c[t]=[]),c[t].push(i)}},e.prototype.informDependentDisplayObjects=function(t){var n=this,r=this.displayObjectDependencyMap.get(t);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(s){n.dirtifyToRoot(s,!0),s.dispatchEvent(new pm(Ua.ATTR_MODIFIED,s,n,n,i,pm.MODIFICATION,n,n)),s.isCustomElement&&s.isConnected&&s.attributeChangedCallback&&s.attributeChangedCallback(i,n,n)})})},e.prototype.getPosition=function(t){var n=t.transformable;return Kr.getTranslation(n.position,this.getWorldTransform(t,n))},e.prototype.getRotation=function(t){var n=t.transformable;return Kr.getRotation(n.rotation,this.getWorldTransform(t,n))},e.prototype.getScale=function(t){var n=t.transformable;return Kr.getScaling(n.scaling,this.getWorldTransform(t,n))},e.prototype.getWorldTransform=function(t,n){return n===void 0&&(n=t.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,n)),n.worldTransform},e.prototype.getLocalPosition=function(t){return t.transformable.localPosition},e.prototype.getLocalRotation=function(t){return t.transformable.localRotation},e.prototype.getLocalScale=function(t){return t.transformable.localScale},e.prototype.getLocalSkew=function(t){return t.transformable.localSkew},e.prototype.getLocalTransform=function(t){var n=t.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},e.prototype.setLocalTransform=function(t,n){var r=Kr.getTranslation(ur.Ue(),n),i=Kr.getRotation($i(),n),s=Kr.getScaling(ur.Ue(),n);this.setLocalScale(t,s,!1),this.setLocalPosition(t,r,!1),this.setLocalRotation(t,i,void 0,void 0,void 0,!1),this.dirtifyLocal(t,t.transformable)},e.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},e.prototype.getTransformedGeometryBounds=function(t,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(t,n);if(_c.isEmpty(i))return null;var s=r||new _c;return s.setFromTransformedAABB(i,this.getWorldTransform(t)),s},e.prototype.getGeometryBounds=function(t,n){n===void 0&&(n=!1);var r=t.geometry;r.dirty&&qr.styleValueRegistry.updateGeometry(t);var i=n?r.renderBounds:r.contentBounds||null;return i||new _c},e.prototype.getBounds=function(t,n){var r=this;n===void 0&&(n=!1);var i=t.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var s=n?i.renderBounds:i.bounds,l=this.getTransformedGeometryBounds(t,n,s),c=t.childNodes;if(c.forEach(function(v){var y=r.getBounds(v,n);y&&(l?l.add(y):(l=s||new _c,l.update(y.center,y.halfExtents)))}),l||(l=new _c),n){var h=qS(t);if(h){var p=h.parsedStyle.clipPath.getBounds(n);l?p&&(l=p.intersection(l)):l.update(p.center,p.halfExtents)}}return n?(i.renderBounds=l,i.renderBoundsDirty=!1):(i.bounds=l,i.boundsDirty=!1),l},e.prototype.getLocalBounds=function(t){if(t.parentNode){var n=Kr.create();t.parentNode.transformable&&(n=Kr.invert(Kr.create(),this.getWorldTransform(t.parentNode)));var r=this.getBounds(t);if(!_c.isEmpty(r)){var i=new _c;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(t)},e.prototype.getBoundingClientRect=function(t){var n,r,i,s=this.getGeometryBounds(t);_c.isEmpty(s)||(i=new _c,i.setFromTransformedAABB(s,this.getWorldTransform(t)));var l=(r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var c=(0,se.CR)(i.getMin(),2),h=c[0],p=c[1],v=(0,se.CR)(i.getMax(),2),y=v[0],b=v[1];return new j0(h+((l==null?void 0:l.left)||0),p+((l==null?void 0:l.top)||0),y-h,b-p)}return new j0((l==null?void 0:l.left)||0,(l==null?void 0:l.top)||0,0,0)},e.prototype.dirtifyWorldInternal=function(t,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,t.childNodes.forEach(function(s){var l=s.transformable;l.dirtyFlag||r.dirtifyWorldInternal(s,l)});var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},e.prototype.syncHierarchy=function(t){var n=t.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(t,n);for(var r=t.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},e.prototype.sync=function(t,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=t.parentNode,i=r&&r.transformable;r===null||!i?Kr.copy(n.worldTransform,n.localTransform):Kr.multiply(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},e.prototype.unfreezeParentToRoot=function(t){for(var n=t.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},e}(),Kd={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Qx=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,sT=/[!%),.:;?\]}'""]/,lT=/[$('"]/,I_=/[!),.:;?\]}'""]/,U1=/[([{'"]/,X5=/[)\]'"?!:;,.]/,HC=/[(['"...]/,$5=/[!%),.:;?\]}'"]/,fy=/[$([{'"#]/,Y5=new RegExp("".concat(sT.source,"|").concat(I_.source,"|").concat(X5.source,"|").concat($5.source)),K5=new RegExp("".concat(lT.source,"|").concat(U1.source,"|").concat(HC.source,"|").concat(fy.source)),WC=function(){function e(t){var n=this;this.runtime=t,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(K5.exec(i)||Y5.exec(r)))},this.trimByKinsokuShorui=function(r){var i=(0,se.ev)([],(0,se.CR)(r),!1),s=i[i.length-2];if(!s)return r;var l=s[s.length-1];return i[i.length-2]=s.slice(0,-1),i[i.length-1]=l+i[i.length-1],i}}return e.prototype.measureFont=function(t,n){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),s=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});s.font=t;var l=Kd.MetricsString+Kd.BaselineSymbol,c=Math.ceil(s.measureText(l).width),h=Math.ceil(s.measureText(Kd.BaselineSymbol).width),p=Kd.HeightMultiplier*h;h=h*Kd.BaselineMultiplier|0,i.width=c,i.height=p,s.fillStyle="#f00",s.fillRect(0,0,c,p),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(l,0,h);var v=s.getImageData(0,0,c||1,p||1).data,y=v.length,b=c*4,w=0,R=0,M=!1;for(w=0;w<h;++w){for(var I=0;I<b;I+=4)if(v[R+I]!==255){M=!0;break}if(!M)R+=b;else break}for(r.ascent=h-w,R=y-b,M=!1,w=p;w>h;--w){for(var I=0;I<b;I+=4)if(v[R+I]!==255){M=!0;break}if(!M)R-=b;else break}return r.descent=w-h,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[t]=r,r},e.prototype.measureText=function(t,n,r){var i=n.fontSize,s=i===void 0?16:i,l=n.wordWrap,c=l===void 0?!1:l,h=n.lineHeight,p=n.lineWidth,v=p===void 0?1:p,y=n.textBaseline,b=y===void 0?"alphabetic":y,w=n.textAlign,R=w===void 0?"start":w,M=n.letterSpacing,I=M===void 0?0:M,N=n.textPath;n.textPathSide,n.textPathStartOffset;var z=n.leading,H=z===void 0?0:z,X=P_(n),$=this.measureFont(X,r);$.fontSize===0&&($.fontSize=s,$.ascent=s);var te=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);te.font=X,n.isOverflowing=!1;var fe=c?this.wordWrap(t,n,r):t,ye=fe.split(/(?:\r\n|\r|\n)/),Le=new Array(ye.length),Ge=0;if(N){N.getTotalLength();for(var Qe=0;Qe<ye.length;Qe++)var gt=te.measureText(ye[Qe]).width+(ye[Qe].length-1)*I}else{for(var Qe=0;Qe<ye.length;Qe++){var qe=te.measureText(ye[Qe]).width+(ye[Qe].length-1)*I;Le[Qe]=qe,Ge=Math.max(Ge,qe)}var gt=Ge+v,lt=h||$.fontSize+v,ft=Math.max(lt,$.fontSize+v)+(ye.length-1)*(lt+H);lt+=H;var pt=0;return b==="middle"?pt=-ft/2:b==="bottom"||b==="alphabetic"||b==="ideographic"?pt=-ft:(b==="top"||b==="hanging")&&(pt=0),{font:X,width:gt,height:ft,lines:ye,lineWidths:Le,lineHeight:lt,maxLineWidth:Ge,fontProperties:$,lineMetrics:Le.map(function(Ct,Lt){var Tn=0;return R==="center"||R==="middle"?Tn-=Ct/2:(R==="right"||R==="end")&&(Tn-=Ct),new j0(Tn-v/2,pt+Lt*lt,Ct+v,lt)})}}},e.prototype.setGraphemeOnPath=function(){},e.prototype.wordWrap=function(t,n,r){var i=this,s=n.wordWrapWidth,l=s===void 0?0:s,c=n.letterSpacing,h=c===void 0?0:c,p=n.maxLines,v=p===void 0?1/0:p,y=n.textOverflow,b=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),w=l+h,R="";y==="ellipsis"?R="...":y&&y!=="clip"&&(R=y);for(var M=[],I=0,N=0,z={},H=function(pt){return i.getFromCache(pt,h,z,b)},X=Array.from(R).reduce(function(pt,Zt){return pt+H(Zt)},0),$=Array.from(t),te=0;te<$.length;te++){var fe=$[te],ye=t[te-1],Le=t[te+1],Ge=H(fe);if(this.isNewline(fe)){if(I++,I>=v){n.isOverflowing=!0;break}N=0,M[I]="";continue}if(N>0&&N+Ge>w){if(I+1>=v){if(n.isOverflowing=!0,X>0&&X<=w){for(var Qe=M[I].length,gt=0,qe=Qe,lt=0;lt<Qe;lt++){var ft=H(M[I][lt]);if(gt+ft+X>w){qe=lt;break}gt+=ft}M[I]=(M[I]||"").slice(0,qe)+R}break}if(I++,N=0,M[I]="",this.isBreakingSpace(fe))continue;this.canBreakInLastChar(fe)||(M=this.trimToBreakable(M),N=this.sumTextWidthByCache(M[I]||"",z)),this.shouldBreakByKinsokuShorui(fe,Le)&&(M=this.trimByKinsokuShorui(M),N+=H(ye||""))}N+=Ge,M[I]=(M[I]||"")+fe}return M.join(`
`)},e.prototype.isBreakingSpace=function(t){return typeof t!="string"?!1:Kd.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},e.prototype.isNewline=function(t){return typeof t!="string"?!1:Kd.Newlines.indexOf(t.charCodeAt(0))>=0},e.prototype.trimToBreakable=function(t){var n=(0,se.ev)([],(0,se.CR)(t),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var s=r.slice(i,i+1),l=this.isBreakingSpace(s),c=i+1,h=i+(l?0:1);return n[n.length-1]+=r.slice(c,r.length),n[n.length-2]=r.slice(0,h),n},e.prototype.canBreakInLastChar=function(t){return!(t&&Qx.test(t))},e.prototype.sumTextWidthByCache=function(t,n){return t.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},e.prototype.findBreakableIndex=function(t){for(var n=t.length-1;n>=0;n--)if(!Qx.test(t[n]))return n;return-1},e.prototype.getFromCache=function(t,n,r,i){var s=r[t];if(typeof s!="number"){var l=t.length*n;s=i.measureText(t).width+l,r[t]=s}return s},e}(),qr={},q5=function(){var e,t=new cf,n=new Yf;return e={},e[ii.CIRCLE]=new c0,e[ii.ELLIPSE]=new pg,e[ii.RECT]=t,e[ii.IMAGE]=t,e[ii.GROUP]=new G5,e[ii.LINE]=new rT,e[ii.TEXT]=new Nu(qr),e[ii.POLYLINE]=n,e[ii.POLYGON]=n,e[ii.PATH]=new ss,e[ii.HTML]=null,e[ii.MESH]=null,e}(),Q5=function(){var e,t=new mC,n=new Yx;return e={},e[Co.PERCENTAGE]=null,e[Co.NUMBER]=new Kx,e[Co.ANGLE]=new pC,e[Co.DEFINED_PATH]=new vC,e[Co.PAINT]=t,e[Co.COLOR]=t,e[Co.FILTER]=new gC,e[Co.LENGTH]=n,e[Co.LENGTH_PERCENTAGE]=n,e[Co.LENGTH_PERCENTAGE_12]=new yC,e[Co.LENGTH_PERCENTAGE_14]=new V5,e[Co.COORDINATE]=new Yx,e[Co.OFFSET_DISTANCE]=new bC,e[Co.OPACITY_VALUE]=new xC,e[Co.PATH]=new EC,e[Co.LIST_OF_POINTS]=new SC,e[Co.SHADOW_BLUR]=new TC,e[Co.TEXT]=new wC,e[Co.TEXT_TRANSFORM]=new k1,e[Co.TRANSFORM]=new Zc,e[Co.TRANSFORM_ORIGIN]=new xc,e[Co.Z_INDEX]=new Rl,e[Co.MARKER]=new _C,e}(),j1=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof D.g!="undefined"?D.g:{}};qr.CameraContribution=hS,qr.AnimationTimeline=null,qr.EasingFunction=null,qr.offscreenCanvasCreator=new W0,qr.sceneGraphSelector=new Z5,qr.sceneGraphService=new Va(qr),qr.textService=new WC(qr),qr.geometryUpdaterFactory=q5,qr.CSSPropertySyntaxFactory=Q5,qr.styleValueRegistry=new dC(qr),qr.layoutRegistry=null,qr.globalThis=j1(),qr.enableCSSParsing=!1,qr.enableDataset=!1,qr.enableStyleSyntax=!0,qr.enableAttributeDashCased=!1,qr.enableSizeAttenuation=!1;var Sv=0;function J5(){Sv=0}var GC=new pm(Ua.INSERTED,null,"","","",0,"",""),L_=new pm(Ua.REMOVED,null,"","","",0,"",""),e4=new Vi(Ua.DESTROY),ZC=function(e){(0,se.ZT)(t,e);function t(){var n=e.call(this)||this;return n.entity=Sv++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:Nx.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=qr.enableCSSParsing?{opacity:Su,fillOpacity:Su,strokeOpacity:Su,fill:Su,stroke:Su,transform:Su,transformOrigin:Su,visibility:Su,pointerEvents:Su,lineWidth:Su,lineCap:Su,lineJoin:Su,increasedLineWidthForHitTesting:Su,fontSize:Su,fontFamily:Su,fontStyle:Su,fontWeight:Su,fontVariant:Su,textAlign:Su,textBaseline:Su,textTransform:Su,zIndex:Su,filter:Su,shadowType:Su}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(t.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(n){throw new Error(ru)},t.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(SO);return qr.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),this.isMutationObserved&&(GC.relatedNode=this,n.dispatchEvent(GC)),n},t.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},t.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},t.prototype.removeChild=function(n){var r;return L_.relatedNode=this,n.dispatchEvent(L_),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),qr.sceneGraphService.detach(n),n},t.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},t.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},t.prototype.matches=function(n){return qr.sceneGraphService.matches(n,this)},t.prototype.getElementById=function(n){return qr.sceneGraphService.querySelector("#".concat(n),this)},t.prototype.getElementsByName=function(n){return qr.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},t.prototype.getElementsByClassName=function(n){return qr.sceneGraphService.querySelectorAll(".".concat(n),this)},t.prototype.getElementsByTagName=function(n){return qr.sceneGraphService.querySelectorAll(n,this)},t.prototype.querySelector=function(n){return qr.sceneGraphService.querySelector(n,this)},t.prototype.querySelectorAll=function(n){return qr.sceneGraphService.querySelectorAll(n,this)},t.prototype.closest=function(n){var r=this;do{if(qr.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},t.prototype.find=function(n){var r=this,i=null;return this.forEach(function(s){return s!==r&&n(s)?(i=s,!0):!1}),i},t.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(s){s!==r&&n(s)&&i.push(s)}),i},t.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this);r.forEach(function(l,c){var h;return(h=n.parentNode)===null||h===void 0?void 0:h.appendChild(l,s+c+1)})}},t.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this),l=(0,se.CR)(r),c=l[0],h=l.slice(1);this.parentNode.appendChild(c,s),(n=c).after.apply(n,(0,se.ev)([],(0,se.CR)(h),!1))}},t.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,(0,se.ev)([],(0,se.CR)(n),!1)),this.remove()},t.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s){return n.appendChild(s)})},t.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s,l){return n.appendChild(s,l)})},t.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,(0,se.ev)([],(0,se.CR)(n),!1))},t.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},t.prototype.destroy=function(){this.dispatchEvent(e4),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},t.prototype.getGeometryBounds=function(){return qr.sceneGraphService.getGeometryBounds(this)},t.prototype.getRenderBounds=function(){return qr.sceneGraphService.getBounds(this,!0)},t.prototype.getBounds=function(){return qr.sceneGraphService.getBounds(this)},t.prototype.getLocalBounds=function(){return qr.sceneGraphService.getLocalBounds(this)},t.prototype.getBoundingClientRect=function(){return qr.sceneGraphService.getBoundingClientRect(this)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},t.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},t.prototype.getAttribute=function(n){if(gS(n))return qr.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){if(qr.enableAttributeDashCased){var i=yS(n);r=this.attributes[i]}return qr.enableCSSParsing&&(0,ya.Z)(r)?null:r}else return r},t.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},t.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},t.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},t.prototype.setAttribute=function(n,r,i,s){this.attributes[n]=r},t.prototype.getAttributeNS=function(n,r){throw new Error(ru)},t.prototype.getAttributeNode=function(n){throw new Error(ru)},t.prototype.getAttributeNodeNS=function(n,r){throw new Error(ru)},t.prototype.hasAttributeNS=function(n,r){throw new Error(ru)},t.prototype.removeAttributeNS=function(n,r){throw new Error(ru)},t.prototype.removeAttributeNode=function(n){throw new Error(ru)},t.prototype.setAttributeNS=function(n,r,i){throw new Error(ru)},t.prototype.setAttributeNode=function(n){throw new Error(ru)},t.prototype.setAttributeNodeNS=function(n){throw new Error(ru)},t.prototype.toggleAttribute=function(n,r){throw new Error(ru)},t}(wo);function gl(e){return!!(e!=null&&e.nodeName)}var XC=qr.globalThis.Proxy?qr.globalThis.Proxy:function(){},Tv=new pm(Ua.ATTR_MODIFIED,null,null,null,null,pm.MODIFICATION,null,null),$C={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},YC={fill:ty,stroke:ty,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},t4=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],uT=(0,se.ev)((0,se.ev)([],(0,se.CR)(t4),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),D_="data-",Kf=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||ii.GROUP,qr.enableCSSParsing?(Object.assign(r.attributes,$C),Object.assign(r.parsedStyle,YC,r.config.initialParsedStyle)):r.config.initialParsedStyle&&Object.assign(r.parsedStyle,r.config.initialParsedStyle),r.initAttributes(r.config.style),qr.enableDataset&&(r.dataset=new XC({},{get:function(i,s){var l="".concat(D_).concat(mS(s));return i[l]!==void 0?i[l]:r.getAttribute(l)},set:function(i,s,l){return r.setAttribute("".concat(D_).concat(mS(s)),l),!0}})),qr.enableStyleSyntax&&(r.style=new XC({setProperty:function(i,s){r.setAttribute(i,s)},getPropertyValue:function(i){return r.getAttribute(i)},removeProperty:function(i){r.removeAttribute(i)},item:function(){return""}},{get:function(i,s){return i[s]!==void 0?i[s]:r.getAttribute(s)},set:function(i,s,l){return r.setAttribute(s,l),!0}})),r}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},t.prototype.cloneNode=function(n,r){var i=(0,se.pi)({},this.attributes);for(var s in i){var l=i[s];gl(l)&&s!=="clipPath"&&s!=="offsetPath"&&s!=="textPath"&&(i[s]=l.cloneNode(n)),r&&(i[s]=r(s,l))}var c=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return c.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(h){if(!h.style.isMarker){var p=h.cloneNode(n);c.appendChild(p)}}),c},t.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};qr.enableCSSParsing&&(i.usedAttributes=uT);var s=n;if(qr.enableAttributeDashCased){s={};for(var l in n){var c=yS(l);s[c]=n[l]}}qr.styleValueRegistry.processProperties(this,s,i),r.dirty=!0},t.prototype.setAttribute=function(n,r,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),qr.enableAttributeDashCased&&(n=yS(n)),!js(r)&&(i||r!==this.attributes[n])&&(this.internalSetAttribute(n,r,{memoize:s}),e.prototype.setAttribute.call(this,n,r))},t.prototype.internalSetAttribute=function(n,r,i){var s;i===void 0&&(i={});var l=this.renderable,c=this.attributes[n],h=this.parsedStyle[n];qr.styleValueRegistry.processProperties(this,(s={},s[n]=r,s),i),l.dirty=!0;var p=this.parsedStyle[n];this.isConnected&&(Tv.relatedNode=this,Tv.prevValue=c,Tv.newValue=r,Tv.attrName=n,Tv.prevParsedValue=h,Tv.newParsedValue=p,this.isMutationObserved?this.dispatchEvent(Tv):(Tv.target=this,this.ownerDocument.defaultView.dispatchEvent(Tv,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,c,r,h,p)},t.prototype.getBBox=function(){var n=this.getBounds(),r=(0,se.CR)(n.getMin(),2),i=r[0],s=r[1],l=(0,se.CR)(n.getMax(),2),c=l[0],h=l[1];return new j0(i,s,c-i,h-s)},t.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),qr.sceneGraphService.setOrigin(this,Rf(n,r,i)),this},t.prototype.getOrigin=function(){return qr.sceneGraphService.getOrigin(this)},t.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),qr.sceneGraphService.setPosition(this,Rf(n,r,i)),this},t.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),qr.sceneGraphService.setLocalPosition(this,Rf(n,r,i)),this},t.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),qr.sceneGraphService.translate(this,Rf(n,r,i)),this},t.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),qr.sceneGraphService.translateLocal(this,Rf(n,r,i)),this},t.prototype.getPosition=function(){return qr.sceneGraphService.getPosition(this)},t.prototype.getLocalPosition=function(){return qr.sceneGraphService.getLocalPosition(this)},t.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},t.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Rf(n,r,i)),qr.sceneGraphService.scaleLocal(this,n),this},t.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Rf(n,r,i)),qr.sceneGraphService.setLocalScale(this,n),this},t.prototype.getLocalScale=function(){return qr.sceneGraphService.getLocalScale(this)},t.prototype.getScale=function(){return qr.sceneGraphService.getScale(this)},t.prototype.getEulerAngles=function(){var n=(0,se.CR)(aS(ur.Ue(),qr.sceneGraphService.getWorldTransform(this)),3),r=n[2];return Zd(r)},t.prototype.getLocalEulerAngles=function(){var n=(0,se.CR)(aS(ur.Ue(),qr.sceneGraphService.getLocalRotation(this)),3),r=n[2];return Zd(r)},t.prototype.setEulerAngles=function(n){return qr.sceneGraphService.setEulerAngles(this,0,0,n),this},t.prototype.setLocalEulerAngles=function(n){return qr.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},t.prototype.rotateLocal=function(n,r,i){return(0,ya.Z)(r)&&(0,ya.Z)(i)?qr.sceneGraphService.rotateLocal(this,0,0,n):qr.sceneGraphService.rotateLocal(this,n,r,i),this},t.prototype.rotate=function(n,r,i){return(0,ya.Z)(r)&&(0,ya.Z)(i)?qr.sceneGraphService.rotate(this,0,0,n):qr.sceneGraphService.rotate(this,n,r,i),this},t.prototype.setRotation=function(n,r,i,s){return qr.sceneGraphService.setRotation(this,n,r,i,s),this},t.prototype.setLocalRotation=function(n,r,i,s){return qr.sceneGraphService.setLocalRotation(this,n,r,i,s),this},t.prototype.setLocalSkew=function(n,r){return qr.sceneGraphService.setLocalSkew(this,n,r),this},t.prototype.getRotation=function(){return qr.sceneGraphService.getRotation(this)},t.prototype.getLocalRotation=function(){return qr.sceneGraphService.getLocalRotation(this)},t.prototype.getLocalSkew=function(){return qr.sceneGraphService.getLocalSkew(this)},t.prototype.getLocalTransform=function(){return qr.sceneGraphService.getLocalTransform(this)},t.prototype.getWorldTransform=function(){return qr.sceneGraphService.getWorldTransform(this)},t.prototype.setLocalTransform=function(n){return qr.sceneGraphService.setLocalTransform(this,n),this},t.prototype.resetLocalTransform=function(){qr.sceneGraphService.resetLocalTransform(this)},t.prototype.getAnimations=function(){return this.activeAnimations},t.prototype.animate=function(n,r){var i,s=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return s?s.play(this,n,r):null},t.prototype.isVisible=function(){var n,r;return qr.enableCSSParsing?((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible":((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"},Object.defineProperty(t.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),t.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},t.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},t.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},t.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},t.prototype.getConfig=function(){return this.config},t.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=(0,se.CR)(r,2),l=s[0],c=s[1];return l?ml(l)?(Object.keys(l).forEach(function(h){n.setAttribute(h,l[h])}),this):r.length===2?(this.setAttribute(l,c),this):this.attributes[l]:this.attributes},t.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=(0,se.CR)(Kr.getTranslation(ur.Ue(),r),2),s=i[0],l=i[1],c=(0,se.CR)(Kr.getScaling(ur.Ue(),r),2),h=c[0],p=c[1],v=Kr.getRotation($i(),r),y=(0,se.CR)(aS(ur.Ue(),v),3),b=y[0],w=y[2];return sS(b||w,s,l,h,p)},t.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},t.prototype.setMatrix=function(n){var r=(0,se.CR)(lS(n),5),i=r[0],s=r[1],l=r[2],c=r[3],h=r[4];this.setEulerAngles(h).setPosition(i,s).setLocalScale(l,c)},t.prototype.setLocalMatrix=function(n){var r=(0,se.CR)(lS(n),5),i=r[0],s=r[1],l=r[2],c=r[3],h=r[4];this.setLocalEulerAngles(h).setLocalPosition(i,s).setLocalScale(l,c)},t.prototype.show=function(){qr.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},t.prototype.hide=function(){qr.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},t.prototype.getCount=function(){return this.childElementCount},t.prototype.getParent=function(){return this.parentElement},t.prototype.getChildren=function(){return this.children},t.prototype.getFirst=function(){return this.firstElementChild},t.prototype.getLast=function(){return this.lastElementChild},t.prototype.getChildByIndex=function(n){return this.children[n]||null},t.prototype.add=function(n,r){return this.appendChild(n,r)},t.prototype.set=function(n,r){this.config[n]=r},t.prototype.get=function(n){return this.config[n]},t.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.setZIndex=function(n){return this.style.zIndex=n,this},t}(ZC),G0=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ii.CIRCLE},n))||this}return t}(Kf),V1=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);return r=e.call(this,(0,se.pi)({style:qr.enableCSSParsing?(0,se.pi)({},i):(0,se.pi)({},i)},s))||this,r.isCustomElement=!0,r}return t}(Kf),vm=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ii.ELLIPSE},n))||this}return t}(Kf),ff=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ii.GROUP},n))||this}return t}(Kf),N_=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);return r=e.call(this,(0,se.pi)({type:ii.HTML,style:qr.enableCSSParsing?(0,se.pi)({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):(0,se.pi)({},i)},s))||this,r.cullable.enable=!1,r}return t.prototype.getDomElement=function(){return this.parsedStyle.$el},t.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var n=this.parsedStyle,r=n.x,i=n.y,s=n.width,l=n.height;return new j0(r,i,s,l)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.getBounds=function(){var n,r,i=this.getBoundingClientRect(),s=(r=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect(),l=new _c,c=i.left-((s==null?void 0:s.left)||0),h=i.top-((s==null?void 0:s.top)||0);return l.setMinMax([c,h,0],[c+i.width,h+i.height,0]),l},t.prototype.getLocalBounds=function(){if(this.parentNode){var n=Kr.invert(Kr.create(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!_c.isEmpty(r)){var i=new _c;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},t}(Kf),wv=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ii.IMAGE},n))||this}return t}(Kf),hy=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);r=e.call(this,(0,se.pi)({type:ii.LINE,style:(0,se.pi)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},s))||this,r.markerStartAngle=0,r.markerEndAngle=0;var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd;return c&&gl(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),h&&gl(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&gl(s)&&(this.markerStartAngle=0,s.remove()),l&&gl(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"&&(s&&gl(s)&&(this.markerEndAngle=0,s.remove()),l&&gl(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1)))},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=r.x1,p=r.x2,v=r.y1,y=r.y2,b=n?i:s;if(!(!b||!gl(b))){var w=0,R,M,I,N,z,H;n?(I=h,N=v,R=p-h,M=y-v,z=l||0,H=this.markerStartAngle):(I=p,N=y,R=h-p,M=v-y,z=c||0,H=this.markerEndAngle),w=Math.atan2(M,R),b.setLocalEulerAngles(w*180/Math.PI+H),b.setLocalPosition(I+Math.cos(w)*z,N+Math.sin(w)*z)}},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,s=i.x1,l=i.y1,c=i.x2,h=i.y2,p=Wd(s,l,c,h,n),v=p.x,y=p.y,b=ur.fF(ur.Ue(),ur.al(v,y,0),r?this.getWorldTransform():this.getLocalTransform());return new $f(b[0],b[1])},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,s=n.x2,l=n.y2;return rg(r,i,s,l)},t}(Kf),fd=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);r=e.call(this,(0,se.pi)({type:ii.PATH,style:qr.enableCSSParsing?(0,se.pi)({d:"",miterLimit:""},i):(0,se.pi)({},i),initialParsedStyle:qr.enableCSSParsing?null:{miterLimit:4,d:(0,se.pi)({},Bx)}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd,p=l.markerMid;return c&&gl(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),p&&gl(p)&&r.placeMarkerMid(p),h&&gl(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&gl(s)&&(this.markerStartAngle=0,s.remove()),l&&gl(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&gl(s)&&(this.markerEndAngle=0,s.remove()),l&&gl(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=n?i:s;if(!(!h||!gl(h))){var p=0,v,y,b,w,R,M;if(n){var I=(0,se.CR)(this.getStartTangent(),2),N=I[0],z=I[1];b=z[0],w=z[1],v=N[0]-z[0],y=N[1]-z[1],R=l||0,M=this.markerStartAngle}else{var H=(0,se.CR)(this.getEndTangent(),2),N=H[0],z=H[1];b=z[0],w=z[1],v=N[0]-z[0],y=N[1]-z[1],R=c||0,M=this.markerEndAngle}p=Math.atan2(y,v),h.setLocalEulerAngles(p*180/Math.PI+M),h.setLocalPosition(b+Math.cos(p)*R,w+Math.sin(p)*R)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(p){p.remove()}),n&&gl(n))for(var i=1;i<r.length-1;i++){var s=(0,se.CR)(r[i].currentPoint,2),l=s[0],c=s[1],h=i===1?n:n.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(l,c)}},t.prototype.getTotalLength=function(){return Vx(this)},t.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.d.absolutePath,s=lh(i,n),l=s.x,c=s.y,h=ur.fF(ur.Ue(),ur.al(l,c,0),r?this.getWorldTransform():this.getLocalTransform());return new $f(h[0],h[1])},t.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*Vx(this),r)},t.prototype.getStartTangent=function(){var n=this.parsedStyle.d.segments,r=[];if(n.length>1){var i=n[0].currentPoint,s=n[1].currentPoint,l=n[1].startTangent;r=[],l?(r.push([i[0]-l[0],i[1]-l[1]]),r.push([i[0],i[1]])):(r.push([s[0],s[1]]),r.push([i[0],i[1]]))}return r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.d.segments,r=n.length,i=[];if(r>1){var s=n[r-2].currentPoint,l=n[r-1].currentPoint,c=n[r-1].endTangent;i=[],c?(i.push([l[0]-c[0],l[1]-c[1]]),i.push([l[0],l[1]])):(i.push([s[0],s[1]]),i.push([l[0],l[1]]))}return i},t}(Kf),H1=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);r=e.call(this,(0,se.pi)({type:ii.POLYGON,style:qr.enableCSSParsing?(0,se.pi)({points:"",miterLimit:"",isClosed:!0},i):(0,se.pi)({},i),initialParsedStyle:qr.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd,p=l.markerMid;return c&&gl(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),p&&gl(p)&&r.placeMarkerMid(p),h&&gl(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&gl(s)&&(this.markerStartAngle=0,s.remove()),l&&gl(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&gl(s)&&(this.markerEndAngle=0,s.remove()),l&&gl(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=r.points,p=(h||{}).points,v=n?i:s;if(!(!v||!gl(v)||!p)){var y=0,b,w,R,M,I,N;if(R=p[0][0],M=p[0][1],n)b=p[1][0]-p[0][0],w=p[1][1]-p[0][1],I=l||0,N=this.markerStartAngle;else{var z=p.length;this.parsedStyle.isClosed?(b=p[z-1][0]-p[0][0],w=p[z-1][1]-p[0][1]):(R=p[z-1][0],M=p[z-1][1],b=p[z-2][0]-p[z-1][0],w=p[z-2][1]-p[z-1][1]),I=c||0,N=this.markerEndAngle}y=Math.atan2(w,b),v.setLocalEulerAngles(y*180/Math.PI+N),v.setLocalPosition(R+Math.cos(y)*I,M+Math.sin(y)*I)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.points,i=(r||{}).points;if(this.markerMidList.forEach(function(p){p.remove()}),this.markerMidList=[],n&&gl(n)&&i)for(var s=1;s<(this.parsedStyle.isClosed?i.length:i.length-1);s++){var l=i[s][0],c=i[s][1],h=s===1?n:n.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(l,c)}},t}(Kf),W1=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,se._T)(n,["style"]);return e.call(this,(0,se.pi)({type:ii.POLYLINE,style:qr.enableCSSParsing?(0,se.pi)({points:"",miterLimit:"",isClosed:!1},r):(0,se.pi)({},r),initialParsedStyle:qr.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return t.prototype.getTotalLength=function(){return ZO(this)},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var s=[],l=0,c,h,p=this.getTotalLength();i.forEach(function(I,N){i[N+1]&&(c=[0,0],c[0]=l/p,h=rg(I[0],I[1],i[N+1][0],i[N+1][1]),l+=h,c[1]=l/p,s.push(c))}),this.parsedStyle.points.segments=s}var v=0,y=0;this.parsedStyle.points.segments.forEach(function(I,N){n>=I[0]&&n<=I[1]&&(v=(n-I[0])/(I[1]-I[0]),y=N)});var b=Wd(i[y][0],i[y][1],i[y+1][0],i[y+1][1],v),w=b.x,R=b.y,M=ur.fF(ur.Ue(),ur.al(w,R,0),r?this.getWorldTransform():this.getLocalTransform());return new $f(M[0],M[1])},t.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},t}(H1),hd=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ii.RECT},n))||this}return t}(Kf),hf=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,se._T)(n,["style"]);return e.call(this,(0,se.pi)({type:ii.TEXT,style:qr.enableCSSParsing?(0,se.pi)({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):(0,se.pi)({fill:"black"},r)},i))||this}return t.prototype.getComputedTextLength=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},t.prototype.getLineBoundingRects=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},t.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},t}(Kf),KC=function(){function e(){this.registry={},this.define(ii.CIRCLE,G0),this.define(ii.ELLIPSE,vm),this.define(ii.RECT,hd),this.define(ii.IMAGE,wv),this.define(ii.LINE,hy),this.define(ii.GROUP,ff),this.define(ii.PATH,fd),this.define(ii.POLYGON,H1),this.define(ii.POLYLINE,W1),this.define(ii.TEXT,hf),this.define(ii.HTML,N_)}return e.prototype.define=function(t,n){this.registry[t]=n},e.prototype.get=function(t){return this.registry[t]},e}(),Jx={number:function(e){return new Fl(e)},percent:function(e){return new Fl(e,"%")},px:function(e){return new Fl(e,"px")},em:function(e){return new Fl(e,"em")},rem:function(e){return new Fl(e,"rem")},deg:function(e){return new Fl(e,"deg")},grad:function(e){return new Fl(e,"grad")},rad:function(e){return new Fl(e,"rad")},turn:function(e){return new Fl(e,"turn")},s:function(e){return new Fl(e,"s")},ms:function(e){return new Fl(e,"ms")},registerProperty:function(e){var t=e.name,n=e.inherits,r=e.interpolable,i=e.initialValue,s=e.syntax;qr.styleValueRegistry.registerMetadata({n:t,inh:n,int:r,d:i,syntax:s})},registerLayout:function(e,t){qr.layoutRegistry.registerLayout(e,t)}},qC=function(e){(0,se.ZT)(t,e);function t(){var n=e.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new qr.AnimationTimeline(n)}catch(i){}var r={};return $x.forEach(function(i){var s=i.n,l=i.inh,c=i.d;l&&c&&(r[s]=S_(c)?c(ii.GROUP):c)}),n.documentElement=new ff({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),t.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?hf:ff);var s=new i(r);return s.ownerDocument=this,s},t.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},t.prototype.cloneNode=function(n){throw new Error(ru)},t.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(n){}},t.prototype.elementsFromBBox=function(n,r,i,s){var l=this.defaultView.context.rBushRoot,c=l.search({minX:n,minY:r,maxX:i,maxY:s}),h=[];return c.forEach(function(p){var v=p.displayObject,y=v.parsedStyle.pointerEvents,b=y===void 0?"auto":y,w=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(b);(!w||w&&v.isVisible())&&!v.isCulled()&&v.isInteractive()&&h.push(v)}),h.sort(function(p,v){return v.sortable.renderOrder-p.sortable.renderOrder}),h},t.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height;if(s<0||l<0||s>h||l>p)return null;var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,w=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return w&&w[0]||this.documentElement},t.prototype.elementFromPoint=function(n,r){return(0,se.mG)(this,void 0,void 0,function(){var i,s,l,c,h,p,v,y,b,w;return(0,se.Jh)(this,function(R){switch(R.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height,s<0||l<0||s>h||l>p?[2,null]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return w=R.sent().picked,[2,w&&w[0]||this.documentElement]}})})},t.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height;if(s<0||l<0||s>h||l>p)return[];var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,w=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return w[w.length-1]!==this.documentElement&&w.push(this.documentElement),w},t.prototype.elementsFromPoint=function(n,r){return(0,se.mG)(this,void 0,void 0,function(){var i,s,l,c,h,p,v,y,b,w;return(0,se.Jh)(this,function(R){switch(R.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height,s<0||l<0||s>h||l>p?[2,[]]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return w=R.sent().picked,w[w.length-1]!==this.documentElement&&w.push(this.documentElement),[2,w]}})})},t.prototype.appendChild=function(n,r){throw new Error(b_)},t.prototype.insertBefore=function(n,r){throw new Error(b_)},t.prototype.removeChild=function(n,r){throw new Error(b_)},t.prototype.replaceChild=function(n,r,i){throw new Error(b_)},t.prototype.append=function(){throw new Error(b_)},t.prototype.prepend=function(){throw new Error(b_)},t.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},t.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},t.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},t.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},t.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},t.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},t.prototype.find=function(n){return this.documentElement.find(n)},t.prototype.findAll=function(n){return this.documentElement.findAll(n)},t}(wo),QC=function(){function e(t){this.strategies=t}return e.prototype.apply=function(t){var n=t.camera,r=t.renderingService,i=t.renderingContext,s=this.strategies;r.hooks.cull.tap(e.tag,function(l){if(l){var c=l.cullable;return s.length===0?c.visible=i.unculledEntities.indexOf(l.entity)>-1:c.visible=s.every(function(h){return h.isVisible(n,l)}),!l.isCulled()&&l.isVisible()?l:(l.dispatchEvent(new Vi(Ua.CULLED)),null)}return l}),r.hooks.afterRender.tap(e.tag,function(l){l.cullable.visibilityPlaneMask=-1})},e.tag="Culling",e}(),cT=function(){function e(){var t=this;this.autoPreventDefault=!1,this.rootPointerEvent=new cy(null),this.rootWheelEvent=new ni(null),this.onPointerMove=function(n){var r,i,s,l,c=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView;if(!(c.supportsTouchEvents&&n.pointerType==="touch")){var h=t.normalizeToPointerEvent(n,c);try{for(var p=(0,se.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,c,n);t.context.eventService.mapEvent(b)}}catch(w){r={error:w}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(n){var r,i,s,l,c=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView,h=t.normalizeToPointerEvent(n,c);try{for(var p=(0,se.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,c,n);t.context.eventService.mapEvent(b)}}catch(w){r={error:w}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}}return e.prototype.apply=function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(s){var l=n.context.renderingService.hooks.pickSync.call({position:s,picked:[],topmost:!0}).picked;return l[0]||null}),r.hooks.pointerWheel.tap(e.tag,function(s){var l=n.normalizeWheelEvent(s);n.context.eventService.mapEvent(l)}),r.hooks.pointerDown.tap(e.tag,function(s){var l,c;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.normalizeToPointerEvent(s,i);if(n.autoPreventDefault&&h[0].isNormalized){var p=s.cancelable||!("cancelable"in s);p&&s.preventDefault()}try{for(var v=(0,se.XA)(h),y=v.next();!y.done;y=v.next()){var b=y.value,w=n.bootstrapEvent(n.rootPointerEvent,b,i,s);n.context.eventService.mapEvent(w)}}catch(R){l={error:R}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(e.tag,function(s){var l,c;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.context.contextService.getDomElement(),p=n.context.eventService.isNativeEventFromCanvas(h,s),v=p?"":"outside",y=n.normalizeToPointerEvent(s,i);try{for(var b=(0,se.XA)(y),w=b.next();!w.done;w=b.next()){var R=w.value,M=n.bootstrapEvent(n.rootPointerEvent,R,i,s);M.type+=v,n.context.eventService.mapEvent(M)}}catch(I){l={error:I}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(s){var l,c,h=n.normalizeToPointerEvent(s,i);try{for(var p=(0,se.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=n.bootstrapEvent(n.rootPointerEvent,y,i,s);n.context.eventService.mapEvent(b)}}catch(w){l={error:w}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)})},e.prototype.bootstrapEvent=function(t,n,r,i){t.view=r,t.originalEvent=null,t.nativeEvent=i,t.pointerId=n.pointerId,t.width=n.width,t.height=n.height,t.isPrimary=n.isPrimary,t.pointerType=n.pointerType,t.pressure=n.pressure,t.tangentialPressure=n.tangentialPressure,t.tiltX=n.tiltX,t.tiltY=n.tiltY,t.twist=n.twist,this.transferMouseData(t,n);var s=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),l=s.x,c=s.y;t.viewport.x=l,t.viewport.y=c;var h=this.context.eventService.viewport2Canvas(t.viewport),p=h.x,v=h.y;return t.canvas.x=p,t.canvas.y=v,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=JS[t.type]||t.type),t},e.prototype.normalizeWheelEvent=function(t){var n=this.rootWheelEvent;this.transferMouseData(n,t),n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ;var r=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),i=r.x,s=r.y;n.viewport.x=i,n.viewport.y=s;var l=this.context.eventService.viewport2Canvas(n.viewport),c=l.x,h=l.y;return n.canvas.x=c,n.canvas.y=h,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=t,n.type=t.type,n},e.prototype.transferMouseData=function(t,n){t.isTrusted=n.isTrusted,t.srcElement=n.srcElement,t.timeStamp=R_.now(),t.type=n.type,t.altKey=n.altKey,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.ctrlKey=n.ctrlKey,t.button=n.button,t.buttons=n.buttons,t.client.x=n.clientX,t.client.y=n.clientY,t.movement.x=n.movementX,t.movement.y=n.movementY,t.page.x=n.pageX,t.page.y=n.pageY,t.screen.x=n.screenX,t.screen.y=n.screenY,t.relatedTarget=null},e.prototype.setCursor=function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")},e.prototype.normalizeToPointerEvent=function(t,n){var r=[];if(n.isTouchEvent(t))for(var i=0;i<t.changedTouches.length;i++){var s=t.changedTouches[i];js(s.button)&&(s.button=0),js(s.buttons)&&(s.buttons=1),js(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),js(s.width)&&(s.width=s.radiusX||1),js(s.height)&&(s.height=s.radiusY||1),js(s.tiltX)&&(s.tiltX=0),js(s.tiltY)&&(s.tiltY=0),js(s.pointerType)&&(s.pointerType="touch"),js(s.pointerId)&&(s.pointerId=s.identifier||0),js(s.pressure)&&(s.pressure=s.force||.5),js(s.twist)&&(s.twist=0),js(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,s.type=t.type,r.push(s)}else if(n.isMouseEvent(t)){var l=t;js(l.isPrimary)&&(l.isPrimary=!0),js(l.width)&&(l.width=1),js(l.height)&&(l.height=1),js(l.tiltX)&&(l.tiltX=0),js(l.tiltY)&&(l.tiltY=0),js(l.pointerType)&&(l.pointerType="mouse"),js(l.pointerId)&&(l.pointerId=IC),js(l.pressure)&&(l.pressure=.5),js(l.twist)&&(l.twist=0),js(l.tangentialPressure)&&(l.tangentialPressure=0),l.isNormalized=!0,r.push(l)}else r.push(t);return r},e.tag="Event",e}(),JC=[ii.CIRCLE,ii.ELLIPSE,ii.IMAGE,ii.RECT,ii.LINE,ii.POLYLINE,ii.POLYGON,ii.TEXT,ii.PATH,ii.HTML],G1=function(){function e(){}return e.prototype.isVisible=function(t,n){var r,i,s=n.cullable;if(!s.enable)return!0;var l=n.getRenderBounds();if(_c.isEmpty(l))return!1;var c=t.getFrustum(),h=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return s.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,l,h||um.INDETERMINATE,c.planes),s.visible=s.visibilityPlaneMask!==um.OUTSIDE,s.visible},e.prototype.computeVisibilityWithPlaneMask=function(t,n,r,i){if(r===um.OUTSIDE||r===um.INSIDE)return r;for(var s=um.INSIDE,l=JC.indexOf(t.nodeName)>-1,c=0,h=i.length;c<h;++c){var p=1<<c;if(r&p&&!(l&&(c===4||c===5))){var v=i[c],y=v.normal,b=v.distance;if(ur.AK(y,n.getPositiveFarPoint(i[c]))+b<0)return um.OUTSIDE;ur.AK(y,n.getNegativeFarPoint(i[c]))+b<0&&(s|=p)}}return s},e}(),e3=function(){function e(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return e.prototype.apply=function(t){var n=this,r,i=t.renderingService,s=t.renderingContext,l=t.rBushRoot,c=s.root.ownerDocument.defaultView;this.rBush=l;var h=function(w){var R=w.target;R.renderable.dirty=!0,i.dirtify()},p=function(w){var R=w.detail.affectChildren,M=w.target;R&&M.forEach(function(N){n.toSync.add(N)});for(var I=M;I;)I.renderable&&n.toSync.add(I),I=I.parentElement;i.dirtify()},v=function(w){var R=w.target;qr.enableSizeAttenuation&&qr.styleValueRegistry.updateSizeAttenuation(R,c.getCamera().getZoom()),qr.enableCSSParsing&&qr.styleValueRegistry.recalc(R),qr.sceneGraphService.dirtifyToRoot(R),i.dirtify()},y=function(w){var R=w.target,M=R.rBushNode;M.aabb&&n.rBush.remove(M.aabb),n.toSync.delete(R),qr.sceneGraphService.dirtifyToRoot(R),i.dirtify()};i.hooks.init.tap(e.tag,function(){c.addEventListener(Ua.MOUNTED,v),c.addEventListener(Ua.UNMOUNTED,y),c.addEventListener(Ua.ATTR_MODIFIED,h),c.addEventListener(Ua.BOUNDS_CHANGED,p)}),i.hooks.destroy.tap(e.tag,function(){c.removeEventListener(Ua.MOUNTED,v),c.removeEventListener(Ua.UNMOUNTED,y),c.removeEventListener(Ua.ATTR_MODIFIED,h),c.removeEventListener(Ua.BOUNDS_CHANGED,p),n.toSync.clear()});var b=(r=qr.globalThis.requestIdleCallback)!==null&&r!==void 0?r:dm.bind(qr.globalThis);i.hooks.endFrame.tap(e.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,b(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):n.syncRTree()})},e.prototype.syncRTree=function(t){var n=this;if(t===void 0&&(t=!1),!(!t&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var r=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var s=i.rBushNode;s&&s.aabb&&n.rBush.remove(s.aabb);var l=i.getRenderBounds();if(l){var c=i.renderable;t&&(c.dirtyRenderBounds||(c.dirtyRenderBounds=new _c),c.dirtyRenderBounds.update(l.center,l.halfExtents));var h=(0,se.CR)(l.getMin(),2),p=h[0],v=h[1],y=(0,se.CR)(l.getMax(),2),b=y[0],w=y[1];s.aabb||(s.aabb={}),s.aabb.displayObject=i,s.aabb.minX=p,s.aabb.minY=v,s.aabb.maxX=b,s.aabb.maxY=w}s.aabb&&!isNaN(s.aabb.maxX)&&!isNaN(s.aabb.maxX)&&!isNaN(s.aabb.minX)&&!isNaN(s.aabb.minY)&&r.push(s.aabb)}),this.rBush.load(r),r.length=0,this.toSync.clear(),this.syncing=!1}},e.tag="Prepare",e}();function t3(e){return!!e.document}var dd;(function(e){e.READY="ready",e.BEFORE_RENDER="beforerender",e.RERENDER="rerender",e.AFTER_RENDER="afterrender",e.BEFORE_DESTROY="beforedestroy",e.AFTER_DESTROY="afterdestroy",e.RESIZE="resize",e.DIRTY_RECTANGLE="dirtyrectangle",e.RENDERER_CHANGED="rendererchanged"})(dd||(dd={}));var fT=500,n3=.1,r3=1e3,e2=new Vi(Ua.MOUNTED),hT=new Vi(Ua.UNMOUNTED),i3=new Vi(dd.BEFORE_RENDER),dT=new Vi(dd.RERENDER),o3=new Vi(dd.AFTER_RENDER),pT=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this)||this;r.Element=Kf,r.inited=!1,r.context={},r.document=new qC,r.document.defaultView=r,r.customElements=new KC;var i=n.container,s=n.canvas,l=n.offscreenCanvas,c=n.width,h=n.height,p=n.devicePixelRatio,v=n.renderer,y=n.background,b=n.cursor,w=n.document,R=n.requestAnimationFrame,M=n.cancelAnimationFrame,I=n.createImage,N=n.supportsPointerEvents,z=n.supportsTouchEvents,H=n.supportsCSSTransform,X=n.supportsMutipleCanvasesInOneContainer,$=n.useNativeClickEvent,te=n.alwaysTriggerPointerEventOnCanvas,fe=n.isTouchEvent,ye=n.isMouseEvent;X||OC(i,r);var Le=c,Ge=h,Qe=p;return s&&(Qe=p||C_&&window.devicePixelRatio||1,Qe=Qe>=1?Math.ceil(Qe):1,Le=c||MC(s)||s.width/Qe,Ge=h||PC(s)||s.height/Qe),l&&(qr.offscreenCanvas=l),r.devicePixelRatio=Qe,r.requestAnimationFrame=R!=null?R:dm.bind(qr.globalThis),r.cancelAnimationFrame=M!=null?M:nT.bind(qr.globalThis),r.supportsTouchEvents=z!=null?z:"ontouchstart"in qr.globalThis,r.supportsPointerEvents=N!=null?N:!!qr.globalThis.PointerEvent,r.isTouchEvent=fe!=null?fe:function(gt){return r.supportsTouchEvents&&gt instanceof qr.globalThis.TouchEvent},r.isMouseEvent=ye!=null?ye:function(gt){return!qr.globalThis.MouseEvent||gt instanceof qr.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(gt instanceof qr.globalThis.PointerEvent))},r.initRenderingContext({container:i,canvas:s,width:Le,height:Ge,renderer:v,offscreenCanvas:l,devicePixelRatio:Qe,cursor:b||"default",background:y||"transparent",createImage:I,document:w,supportsCSSTransform:H,useNativeClickEvent:$,alwaysTriggerPointerEventOnCanvas:te}),r.initDefaultCamera(Le,Ge,v.clipSpaceNearZ),r.initRenderer(v,!0),r}return t.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},t.prototype.initDefaultCamera=function(n,r,i){var s=this,l=new qr.CameraContribution;l.clipSpaceNearZ=i,l.setType(Cl.EXPLORING,x_.DEFAULT).setPosition(n/2,r/2,fT).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,n3,r3),l.canvas=this,l.eventEmitter.on(cS.UPDATED,function(){s.context.renderingContext.renderReasons.add(Yd.CAMERA_CHANGED),qr.enableSizeAttenuation&&s.getConfig().renderer.getConfig().enableSizeAttenuation&&s.updateSizeAttenuation()}),this.context.camera=l},t.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){qr.styleValueRegistry.updateSizeAttenuation(r,n)})},t.prototype.getConfig=function(){return this.context.config},t.prototype.getRoot=function(){return this.document.documentElement},t.prototype.getCamera=function(){return this.context.camera},t.prototype.getContextService=function(){return this.context.contextService},t.prototype.getEventService=function(){return this.context.eventService},t.prototype.getRenderingService=function(){return this.context.renderingService},t.prototype.getRenderingContext=function(){return this.context.renderingContext},t.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(t.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),t.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new Vi(dd.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var s=this.getRoot();this.unmountChildren(s),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new Vi(dd.AFTER_DESTROY))},t.prototype.changeSize=function(n,r){this.resize(n,r)},t.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(n/2,r/2,fT).setFocalPoint(n/2,r/2,0),l===ad.ORTHOGRAPHIC?s.setOrthographic(n/-2,n/2,r/2,r/-2,s.getNear(),s.getFar()):s.setAspect(n/r),this.dispatchEvent(new Vi(dd.RESIZE,{width:n,height:r}))},t.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},t.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},t.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},t.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},t.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},t.prototype.render=function(n){var r=this;this.dispatchEvent(i3);var i=this.getRenderingService();i.render(this.getConfig(),n,function(){r.dispatchEvent(dT)}),this.dispatchEvent(o3)},t.prototype.run=function(){var n=this,r=function(i,s){n.render(s),n.frameId=n.requestAnimationFrame(r)};r()},t.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new l0,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new cT,new e3,new QC([new G1])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService((0,se.pi)((0,se.pi)({},qr),this.context)),this.context.renderingService=new iT(qr,this.context),this.context.eventService=new z1(qr,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},t.prototype.initRenderingService=function(n,r,i){var s=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){s.inited=!0,r?(i?s.requestAnimationFrame(function(){s.dispatchEvent(new Vi(dd.READY))}):s.dispatchEvent(new Vi(dd.READY)),s.readyPromise&&s.resolveReadyPromise()):s.dispatchEvent(new Vi(dd.RENDERER_CHANGED)),r||s.getRoot().forEach(function(l){var c=l.renderable;c&&(c.renderBoundsDirty=!0,c.boundsDirty=!0,c.dirty=!0)}),s.mountChildren(s.getRoot()),n.getConfig().enableAutoRendering&&s.run()})},t.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(s){s.context=r.context,s.init(qr)})},t.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),(0,se.ev)([],(0,se.CR)(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(s){s.destroy(qr)}),this.initRenderer(n)}},t.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},t.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent(hT):(hT.target=n,this.dispatchEvent(hT,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},t.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(e2):(e2.target=n,this.dispatchEvent(e2,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},t.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},t.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},t.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},t.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},t.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},t.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},t}(mo),a3=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.landmarks=[],n}return t.prototype.rotate=function(n,r,i){if(this.relElevation=Jg(r),this.relAzimuth=Jg(n),this.relRoll=Jg(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Cl.EXPLORING){var s=Zo($i(),[1,0,0],il((this.rotateWorld?1:-1)*this.relElevation)),l=Zo($i(),[0,1,0],il((this.rotateWorld?1:-1)*this.relAzimuth)),c=Zo($i(),[0,0,1],il(this.relRoll)),h=tu($i(),l,s);h=tu($i(),h,c);var p=Kr.fromQuat(Kr.create(),h);Kr.translate(this.matrix,this.matrix,[0,0,-this.distance]),Kr.multiply(this.matrix,this.matrix,p),Kr.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getPosition():this.type===Cl.TRACKING&&this._getFocalPoint(),this._update(),this},t.prototype.pan=function(n,r){var i=Rf(n,r,0),s=ur.d9(this.position);return ur.IH(s,s,ur.bA(ur.Ue(),this.right,i[0])),ur.IH(s,s,ur.bA(ur.Ue(),this.up,i[1])),this._setPosition(s),this.triggerUpdate(),this},t.prototype.dolly=function(n){var r=this.forward,i=ur.d9(this.position),s=n*this.dollyingStep,l=this.distance+n*this.dollyingStep;return s=Math.max(Math.min(l,this.maxDistance),this.minDistance)-this.distance,i[0]+=s*r[0],i[1]+=s*r[1],i[2]+=s*r[2],this._setPosition(i),this.type===Cl.ORBITING||this.type===Cl.EXPLORING?this._getDistance():this.type===Cl.TRACKING&&ur.IH(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},t.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},t.prototype.createLandmark=function(n,r){var i,s,l,c;r===void 0&&(r={});var h=r.position,p=h===void 0?this.position:h,v=r.focalPoint,y=v===void 0?this.focalPoint:v,b=r.roll,w=r.zoom,R=new qr.CameraContribution;R.setType(this.type,void 0),R.setPosition(p[0],(i=p[1])!==null&&i!==void 0?i:this.position[1],(s=p[2])!==null&&s!==void 0?s:this.position[2]),R.setFocalPoint(y[0],(l=y[1])!==null&&l!==void 0?l:this.focalPoint[1],(c=y[2])!==null&&c!==void 0?c:this.focalPoint[2]),R.setRoll(b!=null?b:this.roll),R.setZoom(w!=null?w:this.zoom);var M={name:n,matrix:Kr.clone(R.getWorldTransform()),right:ur.d9(R.right),up:ur.d9(R.up),forward:ur.d9(R.forward),position:ur.d9(R.getPosition()),focalPoint:ur.d9(R.getFocalPoint()),distanceVector:ur.d9(R.getDistanceVector()),distance:R.getDistance(),dollyingStep:R.getDollyingStep(),azimuth:R.getAzimuth(),elevation:R.getElevation(),roll:R.getRoll(),relAzimuth:R.relAzimuth,relElevation:R.relElevation,relRoll:R.relRoll,zoom:R.getZoom()};return this.landmarks.push(M),M},t.prototype.gotoLandmark=function(n,r){var i=this;r===void 0&&(r={});var s=u(n)?this.landmarks.find(function(Ge){return Ge.name===n}):n;if(s){var l=(0,Gl.Z)(r)?{duration:r}:r,c=l.easing,h=c===void 0?"linear":c,p=l.duration,v=p===void 0?100:p,y=l.easingFunction,b=y===void 0?void 0:y,w=l.onfinish,R=w===void 0?void 0:w,M=l.onframe,I=M===void 0?void 0:M,N=.01;if(v===0){this.syncFromLandmark(s),R&&R();return}this.cancelLandmarkAnimation();var z=s.position,H=s.focalPoint,X=s.zoom,$=s.roll,te=b||qr.EasingFunction(h),fe,ye=function(){i.setFocalPoint(H),i.setPosition(z),i.setRoll($),i.setZoom(X),i.computeMatrix(),i.triggerUpdate(),R&&R()},Le=function(Ge){fe===void 0&&(fe=Ge);var Qe=Ge-fe;if(Qe>v){ye();return}var gt=te(Qe/v),qe=ur.Ue(),lt=ur.Ue(),ft=1,pt=0;ur.t7(qe,i.focalPoint,H,gt),ur.t7(lt,i.position,z,gt),pt=i.roll*(1-gt)+$*gt,ft=i.zoom*(1-gt)+X*gt,i.setFocalPoint(qe),i.setPosition(lt),i.setRoll(pt),i.setZoom(ft);var Zt=ur.TK(qe,H)+ur.TK(lt,z);if(Zt<=N&&X==null&&$==null){ye();return}i.computeMatrix(),i.triggerUpdate(),Qe<v&&(I&&I(gt),i.landmarkAnimationID=i.canvas.requestAnimationFrame(Le))};this.canvas.requestAnimationFrame(Le)}},t.prototype.syncFromLandmark=function(n){this.matrix=Kr.copy(this.matrix,n.matrix),this.right=ur.JG(this.right,n.right),this.up=ur.JG(this.up,n.up),this.forward=ur.JG(this.forward,n.forward),this.position=ur.JG(this.position,n.position),this.focalPoint=ur.JG(this.focalPoint,n.focalPoint),this.distanceVector=ur.JG(this.distanceVector,n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance,this.zoom=n.zoom},t}(hS);qr.CameraContribution=a3;var vT=function(){function e(t,n){this.type=t,this.target=n,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return e.copy=function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n},e}(),s3=0,dy=new WeakMap,ws=function(){function e(t,n,r){this.observer=t,this.target=n,this.options=r,this.transientObservedNodes=[]}return e.prototype.enqueue=function(t){var n=this.observer.records,r=n.length;if(n.length>0){var i=n[r-1],s=u3(i,t);if(s){n[r-1]=s;return}}else mm(this.observer);n[r]=t},e.prototype.addListeners=function(){this.addListeners_(this.target)},e.prototype.addListeners_=function(t){var n=this.options;n.attributes&&t.addEventListener(Ua.ATTR_MODIFIED,this,!0),n.childList&&t.addEventListener(Ua.INSERTED,this,!0),(n.childList||n.subtree)&&t.addEventListener(Ua.REMOVED,this,!0)},e.prototype.removeListeners=function(){this.removeListeners_(this.target)},e.prototype.removeListeners_=function(t){var n=this.options;n.attributes&&t.removeEventListener(Ua.ATTR_MODIFIED,this,!0),n.childList&&t.removeEventListener(Ua.INSERTED,this,!0),(n.childList||n.subtree)&&t.removeEventListener(Ua.REMOVED,this,!0)},e.prototype.removeTransientObservers=function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(n){this.removeListeners_(n);for(var r=dy.get(n),i=0;i<r.length;i++)if(r[i]===this){r.splice(i,1);break}},this)},e.prototype.handleEvent=function(t){t.stopImmediatePropagation();var n,r;switch(t.type){case Ua.ATTR_MODIFIED:var i=t.attrName,s=t.relatedNode.namespaceURI;r=t.target,n=Tu("attributes",r),n.attributeName=i,n.attributeNamespace=s;var l=t.attrChange===pm.ADDITION?null:t.prevValue;t2(r,function(b){if(b.attributes&&!(b.attributeFilter&&b.attributeFilter.length&&b.attributeFilter.indexOf(i)===-1&&b.attributeFilter.indexOf(s)===-1))return b.attributeOldValue?ph(l):n});break;case Ua.REMOVED:case Ua.INSERTED:r=t.relatedNode;var c=t.target,h=void 0,p=void 0;t.type===Ua.INSERTED?(h=[c],p=[]):(h=[],p=[c]);var v=c.previousSibling,y=c.nextSibling;n=Tu("childList",r),n.addedNodes=h,n.removedNodes=p,n.previousSibling=v,n.nextSibling=y,t2(r,function(b){if(b.childList)return n})}Av()},e}(),n4=function(){function e(t){this.callback=t,this.nodes=[],this.records=[],this.uid=s3++}return e.prototype.observe=function(t,n){if(!n.childList&&!n.attributes&&!n.characterData||n.attributeOldValue&&!n.attributes||n.attributeFilter&&n.attributeFilter.length&&!n.attributes||n.characterDataOldValue&&!n.characterData)throw new SyntaxError;var r=dy.get(t);r||dy.set(t,r=[]);for(var i,s=0;s<r.length;s++)if(r[s].observer===this){i=r[s],i.removeListeners(),i.options=n;break}i||(i=new ws(this,t,n),r.push(i),this.nodes.push(t)),i.addListeners()},e.prototype.disconnect=function(){var t=this;this.nodes.forEach(function(n){for(var r=dy.get(n),i=0;i<r.length;i++){var s=r[i];if(s.observer===t){s.removeListeners(),r.splice(i,1);break}}},this),this.records=[]},e.prototype.takeRecords=function(){var t=this.records;return this.records=[],t},e}(),Z1,lc;function Tu(e,t){return Z1=new vT(e,t)}function ph(e){return lc||(lc=vT.copy(Z1),lc.oldValue=e,lc)}function Av(){Z1=lc=void 0}function l3(e){return e===lc||e===Z1}function u3(e,t){return e===t?e:lc&&l3(e)?lc:null}function c3(e){e.nodes.forEach(function(t){var n=dy.get(t);n&&n.forEach(function(r){r.observer===e&&r.removeTransientObservers()})})}function t2(e,t){for(var n=e;n;n=n.parentNode){var r=dy.get(n);if(r)for(var i=0;i<r.length;i++){var s=r[i],l=s.options;if(!(n!==e&&!l.subtree)){var c=t(l);c&&s.enqueue(c)}}}}var B_=!1,Fh=[];function mm(e){Fh.push(e),B_||(B_=!0,typeof qr.globalThis!="undefined"?qr.globalThis.setTimeout(py):py())}function py(){B_=!1;var e=Fh;Fh=[],e.sort(function(n,r){return n.uid-r.uid});var t=!1;e.forEach(function(n){var r=n.takeRecords();c3(n),r.length&&(n.callback(r,n),t=!0)}),t&&py()}var n2=function(e){(0,se.ZT)(t,e);function t(n,r,i,s){var l=e.call(this,n)||this;return l.currentTime=i,l.timelineTime=s,l.target=r,l.type="finish",l.bubbles=!1,l.currentTarget=r,l.defaultPrevented=!1,l.eventPhase=l.AT_TARGET,l.timeStamp=Date.now(),l.currentTime=i,l.timelineTime=s,l}return t}(cd),mT=0,f3=function(){function e(t,n){var r;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=n,this.id="".concat(mT++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(e.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,r){t.resolveReadyPromise=function(){n(t)},t.rejectReadyPromise=function(){r(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,r){t.resolveFinishedPromise=function(){n(t)},t.rejectFinishedPromise=function(){r(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var n;t=Number(t),!isNaN(t)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),e.prototype.updatePromises=function(){var t=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==t&&(n==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):t==="pending"?this.resolveReadyPromise():n==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&n!==t&&(n==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n==="finished"?this.resolveFinishedPromise():t==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise},e.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},e.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},e.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.prototype.cancel=function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new n2(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(n)})}},e.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()},e.prototype.updatePlaybackRate=function(t){this.playbackRate=t},e.prototype.targetAnimations=function(){var t,n=(t=this.effect)===null||t===void 0?void 0:t.target;return n.getAnimations()},e.prototype.markTarget=function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)},e.prototype.unmarkTarget=function(){var t=this.targetAnimations(),n=t.indexOf(this);n!==-1&&t.splice(n,1)},e.prototype.tick=function(t,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(t))},e.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},e.prototype.persist=function(){throw new Error(ru)},e.prototype.addEventListener=function(t,n,r){throw new Error(ru)},e.prototype.removeEventListener=function(t,n,r){throw new Error(ru)},e.prototype.dispatchEvent=function(t){throw new Error(ru)},e.prototype.commitStyles=function(){throw new Error(ru)},e.prototype.ensureAlive=function(){var t,n;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((t=this.effect)===null||t===void 0)&&t.update(-1)):this._inEffect=!!(!((n=this.effect)===null||n===void 0)&&n.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},e.prototype.tickCurrentTime=function(t,n){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},e.prototype.fireEvents=function(t){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var r=new n2(null,this,this.currentTime,t);setTimeout(function(){n.onfinish&&n.onfinish(r)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new n2(null,this,this.currentTime,t);this.onframe(i)}this._finishedFlag=!1}},e}(),h3=4,F_=.001,p3=1e-7,v3=10,X1=11,k_=1/(X1-1),gT=typeof Float32Array=="function",Ov=function(e,t){return 1-3*t+3*e},m3=function(e,t){return 3*t-6*e},qd=function(e){return 3*e},$1=function(e,t,n){return((Ov(t,n)*e+m3(t,n))*e+qd(t))*e},Ho=function(e,t,n){return 3*Ov(t,n)*e*e+2*m3(t,n)*e+qd(t)},yT=function(e,t,n,r,i){var s,l,c=0;do l=t+(n-t)/2,s=$1(l,r,i)-e,s>0?n=l:t=l;while(Math.abs(s)>p3&&++c<v3);return l},_T=function(e,t,n,r){for(var i=0;i<h3;++i){var s=Ho(t,n,r);if(s===0)return t;var l=$1(t,n,r)-e;t-=l/s}return t},r2=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return function(c){return c};for(var i=gT?new Float32Array(X1):new Array(X1),s=0;s<X1;++s)i[s]=$1(s*k_,e,n);var l=function(c){for(var h=0,p=1,v=X1-1;p!==v&&i[p]<=c;++p)h+=k_;--p;var y=(c-i[p])/(i[p+1]-i[p]),b=h+y*k_,w=Ho(b,e,n);return w>=F_?_T(c,b,e,n):w===0?b:yT(c,h,h+k_,e,n)};return function(c){return c===0||c===1?c:$1(l(c),t,r)}},bT=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},Y1=function(e){return Math.pow(e,2)},K1=function(e){return Math.pow(e,3)},q1=function(e){return Math.pow(e,4)},Q1=function(e){return Math.pow(e,5)},J1=function(e){return Math.pow(e,6)},gm=function(e){return 1-Math.cos(e*Math.PI/2)},mg=function(e){return 1-Math.sqrt(1-e*e)},Cv=function(e){return e*e*(3*e-2)},Rv=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)},vy=function(e,t){t===void 0&&(t=[]);var n=(0,se.CR)(t,2),r=n[0],i=r===void 0?1:r,s=n[1],l=s===void 0?.5:s,c=(0,d.Z)(Number(i),1,10),h=(0,d.Z)(Number(l),.1,2);return e===0||e===1?e:-c*Math.pow(2,10*(e-1))*Math.sin((e-1-h/(Math.PI*2)*Math.asin(1/c))*(Math.PI*2)/h)},Mv=function(e,t,n){t===void 0&&(t=[]);var r=(0,se.CR)(t,4),i=r[0],s=i===void 0?1:i,l=r[1],c=l===void 0?100:l,h=r[2],p=h===void 0?10:h,v=r[3],y=v===void 0?0:v;s=(0,d.Z)(s,.1,1e3),c=(0,d.Z)(c,.1,1e3),p=(0,d.Z)(p,.1,1e3),y=(0,d.Z)(y,.1,1e3);var b=Math.sqrt(c/s),w=p/(2*Math.sqrt(c*s)),R=w<1?b*Math.sqrt(1-w*w):0,M=1,I=w<1?(w*b+-y)/R:-y+b,N=n?n*e/1e3:e;return w<1?N=Math.exp(-N*w*b)*(M*Math.cos(R*N)+I*Math.sin(R*N)):N=(M+I*N)*Math.exp(-N*b),e===0||e===1?e:1-N},eb=function(e,t){t===void 0&&(t=[]);var n=(0,se.CR)(t,2),r=n[0],i=r===void 0?10:r,s=n[1],l=s=="start"?Math.ceil:Math.floor;return l((0,d.Z)(e,0,1)*i)/i},Pv=function(e,t){t===void 0&&(t=[]);var n=(0,se.CR)(t,4),r=n[0],i=n[1],s=n[2],l=n[3];return r2(r,i,s,l)(e)},tb=r2(.42,0,1,1),Op=function(e){return function(t,n,r){return n===void 0&&(n=[]),1-e(1-t,n,r)}},pd=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?e(t*2,n,r)/2:1-e(t*-2+2,n,r)/2}},Cp=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?(1-e(1-t*2,n,r))/2:(e(t*2-1,n,r)+1)/2}},xT={steps:eb,"step-start":function(e){return eb(e,[1,"start"])},"step-end":function(e){return eb(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":Pv,ease:function(e){return Pv(e,[.25,.1,.25,1])},in:tb,out:Op(tb),"in-out":pd(tb),"out-in":Cp(tb),"in-quad":Y1,"out-quad":Op(Y1),"in-out-quad":pd(Y1),"out-in-quad":Cp(Y1),"in-cubic":K1,"out-cubic":Op(K1),"in-out-cubic":pd(K1),"out-in-cubic":Cp(K1),"in-quart":q1,"out-quart":Op(q1),"in-out-quart":pd(q1),"out-in-quart":Cp(q1),"in-quint":Q1,"out-quint":Op(Q1),"in-out-quint":pd(Q1),"out-in-quint":Cp(Q1),"in-expo":J1,"out-expo":Op(J1),"in-out-expo":pd(J1),"out-in-expo":Cp(J1),"in-sine":gm,"out-sine":Op(gm),"in-out-sine":pd(gm),"out-in-sine":Cp(gm),"in-circ":mg,"out-circ":Op(mg),"in-out-circ":pd(mg),"out-in-circ":Cp(mg),"in-back":Cv,"out-back":Op(Cv),"in-out-back":pd(Cv),"out-in-back":Cp(Cv),"in-bounce":Rv,"out-bounce":Op(Rv),"in-out-bounce":pd(Rv),"out-in-bounce":Cp(Rv),"in-elastic":vy,"out-elastic":Op(vy),"in-out-elastic":pd(vy),"out-in-elastic":Cp(vy),spring:Mv,"spring-in":Mv,"spring-out":Op(Mv),"spring-in-out":pd(Mv),"spring-out-in":Cp(Mv)},i2=function(e){return bT(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},g3=function(e){return xT[i2(e)]||xT.linear},vd=function(e){return e},y3=1,_3=.5,ET=0;function ST(e,t){return function(n){if(n>=1)return 1;var r=1/e;return n+=t*r,n-n%r}}var nb="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",b3=new RegExp("cubic-bezier\\("+nb+","+nb+","+nb+","+nb+"\\)"),x3=/steps\(\s*(\d+)\s*\)/,E3=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function o2(e){var t=b3.exec(e);if(t)return r2.apply(void 0,(0,se.ev)([],(0,se.CR)(t.slice(1).map(Number)),!1));var n=x3.exec(e);if(n)return ST(Number(n[1]),ET);var r=E3.exec(e);return r?ST(Number(r[1]),{start:y3,middle:_3,end:ET}[r[2]]):g3(e)}function TT(e){return Math.abs(S3(e)/(e.playbackRate||1))}function S3(e){var t;return e.duration===0||e.iterations===0?0:(e.duration==="auto"?0:Number(e.duration))*((t=e.iterations)!==null&&t!==void 0?t:1)}var wT=0,a2=1,iu=2,s2=3;function z_(e,t,n){if(t===null)return wT;var r=n.endTime;return t<Math.min(n.delay,r)?a2:t>=Math.min(n.delay+e+n.endDelay,r)?iu:s2}function rb(e,t,n,r,i){switch(r){case a2:return t==="backwards"||t==="both"?0:null;case s2:return n-i;case iu:return t==="forwards"||t==="both"?e:null;case wT:return null}}function ib(e,t,n,r,i){var s=i;return e===0?t!==a2&&(s+=n):s+=r/e,s}function Iv(e,t,n,r,i,s){var l=e===1/0?t%1:e%1;return l===0&&n===iu&&r!==0&&(i!==0||s===0)&&(l=1),l}function U_(e,t,n,r){return e===iu&&t===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function T3(e,t,n){var r=e;if(e!=="normal"&&e!=="reverse"){var i=t;e==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function ob(e,t,n){var r=z_(e,t,n),i=rb(e,n.fill,t,r,n.delay);if(i===null)return null;var s=n.duration==="auto"?0:n.duration,l=ib(s,r,n.iterations,i,n.iterationStart),c=Iv(l,n.iterationStart,r,n.iterations,i,s),h=U_(r,n.iterations,c,l),p=T3(n.direction,h,c);return n.currentIteration=h,n.progress=p,n.easingFunction(p)}function w3(e,t,n){var r=gy(e,t),i=ab(r,n);return function(s,l){if(l!==null)i.filter(function(h){return l>=h.applyFrom&&l<h.applyTo}).forEach(function(h){var p=l-h.startOffset,v=h.endOffset-h.startOffset,y=v===0?0:p/v;s.setAttribute(h.property,h.interpolation(y),!1,!1)});else for(var c in r)AT(c)&&s.setAttribute(c,null)}}function AT(e){return e!=="offset"&&e!=="easing"&&e!=="composite"&&e!=="computedOffset"}function gy(e,t){for(var n={},r=0;r<e.length;r++)for(var i in e[r])if(AT(i)){var s={offset:e[r].offset,computedOffset:e[r].computedOffset,easing:e[r].easing,easingFunction:o2(e[r].easing)||t.easingFunction,value:e[r][i]};n[i]=n[i]||[],n[i].push(s)}return n}function ab(e,t){var n=[];for(var r in e)for(var i=e[r],s=0;s<i.length-1;s++){var l=s,c=s+1,h=i[l].computedOffset,p=i[c].computedOffset,v=h,y=p;s===0&&(v=-1/0,p===0&&(c=l)),s===i.length-2&&(y=1/0,h===1&&(l=c)),n.push({applyFrom:v,applyTo:y,startOffset:i[l].computedOffset,endOffset:i[c].computedOffset,easingFunction:i[l].easingFunction,property:r,interpolation:sb(r,i[l].value,i[c].value,t)})}return n.sort(function(b,w){return b.startOffset-w.startOffset}),n}var OT=function(e,t,n){return function(r){var i=yy(e,t,r);return!qr.enableCSSParsing&&(0,Gl.Z)(i)?i:n(i)}};function sb(e,t,n,r){var i=hm[e];if(i&&i.syntax&&i.int){var s=qr.styleValueRegistry.getPropertySyntax(i.syntax);if(s){var l=void 0,c=void 0;if(qr.enableCSSParsing){var h=qr.styleValueRegistry.parseProperty(e,t,r,!1),p=qr.styleValueRegistry.parseProperty(e,n,r,!1);l=qr.styleValueRegistry.computeProperty(e,h,r,!1),c=qr.styleValueRegistry.computeProperty(e,p,r,!1)}else{var v=s.parserWithCSSDisabled;l=v?v(t,r):t,c=v?v(n,r):n}var y=s.mixer(l,c,r);if(y){var b=OT.apply(void 0,(0,se.ev)([],(0,se.CR)(y),!1));return function(w){return w===0?t:w===1?n:b(w)}}}}return OT(!1,!0,function(w){return w?n:t})}function yy(e,t,n){if(typeof e=="number"&&typeof t=="number")return e*(1-n)+t*n;if(typeof e=="boolean"&&typeof t=="boolean"||typeof e=="string"&&typeof t=="string")return n<.5?e:t;if(Array.isArray(e)&&Array.isArray(t)){for(var r=e.length,i=t.length,s=Math.max(r,i),l=[],c=0;c<s;c++)l.push(yy(e[c<r?c:r-1],t[c<i?c:i-1],n));return l}throw new Error("Mismatched interpolation arguments "+e+":"+t)}var lb=function(){function e(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=vd,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=o2(t),this._easing=t},enumerable:!1,configurable:!0}),e}();function A3(e){var t=[];for(var n in e)if(!(n in["easing","offset","composite"])){var r=e[n];Array.isArray(r)||(r=[r]);for(var i=r.length,s=0;s<i;s++){if(!t[s]){var l={};"offset"in e&&(l.offset=Number(e.offset)),"easing"in e&&(l.easing=e.easing),"composite"in e&&(l.composite=e.composite),t[s]=l}r[s]!==void 0&&r[s]!==null&&(t[s][n]=r[s])}}return t.sort(function(c,h){return(c.computedOffset||0)-(h.computedOffset||0)}),t}function _y(e,t){if(e===null)return[];Array.isArray(e)||(e=A3(e));for(var n=e.map(function(h){var p={};t!=null&&t.composite&&(p.composite="auto");for(var v in h){var y=h[v];if(v==="offset"){if(y!==null){if(y=Number(y),!isFinite(y))throw new Error("Keyframe offsets must be numbers.");if(y<0||y>1)throw new Error("Keyframe offsets must be between 0 and 1.");p.computedOffset=y}}else if(v==="composite"&&["replace","add","accumulate","auto"].indexOf(y)===-1)throw new Error("".concat(y," compositing is not supported"));p[v]=y}return p.offset===void 0&&(p.offset=null),p.easing===void 0&&(p.easing=(t==null?void 0:t.easing)||"linear"),p.composite===void 0&&(p.composite="auto"),p}),r=!0,i=-1/0,s=0;s<n.length;s++){var l=n[s].offset;if((0,ya.Z)(l))r=!1;else{if(l<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=l}}n=n.filter(function(h){return Number(h.offset)>=0&&Number(h.offset)<=1});function c(){var h,p,v=n.length;n[v-1].computedOffset=Number((h=n[v-1].offset)!==null&&h!==void 0?h:1),v>1&&(n[0].computedOffset=Number((p=n[0].offset)!==null&&p!==void 0?p:0));for(var y=0,b=Number(n[0].computedOffset),w=1;w<v;w++){var R=n[w].computedOffset;if(!(0,ya.Z)(R)&&!(0,ya.Z)(b)){for(var M=1;M<w-y;M++)n[y+M].computedOffset=b+(Number(R)-b)*M/(w-y);y=w,b=Number(R)}}}return r||c(),n}var O3="backwards|forwards|both|none".split("|"),C3="reverse|alternate|alternate-reverse".split("|");function R3(e,t){var n=new lb;return t&&(n.fill="both",n.duration="auto"),typeof e=="number"&&!isNaN(e)?n.duration=e:e!==void 0&&Object.keys(e).forEach(function(r){if(e[r]!==void 0&&e[r]!==null&&e[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof e[r]!="number"||isNaN(e[r]))||r==="fill"&&O3.indexOf(e[r])===-1||r==="direction"&&C3.indexOf(e[r])===-1)return;n[r]=e[r]}}),n}function CT(e,t){return e=Xc(e!=null?e:{duration:"auto"}),R3(e,t)}function Xc(e){return typeof e=="number"&&(isNaN(e)?e={duration:"auto"}:e={duration:e}),e}var l2=function(){function e(t,n,r){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=CT(r,!1),this.timing.effect=this,this.timing.activeDuration=TT(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=_y(n,this.timing),this.interpolations=w3(this.normalizedKeyframes,this.timing,this.target);var s=qr.globalThis.Proxy;this.computedTiming=s?new s(this.timing,{get:function(l,c){return c==="duration"?l.duration==="auto"?0:l.duration:c==="fill"?l.fill==="auto"?"none":l.fill:c==="localTime"?i.animation&&i.animation.currentTime||null:c==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:l.currentIteration||0:c==="progress"?!i.animation||i.animation.playState!=="running"?null:l.progress||0:l[c]},set:function(){return!0}}):this.timing}return e.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},e.prototype.update=function(t){return t===null?!1:(this.timeFraction=ob(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)},e.prototype.getKeyframes=function(){return this.normalizedKeyframes},e.prototype.setKeyframes=function(t){this.normalizedKeyframes=_y(t)},e.prototype.getComputedTiming=function(){return this.computedTiming},e.prototype.getTiming=function(){return this.timing},e.prototype.updateTiming=function(t){var n=this;Object.keys(t||{}).forEach(function(r){n.timing[r]=t[r]})},e}();function RT(e,t){return Number(e.id)-Number(t.id)}var u2=function(){function e(t){var n=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(RT),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(s){s[1](r)}),n.applyPendingEffects()}}return e.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},e.prototype.isTicking=function(){return this.inTick},e.prototype.play=function(t,n,r){var i=new l2(t,n,r),s=new f3(i,this);return this.animations.push(s),this.restartWebAnimationsNextTick(),s.updatePromises(),s.play(),s.updatePromises(),s},e.prototype.applyDirtiedAnimation=function(t){var n=this;if(!this.inTick){t.markTarget();var r=t.targetAnimations();r.sort(RT);var i=this.tick(Number(this.currentTime),!1,r.slice())[1];i.forEach(function(s){var l=n.animations.indexOf(s);l!==-1&&n.animations.splice(l,1)}),this.applyPendingEffects()}},e.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},e.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},e.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]},e.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},e.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})},e.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},e.prototype.rAF=function(t){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,t]),n},e.prototype.requestAnimationFrame=function(t){var n=this;return this.rAF(function(r){n.updateAnimationsPromises(),t(r),n.updateAnimationsPromises()})},e.prototype.tick=function(t,n,r){var i,s,l=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var c=[],h=[],p=[],v=[];return r.forEach(function(y){y.tick(t,n),y._inEffect?(h.push(y.effect),y.markTarget()):(c.push(y.effect),y.unmarkTarget()),y._needsTick&&(l.ticking=!0);var b=y._inEffect||y._needsTick;y._inTimeline=b,b?p.push(y):v.push(y)}),(i=this.pendingEffects).push.apply(i,(0,se.ev)([],(0,se.CR)(c),!1)),(s=this.pendingEffects).push.apply(s,(0,se.ev)([],(0,se.CR)(h),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[p,v]},e}();qr.EasingFunction=o2,qr.AnimationTimeline=u2;function M3(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,s=i===void 0?0:i,l=t.r;e.arc(r,s,l,0,Math.PI*2,!1)}function P3(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,s=i===void 0?0:i,l=t.rx,c=t.ry;if(e.ellipse)e.ellipse(r,s,l,c,0,0,Math.PI*2,!1);else{var h=l>c?l:c,p=l>c?1:l/c,v=l>c?c/l:1;e.save(),e.scale(p,v),e.arc(r,s,h,0,Math.PI*2)}}function I3(e,t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=t.markerStart,c=t.markerEnd,h=t.markerStartOffset,p=t.markerEndOffset,v=0,y=0,b=0,w=0,R=0,M,I;l&&gl(l)&&h&&(M=i-n,I=s-r,R=Math.atan2(I,M),v=Math.cos(R)*(h||0),y=Math.sin(R)*(h||0)),c&&gl(c)&&p&&(M=n-i,I=r-s,R=Math.atan2(I,M),b=Math.cos(R)*(p||0),w=Math.sin(R)*(p||0)),e.moveTo(n+v,r+y),e.lineTo(i+b,s+w)}function c2(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.d,c=l.absolutePath,h=l.segments,p=0,v=0,y=0,b=0,w=0,R,M;if(n&&gl(n)&&i){var I=(0,se.CR)(n.parentNode.getStartTangent(),2),N=I[0],z=I[1];R=N[0]-z[0],M=N[1]-z[1],w=Math.atan2(M,R),p=Math.cos(w)*(i||0),v=Math.sin(w)*(i||0)}if(r&&gl(r)&&s){var H=(0,se.CR)(r.parentNode.getEndTangent(),2),N=H[0],z=H[1];R=N[0]-z[0],M=N[1]-z[1],w=Math.atan2(M,R),y=Math.cos(w)*(s||0),b=Math.sin(w)*(s||0)}for(var X=0;X<c.length;X++){var $=c[X],te=$[0],fe=c[X+1],ye=X===0&&(p!==0||v!==0),Le=(X===c.length-1||fe&&(fe[0]==="M"||fe[0]==="Z"))&&y!==0&&b!==0;switch(te){case"M":ye?(e.moveTo($[1]+p,$[2]+v),e.lineTo($[1],$[2])):e.moveTo($[1],$[2]);break;case"L":Le?e.lineTo($[1]+y,$[2]+b):e.lineTo($[1],$[2]);break;case"Q":e.quadraticCurveTo($[1],$[2],$[3],$[4]),Le&&e.lineTo($[3]+y,$[4]+b);break;case"C":e.bezierCurveTo($[1],$[2],$[3],$[4],$[5],$[6]),Le&&e.lineTo($[5]+y,$[6]+b);break;case"A":{var Ge=h[X].arcParams,Qe=Ge.cx,gt=Ge.cy,qe=Ge.rx,lt=Ge.ry,ft=Ge.startAngle,pt=Ge.endAngle,Zt=Ge.xRotation,Ct=Ge.sweepFlag;if(e.ellipse)e.ellipse(Qe,gt,qe,lt,Zt,ft,pt,!!(1-Ct));else{var Lt=qe>lt?qe:lt,Tn=qe>lt?1:qe/lt,Fn=qe>lt?lt/qe:1;e.translate(Qe,gt),e.rotate(Zt),e.scale(Tn,Fn),e.arc(0,0,Lt,ft,pt,!!(1-Ct)),e.scale(1/Tn,1/Fn),e.rotate(-Zt),e.translate(-Qe,-gt)}Le&&e.lineTo($[6]+y,$[7]+b);break}case"Z":e.closePath();break}}}function MT(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.points.points,c=l.length,h=l[0][0],p=l[0][1],v=l[c-1][0],y=l[c-1][1],b=0,w=0,R=0,M=0,I=0,N,z;n&&gl(n)&&i&&(N=l[1][0]-l[0][0],z=l[1][1]-l[0][1],I=Math.atan2(z,N),b=Math.cos(I)*(i||0),w=Math.sin(I)*(i||0)),r&&gl(r)&&s&&(N=l[c-1][0]-l[0][0],z=l[c-1][1]-l[0][1],I=Math.atan2(z,N),R=Math.cos(I)*(s||0),M=Math.sin(I)*(s||0)),e.moveTo(h+(b||R),p+(w||M));for(var H=1;H<c-1;H++){var X=l[H];e.lineTo(X[0],X[1])}e.lineTo(v,y)}function L3(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.points.points,c=l.length,h=l[0][0],p=l[0][1],v=l[c-1][0],y=l[c-1][1],b=0,w=0,R=0,M=0,I=0,N,z;n&&gl(n)&&i&&(N=l[1][0]-l[0][0],z=l[1][1]-l[0][1],I=Math.atan2(z,N),b=Math.cos(I)*(i||0),w=Math.sin(I)*(i||0)),r&&gl(r)&&s&&(N=l[c-2][0]-l[c-1][0],z=l[c-2][1]-l[c-1][1],I=Math.atan2(z,N),R=Math.cos(I)*(s||0),M=Math.sin(I)*(s||0)),e.moveTo(h+b,p+w);for(var H=1;H<c-1;H++){var X=l[H];e.lineTo(X[0],X[1])}e.lineTo(v+R,y+M)}function by(e,t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,l=t.radius,c=t.width,h=t.height,p=c,v=h,y=l&&l.some(function(X){return X!==0});if(!y)e.rect(r,s,p,v);else{var b=c>0?1:-1,w=h>0?1:-1,R=b+w===0,M=(0,se.CR)(l.map(function(X){return(0,d.Z)(X,0,Math.min(Math.abs(p)/2,Math.abs(v)/2))}),4),I=M[0],N=M[1],z=M[2],H=M[3];e.moveTo(b*I+r,s),e.lineTo(p-b*N+r,s),N!==0&&e.arc(p-b*N+r,w*N+s,N,-w*Math.PI/2,b>0?0:Math.PI,R),e.lineTo(p+r,v-w*z+s),z!==0&&e.arc(p-b*z+r,v-w*z+s,z,b>0?0:Math.PI,w>0?Math.PI/2:1.5*Math.PI,R),e.lineTo(b*H+r,v+s),H!==0&&e.arc(b*H+r,v-w*H+s,H,w>0?Math.PI/2:-Math.PI/2,b>0?Math.PI:0,R),e.lineTo(r,w*I+s),I!==0&&e.arc(b*I+r,w*I+s,I,b>0?Math.PI:0,w>0?Math.PI*1.5:Math.PI/2,R)}}var D3=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="canvas-path-generator",n}return t.prototype.init=function(){var n,r=(n={},n[ii.CIRCLE]=M3,n[ii.ELLIPSE]=P3,n[ii.RECT]=by,n[ii.LINE]=I3,n[ii.POLYLINE]=L3,n[ii.POLYGON]=MT,n[ii.PATH]=c2,n[ii.TEXT]=void 0,n[ii.GROUP]=void 0,n[ii.IMAGE]=void 0,n[ii.HTML]=void 0,n[ii.MESH]=void 0,n);this.context.pathGeneratorFactory=r},t.prototype.destroy=function(){delete this.context.pathGeneratorFactory},t}(xv),N3=ur.Ue(),B3=ur.Ue(),F3=ur.Ue(),k3=Kr.create(),z3=function(){function e(){var t=this;this.isHit=function(n,r,i,s){var l=t.context.pointInPathPickerFactory[n.nodeName];if(l){var c=Kr.invert(k3,i),h=ur.fF(B3,ur.t8(F3,r[0],r[1],0),c);if(l(n,new $f(h[0],h[1]),s,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),s=t.context.pathGeneratorFactory[n.nodeName];return s&&(i.beginPath(),s(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return e.prototype.apply=function(t,n){var r=this,i,s=t.renderingService,l=t.renderingContext;this.context=t,this.runtime=n;var c=(i=l.root)===null||i===void 0?void 0:i.ownerDocument;s.hooks.pick.tapPromise(e.tag,function(h){return(0,se.mG)(r,void 0,void 0,function(){return(0,se.Jh)(this,function(p){return[2,this.pick(c,h)]})})}),s.hooks.pickSync.tap(e.tag,function(h){return r.pick(c,h)})},e.prototype.pick=function(t,n){var r,i,s=n.topmost,l=n.position,c=l.x,h=l.y,p=ur.t8(N3,c,h,0),v=t.elementsFromBBox(p[0],p[1],p[0],p[1]),y=[];try{for(var b=(0,se.XA)(v),w=b.next();!w.done;w=b.next()){var R=w.value,M=R.getWorldTransform(),I=this.isHit(R,p,M,!1);if(I){var N=qS(R);if(N){var z=N.parsedStyle.clipPath,H=this.isHit(z,p,z.getWorldTransform(),!0);if(H){if(s)return n.picked=[R],n;y.push(R)}}else{if(s)return n.picked=[R],n;y.push(R)}}}}catch(X){r={error:X}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}}return n.picked=y,n},e.tag="CanvasPicker",e}();function U3(e,t,n){var r=e.parsedStyle,i=r.cx,s=i===void 0?0:i,l=r.cy,c=l===void 0?0:l,h=r.r,p=r.fill,v=r.stroke,y=r.lineWidth,b=y===void 0?1:y,w=r.increasedLineWidthForHitTesting,R=w===void 0?0:w,M=r.pointerEvents,I=M===void 0?"auto":M,N=(b+R)/2,z=Ts(s,c,t.x,t.y),H=(0,se.CR)(dg(I,p,v),2),X=H[0],$=H[1];return X&&$||n?z<=h+N:X?z<=h:$?z>=h-N&&z<=h+N:!1}function j_(e,t,n,r){return e/(n*n)+t/(r*r)}function j3(e,t,n){var r=e.parsedStyle,i=r.cx,s=i===void 0?0:i,l=r.cy,c=l===void 0?0:l,h=r.rx,p=r.ry,v=r.fill,y=r.stroke,b=r.lineWidth,w=b===void 0?1:b,R=r.increasedLineWidthForHitTesting,M=R===void 0?0:R,I=r.pointerEvents,N=I===void 0?"auto":I,z=t.x,H=t.y,X=(0,se.CR)(dg(N,v,y),2),$=X[0],te=X[1],fe=(w+M)/2,ye=(z-s)*(z-s),Le=(H-c)*(H-c);return $&&te||n?j_(ye,Le,h+fe,p+fe)<=1:$?j_(ye,Le,h,p)<=1:te?j_(ye,Le,h-fe,p-fe)>=1&&j_(ye,Le,h+fe,p+fe)<=1:!1}function ym(e,t,n,r,i,s){return i>=e&&i<=e+n&&s>=t&&s<=t+r}function PT(e,t,n,r,i,s,l){var c=i/2;return ym(e-c,t-c,n,i,s,l)||ym(e+n-c,t-c,i,r,s,l)||ym(e+c,t+r-c,n,i,s,l)||ym(e-c,t+c,i,r,s,l)}function ub(e,t,n,r,i,s,l,c){var h=(Math.atan2(c-t,l-e)+Math.PI*2)%(Math.PI*2),p={x:e+n*Math.cos(h),y:t+n*Math.sin(h)};return Ts(p.x,p.y,l,c)<=s/2}function _m(e,t,n,r,i,s,l){var c=Math.min(e,n),h=Math.max(e,n),p=Math.min(t,r),v=Math.max(t,r),y=i/2;return s>=c-y&&s<=h+y&&l>=p-y&&l<=v+y?Kg(e,t,n,r,s,l)<=i/2:!1}function IT(e,t,n,r,i){var s=e.length;if(s<2)return!1;for(var l=0;l<s-1;l++){var c=e[l][0],h=e[l][1],p=e[l+1][0],v=e[l+1][1];if(_m(c,h,p,v,t,n,r))return!0}if(i){var y=e[0],b=e[s-1];if(_m(y[0],y[1],b[0],b[1],t,n,r))return!0}return!1}var cb=1e-6;function bm(e){return Math.abs(e)<cb?0:e<0?-1:1}function V3(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function LT(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var s=0;s<i;s++){var l=e[s],c=e[(s+1)%i];if(V3(l,c,[t,n]))return!0;bm(l[1]-n)>0!=bm(c[1]-n)>0&&bm(t-(n-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(r=!r)}return r}function DT(e,t,n){for(var r=!1,i=0;i<e.length;i++){var s=e[i];if(r=LT(s,t,n),r)break}return r}function H3(e,t,n){var r=e.parsedStyle,i=r.x1,s=r.y1,l=r.x2,c=r.y2,h=r.lineWidth,p=h===void 0?1:h,v=r.increasedLineWidthForHitTesting,y=v===void 0?0:v,b=r.pointerEvents,w=b===void 0?"auto":b,R=r.fill,M=r.stroke,I=(0,se.CR)(dg(w,R,M),2),N=I[1];return!N&&!n||!p?!1:_m(i,s,l,c,p+y,t.x,t.y)}function W3(e,t,n,r,i){for(var s=!1,l=t/2,c=0;c<e.length;c++){var h=e[c],p=h.currentPoint,v=h.params,y=h.prePoint,b=h.box;if(!(b&&!ym(b.x-l,b.y-l,b.width+t,b.height+t,n,r)))switch(h.command){case"L":case"Z":if(s=_m(y[0],y[1],p[0],p[1],t,n,r),s)return!0;break;case"Q":var w=wp(y[0],y[1],v[1],v[2],v[3],v[4],n,r);if(s=w<=t/2,s)return!0;break;case"C":var R=v_(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],n,r,i);if(s=R<=t/2,s)return!0;break;case"A":h.cubicParams||(h.cubicParams=bu(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],v[7],void 0));for(var M=h.cubicParams,I=y,N=0;N<M.length;N+=6){var z=v_(I[0],I[1],M[N],M[N+1],M[N+2],M[N+3],M[N+4],M[N+5],n,r,i);if(I=[M[N+4],M[N+5]],s=z<=t/2,s)return!0}break}}return s}function G3(e,t,n,r,i,s){var l=e.parsedStyle,c=l.lineWidth,h=c===void 0?1:c,p=l.increasedLineWidthForHitTesting,v=p===void 0?0:p,y=l.stroke,b=l.fill,w=l.d,R=l.pointerEvents,M=R===void 0?"auto":R,I=w.segments,N=w.hasArc,z=w.polylines,H=w.polygons,X=(0,se.CR)(dg(M,(H==null?void 0:H.length)&&b,y),2),$=X[0],te=X[1],fe=Vx(e),ye=!1;return $||n?(N?ye=r(e,t):ye=DT(H,t.x,t.y)||DT(z,t.x,t.y),ye):((te||n)&&(ye=W3(I,h+v,t.x,t.y,fe)),ye)}function NT(e,t,n){var r=e.parsedStyle,i=r.stroke,s=r.fill,l=r.lineWidth,c=l===void 0?1:l,h=r.increasedLineWidthForHitTesting,p=h===void 0?0:h,v=r.points,y=r.pointerEvents,b=y===void 0?"auto":y,w=(0,se.CR)(dg(b,s,i),2),R=w[0],M=w[1],I=!1;return(M||n)&&(I=IT(v.points,c+p,t.x,t.y,!0)),!I&&(R||n)&&(I=LT(v.points,t.x,t.y)),I}function Z3(e,t,n){var r=e.parsedStyle,i=r.lineWidth,s=i===void 0?1:i,l=r.increasedLineWidthForHitTesting,c=l===void 0?0:l,h=r.points,p=r.pointerEvents,v=p===void 0?"auto":p,y=r.fill,b=r.stroke,w=(0,se.CR)(dg(v,y,b),2),R=w[1];return!R&&!n||!s?!1:IT(h.points,s+c,t.x,t.y,!1)}function BT(e,t,n,r,i){var s=e.parsedStyle,l=s.radius,c=s.fill,h=s.stroke,p=s.lineWidth,v=p===void 0?1:p,y=s.increasedLineWidthForHitTesting,b=y===void 0?0:y,w=s.x,R=w===void 0?0:w,M=s.y,I=M===void 0?0:M,N=s.width,z=s.height,H=s.pointerEvents,X=H===void 0?"auto":H,$=(0,se.CR)(dg(X,c,h),2),te=$[0],fe=$[1],ye=l&&l.some(function(gt){return gt!==0}),Le=v+b;if(ye){var Qe=!1;return(fe||n)&&(Qe=f0(R,I,N,z,l.map(function(gt){return(0,d.Z)(gt,0,Math.min(Math.abs(N)/2,Math.abs(z)/2))}),Le,t.x,t.y)),!Qe&&(te||n)&&(Qe=r(e,t)),Qe}else{var Ge=Le/2;if(te&&fe||n)return ym(R-Ge,I-Ge,N+Ge,z+Ge,t.x,t.y);if(te)return ym(R,I,N,z,t.x,t.y);if(fe)return PT(R,I,N,z,Le,t.x,t.y)}return!1}function f0(e,t,n,r,i,s,l,c){var h=(0,se.CR)(i,4),p=h[0],v=h[1],y=h[2],b=h[3];return _m(e+p,t,e+n-v,t,s,l,c)||_m(e+n,t+v,e+n,t+r-y,s,l,c)||_m(e+n-y,t+r,e+b,t+r,s,l,c)||_m(e,t+r-b,e,t+p,s,l,c)||ub(e+n-v,t+v,v,1.5*Math.PI,2*Math.PI,s,l,c)||ub(e+n-y,t+r-y,y,0,.5*Math.PI,s,l,c)||ub(e+b,t+r-b,b,.5*Math.PI,Math.PI,s,l,c)||ub(e+p,t+p,p,Math.PI,1.5*Math.PI,s,l,c)}function X3(e,t,n,r,i,s){var l=e.parsedStyle,c=l.pointerEvents,h=c===void 0?"auto":c,p=l.x,v=p===void 0?0:p,y=l.y,b=y===void 0?0:y,w=l.width,R=l.height;if(h==="non-transparent-pixel"){var M=i.config.offscreenCanvas,I=s.offscreenCanvasCreator.getOrCreateCanvas(M),N=s.offscreenCanvasCreator.getOrCreateContext(M,{willReadFrequently:!0});I.width=w,I.height=R,i.defaultStyleRendererFactory[ii.IMAGE].render(N,(0,se.pi)((0,se.pi)({},e.parsedStyle),{x:0,y:0}),e,void 0,void 0,void 0);var z=N.getImageData(t.x-v,t.y-b,1,1).data;return z.every(function(H){return H!==0})}return!0}var $3=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="canvas-picker",n}return t.prototype.init=function(){var n,r=function(){return!0},i=(n={},n[ii.CIRCLE]=U3,n[ii.ELLIPSE]=j3,n[ii.RECT]=BT,n[ii.LINE]=H3,n[ii.POLYLINE]=Z3,n[ii.POLYGON]=NT,n[ii.PATH]=G3,n[ii.TEXT]=r,n[ii.GROUP]=null,n[ii.IMAGE]=X3,n[ii.HTML]=null,n[ii.MESH]=null,n);this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new z3)},t.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},t}(xv),FT=function(){function e(t){this.canvasRendererPluginOptions=t,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Kr.create(),this.dprMatrix=Kr.create(),this.tmpMat4=Kr.create(),this.vec3a=ur.Ue(),this.vec3b=ur.Ue(),this.vec3c=ur.Ue(),this.vec3d=ur.Ue()}return e.prototype.apply=function(t,n){var r=this;this.context=t;var i=t.config,s=t.camera,l=t.renderingService,c=t.renderingContext,h=t.rBushRoot,p=t.pathGeneratorFactory;this.rBush=h,this.pathGeneratorFactory=p;var v=t.contextService,y=c.root.ownerDocument.defaultView,b=function(M){var I=M.target,N=I.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)},w=function(M){var I=M.target,N=I.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)};l.hooks.init.tap(e.tag,function(){y.addEventListener(Ua.UNMOUNTED,b),y.addEventListener(Ua.CULLED,w);var M=v.getDPR(),I=i.width,N=i.height,z=v.getContext();r.clearRect(z,0,0,I*M,N*M,i.background)}),l.hooks.destroy.tap(e.tag,function(){y.removeEventListener(Ua.UNMOUNTED,b),y.removeEventListener(Ua.CULLED,w),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]}),l.hooks.beginFrame.tap(e.tag,function(){var M,I=v.getContext(),N=v.getDPR(),z=i.width,H=i.height,X=r.canvasRendererPluginOptions,$=X.dirtyObjectNumThreshold,te=X.dirtyObjectRatioThreshold,fe=l.getStats(),ye=fe.total,Le=fe.rendered,Ge=Le/ye;r.clearFullScreen=r.clearFullScreenLastFrame||!(!((M=y.context.renderingPlugins[1])===null||M===void 0)&&M.isFirstTimeRenderingFinished)||l.disableDirtyRectangleRendering()||Le>$&&Ge>te,I&&(I.resetTransform?I.resetTransform():I.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(I,0,0,z*N,H*N,i.background))});var R=function(M,I){M.isVisible()&&!M.isCulled()&&r.renderDisplayObject(M,I,r.context,r.restoreStack,n);var N=M.sortable.sorted||M.childNodes;N.forEach(function(z){R(z,I)})};l.hooks.endFrame.tap(e.tag,function(){if(c.root.childNodes.length===0){r.clearFullScreenLastFrame=!0;return}r.clearFullScreenLastFrame=!1;var M=v.getContext(),I=v.getDPR();if(Kr.fromScaling(r.dprMatrix,[I,I,1]),Kr.multiply(r.vpMatrix,r.dprMatrix,s.getOrthoMatrix()),r.clearFullScreen)R(c.root,M);else{var N=r.safeMergeAABB.apply(r,(0,se.ev)([r.mergeDirtyAABBs(r.renderQueue)],(0,se.CR)(r.removedRBushNodeAABBs.map(function(Fn){var ir=Fn.minX,tr=Fn.minY,Hr=Fn.maxX,mi=Fn.maxY,Ki=new _c;return Ki.setMinMax([ir,tr,0],[Hr,mi,0]),Ki})),!1));if(r.removedRBushNodeAABBs=[],_c.isEmpty(N)){r.renderQueue=[];return}var z=r.convertAABB2Rect(N),H=z.x,X=z.y,$=z.width,te=z.height,fe=ur.fF(r.vec3a,[H,X,0],r.vpMatrix),ye=ur.fF(r.vec3b,[H+$,X,0],r.vpMatrix),Le=ur.fF(r.vec3c,[H,X+te,0],r.vpMatrix),Ge=ur.fF(r.vec3d,[H+$,X+te,0],r.vpMatrix),Qe=Math.min(fe[0],ye[0],Ge[0],Le[0]),gt=Math.min(fe[1],ye[1],Ge[1],Le[1]),qe=Math.max(fe[0],ye[0],Ge[0],Le[0]),lt=Math.max(fe[1],ye[1],Ge[1],Le[1]),ft=Math.floor(Qe),pt=Math.floor(gt),Zt=Math.ceil(qe-Qe),Ct=Math.ceil(lt-gt);M.save(),r.clearRect(M,ft,pt,Zt,Ct,i.background),M.beginPath(),M.rect(ft,pt,Zt,Ct),M.clip(),M.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var Lt=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;Lt&&y.dispatchEvent(new Vi(dd.DIRTY_RECTANGLE,{dirtyRect:{x:ft,y:pt,width:Zt,height:Ct}}));var Tn=r.searchDirtyObjects(N);Tn.sort(function(Fn,ir){return Fn.sortable.renderOrder-ir.sortable.renderOrder}).forEach(function(Fn){Fn&&Fn.isVisible()&&!Fn.isCulled()&&r.renderDisplayObject(Fn,M,r.context,r.restoreStack,n)}),M.restore(),r.renderQueue.forEach(function(Fn){r.saveDirtyAABB(Fn)}),r.renderQueue=[]}r.restoreStack.forEach(function(){M.restore()}),r.restoreStack=[]}),l.hooks.render.tap(e.tag,function(M){r.clearFullScreen||r.renderQueue.push(M)})},e.prototype.clearRect=function(t,n,r,i,s,l){t.clearRect(n,r,i,s),l&&(t.fillStyle=l,t.fillRect(n,r,i,s))},e.prototype.renderDisplayObject=function(t,n,r,i,s){var l=t.nodeName,c=i[i.length-1];c&&!(t.compareDocumentPosition(c)&wo.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),i.pop());var h=this.context.styleRendererFactory[l],p=this.pathGeneratorFactory[l],v=t.parsedStyle.clipPath;if(v){this.applyWorldTransform(n,v);var y=this.pathGeneratorFactory[v.nodeName];y&&(n.save(),i.push(t),n.beginPath(),y(n,v.parsedStyle),n.closePath(),n.clip())}h&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),p&&(n.beginPath(),p(n,t.parsedStyle),t.nodeName!==ii.LINE&&t.nodeName!==ii.PATH&&t.nodeName!==ii.POLYLINE&&n.closePath()),h&&(h.render(n,t.parsedStyle,t,r,this,s),n.restore()),t.renderable.dirty=!1},e.prototype.convertAABB2Rect=function(t){var n=t.getMin(),r=t.getMax(),i=Math.floor(n[0]),s=Math.floor(n[1]),l=Math.ceil(r[0]),c=Math.ceil(r[1]),h=l-i,p=c-s;return{x:i,y:s,width:h,height:p}},e.prototype.mergeDirtyAABBs=function(t){var n=new _c;return t.forEach(function(r){var i=r.getRenderBounds();n.add(i);var s=r.renderable.dirtyRenderBounds;s&&n.add(s)}),n},e.prototype.searchDirtyObjects=function(t){var n=(0,se.CR)(t.getMin(),2),r=n[0],i=n[1],s=(0,se.CR)(t.getMax(),2),l=s[0],c=s[1],h=this.rBush.search({minX:r,minY:i,maxX:l,maxY:c});return h.map(function(p){var v=p.displayObject;return v})},e.prototype.saveDirtyAABB=function(t){var n=t.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new _c);var r=t.getRenderBounds();r&&n.dirtyRenderBounds.update(r.center,r.halfExtents)},e.prototype.applyAttributesToContext=function(t,n){var r=n.parsedStyle,i=r.stroke,s=r.fill,l=r.opacity,c=r.lineDash,h=r.lineDashOffset;c&&t.setLineDash(c),(0,ya.Z)(h)||(t.lineDashOffset=h),(0,ya.Z)(l)||(t.globalAlpha*=l),!(0,ya.Z)(i)&&!Array.isArray(i)&&!i.isNone&&(t.strokeStyle=n.attributes.stroke),!(0,ya.Z)(s)&&!Array.isArray(s)&&!s.isNone&&(t.fillStyle=n.attributes.fill)},e.prototype.applyWorldTransform=function(t,n,r){r?(Kr.copy(this.tmpMat4,n.getLocalTransform()),Kr.multiply(this.tmpMat4,r,this.tmpMat4),Kr.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Kr.copy(this.tmpMat4,n.getWorldTransform()),Kr.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},e.prototype.safeMergeAABB=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=new _c;return t.forEach(function(i){r.add(i)}),r},e.tag="CanvasRenderer",e}(),xm=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,s,l){var c=n.fill,h=n.fillRule,p=n.opacity,v=p===void 0?1:p,y=n.fillOpacity,b=y===void 0?1:y,w=n.stroke,R=n.strokeOpacity,M=R===void 0?1:R,I=n.lineWidth,N=I===void 0?1:I,z=n.lineCap,H=n.lineJoin,X=n.shadowType,$=n.shadowColor,te=n.shadowBlur,fe=n.filter,ye=n.miterLimit,Le=c&&!c.isNone,Ge=w&&!w.isNone&&N>0,Qe=(c==null?void 0:c.alpha)===0,gt=!!(fe&&fe.length),qe=!(0,ya.Z)($)&&te>0,lt=r.nodeName,ft=X==="inner",pt=Ge&&qe&&(lt===ii.PATH||lt===ii.LINE||lt===ii.POLYLINE||Qe||ft);Le&&(t.globalAlpha=v*b,pt||fb(r,t,qe),zT(t,r,c,h,i,s,l,this.imagePool),pt||this.clearShadowAndFilter(t,gt,qe)),Ge&&(t.globalAlpha=v*M,t.lineWidth=N,(0,ya.Z)(ye)||(t.miterLimit=ye),(0,ya.Z)(z)||(t.lineCap=z),(0,ya.Z)(H)||(t.lineJoin=H),pt&&(ft&&(t.globalCompositeOperation="source-atop"),fb(r,t,!0),ft&&(hb(t,r,w,i,s,l,this.imagePool),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,gt,!0))),hb(t,r,w,i,s,l,this.imagePool))},e.prototype.clearShadowAndFilter=function(t,n,r){if(r&&(t.shadowColor="transparent",t.shadowBlur=0),n){var i=t.filter;!(0,ya.Z)(i)&&i.indexOf("drop-shadow")>-1&&(t.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},e}();function fb(e,t,n){var r=e.parsedStyle,i=r.filter,s=r.shadowColor,l=r.shadowBlur,c=r.shadowOffsetX,h=r.shadowOffsetY;i&&i.length&&(t.filter=e.style.filter),n&&(t.shadowColor=s.toString(),t.shadowBlur=l||0,t.shadowOffsetX=c||0,t.shadowOffsetY=h||0)}function f2(e,t,n,r,i,s,l){var c,h;if(e.image.nodeName==="rect"){var p=e.image.parsedStyle,v=p.width,y=p.height;h=r.contextService.getDPR();var b=r.config.offscreenCanvas;c=s.offscreenCanvasCreator.getOrCreateCanvas(b),c.width=v*h,c.height=y*h;var w=s.offscreenCanvasCreator.getOrCreateContext(b),R=[];e.image.forEach(function(I){i.renderDisplayObject(I,w,r,R,s)}),R.forEach(function(){w.restore()})}var M=l.getOrCreatePatternSync(e,n,c,h,t.getGeometryBounds().min,function(){t.renderable.dirty=!0,r.renderingService.dirtify()});return M}function kT(e,t,n,r){var i;if(e.type===V0.LinearGradient||e.type===V0.RadialGradient){var s=t.getGeometryBounds(),l=s&&s.halfExtents[0]*2||1,c=s&&s.halfExtents[1]*2||1,h=s&&s.min||[0,0];i=r.getOrCreateGradient((0,se.pi)((0,se.pi)({type:e.type},e.value),{min:h,width:l,height:c}),n)}return i}function zT(e,t,n,r,i,s,l,c,h){h===void 0&&(h=!1),Array.isArray(n)?n.forEach(function(p){e.fillStyle=kT(p,t,e,c),h||(r?e.fill(r):e.fill())}):(w_(n)&&(e.fillStyle=f2(n,t,e,i,s,l,c)),h||(r?e.fill(r):e.fill()))}function hb(e,t,n,r,i,s,l,c){c===void 0&&(c=!1),Array.isArray(n)?n.forEach(function(h){e.strokeStyle=kT(h,t,e,l),c||e.stroke()}):(w_(n)&&(e.strokeStyle=f2(n,t,e,r,i,s,l)),c||e.stroke())}var Y3=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r){var i=n.x,s=i===void 0?0:i,l=n.y,c=l===void 0?0:l,h=n.width,p=n.height,v=n.src,y=n.shadowColor,b=n.shadowBlur,w,R=h,M=p;if(u(v)?w=this.imagePool.getImageSync(v):(R||(R=v.width),M||(M=v.height),w=v),w){var I=!(0,ya.Z)(y)&&b>0;fb(r,t,I);try{t.drawImage(w,s,c,R,M)}catch(N){}}},e}(),K3=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,s,l){r.getBounds();var c=n,h=c.lineWidth,p=h===void 0?1:h,v=c.textAlign,y=v===void 0?"start":v,b=c.textBaseline,w=b===void 0?"alphabetic":b,R=c.lineJoin,M=R===void 0?"miter":R,I=c.miterLimit,N=I===void 0?10:I,z=c.letterSpacing,H=z===void 0?0:z,X=c.stroke,$=c.fill,te=c.fillRule,fe=c.fillOpacity,ye=fe===void 0?1:fe,Le=c.strokeOpacity,Ge=Le===void 0?1:Le,Qe=c.opacity,gt=Qe===void 0?1:Qe,qe=c.metrics,lt=c.x,ft=lt===void 0?0:lt,pt=c.y,Zt=pt===void 0?0:pt,Ct=c.dx,Lt=c.dy,Tn=c.shadowColor,Fn=c.shadowBlur,ir=qe.font,tr=qe.lines,Hr=qe.height,mi=qe.lineHeight,Ki=qe.lineMetrics;t.font=ir,t.lineWidth=p,t.textAlign=y==="middle"?"center":y;var fi=w;!l.enableCSSParsing&&fi==="alphabetic"&&(fi="bottom"),t.lineJoin=M,(0,ya.Z)(N)||(t.miterLimit=N);var Zr=Zt;w==="middle"?Zr+=-Hr/2-mi/2:w==="bottom"||w==="alphabetic"||w==="ideographic"?Zr+=-Hr:(w==="top"||w==="hanging")&&(Zr+=-mi);var yo=ft+(Ct||0);Zr+=Lt||0,tr.length===1&&(fi==="bottom"?(fi="middle",Zr-=.5*Hr):fi==="top"&&(fi="middle",Zr+=.5*Hr)),t.textBaseline=fi;var po=!(0,ya.Z)(Tn)&&Fn>0;fb(r,t,po);for(var ko=0;ko<tr.length;ko++){var fa=p/2+yo;Zr+=mi,!(0,ya.Z)(X)&&!X.isNone&&p&&this.drawLetterSpacing(t,r,tr[ko],Ki[ko],y,fa,Zr,H,$,te,ye,X,Ge,gt,!0,i,s,l),(0,ya.Z)($)||this.drawLetterSpacing(t,r,tr[ko],Ki[ko],y,fa,Zr,H,$,te,ye,X,Ge,gt,!1,i,s,l)}},e.prototype.drawLetterSpacing=function(t,n,r,i,s,l,c,h,p,v,y,b,w,R,M,I,N,z){if(h===0){M?this.strokeText(t,n,r,l,c,b,w,I,N,z):this.fillText(t,n,r,l,c,p,v,y,R,I,N,z);return}var H=t.textAlign;t.textAlign="left";var X=l;s==="center"||s==="middle"?X=l-i.width/2:(s==="right"||s==="end")&&(X=l-i.width);for(var $=Array.from(r),te=t.measureText(r).width,fe=0,ye=0;ye<$.length;++ye){var Le=$[ye];M?this.strokeText(t,n,Le,X,c,b,w,I,N,z):this.fillText(t,n,Le,X,c,p,v,y,R,I,N,z),fe=t.measureText(r.substring(ye+1)).width,X+=te-fe+h,te=fe}t.textAlign=H},e.prototype.fillText=function(t,n,r,i,s,l,c,h,p,v,y,b){zT(t,n,l,c,v,y,b,this.imagePool,!0);var w,R=!(0,ya.Z)(h)&&h!==1;R&&(w=t.globalAlpha,t.globalAlpha=h*p),t.fillText(r,i,s),R&&(t.globalAlpha=w)},e.prototype.strokeText=function(t,n,r,i,s,l,c,h,p,v){hb(t,n,l,h,p,v,this.imagePool,!0);var y,b=!(0,ya.Z)(c)&&c!==1;b&&(y=t.globalAlpha,t.globalAlpha=c),t.strokeText(r,i,s),b&&(t.globalAlpha=y)},e}(),h2=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xm),r4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xm),i4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xm),o4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xm),a4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xm),s4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xm),l4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xm),UT=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="canvas-renderer",r}return t.prototype.init=function(){var n,r=(0,se.pi)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,s=new xm(i),l=(n={},n[ii.CIRCLE]=s,n[ii.ELLIPSE]=s,n[ii.RECT]=s,n[ii.IMAGE]=new Y3(i),n[ii.TEXT]=new K3(i),n[ii.LINE]=s,n[ii.POLYLINE]=s,n[ii.POLYGON]=s,n[ii.PATH]=s,n[ii.GROUP]=void 0,n[ii.HTML]=void 0,n[ii.MESH]=void 0,n);this.context.defaultStyleRendererFactory=l,this.context.styleRendererFactory=l,this.addRenderingPlugin(new FT(r))},t.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},t}(xv),q3=function(){function e(){}return e.prototype.apply=function(t,n){var r=this,i=t.renderingService,s=t.renderingContext,l=t.config;this.context=t;var c=s.root.ownerDocument.defaultView,h=function(te){i.hooks.pointerMove.call(te)},p=function(te){i.hooks.pointerUp.call(te)},v=function(te){i.hooks.pointerDown.call(te)},y=function(te){i.hooks.pointerOver.call(te)},b=function(te){i.hooks.pointerOut.call(te)},w=function(te){i.hooks.pointerCancel.call(te)},R=function(te){i.hooks.pointerWheel.call(te)},M=function(te){i.hooks.click.call(te)},I=function(te){n.globalThis.document.addEventListener("pointermove",h,!0),te.addEventListener("pointerdown",v,!0),te.addEventListener("pointerleave",b,!0),te.addEventListener("pointerover",y,!0),n.globalThis.addEventListener("pointerup",p,!0),n.globalThis.addEventListener("pointercancel",w,!0)},N=function(te){te.addEventListener("touchstart",v,!0),te.addEventListener("touchend",p,!0),te.addEventListener("touchmove",h,!0),te.addEventListener("touchcancel",w,!0)},z=function(te){n.globalThis.document.addEventListener("mousemove",h,!0),te.addEventListener("mousedown",v,!0),te.addEventListener("mouseout",b,!0),te.addEventListener("mouseover",y,!0),n.globalThis.addEventListener("mouseup",p,!0)},H=function(te){n.globalThis.document.removeEventListener("pointermove",h,!0),te.removeEventListener("pointerdown",v,!0),te.removeEventListener("pointerleave",b,!0),te.removeEventListener("pointerover",y,!0),n.globalThis.removeEventListener("pointerup",p,!0)},X=function(te){te.removeEventListener("touchstart",v,!0),te.removeEventListener("touchend",p,!0),te.removeEventListener("touchmove",h,!0),te.removeEventListener("touchcancel",w,!0)},$=function(te){n.globalThis.document.removeEventListener("mousemove",h,!0),te.removeEventListener("mousedown",v,!0),te.removeEventListener("mouseout",b,!0),te.removeEventListener("mouseover",y,!0),n.globalThis.removeEventListener("mouseup",p,!0)};i.hooks.init.tap(e.tag,function(){var te=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(te.style.msContentZooming="none",te.style.msTouchAction="none"):c.supportsPointerEvents&&(te.style.touchAction="none"),c.supportsPointerEvents?I(te):z(te),c.supportsTouchEvents&&N(te),l.useNativeClickEvent&&te.addEventListener("click",M,!0),te.addEventListener("wheel",R,{passive:!0,capture:!0})}),i.hooks.destroy.tap(e.tag,function(){var te=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(te.style.msContentZooming="",te.style.msTouchAction=""):c.supportsPointerEvents&&(te.style.touchAction=""),c.supportsPointerEvents?H(te):$(te),c.supportsTouchEvents&&X(te),l.useNativeClickEvent&&te.removeEventListener("click",M,!0),te.removeEventListener("wheel",R,!0)})},e.tag="DOMInteraction",e}(),Q3=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="dom-interaction",n}return t.prototype.init=function(){this.addRenderingPlugin(new q3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(xv),jT="g-canvas-camera",V_=function(){function e(){this.displayObjectHTMLElementMap=new WeakMap}return e.prototype.joinTransformMatrix=function(t){return"matrix(".concat([t[0],t[1],t[4],t[5],t[12],t[13]].join(","),")")},e.prototype.apply=function(t,n){var r=this,i=t.camera,s=t.renderingContext,l=t.renderingService;this.context=t;var c=s.root.ownerDocument.defaultView,h=c.context.eventService.nativeHTMLMap,p=function(M,I){I.style.transform=r.joinTransformMatrix(M.getWorldTransform())},v=function(M){var I=M.target;if(I.nodeName===ii.HTML){r.$camera||(r.$camera=r.createCamera(i));var N=r.getOrCreateEl(I);if(r.$camera.appendChild(N),n.enableCSSParsing){var z=I.ownerDocument.documentElement.attributes;Object.keys(z).forEach(function(H){N.style[H]=z[H]})}Object.keys(I.attributes).forEach(function(H){r.updateAttribute(H,I)}),p(I,N),h.set(N,I)}},y=function(M){var I=M.target;if(I.nodeName===ii.HTML&&r.$camera){var N=r.getOrCreateEl(I);N&&(N.remove(),h.delete(N))}},b=function(M){var I=M.target;if(I.nodeName===ii.HTML){var N=M.attrName;r.updateAttribute(N,I)}},w=function(M){var I=M.target;if(I.nodeName===ii.HTML){var N=r.getOrCreateEl(I);p(I,N)}},R=function(){if(r.$camera){var M=r.context.config,I=M.width,N=M.height;r.$camera.style.width="".concat(I||0,"px"),r.$camera.style.height="".concat(N||0,"px")}};l.hooks.init.tap(e.tag,function(){c.addEventListener(dd.RESIZE,R),c.addEventListener(Ua.MOUNTED,v),c.addEventListener(Ua.UNMOUNTED,y),c.addEventListener(Ua.ATTR_MODIFIED,b),c.addEventListener(Ua.BOUNDS_CHANGED,w)}),l.hooks.endFrame.tap(e.tag,function(){r.$camera&&s.renderReasons.has(Yd.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),l.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),c.removeEventListener(dd.RESIZE,R),c.removeEventListener(Ua.MOUNTED,v),c.removeEventListener(Ua.UNMOUNTED,y),c.removeEventListener(Ua.ATTR_MODIFIED,b),c.removeEventListener(Ua.BOUNDS_CHANGED,w)})},e.prototype.createCamera=function(t){var n=this.context.config,r=n.document,i=n.width,s=n.height,l=this.context.contextService.getDomElement(),c=l.parentNode;if(c){var h=jT,p=c.querySelector("#"+h);if(!p){var v=(r||document).createElement("div");p=v,v.id=h,v.style.position="absolute",v.style.left="".concat(l.offsetLeft||0,"px"),v.style.top="".concat(l.offsetTop||0,"px"),v.style.transformOrigin="left top",v.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),v.style.overflow="hidden",v.style.pointerEvents="none",v.style.width="".concat(i||0,"px"),v.style.height="".concat(s||0,"px"),c.appendChild(v)}return p}return null},e.prototype.getOrCreateEl=function(t){var n=this.context.config.document,r=this.displayObjectHTMLElementMap.get(t);return r||(r=(n||document).createElement("div"),t.parsedStyle.$el=r,this.displayObjectHTMLElementMap.set(t,r),t.id&&(r.id=t.id),t.name&&r.setAttribute("name",t.name),t.className&&(r.className=t.className),r.style.position="absolute",r.style["will-change"]="transform",r.style.transform=this.joinTransformMatrix(t.getWorldTransform())),r},e.prototype.updateAttribute=function(t,n){var r=this.getOrCreateEl(n);switch(t){case"innerHTML":var i=n.parsedStyle.innerHTML;u(i)?r.innerHTML=i:(r.innerHTML="",r.appendChild(i));break;case"x":r.style.left="".concat(n.parsedStyle.x,"px");break;case"y":r.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var s=n.parsedStyle.transformOrigin;r.style["transform-origin"]="".concat(s[0].value," ").concat(s[1].value);break;case"width":if(this.context.enableCSSParsing){var l=n.computedStyleMap().get("width");r.style.width=l.toString()}else{var l=n.parsedStyle.width;r.style.width=(0,Gl.Z)(l)?"".concat(l,"px"):l.toString()}break;case"height":if(this.context.enableCSSParsing){var c=n.computedStyleMap().get("height");r.style.height=c.toString()}else{var c=n.parsedStyle.height;r.style.height=(0,Gl.Z)(c)?"".concat(c,"px"):c.toString()}break;case"zIndex":var h=n.parsedStyle.zIndex;r.style["z-index"]="".concat(h);break;case"visibility":var p=n.parsedStyle.visibility;r.style.visibility=p;break;case"pointerEvents":var v=n.parsedStyle.pointerEvents,y=v===void 0?"auto":v;r.style.pointerEvents=y;break;case"opacity":var b=n.parsedStyle.opacity;r.style.opacity="".concat(b);break;case"fill":var w=n.parsedStyle.fill,R="";D1(w)?w.isNone?R="transparent":R=n.getAttribute("fill"):Array.isArray(w)?R=n.getAttribute("fill"):w_(w),r.style.background=R;break;case"stroke":var M=n.parsedStyle.stroke,I="";D1(M)?M.isNone?I="transparent":I=n.getAttribute("stroke"):Array.isArray(M)?I=n.getAttribute("stroke"):w_(M),r.style["border-color"]=I,r.style["border-style"]="solid";break;case"lineWidth":var N=n.parsedStyle.lineWidth;r.style["border-width"]="".concat(N||0,"px");break;case"lineDash":r.style["border-style"]="dashed";break;case"filter":var z=n.style.filter;r.style.filter=z;break;default:!(0,ya.Z)(n.style[t])&&n.style[t]!==""&&(r.style[t]=n.style[t])}},e.tag="HTMLRendering",e}(),J3=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="html-renderer",n}return t.prototype.init=function(){this.addRenderingPlugin(new V_)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(xv),eR=function(){function e(t){this.canvasConfig=t,this.imageCache={},this.gradientCache={},this.patternCache={}}return e.prototype.getImageSync=function(t,n){return this.imageCache[t]?n&&n(this.imageCache[t]):this.getOrCreateImage(t).then(function(r){n&&n(r)}),this.imageCache[t]},e.prototype.getOrCreateImage=function(t){var n=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var r=this.canvasConfig.createImage;return new Promise(function(i,s){var l;r?l=r(t):C_&&(l=new window.Image),l&&(l.onload=function(){n.imageCache[t]=l,i(l)},l.onerror=function(c){s(c)},l.crossOrigin="Anonymous",l.src=t)})},e.prototype.getOrCreatePatternSync=function(t,n,r,i,s,l){var c=this.generatePatternKey(t);if(c&&this.patternCache[c])return this.patternCache[c];var h=t.image,p=t.repetition,v=t.transform,y,b=!1;u(h)?y=this.getImageSync(h,l):r?(y=r,b=!0):y=h;var w=y&&n.createPattern(y,p);if(w){var R=void 0;v?R=Du(A_(v),new Kf({})):R=Kr.identity(Kr.create()),b&&Kr.scale(R,R,[1/i,1/i,1]),w.setTransform({a:R[0],b:R[1],c:R[4],d:R[5],e:R[12]+s[0],f:R[13]+s[1]})}return c&&w&&(this.patternCache[c]=w),w},e.prototype.getOrCreateGradient=function(t,n){var r=this.generateGradientKey(t),i=t.type,s=t.steps,l=t.min,c=t.width,h=t.height,p=t.angle,v=t.cx,y=t.cy,b=t.size;if(this.gradientCache[r])return this.gradientCache[r];var w=null;if(i===V0.LinearGradient){var R=BO(l,c,h,p),M=R.x1,I=R.y1,N=R.x2,z=R.y2;w=n.createLinearGradient(M,I,N,z)}else if(i===V0.RadialGradient){var H=FO(l,c,h,v,y,b),X=H.x,$=H.y,te=H.r;w=n.createRadialGradient(X,$,0,X,$,te)}return w&&(s.forEach(function(fe){var ye=fe.offset,Le=fe.color;ye.unit===_o.kPercentage&&(w==null||w.addColorStop(ye.value/100,Le.toString()))}),this.gradientCache[r]=w),this.gradientCache[r]},e.prototype.generateGradientKey=function(t){var n=t.type,r=t.min,i=t.width,s=t.height,l=t.steps,c=t.angle,h=t.cx,p=t.cy,v=t.size;return"gradient-".concat(n,"-").concat((c==null?void 0:c.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat((v==null?void 0:v.toString())||0,"-").concat(r[0],"-").concat(r[1],"-").concat(i,"-").concat(s,"-").concat(l.map(function(y){var b=y.offset,w=y.color;return"".concat(b).concat(w)}).join("-"))},e.prototype.generatePatternKey=function(t){var n=t.image,r=t.repetition;if(u(n))return"pattern-".concat(n,"-").concat(r);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(r)},e}(),tR=function(){function e(){}return e.prototype.apply=function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,s=r.root.ownerDocument.defaultView,l=function(p,v,y){var b=p.parsedStyle,w=b.width,R=b.height;w&&!R?p.setAttribute("height",y/v*w):!w&&R&&p.setAttribute("width",v/y*R)},c=function(p){var v=p.target,y=v.nodeName,b=v.attributes;if(y===ii.IMAGE){var w=b.src,R=b.keepAspectRatio;u(w)&&i.getImageSync(w,function(M){var I=M.width,N=M.height;R&&l(v,I,N),v.renderable.dirty=!0,n.dirtify()})}},h=function(p){var v=p.target,y=p.attrName,b=p.newValue;v.nodeName===ii.IMAGE&&y==="src"&&u(b)&&i.getOrCreateImage(b).then(function(w){var R=w.width,M=w.height;v.attributes.keepAspectRatio&&l(v,R,M),v.renderable.dirty=!0,n.dirtify()})};n.hooks.init.tap(e.tag,function(){s.addEventListener(Ua.MOUNTED,c),s.addEventListener(Ua.ATTR_MODIFIED,h)}),n.hooks.destroy.tap(e.tag,function(){s.removeEventListener(Ua.MOUNTED,c),s.removeEventListener(Ua.ATTR_MODIFIED,h)})},e.tag="LoadImage",e}(),nR=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="image-loader",n}return t.prototype.init=function(){this.context.imagePool=new eR(this.context.config),this.addRenderingPlugin(new tR)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(xv),rR=function(){function e(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return e.prototype.init=function(){var t=this.canvasConfig,n=t.container,r=t.canvas;if(r)this.$canvas=r,n&&r.parentElement!==n&&n.appendChild(r),this.$container=r.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=u(n)?document.getElementById(n):n,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},e.prototype.getContext=function(){return this.context},e.prototype.getDomElement=function(){return this.$canvas},e.prototype.getDPR=function(){return this.dpr},e.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},e.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},e.prototype.resize=function(t,n){var r=this.canvasConfig.devicePixelRatio,i=r||C_&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*n,RC(this.$canvas,t,n)),this.renderingContext.renderReasons.add(Yd.CAMERA_CHANGED)},e.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},e.prototype.toDataURL=function(t){return t===void 0&&(t={}),(0,se.mG)(this,void 0,void 0,function(){var n,r;return(0,se.Jh)(this,function(i){return n=t.type,r=t.encoderOptions,[2,this.context.canvas.toDataURL(n,r)]})})},e}(),d2=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="canvas-context-register",n}return t.prototype.init=function(){this.context.ContextService=rR},t.prototype.destroy=function(){delete this.context.ContextService},t}(xv),VT=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n)||this;return r.registerPlugin(new d2),r.registerPlugin(new nR),r.registerPlugin(new D3),r.registerPlugin(new UT),r.registerPlugin(new Q3),r.registerPlugin(new $3),r.registerPlugin(new J3),r}return t}(iS),iR=function(){function e(t){this.dragndropPluginOptions=t}return e.prototype.apply=function(t){var n=this,r=t.renderingService,i=t.renderingContext,s=i.root.ownerDocument,l=s.defaultView,c=function(h){var p=h.target,v=p===s,y=v&&n.dragndropPluginOptions.isDocumentDraggable?s:p.closest&&p.closest("[draggable=true]");if(y){var b=!1,w=h.timeStamp,R=[h.clientX,h.clientY],M=null,I=[h.clientX,h.clientY],N=function(H){return(0,se.mG)(n,void 0,void 0,function(){var X,$,te,fe,ye,Le;return(0,se.Jh)(this,function(Ge){switch(Ge.label){case 0:if(!b){if(X=H.timeStamp-w,$=Qs([H.clientX,H.clientY],R),X<=this.dragndropPluginOptions.dragstartTimeThreshold||$<=this.dragndropPluginOptions.dragstartDistanceThreshold)return[2];H.type="dragstart",y.dispatchEvent(H),b=!0}return H.type="drag",H.dx=H.clientX-I[0],H.dy=H.clientY-I[1],y.dispatchEvent(H),I=[H.clientX,H.clientY],v?[3,2]:(te=this.dragndropPluginOptions.overlap==="pointer"?[H.canvasX,H.canvasY]:p.getBounds().center,[4,s.elementsFromPoint(te[0],te[1])]);case 1:fe=Ge.sent(),ye=fe[fe.indexOf(p)+1],Le=(ye==null?void 0:ye.closest("[droppable=true]"))||(this.dragndropPluginOptions.isDocumentDroppable?s:null),M!==Le&&(M&&(H.type="dragleave",H.target=M,M.dispatchEvent(H)),Le&&(H.type="dragenter",H.target=Le,Le.dispatchEvent(H)),M=Le,M&&(H.type="dragover",H.target=M,M.dispatchEvent(H))),Ge.label=2;case 2:return[2]}})})};l.addEventListener("pointermove",N);var z=function(H){if(b){H.detail={preventClick:!0};var X=H.clone();M&&(X.type="drop",X.target=M,M.dispatchEvent(X)),X.type="dragend",y.dispatchEvent(X),b=!1}l.removeEventListener("pointermove",N)};p.addEventListener("pointerup",z,{once:!0}),p.addEventListener("pointerupoutside",z,{once:!0})}};r.hooks.init.tap(e.tag,function(){l.addEventListener("pointerdown",c)}),r.hooks.destroy.tap(e.tag,function(){l.removeEventListener("pointerdown",c)})},e.tag="Dragndrop",e}(),H_=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="dragndrop",r}return t.prototype.init=function(){this.addRenderingPlugin(new iR((0,se.pi)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t.prototype.setOptions=function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)},t}(xv);function oR(e,t,n){var r;return function(){var i=this,s=arguments,l=function(){r=null,n||e.apply(i,s)},c=n&&!r;clearTimeout(r),r=setTimeout(l,t),c&&e.apply(i,s)}}var HT=oR,aR=function(e){return typeof e=="object"&&e!==null},db=aR,sR=function(e){if(!db(e)||!(0,tm.Z)(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Lv=sR,WT=5;function pb(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}function gg(e,t,n,r){n=n||0,r=r||WT;for(var i in t)if(pb(t,i)){var s=t[i];s!==null&&Lv(s)?(Lv(e[i])||(e[i]={}),n<r?gg(e[i],s,n+1,r):e[i]=t[i]):jo(s)?(e[i]=[],e[i]=e[i].concat(s)):s!==void 0&&(e[i]=s)}}var lR=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)gg(e,t[r]);return e},oi=lR;class vb extends Map{constructor(t,n=m2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(p2(this,t))}has(t){return super.has(p2(this,t))}set(t,n){return super.set(al(this,t),n)}delete(t){return super.delete(v2(this,t))}}class u4 extends null{constructor(t,n=m2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(p2(this,t))}add(t){return super.add(al(this,t))}delete(t){return super.delete(v2(this,t))}}function p2({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function al({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function v2({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function m2(e){return e!==null&&typeof e=="object"?e.valueOf():e}function W_(e){return e}function ou(e,...t){return xy(e,W_,W_,t)}function G_(e,...t){return xy(e,Array.from,W_,t)}function GT(e,t){for(let n=1,r=t.length;n<r;++n)e=e.flatMap(i=>i.pop().map(([s,l])=>[...i,s,l]));return e}function c4(e,...t){return GT(G_(e,...t),t)}function f4(e,t,...n){return GT(y2(e,t,...n),n)}function g2(e,t,...n){return xy(e,W_,t,n)}function y2(e,t,...n){return xy(e,Array.from,t,n)}function h4(e,...t){return xy(e,identity,ZT,t)}function d4(e,...t){return xy(e,Array.from,ZT,t)}function ZT(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function xy(e,t,n,r){return function i(s,l){if(l>=r.length)return n(s);const c=new vb,h=r[l++];let p=-1;for(const v of s){const y=h(v,++p,s),b=c.get(y);b?b.push(v):c.set(y,[v])}for(const[v,y]of c)c.set(v,i(y,l));return t(c)}(e,0)}var _2=function(e){return(0,ya.Z)(e)?"":e.toString()},XT=function(e){var t=_2(e);return t.charAt(0).toLowerCase()+t.substring(1)},b2=XT,uR=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};function yg(e){return e}function x2(e){return e.reduce((t,n)=>(r,...i)=>n(t(r,...i),...i),yg)}function $T(e){return e.reduce((t,n)=>r=>uR(this,void 0,void 0,function*(){const i=yield t(r);return n(i)}),yg)}function E2(e){return e.replace(/( |^)[a-z]/g,t=>t.toUpperCase())}function Ey(e=""){throw new Error(e)}function mb(e,t){const{attributes:n}=t,r=new Set(["id","className"]);for(const[i,s]of Object.entries(n))r.has(i)||e.attr(i,s)}function cl(e){return e!=null&&!Number.isNaN(e)}function p4(e,t){return e+(t-e)*Math.random()}function cR(e){const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}function fR(e,t){const{transform:n}=e.style,i=(s=>s==="none"||s===void 0)(n)?"":n;e.style.transform=`${i} ${t}`.trimStart()}function go(e,t){return YT(e,t)||{}}function YT(e,t){const n=Object.entries(e||{}).filter(([r])=>r.startsWith(t)).map(([r,i])=>[b2(r.replace(t,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function v4(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${t}${upperFirst(n)}`,r]))}function S2(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.find(r=>n.startsWith(r))))}function Sy(e,...t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.every(r=>!n.startsWith(r))))}function KT(e,t){if(e===void 0)return null;if(typeof e=="number")return e;const n=+e.replace("%","");return Number.isNaN(n)?null:n/100*t}function Em(e){return typeof e=="object"&&!(e instanceof Date)&&e!==null&&!Array.isArray(e)}function Dv(e){return e===null||e===!1}function qT(e,t,n=5,r=0){if(!(r>=n)){for(const i of Object.keys(t)){const s=t[i];!Lv(s)||!Lv(e[i])?e[i]=s:qT(e[i],s,n,r+1)}return e}}function Aa(e){return new Pc([e],null,e,e.ownerDocument)}class Pc{constructor(t=null,n=null,r=null,i=null,s=[null,null,null,null,null],l=[],c=[]){this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=s[0],this._update=s[1],this._exit=s[2],this._merge=s[3],this._split=s[4],this._transitions=l,this._facetElements=c}selectAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Pc(n,null,this._elements[0],this._document)}selectFacetAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Pc(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(t){const n=typeof t=="string"?this._parent.querySelectorAll(t)[0]||null:t;return new Pc([n],null,n,this._document)}append(t){const n=typeof t=="function"?t:()=>this.createElement(t),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const s=this._data[i],[l,c]=Array.isArray(s)?s:[s,null],h=n(l,i);h.__data__=l,c!==null&&(h.__fromElements__=c),this._parent.appendChild(h),r.push(h)}return new Pc(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const s=this._elements[i],l=s.__data__,c=n(l,i);s.appendChild(c),r.push(c)}return new Pc(r,null,r[0],this._document)}}maybeAppend(t,n,r){const i=this._elements[0],s=i.getElementById(t);if(s)return new Pc([s],null,this._parent,this._document);const l=typeof n=="string"?this.createElement(n):n();return l.id=t,r&&(l.className=r),i.appendChild(l),new Pc([l],null,this._parent,this._document)}data(t,n=i=>i,r=()=>null){const i=[],s=[],l=new Set(this._elements),c=[],h=new Set,p=new Map(this._elements.map((w,R)=>[n(w.__data__,R),w])),v=new Map(this._facetElements.map((w,R)=>[n(w.__data__,R),w])),y=ou(this._elements,w=>r(w.__data__));for(let w=0;w<t.length;w++){const R=t[w],M=n(R,w),I=r(R,w);if(p.has(M)){const N=p.get(M);N.__data__=R,N.__facet__=!1,s.push(N),l.delete(N),p.delete(M)}else if(v.has(M)){const N=v.get(M);N.__data__=R,N.__facet__=!0,s.push(N),v.delete(M)}else if(y.has(M)){const N=y.get(M);c.push([R,N]);for(const z of N)l.delete(z);y.delete(M)}else if(p.has(I)){const N=p.get(I);N.__toData__?N.__toData__.push(R):N.__toData__=[R],h.add(N),l.delete(N)}else i.push(R)}const b=[new Pc([],i,this._parent,this._document),new Pc(s,null,this._parent,this._document),new Pc(l,null,this._parent,this._document),new Pc([],c,this._parent,this._document),new Pc(h,null,this._parent,this._document)];return new Pc(this._elements,null,this._parent,this._document,b)}merge(t){const n=[...this._elements,...t._elements],r=[...this._transitions,...t._transitions];return new Pc(n,null,this._parent,this._document,void 0,r)}createElement(t){if(this._document)return this._document.createElement(t,{});const n=Pc.registry[t];return n?new n:Ey(`Unknown node type: ${t}`)}join(t=l=>l,n=l=>l,r=l=>l.remove(),i=l=>l,s=l=>l.remove()){const l=t(this._enter),c=n(this._update),h=r(this._exit),p=i(this._merge),v=s(this._split);return c.merge(l).merge(h).merge(p).merge(v)}remove(){for(let t=0;t<this._elements.length;t++){const n=this._transitions[t];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(i=>i.finished)).then(()=>{this._elements[t].remove()})}else this._elements[t].remove()}return new Pc([],null,this._parent,this._document,void 0,this._transitions)}each(t){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],i=r.__data__;t(i,n,r)}return this}attr(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l[t]=r(i,s,l))})}style(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l.style[t]=r(i,s,l))})}transition(t){const n=typeof t!="function"?()=>t:t,{_transitions:r}=this;return this.each(function(i,s,l){r[s]=n(i,s,l)})}on(t,n){return this.each(function(r,i,s){s.addEventListener(t,n)}),this}call(t,...n){return t(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}Pc.registry={g:ff,rect:hd,circle:G0,path:fd,text:hf,ellipse:vm,image:wv,line:hy,polygon:H1,polyline:W1,html:N_};const bl={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};var hR=function(e){var t=_2(e);return t.charAt(0).toUpperCase()+t.substring(1)},Sm=hR;function QT(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function dR(e){return e=gb(Math.abs(e)),e?e[1]:NaN}function Z_(e,t){return function(n,r){for(var i=n.length,s=[],l=0,c=e[0],h=0;i>0&&c>0&&(h+c+1>r&&(c=Math.max(1,r-h)),s.push(n.substring(i-=c,i+c)),!((h+=c+1)>r));)c=e[l=(l+1)%e.length];return s.reverse().join(t)}}function pR(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var m4=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(e){if(!(t=m4.exec(e)))throw new Error("invalid format: "+e);var t;return new o({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}a.prototype=o.prototype;function o(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var m;function T(e,t){var n=gb(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(m=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+gb(e,Math.max(0,t+s-1))[0]}function C(e,t){var n=gb(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var L={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:QT,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>C(e*100,t),r:C,s:T,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function F(e){return e}var V=Array.prototype.map,ae=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ae(e){var t=e.grouping===void 0||e.thousands===void 0?F:Z_(V.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?F:pR(V.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"\u2212":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function p(y){y=a(y);var b=y.fill,w=y.align,R=y.sign,M=y.symbol,I=y.zero,N=y.width,z=y.comma,H=y.precision,X=y.trim,$=y.type;$==="n"?(z=!0,$="g"):L[$]||(H===void 0&&(H=12),X=!0,$="g"),(I||b==="0"&&w==="=")&&(I=!0,b="0",w="=");var te=M==="$"?n:M==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",fe=M==="$"?r:/[%p]/.test($)?l:"",ye=L[$],Le=/[defgprs%]/.test($);H=H===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H));function Ge(Qe){var gt=te,qe=fe,lt,ft,pt;if($==="c")qe=ye(Qe)+qe,Qe="";else{Qe=+Qe;var Zt=Qe<0||1/Qe<0;if(Qe=isNaN(Qe)?h:ye(Math.abs(Qe),H),X&&(Qe=f(Qe)),Zt&&+Qe==0&&R!=="+"&&(Zt=!1),gt=(Zt?R==="("?R:c:R==="-"||R==="("?"":R)+gt,qe=($==="s"?ae[8+m/3]:"")+qe+(Zt&&R==="("?")":""),Le){for(lt=-1,ft=Qe.length;++lt<ft;)if(pt=Qe.charCodeAt(lt),48>pt||pt>57){qe=(pt===46?i+Qe.slice(lt+1):Qe.slice(lt))+qe,Qe=Qe.slice(0,lt);break}}}z&&!I&&(Qe=t(Qe,1/0));var Ct=gt.length+Qe.length+qe.length,Lt=Ct<N?new Array(N-Ct+1).join(b):"";switch(z&&I&&(Qe=t(Lt+Qe,Lt.length?N-qe.length:1/0),Lt=""),w){case"<":Qe=gt+Qe+qe+Lt;break;case"=":Qe=gt+Lt+Qe+qe;break;case"^":Qe=Lt.slice(0,Ct=Lt.length>>1)+gt+Qe+qe+Lt.slice(Ct);break;default:Qe=Lt+gt+Qe+qe;break}return s(Qe)}return Ge.toString=function(){return y+""},Ge}function v(y,b){var w=p((y=a(y),y.type="f",y)),R=Math.max(-8,Math.min(8,Math.floor(dR(b)/3)))*3,M=Math.pow(10,-R),I=ae[8+R/3];return function(N){return w(M*N)+I}}return{format:p,formatPrefix:v}}var Ce,Ye,Bt;rn({thousands:",",grouping:[3],currency:["$",""]});function rn(e){return Ce=Ae(e),Ye=Ce.format,Bt=Ce.formatPrefix,Ce}function Sn(e,t){return Object.entries(e).reduce((n,[r,i])=>(n[r]=t(i,r,e),n),{})}function lr(e){return e.map((t,n)=>n)}function Br(e){const t=e.length,n=e[0].length,r=new Array(n).fill(0).map(()=>new Array(t));for(let i=0;i<n;i++)for(let s=0;s<t;s++)r[i][s]=e[s][i];return r}function Er(e){return e[0]}function ui(e){return e[e.length-1]}function ji(e){return!e.some(Array.isArray)}function Po(e){return Array.from(new Set(e))}function no(e,t){const n=[[],[]];return e.forEach(r=>{n[t(r)?0:1].push(r)}),n}function Gr(e,t=e.length){if(t===1)return e.map(r=>[r]);const n=[];for(let r=0;r<e.length;r++){const i=e.slice(r+1);Gr(i,t-1).forEach(l=>{n.push([e[r],...l])})}return n}function ro(e){if(e.length===1)return[e];const t=[];for(let n=1;n<=e.length;n++)t.push(...Gr(e,n));return t}var Da=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},is=Da,Qo=function(e,t){if(e===t)return!0;if(!e||!t||u(e)||u(t))return!1;if(is(e)||is(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=Qo(e[r],t[r]),!!n);r++);return n}if(db(e)||db(t)){var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var n=!0,r=0;r<i.length&&(n=Qo(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},ps=Qo;function es(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function ls(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Qd(e){return e*Math.PI/180}function Jd(e){return e*180/Math.PI}function Tm(e,t){return e=e%(2*Math.PI),t=t%(2*Math.PI),e<0&&(e=2*Math.PI+e),t<0&&(t=2*Math.PI+t),e>=t&&(t=t+2*Math.PI),{startAngle:e,endAngle:t}}const Nv=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},t),e);return Object.assign(Object.assign({},n),Tm(n.startAngle,n.endAngle))},qf=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Nv(e);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",t,n,r,i]]};qf.props={};const Ty=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},T2=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Ty(e);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...qf({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};T2.props={};function yb(e,t,n){return Math.max(t,Math.min(e,n))}function _b(e,t=10){return typeof e!="number"||Math.abs(e)<1e-15?e:parseFloat(e.toFixed(t))}const vR=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var JT=D(17816);function wu(e){const{transformations:t}=e.getOptions();return t.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function au(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="polar")}function X_(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="reflect")&&t.some(([n])=>n.startsWith("transpose"))}function la(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="helix")}function Bs(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="parallel")}function yl(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="fisheye")}function bo(e){return Bs(e)&&au(e)}function df(e){return la(e)||au(e)}function pu(e){return au(e)&&wu(e)}function Rp(e){return au(e)||Bs(e)||X_(e)||pu(e)}function ep(e){if(df(e)){const[t,n]=e.getSize(),r=e.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(t,n)/2*r[4]}return 0}function Z0(e){const{transformations:t}=e.getOptions(),[,,,n,r]=t.find(i=>i[0]==="polar");return[+n,+r]}function bb(e,t=!0){const{transformations:n}=e.getOptions(),[,r,i]=n.find(s=>s[0]==="polar");return t?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function Tj(e,t){const{transformations:n}=e.getOptions(),[,...r]=n.find(i=>i[0]===t);return r}function g4(e,t){t(e),e.children&&e.children.forEach(function(n){n&&g4(n,t)})}function w2(e){ew(e,!0)}function wy(e){ew(e,!1)}function ew(e,t){var n=t?"visible":"hidden";g4(e,function(r){r.attr("visibility",n)})}function wj(e){return typeof e=="boolean"?!1:"enter"in e&&"update"in e&&"exit"in e}function y4(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],n=Object.fromEntries(Object.entries(e).filter(function(r){var i=(0,se.CR)(r,1),s=i[0];return!t.includes(s)}));return Object.fromEntries(t.map(function(r){return wj(e)?e[r]===!1?[r,!1]:[r,(0,se.pi)((0,se.pi)({},e[r]),n)]:[r,n]}))}function xb(e,t){e?e.finished.then(t):t()}function Aj(e,t){e.length===0?t():Promise.all(e.map(function(n){return n==null?void 0:n.finished})).then(t)}function _4(e,t){"update"in e?e.update(t):e.attr(t)}function b4(e,t,n){if(t.length===0)return null;if(!n){var r=t.slice(-1)[0];return _4(e,{style:r}),null}return e.animate(t,n)}function Oj(e,t){return!(e.nodeName!=="text"||t.nodeName!=="text"||e.attributes.text!==t.attributes.text)}function Cj(e,t,n,r){if(r===void 0&&(r="destroy"),Oj(e,t))return e.remove(),[null];var i=function(){r==="destroy"?e.destroy():r==="hide"&&wy(e),t.isVisible()&&w2(t)};if(!n)return i(),[null];var s=n.duration,l=s===void 0?0:s,c=n.delay,h=c===void 0?0:c,p=Math.ceil(+l/2),v=+l/4,y=(0,se.CR)(e.getGeometryBounds().center,2),b=y[0],w=y[1],R=(0,se.CR)(t.getGeometryBounds().center,2),M=R[0],I=R[1],N=(0,se.CR)([(b+M)/2-b,(w+I)/2-w],2),z=N[0],H=N[1],X=e.style.opacity,$=X===void 0?1:X,te=t.style.opacity,fe=te===void 0?1:te,ye=e.style.transform||"",Le=t.style.transform||"",Ge=e.animate([{opacity:$,transform:"translate(0, 0) ".concat(ye)},{opacity:0,transform:"translate(".concat(z,", ").concat(H,") ").concat(ye)}],(0,se.pi)((0,se.pi)({fill:"both"},n),{duration:h+p+v})),Qe=t.animate([{opacity:0,transform:"translate(".concat(-z,", ").concat(-H,") ").concat(Le),offset:.01},{opacity:fe,transform:"translate(0, 0) ".concat(Le)}],(0,se.pi)((0,se.pi)({fill:"both"},n),{duration:p+v,delay:h+p-v}));return xb(Qe,i),[Ge,Qe]}function Bv(e,t,n){var r={},i={};return Object.entries(t).forEach(function(s){var l=(0,se.CR)(s,2),c=l[0],h=l[1];if(!(0,ya.Z)(h)){var p=e.style[c]||e.parsedStyle[c]||0;p!==h&&(r[c]=p,i[c]=h)}}),n?b4(e,[r,i],(0,se.pi)({fill:"both"},n)):(_4(e,i),null)}var Rj=5,x4=function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=Rj),Object.entries(t).forEach(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1],h=e;Object.prototype.hasOwnProperty.call(t,l)&&(c?Lv(c)?(Lv(e[l])||(h[l]={}),n<r?x4(e[l],c,n+1,r):h[l]=t[l]):jo(c)?(h[l]=[],h[l]=h[l].concat(c)):h[l]=c:h[l]=c)})},_g=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)x4(e,t[r]);return e},Mj=function(e){(0,se.ZT)(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,(0,se.ev)([],(0,se.CR)(n),!1))||this;return i.isMutationObserved=!0,i.addEventListener(Ua.INSERTED,function(){wy(i)}),i}return t}(ff);function E4(e){var t=e.appendChild(new Mj({class:"offscreen"}));return wy(t),t}function Pj(e){for(var t=e;t;){if(t.className==="offscreen")return!0;t=t.parent}return!1}function Ij(){ew(this,this.attributes.visibility!=="hidden")}var vh=function(e){(0,se.ZT)(t,e);function t(n,r){r===void 0&&(r={});var i=e.call(this,_g({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=E4(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t.prototype.attributeChangedCallback=function(n){n==="visibility"&&Ij.call(this)},t.prototype.update=function(n,r){var i;return this.attr(_g({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(n,r){},t.prototype.getSubShapeStyle=function(n){var r=n.x,i=n.y,s=n.transform,l=n.transformOrigin,c=n.class,h=n.className,p=n.zIndex,v=(0,se._T)(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return v},t}(V1);function Mp(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(s){s.node().removeChildren()}),e?n(t):(r&&i(t),null)}function Lj(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r}var mR=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,se._T)(n,["style"]);return e.call(this,(0,se.pi)({style:(0,se.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=E4(this)),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t}(hf);function Dj(e,t){var n=new Map;return e.forEach(function(r){var i=t(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function Nj(e){throw new Error(e)}var Bj=function(){function e(i,s,l,c,h,p,v){i===void 0&&(i=null),s===void 0&&(s=null),l===void 0&&(l=null),c===void 0&&(c=null),h===void 0&&(h=[null,null,null,null,null]),p===void 0&&(p=[]),v===void 0&&(v=[]),t.add(this),this._elements=Array.from(i),this._data=s,this._parent=l,this._document=c,this._enter=h[0],this._update=h[1],this._exit=h[2],this._merge=h[3],this._split=h[4],this._transitions=p,this._facetElements=v}e.prototype.selectAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(s,null,this._elements[0],this._document)},e.prototype.selectFacetAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,s)},e.prototype.select=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([s],null,s,this._document)},e.prototype.append=function(i){var s=this,l=typeof i=="function"?i:function(){return s.createElement(i)},c=[];if(this._data!==null){for(var h=0;h<this._data.length;h++){var p=this._data[h],v=(0,se.CR)(Array.isArray(p)?p:[p,null],2),y=v[0],b=v[1],w=l(y,h);w.__data__=y,b!==null&&(w.__fromElements__=b),this._parent.appendChild(w),c.push(w)}return new n(c,null,this._parent,this._document)}for(var h=0;h<this._elements.length;h++){var R=this._elements[h],y=R.__data__,w=l(y,h);R.appendChild(w),c.push(w)}return new n(c,null,c[0],this._document)},e.prototype.maybeAppend=function(i,s){var l=(0,se.Q_)(this,t,"m",r).call(this,i[0]==="#"?i:"#".concat(i),s);return l.attr("id",i),l},e.prototype.maybeAppendByClassName=function(i,s){var l=i.toString(),c=(0,se.Q_)(this,t,"m",r).call(this,l[0]==="."?l:".".concat(l),s);return c.attr("className",l),c},e.prototype.maybeAppendByName=function(i,s){var l=(0,se.Q_)(this,t,"m",r).call(this,'[name="'.concat(i,'"]'),s);return l.attr("name",i),l},e.prototype.data=function(i,s,l){var c,h;s===void 0&&(s=function(Ge){return Ge}),l===void 0&&(l=function(){return null});for(var p=[],v=[],y=new Set(this._elements),b=[],w=new Set,R=new Map(this._elements.map(function(Ge,Qe){return[s(Ge.__data__,Qe),Ge]})),M=new Map(this._facetElements.map(function(Ge,Qe){return[s(Ge.__data__,Qe),Ge]})),I=Dj(this._elements,function(Ge){return l(Ge.__data__)}),N=0;N<i.length;N++){var z=i[N],H=s(z,N),X=l(z,N);if(R.has(H)){var $=R.get(H);$.__data__=z,$.__facet__=!1,v.push($),y.delete($),R.delete(H)}else if(M.has(H)){var $=M.get(H);$.__data__=z,$.__facet__=!0,v.push($),M.delete(H)}else if(I.has(H)){var te=I.get(H);b.push([z,te]);try{for(var fe=(c=void 0,(0,se.XA)(te)),ye=fe.next();!ye.done;ye=fe.next()){var $=ye.value;y.delete($)}}catch(Ge){c={error:Ge}}finally{try{ye&&!ye.done&&(h=fe.return)&&h.call(fe)}finally{if(c)throw c.error}}I.delete(H)}else if(R.has(X)){var $=R.get(X);$.__toData__?$.__toData__.push(z):$.__toData__=[z],w.add($),y.delete($)}else p.push(z)}var Le=[new n([],p,this._parent,this._document),new n(v,null,this._parent,this._document),new n(y,null,this._parent,this._document),new n([],b,this._parent,this._document),new n(w,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,Le)},e.prototype.merge=function(i){var s=(0,se.ev)((0,se.ev)([],(0,se.CR)(this._elements),!1),(0,se.CR)(i._elements),!1),l=(0,se.ev)((0,se.ev)([],(0,se.CR)(this._transitions),!1),(0,se.CR)(i._transitions),!1);return new n(s,null,this._parent,this._document,void 0,l)},e.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var s=n.registry[i];return s?new s:Nj("Unknown node type: ".concat(i))},e.prototype.join=function(i,s,l,c,h){i===void 0&&(i=function(R){return R}),s===void 0&&(s=function(R){return R}),l===void 0&&(l=function(R){return R.remove()}),c===void 0&&(c=function(R){return R}),h===void 0&&(h=function(R){return R.remove()});var p=i(this._enter),v=s(this._update),y=l(this._exit),b=c(this._merge),w=h(this._split);return v.merge(p).merge(y).merge(b).merge(w)},e.prototype.remove=function(){for(var i=function(c){var h=s._elements[c],p=s._transitions[c];p?p.then(function(){return h.remove()}):h.remove()},s=this,l=0;l<this._elements.length;l++)i(l);return new n([],null,this._parent,this._document,void 0,this._transitions)},e.prototype.each=function(i){for(var s=0;s<this._elements.length;s++){var l=this._elements[s],c=l.__data__;i.call(l,c,s)}return this},e.prototype.attr=function(i,s){var l=typeof s!="function"?function(){return s}:s;return this.each(function(c,h){s!==void 0&&(this[i]=l.call(this,c,h))})},e.prototype.style=function(i,s,l){l===void 0&&(l=!0);var c=typeof s!="function"||!l?function(){return s}:s;return this.each(function(h,p){s!==void 0&&(this.style[i]=c.call(this,h,p))})},e.prototype.styles=function(i,s){return i===void 0&&(i={}),s===void 0&&(s=!0),this.each(function(l,c){var h=this;Object.entries(i).forEach(function(p){var v=(0,se.CR)(p,2),y=v[0],b=v[1],w=typeof b!="function"||!s?function(){return b}:b;b!==void 0&&h.attr(y,w.call(h,l,c))})})},e.prototype.update=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(c,h){i&&this.update&&this.update(l.call(this,c,h))})},e.prototype.maybeUpdate=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(c,h){i&&this.update&&this.update(l.call(this,c,h))})},e.prototype.transition=function(i){var s=this._transitions;return this.each(function(l,c){s[c]=i.call(this,l,c)})},e.prototype.on=function(i,s){return this.each(function(){this.addEventListener(i,s)}),this},e.prototype.call=function(i){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return i.call.apply(i,(0,se.ev)([this._parent,this],(0,se.CR)(s),!1)),this},e.prototype.node=function(){return this._elements[0]},e.prototype.nodes=function(){return this._elements},e.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},e.prototype.parent=function(){return this._parent};var t,n,r;return n=e,t=new WeakSet,r=function(s,l){var c=this._elements[0],h=c.querySelector(s);if(h)return new n([h],null,this._parent,this._document);var p=typeof l=="string"?this.createElement(l):l();return c.appendChild(p),new n([p],null,this._parent,this._document)},e.registry={g:ff,rect:hd,circle:G0,path:fd,text:mR,ellipse:vm,image:wv,line:hy,polygon:H1,polyline:W1,html:N_},e}();function us(e){return new Bj([e],null,e,e.ownerDocument)}function Fj(e,t,n){return e.querySelector(t)?us(e).select(t):us(e).append(n)}var X0=function(e,t){var n=function(i){return"".concat(t,"-").concat(i)},r=Object.fromEntries(Object.entries(e).map(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1],h=n(c);return[l,{name:h,class:".".concat(h),id:"#".concat(h),toString:function(){return h}}]}));return Object.assign(r,{prefix:n}),r},gR={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new fd({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},Ade=oi({},gR,{style:{type:"arc"}}),Ode=oi({},gR,{style:{}}),su=X0({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),tp=function(e){return typeof e=="function"};function bg(e,t){return[e[0]*t,e[1]*t]}function A2(e,t){return[e[0]+t[0],e[1]+t[1]]}function yR(e,t){return[e[0]-t[0],e[1]-t[1]]}function $_(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function Y_(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function O2(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function S4(e){if(e[0]===0&&e[1]===0)return[0,0];var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t]}function Cde(e,t,n){var r=__read(e,2),i=r[0],s=r[1],l=__read(t,2),c=l[0],h=l[1],p=i-c,v=s-h,y=Math.sin(n),b=Math.cos(n);return[p*b-v*y+c,p*y+v*b+h]}function kj(e,t){return t?[e[1],-e[0]]:[-e[1],e[0]]}function Eb(e){return e*Math.PI/180}function T4(e){return Number((e*180/Math.PI).toPrecision(5))}function _R(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}function zj(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1)}function Uj(e,t){return"".concat(t).concat(_R(e))}function w4(e,t,n){var r;n===void 0&&(n=!0);var i=t||((r=e.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",s=e.replace(new RegExp("^(".concat(i,")")),"");return n?zj(s):s}function jj(e,t){Object.entries(t).forEach(function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1];(0,se.ev)([e],(0,se.CR)(e.querySelectorAll(i)),!1).filter(function(l){return l.matches(i)}).forEach(function(l){if(l){var c=l;c.style.cssText+=Object.entries(s).reduce(function(h,p){return"".concat(h).concat(p.join(":"),";")},"")}})})}var tw=function(e,t){if(!(e!=null&&e.startsWith(t)))return!1;var n=e[t.length];return n>="A"&&n<="Z"};function Vs(e,t,n){n===void 0&&(n=!1);var r={};return Object.entries(e).forEach(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1];if(!(l==="className"||l==="class")){if(tw(l,"show")&&tw(w4(l,"show"),t)!==n)l===Uj(t,"show")?r[l]=c:r[l.replace(new RegExp(_R(t)),"")]=c;else if(!tw(l,"show")&&tw(l,t)!==n){var h=w4(l,t);h==="filter"&&typeof c=="function"||(r[h]=c)}}}),r}function wm(e,t){return Object.entries(e).reduce(function(n,r){var i=(0,se.CR)(r,2),s=i[0],l=i[1];return s.startsWith("show")?n["show".concat(t).concat(s.slice(4))]=l:n["".concat(t).concat(_R(s))]=l,n},{})}function xg(e,t){t===void 0&&(t=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(e).forEach(function(s){var l=(0,se.CR)(s,2),c=l[0],h=l[1];t.includes(c)||(n.indexOf(c)!==-1?i[c]=h:r[c]=h)}),[r,i]}function $0(e,t){return tp(e)?e.apply(void 0,(0,se.ev)([],(0,se.CR)(t),!1)):e}function nw(e,t){return e.style.opacity||(e.style.opacity=1),Bv(e,{opacity:0},t)}var Vj=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function Hj(e){return Vj.includes(e)}function A4(e){var t={};for(var n in e)Hj(n)&&(t[n]=e[n]);return t}var Sb=X0({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function O4(e){return e.reduce(function(t,n,r){return t.push((0,se.ev)([r===0?"M":"L"],(0,se.CR)(n),!1)),t},[])}function Wj(e,t,n){var r=t.connect,i=r===void 0?"line":r,s=t.center;if(i==="line")return O4(e);if(!s)return[];var l=O2(e[0],s),c=n?0:1;return e.reduce(function(h,p,v){return v===0?h.push((0,se.ev)(["M"],(0,se.CR)(p),!1)):h.push((0,se.ev)(["A",l,l,0,0,c],(0,se.CR)(p),!1)),h},[])}function bR(e,t,n){return t.type==="surround"?Wj(e,t,n):O4(e)}function Gj(e,t,n){var r=n.type,i=n.connect,s=n.center,l=n.closed,c=l?[["Z"]]:[],h=(0,se.CR)([bR(e,n),bR(t.slice().reverse(),n,!0)],2),p=h[0],v=h[1],y=(0,se.CR)([e[0],t.slice(-1)[0]],2),b=y[0],w=y[1],R=function(z,H){return[p,z,v,H,c].flat()};if(i==="line"||r==="surround")return R([(0,se.ev)(["L"],(0,se.CR)(w),!1)],[(0,se.ev)(["L"],(0,se.CR)(b),!1)]);if(!s)throw new Error("Arc grid need to specified center");var M=(0,se.CR)([O2(w,s),O2(b,s)],2),I=M[0],N=M[1];return R([(0,se.ev)(["A",I,I,0,0,1],(0,se.CR)(w),!1),(0,se.ev)(["L"],(0,se.CR)(w),!1)],[(0,se.ev)(["A",N,N,0,0,0],(0,se.CR)(b),!1),(0,se.ev)(["L"],(0,se.CR)(b),!1)])}function Zj(e,t,n,r){var i=n.animate,s=n.isBillboard,l=t.map(function(c,h){return{id:c.id||"grid-line-".concat(h),d:bR(c.points,n)}});return e.selectAll(Sb.line.class).data(l,function(c){return c.id}).join(function(c){return c.append("path").each(function(h,p){var v=$0(A4((0,se.pi)({d:h.d},r)),[h,p,l]);this.attr((0,se.pi)({class:Sb.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:s},v))})},function(c){return c.transition(function(h,p){var v=$0(A4((0,se.pi)({d:h.d},r)),[h,p,l]);return Bv(this,v,i.update)})},function(c){return c.transition(function(){var h=this,p=nw(this,i.exit);return xb(p,function(){return h.remove()}),p})}).transitions()}function Xj(e,t,n){var r=n.animate,i=n.connect,s=n.areaFill;if(t.length<2||!s||!i)return[];for(var l=Array.isArray(s)?s:[s,"transparent"],c=function(R){return l[R%l.length]},h=[],p=0;p<t.length-1;p++){var v=(0,se.CR)([t[p].points,t[p+1].points],2),y=v[0],b=v[1],w=Gj(y,b,n);h.push({d:w,fill:c(p)})}return e.selectAll(Sb.region.class).data(h,function(R,M){return M}).join(function(R){return R.append("path").each(function(M,I){var N=$0(M,[M,I,h]);this.attr(N)}).attr("className",Sb.region.name)},function(R){return R.transition(function(M,I){var N=$0(M,[M,I,h]);return Bv(this,N,r.update)})},function(R){return R.transition(function(){var M=this,I=nw(this,r.exit);return xb(I,function(){return M.remove()}),I})}).transitions()}function $j(e){var t=e.data,n=t===void 0?[]:t,r=e.closed;return r?n.map(function(i){var s=i.points,l=(0,se.CR)(s,1),c=l[0];return(0,se.pi)((0,se.pi)({},i),{points:(0,se.ev)((0,se.ev)([],(0,se.CR)(s),!1),[c],!1)})}):n}var Yj=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.type,s=n.center,l=n.areaFill,c=n.closed,h=(0,se._T)(n,["type","center","areaFill","closed"]),p=$j(n),v=us(r).maybeAppendByClassName(Sb.lineGroup,"g"),y=us(r).maybeAppendByClassName(Sb.regionGroup,"g"),b=Zj(v,p,n,h),w=Xj(y,p,n);return(0,se.ev)((0,se.ev)([],(0,se.CR)(b),!1),(0,se.CR)(w),!1)},t}(vh),fl=function(e,t,n){for(var r=0,i=u(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e},Kj=function(e,t){return function(n){return e*(1-n)+t*n}};function qj(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var s=new Array(r),l=new Array(n),c=0;for(c=0;c<r;++c)s[c]=xR(e[c],t[c]);for(;c<n;++c)l[c]=t[c];for(c=0;c<r;++c)l[c]=s[c](i);return l}}function Qj(e,t){e===void 0&&(e={}),t===void 0&&(t={});var n={},r={};return Object.entries(t).forEach(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1];l in e?n[l]=xR(e[l],c):r[l]=c}),function(i){return Object.entries(n).forEach(function(s){var l=(0,se.CR)(s,2),c=l[0],h=l[1];return r[c]=h(i)}),r}}function xR(e,t){return typeof e=="number"&&typeof t=="number"?Kj(e,t):Array.isArray(e)&&Array.isArray(t)?qj(e,t):typeof e=="object"&&typeof t=="object"?Qj(e,t):function(n){return e}}function Jj(e,t,n,r){if(!r)return e.attr("__keyframe_data__",n),null;var i=r.duration,s=i===void 0?0:i,l=xR(t,n),c=Math.ceil(+s/16),h=new Array(c).fill(0).map(function(p,v,y){return{__keyframe_data__:l(v/(y.length-1))}});return e.animate(h,(0,se.pi)({fill:"both"},r))}function K_(e){return typeof e=="function"?e():u(e)||(0,Gl.Z)(e)?new mR({style:{text:String(e)}}):e}function ER(e,t,n){n===void 0&&(n=!1);var r=e.getBBox(),i=r.width,s=r.height,l=t/Math.max(i,s);return n&&(e.style.transform="scale(".concat(l,")")),l}function C4(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n}function R4(e,t){return Object.fromEntries(Object.entries(e).map(function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1];return[i,$0(s,t)]}))}function Rde(e){if(e.type==="linear"){var t=e.startPos,n=e.endPos;return __spreadArray(__spreadArray([],__read(t),!1),__read(n),!1)}var r=e.startAngle,i=e.endAngle,s=e.center,l=e.radius;return __spreadArray(__spreadArray([r,i],__read(s),!1),[l],!1)}function SR(e,t){return t&&tp(t)?e.filter(t):e}function M4(e,t){var n=t.startAngle,r=t.endAngle;return(r-n)*e+n}function rw(e,t){if(t.type==="linear"){var n=(0,se.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,se.CR)(t.endPos,2),l=s[0],c=s[1],h=(0,se.CR)([l-r,c-i],2),p=h[0],v=h[1];return S4([p,v])}var y=Eb(M4(e,t));return[-Math.sin(y),Math.cos(y)]}function TR(e,t,n){var r=rw(e,n);return kj(r,t!=="positive")}function C2(e,t){return TR(e,t.labelDirection,t)}function eV(e,t){var n=(0,se.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,se.CR)(t.endPos,2),l=s[0],c=s[1],h=(0,se.CR)([l-r,c-i],2),p=h[0],v=h[1];return[r+p*e,i+v*e]}function tV(e,t){var n=t.radius,r=(0,se.CR)(t.center,2),i=r[0],s=r[1],l=Eb(M4(e,t));return[i+n*Math.cos(l),s+n*Math.sin(l)]}function iw(e,t){return t.type==="linear"?eV(e,t):tV(e,t)}function P4(e){return rw(0,e)[1]===0}function I4(e){return rw(0,e)[0]===0}function L4(e,t){return t-e===360}function D4(e,t,n,r,i){var s=t-e,l=(0,se.CR)([i,i],2),c=l[0],h=l[1],p=(0,se.CR)([Eb(e),Eb(t)],2),v=p[0],y=p[1],b=function(Ge){return[n+i*Math.cos(Ge),r+i*Math.sin(Ge)]},w=(0,se.CR)(b(v),2),R=w[0],M=w[1],I=(0,se.CR)(b(y),2),N=I[0],z=I[1];if(L4(e,t)){var H=(y+v)/2,X=(0,se.CR)(b(H),2),$=X[0],te=X[1];return[["M",R,M],["A",c,h,0,1,0,$,te],["A",c,h,0,1,0,N,z]]}var fe=s>180?1:0,ye=e>t?0:1,Le=!1;return Le?"M".concat(n,",").concat(r,",L").concat(R,",").concat(M,",A").concat(c,",").concat(h,",0,").concat(fe,",").concat(ye,",").concat(N,",").concat(z,",L").concat(n,",").concat(r):"M".concat(R,",").concat(M,",A").concat(c,",").concat(h,",0,").concat(fe,",").concat(ye,",").concat(N,",").concat(z)}function nV(e){var t=e.attributes,n=t.startAngle,r=t.endAngle,i=t.center,s=t.radius;return(0,se.ev)((0,se.ev)([n,r],(0,se.CR)(i),!1),[s],!1)}function rV(e,t,n,r){var i=t.startAngle,s=t.endAngle,l=t.center,c=t.radius;return e.selectAll(su.line.class).data([{d:D4.apply(void 0,(0,se.ev)((0,se.ev)([i,s],(0,se.CR)(l),!1),[c],!1))}],function(h,p){return p}).join(function(h){return h.append("path").attr("className",su.line.name).styles(t).styles({d:function(p){return p.d}})},function(h){return h.transition(function(){var p=this,v=Jj(this,nV(this),(0,se.ev)((0,se.ev)([i,s],(0,se.CR)(l),!1),[c],!1),r.update);if(v){var y=function(){var b=fl(p.attributes,"__keyframe_data__");p.style.d=D4.apply(void 0,(0,se.ev)([],(0,se.CR)(b),!1))};v.onframe=y,v.onfinish=y}return v}).styles(t)},function(h){return h.remove()}).styles(n).transitions()}function iV(e,t){var n=t.truncRange,r=t.truncShape,i=t.lineExtension}function oV(e,t,n){n===void 0&&(n=[0,0]);var r=(0,se.CR)([e,t,n],3),i=(0,se.CR)(r[0],2),s=i[0],l=i[1],c=(0,se.CR)(r[1],2),h=c[0],p=c[1],v=(0,se.CR)(r[2],2),y=v[0],b=v[1],w=(0,se.CR)([h-s,p-l],2),R=w[0],M=w[1],I=Math.sqrt(Math.pow(R,2)+Math.pow(M,2)),N=(0,se.CR)([-y/I,b/I],2),z=N[0],H=N[1];return[z*R,z*M,H*R,H*M]}function N4(e){var t=(0,se.CR)(e,2),n=(0,se.CR)(t[0],2),r=n[0],i=n[1],s=(0,se.CR)(t[1],2),l=s[0],c=s[1];return{x1:r,y1:i,x2:l,y2:c}}function aV(e,t,n,r){var i=t.showTrunc,s=t.startPos,l=t.endPos,c=t.truncRange,h=t.lineExtension,p=(0,se.CR)([s,l],2),v=(0,se.CR)(p[0],2),y=v[0],b=v[1],w=(0,se.CR)(p[1],2),R=w[0],M=w[1],I=(0,se.CR)(h?oV(s,l,h):new Array(4).fill(0),4),N=I[0],z=I[1],H=I[2],X=I[3],$=function(Ct){return e.selectAll(su.line.class).data(Ct,function(Lt,Tn){return Tn}).join(function(Lt){return Lt.append("line").attr("className",function(Tn){return"".concat(su.line.name," ").concat(Tn.className)}).styles(n).transition(function(Tn){return Bv(this,N4(Tn.line),!1)})},function(Lt){return Lt.styles(n).transition(function(Tn){var Fn=Tn.line;return Bv(this,N4(Fn),r.update)})},function(Lt){return Lt.remove()}).transitions()};if(!i||!c)return $([{line:[[y+N,b+z],[R+H,M+X]],className:su.line.name}]);var te=(0,se.CR)(c,2),fe=te[0],ye=te[1],Le=R-y,Ge=M-b,Qe=(0,se.CR)([y+Le*fe,b+Ge*fe],2),gt=Qe[0],qe=Qe[1],lt=(0,se.CR)([y+Le*ye,b+Ge*ye],2),ft=lt[0],pt=lt[1],Zt=$([{line:[[y+N,b+z],[gt,qe]],className:su.lineFirst.name},{line:[[ft,pt],[R+H,M+X]],className:su.lineSecond.name}]);return iV(e,t),Zt}function sV(e,t,n,r){var i=n.showArrow,s=n.showTrunc,l=n.lineArrow,c=n.lineArrowOffset,h=n.lineArrowSize,p;if(t==="arc"?p=e.select(su.line.class):s?p=e.select(su.lineSecond.class):p=e.select(su.line.class),!i||!l||n.type==="arc"&&L4(n.startAngle,n.endAngle)){var v=p.node();v&&(v.style.markerEnd=void 0);return}var y=K_(l);y.attr(r),ER(y,h,!0),p.style("markerEnd",y).style("markerEndOffset",-c)}function lV(e,t,n){var r=t.type,i,s=Vs(t,"line");return r==="linear"?i=aV(e,t,C4(s,"arrow"),n):i=rV(e,t,C4(s,"arrow"),n),sV(e,r,t,s),i}function uV(e,t){return TR(e,t.gridDirection,t)}function B4(e){var t=e.type,n=e.gridCenter;return t==="linear"?n:n||e.center}function cV(e,t){var n=t.gridLength;return e.map(function(r,i){var s=r.value,l=(0,se.CR)(iw(s,t),2),c=l[0],h=l[1],p=(0,se.CR)(bg(uV(s,t),n),2),v=p[0],y=p[1];return{id:i,points:[[c,h],[c+v,h+y]]}})}function fV(e,t){var n=t.gridControlAngles,r=B4(t);if(!r)throw new Error("grid center is not provide");if(e.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=(0,se.CR)(r,2),s=i[0],l=i[1];return e.map(function(c,h){var p=c.value,v=(0,se.CR)(iw(p,t),2),y=v[0],b=v[1],w=(0,se.CR)([y-s,b-l],2),R=w[0],M=w[1],I=[];return n.forEach(function(N){var z=Eb(N),H=(0,se.CR)([Math.cos(z),Math.sin(z)],2),X=H[0],$=H[1],te=R*X-M*$+s,fe=R*$+M*X+l;I.push([te,fe])}),{points:I,id:h}})}function hV(e,t,n,r){var i=Vs(n,"grid"),s=i.type,l=i.areaFill,c=B4(n),h=SR(t,n.gridFilter),p=s==="segment"?cV(h,n):fV(h,n),v=(0,se.pi)((0,se.pi)({},i),{center:c,areaFill:tp(l)?h.map(function(y,b){return $0(l,[y,b,h])}):l,animate:r,data:p});return e.selectAll(su.grid.class).data([1]).join(function(y){return y.append(function(){return new Yj({style:v})}).attr("className",su.grid.name)},function(y){return y.transition(function(){return this.update(v)})},function(y){return y.remove()}).transitions()}function kh(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&e===t||i&&e===n?!0:e>t&&e<n}function dV(e){var t,n,r,i=e||1;function s(c,h){++t>i&&(r=n,l(1),++t),n[c]=h}function l(c){t=0,n=Object.create(null),c||(r=Object.create(null))}return l(),{clear:l,has:function(c){return n[c]!==void 0||r[c]!==void 0},get:function(c){var h=n[c];if(h!==void 0)return h;if((h=r[c])!==void 0)return s(c,h),h},set:function(c,h){n[c]!==void 0?n[c]=h:s(c,h)}}}var pV=function(e,t,n){if(n===void 0&&(n=128),!tp(e))throw new TypeError("Expected a function");var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var l=t?t.apply(this,i):i[0],c=r.cache;if(c.has(l))return c.get(l);var h=e.apply(this,i);return c.set(l,h),h};return r.cache=dV(n),r},ow,wR;function Mde(e){wR=e}var vV=pV(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,s=t.fontStyle,l=t.fontVariant;return wR?wR(e,n):(ow||(ow=qr.offscreenCanvasCreator.getOrCreateContext(void 0)),ow.font=[s,l,i,"".concat(n,"px"),r].join(" "),ow.measureText(e).width)},function(e,t){return[e,Object.values(t||F4(e)).join()].join("")},4096),F4=function(e){var t=e.style.fontFamily||"sans-serif",n=e.style.fontWeight||"normal",r=e.style.fontStyle||"normal",i=e.style.fontVariant,s=e.style.fontSize;return s=typeof s=="object"?s.value:s,{fontSize:s,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i}};function k4(e){return e.nodeName==="text"?e:e.nodeName==="g"&&e.children.length===1&&e.children[0].nodeName==="text"?e.children[0]:null}function z4(e,t){var n=k4(e);n&&n.attr(t)}function AR(e,t,n){n===void 0&&(n="..."),z4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n})}function mV(e,t,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),z4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:n,textBaseline:r})}function gV(e,t,n){var r=e.getBBox(),i=r.width,s=r.height,l=(0,se.CR)([t,n].map(function(p,v){var y;return p.includes("%")?parseFloat(((y=p.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||y===void 0?void 0:y[0])||"0")/100*(v===0?i:s):p}),2),c=l[0],h=l[1];return[c,h]}function U4(e,t){if(t)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=t.replace(n,function(i,s,l){return"translate(".concat(gV(e,s,l),")")});e.attr("transform",r)}catch(i){}}var j4=function(e){return e!==void 0&&e!=null&&!Number.isNaN(e)};function zh(e){if((0,Gl.Z)(e))return[e,e,e,e];if(jo(e)){var t=e.length;if(t===1)return[e[0],e[0],e[0],e[0]];if(t===2)return[e[0],e[1],e[0],e[1]];if(t===3)return[e[0],e[1],e[2],e[1]];if(t===4)return e}return[0,0,0,0]}var OR=function(){function e(t,n,r,i){this.set(t,n,r,i)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(t,n,r){var i=this,s=i.x1,l=i.y1,c=i.x2,h=i.y2,p=Math.cos(t),v=Math.sin(t),y=n-n*p+r*v,b=r-n*v-r*p,w=[[p*s-v*h+y,v*s+p*h+b],[p*c-v*h+y,v*c+p*h+b],[p*s-v*l+y,v*s+p*l+b],[p*c-v*l+y,v*c+p*l+b]];return w},e.prototype.set=function(t,n,r,i){return r<t?(this.x2=t,this.x1=r):(this.x1=t,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},e.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},e}();function aw(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var r=e.getBounds(),i=(0,se.CR)(r.min,2),s=i[0],l=i[1],c=(0,se.CR)(r.max,2),h=c[0],p=c[1],v=e.getBBox(),y=v.width,b=v.height,w=b,R=0,M=0,I=s,N=l,z=k4(e);if(z){w-=1.5;var H=z.style.textAlign,X=z.style.textBaseline;H==="center"?I=(s+h)/2:(H==="right"||H==="end")&&(I=h),X==="middle"?N=(l+p)/2:X==="bottom"&&(N=p)}var $=(0,se.CR)(zh(t),4),te=$[0],fe=te===void 0?0:te,ye=$[1],Le=ye===void 0?0:ye,Ge=$[2],Qe=Ge===void 0?fe:Ge,gt=$[3],qe=gt===void 0?Le:gt,lt=new OR((R+=s)-qe,(M+=l)-fe,R+y+Le,M+w+Qe);return e.setEulerAngles(n),lt.rotatedPoints(Eb(n),I,N)}function R2(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1])}function M2(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return r===0?0:r<0?2:1}function yV(e,t){var n=M2(e[0],e[1],t[0]),r=M2(e[0],e[1],t[1]),i=M2(t[0],t[1],e[0]),s=M2(t[0],t[1],e[1]);return!!(n!==r&&i!==s||n===0&&R2(e,t[0])||r===0&&R2(e,t[1])||i===0&&R2(t,e[0])||s===0&&R2(t,e[1]))}function _V(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],i=0,s=0;do{var l=[e[s],e[(s+1)%n]];if(yV(l,r)){if(M2(l[0],t,l[1])===0)return R2(l,t);i++}s=(s+1)%n}while(s!==0);return!!(i&1)}function bV(e,t){return t.every(function(n){return _V(e,n)})}function xV(e,t,n){var r=e.x1,i=e.x2,s=e.y1,l=e.y2,c=[[r,s],[i,s],[i,l],[r,l]],h=aw(t,n);return bV(c,h)}function V4(e,t){var n=(0,se.CR)(e,4),r=n[0],i=n[1],s=n[2],l=n[3],c=(0,se.CR)(t,4),h=c[0],p=c[1],v=c[2],y=c[3],b=s-r,w=l-i,R=v-h,M=y-p,I=b*M-R*w;if(I===0)return!1;var N=I>0,z=r-h,H=i-p,X=b*H-w*z;if(X<0===N)return!1;var $=R*H-M*z;return!($<0===N||X>I===N||$>I===N)}function H4(e,t){var n=[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]];return n.some(function(r){return V4(t,r)})}var Pde={lineToLine:V4,intersectBoxLine:H4,getBounds:aw};function EV(e,t,n){var r,i,s=aw(e,n).flat(1),l=aw(t,n).flat(1),c=[[s[0],s[1],s[2],s[3]],[s[0],s[1],s[4],s[5]],[s[4],s[5],s[6],s[7]],[s[2],s[3],s[6],s[7]]];try{for(var h=(0,se.XA)(c),p=h.next();!p.done;p=h.next()){var v=p.value;if(H4(l,v))return!0}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return!1}function SV(e,t){var n=e.type,r=e.labelDirection,i=e.crossSize;if(!i)return!1;if(n==="arc"){var s=e.center,l=e.radius,c=(0,se.CR)(s,2),h=c[0],p=c[1],v=r==="negative"?0:i,y=-l-v,b=l+v,w=(0,se.CR)(zh(t),4),R=w[0],M=w[1],I=w[2],N=w[3];return new OR(h+y-N,p+y-R,h+b+M,p+b+I)}var z=(0,se.CR)(e.startPos,2),H=z[0],X=z[1],$=(0,se.CR)(e.endPos,2),te=$[0],fe=$[1],ye=(0,se.CR)(I4(e)?[-t,0,t,0]:[0,t,0,-t],4),Le=ye[0],Ge=ye[1],Qe=ye[2],gt=ye[3],qe=C2(0,e),lt=bg(qe,i),ft=new OR(H,X,te,fe);return ft.x1+=gt,ft.y1+=Le,ft.x2+=Ge+lt[0],ft.y2+=Qe+lt[1],ft}function sw(e,t,n){var r,i,s=t.crossPadding,l=new Set,c=null,h=SV(t,s),p=function(R){return h?xV(h,R):!0},v=function(R,M){return!R||!R.firstChild?!0:!EV(R.firstChild,M.firstChild,zh(n))};try{for(var y=(0,se.XA)(e),b=y.next();!b.done;b=y.next()){var w=b.value;p(w)?!c||v(c,w)?c=w:(l.add(c),l.add(w)):l.add(w)}}catch(R){r={error:R}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return Array.from(l)}function CR(e,t){return t===void 0&&(t={}),(0,ya.Z)(e)?0:typeof e=="number"?e:Math.floor(vV(e,t))}function TV(e,t,n,r){if(!(e.length<=1)){var i=t.suffix,s=i===void 0?"...":i,l=t.minLength,c=t.maxLength,h=c===void 0?1/0:c,p=t.step,v=p===void 0?" ":p,y=t.margin,b=y===void 0?[0,0,0,0]:y,w=F4(r.getTextShape(e[0])),R=CR(v,w),M=l?CR(l,w):R,I=CR(h,w);((0,ya.Z)(I)||I===1/0)&&(I=Math.max.apply(null,e.map(function(lt){return lt.getBBox().width})));for(var N=e.slice(),z=(0,se.CR)(b,4),H=z[0],X=H===void 0?0:H,$=z[1],te=$===void 0?0:$,fe=z[2],ye=fe===void 0?X:fe,Le=z[3],Ge=Le===void 0?te:Le,Qe=function(lt){if(N.forEach(function(ft){r.ellipsis(r.getTextShape(ft),lt,s)}),N=sw(e,n,b),N.length<1)return{value:void 0}},gt=I;gt>M+R;gt-=R){var qe=Qe(gt);if(typeof qe=="object")return qe.value}}}function Ide(e){var t=e&&e.getRenderBounds();if(!t)return{width:0,height:0};var n=t.getMax(),r=t.getMin();return{width:n[0]-r[0],height:n[1]-r[1]}}function W4(e){var t=e.getLocalBounds(),n=t.min,r=t.max,i=(0,se.CR)([n,r],2),s=(0,se.CR)(i[0],2),l=s[0],c=s[1],h=(0,se.CR)(i[1],2),p=h[0],v=h[1];return{x:l,y:c,width:p-l,height:v-c,left:l,bottom:v,top:c,right:p}}function Lde(e,t){var n=select(e).append("text").node();return n.attr(__assign(__assign({},t),{visibility:"hidden"})),n}function wV(e,t){var n=(0,se.CR)(e,2),r=n[0],i=n[1],s=(0,se.CR)(t,2),l=s[0],c=s[1];return r!==l&&i===c}function Dde(e,t){var n=__read(e,2),r=n[0],i=n[1],s=__read(t,2),l=s[0],c=s[1];return r===l&&i!==c}function AV(e,t){var n,r,i=t.attributes;try{for(var s=(0,se.XA)(Object.entries(i)),l=s.next();!l.done;l=s.next()){var c=(0,se.CR)(l.value,2),h=c[0],p=c[1];h!=="id"&&h!=="className"&&e.attr(h,p)}}catch(v){n={error:v}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var OV={parity:function(e,t){var n=t.seq,r=n===void 0?2:n;return e.filter(function(i,s){return s%r?(wy(i),!1):!0})}},CV=function(e){return e.filter(j4)};function RV(e,t,n,r){var i=e.length,s=t.keepHeader,l=t.keepTail;if(!(i<=1||i===2&&s&&l)){var c=OV.parity,h=function(H){return H.forEach(r.show),H},p=2,v=e.slice(),y=e.slice(),b=Math.min.apply(Math,(0,se.ev)([1],(0,se.CR)(e.map(function(H){return H.getBBox().width})),!1));if(n.type==="linear"&&(P4(n)||I4(n))){var w=W4(e[0]).left,R=W4(e[i-1]).right,M=Math.abs(R-w)||1;p=Math.max(Math.floor(i*b/M),p)}var I,N;for(s&&(I=v.splice(0,1)[0]),l&&(N=v.splice(-1,1)[0],v.reverse()),h(v);p<e.length&&sw(CV(N?(0,se.ev)((0,se.ev)([N],(0,se.CR)(y),!1),[I],!1):(0,se.ev)([I],(0,se.CR)(y),!1)),n,t==null?void 0:t.margin).length;){if(N&&!I&&p%2===0){var z=v.splice(0,1);z.forEach(r.hide)}else if(N&&I){var z=v.splice(0,1);z.forEach(r.hide)}y=c(h(v),{seq:p}),p++}}}function MV(e,t,n,r){var i,s,l=t.optionalAngles,c=l===void 0?[0,45,90]:l,h=t.margin,p=t.recoverWhenFailed,v=p===void 0?!0:p,y=e.map(function(N){return N.getLocalEulerAngles()}),b=function(){return sw(e,n,h).length<1},w=function(N){return e.forEach(function(z,H){var X=Array.isArray(N)?N[H]:N;r.rotate(z,+X)})};try{for(var R=(0,se.XA)(c),M=R.next();!M.done;M=R.next()){var I=M.value;if(w(I),b())return}}catch(N){i={error:N}}finally{try{M&&!M.done&&(s=R.return)&&s.call(R)}finally{if(i)throw i.error}}v&&w(y)}function PV(e){var t=e.type,n=e.labelDirection;return t==="linear"&&P4(e)?n==="negative"?"bottom":"top":"middle"}function IV(e,t,n,r){var i=t.wordWrapWidth,s=i===void 0?50:i,l=t.maxLines,c=l===void 0?3:l,h=t.recoverWhenFailed,p=h===void 0?!0:h,v=t.margin,y=v===void 0?[0,0,0,0]:v,b=e.map(function(z){return z.attr("maxLines")||1}),w=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(b),!1)),R=function(){return sw(e,n,y).length<1},M=PV(n),I=function(z){return e.forEach(function(H,X){var $=Array.isArray(z)?z[X]:z;r.wrap(H,s,$,M)})};if(!(w>c)){for(var N=w;N<=c;N++)if(I(N),R())return;p&&I(b)}}var LV=new Map([["hide",RV],["rotate",MV],["ellipsis",TV],["wrap",IV]]);function DV(e,t,n){return t.labelOverlap.length<1?!1:n==="hide"?!Pj(e[0]):n==="rotate"?!e.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?e.filter(function(r){return r.querySelector("text")}).length>1:!0}function NV(e,t,n){var r=t.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(s){var l=s.type,c=LV.get(l);DV(e,t,l)&&(c==null||c(e,s,t,n))})}function BV(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(r){return r==="positive"?-1:1};return e.reduce(function(r,i){return r*n(i)},1)}function G4(e){for(var t=e;t<0;)t+=360;return Math.round(t%360)}function RR(e,t){var n=(0,se.CR)(e,2),r=n[0],i=n[1],s=(0,se.CR)(t,2),l=s[0],c=s[1],h=(0,se.CR)([r*l+i*c,r*c-i*l],2),p=h[0],v=h[1];return Math.atan2(v,p)}function FV(e){var t=(e+360)%180;return kh(t,-90,90)||(t+=180),t}function kV(e,t,n){var r,i=n.labelAlign,s=(r=t.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(s)return t.getLocalEulerAngles();var l=0,c=C2(e.value,n),h=rw(e.value,n);return i==="horizontal"?0:(i==="perpendicular"?l=RR([1,0],c):l=RR([h[0]<0?-1:1,0],h),FV(T4(l)))}function Z4(e,t,n){var r=n.type,i=n.labelAlign,s=C2(e,n),l=G4(t),c=G4(T4(RR([1,0],s))),h="center",p="middle";return r==="linear"?[90,270].includes(c)&&l===0?(h="center",p=s[1]===1?"top":"bottom"):!(c%180)&&[90,270].includes(l)?h="center":c===0?(kh(l,0,90,!1,!0)||kh(l,0,90)||kh(l,270,360))&&(h="start"):c===90?kh(l,0,90,!1,!0)?h="start":(kh(l,90,180)||kh(l,270,360))&&(h="end"):c===270?kh(l,0,90,!1,!0)?h="end":(kh(l,90,180)||kh(l,270,360))&&(h="start"):c===180&&(l===90?h="start":(kh(l,0,90)||kh(l,270,360))&&(h="end")):i==="parallel"?kh(c,0,180,!0)?p="top":p="bottom":i==="horizontal"?kh(c,90,270,!1)?h="end":(kh(c,270,360,!1)||kh(c,0,90))&&(h="start"):i==="perpendicular"&&(kh(c,90,270)?h="end":h="start"),{textAlign:h,textBaseline:p}}function zV(e,t,n){t.setLocalEulerAngles(e);var r=t.__data__.value,i=Z4(r,e,n),s=t.querySelector(su.labelItem.class);s&&$4(s,i)}function X4(e,t,n){var r=n.showTick,i=n.tickLength,s=n.tickDirection,l=n.labelDirection,c=n.labelSpacing,h=t.indexOf(e),p=$0(c,[e,h,t]),v=(0,se.CR)([C2(e.value,n),BV(l,s)],2),y=v[0],b=v[1],w=b===1?$0(r?i:0,[e,h,t]):0,R=(0,se.CR)(A2(bg(y,p+w),iw(e.value,n)),2),M=R[0],I=R[1];return{x:M,y:I}}function UV(e,t,n,r){var i=r.labelFormatter,s=tp(i)?function(){return K_($0(i,[e,t,n,C2(e.value,r)]))}:function(){return K_(e.label||"")};return s}function $4(e,t){e.nodeName==="text"&&e.attr(t)}function Y4(e){NV(this.node().childNodes,e,{hide:wy,show:w2,rotate:function(t,n){zV(+n,t,e)},ellipsis:function(t,n,r){t&&AR(t,n||1/0,r)},wrap:function(t,n,r){t&&mV(t,n,r)},getTextShape:function(t){return t.querySelector("text")}})}function K4(e,t,n,r,i){var s=n.indexOf(t),l=us(e).append(UV(t,s,n,i)).attr("className",su.labelItem.name).node(),c=(0,se.CR)(xg(R4(r,[t,s,n])),2),h=c[0],p=c[1],v=p.transform,y=(0,se._T)(p,["transform"]);U4(l,v);var b=kV(t,l,i);return l.getLocalEulerAngles()||l.setLocalEulerAngles(b),$4(l,(0,se.pi)((0,se.pi)({},Z4(t.value,b,i)),h)),e.attr(y),l}function jV(e,t,n,r){var i=SR(t,n.labelFilter),s=Vs(n,"label");return e.selectAll(su.label.class).data(i,function(l,c){return c}).join(function(l){return l.append("g").attr("className",su.label.name).transition(function(c){K4(this,c,t,s,n);var h=X4(c,t,n),p=h.x,v=h.y;return this.style.transform="translate(".concat(p,", ").concat(v,")"),null}).call(function(){Y4.call(e,n)})},function(l){return l.transition(function(c){var h=this.querySelector(su.labelItem.class),p=K4(this,c,t,s,n),v=Cj(h,p,r.update),y=X4(c,t,n),b=y.x,w=y.y,R=Bv(this,{transform:"translate(".concat(b,", ").concat(w,")")},r.update);return(0,se.ev)((0,se.ev)([],(0,se.CR)(v),!1),[R],!1)}).call(function(c){var h=fl(c,"_transitions").flat().filter(j4);Aj(h,function(){Y4.call(e,n)})})},function(l){return l.transition(function(){var c=this,h=nw(this.childNodes[0],r.exit);return xb(h,function(){return us(c).remove()}),h})}).transitions()}function q4(e,t){return TR(e,t.tickDirection,t)}function VV(e,t){var n=(0,se.CR)(e,2),r=n[0],i=n[1];return[[0,0],[r*t,i*t]]}function HV(e,t,n,r,i){var s=i.tickLength,l=(0,se.CR)(VV(r,$0(s,[e,t,n])),2),c=(0,se.CR)(l[0],2),h=c[0],p=c[1],v=(0,se.CR)(l[1],2),y=v[0],b=v[1];return{x1:h,x2:y,y1:p,y2:b}}function WV(e,t,n,r,i){var s=i.tickFormatter,l=q4(t.value,i),c="line";return tp(s)&&(c=function(){return $0(s,[t,n,r,l])}),e.append(c).attr("className",su.tickItem.name)}function GV(e,t,n,r,i,s,l){var c=q4(e.value,s),h=HV(e,t,n,c,s),p=h.x1,v=h.x2,y=h.y1,b=h.y2,w=(0,se.CR)(xg(R4(l,[e,t,n,c])),2),R=w[0],M=w[1];r.node().nodeName==="line"&&r.styles((0,se.pi)({x1:p,x2:v,y1:y,y2:b},R)),i.attr(M),r.styles(R)}function Q4(e,t,n,r,i,s){var l=WV(us(this),e,t,n,r);GV(e,t,n,l,this,r,i);var c=(0,se.CR)(iw(e.value,r),2),h=c[0],p=c[1];return Bv(this,{transform:"translate(".concat(h,", ").concat(p,")")},s)}function ZV(e,t,n,r){var i=SR(t,n.tickFilter),s=Vs(n,"tick");return e.selectAll(su.tick.class).data(i,function(l){return l.id||l.label}).join(function(l){return l.append("g").attr("className",su.tick.name).transition(function(c,h){return Q4.call(this,c,h,i,n,s,!1)})},function(l){return l.transition(function(c,h){return this.removeChildren(),Q4.call(this,c,h,i,n,s,r.update)})},function(l){return l.transition(function(){var c=this,h=nw(this.childNodes[0],r.exit);return xb(h,function(){return c.remove()}),h})}).transitions()}var Zu=function(){function e(t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=n,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},e.prototype.isPointIn=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e}();function Nde(e){var t=e.getRenderBounds(),n=__read(t.min,2),r=n[0],i=n[1],s=__read(t.max,2),l=s[0],c=s[1],h=l-r,p=c-i;return new Zu(r,i,h,p)}var J4=X0({text:"text"},"title");function lw(e){return/\S+-\S+/g.test(e)?e.split("-").map(function(t){return t[0]}):e.length>2?[e[0]]:e.split("")}function XV(e,t){var n=e.attributes,r=n.position,i=n.spacing,s=n.inset,l=n.text,c=e.getBBox(),h=t.getBBox(),p=lw(r),v=(0,se.CR)(zh(l?i:0),4),y=v[0],b=v[1],w=v[2],R=v[3],M=(0,se.CR)(zh(s),4),I=M[0],N=M[1],z=M[2],H=M[3],X=(0,se.CR)([R+b,y+w],2),$=X[0],te=X[1],fe=(0,se.CR)([H+N,I+z],2),ye=fe[0],Le=fe[1];if(p[0]==="l")return new Zu(c.x,c.y,h.width+c.width+$+ye,Math.max(h.height+Le,c.height));if(p[0]==="t")return new Zu(c.x,c.y,Math.max(h.width+ye,c.width),h.height+c.height+te+Le);var Ge=(0,se.CR)([t.attributes.width||h.width,t.attributes.height||h.height],2),Qe=Ge[0],gt=Ge[1];return new Zu(h.x,h.y,Qe+c.width+$+ye,gt+c.height+te+Le)}function $V(e,t){var n=Object.entries(t).reduce(function(r,i){var s=(0,se.CR)(i,2),l=s[0],c=s[1],h=e.node().attr(l);return h||(r[l]=c),r},{});e.styles(n)}function YV(e){var t,n,r,i,s=e,l=s.width,c=s.height,h=s.position,p=(0,se.CR)([+l/2,+c/2],2),v=p[0],y=p[1],b=(0,se.CR)([+v,+y,"center","middle"],4),w=b[0],R=b[1],M=b[2],I=b[3],N=lw(h);return N.includes("l")&&(t=(0,se.CR)([0,"start"],2),w=t[0],M=t[1]),N.includes("r")&&(n=(0,se.CR)([+l,"end"],2),w=n[0],M=n[1]),N.includes("t")&&(r=(0,se.CR)([0,"top"],2),R=r[0],I=r[1]),N.includes("b")&&(i=(0,se.CR)([+c,"bottom"],2),R=i[0],I=i[1]),{x:w,y:R,textAlign:M,textBaseline:I}}var eL=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return t.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,s=r.height,l=r.position,c=r.spacing,h=r.inset,p=n.querySelector(J4.text.class);if(!p)return new Zu(0,0,+i,+s);var v=p.getBBox(),y=v.width,b=v.height,w=(0,se.CR)(zh(c),4),R=w[0],M=w[1],I=w[2],N=w[3],z=(0,se.CR)([0,0,+i,+s],4),H=z[0],X=z[1],$=z[2],te=z[3],fe=lw(l);if(fe.includes("i"))return new Zu(H,X,$,te);fe.forEach(function(pt,Zt){var Ct,Lt,Tn,Fn;pt==="t"&&(Ct=(0,se.CR)(Zt===0?[b+I,+s-b-I]:[0,+s],2),X=Ct[0],te=Ct[1]),pt==="r"&&(Lt=(0,se.CR)([+i-y-N],1),$=Lt[0]),pt==="b"&&(Tn=(0,se.CR)([+s-b-R],1),te=Tn[0]),pt==="l"&&(Fn=(0,se.CR)(Zt===0?[y+M,+i-y-M]:[0,+i],2),H=Fn[0],$=Fn[1])});var ye=(0,se.CR)(zh(h),4),Le=ye[0],Ge=ye[1],Qe=ye[2],gt=ye[3],qe=(0,se.CR)([gt+Ge,Le+Qe],2),lt=qe[0],ft=qe[1];return new Zu(H+gt,X+Le,$-lt,te-ft)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new Zu(0,0,0,0)},t.prototype.render=function(n,r){var i=this,s=n.width,l=n.height,c=n.position,h=n.spacing,p=(0,se._T)(n,["width","height","position","spacing"]),v=(0,se.CR)(xg(p),1),y=v[0],b=YV(n),w=b.x,R=b.y,M=b.textAlign,I=b.textBaseline;Mp(!!p.text,us(r),function(N){i.title=N.maybeAppendByClassName(J4.text,"text").styles(y).call($V,{x:w,y:R,textAlign:M,textBaseline:I}).node()})},t}(vh);function KV(e,t,n){var r=n.titlePosition,i=r===void 0?"lb":r,s=n.titleSpacing,l=lw(i),c=e.node().getLocalBounds(),h=(0,se.CR)(c.min,2),p=h[0],v=h[1],y=(0,se.CR)(c.halfExtents,2),b=y[0],w=y[1],R=(0,se.CR)(t.node().getLocalBounds().halfExtents,2),M=R[0],I=R[1],N=(0,se.CR)([p+b,v+w],2),z=N[0],H=N[1],X=(0,se.CR)(zh(s),4),$=X[0],te=X[1],fe=X[2],ye=X[3];if(["start","end"].includes(i)&&n.type==="linear"){var Le=n.startPos,Ge=n.endPos,Qe=(0,se.CR)(i==="start"?[Le,Ge]:[Ge,Le],2),gt=Qe[0],qe=Qe[1],lt=S4([-qe[0]+gt[0],-qe[1]+gt[1]]),ft=(0,se.CR)(bg(lt,$),2),pt=ft[0],Zt=ft[1];return{x:gt[0]+pt,y:gt[1]+Zt}}return l.includes("t")&&(H-=w+I+$),l.includes("r")&&(z+=b+M+te),l.includes("l")&&(z-=b+M+ye),l.includes("b")&&(H+=w+I+fe),{x:z,y:H}}function qV(e,t,n){var r=e.getGeometryBounds().halfExtents,i=r[1]*2;if(t==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function tL(e,t,n,r,i){var s=Vs(r,"title"),l=(0,se.CR)(xg(s),2),c=l[0],h=l[1],p=h.transform,v=h.transformOrigin,y=(0,se._T)(h,["transform","transformOrigin"]);t.styles(y);var b=p||qV(e.node(),c.direction,c.position);e.styles((0,se.pi)((0,se.pi)({},c),{transformOrigin:v})),U4(e.node(),b);var w=KV(us(n._offscreen||n.querySelector(su.mainGroup.class)),t,r),R=w.x,M=w.y,I=Bv(t.node(),{transform:"translate(".concat(R,", ").concat(M,")")},i);return I}function QV(e,t,n,r){var i=n.titleText;return e.selectAll(su.title.class).data([{title:i}].filter(function(s){return!!s.title}),function(s,l){return s.title}).join(function(s){return s.append(function(){return K_(i)}).attr("className",su.title.name).transition(function(){return tL(us(this),e,t,n,r.enter)})},function(s){return s.transition(function(){return tL(us(this),e,t,n,r.update)})},function(s){return s.remove()}).transitions()}function nL(e,t,n,r){var i=e.showLine,s=e.showTick,l=e.showLabel,c=t.maybeAppendByClassName(su.lineGroup,"g"),h=Mp(i,c,function(w){return lV(w,e,r)})||[],p=t.maybeAppendByClassName(su.tickGroup,"g"),v=Mp(s,p,function(w){return ZV(w,n,e,r)})||[],y=t.maybeAppendByClassName(su.labelGroup,"g"),b=Mp(l,y,function(w){return jV(w,n,e,r)})||[];return(0,se.ev)((0,se.ev)((0,se.ev)([],(0,se.CR)(h),!1),(0,se.CR)(v),!1),(0,se.CR)(b),!1).filter(function(w){return!!w})}var MR=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,gR)||this}return t.prototype.render=function(n,r,i){var s=this,l=n.titleText,c=n.data,h=n.animate,p=n.showTitle,v=n.showGrid,y=n.dataThreshold,b=n.truncRange,w=Lj(c,y).filter(function($){var te=$.value;return!(b&&te>b[0]&&te<b[1])}),R=y4(i===void 0?h:i),M=us(r).maybeAppendByClassName(su.gridGroup,"g"),I=Mp(v,M,function($){return hV($,w,n,R)})||[],N=us(r).maybeAppendByClassName(su.mainGroup,"g");l&&(!this.initialized&&R.enter||this.initialized&&R.update)&&nL(n,us(this.offscreenGroup),w,y4(!1));var z=nL(n,us(N.node()),w,R),H=us(r).maybeAppendByClassName(su.titleGroup,"g"),X=Mp(p,H,function($){return QV($,s,n,R)})||[];return(0,se.ev)((0,se.ev)((0,se.ev)([],(0,se.CR)(I),!1),(0,se.CR)(z),!1),(0,se.CR)(X),!1).flat().filter(function($){return!!$})},t}(vh),q_=function(e){return e};class P2{constructor(t){this.options=oi({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=oi({},this.options,t),this.rescale(t)}rescale(t){}}function uw(e,t){return t-e?n=>(n-e)/(t-e):n=>.5}function Tb(e,...t){return t.reduce((n,r)=>i=>n(r(i)),e)}function PR(e,t,n,r,i){let s=n||0,l=r||e.length;const c=i||(h=>h);for(;s<l;){const h=Math.floor((s+l)/2);c(e[h])>t?l=h:s=h+1}return s}var JV=D(19818),eH=D.n(JV);function IR(e,t,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function tH(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100,i=e[3];if(n===0)return[r*255,r*255,r*255,i];const s=r<.5?r*(1+n):r+n-r*n,l=2*r-s,c=IR(l,s,t+1/3),h=IR(l,s,t),p=IR(l,s,t-1/3);return[c*255,h*255,p*255,i]}function rL(e){const t=eH().get(e);if(!t)return null;const{model:n,value:r}=t;return n==="rgb"?r:n==="hsl"?tH(r):null}const wb=(e,t)=>n=>e*(1-n)+t*n,nH=(e,t)=>{const n=rL(e),r=rL(t);return n===null||r===null?n?()=>e:()=>t:i=>{const s=new Array(4);for(let v=0;v<4;v+=1){const y=n[v],b=r[v];s[v]=y*(1-i)+b*i}const[l,c,h,p]=s;return`rgba(${Math.round(l)}, ${Math.round(c)}, ${Math.round(h)}, ${p})`}},I2=(e,t)=>typeof e=="number"&&typeof t=="number"?wb(e,t):typeof e=="string"&&typeof t=="string"?nH(e,t):()=>e,rH=(e,t)=>{const n=wb(e,t);return r=>Math.round(n(r))};var iH=function(e){return e===null},oH=iH;function cw(e){return!js(e)&&!oH(e)&&!Number.isNaN(e)}const LR=Math.sqrt(50),DR=Math.sqrt(10),NR=Math.sqrt(2);function fw(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/gf(10,i);return i>=0?(s>=LR?10:s>=DR?5:s>=NR?2:1)*gf(10,i):-gf(10,-i)/(s>=LR?10:s>=DR?5:s>=NR?2:1)}function iL(e,t,n){const r=Math.abs(t-e)/Math.max(0,n);let i=gf(10,Math.floor(Math.log(r)/Math.LN10));const s=r/i;return s>=LR?i*=10:s>=DR?i*=5:s>=NR&&(i*=2),t<e?-i:i}const oL=(e,t,n=5)=>{const r=[e,t];let i=0,s=r.length-1,l=r[i],c=r[s],h;return c<l&&([l,c]=[c,l],[i,s]=[s,i]),h=fw(l,c,n),h>0?(l=Math.floor(l/h)*h,c=Math.ceil(c/h)*h,h=fw(l,c,n)):h<0&&(l=Math.ceil(l*h)/h,c=Math.floor(c*h)/h,h=fw(l,c,n)),h>0?(r[i]=Math.floor(l/h)*h,r[s]=Math.ceil(c/h)*h):h<0&&(r[i]=Math.ceil(l*h)/h,r[s]=Math.floor(c*h)/h),r};function aH(e,t){const n=t<e?t:e,r=e>t?e:t;return i=>Math.min(Math.max(n,i),r)}const sH=(e,t,n)=>{const[r,i]=e,[s,l]=t;let c,h;return r<i?(c=uw(r,i),h=n(s,l)):(c=uw(i,r),h=n(l,s)),Tb(h,c)},lH=(e,t,n)=>{const r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=e[0]>e[r],c=l?[...e].reverse():e,h=l?[...t].reverse():t;for(let p=0;p<r;p+=1)i[p]=uw(c[p],c[p+1]),s[p]=n(h[p],h[p+1]);return p=>{const v=PR(e,p,1,r)-1,y=i[v],b=s[v];return Tb(b,y)(p)}},aL=(e,t,n,r)=>(Math.min(e.length,t.length)>2?lH:sH)(e,t,r?rH:n);class hw extends P2{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:wb,tickCount:5}}map(t){return cw(t)?this.output(t):this.options.unknown}invert(t){return cw(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,n,r,...i)}getTicks(){const{tickMethod:t}=this.options,[n,r,i,...s]=this.getTickMethodOptions();return t(n,r,i,...s)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}chooseNice(){return oL}rescale(){this.nice();const[t,n]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}chooseClamp(t){const{clamp:n,range:r}=this.options,i=this.options.domain.map(t),s=Math.min(i.length,r.length);return n?aH(i[0],i[s-1]):q_}composeOutput(t,n){const{domain:r,range:i,round:s,interpolate:l}=this.options,c=aL(r.map(t),i,l,s);this.output=Tb(c,n,t)}composeInput(t,n,r){const{domain:i,range:s}=this.options,l=aL(s,i.map(t),wb);this.input=Tb(n,r,l)}}const Q_=(e,t,n)=>{let r,i,s=e,l=t;if(s===l&&n>0)return[s];let c=fw(s,l,n);if(c===0||!Number.isFinite(c))return[];if(c>0){s=Math.ceil(s/c),l=Math.floor(l/c),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)*c}else{c=-c,s=Math.ceil(s*c),l=Math.floor(l*c),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)/c}return i};class md extends hw{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:I2,tickMethod:Q_,tickCount:5}}chooseTransforms(){return[q_,q_]}clone(){return new md(this.options)}}function uH(e,t){if(e){var n;if(jo(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(ml(e)){for(var s in e)if(e.hasOwnProperty(s)&&(n=t(e[s],s),n===!1))break}}}var BR=uH,cH=function(e,t,n){if(!jo(e)&&!Lv(e))return e;var r=n;return BR(e,function(i,s){r=t(r,i,s)}),r},sL=cH,J_=function(e,t){return sL(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})};function Eg(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}function lL(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,s=0;s<e.length;s++){var l=e[s],c=l.x,h=l.y,p=l.width,v=l.height,y=(0,se.CR)([c+p,h+v],2),b=y[0],w=y[1];c<t&&(t=c),h<n&&(n=h),b>r&&(r=b),w>i&&(i=w)}return new Zu(t,n,r-t,i-n)}var fH=function(e,t,n){var r=e.width,i=e.height,s=n.flexDirection,l=s===void 0?"row":s,c=n.flexWrap,h=c===void 0?"nowrap":c,p=n.justifyContent,v=p===void 0?"flex-start":p,y=n.alignContent,b=y===void 0?"flex-start":y,w=n.alignItems,R=w===void 0?"flex-start":w,M=l==="row",I=l==="row"||l==="column",N=M?I?[1,0]:[-1,0]:I?[0,1]:[0,-1],z=(0,se.CR)([0,0],2),H=z[0],X=z[1],$=t.map(function(qe){var lt,ft=qe.width,pt=qe.height,Zt=(0,se.CR)([H,X],2),Ct=Zt[0],Lt=Zt[1];return lt=(0,se.CR)([H+ft*N[0],X+pt*N[1]],2),H=lt[0],X=lt[1],new Zu(Ct,Lt,ft,pt)}),te=lL($),fe={"flex-start":0,"flex-end":M?r-te.width:i-te.height,center:M?(r-te.width)/2:(i-te.height)/2},ye=$.map(function(qe){var lt=qe.x,ft=qe.y,pt=Zu.fromRect(qe);return pt.x=M?lt+fe[v]:lt,pt.y=M?ft:ft+fe[v],pt}),Le=lL(ye),Ge=function(qe){var lt=(0,se.CR)(M?["height",i]:["width",r],2),ft=lt[0],pt=lt[1];switch(R){case"flex-start":return 0;case"flex-end":return pt-qe[ft];case"center":return pt/2-qe[ft]/2;default:return 0}},Qe=ye.map(function(qe){var lt=qe.x,ft=qe.y,pt=Zu.fromRect(qe);return pt.x=M?lt:lt+Ge(pt),pt.y=M?ft+Ge(pt):ft,pt}),gt=Qe.map(function(qe){var lt,ft,pt=Zu.fromRect(qe);return pt.x+=(lt=e.x)!==null&&lt!==void 0?lt:0,pt.y+=(ft=e.y)!==null&&ft!==void 0?ft:0,pt});return gt},hH=function(e,t,n){return[]},dH=function(e,t,n){if(t.length===0)return[];var r={flex:fH,grid:hH},i=n.display in r?r[n.display]:null;return(i==null?void 0:i.call(null,e,t,n))||[]},pH=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n)||this;r.layoutEvents=[Ua.BOUNDS_CHANGED,Ua.INSERTED,Ua.REMOVED],r.$margin=zh(0),r.$padding=zh(0);var i=n.style||{},s=i.margin,l=s===void 0?0:s,c=i.padding,h=c===void 0?0:c;return r.margin=l,r.padding=h,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(t.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=zh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=zh(n)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,s=n.y,l=s===void 0?0:s,c=n.width,h=n.height,p=(0,se.CR)(this.$margin,4),v=p[0],y=p[1],b=p[2],w=p[3];return new Zu(i-w,l-v,c+w+y,h+v+b)},t.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,e.prototype.appendChild.call(this,n,r),n},t.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,s=(0,se.CR)(this.$padding,4),l=s[0],c=s[1],h=s[2],p=s[3],v=(0,se.CR)(this.$margin,4),y=v[0],b=v[3];return new Zu(p+b,l+y,r-p-c,i-l-h)},t.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(l){return!l.isConnected}))try{var n=this.attributes,r=n.x,i=n.y;this.style.transform="translate(".concat(r,", ").concat(i,")");var s=dH(this.getAvailableSpace(),this.children.map(function(l){return l.getBBox()}),this.attributes);this.children.forEach(function(l,c){var h=s[c],p=h.x,v=h.y;l.style.transform="translate(".concat(p,", ").concat(v,")")})}catch(l){}},t.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target.isMutationObserved=!0,n.layout()})})},t.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},t}(ff),vH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function mH(e){return class extends V1{constructor(t){super(t),this.descriptor=e}connectedCallback(){var t,n;(n=(t=this.descriptor).render)===null||n===void 0||n.call(t,this.attributes,this)}update(t={}){var n,r;this.attr(oi({},this.attributes,t)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function uL(e,t,n){return e.querySelector(t)?Aa(e).select(t):Aa(e).append(n)}function dw(e){return Array.isArray(e)?e.join(", "):`${e||""}`}function cL(e,t){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:s}=n;const l={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return e in l&&([r,i,s]=l[e]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:s},t)}class fL extends pH{get child(){var t;return(t=this.children)===null||t===void 0?void 0:t[0]}update(t){var n;this.attr(t);const{subOptions:r}=t;(n=this.child)===null||n===void 0||n.update(r)}}class gH extends fL{update(t){var n;const{subOptions:r}=t;this.attr(t),(n=this.child)===null||n===void 0||n.update(r)}}function Am(e,t){var n;return(n=e.filter(r=>r.getOptions().name===t))===null||n===void 0?void 0:n[0]}function yH(e){return e==="horizontal"||e===0}function _H(e){return e==="vertical"||e===-Math.PI/2}function hL(e,t,n){const{bbox:r}=e,{position:i="top",size:s,length:l}=t,c=["top","bottom","center"].includes(i),[h,p]=c?[r.height,r.width]:[r.width,r.height],{defaultSize:v,defaultLength:y}=n.props,b=s||v||h,w=l||y||p,R=c?"horizontal":"vertical",[M,I]=c?[w,b]:[b,w];return{orientation:R,width:M,height:I,size:b,length:w}}function bH(e){return e.find(t=>t.getOptions().domain.length>0).getOptions().domain}function pw(e){const t=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=e,r=vH(e,["style"]),i={};return Object.entries(r).forEach(([s,l])=>{t.includes(s)?i[`show${Sm(s)}`]=l:i[s]=l}),Object.assign(Object.assign({},i),n)}var dL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function pL(e,t){const{eulerAngles:n,origin:r}=t;r&&e.setOrigin(r),n&&e.rotate(n[0],n[1],n[2])}function vL(e){const{innerWidth:t,innerHeight:n,depth:r}=e.getOptions();return[t,n,r]}function xH(e,t){const{width:n,height:r}=t.getOptions();return i=>{if(!yl(t))return i;const s=e==="bottom"?[i,1]:[0,i],l=t.map(s);if(e==="bottom"){const c=l[0];return new md({domain:[0,n],range:[0,1]}).map(c)}else if(e==="left"){const c=l[1];return new md({domain:[0,r],range:[0,1]}).map(c)}return i}}function EH(e,t,n){if(e.getTicks)return e.getTicks();if(!n)return t;const[r,i]=Eg(t,l=>+l),{tickCount:s}=e.getOptions();return n(r,i,s)}function SH(e,t){if(au(t))return w=>w;const n=t.getOptions(),{innerWidth:r,innerHeight:i,insetTop:s,insetBottom:l,insetLeft:c,insetRight:h}=n,[p,v,y]=e==="left"||e==="right"?[s,l,i]:[c,h,r],b=new md({domain:[0,1],range:[p/y,1-v/y]});return w=>b.map(w)}function mL(e,t,n,r,i,s,l,c){var h;(n!==void 0||s!==void 0)&&e.update(Object.assign(Object.assign({},n&&{tickCount:n}),s&&{tickMethod:s}));const p=EH(e,t,s),v=i?p.filter(i):p,y=N=>N instanceof Date?String(N):typeof N=="object"&&N?N:String(N),b=r||((h=e.getFormatter)===null||h===void 0?void 0:h.call(e))||y,w=SH(l,c),R=xH(l,c),M=N=>["top","bottom","center","outer"].includes(N),I=N=>["left","right"].includes(N);return au(c)||wu(c)?v.map((N,z,H)=>{var X,$;const te=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,fe=w(e.map(N)+te);return{value:X_(c)&&l==="center"||wu(c)&&(($=e.getTicks)===null||$===void 0?void 0:$.call(e))&&M(l)||wu(c)&&I(l)?1-fe:fe,label:y(b(_b(N),z,H)),id:String(z)}}):v.map((N,z,H)=>{var X;const $=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,te=R(w(e.map(N)+$));return{value:I(l)?1-te:te,label:y(b(_b(N),z,H)),id:String(z)}})}function TH(e,t,n="xy"){const[r,i,s]=vL(t);return n==="xy"?e.includes("bottom")||e.includes("top")?i:r:n==="xz"?e.includes("bottom")||e.includes("top")?s:r:e.includes("bottom")||e.includes("top")?i:s}function wH(e=[],t){if(e.length>0)return e;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:s}=t,l=[],c=(h,p)=>{p&&l.push(Object.assign(Object.assign({},h),p))};return c({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),c({type:"ellipsis",minLength:20},i),c({type:"hide"},r),c({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},s),l}function AH(e,t,n,r,i){const{x:s,y:l,width:c,height:h}=t,p=[s+c/2,l+h/2],v=Math.min(c,h)/2,[y,b]=bb(i),[w,R]=vL(i),M=Math.min(w,R)/2,I={center:p,radius:v,startAngle:y,endAngle:b,gridLength:(r-n)*M};if(e==="inner"){const{insetLeft:N,insetTop:z}=i.getOptions();return Object.assign(Object.assign({},I),{center:[p[0]-N,p[1]-z],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},I),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function OH(e,t,n){return pu(t)||Bs(t)?!1:e===void 0?!!n.getTicks:e}function CH(e){const{depth:t}=e.getOptions();return t?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function RH(e,t,n,r,i){const{x:s,y:l,width:c,height:h}=n;if(e==="bottom")return{startPos:[s,l],endPos:[s+c,l]};if(e==="left")return{startPos:[s+c,l+h],endPos:[s+c,l]};if(e==="right")return{startPos:[s,l+h],endPos:[s,l]};if(e==="top")return{startPos:[s,l+h],endPos:[s+c,l+h]};if(e==="center"){if(t==="vertical")return{startPos:[s,l],endPos:[s,l+h]};if(t==="horizontal")return{startPos:[s,l],endPos:[s+c,l]};if(typeof t=="number"){const[p,v]=r.getCenter(),[y,b]=Z0(r),[w,R]=bb(r),M=Math.min(c,h)/2,{insetLeft:I,insetTop:N}=r.getOptions(),z=y*M,H=b*M,[X,$]=[p+s-I,v+l-N],[te,fe]=[Math.cos(t),Math.sin(t)],ye=[X+H*te,$+H*fe],Le=[X+z*te,$+z*fe],Ge=()=>{const{domain:gt}=i.getOptions();return gt.length},Qe=au(r)&&i?Ge():3;return{startPos:ye,endPos:Le,gridClosed:Math.abs(R-w-360)<1e-6,gridCenter:[X,$],gridControlAngles:new Array(Qe).fill(0).map((gt,qe,lt)=>(R-w)/Qe*qe)}}}return{}}const MH=e=>{const{order:t,size:n,position:r,orientation:i,labelFormatter:s,tickFilter:l,tickCount:c,tickMethod:h,important:p={},style:v={},indexBBox:y,title:b,grid:w=!1}=e,R=dL(e,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[M],value:I,coordinate:N,theme:z})=>{const{bbox:H}=I,{domain:X}=M.getOptions(),$=mL(M,X,c,s,l,h,r,N),te=y?$.map((qe,lt)=>{const ft=y.get(lt);return!ft||ft[0]!==qe.label?qe:Object.assign(Object.assign({},qe),{bbox:ft[1]})}):$,[fe,ye]=Z0(N),Le=AH(r,H,fe,ye,N),{axis:Ge,axisArc:Qe={}}=z,gt=pw(oi({},Ge,Qe,Le,Object.assign(Object.assign({type:"arc",data:te,titleText:dw(b),grid:w},R),p)));return new MR({style:J_(gt,["transform"])})}};function PH(e,t,n,r,i,s){const l=n.axis,c=["top","right","bottom","left"].includes(i)?n[`axis${E2(i)}`]:n.axisLinear,h=e.getOptions().name,p=n[`axis${Sm(h)}`]||{};return Object.assign({},l,c,p)}function IH(e,t,n,r,i,s){const l=PH(e,t,n,r,i,s);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},l),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:_H(s)?10:0,tick:r==="center"?!1:void 0}):l}const LH=e=>{const{direction:t="left",important:n={},labelFormatter:r,order:i,orientation:s,actualPosition:l,position:c,size:h,style:p={},title:v,tickCount:y,tickFilter:b,tickMethod:w,transform:R,indexBBox:M}=e,I=dL(e,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:N,value:z,coordinate:H,theme:X})=>{const{bbox:$}=z,[te]=N,{domain:fe,xScale:ye}=te.getOptions(),Le=IH(te,H,X,t,c,s),Ge=Object.assign(Object.assign(Object.assign({},Le),p),I),Qe=TH(l||c,H,e.plane),gt=RH(c,s,$,H,ye),qe=CH(H),lt=mL(te,fe,y,r,b,w,c,H),ft=M?lt.map((Ct,Lt)=>{const Tn=M.get(Lt);return!Tn||Tn[0]!==Ct.label?Ct:Object.assign(Object.assign({},Ct),{bbox:Tn[1]})}):lt,pt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ge),{type:"linear",data:ft,crossSize:h,titleText:dw(v),labelOverlap:wH(R,Ge),grid:OH(Ge.grid,H,te),gridLength:Qe,line:!0,indexBBox:M}),Ge.line?null:{lineOpacity:0}),gt),qe),n);return pt.labelOverlap.find(Ct=>Ct.type==="hide")&&(pt.crossSize=!1),new MR({className:"axis",style:pw(pt)})}},gL=e=>t=>{const{labelFormatter:n,labelFilter:r=()=>!0}=t;return i=>{var s;const{scales:[l]}=i,c=((s=l.getTicks)===null||s===void 0?void 0:s.call(l))||l.getOptions().domain,h=typeof n=="string"?Ye(n):n,p=(y,b,w)=>r(c[b],b,c),v=Object.assign(Object.assign({},t),{labelFormatter:h,labelFilter:p,scale:l});return e(v)(i)}},Ay=gL(LH),yL=gL(MH);Ay.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},yL.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var DH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function NH(e){const t=e%(Math.PI*2);return t===Math.PI/2?{titleTransform:"translate(0, 50%)"}:t>-Math.PI/2&&t<Math.PI/2?{titleTransform:"translate(50%, 0)"}:t>Math.PI/2&&t<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function BH(e,t,n,r){const{radar:i}=e,[s]=r,l=s.getOptions().name,[c,h]=bb(n),{axisRadar:p={}}=t;return Object.assign(Object.assign({},p),{grid:l==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((v,y)=>(h-c)/i.count*y)})}const _L=e=>{const{important:t={}}=e,n=DH(e,["important"]);return r=>{const{theme:i,coordinate:s,scales:l}=r;return Ay(Object.assign(Object.assign(Object.assign({},n),NH(e.orientation)),{important:Object.assign(Object.assign({},BH(e,i,s,l)),t)}))(r)}};_L.props=Object.assign(Object.assign({},Ay.props),{defaultPosition:"center"});function vw(e,t){return+e.toPrecision(t)}function Bde(e){return e.toLocaleString()}function Fde(e){return e.toExponential()}function kde(e,t){return t===void 0&&(t=0),Math.abs(e)<1e3?String(e):"".concat(vw(e/1e3,t).toLocaleString(),"K")}var zde=function(e,t,n){return e<0&&Number.isFinite(e)?t:n},Ude=function(e,t,n){return e>0&&Number.isFinite(e)?t:n},jde=function(e,t){return e*t},Vde=function(e,t){return e/2+(t||0)/2};function mw(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t){var s=t.x,l=t.y;return[s,l]}if(n){var c=n[0],h=c.clientX,p=c.clientY;return[h,p]}return r&&i?[r,i]:[0,0]}var FH={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(e){return e.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},FR=X0({background:"background",labelGroup:"label-group",label:"label"},"indicator"),kH=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,FH)||this;return r.point=[0,0],r.group=r.appendChild(new ff({})),r.isMutationObserved=!0,r}return t.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,s=(0,se.CR)(zh(i),4),l=s[0],c=s[1],h=s[2],p=s[3],v=this.label.node().getLocalBounds(),y=v.min,b=v.max,w=new Zu(y[0]-p,y[1]-l,b[0]+c-y[0]+p,b[1]+h-y[1]+l),R=this.getPath(r,w),M=Vs(this.attributes,"background");this.background=us(this.group).maybeAppendByClassName(FR.background,"path").styles((0,se.pi)((0,se.pi)({},M),{d:R})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,s=Vs(this.attributes,"label"),l=(0,se.CR)(xg(s),2),c=l[0],h=l[1],p=c.text,v=(0,se._T)(c,["text"]);if(this.label=us(this.group).maybeAppendByClassName(FR.labelGroup,"g").styles(h),!!i){var y=this.label.maybeAppendByClassName(FR.label,function(){return K_(r(i))}).style("text",r(i).toString());y.selectAll("text").styles(v)}},t.prototype.adjustLayout=function(){var n=(0,se.CR)(this.point,2),r=n[0],i=n[1],s=this.attributes,l=s.x,c=s.y;this.group.attr("transform","translate(".concat(l-r,", ").concat(c-i,")"))},t.prototype.getPath=function(n,r){var i=this.attributes.radius,s=r.x,l=r.y,c=r.width,h=r.height,p=[["M",s+i,l],["L",s+c-i,l],["A",i,i,0,0,1,s+c,l+i],["L",s+c,l+h-i],["A",i,i,0,0,1,s+c-i,l+h],["L",s+i,l+h],["A",i,i,0,0,1,s,l+h-i],["L",s,l+i],["A",i,i,0,0,1,s+i,l],["Z"]],v={top:4,right:6,bottom:0,left:2},y=v[n],b=this.createCorner([p[y].slice(-2),p[y+1].slice(-2)]);return p.splice.apply(p,(0,se.ev)([y+1,1],(0,se.CR)(b),!1)),p[0][0]="M",p},t.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,s=wV.apply(void 0,(0,se.ev)([],(0,se.CR)(n),!1)),l=(0,se.CR)(n,2),c=(0,se.CR)(l[0],2),h=c[0],p=c[1],v=(0,se.CR)(l[1],2),y=v[0],b=v[1],w=(0,se.CR)(s?[y-h,[h,y]]:[b-p,[p,b]],2),R=w[0],M=(0,se.CR)(w[1],2),I=M[0],N=M[1],z=R/2,H=R/Math.abs(R),X=r*H,$=X/2,te=X*Math.sqrt(3)/2*i,fe=(0,se.CR)([I,I+z-$,I+z,I+z+$,N],5),ye=fe[0],Le=fe[1],Ge=fe[2],Qe=fe[3],gt=fe[4];return s?(this.point=[Ge,p-te],[["L",ye,p],["L",Le,p],["L",Ge,p-te],["L",Qe,p],["L",gt,p]]):(this.point=[h+te,Ge],[["L",h,ye],["L",h,Le],["L",h+te,Ge],["L",h,Qe],["L",h,gt]])},t.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?wy(this):w2(this)},t.prototype.bindEvents=function(){this.label.on(Ua.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(vh),bL={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},xL={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},EL={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},Om=X0({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Oy=X0({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),zH=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.x,s=n.y,l=n.size,c=l===void 0?10:l,h=n.radius,p=h===void 0?c/4:h,v=n.orientation,y=(0,se._T)(n,["x","y","size","radius","orientation"]),b=c,w=b*2.4,R=us(r).maybeAppendByClassName(Oy.iconRect,"rect").styles((0,se.pi)((0,se.pi)({},y),{width:b,height:w,radius:p,x:i-b/2,y:s-w/2,transformOrigin:"center"})),M=i+1/3*b-b/2,I=i+2/3*b-b/2,N=s+1/4*w-w/2,z=s+3/4*w-w/2;R.maybeAppendByClassName("".concat(Oy.iconLine,"-1"),"line").styles((0,se.pi)({x1:M,x2:M,y1:N,y2:z},y)),R.maybeAppendByClassName("".concat(Oy.iconLine,"-2"),"line").styles((0,se.pi)({x1:I,x2:I,y1:N,y2:z},y)),v==="vertical"&&(R.node().style.transform="rotate(90)")},t}(vh),SL=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,EL)||this}return t.prototype.renderLabel=function(n){var r=this,i=this.attributes,s=i.x,l=i.y,c=i.showLabel,h=Vs(this.attributes,"label"),p=h.x,v=p===void 0?0:p,y=h.y,b=y===void 0?0:y,w=h.transform,R=h.transformOrigin,M=(0,se._T)(h,["x","y","transform","transformOrigin"]),I=(0,se.CR)(xg(M,[]),2),N=I[0],z=I[1],H=us(n).maybeAppendByClassName(Oy.labelGroup,"g").styles(z),X=(0,se.pi)((0,se.pi)({},xL),N),$=X.text,te=(0,se._T)(X,["text"]);Mp(!!c,H,function(fe){r.label=fe.maybeAppendByClassName(Oy.label,"text").styles((0,se.pi)((0,se.pi)({},te),{x:s+v,y:l+b,transform:w,transformOrigin:R,text:"".concat($)})),r.label.on("mousedown",function(ye){ye.stopPropagation()}),r.label.on("touchstart",function(ye){ye.stopPropagation()})})},t.prototype.renderIcon=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.orientation,c=r.type,h=(0,se.pi)((0,se.pi)({x:i,y:s,orientation:l},bL),Vs(this.attributes,"icon")),p=this.attributes.iconShape,v=p===void 0?function(){return new zH({style:h})}:p,y=us(n).maybeAppendByClassName(Oy.iconGroup,"g");y.selectAll(Oy.icon.class).data([v]).join(function(b){return b.append(typeof v=="string"?v:function(){return v(c)}).attr("className",Oy.icon.name)},function(b){return b.update(h)},function(b){return b.remove()})},t.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},t}(vh),TL=function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]]},UH=TL,jH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},VH=function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},HH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},WH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]},GH=function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},ZH=function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},wL=function(e,t,n){return[["M",e,t+n],["L",e,t-n]]},XH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},$H=function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},YH=function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},KH=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},AL=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},qH=AL,QH=function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},JH=function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},eW=function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},tW=function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]};function nW(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}var rW=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t],["L",e-n,t+n],["Z"]]};function iW(e){var t="default";if(ml(e)&&e instanceof Image)t="image";else if(tp(e))t="symbol";else if(u(e)){var n=new RegExp("data:(image|text)");e.match(n)?t="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?t="url":t="symbol"}return t}function oW(e){var t=iW(e);return["base64","url","image"].includes(t)?"image":e&&t==="symbol"?"path":null}var kl=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.x,s=i===void 0?0:i,l=n.y,c=l===void 0?0:l,h=this.getSubShapeStyle(n),p=h.symbol,v=h.size,y=v===void 0?16:v,b=(0,se._T)(h,["symbol","size"]),w=oW(p);Mp(!!w,us(r),function(R){R.maybeAppendByClassName("marker",w).attr("className","marker ".concat(w,"-marker")).call(function(M){if(w==="image"){var I=y*2;M.styles({img:p,width:I,height:I,x:s-y,y:c-y})}else{var I=y/2,N=tp(p)?p:t.getSymbol(p);M.styles((0,se.pi)({d:N==null?void 0:N(s,c,I)},b))}})})},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(n,r){t.MARKER_SYMBOL_MAP.set(n,r)},t.getSymbol=function(n){return t.MARKER_SYMBOL_MAP.get(n)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(vh);kl.registerSymbol("cross",XH),kl.registerSymbol("hyphen",KH),kl.registerSymbol("line",wL),kl.registerSymbol("plus",YH),kl.registerSymbol("tick",$H),kl.registerSymbol("circle",TL),kl.registerSymbol("point",UH),kl.registerSymbol("bowtie",ZH),kl.registerSymbol("hexagon",GH),kl.registerSymbol("square",jH),kl.registerSymbol("diamond",VH),kl.registerSymbol("triangle",HH),kl.registerSymbol("triangle-down",WH),kl.registerSymbol("line",wL),kl.registerSymbol("dot",AL),kl.registerSymbol("dash",qH),kl.registerSymbol("smooth",QH),kl.registerSymbol("hv",JH),kl.registerSymbol("vh",eW),kl.registerSymbol("hvh",tW),kl.registerSymbol("vhv",nW);function aW(e,t,n){var r=Math.round((e-n)/t);return n+r*t}function sW(e,t,n){var r=1.4,i=r*n;return[["M",e-n,t-i],["L",e+n,t-i],["L",e+n,t+i],["L",e-n,t+i],["Z"]]}var OL=1.4,CL=.4;function lW(e,t,n){var r=n,i=r*OL,s=r/2,l=r/6,c=e+i*CL;return[["M",e,t],["L",c,t+s],["L",e+i,t+s],["L",e+i,t-s],["L",c,t-s],["Z"],["M",c,t+l],["L",e+i-2,t+l],["M",c,t-l],["L",e+i-2,t-l]]}function uW(e,t,n){var r=n,i=r*OL,s=r/2,l=r/6,c=t+i*CL;return[["M",e,t],["L",e-s,c],["L",e-s,t+i],["L",e+s,t+i],["L",e+s,c],["Z"],["M",e-l,c],["L",e-l,t+i-2],["M",e+l,c],["L",e+l,t+i-2]]}kl.registerSymbol("hiddenHandle",sW),kl.registerSymbol("verticalHandle",lW),kl.registerSymbol("horizontalHandle",uW);var Hde=function(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n};function cW(e,t,n,r){var i;r===void 0&&(r=4);var s=(0,se.CR)(e,2),l=s[0],c=s[1],h=(0,se.CR)(t,2),p=h[0],v=h[1],y=(0,se.CR)(n,2),b=y[0],w=y[1],R=(0,se.CR)([p,v],2),M=R[0],I=R[1],N=I-M;return M>I&&(i=(0,se.CR)([I,M],2),M=i[0],I=i[1]),N>c-l?[l,c]:M<l?b===l&&w===I?[l,I]:[l,N+l]:I>c?w===c&&b===M?[M,c]:[c-N,c]:[M,I]}function Cm(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n}var L2=X0({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),RL={showLabel:!0,formatter:function(e){return e.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},fW=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,RL)||this}return t.prototype.render=function(n,r){var i=us(r).maybeAppendByClassName(L2.markerGroup,"g");this.renderMarker(i);var s=us(r).maybeAppendByClassName(L2.labelGroup,"g");this.renderLabel(s)},t.prototype.renderMarker=function(n){var r=this,i=this.attributes,s=i.orientation,l=i.markerSymbol,c=l===void 0?Cm(s,"horizontalHandle","verticalHandle"):l;Mp(!!c,n,function(h){var p=Vs(r.attributes,"marker"),v=(0,se.pi)({symbol:c},p);r.marker=h.maybeAppendByClassName(L2.marker,function(){return new kl({style:v})}).update(v)})},t.prototype.renderLabel=function(n){var r=this,i=this.attributes,s=i.showLabel,l=i.orientation,c=i.spacing,h=c===void 0?0:c,p=i.formatter;Mp(s,n,function(v){var y,b=Vs(r.attributes,"label"),w=b.text,R=(0,se._T)(b,["text"]),M=((y=v.select(L2.marker.class))===null||y===void 0?void 0:y.node().getBBox())||{},I=M.width,N=I===void 0?0:I,z=M.height,H=z===void 0?0:z,X=(0,se.CR)(Cm(l,[0,H+h,"center","top"],[N+h,0,"start","middle"]),4),$=X[0],te=X[1],fe=X[2],ye=X[3];v.maybeAppendByClassName(L2.label,"text").styles((0,se.pi)((0,se.pi)({},R),{x:$,y:te,text:p(w).toString(),textAlign:fe,textBaseline:ye}))})},t}(vh),ML={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},hW=_g({},ML,{}),dW=_g({},ML,wm(RL,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),pW=.01,Wde=.5,Uh=X0({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function vW(e,t){for(var n=1;n<e.length;n+=1){var r=e[n-1],i=e[n];if(t>=r&&t<=i)return[r,i]}return[t,t]}function mW(e,t,n){var r=Array.from(t),i=e.length;return new Array(i).fill(0).reduce(function(s,l,c){var h=r[c%r.length];return s+=" ".concat(e[c],":").concat(h).concat(c<i-1?" ".concat(e[c+1],":").concat(h):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function PL(e,t){var n=(0,se.CR)(vW(e,t),2),r=n[0],i=n[1];return{tick:t>(r+i)/2?i:r,range:[r,i]}}var D2=X0({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function IL(e){var t=e.orientation,n=e.size,r=e.length;return Cm(t,[r,n],[n,r])}function LL(e){var t=e.type,n=(0,se.CR)(IL(e),2),r=n[0],i=n[1];return t==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function gW(e){return LL(e)}function yW(e){var t=e.orientation,n=e.color,r=e.block,i=e.partition,s;if(tp(n)){var l=20;s=new Array(l).fill(0).map(function(p,v,y){return n(v/(y.length-1))})}else s=n;var c=s.length,h=s.map(function(p){return H0(p).toString()});return c?c===1?h[0]:r?mW(i,h,t):h.reduce(function(p,v,y){return p+=" ".concat(y/(c-1),":").concat(v)},"l(".concat(Cm(t,"0","270"),")")):""}function _W(e){var t=e.orientation,n=e.range;if(!n)return[];var r=(0,se.CR)(IL(e),2),i=r[0],s=r[1],l=(0,se.CR)(n,2),c=l[0],h=l[1],p=Cm(t,c*i,0),v=Cm(t,0,c*s),y=Cm(t,h*i,i),b=Cm(t,s,h*s);return[["M",p,v],["L",p,b],["L",y,b],["L",y,v],["Z"]]}function bW(e,t){var n=Vs(t,"track");e.maybeAppendByClassName(D2.track,"path").styles((0,se.pi)({d:LL(t)},n))}function xW(e,t){var n=Vs(t,"selection"),r=yW(t),i=e.maybeAppendByClassName(D2.selection,"path").styles((0,se.pi)({d:gW(t),fill:r},n)),s=i.maybeAppendByClassName(D2.clipPath,"path").styles({d:_W(t)}).node();i.style("clipPath",s)}var EW=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return t.prototype.render=function(n,r){var i=us(r).maybeAppendByClassName(D2.trackGroup,"g");bW(i,n);var s=us(r).maybeAppendByClassName(D2.selectionGroup,"g");xW(s,n)},t}(vh);function SW(e){return{min:Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(e.map(function(t){return t.value})),!1)),max:Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(e.map(function(t){return t.value})),!1))}}var TW=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,dW)||this;return r.eventToOffsetScale=new md({}),r.innerRibbonScale=new md({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var s=r.attributes,l=s.data,c=s.block;i.stopPropagation();var h=r.getValueByCanvasPoint(i);if(c){var p=PL(l.map(function(b){var w=b.value;return w}),h).range,v=r.getRealSelection(p);r.showIndicator((p[0]+p[1])/2,"".concat(v[0],"-").concat(v[1])),r.dispatchIndicated(h,p)}else{var y=r.getTickValue(h);r.showIndicator(y,"".concat(r.getRealValue(y))),r.dispatchIndicated(y)}},r.onDragStart=function(i){return function(s){s.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(s)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var s=r.target;r.updateMouse();var l=(0,se.CR)(r.selection,2),c=l[0],h=l[1],p=r.getTickValue(r.getValueByCanvasPoint(i)),v=p-r.prevValue;s==="start"?c!==p&&r.updateSelection(p,h):s==="end"?h!==p&&r.updateSelection(c,p):s==="ribbon"&&v!==0&&(r.prevValue=p,r.updateSelection(v,v,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(t.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new Zu(0,0,r,i)},t.prototype.render=function(n,r){var i=this,s=n.showLabel;this.renderTitle(us(r));var l=this.availableSpace,c=l.x,h=l.y,p=us(r).maybeAppendByClassName(Uh.contentGroup,"g").styles({transform:"translate(".concat(c,", ").concat(h,")")}),v=p.maybeAppendByClassName(Uh.labelGroup,"g").styles({zIndex:1});Mp(!!s,v,function(b){i.renderLabel(b)});var y=p.maybeAppendByClassName(Uh.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=p.maybeAppendByClassName(Uh.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(y),this.renderIndicator(p),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(t.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:SW(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonRange",{get:function(){var n=(0,se.CR)(this.selection,2),r=n[0],i=n[1],s=this.ribbonScale;return[s.map(r),s.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,s=this.attributes.defaultValue,l=s===void 0?[r,i]:s,c=(0,se.CR)(l,2),h=c[0],p=c[1];return[h,p]},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){return Cm(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},t.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,s=r.titleText,l=r.width,c=r.height,h=Vs(this.attributes,"title"),p=(0,se.pi)((0,se.pi)({},h),{width:l,height:c,text:s}),v=this;n.selectAll(Uh.title.class).data(i?[s]:[]).join(function(y){return y.append(function(){return new eL({style:p})}).attr("className",Uh.title.name).each(function(){v.title=this})},function(y){return y.update(p)},function(y){return y.each(function(){v.title=void 0}).remove()})},Object.defineProperty(t.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new Zu(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,s={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return s[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Zu(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(su.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),s=i.width,l=i.height;return this.cacheLabelBBox=new Zu(0,0,s,l),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,s=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var l=this.labelBBox,c=l.width,h=l.height,p=this.ifHorizontal(h,c)+s+this.labelFixedSpacing,v=this.ifHorizontal(c,h);return{width:c,height:h,size:p,length:v}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,s=this.availableSpace,l=s.width,c=s.height,h=this.labelShape,p=h.size,v=h.length,y=(0,se.CR)(this.ifHorizontal([c,l],[l,c]),2),b=y[0],w=y[1],R=r?this.handleShape:{size:0,length:0},M=R.size,I=R.length,N=this.handleOffsetRatio,z=0,H=this.labelPosition;i?z=i:["bottom","right"].includes(H)?z=Math.min(b-p,(b-M)/N):b*(1-N)>M?z=Math.max(b-p,0):z=Math.max((b-p-M)/N,0);var X=Math.max(I,v),$=w-X,te=(0,se.CR)(this.ifHorizontal([$,z],[z,$]),2),fe=te[0],ye=te[1],Le=["top","left"].includes(H)?p:0,Ge=(0,se.CR)(this.ifHorizontal([X/2,Le],[Le,X/2]),2),Qe=Ge[0],gt=Ge[1];return new Zu(Qe,gt,fe,ye)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),t.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,s=r.type,l=r.orientation,c=r.color,h=r.block,p=Vs(this.attributes,"ribbon"),v=this.range,y=v.min,b=v.max,w=this.ribbonBBox,R=w.x,M=w.y,I=this.ribbonShape,N=I.length,z=I.size,H=_g({transform:"translate(".concat(R,", ").concat(M,")"),length:N,size:z,type:s,orientation:l,color:c,block:h,partition:i.map(function(X){return(X.value-y)/(b-y)}),range:this.ribbonRange},p);this.ribbon=n.maybeAppendByClassName(Uh.ribbon,function(){return new EW({style:H})}).update(H)},t.prototype.getHandleClassName=function(n){return"".concat(Uh.prefix("".concat(n,"-handle")))},t.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,s=Vs(this.attributes,"handle"),l=(0,se.CR)(this.selection,2),c=l[0],h=l[1],p=(0,se.pi)((0,se.pi)({},s),{orientation:i}),v=s.shape,y=v===void 0?"slider":v,b=y==="basic"?fW:SL,w=this;this.handlesGroup.selectAll(Uh.handle.class).data(r?[{value:c,type:"start"},{value:h,type:"end"}]:[],function(R){return R.type}).join(function(R){return R.append(function(){return new b({style:p})}).attr("className",function(M){var I=M.type;return"".concat(Uh.handle," ").concat(w.getHandleClassName(I))}).each(function(M){var I=M.type,N=M.value;this.update({labelText:N});var z="".concat(I,"Handle");w[z]=this,this.addEventListener("pointerdown",w.onDragStart(I))})},function(R){return R.update(p).each(function(M){var I=M.value;this.update({labelText:I})})},function(R){return R.each(function(M){var I=M.type,N="".concat(I,"Handle");w[N]=void 0}).remove()})},t.prototype.adjustHandles=function(){var n=(0,se.CR)(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},Object.defineProperty(t.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Zu(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,s=this.endHandle.getBBox(),l=s.width,c=s.height,h=(0,se.CR)([Math.max(r,l),Math.max(i,c)],2),p=h[0],v=h[1];return this.cacheHandleBBox=new Zu(0,0,p,v),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,s=(0,se.CR)(this.ifHorizontal([i,r],[r,i]),2),l=s[0],c=s[1];return{width:r,height:i,size:l,length:c}},enumerable:!1,configurable:!0}),t.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,s=this.ribbonBBox,l=s.x,c=s.y,h=this.ribbonShape.size,p=this.getOffset(r),v=(0,se.CR)(this.ifHorizontal([l+p,c+h*this.handleOffsetRatio],[l+h*this.handleOffsetRatio,c+p]),2),y=v[0],b=v[1],w=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();w==null||w.update({transform:"translate(".concat(y,", ").concat(b,")"),formatter:i})},t.prototype.renderIndicator=function(n){var r=Vs(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(Uh.indicator,function(){return new kH({})}).update(r)},Object.defineProperty(t.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,s,l,c){var h,p,v=(h=s==null?void 0:s.id)!==null&&h!==void 0?h:l.toString();if(i.push((0,se.pi)((0,se.pi)({},s),{id:v,index:l,type:"value",label:(p=s==null?void 0:s.label)!==null&&p!==void 0?p:s.value.toString(),value:n.ribbonScale.map(s.value)})),l<c.length-1){var y=c[l+1],b=(0,se.CR)([s.value,y.value],2),w=b[0],R=b[1],M=(w+R)/2;i.push((0,se.pi)((0,se.pi)({},s),{id:v,index:l,type:"range",range:[w,R],label:[w,R].join("~"),value:n.ribbonScale.map(M)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{get:function(){var n=(0,se.CR)(["center","middle"],2),r=n[0],i=n[1],s=this.labelPosition;return s==="top"?i="bottom":s==="bottom"?i="top":s==="left"?r="end":s==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,s=i===void 0?!1:i,l=r.labelFilter,c=r.labelFormatter,h=Vs(this.attributes,"tick"),p=Vs(this.attributes,"label"),v=p.align,y=_g((0,se.pi)({showLine:!1,showGrid:!1,showTick:s,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),wm(h,"tick"),wm(p,"label"),{data:this.labelData}),b={tickFilter:function(R,M,I){return(R==null?void 0:R.type)!=="value"?!1:l?l(R,R.index,I.filter(function(N){return N.type!=="value"})):!0},labelFilter:function(R,M,I){return(R==null?void 0:R.type)!==v?!1:l?l(R,R.index,I.filter(function(N){return N.type===v})):!0},labelFormatter:c},w=(0,se.pi)((0,se.pi)((0,se.pi)({},y),b),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(Uh.label,function(){return new MR({style:w})}).node(),this.label.update(w,!1)},Object.defineProperty(t.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,s=n.labelSpacing,l=n.tickLength,c=this.ribbonShape.size,h=this.labelPosition,p=this.labelFixedSpacing,v=(0,se.CR)([0,0,0],3),y=v[0],b=v[1],w=v[2],R=l!=null?l:c;return r?(w=R,b=p,i==="positive"?h==="right"?(y=R,w=R):h==="bottom"&&(y=w):i==="negative"&&(h==="top"||h==="left")&&(y=c)):i==="positive"?h==="right"?b=R:h==="bottom"&&(y=c+p,b=s):i==="negative"&&(h==="left"||h==="top")&&(b=s),{offset:y,spacing:b,tickLength:w}},enumerable:!1,configurable:!0}),t.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,s=r.y,l=r.width,c=r.height,h=this.labelAxisStyle,p=h.offset,v=h.spacing,y=h.tickLength,b=(0,se.CR)(this.ifHorizontal([[i,s+p],[i+l,s+p]],[[i+p,s+c],[i+p,s]]),2),w=b[0],R=b[1];this.label.update({startPos:w,endPos:R,tickLength:y,labelSpacing:v},!1)}},t.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},t.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var s=this.range,l=s.min,c=s.max,h=this.ribbonBBox,p=h.x,v=h.y,y=(0,d.Z)(n,l,c),b=this.getOffset(y),w=this.ifHorizontal([b+p,v],[p,b+v]);this.indicator.update({x:w[0],y:w[1],position:this.ifHorizontal("top","left"),labelText:r}),w2(this.indicator.node())},t.prototype.hideIndicator=function(){wy(this.indicator.node())},t.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},t.prototype.setSelection=function(n,r){this.updateSelection(n,r)},t.prototype.updateSelection=function(n,r,i){var s;i===void 0&&(i=!1);var l=(0,se.CR)(this.selection,2),c=l[0],h=l[1],p=(0,se.CR)([n,r],2),v=p[0],y=p[1];i&&(v+=c,y+=h);var b=this.range,w=b.min,R=b.max;s=(0,se.CR)(cW([w,R],[v,y],this.selection),2),v=s[0],y=s[1],this.update({defaultValue:[v,y]}),this.dispatchSelection()},Object.defineProperty(t.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,s=i.min,l=i.max;return js(r)?vw((l-s)*pW,0):r},enumerable:!1,configurable:!0}),t.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,s=r.block,l=this.range.min;return s?PL(i.map(function(c){var h=c.value;return h}),n).tick:aW(n,this.step,l)},t.prototype.getValueByCanvasPoint=function(n){var r=this.range,i=r.min,s=r.max,l=(0,se.CR)(this.ribbon.node().getPosition(),2),c=l[0],h=l[1],p=this.ifHorizontal(c,h),v=this.ifHorizontal.apply(this,(0,se.ev)([],(0,se.CR)(mw(n)),!1)),y=v-p,b=(0,d.Z)(this.getOffset(y,!0),i,s);return b},t.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,s=i.min,l=i.max,c=this.ribbonShape.length,h=this.eventToOffsetScale;return h.update({domain:[s,l],range:[0,c]}),r?h.invert(n):h.map(n)},t.prototype.getRealSelection=function(n){var r=this.range.max,i=(0,se.CR)(n,2),s=i[0],l=i[1];return this.ifHorizontal([s,l],[r-l,r-s])},t.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},t.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new Vi("valuechange",{detail:{value:n}});this.dispatchEvent(r)},t.prototype.dispatchIndicated=function(n,r){var i=this,s=this.range.max,l=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:s-n,range:r?i.getRealSelection(r):void 0}}),c=new Vi("indicate",{detail:l});this.dispatchEvent(c)},t}(vh);class N2 extends P2{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:Q_}}map(t){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(t){const[n]=this.options.range;return t===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:t,domain:n,tickCount:r}=this.options,[i,s]=n;return!(0,Gl.Z)(i)||!(0,Gl.Z)(s)?[]:t(i,s,r)}clone(){return new N2(this.options)}}class Ab extends P2{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!cw(t))return this.options.unknown;const n=PR(this.thresholds,t,0,this.n);return this.options.range[n]}invert(t){const{range:n}=this.options,r=n.indexOf(t),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new Ab(this.options)}rescale(){const{domain:t,range:n}=this.options;this.n=Math.min(t.length,n.length-1),this.thresholds=t}}function B2(e){return(0,ya.Z)(e)?0:is(e)?e.length:Object.keys(e).length}var wW=function(e,t){if(!is(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},DL=wW;function F2(e){return Math.abs(e)<1e-14?e:parseFloat(e.toFixed(14))}const AW=[1,5,2,2.5,4,3],Gde=null,NL=Number.EPSILON*100;function OW(e,t){return(e%t+t)%t}function CW(e){return Math.round(e*1e12)/1e12}function RW(e,t,n,r,i,s){const l=B2(t),c=DL(t,e);let h=0;const p=OW(r,s);return(p<NL||s-p<NL)&&r<=0&&i>=0&&(h=1),1-c/(l-1)-n+h}function MW(e,t,n){const r=B2(t);return 1-DL(t,e)/(r-1)-n+1}function PW(e,t,n,r,i,s){const l=(e-1)/(s-i),c=(t-1)/(Math.max(s,r)-Math.min(n,i));return 2-Math.max(l/c,c/l)}function IW(e,t){return e>=t?2-(e-1)/(t-1):1}function LW(e,t,n,r){const i=t-e;return 1-.5*(gf(t-r,2)+gf(e-n,2))/gf(.1*i,2)}function DW(e,t,n){const r=t-e;if(n>r){const i=(n-r)/2;return 1-gf(i,2)/gf(.1*r,2)}return 1}function NW(){return 1}const kR=(e,t,n=5,r=!0,i=AW,s=[.25,.2,.5,.05])=>{const l=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||typeof e!="number"||typeof t!="number"||!l)return[];if(t-e<1e-15||l===1)return[e];const c={score:-2,lmin:0,lmax:0,lstep:0};let h=1;for(;h<1/0;){for(let R=0;R<i.length;R+=1){const M=i[R],I=MW(M,i,h);if(s[0]*I+s[1]+s[2]+s[3]<c.score){h=1/0;break}let N=2;for(;N<1/0;){const z=IW(N,l);if(s[0]*I+s[1]+s[2]*z+s[3]<c.score)break;const H=(t-e)/(N+1)/h/M;let X=Math.ceil(Math.log10(H));for(;X<1/0;){const $=h*M*gf(10,X),te=DW(e,t,$*(N-1));if(s[0]*I+s[1]*te+s[2]*z+s[3]<c.score)break;const fe=Math.floor(t/$)*h-(N-1)*h,ye=Math.ceil(e/$)*h;if(fe<=ye){const Le=ye-fe;for(let Ge=0;Ge<=Le;Ge+=1){const gt=(fe+Ge)*($/h),qe=gt+$*(N-1),lt=$,ft=RW(M,i,h,gt,qe,lt),pt=LW(e,t,gt,qe),Zt=PW(N,l,e,t,gt,qe),Ct=NW(),Lt=s[0]*ft+s[1]*pt+s[2]*Zt+s[3]*Ct;Lt>c.score&&(!r||gt<=e&&qe>=t)&&(c.lmin=gt,c.lmax=qe,c.lstep=lt,c.score=Lt)}}X+=1}N+=1}}h+=1}const p=F2(c.lmax),v=F2(c.lmin),y=F2(c.lstep),b=Math.floor(CW((p-v)/y))+1,w=new Array(b);w[0]=F2(v);for(let R=1;R<b;R+=1)w[R]=F2(w[R-1]+y);return w};class gw extends Ab{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:kR}}constructor(t){super(t)}nice(){const{nice:t}=this.options;if(t){const[n,r,i]=this.getTickMethodOptions();this.options.domain=oL(n,r,i)}}getTicks(){const{tickMethod:t}=this.options,[n,r,i]=this.getTickMethodOptions();return t(n,r,i)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}rescale(){this.nice();const{range:t,domain:n}=this.options,[r,i]=n;this.n=t.length-1,this.thresholds=new Array(this.n);for(let s=0;s<this.n;s+=1)this.thresholds[s]=((s+1)*i-(s-this.n)*r)/(this.n+1)}invert(t){const[n,r]=super.invert(t),[i,s]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||s]}getThresholds(){return this.thresholds}clone(){return new gw(this.options)}}function BW(e,t){const n=e.length;if(!n)return;if(n<2)return e[n-1];const r=(n-1)*t,i=Math.floor(r),s=e[i],l=e[i+1];return s+(l-s)*(r-i)}function FW(e,t,n=!1){const r=e;n||r.sort((s,l)=>s-l);const i=[];for(let s=1;s<t;s+=1)i.push(BW(r,s/t));return i}class yw extends Ab{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:kR}}constructor(t){super(t)}rescale(){const{domain:t,range:n}=this.options;this.n=n.length-1,this.thresholds=FW(t,this.n+1,!1)}invert(t){const[n,r]=super.invert(t),{domain:i}=this.options,s=i[0],l=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||s,r||l]}getThresholds(){return this.thresholds}clone(){return new yw(this.options)}getTicks(){const{tickCount:t,domain:n,tickMethod:r}=this.options,i=n.length-1,s=n[0],l=n[i];return r(s,l,t)}}var kW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zW(e,t,n){return e.size=t,yH(n)?e.height=t:e.width=t,e}function UW(e,t,n){const{size:r}=t,i=hL(e,t,n);return zW(i,r,i.orientation)}function jW(e){return t=>({value:t/e,label:String(t)})}function VW(e,t,n,r,i){const s=t.thresholds,l=jW(r);return Object.assign(Object.assign({},e),{color:i,data:[n,...s,r].map(l)})}function HW(e,t,n){const i=[-1/0,...t.thresholds,1/0].map((s,l)=>({value:l,label:s}));return Object.assign(Object.assign({},e),{data:i,color:n,labelFilter:(s,l)=>l>0&&l<i.length-1})}function zR(e){const{domain:t}=e.getOptions(),[n,r]=[t[0],ui(t)];return[n,r]}function WW(e,t){const n=e.getOptions(),r=e.clone();return r.update(Object.assign(Object.assign({},n),{range:[H0(t).toString()]})),r}function GW(e,t,n,r,i,s){const{length:l}=e,c=n||r,h=i.color?s.legendContinuous.ribbonFill||"black":s.color,p=t||WW(c,h),[v,y]=zR(p),[b,w]=zR([t,n,r].filter(R=>R!==void 0).find(R=>!(R instanceof N2)));return Object.assign(Object.assign({},e),{domain:[b,w],data:p.getTicks().map(R=>({value:R})),color:new Array(Math.floor(l)).fill(0).map((R,M)=>{const I=(y-v)/(l-1)*M+v,N=p.map(I)||h,z=r?r.map(I):1;return N.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(H,X,$,te)=>`rgba(${X}, ${$}, ${te}, ${z})`)})})}function ZW(e,t,n,r,i,s){const l=Am(e,"color"),c=UW(n,r,i);if(l instanceof Ab){const{range:v}=l.getOptions(),[y,b]=zR(l);return l instanceof gw||l instanceof yw?VW(c,l,y,b,v):HW(c,l,v)}const h=Am(e,"size"),p=Am(e,"opacity");return GW(c,l,h,p,t,s)}const Cy=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:c,style:h,crossPadding:p,padding:v}=e,y=kW(e,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:b,value:w,theme:R,scale:M})=>{const{bbox:I}=w,{x:N,y:z,width:H,height:X}=I,$=cL(s,n),{legendContinuous:te={}}=R,fe=pw(Object.assign({},te,Object.assign(Object.assign({titleText:dw(c),labelAlign:"value",labelFormatter:typeof t=="string"?Le=>Ye(t)(Le.label):t},ZW(b,M,w,e,Cy,R)),h),y)),ye=new fL({style:Object.assign(Object.assign({x:N,y:z,width:H,height:X},$),{subOptions:fe})});return ye.appendChild(new TW({className:"legend-continuous",style:fe})),ye}};Cy.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const BL=e=>(...t)=>Cy(Object.assign({},{block:!0},e))(...t);BL.props=Object.assign(Object.assign({},Cy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const UR=e=>t=>{const{scales:n}=t,r=Am(n,"size");return Cy(Object.assign({},{type:"size",data:r.getTicks().map((i,s)=>({value:i,label:String(i)}))},e))(t)};UR.props=Object.assign(Object.assign({},Cy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const FL=e=>UR(Object.assign({},{block:!0},e));FL.props=Object.assign(Object.assign({},Cy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var XW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const kL=({static:e=!1}={})=>t=>{const{width:n,height:r,depth:i,paddingLeft:s,paddingRight:l,paddingTop:c,paddingBottom:h,padding:p,inset:v,insetLeft:y,insetTop:b,insetRight:w,insetBottom:R,margin:M,marginLeft:I,marginBottom:N,marginTop:z,marginRight:H,data:X,coordinate:$,theme:te,component:fe,interaction:ye,x:Le,y:Ge,z:Qe,key:gt,frame:qe,labelTransform:lt,parentKey:ft,clip:pt,viewStyle:Zt,title:Ct}=t,Lt=XW(t,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:Le,y:Ge,z:Qe,key:gt,width:n,height:r,depth:i,padding:p,paddingLeft:s,paddingRight:l,paddingTop:c,inset:v,insetLeft:y,insetTop:b,insetRight:w,insetBottom:R,paddingBottom:h,theme:te,coordinate:$,component:fe,interaction:ye,frame:qe,labelTransform:lt,margin:M,marginLeft:I,marginBottom:N,marginTop:z,marginRight:H,parentKey:ft,clip:pt,style:Zt},!e&&{title:Ct}),{marks:[Object.assign(Object.assign(Object.assign({},Lt),{key:`${gt}-0`,data:X}),e&&{title:Ct})]})]};kL.props={};var $W=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Ob(e){return(t,...n)=>oi({},e(t,...n),t)}function Cb(e){return(t,...n)=>oi({},t,e(t,...n))}function jR(e,t){if(!e)return t;if(Array.isArray(e))return e;const{value:n=t}=e,r=$W(e,["value"]);return Object.assign(Object.assign({},r),{value:n})}var VR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const zL=()=>e=>{const{children:t}=e,n=VR(e,["children"]);if(!Array.isArray(t))return[];const{data:r,scale:i={},axis:s={},legend:l={},encode:c={},transform:h=[]}=n,p=VR(n,["data","scale","axis","legend","encode","transform"]),v=t.map(y=>{var{data:b,scale:w={},axis:R={},legend:M={},encode:I={},transform:N=[]}=y,z=VR(y,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:jR(b,r),scale:oi({},i,w),encode:oi({},c,I),transform:[...h,...N],axis:R&&s?oi({},s,R):!1,legend:M&&l?oi({},l,M):!1},z)});return[Object.assign(Object.assign({},p),{marks:v,type:"standardView"})]};zL.props={};function Ic([e,t],[n,r]){return[e-n,t-r]}function _w([e,t],[n,r]){return[e+n,t+r]}function Fu([e,t],[n,r]){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function Y0([e,t]){return Math.atan2(t,e)}function Rb([e,t]){return Y0([e,t])+Math.PI/2}function UL(e,t){const n=Y0(e),r=Y0(t);return n<r?r-n:Math.PI*2-(n-r)}function HR(e){let t=1/0,n=-1/0,r=1/0,i=-1/0;for(const[c,h]of e)t=Math.min(c,t),n=Math.max(c,n),r=Math.min(h,r),i=Math.max(h,i);const s=n-t,l=i-r;return[t,r,s,l]}function jL([e,t],[n,r]){return[(e+n)/2,(t+r)/2]}function ia(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function YW(e,t){return t.forEach((n,r)=>r===0?e.moveTo(n[0],n[1]):e.lineTo(n[0],n[1])),e.closePath(),e}function KW(e,t,n){const{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*Fu(e,t):r,s=Math.PI/6,l=Math.atan2(t[1]-e[1],t[0]-e[0]),c=Math.PI/2-l-s,h=[t[0]-i*Math.sin(c),t[1]-i*Math.cos(c)],p=l-s,v=[t[0]-i*Math.cos(p),t[1]-i*Math.sin(p)];return[h,v]}function k2(e,t,n,r,i){const s=Y0(Ic(r,t))+Math.PI,l=Y0(Ic(r,n))+Math.PI;return e.arc(r[0],r[1],i,s,l,l-s<0),e}function VL(e,t,n,r="y",i="between",s=!1){const l=(I,N)=>I==="y"||I===!0?N?180:90:N?90:0,c=r==="y"||r===!0?n:t,h=l(r,s),p=lr(c),[v,y]=Eg(p,I=>c[I]),b=new md({domain:[v,y],range:[0,100]}),w=I=>(0,Gl.Z)(c[I])&&!Number.isNaN(c[I])?b.map(c[I]):0,R={between:I=>`${e[I]} ${w(I)}%`,start:I=>I===0?`${e[I]} ${w(I)}%`:`${e[I-1]} ${w(I)}%, ${e[I]} ${w(I)}%`,end:I=>I===e.length-1?`${e[I]} ${w(I)}%`:`${e[I]} ${w(I)}%, ${e[I+1]} ${w(I)}%`},M=p.sort((I,N)=>w(I)-w(N)).map(R[i]||R.between).join(",");return`linear-gradient(${h}deg, ${M})`}function bw(e){const[t,n,r,i]=e;return[i,t,n,r]}function e1(e,t,n){const[r,i,,s]=wu(e)?bw(t):t,[l,c]=n,h=e.getCenter(),p=Rb(Ic(r,h)),v=Rb(Ic(i,h)),y=v===p&&l!==c?v+Math.PI*2:v;return{startAngle:p,endAngle:y-p>=0?y:Math.PI*2+y,innerRadius:Fu(s,h),outerRadius:Fu(r,h)}}function Zde(e){const t="connect";return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(t)).map(([n,r])=>[lowerFirst(n.replace(t,"").trim()),r]).filter(([n])=>n!==void 0))}function WR(e){const{colorAttribute:t,opacityAttribute:n=t}=e;return`${n}Opacity`}function HL(e,t){if(!au(e))return"";const n=e.getCenter(),{transform:r}=t;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function GR(e){if(e.length===1)return e[0];const[[t,n,r=0],[i,s,l=0]]=e;return[(t+i)/2,(n+s)/2,(r+l)/2]}function WL(e){return e.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})}function qW(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}var Xde=Array.prototype.slice;function GL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xu(e){return function(){return e}}function ZL(e){this._context=e}ZL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function z2(e){return new ZL(e)}const ZR=Math.PI,XR=2*ZR,t1=1e-6,QW=XR-t1;function XL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function JW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return XL;const n=gf(10,t);return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class xw{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?XL:JW(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,c=this._y1,h=r-t,p=i-n,v=l-t,y=c-n,b=v*v+y*y;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>t1)if(!(Math.abs(y*h-p*v)>t1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let w=r-l,R=i-c,M=h*h+p*p,I=w*w+R*R,N=Math.sqrt(M),z=Math.sqrt(b),H=s*Math.tan((ZR-Math.acos((M+b-I)/(2*N*z)))/2),X=H/z,$=H/N;Math.abs(X-1)>t1&&this._append`L${t+X*v},${n+X*y}`,this._append`A${s},${s},0,0,${+(y*w>v*R)},${this._x1=t+$*h},${this._y1=n+$*p}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),h=r*Math.sin(i),p=t+c,v=n+h,y=1^l,b=l?i-s:s-i;this._x1===null?this._append`M${p},${v}`:(Math.abs(this._x1-p)>t1||Math.abs(this._y1-v)>t1)&&this._append`L${p},${v}`,r&&(b<0&&(b=b%XR+XR),b>QW?this._append`A${r},${r},0,1,${y},${t-c},${n-h}A${r},${r},0,1,${y},${this._x1=p},${this._y1=v}`:b>t1&&this._append`A${r},${r},0,${+(b>=ZR)},${y},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function K0(){return new xw}K0.prototype=xw.prototype;function $de(e=3){return new xw(+e)}function $R(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new xw(t)}function $L(e){return e[0]}function YL(e){return e[1]}function Ry(e,t){var n=Xu(!0),r=null,i=z2,s=null,l=$R(c);e=typeof e=="function"?e:e===void 0?$L:Xu(e),t=typeof t=="function"?t:t===void 0?YL:Xu(t);function c(h){var p,v=(h=GL(h)).length,y,b=!1,w;for(r==null&&(s=i(w=l())),p=0;p<=v;++p)!(p<v&&n(y=h[p],p,h))===b&&((b=!b)?s.lineStart():s.lineEnd()),b&&s.point(+e(y,p,h),+t(y,p,h));if(w)return s=null,w+""||null}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:Xu(+h),c):e},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:Xu(+h),c):t},c.defined=function(h){return arguments.length?(n=typeof h=="function"?h:Xu(!!h),c):n},c.curve=function(h){return arguments.length?(i=h,r!=null&&(s=i(r)),c):i},c.context=function(h){return arguments.length?(h==null?r=s=null:s=i(r=h),c):r},c}function Mb(e){const t=typeof e=="function"?e:e.render;return class extends V1{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){t(this)}}}var YR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function eG(e){const{min:[t,n],max:[r,i]}=e.getLocalBounds();let s=0,l=0;return t>0&&(s=t),r<0&&(s=r),n>0&&(l=n),i<0&&(l=i),[s,l]}function tG(e,t=[]){const[n=0,r=0,i=n,s=r]=t,l=e.parentNode,c=l.getEulerAngles();l.setEulerAngles(0);const{min:h,halfExtents:p}=e.getLocalBounds(),[v,y]=h,[b,w]=p;return l.setEulerAngles(c),{x:v-s,y:y-n,width:b*2+s+r,height:w*2+n+i}}const nG=(e,t,n)=>{const r=Fu(e,t),i=Fu(t,n),s=Fu(n,e);return(Math.pow(r,2)+Math.pow(i,2)-Math.pow(s,2))/(2*r*i)};function rG(e,t,n,r){const[[i,s],[l,c]]=t,[h,p]=eG(e);if(i===l&&s===c)return Ry()([[0,0],[h,p]]);const v=[[i-l,s-c]].concat(n.length?n:[[0,0]]),y=[r[0]-l,r[1]-c],[b,w]=v;if(nG(y,b,w)>0){const R=(()=>{const{min:M,max:I}=e.getLocalBounds(),N=b[0]+(b[1]-y[1])*(b[1]-0)/(b[0]-y[0]);return I[0]<y[0]?Math.min(I[0],N):Math.max(M[0],N)})();v.splice(1,1,[R,0])}return Ry()(v)}const KL=Mb(e=>{const t=e.attributes,{className:n,class:r,transform:i,rotate:s,labelTransform:l,labelTransformOrigin:c,x:h,y:p,x0:v=h,y0:y=p,text:b,background:w,connector:R,startMarker:M,endMarker:I,coordCenter:N,innerHTML:z}=t,H=YR(t,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(e.style.transform=`translate(${h}, ${p})`,[h,p,v,y].some(pt=>!(0,Gl.Z)(pt))){e.children.forEach(pt=>pt.remove());return}const X=go(H,"background"),{padding:$}=X,te=YR(X,["padding"]),fe=go(H,"connector"),{points:ye=[]}=fe,Le=YR(fe,["points"]),Ge=[[+v,+y],[+h,+p]];let Qe;z?Qe=Aa(e).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",z).call(ia,Object.assign({transform:l,transformOrigin:c},H)).node():Qe=Aa(e).maybeAppend("text","text").style("zIndex",0).style("text",b).call(ia,Object.assign({textBaseline:"middle",transform:l,transformOrigin:c},H)).node();const gt=Aa(e).maybeAppend("background","rect").style("zIndex",-1).call(ia,tG(Qe,$)).call(ia,w?te:{}).node(),qe=rG(gt,Ge,ye,N),lt=M&&new kl({id:"startMarker",style:Object.assign({x:0,y:0},go(H,"startMarker"))}),ft=I&&new kl({id:"endMarker",style:Object.assign({x:0,y:0},go(H,"endMarker"))});Aa(e).maybeAppend("connector","path").style("zIndex",0).style("d",qe).style("markerStart",lt).style("markerEnd",ft).call(ia,R?Le:{})});function Pb(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function iG(e,t,n,r){const i=t.length/2,s=t.slice(0,i),l=t.slice(i);let c=Pb(s,(w,R)=>Math.abs(w[1]-l[R][1]));c=Math.max(Math.min(c,i-2),1);const h=w=>[s[w][0],(s[w][1]+l[w][1])/2],p=h(c),v=h(c-1),y=h(c+1),b=Y0(Ic(y,v))/Math.PI*180;return{x:p[0],y:p[1],transform:`rotate(${b})`,textAlign:"center",textBaseline:"middle"}}function qL(e,t,n,r){const{bounds:i}=n,[[s,l],[c,h]]=i,p=c-s,v=h-l,y=b=>{const{x:w,y:R}=b,M=KT(n.x,p),I=KT(n.y,v);return Object.assign(Object.assign({},b),{x:(M||w)+s,y:(I||R)+l})};return y(e==="left"?{x:0,y:v/2,textAlign:"start",textBaseline:"middle"}:e==="right"?{x:p,y:v/2,textAlign:"end",textBaseline:"middle"}:e==="top"?{x:p/2,y:0,textAlign:"center",textBaseline:"top"}:e==="bottom"?{x:p/2,y:v,textAlign:"center",textBaseline:"bottom"}:e==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:e==="top-right"?{x:p,y:0,textAlign:"end",textBaseline:"top"}:e==="bottom-left"?{x:0,y:v,textAlign:"start",textBaseline:"bottom"}:e==="bottom-right"?{x:p,y:v,textAlign:"end",textBaseline:"bottom"}:{x:p/2,y:v/2,textAlign:"center",textBaseline:"middle"})}function QL(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:c}=n,h=r.getCenter(),p=e1(r,t,[i,s]),{innerRadius:v,outerRadius:y,startAngle:b,endAngle:w}=p,R=e==="inside"?(b+w)/2:w,M=KR(R,l,c),I=(()=>{const[N,z]=t,H=v+(y-v)*.5,[X,$]=e==="inside"?U2(h,R,H):jL(N,z);return{x:X,y:$}})();return Object.assign(Object.assign({},I),{textAlign:e==="inside"?"center":"start",textBaseline:"middle",rotate:M})}function U2(e,t,n){return[e[0]+Math.sin(t)*n,e[1]-Math.cos(t)*n]}function KR(e,t,n){if(!t)return 0;const r=n?0:Math.sin(e)<0?90:-90;return e/Math.PI*180+r}function oG(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:c,radius:h=.5,offset:p=0}=n,v=e1(r,t,[i,s]),{startAngle:y,endAngle:b}=v,w=r.getCenter(),R=(y+b)/2,I={textAlign:"center",textBaseline:"middle",rotate:KR(R,l,c)},{innerRadius:N,outerRadius:z}=v,X=N+(z-N)*h+p,[$,te]=U2(w,R,X);return Object.assign({x:$,y:te},I)}function JL(e){return e===void 0?null:e}function e6(e,t,n,r){const{bounds:i}=n,[s]=i;return{x:JL(s[0]),y:JL(s[1])}}function Sg(e,t,n,r){const{bounds:i}=n;return i.length===1?e6(e,t,n,r):(X_(r)?QL:df(r)?oG:qL)(e,t,n,r)}function aG(e,t,n,r,i){const[s,l]=U2(e,t,n),[c,h]=U2(e,t,r),p=Math.sin(t)>0?1:-1;return[[s,l],[c,h],[c+p*i,h]]}function t6(e,t,n){const r=e1(n,e,[t.y,t.y1]),{innerRadius:i,outerRadius:s}=r;return i+(s-i)}function n6(e,t,n){const r=e1(n,e,[t.y,t.y1]),{startAngle:i,endAngle:s}=r;return(i+s)/2}function qR(e,t,n,r){const{autoRotate:i,rotateToAlignArc:s,offset:l=0,connector:c=!0,connectorLength:h=l,connectorLength2:p=0,connectorDistance:v=0}=n,y=r.getCenter(),b=n6(t,n,r),w=Math.sin(b)>0?1:-1,R=KR(b,i,s),M={textAlign:w>0||X_(r)?"start":"end",textBaseline:"middle",rotate:R},I=t6(t,n,r),N=I+(c?h:l),[[z,H],[X,$],[te,fe]]=aG(y,b,I,N,c?p:0),ye=c?+v*w:0,Le=te+ye,Ge=fe,Qe={connector:c,connectorPoints:[[X-Le,$-Ge],[te-Le,fe-Ge]]};return Object.assign(Object.assign({x0:z,y0:H,x:te+ye,y:fe},M),Qe)}function sG(e,t,n,r){const{bounds:i}=n;return i.length===1?e6(e,t,n,r):(X_(r)?QL:df(r)?qR:qL)(e,t,n,r)}var lG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function uG(e,t,n,r){if(!df(r))return{};const{connectorLength:i,connectorLength2:s,connectorDistance:l}=n,c=lG(qR("outside",t,n,r),[]),h=r.getCenter(),p=t6(t,n,r),v=n6(t,n,r),y=p+i+s,b=Math.sin(v)>0?1:-1,w=h[0]+(y+ +l)*b,{x:R}=c,M=w-R;return c.x+=M,c.connectorPoints[0][0]-=M,c}var cG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fG(e,t,n,r){if(!df(r))return{};const{connectorLength:i,connectorLength2:s,connectorDistance:l}=n,c=cG(qR("outside",t,n,r),[]),{x0:h,y0:p}=c,v=r.getCenter(),b=ep(r)+i,w=Rb([h-v[0],p-v[1]]),R=Math.sin(w)>0?1:-1,[M,I]=U2(v,w,b);return c.x=M+(s+l)*R,c.y=I,c}var r6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function hG(e,t){return e!==void 0?e:df(t)?"inside":wu(t)?"right":"top"}function dG(e,t,n,r,i){const{position:s}=t,{render:l}=i,c=hG(s,n),p=r[l?"htmlLabel":c==="inside"?"innerLabel":"label"],v=Object.assign({},p,t),y=q[WL(c)];if(!y)throw new Error(`Unknown position: ${c}`);return Object.assign(Object.assign({},p),y(c,e,v,n,i))}const i6=(e,t)=>{const{coordinate:n,theme:r}=t,{render:i}=e;return(s,l)=>{const{text:c,x:h,y:p,transform:v="",transformOrigin:y,className:b=""}=l,w=r6(l,["text","x","y","transform","transformOrigin","className"]),R=dG(s,l,n,r,e),{rotate:M=0,transform:I=""}=R,N=r6(R,["rotate","transform"]);return Aa(new KL).call(ia,N).style("text",`${c}`).style("className",`${b} g2-label`).style("innerHTML",i?i(c,l.datum,l.index):void 0).style("labelTransform",`${I} rotate(${+M}) ${v}`.trim()).style("labelTransformOrigin",y).style("coordCenter",n.getCenter()).call(ia,w).node()}};i6.props={defaultMarker:"point"};function Lc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pG(e,t){return Array.from(t,n=>e[n])}function Tg(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const l of t){const c=j2(l[i],l[s]);if(c)return c}})):(n=e.map(n),r.sort((i,s)=>j2(n[i],n[s]))),pG(e,r)}return e.sort(o6(n))}function o6(e=Lc){if(e===Lc)return j2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function j2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var vG=function(e,t){if(!is(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},a6=vG;function mG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ib(e){let t,n,r;e.length!==2?(t=Lc,n=(c,h)=>Lc(e(c),h),r=(c,h)=>e(c)-h):(t=e===Lc||e===mG?e:gG,n=e,r=e);function i(c,h,p=0,v=c.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(c[y],h)<0?p=y+1:v=y}while(p<v)}return p}function s(c,h,p=0,v=c.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(c[y],h)<=0?p=y+1:v=y}while(p<v)}return p}function l(c,h,p=0,v=c.length){const y=i(c,h,p,v-1);return y>p&&r(c[y-1],h)>-r(c[y],h)?y-1:y}return{left:i,center:l,right:s}}function gG(){return 0}function QR(e){return e===null?NaN:+e}function*yG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const s6=Ib(Lc),_G=s6.right,bG=s6.left,xG=Ib(QR).center;var EG=_G;function SG(e,t,n){return Math.min(n,Math.max(t,e))}function V2(e){return!!e.getBandWidth}function Lb(e,t,n){if(!V2(e))return e.invert(t);const{adjustedRange:r}=e,{domain:i}=e.getOptions(),s=n?-1:0,l=e.getStep(),c=n?r:r.map(v=>v+l),h=bG(c,t),p=SG(h+s,0,i.length-1);return i[p]}function My(e,t,n){if(!t)return e.getOptions().domain;if(!V2(e)){const h=Tg(t);if(!n)return h;const[p]=h,{range:v}=e.getOptions(),[y,b]=v,w=y>b?-1:1,R=e.invert(e.map(p)+w*n);return[p,R]}const{domain:r}=e.getOptions(),i=t[0],s=r.indexOf(i);if(n){const h=s+Math.round(r.length*n);return r.slice(s,h)}const l=t[t.length-1],c=r.indexOf(l);return r.slice(s,c+1)}function Ew(e,t,n,r,i,s){const{x:l,y:c}=i,h=(w,R)=>{const[M,I]=s.invert(w);return[Lb(l,M,R),Lb(c,I,R)]},p=h([e,t],!0),v=h([n,r],!1),y=My(l,[p[0],v[0]]),b=My(c,[p[1],v[1]]);return[y,b]}function Sw(e,t){const[n,r]=e,i=s=>s.getStep?s.getStep():0;return[t.map(n),t.map(r)+i(t)]}function TG(e,t,n){const{x:r,y:i}=t,[s,l]=e,c=Sw(s,r),h=Sw(l,i),p=[c[0],h[0]],v=[c[1],h[1]],[y,b]=n.map(p),[w,R]=n.map(v);return[y,b,w,R]}const l6=Math.abs,gd=Math.atan2,n1=Math.cos,wG=Math.max,JR=Math.min,Rm=Math.sin,Db=Math.sqrt,yd=1e-12,H2=Math.PI,Tw=H2/2,AG=2*H2;function OG(e){return e>1?0:e<-1?H2:Math.acos(e)}function u6(e){return e>=1?Tw:e<=-1?-Tw:Math.asin(e)}function CG(e){return e.innerRadius}function RG(e){return e.outerRadius}function MG(e){return e.startAngle}function PG(e){return e.endAngle}function IG(e){return e&&e.padAngle}function LG(e,t,n,r,i,s,l,c){var h=n-e,p=r-t,v=l-i,y=c-s,b=y*h-v*p;if(!(b*b<yd))return b=(v*(t-s)-y*(e-i))/b,[e+b*h,t+b*p]}function ww(e,t,n,r,i,s,l){var c=e-n,h=t-r,p=(l?s:-s)/Db(c*c+h*h),v=p*h,y=-p*c,b=e+v,w=t+y,R=n+v,M=r+y,I=(b+R)/2,N=(w+M)/2,z=R-b,H=M-w,X=z*z+H*H,$=i-s,te=b*M-R*w,fe=(H<0?-1:1)*Db(wG(0,$*$*X-te*te)),ye=(te*H-z*fe)/X,Le=(-te*z-H*fe)/X,Ge=(te*H+z*fe)/X,Qe=(-te*z+H*fe)/X,gt=ye-I,qe=Le-N,lt=Ge-I,ft=Qe-N;return gt*gt+qe*qe>lt*lt+ft*ft&&(ye=Ge,Le=Qe),{cx:ye,cy:Le,x01:-v,y01:-y,x11:ye*(i/$-1),y11:Le*(i/$-1)}}function Aw(){var e=CG,t=RG,n=Xu(0),r=null,i=MG,s=PG,l=IG,c=null,h=$R(p);function p(){var v,y,b=+e.apply(this,arguments),w=+t.apply(this,arguments),R=i.apply(this,arguments)-Tw,M=s.apply(this,arguments)-Tw,I=l6(M-R),N=M>R;if(c||(c=v=h()),w<b&&(y=w,w=b,b=y),!(w>yd))c.moveTo(0,0);else if(I>AG-yd)c.moveTo(w*n1(R),w*Rm(R)),c.arc(0,0,w,R,M,!N),b>yd&&(c.moveTo(b*n1(M),b*Rm(M)),c.arc(0,0,b,M,R,N));else{var z=R,H=M,X=R,$=M,te=I,fe=I,ye=l.apply(this,arguments)/2,Le=ye>yd&&(r?+r.apply(this,arguments):Db(b*b+w*w)),Ge=JR(l6(w-b)/2,+n.apply(this,arguments)),Qe=Ge,gt=Ge,qe,lt;if(Le>yd){var ft=u6(Le/b*Rm(ye)),pt=u6(Le/w*Rm(ye));(te-=ft*2)>yd?(ft*=N?1:-1,X+=ft,$-=ft):(te=0,X=$=(R+M)/2),(fe-=pt*2)>yd?(pt*=N?1:-1,z+=pt,H-=pt):(fe=0,z=H=(R+M)/2)}var Zt=w*n1(z),Ct=w*Rm(z),Lt=b*n1($),Tn=b*Rm($);if(Ge>yd){var Fn=w*n1(H),ir=w*Rm(H),tr=b*n1(X),Hr=b*Rm(X),mi;if(I<H2)if(mi=LG(Zt,Ct,tr,Hr,Fn,ir,Lt,Tn)){var Ki=Zt-mi[0],fi=Ct-mi[1],Zr=Fn-mi[0],yo=ir-mi[1],po=1/Rm(OG((Ki*Zr+fi*yo)/(Db(Ki*Ki+fi*fi)*Db(Zr*Zr+yo*yo)))/2),ko=Db(mi[0]*mi[0]+mi[1]*mi[1]);Qe=JR(Ge,(b-ko)/(po-1)),gt=JR(Ge,(w-ko)/(po+1))}else Qe=gt=0}fe>yd?gt>yd?(qe=ww(tr,Hr,Zt,Ct,w,gt,N),lt=ww(Fn,ir,Lt,Tn,w,gt,N),c.moveTo(qe.cx+qe.x01,qe.cy+qe.y01),gt<Ge?c.arc(qe.cx,qe.cy,gt,gd(qe.y01,qe.x01),gd(lt.y01,lt.x01),!N):(c.arc(qe.cx,qe.cy,gt,gd(qe.y01,qe.x01),gd(qe.y11,qe.x11),!N),c.arc(0,0,w,gd(qe.cy+qe.y11,qe.cx+qe.x11),gd(lt.cy+lt.y11,lt.cx+lt.x11),!N),c.arc(lt.cx,lt.cy,gt,gd(lt.y11,lt.x11),gd(lt.y01,lt.x01),!N))):(c.moveTo(Zt,Ct),c.arc(0,0,w,z,H,!N)):c.moveTo(Zt,Ct),!(b>yd)||!(te>yd)?c.lineTo(Lt,Tn):Qe>yd?(qe=ww(Lt,Tn,Fn,ir,b,-Qe,N),lt=ww(Zt,Ct,tr,Hr,b,-Qe,N),c.lineTo(qe.cx+qe.x01,qe.cy+qe.y01),Qe<Ge?c.arc(qe.cx,qe.cy,Qe,gd(qe.y01,qe.x01),gd(lt.y01,lt.x01),!N):(c.arc(qe.cx,qe.cy,Qe,gd(qe.y01,qe.x01),gd(qe.y11,qe.x11),!N),c.arc(0,0,b,gd(qe.cy+qe.y11,qe.cx+qe.x11),gd(lt.cy+lt.y11,lt.cx+lt.x11),N),c.arc(lt.cx,lt.cy,Qe,gd(lt.y11,lt.x11),gd(lt.y01,lt.x01),!N))):c.arc(0,0,b,$,X,N)}if(c.closePath(),v)return c=null,v+""||null}return p.centroid=function(){var v=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,y=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-H2/2;return[n1(y)*v,Rm(y)*v]},p.innerRadius=function(v){return arguments.length?(e=typeof v=="function"?v:Xu(+v),p):e},p.outerRadius=function(v){return arguments.length?(t=typeof v=="function"?v:Xu(+v),p):t},p.cornerRadius=function(v){return arguments.length?(n=typeof v=="function"?v:Xu(+v),p):n},p.padRadius=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:Xu(+v),p):r},p.startAngle=function(v){return arguments.length?(i=typeof v=="function"?v:Xu(+v),p):i},p.endAngle=function(v){return arguments.length?(s=typeof v=="function"?v:Xu(+v),p):s},p.padAngle=function(v){return arguments.length?(l=typeof v=="function"?v:Xu(+v),p):l},p.context=function(v){return arguments.length?(c=v==null?null:v,p):c},p}var Ow=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function c6(e,t,n,r,i={}){const{inset:s=0,radius:l=0,insetLeft:c=s,insetTop:h=s,insetRight:p=s,insetBottom:v=s,radiusBottomLeft:y=l,radiusBottomRight:b=l,radiusTopLeft:w=l,radiusTopRight:R=l,minWidth:M=-1/0,maxWidth:I=1/0,minHeight:N=-1/0}=i,z=Ow(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!au(r)&&!la(r)){const ye=!!wu(r),[Le,,Ge]=ye?bw(t):t,[Qe,gt]=Le,[qe,lt]=Ic(Ge,Le),ft=qe>0?Qe:Qe+qe,pt=lt>0?gt:gt+lt,Zt=Math.abs(qe),Ct=Math.abs(lt),Lt=ft+c,Tn=pt+h,Fn=Zt-(c+p),ir=Ct-(h+v),tr=ye?yb(Fn,N,1/0):yb(Fn,M,I),Hr=ye?yb(ir,M,I):yb(ir,N,1/0),mi=ye?Lt:Lt-(tr-Fn)/2,Ki=ye?Tn-(Hr-ir)/2:Tn-(Hr-ir);return Aa(e.createElement("rect",{})).style("x",mi).style("y",Ki).style("width",tr).style("height",Hr).style("radius",[w,R,b,y]).call(ia,z).node()}const{y:H,y1:X}=n,$=r.getCenter(),te=e1(r,t,[H,X]),fe=Aw().cornerRadius(l).padAngle(s*Math.PI/180);return Aa(e.createElement("path",{})).style("d",fe(te)).style("transform",`translate(${$[0]}, ${$[1]})`).style("radius",l).style("inset",s).call(ia,z).node()}const W2=(e,t)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:s=!0}=e,l=Ow(e,["colorAttribute","opacityAttribute","first","last"]),{coordinate:c,document:h}=t;return(p,v,y)=>{const{color:b,radius:w=0}=y,R=Ow(y,["color","radius"]),M=R.lineWidth||1,{stroke:I,radius:N=w,radiusTopLeft:z=N,radiusTopRight:H=N,radiusBottomRight:X=N,radiusBottomLeft:$=N,innerRadius:te=0,innerRadiusTopLeft:fe=te,innerRadiusTopRight:ye=te,innerRadiusBottomRight:Le=te,innerRadiusBottomLeft:Ge=te,lineWidth:Qe=n==="stroke"||I?M:0,inset:gt=0,insetLeft:qe=gt,insetRight:lt=gt,insetBottom:ft=gt,insetTop:pt=gt,minWidth:Zt,maxWidth:Ct,minHeight:Lt}=l,Tn=Ow(l,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:Fn=b,opacity:ir}=v,tr=[i?z:fe,i?H:ye,s?X:Le,s?$:Ge],Hr=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];wu(c)&&Hr.push(Hr.shift());const mi=Object.assign(Object.assign({radius:N},Object.fromEntries(Hr.map((Ki,fi)=>[Ki,tr[fi]]))),{inset:gt,insetLeft:qe,insetRight:lt,insetBottom:ft,insetTop:pt,minWidth:Zt,maxWidth:Ct,minHeight:Lt});return Aa(c6(h,p,v,c,mi)).call(ia,R).style("fill","transparent").style(n,Fn).style(WR(e),ir).style("lineWidth",Qe).style("stroke",I===void 0?Fn:I).call(ia,Tn).node()}};W2.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const DG={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function NG(e,t){var n;return(n=e.style[t])!==null&&n!==void 0?n:DG[t]}function eM(e,t,n,r){e.style[t]=n,r&&e.children.forEach(i=>eM(i,t,n,r))}function tM(e){eM(e,"visibility","hidden",!0)}function Cw(e){eM(e,"visibility","visible",!0)}var G2=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Py(e){return Aa(e).selectAll(`.${ca}`).nodes().filter(t=>!t.__removed__)}function f6(e,t){return nM(e,t).flatMap(({container:n})=>Py(n))}function nM(e,t){return t.filter(n=>n!==e&&n.options.parentKey===e.options.key)}function Mm(e){return Aa(e).select(`.${Ko}`).node()}function h6(e){if(e.tagName==="g")return e.getRenderBounds();const t=e.getGeometryBounds(),n=new _c;return n.setFromTransformedAABB(t,e.getWorldTransform()),n}function rM(e,t){const{offsetX:n,offsetY:r}=t,i=h6(e),{min:[s,l],max:[c,h]}=i,p=n<s||n>c,v=r<l||r>h;return p||v?null:[n-s,r-l]}function iM(e,t){const{offsetX:n,offsetY:r}=t,[i,s,l,c]=BG(e);return[Math.min(l,Math.max(i,n))-i,Math.min(c,Math.max(s,r))-s]}function BG(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return[n,r,i,s]}function d6(e){return t=>t.__data__.color}function oM(e){return t=>t.__data__.x}function r1(e){const t=Array.isArray(e)?e:[e],n=new Map(t.flatMap(r=>Array.from(r.markState.keys()).map(s=>[Rw(r.key,s.key),s.data])));return r=>{const{index:i,markKey:s,viewKey:l}=r.__data__;return n.get(Rw(l,s))[i]}}function wg(e,t=(r,i)=>r,n=(r,i,s)=>r.setAttribute(i,s)){const r="__states__",i="__ordinal__",s=v=>{const{[r]:y=[],[i]:b={}}=v,w=y.reduce((R,M)=>Object.assign(Object.assign({},R),e[M]),b);if(Object.keys(w).length!==0){for(const[R,M]of Object.entries(w)){const I=NG(v,R),N=t(M,v);n(v,R,N),R in b||(b[R]=I)}v[i]=b}},l=v=>{v[r]||(v[r]=[])};return{setState:(v,...y)=>{l(v),v[r]=[...y],s(v)},removeState:(v,...y)=>{l(v);for(const b of y){const w=v[r].indexOf(b);w!==-1&&v[r].splice(w,1)}s(v)},hasState:(v,y)=>(l(v),v[r].indexOf(y)!==-1)}}function FG(e){return e===void 0?!0:typeof e!="object"?!1:Object.keys(e).length===0}function Rw(e,t){return`${e},${t}`}function Nb(e,t){const r=(Array.isArray(e)?e:[e]).flatMap(s=>s.marks.map(l=>[Rw(s.key,l.key),l.state])),i={};for(const s of t){const[l,c]=Array.isArray(s)?s:[s,{}];i[l]=r.reduce((h,p)=>{const[v,y={}]=p,b=FG(y[l])?c:y[l];for(const[w,R]of Object.entries(b)){const M=h[w],I=(N,z,H,X)=>{const $=Rw(X.__data__.viewKey,X.__data__.markKey);return v!==$?M==null?void 0:M(N,z,H,X):typeof R!="function"?R:R(N,z,H,X)};h[w]=I}return h},{})}return i}function Z2(e,t){const n=new Map(e.map((i,s)=>[i,s])),r=t?e.map(t):e;return(i,s)=>{if(typeof i!="function")return i;const l=n.get(s),c=t?t(s):s;return i(c,l,r,s)}}function p6(e){var{link:t=!1,valueof:n=(v,y)=>v,coordinate:r}=e,i=G2(e,["link","valueof","coordinate"]);const s="element-link";if(!t)return[()=>{},()=>{}];const l=v=>v.__data__.points,c=(v,y)=>{const[,b,w]=v,[R,,,M]=y;return[b,R,M,w]};return[v=>{var y;if(v.length<=1)return;const b=Tg(v,(w,R)=>{const{x:M}=w.__data__,{x:I}=R.__data__;return M-I});for(let w=1;w<b.length;w++){const R=K0(),M=b[w-1],I=b[w],[N,z,H,X]=c(l(M),l(I));R.moveTo(...N),R.lineTo(...z),R.lineTo(...H),R.lineTo(...X),R.closePath();const $=Sn(i,Le=>n(Le,M)),{fill:te=M.getAttribute("fill")}=$,fe=G2($,["fill"]),ye=new fd({className:s,style:Object.assign({d:R.toString(),fill:te,zIndex:-2},fe)});(y=M.link)===null||y===void 0||y.remove(),M.parentNode.appendChild(ye),M.link=ye}},v=>{var y;(y=v.link)===null||y===void 0||y.remove(),v.link=null}]}function v6(e,t,n){const r=i=>{const{transform:s}=e.style;return s?`${s} ${i}`:i};if(au(n)){const{points:i}=e.__data__,[s,l]=wu(n)?bw(i):i,c=n.getCenter(),h=Ic(s,c),p=Ic(l,c),v=Y0(h),y=UL(h,p),b=v+y/2,w=t*Math.cos(b),R=t*Math.sin(b);return r(`translate(${w}, ${R})`)}return wu(n)?r(`translate(${t}, 0)`):r(`translate(0, ${-t})`)}function m6(e){var{document:t,background:n,scale:r,coordinate:i,valueof:s}=e,l=G2(e,["document","background","scale","coordinate","valueof"]);const c="element-background";if(!n)return[()=>{},()=>{}];const h=(N,z,H)=>{const X=N.invert(z),$=z+N.getBandWidth(X)/2,te=N.getStep(X)/2,fe=te*H;return[$-te+fe,$+te-fe]},p=(N,z)=>{const{x:H}=r;if(!V2(H))return[0,1];const{__data__:X}=N,{x:$}=X,[te,fe]=h(H,$,z);return[te,fe]},v=(N,z)=>{const{y:H}=r;if(!V2(H))return[0,1];const{__data__:X}=N,{y:$}=X,[te,fe]=h(H,$,z);return[te,fe]},y=(N,z)=>{const{padding:H}=z,[X,$]=p(N,H),[te,fe]=v(N,H),ye=[[X,te],[$,te],[$,fe],[X,fe]].map(gt=>i.map(gt)),{__data__:Le}=N,{y:Ge,y1:Qe}=Le;return c6(t,ye,{y:Ge,y1:Qe},i,z)},b=(N,z)=>{const{transform:H="scale(1.2, 1.2)",transformOrigin:X="center center",stroke:$=""}=z,te=G2(z,["transform","transformOrigin","stroke"]),fe=Object.assign({transform:H,transformOrigin:X,stroke:$},te),ye=N.cloneNode(!0);for(const[Le,Ge]of Object.entries(fe))ye.style[Le]=Ge;return ye},w=()=>{const{x:N,y:z}=r;return[N,z].some(V2)};return[N=>{N.background&&N.background.remove();const z=Sn(l,gt=>s(gt,N)),{fill:H="#CCD6EC",fillOpacity:X=.3,zIndex:$=-2,padding:te=.001,lineWidth:fe=0}=z,ye=G2(z,["fill","fillOpacity","zIndex","padding","lineWidth"]),Le=Object.assign(Object.assign({},ye),{fill:H,fillOpacity:X,zIndex:$,padding:te,lineWidth:fe}),Qe=(w()?y:b)(N,Le);Qe.className=c,N.parentNode.parentNode.appendChild(Qe),N.background=Qe},N=>{var z;(z=N.background)===null||z===void 0||z.remove(),N.background=null},N=>N.className===c]}function Iy(e,t){const r=e.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(e.cursor=r.style.cursor,r.style.cursor=t)}function kG(e){Iy(e,e.cursor)}function aM(e,t,n){return e.find(r=>Object.entries(t).every(([i,s])=>n(r)[i]===s))}function Mw(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function X2(e,t=!1){const n=a6(e,r=>!!r).map((r,i)=>[i===0?"M":"L",...r]);return t&&n.push(["Z"]),n}function g6(e){return e.querySelectorAll(".element")}function zG(e,t,n=0){const r=[["M",...t[1]]],i=Mw(e,t[1]),s=Mw(e,t[0]);return i===0?r.push(["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]):r.push(["A",i,i,0,n,0,...t[2]],["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]),r}function Pw(e,t){if(t(e))return e;let n=e.parent;for(;n&&!t(n);)n=n.parent;return n}function y6(e,t){const{__data__:n}=e,{markKey:r,index:i,seriesIndex:s}=n,{markState:l}=t,c=Array.from(l.keys()).find(h=>h.key===r);if(c)return s?s.map(h=>c.data[h]):c.data[i]}function UG(e){return Pw(e,t=>t.className==="component")}function jG(e){return Pw(e,t=>t.className==="element")}function VG(e){return Pw(e,t=>t.className==="label")}function mh(e,t,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${e}`,i);const{target:s}=i;if(!s)return;const{className:l}=s;if(l==="plot")return;const c=jG(s),h=UG(s),p=VG(s),v=c||h||p;if(!v)return;const{className:y,markType:b}=v,w=Object.assign(Object.assign({},i),{nativeEvent:!0});y==="element"?(w.data={data:y6(v,t)},n.emit(`element:${e}`,w),n.emit(`${b}:${e}`,w)):y==="label"?(w.data={data:v.attributes.datum},n.emit(`label:${e}`,w),n.emit(`${l}:${e}`,w)):(n.emit(`component:${e}`,w),n.emit(`${l}:${e}`,w))}}function _6(){return(e,t,n)=>{const{container:r,view:i}=e,s=mh(bl.CLICK,i,n,fe=>fe.detail===1),l=mh(bl.DBLCLICK,i,n,fe=>fe.detail===2),c=mh(bl.POINTER_TAP,i,n),h=mh(bl.POINTER_DOWN,i,n),p=mh(bl.POINTER_UP,i,n),v=mh(bl.POINTER_OVER,i,n),y=mh(bl.POINTER_OUT,i,n),b=mh(bl.POINTER_MOVE,i,n),w=mh(bl.POINTER_ENTER,i,n),R=mh(bl.POINTER_LEAVE,i,n),M=mh(bl.POINTER_UPOUTSIDE,i,n),I=mh(bl.DRAG_START,i,n),N=mh(bl.DRAG,i,n),z=mh(bl.DRAG_END,i,n),H=mh(bl.DRAG_ENTER,i,n),X=mh(bl.DRAG_LEAVE,i,n),$=mh(bl.DRAG_OVER,i,n),te=mh(bl.DROP,i,n);return r.addEventListener("click",s),r.addEventListener("click",l),r.addEventListener("pointertap",c),r.addEventListener("pointerdown",h),r.addEventListener("pointerup",p),r.addEventListener("pointerover",v),r.addEventListener("pointerout",y),r.addEventListener("pointermove",b),r.addEventListener("pointerenter",w),r.addEventListener("pointerleave",R),r.addEventListener("pointerupoutside",M),r.addEventListener("dragstart",I),r.addEventListener("drag",N),r.addEventListener("dragend",z),r.addEventListener("dragenter",H),r.addEventListener("dragleave",X),r.addEventListener("dragover",$),r.addEventListener("drop",te),()=>{r.removeEventListener("click",s),r.removeEventListener("click",l),r.removeEventListener("pointertap",c),r.removeEventListener("pointerdown",h),r.removeEventListener("pointerup",p),r.removeEventListener("pointerover",v),r.removeEventListener("pointerout",y),r.removeEventListener("pointermove",b),r.removeEventListener("pointerenter",w),r.removeEventListener("pointerleave",R),r.removeEventListener("pointerupoutside",M),r.removeEventListener("dragstart",I),r.removeEventListener("drag",N),r.removeEventListener("dragend",z),r.removeEventListener("dragenter",H),r.removeEventListener("dragleave",X),r.removeEventListener("dragover",$),r.removeEventListener("drop",te)}}}_6.props={reapplyWhenUpdate:!0};function HG(){return{"component.axisRadar":_L,"component.axisLinear":Ay,"component.axisArc":yL,"component.legendContinuousBlock":BL,"component.legendContinuousBlockSize":FL,"component.legendContinuousSize":UR,"interaction.event":_6,"composition.mark":kL,"composition.view":zL,"shape.label.label":i6}}var WG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $u(e,t){const n=Object.assign(Object.assign({},HG()),t),r=s=>{if(typeof s!="string")return s;const l=`${e}.${s}`;return n[l]||Ey(`Unknown Component: ${l}`)};return[(s,l)=>{const{type:c}=s,h=WG(s,["type"]);c||Ey("Plot type is required!");const p=r(c);return p==null?void 0:p(h,l)},r]}function b6(e){const{canvas:t,group:n}=e;return(t==null?void 0:t.document)||(n==null?void 0:n.ownerDocument)||Ey("Cannot find library document")}var x6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function GG(e,t,n){const[r]=$u("coordinate",n),{innerHeight:i,innerWidth:s,insetLeft:l,insetTop:c,insetRight:h,insetBottom:p}=e,{coordinates:v=[]}=t,y=qG(v),b=y[0].type==="cartesian3D",w=Object.assign(Object.assign({},e),{x:l,y:c,width:s-l-h,height:i-p-c,transformations:y.flatMap(r)});return b?new JT.Coordinate3D(w):new JT.Coordinate(w)}function E6(e,t){const{coordinate:n={}}=e,r=x6(e,["coordinate"]),{type:i,transform:s=[]}=n,l=x6(n,["type","transform"]);if(!i)return Object.assign(Object.assign({},r),{coordinates:s});const[,c]=$u("coordinate",t),{transform:h=!1}=c(i).props||{};if(h)throw new Error(`Unknown coordinate: ${i}.`);return Object.assign(Object.assign({},r),{coordinates:[Object.assign({type:i},l),...s]})}function Fv(e,t){return e.filter(n=>n.type===t)}function i1(e){return Fv(e,"polar").length>0}function ZG(e){return Fv(e,"helix").length>0}function Bb(e){return Fv(e,"transpose").length%2===1}function XG(e){return Fv(e,"parallel").length>0}function S6(e){return Fv(e,"theta").length>0}function $G(e){return Fv(e,"reflect").length>0}function $2(e){return Fv(e,"radial").length>0}function YG(e){return Fv(e,"radar").length>0}function KG(e){return Fv(e,"reflectY").length>0}function qG(e){return e.find(t=>t.type==="cartesian"||t.type==="cartesian3D")?e:[...e,{type:"cartesian"}]}function Fs(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var QG=Fs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),JG=Fs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),eZ=Fs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),tZ=Fs("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),nZ=Fs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),rZ=Fs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),iZ=Fs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),oZ=Fs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),aZ=Fs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),sZ=Fs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),lZ=Fs("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Iw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function sM(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Fb(){}var o1=.7,kb=1/o1,zb="\\s*([+-]?\\d+)\\s*",Y2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uZ=/^#([0-9a-f]{3,8})$/,cZ=new RegExp("^rgb\\(".concat(zb,",").concat(zb,",").concat(zb,"\\)$")),fZ=new RegExp("^rgb\\(".concat(Pm,",").concat(Pm,",").concat(Pm,"\\)$")),hZ=new RegExp("^rgba\\(".concat(zb,",").concat(zb,",").concat(zb,",").concat(Y2,"\\)$")),dZ=new RegExp("^rgba\\(".concat(Pm,",").concat(Pm,",").concat(Pm,",").concat(Y2,"\\)$")),pZ=new RegExp("^hsl\\(".concat(Y2,",").concat(Pm,",").concat(Pm,"\\)$")),vZ=new RegExp("^hsla\\(".concat(Y2,",").concat(Pm,",").concat(Pm,",").concat(Y2,"\\)$")),T6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Iw(Fb,lM,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:w6,formatHex:w6,formatHex8:mZ,formatHsl:gZ,formatRgb:A6,toString:A6});function w6(){return this.rgb().formatHex()}function mZ(){return this.rgb().formatHex8()}function gZ(){return I6(this).formatHsl()}function A6(){return this.rgb().formatRgb()}function lM(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=uZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?O6(t):n===3?new _d(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Lw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Lw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cZ.exec(e))?new _d(t[1],t[2],t[3],1):(t=fZ.exec(e))?new _d(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hZ.exec(e))?Lw(t[1],t[2],t[3],t[4]):(t=dZ.exec(e))?Lw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pZ.exec(e))?P6(t[1],t[2]/100,t[3]/100,1):(t=vZ.exec(e))?P6(t[1],t[2]/100,t[3]/100,t[4]):T6.hasOwnProperty(e)?O6(T6[e]):e==="transparent"?new _d(NaN,NaN,NaN,0):null}function O6(e){return new _d(e>>16&255,e>>8&255,e&255,1)}function Lw(e,t,n,r){return r<=0&&(e=t=n=NaN),new _d(e,t,n,r)}function C6(e){return e instanceof Fb||(e=lM(e)),e?(e=e.rgb(),new _d(e.r,e.g,e.b,e.opacity)):new _d}function K2(e,t,n,r){return arguments.length===1?C6(e):new _d(e,t,n,r==null?1:r)}function _d(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Iw(_d,K2,sM(Fb,{brighter:function(t){return t=t==null?kb:Math.pow(kb,t),new _d(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?o1:Math.pow(o1,t),new _d(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new _d(a1(this.r),a1(this.g),a1(this.b),Dw(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:R6,formatHex:R6,formatHex8:yZ,formatRgb:M6,toString:M6}));function R6(){return"#".concat(s1(this.r)).concat(s1(this.g)).concat(s1(this.b))}function yZ(){return"#".concat(s1(this.r)).concat(s1(this.g)).concat(s1(this.b)).concat(s1((isNaN(this.opacity)?1:this.opacity)*255))}function M6(){var e=Dw(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(a1(this.r),", ").concat(a1(this.g),", ").concat(a1(this.b)).concat(e===1?")":", ".concat(e,")"))}function Dw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function a1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function s1(e){return e=a1(e),(e<16?"0":"")+e.toString(16)}function P6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kv(e,t,n,r)}function I6(e){if(e instanceof kv)return new kv(e.h,e.s,e.l,e.opacity);if(e instanceof Fb||(e=lM(e)),!e)return new kv;if(e instanceof kv)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,c=s-i,h=(s+i)/2;return c?(t===s?l=(n-r)/c+(n<r)*6:n===s?l=(r-t)/c+2:l=(t-n)/c+4,c/=h<.5?s+i:2-s-i,l*=60):c=h>0&&h<1?0:l,new kv(l,c,h,e.opacity)}function _Z(e,t,n,r){return arguments.length===1?I6(e):new kv(e,t,n,r==null?1:r)}function kv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Iw(kv,_Z,sM(Fb,{brighter:function(t){return t=t==null?kb:Math.pow(kb,t),new kv(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?o1:Math.pow(o1,t),new kv(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new _d(uM(t>=240?t-240:t+120,s,i),uM(t,s,i),uM(t<120?t+240:t-120,s,i),this.opacity)},clamp:function(){return new kv(L6(this.h),Nw(this.s),Nw(this.l),Dw(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=Dw(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(L6(this.h),", ").concat(Nw(this.s)*100,"%, ").concat(Nw(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function L6(e){return e=(e||0)%360,e<0?e+360:e}function Nw(e){return Math.max(0,Math.min(1,e||0))}function uM(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function D6(e,t,n,r,i){var s=e*e,l=s*e;return((1-3*e+3*s-l)*t+(4-6*s+3*l)*n+(1+3*e+3*s-3*l)*r+l*i)/6}function bZ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],l=r>0?e[r-1]:2*i-s,c=r<t-1?e[r+2]:2*s-i;return D6((n-r/t)*t,l,i,s,c)}}function xZ(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],l=e[(r+1)%t],c=e[(r+2)%t];return D6((n-r/t)*t,i,s,l,c)}}var cM=function(e){return function(){return e}};function N6(e,t){return function(n){return e+n*t}}function EZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function SZ(e,t){var n=t-e;return n?N6(e,n>180||n<-180?n-360*Math.round(n/360):n):cM(isNaN(e)?t:e)}function TZ(e){return(e=+e)==1?Ub:function(t,n){return n-t?EZ(t,n,e):cM(isNaN(t)?n:t)}}function Ub(e,t){var n=t-e;return n?N6(e,n):cM(isNaN(e)?t:e)}var Yde=function e(t){var n=TZ(t);function r(i,s){var l=n((i=K2(i)).r,(s=K2(s)).r),c=n(i.g,s.g),h=n(i.b,s.b),p=Ub(i.opacity,s.opacity);return function(v){return i.r=l(v),i.g=c(v),i.b=h(v),i.opacity=p(v),i+""}}return r.gamma=e,r}(1);function B6(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),l,c;for(l=0;l<n;++l)c=K2(t[l]),r[l]=c.r||0,i[l]=c.g||0,s[l]=c.b||0;return r=e(r),i=e(i),s=e(s),c.opacity=1,function(h){return c.r=r(h),c.g=i(h),c.b=s(h),c+""}}}var wZ=B6(bZ),Kde=B6(xZ),ku=e=>wZ(e[e.length-1]),F6=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Fs),AZ=ku(F6),k6=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Fs),OZ=ku(k6),z6=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Fs),CZ=ku(z6),U6=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Fs),RZ=ku(U6),j6=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Fs),MZ=ku(j6),V6=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Fs),PZ=ku(V6),H6=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Fs),IZ=ku(H6),W6=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Fs),LZ=ku(W6),G6=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Fs),DZ=ku(G6),Z6=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Fs),NZ=ku(Z6),X6=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Fs),BZ=ku(X6),$6=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Fs),FZ=ku($6),Y6=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Fs),kZ=ku(Y6),K6=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Fs),zZ=ku(K6),q6=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Fs),UZ=ku(q6),Q6=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Fs),jZ=ku(Q6),J6=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Fs),VZ=ku(J6),eD=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Fs),HZ=ku(eD),tD=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Fs),WZ=ku(tD),nD=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Fs),GZ=ku(nD),rD=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Fs),ZZ=ku(rD),iD=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Fs),XZ=ku(iD),oD=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Fs),$Z=ku(oD),aD=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Fs),YZ=ku(aD),sD=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Fs),KZ=ku(sD),lD=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Fs),qZ=ku(lD),uD=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Fs),QZ=ku(uD);function JZ(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var eX=Math.PI/180,tX=180/Math.PI,cD=-.14861,fM=1.78277,hM=-.29227,Bw=-.90649,q2=1.97294,fD=q2*Bw,hD=q2*fM,dD=fM*hM-Bw*cD;function nX(e){if(e instanceof l1)return new l1(e.h,e.s,e.l,e.opacity);e instanceof _d||(e=C6(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(dD*r+fD*t-hD*n)/(dD+fD-hD),s=r-i,l=(q2*(n-i)-hM*s)/Bw,c=Math.sqrt(l*l+s*s)/(q2*i*(1-i)),h=c?Math.atan2(l,s)*tX-120:NaN;return new l1(h<0?h+360:h,c,i,e.opacity)}function Im(e,t,n,r){return arguments.length===1?nX(e):new l1(e,t,n,r==null?1:r)}function l1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Iw(l1,Im,sM(Fb,{brighter:function(t){return t=t==null?kb:Math.pow(kb,t),new l1(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?o1:Math.pow(o1,t),new l1(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*eX,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(t),s=Math.sin(t);return new _d(255*(n+r*(cD*i+fM*s)),255*(n+r*(hM*i+Bw*s)),255*(n+r*(q2*i)),this.opacity)}}));function pD(e){return function t(n){n=+n;function r(i,s){var l=e((i=Im(i)).h,(s=Im(s)).h),c=Ub(i.s,s.s),h=Ub(i.l,s.l),p=Ub(i.opacity,s.opacity);return function(v){return i.h=l(v),i.s=c(v),i.l=h(Math.pow(v,n)),i.opacity=p(v),i+""}}return r.gamma=t,r}(1)}var qde=pD(SZ),dM=pD(Ub),rX=dM(Im(300,.5,0),Im(-240,.5,1)),iX=dM(Im(-100,.75,.35),Im(80,1.5,.8)),oX=dM(Im(260,.75,.35),Im(80,1.5,.8)),Fw=Im();function aX(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Fw.h=360*e-100,Fw.s=1.5-1.5*t,Fw.l=.8-.9*t,Fw+""}var kw=K2(),sX=Math.PI/3,lX=Math.PI*2/3;function uX(e){var t;return e=(.5-e)*Math.PI,kw.r=255*(t=Math.sin(e))*t,kw.g=255*(t=Math.sin(e+sX))*t,kw.b=255*(t=Math.sin(e+lX))*t,kw+""}function cX(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function zw(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var fX=zw(Fs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),hX=zw(Fs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),dX=zw(Fs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),pX=zw(Fs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function vX(e,t,n,r,i,s){const{guide:l={}}=n,c=TX(e,t,n);if(typeof c!="string")return n;const h=wX(c,e,t,n),p=xX(c,h,n);return Object.assign(Object.assign(Object.assign({},n),OX(c,e,t,n,r)),{domain:p,range:AX(c,e,t,n,p,i,s),expectedDomain:h,guide:l,name:e,type:c})}function mX(e,t){const n={};for(const r of e){const{values:i,name:s}=r,l=t[s];for(const c of i){const{name:h,value:p}=c;n[h]=p.map(v=>l.map(v))}}return n}function gX(e,t){var n;const{components:r=[]}=t,i=["scale","encode","axis","legend","data","transform"],s=Array.from(new Set(e.flatMap(c=>c.channels.map(h=>h.scale)))),l=new Map(s.map(c=>[c.name,c]));for(const c of r){const h=bX(c);for(const p of h){const v=l.get(p),y=((n=c.scale)===null||n===void 0?void 0:n[p])||{},{independent:b=!1}=y;if(v&&!b){const{guide:w}=v,R=typeof w=="boolean"?{}:w;v.guide=oi({},R,c),Object.assign(v,y)}else{const w=Object.assign(Object.assign({},y),{expectedDomain:y.domain,name:p,guide:J_(c,i)});s.push(w)}}}return s}function yX(e){if(!e||!Array.isArray(e))return[yg,yg];let t,n;return[s=>{var l;t=s.map.bind(s),n=(l=s.invert)===null||l===void 0?void 0:l.bind(s);const c=e.filter(([b])=>typeof b=="function"),h=e.filter(([b])=>typeof b!="function"),p=new Map(h);if(s.map=b=>{for(const[w,R]of c)if(w(b))return R;return p.has(b)?p.get(b):t(b)},!n)return s;const v=new Map(h.map(([b,w])=>[w,b])),y=new Map(c.map(([b,w])=>[w,b]));return s.invert=b=>y.has(b)?b:v.has(b)?v.get(b):n(b),s},s=>(t!==null&&(s.map=t),n!==null&&(s.invert=n),s)]}function vD(e,t){const n=Object.keys(e);for(const r of Object.values(t)){const{name:i}=r.getOptions();if(!(i in e))e[i]=r;else{const s=n.filter(h=>h.startsWith(i)).map(h=>+(h.replace(i,"")||0)),l=ls(s)+1,c=`${i}${l}`;e[c]=r,r.getOptions().key=c}}return e}function mD(e,t){const[n]=$u("scale",t),{relations:r}=e,[i]=yX(r),s=n(e);return i(s)}function _X(e){const t=e.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));gD(t,"x"),gD(t,"y")}function bX(e){const{channels:t=[],type:n,scale:r={}}=e,i=["shape","color","opacity","size"];return t.length!==0?t:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(s=>i.includes(s)):[]}function gD(e,t){const n=e.filter(({name:s,facet:l=!0})=>l&&s===t),r=n.flatMap(s=>s.domain),i=n.every(yD)?Eg(r):n.every(_D)?Array.from(new Set(r)):null;if(i!==null)for(const s of n)s.domain=i}function xX(e,t,n){const{ratio:r}=n;return r==null?t:yD({type:e})?EX(t,r,e):_D({type:e})?SX(t,r):t}function EX(e,t,n){const r=e.map(Number),i=new md({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*t]});return n==="time"?e.map(s=>new Date(i.map(s))):e.map(s=>i.map(s))}function SX(e,t){const n=Math.round(e.length*t);return e.slice(0,n)}function yD(e){const{type:t}=e;return typeof t!="string"?!1:["linear","log","pow","time"].includes(t)}function _D(e){const{type:t}=e;return typeof t!="string"?!1:["band","point","ordinal"].includes(t)}function TX(e,t,n){const{type:r,domain:i,range:s,quantitative:l,ordinal:c}=n;return r!==void 0?r:zX(t)?"identity":typeof s=="string"?"linear":(i||s||[]).length>2?pM(e,c):i!==void 0?SD([i])?pM(e,c):TD(t)?"time":xD(e,s,l):SD(t)?pM(e,c):TD(t)?"time":xD(e,s,l)}function wX(e,t,n,r){const{domain:i}=r;if(i!==void 0)return i;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return ED(DX(n,r),r);case"band":case"ordinal":case"point":return NX(n);case"quantile":return BX(n);case"sequential":return ED(FX(n),r);default:return[]}}function AX(e,t,n,r,i,s,l){const{range:c}=r;if(typeof c=="string")return CX(c);if(c!==void 0)return c;const{rangeMin:h,rangeMax:p}=r;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":{const v=bD(n,r,i,s,l),[y,b]=kX(t,v);return[h!=null?h:y,p!=null?p:b]}case"band":case"point":{const v=t==="size"?5:0,y=t==="size"?10:1;return[h!=null?h:v,p!=null?p:y]}case"ordinal":return bD(n,r,i,s,l);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function OX(e,t,n,r,i){switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":return PX(i,r);case"band":case"point":return IX(e,t,i,r);case"sequential":return MX(r);default:return r}}function bD(e,t,n,r,i){const[s]=$u("palette",i),{category10:l,category20:c}=r,h=Po(e.flat()).length<=l.length?l:c,{palette:p=h,offset:v}=t;if(Array.isArray(p))return p;try{return s({type:p})}catch(y){const b=RX(p,n,v);if(b)return b;throw new Error(`Unknown Component: ${p} `)}}function CX(e){return e.split("-")}function RX(e,t,n=r=>r){if(!e)return null;const r=Sm(e),i=G[`scheme${r}`],s=G[`interpolate${r}`];if(!i&&!s)return null;if(i){if(!i.some(Array.isArray))return i;const l=i[t.length];if(l)return l}return t.map((l,c)=>s(n(c/t.length)))}function MX(e){const{palette:t="ylGnBu",offset:n}=e,r=Sm(t),i=G[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?s=>i(n(s)):i}}function PX(e,t){const{interpolate:n=I2,nice:r=!1,tickCount:i=5}=t;return Object.assign(Object.assign({},t),{interpolate:n,nice:r,tickCount:i})}function IX(e,t,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=LX(e,t,n),{paddingInner:s=i,paddingOuter:l=i}=r;return Object.assign(Object.assign({},r),{paddingInner:s,paddingOuter:l,padding:i,unknown:NaN})}function LX(e,t,n){return t==="enterDelay"||t==="enterDuration"||t==="size"?0:e==="band"?S6(n)?0:.1:e==="point"?.5:0}function pM(e,t){return t||(UX(e)?"point":"ordinal")}function xD(e,t,n){return n||(e!=="color"||t?"linear":"sequential")}function ED(e,t){if(e.length===0)return e;const{domainMin:n,domainMax:r}=t,[i,s]=e;return[n!=null?n:i,r!=null?r:s]}function DX(e,t){const{zero:n=!1}=t;let r=1/0,i=-1/0;for(const s of e)for(const l of s)cl(l)&&(r=Math.min(r,+l),i=Math.max(i,+l));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function NX(e){return Array.from(new Set(e.flat()))}function BX(e){return e.flat().sort()}function FX(e){let t=1/0,n=-1/0;for(const r of e)for(const i of r)cl(i)&&(t=Math.min(t,+i),n=Math.max(n,+i));return t===1/0?[]:[t<0?-n:t,n]}function kX(e,t){return e==="enterDelay"?[0,1e3]:e=="enterDuration"?[300,1e3]:e.startsWith("y")||e.startsWith("position")?[1,0]:e==="color"?[Er(t),ui(t)]:e==="opacity"?[0,1]:e==="size"?[1,10]:[0,1]}function SD(e){return vM(e,t=>{const n=typeof t;return n==="string"||n==="boolean"})}function TD(e){return vM(e,t=>t instanceof Date)}function zX(e){return vM(e,Em)}function vM(e,t){for(const n of e)if(n.some(t))return!0;return!1}function UX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e.startsWith("size")}function jX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e==="enterDelay"||e==="enterDuration"||e==="updateDelay"||e==="updateDuration"||e==="exitDelay"||e==="exitDuration"}function VX(e){if(!e||!e.type)return!1;if(typeof e.type=="function")return!0;const{type:t,domain:n,range:r,interpolator:i}=e,s=n&&n.length>0,l=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(t)&&s&&l||["sequential"].includes(t)&&s&&(l||i)||["constant","identity"].includes(t)&&l)}const HX={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},WX={threshold:"threshold",quantize:"quantize",quantile:"quantile"},GX={ordinal:"ordinal",band:"band",point:"point"},ZX={constant:"constant"};var Ly=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function XX(e,t,n){const{coordinates:r=[],title:i}=t,[,s]=$u("component",n),l=e.filter(({guide:v})=>v!==null),c=[],h=r$(t,e,n);if(c.push(...h),i){const{props:v}=s("title"),{defaultPosition:y,defaultOrientation:b,defaultOrder:w,defaultSize:R,defaultCrossPadding:M}=v,I=typeof i=="string"?{title:i}:i;c.push(Object.assign({type:"title",position:y,orientation:b,order:w,crossPadding:M[0],defaultSize:R},I))}return QX(l,r).forEach(([v,y])=>{const{props:b}=s(v),{defaultPosition:w,defaultPlane:R="xy",defaultOrientation:M,defaultSize:I,defaultOrder:N,defaultLength:z,defaultPadding:H=[0,0],defaultCrossPadding:X=[0,0]}=b,$=oi({},...y),{guide:te,field:fe}=$,ye=Array.isArray(te)?te:[te];for(const Le of ye){const[Ge,Qe]=t$(v,w,M,Le,y,l,r);if(!Ge&&!Qe)continue;const gt=Ge==="left"||Ge==="right",qe=gt?H[1]:H[0],lt=gt?X[1]:X[0],{size:ft,order:pt=N,length:Zt=z,padding:Ct=qe,crossPadding:Lt=lt}=Le;c.push(Object.assign(Object.assign({title:fe},Le),{defaultSize:I,length:Zt,position:Ge,plane:R,orientation:Qe,padding:Ct,order:pt,crossPadding:Lt,size:ft,type:v,scales:y}))}}),c}function wD(e,t,n,r,i){const[s]=$u("component",r),{scaleInstances:l,scale:c,bbox:h}=e,p=Ly(e,["scaleInstances","scale","bbox"]),v={bbox:h,library:r};return s(p)({coordinate:t,library:r,markState:i,scales:l,theme:n,value:v,scale:c})}function $X(e){return e.map(t=>{const n=oi(t,t.style);return delete n.style,n})}function Qde(e){return e.flatMap(t=>t.type=="group"?t.children:t)}function AD(e,t){const n=["left","right","bottom","top"];return G_(e,({type:s,position:l,group:c})=>n.includes(l)?c===void 0?s.startsWith("legend")?`legend-${l}`:Symbol("independent"):c==="independent"?Symbol("independent"):c:Symbol("independent")).flatMap(([,s])=>{if(s.length===1)return s[0];if(t!==void 0){const v=s.filter(M=>M.length!==void 0).map(M=>M.length),y=es(v);if(y>t)return s.forEach(M=>M.group=Symbol("independent")),s;const b=t-y,w=s.length-v.length,R=b/w;s.forEach(M=>{M.length===void 0&&(M.length=R)})}const l=ls(s,v=>v.size),c=ls(s,v=>v.order),h=ls(s,v=>v.crossPadding),p=s[0].position;return{type:"group",size:l,order:c,position:p,children:s,crossPadding:h}})}function YX(e,t){const n=["shape","size","color","opacity"],r=(b,w)=>b==="constant"&&w==="size",i=e.filter(({type:b,name:w})=>typeof b=="string"&&n.includes(w)&&!r(b,w)),s=i.filter(({type:b})=>b==="constant"),l=i.filter(({type:b})=>b!=="constant"),h=G_(l,b=>b.field?b.field:Symbol("independent")).map(([b,w])=>[b,[...w,...s]]).filter(([,b])=>b.some(w=>w.type!=="constant")),p=new Map(h);if(p.size===0)return[];const v=b=>b.sort(([w],[R])=>w.localeCompare(R));return Array.from(p).map(([,b])=>{const R=ro(b).sort((M,I)=>I.length-M.length).map(M=>({combination:M,option:M.map(I=>[I.name,KX(I)])}));for(const{option:M,combination:I}of R)if(!M.every(N=>N[1]==="constant")&&M.every(N=>N[1]==="discrete"||N[1]==="constant"))return["legendCategory",I];for(const[M,I]of vR)for(const{option:N,combination:z}of R)if(I.some(H=>ps(v(H),v(N))))return[M,z];return null}).filter(cl)}function KX(e){const{type:t}=e;return typeof t!="string"?null:t in HX?"continuous":t in GX?"discrete":t in WX?"distribution":t in ZX?"constant":null}function qX(e,t){return e.map(n=>{const{name:r}=n;if(ZG(t)||S6(t)||Bb(t)&&(i1(t)||$2(t)))return null;if(r.startsWith("x"))return i1(t)?["axisArc",[n]]:$2(t)?["axisLinear",[n]]:[Bb(t)?"axisY":"axisX",[n]];if(r.startsWith("y"))return i1(t)?["axisLinear",[n]]:$2(t)?["axisArc",[n]]:[Bb(t)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(YG(t))return["axisRadar",[n]];if(!i1(t))return["axisY",[n]]}return null}).filter(cl)}function QX(e,t){const n=e.filter(r=>VX(r));return[...YX(n,t),...qX(n,t)]}function mM(e){const t=Fv(e,"polar");if(t.length){const r=t[t.length-1],{startAngle:i,endAngle:s}=Nv(r);return[i,s]}const n=Fv(e,"radial");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:s}=Ty(r);return[i,s]}return[-Math.PI/2,Math.PI/2*3]}function JX(e){const t=/position(\d*)/g.exec(e);return t?+t[1]:null}function e$(e,t,n,r,i){const{name:s}=n[0];if(e==="axisRadar"){const l=r.filter(y=>y.name.startsWith("position")),c=JX(s);if(s===l.slice(-1)[0].name||c===null)return[null,null];const[h,p]=mM(i);return["center",(p-h)/(l.length-1)*c+h]}if(e==="axisY"&&XG(i))return Bb(i)?["center","horizontal"]:["center","vertical"];if(e==="axisLinear"){const[l]=mM(i);return["center",l]}return e==="axisArc"?t[0]==="inner"?["inner",null]:["outer",null]:i1(i)?["center",null]:$2(i)?["center",null]:e==="axisX"&&$G(i)||e==="axisX"&&KG(i)?["top",null]:t}function t$(e,t,n,r,i,s,l){const[c]=mM(l),h=[r.position||t,c!=null?c:n];return typeof e=="string"&&e.startsWith("axis")?e$(e,h,i,s,l):typeof e=="string"&&e.startsWith("legend")&&i1(l)&&r.position==="center"?["center","vertical"]:h}function n$(e,t,n=[]){return e==="x"?Bb(n)?`${t}Y`:`${t}X`:e==="y"?Bb(n)?`${t}X`:`${t}Y`:null}function r$(e,t,n){const[,r]=$u("component",n),{coordinates:i}=e;function s(l,c,h,p){const v=n$(c,l,i);if(!p||!v)return;const{props:y}=r(v),{defaultPosition:b,defaultSize:w,defaultOrder:R,defaultCrossPadding:[M]}=y;return Object.assign(Object.assign({position:b,defaultSize:w,order:R,type:v,crossPadding:M},p),{scales:[h]})}return t.filter(l=>l.slider||l.scrollbar).flatMap(l=>{const{slider:c,scrollbar:h,name:p}=l;return[s("slider",p,l,c),s("scrollbar",p,l,h)]}).filter(l=>!!l)}function OD(e,t,n,r,i,s){const{type:l}=e;if(!["left","right","bottom","top"].includes(r)||typeof l!="string")return;const h=l;return(h.startsWith("axis")?l$:h.startsWith("group")?i$:h.startsWith("legendContinuous")?u$:h==="legendCategory"?c$:h.startsWith("slider")?s$:h==="title"?a$:h.startsWith("scrollbar")?o$:()=>{})(e,t,n,r,i,s)}function i$(e,t,n,r,i,s){const{children:l}=e,c=ls(l,p=>p.crossPadding);l.forEach(p=>p.crossPadding=c),l.forEach(p=>OD(p,t,n,r,i,s));const h=ls(l,p=>p.size);e.size=h,l.forEach(p=>p.size=h)}function o$(e,t,n,r,i,s){const{trackSize:l=6}=oi({},i.scrollbar,e);e.size=l}function a$(e,t,n,r,i,s){const l=oi({},i.title,e),{title:c,subtitle:h,spacing:p=0}=l,v=Ly(l,["title","subtitle","spacing"]);if(c){const y=go(v,"title"),b=Hw(c,y);e.size=b.height}if(h){const y=go(v,"subtitle"),b=Hw(h,y);e.size+=p+b.height}}function s$(e,t,n,r,i,s){const l=()=>{const{slider:v}=i;return oi({},v,e)},{trackSize:c,handleIconSize:h}=l(),p=Math.max(c,h*2.4);e.size=p}function l$(e,t,n,r,i,s){var l;e.transform=e.transform||[{type:"hide"}];const c=r==="left"||r==="right",h=CD(e,r,i),{tickLength:p=0,labelSpacing:v=0,titleSpacing:y=0,labelAutoRotate:b}=h,w=Ly(h,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),R=Uw(e,s),M=jw(w,R),I=p+v;if(M&&M.length){const z=ls(M,X=>X.width),H=ls(M,X=>X.height);if(c)e.size=z+I;else{const{tickFilter:X,labelTransform:$}=e;d$(R,M,t,n,X)&&!$&&b!==!1&&b!==null?(e.labelTransform="rotate(90)",e.size=z+I):(e.labelTransform=(l=e.labelTransform)!==null&&l!==void 0?l:"rotate(0)",e.size=H+I)}}else e.size=p;const N=Vw(w);N&&(c?e.size+=y+N.width:e.size+=y+N.height)}function u$(e,t,n,r,i,s){const c=(()=>{const{legendContinuous:X}=i;return oi({},X,e)})(),{labelSpacing:h=0,titleSpacing:p=0}=c,v=Ly(c,["labelSpacing","titleSpacing"]),y=r==="left"||r==="right",b=go(v,"ribbon"),{size:w}=b,R=go(v,"handleIcon"),{size:M}=R,I=Math.max(w,M*2.4);e.size=I;const N=Uw(e,s),z=jw(v,N);if(z){const X=y?"width":"height",$=ls(z,te=>te[X]);e.size+=$+h}const H=Vw(v);H&&(y?e.size=Math.max(e.size,H.width):e.size+=p+H.height)}function c$(e,t,n,r,i,s){const c=(()=>{const{legendCategory:lt}=i,{title:ft}=e,[pt,Zt]=Array.isArray(ft)?[ft,void 0]:[void 0,ft];return oi({title:pt},lt,Object.assign(Object.assign({},e),{title:Zt}))})(),{itemSpacing:h,itemMarkerSize:p,titleSpacing:v,rowPadding:y,colPadding:b,maxCols:w=1/0,maxRows:R=1/0}=c,M=Ly(c,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:I,length:N}=e,z=lt=>Math.min(lt,R),H=lt=>Math.min(lt,w),X=r==="left"||r==="right",$=N===void 0?t+(X?0:n[0]+n[1]):N,te=Vw(M),fe=Uw(e,s),ye=jw(M,fe,"itemLabel"),Le=Math.max(ye[0].height,p)+y,Ge=(lt,ft=0)=>p+lt+h[0]+ft;X?(()=>{let lt=-1/0,ft=0,pt=1,Zt=0,Ct=-1/0,Lt=-1/0;const Tn=te?te.height:0,Fn=$-Tn;for(const{width:ir}of ye){const tr=Ge(ir,b);lt=Math.max(lt,tr),ft+Le>Fn?(pt++,Ct=Math.max(Ct,Zt),Lt=Math.max(Lt,ft),Zt=1,ft=Le):(ft+=Le,Zt++)}pt<=1&&(Ct=Zt,Lt=ft),e.size=lt*H(pt),e.length=Lt+Tn,oi(e,{cols:H(pt),gridRow:Ct})})():typeof I=="number"?(()=>{const lt=Math.ceil(ye.length/I),ft=ls(ye,pt=>Ge(pt.width))*I;e.size=Le*z(lt)-y,e.length=Math.min(ft,$)})():(()=>{let lt=1,ft=0,pt=-1/0;for(const{width:Zt}of ye){const Ct=Ge(Zt,b);ft+Ct>$?(pt=Math.max(pt,ft),ft=Ct,lt++):ft+=Ct}lt===1&&(pt=ft),e.size=Le*z(lt)-y,e.length=pt})(),te&&(X?e.size=Math.max(e.size,te.width):e.size+=v+te.height)}function Uw(e,t){const[n]=$u("scale",t),{scales:r,tickCount:i,tickMethod:s}=e,l=r.find(c=>c.type!=="constant"&&c.type!=="identity");return i!==void 0&&(l.tickCount=i),s!==void 0&&(l.tickMethod=s),n(l)}function jw(e,t,n="label"){const{labelFormatter:r,tickFilter:i,label:s=!0}=e,l=Ly(e,["labelFormatter","tickFilter","label"]);if(!s)return null;const c=f$(t,r,i),h=go(l,n),p=c.map((b,w)=>Object.fromEntries(Object.entries(h).map(([R,M])=>[R,typeof M=="function"?M(b,w):M]))),v=c.map((b,w)=>{const R=p[w];return Hw(b,R)});if(!p.some(b=>b.transform)){const b=c.map((w,R)=>R);e.indexBBox=new Map(b.map(w=>[w,[c[w],v[w]]]))}return v}function Vw(e){const t=p=>p===!1||p===null,{title:n}=e,r=Ly(e,["title"]);if(t(n)||n===void 0)return null;const i=go(r,"title"),{direction:s,transform:l}=i,c=Array.isArray(n)?n.join(","):n;return typeof c!="string"?null:Hw(c,Object.assign(Object.assign({},i),{transform:l||(s==="vertical"?"rotate(-90)":"")}))}function CD(e,t,n){const{title:r}=e,[i,s]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:l,[`axis${E2(t)}`]:c}=n;return oi({title:i},l,c,Object.assign(Object.assign({},e),{title:s}))}function RD(e,t){const n=e.getTicks?e.getTicks():e.getOptions().domain;return t?n.filter(t):n}function f$(e,t,n){const i=RD(e,n).map(l=>typeof l=="number"?_b(l):l),s=t?typeof t=="string"?Ye(t):t:e.getFormatter?e.getFormatter():l=>`${l}`;return i.map(s)}function h$(e,t){return e.getBandWidth?e.getBandWidth(t)/2:0}function d$(e,t,n,r,i){if(es(t,w=>w.width)>n)return!0;const l=e.clone();l.update({range:[0,n]});const c=RD(e,i),h=c.map(w=>l.map(w)+h$(l,w)),p=c.map((w,R)=>R),v=-r[0],y=n+r[1],b=(w,R)=>{const{width:M}=R;return[w-M/2,w+M/2]};for(let w=0;w<p.length;w++){const R=h[w],[M,I]=b(R,t[w]);if(M<v||I>y)return!0;const N=h[w+1];if(N){const[z]=b(N,t[w+1]);if(I>z)return!0}}return!1}function Hw(e,t){const n=p$(e),{filter:r}=t,i=Ly(t,["filter"]);return n.attr(Object.assign(Object.assign({},i),{visibility:"none"})),n.getBBox()}function p$(e){return e instanceof Kf?e:new hf({style:{text:`${e}`}})}function h0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function v$(e){const t=e.find(({type:i})=>i==="axisX"),n=e.find(({type:i})=>i==="axisY"),r=e.find(({type:i})=>i==="axisZ");t&&n&&r&&(t.plane="xy",n.plane="xy",r.plane="yz",r.origin=[t.bbox.x,t.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=t.bbox.x,r.bbox.y=t.bbox.y,e.push(Object.assign(Object.assign({},t),{plane:"xz",showLabel:!1,showTitle:!1,origin:[t.bbox.x,t.bbox.y,0],eulerAngles:[-90,0,0]})),e.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),e.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function m$(e,t,n,r){var i,s;const{width:l,height:c,depth:h,x:p=0,y:v=0,z:y=0,inset:b=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:w=b,insetTop:R=b,insetBottom:M=b,insetRight:I=b,margin:N=(s=n.margin)!==null&&s!==void 0?s:0,marginLeft:z=N,marginBottom:H=N,marginTop:X=N,marginRight:$=N,padding:te=n.padding,paddingBottom:fe=te,paddingLeft:ye=te,paddingRight:Le=te,paddingTop:Ge=te}=y$(e,t,n,r),Qe=1/4,gt=(po,ko,fa,Oa,Na)=>{const{marks:ks}=t;if(ks.length===0)return[Oa,Na];if(po-Oa-Na-po*Qe>0)return[Oa,Na];const Os=po*(1-Qe);return[ko==="auto"?Os*Oa/(Oa+Na):Oa,fa==="auto"?Os*Na/(Oa+Na):Na]},qe=po=>po==="auto"?20:po!=null?po:20,lt=qe(Ge),ft=qe(fe),pt=MD(e,c-lt-ft,[lt+X,ft+H],["left","right"],t,n,r),{paddingLeft:Zt,paddingRight:Ct}=pt,Lt=l-z-$,[Tn,Fn]=gt(Lt,ye,Le,Zt,Ct),ir=Lt-Tn-Fn,tr=MD(e,ir,[Tn+z,Fn+$],["bottom","top"],t,n,r),{paddingTop:Hr,paddingBottom:mi}=tr,Ki=c-H-X,[fi,Zr]=gt(Ki,fe,Ge,mi,Hr),yo=Ki-fi-Zr;return{width:l,height:c,depth:h,insetLeft:w,insetTop:R,insetBottom:M,insetRight:I,innerWidth:ir,innerHeight:yo,paddingLeft:Tn,paddingRight:Fn,paddingTop:Zr,paddingBottom:fi,marginLeft:z,marginBottom:H,marginTop:X,marginRight:$,x:p,y:v,z:y}}function g$(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:c=r,margin:h=16,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:w=0,insetLeft:R=w,insetRight:M=w,insetTop:I=w,insetBottom:N=w}=e,z=$=>$==="auto"?20:$,H=n-z(i)-z(s)-p-v-R-M,X=t-z(l)-z(c)-y-b-I-N;return{width:H,height:X}}function y$(e,t,n,r){const{coordinates:i}=t;if(!i1(i)&&!$2(i))return t;const s=e.filter(N=>typeof N.type=="string"&&N.type.startsWith("axis"));if(s.length===0)return t;const l=s.map(N=>{const z=N.type==="axisArc"?"arc":"linear";return CD(N,z,n)}),c=ls(l,N=>{var z;return(z=N.labelSpacing)!==null&&z!==void 0?z:0}),h=s.flatMap((N,z)=>{const H=l[z],X=Uw(N,r);return jw(H,X)}).filter(cl),p=ls(h,N=>N.height)+c,v=s.flatMap((N,z)=>{const H=l[z];return Vw(H)}).filter(N=>N!==null),y=v.length===0?0:ls(v,N=>N.height),{inset:b=p,insetLeft:w=b,insetBottom:R=b,insetTop:M=b+y,insetRight:I=b}=t;return Object.assign(Object.assign({},t),{insetLeft:w,insetBottom:R,insetTop:M,insetRight:I})}function MD(e,t,n,r,i,s,l){const c=ou(e,R=>R.position),{padding:h=s.padding,paddingLeft:p=h,paddingRight:v=h,paddingBottom:y=h,paddingTop:b=h}=i,w={paddingBottom:y,paddingLeft:p,paddingTop:b,paddingRight:v};for(const R of r){const M=`padding${E2(WL(R))}`,I=c.get(R)||[],N=w[M],z=Le=>{Le.size===void 0&&(Le.size=Le.defaultSize)},H=Le=>{Le.type==="group"?(Le.children.forEach(z),Le.size=ls(Le.children,Ge=>Ge.size)):Le.size=Le.defaultSize},X=Le=>{Le.size||(N!=="auto"?H(Le):(OD(Le,t,n,R,s,l),z(Le)))},$=Le=>{Le.type.startsWith("axis")&&Le.labelAutoHide===void 0&&(Le.labelAutoHide=!0)},te=R==="bottom"||R==="top",fe=h0(I,Le=>Le.order),ye=I.filter(Le=>Le.type.startsWith("axis")&&Le.order==fe);if(ye.length&&(ye[0].crossPadding=0),typeof N=="number")I.forEach(z),I.forEach($);else if(I.length===0)w[M]=0;else{const Le=te?t+n[0]+n[1]:t,Ge=AD(I,Le);Ge.forEach(X);const Qe=Ge.reduce((gt,{size:qe,crossPadding:lt=12})=>gt+qe+lt,0);w[M]=Qe}}return w}function _$(e,t,n){const r=ou(e,te=>`${te.plane||"xy"}-${te.position}`),{paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:c,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:w,insetBottom:R,insetLeft:M,insetRight:I,insetTop:N,height:z,width:H,depth:X}=n,$={xy:gM({width:H,height:z,paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:c,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:w,insetBottom:R,insetLeft:M,insetRight:I,insetTop:N}),yz:gM({width:X,height:z,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:X,innerHeight:z,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:gM({width:H,height:X,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:H,innerHeight:X,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[te,fe]of r.entries()){const[ye,Le]=te.split("-"),Ge=$[ye][Le],[Qe,gt]=no(fe,qe=>typeof qe.type!="string"?!1:!!(Le==="center"||qe.type.startsWith("axis")&&["inner","outer"].includes(Le)));Qe.length&&b$(Qe,t,Ge,Le),gt.length&&R$(fe,t,Ge)}}function gM({width:e,height:t,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:h,marginRight:p,innerHeight:v,innerWidth:y,insetBottom:b,insetLeft:w,insetRight:R,insetTop:M}){const I=n+l,N=i+c,z=r+p,H=s+h,X=e-l-p,$=[I+w,N+M,y-w-R,v-M-b,"center",null,null];return{top:[I,0,y,N,"vertical",!0,Lc,l,X],right:[e-z,N,z,v,"horizontal",!1,Lc],bottom:[I,t-H,y,H,"vertical",!1,Lc,l,X],left:[0,N,I,v,"horizontal",!0,Lc],"top-left":[I,0,y,N,"vertical",!0,Lc],"top-right":[I,0,y,N,"vertical",!0,Lc],"bottom-left":[I,t-H,y,H,"vertical",!1,Lc],"bottom-right":[I,t-H,y,H,"vertical",!1,Lc],center:$,inner:$,outer:$}}function b$(e,t,n,r){const[i,s]=no(e,l=>!!(typeof l.type=="string"&&l.type.startsWith("axis")));x$(i,t,n,r),M$(s,t,n)}function x$(e,t,n,r){r==="center"?bo(t)?C$(e,t,n,r):au(t)?T$(e,t,n):Bs(t)&&w$(e,t,n,e[0].orientation):r==="inner"?E$(e,t,n):r==="outer"&&S$(e,t,n)}function E$(e,t,n){const[r,i,,s]=n,[l,c]=t.getCenter(),[h]=Z0(t),p=s/2,v=h*p,y=l-v,b=c-v;for(let w=0;w<e.length;w++){const R=e[w];R.bbox={x:r+y,y:i+b,width:v*2,height:v*2}}}function S$(e,t,n){const[r,i,s,l]=n;for(const c of e)c.bbox={x:r,y:i,width:s,height:l}}function T$(e,t,n){const[r,i,s,l]=n;for(const c of e)c.bbox={x:r,y:i,width:s,height:l}}function w$(e,t,n,r){r==="horizontal"?O$(e,t,n):r==="vertical"&&A$(e,t,n)}function A$(e,t,n){const[r,i,,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===0).map(p=>p+r);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:y,y:i,width:b,height:s}}}function O$(e,t,n){const[r,i,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===1).map(p=>p+i);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:r,y,width:s,height:b}}}function C$(e,t,n,r){const[i,s,l,c]=n;for(const h of e)h.bbox={x:i,y:s,width:l,height:c},h.radar={index:e.indexOf(h),count:e.length}}function R$(e,t,n){const[r,i,s,l,c,h,p,v,y]=n,[b,w,R,M,I,N,z,H]=c==="vertical"?["y",i,"x",r,"height",l,"width",s]:["x",r,"y",i,"width",s,"height",l];e.sort((Le,Ge)=>p==null?void 0:p(Le.order,Ge.order));const X=Le=>Le==="title"||Le==="group"||Le.startsWith("legend"),$=(Le,Ge,Qe)=>Qe===void 0?Ge:X(Le)?Qe:Ge,te=(Le,Ge,Qe)=>Qe===void 0?Ge:X(Le)?Qe:Ge,fe=h?w+N:w;for(let Le=0,Ge=fe;Le<e.length;Le++){const Qe=e[Le],{crossPadding:gt=0,type:qe}=Qe,{size:lt}=Qe;Qe.bbox={[b]:h?Ge-lt-gt:Ge+gt,[R]:te(qe,M,v),[I]:lt,[z]:$(qe,H,y)},Ge+=(lt+gt)*(h?-1:1)}const ye=e.filter(Le=>Le.type==="group");for(const Le of ye){const{bbox:Ge,children:Qe}=Le,gt=Ge[z],qe=gt/Qe.length,lt=Qe.reduce((Lt,Tn)=>{var Fn;const ir=(Fn=Tn.layout)===null||Fn===void 0?void 0:Fn.justifyContent;return ir||Lt},"flex-start"),ft=Qe.map((Lt,Tn)=>{const{length:Fn=qe,padding:ir=0}=Lt;return Fn+(Tn===Qe.length-1?0:ir)}),pt=es(ft),Zt=gt-pt,Ct=lt==="flex-start"?0:lt==="center"?Zt/2:Zt;for(let Lt=0,Tn=Ge[R]+Ct;Lt<Qe.length;Lt++){const Fn=Qe[Lt],{padding:ir=0}=Fn,tr=Lt===Qe.length-1?0:ir;Fn.bbox={[I]:Ge[I],[b]:Ge[b],[R]:Tn,[z]:ft[Lt]-tr},oi(Fn,{layout:{justifyContent:lt}}),Tn+=ft[Lt]}}}function M$(e,t,n){if(e.length===0)return;const[r,i,s,l]=n,[c]=Z0(t),h=l/2*c/Math.sqrt(2),p=r+s/2,v=i+l/2;for(let y=0;y<e.length;y++){const b=e[y];b.bbox={x:p-h,y:v-h,width:h*2,height:h*2}}}function Lm(e,t,n={},r=!1){if(Dv(e)||Array.isArray(e)&&r)return e;const i=go(e,t);return oi(n,i)}function Ww(e,t={}){return Dv(e)||Array.isArray(e)||!PD(e)?e:oi(t,e)}function PD(e){if(Object.keys(e).length===0)return!0;const{title:t,items:n}=e;return t!==void 0||n!==void 0}function Dm(e,t){return typeof e=="object"?go(e,t):e}var P$=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},jb=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function I$(e,t,n){const{encode:r={},scale:i={},transform:s=[]}=t,l=jb(t,["encode","scale","transform"]);return[e,Object.assign(Object.assign({},l),{encode:r,scale:i,transform:s})]}function ID(e,t,n){return P$(this,void 0,void 0,function*(){const{library:r}=n,{data:i}=t,[s]=$u("data",r),l=G$(i),{transform:c=[]}=l,v=[jb(l,["transform"]),...c].map(s),y=yield $T(v)(i),b=i&&!Array.isArray(i)&&!Array.isArray(y)?{value:y}:y;return[Array.isArray(y)?lr(y):[],Object.assign(Object.assign({},t),{data:b})]})}function L$(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i={};for(const[s,l]of Object.entries(r))if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=`${s}${c===0?"":c}`;i[h]=l[c]}else i[s]=l;return[e,Object.assign(Object.assign({},t),{encode:i})]}function D$(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const s=Sn(r,l=>V$(l)?l:{type:H$(i,l),value:l});return[e,Object.assign(Object.assign({},t),{encode:s})]}function N$(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i=Sn(r,(s,l)=>{const{type:c}=s;return c!=="constant"||jX(l)?s:Object.assign(Object.assign({},s),{constant:!0})});return[e,Object.assign(Object.assign({},t),{encode:i})]}function B$(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const{library:s}=n,l=$$(s),c=Sn(r,h=>l(i,h));return[e,Object.assign(Object.assign({},t),{encode:c})]}function F$(e,t,n){const{tooltip:r={}}=t;return Dv(r)?[e,t]:Array.isArray(r)?[e,Object.assign(Object.assign({},t),{tooltip:{items:r}})]:Em(r)&&PD(r)?[e,Object.assign(Object.assign({},t),{tooltip:r})]:[e,Object.assign(Object.assign({},t),{tooltip:{items:[r]}})]}function k$(e,t,n){const{data:r,encode:i,tooltip:s={}}=t;if(Dv(s))return[e,t];const l=y=>{if(!y)return y;if(typeof y=="string")return e.map(b=>({name:y,value:r[b][y]}));if(Em(y)){const{field:b,channel:w,color:R,name:M=b,valueFormatter:I=te=>te}=y,N=typeof I=="string"?Ye(I):I,z=w&&i[w],H=z&&i[w].field,X=M||H||w,$=[];for(const te of e){const fe=b?r[te][b]:z?i[w].value[te]:null;$[te]={name:X,color:R,value:N(fe)}}return $}if(typeof y=="function"){const b=[];for(const w of e){const R=y(r[w],w,r,i);Em(R)?b[w]=R:b[w]={value:R}}return b}return y},{title:c,items:h=[]}=s,p=jb(s,["title","items"]),v=Object.assign({title:l(c),items:Array.isArray(h)?h.map(l):[]},p);return[e,Object.assign(Object.assign({},t),{tooltip:v})]}function z$(e,t,n){const{encode:r}=t,i=jb(t,["encode"]);if(!r)return[e,t];const s=Object.entries(r),l=s.filter(([,h])=>{const{value:p}=h;return Array.isArray(p[0])}).flatMap(([h,p])=>{const v=[[h,new Array(e.length).fill(void 0)]],{value:y}=p,b=jb(p,["value"]);for(let w=0;w<y.length;w++){const R=y[w];if(Array.isArray(R))for(let M=0;M<R.length;M++){const I=v[M]||[`${h}${M}`,new Array(e).fill(void 0)];I[1][w]=R[M],v[M]=I}}return v.map(([w,R])=>[w,Object.assign({type:"column",value:R},b)])}),c=Object.fromEntries([...s,...l]);return[e,Object.assign(Object.assign({},i),{encode:c})]}function U$(e,t,n){const{axis:r={},legend:i={},slider:s={},scrollbar:l={}}=t,c=(p,v)=>{if(typeof p=="boolean")return p?{}:null;const y=p[v];return y===void 0||y?y:null},h=typeof r=="object"?Array.from(new Set(["x","y","z",...Object.keys(r)])):["x","y","z"];return oi(t,{scale:Object.assign(Object.assign({},Object.fromEntries(h.map(p=>{const v=c(l,p);return[p,Object.assign({guide:c(r,p),slider:c(s,p),scrollbar:v},v&&{ratio:v.ratio===void 0?.5:v.ratio})]}))),{color:{guide:c(i,"color")},size:{guide:c(i,"size")},shape:{guide:c(i,"shape")},opacity:{guide:c(i,"opacity")}})}),[e,t]}function j$(e,t,n){const{animate:r}=t;return r||r===void 0?[e,t]:(oi(t,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[e,t])}function V$(e){if(typeof e!="object"||e instanceof Date||e===null)return!1;const{type:t}=e;return cl(t)}function H$(e,t){return typeof t=="function"?"transform":typeof t=="string"&&W$(e,t)?"field":"constant"}function W$(e,t){return Array.isArray(e)?e.some(n=>n[t]!==void 0):!1}function G$(e){if((0,Gl.Z)(e))return{type:"inline",value:e};if(!e)return{type:"inline",value:null};if(Array.isArray(e))return{type:"inline",value:e};const{type:t="inline"}=e,n=jb(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}var LD=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Z$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function X$(e,t,n){return LD(this,void 0,void 0,function*(){const r={library:n},[i,s]=yield Y$(e,t,r),{encode:l,scale:c,data:h,tooltip:p}=s;if(Array.isArray(h)===!1)return null;const{channels:v}=t,y=y2(Object.entries(l).filter(([,w])=>cl(w)),w=>w.map(([R,M])=>Object.assign({name:R},M)),([w])=>{var R;const M=(R=/([^\d]+)\d*$/.exec(w))===null||R===void 0?void 0:R[1],I=v.find(N=>N.name===M);return I!=null&&I.independent?w:M}),b=v.filter(w=>{const{name:R,required:M}=w;if(y.find(([I])=>I===R))return!0;if(M)throw new Error(`Missing encoding for channel: ${R}.`);return!1}).flatMap(w=>{const{name:R,scale:M,scaleKey:I,range:N,quantitative:z,ordinal:H}=w;return y.filter(([$])=>$.startsWith(R)).map(([$,te],fe)=>{const ye=te.some(Zt=>Zt.visual),Le=te.some(Zt=>Zt.constant),Ge=c[$]||{},{independent:Qe=!1,key:gt=I||$,type:qe=Le?"constant":ye?"identity":M}=Ge,lt=Z$(Ge,["independent","key","type"]),ft=qe==="constant",pt=ft?void 0:N;return{name:$,values:te,scaleKey:Qe||ft?Symbol("independent"):gt,scale:Object.assign(Object.assign({type:qe,range:pt},lt),{quantitative:z,ordinal:H})}})});return[s,Object.assign(Object.assign({},t),{index:i,channels:b,tooltip:p})]})}function $$(e){const[t]=$u("encode",e);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:t(r)(n),field:K$(r)})}function Y$(e,t,n){return LD(this,void 0,void 0,function*(){const{library:r}=n,[i]=$u("transform",r),{preInference:s=[],postInference:l=[]}=t,{transform:c=[]}=e,h=[I$,ID,L$,D$,N$,B$,z$,j$,U$,F$,...s.map(i),...c.map(i),...l.map(i),k$];let p=[],v=e;for(const y of h)[p,v]=yield y(p,v,n);return[p,v]})}function K$(e){const{type:t,value:n}=e;return t==="field"&&typeof n=="string"?n:null}var Ag=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Dy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yM(e,t,n,r){var i;return Ag(this,void 0,void 0,function*(){const[s]=$u("composition",n),[l]=$u("interaction",n),c=new Set(Object.keys(n).map(qe=>{var lt;return(lt=/mark\.(.*)/.exec(qe))===null||lt===void 0?void 0:lt[1]}).filter(cl)),h=new Set(Object.keys(n).map(qe=>{var lt;return(lt=/component\.(.*)/.exec(qe))===null||lt===void 0?void 0:lt[1]}).filter(cl)),p=qe=>{const{type:lt}=qe;if(typeof lt=="function"){const{props:ft={}}=lt,{composite:pt=!0}=ft;if(pt)return"mark"}return typeof lt!="string"?lt:c.has(lt)||h.has(lt)?"mark":lt},v=qe=>p(qe)==="mark",y=qe=>p(qe)==="standardView",b=qe=>{const{type:lt}=qe;return typeof lt!="string"?!1:!!h.has(lt)},w=qe=>{if(y(qe))return[qe];const lt=p(qe);return s({type:lt,static:b(qe)})(qe)},R=[],M=new Map,I=new Map,N=[e],z=[];for(;N.length;){const qe=N.shift();if(y(qe)){const lt=I.get(qe),[ft,pt]=lt?FD(lt,qe,n):yield ND(qe,n);M.set(ft,qe),R.push(ft);const Zt=pt.flatMap(w).map(Ct=>E6(Ct,n));if(N.push(...Zt),Zt.every(y)){const Ct=yield Promise.all(Zt.map(Lt=>BD(Lt,n)));_X(Ct);for(let Lt=0;Lt<Zt.length;Lt++){const Tn=Zt[Lt],Fn=Ct[Lt];I.set(Tn,Fn)}}}else{const lt=v(qe)?qe:yield jD(qe,n),ft=w(lt);Array.isArray(ft)?N.push(...ft):typeof ft=="function"&&z.push(ft())}}r.emitter.emit(bl.BEFORE_PAINT);const H=new Map,X=new Map,$=[];t.selectAll(Nm(sa)).data(R,qe=>qe.key).join(qe=>qe.append("g").attr("className",sa).attr("id",lt=>lt.key).call(DD).each(function(lt,ft,pt){bM(lt,Aa(pt),$,n,r),H.set(lt,pt)}),qe=>qe.call(DD).each(function(lt,ft,pt){bM(lt,Aa(pt),$,n,r),X.set(lt,pt)}),qe=>qe.each(function(lt,ft,pt){const Zt=pt.nameInteraction.values();for(const Ct of Zt)Ct.destroy()}).remove());const te=(qe,lt,ft)=>Array.from(qe.entries()).map(([pt,Zt])=>{const Ct=ft||new Map,Lt=(ir,tr=Hr=>Hr)=>Ct.set(ir,tr),Tn=M.get(pt),Fn=Q$(Aa(Zt),Tn,n,r);return{view:pt,container:Zt,options:Tn,setState:Lt,update:(ir,tr)=>Ag(this,void 0,void 0,function*(){const mi=x2(Array.from(Ct.values()))(Tn);return yield Fn(mi,ir,()=>{jo(tr)&&lt(qe,tr,Ct)})})}}),fe=(qe=X,lt,ft)=>{var pt;const Zt=te(qe,fe,ft);for(const Ct of Zt){const{options:Lt,container:Tn}=Ct,Fn=Tn.nameInteraction;let ir=Gw(Lt);lt&&(ir=ir.filter(tr=>lt.includes(tr[0])));for(const tr of ir){const[Hr,mi]=tr,Ki=Fn.get(Hr);if(Ki&&((pt=Ki.destroy)===null||pt===void 0||pt.call(Ki)),mi){const Zr=_M(Ct.view,Hr,mi,l)(Ct,Zt,r.emitter);Fn.set(Hr,{destroy:Zr})}}}},ye=te(H,fe);for(const qe of ye){const{options:lt}=qe,ft=new Map;qe.container.nameInteraction=ft;for(const pt of Gw(lt)){const[Zt,Ct]=pt;if(Ct){const Tn=_M(qe.view,Zt,Ct,l)(qe,ye,r.emitter);ft.set(Zt,{destroy:Tn})}}}fe();const{width:Le,height:Ge}=e,Qe=[];for(const qe of z){const lt=new Promise(ft=>Ag(this,void 0,void 0,function*(){for(const pt of qe){const Zt=Object.assign({width:Le,height:Ge},pt);yield yM(Zt,t,n,r)}ft()}));Qe.push(lt)}r.views=R,(i=r.animations)===null||i===void 0||i.forEach(qe=>qe==null?void 0:qe.cancel()),r.animations=$,r.emitter.emit(bl.AFTER_PAINT);const gt=$.filter(cl).map(dY).map(qe=>qe.finished);return Promise.all([...gt,...Qe])})}function DD(e){e.style("transform",t=>`translate(${t.layout.x}, ${t.layout.y})`)}function q$(e){const[,t]=$u("interaction",e);return n=>{const[r,i]=n;try{return[r,t(r)]}catch(s){return[r,i.type]}}}function Q$(e,t,n,r){const i=q$(n),s=h=>h[1]&&h[1].props&&h[1].props.reapplyWhenUpdate,c=Gw(t).map(i).filter(s).map(h=>h[0]);return(h,p,v)=>Ag(this,void 0,void 0,function*(){const y=[],[b,w]=yield ND(h,n);bM(b,e,y,n,r);for(const R of c.filter(M=>M!==p))J$(R,e,h,b,n,r);for(const R of w)yM(R,e,n,r);return v(),{options:h,view:b}})}function J$(e,t,n,r,i,s){var l;const[c]=$u("interaction",i),p=t.node().nameInteraction,v=Gw(n).find(([M])=>M===e),y=p.get(e);if(!y||((l=y.destroy)===null||l===void 0||l.call(y),!v[1]))return;const b=_M(r,e,v[1],c),w={options:n,view:r,container:t.node(),update:M=>Promise.resolve(M)},R=b(w,[],s.emitter);p.set(e,{destroy:R})}function ND(e,t){return Ag(this,void 0,void 0,function*(){const n=yield tY(e,t),r=eY(n);e.interaction=r.interaction,e.coordinate=r.coordinate,e.marks=[...r.marks,...r.components];const i=E6(r,t),s=yield BD(i,t);return FD(s,i,t)})}function eY(e){const{coordinate:t={},interaction:n={},style:r={},marks:i}=e,s=Dy(e,["coordinate","interaction","style","marks"]),l=i.map(b=>b.coordinate||{}),c=i.map(b=>b.interaction||{}),h=i.map(b=>b.viewStyle||{}),p=[...l,t].reduceRight((b,w)=>oi(b,w),{}),v=[n,...c].reduce((b,w)=>oi(b,w),{}),y=[...h,r].reduce((b,w)=>oi(b,w),{});return Object.assign(Object.assign({},s),{marks:i,coordinate:p,interaction:v,style:y})}function tY(e,t){return Ag(this,void 0,void 0,function*(){const[n,r]=$u("mark",t),i=new Set(Object.keys(t).map(b=>{var w;return(w=/component\.(.*)/.exec(b))===null||w===void 0?void 0:w[1]}).filter(cl)),{marks:s}=e,l=[],c=[],h=[...s],{width:p,height:v}=g$(e),y={options:e,width:p,height:v};for(;h.length;){const[b]=h.splice(0,1),w=yield jD(b,t),{type:R=Ey("G2Mark type is required."),key:M}=w;if(i.has(R))c.push(w);else{const{props:I={}}=r(R),{composite:N=!0}=I;if(!N)l.push(w);else{const{data:z}=w,H=Object.assign(Object.assign({},w),{data:z&&(Array.isArray(z)?z:z.value)}),X=yield n(H,y),$=Array.isArray(X)?X:[X];h.unshift(...$.map((te,fe)=>Object.assign(Object.assign({},te),{key:`${M}-${fe}`})))}}}return Object.assign(Object.assign({},e),{marks:l,components:c})})}function BD(e,t){return Ag(this,void 0,void 0,function*(){const[n]=$u("theme",t),[,r]=$u("mark",t),{theme:i,marks:s,coordinates:l=[]}=e,c=n(UD(i)),h=new Map;for(const v of s){const{type:y}=v,{props:b={}}=r(y),w=yield X$(v,b,t);if(w){const[R,M]=w;h.set(R,M)}}const p=ou(Array.from(h.values()).flatMap(v=>v.channels),({scaleKey:v})=>v);for(const v of p.values()){const y=v.reduce((H,{scale:X})=>oi(H,X),{}),{scaleKey:b}=v[0],{values:w}=v[0],R=Array.from(new Set(w.map(H=>H.field).filter(cl))),M=oi({guide:{title:R.length===0?void 0:R},field:R[0]},y),{name:I}=v[0],N=v.flatMap(({values:H})=>H.map(X=>X.value)),z=Object.assign(Object.assign({},vX(I,N,M,l,c,t)),{key:b});v.forEach(H=>H.scale=z)}return h})}function _M(e,t,n,r){const i=e.theme,s=typeof t=="string"?i[t]||{}:{};return r(oi(s,Object.assign({type:t},n)))}function FD(e,t,n){const[r]=$u("mark",n),[i]=$u("theme",n),[s]=$u("labelTransform",n),{key:l,frame:c=!1,theme:h,clip:p,style:v={},labelTransform:y=[]}=t,b=i(UD(h)),w=Array.from(e.values()),R=gX(w,t),M=$X(XX(gY(Array.from(R),w,e),t,n)),I=m$(M,t,b,n),N=GG(I,t,n),z=c?oi({mainLineWidth:1,mainStroke:"#000"},v):v;_$(AD(M),N,I),v$(M);const H={};for(const te of M){const{scales:fe=[]}=te,ye=[];for(const Le of fe){const{name:Ge}=Le,Qe=mD(Le,n);ye.push(Qe),Ge==="y"&&Qe.update(Object.assign(Object.assign({},Qe.getOptions()),{xScale:H.x})),vD(H,{[Ge]:Qe})}te.scaleInstances=ye}const X=[];for(const[te,fe]of e.entries()){const{children:ye,dataDomain:Le,modifier:Ge,key:Qe}=te,{index:gt,channels:qe,tooltip:lt}=fe,ft=Object.fromEntries(qe.map(({name:Zr,scale:yo})=>[Zr,yo])),pt=Sn(ft,Zr=>mD(Zr,n));vD(H,pt);const Zt=mX(qe,pt),Ct=r(te),[Lt,Tn,Fn]=iY(Ct(gt,pt,Zt,N)),ir=Le||Lt.length,tr=Ge?Ge(Tn,ir,I):[],Hr=Zr=>{var yo,po;return(po=(yo=lt.title)===null||yo===void 0?void 0:yo[Zr])===null||po===void 0?void 0:po.value},mi=Zr=>lt.items.map(yo=>yo[Zr]),Ki=Lt.map((Zr,yo)=>{const po=Object.assign({points:Tn[yo],transform:tr[yo],index:Zr,markKey:Qe,viewKey:l},lt&&{title:Hr(Zr),items:mi(Zr)});for(const[ko,fa]of Object.entries(Zt))po[ko]=fa[Zr],Fn&&(po[`series${Sm(ko)}`]=Fn[yo].map(Oa=>fa[Oa]));return Fn&&(po.seriesIndex=Fn[yo]),Fn&&lt&&(po.seriesItems=Fn[yo].map(ko=>mi(ko)),po.seriesTitle=Fn[yo].map(ko=>Hr(ko))),po});fe.data=Ki,fe.index=Lt;const fi=ye==null?void 0:ye(Ki,pt,I);X.push(...fi||[])}return[{layout:I,theme:b,coordinate:N,markState:e,key:l,clip:p,scale:H,style:z,components:M,labelTransform:x2(y.map(s))},X]}function bM(e,t,n,r,i){return Ag(this,void 0,void 0,function*(){const{components:s,theme:l,layout:c,markState:h,coordinate:p,key:v,style:y,clip:b,scale:w}=e,{x:R,y:M,width:I,height:N}=c,z=Dy(c,["x","y","width","height"]),H=["view","plot","main","content"],X=H.map((Ct,Lt)=>Lt),$=["a","margin","padding","inset"],te=H.map(Ct=>YT(Object.assign({},l.view,y),Ct)),fe=$.map(Ct=>go(z,Ct)),ye=Ct=>Ct.style("x",Lt=>qe[Lt].x).style("y",Lt=>qe[Lt].y).style("width",Lt=>qe[Lt].width).style("height",Lt=>qe[Lt].height).each(function(Lt,Tn,Fn){yY(Aa(Fn),te[Lt])});let Le=0,Ge=0,Qe=I,gt=N;const qe=X.map(Ct=>{const Lt=fe[Ct],{left:Tn=0,top:Fn=0,bottom:ir=0,right:tr=0}=Lt;return Le+=Tn,Ge+=Fn,Qe-=Tn+tr,gt-=Fn+ir,{x:Le,y:Ge,width:Qe,height:gt}});t.selectAll(Nm(Wu)).data(X.filter(Ct=>cl(te[Ct])),Ct=>H[Ct]).join(Ct=>Ct.append("rect").attr("className",Wu).style("zIndex",-2).call(ye),Ct=>Ct.call(ye),Ct=>Ct.remove());const lt=lY(h),ft=lt?{duration:lt[1]}:!1;for(const[,Ct]of G_(s,Lt=>`${Lt.type}-${Lt.position}`))Ct.forEach((Lt,Tn)=>Lt.index=Tn);const pt=t.selectAll(Nm(hs)).data(s,Ct=>`${Ct.type}-${Ct.position}-${Ct.index}`).join(Ct=>Ct.append("g").style("zIndex",({zIndex:Lt})=>Lt||-1).attr("className",hs).append(Lt=>wD(oi({animate:ft,scale:w},Lt),p,l,r,h)),Ct=>Ct.transition(function(Lt,Tn,Fn){const{preserve:ir=!1}=Lt;if(ir)return;const tr=wD(oi({animate:ft,scale:w},Lt),p,l,r,h),{attributes:Hr}=tr,[mi]=Fn.childNodes;return mi.update(Hr,!1)})).transitions();n.push(...pt.flat().filter(cl));const Zt=t.selectAll(Nm(Ko)).data([c],()=>v).join(Ct=>Ct.append("rect").style("zIndex",0).style("fill","transparent").attr("className",Ko).call(VD).call(WD,Array.from(h.keys())).call(GD,b),Ct=>Ct.call(WD,Array.from(h.keys())).call(Lt=>lt?mY(Lt,lt):VD(Lt)).call(GD,b)).transitions();n.push(...Zt.flat());for(const[Ct,Lt]of h.entries()){const{data:Tn}=Lt,{key:Fn,class:ir,type:tr}=Ct,Hr=t.select(`#${Fn}`),mi=fY(Ct,Lt,e,r,i),Ki=hY(Ct,Lt,e,r),fi=pY(Ct,Lt,e,r),Zr=vY(Ct,Lt,e,r),yo=uY(t,Hr,ir,"element"),po=Hr.selectAll(Nm(ca)).selectFacetAll(yo).data(Tn,ko=>ko.key,ko=>ko.groupKey).join(ko=>ko.append(mi).attr("className",ca).attr("markType",tr).transition(function(fa,Oa,Na){return Ki(fa,[Na])}),ko=>ko.call(fa=>{const Oa=fa.parent(),Na=cR(ks=>{const[Kl,Wa]=ks.getBounds().min;return[Kl,Wa]});fa.transition(function(ks,Kl,Wa){cY(Wa,Oa,Na);const Os=mi(ks,Kl),Uu=fi(ks,[Wa],[Os]);return Uu!==null||(Wa.nodeName===Os.nodeName&&Os.nodeName!=="g"?mb(Wa,Os):(Wa.parentNode.replaceChild(Os,Wa),Os.className=ca,Os.markType=tr,Os.__data__=Wa.__data__)),Uu}).attr("markType",tr).attr("className",ca)}),ko=>ko.each(function(fa,Oa,Na){Na.__removed__=!0}).transition(function(fa,Oa,Na){return Zr(fa,[Na])}).remove(),ko=>ko.append(mi).attr("className",ca).attr("markType",tr).transition(function(fa,Oa,Na){const{__fromElements__:ks}=Na,Kl=fi(fa,ks,[Na]);return new Pc(ks,null,Na.parentNode).transition(Kl).remove(),Kl}),ko=>ko.transition(function(fa,Oa,Na){const Kl=new Pc([],Na.__toData__,Na.parentNode).append(mi).attr("className",ca).attr("markType",tr).nodes();return fi(fa,[Na],Kl)}).remove()).transitions();n.push(...po.flat())}nY(e,t,n,r,i)})}function nY(e,t,n,r,i){const[s]=$u("labelTransform",r),{markState:l,labelTransform:c}=e,h=t.select(Nm(ao)).node(),p=new Map,v=new Map,y=Array.from(l.entries()).flatMap(([I,N])=>{const{labels:z=[],key:H}=I,X=sY(I,N,e,r,i),$=t.select(`#${H}`).selectAll(Nm(ca)).nodes().filter(te=>!te.__removed__);return z.flatMap((te,fe)=>{const{transform:ye=[]}=te,Le=Dy(te,["transform"]);return $.flatMap(Ge=>{const Qe=rY(Le,fe,Ge);return Qe.forEach(gt=>{p.set(gt,X),v.set(gt,te)}),Qe})})}),b=Aa(h).selectAll(Nm(Tl)).data(y,I=>I.key).join(I=>I.append(N=>p.get(N)(N)).attr("className",Tl),I=>I.each(function(N,z,H){const $=p.get(N)(N);mb(H,$)}),I=>I.remove()).nodes(),w=ou(b,I=>v.get(I.__data__)),{coordinate:R}=e,M={canvas:i.canvas,coordinate:R};for(const[I,N]of w){const{transform:z=[]}=I;x2(z.map(s))(N,M)}c&&c(b,M)}function rY(e,t,n){const{seriesIndex:r,seriesKey:i,points:s,key:l,index:c}=n.__data__,h=aY(n);if(!r)return[Object.assign(Object.assign({},e),{key:`${l}-${t}`,bounds:h,index:c,points:s,dependentElement:n})];const p=oY(e),v=r.map((y,b)=>Object.assign(Object.assign({},e),{key:`${i[b]}-${t}`,bounds:[s[b]],index:y,points:s,dependentElement:n}));return p?p(v):v}function iY([e,t,n]){if(n)return[e,t,n];const r=[],i=[];for(let s=0;s<e.length;s++){const l=e[s],c=t[s];c.every(([h,p])=>cl(h)&&cl(p))&&(r.push(l),i.push(c))}return[r,i]}function oY(e){const{selector:t}=e;if(!t)return null;if(typeof t=="function")return t;if(t==="first")return n=>[n[0]];if(t==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${t}`)}function aY(e){const t=e.cloneNode(),n=e.getAnimations();t.style.visibility="hidden",n.forEach(l=>{const c=l.effect.getKeyframes();t.attr(c[c.length-1])}),e.parentNode.appendChild(t);const r=t.getLocalBounds();t.destroy();const{min:i,max:s}=r;return[i,s]}function sY(e,t,n,r,i){const[s]=$u("shape",r),{data:l,encode:c}=e,{data:h,defaultLabelShape:p}=t,v=h.map(M=>M.points),y=Sn(c,M=>M.value),{theme:b,coordinate:w}=n,R=Object.assign(Object.assign({},i),{document:b6(i),theme:b,coordinate:w});return M=>{const{index:I,points:N}=M,z=l[I],{formatter:H=Zt=>`${Zt}`,transform:X,style:$,render:te}=M,fe=Dy(M,["formatter","transform","style","render"]),ye=Sn(Object.assign(Object.assign({},fe),$),Zt=>kD(Zt,z,I,l,{channel:y})),{shape:Le=p,text:Ge}=ye,Qe=Dy(ye,["shape","text"]),gt=typeof H=="string"?Ye(H):H,qe=Object.assign(Object.assign({},Qe),{text:gt(Ge,z,I,l),datum:z}),lt=Object.assign({type:`label.${Le}`,render:te},Qe),ft=s(lt,R),pt=zD(b,"label",Le,"label");return ft(N,qe,pt,v)}}function kD(e,t,n,r,i){return typeof e=="function"?e(t,n,r,i):typeof e!="string"?e:Em(t)&&t[e]!==void 0?t[e]:e}function lY(e){let t=-1/0,n=1/0;for(const[r,i]of e){const{animate:s={}}=r,{data:l}=i,{enter:c={},update:h={},exit:p={}}=s,{type:v,duration:y=300,delay:b=0}=h,{type:w,duration:R=300,delay:M=0}=c,{type:I,duration:N=300,delay:z=0}=p;for(const H of l){const{updateType:X=v,updateDuration:$=y,updateDelay:te=b,enterType:fe=w,enterDuration:ye=R,enterDelay:Le=M,exitDuration:Ge=N,exitDelay:Qe=z,exitType:gt=I}=H;(X===void 0||X)&&(t=Math.max(t,$+te),n=Math.min(n,te)),(gt===void 0||gt)&&(t=Math.max(t,Ge+Qe),n=Math.min(n,Qe)),(fe===void 0||fe)&&(t=Math.max(t,ye+Le),n=Math.min(n,Le))}}return t===-1/0?null:[n,t-n]}function uY(e,t,n,r){return e.node().parentElement.findAll(s=>s.style.facet!==void 0&&s.style.facet===n&&s!==t.node()).flatMap(s=>s.getElementsByClassName(r))}function cY(e,t,n){if(!e.__facet__)return;const r=e.parentNode.parentNode,i=t.parentNode,[s,l]=n(r),[c,h]=n(i),p=`translate(${s-c}, ${l-h})`;fR(e,p),t.append(e)}function fY(e,t,n,r,i){const[s]=$u("shape",r),{data:l,encode:c}=e,{defaultShape:h,data:p,shape:v}=t,y=Sn(c,z=>z.value),b=p.map(z=>z.points),{theme:w,coordinate:R}=n,{type:M,style:I={}}=e,N=Object.assign(Object.assign({},i),{document:b6(i),coordinate:R,theme:w});return z=>{const{shape:H=h}=I,{shape:X=H,points:$,seriesIndex:te,index:fe}=z,ye=Dy(z,["shape","points","seriesIndex","index"]),Le=Object.assign(Object.assign({},ye),{index:fe}),Ge=te?te.map(ft=>l[ft]):l[fe],Qe=te||fe,gt=Sn(I,ft=>kD(ft,Ge,Qe,l,{channel:y})),qe=v[X]?v[X](gt,N):s(Object.assign(Object.assign({},gt),{type:HD(e,X)}),N),lt=zD(w,M,X,h);return qe($,Le,lt,b)}}function zD(e,t,n,r){if(typeof t!="string")return;const{color:i}=e,s=e[t]||{},l=s[n]||s[r];return Object.assign({color:i},l)}function xM(e,t,n,r,i){var s,l;const[,c]=$u("shape",i),[h]=$u("animation",i),{defaultShape:p,shape:v}=n,{theme:y,coordinate:b}=r,R=`default${Sm(e)}Animation`,{[R]:M}=((s=v[p])===null||s===void 0?void 0:s.props)||c(HD(t,p)).props,{[e]:I={}}=y,N=((l=t.animate)===null||l===void 0?void 0:l[e])||{},z={coordinate:b};return(H,X,$)=>{const{[`${e}Type`]:te,[`${e}Delay`]:fe,[`${e}Duration`]:ye,[`${e}Easing`]:Le}=H,Ge=Object.assign({type:te||M},N);if(!Ge.type)return null;const qe=h(Ge,z)(X,$,oi(I,{delay:fe,duration:ye,easing:Le}));return Array.isArray(qe)?qe:[qe]}}function hY(e,t,n,r){return xM("enter",e,t,n,r)}function dY(e){return e.finished.then(()=>{e.cancel()}),e}function pY(e,t,n,r){return xM("update",e,t,n,r)}function vY(e,t,n,r){return xM("exit",e,t,n,r)}function UD(e={}){if(typeof e=="string")return{type:e};const{type:t="light"}=e,n=Dy(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}function Gw(e){const t={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=e;return Object.entries(oi(t,n)).reverse()}function jD(e,t){return Ag(this,void 0,void 0,function*(){const n={library:t},{data:r}=e,i=Dy(e,["data"]);if(r==null)return e;const[,{data:s}]=yield ID([],{data:r},n);return Object.assign({data:s},i)})}function VD(e){e.style("transform",t=>`translate(${t.paddingLeft+t.marginLeft}, ${t.paddingTop+t.marginTop})`).style("width",t=>t.innerWidth).style("height",t=>t.innerHeight)}function mY(e,t){const[n,r]=t;e.transition(function(i,s,l){const{transform:c,width:h,height:p}=l.style,{paddingLeft:v,paddingTop:y,innerWidth:b,innerHeight:w,marginLeft:R,marginTop:M}=i,I=[{transform:c,width:h,height:p},{transform:`translate(${v+R}, ${y+M})`,width:b,height:w}];return l.animate(I,{delay:n,duration:r,fill:"both"})})}function HD(e,t){const{type:n}=e;return typeof t=="string"?`${n}.${t}`:t}function WD(e,t){const n=s=>s.class!==void 0?`${s.class}`:"";e.nodes().length===0||(e.selectAll(Nm(La)).data(t,s=>s.key).join(s=>s.append("g").attr("className",La).attr("id",l=>l.key).style("facet",n).style("fill","transparent").style("zIndex",l=>{var c;return(c=l.zIndex)!==null&&c!==void 0?c:0}),s=>s.style("facet",n).style("fill","transparent").style("zIndex",l=>{var c;return(c=l.zIndex)!==null&&c!==void 0?c:0}),s=>s.remove()),e.select(Nm(ao)).node())||e.append("g").attr("className",ao).style("zIndex",0)}function Nm(...e){return e.map(t=>`.${t}`).join("")}function GD(e,t){e.node()&&e.style("clipPath",n=>{if(!t)return null;const{paddingTop:r,paddingLeft:i,marginLeft:s,marginTop:l,innerWidth:c,innerHeight:h}=n;return new hd({style:{x:i+s,y:r+l,width:c,height:h}})})}function gY(e,t,n){var r;for(const[p]of n.entries())if(p.type==="cell")return e.filter(v=>v.name!=="shape");if(t.length!==1||e.some(p=>p.name==="shape"))return e;const{defaultShape:i}=t[0];if(!["point","line","rect","hollow"].includes(i))return e;const l={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},h={field:((r=e.find(p=>p.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[l[i]]};return[...e,h]}function yY(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function ZD(e){const t=oi({},e),n=new Map([[t,null]]),r=new Map([[null,-1]]),i=[t];for(;i.length;){const s=i.shift();if(s.key===void 0){const c=n.get(s),h=r.get(s),p=c===null?"0":`${c.key}-${h}`;s.key=p}const{children:l=[]}=s;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=oi({},l[c]);l[c]=h,n.set(h,s),r.set(h,c),i.push(h)}}return t}function _Y(e,t){const n=new VT;return n.registerPlugin(new H_),new pT({width:e,height:t,container:document.createElement("div"),renderer:n})}function bY(e,t={},n=()=>{},r=i=>{throw i}){const{width:i=640,height:s=480,depth:l=0}=e,c=ZD(e),{canvas:h=_Y(i,s),emitter:p=new Fo,library:v}=t;t.canvas=h,t.emitter=p;const{width:y,height:b}=h.getConfig();(y!==i||b!==s)&&h.resize(i,s),p.emit(bl.BEFORE_RENDER);const w=Aa(h.document.documentElement);return h.ready.then(()=>yM(Object.assign(Object.assign({},c),{width:i,height:s,depth:l}),w,v,t)).then(()=>{if(l){const[R,M]=h.document.documentElement.getPosition();h.document.documentElement.setPosition(R,M,-l/2)}h.requestAnimationFrame(()=>{p.emit(bl.AFTER_RENDER),n==null||n()})}).catch(R=>{r==null||r(R)}),EY(h.getConfig().container)}function Jde(e,t={},n=()=>{},r=i=>{throw i}){var i;const{width:s=640,height:l=480}=e,c=ZD(e),{group:h=new Group,emitter:p=new EventEmitter,library:v}=t;h!=null&&h.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const y=select(h);return t.group=h,t.emitter=p,t.canvas=t.canvas||((i=h==null?void 0:h.ownerDocument)===null||i===void 0?void 0:i.defaultView),p.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},c),{width:s,height:l}),y,v,t).then(()=>{var b;(b=t.canvas)===null||b===void 0||b.requestAnimationFrame(()=>{p.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(b=>{r==null||r(b)}),h}function XD(e,t={},n=!1){const{canvas:r,emitter:i}=t;r&&(xY(r),n?r.destroy():r.destroyChildren()),i.off()}function xY(e){const t=e.getRoot().querySelectorAll(`.${sa}`);t==null||t.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(i=>{i==null||i.destroy()})})}function EY(e){return typeof e=="string"?document.getElementById(e):e}const Vb=e=>e?parseInt(e):0;function SY(e){const t=getComputedStyle(e),n=e.clientWidth||Vb(t.width),r=e.clientHeight||Vb(t.height),i=Vb(t.paddingLeft)+Vb(t.paddingRight),s=Vb(t.paddingTop)+Vb(t.paddingBottom);return{width:n-i,height:r-s}}function epe(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:c=r,margin:h=0,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:w=0,insetLeft:R=w,insetRight:M=w,insetTop:I=w,insetBottom:N=w}=e,z=$=>$==="auto"?20:$,H=n-z(i)-z(s)-p-v-R-M,X=t-z(l)-z(c)-y-b-I-N;return{width:H,height:X}}function EM(e,t){const n=[e];for(;n.length;){const r=n.shift();t&&t(r);const i=r.children||[];for(const s of i)n.push(s)}}class SM{constructor(t={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=t}map(t=n=>n){const n=t(this.value);return this.value=n,this}attr(t,n){return arguments.length===1?this.value[t]:this.map(r=>(r[t]=n,r))}append(t){const n=new t({});return n.children=[],this.push(n),n}push(t){return t.parentNode=this,t.index=this.children.length,this.children.push(t),this}remove(){const t=this.parentNode;if(t){const{children:n}=t,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(t){let n=null;return EM(this,i=>{t===i.attr("key")&&(n=i)}),n}getNodesByType(t){const n=[];return EM(this,i=>{t===i.type&&n.push(i)}),n}getNodeByType(t){let n=null;return EM(this,r=>{n||t===r.type&&(n=r)}),n}call(t,...n){return t(this.map(),...n),this}getRoot(){let t=this;for(;t&&t.parentNode;)t=t.parentNode;return t}}var $D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const TM=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title"],YD="__remove__",KD="__callback__",qD=1,QD=1;function TY(e){if(e===void 0){const t=document.createElement("div");return t[YD]=!0,t}return typeof e=="string"?document.getElementById(e):e}function wY(e){const t=e.parentNode;t&&t.removeChild(e)}function AY(e){if(e.type!==null)return e;const t=e.children[e.children.length-1];for(const n of TM)t.attr(n,e.attr(n));return t}function JD(e){return Object.assign(Object.assign({},e.value),{type:e.type})}function wM(e,t){const{width:n,height:r,autoFit:i,depth:s=0}=e;let l=640,c=480;if(i){const{width:h,height:p}=SY(t);l=h||l,c=p||c}return l=n||l,c=r||c,{width:Math.max((0,Gl.Z)(l)?l:qD,qD),height:Math.max((0,Gl.Z)(c)?c:QD,QD),depth:s}}function OY(e){const t=AY(e),n=[t],r=new Map;for(r.set(t,JD(t));n.length;){const i=n.pop(),s=r.get(i),{children:l=[]}=i;for(const c of l)if(c.type===KD)s.children=c.value;else{const h=JD(c),{children:p=[]}=s;p.push(h),n.push(c),r.set(c,h),s.children=p}}return r.get(t)}function CY(e,t){return typeof e=="function"?!0:new Set(Object.keys(t)).has(e)}function RY(e,t){return typeof e!="function"&&new Set(Object.keys(t)).has(e)}function MY(e,t,n,r,i){const{type:s}=e,{type:l=n||s}=t;if(RY(l,i)){for(const c of TM)e.attr(c)!==void 0&&t[c]===void 0&&(t[c]=e.attr(c));return t}if(CY(l,r)){const c={type:"view"},h=Object.assign({},t);for(const p of TM)h[p]!==void 0&&(c[p]=h[p],delete h[p]);return Object.assign(Object.assign({},c),{children:[h]})}return t}function PY(e,t,n){if(typeof e=="function")return t.mark;const i=Object.assign(Object.assign({},t),n)[e];if(!i)throw new Error(`Unknown mark: ${e}.`);return i}function IY(e,t,n){if(typeof e=="function"){const h=new SM;return h.value=e,h.type=KD,h}const{type:r,children:i}=e,s=$D(e,["type","children"]),l=PY(r,t,n),c=new l;return c.value=s,c.type=r,c}function LY(e,t){const{type:n,children:r}=t,i=$D(t,["type","children"]);e.type===n||n===void 0?qT(e.value,i):typeof n=="string"&&(e.type=n,e.value=i)}function DY(e,t,n,r){if(!e)return;const i=[[e,t]];for(;i.length;){const[s,l]=i.shift(),c=IY(l,n,r);Array.isArray(s.children)&&s.push(c);const{children:h}=l;if(Array.isArray(h))for(const p of h)i.push([c,p]);else typeof h=="function"&&i.push([c,h])}}function NY(e,t,n,r,i){const s=MY(e,t,n,r,i),l=[[null,e,s]];for(;l.length;){const[c,h,p]=l.shift();if(!h)DY(c,p,r,i);else if(!p)h.remove();else{LY(h,p);const{children:v}=p,{children:y}=h;if(Array.isArray(v)&&Array.isArray(y)){const b=Math.max(v.length,y.length);for(let w=0;w<b;w++){const R=v[w],M=y[w];l.push([h,M,R])}}else typeof v=="function"&&l.push([h,null,v])}}}function BY(){let e,t;return[new Promise((r,i)=>{t=r,e=i}),t,e]}function FY(e,t,{key:n=t}){e.prototype[t]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function kY(e,t,{key:n=t}){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const i=[...this.attr(n)||[],r];return this.attr(n,i)}}function zY(e,t,{key:n=t}){e.prototype[t]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const s=this.attr(n)||{};return s[r]=arguments.length===1?!0:i,this.attr(n,s)}}function UY(e,t,n){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(t);if(Array.isArray(r))return this.attr(t,{items:r});if(Em(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(t,r);if(r===null||r===!1)return this.attr(t,r);const i=this.attr(t)||{},{items:s=[]}=i;return s.push(r),i.items=s,this.attr(t,i)}}function jY(e,t,{ctor:n}){e.prototype[t]=function(r){const i=this.append(n);return t==="mark"&&(i.type=r),i}}function VY(e,t,{ctor:n}){e.prototype[t]=function(){return this.type=null,this.append(n)}}function Zw(e){return t=>{for(const[n,r]of Object.entries(e)){const{type:i}=r;i==="value"?FY(t,n,r):i==="array"?kY(t,n,r):i==="object"?zY(t,n,r):i==="node"?jY(t,n,r):i==="container"?VY(t,n,r):i==="mix"&&UY(t,n,r)}return t}}function eN(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{type:"node",ctor:n}]))}const tN={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},HY=Object.assign(Object.assign({},tN),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),WY=Object.assign(Object.assign({},tN),{labelTransform:{type:"array"}});var GY=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let Xw=class extends SM{changeData(t){var n;const r=this.getRoot();if(r)return this.attr("data",t),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(i=>{i.attr("data",t)}),r==null?void 0:r.render()}getView(){const t=this.getRoot(),{views:n}=t.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var t;return(t=this.getView())===null||t===void 0?void 0:t.scale}getScaleByChannel(t){const n=this.getScale();if(n)return n[t]}getCoordinate(){var t;return(t=this.getView())===null||t===void 0?void 0:t.coordinate}getTheme(){var t;return(t=this.getView())===null||t===void 0?void 0:t.theme}getGroup(){const t=this._key;return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}show(){const t=this.getGroup();t&&!t.isVisible()&&Cw(t)}hide(){const t=this.getGroup();t&&t.isVisible()&&tM(t)}};Xw=GY([Zw(WY)],Xw);var ZY=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let AM=class extends SM{changeData(t){const n=this.getRoot();if(n)return this.attr("data",t),n==null?void 0:n.render()}getMark(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(!n)return;const{markState:r}=n,i=Array.from(r.keys()).find(s=>s.key===this.attr("key"));return r.get(i)}getScale(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(t){var n,r;const i=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(i)return(r=i==null?void 0:i.scale)===null||r===void 0?void 0:r[t]}getGroup(){const t=this.attr("key");return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}};AM=ZY([Zw(HY)],AM);var XY=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},$Y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const YY="G2_CHART_KEY";class KY extends Xw{constructor(t){const{container:n,canvas:r,renderer:i,plugins:s,lib:l}=t,c=$Y(t,["container","canvas","renderer","plugins","lib"]);super(c,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=HT(()=>{this.forceFit()},300),this._renderer=i||new VT,this._plugins=s||[],this._container=TY(n),this._emitter=new Fo,this._context={library:Object.assign(Object.assign({},l),Wl),emitter:this._emitter,canvas:r},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._context.canvas.getConfig().supportsCSSTransform=!0,this._bindAutoFit(),this._rendering=!0;const t=new Promise((s,l)=>bY(this._computedOptions(),this._context,this._createResolve(s),this._createReject(l))),[n,r,i]=BY();return t.then(r).catch(i).then(()=>this._renderTrailing()),n}options(t){if(arguments.length===0)return OY(this);const{type:n}=t;return n&&(this._previousDefinedType=n),NY(this,t,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(t,n,r){return this._emitter.on(t,n,r),this}once(t,n){return this._emitter.once(t,n),this}emit(t,...n){return this._emitter.emit(t,...n),this}off(t,n){return this._emitter.off(t,n),this}clear(){const t=this.options();this.emit(bl.BEFORE_CLEAR),this._reset(),XD(t,this._context,!1),this.emit(bl.AFTER_CLEAR)}destroy(){const t=this.options();this.emit(bl.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),XD(t,this._context,!0),this._container[YD]&&wY(this._container),this.emit(bl.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:t,height:n}=wM(this.options(),this._container);if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(bl.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(bl.AFTER_CHANGE_SIZE)}),r}changeSize(t,n){if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(bl.BEFORE_CHANGE_SIZE),this.attr("width",t),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(bl.AFTER_CHANGE_SIZE)}),r}_create(){const{library:t}=this._context,n=s=>s.startsWith("mark.")||s==="component.axisX"||s==="component.axisY"||s==="component.legends",r=["mark.mark",...Object.keys(t).filter(n)];this._marks={};for(const s of r){const l=s.split(".").pop();class c extends AM{constructor(){super({},l)}}this._marks[l]=c,this[l]=function(h){const p=this.append(c);return l==="mark"&&(p.type=h),p}}const i=["composition.view",...Object.keys(t).filter(s=>s.startsWith("composition.")&&s!=="composition.mark")];this._compositions=Object.fromEntries(i.map(s=>{const l=s.split(".").pop();let c=class extends Xw{constructor(){super({},l)}};return c=XY([Zw(eN(this._marks))],c),[l,c]}));for(const s of Object.values(this._compositions))Zw(eN(this._compositions))(s);for(const s of i){const l=s.split(".").pop();this[l]=function(){const c=this._compositions[l];return this.type=null,this.append(c)}}}_reset(){const t=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||t.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const t=this._trailingResolve.bind(this);this._trailingResolve=null,t(this)}).catch(t=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(t)}))}_createResolve(t){return()=>{this._rendering=!1,t(this)}}_createReject(t){return n=>{this._rendering=!1,t(n)}}_computedOptions(){const t=this.options(),{key:n=YY}=t,{width:r,height:i,depth:s}=wM(t,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},t),{width:r,height:i,depth:s})}_createCanvas(){const{width:t,height:n}=wM(this.options(),this._container);this._plugins.push(new H_),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new pT({container:this._container,width:t,height:n,renderer:this._renderer})}_addToTrailing(){var t;return(t=this._trailingResolve)===null||t===void 0||t.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const t=this.options(),{autoFit:n}=t;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function qY(e,t){class n extends e{constructor(i){super(Object.assign(Object.assign({},i),{lib:t}))}}return n}var QY=Object.prototype.hasOwnProperty,OM=function(e,t){if(e===null||!Lv(e))return{};var n={};return BR(t,function(r){QY.call(e,r)&&(n[r]=e[r])}),n};function nN(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Q2(e,t,n,r,i){for(var s=e.children,l,c=-1,h=s.length,p=e.value&&(r-t)/e.value;++c<h;)l=s[c],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*p}function JY(){var e=1,t=1,n=0,r=!1;function i(l){var c=l.height+1;return l.x0=l.y0=n,l.x1=e,l.y1=t/c,l.eachBefore(s(t,c)),r&&l.eachBefore(nN),l}function s(l,c){return function(h){h.children&&Q2(h,h.x0,l*(h.depth+1)/c,h.x1,l*(h.depth+2)/c);var p=h.x0,v=h.y0,y=h.x1-n,b=h.y1-n;y<p&&(p=y=(p+y)/2),b<v&&(v=b=(v+b)/2),h.x0=p,h.y0=v,h.x1=y,h.y1=b}}return i.round=function(l){return arguments.length?(r=!!l,i):r},i.size=function(l){return arguments.length?(e=+l[0],t=+l[1],i):[e,t]},i.padding=function(l){return arguments.length?(n=+l,i):n},i}var eK=D(9783);function tK(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function nK(){return this.eachAfter(tK)}var CM=D(64599);function rK(e,t){var n=-1,r=CM(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;e.call(t,s,++n,this)}}catch(l){r.e(l)}finally{r.f()}return this}function iK(e,t){for(var n=this,r=[n],i,s,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function oK(e,t){for(var n=this,r=[n],i=[],s,l,c,h=-1;n=r.pop();)if(i.push(n),s=n.children)for(l=0,c=s.length;l<c;++l)r.push(s[l]);for(;n=i.pop();)e.call(t,n,++h,this);return this}function aK(e,t){var n=-1,r=CM(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;if(e.call(t,s,++n,this))return s}}catch(l){r.e(l)}finally{r.f()}}function sK(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function lK(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function uK(e){for(var t=this,n=cK(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function cK(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function fK(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function hK(){return Array.from(this)}function dK(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function pK(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}var rN=D(15009),vK=rN().mark(iN);function iN(){var e,t,n,r,i,s;return rN().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:e=this,n=[e];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){c.next=8;break}return c.next=5,e;case 5:if(r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);c.next=2;break;case 8:if(n.length){c.next=1;break}case 9:case"end":return c.stop()}},vK,this)}function Hb(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=yK)):t===void 0&&(t=gK);for(var n=new Wb(e),r,i=[n],s,l,c,h;r=i.pop();)if((l=t(r.data))&&(h=(l=Array.from(l)).length))for(r.children=l,c=h-1;c>=0;--c)i.push(s=l[c]=new Wb(l[c])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(oN)}function mK(){return Hb(this).eachBefore(_K)}function gK(e){return e.children}function yK(e){return Array.isArray(e)?e[1]:null}function _K(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function oN(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Wb(e){this.data=e,this.depth=this.height=0,this.parent=null}Wb.prototype=Hb.prototype=eK({constructor:Wb,count:nK,each:rK,eachAfter:oK,eachBefore:iK,find:aK,sum:sK,sort:lK,path:uK,ancestors:fK,descendants:hK,leaves:dK,links:pK,copy:mK},Symbol.iterator,iN);function RM(e,t){for(var n in t)t.hasOwnProperty(n)&&n!=="constructor"&&t[n]!==void 0&&(e[n]=t[n])}function bK(e,t,n,r){return t&&RM(e,t),n&&RM(e,n),r&&RM(e,r),e}const xK={field:"value",size:[1,1],round:!1,padding:0,sort:(e,t)=>t.value-e.value,as:["x","y"],ignoreParentValue:!0},EK="nodeIndex",J2="childNodeCount",SK="nodeAncestor",MM="Invalid field: it must be a string!";function TK(e,t){const{field:n,fields:r}=e;if(u(n))return n;if(jo(n))return console.warn(MM),n[0];if(console.warn(`${MM} will try to get fields instead.`),u(r))return r;if(jo(r)&&r.length)return r[0];if(t)return t;throw new TypeError(MM)}function wK(e){const t=[];if(e&&e.each){let n,r;e.each(i=>{var s,l;i.parent!==n?(n=i.parent,r=0):r+=1;const c=a6((((s=i.ancestors)===null||s===void 0?void 0:s.call(i))||[]).map(h=>t.find(p=>p.name===h.name)||h),({depth:h})=>h>0&&h<i.depth);i[SK]=c,i[J2]=((l=i.children)===null||l===void 0?void 0:l.length)||0,i[EK]=r,t.push(i)})}else e&&e.eachNode&&e.eachNode(n=>{t.push(n)});return t}function AK(e,t){t=bK({},xK,t);const n=t.as;if(!jo(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=TK(t)}catch(h){console.warn(h)}const s=(h=>JY().size(t.size).round(t.round).padding(t.padding)(Hb(h).sum(p=>B2(p.children)?t.ignoreParentValue?0:p[r]-sL(p.children,(v,y)=>v+y[r],0):p[r]).sort(t.sort)))(e),l=n[0],c=n[1];return s.each(h=>{var p,v;h[l]=[h.x0,h.x1,h.x1,h.x0],h[c]=[h.y1,h.y1,h.y0,h.y0],h.name=h.name||((p=h.data)===null||p===void 0?void 0:p.name)||((v=h.data)===null||v===void 0?void 0:v.label),h.data.name=h.name,["x0","x1","y0","y1"].forEach(y=>{n.indexOf(y)===-1&&delete h[y]})}),wK(s)}var OK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Gb="sunburst",PM="markType",tpe="value",aN="path",$w="ancestor-node";function CK(e){const{data:t,encode:n}=e,{color:r,value:i}=n,l=AK(t,{field:i,type:"hierarchy.partition",as:["x","y"]}),c=[];return l.forEach(h=>{var p,v,y,b;if(h.depth===0)return null;let w=h.data.name;const R=[w];let M=Object.assign({},h);for(;M.depth>1;)w=`${(p=M.parent.data)===null||p===void 0?void 0:p.name} / ${w}`,R.unshift((v=M.parent.data)===null||v===void 0?void 0:v.name),M=M.parent;const I=Object.assign(Object.assign(Object.assign({},OM(h.data,[i])),{[aN]:w,[$w]:M.data.name}),h);r&&r!==$w&&(I[r]=h.data[r]||((b=(y=h.parent)===null||y===void 0?void 0:y.data)===null||b===void 0?void 0:b[r])),c.push(I)}),c.map(h=>Object.assign(Object.assign({},h),{x:h.x.slice(0,2),y:[h.y[2],h.y[0]],fillOpacity:Math.pow(.85,h.depth)}))}const sN={id:Gb,encode:{x:"x",y:"y",key:aN,color:$w,value:"value"},axis:{x:!1,y:!1},style:{[PM]:Gb,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[J2]:J2,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},lN=e=>{const{encode:t,data:n=[],legend:r}=e,i=OK(e,["encode","data","legend"]),s=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(fl(i,["coordinate","innerRadius"],.2),1e-5)}),l=Object.assign(Object.assign({},sN.encode),t),{value:c}=l,h=CK({encode:l,data:n});return[oi({},sN,Object.assign(Object.assign({type:"rect",data:h,encode:l,tooltip:{title:"path",items:[p=>({name:c,value:p[c]})]}},i),{coordinate:s}))]};lN.props={};var RK=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return BR(e,function(n,r){tp(e)&&r==="prototype"||t.push(r)}),t},IM=RK,MK=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const PK=e=>e.querySelectorAll(".element").filter(t=>fl(t,["style",PM])===Gb);function IK(e){return Aa(e).select(`.${Ko}`).node()}const LK={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function DK(e={}){const{breadCrumb:t={},isFixedColor:n=!1,duration:r}=e,i=oi({},LK,t);return s=>{const{update:l,setState:c,container:h,view:p,options:v}=s,y=IK(h),b=v.marks.find(({id:H})=>H===Gb),{state:w}=b,R=new ff;y.appendChild(R);const M=(H,X)=>MK(this,void 0,void 0,function*(){if(R.removeChildren(),H){const $=new hf({style:Object.assign({x:0,text:i.rootText,depth:0},i.style)});R.appendChild($);let te="";const fe=H==null?void 0:H.split(" / ");let ye=i.style.y,Le=R.getBBox().width;const Ge=y.getBBox().width,Qe=fe.map((gt,qe)=>{const lt=new hf({style:Object.assign(Object.assign({x:Le,text:" / "},i.style),{y:ye})});R.appendChild(lt),Le+=lt.getBBox().width,te=`${te}${gt} / `;const ft=new hf({name:te.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:gt,x:Le,depth:qe+1},i.style),{y:ye})});return R.appendChild(ft),Le+=ft.getBBox().width,Le>Ge&&(ye=R.getBBox().height,Le=0,lt.attr({x:Le,y:ye}),Le+=lt.getBBox().width,ft.attr({x:Le,y:ye}),Le+=ft.getBBox().width),ft});[$,...Qe].forEach((gt,qe)=>{if(qe===Qe.length)return;const lt=Object.assign({},gt.attributes);gt.attr("cursor","pointer"),gt.addEventListener("mouseenter",()=>{gt.attr(i.active)}),gt.addEventListener("mouseleave",()=>{gt.attr(lt)}),gt.addEventListener("click",()=>{M(gt.name,fl(gt,["style","depth"]))})})}c("drillDown",$=>{const{marks:te}=$,fe=te.map(ye=>{if(ye.id!==Gb&&ye.type!=="rect")return ye;const{data:Le}=ye,Ge=Object.fromEntries(["color"].map(gt=>[gt,{domain:p.scale[gt].getOptions().domain}])),Qe=Le.filter(gt=>{const qe=gt.path;return n||(gt[$w]=qe.split(" / ")[X]),H?new RegExp(`^${H}.+`).test(qe):!0});return oi({},ye,n?{data:Qe,scale:Ge}:{data:Qe})});return Object.assign(Object.assign({},$),{marks:fe})}),yield l()}),I=H=>{const X=H.target;if(fl(X,["style",PM])!==Gb||fl(X,["markType"])!=="rect"||!fl(X,["style",J2]))return;const $=fl(X,["__data__","key"]),te=fl(X,["style","depth"]);X.style.cursor="pointer",M($,te)};y.addEventListener("click",I);const N=IM(Object.assign(Object.assign({},w.active),w.inactive)),z=()=>{PK(y).forEach(X=>{const $=fl(X,["style",J2]);if(fl(X,["style","cursor"])!=="pointer"&&$){X.style.cursor="pointer";const fe=OM(X.attributes,N),ye=oi(fe,w.inactive);X.addEventListener("mouseenter",()=>{r?(X.attr("zIndex",fl(w,["active","zIndex"],2)),X.animate([J_(ye,["zIndex"]),J_(w.active,["zIndex"])],{duration:r,fill:"forwards"})):X.attr(w.active)}),X.addEventListener("mouseleave",()=>{r?(X.animate([J_(w.active,["zIndex"]),J_(ye,["zIndex"])],{duration:r,fill:"forwards"}),setTimeout(()=>{X.attr("zIndex",fl(ye,["zIndex"],1))},r)):X.attr(ye)})}})};return y.addEventListener("mousemove",z),()=>{R.remove(),y.removeEventListener("click",I),y.removeEventListener("mousemove",z)}}}qr.enableCSSParsing=!1;function NK(){return{"interaction.drillDown":DK,"mark.sunburst":lN}}const uN=()=>[["cartesian"]];uN.props={};const LM=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];LM.props={transform:!0};const BK=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},cN=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=BK(e);return[...LM(),...qf({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};cN.props={};const DM=()=>[["parallel",0,1,0,1]];DM.props={};const fN=({focusX:e=0,focusY:t=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",e,t,n,r,i]];fN.props={transform:!0};const hN=e=>{const{startAngle:t=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=e;return[...DM(),...qf({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};hN.props={};const dN=({value:e})=>t=>t.map(()=>e);dN.props={};const pN=({value:e})=>t=>t.map(n=>n[e]);pN.props={};const vN=({value:e})=>t=>t.map(e);vN.props={};const mN=({value:e})=>()=>e;mN.props={};function zu(e,t){if(e!==null)return{type:"column",value:e,field:t}}function Yw(e,t){const n=zu(e,t);return Object.assign(Object.assign({},n),{inferred:!0})}function Kw(e,t){if(e!==null)return{type:"column",value:e,field:t,visual:!0}}function FK(e,t){const n=zu(e,t);return Object.assign(Object.assign({},n),{constant:!1})}function Ny(e,t){const n=[];for(const r of e)n[r]=t;return n}function sl(e,t){const n=e[t];if(!n)return[null,null];const{value:r,field:i=null}=n;return[r,i]}function eE(e,...t){for(const n of t)if(typeof n=="string"){const[r,i]=sl(e,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function tE(e){return e instanceof Date?!1:typeof e=="object"}const nE=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;return r!==void 0?[e,t]:[e,oi({},t,{encode:{y1:Yw(Ny(e,0))}})]};nE.props={};const u1=()=>(e,t)=>{const{encode:n}=t,{x:r}=n;return r!==void 0?[e,t]:[e,oi({},t,{encode:{x:Yw(Ny(e,0))},scale:{x:{guide:null}}})]};u1.props={};const c1=(e,t)=>W2(Object.assign({colorAttribute:"fill"},e),t);c1.props=Object.assign(Object.assign({},W2.props),{defaultMarker:"square"});const qw=(e,t)=>W2(Object.assign({colorAttribute:"stroke"},e),t);qw.props=Object.assign(Object.assign({},W2.props),{defaultMarker:"hollowSquare"});function Zb(){}function gN(e){this._context=e}gN.prototype={areaStart:Zb,areaEnd:Zb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function NM(e){return new gN(e)}var yN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function kK(e,t,n){const[r,i,s,l]=e;if(wu(n)){const p=[t?t[0][0]:i[0],i[1]],v=[t?t[3][0]:s[0],s[1]];return[r,p,v,l]}const c=[i[0],t?t[0][1]:i[1]],h=[s[0],t?t[3][1]:s[1]];return[r,c,h,l]}const BM=(e,t)=>{const{adjustPoints:n=kK}=e,r=yN(e,["adjustPoints"]),{coordinate:i,document:s}=t;return(l,c,h,p)=>{const{index:v}=c,{color:y}=h,b=yN(h,["color"]),w=p[v+1],R=n(l,w,i),M=!!wu(i),[I,N,z,H]=M?bw(R):R,{color:X=y,opacity:$}=c,te=Ry().curve(NM)([I,N,z,H]);return Aa(s.createElement("path",{})).call(ia,b).style("d",te).style("fill",X).style("fillOpacity",$).call(ia,r).node()}};BM.props={defaultMarker:"square"};function zK(e,t,n){const[r,i,s,l]=e;if(wu(n)){const p=[t?t[0][0]:(i[0]+s[0])/2,i[1]],v=[t?t[3][0]:(i[0]+s[0])/2,s[1]];return[r,p,v,l]}const c=[i[0],t?t[0][1]:(i[1]+s[1])/2],h=[s[0],t?t[3][1]:(i[1]+s[1])/2];return[r,c,h,l]}const _N=(e,t)=>BM(Object.assign({adjustPoints:zK},e),t);_N.props={defaultMarker:"square"};function rE(e){return Math.abs(e)>10?String(e):e.toString().padStart(2,"0")}function UK(e){const t=e.getFullYear(),n=rE(e.getMonth()+1),r=rE(e.getDate()),i=`${t}-${n}-${r}`,s=e.getHours(),l=e.getMinutes(),c=e.getSeconds();return s||l||c?`${i} ${rE(s)}:${rE(l)}:${rE(c)}`:i}const Qw=(e={})=>{const{channel:t="x"}=e;return(n,r)=>{const{encode:i}=r,{tooltip:s}=r;if(Dv(s))return[n,r];const{title:l}=s;if(l!==void 0)return[n,r];const c=Object.keys(i).filter(p=>p.startsWith(t)).filter(p=>!i[p].inferred).map(p=>sl(i,p)).filter(([p])=>p).map(p=>p[0]);if(c.length===0)return[n,r];const h=[];for(const p of n)h[p]={value:c.map(v=>v[p]instanceof Date?UK(v[p]):v[p]).join(", ")};return[n,oi({},r,{tooltip:{title:h}})]}};Qw.props={};const Jw=e=>{const{channel:t}=e;return(n,r)=>{const{encode:i,tooltip:s}=r;if(Dv(s))return[n,r];const{items:l=[]}=s;if(!l||l.length>0)return[n,r];const h=(Array.isArray(t)?t:[t]).flatMap(p=>Object.keys(i).filter(v=>v.startsWith(p)).map(v=>{const{field:y,value:b,inferred:w=!1,aggregate:R}=i[v];return w?null:R&&b?{channel:v}:y?{field:y}:b?{channel:v}:null}).filter(v=>v!==null));return[n,oi({},r,{tooltip:{items:h}})]}};Jw.props={};var jK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const bN=()=>(e,t)=>{const{encode:n}=t,{key:r}=n,i=jK(n,["key"]);if(r!==void 0)return[e,t];const s=Object.values(i).map(({value:c})=>c),l=e.map(c=>s.filter(Array.isArray).map(h=>h[c]).join("-"));return[e,oi({},t,{encode:{key:zu(l)}})]};bN.props={};function xN(e={}){const{shapes:t}=e;return[{name:"color"},{name:"opacity"},{name:"shape",range:t},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function np(e={}){return[...xN(e),{name:"title",scale:"identity"}]}function npe(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function By(){return[{type:Qw,channel:"color"},{type:Jw,channel:["x","y"]}]}function Xb(){return[{type:Qw,channel:"x"},{type:Jw,channel:["y"]}]}function VK(){return[{type:Qw,channel:"color"},{type:Jw,channel:["position"]}]}function $b(e={}){return xN(e)}function $c(){return[{type:bN}]}function pf(){return[]}function FM(e,t){return e.getBandWidth(e.invert(t))}function f1(e,t,n={}){const{x:r,y:i,series:s}=t,{x:l,y:c,series:h}=e,{style:{bandOffset:p=h?0:.5,bandOffsetX:v=p,bandOffsetY:y=p}={}}=n,b=!!(l!=null&&l.getBandWidth),w=!!(c!=null&&c.getBandWidth),R=!!(h!=null&&h.getBandWidth);return!b&&!w?M=>M:(M,I)=>{const N=b?FM(l,r[I]):0,z=w?FM(c,i[I]):0,X=R&&s?(FM(h,s[I])/2+ +s[I])*N:0,[$,te]=M;return[$+v*N+X,te+y*z]}}function eA(e){return parseFloat(e)/100}function kM(e,t,n,r){const{x:i,y:s}=n,{innerWidth:l,innerHeight:c}=r.getOptions(),h=Array.from(e,p=>{const v=i[p],y=s[p],b=typeof v=="string"?eA(v)*l:+v,w=typeof y=="string"?eA(y)*c:+y;return[[b,w]]});return[e,h]}function Bm(e){return typeof e=="function"?e:t=>t[e]}function zM(e,t){return Array.from(e,Bm(t))}function UM(e,t){const{source:n=v=>v.source,target:r=v=>v.target,value:i=v=>v.value}=t,{links:s,nodes:l}=e,c=zM(s,n),h=zM(s,r),p=zM(s,i);return{links:s.map((v,y)=>({target:h[y],source:c[y],value:p[y]})),nodes:l||Array.from(new Set([...c,...h]),v=>({key:v}))}}function EN(e,t){return e.getBandWidth(e.invert(t))}const SN={rect:c1,hollow:qw,funnel:BM,pyramid:_N},TN=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,series:c,size:h}=n,p=t.x,v=t.series,[y]=r.getSize(),b=h?h.map(M=>+M/y):null,w=h?(M,I,N)=>{const z=M+I/2,H=b[N];return[z-H/2,z+H/2]}:(M,I,N)=>[M,M+I],R=Array.from(e,M=>{const I=EN(p,i[M]),N=v?EN(v,c==null?void 0:c[M]):1,z=I*N,H=(+(c==null?void 0:c[M])||0)*I,X=+i[M]+H,[$,te]=w(X,z,M),fe=+s[M],ye=+l[M];return[[$,fe],[te,fe],[te,ye],[$,ye]].map(qe=>r.map(qe))});return[e,R]};TN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:SN,channels:[...np({shapes:Object.keys(SN)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...$c(),{type:nE},{type:u1}],postInference:[...pf(),...Xb()],interaction:{shareTooltip:!0}};const wN={rect:c1,hollow:qw},AN=()=>(e,t,n,r)=>{const{x:i,x1:s,y:l,y1:c}=n,h=Array.from(e,p=>{const v=[+i[p],+l[p]],y=[+s[p],+l[p]],b=[+s[p],+c[p]],w=[+i[p],+c[p]];return[v,y,b,w].map(R=>r.map(R))});return[e,h]};AN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:wN,channels:[...np({shapes:Object.keys(wN)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c(),{type:nE}],postInference:[...pf(),...Xb()],interaction:{shareTooltip:!0}};var ON=jM(z2);function CN(e){this._curve=e}CN.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function jM(e){function t(n){return new CN(e(n))}return t._curve=e,t}function iE(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(jM(n)):t()._curve},e}function HK(){return iE(Ry().curve(ON))}var RN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const WK=Mb(e=>{const{d1:t,d2:n,style1:r,style2:i}=e.attributes,s=e.ownerDocument;Aa(e).maybeAppend("line",()=>s.createElement("path",{})).style("d",t).call(ia,r),Aa(e).maybeAppend("line1",()=>s.createElement("path",{})).style("d",n).call(ia,i)});function GK(e,t){const n=[],r=[];let i=!1,s=null;for(const l of e)!t(l[0])||!t(l[1])?i=!0:(n.push(l),i&&(i=!1,r.push([s,l])),s=l);return[n,r]}const q0=(e,t)=>{const{curve:n,gradient:r=!1,gradientColor:i="between",defined:s=v=>!Number.isNaN(v)&&v!==void 0&&v!==null,connect:l=!1}=e,c=RN(e,["curve","gradient","gradientColor","defined","connect"]),{coordinate:h,document:p}=t;return(v,y,b)=>{const{color:w,lineWidth:R}=b,M=RN(b,["color","lineWidth"]),{color:I=w,size:N=R,seriesColor:z,seriesX:H,seriesY:X}=y,$=HL(h,y),te=wu(h),fe=r&&z?VL(z,H,X,r,i,te):I,ye=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},M),fe&&{stroke:fe}),N&&{lineWidth:N}),$&&{transform:$}),c);let Le;if(au(h)){const ft=h.getCenter();Le=pt=>HK().angle((Zt,Ct)=>Rb(Ic(pt[Ct],ft))).radius((Zt,Ct)=>Fu(pt[Ct],ft)).defined(([Zt,Ct])=>s(Zt)&&s(Ct)).curve(n)(pt)}else Le=Ry().x(ft=>ft[0]).y(ft=>ft[1]).defined(([ft,pt])=>s(ft)&&s(pt)).curve(n);const[Ge,Qe]=GK(v,s),gt=go(ye,"connect"),qe=!!Qe.length;if(!qe||l&&!Object.keys(gt).length)return Aa(p.createElement("path",{})).style("d",Le(Ge)||[]).call(ia,ye).node();if(qe&&!l)return Aa(p.createElement("path",{})).style("d",Le(v)).call(ia,ye).node();const lt=ft=>ft.map(Le).join(",");return Aa(new WK).style("style1",Object.assign(Object.assign({},ye),gt)).style("style2",ye).style("d1",lt(Qe)).style("d2",Le(v)).node()}};q0.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const MN=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=au(n)?NM:z2;return q0(Object.assign({curve:i},e),t)(...r)}};MN.props=Object.assign(Object.assign({},q0.props),{defaultMarker:"line"});function VM(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function HM(e,t){this._context=e,this._k=(1-t)/6}HM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:VM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:VM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var rpe=function e(t){function n(r){return new HM(r,t)}return n.tension=function(r){return e(+r)},n}(0);function WM(e,t){this._context=e,this._k=(1-t)/6}WM.prototype={areaStart:Zb,areaEnd:Zb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:VM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ipe=function e(t){function n(r){return new WM(r,t)}return n.tension=function(r){return e(+r)},n}(0);function PN(e,t,n){var r=e._x1,i=e._y1,s=e._x2,l=e._y2;if(e._l01_a>yd){var c=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,h=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*c-e._x0*e._l12_2a+e._x2*e._l01_2a)/h,i=(i*c-e._y0*e._l12_2a+e._y2*e._l01_2a)/h}if(e._l23_a>yd){var p=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,v=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*p+e._x1*e._l23_2a-t*e._l12_2a)/v,l=(l*p+e._y1*e._l23_2a-n*e._l12_2a)/v}e._context.bezierCurveTo(r,i,s,l,e._x2,e._y2)}function IN(e,t){this._context=e,this._alpha=t}IN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:PN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ope=function e(t){function n(r){return t?new IN(r,t):new HM(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function LN(e,t){this._context=e,this._alpha=t}LN.prototype={areaStart:Zb,areaEnd:Zb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:PN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var DN=function e(t){function n(r){return t?new LN(r,t):new WM(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function NN(e){return e<0?-1:1}function BN(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),c=(s*i+l*r)/(r+i);return(NN(s)+NN(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(c))||0}function FN(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function GM(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,c=(s-r)/3;e._context.bezierCurveTo(r+c,i+c*t,s-c,l-c*n,s,l)}function tA(e){this._context=e}tA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:GM(this,this._t0,FN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,GM(this,FN(this,n=BN(this,e,t)),n);break;default:GM(this,this._t0,n=BN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function kN(e){this._context=new zN(e)}(kN.prototype=Object.create(tA.prototype)).point=function(e,t){tA.prototype.point.call(this,t,e)};function zN(e){this._context=e}zN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function UN(e){return new tA(e)}function jN(e){return new kN(e)}var ZK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const VN=(e,t)=>{const n=ZK(e,[]),{coordinate:r}=t;return(...i)=>{const s=au(r)?DN:wu(r)?jN:UN;return q0(Object.assign({curve:s},n),t)(...i)}};VN.props=Object.assign(Object.assign({},q0.props),{defaultMarker:"smooth"});function nA(e,t){this._context=e,this._t=t}nA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function HN(e){return new nA(e,.5)}function WN(e){return new nA(e,0)}function GN(e){return new nA(e,1)}const ZN=(e,t)=>q0(Object.assign({curve:GN},e),t);ZN.props=Object.assign(Object.assign({},q0.props),{defaultMarker:"hv"});const XN=(e,t)=>q0(Object.assign({curve:WN},e),t);XN.props=Object.assign(Object.assign({},q0.props),{defaultMarker:"vh"});const $N=(e,t)=>q0(Object.assign({curve:HN},e),t);$N.props=Object.assign(Object.assign({},q0.props),{defaultMarker:"hvh"});var XK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $K(e,t,n,r,i){const s=Ic(n,t),l=Y0(s),c=l+Math.PI/2,h=[r/2*Math.cos(c),r/2*Math.sin(c)],p=[i/2*Math.cos(c),i/2*Math.sin(c)],v=[i/2*Math.cos(l),i/2*Math.sin(l)],y=[r/2*Math.cos(l),r/2*Math.sin(l)],b=_w(t,h),w=_w(n,p),R=_w(w,v),M=_w(n,v),I=Ic(M,p),N=Ic(n,p),z=Ic(t,h),H=Ic(z,y),X=Ic(t,y),$=Ic(b,y);e.moveTo(...b),e.lineTo(...w),e.arcTo(...R,...M,i/2),e.arcTo(...I,...N,i/2),e.lineTo(...z),e.arcTo(...H,...X,r/2),e.arcTo(...$,...b,r/2),e.closePath()}const YN=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{seriesSize:l,color:c}=i,{color:h}=s,p=XK(s,["color"]),v=K0();for(let y=0;y<r.length-1;y++){const b=r[y],w=r[y+1],R=l[y],M=l[y+1];[...b,...w].every(cl)&&$K(v,b,w,R,M)}return Aa(n.createElement("path",{})).call(ia,p).style("fill",c||h).style("d",v.toString()).call(ia,e).node()}};YN.props=Object.assign(Object.assign({},q0.props),{defaultMarker:"line"});const KN=()=>(e,t)=>{const{style:n={},encode:r}=t,{series:i}=r,{gradient:s}=n;return!s||i?[e,t]:[e,oi({},t,{encode:{series:Kw(Ny(e,void 0))}})]};KN.props={};const ZM=()=>(e,t)=>{const{encode:n}=t,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[e,t];const[s,l]=sl(n,"color");return[e,oi({},t,{encode:{series:zu(s,l)}})]};ZM.props={};const qN={line:MN,smooth:VN,hv:ZN,vh:XN,hvh:$N,trail:YN},YK=(e,t,n,r)=>{var i,s;const{series:l,x:c,y:h}=n,{x:p,y:v}=t;if(c===void 0||h===void 0)throw new Error("Missing encode for x or y channel.");const y=l?Array.from(ou(e,I=>l[I]).values()):[e],b=y.map(I=>I[0]).filter(I=>I!==void 0),w=(((i=p==null?void 0:p.getBandWidth)===null||i===void 0?void 0:i.call(p))||0)/2,R=(((s=v==null?void 0:v.getBandWidth)===null||s===void 0?void 0:s.call(v))||0)/2,M=Array.from(y,I=>I.map(N=>r.map([+c[N]+w,+h[N]+R])));return[b,M,y]},KK=(e,t,n,r)=>{const i=Object.entries(n).filter(([l])=>l.startsWith("position")).map(([,l])=>l);if(i.length===0)throw new Error("Missing encode for position channel.");const s=Array.from(e,l=>{const c=i.map(v=>+v[l]),h=r.map(c),p=[];for(let v=0;v<h.length;v+=2)p.push([h[v],h[v+1]]);return p});return[e,s]},QN=()=>(e,t,n,r)=>(Bs(r)?KK:YK)(e,t,n,r);QN.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:qN,channels:[...np({shapes:Object.keys(qN)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...$c(),{type:KN},{type:ZM}],postInference:[...pf(),...Xb(),...VK()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var qK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const XM=(e,t,n)=>[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]];XM.style=["fill"];const JN=XM.bind(void 0);JN.style=["stroke","lineWidth"];const rA=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]];rA.style=["fill"];const eB=rA.bind(void 0);eB.style=["fill"];const tB=rA.bind(void 0);tB.style=["stroke","lineWidth"];const $M=(e,t,n)=>{const r=n*.618;return[["M",e-r,t],["L",e,t-n],["L",e+r,t],["L",e,t+n],["Z"]]};$M.style=["fill"];const nB=$M.bind(void 0);nB.style=["stroke","lineWidth"];const YM=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]};YM.style=["fill"];const rB=YM.bind(void 0);rB.style=["stroke","lineWidth"];const KM=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]};KM.style=["fill"];const iB=KM.bind(void 0);iB.style=["stroke","lineWidth"];const qM=(e,t,n)=>{const r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]};qM.style=["fill"];const oB=qM.bind(void 0);oB.style=["stroke","lineWidth"];const QM=(e,t,n)=>{const r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]};QM.style=["fill"];const aB=QM.bind(void 0);aB.style=["stroke","lineWidth"];const sB=(e,t,n)=>[["M",e,t+n],["L",e,t-n]];sB.style=["stroke","lineWidth"];const lB=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]];lB.style=["stroke","lineWidth"];const uB=(e,t,n)=>[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]];uB.style=["stroke","lineWidth"];const cB=(e,t,n)=>[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]];cB.style=["stroke","lineWidth"];const fB=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];fB.style=["stroke","lineWidth"];const JM=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];JM.style=["stroke","lineWidth"];const hB=JM.bind(void 0);hB.style=["stroke","lineWidth"];const dB=(e,t,n)=>[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]];dB.style=["stroke","lineWidth"];const pB=(e,t,n)=>[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]];pB.style=["stroke","lineWidth"];const vB=(e,t,n)=>[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]];vB.style=["stroke","lineWidth"];const mB=(e,t,n)=>[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]];mB.style=["stroke","lineWidth"];const gB=(e,t,n)=>[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]];gB.style=["stroke","lineWidth"];const Yb=new Map([["bowtie",QM],["cross",lB],["dash",hB],["diamond",$M],["dot",JM],["hexagon",qM],["hollowBowtie",aB],["hollowDiamond",nB],["hollowHexagon",oB],["hollowPoint",JN],["hollowSquare",tB],["hollowTriangle",rB],["hollowTriangleDown",iB],["hv",pB],["hvh",mB],["hyphen",fB],["line",sB],["plus",cB],["point",XM],["rect",eB],["smooth",dB],["square",rA],["tick",uB],["triangleDown",KM],["triangle",YM],["vh",vB],["vhv",gB]]);function QK(e,t){var{d:n,fill:r,lineWidth:i,path:s,stroke:l,color:c}=t,h=qK(t,["d","fill","lineWidth","path","stroke","color"]);const p=Yb.get(e)||Yb.get("point");return(...v)=>new fd({style:Object.assign(Object.assign({},h),{d:p(...v),stroke:p.style.includes("stroke")?c||l:"",fill:p.style.includes("fill")?c||r:"",lineWidth:p.style.includes("lineWidth")?i||i||2:0})})}function ape(e,t){Yb.set(e,t)}function spe(e){Yb.delete(e)}var JK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yB(e,t,n,r){if(t.length===1)return;const{size:i}=n;if(e==="fixed")return i;if(e==="normal"||yl(r)){const[[s,l],[c,h]]=t,p=Math.abs((c-s)/2),v=Math.abs((h-l)/2);return Math.max(0,(p+v)/2)}return i}const $s=(e,t)=>{const{colorAttribute:n,symbol:r,mode:i="auto"}=e,s=JK(e,["colorAttribute","symbol","mode"]),l=Yb.get(r)||Yb.get("point"),{coordinate:c,document:h}=t;return(p,v,y)=>{const{lineWidth:b,color:w}=y,R=s.stroke?b||1:b,{color:M=w,transform:I,opacity:N}=v,[z,H]=GR(p),$=yB(i,p,v,c)||s.r||y.r;return Aa(h.createElement("path",{})).call(ia,y).style("fill","transparent").style("d",l(z,H,$)).style("lineWidth",R).style("transform",I).style("transformOrigin",`${z-$} ${H-$}`).style("stroke",M).style(WR(e),N).style(n,M).call(ia,s).node()}};$s.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const _B=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"point"},e),t);_B.props=Object.assign({defaultMarker:"hollowPoint"},$s.props);const bB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"diamond"},e),t);bB.props=Object.assign({defaultMarker:"hollowDiamond"},$s.props);const xB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},e),t);xB.props=Object.assign({defaultMarker:"hollowHexagon"},$s.props);const EB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"square"},e),t);EB.props=Object.assign({defaultMarker:"hollowSquare"},$s.props);const SB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},e),t);SB.props=Object.assign({defaultMarker:"hollowTriangleDown"},$s.props);const TB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"triangle"},e),t);TB.props=Object.assign({defaultMarker:"hollowTriangle"},$s.props);const wB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},e),t);wB.props=Object.assign({defaultMarker:"hollowBowtie"},$s.props);var eq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const AB=(e,t)=>{const{colorAttribute:n,mode:r="auto"}=e,i=eq(e,["colorAttribute","mode"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{lineWidth:v,color:y}=p,b=i.stroke?v||1:v,{color:w=y,transform:R,opacity:M}=h,[I,N]=GR(c),H=yB(r,c,h,s)||i.r||p.r;return Aa(l.createElement("circle",{})).call(ia,p).style("fill","transparent").style("cx",I).style("cy",N).style("r",H).style("lineWidth",b).style("transform",R).style("transformOrigin",`${I} ${N}`).style("stroke",w).style(WR(e),M).style(n,w).call(ia,i).node()}},eP=(e,t)=>AB(Object.assign({colorAttribute:"fill"},e),t);eP.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const OB=(e,t)=>AB(Object.assign({colorAttribute:"stroke"},e),t);OB.props=Object.assign({defaultMarker:"hollowPoint"},eP.props);const CB=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"point"},e),t);CB.props=Object.assign({defaultMarker:"point"},$s.props);const RB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"plus"},e),t);RB.props=Object.assign({defaultMarker:"plus"},$s.props);const MB=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"diamond"},e),t);MB.props=Object.assign({defaultMarker:"diamond"},$s.props);const PB=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"square"},e),t);PB.props=Object.assign({defaultMarker:"square"},$s.props);const IB=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"triangle"},e),t);IB.props=Object.assign({defaultMarker:"triangle"},$s.props);const LB=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"hexagon"},e),t);LB.props=Object.assign({defaultMarker:"hexagon"},$s.props);const DB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"cross"},e),t);DB.props=Object.assign({defaultMarker:"cross"},$s.props);const NB=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"bowtie"},e),t);NB.props=Object.assign({defaultMarker:"bowtie"},$s.props);const BB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},e),t);BB.props=Object.assign({defaultMarker:"hyphen"},$s.props);const FB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"line"},e),t);FB.props=Object.assign({defaultMarker:"line"},$s.props);const kB=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"tick"},e),t);kB.props=Object.assign({defaultMarker:"tick"},$s.props);const zB=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},e),t);zB.props=Object.assign({defaultMarker:"triangleDown"},$s.props);const iA=()=>(e,t)=>{const{encode:n}=t,{y:r}=n;return r!==void 0?[e,t]:[e,oi({},t,{encode:{y:Yw(Ny(e,0))},scale:{y:{guide:null}}})]};iA.props={};const UB=()=>(e,t)=>{const{encode:n}=t,{size:r}=n;return r!==void 0?[e,t]:[e,oi({},t,{encode:{size:Kw(Ny(e,3))}})]};UB.props={};const jB={hollow:_B,hollowDiamond:bB,hollowHexagon:xB,hollowSquare:EB,hollowTriangleDown:SB,hollowTriangle:TB,hollowBowtie:wB,hollowCircle:OB,point:CB,plus:RB,diamond:MB,square:PB,triangle:IB,hexagon:LB,cross:DB,bowtie:NB,hyphen:BB,line:FB,tick:kB,triangleDown:zB,circle:eP},VB=e=>(t,n,r,i)=>{const{x:s,y:l,x1:c,y1:h,size:p,dx:v,dy:y}=r,[b,w]=i.getSize(),R=f1(n,r,e),M=N=>{const z=+((v==null?void 0:v[N])||0),H=+((y==null?void 0:y[N])||0),X=c?(+s[N]+ +c[N])/2:+s[N],$=h?(+l[N]+ +h[N])/2:+l[N],te=X+z,fe=$+H;return[te,fe]},I=p?Array.from(t,N=>{const[z,H]=M(N),X=+p[N],$=X/b,te=X/w,fe=[z-$,H-te],ye=[z+$,H+te];return[i.map(R(fe,N)),i.map(R(ye,N))]}):Array.from(t,N=>[i.map(R(M(N),N))]);return[t,I]};VB.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:jB,channels:[...np({shapes:Object.keys(jB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...$c(),{type:u1},{type:iA}],postInference:[...pf(),{type:UB},...By()]};const HB=(e,t)=>{const{coordinate:n}=t;return(r,i,s)=>{const{color:l,text:c="",fontSize:h,rotate:p=0,transform:v=""}=i,y={text:String(c),stroke:l,fill:l,fontSize:h},[[b,w]]=r;return Aa(new KL).style("x",b).style("y",w).call(ia,s).style("transform",`${v}rotate(${+p})`).style("coordCenter",n.getCenter()).call(ia,y).call(ia,e).node()}};HB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var tP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function tq(e){const t=e/Math.sqrt(2),n=e*Math.sqrt(2),[r,i]=[-t,t-n],[s,l]=[0,0],[c,h]=[t,t-n];return[["M",r,i],["A",e,e,0,1,1,c,h],["L",s,l],["Z"]]}function nq(e){const{min:t,max:n}=e.getLocalBounds();return[(t[0]+n[0])*.5,(t[1]+n[1])*.5]}const rq=Mb(e=>{const t=e.attributes,{class:n,x:r,y:i,transform:s}=t,l=tP(t,["class","x","y","transform"]),c=go(l,"marker"),{size:h=24}=c,p=()=>tq(h/2),v=Aa(e).maybeAppend("marker",()=>new kl({})).call(w=>w.node().update(Object.assign({symbol:p},c))).node(),[y,b]=nq(v);Aa(e).maybeAppend("text","text").style("x",y).style("y",b).call(ia,l)}),WB=(e,t)=>{const n=tP(e,[]);return(r,i,s)=>{const{color:l}=s,c=tP(s,["color"]),{color:h=l,text:p=""}=i,v={text:String(p),stroke:h,fill:h},[[y,b]]=r;return Aa(new rq).call(ia,c).style("transform",`translate(${y},${b})`).call(ia,v).call(ia,n).node()}};WB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const GB=(e,t)=>{const{coordinate:n}=t;return(r,i,s)=>{const{color:l,text:c="",fontSize:h,rotate:p=0,transform:v=""}=i,y={text:String(c),stroke:l,fill:l,fontSize:h,textAlign:"center",textBaseline:"middle"},[[b,w]]=r;return Aa(new hf).style("x",b).style("y",w).call(ia,s).style("transformOrigin","center center").style("transform",`${v}rotate(${p}deg)`).style("coordCenter",n.getCenter()).call(ia,y).call(ia,e).node()}};GB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const oA=()=>(e,t)=>{const{data:n}=t;if(!Array.isArray(n)||n.some(tE))return[e,t];const r=Array.isArray(n[0])?n:[n],i=r.map(l=>l[0]),s=r.map(l=>l[1]);return[e,oi({},t,{encode:{x:zu(i),y:zu(s)}})]};oA.props={};var ZB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const aA=()=>(e,t)=>{const{data:n,style:r={}}=t,i=ZB(t,["data","style"]),{x:s,y:l}=r,c=ZB(r,["x","y"]);if(s==null||l==null)return[e,t];const h=s||0,p=l||0;return[[0],oi({},i,{data:[0],cartesian:!0,encode:{x:zu([h]),y:zu([p])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:c})]};aA.props={};const XB={text:HB,badge:WB,tag:GB},$B=e=>{const{cartesian:t=!1}=e;return t?kM:(n,r,i,s)=>{const{x:l,y:c}=i,h=f1(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};$B.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:XB,channels:[...np({shapes:Object.keys(XB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...$c(),{type:oA},{type:aA}],postInference:[...pf(),...By()]};const nP=()=>(e,t)=>[e,oi({scale:{x:{padding:0},y:{padding:0}}},t)];nP.props={};const YB={cell:c1,hollow:qw},KB=()=>(e,t,n,r)=>{const{x:i,y:s}=n,l=t.x,c=t.y,h=Array.from(e,p=>{const v=l.getBandWidth(l.invert(+i[p])),y=c.getBandWidth(c.invert(+s[p])),b=+i[p],w=+s[p],R=[b,w],M=[b+v,w],I=[b+v,w+y],N=[b,w+y];return[R,M,I,N].map(z=>r.map(z))});return[e,h]};KB.props={defaultShape:"cell",defaultLabelShape:"label",shape:YB,composite:!1,channels:[...np({shapes:Object.keys(YB)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...$c(),{type:u1},{type:iA},{type:nP}],postInference:[...pf(),...By()]};function rP(e,t,n){var r=null,i=Xu(!0),s=null,l=z2,c=null,h=$R(p);e=typeof e=="function"?e:e===void 0?$L:Xu(+e),t=typeof t=="function"?t:Xu(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?YL:Xu(+n);function p(y){var b,w,R,M=(y=GL(y)).length,I,N=!1,z,H=new Array(M),X=new Array(M);for(s==null&&(c=l(z=h())),b=0;b<=M;++b){if(!(b<M&&i(I=y[b],b,y))===N)if(N=!N)w=b,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),R=b-1;R>=w;--R)c.point(H[R],X[R]);c.lineEnd(),c.areaEnd()}N&&(H[b]=+e(I,b,y),X[b]=+t(I,b,y),c.point(r?+r(I,b,y):H[b],n?+n(I,b,y):X[b]))}if(z)return c=null,z+""||null}function v(){return Ry().defined(i).curve(l).context(s)}return p.x=function(y){return arguments.length?(e=typeof y=="function"?y:Xu(+y),r=null,p):e},p.x0=function(y){return arguments.length?(e=typeof y=="function"?y:Xu(+y),p):e},p.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:Xu(+y),p):r},p.y=function(y){return arguments.length?(t=typeof y=="function"?y:Xu(+y),n=null,p):t},p.y0=function(y){return arguments.length?(t=typeof y=="function"?y:Xu(+y),p):t},p.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Xu(+y),p):n},p.lineX0=p.lineY0=function(){return v().x(e).y(t)},p.lineY1=function(){return v().x(e).y(n)},p.lineX1=function(){return v().x(r).y(t)},p.defined=function(y){return arguments.length?(i=typeof y=="function"?y:Xu(!!y),p):i},p.curve=function(y){return arguments.length?(l=y,s!=null&&(c=l(s)),p):l},p.context=function(y){return arguments.length?(y==null?s=c=null:c=l(s=y),p):s},p}function iq(){var e=rP().curve(ON),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,s=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return iE(n())},delete e.lineX0,e.lineEndAngle=function(){return iE(r())},delete e.lineX1,e.lineInnerRadius=function(){return iE(i())},delete e.lineY0,e.lineOuterRadius=function(){return iE(s())},delete e.lineY1,e.curve=function(l){return arguments.length?t(jM(l)):t()._curve},e}var oq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function aq(e,t){const n=[],r=[],i=[];let s=!1,l=null;const c=e.length/2;for(let h=0;h<c;h++){const p=e[h],v=e[h+c];if([...p,...v].some(y=>!t(y)))s=!0;else{if(n.push(p),r.push(v),s&&l){s=!1;const[y,b]=l;i.push([y,p,b,v])}l=[p,v]}}return[n.concat(r),i]}const qB=Mb(e=>{const{areaPath:t,connectPath:n,areaStyle:r,connectStyle:i}=e.attributes,s=e.ownerDocument;Aa(e).maybeAppend("connect-path",()=>s.createElement("path",{})).style("d",n).call(ia,i),Aa(e).maybeAppend("area-path",()=>s.createElement("path",{})).style("d",t).call(ia,r)}),zv=(e,t)=>{const{curve:n,gradient:r=!1,defined:i=p=>!Number.isNaN(p)&&p!==void 0&&p!==null,connect:s=!1}=e,l=oq(e,["curve","gradient","defined","connect"]),{coordinate:c,document:h}=t;return(p,v,y)=>{const{color:b}=y,{color:w=b,seriesColor:R,seriesX:M,seriesY:I}=v,N=wu(c),z=HL(c,v),H=r&&R?VL(R,M,I,r,void 0,N):w,X=Object.assign(Object.assign(Object.assign(Object.assign({},y),{stroke:H,fill:H}),z&&{transform:z}),l),[$,te]=aq(p,i),fe=go(X,"connect"),ye=!!te.length,Le=Ge=>Aa(h.createElement("path",{})).style("d",Ge||"").call(ia,X).node();if(au(c)){const Ge=Qe=>{const gt=c.getCenter(),qe=Qe.slice(0,Qe.length/2),lt=Qe.slice(Qe.length/2);return iq().angle((ft,pt)=>Rb(Ic(qe[pt],gt))).outerRadius((ft,pt)=>Fu(qe[pt],gt)).innerRadius((ft,pt)=>Fu(lt[pt],gt)).defined((ft,pt)=>[...qe[pt],...lt[pt]].every(i)).curve(n)(lt)};return!ye||s&&!Object.keys(fe).length?Le(Ge($)):ye&&!s?Le(Ge(p)):Aa(new qB).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},fe),l)).style("areaPath",Ge(p)).style("connectPath",te.map(Ge).join("")).node()}else{const Ge=Qe=>{const gt=Qe.slice(0,Qe.length/2),qe=Qe.slice(Qe.length/2);return N?rP().y((lt,ft)=>gt[ft][1]).x1((lt,ft)=>gt[ft][0]).x0((lt,ft)=>qe[ft][0]).defined((lt,ft)=>[...gt[ft],...qe[ft]].every(i)).curve(n)(gt):rP().x((lt,ft)=>gt[ft][0]).y1((lt,ft)=>gt[ft][1]).y0((lt,ft)=>qe[ft][1]).defined((lt,ft)=>[...gt[ft],...qe[ft]].every(i)).curve(n)(gt)};return!ye||s&&!Object.keys(fe).length?Le(Ge($)):ye&&!s?Le(Ge(p)):Aa(new qB).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},fe),l)).style("areaPath",Ge(p)).style("connectPath",te.map(Ge).join("")).node()}}};zv.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const QB=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=au(n)?NM:z2;return zv(Object.assign({curve:i},e),t)(...r)}};QB.props=Object.assign(Object.assign({},zv.props),{defaultMarker:"square"});var sq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const JB=(e,t)=>{const n=sq(e,[]),{coordinate:r}=t;return(...i)=>{const s=au(r)?DN:wu(r)?jN:UN;return zv(Object.assign({curve:s},n),t)(...i)}};JB.props=Object.assign(Object.assign({},zv.props),{defaultMarker:"smooth"});const eF=(e,t)=>(...n)=>zv(Object.assign({curve:HN},e),t)(...n);eF.props=Object.assign(Object.assign({},zv.props),{defaultMarker:"hvh"});const tF=(e,t)=>(...n)=>zv(Object.assign({curve:WN},e),t)(...n);tF.props=Object.assign(Object.assign({},zv.props),{defaultMarker:"vh"});const nF=(e,t)=>(...n)=>zv(Object.assign({curve:GN},e),t)(...n);nF.props=Object.assign(Object.assign({},zv.props),{defaultMarker:"hv"});const rF={area:QB,smooth:JB,hvh:eF,vh:tF,hv:nF},iF=()=>(e,t,n,r)=>{var i,s;const{x:l,y:c,y1:h,series:p}=n,{x:v,y}=t,b=p?Array.from(ou(e,N=>p[N]).values()):[e],w=b.map(N=>N[0]).filter(N=>N!==void 0),R=(((i=v==null?void 0:v.getBandWidth)===null||i===void 0?void 0:i.call(v))||0)/2,M=(((s=y==null?void 0:y.getBandWidth)===null||s===void 0?void 0:s.call(y))||0)/2,I=Array.from(b,N=>{const z=N.length,H=new Array(z*2);for(let X=0;X<N.length;X++){const $=N[X];H[X]=r.map([+l[$]+R,+c[$]+M]),H[z+X]=r.map([+l[$]+R,+h[$]+M])}return H});return[w,I,b]};iF.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:rF,channels:[...np({shapes:Object.keys(rF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...$c(),{type:ZM},{type:nE},{type:nP}],postInference:[...pf(),...Xb()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const oF=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;if(r)return[e,t];const[i]=sl(n,"y");return[e,oi({},t,{encode:{y1:zu([...i])}})]};oF.props={};const aF=()=>(e,t)=>{const{encode:n}=t,{x1:r}=n;if(r)return[e,t];const[i]=sl(n,"x");return[e,oi({},t,{encode:{x1:zu([...i])}})]};aF.props={};var sF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const iP=(e,t)=>{const{arrow:n=!0,arrowSize:r="40%"}=e,i=sF(e,["arrow","arrowSize"]),{document:s}=t;return(l,c,h)=>{const{defaultColor:p}=h,v=sF(h,["defaultColor"]),{color:y=p,transform:b}=c,[w,R]=l,M=K0();if(M.moveTo(...w),M.lineTo(...R),n){const[I,N]=KW(w,R,{arrowSize:r});M.moveTo(...I),M.lineTo(...R),M.lineTo(...N)}return Aa(s.createElement("path",{})).call(ia,v).style("d",M.toString()).style("stroke",y).style("transform",b).call(ia,i).node()}};iP.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const lF=(e,t)=>{const{arrow:n=!1}=e;return(...r)=>iP(Object.assign(Object.assign({},e),{arrow:n}),t)(...r)};lF.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var uF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const cF=(e,t)=>{const n=uF(e,[]),{coordinate:r,document:i}=t;return(s,l,c)=>{const{color:h}=c,p=uF(c,["color"]),{color:v=h,transform:y}=l,[b,w]=s,R=K0();if(R.moveTo(b[0],b[1]),au(r)){const M=r.getCenter();R.quadraticCurveTo(M[0],M[1],w[0],w[1])}else{const M=jL(b,w),I=Fu(b,w)/2;k2(R,b,w,M,I)}return Aa(i.createElement("path",{})).call(ia,p).style("d",R.toString()).style("stroke",v).style("transform",y).call(ia,n).node()}};cF.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var fF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const hF=(e,t)=>{const n=fF(e,[]),{document:r}=t;return(i,s,l)=>{const{color:c}=l,h=fF(l,["color"]),{color:p=c,transform:v}=s,[y,b]=i,w=K0();return w.moveTo(y[0],y[1]),w.bezierCurveTo(y[0]/2+b[0]/2,y[1],y[0]/2+b[0]/2,b[1],b[0],b[1]),Aa(r.createElement("path",{})).call(ia,h).style("d",w.toString()).style("stroke",p).style("transform",v).call(ia,n).node()}};hF.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var dF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function lq(e,t,n,r){const i=K0();if(au(n)){const s=n.getCenter(),l=Fu(e,s),h=(Fu(t,s)-l)*r+l;return i.moveTo(e[0],e[1]),k2(i,e,t,s,h),i.lineTo(t[0],t[1]),i}return wu(n)?(i.moveTo(e[0],e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,t[1]),i.lineTo(t[0],t[1]),i):(i.moveTo(e[0],e[1]),i.lineTo(e[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],t[1]),i)}const pF=(e,t)=>{const{cornerRatio:n=1/3}=e,r=dF(e,["cornerRatio"]),{coordinate:i,document:s}=t;return(l,c,h)=>{const{defaultColor:p}=h,v=dF(h,["defaultColor"]),{color:y=p,transform:b}=c,[w,R]=l,M=lq(w,R,i,n);return Aa(s.createElement("path",{})).call(ia,v).style("d",M.toString()).style("stroke",y).style("transform",b).call(ia,r).node()}};pF.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const vF={link:lF,arc:cF,smooth:hF,vhv:pF},oP=e=>(t,n,r,i)=>{const{x:s,y:l,x1:c=s,y1:h=l}=r,p=f1(n,r,e),v=t.map(y=>[i.map(p([+s[y],+l[y]],y)),i.map(p([+c[y],+h[y]],y))]);return[t,v]};oP.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:vF,channels:[...np({shapes:Object.keys(vF)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c(),{type:oF},{type:aF}],postInference:[...pf(),...By()]};var uq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const mF=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c}=l,h=uq(l,["color"]),{color:p=c,src:v="",size:y=32,transform:b=""}=s;let{width:w=y,height:R=y}=e;const[[M,I]]=i,[N,z]=n.getSize();w=typeof w=="string"?eA(w)*N:w,R=typeof R=="string"?eA(R)*z:R;const H=M-Number(w)/2,X=I-Number(R)/2;return Aa(r.createElement("image",{})).call(ia,h).style("x",H).style("y",X).style("src",v).style("stroke",p).style("transform",b).call(ia,e).style("width",w).style("height",R).node()}};mF.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const gF={image:mF},yF=e=>{const{cartesian:t}=e;return t?kM:(n,r,i,s)=>{const{x:l,y:c}=i,h=f1(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};yF.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:gF,channels:[...np({shapes:Object.keys(gF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...$c(),{type:oA},{type:aA}],postInference:[...pf(),...By()]};var cq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fq(e,t){const n=K0();if(au(t)){const r=t.getCenter(),i=[...e,e[0]],s=i.map(l=>Fu(l,r));return i.forEach((l,c)=>{if(c===0){n.moveTo(l[0],l[1]);return}const h=s[c],p=e[c-1],v=s[c-1];v!==void 0&&Math.abs(h-v)<1e-10?k2(n,p,l,r,h):n.lineTo(l[0],l[1])}),n.closePath(),n}return YW(n,e)}const _F=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c}=l,h=cq(l,["color"]),{color:p=c,transform:v}=s,y=fq(i,n);return Aa(r.createElement("path",{})).call(ia,h).style("d",y.toString()).style("stroke",p).style("fill",p).style("transform",v).call(ia,e).node()}};_F.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var bF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function hq(e,t){const[n,r,i,s]=e,l=K0();if(au(t)){const c=t.getCenter(),h=Fu(c,n);return l.moveTo(n[0],n[1]),l.quadraticCurveTo(c[0],c[1],i[0],i[1]),k2(l,i,s,c,h),l.quadraticCurveTo(c[0],c[1],r[0],r[1]),k2(l,r,n,c,h),l.closePath(),l}return l.moveTo(n[0],n[1]),l.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),l.lineTo(s[0],s[1]),l.bezierCurveTo(s[0]/2+r[0]/2,s[1],s[0]/2+r[0]/2,r[1],r[0],r[1]),l.lineTo(n[0],n[1]),l.closePath(),l}const xF=(e,t)=>{const n=bF(e,[]),{coordinate:r,document:i}=t;return(s,l,c)=>{const{color:h}=c,p=bF(c,["color"]),{color:v=h,transform:y}=l,b=hq(s,r);return Aa(i.createElement("path",{})).call(ia,p).style("d",b.toString()).style("fill",v||h).style("stroke",v||h).style("transform",y).call(ia,n).node()}};xF.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const EF={polygon:_F,ribbon:xF},SF=()=>(e,t,n,r)=>{const i=Object.entries(n).filter(([c])=>c.startsWith("x")).map(([,c])=>c),s=Object.entries(n).filter(([c])=>c.startsWith("y")).map(([,c])=>c),l=e.map(c=>{const h=[];for(let p=0;p<i.length;p++){const v=i[p][c];if(v===void 0)break;const y=s[p][c];h.push(r.map([+v,+y]))}return h});return[e,l]};SF.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:EF,channels:[...np({shapes:Object.keys(EF)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c()],postInference:[...pf(),...By()]};var dq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function pq(e,t){const n=K0();if(!au(t))n.moveTo(...e[0]),n.lineTo(...e[1]),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.lineTo(...e[5]),n.lineTo(...e[6]),n.lineTo(...e[7]),n.closePath(),n.moveTo(...e[8]),n.lineTo(...e[9]),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.lineTo(...e[13]);else{const r=t.getCenter(),[i,s]=r,l=Y0(Ic(e[0],r)),c=Y0(Ic(e[1],r)),h=Fu(r,e[2]),p=Fu(r,e[3]),v=Fu(r,e[8]),y=Fu(r,e[10]),b=Fu(r,e[11]);n.moveTo(...e[0]),n.arc(i,s,h,l,c),n.arc(i,s,h,c,l,!0),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.arc(i,s,p,l,c),n.lineTo(...e[6]),n.arc(i,s,y,c,l,!0),n.closePath(),n.moveTo(...e[8]),n.arc(i,s,v,l,c),n.arc(i,s,v,c,l,!0),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.arc(i,s,b,l,c),n.arc(i,s,b,c,l,!0)}return n}const TF=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c,transform:h}=s,{color:p,fill:v=p,stroke:y=p}=l,b=dq(l,["color","fill","stroke"]),w=pq(i,n);return Aa(r.createElement("path",{})).call(ia,b).style("d",w.toString()).style("stroke",y).style("fill",c||v).style("transform",h).call(ia,e).node()}};TF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var vq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function mq(e,t,n=4){const r=K0();if(!au(t))return r.moveTo(...e[2]),r.lineTo(...e[3]),r.lineTo(e[3][0]-n,e[3][1]),r.lineTo(e[10][0]-n,e[10][1]),r.lineTo(e[10][0]+n,e[10][1]),r.lineTo(e[3][0]+n,e[3][1]),r.lineTo(...e[3]),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]),r.moveTo(e[3][0]+n/2,e[8][1]),r.arc(e[3][0],e[8][1],n/2,0,Math.PI*2),r.closePath(),r;const i=t.getCenter(),[s,l]=i,c=Fu(i,e[3]),h=Fu(i,e[8]),p=Fu(i,e[10]),v=Y0(Ic(e[2],i)),y=Math.asin(n/h),b=v-y,w=v+y;r.moveTo(...e[2]),r.lineTo(...e[3]),r.moveTo(Math.cos(b)*c+s,Math.sin(b)*c+l),r.arc(s,l,c,b,w),r.lineTo(Math.cos(w)*p+s,Math.sin(w)*p+l),r.arc(s,l,p,w,b,!0),r.lineTo(Math.cos(b)*c+s,Math.sin(b)*c+l),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]);const R=(b+w)/2;return r.moveTo(Math.cos(R)*(h+n/2)+s,Math.sin(R)*(h+n/2)+l),r.arc(Math.cos(R)*h+s,Math.sin(R)*h+l,n/2,R,Math.PI*2+R),r.closePath(),r}const wF=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c,transform:h}=s,p=4,{color:v,fill:y=v,stroke:b=v}=l,w=vq(l,["color","fill","stroke"]),R=mq(i,n,p);return Aa(r.createElement("path",{})).call(ia,w).style("d",R.toString()).style("stroke",b).style("fill",c||y).style("transform",h).call(ia,e).node()}};wF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const AF={box:TF,violin:wF},OF=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,y2:c,y3:h,y4:p,series:v}=n,y=t.x,b=t.series,w=Array.from(e,R=>{const M=y.getBandWidth(y.invert(+i[R])),I=b?b.getBandWidth(b.invert(+(v==null?void 0:v[R]))):1,N=M*I,z=(+(v==null?void 0:v[R])||0)*M,H=+i[R]+z+N/2,[X,$,te,fe,ye]=[+s[R],+l[R],+c[R],+h[R],+p[R]];return[[H-N/2,ye],[H+N/2,ye],[H,ye],[H,fe],[H-N/2,fe],[H+N/2,fe],[H+N/2,$],[H-N/2,$],[H-N/2,te],[H+N/2,te],[H,$],[H,X],[H-N/2,X],[H+N/2,X]].map(Ge=>r.map(Ge))});return[e,w]};OF.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:AF,channels:[...np({shapes:Object.keys(AF)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...$c(),{type:u1}],postInference:[...pf(),...Xb()],interaction:{shareTooltip:!0}};const CF={vector:iP},RF=()=>(e,t,n,r)=>{const{x:i,y:s,size:l,rotate:c}=n,[h,p]=r.getSize(),v=e.map(y=>{const b=+c[y]/180*Math.PI,w=+l[y],R=w/h,M=w/p,I=R*Math.cos(b),N=-M*Math.sin(b);return[r.map([+i[y]-I/2,+s[y]-N/2]),r.map([+i[y]+I/2,+s[y]+N/2])]});return[e,v]};RF.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:CF,channels:[...np({shapes:Object.keys(CF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...$c()],postInference:[...pf(),...By()]};var MF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gq(e,t,n){return e.createElement("path",{style:Object.assign({d:`M ${t},${t} L -${t},0 L ${t},-${t} L 0,0 Z`,transformOrigin:"center"},n)})}function yq(e,t){if(!au(t))return Ry().x(r=>r[0]).y(r=>r[1])(e);const n=t.getCenter();return Aw()({startAngle:0,endAngle:Math.PI*2,outerRadius:Fu(e[0],n),innerRadius:Fu(e[1],n)})}function _q(e,t){if(!au(e))return t;const[n,r]=e.getCenter();return`translate(${n}, ${r}) ${t||""}`}const aP=(e,t)=>{const{arrow:n,arrowSize:r=4}=e,i=MF(e,["arrow","arrowSize"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{color:v,lineWidth:y}=p,b=MF(p,["color","lineWidth"]),{color:w=v,size:R=y}=h,M=n?gq(l,r,Object.assign({fill:i.stroke||w,stroke:i.stroke||w},go(i,"arrow"))):null,I=yq(c,s),N=_q(s,h.transform);return Aa(l.createElement("path",{})).call(ia,b).style("d",I).style("stroke",w).style("lineWidth",R).style("transform",N).style("markerEnd",M).call(ia,i).node()}};aP.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const PF=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(tE)?[e,t]:[e,oi({},t,{encode:{x:zu(n)}})]};PF.props={};const IF={line:aP},LF=e=>(t,n,r,i)=>{const{x:s}=r,l=f1(n,r,oi({style:{bandOffset:0}},e)),c=Array.from(t,h=>{const p=[s[h],1],v=[s[h],0];return[p,v].map(y=>i.map(l(y,h)))});return[t,c]};LF.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:IF,channels:[...$b({shapes:Object.keys(IF)}),{name:"x",required:!0}],preInference:[...$c(),{type:PF}],postInference:[...pf()]};const DF=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(tE)?[e,t]:[e,oi({},t,{encode:{y:zu(n)}})]};DF.props={};const NF={line:aP},BF=e=>(t,n,r,i)=>{const{y:s}=r,l=f1(n,r,oi({style:{bandOffset:0}},e)),c=Array.from(t,h=>{const p=[0,s[h]],v=[1,s[h]];return[p,v].map(y=>i.map(l(y,h)))});return[t,c]};BF.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:NF,channels:[...$b({shapes:Object.keys(NF)}),{name:"y",required:!0}],preInference:[...$c(),{type:DF}],postInference:[...pf()]};var FF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function bq(e,t,n){return[["M",e,t],["L",e+2*n,t-n],["L",e+2*n,t+n],["Z"]]}function xq(e){return Ry().x(t=>t[0]).y(t=>t[1])(e)}function Eq(e,t,n,r,i=0){const[[s,l],[c,h]]=t;if(wu(e)){const b=s+n,w=c+r,R=b+i;return[[b,l],[R,l],[R,h],[w,h]]}const p=l-n,v=h-r,y=p-i;return[[s,p],[s,y],[c,y],[c,v]]}const kF=(e,t)=>{const{offset:n=0,offset1:r=n,offset2:i=n,connectLength1:s,endMarker:l=!0}=e,c=FF(e,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:h}=t;return(p,v,y)=>{const{color:b,connectLength1:w}=y,R=FF(y,["color","connectLength1"]),{color:M,transform:I}=v,N=Eq(h,p,r,i,s!=null?s:w),z=go(Object.assign(Object.assign({},c),y),"endMarker");return Aa(new fd).call(ia,R).style("d",xq(N)).style("stroke",M||b).style("transform",I).style("markerEnd",l?new kl({className:"marker",style:Object.assign(Object.assign({},z),{symbol:bq})}):null).call(ia,c).node()}};kF.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const zF={connector:kF},UF=(...e)=>oP(...e);UF.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:zF,channels:[...$b({shapes:Object.keys(zF)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c()],postInference:[...pf()]};function jF(e,t,n,r){if(t)return()=>[0,1];const{[e]:i,[`${e}1`]:s}=n;return l=>{var c;const h=((c=r.getBandWidth)===null||c===void 0?void 0:c.call(r,r.invert(+s[l])))||0;return[i[l],s[l]+h]}}function sP(e={}){const{extendX:t=!1,extendY:n=!1}=e;return(r,i,s,l)=>{const c=jF("x",t,s,i.x),h=jF("y",n,s,i.y),p=Array.from(r,v=>{const[y,b]=c(v),[w,R]=h(v);return[[y,w],[b,w],[b,R],[y,R]].map(H=>l.map(H))});return[r,p]}}const VF={range:c1},HF=()=>sP();HF.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:VF,channels:[...$b({shapes:Object.keys(VF)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c()],postInference:[...pf()]};const WF=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(tE))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,oi({},t,{encode:{x:zu(r(n,0)),x1:zu(r(n,1))}})]}return[e,t]};WF.props={};const GF={range:c1},ZF=()=>sP({extendY:!0});ZF.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:GF,channels:[...$b({shapes:Object.keys(GF)}),{name:"x",required:!0}],preInference:[...$c(),{type:WF}],postInference:[...pf()]};const XF=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(tE))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,oi({},t,{encode:{y:zu(r(n,0)),y1:zu(r(n,1))}})]}return[e,t]};XF.props={};const $F={range:c1},YF=()=>sP({extendX:!0});YF.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:$F,channels:[...$b({shapes:Object.keys($F)}),{name:"y",required:!0}],preInference:[...$c(),{type:XF}],postInference:[...pf()]};var KF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const lP=(e,t)=>{const{arrow:n,colorAttribute:r}=e,i=KF(e,["arrow","colorAttribute"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{color:v,stroke:y}=p,b=KF(p,["color","stroke"]),{d:w,color:R=v}=h,[M,I]=s.getSize();return Aa(l.createElement("path",{})).call(ia,b).style("d",typeof w=="function"?w({width:M,height:I}):w).style(r,R).call(ia,i).node()}};lP.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const qF=(e,t)=>lP(Object.assign({colorAttribute:"fill"},e),t);qF.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const QF=(e,t)=>lP(Object.assign({fill:"none",colorAttribute:"stroke"},e),t);QF.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const JF={path:qF,hollow:QF},e8=e=>(t,n,r,i)=>[t,t.map(()=>[[0,0]])];e8.props={defaultShape:"path",defaultLabelShape:"label",shape:JF,composite:!1,channels:[...np({shapes:Object.keys(JF)}),{name:"d",scale:"identity"}],preInference:[...$c()],postInference:[...pf()]};var Sq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const t8=(e,t)=>{const{render:n}=e,r=Sq(e,["render"]);return i=>{const[[s,l]]=i;return n(Object.assign(Object.assign({},r),{x:s,y:l}),t)}};t8.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const n8=()=>(e,t)=>{const{style:n={}}=t;return[e,oi({},t,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};n8.props={};const Tq={shape:t8},r8=e=>{const{cartesian:t}=e;return t?kM:(n,r,i,s)=>{const{x:l,y:c}=i,h=f1(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};r8.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:Tq,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c(),{type:oA},{type:aA},{type:n8}]};var wq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const i8=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{transform:l}=i,{color:c}=s,h=wq(s,["color"]),{color:p=c}=i,[v,...y]=r,b=K0();return b.moveTo(...v),y.forEach(([w,R])=>{b.lineTo(w,R)}),b.closePath(),Aa(n.createElement("path",{})).call(ia,h).style("d",b.toString()).style("stroke",p||c).style("fill",p||c).style("fillOpacity",.4).style("transform",l).call(ia,e).node()}};i8.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const o8={density:i8},a8=()=>(e,t,n,r)=>{const{x:i,series:s}=n,l=Object.entries(n).filter(([y])=>y.startsWith("y")).map(([,y])=>y),c=Object.entries(n).filter(([y])=>y.startsWith("size")).map(([,y])=>y);if(i===void 0||l===void 0||c===void 0)throw new Error("Missing encode for x or y or size channel.");const h=t.x,p=t.series,v=Array.from(e,y=>{const b=h.getBandWidth(h.invert(+i[y])),w=p?p.getBandWidth(p.invert(+(s==null?void 0:s[y]))):1,R=b*w,M=(+(s==null?void 0:s[y])||0)*b,I=+i[y]+M+R/2;return[...l.map((z,H)=>[I+ +c[H][y]/e.length,+l[H][y]]),...l.map((z,H)=>[I-+c[H][y]/e.length,+l[H][y]]).reverse()].map(z=>r.map(z))});return[e,v]};a8.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:o8,channels:[...np({shapes:Object.keys(o8)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...$c(),{type:nE},{type:u1}],postInference:[...pf(),...Xb()],interaction:{shareTooltip:!0}};function s8(e){var t,n,r,i=e||1;function s(c,h){++t>i&&(r=n,l(1),++t),n[c]=h}function l(c){t=0,n=Object.create(null),c||(r=Object.create(null))}return l(),{clear:l,has:function(c){return n[c]!==void 0||r[c]!==void 0},get:function(c){var h=n[c];if(h!==void 0)return h;if((h=r[c])!==void 0)return s(c,h),h},set:function(c,h){n[c]!==void 0?n[c]=h:s(c,h)}}}const lpe=s8(3);function Aq(e,t=(...r)=>`${r[0]}`,n=16){const r=s8(n);return(...i)=>{const s=t(...i);let l=r.get(s);return r.has(s)?r.get(s):(l=e(...i),r.set(s,l),l)}}function Oq(e){return typeof e=="string"?e.split(" ").map(t=>{const[n,r]=t.split(":");return[+n,r]}):e}function sA(e,t,n){const r=e?e():document.createElement("canvas");return r.width=t,r.height=n,r}const Cq=Aq((e,t,n)=>{const r=sA(n,e*2,e*2),i=r.getContext("2d"),s=e,l=e;if(t===1)i.beginPath(),i.arc(s,l,e,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const c=i.createRadialGradient(s,l,e*t,s,l,e);c.addColorStop(0,"rgba(0,0,0,1)"),c.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=c,i.fillRect(0,0,2*e,2*e)}return r},e=>`${e}`);function Rq(e,t){const r=sA(t,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return Oq(e).forEach(([s,l])=>{i.addColorStop(s,l)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function Mq(e,t,n,r,i,s){const{blur:l}=i;let c=r.length;for(;c--;){const{x:h,y:p,value:v,radius:y}=r[c],b=Math.min(v,n),w=h-y,R=p-y,M=Cq(y,1-l,s),I=(b-t)/(n-t);e.globalAlpha=Math.max(I,.001),e.drawImage(M,w,R)}return e}function Pq(e,t,n,r,i){const{minOpacity:s,opacity:l,maxOpacity:c,useGradientOpacity:h}=i,p=0,v=0,y=t,b=n,w=e.getImageData(p,v,y,b),R=w.data,M=R.length;for(let I=3;I<M;I+=4){const N=R[I],z=N*4;if(!z)continue;const H=l||Math.max(0,Math.min(c,Math.max(s,N)));R[I-3]=r[z],R[I-2]=r[z+1],R[I-1]=r[z+2],R[I]=h?r[z+3]:H}return w}function Iq(e,t,n,r,i,s,l){const c=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},s);c.minOpacity*=255,c.opacity*=255,c.maxOpacity*=255;const p=sA(l,e,t).getContext("2d"),v=Rq(c.gradient,l);p.clearRect(0,0,e,t),Mq(p,n,r,i,c,l);const y=Pq(p,e,t,v,c),w=sA(l,e,t).getContext("2d");return w.putImageData(y,0,0),w}var Lq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Dq(e,t){return Object.keys(e).reduce((n,r)=>{const i=e[r];return t(i,r)||(n[r]=i),n},{})}const l8=(e,t)=>{const{gradient:n,opacity:r,maxOpacity:i,minOpacity:s,blur:l,useGradientOpacity:c}=e,h=Lq(e,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:p,createCanvas:v,document:y}=t;return(b,w,R)=>{const{transform:M}=w,[I,N]=p.getSize(),z=b.map(fe=>({x:fe[0],y:fe[1],value:fe[2],radius:fe[3]})),H=h0(b,fe=>fe[2]),X=ls(b,fe=>fe[2]),te=I&&N?Iq(I,N,H,X,z,Dq({gradient:n,opacity:r,minOpacity:s,maxOpacity:i,blur:l,useGradientOpacity:c},fe=>fe===void 0),v):{canvas:null};return Aa(y.createElement("image",{})).call(ia,R).style("x",0).style("y",0).style("width",I).style("height",N).style("src",te.canvas).style("transform",M).call(ia,h).node()}};l8.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const u8={heatmap:l8},c8=e=>(t,n,r,i)=>{const{x:s,y:l,size:c,color:h}=r,p=Array.from(t,v=>{const y=c?+c[v]:40;return[...i.map([+s[v],+l[v]]),h[v],y]});return[[0],[p]]};c8.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:u8,channels:[...np({shapes:Object.keys(u8)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...$c(),{type:u1},{type:iA}],postInference:[...pf(),...By()]};var Nq=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Bq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Fq(e,t){const{text:n="text",value:r="value"}=t;return e.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}const kq=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:e=>e.fontFamily}}),uP=(e,t)=>Nq(void 0,void 0,void 0,function*(){const{width:n,height:r}=t,{data:i,encode:s={},scale:l,style:c={},layout:h={}}=e,p=Bq(e,["data","encode","scale","style","layout"]),v=Fq(i,s);return oi({},kq(),Object.assign(Object.assign({data:{value:v,transform:[Object.assign({type:"wordCloud",size:[n,r]},h)]},encode:s,scale:l,style:c},p),{axis:!1}))});uP.props={};const f8=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];f8.props={};const h8=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];h8.props={};const d8=e=>new md(e);d8.props={};const lA=Symbol("defaultUnknown");function p8(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r)}function v8(e){const{value:t,from:n,to:r,mapper:i,notFoundReturn:s}=e;let l=i.get(t);if(l===void 0){if(s!==lA)return s;l=n.push(t)-1,i.set(t,l)}return r[l%r.length]}function m8(e){return e instanceof Date?t=>`${t}`:typeof e=="object"?t=>JSON.stringify(t):t=>t}class uA extends P2{getDefaultOptions(){return{domain:[],range:[],unknown:lA}}constructor(t){super(t)}map(t){return this.domainIndexMap.size===0&&p8(this.domainIndexMap,this.getDomain(),this.domainKey),v8({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return this.rangeIndexMap.size===0&&p8(this.rangeIndexMap,this.getRange(),this.rangeKey),v8({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=m8(n),this.rangeKey=m8(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new uA(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:n}=this.options;return this.sortedDomain=n?[...t].sort(n):t,this.sortedDomain}}const g8=e=>new uA(e);g8.props={};function y8({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):n}function zq({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Uq({map:e,initKey:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function jq(e){return typeof e=="object"?e.valueOf():e}class _8 extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=jq,t!==null)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(y8({map:this.map,initKey:this.initKey},t))}has(t){return super.has(y8({map:this.map,initKey:this.initKey},t))}set(t,n){return super.set(zq({map:this.map,initKey:this.initKey},t),n)}delete(t){return super.delete(Uq({map:this.map,initKey:this.initKey},t))}}function Vq(e){const t=Math.min(...e);return e.map(n=>n/t)}function Hq(e,t){const n=e.length,r=t-n;return r>0?[...e,...new Array(r).fill(1)]:r<0?e.slice(0,t):e}function Wq(e){return Math.round(e*1e12)/1e12}function Gq(e){const{domain:t,range:n,paddingOuter:r,paddingInner:i,flex:s,round:l,align:c}=e,h=t.length,p=Hq(s,h),[v,y]=n,b=y-v,w=2/h*r+1-1/h*i,R=b/w,M=R*i/h,I=R-h*M,N=Vq(p),z=N.reduce((gt,qe)=>gt+qe),H=I/z,X=new _8(t.map((gt,qe)=>{const lt=N[qe]*H;return[gt,l?Math.floor(lt):lt]})),$=new _8(t.map((gt,qe)=>{const ft=N[qe]*H+M;return[gt,l?Math.floor(ft):ft]})),te=Array.from($.values()).reduce((gt,qe)=>gt+qe),ye=(b-(te-te/h*i))*c,Le=v+ye;let Ge=l?Math.round(Le):Le;const Qe=new Array(h);for(let gt=0;gt<h;gt+=1){Qe[gt]=Wq(Ge);const qe=t[gt];Ge+=$.get(qe)}return{valueBandWidth:X,valueStep:$,adjustedRange:Qe}}function Zq(e){var t;const{domain:n}=e,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((t=e.flex)===null||t===void 0)&&t.length))return Gq(e);const{range:s,paddingOuter:l,paddingInner:c,round:h,align:p}=e;let v,y,b=s[0];const R=s[1]-b,M=l*2,I=r-c;v=R/Math.max(1,M+I),h&&(v=Math.floor(v)),b+=(R-v*(r-c))*p,y=v*(1-c),h&&(b=Math.round(b),y=Math.round(y));const N=new Array(r).fill(0).map((z,H)=>b+H*v);return{valueStep:v,valueBandWidth:y,adjustedRange:N}}class Fy extends uA{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:lA,flex:[]}}constructor(t){super(t)}clone(){return new Fy(this.options)}getStep(t){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:t===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:t===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:n}=this.options;return t>0?t:n}getPaddingOuter(){const{padding:t,paddingOuter:n}=this.options;return t>0?t:n}rescale(){super.rescale();const{align:t,domain:n,range:r,round:i,flex:s}=this.options,{adjustedRange:l,valueBandWidth:c,valueStep:h}=Zq({align:t,range:r,round:i,flex:s,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=h,this.valueBandWidth=c,this.adjustedRange=l}}const b8=e=>new Fy(e);b8.props={};class cA extends P2{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:kR}}map(t){return cw(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new cA(this.options)}getTicks(){const{domain:t,tickCount:n,tickMethod:r}=this.options,[i,s]=t;return!(0,Gl.Z)(i)||!(0,Gl.Z)(s)?[]:r(i,s,n)}}const x8=e=>new cA(e);x8.props={};class cP extends Fy{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:lA,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new cP(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const E8=e=>new cP(e);E8.props={};var S8=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,ky="\\d\\d?",zy="\\d\\d",Xq="\\d{3}",$q="\\d{4}",oE="[^\\s]+",T8=/\[([^]*?)\]/gm;function w8(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var A8=function(e){return function(t,n){var r=n[e].map(function(s){return s.toLowerCase()}),i=r.indexOf(t.toLowerCase());return i>-1?i:null}};function h1(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];for(var l in s)e[l]=s[l]}return e}var O8=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],C8=["January","February","March","April","May","June","July","August","September","October","November","December"],Yq=w8(C8,3),Kq=w8(O8,3),R8={dayNamesShort:Kq,dayNames:O8,monthNamesShort:Yq,monthNames:C8,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}},fA=h1({},R8),qq=function(e){return fA=h1(fA,e)},M8=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Pp=function(e,t){for(t===void 0&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},Qq={D:function(e){return String(e.getDate())},DD:function(e){return Pp(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Pp(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Pp(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Pp(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Pp(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Pp(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Pp(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Pp(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Pp(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Pp(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Pp(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Pp(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Pp(Math.floor(Math.abs(t)/60),2)+":"+Pp(Math.abs(t)%60,2)}},P8=function(e){return+e-1},I8=[null,ky],L8=[null,oE],D8=["isPm",oE,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],N8=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?n:-n}return 0}],Jq={D:["day",ky],DD:["day",zy],Do:["day",ky+oE,function(e){return parseInt(e,10)}],M:["month",ky,P8],MM:["month",zy,P8],YY:["year",zy,function(e){var t=new Date,n=+(""+t.getFullYear()).substr(0,2);return+(""+(+e>68?n-1:n)+e)}],h:["hour",ky,void 0,"isPm"],hh:["hour",zy,void 0,"isPm"],H:["hour",ky],HH:["hour",zy],m:["minute",ky],mm:["minute",zy],s:["second",ky],ss:["second",zy],YYYY:["year",$q],S:["millisecond","\\d",function(e){return+e*100}],SS:["millisecond",zy,function(e){return+e*10}],SSS:["millisecond",Xq],d:I8,dd:I8,ddd:L8,dddd:L8,MMM:["month",oE,A8("monthNamesShort")],MMMM:["month",oE,A8("monthNames")],a:D8,A:D8,ZZ:N8,Z:N8},hA={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},eQ=function(e){return h1(hA,e)},B8=function(e,t,n){if(t===void 0&&(t=hA.default),n===void 0&&(n={}),typeof e=="number"&&(e=new Date(e)),Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");t=hA[t]||t;var r=[];t=t.replace(T8,function(s,l){return r.push(l),"@@@"});var i=h1(h1({},fA),n);return t=t.replace(S8,function(s){return Qq[s](e,i)}),t.replace(/@@@/g,function(){return r.shift()})};function tQ(e,t,n){if(n===void 0&&(n={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=hA[t]||t,e.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},s=[],l=[],c=t.replace(T8,function(X,$){return l.push(M8($)),"@@@"}),h={},p={};c=M8(c).replace(S8,function(X){var $=Jq[X],te=$[0],fe=$[1],ye=$[3];if(h[te])throw new Error("Invalid format. "+te+" specified twice in format");return h[te]=!0,ye&&(p[ye]=!0),s.push($),"("+fe+")"}),Object.keys(p).forEach(function(X){if(!h[X])throw new Error("Invalid format. "+X+" is required in specified format")}),c=c.replace(/@@@/g,function(){return l.shift()});var v=e.match(new RegExp(c,"i"));if(!v)return null;for(var y=h1(h1({},fA),n),b=1;b<v.length;b++){var w=s[b-1],R=w[0],M=w[2],I=M?M(v[b],y):+v[b];if(I==null)return null;i[R]=I}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var N;if(i.timezoneOffset==null){N=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var z=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],b=0,H=z.length;b<H;b++)if(h[z[b][0]]&&i[z[b][0]]!==N[z[b][1]]())return null}else if(N=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return N}var upe={format:B8,parse:tQ,defaultI18n:R8,setGlobalDateI18n:qq,setGlobalDateMasks:eQ},cpe=null;const aE=1e3,sE=aE*60,lE=sE*60,d1=lE*24,uE=d1*7,F8=d1*30,k8=d1*365;function bd(e,t,n,r){const i=(p,v)=>{const y=w=>r(w)%v===0;let b=v;for(;b&&!y(p);)n(p,-1),b-=1;return p},s=(p,v)=>{v&&i(p,v),t(p)},l=(p,v)=>{const y=new Date(+p);return s(y,v),y},c=(p,v)=>{const y=new Date(+p-1);return s(y,v),n(y,v),s(y),y};return{ceil:c,floor:l,range:(p,v,y,b)=>{const w=[],R=Math.floor(y),M=b?c(p,y):c(p);for(let I=M;I<v;n(I,R),s(I))w.push(new Date(+I));return w},duration:e}}const nQ=bd(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),rQ=bd(aE,e=>{e.setMilliseconds(0)},(e,t=1)=>{e.setTime(+e+aE*t)},e=>e.getSeconds()),iQ=bd(sE,e=>{e.setSeconds(0,0)},(e,t=1)=>{e.setTime(+e+sE*t)},e=>e.getMinutes()),oQ=bd(lE,e=>{e.setMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+lE*t)},e=>e.getHours()),aQ=bd(d1,e=>{e.setHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+d1*t)},e=>e.getDate()-1),z8=bd(F8,e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getMonth();e.setMonth(n+t)},e=>e.getMonth()),sQ=bd(uE,e=>{e.setDate(e.getDate()-e.getDay()%7),e.setHours(0,0,0,0)},(e,t=1)=>{e.setDate(e.getDate()+7*t)},e=>{const t=z8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/uE)}),lQ=bd(k8,e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getFullYear();e.setFullYear(n+t)},e=>e.getFullYear()),U8={millisecond:nQ,second:rQ,minute:iQ,hour:oQ,day:aQ,week:sQ,month:z8,year:lQ},uQ=bd(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),cQ=bd(aE,e=>{e.setUTCMilliseconds(0)},(e,t=1)=>{e.setTime(+e+aE*t)},e=>e.getUTCSeconds()),fQ=bd(sE,e=>{e.setUTCSeconds(0,0)},(e,t=1)=>{e.setTime(+e+sE*t)},e=>e.getUTCMinutes()),hQ=bd(lE,e=>{e.setUTCMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+lE*t)},e=>e.getUTCHours()),dQ=bd(d1,e=>{e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+d1*t)},e=>e.getUTCDate()-1),j8=bd(F8,e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCMonth();e.setUTCMonth(n+t)},e=>e.getUTCMonth()),pQ=bd(uE,e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7)%7),e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+uE*t)},e=>{const t=j8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/uE)}),vQ=bd(k8,e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCFullYear();e.setUTCFullYear(n+t)},e=>e.getUTCFullYear()),V8={millisecond:uQ,second:cQ,minute:fQ,hour:hQ,day:dQ,week:pQ,month:j8,year:vQ};function mQ(e){const t=e?V8:U8,{year:n,month:r,week:i,day:s,hour:l,minute:c,second:h,millisecond:p}=t;return{tickIntervals:[[h,1],[h,5],[h,15],[h,30],[c,1],[c,5],[c,15],[c,30],[l,1],[l,3],[l,6],[l,12],[s,1],[s,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:p}}function H8(e,t,n,r,i){const s=+e,l=+t,{tickIntervals:c,year:h,millisecond:p}=mQ(i),v=([I,N])=>I.duration*N,y=r?(l-s)/r:n||5,b=r||(l-s)/y,w=c.length,R=PR(c,b,0,w,v);let M;if(R===w){const I=iL(s/h.duration,l/h.duration,y);M=[h,I]}else if(R){const I=b/v(c[R-1])<v(c[R])/b,[N,z]=I?c[R-1]:c[R],H=r?Math.ceil(r/N.duration):z;M=[N,H]}else{const I=Math.max(iL(s,l,y),1);M=[p,I]}return M}const gQ=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,c=s?e:t,[h,p]=H8(l,c,n,r,i),v=h.range(l,new Date(+c+1),p,!0);return s?v.reverse():v},yQ=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,c=s?e:t,[h,p]=H8(l,c,n,r,i),v=[h.floor(l,p),h.ceil(c,p)];return s?v.reverse():v};function _Q(e,t){const{second:n,minute:r,hour:i,day:s,week:l,month:c,year:h}=t;return n.floor(e)<e?".SSS":r.floor(e)<e?":ss":i.floor(e)<e?"hh:mm":s.floor(e)<e?"hh A":c.floor(e)<e?l.floor(e)<e?"MMM DD":"ddd DD":h.floor(e)<e?"MMMM":"YYYY"}function bQ(e){const t=e.getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()+t,n.getSeconds(),n.getMilliseconds()),n}class fP extends hw{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:gQ,interpolate:wb,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return yQ}getTickMethodOptions(){const{domain:t,tickCount:n,tickInterval:r,utc:i}=this.options,s=t[0],l=t[t.length-1];return[s,l,n,r,i]}getFormatter(){const{mask:t,utc:n}=this.options,r=n?V8:U8,i=n?bQ:q_;return s=>B8(i(s),t||_Q(s,r))}clone(){return new fP(this.options)}}const W8=e=>new fP(e);W8.props={};const G8=e=>t=>-e(-t),hP=(e,t)=>{const n=Math.log(e),r=e===Math.E?Math.log:e===10?Math.log10:e===2?Math.log2:i=>Math.log(i)/n;return t?G8(r):r},dP=(e,t)=>{const n=e===Math.E?Math.exp:r=>gf(e,r);return t?G8(n):n},xQ=(e,t,n,r=10)=>{const i=e<0,s=dP(r,i),l=hP(r,i),c=t<e,h=c?t:e,p=c?e:t;let v=l(h),y=l(p),b=[];if(!(r%1)&&y-v<n){if(v=Math.floor(v),y=Math.ceil(y),i)for(;v<=y;v+=1){const w=s(v);for(let R=r-1;R>=1;R-=1){const M=w*R;if(M>p)break;M>=h&&b.push(M)}}else for(;v<=y;v+=1){const w=s(v);for(let R=1;R<r;R+=1){const M=w*R;if(M>p)break;M>=h&&b.push(M)}}b.length*2<n&&(b=Q_(h,p,n))}else{const w=n===-1?y-v:Math.min(y-v,n);b=Q_(v,y,w).map(s)}return c?b.reverse():b},EQ=(e,t,n,r)=>{const i=e<0,s=hP(r,i),l=dP(r,i),c=e>t,h=c?t:e,p=c?e:t,v=[l(Math.floor(s(h))),l(Math.ceil(s(p)))];return c?v.reverse():v};class pP extends hw{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:I2,tickMethod:xQ,tickCount:5}}chooseNice(){return EQ}getTickMethodOptions(){const{domain:t,tickCount:n,base:r}=this.options,i=t[0],s=t[t.length-1];return[i,s,n,r]}chooseTransforms(){const{base:t,domain:n}=this.options,r=n[0]<0;return[hP(t,r),dP(t,r)]}clone(){return new pP(this.options)}}const Z8=e=>new pP(e);Z8.props={};const SQ=e=>t=>t<0?-gf(-t,e):gf(t,e),TQ=e=>t=>t<0?-gf(-t,1/e):gf(t,1/e),wQ=e=>e<0?-Math.sqrt(-e):Math.sqrt(e);class dA extends hw{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:I2,tickMethod:Q_,tickCount:5}}constructor(t){super(t)}chooseTransforms(){const{exponent:t}=this.options;if(t===1)return[q_,q_];const n=t===.5?wQ:SQ(t),r=TQ(t);return[n,r]}clone(){return new dA(this.options)}}const X8=e=>new dA(e);X8.props={};class vP extends dA{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:I2,tickMethod:Q_,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new vP(this.options)}}const $8=e=>new vP(e);$8.props={};const Y8=e=>new Ab(e);Y8.props={};const K8=e=>new yw(e);K8.props={};const q8=e=>new gw(e);q8.props={};const AQ=e=>t=>{const n=e(t);return(0,Gl.Z)(n)?Math.round(n):n};function OQ(e,t){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=e(r)},n.prototype.composeOutput=function(r,i){const{domain:s,interpolator:l,round:c}=this.getOptions(),h=t(s.map(r)),p=c?AQ(l):l;this.output=Tb(p,h,i,r)},n.prototype.invert=void 0}}var CQ=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},mP;function RQ(e){return[e(0),e(1)]}const MQ=e=>{const[t,n]=e;return Tb(wb(0,1),uw(t,n))};let gP=mP=class extends md{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:q_,tickMethod:Q_,tickCount:5}}constructor(t){super(t)}clone(){return new mP(this.options)}};gP=mP=CQ([OQ(RQ,MQ)],gP);const Q8=e=>new gP(e);Q8.props={};const J8=e=>new N2(e);J8.props={};function yP({colorDefault:e,colorBlack:t,colorWhite:n,colorStroke:r,colorBackground:i,padding1:s,padding2:l,padding3:c,alpha90:h,alpha65:p,alpha45:v,alpha25:y,alpha10:b,category10:w,category20:R,sizeDefault:M=1,padding:I="auto",margin:N=16}){return{padding:I,margin:N,size:M,color:e,category10:w,category20:R,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:t,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:t,gridStrokeOpacity:b,labelAlign:"horizontal",labelFill:t,labelOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:s,line:!1,lineLineWidth:.5,lineStroke:t,lineStrokeOpacity:v,tickLength:4,tickLineWidth:1,tickStroke:t,tickOpacity:v,titleFill:t,titleOpacity:h,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:t,itemLabelFillOpacity:h,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[s,s],itemValueFill:t,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:t,navButtonFillOpacity:.65,navPageNumFill:t,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:t,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:t,tickStrokeOpacity:.25,rowPadding:s,colPadding:l,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:t,handleLabelFillOpacity:v,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:t,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:t,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:t,labelFillOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:h,tickStroke:t,tickStrokeOpacity:v},label:{fill:t,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:t,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:t,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:e,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:t,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:t,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:t,titleFillOpacity:h,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:t,subtitleFillOpacity:p,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"}}}const PQ=yP({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),_P=e=>oi({},PQ,e);_P.props={};const ek=e=>oi({},_P(),{category10:"category10",category20:"category20"},e);ek.props={};const IQ=yP({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),tk=e=>oi({},IQ,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},e),nk=e=>Object.assign({},tk(),{category10:"category10",category20:"category20"},e);nk.props={};const LQ=yP({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),rk=e=>oi({},LQ,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(t,n)=>n!==0},axisRight:{gridFilter:(t,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},e);rk.props={};const ik=e=>(...t)=>{const n=Ay(Object.assign({},{crossPadding:50},e))(...t);return pL(n,e),n};ik.props=Object.assign(Object.assign({},Ay.props),{defaultPosition:"bottom"});function ppe(){}const ok=e=>(...t)=>{const n=Ay(Object.assign({},{crossPadding:10},e))(...t);return pL(n,e),n};ok.props=Object.assign(Object.assign({},Ay.props),{defaultPosition:"left"});var bP=function(){},DQ=function(e,t,n){var r=e,i=u(t)?t.split("."):t;return i.forEach(function(s,l){l<i.length-1?(ml(r[s])||(r[s]=(0,Gl.Z)(i[l+1])?[]:{}),r=r[s]):r[s]=n}),e};function NQ(e,t){return e.reduce(function(n,r){return(n[r[t]]=n[r[t]]||[]).push(r),n},{})}function BQ(e){var t;return((t=e[0])===null||t===void 0?void 0:t.map(function(n,r){return e.map(function(i){return i[r]})}))||[]}var Q0=X0({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),FQ=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:rW(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,s){return"".concat(i,"/").concat(s)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new ff({class:Q0.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new ff({class:Q0.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(t.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return(0,d.Z)(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var n=this.pageViews,r=(0,se.CR)(BQ(n.map(function(y){var b=y.getBBox(),w=b.width,R=b.height;return[w,R]})).map(function(y){return Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(y),!1))}),2),i=r[0],s=r[1],l=this.attributes,c=l.pageWidth,h=c===void 0?i:c,p=l.pageHeight,v=p===void 0?s:p;return{pageWidth:h,pageHeight:v}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=e.prototype.getBBox.call(this),r=n.x,i=n.y,s=this.controllerShape,l=this.pageShape,c=l.pageWidth,h=l.pageHeight;return new Zu(r,i,c+s.width,h)},t.prototype.goTo=function(n){var r=this,i=this.attributes.animate,s=this,l=s.currPage,c=s.playState,h=s.playWindow,p=s.pageViews;if(c!=="idle"||n<0||p.length<=0||n>=p.length)return null;p[l].setLocalPosition(0,0),this.prepareFollowingPage(n);var v=(0,se.CR)(this.getFollowingPageDiff(n),2),y=v[0],b=v[1];this.playState="running";var w=b4(h,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-y,", ").concat(-b,")")}],i);return xb(w,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),w},t.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var s=n?(i-1+r)%r:(0,d.Z)(i-1,0,r);return this.goTo(s)},t.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var s=n?(i+1)%r:(0,d.Z)(i+1,0,r);return this.goTo(s)},t.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,s=r.pageHeight;if(!i||!s){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(Q0.clipPath,"rect").styles({width:i,height:s}),this.contentGroup.attr("clipPath",this.clipPath.node())},t.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?w2(r):wy(r)})},t.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,s=n.pageInfoGroup,l=this.attributes,c=l.orientation,h=l.controllerPadding,p=s.getBBox(),v=p.width,y=p.height,b=(0,se.CR)(c==="horizontal"?[-180,0]:[-90,90],2),w=b[0],R=b[1];r.setLocalEulerAngles(w),i.setLocalEulerAngles(R);var M=r.getBBox(),I=M.width,N=M.height,z=i.getBBox(),H=z.width,X=z.height,$=Math.max(I,v,H),te=c==="horizontal"?{offset:[[0,0],[I/2+h,0],[I+v+h*2,0]],textAlign:"start"}:{offset:[[$/2,-N-h],[$/2,0],[$/2,X+h]],textAlign:"center"},fe=(0,se.CR)(te.offset,3),ye=(0,se.CR)(fe[0],2),Le=ye[0],Ge=ye[1],Qe=(0,se.CR)(fe[1],2),gt=Qe[0],qe=Qe[1],lt=(0,se.CR)(fe[2],2),ft=lt[0],pt=lt[1],Zt=te.textAlign,Ct=s.querySelector("text");Ct&&(Ct.style.textAlign=Zt),r.setLocalPosition(Le,Ge),s.setLocalPosition(gt,qe),i.setLocalPosition(ft,pt)},t.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,s=r.pageViews,l=r.attributes.formatter;s.length<2||((n=this.pageInfoGroup.querySelector(Q0.pageInfo.class))===null||n===void 0||n.attr("text",l(i+1,s.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,s=this.pageShape,l=s.pageWidth,c=s.pageHeight,h=n<r?-1:1;return i==="horizontal"?[h*l,0]:[0,h*c]},t.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,s=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var l=(0,se.CR)(this.getFollowingPageDiff(n),2),c=l[0],h=l[1];s[n].setLocalPosition(c,h)}},t.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,s=this.pageShape,l=s.pageWidth,c=s.pageHeight,h=this.pageViews.length>=2,p=n.maybeAppendByClassName(Q0.controller,"g");if(ew(p.node(),h),!!h){var v=Vs(this.attributes,"button"),y=Vs(this.attributes,"pageNum"),b=(0,se.CR)(xg(v),2),w=b[0],R=b[1],M=w.size,I=(0,se._T)(w,["size"]),N=!p.select(Q0.prevBtnGroup.class).node(),z=p.maybeAppendByClassName(Q0.prevBtnGroup,"g").styles(R);this.prevBtnGroup=z.node();var H=z.maybeAppendByClassName(Q0.prevBtn,"path"),X=p.maybeAppendByClassName(Q0.nextBtnGroup,"g").styles(R);this.nextBtnGroup=X.node();var $=X.maybeAppendByClassName(Q0.nextBtn,"path");[H,$].forEach(function(fe){fe.styles((0,se.pi)((0,se.pi)({},I),{transformOrigin:"center"})),ER(fe.node(),M,!0)});var te=p.maybeAppendByClassName(Q0.pageInfoGroup,"g");this.pageInfoGroup=te.node(),te.maybeAppendByClassName(Q0.pageInfo,"text").styles(y),this.updatePageInfo(),p.node().setLocalPosition(l+i,c/2),N&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},t.prototype.render=function(n,r){var i=n.x,s=i===void 0?0:i,l=n.y,c=l===void 0?0:l;this.attr("transform","translate(".concat(s,", ").concat(c,")"));var h=us(r);this.renderClipPath(h),this.renderController(h),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var n=this,r=HT(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(Ua.INSERTED,r),this.playWindow.addEventListener(Ua.REMOVED,r)},t}(vh),d0=X0({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function kQ(e){var t=e.querySelector(d0.marker.class);return t?t.style:{}}var zQ=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,{span:[1,1],marker:function(){return new G0({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(t.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,s=n.node().getBBox(),l=s.width,c=s.height,h=r.node().getBBox(),p=h.width,v=h.height;return{markerWidth:i,labelWidth:l,valueWidth:p,height:Math.max(i,c,v)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=(0,se.CR)(zh(n),2),i=r[0],s=r[1],l=this.showValue?s:0,c=i+l;return[i/c,l/c]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,s=r.width,l=this.actualSpace,c=l.markerWidth,h=l.height,p=this.actualSpace,v=p.labelWidth,y=p.valueWidth,b=(0,se.CR)(this.spacing,2),w=b[0],R=b[1];if(s){var M=s-i-w-R,I=(0,se.CR)(this.span,2),N=I[0],z=I[1];n=(0,se.CR)([N*M,z*M],2),v=n[0],y=n[1]}var H=c+v+y+w+R;return{width:H,height:h,markerWidth:c,labelWidth:v,valueWidth:y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=(0,se.CR)(zh(n),2),i=r[0],s=r[1];return this.showValue?[i,s]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,s=n.valueWidth,l=n.width,c=n.height,h=(0,se.CR)(this.spacing,2),p=h[0],v=h[1];return{height:c,width:l,markerWidth:r,labelWidth:i,valueWidth:s,position:[r/2,r+p,r+i+p+v]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var n=kQ(this.markerGroup.node()),r=this.attributes,i=r.markerSize,s=r.markerStrokeWidth,l=s===void 0?n.strokeWidth:s,c=r.markerLineWidth,h=c===void 0?n.lineWidth:c,p=r.markerStroke,v=p===void 0?n.stroke:p,y=+(l||h||(v?1:0))*Math.sqrt(2),b=this.markerGroup.node().getBBox(),w=b.width,R=b.height;return(1-y/Math.max(w,R))*i},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,s=Vs(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(d0.markerGroup,"g").style("zIndex",0),Mp(!!i,this.markerGroup,function(){var l,c=r.markerGroup.node(),h=(l=c.childNodes)===null||l===void 0?void 0:l[0],p=typeof i=="string"?new kl({style:{symbol:i},className:d0.marker.name}):i();h?p.nodeName===h.nodeName?h instanceof kl?h.update((0,se.pi)((0,se.pi)({},s),{symbol:i})):(AV(h,p),us(h).styles(s)):(h.remove(),us(p).attr("className",d0.marker.name).styles(s),c.appendChild(p)):(p instanceof kl||us(p).attr("className",d0.marker.name).styles(s),c.appendChild(p)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var v=ER(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(v,")")})},t.prototype.renderLabel=function(n){var r=Vs(this.attributes,"label"),i=r.text,s=(0,se._T)(r,["text"]);this.labelGroup=n.maybeAppendByClassName(d0.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(d0.label,function(){return K_(i)}).styles(s)},t.prototype.renderValue=function(n){var r=this,i=Vs(this.attributes,"value"),s=i.text,l=(0,se._T)(i,["text"]);this.valueGroup=n.maybeAppendByClassName(d0.valueGroup,"g").style("zIndex",0),Mp(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(d0.value,function(){return K_(s)}).styles(l)})},t.prototype.renderBackground=function(n){var r=this.shape,i=r.width,s=r.height,l=Vs(this.attributes,"background");this.background=n.maybeAppendByClassName(d0.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(d0.background,"rect").styles((0,se.pi)({width:i,height:s},l))},t.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,s=n.height,l=(0,se.CR)(n.position,3),c=l[0],h=l[1],p=l[2],v=s/2;this.markerGroup.styles({transform:"translate(".concat(c,", ").concat(v,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(h,", ").concat(v,")")}),AR(this.labelGroup.select(d0.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(p,", ").concat(v,")")}),AR(this.valueGroup.select(d0.value.class).node(),Math.ceil(i)))},t.prototype.render=function(n,r){var i=us(r),s=n.x,l=s===void 0?0:s,c=n.y,h=c===void 0?0:c;i.styles({transform:"translate(".concat(l,", ").concat(h,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},t}(vh),p1=X0({page:"item-page",navigator:"navigator",item:"item"},"items"),ak=function(e,t,n){return n===void 0&&(n=!0),e?t(e):n},UQ=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:bP,mouseenter:bP,mouseleave:bP})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,s=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,s.length]:[s.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,s=Vs(this.attributes,"item"),l=r.map(function(c,h){var p=c.id,v=p===void 0?h:p,y=c.label,b=c.value;return{id:"".concat(v),index:h,style:(0,se.pi)({layout:i,labelText:y,valueText:b},Object.fromEntries(Object.entries(s).map(function(w){var R=(0,se.CR)(w,2),M=R[0],I=R[1];return[M,$0(I,[c,h,r])]})))}});return l},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,s=r.width,l=r.rowPadding,c=r.colPadding,h=(0,se.CR)(this.navigatorShape,1),p=h[0],v=(0,se.CR)(this.grid,2),y=v[0],b=v[1],w=b*y,R=0;return this.pageViews.children.map(function(M,I){var N,z,H=Math.floor(I/w),X=I%w,$=n.ifHorizontal(b,y),te=[Math.floor(X/$),X%$];i==="vertical"&&te.reverse();var fe=(0,se.CR)(te,2),ye=fe[0],Le=fe[1],Ge=(s-p-(b-1)*c)/b,Qe=M.getBBox().height,gt=(0,se.CR)([0,0],2),qe=gt[0],lt=gt[1];return i==="horizontal"?(N=(0,se.CR)([R,ye*(Qe+l)],2),qe=N[0],lt=N[1],R=Le===b-1?0:R+Ge+c):(z=(0,se.CR)([Le*(Ge+c),R],2),qe=z[0],lt=z[1],R=ye===y-1?0:R+Qe+l),{page:H,index:I,row:ye,col:Le,pageIndex:X,width:Ge,height:Qe,x:qe,y:lt}})},t.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,s=n.rowPadding,l=n.colPadding,c=(0,se.CR)(this.navigatorShape,1),h=c[0],p=(0,se.CR)(this.grid,2),v=p[0],y=p[1],b=(0,se.CR)([r-h,i],2),w=b[0],R=b[1],M=(0,se.CR)([0,0,0,0,0,0,0,0],8),I=M[0],N=M[1],z=M[2],H=M[3],X=M[4],$=M[5],te=M[6],fe=M[7];return this.pageViews.children.map(function(ye,Le){var Ge,Qe,gt,qe,lt=ye.getBBox(),ft=lt.width,pt=lt.height,Zt=te===0?0:l,Ct=te+Zt+ft;if(Ct<=w&&ak(X,function(Tn){return Tn<y}))return Ge=(0,se.CR)([te+Zt,fe,Ct],3),I=Ge[0],N=Ge[1],te=Ge[2],{width:ft,height:pt,x:I,y:N,page:z,index:Le,pageIndex:H++,row:$,col:X++};Qe=(0,se.CR)([$+1,0,0,fe+pt+s],4),$=Qe[0],X=Qe[1],te=Qe[2],fe=Qe[3];var Lt=fe+pt;return Lt<=R&&ak($,function(Tn){return Tn<v})?(gt=(0,se.CR)([te,fe,ft],3),I=gt[0],N=gt[1],te=gt[2],{width:ft,height:pt,x:I,y:N,page:z,index:Le,pageIndex:H++,row:$,col:X++}):(qe=(0,se.CR)([0,0,ft,0,z+1,0,0,0],8),I=qe[0],N=qe[1],te=qe[2],fe=qe[3],z=qe[4],H=qe[5],$=qe[6],X=qe[7],{width:ft,height:pt,x:I,y:N,page:z,index:Le,pageIndex:H++,row:$,col:X++})})},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return Cm(i,n,r)},t.prototype.flattenPage=function(n){n.querySelectorAll(p1.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(p1.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},t.prototype.renderItems=function(n){var r=this.attributes,i=r.click,s=r.mouseenter,l=r.mouseleave;this.flattenPage(n);var c=this.dispatchCustomEvent.bind(this);us(n).selectAll(p1.item.class).data(this.renderData,function(h){return h.id}).join(function(h){return h.append(function(p){var v=p.style;return new zQ({style:v})}).attr("className",p1.item.name).on("click",function(){i==null||i(this),c("itemClick",{item:this})}).on("pointerenter",function(){s==null||s(this),c("itemMouseenter",{item:this})}).on("pointerleave",function(){l==null||l(this),c("itemMouseleave",{item:this})})},function(h){return h.each(function(p){var v=p.style;this.update(v)})},function(h){return h.remove()})},t.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,s=r.width,l=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,c=(0,se.CR)(this.navigatorShape,2),h=c[0],p=c[1];this.navigator.update(i==="grid"?{pageWidth:s-h,pageHeight:l-p}:{})},t.prototype.adjustLayout=function(){var n=this,r=Object.entries(NQ(this.itemsLayout,"page")).map(function(s){var l=(0,se.CR)(s,2),c=l[0],h=l[1];return{page:c,layouts:h}}),i=(0,se.ev)([],(0,se.CR)(this.navigator.getContainer().children),!1);r.forEach(function(s){var l=s.layouts,c=n.pageViews.appendChild(new ff({className:p1.page.name}));l.forEach(function(h){var p=h.x,v=h.y,y=h.index,b=h.width,w=h.height,R=i[y];c.appendChild(R),DQ(R,"__layout__",h),R.update({x:p,y:v,width:b,height:w})})}),this.relayoutNavigator()},t.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=Vs(this.attributes,"nav"),s=_g({orientation:r},i),l=this;return n.selectAll(p1.navigator.class).data(["nav"]).join(function(c){return c.append(function(){return new FQ({style:s})}).attr("className",p1.navigator.name).each(function(){l.navigator=this})},function(c){return c.each(function(){this.update(s)})},function(c){return c.remove()}),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var s=this.renderNavigator(us(r));this.renderItems(s.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(n,r){var i=new Vi(n,{detail:r});this.dispatchEvent(i)},t}(vh),jQ=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,hW)||this}return t.prototype.renderTitle=function(n,r,i){var s=this.attributes,l=s.showTitle,c=s.titleText,h=Vs(this.attributes,"title"),p=(0,se.CR)(xg(h),2),v=p[0],y=p[1];this.titleGroup=n.maybeAppendByClassName(Uh.titleGroup,"g").styles(y);var b=(0,se.pi)((0,se.pi)({width:r,height:i},v),{text:l?c:""});this.title=this.titleGroup.maybeAppendByClassName(Uh.title,function(){return new eL({style:b})}).update(b)},t.prototype.renderItems=function(n,r){var i=r.x,s=r.y,l=r.width,c=r.height,h=Vs(this.attributes,"title",!0),p=(0,se.CR)(xg(h),2),v=p[0],y=p[1],b=(0,se.pi)((0,se.pi)({},v),{width:l,height:c,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(Uh.itemsGroup,"g").styles((0,se.pi)((0,se.pi)({},y),{transform:"translate(".concat(i,", ").concat(s,")")}));var w=this;this.itemsGroup.selectAll(Uh.items.class).data(["items"]).join(function(R){return R.append(function(){return new UQ({style:b})}).attr("className",Uh.items.name).each(function(){w.items=us(this)})},function(R){return R.update(b)},function(R){return R.remove()})},t.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,s=r.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(s,")")}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,s=n.height;return r?this.title.node().getAvailableSpace():new Zu(0,0,i,s)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),s=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!s?e.prototype.getBBox.call(this):XV(i,s)},t.prototype.render=function(n,r){var i=this.attributes,s=i.width,l=i.height,c=i.x,h=c===void 0?0:c,p=i.y,v=p===void 0?0:p,y=us(r);r.style.transform="translate(".concat(h,", ").concat(v,")"),this.renderTitle(y,s,l),this.renderItems(y,this.availableSpace),this.adjustLayout()},t}(vh);function cE(e){if(is(e)){var t=e;return t[t.length-1]}}var VQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function HQ(e,t){const n=Am(e,"shape"),r=Am(e,"color"),i=n?n.clone():null,s=[];for(const[c,h]of t){const p=c.type,y=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:h.data).map((b,w)=>{var R;return i?i.map(b||"point"):((R=c==null?void 0:c.style)===null||R===void 0?void 0:R.shape)||h.defaultShape||"point"});typeof p=="string"&&s.push([p,y])}if(s.length===0)return["point",["point"]];if(s.length===1||!n)return s[0];const{range:l}=n.getOptions();return s.map(([c,h])=>{let p=0;for(let v=0;v<s.length;v++){const y=l[v%l.length];h[v]===y&&p++}return[p/h.length,[c,h]]}).sort((c,h)=>h[0]-c[0])[0][1]}function WQ(e,t){const{scales:n,library:r,markState:i}=t,[s,l]=HQ(n,i),{itemMarker:c,itemMarkerSize:h}=e,p=(b,w)=>{var R,M,I;const N=((I=(M=(R=r[`mark.${s}`])===null||R===void 0?void 0:R.props)===null||M===void 0?void 0:M.shape[b])===null||I===void 0?void 0:I.props.defaultMarker)||cE(b.split(".")),z=typeof h=="function"?h(w):h;return()=>QK(N,{color:w.color})(0,0,z)},v=b=>`${l[b]}`;return Am(n,"shape")&&!c?(b,w)=>p(v(w),b):typeof c=="function"?(b,w)=>{const R=c(b.id,w);return typeof R=="string"?p(R,b):R}:(b,w)=>p(c||v(w),b)}function GQ(e){const t=Am(e,"opacity");if(t){const{range:n}=t.getOptions();return(r,i)=>n[i]}}function ZQ(e,t){const n=Am(e,"size");return n instanceof cA?n.map(NaN)*2:t}function XQ(e,t){const{labelFormatter:n=b=>`${b}`}=e,{scales:r,theme:i}=t,s=i.legendCategory.itemMarkerSize,l=ZQ(r,s),c={itemMarker:WQ(Object.assign(Object.assign({},e),{itemMarkerSize:l}),t),itemMarkerSize:l,itemMarkerOpacity:GQ(r)},h=typeof n=="string"?Ye(n):n,p=Am(r,"color"),v=bH(r),y=p?b=>p.map(b):()=>t.theme.color;return Object.assign(Object.assign({},c),{data:v.map(b=>({id:b,label:h(b),color:y(b)}))})}function $Q(e,t,n){const{position:r}=t;if(r==="center"){const{bbox:l}=e,{width:c,height:h}=l;return{width:c,height:h}}const{width:i,height:s}=hL(e,t,n);return{width:i,height:s}}const xP=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:c,cols:h,itemMarker:p}=e,v=VQ(e,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:y}=v;return b=>{const{value:w,theme:R}=b,{bbox:M}=w,{width:I,height:N}=$Q(w,e,xP),z=cL(s,n),H=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(s)?"vertical":"horizontal",width:I,height:N,layout:h!==void 0?"grid":"flex"},h!==void 0&&{gridCol:h}),y!==void 0&&{gridRow:y}),{titleText:dw(c)}),XQ(e,b)),{legendCategory:X={}}=R,$=pw(Object.assign({},X,H,v)),te=new gH({style:Object.assign(Object.assign({x:M.x,y:M.y,width:M.width,height:M.height},z),{subOptions:$})});return te.appendChild(new jQ({className:"legend-category",style:$})),te}};xP.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const sk=e=>()=>new ff;sk.props={};var YQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function lk(e,t,n,r){switch(r){case"center":return{x:e+n/2,y:t,textAlign:"middle"};case"right":return{x:e+n,y:t,textAlign:"right"};default:return{x:e,y:t,textAlign:"left"}}}const KQ=mH({render(e,t){const{width:n,title:r,subtitle:i,spacing:s=2,align:l="left",x:c,y:h}=e,p=YQ(e,["width","title","subtitle","spacing","align","x","y"]);t.style.transform=`translate(${c}, ${h})`;const v=go(p,"title"),y=go(p,"subtitle"),w=uL(t,".title","text").attr("className","title").call(ia,Object.assign(Object.assign(Object.assign({},lk(0,0,n,l)),{fontSize:14,textBaseline:"top",text:r}),v)).node().getLocalBounds();uL(t,".sub-title","text").attr("className","sub-title").call(R=>{if(!i)return R.node().remove();R.node().attr(Object.assign(Object.assign(Object.assign({},lk(0,w.max[1]+s,n,l)),{fontSize:12,textBaseline:"top",text:i}),y))})}}),uk=e=>({value:t,theme:n})=>{const{x:r,y:i,width:s,height:l}=t.bbox;return new KQ({style:oi({},n.title,Object.assign({x:r,y:i,width:s,height:l},e))})};uk.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var EP=function(e){if(typeof e!="object"||e===null)return e;var t;if(jo(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=EP(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=EP(e[i]):t[i]=e[i]}return t},SP=EP,qQ=function(e){(0,se.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,se._T)(n,["style"]);return r=e.call(this,oi({},{type:"column"},(0,se.pi)({style:i},s)))||this,r.columnsGroup=new ff({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.columns,i=n.x,s=n.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(s,")"),us(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(l){return l.append("rect").attr("className","column").each(function(c){this.attr(c)})},function(l){return l.each(function(c){this.attr(c)})},function(l){return l.remove()})},t.prototype.update=function(n){this.attr(_g({},this.attributes,n)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(Kf),QQ=function(e){(0,se.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,se._T)(n,["style"]);return r=e.call(this,oi({},{type:"lines"},(0,se.pi)({style:i},s)))||this,r.linesGroup=r.appendChild(new ff),r.areasGroup=r.appendChild(new ff),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas,s=n.x,l=n.y;this.style.transform="translate(".concat(s,", ").concat(l,")"),r&&this.renderLines(r),i&&this.renderAreas(i)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(n){this.attr(_g({},this.attributes,n)),this.render()},t.prototype.renderLines=function(n){us(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},t.prototype.renderAreas=function(n){us(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},t}(Kf);function JQ(e,t,n,r){var i,s=[],l=!!r,c,h,p=[1/0,1/0],v=[-1/0,-1/0],y,b,w;if(l){i=(0,se.CR)(r,2),p=i[0],v=i[1];for(var R=0,M=e.length;R<M;R+=1){var I=e[R];p=$_(p,I),v=Y_(v,I)}}for(var R=0,N=e.length;R<N;R+=1){var I=e[R];if(R===0&&!n)w=I;else if(R===N-1&&!n)b=I,s.push(w),s.push(b);else{var z=[R?R-1:N-1,R-1][n?0:1];c=e[z],h=e[n?(R+1)%N:R+1];var H=[0,0];H=yR(h,c),H=bg(H,t);var X=O2(I,c),$=O2(I,h),te=X+$;te!==0&&(X/=te,$/=te);var fe=bg(H,-X),ye=bg(H,$);b=A2(I,fe),y=A2(I,ye),y=$_(y,Y_(h,I)),y=Y_(y,$_(h,I)),fe=yR(y,I),fe=bg(fe,-X/$),b=A2(I,fe),b=$_(b,Y_(c,I)),b=Y_(b,$_(c,I)),ye=yR(I,b),ye=bg(ye,$/X),y=A2(I,ye),l&&(b=Y_(b,p),b=$_(b,v),y=Y_(y,p),y=$_(y,v)),s.push(w),s.push(b),w=y}}return n&&s.push(s.shift()),s}function eJ(e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var i=!!t,s=[],l=0,c=e.length;l<c;l+=2)s.push([e[l],e[l+1]]);for(var h=JQ(s,.4,i,n),p=s.length,v=[],y,b,w,l=0;l<p-1;l+=1)y=h[l*2],b=h[l*2+1],w=s[l+1],v.push(["C",y[0],y[1],b[0],b[1],w[0],w[1]]);return i&&(y=h[p],b=h[p+1],r=(0,se.CR)(s,1),w=r[0],v.push(["C",y[0],y[1],b[0],b[1],w[0],w[1]])),v}function tJ(e,t){var n,r=t.x,i=t.y,s=(0,se.CR)(i.getOptions().range||[0,0],2),l=s[0],c=s[1];return c>l&&(n=(0,se.CR)([l,c],2),c=n[0],l=n[1]),e.map(function(h){var p=h.map(function(v,y){return[r.map(y),(0,d.Z)(i.map(v),c,l)]});return p})}function fE(e,t){t===void 0&&(t=!1);var n=t?e.length-1:0,r=e.map(function(i,s){return(0,se.ev)([s===n?"M":"L"],(0,se.CR)(i),!1)});return t?r.reverse():r}function pA(e,t){if(t===void 0&&(t=!1),e.length<=2)return fE(e);for(var n=[],r=e.length,i=0;i<r;i+=1){var s=t?e[r-i-1]:e[i];ps(s,n.slice(-2))||n.push.apply(n,(0,se.ev)([],(0,se.CR)(s),!1))}var l=eJ(n,!1);return t?l.unshift((0,se.ev)(["M"],(0,se.CR)(e[r-1]),!1)):l.unshift((0,se.ev)(["M"],(0,se.CR)(e[0]),!1)),l}function TP(e,t,n){var r=SP(e);return r.push(["L",t,n],["L",0,n],["Z"]),r}function nJ(e,t,n,r){return e.map(function(i){return TP(t?pA(i):fE(i),n,r)})}function rJ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=fE(s),c=void 0;if(i===0)c=TP(l,t,n);else{var h=e[i-1],p=fE(h,!0);p[0][0]="L",c=(0,se.ev)((0,se.ev)((0,se.ev)([],(0,se.CR)(l),!1),(0,se.CR)(p),!1),[["Z"]],!1)}r.push(c)}return r}function iJ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=pA(s),c=void 0;if(i===0)c=TP(l,t,n);else{var h=e[i-1],p=pA(h,!0),v=s[0];p[0][0]="L",c=(0,se.ev)((0,se.ev)((0,se.ev)([],(0,se.CR)(l),!1),(0,se.CR)(p),!1),[(0,se.ev)(["M"],(0,se.CR)(v),!1),["Z"]],!1)}r.push(c)}return r}var oJ=function(e,t){if(jo(e)){for(var n,r=1/0,i=0;i<e.length;i++){var s=e[i],l=tp(t)?t(s):s[t];l<r&&(n=s,r=l)}return n}},aJ=function(e,t){if(jo(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var s=e[i],l=tp(t)?t(s):s[t];l>r&&(n=s,r=l)}return n}};function ck(e){return e.length===0?[0,0]:[Ya(oJ(e,function(t){return Ya(t)||0})),Vo(aJ(e,function(t){return Vo(t)||0}))]}function fk(e){for(var t=SP(e),n=t[0].length,r=(0,se.CR)([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],s=r[1],l=0;l<t.length;l+=1)for(var c=t[l],h=0;h<n;h+=1)c[h]>=0?(c[h]+=i[h],i[h]=c[h]):(c[h]+=s[h],s[h]=c[h]);return t}var sJ=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(t.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=SP(n);return(0,Gl.Z)(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?fk(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var n=this.scales.y,r=(0,se.CR)(n.getOptions().domain||[0,0],2),i=r[0],s=r[1];return s<0?n.map(s):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,s=r.isStack,l=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var c=Vs(this.attributes,"area"),h=Vs(this.attributes,"line"),p=this.containerShape.width,v=this.data;if(v[0].length===0)return{lines:[],areas:[]};var y=this.scales,b=y.x,w=y.y,R=tJ(v,{type:"line",x:b,y:w}),M=[];if(c){var I=this.baseline;s?M=l?iJ(R,p,I):rJ(R,p,I):M=nJ(R,l,p,I)}return{lines:R.map(function(N,z){return(0,se.pi)({stroke:n.getColor(z),d:l?pA(N):fE(N)},h)}),areas:M.map(function(N,z){return(0,se.pi)({d:N,fill:n.getColor(z)},c)})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var n=this,r=Vs(this.attributes,"column"),i=this.attributes,s=i.isStack,l=i.type,c=i.scale;if(l!=="column")throw new Error("columnsStyle can only be used in column type");var h=this.containerShape.height,p=this.rawData;if(!p)return{columns:[]};s&&(p=fk(p));var v=this.createScales(p),y=v.x,b=v.y,w=(0,se.CR)(ck(p),2),R=w[0],M=w[1],I=new md({domain:[0,M-(R>0?0:R)],range:[0,h*c]}),N=y.getBandWidth(),z=this.rawData;return{columns:p.map(function(H,X){return H.map(function($,te){var fe=N/p.length,ye=function(){return{x:y.map(te)+fe*X,y:$>=0?b.map($):b.map(0),width:fe,height:I.map(Math.abs($))}},Le=function(){return{x:y.map(te),y:b.map($),width:N,height:I.map(z[X][te])}};return(0,se.pi)((0,se.pi)({fill:n.getColor(X)},r),s?Le():ye())})})}},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){Fj(r,".container","rect").attr("className","container").node();var i=n.type,s=n.x,l=n.y,c="spark".concat(i),h=(0,se.pi)({x:s,y:l},i==="line"?this.linesStyle:this.columnsStyle);us(r).selectAll(".spark").data([i]).join(function(p){return p.append(function(v){return v==="line"?new QQ({className:c,style:h}):new qQ({className:c,style:h})}).attr("className","spark ".concat(c))},function(p){return p.update(h)},function(p){return p.remove()})},t.prototype.getColor=function(n){var r=this.attributes.color;return jo(r)?r[n%r.length]:tp(r)?r.call(null,n):r},t.prototype.createScales=function(n){var r,i,s=this.attributes,l=s.type,c=s.scale,h=s.range,p=h===void 0?[]:h,v=s.spacing,y=this.containerShape,b=y.width,w=y.height,R=(0,se.CR)(ck(n),2),M=R[0],I=R[1],N=new md({domain:[(r=p[0])!==null&&r!==void 0?r:M,(i=p[1])!==null&&i!==void 0?i:I],range:[w,w*(1-c)]});return l==="line"?{type:l,x:new md({domain:[0,n[0].length-1],range:[0,b]}),y:N}:{type:l,x:new Fy({domain:n[0].map(function(z,H){return H}),range:[0,b],paddingInner:v,paddingOuter:v/2,align:.5}),y:N}},t.tag="sparkline",t}(vh),hk=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,(0,se.pi)((0,se.pi)((0,se.pi)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},wm(EL,"handle")),wm(bL,"handleIcon")),wm(xL,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(s){s.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(mw(s));var l=r.availableSpace,c=l.x,h=l.y,p=r.getBBox(),v=p.x,y=p.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([c,h])-r.getOrientVal([+v,+y])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var s=r.attributes,l=s.slidable,c=s.brushable,h=s.type;i.stopPropagation();var p=r.getOrientVal(mw(i)),v=p-r.prevPos;if(v){var y=r.getRatio(v);switch(r.target){case"start":l&&r.setValuesOffset(y);break;case"end":l&&r.setValuesOffset(0,y);break;case"selection":l&&r.setValuesOffset(y,y);break;case"track":if(!c)return;r.selectionWidth+=y,h==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=p}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var s=r.attributes,l=s.onChange,c=s.type,h=c==="range"?i:i[1],p=c==="range"?r.getValues():r.getValues()[1],v=new Vi("valuechange",{detail:{oldValue:h,value:p}});r.dispatchEvent(v),l==null||l(p)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=Vs(this.attributes,"sparkline");return(0,se.pi)((0,se.pi)({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,s=(0,se.CR)(this.getOrientVal([[r,i],[i,r]]),2),l=s[0],c=s[1];return{width:l,height:c}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.x,i=n.y,s=n.padding,l=(0,se.CR)(zh(s),4),c=l[0],h=l[1],p=l[2],v=l[3],y=this.shape,b=y.width,w=y.height;return{x:v,y:c,width:b-(v+h),height:w-(c+p)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},t.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(Om.selection.class).each(function(i,s){Bv(this,r[s],n)})},t.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&Bv(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&Bv(this.endHandle,this.getHandleStyle("end"),n))},t.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,s=this.clampValues(n);this.attributes.values=s,this.setValues(s),r&&this.onValueChange(i)},t.prototype.renderTrack=function(n){var r=this.attributes,i=r.x,s=r.y,l=Vs(this.attributes,"track");this.trackShape=us(n).maybeAppendByClassName(Om.track,"rect").styles((0,se.pi)((0,se.pi)({x:i,y:s},this.shape),l))},t.prototype.renderBrushArea=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.brushable;this.brushArea=us(n).maybeAppendByClassName(Om.brushArea,"rect").styles((0,se.pi)({x:i,y:s,fill:"transparent",cursor:l?"crosshair":"default"},this.shape))},t.prototype.renderSparkline=function(n){var r=this,i=this.attributes,s=i.x,l=i.y,c=i.orientation,h=us(n).maybeAppendByClassName(Om.sparklineGroup,"g");Mp(c==="horizontal",h,function(p){var v=(0,se.pi)((0,se.pi)({},r.sparklineStyle),{x:s,y:l});p.maybeAppendByClassName(Om.sparkline,function(){return new sJ({style:v})}).update(v)})},t.prototype.renderHandles=function(){var n=this,r,i=this.attributes,s=i.showHandle,l=i.type,c=l==="range"?["start","end"]:["end"],h=s?c:[],p=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(Om.handle.class).data(h.map(function(v){return{type:v}}),function(v){return v.type}).join(function(v){return v.append(function(y){var b=y.type;return new SL({style:n.getHandleStyle(b)})}).each(function(y){var b=y.type;this.attr("class","".concat(Om.handle.name," ").concat(b,"-handle"));var w="".concat(b,"Handle");p[w]=this,this.addEventListener("pointerdown",p.onDragStart(b))})},function(v){return v.each(function(y){var b=y.type;this.update(p.getHandleStyle(b))})},function(v){return v.each(function(y){var b=y.type,w="".concat(b,"Handle");p[w]=void 0}).remove()})},t.prototype.renderSelection=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.type,c=r.selectionType;this.foregroundGroup=us(n).maybeAppendByClassName(Om.foreground,"g");var h=Vs(this.attributes,"selection"),p=function(y){return y.style("visibility",function(b){return b.show?"visible":"hidden"}).style("cursor",function(b){return c==="select"?"grab":c==="invert"?"crosshair":"default"}).styles((0,se.pi)((0,se.pi)({},h),{transform:"translate(".concat(i,", ").concat(s,")")}))},v=this;this.foregroundGroup.selectAll(Om.selection.class).data(l==="value"?[]:this.calcSelectionArea().map(function(y,b){return{style:(0,se.pi)({},y),index:b,show:c==="select"?b===1:b!==1}}),function(y){return y.index}).join(function(y){return y.append("rect").attr("className",Om.selection.name).call(p).each(function(b,w){var R=this;w===1?(v.selectionShape=us(this),this.on("pointerdown",function(M){R.attr("cursor","grabbing"),v.onDragStart("selection")(M)}),v.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),v.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),v.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){R.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){R.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){R.attr("cursor","pointer")})):this.on("pointerdown",v.onDragStart("track"))})},function(y){return y.call(p)},function(y){return y.remove()}),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},t.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var s=(0,se.CR)(this.range,2),l=s[0],c=s[1],h=(0,se.CR)(this.getValues().map(function(I){return vw(I,r)}),2),p=h[0],v=h[1],y=Array.isArray(n)?n:[p,n!=null?n:v],b=(0,se.CR)((y||[p,v]).map(function(I){return vw(I,r)}),2),w=b[0],R=b[1];if(this.attributes.type==="value")return[0,(0,d.Z)(R,l,c)];w>R&&(i=(0,se.CR)([R,w],2),w=i[0],R=i[1]);var M=R-w;return M>c-l?[l,c]:w<l?p===l&&v===R?[l,R]:[l,M+l]:R>c?v===c&&p===w?[w,c]:[c-M,c]:[w,R]},t.prototype.calcSelectionArea=function(n){var r=(0,se.CR)(this.clampValues(n),2),i=r[0],s=r[1],l=this.availableSpace,c=l.x,h=l.y,p=l.width,v=l.height;return this.getOrientVal([[{y:h,height:v,x:c,width:i*p},{y:h,height:v,x:i*p+c,width:(s-i)*p},{y:h,height:v,x:s*p,width:(1-s)*p}],[{x:c,width:p,y:h,height:i*v},{x:c,width:p,y:i*v+h,height:(s-i)*v},{x:c,width:p,y:s*v,height:(1-s)*v}]])},t.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,s=i.x,l=i.y,c=i.width,h=i.height,p=(0,se.CR)(this.clampValues(),2),v=p[0],y=p[1],b=n==="start"?-r:r,w=(n==="start"?v:y)*this.getOrientVal([c,h])+b;return{x:s+this.getOrientVal([w,c/2]),y:l+this.getOrientVal([h/2,w])}},t.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},t.prototype.calcHandleText=function(n){var r,i=this.attributes,s=i.type,l=i.orientation,c=i.formatter,h=i.autoFitLabel,p=Vs(this.attributes,"handle"),v=Vs(p,"label"),y=p.spacing,b=this.getHandleSize(),w=this.clampValues(),R=n==="start"?w[0]:w[1],M=c(R),I=new mR({style:(0,se.pi)((0,se.pi)((0,se.pi)({},v),this.inferTextStyle(n)),{text:M})}),N=I.getBBox(),z=N.width,H=N.height;if(I.destroy(),!h){if(s==="value")return{text:M,x:0,y:-H-y};var X=y+b+(l==="horizontal"?z/2:0);return r={text:M},r[l==="horizontal"?"x":"y"]=n==="start"?-X:X,r}var $=0,te=0,fe=this.availableSpace,ye=fe.width,Le=fe.height,Ge=this.calcSelectionArea()[1],Qe=Ge.x,gt=Ge.y,qe=Ge.width,lt=Ge.height,ft=y+b;if(l==="horizontal"){var pt=ft+z/2;if(n==="start"){var Zt=Qe-ft-z;$=Zt>0?-pt:pt}else{var Ct=ye-Qe-qe-ft>z;$=Ct?pt:-pt}}else{var Lt=ft,Tn=H+ft;n==="start"?te=gt-b>H?-Tn:Lt:te=Le-(gt+lt)-b>H?Tn:-Lt}return{x:$,y:te,text:M}},t.prototype.getHandleLabelStyle=function(n){var r=Vs(this.attributes,"handleLabel");return(0,se.pi)((0,se.pi)((0,se.pi)({},r),this.calcHandleText(n)),this.inferTextStyle(n))},t.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=Vs(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),s=this.getHandleSize();return(0,se.pi)({cursor:i,shape:n,size:s},r)},t.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.showLabel,c=r.showLabelOnInteraction,h=r.orientation,p=this.calcHandlePosition(n),v=p.x,y=p.y,b=this.calcHandleText(n),w=l;return!l&&c&&(this.target?w=!0:w=!1),(0,se.pi)((0,se.pi)((0,se.pi)({},wm(this.getHandleIconStyle(),"icon")),wm((0,se.pi)((0,se.pi)({},this.getHandleLabelStyle(n)),b),"label")),{transform:"translate(".concat(v+i,", ").concat(y+s,")"),orientation:h,showLabel:w,type:n,zIndex:3})},t.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,s=n.height;return r||Math.floor((this.getOrientVal([+s,+i])+4)/2.4)},t.prototype.getOrientVal=function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1],l=this.attributes.orientation;return l==="horizontal"?i:s},t.prototype.setValuesOffset=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=this.attributes.type,l=(0,se.CR)(this.getValues(),2),c=l[0],h=l[1],p=s==="range"?n:0,v=[c+p,h+r].sort();i?this.setValues(v):this.innerSetValues(v,!0)},t.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,s=r.height;return n/this.getOrientVal([i,s])},t.prototype.dispatchCustomEvent=function(n,r,i){var s=this;n.on(r,function(l){l.stopPropagation(),s.dispatchEvent(new Vi(i,{detail:l}))})},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},t.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,s=n.deltaY,l=s||i,c=this.getRatio(l);this.setValuesOffset(c,c,!0)}},t.tag="slider",t}(vh),lJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function uJ(e,t,n){const{x:r,y:i,width:s,height:l}=e;if(t==="left")return[r+s-n,i];if(t==="right")return[r,i];if(t==="bottom")return[r,i];if(t==="top")return[r,i+l-n]}const hE=e=>{const{orientation:t,labelFormatter:n,size:r,style:i={},position:s}=e,l=lJ(e,["orientation","labelFormatter","size","style","position"]);return c=>{var h;const{scales:[p],value:v,theme:y,coordinate:b}=c,{bbox:w}=v,{width:R,height:M}=w,{slider:I={}}=y,N=((h=p.getFormatter)===null||h===void 0?void 0:h.call(p))||(ye=>ye+""),z=typeof n=="string"?Ye(n):n,H=t==="horizontal",X=wu(b)&&H,{trackSize:$=I.trackSize}=i,[te,fe]=uJ(w,s,$);return new hk({className:"slider",style:Object.assign({},I,Object.assign(Object.assign({x:te,y:fe,trackLength:H?R:M,orientation:t,formatter:ye=>{const Le=z||N,Ge=X?1-ye:ye,Qe=Lb(p,Ge,!0);return Le(Qe)},sparklineData:fJ(e,c)},i),l))})}};function cJ(e,t){const[n]=Array.from(e.entries()).filter(([i])=>i.type==="line"||i.type==="area").map(([i])=>{const{encode:s,slider:l}=i;if(l!=null&&l.x&&Object.keys(l.x).length===0){const c=h=>{const p=s[h];return[h,p?p.value:void 0]};return Object.fromEntries(t.map(c))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((i,s,l)=>(i[s]=i[s]||[],i[s].push(n.y[l]),i),{});return Object.values(r)}function fJ(e,t){const{markState:n}=t;return jo(e.sparklineData)?e.sparklineData:cJ(n,["y","series"])}hE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const dk=e=>hE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));dk.props=Object.assign(Object.assign({},hE.props),{defaultPosition:"bottom"});const pk=e=>hE(Object.assign(Object.assign({},e),{orientation:"vertical"}));pk.props=Object.assign(Object.assign({},hE.props),{defaultPosition:"left"});var hJ=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var s=r.attributes.value;if(i!==s){var l={detail:{oldValue:i,value:s}};r.dispatchEvent(new Vi("scroll",l)),r.dispatchEvent(new Vi("valuechange",l))}},r.onTrackClick=function(i){var s=r.attributes.slidable;if(s){var l=(0,se.CR)(r.getLocalPosition(),2),c=l[0],h=l[1],p=(0,se.CR)(r.padding,4),v=p[0],y=p[3],b=r.getOrientVal([c+y,h+v]),w=r.getOrientVal(mw(i)),R=(w-b)/r.trackLength;r.setValue(R,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new Vi("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new Vi("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new Vi("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new Vi("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(t.prototype,"padding",{get:function(){var n=this.attributes.padding;return zh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,se.CR)(this.range,2),i=r[0],s=r[1];return(0,d.Z)(n,i,s)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,s=i===void 0?r:i;return s},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=(0,se.CR)(this.padding,4),s=i[0],l=i[1],c=i[2],h=i[3],p=(0,se.CR)(this.getOrientVal([[r,n],[n,r]]),2),v=p[0],y=p[1];return{x:h,y:s,width:+v-(h+l),height:+y-(s+c)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var s=this.availableSpace,l=s.width,c=s.height;return i||this.getOrientVal([c,l])/2},enumerable:!1,configurable:!0}),t.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,s=r.contentLength,l=i/s,c=(0,se.CR)(this.range,2),h=c[0],p=c[1],v=n*(p-h-l);return[v,v+l]},t.prototype.getValue=function(){return this.value},t.prototype.renderSlider=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.orientation,c=r.trackSize,h=r.padding,p=r.slidable,v=Vs(this.attributes,"track"),y=Vs(this.attributes,"thumb"),b=(0,se.pi)((0,se.pi)({x:i,y:s,brushable:!1,orientation:l,padding:h,selectionRadius:this.thumbRadius,showHandle:!1,slidable:p,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:c,values:this.getValues()},wm(v,"track")),wm(y,"selection"));this.slider=us(n).maybeAppendByClassName("scrollbar",function(){return new hk({style:b})}).update(b).node()},t.prototype.render=function(n,r){this.renderSlider(r)},t.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,s=(0,se.CR)(this.range,2),l=s[0],c=s[1];this.slider.setValues(this.getValues((0,d.Z)(n,l,c)),r),this.onValueChange(i)},t.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},t.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},t.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},t.tag="scrollbar",t}(vh),dJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const dE=e=>{const{orientation:t,labelFormatter:n,style:r}=e,i=dJ(e,["orientation","labelFormatter","style"]);return({scales:[s],value:l,theme:c})=>{const{bbox:h}=l,{x:p,y:v,width:y,height:b}=h,{scrollbar:w={}}=c,{ratio:R,range:M}=s.getOptions(),I=t==="horizontal"?y:b,N=I/R,[z,H]=M,X=H>z?0:1;return new hJ({className:"g2-scrollbar",style:Object.assign({},w,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:p,y:v,trackLength:I,value:X}),i),{orientation:t,contentLength:N,viewportLength:I}))})}};dE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const vk=e=>dE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));vk.props=Object.assign(Object.assign({},dE.props),{defaultPosition:"bottom"});const mk=e=>dE(Object.assign(Object.assign({},e),{orientation:"vertical"}));mk.props=Object.assign(Object.assign({},dE.props),{defaultPosition:"left"});const wP=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,w]=wu(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],R=[{transform:`${h} ${w}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${h} ${w}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.01},{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y}];return c.animate(R,Object.assign(Object.assign({},l),e))}},pJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,w]=wu(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],R=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${w}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${w}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return c.animate(R,Object.assign(Object.assign({},l),e))}},gk=(e,t)=>{const{coordinate:r}=t;return Jx.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:Co.NUMBER}),(i,s,l)=>{const[c]=i,h=v=>{const{__data__:y,style:b}=v,{radius:w=0,inset:R=0,fillOpacity:M=1,strokeOpacity:I=1,opacity:N=1}=b,{points:z,y:H,y1:X}=y,$=e1(r,z,[H,X]),{innerRadius:te,outerRadius:fe}=$,ye=Aw().cornerRadius(w).padAngle(R*Math.PI/180),Le=new fd({}),Ge=qe=>(Le.attr({d:ye(qe)}),jS(Le)),Qe=[{scaleInYRadius:te+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:te+1e-4,fillOpacity:M,strokeOpacity:I,opacity:N,offset:.01},{scaleInYRadius:fe,fillOpacity:M,strokeOpacity:I,opacity:N}],gt=v.animate(Qe,Object.assign(Object.assign({},l),e));return gt.onframe=function(){v.style.d=Ge(Object.assign(Object.assign({},$),{outerRadius:Number(v.style.scaleInYRadius)}))},gt.onfinish=function(){v.style.d=Ge(Object.assign(Object.assign({},$),{outerRadius:fe}))},gt},p=v=>{const{style:y}=v,{transform:b="",fillOpacity:w=1,strokeOpacity:R=1,opacity:M=1}=y,[I,N]=wu(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],z=[{transform:`${b} ${N}`.trimStart(),transformOrigin:I,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${b} ${N}`.trimStart(),transformOrigin:I,fillOpacity:w,strokeOpacity:R,opacity:M,offset:.01},{transform:`${b} scale(1, 1)`.trimStart(),transformOrigin:I,fillOpacity:w,strokeOpacity:R,opacity:M}];return v.animate(z,Object.assign(Object.assign({},l),e))};return au(r)?h(c):p(c)}},vJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,w]=wu(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],R=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${w}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${w}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return c.animate(R,Object.assign(Object.assign({},l),e))}},yk=(e,t)=>{Jx.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:Co.NUMBER});const{coordinate:r}=t;return(i,s,l)=>{const[c]=i;if(!au(r))return wP(e,t)(i,s,l);const{__data__:h,style:p}=c,{radius:v=0,inset:y=0,fillOpacity:b=1,strokeOpacity:w=1,opacity:R=1}=p,{points:M,y:I,y1:N}=h,z=Aw().cornerRadius(v).padAngle(y*Math.PI/180),H=e1(r,M,[I,N]),{startAngle:X,endAngle:$}=H,te=[{waveInArcAngle:X+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:X+1e-4,fillOpacity:b,strokeOpacity:w,opacity:R,offset:.01},{waveInArcAngle:$,fillOpacity:b,strokeOpacity:w,opacity:R}],fe=c.animate(te,Object.assign(Object.assign({},l),e));return fe.onframe=function(){c.style.d=z(Object.assign(Object.assign({},H),{endAngle:Number(c.style.waveInArcAngle)}))},fe.onfinish=function(){c.style.d=z(Object.assign(Object.assign({},H),{endAngle:$}))},fe}};yk.props={};const _k=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:s,strokeOpacity:l,opacity:c}];return i.animate(h,Object.assign(Object.assign({},r),e))};_k.props={};const bk=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,h=[{fillOpacity:s,strokeOpacity:l,opacity:c},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(h,Object.assign(Object.assign({},r),e))};bk.props={};const mJ=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:c=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p,offset:.01},{transform:`${l} scale(1)`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p}];return s.animate(y,Object.assign(Object.assign({},i),e))},gJ=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:c=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(1)`.trimStart(),transformOrigin:v},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p,offset:.99},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(y,Object.assign(Object.assign({},i),e))},xk=e=>(t,n,r)=>{var i,s;const[l]=t,c=((s=(i=l).getTotalLength)===null||s===void 0?void 0:s.call(i))||0,h=[{lineDash:[0,c]},{lineDash:[c,0]}];return l.animate(h,Object.assign(Object.assign({},r),e))};xk.props={};const yJ={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},_J={[ii.CIRCLE]:["cx","cy","r"],[ii.ELLIPSE]:["cx","cy","rx","ry"],[ii.RECT]:["x","y","width","height"],[ii.IMAGE]:["x","y","width","height"],[ii.LINE]:["x1","y1","x2","y2"],[ii.POLYLINE]:["points"],[ii.POLYGON]:["points"]};function Kb(e,t,n=!1){const r={};for(const i of t){const s=e.style[i];s?r[i]=s:n&&(r[i]=yJ[i])}return r}const pE=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function AP(e){const{min:t,max:n}=e.getLocalBounds(),[r,i]=t,[s,l]=n,c=l-i,h=s-r;return[r,i,h,c]}function bJ(e){const[t,n,r,i]=e;return`
    M ${t} ${n}
    L ${t+r} ${n}
    L ${t+r} ${n+i}
    L ${t} ${n+i}
    Z
  `}function xJ(e,t){const[n,r,i,s]=AP(e),l=s/i,c=Math.ceil(Math.sqrt(t/l)),h=Math.ceil(t/c),p=[],v=s/h;let y=0,b=t;for(;b>0;){const w=Math.min(b,c),R=i/w;for(let M=0;M<w;M++){const I=n+M*R,N=r+y*v;p.push(bJ([I,N,R,v]))}b-=w,y+=1}return p}function EJ(e="pack"){return typeof e=="function"?e:xJ}function SJ(e,t,n){let{transform:r}=e.style;const{transform:i}=t.style;Ek(t,e);let s=pE;if(e.nodeName===ii.GROUP){const[h,p,v,y]=AP(e),[b,w,R,M]=AP(t),I=h-b,N=p-w,z=v/R,H=y/M;r=`translate(${I}, ${N}) scale(${z}, ${H})`}else s=s.concat(_J[e.nodeName]||[]);const l=[Object.assign({transform:r!=null?r:"none"},Kb(e,s,!0)),Object.assign({transform:i!=null?i:"none"},Kb(t,s,!0))];return t.animate(l,n)}function Ek(e,t){e.__data__=t.__data__,e.className=t.className,e.markType=t.markType,t.parentNode.replaceChild(e,t)}function TJ(e,t){const{nodeName:n}=e;if(n==="path")return e;const r=new fd({style:Object.assign(Object.assign({},Kb(e,pE)),{d:t})});return Ek(r,e),r}function Sk(e,t){const n=e.indexOf(t),r=e.lastIndexOf(t);return n===r}function wJ(e){return!Sk(e,"m")||!Sk(e,"M")}function Tk(e){const t=jS(e);if(t&&!wJ(t))return t}function OP(e,t,n,r){const{nodeName:i}=t,{nodeName:s}=n,l=Tk(t),c=Tk(n);if(i===s&&i!=="path"||(l===void 0||c===void 0))return SJ(t,n,r);const v=TJ(e,l),y=[Object.assign({},Kb(t,pE)),Object.assign({},Kb(n,pE))];if(l!==c){y[0].d=l,y[1].d=c;const b=v.animate(y,r);return b.onfinish=()=>{const w=v.style.d;mb(v,n),v.style.d=w,v.style.transform="none"},v.style.transform="none",b}return null}function AJ(e,t,n,r){e.style.visibility="hidden";const i=r(e,t.length);return t.map((s,l)=>{const c=new fd({style:Object.assign({d:i[l]},Kb(e,pE))});return OP(s,c,s,n)})}function OJ(e,t,n,r){const i=r(t,e.length),{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=t.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:s,strokeOpacity:l,opacity:c}],p=t.animate(h,n);return[...e.map((y,b)=>{const w=new fd({style:{d:i[b],fill:t.style.fill}});return OP(y,y,w,n)}),p]}const wk=e=>(t,n,r)=>{const i=EJ(e.split),s=Object.assign(Object.assign({},r),e),{length:l}=t,{length:c}=n;if(l===1&&c===1||l>1&&c>1){const[h]=t,[p]=n;return OP(h,h,p,s)}if(l===1&&c>1){const[h]=t;return AJ(h,n,s,i)}if(l>1&&c===1){const[h]=n;return OJ(t,h,s,i)}return null};wk.props={};const Ak=(e,t)=>(n,r,i)=>{const[s]=n,{min:[l,c],halfExtents:h}=s.getLocalBounds(),p=h[0]*2,v=h[1]*2,y=new fd({style:{d:`M${l},${c}L${l+p},${c}L${l+p},${c+v}L${l},${c+v}Z`}});return s.appendChild(y),s.style.clipPath=y,wP(e,t)([y],r,i)};Ak.props={};const Ok=(e,t)=>(n,r,i)=>{const[s]=n,{min:[l,c],halfExtents:h}=s.getLocalBounds(),p=h[0]*2,v=h[1]*2,y=new fd({style:{d:`M${l},${c}L${l+p},${c}L${l+p},${c+v}L${l},${c+v}Z`}});return s.appendChild(y),s.style.clipPath=y,gk(e,t)([y],r,i)};Ok.props={};var CJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function RJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,background:s=!1,delay:l=60,scale:c,coordinate:h,emitter:p,state:v={}}){var y;const b=t(e),w=new Set(b),R=ou(b,r),M=Z2(b,n),[I,N]=p6(Object.assign({elements:b,valueof:M,link:i,coordinate:h},go(v.active,"link"))),[z,H,X]=m6(Object.assign({document:e.ownerDocument,scale:c,coordinate:h,background:s,valueof:M},go(v.active,"background"))),$=oi(v,{active:Object.assign({},((y=v.active)===null||y===void 0?void 0:y.offset)&&{transform:(...Zt)=>{const Ct=v.active.offset(...Zt),[,Lt]=Zt;return v6(b[Lt],Ct,h)}})}),{setState:te,removeState:fe,hasState:ye}=wg($,M);let Le;const Ge=Zt=>{const{target:Ct,nativeEvent:Lt=!0}=Zt;if(!w.has(Ct))return;Le&&clearTimeout(Le);const Tn=r(Ct),Fn=R.get(Tn),ir=new Set(Fn);for(const tr of b)ir.has(tr)?ye(tr,"active")||te(tr,"active"):(te(tr,"inactive"),N(tr)),tr!==Ct&&H(tr);z(Ct),I(Fn),Lt&&p.emit("element:highlight",{nativeEvent:Lt,data:{data:n(Ct),group:Fn.map(n)}})},Qe=()=>{Le&&clearTimeout(Le),Le=setTimeout(()=>{gt(),Le=null},l)},gt=(Zt=!0)=>{for(const Ct of b)fe(Ct,"active","inactive"),H(Ct),N(Ct);Zt&&p.emit("element:unhighlight",{nativeEvent:Zt})},qe=Zt=>{const{target:Ct}=Zt;s&&!X(Ct)||!s&&!w.has(Ct)||(l>0?Qe():gt())},lt=()=>{gt()};e.addEventListener("pointerover",Ge),e.addEventListener("pointerout",qe),e.addEventListener("pointerleave",lt);const ft=Zt=>{const{nativeEvent:Ct}=Zt;Ct||gt(!1)},pt=Zt=>{const{nativeEvent:Ct}=Zt;if(Ct)return;const{data:Lt}=Zt.data,Tn=aM(b,Lt,n);Tn&&Ge({target:Tn,nativeEvent:!1})};return p.on("element:highlight",pt),p.on("element:unhighlight",ft),()=>{e.removeEventListener("pointerover",Ge),e.removeEventListener("pointerout",qe),e.removeEventListener("pointerleave",lt),p.off("element:highlight",pt),p.off("element:unhighlight",ft);for(const Zt of b)H(Zt),N(Zt)}}function vA(e){var{delay:t,createGroup:n,background:r=!1,link:i=!1}=e,s=CJ(e,["delay","createGroup","background","link"]);return(l,c,h)=>{const{container:p,view:v,options:y}=l,{scale:b,coordinate:w}=v,R=Mm(p);return RJ(R,Object.assign({elements:Py,datum:r1(v),groupKey:n?n(v):void 0,coordinate:w,scale:b,state:Nb(y,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:i,delay:t,emitter:h},s))}}vA.props={reapplyWhenUpdate:!0};function Ck(e){return vA(Object.assign(Object.assign({},e),{createGroup:oM}))}Ck.props={reapplyWhenUpdate:!0};function Rk(e){return vA(Object.assign(Object.assign({},e),{createGroup:d6}))}Rk.props={reapplyWhenUpdate:!0};var MJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function PJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,single:s=!1,coordinate:l,background:c=!1,scale:h,emitter:p,state:v={}}){var y;const b=t(e),w=new Set(b),R=ou(b,r),M=Z2(b,n),[I,N]=p6(Object.assign({link:i,elements:b,valueof:M,coordinate:l},go(v.selected,"link"))),[z,H]=m6(Object.assign({document:e.ownerDocument,background:c,coordinate:l,scale:h,valueof:M},go(v.selected,"background"))),X=oi(v,{selected:Object.assign({},((y=v.selected)===null||y===void 0?void 0:y.offset)&&{transform:(...lt)=>{const ft=v.selected.offset(...lt),[,pt]=lt;return v6(b[pt],ft,l)}})}),{setState:$,removeState:te,hasState:fe}=wg(X,M),ye=(lt=!0)=>{for(const ft of b)te(ft,"selected","unselected"),N(ft),H(ft);lt&&p.emit("element:unselect",{nativeEvent:!0})},Le=(lt,ft,pt=!0)=>{if(fe(ft,"selected"))ye();else{const Zt=r(ft),Ct=R.get(Zt),Lt=new Set(Ct);for(const Tn of b)Lt.has(Tn)?$(Tn,"selected"):($(Tn,"unselected"),N(Tn)),Tn!==ft&&H(Tn);if(I(Ct),z(ft),!pt)return;p.emit("element:select",Object.assign(Object.assign({},lt),{nativeEvent:pt,data:{data:[n(ft),...Ct.map(n)]}}))}},Ge=(lt,ft,pt=!0)=>{const Zt=r(ft),Ct=R.get(Zt),Lt=new Set(Ct);if(fe(ft,"selected")){if(!b.some(Fn=>!Lt.has(Fn)&&fe(Fn,"selected")))return ye();for(const Fn of Ct)$(Fn,"unselected"),N(Fn),H(Fn)}else{const Tn=Ct.some(Fn=>fe(Fn,"selected"));for(const Fn of b)Lt.has(Fn)?$(Fn,"selected"):fe(Fn,"selected")||$(Fn,"unselected");!Tn&&i&&I(Ct),z(ft)}pt&&p.emit("element:select",Object.assign(Object.assign({},lt),{nativeEvent:pt,data:{data:b.filter(Tn=>fe(Tn,"selected")).map(n)}}))},Qe=lt=>{const{target:ft,nativeEvent:pt=!0}=lt;return w.has(ft)?s?Le(lt,ft,pt):Ge(lt,ft,pt):ye()};e.addEventListener("click",Qe);const gt=lt=>{const{nativeEvent:ft,data:pt}=lt;if(ft)return;const Zt=s?pt.data.slice(0,1):pt.data;for(const Ct of Zt){const Lt=aM(b,Ct,n);Qe({target:Lt,nativeEvent:!1})}},qe=()=>{ye(!1)};return p.on("element:select",gt),p.on("element:unselect",qe),()=>{for(const lt of b)N(lt);e.removeEventListener("click",Qe),p.off("element:select",gt),p.off("element:unselect",qe)}}function mA(e){var{createGroup:t,background:n=!1,link:r=!1}=e,i=MJ(e,["createGroup","background","link"]);return(s,l,c)=>{const{container:h,view:p,options:v}=s,{coordinate:y,scale:b}=p,w=Mm(h);return PJ(w,Object.assign({elements:Py,datum:r1(p),groupKey:t?t(p):void 0,coordinate:y,scale:b,state:Nb(v,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:r,emitter:c},i))}}mA.props={reapplyWhenUpdate:!0};function Mk(e){return mA(Object.assign(Object.assign({},e),{createGroup:oM}))}Mk.props={reapplyWhenUpdate:!0};function Pk(e){return mA(Object.assign(Object.assign({},e),{createGroup:d6}))}Pk.props={reapplyWhenUpdate:!0};var v1=function(e,t,n){var r,i,s,l,c=0;n||(n={});var h=function(){c=n.leading===!1?0:Date.now(),r=null,l=e.apply(i,s),r||(i=s=null)},p=function(){var v=Date.now();!c&&n.leading===!1&&(c=v);var y=t-(v-c);return i=this,s=arguments,y<=0||y>t?(r&&(clearTimeout(r),r=null),c=v,l=e.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(h,y)),l};return p.cancel=function(){clearTimeout(r),c=0,r=i=s=null},p};function IJ(e){const{coordinate:t={}}=e,{transform:n=[]}=t,r=n.find(s=>s.type==="fisheye");if(r)return r;const i={type:"fisheye"};return n.push(i),t.transform=n,e.coordinate=t,i}function LJ({wait:e=30,leading:t,trailing:n=!1}){return r=>{const{options:i,update:s,setState:l,container:c}=r,h=Mm(c),p=v1(v=>{const y=rM(h,v);if(!y){l("fisheye"),s();return}l("fisheye",b=>{const w=oi({},b,{interaction:{tooltip:{preserve:!0}}});for(const N of w.marks)N.animate=!1;const[R,M]=y,I=IJ(w);return I.focusX=R,I.focusY=M,I.visual=!0,w}),s()},e,{leading:t,trailing:n});return h.addEventListener("pointerenter",p),h.addEventListener("pointermove",p),h.addEventListener("pointerleave",p),()=>{h.removeEventListener("pointerenter",p),h.removeEventListener("pointermove",p),h.removeEventListener("pointerleave",p)}}}var DJ=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},NJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function BJ(e){const{transform:t=[]}=e,n=t.find(i=>i.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return t.push(r),e.transform=t,r}function FJ(e,t,n){const[r]=Array.from(e.entries()).filter(([i])=>i.type===t).map(([i])=>{const{encode:s}=i,l=c=>{const h=s[c];return[c,h?h.value:void 0]};return Object.fromEntries(n.map(l))});return r}function Ik(e){var{wait:t=20,leading:n,trailing:r=!1,labelFormatter:i=l=>`${l}`}=e,s=NJ(e,["wait","leading","trailing","labelFormatter"]);return l=>{const{view:c,container:h,update:p,setState:v}=l,{markState:y,scale:b,coordinate:w}=c,R=FJ(y,"line",["x","y","series"]);if(!R)return;const{y:M,x:I,series:N=[]}=R,z=M.map((Zt,Ct)=>Ct),H=Tg(z.map(Zt=>I[Zt])),X=Mm(h),$=h.getElementsByClassName(ca),te=h.getElementsByClassName(Tl),ye=ou(te,Zt=>Zt.__data__.key.split("-")[0]),Le=new hy({style:Object.assign({x1:0,y1:0,x2:0,y2:X.getAttribute("height"),stroke:"black",lineWidth:1},go(s,"rule"))}),Ge=new hf({style:Object.assign({x:0,y:X.getAttribute("height"),text:"",fontSize:10},go(s,"label"))});Le.append(Ge),X.appendChild(Le);const Qe=(Zt,Ct,Lt)=>{const[Tn]=Zt.invert(Lt),Fn=Ct.invert(Tn);return H[xG(H,Fn)]},gt=(Zt,Ct)=>{Le.setAttribute("x1",Zt[0]),Le.setAttribute("x2",Zt[0]),Ge.setAttribute("text",i(Ct))};let qe;const lt=Zt=>DJ(this,void 0,void 0,function*(){const{x:Ct}=b,Lt=Qe(w,Ct,Zt);gt(Zt,Lt),v("chartIndex",Fn=>{const ir=oi({},Fn),tr=ir.marks.find(Zr=>Zr.type==="line"),mi=ls(g2(z,Zr=>ls(Zr,yo=>+M[yo])/h0(Zr,yo=>+M[yo]),Zr=>N[Zr]).values()),Ki=[1/mi,mi];oi(tr,{scale:{y:{domain:Ki}}});const fi=BJ(tr);fi.groupBy="color",fi.basis=(Zr,yo)=>{const po=Zr[Ib(ko=>I[+ko]).center(Zr,Lt)];return yo[po]};for(const Zr of ir.marks)Zr.animate=!1;return ir}),qe=(yield p("chartIndex")).view}),ft=Zt=>{const{scale:Ct,coordinate:Lt}=qe,{x:Tn,y:Fn}=Ct,ir=Qe(Lt,Tn,Zt);gt(Zt,ir);for(const tr of $){const{seriesIndex:Hr,key:mi}=tr.__data__,Ki=Hr[Ib(Oa=>I[+Oa]).center(Hr,ir)],fi=[0,Fn.map(1)],Zr=[0,Fn.map(M[Ki]/M[Hr[0]])],[,yo]=Lt.map(fi),[,po]=Lt.map(Zr),ko=yo-po;tr.setAttribute("transform",`translate(0, ${ko})`);const fa=ye.get(mi)||[];for(const Oa of fa)Oa.setAttribute("dy",ko)}},pt=v1(Zt=>{const Ct=rM(X,Zt);Ct&&ft(Ct)},t,{leading:n,trailing:r});return lt([0,0]),X.addEventListener("pointerenter",pt),X.addEventListener("pointermove",pt),X.addEventListener("pointerleave",pt),()=>{Le.remove(),X.removeEventListener("pointerenter",pt),X.removeEventListener("pointermove",pt),X.removeEventListener("pointerleave",pt)}}}Ik.props={reapplyWhenUpdate:!0};function vE(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function mE(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Lk(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function kJ(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):t[r]===void 0?"":t[r]})}var zJ=kJ;function CP(e){return e===void 0&&(e=""),{CONTAINER:"".concat(e,"tooltip"),TITLE:"".concat(e,"tooltip-title"),LIST:"".concat(e,"tooltip-list"),LIST_ITEM:"".concat(e,"tooltip-list-item"),NAME:"".concat(e,"tooltip-list-item-name"),MARKER:"".concat(e,"tooltip-list-item-marker"),NAME_LABEL:"".concat(e,"tooltip-list-item-name-label"),VALUE:"".concat(e,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(e,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(e,"tooltip-crosshair-y")}}var Dk={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function UJ(e){var t;e===void 0&&(e="");var n=CP(e);return t={},t[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(n.NAME_LABEL)]=(0,se.pi)({flex:1},Dk),t[".".concat(n.VALUE)]=(0,se.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},Dk),t[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t}var jJ=function(e){(0,se.ZT)(t,e);function t(n){var r=this,i,s,l=(s=(i=n.style)===null||i===void 0?void 0:i.template)===null||s===void 0?void 0:s.prefixCls,c=CP(l);return r=e.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(c.CONTAINER,'"></div>'),title:'<div class="'.concat(c.TITLE,'"></div>'),item:'<li class="'.concat(c.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(c.NAME,`">
          <span class="`).concat(c.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(c.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(c.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:UJ(l)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(s,l){var c=s.name,h=c===void 0?"":c,p=s.color,v=p===void 0?"black":p,y=s.index,b=(0,se._T)(s,["name","color","index"]),w=(0,se.pi)({name:h,color:v,index:y!=null?y:l},b);return Lk(zJ(i.item,w))})},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),e.prototype.destroy.call(this)},t.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var s=this.element.style.visibility==="hidden",l=function(){i.attributes.x=n!=null?n:i.attributes.x,i.attributes.y=r!=null?r:i.attributes.y,i.updatePosition()};s?this.closeTransition(l):l()}this.element.style.visibility="visible"},t.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},t.prototype.initShape=function(){var n=this.attributes.template;this.element=Lk(n.container),this.id&&this.element.setAttribute("id",this.id)},t.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:this.element.replaceChildren(n))}},t.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,s=i.template,l=i.title,c=i.enterable,h=i.style,p=i.content,v=CP(s.prefixCls),y=this.element;if(this.element.style.pointerEvents=c?"auto":"none",p)this.renderCustomContent();else{l?(y.innerHTML=s.title,y.getElementsByClassName(v.TITLE)[0].innerHTML=l):(r=(n=y.getElementsByClassName(v.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var b=this.HTMLTooltipItemsElements,w=document.createElement("ul");w.className=v.LIST,w.replaceChildren.apply(w,(0,se.ev)([],(0,se.CR)(b),!1));var R=this.element.querySelector(".".concat(v.LIST));R?R.replaceWith(w):y.appendChild(w)}jj(y,h)},t.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,s=r.offset,l=n||i,c=l.split("-"),h={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},p=this.elementSize,v=p.width,y=p.height,b=[-v/2,-y/2];return c.forEach(function(w){var R=(0,se.CR)(b,2),M=R[0],I=R[1],N=(0,se.CR)(h[w],2),z=N[0],H=N[1];b=[M+(v/2+s[0])*z,I+(y/2+s[1])*H]}),b},t.prototype.setOffsetPosition=function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1],l=this.attributes,c=l.x,h=c===void 0?0:c,p=l.y,v=p===void 0?0:p,y=l.container,b=y.x,w=y.y;this.element.style.left="".concat(+h+b+i,"px"),this.element.style.top="".concat(+v+w+s,"px")},t.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1],l=this.attributes,c=l.x,h=l.y,p=l.bounding,v=l.position;if(!p)return[i,s];var y=this.element,b=y.offsetWidth,w=y.offsetHeight,R=(0,se.CR)([+c+i,+h+s],2),M=R[0],I=R[1],N={left:"right",right:"left",top:"bottom",bottom:"top"},z=p.x,H=p.y,X=p.width,$=p.height,te={left:M<z,right:M+b>z+X,top:I<H,bottom:I+w>H+$},fe=[];v.split("-").forEach(function(Le){te[Le]?fe.push(N[Le]):fe.push(Le)});var ye=fe.join("-");return this.getRelativeOffsetFromCursor(ye)},t.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),s=i.x,l=i.y,c=i.width,h=i.height;return new Zu(s,l,c,h).isPointIn(n,r)}return!1},t.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},t.tag="tooltip",t}(vh),qb=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gA(e,t){return t?typeof t=="string"?document.querySelector(t):t:e.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function VJ(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return{x:n,y:r,width:i-n,height:s-r}}function HJ(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function WJ(e,t,n,r,i,s,l,c={}){const h={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},p=new jJ({className:"tooltip",style:{x:t,y:n,container:l,data:[],bounding:s,position:r,enterable:i,title:"",offset:[10,10],template:{prefixCls:"g2-"},style:oi(h,c)}});return e.appendChild(p.HTMLTooltipElement),p}function Nk({root:e,data:t,x:n,y:r,render:i,event:s,single:l,position:c="right-bottom",enterable:h=!1,css:p,mount:v,bounding:y}){const b=gA(e,v),w=gA(e),R=l?w:e,M=y||VJ(e),I=HJ(w,b),{tooltipElement:N=WJ(b,n,r,c,h,M,I,p)}=R,{items:z,title:H=""}=t;N.update(Object.assign({x:n,y:r,data:z,title:H,position:c,enterable:h},i!==void 0&&{content:i(s,{items:z,title:H})})),R.tooltipElement=N}function Uy({root:e,single:t,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const s=gA(e),l=t?s:e,{tooltipElement:c}=l;c&&c.hide(i==null?void 0:i.clientX,i==null?void 0:i.clientY)}function RP({root:e,single:t}){const n=gA(e),r=t?n:e;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0)}function Bk(e){const{value:t}=e;return Object.assign(Object.assign({},e),{value:t===void 0?"undefined":t})}function GJ(e){const{__data__:t}=e,{title:n,items:r=[]}=t,i=r.filter(cl).map(s=>{var{color:l=Fk(e)}=s,c=qb(s,["color"]);return Object.assign(Object.assign({},c),{color:l})}).map(Bk);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function ZJ(e,t){const{color:n,series:r,facet:i=!1}=e,{color:s,series:l}=t,c=h=>h&&h.invert&&!(h instanceof Fy)&&!(h instanceof N2);if(c(r))return r.clone().invert(l);if(l&&r instanceof Fy&&r.invert(l)!==s&&!i)return r.invert(l);if(c(n)){const h=n.invert(s);return Array.isArray(h)?null:h}return null}function Fk(e){const t=e.getAttribute("fill"),n=e.getAttribute("stroke"),{__data__:r}=e,{color:i=t&&t!=="transparent"?t:n}=r;return i}function kk(e,t=n=>n){const n=new Map(e.map(r=>[t(r),r]));return Array.from(n.values())}function zk(e,t,n,r=e.map(s=>s.__data__),i={}){const s=h=>h instanceof Date?+h:h,l=kk(r.map(h=>h.title),s).filter(cl),c=r.flatMap((h,p)=>{const v=e[p],{items:y=[],title:b}=h,w=y.filter(cl),R=n!==void 0?n:y.length<=1;return w.map(M=>{var{color:I=Fk(v)||i.color,name:N}=M,z=qb(M,["color","name"]);const H=ZJ(t,h),X=R?H||N:N||H;return Object.assign(Object.assign({},z),{color:I,name:X||b})})}).map(Bk);return Object.assign(Object.assign({},l.length>0&&{title:l.join(",")}),{items:kk(c,h=>`(${s(h.name)}, ${s(h.value)}, ${s(h.color)})`)})}function XJ(e,t,n,r){var{plotWidth:i,plotHeight:s,mainWidth:l,mainHeight:c,startX:h,startY:p,transposed:v,polar:y,insetLeft:b,insetTop:w}=r,R=qb(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const M=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},R),I=(te,fe,ye)=>{const Le=new G0({style:Object.assign({cx:te,cy:fe,r:ye},M)});return e.appendChild(Le),Le},N=(te,fe,ye,Le)=>{const Ge=new hy({style:Object.assign({x1:te,x2:fe,y1:ye,y2:Le},M)});return e.appendChild(Ge),Ge},H=((te,fe)=>{if(fe.length===1)return fe[0];const ye=fe.map(Ge=>Fu(Ge,te)),Le=vE(ye,Ge=>Ge);return fe[Le]})(n,t),X=()=>v?[h+H[0],h+H[0],p,p+s]:[h,h+i,H[1]+p,H[1]+p],$=()=>{const te=h+b+l/2,fe=p+w+c/2,ye=Fu([te,fe],H);return[te,fe,ye]};if(y){const[te,fe,ye]=$(),Le=e.ruleX||I(te,fe,ye);Le.style.cx=te,Le.style.cy=fe,Le.style.r=ye,e.ruleX=Le}else{const[te,fe,ye,Le]=X(),Ge=e.ruleX||N(te,fe,ye,Le);Ge.style.x1=te,Ge.style.x2=fe,Ge.style.y1=ye,Ge.style.y2=Le,e.ruleX=Ge}}function $J(e,t,n){var{plotWidth:r,plotHeight:i,mainWidth:s,mainHeight:l,startX:c,startY:h,transposed:p,polar:v,insetLeft:y,insetTop:b}=n,w=qb(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const R=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},w),M=t.map(Le=>Le[1]),I=t.map(Le=>Le[0]),N=mE(M),z=mE(I),H=()=>{if(v){const Le=Math.min(s,l)/2,Ge=c+y+s/2,Qe=h+b+l/2,gt=Y0(Ic([z,N],[Ge,Qe])),qe=Ge+Le*Math.cos(gt),lt=Qe+Le*Math.sin(gt);return[Ge,qe,Qe,lt]}return p?[c,c+r,N+h,N+h]:[z+c,z+c,h,h+i]},[X,$,te,fe]=H(),ye=()=>{const Le=new hy({style:Object.assign({x1:X,x2:$,y1:te,y2:fe},R)});return e.appendChild(Le),Le};if(I.length>0){const Le=e.ruleY||ye();Le.style.x1=X,Le.style.x2=$,Le.style.y1=te,Le.style.y2=fe,e.ruleY=Le}}function Uk(e){e.ruleY&&(e.ruleY.remove(),e.ruleY=void 0)}function jk(e){e.ruleX&&(e.ruleX.remove(),e.ruleX=void 0)}function YJ(e,{data:t,style:n,theme:r}){e.markers&&e.markers.forEach(s=>s.remove());const i=t.filter(s=>{const[{x:l,y:c}]=s;return cl(l)&&cl(c)}).map(s=>{const[{color:l,element:c},h]=s,p=l||c.style.fill||c.style.stroke||r.color;return new G0({style:Object.assign({cx:h[0],cy:h[1],fill:p,r:4,stroke:"#fff",lineWidth:2},n)})});for(const s of i)e.appendChild(s);e.markers=i}function Vk(e){e.markers&&(e.markers.forEach(t=>t.remove()),e.markers=[])}function Hk(e,t){return Array.from(e.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[t]})}function Og(e,t){return e===void 0?t:e}function Wk(e){const{title:t,items:n}=e;return n.length===0&&t===void 0}function KJ(e){return Array.from(e.values()).some(t=>{var n;return((n=t.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&t.tooltip})}function qJ(e){return Pw(e,t=>t.classList?t.classList.includes("element"):!1)}function Gk(e,t){var{elements:n,sort:r,filter:i,scale:s,coordinate:l,crosshairs:c,crosshairsX:h,crosshairsY:p,render:v,groupName:y,emitter:b,wait:w=50,leading:R=!0,trailing:M=!1,startX:I=0,startY:N=0,body:z=!0,single:H=!0,position:X,enterable:$,mount:te,bounding:fe,theme:ye,disableNative:Le=!1,marker:Ge=!0,preserve:Qe=!1,style:gt={},css:qe={}}=t,lt=qb(t,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","disableNative","marker","preserve","style","css"]);const ft=n(e),pt=wu(l),Zt=au(l),Ct=oi(gt,lt),{innerWidth:Lt,innerHeight:Tn,width:Fn,height:ir,insetLeft:tr,insetTop:Hr}=l.getOptions(),mi=[],Ki=[];for(const Ma of ft){const{__data__:Pa}=Ma,{seriesX:ll,title:cs,items:_s}=Pa;ll?mi.push(Ma):(cs||_s)&&Ki.push(Ma)}const Zr=!!(pt?s.y:s.x).getBandWidth&&Ki.length>0;mi.sort((Ma,Pa)=>{const ll=pt?0:1,cs=_s=>_s.getBounds().min[ll];return pt?cs(Pa)-cs(Ma):cs(Ma)-cs(Pa)});const yo=Ma=>{const Pa=pt?1:0,{min:ll,max:cs}=Ma.getLocalBounds();return Tg([ll[Pa],cs[Pa]])};Ki.sort((Ma,Pa)=>{const[ll,cs]=yo(Ma),[_s,xl]=yo(Pa),Au=(ll+cs)/2,vf=(_s+xl)/2;return pt?vf-Au:Au-vf});const po=new Map(mi.map(Ma=>{const{__data__:Pa}=Ma,{seriesX:ll}=Pa,cs=ll.map((xl,Au)=>Au),_s=Tg(cs,xl=>ll[+xl]);return[Ma,[_s,ll]]})),{x:ko}=s,fa=ko!=null&&ko.getBandWidth?ko.getBandWidth()/2:0,Oa=Ma=>{const[Pa]=l.invert(Ma);return Pa-fa},Na=(Ma,Pa,ll)=>{const cs=Oa(Ma),_s=ll.filter(cl),[xl,Au]=Tg([_s[0],_s[_s.length-1]]),vf=xl===Au;if(!Zr&&(cs<xl||cs>Au)&&!vf)return null;const jh=Ib(dx=>ll[+dx]).center,rv=jh(Pa,cs);return Pa[rv]},ks=(Ma,Pa)=>{const cs=Ma[pt?1:0],_s=Pa.filter(vf=>{const[jh,rv]=yo(vf);return cs>=jh&&cs<=rv});if(!Zr||_s.length>0)return _s;const xl=Ib(vf=>{const[jh,rv]=yo(vf);return(jh+rv)/2}).center,Au=xl(Pa,cs);return[Pa[Au]].filter(cl)},Kl=(Ma,Pa)=>{const{__data__:ll}=Ma;return Object.fromEntries(Object.entries(ll).filter(([cs])=>cs.startsWith("series")&&cs!=="series").map(([cs,_s])=>{const xl=_s[Pa];return[b2(cs.replace("series","")),xl]}))},Wa=v1(Ma=>{const Pa=rM(e,Ma);if(!Pa)return;const ll=h6(e),cs=ll.min[0],_s=ll.min[1],xl=[Pa[0]-I,Pa[1]-N];if(!xl)return;const Au=ks(xl,Ki),vf=[],jh=[];for(const mf of mi){const[QE,R5]=po.get(mf),JE=Na(xl,QE,R5);if(JE!==null){vf.push(mf);const _O=Kl(mf,JE),{x:xde,y:Ede}=_O,Sde=l.map([(xde||0)+fa,Ede||0]);jh.push([Object.assign(Object.assign({},_O),{element:mf}),Sde])}}const rv=Array.from(new Set(jh.map(mf=>mf[0].x))),dx=rv[vE(rv,mf=>Math.abs(mf-Oa(xl)))],KE=jh.filter(mf=>mf[0].x===dx),C5=[...KE.map(mf=>mf[0]),...Au.map(mf=>mf.__data__)],Ej=[...vf,...Au],qE=zk(Ej,s,y,C5,ye);if(r&&qE.items.sort((mf,QE)=>r(mf)-r(QE)),i&&(qE.items=qE.items.filter(i)),Ej.length===0||Wk(qE)){Os(Ma);return}if(z&&Nk({root:e,data:qE,x:Pa[0]+cs,y:Pa[1]+_s,render:v,event:Ma,single:H,position:X,enterable:$,mount:te,bounding:fe,css:qe}),c||h||p){const mf=go(Ct,"crosshairs"),QE=Object.assign(Object.assign({},mf),go(Ct,"crosshairsX")),R5=Object.assign(Object.assign({},mf),go(Ct,"crosshairsY")),JE=KE.map(_O=>_O[1]);h&&XJ(e,JE,Pa,Object.assign(Object.assign({},QE),{plotWidth:Lt,plotHeight:Tn,mainWidth:Fn,mainHeight:ir,insetLeft:tr,insetTop:Hr,startX:I,startY:N,transposed:pt,polar:Zt})),p&&$J(e,JE,Object.assign(Object.assign({},R5),{plotWidth:Lt,plotHeight:Tn,mainWidth:Fn,mainHeight:ir,insetLeft:tr,insetTop:Hr,startX:I,startY:N,transposed:pt,polar:Zt}))}if(Ge){const mf=go(Ct,"marker");YJ(e,{data:KE,style:mf,theme:ye})}b.emit("tooltip:show",Object.assign(Object.assign({},Ma),{nativeEvent:!0,data:{data:{x:Lb(s.x,Oa(xl),!0)}}}))},w,{leading:R,trailing:M}),Os=Ma=>{Uy({root:e,single:H,emitter:b,event:Ma}),c&&(Uk(e),jk(e)),Ge&&Vk(e)},Uu=()=>{RP({root:e,single:H}),c&&(Uk(e),jk(e)),Ge&&Vk(e)},Kc=({nativeEvent:Ma,data:Pa})=>{if(Ma)return;const{x:ll}=Pa.data,{x:cs}=s,_s=cs.map(ll),[xl,Au]=l.map([_s,.5]),{min:[vf,jh]}=e.getRenderBounds();Wa({offsetX:xl+vf,offsetY:Au+jh})},Dp=()=>{Uy({root:e,single:H,emitter:b,nativeEvent:!1})},qc=()=>{op(),Uu()},gh=()=>{Bc()},Bc=()=>{Le||(e.addEventListener("pointerenter",Wa),e.addEventListener("pointermove",Wa),e.addEventListener("pointerleave",Os))},op=()=>{Le||(e.removeEventListener("pointerenter",Wa),e.removeEventListener("pointermove",Wa),e.removeEventListener("pointerleave",Os))};return Bc(),b.on("tooltip:show",Kc),b.on("tooltip:hide",Dp),b.on("tooltip:disable",qc),b.on("tooltip:enable",gh),()=>{op(),b.off("tooltip:show",Kc),b.off("tooltip:hide",Dp),b.off("tooltip:disable",qc),b.off("tooltip:enable",gh),Qe?Uy({root:e,single:H,emitter:b,nativeEvent:!1}):Uu()}}function QJ(e,{elements:t,scale:n,render:r,groupName:i,sort:s,filter:l,emitter:c,wait:h=50,leading:p=!0,trailing:v=!1,groupKey:y=Le=>Le,single:b=!0,position:w,enterable:R,datum:M,view:I,mount:N,bounding:z,theme:H,shared:X=!1,body:$=!0,disableNative:te=!1,preserve:fe=!1,css:ye={}}){const Le=t(e),Ge=ou(Le,y),Qe=v1(Lt=>{const{target:Tn}=Lt,Fn=qJ(Tn);if(!Fn){Uy({root:e,single:b,emitter:c,event:Lt});return}const ir=y(Fn),tr=Ge.get(ir);if(!tr)return;const Hr=tr.length===1&&!X?GJ(tr[0]):zk(tr,n,i,void 0,H);if(s&&Hr.items.sort((fi,Zr)=>s(fi)-s(Zr)),l&&(Hr.items=Hr.items.filter(l)),Wk(Hr)){Uy({root:e,single:b,emitter:c,event:Lt});return}const{offsetX:mi,offsetY:Ki}=Lt;$&&Nk({root:e,data:Hr,x:mi,y:Ki,render:r,event:Lt,single:b,position:w,enterable:R,mount:N,bounding:z,css:ye}),c.emit("tooltip:show",Object.assign(Object.assign({},Lt),{nativeEvent:!0,data:{data:y6(Fn,I)}}))},h,{leading:p,trailing:v}),gt=Lt=>{Uy({root:e,single:b,emitter:c,event:Lt})},qe=()=>{te||(e.addEventListener("pointermove",Qe),e.addEventListener("pointerleave",gt))},lt=()=>{te||(e.removeEventListener("pointermove",Qe),e.removeEventListener("pointerleave",gt))},ft=({nativeEvent:Lt,data:Tn})=>{if(Lt)return;const Fn=aM(Le,Tn.data,M);if(!Fn)return;const ir=Fn.getBBox(),{x:tr,y:Hr,width:mi,height:Ki}=ir;Qe({target:Fn,offsetX:tr+mi/2,offsetY:Hr+Ki/2})},pt=({nativeEvent:Lt}={})=>{Lt||Uy({root:e,single:b,emitter:c,nativeEvent:!1})},Zt=()=>{lt(),RP({root:e,single:b})},Ct=()=>{qe()};return c.on("tooltip:show",ft),c.on("tooltip:hide",pt),c.on("tooltip:enable",Ct),c.on("tooltip:disable",Zt),qe(),()=>{lt(),c.off("tooltip:show",ft),c.off("tooltip:hide",pt),fe?Uy({root:e,single:b,emitter:c,nativeEvent:!1}):RP({root:e,single:b})}}function Zk(e){const{shared:t,crosshairs:n,crosshairsX:r,crosshairsY:i,series:s,name:l,item:c=()=>({}),facet:h=!1}=e,p=qb(e,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(v,y,b)=>{const{container:w,view:R}=v,{scale:M,markState:I,coordinate:N,theme:z}=R,H=Hk(I,"seriesTooltip"),X=Hk(I,"crosshairs"),$=Mm(w),te=Og(s,H),fe=Og(n,X);if(te&&KJ(I)&&!h)return Gk($,Object.assign(Object.assign({},p),{theme:z,elements:Py,scale:M,coordinate:N,crosshairs:fe,crosshairsX:Og(Og(r,n),!1),crosshairsY:Og(i,fe),item:c,emitter:b}));if(te&&h){const ye=y.filter(lt=>lt!==v&&lt.options.parentKey===v.options.key),Le=f6(v,y),Ge=ye[0].view.scale,Qe=$.getBounds(),gt=Qe.min[0],qe=Qe.min[1];return Object.assign(Ge,{facet:!0}),Gk($.parentNode.parentNode,Object.assign(Object.assign({},p),{theme:z,elements:()=>Le,scale:Ge,coordinate:N,crosshairs:Og(n,X),crosshairsX:Og(Og(r,n),!1),crosshairsY:Og(i,fe),item:c,startX:gt,startY:qe,emitter:b}))}return QJ($,Object.assign(Object.assign({},p),{datum:r1(R),elements:Py,scale:M,coordinate:N,groupKey:t?oM(R):void 0,item:c,emitter:b,view:R,theme:z,shared:t}))}}Zk.props={reapplyWhenUpdate:!0};var yA=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Xk="legend-category",JJ="legend-continuous",eee="items-item",tee="legend-category-item-marker",nee="legend-category-item-label";function $k(e){return e.getElementsByClassName(tee)[0]}function Yk(e){return e.getElementsByClassName(nee)[0]}function Kk(e){return e.getElementsByClassName(eee)}function MP(e){return e.getElementsByClassName(Xk)}function qk(e){return e.getElementsByClassName(JJ)}function ree(e,t){[...MP(e),...qk(e)].forEach(r=>{t(r,i=>i)})}function PP(e){let t=e.parentNode;for(;t&&!t.__data__;)t=t.parentNode;return t.__data__}function vpe(e){let t=e;for(;t&&!t.attr("class").startsWith("legend");)t=t.children[0];return t.attributes}function iee(e,{legends:t,marker:n,label:r,datum:i,filter:s,emitter:l,channel:c,state:h={}}){const p=new Map,v=new Map,y=new Map,{unselected:b={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=h,w={unselected:go(b,"marker")},R={unselected:go(b,"label")},{setState:M,removeState:I}=wg(w,void 0),{setState:N,removeState:z}=wg(R,void 0),H=Array.from(t(e));let X=H.map(i);const $=()=>{for(const ye of H){const Le=i(ye),Ge=n(ye),Qe=r(ye);X.includes(Le)?(I(Ge,"unselected"),z(Qe,"unselected")):(M(Ge,"unselected"),N(Qe,"unselected"))}};for(const ye of H){const Le=()=>{Iy(e,"pointer")},Ge=()=>{kG(e)},Qe=gt=>yA(this,void 0,void 0,function*(){const qe=i(ye),lt=X.indexOf(qe);lt===-1?X.push(qe):X.splice(lt,1),X.length===0&&X.push(...H.map(i)),yield s(X),$();const{nativeEvent:ft=!0}=gt;ft&&(X.length===H.length?l.emit("legend:reset",{nativeEvent:ft}):l.emit("legend:filter",Object.assign(Object.assign({},gt),{nativeEvent:ft,data:{channel:c,values:X}})))});ye.addEventListener("click",Qe),ye.addEventListener("pointerenter",Le),ye.addEventListener("pointerout",Ge),p.set(ye,Qe),v.set(ye,Le),y.set(ye,Ge)}const te=ye=>yA(this,void 0,void 0,function*(){const{nativeEvent:Le}=ye;if(Le)return;const{data:Ge}=ye,{channel:Qe,values:gt}=Ge;Qe===c&&(X=gt,yield s(X),$())}),fe=ye=>yA(this,void 0,void 0,function*(){const{nativeEvent:Le}=ye;Le||(X=H.map(i),yield s(X),$())});return l.on("legend:filter",te),l.on("legend:reset",fe),()=>{for(const ye of H)ye.removeEventListener("click",p.get(ye)),ye.removeEventListener("pointerenter",v.get(ye)),ye.removeEventListener("pointerout",y.get(ye)),l.off("legend:filter",te),l.off("legend:reset",fe)}}function oee(e,{legend:t,filter:n,emitter:r,channel:i}){const s=({detail:{value:l}})=>{n(l),r.emit({nativeEvent:!0,data:{channel:i,values:l}})};return t.addEventListener("valuechange",s),()=>{t.removeEventListener("valuechange",s)}}function Qk(e,{legend:t,channel:n,value:r,ordinal:i,channels:s,allChannels:l,facet:c=!1}){return yA(this,void 0,void 0,function*(){const{view:h,update:p,setState:v}=e;v(t,y=>{const{marks:b}=y,w=b.map(R=>{if(R.type==="legends")return R;const{transform:M=[]}=R,I=M.findIndex(({type:H})=>H.startsWith("group")||H.startsWith("bin")),N=[...M];N.splice(I+1,0,{type:"filter",[n]:{value:r,ordinal:i}});const z=Object.fromEntries(s.map(H=>[H,{domain:h.scale[H].getOptions().domain}]));return oi({},R,Object.assign(Object.assign({transform:N,scale:z},!i&&{animate:!1}),{legend:c?!1:Object.fromEntries(l.map(H=>[H,{preserve:!0}]))}))});return Object.assign(Object.assign({},y),{marks:w})}),yield p()})}function aee(e,t){for(const n of e)Qk(n,Object.assign(Object.assign({},t),{facet:!0}))}function see(){return(e,t,n)=>{const{container:r}=e,i=t.filter(y=>y!==e),s=i.length>0,l=y=>PP(y).scales.map(b=>b.name),c=[...MP(r),...qk(r)],h=c.flatMap(l),p=s?v1(aee,50,{trailing:!0}):v1(Qk,50,{trailing:!0}),v=c.map(y=>{const{name:b,domain:w}=PP(y).scales[0],R=l(y),M={legend:y,channel:b,channels:R,allChannels:h};return y.className===Xk?iee(r,{legends:Kk,marker:$k,label:Yk,datum:I=>{const{__data__:N}=I,{index:z}=N;return w[z]},filter:I=>{const N=Object.assign(Object.assign({},M),{value:I,ordinal:!0});p(s?i:e,N)},state:y.attributes.state,channel:b,emitter:n}):oee(r,{legend:y,filter:I=>{const N=Object.assign(Object.assign({},M),{value:I,ordinal:!1});p(s?i:e,N)},emitter:n,channel:b})});return()=>{v.forEach(y=>y())}}}function lee(){return(e,t,n)=>{const{container:r,view:i,options:s}=e,l=MP(r),c=Py(r),h=w=>PP(w).scales[0].name,p=w=>{const{scale:{[w]:R}}=i;return R},v=Nb(s,["active","inactive"]),y=Z2(c,r1(i)),b=[];for(const w of l){const R=Tn=>{const{data:Fn}=w.attributes,{__data__:ir}=Tn,{index:tr}=ir;return Fn[tr].label},M=h(w),I=Kk(w),N=p(M),z=ou(c,Tn=>N.invert(Tn.__data__[M])),{state:H={}}=w.attributes,{inactive:X={}}=H,{setState:$,removeState:te}=wg(v,y),fe={inactive:go(X,"marker")},ye={inactive:go(X,"label")},{setState:Le,removeState:Ge}=wg(fe),{setState:Qe,removeState:gt}=wg(ye),qe=Tn=>{for(const Fn of I){const ir=$k(Fn),tr=Yk(Fn);Fn===Tn||Tn===null?(Ge(ir,"inactive"),gt(tr,"inactive")):(Le(ir,"inactive"),Qe(tr,"inactive"))}},lt=(Tn,Fn)=>{const ir=R(Fn),tr=new Set(z.get(ir));for(const mi of c)tr.has(mi)?$(mi,"active"):$(mi,"inactive");qe(Fn);const{nativeEvent:Hr=!0}=Tn;Hr&&n.emit("legend:highlight",Object.assign(Object.assign({},Tn),{nativeEvent:Hr,data:{channel:M,value:ir}}))},ft=new Map;for(const Tn of I){const Fn=ir=>{lt(ir,Tn)};Tn.addEventListener("pointerover",Fn),ft.set(Tn,Fn)}const pt=Tn=>{for(const ir of c)te(ir,"inactive","active");qe(null);const{nativeEvent:Fn=!0}=Tn;Fn&&n.emit("legend:unhighlight",{nativeEvent:Fn})},Zt=Tn=>{const{nativeEvent:Fn,data:ir}=Tn;if(Fn)return;const{channel:tr,value:Hr}=ir;if(tr!==M)return;const mi=I.find(Ki=>R(Ki)===Hr);mi&&lt({nativeEvent:!1},mi)},Ct=Tn=>{const{nativeEvent:Fn}=Tn;Fn||pt({nativeEvent:!1})};w.addEventListener("pointerleave",pt),n.on("legend:highlight",Zt),n.on("legend:unhighlight",Ct);const Lt=()=>{w.removeEventListener(pt),n.off("legend:highlight",Zt),n.off("legend:unhighlight",Ct);for(const[Tn,Fn]of ft)Tn.removeEventListener(Fn)};b.push(Lt)}return()=>b.forEach(w=>w())}}var J0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function uee(e,t){const[n,r,i,s]=e,[l,c,h,p]=t;return!(l>i||h<n||c>s||p<r)}function cee(e,t,n,r,i){const[s,l,c,h]=i;return[Math.max(s,Math.min(e,n)),Math.max(l,Math.min(t,r)),Math.min(c,Math.max(e,n)),Math.min(h,Math.max(t,r))]}function fee(e){const{width:t,height:n}=e.getBBox();return[0,0,t,n]}function Cg(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}const Jk=Mb(e=>{const t=e.attributes,{x:n,y:r,width:i,height:s,class:l,renders:c={},handleSize:h=10,document:p}=t,v=J0(t,["x","y","width","height","class","renders","handleSize","document"]);if(!p||i===void 0||s===void 0||n===void 0||r===void 0)return;const y=h/2,b=(Hr,mi,Ki)=>{Hr.handle||(Hr.handle=Ki.createElement("rect"),Hr.append(Hr.handle));const{handle:fi}=Hr;return fi.attr(mi),fi},w=go(Sy(v,"handleNW","handleNE"),"handleN"),{render:R=b}=w,M=J0(w,["render"]),I=go(v,"handleE"),{render:N=b}=I,z=J0(I,["render"]),H=go(Sy(v,"handleSE","handleSW"),"handleS"),{render:X=b}=H,$=J0(H,["render"]),te=go(v,"handleW"),{render:fe=b}=te,ye=J0(te,["render"]),Le=go(v,"handleNW"),{render:Ge=b}=Le,Qe=J0(Le,["render"]),gt=go(v,"handleNE"),{render:qe=b}=gt,lt=J0(gt,["render"]),ft=go(v,"handleSE"),{render:pt=b}=ft,Zt=J0(ft,["render"]),Ct=go(v,"handleSW"),{render:Lt=b}=Ct,Tn=J0(Ct,["render"]),Fn=(Hr,mi)=>{const{id:Ki}=Hr,fi=mi(Hr,Hr.attributes,p);fi.id=Ki,fi.style.draggable=!0},ir=Hr=>()=>{const mi=Mb(Ki=>Fn(Ki,Hr));return new mi({})},tr=Aa(e).attr("className",l).style("transform",`translate(${n}, ${r})`).style("draggable",!0);tr.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(Cg,Object.assign(Object.assign({width:i,height:s},Sy(v,"handle")),{transform:void 0})),tr.maybeAppend("handle-n",ir(R)).style("x",y).style("y",-y).style("width",i-h).style("height",h).style("fill","transparent").call(Cg,M),tr.maybeAppend("handle-e",ir(N)).style("x",i-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(Cg,z),tr.maybeAppend("handle-s",ir(X)).style("x",y).style("y",s-y).style("width",i-h).style("height",h).style("fill","transparent").call(Cg,$),tr.maybeAppend("handle-w",ir(fe)).style("x",-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(Cg,ye),tr.maybeAppend("handle-nw",ir(Ge)).style("x",-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(Cg,Qe),tr.maybeAppend("handle-ne",ir(qe)).style("x",i-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(Cg,lt),tr.maybeAppend("handle-se",ir(pt)).style("x",i-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(Cg,Zt),tr.maybeAppend("handle-sw",ir(Lt)).style("x",-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(Cg,Tn)});function IP(e,t){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:s=()=>{},brushupdated:l=()=>{},extent:c=fee(e),brushRegion:h=(fi,Zr,yo,po,ko)=>[fi,Zr,yo,po],reverse:p=!1,fill:v="#777",fillOpacity:y="0.3",stroke:b="#fff",selectedHandles:w=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=t,R=J0(t,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let M=null,I=null,N=null,z=null,H=null,X=!1;const[$,te,fe,ye]=c;Iy(e,"crosshair"),e.style.draggable=!0;const Le=(fi,Zr,yo)=>{if(s(yo),z&&z.remove(),H&&H.remove(),M=[fi,Zr],p)return Ge();Qe()},Ge=()=>{H=new fd({style:Object.assign(Object.assign({},R),{fill:v,fillOpacity:y,stroke:b,pointerEvents:"none"})}),z=new Jk({style:{x:0,y:0,width:0,height:0,draggable:!0,document:e.ownerDocument},className:"mask"}),e.appendChild(H),e.appendChild(z)},Qe=()=>{z=new Jk({style:Object.assign(Object.assign({document:e.ownerDocument,x:0,y:0},R),{fill:v,fillOpacity:y,stroke:b,draggable:!0}),className:"mask"}),e.appendChild(z)},gt=(fi=!0)=>{z&&z.remove(),H&&H.remove(),M=null,I=null,N=null,X=!1,z=null,H=null,r(fi)},qe=(fi,Zr,yo=!0)=>{const[po,ko,fa,Oa]=cee(fi[0],fi[1],Zr[0],Zr[1],c),[Na,ks,Kl,Wa]=h(po,ko,fa,Oa,c);return p?ft(Na,ks,Kl,Wa):lt(Na,ks,Kl,Wa),n(Na,ks,Kl,Wa,yo),[Na,ks,Kl,Wa]},lt=(fi,Zr,yo,po)=>{z.style.x=fi,z.style.y=Zr,z.style.width=yo-fi,z.style.height=po-Zr},ft=(fi,Zr,yo,po)=>{H.style.d=`
      M${$},${te}L${fe},${te}L${fe},${ye}L${$},${ye}Z
      M${fi},${Zr}L${fi},${po}L${yo},${po}L${yo},${Zr}Z
    `,z.style.x=fi,z.style.y=Zr,z.style.width=yo-fi,z.style.height=po-Zr},pt=fi=>{const Zr=(ks,Kl,Wa,Os,Uu)=>ks+Kl<Os?Os-Kl:ks+Wa>Uu?Uu-Wa:ks,yo=fi[0]-N[0],po=fi[1]-N[1],ko=Zr(yo,M[0],I[0],$,fe),fa=Zr(po,M[1],I[1],te,ye),Oa=[M[0]+ko,M[1]+fa],Na=[I[0]+ko,I[1]+fa];qe(Oa,Na)},Zt={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},Ct=fi=>Tn(fi)||Lt(fi),Lt=fi=>{const{id:Zr}=fi;return w.indexOf(Zr)===-1?!1:new Set(Object.keys(Zt)).has(Zr)},Tn=fi=>fi===z.getElementById("selection"),Fn=fi=>{const{target:Zr}=fi,[yo,po]=iM(e,fi);if(!z||!Ct(Zr)){Le(yo,po,fi),X=!0;return}Ct(Zr)&&(N=[yo,po])},ir=fi=>{const{target:Zr}=fi,yo=iM(e,fi);if(!M)return;if(!N)return qe(M,yo);if(Tn(Zr))return pt(yo);const[po,ko]=[yo[0]-N[0],yo[1]-N[1]],{id:fa}=Zr;if(Zt[fa]){const[Oa,Na,ks,Kl]=Zt[fa].vector;return qe([M[0]+po*Oa,M[1]+ko*Na],[I[0]+po*ks,I[1]+ko*Kl])}},tr=fi=>{if(N){N=null;const{x:fa,y:Oa,width:Na,height:ks}=z.style;M=[fa,Oa],I=[fa+Na,Oa+ks],l(fa,Oa,fa+Na,Oa+ks,fi);return}I=iM(e,fi);const[Zr,yo,po,ko]=qe(M,I);X=!1,i(Zr,yo,po,ko,fi)},Hr=fi=>{const{target:Zr}=fi;z&&!Ct(Zr)&&gt()},mi=fi=>{const{target:Zr}=fi;!z||!Ct(Zr)||X?Iy(e,"crosshair"):Tn(Zr)?Iy(e,"move"):Lt(Zr)&&Iy(e,Zt[Zr.id].cursor)},Ki=()=>{Iy(e,"default")};return e.addEventListener("dragstart",Fn),e.addEventListener("drag",ir),e.addEventListener("dragend",tr),e.addEventListener("click",Hr),e.addEventListener("pointermove",mi),e.addEventListener("pointerleave",Ki),{mask:z,move(fi,Zr,yo,po,ko=!0){z||Le(fi,Zr,{}),M=[fi,Zr],I=[yo,po],qe([fi,Zr],[yo,po],ko)},remove(fi=!0){z&&gt(fi)},destroy(){z&&gt(!1),Iy(e,"default"),e.removeEventListener("dragstart",Fn),e.removeEventListener("drag",ir),e.removeEventListener("dragend",tr),e.removeEventListener("click",Hr),e.removeEventListener("pointermove",mi),e.removeEventListener("pointerleave",Ki)}}}function LP(e,t,n){return t.filter(r=>{if(r===e)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(s=>s.brushKey===n)})}function hee(e,t,n){return LP(e,t,n).map(r=>Mm(r.container))}function dee(e,t,n){return LP(e,t,n).map(r=>r.options)}function e7(e,t){var{elements:n,selectedHandles:r,siblings:i=ir=>[],datum:s,brushRegion:l,extent:c,reverse:h,scale:p,coordinate:v,series:y=!1,key:b=ir=>ir,bboxOf:w=ir=>{const{x:tr,y:Hr,width:mi,height:Ki}=ir.style;return{x:tr,y:Hr,width:mi,height:Ki}},state:R={},emitter:M}=t,I=J0(t,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const N=n(e),z=i(e),H=z.flatMap(n),X=Z2(N,s),$=go(I,"mask"),{setState:te,removeState:fe}=wg(R,X),ye=new Map,{width:Le,height:Ge,x:Qe=0,y:gt=0}=w(e),qe=c||[0,0,Le,Ge],lt=()=>{for(const ir of[...N,...H])fe(ir,"active","inactive")},ft=(ir,tr,Hr,mi)=>{var Ki;for(const Zr of z)(Ki=Zr.brush)===null||Ki===void 0||Ki.remove();const fi=new Set;for(const Zr of N){const{min:yo,max:po}=Zr.getLocalBounds(),[ko,fa]=yo,[Oa,Na]=po;uee([ko,fa,Oa,Na],[ir,tr,Hr,mi])?(te(Zr,"active"),fi.add(b(Zr))):te(Zr,"inactive")}for(const Zr of H)fi.has(b(Zr))?te(Zr,"active"):te(Zr,"inactive")},pt=()=>{for(const ir of N)fe(ir,"inactive");for(const ir of ye.values())ir.remove();ye.clear()},Zt=(ir,tr,Hr,mi)=>{const Ki=Zr=>{const yo=Zr.cloneNode();return yo.__data__=Zr.__data__,Zr.parentNode.appendChild(yo),ye.set(Zr,yo),yo},fi=new hd({style:{x:ir+Qe,y:tr+gt,width:Hr-ir,height:mi-tr}});e.appendChild(fi);for(const Zr of N){const yo=ye.get(Zr)||Ki(Zr);yo.style.clipPath=fi,te(Zr,"inactive"),te(yo,"active")}},Ct=IP(e,Object.assign(Object.assign({},$),{extent:qe,brushRegion:l,reverse:h,selectedHandles:r,brushended:ir=>{const tr=y?pt:lt;ir&&M.emit("brush:remove",{nativeEvent:!0}),tr()},brushed:(ir,tr,Hr,mi,Ki)=>{const fi=Ew(ir,tr,Hr,mi,p,v);Ki&&M.emit("brush:highlight",{nativeEvent:!0,data:{selection:fi}}),(y?Zt:ft)(ir,tr,Hr,mi)},brushcreated:(ir,tr,Hr,mi,Ki)=>{const fi=Ew(ir,tr,Hr,mi,p,v);M.emit("brush:end",Object.assign(Object.assign({},Ki),{nativeEvent:!0,data:{selection:fi}}))},brushupdated:(ir,tr,Hr,mi,Ki)=>{const fi=Ew(ir,tr,Hr,mi,p,v);M.emit("brush:end",Object.assign(Object.assign({},Ki),{nativeEvent:!0,data:{selection:fi}}))},brushstarted:ir=>{M.emit("brush:start",ir)}})),Lt=({nativeEvent:ir,data:tr})=>{if(ir)return;const{selection:Hr}=tr,[mi,Ki,fi,Zr]=TG(Hr,p,v);Ct.move(mi,Ki,fi,Zr,!1)};M.on("brush:highlight",Lt);const Tn=({nativeEvent:ir}={})=>{ir||Ct.remove(!1)};M.on("brush:remove",Tn);const Fn=Ct.destroy.bind(Ct);return Ct.destroy=()=>{M.off("brush:highlight",Lt),M.off("brush:remove",Tn),Fn()},Ct}function DP(e){var{facet:t,brushKey:n}=e,r=J0(e,["facet","brushKey"]);return(i,s,l)=>{const{container:c,view:h,options:p}=i,v=Mm(c),y={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},b=["active",["inactive",{opacity:.5}]],{scale:w,coordinate:R}=h;if(t){const I=v.getBounds(),N=I.min[0],z=I.min[1],H=I.max[0],X=I.max[1];return e7(v.parentNode.parentNode,Object.assign(Object.assign({elements:()=>f6(i,s),datum:r1(nM(i,s).map($=>$.view)),brushRegion:($,te,fe,ye)=>[$,te,fe,ye],extent:[N,z,H,X],state:Nb(nM(i,s).map($=>$.options),b),emitter:l,scale:w,coordinate:R,selectedHandles:void 0},y),r))}const M=e7(v,Object.assign(Object.assign({elements:Py,key:I=>I.__data__.key,siblings:()=>hee(i,s,n),datum:r1([h,...LP(i,s,n).map(I=>I.view)]),brushRegion:(I,N,z,H)=>[I,N,z,H],extent:void 0,state:Nb([p,...dee(i,s,n)],b),emitter:l,scale:w,coordinate:R,selectedHandles:void 0},y),r));return v.brush=M,()=>M.destroy()}}function NP(e,t,n,r,i){const[,s,,l]=i;return[e,s,n,l]}function pee(e){return DP(Object.assign(Object.assign({},e),{brushRegion:NP,selectedHandles:["handle-e","handle-w"]}))}function BP(e,t,n,r,i){const[s,,l]=i;return[s,t,l,r]}function vee(e){return DP(Object.assign(Object.assign({},e),{brushRegion:BP,selectedHandles:["handle-n","handle-s"]}))}var FP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const mee="axis",gee="axis-line",yee="axis-main-group",t7="axis-hot-area";function _ee(e){return e.getElementsByClassName(mee)}function n7(e){return e.getElementsByClassName(gee)[0]}function bee(e){return e.getElementsByClassName(yee)[0]}function r7(e){return bee(e).getLocalBounds()}function xee(e,t){var{cross:n,offsetX:r,offsetY:i}=t,s=FP(t,["cross","offsetX","offsetY"]);const l=r7(e),c=n7(e),[h]=c.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,w=(y-p)*2;return{brushRegion:BP,hotZone:new hd({className:t7,style:Object.assign({width:n?w/2:w,transform:`translate(${(n?p:h-w/2).toFixed(2)}, ${v})`,height:b-v},s)}),extent:n?(R,M,I,N)=>[-1/0,M,1/0,N]:(R,M,I,N)=>[Math.floor(p-r),M,Math.ceil(y-r),N]}}function Eee(e,t){var{offsetY:n,offsetX:r,cross:i=!1}=t,s=FP(t,["offsetY","offsetX","cross"]);const l=r7(e),c=n7(e),[,h]=c.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,w=b-v;return{brushRegion:NP,hotZone:new hd({className:t7,style:Object.assign({width:y-p,height:i?w:w*2,transform:`translate(${p}, ${i?v:h-w})`},s)}),extent:i?(R,M,I,N)=>[R,-1/0,I,1/0]:(R,M,I,N)=>[R,Math.floor(v-n),I,Math.ceil(b-n)]}}function See(e,t){var{axes:n,elements:r,points:i,horizontal:s,datum:l,offsetY:c,offsetX:h,reverse:p=!1,state:v={},emitter:y,coordinate:b}=t,w=FP(t,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const R=r(e),M=n(e),I=Z2(R,l),{setState:N,removeState:z}=wg(v,I),H=new Map,X=go(w,"mask"),$=Lt=>Array.from(H.values()).every(([Tn,Fn,ir,tr])=>Lt.some(([Hr,mi])=>Hr>=Tn&&Hr<=ir&&mi>=Fn&&mi<=tr)),te=M.map(Lt=>Lt.attributes.scale),fe=Lt=>Lt.length>2?[Lt[0],Lt[Lt.length-1]]:Lt,ye=new Map,Le=()=>{ye.clear();for(let Lt=0;Lt<M.length;Lt++){const Tn=te[Lt],{domain:Fn}=Tn.getOptions();ye.set(Lt,fe(Fn))}};Le();const Ge=(Lt,Tn)=>{const Fn=[];for(const tr of R){const Hr=i(tr);$(Hr)?(N(tr,"active"),Fn.push(tr)):N(tr,"inactive")}if(ye.set(Lt,gt(Fn,Lt)),!Tn)return;const ir=()=>{if(!qe)return Array.from(ye.values());const tr=[];for(const[Hr,mi]of ye){const Ki=te[Hr],{name:fi}=Ki.getOptions();fi==="x"?tr[0]=mi:tr[1]=mi}return tr};y.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:ir()}})},Qe=Lt=>{for(const Tn of R)z(Tn,"active","inactive");Le(),Lt&&y.emit("brushAxis:remove",{nativeEvent:!0})},gt=(Lt,Tn)=>{const Fn=te[Tn],{name:ir}=Fn.getOptions(),tr=Lt.map(Hr=>{const mi=Hr.__data__;return Fn.invert(mi[ir])});return fe(My(Fn,tr))},qe=M.some(s)&&M.some(Lt=>!s(Lt)),lt=[];for(let Lt=0;Lt<M.length;Lt++){const Tn=M[Lt],Fn=s(Tn)?Eee:xee,{hotZone:ir,brushRegion:tr,extent:Hr}=Fn(Tn,{offsetY:c,offsetX:h,cross:qe,zIndex:999,fill:"transparent"});Tn.parentNode.appendChild(ir);const mi=IP(ir,Object.assign(Object.assign({},X),{reverse:p,brushRegion:tr,brushended(Ki){H.delete(Tn),Array.from(H.entries()).length===0?Qe(Ki):Ge(Lt,Ki)},brushed(Ki,fi,Zr,yo,po){H.set(Tn,Hr(Ki,fi,Zr,yo)),Ge(Lt,po)}}));lt.push(mi)}const ft=(Lt={})=>{const{nativeEvent:Tn}=Lt;Tn||lt.forEach(Fn=>Fn.remove(!1))},pt=(Lt,Tn,Fn)=>{const[ir,tr]=Lt,Hr=fi=>fi.getStep?fi.getStep():0,mi=Zt(ir,Tn,Fn),Ki=Zt(tr,Tn,Fn)+Hr(Tn);return s(Fn)?[mi,-1/0,Ki,1/0]:[-1/0,mi,1/0,Ki]},Zt=(Lt,Tn,Fn)=>{const{height:ir,width:tr}=b.getOptions(),Hr=Tn.clone();return s(Fn)?Hr.update({range:[0,tr]}):Hr.update({range:[ir,0]}),Hr.map(Lt)},Ct=Lt=>{const{nativeEvent:Tn}=Lt;if(Tn)return;const{selection:Fn}=Lt.data;for(let ir=0;ir<lt.length;ir++){const tr=Fn[ir],Hr=lt[ir],mi=M[ir];if(tr){const Ki=te[ir];Hr.move(...pt(tr,Ki,mi),!1)}else Hr.remove(!1)}};return y.on("brushAxis:remove",ft),y.on("brushAxis:highlight",Ct),()=>{lt.forEach(Lt=>Lt.destroy()),y.off("brushAxis:remove",ft),y.off("brushAxis:highlight",Ct)}}function Tee(e){return(t,n,r)=>{const{container:i,view:s,options:l}=t,c=Mm(i),{x:h,y:p}=c.getBBox(),{coordinate:v}=s;return See(i,Object.assign({elements:Py,axes:_ee,offsetY:p,offsetX:h,points:y=>y.__data__.points,horizontal:y=>{const{startPos:[b,w],endPos:[R,M]}=y.attributes;return b!==R&&w===M},datum:r1(s),state:Nb(l,["active",["inactive",{opacity:.5}]]),coordinate:v,emitter:r},e))}}var wee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},i7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Aee(e=300){let t=null;return n=>{const{timeStamp:r}=n;return t!==null&&r-t<e?(t=r,!0):(t=r,!1)}}function Oee(e,t){var{filter:n,reset:r,brushRegion:i,extent:s,reverse:l,emitter:c,scale:h,coordinate:p,selection:v,series:y=!1}=t,b=i7(t,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const w=go(b,"mask"),{width:R,height:M}=e.getBBox(),I=s||[0,0,R,M],N=Aee(),z=IP(e,Object.assign(Object.assign({},w),{extent:I,brushRegion:i,reverse:l,brushcreated:H}));e.addEventListener("click",X);function H(te,fe,ye,Le,Ge){Ge.nativeEvent=!0,n(v(te,fe,ye,Le),Ge),z.remove()}function X(te){N(te)&&(te.nativeEvent=!0,r(te))}const $=({nativeEvent:te,data:fe})=>{if(te)return;const{selection:ye}=fe;n(ye,{nativeEvent:!1})};return c.on("brush:filter",$),()=>{z.destroy(),c.off("brush:filter",$),e.removeEventListener("click",X)}}function kP(e){var{hideX:t=!0,hideY:n=!0}=e,r=i7(e,["hideX","hideY"]);return(i,s,l)=>{const{container:c,view:h,options:p,update:v,setState:y}=i,b=Mm(c),w={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let R=!1,M=!1,I=h;const{scale:N,coordinate:z}=h;return Oee(b,Object.assign(Object.assign({brushRegion:(H,X,$,te)=>[H,X,$,te],selection:(H,X,$,te)=>{const{scale:fe,coordinate:ye}=I;return Ew(H,X,$,te,fe,ye)},filter:(H,X)=>wee(this,void 0,void 0,function*(){if(M)return;M=!0;const[$,te]=H;y("brushFilter",ye=>{const{marks:Le}=ye,Ge=Le.map(Qe=>oi({axis:Object.assign(Object.assign({},t&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},Qe,{scale:{x:{domain:$,nice:!1},y:{domain:te,nice:!1}}}));return Object.assign(Object.assign({},p),{marks:Ge,clip:!0})}),l.emit("brush:filter",Object.assign(Object.assign({},X),{data:{selection:[$,te]}})),I=(yield v()).view,M=!1,R=!0}),reset:H=>{if(M||!R)return;const{scale:X}=h,{x:$,y:te}=X,fe=$.getOptions().domain,ye=te.getOptions().domain;l.emit("brush:filter",Object.assign(Object.assign({},H),{data:{selection:[fe,ye]}})),R=!1,I=h,y("brushFilter"),v()},extent:void 0,emitter:l,scale:N,coordinate:z},w),r))}}function Cee(e){return kP(Object.assign(Object.assign({hideX:!0},e),{brushRegion:NP}))}function Ree(e){return kP(Object.assign(Object.assign({hideY:!0},e),{brushRegion:BP}))}var Mee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Pee="slider";function Iee(e,t,n,r=!1,i="x",s="y"){const{marks:l}=e,c=l.map(h=>{var p,v;return oi({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},h,{scale:t,[n]:Object.assign(Object.assign({},((p=h[n])===null||p===void 0?void 0:p[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((v=h[n])===null||v===void 0?void 0:v[s])&&{[s]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},e),{marks:c,clip:!0,animate:!1})}function Lee(e,t,n){const[r,i]=e,s=n?h=>1-h:h=>h,l=Lb(t,s(r),!0),c=Lb(t,s(i),!1);return My(t,[l,c])}function _A(e){return[e[0],e[e.length-1]]}function o7({initDomain:e={},className:t=Pee,prefix:n="slider",setValue:r=(p,v)=>p.setValues(v),hasState:i=!1,wait:s=50,leading:l=!0,trailing:c=!1,getInitValues:h=p=>{var v;const y=(v=p==null?void 0:p.attributes)===null||v===void 0?void 0:v.values;if(y[0]!==0||y[1]!==1)return y}}){return(p,v,y)=>{const{container:b,view:w,update:R,setState:M}=p,I=b.getElementsByClassName(t);if(!I.length)return()=>{};let N=!1;const{scale:z,coordinate:H,layout:X}=w,{paddingLeft:$,paddingTop:te,paddingBottom:fe,paddingRight:ye}=X,{x:Le,y:Ge}=z,Qe=wu(H),gt=pt=>{const Zt=pt==="vertical"?"y":"x",Ct=pt==="vertical"?"x":"y";return Qe?[Ct,Zt]:[Zt,Ct]},qe=new Map,lt=new Set,ft={x:e.x||Le.getOptions().domain,y:e.y||Ge.getOptions().domain};for(const pt of I){const{orientation:Zt}=pt.attributes,[Ct,Lt]=gt(Zt),Tn=`${n}${Sm(Ct)}:filter`,Fn=Ct==="x",{ratio:ir}=Le.getOptions(),{ratio:tr}=Ge.getOptions(),Hr=Zr=>{if(Zr.data){const{selection:Oa}=Zr.data,[Na=_A(ft.x),ks=_A(ft.y)]=Oa;return Fn?[My(Le,Na,ir),My(Ge,ks,tr)]:[My(Ge,ks,tr),My(Le,Na,ir)]}const{value:yo}=Zr.detail,po=z[Ct],ko=Lee(yo,po,Qe&&Zt==="horizontal"),fa=ft[Lt];return[ko,fa]},mi=v1(Zr=>Mee(this,void 0,void 0,function*(){const{initValue:yo=!1}=Zr;if(N&&!yo)return;N=!0;const{nativeEvent:po=!0}=Zr,[ko,fa]=Hr(Zr);if(ft[Ct]=ko,ft[Lt]=fa,po){const Oa=Fn?ko:fa,Na=Fn?fa:ko;y.emit(Tn,Object.assign(Object.assign({},Zr),{nativeEvent:po,data:{selection:[_A(Oa),_A(Na)]}}))}M(pt,Oa=>Object.assign(Object.assign({},Iee(Oa,{[Ct]:{domain:ko,nice:!1}},n,i,Ct,Lt)),{paddingLeft:$,paddingTop:te,paddingBottom:fe,paddingRight:ye})),yield R(),N=!1}),s,{leading:l,trailing:c}),Ki=Zr=>{const{nativeEvent:yo}=Zr;if(yo)return;const{data:po}=Zr,{selection:ko}=po,[fa,Oa]=ko;pt.dispatchEvent(new Vi("valuechange",{data:po,nativeEvent:!1}));const Na=Fn?Sw(fa,Le):Sw(Oa,Ge);r(pt,Na)};y.on(Tn,Ki),pt.addEventListener("valuechange",mi),qe.set(pt,mi),lt.add([Tn,Ki]);const fi=h(pt);fi&&pt.dispatchEvent(new Vi("valuechange",{detail:{value:fi},nativeEvent:!1,initValue:!0}))}return R(),()=>{for(const[pt,Zt]of qe)pt.removeEventListener("valuechange",Zt);for(const[pt,Zt]of lt)y.off(pt,Zt)}}}const a7="g2-scrollbar";function Dee(e={}){return(t,n,r)=>{const{view:i,container:s}=t;if(!s.getElementsByClassName(a7).length)return()=>{};const{scale:c}=i,{x:h,y:p}=c,v={x:[...h.getOptions().domain],y:[...p.getOptions().domain]};return h.update({domain:h.getOptions().expectedDomain}),p.update({domain:p.getOptions().expectedDomain}),o7(Object.assign(Object.assign({},e),{initDomain:v,className:a7,prefix:"scrollbar",hasState:!0,setValue:(b,w)=>b.setValue(w[0]),getInitValues:b=>{const w=b.slider.attributes.values;if(w[0]!==0)return w}}))(t,n,r)}}var Nee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Bee(e,t,n){return`<${e} style="${Object.entries(n).map(([r,i])=>`${qW(r)}:${i}`).join(";")}">${t}</${e}>`}const Fee={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function s7(e){return e.nodeName!=="text"?!1:!!e.isOverflowing()}function l7(e){var{offsetX:t=8,offsetY:n=8}=e,r=Nee(e,["offsetX","offsetY"]);return i=>{const{container:s}=i,[l,c]=s.getBounds().min,h=go(r,"tip"),p=new Set,v=b=>{const{target:w}=b;if(!s7(w)){b.stopPropagation();return}const{offsetX:R,offsetY:M}=b,I=R+t-l,N=M+n-c;if(w.tip){w.tip.style.x=I,w.tip.style.y=N;return}const{text:z}=w.style,H=new N_({className:"poptip",style:{innerHTML:Bee("div",z,Object.assign(Object.assign({},Fee),h)),x:I,y:N}});s.appendChild(H),w.tip=H,p.add(H)},y=b=>{const{target:w}=b;if(!s7(w)){b.stopPropagation();return}w.tip&&(w.tip.remove(),w.tip=null,p.delete(w.tip))};return s.addEventListener("pointerover",v),s.addEventListener("pointerout",y),()=>{s.removeEventListener("pointerover",v),s.removeEventListener("pointerout",y),p.forEach(b=>b.remove())}}}l7.props={reapplyWhenUpdate:!0};function kee(e,t){var n=IM(t),r=n.length;if((0,ya.Z)(e))return!r;for(var i=0;i<r;i+=1){var s=n[i];if(t[s]!==e[s]||!(s in e))return!1}return!0}var zee=kee;function Uee(e,t){if(!jo(e))return null;var n;if(tp(t)&&(n=t),Lv(t)&&(n=function(i){return zee(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var Qb=Uee;function bA(e){return e==null?null:u7(e)}function u7(e){if(typeof e!="function")throw new Error;return e}var jee={depth:-1},c7={},zP={};function Vee(e){return e.id}function Hee(e){return e.parentId}function UP(){var e=Vee,t=Hee,n;function r(i){var s=Array.from(i),l=e,c=t,h,p,v,y,b,w,R,M,I=new Map;if(n!=null){var N=s.map(function(ye,Le){return Wee(n(ye,Le,i))}),z=N.map(f7),H=new Set(N).add(""),X=CM(z),$;try{for(X.s();!($=X.n()).done;){var te=$.value;H.has(te)||(H.add(te),N.push(te),z.push(f7(te)),s.push(zP))}}catch(ye){X.e(ye)}finally{X.f()}l=function(Le,Ge){return N[Ge]},c=function(Le,Ge){return z[Ge]}}for(v=0,h=s.length;v<h;++v)p=s[v],w=s[v]=new Wb(p),(R=l(p,v,i))!=null&&(R+="")&&(M=w.id=R,I.set(M,I.has(M)?c7:w)),(R=c(p,v,i))!=null&&(R+="")&&(w.parent=R);for(v=0;v<h;++v)if(w=s[v],R=w.parent){if(b=I.get(R),!b)throw new Error("missing: "+R);if(b===c7)throw new Error("ambiguous: "+R);b.children?b.children.push(w):b.children=[w],w.parent=b}else{if(y)throw new Error("multiple roots");y=w}if(!y)throw new Error("no root");if(n!=null){for(;y.data===zP&&y.children.length===1;)y=y.children[0],--h;for(var fe=s.length-1;fe>=0&&(w=s[fe],w.data===zP);--fe)w.data=null}if(y.parent=jee,y.eachBefore(function(ye){ye.depth=ye.parent.depth+1,--h}).eachBefore(oN),y.parent=null,h>0)throw new Error("cycle");return y}return r.id=function(i){return arguments.length?(e=bA(i),r):e},r.parentId=function(i){return arguments.length?(t=bA(i),r):t},r.path=function(i){return arguments.length?(n=bA(i),r):n},r}function Wee(e){e="".concat(e);var t=e.length;return jP(e,t-1)&&!jP(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:"/".concat(e)}function f7(e){var t=e.length;if(t<2)return"";for(;--t>1&&!jP(e,t););return e.slice(0,t)}function jP(e,t){if(e[t]==="/"){for(var n=0;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Gee(e,t,n,r,i){var s=e.children,l,c=s.length,h,p=new Array(c+1);for(p[0]=h=l=0;l<c;++l)p[l+1]=h+=s[l].value;v(0,c,e.value,t,n,r,i);function v(y,b,w,R,M,I,N){if(y>=b-1){var z=s[y];z.x0=R,z.y0=M,z.x1=I,z.y1=N;return}for(var H=p[y],X=w/2+H,$=y+1,te=b-1;$<te;){var fe=$+te>>>1;p[fe]<X?$=fe+1:te=fe}X-p[$-1]<p[$]-X&&y+1<$&&--$;var ye=p[$]-H,Le=w-ye;if(I-R>N-M){var Ge=w?(R*Le+I*ye)/w:I;v(y,$,ye,R,M,Ge,N),v($,b,Le,Ge,M,I,N)}else{var Qe=w?(M*Le+N*ye)/w:N;v(y,$,ye,R,M,I,Qe),v($,b,Le,R,Qe,I,N)}}}function xA(e,t,n,r,i){for(var s=e.children,l,c=-1,h=s.length,p=e.value&&(i-n)/e.value;++c<h;)l=s[c],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*p}function Zee(e,t,n,r,i){(e.depth&1?xA:Q2)(e,t,n,r,i)}var h7=(1+Math.sqrt(5))/2;function d7(e,t,n,r,i,s){for(var l=[],c=t.children,h,p,v=0,y=0,b=c.length,w,R,M=t.value,I,N,z,H,X,$,te;v<b;){w=i-n,R=s-r;do I=c[y++].value;while(!I&&y<b);for(N=z=I,$=Math.max(R/w,w/R)/(M*e),te=I*I*$,X=Math.max(z/te,te/N);y<b;++y){if(I+=p=c[y].value,p<N&&(N=p),p>z&&(z=p),te=I*I*$,H=Math.max(z/te,te/N),H>X){I-=p;break}X=H}l.push(h={value:I,dice:w<R,children:c.slice(v,y)}),h.dice?Q2(h,n,r,i,M?r+=R*I/M:s):xA(h,n,r,M?n+=w*I/M:i,s),M-=I,v=y}return l}var p7=function e(t){function n(r,i,s,l,c){d7(t,r,i,s,l,c)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(h7),Xee=function e(t){function n(r,i,s,l,c){if((h=r._squarify)&&h.ratio===t)for(var h,p,v,y,b=-1,w,R=h.length,M=r.value;++b<R;){for(p=h[b],v=p.children,y=p.value=0,w=v.length;y<w;++y)p.value+=v[y].value;p.dice?Q2(p,i,s,l,M?s+=(c-s)*p.value/M:c):xA(p,i,s,M?i+=(l-i)*p.value/M:l,c),M-=p.value}else r._squarify=h=d7(t,r,i,s,l,c),h.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(h7);function m1(){return 0}function Jb(e){return function(){return e}}function $ee(){var e=p7,t=!1,n=1,r=1,i=[0],s=m1,l=m1,c=m1,h=m1,p=m1;function v(b){return b.x0=b.y0=0,b.x1=n,b.y1=r,b.eachBefore(y),i=[0],t&&b.eachBefore(nN),b}function y(b){var w=i[b.depth],R=b.x0+w,M=b.y0+w,I=b.x1-w,N=b.y1-w;I<R&&(R=I=(R+I)/2),N<M&&(M=N=(M+N)/2),b.x0=R,b.y0=M,b.x1=I,b.y1=N,b.children&&(w=i[b.depth+1]=s(b)/2,R+=p(b)-w,M+=l(b)-w,I-=c(b)-w,N-=h(b)-w,I<R&&(R=I=(R+I)/2),N<M&&(M=N=(M+N)/2),e(b,R,M,I,N))}return v.round=function(b){return arguments.length?(t=!!b,v):t},v.size=function(b){return arguments.length?(n=+b[0],r=+b[1],v):[n,r]},v.tile=function(b){return arguments.length?(e=u7(b),v):e},v.padding=function(b){return arguments.length?v.paddingInner(b).paddingOuter(b):v.paddingInner()},v.paddingInner=function(b){return arguments.length?(s=typeof b=="function"?b:Jb(+b),v):s},v.paddingOuter=function(b){return arguments.length?v.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):v.paddingTop()},v.paddingTop=function(b){return arguments.length?(l=typeof b=="function"?b:Jb(+b),v):l},v.paddingRight=function(b){return arguments.length?(c=typeof b=="function"?b:Jb(+b),v):c},v.paddingBottom=function(b){return arguments.length?(h=typeof b=="function"?b:Jb(+b),v):h},v.paddingLeft=function(b){return arguments.length?(p=typeof b=="function"?b:Jb(+b),v):p},v}function Yee(e,t){return Array.isArray(e)?typeof t=="function"?UP().path(t)(e):UP()(e):Hb(e)}function v7(e,t=[e.data.name]){e.id=e.id||e.data.name,e.path=t,e.children&&e.children.forEach(n=>{n.id=`${e.id}/${n.data.name}`,n.path=[...t,n.data.name],v7(n,n.path)})}function m7(e){const t=fl(e,["data","name"]);t.replaceAll&&(e.path=t.replaceAll(".","/").split("/")),e.children&&e.children.forEach(n=>{m7(n)})}function Kee(e,t){const n={treemapBinary:Gee,treemapDice:Q2,treemapSlice:xA,treemapSliceDice:Zee,treemapSquarify:p7,treemapResquarify:Xee},r=e==="treemapSquarify"?n[e].ratio(t):n[e];if(!r)throw new TypeError("Invalid tile method!");return r}function g7(e,t,n){const{value:r}=n,i=Kee(t.tile,t.ratio),s=Yee(e,t.path);jo(e)?m7(s):v7(s),r?s.sum(h=>t.ignoreParentValue&&h.children?0:Bm(r)(h)).sort(t.sort):s.count(),$ee().tile(i).size(t.size).round(t.round).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(s);const l=s.descendants().map(h=>Object.assign(h,{id:h.id.replace(/^\//,""),x:[h.x0,h.x1],y:[h.y0,h.y1]}));return[l.filter(typeof t.layer=="function"?t.layer:h=>h.height===t.layer),l]}var qee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Qee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Jee(e){return Aa(e).select(`.${Ko}`).node()}const ete={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function tte(e={}){const{originData:t=[],layout:n}=e,r=Qee(e,["originData","layout"]),i=oi({},ete,r),s=go(i,"breadCrumb"),l=go(i,"active");return c=>{const{update:h,setState:p,container:v,options:y}=c,b=Jee(v),w=y.marks[0],{state:R}=w,M=new ff;b.appendChild(M);const I=(X,$)=>qee(this,void 0,void 0,function*(){if(M.removeChildren(),$){let te="",fe=s.y,ye=0;const Le=[],Ge=b.getBBox().width,Qe=X.map((gt,qe)=>{te=`${te}${gt}/`,Le.push(gt);const lt=new hf({name:te.replace(/\/$/,""),style:Object.assign(Object.assign({text:gt,x:ye,path:[...Le],depth:qe},s),{y:fe})});M.appendChild(lt),ye+=lt.getBBox().width;const ft=new hf({style:Object.assign(Object.assign({x:ye,text:" / "},s),{y:fe})});return M.appendChild(ft),ye+=ft.getBBox().width,ye>Ge&&(fe=M.getBBox().height+s.y,ye=0,lt.attr({x:ye,y:fe}),ye+=lt.getBBox().width,ft.attr({x:ye,y:fe}),ye+=ft.getBBox().width),qe===B2(X)-1&&ft.remove(),lt});Qe.forEach((gt,qe)=>{if(qe===B2(Qe)-1)return;const lt=Object.assign({},gt.attributes);gt.attr("cursor","pointer"),gt.addEventListener("mouseenter",()=>{gt.attr(l)}),gt.addEventListener("mouseleave",()=>{gt.attr(lt)}),gt.addEventListener("click",()=>{I(fl(gt,["style","path"]),fl(gt,["style","depth"]))})})}ree(v,p),p("treemapDrillDown",te=>{const{marks:fe}=te,ye=X.join("/"),Le=fe.map(Ge=>{if(Ge.type!=="rect")return Ge;let Qe=t;if($){const qe=t.filter(Ct=>{const Lt=fl(Ct,["id"]);return Lt&&(Lt.match(`${ye}/`)||ye.match(Lt))}).map(Ct=>({value:Ct.height===0?fl(Ct,["value"]):void 0,name:fl(Ct,["id"])})),{paddingLeft:lt,paddingBottom:ft,paddingRight:pt}=n,Zt=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||M.getBBox().height+10)/($+1),paddingLeft:lt/($+1),paddingBottom:ft/($+1),paddingRight:pt/($+1),path:Ct=>Ct.name,layer:Ct=>Ct.depth===$+1});Qe=g7(qe,Zt,{value:"value"})[0]}else Qe=t.filter(qe=>qe.depth===1);const gt=[];return Qe.forEach(({path:qe})=>{gt.push(cE(qe))}),oi({},Ge,{data:Qe,scale:{color:{domain:gt}}})});return Object.assign(Object.assign({},te),{marks:Le})}),yield h(void 0,["legendFilter"])}),N=X=>{const $=X.target;if(fl($,["markType"])!=="rect")return;const te=fl($,["__data__","key"]),fe=Qb(t,ye=>ye.id===te);fl(fe,"height")&&I(fl(fe,"path"),fl(fe,"depth"))};b.addEventListener("click",N);const z=IM(Object.assign(Object.assign({},R.active),R.inactive)),H=()=>{g6(b).forEach($=>{const te=fl($,["style","cursor"]),fe=Qb(t,ye=>ye.id===fl($,["__data__","key"]));if(te!=="pointer"&&(fe!=null&&fe.height)){$.style.cursor="pointer";const ye=OM($.attributes,z);$.addEventListener("mouseenter",()=>{$.attr(R.active)}),$.addEventListener("mouseleave",()=>{$.attr(oi(ye,R.inactive))})}})};return H(),b.addEventListener("mousemove",H),()=>{M.remove(),b.removeEventListener("click",N),b.removeEventListener("mousemove",H)}}}var VP=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},nte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const rte={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},HP="movePoint",y7=e=>{const t=e.target,{markType:n}=t;n==="line"&&(t.attr("_lineWidth",t.attr("lineWidth")||1),t.attr("lineWidth",t.attr("_lineWidth")+3)),n==="interval"&&(t.attr("_opacity",t.attr("opacity")||1),t.attr("opacity",.7*t.attr("_opacity")))},_7=e=>{const t=e.target,{markType:n}=t;n==="line"&&t.attr("lineWidth",t.attr("_lineWidth")),n==="interval"&&t.attr("opacity",t.attr("_opacity"))},ite=(e,t,n)=>t.map(r=>["x","color"].reduce((s,l)=>{const c=n[l];return c&&r[c]!==e[c]?!1:s},!0)?Object.assign(Object.assign({},r),e):r),ote=e=>{const t=fl(e,["__data__","y"]),r=fl(e,["__data__","y1"])-t,{__data__:{data:i,encode:s,transform:l},childNodes:c}=e.parentNode,h=Qb(l,({type:y})=>y==="normalizeY"),p=fl(s,["y","field"]),v=i[c.indexOf(e)][p];return(y,b=!1)=>h||b?y/(1-y)/(r/(1-r))*v:y},ate=(e,t)=>{const n=fl(e,["__data__","seriesItems",t,"0","value"]),r=fl(e,["__data__","seriesIndex",t]),{__data__:{data:i,encode:s,transform:l}}=e.parentNode,c=Qb(l,({type:v})=>v==="normalizeY"),h=fl(s,["y","field"]),p=i[r][h];return v=>c?n===1?v:v/(1-v)/(n/(1-n))*p:v},b7=(e,t,n)=>{e.forEach((r,i)=>{r.attr("stroke",t[1]===i?n.activeStroke:n.stroke)})},x7=(e,t,n,r)=>{const i=new fd({style:n}),s=new hf({style:r});return t.appendChild(s),e.appendChild(i),[i,s]},E7=(e,t)=>{if(!fl(e,["options","range","indexOf"]))return;const r=e.options.range.indexOf(t);return e.sortedDomain[r]},WP=(e,t,n)=>{const r=Mw(e,t),s=Mw(e,n)/r,l=e[0]+(t[0]-e[0])*s,c=e[1]+(t[1]-e[1])*s;return[l,c]};function ste(e={}){const{selection:t=[],precision:n=2}=e,r=nte(e,["selection","precision"]),i=Object.assign(Object.assign({},rte),r||{}),s=go(i,"path"),l=go(i,"label"),c=go(i,"point");return(h,p,v)=>{const{update:y,setState:b,container:w,view:R,options:{marks:M,coordinate:I}}=h,N=Mm(w);let z=g6(N),H,X=t;const{transform:$=[],type:te}=I,fe=!!Qb($,({type:Ct})=>Ct==="transpose"),ye=te==="polar",Le=te==="theta",Ge=!!Qb(z,({markType:Ct})=>Ct==="area");Ge&&(z=z.filter(({markType:Ct})=>Ct==="area"));const Qe=new ff({style:{zIndex:2}});N.appendChild(Qe);const gt=()=>{v.emit("element-point:select",{nativeEvent:!0,data:{selection:X}})},qe=(Ct,Lt)=>{v.emit("element-point:moved",{nativeEvent:!0,data:{changeData:Ct,data:Lt}})},lt=Ct=>{const Lt=Ct.target;X=[Lt.parentNode.childNodes.indexOf(Lt)],gt(),pt(Lt)},ft=Ct=>{const{data:{selection:Lt},nativeEvent:Tn}=Ct;if(Tn)return;X=Lt;const Fn=fl(z,[X==null?void 0:X[0]]);Fn&&pt(Fn)},pt=Ct=>{const{attributes:Lt,markType:Tn,__data__:Fn}=Ct,{stroke:ir}=Lt,{points:tr,seriesTitle:Hr,color:mi,title:Ki,seriesX:fi,y1:Zr}=Fn;if(fe&&Tn!=="interval")return;const{scale:yo,coordinate:po}=(H==null?void 0:H.view)||R,{color:ko,y:fa,x:Oa}=yo,Na=po.getCenter();Qe.removeChildren();let ks;const Kl=(Wa,Os,Uu,Kc)=>VP(this,void 0,void 0,function*(){return b("elementPointMove",Dp=>{var qc;const gh=(((qc=H==null?void 0:H.options)===null||qc===void 0?void 0:qc.marks)||M).map(Bc=>{if(!Kc.includes(Bc.type))return Bc;const{data:op,encode:Ma}=Bc,ll=Object.keys(Ma).reduce((_s,xl)=>{const Au=Ma[xl];return xl==="x"&&(_s[Au]=Wa),xl==="y"&&(_s[Au]=Os),xl==="color"&&(_s[Au]=Uu),_s},{}),cs=ite(ll,op,Ma);return qe(ll,cs),oi({},Bc,{data:cs,animate:!1})});return Object.assign(Object.assign({},Dp),{marks:gh})}),yield y("elementPointMove")});if(["line","area"].includes(Tn))tr.forEach((Wa,Os)=>{const Uu=Oa.invert(fi[Os]);if(!Uu)return;const Kc=new G0({name:HP,style:Object.assign({cx:Wa[0],cy:Wa[1],fill:ir},c)}),Dp=ate(Ct,Os);Kc.addEventListener("mousedown",qc=>{const gh=po.output([fi[Os],0]),Bc=Hr==null?void 0:Hr.length;w.attr("cursor","move"),X[1]!==Os&&(X[1]=Os,gt()),b7(Qe.childNodes,X,c);const[op,Ma]=x7(Qe,Kc,s,l),Pa=cs=>{const _s=Wa[1]+cs.clientY-ks[1];if(Ge)if(ye){const xl=Wa[0]+cs.clientX-ks[0],[Au,vf]=WP(Na,gh,[xl,_s]),[,jh]=po.output([1,fa.output(0)]),[,rv]=po.invert([Au,jh-(tr[Os+Bc][1]-vf)]),dx=(Os+1)%Bc,KE=(Os-1+Bc)%Bc,C5=X2([tr[KE],[Au,vf],Hr[dx]&&tr[dx]]);Ma.attr("text",Dp(fa.invert(rv)).toFixed(n)),op.attr("d",C5),Kc.attr("cx",Au),Kc.attr("cy",vf)}else{const[,xl]=po.output([1,fa.output(0)]),[,Au]=po.invert([Wa[0],xl-(tr[Os+Bc][1]-_s)]),vf=X2([tr[Os-1],[Wa[0],_s],Hr[Os+1]&&tr[Os+1]]);Ma.attr("text",Dp(fa.invert(Au)).toFixed(n)),op.attr("d",vf),Kc.attr("cy",_s)}else{const[,xl]=po.invert([Wa[0],_s]),Au=X2([tr[Os-1],[Wa[0],_s],tr[Os+1]]);Ma.attr("text",fa.invert(xl).toFixed(n)),op.attr("d",Au),Kc.attr("cy",_s)}};ks=[qc.clientX,qc.clientY],window.addEventListener("mousemove",Pa);const ll=()=>VP(this,void 0,void 0,function*(){if(w.attr("cursor","default"),window.removeEventListener("mousemove",Pa),w.removeEventListener("mouseup",ll),js(Ma.attr("text")))return;const cs=Number(Ma.attr("text")),_s=E7(ko,mi);H=yield Kl(Uu,cs,_s,["line","area"]),Ma.remove(),op.remove(),pt(Ct)});w.addEventListener("mouseup",ll)}),Qe.appendChild(Kc)}),b7(Qe.childNodes,X,c);else if(Tn==="interval"){let Wa=[(tr[0][0]+tr[1][0])/2,tr[0][1]];fe?Wa=[tr[0][0],(tr[0][1]+tr[1][1])/2]:Le&&(Wa=tr[0]);const Os=ote(Ct),Uu=new G0({name:HP,style:Object.assign(Object.assign({cx:Wa[0],cy:Wa[1],fill:ir},c),{stroke:c.activeStroke})});Uu.addEventListener("mousedown",Kc=>{w.attr("cursor","move");const Dp=E7(ko,mi),[qc,gh]=x7(Qe,Uu,s,l),Bc=Ma=>{if(fe){const Pa=Wa[0]+Ma.clientX-ks[0],[ll]=po.output([fa.output(0),fa.output(0)]),[,cs]=po.invert([ll+(Pa-tr[2][0]),Wa[1]]),_s=X2([[Pa,tr[0][1]],[Pa,tr[1][1]],tr[2],tr[3]],!0);gh.attr("text",Os(fa.invert(cs)).toFixed(n)),qc.attr("d",_s),Uu.attr("cx",Pa)}else if(Le){const Pa=Wa[1]+Ma.clientY-ks[1],ll=Wa[0]+Ma.clientX-ks[0],[cs,_s]=WP(Na,[ll,Pa],Wa),[xl,Au]=WP(Na,[ll,Pa],tr[1]),vf=po.invert([cs,_s])[1],jh=Zr-vf;if(jh<0)return;const rv=zG(Na,[[cs,_s],[xl,Au],tr[2],tr[3]],jh>.5?1:0);gh.attr("text",Os(jh,!0).toFixed(n)),qc.attr("d",rv),Uu.attr("cx",cs),Uu.attr("cy",_s)}else{const Pa=Wa[1]+Ma.clientY-ks[1],[,ll]=po.output([1,fa.output(0)]),[,cs]=po.invert([Wa[0],ll-(tr[2][1]-Pa)]),_s=X2([[tr[0][0],Pa],[tr[1][0],Pa],tr[2],tr[3]],!0);gh.attr("text",Os(fa.invert(cs)).toFixed(n)),qc.attr("d",_s),Uu.attr("cy",Pa)}};ks=[Kc.clientX,Kc.clientY],window.addEventListener("mousemove",Bc);const op=()=>VP(this,void 0,void 0,function*(){if(w.attr("cursor","default"),w.removeEventListener("mouseup",op),window.removeEventListener("mousemove",Bc),js(gh.attr("text")))return;const Ma=Number(gh.attr("text"));H=yield Kl(Ki,Ma,Dp,[Tn]),gh.remove(),qc.remove(),pt(Ct)});w.addEventListener("mouseup",op)}),Qe.appendChild(Uu)}};z.forEach((Ct,Lt)=>{X[0]===Lt&&pt(Ct),Ct.addEventListener("click",lt),Ct.addEventListener("mouseenter",y7),Ct.addEventListener("mouseleave",_7)});const Zt=Ct=>{const Lt=Ct==null?void 0:Ct.target;(!Lt||Lt.name!==HP&&!z.includes(Lt))&&(X=[],gt(),Qe.removeChildren())};return v.on("element-point:select",ft),v.on("element-point:unselect",Zt),w.addEventListener("mousedown",Zt),()=>{Qe.remove(),v.off("element-point:select",ft),v.off("element-point:unselect",Zt),w.removeEventListener("mousedown",Zt),z.forEach(Ct=>{Ct.removeEventListener("click",lt),Ct.removeEventListener("mouseenter",y7),Ct.removeEventListener("mouseleave",_7)})}}}var lte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const S7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{x:n=0,y:r=0,width:i,height:s,data:l}=e;return t.map(c=>{var{data:h,x:p,y:v,width:y,height:b}=c,w=lte(c,["data","x","y","width","height"]);return Object.assign(Object.assign({},w),{data:jR(h,l),x:p!=null?p:n,y:v!=null?v:r,width:y!=null?y:i,height:b!=null?b:s})})};S7.props={};var ute=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const T7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{direction:n="row",ratio:r=t.map(()=>1),padding:i=0,data:s}=e,[l,c,h,p]=n==="col"?["y","height","width","x"]:["x","width","height","y"],v=r.reduce((M,I)=>M+I),y=e[c]-i*(t.length-1),b=r.map(M=>y*(M/v)),w=[];let R=e[l]||0;for(let M=0;M<b.length;M+=1){const I=t[M],{data:N}=I,z=ute(I,["data"]),H=jR(N,s);w.push(Object.assign({[l]:R,[c]:b[M],[p]:e[p]||0,[h]:e[h],data:H},z)),R+=b[M]+i}return w};T7.props={};class gE{constructor(t){this.$value=t}static of(t){return new gE(t)}call(t,...n){return this.$value=t(this.$value,...n),this}value(){return this.$value}}var cte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const fte=Ob(e=>{const{encode:t,data:n,scale:r,shareSize:i=!1}=e,{x:s,y:l}=t,c=(h,p)=>{var v;if(h===void 0||!i)return{};const y=ou(n,R=>R[h]),b=((v=r==null?void 0:r[p])===null||v===void 0?void 0:v.domain)||Array.from(y.keys()),w=b.map(R=>y.has(R)?y.get(R).length:1);return{domain:b,flex:w}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:s===void 0?null:{position:"top"}},s===void 0&&{paddingInner:0}),c(s,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:l===void 0?null:{position:"right"}},l===void 0&&{paddingInner:0}),c(l,"y"))}}}),GP=Ob(e=>{const{data:t,scale:n}=e,r=[e];let i,s,l;for(;r.length;){const y=r.shift(),{children:b,encode:w={},scale:R={},legend:M={}}=y,{color:I}=w,{color:N}=R,{color:z}=M;I!==void 0&&(i=I),N!==void 0&&(s=N),z!==void 0&&(l=z),Array.isArray(b)&&r.push(...b)}const c=()=>{var y;const b=(y=n==null?void 0:n.color)===null||y===void 0?void 0:y.domain;if(b!==void 0)return[b];if(i===void 0)return[void 0];const w=typeof i=="function"?i:M=>M[i],R=t.map(w);return R.some(M=>typeof M=="number")?[Eg(R)]:[Array.from(new Set(R)),"ordinal"]},h=typeof i=="string"?i:"",[p,v]=c();return{encode:{color:i},scale:{color:oi({},s,{domain:p,type:v})},legend:{color:oi({title:h},l)}}}),ZP=Ob(()=>({animate:{enterType:"fadeIn"}})),XP=Cb(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),$P=Cb(()=>({type:"cell"})),w7=Cb(e=>{const{data:t}=e;return{data:{type:"inline",value:t,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=e,{x:s,y:l}=i,c=s?Array.from(new Set(r.map(v=>v[s]))):[],h=l?Array.from(new Set(r.map(v=>v[l]))):[];return(()=>{if(c.length&&h.length){const v=[];for(const y of c)for(const b of h)v.push({[s]:y,[l]:b});return v}if(c.length)return c.map(v=>({[s]:v}));if(h.length)return h.map(v=>({[l]:v}))})()}}]}}}),A7=Cb((e,t=hte,n=dte,r=pte,i={})=>{const{data:s,encode:l,children:c,scale:h,x:p=0,y:v=0,shareData:y=!1,key:b}=e,{value:w}=s,{x:R,y:M}=l,{color:I}=h,{domain:N}=I;return{children:(H,X,$)=>{const{x:te,y:fe}=X,{paddingLeft:ye,paddingTop:Le,marginLeft:Ge,marginTop:Qe}=$,{domain:gt}=te.getOptions(),{domain:qe}=fe.getOptions(),lt=lr(H),ft=H.map(t),pt=H.map(({x:ir,y:tr})=>[te.invert(ir),fe.invert(tr)]),Ct=pt.map(([ir,tr])=>Hr=>{const{[R]:mi,[M]:Ki}=Hr;return(R!==void 0?mi===ir:!0)&&(M!==void 0?Ki===tr:!0)}).map(ir=>w.filter(ir)),Lt=y?ls(Ct,ir=>ir.length):void 0,Tn=pt.map(([ir,tr])=>({columnField:R,columnIndex:gt.indexOf(ir),columnValue:ir,columnValuesLength:gt.length,rowField:M,rowIndex:qe.indexOf(tr),rowValue:tr,rowValuesLength:qe.length})),Fn=Tn.map(ir=>Array.isArray(c)?c:[c(ir)].flat(1));return lt.flatMap(ir=>{const[tr,Hr,mi,Ki]=ft[ir],fi=Tn[ir],Zr=Ct[ir];return Fn[ir].map(po=>{var ko,fa,{scale:Oa,key:Na,facet:ks=!0,axis:Kl={},legend:Wa={}}=po,Os=cte(po,["scale","key","facet","axis","legend"]);const Uu=((ko=Oa==null?void 0:Oa.y)===null||ko===void 0?void 0:ko.guide)||Kl.y,Kc=((fa=Oa==null?void 0:Oa.x)===null||fa===void 0?void 0:fa.guide)||Kl.x,Dp={x:{tickCount:R?5:void 0},y:{tickCount:M?5:void 0}},qc=ks?Zr:Zr.length===0?[]:w,gh={color:{domain:N}},Bc={x:O7(Kc,n)(fi,qc),y:O7(Uu,r)(fi,qc)};return Object.assign(Object.assign({key:`${Na}-${ir}`,data:qc,margin:0,x:tr+ye+p+Ge,y:Hr+Le+v+Qe,parentKey:b,width:mi,height:Ki,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!qc.length,dataDomain:Lt,scale:oi(Dp,Oa,gh),axis:oi({},Kl,Bc),legend:!1},Os),i)})})}}});function hte(e){const{points:t}=e;return HR(t)}function EA(e,t){return t.length?oi({title:!1,tick:null,label:null},e):oi({title:!1,tick:null,label:null,grid:null},e)}function dte(e){return(t,n)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:s,columnValuesLength:l}=t;if(r!==i-1)return EA(e,n);const c=s!==l-1?!1:void 0,h=n.length?void 0:null;return oi({title:c,grid:h},e)}}function pte(e){return(t,n)=>{const{rowIndex:r,columnIndex:i}=t;if(i!==0)return EA(e,n);const s=r!==0?!1:void 0,l=n.length?void 0:null;return oi({title:s,grid:l},e)}}function O7(e,t){return typeof e=="function"?e:e===null||e===!1?()=>null:t(e)}const C7=()=>e=>[gE.of(e).call($P).call(GP).call(ZP).call(fte).call(XP).call(w7).call(A7).value()];C7.props={};var YP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const vte=Ob(e=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),mte=Cb(e=>{const{data:t,children:n,x:r=0,y:i=0,key:s}=e;return{children:(c,h,p)=>{const{x:v,y}=h,{paddingLeft:b,paddingTop:w,marginLeft:R,marginTop:M}=p,{domain:I}=v.getOptions(),{domain:N}=y.getOptions(),z=lr(c),H=c.map(({points:fe})=>HR(fe)),X=c.map(({x:fe,y:ye})=>[v.invert(fe),y.invert(ye)]),$=X.map(([fe,ye])=>({columnField:fe,columnIndex:I.indexOf(fe),columnValue:fe,columnValuesLength:I.length,rowField:ye,rowIndex:N.indexOf(ye),rowValue:ye,rowValuesLength:N.length})),te=$.map(fe=>Array.isArray(n)?n:[n(fe)].flat(1));return z.flatMap(fe=>{const[ye,Le,Ge,Qe]=H[fe],[gt,qe]=X[fe],lt=$[fe];return te[fe].map(pt=>{var Zt,Ct;const{scale:Lt,key:Tn,encode:Fn,axis:ir,interaction:tr}=pt,Hr=YP(pt,["scale","key","encode","axis","interaction"]),mi=(Zt=Lt==null?void 0:Lt.y)===null||Zt===void 0?void 0:Zt.guide,Ki=(Ct=Lt==null?void 0:Lt.x)===null||Ct===void 0?void 0:Ct.guide,fi={x:{facet:!1},y:{facet:!1}},Zr={x:yte(Ki)(lt,t),y:_te(mi)(lt,t)},yo={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:t,parentKey:s,key:`${Tn}-${fe}`,x:ye+b+r+R,y:Le+w+i+M,width:Ge,height:Qe,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:oi(fi,Lt),axis:oi(yo,ir,Zr),legend:!1,encode:oi({},Fn,{x:gt,y:qe}),interaction:oi({},tr,{legendFilter:!1})},Hr)})})}}}),gte=Cb(e=>{const{encode:t}=e,n=YP(e,["encode"]),{position:r=[],x:i=r,y:s=[...r].reverse()}=t,l=YP(t,["position","x","y"]),c=[];for(const h of[i].flat(1))for(const p of[s].flat(1))c.push({$x:h,$y:p});return Object.assign(Object.assign({},n),{data:c,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[s].flat(1).length===1&&{y:{paddingInner:0}})})});function yte(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{rowIndex:r,rowValuesLength:i}=t;if(r!==i-1)return EA(e,n)}}function _te(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{columnIndex:r}=t;if(r!==0)return EA(e,n)}}const bte=()=>e=>[gE.of(e).call($P).call(GP).call(mte).call(gte).call(ZP).call(XP).call(vte).value()];var xte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ete=Ob(e=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),Ste=Ob(e=>({coordinate:{type:"polar"}})),Tte=e=>{const{encode:t}=e,n=xte(e,["encode"]),{position:r}=t;return Object.assign(Object.assign({},n),{encode:{x:r}})};function R7(e){return t=>null}function wte(e){const{points:t}=e,[n,r,i,s]=t,l=Fu(n,s),c=Ic(n,s),h=Ic(r,i),p=UL(c,h),v=1/Math.sin(p/2),y=l/(1+v),b=y*Math.sqrt(2),[w,R]=i,I=Rb(c)+p/2,N=y*v,z=w+N*Math.sin(I),H=R-N*Math.cos(I);return[z-b/2,H-b/2,b,b]}const Ate=()=>e=>[gE.of(e).call($P).call(Tte).call(GP).call(Ste).call(w7).call(A7,wte,R7,R7,{frame:!1}).call(ZP).call(XP).call(Ete).value()];function Ote(e,t,n){const i=n,s=[0,i],l=[-i+1,1];if(e==="normal")return s;if(e==="reverse")return l;if(e==="alternate")return t%2===0?s:l;if(e==="reverse-alternate")return t%2===0?l:s}function Cte(e,t,n){const r=[e];for(;r.length;){const i=r.pop();i.animate=oi({enter:{duration:t},update:{duration:t,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:t}},i.animate||{});const{children:s}=i;Array.isArray(s)&&r.push(...s)}return e}const M7=()=>e=>{const{children:t=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:s="ease-in-out-sine"}=e,l=t.length;if(!Array.isArray(t)||l===0)return[];const{key:c}=t[0],h=t.map(p=>Object.assign(Object.assign({},p),{key:c})).map(p=>Cte(p,n,s));return function*(){let p=0,v;for(;r==="infinite"||p<r;){const[y,b]=Ote(i,p,l);for(let w=y;w<b;w+=1){const R=Math.abs(w);v!==R&&(yield h[R]),v=R}p++}}};M7.props={};function jy(e,t,n){const{encode:r}=n;if(e===null)return[t];const i=Rte(e).map(l=>{var c;return[l,(c=sl(r,l))===null||c===void 0?void 0:c[0]]}).filter(([,l])=>cl(l)),s=l=>i.map(([,c])=>c[l]).join("-");return Array.from(ou(t,s).values())}function P7(e){return Array.isArray(e)?Ite(e):typeof e=="function"?Pte(e):e==="series"?Mte:e==="value"?Lte:e==="sum"?Dte:e==="maxIndex"?Nte:()=>null}function I7(e,t){for(const n of e)n.sort(t)}function L7(e,t){return(t==null?void 0:t.domain)||Array.from(new Set(e))}function Rte(e){return Array.isArray(e)?e:[e]}function Mte(e,t,n){return yE(r=>n[r])}function Pte(e){return(t,n,r)=>yE(i=>e(t[i]))}function Ite(e){return(t,n,r)=>(i,s)=>e.reduce((l,c)=>l!==0?l:Lc(t[i][c],t[s][c]),0)}function Lte(e,t,n){return yE(r=>t[r])}function Dte(e,t,n){const r=lr(e),i=Array.from(ou(r,l=>n[+l]).entries()),s=new Map(i.map(([l,c])=>[l,c.reduce((h,p)=>h+ +t[p])]));return yE(l=>s.get(n[l]))}function Nte(e,t,n){const r=lr(e),i=Array.from(ou(r,l=>n[+l]).entries()),s=new Map(i.map(([l,c])=>[l,Pb(c,h=>t[h])]));return yE(l=>s.get(n[l]))}function yE(e){return(t,n)=>Lc(e(t),e(n))}const D7=(e={})=>{const{groupBy:t="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:s="y1",series:l=!0}=e;return(c,h)=>{const{data:p,encode:v,style:y={}}=h,[b,w]=sl(v,"y"),[R,M]=sl(v,"y1"),[I]=l?eE(v,"series","color"):sl(v,"color"),N=jy(t,c,h),H=P7(n)(p,b,I);H&&I7(N,H);const X=new Array(c.length),$=new Array(c.length),te=new Array(c.length),fe=[],ye=[];for(const qe of N){r&&qe.reverse();const lt=R?+R[qe[0]]:0,ft=[],pt=[];for(const tr of qe){const Hr=te[tr]=+b[tr]-lt;Hr<0?pt.push(tr):Hr>=0&&ft.push(tr)}const Zt=ft.length>0?ft:pt,Ct=pt.length>0?pt:ft;let Lt=ft.length-1,Tn=0;for(;Lt>0&&b[Zt[Lt]]===0;)Lt--;for(;Tn<Ct.length-1&&b[Ct[Tn]]===0;)Tn++;fe.push(Zt[Lt]),ye.push(Ct[Tn]);let Fn=lt;for(const tr of pt.reverse()){const Hr=te[tr];Fn=X[tr]=($[tr]=Fn)+Hr}let ir=lt;for(const tr of ft){const Hr=te[tr];Hr>0?ir=X[tr]=($[tr]=ir)+Hr:X[tr]=$[tr]=ir}}const Le=new Set(fe),Ge=new Set(ye),Qe=i==="y"?X:$,gt=s==="y"?X:$;return[c,oi({},h,{encode:{y0:Yw(b,w),y:zu(Qe,w),y1:zu(gt,M)},style:Object.assign({first:(qe,lt)=>Le.has(lt),last:(qe,lt)=>Ge.has(lt)},y)})]}};D7.props={};function N7(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function Bte(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,s+=r*(l-i));else{let l=-1;for(let c of e)(c=t(c,++l,e))!=null&&(c=+c)>=c&&(r=c-i,i+=r/++n,s+=r*(c-i))}if(n>1)return s/(n-1)}function B7(e,t){const n=Bte(e,t);return n&&Math.sqrt(n)}function Fte(e,t,n){const r=N7(e),i=B7(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}var F7=Array.prototype,kte=F7.slice,mpe=F7.map;function KP(e){return()=>e}const zte=Math.sqrt(50),Ute=Math.sqrt(10),jte=Math.sqrt(2);function SA(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=zte?10:s>=Ute?5:s>=jte?2:1;let c,h,p;return i<0?(p=Math.pow(10,-i)/l,c=Math.round(e*p),h=Math.round(t*p),c/p<e&&++c,h/p>t&&--h,p=-p):(p=Math.pow(10,i)*l,c=Math.round(e/p),h=Math.round(t/p),c*p<e&&++c,h*p>t&&--h),h<c&&.5<=n&&n<2?SA(e,t,n*2):[c,h,p]}function Vte(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?SA(t,e,n):SA(e,t,n);if(!(s>=i))return[];const c=s-i+1,h=new Array(c);if(r)if(l<0)for(let p=0;p<c;++p)h[p]=(s-p)/-l;else for(let p=0;p<c;++p)h[p]=(s-p)*l;else if(l<0)for(let p=0;p<c;++p)h[p]=(i+p)/-l;else for(let p=0;p<c;++p)h[p]=(i+p)*l;return h}function _E(e,t,n){return t=+t,e=+e,n=+n,SA(e,t,n)[2]}function gpe(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?_E(t,e,n):_E(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Hte(e,t,n){let r;for(;;){const i=_E(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function Wte(e){return Math.max(1,Math.ceil(Math.log(N7(e))/Math.LN2)+1)}function Gte(){var e=W_,t=Eg,n=Wte;function r(i){Array.isArray(i)||(i=Array.from(i));var s,l=i.length,c,h,p=new Array(l);for(s=0;s<l;++s)p[s]=e(i[s],s,i);var v=t(p),y=v[0],b=v[1],w=n(p,y,b);if(!Array.isArray(w)){const H=b,X=+w;if(t===Eg&&([y,b]=Hte(y,b,X)),w=Vte(y,b,X),w[0]<=y&&(h=_E(y,b,X)),w[w.length-1]>=b)if(H>=b&&t===Eg){const $=_E(y,b,X);isFinite($)&&($>0?b=(Math.floor(b/$)+1)*$:$<0&&(b=(Math.ceil(b*-$)+1)/-$))}else w.pop()}for(var R=w.length,M=0,I=R;w[M]<=y;)++M;for(;w[I-1]>b;)--I;(M||I<R)&&(w=w.slice(M,I),R=I-M);var N=new Array(R+1),z;for(s=0;s<=R;++s)z=N[s]=[],z.x0=s>0?w[s-1]:y,z.x1=s<R?w[s]:b;if(isFinite(h)){if(h>0)for(s=0;s<l;++s)(c=p[s])!=null&&y<=c&&c<=b&&N[Math.min(R,Math.floor((c-y)/h))].push(i[s]);else if(h<0){for(s=0;s<l;++s)if((c=p[s])!=null&&y<=c&&c<=b){const H=Math.floor((y-c)*h);N[Math.min(R,H+(w[H]<=c))].push(i[s])}}}else for(s=0;s<l;++s)(c=p[s])!=null&&y<=c&&c<=b&&N[EG(w,c,0,R)].push(i[s]);return N}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:KP(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:KP([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:KP(Array.isArray(i)?kte.call(i):i),r):n},r}function qP(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?j2:o6(i);r>n;){if(r-n>600){const h=r-n+1,p=t-n+1,v=Math.log(h),y=.5*Math.exp(2*v/3),b=.5*Math.sqrt(v*y*(h-y)/h)*(p-h/2<0?-1:1),w=Math.max(n,Math.floor(t-p*y/h+b)),R=Math.min(r,Math.floor(t+(h-p)*y/h+b));qP(e,t,w,R,i)}const s=e[t];let l=n,c=r;for(bE(e,n,t),i(e[r],s)>0&&bE(e,n,r);l<c;){for(bE(e,l,c),++l,--c;i(e[l],s)<0;)++l;for(;i(e[c],s)>0;)--c}i(e[n],s)===0?bE(e,n,c):(++c,bE(e,c,r)),c<=t&&(n=c+1),t<=c&&(r=c-1)}return e}function bE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Zte(e,t=Lc){let n,r=!1;if(t.length===1){let i;for(const s of e){const l=t(s);(r?Lc(l,i)>0:Lc(l,l)===0)&&(n=s,i=l,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function TA(e,t,n){if(e=Float64Array.from(yG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return h0(e);if(t>=1)return ls(e);var r,i=(r-1)*t,s=Math.floor(i),l=ls(qP(e,s).subarray(0,s+1)),c=h0(e.subarray(s+1));return l+(c-l)*(i-s)}}function ype(e,t,n=number){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),c=+n(e[s+1],s+1,e);return l+(c-l)*(i-s)}}function Xte(e,t,n=QR){if(!isNaN(t=+t)){if(r=Float64Array.from(e,(c,h)=>QR(n(e[h],h,e))),t<=0)return vE(r);if(t>=1)return Pb(r);var r,i=Uint32Array.from(e,(c,h)=>h),s=r.length-1,l=Math.floor(s*t);return qP(i,l,0,s,(c,h)=>j2(r[c],r[h])),l=Zte(i.subarray(0,l+1),c=>r[c]),l>=0?l:-1}}function QP(e,t){return TA(e,.5,t)}function $te(e,t){return Xte(e,.5,t)}var Yte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Vy(e){return t=>t===null?e:`${e} of ${t}`}function Kte(e){if(typeof e=="function")return[e,null];const n={mean:qte,max:Jte,count:tne,first:rne,last:ine,sum:nne,min:ene,median:Qte}[e];if(!n)throw new Error(`Unknown reducer: ${e}.`);return n()}function qte(){const e=(n,r)=>mE(n,i=>+r[i]),t=Vy("mean");return[e,t]}function Qte(){const e=(n,r)=>QP(n,i=>+r[i]),t=Vy("median");return[e,t]}function Jte(){const e=(n,r)=>ls(n,i=>+r[i]),t=Vy("max");return[e,t]}function ene(){const e=(n,r)=>h0(n,i=>+r[i]),t=Vy("min");return[e,t]}function tne(){const e=(n,r)=>n.length,t=Vy("count");return[e,t]}function nne(){const e=(n,r)=>es(n,i=>+r[i]),t=Vy("sum");return[e,t]}function rne(){const e=(n,r)=>r[n[0]],t=Vy("first");return[e,t]}function ine(){const e=(n,r)=>r[n[n.length-1]],t=Vy("last");return[e,t]}const JP=(e={})=>{const{groupBy:t}=e,n=Yte(e,["groupBy"]);return(r,i)=>{const{data:s,encode:l}=i,c=t(r,i);if(!c)return[r,i];const h=(w,R)=>{if(w)return w;const{from:M}=R;if(!M)return w;const[,I]=sl(l,M);return I},p=Object.entries(n).map(([w,R])=>{const[M,I]=Kte(R),[N,z]=sl(l,w),H=h(z,R),X=c.map($=>M($,N!=null?N:s));return[w,Object.assign(Object.assign({},FK(X,(I==null?void 0:I(H))||H)),{aggregate:!0})]}),v=Object.keys(l).map(w=>{const[R,M]=sl(l,w),I=c.map(N=>R[N[0]]);return[w,zu(I,M)]}),y=c.map(w=>s[w[0]]);return[lr(c),oi({},i,{data:y,encode:Object.fromEntries([...v,...p])})]}};JP.props={};var one=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const k7="thresholds";function ane(e){const[t,n]=Eg(e);return Math.min(200,Fte(e,t,n))}const eI=(e={})=>{const{groupChannels:t=["color"],binChannels:n=["x","y"]}=e,r=one(e,["groupChannels","binChannels"]),i={},s=(l,c)=>{const{encode:h}=c,p=n.map(R=>{const[M]=sl(h,R);return M}),v=go(r,k7),y=l.filter(R=>p.every(M=>cl(M[R]))),b=[...t.map(R=>{const[M]=sl(h,R);return M}).filter(cl).map(R=>M=>R[M]),...n.map((R,M)=>{const I=p[M],N=v[R]||ane(I),z=Gte().thresholds(N).value(X=>+I[X])(y),H=new Map(z.flatMap(X=>{const{x0:$,x1:te}=X,fe=`${$},${te}`;return X.map(ye=>[ye,fe])}));return i[R]=H,X=>H.get(X)})],w=R=>b.map(M=>M(R)).join("-");return Array.from(ou(y,w).values())};return JP(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([l])=>!l.startsWith(k7)))),Object.fromEntries(n.flatMap(l=>{const c=([p])=>+i[l].get(p).split(",")[0],h=([p])=>+i[l].get(p).split(",")[1];return h.from=l,[[l,c],[`${l}1`,h]]}))),{groupBy:s}))};eI.props={};const z7=(e={})=>{const{thresholds:t}=e;return eI(Object.assign(Object.assign({},e),{thresholdsX:t,groupChannels:["color"],binChannels:["x"]}))};z7.props={};var sne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const U7=(e={})=>{const{groupBy:t="x",reverse:n=!1,orderBy:r,padding:i}=e,s=sne(e,["groupBy","reverse","orderBy","padding"]);return(l,c)=>{const{data:h,encode:p,scale:v}=c,{series:y}=v,[b]=sl(p,"y"),[w]=eE(p,"series","color"),R=L7(w,y),M=jy(t,l,c),N=P7(r)(h,b,w);N&&I7(M,N);const z=new Array(l.length);for(const H of M){n&&H.reverse();for(let X=0;X<H.length;X++)z[H[X]]=R[X]}return[l,oi({},c,{scale:{series:{domain:R,paddingInner:i}},encode:{series:zu(z)}})]}};U7.props={};function wA(e,t,n){if(e===null)return[-.5,.5];const r=L7(e,t),s=new Fy({domain:r,range:[0,1],padding:n}).getBandWidth();return[-s/2,s/2]}function AA(e,t,n){return t*(1-e)+n*e}const j7=(e={})=>{const{padding:t=0,paddingX:n=t,paddingY:r=t,random:i=Math.random}=e;return(s,l)=>{const{encode:c,scale:h}=l,{x:p,y:v}=h,[y]=sl(c,"x"),[b]=sl(c,"y"),w=wA(y,p,n),R=wA(b,v,r),M=s.map(()=>AA(i(),...R)),I=s.map(()=>AA(i(),...w));return[s,oi({scale:{x:{padding:.5},y:{padding:.5}}},l,{encode:{dy:zu(M),dx:zu(I)}})]}};j7.props={};const V7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{x:c}=l,[h]=sl(s,"x"),p=wA(h,c,t),v=r.map(()=>AA(n(),...p));return[r,oi({scale:{x:{padding:.5}}},i,{encode:{dx:zu(v)}})]}};V7.props={};const H7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{y:c}=l,[h]=sl(s,"y"),p=wA(h,c,t),v=r.map(()=>AA(n(),...p));return[r,oi({scale:{y:{padding:.5}}},i,{encode:{dy:zu(v)}})]}};H7.props={};var lne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const W7=(e={})=>{const{groupBy:t="x"}=e;return(n,r)=>{const{encode:i}=r,{x:s}=i,l=lne(i,["x"]),c=Object.entries(l).filter(([b])=>b.startsWith("y")).map(([b])=>[b,sl(i,b)[0]]),h=c.map(([b])=>[b,new Array(n.length)]),p=jy(t,n,r),v=new Array(p.length);for(let b=0;b<p.length;b++){const R=p[b].flatMap(N=>c.map(([,z])=>+z[N])),[M,I]=Eg(R);v[b]=(M+I)/2}const y=Math.max(...v);for(let b=0;b<p.length;b++){const w=y-v[b],R=p[b];for(const M of R)for(let I=0;I<c.length;I++){const[,N]=c[I],[,z]=h[I];z[M]=+N[M]+w}}return[n,oi({},r,{encode:Object.fromEntries(h.map(([b,w])=>[b,zu(w,sl(i,b)[1])]))})]}};W7.props={};const G7=(e={})=>{const{groupBy:t="x",series:n=!0}=e;return(r,i)=>{const{encode:s}=i,[l]=sl(s,"y"),[c,h]=sl(s,"y1"),[p]=n?eE(s,"series","color"):sl(s,"color"),v=jy(t,r,i),y=new Array(r.length);for(const b of v){const w=b.map(R=>+l[R]);for(let R=0;R<b.length;R++){const M=b[R],I=Math.max(...w.filter((N,z)=>z!==R));y[M]=l[M]>I?I:l[M]}}return[r,oi({},i,{encode:{y1:zu(y,h)}})]}};G7.props={};const Z7=e=>{const{groupBy:t=["x"],reducer:n=(l,c)=>c[l[0]],orderBy:r=null,reverse:i=!1,duration:s}=e;return(l,c)=>{const{encode:h}=c,v=(Array.isArray(t)?t:[t]).map(I=>[I,sl(h,I)[0]]);if(v.length===0)return[l,c];let y=[l];for(const[,I]of v){const N=[];for(const z of y){const H=Array.from(ou(z,X=>I[X]).values());N.push(...H)}y=N}if(r){const[I]=sl(h,r);I&&y.sort((N,z)=>n(N,I)-n(z,I)),i&&y.reverse()}const b=(s||3e3)/y.length,[w]=s?[Ny(l,b)]:eE(h,"enterDuration",Ny(l,b)),[R]=eE(h,"enterDelay",Ny(l,0)),M=new Array(l.length);for(let I=0,N=0;I<y.length;I++){const z=y[I],H=ls(z,X=>+w[X]);for(const X of z)M[X]=+R[X]+N;N+=H}return[l,oi({},c,{encode:{enterDuration:Kw(w),enterDelay:Kw(M)}})]}};Z7.props={};var une=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function cne(e){return typeof e=="function"?e:{min:(n,r)=>h0(n,i=>r[+i]),max:(n,r)=>ls(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>mE(n,i=>r[+i]),median:(n,r)=>QP(n,i=>r[+i]),sum:(n,r)=>es(n,i=>r[+i]),deviation:(n,r)=>B7(n,i=>r[+i])}[e]||ls}const X7=(e={})=>{const{groupBy:t="x",basis:n="max"}=e;return(r,i)=>{const{encode:s,tooltip:l}=i,{x:c}=s,h=une(s,["x"]),p=Object.entries(h).filter(([M])=>M.startsWith("y")).map(([M])=>[M,sl(s,M)[0]]),[,v]=p.find(([M])=>M==="y"),y=p.map(([M])=>[M,new Array(r.length)]),b=jy(t,r,i),w=cne(n);for(const M of b){const I=w(M,v);for(const N of M)for(let z=0;z<p.length;z++){const[,H]=p[z],[,X]=y[z];X[N]=+H[N]/I}}const R=Dv(l)||(l==null?void 0:l.items)&&(l==null?void 0:l.items.length)!==0;return[r,oi({},i,Object.assign({encode:Object.fromEntries(y.map(([M,I])=>[M,zu(I,sl(s,M)[1])]))},!R&&s.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};X7.props={};function $7(e,t){return[e[0]]}function fne(e,t){const n=e.length-1;return[e[n]]}function hne(e,t){const n=Pb(e,r=>t[r]);return[e[n]]}function dne(e,t){const n=vE(e,r=>t[r]);return[e[n]]}function pne(e){return typeof e=="function"?e:{first:$7,last:fne,max:hne,min:dne}[e]||$7}const OA=(e={})=>{const{groupBy:t="series",channel:n,selector:r}=e;return(i,s)=>{const{encode:l}=s,c=jy(t,i,s),[h]=sl(l,n),p=pne(r);return[c.flatMap(v=>p(v,h)),s]}};OA.props={};var vne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Y7=(e={})=>{const{selector:t}=e,n=vne(e,["selector"]);return OA(Object.assign({channel:"x",selector:t},n))};Y7.props={};var mne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const K7=(e={})=>{const{selector:t}=e,n=mne(e,["selector"]);return OA(Object.assign({channel:"y",selector:t},n))};K7.props={};var gne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xE=(e={})=>{const{channels:t=["x","y"]}=e,n=gne(e,["channels"]),r=(i,s)=>jy(t,i,s);return JP(Object.assign(Object.assign({},n),{groupBy:r}))};xE.props={};const q7=(e={})=>xE(Object.assign(Object.assign({},e),{channels:["x","color","series"]}));q7.props={};const Q7=(e={})=>xE(Object.assign(Object.assign({},e),{channels:["y","color","series"]}));Q7.props={};const J7=(e={})=>xE(Object.assign(Object.assign({},e),{channels:["color"]}));J7.props={};function yne(e,t,n){return(t.length!==2?Tg(g2(e,t,n),([r,i],[s,l])=>Lc(i,l)||Lc(r,s)):Tg(ou(e,n),([r,i],[s,l])=>t(i,l)||Lc(r,s))).map(([r])=>r)}var e9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function _ne(e,t,n){const{by:r=e,reducer:i="max"}=t,[s]=sl(n,r);if(typeof i=="function")return l=>i(l,s);if(i==="max")return l=>ls(l,c=>+s[c]);if(i==="min")return l=>h0(l,c=>+s[c]);if(i==="sum")return l=>es(l,c=>+s[c]);if(i==="median")return l=>QP(l,c=>+s[c]);if(i==="mean")return l=>mE(l,c=>+s[c]);if(i==="first")return l=>s[l[0]];if(i==="last")return l=>s[l[l.length-1]];throw new Error(`Unknown reducer: ${i}`)}function bne(e,t,n){const{reverse:r,channel:i}=n,{encode:s}=t,[l]=sl(s,i),c=Tg(e,h=>l[h]);return r&&c.reverse(),[c,t]}function xne(e,t,n){if(!Array.isArray(n))return e;const r=new Set(n);return e.filter(i=>r.has(t[i]))}function Ene(e,t,n){var r;const{reverse:i,slice:s,channel:l}=n,c=e9(n,["reverse","slice","channel"]),{encode:h,scale:p={}}=t,v=(r=p[l])===null||r===void 0?void 0:r.domain,[y]=sl(h,l),b=_ne(l,c,h),w=xne(e,y,v),R=yne(w,b,N=>y[N]);i&&R.reverse();const M=typeof s=="number"?[0,s]:s,I=s?R.slice(...M):R;return[e,oi(t,{scale:{[l]:{domain:I}}})]}const CA=(e={})=>{const{reverse:t=!1,slice:n,channel:r,ordinal:i=!0}=e,s=e9(e,["reverse","slice","channel","ordinal"]);return(l,c)=>i?Ene(l,c,Object.assign({reverse:t,slice:n,channel:r},s)):bne(l,c,Object.assign({reverse:t,slice:n,channel:r},s))};CA.props={};const t9=(e={})=>CA(Object.assign(Object.assign({},e),{channel:"x"}));t9.props={};const n9=(e={})=>CA(Object.assign(Object.assign({},e),{channel:"y"}));n9.props={};const r9=(e={})=>CA(Object.assign(Object.assign({},e),{channel:"color"}));r9.props={};function Sne(e,t){return typeof t=="string"?e.map(n=>n[t]):e.map(t)}function Tne(e,t){if(typeof e=="function")return n=>e(n,t);if(e==="sum")return n=>es(n,r=>+t[r]);throw new Error(`Unknown reducer: ${e}`)}const i9=(e={})=>{const{field:t,channel:n="y",reducer:r="sum"}=e;return(i,s)=>{const{data:l,encode:c}=s,[h]=sl(c,"x"),p=t?Sne(l,t):sl(c,n)[0],v=Tne(r,p),y=y2(i,v,b=>h[b]).map(b=>b[1]);return[i,oi({},s,{scale:{x:{flex:y}}})]}};i9.props={};function wne(e){const{padding:t=0,direction:n="col"}=e;return(r,i,s)=>{const l=r.length;if(l===0)return[];const{innerWidth:c,innerHeight:h}=s,p=h/c;let v=Math.ceil(Math.sqrt(i/p)),y=c/v,b=Math.ceil(i/v),w=b*y;for(;w>h;)v=v+1,y=c/v,b=Math.ceil(i/v),w=b*y;const R=h-b*y,M=b<=1?0:R/(b-1),[I,N]=b<=1?[(c-l*y)/(l-1),(h-y)/2]:[0,0];return r.map((z,H)=>{const[X,$,te,fe]=HR(z),ye=n==="col"?H%v:Math.floor(H/b),Le=n==="col"?Math.floor(H/v):H%b,Ge=ye*y,Qe=(b-Le-1)*y+R,gt=(y-t)/te,qe=(y-t)/fe,lt=Ge-X+I*ye+1/2*t,ft=Qe-$-M*Le-N+1/2*t;return`translate(${lt}, ${ft}) scale(${gt}, ${qe})`})}}const o9=e=>(t,n)=>[t,oi({},n,{modifier:wne(e),axis:!1})];o9.props={};function Ane(e,t,n,r){const i=e.length;if(r>=i||r===0)return e;const s=w=>t[e[w]]*1,l=w=>n[e[w]]*1,c=[],h=(i-2)/(r-2);let p=0,v,y,b;c.push(p);for(let w=0;w<r-2;w++){let R=0,M=0,I=Math.floor((w+1)*h)+1,N=Math.floor((w+2)*h)+1;N=Math.min(N,i);const z=N-I;for(;I<N;I++)R+=s(I),M+=l(I);R/=z,M/=z;let H=Math.floor((w+0)*h)+1;const X=Math.floor((w+1)*h)+1,$=[s(p),l(p)];for(v=y=-1;H<X;H++)y=Math.abs(($[0]-R)*(s(H)-$[1])-($[0]-l(H))*(M-$[0]))*.5,y>v&&(v=y,b=H);c.push(b),p=b}return c.push(i-1),c.map(w=>e[w])}function One(e){if(typeof e=="function")return e;if(e==="lttb")return Ane;const t={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,s)=>[r[vE(r,l=>s[l])]],max:(r,i,s)=>[r[Pb(r,l=>s[l])]],median:(r,i,s)=>[r[$te(r,l=>s[l])]]},n=t[e]||t.median;return(r,i,s,l)=>{const c=Math.max(1,Math.floor(r.length/l));return Cne(r,c).flatMap(p=>n(p,i,s))}}function Cne(e,t){const n=e.length,r=[];let i=0;for(;i<n;)r.push(e.slice(i,i+=t));return r}const a9=(e={})=>{const{strategy:t="median",thresholds:n=2e3,groupBy:r=["series","color"]}=e,i=One(t);return(s,l)=>{const{encode:c}=l,h=jy(r,s,l),[p]=sl(c,"x"),[v]=sl(c,"y");return[h.flatMap(y=>i(y,p,v,n)),l]}};a9.props={};function Rne(e){return typeof e=="object"?[e.value,e.ordinal]:[e,!0]}const s9=(e={})=>(t,n)=>{const{encode:r,data:i}=n,s=Object.entries(e).map(([v,y])=>{const[b]=sl(r,v);if(!b)return null;const[w,R=!0]=Rne(y);if(typeof w=="function")return M=>w(b[M]);if(R){const M=Array.isArray(w)?w:[w];return M.length===0?null:I=>M.includes(b[I])}else{const[M,I]=w;return N=>b[N]>=M&&b[N]<=I}}).filter(cl);if(s.length===0)return[t,n];const l=v=>s.every(y=>y(v)),c=t.filter(l),h=c.map((v,y)=>y),p=Object.entries(r).map(([v,y])=>[v,Object.assign(Object.assign({},y),{value:h.map(b=>y.value[c[b]]).filter(b=>b!==void 0)})]);return[h,oi({},n,{encode:Object.fromEntries(p),data:c.map(v=>i[v])})]};s9.props={};var l9={},tI={},nI=34,EE=10,rI=13;function u9(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Mne(e,t){var n=u9(e);return function(r,i){return t(n(r),i,e)}}function c9(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Ip(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Pne(e){return e<0?"-"+Ip(-e,6):e>9999?"+"+Ip(e,6):Ip(e,4)}function Ine(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Pne(e.getUTCFullYear(),4)+"-"+Ip(e.getUTCMonth()+1,2)+"-"+Ip(e.getUTCDate(),2)+(i?"T"+Ip(t,2)+":"+Ip(n,2)+":"+Ip(r,2)+"."+Ip(i,3)+"Z":r?"T"+Ip(t,2)+":"+Ip(n,2)+":"+Ip(r,2)+"Z":n||t?"T"+Ip(t,2)+":"+Ip(n,2)+"Z":"")}function Lne(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(y,b){var w,R,M=i(y,function(I,N){if(w)return w(I,N-1);R=I,w=b?Mne(I,b):u9(I)});return M.columns=R||[],M}function i(y,b){var w=[],R=y.length,M=0,I=0,N,z=R<=0,H=!1;y.charCodeAt(R-1)===EE&&--R,y.charCodeAt(R-1)===rI&&--R;function X(){if(z)return tI;if(H)return H=!1,l9;var te,fe=M,ye;if(y.charCodeAt(fe)===nI){for(;M++<R&&y.charCodeAt(M)!==nI||y.charCodeAt(++M)===nI;);return(te=M)>=R?z=!0:(ye=y.charCodeAt(M++))===EE?H=!0:ye===rI&&(H=!0,y.charCodeAt(M)===EE&&++M),y.slice(fe+1,te-1).replace(/""/g,'"')}for(;M<R;){if((ye=y.charCodeAt(te=M++))===EE)H=!0;else if(ye===rI)H=!0,y.charCodeAt(M)===EE&&++M;else if(ye!==n)continue;return y.slice(fe,te)}return z=!0,y.slice(fe,R)}for(;(N=X())!==tI;){for(var $=[];N!==l9&&N!==tI;)$.push(N),N=X();b&&($=b($,I++))==null||w.push($)}return w}function s(y,b){return y.map(function(w){return b.map(function(R){return v(w[R])}).join(e)})}function l(y,b){return b==null&&(b=c9(y)),[b.map(v).join(e)].concat(s(y,b)).join(`
`)}function c(y,b){return b==null&&(b=c9(y)),s(y,b).join(`
`)}function h(y){return y.map(p).join(`
`)}function p(y){return y.map(v).join(e)}function v(y){return y==null?"":y instanceof Date?Ine(y):t.test(y+="")?'"'+y.replace(/"/g,'""')+'"':y}return{parse:r,parseRows:i,format:l,formatBody:c,formatRows:h,formatRow:p,formatValue:v}}function Dne(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Nne&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const Nne=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var Bne=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const f9=e=>{const{value:t,format:n=t.split(".").pop(),delimiter:r=",",autoType:i=!0}=e;return()=>Bne(void 0,void 0,void 0,function*(){const s=yield fetch(t);if(n==="csv"){const l=yield s.text();return Lne(r).parse(l,i?Dne:yg)}else if(n==="json")return yield s.json();throw new Error(`Unknown format: ${n}.`)})};f9.props={};const h9=e=>{const{value:t}=e;return()=>t};h9.props={};function Fne(e,t){return e.map(n=>{if(Array.isArray(n)){const[r,i=t]=n;return[r,i]}return[n,t]})}const d9=e=>{const{fields:t=[]}=e,n=Fne(t,!0);return r=>{const i=(s,l)=>n.reduce((c,[h,p=!0])=>c!==0?c:p?s[h]<l[h]?-1:+(s[h]!==l[h]):s[h]>l[h]?-1:+(s[h]!==l[h]),0);return[...r].sort(i)}};d9.props={};function _pe(e){return e!=null&&!Number.isNaN(e)}const p9=e=>{const{callback:t}=e;return n=>Array.isArray(n)?[...n].sort(t):n};p9.props={};function kne(e){return e!=null&&!Number.isNaN(e)}const v9=e=>{const{callback:t=kne}=e;return n=>n.filter(t)};v9.props={};function zne(e,t=[]){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}const m9=e=>{const{fields:t}=e;return n=>n.map(r=>zne(r,t))};m9.props={};function Une(e){return Object.keys(e).length===0}const g9=e=>t=>{if(!e||Une(e))return t;const n=r=>Object.entries(r).reduce((i,[s,l])=>(i[e[s]||s]=l,i),{});return t.map(n)};g9.props={};function jne(e){return!e||Object.keys(e).length===0}const y9=e=>{const{fields:t,key:n="key",value:r="value"}=e;return i=>jne(t)?i:i.flatMap(s=>t.map(l=>Object.assign(Object.assign({},s),{[n]:l,[r]:s[l]})))};y9.props={};const _9=e=>{const{start:t,end:n}=e;return r=>r.slice(t,n)};_9.props={};const b9=e=>{const{callback:t=yg}=e;return n=>t(n)};b9.props={};const x9=e=>{const{callback:t=yg}=e;return n=>Array.isArray(n)?n.map(t):n};x9.props={};function E9(e){return typeof e=="string"?t=>t[e]:e}const S9=e=>{const{join:t,on:n,select:r=[],as:i=r,unknown:s=NaN}=e,[l,c]=n,h=E9(c),p=E9(l),v=g2(t,([y])=>y,y=>h(y));return y=>y.map(b=>{const w=v.get(p(b));return Object.assign(Object.assign({},b),r.reduce((R,M,I)=>(R[i[I]]=w?w[M]:s,R),{}))})};S9.props={};var Vne=D(53843),Hne=D.n(Vne);function bpe(e){return e!=null&&!Number.isNaN(e)}const T9=e=>{const{field:t,groupBy:n,as:r=["y","size"],min:i,max:s,size:l=10,width:c}=e,[h,p]=r;return v=>Array.from(ou(v,b=>n.map(w=>b[w]).join("-")).values()).map(b=>{const w=Hne().create(b.map(I=>I[t]),{min:i,max:s,size:l,width:c}),R=w.map(I=>I.x),M=w.map(I=>I.y);return Object.assign(Object.assign({},b[0]),{[h]:R,[p]:M})})};T9.props={};const w9=()=>e=>(console.log("G2 data section:",e),e);w9.props={};var Wne=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};function Gne(e,t){return{set(n,r,i){if(t[n]===void 0)return this;const s=r?r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this},setAsync(n,r,i){return Wne(this,void 0,void 0,function*(){if(t[n]===void 0)return this;const s=r?yield r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this})}}}const iI=Math.PI/180,SE=64,RA=2048;function Zne(e){return e.text}function Xne(){return"serif"}function A9(){return"normal"}function $ne(e){return e.value}function Yne(){return~~(Math.random()*2)*90}function Kne(){return 1}function qne(){}function Qne(e,t,n,r){if(t.sprite)return;const i=e.context,s=e.ratio;i.clearRect(0,0,(SE<<5)/s,RA/s);let l=0,c=0,h=0;const p=n.length;for(--r;++r<p;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font;let b=i.measureText(t.text+"m").width*s,w=t.size<<1;if(t.rotate){const R=Math.sin(t.rotate*iI),M=Math.cos(t.rotate*iI),I=b*M,N=b*R,z=w*M,H=w*R;b=Math.max(Math.abs(I+H),Math.abs(I-H))+31>>5<<5,w=~~Math.max(Math.abs(N+z),Math.abs(N-z))}else b=b+31>>5<<5;if(w>h&&(h=w),l+b>=SE<<5&&(l=0,c+=h,h=0),c+w>=RA)break;i.translate((l+(b>>1))/s,(c+(w>>1))/s),t.rotate&&i.rotate(t.rotate*iI),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=b,t.height=w,t.xoff=l,t.yoff=c,t.x1=b>>1,t.y1=w>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=b}const v=i.getImageData(0,0,(SE<<5)/s,RA/s).data,y=[];for(;--r>=0;){if(t=n[r],!t.hasText)continue;const b=t.width,w=b>>5;let R=t.y1-t.y0;for(let N=0;N<R*w;N++)y[N]=0;if(l=t.xoff,l==null)return;c=t.yoff;let M=0,I=-1;for(let N=0;N<R;N++){for(let z=0;z<b;z++){const H=w*N+(z>>5),X=v[(c+N)*(SE<<5)+(l+z)<<2]?1<<31-z%32:0;y[H]|=X,M|=X}M?I=N:(t.y0++,R--,N--,c++)}t.y1=t.y0+I,t.sprite=y.slice(0,(t.y1-t.y0)*w)}}function Jne(e,t,n){n>>=5;const r=e.sprite,i=e.width>>5,s=e.x-(i<<4),l=s&127,c=32-l,h=e.y1-e.y0;let p=(e.y+e.y0)*n+(s>>5),v;for(let y=0;y<h;y++){v=0;for(let b=0;b<=i;b++)if((v<<c|(b<i?(v=r[y*i+b])>>>l:0))&t[p+b])return!0;p+=n}return!1}function ere(e,t){const n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function tre(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function O9(e){const t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function nre(e){const n=4*e[0]/e[1];let r=0,i=0;return function(s){const l=s<0?-1:1;switch(Math.sqrt(1+4*l*s)-l&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function C9(e){const t=[];let n=-1;for(;++n<e;)t[n]=0;return t}function rre(){return document.createElement("canvas")}function Hy(e){return typeof e=="function"?e:function(){return e}}const ire={archimedean:O9,rectangular:nre};function ore(){let e=[256,256],t=Zne,n=Xne,r=$ne,i=A9,s=Yne,l=Kne,c=O9,h=Math.random,p=qne,v=[],y=null,b=1/0;const w=A9,R=rre,M={};M.start=function(){const[z,H]=e,X=I(R()),$=M.board?M.board:C9((e[0]>>5)*e[1]),te=v.length,fe=[],ye=v.map(function(gt,qe,lt){return gt.text=t.call(this,gt,qe,lt),gt.font=n.call(this,gt,qe,lt),gt.style=w.call(this,gt,qe,lt),gt.weight=i.call(this,gt,qe,lt),gt.rotate=s.call(this,gt,qe,lt),gt.size=~~r.call(this,gt,qe,lt),gt.padding=l.call(this,gt,qe,lt),gt}).sort(function(gt,qe){return qe.size-gt.size});let Le=-1,Ge=M.board?[{x:0,y:0},{x:z,y:H}]:void 0;y&&clearInterval(y),y=setInterval(Qe,0),Qe();function Qe(){const gt=Date.now();for(;Date.now()-gt<b&&++Le<te;){const qe=ye[Le];qe.x=z*(h()+.5)>>1,qe.y=H*(h()+.5)>>1,Qne(X,qe,ye,Le),qe.hasText&&N($,qe,Ge)&&(p.call(null,"word",{cloud:M,word:qe}),fe.push(qe),Ge?M.hasImage||ere(Ge,qe):Ge=[{x:qe.x+qe.x0,y:qe.y+qe.y0},{x:qe.x+qe.x1,y:qe.y+qe.y1}],qe.x-=e[0]>>1,qe.y-=e[1]>>1)}M._tags=fe,M._bounds=Ge,Le>=te&&(M.stop(),p.call(null,"end",{cloud:M,words:fe,bounds:Ge}))}return M},M.stop=function(){return y&&(clearInterval(y),y=null),M};function I(z){z.width=z.height=1;const H=Math.sqrt(z.getContext("2d").getImageData(0,0,1,1).data.length>>2);z.width=(SE<<5)/H,z.height=RA/H;const X=z.getContext("2d");return X.fillStyle=X.strokeStyle="red",X.textAlign="center",X.textBaseline="middle",{context:X,ratio:H}}function N(z,H,X){const $=H.x,te=H.y,fe=Math.sqrt(e[0]*e[0]+e[1]*e[1]),ye=c(e),Le=h()<.5?1:-1;let Ge,Qe=-Le,gt,qe;for(;(Ge=ye(Qe+=Le))&&(gt=~~Ge[0],qe=~~Ge[1],!(Math.min(Math.abs(gt),Math.abs(qe))>=fe));)if(H.x=$+gt,H.y=te+qe,!(H.x+H.x0<0||H.y+H.y0<0||H.x+H.x1>e[0]||H.y+H.y1>e[1])&&(!X||!Jne(H,z,e[0]))&&(!X||tre(H,X))){const lt=H.sprite,ft=H.width>>5,pt=e[0]>>5,Zt=H.x-(ft<<4),Ct=Zt&127,Lt=32-Ct,Tn=H.y1-H.y0;let Fn,ir=(H.y+H.y0)*pt+(Zt>>5);for(let tr=0;tr<Tn;tr++){Fn=0;for(let Hr=0;Hr<=ft;Hr++)z[ir+Hr]|=Fn<<Lt|(Hr<ft?(Fn=lt[tr*ft+Hr])>>>Ct:0);ir+=pt}return delete H.sprite,!0}return!1}return M.createMask=z=>{const H=document.createElement("canvas"),[X,$]=e;if(!X||!$)return;const te=X>>5,fe=C9((X>>5)*$);H.width=X,H.height=$;const ye=H.getContext("2d");ye.drawImage(z,0,0,z.width,z.height,0,0,X,$);const Le=ye.getImageData(0,0,X,$).data;for(let Ge=0;Ge<$;Ge++)for(let Qe=0;Qe<X;Qe++){const gt=te*Ge+(Qe>>5),qe=Ge*X+Qe<<2,ft=Le[qe]>=250&&Le[qe+1]>=250&&Le[qe+2]>=250?1<<31-Qe%32:0;fe[gt]|=ft}M.board=fe,M.hasImage=!0},M.timeInterval=function(z){b=z==null?1/0:z},M.words=function(z){v=z},M.size=function(z=[]){e=[+z[0],+z[1]]},M.text=function(z){t=Hy(z)},M.font=function(z){n=Hy(z)},M.fontWeight=function(z){i=Hy(z)},M.rotate=function(z){s=Hy(z)},M.spiral=function(z){c=ire[z]||z},M.fontSize=function(z){r=Hy(z)},M.padding=function(z){l=Hy(z)},M.random=function(z){h=Hy(z)},M.on=function(z){p=Hy(z)},M}var are=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},sre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const lre={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function ure(e){return new Promise((t,n)=>{if(e instanceof HTMLImageElement){t(e);return}if(typeof e=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=()=>t(r),r.onerror=()=>{console.error(`'image ${e} load failed !!!'`),n()};return}n()})}function cre(e,t){if(typeof e=="function")return e;if(Array.isArray(e)){const[n,r]=e;if(!t)return()=>(r+n)/2;const[i,s]=t;return s===i?()=>(r+n)/2:({value:l})=>(r-n)/(s-i)*(l-i)+n}return()=>e}const R9=e=>t=>are(void 0,void 0,void 0,function*(){const n=Object.assign({},lre,e),r=ore();yield Gne(r,n).set("fontSize",N=>{const z=t.map(H=>H.value);return cre(N,[h0(z),ls(z)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").setAsync("imageMask",ure,r.createMask),r.words([...t]);const i=r.start(),[s,l]=n.size,c=[{x:0,y:0},{x:s,y:l}],{_bounds:h=c,_tags:p,hasImage:v}=i,y=p.map(N=>{var{x:z,y:H,font:X}=N,$=sre(N,["x","y","font"]);return Object.assign(Object.assign({},$),{x:z+s/2,y:H+l/2,fontFamily:X})}),[{x:b,y:w},{x:R,y:M}]=h,I={text:"",value:0,opacity:0,fontSize:0};return y.push(Object.assign(Object.assign({},I),{x:v?0:b,y:v?0:w}),Object.assign(Object.assign({},I),{x:v?s:R,y:v?l:M})),y});R9.props={};function oI(e){const{min:t,max:n}=e;return[[t[0],t[1]],[n[0],n[1]]]}function M9(e,t){const[n,r]=e,[i,s]=t;return n>=i[0]&&n<=s[0]&&r>=i[1]&&r<=s[1]}function fre(e,t){const[n,r]=e;return!(M9(n,t)&&M9(r,t))}function hre(e,t){const[n,r]=e,[i,s]=t;return n[0]<s[0]&&r[0]>i[0]&&n[1]<s[1]&&r[1]>i[1]}const dre=e=>{const{priority:t}=e;return n=>{const r=[];return t&&n.sort(t),n.forEach(i=>{Cw(i);const s=i.getLocalBounds();r.some(c=>hre(oI(s),oI(c.getLocalBounds())))?tM(i):r.push(i)}),n}};function pre([e,t],[n,r]){return r>e&&t>n}function MA(){const e=new Map;return[r=>e.get(r),(r,i)=>e.set(r,i)]}function vre(e){const t=e.cloneNode(!0),n=t.getElementById("connector");n&&t.removeChild(n);const{min:r,max:i}=t.getRenderBounds();return t.destroy(),{min:r,max:i}}const mre=e=>{const{maxIterations:t=10,maxError:n=.1,padding:r=1}=e;return i=>{const s=i.length;if(s<=1)return i;const[l,c]=MA(),[h,p]=MA(),[v,y]=MA(),[b,w]=MA();for(const R of i){const{min:M,max:I}=vre(R),[N,z]=M,[H,X]=I;c(R,z),p(R,z),y(R,X-z),w(R,[N,H])}for(let R=0;R<t;R++){i.sort((I,N)=>Lc(h(I),h(N)));let M=0;for(let I=0;I<s-1;I++){const N=i[I];let z=I+1,H;for(;(H=i[z])&&!pre(b(N),b(H));)z+=1;if(H){const X=h(N),$=v(N),te=h(H),fe=te-(X+$);if(fe<r){const ye=(r-fe)/2;M=Math.max(M,ye),p(N,X-ye),p(H,te+ye)}}}if(M<n)break}for(const R of i)R.style.y+=h(R)-l(R);return i}},gre=()=>e=>(e.forEach(t=>{Cw(t);const n=t.attr("bounds"),r=t.getLocalBounds();fre(oI(r),n)&&tM(t)}),e);function yre(e){return typeof e=="object"?e:H0(e)}function aI(e){let t=e/255;return t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),t}function P9(e,t,n){return .2126*aI(e)+.7152*aI(t)+.0722*aI(n)}function I9(e,t){const{r:n,g:r,b:i}=e,{r:s,g:l,b:c}=t,h=P9(n,r,i),p=P9(s,l,c);return(Math.max(h,p)+.05)/(Math.min(h,p)+.05)}function _re(e,t){const n=Pb(t,r=>I9(e,yre(r)));return t[n]}const bre=e=>{const{threshold:t=4.5,palette:n=["#000","#fff"]}=e;return r=>(r.forEach(i=>{const s=i.attr("dependentElement").parsedStyle.fill,l=i.parsedStyle.fill;I9(l,s)<t&&i.attr("fill",_re(s,n))}),r)},xre=(e,t)=>{const[[n,r],[i,s]]=t,[[l,c],[h,p]]=e;let v=0,y=0;return l<n?v=n-l:h>i&&(v=i-h),c<r?y=r-c:p>s&&(y=s-p),[v,y]},Ere=()=>(e,{canvas:t})=>{const{width:n,height:r}=t.getConfig();return e.forEach(i=>{Cw(i);const{max:s,min:l}=i.getRenderBounds(),[c,h]=s,[p,v]=l,y=xre([[p,v],[c,h]],[[0,0],[n,r]]);i.style.x+=y[0],i.style.y+=y[1]}),e};function Sre(){return{"data.fetch":f9,"data.inline":h9,"data.sortBy":d9,"data.sort":p9,"data.filter":v9,"data.pick":m9,"data.rename":g9,"data.fold":y9,"data.slice":_9,"data.custom":b9,"data.map":x9,"data.join":S9,"data.kde":T9,"data.log":w9,"data.wordCloud":R9,"transform.stackY":D7,"transform.binX":z7,"transform.bin":eI,"transform.dodgeX":U7,"transform.jitter":j7,"transform.jitterX":V7,"transform.jitterY":H7,"transform.symmetryY":W7,"transform.diffY":G7,"transform.stackEnter":Z7,"transform.normalizeY":X7,"transform.select":OA,"transform.selectX":Y7,"transform.selectY":K7,"transform.groupX":q7,"transform.groupY":Q7,"transform.groupColor":J7,"transform.group":xE,"transform.sortX":t9,"transform.sortY":n9,"transform.sortColor":r9,"transform.flexX":i9,"transform.pack":o9,"transform.sample":a9,"transform.filter":s9,"coordinate.cartesian":uN,"coordinate.polar":qf,"coordinate.transpose":LM,"coordinate.theta":cN,"coordinate.parallel":DM,"coordinate.fisheye":fN,"coordinate.radial":T2,"coordinate.radar":hN,"encode.constant":dN,"encode.field":pN,"encode.transform":vN,"encode.column":mN,"mark.interval":TN,"mark.rect":AN,"mark.line":QN,"mark.point":VB,"mark.text":$B,"mark.cell":KB,"mark.area":iF,"mark.link":oP,"mark.image":yF,"mark.polygon":SF,"mark.box":OF,"mark.vector":RF,"mark.lineX":LF,"mark.lineY":BF,"mark.connector":UF,"mark.range":HF,"mark.rangeX":ZF,"mark.rangeY":YF,"mark.path":e8,"mark.shape":r8,"mark.density":a8,"mark.heatmap":c8,"mark.wordCloud":uP,"palette.category10":f8,"palette.category20":h8,"scale.linear":d8,"scale.ordinal":g8,"scale.band":b8,"scale.identity":x8,"scale.point":E8,"scale.time":W8,"scale.log":Z8,"scale.pow":X8,"scale.sqrt":$8,"scale.threshold":Y8,"scale.quantile":K8,"scale.quantize":q8,"scale.sequential":Q8,"scale.constant":J8,"theme.classic":ek,"theme.classicDark":nk,"theme.academy":rk,"theme.light":_P,"theme.dark":tk,"component.axisX":ik,"component.axisY":ok,"component.legendCategory":xP,"component.legendContinuous":Cy,"component.legends":sk,"component.title":uk,"component.sliderX":dk,"component.sliderY":pk,"component.scrollbarX":vk,"component.scrollbarY":mk,"animation.scaleInX":wP,"animation.scaleOutX":pJ,"animation.scaleInY":gk,"animation.scaleOutY":vJ,"animation.waveIn":yk,"animation.fadeIn":_k,"animation.fadeOut":bk,"animation.zoomIn":mJ,"animation.zoomOut":gJ,"animation.pathIn":xk,"animation.morphing":wk,"animation.growInX":Ak,"animation.growInY":Ok,"interaction.elementHighlight":vA,"interaction.elementHighlightByX":Ck,"interaction.elementHighlightByColor":Rk,"interaction.elementSelect":mA,"interaction.elementSelectByX":Mk,"interaction.elementSelectByColor":Pk,"interaction.fisheye":LJ,"interaction.chartIndex":Ik,"interaction.tooltip":Zk,"interaction.legendFilter":see,"interaction.legendHighlight":lee,"interaction.brushHighlight":DP,"interaction.brushXHighlight":pee,"interaction.brushYHighlight":vee,"interaction.brushAxisHighlight":Tee,"interaction.brushFilter":kP,"interaction.brushXFilter":Cee,"interaction.brushYFilter":Ree,"interaction.sliderFilter":o7,"interaction.scrollbarFilter":Dee,"interaction.poptip":l7,"interaction.treemapDrillDown":tte,"interaction.elementPointMove":ste,"composition.spaceLayer":S7,"composition.spaceFlex":T7,"composition.facetRect":C7,"composition.repeatMatrix":bte,"composition.facetCircle":Ate,"composition.timingKeyframe":M7,"labelTransform.overlapHide":dre,"labelTransform.overlapDodgeY":mre,"labelTransform.overflowHide":gre,"labelTransform.contrastReverse":bre,"labelTransform.exceedAdjust":Ere}}var TE=e=>e;function PA(e,t){e&&D9.hasOwnProperty(e.type)&&D9[e.type](e,t)}var L9={Feature:function(e,t){PA(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)PA(n[r].geometry,t)}},D9={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){sI(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)sI(n[r],t,0)},Polygon:function(e,t){N9(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)N9(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)PA(n[r],t)}};function sI(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function N9(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)sI(e[n],t,1);t.polygonEnd()}function ex(e,t){e&&L9.hasOwnProperty(e.type)?L9[e.type](e,t):PA(e,t)}class Rg{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],l=t+s,c=Math.abs(t)<Math.abs(s)?t-(l-s):s-(l-t);c&&(n[r++]=c),t=l}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,l=0;if(n>0){for(l=t[--n];n>0&&(r=l,i=t[--n],l=r+i,s=i-(l-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=l+i,i==r-l&&(l=r))}return l}}function xpe(e,t){const n=new Rg;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function Epe(e,t){const n=new Rg;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}var Qa=1e-6,B9=1e-12,el=Math.PI,Yc=el/2,F9=el/4,p0=el*2,xd=180/el,Dc=el/180,zl=Math.abs,tx=Math.atan,Mg=Math.atan2,Ws=Math.cos,IA=Math.ceil,k9=Math.exp,Spe=Math.floor,Tpe=Math.hypot,LA=Math.log,lI=Math.pow,As=Math.sin,ev=Math.sign||function(e){return e>0?1:e<0?-1:0},Lp=Math.sqrt,uI=Math.tan;function z9(e){return e>1?0:e<-1?el:Math.acos(e)}function tv(e){return e>1?Yc:e<-1?-Yc:Math.asin(e)}function wpe(e){return(e=As(e/2))*e}function nv(){}var cI=new Rg,fI=new Rg,U9,j9,hI,dI,Wy={point:nv,lineStart:nv,lineEnd:nv,polygonStart:function(){Wy.lineStart=Tre,Wy.lineEnd=Are},polygonEnd:function(){Wy.lineStart=Wy.lineEnd=Wy.point=nv,cI.add(zl(fI)),fI=new Rg},result:function(){var e=cI/2;return cI=new Rg,e}};function Tre(){Wy.point=wre}function wre(e,t){Wy.point=V9,U9=hI=e,j9=dI=t}function V9(e,t){fI.add(dI*e-hI*t),hI=e,dI=t}function Are(){V9(U9,j9)}var H9=Wy,nx=1/0,DA=nx,wE=-nx,NA=wE,Ore={point:Cre,lineStart:nv,lineEnd:nv,polygonStart:nv,polygonEnd:nv,result:function(){var e=[[nx,DA],[wE,NA]];return wE=NA=-(DA=nx=1/0),e}};function Cre(e,t){e<nx&&(nx=e),e>wE&&(wE=e),t<DA&&(DA=t),t>NA&&(NA=t)}var BA=Ore,pI=0,vI=0,AE=0,FA=0,kA=0,rx=0,mI=0,gI=0,OE=0,W9,G9,Fm,km,Uv={point:g1,lineStart:Z9,lineEnd:X9,polygonStart:function(){Uv.lineStart=Pre,Uv.lineEnd=Ire},polygonEnd:function(){Uv.point=g1,Uv.lineStart=Z9,Uv.lineEnd=X9},result:function(){var e=OE?[mI/OE,gI/OE]:rx?[FA/rx,kA/rx]:AE?[pI/AE,vI/AE]:[NaN,NaN];return pI=vI=AE=FA=kA=rx=mI=gI=OE=0,e}};function g1(e,t){pI+=e,vI+=t,++AE}function Z9(){Uv.point=Rre}function Rre(e,t){Uv.point=Mre,g1(Fm=e,km=t)}function Mre(e,t){var n=e-Fm,r=t-km,i=Lp(n*n+r*r);FA+=i*(Fm+e)/2,kA+=i*(km+t)/2,rx+=i,g1(Fm=e,km=t)}function X9(){Uv.point=g1}function Pre(){Uv.point=Lre}function Ire(){$9(W9,G9)}function Lre(e,t){Uv.point=$9,g1(W9=Fm=e,G9=km=t)}function $9(e,t){var n=e-Fm,r=t-km,i=Lp(n*n+r*r);FA+=i*(Fm+e)/2,kA+=i*(km+t)/2,rx+=i,i=km*e-Fm*t,mI+=i*(Fm+e),gI+=i*(km+t),OE+=i*3,g1(Fm=e,km=t)}var Y9=Uv;function K9(e){this._context=e}K9.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,p0);break}}},result:nv};var yI=new Rg,_I,q9,Q9,CE,RE,zA={point:nv,lineStart:function(){zA.point=Dre},lineEnd:function(){_I&&J9(q9,Q9),zA.point=nv},polygonStart:function(){_I=!0},polygonEnd:function(){_I=null},result:function(){var e=+yI;return yI=new Rg,e}};function Dre(e,t){zA.point=J9,q9=CE=e,Q9=RE=t}function J9(e,t){CE-=e,RE-=t,yI.add(Lp(CE*CE+RE*RE)),CE=e,RE=t}var ez=zA;let tz,UA,nz,rz;class iz{constructor(t){this._append=t==null?oz:Nre(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==nz||this._append!==UA){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,nz=r,UA=this._append,rz=this._,this._=i}this._+=rz;break}}}result(){const t=this._;return this._="",t.length?t:null}}function oz(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Nre(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return oz;if(t!==tz){const n=gf(10,t);tz=t,UA=function(i){let s=1;this._+=i[0];for(const l=i.length;s<l;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return UA}function az(e,t){let n=3,r=4.5,i,s;function l(c){return c&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),ex(c,i(s))),s.result()}return l.area=function(c){return ex(c,i(H9)),H9.result()},l.measure=function(c){return ex(c,i(ez)),ez.result()},l.bounds=function(c){return ex(c,i(BA)),BA.result()},l.centroid=function(c){return ex(c,i(Y9)),Y9.result()},l.projection=function(c){return arguments.length?(i=c==null?(e=null,TE):(e=c).stream,l):e},l.context=function(c){return arguments.length?(s=c==null?(t=null,new iz(n)):new K9(t=c),typeof r!="function"&&s.pointRadius(r),l):t},l.pointRadius=function(c){return arguments.length?(r=typeof c=="function"?c:(s.pointRadius(+c),+c),l):r},l.digits=function(c){if(!arguments.length)return n;if(c==null)n=null;else{const h=Math.floor(c);if(!(h>=0))throw new RangeError(`invalid digits: ${c}`);n=h}return t===null&&(s=new iz(n)),l},l.projection(e).digits(n).context(t)}function ix(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function sz(e,t,n){var r=ix(e,t-Qa,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function lz(e,t,n){var r=ix(e,t-Qa,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Bre(){var e,t,n,r,i,s,l,c,h=10,p=h,v=90,y=360,b,w,R,M,I=2.5;function N(){return{type:"MultiLineString",coordinates:z()}}function z(){return ix(IA(r/v)*v,n,v).map(R).concat(ix(IA(c/y)*y,l,y).map(M)).concat(ix(IA(t/h)*h,e,h).filter(function(H){return zl(H%v)>Qa}).map(b)).concat(ix(IA(s/p)*p,i,p).filter(function(H){return zl(H%y)>Qa}).map(w))}return N.lines=function(){return z().map(function(H){return{type:"LineString",coordinates:H}})},N.outline=function(){return{type:"Polygon",coordinates:[R(r).concat(M(l).slice(1),R(n).reverse().slice(1),M(c).reverse().slice(1))]}},N.extent=function(H){return arguments.length?N.extentMajor(H).extentMinor(H):N.extentMinor()},N.extentMajor=function(H){return arguments.length?(r=+H[0][0],n=+H[1][0],c=+H[0][1],l=+H[1][1],r>n&&(H=r,r=n,n=H),c>l&&(H=c,c=l,l=H),N.precision(I)):[[r,c],[n,l]]},N.extentMinor=function(H){return arguments.length?(t=+H[0][0],e=+H[1][0],s=+H[0][1],i=+H[1][1],t>e&&(H=t,t=e,e=H),s>i&&(H=s,s=i,i=H),N.precision(I)):[[t,s],[e,i]]},N.step=function(H){return arguments.length?N.stepMajor(H).stepMinor(H):N.stepMinor()},N.stepMajor=function(H){return arguments.length?(v=+H[0],y=+H[1],N):[v,y]},N.stepMinor=function(H){return arguments.length?(h=+H[0],p=+H[1],N):[h,p]},N.precision=function(H){return arguments.length?(I=+H,b=sz(s,i,90),w=lz(t,e,I),R=sz(c,l,90),M=lz(r,n,I),N):I},N.extentMajor([[-180,-90+Qa],[180,90-Qa]]).extentMinor([[-180,-80-Qa],[180,80+Qa]])}function Fre(){return Bre()()}function uz(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:nv,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function jA(e,t){return zl(e[0]-t[0])<Qa&&zl(e[1]-t[1])<Qa}function VA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function cz(e,t,n,r,i){var s=[],l=[],c,h;if(e.forEach(function(R){if(!((M=R.length-1)<=0)){var M,I=R[0],N=R[M],z;if(jA(I,N)){if(!I[2]&&!N[2]){for(i.lineStart(),c=0;c<M;++c)i.point((I=R[c])[0],I[1]);i.lineEnd();return}N[0]+=2*Qa}s.push(z=new VA(I,R,null,!0)),l.push(z.o=new VA(I,null,z,!1)),s.push(z=new VA(N,R,null,!1)),l.push(z.o=new VA(N,null,z,!0))}}),!!s.length){for(l.sort(t),fz(s),fz(l),c=0,h=l.length;c<h;++c)l[c].e=n=!n;for(var p=s[0],v,y;;){for(var b=p,w=!0;b.v;)if((b=b.n)===p)return;v=b.z,i.lineStart();do{if(b.v=b.o.v=!0,b.e){if(w)for(c=0,h=v.length;c<h;++c)i.point((y=v[c])[0],y[1]);else r(b.x,b.n.x,1,i);b=b.n}else{if(w)for(v=b.p.z,c=v.length-1;c>=0;--c)i.point((y=v[c])[0],y[1]);else r(b.x,b.p.x,-1,i);b=b.p}b=b.o,v=b.z,w=!w}while(!b.v);i.lineEnd()}}}function fz(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function bI(e){return[Mg(e[1],e[0]),tv(e[2])]}function ox(e){var t=e[0],n=e[1],r=Ws(n);return[r*Ws(t),r*As(t),As(n)]}function HA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function WA(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function xI(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function GA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function EI(e){var t=Lp(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function SI(e){return zl(e[0])<=el?e[0]:ev(e[0])*((zl(e[0])+el)%p0-el)}function kre(e,t){var n=SI(t),r=t[1],i=As(r),s=[As(n),-Ws(n),0],l=0,c=0,h=new Rg;i===1?r=Yc+Qa:i===-1&&(r=-Yc-Qa);for(var p=0,v=e.length;p<v;++p)if(b=(y=e[p]).length)for(var y,b,w=y[b-1],R=SI(w),M=w[1]/2+F9,I=As(M),N=Ws(M),z=0;z<b;++z,R=X,I=te,N=fe,w=H){var H=y[z],X=SI(H),$=H[1]/2+F9,te=As($),fe=Ws($),ye=X-R,Le=ye>=0?1:-1,Ge=Le*ye,Qe=Ge>el,gt=I*te;if(h.add(Mg(gt*Le*As(Ge),N*fe+gt*Ws(Ge))),l+=Qe?ye+Le*p0:ye,Qe^R>=n^X>=n){var qe=WA(ox(w),ox(H));EI(qe);var lt=WA(s,qe);EI(lt);var ft=(Qe^ye>=0?-1:1)*tv(lt[2]);(r>ft||r===ft&&(qe[0]||qe[1]))&&(c+=Qe^ye>=0?1:-1)}}return(l<-Qa||l<Qa&&h<-B9)^c&1}function*zre(e){for(const t of e)yield*Sj(t)}function hz(e){return Array.from(zre(e))}function dz(e,t,n,r){return function(i){var s=t(i),l=uz(),c=t(l),h=!1,p,v,y,b={point:w,lineStart:M,lineEnd:I,polygonStart:function(){b.point=N,b.lineStart=z,b.lineEnd=H,v=[],p=[]},polygonEnd:function(){b.point=w,b.lineStart=M,b.lineEnd=I,v=hz(v);var X=kre(p,r);v.length?(h||(i.polygonStart(),h=!0),cz(v,jre,X,n,i)):X&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),v=p=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function w(X,$){e(X,$)&&i.point(X,$)}function R(X,$){s.point(X,$)}function M(){b.point=R,s.lineStart()}function I(){b.point=w,s.lineEnd()}function N(X,$){y.push([X,$]),c.point(X,$)}function z(){c.lineStart(),y=[]}function H(){N(y[0][0],y[0][1]),c.lineEnd();var X=c.clean(),$=l.result(),te,fe=$.length,ye,Le,Ge;if(y.pop(),p.push(y),y=null,!!fe){if(X&1){if(Le=$[0],(ye=Le.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),te=0;te<ye;++te)i.point((Ge=Le[te])[0],Ge[1]);i.lineEnd()}return}fe>1&&X&2&&$.push($.pop().concat($.shift())),v.push($.filter(Ure))}}return b}}function Ure(e){return e.length>1}function jre(e,t){return((e=e.x)[0]<0?e[1]-Yc-Qa:Yc-e[1])-((t=t.x)[0]<0?t[1]-Yc-Qa:Yc-t[1])}var pz=dz(function(){return!0},Vre,Wre,[-el,-Yc]);function Vre(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,l){var c=s>0?el:-el,h=zl(s-t);zl(h-el)<Qa?(e.point(t,n=(n+l)/2>0?Yc:-Yc),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),e.point(s,n),i=0):r!==c&&h>=el&&(zl(t-r)<Qa&&(t-=r*Qa),zl(s-c)<Qa&&(s-=c*Qa),n=Hre(t,n,s,l),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),i=0),e.point(t=s,n=l),r=c},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Hre(e,t,n,r){var i,s,l=As(e-n);return zl(l)>Qa?tx((As(t)*(s=Ws(r))*As(n)-As(r)*(i=Ws(t))*As(e))/(i*s*l)):(t+r)/2}function Wre(e,t,n,r){var i;if(e==null)i=n*Yc,r.point(-el,i),r.point(0,i),r.point(el,i),r.point(el,0),r.point(el,-i),r.point(0,-i),r.point(-el,-i),r.point(-el,0),r.point(-el,i);else if(zl(e[0]-t[0])>Qa){var s=e[0]<t[0]?el:-el;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function vz(e,t,n,r,i,s){if(n){var l=Ws(t),c=As(t),h=r*n;i==null?(i=t+r*p0,s=t-h/2):(i=mz(l,i),s=mz(l,s),(r>0?i<s:i>s)&&(i+=r*p0));for(var p,v=i;r>0?v>s:v<s;v-=h)p=bI([l,-c*Ws(v),-c*As(v)]),e.point(p[0],p[1])}}function mz(e,t){t=ox(t),t[0]-=e,EI(t);var n=z9(-t[1]);return((-t[2]<0?-n:n)+p0-Qa)%p0}function Ape(){var e=constant([0,0]),t=constant(90),n=constant(2),r,i,s={point:l};function l(h,p){r.push(h=i(h,p)),h[0]*=degrees,h[1]*=degrees}function c(){var h=e.apply(this,arguments),p=t.apply(this,arguments)*radians,v=n.apply(this,arguments)*radians;return r=[],i=rotateRadians(-h[0]*radians,-h[1]*radians,0).invert,vz(s,p,v,1),h={type:"Polygon",coordinates:[r]},r=i=null,h}return c.center=function(h){return arguments.length?(e=typeof h=="function"?h:constant([+h[0],+h[1]]),c):e},c.radius=function(h){return arguments.length?(t=typeof h=="function"?h:constant(+h),c):t},c.precision=function(h){return arguments.length?(n=typeof h=="function"?h:constant(+h),c):n},c}function Gre(e){var t=Ws(e),n=2*Dc,r=t>0,i=zl(t)>Qa;function s(v,y,b,w){vz(w,e,n,b,v,y)}function l(v,y){return Ws(v)*Ws(y)>t}function c(v){var y,b,w,R,M;return{lineStart:function(){R=w=!1,M=1},point:function(I,N){var z=[I,N],H,X=l(I,N),$=r?X?0:p(I,N):X?p(I+(I<0?el:-el),N):0;if(!y&&(R=w=X)&&v.lineStart(),X!==w&&(H=h(y,z),(!H||jA(y,H)||jA(z,H))&&(z[2]=1)),X!==w)M=0,X?(v.lineStart(),H=h(z,y),v.point(H[0],H[1])):(H=h(y,z),v.point(H[0],H[1],2),v.lineEnd()),y=H;else if(i&&y&&r^X){var te;!($&b)&&(te=h(z,y,!0))&&(M=0,r?(v.lineStart(),v.point(te[0][0],te[0][1]),v.point(te[1][0],te[1][1]),v.lineEnd()):(v.point(te[1][0],te[1][1]),v.lineEnd(),v.lineStart(),v.point(te[0][0],te[0][1],3)))}X&&(!y||!jA(y,z))&&v.point(z[0],z[1]),y=z,w=X,b=$},lineEnd:function(){w&&v.lineEnd(),y=null},clean:function(){return M|(R&&w)<<1}}}function h(v,y,b){var w=ox(v),R=ox(y),M=[1,0,0],I=WA(w,R),N=HA(I,I),z=I[0],H=N-z*z;if(!H)return!b&&v;var X=t*N/H,$=-t*z/H,te=WA(M,I),fe=GA(M,X),ye=GA(I,$);xI(fe,ye);var Le=te,Ge=HA(fe,Le),Qe=HA(Le,Le),gt=Ge*Ge-Qe*(HA(fe,fe)-1);if(!(gt<0)){var qe=Lp(gt),lt=GA(Le,(-Ge-qe)/Qe);if(xI(lt,fe),lt=bI(lt),!b)return lt;var ft=v[0],pt=y[0],Zt=v[1],Ct=y[1],Lt;pt<ft&&(Lt=ft,ft=pt,pt=Lt);var Tn=pt-ft,Fn=zl(Tn-el)<Qa,ir=Fn||Tn<Qa;if(!Fn&&Ct<Zt&&(Lt=Zt,Zt=Ct,Ct=Lt),ir?Fn?Zt+Ct>0^lt[1]<(zl(lt[0]-ft)<Qa?Zt:Ct):Zt<=lt[1]&&lt[1]<=Ct:Tn>el^(ft<=lt[0]&&lt[0]<=pt)){var tr=GA(Le,(-Ge+qe)/Qe);return xI(tr,fe),[lt,bI(tr)]}}}function p(v,y){var b=r?e:el-e,w=0;return v<-b?w|=1:v>b&&(w|=2),y<-b?w|=4:y>b&&(w|=8),w}return dz(l,c,s,r?[0,-e]:[-el,e-el])}function Zre(e,t,n,r,i,s){var l=e[0],c=e[1],h=t[0],p=t[1],v=0,y=1,b=h-l,w=p-c,R;if(R=n-l,!(!b&&R>0)){if(R/=b,b<0){if(R<v)return;R<y&&(y=R)}else if(b>0){if(R>y)return;R>v&&(v=R)}if(R=i-l,!(!b&&R<0)){if(R/=b,b<0){if(R>y)return;R>v&&(v=R)}else if(b>0){if(R<v)return;R<y&&(y=R)}if(R=r-c,!(!w&&R>0)){if(R/=w,w<0){if(R<v)return;R<y&&(y=R)}else if(w>0){if(R>y)return;R>v&&(v=R)}if(R=s-c,!(!w&&R<0)){if(R/=w,w<0){if(R>y)return;R>v&&(v=R)}else if(w>0){if(R<v)return;R<y&&(y=R)}return v>0&&(e[0]=l+v*b,e[1]=c+v*w),y<1&&(t[0]=l+y*b,t[1]=c+y*w),!0}}}}}var ME=1e9,ZA=-ME;function gz(e,t,n,r){function i(p,v){return e<=p&&p<=n&&t<=v&&v<=r}function s(p,v,y,b){var w=0,R=0;if(p==null||(w=l(p,y))!==(R=l(v,y))||h(p,v)<0^y>0)do b.point(w===0||w===3?e:n,w>1?r:t);while((w=(w+y+4)%4)!==R);else b.point(v[0],v[1])}function l(p,v){return zl(p[0]-e)<Qa?v>0?0:3:zl(p[0]-n)<Qa?v>0?2:1:zl(p[1]-t)<Qa?v>0?1:0:v>0?3:2}function c(p,v){return h(p.x,v.x)}function h(p,v){var y=l(p,1),b=l(v,1);return y!==b?y-b:y===0?v[1]-p[1]:y===1?p[0]-v[0]:y===2?p[1]-v[1]:v[0]-p[0]}return function(p){var v=p,y=uz(),b,w,R,M,I,N,z,H,X,$,te,fe={point:ye,lineStart:gt,lineEnd:qe,polygonStart:Ge,polygonEnd:Qe};function ye(ft,pt){i(ft,pt)&&v.point(ft,pt)}function Le(){for(var ft=0,pt=0,Zt=w.length;pt<Zt;++pt)for(var Ct=w[pt],Lt=1,Tn=Ct.length,Fn=Ct[0],ir,tr,Hr=Fn[0],mi=Fn[1];Lt<Tn;++Lt)ir=Hr,tr=mi,Fn=Ct[Lt],Hr=Fn[0],mi=Fn[1],tr<=r?mi>r&&(Hr-ir)*(r-tr)>(mi-tr)*(e-ir)&&++ft:mi<=r&&(Hr-ir)*(r-tr)<(mi-tr)*(e-ir)&&--ft;return ft}function Ge(){v=y,b=[],w=[],te=!0}function Qe(){var ft=Le(),pt=te&&ft,Zt=(b=hz(b)).length;(pt||Zt)&&(p.polygonStart(),pt&&(p.lineStart(),s(null,null,1,p),p.lineEnd()),Zt&&cz(b,c,ft,s,p),p.polygonEnd()),v=p,b=w=R=null}function gt(){fe.point=lt,w&&w.push(R=[]),$=!0,X=!1,z=H=NaN}function qe(){b&&(lt(M,I),N&&X&&y.rejoin(),b.push(y.result())),fe.point=ye,X&&v.lineEnd()}function lt(ft,pt){var Zt=i(ft,pt);if(w&&R.push([ft,pt]),$)M=ft,I=pt,N=Zt,$=!1,Zt&&(v.lineStart(),v.point(ft,pt));else if(Zt&&X)v.point(ft,pt);else{var Ct=[z=Math.max(ZA,Math.min(ME,z)),H=Math.max(ZA,Math.min(ME,H))],Lt=[ft=Math.max(ZA,Math.min(ME,ft)),pt=Math.max(ZA,Math.min(ME,pt))];Zre(Ct,Lt,e,t,n,r)?(X||(v.lineStart(),v.point(Ct[0],Ct[1])),v.point(Lt[0],Lt[1]),Zt||v.lineEnd(),te=!1):Zt&&(v.lineStart(),v.point(ft,pt),te=!1)}z=ft,H=pt,X=Zt}return fe}}function TI(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function wI(e,t){return zl(e)>el&&(e-=Math.round(e/p0)*p0),[e,t]}wI.invert=wI;function yz(e,t,n){return(e%=p0)?t||n?TI(bz(e),xz(t,n)):bz(e):t||n?xz(t,n):wI}function _z(e){return function(t,n){return t+=e,zl(t)>el&&(t-=Math.round(t/p0)*p0),[t,n]}}function bz(e){var t=_z(e);return t.invert=_z(-e),t}function xz(e,t){var n=Ws(e),r=As(e),i=Ws(t),s=As(t);function l(c,h){var p=Ws(h),v=Ws(c)*p,y=As(c)*p,b=As(h),w=b*n+v*r;return[Mg(y*i-w*s,v*n-b*r),tv(w*i+y*s)]}return l.invert=function(c,h){var p=Ws(h),v=Ws(c)*p,y=As(c)*p,b=As(h),w=b*i-y*s;return[Mg(y*i+b*s,v*n+w*r),tv(w*n-v*r)]},l}function Xre(e){e=yz(e[0]*Dc,e[1]*Dc,e.length>2?e[2]*Dc:0);function t(n){return n=e(n[0]*Dc,n[1]*Dc),n[0]*=xd,n[1]*=xd,n}return t.invert=function(n){return n=e.invert(n[0]*Dc,n[1]*Dc),n[0]*=xd,n[1]*=xd,n},t}function Ope(e){return{stream:PE(e)}}function PE(e){return function(t){var n=new AI;for(var r in e)n[r]=e[r];return n.stream=t,n}}function AI(){}AI.prototype={constructor:AI,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function OI(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ex(n,e.stream(BA)),t(BA.result()),r!=null&&e.clipExtent(r),e}function XA(e,t,n){return OI(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],l=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),c=+t[0][0]+(i-l*(r[1][0]+r[0][0]))/2,h=+t[0][1]+(s-l*(r[1][1]+r[0][1]))/2;e.scale(150*l).translate([c,h])},n)}function CI(e,t,n){return XA(e,[[0,0],t],n)}function RI(e,t,n){return OI(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),l=(i-s*(r[1][0]+r[0][0]))/2,c=-s*r[0][1];e.scale(150*s).translate([l,c])},n)}function MI(e,t,n){return OI(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),l=-s*r[0][0],c=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([l,c])},n)}var Ez=16,$re=Ws(30*Dc);function Sz(e,t){return+t?Kre(e,t):Yre(e)}function Yre(e){return PE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Kre(e,t){function n(r,i,s,l,c,h,p,v,y,b,w,R,M,I){var N=p-r,z=v-i,H=N*N+z*z;if(H>4*t&&M--){var X=l+b,$=c+w,te=h+R,fe=Lp(X*X+$*$+te*te),ye=tv(te/=fe),Le=zl(zl(te)-1)<Qa||zl(s-y)<Qa?(s+y)/2:Mg($,X),Ge=e(Le,ye),Qe=Ge[0],gt=Ge[1],qe=Qe-r,lt=gt-i,ft=z*qe-N*lt;(ft*ft/H>t||zl((N*qe+z*lt)/H-.5)>.3||l*b+c*w+h*R<$re)&&(n(r,i,s,l,c,h,Qe,gt,Le,X/=fe,$/=fe,te,M,I),I.point(Qe,gt),n(Qe,gt,Le,X,$,te,p,v,y,b,w,R,M,I))}}return function(r){var i,s,l,c,h,p,v,y,b,w,R,M,I={point:N,lineStart:z,lineEnd:X,polygonStart:function(){r.polygonStart(),I.lineStart=$},polygonEnd:function(){r.polygonEnd(),I.lineStart=z}};function N(ye,Le){ye=e(ye,Le),r.point(ye[0],ye[1])}function z(){y=NaN,I.point=H,r.lineStart()}function H(ye,Le){var Ge=ox([ye,Le]),Qe=e(ye,Le);n(y,b,v,w,R,M,y=Qe[0],b=Qe[1],v=ye,w=Ge[0],R=Ge[1],M=Ge[2],Ez,r),r.point(y,b)}function X(){I.point=N,r.lineEnd()}function $(){z(),I.point=te,I.lineEnd=fe}function te(ye,Le){H(i=ye,Le),s=y,l=b,c=w,h=R,p=M,I.point=H}function fe(){n(y,b,v,w,R,M,s,l,i,c,h,p,Ez,r),I.lineEnd=X,X()}return I}}var qre=PE({point:function(e,t){this.stream.point(e*Dc,t*Dc)}});function Qre(e){return PE({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Jre(e,t,n,r,i){function s(l,c){return l*=r,c*=i,[t+e*l,n-e*c]}return s.invert=function(l,c){return[(l-t)/e*r,(n-c)/e*i]},s}function Tz(e,t,n,r,i,s){if(!s)return Jre(e,t,n,r,i);var l=Ws(s),c=As(s),h=l*e,p=c*e,v=l/e,y=c/e,b=(c*n-l*t)/e,w=(c*t+l*n)/e;function R(M,I){return M*=r,I*=i,[h*M-p*I+t,n-p*M-h*I]}return R.invert=function(M,I){return[r*(v*M-y*I+b),i*(w-y*M-v*I)]},R}function zm(e){return PI(function(){return e})()}function PI(e){var t,n=150,r=480,i=250,s=0,l=0,c=0,h=0,p=0,v,y=0,b=1,w=1,R=null,M=pz,I=null,N,z,H,X=TE,$=.5,te,fe,ye,Le,Ge;function Qe(ft){return ye(ft[0]*Dc,ft[1]*Dc)}function gt(ft){return ft=ye.invert(ft[0],ft[1]),ft&&[ft[0]*xd,ft[1]*xd]}Qe.stream=function(ft){return Le&&Ge===ft?Le:Le=qre(Qre(v)(M(te(X(Ge=ft)))))},Qe.preclip=function(ft){return arguments.length?(M=ft,R=void 0,lt()):M},Qe.postclip=function(ft){return arguments.length?(X=ft,I=N=z=H=null,lt()):X},Qe.clipAngle=function(ft){return arguments.length?(M=+ft?Gre(R=ft*Dc):(R=null,pz),lt()):R*xd},Qe.clipExtent=function(ft){return arguments.length?(X=ft==null?(I=N=z=H=null,TE):gz(I=+ft[0][0],N=+ft[0][1],z=+ft[1][0],H=+ft[1][1]),lt()):I==null?null:[[I,N],[z,H]]},Qe.scale=function(ft){return arguments.length?(n=+ft,qe()):n},Qe.translate=function(ft){return arguments.length?(r=+ft[0],i=+ft[1],qe()):[r,i]},Qe.center=function(ft){return arguments.length?(s=ft[0]%360*Dc,l=ft[1]%360*Dc,qe()):[s*xd,l*xd]},Qe.rotate=function(ft){return arguments.length?(c=ft[0]%360*Dc,h=ft[1]%360*Dc,p=ft.length>2?ft[2]%360*Dc:0,qe()):[c*xd,h*xd,p*xd]},Qe.angle=function(ft){return arguments.length?(y=ft%360*Dc,qe()):y*xd},Qe.reflectX=function(ft){return arguments.length?(b=ft?-1:1,qe()):b<0},Qe.reflectY=function(ft){return arguments.length?(w=ft?-1:1,qe()):w<0},Qe.precision=function(ft){return arguments.length?(te=Sz(fe,$=ft*ft),lt()):Lp($)},Qe.fitExtent=function(ft,pt){return XA(Qe,ft,pt)},Qe.fitSize=function(ft,pt){return CI(Qe,ft,pt)},Qe.fitWidth=function(ft,pt){return RI(Qe,ft,pt)},Qe.fitHeight=function(ft,pt){return MI(Qe,ft,pt)};function qe(){var ft=Tz(n,0,0,b,w,y).apply(null,t(s,l)),pt=Tz(n,r-ft[0],i-ft[1],b,w,y);return v=yz(c,h,p),fe=TI(t,pt),ye=TI(v,fe),te=Sz(fe,$),lt()}function lt(){return Le=Ge=null,Qe}return function(){return t=e.apply(this,arguments),Qe.invert=t.invert&&gt,qe()}}function II(e){var t=0,n=el/3,r=PI(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Dc,n=s[1]*Dc):[t*xd,n*xd]},i}function eie(e){var t=Ws(e);function n(r,i){return[r*t,As(i)/t]}return n.invert=function(r,i){return[r/t,tv(i*t)]},n}function wz(e,t){var n=As(e),r=(n+As(t))/2;if(zl(r)<Qa)return eie(e);var i=1+n*(2*r-n),s=Lp(i)/r;function l(c,h){var p=Lp(i-2*r*As(h))/r;return[p*As(c*=r),s-p*Ws(c)]}return l.invert=function(c,h){var p=s-h,v=Mg(c,zl(p))*ev(p);return p*r<0&&(v-=el*ev(c)*ev(p)),[v/r,tv((i-(c*c+p*p)*r*r)/(2*r))]},l}function $A(){return II(wz).scale(155.424).center([0,33.6442])}function Az(){return $A().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tie(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function nie(){var e,t,n=Az(),r,i=$A().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,l=$A().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,h,p={point:function(b,w){h=[b,w]}};function v(b){var w=b[0],R=b[1];return h=null,r.point(w,R),h||(s.point(w,R),h)||(c.point(w,R),h)}v.invert=function(b){var w=n.scale(),R=n.translate(),M=(b[0]-R[0])/w,I=(b[1]-R[1])/w;return(I>=.12&&I<.234&&M>=-.425&&M<-.214?i:I>=.166&&I<.234&&M>=-.214&&M<-.115?l:n).invert(b)},v.stream=function(b){return e&&t===b?e:e=tie([n.stream(t=b),i.stream(b),l.stream(b)])},v.precision=function(b){return arguments.length?(n.precision(b),i.precision(b),l.precision(b),y()):n.precision()},v.scale=function(b){return arguments.length?(n.scale(b),i.scale(b*.35),l.scale(b),v.translate(n.translate())):n.scale()},v.translate=function(b){if(!arguments.length)return n.translate();var w=n.scale(),R=+b[0],M=+b[1];return r=n.translate(b).clipExtent([[R-.455*w,M-.238*w],[R+.455*w,M+.238*w]]).stream(p),s=i.translate([R-.307*w,M+.201*w]).clipExtent([[R-.425*w+Qa,M+.12*w+Qa],[R-.214*w-Qa,M+.234*w-Qa]]).stream(p),c=l.translate([R-.205*w,M+.212*w]).clipExtent([[R-.214*w+Qa,M+.166*w+Qa],[R-.115*w-Qa,M+.234*w-Qa]]).stream(p),y()},v.fitExtent=function(b,w){return XA(v,b,w)},v.fitSize=function(b,w){return CI(v,b,w)},v.fitWidth=function(b,w){return RI(v,b,w)},v.fitHeight=function(b,w){return MI(v,b,w)};function y(){return e=t=null,v}return v.scale(1070)}function Oz(e){return function(t,n){var r=Ws(t),i=Ws(n),s=e(r*i);return s===1/0?[2,0]:[s*i*As(t),s*As(n)]}}function IE(e){return function(t,n){var r=Lp(t*t+n*n),i=e(r),s=As(i),l=Ws(i);return[Mg(t*s,r*l),tv(r&&n*s/r)]}}var LI=Oz(function(e){return Lp(2/(1+e))});LI.invert=IE(function(e){return 2*tv(e/2)});function rie(){return zm(LI).scale(124.75).clipAngle(180-.001)}var DI=Oz(function(e){return(e=z9(e))&&e/As(e)});DI.invert=IE(function(e){return e});function iie(){return zm(DI).scale(79.4188).clipAngle(180-.001)}function LE(e,t){return[e,LA(uI((Yc+t)/2))]}LE.invert=function(e,t){return[e,2*tx(k9(t))-Yc]};function oie(){return Cz(LE).scale(961/p0)}function Cz(e){var t=zm(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,l=null,c,h,p;t.scale=function(y){return arguments.length?(r(y),v()):r()},t.translate=function(y){return arguments.length?(i(y),v()):i()},t.center=function(y){return arguments.length?(n(y),v()):n()},t.clipExtent=function(y){return arguments.length?(y==null?l=c=h=p=null:(l=+y[0][0],c=+y[0][1],h=+y[1][0],p=+y[1][1]),v()):l==null?null:[[l,c],[h,p]]};function v(){var y=el*r(),b=t(Xre(t.rotate()).invert([0,0]));return s(l==null?[[b[0]-y,b[1]-y],[b[0]+y,b[1]+y]]:e===LE?[[Math.max(b[0]-y,l),c],[Math.min(b[0]+y,h),p]]:[[l,Math.max(b[1]-y,c)],[h,Math.min(b[1]+y,p)]])}return v()}function YA(e){return uI((Yc+e)/2)}function Rz(e,t){var n=Ws(e),r=e===t?As(e):LA(n/Ws(t))/LA(YA(t)/YA(e)),i=n*lI(YA(e),r)/r;if(!r)return LE;function s(l,c){i>0?c<-Yc+Qa&&(c=-Yc+Qa):c>Yc-Qa&&(c=Yc-Qa);var h=i/lI(YA(c),r);return[h*As(r*l),i-h*Ws(r*l)]}return s.invert=function(l,c){var h=i-c,p=ev(r)*Lp(l*l+h*h),v=Mg(l,zl(h))*ev(h);return h*r<0&&(v-=el*ev(l)*ev(h)),[v/r,2*tx(lI(i/p,1/r))-Yc]},s}function aie(){return II(Rz).scale(109.5).parallels([30,30])}function DE(e,t){return[e,t]}DE.invert=DE;function sie(){return zm(DE).scale(152.63)}function Mz(e,t){var n=Ws(e),r=e===t?As(e):(n-Ws(t))/(t-e),i=n/r+e;if(zl(r)<Qa)return DE;function s(l,c){var h=i-c,p=r*l;return[h*As(p),i-h*Ws(p)]}return s.invert=function(l,c){var h=i-c,p=Mg(l,zl(h))*ev(h);return h*r<0&&(p-=el*ev(l)*ev(h)),[p/r,i-ev(r)*Lp(l*l+h*h)]},s}function lie(){return II(Mz).scale(131.154).center([0,13.9389])}var NE=1.340264,BE=-.081106,FE=893e-6,kE=.003796,KA=Lp(3)/2,uie=12;function NI(e,t){var n=tv(KA*As(t)),r=n*n,i=r*r*r;return[e*Ws(n)/(KA*(NE+3*BE*r+i*(7*FE+9*kE*r))),n*(NE+BE*r+i*(FE+kE*r))]}NI.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,l,c,h;s<uie&&(c=n*(NE+BE*r+i*(FE+kE*r))-t,h=NE+3*BE*r+i*(7*FE+9*kE*r),n-=l=c/h,r=n*n,i=r*r*r,!(zl(l)<B9));++s);return[KA*e*(NE+3*BE*r+i*(7*FE+9*kE*r))/Ws(n),tv(As(n)/KA)]};function cie(){return zm(NI).scale(177.158)}function BI(e,t){var n=Ws(t),r=Ws(e)*n;return[n*As(e)/r,As(t)/r]}BI.invert=IE(tx);function fie(){return zm(BI).scale(144.049).clipAngle(60)}function hie(){var e=1,t=0,n=0,r=1,i=1,s=0,l,c,h=null,p,v,y,b=1,w=1,R=PE({point:function(X,$){var te=H([X,$]);this.stream.point(te[0],te[1])}}),M=TE,I,N;function z(){return b=e*r,w=e*i,I=N=null,H}function H(X){var $=X[0]*b,te=X[1]*w;if(s){var fe=te*l-$*c;$=$*l+te*c,te=fe}return[$+t,te+n]}return H.invert=function(X){var $=X[0]-t,te=X[1]-n;if(s){var fe=te*l+$*c;$=$*l-te*c,te=fe}return[$/b,te/w]},H.stream=function(X){return I&&N===X?I:I=R(M(N=X))},H.postclip=function(X){return arguments.length?(M=X,h=p=v=y=null,z()):M},H.clipExtent=function(X){return arguments.length?(M=X==null?(h=p=v=y=null,TE):gz(h=+X[0][0],p=+X[0][1],v=+X[1][0],y=+X[1][1]),z()):h==null?null:[[h,p],[v,y]]},H.scale=function(X){return arguments.length?(e=+X,z()):e},H.translate=function(X){return arguments.length?(t=+X[0],n=+X[1],z()):[t,n]},H.angle=function(X){return arguments.length?(s=X%360*Dc,c=As(s),l=Ws(s),z()):s*xd},H.reflectX=function(X){return arguments.length?(r=X?-1:1,z()):r<0},H.reflectY=function(X){return arguments.length?(i=X?-1:1,z()):i<0},H.fitExtent=function(X,$){return XA(H,X,$)},H.fitSize=function(X,$){return CI(H,X,$)},H.fitWidth=function(X,$){return RI(H,X,$)},H.fitHeight=function(X,$){return MI(H,X,$)},H}function FI(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}FI.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,l=s*s;n-=i=(n*(1.007226+s*(.015085+l*(-.044475+.028874*s-.005916*l)))-t)/(1.007226+s*(.015085*3+l*(-.044475*7+.028874*9*s-.005916*11*l)))}while(zl(i)>Qa&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function die(){return zm(FI).scale(175.295)}function kI(e,t){return[Ws(t)*As(e),As(t)]}kI.invert=IE(tv);function pie(){return zm(kI).scale(249.5).clipAngle(90+Qa)}function zI(e,t){var n=Ws(t),r=1+Ws(e)*n;return[n*As(e)/r,As(t)/r]}zI.invert=IE(function(e){return 2*tx(e)});function vie(){return zm(zI).scale(250).clipAngle(142)}function UI(e,t){return[LA(uI((Yc+t)/2)),-e]}UI.invert=function(e,t){return[-t,2*tx(k9(e))-Yc]};function mie(){var e=Cz(UI),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var gie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yie(e){if(typeof e=="function")return e;const t=`geo${Sm(e)}`,n=E[t];if(!n)throw new Error(`Unknown coordinate: ${e}`);return n}function _ie(e){return{type:"FeatureCollection",features:e.flatMap(t=>bie(t).features)}}function bie(e){const t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!e||!e.type)return null;const n=t[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featureCollection")return e}function xie(e,t){var n;for(const[r,i]of Object.entries(t))(n=e[r])===null||n===void 0||n.call(e,i)}function Eie(e,t,n,r){const i=()=>{const c=t.filter(Pz);return c.find(p=>p.sphere)?{type:"Sphere"}:_ie(c.filter(p=>!p.sphere).flatMap(p=>p.data.value))},{outline:s=i()}=r,{size:l="fitExtent"}=r;if(l==="fitExtent")return Sie(e,s,n);if(l==="fitWidth")return Tie(e,s,n)}function Sie(e,t,n){const{x:r,y:i,width:s,height:l}=n;e.fitExtent([[r,i],[s,l]],t)}function Tie(e,t,n){const{width:r,height:i}=n,[[s,l],[c,h]]=az(e.fitWidth(r,t)).bounds(t),p=Math.ceil(h-l),v=Math.min(Math.ceil(c-s),p),y=e.scale()*(v-1)/v,[b,w]=e.translate(),R=w+(i-p)/2;e.scale(y).translate([b,R]).precision(.2)}function wie(e){const{data:t}=e;if(Array.isArray(t))return Object.assign(Object.assign({},e),{data:{value:t}});const{type:n}=t;return n==="graticule10"?Object.assign(Object.assign({},e),{data:{value:[Fre()]}}):n==="sphere"?Object.assign(Object.assign({},e),{sphere:!0,data:{value:[{type:"Sphere"}]}}):e}function Pz(e){return e.type==="geoPath"}const Iz=()=>e=>{const{children:t,coordinate:n={}}=e;if(!Array.isArray(t))return[];const{type:r="equalEarth"}=n,i=gie(n,["type"]),s=yie(r),l=t.map(wie);let c;function h(){return[["custom",(y,b,w,R)=>{const M=s();Eie(M,l,{x:y,y:b,width:w,height:R},i),xie(M,i),c=az(M);const N=new md({domain:[y,y+w]}),z=new md({domain:[b,b+R]}),H=$=>{const te=M($);if(!te)return[null,null];const[fe,ye]=te;return[N.map(fe),z.map(ye)]},X=$=>{if(!$)return null;const[te,fe]=$,ye=[N.invert(te),z.invert(fe)];return M.invert(ye)};return{transform:$=>H($),untransform:$=>X($)}}]]}function p(y){const{style:b,tooltip:w={}}=y;return Object.assign(Object.assign({},y),{type:"path",tooltip:Ww(w,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},b),{d:R=>c(R)||[]})})}const v=y=>Pz(y)?p(y):y;return[Object.assign(Object.assign({},e),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:h},children:l.flatMap(v)})]};Iz.props={};var Aie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Lz=()=>e=>{const{type:t,data:n,scale:r,encode:i,style:s,animate:l,key:c,state:h}=e,p=Aie(e,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},p),{children:[{type:"geoPath",key:`${c}-0`,data:{value:n},scale:r,encode:i,style:s,animate:l,state:h}]})]};Lz.props={};function Oie(){return{"composition.geoView":Iz,"composition.geoPath":Lz}}function Cie(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Dz(this.cover(t,n),t,n,e)}function Dz(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,l={data:r},c=e._x0,h=e._y0,p=e._x1,v=e._y1,y,b,w,R,M,I,N,z;if(!s)return e._root=l,e;for(;s.length;)if((M=t>=(y=(c+p)/2))?c=y:p=y,(I=n>=(b=(h+v)/2))?h=b:v=b,i=s,!(s=s[N=I<<1|M]))return i[N]=l,e;if(w=+e._x.call(null,s.data),R=+e._y.call(null,s.data),t===w&&n===R)return l.next=s,i?i[N]=l:e._root=l,e;do i=i?i[N]=new Array(4):e._root=new Array(4),(M=t>=(y=(c+p)/2))?c=y:p=y,(I=n>=(b=(h+v)/2))?h=b:v=b;while((N=I<<1|M)===(z=(R>=b)<<1|w>=y));return i[z]=s,i[N]=l,e}function Rie(e){var t,n,r=e.length,i,s,l=new Array(r),c=new Array(r),h=1/0,p=1/0,v=-1/0,y=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(l[n]=i,c[n]=s,i<h&&(h=i),i>v&&(v=i),s<p&&(p=s),s>y&&(y=s));if(h>v||p>y)return this;for(this.cover(h,p).cover(v,y),n=0;n<r;++n)Dz(this,l[n],c[n],e[n]);return this}function Mie(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var l=i-n||1,c=this._root,h,p;n>e||e>=i||r>t||t>=s;)switch(p=(t<r)<<1|e<n,h=new Array(4),h[p]=c,c=h,l*=2,p){case 0:i=n+l,s=r+l;break;case 1:n=i-l,s=r+l;break;case 2:i=n+l,r=s-l;break;case 3:n=i-l,r=s-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Pie(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Iie(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function rp(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Lie(e,t,n){var r,i=this._x0,s=this._y0,l,c,h,p,v=this._x1,y=this._y1,b=[],w=this._root,R,M;for(w&&b.push(new rp(w,i,s,v,y)),n==null?n=1/0:(i=e-n,s=t-n,v=e+n,y=t+n,n*=n);R=b.pop();)if(!(!(w=R.node)||(l=R.x0)>v||(c=R.y0)>y||(h=R.x1)<i||(p=R.y1)<s))if(w.length){var I=(l+h)/2,N=(c+p)/2;b.push(new rp(w[3],I,N,h,p),new rp(w[2],l,N,I,p),new rp(w[1],I,c,h,N),new rp(w[0],l,c,I,N)),(M=(t>=N)<<1|e>=I)&&(R=b[b.length-1],b[b.length-1]=b[b.length-1-M],b[b.length-1-M]=R)}else{var z=e-+this._x.call(null,w.data),H=t-+this._y.call(null,w.data),X=z*z+H*H;if(X<n){var $=Math.sqrt(n=X);i=e-$,s=t-$,v=e+$,y=t+$,r=w.data}}return r}function Die(e){if(isNaN(v=+this._x.call(null,e))||isNaN(y=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,l=this._x0,c=this._y0,h=this._x1,p=this._y1,v,y,b,w,R,M,I,N;if(!n)return this;if(n.length)for(;;){if((R=v>=(b=(l+h)/2))?l=b:h=b,(M=y>=(w=(c+p)/2))?c=w:p=w,t=n,!(n=n[I=M<<1|R]))return this;if(!n.length)break;(t[I+1&3]||t[I+2&3]||t[I+3&3])&&(r=t,N=I)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[I]=s:delete t[I],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[N]=n:this._root=n),this):(this._root=s,this)}function Nie(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Bie(){return this._root}function Fie(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function kie(e){var t=[],n,r=this._root,i,s,l,c,h;for(r&&t.push(new rp(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,l=n.y0,c=n.x1,h=n.y1)&&r.length){var p=(s+c)/2,v=(l+h)/2;(i=r[3])&&t.push(new rp(i,p,v,c,h)),(i=r[2])&&t.push(new rp(i,s,v,p,h)),(i=r[1])&&t.push(new rp(i,p,l,c,v)),(i=r[0])&&t.push(new rp(i,s,l,p,v))}return this}function zie(e){var t=[],n=[],r;for(this._root&&t.push(new rp(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,l=r.x0,c=r.y0,h=r.x1,p=r.y1,v=(l+h)/2,y=(c+p)/2;(s=i[0])&&t.push(new rp(s,l,c,v,y)),(s=i[1])&&t.push(new rp(s,v,c,h,y)),(s=i[2])&&t.push(new rp(s,l,y,v,p)),(s=i[3])&&t.push(new rp(s,v,y,h,p))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Uie(e){return e[0]}function jie(e){return arguments.length?(this._x=e,this):this._x}function Vie(e){return e[1]}function Hie(e){return arguments.length?(this._y=e,this):this._y}function Nz(e,t,n){var r=new jI(t==null?Uie:t,n==null?Vie:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function jI(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Bz(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ip=Nz.prototype=jI.prototype;ip.copy=function(){var e=new jI(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Bz(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Bz(r));return e},ip.add=Cie,ip.addAll=Rie,ip.cover=Mie,ip.data=Pie,ip.extent=Iie,ip.find=Lie,ip.remove=Die,ip.removeAll=Nie,ip.root=Bie,ip.size=Fie,ip.visit=kie,ip.visitAfter=zie,ip.x=jie,ip.y=Hie;function v0(e){return function(){return e}}function ax(e){return(e()-.5)*1e-6}var Wie={value:function(){}};function Fz(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new qA(n)}function qA(e){this._=e}function Gie(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}qA.prototype=Fz.prototype={constructor:qA,on:function(t,n){var r=this._,i=Gie(t+"",r),s,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((s=(t=i[l]).type)&&(s=Zie(r[s],t.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++l<c;)if(s=(t=i[l]).type)r[s]=kz(r[s],t.name,n);else if(n==null)for(s in r)r[s]=kz(r[s],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new qA(t)},call:function(t,n){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,l;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,s=l.length;i<s;++i)l[i].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,l=i.length;s<l;++s)i[s].value.apply(n,r)}};function Zie(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function kz(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Wie,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xie=Fz,sx=0,zE=0,UE=0,zz=1e3,QA,jE,JA=0,y1=0,eO=0,VE=typeof performance=="object"&&performance.now?performance:Date,Uz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jz(){return y1||(Uz($ie),y1=VE.now()+eO)}function $ie(){y1=0}function VI(){this._call=this._time=this._next=null}VI.prototype=Vz.prototype={constructor:VI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jz():+n)+(t==null?0:+t),!this._next&&jE!==this&&(jE?jE._next=this:QA=this,jE=this),this._call=e,this._time=n,HI()},stop:function(){this._call&&(this._call=null,this._time=1/0,HI())}};function Vz(e,t,n){var r=new VI;return r.restart(e,t,n),r}function Yie(){jz(),++sx;for(var e=QA,t;e;)(t=y1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--sx}function Hz(){y1=(JA=VE.now())+eO,sx=zE=0;try{Yie()}finally{sx=0,qie(),y1=0}}function Kie(){var e=VE.now(),t=e-JA;t>zz&&(eO-=t,JA=e)}function qie(){for(var e,t=QA,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:QA=n);jE=e,HI(r)}function HI(e){if(!sx){zE&&(zE=clearTimeout(zE));var t=e-y1;t>24?(e<1/0&&(zE=setTimeout(Hz,e-VE.now()-eO)),UE&&(UE=clearInterval(UE))):(UE||(JA=VE.now(),UE=setInterval(Kie,zz)),sx=1,Uz(Hz))}}const Qie=1664525,Jie=1013904223,Wz=4294967296;function eoe(){let e=1;return()=>(e=(Qie*e+Jie)%Wz)/Wz}function toe(e){return e.x}function noe(e){return e.y}var roe=10,ioe=Math.PI*(3-Math.sqrt(5));function ooe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,l=.6,c=new Map,h=Vz(y),p=Xie("tick","end"),v=eoe();e==null&&(e=[]);function y(){b(),p.call("tick",t),n<r&&(h.stop(),p.call("end",t))}function b(M){var I,N=e.length,z;M===void 0&&(M=1);for(var H=0;H<M;++H)for(n+=(s-n)*i,c.forEach(function(X){X(n)}),I=0;I<N;++I)z=e[I],z.fx==null?z.x+=z.vx*=l:(z.x=z.fx,z.vx=0),z.fy==null?z.y+=z.vy*=l:(z.y=z.fy,z.vy=0);return t}function w(){for(var M=0,I=e.length,N;M<I;++M){if(N=e[M],N.index=M,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),isNaN(N.x)||isNaN(N.y)){var z=roe*Math.sqrt(.5+M),H=M*ioe;N.x=z*Math.cos(H),N.y=z*Math.sin(H)}(isNaN(N.vx)||isNaN(N.vy))&&(N.vx=N.vy=0)}}function R(M){return M.initialize&&M.initialize(e,v),M}return w(),t={tick:b,restart:function(){return h.restart(y),t},stop:function(){return h.stop(),t},nodes:function(M){return arguments.length?(e=M,w(),c.forEach(R),t):e},alpha:function(M){return arguments.length?(n=+M,t):n},alphaMin:function(M){return arguments.length?(r=+M,t):r},alphaDecay:function(M){return arguments.length?(i=+M,t):+i},alphaTarget:function(M){return arguments.length?(s=+M,t):s},velocityDecay:function(M){return arguments.length?(l=1-M,t):1-l},randomSource:function(M){return arguments.length?(v=M,c.forEach(R),t):v},force:function(M,I){return arguments.length>1?(I==null?c.delete(M):c.set(M,R(I)),t):c.get(M)},find:function(M,I,N){var z=0,H=e.length,X,$,te,fe,ye;for(N==null?N=1/0:N*=N,z=0;z<H;++z)fe=e[z],X=M-fe.x,$=I-fe.y,te=X*X+$*$,te<N&&(ye=fe,N=te);return ye},on:function(M,I){return arguments.length>1?(p.on(M,I),t):p.on(M)}}}function aoe(){var e,t,n,r,i=v0(-30),s,l=1,c=1/0,h=.81;function p(w){var R,M=e.length,I=Nz(e,toe,noe).visitAfter(y);for(r=w,R=0;R<M;++R)t=e[R],I.visit(b)}function v(){if(e){var w,R=e.length,M;for(s=new Array(R),w=0;w<R;++w)M=e[w],s[M.index]=+i(M,w,e)}}function y(w){var R=0,M,I,N=0,z,H,X;if(w.length){for(z=H=X=0;X<4;++X)(M=w[X])&&(I=Math.abs(M.value))&&(R+=M.value,N+=I,z+=I*M.x,H+=I*M.y);w.x=z/N,w.y=H/N}else{M=w,M.x=M.data.x,M.y=M.data.y;do R+=s[M.data.index];while(M=M.next)}w.value=R}function b(w,R,M,I){if(!w.value)return!0;var N=w.x-t.x,z=w.y-t.y,H=I-R,X=N*N+z*z;if(H*H/h<X)return X<c&&(N===0&&(N=ax(n),X+=N*N),z===0&&(z=ax(n),X+=z*z),X<l&&(X=Math.sqrt(l*X)),t.vx+=N*w.value*r/X,t.vy+=z*w.value*r/X),!0;if(w.length||X>=c)return;(w.data!==t||w.next)&&(N===0&&(N=ax(n),X+=N*N),z===0&&(z=ax(n),X+=z*z),X<l&&(X=Math.sqrt(l*X)));do w.data!==t&&(H=s[w.data.index]*r/X,t.vx+=N*H,t.vy+=z*H);while(w=w.next)}return p.initialize=function(w,R){e=w,n=R,v()},p.strength=function(w){return arguments.length?(i=typeof w=="function"?w:v0(+w),v(),p):i},p.distanceMin=function(w){return arguments.length?(l=w*w,p):Math.sqrt(l)},p.distanceMax=function(w){return arguments.length?(c=w*w,p):Math.sqrt(c)},p.theta=function(w){return arguments.length?(h=w*w,p):Math.sqrt(h)},p}function soe(e){return e.index}function Gz(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function loe(e){var t=soe,n=y,r,i=v0(30),s,l,c,h,p,v=1;e==null&&(e=[]);function y(I){return 1/Math.min(c[I.source.index],c[I.target.index])}function b(I){for(var N=0,z=e.length;N<v;++N)for(var H=0,X,$,te,fe,ye,Le,Ge;H<z;++H)X=e[H],$=X.source,te=X.target,fe=te.x+te.vx-$.x-$.vx||ax(p),ye=te.y+te.vy-$.y-$.vy||ax(p),Le=Math.sqrt(fe*fe+ye*ye),Le=(Le-s[H])/Le*I*r[H],fe*=Le,ye*=Le,te.vx-=fe*(Ge=h[H]),te.vy-=ye*Ge,$.vx+=fe*(Ge=1-Ge),$.vy+=ye*Ge}function w(){if(l){var I,N=l.length,z=e.length,H=new Map(l.map(($,te)=>[t($,te,l),$])),X;for(I=0,c=new Array(N);I<z;++I)X=e[I],X.index=I,typeof X.source!="object"&&(X.source=Gz(H,X.source)),typeof X.target!="object"&&(X.target=Gz(H,X.target)),c[X.source.index]=(c[X.source.index]||0)+1,c[X.target.index]=(c[X.target.index]||0)+1;for(I=0,h=new Array(z);I<z;++I)X=e[I],h[I]=c[X.source.index]/(c[X.source.index]+c[X.target.index]);r=new Array(z),R(),s=new Array(z),M()}}function R(){if(l)for(var I=0,N=e.length;I<N;++I)r[I]=+n(e[I],I,e)}function M(){if(l)for(var I=0,N=e.length;I<N;++I)s[I]=+i(e[I],I,e)}return b.initialize=function(I,N){l=I,p=N,w()},b.links=function(I){return arguments.length?(e=I,w(),b):e},b.id=function(I){return arguments.length?(t=I,b):t},b.iterations=function(I){return arguments.length?(v=+I,b):v},b.strength=function(I){return arguments.length?(n=typeof I=="function"?I:v0(+I),R(),b):n},b.distance=function(I){return arguments.length?(i=typeof I=="function"?I:v0(+I),M(),b):i},b}function uoe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,l=n.length,c,h=0,p=0;for(s=0;s<l;++s)c=n[s],h+=c.x,p+=c.y;for(h=(h/l-e)*r,p=(p/l-t)*r,s=0;s<l;++s)c=n[s],c.x-=h,c.y-=p}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function coe(e){var t=v0(.1),n,r,i;typeof e!="function"&&(e=v0(e==null?0:+e));function s(c){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vx+=(i[h]-v.x)*r[h]*c}function l(){if(n){var c,h=n.length;for(r=new Array(h),i=new Array(h),c=0;c<h;++c)r[c]=isNaN(i[c]=+e(n[c],c,n))?0:+t(n[c],c,n)}}return s.initialize=function(c){n=c,l()},s.strength=function(c){return arguments.length?(t=typeof c=="function"?c:v0(+c),l(),s):t},s.x=function(c){return arguments.length?(e=typeof c=="function"?c:v0(+c),l(),s):e},s}function foe(e){var t=v0(.1),n,r,i;typeof e!="function"&&(e=v0(e==null?0:+e));function s(c){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vy+=(i[h]-v.y)*r[h]*c}function l(){if(n){var c,h=n.length;for(r=new Array(h),i=new Array(h),c=0;c<h;++c)r[c]=isNaN(i[c]=+e(n[c],c,n))?0:+t(n[c],c,n)}}return s.initialize=function(c){n=c,l()},s.strength=function(c){return arguments.length?(t=typeof c=="function"?c:v0(+c),l(),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:v0(+c),l(),s):e},s}var hoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const doe={joint:!0},poe={type:"link",axis:!1,legend:!1,encode:{x:[e=>e.source.x,e=>e.target.x],y:[e=>e.source.y,e=>e.target.y]},style:{stroke:"#999",strokeOpacity:.6}},voe={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},moe={text:""};function goe(e,t,n){const{nodes:r,links:i}=e,{joint:s,nodeStrength:l,linkStrength:c}=t,{nodeKey:h=R=>R.id,linkKey:p=R=>R.id}=n,v=aoe(),y=loe(i).id(Bm(p));typeof l=="function"&&v.strength(l),typeof c=="function"&&y.strength(c);const b=ooe(r).force("link",y).force("charge",v);s?b.force("center",uoe()):b.force("x",coe()).force("y",foe()),b.stop();const w=Math.ceil(Math.log(b.alphaMin())/Math.log(1-b.alphaDecay()));for(let R=0;R<w;R++)b.tick();return{nodesData:r,linksData:i}}const Zz=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,{nodeKey:v=te=>te.id,linkKey:y=te=>te.id}=n,b=hoe(n,["nodeKey","linkKey"]),w=Object.assign({nodeKey:v,linkKey:y},b),R=go(w,"node"),M=go(w,"link"),{links:I,nodes:N}=UM(t,w),{nodesData:z,linksData:H}=goe({links:I,nodes:N},oi({},doe,s),w),X=Lm(p,"link",{items:[te=>({name:"source",value:Bm(y)(te.source)}),te=>({name:"target",value:Bm(y)(te.target)})]}),$=Lm(p,"node",{items:[te=>({name:"key",value:Bm(v)(te)})]},!0);return[oi({},poe,{data:H,encode:M,labels:c,style:go(i,"link"),tooltip:X,animate:Dm(h,"link")}),oi({},voe,{data:z,encode:Object.assign({},R),scale:r,style:go(i,"node"),tooltip:$,labels:[Object.assign(Object.assign({},moe),go(i,"label")),...l],animate:Dm(h,"link")})]};Zz.props={};function yoe(e,t){return e.parent===t.parent?1:2}function WI(e){var t=e.children;return t?t[0]:e.t}function GI(e){var t=e.children;return t?t[t.length-1]:e.t}function _oe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function boe(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function xoe(e,t,n){return e.a.parent===t.parent?e.a:n}function tO(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}tO.prototype=Object.create(Wb.prototype);function Eoe(e){for(var t=new tO(e,0),n,r=[t],i,s,l,c;n=r.pop();)if(s=n._.children)for(n.children=new Array(c=s.length),l=c-1;l>=0;--l)r.push(i=n.children[l]=new tO(s[l],l)),i.parent=n;return(t.parent=new tO(null,0)).children=[t],t}function Soe(){var e=yoe,t=1,n=1,r=null;function i(p){var v=Eoe(p);if(v.eachAfter(s),v.parent.m=-v.z,v.eachBefore(l),r)p.eachBefore(h);else{var y=p,b=p,w=p;p.eachBefore(function(z){z.x<y.x&&(y=z),z.x>b.x&&(b=z),z.depth>w.depth&&(w=z)});var R=y===b?1:e(y,b)/2,M=R-y.x,I=t/(b.x+R+M),N=n/(w.depth||1);p.eachBefore(function(z){z.x=(z.x+M)*I,z.y=z.depth*N})}return p}function s(p){var v=p.children,y=p.parent.children,b=p.i?y[p.i-1]:null;if(v){boe(p);var w=(v[0].z+v[v.length-1].z)/2;b?(p.z=b.z+e(p._,b._),p.m=p.z-w):p.z=w}else b&&(p.z=b.z+e(p._,b._));p.parent.A=c(p,b,p.parent.A||y[0])}function l(p){p._.x=p.z+p.parent.m,p.m+=p.parent.m}function c(p,v,y){if(v){for(var b=p,w=p,R=v,M=b.parent.children[0],I=b.m,N=w.m,z=R.m,H=M.m,X;R=GI(R),b=WI(b),R&&b;)M=WI(M),w=GI(w),w.a=p,X=R.z+z-b.z-I+e(R._,b._),X>0&&(_oe(xoe(R,p,y),p,X),I+=X,N+=X),z+=R.m,I+=b.m,H+=M.m,N+=w.m;R&&!GI(w)&&(w.t=R,w.m+=z-N),b&&!WI(M)&&(M.t=b,M.m+=I-H,y=p)}return y}function h(p){p.x*=t,p.y=p.depth*n}return i.separation=function(p){return arguments.length?(e=p,i):e},i.size=function(p){return arguments.length?(r=!1,t=+p[0],n=+p[1],i):r?null:[t,n]},i.nodeSize=function(p){return arguments.length?(r=!0,t=+p[0],n=+p[1],i):r?[t,n]:null},i}function Toe(e,t){return e.parent===t.parent?1:2}function woe(e){return e.reduce(Aoe,0)/e.length}function Aoe(e,t){return e+t.x}function Ooe(e){return 1+e.reduce(Coe,0)}function Coe(e,t){return Math.max(e,t.y)}function Roe(e){for(var t;t=e.children;)e=t[0];return e}function Moe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Poe(){var e=Toe,t=1,n=1,r=!1;function i(s){var l,c=0;s.eachAfter(function(b){var w=b.children;w?(b.x=woe(w),b.y=Ooe(w)):(b.x=l?c+=e(b,l):0,b.y=0,l=b)});var h=Roe(s),p=Moe(s),v=h.x-e(h,p)/2,y=p.x+e(p,h)/2;return s.eachAfter(r?function(b){b.x=(b.x-s.x)*t,b.y=(s.y-b.y)*n}:function(b){b.x=(b.x-v)/(y-v)*t,b.y=(1-(s.y?b.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}const Xz=e=>t=>n=>{const{field:r="value",nodeSize:i,separation:s,sortBy:l,as:c=["x","y"]}=t,[h,p]=c,v=Hb(n,R=>R.children).sum(R=>R[r]).sort(l),y=e();y.size([1,1]),i&&y.nodeSize(i),s&&y.separation(s),y(v);const b=[];v.each(R=>{R[h]=R.x,R[p]=R.y,R.name=R.data.name,b.push(R)});const w=v.links();return w.forEach(R=>{R[h]=[R.source[h],R.target[h]],R[p]=[R.source[p],R.target[p]]}),{nodes:b,edges:w}},$z=e=>Xz(Poe)(e);$z.props={};const Yz=e=>Xz(Soe)(e);Yz.props={};const Ioe={sortBy:(e,t)=>t.value-e.value},Loe={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},Doe={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},Noe={text:"",fontSize:10},Kz=e=>{const{data:t,encode:n={},scale:r={},style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,v=n==null?void 0:n.value,{nodes:y,edges:b}=Yz(Object.assign(Object.assign(Object.assign({},Ioe),s),{field:v}))(t),w=Lm(p,"node",{title:"name",items:["value"]},!0),R=Lm(p,"link",{title:"",items:[M=>({name:"source",value:M.source.name}),M=>({name:"target",value:M.target.name})]});return[oi({},Doe,{data:b,encode:go(n,"link"),scale:go(r,"link"),labels:c,style:Object.assign({stroke:"#999"},go(i,"link")),tooltip:R,animate:Dm(h,"link")}),oi({},Loe,{data:y,scale:go(r,"node"),encode:go(n,"node"),labels:[Object.assign(Object.assign({},Noe),go(i,"label")),...l],style:Object.assign({},go(i,"node")),tooltip:w,animate:Dm(h,"node")})]};Kz.props={};var Boe=1664525,Foe=1013904223,qz=4294967296;function koe(){var e=1;return function(){return(e=(Boe*e+Foe)%qz)/qz}}var zoe=D(52677);function Uoe(e){return zoe(e)==="object"&&"length"in e?e:Array.from(e)}function joe(e,t){for(var n=e.length,r,i;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Cpe(e){return Qz(e,lcg())}function Qz(e,t){for(var n=0,r=(e=joe(Array.from(e),t)).length,i=[],s,l;n<r;)s=e[n],l&&Jz(l,s)?++n:(l=Hoe(i=Voe(i,s)),n=0);return l}function Voe(e,t){var n,r;if(ZI(t,e))return[t];for(n=0;n<e.length;++n)if(nO(t,e[n])&&ZI(HE(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(nO(HE(e[n],e[r]),t)&&nO(HE(e[n],t),e[r])&&nO(HE(e[r],t),e[n])&&ZI(eU(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function nO(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Jz(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ZI(e,t){for(var n=0;n<t.length;++n)if(!Jz(e,t[n]))return!1;return!0}function Hoe(e){switch(e.length){case 1:return Woe(e[0]);case 2:return HE(e[0],e[1]);case 3:return eU(e[0],e[1],e[2])}}function Woe(e){return{x:e.x,y:e.y,r:e.r}}function HE(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,l=t.y,c=t.r,h=s-n,p=l-r,v=c-i,y=Math.sqrt(h*h+p*p);return{x:(n+s+h/y*v)/2,y:(r+l+p/y*v)/2,r:(y+i+c)/2}}function eU(e,t,n){var r=e.x,i=e.y,s=e.r,l=t.x,c=t.y,h=t.r,p=n.x,v=n.y,y=n.r,b=r-l,w=r-p,R=i-c,M=i-v,I=h-s,N=y-s,z=r*r+i*i-s*s,H=z-l*l-c*c+h*h,X=z-p*p-v*v+y*y,$=w*R-b*M,te=(R*X-M*H)/($*2)-r,fe=(M*I-R*N)/$,ye=(w*H-b*X)/($*2)-i,Le=(b*N-w*I)/$,Ge=fe*fe+Le*Le-1,Qe=2*(s+te*fe+ye*Le),gt=te*te+ye*ye-s*s,qe=-(Math.abs(Ge)>1e-6?(Qe+Math.sqrt(Qe*Qe-4*Ge*gt))/(2*Ge):gt/Qe);return{x:r+te+fe*qe,y:i+ye+Le*qe,r:qe}}function tU(e,t,n){var r=e.x-t.x,i,s,l=e.y-t.y,c,h,p=r*r+l*l;p?(s=t.r+n.r,s*=s,h=e.r+n.r,h*=h,s>h?(i=(p+h-s)/(2*p),c=Math.sqrt(Math.max(0,h/p-i*i)),n.x=e.x-i*r-c*l,n.y=e.y-i*l+c*r):(i=(p+s-h)/(2*p),c=Math.sqrt(Math.max(0,s/p-i*i)),n.x=t.x+i*r-c*l,n.y=t.y+i*l+c*r)):(n.x=t.x+n.r,n.y=t.y)}function nU(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function rU(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function rO(e){this._=e,this.next=null,this.previous=null}function iU(e,t){if(!(s=(e=Uoe(e)).length))return 0;var n,r,i,s,l,c,h,p,v,y,b;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;tU(r,n,i=e[2]),n=new rO(n),r=new rO(r),i=new rO(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(h=3;h<s;++h){tU(n._,r._,i=e[h]),i=new rO(i),p=r.next,v=n.previous,y=r._.r,b=n._.r;do if(y<=b){if(nU(p._,i._)){r=p,n.next=r,r.previous=n,--h;continue e}y+=p._.r,p=p.next}else{if(nU(v._,i._)){n=v,n.next=r,r.previous=n,--h;continue e}b+=v._.r,v=v.previous}while(p!==v.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,l=rU(n);(i=i.next)!==r;)(c=rU(i))<l&&(n=i,l=c);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Qz(n,t),h=0;h<s;++h)n=e[h],n.x-=i.x,n.y-=i.y;return i.r}function Rpe(e){return iU(e,lcg()),e}function Goe(e){return Math.sqrt(e.value)}function Zoe(){var e=null,t=1,n=1,r=m1;function i(s){var l=koe();return s.x=t/2,s.y=n/2,e?s.eachBefore(oU(e)).eachAfter(XI(r,.5,l)).eachBefore(aU(1)):s.eachBefore(oU(Goe)).eachAfter(XI(m1,1,l)).eachAfter(XI(r,s.r/Math.min(t,n),l)).eachBefore(aU(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=bA(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Jb(+s),i):r},i}function oU(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function XI(e,t,n){return function(r){if(i=r.children){var i,s,l=i.length,c=e(r)*t||0,h;if(c)for(s=0;s<l;++s)i[s].r+=c;if(h=iU(i,n),c)for(s=0;s<l;++s)i[s].r-=c;r.r=h+c}}}function aU(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var Xoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const $oe=(e,t)=>({size:[e,t],padding:0,sort:(n,r)=>r.value-n.value}),Yoe=(e,t,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,e]},y:{domain:[0,t]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),Koe={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.r*2},qoe={title:e=>e.data.name,items:[{field:"value"}]},Qoe=(e,t,n)=>{const{value:r}=n,i=jo(e)?UP().path(t.path)(e):Hb(e);return r?i.sum(s=>Bm(r)(s)).sort(t.sort):i.count(),Zoe().size(t.size).padding(t.padding)(i),i.descendants()},sU=(e,t)=>{const{width:n,height:r}=t,{data:i,encode:s={},scale:l={},style:c={},layout:h={},labels:p=[],tooltip:v={}}=e,y=Xoe(e,["data","encode","scale","style","layout","labels","tooltip"]),b=Yoe(n,r,s),w=Qoe(i,oi({},$oe(n,r),h),oi({},b.encode,s)),R=go(c,"label");return oi({},b,Object.assign(Object.assign({data:w,encode:s,scale:l,style:c,labels:[Object.assign(Object.assign({},Koe),R),...p]},y),{tooltip:Ww(v,qoe),axis:!1}))};sU.props={};function Joe(e){return e.target.depth}function eae(e){return e.depth}function tae(e,t){return t-1-e.height}function iO(e,t){return e.sourceLinks.length?e.depth:t-1}function nae(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?h0(e.sourceLinks,Joe)-1:0}function oO(e){return function(){return e}}function lU(e,t){return aO(e.source,t.source)||e.index-t.index}function uU(e,t){return aO(e.target,t.target)||e.index-t.index}function aO(e,t){return e.y0-t.y0}function $I(e){return e.value}function rae(e){return e.index}function iae(e){return e.nodes}function oae(e){return e.links}function cU(e,t){const n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function fU({nodes:e}){for(const t of e){let n=t.y0,r=n;for(const i of t.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of t.targetLinks)i.y1=r+i.width/2,r+=i.width}}function aae(){let e=0,t=0,n=1,r=1,i=24,s=8,l,c=rae,h=iO,p,v,y,b=iae,w=oae,R=6;function M(pt){const Zt={nodes:b(pt),links:w(pt)};return I(Zt),N(Zt),z(Zt),H(Zt),te(Zt),fU(Zt),Zt}M.update=function(pt){return fU(pt),pt},M.nodeId=function(pt){return arguments.length?(c=typeof pt=="function"?pt:oO(pt),M):c},M.nodeAlign=function(pt){return arguments.length?(h=typeof pt=="function"?pt:oO(pt),M):h},M.nodeDepth=function(pt){return arguments.length?(p=pt,M):p},M.nodeSort=function(pt){return arguments.length?(v=pt,M):v},M.nodeWidth=function(pt){return arguments.length?(i=+pt,M):i},M.nodePadding=function(pt){return arguments.length?(s=l=+pt,M):s},M.nodes=function(pt){return arguments.length?(b=typeof pt=="function"?pt:oO(pt),M):b},M.links=function(pt){return arguments.length?(w=typeof pt=="function"?pt:oO(pt),M):w},M.linkSort=function(pt){return arguments.length?(y=pt,M):y},M.size=function(pt){return arguments.length?(e=t=0,n=+pt[0],r=+pt[1],M):[n-e,r-t]},M.extent=function(pt){return arguments.length?(e=+pt[0][0],n=+pt[1][0],t=+pt[0][1],r=+pt[1][1],M):[[e,t],[n,r]]},M.iterations=function(pt){return arguments.length?(R=+pt,M):R};function I({nodes:pt,links:Zt}){pt.forEach((Lt,Tn)=>{Lt.index=Tn,Lt.sourceLinks=[],Lt.targetLinks=[]});const Ct=new Map(pt.map(Lt=>[c(Lt),Lt]));if(Zt.forEach((Lt,Tn)=>{Lt.index=Tn;let{source:Fn,target:ir}=Lt;typeof Fn!="object"&&(Fn=Lt.source=cU(Ct,Fn)),typeof ir!="object"&&(ir=Lt.target=cU(Ct,ir)),Fn.sourceLinks.push(Lt),ir.targetLinks.push(Lt)}),y!=null)for(const{sourceLinks:Lt,targetLinks:Tn}of pt)Lt.sort(y),Tn.sort(y)}function N({nodes:pt}){for(const Zt of pt)Zt.value=Zt.fixedValue===void 0?Math.max(es(Zt.sourceLinks,$I),es(Zt.targetLinks,$I)):Zt.fixedValue}function z({nodes:pt}){const Zt=pt.length;let Ct=new Set(pt),Lt=new Set,Tn=0;for(;Ct.size;){if(Ct.forEach(Fn=>{Fn.depth=Tn;for(const{target:ir}of Fn.sourceLinks)Lt.add(ir)}),++Tn>Zt)throw new Error("circular link");Ct=Lt,Lt=new Set}if(p){const Fn=Math.max(ls(pt,tr=>tr.depth)+1,0);let ir;for(let tr=0;tr<pt.length;tr++)ir=pt[tr],ir.depth=p.call(null,ir,Fn)}}function H({nodes:pt}){const Zt=pt.length;let Ct=new Set(pt),Lt=new Set,Tn=0;for(;Ct.size;){if(Ct.forEach(Fn=>{Fn.height=Tn;for(const{source:ir}of Fn.targetLinks)Lt.add(ir)}),++Tn>Zt)throw new Error("circular link");Ct=Lt,Lt=new Set}}function X({nodes:pt}){const Zt=Math.max(ls(pt,Tn=>Tn.depth)+1,0),Ct=(n-e-i)/(Zt-1),Lt=new Array(Zt).fill(0).map(()=>[]);for(const Tn of pt){const Fn=Math.max(0,Math.min(Zt-1,Math.floor(h.call(null,Tn,Zt))));Tn.layer=Fn,Tn.x0=e+Fn*Ct,Tn.x1=Tn.x0+i,Lt[Fn]?Lt[Fn].push(Tn):Lt[Fn]=[Tn]}if(v)for(const Tn of Lt)Tn.sort(v);return Lt}function $(pt){const Zt=h0(pt,Ct=>(r-t-(Ct.length-1)*l)/es(Ct,$I));for(const Ct of pt){let Lt=t;for(const Tn of Ct){Tn.y0=Lt,Tn.y1=Lt+Tn.value*Zt,Lt=Tn.y1+l;for(const Fn of Tn.sourceLinks)Fn.width=Fn.value*Zt}Lt=(r-Lt+l)/(Ct.length+1);for(let Tn=0;Tn<Ct.length;++Tn){const Fn=Ct[Tn];Fn.y0+=Lt*(Tn+1),Fn.y1+=Lt*(Tn+1)}qe(Ct)}}function te(pt){const Zt=X(pt);l=Math.min(s,(r-t)/(ls(Zt,Ct=>Ct.length)-1)),$(Zt);for(let Ct=0;Ct<R;++Ct){const Lt=Math.pow(.99,Ct),Tn=Math.max(1-Lt,(Ct+1)/R);ye(Zt,Lt,Tn),fe(Zt,Lt,Tn)}}function fe(pt,Zt,Ct){for(let Lt=1,Tn=pt.length;Lt<Tn;++Lt){const Fn=pt[Lt];for(const ir of Fn){let tr=0,Hr=0;for(const{source:Ki,value:fi}of ir.targetLinks){const Zr=fi*(ir.layer-Ki.layer);tr+=lt(Ki,ir)*Zr,Hr+=Zr}if(!(Hr>0))continue;const mi=(tr/Hr-ir.y0)*Zt;ir.y0+=mi,ir.y1+=mi,gt(ir)}v===void 0&&Fn.sort(aO),Fn.length&&Le(Fn,Ct)}}function ye(pt,Zt,Ct){for(let Lt=pt.length,Tn=Lt-2;Tn>=0;--Tn){const Fn=pt[Tn];for(const ir of Fn){let tr=0,Hr=0;for(const{target:Ki,value:fi}of ir.sourceLinks){const Zr=fi*(Ki.layer-ir.layer);tr+=ft(ir,Ki)*Zr,Hr+=Zr}if(!(Hr>0))continue;const mi=(tr/Hr-ir.y0)*Zt;ir.y0+=mi,ir.y1+=mi,gt(ir)}v===void 0&&Fn.sort(aO),Fn.length&&Le(Fn,Ct)}}function Le(pt,Zt){const Ct=pt.length>>1,Lt=pt[Ct];Qe(pt,Lt.y0-l,Ct-1,Zt),Ge(pt,Lt.y1+l,Ct+1,Zt),Qe(pt,r,pt.length-1,Zt),Ge(pt,t,0,Zt)}function Ge(pt,Zt,Ct,Lt){for(;Ct<pt.length;++Ct){const Tn=pt[Ct],Fn=(Zt-Tn.y0)*Lt;Fn>1e-6&&(Tn.y0+=Fn,Tn.y1+=Fn),Zt=Tn.y1+l}}function Qe(pt,Zt,Ct,Lt){for(;Ct>=0;--Ct){const Tn=pt[Ct],Fn=(Tn.y1-Zt)*Lt;Fn>1e-6&&(Tn.y0-=Fn,Tn.y1-=Fn),Zt=Tn.y0-l}}function gt({sourceLinks:pt,targetLinks:Zt}){if(y===void 0){for(const{source:{sourceLinks:Ct}}of Zt)Ct.sort(uU);for(const{target:{targetLinks:Ct}}of pt)Ct.sort(lU)}}function qe(pt){if(y===void 0)for(const{sourceLinks:Zt,targetLinks:Ct}of pt)Zt.sort(uU),Ct.sort(lU)}function lt(pt,Zt){let Ct=pt.y0-(pt.sourceLinks.length-1)*l/2;for(const{target:Lt,width:Tn}of pt.sourceLinks){if(Lt===Zt)break;Ct+=Tn+l}for(const{source:Lt,width:Tn}of Zt.targetLinks){if(Lt===pt)break;Ct-=Tn}return Ct}function ft(pt,Zt){let Ct=Zt.y0-(Zt.targetLinks.length-1)*l/2;for(const{source:Lt,width:Tn}of Zt.targetLinks){if(Lt===pt)break;Ct+=Tn+l}for(const{target:Lt,width:Tn}of pt.sourceLinks){if(Lt===Zt)break;Ct-=Tn}return Ct}return M}const sae={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:e=>e.nodes,links:e=>e.links,nodeSort:void 0,linkSort:void 0,iterations:6},lae={left:eae,right:tae,center:nae,justify:iO};function uae(e){const t=typeof e;return t==="string"?lae[e]||iO:t==="function"?e:iO}const hU=e=>t=>{const{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:s,nodePadding:l,nodeDepth:c,nodes:h,links:p,linkSort:v,iterations:y}=Object.assign({},sae,e),b=aae().nodeSort(r).linkSort(v).links(p).nodes(h).nodeWidth(s).nodePadding(l).nodeDepth(c).nodeAlign(uae(i)).iterations(y).extent([[0,0],[1,1]]);typeof n=="function"&&b.nodeId(n);const w=b(t),{nodes:R,links:M}=w,I=R.map(z=>{const{x0:H,x1:X,y0:$,y1:te}=z;return Object.assign(Object.assign({},z),{x:[H,X,X,H],y:[$,$,te,te]})}),N=M.map(z=>{const{source:H,target:X}=z,$=H.x1,te=X.x0,fe=z.width/2;return Object.assign(Object.assign({},z),{x:[$,$,te,te],y:[z.y0+fe,z.y0-fe,z.y1+fe,z.y1-fe]})});return{nodes:I,links:N}};hU.props={};var cae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const fae={nodeId:e=>e.key,nodeWidth:.02,nodePadding:.02},hae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},dae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},pae={textAlign:e=>e.x[0]<.5?"start":"end",position:e=>e.x[0]<.5?"right":"left",fontSize:10},dU=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,{links:v,nodes:y}=UM(t,n),b=go(n,"node"),w=go(n,"link"),{key:R=Le=>Le.key,color:M=R}=b,{links:I,nodes:N}=hU(Object.assign(Object.assign(Object.assign({},fae),{nodeId:Bm(R)}),s))({links:v,nodes:y}),z=go(i,"label"),{text:H=R,spacing:X=5}=z,$=cae(z,["text","spacing"]),te=Bm(R),fe=Lm(p,"node",{title:te,items:[{field:"value"}]},!0),ye=Lm(p,"link",{title:"",items:[Le=>({name:"source",value:te(Le.source)}),Le=>({name:"target",value:te(Le.target)})]});return[oi({},hae,{data:N,encode:Object.assign(Object.assign({},b),{color:M}),scale:r,style:go(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},pae),{text:H,dx:Le=>Le.x[0]<.5?X:-X}),$),...l],tooltip:fe,animate:Dm(h,"node"),axis:!1}),oi({},dae,{data:I,encode:w,labels:c,style:Object.assign({fill:w.color?void 0:"#aaa",lineWidth:0},go(i,"link")),tooltip:ye,animate:Dm(h,"link")})]};dU.props={};function vae(e,t){return t.value-e.value}function mae(e,t){return t.frequency-e.frequency}function gae(e,t){return`${e.id}`.localeCompare(`${t.id}`)}function yae(e,t){return`${e.name}`.localeCompare(`${t.name}`)}const _ae={y:0,thickness:.05,weight:!1,marginRatio:.1,id:e=>e.id,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null};function bae(e){const{y:t,thickness:n,weight:r,marginRatio:i,id:s,source:l,target:c,sourceWeight:h,targetWeight:p,sortBy:v}=Object.assign(Object.assign({},_ae),e);function y(I){const N=I.nodes.map(H=>Object.assign({},H)),z=I.edges.map(H=>Object.assign({},H));return b(N,z),w(N,z),R(N,z),M(N,z),{nodes:N,edges:z}}function b(I,N){N.forEach(X=>{X.source=l(X),X.target=c(X),X.sourceWeight=h(X),X.targetWeight=p(X)});const z=ou(N,X=>X.source),H=ou(N,X=>X.target);return I.forEach(X=>{X.id=s(X);const $=z.has(X.id)?z.get(X.id):[],te=H.has(X.id)?H.get(X.id):[];X.frequency=$.length+te.length,X.value=es($,fe=>fe.sourceWeight)+es(te,fe=>fe.targetWeight)}),{nodes:I,edges:N}}function w(I,N){const z=typeof v=="function"?v:he[v];z&&I.sort(z)}function R(I,N){const z=I.length;if(!z)throw Ey("Invalid nodes: it's empty!");if(!r){const $=1/z;return I.forEach((te,fe)=>{te.x=(fe+.5)*$,te.y=t}),{nodes:I,edges:N}}const H=i/(2*z),X=I.reduce(($,te)=>$+=te.value,0);return I.reduce(($,te)=>{te.weight=te.value/X,te.width=te.weight*(1-i),te.height=n;const fe=H+$,ye=fe+te.width,Le=t-n/2,Ge=Le+n;return te.x=[fe,ye,ye,fe],te.y=[Le,Le,Ge,Ge],$+te.width+2*H},0),{nodes:I,edges:N}}function M(I,N){const z=new Map(I.map($=>[$.id,$]));if(!r)return N.forEach($=>{const te=l($),fe=c($),ye=z.get(te),Le=z.get(fe);ye&&Le&&($.x=[ye.x,Le.x],$.y=[ye.y,Le.y])}),{nodes:I,edges:N};N.forEach($=>{$.x=[0,0,0,0],$.y=[t,t,t,t]});const H=ou(N,$=>$.source),X=ou(N,$=>$.target);I.forEach($=>{const{edges:te,width:fe,x:ye,y:Le,value:Ge,id:Qe}=$,gt=H.get(Qe)||[],qe=X.get(Qe)||[];let lt=0;gt.map(ft=>{const pt=ft.sourceWeight/Ge*fe;ft.x[0]=ye[0]+lt,ft.x[1]=ye[0]+lt+pt,lt+=pt}),qe.forEach(ft=>{const pt=ft.targetWeight/Ge*fe;ft.x[3]=ye[0]+lt,ft.x[2]=ye[0]+lt+pt,lt+=pt})})}return y}const YI=e=>t=>bae(e)(t);YI.props={};var pU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const KI={y:0,thickness:.05,marginRatio:.1,id:e=>e.key,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null},xae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},Eae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},Sae={position:"outside",fontSize:10},vU=(e,t)=>{const{data:n,encode:r={},scale:i,style:s={},layout:l={},nodeLabels:c=[],linkLabels:h=[],animate:p={},tooltip:v={}}=e,{nodes:y,links:b}=UM(n,r),w=go(r,"node"),R=go(r,"link"),{key:M=ft=>ft.key,color:I=M}=w,{linkEncodeColor:N=ft=>ft.source}=R,{nodeWidthRatio:z=KI.thickness,nodePaddingRatio:H=KI.marginRatio}=l,X=pU(l,["nodeWidthRatio","nodePaddingRatio"]),{nodes:$,edges:te}=YI(Object.assign(Object.assign(Object.assign(Object.assign({},KI),{id:Bm(M),thickness:z,marginRatio:H}),X),{weight:!0}))({nodes:y,edges:b}),fe=go(s,"label"),{text:ye=M}=fe,Le=pU(fe,["text"]),Ge=Lm(v,"node",{title:"",items:[ft=>({name:ft.key,value:ft.value})]},!0),Qe=Lm(v,"link",{title:"",items:[ft=>({name:`${ft.source} -> ${ft.target}`,value:ft.value})]}),{height:gt,width:qe}=t,lt=Math.min(gt,qe);return[oi({},Eae,{data:te,encode:Object.assign(Object.assign({},R),{color:N}),labels:h,style:Object.assign({fill:N?void 0:"#aaa"},go(s,"link")),tooltip:Qe,animate:Dm(p,"link")}),oi({},xae,{data:$,encode:Object.assign(Object.assign({},w),{color:I}),scale:i,style:go(s,"node"),coordinate:{type:"polar",outerRadius:(lt-20)/lt,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},Sae),{text:ye}),Le),...c],tooltip:Ge,animate:Dm(p,"node"),axis:!1})]};vU.props={};var Tae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const wae=(e,t)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[e,t],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),Aae=(e,t)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,e],range:[0,1]},y:{domain:[0,t],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),Oae={fontSize:10,text:e=>cE(e.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.x1-e.x0},Cae={title:e=>{var t,n;return(n=(t=e.path)===null||t===void 0?void 0:t.join)===null||n===void 0?void 0:n.call(t,".")},items:[{field:"value"}]},Rae={title:e=>cE(e.path),items:[{field:"value"}]},mU=(e,t)=>{const{width:n,height:r,options:i}=t,{data:s,encode:l={},scale:c,style:h={},layout:p={},labels:v=[],tooltip:y={}}=e,b=Tae(e,["data","encode","scale","style","layout","labels","tooltip"]),w=fl(i,["interaction","treemapDrillDown"]),R=oi({},wae(n,r),p,{layer:w?z=>z.depth===1:p.layer}),[M,I]=g7(s,R,l),N=go(h,"label");return oi({},Aae(n,r),Object.assign(Object.assign({data:M,scale:c,style:h,labels:[Object.assign(Object.assign({},Oae),N),...v]},b),{encode:l,tooltip:Ww(y,Cae),axis:!1}),w?{interaction:Object.assign(Object.assign({},b.interaction),{treemapDrillDown:w?Object.assign(Object.assign({},w),{originData:I,layout:R}):void 0}),encode:Object.assign({color:z=>cE(z.path)},l),tooltip:Ww(y,Rae)}:{})};mU.props={};function Mae(){return{"data.arc":YI,"data.cluster":$z,"mark.forceGraph":Zz,"mark.tree":Kz,"mark.pack":sU,"mark.sankey":dU,"mark.chord":vU,"mark.treemap":mU}}var gU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Pae(e,t){return h0(e,n=>t[n])}function Iae(e,t){return ls(e,n=>t[n])}function yU(e,t){const n=qI(e,t)*2.5-QI(e,t)*1.5;return h0(e,r=>t[r]>=n?t[r]:NaN)}function qI(e,t){return TA(e,.25,n=>t[n])}function Lae(e,t){return TA(e,.5,n=>t[n])}function QI(e,t){return TA(e,.75,n=>t[n])}function _U(e,t){const n=QI(e,t)*2.5-qI(e,t)*1.5;return ls(e,r=>t[r]<=n?t[r]:NaN)}function Dae(){return(e,t)=>{const{encode:n}=t,{y:r,x:i}=n,{value:s}=r,{value:l}=i;return[Array.from(ou(e,p=>l[+p]).values()).flatMap(p=>{const v=yU(p,s),y=_U(p,s);return p.filter(b=>s[b]<v||s[b]>y)}),t]}}const bU=e=>{const{data:t,encode:n,style:r={},tooltip:i={},transform:s,animate:l}=e,c=gU(e,["data","encode","style","tooltip","transform","animate"]),{point:h=!0}=r,p=gU(r,["point"]),{y:v}=n,y={y:v,y1:v,y2:v,y3:v,y4:v},b={y1:qI,y2:Lae,y3:QI},w=Lm(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),R=Lm(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!h)return Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:Pae},b),{y4:Iae})],encode:Object.assign(Object.assign({},n),y),style:p,tooltip:w},c);const M=go(p,"box"),I=go(p,"point");return[Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:yU},b),{y4:_U})],encode:Object.assign(Object.assign({},n),y),style:M,tooltip:w,animate:Dm(l,"box")},c),{type:"point",data:t,transform:[{type:Dae}],encode:n,style:Object.assign({},I),tooltip:R,animate:Dm(l,"point")}]};bU.props={};const xU=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))/2,Nae=(e,t)=>{if(!t)return;const{coordinate:n}=t;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(i,s,l)=>{const{document:c}=t.canvas,{color:h,index:p}=s,v=c.createElement("g",{}),y=xU(i[0],i[1]),b=xU(i[0],r)*2,w=c.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",y,y,0,1,0,...i[1]],["A",b+y*2,b+y*2,0,0,0,...i[2]],["A",y,y,0,1,p===0?0:1,...i[3]],["A",b,b,0,0,1,...i[0]],["Z"]]},l),J_(e,["shape","last","first"])),{fill:h||l.color})});return v.appendChild(w),v}};var sO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Bae=(e,t)=>{const{shape:n,radius:r}=e,i=sO(e,["shape","radius"]),s=go(i,"pointer"),l=go(i,"pin"),{shape:c}=s,h=sO(s,["shape"]),{shape:p}=l,v=sO(l,["shape"]),{coordinate:y,theme:b}=t;return(w,R)=>{const M=w.map(lt=>y.invert(lt)),[I,N,z]=Tj(y,"polar"),H=y.clone(),{color:X}=R,$=T2({startAngle:I,endAngle:N,innerRadius:z,outerRadius:r});$.push(["cartesian"]),H.update({transformations:$});const te=M.map(lt=>H.map(lt)),[fe,ye]=GR(te),[Le,Ge]=y.getCenter(),Qe=Object.assign(Object.assign({x1:fe,y1:ye,x2:Le,y2:Ge,stroke:X},h),i),gt=Object.assign(Object.assign({cx:Le,cy:Ge,stroke:X},v),i),qe=Aa(new ff);return Dv(c)||(typeof c=="function"?qe.append(()=>c(te,R,H,b)):qe.append("line").call(ia,Qe).node()),Dv(p)||(typeof p=="function"?qe.append(()=>p(te,R,H,b)):qe.append("circle").call(ia,gt).node()),qe.node()}},EU={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},Fae={style:{shape:Bae,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},kae={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"}};function zae(e){if((0,Gl.Z)(e)){const t=Math.max(0,Math.min(e,1));return{percent:t,target:t,total:1}}return e}function Uae(e,t){const{name:n="score",target:r,total:i,percent:s,thresholds:l=[]}=zae(e),c=s||r,h=s?1:i,p=Object.assign({y:{domain:[0,h]}},t);return l.length?{targetData:[{x:n,y:c,color:"target"}],totalData:l.map((v,y)=>({x:n,y:y>=1?v-l[y-1]:v,color:y})),target:c,total:h,scale:p}:{targetData:[{x:n,y:c,color:"target"}],totalData:[{x:n,y:c,color:"target"},{x:n,y:h-c,color:"total"}],target:c,total:h,scale:p}}function jae(e,{target:t,total:n}){const{content:r}=e;return r?r(t,n):t.toString()}const SU=e=>{const{data:t={},scale:n={},style:r={},animate:i={},transform:s=[]}=e,l=sO(e,["data","scale","style","animate","transform"]),{targetData:c,totalData:h,target:p,total:v,scale:y}=Uae(t,n),b=go(r,"text"),w=S2(r,["pointer","pin"]),R=go(r,"arc"),M=R.shape;return[oi({},EU,Object.assign({type:"interval",transform:[{type:"stackY"}],data:h,scale:y,style:M==="round"?Object.assign(Object.assign({},R),{shape:Nae}):R,animate:typeof i=="object"?go(i,"arc"):i},l)),oi({},EU,Fae,Object.assign({type:"point",data:c,scale:y,style:w,animate:typeof i=="object"?go(i,"indicator"):i},l)),oi({},kae,{style:Object.assign({text:jae(b,{target:p,total:v})},b),animate:typeof i=="object"?go(i,"text"):i})]};SU.props={};const TU=5e3;function wU(e,t,n){return e+(t-e)*n}function Vae(e,t,n,r){return t===0?[[e+1/2*n/Math.PI/2,r/2],[e+1/2*n/Math.PI,r],[e+n/4,r]]:t===1?[[e+1/2*n/Math.PI/2*(Math.PI-2),r],[e+1/2*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:t===2?[[e+1/2*n/Math.PI/2,-r/2],[e+1/2*n/Math.PI,-r],[e+n/4,-r]]:[[e+1/2*n/Math.PI/2*(Math.PI-2),-r],[e+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function Hae(e,t,n,r,i,s,l){const c=Math.ceil(2*e/n*4)*4,h=[];let p=r;for(;p<-Math.PI*2;)p+=Math.PI*2;for(;p>0;)p-=Math.PI*2;p=p/Math.PI/2*n;const v=s-e+p-e*2;h.push(["M",v,t]);let y=0;for(let b=0;b<c;++b){const w=b%4,R=Vae(b*n/4,w,n,i);h.push(["C",R[0][0]+v,-R[0][1]+t,R[1][0]+v,-R[1][1]+t,R[2][0]+v,-R[2][1]+t]),b===c-1&&(y=R[2][0])}return h.push(["L",y+v,l+e]),h.push(["L",v,l+e]),h.push(["Z"]),h}function Wae(e,t,n,r,i,s,l,c,h,p,v){const{fill:y,fillOpacity:b,opacity:w}=i;for(let R=0;R<r;R++){const M=r<=1?1:R/(r-1),I=Hae(c,l+c*n,h,0,c/40,e,t),N=v.createElement("path",{style:{d:I,fill:y,opacity:wU(.2,.9,M)*Number(w||b)}});s.appendChild(N);try{if(p===!1)return;const z=[{transform:"translate(0, 0)"},{transform:`translate(${h*2}, 0)`}];N.animate(z,{duration:wU(.5*TU,TU,M)*2,iterations:1/0})}catch(z){console.warn("off-screen group animate error!")}}}function Gae(e,t,n){return`
      M ${e} ${t-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function Zae(e,t,n){const i=n*.618;return`
      M ${e-i} ${t-n}
      L ${e+i} ${t-n}
      L ${e+i} ${t+n}
      L ${e-i} ${t+n}
      Z
    `}function Xae(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t}
      L ${e} ${t+n}
      L ${e-n} ${t}
      Z
    `}function $ae(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t+n}
      L ${e-n} ${t+n}
      Z
    `}function Yae(e,t,n){const r=n*4/3,i=Math.max(r,n*2),s=r/2,l=e,c=s+t-i/2,h=Math.asin(s/((i-s)*.85)),p=Math.sin(h)*s,v=Math.cos(h)*s,y=l-v,b=c+p,w=e,R=c+s/Math.sin(h);return`
      M ${y} ${b}
      A ${s} ${s} 0 1 1 ${y+v*2} ${b}
      Q ${w} ${R} ${e} ${t+i/2}
      Q ${w} ${R} ${y} ${b}
      Z 
    `}const AU={pin:Yae,rect:Zae,circle:Gae,diamond:Xae,triangle:$ae};var OU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Kae=(e="circle")=>AU[e]||AU.circle,CU=(e,t)=>{if(!t)return;const{coordinate:n}=t,{liquidOptions:r,styleOptions:i}=e,{liquidShape:s,percent:l}=r,{background:c,outline:h={},wave:p={}}=i,v=OU(i,["background","outline","wave"]),{border:y=2,distance:b=0}=h,w=OU(h,["border","distance"]),{length:R=192,count:M=3}=p;return(I,N,z)=>{const{document:H}=t.canvas,{color:X,fillOpacity:$}=z,te=Object.assign(Object.assign({fill:X},z),v),fe=H.createElement("g",{}),[ye,Le]=n.getCenter(),Ge=n.getSize(),Qe=Math.min(...Ge)/2,qe=(tp(s)?s:Kae(s))(ye,Le,Qe,...Ge);if(Object.keys(c).length){const pt=H.createElement("path",{style:Object.assign({d:qe,fill:"#fff"},c)});fe.appendChild(pt)}if(l>0){const pt=H.createElement("path",{style:{d:qe}});fe.appendChild(pt),fe.style.clipPath=pt,Wae(ye,Le,1-l,M,te,fe,pt.getBBox().y,Qe*2,R,!0,H)}const lt=H.createElement("path",{style:{d:qe,fill:"transparent",lineWidth:y+2*b,stroke:"#fff"}}),ft=H.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:qe,stroke:X,strokeOpacity:$,lineWidth:y},te),w),{fill:"transparent"})});return fe.appendChild(lt),fe.appendChild(ft),fe}};CU.props={};var qae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Qae={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:CU},animate:{enter:{type:"fadeIn"}}},Jae={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},RU=e=>{const{data:t={},style:n={},animate:r}=e,i=qae(e,["data","style","animate"]),s=Math.max(0,(0,Gl.Z)(t)?t:t==null?void 0:t.percent),l=[{percent:s,type:"liquid"}],c=Object.assign(Object.assign({},go(n,"text")),go(n,"content")),h=go(n,"outline"),p=go(n,"wave"),v=go(n,"background");return[oi({},Qae,Object.assign({type:"interval",data:l,style:{liquidOptions:{percent:s,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:h,wave:p,background:v})},animate:r},i)),oi({},Jae,{style:Object.assign({text:`${_b(s*100)} %`},c),animate:r})]};RU.props={};var Pg=D(69916);const MU=1e-10;function PU(e,t){const n=tse(e),r=n.filter(function(h){return ese(h,e)});let i=0,s=0,l;const c=[];if(r.length>1){const h=nse(r);for(l=0;l<r.length;++l){const v=r[l];v.angle=Math.atan2(v.x-h.x,v.y-h.y)}r.sort(function(v,y){return y.angle-v.angle});let p=r[r.length-1];for(l=0;l<r.length;++l){const v=r[l];s+=(p.x+v.x)*(v.y-p.y);const y={x:(v.x+p.x)/2,y:(v.y+p.y)/2};let b=null;for(let w=0;w<v.parentIndex.length;++w)if(p.parentIndex.indexOf(v.parentIndex[w])>-1){const R=e[v.parentIndex[w]],M=Math.atan2(v.x-R.x,v.y-R.y),I=Math.atan2(p.x-R.x,p.y-R.y);let N=I-M;N<0&&(N+=2*Math.PI);const z=I-N/2;let H=WE(y,{x:R.x+R.radius*Math.sin(z),y:R.y+R.radius*Math.cos(z)});H>R.radius*2&&(H=R.radius*2),(b===null||b.width>H)&&(b={circle:R,width:H,p1:v,p2:p})}b!==null&&(c.push(b),i+=JI(b.circle.radius,b.width),p=v)}}else{let h=e[0];for(l=1;l<e.length;++l)e[l].radius<h.radius&&(h=e[l]);let p=!1;for(l=0;l<e.length;++l)if(WE(e[l],h)>Math.abs(h.radius-e[l].radius)){p=!0;break}p?i=s=0:(i=h.radius*h.radius*Math.PI,c.push({circle:h,p1:{x:h.x,y:h.y+h.radius},p2:{x:h.x-MU,y:h.y+h.radius},width:h.radius*2}))}return s/=2,t&&(t.area=i+s,t.arcArea=i,t.polygonArea=s,t.arcs=c,t.innerPoints=r,t.intersectionPoints=n),i+s}function ese(e,t){for(let n=0;n<t.length;++n)if(WE(e,t[n])>t[n].radius+MU)return!1;return!0}function tse(e){const t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){const i=LU(e[n],e[r]);for(let s=0;s<i.length;++s){const l=i[s];l.parentIndex=[n,r],t.push(l)}}return t}function JI(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function WE(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function IU(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);const r=e-(n*n-t*t+e*e)/(2*n),i=t-(n*n-e*e+t*t)/(2*n);return JI(e,r)+JI(t,i)}function LU(e,t){const n=WE(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const s=(r*r-i*i+n*n)/(2*n),l=Math.sqrt(r*r-s*s),c=e.x+s*(t.x-e.x)/n,h=e.y+s*(t.y-e.y)/n,p=-(t.y-e.y)*(l/n),v=-(t.x-e.x)*(l/n);return[{x:c+p,y:h-v},{x:c-p,y:h+v}]}function nse(e){const t={x:0,y:0};for(let n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function rse(e,t){t=t||{},t.maxIterations=t.maxIterations||500;const n=t.initialLayout||sse,r=t.lossFunction||t5;e=ise(e);const i=n(e,t),s=[],l=[];let c;for(c in i)i.hasOwnProperty(c)&&(s.push(i[c].x),s.push(i[c].y),l.push(c));const p=(0,Pg.nelderMead)(function(v){const y={};for(let b=0;b<l.length;++b){const w=l[b];y[w]={x:v[2*b],y:v[2*b+1],radius:i[w].radius}}return r(y,e)},s,t).x;for(let v=0;v<l.length;++v)c=l[v],i[c].x=p[2*v],i[c].y=p[2*v+1];return i}const DU=1e-10;function e5(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+DU?Math.abs(e-t):(0,Pg.bisect)(function(r){return IU(e,t,r)-n},0,e+t)}function ise(e){e=e.slice();const t=[],n={};let r,i,s,l;for(r=0;r<e.length;++r){const c=e[r];c.sets.length==1?t.push(c.sets[0]):c.sets.length==2&&(s=c.sets[0],l=c.sets[1],n[[s,l]]=!0,n[[l,s]]=!0)}for(t.sort((c,h)=>c>h?1:-1),r=0;r<t.length;++r)for(s=t[r],i=r+1;i<t.length;++i)l=t[i],[s,l]in n||e.push({sets:[s,l],size:0});return e}function ose(e,t,n){const r=(0,Pg.zerosM)(t.length,t.length),i=(0,Pg.zerosM)(t.length,t.length);return e.filter(function(s){return s.sets.length==2}).map(function(s){const l=n[s.sets[0]],c=n[s.sets[1]],h=Math.sqrt(t[l].size/Math.PI),p=Math.sqrt(t[c].size/Math.PI),v=e5(h,p,s.size);r[l][c]=r[c][l]=v;let y=0;s.size+1e-10>=Math.min(t[l].size,t[c].size)?y=1:s.size<=1e-10&&(y=-1),i[l][c]=i[c][l]=y}),{distances:r,constraints:i}}function ase(e,t,n,r){let i=0,s;for(s=0;s<t.length;++s)t[s]=0;for(s=0;s<n.length;++s){const l=e[2*s],c=e[2*s+1];for(let h=s+1;h<n.length;++h){const p=e[2*h],v=e[2*h+1],y=n[s][h],b=r[s][h],w=(p-l)*(p-l)+(v-c)*(v-c),R=Math.sqrt(w),M=w-y*y;b>0&&R<=y||b<0&&R>=y||(i+=2*M*M,t[2*s]+=4*M*(l-p),t[2*s+1]+=4*M*(c-v),t[2*h]+=4*M*(p-l),t[2*h+1]+=4*M*(v-c))}}return i}function sse(e,t){let n=use(e,t);const r=t.lossFunction||t5;if(e.length>=8){const i=lse(e,t),s=r(i,e),l=r(n,e);s+1e-8<l&&(n=i)}return n}function lse(e,t){t=t||{};const n=t.restarts||10,r=[],i={};let s;for(s=0;s<e.length;++s){const M=e[s];M.sets.length==1&&(i[M.sets[0]]=r.length,r.push(M))}const l=ose(e,r,i);let c=l.distances;const h=l.constraints,p=(0,Pg.norm2)(c.map(Pg.norm2))/c.length;c=c.map(function(M){return M.map(function(I){return I/p})});const v=function(M,I){return ase(M,I,c,h)};let y,b;for(s=0;s<n;++s){const M=(0,Pg.zeros)(c.length*2).map(Math.random);b=(0,Pg.conjugateGradient)(v,M,t),(!y||b.fx<y.fx)&&(y=b)}const w=y.x,R={};for(s=0;s<r.length;++s){const M=r[s];R[M.sets[0]]={x:w[2*s]*p,y:w[2*s+1]*p,radius:Math.sqrt(M.size/Math.PI)}}if(t.history)for(s=0;s<t.history.length;++s)(0,Pg.scale)(t.history[s].x,p);return R}function use(e,t){const n=t&&t.lossFunction?t.lossFunction:t5,r={},i={};let s;for(let y=0;y<e.length;++y){const b=e[y];b.sets.length==1&&(s=b.sets[0],r[s]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:b.size,radius:Math.sqrt(b.size/Math.PI)},i[s]=[])}e=e.filter(function(y){return y.sets.length==2});for(let y=0;y<e.length;++y){const b=e[y];let w=b.hasOwnProperty("weight")?b.weight:1;const R=b.sets[0],M=b.sets[1];b.size+DU>=Math.min(r[R].size,r[M].size)&&(w=0),i[R].push({set:M,size:b.size,weight:w}),i[M].push({set:R,size:b.size,weight:w})}const l=[];for(s in i)if(i.hasOwnProperty(s)){let y=0;for(let b=0;b<i[s].length;++b)y+=i[s][b].size*i[s][b].weight;l.push({set:s,size:y})}function c(y,b){return b.size-y.size}l.sort(c);const h={};function p(y){return y.set in h}function v(y,b){r[b].x=y.x,r[b].y=y.y,h[b]=!0}v({x:0,y:0},l[0].set);for(let y=1;y<l.length;++y){const b=l[y].set,w=i[b].filter(p);if(s=r[b],w.sort(c),w.length===0)throw"ERROR: missing pairwise overlap information";const R=[];for(let N=0;N<w.length;++N){const z=r[w[N].set],H=e5(s.radius,z.radius,w[N].size);R.push({x:z.x+H,y:z.y}),R.push({x:z.x-H,y:z.y}),R.push({y:z.y+H,x:z.x}),R.push({y:z.y-H,x:z.x});for(let X=N+1;X<w.length;++X){const $=r[w[X].set],te=e5(s.radius,$.radius,w[X].size),fe=LU({x:z.x,y:z.y,radius:H},{x:$.x,y:$.y,radius:te});for(let ye=0;ye<fe.length;++ye)R.push(fe[ye])}}let M=1e50,I=R[0];for(let N=0;N<R.length;++N){r[b].x=R[N].x,r[b].y=R[N].y;const z=n(r,e);z<M&&(M=z,I=R[N])}v(I,b)}return r}function t5(e,t){let n=0;function r(i){return i.map(function(s){return e[s]})}for(let i=0;i<t.length;++i){const s=t[i];let l;if(s.sets.length==1)continue;if(s.sets.length==2){const h=e[s.sets[0]],p=e[s.sets[1]];l=IU(h.radius,p.radius,WE(h,p))}else l=PU(r(s.sets));const c=s.hasOwnProperty("weight")?s.weight:1;n+=c*(l-s.size)*(l-s.size)}return n}function cse(e,t,n){n===null?e.sort(function(i,s){return s.radius-i.radius}):e.sort(n);let r;if(e.length>0){const i=e[0].x,s=e[0].y;for(r=0;r<e.length;++r)e[r].x-=i,e[r].y-=s}if(e.length==2&&distance(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){const i=Math.atan2(e[1].x,e[1].y)-t;let s,l;const c=Math.cos(i),h=Math.sin(i);for(r=0;r<e.length;++r)s=e[r].x,l=e[r].y,e[r].x=c*s-h*l,e[r].y=h*s+c*l}if(e.length>2){let i=Math.atan2(e[2].x,e[2].y)-t;for(;i<0;)i+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI;if(i>Math.PI){const s=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){const l=(e[r].x+s*e[r].y)/(1+s*s);e[r].x=2*l-e[r].x,e[r].y=2*l*s-e[r].y}}}}function fse(e){e.map(function(l){l.parent=l});function t(l){return l.parent!==l&&(l.parent=t(l.parent)),l.parent}function n(l,c){const h=t(l),p=t(c);h.parent=p}for(let l=0;l<e.length;++l)for(let c=l+1;c<e.length;++c){const h=e[l].radius+e[c].radius;distance(e[l],e[c])+1e-10<h&&n(e[c],e[l])}const r={};let i;for(let l=0;l<e.length;++l)i=t(e[l]).parent.setid,i in r||(r[i]=[]),r[i].push(e[l]);e.map(function(l){delete l.parent});const s=[];for(i in r)r.hasOwnProperty(i)&&s.push(r[i]);return s}function n5(e){const t=function(n){const r=Math.max.apply(null,e.map(function(s){return s[n]+s.radius})),i=Math.min.apply(null,e.map(function(s){return s[n]-s.radius}));return{max:r,min:i}};return{xRange:t("x"),yRange:t("y")}}function Mpe(e,t,n){t===null&&(t=Math.PI/2);let r=[],i,s;for(s in e)if(e.hasOwnProperty(s)){const b=e[s];r.push({x:b.x,y:b.y,radius:b.radius,setid:s})}const l=fse(r);for(i=0;i<l.length;++i){cse(l[i],t,n);const b=n5(l[i]);l[i].size=(b.xRange.max-b.xRange.min)*(b.yRange.max-b.yRange.min),l[i].bounds=b}l.sort(function(b,w){return w.size-b.size}),r=l[0];let c=r.bounds;const h=(c.xRange.max-c.xRange.min)/50;function p(b,w,R){if(!b)return;const M=b.bounds;let I,N,z;w?I=c.xRange.max-M.xRange.min+h:(I=c.xRange.max-M.xRange.max,z=(M.xRange.max-M.xRange.min)/2-(c.xRange.max-c.xRange.min)/2,z<0&&(I+=z)),R?N=c.yRange.max-M.yRange.min+h:(N=c.yRange.max-M.yRange.max,z=(M.yRange.max-M.yRange.min)/2-(c.yRange.max-c.yRange.min)/2,z<0&&(N+=z));for(let H=0;H<b.length;++H)b[H].x+=I,b[H].y+=N,r.push(b[H])}let v=1;for(;v<l.length;)p(l[v],!0,!1),p(l[v+1],!1,!0),p(l[v+2],!0,!0),v+=3,c=n5(r);const y={};for(i=0;i<r.length;++i)y[r[i].setid]=r[i];return y}function hse(e,t,n,r){const i=[],s=[];for(const M in e)e.hasOwnProperty(M)&&(s.push(M),i.push(e[M]));t-=2*r,n-=2*r;const l=n5(i),c=l.xRange,h=l.yRange;if(c.max==c.min||h.max==h.min)return console.log("not scaling solution: zero size detected"),e;const p=t/(c.max-c.min),v=n/(h.max-h.min),y=Math.min(v,p),b=(t-(c.max-c.min)*y)/2,w=(n-(h.max-h.min)*y)/2,R={};for(let M=0;M<i.length;++M){const I=i[M];R[s[M]]={radius:y*I.radius,x:r+b+(I.x-c.min)*y,y:r+w+(I.y-h.min)*y}}return R}function dse(e,t,n){const r=[],i=e-n,s=t;return r.push("M",i,s),r.push("A",n,n,0,1,0,i+2*n,s),r.push("A",n,n,0,1,0,i,s),r.join(" ")}function pse(e){const t={};PU(e,t);const n=t.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return dse(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){const s=n[i],l=s.circle.radius,c=s.width>l;r.push(`
A`,l,l,0,c?1:0,1,s.p1.x,s.p1.y)}return r.join(" ")}}const NU=e=>{const{sets:t="sets",size:n="size",as:r=["key","path"],padding:i=0}=e,[s,l]=r;return c=>{const h=c.map(y=>Object.assign(Object.assign({},y),{sets:y[t],size:y[n],[s]:y.sets.join("&")}));h.sort((y,b)=>y.sets.length-b.sets.length);const p=rse(h);let v;return h.map(y=>{const b=y[t],w=({width:R,height:M})=>{v=v||hse(p,R,M,i);const I=b.map(z=>v[z]);let N=pse(I);return/[zZ]$/.test(N)||(N+=" Z"),N};return Object.assign(Object.assign({},y),{[l]:w})})}};NU.props={};function vse(){return{"data.venn":NU,"mark.boxplot":bU,"mark.gauge":SU,"mark.wordCloud":uP,"mark.liquid":RU}}function mse(){return Object.assign(Object.assign(Object.assign(Object.assign({},Oie()),Mae()),vse()),Sre())}var lO=function(){return lO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},lO.apply(this,arguments)},gse=qY(KY,lO(lO({},mse()),NK())),yse="[object Boolean]";function _se(e){return e===!0||e===!1||ja(e)&&pe(e)==yse}var r5=_se,GE=function(){return GE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},GE.apply(this,arguments)},bse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},xse=["renderer"],BU=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],i5="__transform__",Ese="__skipDelCustomKeys__",_1=function(e,t){return r5(t)?{type:e,available:t}:GE({type:e},t)},o5={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(e){return _1("stackY",e)}},normalize:{target:"transform",value:function(e){return _1("normalizeY",e)}},percent:{target:"transform",value:function(e){return _1("normalizeY",e)}},group:{target:"transform",value:function(e){return _1("dodgeX",e)}},sort:{target:"transform",value:function(e){return _1("sortX",e)}},symmetry:{target:"transform",value:function(e){return _1("symmetryY",e)}},diff:{target:"transform",value:function(e){return _1("diffY",e)}},meta:{target:"scale",value:function(e){return e}},label:{target:"labels",value:function(e){return e}},shape:"style.shape",connectNulls:{target:"style",value:function(e){return r5(e)?{connect:e}:e}}},a5=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],uO=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:a5},{key:"point",type:"point",extend_keys:a5},{key:"area",type:"area",extend_keys:a5}],Sse=[{key:"transform",callback:function(e,t,n){var r;e[t]=e[t]||[];var i=n.available,s=i===void 0?!0:i,l=bse(n,["available"]);if(s)e[t].push(GE((r={},r[i5]=!0,r),l));else{var c=e[t].indexOf(function(h){return h.type===n.type});c!==-1&&e[t].splice(c,1)}}},{key:"labels",callback:function(e,t,n){var r;if(!n||Rt(n)){e[t]=n||[];return}n.text||(n.text=e.yField),e[t]=e[t]||[],e[t].push(GE((r={},r[i5]=!0,r),n))}}],s5=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],Tse=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cO=function(){return cO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cO.apply(this,arguments)},wse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Ase=function(e){Tse(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=wse(n,["style"]);return e.call(this,cO({style:cO({fill:"#eee"},r)},i))||this}return t}(H1),Ose=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fO=function(){return fO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},fO.apply(this,arguments)},Cse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},FU=function(e){Ose(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=Cse(n,["style"]);return e.call(this,fO({style:fO({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},i))||this}return t}(hf);function Rse(e,t,n){(n!==void 0&&!vt(e[t],n)||n===void 0&&!(t in e))&&an(e,t,n)}var l5=Rse;function Mse(e){return function(t,n,r){for(var i=-1,s=Object(t),l=r(t),c=l.length;c--;){var h=l[e?c:++i];if(n(s[h],h,s)===!1)break}return t}}var Pse=Mse,Ise=Pse(),kU=Ise;function Lse(e){return ja(e)&&Ql(e)}var Dse=Lse,Nse="[object Object]",Bse=Function.prototype,Fse=Object.prototype,zU=Bse.toString,kse=Fse.hasOwnProperty,zse=zU.call(Object);function Use(e){if(!ja(e)||pe(e)!=Nse)return!1;var t=Vf(e);if(t===null)return!0;var n=kse.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&zU.call(n)==zse}var u5=Use;function jse(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var c5=jse;function Vse(e){return Fr(e,en(e))}var Hse=Vse;function Wse(e,t,n,r,i,s,l){var c=c5(e,n),h=c5(t,n),p=l.get(h);if(p){l5(e,n,p);return}var v=s?s(c,h,n+"",e,t,l):void 0,y=v===void 0;if(y){var b=Rt(h),w=!b&&Bf(h),R=!b&&!w&&b0(h);v=h,b||w||R?Rt(c)?v=c:Dse(c)?v=Es(c):w?(y=!1,v=Mu(h,!0)):R?(y=!1,v=Fd(h,!0)):v=[]:u5(h)||bf(h)?(v=c,bf(c)?v=Hse(c):(!de(c)||Xn(c))&&(v=lv(h))):y=!1}y&&(l.set(h,v),i(v,h,r,s,l),l.delete(h)),l5(e,n,v)}var Gse=Wse;function UU(e,t,n,r,i){e!==t&&kU(t,function(s,l){if(i||(i=new Ou),de(s))Gse(e,t,l,n,UU,r,i);else{var c=r?r(c5(e,l),s,l+"",e,t,i):void 0;c===void 0&&(c=s),l5(e,l,c)}},en)}var Zse=UU;function Xse(e){return e}var f5=Xse;function $se(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Yse=$se,jU=Math.max;function Kse(e,t,n){return t=jU(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=jU(r.length-t,0),l=Array(s);++i<s;)l[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(l),Yse(e,this,c)}}var VU=Kse;function qse(e){return function(){return e}}var Qse=qse,Jse=mn?function(e,t){return mn(e,"toString",{configurable:!0,enumerable:!1,value:Qse(t),writable:!0})}:f5,ele=Jse,tle=800,nle=16,rle=Date.now;function ile(e){var t=0,n=0;return function(){var r=rle(),i=nle-(r-n);if(n=r,i>0){if(++t>=tle)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var ole=ile,ale=ole(ele),HU=ale;function sle(e,t){return HU(VU(e,t,f5),e+"")}var lle=sle;function ule(e,t,n){if(!de(n))return!1;var r=typeof t;return(r=="number"?Ql(n)&&Ff(t,n.length):r=="string"&&t in n)?vt(n[t],e):!1}var cle=ule;function fle(e){return lle(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,l&&cle(n[0],n[1],l)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,s)}return t})}var WU=fle,hle=WU(function(e,t,n,r){Zse(e,t,n,r)}),dle=hle,GU=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},ple=function(e,t){if(Rt(t))return t},Gy=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return dle.apply(void 0,GU(GU([],e,!1),[ple],!1))},vle=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZU=function(e){vle(t,e);function t(n,r,i){var s=e.call(this,{style:Gy(i,r)})||this;return s.chart=n,s}return t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},t.prototype.disconnectedCallback=function(){},t.prototype.attributeChangedCallback=function(n){},t.prototype.update=function(n,r){var i;return this.attr(Gy({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),i=[];return r.forEach(function(s){var l=s.getBBox(),c=l.x,h=l.y,p=l.width,v=l.height,y=s.__data__;i.push({bbox:l,x:c,y:h,width:p,height:v,key:y.key,data:y})}),i},t.prototype.bindEvents=function(n,r){},t}(V1),mle=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hO=function(){return hO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},hO.apply(this,arguments)},gle=function(e){mle(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=this.getElementsLayout(),i=r[0],s=i.x,l=i.y,c=i.height,h=i.width,p=i.data,v=["items",0,"value"],y=di(p,v),b=n?r[1].y-l-c:r[1].x-s-h,w=[],R=this.attributes,M=R.size,I=M===void 0?40:M,N=R.arrowSize,z=N===void 0?20:N,H=R.spacing,X=H===void 0?4:H;return r.forEach(function($,te){if(te>0){var fe=$.x,ye=$.y,Le=$.height,Ge=$.width,Qe=$.data,gt=$.key,qe=di(Qe,v),lt=I/2;if(n){var ft=fe+Ge/2,pt=ye;w.push({points:[[ft+lt,pt-b+X],[ft+lt,pt-z-X],[ft,pt-X],[ft-lt,pt-z-X],[ft-lt,pt-b+X]],center:[ft,pt-b/2-X],width:b,value:[y,qe],key:gt})}else{var ft=fe,pt=ye+Le/2;w.push({points:[[fe-b+X,pt-lt],[fe-z-X,pt-lt],[ft-X,pt],[fe-z-X,pt+lt],[fe-b+X,pt+lt]],center:[ft-b/2-X,pt],width:b,value:[y,qe],key:gt})}y=qe}}),w},t.prototype.render=function(){this.setDirection(),this.drawConversionTag()},t.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=di(n,"options.transformations"),i="horizontal";r.forEach(function(s){s.includes("transpose")&&(i="vertical")}),this.direction=i},t.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),i=this.attributes,s=i.style,l=i.text,c=l.style,h=l.formatter;r.forEach(function(p){var v=p.points,y=p.center,b=p.value,w=p.key,R=b[0],M=b[1],I=y[0],N=y[1],z=new Ase({style:hO({points:v,fill:"#eee"},s),id:"polygon-".concat(w)}),H=new FU({style:hO({x:I,y:N,text:Xn(h)?h(R,M):(M/R*100).toFixed(2)+"%"},c),id:"text-".concat(w)});n.appendChild(z),n.appendChild(H)})},t.prototype.update=function(){var n=this,r=this.getConversionTagLayout();r.forEach(function(i){var s=i.points,l=i.center,c=i.key,h=l[0],p=l[1],v=n.getElementById("polygon-".concat(c)),y=n.getElementById("text-".concat(c));v.setAttribute("points",s),y.setAttribute("x",h),y.setAttribute("y",p)})},t.tag="ConversionTag",t}(ZU),yle=1,_le=2;function ble(e,t,n,r){var i=n.length,s=i,l=!r;if(e==null)return!s;for(e=Object(e);i--;){var c=n[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){c=n[i];var h=c[0],p=e[h],v=c[1];if(l&&c[2]){if(p===void 0&&!(h in e))return!1}else{var y=new Ou;if(r)var b=r(p,v,h,e,t,y);if(!(b===void 0?We(v,p,yle|_le,r,y):b))return!1}}return!0}var xle=ble;function Ele(e){return e===e&&!de(e)}var XU=Ele;function Sle(e){for(var t=Ju(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,XU(i)]}return t}var Tle=Sle;function wle(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var $U=wle;function Ale(e){var t=Tle(e);return t.length==1&&t[0][2]?$U(t[0][0],t[0][1]):function(n){return n===e||xle(n,e,t)}}var Ole=Ale;function Cle(e,t){return e!=null&&t in Object(e)}var Rle=Cle;function Mle(e,t,n){t=_i(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var l=eo(t[r]);if(!(s=e!=null&&n(e,l)))break;e=e[l]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&Up(i)&&Ff(l,i)&&(Rt(e)||bf(e)))}var Ple=Mle;function Ile(e,t){return e!=null&&Ple(e,t,Rle)}var YU=Ile,Lle=1,Dle=2;function Nle(e,t){return Xm(e)&&XU(t)?$U(eo(e),t):function(n){var r=di(n,e);return r===void 0&&r===t?YU(n,e):We(t,r,Lle|Dle)}}var Ble=Nle;function Fle(e){return function(t){return t==null?void 0:t[e]}}var kle=Fle;function zle(e){return function(t){return to(t,e)}}var Ule=zle;function jle(e){return Xm(e)?kle(eo(e)):Ule(e)}var Vle=jle;function Hle(e){return typeof e=="function"?e:e==null?f5:typeof e=="object"?Rt(e)?Ble(e[0],e[1]):Ole(e):Vle(e)}var h5=Hle;function Wle(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var Gle=Wle;function Zle(e){return e!==e}var Xle=Zle;function $le(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var Yle=$le;function Kle(e,t,n){return t===t?Yle(e,t,n):Gle(e,Xle,n)}var KU=Kle;function qle(e,t){var n=e==null?0:e.length;return!!n&&KU(e,t,0)>-1}var Qle=qle;function Jle(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var eue=Jle;function tue(){}var qU=tue,nue=1/0,rue=wc&&1/Pl(new wc([,-0]))[1]==nue?function(e){return new wc(e)}:qU,iue=rue,oue=200;function aue(e,t,n){var r=-1,i=Qle,s=e.length,l=!0,c=[],h=c;if(n)l=!1,i=eue;else if(s>=oue){var p=t?null:iue(e);if(p)return Pl(p);l=!1,i=Lf,h=new Hh}else h=t?[]:c;e:for(;++r<s;){var v=e[r],y=t?t(v):v;if(v=n||v!==0?v:0,l&&y===y){for(var b=h.length;b--;)if(h[b]===y)continue e;t&&h.push(y),c.push(v)}else i(h,y,n)||(h!==c&&h.push(y),c.push(v))}return c}var sue=aue;function lue(e,t){return e&&e.length?sue(e,h5(t,2)):[]}var d5=lue;function uue(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;){var l=e[i];t(r,l,n(l),e)}return r}var cue=uue;function fue(e,t){return e&&kU(e,t,Ju)}var hue=fue;function due(e,t){return function(n,r){if(n==null)return n;if(!Ql(n))return e(n,r);for(var i=n.length,s=t?i:-1,l=Object(n);(t?s--:++s<i)&&r(l[s],s,l)!==!1;);return n}}var pue=due,vue=pue(hue),QU=vue;function mue(e,t,n,r){return QU(e,function(i,s,l){t(r,i,n(i),l)}),r}var gue=mue;function yue(e,t){return function(n,r){var i=Rt(n)?cue:gue,s=t?t():{};return i(n,e,h5(r,2),s)}}var _ue=yue,bue=Object.prototype,xue=bue.hasOwnProperty,Eue=_ue(function(e,t,n){xue.call(e,n)?e[n].push(t):an(e,n,[t])}),JU=Eue,p5=32,ej=16,tj=48,Sue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZE=function(){return ZE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ZE.apply(this,arguments)},Tue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},wue=function(e){Sue(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.render=function(){this.drawText()},t.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",i=this.getElementsLayout(),s=r?d5(i,"x"):d5(i,"y"),l=["title"],c=[],h=this.chart.getContext().views,p=di(h,[0,"layout"]),v=p.width,y=p.height;return s.forEach(function(b){var w=b.x,R=b.y,M=b.height,I=b.width,N=b.data,z=b.key,H=di(N,l);r?c.push({x:w+I/2,y,text:H,key:z}):c.push({x:v,y:R+M/2,text:H,key:z})}),d5(c,"text").length!==c.length&&(c=Object.values(JU(c,"text")).map(function(b){var w,R=b.reduce(function(M,I){return M+(r?I.x:I.y)},0);return ZE(ZE({},b[0]),(w={},w[r?"x":"y"]=R/b.length,w))})),c},t.prototype.transformLabelStyle=function(n){var r={},i=/^label[A-Z]/;return Object.keys(n).forEach(function(s){i.test(s)&&(r[s.replace("label","").replace(/^[A-Z]/,function(l){return l.toLowerCase()})]=n[s])}),r},t.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,s=i.layout,l=i.labelFormatter,c=Tue(i,["layout","labelFormatter"]);r.forEach(function(h){var p=h.x,v=h.y,y=h.text,b=h.key,w=new FU({style:ZE({x:p,y:v,text:Xn(l)?l(y):y,wordWrap:!0,wordWrapWidth:s==="horizontal"?p5*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(c)),id:"text-".concat(b)});n.appendChild(w)})},t.prototype.update=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout();r.forEach(function(i){var s=i.x,l=i.y,c=i.key,h=n.getElementById("text-".concat(c));h.setAttribute("x",s),h.setAttribute("y",l)})},t.tag="BidirectionalBarAxisText",t}(ZU),Aue={ConversionTag:gle,BidirectionalBarAxisText:wue},Oue=function(){function e(t,n){this.container=new Map,this.chart=t,this.config=n,this.init()}return e.prototype.init=function(){var t=this;s5.forEach(function(n){var r,i=n.key,s=n.shape,l=t.config[i];if(l){var c=new Aue[s](t.chart,l),h=t.chart.getContext().canvas;h.appendChild(c),t.container.set(i,c)}else(r=t.container.get(i))===null||r===void 0||r.clear()})},e.prototype.update=function(){var t=this;this.container.size&&s5.forEach(function(n){var r=n.key,i=t.container.get(r);i==null||i.update()})},e}();function Cue(e,t,n,r){if(!de(e))return e;t=_i(t,e);for(var i=-1,s=t.length,l=s-1,c=e;c!=null&&++i<s;){var h=eo(t[i]),p=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(i!=l){var v=c[h];p=r?r(v,h,c):void 0,p===void 0&&(p=de(v)?v:Ff(t[i+1])?[]:{})}Mr(c,h,p),c=c[h]}return e}var nj=Cue;function Rue(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var l=t[r],c=to(e,l);n(c,l)&&nj(s,_i(l,e),c)}return s}var Mue=Rue;function Pue(e,t){return Mue(e,t,function(n,r){return YU(e,r)})}var Iue=Pue,rj=hn?hn.isConcatSpreadable:void 0;function Lue(e){return Rt(e)||bf(e)||!!(rj&&e&&e[rj])}var Due=Lue;function ij(e,t,n,r,i){var s=-1,l=e.length;for(n||(n=Due),i||(i=[]);++s<l;){var c=e[s];t>0&&n(c)?t>1?ij(c,t-1,n,r,i):Li(i,c):r||(i[i.length]=c)}return i}var Nue=ij;function Bue(e){var t=e==null?0:e.length;return t?Nue(e,1):[]}var Fue=Bue;function kue(e){return HU(VU(e,void 0,Fue),e+"")}var v5=kue,zue=v5(function(e,t){return e==null?{}:Iue(e,t)}),oj=zue,Uue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lx=function(){return lx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},lx.apply(this,arguments)},aj="data-chart-source-type",Ml=function(e){Uue(t,e);function t(n,r){var i=e.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=i.mergeOption(r),i.createG2(),i.bindEvents(),i}return t.prototype.getChartOptions=function(){return lx(lx({},oj(this.options,xse)),{container:this.container})},t.prototype.getSpecOptions=function(){return this.type==="base"||this[Ese]?lx(lx({},this.options),this.getChartOptions()):this.options},t.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new gse(this.getChartOptions()),this.container.setAttribute(aj,"Ant Design Charts")},t.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},t.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},t.prototype.getDefaultOptions=function(){},t.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new Oue(n.chart,n.options)}),this.bindSizeSensor()},t.prototype.update=function(n){this.options=this.mergeOption(n)},t.prototype.mergeOption=function(n){return Gy({},this.getBaseOptions(),this.getDefaultOptions(),n)},t.prototype.changeData=function(n){this.chart.changeData(n)},t.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},t.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(aj)},t.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit,i=r===void 0?!0:r;i&&this.chart.on(bl.AFTER_CHANGE_SIZE,function(){n.annotation.update()})},t}(Fo),jue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vue=function(e){jue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="base",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return function(n){return n}},t}(Ml);function Hue(){}var m5=Hue;function dO(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}dO.prototype=sv(m5.prototype),dO.prototype.constructor=dO;var XE=dO,Wue=Uc&&new Uc,sj=Wue,Gue=sj?function(e){return sj.get(e)}:qU,lj=Gue,Zue={},uj=Zue,Xue=Object.prototype,$ue=Xue.hasOwnProperty;function Yue(e){for(var t=e.name+"",n=uj[t],r=$ue.call(uj,t)?n.length:0;r--;){var i=n[r],s=i.func;if(s==null||s==e)return i.name}return t}var pO=Yue,Kue=4294967295;function vO(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Kue,this.__views__=[]}vO.prototype=sv(m5.prototype),vO.prototype.constructor=vO;var g5=vO;function que(e){if(e instanceof g5)return e.clone();var t=new XE(e.__wrapped__,e.__chain__);return t.__actions__=Es(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Que=que,Jue=Object.prototype,ece=Jue.hasOwnProperty;function mO(e){if(ja(e)&&!Rt(e)&&!(e instanceof g5)){if(e instanceof XE)return e;if(ece.call(e,"__wrapped__"))return Que(e)}return new XE(e)}mO.prototype=m5.prototype,mO.prototype.constructor=mO;var tce=mO;function nce(e){var t=pO(e),n=tce[t];if(typeof n!="function"||!(t in g5.prototype))return!1;if(e===n)return!0;var r=lj(n);return!!r&&e===r[0]}var cj=nce,rce="Expected a function",ice=8,oce=32,ace=128,sce=256;function lce(e){return v5(function(t){var n=t.length,r=n,i=XE.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if(typeof s!="function")throw new TypeError(rce);if(i&&!l&&pO(s)=="wrapper")var l=new XE([],!0)}for(r=l?r:n;++r<n;){s=t[r];var c=pO(s),h=c=="wrapper"?lj(s):void 0;h&&cj(h[0])&&h[1]==(ace|ice|oce|sce)&&!h[4].length&&h[9]==1?l=l[pO(h[0])].apply(l,h[3]):l=s.length==1&&cj(s)?l[c]():l.thru(s)}return function(){var p=arguments,v=p[0];if(l&&p.length==1&&Rt(v))return l.plant(v).value();for(var y=0,b=n?t[y].apply(this,p):v;++y<n;)b=t[y].call(this,b);return b}})}var uce=lce,cce=uce(),Ul=cce,fce=function(e){var t=e.options,n=t.children,r=n===void 0?[]:n;return r.forEach(function(i){Object.keys(i).forEach(function(s){Rt(i[s])&&s!=="data"&&(i[s]=i[s].filter(function(l){return!l[i5]}))})}),t};function hce(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var dce=hce;function pce(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var vce=pce;function mce(e,t){return t.length<2?e:to(e,vce(t,0,-1))}var gce=mce;function yce(e,t){return t=_i(t,e),e=gce(e,t),e==null||delete e[eo(dce(t))]}var _ce=yce;function bce(e){return u5(e)?void 0:e}var xce=bce,Ece=1,Sce=2,Tce=4,wce=v5(function(e,t){var n={};if(e==null)return n;var r=!1;t=li(t,function(s){return s=_i(s,e),r||(r=s.length>1),s}),Fr(e,Kh(e),n),r&&(n=kg(n,Ece|Sce|Tce,xce));for(var i=t.length;i--;)_ce(n,t[i]);return n}),y5=wce;function Ace(e){return e===void 0}var Oce=Ace;function Cce(e,t,n){return e==null?e:nj(e,t,n)}var Ra=Cce,fj=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},Rce=function(e){var t=e.children,n=t===void 0?[]:t,r=Object.keys(o5).concat(uO.map(function(i){return i.key}));return r.forEach(function(i){delete e[i]}),n.forEach(function(i){Object.keys(i).forEach(function(s){r.includes(s)&&delete i[s]})}),Object.keys(e).forEach(function(i){fj(fj([],BU,!0),s5.map(function(s){return s.key}),!0).includes(i)||delete e[i]}),e},Yl=function(e){var t=fce(e),n=t.children,r=n===void 0?[]:n,i=y5(t,[].concat(BU,uO.map(function(p){return p.key}))),s=function(p){var v;return(v=Sse.find(function(y){return y.key===p}))===null||v===void 0?void 0:v.callback},l=function(p,v,y){var b=s(v);b?b(p,v,y):p[v]=Gy({},p[v],y)},c=function(p){Object.keys(p).forEach(function(v){if(p[v]){var y=uO.find(function(R){return R.key===v});if(y){var b=y.type,w=y.extend_keys;b?r.push(h(Gy({},oj(p,w),{type:b},p[v]))):Rt(p[v])&&p[v].forEach(function(R){r.push(h(R))})}}})},h=function(p){return c(p),Object.keys(o5).forEach(function(v){var y=o5[v];if(!Oce(p[v]))if(de(y)){var b=y.value,w=y.target,R=b(p[v]);l(p,w,R)}else Ra(p,y,p[v])}),p};return r.forEach(function(p){var v=Gy({},i,p);h(Gy(p,v))}),c(t),Rce(t),e},_5=function(){return _5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_5.apply(this,arguments)};function Mce(e){var t=e.options,n=t.stack,r=t.tooltip,i=t.xField;if(!n)return e;var s=uO.map(function(c){return c.type}).filter(function(c){return!!c}),l=!1;return s.forEach(function(c){t[c]&&(l=!0,Ra(t,[c,"stack"],_5({y1:"y"},typeof n=="object"?n:{})))}),l&&!r5(r)&&!r&&Ra(t,"tooltip",{title:i,items:[{channel:"y"}]}),e}function Nc(e){return Ul(Mce)(e)}function Pce(e){return Ul(Nc,Yl)(e)}var Ice=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lce=function(e){Ice(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="area",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Pce},t}(Ml),ux=function(){return ux=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ux.apply(this,arguments)};function hj(e){var t=function(n){var r=n.options;di(r,"children.length")>1&&Ra(r,"children",[{type:"interval"}]);var i=r.scale,s=r.markBackground,l=r.data,c=r.children,h=r.yField,p=di(i,"y.domain",[]);if(s&&p.length&&Rt(l)){var v="domainMax",y=l.map(function(b){var w;return ux(ux({originData:ux({},b)},y5(b,h)),(w={},w[v]=p[p.length-1],w))});c.unshift(ux({type:"interval",data:y,yField:v,tooltip:!1,style:{fill:"#eee"},label:!1},s))}return n};return Ul(t,Nc,Yl)(e)}var Dce=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,c=t.fillOpacity,h=c===void 0?1:c,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,w=r[0],R=r[1],M=r[2],I=r[3],N=(R[1]-w[1])/2,z=n.document,H=z.createElement("g",{}),X=z.createElement("polygon",{style:{points:[w,[w[0]-b,w[1]+N],[M[0]-b,w[1]+N],I],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),$=z.createElement("polygon",{style:{points:[[w[0]-b,w[1]+N],R,M,[M[0]-b,w[1]+N]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),te=z.createElement("polygon",{style:{points:[w,[w[0]-b,w[1]+N],R,[w[0]+b,w[1]+N]],fill:s,fillOpacity:h-.2}});return H.appendChild(X),H.appendChild($),H.appendChild(te),H}};Ks("shape.interval.bar25D",e)},Nce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Dce();var Bce=function(e){Nce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Bar",n}return t.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return hj},t}(Ml),Fce=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,c=t.fillOpacity,h=c===void 0?1:c,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,w=r[1][0]-r[0][0],R=w/2+r[0][0],M=n.document,I=M.createElement("g",{}),N=M.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[R,r[1][1]+b],[R,r[3][1]+b],[r[3][0],r[3][1]]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),z=M.createElement("polygon",{style:{points:[[R,r[1][1]+b],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[R,r[2][1]+b]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),H=M.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[R,r[1][1]-b],[r[1][0],r[1][1]],[R,r[1][1]+b]],fill:s,fillOpacity:h-.2}});return I.appendChild(z),I.appendChild(N),I.appendChild(H),I}};Ks("shape.interval.column25D",e)},kce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Fce();var zce=function(e){kce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return hj},t}(Ml);function Uce(e){var t=function(r){var i=r.options,s=i.children,l=s===void 0?[]:s,c=i.legend;return c&&l.forEach(function(h){if(!di(h,"colorField")){var p=di(h,"yField");Ra(h,"colorField",function(){return p})}}),r},n=function(r){var i=r.options,s=i.annotations,l=s===void 0?[]:s,c=i.children,h=c===void 0?[]:c,p=i.scale,v=!1;return di(p,"y.key")||h.forEach(function(y,b){if(!di(y,"scale.y.key")){var w="child".concat(b,"Scale");Ra(y,"scale.y.key",w);var R=y.annotations,M=R===void 0?[]:R;M.length>0&&(Ra(y,"scale.y.independent",!1),M.forEach(function(I){Ra(I,"scale.y.key",w)})),!v&&l.length>0&&di(y,"scale.y.independent")===void 0&&(v=!0,Ra(y,"scale.y.independent",!1),l.forEach(function(I){Ra(I,"scale.y.key",w)}))}}),r};return Ul(t,n,Nc,Yl)(e)}var jce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dj=function(e){jce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="DualAxes",n}return t.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Uce},t}(Ml);function Vce(e){var t=function(s){var l=s.options,c=l.xField,h=l.colorField;return h||Ra(l,"colorField",c),s},n=function(s){var l=s.options,c=l.compareField,h=l.transform,p=l.isTransposed,v=p===void 0?!0:p,y=l.coordinate;return h||(c?Ra(l,"transform",[]):Ra(l,"transform",[{type:"symmetryY"}])),!y&&v&&Ra(l,"coordinate",{transform:[{type:"transpose"}]}),s},r=function(s){var l=s.options,c=l.compareField,h=l.seriesField,p=l.data,v=l.children,y=l.yField,b=l.isTransposed,w=b===void 0?!0:b;if(c||h){var R=Object.values(JU(p,function(M){return M[c||h]}));v[0].data=R[0],v.push({type:"interval",data:R[1],yField:function(M){return-M[y]}}),delete l.compareField,delete l.data}return h&&(Ra(l,"type","spaceFlex"),Ra(l,"ratio",[1,1]),Ra(l,"direction",w?"row":"col"),delete l.seriesField),s},i=function(s){var l=s.options,c=l.tooltip,h=l.xField,p=l.yField;return c||Ra(l,"tooltip",{title:!1,items:[function(v){return{name:v[h],value:v[p]}}]}),s};return Ul(t,n,r,i,Nc,Yl)(e)}var Hce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wce=function(e){Hce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Vce},t}(Ml);function Gce(e){return Ul(Nc,Yl)(e)}var Zce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xce=function(e){Zce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="line",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Gce},t}(Ml);function $E(e){switch(typeof e){case"function":return e;case"string":return function(t){return di(t,[e])};default:return function(){return e}}}var Zy=function(){return Zy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Zy.apply(this,arguments)};function $ce(e){var t=function(n){var r=n.options,i=r.angleField,s=r.data,l=r.label,c=r.tooltip,h=r.colorField,p=$E(h);if(Rt(s)){var v=s.reduce(function(b,w){return b+w[i]},0);if(v===0){var y=s.map(function(b){var w;return Zy(Zy({},b),(w={},w[i]=1,w))});Ra(r,"data",y),l&&Ra(r,"label",Zy(Zy({},l),{formatter:function(){return 0}})),c!==!1&&Ra(r,"tooltip",Zy(Zy({},c),{items:[function(b,w,R){return{name:p(b,w,R),value:0}}]}))}}return n};return Ul(t,Yl)(e)}var Yce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kce=function(e){Yce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="pie",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return $ce},t}(Ml);function qce(e){return Ul(Nc,Yl)(e)}var Qce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jce=function(e){Qce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="scatter",n}return t.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return qce},t}(Ml);function efe(e){var t=function(n){return Ra(n,"options.coordinate",{type:di(n,"options.coordinateType","polar")}),n};return Ul(t,Yl)(e)}var tfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nfe=function(e){tfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radar",n}return t.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return efe},t}(Ml);function rfe(e,t){var n=-1,r=Ql(e)?Array(e.length):[];return QU(e,function(i,s,l){r[++n]=t(i,s,l)}),r}var ife=rfe;function ofe(e,t){var n=Rt(e)?li:ife;return n(e,h5(t,3))}var cx=ofe,Ig=function(){return Ig=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ig.apply(this,arguments)},afe="__stock-range__",sfe="trend",lfe="up",ufe="down";function cfe(e){var t=function(r){var i=r.options,s=i.data,l=i.yField;return r.options.data=cx(s,function(c){var h=c&&Ig({},c);if(Array.isArray(l)&&h){var p=l[0],v=l[1],y=l[2],b=l[3];h[sfe]=h[p]<=h[v]?lfe:ufe,h[afe]=[h[p],h[v],h[y],h[b]]}return h}),r},n=function(r){var i=r.options,s=i.xField,l=i.yField,c=i.fallingFill,h=i.risingFill,p=l[0],v=l[1],y=l[2],b=l[3],w=$E(s);return r.options.children=cx(r.options.children,function(R,M){var I=M===0;return Ig(Ig({},R),{tooltip:{title:function(N,z,H){var X=w(N,z,H);return X instanceof Date?X.toLocaleString():X},items:[{field:y},{field:b},{field:p},{field:v}]},encode:Ig(Ig({},R.encode||{}),{y:I?[y,b]:[p,v],color:function(N){return Math.sign(N[v]-N[p])}}),style:Ig(Ig({},R.style||{}),{lineWidth:I?1:10})})}),delete i.yField,r.options.legend={color:!1},c&&Ra(r,"options.scale.color.range[0]",c),h&&Ra(r,"options.scale.color.range[2]",h),r};return Ul(t,n,Yl)(e)}var ffe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hfe=["#26a69a","#999999","#ef5350"],dfe=function(e){ffe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="stock",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:hfe},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return cfe},t}(Ml);function pfe(e){return Ul(Nc,Yl)(e)}var vfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mfe=function(e){vfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyLine",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return pfe},t}(Ml);function gfe(e){return Ul(Nc,Yl)(e)}var yfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_fe=function(e){yfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyArea",n}return t.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return gfe},t}(Ml);function bfe(e){return Ul(Nc,Yl)(e)}var xfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Efe=function(e){xfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyColumn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return bfe},t}(Ml),b5=function(){return b5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b5.apply(this,arguments)};function Sfe(e){var t=function(n){var r=n.options,i=r.percent,s=r.color,l=s===void 0?[]:s;if(!i)return n;var c={scale:{color:{range:l.length?l:[]}},data:[1,i]};return Object.assign(r,b5({},c)),n};return Ul(t,Nc,Yl)(e)}var Tfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wfe=function(e){Tfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyProgress",n}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Sfe},t}(Ml),x5=function(){return x5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},x5.apply(this,arguments)};function Afe(e){var t=function(r){var i=r.options,s=i.radius,l=s===void 0?.8:s;return Ra(r,"options.coordinate.innerRadius",l),r},n=function(r){var i=r.options,s=i.percent,l=i.color,c=l===void 0?[]:l;if(!s)return r;var h={scale:{color:{range:c.length?c:[]}},data:[1,s]};return Object.assign(i,x5({},h)),r};return Ul(t,n,Nc,Yl)(e)}var Ofe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cfe=function(e){Ofe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyRing",n}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Afe},t}(Ml);function Rfe(e){return Ul(Yl)(e)}var Mfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pfe=function(e){Mfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="rose",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Rfe},t}(Ml),E5="__start__",fx="__end__",S5="__waterfall_value__",T5=function(){return T5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},T5.apply(this,arguments)},Ife=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function Lfe(e){var t=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,c=i.yField;return l.length&&(l.reduce(function(h,p,v){var y,b=$E(c),w=b(p,v,l);if(v===0||p.isTotal)p[E5]=0,p[fx]=w,p[S5]=w;else{var R=(y=h[fx])!==null&&y!==void 0?y:b(h,v,l);p[E5]=R,p[fx]=R+w,p[S5]=h[fx]}return p},[]),Object.assign(i,{yField:[E5,fx]})),r},n=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,c=i.xField,h=i.children,p=i.linkStyle,v=Ife([],l,!0);return v.reduce(function(y,b,w){return w>0&&(b.x1=y[c],b.x2=b[c],b.y1=y[fx]),b},[]),v.shift(),h.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:v,style:T5({stroke:"#697474"},p),label:!1,tooltip:!1}),r};return Ul(t,n,Nc,Yl)(e)}var Dfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nfe=function(e){Dfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="waterfall",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:S5,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Lfe},t}(Ml),Bfe="[object Number]";function Ffe(e){return typeof e=="number"||ja(e)&&pe(e)==Bfe}var hx=Ffe,kfe=Object.prototype,zfe=kfe.hasOwnProperty,Ufe=WU(function(e,t){if(pc(t)||Ql(t)){Fr(t,Ju(t),e);return}for(var n in t)zfe.call(t,n)&&Mr(e,n,t[n])}),pj=Ufe,jfe=/\s/;function Vfe(e){for(var t=e.length;t--&&jfe.test(e.charAt(t)););return t}var Hfe=Vfe,Wfe=/^\s+/;function Gfe(e){return e&&e.slice(0,Hfe(e)+1).replace(Wfe,"")}var Zfe=Gfe,vj=NaN,Xfe=/^[-+]0x[0-9a-f]+$/i,$fe=/^0b[01]+$/i,Yfe=/^0o[0-7]+$/i,Kfe=parseInt;function qfe(e){if(typeof e=="number")return e;if(gp(e))return vj;if(de(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=de(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Zfe(e);var n=$fe.test(e);return n||Yfe.test(e)?Kfe(e.slice(2),n?2:8):Xfe.test(e)?vj:+e}var mj=qfe,gj=1/0,Qfe=17976931348623157e292;function Jfe(e){if(!e)return e===0?e:0;if(e=mj(e),e===gj||e===-gj){var t=e<0?-1:1;return t*Qfe}return e===e?e:0}var ehe=Jfe;function the(e){var t=ehe(e),n=t%1;return t===t?n?t-n:t:0}var yj=the,nhe=Ie.isFinite,rhe=Math.min;function ihe(e){var t=Math[e];return function(n,r){if(n=mj(n),r=r==null?0:rhe(yj(r),292),r&&nhe(n)){var i=(fr(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(fr(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var ohe=ihe,ahe=ohe("ceil"),she=ahe,lhe=NaN;function uhe(e){return typeof e=="number"?e:gp(e)?lhe:+e}var _j=uhe;function che(e,t){return function(n,r){var i;if(n===void 0&&r===void 0)return t;if(n!==void 0&&(i=n),r!==void 0){if(i===void 0)return r;typeof n=="string"||typeof r=="string"?(n=pi(n),r=pi(r)):(n=_j(n),r=_j(r)),i=e(n,r)}return i}}var fhe=che,hhe=fhe(function(e,t){return e/t},1),dhe=hhe;function phe(e){var t=function(n){var r=n.options,i=r.data,s=r.binNumber,l=r.binWidth,c=r.children,h=r.channel,p=h===void 0?"count":h,v=di(c,"[0].transform[0]",{});return hx(l)?(pj(v,{thresholds:she(dhe(i.length,l)),y:p}),n):(hx(s)&&pj(v,{thresholds:s,y:p}),n)};return Ul(t,Nc,Yl)(e)}var vhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mhe=function(e){vhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Histogram",n}return t.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return phe},t}(Ml);function ghe(e){var t=function(r){var i=r.options,s=i.tooltip,l=s===void 0?{}:s,c=i.colorField,h=i.sizeField;return l&&!l.field&&(l.field=c||h),r},n=function(r){var i=r.options,s=i.mark,l=i.children;return s&&(l[0].type=s),r};return Ul(t,n,Nc,Yl)(e)}var yhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_he=function(e){yhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="heatmap",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ghe},t}(Ml);function bhe(e){var t=function(n){var r=n.options.boxType,i=r===void 0?"box":r;return n.options.children[0].type=i,n};return Ul(t,Nc,Yl)(e)}var xhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ehe=function(e){xhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="box",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return bhe},t}(Ml);function She(e){var t=function(n){var r=n.options,i=r.data,s=[{type:"custom",callback:function(c){return{links:c}}}];if(Rt(i))i.length>0?Ra(r,"data",{value:i,transform:s}):delete r.children;else if(di(i,"type")==="fetch"&&di(i,"value")){var l=di(i,"transform");Rt(l)?Ra(i,"transform",l.concat(s)):Ra(i,"transform",s)}return n};return Ul(t,Nc,Yl)(e)}var The=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),whe=function(e){The(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="sankey",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return She},t}(Ml);function Ahe(e){var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],e}function Ohe(e){Ahe(e);var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.children.forEach(function(r){var i;!((i=r==null?void 0:r.coordinate)===null||i===void 0)&&i.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),e}function Che(e){return e==null}var Rhe=Che,Mhe="[object String]";function Phe(e){return typeof e=="string"||!Rt(e)&&ja(e)&&pe(e)==Mhe}var bj=Phe;function Ihe(e,t){return li(t,function(n){return e[n]})}var Lhe=Ihe;function Dhe(e){return e==null?[]:Lhe(e,Ju(e))}var Nhe=Dhe,Bhe=Math.max;function Fhe(e,t,n,r){e=Ql(e)?e:Nhe(e),n=n&&!r?yj(n):0;var i=e.length;return n<0&&(n=Bhe(i+n,0)),bj(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&KU(e,t,n)>-1}var khe=Fhe,jv=function(){return jv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jv.apply(this,arguments)},gO=["#f0efff","#5B8FF9","#3D76DD"];function w5(e,t,n,r){r===void 0&&(r=!0);var i=0,s=!1,l=cx(e,function(c){var h,p,v=di(c,[t]);if(Rhe(v))return[];if(bj(v)){var y=Number(v);return isNaN(y)?[]:(h={},h[n]=c[n],h[t]=y,h)}return Rt(v)?(s=!0,i=Math.max(i,v.length),cx(r?v.sort(function(b,w){return w-b}):v,function(b,w){var R;return R={},R[n]=c[n],R[t]=b,R.index=w,R})):(i=Math.max(1,i),p={},p[n]=c[n],p[t]=v,p)}).flat();return s?[l.map(function(c){return jv({index:0},c)}),i]:[l,i]}function A5(e,t){return new Array(e).fill("").map(function(n,r){return Rt(t)?t[r%t.length]:t})}function zhe(e){var t=function(i){var s=i.options,l=s.color,c=s.rangeField,h=c===void 0?"ranges":c,p=s.measureField,v=p===void 0?"measures":p,y=s.targetField,b=y===void 0?"targets":y,w=s.xField,R=w===void 0?"title":w,M=s.mapField,I=s.data,N=w5(I,h,R),z=N[0],H=N[1],X=w5(I,v,R,!1),$=X[0],te=X[1],fe=w5(I,b,R,!1),ye=fe[0],Le=fe[1],Ge=di(l,[h],gO[0]),Qe=di(l,[v],gO[1]),gt=di(l,[b],gO[2]),qe=[A5(H,Ge),A5(te,Qe),A5(Le,gt)].flat();return i.options.children=cx(i.options.children,function(lt,ft){var pt=[z,$,ye][ft],Zt=[h,v,b][ft];return jv(jv({},lt),{data:pt,encode:jv(jv({},lt.encode||{}),{x:R,y:Zt,color:function(Ct){var Lt=Ct.index,Tn=hx(Lt)?"".concat(Zt,"_").concat(Lt):Zt;return M?di(M,[Zt,Lt],Tn):Tn}}),style:jv(jv({},lt.style||{}),{zIndex:function(Ct){return-Ct[Zt]}}),labels:ft!==0?cx(lt.labels,function(Ct){return jv(jv({},Ct),{text:Zt})}):void 0})}),i.options.scale.color.range=qe,i.options.legend.color.itemMarker=function(lt){return M&&khe(M==null?void 0:M[b],lt)||(lt==null?void 0:lt.replace(/\_\d$/,""))===b?"line":"square"},i},n=function(i){var s=i.options.layout,l=s===void 0?"horizontal":s;return l!=="horizontal"&&Ra(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var s=i.options,l=s.range,c=l===void 0?{}:l,h=s.measure,p=h===void 0?{}:h,v=s.target,y=v===void 0?{}:v,b=s.children;return i.options.children=[c,p,y].map(function(w,R){return Gy(b[R],w)}),i};return Ul(t,n,r,Ohe,Yl)(e)}var Uhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jhe=function(e){Uhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="bullet",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{range:gO}},legend:{color:{itemMarker:function(n){return n==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return zhe},t}(Ml);function Vhe(e){var t=function(n){var r=n.options.data;return n.options.data={value:r},n};return Ul(t,Nc,Yl)(e)}var Hhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Whe=function(e){Hhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Gauge",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Vhe},t}(Ml);function Ghe(e){var t=function(n){var r=n.options.percent;return hx(r)&&Ra(n,"options.data",r),n};return Ul(t,Nc,Yl)(e)}var Zhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xhe=function(e){Zhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Liquid",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ghe},t}(Ml);function $he(e){return Ul(Nc,Yl)(e)}var Yhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Khe=function(e){Yhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="WordCloud",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return $he},t}(Ml);function qhe(e){var t=function(n){var r=n.options,i=r.data;return i&&Ra(r,"data",{value:i}),n};return Ul(t,Nc,Yl)(e)}var Qhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jhe=function(e){Qhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="treemap",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return qhe},t}(Ml),b1=function(){return b1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b1.apply(this,arguments)};function ede(e){var t=function(i){var s=i.options,l=s.startAngle,c=s.maxAngle,h=s.coordinate,p=hx(l)?l/(2*Math.PI)*360:-90,v=hx(c)?(Number(c)+p)/180*Math.PI:Math.PI;return Ra(i,["options","coordinate"],b1(b1({},h),{endAngle:v,startAngle:l!=null?l:-Math.PI/2})),i},n=function(i){var s=i.options,l=s.tooltip,c=s.xField,h=s.yField,p=$E(c),v=$E(h);return l||Ra(s,"tooltip",{title:!1,items:[function(y,b,w){return{name:p(y,b,w),value:v(y,b,w)}}]}),i},r=function(i){var s=i.options,l=s.markBackground,c=s.children,h=s.scale,p=s.coordinate,v=s.xField,y=di(h,"y.domain",[]);return l&&c.unshift(b1({type:"interval",xField:v,yField:y[y.length-1],colorField:l.color,scale:{color:{type:"identity"}},style:{fillOpacity:l.opacity,fill:l.color?void 0:"#e0e4ee"},coordinate:b1(b1({},p),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},l)),i};return Ul(t,n,r,Nc,Yl)(e)}var tde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nde=function(e){tde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radial",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ede},t}(Ml);function rde(e){return Ul(Yl)(e)}var ide=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ode=function(e){ide(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="CirclePacking",n}return t.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return rde},t}(Ml),yO=function(){return yO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},yO.apply(this,arguments)};function ade(e){var t=function(n){var r=n.options,i=r.xField,s=r.yField,l=r.seriesField,c=r.children,h=c==null?void 0:c.map(function(p){return yO(yO({},p),{xField:i,yField:s,seriesField:l,colorField:l,data:p.type==="density"?{transform:[{type:"kde",field:s,groupBy:[i,l]}]}:p.data})}).filter(function(p){return r.violinType!=="density"||p.type==="density"});return Ra(r,"children",h),r.violinType==="polar"&&Ra(r,"coordinate",{type:"polar"}),Ra(r,"violinType",void 0),n};return Ul(t,Nc,Yl)(e)}var sde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lde=function(e){sde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="violin",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ade},t}(Ml),YE=function(){return YE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},YE.apply(this,arguments)},ude=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function cde(e){var t=function(s){var l=s.options,c=l.yField,h=l.children;return h.forEach(function(p,v){Ra(p,"yField",c[v])}),s},n=function(s){var l=s.options,c=l.yField,h=l.children,p=l.data;if(u5(p))return s;var v=Rt(di(p,[0]))?p:[p,p];return h.forEach(function(y,b){Ra(y,"data",ude([],v[b].map(function(w){return YE({groupKey:c[b]},w)}),!0))}),s},r=function(s){var l=s.options,c=l.yField,h=c[0],p=c[1],v=l.tooltip;return v||Ra(l,"tooltip",{items:[{field:h,value:h},{field:p,value:p}]}),s},i=function(s){var l=s.options,c=l.children,h=l.layout,p=l.coordinate.transform,v=l.paddingBottom,y=v===void 0?tj:v,b=l.paddingLeft,w=b===void 0?tj:b,R=l.axis;Ra(l,"axisText",YE(YE({},(R==null?void 0:R.x)||{}),{layout:h}));var M=c[0],I=c[1];if(h==="vertical")Ra(l,"direction","col"),Ra(l,"paddingLeft",w),Ra(l,"coordinate.transform",p.filter(function($){return $.type!=="transpose"})),Ra(M,"paddingBottom",ej),Ra(I,"paddingTop",ej),Ra(I,"axis",{x:{position:"top"}}),Ra(I,"scale",{y:{range:[0,1]}});else{Ra(l,"paddingBottom",y),Ra(M,"scale",{y:{range:[0,1]}});var N=M.paddingRight,z=N===void 0?p5:N,H=I.paddingLeft,X=H===void 0?p5:H;Ra(M,"paddingRight",z),Ra(M,"axis",{x:{position:"right"}}),Ra(I,"paddingLeft",X)}return s};return Ul(t,n,r,i,Nc,Yl)(e)}var fde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hde=function(e){fde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return t.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return cde},t}(Ml),x1;(function(e){e.color="key",e.d="path"})(x1||(x1={}));function dde(e){var t=function(n){var r=n.options,i=r.data,s=r.setsField,l=r.sizeField;return Rt(i)&&(Ra(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:s,size:l,as:[x1.color,x1.d]}]}),Ra(r,"colorField",s),Ra(r,["children","0","encode","d"],x1.d)),Ra(n,"options",y5(r,["sizeField","setsField"])),n};return Ul(t,Yl)(e)}var pde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vde=function(e){pde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="venn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:x1.color,d:x1.d}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return dde},t}(Ml);function mde(e){var t=function(n){return n};return Ul(t,Yl)(e)}var gde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yde=function(e){gde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Sunburst",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mde},t}(Ml),_de={Base:Vue,Line:Xce,Column:zce,Pie:Kce,Area:Lce,Bar:Bce,DualAxes:dj,Funnel:Wce,Scatter:Jce,Radar:nfe,Rose:Pfe,Stock:dfe,TinyLine:mfe,TinyArea:_fe,TinyColumn:Efe,TinyProgress:wfe,TinyRing:Cfe,Waterfall:Nfe,Histogram:mhe,Heatmap:_he,Box:Ehe,Sankey:whe,Bullet:jhe,Gauge:Whe,Liquid:Xhe,WordCloud:Khe,Treemap:Jhe,RadialBar:nde,CirclePacking:ode,Violin:lde,BidirectionalBar:hde,Venn:vde,Mix:dj,Sunburst:yde},O5=function(){return O5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},O5.apply(this,arguments)},xj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},bde=(0,ne.forwardRef)(function(e,t){var n=e.chartType,r=n===void 0?"Base":n,i=xj(e,["chartType"]),s=i.containerStyle,l=s===void 0?{height:"inherit"}:s,c=i.containerAttributes,h=c===void 0?{}:c,p=i.className,v=i.loading,y=i.loadingTemplate,b=i.errorTemplate,w=xj(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),R=Qi(_de[r],w),M=R.chart,I=R.container;return(0,ne.useImperativeHandle)(t,function(){return M.current}),ne.createElement(it,{errorTemplate:b},v&&ne.createElement(St,{loadingTemplate:y}),ne.createElement("div",O5({className:p,style:l,ref:I},h)))})},78677:function(mt,W,D){"use strict";var q=D(67294),G=D(85591),E=function(){return E=Object.assign||function(ne){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var oe in ue)Object.prototype.hasOwnProperty.call(ue,oe)&&(ne[oe]=ue[oe])}return ne},E.apply(this,arguments)},he=(0,q.forwardRef)(function(ne,ue){return q.createElement(G.P,E({},ne,{chartType:"Column",ref:ue}))});W.Z=he},80652:function(mt,W,D){"use strict";var q=D(67294),G=D(85591),E=function(){return E=Object.assign||function(ne){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var oe in ue)Object.prototype.hasOwnProperty.call(ue,oe)&&(ne[oe]=ue[oe])}return ne},E.apply(this,arguments)},he=(0,q.forwardRef)(function(ne,ue){return q.createElement(G.P,E({},ne,{chartType:"Line",ref:ue}))});W.Z=he},63430:function(mt,W,D){"use strict";var q=D(67294),G=D(85591),E=function(){return E=Object.assign||function(ne){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var oe in ue)Object.prototype.hasOwnProperty.call(ue,oe)&&(ne[oe]=ue[oe])}return ne},E.apply(this,arguments)},he=(0,q.forwardRef)(function(ne,ue){return q.createElement(G.P,E({},ne,{chartType:"Pie",ref:ue}))});W.Z=he},6466:function(mt,W,D){"use strict";D.d(W,{Z:function(){return bt}});var q=D(4942),G=D(1413),E=D(45987),he=D(28459),ne=D(93967),ue=D.n(ne),ce=D(67294),xe=D(53911),oe=D(44962),Ve=D(98082),re=function(we){return(0,q.Z)({},we.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:we.marginLG,marginInline:0,color:we.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function me(Me){return(0,Ve.Xj)("ProCardOperation",function(we){var je=(0,G.Z)((0,G.Z)({},we),{},{componentCls:".".concat(Me)});return[re(je)]})}var Re=D(85893),Y=function(we){var je=we.className,Ze=we.style,ut=Ze===void 0?{}:Ze,Qt=we.children,De=(0,ce.useContext)(he.ZP.ConfigContext),St=De.getPrefixCls,Oe=St("pro-card-operation"),it=me(Oe),Ke=it.wrapSSR,Xe=it.hashId,Pt=ue()(Oe,je,Xe);return Ke((0,Re.jsx)("div",{className:Pt,style:ut,children:Qt}))},le=Y,K=D(96604),_e=function(we){return(0,q.Z)({},we.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,q.Z)({flexDirection:"row"},"".concat(we.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(we.colorBorder)}})};function et(Me){return(0,Ve.Xj)("StatisticCard",function(we){var je=(0,G.Z)((0,G.Z)({},we),{},{componentCls:".".concat(Me)});return[_e(je)]})}var Je=["children","statistic","className","chart","chartPlacement","footer"],Ot=function(we){var je=we.children,Ze=we.statistic,ut=we.className,Qt=we.chart,De=we.chartPlacement,St=we.footer,Oe=(0,E.Z)(we,Je),it=(0,ce.useContext)(he.ZP.ConfigContext),Ke=it.getPrefixCls,Xe=Ke("pro-statistic-card"),Pt=et(Xe),xt=Pt.wrapSSR,Ie=Pt.hashId,Wt=ue()(Xe,ut,Ie),hn=Ze&&(0,Re.jsx)(K.Z,(0,G.Z)({layout:"vertical"},Ze)),Pn=ue()("".concat(Xe,"-chart"),Ie,(0,q.Z)((0,q.Z)({},"".concat(Xe,"-chart-left"),De==="left"&&Qt&&Ze),"".concat(Xe,"-chart-right"),De==="right"&&Qt&&Ze)),$n=Qt&&(0,Re.jsx)("div",{className:Pn,children:Qt}),nr=ue()("".concat(Xe,"-content "),Ie,(0,q.Z)({},"".concat(Xe,"-content-horizontal"),De==="left"||De==="right")),Ft=($n||hn)&&(De==="left"?(0,Re.jsxs)("div",{className:nr,children:[$n,hn]}):(0,Re.jsxs)("div",{className:nr,children:[hn,$n]})),Jt=St&&(0,Re.jsx)("div",{className:"".concat(Xe,"-footer ").concat(Ie).trim(),children:St});return xt((0,Re.jsxs)(xe.Z,(0,G.Z)((0,G.Z)({className:Wt},Oe),{},{children:[Ft,je,Jt]})))},dt=function(we){return(0,Re.jsx)(Ot,(0,G.Z)({bodyStyle:{padding:0}},we))};Ot.Statistic=K.Z,Ot.Divider=oe.Z,Ot.Operation=le,Ot.isProCard=!0,Ot.Group=dt;var bt=Ot},96604:function(mt,W,D){"use strict";D.d(W,{Z:function(){return on}});var q=D(1413),G=D(4942),E=D(45987),he=D(87462),ne=D(67294),ue=D(36688),ce=D(5627),xe=function(kt,ke){return ne.createElement(ce.Z,(0,he.Z)({},kt,{ref:ke,icon:ue.Z}))},oe=ne.forwardRef(xe),Ve=oe,re=D(28459),me=D(83062),Re=D(40411),Y=D(57838),le=D(96159),K=D(93967),_e=D.n(K),et=D(64217),Je=D(53124),Ot=D(87564),bt=zt=>{const{value:kt,formatter:ke,precision:nt,decimalSeparator:Vt,groupSeparator:U="",prefixCls:pe}=zt;let ct;if(typeof ke=="function")ct=ke(kt);else{const de=String(kt),Yt=de.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Yt||de==="-")ct=de;else{const sn=Yt[1];let pn=Yt[2]||"0",Dn=Yt[4]||"";pn=pn.replace(/\B(?=(\d{3})+(?!\d))/g,U),typeof nt=="number"&&(Dn=Dn.padEnd(nt,"0").slice(0,nt>0?nt:0)),Dn&&(Dn=`${Vt}${Dn}`),ct=[ne.createElement("span",{key:"int",className:`${pe}-content-value-int`},sn,pn),Dn&&ne.createElement("span",{key:"decimal",className:`${pe}-content-value-decimal`},Dn)]}}return ne.createElement("span",{className:`${pe}-content-value`},ct)},Me=D(14747),we=D(56023),je=D(45503);const Ze=zt=>{const{componentCls:kt,marginXXS:ke,padding:nt,colorTextDescription:Vt,titleFontSize:U,colorTextHeading:pe,contentFontSize:ct,fontFamily:de}=zt;return{[`${kt}`]:Object.assign(Object.assign({},(0,Me.Wf)(zt)),{[`${kt}-title`]:{marginBottom:ke,color:Vt,fontSize:U},[`${kt}-skeleton`]:{paddingTop:nt},[`${kt}-content`]:{color:pe,fontSize:ct,fontFamily:de,[`${kt}-content-value`]:{display:"inline-block",direction:"ltr"},[`${kt}-content-prefix, ${kt}-content-suffix`]:{display:"inline-block"},[`${kt}-content-prefix`]:{marginInlineEnd:ke},[`${kt}-content-suffix`]:{marginInlineStart:ke}}})}},ut=zt=>{const{fontSizeHeading3:kt,fontSize:ke}=zt;return{titleFontSize:ke,contentFontSize:kt}};var Qt=(0,we.I$)("Statistic",zt=>{const kt=(0,je.TS)(zt,{});return[Ze(kt)]},ut),De=function(zt,kt){var ke={};for(var nt in zt)Object.prototype.hasOwnProperty.call(zt,nt)&&kt.indexOf(nt)<0&&(ke[nt]=zt[nt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Vt=0,nt=Object.getOwnPropertySymbols(zt);Vt<nt.length;Vt++)kt.indexOf(nt[Vt])<0&&Object.prototype.propertyIsEnumerable.call(zt,nt[Vt])&&(ke[nt[Vt]]=zt[nt[Vt]]);return ke},Oe=zt=>{const{prefixCls:kt,className:ke,rootClassName:nt,style:Vt,valueStyle:U,value:pe=0,title:ct,valueRender:de,prefix:Yt,suffix:sn,loading:pn=!1,formatter:Dn,precision:Wn,decimalSeparator:Xn=".",groupSeparator:dn=",",onMouseEnter:_t,onMouseLeave:Rt}=zt,wn=De(zt,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:In,direction:Zn,statistic:vt}=ne.useContext(Je.E_),Ee=In("statistic",kt),[Fe,st,It]=Qt(Ee),Mt=ne.createElement(bt,{decimalSeparator:Xn,groupSeparator:dn,prefixCls:Ee,formatter:Dn,precision:Wn,value:pe}),En=_e()(Ee,{[`${Ee}-rtl`]:Zn==="rtl"},vt==null?void 0:vt.className,ke,nt,st,It),Yn=(0,et.Z)(wn,{aria:!0,data:!0});return Fe(ne.createElement("div",Object.assign({},Yn,{className:En,style:Object.assign(Object.assign({},vt==null?void 0:vt.style),Vt),onMouseEnter:_t,onMouseLeave:Rt}),ct&&ne.createElement("div",{className:`${Ee}-title`},ct),ne.createElement(Ot.Z,{paragraph:!1,loading:pn,className:`${Ee}-skeleton`},ne.createElement("div",{style:U,className:`${Ee}-content`},Yt&&ne.createElement("span",{className:`${Ee}-content-prefix`},Yt),de?de(Mt):Mt,sn&&ne.createElement("span",{className:`${Ee}-content-suffix`},sn)))))};const it=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Ke(zt,kt){let ke=zt;const nt=/\[[^\]]*]/g,Vt=(kt.match(nt)||[]).map(de=>de.slice(1,-1)),U=kt.replace(nt,"[]"),pe=it.reduce((de,Yt)=>{let[sn,pn]=Yt;if(de.includes(sn)){const Dn=Math.floor(ke/pn);return ke-=Dn*pn,de.replace(new RegExp(`${sn}+`,"g"),Wn=>{const Xn=Wn.length;return Dn.toString().padStart(Xn,"0")})}return de},U);let ct=0;return pe.replace(nt,()=>{const de=Vt[ct];return ct+=1,de})}function Xe(zt,kt){const{format:ke=""}=kt,nt=new Date(zt).getTime(),Vt=Date.now(),U=Math.max(nt-Vt,0);return Ke(U,ke)}var Pt=function(zt,kt){var ke={};for(var nt in zt)Object.prototype.hasOwnProperty.call(zt,nt)&&kt.indexOf(nt)<0&&(ke[nt]=zt[nt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Vt=0,nt=Object.getOwnPropertySymbols(zt);Vt<nt.length;Vt++)kt.indexOf(nt[Vt])<0&&Object.prototype.propertyIsEnumerable.call(zt,nt[Vt])&&(ke[nt[Vt]]=zt[nt[Vt]]);return ke};const xt=1e3/30;function Ie(zt){return new Date(zt).getTime()}const Wt=zt=>{const{value:kt,format:ke="HH:mm:ss",onChange:nt,onFinish:Vt}=zt,U=Pt(zt,["value","format","onChange","onFinish"]),pe=(0,Y.Z)(),ct=ne.useRef(null),de=()=>{Vt==null||Vt(),ct.current&&(clearInterval(ct.current),ct.current=null)},Yt=()=>{const Dn=Ie(kt);Dn>=Date.now()&&(ct.current=setInterval(()=>{pe(),nt==null||nt(Dn-Date.now()),Dn<Date.now()&&de()},xt))};ne.useEffect(()=>(Yt(),()=>{ct.current&&(clearInterval(ct.current),ct.current=null)}),[kt]);const sn=(Dn,Wn)=>Xe(Dn,Object.assign(Object.assign({},Wn),{format:ke})),pn=Dn=>(0,le.Tm)(Dn,{title:void 0});return ne.createElement(Oe,Object.assign({},U,{value:kt,valueRender:pn,formatter:sn}))};var hn=ne.memo(Wt);Oe.Countdown=hn;var Pn=Oe,$n=D(98082),nr=function(kt){return(0,G.Z)({},kt.componentCls,(0,G.Z)((0,G.Z)((0,G.Z)((0,G.Z)((0,G.Z)({display:"flex",fontSize:kt.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,G.Z)({display:"flex",width:"100%"},"".concat(kt.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,G.Z)({width:"100%"},"".concat(kt.antCls,"-statistic-content"),{"&-value-int":{fontSize:kt.fontSizeHeading3}}),"&-description":{width:"100%"}},"".concat(kt.antCls,"-statistic-title"),{color:kt.colorText}),"&-trend-up",(0,G.Z)({},"".concat(kt.antCls,"-statistic-content"),(0,G.Z)({color:"#f5222d"},"".concat(kt.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),"&-trend-down",(0,G.Z)({},"".concat(kt.antCls,"-statistic-content"),(0,G.Z)({color:"#389e0d"},"".concat(kt.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),"& &-layout-horizontal",(0,G.Z)((0,G.Z)((0,G.Z)({display:"flex",justifyContent:"space-between"},"".concat(kt.antCls,"-statistic-title"),{marginBlockEnd:0}),"".concat(kt.antCls,"-statistic-content-value"),{fontWeight:500}),"".concat(kt.antCls,"-statistic-title,").concat(kt.antCls,"-statistic-content,").concat(kt.antCls,"-statistic-content-suffix,").concat(kt.antCls,"-statistic-content-prefix,").concat(kt.antCls,"-statistic-content-value-decimal"),{fontSize:kt.fontSize})),"& &-layout-inline",(0,G.Z)((0,G.Z)((0,G.Z)({display:"inline-flex",color:kt.colorTextSecondary},"".concat(kt.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),"".concat(kt.antCls,"-statistic-content"),{color:kt.colorTextSecondary}),"".concat(kt.antCls,"-statistic-title,").concat(kt.antCls,"-statistic-content,").concat(kt.antCls,"-statistic-content-suffix,").concat(kt.antCls,"-statistic-content-prefix,").concat(kt.antCls,"-statistic-content-value-decimal"),{fontSize:kt.fontSizeSM})))};function Ft(zt){return(0,$n.Xj)("Statistic",function(kt){var ke=(0,q.Z)((0,q.Z)({},kt),{},{componentCls:".".concat(zt)});return[nr(ke)]})}var Jt=D(85893),ln=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],Un=function(kt){var ke=kt.className,nt=kt.layout,Vt=nt===void 0?"inline":nt,U=kt.style,pe=kt.description,ct=kt.children,de=kt.title,Yt=kt.tip,sn=kt.status,pn=kt.trend,Dn=kt.prefix,Wn=kt.icon,Xn=(0,E.Z)(kt,ln),dn=(0,ne.useContext)(re.ZP.ConfigContext),_t=dn.getPrefixCls,Rt=_t("pro-card-statistic"),wn=Ft(Rt),In=wn.wrapSSR,Zn=wn.hashId,vt=_e()(Rt,ke,Zn),Ee=_e()("".concat(Rt,"-status"),Zn),Fe=_e()("".concat(Rt,"-icon"),Zn),st=_e()("".concat(Rt,"-wrapper"),Zn),It=_e()("".concat(Rt,"-content"),Zn),Mt=_e()(Zn,(0,G.Z)((0,G.Z)({},"".concat(Rt,"-layout-").concat(Vt),Vt),"".concat(Rt,"-trend-").concat(pn),pn)),En=Yt&&(0,Jt.jsx)(me.Z,{title:Yt,children:(0,Jt.jsx)(Ve,{className:"".concat(Rt,"-tip ").concat(Zn).trim()})}),Yn=_e()("".concat(Rt,"-trend-icon"),Zn,(0,G.Z)({},"".concat(Rt,"-trend-icon-").concat(pn),pn)),yr=pn&&(0,Jt.jsx)("div",{className:Yn}),qn=sn&&(0,Jt.jsx)("div",{className:Ee,children:(0,Jt.jsx)(Re.Z,{status:sn,text:null})}),Pe=Wn&&(0,Jt.jsx)("div",{className:Fe,children:Wn});return In((0,Jt.jsxs)("div",{className:vt,style:U,children:[Pe,(0,Jt.jsxs)("div",{className:st,children:[qn,(0,Jt.jsxs)("div",{className:It,children:[(0,Jt.jsx)(Pn,(0,q.Z)({title:(de||En)&&(0,Jt.jsxs)(Jt.Fragment,{children:[de,En]}),prefix:(yr||Dn)&&(0,Jt.jsxs)(Jt.Fragment,{children:[yr,Dn]}),className:Mt},Xn)),pe&&(0,Jt.jsx)("div",{className:"".concat(Rt,"-description ").concat(Zn).trim(),children:pe})]})]})]}))},on=Un},46343:function(mt,W,D){"use strict";D.d(W,{S$:function(){return zt},bf:function(){return kt},ni:function(){return Wt},oI:function(){return Un},sX:function(){return on}});var q=D(34155);function G(ke,nt,Vt,U){function pe(ct){return ct instanceof Vt?ct:new Vt(function(de){de(ct)})}return new(Vt||(Vt=Promise))(function(ct,de){function Yt(Dn){try{pn(U.next(Dn))}catch(Wn){de(Wn)}}function sn(Dn){try{pn(U.throw(Dn))}catch(Wn){de(Wn)}}function pn(Dn){Dn.done?ct(Dn.value):pe(Dn.value).then(Yt,sn)}pn((U=U.apply(ke,nt||[])).next())})}function E(ke,nt){var Vt={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},U,pe,ct,de;return de={next:Yt(0),throw:Yt(1),return:Yt(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function Yt(pn){return function(Dn){return sn([pn,Dn])}}function sn(pn){if(U)throw new TypeError("Generator is already executing.");for(;Vt;)try{if(U=1,pe&&(ct=pn[0]&2?pe.return:pn[0]?pe.throw||((ct=pe.return)&&ct.call(pe),0):pe.next)&&!(ct=ct.call(pe,pn[1])).done)return ct;switch(pe=0,ct&&(pn=[pn[0]&2,ct.value]),pn[0]){case 0:case 1:ct=pn;break;case 4:return Vt.label++,{value:pn[1],done:!1};case 5:Vt.label++,pe=pn[1],pn=[0];continue;case 7:pn=Vt.ops.pop(),Vt.trys.pop();continue;default:if(ct=Vt.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(pn[0]===6||pn[0]===2)){Vt=0;continue}if(pn[0]===3&&(!ct||pn[1]>ct[0]&&pn[1]<ct[3])){Vt.label=pn[1];break}if(pn[0]===6&&Vt.label<ct[1]){Vt.label=ct[1],ct=pn;break}if(ct&&Vt.label<ct[2]){Vt.label=ct[2],Vt.ops.push(pn);break}ct[2]&&Vt.ops.pop(),Vt.trys.pop();continue}pn=nt.call(ke,Vt)}catch(Dn){pn=[6,Dn],pe=0}finally{U=ct=0}if(pn[0]&5)throw pn[1];return{value:pn[0]?pn[1]:void 0,done:!0}}}function he(ke,nt){var Vt=typeof Symbol=="function"&&ke[Symbol.iterator];if(!Vt)return ke;var U=Vt.call(ke),pe,ct=[],de;try{for(;(nt===void 0||nt-- >0)&&!(pe=U.next()).done;)ct.push(pe.value)}catch(Yt){de={error:Yt}}finally{try{pe&&!pe.done&&(Vt=U.return)&&Vt.call(U)}finally{if(de)throw de.error}}return ct}function ne(ke,nt,Vt){if(Vt||arguments.length===2)for(var U=0,pe=nt.length,ct;U<pe;U++)(ct||!(U in nt))&&(ct||(ct=Array.prototype.slice.call(nt,0,U)),ct[U]=nt[U]);return ke.concat(ct||Array.prototype.slice.call(nt))}function ue(ke){return ke&&ke.__esModule&&Object.prototype.hasOwnProperty.call(ke,"default")?ke.default:ke}var ce={exports:{}},xe={exports:{}},oe={exports:{}};(function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=Vt;function Vt(U){return U&&typeof U.length=="number"&&U.length>=0&&U.length%1===0}ke.exports=nt.default})(oe,oe.exports);var Ve={},re={exports:{}},me={exports:{}};(function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=function(Vt){return function(){for(var U=[],pe=arguments.length;pe--;)U[pe]=arguments[pe];var ct=U.pop();return Vt.call(this,U,ct)}},ke.exports=nt.default})(me,me.exports);var Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.fallback=_e,Re.wrap=et;var Y=Re.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,le=Re.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,K=Re.hasNextTick=typeof q=="object"&&typeof q.nextTick=="function";function _e(ke){setTimeout(ke,0)}function et(ke){return function(nt){for(var Vt=[],U=arguments.length-1;U-- >0;)Vt[U]=arguments[U+1];return ke(function(){return nt.apply(void 0,Vt)})}}var Je;Y?Je=queueMicrotask:le?Je=setImmediate:K?Je=q.nextTick:Je=_e,Re.default=et(Je),function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=sn;var Vt=me.exports,U=Yt(Vt),pe=Re,ct=Yt(pe),de=Ve;function Yt(Wn){return Wn&&Wn.__esModule?Wn:{default:Wn}}function sn(Wn){return(0,de.isAsync)(Wn)?function(){for(var Xn=[],dn=arguments.length;dn--;)Xn[dn]=arguments[dn];var _t=Xn.pop(),Rt=Wn.apply(this,Xn);return pn(Rt,_t)}:(0,U.default)(function(Xn,dn){var _t;try{_t=Wn.apply(this,Xn)}catch(Rt){return dn(Rt)}if(_t&&typeof _t.then=="function")return pn(_t,dn);dn(null,_t)})}function pn(Wn,Xn){return Wn.then(function(dn){Dn(Xn,null,dn)},function(dn){Dn(Xn,dn&&dn.message?dn:new Error(dn))})}function Dn(Wn,Xn,dn){try{Wn(Xn,dn)}catch(_t){(0,ct.default)(function(Rt){throw Rt},_t)}}ke.exports=nt.default}(re,re.exports),Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.isAsyncIterable=Ve.isAsyncGenerator=Ve.isAsync=void 0;var Ot=re.exports,dt=bt(Ot);function bt(ke){return ke&&ke.__esModule?ke:{default:ke}}function Me(ke){return ke[Symbol.toStringTag]==="AsyncFunction"}function we(ke){return ke[Symbol.toStringTag]==="AsyncGenerator"}function je(ke){return typeof ke[Symbol.asyncIterator]=="function"}function Ze(ke){if(typeof ke!="function")throw new Error("expected a function");return Me(ke)?(0,dt.default)(ke):ke}Ve.default=Ze,Ve.isAsync=Me,Ve.isAsyncGenerator=we,Ve.isAsyncIterable=je;var ut={exports:{}};(function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=Vt;function Vt(U,pe){if(pe===void 0&&(pe=U.length),!pe)throw new Error("arity is undefined");function ct(){for(var de=this,Yt=[],sn=arguments.length;sn--;)Yt[sn]=arguments[sn];return typeof Yt[pe-1]=="function"?U.apply(this,Yt):new Promise(function(pn,Dn){Yt[pe-1]=function(Wn){for(var Xn=[],dn=arguments.length-1;dn-- >0;)Xn[dn]=arguments[dn+1];if(Wn)return Dn(Wn);pn(Xn.length>1?Xn:Xn[0])},U.apply(de,Yt)})}return ct}ke.exports=nt.default})(ut,ut.exports),function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0});var Vt=oe.exports,U=sn(Vt),pe=Ve,ct=sn(pe),de=ut.exports,Yt=sn(de);function sn(pn){return pn&&pn.__esModule?pn:{default:pn}}nt.default=(0,Yt.default)(function(pn,Dn,Wn){var Xn=(0,U.default)(Dn)?[]:{};pn(Dn,function(dn,_t,Rt){(0,ct.default)(dn)(function(wn){for(var In,Zn=[],vt=arguments.length-1;vt-- >0;)Zn[vt]=arguments[vt+1];Zn.length<2&&(In=Zn,Zn=In[0]),Xn[_t]=Zn,Rt(wn)})},function(dn){return Wn(dn,Xn)})},3),ke.exports=nt.default}(xe,xe.exports);var Qt={exports:{}},De={exports:{}},St={exports:{}},Oe={exports:{}};(function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=Vt;function Vt(U){function pe(){for(var ct=[],de=arguments.length;de--;)ct[de]=arguments[de];if(U!==null){var Yt=U;U=null,Yt.apply(this,ct)}}return Object.assign(pe,U),pe}ke.exports=nt.default})(Oe,Oe.exports);var it={exports:{}},Ke={exports:{}};(function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=function(Vt){return Vt[Symbol.iterator]&&Vt[Symbol.iterator]()},ke.exports=nt.default})(Ke,Ke.exports),function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=Dn;var Vt=oe.exports,U=de(Vt),pe=Ke.exports,ct=de(pe);function de(Wn){return Wn&&Wn.__esModule?Wn:{default:Wn}}function Yt(Wn){var Xn=-1,dn=Wn.length;return function(){return++Xn<dn?{value:Wn[Xn],key:Xn}:null}}function sn(Wn){var Xn=-1;return function(){var _t=Wn.next();return _t.done?null:(Xn++,{value:_t.value,key:Xn})}}function pn(Wn){var Xn=Wn?Object.keys(Wn):[],dn=-1,_t=Xn.length;return function Rt(){var wn=Xn[++dn];return wn==="__proto__"?Rt():dn<_t?{value:Wn[wn],key:wn}:null}}function Dn(Wn){if((0,U.default)(Wn))return Yt(Wn);var Xn=(0,ct.default)(Wn);return Xn?sn(Xn):pn(Wn)}ke.exports=nt.default}(it,it.exports);var Xe={exports:{}};(function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=Vt;function Vt(U){return function(){for(var pe=[],ct=arguments.length;ct--;)pe[ct]=arguments[ct];if(U===null)throw new Error("Callback was already called.");var de=U;U=null,de.apply(this,pe)}}ke.exports=nt.default})(Xe,Xe.exports);var Pt={exports:{}},xt={exports:{}};(function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0});var Vt={};nt.default=Vt,ke.exports=nt.default})(xt,xt.exports),function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=ct;var Vt=xt.exports,U=pe(Vt);function pe(de){return de&&de.__esModule?de:{default:de}}function ct(de,Yt,sn,pn){var Dn=!1,Wn=!1,Xn=!1,dn=0,_t=0;function Rt(){dn>=Yt||Xn||Dn||(Xn=!0,de.next().then(function(Zn){var vt=Zn.value,Ee=Zn.done;if(!(Wn||Dn)){if(Xn=!1,Ee){Dn=!0,dn<=0&&pn(null);return}dn++,sn(vt,_t,wn),_t++,Rt()}}).catch(In))}function wn(Zn,vt){if(dn-=1,!Wn){if(Zn)return In(Zn);if(Zn===!1){Dn=!0,Wn=!0;return}if(vt===U.default||Dn&&dn<=0)return Dn=!0,pn(null);Rt()}}function In(Zn){Wn||(Xn=!1,Dn=!0,pn(Zn))}Rt()}ke.exports=nt.default}(Pt,Pt.exports),function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0});var Vt=Oe.exports,U=dn(Vt),pe=it.exports,ct=dn(pe),de=Xe.exports,Yt=dn(de),sn=Ve,pn=Pt.exports,Dn=dn(pn),Wn=xt.exports,Xn=dn(Wn);function dn(_t){return _t&&_t.__esModule?_t:{default:_t}}nt.default=function(_t){return function(Rt,wn,In){if(In=(0,U.default)(In),_t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!Rt)return In(null);if((0,sn.isAsyncGenerator)(Rt))return(0,Dn.default)(Rt,_t,wn,In);if((0,sn.isAsyncIterable)(Rt))return(0,Dn.default)(Rt[Symbol.asyncIterator](),_t,wn,In);var Zn=(0,ct.default)(Rt),vt=!1,Ee=!1,Fe=0,st=!1;function It(En,Yn){if(!Ee)if(Fe-=1,En)vt=!0,In(En);else if(En===!1)vt=!0,Ee=!0;else{if(Yn===Xn.default||vt&&Fe<=0)return vt=!0,In(null);st||Mt()}}function Mt(){for(st=!0;Fe<_t&&!vt;){var En=Zn();if(En===null){vt=!0,Fe<=0&&In(null);return}Fe+=1,wn(En.value,En.key,(0,Yt.default)(It))}st=!1}Mt()}},ke.exports=nt.default}(St,St.exports),function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0});var Vt=St.exports,U=sn(Vt),pe=Ve,ct=sn(pe),de=ut.exports,Yt=sn(de);function sn(Dn){return Dn&&Dn.__esModule?Dn:{default:Dn}}function pn(Dn,Wn,Xn,dn){return(0,U.default)(Wn)(Dn,(0,ct.default)(Xn),dn)}nt.default=(0,Yt.default)(pn,4),ke.exports=nt.default}(De,De.exports),function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0});var Vt=De.exports,U=de(Vt),pe=ut.exports,ct=de(pe);function de(sn){return sn&&sn.__esModule?sn:{default:sn}}function Yt(sn,pn,Dn){return(0,U.default)(sn,1,pn,Dn)}nt.default=(0,ct.default)(Yt,3),ke.exports=nt.default}(Qt,Qt.exports),function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=Yt;var Vt=xe.exports,U=de(Vt),pe=Qt.exports,ct=de(pe);function de(sn){return sn&&sn.__esModule?sn:{default:sn}}function Yt(sn,pn){return(0,U.default)(ct.default,sn,pn)}ke.exports=nt.default}(ce,ce.exports);var Ie=ue(ce.exports),Wt=function(){function ke(){this.args=[],this.tasks=[]}return ke.prototype.call=function(){for(var nt=arguments,Vt=[],U=0;U<arguments.length;U++)Vt[U]=nt[U];return this.args=Vt,Ie(this.tasks)},ke.prototype.tap=function(nt,Vt){var U=this;this.tasks.push(function(pe){Vt.apply(void 0,ne([],he(U.args),!1)),pe(null,nt)})},ke}(),hn={exports:{}},Pn={exports:{}};(function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0});var Vt=oe.exports,U=wn(Vt),pe=xt.exports,ct=wn(pe),de=De.exports,Yt=wn(de),sn=Oe.exports,pn=wn(sn),Dn=Xe.exports,Wn=wn(Dn),Xn=Ve,dn=wn(Xn),_t=ut.exports,Rt=wn(_t);function wn(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}function In(Ee,Fe,st){st=(0,pn.default)(st);var It=0,Mt=0,En=Ee.length,Yn=!1;En===0&&st(null);function yr(qn,Pe){qn===!1&&(Yn=!0),Yn!==!0&&(qn?st(qn):(++Mt===En||Pe===ct.default)&&st(null))}for(;It<En;It++)Fe(Ee[It],It,(0,Wn.default)(yr))}function Zn(Ee,Fe,st){return(0,Yt.default)(Ee,1/0,Fe,st)}function vt(Ee,Fe,st){var It=(0,U.default)(Ee)?In:Zn;return It(Ee,(0,dn.default)(Fe),st)}nt.default=(0,Rt.default)(vt,3),ke.exports=nt.default})(Pn,Pn.exports),function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=Yt;var Vt=Pn.exports,U=de(Vt),pe=xe.exports,ct=de(pe);function de(sn){return sn&&sn.__esModule?sn:{default:sn}}function Yt(sn,pn){return(0,ct.default)(U.default,sn,pn)}ke.exports=nt.default}(hn,hn.exports);var $n=ue(hn.exports),nr=function(){function ke(){this.tasks=[]}return ke.prototype.promise=function(){return $n(this.tasks)},ke.prototype.tapPromise=function(nt,Vt){var U=this;this.tasks.push(function(pe){return G(U,void 0,void 0,function(){return E(this,function(ct){switch(ct.label){case 0:return[4,Vt()];case 1:return ct.sent(),pe(null,nt),[2]}})})})},ke}(),Ft={exports:{}};(function(ke,nt){Object.defineProperty(nt,"__esModule",{value:!0});var Vt=Oe.exports,U=Dn(Vt),pe=Xe.exports,ct=Dn(pe),de=Ve,Yt=Dn(de),sn=ut.exports,pn=Dn(sn);function Dn(Xn){return Xn&&Xn.__esModule?Xn:{default:Xn}}function Wn(Xn,dn){if(dn=(0,U.default)(dn),!Array.isArray(Xn))return dn(new Error("First argument to waterfall must be an array of functions"));if(!Xn.length)return dn();var _t=0;function Rt(In){var Zn=(0,Yt.default)(Xn[_t++]);Zn.apply(void 0,In.concat([(0,ct.default)(wn)]))}function wn(In){for(var Zn=[],vt=arguments.length-1;vt-- >0;)Zn[vt]=arguments[vt+1];if(In!==!1){if(In||_t===Xn.length)return dn.apply(void 0,[In].concat(Zn));Rt(Zn)}}Rt([])}nt.default=(0,pn.default)(Wn),ke.exports=nt.default})(Ft,Ft.exports);var Jt=ue(Ft.exports),ln=function(){function ke(){this.tasks=[]}return ke.prototype.call=function(){return Jt(this.tasks)},ke.prototype.tap=function(nt,Vt){this.tasks.length===0?this.tasks.push(function(U){var pe=Vt();U(pe?null:!1,pe)}):this.tasks.push(function(U,pe){var ct=Vt.apply(void 0,ne([],he(U),!1));pe(ct?null:!1,nt)})},ke}(),Un=function(){function ke(){this.tasks=[]}return ke.prototype.call=function(){return Ie(this.tasks)},ke.prototype.tap=function(nt,Vt){this.tasks.push(function(U){var pe=Vt();U(pe,nt)})},ke}(),on=function(){function ke(){this.args=[],this.tasks=[]}return ke.prototype.promise=function(){for(var nt=arguments,Vt=[],U=0;U<arguments.length;U++)Vt[U]=nt[U];return this.args=Vt,Ie(this.tasks)},ke.prototype.tapPromise=function(nt,Vt){var U=this;this.tasks.push(function(pe){return G(U,void 0,void 0,function(){return E(this,function(ct){switch(ct.label){case 0:return[4,Vt.apply(void 0,ne([],he(this.args),!1))];case 1:return ct.sent(),pe(null,nt),[2]}})})})},ke}(),zt=function(){function ke(){this.args=[],this.tasks=[]}return ke.prototype.promise=function(){for(var nt=arguments,Vt=[],U=0;U<arguments.length;U++)Vt[U]=nt[U];return this.args=Vt,Ie(this.tasks)},ke.prototype.tapPromise=function(nt,Vt){var U=this;this.tasks.push(function(pe){return G(U,void 0,void 0,function(){var ct;return E(this,function(de){switch(de.label){case 0:return[4,Vt.apply(void 0,ne([],he(this.args),!1))];case 1:return ct=de.sent(),pe(ct,nt),[2]}})})})},ke}(),kt=function(){function ke(){this.tasks=[]}return ke.prototype.promise=function(){return Jt(this.tasks)},ke.prototype.tapPromise=function(nt,Vt){this.tasks.length===0?this.tasks.push(function(U){Vt().then(function(pe){U(null,pe)})}):this.tasks.push(function(U,pe){Vt(U).then(function(ct){pe(null,ct)})})},ke}()},17816:function(mt,W){(function(D,q){q(W)})(this,function(D){"use strict";function q(Be){var rt=typeof Symbol=="function"&&Symbol.iterator,jt=rt&&Be[rt],un=0;if(jt)return jt.call(Be);if(Be&&typeof Be.length=="number")return{next:function(){return{value:(Be=Be&&un>=Be.length?void 0:Be)&&Be[un++],done:!Be}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(Be,rt){var jt=typeof Symbol=="function"&&Be[Symbol.iterator];if(!jt)return Be;var un,Nn,Bn=jt.call(Be),yn=[];try{for(;(rt===void 0||0<rt--)&&!(un=Bn.next()).done;)yn.push(un.value)}catch(Cn){Nn={error:Cn}}finally{try{un&&!un.done&&(jt=Bn.return)&&jt.call(Bn)}finally{if(Nn)throw Nn.error}}return yn}function E(Be,rt,jt){if(jt||arguments.length===2)for(var un,Nn=0,Bn=rt.length;Nn<Bn;Nn++)!un&&Nn in rt||((un=un||Array.prototype.slice.call(rt,0,Nn))[Nn]=rt[Nn]);return Be.concat(un||Array.prototype.slice.call(rt))}function he(Be){return ue(Be,"Function")}var ne={}.toString,ue=function(Be,rt){return ne.call(Be)==="[object "+rt+"]"},ce=function(Be){return Array.isArray?Array.isArray(Be):ue(Be,"Array")},xe=function(Be){if(typeof(rt=Be)!="object"||rt===null||!ue(Be,"Object"))return!1;var rt;if(Object.getPrototypeOf(Be)===null)return!0;for(var jt=Be;Object.getPrototypeOf(jt)!==null;)jt=Object.getPrototypeOf(jt);return Object.getPrototypeOf(Be)===jt},oe=function(Be){return ue(Be,"Number")},Ve=Object.values?function(Be){return Object.values(Be)}:function(Be){var rt,jt=[],un=Be,Nn=function(dr,hr){he(Be)&&hr==="prototype"||jt.push(dr)};if(un){if(ce(un))for(var Bn=0,yn=un.length;Bn<yn&&Nn(un[Bn],Bn)!==!1;Bn++);else if(rt=typeof un,un!==null&&rt=="object"||rt=="function"){for(var Cn in un)if(un.hasOwnProperty(Cn)&&Nn(un[Cn],Cn)===!1)break}}return jt},re=5;function me(Be){for(var rt=[],jt=1;jt<arguments.length;jt++)rt[jt-1]=arguments[jt];for(var un=0;un<rt.length;un+=1)(function Nn(Bn,yn,Cn,dr){for(var hr in Cn=Cn||0,dr=dr||re,yn){var Jr;yn.hasOwnProperty(hr)&&((Jr=yn[hr])!==null&&xe(Jr)?(xe(Bn[hr])||(Bn[hr]={}),Cn<dr?Nn(Bn[hr],Jr,Cn+1,dr):Bn[hr]=yn[hr]):ce(Jr)?(Bn[hr]=[],Bn[hr]=Bn[hr].concat(Jr)):Jr!==void 0&&(Bn[hr]=Jr))}})(Be,rt[un]);return Be}function Re(Be){return Be}(function(Be,rt){var jt;if(he(Be))return(jt=function(){for(var un=[],Nn=0;Nn<arguments.length;Nn++)un[Nn]=arguments[Nn];var Bn,yn=rt?rt.apply(this,un):un[0],Cn=jt.cache;return Cn.has(yn)?Cn.get(yn):(Bn=Be.apply(this,un),Cn.set(yn,Bn),Bn)}).cache=new Map;throw new TypeError("Expected a function")})(function(Be,yn){var jt=(yn=yn===void 0?{}:yn).fontSize,un=yn.fontFamily,Nn=yn.fontWeight,Bn=yn.fontStyle,yn=yn.fontVariant;return(Y=Y||document.createElement("canvas").getContext("2d")).font=[Bn,yn,Nn,jt+"px",un].join(" "),Y.measureText(ue(Be,"String")?Be:"").width},function(Be,rt){return function(){for(var jt=0,un=0,Nn=arguments.length;un<Nn;un++)jt+=arguments[un].length;for(var Bn=Array(jt),yn=0,un=0;un<Nn;un++)for(var Cn=arguments[un],dr=0,hr=Cn.length;dr<hr;dr++,yn++)Bn[yn]=Cn[dr];return Bn}([Be],Ve(rt=rt===void 0?{}:rt)).join("")});var Y,le=typeof Float32Array!="undefined"?Float32Array:Array;function K(){var Be=new le(9);return le!=Float32Array&&(Be[1]=0,Be[2]=0,Be[3]=0,Be[5]=0,Be[6]=0,Be[7]=0),Be[0]=1,Be[4]=1,Be[8]=1,Be}Math.hypot||(Math.hypot=function(){for(var Be=0,rt=arguments.length;rt--;)Be+=arguments[rt]*arguments[rt];return Math.sqrt(Be)});var _e=function(Be,zi,Wi){var un=zi[0],Nn=zi[1],Bn=zi[2],yn=zi[3],Cn=zi[4],dr=zi[5],hr=zi[6],Jr=zi[7],zi=zi[8],Ji=Wi[0],ei=Wi[1],Hi=Wi[2],Ii=Wi[3],Wr=Wi[4],Eo=Wi[5],ci=Wi[6],xo=Wi[7],Wi=Wi[8];return Be[0]=Ji*un+ei*yn+Hi*hr,Be[1]=Ji*Nn+ei*Cn+Hi*Jr,Be[2]=Ji*Bn+ei*dr+Hi*zi,Be[3]=Ii*un+Wr*yn+Eo*hr,Be[4]=Ii*Nn+Wr*Cn+Eo*Jr,Be[5]=Ii*Bn+Wr*dr+Eo*zi,Be[6]=ci*un+xo*yn+Wi*hr,Be[7]=ci*Nn+xo*Cn+Wi*Jr,Be[8]=ci*Bn+xo*dr+Wi*zi,Be};function et(){var Be=new le(16);return le!=Float32Array&&(Be[1]=0,Be[2]=0,Be[3]=0,Be[4]=0,Be[6]=0,Be[7]=0,Be[8]=0,Be[9]=0,Be[11]=0,Be[12]=0,Be[13]=0,Be[14]=0),Be[0]=1,Be[5]=1,Be[10]=1,Be[15]=1,Be}var Je=function(Be,ci,jt){var un=ci[0],Nn=ci[1],Bn=ci[2],yn=ci[3],Cn=ci[4],dr=ci[5],hr=ci[6],Jr=ci[7],zi=ci[8],Ji=ci[9],ei=ci[10],Hi=ci[11],Ii=ci[12],Wr=ci[13],Eo=ci[14],ci=ci[15],xo=jt[0],Wi=jt[1],oo=jt[2],Ao=jt[3];return Be[0]=xo*un+Wi*Cn+oo*zi+Ao*Ii,Be[1]=xo*Nn+Wi*dr+oo*Ji+Ao*Wr,Be[2]=xo*Bn+Wi*hr+oo*ei+Ao*Eo,Be[3]=xo*yn+Wi*Jr+oo*Hi+Ao*ci,xo=jt[4],Wi=jt[5],oo=jt[6],Ao=jt[7],Be[4]=xo*un+Wi*Cn+oo*zi+Ao*Ii,Be[5]=xo*Nn+Wi*dr+oo*Ji+Ao*Wr,Be[6]=xo*Bn+Wi*hr+oo*ei+Ao*Eo,Be[7]=xo*yn+Wi*Jr+oo*Hi+Ao*ci,xo=jt[8],Wi=jt[9],oo=jt[10],Ao=jt[11],Be[8]=xo*un+Wi*Cn+oo*zi+Ao*Ii,Be[9]=xo*Nn+Wi*dr+oo*Ji+Ao*Wr,Be[10]=xo*Bn+Wi*hr+oo*ei+Ao*Eo,Be[11]=xo*yn+Wi*Jr+oo*Hi+Ao*ci,xo=jt[12],Wi=jt[13],oo=jt[14],Ao=jt[15],Be[12]=xo*un+Wi*Cn+oo*zi+Ao*Ii,Be[13]=xo*Nn+Wi*dr+oo*Ji+Ao*Wr,Be[14]=xo*Bn+Wi*hr+oo*ei+Ao*Eo,Be[15]=xo*yn+Wi*Jr+oo*Hi+Ao*ci,Be};function Ot(Be){for(var rt=[],jt=1;jt<arguments.length;jt++)rt[jt-1]=arguments[jt];return Be?rt.reduce(function(un,Nn){return function(Bn){return Nn(un(Bn))}},Be):Re}function dt(Be){return Be instanceof Float32Array||Be instanceof Array}function bt(Be,rt,jt){for(;Be<rt;)Be+=2*Math.PI;for(;jt<Be;)Be-=2*Math.PI;return Be}st=new le(3),le!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0),st=new le(4),le!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0,st[3]=0);function Me(yn,rt,jt,un,Nn){var Bn=(yn=G(yn,2))[0],yn=yn[1],Cn=K();return Bn=[Bn,yn],(yn=Cn)[0]=1,yn[1]=0,yn[2]=0,yn[3]=0,yn[4]=1,yn[5]=0,yn[6]=Bn[0],yn[7]=Bn[1],yn[8]=1,yn}function we(Be,...rt){return rt.reduce((jt,un)=>Nn=>jt(un(Nn)),Be)}function je(Be,rt){return rt-Be?jt=>(jt-Be)/(rt-Be):jt=>.5}const Ze=Math.sqrt(50),ut=Math.sqrt(10),Qt=Math.sqrt(2);function De(Be,rt,jt){return rt=(rt-Be)/Math.max(0,jt),Be=Math.floor(Math.log(rt)/Math.LN10),jt=rt/gf(10,Be),0<=Be?(jt>=Ze?10:jt>=ut?5:jt>=Qt?2:1)*gf(10,Be):-gf(10,-Be)/(jt>=Ze?10:jt>=ut?5:jt>=Qt?2:1)}const St=(Be,rt,jt=5)=>{Be=[Be,rt];let un=0,Nn=Be.length-1,Bn=Be[un],yn=Be[Nn],Cn;return yn<Bn&&([Bn,yn]=[yn,Bn],[un,Nn]=[Nn,un]),0<(Cn=De(Bn,yn,jt))?(Bn=Math.floor(Bn/Cn)*Cn,yn=Math.ceil(yn/Cn)*Cn,Cn=De(Bn,yn,jt)):Cn<0&&(Bn=Math.ceil(Bn*Cn)/Cn,yn=Math.floor(yn*Cn)/Cn,Cn=De(Bn,yn,jt)),0<Cn?(Be[un]=Math.floor(Bn/Cn)*Cn,Be[Nn]=Math.ceil(yn/Cn)*Cn):Cn<0&&(Be[un]=Math.ceil(Bn*Cn)/Cn,Be[Nn]=Math.floor(yn*Cn)/Cn),Be};function Oe(Be){return Be!=null&&!Number.isNaN(Be)}function it(Be,rt){return jt=>{jt.prototype.rescale=function(){this.initRange(),this.nice();var[un]=this.chooseTransforms();this.composeOutput(un,this.chooseClamp(un))},jt.prototype.initRange=function(){var un=this.options.interpolator;this.options.range=Be(un)},jt.prototype.composeOutput=function(un,Nn){var Bn,{domain:Cn,interpolator:yn,round:dr}=this.getOptions(),Cn=rt(Cn.map(un)),dr=dr?(Bn=yn,hr=>(hr=Bn(hr),oe(hr)?Math.round(hr):hr)):yn;this.output=we(dr,Cn,Nn,un)},jt.prototype.invert=void 0}}var Ke,st={exports:{}},Fe={exports:{}},Xe=function(Be){return!(!Be||typeof Be=="string")&&(Be instanceof Array||Array.isArray(Be)||0<=Be.length&&(Be.splice instanceof Function||Object.getOwnPropertyDescriptor(Be,Be.length-1)&&Be.constructor.name!=="String"))},Pt=Array.prototype.concat,xt=Array.prototype.slice,Ie=Fe.exports=function(Be){for(var rt=[],jt=0,un=Be.length;jt<un;jt++){var Nn=Be[jt];Xe(Nn)?rt=Pt.call(rt,xt.call(Nn)):rt.push(Nn)}return rt},Wt=(Ie.wrap=function(Be){return function(){return Be(Ie(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),hn=Fe.exports,Pn=Object.hasOwnProperty,$n=Object.create(null);for(Ke in Wt)Pn.call(Wt,Ke)&&($n[Wt[Ke]]=Ke);var nr=st.exports={to:{},get:{}};function Ft(Be,rt,jt){return Math.min(Math.max(rt,Be),jt)}function Jt(Be){return Be=Math.round(Be).toString(16).toUpperCase(),Be.length<2?"0"+Be:Be}nr.get=function(Be){var rt,jt;switch(Be.substring(0,3).toLowerCase()){case"hsl":rt=nr.get.hsl(Be),jt="hsl";break;case"hwb":rt=nr.get.hwb(Be),jt="hwb";break;default:rt=nr.get.rgb(Be),jt="rgb"}return rt?{model:jt,value:rt}:null},nr.get.rgb=function(Be){if(!Be)return null;var rt,jt,un,Nn=[0,0,0,1];if(rt=Be.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(un=rt[2],rt=rt[1],jt=0;jt<3;jt++){var Bn=2*jt;Nn[jt]=parseInt(rt.slice(Bn,2+Bn),16)}un&&(Nn[3]=parseInt(un,16)/255)}else if(rt=Be.match(/^#([a-f0-9]{3,4})$/i)){for(un=(rt=rt[1])[3],jt=0;jt<3;jt++)Nn[jt]=parseInt(rt[jt]+rt[jt],16);un&&(Nn[3]=parseInt(un+un,16)/255)}else{if(rt=Be.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(jt=0;jt<3;jt++)Nn[jt]=parseInt(rt[jt+1],0);else{if(!(rt=Be.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(rt=Be.match(/^(\w+)$/))?rt[1]==="transparent"?[0,0,0,0]:Pn.call(Wt,rt[1])?((Nn=Wt[rt[1]])[3]=1,Nn):null:null;for(jt=0;jt<3;jt++)Nn[jt]=Math.round(2.55*parseFloat(rt[jt+1]))}rt[4]&&(rt[5]?Nn[3]=.01*parseFloat(rt[4]):Nn[3]=parseFloat(rt[4]))}for(jt=0;jt<3;jt++)Nn[jt]=Ft(Nn[jt],0,255);return Nn[3]=Ft(Nn[3],0,1),Nn},nr.get.hsl=function(Be){var rt;return(Be=Be&&Be.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(rt=parseFloat(Be[4]),[(parseFloat(Be[1])%360+360)%360,Ft(parseFloat(Be[2]),0,100),Ft(parseFloat(Be[3]),0,100),Ft(isNaN(rt)?1:rt,0,1)]):null},nr.get.hwb=function(Be){var rt;return(Be=Be&&Be.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(rt=parseFloat(Be[4]),[(parseFloat(Be[1])%360+360)%360,Ft(parseFloat(Be[2]),0,100),Ft(parseFloat(Be[3]),0,100),Ft(isNaN(rt)?1:rt,0,1)]):null},nr.to.hex=function(){var Be=hn(arguments);return"#"+Jt(Be[0])+Jt(Be[1])+Jt(Be[2])+(Be[3]<1?Jt(Math.round(255*Be[3])):"")},nr.to.rgb=function(){var Be=hn(arguments);return Be.length<4||Be[3]===1?"rgb("+Math.round(Be[0])+", "+Math.round(Be[1])+", "+Math.round(Be[2])+")":"rgba("+Math.round(Be[0])+", "+Math.round(Be[1])+", "+Math.round(Be[2])+", "+Be[3]+")"},nr.to.rgb.percent=function(){var Be=hn(arguments),rt=Math.round(Be[0]/255*100),jt=Math.round(Be[1]/255*100),un=Math.round(Be[2]/255*100);return Be.length<4||Be[3]===1?"rgb("+rt+"%, "+jt+"%, "+un+"%)":"rgba("+rt+"%, "+jt+"%, "+un+"%, "+Be[3]+")"},nr.to.hsl=function(){var Be=hn(arguments);return Be.length<4||Be[3]===1?"hsl("+Be[0]+", "+Be[1]+"%, "+Be[2]+"%)":"hsla("+Be[0]+", "+Be[1]+"%, "+Be[2]+"%, "+Be[3]+")"},nr.to.hwb=function(){var Be=hn(arguments),rt="";return 4<=Be.length&&Be[3]!==1&&(rt=", "+Be[3]),"hwb("+Be[0]+", "+Be[1]+"%, "+Be[2]+"%"+rt+")"},nr.to.keyword=function(Be){return $n[Be.slice(0,3)]};var ln=st.exports;function Un(Be,rt,jt){let un=jt;return un<0&&(un+=1),1<un&&--un,un<1/6?Be+6*(rt-Be)*un:un<.5?rt:un<2/3?Be+(rt-Be)*(2/3-un)*6:Be}function on(Nn){var rt,jt,un,Nn=ln.get(Nn);return Nn?({model:Nn,value:rt}=Nn,Nn==="rgb"?rt:Nn==="hsl"?(rt=(Nn=rt)[0]/360,jt=Nn[1]/100,un=Nn[2]/100,Nn=Nn[3],jt==0?[255*un,255*un,255*un,Nn]:[255*Un(jt=2*un-(un=un<.5?un*(1+jt):un+jt-un*jt),un,rt+1/3),255*Un(jt,un,rt),255*Un(jt,un,rt-1/3),Nn]):null):null}const zt=(Be,rt)=>jt=>Be*(1-jt)+rt*jt,kt=(Be,rt)=>{if(typeof Be=="number"&&typeof rt=="number")return zt(Be,rt);if(typeof Be!="string"||typeof rt!="string")return()=>Be;{var jt=Be,un=rt;const Nn=on(jt),Bn=on(un);return Nn===null||Bn===null?Nn?()=>jt:()=>un:yn=>{var Cn=new Array(4);for(let Hi=0;Hi<4;Hi+=1){var dr=Nn[Hi],hr=Bn[Hi];Cn[Hi]=dr*(1-yn)+hr*yn}var[Jr,zi,Ji,ei]=Cn;return`rgba(${Math.round(Jr)}, ${Math.round(zi)}, ${Math.round(Ji)}, ${ei})`}}},ke=(Be,rt)=>{const jt=zt(Be,rt);return un=>Math.round(jt(un))};function nt({map:Be,initKey:rt},jt){return rt=rt(jt),Be.has(rt)?Be.get(rt):jt}function Vt(Be){return typeof Be=="object"?Be.valueOf():Be}class U extends Map{constructor(rt){if(super(),this.map=new Map,this.initKey=Vt,rt!==null)for(var[jt,un]of rt)this.set(jt,un)}get(rt){return super.get(nt({map:this.map,initKey:this.initKey},rt))}has(rt){return super.has(nt({map:this.map,initKey:this.initKey},rt))}set(rt,jt){return super.set(([{map:rt,initKey:un},Nn]=[{map:this.map,initKey:this.initKey},rt],un=un(Nn),rt.has(un)?rt.get(un):(rt.set(un,Nn),Nn)),jt);var un,Nn}delete(rt){return super.delete(([{map:rt,initKey:jt},un]=[{map:this.map,initKey:this.initKey},rt],jt=jt(un),rt.has(jt)&&(un=rt.get(jt),rt.delete(jt)),un));var jt,un}}class pe{constructor(rt){this.options=me({},this.getDefaultOptions()),this.update(rt)}getOptions(){return this.options}update(rt={}){this.options=me({},this.options,rt),this.rescale(rt)}rescale(rt){}}const ct=Symbol("defaultUnknown");function de(Be,rt,jt){for(let un=0;un<rt.length;un+=1)Be.has(rt[un])||Be.set(jt(rt[un]),un)}function Yt(rt){var{value:rt,from:jt,to:un,mapper:Nn,notFoundReturn:Bn}=rt;let yn=Nn.get(rt);if(yn===void 0){if(Bn!==ct)return Bn;yn=jt.push(rt)-1,Nn.set(rt,yn)}return un[yn%un.length]}function sn(Be){return Be instanceof Date?rt=>""+rt:typeof Be=="object"?rt=>JSON.stringify(rt):rt=>rt}class pn extends pe{getDefaultOptions(){return{domain:[],range:[],unknown:ct}}constructor(rt){super(rt)}map(rt){return this.domainIndexMap.size===0&&de(this.domainIndexMap,this.getDomain(),this.domainKey),Yt({value:this.domainKey(rt),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(rt){return this.rangeIndexMap.size===0&&de(this.rangeIndexMap,this.getRange(),this.rangeKey),Yt({value:this.rangeKey(rt),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(rt){var[jt]=this.options.domain,[un]=this.options.range;this.domainKey=sn(jt),this.rangeKey=sn(un),this.rangeIndexMap?(rt&&!rt.range||this.rangeIndexMap.clear(),rt&&!rt.domain&&!rt.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new pn(this.options)}getRange(){return this.options.range}getDomain(){var rt,jt;return this.sortedDomain||({domain:rt,compare:jt}=this.options,this.sortedDomain=jt?[...rt].sort(jt):rt),this.sortedDomain}}function Dn(Wr){const{domain:rt,range:jt,paddingOuter:un,paddingInner:Nn,flex:Bn,round:yn,align:Cn}=Wr;var dr=rt.length,ei=0<(ei=(Wr=dr)-(hr=Bn).length)?[...hr,...new Array(ei).fill(1)]:ei<0?hr.slice(0,Wr):hr,[Wr,hr]=jt,hr=hr-Wr,Ii=hr/(2/dr*un+1-1/dr*Nn);const Jr=Ii*Nn/dr;Ii-=dr*Jr;const zi=function(Wi){const oo=Math.min(...Wi);return Wi.map(Ao=>Ao/oo)}(ei),Ji=Ii/zi.reduce((Wi,oo)=>Wi+oo);var ei=new U(rt.map((Wi,oo)=>(oo=zi[oo]*Ji,[Wi,yn?Math.floor(oo):oo]))),Hi=new U(rt.map((Wi,oo)=>(oo=zi[oo]*Ji+Jr,[Wi,yn?Math.floor(oo):oo]))),Ii=Array.from(Hi.values()).reduce((Wi,oo)=>Wi+oo),Wr=Wr+(hr-(Ii-Ii/dr*Nn))*Cn;let Eo=yn?Math.round(Wr):Wr;var ci=new Array(dr);for(let Wi=0;Wi<dr;Wi+=1){ci[Wi]=(xo=Eo,Math.round(1e12*xo)/1e12);var xo=rt[Wi];Eo+=Hi.get(xo)}return{valueBandWidth:ei,valueStep:Hi,adjustedRange:ci}}class Wn extends pn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:ct,flex:[]}}constructor(rt){super(rt)}clone(){return new Wn(this.options)}getStep(rt){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:rt===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(rt)}getBandWidth(rt){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:rt===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(rt)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:rt,paddingInner:jt}=this.options;return 0<rt?rt:jt}getPaddingOuter(){var{padding:rt,paddingOuter:jt}=this.options;return 0<rt?rt:jt}rescale(){super.rescale();var{align:un,domain:rt,range:Nn,round:Bn,flex:jt}=this.options,{adjustedRange:un,valueBandWidth:Nn,valueStep:Bn}=function(hr){var Cn=hr.domain;if((Cn=Cn.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((dr=hr.flex)==null||!dr.length))return Dn(hr);var{range:dr,paddingOuter:hr,paddingInner:Jr,round:zi,align:Ji}=hr;let ei,Hi,Ii=dr[0];return dr=dr[1]-Ii,ei=dr/Math.max(1,2*hr+(Cn-Jr)),zi&&(ei=Math.floor(ei)),Ii+=(dr-ei*(Cn-Jr))*Ji,Hi=ei*(1-Jr),zi&&(Ii=Math.round(Ii),Hi=Math.round(Hi)),hr=new Array(Cn).fill(0).map((Wr,Eo)=>Ii+Eo*ei),{valueStep:ei,valueBandWidth:Hi,adjustedRange:hr}}({align:un,range:Nn,round:Bn,flex:jt,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:rt});this.valueStep=Bn,this.valueBandWidth=Nn,this.adjustedRange=un}}const Xn=(Be,rt,jt)=>{let un,Nn,Bn=Be,yn=rt;if(Bn===yn&&0<jt)return[Bn];let Cn=De(Bn,yn,jt);if(Cn===0||!Number.isFinite(Cn))return[];if(0<Cn){Bn=Math.ceil(Bn/Cn),yn=Math.floor(yn/Cn),Nn=new Array(un=Math.ceil(yn-Bn+1));for(let dr=0;dr<un;dr+=1)Nn[dr]=(Bn+dr)*Cn}else{Cn=-Cn,Bn=Math.ceil(Bn*Cn),yn=Math.floor(yn*Cn),Nn=new Array(un=Math.ceil(yn-Bn+1));for(let dr=0;dr<un;dr+=1)Nn[dr]=(Bn+dr)/Cn}return Nn},dn=(un,Bn,jt)=>{var[un,Nn]=un,[Bn,yn]=Bn;let Cn,dr;return we(dr=un<Nn?(Cn=je(un,Nn),jt(Bn,yn)):(Cn=je(Nn,un),jt(yn,Bn)),Cn)},_t=(Be,rt,jt)=>{const un=Math.min(Be.length,rt.length)-1,Nn=new Array(un),Bn=new Array(un);var yn=Be[0]>Be[un],Cn=yn?[...Be].reverse():Be,dr=yn?[...rt].reverse():rt;for(let hr=0;hr<un;hr+=1)Nn[hr]=je(Cn[hr],Cn[hr+1]),Bn[hr]=jt(dr[hr],dr[hr+1]);return hr=>{var Jr=function(Ji,ei,Hi,Ii,Wr){let Eo=Hi||0,ci=Ii||Ji.length;for(var xo=Wr||(oo=>oo);Eo<ci;){var Wi=Math.floor((Eo+ci)/2);xo(Ji[Wi])>ei?ci=Wi:Eo=Wi+1}return Eo}(Be,hr,1,un)-1,zi=Nn[Jr];return we(Bn[Jr],zi)(hr)}},Rt=(Be,rt,jt,un)=>(2<Math.min(Be.length,rt.length)?_t:dn)(Be,rt,un?ke:jt);class wn extends pe{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:zt,tickCount:5}}map(rt){return Oe(rt)?this.output(rt):this.options.unknown}invert(rt){return Oe(rt)?this.input(rt):this.options.unknown}nice(){var rt,jt,un,Nn;this.options.nice&&([rt,jt,un,...Nn]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(rt,jt,un,...Nn))}getTicks(){var rt=this.options.tickMethod,[jt,un,Nn,...Bn]=this.getTickMethodOptions();return rt(jt,un,Nn,...Bn)}getTickMethodOptions(){var{domain:rt,tickCount:jt}=this.options;return[rt[0],rt[rt.length-1],jt]}chooseNice(){return St}rescale(){this.nice();var[rt,jt]=this.chooseTransforms();this.composeOutput(rt,this.chooseClamp(rt)),this.composeInput(rt,jt,this.chooseClamp(jt))}chooseClamp(un){var{clamp:jt,range:Nn}=this.options,un=this.options.domain.map(un),Nn=Math.min(un.length,Nn.length);if(jt){jt=un[0],un=un[Nn-1];const Bn=un<jt?un:jt,yn=un<jt?jt:un;return Cn=>Math.min(Math.max(Bn,Cn),yn)}return Re}composeOutput(rt,jt){var{domain:yn,range:un,round:Nn,interpolate:Bn}=this.options,yn=Rt(yn.map(rt),un,Bn,Nn);this.output=we(yn,jt,rt)}composeInput(rt,jt,un){var{domain:Nn,range:Bn}=this.options,Bn=Rt(Bn,Nn.map(rt),zt);this.input=we(jt,un,Bn)}}class In extends wn{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:kt,tickMethod:Xn,tickCount:5}}chooseTransforms(){return[Re,Re]}clone(){return new In(this.options)}}class Zn extends Wn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:ct,paddingInner:1,paddingOuter:0}}constructor(rt){super(rt)}getPaddingInner(){return 1}clone(){return new Zn(this.options)}update(rt){super.update(rt)}getPaddingOuter(){return this.options.padding}}function vt(Be,rt){for(var jt=[],un=0,Nn=Be.length;un<Nn;un++)jt.push(Be[un].substr(0,rt));return jt}var Ee,Fe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],st=["January","February","March","April","May","June","July","August","September","October","November","December"],It=vt(st,3);(function(Be){for(var rt=[],jt=1;jt<arguments.length;jt++)rt[jt-1]=arguments[jt];for(var un=0,Nn=rt;un<Nn.length;un++){var Bn,yn=Nn[un];for(Bn in yn)Be[Bn]=yn[Bn]}})({},{dayNamesShort:vt(Fe,3),dayNames:Fe,monthNamesShort:It,monthNames:st,amPm:["am","pm"],DoFn:function(Be){return Be+["th","st","nd","rd"][3<Be%10?0:(Be-Be%10!=10?1:0)*Be%10]}});var Mt;let En=Ee=class extends In{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Re,tickMethod:Xn,tickCount:5}}constructor(Be){super(Be)}clone(){return new Ee(this.options)}};En=Ee=function(Be,rt,jt,un){var Nn,Bn=arguments.length,yn=Bn<3?rt:un===null?un=Object.getOwnPropertyDescriptor(rt,jt):un;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")yn=Reflect.decorate(Be,rt,jt,un);else for(var Cn=Be.length-1;0<=Cn;Cn--)(Nn=Be[Cn])&&(yn=(Bn<3?Nn(yn):3<Bn?Nn(rt,jt,yn):Nn(rt,jt))||yn);return 3<Bn&&yn&&Object.defineProperty(rt,jt,yn),yn}([it(function(Be){return[Be(0),Be(1)]},rt=>{var[rt,jt]=rt;return we(zt(0,1),je(rt,jt))})],En);let Yn=Mt=class extends In{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Re,tickMethod:Xn,tickCount:5}}constructor(Be){super(Be)}clone(){return new Mt(this.options)}};Yn=Mt=function(Be,rt,jt,un){var Nn,Bn=arguments.length,yn=Bn<3?rt:un===null?un=Object.getOwnPropertyDescriptor(rt,jt):un;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")yn=Reflect.decorate(Be,rt,jt,un);else for(var Cn=Be.length-1;0<=Cn;Cn--)(Nn=Be[Cn])&&(yn=(Bn<3?Nn(yn):3<Bn?Nn(rt,jt,yn):Nn(rt,jt))||yn);return 3<Bn&&yn&&Object.defineProperty(rt,jt,yn),yn}([it(function(Be){return[Be(0),Be(.5),Be(1)]},Be=>{const[rt,jt,un]=Be,Nn=we(zt(0,.5),je(rt,jt)),Bn=we(zt(.5,1),je(jt,un));return yn=>(rt>un?yn<jt?Bn:Nn:yn<jt?Nn:Bn)(yn)})],Yn);function yr(Be,rt,jt,un,Nn){var Bn=new In({range:[rt,rt+un]}),yn=new In({range:[jt,jt+Nn]});return{transform:function(hr){var hr=G(hr,2),dr=hr[0],hr=hr[1];return[Bn.map(dr),yn.map(hr)]},untransform:function(hr){var hr=G(hr,2),dr=hr[0],hr=hr[1];return[Bn.invert(dr),yn.invert(hr)]}}}function qn(Be,rt,jt,un,Nn){return(0,G(Be,1)[0])(rt,jt,un,Nn)}function Pe(Be,rt,jt,un,Nn){return G(Be,1)[0]}function Te(dr,rt,jt,un,Nn){var Bn=(dr=G(dr,4))[0],yn=dr[1],Cn=dr[2],dr=dr[3],hr=new In({range:[Cn,dr]}),Jr=new In({range:[Bn,yn]}),zi=1<(Cn=Nn/un)?1:Cn,Ji=1<Cn?1/Cn:1;return{transform:function(Ii){var Ii=G(Ii,2),Hi=Ii[0],Ii=Ii[1],Hi=Jr.map(Hi),Ii=hr.map(Ii);return[.5*(Ii*Math.cos(Hi)*zi)+.5,.5*(Ii*Math.sin(Hi)*Ji)+.5]},untransform:function(Wr){var Wr=G(Wr,2),Hi=Wr[0],Wr=Wr[1],Hi=2*(Hi-.5)/zi,Wr=2*(Wr-.5)/Ji,Ii=Math.sqrt(Math.pow(Hi,2)+Math.pow(Wr,2)),Wr=bt(Math.atan2(Wr,Hi),Bn,yn);return[Jr.invert(Wr),hr.invert(Ii)]}}}function Ue(Be,rt,jt,un,Nn){return{transform:function(yn){var yn=G(yn,2),Cn=yn[0];return[yn[1],Cn]},untransform:function(yn){var yn=G(yn,2),Cn=yn[0];return[yn[1],Cn]}}}function ot(Be){for(var rt=[],jt=1;jt<arguments.length;jt++)rt[jt-1]=arguments[jt];return Qn.apply(void 0,E([[-1,-1]],G(rt),!1))}function wt(Be){for(var rt=[],jt=1;jt<arguments.length;jt++)rt[jt-1]=arguments[jt];return Qn.apply(void 0,E([[-1,1]],G(rt),!1))}function $t(Be){for(var rt=[],jt=1;jt<arguments.length;jt++)rt[jt-1]=arguments[jt];return Qn.apply(void 0,E([[1,-1]],G(rt),!1))}function vn(yn,rt,jt,un,Nn){var Bn,yn=G(yn,1)[0],Cn=K();return Cn=Cn,yn=yn,Bn=Math.sin(yn),yn=Math.cos(yn),Cn[0]=yn,Cn[1]=Bn,Cn[2]=0,Cn[3]=-Bn,Cn[4]=yn,Cn[5]=0,Cn[6]=0,Cn[7]=0,Cn[8]=1,Cn}function Et(Be,rt,jt,un,Nn){var Bn=(Be=G(Be,4))[0],yn=Be[1],Cn=Be[2],dr=(Be[3]-Cn)/(+yn/(2*Math.PI)+1),hr=dr/(2*Math.PI),Jr=new In({range:[Cn,Cn+.99*dr]}),zi=new In({range:[Bn,yn]}),Ji=1<(Be=Nn/un)?1:Be,ei=1<Be?1/Be:1;return{transform:function(Wr){var Wr=G(Wr,2),Ii=Wr[0],Wr=Wr[1],Ii=zi.map(Ii),Wr=Jr.map(Wr);return[.5*(Math.cos(Ii)*(hr*Ii+Wr)*Ji)+.5,.5*(Math.sin(Ii)*(hr*Ii+Wr)*ei)+.5]},untransform:function(Wr){var Wr=G(Wr,2),Eo=Wr[0],Wr=Wr[1],Eo=2*(Eo-.5)/Ji,Wr=2*(Wr-.5)/ei,Ii=Math.sqrt(Math.pow(Eo,2)+Math.pow(Wr,2)),Wr=bt(Math.atan2(Wr,Eo)+Math.floor(Ii/dr)*Math.PI*2,Bn,yn),Eo=Ii-hr*Wr;return[zi.invert(Wr),Jr.invert(Eo)]}}}function Kt(dr,rt,jt,un,Nn){var Bn=(dr=G(dr,4))[0],yn=dr[1],Cn=dr[2],dr=dr[3],hr=new In({range:[Cn,dr]});return{transform:function(Jr){for(var zi=[],Ji=Jr.length,ei=new Zn({domain:new Array(Ji).fill(0).map(function(Eo,ci){return ci}),range:[Bn,yn]}),Hi=0;Hi<Ji;Hi++){var Wr=Jr[Hi],Ii=ei.map(Hi),Wr=hr.map(Wr);zi.push(Ii,Wr)}return zi},untransform:function(Jr){for(var zi=[],Ji=0;Ji<Jr.length;Ji+=2){var ei=Jr[Ji+1];zi.push(hr.invert(ei))}return zi}}}var Qn=function(yn,rt,jt,un,Nn){var yn=G(yn,2),Bn=yn[0],yn=yn[1],Cn=K();return Bn=[Bn,yn],(yn=Cn)[0]=Bn[0],yn[1]=0,yn[2]=0,yn[3]=0,yn[4]=Bn[1],yn[5]=0,yn[6]=0,yn[7]=0,yn[8]=1,yn};function _r(Be){return 1/Math.tan(Be)}function Vr(Be,rt,jt,un,Nn){var Bn=_r(G(Be,1)[0]);return{transform:function(dr){var dr=G(dr,2),Cn=dr[0],dr=dr[1];return[Cn+dr*Bn,dr]},untransform:function(dr){var dr=G(dr,2),Cn=dr[0],dr=dr[1];return[Cn-dr*Bn,dr]}}}function pr(Be,rt,jt,un,Nn){var Bn=_r(G(Be,1)[0]);return{transform:function(Cn){var Cn=G(Cn,2),dr=Cn[0];return[dr,Cn[1]+dr*Bn]},untransform:function(Cn){var Cn=G(Cn,2),dr=Cn[0];return[dr,Cn[1]-dr*Bn]}}}function zr(Be,rt,jt,Cn,yn){var Bn=Be<rt,yn=(Bn?rt-Cn:yn-rt)||yn-Cn,Cn=Bn?-1:1;return Cn*yn*(jt+1)/(jt+yn/((Be-rt)*Cn))+rt}function gi(Be,rt,jt,un,yn){var Bn=Be<rt,yn=(Bn?rt-un:yn-rt)||yn-un;return yn/(yn*(jt+1)/(Be-rt)-jt*(Bn?-1:1))+rt}function wi(Be,rt,jt){return jt?new In({range:[0,1],domain:[0,rt]}).map(Be):Be}function Sr(Cn,rt,jt,un,Nn){var Bn=(Cn=G(Cn,3))[0],yn=Cn[1],Cn=Cn[2],dr=wi(Bn,un,Cn!==void 0&&Cn);return{transform:function(zi){var zi=G(zi,2),Jr=zi[0],zi=zi[1];return[zr(Jr,dr,yn,0,1),zi]},untransform:function(zi){var zi=G(zi,2),Jr=zi[0],zi=zi[1];return[gi(Jr,dr,yn,0,1),zi]}}}function Ti(Cn,rt,jt,un,Nn){var Bn=(Cn=G(Cn,3))[0],yn=Cn[1],Cn=Cn[2],dr=wi(Bn,Nn,Cn!==void 0&&Cn);return{transform:function(hr){return hr=G(hr,2),[hr[0],zr(hr[1],dr,yn,0,1)]},untransform:function(hr){return hr=G(hr,2),[hr[0],gi(hr[1],dr,yn,0,1)]}}}function hi(hr,rt,jt,un,Nn){var Bn=(hr=G(hr,5))[0],yn=hr[1],Cn=hr[2],dr=hr[3],hr=hr[4],Jr=wi(Bn,un,hr=hr!==void 0&&hr),zi=wi(yn,Nn,hr);return{transform:function(Hi){var Hi=G(Hi,2),ei=Hi[0],Hi=Hi[1];return[zr(ei,Jr,Cn,0,1),zr(Hi,zi,dr,0,1)]},untransform:function(Hi){var Hi=G(Hi,2),ei=Hi[0],Hi=Hi[1];return[gi(ei,Jr,Cn,0,1),gi(Hi,zi,dr,0,1)]}}}function ai(hr,rt,jt,un,Nn){var Bn=(hr=G(hr,5))[0],yn=hr[1],Cn=hr[2],dr=hr[3],hr=(hr=hr[4])!==void 0&&hr,Jr=new In({range:[0,un]}),zi=new In({range:[0,Nn]}),Ji=hr?Bn:Jr.map(Bn),ei=hr?yn:zi.map(yn);return{transform:function(Wr){var Wr=G(Wr,2),Ii=Wr[0],Wr=Wr[1],Eo=Jr.map(Ii)-Ji,ci=zi.map(Wr)-ei,xo=Math.sqrt(Eo*Eo+ci*ci);return Cn<xo?[Ii,Wr]:(Ii=zr(xo,0,dr,0,Cn),Wr=Math.atan2(ci,Eo),xo=Ji+Ii*Math.cos(Wr),ci=ei+Ii*Math.sin(Wr),[Jr.invert(xo),zi.invert(ci)])},untransform:function(Wr){var Wr=G(Wr,2),Ii=Wr[0],Wr=Wr[1],Eo=Jr.map(Ii)-Ji,ci=zi.map(Wr)-ei,xo=Math.sqrt(Eo*Eo+ci*ci);return Cn<xo?[Ii,Wr]:(Ii=gi(xo,0,dr,0,Cn),Wr=Math.atan2(ci,Eo),xo=Ji+Ii*Math.cos(Wr),ci=ei+Ii*Math.sin(Wr),[Jr.invert(xo),zi.invert(ci)])}}}function Mo(Be,rt,jt,un,Nn,Bn,yn){var Cn=new In({range:[rt,rt+Nn]}),dr=new In({range:[jt,jt+Bn]}),hr=new In({range:[un,un+yn]});return{transform:function(ei){var ei=G(ei,3),zi=ei[0],Ji=ei[1],ei=ei[2];return[Cn.map(zi),dr.map(Ji),hr.map(ei)]},untransform:function(ei){var ei=G(ei,3),zi=ei[0],Ji=ei[1],ei=ei[2];return[Cn.invert(zi),dr.invert(Ji),hr.invert(ei)]}}}function xi(Jr,rt,jt,un,Nn,Bn,yn){var Cn,dr=(Jr=G(Jr,3))[0],hr=Jr[1],Jr=Jr[2];return Cn=et(),dr=[dr,hr,Jr],Cn[0]=1,Cn[1]=0,Cn[2]=0,Cn[3]=0,Cn[4]=0,Cn[5]=1,Cn[6]=0,Cn[7]=0,Cn[8]=0,Cn[9]=0,Cn[10]=1,Cn[11]=0,Cn[12]=dr[0],Cn[13]=dr[1],Cn[14]=dr[2],Cn[15]=1,Cn}function ea(Be,rt,jt,un,Nn,Bn,yn){return{transform:function(dr){var dr=G(dr,3),hr=dr[0];return[dr[1],hr,dr[2]]},untransform:function(dr){var dr=G(dr,3),hr=dr[0];return[dr[1],hr,dr[2]]}}}function va(Jr,rt,jt,un,Nn,Bn,yn){var Cn,dr=(Jr=G(Jr,3))[0],hr=Jr[1],Jr=Jr[2];return Cn=et(),dr=[dr,hr,Jr],Cn[0]=dr[0],Cn[1]=0,Cn[2]=0,Cn[3]=0,Cn[4]=0,Cn[5]=dr[1],Cn[6]=0,Cn[7]=0,Cn[8]=0,Cn[9]=0,Cn[10]=dr[2],Cn[11]=0,Cn[12]=0,Cn[13]=0,Cn[14]=0,Cn[15]=1,Cn}Ro.prototype.update=function(Be){this.options=me({},this.options,Be),this.recoordinate()},Ro.prototype.clone=function(){return new Ro(this.options)},Ro.prototype.getOptions=function(){return this.options},Ro.prototype.clear=function(){this.update({transformations:[]})},Ro.prototype.getSize=function(){var Be=this.options;return[Be.width,Be.height]},Ro.prototype.getCenter=function(){var Be=this.options,rt=Be.x,jt=Be.y;return[(2*rt+Be.width)/2,(2*jt+Be.height)/2]},Ro.prototype.transform=function(){for(var Be=[],rt=0;rt<arguments.length;rt++)Be[rt]=arguments[rt];var jt=this.options.transformations;return this.update({transformations:E(E([],G(jt),!1),[E([],G(Be),!1)],!1)}),this},Ro.prototype.map=function(Be){return this.output(Be)},Ro.prototype.invert=function(Be){return this.input(Be)},Ro.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},Ro.prototype.compose=function(Be){function rt(Wi,oo){var Ao;Cn.push((oo=oo===void 0?!0:oo)?(Ao=Wi,function(bs){for(var ma=[],ta=0;ta<bs.length-1;ta+=2){var vs=[bs[ta],bs[ta+1]],vs=Ao(vs);ma.push.apply(ma,E([],G(vs),!1))}return ma}):Wi)}var jt,un,Nn=(Be=Be===void 0?!1:Be)?E([],G(this.options.transformations),!1).reverse():this.options.transformations,Bn=Be?function(Wi){return Wi.untransform}:function(Wi){return Wi.transform},yn=[],Cn=[];try{for(var dr=q(Nn),hr=dr.next();!hr.done;hr=dr.next()){var Jr,zi,Ji,ei,Hi,Ii,Wr=G(hr.value),Eo=Wr[0],ci=Wr.slice(1),xo=this.transformers[Eo];xo&&(zi=(Jr=this.options).x,Ji=Jr.y,ei=Jr.width,Hi=Jr.height,dt(Ii=xo(E([],G(ci),!1),zi,Ji,ei,Hi))?yn.push(Ii):(yn.length&&(rt(this.createMatrixTransform(yn,Be)),yn.splice(0,yn.length)),rt(Bn(Ii)||Re,Eo!=="parallel")))}}catch(Wi){jt={error:Wi}}finally{try{hr&&!hr.done&&(un=dr.return)&&un.call(dr)}finally{if(jt)throw jt.error}}return yn.length&&rt(this.createMatrixTransform(yn,Be)),Ot.apply(void 0,E([],G(Cn),!1))},Ro.prototype.createMatrixTransform=function(Be,rt){var jt,un,Nn,Bn,yn,Cn,dr,hr,Jr,zi,Ji,ei,Hi=K();return rt&&Be.reverse(),Be.forEach(function(Ii){return _e(Hi,Hi,Ii)}),rt&&(rt=Be=Hi,(ei=new le(9))[0]=rt[0],ei[1]=rt[1],ei[2]=rt[2],ei[3]=rt[3],ei[4]=rt[4],ei[5]=rt[5],ei[6]=rt[6],ei[7]=rt[7],ei[8]=rt[8],ei=(rt=ei)[0],jt=rt[1],un=rt[2],Nn=rt[3],Bn=rt[4],yn=rt[5],Cn=rt[6],dr=rt[7],hr=(rt=rt[8])*Bn-yn*dr,Ji=ei*hr+jt*(Jr=-rt*Nn+yn*Cn)+un*(zi=dr*Nn-Bn*Cn))&&(Be[0]=hr*(Ji=1/Ji),Be[1]=(-rt*jt+un*dr)*Ji,Be[2]=(yn*jt-un*Bn)*Ji,Be[3]=Jr*Ji,Be[4]=(rt*ei-un*Cn)*Ji,Be[5]=(-yn*ei+un*Nn)*Ji,Be[6]=zi*Ji,Be[7]=(-dr*ei+jt*Cn)*Ji,Be[8]=(Bn*ei-jt*Nn)*Ji),function(oo){var Wr,Eo,ci,xo,Wi,oo=[oo[0],oo[1],1];return ci=Hi,xo=(Eo=Wr=oo)[0],Wi=Eo[1],Eo=Eo[2],Wr[0]=xo*ci[0]+Wi*ci[3]+Eo*ci[6],Wr[1]=xo*ci[1]+Wi*ci[4]+Eo*ci[7],Wr[2]=xo*ci[2]+Wi*ci[5]+Eo*ci[8],[oo[0],oo[1]]}},Fe=Ro;function Ro(Be){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:yr,translate:Me,custom:qn,matrix:Pe,polar:Te,transpose:Ue,scale:Qn,"shear.x":Vr,"shear.y":pr,reflect:ot,"reflect.x":wt,"reflect.y":$t,rotate:vn,helix:Et,parallel:Kt,fisheye:hi,"fisheye.x":Sr,"fisheye.y":Ti,"fisheye.circular":ai},this.update(Be)}$o.prototype.update=function(Be){this.options=me({},this.options,Be),this.recoordinate()},$o.prototype.clone=function(){return new $o(this.options)},$o.prototype.getOptions=function(){return this.options},$o.prototype.clear=function(){this.update({transformations:[]})},$o.prototype.getSize=function(){var Be=this.options;return[Be.width,Be.height,Be.depth]},$o.prototype.getCenter=function(){var Be=this.options,rt=Be.x,jt=Be.y,un=Be.z;return[(2*rt+Be.width)/2,(2*jt+Be.height)/2,(2*un+Be.depth)/2]},$o.prototype.transform=function(){for(var Be=[],rt=0;rt<arguments.length;rt++)Be[rt]=arguments[rt];var jt=this.options.transformations;return this.update({transformations:E(E([],G(jt),!1),[E([],G(Be),!1)],!1)}),this},$o.prototype.map=function(Be){return this.output(Be)},$o.prototype.invert=function(Be){return this.input(Be)},$o.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},$o.prototype.compose=function(Be){function rt(Ao,bs){var ma;Cn.push((bs=bs===void 0?!0:bs)?(ma=Ao,function(ta){for(var vs=[],ms=0;ms<ta.length-1;ms+=3){var At=[ta[ms],ta[ms+1],ta[ms+2]],At=ma(At);vs.push.apply(vs,E([],G(At),!1))}return vs}):Ao)}var jt,un,Nn=(Be=Be===void 0?!1:Be)?E([],G(this.options.transformations),!1).reverse():this.options.transformations,Bn=Be?function(Ao){return Ao.untransform}:function(Ao){return Ao.transform},yn=[],Cn=[];try{for(var dr=q(Nn),hr=dr.next();!hr.done;hr=dr.next()){var Jr,zi,Ji,ei,Hi,Ii,Wr,Eo,ci=G(hr.value),xo=ci[0],Wi=ci.slice(1),oo=this.transformers[xo];oo&&(zi=(Jr=this.options).x,Ji=Jr.y,ei=Jr.z,Hi=Jr.width,Ii=Jr.height,Wr=Jr.depth,dt(Eo=oo(E([],G(Wi),!1),zi,Ji,ei,Hi,Ii,Wr))?yn.push(Eo):(yn.length&&(rt(this.createMatrixTransform(yn,Be)),yn.splice(0,yn.length)),rt(Bn(Eo)||Re,!0)))}}catch(Ao){jt={error:Ao}}finally{try{hr&&!hr.done&&(un=dr.return)&&un.call(dr)}finally{if(jt)throw jt.error}}return yn.length&&rt(this.createMatrixTransform(yn,Be)),Ot.apply(void 0,E([],G(Cn),!1))},$o.prototype.createMatrixTransform=function(Be,rt){var jt,un,Nn,Bn,yn,Cn,dr,hr,Jr,zi,Ji,ei,Hi,Ii,Wr,Eo,ci,xo,Wi,oo,Ao,bs,ma,ta,vs,ms,At,Gt,jn=et();return rt&&Be.reverse(),Be.forEach(function(Lr){return Je(jn,jn,Lr)}),rt&&(rt=Be=jn,(Gt=new le(16))[0]=rt[0],Gt[1]=rt[1],Gt[2]=rt[2],Gt[3]=rt[3],Gt[4]=rt[4],Gt[5]=rt[5],Gt[6]=rt[6],Gt[7]=rt[7],Gt[8]=rt[8],Gt[9]=rt[9],Gt[10]=rt[10],Gt[11]=rt[11],Gt[12]=rt[12],Gt[13]=rt[13],Gt[14]=rt[14],Gt[15]=rt[15],Gt=(rt=Gt)[0],jt=rt[1],un=rt[2],Nn=rt[3],Bn=rt[4],yn=rt[5],Cn=rt[6],dr=rt[7],hr=rt[8],Jr=rt[9],zi=rt[10],Ji=rt[11],ei=rt[12],Hi=rt[13],Ii=rt[14],rt=rt[15],At=(Wr=Gt*yn-jt*Bn)*(ms=zi*rt-Ji*Ii)-(Eo=Gt*Cn-un*Bn)*(vs=Jr*rt-Ji*Hi)+(ci=Gt*dr-Nn*Bn)*(ta=Jr*Ii-zi*Hi)+(xo=jt*Cn-un*yn)*(ma=hr*rt-Ji*ei)-(Wi=jt*dr-Nn*yn)*(bs=hr*Ii-zi*ei)+(oo=un*dr-Nn*Cn)*(Ao=hr*Hi-Jr*ei))&&(Be[0]=(yn*ms-Cn*vs+dr*ta)*(At=1/At),Be[1]=(un*vs-jt*ms-Nn*ta)*At,Be[2]=(Hi*oo-Ii*Wi+rt*xo)*At,Be[3]=(zi*Wi-Jr*oo-Ji*xo)*At,Be[4]=(Cn*ma-Bn*ms-dr*bs)*At,Be[5]=(Gt*ms-un*ma+Nn*bs)*At,Be[6]=(Ii*ci-ei*oo-rt*Eo)*At,Be[7]=(hr*oo-zi*ci+Ji*Eo)*At,Be[8]=(Bn*vs-yn*ma+dr*Ao)*At,Be[9]=(jt*ma-Gt*vs-Nn*Ao)*At,Be[10]=(ei*Wi-Hi*ci+rt*Wr)*At,Be[11]=(Jr*ci-hr*Wi-Ji*Wr)*At,Be[12]=(yn*bs-Bn*ta-Cn*Ao)*At,Be[13]=(Gt*ta-jt*bs+un*Ao)*At,Be[14]=(Hi*Eo-ei*xo-Ii*Wr)*At,Be[15]=(hr*xo-Jr*Eo+zi*Wr)*At),function(hl){var Oi,Gi,Jo,Gs,Ds,zs,hl=[hl[0],hl[1],hl[2],1];return Jo=jn,Gs=(Gi=Oi=hl)[0],Ds=Gi[1],zs=Gi[2],Gi=Gi[3],Oi[0]=Jo[0]*Gs+Jo[4]*Ds+Jo[8]*zs+Jo[12]*Gi,Oi[1]=Jo[1]*Gs+Jo[5]*Ds+Jo[9]*zs+Jo[13]*Gi,Oi[2]=Jo[2]*Gs+Jo[6]*Ds+Jo[10]*zs+Jo[14]*Gi,Oi[3]=Jo[3]*Gs+Jo[7]*Ds+Jo[11]*zs+Jo[15]*Gi,[hl[0],hl[1],hl[2]]}},It=$o;function $o(Be){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:Mo,translate3D:xi,scale3D:va,transpose3D:ea},this.update(Be)}D.Coordinate=Fe,D.Coordinate3D=It,Object.defineProperty(D,"__esModule",{value:!0})})},90857:function(mt){"use strict";var W=Object.prototype.hasOwnProperty,D="~";function q(){}Object.create&&(q.prototype=Object.create(null),new q().__proto__||(D=!1));function G(ue,ce,xe){this.fn=ue,this.context=ce,this.once=xe||!1}function E(ue,ce,xe,oe,Ve){if(typeof xe!="function")throw new TypeError("The listener must be a function");var re=new G(xe,oe||ue,Ve),me=D?D+ce:ce;return ue._events[me]?ue._events[me].fn?ue._events[me]=[ue._events[me],re]:ue._events[me].push(re):(ue._events[me]=re,ue._eventsCount++),ue}function he(ue,ce){--ue._eventsCount===0?ue._events=new q:delete ue._events[ce]}function ne(){this._events=new q,this._eventsCount=0}ne.prototype.eventNames=function(){var ce=[],xe,oe;if(this._eventsCount===0)return ce;for(oe in xe=this._events)W.call(xe,oe)&&ce.push(D?oe.slice(1):oe);return Object.getOwnPropertySymbols?ce.concat(Object.getOwnPropertySymbols(xe)):ce},ne.prototype.listeners=function(ce){var xe=D?D+ce:ce,oe=this._events[xe];if(!oe)return[];if(oe.fn)return[oe.fn];for(var Ve=0,re=oe.length,me=new Array(re);Ve<re;Ve++)me[Ve]=oe[Ve].fn;return me},ne.prototype.listenerCount=function(ce){var xe=D?D+ce:ce,oe=this._events[xe];return oe?oe.fn?1:oe.length:0},ne.prototype.emit=function(ce,xe,oe,Ve,re,me){var Re=D?D+ce:ce;if(!this._events[Re])return!1;var Y=this._events[Re],le=arguments.length,K,_e;if(Y.fn){switch(Y.once&&this.removeListener(ce,Y.fn,void 0,!0),le){case 1:return Y.fn.call(Y.context),!0;case 2:return Y.fn.call(Y.context,xe),!0;case 3:return Y.fn.call(Y.context,xe,oe),!0;case 4:return Y.fn.call(Y.context,xe,oe,Ve),!0;case 5:return Y.fn.call(Y.context,xe,oe,Ve,re),!0;case 6:return Y.fn.call(Y.context,xe,oe,Ve,re,me),!0}for(_e=1,K=new Array(le-1);_e<le;_e++)K[_e-1]=arguments[_e];Y.fn.apply(Y.context,K)}else{var et=Y.length,Je;for(_e=0;_e<et;_e++)switch(Y[_e].once&&this.removeListener(ce,Y[_e].fn,void 0,!0),le){case 1:Y[_e].fn.call(Y[_e].context);break;case 2:Y[_e].fn.call(Y[_e].context,xe);break;case 3:Y[_e].fn.call(Y[_e].context,xe,oe);break;case 4:Y[_e].fn.call(Y[_e].context,xe,oe,Ve);break;default:if(!K)for(Je=1,K=new Array(le-1);Je<le;Je++)K[Je-1]=arguments[Je];Y[_e].fn.apply(Y[_e].context,K)}}return!0},ne.prototype.on=function(ce,xe,oe){return E(this,ce,xe,oe,!1)},ne.prototype.once=function(ce,xe,oe){return E(this,ce,xe,oe,!0)},ne.prototype.removeListener=function(ce,xe,oe,Ve){var re=D?D+ce:ce;if(!this._events[re])return this;if(!xe)return he(this,re),this;var me=this._events[re];if(me.fn)me.fn===xe&&(!Ve||me.once)&&(!oe||me.context===oe)&&he(this,re);else{for(var Re=0,Y=[],le=me.length;Re<le;Re++)(me[Re].fn!==xe||Ve&&!me[Re].once||oe&&me[Re].context!==oe)&&Y.push(me[Re]);Y.length?this._events[re]=Y.length===1?Y[0]:Y:he(this,re)}return this},ne.prototype.removeAllListeners=function(ce){var xe;return ce?(xe=D?D+ce:ce,this._events[xe]&&he(this,xe)):(this._events=new q,this._eventsCount=0),this},ne.prototype.off=ne.prototype.removeListener,ne.prototype.addListener=ne.prototype.on,ne.prefixed=D,ne.EventEmitter=ne,mt.exports=ne},38554:function(mt){"use strict";var W=Object.prototype.hasOwnProperty,D="~";function q(){}Object.create&&(q.prototype=Object.create(null),new q().__proto__||(D=!1));function G(ue,ce,xe){this.fn=ue,this.context=ce,this.once=xe||!1}function E(ue,ce,xe,oe,Ve){if(typeof xe!="function")throw new TypeError("The listener must be a function");var re=new G(xe,oe||ue,Ve),me=D?D+ce:ce;return ue._events[me]?ue._events[me].fn?ue._events[me]=[ue._events[me],re]:ue._events[me].push(re):(ue._events[me]=re,ue._eventsCount++),ue}function he(ue,ce){--ue._eventsCount===0?ue._events=new q:delete ue._events[ce]}function ne(){this._events=new q,this._eventsCount=0}ne.prototype.eventNames=function(){var ce=[],xe,oe;if(this._eventsCount===0)return ce;for(oe in xe=this._events)W.call(xe,oe)&&ce.push(D?oe.slice(1):oe);return Object.getOwnPropertySymbols?ce.concat(Object.getOwnPropertySymbols(xe)):ce},ne.prototype.listeners=function(ce){var xe=D?D+ce:ce,oe=this._events[xe];if(!oe)return[];if(oe.fn)return[oe.fn];for(var Ve=0,re=oe.length,me=new Array(re);Ve<re;Ve++)me[Ve]=oe[Ve].fn;return me},ne.prototype.listenerCount=function(ce){var xe=D?D+ce:ce,oe=this._events[xe];return oe?oe.fn?1:oe.length:0},ne.prototype.emit=function(ce,xe,oe,Ve,re,me){var Re=D?D+ce:ce;if(!this._events[Re])return!1;var Y=this._events[Re],le=arguments.length,K,_e;if(Y.fn){switch(Y.once&&this.removeListener(ce,Y.fn,void 0,!0),le){case 1:return Y.fn.call(Y.context),!0;case 2:return Y.fn.call(Y.context,xe),!0;case 3:return Y.fn.call(Y.context,xe,oe),!0;case 4:return Y.fn.call(Y.context,xe,oe,Ve),!0;case 5:return Y.fn.call(Y.context,xe,oe,Ve,re),!0;case 6:return Y.fn.call(Y.context,xe,oe,Ve,re,me),!0}for(_e=1,K=new Array(le-1);_e<le;_e++)K[_e-1]=arguments[_e];Y.fn.apply(Y.context,K)}else{var et=Y.length,Je;for(_e=0;_e<et;_e++)switch(Y[_e].once&&this.removeListener(ce,Y[_e].fn,void 0,!0),le){case 1:Y[_e].fn.call(Y[_e].context);break;case 2:Y[_e].fn.call(Y[_e].context,xe);break;case 3:Y[_e].fn.call(Y[_e].context,xe,oe);break;case 4:Y[_e].fn.call(Y[_e].context,xe,oe,Ve);break;default:if(!K)for(Je=1,K=new Array(le-1);Je<le;Je++)K[Je-1]=arguments[Je];Y[_e].fn.apply(Y[_e].context,K)}}return!0},ne.prototype.on=function(ce,xe,oe){return E(this,ce,xe,oe,!1)},ne.prototype.once=function(ce,xe,oe){return E(this,ce,xe,oe,!0)},ne.prototype.removeListener=function(ce,xe,oe,Ve){var re=D?D+ce:ce;if(!this._events[re])return this;if(!xe)return he(this,re),this;var me=this._events[re];if(me.fn)me.fn===xe&&(!Ve||me.once)&&(!oe||me.context===oe)&&he(this,re);else{for(var Re=0,Y=[],le=me.length;Re<le;Re++)(me[Re].fn!==xe||Ve&&!me[Re].once||oe&&me[Re].context!==oe)&&Y.push(me[Re]);Y.length?this._events[re]=Y.length===1?Y[0]:Y:he(this,re)}return this},ne.prototype.removeAllListeners=function(ce){var xe;return ce?(xe=D?D+ce:ce,this._events[xe]&&he(this,xe)):(this._events=new q,this._eventsCount=0),this},ne.prototype.off=ne.prototype.removeListener,ne.prototype.addListener=ne.prototype.on,ne.prefixed=D,ne.EventEmitter=ne,mt.exports=ne},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(mt){try{let oe=function(){ne||(ne=!0,E())},Ve=function(){try{he.documentElement.doScroll("left")}catch(re){return void setTimeout(Ve,50)}oe()};var ce=oe,xe=Ve,D=(D=document.getElementsByTagName("script"))[D.length-1],W=D.getAttribute("data-injectcss"),D=D.getAttribute("data-disable-injectsvg");if(!D){var q,G,E,he,ne,ue=function(re,me){me.parentNode.insertBefore(re,me)};if(W&&!mt.__iconfont__svg__cssinject__){mt.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(re){console&&console.log(re)}}q=function(){var re,me=document.createElement("div");me.innerHTML=mt._iconfont_svg_string_3580659,(me=me.getElementsByTagName("svg")[0])&&(me.setAttribute("aria-hidden","true"),me.style.position="absolute",me.style.width=0,me.style.height=0,me.style.overflow="hidden",me=me,(re=document.body).firstChild?ue(me,re.firstChild):re.appendChild(me))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(q,0):(G=function(){document.removeEventListener("DOMContentLoaded",G,!1),q()},document.addEventListener("DOMContentLoaded",G,!1)):document.attachEvent&&(E=q,he=mt.document,ne=!1,Ve(),he.onreadystatechange=function(){he.readyState=="complete"&&(he.onreadystatechange=null,oe())})}}catch(oe){}}(window)},39827:function(mt,W,D){"use strict";D.d(W,{GC:function(){return U},h0:function(){return on},lv:function(){return $n},lo:function(){return Ft},kw:function(){return Jt},Or:function(){return ln},KD:function(){return ke},I9:function(){return pe},lE:function(){return kt},d:function(){return nr},n3:function(){return xh},vY:function(){return nt},P7:function(){return bh},yn:function(){return zt},ee:function(){return Vt},v2:function(){return Cn},e7:function(){return ul},Hp:function(){return Od},gl:function(){return ne},cO:function(){return Ad},Vb:function(){return le}});var q=D(1413),G=D(4942),E=D(8543);let he=function(ie){return ie.Normal="normal",ie.PostProcessing="post-processing",ie}({}),ne=function(ie){return ie[ie.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",ie[ie.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",ie[ie.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",ie[ie.POINTS=0]="POINTS",ie[ie.LINES=1]="LINES",ie[ie.LINE_LOOP=2]="LINE_LOOP",ie[ie.LINE_STRIP=3]="LINE_STRIP",ie[ie.TRIANGLES=4]="TRIANGLES",ie[ie.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",ie[ie.TRIANGLE_FAN=6]="TRIANGLE_FAN",ie[ie.ZERO=0]="ZERO",ie[ie.ONE=1]="ONE",ie[ie.SRC_COLOR=768]="SRC_COLOR",ie[ie.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",ie[ie.SRC_ALPHA=770]="SRC_ALPHA",ie[ie.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",ie[ie.DST_ALPHA=772]="DST_ALPHA",ie[ie.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",ie[ie.DST_COLOR=774]="DST_COLOR",ie[ie.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",ie[ie.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",ie[ie.FUNC_ADD=32774]="FUNC_ADD",ie[ie.BLEND_EQUATION=32777]="BLEND_EQUATION",ie[ie.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",ie[ie.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",ie[ie.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",ie[ie.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",ie[ie.MAX_EXT=32776]="MAX_EXT",ie[ie.MIN_EXT=32775]="MIN_EXT",ie[ie.BLEND_DST_RGB=32968]="BLEND_DST_RGB",ie[ie.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",ie[ie.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",ie[ie.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",ie[ie.CONSTANT_COLOR=32769]="CONSTANT_COLOR",ie[ie.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",ie[ie.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",ie[ie.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",ie[ie.BLEND_COLOR=32773]="BLEND_COLOR",ie[ie.ARRAY_BUFFER=34962]="ARRAY_BUFFER",ie[ie.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",ie[ie.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",ie[ie.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",ie[ie.STREAM_DRAW=35040]="STREAM_DRAW",ie[ie.STATIC_DRAW=35044]="STATIC_DRAW",ie[ie.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",ie[ie.BUFFER_SIZE=34660]="BUFFER_SIZE",ie[ie.BUFFER_USAGE=34661]="BUFFER_USAGE",ie[ie.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",ie[ie.FRONT=1028]="FRONT",ie[ie.BACK=1029]="BACK",ie[ie.FRONT_AND_BACK=1032]="FRONT_AND_BACK",ie[ie.CULL_FACE=2884]="CULL_FACE",ie[ie.BLEND=3042]="BLEND",ie[ie.DITHER=3024]="DITHER",ie[ie.STENCIL_TEST=2960]="STENCIL_TEST",ie[ie.DEPTH_TEST=2929]="DEPTH_TEST",ie[ie.SCISSOR_TEST=3089]="SCISSOR_TEST",ie[ie.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",ie[ie.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",ie[ie.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",ie[ie.NO_ERROR=0]="NO_ERROR",ie[ie.INVALID_ENUM=1280]="INVALID_ENUM",ie[ie.INVALID_VALUE=1281]="INVALID_VALUE",ie[ie.INVALID_OPERATION=1282]="INVALID_OPERATION",ie[ie.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",ie[ie.CW=2304]="CW",ie[ie.CCW=2305]="CCW",ie[ie.LINE_WIDTH=2849]="LINE_WIDTH",ie[ie.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",ie[ie.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",ie[ie.CULL_FACE_MODE=2885]="CULL_FACE_MODE",ie[ie.FRONT_FACE=2886]="FRONT_FACE",ie[ie.DEPTH_RANGE=2928]="DEPTH_RANGE",ie[ie.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",ie[ie.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",ie[ie.DEPTH_FUNC=2932]="DEPTH_FUNC",ie[ie.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",ie[ie.STENCIL_FUNC=2962]="STENCIL_FUNC",ie[ie.STENCIL_FAIL=2964]="STENCIL_FAIL",ie[ie.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",ie[ie.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",ie[ie.STENCIL_REF=2967]="STENCIL_REF",ie[ie.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",ie[ie.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",ie[ie.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",ie[ie.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",ie[ie.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",ie[ie.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",ie[ie.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",ie[ie.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",ie[ie.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",ie[ie.VIEWPORT=2978]="VIEWPORT",ie[ie.SCISSOR_BOX=3088]="SCISSOR_BOX",ie[ie.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",ie[ie.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",ie[ie.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",ie[ie.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",ie[ie.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",ie[ie.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",ie[ie.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",ie[ie.RED_BITS=3410]="RED_BITS",ie[ie.GREEN_BITS=3411]="GREEN_BITS",ie[ie.BLUE_BITS=3412]="BLUE_BITS",ie[ie.ALPHA_BITS=3413]="ALPHA_BITS",ie[ie.DEPTH_BITS=3414]="DEPTH_BITS",ie[ie.STENCIL_BITS=3415]="STENCIL_BITS",ie[ie.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",ie[ie.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",ie[ie.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",ie[ie.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",ie[ie.SAMPLES=32937]="SAMPLES",ie[ie.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",ie[ie.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",ie[ie.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",ie[ie.DONT_CARE=4352]="DONT_CARE",ie[ie.FASTEST=4353]="FASTEST",ie[ie.NICEST=4354]="NICEST",ie[ie.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",ie[ie.BYTE=5120]="BYTE",ie[ie.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ie[ie.SHORT=5122]="SHORT",ie[ie.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ie[ie.INT=5124]="INT",ie[ie.UNSIGNED_INT=5125]="UNSIGNED_INT",ie[ie.FLOAT=5126]="FLOAT",ie[ie.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",ie[ie.ALPHA=6406]="ALPHA",ie[ie.RGB=6407]="RGB",ie[ie.RGBA=6408]="RGBA",ie[ie.LUMINANCE=6409]="LUMINANCE",ie[ie.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",ie[ie.RED=6403]="RED",ie[ie.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",ie[ie.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",ie[ie.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",ie[ie.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",ie[ie.VERTEX_SHADER=35633]="VERTEX_SHADER",ie[ie.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",ie[ie.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",ie[ie.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",ie[ie.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",ie[ie.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",ie[ie.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",ie[ie.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",ie[ie.SHADER_TYPE=35663]="SHADER_TYPE",ie[ie.DELETE_STATUS=35712]="DELETE_STATUS",ie[ie.LINK_STATUS=35714]="LINK_STATUS",ie[ie.VALIDATE_STATUS=35715]="VALIDATE_STATUS",ie[ie.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",ie[ie.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",ie[ie.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",ie[ie.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",ie[ie.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",ie[ie.NEVER=512]="NEVER",ie[ie.LESS=513]="LESS",ie[ie.EQUAL=514]="EQUAL",ie[ie.LEQUAL=515]="LEQUAL",ie[ie.GREATER=516]="GREATER",ie[ie.NOTEQUAL=517]="NOTEQUAL",ie[ie.GEQUAL=518]="GEQUAL",ie[ie.ALWAYS=519]="ALWAYS",ie[ie.KEEP=7680]="KEEP",ie[ie.REPLACE=7681]="REPLACE",ie[ie.INCR=7682]="INCR",ie[ie.DECR=7683]="DECR",ie[ie.INVERT=5386]="INVERT",ie[ie.INCR_WRAP=34055]="INCR_WRAP",ie[ie.DECR_WRAP=34056]="DECR_WRAP",ie[ie.VENDOR=7936]="VENDOR",ie[ie.RENDERER=7937]="RENDERER",ie[ie.VERSION=7938]="VERSION",ie[ie.NEAREST=9728]="NEAREST",ie[ie.LINEAR=9729]="LINEAR",ie[ie.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",ie[ie.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",ie[ie.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",ie[ie.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",ie[ie.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",ie[ie.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",ie[ie.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",ie[ie.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",ie[ie.TEXTURE_2D=3553]="TEXTURE_2D",ie[ie.TEXTURE=5890]="TEXTURE",ie[ie.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ie[ie.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",ie[ie.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ie[ie.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ie[ie.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ie[ie.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ie[ie.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ie[ie.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",ie[ie.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",ie[ie.TEXTURE0=33984]="TEXTURE0",ie[ie.TEXTURE1=33985]="TEXTURE1",ie[ie.TEXTURE2=33986]="TEXTURE2",ie[ie.TEXTURE3=33987]="TEXTURE3",ie[ie.TEXTURE4=33988]="TEXTURE4",ie[ie.TEXTURE5=33989]="TEXTURE5",ie[ie.TEXTURE6=33990]="TEXTURE6",ie[ie.TEXTURE7=33991]="TEXTURE7",ie[ie.TEXTURE8=33992]="TEXTURE8",ie[ie.TEXTURE9=33993]="TEXTURE9",ie[ie.TEXTURE10=33994]="TEXTURE10",ie[ie.TEXTURE11=33995]="TEXTURE11",ie[ie.TEXTURE12=33996]="TEXTURE12",ie[ie.TEXTURE13=33997]="TEXTURE13",ie[ie.TEXTURE14=33998]="TEXTURE14",ie[ie.TEXTURE15=33999]="TEXTURE15",ie[ie.TEXTURE16=34e3]="TEXTURE16",ie[ie.TEXTURE17=34001]="TEXTURE17",ie[ie.TEXTURE18=34002]="TEXTURE18",ie[ie.TEXTURE19=34003]="TEXTURE19",ie[ie.TEXTURE20=34004]="TEXTURE20",ie[ie.TEXTURE21=34005]="TEXTURE21",ie[ie.TEXTURE22=34006]="TEXTURE22",ie[ie.TEXTURE23=34007]="TEXTURE23",ie[ie.TEXTURE24=34008]="TEXTURE24",ie[ie.TEXTURE25=34009]="TEXTURE25",ie[ie.TEXTURE26=34010]="TEXTURE26",ie[ie.TEXTURE27=34011]="TEXTURE27",ie[ie.TEXTURE28=34012]="TEXTURE28",ie[ie.TEXTURE29=34013]="TEXTURE29",ie[ie.TEXTURE30=34014]="TEXTURE30",ie[ie.TEXTURE31=34015]="TEXTURE31",ie[ie.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",ie[ie.REPEAT=10497]="REPEAT",ie[ie.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",ie[ie.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",ie[ie.FLOAT_VEC2=35664]="FLOAT_VEC2",ie[ie.FLOAT_VEC3=35665]="FLOAT_VEC3",ie[ie.FLOAT_VEC4=35666]="FLOAT_VEC4",ie[ie.INT_VEC2=35667]="INT_VEC2",ie[ie.INT_VEC3=35668]="INT_VEC3",ie[ie.INT_VEC4=35669]="INT_VEC4",ie[ie.BOOL=35670]="BOOL",ie[ie.BOOL_VEC2=35671]="BOOL_VEC2",ie[ie.BOOL_VEC3=35672]="BOOL_VEC3",ie[ie.BOOL_VEC4=35673]="BOOL_VEC4",ie[ie.FLOAT_MAT2=35674]="FLOAT_MAT2",ie[ie.FLOAT_MAT3=35675]="FLOAT_MAT3",ie[ie.FLOAT_MAT4=35676]="FLOAT_MAT4",ie[ie.SAMPLER_2D=35678]="SAMPLER_2D",ie[ie.SAMPLER_CUBE=35680]="SAMPLER_CUBE",ie[ie.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",ie[ie.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",ie[ie.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",ie[ie.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",ie[ie.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",ie[ie.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",ie[ie.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",ie[ie.COMPILE_STATUS=35713]="COMPILE_STATUS",ie[ie.LOW_FLOAT=36336]="LOW_FLOAT",ie[ie.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",ie[ie.HIGH_FLOAT=36338]="HIGH_FLOAT",ie[ie.LOW_INT=36339]="LOW_INT",ie[ie.MEDIUM_INT=36340]="MEDIUM_INT",ie[ie.HIGH_INT=36341]="HIGH_INT",ie[ie.FRAMEBUFFER=36160]="FRAMEBUFFER",ie[ie.RENDERBUFFER=36161]="RENDERBUFFER",ie[ie.RGBA4=32854]="RGBA4",ie[ie.RGB5_A1=32855]="RGB5_A1",ie[ie.RGB565=36194]="RGB565",ie[ie.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",ie[ie.STENCIL_INDEX=6401]="STENCIL_INDEX",ie[ie.STENCIL_INDEX8=36168]="STENCIL_INDEX8",ie[ie.DEPTH_STENCIL=34041]="DEPTH_STENCIL",ie[ie.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",ie[ie.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",ie[ie.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",ie[ie.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",ie[ie.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",ie[ie.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",ie[ie.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",ie[ie.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",ie[ie.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",ie[ie.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",ie[ie.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",ie[ie.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",ie[ie.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",ie[ie.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",ie[ie.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",ie[ie.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",ie[ie.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",ie[ie.NONE=0]="NONE",ie[ie.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",ie[ie.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",ie[ie.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",ie[ie.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",ie[ie.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",ie[ie.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",ie[ie.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",ie[ie.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",ie[ie.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",ie[ie.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",ie[ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",ie[ie.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",ie[ie.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",ie[ie.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",ie}({});const ue=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{camelCase:ce,isNil:xe,upperFirst:oe}=E.lodashUtil;class Ve{constructor(){(0,G.Z)(this,"shaderModuleService",void 0),(0,G.Z)(this,"rendererService",void 0),(0,G.Z)(this,"config",void 0),(0,G.Z)(this,"quad",ue),(0,G.Z)(this,"enabled",!0),(0,G.Z)(this,"renderToScreen",!1),(0,G.Z)(this,"model",void 0),(0,G.Z)(this,"name",void 0),(0,G.Z)(this,"optionsToUpdate",{})}getName(){return this.name}setName(Se){this.name=Se}getType(){return he.PostProcessing}init(Se,tt){this.config=tt,this.rendererService=Se.getContainer().rendererService,this.shaderModuleService=Se.getContainer().shaderModuleService;const{createAttribute:cn,createBuffer:Q,createModel:rr}=this.rendererService,{vs:Rr,fs:Li,uniforms:Ui}=this.setupShaders();this.model=rr({vs:Rr,fs:Li,attributes:{a_Position:cn({buffer:Q({data:[-4,-4,4,-4,0,4],type:ne.FLOAT}),size:2})},uniforms:(0,q.Z)((0,q.Z)({u_Texture:null},Ui),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(Se,tt){const cn=Se.multiPassRenderer.getPostProcessor(),{useFramebuffer:Q,getViewportSize:rr,clear:Rr}=this.rendererService,{width:Li,height:Ui}=rr();Q(this.renderToScreen?null:cn.getWriteFBO(),()=>{Rr({framebuffer:cn.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const so=(0,q.Z)({u_BloomFinal:0,u_Texture:cn.getReadFBO(),u_ViewportSize:[Li,Ui]},this.convertOptionsToUniforms(this.optionsToUpdate));tt&&(so.u_BloomFinal=1,so.u_Texture2=tt),this.model.draw({uniforms:so})})}isEnabled(){return this.enabled}setEnabled(Se){this.enabled=Se}setRenderToScreen(Se){this.renderToScreen=Se}updateOptions(Se){this.optionsToUpdate=(0,q.Z)((0,q.Z)({},this.optionsToUpdate),Se)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(Se){const tt={};return Object.keys(Se).forEach(cn=>{xe(Se[cn])||(tt[`u_${oe(ce(cn))}`]=Se[cn])}),tt}}function re(ie){let Se=0;switch(ie){case"vec2":case"ivec2":Se=2;break;case"vec3":case"ivec3":Se=3;break;case"vec4":case"ivec4":case"mat2":Se=4;break;case"mat3":Se=9;break;case"mat4":Se=16;break;default:}return Se}const me=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Re(ie,Se=!1){const tt={};return ie=ie.replace(me,(cn,Q,rr)=>{const Rr=rr.split(":"),Li=Rr[0].trim();let Ui="";switch(Rr.length>1&&(Ui=Rr[1].trim()),Q){case"bool":Ui=Ui==="true";break;case"float":case"int":Ui=Number(Ui);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":Ui?Ui=Ui.replace("[","").replace("]","").split(",").reduce((so,uo)=>(so.push(Number(uo.trim())),so),[]):Ui=new Array(re(Q)).fill(0);break;default:}return tt[Li]=Ui,`${Se?"uniform ":""}${Q} ${Li};
`}),{content:ie,uniforms:tt}}function Y(ie){let{content:Se,uniforms:tt}=Re(ie,!0);return Se=Se.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(cn,Q,rr)=>{rr=rr.trim().replace(/^.*$/gm,Ui=>`uniform ${Ui}`);const{content:Rr,uniforms:Li}=Re(rr);return Object.assign(tt,Li),`${Q}{
${Rr}
};`}),{content:Se,uniforms:tt}}function le(ie){const Se={};return ie.replace(me,(tt,cn,Q)=>{const rr=Q.trim();return Se[rr]?"":(Se[rr]=!0,`uniform ${cn} ${rr};
`)})}const K=null;function _e(ie){return K.indexOf(ie)}const{clamp:et}=E.lodashUtil,Je=2,Ot=4,dt=64,bt=128,Me=256,we=512,je=8192,Ze=16384,ut=32768,Qt=null,De=131072,St=262144,Oe=524288,it=1048576,Ke=2097152,Xe=4194304,Pt=8388608,xt=16777216,Ie=null;function Wt(ie,Se){return ie=et(Math.floor(ie),0,255),Se=et(Math.floor(Se),0,255),256*ie+Se}function hn(ie){const{color:Se,radius:tt,tileX:cn,tileY:Q,shape:rr,opacity:Rr,stroke:Li,strokeWidth:Ui,strokeOpacity:so}=ie,uo=[],xa=[],Do=[],Ea=[Wt(Se[0],Se[1]),Wt(Se[2],Se[3])],ts=[Wt(Li[0],Li[1]),Wt(Li[2],Li[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(([da,Ta])=>{uo.push([...Ea,(da+1)*Pt+(Ta+1)*Ke+getShapeIndex(rr)*De+tt,(cn+512)*Oe+(Q+512)*dt]),xa.push([...ts,Ui,so]),Do.push([Rr,0,0,0])}),{packedBuffer:uo,packedBuffer2:xa,packedBuffer3:Do}}function Pn(ie,Se){if(ie===0&&!Se)return 0;if(ie===1&&Se)return 4294967295;const tt=Se?1:0,cn=Math.floor(ie*127);return cn*Ie+tt*xt+cn*De+tt*Qt+cn*we+tt*Me+cn*Je+tt}const $n={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let nr=function(ie){return ie.TOPRIGHT="topright",ie.TOPLEFT="topleft",ie.BOTTOMRIGHT="bottomright",ie.BOTTOMLEFT="bottomleft",ie.TOPCENTER="topcenter",ie.BOTTOMCENTER="bottomcenter",ie.LEFTCENTER="leftcenter",ie.RIGHTCENTER="rightcenter",ie.LEFTTOP="lefttop",ie.RIGHTTOP="righttop",ie.LEFTBOTTOM="leftbottom",ie.RIGHTBOTTOM="rightbottom",ie}({}),Ft=function(ie){return ie[ie.LNGLAT=1]="LNGLAT",ie[ie.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",ie[ie.VECTOR_TILE=3]="VECTOR_TILE",ie[ie.IDENTITY=4]="IDENTITY",ie[ie.METER_OFFSET=5]="METER_OFFSET",ie}({});const Jt={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"};var ln={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let Un=function(ie){return ie.Hover="hover",ie.Click="click",ie.Select="select",ie.Active="active",ie.Drag="drag",ie}({}),on=function(ie){return ie.normal="normal",ie.additive="additive",ie.subtractive="subtractive",ie.min="min",ie.max="max",ie.none="none",ie}({}),zt=function(ie){return ie.MULTIPLE="MULTIPLE",ie.SINGLE="SINGLE",ie}({}),kt=function(ie){return ie.AND="and",ie.OR="or",ie}({}),ke=function(ie){return ie.INIT="init",ie.UPDATE="update",ie}({}),nt=function(ie){return ie.LINEAR="linear",ie.SEQUENTIAL="sequential",ie.POWER="power",ie.LOG="log",ie.IDENTITY="identity",ie.TIME="time",ie.QUANTILE="quantile",ie.QUANTIZE="quantize",ie.THRESHOLD="threshold",ie.CAT="cat",ie.DIVERGING="diverging",ie.CUSTOM="threshold",ie}({}),Vt=function(ie){return ie.CONSTANT="constant",ie.VARIABLE="variable",ie}({}),U=function(ie){return ie[ie.Attribute=0]="Attribute",ie[ie.InstancedAttribute=1]="InstancedAttribute",ie[ie.Uniform=2]="Uniform",ie}({});const pe=["mapload","mapchange","mapAfterFrameChange"];var ct=D(49296),de=D.n(ct),Yt=D(26729),sn=D.n(Yt);const pn=30;function Dn({characterSet:ie,getFontWidth:Se,fontHeight:tt,buffer:cn,maxCanvasWidth:Q,mapping:rr={},xOffset:Rr=0,yOffset:Li=0}){let Ui=0,so=Rr;Array.from(ie).forEach((xa,Do)=>{if(!rr[xa]){const Ea=Se(xa,Do);so+pn>Q&&(so=0,Ui++),rr[xa]={x:so,y:Li+Ui*pn,width:pn,height:pn,advance:Ea},so+=pn}});const uo=tt+cn*2;return{mapping:rr,xOffset:so,yOffset:Li+Ui*uo,canvasHeight:dn(Li+(Ui+1)*uo)}}function Wn(ie,Se,tt){let cn=0,Q=0,rr=0,Rr=[];const Li={};for(const so of ie)if(!Li[so.id]){const{size:uo}=so;cn+uo+Se>tt&&(Xn(Li,Rr,Q),cn=0,Q=rr+Q+Se,rr=0,Rr=[]),Rr.push({icon:so,xOffset:cn}),cn=cn+uo+Se,rr=Math.max(rr,uo)}Rr.length>0&&Xn(Li,Rr,Q);const Ui=dn(rr+Q+Se);return{mapping:Li,canvasHeight:Ui}}function Xn(ie,Se,tt){for(const cn of Se){const{icon:Q,xOffset:rr}=cn;ie[Q.id]=(0,q.Z)((0,q.Z)({},Q),{},{x:rr,y:tt,image:Q.image,width:Q.width,height:Q.height})}}function dn(ie){return Math.pow(2,Math.ceil(Math.log2(ie)))}const _t=Yn(),Rt="sans-serif",wn="normal",In=24,Zn=3,vt=.25,Ee=8,Fe=1024,st=1,It=1,Mt=3,En=null;function Yn(){const ie=[];for(let Se=32;Se<128;Se++)ie.push(String.fromCharCode(Se));return ie}function yr(ie,Se,tt,cn){ie.font=`${cn} ${tt}px ${Se}`,ie.fillStyle="black",ie.textBaseline="middle"}function qn(ie,Se){for(let tt=0;tt<ie.length;tt++)Se.data[4*tt+3]=ie[tt]}class Pe extends Yt.EventEmitter{constructor(...Se){super(...Se),(0,G.Z)(this,"fontAtlas",void 0),(0,G.Z)(this,"iconFontMap",void 0),(0,G.Z)(this,"iconFontGlyphs",{}),(0,G.Z)(this,"fontOptions",void 0),(0,G.Z)(this,"key",void 0),(0,G.Z)(this,"cache",new E.z6(Mt))}get scale(){return It}get canvas(){const Se=this.cache.get(this.key);return Se&&Se.data}get mapping(){const Se=this.cache.get(this.key);return Se&&Se.mapping||{}}getCanvasByKey(Se){const tt=this.cache.get(Se);return tt&&tt.data}getMappingByKey(Se){const tt=this.cache.get(Se);return tt&&tt.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:Rt,fontWeight:wn,characterSet:_t,fontSize:In,buffer:Zn,sdf:!0,cutoff:vt,radius:Ee,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(Se){Se.forEach(tt=>{this.iconFontGlyphs[tt.name]=tt.unicode})}addIconFont(Se,tt){this.iconFontMap.set(Se,tt)}getIconFontKey(Se){return this.iconFontMap.get(Se)||Se}getGlyph(Se){return this.iconFontGlyphs[Se]?String.fromCharCode(parseInt(this.iconFontGlyphs[Se],16)):""}setFontOptions(Se){this.fontOptions=(0,q.Z)((0,q.Z)({},this.fontOptions),Se),this.key=this.getKey();const tt=this.getNewChars(this.key,this.fontOptions.characterSet),cn=this.cache.get(this.key);if(cn&&tt.length===0)return;const Q=this.generateFontAtlas(this.key,tt,cn);this.fontAtlas=Q,this.cache.set(this.key,Q)}addFontFace(Se,tt){const cn=document.createElement("style");cn.type="text/css",cn.innerText=`
        @font-face{
            font-family: '${Se}';
            src: url('${tt}') format('woff2'),
            url('${tt}') format('woff'),
            url('${tt}') format('truetype');
        }`,cn.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${Se}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:Se})})}catch(Q){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(Q)}},document.getElementsByTagName("head")[0].appendChild(cn)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(Se,tt,cn){const{fontFamily:Q,fontWeight:rr,fontSize:Rr,buffer:Li,sdf:Ui,radius:so,cutoff:uo,iconfont:xa}=this.fontOptions;let Do=cn&&cn.data;Do||(Do=window.document.createElement("canvas"),Do.width=Fe);const Ea=Do.getContext("2d",{willReadFrequently:!0});yr(Ea,Q,Rr,rr);const{mapping:ts,canvasHeight:da,xOffset:Ta,yOffset:Rs}=Dn((0,q.Z)({getFontWidth:Ha=>Ea.measureText(Ha).width,fontHeight:Rr*It,buffer:Li,characterSet:tt,maxCanvasWidth:Fe},cn&&{mapping:cn.mapping,xOffset:cn.xOffset,yOffset:cn.yOffset})),Ba=Ea.getImageData(0,0,Do.width,Do.height);if(Do.height=da,Ea.putImageData(Ba,0,0),yr(Ea,Q,Rr,rr),Ui){const Ha=new(de())(Rr,Li,so,uo,Q,rr),fs=Ea.getImageData(0,0,Ha.size,Ha.size);for(const tl of tt){if(xa){const ja=String.fromCharCode(parseInt(tl.replace("&#x","").replace(";",""),16)),Cu=Ha.draw(ja);qn(Cu,fs)}else qn(Ha.draw(tl),fs);Ea.putImageData(fs,ts[tl].x,ts[tl].y)}}else for(const Ha of tt)Ea.fillText(Ha,ts[Ha].x,ts[Ha].y+Rr*st);return{xOffset:Ta,yOffset:Rs,mapping:ts,data:Do,width:Do.width,height:Do.height}}getKey(){const{fontFamily:Se,fontWeight:tt}=this.fontOptions;return`${Se}_${tt}`}getNewChars(Se,tt){const cn=this.cache.get(Se);if(!cn)return tt;const Q=[],rr=cn.mapping,Rr=new Set(Object.keys(rr));return new Set(tt).forEach(Ui=>{Rr.has(Ui)||Q.push(Ui)}),Q}}var Te=D(15861);const Ue=3,ot=1024,wt=64;class $t extends Yt.EventEmitter{constructor(...Se){super(...Se),(0,G.Z)(this,"canvasHeight",128),(0,G.Z)(this,"texture",void 0),(0,G.Z)(this,"canvas",void 0),(0,G.Z)(this,"iconData",void 0),(0,G.Z)(this,"iconMap",void 0),(0,G.Z)(this,"ctx",void 0),(0,G.Z)(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(Se,tt){var cn=this;return(0,Te.Z)(function*(){let Q=new Image;cn.loadingImageCount++,cn.hasImage(Se)?console.warn("Image Id already exists"):cn.iconData.push({id:Se,size:wt}),cn.updateIconMap(),Q=yield cn.loadImage(tt);const rr=cn.iconData.find(Rr=>Rr.id===Se);rr&&(rr.image=Q,rr.width=Q.width,rr.height=Q.height),cn.update()})()}addImageMini(Se,tt,cn){const Q=cn.getSceneConfig().canvas;let rr=Q.createImage();if(this.loadingImageCount++,this.hasImage(Se))throw new Error("Image Id already exists");this.iconData.push({id:Se,size:wt}),this.updateIconMap(),this.loadImageMini(tt,Q).then(Rr=>{rr=Rr;const Li=this.iconData.find(Ui=>Ui.id===Se);Li&&(Li.image=rr,Li.width=rr.width,Li.height=rr.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(Se){return this.iconMap.hasOwnProperty(Se)}removeImage(Se){this.hasImage(Se)&&(this.iconData=this.iconData.filter(tt=>tt.id!==Se),delete this.iconMap[Se],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(Se){return new Promise((tt,cn)=>{if(Se instanceof HTMLImageElement){tt(Se);return}const Q=new Image;Q.crossOrigin="anonymous",Q.onload=()=>{tt(Q)},Q.onerror=()=>{cn(new Error("Could not load image at "+Se))},Q.src=Se instanceof File?URL.createObjectURL(Se):Se})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=ot,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(Se=>{const{x:tt,y:cn,image:Q,width:rr=64,height:Rr=64}=this.iconMap[Se],Ui=Math.max(rr,Rr)/wt,so=Rr/Ui,uo=rr/Ui;Q&&this.ctx.drawImage(Q,tt+(wt-uo)/2,cn+(wt-so)/2,uo,so)})}updateIconMap(){const{mapping:Se,canvasHeight:tt}=Wn(this.iconData,Ue,ot);this.iconMap=Se,this.canvasHeight=tt}loadImageMini(Se,tt){return new Promise((cn,Q)=>{const rr=tt.createImage();rr.crossOrigin="anonymous",rr.onload=()=>{cn(rr)},rr.onerror=()=>{Q(new Error("Could not load image at "+Se))},rr.src=Se})}}var vn=D(85975);class Et{constructor(){(0,G.Z)(this,"viewport",void 0),(0,G.Z)(this,"overridedViewProjectionMatrix",void 0),(0,G.Z)(this,"viewMatrixInverse",void 0),(0,G.Z)(this,"cameraPosition",void 0)}init(){}update(Se){this.viewport=Se,this.viewMatrixInverse=vn.create(),vn.invert(this.viewMatrixInverse,Se.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[Se,tt]=this.viewport.getCenter();return[Se,tt]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(Se,tt){return this.viewport.projectFlat(Se,tt)}setViewProjectionMatrix(Se){this.overridedViewProjectionMatrix=Se}}const Kt={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class Qn{constructor(){(0,G.Z)(this,"container",void 0),(0,G.Z)(this,"controlCorners",void 0),(0,G.Z)(this,"controlContainer",void 0),(0,G.Z)(this,"scene",void 0),(0,G.Z)(this,"mapsService",void 0),(0,G.Z)(this,"controls",[]),(0,G.Z)(this,"unAddControls",[])}init(Se,tt){this.container=Se.container,this.scene=tt,this.mapsService=tt.mapService,this.initControlPos()}addControl(Se,tt){tt.mapService.map?(Se.addTo(this.scene),this.controls.push(Se)):this.unAddControls.push(Se)}getControlByName(Se){return this.controls.find(tt=>tt.controlOption.name===Se)}removeControl(Se){const tt=this.controls.indexOf(Se);return tt>-1&&this.controls.splice(tt,1),Se.remove(),this}addControls(){this.unAddControls.forEach(Se=>{Se.addTo(this.scene),this.controls.push(Se)}),this.unAddControls=[]}destroy(){for(const Se of this.controls)Se.remove();this.controls=[],this.clearControlPos()}initControlPos(){const Se=this.controlCorners={},tt="l7-",cn=this.controlContainer=E.SO.create("div",tt+"control-container",this.container);function Q(Rr=[]){const Li=Rr.map(Ui=>tt+Ui).join(" ");Se[Rr.filter(Ui=>!["row","column"].includes(Ui)).join("")]=E.SO.create("div",Li,cn)}function rr(Rr){return[...Rr.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),Kt[Rr]]}Object.values(nr).forEach(Rr=>{Q(rr(Rr))}),this.checkCornerOverlap()}clearControlPos(){for(const Se in this.controlCorners)this.controlCorners[Se]&&E.SO.remove(this.controlCorners[Se]);this.controlContainer&&E.SO.remove(this.controlContainer)}checkCornerOverlap(){const Se=window.MutationObserver;if(Se)for(const tt of Object.keys(this.controlCorners)){const cn=tt.match(/^(top|bottom)(left|right)$/);if(cn){const[,Q,rr]=cn,Rr=this.controlCorners[`${Q}${rr}`];new Se(([{target:Ui}])=>{Rr&&(Rr.style[Q]=Ui.clientHeight+"px")}).observe(this.controlCorners[`${rr}${Q}`],{childList:!0,attributes:!0})}}}}class _r{constructor(){(0,G.Z)(this,"container",void 0),(0,G.Z)(this,"scene",void 0),(0,G.Z)(this,"mapsService",void 0),(0,G.Z)(this,"markers",[]),(0,G.Z)(this,"markerLayers",[]),(0,G.Z)(this,"unAddMarkers",[]),(0,G.Z)(this,"unAddMarkerLayers",[])}addMarkerLayer(Se){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(Se),Se.addTo(this.scene)):this.unAddMarkerLayers.push(Se)}removeMarkerLayer(Se){Se.destroy(),this.markerLayers.indexOf(Se);const tt=this.markerLayers.indexOf(Se);tt>-1&&this.markerLayers.splice(tt,1)}addMarker(Se){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(Se),Se.addTo(this.scene)):this.unAddMarkers.push(Se)}addMarkers(){this.unAddMarkers.forEach(Se=>{Se.addTo(this.scene),this.markers.push(Se)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(Se=>{this.markerLayers.push(Se),Se.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(Se){Se.remove(),this.markers.indexOf(Se);const tt=this.markers.indexOf(Se);tt>-1&&this.markers.splice(tt,1)}removeAllMarkers(){this.destroy()}init(Se){this.scene=Se,this.mapsService=Se.mapService}destroy(){this.markers.forEach(Se=>{Se.remove()}),this.markers=[],this.markerLayers.forEach(Se=>{Se.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(Se){Se.destroy()}}class Vr{constructor(){(0,G.Z)(this,"scene",void 0),(0,G.Z)(this,"mapsService",void 0),(0,G.Z)(this,"popups",[]),(0,G.Z)(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(Se){Se!=null&&Se.isOpen()&&Se.remove();const tt=this.popups.indexOf(Se);tt>-1&&this.popups.splice(tt,1);const cn=this.unAddPopups.indexOf(Se);cn>-1&&this.unAddPopups.splice(cn,1)}destroy(){this.popups.forEach(Se=>Se.remove())}addPopup(Se){Se&&Se.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(tt=>{tt.getOptions().autoClose&&this.removePopup(tt)}),this.isMarkerReady?(Se.addTo(this.scene),this.popups.push(Se)):this.unAddPopups.push(Se),Se.on("close",()=>{this.removePopup(Se)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(Se=>{this.addPopup(Se),this.unAddPopups=[]})}init(Se){this.scene=Se,this.mapsService=Se.mapService}}var zr={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"};const{merge:gi}=E.lodashUtil,wi={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Sr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:kt.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class Ti{constructor(){(0,G.Z)(this,"sceneConfigCache",{}),(0,G.Z)(this,"layerConfigCache",{}),(0,G.Z)(this,"layerAttributeConfigCache",{})}getSceneConfig(Se){return this.sceneConfigCache[Se]}getSceneWarninfo(Se){return zr[Se]}setSceneConfig(Se,tt){this.sceneConfigCache[Se]=(0,q.Z)((0,q.Z)({},wi),tt)}getLayerConfig(Se){return this.layerConfigCache[Se]}setLayerConfig(Se,tt,cn){this.layerConfigCache[tt]=(0,q.Z)({},gi({},this.sceneConfigCache[Se],Sr,cn))}getAttributeConfig(Se){return this.layerAttributeConfigCache[Se]}setAttributeConfig(Se,tt){this.layerAttributeConfigCache[Se]=(0,q.Z)((0,q.Z)({},this.layerAttributeConfigCache[Se]),tt)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}var hi=D(98333);const ai=Math.PI/180,Mo=512,xi=4003e4;function ea({latitude:ie=0,zoom:Se=0,scale:tt,highPrecision:cn=!1,flipY:Q=!1}){tt=tt!==void 0?tt:Math.pow(2,Se);const rr={},Rr=Mo*tt,Li=Math.cos(ie*ai),Ui=Rr/360,so=Ui/Li,uo=Rr/xi/Li;if(rr.pixelsPerMeter=[uo,-uo,uo],rr.metersPerPixel=[1/uo,-1/uo,1/uo],rr.pixelsPerDegree=[Ui,-so,uo],rr.degreesPerPixel=[1/Ui,-1/so,1/uo],cn){const xa=ai*Math.tan(ie*ai)/Li,Do=Ui*xa/2,Ea=Rr/xi*xa,ts=Ea/so*uo;rr.pixelsPerDegree2=[0,-Do,Ea],rr.pixelsPerMeter2=[ts,0,ts],Q&&(rr.pixelsPerDegree2[1]=-rr.pixelsPerDegree2[1],rr.pixelsPerMeter2[1]=-rr.pixelsPerMeter2[1])}return Q&&(rr.pixelsPerMeter[1]=-rr.pixelsPerMeter[1],rr.metersPerPixel[1]=-rr.metersPerPixel[1],rr.pixelsPerDegree[1]=-rr.pixelsPerDegree[1],rr.degreesPerPixel[1]=-rr.degreesPerPixel[1]),rr}const va=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class Ro{constructor(Se){(0,G.Z)(this,"needRefresh",!0),(0,G.Z)(this,"coordinateSystem",void 0),(0,G.Z)(this,"viewportCenter",void 0),(0,G.Z)(this,"viewportCenterProjection",void 0),(0,G.Z)(this,"pixelsPerDegree",void 0),(0,G.Z)(this,"pixelsPerDegree2",void 0),(0,G.Z)(this,"pixelsPerMeter",void 0),this.cameraService=Se}refresh(Se){const tt=this.cameraService.getZoom(),cn=Se||this.cameraService.getCenter(),{pixelsPerMeter:Q,pixelsPerDegree:rr}=ea({latitude:cn[1],zoom:tt});this.viewportCenter=cn,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=Q,this.pixelsPerDegree=rr,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Ft.LNGLAT?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Ft.LNGLAT_OFFSET&&this.calculateLnglatOffset(cn,tt),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(Se){this.coordinateSystem=Se}getViewportCenter(){return this.viewportCenter}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(Se,tt,cn,Q){const{pixelsPerMeter:rr,pixelsPerDegree:Rr,pixelsPerDegree2:Li}=ea({latitude:Se[1],zoom:tt,scale:cn,flipY:Q,highPrecision:!0});let Ui=this.cameraService.getViewMatrix();const so=this.cameraService.getProjectionMatrix();let uo=vn.multiply([],so,Ui);const xa=this.cameraService.projectFlat([Math.fround(Se[0]),Math.fround(Se[1])],Math.pow(2,tt));this.viewportCenterProjection=hi.fF([],[xa[0],xa[1],0,1],uo),Ui=this.cameraService.getViewMatrixUncentered()||Ui,uo=vn.multiply([],so,Ui),uo=vn.multiply([],uo,va),this.cameraService.setViewProjectionMatrix(uo),this.pixelsPerMeter=rr,this.pixelsPerDegree=Rr,this.pixelsPerDegree2=Li}}class $o extends Yt.EventEmitter{constructor(...Se){super(...Se),(0,G.Z)(this,"renderMap",new Map),(0,G.Z)(this,"enable",!1),(0,G.Z)(this,"renderEnable",!1),(0,G.Z)(this,"cacheLogs",{})}setEnable(Se){this.enable=!!Se}log(Se,tt){if(!this.enable)return;const cn=Se.split(".");let Q=null;cn.forEach((rr,Rr)=>{Q!==null?(Q[rr]||(Q[rr]={}),Rr!==cn.length-1&&(Q=Q[rr])):(this.cacheLogs[rr]||(this.cacheLogs[rr]={}),Rr!==cn.length-1&&(Q=this.cacheLogs[rr])),Rr===cn.length-1&&(Q[rr]=(0,q.Z)((0,q.Z)({time:Date.now()},Q[rr]),tt))})}getLog(Se){switch(typeof Se){case"string":return this.cacheLogs[Se];case"object":return Se.map(tt=>this.cacheLogs[tt]).filter(tt=>tt!==void 0);case"undefined":return this.cacheLogs}}removeLog(Se){delete this.cacheLogs[Se]}generateRenderUid(){return this.renderEnable?(0,E.M8)():""}renderDebug(Se){this.renderEnable=Se}renderStart(Se){if(!this.renderEnable||!this.enable)return;const tt=this.renderMap.get(Se)||{};this.renderMap.set(Se,(0,q.Z)((0,q.Z)({},tt),{},{renderUid:Se,renderStart:Date.now()}))}renderEnd(Se){if(!this.renderEnable||!this.enable)return;const tt=this.renderMap.get(Se);if(tt){const cn=tt.renderStart,Q=Date.now();this.emit("renderEnd",(0,q.Z)((0,q.Z)({},tt),{},{renderEnd:Q,renderDuration:Q-cn})),this.renderMap.delete(Se)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var Be=D(50840),rt=D.n(Be);const jt={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class un extends sn(){get mapService(){return this.container.mapService}constructor(Se){super(),(0,G.Z)(this,"indragging",!1),(0,G.Z)(this,"hammertime",void 0),(0,G.Z)(this,"lastClickTime",0),(0,G.Z)(this,"lastClickXY",[-1,-1]),(0,G.Z)(this,"clickTimer",void 0),(0,G.Z)(this,"$containter",void 0),(0,G.Z)(this,"onDrag",tt=>{const cn=this.interactionEvent(tt);cn.type=jt[cn.type],cn.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(Un.Drag,cn)}),(0,G.Z)(this,"onHammer",tt=>{tt.srcEvent.stopPropagation();const cn=this.interactionEvent(tt);this.emit(Un.Hover,cn)}),(0,G.Z)(this,"onTouch",tt=>{const cn=tt.touches[0];this.onHover({clientX:cn.clientX,clientY:cn.clientY,type:"touchstart"})}),(0,G.Z)(this,"onTouchEnd",tt=>{if(tt.changedTouches.length>0){const cn=tt.changedTouches[0];this.onHover({clientX:cn.clientX,clientY:cn.clientY,type:"touchend"})}}),(0,G.Z)(this,"onTouchMove",tt=>{const cn=tt.changedTouches[0];this.onHover({clientX:cn.clientX,clientY:cn.clientY,type:"touchmove"})}),(0,G.Z)(this,"onHover",tt=>{const{clientX:cn,clientY:Q}=tt;let rr=cn,Rr=Q;const Li=tt.type,Ui=this.mapService.getMapContainer();if(Ui){const{top:uo,left:xa}=Ui.getBoundingClientRect();rr=rr-xa-Ui.clientLeft,Rr=Rr-uo-Ui.clientTop}const so=this.mapService.containerToLngLat([rr,Rr]);if(Li==="click"){this.isDoubleTap(rr,Rr,so);return}if(Li==="touch"){this.isDoubleTap(rr,Rr,so);return}Li!=="click"&&Li!=="dblclick"&&this.emit(Un.Hover,{x:rr,y:Rr,lngLat:so,type:Li,target:tt})}),this.container=Se}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Un.Hover)}triggerHover({x:Se,y:tt}){this.emit(Un.Hover,{x:Se,y:tt})}triggerSelect(Se){this.emit(Un.Select,{featureId:Se})}triggerActive(Se){this.emit(Un.Active,{featureId:Se})}addEventListenerOnMap(){const Se=this.mapService.getMapContainer();if(Se){const tt=new(rt()).Manager(Se);tt.add(new(rt()).Tap({event:"dblclick",taps:2})),tt.add(new(rt()).Tap({event:"click"})),tt.add(new(rt()).Pan({threshold:0,pointers:0})),tt.add(new(rt()).Press({})),tt.on("dblclick click",this.onHammer),tt.on("panstart panmove panend pancancel",this.onDrag),Se.addEventListener("touchstart",this.onTouch),Se.addEventListener("touchend",this.onTouchEnd),Se.addEventListener("mousemove",this.onHover),Se.addEventListener("touchmove",this.onTouchMove),Se.addEventListener("mousedown",this.onHover,!0),Se.addEventListener("mouseup",this.onHover),Se.addEventListener("contextmenu",this.onHover),this.hammertime=tt}}removeEventListenerOnMap(){const Se=this.mapService.getMapContainer();Se&&(Se.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),Se.removeEventListener("touchstart",this.onTouch),Se.removeEventListener("touchend",this.onTouchEnd),Se.removeEventListener("mousedown",this.onHover),Se.removeEventListener("mouseup",this.onHover),Se.removeEventListener("contextmenu",this.onHover))}interactionEvent(Se){const{type:tt,pointerType:cn}=Se;let Q,rr;cn==="touch"?(rr=Math.floor(Se.pointers[0].clientY),Q=Math.floor(Se.pointers[0].clientX)):(rr=Math.floor(Se.srcEvent.y),Q=Math.floor(Se.srcEvent.x));const Rr=this.mapService.getMapContainer();if(Rr){const{top:Ui,left:so}=Rr.getBoundingClientRect();Q-=so,rr-=Ui}const Li=this.mapService.containerToLngLat([Q,rr]);return{x:Q,y:rr,lngLat:Li,type:tt,target:Se.srcEvent}}isDoubleTap(Se,tt,cn){const Q=new Date().getTime();let rr="click";Q-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-Se)<10&&Math.abs(this.lastClickXY[1]-tt)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),rr="dblclick",this.emit(Un.Hover,{x:Se,y:tt,lngLat:cn,type:rr})):(this.lastClickTime=Q,this.lastClickXY=[Se,tt],this.clickTimer=setTimeout(()=>{rr="click",this.emit(Un.Hover,{x:Se,y:tt,lngLat:cn,type:rr})},400))}}let Nn=0;function Bn(ie){let Se=ie;if(typeof ie=="string"&&(Se=document.getElementById(ie)),Se){const tt=document.createElement("div");return tt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,tt.id=`l7-scene-${Nn++}`,tt.classList.add("l7-scene"),Se.appendChild(tt),tt}return null}function yn(ie){var Se;let tt=!0;if((ie==null||(Se=ie.target)===null||Se===void 0?void 0:Se.target)instanceof HTMLElement){var cn;let rr=ie==null||(cn=ie.target)===null||cn===void 0?void 0:cn.target;for(;rr;){var Q;const Rr=Array.from(rr.classList);if(Rr.includes("l7-marker")||Rr.includes("l7-popup")){tt=!1;break}rr=(Q=rr)===null||Q===void 0?void 0:Q.parentElement}}return tt}let Cn=function(ie){return ie[ie.SAMPLED=0]="SAMPLED",ie[ie.RENDER_TARGET=1]="RENDER_TARGET",ie}({});class dr{constructor(Se){var tt=this;(0,G.Z)(this,"pickedColors",void 0),(0,G.Z)(this,"pickedTileLayers",[]),(0,G.Z)(this,"pickingFBO",void 0),(0,G.Z)(this,"width",0),(0,G.Z)(this,"height",0),(0,G.Z)(this,"alreadyInPicking",!1),(0,G.Z)(this,"pickBufferScale",1),(0,G.Z)(this,"pickFromPickingFBO",function(){var cn=(0,Te.Z)(function*(Q,{x:rr,y:Rr,lngLat:Li,type:Ui,target:so}){var uo;let xa=!1;const{readPixels:Do,readPixelsAsync:Ea,getViewportSize:ts,queryVerdorInfo:da}=tt.rendererService,{width:Ta,height:Rs}=ts(),{enableHighlight:Ba,enableSelect:Ha}=Q.getLayerConfig(),fs=rr*E.SO.DPR,tl=Rr*E.SO.DPR;if(fs>Ta-1*E.SO.DPR||fs<0||tl>Rs-1*E.SO.DPR||tl<0)return!1;let ja;if(da()==="WebGPU"?ja=yield Ea({x:Math.floor(fs/tt.pickBufferScale),y:Math.floor((Rs-(Rr+1)*E.SO.DPR)/tt.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:tt.pickingFBO}):ja=Do({x:Math.floor(fs/tt.pickBufferScale),y:Math.floor((Rs-(Rr+1)*E.SO.DPR)/tt.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:tt.pickingFBO}),tt.pickedColors=ja,ja[0]!==0||ja[1]!==0||ja[2]!==0){const os=(0,E.W0)(ja),Sc=Q.layerPickService.getFeatureById(os);os!==Q.getCurrentPickId()&&Ui==="mousemove"&&(Ui="mouseenter");const fc={x:rr,y:Rr,type:Ui,lngLat:Li,featureId:os,feature:Sc,target:so};Sc&&(xa=!0,Q.setCurrentPickId(os),tt.triggerHoverOnLayer(Q,fc))}else{const os={x:rr,y:Rr,lngLat:Li,type:Q.getCurrentPickId()!==null&&Ui==="mousemove"?"mouseout":"un"+Ui,featureId:null,target:so,feature:null};tt.triggerHoverOnLayer(Q,(0,q.Z)((0,q.Z)({},os),{},{type:"unpick"})),tt.triggerHoverOnLayer(Q,os),Q.setCurrentPickId(null)}if(Ba&&Q.layerPickService.highlightPickedFeature(ja),Ha&&Ui==="click"&&((uo=ja)===null||uo===void 0?void 0:uo.toString())!==[0,0,0,0].toString()){const os=(0,E.W0)(ja);Q.getCurrentSelectedId()===null||os!==Q.getCurrentSelectedId()?(Q.layerPickService.selectFeature(ja),Q.setCurrentSelectedId(os)):(Q.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),Q.setCurrentSelectedId(null))}return xa});return function(Q,rr){return cn.apply(this,arguments)}}()),this.container=Se}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(Se){const{createTexture2D:tt,createFramebuffer:cn,getViewportSize:Q}=this.rendererService;let{width:rr,height:Rr}=Q();this.pickBufferScale=this.configService.getSceneConfig(Se).pickBufferScale||1,rr=Math.round(rr/this.pickBufferScale),Rr=Math.round(Rr/this.pickBufferScale);const Li=tt({width:rr,height:Rr,usage:Cn.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=cn({color:Li,depth:!0,width:rr,height:Rr}),this.interactionService.on(Un.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(Se,tt,cn){var Q=this;return(0,Te.Z)(function*(){const{useFramebufferAsync:rr,clear:Rr}=Q.rendererService;Q.resizePickingFBO(),Se.hooks.beforePickingEncode.call(),yield rr(Q.pickingFBO,(0,Te.Z)(function*(){Rr({framebuffer:Q.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Se.renderModels({ispick:!0})})),Se.hooks.afterPickingEncode.call();const Li=yield Q.pickBox(Se,tt);cn(Li)})()}pickBox(Se,tt){var cn=this;return(0,Te.Z)(function*(){const[Q,rr,Rr,Li]=tt.map(Rs=>{const Ba=Rs<0?0:Rs;return Math.floor(Ba*E.SO.DPR/cn.pickBufferScale)}),{readPixelsAsync:Ui,getViewportSize:so}=cn.rendererService,{width:uo,height:xa}=so();if(Q>(uo-1)*E.SO.DPR/cn.pickBufferScale||Rr<0||rr>(xa-1)*E.SO.DPR/cn.pickBufferScale||Li<0)return[];const Do=Math.min(uo/cn.pickBufferScale,Rr)-Q,Ea=Math.min(xa/cn.pickBufferScale,Li)-rr,ts=yield Ui({x:Q,y:Math.floor(xa/cn.pickBufferScale-(Li+1)),width:Do,height:Ea,data:new Uint8Array(Do*Ea*4),framebuffer:cn.pickingFBO}),da=[],Ta={};for(let Rs=0;Rs<ts.length/4;Rs=Rs+1){const Ba=ts.slice(Rs*4,Rs*4+4),Ha=(0,E.W0)(Ba);if(Ha!==-1&&!Ta[Ha]){const fs=Se.layerPickService.getFeatureById(Ha);da.push((0,q.Z)((0,q.Z)({},fs),{},{pickedFeatureIdx:Ha})),Ta[Ha]=!0}}return da})()}handleCursor(Se,tt){const{cursor:cn="",cursorEnabled:Q}=Se.getLayerConfig();if(Q){const Rr=this.mapService.getType()==="amap"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),Li=Rr==null?void 0:Rr.style.getPropertyValue("cursor");tt==="unmousemove"&&Li!==""?Rr==null||Rr.style.setProperty("cursor",""):tt==="mousemove"&&(Rr==null||Rr.style.setProperty("cursor",cn))}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(Se){var tt=this;return(0,Te.Z)(function*(){!tt.layerService.needPick(Se.type)||!tt.isPickingAllLayer()||(tt.alreadyInPicking=!0,yield tt.pickingLayers(Se),tt.layerService.renderLayers(),tt.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:Se}=this.rendererService,{width:tt,height:cn}=Se();(this.width!==tt||this.height!==cn)&&(this.pickingFBO.resize({width:Math.round(tt/this.pickBufferScale),height:Math.round(cn/this.pickBufferScale)}),this.width=tt,this.height=cn)}pickingLayers(Se){var tt=this;return(0,Te.Z)(function*(){const{clear:cn,useFramebufferAsync:Q}=tt.rendererService;tt.resizePickingFBO();const rr=tt.layerService.getRenderList();for(const Rr of rr.filter(Li=>Li.needPick(Se.type)).reverse()){yield Q(tt.pickingFBO,(0,Te.Z)(function*(){cn({framebuffer:tt.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Rr.layerPickService.pickRender(Se)}));const Li=yield tt.pickFromPickingFBO(Rr,Se);if(tt.layerService.pickedLayerId=Li?+Rr.id:-1,Li&&!Rr.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(Se,tt){yn(tt)&&(this.handleCursor(Se,tt.type),Se.emit(tt.type,tt))}}class hr{constructor(Se=!0){(0,G.Z)(this,"autoStart",void 0),(0,G.Z)(this,"startTime",0),(0,G.Z)(this,"oldTime",0),(0,G.Z)(this,"running",!1),(0,G.Z)(this,"elapsedTime",0),this.autoStart=Se}start(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let Se=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const tt=(typeof performance=="undefined"?Date:performance).now();Se=(tt-this.oldTime)/1e3,this.oldTime=tt,this.elapsedTime+=Se}return Se}}const{throttle:Jr}=E.lodashUtil;class zi extends Yt.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(Se){super(),(0,G.Z)(this,"pickedLayerId",-1),(0,G.Z)(this,"clock",new hr),(0,G.Z)(this,"alreadyInRendering",!1),(0,G.Z)(this,"layers",[]),(0,G.Z)(this,"layerList",[]),(0,G.Z)(this,"layerRenderID",void 0),(0,G.Z)(this,"sceneInited",!1),(0,G.Z)(this,"animateInstanceCount",0),(0,G.Z)(this,"shaderPicking",!0),(0,G.Z)(this,"enableRender",!0),(0,G.Z)(this,"reRender",Jr(()=>{this.renderLayers()},32)),(0,G.Z)(this,"throttleRenderLayers",Jr(()=>{this.renderLayers()},16)),this.container=Se}needPick(Se){return this.updateLayerRenderList(),this.layerList.some(tt=>tt.needPick(Se))}add(Se){this.layers.push(Se),this.sceneInited&&Se.init().then(()=>{this.renderLayers()})}addMask(Se){this.sceneInited&&Se.init().then(()=>{this.renderLayers()})}initLayers(){var Se=this;return(0,Te.Z)(function*(){Se.sceneInited=!0,Se.layers.forEach(function(){var tt=(0,Te.Z)(function*(cn){cn.startInit||(yield cn.init(),Se.updateLayerRenderList())});return function(cn){return tt.apply(this,arguments)}}())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(Se){return this.layers.find(tt=>tt.id===Se)}getLayerByName(Se){return this.layers.find(tt=>tt.name===Se)}remove(Se,tt){var cn=this;return(0,Te.Z)(function*(){tt?tt.layerChildren=tt.layerChildren.filter(Q=>Q!==Se):cn.layers=cn.layers.filter(Q=>Q!==Se),Se.destroy(),cn.reRender(),cn.emit("layerChange",cn.layers)})()}removeAllLayers(){var Se=this;return(0,Te.Z)(function*(){Se.destroy(),Se.reRender()})()}setEnableRender(Se){this.enableRender=Se}renderLayers(){var Se=this;return(0,Te.Z)(function*(){if(Se.alreadyInRendering||!Se.enableRender)return;Se.updateLayerRenderList();const tt=Se.debugService.generateRenderUid();Se.debugService.renderStart(tt),Se.alreadyInRendering=!0,Se.clear();for(const cn of Se.layerList)cn.prerender();Se.renderService.beginFrame();for(const cn of Se.layerList){const{enableMask:Q}=cn.getLayerConfig();cn.masks.filter(rr=>rr.inited).length>0&&Q&&Se.renderMask(cn.masks),cn.getLayerConfig().enableMultiPassRenderer?yield cn.renderMultiPass():cn.render()}Se.renderService.endFrame(),Se.debugService.renderEnd(tt),Se.alreadyInRendering=!1})()}renderMask(Se){let tt=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const cn=Se.length>1?zt.MULTIPLE:zt.SINGLE;for(const Q of Se)Q.render({isStencil:!0,stencilType:cn,stencilIndex:tt++})}beforeRenderData(Se){var tt=this;return(0,Te.Z)(function*(){(yield Se.hooks.beforeRenderData.promise())&&tt.renderLayers()})()}renderTileLayerMask(Se){let tt=0;const{enableMask:cn=!0}=Se.getLayerConfig();let Q=Se.tileMask?1:0;const rr=Se.masks.filter(Li=>Li.inited);Q=Q+(cn?rr.length:1);const Rr=Q>1?zt.MULTIPLE:zt.SINGLE;if((Se.tileMask||rr.length&&cn)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),rr.length&&cn)for(const Li of rr)Li.render({isStencil:!0,stencilType:Rr,stencilIndex:tt++});Se.tileMask&&Se.tileMask.render({isStencil:!0,stencilType:Rr,stencilIndex:tt++,stencilOperation:kt.OR})}renderTileLayer(Se){var tt=this;return(0,Te.Z)(function*(){tt.renderTileLayerMask(Se),Se.getLayerConfig().enableMultiPassRenderer?yield Se.renderMultiPass():yield Se.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(Se=>Se.inited).filter(Se=>Se.isVisible()).sort((Se,tt)=>Se.zIndex-tt.zIndex).forEach(Se=>{this.layerList.push(Se)})}destroy(){this.layers.forEach(Se=>{Se.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const Se=(0,E.CI)(this.mapService.bgColor);this.renderService.clear({color:Se,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}var Ji=D(45987);const{isNil:ei}=E.lodashUtil;class Hi{constructor(Se){(0,G.Z)(this,"name",void 0),(0,G.Z)(this,"type",void 0),(0,G.Z)(this,"scale",void 0),(0,G.Z)(this,"descriptor",void 0),(0,G.Z)(this,"featureBufferLayout",[]),(0,G.Z)(this,"needRescale",!1),(0,G.Z)(this,"needRemapping",!1),(0,G.Z)(this,"needRegenerateVertices",!1),(0,G.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,G.Z)(this,"vertexAttribute",void 0),(0,G.Z)(this,"defaultCallback",tt=>{if(tt.length===0){var cn;return((cn=this.scale)===null||cn===void 0?void 0:cn.defaultValues)||[]}return tt.map((Q,rr)=>{var Rr;return((Rr=this.scale)===null||Rr===void 0?void 0:Rr.scalers[rr].func)(Q)})}),this.setProps(Se)}setProps(Se){Object.assign(this,Se)}mapping(Se){var tt;if((tt=this.scale)!==null&&tt!==void 0&&tt.callback){var cn;const Q=(cn=this.scale)===null||cn===void 0?void 0:cn.callback(...Se);if(!ei(Q))return[Q]}return this.defaultCallback(Se)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const Ii=["buffer","update","name"],Wr=["buffer","update","name"],Eo={[ne.FLOAT]:4,[ne.UNSIGNED_BYTE]:1,[ne.UNSIGNED_SHORT]:2};class ci{constructor(Se){(0,G.Z)(this,"attributesAndIndices",void 0),(0,G.Z)(this,"attributes",[]),(0,G.Z)(this,"triangulation",void 0),(0,G.Z)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=Se}registerStyleAttribute(Se){let tt=this.getLayerStyleAttribute(Se.name||"");return tt?tt.setProps(Se):(tt=new Hi(Se),this.attributes.push(tt)),tt}unRegisterStyleAttribute(Se){const tt=this.attributes.findIndex(cn=>cn.name===Se);tt>-1&&this.attributes.splice(tt,1)}updateScaleAttribute(Se){this.attributes.forEach(tt=>{var cn;const Q=tt.name,rr=(cn=tt.scale)===null||cn===void 0?void 0:cn.field;(Se[Q]||rr&&Se[rr])&&(tt.needRescale=!0,tt.needRemapping=!0,tt.needRegenerateVertices=!0)})}updateStyleAttribute(Se,tt,cn){let Q=this.getLayerStyleAttribute(Se);Q||(Q=this.registerStyleAttribute((0,q.Z)((0,q.Z)({},tt),{},{name:Se})));const{scale:rr}=tt;rr&&Q&&(Q.scale=rr,Q.needRescale=!0,Q.needRemapping=!0,Q.needRegenerateVertices=!0,cn&&cn.featureRange&&(Q.featureRange=cn.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(Se){return this.attributes.find(tt=>tt.name===Se)}getLayerAttributeScale(Se){var tt;const cn=this.getLayerStyleAttribute(Se),Q=cn==null||(tt=cn.scale)===null||tt===void 0?void 0:tt.scalers;return Q&&Q[0]?Q[0].func:null}updateAttributeByFeatureRange(Se,tt,cn=0,Q,rr){const Rr=this.attributes.find(Li=>Li.name===Se);if(Rr&&Rr.descriptor){const{descriptor:Li}=Rr,{update:Ui,buffer:so,size:uo=0}=Li,xa=Eo[so.type||ne.FLOAT];if(Ui){const{elements:Do,sizePerElement:Ea}=this.featureLayout,ts=Do.slice(cn,Q);if(!ts.length)return;const{offset:da}=ts[0],Ta=da*uo*xa,Rs=ts.map(({featureIdx:Ba,vertices:Ha,normals:fs},tl)=>{const ja=Ha.length/Ea,Cu=[];for(let os=0;os<ja;os++){const Sc=fs?fs.slice(os*3,os*3+3):[];Cu.push(...Ui(tt[Ba],Ba,Ha.slice(os*Ea,os*Ea+Ea),tl,Sc))}return Cu}).flat();Rr.vertexAttribute.updateBuffer({data:Rs,offset:Ta}),rr==null||rr.emit(`legend:${Se}`,rr.getLegend(Se))}}}createAttributesAndIndices(Se,tt,cn,Q){this.featureLayout={sizePerElement:0,elements:[]},tt&&(this.triangulation=tt);const rr=this.attributes.map(da=>(da.resetDescriptor(),da.descriptor));let Rr=0,Li=0;const Ui=[];let so=3;Se.forEach((da,Ta)=>{const{indices:Rs,vertices:Ba,normals:Ha,size:fs,indexes:tl,count:ja}=this.triangulation(da,cn);typeof ja=="number"&&(Li+=ja),Rs.forEach(os=>{Ui.push(os+Rr)}),so=fs;const Cu=Ba.length/fs;this.featureLayout.sizePerElement=so,this.featureLayout.elements.push({featureIdx:Ta,vertices:Ba,normals:Ha,offset:Rr}),Rr+=Cu;for(let os=0;os<Cu;os++){const Sc=(Ha==null?void 0:Ha.slice(os*3,os*3+3))||[],fc=Ba.slice(os*fs,os*fs+fs);let Vu=0;tl&&tl[os]!==void 0&&(Vu=tl[os]),rr.forEach((eh,Cd)=>{eh&&eh.update&&eh.buffer.data.push(...eh.update(da,Ta,fc,os,Sc,Vu))})}});const{createAttribute:uo,createBuffer:xa,createElements:Do}=this.rendererService,Ea={};rr.forEach((da,Ta)=>{if(da){const{buffer:Rs,update:Ba,name:Ha}=da,fs=(0,Ji.Z)(da,Ii),tl=uo((0,q.Z)({buffer:xa(Rs)},fs));Ea[da.name||""]=tl,this.attributes[Ta].vertexAttribute=tl}});const ts=Do({data:Ui,type:ne.UNSIGNED_INT,count:Ui.length});return this.attributesAndIndices={attributes:Ea,elements:ts,count:Li},Object.values(this.attributes).filter(da=>da.scale).forEach(da=>{const Ta=da.name;Q==null||Q.emit(`legend:${Ta}`,Q.getLegend(Ta))}),this.attributesAndIndices}createAttributes(Se,tt){this.featureLayout={sizePerElement:0,elements:[]},tt&&(this.triangulation=tt);const cn=this.attributes.map(uo=>(uo.resetDescriptor(),uo.descriptor));let Q=0;const rr=[];let Rr=3;Se.forEach((uo,xa)=>{const{indices:Do,vertices:Ea,normals:ts,size:da,indexes:Ta}=this.triangulation(uo);Do.forEach(Ba=>{rr.push(Ba+Q)}),Rr=da;const Rs=Ea.length/da;this.featureLayout.sizePerElement=Rr,this.featureLayout.elements.push({featureIdx:xa,vertices:Ea,normals:ts,offset:Q}),Q+=Rs;for(let Ba=0;Ba<Rs;Ba++){const Ha=(ts==null?void 0:ts.slice(Ba*3,Ba*3+3))||[],fs=Ea.slice(Ba*da,Ba*da+da);let tl=0;Ta&&Ta[Ba]!==void 0&&(tl=Ta[Ba]),cn.forEach((ja,Cu)=>{ja&&ja.update&&ja.buffer.data.push(...ja.update(uo,xa,fs,Ba,Ha,tl))})}});const{createAttribute:Li,createBuffer:Ui}=this.rendererService,so={};return cn.forEach((uo,xa)=>{if(uo){const{buffer:Do,update:Ea,name:ts}=uo,da=(0,Ji.Z)(uo,Wr),Ta=Li((0,q.Z)({buffer:Ui(Do)},da));so[uo.name||""]=Ta,this.attributes[xa].vertexAttribute=Ta}}),{attributes:so}}clearAllAttributes(){var Se;this.attributes.forEach(tt=>{tt.vertexAttribute&&tt.vertexAttribute.destroy()}),(Se=this.attributesAndIndices)===null||Se===void 0||Se.elements.destroy(),this.attributes=[]}}var xo=D(46343),Wi=D(63844),oo=D.n(Wi);class Ao extends Yt.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(Se){super(),(0,G.Z)(this,"destroyed",!1),(0,G.Z)(this,"loaded",!1),(0,G.Z)(this,"id",void 0),(0,G.Z)(this,"inited",!1),(0,G.Z)(this,"rendering",!1),(0,G.Z)(this,"$container",void 0),(0,G.Z)(this,"canvas",void 0),(0,G.Z)(this,"markerContainer",void 0),(0,G.Z)(this,"resizeDetector",void 0),(0,G.Z)(this,"hooks",void 0),(0,G.Z)(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),(0,G.Z)(this,"handleMapCameraChanged",tt=>{this.cameraService.update(tt),this.render()}),this.container=Se,this.hooks={init:new xo.sX},this.id=Se.id}init(Se){var tt=this;this.configService.setSceneConfig(this.id,Se),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Te.Z)(function*(){tt.debugService.log("map.mapInitStart",{type:tt.map.version}),yield new Promise(cn=>{tt.map.onCameraChanged(Q=>{tt.cameraService.init(),tt.cameraService.update(Q),cn()}),tt.map.init()}),tt.map.onCameraChanged(tt.handleMapCameraChanged),tt.map.addMarkerContainer(),tt.markerService.addMarkers(),tt.markerService.addMarkerLayers(),tt.popupService.initPopup(),tt.interactionService.init(),tt.interactionService.on(Un.Drag,tt.addSceneEvent.bind(tt))})),this.hooks.init.tapPromise("initRenderer",(0,Te.Z)(function*(){var cn;const Q=((cn=tt.map)===null||cn===void 0?void 0:cn.getOverlayContainer())||void 0;if(Q?tt.$container=Q:tt.$container=Bn(tt.configService.getSceneConfig(tt.id).id||""),tt.$container){const{canvas:Rr}=Se;if(tt.canvas=Rr||E.SO.create("canvas","",tt.$container),tt.setCanvas(),yield tt.rendererService.init(tt.canvas,tt.configService.getSceneConfig(tt.id),Se.gl),tt.registerContextLost(),tt.initContainer(),tt.resizeDetector=oo()({strategy:"scroll"}),tt.resizeDetector.listenTo(tt.$container,tt.handleWindowResized),window.matchMedia){var rr;(rr=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||rr===void 0||rr.addListener(tt.handleWindowResized.bind("screen"))}}else console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");tt.pickingService.init(tt.id)})),this.render()}registerContextLost(){const Se=this.rendererService.getCanvas();Se&&Se.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(Se){this.layerService.sceneService=this,this.layerService.add(Se)}addMask(Se){this.layerService.sceneService=this,this.layerService.addMask(Se)}render(){var Se=this;return(0,Te.Z)(function*(){Se.rendering||Se.destroyed||(Se.rendering=!0,Se.inited?(yield Se.layerService.initLayers(),yield Se.layerService.renderLayers()):(yield Se.hooks.init.promise(),Se.destroyed&&Se.destroy(),yield Se.layerService.initLayers(),Se.layerService.renderLayers(),Se.controlService.addControls(),Se.loaded=!0,Se.emit("loaded"),Se.inited=!0),Se.rendering=!1)})()}addFontFace(Se,tt){this.fontService.addFontFace(Se,tt)}getSceneContainer(){return this.$container}exportPng(Se){var tt=this;return(0,Te.Z)(function*(){var cn;const Q=(cn=tt.$container)===null||cn===void 0?void 0:cn.getElementsByTagName("canvas")[0];return yield tt.render(),Se==="jpg"?Q==null?void 0:Q.toDataURL("image/jpeg"):Q==null?void 0:Q.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const Se=this.$container.parentElement;Se!==null&&(this.markerContainer=E.SO.create("div","l7-marker-container",Se))}getMarkerContainer(){return this.markerContainer}destroy(){var Se;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var tt;(tt=this.$container)===null||tt===void 0||tt.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(Se=this.$container)===null||Se===void 0||(Se=Se.parentNode)===null||Se===void 0||Se.removeChild(this.$container),this.emit("destroy")}initContainer(){var Se,tt;const cn=E.SO.DPR,Q=((Se=this.$container)===null||Se===void 0?void 0:Se.clientWidth)||400,rr=((tt=this.$container)===null||tt===void 0?void 0:tt.clientHeight)||300,Rr=this.canvas;Rr&&(Rr.width=Q*cn,Rr.height=rr*cn),this.rendererService.viewport({x:0,y:0,width:cn*Q,height:cn*rr})}setCanvas(){var Se,tt;const cn=E.SO.DPR,Q=((Se=this.$container)===null||Se===void 0?void 0:Se.clientWidth)||400,rr=((tt=this.$container)===null||tt===void 0?void 0:tt.clientHeight)||300,Rr=this.canvas;Rr.width=Q*cn,Rr.height=rr*cn,Rr.style.width="100%",Rr.style.height="100%"}addSceneEvent(Se){this.emit(Se.type,Se)}}const{uniq:bs}=E.lodashUtil,ma="#define PI 3.14159265359",ta=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,vs=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,ms=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,At=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Gt=`layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,jn=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,Lr=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Oi=`#define TILE_SIZE (512.0)
#define PI (3.1415926536)
#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))
#define EARTH_CIRCUMFERENCE (40.03e6)

#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)
#define COORDINATE_SYSTEM_IDENTITY (4.0)
#define COORDINATE_SYSTEM_METER_OFFSET (5.0)

#pragma include "scene_uniforms"

const vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}

// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1.0, 1.0);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}

vec4 project_position(vec4 position, vec2 position64xyLow) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(
      vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)
    );
  }
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01
  ) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  return position;
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_XY_LOW);
}

vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;
  }

  return pixel * 2.0 * u_FocalDistance;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;
  }

  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
    return meter;
  } else {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;

}

float project_pixel(float pixel) {
  return pixel * u_FocalDistance;
}

vec2 project_pixel(vec2 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec3 project_pixel(vec3 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}

bool isEqual(float a, float b) {
  return a < b + 0.001 && a > b - 0.001;
}

`,Gi=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,Jo=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};
`,Gs=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Ds=/precision\s+(high|low|medium)p\s+float/,zs=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,hl=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,yh=/void\s+main\s*\([^)]*\)\s*\{\n?/;class Np{constructor(){(0,G.Z)(this,"moduleCache",{}),(0,G.Z)(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:ma,fs:ma}),this.registerModule("decode",{vs,fs:""}),this.registerModule("scene_uniforms",{vs:Jo,fs:Jo}),this.registerModule("picking_uniforms",{vs:jn,fs:jn}),this.registerModule("projection",{vs:Oi,fs:Oi}),this.registerModule("project",{vs:Lr,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Gs}),this.registerModule("lighting",{vs:ms,fs:""}),this.registerModule("light",{vs:ta,fs:""}),this.registerModule("picking",{vs:Gt,fs:At}),this.registerModule("rotation_2d",{vs:Gi,fs:""})}registerModule(Se,tt){tt.vs=tt.vs.replace(/\r\n/g,`
`),tt.fs=tt.fs.replace(/\r\n/g,`
`);const{vs:cn,fs:Q,uniforms:rr,defines:Rr,inject:Li}=tt,{content:Ui,uniforms:so}=Y(cn),{content:uo,uniforms:xa}=Y(Q);this.rawContentCache[Se]={fs:uo,defines:Rr,inject:Li,uniforms:(0,q.Z)((0,q.Z)((0,q.Z)({},so),xa),rr),vs:Ui}}getModule(Se){let tt=this.rawContentCache[Se].vs,cn=this.rawContentCache[Se].fs;const{defines:Q={},inject:rr={}}=this.rawContentCache[Se];let Rr={};rr["vs:#decl"]&&(tt=rr["vs:#decl"]+tt,Rr=Y(rr["vs:#decl"]).uniforms),rr["vs:#main-start"]&&(tt=tt.replace(yh,da=>da+rr["vs:#main-start"])),rr["fs:#decl"]&&(cn=rr["fs:#decl"]+cn),tt=Ed(Q)+tt;const{content:Ui,includeList:so}=this.processModule(tt,[],"vs"),{content:uo,includeList:xa}=this.processModule(cn,[],"fs"),Do=bs(so.concat(xa).concat(Se)).reduce((da,Ta)=>(0,q.Z)((0,q.Z)({},da),this.rawContentCache[Ta].uniforms),(0,q.Z)({},Rr)),Ea=(Ds.test(uo)?"":zs)+Ui,ts=(Ds.test(uo)?"":zs)+uo;return this.moduleCache[Se]={vs:Ea.trim(),fs:ts.trim(),uniforms:Do},this.moduleCache[Se]}destroy(){this.moduleCache={},this.rawContentCache={}}processModule(Se,tt,cn){return{content:Se.replace(hl,(rr,Rr)=>{const Ui=Rr.split(" ")[0].replace(/"/g,"");if(tt.indexOf(Ui)>-1)return"";const so=this.rawContentCache[Ui][cn];tt.push(Ui);const{content:uo}=this.processModule(so,tt,cn);return uo}),includeList:tt}}}function Ed(ie){return Object.keys(ie).reduce((tt,cn)=>tt+`#define ${cn.toUpperCase()} ${ie[cn]}
`,`
`)}class jl{constructor(){(0,G.Z)(this,"shaderModuleService",void 0),(0,G.Z)(this,"rendererService",void 0),(0,G.Z)(this,"cameraService",void 0),(0,G.Z)(this,"mapService",void 0),(0,G.Z)(this,"interactionService",void 0),(0,G.Z)(this,"layerService",void 0),(0,G.Z)(this,"config",void 0)}getName(){return""}getType(){return he.Normal}init(Se,tt){this.config=tt,this.rendererService=Se.getContainer().rendererService,this.cameraService=Se.getContainer().cameraService,this.mapService=Se.getContainer().mapService,this.interactionService=Se.getContainer().interactionService,this.layerService=Se.getContainer().layerService,this.shaderModuleService=Se.getContainer().shaderModuleService}render(Se){}}class Pf extends jl{getName(){return"clear"}init(Se,tt){super.init(Se,tt)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class If{constructor(Se){(0,G.Z)(this,"passes",[]),(0,G.Z)(this,"layer",void 0),(0,G.Z)(this,"renderFlag",void 0),(0,G.Z)(this,"width",0),(0,G.Z)(this,"height",0),this.postProcessor=Se}setLayer(Se){this.layer=Se}setRenderFlag(Se){this.renderFlag=Se}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var Se=this;return(0,Te.Z)(function*(){for(const tt of Se.passes)yield tt.render(Se.layer);yield Se.postProcessor.render(Se.layer)})()}resize(Se,tt){(this.width!==Se||this.height!==tt)&&(this.postProcessor.resize(Se,tt),this.width=Se,this.height=tt)}add(Se,tt){Se.getType()===he.PostProcessing?this.postProcessor.add(Se,this.layer,tt):(Se.init(this.layer,tt),this.passes.push(Se))}insert(Se,tt,cn){Se.init(this.layer,tt),this.passes.splice(cn,0,Se)}destroy(){this.passes.length=0}}class lu extends jl{constructor(...Se){var tt;super(...Se),tt=this,(0,G.Z)(this,"pickingFBO",void 0),(0,G.Z)(this,"layer",void 0),(0,G.Z)(this,"width",0),(0,G.Z)(this,"height",0),(0,G.Z)(this,"alreadyInRendering",!1),(0,G.Z)(this,"pickFromPickingFBO",({x:cn,y:Q,lngLat:rr,type:Rr})=>{if(!this.layer.isVisible()||!this.layer.needPick(Rr))return;const{getViewportSize:Li,readPixelsAsync:Ui,useFramebuffer:so}=this.rendererService,{width:uo,height:xa}=Li(),{enableHighlight:Do,enableSelect:Ea}=this.layer.getLayerConfig(),ts=cn*E.SO.DPR,da=Q*E.SO.DPR;if(ts>uo||ts<0||da>xa||da<0)return;let Ta;so(this.pickingFBO,(0,Te.Z)(function*(){var Rs;if(Ta=yield Ui({x:Math.round(ts),y:Math.round(xa-(Q+1)*E.SO.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:tt.pickingFBO}),Ta[0]!==0||Ta[1]!==0||Ta[2]!==0){const Ba=(0,E.W0)(Ta),Ha=tt.layer.getSource().getFeatureById(Ba),fs={x:cn,y:Q,type:Rr,lngLat:rr,featureId:Ba,feature:Ha};Ha&&(tt.layer.setCurrentPickId(Ba),tt.triggerHoverOnLayer(fs))}else{const Ba={x:cn,y:Q,lngLat:rr,type:tt.layer.getCurrentPickId()===null?"un"+Rr:"mouseout",featureId:null,feature:null};tt.triggerHoverOnLayer((0,q.Z)((0,q.Z)({},Ba),{},{type:"unpick"})),tt.triggerHoverOnLayer(Ba),tt.layer.setCurrentPickId(null)}Do&&tt.highlightPickedFeature(Ta),Ea&&Rr==="click"&&((Rs=Ta)===null||Rs===void 0?void 0:Rs.toString())!==[0,0,0,0].toString()&&tt.selectFeature(Ta)}))})}getType(){return he.Normal}getName(){return"pixelPicking"}init(Se,tt){super.init(Se,tt),this.layer=Se;const{createTexture2D:cn,createFramebuffer:Q,getViewportSize:rr}=this.rendererService,{width:Rr,height:Li}=rr(),Ui=cn({width:Rr,height:Li,wrapS:ne.CLAMP_TO_EDGE,wrapT:ne.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=Q({color:Ui}),this.interactionService.on(Un.Hover,this.pickFromPickingFBO),this.interactionService.on(Un.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Un.Active,this.highlightFeatureHandle.bind(this))}render(Se){if(this.alreadyInRendering)return;const{getViewportSize:tt,useFramebuffer:cn,clear:Q}=this.rendererService,{width:rr,height:Rr}=tt();this.alreadyInRendering=!0,(this.width!==rr||this.height!==Rr)&&(this.pickingFBO.resize({width:rr,height:Rr}),this.width=rr,this.height=Rr),cn(this.pickingFBO,()=>{Q({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const Li=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),Se.hooks.beforePickingEncode.call(),Se.render(),Se.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(Li),this.alreadyInRendering=!1})}triggerHoverOnLayer(Se){this.layer.emit(Se.type,Se)}highlightPickedFeature(Se){const[tt,cn,Q]=Se;this.layer.hooks.beforeHighlight.call([tt,cn,Q]),this.layerService.renderLayers()}selectFeature(Se){const[tt,cn,Q]=Se;this.layer.hooks.beforeSelect.call([tt,cn,Q]),this.layerService.renderLayers()}selectFeatureHandle({featureId:Se}){const tt=(0,E.Z6)(Se);this.selectFeature(new Uint8Array(tt))}highlightFeatureHandle({featureId:Se}){const tt=(0,E.Z6)(Se);this.highlightPickedFeature(new Uint8Array(tt))}}class ju{constructor(Se){(0,G.Z)(this,"passes",[]),(0,G.Z)(this,"readFBO",void 0),(0,G.Z)(this,"writeFBO",void 0),this.rendererService=Se,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:Se,createTexture2D:tt}=this.rendererService,{width:cn,height:Q}=Se();return tt({x:0,y:0,width:cn,height:Q,copy:!0})}getReadFBOTex(){var Se=this;const{useFramebuffer:tt}=this.rendererService;return new Promise(cn=>{tt(this.readFBO,(0,Te.Z)(function*(){cn(Se.getCurrentFBOTex())}))})}renderBloomPass(Se,tt){var cn=this;return(0,Te.Z)(function*(){const Q=yield cn.getReadFBOTex();let rr=0;for(;rr<4;)yield tt.render(Se,Q),cn.swap(),rr++})()}render(Se){var tt=this;return(0,Te.Z)(function*(){for(let cn=0;cn<tt.passes.length;cn++){const Q=tt.passes[cn];Q.setRenderToScreen(tt.isLastEnabledPass(cn)),Q.getName()==="bloom"?yield tt.renderBloomPass(Se,Q):(yield Q.render(Se),cn!==tt.passes.length-1&&tt.swap())}})()}resize(Se,tt){this.readFBO.resize({width:Se,height:tt}),this.writeFBO.resize({width:Se,height:tt})}add(Se,tt,cn){Se.init(tt,cn),this.passes.push(Se)}insert(Se,tt,cn,Q){Se.init(cn,Q),this.passes.splice(tt,0,Se)}getPostProcessingPassByName(Se){return this.passes.find(tt=>tt.getName()===Se)}init(){const{createFramebuffer:Se,createTexture2D:tt}=this.rendererService;this.readFBO=Se({color:tt({width:1,height:1,wrapS:ne.CLAMP_TO_EDGE,wrapT:ne.CLAMP_TO_EDGE,usage:Cn.RENDER_TARGET})}),this.writeFBO=Se({color:tt({width:1,height:1,wrapS:ne.CLAMP_TO_EDGE,wrapT:ne.CLAMP_TO_EDGE,usage:Cn.RENDER_TARGET})})}isLastEnabledPass(Se){for(let tt=Se+1;tt<this.passes.length;tt++)if(this.passes[tt].isEnabled())return!1;return!0}swap(){const Se=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=Se}}class uc extends jl{getType(){return he.Normal}getName(){return"render"}init(Se,tt){super.init(Se,tt)}render(Se){const{useFramebuffer:tt,clear:cn}=this.rendererService,Q=Se.multiPassRenderer.getPostProcessor().getReadFBO();tt(Q,()=>{cn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Q}),Se.multiPassRenderer.setRenderFlag(!1),Se.models.forEach(rr=>{rr.draw({uniforms:Se.layerModel.getUninforms()})}),Se.multiPassRenderer.setRenderFlag(!0)})}}const Qf=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,vu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Cs}=E.lodashUtil;class Ou extends Ve{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:vu,fs:Qf});const{vs:Se,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("blur-pass"),{width:Q,height:rr}=this.rendererService.getViewportSize();return{vs:Se,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[Q,rr]})}}convertOptionsToUniforms(Se){const tt={};return Cs(Se.bloomRadius)||(tt.u_radius=Se.bloomRadius),Cs(Se.bloomIntensity)||(tt.u_intensity=Se.bloomIntensity),Cs(Se.bloomBaseRadio)||(tt.u_baseRadio=Se.bloomBaseRadio),tt}}const yf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Vh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Bp}=E.lodashUtil;class _h extends Ve{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Vh,fs:yf});const{vs:Se,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("blur-pass"),{width:Q,height:rr}=this.rendererService.getViewportSize();return{vs:Se,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[Q,rr]})}}convertOptionsToUniforms(Se){const tt={};return Bp(Se.blurRadius)||(tt.u_BlurDir=[Se.blurRadius,0]),tt}}const Sd=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Jf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Hh}=E.lodashUtil;class Td extends Ve{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Jf,fs:Sd});const{vs:Se,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("blur-pass"),{width:Q,height:rr}=this.rendererService.getViewportSize();return{vs:Se,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[Q,rr]})}}convertOptionsToUniforms(Se){const tt={};return Hh(Se.blurRadius)||(tt.u_BlurDir=[0,Se.blurRadius]),tt}}const wd=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,m0=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Lf extends Ve{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:m0,fs:wd});const{vs:Se,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:Q,height:rr}=this.rendererService.getViewportSize();return{vs:Se,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[Q,rr]})}}}const Fc=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,ap=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Vl extends Ve{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:ap,fs:Fc}),this.shaderModuleService.getModule("copy-pass")}}const Ec=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Qc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class mu extends Ve{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Qc,fs:Ec});const{vs:Se,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:Q,height:rr}=this.rendererService.getViewportSize();return{vs:Se,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[Q,rr]})}}}const Jc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,cc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class ef extends Ve{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:cc,fs:Jc});const{vs:Se,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("ink-pass"),{width:Q,height:rr}=this.rendererService.getViewportSize();return{vs:Se,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[Q,rr]})}}}const Pl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,kc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class _f extends Ve{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:kc,fs:Pl}),this.shaderModuleService.getModule("noise-pass")}}const sp=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Wh=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class gs extends Ve{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:sp,fs:Wh}),this.shaderModuleService.getModule("sepia-pass")}}const Ad=new Ti;let Gh=0;function Od(){const ie=new Np,Se=new $o,tt=new Et,cn=new Ro(tt),Q=new Pe,rr=new $t,Rr=new _r,Li=new Vr,Ui=new Qn,so={id:`${Gh++}`,globalConfigService:Ad,shaderModuleService:ie,debugService:Se,cameraService:tt,coordinateSystemService:cn,fontService:Q,iconService:rr,markerService:Rr,popupService:Li,controlService:Ui,customRenderService:{}},uo=new zi(so);so.layerService=uo;const xa=new Ao(so);so.sceneService=xa;const Do=new un(so);so.interactionService=Do;const Ea=new dr(so);so.pickingService=Ea;const ts={clear:new Pf,pixelPicking:new lu,render:new uc};so.normalPassFactory=Ta=>ts[Ta];const da={copy:new Vl,bloom:new Ou,blurH:new _h,blurV:new Td,noise:new _f,sepia:new gs,colorHalftone:new Lf,hexagonalPixelate:new mu,ink:new ef};return so.postProcessingPass=da,so.postProcessingPassFactory=Ta=>da[Ta],so}function ul(ie){const Se=(0,q.Z)({},ie);return Se.postProcessor=new ju(Se.rendererService),Se.multiPassRenderer=new If(Se.postProcessor),Se.styleAttributeService=new ci(Se.rendererService),Se}const bh=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let xh=function(ie){return ie.IMAGE="image",ie.CUSTOMIMAGE="customImage",ie.ARRAYBUFFER="arraybuffer",ie.RGB="rgb",ie.TERRAINRGB="terrainRGB",ie.CUSTOMRGB="customRGB",ie.CUSTOMARRAYBUFFER="customArrayBuffer",ie.CUSTOMTERRAINRGB="customTerrainRGB",ie}({})},35914:function(mt,W,D){"use strict";D.d(W,{Z:function(){return Xn}});var q=D(1413),G=D(4942);class E{constructor(_t){(0,G.Z)(this,"configService",void 0),(0,G.Z)(this,"config",void 0),this.config=_t}setContainer(_t,Rt){this.configService=_t.globalConfigService,_t.mapConfig=(0,q.Z)((0,q.Z)({},this.config),{},{id:Rt}),_t.mapService=new(this.getServiceConstructor())(_t)}getServiceConstructor(){throw new Error("Method not implemented.")}}var he=D(45987),ne=D(15861),ue=D(85975),ce=D(77160),xe=D(6158),oe=D.n(xe),Ve=D(15671),re=D(43144),me=D(82963),Re=D(61120),Y=D(60136),le=D(97326),K=D(97685),_e=D(98333);function et(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Je(dn,_t){var Rt=_e.fF([],_t,dn);return _e.bA(Rt,Rt,1/Rt[3]),Rt}function Ot(dn,_t){var Rt=dn%_t;return Rt<0?_t+Rt:Rt}function dt(dn,_t,Rt){return Rt*_t+(1-Rt)*dn}var bt=D(31437);function Me(dn,_t){if(!dn)throw new Error(_t||"viewport-mercator-project: assertion failed.")}var we=Math.PI,je=we/4,Ze=we/180,ut=180/we,Qt=512,De=4003e4,St=1.5;function Oe(dn){return Math.pow(2,dn)}function it(dn){return Math.log2(dn)}function Ke(dn,_t){var Rt=(0,K.Z)(dn,2),wn=Rt[0],In=Rt[1];Me(Number.isFinite(wn)&&Number.isFinite(_t)),Me(Number.isFinite(In)&&In>=-90&&In<=90,"invalid latitude"),_t*=Qt;var Zn=wn*Ze,vt=In*Ze,Ee=_t*(Zn+we)/(2*we),Fe=_t*(we-Math.log(Math.tan(je+vt*.5)))/(2*we);return[Ee,Fe]}function Xe(dn,_t){var Rt=(0,K.Z)(dn,2),wn=Rt[0],In=Rt[1];_t*=Qt;var Zn=wn/_t*(2*we)-we,vt=2*(Math.atan(Math.exp(we-In/_t*(2*we)))-je);return[Zn*ut,vt*ut]}function Pt(dn){var _t=dn.latitude;assert(Number.isFinite(_t));var Rt=Math.cos(_t*Ze);return it(De*Rt)-9}function xt(dn){var _t=dn.latitude,Rt=dn.longitude,wn=dn.zoom,In=dn.scale,Zn=dn.highPrecision,vt=Zn===void 0?!1:Zn;In=In!==void 0?In:Oe(wn),Me(Number.isFinite(_t)&&Number.isFinite(Rt)&&Number.isFinite(In));var Ee={},Fe=Qt*In,st=Math.cos(_t*Ze),It=Fe/360,Mt=It/st,En=Fe/De/st;if(Ee.pixelsPerMeter=[En,-En,En],Ee.metersPerPixel=[1/En,-1/En,1/En],Ee.pixelsPerDegree=[It,-Mt,En],Ee.degreesPerPixel=[1/It,-1/Mt,1/En],vt){var Yn=Ze*Math.tan(_t*Ze)/st,yr=It*Yn/2,qn=Fe/De*Yn,Pe=qn/Mt*En;Ee.pixelsPerDegree2=[0,-yr,qn],Ee.pixelsPerMeter2=[Pe,0,Pe]}return Ee}function Ie(dn,_t){var Rt=_slicedToArray(dn,3),wn=Rt[0],In=Rt[1],Zn=Rt[2],vt=_slicedToArray(_t,3),Ee=vt[0],Fe=vt[1],st=vt[2],It=1,Mt=xt({longitude:wn,latitude:In,scale:It,highPrecision:!0}),En=Mt.pixelsPerMeter,Yn=Mt.pixelsPerMeter2,yr=Ke(dn,It);yr[0]+=Ee*(En[0]+Yn[0]*Fe),yr[1]+=Fe*(En[1]+Yn[1]*Fe);var qn=Xe(yr,It),Pe=(Zn||0)+(st||0);return Number.isFinite(Zn)||Number.isFinite(st)?[qn[0],qn[1],Pe]:qn}function Wt(dn){var _t=dn.height,Rt=dn.pitch,wn=dn.bearing,In=dn.altitude,Zn=dn.center,vt=Zn===void 0?null:Zn,Ee=dn.flipY,Fe=Ee===void 0?!1:Ee,st=et();return ue.translate(st,st,[0,0,-In]),ue.scale(st,st,[1,1,1/_t]),ue.rotateX(st,st,-Rt*Ze),ue.rotateZ(st,st,wn*Ze),Fe&&ue.scale(st,st,[1,-1,1]),vt&&ue.translate(st,st,ce.tk([],vt)),st}function hn(dn){var _t=dn.width,Rt=dn.height,wn=dn.altitude,In=wn===void 0?St:wn,Zn=dn.pitch,vt=Zn===void 0?0:Zn,Ee=dn.nearZMultiplier,Fe=Ee===void 0?1:Ee,st=dn.farZMultiplier,It=st===void 0?1:st,Mt=vt*Ze,En=Math.atan(.5/In),Yn=Math.sin(En)*In/Math.sin(Math.PI/2-Mt-En),yr=Math.cos(Math.PI/2-Mt)*Yn+In;return{fov:2*Math.atan(Rt/2/In),aspect:_t/Rt,focalDistance:In,near:Fe,far:yr*It}}function Pn(dn){var _t=dn.width,Rt=dn.height,wn=dn.pitch,In=dn.altitude,Zn=dn.nearZMultiplier,vt=dn.farZMultiplier,Ee=hn({width:_t,height:Rt,altitude:In,pitch:wn,nearZMultiplier:Zn,farZMultiplier:vt}),Fe=Ee.fov,st=Ee.aspect,It=Ee.near,Mt=Ee.far,En=ue.perspective([],Fe,st,It,Mt);return En}function $n(dn,_t){var Rt=(0,K.Z)(dn,3),wn=Rt[0],In=Rt[1],Zn=Rt[2],vt=Zn===void 0?0:Zn;return Me(Number.isFinite(wn)&&Number.isFinite(In)&&Number.isFinite(vt)),Je(_t,[wn,In,vt,1])}function nr(dn,_t){var Rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,wn=(0,K.Z)(dn,3),In=wn[0],Zn=wn[1],vt=wn[2];if(Me(Number.isFinite(In)&&Number.isFinite(Zn),"invalid pixel coordinate"),Number.isFinite(vt)){var Ee=Je(_t,[In,Zn,vt,1]);return Ee}var Fe=Je(_t,[In,Zn,0,1]),st=Je(_t,[In,Zn,1,1]),It=Fe[2],Mt=st[2],En=It===Mt?0:((Rt||0)-It)/(Mt-It);return bt.t7([],Fe,st,En)}var Ft=et(),Jt=function(){function dn(){var _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rt=_t.width,wn=_t.height,In=_t.viewMatrix,Zn=In===void 0?Ft:In,vt=_t.projectionMatrix,Ee=vt===void 0?Ft:vt;(0,Ve.Z)(this,dn),this.width=Rt||1,this.height=wn||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=Zn,this.projectionMatrix=Ee;var Fe=et();ue.multiply(Fe,Fe,this.projectionMatrix),ue.multiply(Fe,Fe,this.viewMatrix),this.viewProjectionMatrix=Fe;var st=et();ue.scale(st,st,[this.width/2,-this.height/2,1]),ue.translate(st,st,[1,-1,0]),ue.multiply(st,st,this.viewProjectionMatrix);var It=ue.invert(et(),st);if(!It)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=st,this.pixelUnprojectionMatrix=It,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,re.Z)(dn,[{key:"equals",value:function(Rt){return Rt instanceof dn?Rt.width===this.width&&Rt.height===this.height&&ue.equals(Rt.projectionMatrix,this.projectionMatrix)&&ue.equals(Rt.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(Rt){var wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},In=wn.topLeft,Zn=In===void 0?!0:In,vt=this.projectPosition(Rt),Ee=$n(vt,this.pixelProjectionMatrix),Fe=(0,K.Z)(Ee,2),st=Fe[0],It=Fe[1],Mt=Zn?It:this.height-It;return Rt.length===2?[st,Mt]:[st,Mt,Ee[2]]}},{key:"unproject",value:function(Rt){var wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},In=wn.topLeft,Zn=In===void 0?!0:In,vt=wn.targetZ,Ee=(0,K.Z)(Rt,3),Fe=Ee[0],st=Ee[1],It=Ee[2],Mt=Zn?st:this.height-st,En=vt&&vt*this.pixelsPerMeter,Yn=nr([Fe,Mt,It],this.pixelUnprojectionMatrix,En),yr=this.unprojectPosition(Yn),qn=(0,K.Z)(yr,3),Pe=qn[0],Te=qn[1],Ue=qn[2];return Number.isFinite(It)?[Pe,Te,Ue]:Number.isFinite(vt)?[Pe,Te,vt]:[Pe,Te]}},{key:"projectPosition",value:function(Rt){var wn=this.projectFlat(Rt),In=(0,K.Z)(wn,2),Zn=In[0],vt=In[1],Ee=(Rt[2]||0)*this.pixelsPerMeter;return[Zn,vt,Ee]}},{key:"unprojectPosition",value:function(Rt){var wn=this.unprojectFlat(Rt),In=(0,K.Z)(wn,2),Zn=In[0],vt=In[1],Ee=(Rt[2]||0)/this.pixelsPerMeter;return[Zn,vt,Ee]}},{key:"projectFlat",value:function(Rt){var wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Rt}},{key:"unprojectFlat",value:function(Rt){var wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Rt}}]),dn}();function ln(dn){var _t=dn.width,Rt=dn.height,wn=dn.bounds,In=dn.minExtent,Zn=In===void 0?0:In,vt=dn.maxZoom,Ee=vt===void 0?24:vt,Fe=dn.padding,st=Fe===void 0?0:Fe,It=dn.offset,Mt=It===void 0?[0,0]:It,En=(0,K.Z)(wn,2),Yn=(0,K.Z)(En[0],2),yr=Yn[0],qn=Yn[1],Pe=(0,K.Z)(En[1],2),Te=Pe[0],Ue=Pe[1];if(Number.isFinite(st)){var ot=st;st={top:ot,bottom:ot,left:ot,right:ot}}else Me(Number.isFinite(st.top)&&Number.isFinite(st.bottom)&&Number.isFinite(st.left)&&Number.isFinite(st.right));var wt=new Un({width:_t,height:Rt,longitude:0,latitude:0,zoom:0}),$t=wt.project([yr,Ue]),vn=wt.project([Te,qn]),Et=[Math.max(Math.abs(vn[0]-$t[0]),Zn),Math.max(Math.abs(vn[1]-$t[1]),Zn)],Kt=[_t-st.left-st.right-Math.abs(Mt[0])*2,Rt-st.top-st.bottom-Math.abs(Mt[1])*2];Me(Kt[0]>0&&Kt[1]>0);var Qn=Kt[0]/Et[0],_r=Kt[1]/Et[1],Vr=(st.right-st.left)/2/Qn,pr=(st.bottom-st.top)/2/_r,zr=[(vn[0]+$t[0])/2+Vr,(vn[1]+$t[1])/2+pr],gi=wt.unproject(zr),wi=wt.zoom+Math.log2(Math.abs(Math.min(Qn,_r)));return{longitude:gi[0],latitude:gi[1],zoom:Math.min(wi,Ee)}}var Un=function(dn){(0,Y.Z)(_t,dn);function _t(){var Rt,wn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},In=wn.width,Zn=wn.height,vt=wn.latitude,Ee=vt===void 0?0:vt,Fe=wn.longitude,st=Fe===void 0?0:Fe,It=wn.zoom,Mt=It===void 0?0:It,En=wn.pitch,Yn=En===void 0?0:En,yr=wn.bearing,qn=yr===void 0?0:yr,Pe=wn.altitude,Te=Pe===void 0?1.5:Pe,Ue=wn.nearZMultiplier,ot=wn.farZMultiplier;(0,Ve.Z)(this,_t),In=In||1,Zn=Zn||1;var wt=Oe(Mt);Te=Math.max(.75,Te);var $t=Ke([st,Ee],wt);$t[2]=0;var vn=Pn({width:In,height:Zn,pitch:Yn,bearing:qn,altitude:Te,nearZMultiplier:Ue||1/Zn,farZMultiplier:ot||1.01}),Et=Wt({height:Zn,center:$t,pitch:Yn,bearing:qn,altitude:Te,flipY:!0});return Rt=(0,me.Z)(this,(0,Re.Z)(_t).call(this,{width:In,height:Zn,viewMatrix:Et,projectionMatrix:vn})),Rt.latitude=Ee,Rt.longitude=st,Rt.zoom=Mt,Rt.pitch=Yn,Rt.bearing=qn,Rt.altitude=Te,Rt.scale=wt,Rt.center=$t,Rt.pixelsPerMeter=xt((0,le.Z)((0,le.Z)(Rt))).pixelsPerMeter[2],Object.freeze((0,le.Z)((0,le.Z)(Rt))),Rt}return(0,re.Z)(_t,[{key:"projectFlat",value:function(wn){var In=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Ke(wn,In)}},{key:"unprojectFlat",value:function(wn){var In=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Xe(wn,In)}},{key:"getMapCenterByLngLatPosition",value:function(wn){var In=wn.lngLat,Zn=wn.pos,vt=nr(Zn,this.pixelUnprojectionMatrix),Ee=Ke(In,this.scale),Fe=bt.IH([],Ee,bt.tk([],vt)),st=bt.IH([],this.center,Fe);return Xe(st,this.scale)}},{key:"getLocationAtPoint",value:function(wn){var In=wn.lngLat,Zn=wn.pos;return this.getMapCenterByLngLatPosition({lngLat:In,pos:Zn})}},{key:"fitBounds",value:function(wn){var In=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Zn=this.width,vt=this.height,Ee=ln(Object.assign({width:Zn,height:vt,bounds:wn},In)),Fe=Ee.longitude,st=Ee.latitude,It=Ee.zoom;return new _t({width:Zn,height:vt,longitude:Fe,latitude:st,zoom:It})}}]),_t}(Jt);class on{constructor(){(0,G.Z)(this,"viewport",new Un)}syncWithMapCamera(_t){const{center:Rt,zoom:wn,pitch:In,bearing:Zn,viewportHeight:vt,viewportWidth:Ee}=_t,Fe={width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing};this.viewport=new Un((0,q.Z)((0,q.Z)({},Fe),{},{width:Ee,height:vt,longitude:Rt&&Rt[0],latitude:Rt&&Rt[1],zoom:wn,pitch:In,bearing:Zn}))}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(_t,Rt){return this.viewport.projectFlat(_t,Rt)}}var zt=D(39827),kt=D(8543),ke=D(26729);class nt{constructor(_t){(0,G.Z)(this,"size",1e4),this.size=_t||1e4}setSize(_t){this.size=_t}getSize(){return[this.size,this.size]}mercatorXfromLng(_t){return(180+_t)/360*this.size}mercatorYfromLat(_t){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+_t*Math.PI/360)))/360)*this.size}lngFromMercatorX(_t){return _t/this.size*360-180}latFromMercatorY(_t){const Rt=180-(1-_t/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(Rt*Math.PI/180))-90}project(_t){const Rt=this.mercatorXfromLng(_t[0]),wn=this.mercatorYfromLat(_t[1]);return[Rt,wn]}unproject(_t){const Rt=this.lngFromMercatorX(_t[0]),wn=this.latFromMercatorY(_t[1]);return[Rt,wn]}}const Vt={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},U={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},pe=12;class ct{constructor(_t){(0,G.Z)(this,"version","DEFAUlTMAP"),(0,G.Z)(this,"map",void 0),(0,G.Z)(this,"simpleMapCoord",new nt),(0,G.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,G.Z)(this,"config",void 0),(0,G.Z)(this,"configService",void 0),(0,G.Z)(this,"coordinateSystemService",void 0),(0,G.Z)(this,"eventEmitter",void 0),(0,G.Z)(this,"markerContainer",void 0),(0,G.Z)(this,"cameraChangedCallback",void 0),(0,G.Z)(this,"$mapContainer",void 0),(0,G.Z)(this,"handleCameraChanged",Rt=>{const{lat:wn,lng:In}=this.map.getCenter();this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:this.map.getBearing(),center:[In,wn],viewportHeight:this.map.transform.height,pitch:this.map.getPitch(),viewportWidth:this.map.transform.width,zoom:this.map.getZoom(),cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}),this.config=_t.mapConfig,this.configService=_t.globalConfigService,this.coordinateSystemService=_t.coordinateSystemService,this.eventEmitter=new ke.EventEmitter}setBgColor(_t){this.bgColor=_t}addMarkerContainer(){const _t=this.map.getCanvasContainer();this.markerContainer=kt.SO.create("div","l7-marker-container",_t),this.markerContainer.setAttribute("tabindex","-1")}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}on(_t,Rt){zt.I9.indexOf(_t)!==-1?this.eventEmitter.on(_t,Rt):this.map.on(U[_t]||_t,Rt)}off(_t,Rt){this.map.off(U[_t]||_t,Rt),this.eventEmitter.off(_t,Rt)}getContainer(){return this.map.getContainer()}getMapCanvasContainer(){return this.map.getCanvasContainer()}getSize(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();const _t=this.map.transform;return[_t.width,_t.height]}getType(){return"default"}getZoom(){return this.map.getZoom()}setZoom(_t){return this.map.setZoom(_t)}getCenter(){return this.map.getCenter()}setCenter(_t){this.map.setCenter(_t)}getPitch(){return this.map.getPitch()}getRotation(){return this.map.getBearing()}getBounds(){return this.map.getBounds().toArray()}getMinZoom(){return this.map.getMinZoom()}getMaxZoom(){return this.map.getMaxZoom()}setRotation(_t){this.map.setBearing(_t)}zoomIn(_t,Rt){this.map.zoomIn(_t,Rt)}zoomOut(_t,Rt){this.map.zoomOut(_t,Rt)}setPitch(_t){return this.map.setPitch(_t)}panTo(_t){this.map.panTo(_t)}panBy(_t=0,Rt=0){this.map.panBy([_t,Rt])}fitBounds(_t,Rt){this.map.fitBounds(_t,Rt)}setMaxZoom(_t){this.map.setMaxZoom(_t)}setMinZoom(_t){this.map.setMinZoom(_t)}setMapStatus(_t){_t.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),_t.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),_t.dragEnable===!1&&this.map.dragPan.disable(),_t.dragEnable===!0&&this.map.dragPan.enable(),_t.rotateEnable===!1&&this.map.dragRotate.disable(),_t.dragEnable===!0&&this.map.dragRotate.enable(),_t.keyboardEnable===!1&&this.map.keyboard.disable(),_t.keyboardEnable===!0&&this.map.keyboard.enable(),_t.zoomEnable===!1&&this.map.scrollZoom.disable(),_t.zoomEnable===!0&&this.map.scrollZoom.enable()}setZoomAndCenter(_t,Rt){this.map.flyTo({zoom:_t,center:Rt})}setMapStyle(_t){var Rt;(Rt=this.map)===null||Rt===void 0||Rt.setStyle(this.getMapStyleValue(_t))}meterToCoord(_t,Rt){return 1}pixelToLngLat(_t){return this.map.unproject(_t)}lngLatToPixel(_t){return this.map.project(_t)}containerToLngLat(_t){return this.map.unproject(_t)}lngLatToContainer(_t){return this.map.project(_t)}getMapStyle(){try{var _t;const Rt=(_t=this.map.getStyle().sprite)!==null&&_t!==void 0?_t:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(Rt)?Rt==null?void 0:Rt.replace(/\/\w+$/,"").replace(/sprites/,"styles"):Rt}catch(Rt){return""}}getMapStyleConfig(){return Vt}getMapStyleValue(_t){var Rt;return(Rt=this.getMapStyleConfig()[_t])!==null&&Rt!==void 0?Rt:_t}destroy(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(_t,...Rt){this.eventEmitter.emit(_t,...Rt)}once(_t,...Rt){this.eventEmitter.once(_t,...Rt)}getMapContainer(){return this.$mapContainer}exportMap(_t){var Rt;const wn=(Rt=this.map)===null||Rt===void 0?void 0:Rt.getCanvas();return _t==="jpg"?wn==null?void 0:wn.toDataURL("image/jpeg"):wn==null?void 0:wn.toDataURL("image/png")}onCameraChanged(_t){this.cameraChangedCallback=_t}creatMapContainer(_t){let Rt=_t;return typeof _t=="string"&&(Rt=document.getElementById(_t)),Rt}updateView(_t){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:_t.bearing,center:_t.center,viewportHeight:_t.viewportHeight,pitch:_t.pitch,viewportWidth:_t.viewportWidth,zoom:_t.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:_t=!0}=this.config;this.viewport.getZoom()>pe&&_t?this.coordinateSystemService.setCoordinateSystem(zt.lo.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(zt.lo.LNGLAT)}}const de=["id","attributionControl","style","token","rotation","mapInstance"];function Yt(dn,_t){var Rt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,wn=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Rt||wn)&&(_t||(_t=document),!!_t)){var In=_t.head||_t.getElementsByTagName("head")[0];if(!In){In=_t.createElement("head");var Zn=_t.body||_t.getElementsByTagName("body")[0];Zn?Zn.parentNode.insertBefore(In,Zn):_t.documentElement.appendChild(In)}var vt=_t.createElement("style");return vt.type="text/css",vt.styleSheet?vt.styleSheet.cssText=dn:vt.appendChild(_t.createTextNode(dn)),In.appendChild(vt),vt}}Yt(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=oe();let sn=0;const pn="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";class Dn extends ct{constructor(..._t){super(..._t),(0,G.Z)(this,"version","MAPBOX"),(0,G.Z)(this,"viewport",void 0)}getType(){return"mapbox"}lngLatToCoord(_t,Rt={x:0,y:0,z:0}){const{x:wn,y:In}=this.lngLatToMercator(_t,0);return[wn-Rt.x,In-Rt.y]}lngLatToMercator(_t,Rt){const{x:wn=0,y:In=0,z:Zn=0}=window.mapboxgl.MercatorCoordinate.fromLngLat(_t,Rt);return{x:wn,y:In,z:Zn}}getModelMatrix(_t,Rt,wn,In=[1,1,1],Zn={x:0,y:0,z:0}){const vt=window.mapboxgl.MercatorCoordinate.fromLngLat(_t,Rt),Ee=vt.meterInMercatorCoordinateUnits(),Fe=ue.create();return ue.translate(Fe,Fe,ce.al(vt.x-Zn.x,vt.y-Zn.y,vt.z||0-Zn.z)),ue.scale(Fe,Fe,ce.al(Ee*In[0],-Ee*In[1],Ee*In[2])),ue.rotateX(Fe,Fe,wn[0]),ue.rotateY(Fe,Fe,wn[1]),ue.rotateZ(Fe,Fe,wn[2]),Fe}init(){var _t=this;return(0,ne.Z)(function*(){const Rt=_t.config,{id:wn="map",attributionControl:In=!1,style:Zn="light",token:vt=pn,rotation:Ee=0,mapInstance:Fe}=Rt,st=(0,he.Z)(Rt,de);_t.viewport=new on,!Fe&&!window.mapboxgl&&console.error(_t.configService.getSceneWarninfo("SDK")),vt===pn&&Zn!=="blank"&&!window.mapboxgl.accessToken&&!Fe&&console.warn(_t.configService.getSceneWarninfo("MapToken")),!Fe&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=vt),Fe?(_t.map=Fe,_t.$mapContainer=_t.map.getContainer()):(_t.$mapContainer=_t.creatMapContainer(wn),_t.map=new window.mapboxgl.Map((0,q.Z)({container:_t.$mapContainer,style:_t.getMapStyleValue(Zn),attributionControl:In,bearing:Ee},st))),_t.map.on("load",()=>{_t.handleCameraChanged()}),_t.map.on("move",_t.handleCameraChanged),_t.handleCameraChanged()})()}destroy(){var _t;(_t=this.$mapContainer)===null||_t===void 0||(_t=_t.parentNode)===null||_t===void 0||_t.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(_t,...Rt){this.eventEmitter.emit(_t,...Rt)}once(_t,...Rt){this.eventEmitter.once(_t,...Rt)}getMapContainer(){return this.$mapContainer}getCanvasOverlays(){var _t;return(_t=this.getMapContainer())===null||_t===void 0?void 0:_t.querySelector(".mapboxgl-canvas-container")}meterToCoord(_t,Rt){const wn=new(oe()).LngLat(_t[0],_t[1]),In=new(oe()).LngLat(Rt[0],Rt[1]),Zn=wn.distanceTo(In),vt=oe().MercatorCoordinate.fromLngLat({lng:_t[0],lat:_t[1]}),Ee=oe().MercatorCoordinate.fromLngLat({lng:Rt[0],lat:Rt[1]}),{x:Fe,y:st}=vt,{x:It,y:Mt}=Ee;return Math.sqrt(Math.pow(Fe-It,2)+Math.pow(st-Mt,2))*4194304*2/Zn}exportMap(_t){const Rt=this.map.getCanvas();return _t==="jpg"?Rt==null?void 0:Rt.toDataURL("image/jpeg"):Rt==null?void 0:Rt.toDataURL("image/png")}creatMapContainer(_t){let Rt=_t;typeof _t=="string"&&(Rt=document.getElementById(_t));const wn=document.createElement("div");return wn.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,wn.id="l7_mapbox_div"+sn++,Rt.appendChild(wn),wn}}function Wn(dn,_t){var Rt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,wn=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Rt||wn)&&(_t||(_t=document),!!_t)){var In=_t.head||_t.getElementsByTagName("head")[0];if(!In){In=_t.createElement("head");var Zn=_t.body||_t.getElementsByTagName("body")[0];Zn?Zn.parentNode.insertBefore(In,Zn):_t.documentElement.appendChild(In)}var vt=_t.createElement("style");return vt.type="text/css",vt.styleSheet?vt.styleSheet.cssText=dn:vt.appendChild(_t.createTextNode(dn)),In.appendChild(vt),vt}}Wn(`.mapboxgl-ctrl-logo {
  display: none !important;
}
`);class Xn extends E{getServiceConstructor(){return Dn}}},4771:function(){},8543:function(mt,W,D){"use strict";D.d(W,{SO:function(){return q},z6:function(){return ul},a5:function(){return G},SA:function(){return E},nx:function(){return Th},Z:function(){return yh},rQ:function(){return De},bV:function(){return Qt},zi:function(){return St},ds:function(){return uc},oO:function(){return ju},SI:function(){return _h},Rx:function(){return Sd},W0:function(){return Xe},LS:function(){return xf},Z6:function(){return Pt},We:function(){return jn},Co:function(){return ut},Ks:function(){return ms},hj:function(){return Wt},Cl:function(){return xt},Oc:function(){return Pn},M4:function(){return Ie},NJ:function(){return hn},ks:function(){return Je},Ol:function(){return Jf},Yu:function(){return dt},ZB:function(){return nr},gJ:function(){return Ze},z0:function(){return Zs},jG:function(){return up},M8:function(){return wd},fg:function(){return ei},if:function(){return Gt},vP:function(){return Jo},lodashUtil:function(){return Kt},LF:function(){return K},Fv:function(){return Qf},yA:function(){return lu},CI:function(){return Ke}});var q={};D.r(q),D.d(q,{DPR:function(){return jt},addClass:function(){return Sr},addStyle:function(){return un},appendElementType:function(){return zi},clearChildren:function(){return hr},create:function(){return gi},css2Style:function(){return yn},empty:function(){return ea},findParentElement:function(){return Ji},getClass:function(){return xi},getContainer:function(){return _r},getDiffRect:function(){return Cn},getStyleList:function(){return Nn},getViewPortScale:function(){return rt},hasClass:function(){return hi},printCanvas:function(){return Be},remove:function(){return wi},removeClass:function(){return Ti},removeStyle:function(){return Bn},setChecked:function(){return dr},setClass:function(){return ai},setTransform:function(){return Ro},setUnDraggable:function(){return Jr},splitWords:function(){return pr},toggleClass:function(){return Mo},triggerResize:function(){return $o},trim:function(){return Vr}});var G={};D.r(G),D.d(G,{getColumn:function(){return Q},getSatByColumn:function(){return rr},max:function(){return bh},mean:function(){return Se},min:function(){return xh},mode:function(){return tt},statMap:function(){return cn},sum:function(){return ie}});var E={REGISTERED_PROTOCOLS:{}},he=Object.defineProperty,ne=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,Ve=(ve,ze,yt)=>ze in ve?he(ve,ze,{enumerable:!0,configurable:!0,writable:!0,value:yt}):ve[ze]=yt,re=(ve,ze)=>{for(var yt in ze||(ze={}))xe.call(ze,yt)&&Ve(ve,yt,ze[yt]);if(ce)for(var yt of ce(ze))oe.call(ze,yt)&&Ve(ve,yt,ze[yt]);return ve},me=(ve,ze)=>ne(ve,ue(ze)),Re=ve=>E.REGISTERED_PROTOCOLS[ve.substring(0,ve.indexOf("://"))],Y=class extends Error{constructor(ve,ze,yt,An){super(`AJAXError: ${ze} (${ve}): ${yt}`),this.status=ve,this.statusText=ze,this.url=yt,this.body=An}};function le(ve,ze){const yt=new XMLHttpRequest,An=Array.isArray(ve.url)?ve.url[0]:ve.url;yt.open(ve.method||"GET",An,!0),ve.type==="arrayBuffer"&&(yt.responseType="arraybuffer");for(const sr in ve.headers)ve.headers.hasOwnProperty(sr)&&yt.setRequestHeader(sr,ve.headers[sr]);return ve.type==="json"&&(yt.responseType="text",yt.setRequestHeader("Accept","application/json")),yt.withCredentials=ve.credentials==="include",yt.onerror=()=>{ze(new Error(yt.statusText))},yt.onload=()=>{if((yt.status>=200&&yt.status<300||yt.status===0)&&yt.response!==null){let sr=yt.response;if(ve.type==="json")try{sr=JSON.parse(yt.response)}catch(Ur){return ze(Ur)}ze(null,sr,yt.getResponseHeader("Cache-Control"),yt.getResponseHeader("Expires"),yt)}else{const sr=new Blob([yt.response],{type:yt.getResponseHeader("Content-Type")});ze(new Y(yt.status,yt.statusText,An.toString(),sr))}},yt.cancel=yt.abort,yt.send(ve.body),yt}function K(ve){return new Promise((ze,yt)=>{le(ve,(An,sr,Ur,yi,qi)=>{An?yt({err:An,data:null,xhr:qi}):ze({err:null,data:sr,cacheControl:Ur,expires:yi,xhr:qi})})})}function _e(ve,ze){return le(ve,ze)}var et=(ve,ze)=>(Re(ve.url)||_e)(me(re({},ve),{type:"json"}),ze),Je=(ve,ze)=>(Re(ve.url)||_e)(me(re({},ve),{type:"arrayBuffer"}),ze),Ot=(ve,ze)=>_e(me(re({},ve),{method:"POST"}),ze),dt=(ve,ze)=>_e(me(re({},ve),{method:"GET"}),ze);function bt(ve){const ze=window.document.createElement("a");return ze.href=ve,ze.protocol===window.document.location.protocol&&ze.host===window.document.location.host}var Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function we(ve,ze){const yt=new window.Image,An=window.URL||window.webkitURL;yt.crossOrigin="anonymous",yt.onload=()=>{ze(null,yt),An.revokeObjectURL(yt.src),yt.onload=null,window.requestAnimationFrame(()=>{yt.src=Me})},yt.onerror=()=>ze(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const sr=new Blob([new Uint8Array(ve)],{type:"image/png"});yt.src=ve.byteLength?An.createObjectURL(sr):Me}function je(ve,ze){const yt=new Blob([new Uint8Array(ve)],{type:"image/png"});createImageBitmap(yt).then(An=>{ze(null,An)}).catch(An=>{ze(new Error(`Could not load image because of ${An.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var Ze=(ve,ze,yt)=>{const An=(sr,Ur)=>{if(sr)ze(sr);else if(Ur){const yi=typeof createImageBitmap=="function",qi=yt?yt(Ur):Ur;yi?je(qi,ze):we(qi,ze)}};return ve.type==="json"?et(ve,An):Je(ve,An)},ut=(ve,ze)=>{typeof createImageBitmap=="function"?je(ve,ze):we(ve,ze)},Qt=(ve=>(ve.CENTER="center",ve.TOP="top",ve["TOP-LEFT"]="top-left",ve["TOP-RIGHT"]="top-right",ve.BOTTOM="bottom",ve["BOTTOM-LEFT"]="bottom-left",ve["BOTTOM-RIGHT"]="bottom-right",ve.LEFT="left",ve.RIGHT="right",ve))(Qt||{}),De={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function St(ve,ze,yt){const An=ve.classList;for(const sr in De)De.hasOwnProperty(sr)&&An.remove(`l7-${yt}-anchor-${sr}`);An.add(`l7-${yt}-anchor-${ze}`)}var Oe=D(37620);function it(ve){return typeof ve=="string"?!!d3.color(ve):!1}function Ke(ve){const ze=Oe.ZP(ve),yt=[0,0,0,0];return ze!=null&&(yt[0]=ze.r/255,yt[1]=ze.g/255,yt[2]=ze.b/255,yt[3]=ze.opacity),yt}function Xe(ve){const ze=ve&&ve[0],yt=ve&&ve[1],An=ve&&ve[2];return ze+yt*256+An*65536-1}function Pt(ve){return[ve+1&255,ve+1>>8&255,ve+1>>8>>8&255]}function xt(ve){let ze=window.document.createElement("canvas"),yt=ze.getContext("2d");ze.width=256,ze.height=1;let An=null;const sr=yt.createLinearGradient(0,0,256,1),Ur=ve.positions[0],yi=ve.positions[ve.positions.length-1];for(let qi=0;qi<ve.colors.length;++qi){const pa=(ve.positions[qi]-Ur)/(yi-Ur);sr.addColorStop(pa,ve.colors[qi])}return yt.fillStyle=sr,yt.fillRect(0,0,256,1),An=new Uint8ClampedArray(yt.getImageData(0,0,256,1).data),ze=null,yt=null,{data:An,width:256,height:1}}function Ie(ve,ze){let yt=window.document.createElement("canvas"),An=yt.getContext("2d");yt.width=256,yt.height=1;const sr=An.createLinearGradient(0,0,256,1),Ur=ze[1]-ze[0];for(let pa=0;pa<ve.colors.length;++pa){const _a=Math.max((ve.positions[pa]-ze[0])/Ur,0);sr.addColorStop(_a,ve.colors[pa])}An.fillStyle=sr,An.fillRect(0,0,256,1);const yi=An.getImageData(0,0,256,1).data,qi=$n(An,yi);return yt=null,An=null,qi}function Wt(ve){let ze=window.document.createElement("canvas"),yt=ze.getContext("2d");ze.width=256,ze.height=1;const An=yt.createImageData(256,1);return An.data.fill(0),ve.positions.forEach((sr,Ur)=>{const yi=Ke(ve.colors[Ur]);An.data[sr*4+0]=yi[0]*255,An.data[sr*4+1]=yi[1]*255,An.data[sr*4+2]=yi[2]*255,An.data[sr*4+3]=yi[3]*255}),ze=null,yt=null,An}function hn(ve){let ze=window.document.createElement("canvas"),yt=ze.getContext("2d");yt.globalAlpha=1,ze.width=256,ze.height=1;const An=256/ve.colors.length;for(let yi=0;yi<ve.colors.length;yi++)yt.beginPath(),yt.lineWidth=2,yt.strokeStyle=ve.colors[yi],yt.moveTo(yi*An,0),yt.lineTo((yi+1)*An,0),yt.stroke();const sr=yt.getImageData(0,0,256,1).data,Ur=$n(yt,sr);return ze=null,yt=null,Ur}function Pn(ve,ze){let yt=window.document.createElement("canvas"),An=yt.getContext("2d");An.globalAlpha=1,yt.width=256,yt.height=1;const sr=ze[1]-ze[0];ve.positions.length-ve.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(let qi=0;qi<ve.colors.length;qi++)An.beginPath(),An.lineWidth=2,An.strokeStyle=ve.colors[qi],An.moveTo((ve.positions[qi]-ze[0])/sr*255,0),An.lineTo((ve.positions[qi+1]-ze[0])/sr*255,0),An.stroke();const Ur=An.getImageData(0,0,256,1).data,yi=$n(An,Ur);return yt=null,An=null,yi}function $n(ve,ze){const yt=ve.createImageData(256,1);for(let An=0;An<yt.data.length;An+=4)yt.data[An+0]=ze[An+0],yt.data[An+1]=ze[An+1],yt.data[An+2]=ze[An+2],yt.data[An+3]=ze[An+3];return yt}function nr(ve){switch(ve==null?void 0:ve.type){case"cat":return[0,255];default:return[0,1]}}var Ft=D(74691),Jt=D.n(Ft),ln=D(50361),Un=D.n(ln),on=D(23279),zt=D.n(on),kt=D(27361),ke=D.n(kt),nt=D(51584),Vt=D.n(nt),U=D(18446),pe=D.n(U),ct=D(14293),de=D.n(ct),Yt=D(81763),sn=D.n(Yt),pn=D(68630),Dn=D.n(pn),Wn=D(47037),Xn=D.n(Wn),dn=D(36719),_t=D.n(dn),Rt=D(82492),wn=D.n(Rt),In=D(30236),Zn=D.n(In),vt=D(97019),Ee=D.n(vt),Fe=D(23493),st=D.n(Fe),It=D(44908),Mt=D.n(It),En=D(11700),Yn=D.n(En),yr=D(23560),qn=D.n(yr),Pe=D(13218),Te=D.n(Pe),Ue=D(52353),ot=D.n(Ue),wt=D(68929),$t=D.n(wt),vn=D(73955),Et=D.n(vn),Kt={isNil:de(),merge:wn(),throttle:st(),isString:Xn(),debounce:zt(),pull:Ee(),isTypedArray:_t(),isPlainObject:Dn(),isNumber:sn(),isBoolean:Vt(),isEqual:pe(),cloneDeep:Un(),uniq:Mt(),clamp:Jt(),upperFirst:Yn(),get:ke(),mergeWith:Zn(),isFunction:qn(),isObject:Te(),isUndefined:ot(),camelCase:$t(),uniqueId:Et()},{pull:Qn}=Kt;function _r(ve){let ze=ve;return typeof ve=="string"&&(ze=window.document.getElementById(ve)),ze}function Vr(ve){return ve.trim?ve.trim():ve.replace(/^\s+|\s+$/g,"")}function pr(ve){return Vr(ve).split(/\s+/)}function zr(ve){var ze;const yt=(ze=document==null?void 0:document.documentElement)==null?void 0:ze.style;if(!yt)return ve[0];for(const An in ve)if(ve[An]&&ve[An]in yt)return ve[An];return ve[0]}function gi(ve,ze,yt){const An=window.document.createElement(ve);return ze&&(An.className=ze||""),yt&&yt.appendChild(An),An}function wi(ve){const ze=ve.parentNode;ze&&ze.removeChild(ve)}function Sr(ve,ze){if(ve.classList!==void 0){const yt=pr(ze);for(let An=0,sr=yt.length;An<sr;An++)ve.classList.add(yt[An])}else if(!hi(ve,ze)){const yt=xi(ve);ai(ve,(yt?yt+" ":"")+ze)}}function Ti(ve,ze){ve.classList!==void 0?pr(ze).forEach(An=>{ve.classList.remove(An)}):ai(ve,Vr((" "+xi(ve)+" ").replace(" "+ze+" "," ")))}function hi(ve,ze){if(ve.classList!==void 0)return ve.classList.contains(ze);const yt=xi(ve);return yt.length>0&&new RegExp("(^|\\s)"+ze+"(\\s|$)").test(yt)}function ai(ve,ze){ve instanceof HTMLElement?ve.className=ze:ve.className.baseVal=ze}function Mo(ve,ze,yt){yt===void 0?hi(ve,ze)?Ti(ve,ze):Sr(ve,ze):yt?Sr(ve,ze):Ti(ve,ze)}function xi(ve){return ve instanceof SVGElement&&(ve=ve.correspondingElement),ve.className.baseVal===void 0?ve.className:ve.className.baseVal}function ea(ve){for(;ve&&ve.firstChild;)ve.removeChild(ve.firstChild)}var va=zr(["transform","WebkitTransform"]);function Ro(ve,ze){ve.style[va]=ze}function $o(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{const ve=window.document.createEvent("UIEvents");ve.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(ve)}}function Be(ve){const ze=["padding: "+(ve.height/2-8)+"px "+ve.width/2+"px;","line-height: "+ve.height+"px;","background-image: url("+ve.toDataURL()+");"];console.log(`%c
`,ze.join(""))}function rt(){var ve;const ze=window.document.querySelector('meta[name="viewport"]');if(!ze)return 1;const An=((ve=ze.content)==null?void 0:ve.split(",")).find(sr=>{const[Ur]=sr.split("=");return Ur==="initial-scale"});return An?An.split("=")[1]*1:1}var jt=rt()<1?1:window.devicePixelRatio;function un(ve,ze){ve.setAttribute("style",`${ve.style.cssText}${ze}`)}function Nn(ve){return ve.split(";").map(ze=>ze.trim()).filter(ze=>ze)}function Bn(ve,ze){var yt;const An=Nn((yt=ve.getAttribute("style"))!=null?yt:""),sr=Nn(ze),Ur=Qn(An,...sr);ve.setAttribute("style",Ur.join(";"))}function yn(ve){return Object.entries(ve).map(([ze,yt])=>`${ze}: ${yt}`).join(";")}function Cn(ve,ze){return{left:ve.left-ze.left,top:ve.top-ze.top,right:ze.left+ze.width-ve.left-ve.width,bottom:ze.top+ze.height-ve.top-ve.height}}function dr(ve,ze){ve.checked=ze,ze?ve.setAttribute("checked","true"):ve.removeAttribute("checked")}function hr(ve){ve.innerHTML=""}function Jr(ve){ve.setAttribute("draggable","false")}function zi(ve,ze){if(typeof ze=="string"){const yt=document.createElement("div");for(yt.innerHTML=ze;yt.firstChild;)ve.append(yt.firstChild)}else Array.isArray(ze)?ve.append(...ze):ve.append(ze)}function Ji(ve,ze){var yt;const An=Array.isArray(ze)?ze:[ze];let sr=ve;for(;sr instanceof Element&&sr!==window.document.body;){if(An.find(Ur=>sr==null?void 0:sr.matches(Ur)))return sr;sr=(yt=sr==null?void 0:sr.parentElement)!=null?yt:null}}function ei(ve){return typeof ImageBitmap!="undefined"&&ve instanceof ImageBitmap}function Hi(){return typeof importScripts=="function"}var Ii=Hi()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Wr=navigator==null?void 0:navigator.userAgent,Eo=!!Wr.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),ci=Wr.indexOf("Android")>-1||Wr.indexOf("Adr")>-1;function xo(){const ve=Wr,ze=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let yt=!0;for(const An of ze)if(ve.indexOf(An)>0){yt=!1;break}return yt}function Wi(ve,ze){ve.forEach(yt=>{ze[yt]&&(ze[yt]=ze[yt].bind(ze))})}var oo=class{constructor(ve=16){this.duration=16,this.timestamp=new Date().getTime(),this.duration=ve}run(ve){const ze=new Date().getTime(),yt=ze-this.timestamp;this.timestamp=ze,yt>=this.duration&&ve()}},Ao=D(39034);function bs(ve){var ze=[1/0,1/0,-1/0,-1/0];return(0,Ao.pZ)(ve,function(yt){ze[0]>yt[0]&&(ze[0]=yt[0]),ze[1]>yt[1]&&(ze[1]=yt[1]),ze[2]<yt[0]&&(ze[2]=yt[0]),ze[3]<yt[1]&&(ze[3]=yt[1])}),ze}bs.default=bs;var ma=bs,ta=D(1449);function vs(ve){return typeof ve=="number"}function ms(ve){return ve-Math.fround(ve)}var At=2*Math.PI*6378137/2;function Gt(ve,ze){const[yt,An,sr,Ur]=ze;return ve.lng>yt&&ve.lng<=sr&&ve.lat>An&&ve.lat<=Ur}function jn(ve){const ze=[1/0,1/0,-1/0,-1/0];return ve.forEach(yt=>{const{coordinates:An}=yt;Lr(ze,An)}),ze}function Lr(ve,ze){return Array.isArray(ze[0])?ze.forEach(yt=>{Lr(ve,yt)}):(ve[0]>ze[0]&&(ve[0]=ze[0]),ve[1]>ze[1]&&(ve[1]=ze[1]),ve[2]<ze[0]&&(ve[2]=ze[0]),ve[3]<ze[1]&&(ve[3]=ze[1])),ve}function Oi(ve,ze){return Gi(ve,ze)}function Gi(ve,ze){return Array.isArray(ve[0])?ve.map(yt=>Gi(yt,ze)):ze(ve)}function Jo(ve,ze=!0,yt={enable:!0,decimal:1}){ve=hl(ve,ze);const An=ve[0],sr=ve[1];let Ur=An*At/180,yi=Math.log(Math.tan((90+sr)*Math.PI/360))/(Math.PI/180);return yi=yi*At/180,yt.enable&&(Ur=Number(Ur.toFixed(yt.decimal)),yi=Number(yi.toFixed(yt.decimal))),ve.length===3?[Ur,yi,ve[2]]:[Ur,yi]}function Gs(ve,ze=6){const yt=ve[0],An=ve[1];let sr=yt/At*180,Ur=An/At*180;return Ur=180/Math.PI*(2*Math.atan(Math.exp(Ur*Math.PI/180))-Math.PI/2),ze!=null&&(sr=Number(sr.toFixed(ze)),Ur=Number(Ur.toFixed(ze))),ve.length===3?[sr,Ur,ve[2]]:[sr,Ur]}function Ds(ve){if(ve==null)throw new Error("lng is required");return(ve>180||ve<-180)&&(ve=ve%360,ve>180&&(ve=-360+ve),ve<-180&&(ve=360+ve),ve===0&&(ve=0)),ve}function zs(ve){if(ve==null)throw new Error("lat is required");return(ve>90||ve<-90)&&(ve=ve%180,ve>90&&(ve=-180+ve),ve<-90&&(ve=180+ve),ve===0&&(ve=0)),ve}function hl(ve,ze){if(ze===!1)return ve;const yt=Ds(ve[0]);let An=zs(ve[1]);return An>85&&(An=85),An<-85&&(An=-85),ve.length===3?[yt,An,ve[2]]:[yt,An]}function yh(ve){const ze=85.0511287798,yt=Math.max(Math.min(ze,ve[1]),-ze),An=256<<20;let sr=Math.PI/180,Ur=ve[0]*sr,yi=yt*sr;yi=Math.log(Math.tan(Math.PI/4+yi/2));const qi=.5/Math.PI,pa=.5,_a=-.5/Math.PI;return sr=.5,Ur=An*(qi*Ur+pa),yi=An*(_a*yi+sr),[Math.floor(Ur),Math.floor(yi)]}function Np(ve){const ze=.5/Math.PI,yt=.5,An=-.5/Math.PI;let sr=.5;const Ur=256<<20;let[yi,qi]=ve;yi=(yi/Ur-yt)/ze,qi=(qi/Ur-sr)/An,qi=(Math.atan(Math.pow(Math.E,qi))-Math.PI/4)*2,sr=Math.PI/180;const pa=qi/sr;return[yi/sr,pa]}function Ed(ve,ze){const yt=85.0511287798,An=Math.PI/180,sr=6378137;return ze=Math.max(Math.min(yt,ze),-yt),ve*=An,ze*=An,ze=Math.log(Math.tan(Math.PI/4+ze/2)),[ve*sr,ze*sr]}function jl(ve,ze){const yt=Math.PI/180,An=6378137,sr=ve/An/yt,Ur=2*(Math.atan(Math.exp(ze/An))-Math.PI/4)/yt;return[sr,Ur]}function Pf(ve,ze,yt){const An=degreesToRadians(ze[1]-ve[1]),sr=degreesToRadians(ze[0]-ve[0]),Ur=degreesToRadians(ve[1]),yi=degreesToRadians(ze[1]),qi=Math.pow(Math.sin(An/2),2)+Math.pow(Math.sin(sr/2),2)*Math.cos(Ur)*Math.cos(yi);return radiansToLength(2*Math.atan2(Math.sqrt(qi),Math.sqrt(1-qi)),yt="meters")}function If(ve){const ze=Math.PI/180,yt=85.0511287798,An=6378137,sr=Math.max(Math.min(yt,ve[1]),-yt),Ur=Math.sin(sr*ze),yi=An*ve[0]*ze,qi=An*Math.log((1+Ur)/(1-Ur))/2;return[yi,qi]}function lu(ve,ze){const yt=Math.abs(ve[1][1]-ve[0][1])*ze,An=Math.abs(ve[1][0]-ve[0][0])*ze;return[[ve[0][0]-An,ve[0][1]-yt],[ve[1][0]+An,ve[1][1]+yt]]}function ju(ve,ze){return ve[0][0]<=ze[0][0]&&ve[0][1]<=ze[0][1]&&ve[1][0]>=ze[1][0]&&ve[1][1]>=ze[1][1]}function uc(ve){return[[ve[0],ve[1]],[ve[2],ve[3]]]}function Qf(ve){const ze=vu(ve,[0,0]);return[ve[0]/ze,ve[1]/ze]}function vu(ve,ze){return Math.sqrt(Math.pow(ve[0]-ze[0],2)+Math.pow(ve[1]-ze[1],2))}function Cs(ve,ze){return ve[0]*ze[0]+ve[1]*ze[1]}function Ou(ve){return Math.sqrt(ve[0]*ve[0]+ve[1]*ve[1])}function yf(ve,ze){return Math.acos(Cs(ve,ze)/(Ou(ve)*Ou(ze)))*180/Math.PI}function Vh(ve,ze){return ze[0]>0?ze[1]>0?90-Math.atan(ze[1]/ze[0])*180/Math.PI:90+Math.atan(-ze[1]/ze[0])*180/Math.PI:ze[1]<0?180+(90-Math.atan(ze[1]/ze[0])*180/Math.PI):270+Math.atan(ze[1]/-ze[0])*180/Math.PI}function Bp(ve,ze=100){if(!ve||ve.length<2)return;const yt=[0,1];let An=0;const sr=[];for(let Ur=0;Ur<ve.length-1;Ur++){const yi=ve[Ur],qi=ve[Ur+1],pa=vu(yi,qi);An+=pa;const _a=[yi[0]-qi[0],yi[1]-qi[1]];let xs=Vh(yt,_a);if(Ur>0){const Fa=sr[Ur-1].rotation;Fa-xs>360-Fa+xs&&(xs=xs+360)}sr.push({start:yi,end:qi,dis:pa,rotation:xs,duration:0})}return sr.map(Ur=>{Ur.duration=ze*(Ur.dis/An)}),sr}function _h(ve){if(vs(ve[0]))return ve;if(vs(ve[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(vs(ve[0][0][0])){const ze=ve;let yt=0,An=0,sr=0;return ze.forEach(Ur=>{Ur.forEach(yi=>{yt+=yi[0],An+=yi[1],sr++})}),[yt/sr,An/sr,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function Sd(ve){let ze=ve[0],yt=ve[1],An=ve[0],sr=ve[1],Ur=0,yi=0,qi=0;for(let pa=0;pa<ve.length;pa+=2){const _a=ve[pa],xs=ve[pa+1];_a&&xs&&(ze=Math.max(_a,ze),yt=Math.max(xs,yt),An=Math.min(_a,An),sr=Math.min(xs,sr),Ur+=_a,yi+=xs,qi++)}return{center:[Ur/qi,yi/qi],radius:Math.sqrt(Math.pow(ze-An,2)+Math.pow(yt-sr,2))/2}}function Jf(ve){return ma((0,ta.uf)([(0,ta.Tu)(ve)]))}function Hh(ve){let An=0;ve+="x";const sr=Math.floor(9007199254740991/137);for(let Ur=0;Ur<ve.length;Ur++)An>sr&&(An=Math.floor(An/137)),An=An*131+ve.charCodeAt(Ur);return An}function Td(ve){ve=ve.toString();let ze=5381,yt=ve.length;for(;yt;)ze=ze*33^ve.charCodeAt(--yt);return ze>>>0}function wd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,ve=>{const ze=Math.random()*16|0;return(ve==="x"?ze:ze&3|8).toString(16)})}function m0(ve,ze,yt,An,sr=30,Ur){let yi=yt;return Ur&&(yi=Math.round(yt*(sr-1))/(sr-1)),An?Vl(ve,ze,yi,An):Vl(ve,ze,yi,.314)}function Lf(ve,ze){const yt=1-ze;return(ve[0]*yt+ve[1]*ze)*yt+(ve[1]*yt+ve[2]*ze)*ze}function Fc(ve,ze){return Math.sqrt(Math.pow(ve[0]-ze[0],2)+Math.pow(ve[1]-ze[1],2))}function ap(ve,ze,yt){const An=[ze[0]-ve[0],ze[1]-ve[1]],sr=Fc(An,[0,0]),Ur=Math.atan2(An[1],An[0]),yi=sr/2/Math.cos(yt),qi=Ur+yt;return[yi*Math.cos(qi)+ve[0],yi*Math.sin(qi)+ve[1]]}function Vl(ve,ze,yt,An){const sr=ap(ve,ze,An),Ur=[ve[0],sr[0],ze[0]],yi=[ve[1],sr[1],ze[1]];return[Lf(Ur,yt),Lf(yi,yt),0]}function Ec(ve,ze,yt,An,sr=30,Ur){let yi=yt;return Ur&&(yi=Math.round(yt*29)/29),mu(ve,ze,yi)}function Qc(ve,ze){const yt=[ve[0]-ze[0],ve[1]-ze[1]],An=[Math.sin(yt[0]/2),Math.sin(yt[1]/2)],sr=An[1]*An[1]+Math.cos(ve[1])*Math.cos(ze[1])*An[0]*An[0];return 2*Math.atan2(Math.sqrt(sr),Math.sqrt(1-sr))}function mu(ve,ze,yt){const An=[degreesToRadians(ve[0]),degreesToRadians(ve[1])],sr=[degreesToRadians(ze[0]),degreesToRadians(ze[1])],Ur=Qc(An,sr);if(Math.abs(Ur-Math.PI)<.001)return[(1-yt)*An[0]+yt*sr[0],(1-yt)*An[1]+yt*sr[1]];const yi=Math.sin((1-yt)*Ur)/Math.sin(Ur),qi=Math.sin(yt*Ur)/Math.sin(Ur),pa=[Math.sin(An[0]),Math.sin(An[1])],_a=[Math.cos(An[0]),Math.cos(An[1])],xs=[Math.sin(sr[0]),Math.sin(sr[1])],Fa=[Math.cos(sr[0]),Math.cos(sr[1])],Ia=yi*_a[1]*_a[0]+qi*Fa[1]*Fa[0],Ru=yi*_a[1]*pa[0]+qi*Fa[1]*xs[0],nf=yi*pa[1]+qi*xs[1];return[radiansToDegrees(Math.atan2(Ru,Ia)),radiansToDegrees(Math.atan2(nf,Math.sqrt(Ia*Ia+Ru*Ru)))]}function Jc(ve,ze){let yt=0;const An=[];for(let qi=0;qi<ve.length-1;qi++){const pa=ve[qi],_a=ve[qi+1],xs=ef(pa,_a),Fa=yt;yt+=xs,An.push({p1:pa,p2:_a,totalDistance:yt,distance:xs,lastTotalDistance:Fa})}const sr=yt*ze;let Ur,yi;for(const qi of An)if(qi.totalDistance>sr){const _a=qi.p1,xs=qi.p2,Fa=(sr-qi.lastTotalDistance)/qi.distance,Ia=cc(xs,_a,Fa);Ur=Ia[0],yi=Ia[1];break}return{lng:Ur,lat:yi,height:0}}function cc(ve,ze,yt){return[ve[0]*yt+ze[0]*(1-yt),ve[1]*yt+ze[1]*(1-yt)]}function ef(ve,ze){return Math.sqrt(Math.pow(ve[0]-ze[0],2)+Math.pow(ve[1]-ze[1],2))}var Pl=Object.defineProperty,kc=Object.getOwnPropertySymbols,_f=Object.prototype.hasOwnProperty,sp=Object.prototype.propertyIsEnumerable,Wh=(ve,ze,yt)=>ze in ve?Pl(ve,ze,{enumerable:!0,configurable:!0,writable:!0,value:yt}):ve[ze]=yt,gs=(ve,ze)=>{for(var yt in ze||(ze={}))_f.call(ze,yt)&&Wh(ve,yt,ze[yt]);if(kc)for(var yt of kc(ze))sp.call(ze,yt)&&Wh(ve,yt,ze[yt]);return ve};function Ad(ve,ze){const{featureId:yt}=ze;let An=ve.data.dataArray;return typeof yt=="number"&&(An=An.filter(({id:sr})=>sr===yt)),An.map(sr=>{const Ur=Od(sr,ze);return gs(gs({},sr),Ur)})}function Gh(ve,ze){return new Promise(yt=>{ve.inited?yt(Ad(ve,ze)):ve.once("update",()=>{yt(Ad(ve,ze))})})}function Od(ve,ze){const{offset:yt,shape:An,thetaOffset:sr,segmentNumber:Ur=30,autoFit:yi=!0}=ze,{coordinates:qi}=ve;if(An==="line")return pathLineAtOffset(qi,yt);const pa=qi[0],_a=qi[1],xs=typeof sr=="string"?ve[sr]||0:sr;let Fa;switch(An){case"arc":Fa=arcLineAtOffset;break;case"greatcircle":Fa=greatCircleLineAtOffset;break;default:Fa=arcLineAtOffset}const[Ia,Ru,nf]=Fa(pa,_a,yt,xs,Ur,yi);return{lng:Ia,lat:Ru,height:nf}}var ul=class{constructor(ve=50,ze){this.limit=ve,this.destroy=ze||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(ve=>{this.delete(ve)}),this.cache={},this.order=[]}get(ve){const ze=this.cache[ve];return ze&&(this.deleteOrder(ve),this.appendOrder(ve)),ze}set(ve,ze){this.cache[ve]?(this.delete(ve),this.cache[ve]=ze,this.appendOrder(ve)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[ve]=ze,this.appendOrder(ve))}delete(ve){const ze=this.cache[ve];ze&&(this.deleteCache(ve),this.deleteOrder(ve),this.destroy(ze,ve))}deleteCache(ve){delete this.cache[ve]}deleteOrder(ve){const ze=this.order.findIndex(yt=>yt===ve);ze>=0&&this.order.splice(ze,1)}appendOrder(ve){this.order.push(ve)}defaultDestroy(ve,ze){return null}};function bh(ve){if(ve.length===0)throw new Error("max requires at least one data point");let ze=ve[0];for(let yt=1;yt<ve.length;yt++)ve[yt]>ze&&(ze=ve[yt]);return ze*1}function xh(ve){if(ve.length===0)throw new Error("min requires at least one data point");let ze=ve[0];for(let yt=1;yt<ve.length;yt++)ve[yt]<ze&&(ze=ve[yt]);return ze*1}function ie(ve){if(ve.length===0)return 0;let ze=ve[0]*1;for(let yt=1;yt<ve.length;yt++)ze+=ve[yt]*1;return ze}function Se(ve){if(ve.length===0)throw new Error("mean requires at least one data point");return ie(ve)/ve.length}function tt(ve){if(ve.length===0)throw new Error("mean requires at least one data point");if(ve.length<3)return ve[0];ve.sort();let ze=ve[0],yt=NaN,An=0,sr=1;for(let Ur=1;Ur<ve.length+1;Ur++)ve[Ur]!==ze?(sr>An&&(An=sr,yt=ze),sr=1,ze=ve[Ur]):sr++;return yt*1}var cn={min:xh,max:bh,mean:Se,sum:ie,mode:tt};function Q(ve,ze){return ve.map(yt=>yt[ze])}function rr(ve,ze){return cn[ve](ze)}function Rr(ve,ze){ze===void 0&&(ze={});var yt=Number(ve[0]),An=Number(ve[1]),sr=Number(ve[2]),Ur=Number(ve[3]);if(ve.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var yi=[yt,An],qi=[yt,Ur],pa=[sr,Ur],_a=[sr,An];return(0,ta.yu)([[yi,_a,pa,qi,yi]],ze.properties,{bbox:ve,id:ze.id})}var Li=D(26729),Ui=D.n(Li),so=(ve=>(ve.Realtime="realtime",ve.Overlap="overlap",ve.Replace="replace",ve))(so||{}),uo=(ve=>(ve.Loading="Loading",ve.Loaded="Loaded",ve.Failure="Failure",ve.Cancelled="Cancelled",ve))(uo||{}),xa=0,Do=1,Ea=2;function ts(ve){ve.forEach(ze=>{ze.isCurrent&&(ze.isVisible=ze.isLoaded)})}function da(ve){ve.forEach(ze=>{ze.properties.state=xa}),ve.forEach(ze=>{ze.isCurrent&&!Rs(ze)&&Ba(ze)}),ve.forEach(ze=>{ze.isVisible=!!(ze.properties.state&Ea)})}function Ta(ve){ve.forEach(yt=>{yt.properties.state=xa}),ve.forEach(yt=>{yt.isCurrent&&Rs(yt)}),ve.slice().sort((yt,An)=>yt.z-An.z).forEach(yt=>{yt.isVisible=!!(yt.properties.state&Ea),yt.children.length&&(yt.isVisible||yt.properties.state&Do)?yt.children.forEach(An=>{An.properties.state=Do}):yt.isCurrent&&Ba(yt)})}function Rs(ve){for(;ve;){if(ve.isLoaded)return ve.properties.state|=Ea,!0;ve=ve.parent}return!1}function Ba(ve){ve.children.forEach(ze=>{ze.isLoaded?ze.properties.state|=Ea:Ba(ze)})}var Ha=256,fs=[-1/0,-1/0,1/0,1/0],tl=.2,ja=5,Cu={[so.Realtime]:ts,[so.Overlap]:da,[so.Replace]:Ta},os=()=>{};function Sc(ve,ze,yt){const An=Math.floor((ve+180)/360*Math.pow(2,yt)),sr=Math.floor((1-Math.log(Math.tan(ze*Math.PI/180)+1/Math.cos(ze*Math.PI/180))/Math.PI)/2*Math.pow(2,yt));return[An,sr]}function fc(ve,ze,yt){const An=ve/Math.pow(2,yt)*360-180,sr=Math.PI-2*Math.PI*ze/Math.pow(2,yt),Ur=180/Math.PI*Math.atan(.5*(Math.exp(sr)-Math.exp(-sr)));return[An,Ur]}var Vu=(ve,ze,yt)=>{const[An,sr]=fc(ve,ze,yt),[Ur,yi]=fc(ve+1,ze+1,yt);return[An,yi,Ur,sr]};function eh({zoom:ve,latLonBounds:ze,maxZoom:yt=1/0,minZoom:An=0,zoomOffset:sr=0,extent:Ur=fs}){let yi=Math.ceil(ve)+sr;if(Number.isFinite(An)&&yi<An)return[];Number.isFinite(yt)&&yi>yt&&(yi=yt);const[qi,pa,_a,xs]=ze,Fa=[Math.max(qi,Ur[0]),Math.max(pa,Ur[1]),Math.min(_a,Ur[2]),Math.min(xs,Ur[3])],Ia=[],[Ru,nf]=Sc(Fa[0],Fa[1],yi),[nl,co]=Sc(Fa[2],Fa[3],yi);for(let wa=Ru;wa<=nl;wa++)for(let ns=co;ns<=nf;ns++)Ia.push({x:wa,y:ns,z:yi});const Yu=(nl+Ru)/2,Pd=(nf+co)/2,wh=(wa,ns)=>Math.abs(wa-Yu)+Math.abs(ns-Pd);return Ia.sort((wa,ns)=>wh(wa.x,wa.y)-wh(ns.x,ns.y)),Ia}var Cd=(ve,ze,yt,An=!0)=>{const sr=Math.pow(2,yt),Ur=sr-1,yi=sr;let qi=ve;const pa=ze;return An&&(qi<0?qi=qi+yi:qi>Ur&&(qi=qi%yi)),{warpX:qi,warpY:pa}},bf=(ve,ze,yt)=>new Promise((An,sr)=>{var Ur=pa=>{try{qi(yt.next(pa))}catch(_a){sr(_a)}},yi=pa=>{try{qi(yt.throw(pa))}catch(_a){sr(_a)}},qi=pa=>pa.done?An(pa.value):Promise.resolve(pa.value).then(Ur,yi);qi((yt=yt.apply(ve,ze)).next())}),Df=class extends Li.EventEmitter{constructor(ve){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:ze,y:yt,z:An,tileSize:sr,warp:Ur=!0}=ve;this.x=ze,this.y=yt,this.z=An,this.warp=Ur||!0,this.tileSize=sr}get isLoading(){return this.loadStatus===uo.Loading}get isLoaded(){return this.loadStatus===uo.Loaded}get isFailure(){return this.loadStatus===uo.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===uo.Cancelled}get isDone(){return[uo.Loaded,uo.Cancelled,uo.Failure].includes(this.loadStatus)}get bounds(){return Vu(this.x,this.y,this.z)}get bboxPolygon(){const[ve,ze,yt,An]=this.bounds,sr=[(yt-ve)/2,(An-ze)/2];return Rr(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:sr,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(ve){return bf(this,arguments,function*({getData:ze,onLoad:yt,onError:An}){this.loadDataId++;const sr=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=uo.Loading;let Ur=null,yi;try{const{x:qi,y:pa,z:_a,bounds:xs,tileSize:Fa,warp:Ia}=this,{warpX:Ru,warpY:nf}=Cd(qi,pa,_a,Ia),{signal:nl}=this.abortController;Ur=yield ze({x:Ru,y:nf,z:_a,bounds:xs,tileSize:Fa,signal:nl,warp:Ia},this)}catch(qi){yi=qi}if(sr===this.loadDataId&&!(this.isCancelled&&!Ur)){if(yi||!Ur){this.loadStatus=uo.Failure,An(yi,this);return}this.loadStatus=uo.Loaded,this.data=Ur,yt(this)}})}reloadData(ve){this.isLoading&&this.abortLoad(),this.loadData(ve)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=uo.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},tf=(ve,ze)=>{const yt=uc(ve),An=lu(yt,ze),sr=360*3-180,Ur=85.0511287798065;return[Math.max(An[0][0],-sr),Math.max(An[0][1],-Ur),Math.min(An[1][0],sr),Math.min(An[1][1],Ur)]},Eh=(ve,ze)=>{const yt=uc(ve),An=uc(ze);return ju(yt,An)},Sh=Object.defineProperty,Nf=Object.defineProperties,g0=Object.getOwnPropertyDescriptors,Rd=Object.getOwnPropertySymbols,Fp=Object.prototype.hasOwnProperty,Bf=Object.prototype.propertyIsEnumerable,kp=(ve,ze,yt)=>ze in ve?Sh(ve,ze,{enumerable:!0,configurable:!0,writable:!0,value:yt}):ve[ze]=yt,Md=(ve,ze)=>{for(var yt in ze||(ze={}))Fp.call(ze,yt)&&kp(ve,yt,ze[yt]);if(Rd)for(var yt of Rd(ze))Bf.call(ze,yt)&&kp(ve,yt,ze[yt]);return ve},lp=(ve,ze)=>Nf(ve,g0(ze)),{throttle:Ff}=Kt,zp=(ve=>(ve.TilesLoadStart="tiles-load-start",ve.TileLoaded="tile-loaded",ve.TileError="tile-error",ve.TileUnload="tile-unload",ve.TileUpdate="tile-update",ve.TilesLoadFinished="tiles-load-finished",ve))(zp||{}),Th=class extends Ui(){constructor(ve){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=Ff((ze,yt)=>{this.update(ze,yt)},16),this.onTileLoad=ze=>{this.emit("tile-loaded",ze),this.updateTileVisible(),this.loadFinished()},this.onTileError=(ze,yt)=>{this.emit("tile-error",{error:ze,tile:yt}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=ze=>{this.emit("tile-unload",ze),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:fs,getTileData:os,warp:!0,updateStrategy:so.Replace},this.updateOptions(ve)}get isLoaded(){return this.currentTiles.every(ve=>ve.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((ze,yt)=>ze.z-yt.z)}updateOptions(ve){const ze=ve.minZoom===void 0?this.options.minZoom:Math.ceil(ve.minZoom),yt=ve.maxZoom===void 0?this.options.maxZoom:Math.floor(ve.maxZoom);this.options=lp(Md(Md({},this.options),ve),{minZoom:ze,maxZoom:yt})}update(ve,ze){const yt=Math.max(0,Math.ceil(ve));if(this.lastViewStates&&this.lastViewStates.zoom===yt&&Eh(this.lastViewStates.latLonBoundsBuffer,ze))return;const An=tf(ze,tl);this.lastViewStates={zoom:yt,latLonBounds:ze,latLonBoundsBuffer:An},this.currentZoom=yt;let sr=!1;const Ur=this.getTileIndices(yt,An).filter(yi=>this.options.warp||yi.x>=0&&yi.x<Math.pow(2,yt));this.emit("tiles-load-start"),this.currentTiles=Ur.map(({x:yi,y:qi,z:pa})=>{let _a=this.getTile(yi,qi,pa);return _a?(((_a==null?void 0:_a.isFailure)||(_a==null?void 0:_a.isCancelled))&&_a.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),_a):(_a=this.createTile(yi,qi,pa),sr=!0,_a)}),sr&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[ve,ze]of this.cacheTiles){if(!this.currentTiles.includes(ze)){this.cacheTiles.delete(ve),this.onTileUnload(ze);return}this.onTileUnload(ze),ze.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(ve,ze,yt){const An=this.cacheTiles.get(`${ze},${yt},${ve}`);An&&(this.onTileUnload(An),An.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(ve,ze,yt){const An=this.getTileByLngLat(ve,ze,yt);An&&this.reloadTileById(An.z,An.x,An.y)}reloadTileByExtent(ve,ze){this.getTileIndices(ze,ve).forEach(An=>{this.reloadTileById(An.z,An.x,An.y)})}pruneRequests(){const ve=[];for(const ze of this.cacheTiles.values())ze.isLoading&&!ze.isCurrent&&!ze.isVisible&&ve.push(ze);for(;ve.length>0;)ve.shift().abortLoad()}getTileByLngLat(ve,ze,yt){const{zoomOffset:An}=this.options,sr=Math.ceil(yt)+An,Ur=Sc(ve,ze,sr);return this.tiles.filter(qi=>qi.key===`${Ur[0]}_${Ur[1]}_${sr}`)[0]}getTileExtent(ve,ze){return this.getTileIndices(ze,ve)}getTileByZXY(ve,ze,yt){return this.tiles.filter(sr=>sr.key===`${ze}_${yt}_${ve}`)[0]}clear(){for(const ve of this.cacheTiles.values())ve.isLoading?ve.abortLoad():this.onTileUnload(ve);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const ve=this.options.updateStrategy,ze=new Map;for(const sr of this.cacheTiles.values())ze.set(sr.key,sr.isVisible),sr.isCurrent=!1,sr.isVisible=!1;for(const sr of this.currentTiles)sr.isCurrent=!0,sr.isVisible=!0;const yt=Array.from(this.cacheTiles.values());typeof ve=="function"?ve(yt):Cu[ve](yt);let An=!1;Array.from(this.cacheTiles.values()).forEach(sr=>{sr.isVisible!==ze.get(sr.key)?(sr.isVisibleChange=!0,An=!0):sr.isVisibleChange=!1}),An&&this.emit("tile-update")}getTileIndices(ve,ze){const{tileSize:yt,extent:An,zoomOffset:sr}=this.options,Ur=Math.floor(this.options.maxZoom),yi=Math.ceil(this.options.minZoom);return eh({maxZoom:Ur,minZoom:yi,zoomOffset:sr,tileSize:yt,zoom:ve,latLonBounds:ze,extent:An})}getTileId(ve,ze,yt){return`${ve},${ze},${yt}`}loadFinished(){const ve=!this.currentTiles.some(ze=>!ze.isDone);return ve&&this.emit("tiles-load-finished"),ve}getTile(ve,ze,yt){const An=this.getTileId(ve,ze,yt);return this.cacheTiles.get(An)}createTile(ve,ze,yt){const An=this.getTileId(ve,ze,yt),sr=new Df({x:ve,y:ze,z:yt,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(An,sr),sr.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),sr}resizeCacheTiles(){const ve=ja*this.currentTiles.length;if(this.cacheTiles.size>ve){for(const[yt,An]of this.cacheTiles)if(!An.isVisible&&!this.currentTiles.includes(An)&&(this.cacheTiles.delete(yt),this.onTileUnload(An)),this.cacheTiles.size<=ve)break}this.rebuildTileTree()}rebuildTileTree(){for(const ve of this.cacheTiles.values())ve.parent=null,ve.children.length=0;for(const ve of this.cacheTiles.values()){const ze=this.getNearestAncestor(ve.x,ve.y,ve.z);ve.parent=ze,ze!=null&&ze.children&&ze.children.push(ve)}}getNearestAncestor(ve,ze,yt){for(;yt>this.options.minZoom;){ve=Math.floor(ve/2),ze=Math.floor(ze/2),yt=yt-1;const An=this.getTile(ve,ze,yt);if(An)return An}return null}};function Up(ve){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(ve)}function kf(ve){const ze=[];let yt=/\{([a-z])-([a-z])\}/.exec(ve);if(yt){const An=yt[1].charCodeAt(0),sr=yt[2].charCodeAt(0);let Ur;for(Ur=An;Ur<=sr;++Ur)ze.push(ve.replace(yt[0],String.fromCharCode(Ur)));return ze}if(yt=/\{(\d+)-(\d+)\}/.exec(ve),yt){const An=parseInt(yt[2],10);for(let sr=parseInt(yt[1],10);sr<=An;sr++)ze.push(ve.replace(yt[0],sr.toString()));return ze}return ze.push(ve),ze}function Zs(ve,ze){if(!ve||!ve.length)throw new Error("url is not allowed to be empty");const{x:yt,y:An,z:sr}=ze,Ur=kf(ve),yi=Math.abs(yt+An)%Ur.length;return(Re(Ur[yi])?`${Ur[yi]}/{z}/{x}/{y}`:Ur[yi]).replace(/\{x\}/g,yt.toString()).replace(/\{y\}/g,An.toString()).replace(/\{z\}/g,sr.toString()).replace(/\{bbox\}/g,Vu(yt,An,sr).join(",")).replace(/\{-y\}/g,(Math.pow(2,sr)-An-1).toString())}function up(ve,ze){const{x:yt,y:An,z:sr,layer:Ur,version:yi="1.0.0",style:qi="default",format:pa,service:_a="WMTS",tileMatrixset:xs}=ze,Fa=kf(ve),Ia=Math.abs(yt+An)%Fa.length;return`${Fa[Ia]}&SERVICE=${_a}&REQUEST=GetTile&VERSION=${yi}&LAYER=${Ur}&STYLE=${qi}&TILEMATRIXSET=${xs}&FORMAT=${pa}&TILECOL=${yt}&TILEROW=${An}&TILEMATRIX=${sr}`}function xf(ve,ze){return ve==null?ze:ve}},48271:function(mt,W,D){"use strict";D.d(W,{oT:function(){return ha},Ie:function(){return ty},dW:function(){return Hx},GI:function(){return KS},xs:function(){return pR}});var q={},G={},E=a=>G[a],he=(a,o)=>{G[a]=o},ne=a=>q[a],ue=(a,o)=>{q[a]=o},ce={},xe={},oe=34,Ve=10,re=13;function me(a){return new Function("d","return {"+a.map(function(o,f){return JSON.stringify(o)+": d["+f+'] || ""'}).join(",")+"}")}function Re(a,o){var f=me(a);return function(m,T){return o(f(m),T,a)}}function Y(a){var o=Object.create(null),f=[];return a.forEach(function(m){for(var T in m)T in o||f.push(o[T]=T)}),f}function le(a,o){var f=a+"",m=f.length;return m<o?new Array(o-m+1).join(0)+f:f}function K(a){return a<0?"-"+le(-a,6):a>9999?"+"+le(a,6):le(a,4)}function _e(a){var o=a.getUTCHours(),f=a.getUTCMinutes(),m=a.getUTCSeconds(),T=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":K(a.getUTCFullYear(),4)+"-"+le(a.getUTCMonth()+1,2)+"-"+le(a.getUTCDate(),2)+(T?"T"+le(o,2)+":"+le(f,2)+":"+le(m,2)+"."+le(T,3)+"Z":m?"T"+le(o,2)+":"+le(f,2)+":"+le(m,2)+"Z":f||o?"T"+le(o,2)+":"+le(f,2)+"Z":"")}function et(a){var o=new RegExp('["'+a+`
\r]`),f=a.charCodeAt(0);function m(Ce,Ye){var Bt,rn,Sn=T(Ce,function(lr,Br){if(Bt)return Bt(lr,Br-1);rn=lr,Bt=Ye?Re(lr,Ye):me(lr)});return Sn.columns=rn||[],Sn}function T(Ce,Ye){var Bt=[],rn=Ce.length,Sn=0,lr=0,Br,Er=rn<=0,ui=!1;Ce.charCodeAt(rn-1)===Ve&&--rn,Ce.charCodeAt(rn-1)===re&&--rn;function ji(){if(Er)return xe;if(ui)return ui=!1,ce;var no,Gr=Sn,ro;if(Ce.charCodeAt(Gr)===oe){for(;Sn++<rn&&Ce.charCodeAt(Sn)!==oe||Ce.charCodeAt(++Sn)===oe;);return(no=Sn)>=rn?Er=!0:(ro=Ce.charCodeAt(Sn++))===Ve?ui=!0:ro===re&&(ui=!0,Ce.charCodeAt(Sn)===Ve&&++Sn),Ce.slice(Gr+1,no-1).replace(/""/g,'"')}for(;Sn<rn;){if((ro=Ce.charCodeAt(no=Sn++))===Ve)ui=!0;else if(ro===re)ui=!0,Ce.charCodeAt(Sn)===Ve&&++Sn;else if(ro!==f)continue;return Ce.slice(Gr,no)}return Er=!0,Ce.slice(Gr,rn)}for(;(Br=ji())!==xe;){for(var Po=[];Br!==ce&&Br!==xe;)Po.push(Br),Br=ji();Ye&&(Po=Ye(Po,lr++))==null||Bt.push(Po)}return Bt}function C(Ce,Ye){return Ce.map(function(Bt){return Ye.map(function(rn){return Ae(Bt[rn])}).join(a)})}function L(Ce,Ye){return Ye==null&&(Ye=Y(Ce)),[Ye.map(Ae).join(a)].concat(C(Ce,Ye)).join(`
`)}function F(Ce,Ye){return Ye==null&&(Ye=Y(Ce)),C(Ce,Ye).join(`
`)}function V(Ce){return Ce.map(ae).join(`
`)}function ae(Ce){return Ce.map(Ae).join(a)}function Ae(Ce){return Ce==null?"":Ce instanceof Date?_e(Ce):o.test(Ce+="")?'"'+Ce.replace(/"/g,'""')+'"':Ce}return{parse:m,parseRows:T,format:L,formatBody:F,formatRows:V,formatRow:ae,formatValue:Ae}}var Je=et(","),Ot=Je.parse,dt=Je.parseRows,bt=Je.format,Me=Je.formatBody,we=Je.formatRows,je=Je.formatRow,Ze=Je.formatValue,ut=D(1449);function Qt(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function De(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function St(a){if(a.length>1&&isNumber(a[0])&&isNumber(a[1]))return!0;if(Array.isArray(a[0])&&a[0].length)return St(a[0]);throw new Error("coordinates must only contain numbers")}function Oe(a,o,f){if(!o||!f)throw new Error("type and name required");if(!a||a.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.type)}function it(a,o,f){if(!a)throw new Error("No feature passed");if(!f)throw new Error(".featureOf() requires a name");if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!a.geometry||a.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.geometry.type)}function Ke(a,o,f){if(!a)throw new Error("No featureCollection passed");if(!f)throw new Error(".collectionOf() requires a name");if(!a||a.type!=="FeatureCollection")throw new Error("Invalid input to "+f+", FeatureCollection required");for(var m=0,T=a.features;m<T.length;m++){var C=T[m];if(!C||C.type!=="Feature"||!C.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!C.geometry||C.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+C.geometry.type)}}function Xe(a){return a.type==="Feature"?a.geometry:a}function Pt(a,o){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}var xt=D(39034),Ie=D(8543),Wt=D(38163),hn=D.n(Wt);function Pn(a,o){return a.map(f=>f[o]*1)}function $n(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function nr(a){return Array.isArray(a)?a.length===0?!1:!!$n(a[0]):!1}function Ft(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function Jt(a){const o=Object.isFrozen(a)?Ie.lodashUtil.cloneDeep(a):a;return hn()(o,!0),o}function ln(a,o){return a||[[o[0],o[3]],[o[2],o[3]],[o[2],o[1]],[o[0],o[1]]]}var Un=Object.defineProperty,on=Object.defineProperties,zt=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,Vt=(a,o,f)=>o in a?Un(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,U=(a,o)=>{for(var f in o||(o={}))ke.call(o,f)&&Vt(a,f,o[f]);if(kt)for(var f of kt(o))nt.call(o,f)&&Vt(a,f,o[f]);return a},pe=(a,o)=>on(a,zt(o));function ct(a,o){const{x:f,y:m,x1:T,y1:C,coordinates:L,geometry:F}=o,V=[];if(!Array.isArray(a))return{dataArray:[]};if(F)return a.filter(ae=>ae[F]&&ae[F].type&&ae[F].coordinates&&ae[F].coordinates.length>0).forEach((ae,Ae)=>{const Ce=Jt(ae[F]);(0,xt.nG)(Ce,Ye=>{const Bt=De(Ye),rn=pe(U({},ae),{_id:Ae,coordinates:Bt});V.push(rn)})}),{dataArray:V};for(let ae=0;ae<a.length;ae++){const Ae=a[ae];let Ce=[];if(L){let Bt="Polygon";Array.isArray(L[0])||(Bt="Point"),Array.isArray(L[0])&&!Array.isArray(L[0][0])&&(Bt="LineString"),Ce=Jt({type:Bt,coordinates:Ae[L]}).coordinates}else if(f&&m&&T&&C){const Bt=[parseFloat(Ae[f]),parseFloat(Ae[m])],rn=[parseFloat(Ae[T]),parseFloat(Ae[C])];Ce=[Bt,rn]}else f&&m&&(Ce=[parseFloat(Ae[f]),parseFloat(Ae[m])]);const Ye=pe(U({},Ae),{_id:ae,coordinates:Ce});V.push(Ye)}return{dataArray:V}}function de(a,o){const f=Ot(a);return ct(f,o)}var Yt=Object.defineProperty,sn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Xn=Object.prototype.propertyIsEnumerable,dn=(a,o,f)=>o in a?Yt(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,_t=(a,o)=>{for(var f in o||(o={}))Wn.call(o,f)&&dn(a,f,o[f]);if(Dn)for(var f of Dn(o))Xn.call(o,f)&&dn(a,f,o[f]);return a},Rt=(a,o)=>sn(a,pn(o));function wn(a){const o=a.toString();let f=5381,m=o.length;for(;m;)f=f*33^o.charCodeAt(--m);return f>>>0}function In(a,o){return o===void 0?null:typeof(a.properties[o]*1)=="number"?a.properties[o]*1:a.properties&&a.properties[o]?wn(a.properties[o]+"")%1000019:null}function Zn(a,o){const f=[],m={};return a.features?(a.features=a.features.filter(T=>{const C=T.geometry;return T!=null&&C&&C.type&&C.coordinates&&C.coordinates.length>0}),a=Jt(a),a.features.length===0?{dataArray:[],featureKeys:m}:((0,xt.nG)(a,(T,C)=>{let L=In(T,o==null?void 0:o.featureId);L===null&&(L=C);const F=L,V=De(T),ae=Rt(_t({},T.properties),{coordinates:V,_id:F});f.push(ae)}),{dataArray:f,featureKeys:m})):(a.features=[],{dataArray:[]})}function vt(a,o,f,m){for(var T=m,C=f-o>>1,L=f-o,F,V=a[o],ae=a[o+1],Ae=a[f],Ce=a[f+1],Ye=o+3;Ye<f;Ye+=3){var Bt=Ee(a[Ye],a[Ye+1],V,ae,Ae,Ce);if(Bt>T)F=Ye,T=Bt;else if(Bt===T){var rn=Math.abs(Ye-C);rn<L&&(F=Ye,L=rn)}}T>m&&(F-o>3&&vt(a,o,F,m),a[F+2]=T,f-F>3&&vt(a,F,f,m))}function Ee(a,o,f,m,T,C){var L=T-f,F=C-m;if(L!==0||F!==0){var V=((a-f)*L+(o-m)*F)/(L*L+F*F);V>1?(f=T,m=C):V>0&&(f+=L*V,m+=F*V)}return L=a-f,F=o-m,L*L+F*F}function Fe(a,o,f,m){var T={id:typeof a=="undefined"?null:a,type:o,geometry:f,tags:m,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return st(T),T}function st(a){var o=a.geometry,f=a.type;if(f==="Point"||f==="MultiPoint"||f==="LineString")It(a,o);else if(f==="Polygon"||f==="MultiLineString")for(var m=0;m<o.length;m++)It(a,o[m]);else if(f==="MultiPolygon")for(m=0;m<o.length;m++)for(var T=0;T<o[m].length;T++)It(a,o[m][T])}function It(a,o){for(var f=0;f<o.length;f+=3)a.minX=Math.min(a.minX,o[f]),a.minY=Math.min(a.minY,o[f+1]),a.maxX=Math.max(a.maxX,o[f]),a.maxY=Math.max(a.maxY,o[f+1])}function Mt(a,o){var f=[];if(a.type==="FeatureCollection")for(var m=0;m<a.features.length;m++)En(f,a.features[m],o,m);else a.type==="Feature"?En(f,a,o):En(f,{geometry:a},o);return f}function En(a,o,f,m){if(o.geometry){var T=o.geometry.coordinates,C=o.geometry.type,L=Math.pow(f.tolerance/((1<<f.maxZoom)*f.extent),2),F=[],V=o.id;if(f.promoteId?V=o.properties[f.promoteId]:f.generateId&&(V=m||0),C==="Point")Yn(T,F);else if(C==="MultiPoint")for(var ae=0;ae<T.length;ae++)Yn(T[ae],F);else if(C==="LineString")yr(T,F,L,!1);else if(C==="MultiLineString")if(f.lineMetrics){for(ae=0;ae<T.length;ae++)F=[],yr(T[ae],F,L,!1),a.push(Fe(V,"LineString",F,o.properties));return}else qn(T,F,L,!1);else if(C==="Polygon")qn(T,F,L,!0);else if(C==="MultiPolygon")for(ae=0;ae<T.length;ae++){var Ae=[];qn(T[ae],Ae,L,!0),F.push(Ae)}else if(C==="GeometryCollection"){for(ae=0;ae<o.geometry.geometries.length;ae++)En(a,{id:V,geometry:o.geometry.geometries[ae],properties:o.properties},f,m);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(Fe(V,C,F,o.properties))}}function Yn(a,o){o.push(Pe(a[0])),o.push(Te(a[1])),o.push(0)}function yr(a,o,f,m){for(var T,C,L=0,F=0;F<a.length;F++){var V=Pe(a[F][0]),ae=Te(a[F][1]);o.push(V),o.push(ae),o.push(0),F>0&&(m?L+=(T*ae-V*C)/2:L+=Math.sqrt(Math.pow(V-T,2)+Math.pow(ae-C,2))),T=V,C=ae}var Ae=o.length-3;o[2]=1,vt(o,0,Ae,f),o[Ae+2]=1,o.size=Math.abs(L),o.start=0,o.end=o.size}function qn(a,o,f,m){for(var T=0;T<a.length;T++){var C=[];yr(a[T],C,f,m),o.push(C)}}function Pe(a){return a/360+.5}function Te(a){var o=Math.sin(a*Math.PI/180),f=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return f<0?0:f>1?1:f}function Ue(a,o,f,m,T,C,L,F){if(f/=o,m/=o,C>=f&&L<m)return a;if(L<f||C>=m)return null;for(var V=[],ae=0;ae<a.length;ae++){var Ae=a[ae],Ce=Ae.geometry,Ye=Ae.type,Bt=T===0?Ae.minX:Ae.minY,rn=T===0?Ae.maxX:Ae.maxY;if(Bt>=f&&rn<m){V.push(Ae);continue}else if(rn<f||Bt>=m)continue;var Sn=[];if(Ye==="Point"||Ye==="MultiPoint")ot(Ce,Sn,f,m,T);else if(Ye==="LineString")wt(Ce,Sn,f,m,T,!1,F.lineMetrics);else if(Ye==="MultiLineString")vn(Ce,Sn,f,m,T,!1);else if(Ye==="Polygon")vn(Ce,Sn,f,m,T,!0);else if(Ye==="MultiPolygon")for(var lr=0;lr<Ce.length;lr++){var Br=[];vn(Ce[lr],Br,f,m,T,!0),Br.length&&Sn.push(Br)}if(Sn.length){if(F.lineMetrics&&Ye==="LineString"){for(lr=0;lr<Sn.length;lr++)V.push(Fe(Ae.id,Ye,Sn[lr],Ae.tags));continue}(Ye==="LineString"||Ye==="MultiLineString")&&(Sn.length===1?(Ye="LineString",Sn=Sn[0]):Ye="MultiLineString"),(Ye==="Point"||Ye==="MultiPoint")&&(Ye=Sn.length===3?"Point":"MultiPoint"),V.push(Fe(Ae.id,Ye,Sn,Ae.tags))}}return V.length?V:null}function ot(a,o,f,m,T){for(var C=0;C<a.length;C+=3){var L=a[C+T];L>=f&&L<=m&&(o.push(a[C]),o.push(a[C+1]),o.push(a[C+2]))}}function wt(a,o,f,m,T,C,L){for(var F=$t(a),V=T===0?Kt:Qn,ae=a.start,Ae,Ce,Ye=0;Ye<a.length-3;Ye+=3){var Bt=a[Ye],rn=a[Ye+1],Sn=a[Ye+2],lr=a[Ye+3],Br=a[Ye+4],Er=T===0?Bt:rn,ui=T===0?lr:Br,ji=!1;L&&(Ae=Math.sqrt(Math.pow(Bt-lr,2)+Math.pow(rn-Br,2))),Er<f?ui>f&&(Ce=V(F,Bt,rn,lr,Br,f),L&&(F.start=ae+Ae*Ce)):Er>m?ui<m&&(Ce=V(F,Bt,rn,lr,Br,m),L&&(F.start=ae+Ae*Ce)):Et(F,Bt,rn,Sn),ui<f&&Er>=f&&(Ce=V(F,Bt,rn,lr,Br,f),ji=!0),ui>m&&Er<=m&&(Ce=V(F,Bt,rn,lr,Br,m),ji=!0),!C&&ji&&(L&&(F.end=ae+Ae*Ce),o.push(F),F=$t(a)),L&&(ae+=Ae)}var Po=a.length-3;Bt=a[Po],rn=a[Po+1],Sn=a[Po+2],Er=T===0?Bt:rn,Er>=f&&Er<=m&&Et(F,Bt,rn,Sn),Po=F.length-3,C&&Po>=3&&(F[Po]!==F[0]||F[Po+1]!==F[1])&&Et(F,F[0],F[1],F[2]),F.length&&o.push(F)}function $t(a){var o=[];return o.size=a.size,o.start=a.start,o.end=a.end,o}function vn(a,o,f,m,T,C){for(var L=0;L<a.length;L++)wt(a[L],o,f,m,T,C,!1)}function Et(a,o,f,m){a.push(o),a.push(f),a.push(m)}function Kt(a,o,f,m,T,C){var L=(C-o)/(m-o);return a.push(C),a.push(f+(T-f)*L),a.push(1),L}function Qn(a,o,f,m,T,C){var L=(C-f)/(T-f);return a.push(o+(m-o)*L),a.push(C),a.push(1),L}function _r(a,o){var f=o.buffer/o.extent,m=a,T=Ue(a,1,-1-f,f,0,-1,2,o),C=Ue(a,1,1-f,2+f,0,-1,2,o);return(T||C)&&(m=Ue(a,1,-f,1+f,0,-1,2,o)||[],T&&(m=Vr(T,1).concat(m)),C&&(m=m.concat(Vr(C,-1)))),m}function Vr(a,o){for(var f=[],m=0;m<a.length;m++){var T=a[m],C=T.type,L;if(C==="Point"||C==="MultiPoint"||C==="LineString")L=pr(T.geometry,o);else if(C==="MultiLineString"||C==="Polygon"){L=[];for(var F=0;F<T.geometry.length;F++)L.push(pr(T.geometry[F],o))}else if(C==="MultiPolygon")for(L=[],F=0;F<T.geometry.length;F++){for(var V=[],ae=0;ae<T.geometry[F].length;ae++)V.push(pr(T.geometry[F][ae],o));L.push(V)}f.push(Fe(T.id,C,L,T.tags))}return f}function pr(a,o){var f=[];f.size=a.size,a.start!==void 0&&(f.start=a.start,f.end=a.end);for(var m=0;m<a.length;m+=3)f.push(a[m]+o,a[m+1],a[m+2]);return f}function zr(a,o){if(a.transformed)return a;var f=1<<a.z,m=a.x,T=a.y,C,L,F;for(C=0;C<a.features.length;C++){var V=a.features[C],ae=V.geometry,Ae=V.type;if(V.geometry=[],Ae===1)for(L=0;L<ae.length;L+=2)V.geometry.push(gi(ae[L],ae[L+1],o,f,m,T));else for(L=0;L<ae.length;L++){var Ce=[];for(F=0;F<ae[L].length;F+=2)Ce.push(gi(ae[L][F],ae[L][F+1],o,f,m,T));V.geometry.push(Ce)}}return a.transformed=!0,a}function gi(a,o,f,m,T,C){return[Math.round(f*(a*m-T)),Math.round(f*(o*m-C))]}function wi(a,o,f,m,T){for(var C=o===T.maxZoom?0:T.tolerance/((1<<o)*T.extent),L={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:f,y:m,z:o,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},F=0;F<a.length;F++){L.numFeatures++,Sr(L,a[F],C,T);var V=a[F].minX,ae=a[F].minY,Ae=a[F].maxX,Ce=a[F].maxY;V<L.minX&&(L.minX=V),ae<L.minY&&(L.minY=ae),Ae>L.maxX&&(L.maxX=Ae),Ce>L.maxY&&(L.maxY=Ce)}return L}function Sr(a,o,f,m){var T=o.geometry,C=o.type,L=[];if(C==="Point"||C==="MultiPoint")for(var F=0;F<T.length;F+=3)L.push(T[F]),L.push(T[F+1]),a.numPoints++,a.numSimplified++;else if(C==="LineString")Ti(L,T,a,f,!1,!1);else if(C==="MultiLineString"||C==="Polygon")for(F=0;F<T.length;F++)Ti(L,T[F],a,f,C==="Polygon",F===0);else if(C==="MultiPolygon")for(var V=0;V<T.length;V++){var ae=T[V];for(F=0;F<ae.length;F++)Ti(L,ae[F],a,f,!0,F===0)}if(L.length){var Ae=o.tags||null;if(C==="LineString"&&m.lineMetrics){Ae={};for(var Ce in o.tags)Ae[Ce]=o.tags[Ce];Ae.mapbox_clip_start=T.start/T.size,Ae.mapbox_clip_end=T.end/T.size}var Ye={geometry:L,type:C==="Polygon"||C==="MultiPolygon"?3:C==="LineString"||C==="MultiLineString"?2:1,tags:Ae};o.id!==null&&(Ye.id=o.id),a.features.push(Ye)}}function Ti(a,o,f,m,T,C){var L=m*m;if(m>0&&o.size<(T?L:m)){f.numPoints+=o.length/3;return}for(var F=[],V=0;V<o.length;V+=3)(m===0||o[V+2]>L)&&(f.numSimplified++,F.push(o[V]),F.push(o[V+1])),f.numPoints++;T&&hi(F,C),a.push(F)}function hi(a,o){for(var f=0,m=0,T=a.length,C=T-2;m<T;C=m,m+=2)f+=(a[m]-a[C])*(a[m+1]+a[C+1]);if(f>0===o)for(m=0,T=a.length;m<T/2;m+=2){var L=a[m],F=a[m+1];a[m]=a[T-2-m],a[m+1]=a[T-1-m],a[T-2-m]=L,a[T-1-m]=F}}function ai(a,o){return new Mo(a,o)}function Mo(a,o){o=this.options=ea(Object.create(this.options),o);var f=o.debug;if(f&&console.time("preprocess data"),o.maxZoom<0||o.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(o.promoteId&&o.generateId)throw new Error("promoteId and generateId cannot be used together.");var m=Mt(a,o);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",o.indexMaxZoom,o.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),m=_r(m,o),m.length&&this.splitTile(m,0,0,0),f&&(m.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Mo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mo.prototype.splitTile=function(a,o,f,m,T,C,L){for(var F=[a,o,f,m],V=this.options,ae=V.debug;F.length;){m=F.pop(),f=F.pop(),o=F.pop(),a=F.pop();var Ae=1<<o,Ce=xi(o,f,m),Ye=this.tiles[Ce];if(!Ye&&(ae>1&&console.time("creation"),Ye=this.tiles[Ce]=wi(a,o,f,m,V),this.tileCoords.push({z:o,x:f,y:m}),ae)){ae>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",o,f,m,Ye.numFeatures,Ye.numPoints,Ye.numSimplified),console.timeEnd("creation"));var Bt="z"+o;this.stats[Bt]=(this.stats[Bt]||0)+1,this.total++}if(Ye.source=a,T){if(o===V.maxZoom||o===T)continue;var rn=1<<T-o;if(f!==Math.floor(C/rn)||m!==Math.floor(L/rn))continue}else if(o===V.indexMaxZoom||Ye.numPoints<=V.indexMaxPoints)continue;if(Ye.source=null,a.length!==0){ae>1&&console.time("clipping");var Sn=.5*V.buffer/V.extent,lr=.5-Sn,Br=.5+Sn,Er=1+Sn,ui,ji,Po,no,Gr,ro;ui=ji=Po=no=null,Gr=Ue(a,Ae,f-Sn,f+Br,0,Ye.minX,Ye.maxX,V),ro=Ue(a,Ae,f+lr,f+Er,0,Ye.minX,Ye.maxX,V),a=null,Gr&&(ui=Ue(Gr,Ae,m-Sn,m+Br,1,Ye.minY,Ye.maxY,V),ji=Ue(Gr,Ae,m+lr,m+Er,1,Ye.minY,Ye.maxY,V),Gr=null),ro&&(Po=Ue(ro,Ae,m-Sn,m+Br,1,Ye.minY,Ye.maxY,V),no=Ue(ro,Ae,m+lr,m+Er,1,Ye.minY,Ye.maxY,V),ro=null),ae>1&&console.timeEnd("clipping"),F.push(ui||[],o+1,f*2,m*2),F.push(ji||[],o+1,f*2,m*2+1),F.push(Po||[],o+1,f*2+1,m*2),F.push(no||[],o+1,f*2+1,m*2+1)}}},Mo.prototype.getTile=function(a,o,f){var m=this.options,T=m.extent,C=m.debug;if(a<0||a>24)return null;var L=1<<a;o=(o%L+L)%L;var F=xi(a,o,f);if(this.tiles[F])return zr(this.tiles[F],T);C>1&&console.log("drilling down to z%d-%d-%d",a,o,f);for(var V=a,ae=o,Ae=f,Ce;!Ce&&V>0;)V--,ae=Math.floor(ae/2),Ae=Math.floor(Ae/2),Ce=this.tiles[xi(V,ae,Ae)];return!Ce||!Ce.source?null:(C>1&&console.log("found parent tile z%d-%d-%d",V,ae,Ae),C>1&&console.time("drilling down"),this.splitTile(Ce.source,V,ae,Ae,a,o,f),C>1&&console.timeEnd("drilling down"),this.tiles[F]?zr(this.tiles[F],T):null)};function xi(a,o,f){return((1<<a)*f+o)*32+a}function ea(a,o){for(var f in o)a[f]=o[f];return a}var va=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=a}getTileData(a){return!a||!this.vectorTile.layers[a]?[]:this.vectorLayerCache[a]?this.vectorLayerCache[a]:this.vectorTile.layers[a].features}getFeatureById(){throw new Error("Method not implemented.")}},Ro=Object.defineProperty,$o=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,rt=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,un=Object.prototype.propertyIsEnumerable,Nn=(a,o,f)=>o in a?Ro(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Bn=(a,o)=>{for(var f in o||(o={}))jt.call(o,f)&&Nn(a,f,o[f]);if(rt)for(var f of rt(o))un.call(o,f)&&Nn(a,f,o[f]);return a},yn=(a,o)=>$o(a,Be(o)),Cn=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),dr={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function hr(a){let o=0;for(let f=0,m=a.length,T=m-1,C,L;f<m;T=f++)C=a[f],L=a[T],o+=(L.x-C.x)*(C.y+L.y);return o}function Jr(a){const o=a.length;if(o<=1)return[a];const f=[];let m,T;for(let C=0;C<o;C++){const L=hr(a[C]);L!==0&&(T===void 0&&(T=L<0),T===L<0?(m&&f.push(m),m=[a[C]]):m.push(a[C]))}return m&&f.push(m),f}var zi=["Unknown","Point","LineString","Polygon"];function Ji(a,o,f,m,T){let C=T.geometry;const L=T.type,F=T.tags,V=T.id,ae=a*Math.pow(2,m),Ae=a*o,Ce=a*f;let Ye=zi[L],Bt,rn;function Sn(Br){for(let Er=0;Er<Br.length;Er++){const ui=Br[Er];if(ui[3])break;const ji=180-(ui[1]+Ce)*360/ae,Po=(ui[0]+Ae)*360/ae-180,no=360/Math.PI*Math.atan(Math.exp(ji*Math.PI/180))-90;Br[Er]=[Po,no,0,1]}}switch(L){case 1:const Br=[];for(Bt=0;Bt<C.length;Bt++)Br[Bt]=C[Bt][0];C=Br,Sn(C);break;case 2:for(Bt=0;Bt<C.length;Bt++)Sn(C[Bt]);break;case 3:for(C=Jr(C),Bt=0;Bt<C.length;Bt++)for(rn=0;rn<C[Bt].length;rn++)Sn(C[Bt][rn]);break}return C.length===1?C=C[0]:Ye="Multi"+Ye,{type:"Feature",geometry:{type:Ye,coordinates:C},properties:F,id:V,tileOrigin:[0,0],coord:""}}var ei=(a,o,f,m)=>Cn(void 0,null,function*(){return new Promise(T=>{const C=o.getTile(a.z,a.x,a.y),F={layers:{defaultLayer:{features:C?C.features.map(ae=>Ji(m,f.x,f.y,f.z,ae)):[]}}},V=new va(F,a.x,a.y,a.z);T(V)})});function Hi(a){const o={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?o:Bn(Bn({},o),a.geojsonvtOptions)}function Ii(a,o){const f=Hi(o),m=f.extent||4096,T=ai(a,f),C=(F,V)=>ei(V,T,F,m),L=yn(Bn(Bn({},dr),o),{getTileData:C});return{data:a,dataArray:[],tilesetOptions:L,isTile:!0}}var Wr=Object.defineProperty,Eo=Object.defineProperties,ci=Object.getOwnPropertyDescriptors,xo=Object.getOwnPropertySymbols,Wi=Object.prototype.hasOwnProperty,oo=Object.prototype.propertyIsEnumerable,Ao=(a,o,f)=>o in a?Wr(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,bs=(a,o)=>{for(var f in o||(o={}))Wi.call(o,f)&&Ao(a,f,o[f]);if(xo)for(var f of xo(o))oo.call(o,f)&&Ao(a,f,o[f]);return a},ma=(a,o)=>Eo(a,ci(o));function ta(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,requestParameters:T={}}=o,C=new Promise(V=>{a instanceof HTMLImageElement||(0,Ie.fg)(a)?V([a]):vs(a,T,ae=>{V(ae)})}),L=ln(m,f);return{originData:a,images:C,_id:1,dataArray:[{_id:0,coordinates:L}]}}function vs(a,o,f){const m=[];if(typeof a=="string")(0,Ie.gJ)(ma(bs({},o),{url:a}),(T,C)=>{C&&(m.push(C),f(m))});else{const T=a.length;let C=0;a.forEach(L=>{(0,Ie.gJ)(ma(bs({},o),{url:L}),(F,V)=>{C++,V&&m.push(V),C===T&&f(m)})})}return ta}var ms=Object.defineProperty,At=Object.defineProperties,Gt=Object.getOwnPropertyDescriptors,jn=Object.getOwnPropertySymbols,Lr=Object.prototype.hasOwnProperty,Oi=Object.prototype.propertyIsEnumerable,Gi=(a,o,f)=>o in a?ms(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Jo=(a,o)=>{for(var f in o||(o={}))Lr.call(o,f)&&Gi(a,f,o[f]);if(jn)for(var f of jn(o))Oi.call(o,f)&&Gi(a,f,o[f]);return a},Gs=(a,o)=>At(a,Gt(o)),Ds=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),zs=(a,o,f,m)=>Ds(void 0,null,function*(){const T={x:o.x,y:o.y,z:o.z},C=(0,Ie.z0)(a,T);return new Promise(L=>{m?m(T,(F,V)=>{if(F||!V){const ae={layers:{defaultLayer:{features:[]}}},Ae=new va(ae,o.x,o.y,o.z);L(Ae)}else{const ae={layers:{defaultLayer:{features:V.features}}},Ae=new va(ae,o.x,o.y,o.z);L(Ae)}}):(0,Ie.Yu)(Gs(Jo({},f),{url:C}),(F,V)=>{if(F||!V){const ae={layers:{defaultLayer:{features:[]}}},Ae=new va(ae,o.x,o.y,o.z);L(Ae)}else{const Ae={layers:{defaultLayer:{features:JSON.parse(V)}}},Ce=new va(Ae,o.x,o.y,o.z);L(Ce)}})})});function hl(a,o){const f=(T,C)=>zs(a,C,o==null?void 0:o.requestParameters,o.getCustomData),m=Gs(Jo({},o),{getTileData:f});return{dataArray:[],tilesetOptions:m,isTile:!0}}var yh=D(38929),Np=D(3614),Ed=D.n(Np),jl=Object.defineProperty,Pf=Object.defineProperties,If=Object.getOwnPropertyDescriptors,lu=Object.getOwnPropertySymbols,ju=Object.prototype.hasOwnProperty,uc=Object.prototype.propertyIsEnumerable,Qf=(a,o,f)=>o in a?jl(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,vu=(a,o)=>{for(var f in o||(o={}))ju.call(o,f)&&Qf(a,f,o[f]);if(lu)for(var f of lu(o))uc.call(o,f)&&Qf(a,f,o[f]);return a},Cs=(a,o)=>Pf(a,If(o)),Ou=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=new yh.VectorTile(new(Ed())(a))}getTileData(a){if(!a||!this.vectorTile.layers[a])return[];if(this.vectorLayerCache[a])return this.vectorLayerCache[a];const o=this.vectorTile.layers[a];if(Array.isArray(o.features))return this.vectorLayerCache[a]=o.features,o.features;const f=[];for(let m=0;m<o.length;m++){const C=o.feature(m).toGeoJSON(this.x,this.y,this.z);f.push(Cs(vu({},C),{properties:vu({id:C.id},C.properties)}))}return this.vectorLayerCache[a]=f,f}getFeatureById(){throw new Error("Method not implemented.")}},yf=Object.defineProperty,Vh=Object.defineProperties,Bp=Object.getOwnPropertyDescriptors,_h=Object.getOwnPropertySymbols,Sd=Object.prototype.hasOwnProperty,Jf=Object.prototype.propertyIsEnumerable,Hh=(a,o,f)=>o in a?yf(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Td=(a,o)=>{for(var f in o||(o={}))Sd.call(o,f)&&Hh(a,f,o[f]);if(_h)for(var f of _h(o))Jf.call(o,f)&&Hh(a,f,o[f]);return a},wd=(a,o)=>Vh(a,Bp(o)),m0=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),Lf={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Fc=(a,o,f,m,T)=>m0(void 0,null,function*(){const C=(0,Ie.z0)(a,o);return new Promise(L=>{if(T)T({x:f.x,y:f.y,z:f.z},(F,V)=>{if(F||!V)L(void 0);else{const ae=new Ou(V,f.x,f.y,f.z);L(ae)}});else{const F=(0,Ie.ks)(wd(Td({},m),{url:C}),(V,ae)=>{if(V||!ae)L(void 0);else{const Ae=new Ou(ae,f.x,f.y,f.z);L(Ae)}});f.xhrCancel=()=>F.cancel()}})});function ap(a,o){const f=Array.isArray(a)?a[0]:a,m=(C,L)=>Fc(f,C,L,o==null?void 0:o.requestParameters,o==null?void 0:o.getCustomData),T=wd(Td(Td({},Lf),o),{getTileData:m});return{data:f,dataArray:[],tilesetOptions:T,isTile:!0}}function Vl(a,o,f){switch(a){case"+":return o+f;case"-":return o-f;case"*":return o*f;case"/":return o/f;case"%":return o%f;case"^":return Math.pow(o,f);case"abs":return Math.abs(o);case"floor":return Math.floor(o);case"round":return Math.round(o);case"ceil":return Math.ceil(o);case"sin":return Math.sin(o);case"cos":return Math.cos(o);case"atan":return f===-1?Math.atan(o):Math.atan2(o,f);case"min":return Math.min(o,f);case"max":return Math.max(o,f);case"log10":return Math.log(o);case"log2":return Math.log2(o);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Ec(a,o){const{width:f,height:m}=o[0],T=o.map(V=>V.rasterData),C=f*m,L=[],F=JSON.stringify(a);for(let V=0;V<C;V++){const ae=JSON.parse(F),Ae=Qc(ae,T,V);if(typeof Ae=="number")L.push(Ae);else{const Ce=Jc(ae);L.push(Ce)}}return L}function Qc(a,o,f){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return o[a[1]][f]}catch(m){return console.warn("Raster Data err!"),0}a.map((m,T)=>{if(Array.isArray(m)&&m.length>0)switch(m[0]){case"band":try{a[T]=o[m[1]][f]}catch(C){console.warn("Raster Data err!"),a[T]=0}break;default:Qc(m,o,f)}})}function mu(a){const[o,f=-1,m=-1]=a;return o===void 0?(console.warn("Express err!"),["+",0,0]):[o.replace(/\s+/g,""),f,m]}function Jc(a){const o=mu(a),f=o[0];let m=o[1],T=o[2];return Array.isArray(m)&&(m=Jc(a[1])),Array.isArray(T)&&(T=Jc(a[2])),Vl(f,m,T)}var cc={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:ef}};function ef(a,o){const f=a[0].rasterData,m=a[1].rasterData,T=a[2].rasterData,C=[],[L,F]=(o==null?void 0:o.countCut)||[2,98],V=(o==null?void 0:o.RMinMax)||Pl(f,L,F),ae=(o==null?void 0:o.GMinMax)||Pl(m,L,F),Ae=(o==null?void 0:o.BMinMax)||Pl(T,L,F);for(let Ce=0;Ce<f.length;Ce++)C.push(Math.max(0,f[Ce]-V[0])),C.push(Math.max(0,m[Ce]-ae[0])),C.push(Math.max(0,T[Ce]-Ae[0]));return{rasterData:C,rMinMax:V,gMinMax:ae,bMinMax:Ae}}function Pl(a,o,f){const m=a.slice().sort((F,V)=>F-V),T=m.length,C=m[Math.ceil(T*o/100)],L=m[Math.ceil(T*f/100)];return[C,L]}var kc=Object.defineProperty,_f=Object.defineProperties,sp=Object.getOwnPropertyDescriptors,Wh=Object.getOwnPropertySymbols,gs=Object.prototype.hasOwnProperty,Ad=Object.prototype.propertyIsEnumerable,Gh=(a,o,f)=>o in a?kc(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Od=(a,o)=>{for(var f in o||(o={}))gs.call(o,f)&&Gh(a,f,o[f]);if(Wh)for(var f of Wh(o))Ad.call(o,f)&&Gh(a,f,o[f]);return a},ul=(a,o)=>_f(a,sp(o)),bh=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())});function xh(a,o,f){return bh(this,null,function*(){if(a.length===0)return{rasterData:[0],width:1,heigh:1};const m=yield Promise.all(a.map(({data:V,bands:ae=[0]})=>o(V,ae))),T=[];m.forEach(V=>{Array.isArray(V)?T.push(...V):T.push(V)});const{width:C,height:L}=T[0];let F;switch(typeof f){case"function":F=f(T);break;case"object":Array.isArray(f)?F={rasterData:Ec(f,T)}:F=ie(f,T);break;default:F={rasterData:T[0].rasterData}}return ul(Od({},F),{width:C,height:L})})}function ie(a,o){const f=cc[a.type];if(f.type==="function")return f.method(o,a==null?void 0:a.options);if(f.type==="operation")return a.type==="rgb"?Se(f.expression,o):{rasterData:Ec(f.expression,o)}}function Se(a,o){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const f=Ec(a.r||["band",0],o),m=Ec(a.g||["band",0],o),T=Ec(a.b||["band",0],o);return[f,m,T]}function tt(a,o,f,m){return bh(this,null,function*(){const T=yield xh(a,o,f);m(null,{data:T})})}function cn(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,width:T,height:C,min:L,max:F,format:V,operation:ae}=o;let Ae,Ce,Ye;if(V===void 0||Ft(a))Ae=Array.from(a),Ce=T,Ye=C;else{const Sn=Array.isArray(a)?a:[a];Ae=xh(Sn,V,ae)}const Bt=ln(m,f);return{_id:1,dataArray:[{_id:1,data:Ae,width:Ce,height:Ye,min:L,max:F,coordinates:Bt}]}}var Q=D(39827),rr=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),Rr=(a,o,f,m)=>rr(void 0,null,function*(){return new Promise((T,C)=>{o({x:a.x,y:a.y,z:a.z},(L,F)=>{if(L||F.length===0){C(L);return}F&&tt([{data:F,bands:[0]}],f,m,(V,ae)=>{V?C(V):ae&&T(ae)})})})}),Li=(a,o)=>rr(void 0,null,function*(){return new Promise((f,m)=>{o({x:a.x,y:a.y,z:a.z},(T,C)=>{if(T||!C){m(T);return}C instanceof ArrayBuffer?(0,Ie.Co)(C,(L,F)=>{L&&m(L),f(F)}):C instanceof HTMLImageElement?f(C):m(T)})})});function Ui(a,o){return Array.isArray(a)?typeof a[0]=="string"?a.map(f=>(0,Ie.z0)(f,o)):a.map(f=>({url:(0,Ie.z0)(f.url,o),bands:f.bands||[0]})):(0,Ie.z0)(a,o)}function so(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(o=>({url:o,bands:[0]})):a}function uo(a,o){a.xhrCancel=()=>{o.map(f=>{f.abort()})}}var xa=Object.defineProperty,Do=Object.defineProperties,Ea=Object.getOwnPropertyDescriptors,ts=Object.getOwnPropertySymbols,da=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,Rs=(a,o,f)=>o in a?xa(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ba=(a,o)=>{for(var f in o||(o={}))da.call(o,f)&&Rs(a,f,o[f]);if(ts)for(var f of ts(o))Ta.call(o,f)&&Rs(a,f,o[f]);return a},Ha=(a,o)=>Do(a,Ea(o)),fs=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),tl=(a,o,f,m,T)=>fs(void 0,null,function*(){const C=so(o.url);if(C.length>1){const{rasterFiles:L,xhrList:F,errList:V}=yield ja(C,o);if(uo(a,F),V.length>0){f(V,null);return}tt(L,m,T,f)}else{const L=(0,Ie.ks)(o,(F,V)=>{if(F)f(F);else if(V){const ae=[{data:V,bands:C[0].bands}];tt(ae,m,T,f)}});uo(a,[L])}});function ja(a,o){return fs(this,null,function*(){const f=[],m=[],T=[];for(let C=0;C<a.length;C++){const L=a[C],F=Ha(Ba({},o),{url:L.url}),V=L.bands,{err:ae,data:Ae,xhr:Ce}=yield(0,Ie.LF)(Ha(Ba({},F),{type:"arrayBuffer"}));ae&&T.push(ae),m.push(Ce),f.push({data:Ae,bands:V})}return{rasterFiles:f,xhrList:m,errList:T}})}var Cu=Object.defineProperty,os=Object.defineProperties,Sc=Object.getOwnPropertyDescriptors,fc=Object.getOwnPropertySymbols,Vu=Object.prototype.hasOwnProperty,eh=Object.prototype.propertyIsEnumerable,Cd=(a,o,f)=>o in a?Cu(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,bf=(a,o)=>{for(var f in o||(o={}))Vu.call(o,f)&&Cd(a,f,o[f]);if(fc)for(var f of fc(o))eh.call(o,f)&&Cd(a,f,o[f]);return a},Df=(a,o)=>os(a,Sc(o)),tf=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),Eh=(a,o,f,m)=>tf(void 0,null,function*(){const{format:T=Nf,operation:C,requestParameters:L={}}=m,F=Df(bf({},L),{url:Ui(a,o)});return new Promise((V,ae)=>{tl(f,F,(Ae,Ce)=>{Ae?ae(Ae):Ce&&V(Ce)},T,C)})}),Sh=(a,o,f,m)=>tf(void 0,null,function*(){let T;const C=Array.isArray(a)?a[0]:a;return m.wmtsOptions?T=((m==null?void 0:m.getURLFromTemplate)||Ie.jG)(C,bf(bf({},o),m.wmtsOptions)):T=((m==null?void 0:m.getURLFromTemplate)||Ie.z0)(C,o),new Promise((L,F)=>{var V;const ae=(0,Ie.gJ)(Df(bf({},m==null?void 0:m.requestParameters),{url:T,type:((V=m==null?void 0:m.requestParameters)==null?void 0:V.type)||"arrayBuffer"}),(Ae,Ce)=>{Ae?F(Ae):Ce&&L(Ce)},m.transformResponse);f.xhrCancel=()=>ae.cancel()})}),Nf=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),g0=Object.defineProperty,Rd=Object.defineProperties,Fp=Object.getOwnPropertyDescriptors,Bf=Object.getOwnPropertySymbols,kp=Object.prototype.hasOwnProperty,Md=Object.prototype.propertyIsEnumerable,lp=(a,o,f)=>o in a?g0(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ff=(a,o)=>{for(var f in o||(o={}))kp.call(o,f)&&lp(a,f,o[f]);if(Bf)for(var f of Bf(o))Md.call(o,f)&&lp(a,f,o[f]);return a},zp=(a,o)=>Rd(a,Fp(o)),Th={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Up=[Q.n3.ARRAYBUFFER,Q.n3.RGB];function kf(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function Zs(a,o={}){if(kf(a))throw new Error("tile server url is error");let f=(o==null?void 0:o.dataType)||Q.n3.IMAGE;f===Q.n3.RGB&&(f=Q.n3.ARRAYBUFFER);const m=(C,L)=>{switch(f){case Q.n3.IMAGE:return Sh(a,C,L,o);case Q.n3.CUSTOMIMAGE:case Q.n3.CUSTOMTERRAINRGB:return Li(L,o==null?void 0:o.getCustomData);case Q.n3.ARRAYBUFFER:return Eh(a,C,L,o);case Q.n3.CUSTOMARRAYBUFFER:case Q.n3.CUSTOMRGB:return Rr(L,o==null?void 0:o.getCustomData,(o==null?void 0:o.format)||Nf,o==null?void 0:o.operation);default:return Sh(a,C,L,o)}},T=zp(Ff(Ff({},Th),o),{getTileData:m});return{data:a,dataArray:[],tilesetOptions:T,isTile:!0}}var up=Object.defineProperty,xf=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,sr=(a,o,f)=>o in a?up(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ur=(a,o)=>{for(var f in o||(o={}))yt.call(o,f)&&sr(a,f,o[f]);if(ze)for(var f of ze(o))An.call(o,f)&&sr(a,f,o[f]);return a},yi=(a,o)=>xf(a,ve(o)),qi=(a,o)=>{var f={};for(var m in a)yt.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&ze)for(var m of ze(a))o.indexOf(m)<0&&An.call(a,m)&&(f[m]=a[m]);return f};function pa(a,o){const f=o,{extent:m=[121.168,30.2828,121.384,30.4219],coordinates:T,width:C,height:L}=f,F=qi(f,["extent","coordinates","width","height"]);a.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,ae]=F.bands||[0,1],Ae=[a[V],a[ae]],Ce=[];for(let rn=0;rn<Ae[0].length;rn++)Ce.push((Ae[1][rn]-Ae[0][rn])/(Ae[1][rn]+Ae[0][rn]));const Ye=ln(T,m);return{_id:1,dataArray:[yi(Ur({_id:1,data:Ce,width:C,height:L},F),{coordinates:Ye})]}}var _a=Object.defineProperty,xs=Object.defineProperties,Fa=Object.getOwnPropertyDescriptors,Ia=Object.getOwnPropertySymbols,Ru=Object.prototype.hasOwnProperty,nf=Object.prototype.propertyIsEnumerable,nl=(a,o,f)=>o in a?_a(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,co=(a,o)=>{for(var f in o||(o={}))Ru.call(o,f)&&nl(a,f,o[f]);if(Ia)for(var f of Ia(o))nf.call(o,f)&&nl(a,f,o[f]);return a},Yu=(a,o)=>xs(a,Fa(o)),Pd=(a,o)=>{var f={};for(var m in a)Ru.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&Ia)for(var m of Ia(a))o.indexOf(m)<0&&nf.call(a,m)&&(f[m]=a[m]);return f};function wh(a,o){const f=o,{extent:m,coordinates:T,width:C,height:L}=f,F=Pd(f,["extent","coordinates","width","height"]);a.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,ae,Ae]=F.bands||[0,1,2],Ce=[a[V],a[ae],a[Ae]],Ye=[],[Bt,rn]=(F==null?void 0:F.countCut)||[2,98],Sn=(F==null?void 0:F.RMinMax)||Pl(Ce[0],Bt,rn),lr=(F==null?void 0:F.GMinMax)||Pl(Ce[1],Bt,rn),Br=(F==null?void 0:F.BMinMax)||Pl(Ce[2],Bt,rn);for(let ji=0;ji<Ce[0].length;ji++)Ye.push(Math.max(0,Ce[0][ji]-Sn[0])),Ye.push(Math.max(0,Ce[1][ji]-lr[0])),Ye.push(Math.max(0,Ce[2][ji]-Br[0]));const Er=ln(T,m);return{_id:1,dataArray:[Yu(co({_id:1,data:Ye,width:C,height:L,rMinMax:Sn,gMinMax:lr,bMinMax:Br},F),{coordinates:Er})]}}var wa=Object.defineProperty,ns=Object.defineProperties,y0=Object.getOwnPropertyDescriptors,Zi=Object.getOwnPropertySymbols,Ef=Object.prototype.hasOwnProperty,Id=Object.prototype.propertyIsEnumerable,Ah=(a,o,f)=>o in a?wa(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Sf=(a,o)=>{for(var f in o||(o={}))Ef.call(o,f)&&Ah(a,f,o[f]);if(Zi)for(var f of Zi(o))Id.call(o,f)&&Ah(a,f,o[f]);return a},hc=(a,o)=>ns(a,y0(o)),_0=(a,o)=>{var f={};for(var m in a)Ef.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&Zi)for(var m of Zi(a))o.indexOf(m)<0&&Id.call(a,m)&&(f[m]=a[m]);return f};function Oh(a,o){const f=o,{extent:m,coordinates:T,min:C,max:L,width:F,height:V,format:ae,operation:Ae}=f,Ce=_0(f,["extent","coordinates","min","max","width","height","format","operation"]);let Ye;if(ae===void 0||Ft(a))Ye=Array.from(a);else{const Sn=Array.isArray(a)?a:[a];Ye=xh(Sn,ae,Ae)}const Bt=ln(T,m);return{_id:1,dataArray:[hc(Sf({_id:1,data:Ye,width:F,height:V},Ce),{min:C,max:L,coordinates:Bt})]}}var Ku=Object.defineProperty,th=Object.defineProperties,b0=Object.getOwnPropertyDescriptors,Ld=Object.getOwnPropertySymbols,x0=Object.prototype.hasOwnProperty,iv=Object.prototype.propertyIsEnumerable,dc=(a,o,f)=>o in a?Ku(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,zc=(a,o)=>{for(var f in o||(o={}))x0.call(o,f)&&dc(a,f,o[f]);if(Ld)for(var f of Ld(o))iv.call(o,f)&&dc(a,f,o[f]);return a},ba=(a,o)=>th(a,b0(o)),pc=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),rf={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},gu=a=>pc(void 0,null,function*(){return new Promise(o=>{const[f,m,T,C]=a.bounds,L={layers:{testTile:{features:[{type:"Feature",properties:{key:a.x+"/"+a.y+"/"+a.z,x:(f+T)/2,y:(m+C)/2},geometry:{type:"LineString",coordinates:[[T,C],[T,m],[f,m],[f,m]]}}]}}};o(L)})});function Zh(a,o){const f=T=>gu(T),m=ba(zc(zc({},rf),o),{getTileData:f});return{data:a,dataArray:[],tilesetOptions:m,isTile:!0}}var ql=D(46343),Hu=D(26729),qu=D.n(Hu),cp=D(69848),No=D.n(cp),So=Object.defineProperty,Ql=Object.getOwnPropertySymbols,Qu=Object.prototype.hasOwnProperty,Ju=Object.prototype.propertyIsEnumerable,dl=(a,o,f)=>o in a?So(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Tc=(a,o)=>{for(var f in o||(o={}))Qu.call(o,f)&&dl(a,f,o[f]);if(Ql)for(var f of Ql(o))Ju.call(o,f)&&dl(a,f,o[f]);return a};function nh(a,o){const{radius:f=40,maxZoom:m=18,minZoom:T=0,zoom:C=2}=o;if(a.pointIndex){const V=a.pointIndex.getClusters(a.extent,Math.floor(C));return a.dataArray=Dd(V),a}const L=new(No())({radius:f,minZoom:T,maxZoom:m}),F={type:"FeatureCollection",features:[]};return F.features=a.dataArray.map(V=>({type:"Feature",geometry:{type:"Point",coordinates:V.coordinates},properties:Tc({},V)})),L.load(F.features),L}function Dd(a){return a.map((o,f)=>Tc({coordinates:o.geometry.coordinates,_id:f+1},o.properties))}function Ms(a){if(a.length===0)throw new Error("max requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]>o&&(o=a[f]);return o}function yu(a){if(a.length===0)throw new Error("min requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]<o&&(o=a[f]);return o}function E0(a){if(a.length===0)return 0;let o=a[0],f=0,m;for(let T=1;T<a.length;T++)m=o+a[T]*1,Math.abs(o)>=Math.abs(a[T])?f+=o-m+a[T]:f+=a[T]-m+o,o=m;return o+f*1}function Xh(a){if(a.length===0)throw new Error("mean requires at least one data point");return E0(a)/a.length}var fp={min:yu,max:Ms,mean:Xh,sum:E0},Ch=Object.defineProperty,ec=Object.getOwnPropertySymbols,hp=Object.prototype.hasOwnProperty,wc=Object.prototype.propertyIsEnumerable,jp=(a,o,f)=>o in a?Ch(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Uc=(a,o)=>{for(var f in o||(o={}))hp.call(o,f)&&jp(a,f,o[f]);if(ec)for(var f of ec(o))wc.call(o,f)&&jp(a,f,o[f]);return a},Nd=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),{cloneDeep:S0,isFunction:Rh,isString:$h,mergeWith:T0}=Ie.lodashUtil;function zf(a,o){if(Array.isArray(o))return o}var Uf=class extends Hu.EventEmitter{constructor(a,o){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new ql.ni},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=a,this.initCfg(o),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(a){return this.clusterIndex.getClusters(this.caculClusterExtent(2),a)}getClustersLeaves(a){return this.clusterIndex.getLeaves(a,1/0)}getParserType(){return this.parser.type}updateClusterData(a){const{method:o="sum",field:f}=this.clusterOptions;let m=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(a));this.clusterOptions.zoom=a,m.forEach(T=>{T.id||(T.properties.point_count=1)}),(f||Rh(o))&&(m=m.map(T=>{const C=T.id;if(C){const F=this.clusterIndex.getLeaves(C,1/0).map(ae=>ae.properties);let V;if($h(o)&&f){const ae=Pn(F,f);V=fp[o](ae)}Rh(o)&&(V=o(F)),T.properties.stat=V}else T.properties.point_count=1;return T})),this.data=E("geojson")({type:"FeatureCollection",features:m}),this.executeTrans()}getFeatureById(a){const{type:o="geojson",geometry:f}=this.parser;if(o==="geojson"&&!this.cluster){const m=a<this.originData.features.length?this.originData.features[a]:"null",T=S0(m);if(T!=null&&T.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const C=this.data.dataArray.find(L=>L._id===a);T.properties=C}return T}else return o==="json"&&f?this.data.dataArray.find(m=>m._id===a):a<this.data.dataArray.length?this.data.dataArray[a]:"null"}updateFeaturePropertiesById(a,o){this.data.dataArray=this.data.dataArray.map(f=>f._id===a?Uc(Uc({},f),o):f),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(a,o){const f=this.data.dataArray.find(m=>m[a]===o);return f==null?void 0:f._id}setData(a,o){this.originData=a,this.dataArrayChanged=!1,this.initCfg(o),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var a;(a=this.tileset)==null||a.reloadAll()}reloadTilebyId(a,o,f){var m;(m=this.tileset)==null||m.reloadTileById(a,o,f)}reloadTileByLnglat(a,o,f){var m;(m=this.tileset)==null||m.reloadTileByLnglat(a,o,f)}getTileExtent(a,o){var f;return(f=this.tileset)==null?void 0:f.getTileExtent(a,o)}getTileByZXY(a,o,f){var m;return(m=this.tileset)==null?void 0:m.getTileByZXY(a,o,f)}reloadTileByExtent(a,o){var f;(f=this.tileset)==null||f.reloadTileByExtent(a,o)}destroy(){var a;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(a=this.tileset)==null||a.destroy()}processData(){return Nd(this,null,function*(){return new Promise((a,o)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),a({})}catch(f){o(f)}})})}initCfg(a){this.cfg=T0(this.cfg,a,zf);const o=this.cfg;o&&(o.parser&&(this.parser=o.parser),o.transforms&&(this.transforms=o.transforms),this.cluster=o.cluster||!1,o.clusterOptions&&(this.cluster=!0,this.clusterOptions=Uc(Uc({},this.clusterOptions),o.clusterOptions)))}init(){return Nd(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const a=this.parser,o=a.type||"geojson",f=E(o);this.data=f(this.originData,a),this.tileset=this.initTileset(),!a.cancelExtent&&(this.extent=(0,Ie.We)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(a){this.center=[(a[0]+a[2])/2,(a[1]+a[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:a}=this.data;return a?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(a),this.tileset):new Ie.nx(Uc({},a))):void 0}executeTrans(){this.transforms.forEach(o=>{const{type:f}=o,m=ne(f)(this.data,o);Object.assign(this.data,m)})}initCluster(){if(!this.cluster)return;const a=this.clusterOptions||{};this.clusterIndex=nh(this.data,a)}caculClusterExtent(a){let o=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(o=(0,Ie.yA)((0,Ie.ds)(this.extent),a)),o[0].concat(o[1])}};function w0(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.filter(f)),a}var rh=6378e3;function Tf(a,o){const f=a.dataArray,{size:m=10}=o,T=m/(2*Math.PI*rh)*(256<<20)/2,{gridHash:C,gridOffset:L}=ov(f,m),F=_(C,L,o);return{yOffset:T,xOffset:T,radius:T,type:"grid",dataArray:F}}function ov(a,o){let f=1/0,m=-1/0,T;for(const V of a)T=V.coordinates[1],Number.isFinite(T)&&(f=T<f?T:f,m=T>m?T:m);const C=(f+m)/2,L=jf(o,C);if(L.xOffset<=0||L.yOffset<=0)return{gridHash:{},gridOffset:L};const F={};for(const V of a){const ae=V.coordinates[1],Ae=V.coordinates[0];if(Number.isFinite(ae)&&Number.isFinite(Ae)){const Ce=Math.floor((ae+90)/L.yOffset),Ye=Math.floor((Ae+180)/L.xOffset),Bt=`${Ce}-${Ye}`;F[Bt]=F[Bt]||{count:0,points:[]},F[Bt].count+=1,F[Bt].points.push(V)}}return{gridHash:F,gridOffset:L}}function jf(a,o){const f=Yh(a),m=A0(o,a);return{yOffset:f,xOffset:m}}function Yh(a){return a/rh*(180/Math.PI)}function A0(a,o){return o/rh*(180/Math.PI)/Math.cos(a*Math.PI/180)}function _(a,o,f){return Object.keys(a).reduce((m,T,C)=>{const L=T.split("-"),F=parseInt(L[0],10),V=parseInt(L[1],10),ae={};if(f.field&&f.method){const Ae=Ie.a5.getColumn(a[T].points,f.field);ae[f.method]=Ie.a5.statMap[f.method](Ae)}return Object.assign(ae,{_id:C,coordinates:(0,Ie.Z)([-180+o.xOffset*(V+.5),-90+o.yOffset*(F+.5)]),rawData:a[T].points,count:a[T].count}),m.push(ae),m},[])}var S=Math.PI/3,x=[0,S,2*S,3*S,4*S,5*S];function O(a){return a[0]}function k(a){return a[1]}function Z(){var a=0,o=0,f=1,m=1,T=O,C=k,L,F,V;function ae(Ce){var Ye={},Bt=[],rn,Sn=Ce.length;for(rn=0;rn<Sn;++rn)if(!(isNaN(Br=+T.call(null,lr=Ce[rn],rn,Ce))||isNaN(Er=+C.call(null,lr,rn,Ce)))){var lr,Br,Er,ui=Math.round(Er=Er/V),ji=Math.round(Br=Br/F-(ui&1)/2),Po=Er-ui;if(Math.abs(Po)*3>1){var no=Br-ji,Gr=ji+(Br<ji?-1:1)/2,ro=ui+(Er<ui?-1:1),Da=Br-Gr,is=Er-ro;no*no+Po*Po>Da*Da+is*is&&(ji=Gr+(ui&1?1:-1)/2,ui=ro)}var Qo=ji+"-"+ui,ps=Ye[Qo];ps?ps.push(lr):(Bt.push(ps=Ye[Qo]=[lr]),ps.x=(ji+(ui&1)/2)*F,ps.y=ui*V)}return Bt}function Ae(Ce){var Ye=0,Bt=0;return x.map(function(rn){var Sn=Math.sin(rn)*Ce,lr=-Math.cos(rn)*Ce,Br=Sn-Ye,Er=lr-Bt;return Ye=Sn,Bt=lr,[Br,Er]})}return ae.hexagon=function(Ce){return"m"+Ae(Ce==null?L:+Ce).join("l")+"z"},ae.centers=function(){for(var Ce=[],Ye=Math.round(o/V),Bt=Math.round(a/F),rn=Ye*V;rn<m+L;rn+=V,++Ye)for(var Sn=Bt*F+(Ye&1)*F/2;Sn<f+F/2;Sn+=F)Ce.push([Sn,rn]);return Ce},ae.mesh=function(){var Ce=Ae(L).slice(0,4).join("l");return ae.centers().map(function(Ye){return"M"+Ye+"m"+Ce}).join("")},ae.x=function(Ce){return arguments.length?(T=Ce,ae):T},ae.y=function(Ce){return arguments.length?(C=Ce,ae):C},ae.radius=function(Ce){return arguments.length?(L=+Ce,F=L*2*Math.sin(S),V=L*1.5,ae):L},ae.size=function(Ce){return arguments.length?(a=o=0,f=+Ce[0],m=+Ce[1],ae):[f-a,m-o]},ae.extent=function(Ce){return arguments.length?(a=+Ce[0][0],o=+Ce[0][1],f=+Ce[1][0],m=+Ce[1][1],ae):[[a,o],[f,m]]},ae.radius(1)}var J=Object.defineProperty,ge=Object.defineProperties,We=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,Xt=(a,o,f)=>o in a?J(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,bn=(a,o)=>{for(var f in o||(o={}))Ut.call(o,f)&&Xt(a,f,o[f]);if(ht)for(var f of ht(o))Ht.call(o,f)&&Xt(a,f,o[f]);return a},mn=(a,o)=>ge(a,We(o)),zn=6378e3;function an(a,o){const f=a.dataArray,{size:m=10,method:T="sum"}=o,C=m/(2*Math.PI*zn)*(256<<20)/2,L=f.map(Ae=>{const[Ce,Ye]=(0,Ie.Z)(Ae.coordinates);return mn(bn({},Ae),{coordinates:[Ce,Ye]})});return{dataArray:Z().radius(C).x(Ae=>Ae.coordinates[0]).y(Ae=>Ae.coordinates[1])(L).map((Ae,Ce)=>{if(o.field&&T){const Ye=Ie.a5.getColumn(Ae,o.field);Ae[T]=Ie.a5.statMap[T](Ye)}return{[o.method]:Ae[T],count:Ae.length,rawData:Ae,coordinates:[Ae.x,Ae.y],_id:Ce}}),radius:C,xOffset:C,yOffset:C,type:"hexagon"}}var kn=Object.defineProperty,er=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,wr=(a,o,f)=>o in a?kn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Fr=(a,o)=>{for(var f in o||(o={}))vr.call(o,f)&&wr(a,f,o[f]);if(er)for(var f of er(o))Mr.call(o,f)&&wr(a,f,o[f]);return a};function ti(a,o){const{sourceField:f,targetField:m,data:T}=o,C={};return T.forEach(L=>{C[L[f]]=L}),a.dataArray=a.dataArray.map(L=>{const F=L[m];return Fr(Fr({},L),C[F])}),a}function Ni(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.map(f)),a}var Pi=D(4771);he("rasterTile",Zs),he("mvt",ap),he("geojsonvt",Ii),he("testTile",Zh),he("geojson",Zn),he("jsonTile",hl),he("image",ta),he("csv",de),he("json",ct),he("raster",cn),he("rasterRgb",Oh),he("rgb",wh),he("ndi",pa),ue("cluster",nh),ue("filter",w0),ue("join",ti),ue("map",Ni),ue("grid",Tf),ue("hexagon",an);var lo=Uf;class zo extends null{getMarkerLayerContainerSize(){}constructor(o){super(),_defineProperty(this,"markerOption",void 0),_defineProperty(this,"popup",void 0),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"lngLat",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"added",!1),_defineProperty(this,"preLngLat",{lng:0,lat:0}),_defineProperty(this,"onMarkerDragStart",f=>{const m=this.mapsService.getContainer();if(!m)return;this.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});const{left:T,top:C}=m.getClientRects()[0],{x:L,y:F}=f;this.preLngLat=this.mapsService.containerToLngLat([L-T,F-C]),this.mapsService.on("mousemove",this.onMarkerDragMove),document.addEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragstart",this.lngLat)}),_defineProperty(this,"onMarkerDragMove",f=>{const m=f.lngLat||f.lnglat,{lng:T,lat:C}=this.preLngLat,{lng:L,lat:F}=m,V={lng:this.lngLat.lng+L-T,lat:this.lngLat.lat+F-C};this.setLnglat(V),this.preLngLat=m,this.emit("dragging",V)}),_defineProperty(this,"onMarkerDragEnd",()=>{this.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragend",this.lngLat)}),_defineProperty(this,"eventHandle",f=>{this.polyfillEvent(f),this.emit(f.type,{target:f,data:this.markerOption.extData,lngLat:this.lngLat})}),_defineProperty(this,"touchStartTime",void 0),this.markerOption=_objectSpread(_objectSpread({},this.getDefault()),o),bindAll(["update","onMove","onMapClick","updatePositionWhenZoom"],this),this.init()}getDefault(){return{element:void 0,anchor:anchorType.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}addTo(o){this.scene=o,this.mapsService=o.mapService;const{element:f}=this.markerOption;return this.mapsService.getMarkerContainer().appendChild(f),this.registerMarkerEvent(f),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}remove(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();const{element:o}=this.markerOption;return o&&DOM.remove(o),this.popup&&this.popup.remove(),this}setLnglat(o){return this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}getLnglat(){return this.lngLat}getElement(){return this.markerOption.element}setElement(o){if(!this.added)return this.once("added",()=>{this.setElement(o)}),this;const{element:f}=this.markerOption;return f&&DOM.remove(f),this.markerOption.element=o,this.init(),this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.updateDraggable(),this.update(),this}openPopup(){if(!this.added)return this.once("added",()=>{this.openPopup()}),this;const o=this.popup;return o?(o.isOpen()||o.addTo(this.scene),this):this}closePopup(){this.added||this.once("added",()=>{this.closePopup()});const o=this.popup;return o&&o.remove(),this}setPopup(o){return this.popup=o,this.lngLat&&this.popup.setLnglat(this.lngLat),this}togglePopup(){const o=this.popup;if(o)o.isOpen()?o.remove():o.addTo(this.scene);else return this;return this}getPopup(){return this.popup}getOffset(){return this.markerOption.offsets}setDraggable(o){this.markerOption.draggable=o,this.updateDraggable()}getDraggable(){return this.markerOption.draggable}getExtData(){return this.markerOption.extData}setExtData(o){this.markerOption.extData=o}update(){if(!this.mapsService)return;const{element:o,anchor:f}=this.markerOption;this.updatePosition(),DOM.setTransform(o,`${anchorTranslate[f]}`)}updatePositionWhenZoom(o){if(!this.mapsService)return;const{element:f,offsets:m}=this.markerOption,{lng:T,lat:C}=this.lngLat;if(f){f.style.display="block",f.style.whiteSpace="nowrap";const{containerHeight:L,containerWidth:F,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;const ae=o.map,Ae=o.center,Ce=o.zoom,Ye=ae.DE(this.lngLat,Ce,Ae);if(Ye.x=Math.round(Ye.x+m[0]),Ye.y=Math.round(Ye.y-m[1]),Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if(Ye.x>F){const Bt=this.mapsService.lngLatToContainer([T-360,C]);Ye.x=Bt.x}if(Ye.x<0){const Bt=this.mapsService.lngLatToContainer([T+360,C]);Ye.x=Bt.x}}(Ye.x>F||Ye.x<0||Ye.y>L||Ye.y<0)&&(f.style.display="none"),f.style.left=Ye.x+"px",f.style.top=Ye.y+"px",f.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}onMapClick(o){const{element:f}=this.markerOption;this.popup&&f&&this.togglePopup()}getCurrentContainerSize(){const o=this.mapsService.getContainer();return{containerHeight:(o==null?void 0:o.scrollHeight)||0,containerWidth:(o==null?void 0:o.scrollWidth)||0,bounds:this.mapsService.getBounds()}}updateDraggable(){const{element:o}=this.markerOption;o==null||o.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(o==null||o.addEventListener("mousedown",this.onMarkerDragStart))}updatePosition(){if(!this.mapsService)return;const{element:o,offsets:f}=this.markerOption,{lng:m,lat:T}=this.lngLat,C=this.mapsService.lngLatToContainer([m,T]);if(o){o.style.display="block",o.style.whiteSpace="nowrap";const{containerHeight:L,containerWidth:F,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;if(Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if(C.x>F){const ae=this.mapsService.lngLatToContainer([m-360,T]);C.x=ae.x}if(C.x<0){const ae=this.mapsService.lngLatToContainer([m+360,T]);C.x=ae.x}}(C.x>F||C.x<0||C.y>L||C.y<0)&&(o.style.display="none"),o.style.left=C.x+f[0]+"px",o.style.top=C.y-f[1]+"px"}}init(){let{element:o}=this.markerOption;const{color:f,anchor:m}=this.markerOption;if(!o){o=DOM.create("div"),this.markerOption.element=o;const T=document.createElementNS("http://www.w3.org/2000/svg","svg");T.setAttributeNS(null,"display","block"),T.setAttributeNS(null,"height","48px"),T.setAttributeNS(null,"width","48px"),T.setAttributeNS(null,"viewBox","0 0 1024 1024");const C=document.createElementNS("http://www.w3.org/2000/svg","path");C.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),C.setAttributeNS(null,"fill",f),T.appendChild(C),o.appendChild(T)}DOM.addClass(o,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(T=>{var C,L;const F=((C=this.markerOption)===null||C===void 0?void 0:C.style)&&((L=this.markerOption)===null||L===void 0?void 0:L.style[T]);o&&(o.style[T]=F)}),applyAnchorClass(o,m,"marker")}registerMarkerEvent(o){o.addEventListener("click",this.onMapClick),o.addEventListener("mousemove",this.eventHandle),o.addEventListener("click",this.eventHandle),o.addEventListener("mousedown",this.eventHandle),o.addEventListener("mouseup",this.eventHandle),o.addEventListener("dblclick",this.eventHandle),o.addEventListener("contextmenu",this.eventHandle),o.addEventListener("mouseover",this.eventHandle),o.addEventListener("mouseout",this.eventHandle),o.addEventListener("touchstart",this.eventHandle),o.addEventListener("touchend",this.eventHandle)}unRegisterMarkerEvent(){const o=this.getElement();o.removeEventListener("click",this.onMapClick),o.removeEventListener("mousemove",this.eventHandle),o.removeEventListener("click",this.eventHandle),o.removeEventListener("mousedown",this.eventHandle),o.removeEventListener("mouseup",this.eventHandle),o.removeEventListener("dblclick",this.eventHandle),o.removeEventListener("contextmenu",this.eventHandle),o.removeEventListener("mouseover",this.eventHandle),o.removeEventListener("mouseout",this.eventHandle),o.removeEventListener("touchstart",this.eventHandle),o.removeEventListener("touchend",this.eventHandle)}polyfillEvent(o){!this.mapsService||this.mapsService.getType()!=="amap"||isPC()||(o.type==="touchstart"&&(this.touchStartTime=Date.now()),o.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:o,data:this.markerOption.extData,lngLat:this.lngLat}))}addDragHandler(o){return null}onUp(o){throw new Error("Method not implemented.")}}const{merge:Wo}=Ie.lodashUtil;class Go extends null{constructor(o){var f;super(),_defineProperty(this,"markers",[]),_defineProperty(this,"markerLayerOption",void 0),_defineProperty(this,"clusterIndex",void 0),_defineProperty(this,"points",[]),_defineProperty(this,"clusterMarkers",[]),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"zoom",void 0),_defineProperty(this,"bbox",void 0),_defineProperty(this,"inited",void 0),_defineProperty(this,"containerSize",void 0),this.markerLayerOption=Wo(this.getDefault(),o),bindAll(["update"],this),this.zoom=((f=this.markerLayerOption.clusterOption)===null||f===void 0?void 0:f.zoom)||-99}getDefault(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}addTo(o){return this.scene=o,this.mapsService=o.mapService,this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}setContainerSize(){if(!this.mapsService)return;const o=this.mapsService.getContainer();this.containerSize={containerWidth:(o==null?void 0:o.scrollWidth)||0,containerHeight:(o==null?void 0:o.scrollHeight)||0,bounds:this.mapsService.getBounds()}}getContainerSize(){return this.containerSize}addMarker(o){const f=this.markerLayerOption.cluster;if(o.getMarkerLayerContainerSize=this.getContainerSize.bind(this),f&&(this.addPoint(o,this.markers.length),this.mapsService)){const m=this.mapsService.getZoom(),T=this.mapsService.getBounds();this.bbox=padBounds(T,.5),this.zoom=Math.floor(m),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(o)}removeMarker(o){this.markers.indexOf(o);const f=this.markers.indexOf(o);f>-1&&(this.markers.splice(f,1),this.markerLayerOption.cluster&&(this.removePoint(f),this.mapsService&&this.getClusterMarker(this.bbox,this.zoom)))}hide(){this.markers.map(o=>{o.getElement().style.opacity="0"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="0"})}show(){this.markers.map(o=>{o.getElement().style.opacity="1"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="1"})}getMarkers(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}getOriginMarkers(){return this.markers}addMarkers(){this.getMarkers().forEach(o=>{o.addTo(this.scene)})}clear(){this.markers.forEach(o=>{o.remove()}),this.clusterMarkers.forEach(o=>{o.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}destroy(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}addPoint(o,f){const{lng:m,lat:T}=o.getLnglat(),C={geometry:{type:"Point",coordinates:[m,T]},properties:_objectSpread(_objectSpread({},o.getExtData()),{},{marker_id:f})};this.points.push(C),this.clusterIndex&&this.clusterIndex.load(this.points)}removePoint(o){const f=this.points.findIndex(m=>m.properties.marker_id===o);f>-1&&this.points.splice(f,1),this.clusterIndex&&this.clusterIndex.load(this.points)}initCluster(){if(!this.markerLayerOption.cluster)return;const{radius:o,minZoom:f=0,maxZoom:m}=this.markerLayerOption.clusterOption;this.clusterIndex=new Supercluster({radius:o,minZoom:f,maxZoom:m}),this.clusterIndex.load(this.points)}getClusterMarker(o,f){const m=o[0].concat(o[1]),T=this.clusterIndex.getClusters(m,f);this.clusterMarkers.forEach(C=>{C.remove()}),this.clusterMarkers=[],T.forEach(C=>{var L;const{field:F,method:V}=this.markerLayerOption.clusterOption;if((L=C.properties)!==null&&L!==void 0&&L.cluster_id){var ae;const Ce=this.getLeaves((ae=C.properties)===null||ae===void 0?void 0:ae.cluster_id);if(C.properties.clusterData=Ce,F&&V){const Ye=Ce==null?void 0:Ce.map(lr=>({[F]:lr.properties[F]})),Bt=Satistics.getColumn(Ye,F),rn=Satistics.getSatByColumn(V,Bt),Sn="point_"+V;C.properties[Sn]=rn.toFixed(2)}}const Ae=this.clusterMarker(C);this.clusterMarkers.push(Ae),Ae.addTo(this.scene)})}getLeaves(o,f=1/0,m=0){return o?this.clusterIndex.getLeaves(o,f,m):null}clusterMarker(o){const f=this.markerLayerOption.clusterOption,{element:m=this.generateElement.bind(this)}=f;return new Marker({element:m(o)}).setLnglat({lng:o.geometry.coordinates[0],lat:o.geometry.coordinates[1]})}normalMarker(o){const f=o.properties.marker_id;return this.markers[f]}update(){if(!this.mapsService||this.markers.length===0)return;const o=this.mapsService.getZoom(),f=this.mapsService.getBounds();(!this.bbox||Math.abs(o-this.zoom)>=1||!boundsContains(this.bbox,f))&&(this.bbox=padBounds(f,.5),this.zoom=Math.floor(o),this.getClusterMarker(this.bbox,this.zoom))}generateElement(o){const f=DOM.create("div","l7-marker-cluster"),m=DOM.create("div","",f),T=DOM.create("span","",m),{field:C,method:L}=this.markerLayerOption.clusterOption;o.properties.point_count=o.properties.point_count||1;const F=C&&L?o.properties["point_"+L]||o.properties[C]:o.properties.point_count;return T.textContent=F,f}}var as=D(4157),Or=D(1413),en=D(4942);class ha extends qu(){constructor(o){super(),(0,en.Z)(this,"controlOption",void 0),(0,en.Z)(this,"container",void 0),(0,en.Z)(this,"isShow",void 0),(0,en.Z)(this,"sceneContainer",void 0),(0,en.Z)(this,"scene",void 0),(0,en.Z)(this,"mapsService",void 0),(0,en.Z)(this,"renderService",void 0),(0,en.Z)(this,"layerService",void 0),(0,en.Z)(this,"controlService",void 0),(0,en.Z)(this,"configService",void 0),ha.controlCount++,this.controlOption=(0,Or.Z)((0,Or.Z)({},this.getDefault(o)),o||{})}getOptions(){return this.controlOption}setOptions(o){const f=this.getDefault(o);Object.entries(o).forEach(([m,T])=>{T===void 0&&(o[m]=f[m])}),"position"in o&&this.setPosition(o.position),"className"in o&&this.setClassName(o.className),"style"in o&&this.setStyle(o.style),this.controlOption=(0,Or.Z)((0,Or.Z)({},this.controlOption),o)}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd(),Ie.SO.addClass(this.container,"l7-control");const{className:f,style:m}=this.controlOption;return f&&this.setClassName(f),m&&this.setStyle(m),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;Ie.SO.remove(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return Ie.SO.create("div")}onRemove(){}show(){const o=this.container;Ie.SO.removeClass(o,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const o=this.container;Ie.SO.addClass(o,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(o){return{position:Q.d.TOPRIGHT,name:`${ha.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(o){if(this.mapsService&&o&&o.screenX>0&&o.screenY>0){const f=this.mapsService.getContainer();f!==null&&f.focus()}}setPosition(o=Q.d.TOPLEFT){const f=this.controlService;return f&&f.removeControl(this),this.controlOption.position=o,f&&f.addControl(this,this.sceneContainer),this}setClassName(o){const f=this.container,{className:m}=this.controlOption;m&&Ie.SO.removeClass(f,m),o&&Ie.SO.addClass(f,o)}setStyle(o){const f=this.container;o?f.setAttribute("style",o):f.removeAttribute("style")}insertContainer(){const o=this.controlOption.position,f=this.container;if(o instanceof Element)o.appendChild(f);else{const m=this.controlService.controlCorners[o];["bottomleft","bottomright","righttop","rightbottom"].includes(o)?m.insertBefore(f,m.firstChild):m.appendChild(f)}}checkUpdateOption(o,f){return f.some(m=>m in o)}}(0,en.Z)(ha,"controlCount",0);class aa extends null{constructor(...o){super(...o),_defineProperty(this,"isDisable",!1),_defineProperty(this,"button",void 0),_defineProperty(this,"buttonText",void 0),_defineProperty(this,"buttonIcon",void 0)}setIsDisable(o){if(this.isDisable=o,o){var f;(f=this.button)===null||f===void 0||f.setAttribute("disabled","true")}else{var m;(m=this.button)===null||m===void 0||m.removeAttribute("disabled")}}createButton(o=""){return DOM.create("button",`l7-button-control ${o}`)}onAdd(){this.button=this.createButton(),this.isDisable=!1;const{title:o,btnText:f,btnIcon:m}=this.controlOption;return this.setBtnTitle(o),this.setBtnText(f),this.setBtnIcon(m),this.button}onRemove(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}setOptions(o){const{title:f,btnText:m,btnIcon:T}=o;this.checkUpdateOption(o,["title"])&&this.setBtnTitle(f),this.checkUpdateOption(o,["btnIcon"])&&this.setBtnIcon(T),this.checkUpdateOption(o,["btnText"])&&this.setBtnText(m),super.setOptions(o)}setBtnTitle(o){var f;(f=this.button)===null||f===void 0||f.setAttribute("title",o!=null?o:"")}setBtnIcon(o){if(this.buttonIcon&&DOM.remove(this.buttonIcon),o){var f;const C=(f=this.button)===null||f===void 0?void 0:f.firstChild;if(C){var m;(m=this.button)===null||m===void 0||m.insertBefore(o,C)}else{var T;(T=this.button)===null||T===void 0||T.appendChild(o)}this.buttonIcon=o}}setBtnText(o){if(this.button)if(DOM.removeClass(this.button,"l7-button-control--row"),DOM.removeClass(this.button,"l7-button-control--column"),o){let m=this.buttonText;if(!m){var f;m=DOM.create("div","l7-button-control__text"),(f=this.button)===null||f===void 0||f.appendChild(m),this.buttonText=m}m.innerText=o,DOM.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!o&&this.buttonText&&(DOM.remove(this.buttonText),this.buttonText=void 0)}}class Yo extends Hu.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(o,f){super(),(0,en.Z)(this,"popperDOM",void 0),(0,en.Z)(this,"contentDOM",void 0),(0,en.Z)(this,"button",void 0),(0,en.Z)(this,"option",void 0),(0,en.Z)(this,"isShow",!1),(0,en.Z)(this,"content",void 0),(0,en.Z)(this,"timeout",null),(0,en.Z)(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),Ie.SO.removeClass(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&Yo.conflictPopperList.forEach(m=>{m!==this&&m.isShow&&m.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),(0,en.Z)(this,"hide",()=>this.isShow?(Ie.SO.addClass(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),(0,en.Z)(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),(0,en.Z)(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),(0,en.Z)(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),(0,en.Z)(this,"onPopperUnClick",m=>{Ie.SO.findParentElement(m.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),(0,en.Z)(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),(0,en.Z)(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=o,this.option=f,this.init(),f.unique&&Yo.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(o){typeof o=="string"?this.contentDOM.innerHTML=o:o instanceof HTMLElement&&(Ie.SO.clearChildren(this.contentDOM),this.contentDOM.appendChild(o)),this.content=o}init(){const{trigger:o}=this.option;this.popperDOM=this.createPopper(),o==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Ie.SO.remove(this.popperDOM)}resetPopperPosition(){const o={},{container:f,offset:m=[0,0],placement:T}=this.option,[C,L]=m,F=this.button.getBoundingClientRect(),V=f.getBoundingClientRect(),{left:ae,right:Ae,top:Ce,bottom:Ye}=Ie.SO.getDiffRect(F,V);let Bt=!1,rn=!1;/^(left|right)/.test(T)?(T.includes("left")?o.right=`${F.width+Ae}px`:T.includes("right")&&(o.left=`${F.width+ae}px`),T.includes("start")?o.top=`${Ce}px`:T.includes("end")?o.bottom=`${Ye}px`:(o.top=`${Ce+F.height/2}px`,rn=!0,o.transform=`translate(${C}px, calc(${L}px - 50%))`)):/^(top|bottom)/.test(T)&&(T.includes("top")?o.bottom=`${F.height+Ye}px`:T.includes("bottom")&&(o.top=`${F.height+Ce}px`),T.includes("start")?o.left=`${ae}px`:T.includes("end")?o.right=`${Ae}px`:(o.left=`${ae+F.width/2}px`,Bt=!0,o.transform=`translate(calc(${C}px - 50%), ${L}px)`)),o.transform=`translate(calc(${C}px - ${Bt?"50%":"0%"}), calc(${L}px - ${rn?"50%":"0%"})`;const Sn=T.split("-");Sn.length&&Ie.SO.addClass(this.popperDOM,Sn.map(lr=>`l7-popper-${lr}`).join(" ")),Ie.SO.addStyle(this.popperDOM,Ie.SO.css2Style(o))}createPopper(){const{container:o,className:f="",content:m}=this.option,T=Ie.SO.create("div",`l7-popper l7-popper-hide ${f}`),C=Ie.SO.create("div","l7-popper-content"),L=Ie.SO.create("div","l7-popper-arrow");return T.appendChild(C),T.appendChild(L),o.appendChild(T),this.popperDOM=T,this.contentDOM=C,m&&this.setContent(m),T}}(0,en.Z)(Yo,"conflictPopperList",[]);const ga={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"};class ra extends null{constructor(...o){super(...o),_defineProperty(this,"popper",void 0)}getPopper(){return this.popper}hide(){this.popper.hide(),super.hide()}getDefault(o){var f;const m=super.getDefault(o),T=(f=o==null?void 0:o.position)!==null&&f!==void 0?f:m.position;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{popperPlacement:T instanceof Element?"bottom":ga[T],popperTrigger:"click"})}onAdd(){const o=super.onAdd();return this.initPopper(),o}onRemove(){this.popper.destroy()}initPopper(){const{popperClassName:o,popperPlacement:f,popperTrigger:m}=this.controlOption,T=this.mapsService.getMapContainer();return this.popper=new Popper(this.button,{className:o,placement:f,trigger:m,container:T,unique:!0}),this.popper.on("show",()=>{this.emit("popperShow",this)}).on("hide",()=>{this.emit("popperHide",this)}),this.popper}setOptions(o){if(super.setOptions(o),this.checkUpdateOption(o,["popperPlacement","popperTrigger","popperClassName"])){const f=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(f)}}}var Bo=function(a){return a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index",a}(Bo||{});class uu extends null{constructor(...o){super(...o),_defineProperty(this,"selectValue",[]),_defineProperty(this,"optionDOMList",void 0),_defineProperty(this,"createNormalOption",f=>{const m=this.selectValue.includes(f.value),T=DOM.create("div",`l7-select-control-item ${m?Bo.ActiveOptionClassName:""}`);this.getIsMultiple()?T.appendChild(this.createCheckbox(m)):T.appendChild(this.createRadio(m)),f.icon&&T.appendChild(f.icon);const C=DOM.create("span");return C.innerText=f.text,T.appendChild(C),T}),_defineProperty(this,"onItemClick",f=>{if(this.getIsMultiple()){const m=this.selectValue.findIndex(T=>T===f.value);m>-1?this.selectValue.splice(m,1):this.selectValue=[...this.selectValue,f.value]}else this.selectValue=[f.value];this.setSelectValue(this.selectValue)})}setOptions(o){super.setOptions(o);const{options:f}=o;f&&this.popper.setContent(this.getPopperContent(f))}onAdd(){const o=super.onAdd(),{defaultValue:f}=this.controlOption;return f&&(this.selectValue=this.transSelectValue(f)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),o}getSelectValue(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}setSelectValue(o,f=!0){const m=this.transSelectValue(o);this.optionDOMList.forEach(T=>{const C=T.getAttribute(Bo.OptionValueAttrKey),L=T.querySelector("input[type=checkbox]"),F=T.querySelector("input[type=radio]"),V=m.includes(C),ae=(Ae,Ce)=>{DOM.toggleClass(T,Bo.ActiveOptionClassName,Ce),Ae&&DOM.setChecked(Ae,Ce)};ae(L,V),ae(F,V)}),this.selectValue=m,f&&this.emit("selectChange",this.getIsMultiple()?m:m[0])}getIsMultiple(){return!1}getPopperContent(o){const f=this.isImageOptions(),m=DOM.create("div",f?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&DOM.addClass(m,"l7-select-control--multiple");const T=o.map((C,L)=>{const F=f?this.createImageOption(C):this.createNormalOption(C);return F.setAttribute(Bo.OptionValueAttrKey,C.value),F.setAttribute(Bo.OptionIndexAttrKey,window.String(L)),F.addEventListener("click",this.onItemClick.bind(this,C)),F});return m.append(...T),this.optionDOMList=T,m}createImageOption(o){const f=this.selectValue.includes(o.value),m=DOM.create("div",`l7-select-control-item ${f?Bo.ActiveOptionClassName:""}`),T=DOM.create("img");T.setAttribute("src",o.img),DOM.setUnDraggable(T),m.appendChild(T);const C=DOM.create("div","l7-select-control-item-row");this.getIsMultiple()&&m.appendChild(this.createCheckbox(f));const L=DOM.create("span");return L.innerText=o.text,C.appendChild(L),m.appendChild(C),m}createCheckbox(o){const f=DOM.create("input");return f.setAttribute("type","checkbox"),o&&DOM.setChecked(f,!0),f}createRadio(o){const f=DOM.create("input");return f.setAttribute("type","radio"),o&&DOM.setChecked(f,!0),f}isImageOptions(){return!!this.controlOption.options.find(o=>o.img)}transSelectValue(o){return Array.isArray(o)?o:[o]}}const El=a=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("l7-iconfont"),o.setAttribute("aria-hidden","true");const f=document.createElementNS("http://www.w3.org/2000/svg","use");return f.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${a}`),o.appendChild(f),o};class Mu extends null{constructor(...o){var f;super(...o),f=this,_defineProperty(this,"onClick",_asyncToGenerator(function*(){const{onExport:m}=f.controlOption;m==null||m(yield f.getImage())})),_defineProperty(this,"mergeImage",_asyncToGenerator(function*(...m){var T,C;const{imageType:L}=f.controlOption,{width:F=0,height:V=0}=(T=(C=f.mapsService.getContainer())===null||C===void 0?void 0:C.getBoundingClientRect())!==null&&T!==void 0?T:{},ae=document.createElement("canvas");ae.width=F,ae.height=V;const Ae=ae.getContext("2d");return(yield Promise.all(m.map(Ye=>new Promise(Bt=>{const rn=new Image;rn.onload=()=>{Bt(rn)},rn.src=Ye})))).forEach(Ye=>{Ae==null||Ae.drawImage(Ye,0,0,F,V)}),ae.toDataURL(`image/${L}`)}))}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:createL7Icon("l7-icon-export-picture"),imageType:"png"})}getImage(){var o=this;return _asyncToGenerator(function*(){const f=yield o.mapsService.exportMap("png"),m=yield o.scene.exportPng("png");return o.mergeImage(...[f,m].filter(T=>T))})()}}const cu=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Es=(()=>{if(typeof document=="undefined")return!1;const a=cu[0],o={};for(const f of cu)if((f==null?void 0:f[1])in document){for(const[T,C]of f.entries())o[a[T]]=C;return o}return!1})(),_l={change:Es.fullscreenchange,error:Es.fullscreenerror};let pl={request(a=document.documentElement,o){return new Promise((f,m)=>{const T=()=>{pl.off("change",T),f()};pl.on("change",T);const C=a[Es.requestFullscreen](o);C instanceof Promise&&C.then(T).catch(m)})},exit(){return new Promise((a,o)=>{if(!pl.isFullscreen){a();return}const f=()=>{pl.off("change",f),a()};pl.on("change",f);const m=document[Es.exitFullscreen]();m instanceof Promise&&m.then(f).catch(o)})},toggle(a,o){return pl.isFullscreen?pl.exit():pl.request(a,o)},onchange(a){pl.on("change",a)},onerror(a){pl.on("error",a)},on(a,o){const f=_l[a];f&&document.addEventListener(f,o,!1)},off(a,o){const f=_l[a];f&&document.removeEventListener(f,o,!1)},raw:Es};Object.defineProperties(pl,{isFullscreen:{get:()=>!!document[Es.fullscreenElement]},element:{enumerable:!0,get:()=>{var a;return(a=document[Es.fullscreenElement])!==null&&a!==void 0?a:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[Es.fullscreenEnabled]}}),Es||(pl={isEnabled:!1});var vc=null;class Vf extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"isFullscreen",!1),_defineProperty(this,"mapContainer",void 0),_defineProperty(this,"toggleFullscreen",_asyncToGenerator(function*(){ScreenFull.isEnabled&&(yield ScreenFull.toggle(f.mapContainer))})),_defineProperty(this,"onClick",()=>{this.toggleFullscreen()}),_defineProperty(this,"onFullscreenChange",()=>{this.isFullscreen=!!document.fullscreenElement;const{btnText:m,btnIcon:T,title:C,exitBtnText:L,exitBtnIcon:F,exitTitle:V}=this.controlOption;this.isFullscreen?(this.setBtnTitle(V),this.setBtnText(L),this.setBtnIcon(F)):(this.setBtnTitle(C),this.setBtnText(m),this.setBtnIcon(T)),this.emit("fullscreenChange",this.isFullscreen)}),ScreenFull.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316")}setOptions(o){const{exitBtnText:f,exitBtnIcon:m,exitTitle:T}=o;this.isFullscreen&&(this.checkUpdateOption(o,["exitBtnIcon"])&&this.setBtnIcon(m),this.checkUpdateOption(o,["exitBtnText"])&&this.setBtnText(f),this.checkUpdateOption(o,["exitTitle"])&&this.setBtnTitle(T)),super.setOptions(o)}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),this.mapContainer=DOM.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),o}onRemove(){super.onRemove(),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5168\u5C4F",btnIcon:createL7Icon("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:createL7Icon("l7-icon-exit-fullscreen")})}}class Ac extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"getGeoLocation",()=>new Promise((m,T)=>{window.navigator.geolocation.getCurrentPosition(({coords:C})=>{const{longitude:L,latitude:F}=C!=null?C:{};!isNaN(L)&&!isNaN(F)?m([L,F]):T()},C=>{T(C)})})),_defineProperty(this,"onClick",_asyncToGenerator(function*(){if(!window.navigator.geolocation)return;const{transform:m}=f.controlOption,T=yield f.getGeoLocation(),C=f.mapsService.getZoom();f.mapsService.setZoomAndCenter(C>15?C:15,m?yield m(T):T)})),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D")}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5B9A\u4F4D",btnIcon:createL7Icon("l7-icon-reposition")})}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}}function of(a){return Object.keys(a!=null?a:{}).every(o=>["layer","name","img"].includes(o))}class jc extends null{constructor(...o){super(...o),_defineProperty(this,"onLayerChange",()=>{var f;(f=this.controlOption.layers)!==null&&f!==void 0&&f.length||(this.selectValue=this.getLayerVisible(),this.setOptions({options:this.getLayerOptions()}))}),_defineProperty(this,"onLayerVisibleChane",()=>{this.setSelectValue(this.getLayerVisible())}),_defineProperty(this,"onSelectChange",()=>{this.layers.forEach(f=>{const m=this.selectValue.includes(f.name),T=f.isVisible();m&&!T&&f.show(),!m&&T&&f.hide()})})}get layers(){const o=this.layerService,{layers:f}=this.controlOption;if(Array.isArray(f)&&f.length){const m=[];return f.forEach(T=>{if(T instanceof Object&&(of(T)?m.push(T.layer):m.push(T)),typeof T=="string"){const C=o.getLayer(T)||o.getLayerByName(T);C&&m.push(C)}}),m}return o.getLayers()||[]}getDefault(o){var f;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:createL7Icon("l7-icon-layer"),options:[],multiple:(f=o==null?void 0:o.multiple)!==null&&f!==void 0?f:!0})}getLayerVisible(){return this.layers.filter(o=>o.isVisible()).map(o=>o.name)}getLayerOptions(){const{layers:o}=this.controlOption,f=o==null?void 0:o.every(m=>m.img);return o?o==null?void 0:o.map(m=>{if(of(m))return{text:m.name||m.layer.name,value:m.layer.name,img:f?m.img:void 0};if(typeof m=="string"){const T=this.layerService.getLayer(m)||this.layerService.getLayerByName(m);return{text:T==null?void 0:T.name,value:T==null?void 0:T.name}}return{text:m.name,value:m.name}}):this.layers.map(m=>({text:m.name,value:m.name}))}setOptions(o){const f=this.checkUpdateOption(o,["layers","multiple"]);super.setOptions(o),f&&(this.controlOption.multiple===!1&&this.handleSingleSelection(),this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}handleSingleSelection(){this.layers.forEach((o,f)=>{f===0?o.show():o.hide()})}onAdd(){var o;return this.controlOption.multiple===!1&&this.handleSingleSelection(),(o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),super.onAdd()}onRemove(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}getIsMultiple(){return this.controlOption.multiple}}class dp extends ha{getDefault(){return{position:Q.d.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const o=Ie.SO.create("div","l7-control-logo");return this.setLogoContent(o),o}onRemove(){return null}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["img","href"])&&(Ie.SO.clearChildren(this.container),this.setLogoContent(this.container))}setLogoContent(o){const{href:f,img:m}=this.controlOption,T=Ie.SO.create("img");if(T.setAttribute("src",m),T.setAttribute("aria-label","AntV logo"),Ie.SO.setUnDraggable(T),f){const C=Ie.SO.create("a","l7-control-logo-link");C.target="_blank",C.href=f,C.rel="noopener nofollow",C.setAttribute("rel","noopener nofollow"),C.appendChild(T),o.appendChild(C)}else o.appendChild(T)}}const pp={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},Mh={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};class Kh extends null{constructor(...o){super(...o),_defineProperty(this,"onMapThemeChange",()=>{this.mapsService.setMapStyle(this.selectValue[0])})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:createL7Icon("l7-icon-color"),options:[]})}getStyleOptions(){const o=this.mapsService.getType()==="mapbox"?MapboxMapStyleConfig:GaodeMapStyleConfig;return Object.entries(this.mapsService.getMapStyleConfig()).filter(([f,m])=>typeof m=="string"&&f!=="blank").map(([f,m])=>{var T;const{text:C,img:L}=(T=o[f])!==null&&T!==void 0?T:{};return{text:C!=null?C:f,value:m,img:L,key:f}})}getMapStyle(){return this.mapsService.getMapStyle()}onAdd(){var o;if((o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var f,m;const T=this.controlOption.defaultValue;this.controlOption.defaultValue=(f=(m=this.controlOption.options.find(C=>C.key===T))===null||m===void 0?void 0:m.value)!==null&&f!==void 0?f:T}else{const T=this.getMapStyle();T?this.controlOption.defaultValue=T:this.mapsService.map.once("styledata",()=>{const C=this.mapsService.getMapStyle();this.controlOption.defaultValue=C,this.setSelectValue(C,!1)})}return this.on("selectChange",this.onMapThemeChange),super.onAdd()}getIsMultiple(){return!1}}class qh extends null{constructor(...o){super(...o),_defineProperty(this,"location",[0,0]),_defineProperty(this,"onMouseMove",f=>{let m=this.location;const T=f.lngLat||f.lnglat,{transform:C}=this.controlOption;T&&(m=[T.lng,T.lat]),this.location=m,C&&(m=C(m)),this.insertLocation2HTML(m),this.emit("locationChange",m)})}getLocation(){return this.location}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMLEFT,transform:([f,m])=>[+(+f).toFixed(6),+(+m).toFixed(6)]})}onAdd(){const o=DOM.create("div","l7-control-mouse-location");return o.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),o}onRemove(){this.mapsService.off("mousemove",this.onMouseMove)}insertLocation2HTML(o){this.container.innerText=o.join(", ")}}class ih extends null{constructor(...o){super(...o),_defineProperty(this,"mScale",void 0),_defineProperty(this,"iScale",void 0),_defineProperty(this,"update",()=>{const f=this.mapsService,{maxWidth:m}=this.controlOption,T=f.getSize()[1]/2,C=f.containerToLngLat([0,T]),L=f.containerToLngLat([m,T]),F=lnglatDistance([C.lng,C.lat],[L.lng,L.lat]);this.updateScales(F)})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{name:"scale",position:PositionType.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}onAdd(){const f=DOM.create("div","l7-control-scale");this.resetScaleLines(f);const{updateWhenIdle:m}=this.controlOption;return this.mapsService.on(m?"moveend":"mapmove",this.update),this.mapsService.on(m?"zoomend":"zoomchange",this.update),f}onRemove(){const{updateWhenIdle:o}=this.controlOption;this.mapsService.off(o?"zoomend":"zoomchange",this.update),this.mapsService.off(o?"moveend":"mapmove",this.update)}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}updateScales(o){const{metric:f,imperial:m}=this.controlOption;f&&o&&this.updateMetric(o),m&&o&&this.updateImperial(o)}resetScaleLines(o){DOM.clearChildren(o);const{metric:f,imperial:m,maxWidth:T,lockWidth:C}=this.controlOption;C&&DOM.addStyle(o,`width: ${T}px`),f&&(this.mScale=DOM.create("div","l7-control-scale-line",o)),m&&(this.iScale=DOM.create("div","l7-control-scale-line",o)),this.update()}updateScale(o,f,m){const{maxWidth:T}=this.controlOption;o.style.width=Math.round(T*m)+"px",o.innerHTML=f}getRoundNum(o){const f=Math.pow(10,(Math.floor(o)+"").length-1);let m=o/f;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,f*m}updateMetric(o){const f=this.getRoundNum(o),m=f<1e3?f+" m":f/1e3+" km";this.updateScale(this.mScale,m,f/o)}updateImperial(o){const f=o*3.2808399;let m,T,C;f>5280?(m=f/5280,T=this.getRoundNum(m),this.updateScale(this.iScale,T+" mi",T/m)):(C=this.getRoundNum(f),this.updateScale(this.iScale,C+" ft",C/f))}}var Ai=D(15861),Il=D(45987);class Ll{constructor(){(0,en.Z)(this,"mapService",void 0),(0,en.Z)(this,"fontService",void 0)}apply(o,{styleAttributeService:f,mapService:m,fontService:T}){var C=this;this.mapService=m,this.fontService=T,o.hooks.init.tapPromise("DataMappingPlugin",(0,Ai.Z)(function*(){o.log(Q.Or.MappingStart,Q.KD.INIT),C.generateMaping(o,{styleAttributeService:f}),o.log(Q.Or.MappingEnd,Q.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var L=(0,Ai.Z)(function*(F){if(!F)return F;o.dataState.dataMappingNeedUpdate=!1,o.log(Q.Or.MappingStart,Q.KD.UPDATE);const V=C.generateMaping(o,{styleAttributeService:f});return o.log(Q.Or.MappingEnd,Q.KD.UPDATE),V});return function(F){return L.apply(this,arguments)}}()),o.hooks.beforeRender.tap("DataMappingPlugin",()=>{const L=o.getSource();if(o.layerModelNeedUpdate||!L||!L.inited)return;const F=f.getLayerStyleAttributes()||[],V=f.getLayerStyleAttribute("filter"),{dataArray:ae}=L.data;if(Array.isArray(ae)&&ae.length===0)return;const Ae=F.filter(Ye=>Ye.needRemapping);let Ce=ae;if(V!=null&&V.needRemapping&&V!==null&&V!==void 0&&V.scale&&(Ce=ae.filter(Ye=>this.applyAttributeMapping(V,Ye)[0])),Ae.length){const Ye=this.mapping(o,Ae,Ce,o.getEncodedData());o.setEncodedData(Ye)}})}generateMaping(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],T=f.getLayerStyleAttribute("filter"),{dataArray:C}=o.getSource().data;let L=C;T!=null&&T.scale&&(L=C.filter(V=>this.applyAttributeMapping(T,V)[0])),L=o.processData(L);const F=this.mapping(o,m,L,void 0);return o.setEncodedData(F),o.emit("dataUpdate",null),!0}mapping(o,f,m,T){const C=f.filter(F=>F.scale!==void 0).filter(F=>F.name!=="filter"),L=m.map((F,V)=>{const ae=T?T[V]:{},Ae=(0,Or.Z)({id:F._id,coordinates:F.coordinates},ae);return C.forEach(Ce=>{let Ye=this.applyAttributeMapping(Ce,F);(Ce.name==="color"||Ce.name==="stroke")&&(Ye=Ye.map(Bt=>(0,Ie.CI)(Bt))),Ae[Ce.name]=Array.isArray(Ye)&&Ye.length===1?Ye[0]:Ye,Ce.name==="shape"&&(Ae.shape=this.fontService.getIconFontKey(Ae[Ce.name]))}),Ae});return f.forEach(F=>{F.needRemapping=!1}),this.adjustData2SimpleCoordinates(L),L}adjustData2SimpleCoordinates(o){o.length>0&&this.mapService.version==="SIMPLE"&&o.map(f=>{f.simpleCoordinate||(f.coordinates=this.unProjectCoordinates(f.coordinates),f.simpleCoordinate=!0)})}unProjectCoordinates(o){if(typeof o[0]=="number")return this.mapService.simpleMapCoord.unproject(o);if(o[0]&&o[0][0]instanceof Array){const f=[];return o.map(m=>{const T=[];m.map(C=>{T.push(this.mapService.simpleMapCoord.unproject(C))}),f.push(T)}),f}else{const f=[];return o.map(m=>{f.push(this.mapService.simpleMapCoord.unproject(m))}),f}}applyAttributeMapping(o,f){var m;if(!o.scale)return[];const T=(o==null||(m=o.scale)===null||m===void 0?void 0:m.scalers)||[],C=[];return T.forEach(({field:F})=>{var V;(f.hasOwnProperty(F)||((V=o.scale)===null||V===void 0?void 0:V.type)==="variable")&&C.push(f[F])}),o.mapping?o.mapping(C):[]}getArrowPoints(o,f){const m=[f[0]-o[0],f[1]-o[1]],T=(0,Ie.Fv)(m);return[o[0]+T[0]*1e-4,o[1]+T[1]*1e-4]}}class tc{constructor(){(0,en.Z)(this,"mapService",void 0)}apply(o){var f=this;this.mapService=o.getContainer().mapService,o.hooks.init.tapPromise("DataSourcePlugin",(0,Ai.Z)(function*(){o.log(Q.Or.SourceInitStart,Q.KD.INIT);let m=o.getSource();if(!m){const{data:T,options:C}=o.sourceOption||o.defaultSourceConfig;m=new lo(T,C),o.setSource(m)}m.inited?(f.updateClusterData(o),o.log(Q.Or.SourceInitEnd,Q.KD.INIT)):yield new Promise(T=>{m.on("update",C=>{C.type==="inited"&&(f.updateClusterData(o),o.log(Q.Or.SourceInitEnd,Q.KD.INIT)),T(null)})})})),o.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,Ai.Z)(function*(){const m=f.updateClusterData(o),T=o.dataState.dataSourceNeedUpdate;return o.dataState.dataSourceNeedUpdate=!1,m||T}))}updateClusterData(o){if(o.isTileLayer||o.tileLayer||!o.getSource())return!1;const f=o.getSource(),m=f.cluster,{zoom:T=0}=f.clusterOptions,C=this.mapService.getZoom()-1,L=o.dataState.dataSourceNeedUpdate;return m&&L&&f.updateClusterData(Math.floor(C)),m&&Math.abs(o.clusterZoom-C)>=1?(T!==Math.floor(C)&&f.updateClusterData(Math.floor(C)),o.clusterZoom=C,!0):!1}}var wf=D(64599),Af=D.n(wf);function Ga(a,o){var f,m;if(o===void 0){var T=Af()(a),C;try{for(T.s();!(C=T.n()).done;){var L=C.value;L!=null&&(f===void 0?L>=L&&(f=m=L):(f>L&&(f=L),m<L&&(m=L)))}}catch(Ce){T.e(Ce)}finally{T.f()}}else{var F=-1,V=Af()(a),ae;try{for(V.s();!(ae=V.n()).done;){var Ae=ae.value;(Ae=o(Ae,++F,a))!=null&&(f===void 0?Ae>=Ae&&(f=m=Ae):(f>Ae&&(f=Ae),m<Ae&&(m=Ae)))}}catch(Ce){V.e(Ce)}finally{V.f()}}return[f,m]}var Hl=D(37620);function Jl(a,o,f,m,T){var C=a*a,L=C*a;return((1-3*a+3*C-L)*o+(4-6*C+3*L)*f+(1+3*a+3*C-3*L)*m+L*T)/6}function Hf(a){var o=a.length-1;return function(f){var m=f<=0?f=0:f>=1?(f=1,o-1):Math.floor(f*o),T=a[m],C=a[m+1],L=m>0?a[m-1]:2*T-C,F=m<o-1?a[m+2]:2*C-T;return Jl((f-m/o)*o,L,T,C,F)}}function Vp(a){var o=a.length;return function(f){var m=Math.floor(((f%=1)<0?++f:f)*o),T=a[(m+o-1)%o],C=a[m%o],L=a[(m+1)%o],F=a[(m+2)%o];return Jl((f-m/o)*o,T,C,L,F)}}function oh(a){return function(){return a}}function O0(a,o){return function(f){return a+f*o}}function Bd(a,o,f){return a=Math.pow(a,f),o=Math.pow(o,f)-a,f=1/f,function(m){return Math.pow(a+m*o,f)}}function Fd(a,o){var f=o-a;return f?O0(a,f>180||f<-180?f-360*Math.round(f/360):f):constant(isNaN(a)?o:a)}function Wf(a){return(a=+a)==1?Hp:function(o,f){return f-o?Bd(o,f,a):oh(isNaN(o)?f:o)}}function Hp(a,o){var f=o-a;return f?O0(a,f):oh(isNaN(a)?o:a)}var Vv=function a(o){var f=Wf(o);function m(T,C){var L=f((T=(0,Hl.B8)(T)).r,(C=(0,Hl.B8)(C)).r),F=f(T.g,C.g),V=f(T.b,C.b),ae=Hp(T.opacity,C.opacity);return function(Ae){return T.r=L(Ae),T.g=F(Ae),T.b=V(Ae),T.opacity=ae(Ae),T+""}}return m.gamma=a,m}(1);function kd(a){return function(o){var f=o.length,m=new Array(f),T=new Array(f),C=new Array(f),L,F;for(L=0;L<f;++L)F=(0,Hl.B8)(o[L]),m[L]=F.r||0,T[L]=F.g||0,C[L]=F.b||0;return m=a(m),T=a(T),C=a(C),F.opacity=1,function(V){return F.r=m(V),F.g=T(V),F.b=C(V),F+""}}}var Oc=kd(Hf),Xy=kd(Vp);function Hv(a,o){return a<o?-1:a>o?1:a>=o?0:NaN}function Wp(a){return a.length===1&&(a=$y(a)),{left:function(o,f,m,T){for(m==null&&(m=0),T==null&&(T=o.length);m<T;){var C=m+T>>>1;a(o[C],f)<0?m=C+1:T=C}return m},right:function(o,f,m,T){for(m==null&&(m=0),T==null&&(T=o.length);m<T;){var C=m+T>>>1;a(o[C],f)>0?T=C:m=C+1}return m}}}function $y(a){return function(o,f){return Hv(a(o),f)}}var Lg=Wp(Hv),Yy=Lg.right,Um=Lg.left,Wv=Yy,av=Array.prototype,Ky=av.slice,Gp=av.map,Zp=Math.sqrt(50),jm=Math.sqrt(10),Vm=Math.sqrt(2);function Dg(a,o,f){var m,T=-1,C,L,F;if(o=+o,a=+a,f=+f,a===o&&f>0)return[a];if((m=o<a)&&(C=a,a=o,o=C),(F=Gv(a,o,f))===0||!isFinite(F))return[];if(F>0)for(a=Math.ceil(a/F),o=Math.floor(o/F),L=new Array(C=Math.ceil(o-a+1));++T<C;)L[T]=(a+T)*F;else for(a=Math.floor(a*F),o=Math.ceil(o*F),L=new Array(C=Math.ceil(a-o+1));++T<C;)L[T]=(a-T)/F;return m&&L.reverse(),L}function Gv(a,o,f){var m=(o-a)/Math.max(0,f),T=Math.floor(Math.log(m)/Math.LN10),C=m/Math.pow(10,T);return T>=0?(C>=Zp?10:C>=jm?5:C>=Vm?2:1)*Math.pow(10,T):-Math.pow(10,-T)/(C>=Zp?10:C>=jm?5:C>=Vm?2:1)}function Zv(a,o,f){var m=Math.abs(o-a)/Math.max(0,f),T=Math.pow(10,Math.floor(Math.log(m)/Math.LN10)),C=m/T;return C>=Zp?T*=10:C>=jm?T*=5:C>=Vm&&(T*=2),o<a?-T:T}function Ng(){var a=identity,o=extent,f=sturges;function m(T){var C,L=T.length,F,V=new Array(L);for(C=0;C<L;++C)V[C]=a(T[C],C,T);var ae=o(V),Ae=ae[0],Ce=ae[1],Ye=f(V,Ae,Ce);Array.isArray(Ye)||(Ye=tickStep(Ae,Ce,Ye),Ye=range(Math.ceil(Ae/Ye)*Ye,Ce,Ye));for(var Bt=Ye.length;Ye[0]<=Ae;)Ye.shift(),--Bt;for(;Ye[Bt-1]>Ce;)Ye.pop(),--Bt;var rn=new Array(Bt+1),Sn;for(C=0;C<=Bt;++C)Sn=rn[C]=[],Sn.x0=C>0?Ye[C-1]:Ae,Sn.x1=C<Bt?Ye[C]:Ce;for(C=0;C<L;++C)F=V[C],Ae<=F&&F<=Ce&&rn[bisect(Ye,F,0,Bt)].push(T[C]);return rn}return m.value=function(T){return arguments.length?(a=typeof T=="function"?T:constant(T),m):a},m.domain=function(T){return arguments.length?(o=typeof T=="function"?T:constant([T[0],T[1]]),m):o},m.thresholds=function(T){return arguments.length?(f=typeof T=="function"?T:Array.isArray(T)?constant(slice.call(T)):constant(T),m):f},m}function sv(a,o,f){return a=map.call(a,number).sort(ascending),Math.ceil((f-o)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function C0(a){return a===null?NaN:+a}function lv(a,o,f){if(f==null&&(f=C0),!!(m=a.length)){if((o=+o)<=0||m<2)return+f(a[0],0,a);if(o>=1)return+f(a[m-1],m-1,a);var m,T=(m-1)*o,C=Math.floor(T),L=+f(a[C],C,a),F=+f(a[C+1],C+1,a);return L+(F-L)*(T-C)}}var nc="$";function Xp(){}Xp.prototype=Sl.prototype={constructor:Xp,has:function(a){return nc+a in this},get:function(a){return this[nc+a]},set:function(a,o){return this[nc+a]=o,this},remove:function(a){var o=nc+a;return o in this&&delete this[o]},clear:function(){for(var a in this)a[0]===nc&&delete this[a]},keys:function(){var a=[];for(var o in this)o[0]===nc&&a.push(o.slice(1));return a},values:function(){var a=[];for(var o in this)o[0]===nc&&a.push(this[o]);return a},entries:function(){var a=[];for(var o in this)o[0]===nc&&a.push({key:o.slice(1),value:this[o]});return a},size:function(){var a=0;for(var o in this)o[0]===nc&&++a;return a},empty:function(){for(var a in this)if(a[0]===nc)return!1;return!0},each:function(a){for(var o in this)o[0]===nc&&a(this[o],o.slice(1),this)}};function Sl(a,o){var f=new Xp;if(a instanceof Xp)a.each(function(F,V){f.set(V,F)});else if(Array.isArray(a)){var m=-1,T=a.length,C;if(o==null)for(;++m<T;)f.set(m,a[m]);else for(;++m<T;)f.set(o(C=a[m],m,a),C)}else if(a)for(var L in a)f.set(L,a[L]);return f}var Qh=Sl;function Hm(){var a=[],o=[],f,m,T;function C(F,V,ae,Ae){if(V>=a.length)return f!=null&&F.sort(f),m!=null?m(F):F;for(var Ce=-1,Ye=F.length,Bt=a[V++],rn,Sn,lr=map(),Br,Er=ae();++Ce<Ye;)(Br=lr.get(rn=Bt(Sn=F[Ce])+""))?Br.push(Sn):lr.set(rn,[Sn]);return lr.each(function(ui,ji){Ae(Er,ji,C(ui,V,ae,Ae))}),Er}function L(F,V){if(++V>a.length)return F;var ae,Ae=o[V-1];return m!=null&&V>=a.length?ae=F.entries():(ae=[],F.each(function(Ce,Ye){ae.push({key:Ye,values:L(Ce,V)})})),Ae!=null?ae.sort(function(Ce,Ye){return Ae(Ce.key,Ye.key)}):ae}return T={object:function(F){return C(F,0,$p,Yp)},map:function(F){return C(F,0,zd,Kp)},entries:function(F){return L(C(F,0,zd,Kp),0)},key:function(F){return a.push(F),T},sortKeys:function(F){return o[a.length-1]=F,T},sortValues:function(F){return f=F,T},rollup:function(F){return m=F,T}}}function $p(){return{}}function Yp(a,o,f){a[o]=f}function zd(){return map()}function Kp(a,o,f){a.set(o,f)}function Jh(){}var af=Qh.prototype;Jh.prototype=qp.prototype={constructor:Jh,has:af.has,add:function(a){return a+="",this[nc+a]=a,this},remove:af.remove,clear:af.clear,values:af.keys,size:af.size,empty:af.empty,each:af.each};function qp(a,o){var f=new Jh;if(a instanceof Jh)a.each(function(C){f.add(C)});else if(a){var m=-1,T=a.length;if(o==null)for(;++m<T;)f.add(a[m]);else for(;++m<T;)f.add(o(a[m],m,a))}return f}var R0=null,Wm=Array.prototype,ed=Wm.map,Of=Wm.slice;function Ph(a,o){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(o).domain(a);break}return this}function Xv(a,o){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(o).domain(a);break}return this}var $v={name:"implicit"};function M0(){var a=Qh(),o=[],f=[],m=$v;function T(C){var L=C+"",F=a.get(L);if(!F){if(m!==$v)return m;a.set(L,F=o.push(C))}return f[(F-1)%f.length]}return T.domain=function(C){if(!arguments.length)return o.slice();o=[],a=Qh();for(var L=-1,F=C.length,V,ae;++L<F;)a.has(ae=(V=C[L])+"")||a.set(ae,o.push(V));return T},T.range=function(C){return arguments.length?(f=Of.call(C),T):f.slice()},T.unknown=function(C){return arguments.length?(m=C,T):m},T.copy=function(){return M0(o,f).unknown(m)},Ph.apply(T,arguments),T}function Gf(){var a=ordinal().unknown(void 0),o=a.domain,f=a.range,m=[0,1],T,C,L=!1,F=0,V=0,ae=.5;delete a.unknown;function Ae(){var Ce=o().length,Ye=m[1]<m[0],Bt=m[Ye-0],rn=m[1-Ye];T=(rn-Bt)/Math.max(1,Ce-F+V*2),L&&(T=Math.floor(T)),Bt+=(rn-Bt-T*(Ce-F))*ae,C=T*(1-F),L&&(Bt=Math.round(Bt),C=Math.round(C));var Sn=sequence(Ce).map(function(lr){return Bt+T*lr});return f(Ye?Sn.reverse():Sn)}return a.domain=function(Ce){return arguments.length?(o(Ce),Ae()):o()},a.range=function(Ce){return arguments.length?(m=[+Ce[0],+Ce[1]],Ae()):m.slice()},a.rangeRound=function(Ce){return m=[+Ce[0],+Ce[1]],L=!0,Ae()},a.bandwidth=function(){return C},a.step=function(){return T},a.round=function(Ce){return arguments.length?(L=!!Ce,Ae()):L},a.padding=function(Ce){return arguments.length?(F=Math.min(1,V=+Ce),Ae()):F},a.paddingInner=function(Ce){return arguments.length?(F=Math.min(1,Ce),Ae()):F},a.paddingOuter=function(Ce){return arguments.length?(V=+Ce,Ae()):V},a.align=function(Ce){return arguments.length?(ae=Math.max(0,Math.min(1,Ce)),Ae()):ae},a.copy=function(){return Gf(o(),m).round(L).paddingInner(F).paddingOuter(V).align(ae)},initRange.apply(Ae(),arguments)}function Ud(a){var o=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return Ud(o())},a}function qy(){return Ud(Gf.apply(null,arguments).paddingInner(1))}function Qy(a,o){return(isNumberArray(o)?numberArray:Yv)(a,o)}function Yv(a,o){var f=o?o.length:0,m=a?Math.min(f,a.length):0,T=new Array(m),C=new Array(f),L;for(L=0;L<m;++L)T[L]=P0(a[L],o[L]);for(;L<f;++L)C[L]=o[L];return function(F){for(L=0;L<m;++L)C[L]=T[L](F);return C}}function Bg(a,o){var f=new Date;return a=+a,o=+o,function(m){return f.setTime(a*(1-m)+o*m),f}}function td(a,o){return a=+a,o=+o,function(f){return a*(1-f)+o*f}}function Jy(a,o){var f={},m={},T;(a===null||typeof a!="object")&&(a={}),(o===null||typeof o!="object")&&(o={});for(T in o)T in a?f[T]=P0(a[T],o[T]):m[T]=o[T];return function(C){for(T in f)m[T]=f[T](C);return m}}var ah=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uv=new RegExp(ah.source,"g");function Qp(a){return function(){return a}}function vp(a){return function(o){return a(o)+""}}function Fg(a,o){var f=ah.lastIndex=uv.lastIndex=0,m,T,C,L=-1,F=[],V=[];for(a=a+"",o=o+"";(m=ah.exec(a))&&(T=uv.exec(o));)(C=T.index)>f&&(C=o.slice(f,C),F[L]?F[L]+=C:F[++L]=C),(m=m[0])===(T=T[0])?F[L]?F[L]+=T:F[++L]=T:(F[++L]=null,V.push({i:L,x:td(m,T)})),f=uv.lastIndex;return f<o.length&&(C=o.slice(f),F[L]?F[L]+=C:F[++L]=C),F.length<2?V[0]?vp(V[0].x):Qp(o):(o=V.length,function(ae){for(var Ae=0,Ce;Ae<o;++Ae)F[(Ce=V[Ae]).i]=Ce.x(ae);return F.join("")})}function mp(a,o){o||(o=[]);var f=a?Math.min(o.length,a.length):0,m=o.slice(),T;return function(C){for(T=0;T<f;++T)m[T]=a[T]*(1-C)+o[T]*C;return m}}function Kv(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function P0(a,o){var f=typeof o,m;return o==null||f==="boolean"?oh(o):(f==="number"?td:f==="string"?(m=(0,Hl.ZP)(o))?(o=m,Vv):Fg:o instanceof Hl.ZP?Vv:o instanceof Date?Bg:Kv(o)?mp:Array.isArray(o)?Yv:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?Jy:td)(a,o)}function Cc(a,o){return a=+a,o=+o,function(f){return Math.round(a*(1-f)+o*f)}}function mc(a){return function(){return a}}function _u(a){return+a}var sf=[0,1];function Rc(a){return a}function Ys(a,o){return(o-=a=+a)?function(f){return(f-a)/o}:mc(isNaN(o)?NaN:.5)}function I0(a){var o=a[0],f=a[a.length-1],m;return o>f&&(m=o,o=f,f=m),function(T){return Math.max(o,Math.min(f,T))}}function kg(a,o,f){var m=a[0],T=a[1],C=o[0],L=o[1];return T<m?(m=Ys(T,m),C=f(L,C)):(m=Ys(m,T),C=f(C,L)),function(F){return C(m(F))}}function e_(a,o,f){var m=Math.min(a.length,o.length)-1,T=new Array(m),C=new Array(m),L=-1;for(a[m]<a[0]&&(a=a.slice().reverse(),o=o.slice().reverse());++L<m;)T[L]=Ys(a[L],a[L+1]),C[L]=f(o[L],o[L+1]);return function(F){var V=Wv(a,F,1,m)-1;return C[V](T[V](F))}}function cv(a,o){return o.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function Gm(){var a=sf,o=sf,f=P0,m,T,C,L=Rc,F,V,ae;function Ae(){return F=Math.min(a.length,o.length)>2?e_:kg,V=ae=null,Ce}function Ce(Ye){return isNaN(Ye=+Ye)?C:(V||(V=F(a.map(m),o,f)))(m(L(Ye)))}return Ce.invert=function(Ye){return L(T((ae||(ae=F(o,a.map(m),td)))(Ye)))},Ce.domain=function(Ye){return arguments.length?(a=ed.call(Ye,_u),L===Rc||(L=I0(a)),Ae()):a.slice()},Ce.range=function(Ye){return arguments.length?(o=Of.call(Ye),Ae()):o.slice()},Ce.rangeRound=function(Ye){return o=Of.call(Ye),f=Cc,Ae()},Ce.clamp=function(Ye){return arguments.length?(L=Ye?I0(a):Rc,Ce):L!==Rc},Ce.interpolate=function(Ye){return arguments.length?(f=Ye,Ae()):f},Ce.unknown=function(Ye){return arguments.length?(C=Ye,Ce):C},function(Ye,Bt){return m=Ye,T=Bt,Ae()}}function qv(a,o){return Gm()(a,o)}var Mc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qv(a){if(!(o=Mc.exec(a)))throw new Error("invalid format: "+a);var o;return new gp({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}Qv.prototype=gp.prototype;function gp(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}gp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zm(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function fv(a,o){if((f=(a=o?a.toExponential(o-1):a.toExponential()).indexOf("e"))<0)return null;var f,m=a.slice(0,f);return[m.length>1?m[0]+m.slice(2):m,+a.slice(f+1)]}function yp(a){return a=fv(Math.abs(a)),a?a[1]:NaN}function Xm(a,o){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yp(o)/3)))*3-yp(Math.abs(a)))}function t_(a,o){return function(f,m){for(var T=f.length,C=[],L=0,F=a[0],V=0;T>0&&F>0&&(V+F+1>m&&(F=Math.max(1,m-V)),C.push(f.substring(T-=F,T+F)),!((V+=F+1)>m));)F=a[L=(L+1)%a.length];return C.reverse().join(o)}}function Jv(a){return function(o){return o.replace(/[0-9]/g,function(f){return a[+f]})}}function zg(a){e:for(var o=a.length,f=1,m=-1,T;f<o;++f)switch(a[f]){case".":m=T=f;break;case"0":m===0&&(m=f),T=f;break;default:if(!+a[f])break e;m>0&&(m=0);break}return m>0?a.slice(0,m)+a.slice(T+1):a}var He;function qt(a,o){var f=fv(a,o);if(!f)return a+"";var m=f[0],T=f[1],C=T-(He=Math.max(-8,Math.min(8,Math.floor(T/3)))*3)+1,L=m.length;return C===L?m:C>L?m+new Array(C-L+1).join("0"):C>0?m.slice(0,C)+"."+m.slice(C):"0."+new Array(1-C).join("0")+fv(a,Math.max(0,o+C-1))[0]}function Rn(a,o){var f=fv(a,o);if(!f)return a+"";var m=f[0],T=f[1];return T<0?"0."+new Array(-T).join("0")+m:m.length>T+1?m.slice(0,T+1)+"."+m.slice(T+1):m+new Array(T-m.length+2).join("0")}var Ar={"%":function(a,o){return(a*100).toFixed(o)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:Zm,e:function(a,o){return a.toExponential(o)},f:function(a,o){return a.toFixed(o)},g:function(a,o){return a.toPrecision(o)},o:function(a){return Math.round(a).toString(8)},p:function(a,o){return Rn(a*100,o)},r:Rn,s:qt,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function $r(a){return a}var Cr=Array.prototype.map,mr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ci(a){var o=a.grouping===void 0||a.thousands===void 0?$r:t_(Cr.call(a.grouping,Number),a.thousands+""),f=a.currency===void 0?"":a.currency[0]+"",m=a.currency===void 0?"":a.currency[1]+"",T=a.decimal===void 0?".":a.decimal+"",C=a.numerals===void 0?$r:Jv(Cr.call(a.numerals,String)),L=a.percent===void 0?"%":a.percent+"",F=a.minus===void 0?"-":a.minus+"",V=a.nan===void 0?"NaN":a.nan+"";function ae(Ce){Ce=Qv(Ce);var Ye=Ce.fill,Bt=Ce.align,rn=Ce.sign,Sn=Ce.symbol,lr=Ce.zero,Br=Ce.width,Er=Ce.comma,ui=Ce.precision,ji=Ce.trim,Po=Ce.type;Po==="n"?(Er=!0,Po="g"):Ar[Po]||(ui===void 0&&(ui=12),ji=!0,Po="g"),(lr||Ye==="0"&&Bt==="=")&&(lr=!0,Ye="0",Bt="=");var no=Sn==="$"?f:Sn==="#"&&/[boxX]/.test(Po)?"0"+Po.toLowerCase():"",Gr=Sn==="$"?m:/[%p]/.test(Po)?L:"",ro=Ar[Po],Da=/[defgprs%]/.test(Po);ui=ui===void 0?6:/[gprs]/.test(Po)?Math.max(1,Math.min(21,ui)):Math.max(0,Math.min(20,ui));function is(Qo){var ps=no,es=Gr,ls,Qd,Jd;if(Po==="c")es=ro(Qo)+es,Qo="";else{Qo=+Qo;var Tm=Qo<0||1/Qo<0;if(Qo=isNaN(Qo)?V:ro(Math.abs(Qo),ui),ji&&(Qo=zg(Qo)),Tm&&+Qo==0&&rn!=="+"&&(Tm=!1),ps=(Tm?rn==="("?rn:F:rn==="-"||rn==="("?"":rn)+ps,es=(Po==="s"?mr[8+He/3]:"")+es+(Tm&&rn==="("?")":""),Da){for(ls=-1,Qd=Qo.length;++ls<Qd;)if(Jd=Qo.charCodeAt(ls),48>Jd||Jd>57){es=(Jd===46?T+Qo.slice(ls+1):Qo.slice(ls))+es,Qo=Qo.slice(0,ls);break}}}Er&&!lr&&(Qo=o(Qo,1/0));var Nv=ps.length+Qo.length+es.length,qf=Nv<Br?new Array(Br-Nv+1).join(Ye):"";switch(Er&&lr&&(Qo=o(qf+Qo,qf.length?Br-es.length:1/0),qf=""),Bt){case"<":Qo=ps+Qo+es+qf;break;case"=":Qo=ps+qf+Qo+es;break;case"^":Qo=qf.slice(0,Nv=qf.length>>1)+ps+Qo+es+qf.slice(Nv);break;default:Qo=qf+ps+Qo+es;break}return C(Qo)}return is.toString=function(){return Ce+""},is}function Ae(Ce,Ye){var Bt=ae((Ce=Qv(Ce),Ce.type="f",Ce)),rn=Math.max(-8,Math.min(8,Math.floor(yp(Ye)/3)))*3,Sn=Math.pow(10,-rn),lr=mr[8+rn/3];return function(Br){return Bt(Sn*Br)+lr}}return{format:ae,formatPrefix:Ae}}var li,Bi,Ri;Di({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Di(a){return li=Ci(a),Bi=li.format,Ri=li.formatPrefix,li}function Xi(a,o){return a=Math.abs(a),o=Math.abs(o)-a,Math.max(0,yp(o)-yp(a))+1}function pi(a){return Math.max(0,-yp(Math.abs(a)))}function ki(a,o,f,m){var T=Zv(a,o,f),C;switch(m=Qv(m==null?",f":m),m.type){case"s":{var L=Math.max(Math.abs(a),Math.abs(o));return m.precision==null&&!isNaN(C=Xm(T,L))&&(m.precision=C),Ri(m,L)}case"":case"e":case"g":case"p":case"r":{m.precision==null&&!isNaN(C=Xi(T,Math.max(Math.abs(a),Math.abs(o))))&&(m.precision=C-(m.type==="e"));break}case"f":case"%":{m.precision==null&&!isNaN(C=pi(T))&&(m.precision=C-(m.type==="%")*2);break}}return Bi(m)}function fr(a){var o=a.domain;return a.ticks=function(f){var m=o();return Dg(m[0],m[m.length-1],f==null?10:f)},a.tickFormat=function(f,m){var T=o();return ki(T[0],T[T.length-1],f==null?10:f,m)},a.nice=function(f){f==null&&(f=10);var m=o(),T=0,C=m.length-1,L=m[T],F=m[C],V;return F<L&&(V=L,L=F,F=V,V=T,T=C,C=V),V=Gv(L,F,f),V>0?(L=Math.floor(L/V)*V,F=Math.ceil(F/V)*V,V=Gv(L,F,f)):V<0&&(L=Math.ceil(L*V)/V,F=Math.floor(F*V)/V,V=Gv(L,F,f)),V>0?(m[T]=Math.floor(L/V)*V,m[C]=Math.ceil(F/V)*V,o(m)):V<0&&(m[T]=Math.ceil(L*V)/V,m[C]=Math.floor(F*V)/V,o(m)),a},a}function kr(){var a=qv(Rc,Rc);return a.copy=function(){return cv(a,kr())},Ph.apply(a,arguments),fr(a)}function _i(a){var o;function f(m){return isNaN(m=+m)?o:m}return f.invert=f,f.domain=f.range=function(m){return arguments.length?(a=map.call(m,number),f):a.slice()},f.unknown=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return _i(a).unknown(o)},a=arguments.length?map.call(a,number):[0,1],linearish(f)}function io(a,o){a=a.slice();var f=0,m=a.length-1,T=a[f],C=a[m],L;return C<T&&(L=f,f=m,m=L,L=T,T=C,C=L),a[f]=o.floor(T),a[m]=o.ceil(C),a}function ri(a){return Math.log(a)}function eo(a){return Math.exp(a)}function Ei(a){return-Math.log(-a)}function to(a){return-Math.exp(-a)}function si(a){return isFinite(a)?+("1e"+a):a<0?0:a}function di(a){return a===10?si:a===Math.E?Math.exp:function(o){return Math.pow(a,o)}}function Uo(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(o){return Math.log(o)/a})}function ua(a){return function(o){return-a(-o)}}function Qi(a){var o=a(ri,eo),f=o.domain,m=10,T,C;function L(){return T=Uo(m),C=di(m),f()[0]<0?(T=ua(T),C=ua(C),a(Ei,to)):a(ri,eo),o}return o.base=function(F){return arguments.length?(m=+F,L()):m},o.domain=function(F){return arguments.length?(f(F),L()):f()},o.ticks=function(F){var V=f(),ae=V[0],Ae=V[V.length-1],Ce;(Ce=Ae<ae)&&(Ye=ae,ae=Ae,Ae=Ye);var Ye=T(ae),Bt=T(Ae),rn,Sn,lr,Br=F==null?10:+F,Er=[];if(!(m%1)&&Bt-Ye<Br){if(Ye=Math.round(Ye)-1,Bt=Math.round(Bt)+1,ae>0){for(;Ye<Bt;++Ye)for(Sn=1,rn=C(Ye);Sn<m;++Sn)if(lr=rn*Sn,!(lr<ae)){if(lr>Ae)break;Er.push(lr)}}else for(;Ye<Bt;++Ye)for(Sn=m-1,rn=C(Ye);Sn>=1;--Sn)if(lr=rn*Sn,!(lr<ae)){if(lr>Ae)break;Er.push(lr)}}else Er=Dg(Ye,Bt,Math.min(Bt-Ye,Br)).map(C);return Ce?Er.reverse():Er},o.tickFormat=function(F,V){if(V==null&&(V=m===10?".0e":","),typeof V!="function"&&(V=Bi(V)),F===1/0)return V;F==null&&(F=10);var ae=Math.max(1,m*F/o.ticks().length);return function(Ae){var Ce=Ae/C(Math.round(T(Ae)));return Ce*m<m-.5&&(Ce*=m),Ce<=ae?V(Ae):""}},o.nice=function(){return f(io(f(),{floor:function(F){return C(Math.floor(T(F)))},ceil:function(F){return C(Math.ceil(T(F)))}}))},o}function Si(){var a=Qi(Gm()).domain([1,10]);return a.copy=function(){return cv(a,Si()).base(a.base())},Ph.apply(a,arguments),a}function Yr(a){return function(o){return Math.sign(o)*Math.log1p(Math.abs(o/a))}}function Fo(a){return function(o){return Math.sign(o)*Math.expm1(Math.abs(o))*a}}function La(a){var o=1,f=a(Yr(o),Fo(o));return f.constant=function(m){return arguments.length?a(Yr(o=+m),Fo(o)):o},linearish(f)}function ao(){var a=La(transformer());return a.copy=function(){return copy(a,ao()).constant(a.constant())},initRange.apply(a,arguments)}function ca(a){return function(o){return o<0?-Math.pow(-o,a):Math.pow(o,a)}}function sa(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function Ko(a){return a<0?-a*a:a*a}function hs(a){var o=a(Rc,Rc),f=1;function m(){return f===1?a(Rc,Rc):f===.5?a(sa,Ko):a(ca(f),ca(1/f))}return o.exponent=function(T){return arguments.length?(f=+T,m()):f},fr(o)}function Tl(){var a=hs(Gm());return a.copy=function(){return cv(a,Tl()).exponent(a.exponent())},Ph.apply(a,arguments),a}function Wu(){return Tl.apply(null,arguments).exponent(.5)}function Za(){var a=[],o=[],f=[],m;function T(){var L=0,F=Math.max(1,o.length);for(f=new Array(F-1);++L<F;)f[L-1]=lv(a,L/F);return C}function C(L){return isNaN(L=+L)?m:o[Wv(f,L)]}return C.invertExtent=function(L){var F=o.indexOf(L);return F<0?[NaN,NaN]:[F>0?f[F-1]:a[0],F<f.length?f[F]:a[a.length-1]]},C.domain=function(L){if(!arguments.length)return a.slice();a=[];for(var F=0,V=L.length,ae;F<V;++F)ae=L[F],ae!=null&&!isNaN(ae=+ae)&&a.push(ae);return a.sort(Hv),T()},C.range=function(L){return arguments.length?(o=Of.call(L),T()):o.slice()},C.unknown=function(L){return arguments.length?(m=L,C):m},C.quantiles=function(){return f.slice()},C.copy=function(){return Za().domain(a).range(o).unknown(m)},Ph.apply(C,arguments)}function Wl(){var a=0,o=1,f=1,m=[.5],T=[0,1],C;function L(V){return V<=V?T[Wv(m,V,0,f)]:C}function F(){var V=-1;for(m=new Array(f);++V<f;)m[V]=((V+1)*o-(V-f)*a)/(f+1);return L}return L.domain=function(V){return arguments.length?(a=+V[0],o=+V[1],F()):[a,o]},L.range=function(V){return arguments.length?(f=(T=Of.call(V)).length-1,F()):T.slice()},L.invertExtent=function(V){var ae=T.indexOf(V);return ae<0?[NaN,NaN]:ae<1?[a,m[0]]:ae>=f?[m[f-1],o]:[m[ae-1],m[ae]]},L.unknown=function(V){return arguments.length&&(C=V),L},L.thresholds=function(){return m.slice()},L.copy=function(){return Wl().domain([a,o]).range(T).unknown(C)},Ph.apply(fr(L),arguments)}function Ks(){var a=[.5],o=[0,1],f,m=1;function T(C){return C<=C?o[Wv(a,C,0,m)]:f}return T.domain=function(C){return arguments.length?(a=Of.call(C),m=Math.min(a.length,o.length-1),T):a.slice()},T.range=function(C){return arguments.length?(o=Of.call(C),m=Math.min(a.length,o.length-1),T):o.slice()},T.invertExtent=function(C){var L=o.indexOf(C);return[a[L-1],a[L]]},T.unknown=function(C){return arguments.length?(f=C,T):f},T.copy=function(){return Ks().domain(a).range(o).unknown(f)},Ph.apply(T,arguments)}var se=new Date,eu=new Date;function rs(a,o,f,m){function T(C){return a(C=arguments.length===0?new Date:new Date(+C)),C}return T.floor=function(C){return a(C=new Date(+C)),C},T.ceil=function(C){return a(C=new Date(C-1)),o(C,1),a(C),C},T.round=function(C){var L=T(C),F=T.ceil(C);return C-L<F-C?L:F},T.offset=function(C,L){return o(C=new Date(+C),L==null?1:Math.floor(L)),C},T.range=function(C,L,F){var V=[],ae;if(C=T.ceil(C),F=F==null?1:Math.floor(F),!(C<L)||!(F>0))return V;do V.push(ae=new Date(+C)),o(C,F),a(C);while(ae<C&&C<L);return V},T.filter=function(C){return rs(function(L){if(L>=L)for(;a(L),!C(L);)L.setTime(L-1)},function(L,F){if(L>=L)if(F<0)for(;++F<=0;)for(;o(L,-1),!C(L););else for(;--F>=0;)for(;o(L,1),!C(L););})},f&&(T.count=function(C,L){return se.setTime(+C),eu.setTime(+L),a(se),a(eu),Math.floor(f(se,eu))},T.every=function(C){return C=Math.floor(C),!isFinite(C)||!(C>0)?null:C>1?T.filter(m?function(L){return m(L)%C===0}:function(L){return T.count(0,L)%C===0}):T}),T}var ur=rs(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,o){a.setFullYear(a.getFullYear()+o)},function(a,o){return o.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});ur.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:rs(function(o){o.setFullYear(Math.floor(o.getFullYear()/a)*a),o.setMonth(0,1),o.setHours(0,0,0,0)},function(o,f){o.setFullYear(o.getFullYear()+f*a)})};var Kr=ur,Dl=ur.range,Sa=rs(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,o){a.setMonth(a.getMonth()+o)},function(a,o){return o.getMonth()-a.getMonth()+(o.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),rc=Sa,Us=Sa.range,qo=1e3,Ca=6e4,ds=36e5,fu=864e5,Ih=6048e5;function gn(a){return rs(function(o){o.setDate(o.getDate()-(o.getDay()+7-a)%7),o.setHours(0,0,0,0)},function(o,f){o.setDate(o.getDate()+f*7)},function(o,f){return(f-o-(f.getTimezoneOffset()-o.getTimezoneOffset())*Ca)/Ih})}var Pr=gn(0),xr=gn(1),vo=gn(2),ka=gn(3),Ps=gn(4),Dt=gn(5),nn=gn(6),Mn=Pr.range,Tr=xr.range,br=vo.range,Vn=ka.range,Jn=Ps.range,or=Dt.range,xn=nn.range,Gn=rs(function(a){a.setHours(0,0,0,0)},function(a,o){a.setDate(a.getDate()+o)},function(a,o){return(o-a-(o.getTimezoneOffset()-a.getTimezoneOffset())*Ca)/fu},function(a){return a.getDate()-1}),tn=Gn,Kn=Gn.range,Dr=rs(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*qo-a.getMinutes()*Ca)},function(a,o){a.setTime(+a+o*ds)},function(a,o){return(o-a)/ds},function(a){return a.getHours()}),jr=Dr,vi=Dr.range,Qr=rs(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*qo)},function(a,o){a.setTime(+a+o*Ca)},function(a,o){return(o-a)/Ca},function(a){return a.getMinutes()}),bi=Qr,Io=Qr.range,Fi=rs(function(a){a.setTime(a-a.getMilliseconds())},function(a,o){a.setTime(+a+o*qo)},function(a,o){return(o-a)/qo},function(a){return a.getUTCSeconds()}),$i=Fi,na=Fi.range,Zo=rs(function(){},function(a,o){a.setTime(+a+o)},function(a,o){return o-a});Zo.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?rs(function(o){o.setTime(Math.floor(o/a)*a)},function(o,f){o.setTime(+o+f*a)},function(o,f){return(f-o)/a}):Zo};var Ns=Zo,Gu=Zo.range;function tu(a){return rs(function(o){o.setUTCDate(o.getUTCDate()-(o.getUTCDay()+7-a)%7),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCDate(o.getUTCDate()+f*7)},function(o,f){return(f-o)/Ih})}var $m=tu(0),Cf=tu(1),n_=tu(2),_p=tu(3),bp=tu(4),E1=tu(5),px=tu(6),r_=$m.range,S1=Cf.range,L0=n_.range,vx=_p.range,Ym=bp.range,Ug=E1.range,ic=px.range,wl=rs(function(a){a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCDate(a.getUTCDate()+o)},function(a,o){return(o-a)/fu},function(a){return a.getUTCDate()-1}),Km=wl,jg=wl.range,i_=rs(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCFullYear(a.getUTCFullYear()+o)},function(a,o){return o.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});i_.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:rs(function(o){o.setUTCFullYear(Math.floor(o.getUTCFullYear()/a)*a),o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCFullYear(o.getUTCFullYear()+f*a)})};var qm=i_,T1=i_.range;function Qm(a){if(0<=a.y&&a.y<100){var o=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return o.setFullYear(a.y),o}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Jp(a){if(0<=a.y&&a.y<100){var o=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return o.setUTCFullYear(a.y),o}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function xp(a,o,f){return{y:a,m:o,d:f,H:0,M:0,S:0,L:0}}function mx(a){var o=a.dateTime,f=a.date,m=a.time,T=a.periods,C=a.days,L=a.shortDays,F=a.months,V=a.shortMonths,ae=e0(T),Ae=nd(T),Ce=e0(C),Ye=nd(C),Bt=e0(L),rn=nd(L),Sn=e0(F),lr=nd(F),Br=e0(V),Er=nd(V),ui={a:Tm,A:Nv,b:qf,B:Ty,c:null,d:fn,e:fn,f:gr,g:oa,G:Xa,H:_n,I:Hn,j:Ln,L:cr,m:Ir,M:Nr,p:T2,q:yb,Q:vl,s:du,S:Xr,u:Mi,U:Yi,V:fo,w:Xo,W:ho,x:null,X:null,y:za,Y:Oo,Z:jo,"%":gc},ji={a:_b,A:vR,b:JT,B:wu,c:null,d:Ya,e:Ya,f:Nl,g:Js,G:ys,H:Vo,I:Is,j:rl,L:Zl,m:Al,M:nu,p:au,q:X_,Q:vl,s:du,S:hu,u:bu,U:Vc,V:Hc,w:Xl,W:ac,x:null,X:null,y:Ka,Y:Xs,Z:Wc,"%":gc},Po={a:is,A:Qo,b:ps,B:es,c:ls,d:P,e:P,f:$e,g:u,G:tm,H:j,I:j,j:B,L:Ne,m:A,M:ee,p:Da,q:g,Q:Tt,s:Nt,S:be,u:em,U:Gl,V:Qs,w:gx,W:ya,x:Qd,X:Jd,y:u,Y:tm,Z:d,"%":at};ui.x=no(f,ui),ui.X=no(m,ui),ui.c=no(o,ui),ji.x=no(f,ji),ji.X=no(m,ji),ji.c=no(o,ji);function no(la,Bs){return function(yl){var bo=[],df=-1,pu=0,Rp=la.length,ep,Z0,bb;for(yl instanceof Date||(yl=new Date(+yl));++df<Rp;)la.charCodeAt(df)===37&&(bo.push(la.slice(pu,df)),(Z0=Pu[ep=la.charAt(++df)])!=null?ep=la.charAt(++df):Z0=ep==="e"?" ":"0",(bb=Bs[ep])&&(ep=bb(yl,Z0)),bo.push(ep),pu=df+1);return bo.push(la.slice(pu,df)),bo.join("")}}function Gr(la,Bs){return function(yl){var bo=xp(1900,void 0,1),df=ro(bo,la,yl+="",0),pu,Rp;if(df!=yl.length)return null;if("Q"in bo)return new Date(bo.Q);if("s"in bo)return new Date(bo.s*1e3+("L"in bo?bo.L:0));if(Bs&&!("Z"in bo)&&(bo.Z=0),"p"in bo&&(bo.H=bo.H%12+bo.p*12),bo.m===void 0&&(bo.m="q"in bo?bo.q:0),"V"in bo){if(bo.V<1||bo.V>53)return null;"w"in bo||(bo.w=1),"Z"in bo?(pu=Jp(xp(bo.y,0,1)),Rp=pu.getUTCDay(),pu=Rp>4||Rp===0?Cf.ceil(pu):Cf(pu),pu=Km.offset(pu,(bo.V-1)*7),bo.y=pu.getUTCFullYear(),bo.m=pu.getUTCMonth(),bo.d=pu.getUTCDate()+(bo.w+6)%7):(pu=Qm(xp(bo.y,0,1)),Rp=pu.getDay(),pu=Rp>4||Rp===0?xr.ceil(pu):xr(pu),pu=tn.offset(pu,(bo.V-1)*7),bo.y=pu.getFullYear(),bo.m=pu.getMonth(),bo.d=pu.getDate()+(bo.w+6)%7)}else("W"in bo||"U"in bo)&&("w"in bo||(bo.w="u"in bo?bo.u%7:"W"in bo?1:0),Rp="Z"in bo?Jp(xp(bo.y,0,1)).getUTCDay():Qm(xp(bo.y,0,1)).getDay(),bo.m=0,bo.d="W"in bo?(bo.w+6)%7+bo.W*7-(Rp+5)%7:bo.w+bo.U*7-(Rp+6)%7);return"Z"in bo?(bo.H+=bo.Z/100|0,bo.M+=bo.Z%100,Jp(bo)):Qm(bo)}}function ro(la,Bs,yl,bo){for(var df=0,pu=Bs.length,Rp=yl.length,ep,Z0;df<pu;){if(bo>=Rp)return-1;if(ep=Bs.charCodeAt(df++),ep===37){if(ep=Bs.charAt(df++),Z0=Po[ep in Pu?Bs.charAt(df++):ep],!Z0||(bo=Z0(la,yl,bo))<0)return-1}else if(ep!=yl.charCodeAt(bo++))return-1}return bo}function Da(la,Bs,yl){var bo=ae.exec(Bs.slice(yl));return bo?(la.p=Ae[bo[0].toLowerCase()],yl+bo[0].length):-1}function is(la,Bs,yl){var bo=Bt.exec(Bs.slice(yl));return bo?(la.w=rn[bo[0].toLowerCase()],yl+bo[0].length):-1}function Qo(la,Bs,yl){var bo=Ce.exec(Bs.slice(yl));return bo?(la.w=Ye[bo[0].toLowerCase()],yl+bo[0].length):-1}function ps(la,Bs,yl){var bo=Br.exec(Bs.slice(yl));return bo?(la.m=Er[bo[0].toLowerCase()],yl+bo[0].length):-1}function es(la,Bs,yl){var bo=Sn.exec(Bs.slice(yl));return bo?(la.m=lr[bo[0].toLowerCase()],yl+bo[0].length):-1}function ls(la,Bs,yl){return ro(la,o,Bs,yl)}function Qd(la,Bs,yl){return ro(la,f,Bs,yl)}function Jd(la,Bs,yl){return ro(la,m,Bs,yl)}function Tm(la){return L[la.getDay()]}function Nv(la){return C[la.getDay()]}function qf(la){return V[la.getMonth()]}function Ty(la){return F[la.getMonth()]}function T2(la){return T[+(la.getHours()>=12)]}function yb(la){return 1+~~(la.getMonth()/3)}function _b(la){return L[la.getUTCDay()]}function vR(la){return C[la.getUTCDay()]}function JT(la){return V[la.getUTCMonth()]}function wu(la){return F[la.getUTCMonth()]}function au(la){return T[+(la.getUTCHours()>=12)]}function X_(la){return 1+~~(la.getUTCMonth()/3)}return{format:function(la){var Bs=no(la+="",ui);return Bs.toString=function(){return la},Bs},parse:function(la){var Bs=Gr(la+="",!1);return Bs.toString=function(){return la},Bs},utcFormat:function(la){var Bs=no(la+="",ji);return Bs.toString=function(){return la},Bs},utcParse:function(la){var Bs=Gr(la+="",!0);return Bs.toString=function(){return la},Bs}}}var Pu={"-":"",_:" ",0:"0"},oc=/^\s*\d+/,D0=/^%/,hv=/[\\^$*+?|[\]().{}]/g;function qs(a,o,f){var m=a<0?"-":"",T=(m?-a:a)+"",C=T.length;return m+(C<f?new Array(f-C+1).join(o)+T:T)}function w1(a){return a.replace(hv,"\\$&")}function e0(a){return new RegExp("^(?:"+a.map(w1).join("|")+")","i")}function nd(a){for(var o={},f=-1,m=a.length;++f<m;)o[a[f].toLowerCase()]=f;return o}function gx(a,o,f){var m=oc.exec(o.slice(f,f+1));return m?(a.w=+m[0],f+m[0].length):-1}function em(a,o,f){var m=oc.exec(o.slice(f,f+1));return m?(a.u=+m[0],f+m[0].length):-1}function Gl(a,o,f){var m=oc.exec(o.slice(f,f+2));return m?(a.U=+m[0],f+m[0].length):-1}function Qs(a,o,f){var m=oc.exec(o.slice(f,f+2));return m?(a.V=+m[0],f+m[0].length):-1}function ya(a,o,f){var m=oc.exec(o.slice(f,f+2));return m?(a.W=+m[0],f+m[0].length):-1}function tm(a,o,f){var m=oc.exec(o.slice(f,f+4));return m?(a.y=+m[0],f+m[0].length):-1}function u(a,o,f){var m=oc.exec(o.slice(f,f+2));return m?(a.y=+m[0]+(+m[0]>68?1900:2e3),f+m[0].length):-1}function d(a,o,f){var m=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(o.slice(f,f+6));return m?(a.Z=m[1]?0:-(m[2]+(m[3]||"00")),f+m[0].length):-1}function g(a,o,f){var m=oc.exec(o.slice(f,f+1));return m?(a.q=m[0]*3-3,f+m[0].length):-1}function A(a,o,f){var m=oc.exec(o.slice(f,f+2));return m?(a.m=m[0]-1,f+m[0].length):-1}function P(a,o,f){var m=oc.exec(o.slice(f,f+2));return m?(a.d=+m[0],f+m[0].length):-1}function B(a,o,f){var m=oc.exec(o.slice(f,f+3));return m?(a.m=0,a.d=+m[0],f+m[0].length):-1}function j(a,o,f){var m=oc.exec(o.slice(f,f+2));return m?(a.H=+m[0],f+m[0].length):-1}function ee(a,o,f){var m=oc.exec(o.slice(f,f+2));return m?(a.M=+m[0],f+m[0].length):-1}function be(a,o,f){var m=oc.exec(o.slice(f,f+2));return m?(a.S=+m[0],f+m[0].length):-1}function Ne(a,o,f){var m=oc.exec(o.slice(f,f+3));return m?(a.L=+m[0],f+m[0].length):-1}function $e(a,o,f){var m=oc.exec(o.slice(f,f+6));return m?(a.L=Math.floor(m[0]/1e3),f+m[0].length):-1}function at(a,o,f){var m=D0.exec(o.slice(f,f+1));return m?f+m[0].length:-1}function Tt(a,o,f){var m=oc.exec(o.slice(f));return m?(a.Q=+m[0],f+m[0].length):-1}function Nt(a,o,f){var m=oc.exec(o.slice(f));return m?(a.s=+m[0],f+m[0].length):-1}function fn(a,o){return qs(a.getDate(),o,2)}function _n(a,o){return qs(a.getHours(),o,2)}function Hn(a,o){return qs(a.getHours()%12||12,o,2)}function Ln(a,o){return qs(1+tn.count(Kr(a),a),o,3)}function cr(a,o){return qs(a.getMilliseconds(),o,3)}function gr(a,o){return cr(a,o)+"000"}function Ir(a,o){return qs(a.getMonth()+1,o,2)}function Nr(a,o){return qs(a.getMinutes(),o,2)}function Xr(a,o){return qs(a.getSeconds(),o,2)}function Mi(a){var o=a.getDay();return o===0?7:o}function Yi(a,o){return qs(Pr.count(Kr(a)-1,a),o,2)}function Lo(a){var o=a.getDay();return o>=4||o===0?Ps(a):Ps.ceil(a)}function fo(a,o){return a=Lo(a),qs(Ps.count(Kr(a),a)+(Kr(a).getDay()===4),o,2)}function Xo(a){return a.getDay()}function ho(a,o){return qs(xr.count(Kr(a)-1,a),o,2)}function za(a,o){return qs(a.getFullYear()%100,o,2)}function oa(a,o){return a=Lo(a),qs(a.getFullYear()%100,o,2)}function Oo(a,o){return qs(a.getFullYear()%1e4,o,4)}function Xa(a,o){var f=a.getDay();return a=f>=4||f===0?Ps(a):Ps.ceil(a),qs(a.getFullYear()%1e4,o,4)}function jo(a){var o=a.getTimezoneOffset();return(o>0?"-":(o*=-1,"+"))+qs(o/60|0,"0",2)+qs(o%60,"0",2)}function Ya(a,o){return qs(a.getUTCDate(),o,2)}function Vo(a,o){return qs(a.getUTCHours(),o,2)}function Is(a,o){return qs(a.getUTCHours()%12||12,o,2)}function rl(a,o){return qs(1+Km.count(qm(a),a),o,3)}function Zl(a,o){return qs(a.getUTCMilliseconds(),o,3)}function Nl(a,o){return Zl(a,o)+"000"}function Al(a,o){return qs(a.getUTCMonth()+1,o,2)}function nu(a,o){return qs(a.getUTCMinutes(),o,2)}function hu(a,o){return qs(a.getUTCSeconds(),o,2)}function bu(a){var o=a.getUTCDay();return o===0?7:o}function Vc(a,o){return qs($m.count(qm(a)-1,a),o,2)}function Iu(a){var o=a.getUTCDay();return o>=4||o===0?bp(a):bp.ceil(a)}function Hc(a,o){return a=Iu(a),qs(bp.count(qm(a),a)+(qm(a).getUTCDay()===4),o,2)}function Xl(a){return a.getUTCDay()}function ac(a,o){return qs(Cf.count(qm(a)-1,a),o,2)}function Ka(a,o){return qs(a.getUTCFullYear()%100,o,2)}function Js(a,o){return a=Iu(a),qs(a.getUTCFullYear()%100,o,2)}function Xs(a,o){return qs(a.getUTCFullYear()%1e4,o,4)}function ys(a,o){var f=a.getUTCDay();return a=f>=4||f===0?bp(a):bp.ceil(a),qs(a.getUTCFullYear()%1e4,o,4)}function Wc(){return"+0000"}function gc(){return"%"}function vl(a){return+a}function du(a){return Math.floor(+a/1e3)}var xu,Ss,js,sh,jd;ml({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ml(a){return xu=mx(a),Ss=xu.format,js=xu.parse,sh=xu.utcFormat,jd=xu.utcParse,xu}var lh=1e3,Gc=lh*60,Vd=Gc*60,Zf=Vd*24,Ep=Zf*7,Lh=Zf*30,Dh=Zf*365;function N0(a){return new Date(a)}function Xf(a){return a instanceof Date?+a:+new Date(+a)}function nm(a,o,f,m,T,C,L,F,V){var ae=qv(Rc,Rc),Ae=ae.invert,Ce=ae.domain,Ye=V(".%L"),Bt=V(":%S"),rn=V("%I:%M"),Sn=V("%I %p"),lr=V("%a %d"),Br=V("%b %d"),Er=V("%B"),ui=V("%Y"),ji=[[L,1,lh],[L,5,5*lh],[L,15,15*lh],[L,30,30*lh],[C,1,Gc],[C,5,5*Gc],[C,15,15*Gc],[C,30,30*Gc],[T,1,Vd],[T,3,3*Vd],[T,6,6*Vd],[T,12,12*Vd],[m,1,Zf],[m,2,2*Zf],[f,1,Ep],[o,1,Lh],[o,3,3*Lh],[a,1,Dh]];function Po(Gr){return(L(Gr)<Gr?Ye:C(Gr)<Gr?Bt:T(Gr)<Gr?rn:m(Gr)<Gr?Sn:o(Gr)<Gr?f(Gr)<Gr?lr:Br:a(Gr)<Gr?Er:ui)(Gr)}function no(Gr,ro,Da,is){if(Gr==null&&(Gr=10),typeof Gr=="number"){var Qo=Math.abs(Da-ro)/Gr,ps=Wp(function(es){return es[2]}).right(ji,Qo);ps===ji.length?(is=Zv(ro/Dh,Da/Dh,Gr),Gr=a):ps?(ps=ji[Qo/ji[ps-1][2]<ji[ps][2]/Qo?ps-1:ps],is=ps[1],Gr=ps[0]):(is=Math.max(Zv(ro,Da,Gr),1),Gr=F)}return is==null?Gr:Gr.every(is)}return ae.invert=function(Gr){return new Date(Ae(Gr))},ae.domain=function(Gr){return arguments.length?Ce(ed.call(Gr,Xf)):Ce().map(N0)},ae.ticks=function(Gr,ro){var Da=Ce(),is=Da[0],Qo=Da[Da.length-1],ps=Qo<is,es;return ps&&(es=is,is=Qo,Qo=es),es=no(Gr,is,Qo,ro),es=es?es.range(is,Qo+1):[],ps?es.reverse():es},ae.tickFormat=function(Gr,ro){return ro==null?Po:V(ro)},ae.nice=function(Gr,ro){var Da=Ce();return(Gr=no(Gr,Da[0],Da[Da.length-1],ro))?Ce(io(Da,Gr)):ae},ae.copy=function(){return cv(ae,nm(a,o,f,m,T,C,L,F,V))},ae}function Vg(){return Ph.apply(nm(Kr,rc,Pr,tn,jr,bi,$i,Ns,Ss).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function o_(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rd(){var a=0,o=1,f,m,T,C,L=Rc,F=!1,V;function ae(Ae){return isNaN(Ae=+Ae)?V:L(T===0?.5:(Ae=(C(Ae)-f)*T,F?Math.max(0,Math.min(1,Ae)):Ae))}return ae.domain=function(Ae){return arguments.length?(f=C(a=+Ae[0]),m=C(o=+Ae[1]),T=f===m?0:1/(m-f),ae):[a,o]},ae.clamp=function(Ae){return arguments.length?(F=!!Ae,ae):F},ae.interpolator=function(Ae){return arguments.length?(L=Ae,ae):L},ae.unknown=function(Ae){return arguments.length?(V=Ae,ae):V},function(Ae){return C=Ae,f=Ae(a),m=Ae(o),T=f===m?0:1/(m-f),ae}}function t0(a,o){return o.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function dv(){var a=fr(rd()(Rc));return a.copy=function(){return t0(a,dv())},Xv.apply(a,arguments)}function B0(){var a=loggish(rd()).domain([1,10]);return a.copy=function(){return t0(a,B0()).base(a.base())},initInterpolator.apply(a,arguments)}function pv(){var a=symlogish(rd());return a.copy=function(){return t0(a,pv()).constant(a.constant())},initInterpolator.apply(a,arguments)}function rm(){var a=powish(rd());return a.copy=function(){return t0(a,rm()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function a_(){return rm.apply(null,arguments).exponent(.5)}function Jm(){var a=[],o=identity;function f(m){if(!isNaN(m=+m))return o((bisect(a,m)-1)/(a.length-1))}return f.domain=function(m){if(!arguments.length)return a.slice();a=[];for(var T=0,C=m.length,L;T<C;++T)L=m[T],L!=null&&!isNaN(L=+L)&&a.push(L);return a.sort(ascending),f},f.interpolator=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return Jm(o).domain(a)},initInterpolator.apply(f,arguments)}function n0(){var a=0,o=.5,f=1,m,T,C,L,F,V=Rc,ae,Ae=!1,Ce;function Ye(Bt){return isNaN(Bt=+Bt)?Ce:(Bt=.5+((Bt=+ae(Bt))-T)*(Bt<T?L:F),V(Ae?Math.max(0,Math.min(1,Bt)):Bt))}return Ye.domain=function(Bt){return arguments.length?(m=ae(a=+Bt[0]),T=ae(o=+Bt[1]),C=ae(f=+Bt[2]),L=m===T?0:.5/(T-m),F=T===C?0:.5/(C-T),Ye):[a,o,f]},Ye.clamp=function(Bt){return arguments.length?(Ae=!!Bt,Ye):Ae},Ye.interpolator=function(Bt){return arguments.length?(V=Bt,Ye):V},Ye.unknown=function(Bt){return arguments.length?(Ce=Bt,Ye):Ce},function(Bt){return ae=Bt,m=Bt(a),T=Bt(o),C=Bt(f),L=m===T?0:.5/(T-m),F=T===C?0:.5/(C-T),Ye}}function F0(){var a=fr(n0()(Rc));return a.copy=function(){return t0(a,F0())},Xv.apply(a,arguments)}function im(){var a=loggish(n0()).domain([.1,1,10]);return a.copy=function(){return copy(a,im()).base(a.base())},initInterpolator.apply(a,arguments)}function k0(){var a=symlogish(n0());return a.copy=function(){return copy(a,k0()).constant(a.constant())},initInterpolator.apply(a,arguments)}function om(){var a=powish(n0());return a.copy=function(){return copy(a,om()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function s_(){return om.apply(null,arguments).exponent(.5)}function yc(a){let o,f=[];function m(T){return T==null?o:T}return m.invert=m,m.domain=m.range=T=>T?(f=T,T):f,m.unknown=T=>T?(o=T,T):o,m.copy=()=>yc(a).unknown(o),m}const{isNil:vv,isString:am,uniq:sm}=Ie.lodashUtil,Sp=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Hd={[Q.vY.LINEAR]:kr,[Q.vY.POWER]:Tl,[Q.vY.LOG]:Si,[Q.vY.IDENTITY]:yc,[Q.vY.SEQUENTIAL]:dv,[Q.vY.TIME]:Vg,[Q.vY.QUANTILE]:Za,[Q.vY.QUANTIZE]:Wl,[Q.vY.THRESHOLD]:Ks,[Q.vY.CAT]:M0,[Q.vY.DIVERGING]:F0};class id{constructor(){(0,en.Z)(this,"scaleOptions",{})}apply(o,{styleAttributeService:f}){var m=this;o.hooks.init.tapPromise("FeatureScalePlugin",(0,Ai.Z)(function*(){var T;o.log(Q.Or.ScaleInitStart,Q.KD.INIT),m.scaleOptions=o.getScaleOptions();const C=f.getLayerStyleAttributes(),L=(T=o.getSource())===null||T===void 0?void 0:T.data.dataArray;Array.isArray(L)&&L.length===0||(m.caculateScalesForAttributes(C||[],L),o.log(Q.Or.ScaleInitEnd,Q.KD.INIT))})),o.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var T=(0,Ai.Z)(function*(C){if(!C)return C;o.log(Q.Or.ScaleInitStart,Q.KD.UPDATE),m.scaleOptions=o.getScaleOptions();const L=f.getLayerStyleAttributes(),F=o.getSource().data.dataArray;return Array.isArray(F)&&F.length===0||(m.caculateScalesForAttributes(L||[],F),o.log(Q.Or.ScaleInitEnd,Q.KD.UPDATE),o.layerModelNeedUpdate=!0),!0});return function(C){return T.apply(this,arguments)}}()),o.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(o.layerModelNeedUpdate)return;this.scaleOptions=o.getScaleOptions();const T=f.getLayerStyleAttributes(),C=o.getSource().data.dataArray;if(!(Array.isArray(C)&&C.length===0)&&T){const L=T.filter(F=>F.needRescale);L.length&&this.caculateScalesForAttributes(L,C)}})}isNumber(o){return!isNaN(parseFloat(o))&&isFinite(o)}caculateScalesForAttributes(o,f){o.forEach(m=>{if(m.scale){const T=m.scale,C=m.scale.field;T.names=this.parseFields(vv(C)?[]:C);const L=[];T.names.forEach(F=>{var V;L.push(this.createScale(F,m.name,(V=m.scale)===null||V===void 0?void 0:V.values,f))}),L.some(F=>F.type===Q.ee.VARIABLE)?(T.type=Q.ee.VARIABLE,L.forEach(F=>{if(!T.callback&&T.values!=="text"){var V;switch((V=F.option)===null||V===void 0?void 0:V.type){case Q.vY.LOG:case Q.vY.LINEAR:case Q.vY.POWER:if(T.values&&T.values.length>2){const Ae=F.scale.ticks(T.values.length);F.scale.domain(Ae)}T.values?F.scale.range(T.values):F.scale.range(F.option.domain);break;case Q.vY.QUANTILE:case Q.vY.QUANTIZE:case Q.vY.THRESHOLD:F.scale.range(T.values);break;case Q.vY.IDENTITY:break;case Q.vY.CAT:T.values?F.scale.range(T.values):F.scale.range(F.option.domain);break;case Q.vY.DIVERGING:case Q.vY.SEQUENTIAL:F.scale.interpolator(Oc(T.values));break}}if(T.values==="text"){var ae;F.scale.range((ae=F.option)===null||ae===void 0?void 0:ae.domain)}})):(T.type=Q.ee.CONSTANT,T.defaultValues=L.map((F,V)=>F.scale(T.names[V]))),T.scalers=L.map(F=>({field:F.field,func:F.scale,option:F.option})),m.needRescale=!1}})}parseFields(o){return Array.isArray(o)?o:am(o)?o.split("*"):[o]}createScale(o,f,m,T){var C,L;const F=this.scaleOptions[f]&&((C=this.scaleOptions[f])===null||C===void 0?void 0:C.field)===o?this.scaleOptions[f]:this.scaleOptions[o],V={field:o,scale:void 0,type:Q.ee.VARIABLE,option:F};if(!T||!T.length)return F&&F.type?V.scale=this.createDefaultScale(F):(V.scale=M0([o]),V.type=Q.ee.CONSTANT),V;const ae=(L=T.find(Ae=>!vv(Ae[o])))===null||L===void 0?void 0:L[o];if(this.isNumber(o)||vv(ae)&&!F)V.scale=M0([o]),V.type=Q.ee.CONSTANT;else{let Ae=F&&F.type||this.getDefaultType(ae);m==="text"&&(Ae=Q.vY.CAT),m===void 0&&(Ae=Q.vY.IDENTITY);const Ce=this.createScaleConfig(Ae,o,F,T);V.scale=this.createDefaultScale(Ce),V.option=Ce}return V}getDefaultType(o){let f=Q.vY.LINEAR;return typeof o=="string"&&(f=Sp.test(o)?Q.vY.TIME:Q.vY.CAT),f}createScaleConfig(o,f,m,T){const C={type:o};let L=[];if(o===Q.vY.QUANTILE){const F=new Map;T==null||T.forEach(V=>{F.set(V._id,V[f])}),L=Array.from(F.values())}else L=(T==null?void 0:T.map(F=>F[f]))||[];if(m!=null&&m.domain)C.domain=m==null?void 0:m.domain;else if(o===Q.vY.CAT||o===Q.vY.IDENTITY)C.domain=sm(L);else if(o===Q.vY.QUANTILE)C.domain=L;else if(o===Q.vY.DIVERGING){const F=Ga(L),V=(m==null?void 0:m.neutral)!==void 0?m==null?void 0:m.neutral:(F[0]+F[1])/2;C.domain=[F[0],V,F[1]]}else C.domain=Ga(L);return(0,Or.Z)((0,Or.Z)({},C),m)}createDefaultScale({type:o,domain:f,unknown:m,clamp:T,nice:C}){const L=Hd[o]();return f&&L.domain&&L.domain(f),m&&L.unknown(m),T!==void 0&&L.clamp&&L.clamp(T),C!==void 0&&L.nice&&L.nice(C),L}}class Hg{apply(o){o.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{o.animateStatus&&o.models.forEach(m=>{m.addUniforms((0,Or.Z)({},o.layerModel.getAnimateUniforms()))})})}}class l_{apply(o){o.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:f,enableMask:m}=o.getLayerConfig();!o.tileLayer&&f&&f.length>0&&o.updateLayerConfig({mask:m})})}}class u_{build(o){return(0,Ai.Z)(function*(){o.prepareBuildModel(),yield o.buildModels()})()}initLayerModel(o){var f=this;return(0,Ai.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}prepareLayerModel(o){var f=this;return(0,Ai.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}apply(o){var f=this;o.hooks.init.tapPromise("LayerModelPlugin",(0,Ai.Z)(function*(){if(o.getSource().isTile){o.prepareBuildModel();return}o.log(Q.Or.BuildModelStart,Q.KD.INIT),yield f.initLayerModel(o),o.log(Q.Or.BuildModelEnd,Q.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var m=(0,Ai.Z)(function*(T){return!T||o.getSource().isTile?!1:(o.log(Q.Or.BuildModelStart,Q.KD.UPDATE),yield f.prepareLayerModel(o),o.log(Q.Or.BuildModelEnd,Q.KD.UPDATE),!0)});return function(T){return m.apply(this,arguments)}}())}}class od{apply(o){o.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:f,fitBoundsOptions:m}=o.getLayerConfig();f&&o.fitBounds(m),o.styleNeedUpdate=!1})}}const Wg=["type"],eg={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},mv={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},Ts={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},uh={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function A1(a){const o={u_DirectionalLights:new Array(3).fill((0,Or.Z)({},Ts)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,Or.Z)({},uh)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[mv]),a.forEach(f=>{let{type:m="directional"}=f,T=(0,Il.Z)(f,Wg);const C=eg[m].lights,L=eg[m].num,F=o[L];o[C][F]=(0,Or.Z)((0,Or.Z)({},o[C][F]),T),o[L]++}),o}class r0{apply(o){o.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:f}=o.getLayerConfig();f&&o.models.forEach(m=>m.addUniforms((0,Or.Z)({},A1())))})}}function Gg(a){return a.map(o=>(typeof o=="string"&&(o=[o,{}]),o))}function c_(a,o,f,m){const T=a.multiPassRenderer;return T.add(m("render")),Gg(o).forEach(C=>{const[L,F]=C;T.add(f(L),F)}),T.add(f("copy")),T}class Zg{constructor(){(0,en.Z)(this,"enabled",void 0)}apply(o,{rendererService:f,postProcessingPassFactory:m,normalPassFactory:T}){o.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:C,passes:L=[]}=o.getLayerConfig();this.enabled=!!C&&o.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(o.multiPassRenderer=c_(o,L,m,T),o.multiPassRenderer.setRenderFlag(!0))}),o.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:C,height:L}=f.getViewportSize();o.multiPassRenderer.resize(C,L)}})}}const lf={POSITION:0,POSITION_64LOW:1,COLOR:2,PICKING_COLOR:3,STROKE:4,OPACITY:5,OFFSETS:6,ROTATION:7,MAX:8};function Xg(a){switch(a){case"rotation":return{name:"Rotation",type:Q.GC.Attribute,descriptor:{name:"a_Rotation",shaderLocation:lf.ROTATION,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{rotation:f=0}=o;return Array.isArray(f)?[f[0]]:[f]}}};case"stroke":return{name:"stroke",type:Q.GC.Attribute,descriptor:{name:"a_Stroke",shaderLocation:lf.STROKE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:o=>{const{stroke:f=[1,1,1,1]}=o;return f}}};case"opacity":return{name:"opacity",type:Q.GC.Attribute,descriptor:{name:"a_Opacity",shaderLocation:lf.OPACITY,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{opacity:f=1}=o;return[f]}}};case"offsets":return{name:"offsets",type:Q.GC.Attribute,descriptor:{name:"a_Offsets",shaderLocation:lf.OFFSETS,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const{offsets:f}=o;return f}}};default:return}}const{isNumber:tg}=Ie.lodashUtil,i0={NONE:0,ENCODE:1,HIGHLIGHT:2};class $g{constructor(){(0,en.Z)(this,"pickingUniformMap",void 0)}pickOption2Array(){const o=[];return this.pickingUniformMap.forEach(f=>{tg(f)?o.push(f):o.push(...f)}),o}updatePickOption(o,f){Object.keys(o).forEach(L=>{this.pickingUniformMap.set(L,o[L])});const m=f.getLayerConfig().pickingBuffer||0,T=Number(f.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",m),this.pickingUniformMap.set("u_shaderPick",T),f.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(o,{styleAttributeService:f}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),o.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();f.registerStyleAttribute({name:"pickingColor",type:Q.GC.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:lf.PICKING_COLOR,buffer:{data:[],type:Q.gl.FLOAT},size:3,update:T=>{const{id:C}=T;return m?(0,Ie.Z6)(C):[0,0,0]}}})}),o.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:i0.ENCODE},o),o.models.forEach(T=>T.addUniforms({u_PickingStage:i0.ENCODE})))}),o.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:i0.HIGHLIGHT},o),o.models.forEach(T=>T.addUniforms({u_PickingStage:i0.HIGHLIGHT})))}),o.hooks.beforeHighlight.tap("PixelPickingPlugin",m=>{const{highlightColor:T,activeMix:C=0}=o.getLayerConfig(),L=typeof T=="string"?(0,Ie.CI)(T):T||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Ie.W0)(new Uint8Array(m))});const F={u_PickingStage:i0.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:L.map(V=>V*255),u_activeMix:C};this.updatePickOption(F,o),o.models.forEach(V=>V.addUniforms(F))}),o.hooks.beforeSelect.tap("PixelPickingPlugin",m=>{const{selectColor:T,selectMix:C=0}=o.getLayerConfig(),L=typeof T=="string"?(0,Ie.CI)(T):T||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Ie.W0)(new Uint8Array(m))});const F={u_PickingStage:i0.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:L.map(V=>V*255),u_activeMix:C,u_CurrentSelectedId:m,u_SelectColor:L.map(V=>V*255)};this.updatePickOption(F,o),o.models.forEach(V=>V.addUniforms(F))})}}const Yg=["mvt","geojsonvt","testTile"];function f_(a){const o=a.getSource();return Yg.includes(o.parser.type)}class ng{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{f_(o)||this.registerBuiltinAttributes(f,o)})}registerBuiltinAttributes(o,f){if(f.type==="MaskLayer"){this.registerPositionAttribute(o);return}this.registerPositionAttribute(o),this.registerColorAttribute(o)}registerPositionAttribute(o){o.registerStyleAttribute({name:"position",type:Q.GC.Attribute,descriptor:{name:"a_Position",shaderLocation:lf.POSITION,buffer:{data:[],type:Q.gl.FLOAT},size:3,update:(f,m,T)=>T.length===2?[T[0],T[1],0]:[T[0],T[1],T[2]]}})}registerColorAttribute(o){o.registerStyleAttribute({name:"color",type:Q.GC.Attribute,descriptor:{name:"a_Color",shaderLocation:lf.COLOR,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:f=>{const{color:m}=f;return!m||!m.length?[1,1,1,1]:m}}})}}class yx{constructor(){(0,en.Z)(this,"cameraService",void 0),(0,en.Z)(this,"coordinateSystemService",void 0),(0,en.Z)(this,"rendererService",void 0),(0,en.Z)(this,"mapService",void 0),(0,en.Z)(this,"layerService",void 0)}apply(o,{rendererService:f,mapService:m,layerService:T,coordinateSystemService:C,cameraService:L}){this.rendererService=f,this.mapService=m,this.layerService=T,this.coordinateSystemService=C,this.cameraService=L;let F;this.rendererService.uniformBuffers[0]||(F=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0,label:"renderUniformBuffer"}),this.rendererService.uniformBuffers[0]=F),o.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const V=o.getLayerConfig().tileOrigin;this.coordinateSystemService.refresh(V);const{width:ae,height:Ae}=this.rendererService.getViewportSize(),{data:Ce,uniforms:Ye}=this.generateUBO(ae,Ae);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:Ce}),this.rendererService.queryVerdorInfo()==="WebGL1"&&o.models.forEach(rn=>{rn.addUniforms((0,Or.Z)((0,Or.Z)({},Ye),{},{u_PickingBuffer:o.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(o.getShaderPickStat())}))})})}generateUBO(o,f){const m=this.cameraService.getProjectionMatrix(),T=this.cameraService.getViewMatrix(),C=this.cameraService.getViewProjectionMatrix(),L=this.cameraService.getModelMatrix(),F=this.coordinateSystemService.getViewportCenterProjection(),V=this.coordinateSystemService.getPixelsPerDegree(),ae=this.cameraService.getZoom(),Ae=this.coordinateSystemService.getPixelsPerDegree2(),Ce=this.cameraService.getZoomScale(),Ye=this.coordinateSystemService.getPixelsPerMeter(),Bt=this.coordinateSystemService.getCoordinateSystem(),rn=this.cameraService.getCameraPosition(),Sn=window.devicePixelRatio,lr=this.coordinateSystemService.getViewportCenter(),Br=[o,f],Er=this.cameraService.getFocalDistance();return{data:[...T,...m,...C,...L,...F,...V,ae,...Ae,Ce,...Ye,Bt,...rn,Sn,...lr,...Br,Er,0,0,0],uniforms:{[Q.lv.ProjectionMatrix]:m,[Q.lv.ViewMatrix]:T,[Q.lv.ViewProjectionMatrix]:C,[Q.lv.Zoom]:ae,[Q.lv.ZoomScale]:Ce,[Q.lv.FocalDistance]:Er,[Q.lv.CameraPosition]:rn,[Q.kw.CoordinateSystem]:Bt,[Q.kw.ViewportCenter]:lr,[Q.kw.ViewportCenterProjection]:F,[Q.kw.PixelsPerDegree]:V,[Q.kw.PixelsPerDegree2]:Ae,[Q.kw.PixelsPerMeter]:Ye,u_ViewportSize:Br,u_ModelMatrix:L,u_DevicePixelRatio:Sn}}}}class _x{apply(o){o.hooks.beforeRender.tap("UpdateModelPlugin",()=>{o.layerModel&&o.layerModel.needUpdate().then(f=>{f&&o.renderLayers()})}),o.hooks.afterRender.tap("UpdateModelPlugin",()=>{o.layerModelNeedUpdate=!1})}}class O1{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(o,{styleAttributeService:f})}),o.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{o.layerModelNeedUpdate||o.inited&&this.updateStyleAttribute(o,{styleAttributeService:f})})}updateStyleAttribute(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],T=f.getLayerStyleAttribute("filter");if(T&&T.needRegenerateVertices){o.layerModelNeedUpdate=!0,m.forEach(C=>C.needRegenerateVertices=!1);return}m.filter(C=>C.needRegenerateVertices).forEach(C=>{f.updateAttributeByFeatureRange(C.name,o.getEncodedData(),C.featureRange.startIndex,C.featureRange.endIndex,o),C.needRegenerateVertices=!1})}initStyleAttribute(o,{styleAttributeService:f}){(f.getLayerStyleAttributes()||[]).filter(T=>T.needRegenerateVertices).forEach(T=>{f.updateAttributeByFeatureRange(T.name,o.getEncodedData(),T.featureRange.startIndex,T.featureRange.endIndex),T.needRegenerateVertices=!1})}}function h_(){return[new tc,new ng,new id,new Ll,new od,new l_,new O1,new _x,new Zg,new yx,new Hg,new r0,new $g,new u_]}const d_={[Q.h0.additive]:{enable:!0,func:{srcRGB:Q.gl.ONE,dstRGB:Q.gl.ONE,srcAlpha:1,dstAlpha:1}},[Q.h0.none]:{enable:!1},[Q.h0.normal]:{enable:!0,func:{srcRGB:Q.gl.SRC_ALPHA,dstRGB:Q.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[Q.h0.subtractive]:{enable:!0,func:{srcRGB:Q.gl.ONE,dstRGB:Q.gl.ONE,srcAlpha:Q.gl.ZERO,dstAlpha:Q.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:Q.gl.FUNC_SUBTRACT,alpha:Q.gl.FUNC_SUBTRACT}},[Q.h0.max]:{enable:!0,func:{srcRGB:Q.gl.ONE,dstRGB:Q.gl.ONE},equation:{rgb:Q.gl.MAX_EXT}},[Q.h0.min]:{enable:!0,func:{srcRGB:Q.gl.ONE,dstRGB:Q.gl.ONE},equation:{rgb:Q.gl.MIN_EXT}}};class Nh{constructor(o){(0,en.Z)(this,"layer",void 0),this.layer=o}pickRender(o){const m=this.layer.getContainer().layerService,T=this.layer;if(T.tileLayer)return T.tileLayer.pickRender(o);T.hooks.beforePickingEncode.call(),m.renderTileLayerMask(T),T.renderModels({ispick:!0}),T.hooks.afterPickingEncode.call()}pick(o,f){var m=this;return(0,Ai.Z)(function*(){const C=m.layer.getContainer().pickingService;return o.type==="RasterLayer"?m.pickRasterLayer(o,f):(m.pickRender(f),C.pickFromPickingFBO(o,f))})()}pickRasterLayer(o,f,m){const T=this.layer.getContainer(),C=T.pickingService,L=T.mapService,F=this.layer.getSource().extent,V=(0,Ie.if)(f.lngLat,F),ae={x:f.x,y:f.y,type:f.type,lngLat:f.lngLat,target:f,rasterValue:null},Ae=m||o;if(V){const Ce=this.readRasterValue(o,F,L,f.x,f.y);return ae.rasterValue=Ce,C.triggerHoverOnLayer(Ae,ae),!0}else return ae.type=f.type==="mousemove"?"mouseout":"un"+f.type,C.triggerHoverOnLayer(Ae,(0,Or.Z)((0,Or.Z)({},ae),{},{type:"unpick"})),C.triggerHoverOnLayer(Ae,ae),!1}readRasterValue(o,f,m,T,C){const L=o.getSource().data.dataArray[0],[F=0,V=0,ae=10,Ae=-10]=f,Ce=m.lngLatToContainer([F,V]),Ye=m.lngLatToContainer([ae,Ae]),Bt=Ye.x-Ce.x,rn=Ce.y-Ye.y,Sn=[(T-Ce.x)/Bt,(C-Ye.y)/rn],lr=L.width||1,Br=L.height||1,Er=Math.floor(Sn[0]*lr),ui=Math.floor(Sn[1]*Br),ji=Math.max(0,ui-1)*lr+Er;return L.data[ji]}selectFeature(o){const f=this.layer,[m,T,C]=o;f.hooks.beforeSelect.call([m,T,C])}highlightPickedFeature(o){const[f,m,T]=o;this.layer.hooks.beforeHighlight.call([f,m,T])}getFeatureById(o){return this.layer.getSource().getFeatureById(o)}}class rg{constructor(o){(0,en.Z)(this,"layer",void 0),(0,en.Z)(this,"rendererService",void 0),(0,en.Z)(this,"colorTexture",void 0),(0,en.Z)(this,"key",void 0),this.layer=o;const f=this.layer.getContainer();this.rendererService=f.rendererService}getColorTexture(o,f){const m=this.getTextureKey(o,f);return this.key===m?this.colorTexture:(this.createColorTexture(o,f),this.key=m,this.colorTexture)}createColorTexture(o,f){const{createTexture2D:m}=this.rendererService,T=this.getColorRampBar(o,f),C=m({data:new Uint8Array(T.data),width:T.width,height:T.height,flipY:!1,unorm:!0});return this.colorTexture=C,C}setColorTexture(o,f,m){this.key=this.getTextureKey(f,m),this.colorTexture=o}destroy(){var o;(o=this.colorTexture)===null||o===void 0||o.destroy()}getColorRampBar(o,f){switch(o.type){case"cat":return(0,Ie.hj)(o);case"quantize":return(0,Ie.NJ)(o);case"custom":return(0,Ie.Oc)(o,f);case"linear":return(0,Ie.M4)(o,f);default:return(0,Ie.Cl)(o)}}getTextureKey(o,f){var m;return`${o.colors.join("_")}_${o==null||(m=o.positions)===null||m===void 0?void 0:m.join("_")}_${o.type}_${f==null?void 0:f.join("_")}`}}const Wd=["passes"],Tp=["moduleName","vertexShader","fragmentShader","defines","inject","triangulation","styleOption","pickingEnabled"],{isEqual:Kg,isFunction:C1,isNumber:ch,isObject:Lu,isPlainObject:gv,isUndefined:lm}=Ie.lodashUtil;let o0=0;class yv extends Hu.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){var o;return(o=this.container)===null||o===void 0?void 0:o.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(o={}){super(),(0,en.Z)(this,"id",`${o0++}`),(0,en.Z)(this,"name",`${o0}`),(0,en.Z)(this,"parent",void 0),(0,en.Z)(this,"coordCenter",void 0),(0,en.Z)(this,"type",void 0),(0,en.Z)(this,"visible",!0),(0,en.Z)(this,"zIndex",0),(0,en.Z)(this,"minZoom",void 0),(0,en.Z)(this,"maxZoom",void 0),(0,en.Z)(this,"inited",!1),(0,en.Z)(this,"layerModelNeedUpdate",!1),(0,en.Z)(this,"pickedFeatureID",null),(0,en.Z)(this,"selectedFeatureID",null),(0,en.Z)(this,"styleNeedUpdate",!1),(0,en.Z)(this,"rendering",void 0),(0,en.Z)(this,"forceRender",!1),(0,en.Z)(this,"clusterZoom",0),(0,en.Z)(this,"layerType",void 0),(0,en.Z)(this,"triangulation",void 0),(0,en.Z)(this,"layerPickService",void 0),(0,en.Z)(this,"textureService",void 0),(0,en.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,en.Z)(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,en.Z)(this,"hooks",{init:new ql.S$,afterInit:new ql.oI,beforeRender:new ql.oI,beforeRenderData:new ql.bf,afterRender:new ql.ni,beforePickingEncode:new ql.ni,afterPickingEncode:new ql.ni,beforeHighlight:new ql.ni(["pickedColor"]),afterHighlight:new ql.ni,beforeSelect:new ql.ni(["pickedColor"]),afterSelect:new ql.ni,beforeDestroy:new ql.ni,afterDestroy:new ql.ni}),(0,en.Z)(this,"models",[]),(0,en.Z)(this,"multiPassRenderer",void 0),(0,en.Z)(this,"plugins",void 0),(0,en.Z)(this,"startInit",!1),(0,en.Z)(this,"sourceOption",void 0),(0,en.Z)(this,"layerModel",void 0),(0,en.Z)(this,"shapeOption",void 0),(0,en.Z)(this,"tileLayer",void 0),(0,en.Z)(this,"layerChildren",[]),(0,en.Z)(this,"masks",[]),(0,en.Z)(this,"configService",Q.cO),(0,en.Z)(this,"styleAttributeService",void 0),(0,en.Z)(this,"layerSource",void 0),(0,en.Z)(this,"postProcessingPassFactory",void 0),(0,en.Z)(this,"animateOptions",{enable:!1}),(0,en.Z)(this,"container",void 0),(0,en.Z)(this,"encodedData",void 0),(0,en.Z)(this,"currentPickId",null),(0,en.Z)(this,"rawConfig",void 0),(0,en.Z)(this,"needUpdateConfig",void 0),(0,en.Z)(this,"encodeStyleAttribute",{}),(0,en.Z)(this,"enableShaderEncodeStyles",[]),(0,en.Z)(this,"enableDataEncodeStyles",[]),(0,en.Z)(this,"pendingStyleAttributes",[]),(0,en.Z)(this,"scaleOptions",{}),(0,en.Z)(this,"animateStartTime",void 0),(0,en.Z)(this,"animateStatus",!1),(0,en.Z)(this,"isDestroyed",!1),(0,en.Z)(this,"uniformBuffers",[]),(0,en.Z)(this,"encodeDataLength",0),(0,en.Z)(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0;const f=this.getLayerConfig();f&&f.autoFit&&this.fitBounds(f.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=o.name||this.id,this.zIndex=o.zIndex||0,this.rawConfig=o,this.masks=o.maskLayers||[]}addMask(o){this.masks.push(o),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(o){this.masks.push(o)}removeMaskLayer(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),o.destroy()}getAttribute(o){return this.styleAttributeService.getLayerStyleAttribute(o)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(o){if(Object.keys(o).map(f=>{f in this.rawConfig&&(this.rawConfig[f]=o[f])}),!this.startInit)this.needUpdateConfig=(0,Or.Z)((0,Or.Z)({},this.needUpdateConfig),o);else{const f=this.container.id;this.configService.setLayerConfig(f,this.id,(0,Or.Z)((0,Or.Z)((0,Or.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),o)),this.needUpdateConfig={}}}setContainer(o){this.container=o}getContainer(){return this.container}addPlugin(o){return this.plugins.push(o),this}init(){var o=this;return(0,Ai.Z)(function*(){const f=o.container.id;o.startInit=!0,o.configService.setLayerConfig(f,o.id,o.rawConfig),o.layerType=o.rawConfig.layerType;const{enableMultiPassRenderer:m,passes:T}=o.getLayerConfig();m&&T!==null&&T!==void 0&&T.length&&T.length>0&&o.mapService.on("mapAfterFrameChange",()=>{o.renderLayers()}),o.postProcessingPassFactory=o.container.postProcessingPassFactory,o.styleAttributeService=o.container.styleAttributeService,m&&(o.multiPassRenderer=o.container.multiPassRenderer,o.multiPassRenderer.setLayer(o)),o.pendingStyleAttributes.forEach(({attributeName:C,attributeField:L,attributeValues:F,updateOptions:V})=>{o.styleAttributeService.updateStyleAttribute(C,{scale:(0,Or.Z)({field:L},o.splitValuesAndCallbackInAttribute(F,L?void 0:o.getLayerConfig()[C]))},V)}),o.pendingStyleAttributes=[],o.plugins=h_();for(const C of o.plugins)C.apply(o,o.container);o.layerPickService=new Nh(o),o.textureService=new rg(o),o.log(Q.Or.LayerInitStart),yield o.hooks.init.promise(),o.log(Q.Or.LayerInitEnd),o.inited=!0,o.emit("inited",{target:o,type:"inited"}),o.emit("add",{target:o,type:"add"}),o.hooks.afterInit.call()})()}log(o,f="init"){var m;if(this.tileLayer||this.isTileLayer)return;const T=`${this.id}.${f}.${o}`,C={id:this.id,type:this.type};(m=this.debugService)===null||m===void 0||m.log(T,C)}updateModelData(o){o.attributes&&o.elements?this.models.map(f=>{f.updateAttributesAndElements(o.attributes,o.elements)}):console.warn("data error")}setLayerPickService(o){this.layerPickService=o}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:o}=this.getLayerConfig();o!=null&&o.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(o,f,m){return this.updateStyleAttribute("color",o,f,m),this}texture(o,f,m){return this.updateStyleAttribute("texture",o,f,m),this}rotate(o,f,m){return this.updateStyleAttribute("rotate",o,f,m),this}size(o,f,m){return this.updateStyleAttribute("size",o,f,m),this}filter(o,f,m){const T=this.updateStyleAttribute("filter",o,f,m);return this.dataState.dataSourceNeedUpdate=T&&this.inited,this}shape(o,f,m){this.shapeOption={field:o,values:f};const T=this.updateStyleAttribute("shape",o,f,m);return this.dataState.dataSourceNeedUpdate=T&&this.inited,this}label(o,f,m){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:o,attributeValues:f,updateOptions:m}),this}animate(o){let f={};return Lu(o)?(f.enable=!0,f=(0,Or.Z)((0,Or.Z)({},f),o)):f.enable=o,this.updateLayerConfig({animateOption:f}),this}source(o,f){return(o==null?void 0:o.type)==="source"?(this.setSource(o),this):(this.sourceOption={data:o,options:f},this.clusterZoom=0,this)}setData(o,f){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(o,f)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(o,f)}),this}dataUpdatelog(){this.log(Q.Or.SourceInitStart,Q.KD.UPDATE),this.layerSource.once("update",()=>{this.log(Q.Or.SourceInitEnd,Q.KD.UPDATE)})}style(o){const{passes:f}=o,m=(0,Il.Z)(o,Wd);f&&Gg(f).forEach(C=>{const L=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(C[0]);L&&L.updateOptions(C[1])}),m.borderColor&&(m.stroke=m.borderColor),m.borderWidth&&(m.strokeWidth=m.borderWidth);const T=m;return Object.keys(m).forEach(C=>{const L=m[C];Array.isArray(L)&&L.length===2&&!ch(L[0])&&!ch(L[1])&&(T[C]={field:L[0],value:L[1]})}),this.encodeStyle(T),this.updateLayerConfig(T),this}encodeStyle(o){Object.keys(o).forEach(f=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(f)&&gv(o[f])&&(o[f].field||o[f].value)&&!Kg(this.encodeStyleAttribute[f],o[f])?(this.encodeStyleAttribute[f]=o[f],this.updateStyleAttribute(f,o[f].field,o[f].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[f]&&(delete this.encodeStyleAttribute[f],this.dataState.dataSourceNeedUpdate=!0)})}scale(o,f){const m=(0,Or.Z)({},this.scaleOptions);if(Lu(o)?this.scaleOptions=(0,Or.Z)((0,Or.Z)({},this.scaleOptions),o):this.scaleOptions[o]=f,this.styleAttributeService&&!Kg(m,this.scaleOptions)){const T=Lu(o)?o:{[o]:f};this.styleAttributeService.updateScaleAttribute(T)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(o={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(o),this))}renderMultiPass(){var o=this;return(0,Ai.Z)(function*(){o.encodeDataLength<=0&&!o.forceRender||(o.multiPassRenderer&&o.multiPassRenderer.getRenderFlag()?yield o.multiPassRenderer.render():o.renderModels())})()}active(o){const f={};return f.enableHighlight=Lu(o)?!0:o,Lu(o)?(f.enableHighlight=!0,o.color&&(f.highlightColor=o.color),o.mix&&(f.activeMix=o.mix)):f.enableHighlight=!!o,this.updateLayerConfig(f),this}setActive(o,f){if(Lu(o)){const{x:m=0,y:T=0}=o;this.updateLayerConfig({highlightColor:Lu(f)?f.color:this.getLayerConfig().highlightColor,activeMix:Lu(f)?f.mix:this.getLayerConfig().activeMix}),this.pick({x:m,y:T})}else this.updateLayerConfig({pickedFeatureID:o,highlightColor:Lu(f)?f.color:this.getLayerConfig().highlightColor,activeMix:Lu(f)?f.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call((0,Ie.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(o){const f={};return f.enableSelect=Lu(o)?!0:o,Lu(o)?(f.enableSelect=!0,o.color&&(f.selectColor=o.color),o.mix&&(f.selectMix=o.mix)):f.enableSelect=!!o,this.updateLayerConfig(f),this}setSelect(o,f){if(Lu(o)){const{x:m=0,y:T=0}=o;this.updateLayerConfig({selectColor:Lu(f)?f.color:this.getLayerConfig().selectColor,selectMix:Lu(f)?f.mix:this.getLayerConfig().selectMix}),this.pick({x:m,y:T})}else this.updateLayerConfig({pickedFeatureID:o,selectColor:Lu(f)?f.color:this.getLayerConfig().selectColor,selectMix:Lu(f)?f.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,Ie.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(o){return this.updateLayerConfig({blend:o}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(o){return this.zIndex=o,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(o){this.currentPickId=o}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(o){this.selectedFeatureID=o}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const o=this.mapService.getZoom(),{visible:f,minZoom:m=-1/0,maxZoom:T=1/0}=this.getLayerConfig();return!!f&&o>=m&&o<T}setMultiPass(o,f){if(this.updateLayerConfig({enableMultiPassRenderer:o}),f&&this.updateLayerConfig({passes:f}),o){const{passes:m=[]}=this.getLayerConfig();this.multiPassRenderer=c_(this,m,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:T,height:C}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(T,C)}return this}setMinZoom(o){return this.updateLayerConfig({minZoom:o}),this}getMinZoom(){const{minZoom:o}=this.getLayerConfig();return o}getMaxZoom(){const{maxZoom:o}=this.getLayerConfig();return o}get(o){return this.getLayerConfig()[o]}setMaxZoom(o){return this.updateLayerConfig({maxZoom:o}),this}setAutoFit(o){return this.updateLayerConfig({autoFit:o}),this}fitBounds(o){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const m=this.getSource().extent;return m.some(C=>Math.abs(C)===1/0)?this:(this.mapService.fitBounds([[m[0],m[1]],[m[2],m[3]]],o),this)}destroy(o=!0){var f,m,T,C,L;if(this.isDestroyed)return;(f=this.layerModel)===null||f===void 0||f.uniformBuffers.forEach(V=>{V.destroy()}),this.layerChildren.map(V=>V.destroy(!1)),this.layerChildren=[];const{maskfence:F}=this.getLayerConfig();F&&(this.masks.map(V=>V.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(m=this.multiPassRenderer)===null||m===void 0||m.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(T=this.layerModel)===null||T===void 0||T.clearModels(o),(C=this.tileLayer)===null||C===void 0||C.destroy(),this.models=[],(L=this.debugService)===null||L===void 0||L.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var o;this.models.forEach(f=>f.destroy()),(o=this.layerModel)===null||o===void 0||o.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(o=>o.needRescale||o.needRemapping||o.needRegenerateVertices).length}setSource(o){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=o,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const f=this.mapService.getZoom();this.layerSource.updateClusterData(f)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:f})=>{if(this.coordCenter===void 0){const m=this.layerSource.center;this.coordCenter=m}if(f==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(o){this.encodedData=o,this.encodeDataLength=o.length}getEncodedData(){return this.encodedData}getScale(o){return this.styleAttributeService.getLayerAttributeScale(o)}getLegend(o){var f,m,T;const C=this.styleAttributeService.getLayerStyleAttribute(o);return{type:(m=((C==null||(f=C.scale)===null||f===void 0?void 0:f.scalers)||[])[0])===null||m===void 0||(m=m.option)===null||m===void 0?void 0:m.type,field:C==null||(T=C.scale)===null||T===void 0?void 0:T.field,items:this.getLegendItems(o)}}getLegendItems(o){const f=this.styleAttributeService.getLayerAttributeScale(o);return f?f.invertExtent?f.range().map(T=>({value:f.invertExtent(T),[o]:T})):f.ticks?f.ticks().map(T=>({value:T,[o]:f(T)})):f!=null&&f.domain?f.domain().filter(T=>!lm(T)).map(T=>({value:T,[o]:f(T)})):[]:[]}pick({x:o,y:f}){this.interactionService.triggerHover({x:o,y:f})}boxSelect(o,f){this.pickingService.boxPickLayer(this,o,f)}buildLayerModel(o){var f=this;return(0,Ai.Z)(function*(){const{moduleName:m,vertexShader:T,fragmentShader:C,defines:L,inject:F,triangulation:V,styleOption:ae,pickingEnabled:Ae=!0}=o,Ce=(0,Il.Z)(o,Tp);f.shaderModuleService.registerModule(m,{vs:T,fs:C,defines:L,inject:F});const{vs:Ye,fs:Bt,uniforms:rn}=f.shaderModuleService.getModule(m),{createModel:Sn}=f.rendererService;return new Promise(lr=>{const{attributes:Br,elements:Er,count:ui}=f.styleAttributeService.createAttributesAndIndices(f.encodedData,V,ae,f),ji=[...f.layerModel.uniformBuffers,...f.rendererService.uniformBuffers];Ae&&ji.push(f.getPickingUniformBuffer());const Po=(0,Or.Z)({attributes:Br,uniforms:rn,fs:Bt,vs:Ye,elements:Er,blend:d_[Q.h0.normal],uniformBuffers:ji,textures:f.layerModel.textures},Ce);ui&&(Po.count=ui);const no=Sn(Po);lr(no)})})()}createAttributes(o){const{triangulation:f}=o,{attributes:m}=this.styleAttributeService.createAttributes(this.encodedData,f);return m}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(o){const{enableHighlight:f=!0,enableSelect:m=!0}=this.getLayerConfig();let T=this.eventNames().indexOf(o)!==-1||this.eventNames().indexOf("un"+o)!==-1;return(o==="click"||o==="dblclick")&&m&&(T=!0),o==="mousemove"&&(f||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(T=!0),this.isVisible()&&T}buildModels(){return(0,Ai.Z)(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var o=this;return(0,Ai.Z)(function*(){yield o.buildModels()})()}renderMulPass(o){return(0,Ai.Z)(function*(){yield o.render()})()}renderModels(o={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(f=>{f.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(o),textures:this.layerModel.textures},(o==null?void 0:o.ispick)||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(o,f,m,T){const C=this.configService.getAttributeConfig(this.id)||{};return Kg(C[o],{field:f,values:m})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(o)!==-1&&this.configService.setAttributeConfig(this.id,{[o]:{field:f,values:m}}),this.startInit?this.styleAttributeService.updateStyleAttribute(o,{scale:(0,Or.Z)({field:f},this.splitValuesAndCallbackInAttribute(m,this.getLayerConfig()[f]))},T):this.pendingStyleAttributes.push({attributeName:o,attributeField:f,attributeValues:m,updateOptions:T}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(o){console.warn("empty fn")}processData(o){return o}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}initLayerModels(){var o=this;return(0,Ai.Z)(function*(){o.models.forEach(m=>m.destroy()),o.models=[],o.uniformBuffers.forEach(m=>{m.destroy()}),o.uniformBuffers=[];const f=o.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0,label:"pickingUniforms"});o.uniformBuffers.push(f),o.models=yield o.layerModel.initModels()})()}getPickingUniformBuffer(){return this.uniformBuffers[0]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(o){return{values:C1(o)?void 0:o,callback:C1(o)?o:void 0}}}function bx(a,o){return{enable:a,mask:255,func:{cmp:Q.gl.EQUAL,ref:o?1:0,mask:1}}}function p_(a){return a.maskOperation===Q.lE.OR?{enable:!0,mask:255,func:{cmp:Q.gl.ALWAYS,ref:1,mask:255},opFront:{fail:Q.gl.KEEP,zfail:Q.gl.REPLACE,zpass:Q.gl.REPLACE}}:{enable:!0,mask:255,func:{cmp:a.stencilType===Q.yn.SINGLE||a.stencilIndex===0?Q.gl.ALWAYS:Q.gl.LESS,ref:a.stencilType===Q.yn.SINGLE?1:a.stencilIndex===0?2:1,mask:255},opFront:{fail:Q.gl.KEEP,zfail:Q.gl.REPLACE,zpass:Q.gl.REPLACE}}}const v_={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},ig={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};var R1=D(9187),fh=D.n(R1);function qg(a){return Math.max(Math.ceil(a/4)*4,4)}function og(a,o,f,m=!0){const T=f===3;if(m){a=a.slice();const L=[];for(let F=0;F<a.length;F+=f){L[0]=a[F],L[1]=a[F+1],T&&(L[2]=a[F+2]);const V=(0,Ie.vP)(L,!0,{enable:!1,decimal:1});a[F]=V[0],a[F+1]=V[1],T&&(a[F+2]=V[2])}}return fh()(a,o,f)}const ag="ATTRIBUTE_LOCATION_";class Ol{get attributeLocation(){return(0,Or.Z)({},lf)}constructor(o){(0,en.Z)(this,"triangulation",void 0),(0,en.Z)(this,"uniformBuffers",[]),(0,en.Z)(this,"textures",[]),(0,en.Z)(this,"createTexture2D",void 0),(0,en.Z)(this,"preStyleAttribute",{}),(0,en.Z)(this,"encodeStyleAttribute",{}),(0,en.Z)(this,"layer",void 0),(0,en.Z)(this,"dataTexture",void 0),(0,en.Z)(this,"DATA_TEXTURE_WIDTH",void 0),(0,en.Z)(this,"dataTextureTest",void 0),(0,en.Z)(this,"configService",void 0),(0,en.Z)(this,"shaderModuleService",void 0),(0,en.Z)(this,"rendererService",void 0),(0,en.Z)(this,"iconService",void 0),(0,en.Z)(this,"fontService",void 0),(0,en.Z)(this,"styleAttributeService",void 0),(0,en.Z)(this,"mapService",void 0),(0,en.Z)(this,"cameraService",void 0),(0,en.Z)(this,"layerService",void 0),(0,en.Z)(this,"pickingService",void 0),(0,en.Z)(this,"attributeUnifoms",void 0),(0,en.Z)(this,"commonUnifoms",void 0),this.layer=o,this.configService=o.getContainer().globalConfigService,this.rendererService=o.getContainer().rendererService,this.pickingService=o.getContainer().pickingService,this.shaderModuleService=o.getContainer().shaderModuleService,this.styleAttributeService=o.getContainer().styleAttributeService,this.mapService=o.getContainer().mapService,this.iconService=o.getContainer().iconService,this.fontService=o.getContainer().fontService,this.cameraService=o.getContainer().cameraService,this.layerService=o.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:f}=this.rendererService;this.createTexture2D=f}getBlend(){const{blend:o="normal"}=this.layer.getLayerConfig();return d_[Q.h0[o]]}getStencil(o){const{mask:f=!1,maskInside:m=!0,enableMask:T,maskOperation:C=Q.lE.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return p_({isStencil:!0,stencilType:Q.yn.SINGLE});if(o.isStencil)return p_((0,Or.Z)((0,Or.Z)({},o),{},{maskOperation:C}));const L=f||T&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return bx(L,m)}getDefaultStyle(){return{}}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const m=(0,Or.Z)((0,Or.Z)({},f.uniformsOption),o.uniformsOption);return Object.keys(m).forEach(T=>{typeof m[T]=="boolean"&&(m[T]=m[T]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(m.u_texture=this.textures[0]),m}getAnimateUniforms(){return{}}needUpdate(){return(0,Ai.Z)(function*(){return!1})()}buildModels(){return(0,Ai.Z)(function*(){throw new Error("Method not implemented.")})()}initModels(){return(0,Ai.Z)(function*(){throw new Error("Method not implemented.")})()}clearModels(o=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(o){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(o){return[o.enable?0:1,o.duration||4,o.interval||.2,o.trailLength||.1]}startModelAnimate(){const{animateOption:o}=this.layer.getLayerConfig();o.enable&&this.layer.setAnimateStartTime()}getInject(){return m_(this.layer.enableShaderEncodeStyles,this.layer.encodeStyleAttribute)}getDefines(){const o=Object.keys(this.attributeLocation).reduce((f,m)=>{const T=ag+m;return f[T]=this.attributeLocation[m],f},{});return(0,Or.Z)({},o)}getStyleAttribute(){const o={};return this.layer.enableShaderEncodeStyles.forEach(f=>{if(!this.layer.encodeStyleAttribute[f]){const m=this.layer.getLayerConfig()[f];let T=typeof m=="undefined"?v_[f]:m;f==="stroke"&&(T=(0,Ie.CI)(T)),o["u_"+f]=T}}),o}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(o=>{const f=Xg(o);f&&this.styleAttributeService.registerStyleAttribute(f)})}registerPosition64LowAttribute(o=!0){this.styleAttributeService.registerStyleAttribute({name:"position64Low",type:Q.GC.Attribute,descriptor:{name:"a_Position64Low",shaderLocation:this.attributeLocation.POSITION_64LOW,buffer:{data:[],type:Q.gl.FLOAT},size:2,update:(f,m,T)=>o?[(0,Ie.Ks)(T[0]),(0,Ie.Ks)(T[1])]:[0,0]}})}updateEncodeAttribute(o,f){this.encodeStyleAttribute[o]=f}initUniformsBuffer(){const o=this.getUniformsBufferInfo(this.getStyleAttribute()),f=this.getCommonUniformsInfo();o.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(qg(o.uniformsLength)).fill(0),isUBO:!0,label:"layerModelAttributeUnifoms"}),this.uniformBuffers.push(this.attributeUnifoms)),f.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(qg(f.uniformsLength)).fill(0),isUBO:!0,label:"layerModelCommonUnifoms"}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(o){let f=0;const m=[];return Object.values(o).forEach(T=>{Array.isArray(T)?(m.push(...T),f+=T.length):typeof T=="number"?(m.push(T),f+=1):typeof T=="boolean"&&(m.push(Number(T)),f+=1)}),{uniformsOption:o,uniformsLength:f,uniformsArray:m}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var o,f;const{uniformsArray:m}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:T}=this.getCommonUniformsInfo();(o=this.attributeUnifoms)===null||o===void 0||o.subData({offset:0,data:new Uint8Array(new Float32Array(m).buffer)}),(f=this.commonUnifoms)===null||f===void 0||f.subData({offset:0,data:new Uint8Array(new Float32Array(T).buffer)})}}function m_(a,o){const f=[];let m="";a.forEach(L=>{const F=L.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),V=ag+F;o[L]?m+=`#define USE_ATTRIBUTE_${F} 0.0 
`:f.push(`  ${ig[L]} u_${L};`),m+=`
#ifdef USE_ATTRIBUTE_${F}
layout(location = ${V}) in ${ig[L]} a_${L.charAt(0).toUpperCase()+L.slice(1)};
#endif 
`});const T=f.length?`
layout(std140) uniform AttributeUniforms {
  ${f.join(`
`)}
};
`:"";m+=T;let C="";return a.forEach(L=>{const F=L.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();C+=`
  #ifdef USE_ATTRIBUTE_${F}
    ${ig[L]} ${L} = a_${L.charAt(0).toUpperCase()+L.slice(1)};
  #else
    ${ig[L]} ${L} = u_${L};
  #endif
  `}),{"vs:#decl":m,"fs:#decl":T,"vs:#main-start":C}}const g_=100,eS=36,xx=40;function M1(a){return a/180*Math.acos(-1)}function a0(a){const o=M1(a[0])+Math.PI/2,f=M1(a[1]),m=g_+Math.random()*.4,T=m*Math.cos(f)*Math.cos(o),C=m*Math.cos(f)*Math.sin(o),L=m*Math.sin(f);return[C,L,T]}function tS(a,o){const f=mat4.create(),m=mat4.create(),T=vec3.fromValues(0,1,0),C=vec3.fromValues(0,0,0);o=o||{},a=typeof a!="undefined"?a:1;const F=2+(typeof o.segments!="undefined"?o.segments:32),V=2*F,ae=[],Ae=[],Ce=[],Ye=[],Bt=[],rn=[];for(let Sn=0;Sn<=F;Sn++){const lr=Sn/F,Br=lr*Math.PI;for(let Er=0;Er<=V;Er++){const ui=Er/V,ji=ui*Math.PI*2;mat4.identity(m),mat4.rotateZ(m,m,-Br),mat4.identity(f),mat4.rotateY(f,f,ji),vec3.transformMat4(C,T,m),vec3.transformMat4(C,C,f),vec3.scale(C,C,-a),Ce.push(C.slice()),Ye.push(...C.slice()),vec3.normalize(C,C),Bt.push(...C.slice()),rn.push([ui,1-lr]),Ye.push(ui,1-lr)}if(Sn>0){const Er=Ce.length;let ui=Er-2*(V+1);for(;ui+V+2<Er;ui++)ae.push([ui,ui+1,ui+V+1]),Ae.push(ui,ui+1,ui+V+1),ae.push([ui+V+1,ui+1,ui+V+2]),Ae.push(ui+V+1,ui+1,ui+V+2)}}return{cells:ae,positions:Ce,uvs:rn,positionsArr:Ye,indicesArr:Ae,normalArr:Bt}}var Ls=D(31437);const Ex=Ls.Ue(),nS=Ls.Ue(),Gd=Ls.Ue(),s0=Ls.Ue(),sg=Ls.Ue();function P1(a,o,f,m,T){Ls.IH(a,f,m),Ls.Fv(a,a),o=Ls.al(-a[1],a[0]);const C=Ls.al(-f[1],f[0]);return[T/Ls.AK(o,C),o]}function _v(a,o){return Ls.t8(a,-o[1],o[0])}function Qg(a,o,f){return Ls.lu(a,o,f),Ls.Fv(a,a),a}function Sx(a,o){return a[0]===o[0]&&a[1]===o[1]}function rS(a){const o=new Map;for(let f=0;f<a.length;f++){const m=a[0].toString()+"-"+a[1].toString();o.get(m)?(a.splice(f,1),f++):o.set(m,m)}return a}class wp{constructor(o={}){(0,en.Z)(this,"complex",void 0),(0,en.Z)(this,"join",void 0),(0,en.Z)(this,"cap",void 0),(0,en.Z)(this,"miterLimit",void 0),(0,en.Z)(this,"thickness",void 0),(0,en.Z)(this,"normal",void 0),(0,en.Z)(this,"lastFlip",-1),(0,en.Z)(this,"miter",Ls.al(0,0)),(0,en.Z)(this,"started",!1),(0,en.Z)(this,"dash",!1),(0,en.Z)(this,"totalDistance",0),(0,en.Z)(this,"currentIndex",0),this.join=o.join||"miter",this.cap=o.cap||"butt",this.miterLimit=o.miterLimit||10,this.thickness=o.thickness||1,this.dash=o.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let T=f.startIndex;for(let C=1;C<m;C++){const L=o[C-1],F=o[C],V=C<o.length-1?o[C+1]:null,ae=this.simpleSegment(f,T,L,F,V);T+=ae}if(this.dash)for(let C=0;C<f.positions.length/6;C++)f.positions[C*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}extrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let T=f.startIndex;for(let C=1;C<m;C++){const L=o[C-1],F=o[C],V=C<o.length-1?o[C+1]:null,ae=this.segment(f,T,L,F,V);T+=ae}if(this.dash)for(let C=0;C<f.positions.length/6;C++)f.positions[C*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}simpleSegment(o,f,m,T,C){let L=0;const F=o.indices,V=o.positions,ae=o.normals,Ae=(0,Ie.Z)([T[0],T[1]]),Ce=(0,Ie.Z)([m[0],m[1]]);Qg(Gd,Ae,Ce);let Ye=0;if(this.dash&&(Ye=this.lineSegmentDistance(Ae,Ce),this.totalDistance+=Ye),this.normal||(this.normal=Ls.Ue(),_v(this.normal,Gd)),this.started||(this.started=!0,this.extrusions(V,ae,m,this.normal,this.thickness,this.totalDistance-Ye)),F.push(f+0,f+1,f+2),!C)_v(this.normal,Gd),this.extrusions(V,ae,T,this.normal,this.thickness,this.totalDistance),F.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),L+=2;else{const Bt=(0,Ie.Z)([C[0],C[1]]);Sx(Ae,Bt)&&Ls.IH(Bt,Ae,Ls.Fv(Bt,Ls.$X(Bt,Ae,Ce))),Qg(s0,Bt,Ae);const[rn,Sn]=P1(sg,Ls.Ue(),Gd,s0,this.thickness);let lr=Ls.AK(sg,this.normal)<0?-1:1;this.extrusions(V,ae,T,Sn,rn,this.totalDistance),F.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),lr=-1,Ls.JG(this.normal,Sn),L+=2,this.lastFlip=lr}return L}segment(o,f,m,T,C){let L=0;const F=o.indices,V=o.positions,ae=o.normals,Ae=this.cap==="square",Ce=this.join==="bevel",Ye=(0,Ie.Z)([T[0],T[1]]),Bt=(0,Ie.Z)([m[0],m[1]]);Qg(Gd,Ye,Bt);let rn=0;if(this.dash&&(rn=this.lineSegmentDistance(Ye,Bt),this.totalDistance+=rn),this.normal||(this.normal=Ls.Ue(),_v(this.normal,Gd)),!this.started)if(this.started=!0,Ae){const Sn=Ls.Ue(),lr=Ls.Ue();Ls.IH(Sn,this.normal,Gd),Ls.IH(lr,this.normal,Gd),ae.push(lr[0],lr[1],0),ae.push(Sn[0],Sn[1],0),V.push(m[0],m[1],m[2]|0,this.totalDistance-rn,-this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),V.push(m[0],m[1],m[2]|0,this.totalDistance-rn,this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,ae,m,this.normal,this.thickness,this.totalDistance-rn);if(F.push(f+0,f+1,f+2),C){const Sn=(0,Ie.Z)([C[0],C[1]]);Sx(Ye,Sn)&&Ls.IH(Sn,Ye,Ls.Fv(Sn,Ls.$X(Sn,Ye,Bt))),Qg(s0,Sn,Ye);const[lr,Br]=P1(sg,Ls.Ue(),Gd,s0,this.thickness);let Er=Ls.AK(sg,this.normal)<0?-1:1,ui=Ce;!ui&&this.join==="miter"&&lr>this.miterLimit&&(ui=!0),ui?(ae.push(this.normal[0],this.normal[1],0),ae.push(Br[0],Br[1],0),V.push(T[0],T[1],T[2]|0,this.totalDistance,-this.thickness*Er,T[2]|0),this.complex.indexes.push(this.currentIndex),V.push(T[0],T[1],T[2]|0,this.totalDistance,this.thickness*Er,T[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,F.push(...this.lastFlip!==-Er?[f,f+2,f+3]:[f+2,f+1,f+3]),F.push(f+2,f+3,f+4),_v(Ex,s0),Ls.JG(this.normal,Ex),ae.push(this.normal[0],this.normal[1],0),V.push(T[0],T[1],T[2]|0,this.totalDistance,-this.thickness*Er,T[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,L+=3):(this.extrusions(V,ae,T,Br,lr,this.totalDistance),F.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),Er=-1,Ls.JG(this.normal,Br),L+=2),this.lastFlip=Er}else{if(_v(this.normal,Gd),Ae){const Sn=Ls.Ue(),lr=Ls.Ue();Ls.lu(lr,Gd,this.normal),Ls.IH(Sn,Gd,this.normal),ae.push(lr[0],lr[1],0),ae.push(Sn[0],Sn[1],0),V.push(T[0],T[1],T[2]|0,this.totalDistance,this.thickness,T[2]|0),this.complex.indexes.push(this.currentIndex),V.push(T[0],T[1],T[2]|0,this.totalDistance,this.thickness,T[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,ae,T,this.normal,this.thickness,this.totalDistance);F.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),L+=2}return L}extrusions(o,f,m,T,C,L){f.push(T[0],T[1],0),f.push(T[0],T[1],0),o.push(m[0],m[1],m[2]|0,L,-C,m[2]|0),this.complex.indexes.push(this.currentIndex),o.push(m[0],m[1],m[2]|0,L,C,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(o,f){const m=f[0]-o[0],T=f[1]-o[1];return Math.sqrt(m*m+T*T)}}let z0=function(a){return a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn",a}({}),bv=function(a){return a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon",a}({});function l0(a,o=0){const f=Math.PI*2/a,m=[];for(let C=0;C<a;C++)m.push(f*C+o*Math.PI/12);return m.map(C=>{const L=Math.sin(C+Math.PI/4),F=Math.cos(C+Math.PI/4);return[L,F,0]})}function ii(){return l0(30)}function lg(){return l0(4)}function xv(){return l0(3)}function iS(){return l0(6,1)}function ug(){return l0(5)}const y_={[bv.CIRCLE]:ii,[bv.HEXAGON]:iS,[bv.TRIANGLE]:xv,[bv.SQUARE]:lg,[bv.PENTAGON]:ug,[z0.CYLINDER]:ii,[z0.HEXAGONCOLUMN]:iS,[z0.TRIANGLECOLUMN]:xv,[z0.SQUARECOLUMN]:lg,[z0.PENTAGONCOLUMN]:ug};var Bl=D(77160);function bO(a){const o=a[0][0],f=a[0][a[0].length-1];o[0]===f[0]&&o[1]===f[1]&&(a[0]=a[0].slice(0,a[0].length-1));const m=a[0].length,T=earcut.flatten(a),{vertices:C,dimensions:L}=T,F=[],V=[];for(let Ae=0;Ae<C.length/L;Ae++)L===2?F.push(C[Ae*2],C[Ae*2+1],1):F.push(C[Ae*3],C[Ae*3+1],1);const ae=earcut(T.vertices,T.holes,T.dimensions);V.push(...ae);for(let Ae=0;Ae<m;Ae++){const Ce=T.vertices.slice(Ae*L,(Ae+1)*L);let Ye=T.vertices.slice((Ae+1)*L,(Ae+2)*L);Ye.length===0&&(Ye=T.vertices.slice(0,L));const Bt=F.length/3;F.push(Ce[0],Ce[1],1,Ye[0],Ye[1],1,Ce[0],Ce[1],0,Ye[0],Ye[1],0),V.push(...[0,2,1,2,3,1].map(rn=>rn+Bt))}return{positions:F,index:V}}function I5(a){const o=earcut.flatten(a),f=earcut(o.vertices,o.holes,o.dimensions);return{positions:o.vertices,index:f}}function oS(a,o=!1){const f=a[0][0],m=a[0][a[0].length-1];f[0]===m[0]&&f[1]===m[1]&&(a[0]=a[0].slice(0,a[0].length-1));const T=a[0].length,C=fh().flatten(a),{vertices:L,dimensions:F,holes:V}=C,ae=[],Ae=[],Ce=[];for(let Bt=0;Bt<L.length/F;Bt++)ae.push(L[Bt*F],L[Bt*F+1],1,-1,-1),Ce.push(0,0,1);const Ye=og(L,V,F,o);Ae.push(...Ye);for(let Bt=0;Bt<T;Bt++){const rn=C.vertices.slice(Bt*F,(Bt+1)*F);let Sn=C.vertices.slice((Bt+1)*F,(Bt+2)*F);Sn.length===0&&(Sn=C.vertices.slice(0,F));const lr=ae.length/5;ae.push(rn[0],rn[1],1,0,0,Sn[0],Sn[1],1,.1,0,rn[0],rn[1],0,0,.8,Sn[0],Sn[1],0,.1,.8);const Br=Jg([Sn[0],Sn[1],1],[rn[0],rn[1],0],[rn[0],rn[1],1],o);Ce.push(...Br,...Br,...Br,...Br),Ae.push(...[1,2,0,3,2,1].map(Er=>Er+lr))}return{positions:ae,index:Ae,normals:Ce}}function Jg(a,o,f,m=!1){const T=Bl.Ue(),C=Bl.Ue(),L=Bl.Ue();m&&(a=(0,Ie.vP)(a),o=(0,Ie.vP)(o),f=(0,Ie.vP)(f));const F=Bl.al(...a),V=Bl.al(...o),ae=Bl.al(...f);Bl.lu(T,ae,V),Bl.lu(C,F,V),Bl.kC(L,T,C);const Ae=Bl.Ue();return Bl.Fv(Ae,L),Ae}const Rf={};function il(a){const o=(0,Ie.SI)(a.coordinates);return{vertices:[...o,...o,...o,...o],indices:[0,1,2,2,3,0],size:o.length}}function Zd(a){const o=(0,Ie.SI)(a.coordinates),f=a0(o);return{vertices:[...f,...f,...f,...f],indices:[0,1,2,2,3,0],size:f.length}}function xO(a){const{shape:o}=a,{positions:f,index:m,normals:T}=_c(o,!1);return{vertices:f,indices:m,normals:T,size:5}}function L5(a){const o=(0,Ie.SI)(a.coordinates);return{vertices:[...o],indices:[0],size:o.length}}function Tx(a){const{coordinates:o}=a,f=new wp({dash:!0,join:"bevel"});let m=o;m[0]&&!Array.isArray(m[0][0])&&(m=[o]),m.forEach(C=>{f.extrude(C)});const T=f.complex;return{vertices:T.positions,indices:T.indices,normals:T.normals,indexes:T.indexes,size:6}}function D5(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function EO(a){const{coordinates:o}=a,f=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:m,totalDistance:T}=lS(o);return m.map(C=>{f.push(C[0],C[1],C[2],C[3],0,T)}),{vertices:f,indices:[],normals:[],size:6,count:m.length}}function aS(a){const{coordinates:o}=a,f=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],size:4,count:0};const{results:m}=U0(o);return m.map(T=>{f.push(T[0],T[1],T[2],T[3])}),{vertices:f,indices:[],size:4,count:m.length}}function sS(a,o){const f=o[0]-a[0],m=o[1]-a[1];return Math.sqrt(f*f+m*m)}function ey(a,o){return a.length<3&&a.push(0),o!==void 0&&a.push(o),a}function lS(a){let o=a;Array.isArray(o)&&Array.isArray(o[0])&&Array.isArray(o[0][0])&&(o=a.flat());let f=0;if(o.length<2)return{results:o,totalDistance:0};{const m=[],T=ey(o[0],f);m.push(T);for(let L=1;L<o.length-1;L++){const F=sS((0,Ie.Z)(o[L-1]),(0,Ie.Z)(o[L]));f+=F;const V=ey(o[L],f);m.push(V),m.push(V)}const C=sS((0,Ie.Z)(o[o.length-2]),(0,Ie.Z)(o[o.length-1]));return f+=C,m.push(ey(o[o.length-1],f)),{results:m,totalDistance:f}}}function U0(a){if(a.length<2)return{results:a};{const o=[],f=ey(a[0]);o.push(f);for(let m=1;m<a.length-1;m++){const T=ey(a[m]);o.push(T),o.push(T)}return o.push(ey(a[a.length-1])),{results:o}}}function Bh(a){const{coordinates:o}=a,f=fh().flatten(o),{vertices:m,dimensions:T,holes:C}=f;return{indices:og(m,C,T),vertices:m,size:T}}function __(a){const{indices:o,vertices:f,size:m}=Bh(a);return{indices:o,vertices:$a(f),size:m+4}}function $a(a){const o=[],{center:f,radius:m}=(0,Ie.Rx)(a);for(let T=0;T<a.length;T+=2){const C=a[T],L=a[T+1];o.push(C,L,0,...f,m)}return o}function Ax(a){const o=a.coordinates,{positions:f,index:m,normals:T}=oS(o,!0);return{vertices:f,indices:m,normals:T,size:5}}function N5(a){const{shape:o}=a,{positions:f,index:m}=$f(o);return{vertices:f,indices:m,size:3}}function I1(a){const o=a.coordinates;return{vertices:[...o[0],0,0,0,...o[1],0,1,0,...o[2],0,1,1,...o[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function Ox(a,o){const{segmentNumber:f=30}=o,m=a.coordinates,T=[],C=[];for(let L=0;L<f;L++)T.push(L,1,L,m[0][0],m[0][1],m[1][0],m[1][1],L,-1,L,m[0][0],m[0][1],m[1][0],m[1][1]),L!==f-1&&C.push(...[0,1,2,1,3,2].map(F=>L*2+F));return{vertices:T,indices:C,size:7}}function uS(a){const o=a.coordinates;o.length===2&&o.push(0);const f=j0(-1,1),m=j0(1,1),T=j0(-1,-1),C=j0(1,-1);return{vertices:[...o,...f,...o,...T,...o,...C,...o,...m],indices:[0,1,2,3,0,2],size:5}}function _c(a,o=!1){if(Rf&&Rf[a])return Rf[a];const f=y_[a]?y_[a]():y_.cylinder(),m=oS([f],o);return Rf[a]=m,m}function B5(a,o,f=3,m=!1){const T=new Float32Array(a.length/f*3);let C,L,F;const V=vec3.create(),ae=vec3.create(),Ae=vec3.create();for(let Ce=0,Ye=o.length;Ce<Ye;Ce+=3){C=o[Ce+0]*3,L=o[Ce+1]*3,F=o[Ce+2]*3;let Bt=[a[C],a[C+1]],rn=[a[L],a[L+1]],Sn=[a[F],a[F+1]];m&&(Bt=lngLatToMeters(Bt),rn=lngLatToMeters(rn),Sn=lngLatToMeters(Sn));const[lr,Br]=Bt,Er=vec3.fromValues(lr,Br,a[C+2]),[ui,ji]=rn,Po=vec3.fromValues(ui,ji,a[L+2]),[no,Gr]=Sn,ro=vec3.fromValues(no,Gr,a[F+2]);vec3.sub(V,ro,Po),vec3.sub(ae,Er,Po),vec3.cross(Ae,V,ae),T[C]+=V[0],T[C+1]+=V[1],T[C+2]+=V[2],T[L]+=V[0],T[L+1]+=V[1],T[L+2]+=V[2],T[F]+=V[0],T[F+1]+=V[1],T[F+2]+=V[2]}return um(T),T}function um(a){for(let o=0,f=a.length;o<f;o+=3){const m=vec3.fromValues(a[o],a[o+1],a[o+2]),T=vec3.create();vec3.normalize(T,m),a.set(T,o)}}function F5(a){const o=a[0][0],f=a[0][a[0].length-1];return o[0]===f[0]&&o[1]===f[1]}function $f(a){const o=["cylinder","triangleColumn","hexagonColumn","squareColumn"],f=geometryShape[a]?geometryShape[a]():geometryShape.circle();return o.indexOf(a)===-1?fillPolygon([f]):extrudePolygon([f])}function j0(a,o){const f=(a+1)/2,m=(o+1)/2;return[f,m]}function ru(){const a=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}function b_(){const a=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}const SO=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,Cl=`#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  if (u_lineDir == 1.0) {
    // \u6B63\u5411
    return mid;
  } else {
    // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
  //  return index / (segmentNumber - 1.);
}
vec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x, t), bezier3(y, t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return dir_screenspace.xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if (u_linearColor == 1.0) {
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);
  } else {
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source_world = a_Instance.rg; // \u8D77\u59CB\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9

  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  // \u8BA1\u7B97 dashArray \u548C distanceRatio \u8F93\u51FA\u5230\u7247\u5143
  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);
  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);

  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);
  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);

  vec2 offset = project_pixel(
    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)
  );

  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F
    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    arcDistrance = project_pixel(arcDistrance);

    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance / pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,x_={solid:0,dash:1};class ad extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0),(0,en.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Q.gl.NEAREST,min:Q.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:T="solid",dashArray:C=[10,5],forward:L=!0,lineTexture:F=!1,iconStep:V=100,segmentNumber:ae=30}=this.layer.getLayerConfig(),{animateOption:Ae}=this.layer.getLayerConfig();let Ce=C;T!=="dash"&&(Ce=[0,0]),Ce.length===2&&Ce.push(0,0);let Ye=0,Bt=[0,0,0,0],rn=[0,0,0,0];if(o&&f&&(Bt=(0,Ie.CI)(o),rn=(0,Ie.CI)(f),Ye=1),this.rendererService.getDirty()){var Sn;(Sn=this.texture)===null||Sn===void 0||Sn.bind()}const lr={u_animate:this.animateOption2Array(Ae),u_dash_array:Ce,u_sourceColor:Bt,u_targetColor:rn,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:ae,u_lineDir:L?1:-1,u_icon_step:V,u_line_texture:F?1:0,u_textureBlend:m==="normal"?0:1,u_blur:.9,u_line_type:x_[T||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Ye};return this.getUniformsBufferInfo(lr)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:SO,vert:Cl,type:""}}buildModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:T,type:C}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc2d"+C,vertexShader:T,fragmentShader:m,defines:o.getDefines(),inject:o.getInject(),triangulation:Ox,depth:{enable:!1},styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Q.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Q.GC.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m)=>[(0,Ie.Ks)(m[3]),(0,Ie.Ks)(m[4]),(0,Ie.Ks)(m[5]),(0,Ie.Ks)(m[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:T,y:C}=f[m]||{x:0,y:0};return[T,C]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Q.GC.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{thetaOffset:f=1}=o;return[f]}}})}}const cS=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec4 v_dash_array;
in float v_segmentIndex;
in vec2 v_iconMapUV;
in vec4 v_line_data;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,fS=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;

    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }


  setPickingColor(a_PickingColor);
}
`,hS={solid:0,dash:1};class Mf extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0),(0,en.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Q.gl.NEAREST,min:Q.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:T="solid",dashArray:C=[10,5],lineTexture:L=!1,iconStep:F=100,segmentNumber:V=30,globalArcHeight:ae=10}=this.layer.getLayerConfig(),{animateOption:Ae}=this.layer.getLayerConfig();C.length===2&&C.push(0,0);let Ce=0,Ye=[0,0,0,0],Bt=[0,0,0,0];if(o&&f&&(Ye=(0,Ie.CI)(o),Bt=(0,Ie.CI)(f),Ce=1),this.rendererService.getDirty()){var rn;(rn=this.texture)===null||rn===void 0||rn.bind()}const Sn={u_animate:this.animateOption2Array(Ae),u_dash_array:C,u_sourceColor:Ye,u_targetColor:Bt,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:g_,u_global_height:ae,segmentNumber:V,u_line_type:hS[T]||0,u_icon_step:F,u_line_texture:L?1:0,u_textureBlend:m==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Ce};return this.getUniformsBufferInfo(Sn)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:cS,vert:fS,type:""}}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:T,type:C}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc3d"+C,vertexShader:T,fragmentShader:m,defines:o.getDefines(),inject:o.getInject(),triangulation:Ox,styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Q.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Q.GC.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m)=>[(0,Ie.Ks)(m[3]),(0,Ie.Ks)(m[4]),(0,Ie.Ks)(m[5]),(0,Ie.Ks)(m[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:T,y:C}=f[m]||{x:0,y:0};return[T,C]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Q.GC.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{thetaOffset:f=1}=o;return[f]}}})}}const _o={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},Eu=1/2;function dS(a,o){const{width:f=2,height:m=1}=o;return{vertices:[0,Eu*a,1*a*f,-(m+Eu)*a,1*a*f,(m-Eu)*a,0,Eu*a,1*a*f,-(m+Eu)*a,1*a*f,(m-Eu)*a],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*a,-2*a,1,-2*a,1.5*a,1,1*a,1.5*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Cx(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*a*f,1*m,1*a*f,-1*m,0,0,1*a*f,1*m,1*a*f,-1*m],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*a,1,2,1*a,1,-2,1*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Rx(a,o){const{width:f=2,height:m=2}=o;return{vertices:[0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2,0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function TO(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m,0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function cm(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m,0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function wO(a,o){const{width:f=2,height:m=2}=o,T=ii(),C=fh().flatten([T]),L=fh()(C.vertices,C.holes,C.dimensions),F=T.map(V=>[V[0]*f*a,V[1]*m]).flat();return{vertices:[...F,...F],dimensions:2,indices:L.map(V=>V+T.length),outLineIndices:L,normals:[...T.map(V=>[V[1]*m,V[0]*f*a,1]).flat(),...new Array(T.length*3).fill(0)]}}function AO(a,o=0,f){const m=typeof f.source=="object"?f.source.type:f.source,T=typeof f.target=="object"?f.target.type:f.target,{width:C=m?_o[m]:0}=typeof f.source=="object"?f.source:{},{width:L=T?_o[T]:0}=typeof f.target=="object"?f.target:{};return{vertices:[0,Eu,1*C,...a,1,Eu,-1*L,...a,1,-Eu,-1*L,...a,0,-Eu,1*C,...a,0,Eu,1*C,...a,1,Eu,-1*L,...a,1,-Eu,-1*L,...a,0,-Eu,1*C,...a],outLineIndices:[0,1,2,0,2,3].map(F=>F+o),indices:[4,5,6,4,6,7].map(F=>F+o),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function pS(a,o){const f=typeof a=="object"?a.type:a,m=o==="source"?1:-1,T=typeof a=="object"?a:{};switch(f){case"circle":return wO(m,T);case"triangle":return Cx(m,T);case"diamond":return TO(m,T);case"rect":return Rx(m,T);case"classic":return cm(m,T);case"halfTriangle":return dS(m,T);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function OO(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function vS(a,o){return o?Mx(a,o):OO(a)}function Mx(a,o){const f=a.coordinates.flat(),{target:m="classic",source:T="circle"}=o,C=E_(pS(T,"source"),f,0,0),L=AO(f,C.vertices.length/7,o),F=E_(pS(m,"target"),f,1,C.vertices.length/7+L.vertices.length/7);return{vertices:[...C.vertices,...L.vertices,...F.vertices],indices:[...C.outLineIndices,...L.outLineIndices,...F.outLineIndices,...C.indices,...L.indices,...F.indices],normals:[...C.normals,...L.normals,...F.normals],size:7}}function E_(a,o,f=1,m=0){const T=[],{vertices:C,indices:L,dimensions:F,outLineIndices:V}=a;for(let ae=0;ae<C.length;ae+=F)T.push(f,C[ae+1],C[ae],...o);return(0,Or.Z)((0,Or.Z)({},a),{},{vertices:T,indices:L.map(ae=>ae+m),outLineIndices:V.map(ae=>ae+m)})}const CO=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,V0=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {
  vec2 data = project_pixel(offsets);

  return vec2(data.x, -data.y);
}

vec2 line_dir(vec2 target, vec2 source) {
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}


void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source_world = a_Instance.rg; // \u8D77\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target_world, source_world);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);

  vec2 position = mix(source_world, target_world, a_Position.x);
  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);

  float lengthCommon = length(
    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))
  );
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(
    offsetDistances,
    project_pixel(-lengthCommon * 0.2),
    project_pixel(lengthCommon * 0.2)
  );

  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),
    a_Position.x
  );

  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));

  float gapCommon = -1. * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));

  setPickingColor(a_PickingColor);
}
`;class L1 extends Ol{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,NORMAL:12})}getCommonUniformsInfo(){const{gapWidth:o=2,strokeWidth:f=1,strokeOpacity:m=1}=this.layer.getLayerConfig(),T={u_gap_width:o,u_stroke_width:f,u_stroke_opacity:m};return this.getUniformsBufferInfo(T)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"flow_line",vertexShader:V0,fragmentShader:CO,defines:o.getDefines(),inject:o.getInject(),triangulation:vS,styleOption:o.layer.getLayerConfig().symbol,primitive:Q.gl.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Q.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Q.GC.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m)=>[(0,Ie.Ks)(m[3]),(0,Ie.Ks)(m[4]),(0,Ie.Ks)(m[5]),(0,Ie.Ks)(m[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Q.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m,T,C)=>C}})}}const sd=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_dash_array;
in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_line_data;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,RO=`#define LineTypeSolid (0.0)
#define LineTypeDash (1.0)
#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps(float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.0);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}
float getAngularDist(vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {
  if (abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));

}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if (u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    total_Distance = total_Distance * 16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if (u_animate.x == Animate) {
    v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);

  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if (LineTexture == u_line_texture) {
    float d_arcDistrance = length(source - target);
    d_arcDistrance = project_pixel(d_arcDistrance);

    float d_pixelLen = project_pixel(u_icon_step) / 8.0;
    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,mS={solid:0,dash:1};class MO extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0),(0,en.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Q.gl.NEAREST,min:Q.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:T="solid",dashArray:C=[10,5],lineTexture:L=!1,iconStep:F=100,segmentNumber:V=30}=this.layer.getLayerConfig(),{animateOption:ae}=this.layer.getLayerConfig();if(C.length===2&&C.push(0,0),this.rendererService.getDirty()){var Ae;(Ae=this.texture)===null||Ae===void 0||Ae.bind()}let Ce=0,Ye=[0,0,0,0],Bt=[0,0,0,0];o&&f&&(Ye=(0,Ie.CI)(o),Bt=(0,Ie.CI)(f),Ce=1);let rn=this.layer.getLayerAnimateTime();isNaN(rn)&&(rn=0);const Sn={u_animate:this.animateOption2Array(ae),u_dash_array:C,u_sourceColor:Ye,u_targetColor:Bt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:V,u_line_type:mS[T]||0,u_icon_step:F,u_line_texture:L?1:0,u_textureBlend:m==="normal"?0:1,u_time:rn,u_linearColor:Ce};return this.getUniformsBufferInfo(Sn)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig();return[yield o.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:RO,fragmentShader:sd,triangulation:Ox,styleOption:{segmentNumber:f},defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Q.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Q.GC.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m)=>[(0,Ie.Ks)(m[3]),(0,Ie.Ks)(m[4]),(0,Ie.Ks)(m[5]),(0,Ie.Ks)(m[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:T,y:C}=f[m]||{x:0,y:0};return[T,C]}}})}}let S_=function(a){return a[a.solid=0]="solid",a[a.dash=1]="dash",a}({}),gS=function(a){return a.VERTICAL="vertical",a.HORIZONTAL="horizontal",a}({}),k5=function(a){return a.NORMAL="normal",a.REPLACE="replace",a}({}),Px=function(a){return a[a.pixel=0]="pixel",a[a.meter=1]="meter",a}({}),yS=function(a){return a.ALWAYS="always",a.DRAGEND="dragend",a}({});const PO=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,Ix=`#define Animate (0.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;

  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0; // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    h *= mapboxZoomScale;
    h += u_raisingHeight * mapboxZoomScale;
    if (u_heightfixed > 0.0) {
      lineHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(
    vec4(project_pos.xy + offset, lineHeight + h, 1.0)
  );

  setPickingColor(a_PickingColor);
}
`;class Fl extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"textureEventFlag",!1),(0,en.Z)(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,en.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Q.gl.NEAREST,min:Q.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,DISTANCE_INDEX:10,NORMAL:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:T="solid",dashArray:C=[10,5,0,0],lineTexture:L=!1,iconStep:F=100,vertexHeightScale:V=20,strokeWidth:ae=0,raisingHeight:Ae=0,heightfixed:Ce=!1,linearDir:Ye=gS.VERTICAL,blur:Bt=[1,1,1,0]}=this.layer.getLayerConfig();let rn=C;if(T!=="dash"&&(rn=[0,0,0,0]),rn.length===2&&rn.push(0,0),this.rendererService.getDirty()&&this.texture){var Sn;(Sn=this.texture)===null||Sn===void 0||Sn.bind()}const{animateOption:lr}=this.layer.getLayerConfig();let Br=0,Er=[0,0,0,0],ui=[0,0,0,0];o&&f&&(Er=(0,Ie.CI)(o),ui=(0,Ie.CI)(f),Br=1);const ji={u_animate:this.animateOption2Array(lr),u_dash_array:rn,u_blur:Bt,u_sourceColor:Er,u_targetColor:ui,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:F,u_heightfixed:Number(Ce),u_vertexScale:V,u_raisingHeight:Number(Ae),u_strokeWidth:ae,u_textureBlend:m===k5.NORMAL?0:1,u_line_texture:L?1:0,u_linearDir:Ye===gS.VERTICAL?1:0,u_linearColor:Br,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(ji)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.textureEventFlag||(o.textureEventFlag=!0,o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture)),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{depth:f=!1}=o.layer.getLayerConfig(),{frag:m,vert:T,type:C}=o.getShaders();return o.layer.triangulation=Tx,[yield o.layer.buildLayerModel({moduleName:"line"+C,vertexShader:T,fragmentShader:m,triangulation:Tx,defines:o.getDefines(),inject:o.getInject(),depth:{enable:f}})]})()}getShaders(){return{frag:PO,vert:Ix,type:""}}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Q.GC.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:this.attributeLocation.DISTANCE_INDEX,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m,T,C,L)=>L===void 0?[m[3],10,m[4]]:[m[3],L,m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:Q.GC.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m,T,C)=>[...C,m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:T,y:C}=f[m]||{x:0,y:0};return[T,C]}}})}}const bc=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,Ap=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color;
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  float lineHeight = a_SizeDistanceAndTotalDistance.y;
  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  gl_PointSize = 10.0;

}
`;class Lx extends Ol{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,lineType:m="solid",dashArray:T=[10,5,0,0],vertexHeightScale:C=20}=this.layer.getLayerConfig();let L=T;m!=="dash"&&(L=[0,0,0,0]),L.length===2&&L.push(0,0);let F=0,V=[0,0,0,0],ae=[0,0,0,0];o&&f&&(V=(0,Ie.CI)(o),ae=(0,Ie.CI)(f),F=1);const Ae={u_sourceColor:V,u_targetColor:ae,u_dash_array:L,u_vertexScale:C,u_linearColor:F};return this.getUniformsBufferInfo(Ae)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}getShaders(){return{frag:bc,vert:Ap,type:"lineSimpleNormal"}}buildModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const{frag:f,vert:m,type:T}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:T,vertexShader:m,fragmentShader:f,triangulation:EO,defines:o.getDefines(),inject:o.getInject(),primitive:Q.gl.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:Q.GC.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:(o,f,m)=>{const{size:T=1}=o,C=Array.isArray(T)?[T[0],T[1]]:[T,0];return[C[0],C[1],m[3],m[5]]}}})}}const Su=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};


in vec2 v_iconMapUV;
in vec4 v_color;
in float v_blur;
in vec4 v_dataset;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }


  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,IO=`#define Animate 0.0
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out vec4 v_dataset;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float a_Distance = a_Distance_Total_Miter.x;
  float a_Miter = a_Distance_Total_Miter.y;
  float a_Total_Distance = a_Distance_Total_Miter.z;

  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if (u_heightfixed < 1.0) {
    // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }

  if (u_animate.x == Animate || u_linearColor == 1.0) {
    d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0) / 2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance; // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float originSize = a_Size.x; // \u56FA\u5B9A\u9AD8\u5EA6
  if (u_heightfixed < 1.0) {
    originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    if (u_heightfixed > 0.0) {
      wallHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class LO extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0),(0,en.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Q.gl.NEAREST,min:Q.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:12,UV:13,DISTANCE_MITER_TOTAL:15})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",heightfixed:T=!1,lineTexture:C=!1,iconStep:L=100,iconStepCount:F=1}=this.layer.getLayerConfig(),{animateOption:V}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var ae;(ae=this.texture)===null||ae===void 0||ae.bind()}let Ae=0,Ce=[0,0,0,0],Ye=[0,0,0,0];o&&f&&(Ce=(0,Ie.CI)(o),Ye=(0,Ie.CI)(f),Ae=1);const Bt={u_animate:this.animateOption2Array(V),u_sourceColor:Ce,u_targetColor:Ye,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:L,u_heightfixed:Number(T),u_linearColor:Ae,u_line_texture:C?1:0,u_textureBlend:m==="normal"?0:1,u_iconStepCount:F,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(Bt)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ai.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"lineWall",vertexShader:IO,fragmentShader:Su,triangulation:Tx,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Q.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m,T,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"distanceAndTotalAndMiter",type:Q.GC.Attribute,descriptor:{name:"a_Distance_Total_Miter",shaderLocation:this.attributeLocation.DISTANCE_MITER_TOTAL,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m)=>[m[3],m[4],m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:T,y:C}=f[m]||{x:0,y:0};return[T,C]}}})}}var Dx={arc:ad,arc3d:Mf,greatcircle:MO,wall:LO,line:Fl,simple:Lx,flowline:L1,earthArc3d:Mf};class ty extends yv{constructor(...o){super(...o),(0,en.Z)(this,"type","LineLayer"),(0,en.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,en.Z)(this,"arrowInsertCount",0),(0,en.Z)(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new Dx[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[o]}getModelType(){var o;if(this.layerType)return this.layerType;const f=this.styleAttributeService.getLayerStyleAttribute("shape");return(f==null||(o=f.scale)===null||o===void 0?void 0:o.field)||"line"}processData(o){if(this.getModelType()!=="simple")return o;const f=[];return o.map(m=>{if(Array.isArray(m.coordinates)&&Array.isArray(m.coordinates[0])&&Array.isArray(m.coordinates[0][0])){const T=(0,Or.Z)({},m);m.coordinates.map(C=>{f.push((0,Or.Z)((0,Or.Z)({},T),{},{coordinates:C}))})}else f.push(m)}),f}}const bS=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,DO=`#define pi (3.1415926535)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if (x > 0.0 && z > 0.0) {
    return atan(x / z);
  } else if (x > 0.0 && z <= 0.0) {
    return atan(-z / x) + pi / 2.0;
  } else if (x <= 0.0 && z <= 0.0) {
    return pi + atan(x / z); //atan(x/z) +
  } else {
    return atan(z / -x) + pi * 3.0 / 2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y / r);
}

void main() {
  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if (u_heightfixed < 1.0) {
    // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
  } else {
    // \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);
    }
  }

  vec2 positions = a_Extrude.xy;
  vec2 positions64Low = a_Extrude.zw;
  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if (u_lightEnable > 0.0) {
    // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if (u_linearColor == 1.0) {
    // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a = v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

  if (u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;
  }

  gl_Position = project_common_position_to_clipspace(pos);

  setPickingColor(a_PickingColor);
}
`;class $l extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"raiseCount",0),(0,en.Z)(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},sourceColor:f,targetColor:m,pickLight:T=!1,heightfixed:C=!1,opacityLinear:L={enable:!1,dir:"up"},lightEnable:F=!0}=this.layer.getLayerConfig();let V=0,ae=[0,0,0,0],Ae=[0,0,0,0];if(f&&m&&(ae=(0,Ie.CI)(f),Ae=(0,Ie.CI)(m),V=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:Bt=.01}=o;this.raiseCount+=Bt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const Ce={u_pickLight:Number(T),u_heightfixed:Number(C),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:V,u_sourceColor:ae,u_targetColor:Ae,u_opacitylinear:Number(L.enable),u_opacitylinear_dir:L.dir==="up"?1:0,u_lightEnable:Number(F)};return this.getUniformsBufferInfo(Ce)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{depth:f=!0,animateOption:{repeat:m=1}}=o.layer.getLayerConfig();return o.raiseRepeat=m,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:DO,fragmentShader:bS,triangulation:xO,defines:o.getDefines(),inject:o.getInject(),cull:{enable:!0,face:Q.gl.FRONT},depth:{enable:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Q.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m,T,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Q.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:4,update:o=>{const f=(0,Ie.SI)(o.coordinates);return[f[0],f[1],(0,Ie.Ks)(f[0]),(0,Ie.Ks)(f[1])]}}})}}const Nx=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,ny=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Bx extends Ol{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:T=0,raisingHeight:C=0,heightfixed:L=!1,unit:F="pixel"}=this.layer.getLayerConfig();let V=this.getAnimateUniforms().u_time;isNaN(V)&&(V=-1);const ae={u_blur_height_fixed:[T,Number(C),Number(L)],u_stroke_width:f,u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_size_unit:Px[F],u_time:V,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(ae)}getAnimateUniforms(){const{animateOption:o={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),il)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{frag:f,vert:m,type:T}=o.getShaders();return o.layer.triangulation=il,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:T,vertexShader:m,fragmentShader:f,defines:o.getDefines(),inject:o.getInject(),triangulation:il,depth:{enable:!1}})]})()}getShaders(){return{frag:Nx,vert:ny,type:"pointFill"}}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){const o=this.layer.getLayerConfig().shape2d;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Q.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(f,m,T,C)=>{const L=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],F=C%4*3;return[L[F],L[F+1],L[F+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:f=>{const{size:m=5}=f;return Array.isArray(m)?[m[0]]:[m]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Q.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:f=>{const{shape:m=2}=f;return[o.indexOf(m)]}}})}}const Co=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,NO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if (u_heightfixed < 1.0) {
    // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class xS extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0),(0,en.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=f({data:this.iconService.getCanvas(),mag:Q.gl.LINEAR,min:Q.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10})}getUninforms(){if(this.rendererService.getDirty()){var o;(o=this.texture)===null||o===void 0||o.bind()}const f=this.getCommonUniformsInfo(),m=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)({},f.uniformsOption),m.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1}=this.layer.getLayerConfig(),m={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(o),u_heightfixed:Number(f),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointImage",vertexShader:NO,fragmentShader:Co,triangulation:L5,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1},primitive:Q.gl.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:T,y:C}=f[m]||{x:-64,y:-64};return[T,C]}}})}}const BO=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,FO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(project_pos);

  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;
}
`;function ES(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class SS extends Ol{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const o={u_size_scale:.5};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.layer.triangulation=ES,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:FO,fragmentShader:BO,triangulation:ES,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1},primitive:Q.gl.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var Fx=D(98333),T_=D(85975);class kO{constructor(o,f,m){(0,en.Z)(this,"boxCells",[]),(0,en.Z)(this,"xCellCount",void 0),(0,en.Z)(this,"yCellCount",void 0),(0,en.Z)(this,"boxKeys",void 0),(0,en.Z)(this,"bboxes",void 0),(0,en.Z)(this,"width",void 0),(0,en.Z)(this,"height",void 0),(0,en.Z)(this,"xScale",void 0),(0,en.Z)(this,"yScale",void 0),(0,en.Z)(this,"boxUid",void 0);const T=this.boxCells;this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(f/m);for(let C=0;C<this.xCellCount*this.yCellCount;C++)T.push([]);this.boxKeys=[],this.bboxes=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0}insert(o,f,m,T,C){this.forEachCell(f,m,T,C,this.insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(T),this.bboxes.push(C)}query(o,f,m,T,C){return this.queryHitTest(o,f,m,T,!1,C)}hitTest(o,f,m,T,C){return this.queryHitTest(o,f,m,T,!0,C)}insertBoxCell(o,f,m,T,C,L){this.boxCells[C].push(L)}queryHitTest(o,f,m,T,C,L){if(m<0||o>this.width||T<0||f>this.height)return C?!1:[];const F=[];if(o<=0&&f<=0&&this.width<=m&&this.height<=T){if(C)return!0;for(let ae=0;ae<this.boxKeys.length;ae++)F.push({key:this.boxKeys[ae],x1:this.bboxes[ae*4],y1:this.bboxes[ae*4+1],x2:this.bboxes[ae*4+2],y2:this.bboxes[ae*4+3]});return L?F.filter(L):F}const V={hitTest:C,seenUids:{box:{},circle:{}}};return this.forEachCell(o,f,m,T,this.queryCell,F,V,L),C?F.length>0:F}queryCell(o,f,m,T,C,L,F,V){const ae=F.seenUids,Ae=this.boxCells[C];if(Ae!==null){const Ce=this.bboxes;for(const Ye of Ae)if(!ae.box[Ye]){ae.box[Ye]=!0;const Bt=Ye*4;if(o<=Ce[Bt+2]&&f<=Ce[Bt+3]&&m>=Ce[Bt+0]&&T>=Ce[Bt+1]&&(!V||V(this.boxKeys[Ye]))){if(F.hitTest)return L.push(!0),!0;L.push({key:this.boxKeys[Ye],x1:Ce[Bt],y1:Ce[Bt+1],x2:Ce[Bt+2],y2:Ce[Bt+3]})}}}return!1}forEachCell(o,f,m,T,C,L,F,V){const ae=this.convertToXCellCoord(o),Ae=this.convertToYCellCoord(f),Ce=this.convertToXCellCoord(m),Ye=this.convertToYCellCoord(T);for(let Bt=ae;Bt<=Ce;Bt++)for(let rn=Ae;rn<=Ye;rn++){const Sn=this.xCellCount*rn+Bt;if(C.call(this,o,f,m,T,Sn,L,F,V))return}}convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}}var zO=kO;class UO{constructor(o,f){(0,en.Z)(this,"width",void 0),(0,en.Z)(this,"height",void 0),(0,en.Z)(this,"grid",void 0),(0,en.Z)(this,"viewportPadding",100),(0,en.Z)(this,"screenRightBoundary",void 0),(0,en.Z)(this,"screenBottomBoundary",void 0),(0,en.Z)(this,"gridRightBoundary",void 0),(0,en.Z)(this,"gridBottomBoundary",void 0),this.width=o,this.height=f,this.viewportPadding=Math.max(o,f),this.grid=new zO(o+this.viewportPadding,f+this.viewportPadding,25),this.screenRightBoundary=o+this.viewportPadding,this.screenBottomBoundary=f+this.viewportPadding,this.gridRightBoundary=o+2*this.viewportPadding,this.gridBottomBoundary=f+2*this.viewportPadding}placeCollisionBox(o){const f=o.x1+o.anchorPointX+this.viewportPadding,m=o.y1+o.anchorPointY+this.viewportPadding,T=o.x2+o.anchorPointX+this.viewportPadding,C=o.y2+o.anchorPointY+this.viewportPadding;return!this.isInsideGrid(f,m,T,C)||this.grid.hitTest(f,m,T,C)?{box:[]}:{box:[f,m,T,C]}}insertCollisionBox(o,f){const m={featureIndex:f};this.grid.insert(m,o[0],o[1],o[2],o[3])}project(o,f,m){const T=Fx.al(f,m,0,1),C=Fx.Ue(),L=T_.fromValues(...o);return Fx.fF(C,T,L),{x:(C[0]/C[3]+1)/2*this.width+this.viewportPadding,y:(-C[1]/C[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(o,f,m,T){return m>=0&&o<this.gridRightBoundary&&T>=0&&f<this.gridBottomBoundary}}function TS(a){let o=.5,f=.5;switch(a){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0;break;default:o=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;break;default:f=.5}return{horizontalAlign:o,verticalAlign:f}}function wS(a,o,f,m,T){if(!T)return;const C=a[m],L=C.glyph;if(L){const F=o[L].advance*C.scale,V=(a[m].x+F)*T;for(let ae=f;ae<=m;ae++)a[ae].x-=V}}function AS(a,o,f,m,T,C,L){const F=(o-f)*T,V=(-m*L+.5)*C;for(const ae of a)ae.x+=F,ae.y+=V}function jO(a,o,f,m,T,C,L){let V=0,ae=-8,Ae=0;const Ce=a.positionedGlyphs,Ye=C==="right"?1:C==="left"?0:.5,Bt=Ce.length;f.forEach(Br=>{if(Br.split("").forEach(Er=>{const ui=o[Er];ui&&(Ce.push({glyph:Er,x:V,y:ae+0,vertical:!1,scale:1,metrics:ui}),V+=ui.advance+L)}),Ce.length!==Bt){const Er=V-L;Ae=Math.max(Er,Ae),wS(Ce,o,Bt,Ce.length-1,Ye)}V=0,ae-=m+5});const{horizontalAlign:rn,verticalAlign:Sn}=TS(T);AS(Ce,Ye,rn,Sn,Ae,m,f.length);const lr=ae- -8;a.top+=-Sn*lr,a.bottom=a.top-lr,a.left+=-rn*Ae,a.right=a.left+Ae}function z5(a,o,f,m,T,C,L){let V=0,ae=-8,Ae=0;const Ce=a.positionedGlyphs,Ye=C==="right"?1:C==="left"?0:.5,Bt=Ce.length;f.forEach(Br=>{const Er=o[Br];if(Er&&(Ce.push({glyph:Br,x:Er.advance/2,y:ae+0,vertical:!1,scale:1,metrics:Er}),V+=Er.advance+L),Ce.length!==Bt){const ji=V-L;Ae=Math.max(ji,Ae),wS(Ce,o,Bt,Ce.length-1,Ye)}V=0,ae-=m+5});const{horizontalAlign:rn,verticalAlign:Sn}=TS(T);AS(Ce,Ye,rn,Sn,Ae,m,f.length);const lr=ae- -8;a.top+=-Sn*lr,a.bottom=a.top-lr,a.left+=-rn*Ae,a.right=a.left+Ae}function w_(a,o,f,m,T,C,L=[0,0],F){const V=a.split(`
`),ae=[],Ae={positionedGlyphs:ae,top:L[1],bottom:L[1],left:L[0],right:L[0],lineCount:V.length,text:a};return F?z5(Ae,o,V,f,m,T,C):jO(Ae,o,V,f,m,T,C),ae.length?Ae:!1}function D1(a,o=[0,0],f){const{positionedGlyphs:m=[]}=a,T=[];for(const C of m){const L=C.metrics,F=4,V=L.advance*C.scale/2,ae=f?[C.x+V,C.y]:[0,0],Ae=f?[0,0]:[C.x+V+o[0],C.y+o[1]],Ce=(0-F)*C.scale-V+Ae[0],Ye=(0-F)*C.scale+Ae[1],Bt=Ce+L.width*C.scale,rn=Ye+L.height*C.scale,Sn={x:Ce,y:Ye},lr={x:Bt,y:Ye},Br={x:Ce,y:rn},Er={x:Bt,y:rn};T.push({tl:Sn,tr:lr,bl:Br,br:Er,tex:L,glyphOffset:ae})}return T}const H0=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,OS=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);

  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:Ev}=Ie.lodashUtil;function kx(a){const o=this,f=a.id,m=[],T=[];if(!o.glyphInfoMap||!o.glyphInfoMap[f])return{vertices:[],indices:[],size:7};const C=o.glyphInfoMap[f].centroid,L=C.length===2?[C[0],C[1],0]:C;return o.glyphInfoMap[f].glyphQuads.forEach((F,V)=>{m.push(...L,F.tex.x,F.tex.y+F.tex.height,F.tl.x,F.tl.y,...L,F.tex.x+F.tex.width,F.tex.y+F.tex.height,F.tr.x,F.tr.y,...L,F.tex.x+F.tex.width,F.tex.y,F.br.x,F.br.y,...L,F.tex.x,F.tex.y,F.bl.x,F.bl.y),T.push(0+V*4,1+V*4,2+V*4,2+V*4,3+V*4,0+V*4)}),{vertices:m,indices:T,size:7}}class CS extends Ol{constructor(...o){var f;super(...o),f=this,(0,en.Z)(this,"glyphInfo",void 0),(0,en.Z)(this,"glyphInfoMap",{}),(0,en.Z)(this,"rawEncodeData",void 0),(0,en.Z)(this,"texture",void 0),(0,en.Z)(this,"currentZoom",-1),(0,en.Z)(this,"extent",void 0),(0,en.Z)(this,"textureHeight",0),(0,en.Z)(this,"textCount",0),(0,en.Z)(this,"preTextStyle",{}),(0,en.Z)(this,"mapping",(0,Ai.Z)(function*(){f.initGlyph(),f.updateTexture(),yield f.reBuildModel()}))}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,TEXT_OFFSETS:10,UV:11})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)((0,Or.Z)({},o.uniformsOption),f.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:o="#fff",strokeWidth:f=0,halo:m=.5,gamma:T=2,raisingHeight:C=0}=this.layer.getLayerConfig(),L=this.getFontServiceMapping(),F=this.getFontServiceCanvas();L&&Object.keys(L).length!==this.textCount&&F&&(this.updateTexture(),this.textCount=Object.keys(L).length),this.preTextStyle=this.getTextStyle();const V={u_stroke_color:(0,Ie.CI)(o),u_sdf_map_size:[(F==null?void 0:F.width)||1,(F==null?void 0:F.height)||1],u_raisingHeight:Number(C),u_stroke_width:f,u_gamma_scale:T,u_halo_blur:m};return this.getUniformsBufferInfo(V)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.bindEvent(),o.extent=o.textExtent(),o.rawEncodeData=o.layer.getEncodedData(),o.preTextStyle=o.getTextStyle(),o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{textAllowOverlap:f=!1}=o.layer.getLayerConfig();return o.initGlyph(),o.updateTexture(),f||o.filterGlyphs(),[yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:OS,fragmentShader:H0,defines:o.getDefines(),inject:o.getInject(),triangulation:kx.bind(o),depth:{enable:!1}})]})()}needUpdate(){var o=this;return(0,Ai.Z)(function*(){const{textAllowOverlap:f=!1,textAnchor:m="center",textOffset:T,padding:C,fontFamily:L,fontWeight:F}=o.getTextStyle();if(!Ev(C,o.preTextStyle.padding)||!Ev(T,o.preTextStyle.textOffset)||!Ev(m,o.preTextStyle.textAnchor)||!Ev(L,o.preTextStyle.fontFamily)||!Ev(F,o.preTextStyle.fontWeight))return yield o.mapping(),!0;if(f)return!1;const V=o.mapService.getZoom(),ae=o.mapService.getBounds(),Ae=(0,Ie.oO)(o.extent,ae);return Math.abs(o.currentZoom-V)>.5||!Ae||f!==o.preTextStyle.textAllowOverlap?(yield o.reBuildModel(),!0):!1})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Q.GC.Attribute,descriptor:{shaderLocation:this.attributeLocation.TEXT_OFFSETS,name:"a_textOffsets",buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:(o,f,m)=>[m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Q.GC.Attribute,descriptor:{name:"a_tex",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=12}=o;return Array.isArray(f)?[f[0]]:[f]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const o=this.mapService.getBounds();return(0,Ie.yA)(o,.5)}initTextFont(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,T=[];m.forEach(C=>{let{shape:L=""}=C;L=L.toString();for(const F of L)T.indexOf(F)===-1&&T.push(F)}),this.fontService.setFontOptions({characterSet:T,fontWeight:o,fontFamily:f,iconfont:!1})}initIconFontTex(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,T=[];m.forEach(C=>{let{shape:L=""}=C;L=`${L}`,T.indexOf(L)===-1&&T.push(L)}),this.fontService.setFontOptions({characterSet:T,fontWeight:o,fontFamily:f,iconfont:!0})}getTextStyle(){const{fontWeight:o="400",fontFamily:f="sans-serif",textAllowOverlap:m=!1,padding:T=[0,0],textAnchor:C="center",textOffset:L=[0,0],opacity:F=1,strokeOpacity:V=1,strokeWidth:ae=0,stroke:Ae="#000"}=this.layer.getLayerConfig();return{fontWeight:o,fontFamily:f,textAllowOverlap:m,padding:T,textAnchor:C,textOffset:L,opacity:F,strokeOpacity:V,strokeWidth:ae,stroke:Ae}}generateGlyphLayout(o){const f=this.getFontServiceMapping(),{spacing:m=2,textAnchor:T="center",textOffset:C}=this.layer.getLayerConfig(),L=this.rawEncodeData;this.glyphInfo=L.map(F=>{const{shape:V="",id:ae,size:Ae=1}=F,Ce=F.textOffset?F.textOffset:C||[0,0],Ye=F.textAnchor?F.textAnchor:T||"center",Bt=w_(V.toString(),f,Ae,Ye,"left",m,Ce,o),rn=D1(Bt,Ce,!1);return F.shaping=Bt,F.glyphQuads=rn,F.centroid=(0,Ie.SI)(F.coordinates),this.glyphInfoMap[ae]={shaping:Bt,glyphQuads:rn,centroid:(0,Ie.SI)(F.coordinates)},F})}getFontServiceMapping(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${f}_${o}`)}getFontServiceCanvas(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${f}_${o}`)}filterGlyphs(){const{padding:o=[0,0],textAllowOverlap:f=!1}=this.layer.getLayerConfig();if(f)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:m,height:T}=this.rendererService.getViewportSize(),C=new UO(m,T);this.glyphInfo.filter(F=>{const{shaping:V,id:ae=0}=F,Ae=F.centroid,Ye=F.size/16,Bt=this.mapService.lngLatToContainer(Ae),{box:rn}=C.placeCollisionBox({x1:V.left*Ye-o[0],x2:V.right*Ye+o[0],y1:V.top*Ye-o[1],y2:V.bottom*Ye+o[1],anchorPointX:Bt.x,anchorPointY:Bt.y});return rn&&rn.length?(C.insertCollisionBox(rn,ae),!0):!1}).forEach(F=>{this.glyphInfoMap[F.id]=F})}initGlyph(){const{iconfont:o=!1}=this.layer.getLayerConfig();o?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(o)}updateTexture(){const{createTexture2D:o}=this.rendererService,f=this.getFontServiceCanvas();this.textureHeight=f.height,this.texture&&this.texture.destroy(),this.texture=o({data:f,mag:Q.gl.LINEAR,min:Q.gl.LINEAR,width:f.width,height:f.height}),this.textures=[this.texture]}reBuildModel(){var o=this;return(0,Ai.Z)(function*(){o.filterGlyphs();const f=yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:OS,fragmentShader:H0,triangulation:kx.bind(o),defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1}});o.layer.models=[f]})()}}function VO(a){return cg.apply(this,arguments)}function cg(){return cg=(0,Ai.Z)(function*(a){if(window.createImageBitmap){const o=yield fetch(a);return yield createImageBitmap(yield o.blob())}else{const o=new window.Image;return new Promise(f=>{o.onload=()=>f(o),o.src=a,o.crossOrigin="Anonymous"})}}),cg.apply(this,arguments)}const ry=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,zx=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,RS=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_texture_data = vec2(a_Position.z, lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,HO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float isSide = a_Position.z;
  float topU = a_uvs[0];
  float topV = 1.0 - a_uvs[1];
  float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

 gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,ld=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,MS=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class PS extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,UV:11})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:o,heightfixed:f=!1,raisingHeight:m=0,topsurface:T=!0,sidesurface:C=!0,sourceColor:L,targetColor:F}=this.layer.getLayerConfig();let V=0,ae=[1,1,1,1],Ae=[1,1,1,1];L&&F&&(ae=(0,Ie.CI)(L),Ae=(0,Ie.CI)(F),V=1);const Ce={u_sourceColor:ae,u_targetColor:Ae,u_linearColor:V,u_topsurface:Number(T),u_sidesurface:Number(C),u_heightfixed:Number(f),u_raisingHeight:Number(m)};return o&&this.texture&&(Ce.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(Ce)}initModels(){var o=this;return(0,Ai.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{frag:f,vert:m,type:T}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:T,vertexShader:m,fragmentShader:f,depth:{enable:!0},defines:o.getDefines(),inject:o.getInject(),triangulation:Ax})]})()}getShaders(){const{pickLight:o,mapTexture:f}=this.layer.getLayerConfig();return f?{frag:ld,vert:MS,type:"polygonExtrudeTexture"}:o?{frag:zx,vert:RS,type:"polygonExtrudePickLight"}:{frag:ry,vert:HO,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.textures=[]}registerBuiltinAttributes(){const o=this.layer.getSource().extent,f=o[2]-o[0],m=o[3]-o[1];this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Q.GC.Attribute,descriptor:{name:"a_uvs",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(T,C,L)=>{const F=L[0],V=L[1];return[(F-o[0])/f,(V-o[1])/m,L[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Q.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(T,C,L,F,V)=>V}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:T=>{const{size:C=10}=T;return Array.isArray(C)?[C[0]]:[C]}}})}loadTexture(){var o=this;return(0,Ai.Z)(function*(){const{mapTexture:f}=o.layer.getLayerConfig(),{createTexture2D:m}=o.rendererService;if(o.texture=m({height:1,width:1}),f){const T=yield VO(f);o.texture=m({data:T,width:T.width,height:T.height,wrapS:Q.gl.CLAMP_TO_EDGE,wrapT:Q.gl.CLAMP_TO_EDGE,min:Q.gl.LINEAR,mag:Q.gl.LINEAR})}})()}}const Xd=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,WO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class GO extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,EXTRUSION_BASE:11})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const o={};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{frag:f,vert:m,type:T}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:T,vertexShader:m,fragmentShader:f,defines:o.getDefines(),inject:o.getInject(),triangulation:Ax,depth:{enable:!0}})]})()}getShaders(){return{frag:Xd,vert:WO,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Q.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m,T,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=10}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrusionBase",type:Q.GC.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:this.attributeLocation.EXTRUSION_BASE,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{extrusionBase:f=0}=o;return[f]}}})}}const IS=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,LS=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,iy=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}
`,fg=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  project_pos.z += u_raisingHeight;

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class Ux extends Ol{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,LINEAR:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,opacityLinear:f={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),m={u_raisingHeight:Number(o),u_opacitylinear:Number(f.enable),u_dir:f.dir==="in"?1:0};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{frag:f,vert:m,triangulation:T,type:C}=o.getModelParams();return o.initUniformsBuffer(),o.layer.triangulation=T,[yield o.layer.buildLayerModel({moduleName:C,vertexShader:m,fragmentShader:f,defines:o.getDefines(),inject:o.getInject(),triangulation:T,primitive:Q.gl.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute();const{opacityLinear:o={enable:!1,dir:"in"}}=this.layer.getLayerConfig();o.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Q.GC.Attribute,descriptor:{name:"a_linear",shaderLocation:this.attributeLocation.LINEAR,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(f,m,T)=>[T[3],T[4],T[5]]}})}getModelParams(){const{opacityLinear:o={enable:!1}}=this.layer.getLayerConfig();return o.enable?{frag:LS,vert:iy,type:"polygonLinear",triangulation:__}:{frag:IS,vert:fg,type:"polygonFill",triangulation:Bh}}}const jx=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,DS=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class Vx extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture1",void 0),(0,en.Z)(this,"texture2",void 0),(0,en.Z)(this,"texture3",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{watercolor:o="#6D99A8",watercolor2:f="#0F121C"}=this.layer.getLayerConfig(),m={u_watercolor:(0,Ie.CI)(o),u_watercolor2:(0,Ie.CI)(f),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(m)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:DS,fragmentShader:jx,defines:o.getDefines(),inject:o.getInject(),triangulation:Bh,primitive:Q.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o,f,m;(o=this.texture1)===null||o===void 0||o.destroy(),(f=this.texture2)===null||f===void 0||f.destroy(),(m=this.texture3)===null||m===void 0||m.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,T,C]=o,L=T-f,F=C-m;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Q.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:(V,ae,Ae)=>{const[Ce,Ye]=Ae;return[(Ce-f)/L,(Ye-m)/F]}}})}loadTexture(){const{createTexture2D:o}=this.rendererService,f={height:0,width:0};this.texture1=o(f),this.texture2=o(f),this.texture3=o(f),m(C=>{this.texture1=T(C[0]),this.texture2=T(C[1]),this.texture3=T(C[2]),this.layerService.reRender()});function m(C){let L=0;const F=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(ae=>{const Ae=new Image;Ae.crossOrigin="",Ae.src=ae,F.push(Ae),Ae.onload=()=>{L++,L===3&&C(F)}})}function T(C){return o({data:C,width:C.width,height:C.height,wrapS:Q.gl.MIRRORED_REPEAT,wrapT:Q.gl.MIRRORED_REPEAT,min:Q.gl.LINEAR,mag:Q.gl.LINEAR})}}}const ZO=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,XO=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class $O extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{speed:o=.5}=this.layer.getLayerConfig(),f={u_speed:o,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(f)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:XO,fragmentShader:ZO,triangulation:Bh,defines:o.getDefines(),inject:o.getInject(),primitive:Q.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,T,C]=o,L=T-f,F=C-m;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Q.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:(V,ae,Ae)=>{const[Ce,Ye]=Ae;return[(Ce-f)/L,(Ye-m)/F]}}})}loadTexture(){const{waterTexture:o}=this.layer.getLayerConfig(),{createTexture2D:f}=this.rendererService;this.texture=f({height:1,width:1});const m=new Image;m.crossOrigin="",o?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),m.src=o):m.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",m.onload=()=>{this.texture=f({data:m,width:m.width,height:m.height,wrapS:Q.gl.MIRRORED_REPEAT,wrapT:Q.gl.MIRRORED_REPEAT,min:Q.gl.LINEAR,mag:Q.gl.LINEAR}),this.layerService.reRender()}}}var N1={fill:Ux,line:Fl,extrude:PS,text:CS,point_fill:Bx,point_image:xS,point_normal:SS,point_extrude:$l,water:$O,ocean:Vx,extrusion:GO};class Hx extends yv{constructor(...o){super(...o),(0,en.Z)(this,"type","PolygonLayer"),(0,en.Z)(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new N1[f](o),yield o.initLayerModels()})()}getModelType(){var o;const f=this.styleAttributeService.getLayerStyleAttribute("shape"),m=f==null||(o=f.scale)===null||o===void 0?void 0:o.field;return m==="fill"||!m?"fill":m==="extrude"?"extrude":m==="extrusion"?"extrusion":m==="water"?"water":m==="ocean"?"ocean":m==="line"?"line":this.getPointModelType()}getPointModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m}=this.getLayerConfig(),T=this.iconService.getIconMap(),C=o.find(L=>L.hasOwnProperty("shape"));if(C){const L=C.shape;return L==="dot"?"point_normal":(f==null?void 0:f.indexOf(L))!==-1?"point_fill":(m==null?void 0:m.indexOf(L))!==-1?"point_extrude":T.hasOwnProperty(L)?"point_image":"text"}else return"fill"}}class B1{constructor({rendererService:o,layerService:f,parent:m}){(0,en.Z)(this,"tileResource",new Map),(0,en.Z)(this,"rendererService",void 0),(0,en.Z)(this,"layerService",void 0),(0,en.Z)(this,"parent",void 0),(0,en.Z)(this,"layerTiles",[]),this.rendererService=o,this.layerService=f,this.parent=m}get tiles(){return this.layerTiles}hasTile(o){return this.layerTiles.some(f=>f.key===o)}addTile(o){this.layerTiles.push(o)}getTile(o){return this.layerTiles.find(f=>f.key===o)}getVisibleTileBylngLat(o){return this.layerTiles.find(f=>f.isLoaded&&f.visible&&f.lnglatInBounds(o))}removeTile(o){const f=this.layerTiles.findIndex(T=>T.key===o),m=this.layerTiles.splice(f,1);m[0]&&m[0].destroy()}updateTileVisible(o){const f=this.getTile(o.key);if(o.isVisible)if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(m)}else f==null||f.updateVisible(!0);else if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(!m)}else f==null||f.updateVisible(!1)}isParentLoaded(o){const f=o.parent;if(!f)return!0;const m=this.getTile(f==null?void 0:f.key);return!!(m!=null&&m.isLoaded)}isChildrenLoaded(o){const f=o==null?void 0:o.children;return f.length===0?!0:f.every(m=>{const T=this.getTile(m==null?void 0:m.key);return T?(T==null?void 0:T.isLoaded)===!0:!0})}render(){var o=this;return(0,Ai.Z)(function*(){const m=o.getRenderLayers().map(function(){var T=(0,Ai.Z)(function*(C){yield o.layerService.renderTileLayer(C)});return function(C){return T.apply(this,arguments)}}());yield Promise.all(m)})()}getRenderLayers(){const o=this.layerTiles.filter(m=>m.visible&&m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getLayers(){const o=this.layerTiles.filter(m=>m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(o=>o.destroy()),this.tileResource.clear()}}var NS=D(32676);function BS(a,o,f){f===void 0&&(f={});var m=Xe(a),T=Xe(o),C=NS.union(m.coordinates,T.coordinates);return C.length===0?null:C.length===1?(0,ut.yu)(C[0],f.properties):(0,ut.tw)(C,f.properties)}var FS=BS;class YO{getCombineFeature(o){let f=null;const m=o[0];return o.map(T=>{const C=ut.yu(T.coordinates);f===null?f=C:f=FS(f,C)}),m&&(f.properties=(0,Or.Z)({},m)),f}}const oy="select",fm="active";class Wx{constructor({layerService:o,tileLayerService:f,parent:m}){(0,en.Z)(this,"layerService",void 0),(0,en.Z)(this,"tileLayerService",void 0),(0,en.Z)(this,"tileSourceService",void 0),(0,en.Z)(this,"parent",void 0),(0,en.Z)(this,"tilePickID",new Map),this.layerService=o,this.tileLayerService=f,this.parent=m,this.tileSourceService=new YO}pickRender(o){const f=this.tileLayerService.getVisibleTileBylngLat(o.lngLat);if(f){const m=f.getMainLayer();m==null||m.layerPickService.pickRender(o)}}pick(o,f){var m=this;return(0,Ai.Z)(function*(){const C=m.parent.getContainer().pickingService;if(o.type==="RasterLayer"){const L=m.tileLayerService.getVisibleTileBylngLat(f.lngLat);if(L&&L.getMainLayer()!==void 0){const F=L.getMainLayer();return F.layerPickService.pickRasterLayer(F,f,m.parent)}return!1}return m.pickRender(f),C.pickFromPickingFBO(o,f)})()}selectFeature(o){const[f,m,T]=o,C=this.color2PickId(f,m,T);this.tilePickID.set(oy,C),this.updateHighLight(f,m,T,oy)}highlightPickedFeature(o){const[f,m,T]=o,C=this.color2PickId(f,m,T);this.tilePickID.set(fm,C),this.updateHighLight(f,m,T,fm)}updateHighLight(o,f,m,T){this.tileLayerService.tiles.map(C=>{const L=C.getMainLayer();switch(T){case oy:L==null||L.hooks.beforeSelect.call([o,f,m]);break;case fm:L==null||L.hooks.beforeHighlight.call([o,f,m]);break}})}setPickState(){const o=this.tilePickID.get(oy),f=this.tilePickID.get(fm);if(o){const[m,T,C]=this.pickId2Color(o);this.updateHighLight(m,T,C,oy);return}if(f){const[m,T,C]=this.pickId2Color(f);this.updateHighLight(m,T,C,fm);return}}color2PickId(o,f,m){return(0,Ie.W0)(new Uint8Array([o,f,m]))}pickId2Color(o){return(0,Ie.Z6)(o)}getFeatureById(o){const f=this.tileLayerService.getTiles().filter(T=>T.visible),m=[];return f.forEach(T=>{m.push(...T.getFeatureById(o))}),m}pickRasterLayer(){return!1}}const kS=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,KO=`
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0 / a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  vec2 offset = project_pixel(u_offsets);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function zS(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class qO extends Ol{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:o,strokeOpacity:f=1,strokeWidth:m=0,stroke:T="#fff"}=this.layer.getLayerConfig(),C={u_stroke_color:(0,Ie.CI)(T),u_additive:o==="additive"?1:0,u_stroke_opacity:f,u_stroke_width:m};return this.getUniformsBufferInfo(C)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.layer.triangulation=zS,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:KO,fragmentShader:kS,defines:o.getDefines(),inject:o.getInject(),triangulation:zS,depth:{enable:!1},primitive:Q.gl.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const US=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,QO=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) +
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    //
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;


  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,
    0,xcos,-xsin,0,
    0,xsin,xcos,0,
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,
    0,1,0,0,
    ysin,0,ycos,0,
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);


  setPickingColor(a_PickingColor);
}
`,{isNumber:JO}=Ie.lodashUtil;class jS extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"raiseCount",0),(0,en.Z)(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},opacity:f=1,sourceColor:m,targetColor:T,pickLight:C=!1,heightfixed:L=!0,opacityLinear:F={enable:!1,dir:"up"},lightEnable:V=!0}=this.layer.getLayerConfig();let ae=0,Ae=[0,0,0,0],Ce=[0,0,0,0];if(m&&T&&(Ae=(0,Ie.CI)(m),Ce=(0,Ie.CI)(T),ae=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:rn=.01}=o;this.raiseCount+=rn,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const Ye={u_sourceColor:Ae,u_targetColor:Ce,u_linearColor:ae,u_pickLight:Number(C),u_heightfixed:Number(L),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:JO(f)?f:1,u_opacitylinear:Number(F.enable),u_opacitylinear_dir:F.dir==="up"?1:0,u_lightEnable:Number(V)};return this.getUniformsBufferInfo(Ye)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){const{animateOption:{repeat:f=1}}=o.layer.getLayerConfig();return o.raiseRepeat=f,[yield o.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:QO,fragmentShader:US,triangulation:xO,depth:{enable:!0},defines:o.getDefines(),inject:o.getInject(),cull:{enable:!0,face:Q.gl.FRONT},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Q.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:Q.gl.STATIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m,T,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Q.GC.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:o=>{const f=(0,Ie.SI)(o.coordinates);return a0([f[0],f[1]])}}})}}const j5=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,VS=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}
`;class eC extends Ol{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:T=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const C={u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_stroke_width:f,u_blur:T};return this.getUniformsBufferInfo(C)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.layer.triangulation=Zd,[yield o.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:VS,fragmentShader:j5,triangulation:Zd,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!0},blend:o.getBlend()})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Q.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m,T)=>{const[C,L,F]=m,V=Bl.al(0,0,1),ae=Bl.al(C,0,F),Ae=C>=0?Bl.EU(V,ae):Math.PI*2-Bl.EU(V,ae),Ce=Math.PI*2-Math.asin(L/100),Ye=T_.create();T_.rotateY(Ye,Ye,Ae),T_.rotateX(Ye,Ye,Ce);const Bt=Bl.al(1,1,0);Bl.fF(Bt,Bt,Ye),Bl.Fv(Bt,Bt);const rn=Bl.al(-1,1,0);Bl.fF(rn,rn,Ye),Bl.Fv(rn,rn);const Sn=Bl.al(-1,-1,0);Bl.fF(Sn,Sn,Ye),Bl.Fv(Sn,Sn);const lr=Bl.al(1,-1,0);Bl.fF(lr,lr,Ye),Bl.Fv(lr,lr);const Br=[...Bt,...rn,...Sn,...lr],Er=T%4*3;return[Br[Er],Br[Er+1],Br[Er+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Q.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{shape:f=2}=o;return[this.layer.getLayerConfig().shape2d.indexOf(f)]}}})}}const Gx=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,tC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed;
  float u_raisingHeight;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0) / 2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if (u_size_unit == 1.0) {
    newSize = newSize * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = extrude.xy * newSize + offsets;

  offset = rotate_matrix(offset, rotation);

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class HS extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"meter2coord",1),(0,en.Z)(this,"texture",void 0),(0,en.Z)(this,"isMeter",!1),(0,en.Z)(this,"radian",0),(0,en.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=f({data:this.iconService.getCanvas(),mag:Q.gl.LINEAR,min:Q.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,UV:11})}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1,unit:m="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var T;(T=this.texture)===null||T===void 0||T.bind()}const C={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(f),u_raisingHeight:Number(o),u_size_unit:Px[m]};return this.getUniformsBufferInfo(C)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),il)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:tC,fragmentShader:Gx,triangulation:il,depth:{enable:!1},defines:o.getDefines(),inject:o.getInject(),cull:{enable:!0,face:Q.gl.FRONT}})]})()}clearModels(){var o;this.iconService.off("imageUpdate",this.updateTexture),(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:T,y:C}=f[m]||{x:-64,y:-64};return[T,C]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Q.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m,T)=>{const C=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],L=T%4*3;return[C[L],C[L+1],C[L+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const nC=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,sc=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2(
    cos(time), sin(time),
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));

  offset = project_pixel(offset);

  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class ud extends Ol{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10})}getCommonUniformsInfo(){const{blend:o,speed:f=1,unit:m="pixel"}=this.layer.getLayerConfig(),T={u_additive:o==="additive"?1:0,u_size_unit:Px[m],u_speed:f,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(T)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),il)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:sc,fragmentShader:nC,triangulation:il,defines:o.getDefines(),inject:o.getInject(),depth:{enable:!1}})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Q.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:3,update:(o,f,m,T)=>{const C=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],L=T%4*3;return[C[L],C[L+1],C[L+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Q.GC.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var F1={fillImage:HS,fill:Bx,radar:ud,image:xS,normal:SS,simplePoint:qO,extrude:$l,text:CS,earthFill:eC,earthExtrude:jS};class A_ extends yv{constructor(...o){super(...o),(0,en.Z)(this,"type","PointLayer"),(0,en.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,en.Z)(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,en.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel&&o.layerModel.clearModels(),o.layerModel=new F1[f](o),yield o.initLayerModels()})()}rebuildModels(){var o=this;return(0,Ai.Z)(function*(){yield o.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:o,values:f}=this.shapeOption,{shape2d:m}=this.getLayerConfig(),T=this.iconService.getIconMap();if(o&&(m==null?void 0:m.indexOf(o))!==-1)return"fill";if(f==="text")return"text";if(f&&f instanceof Array){for(const C of f)if(typeof C=="string"&&T.hasOwnProperty(C))return"image"}}return"normal"}getDefaultConfig(){const o=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[o]}getModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m,billboard:T=!0}=this.getLayerConfig(),C=this.iconService.getIconMap(),L=o.find(F=>F.hasOwnProperty("shape"));if(L){const F=L.shape;return F==="dot"?"normal":F==="simple"?"simplePoint":F==="radar"?"radar":this.layerType==="fillImage"||T===!1?"fillImage":(f==null?void 0:f.indexOf(F))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(m==null?void 0:m.indexOf(F))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":C.hasOwnProperty(F)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function WS(a){return a==="PolygonLayer"?Hx:a==="LineLayer"?ty:A_}function rC(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}class hg extends Hu.EventEmitter{constructor(o,f){super(),(0,en.Z)(this,"x",void 0),(0,en.Z)(this,"y",void 0),(0,en.Z)(this,"z",void 0),(0,en.Z)(this,"key",void 0),(0,en.Z)(this,"parent",void 0),(0,en.Z)(this,"sourceTile",void 0),(0,en.Z)(this,"visible",!0),(0,en.Z)(this,"layers",[]),(0,en.Z)(this,"isLoaded",!1),(0,en.Z)(this,"tileMaskLayers",[]),(0,en.Z)(this,"tileMask",void 0),this.parent=f,this.sourceTile=o,this.x=o.x,this.y=o.y,this.z=o.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...o){}lnglatInBounds(o){const[f,m,T,C]=this.sourceTile.bounds,{lng:L,lat:F}=o;return L>=f&&L<=T&&F>=m&&F<=C}getLayerOptions(){var o;const f=this.parent.getLayerConfig();return(0,Or.Z)((0,Or.Z)({},f),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:rC(this.parent.type),mask:f.mask||((o=f.maskLayers)===null||o===void 0?void 0:o.length)!==0&&f.enableMask})}getMaskLayer(){const{maskLayers:o}=this.parent.getLayerConfig(),f=[];return o==null||o.forEach(m=>{if(!m.tileLayer)return f.push(m),m;const C=m.tileLayer.getTile(this.sourceTile.key),L=C==null?void 0:C.getLayers()[0];L&&f.push(L)}),f}addTileMask(){var o=this;return(0,Ai.Z)(function*(){const f=new Hx({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[o.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),m=(0,Q.e7)(o.parent.container);f.setContainer(m),yield f.init(),o.tileMask=f;const T=o.getMainLayer();return T!==void 0&&(T.tileMask=f),f})()}addMask(o,f){var m=this;return(0,Ai.Z)(function*(){const T=(0,Q.e7)(m.parent.container);f.setContainer(T),yield f.init(),o.addMask(f),m.tileMaskLayers.push(f)})()}addLayer(o){var f=this;return(0,Ai.Z)(function*(){o.isTileLayer=!0;const m=(0,Q.e7)(f.parent.container);o.setContainer(m),f.layers.push(o),yield o.init()})()}updateVisible(o){this.visible=o,this.updateOptions("visible",o)}updateOptions(o,f){this.layers.forEach(m=>{m.updateLayerConfig({[o]:f})})}getMainLayer(){return this.layers[0]}getFeatures(o){return[]}getFeatureById(o){return[]}destroy(){var o;(o=this.tileMask)===null||o===void 0||o.destroy(),this.layers.forEach(f=>f.destroy())}}class iC extends hg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.getSourceOption(),m=f.data.features[0].properties,T=new ty().source(f.data,f.options).size(1).shape("line").color("red"),C=new A_({minZoom:o.z-1,maxZoom:o.z+1,textAllowOverlap:!0}).source([m],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(o.key).style({stroke:"#fff",strokeWidth:2});yield o.addLayer(T),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:o.transforms}}}}const GS=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,oC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class aC extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:o,brightness:f,contrast:m,saturation:T,gamma:C}=this.layer.getLayerConfig(),L={u_opacity:(0,Ie.LS)(o,1),u_brightness:(0,Ie.LS)(f,1),u_contrast:(0,Ie.LS)(m,1),u_saturation:(0,Ie.LS)(T,1),u_gamma:(0,Ie.LS)(C,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(L)}initModels(){var o=this;return(0,Ai.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}loadTexture(){var o=this;return(0,Ai.Z)(function*(){const{createTexture2D:f}=o.rendererService,T=yield o.layer.getSource().data.images;o.texture=f({data:T[0],width:T[0].width,height:T[0].height,mag:Q.gl.LINEAR,min:Q.gl.LINEAR})})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:oC,fragmentShader:GS,defines:o.getDefines(),triangulation:I1,primitive:Q.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var sC={image:aC};class lC extends yv{constructor(...o){super(...o),(0,en.Z)(this,"type","ImageLayer")}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new sC[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{image:{}}[o]}getModelType(){return"image"}}class Zx extends hg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),T=o.getSourceOption(),C=new lC((0,Or.Z)({},m)).source(T.data,T.options);f&&Object.keys(f).forEach(L=>{var F,V;const ae=L;C[ae]((F=f[ae])===null||F===void 0?void 0:F.field,(V=f[ae])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const Xx=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,uC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class cC extends Ol{getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,color:f="#000"}=this.layer.getLayerConfig(),m={u_color:(0,Ie.CI)(f),u_opacity:o||1};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"mask",vertexShader:uC,fragmentShader:Xx,defines:o.getDefines(),triangulation:Bh,depth:{enable:!1},pick:!1})]})()}clearModels(o=!0){o&&this.layerService.clear()}registerBuiltinAttributes(){return""}}var hC={fill:cC};class O_ extends yv{constructor(...o){super(...o),(0,en.Z)(this,"type","MaskLayer")}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new hC[f](o),yield o.initLayerModels()})()}getModelType(){return"fill"}}class $x extends hg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),T=o.getSourceOption(),C=new O_((0,Or.Z)({},m)).source(T.data,T.options);f&&Object.keys(f).forEach(L=>{var F,V;const ae=L;C[ae]((F=f[ae])===null||F===void 0?void 0:F.field,(V=f[ae])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getFeatures(o){return o?this.sourceTile.data.getTileData(o):[]}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f,featureId:m}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}}function XS(a,o){return{type:a.type,field:"value",items:a.positions.map((f,m)=>({[o]:m>=a.colors.length?null:a.colors[m],value:f}))}}const hm=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,sy=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class $S extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0),(0,en.Z)(this,"colorTexture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,clampLow:f=!0,clampHigh:m=!0,noDataValue:T=-9999999,domain:C,rampColors:L}=this.layer.getLayerConfig(),F=C||(0,Ie.ZB)(L);this.colorTexture=this.layer.textureService.getColorTexture(L,F);const V={u_domain:F,u_opacity:o||1,u_noDataValue:T,u_clampLow:f?1:0,u_clampHigh:(typeof m!="undefined"?m:f)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(V)}getRasterData(o){return(0,Ai.Z)(function*(){if(Array.isArray(o.data))return{data:o.data,width:o.width,height:o.height};{const{rasterData:f,width:m,height:T}=yield o.data;return{data:Array.from(f),width:m,height:T}}})()}initModels(){var o=this;return(0,Ai.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m,queryVerdorInfo:T}=o.rendererService,C=f.data.dataArray[0],{data:L,width:F,height:V}=yield o.getRasterData(C);return o.texture=m({data:new Float32Array(L),width:F,height:V,format:T()==="WebGL1"?Q.gl.LUMINANCE:Q.gl.RED,type:Q.gl.FLOAT,alignment:1}),[yield o.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:sy,fragmentShader:hm,defines:o.getDefines(),triangulation:I1,primitive:Q.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var o,f;(o=this.texture)===null||o===void 0||o.destroy(),(f=this.colorTexture)===null||f===void 0||f.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{shaderLocation:this.attributeLocation.UV,name:"a_Uv",buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const dC=["data"],pC=["rasterData"],vC=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,mC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class gC extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0),(0,en.Z)(this,"dataOption",{})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Or.Z)((0,Or.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,noDataValue:f=0}=this.layer.getLayerConfig(),{rMinMax:m=[0,255],gMinMax:T=[0,255],bMinMax:C=[0,255]}=this.dataOption,L={u_rminmax:m,u_gminmax:T,u_bminmax:C,u_opacity:o||1,u_noDataValue:f,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(L)}getRasterData(o){var f=this;return(0,Ai.Z)(function*(){if(Array.isArray(o.data)){const{data:L}=o,F=(0,Il.Z)(o,dC);return f.dataOption=F,(0,Or.Z)({data:L},F)}const m=yield o.data,{rasterData:T}=m,C=(0,Il.Z)(m,pC);return f.dataOption=C,Array.isArray(T)?(0,Or.Z)({data:T},C):(0,Or.Z)({data:Array.from(T)},C)})()}initModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,T=f.data.dataArray[0],{data:C,width:L,height:F}=yield o.getRasterData(T);return o.texture=m({data:new Float32Array(C),width:L,height:F,format:Q.gl.RGB,type:Q.gl.FLOAT}),[yield o.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:mC,fragmentShader:vC,defines:o.getDefines(),triangulation:I1,primitive:Q.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const YS=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,Yx=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class yC extends Ol{constructor(...o){super(...o),(0,en.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:o,clampLow:f=!0,clampHigh:m=!0,noDataValue:T=-9999999,domain:C,rampColors:L,colorTexture:F,rScaler:V=6553.6,gScaler:ae=25.6,bScaler:Ae=.1,offset:Ce=1e4}=this.layer.getLayerConfig(),Ye=C||(0,Ie.ZB)(L);let Bt=F;F?this.layer.textureService.setColorTexture(F,L,Ye):Bt=this.layer.textureService.getColorTexture(L,Ye);const rn={u_unpack:[V,ae,Ae,Ce],u_domain:Ye,u_opacity:o||1,u_noDataValue:T,u_clampLow:f,u_clampHigh:typeof m!="undefined"?m:f,u_texture:this.texture,u_colorTexture:Bt};return this.textures=[this.texture,Bt],this.getUniformsBufferInfo(rn)}initModels(){var o=this;return(0,Ai.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,T=yield f.data.images;return o.texture=m({data:T[0],width:T[0].width,height:T[0].height,min:Q.gl.LINEAR,mag:Q.gl.LINEAR}),[yield o.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:Yx,fragmentShader:YS,defines:o.getDefines(),triangulation:I1,primitive:Q.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}buildModels(){var o=this;return(0,Ai.Z)(function*(){return o.initModels()})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Q.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:Q.gl.DYNAMIC_DRAW,data:[],type:Q.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var _C={raster:$S,rasterRgb:gC,raster3d:$S,rasterTerrainRgb:yC};class Kx extends yv{constructor(...o){super(...o),(0,en.Z)(this,"type","RasterLayer")}buildModels(){var o=this;return(0,Ai.Z)(function*(){const f=o.getModelType();o.layerModel=new _C[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[o]}getModelType(){switch(this.layerSource.getParserType()){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(o){if(o!=="color")return{type:void 0,field:void 0,items:[]};const f=this.getLayerConfig().rampColors;return XS(f,o)}}const bC=["rasterData"];class xC extends hg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),T=o.getSourceOption(),C=new Kx((0,Or.Z)({},m)).source(T.data,T.options);f&&Object.keys(f).forEach(L=>{var F,V;const ae=L;C[ae]((F=f[ae])===null||F===void 0?void 0:F.field,(V=f[ae])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,T=(0,Il.Z)(f,bC);return{data:m,options:{parser:(0,Or.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},T),transforms:o.transforms}}}}class EC extends hg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),T=o.getSourceOption(),C=new Kx((0,Or.Z)({},m)).source(T.data,T.options);f&&Object.keys(f).forEach(L=>{var F,V;const ae=L;C[ae]((F=f[ae])===null||F===void 0?void 0:F.field,(V=f[ae])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const SC=["rasterData"],TC={positions:[0,1],colors:["#000","#fff"]};class wC extends hg{constructor(...o){super(...o),(0,en.Z)(this,"colorTexture",void 0)}initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),T=o.getSourceOption(),{rampColors:C,domain:L}=o.getLayerOptions();o.colorTexture=o.parent.textureService.getColorTexture(C,L);const F=new Kx((0,Or.Z)((0,Or.Z)({},m),{},{colorTexture:o.colorTexture})).source(T.data,T.options);f&&Object.keys(f).forEach(V=>{var ae,Ae;const Ce=V;F[Ce]((ae=f[Ce])===null||ae===void 0?void 0:ae.field,(Ae=f[Ce])===null||Ae===void 0?void 0:Ae.values)}),yield o.addLayer(F),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,T=(0,Il.Z)(f,SC);return{data:m,options:{parser:(0,Or.Z)({type:"raster",extent:this.sourceTile.bounds},T),transforms:o.transforms}}}styleUpdate(...o){const{rampColors:f=TC,domain:m}=o;this.colorTexture=this.parent.textureService.getColorTexture(f,m||(0,Ie.ZB)(f)),this.layers.forEach(T=>T.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(o=>o.destroy())}}class k1 extends hg{initTileLayer(){var o=this;return(0,Ai.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),T=WS(o.parent.type),C=o.getSourceOption();if(!C){o.isLoaded=!0,o.emit("loaded");return}const L=new T((0,Or.Z)({},m)).source(C.data,C.options);Object.keys(f).forEach(F=>{var V,ae;const Ae=F;L[Ae]((V=f[Ae])===null||V===void 0?void 0:V.field,(ae=f[Ae])===null||ae===void 0?void 0:ae.values)}),yield o.addLayer(L),m.tileMask&&(yield o.addTileMask()),o.setLayerMinMaxZoom(L),o.isLoaded=!0,o.emit("loaded")})()}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f="defaultLayer",featureId:m="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}setLayerMinMaxZoom(o){o.getModelType()==="text"&&o.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(o){return this.sourceTile.data.getTileData(o)}getFeatureById(o){const f=this.getMainLayer();return f?f.getSource().data.dataArray.filter(T=>T._id===o):[]}}function qx(a){switch(a.type){case"PolygonLayer":return k1;case"LineLayer":return k1;case"PointLayer":return k1;case"TileDebugLayer":return iC;case"MaskLayer":return $x;case"RasterLayer":const{dataType:f}=a.getSource().parser;switch(f){case Q.n3.RGB:case Q.n3.CUSTOMRGB:return xC;case Q.n3.ARRAYBUFFER:case Q.n3.CUSTOMARRAYBUFFER:return wC;case Q.n3.TERRAINRGB:case Q.n3.CUSTOMTERRAINRGB:return EC;default:return Zx}default:return k1}}const AC=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:OC}=Ie.lodashUtil;class C_{constructor(o){(0,en.Z)(this,"parent",void 0),(0,en.Z)(this,"tileLayerService",void 0),(0,en.Z)(this,"mapService",void 0),(0,en.Z)(this,"layerService",void 0),(0,en.Z)(this,"rendererService",void 0),(0,en.Z)(this,"pickingService",void 0),(0,en.Z)(this,"tilePickService",void 0),(0,en.Z)(this,"tilesetManager",void 0),(0,en.Z)(this,"initedTileset",!1),(0,en.Z)(this,"lastViewStates",void 0),(0,en.Z)(this,"mapchange",()=>{var m;if(this.parent.isVisible()===!1)return;const{latLonBounds:T,zoom:C}=this.getCurrentView();this.lastViewStates&&this.lastViewStates.zoom===C&&this.lastViewStates.latLonBounds.toString()===T.toString()||(this.lastViewStates={zoom:C,latLonBounds:T},(m=this.tilesetManager)===null||m===void 0||m.throttleUpdate(C,T))}),(0,en.Z)(this,"viewchange",OC(this.mapchange,24)),this.parent=o;const f=this.parent.getContainer();this.rendererService=f.rendererService,this.layerService=f.layerService,this.mapService=f.mapService,this.pickingService=f.pickingService,this.tileLayerService=new B1({rendererService:this.rendererService,layerService:this.layerService,parent:o}),this.tilePickService=new Wx({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:o}),this.parent.setLayerPickService(this.tilePickService),this.proxy(o),this.initTileSetManager()}initTileSetManager(){var o;const f=this.parent.getSource();if(this.tilesetManager=f.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:m,zoom:T}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(T,m)}getCurrentView(){const o=this.mapService.getBounds(),f=[o[0][0],o[0][1],o[1][0],o[1][1]],m=this.mapService.getZoom();return{latLonBounds:f,zoom:m}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",o=>{}),this.tilesetManager.on("tile-unload",o=>{this.tileUnLoad(o)}),this.tilesetManager.on("tile-error",(o,f)=>{this.tileError(o)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(o){return this.tileLayerService.getTile(o)}tileLoaded(o){}tileError(o){console.warn("error:",o)}destroy(){var o;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(o=this.tilesetManager)===null||o===void 0||o.destroy(),this.tileLayerService.destroy()}reload(){var o;this.tilesetManager.clear();const{latLonBounds:f,zoom:m}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(m,f)}tileUnLoad(o){this.tileLayerService.removeTile(o.key)}tileUpdate(){var o=this;return(0,Ai.Z)(function*(){if(!o.tilesetManager)return;const f=o.parent.getMinZoom(),m=o.parent.getMaxZoom(),T=o.tilesetManager.tiles.filter(C=>C.isLoaded).filter(C=>C.isVisibleChange).filter(C=>C.data).filter(C=>C.z>=f&&C.z<m);yield Promise.all(T.map(function(){var C=(0,Ai.Z)(function*(L){if(o.tileLayerService.hasTile(L.key))o.tileLayerService.updateTileVisible(L),o.tilePickService.setPickState(),o.layerService.reRender();else{const F=qx(o.parent),V=new F(L,o.parent);yield V.initTileLayer(),o.tilePickService.setPickState(),V.getLayers().length!==0&&(o.tileLayerService.addTile(V),o.tileLayerService.updateTileVisible(L),o.layerService.reRender())}});return function(L){return C.apply(this,arguments)}}())),o.tilesetManager.isLoaded&&o.parent.emit("tiles-loaded",o.tilesetManager.currentTiles)})()}setPickState(o){}pickRender(o){this.tilePickService.pickRender(o)}selectFeature(o){this.tilePickService.selectFeature(o)}highlightPickedFeature(o){this.tilePickService.highlightPickedFeature(o)}proxy(o){AC.forEach(f=>{const m=o[f].bind(o);o[f]=(...T)=>(m(...T),this.getLayers().map(C=>{C[f](...T)}),f==="style"&&this.getTiles().forEach(C=>C.styleUpdate(...T)),o)})}}class H5 extends null{constructor(...o){super(...o),_defineProperty(this,"isMoving",!1),_defineProperty(this,"maskLayer",void 0),_defineProperty(this,"move",f=>{switch(f.stopPropagation(),f.type){case"touchcancel":case"touchend":case"mouseup":{var m;this.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(T=>{document.removeEventListener(T,this.move)}),(m=this.scene)===null||m===void 0||m.render();break}case"mousedown":case"touchstart":this.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(T=>{document.addEventListener(T,this.move)});case"mousemove":case"touchmove":{if(this.isMoving)if(this.controlOption.orientation==="vertical"){let T;if("pageX"in f?T=f.pageX:f.touches&&f.touches.length&&f.touches[0].pageX?T=f.touches[0].pageX:f.changedTouches&&f.changedTouches.length&&(T=f.changedTouches[0].pageX),!T)break;const C=this.getContainerDOMRect(),L=this.getContainerSize(),F=L[0],V=(C==null?void 0:C.left)||0,ae=T-V+window.scrollX-document.documentElement.clientLeft,Ae=F-Math.min(Math.max(0,F-ae),F),Ce=Ae/F;this.setOptions({ratio:Ce}),this.emit("moving",{size:[Ae,L[1]],ratio:[Ce,0]})}else{let T;if("pageY"in f?T=f.pageY:f.touches&&f.touches.length&&f.touches[0].pageY?T=f.touches[0].pageY:f.changedTouches&&f.changedTouches.length&&(T=f.changedTouches[0].pageY),!T)break;const C=this.getContainerDOMRect(),L=this.getContainerSize(),F=L[1],V=(C==null?void 0:C.top)||0,ae=T-V+window.scrollY-document.documentElement.clientTop,Ae=F-Math.min(Math.max(0,F-ae),F),Ce=Ae/F;this.setOptions({ratio:Ce}),this.emit("moving",{size:[L[0],Ae],ratio:[0,Ce]})}break}default:break}}),_defineProperty(this,"getMaskLayer",()=>(console.log(this.getMaskGeoData()),new PolygonLayer({visible:!1}).source(this.getMaskGeoData()).shape("fill").color("red").style({opacity:.1}))),_defineProperty(this,"updateMask",()=>{var f;if(!this.mapsService)return;const m=this.getMaskGeoData();(f=this.maskLayer)===null||f===void 0||f.setData(m)})}getDefault(){return _objectSpread(_objectSpread({},super.getDefault()),{},{layers:[],rightLayers:[],ratio:.5,orientation:"vertical"})}onAdd(){const o=DOM.create("div","l7-control-swipe");DOM.create("button","l7-control-swipe__button",o);const{orientation:f="vertical",ratio:m=.5}=this.controlOption;return f==="horizontal"?(o.style.top=m*100+"%",o.style.left=""):(o.style.left=m*100+"%",o.style.top=""),o.classList.add(f),o}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd();const{className:f,style:m,layers:T,rightLayers:C}=this.controlOption;f&&this.setClassName(f),m&&this.setStyle(m),this.mapsService.getMarkerContainer().appendChild(this.container),this.maskLayer=this.getMaskLayer(),this.registerEvent();const L=createLayerContainer(o);return this.maskLayer.setContainer(L),this.scene.addLayer(this.maskLayer),this.addMaskToLayers(T,!1),this.addMaskToLayers(C,!0),this.emit("add",this),this}onRemove(){if(this.maskLayer){var o;const{layers:f,rightLayers:m}=this.controlOption;this.removeMaskFromLayers(f),this.removeMaskFromLayers(m),(o=this.layerService)===null||o===void 0||o.remove(this.maskLayer)}this.unRegisterEvent(),this.removeAllListeners()}show(){var o;const f=this.container;DOM.removeClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:T}=this.controlOption;m.forEach(C=>C.enableMask()),T.forEach(C=>C.enableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!0,this.emit("show",this)}hide(){var o;const f=this.container;DOM.addClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:T}=this.controlOption;m.forEach(C=>C.disableMask()),T.forEach(C=>C.disableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!1,this.emit("hide",this)}setOptions(o){const f=_objectSpread(_objectSpread({},this.controlOption),o);if(o.className&&this.setClassName(o.className),o.style&&this.setStyle(o.style),(o.orientation||o.ratio!==void 0)&&this.setOrientationAndRatio(f.orientation,f.ratio),o.layers){const m=o.layers,T=this.controlOption.layers;this.setLayers(m,T,!1)}if(o.rightLayers){const m=o.rightLayers,T=this.controlOption.rightLayers;this.setLayers(m,T,!0)}this.controlOption=f,this.updateMask()}registerEvent(){this.container.addEventListener("mousedown",this.move),this.container.addEventListener("touchstart",this.move),this.mapsService.on("camerachange",this.updateMask)}unRegisterEvent(){var o;this.container.removeEventListener("mousedown",this.move),this.container.removeEventListener("touchstart",this.move),(o=this.mapsService)===null||o===void 0||o.off("camerachange",this.updateMask)}setOrientationAndRatio(o="vertical",f=.5){this.container.classList.remove("horizontal","vertical"),this.container.classList.add(o),o==="horizontal"?(this.container.style.top=f*100+"%",this.container.style.left=""):(this.container.style.left=f*100+"%",this.container.style.top="")}setLayers(o,f,m=!1){const T=o.filter(L=>f.includes(L)===!1),C=f.filter(L=>o.includes(L)===!1);this.addMaskToLayers(T,m),this.removeMaskFromLayers(C)}addMaskToLayers(o,f){o.forEach(m=>{m.updateLayerConfig({maskInside:!f}),m.addMask(this.maskLayer)})}removeMaskFromLayers(o){o.forEach(f=>{f.updateLayerConfig({maskInside:!0}),f.removeMask(this.maskLayer)})}getMaskGeoData(){const{ratio:o=.5,orientation:f="vertical"}=this.controlOption,m=f==="vertical",[T,C]=this.getBounds(),[L,F]=T,[V,ae]=C;let Ae;if(m){const Ye=L+(V-L)*o;Ae=[[L,ae],[Ye,ae],[Ye,F],T,[L,ae]]}else{const Ye=this.getContainerSize(),rn=this.mapsService.containerToLngLat([Ye[0],Ye[1]*o]).lat;Ae=[[L,ae],C,[V,rn],[L,rn],[L,ae]]}return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[Ae]}}]}}getContainerDOMRect(){var o;return(o=this.mapsService.getContainer())===null||o===void 0?void 0:o.getBoundingClientRect()}getContainerSize(){return this.mapsService.getSize()}getBounds(){return this.mapsService.getBounds()}addLayer(o,f=!1){const m=Array.isArray(o)?o:[o];if(f){const T=this.controlOption.rightLayers.concat(...m);this.setOptions({rightLayers:T})}else{const T=this.controlOption.layers.concat(...m);this.setOptions({layers:T})}}removeLayer(o){const f=Array.isArray(o)?o:[o],m=this.controlOption.layers.filter(C=>f.includes(C)),T=this.controlOption.rightLayers.filter(C=>f.includes(C));this.setOptions({layers:m,rightLayers:T})}removeLayers(){this.setOptions({layers:[],rightLayers:[]})}}class W5 extends null{constructor(...o){super(...o),_defineProperty(this,"disabled",void 0),_defineProperty(this,"zoomInButton",void 0),_defineProperty(this,"zoomOutButton",void 0),_defineProperty(this,"zoomNumDiv",void 0),_defineProperty(this,"zoomIn",()=>{!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}),_defineProperty(this,"zoomOut",()=>{!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}),_defineProperty(this,"updateDisabled",()=>{const f=this.mapsService;this.zoomInButton.removeAttribute("disabled"),this.zoomOutButton.removeAttribute("disabled"),(this.disabled||f.getZoom()<=f.getMinZoom())&&this.zoomOutButton.setAttribute("disabled","true"),this.controlOption.showZoom&&this.zoomNumDiv&&(this.zoomNumDiv.innerText=String(Math.floor(f.getZoom()))),(this.disabled||f.getZoom()>=f.getMaxZoom())&&this.zoomInButton.setAttribute("disabled","true")})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMRIGHT,name:"zoom",zoomInText:createL7Icon("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:createL7Icon("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}onAdd(){const o=DOM.create("div","l7-control-zoom");return this.resetButtonGroup(o),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),o}onRemove(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}disable(){return this.disabled=!0,this.updateDisabled(),this}enable(){return this.disabled=!1,this.updateDisabled(),this}resetButtonGroup(o){DOM.clearChildren(o),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",o,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",o)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",o,this.zoomOut),this.updateDisabled()}createButton(o,f,m,T,C){const L=DOM.create("button",m,T);return typeof o=="string"?L.innerHTML=o:L.append(o),L.title=f,C&&L.addEventListener("click",C),L}}class KS extends Hu.EventEmitter{get lngLat(){var o;return(o=this.popupOption.lngLat)!==null&&o!==void 0?o:{lng:0,lat:0}}set lngLat(o){this.popupOption.lngLat=o}constructor(o){super(),(0,en.Z)(this,"popupOption",void 0),(0,en.Z)(this,"mapsService",void 0),(0,en.Z)(this,"sceneService",void 0),(0,en.Z)(this,"layerService",void 0),(0,en.Z)(this,"scene",void 0),(0,en.Z)(this,"closeButton",void 0),(0,en.Z)(this,"container",void 0),(0,en.Z)(this,"content",void 0),(0,en.Z)(this,"contentTitle",void 0),(0,en.Z)(this,"contentPanel",void 0),(0,en.Z)(this,"tip",void 0),(0,en.Z)(this,"isShow",!0),(0,en.Z)(this,"onMouseMove",m=>{var T;const C=this.mapsService.getMapContainer(),{left:L=0,top:F=0}=(T=C==null?void 0:C.getBoundingClientRect())!==null&&T!==void 0?T:{};this.setPopupPosition(m.clientX-L,m.clientY-F)}),(0,en.Z)(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:m,lat:T}=this.lngLat,{x:C,y:L}=this.mapsService.lngLatToContainer([m,T]);this.setPopupPosition(C,L)}),(0,en.Z)(this,"updateLngLatPositionWhenZoom",m=>{if(!this.mapsService||this.popupOption.followCursor)return;const T=m.map,C=T.getSize();C.x=C.x/2,C.y=C.y/2;const L=m.center,F=m.zoom,V=T.DE(this.lngLat,F,L);V.x=Math.round(V.x),V.y=Math.round(V.y),this.setPopupPosition(V.x,V.y,!0)}),(0,en.Z)(this,"onKeyDown",m=>{m.keyCode===27&&this.remove()}),(0,en.Z)(this,"onCloseButtonClick",m=>{m.stopPropagation&&m.stopPropagation(),this.hide()}),(0,en.Z)(this,"updatePosition",(m,T=!0)=>{const C=!!this.lngLat,{className:L,style:F,maxWidth:V,anchor:ae,stopPropagation:Ae}=this.popupOption;if(!this.mapsService||!C||!this.content)return;const Ce=this.mapsService.getMarkerContainer();if(!this.container&&Ce&&(this.container=Ie.SO.create("div",`l7-popup ${L!=null?L:""} ${this.isShow?"":"l7-popup-hide"}`,Ce),F&&this.container.setAttribute("style",F),this.tip=Ie.SO.create("div","l7-popup-tip",this.container),this.container.appendChild(this.content),Ae&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(Ye=>{this.container.addEventListener(Ye,Bt=>{Bt.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),T?this.updateLngLatPositionWhenZoom(m):this.updateLngLatPosition(),Ie.SO.setTransform(this.container,`${Ie.rQ[ae]}`),(0,Ie.zi)(this.container,ae,"popup"),V){const{width:Ye}=this.container.getBoundingClientRect();Ye>parseFloat(V)&&(this.container.style.width=V)}else this.container.style.removeProperty("width")}),(0,en.Z)(this,"updateWhenZoom",m=>{this.updatePosition(m,!0)}),(0,en.Z)(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=(0,Or.Z)((0,Or.Z)({},this.getDefault(o!=null?o:{})),o);const{lngLat:f}=this.popupOption;f&&(this.lngLat=f)}getIsShow(){return this.isShow}addTo(o){this.mapsService=o.mapService,this.sceneService=o.sceneService,this.layerService=o.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=o,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:f,text:m,title:T}=this.popupOption;return f?this.setHTML(f):m&&this.setText(m),T&&this.setTitle(T),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Ie.SO.remove(this.content),this.container&&(Ie.SO.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(o){this.show();const{className:f}=this.popupOption;if(this.popupOption=(0,Or.Z)((0,Or.Z)({},this.popupOption),o),this.checkUpdateOption(o,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(Ie.SO.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(o,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(o,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(o,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(o,["html"])&&o.html?this.setHTML(o.html):this.checkUpdateOption(o,["text"])&&o.text&&this.setText(o.text),this.checkUpdateOption(o,["className"])){var m;f&&this.container.classList.remove(f!=null?f:""),this.container.classList.add((m=o.className)!==null&&m!==void 0?m:"")}if(this.checkUpdateOption(o,["style"])){var T;Ie.SO.addStyle(this.container,(T=o.style)!==null&&T!==void 0?T:"")}return this.checkUpdateOption(o,["lngLat"])&&o.lngLat&&this.setLnglat(o.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&Ie.SO.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&Ie.SO.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(o){return this.popupOption.html=o,this.setDOMContent(o)}setText(o){return this.popupOption.text=o,this.setDOMContent(window.document.createTextNode(o))}setTitle(o){this.show(),this.popupOption.title=o,o?(this.contentTitle||(this.contentTitle=Ie.SO.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),Ie.SO.clearChildren(this.contentTitle),Ie.SO.appendElementType(this.contentTitle,o)):this.contentTitle&&(Ie.SO.remove(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:o,lat:f}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([o,f]),this}setLngLat(o){return this.setLnglat(o)}setLnglat(o){return this.show(),this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(o){return this.popupOption.maxWidth=o,this.update(),this}isOpen(){return!!this.mapsService}getDefault(o){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:Ie.bV.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(o){return this.show(),this.createContent(),Ie.SO.appendElementType(this.contentPanel,o),this.update(),this}updateCloseOnClick(o){const f=this.mapsService;f&&(f==null||f.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!o&&requestAnimationFrame(()=>{f==null||f.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(o){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!o&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(o){var f;const m=(f=this.mapsService)===null||f===void 0?void 0:f.getContainer();m&&(m==null||m.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!o&&(m==null||m.addEventListener("mousemove",this.onMouseMove)))}createContent(){if(this.content&&Ie.SO.remove(this.content),this.contentTitle=void 0,this.content=Ie.SO.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const o=El("l7-icon-guanbi");Ie.SO.addClass(o,"l7-popup-close-button"),this.content.appendChild(o),this.popupOption.closeButtonOffsets&&(o.style.right=this.popupOption.closeButtonOffsets[0]+"px",o.style.top=this.popupOption.closeButtonOffsets[1]+"px"),o.setAttribute("aria-label","Close popup"),o.addEventListener("click",()=>{this.hide()}),o.addEventListener("pointerup",f=>{f.stopPropagation()}),o.addEventListener("pointerdown",f=>{f.stopPropagation()}),this.closeButton=o}else this.closeButton=void 0;this.contentPanel=Ie.SO.create("div","l7-popup-content__panel",this.content)}setPopupPosition(o,f,m=!1){if(this.container){const{offsets:T}=this.popupOption;this.container.style.left=o+T[0]+"px",this.container.style.top=f-T[1]+"px",m?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(o,f){return f.some(m=>m in o)}}const{get:qS}=Ie.lodashUtil;class CC extends null{constructor(...o){super(...o),_defineProperty(this,"layerClickCountByFrame",0),_defineProperty(this,"layerConfigMap",new WeakMap),_defineProperty(this,"displayFeatureInfo",void 0),_defineProperty(this,"onLayerClick",(f,m)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(f,m.featureId))this.hide();else{const{title:T,content:C}=this.getLayerInfoFrag(f,m);this.setDOMContent(C),this.setLnglat(m.lngLat),this.setTitle(T),this.setDisplayFeatureInfo({layer:f,featureId:m.featureId}),this.show()}})}),_defineProperty(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),_defineProperty(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),_defineProperty(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var o;const{config:f,items:m}=this.popupOption;return(o=f!=null?f:m)!==null&&o!==void 0?o:[]}addTo(o){return super.addTo(o),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(o){this.unbindLayerEvent();const f=_objectSpread({},o),m=f.trigger||this.popupOption.trigger,T=f.items||this.popupOption.items,C=(T==null?void 0:T.length)===0;f.followCursor=m==="hover"&&!C;const L=this.isShow;return super.setOptions(f),this.bindLayerEvent(),(C||!L)&&this.hide(),this}getDefault(o){const f=o.trigger!=="click";return _objectSpread(_objectSpread({},super.getDefault(o)),{},{trigger:"hover",followCursor:f,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:o,closeOnClick:f}=this.popupOption;this.layerConfigItems.forEach(m=>{var T;const C=this.getLayerByConfig(m);if(!C)return;const L=_objectSpread({},m);if(o==="hover"){const Ae=this.onLayerMouseMove.bind(this,C),Ce=this.onLayerMouseOut.bind(this,C);L.onMouseMove=Ae,L.onMouseOut=Ce,C==null||C.on("mousemove",Ae),C==null||C.on("mouseout",Ce)}else{var F;const Ae=this.onLayerClick.bind(this,C);L.onClick=Ae,C==null||C.on("click",Ae);const Ce=(F=this.mapsService)===null||F===void 0?void 0:F.getMapContainer();Ce&&f&&Ce.addEventListener("click",this.onSceneClick)}const V=C==null||(T=C.getSource)===null||T===void 0?void 0:T.call(C),ae=this.onSourceUpdate.bind(this);V==null||V.on("update",ae),L.onSourceUpdate=ae,this.layerConfigMap.set(C,L)})}unbindLayerEvent(){this.layerConfigItems.forEach(o=>{var f;const m=this.getLayerByConfig(o),T=m&&this.layerConfigMap.get(m);if(!T)return;const{onMouseMove:C,onMouseOut:L,onClick:F,onSourceUpdate:V}=T;if(C&&m.off("mousemove",C),L&&m.off("mouseout",L),F&&m.off("click",F),V){var ae;m==null||(ae=m.getSource())===null||ae===void 0||ae.off("update",V)}const Ae=(f=this.mapsService)===null||f===void 0?void 0:f.getMapContainer();Ae&&Ae.removeEventListener("click",this.onSceneClick)})}onLayerMouseMove(o,f){if(!this.isSameFeature(o,f.featureId)){const{title:m,content:T}=this.getLayerInfoFrag(o,f);this.setDOMContent(T),this.setTitle(m),this.setDisplayFeatureInfo({layer:o,featureId:f.featureId}),this.show()}}onLayerMouseOut(o,f){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(o,f){const m=this.layerConfigMap.get(o);let T;const C=document.createDocumentFragment();if(m){let L=f.feature;L.type==="Feature"&&"properties"in L&&"geometry"in L&&(L=L.properties);const{title:F,fields:V,customContent:ae}=m;if(F){T=document.createDocumentFragment();const Ae=F instanceof Function?F(L):F;DOM.appendElementType(T,Ae)}if(ae){const Ae=ae instanceof Function?ae(L):ae;DOM.appendElementType(C,Ae)}else V!=null&&V.length&&(V==null||V.forEach(Ae=>{var Ce,Ye;const{field:Bt,formatField:rn,formatValue:Sn,getValue:lr}=typeof Ae=="string"?{field:Ae}:Ae,Br=DOM.create("div","l7-layer-popup__row"),Er=lr?lr(f.feature):qS(L,Bt),ui=(Ce=rn instanceof Function?rn(Bt,L):rn)!==null&&Ce!==void 0?Ce:Bt;let ji=(Ye=Sn instanceof Function?Sn(Er,L):Sn)!==null&&Ye!==void 0?Ye:Er;const Po=DOM.create("span","l7-layer-popup__key",Br);DOM.appendElementType(Po,ui),DOM.appendElementType(Po,document.createTextNode("\uFF1A"));const no=DOM.create("span","l7-layer-popup__value",Br);Array.isArray(ji)&&ji.every(Gr=>!(Gr instanceof Object))&&(ji=ji.map(Gr=>String(Gr)).join(",")),DOM.appendElementType(no,ji),C.appendChild(Br)}))}return{title:T,content:C}}getLayerByConfig(o){const f=o.layer;if(f instanceof Object)return f;if(typeof f=="string")return this.layerService.getLayer(f)||this.layerService.getLayerByName(f)}isSameFeature(o,f){const m=this.displayFeatureInfo;return m&&o===m.layer&&f===m.featureId}setDisplayFeatureInfo(o){const f=this.displayFeatureInfo;f&&f.layer.off("hide",this.onLayerHide),o&&o.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=o}}function RC(a,o){var f=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(f||m)&&(o||(o=document),!!o)){var T=o.head||o.getElementsByTagName("head")[0];if(!T){T=o.createElement("head");var C=o.body||o.getElementsByTagName("body")[0];C?C.parentNode.insertBefore(T,C):o.documentElement.appendChild(T)}var L=o.createElement("style");return L.type="text/css",L.styleSheet?L.styleSheet.cssText=a:L.appendChild(o.createTextNode(a)),T.appendChild(L),L}}RC(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var QS=D(81550),MC=D.n(QS),PC=class{constructor(a,o){const{buffer:f,offset:m,stride:T,normalized:C,size:L,divisor:F}=o;this.buffer=f,this.attribute={buffer:f.get(),offset:m||0,stride:T||0,normalized:C||!1,divisor:F||0},L&&(this.attribute.size=L)}get(){return this.attribute}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},IC={[Q.gl.POINTS]:"points",[Q.gl.LINES]:"lines",[Q.gl.LINE_LOOP]:"line loop",[Q.gl.LINE_STRIP]:"line strip",[Q.gl.TRIANGLES]:"triangles",[Q.gl.TRIANGLE_FAN]:"triangle fan",[Q.gl.TRIANGLE_STRIP]:"triangle strip"},JS={[Q.gl.STATIC_DRAW]:"static",[Q.gl.DYNAMIC_DRAW]:"dynamic",[Q.gl.STREAM_DRAW]:"stream"},R_={[Q.gl.BYTE]:"int8",[Q.gl.INT]:"int32",[Q.gl.UNSIGNED_BYTE]:"uint8",[Q.gl.UNSIGNED_SHORT]:"uint16",[Q.gl.UNSIGNED_INT]:"uint32",[Q.gl.FLOAT]:"float"},dg={[Q.gl.ALPHA]:"alpha",[Q.gl.LUMINANCE]:"luminance",[Q.gl.LUMINANCE_ALPHA]:"luminance alpha",[Q.gl.RGB]:"rgb",[Q.gl.RGBA]:"rgba",[Q.gl.RGBA4]:"rgba4",[Q.gl.RGB5_A1]:"rgb5 a1",[Q.gl.RGB565]:"rgb565",[Q.gl.DEPTH_COMPONENT]:"depth",[Q.gl.DEPTH_STENCIL]:"depth stencil"},LC={[Q.gl.DONT_CARE]:"dont care",[Q.gl.NICEST]:"nice",[Q.gl.FASTEST]:"fast"},eT={[Q.gl.NEAREST]:"nearest",[Q.gl.LINEAR]:"linear",[Q.gl.LINEAR_MIPMAP_LINEAR]:"mipmap",[Q.gl.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[Q.gl.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[Q.gl.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},u0={[Q.gl.REPEAT]:"repeat",[Q.gl.CLAMP_TO_EDGE]:"clamp",[Q.gl.MIRRORED_REPEAT]:"mirror"},DC={[Q.gl.NONE]:"none",[Q.gl.BROWSER_DEFAULT_WEBGL]:"browser"},NC={[Q.gl.NEVER]:"never",[Q.gl.ALWAYS]:"always",[Q.gl.LESS]:"less",[Q.gl.LEQUAL]:"lequal",[Q.gl.GREATER]:"greater",[Q.gl.GEQUAL]:"gequal",[Q.gl.EQUAL]:"equal",[Q.gl.NOTEQUAL]:"notequal"},ly={[Q.gl.FUNC_ADD]:"add",[Q.gl.MIN_EXT]:"min",[Q.gl.MAX_EXT]:"max",[Q.gl.FUNC_SUBTRACT]:"subtract",[Q.gl.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},M_={[Q.gl.ZERO]:"zero",[Q.gl.ONE]:"one",[Q.gl.SRC_COLOR]:"src color",[Q.gl.ONE_MINUS_SRC_COLOR]:"one minus src color",[Q.gl.SRC_ALPHA]:"src alpha",[Q.gl.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[Q.gl.DST_COLOR]:"dst color",[Q.gl.ONE_MINUS_DST_COLOR]:"one minus dst color",[Q.gl.DST_ALPHA]:"dst alpha",[Q.gl.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[Q.gl.CONSTANT_COLOR]:"constant color",[Q.gl.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[Q.gl.CONSTANT_ALPHA]:"constant alpha",[Q.gl.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[Q.gl.SRC_ALPHA_SATURATE]:"src alpha saturate"},BC={[Q.gl.NEVER]:"never",[Q.gl.ALWAYS]:"always",[Q.gl.LESS]:"less",[Q.gl.LEQUAL]:"lequal",[Q.gl.GREATER]:"greater",[Q.gl.GEQUAL]:"gequal",[Q.gl.EQUAL]:"equal",[Q.gl.NOTEQUAL]:"notequal"},uy={[Q.gl.ZERO]:"zero",[Q.gl.KEEP]:"keep",[Q.gl.REPLACE]:"replace",[Q.gl.INVERT]:"invert",[Q.gl.INCR]:"increment",[Q.gl.DECR]:"decrement",[Q.gl.INCR_WRAP]:"increment wrap",[Q.gl.DECR_WRAP]:"decrement wrap"},FC={[Q.gl.FRONT]:"front",[Q.gl.BACK]:"back"},tT=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:T}=o;this.buffer=a.buffer({data:f,usage:JS[m||Q.gl.STATIC_DRAW],type:R_[T||Q.gl.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){this.buffer.subdata(a,o)}},kC=class{constructor(a,o){const{data:f,usage:m,type:T,count:C}=o;this.elements=a.elements({data:f,usage:JS[m||Q.gl.STATIC_DRAW],type:R_[T||Q.gl.UNSIGNED_BYTE],count:C})}get(){return this.elements}subData({data:a}){this.elements.subdata(a)}destroy(){}},zC=class{constructor(a,o){const{width:f,height:m,color:T,colors:C}=o,L={width:f,height:m};Array.isArray(C)&&(L.colors=C.map(F=>F.get())),T&&typeof T!="boolean"&&(L.color=T.get()),this.framebuffer=a.framebuffer(L)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:a,height:o}){this.framebuffer.resize(a,o)}},$d=D(95147),dm=D(25897),nT=D(81957),To=D(97582),UC=D(90857),hh=UC,On;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN",a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR",a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",a[a.FUNC_ADD=32774]="FUNC_ADD",a[a.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",a[a.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",a[a.BLEND_EQUATION=32777]="BLEND_EQUATION",a[a.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",a[a.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",a[a.BLEND_DST_RGB=32968]="BLEND_DST_RGB",a[a.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",a[a.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",a[a.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",a[a.BLEND_COLOR=32773]="BLEND_COLOR",a[a.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",a[a.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",a[a.LINE_WIDTH=2849]="LINE_WIDTH",a[a.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",a[a.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",a[a.CULL_FACE_MODE=2885]="CULL_FACE_MODE",a[a.FRONT_FACE=2886]="FRONT_FACE",a[a.DEPTH_RANGE=2928]="DEPTH_RANGE",a[a.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",a[a.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",a[a.DEPTH_FUNC=2932]="DEPTH_FUNC",a[a.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",a[a.STENCIL_FUNC=2962]="STENCIL_FUNC",a[a.STENCIL_FAIL=2964]="STENCIL_FAIL",a[a.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",a[a.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",a[a.STENCIL_REF=2967]="STENCIL_REF",a[a.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",a[a.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",a[a.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",a[a.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",a[a.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",a[a.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",a[a.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",a[a.VIEWPORT=2978]="VIEWPORT",a[a.SCISSOR_BOX=3088]="SCISSOR_BOX",a[a.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",a[a.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",a[a.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",a[a.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",a[a.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",a[a.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",a[a.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",a[a.RED_BITS=3410]="RED_BITS",a[a.GREEN_BITS=3411]="GREEN_BITS",a[a.BLUE_BITS=3412]="BLUE_BITS",a[a.ALPHA_BITS=3413]="ALPHA_BITS",a[a.DEPTH_BITS=3414]="DEPTH_BITS",a[a.STENCIL_BITS=3415]="STENCIL_BITS",a[a.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",a[a.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",a[a.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",a[a.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",a[a.SAMPLES=32937]="SAMPLES",a[a.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",a[a.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",a[a.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",a[a.VENDOR=7936]="VENDOR",a[a.RENDERER=7937]="RENDERER",a[a.VERSION=7938]="VERSION",a[a.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",a[a.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",a[a.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.BUFFER_SIZE=34660]="BUFFER_SIZE",a[a.BUFFER_USAGE=34661]="BUFFER_USAGE",a[a.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",a[a.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",a[a.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",a[a.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",a[a.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",a[a.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",a[a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",a[a.CULL_FACE=2884]="CULL_FACE",a[a.FRONT=1028]="FRONT",a[a.BACK=1029]="BACK",a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK",a[a.BLEND=3042]="BLEND",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.DITHER=3024]="DITHER",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.NO_ERROR=0]="NO_ERROR",a[a.INVALID_ENUM=1280]="INVALID_ENUM",a[a.INVALID_VALUE=1281]="INVALID_VALUE",a[a.INVALID_OPERATION=1282]="INVALID_OPERATION",a[a.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",a[a.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",a[a.CW=2304]="CW",a[a.CCW=2305]="CCW",a[a.DONT_CARE=4352]="DONT_CARE",a[a.FASTEST=4353]="FASTEST",a[a.NICEST=4354]="NICEST",a[a.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT",a[a.DOUBLE=5130]="DOUBLE",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",a[a.VERTEX_SHADER=35633]="VERTEX_SHADER",a[a.COMPILE_STATUS=35713]="COMPILE_STATUS",a[a.DELETE_STATUS=35712]="DELETE_STATUS",a[a.LINK_STATUS=35714]="LINK_STATUS",a[a.VALIDATE_STATUS=35715]="VALIDATE_STATUS",a[a.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",a[a.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",a[a.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",a[a.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",a[a.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",a[a.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",a[a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",a[a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",a[a.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",a[a.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",a[a.SHADER_TYPE=35663]="SHADER_TYPE",a[a.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",a[a.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",a[a.NEVER=512]="NEVER",a[a.ALWAYS=519]="ALWAYS",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.GEQUAL=518]="GEQUAL",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.KEEP=7680]="KEEP",a[a.REPLACE=7681]="REPLACE",a[a.INCR=7682]="INCR",a[a.DECR=7683]="DECR",a[a.INVERT=5386]="INVERT",a[a.INCR_WRAP=34055]="INCR_WRAP",a[a.DECR_WRAP=34056]="DECR_WRAP",a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR",a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",a[a.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",a[a.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",a[a.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",a[a.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE=5890]="TEXTURE",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a[a.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",a[a.TEXTURE0=33984]="TEXTURE0",a[a.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",a[a.REPEAT=10497]="REPEAT",a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a[a.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",a[a.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",a[a.FLOAT_VEC2=35664]="FLOAT_VEC2",a[a.FLOAT_VEC3=35665]="FLOAT_VEC3",a[a.FLOAT_VEC4=35666]="FLOAT_VEC4",a[a.INT_VEC2=35667]="INT_VEC2",a[a.INT_VEC3=35668]="INT_VEC3",a[a.INT_VEC4=35669]="INT_VEC4",a[a.BOOL=35670]="BOOL",a[a.BOOL_VEC2=35671]="BOOL_VEC2",a[a.BOOL_VEC3=35672]="BOOL_VEC3",a[a.BOOL_VEC4=35673]="BOOL_VEC4",a[a.FLOAT_MAT2=35674]="FLOAT_MAT2",a[a.FLOAT_MAT3=35675]="FLOAT_MAT3",a[a.FLOAT_MAT4=35676]="FLOAT_MAT4",a[a.SAMPLER_2D=35678]="SAMPLER_2D",a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE",a[a.LOW_FLOAT=36336]="LOW_FLOAT",a[a.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",a[a.HIGH_FLOAT=36338]="HIGH_FLOAT",a[a.LOW_INT=36339]="LOW_INT",a[a.MEDIUM_INT=36340]="MEDIUM_INT",a[a.HIGH_INT=36341]="HIGH_INT",a[a.FRAMEBUFFER=36160]="FRAMEBUFFER",a[a.RENDERBUFFER=36161]="RENDERBUFFER",a[a.RGBA4=32854]="RGBA4",a[a.RGB5_A1=32855]="RGB5_A1",a[a.RGB565=36194]="RGB565",a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",a[a.STENCIL_INDEX=6401]="STENCIL_INDEX",a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a[a.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",a[a.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",a[a.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",a[a.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",a[a.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",a[a.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",a[a.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",a[a.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",a[a.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",a[a.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",a[a.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",a[a.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",a[a.NONE=0]="NONE",a[a.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",a[a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",a[a.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",a[a.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",a[a.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",a[a.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",a[a.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",a[a.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",a[a.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",a[a.READ_BUFFER=3074]="READ_BUFFER",a[a.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",a[a.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",a[a.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",a[a.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",a[a.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",a[a.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",a[a.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",a[a.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",a[a.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",a[a.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",a[a.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",a[a.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",a[a.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",a[a.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",a[a.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",a[a.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",a[a.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",a[a.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",a[a.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",a[a.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",a[a.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",a[a.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",a[a.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",a[a.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",a[a.RED=6403]="RED",a[a.RGB8=32849]="RGB8",a[a.RGBA8=32856]="RGBA8",a[a.RGB10_A2=32857]="RGB10_A2",a[a.TEXTURE_3D=32879]="TEXTURE_3D",a[a.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",a[a.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",a[a.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",a[a.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",a[a.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",a[a.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",a[a.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",a[a.SRGB=35904]="SRGB",a[a.SRGB8=35905]="SRGB8",a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",a[a.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",a[a.RGBA32F=34836]="RGBA32F",a[a.RGB32F=34837]="RGB32F",a[a.RGBA16F=34842]="RGBA16F",a[a.RGB16F=34843]="RGB16F",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F",a[a.RGB9_E5=35901]="RGB9_E5",a[a.RGBA32UI=36208]="RGBA32UI",a[a.RGB32UI=36209]="RGB32UI",a[a.RGBA16UI=36214]="RGBA16UI",a[a.RGB16UI=36215]="RGB16UI",a[a.RGBA8UI=36220]="RGBA8UI",a[a.RGB8UI=36221]="RGB8UI",a[a.RGBA32I=36226]="RGBA32I",a[a.RGB32I=36227]="RGB32I",a[a.RGBA16I=36232]="RGBA16I",a[a.RGB16I=36233]="RGB16I",a[a.RGBA8I=36238]="RGBA8I",a[a.RGB8I=36239]="RGB8I",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.R8=33321]="R8",a[a.RG8=33323]="RG8",a[a.R16F=33325]="R16F",a[a.R32F=33326]="R32F",a[a.RG16F=33327]="RG16F",a[a.RG32F=33328]="RG32F",a[a.R8I=33329]="R8I",a[a.R8UI=33330]="R8UI",a[a.R16I=33331]="R16I",a[a.R16UI=33332]="R16UI",a[a.R32I=33333]="R32I",a[a.R32UI=33334]="R32UI",a[a.RG8I=33335]="RG8I",a[a.RG8UI=33336]="RG8UI",a[a.RG16I=33337]="RG16I",a[a.RG16UI=33338]="RG16UI",a[a.RG32I=33339]="RG32I",a[a.RG32UI=33340]="RG32UI",a[a.R8_SNORM=36756]="R8_SNORM",a[a.RG8_SNORM=36757]="RG8_SNORM",a[a.RGB8_SNORM=36758]="RGB8_SNORM",a[a.RGBA8_SNORM=36759]="RGBA8_SNORM",a[a.RGB10_A2UI=36975]="RGB10_A2UI",a[a.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",a[a.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.HALF_FLOAT=5131]="HALF_FLOAT",a[a.RG=33319]="RG",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",a[a.CURRENT_QUERY=34917]="CURRENT_QUERY",a[a.QUERY_RESULT=34918]="QUERY_RESULT",a[a.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",a[a.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",a[a.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",a[a.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",a[a.DRAW_BUFFER0=34853]="DRAW_BUFFER0",a[a.DRAW_BUFFER1=34854]="DRAW_BUFFER1",a[a.DRAW_BUFFER2=34855]="DRAW_BUFFER2",a[a.DRAW_BUFFER3=34856]="DRAW_BUFFER3",a[a.DRAW_BUFFER4=34857]="DRAW_BUFFER4",a[a.DRAW_BUFFER5=34858]="DRAW_BUFFER5",a[a.DRAW_BUFFER6=34859]="DRAW_BUFFER6",a[a.DRAW_BUFFER7=34860]="DRAW_BUFFER7",a[a.DRAW_BUFFER8=34861]="DRAW_BUFFER8",a[a.DRAW_BUFFER9=34862]="DRAW_BUFFER9",a[a.DRAW_BUFFER10=34863]="DRAW_BUFFER10",a[a.DRAW_BUFFER11=34864]="DRAW_BUFFER11",a[a.DRAW_BUFFER12=34865]="DRAW_BUFFER12",a[a.DRAW_BUFFER13=34866]="DRAW_BUFFER13",a[a.DRAW_BUFFER14=34867]="DRAW_BUFFER14",a[a.DRAW_BUFFER15=34868]="DRAW_BUFFER15",a[a.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",a[a.SAMPLER_3D=35679]="SAMPLER_3D",a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",a[a.MAX_SAMPLES=36183]="MAX_SAMPLES",a[a.SAMPLER_BINDING=35097]="SAMPLER_BINDING",a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",a[a.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",a[a.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",a[a.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",a[a.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",a[a.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",a[a.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",a[a.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",a[a.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",a[a.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",a[a.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",a[a.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",a[a.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",a[a.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",a[a.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",a[a.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",a[a.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",a[a.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",a[a.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",a[a.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",a[a.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",a[a.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",a[a.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",a[a.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",a[a.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",a[a.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",a[a.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",a[a.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",a[a.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",a[a.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",a[a.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",a[a.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",a[a.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",a[a.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",a[a.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",a[a.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",a[a.UNIFORM_TYPE=35383]="UNIFORM_TYPE",a[a.UNIFORM_SIZE=35384]="UNIFORM_SIZE",a[a.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",a[a.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",a[a.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",a[a.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",a[a.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",a[a.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",a[a.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",a[a.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",a[a.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",a[a.OBJECT_TYPE=37138]="OBJECT_TYPE",a[a.SYNC_CONDITION=37139]="SYNC_CONDITION",a[a.SYNC_STATUS=37140]="SYNC_STATUS",a[a.SYNC_FLAGS=37141]="SYNC_FLAGS",a[a.SYNC_FENCE=37142]="SYNC_FENCE",a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",a[a.UNSIGNALED=37144]="UNSIGNALED",a[a.SIGNALED=37145]="SIGNALED",a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",a[a.WAIT_FAILED=37149]="WAIT_FAILED",a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",a[a.COLOR=6144]="COLOR",a[a.DEPTH=6145]="DEPTH",a[a.STENCIL=6146]="STENCIL",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX",a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",a[a.STREAM_READ=35041]="STREAM_READ",a[a.STREAM_COPY=35042]="STREAM_COPY",a[a.STATIC_READ=35045]="STATIC_READ",a[a.STATIC_COPY=35046]="STATIC_COPY",a[a.DYNAMIC_READ=35049]="DYNAMIC_READ",a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY",a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",a[a.INVALID_INDEX=4294967295]="INVALID_INDEX",a[a.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",a[a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",a[a.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",a[a.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",a[a.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",a[a.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",a[a.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",a[a.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",a[a.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",a[a.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",a[a.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",a[a.RGBA32F_EXT=34836]="RGBA32F_EXT",a[a.RGB32F_EXT=34837]="RGB32F_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",a[a.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",a[a.MIN_EXT=32775]="MIN_EXT",a[a.MAX_EXT=32776]="MAX_EXT",a[a.SRGB_EXT=35904]="SRGB_EXT",a[a.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",a[a.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",a[a.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",a[a.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",a[a.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",a[a.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",a[a.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",a[a.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",a[a.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",a[a.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",a[a.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",a[a.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",a[a.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",a[a.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",a[a.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",a[a.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",a[a.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",a[a.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",a[a.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",a[a.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",a[a.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",a[a.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",a[a.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",a[a.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",a[a.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",a[a.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",a[a.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",a[a.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",a[a.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",a[a.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",a[a.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",a[a.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",a[a.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",a[a.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",a[a.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",a[a.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",a[a.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",a[a.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",a[a.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",a[a.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",a[a.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",a[a.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",a[a.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",a[a.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(On||(On={}));var Hs;(function(a){a[a.Buffer=0]="Buffer",a[a.Texture=1]="Texture",a[a.RenderTarget=2]="RenderTarget",a[a.Sampler=3]="Sampler",a[a.Program=4]="Program",a[a.Bindings=5]="Bindings",a[a.InputLayout=6]="InputLayout",a[a.RenderPipeline=7]="RenderPipeline",a[a.ComputePipeline=8]="ComputePipeline",a[a.Readback=9]="Readback",a[a.QueryPool=10]="QueryPool",a[a.RenderBundle=11]="RenderBundle"})(Hs||(Hs={}));var Ja;(function(a){a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS"})(Ja||(Ja={}));var P_;(function(a){a[a.CCW=2305]="CCW",a[a.CW=2304]="CW"})(P_||(P_={}));var dh;(function(a){a[a.NONE=0]="NONE",a[a.FRONT=1]="FRONT",a[a.BACK=2]="BACK",a[a.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(dh||(dh={}));var qa;(function(a){a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC=768]="SRC",a[a.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",a[a.DST=774]="DST",a[a.ONE_MINUS_DST=775]="ONE_MINUS_DST",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.CONST=32769]="CONST",a[a.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(qa||(qa={}));var uf;(function(a){a[a.ADD=32774]="ADD",a[a.SUBSTRACT=32778]="SUBSTRACT",a[a.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX"})(uf||(uf={}));var ol;(function(a){a[a.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",a[a.REPEAT=1]="REPEAT",a[a.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(ol||(ol={}));var Du;(function(a){a[a.POINT=0]="POINT",a[a.BILINEAR=1]="BILINEAR"})(Du||(Du={}));var Zc;(function(a){a[a.NO_MIP=0]="NO_MIP",a[a.NEAREST=1]="NEAREST",a[a.LINEAR=2]="LINEAR"})(Zc||(Zc={}));var xc;(function(a){a[a.POINTS=0]="POINTS",a[a.TRIANGLES=1]="TRIANGLES",a[a.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",a[a.LINES=3]="LINES",a[a.LINE_STRIP=4]="LINE_STRIP"})(xc||(xc={}));var Rl;(function(a){a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(Rl||(Rl={}));var c0;(function(a){a[a.STATIC=1]="STATIC",a[a.DYNAMIC=2]="DYNAMIC"})(c0||(c0={}));var pg;(function(a){a[a.VERTEX=1]="VERTEX",a[a.INSTANCE=2]="INSTANCE"})(pg||(pg={}));var rT;(function(a){a.LOADED="loaded"})(rT||(rT={}));var ss;(function(a){a[a.TEXTURE_2D=0]="TEXTURE_2D",a[a.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",a[a.TEXTURE_3D=2]="TEXTURE_3D",a[a.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(ss||(ss={}));var Yf;(function(a){a[a.SAMPLED=1]="SAMPLED",a[a.RENDER_TARGET=2]="RENDER_TARGET",a[a.STORAGE=4]="STORAGE"})(Yf||(Yf={}));var cf;(function(a){a[a.NONE=0]="NONE",a[a.RED=1]="RED",a[a.GREEN=2]="GREEN",a[a.BLUE=4]="BLUE",a[a.ALPHA=8]="ALPHA",a[a.RGB=7]="RGB",a[a.ALL=15]="ALL"})(cf||(cf={}));var Nu;(function(a){a[a.KEEP=7680]="KEEP",a[a.ZERO=0]="ZERO",a[a.REPLACE=7681]="REPLACE",a[a.INVERT=5386]="INVERT",a[a.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",a[a.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",a[a.INCREMENT_WRAP=34055]="INCREMENT_WRAP",a[a.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(Nu||(Nu={}));function G5(a,o,f,m){var T=ss.TEXTURE_2D,C=1,L=Yf.SAMPLED;return{dimension:T,format:a,width:o,height:f,depthOrArrayLayers:C,mipLevelCount:m,usage:L}}var Bu;(function(a){a[a.Float=0]="Float",a[a.UnfilterableFloat=1]="UnfilterableFloat",a[a.Uint=2]="Uint",a[a.Sint=3]="Sint",a[a.Depth=4]="Depth"})(Bu||(Bu={}));var cd;(function(a){a[a.LOWER_LEFT=0]="LOWER_LEFT",a[a.UPPER_LEFT=1]="UPPER_LEFT"})(cd||(cd={}));var vg;(function(a){a[a.NEGATIVE_ONE=0]="NEGATIVE_ONE",a[a.ZERO=1]="ZERO"})(vg||(vg={}));var cy;(function(a){a[a.OcclusionConservative=0]="OcclusionConservative"})(cy||(cy={}));var ni;(function(a){a[a.U8=1]="U8",a[a.U16=2]="U16",a[a.U32=3]="U32",a[a.S8=4]="S8",a[a.S16=5]="S16",a[a.S32=6]="S32",a[a.F16=7]="F16",a[a.F32=8]="F32",a[a.BC1=65]="BC1",a[a.BC2=66]="BC2",a[a.BC3=67]="BC3",a[a.BC4_UNORM=68]="BC4_UNORM",a[a.BC4_SNORM=69]="BC4_SNORM",a[a.BC5_UNORM=70]="BC5_UNORM",a[a.BC5_SNORM=71]="BC5_SNORM",a[a.U16_PACKED_5551=97]="U16_PACKED_5551",a[a.U16_PACKED_565=98]="U16_PACKED_565",a[a.D24=129]="D24",a[a.D32F=130]="D32F",a[a.D24S8=131]="D24S8",a[a.D32FS8=132]="D32FS8"})(ni||(ni={}));var Vi;(function(a){a[a.R=1]="R",a[a.RG=2]="RG",a[a.RGB=3]="RGB",a[a.RGBA=4]="RGBA",a[a.A=5]="A"})(Vi||(Vi={}));function jC(a){return a}var mo;(function(a){a[a.None=0]="None",a[a.Normalized=1]="Normalized",a[a.sRGB=2]="sRGB",a[a.Depth=4]="Depth",a[a.Stencil=8]="Stencil",a[a.RenderTarget=16]="RenderTarget",a[a.Luminance=32]="Luminance"})(mo||(mo={}));function wo(a,o,f){return a<<16|o<<8|f}var ar;(function(a){a[a.ALPHA=wo(ni.U8,Vi.A,mo.None)]="ALPHA",a[a.U8_LUMINANCE=wo(ni.U8,Vi.A,mo.Luminance)]="U8_LUMINANCE",a[a.F16_LUMINANCE=wo(ni.F16,Vi.A,mo.Luminance)]="F16_LUMINANCE",a[a.F32_LUMINANCE=wo(ni.F32,Vi.A,mo.Luminance)]="F32_LUMINANCE",a[a.F16_R=wo(ni.F16,Vi.R,mo.None)]="F16_R",a[a.F16_RG=wo(ni.F16,Vi.RG,mo.None)]="F16_RG",a[a.F16_RGB=wo(ni.F16,Vi.RGB,mo.None)]="F16_RGB",a[a.F16_RGBA=wo(ni.F16,Vi.RGBA,mo.None)]="F16_RGBA",a[a.F32_R=wo(ni.F32,Vi.R,mo.None)]="F32_R",a[a.F32_RG=wo(ni.F32,Vi.RG,mo.None)]="F32_RG",a[a.F32_RGB=wo(ni.F32,Vi.RGB,mo.None)]="F32_RGB",a[a.F32_RGBA=wo(ni.F32,Vi.RGBA,mo.None)]="F32_RGBA",a[a.U8_R=wo(ni.U8,Vi.R,mo.None)]="U8_R",a[a.U8_R_NORM=wo(ni.U8,Vi.R,mo.Normalized)]="U8_R_NORM",a[a.U8_RG=wo(ni.U8,Vi.RG,mo.None)]="U8_RG",a[a.U8_RG_NORM=wo(ni.U8,Vi.RG,mo.Normalized)]="U8_RG_NORM",a[a.U8_RGB=wo(ni.U8,Vi.RGB,mo.None)]="U8_RGB",a[a.U8_RGB_NORM=wo(ni.U8,Vi.RGB,mo.Normalized)]="U8_RGB_NORM",a[a.U8_RGB_SRGB=wo(ni.U8,Vi.RGB,mo.sRGB|mo.Normalized)]="U8_RGB_SRGB",a[a.U8_RGBA=wo(ni.U8,Vi.RGBA,mo.None)]="U8_RGBA",a[a.U8_RGBA_NORM=wo(ni.U8,Vi.RGBA,mo.Normalized)]="U8_RGBA_NORM",a[a.U8_RGBA_SRGB=wo(ni.U8,Vi.RGBA,mo.sRGB|mo.Normalized)]="U8_RGBA_SRGB",a[a.U16_R=wo(ni.U16,Vi.R,mo.None)]="U16_R",a[a.U16_R_NORM=wo(ni.U16,Vi.R,mo.Normalized)]="U16_R_NORM",a[a.U16_RG_NORM=wo(ni.U16,Vi.RG,mo.Normalized)]="U16_RG_NORM",a[a.U16_RGBA_NORM=wo(ni.U16,Vi.RGBA,mo.Normalized)]="U16_RGBA_NORM",a[a.U16_RGBA=wo(ni.U16,Vi.RGBA,mo.None)]="U16_RGBA",a[a.U16_RGB=wo(ni.U16,Vi.RGB,mo.None)]="U16_RGB",a[a.U16_RG=wo(ni.U16,Vi.RG,mo.None)]="U16_RG",a[a.U32_R=wo(ni.U32,Vi.R,mo.None)]="U32_R",a[a.U32_RG=wo(ni.U32,Vi.RG,mo.None)]="U32_RG",a[a.U32_RGB=wo(ni.U32,Vi.RGB,mo.None)]="U32_RGB",a[a.U32_RGBA=wo(ni.U32,Vi.RGBA,mo.None)]="U32_RGBA",a[a.S8_R=wo(ni.S8,Vi.R,mo.None)]="S8_R",a[a.S8_R_NORM=wo(ni.S8,Vi.R,mo.Normalized)]="S8_R_NORM",a[a.S8_RG_NORM=wo(ni.S8,Vi.RG,mo.Normalized)]="S8_RG_NORM",a[a.S8_RGB_NORM=wo(ni.S8,Vi.RGB,mo.Normalized)]="S8_RGB_NORM",a[a.S8_RGBA_NORM=wo(ni.S8,Vi.RGBA,mo.Normalized)]="S8_RGBA_NORM",a[a.S16_R=wo(ni.S16,Vi.R,mo.None)]="S16_R",a[a.S16_RG=wo(ni.S16,Vi.RG,mo.None)]="S16_RG",a[a.S16_RG_NORM=wo(ni.S16,Vi.RG,mo.Normalized)]="S16_RG_NORM",a[a.S16_RGB_NORM=wo(ni.S16,Vi.RGB,mo.Normalized)]="S16_RGB_NORM",a[a.S16_RGBA=wo(ni.S16,Vi.RGBA,mo.None)]="S16_RGBA",a[a.S16_RGBA_NORM=wo(ni.S16,Vi.RGBA,mo.Normalized)]="S16_RGBA_NORM",a[a.S32_R=wo(ni.S32,Vi.R,mo.None)]="S32_R",a[a.S32_RG=wo(ni.S32,Vi.RG,mo.None)]="S32_RG",a[a.S32_RGB=wo(ni.S32,Vi.RGB,mo.None)]="S32_RGB",a[a.S32_RGBA=wo(ni.S32,Vi.RGBA,mo.None)]="S32_RGBA",a[a.U16_RGBA_5551=wo(ni.U16_PACKED_5551,Vi.RGBA,mo.Normalized)]="U16_RGBA_5551",a[a.U16_RGB_565=wo(ni.U16_PACKED_565,Vi.RGB,mo.Normalized)]="U16_RGB_565",a[a.BC1=wo(ni.BC1,Vi.RGBA,mo.Normalized)]="BC1",a[a.BC1_SRGB=wo(ni.BC1,Vi.RGBA,mo.Normalized|mo.sRGB)]="BC1_SRGB",a[a.BC2=wo(ni.BC2,Vi.RGBA,mo.Normalized)]="BC2",a[a.BC2_SRGB=wo(ni.BC2,Vi.RGBA,mo.Normalized|mo.sRGB)]="BC2_SRGB",a[a.BC3=wo(ni.BC3,Vi.RGBA,mo.Normalized)]="BC3",a[a.BC3_SRGB=wo(ni.BC3,Vi.RGBA,mo.Normalized|mo.sRGB)]="BC3_SRGB",a[a.BC4_UNORM=wo(ni.BC4_UNORM,Vi.R,mo.Normalized)]="BC4_UNORM",a[a.BC4_SNORM=wo(ni.BC4_SNORM,Vi.R,mo.Normalized)]="BC4_SNORM",a[a.BC5_UNORM=wo(ni.BC5_UNORM,Vi.RG,mo.Normalized)]="BC5_UNORM",a[a.BC5_SNORM=wo(ni.BC5_SNORM,Vi.RG,mo.Normalized)]="BC5_SNORM",a[a.D24=wo(ni.D24,Vi.R,mo.Depth)]="D24",a[a.D24_S8=wo(ni.D24S8,Vi.RG,mo.Depth|mo.Stencil)]="D24_S8",a[a.D32F=wo(ni.D32F,Vi.R,mo.Depth)]="D32F",a[a.D32F_S8=wo(ni.D32FS8,Vi.RG,mo.Depth|mo.Stencil)]="D32F_S8",a[a.U8_RGB_RT=wo(ni.U8,Vi.RGB,mo.RenderTarget|mo.Normalized)]="U8_RGB_RT",a[a.U8_RGBA_RT=wo(ni.U8,Vi.RGBA,mo.RenderTarget|mo.Normalized)]="U8_RGBA_RT",a[a.U8_RGBA_RT_SRGB=wo(ni.U8,Vi.RGBA,mo.RenderTarget|mo.Normalized|mo.sRGB)]="U8_RGBA_RT_SRGB"})(ar||(ar={}));function z1(a){return a>>>8&255}function W0(a){return a>>>16&255}function Yd(a){return a&255}function iT(a){switch(a){case ni.F32:case ni.U32:case ni.S32:return 4;case ni.U16:case ni.S16:case ni.F16:return 2;case ni.U8:case ni.S8:return 1;default:throw new Error("whoops")}}function oT(a){return iT(W0(a))}function Z5(a){return z1(a)}function pm(a){var o=iT(W0(a)),f=z1(a);return o*f}function Ua(a,o){return a&4294967040|o}function VC(a,o){return a&4294902015|o<<8}function aT(a){var o=Yd(a);if(o&mo.Depth)return Bu.Depth;if(o&mo.Normalized)return Bu.Float;var f=W0(a);if(f===ni.F16||f===ni.F32)return Bu.Float;if(f===ni.U8||f===ni.U16||f===ni.U32)return Bu.Uint;if(f===ni.S8||f===ni.S16||f===ni.S32)return Bu.Sint;throw new Error("whoops")}function Va(a,o){if(o===void 0&&(o=""),!a)throw new Error("Assert fail: ".concat(o))}function Kd(a){if(a!=null)return a;throw new Error("Missing object")}function Qx(a,o){return a.r===o.r&&a.g===o.g&&a.b===o.b&&a.a===o.a}function sT(a,o){a.r=o.r,a.g=o.g,a.b=o.b,a.a=o.a}function lT(a){var o=a.r,f=a.g,m=a.b,T=a.a;return{r:o,g:f,b:m,a:T}}function I_(a,o,f,m){return m===void 0&&(m=1),{r:a,g:o,b:f,a:m}}var U1=I_(0,0,0,0),X5=I_(0,0,0,1),HC=I_(1,1,1,0),$5=I_(1,1,1,1),fy=!0;function Y5(a,o){o===void 0&&(o=fy),o&&(a[10]=-a[10],a[14]=-a[14])}function K5(a,o){o===void 0&&(o=fy),o&&(a[10]=-a[10],a[14]=-a[14]+1)}function WC(a,o){if(o===void 0&&(o=fy),o)switch(a){case Ja.LESS:return Ja.GREATER;case Ja.LEQUAL:return Ja.GEQUAL;case Ja.GEQUAL:return Ja.LEQUAL;case Ja.GREATER:return Ja.LESS;default:return a}else return a}function qr(a,o){return o===void 0&&(o=fy),o?1-a:a}function q5(a,o){return o===void 0&&(o=fy),o?-a:a}function Q5(a,o,f,m){if(m===void 0&&(m=fy),f=WC(f,m),f===Ja.LESS)return a<o;if(f===Ja.LEQUAL)return a<=o;if(f===Ja.GREATER)return a>o;if(f===Ja.GEQUAL)return a>=o;throw new Error("whoops")}function j1(a){return!!(a&&!(a&a-1))}function Sv(a,o){return a!=null?a:o}function J5(a){return a===void 0?null:a}function GC(a,o,f){a.length=o,a.fill(f)}function L_(a,o){var f=o-1;return a+f&~f}function e4(a,o){return((a+o-1)/o|0)*o}function ZC(a,o,f){for(var m=0,T=a.length;m<T;){var C=m+(T-m>>>1),L=f(o,a[C]);L<0?T=C:m=C+1}return m}function gl(a,o,f){var m=ZC(a,o,f);a.splice(m,0,o)}function XC(a,o,f){return f?a|=o:a&=~o,a}function Tv(a,o){for(var f=new Array(a),m=0;m<a;m++)f[m]=o();return f}function $C(a,o){o===void 0&&(o=1);var f=a.split(`
`);return f.map(function(m,T){return"".concat(YC(""+(o+T),4," "),"  ").concat(m)}).join(`
`)}function YC(a,o,f){for(f===void 0&&(f="0");a.length<o;)a="".concat(f).concat(a);return a}function t4(a,o){for(var f=[],m=a;m<a+o;m++)f.push(m);return f}function uT(a,o){a.blendDstFactor=o.blendDstFactor,a.blendSrcFactor=o.blendSrcFactor,a.blendMode=o.blendMode}function D_(a,o){return a===void 0&&(a={}),a.compare=o.compare,a.depthFailOp=o.depthFailOp,a.passOp=o.passOp,a.failOp=o.failOp,a.mask=o.mask,a}function Kf(a,o){return a===void 0&&(a={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),uT(a.rgbBlendState,o.rgbBlendState),uT(a.alphaBlendState,o.alphaBlendState),a.channelWriteMask=o.channelWriteMask,a}function G0(a,o){a.length!==o.length&&(a.length=o.length);for(var f=0;f<o.length;f++)a[f]=Kf(a[f],o[f])}function V1(a,o){o.attachmentsState!==void 0&&G0(a.attachmentsState,o.attachmentsState),a.blendConstant&&o.blendConstant&&sT(a.blendConstant,o.blendConstant),a.depthCompare=Sv(o.depthCompare,a.depthCompare),a.depthWrite=Sv(o.depthWrite,a.depthWrite),a.stencilWrite=Sv(o.stencilWrite,a.stencilWrite),a.stencilFront&&o.stencilFront&&D_(a.stencilFront,o.stencilFront),a.stencilBack&&o.stencilBack&&D_(a.stencilBack,o.stencilBack),a.cullMode=Sv(o.cullMode,a.cullMode),a.frontFace=Sv(o.frontFace,a.frontFace),a.polygonOffset=Sv(o.polygonOffset,a.polygonOffset),a.polygonOffsetFactor=Sv(o.polygonOffsetFactor,a.polygonOffsetFactor),a.polygonOffsetUnits=Sv(o.polygonOffsetUnits,a.polygonOffsetUnits)}function vm(a){var o=Object.assign({},a);return o.attachmentsState=[],G0(o.attachmentsState,a.attachmentsState),o.blendConstant=o.blendConstant&&lT(o.blendConstant),o.stencilFront=D_(void 0,a.stencilFront),o.stencilBack=D_(void 0,a.stencilBack),o}function ff(a,o){o.channelWriteMask!==void 0&&(a.channelWriteMask=o.channelWriteMask),o.rgbBlendMode!==void 0&&(a.rgbBlendState.blendMode=o.rgbBlendMode),o.alphaBlendMode!==void 0&&(a.alphaBlendState.blendMode=o.alphaBlendMode),o.rgbBlendSrcFactor!==void 0&&(a.rgbBlendState.blendSrcFactor=o.rgbBlendSrcFactor),o.alphaBlendSrcFactor!==void 0&&(a.alphaBlendState.blendSrcFactor=o.alphaBlendSrcFactor),o.rgbBlendDstFactor!==void 0&&(a.rgbBlendState.blendDstFactor=o.rgbBlendDstFactor),o.alphaBlendDstFactor!==void 0&&(a.alphaBlendState.blendDstFactor=o.alphaBlendDstFactor)}var N_={blendMode:uf.ADD,blendSrcFactor:qa.ONE,blendDstFactor:qa.ZERO},wv={attachmentsState:[{channelWriteMask:cf.ALL,rgbBlendState:N_,alphaBlendState:N_}],blendConstant:lT(U1),depthWrite:!0,depthCompare:Ja.LEQUAL,stencilWrite:!1,stencilFront:{compare:Ja.ALWAYS,passOp:Nu.KEEP,depthFailOp:Nu.KEEP,failOp:Nu.KEEP},stencilBack:{compare:Ja.ALWAYS,passOp:Nu.KEEP,depthFailOp:Nu.KEEP,failOp:Nu.KEEP},cullMode:dh.NONE,frontFace:P_.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};function hy(a,o){a===void 0&&(a=null),o===void 0&&(o=wv);var f=vm(o);return a!==null&&V1(f,a),f}var fd=hy({depthCompare:Ja.ALWAYS,depthWrite:!1},wv);function H1(a,o){return a.attachmentsState===void 0&&(a.attachmentsState=[],G0(a.attachmentsState,wv.attachmentsState)),ff(a.attachmentsState[0],o),a}var W1={texture:null,sampler:null,formatKind:Bu.Float,dimension:ss.TEXTURE_2D};function hd(a,o,f){if(a.length!==o.length)return!1;for(var m=0;m<a.length;m++)if(!f(a[m],o[m]))return!1;return!0}function hf(a,o){for(var f=Array(a.length),m=0;m<a.length;m++)f[m]=o(a[m]);return f}function KC(a,o){return a.texture===o.texture&&a.binding===o.binding}function Jx(a,o){return a.buffer===o.buffer&&a.size===o.size&&a.binding===o.binding&&a.offset===o.offset}function qC(a,o){return a===null?o===null:o===null?!1:a.sampler===o.sampler&&a.texture===o.texture&&a.dimension===o.dimension&&a.formatKind===o.formatKind&&a.comparison===o.comparison}function QC(a,o){return a.samplerBindings=a.samplerBindings||[],a.uniformBufferBindings=a.uniformBufferBindings||[],a.storageBufferBindings=a.storageBufferBindings||[],a.storageTextureBindings=a.storageTextureBindings||[],o.samplerBindings=o.samplerBindings||[],o.uniformBufferBindings=o.uniformBufferBindings||[],o.storageBufferBindings=o.storageBufferBindings||[],o.storageTextureBindings=o.storageTextureBindings||[],!(a.samplerBindings.length!==o.samplerBindings.length||!hd(a.samplerBindings,o.samplerBindings,qC)||!hd(a.uniformBufferBindings,o.uniformBufferBindings,Jx)||!hd(a.storageBufferBindings,o.storageBufferBindings,Jx)||!hd(a.storageTextureBindings,o.storageTextureBindings,KC))}function cT(a,o){return a.blendMode==o.blendMode&&a.blendSrcFactor===o.blendSrcFactor&&a.blendDstFactor===o.blendDstFactor}function JC(a,o){return!(!cT(a.rgbBlendState,o.rgbBlendState)||!cT(a.alphaBlendState,o.alphaBlendState)||a.channelWriteMask!==o.channelWriteMask)}function G1(a,o){return a.compare==o.compare&&a.depthFailOp===o.depthFailOp&&a.failOp===o.failOp&&a.passOp===o.passOp&&a.mask===o.mask}function e3(a,o){return!hd(a.attachmentsState,o.attachmentsState,JC)||a.blendConstant&&o.blendConstant&&!Qx(a.blendConstant,o.blendConstant)||a.stencilFront&&o.stencilFront&&!G1(a.stencilFront,o.stencilFront)||a.stencilBack&&o.stencilBack&&!G1(a.stencilBack,o.stencilBack)?!1:a.depthCompare===o.depthCompare&&a.depthWrite===o.depthWrite&&a.stencilWrite===o.stencilWrite&&a.cullMode===o.cullMode&&a.frontFace===o.frontFace&&a.polygonOffset===o.polygonOffset&&a.polygonOffsetFactor===o.polygonOffsetFactor&&a.polygonOffsetUnits===o.polygonOffsetUnits}function t3(a,o){return a.id===o.id}function dd(a,o){return a===o}function fT(a,o){return!(a.topology!==o.topology||a.inputLayout!==o.inputLayout||a.sampleCount!==o.sampleCount||a.megaStateDescriptor&&o.megaStateDescriptor&&!e3(a.megaStateDescriptor,o.megaStateDescriptor)||!t3(a.program,o.program)||!hd(a.colorAttachmentFormats,o.colorAttachmentFormats,dd)||a.depthStencilAttachmentFormat!==o.depthStencilAttachmentFormat)}function n3(a,o){return a.offset===o.offset&&a.shaderLocation===o.shaderLocation&&a.format===o.format&&a.divisor===o.divisor}function r3(a,o){return(0,$d.Z)(a)?(0,$d.Z)(o):(0,$d.Z)(o)?!1:a.arrayStride===o.arrayStride&&a.stepMode===o.stepMode&&hd(a.attributes,o.attributes,n3)}function e2(a,o){return!(a.indexBufferFormat!==o.indexBufferFormat||!hd(a.vertexBufferDescriptors,o.vertexBufferDescriptors,r3)||!t3(a.program,o.program))}function hT(a,o){return a.addressModeU===o.addressModeU&&a.addressModeV===o.addressModeV&&a.minFilter===o.minFilter&&a.magFilter===o.magFilter&&a.mipmapFilter===o.mipmapFilter&&a.lodMinClamp===o.lodMinClamp&&a.lodMaxClamp===o.lodMaxClamp&&a.maxAnisotropy===o.maxAnisotropy&&a.compareFunction===o.compareFunction}function i3(a){var o=a.sampler,f=a.texture,m=a.dimension,T=a.formatKind,C=a.comparison;return{sampler:o,texture:f,dimension:m,formatKind:T,comparison:C}}function dT(a){var o=a.buffer,f=a.size,m=a.binding,T=a.offset;return{binding:m,buffer:o,offset:T,size:f}}function o3(a){var o=a.binding,f=a.texture;return{binding:o,texture:f}}function pT(a){var o=a.samplerBindings&&hf(a.samplerBindings,i3),f=a.uniformBufferBindings&&hf(a.uniformBufferBindings,dT),m=a.storageBufferBindings&&hf(a.storageBufferBindings,dT),T=a.storageTextureBindings&&hf(a.storageTextureBindings,o3);return{samplerBindings:o,uniformBufferBindings:f,storageBufferBindings:m,storageTextureBindings:T,pipeline:a.pipeline}}function a3(a){var o=a.inputLayout,f=a.program,m=a.topology,T=a.megaStateDescriptor&&vm(a.megaStateDescriptor),C=a.colorAttachmentFormats.slice(),L=a.depthStencilAttachmentFormat,F=a.sampleCount;return{inputLayout:o,megaStateDescriptor:T,program:f,topology:m,colorAttachmentFormats:C,depthStencilAttachmentFormat:L,sampleCount:F}}function vT(a){var o=a.shaderLocation,f=a.format,m=a.offset,T=a.divisor;return{shaderLocation:o,format:f,offset:m,divisor:T}}function s3(a){if((0,$d.Z)(a))return a;var o=a.arrayStride,f=a.stepMode,m=hf(a.attributes,vT);return{arrayStride:o,stepMode:f,attributes:m}}function dy(a){var o=hf(a.vertexBufferDescriptors,s3),f=a.indexBufferFormat,m=a.program;return{vertexBufferDescriptors:o,indexBufferFormat:f,program:m}}var ws,n4=/([^[]*)(\[[0-9]+\])?/;function Z1(a){if(a[a.length-1]!=="]")return{name:a,length:1,isArray:!1};var o=a.match(n4);if(!o||o.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(a));return{name:o[1],length:Number(o[2])||1,isArray:!!o[2]}}function lc(){var a=null;return function(o,f,m){var T=a!==m;return T&&(o.uniform1i(f,m),a=m),T}}function Tu(a,o,f,m){var T=null,C=null;return function(L,F,V){var ae=o(V,f),Ae=ae.length,Ce=!1;if(T===null)T=new Float32Array(Ae),C=Ae,Ce=!0;else{Va(C===Ae,"Uniform length cannot change.");for(var Ye=0;Ye<Ae;++Ye)if(ae[Ye]!==T[Ye]){Ce=!0;break}}return Ce&&(m(L,a,F,ae),T.set(ae)),Ce}}function ph(a,o,f,m){a[o](f,m)}function Av(a,o,f,m){a[o](f,!1,m)}var l3={},u3={},c3={},t2=[0];function B_(a,o,f,m){o===1&&typeof a=="boolean"&&(a=a?1:0),Number.isFinite(a)&&(t2[0]=a,a=t2);var T=a.length;if(a instanceof f)return a;var C=m[T];C||(C=new f(T),m[T]=C);for(var L=0;L<T;L++)C[L]=a[L];return C}function Fh(a,o){return B_(a,o,Float32Array,l3)}function mm(a,o){return B_(a,o,Int32Array,u3)}function py(a,o){return B_(a,o,Uint32Array,c3)}var n2=(ws={},ws[On.FLOAT]=Tu.bind(null,"uniform1fv",Fh,1,ph),ws[On.FLOAT_VEC2]=Tu.bind(null,"uniform2fv",Fh,2,ph),ws[On.FLOAT_VEC3]=Tu.bind(null,"uniform3fv",Fh,3,ph),ws[On.FLOAT_VEC4]=Tu.bind(null,"uniform4fv",Fh,4,ph),ws[On.INT]=Tu.bind(null,"uniform1iv",mm,1,ph),ws[On.INT_VEC2]=Tu.bind(null,"uniform2iv",mm,2,ph),ws[On.INT_VEC3]=Tu.bind(null,"uniform3iv",mm,3,ph),ws[On.INT_VEC4]=Tu.bind(null,"uniform4iv",mm,4,ph),ws[On.BOOL]=Tu.bind(null,"uniform1iv",mm,1,ph),ws[On.BOOL_VEC2]=Tu.bind(null,"uniform2iv",mm,2,ph),ws[On.BOOL_VEC3]=Tu.bind(null,"uniform3iv",mm,3,ph),ws[On.BOOL_VEC4]=Tu.bind(null,"uniform4iv",mm,4,ph),ws[On.FLOAT_MAT2]=Tu.bind(null,"uniformMatrix2fv",Fh,4,Av),ws[On.FLOAT_MAT3]=Tu.bind(null,"uniformMatrix3fv",Fh,9,Av),ws[On.FLOAT_MAT4]=Tu.bind(null,"uniformMatrix4fv",Fh,16,Av),ws[On.UNSIGNED_INT]=Tu.bind(null,"uniform1uiv",py,1,ph),ws[On.UNSIGNED_INT_VEC2]=Tu.bind(null,"uniform2uiv",py,2,ph),ws[On.UNSIGNED_INT_VEC3]=Tu.bind(null,"uniform3uiv",py,3,ph),ws[On.UNSIGNED_INT_VEC4]=Tu.bind(null,"uniform4uiv",py,4,ph),ws[On.FLOAT_MAT2x3]=Tu.bind(null,"uniformMatrix2x3fv",Fh,6,Av),ws[On.FLOAT_MAT2x4]=Tu.bind(null,"uniformMatrix2x4fv",Fh,8,Av),ws[On.FLOAT_MAT3x2]=Tu.bind(null,"uniformMatrix3x2fv",Fh,6,Av),ws[On.FLOAT_MAT3x4]=Tu.bind(null,"uniformMatrix3x4fv",Fh,12,Av),ws[On.FLOAT_MAT4x2]=Tu.bind(null,"uniformMatrix4x2fv",Fh,8,Av),ws[On.FLOAT_MAT4x3]=Tu.bind(null,"uniformMatrix4x3fv",Fh,12,Av),ws[On.SAMPLER_2D]=lc,ws[On.SAMPLER_CUBE]=lc,ws[On.SAMPLER_3D]=lc,ws[On.SAMPLER_2D_SHADOW]=lc,ws[On.SAMPLER_2D_ARRAY]=lc,ws[On.SAMPLER_2D_ARRAY_SHADOW]=lc,ws[On.SAMPLER_CUBE_SHADOW]=lc,ws[On.INT_SAMPLER_2D]=lc,ws[On.INT_SAMPLER_3D]=lc,ws[On.INT_SAMPLER_CUBE]=lc,ws[On.INT_SAMPLER_2D_ARRAY]=lc,ws[On.UNSIGNED_INT_SAMPLER_2D]=lc,ws[On.UNSIGNED_INT_SAMPLER_3D]=lc,ws[On.UNSIGNED_INT_SAMPLER_CUBE]=lc,ws[On.UNSIGNED_INT_SAMPLER_2D_ARRAY]=lc,ws);function mT(a,o,f){var m=n2[f.type];if(!m)throw new Error("Unknown GLSL uniform type ".concat(f.type));return m().bind(null,a,o)}var f3={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function h3(a){return Object.prototype.toString.call(a)in f3}function F_(a,o){return"#define ".concat(a," ").concat(o)}function p3(a){var o={};return a.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(f,m,T){var C=Number(T);return o[m]=isNaN(C)?T:C,""}),o}function v3(a,o){var f=[];return a.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(m,T,C){var L=Number(T);return f.push({location:isNaN(L)?o[T]:L,name:C}),""}),f}function X1(a){var o=[],f=[];return a.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(m,T,C){var L=[];return C.trim().replace(`\r
`,`
`).split(`
`).forEach(function(F){var V=__read(F.trim().split(/\s+/),2),ae=V[0],Ae=V[1];L.push({type:ae.trim(),name:Ae.replace(";","").trim()})}),f.push({type:T.trim(),uniforms:L}),""}),a.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(m,T){return T.trim().replace(`\r
`,`
`).split(`
`).forEach(function(C){var L=C.trim().split(" "),F=L[0]||"",V=L[1]||"",ae=V.indexOf("[")>-1;if(V=V.replace(";","").replace("[","").trim(),!F.startsWith("#")){if(F){var Ae=f.find(function(Bt){return F===Bt.type});if(Ae)if(ae)for(var Ce=function(Bt){Ae.uniforms.forEach(function(rn){o.push("".concat(V,"[").concat(Bt,"].").concat(rn.name))})},Ye=0;Ye<5;Ye++)Ce(Ye);else Ae.uniforms.forEach(function(Bt){o.push("".concat(V,".").concat(Bt.name))})}V&&o.push(V)}}),""}),o}function k_(a){if(a===void 0)return null;var o=/binding\s*=\s*(\d+)/.exec(a);if(o!==null){var f=parseInt(o[1],10);if(!Number.isNaN(f))return f}return null}function gT(a){var o="",f=a;return[f,o]}function Ov(a,o,f,m,T){var C;m===void 0&&(m=null),T===void 0&&(T=!0);var L=a.glslVersion==="#version 100",F=o==="frag"&&((C=f.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||C===void 0?void 0:C.length)>1,V=f.replace(`\r
`,`
`).split(`
`).map(function(no){return no.replace(/[/][/].*$/,"")}).filter(function(no){var Gr=!no||/^\s+$/.test(no);return!Gr}),ae="";m!==null&&(ae=Object.keys(m).map(function(no){return F_(no,m[no])}).join(`
`));var Ae=V.find(function(no){return no.startsWith("precision")})||"precision mediump float;",Ce=T?V.filter(function(no){return!no.startsWith("precision")}).join(`
`):V.join(`
`),Ye="";if(a.viewportOrigin===cd.UPPER_LEFT&&(Ye+="".concat(F_("VIEWPORT_ORIGIN_TL","1"),`
`)),a.clipSpaceNearZ===vg.ZERO&&(Ye+="".concat(F_("CLIPSPACE_NEAR_ZERO","1"),`
`)),a.explicitBindingLocations){var Bt=0,rn=0,Sn=0;Ce=Ce.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(no,Gr,ro,Da){var is=ro?"".concat(ro,", "):"";return"layout(".concat(is,"set = ").concat(Bt,", binding = ").concat(rn++,") uniform ").concat(Da)}),Bt++,rn=0,Va(a.separateSamplerTextures),Ce=Ce.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(no,Gr,ro,Da,is){var Qo=k_(ro);Qo===null&&(Qo=rn++);var ps=(0,To.CR)(gT(Da),2),es=ps[0],ls=ps[1];return o==="frag"?`
layout(set = `.concat(Bt,", binding = ").concat(Qo*2+0,") uniform texture").concat(es," T_").concat(is,`;
layout(set = `).concat(Bt,", binding = ").concat(Qo*2+1,") uniform sampler").concat(ls," S_").concat(is,";").trim():""}),Ce=Ce.replace(o==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(no,Gr){return"layout(location = ".concat(Sn++,") ").concat(Gr)}),Ye+="".concat(F_("gl_VertexID","gl_VertexIndex"),`
`),Ye+="".concat(F_("gl_InstanceID","gl_InstanceIndex"),`
`),Ae=Ae.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var lr=0;Ce=Ce.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(no,Gr,ro,Da,is){var Qo=k_(ro);return Qo===null&&(Qo=lr++),"uniform sampler".concat(Da," ").concat(is,"; // BINDING=").concat(Qo)})}if(Ce=Ce.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(no,Gr,ro){return"SAMPLER_".concat(Gr,"(P_").concat(ro,")")}),Ce=Ce.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(no,Gr,ro){return"PP_SAMPLER_".concat(Gr,"(P_").concat(ro,")")}),Ce=Ce.replace(/\bPU_TEXTURE\((.*?)\)/g,function(no,Gr){return"TEXTURE(P_".concat(Gr,")")}),a.separateSamplerTextures)Ce=Ce.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(no,Gr,ro){var Da=(0,To.CR)(gT(Gr),2),is=Da[0],Qo=Da[1];return"texture".concat(is," T_P_").concat(ro,", sampler").concat(Qo," S_P_").concat(ro)}),Ce=Ce.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(no,Gr,ro){return"T_".concat(ro,", S_").concat(ro)}),Ce=Ce.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(no,Gr,ro){return"sampler".concat(Gr,"(T_").concat(ro,", S_").concat(ro,")")}),Ce=Ce.replace(/\bTEXTURE\((.*?)\)/g,function(no,Gr){return"T_".concat(Gr)});else{var Br=[];Ce=Ce.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(no,Gr,ro){return"sampler".concat(Gr," P_").concat(ro)}),Ce=Ce.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(no,Gr,ro){return ro}),Ce=Ce.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(no,Gr,ro){return Br.push([ro,Gr]),ro}),L&&Br.forEach(function(no){var Gr=(0,To.CR)(no,2),ro=Gr[0],Da=Gr[1];Ce=Ce.replace(new RegExp("texture\\(".concat(ro),"g"),function(){return"texture".concat(Da,"(").concat(ro)})}),Ce=Ce.replace(/\bTEXTURE\((.*?)\)/g,function(no,Gr){return Gr})}var Er="".concat(L?"":a.glslVersion,`
`).concat(L&&F?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(L&&o==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(T?Ae:"",`
`).concat(Ye||"").concat(ae?ae+`
`:"",`
`).concat(Ce,`
`).trim();if(a.explicitBindingLocations&&o==="frag"&&(Er=Er.replace(/^\b(out)\b/g,function(no,Gr){return"layout(location = 0) ".concat(Gr)})),L){if(o==="frag"&&(Er=Er.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(no,Gr,ro){return"varying ".concat(Gr," ").concat(ro,`;
`)})),o==="vert"&&(Er=Er.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(no,Gr,ro){return"varying ".concat(Gr," ").concat(ro,`;
`)}),Er=Er.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(no,Gr,ro){return"attribute ".concat(Gr," ").concat(ro,`;
`)})),Er=Er.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(no,Gr){return Gr.trim().replace(/^.*$/gm,function(ro){var Da=ro.trim();return Da.startsWith("#")?Da:ro?"uniform ".concat(Da):""})}),o==="frag")if(F){var ui=[];Er=Er.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(no,Gr){return ui.push(Gr),"vec4 ".concat(Gr,`;
`)});var ji=Er.lastIndexOf("}");Er=Er.substring(0,ji)+`
    `.concat(ui.map(function(no,Gr){return"gl_FragData[".concat(Gr,"] = ").concat(no,`;
    `)}).join(`
`))+Er.substring(ji)}else{var Po;if(Er=Er.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(no,Gr,ro){return Po=ro,"".concat(Gr," ").concat(ro,`;
`)}),Po){var ji=Er.lastIndexOf("}");Er=Er.substring(0,ji)+`
  gl_FragColor = vec4(`.concat(Po,`);
`)+Er.substring(ji)}}Er=Er.replace(/^\s*layout\((.*)\)/gm,"")}return Er}function m3(a,o,f,m){m===void 0&&(m=null);var T=Ov(a,"vert",o,m),C=Ov(a,"frag",f,m);return{vert:o,frag:f,preprocessedVert:T,preprocessedFrag:C}}var qd=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=a.call(this)||this;return C.id=m,C.device=T,C.device.resourceCreationTracker!==null&&C.device.resourceCreationTracker.trackResourceCreated(C),C}return o.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},o}(hh),$1=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;L.type=Hs.Bindings;var F=C.uniformBufferBindings,V=C.samplerBindings;return L.uniformBufferBindings=F||[],L.samplerBindings=V||[],L.bindingLayouts=L.createBindingLayouts(),L}return o.prototype.createBindingLayouts=function(){var f=0,m=0,T=[],C=this.uniformBufferBindings.length,L=this.samplerBindings.length;return T.push({firstUniformBuffer:f,numUniformBuffers:C,firstSampler:m,numSamplers:L}),f+=C,m+=L,{numUniformBuffers:f,numSamplers:m,bindingLayoutTables:T}},o}(qd);function Ho(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}function yT(a){var o=W0(a);switch(o){case ni.BC1:case ni.BC2:case ni.BC3:case ni.BC4_UNORM:case ni.BC4_SNORM:case ni.BC5_UNORM:case ni.BC5_SNORM:return!0;default:return!1}}function _T(a){var o=Yd(a);if(o&mo.Normalized)return!1;var f=W0(a);return f===ni.S8||f===ni.S16||f===ni.S32||f===ni.U8||f===ni.U16||f===ni.U32}function r2(a){switch(a){case c0.STATIC:return On.STATIC_DRAW;case c0.DYNAMIC:return On.DYNAMIC_DRAW}}function bT(a){if(a&Rl.INDEX)return On.ELEMENT_ARRAY_BUFFER;if(a&Rl.VERTEX)return On.ARRAY_BUFFER;if(a&Rl.UNIFORM)return On.UNIFORM_BUFFER}function Y1(a){switch(a){case xc.TRIANGLES:return On.TRIANGLES;case xc.POINTS:return On.POINTS;case xc.TRIANGLE_STRIP:return On.TRIANGLE_STRIP;case xc.LINES:return On.LINES;case xc.LINE_STRIP:return On.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function K1(a){switch(a){case ni.U8:return On.UNSIGNED_BYTE;case ni.U16:return On.UNSIGNED_SHORT;case ni.U32:return On.UNSIGNED_INT;case ni.S8:return On.BYTE;case ni.S16:return On.SHORT;case ni.S32:return On.INT;case ni.F16:return On.HALF_FLOAT;case ni.F32:return On.FLOAT;default:throw new Error("whoops")}}function q1(a){switch(a){case Vi.R:return 1;case Vi.RG:return 2;case Vi.RGB:return 3;case Vi.RGBA:return 4;default:return 1}}function Q1(a){var o=W0(a),f=z1(a),m=Yd(a),T=K1(o),C=q1(f),L=!!(m&mo.Normalized);return{size:C,type:T,normalized:L}}function J1(a){switch(a){case ar.U8_R:return On.UNSIGNED_BYTE;case ar.U16_R:return On.UNSIGNED_SHORT;case ar.U32_R:return On.UNSIGNED_INT;default:throw new Error("whoops")}}function gm(a){switch(a){case ol.CLAMP_TO_EDGE:return On.CLAMP_TO_EDGE;case ol.REPEAT:return On.REPEAT;case ol.MIRRORED_REPEAT:return On.MIRRORED_REPEAT;default:throw new Error("whoops")}}function mg(a,o){if(o===Zc.LINEAR&&a===Du.BILINEAR)return On.LINEAR_MIPMAP_LINEAR;if(o===Zc.LINEAR&&a===Du.POINT)return On.NEAREST_MIPMAP_LINEAR;if(o===Zc.NEAREST&&a===Du.BILINEAR)return On.LINEAR_MIPMAP_NEAREST;if(o===Zc.NEAREST&&a===Du.POINT)return On.NEAREST_MIPMAP_NEAREST;if(o===Zc.NO_MIP&&a===Du.BILINEAR)return On.LINEAR;if(o===Zc.NO_MIP&&a===Du.POINT)return On.NEAREST;throw new Error("Unknown texture filter mode")}function Cv(a,o){o===void 0&&(o=0);var f=a;return f.gl_buffer_pages[o/f.pageByteSize|0]}function Rv(a){var o=a;return o.gl_texture}function vy(a){var o=a;return o.gl_sampler}function Mv(a,o){a.name=o,a.__SPECTOR_Metadata={name:o}}function eb(a,o){for(var f=[];;){var m=o.exec(a);if(!m)break;f.push(m)}return f}function Pv(a){return a.blendMode==uf.ADD&&a.blendSrcFactor==qa.ONE&&a.blendDstFactor===qa.ZERO}function tb(a){switch(a){case cy.OcclusionConservative:return On.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function Op(a){if(a===ss.TEXTURE_2D)return On.TEXTURE_2D;if(a===ss.TEXTURE_2D_ARRAY)return On.TEXTURE_2D_ARRAY;if(a===ss.TEXTURE_CUBE_MAP)return On.TEXTURE_CUBE_MAP;if(a===ss.TEXTURE_3D)return On.TEXTURE_3D;throw new Error("whoops")}function pd(a,o,f,m){return!(a%f!==0||o%m!==0)}var Cp=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;L.type=Hs.Buffer;var F=C.viewOrSize,V=C.usage,ae=C.hint,Ae=ae===void 0?c0.STATIC:ae,Ce=T.uniformBufferMaxPageByteSize,Ye=T.gl,Bt=V&Rl.UNIFORM;Bt||(Ho(Ye)?Ye.bindVertexArray(null):T.OES_vertex_array_object.bindVertexArrayOES(null));var rn=(0,dm.Z)(F)?L_(F,4):L_(F.byteLength,4);L.gl_buffer_pages=[];var Sn;if(Bt){for(var lr=rn;lr>0;)L.gl_buffer_pages.push(L.createBufferPage(Math.min(lr,Ce),V,Ae)),lr-=Ce;Sn=Ce}else L.gl_buffer_pages.push(L.createBufferPage(rn,V,Ae)),Sn=rn;return L.pageByteSize=Sn,L.byteSize=rn,L.usage=V,L.gl_target=bT(V),(0,dm.Z)(F)||L.setSubData(0,new Uint8Array(F.buffer)),Bt||(Ho(Ye)?Ye.bindVertexArray(L.device.currentBoundVAO):T.OES_vertex_array_object.bindVertexArrayOES(L.device.currentBoundVAO)),L}return o.prototype.setSubData=function(f,m,T,C){T===void 0&&(T=0),C===void 0&&(C=m.byteLength-T);for(var L=this.device.gl,F=this.pageByteSize,V=f+C,ae=f,Ae=f%F;ae<V;){var Ce=Ho(L)?L.COPY_WRITE_BUFFER:this.gl_target,Ye=Cv(this,ae);if(Ye.ubo)return;L.bindBuffer(Ce,Ye),Ho(L)?L.bufferSubData(Ce,Ae,m,T,Math.min(V-ae,F)):L.bufferSubData(Ce,Ae,m),ae+=F,Ae=0,T+=F,this.device.debugGroupStatisticsBufferUpload()}},o.prototype.destroy=function(){a.prototype.destroy.call(this);for(var f=0;f<this.gl_buffer_pages.length;f++)this.gl_buffer_pages[f].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[f]);this.gl_buffer_pages=[]},o.prototype.createBufferPage=function(f,m,T){var C=this.device.gl,L=m&Rl.UNIFORM;if(!Ho(C)&&L)return{ubo:!0};var F=this.device.ensureResourceExists(C.createBuffer()),V=bT(m),ae=r2(T);return C.bindBuffer(V,F),C.bufferData(V,f,ae),F},o}(qd),xT=function(a){(0,To.ZT)(o,a);function o(f){var m,T,C,L,F=f.id,V=f.device,ae=f.descriptor,Ae,Ce=a.call(this,{id:F,device:V})||this;Ce.type=Hs.InputLayout;var Ye=ae.vertexBufferDescriptors,Bt=ae.indexBufferFormat,rn=ae.program;Va(Bt===ar.U16_R||Bt===ar.U32_R||Bt===null);var Sn=Bt!==null?J1(Bt):null,lr=Bt!==null?oT(Bt):null,Br=Ce.device.gl,Er=Ce.device.ensureResourceExists(Ho(Br)?Br.createVertexArray():V.OES_vertex_array_object.createVertexArrayOES());Ho(Br)?Br.bindVertexArray(Er):V.OES_vertex_array_object.bindVertexArrayOES(Er),Br.bindBuffer(Br.ARRAY_BUFFER,Cv(Ce.device.fallbackVertexBuffer));try{for(var ui=(0,To.XA)(ae.vertexBufferDescriptors),ji=ui.next();!ji.done;ji=ui.next()){var Po=ji.value,no=Po.stepMode,Gr=Po.attributes;try{for(var ro=(C=void 0,(0,To.XA)(Gr)),Da=ro.next();!Da.done;Da=ro.next()){var is=Da.value,Qo=is.shaderLocation,ps=is.format,es=is.divisor,ls=es===void 0?1:es,Qd=Ho(Br)?Qo:(Ae=rn.attributes[Qo])===null||Ae===void 0?void 0:Ae.location,Jd=Q1(ps);if(is.vertexFormat=Jd,!(0,$d.Z)(Qd)){_T(ps);var Tm=Jd.size,Nv=Jd.type,qf=Jd.normalized;Br.vertexAttribPointer(Qd,Tm,Nv,qf,0,0),no===pg.INSTANCE&&(Ho(Br)?Br.vertexAttribDivisor(Qd,ls):V.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(Qd,ls)),Br.enableVertexAttribArray(Qd)}}}catch(Ty){C={error:Ty}}finally{try{Da&&!Da.done&&(L=ro.return)&&L.call(ro)}finally{if(C)throw C.error}}}}catch(Ty){m={error:Ty}}finally{try{ji&&!ji.done&&(T=ui.return)&&T.call(ui)}finally{if(m)throw m.error}}return Ho(Br)?Br.bindVertexArray(null):V.OES_vertex_array_object.bindVertexArrayOES(null),Ce.vertexBufferDescriptors=Ye,Ce.vao=Er,Ce.indexBufferFormat=Bt,Ce.indexBufferType=Sn,Ce.indexBufferCompByteSize=lr,Ce.program=rn,Ce}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(Ho(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},o}(qd),i2=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=f.fake,F=a.call(this,{id:m,device:T})||this;F.type=Hs.Texture,C=(0,To.pi)({dimension:ss.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},C);var V=F.device.gl,ae,Ae,Ce=F.clampmipLevelCount(C);if(F.immutable=C.usage===Yf.RENDER_TARGET,F.pixelStore=C.pixelStore,F.format=C.format,F.dimension=C.dimension,F.formatKind=aT(C.format),F.width=C.width,F.height=C.height,F.depthOrArrayLayers=C.depthOrArrayLayers,F.mipmaps=Ce>=1,!L){Ae=F.device.ensureResourceExists(V.createTexture());var Ye=F.device.translateTextureType(C.format),Bt=F.device.translateTextureInternalFormat(C.format);if(F.device.setActiveTexture(V.TEXTURE0),F.device.currentTextures[0]=null,F.preprocessImage(),C.dimension===ss.TEXTURE_2D){if(ae=On.TEXTURE_2D,V.bindTexture(ae,Ae),F.immutable)if(Ho(V))V.texStorage2D(ae,Ce,Bt,C.width,C.height);else{var rn=(Bt===On.DEPTH_COMPONENT||F.isNPOT(),0);(F.format===ar.D32F||F.format===ar.D24_S8)&&!Ho(V)&&!T.WEBGL_depth_texture||(V.texImage2D(ae,rn,Bt,C.width,C.height,0,Bt,Ye,null),F.mipmaps&&(F.mipmaps=!1,V.texParameteri(On.TEXTURE_2D,On.TEXTURE_MIN_FILTER,On.LINEAR),V.texParameteri(On.TEXTURE_2D,On.TEXTURE_WRAP_S,On.CLAMP_TO_EDGE),V.texParameteri(On.TEXTURE_2D,On.TEXTURE_WRAP_T,On.CLAMP_TO_EDGE)))}Va(C.depthOrArrayLayers===1)}else if(C.dimension===ss.TEXTURE_2D_ARRAY)ae=On.TEXTURE_2D_ARRAY,V.bindTexture(ae,Ae),F.immutable&&Ho(V)&&V.texStorage3D(ae,Ce,Bt,C.width,C.height,C.depthOrArrayLayers);else if(C.dimension===ss.TEXTURE_3D)ae=On.TEXTURE_3D,V.bindTexture(ae,Ae),F.immutable&&Ho(V)&&V.texStorage3D(ae,Ce,Bt,C.width,C.height,C.depthOrArrayLayers);else if(C.dimension===ss.TEXTURE_CUBE_MAP)ae=On.TEXTURE_CUBE_MAP,V.bindTexture(ae,Ae),F.immutable&&Ho(V)&&V.texStorage2D(ae,Ce,Bt,C.width,C.height),Va(C.depthOrArrayLayers===6);else throw new Error("whoops")}return F.gl_texture=Ae,F.gl_target=ae,F.mipLevelCount=Ce,F}return o.prototype.setImageData=function(f,m){m===void 0&&(m=0);var T=this.device.gl;yT(this.format);var C=this.gl_target===On.TEXTURE_3D||this.gl_target===On.TEXTURE_2D_ARRAY,L=this.gl_target===On.TEXTURE_CUBE_MAP,F=h3(f[0]);this.device.setActiveTexture(T.TEXTURE0),this.device.currentTextures[0]=null;var V=f[0],ae,Ae;F?(ae=this.width,Ae=this.height):(ae=V.width,Ae=V.height,this.width=ae,this.height=Ae),T.bindTexture(this.gl_target,this.gl_texture);var Ce=this.device.translateTextureFormat(this.format),Ye=Ho(T)?this.device.translateInternalTextureFormat(this.format):Ce,Bt=this.device.translateTextureType(this.format);this.preprocessImage();for(var rn=0;rn<this.depthOrArrayLayers;rn++){var Sn=f[rn],lr=this.gl_target;L&&(lr=On.TEXTURE_CUBE_MAP_POSITIVE_X+rn%6),this.immutable?T.texSubImage2D(lr,m,0,0,ae,Ae,Ce,Bt,Sn):Ho(T)?C?T.texImage3D(lr,m,Ye,ae,Ae,this.depthOrArrayLayers,0,Ce,Bt,Sn):T.texImage2D(lr,m,Ye,ae,Ae,0,Ce,Bt,Sn):F?T.texImage2D(lr,m,Ce,ae,Ae,0,Ce,Bt,Sn):T.texImage2D(lr,m,Ce,Ce,Bt,Sn)}this.mipmaps&&this.generateMipmap(C)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteTexture(Rv(this))},o.prototype.clampmipLevelCount=function(f){if(f.dimension===ss.TEXTURE_2D_ARRAY&&f.depthOrArrayLayers>1){var m=W0(f.format);if(m===ni.BC1)for(var T=f.width,C=f.height,L=0;L<f.mipLevelCount;L++){if(T<=2||C<=2)return L-1;T=Math.max(T/2|0,1),C=Math.max(C/2|0,1)}}return f.mipLevelCount},o.prototype.preprocessImage=function(){var f=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&f.pixelStorei(On.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&f.pixelStorei(On.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&f.pixelStorei(On.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},o.prototype.generateMipmap=function(f){f===void 0&&(f=!1);var m=this.device.gl;return!Ho(m)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(m.bindTexture(this.gl_target,this.gl_texture),f?(m.texParameteri(this.gl_target,On.TEXTURE_BASE_LEVEL,0),m.texParameteri(this.gl_target,On.TEXTURE_MAX_LEVEL,Math.log2(this.width)),m.texParameteri(this.gl_target,On.TEXTURE_MIN_FILTER,On.LINEAR_MIPMAP_LINEAR),m.texParameteri(this.gl_target,On.TEXTURE_MAG_FILTER,On.LINEAR)):m.texParameteri(On.TEXTURE_2D,On.TEXTURE_MIN_FILTER,On.NEAREST_MIPMAP_LINEAR),m.generateMipmap(this.gl_target),m.bindTexture(this.gl_target,null)),this)},o.prototype.isNPOT=function(){var f=this.device.gl;return Ho(f)?!1:!j1(this.width)||!j1(this.height)},o}(qd),g3=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;L.type=Hs.RenderTarget,L.gl_renderbuffer=null,L.texture=null;var F=L.device.gl,V=C.format,ae=C.width,Ae=C.height,Ce=C.sampleCount,Ye=Ce===void 0?1:Ce,Bt=C.texture,rn=!1;if((V===ar.D32F||V===ar.D24_S8)&&Bt&&!Ho(F)&&!T.WEBGL_depth_texture&&(Bt.destroy(),L.texture=null,rn=!0),!rn&&Bt)L.texture=Bt;else{L.gl_renderbuffer=L.device.ensureResourceExists(F.createRenderbuffer()),F.bindRenderbuffer(F.RENDERBUFFER,L.gl_renderbuffer);var Sn=L.device.translateTextureInternalFormat(V,!0);Ho(F)&&Ye>1?F.renderbufferStorageMultisample(On.RENDERBUFFER,Ye,Sn,ae,Ae):F.renderbufferStorage(On.RENDERBUFFER,Sn,ae,Ae)}return L.format=V,L.width=ae,L.height=Ae,L.sampleCount=Ye,L}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},o}(qd),vd;(function(a){a[a.NeedsCompile=0]="NeedsCompile",a[a.Compiling=1]="Compiling",a[a.NeedsBind=2]="NeedsBind",a[a.ReadyToUse=3]="ReadyToUse"})(vd||(vd={}));var y3=function(a){(0,To.ZT)(o,a);function o(f,m){var T=f.id,C=f.device,L=f.descriptor,F=a.call(this,{id:T,device:C})||this;F.rawVertexGLSL=m,F.type=Hs.Program,F.uniformSetters={},F.attributes=[];var V=F.device.gl;return F.descriptor=L,F.gl_program=F.device.ensureResourceExists(V.createProgram()),F.gl_shader_vert=null,F.gl_shader_frag=null,F.compileState=vd.NeedsCompile,F.tryCompileProgram(),F}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},o.prototype.tryCompileProgram=function(){Va(this.compileState===vd.NeedsCompile);var f=this.descriptor,m=f.vertex,T=f.fragment,C=this.device.gl;m!=null&&m.glsl&&(T!=null&&T.glsl)&&(this.gl_shader_vert=this.compileShader(m.postprocess?m.postprocess(m.glsl):m.glsl,C.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(T.postprocess?T.postprocess(T.glsl):T.glsl,C.FRAGMENT_SHADER),C.attachShader(this.gl_program,this.gl_shader_vert),C.attachShader(this.gl_program,this.gl_shader_frag),C.linkProgram(this.gl_program),this.compileState=vd.Compiling,Ho(C)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},o.prototype.readAttributesFromLinkedProgram=function(){for(var f,m=this.device.gl,T=m.getProgramParameter(this.gl_program,m.ACTIVE_ATTRIBUTES),C=p3(this.descriptor.vertex.glsl),L=v3(this.rawVertexGLSL,C),F=function(Ae){var Ce=m.getActiveAttrib(V.gl_program,Ae),Ye=Ce.name,Bt=Ce.type,rn=Ce.size,Sn=m.getAttribLocation(V.gl_program,Ye),lr=(f=L.find(function(Br){return Br.name===Ye}))===null||f===void 0?void 0:f.location;Sn>=0&&!(0,$d.Z)(lr)&&(V.attributes[lr]={name:Ye,location:Sn,type:Bt,size:rn})},V=this,ae=0;ae<T;ae++)F(ae)},o.prototype.readUniformLocationsFromLinkedProgram=function(){for(var f=this.device.gl,m=f.getProgramParameter(this.gl_program,f.ACTIVE_UNIFORMS),T=0;T<m;T++){var C=f.getActiveUniform(this.gl_program,T),L=Z1(C.name).name,F=f.getUniformLocation(this.gl_program,L);if(this.uniformSetters[L]=mT(f,F,C),C&&C.size>1)for(var V=0;V<C.size;V++)F=f.getUniformLocation(this.gl_program,"".concat(L,"[").concat(V,"]")),this.uniformSetters["".concat(L,"[").concat(V,"]")]=mT(f,F,C)}},o.prototype.compileShader=function(f,m){var T=this.device.gl,C=this.device.ensureResourceExists(T.createShader(m));return T.shaderSource(C,f),T.compileShader(C),C},o.prototype.setUniformsLegacy=function(f){f===void 0&&(f={});var m=this.device.gl;if(!Ho(m)){var T=!1;for(var C in f){T||(m.useProgram(this.gl_program),T=!0);var L=f[C],F=this.uniformSetters[C];if(F){var V=L;V instanceof i2&&(V=V.textureIndex),F(V)}}}return this},o}(qd),_3=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;L.type=Hs.QueryPool;var F=L.device.gl;if(Ho(F)){var V=C.elemCount,ae=C.type;L.gl_query=Tv(V,function(){return L.device.ensureResourceExists(F.createQuery())}),L.gl_query_type=tb(ae)}return L}return o.prototype.queryResultOcclusion=function(f){var m=this.device.gl;if(Ho(m)){var T=this.gl_query[f];return m.getQueryParameter(T,m.QUERY_RESULT_AVAILABLE)?!!m.getQueryParameter(T,m.QUERY_RESULT):null}return null},o.prototype.destroy=function(){a.prototype.destroy.call(this);var f=this.device.gl;if(Ho(f))for(var m=0;m<this.gl_query.length;m++)f.deleteQuery(this.gl_query[m])},o}(qd),ET=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=a.call(this,{id:m,device:T})||this;return C.type=Hs.Readback,C.gl_pbo=null,C.gl_sync=null,C}return o.prototype.clientWaitAsync=function(f,m,T){m===void 0&&(m=0),T===void 0&&(T=10);var C=this.device.gl;return new Promise(function(L,F){function V(){var ae=C.clientWaitSync(f,m,0);if(ae==C.WAIT_FAILED){F();return}if(ae==C.TIMEOUT_EXPIRED){setTimeout(V,(0,nT.Z)(T,0,C.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}L()}V()})},o.prototype.getBufferSubDataAsync=function(f,m,T,C,L,F){return(0,To.mG)(this,void 0,void 0,function(){var V;return(0,To.Jh)(this,function(ae){switch(ae.label){case 0:return V=this.device.gl,Ho(V)?(this.gl_sync=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0),V.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return ae.sent(),V.bindBuffer(f,m),V.getBufferSubData(f,T,C,L,F),V.bindBuffer(f,null),[2,C];case 2:return[2]}})})},o.prototype.readTexture=function(f,m,T,C,L,F,V,ae){return V===void 0&&(V=0),ae===void 0&&(ae=F.byteLength||0),(0,To.mG)(this,void 0,void 0,function(){var Ae,Ce,Ye,Bt,rn;return(0,To.Jh)(this,function(Sn){return Ae=this.device.gl,Ce=f,Ye=this.device.translateTextureFormat(Ce.format),Bt=this.device.translateTextureType(Ce.format),rn=pm(Ce.format),Ho(Ae)?(this.gl_pbo=this.device.ensureResourceExists(Ae.createBuffer()),Ae.bindBuffer(Ae.PIXEL_PACK_BUFFER,this.gl_pbo),Ae.bufferData(Ae.PIXEL_PACK_BUFFER,ae,Ae.STREAM_READ),Ae.bindBuffer(Ae.PIXEL_PACK_BUFFER,null),Ae.bindFramebuffer(On.READ_FRAMEBUFFER,this.device.readbackFramebuffer),Ae.framebufferTexture2D(On.READ_FRAMEBUFFER,On.COLOR_ATTACHMENT0,On.TEXTURE_2D,Ce.gl_texture,0),Ae.bindBuffer(Ae.PIXEL_PACK_BUFFER,this.gl_pbo),Ae.readPixels(m,T,C,L,Ye,Bt,V*rn),Ae.bindBuffer(Ae.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(Ae.PIXEL_PACK_BUFFER,this.gl_pbo,0,F,V,0)]):[2,this.readTextureSync(f,m,T,C,L,F,V,ae)]})})},o.prototype.readTextureSync=function(f,m,T,C,L,F,V,ae){ae===void 0&&(ae=F.byteLength||0);var Ae=this.device.gl,Ce=f,Ye=this.device.translateTextureType(Ce.format);return Ae.bindFramebuffer(On.FRAMEBUFFER,this.device.readbackFramebuffer),Ae.framebufferTexture2D(On.FRAMEBUFFER,On.COLOR_ATTACHMENT0,On.TEXTURE_2D,Ce.gl_texture,0),Ae.pixelStorei(Ae.PACK_ALIGNMENT,4),Ae.readPixels(m,T,C,L,Ae.RGBA,Ye,F),F},o.prototype.readBuffer=function(f,m,T,C,L){return(0,To.mG)(this,void 0,void 0,function(){var F;return(0,To.Jh)(this,function(V){return F=this.device.gl,Ho(F)?[2,this.getBufferSubDataAsync(F.ARRAY_BUFFER,Cv(f,m),m,T,C,L)]:[2,Promise.reject()]})})},o.prototype.destroy=function(){a.prototype.destroy.call(this),Ho(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},o}(qd),ST=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L,F,V=a.call(this,{id:m,device:T})||this;return V.type=Hs.RenderPipeline,V.drawMode=Y1((L=C.topology)!==null&&L!==void 0?L:xc.TRIANGLES),V.program=C.program,V.inputLayout=C.inputLayout,V.megaState=(0,To.pi)((0,To.pi)({},vm(wv)),C.megaStateDescriptor),V.colorAttachmentFormats=C.colorAttachmentFormats.slice(),V.depthStencilAttachmentFormat=C.depthStencilAttachmentFormat,V.sampleCount=(F=C.sampleCount)!==null&&F!==void 0?F:1,V}return o}(qd),nb=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;return L.type=Hs.ComputePipeline,L.descriptor=C,L}return o}(qd),b3=function(){function a(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return a.prototype.trackResourceCreated=function(o){this.creationStacks.set(o,new Error().stack),this.liveObjects.add(o)},a.prototype.trackResourceDestroyed=function(o){this.deletionStacks.has(o)&&console.warn("Object double freed:",o,`

Creation stack: `,this.creationStacks.get(o),`

Deletion stack: `,this.deletionStacks.get(o),`

This stack: `,new Error().stack),this.deletionStacks.set(o,new Error().stack),this.liveObjects.delete(o)},a.prototype.checkForLeaks=function(){var o,f;try{for(var m=(0,To.XA)(this.liveObjects.values()),T=m.next();!T.done;T=m.next()){var C=T.value;console.warn("Object leaked:",C,"Creation stack:",this.creationStacks.get(C))}}catch(L){o={error:L}}finally{try{T&&!T.done&&(f=m.return)&&f.call(m)}finally{if(o)throw o.error}}},a.prototype.setResourceLeakCheck=function(o,f){f?this.liveObjects.add(o):this.liveObjects.delete(o)},a}(),x3=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L,F,V=a.call(this,{id:m,device:T})||this;V.type=Hs.Sampler;var ae=V.device.gl;if(Ho(ae)){var Ae=V.device.ensureResourceExists(ae.createSampler());ae.samplerParameteri(Ae,On.TEXTURE_WRAP_S,gm(C.addressModeU)),ae.samplerParameteri(Ae,On.TEXTURE_WRAP_T,gm(C.addressModeV)),ae.samplerParameteri(Ae,On.TEXTURE_WRAP_R,gm((L=C.addressModeW)!==null&&L!==void 0?L:C.addressModeU)),ae.samplerParameteri(Ae,On.TEXTURE_MIN_FILTER,mg(C.minFilter,C.mipmapFilter)),ae.samplerParameteri(Ae,On.TEXTURE_MAG_FILTER,mg(C.magFilter,Zc.NO_MIP)),C.lodMinClamp!==void 0&&ae.samplerParameterf(Ae,On.TEXTURE_MIN_LOD,C.lodMinClamp),C.lodMaxClamp!==void 0&&ae.samplerParameterf(Ae,On.TEXTURE_MAX_LOD,C.lodMaxClamp),C.compareFunction!==void 0&&(ae.samplerParameteri(Ae,ae.TEXTURE_COMPARE_MODE,ae.COMPARE_REF_TO_TEXTURE),ae.samplerParameteri(Ae,ae.TEXTURE_COMPARE_FUNC,C.compareFunction));var Ce=(F=C.maxAnisotropy)!==null&&F!==void 0?F:1;Ce>1&&V.device.EXT_texture_filter_anisotropic!==null&&(Va(C.minFilter===Du.BILINEAR&&C.magFilter===Du.BILINEAR&&C.mipmapFilter===Zc.LINEAR),ae.samplerParameterf(Ae,V.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce)),V.gl_sampler=Ae}else V.descriptor=C;return V}return o.prototype.setTextureParameters=function(f,m,T){var C,L=this.device.gl,F=this.descriptor;this.isNPOT(m,T)?L.texParameteri(On.TEXTURE_2D,On.TEXTURE_MIN_FILTER,On.LINEAR):L.texParameteri(f,On.TEXTURE_MIN_FILTER,mg(F.minFilter,F.mipmapFilter)),L.texParameteri(On.TEXTURE_2D,On.TEXTURE_WRAP_S,gm(F.addressModeU)),L.texParameteri(On.TEXTURE_2D,On.TEXTURE_WRAP_T,gm(F.addressModeV)),L.texParameteri(f,On.TEXTURE_MAG_FILTER,mg(F.magFilter,Zc.NO_MIP));var V=(C=F.maxAnisotropy)!==null&&C!==void 0?C:1;V>1&&this.device.EXT_texture_filter_anisotropic!==null&&(Va(F.minFilter===Du.BILINEAR&&F.magFilter===Du.BILINEAR&&F.mipmapFilter===Zc.LINEAR),L.texParameteri(f,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V))},o.prototype.destroy=function(){a.prototype.destroy.call(this),Ho(this.device.gl)&&this.device.gl.deleteSampler(vy(this))},o.prototype.isNPOT=function(f,m){return!j1(f)||!j1(m)},o}(qd),E3=function(){function a(){}return a.prototype.dispatchWorkgroups=function(o,f,m){},a.prototype.dispatchWorkgroupsIndirect=function(o,f){},a.prototype.setPipeline=function(o){},a.prototype.setBindings=function(o){},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a}(),o2=function(a){(0,To.ZT)(o,a);function o(){var f=a!==null&&a.apply(this,arguments)||this;return f.type=Hs.RenderBundle,f.commands=[],f}return o.prototype.push=function(f){this.commands.push(f)},o.prototype.replay=function(){this.commands.forEach(function(f){return f()})},o}(qd),TT=65536,S3=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,wT=function(){function a(o,f){f===void 0&&(f={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=vm(wv),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=cd.LOWER_LEFT,this.clipSpaceNearZ=vg.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=o,this.contextAttributes=Kd(o.getContextAttributes()),Ho(o)?(this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=o.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=o.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=o.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=o.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=o.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=o.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=o.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=o.getExtension("EXT_color_buffer_half_float"),o.getExtension("EXT_frag_depth"),o.getExtension("OES_element_index_uint"),o.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=o.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=o.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=o.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=o.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=o.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=o.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=o.getExtension("KHR_parallel_shader_compile"),Ho(o)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new i2({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:ss.TEXTURE_2D,mipLevelCount:1,usage:Yf.RENDER_TARGET,format:this.contextAttributes.alpha===!1?ar.U8_RGB_RT:ar.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=Bu.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(ss.TEXTURE_2D,Bu.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(ss.TEXTURE_2D,Bu.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:Rl.VERTEX,hint:c0.STATIC}),Ho(o)&&(this.fallbackTexture2DArray=this.createFallbackTexture(ss.TEXTURE_2D_ARRAY,Bu.Float),this.fallbackTexture3D=this.createFallbackTexture(ss.TEXTURE_3D,Bu.Float),this.fallbackTextureCube=this.createFallbackTexture(ss.TEXTURE_CUBE_MAP,Bu.Float)),this.currentMegaState.depthCompare=Ja.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=cf.ALL,o.enable(o.DEPTH_TEST),o.enable(o.STENCIL_TEST),this.checkLimits(),f.shaderDebug&&(this.shaderDebug=!0),f.trackResources&&(this.resourceCreationTracker=new b3)}return a.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},a.prototype.createFallbackTexture=function(o,f){var m=o===ss.TEXTURE_CUBE_MAP?6:1,T=f===Bu.Depth?ar.D32F:ar.U8_RGBA_NORM,C=this.createTexture({dimension:o,format:T,usage:Yf.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1});return f===Bu.Float&&C.setImageData([new Uint8Array(4*m)]),Rv(C)},a.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},a.prototype.checkLimits=function(){var o=this.gl;if(this.maxVertexAttribs=o.getParameter(On.MAX_VERTEX_ATTRIBS),Ho(o)){this.uniformBufferMaxPageByteSize=Math.min(o.getParameter(On.MAX_UNIFORM_BLOCK_SIZE),TT),this.uniformBufferWordAlignment=o.getParameter(o.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var f=o.getInternalformatParameter(o.RENDERBUFFER,o.DEPTH32F_STENCIL8,o.SAMPLES);this.supportedSampleCounts=f?(0,To.ev)([],(0,To.CR)(f),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=TT;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(m,T){return m-T})},a.prototype.configureSwapChain=function(o,f,m){var T=this.scTexture;T.width=o,T.height=f,this.scPlatformFramebuffer=J5(m)},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.gl.canvas},a.prototype.getOnscreenTexture=function(){return this.scTexture},a.prototype.beginFrame=function(){},a.prototype.endFrame=function(){},a.prototype.translateTextureInternalFormat=function(o,f){switch(f===void 0&&(f=!1),o){case ar.ALPHA:return On.ALPHA;case ar.U8_LUMINANCE:case ar.F16_LUMINANCE:case ar.F32_LUMINANCE:return On.LUMINANCE;case ar.F16_R:return On.R16F;case ar.F16_RG:return On.RG16F;case ar.F16_RGB:return On.RGB16F;case ar.F16_RGBA:return On.RGBA16F;case ar.F32_R:return On.R32F;case ar.F32_RG:return On.RG32F;case ar.F32_RGB:return On.RGB32F;case ar.F32_RGBA:return Ho(this.gl)?On.RGBA32F:f?this.WEBGL_color_buffer_float.RGBA32F_EXT:On.RGBA;case ar.U8_R_NORM:return On.R8;case ar.U8_RG_NORM:return On.RG8;case ar.U8_RGB_NORM:case ar.U8_RGB_RT:return On.RGB8;case ar.U8_RGB_SRGB:return On.SRGB8;case ar.U8_RGBA_NORM:case ar.U8_RGBA_RT:return Ho(this.gl)?On.RGBA8:f?On.RGBA4:On.RGBA;case ar.U8_RGBA:return On.RGBA;case ar.U8_RGBA_SRGB:case ar.U8_RGBA_RT_SRGB:return On.SRGB8_ALPHA8;case ar.U16_R:return On.R16UI;case ar.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case ar.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case ar.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case ar.U16_RGBA_5551:return On.RGB5_A1;case ar.U16_RGB_565:return On.RGB565;case ar.U32_R:return On.R32UI;case ar.S8_RGBA_NORM:return On.RGBA8_SNORM;case ar.S8_RG_NORM:return On.RG8_SNORM;case ar.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case ar.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case ar.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case ar.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case ar.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case ar.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case ar.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case ar.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case ar.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case ar.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case ar.D32F_S8:return Ho(this.gl)?On.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?On.DEPTH_STENCIL:On.DEPTH_COMPONENT16;case ar.D24_S8:return Ho(this.gl)?On.DEPTH24_STENCIL8:this.WEBGL_depth_texture?On.DEPTH_STENCIL:On.DEPTH_COMPONENT16;case ar.D32F:return Ho(this.gl)?On.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?On.DEPTH_COMPONENT:On.DEPTH_COMPONENT16;case ar.D24:return Ho(this.gl)?On.DEPTH_COMPONENT24:this.WEBGL_depth_texture?On.DEPTH_COMPONENT:On.DEPTH_COMPONENT16;default:throw new Error("whoops")}},a.prototype.translateTextureType=function(o){var f=W0(o);switch(f){case ni.U8:return On.UNSIGNED_BYTE;case ni.U16:return On.UNSIGNED_SHORT;case ni.U32:return On.UNSIGNED_INT;case ni.S8:return On.BYTE;case ni.F16:return On.HALF_FLOAT;case ni.F32:return On.FLOAT;case ni.U16_PACKED_5551:return On.UNSIGNED_SHORT_5_5_5_1;case ni.D32F:return Ho(this.gl)?On.FLOAT:this.WEBGL_depth_texture?On.UNSIGNED_INT:On.UNSIGNED_BYTE;case ni.D24:return Ho(this.gl)?On.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?On.UNSIGNED_SHORT:On.UNSIGNED_BYTE;case ni.D24S8:return Ho(this.gl)?On.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?On.UNSIGNED_INT_24_8_WEBGL:On.UNSIGNED_BYTE;case ni.D32FS8:return On.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},a.prototype.translateInternalTextureFormat=function(o){switch(o){case ar.F32_R:return On.R32F;case ar.F32_RG:return On.RG32F;case ar.F32_RGB:return On.RGB32F;case ar.F32_RGBA:return On.RGBA32F;case ar.F16_R:return On.R16F;case ar.F16_RG:return On.RG16F;case ar.F16_RGB:return On.RGB16F;case ar.F16_RGBA:return On.RGBA16F}return this.translateTextureFormat(o)},a.prototype.translateTextureFormat=function(o){if(yT(o)||o===ar.F32_LUMINANCE||o===ar.U8_LUMINANCE)return this.translateTextureInternalFormat(o);var f=Ho(this.gl)||!Ho(this.gl)&&!!this.WEBGL_depth_texture;switch(o){case ar.D24_S8:case ar.D32F_S8:return f?On.DEPTH_STENCIL:On.RGBA;case ar.D24:case ar.D32F:return f?On.DEPTH_COMPONENT:On.RGBA}var m=_T(o),T=z1(o);switch(T){case Vi.A:return On.ALPHA;case Vi.R:return m?On.RED_INTEGER:On.RED;case Vi.RG:return m?On.RG_INTEGER:On.RG;case Vi.RGB:return m?On.RGB_INTEGER:On.RGB;case Vi.RGBA:return On.RGBA}},a.prototype.setActiveTexture=function(o){this.currentActiveTexture!==o&&(this.gl.activeTexture(o),this.currentActiveTexture=o)},a.prototype.bindVAO=function(o){this.currentBoundVAO!==o&&(Ho(this.gl)?this.gl.bindVertexArray(o):this.OES_vertex_array_object.bindVertexArrayOES(o),this.currentBoundVAO=o)},a.prototype.programCompiled=function(o){Va(o.compileState!==vd.NeedsCompile),o.compileState===vd.Compiling&&(o.compileState=vd.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(o))},a.prototype.useProgram=function(o){this.currentProgram!==o&&(this.programCompiled(o),this.gl.useProgram(o.gl_program),this.currentProgram=o)},a.prototype.ensureResourceExists=function(o){if(o===null){var f=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(f))}else return o},a.prototype.createBuffer=function(o){return new Cp({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new i2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new x3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){return new g3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,T=f.width,C=f.height,L=f.mipLevelCount;return Va(L===1),this.createRenderTarget({format:m,width:T,height:C,sampleCount:1,texture:o})},a.prototype.createProgram=function(o){var f,m,T,C=(f=o.vertex)===null||f===void 0?void 0:f.glsl;return!((m=o.vertex)===null||m===void 0)&&m.glsl&&(o.vertex.glsl=Ov(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((T=o.fragment)===null||T===void 0)&&T.glsl&&(o.fragment.glsl=Ov(this.queryVendorInfo(),"frag",o.fragment.glsl)),this.createProgramSimple(o,C)},a.prototype.createProgramSimple=function(o,f){var m=new y3({id:this.getNextUniqueId(),device:this,descriptor:o},f);return m},a.prototype.createBindings=function(o){return new $1({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new xT({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new ST({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePass=function(){return new E3},a.prototype.createComputePipeline=function(o){return new nb({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createReadback=function(){return new ET({id:this.getNextUniqueId(),device:this})},a.prototype.createQueryPool=function(o,f){return new _3({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.formatRenderPassDescriptor=function(o){var f,m,T,C,L,F,V=o.colorAttachment;o.depthClearValue=(f=o.depthClearValue)!==null&&f!==void 0?f:"load",o.stencilClearValue=(m=o.stencilClearValue)!==null&&m!==void 0?m:"load";for(var ae=0;ae<V.length;ae++)o.colorAttachmentLevel||(o.colorAttachmentLevel=[]),o.colorAttachmentLevel[ae]=(T=o.colorAttachmentLevel[ae])!==null&&T!==void 0?T:0,o.colorResolveToLevel||(o.colorResolveToLevel=[]),o.colorResolveToLevel[ae]=(C=o.colorResolveToLevel[ae])!==null&&C!==void 0?C:0,o.colorClearColor||(o.colorClearColor=[]),o.colorClearColor[ae]=(L=o.colorClearColor[ae])!==null&&L!==void 0?L:"load",o.colorStore||(o.colorStore=[]),o.colorStore[ae]=(F=o.colorStore[ae])!==null&&F!==void 0?F:!1},a.prototype.createRenderBundle=function(){return new o2({id:this.getNextUniqueId(),device:this})},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle=void 0},a.prototype.executeBundles=function(o){o.forEach(function(f){f.replay()})},a.prototype.createRenderPass=function(o){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=o,this.formatRenderPassDescriptor(o);var f=o.colorAttachment,m=o.colorAttachmentLevel,T=o.colorClearColor,C=o.colorResolveTo,L=o.colorResolveToLevel,F=o.depthStencilAttachment,V=o.depthClearValue,ae=o.stencilClearValue,Ae=o.depthStencilResolveTo,Ce=C&&C.length===1&&C[0]===this.scTexture;this.setRenderPassParametersBegin(f.length,Ce);for(var Ye=0;Ye<f.length;Ye++)this.setRenderPassParametersColor(Ye,f[Ye],m[Ye],C[Ye],L[Ye],Ce);this.setRenderPassParametersDepthStencil(F,Ae,Ce),this.validateCurrentAttachments();for(var Ye=0;Ye<f.length;Ye++){var Bt=T[Ye];Bt!=="load"&&this.setRenderPassParametersClearColor(Ye,Bt.r,Bt.g,Bt.b,Bt.a)}return this.setRenderPassParametersClearDepthStencil(V,ae),this},a.prototype.submitPass=function(o){Va(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},a.prototype.copySubTexture2D=function(o,f,m,T,C,L){var F=this.gl,V=o,ae=T;if(Va(ae.mipLevelCount===1),Va(V.mipLevelCount===1),Ho(F))V===this.scTexture?F.bindFramebuffer(F.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(F.bindFramebuffer(F.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0,V,0)),F.bindFramebuffer(F.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(F.READ_FRAMEBUFFER,F.COLOR_ATTACHMENT0,ae,0),F.blitFramebuffer(C,L,C+ae.width,L+ae.height,f,m,f+ae.width,m+ae.height,F.COLOR_BUFFER_BIT,F.LINEAR),F.bindFramebuffer(F.READ_FRAMEBUFFER,null),F.bindFramebuffer(F.DRAW_FRAMEBUFFER,null);else if(V===this.scTexture){var Ae=this.createRenderTargetFromTexture(T);this.submitBlitRenderPass(Ae,V)}},a.prototype.queryLimits=function(){return this},a.prototype.queryTextureFormatSupported=function(o,f,m){switch(o){case ar.BC1_SRGB:case ar.BC2_SRGB:case ar.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?pd(f,m,4,4):!1;case ar.BC1:case ar.BC2:case ar.BC3:return this.WEBGL_compressed_texture_s3tc!==null?pd(f,m,4,4):!1;case ar.BC4_UNORM:case ar.BC4_SNORM:case ar.BC5_UNORM:case ar.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?pd(f,m,4,4):!1;case ar.U16_R_NORM:case ar.U16_RG_NORM:case ar.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case ar.F32_R:case ar.F32_RG:case ar.F32_RGB:case ar.F32_RGBA:return this.OES_texture_float_linear!==null;case ar.F16_R:case ar.F16_RG:case ar.F16_RGB:case ar.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},a.prototype.queryProgramReady=function(o){var f=this.gl;if(o.compileState===vd.NeedsCompile)throw new Error("whoops");if(o.compileState===vd.Compiling){var m=void 0;return this.KHR_parallel_shader_compile!==null?m=f.getProgramParameter(o.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):m=!0,m&&this.programCompiled(o),m}return o.compileState===vd.NeedsBind||o.compileState===vd.ReadyToUse},a.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){return this.currentRenderPassDescriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Hs.Buffer)for(var m=o.gl_buffer_pages,T=0;T<m.length;T++)Mv(m[T],"".concat(f," Page ").concat(T));else if(o.type===Hs.Texture)Mv(Rv(o),f);else if(o.type===Hs.Sampler)Mv(vy(o),f);else if(o.type===Hs.RenderTarget){var C=o.gl_renderbuffer;C!==null&&Mv(C,f)}else o.type===Hs.InputLayout&&Mv(o.vao,f)},a.prototype.setResourceLeakCheck=function(o,f){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(o,f)},a.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a.prototype.programPatched=function(o,f){Va(this.shaderDebug)},a.prototype.getBufferData=function(o,f,m){m===void 0&&(m=0);var T=this.gl;Ho(T)&&(T.bindBuffer(T.COPY_READ_BUFFER,Cv(o,m*4)),T.getBufferSubData(T.COPY_READ_BUFFER,m*4,f))},a.prototype.debugGroupStatisticsDrawCall=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].drawCallCount+=o},a.prototype.debugGroupStatisticsBufferUpload=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].bufferUploadCount+=o},a.prototype.debugGroupStatisticsTextureBind=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].textureBindCount+=o},a.prototype.debugGroupStatisticsTriangles=function(o){for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].triangleCount+=o},a.prototype.reportShaderError=function(o,f){var m=this.gl,T=m.getShaderParameter(o,m.COMPILE_STATUS);if(!T){console.error($C(f));var C=m.getExtension("WEBGL_debug_shaders");C&&console.error(C.getTranslatedShaderSource(o)),console.error(m.getShaderInfoLog(o))}return T},a.prototype.checkProgramCompilationForErrors=function(o){var f=this.gl,m=o.gl_program;if(!f.getProgramParameter(m,f.LINK_STATUS)){var T=o.descriptor;if(!this.reportShaderError(o.gl_shader_vert,T.vertex.glsl)||!this.reportShaderError(o.gl_shader_frag,T.fragment.glsl))return;console.error(f.getProgramInfoLog(o.gl_program))}},a.prototype.bindFramebufferAttachment=function(o,f,m,T){var C=this.gl;if((0,$d.Z)(m))C.framebufferRenderbuffer(o,f,C.RENDERBUFFER,null);else if(m.type===Hs.RenderTarget)m.gl_renderbuffer!==null?C.framebufferRenderbuffer(o,f,C.RENDERBUFFER,m.gl_renderbuffer):m.texture!==null&&C.framebufferTexture2D(o,f,On.TEXTURE_2D,Rv(m.texture),T);else if(m.type===Hs.Texture){var L=Rv(m);m.dimension===ss.TEXTURE_2D?C.framebufferTexture2D(o,f,On.TEXTURE_2D,L,T):Ho(C)&&(m.dimension,ss.TEXTURE_2D_ARRAY)}},a.prototype.bindFramebufferDepthStencilAttachment=function(o,f){var m=this.gl,T=(0,$d.Z)(f)?mo.Depth|mo.Stencil:Yd(f.format),C=!!(T&mo.Depth),L=!!(T&mo.Stencil);if(C&&L){var F=Ho(this.gl)||!Ho(this.gl)&&!!this.WEBGL_depth_texture;F?this.bindFramebufferAttachment(o,m.DEPTH_STENCIL_ATTACHMENT,f,0):this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0)}else C?(this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,null,0)):L&&(this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,null,0))},a.prototype.validateCurrentAttachments=function(){for(var o=-1,f=-1,m=-1,T=0;T<this.currentColorAttachments.length;T++){var C=this.currentColorAttachments[T];C!==null&&(o===-1?(o=C.sampleCount,f=C.width,m=C.height):(Va(o===C.sampleCount),Va(f===C.width),Va(m===C.height)))}this.currentDepthStencilAttachment&&(o===-1?o=this.currentDepthStencilAttachment.sampleCount:(Va(o===this.currentDepthStencilAttachment.sampleCount),Va(f===this.currentDepthStencilAttachment.width),Va(m===this.currentDepthStencilAttachment.height))),this.currentSampleCount=o},a.prototype.setRenderPassParametersBegin=function(o,f){f===void 0&&(f=!1);var m=this.gl;if(f)m.bindFramebuffer(On.FRAMEBUFFER,null);else if(Ho(m)?m.bindFramebuffer(On.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||m.bindFramebuffer(On.FRAMEBUFFER,this.renderPassDrawFramebuffer),Ho(m)?m.drawBuffers([On.COLOR_ATTACHMENT0,On.COLOR_ATTACHMENT1,On.COLOR_ATTACHMENT2,On.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([On.COLOR_ATTACHMENT0_WEBGL,On.COLOR_ATTACHMENT1_WEBGL,On.COLOR_ATTACHMENT2_WEBGL,On.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var T=o;T<this.currentColorAttachments.length;T++){var C=Ho(m)?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,L=Ho(m)?On.COLOR_ATTACHMENT0:On.COLOR_ATTACHMENT0_WEBGL;m.framebufferRenderbuffer(C,L+T,On.RENDERBUFFER,null),m.framebufferTexture2D(C,L+T,On.TEXTURE_2D,null,0)}this.currentColorAttachments.length=o},a.prototype.setRenderPassParametersColor=function(o,f,m,T,C,L){L===void 0&&(L=!1);var F=this.gl,V=Ho(F);(this.currentColorAttachments[o]!==f||this.currentColorAttachmentLevels[o]!==m)&&(this.currentColorAttachments[o]=f,this.currentColorAttachmentLevels[o]=m,!L&&(V||!V&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(V?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,(V?On.COLOR_ATTACHMENT0:On.COLOR_ATTACHMENT0_WEBGL)+o,f,m),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[o]!==T||this.currentColorResolveToLevels[o]!==C)&&(this.currentColorResolveTos[o]=T,this.currentColorResolveToLevels[o]=C,T!==null&&(this.resolveColorAttachmentsChanged=!0))},a.prototype.setRenderPassParametersDepthStencil=function(o,f,m){m===void 0&&(m=!1);var T=this.gl;this.currentDepthStencilAttachment!==o&&(this.currentDepthStencilAttachment=o,!m&&!this.inBlitRenderPass&&this.bindFramebufferDepthStencilAttachment(Ho(T)?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==f&&(this.currentDepthStencilResolveTo=f,f&&(this.resolveDepthStencilAttachmentsChanged=!0))},a.prototype.setRenderPassParametersClearColor=function(o,f,m,T,C){var L=this.gl;if(this.OES_draw_buffers_indexed!==null){var F=this.currentMegaState.attachmentsState[o];F&&F.channelWriteMask!==cf.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(o,!0,!0,!0,!0),F.channelWriteMask=cf.ALL)}else{var F=this.currentMegaState.attachmentsState[0];F&&F.channelWriteMask!==cf.ALL&&(L.colorMask(!0,!0,!0,!0),F.channelWriteMask=cf.ALL)}this.setScissorRectEnabled(!1),Ho(L)?L.clearBufferfv(L.COLOR,o,[f,m,T,C]):(L.clearColor(f,m,T,C),L.clear(L.COLOR_BUFFER_BIT))},a.prototype.setRenderPassParametersClearDepthStencil=function(o,f){o===void 0&&(o="load"),f===void 0&&(f="load");var m=this.gl;o!=="load"&&(Va(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(m.depthMask(!0),this.currentMegaState.depthWrite=!0),Ho(m)?m.clearBufferfv(m.DEPTH,0,[o]):(m.clearDepth(o),m.clear(m.DEPTH_BUFFER_BIT))),f!=="load"&&(Va(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(m.enable(m.STENCIL_TEST),m.stencilMask(255),this.currentMegaState.stencilWrite=!0),Ho(m)?m.clearBufferiv(m.STENCIL,0,[f]):(m.clearStencil(f),m.clear(m.STENCIL_BUFFER_BIT)))},a.prototype.setBindings=function(o){var f=this,m;if(this.renderBundle){this.renderBundle.push(function(){return f.setBindings(o)});return}var T=this.gl,C=o,L=C.uniformBufferBindings,F=C.samplerBindings,V=C.bindingLayouts;Va(0<V.bindingLayoutTables.length);var ae=V.bindingLayoutTables[0];Va(L.length>=ae.numUniformBuffers),Va(F.length>=ae.numSamplers);for(var Ae=0;Ae<L.length;Ae++){var Ce=L[Ae];if(Ce.size!==0){var Ye=ae.firstUniformBuffer+Ae,Bt=Ce.buffer,rn=Ce.offset||0,Sn=Ce.size||Bt.byteSize;if(Bt!==this.currentUniformBuffers[Ye]||rn!==this.currentUniformBufferByteOffsets[Ye]||Sn!==this.currentUniformBufferByteSizes[Ye]){var lr=rn%Bt.pageByteSize,Br=Bt.gl_buffer_pages[rn/Bt.pageByteSize|0];Va(lr+Sn<=Bt.pageByteSize),Ho(T)&&T.bindBufferRange(T.UNIFORM_BUFFER,Ye,Br,lr,Sn),this.currentUniformBuffers[Ye]=Bt,this.currentUniformBufferByteOffsets[Ye]=rn,this.currentUniformBufferByteSizes[Ye]=Sn}}}for(var Ae=0;Ae<ae.numSamplers;Ae++){var Ce=F[Ae],Er=ae.firstSampler+Ae,ui=Ce!==null&&Ce.sampler!==null?vy(Ce.sampler):null,ji=Ce!==null&&Ce.texture!==null?Rv(Ce.texture):null;if(this.currentSamplers[Er]!==ui&&(Ho(T)&&T.bindSampler(Er,ui),this.currentSamplers[Er]=ui),this.currentTextures[Er]!==ji){if(this.setActiveTexture(T.TEXTURE0+Er),ji!==null){var Po=Kd(Ce).texture,no=Po.gl_target,Gr=Po.width,ro=Po.height;Ce.texture.textureIndex=Er,T.bindTexture(no,ji),Ho(T)||(m=Ce.sampler)===null||m===void 0||m.setTextureParameters(no,Gr,ro),this.debugGroupStatisticsTextureBind()}else{var Da=(0,To.pi)((0,To.pi)({},Ce),W1),is=Da.dimension,Qo=Da.formatKind,no=Op(is);T.bindTexture(no,this.getFallbackTexture((0,To.pi)({gl_target:no,formatKind:Qo},Da)))}this.currentTextures[Er]=ji}}},a.prototype.setViewport=function(o,f,m,T){var C=this.gl;C.viewport(o,f,m,T)},a.prototype.setScissorRect=function(o,f,m,T){var C=this.gl;this.setScissorRectEnabled(!0),C.scissor(o,f,m,T)},a.prototype.applyAttachmentStateIndexed=function(o,f,m){var T=this.gl,C=this.OES_draw_buffers_indexed;f.channelWriteMask!==m.channelWriteMask&&(C.colorMaskiOES(o,!!(m.channelWriteMask&cf.RED),!!(m.channelWriteMask&cf.GREEN),!!(m.channelWriteMask&cf.BLUE),!!(m.channelWriteMask&cf.ALPHA)),f.channelWriteMask=m.channelWriteMask);var L=f.rgbBlendState.blendMode!==m.rgbBlendState.blendMode||f.alphaBlendState.blendMode!==m.alphaBlendState.blendMode,F=f.rgbBlendState.blendSrcFactor!==m.rgbBlendState.blendSrcFactor||f.alphaBlendState.blendSrcFactor!==m.alphaBlendState.blendSrcFactor||f.rgbBlendState.blendDstFactor!==m.rgbBlendState.blendDstFactor||f.alphaBlendState.blendDstFactor!==m.alphaBlendState.blendDstFactor;(F||L)&&(Pv(f.rgbBlendState)&&Pv(f.alphaBlendState)?C.enableiOES(o,T.BLEND):Pv(m.rgbBlendState)&&Pv(m.alphaBlendState)&&C.disableiOES(o,T.BLEND)),L&&(C.blendEquationSeparateiOES(o,m.rgbBlendState.blendMode,m.alphaBlendState.blendMode),f.rgbBlendState.blendMode=m.rgbBlendState.blendMode,f.alphaBlendState.blendMode=m.alphaBlendState.blendMode),F&&(C.blendFuncSeparateiOES(o,m.rgbBlendState.blendSrcFactor,m.rgbBlendState.blendDstFactor,m.alphaBlendState.blendSrcFactor,m.alphaBlendState.blendDstFactor),f.rgbBlendState.blendSrcFactor=m.rgbBlendState.blendSrcFactor,f.alphaBlendState.blendSrcFactor=m.alphaBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor=m.rgbBlendState.blendDstFactor,f.alphaBlendState.blendDstFactor=m.alphaBlendState.blendDstFactor)},a.prototype.applyAttachmentState=function(o,f){var m=this.gl;o.channelWriteMask!==f.channelWriteMask&&(m.colorMask(!!(f.channelWriteMask&cf.RED),!!(f.channelWriteMask&cf.GREEN),!!(f.channelWriteMask&cf.BLUE),!!(f.channelWriteMask&cf.ALPHA)),o.channelWriteMask=f.channelWriteMask);var T=o.rgbBlendState.blendMode!==f.rgbBlendState.blendMode||o.alphaBlendState.blendMode!==f.alphaBlendState.blendMode,C=o.rgbBlendState.blendSrcFactor!==f.rgbBlendState.blendSrcFactor||o.alphaBlendState.blendSrcFactor!==f.alphaBlendState.blendSrcFactor||o.rgbBlendState.blendDstFactor!==f.rgbBlendState.blendDstFactor||o.alphaBlendState.blendDstFactor!==f.alphaBlendState.blendDstFactor;(C||T)&&(Pv(o.rgbBlendState)&&Pv(o.alphaBlendState)?m.enable(m.BLEND):Pv(f.rgbBlendState)&&Pv(f.alphaBlendState)&&m.disable(m.BLEND)),T&&(m.blendEquationSeparate(f.rgbBlendState.blendMode,f.alphaBlendState.blendMode),o.rgbBlendState.blendMode=f.rgbBlendState.blendMode,o.alphaBlendState.blendMode=f.alphaBlendState.blendMode),C&&(m.blendFuncSeparate(f.rgbBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor,f.alphaBlendState.blendSrcFactor,f.alphaBlendState.blendDstFactor),o.rgbBlendState.blendSrcFactor=f.rgbBlendState.blendSrcFactor,o.alphaBlendState.blendSrcFactor=f.alphaBlendState.blendSrcFactor,o.rgbBlendState.blendDstFactor=f.rgbBlendState.blendDstFactor,o.alphaBlendState.blendDstFactor=f.alphaBlendState.blendDstFactor)},a.prototype.setMegaState=function(o){var f=this.gl,m=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var T=0;T<o.attachmentsState.length;T++)this.applyAttachmentStateIndexed(T,m.attachmentsState[0],o.attachmentsState[0]);else Va(o.attachmentsState.length===1),this.applyAttachmentState(m.attachmentsState[0],o.attachmentsState[0]);Qx(m.blendConstant,o.blendConstant)||(f.blendColor(o.blendConstant.r,o.blendConstant.g,o.blendConstant.b,o.blendConstant.a),sT(m.blendConstant,o.blendConstant)),m.depthCompare!==o.depthCompare&&(f.depthFunc(o.depthCompare),m.depthCompare=o.depthCompare),!!m.depthWrite!=!!o.depthWrite&&(f.depthMask(o.depthWrite),m.depthWrite=o.depthWrite),!!m.stencilWrite!=!!o.stencilWrite&&(f.stencilMask(o.stencilWrite?255:0),m.stencilWrite=o.stencilWrite);var C=!1;if(!G1(m.stencilFront,o.stencilFront)){C=!0;var L=o.stencilFront,F=L.passOp,V=L.failOp,ae=L.depthFailOp,Ae=L.compare;(m.stencilFront.passOp!==F||m.stencilFront.failOp!==V||m.stencilFront.depthFailOp!==ae)&&(f.stencilOpSeparate(f.FRONT,V,ae,F),m.stencilFront.passOp=F,m.stencilFront.failOp=V,m.stencilFront.depthFailOp=ae),m.stencilFront.compare!==Ae&&(this.setStencilReference(0),m.stencilFront.compare=Ae)}if(!G1(m.stencilBack,o.stencilBack)){C=!0;var Ce=o.stencilBack,F=Ce.passOp,V=Ce.failOp,ae=Ce.depthFailOp,Ae=Ce.compare;(m.stencilBack.passOp!==F||m.stencilBack.failOp!==V||m.stencilBack.depthFailOp!==ae)&&(f.stencilOpSeparate(f.BACK,V,ae,F),m.stencilBack.passOp=F,m.stencilBack.failOp=V,m.stencilBack.depthFailOp=ae),m.stencilBack.compare!==Ae&&(this.setStencilReference(0),m.stencilBack.compare=Ae)}(m.stencilFront.mask!==o.stencilFront.mask||m.stencilBack.mask!==o.stencilBack.mask)&&(C=!0,m.stencilFront.mask=o.stencilFront.mask,m.stencilBack.mask=o.stencilBack.mask),C&&this.applyStencil(),m.cullMode!==o.cullMode&&(m.cullMode===dh.NONE?f.enable(f.CULL_FACE):o.cullMode===dh.NONE&&f.disable(f.CULL_FACE),o.cullMode===dh.BACK?f.cullFace(f.BACK):o.cullMode===dh.FRONT?f.cullFace(f.FRONT):o.cullMode===dh.FRONT_AND_BACK&&f.cullFace(f.FRONT_AND_BACK),m.cullMode=o.cullMode),m.frontFace!==o.frontFace&&(f.frontFace(o.frontFace),m.frontFace=o.frontFace),m.polygonOffset!==o.polygonOffset&&(o.polygonOffset?f.enable(f.POLYGON_OFFSET_FILL):f.disable(f.POLYGON_OFFSET_FILL),m.polygonOffset=o.polygonOffset),(m.polygonOffsetFactor!==o.polygonOffsetFactor||m.polygonOffsetUnits!==o.polygonOffsetUnits)&&(f.polygonOffset(o.polygonOffsetFactor,o.polygonOffsetUnits),m.polygonOffsetFactor=o.polygonOffsetFactor,m.polygonOffsetUnits=o.polygonOffsetUnits)},a.prototype.validatePipelineFormats=function(o){for(var f=0;f<this.currentColorAttachments.length;f++)var m=this.currentColorAttachments[f];this.currentDepthStencilAttachment&&Va(this.currentDepthStencilAttachment.format===o.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&Va(this.currentSampleCount===o.sampleCount)},a.prototype.setPipeline=function(o){var f=this;if(this.renderBundle){this.renderBundle.push(function(){return f.setPipeline(o)});return}this.currentPipeline=o,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var m=this.currentPipeline.program;if(this.useProgram(m),m.compileState===vd.NeedsBind){var T=this.gl,C=m.gl_program,L=m.descriptor,F=eb(L.vertex.glsl,S3);if(Ho(T))for(var V=0;V<F.length;V++){var ae=(0,To.CR)(F[V],2),Ae=ae[1],Ce=T.getUniformBlockIndex(C,Ae);Ce!==-1&&Ce!==4294967295&&T.uniformBlockBinding(C,Ce,V)}for(var Ye=eb(L.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),V=0;V<Ye.length;V++){var Bt=(0,To.CR)(Ye[V],3),rn=Bt[1],Sn=Bt[2],lr=T.getUniformLocation(C,rn);T.uniform1i(lr,parseInt(Sn))}m.compileState=vd.ReadyToUse}},a.prototype.setVertexInput=function(o,f,m){var T,C,L=this,F;if(this.renderBundle){this.renderBundle.push(function(){return L.setVertexInput(o,f,m)});return}if(o!==null){Va(this.currentPipeline.inputLayout===o);var V=o;this.bindVAO(V.vao);for(var ae=this.gl,Ae=0;Ae<V.vertexBufferDescriptors.length;Ae++){var Ce=V.vertexBufferDescriptors[Ae],Ye=Ce.arrayStride,Bt=Ce.attributes;try{for(var rn=(T=void 0,(0,To.XA)(Bt)),Sn=rn.next();!Sn.done;Sn=rn.next()){var lr=Sn.value,Br=lr.shaderLocation,Er=lr.offset,ui=Ho(ae)?Br:(F=V.program.attributes[Br])===null||F===void 0?void 0:F.location;if(!(0,$d.Z)(ui)){var ji=f[Ae];if(ji===null)continue;var Po=lr.vertexFormat;ae.bindBuffer(ae.ARRAY_BUFFER,Cv(ji.buffer));var no=(ji.offset||0)+Er;ae.vertexAttribPointer(ui,Po.size,Po.type,Po.normalized,Ye,no)}}}catch(ro){T={error:ro}}finally{try{Sn&&!Sn.done&&(C=rn.return)&&C.call(rn)}finally{if(T)throw T.error}}}if(Va(m!==null==(V.indexBufferFormat!==null)),m!==null){var Gr=m.buffer;Va(Gr.usage===Rl.INDEX),ae.bindBuffer(ae.ELEMENT_ARRAY_BUFFER,Cv(Gr)),this.currentIndexBufferByteOffset=m.offset||0}else this.currentIndexBufferByteOffset=null}else Va(this.currentPipeline.inputLayout===null),Va(m===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},a.prototype.setStencilReference=function(o){this.currentStencilRef!==o&&(this.currentStencilRef=o,this.applyStencil())},a.prototype.draw=function(o,f,m,T){var C,L=this;if(this.renderBundle){this.renderBundle.push(function(){return L.draw(o,f,m,T)});return}var F=this.gl,V=this.currentPipeline;if(f){var ae=[V.drawMode,m||0,o,f];Ho(F)?F.drawArraysInstanced.apply(F,(0,To.ev)([],(0,To.CR)(ae),!1)):(C=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(C,(0,To.ev)([],(0,To.CR)(ae),!1))}else F.drawArrays(V.drawMode,m,o);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndexed=function(o,f,m,T,C){var L,F=this;if(this.renderBundle){this.renderBundle.push(function(){return F.drawIndexed(o,f,m,T,C)});return}var V=this.gl,ae=this.currentPipeline,Ae=Kd(ae.inputLayout),Ce=Kd(this.currentIndexBufferByteOffset)+m*Ae.indexBufferCompByteSize;if(f){var Ye=[ae.drawMode,o,Ae.indexBufferType,Ce,f];Ho(V)?V.drawElementsInstanced.apply(V,(0,To.ev)([],(0,To.CR)(Ye),!1)):(L=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(L,(0,To.ev)([],(0,To.CR)(Ye),!1))}else V.drawElements(ae.drawMode,o,Ae.indexBufferType,Ce);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndirect=function(o,f){},a.prototype.drawIndexedIndirect=function(o,f){},a.prototype.beginOcclusionQuery=function(o){var f=this.gl;if(Ho(f)){var m=this.currentRenderPassDescriptor.occlusionQueryPool;f.beginQuery(m.gl_query_type,m.gl_query[o])}},a.prototype.endOcclusionQuery=function(){var o=this.gl;if(Ho(o)){var f=this.currentRenderPassDescriptor.occlusionQueryPool;o.endQuery(f.gl_query_type)}},a.prototype.pipelineQueryReady=function(o){var f=o;return this.queryProgramReady(f.program)},a.prototype.pipelineForceReady=function(o){},a.prototype.endPass=function(){for(var o=this.gl,f=Ho(o),m=this.currentColorResolveTos.length===1&&this.currentColorResolveTos[0]===this.scTexture,T=!1,C=0;C<this.currentColorAttachments.length;C++){var L=this.currentColorAttachments[C];if(L!==null){var F=this.currentColorResolveTos[C],V=!1;F!==null&&(Va(L.width===F.width&&L.height===F.height),this.setScissorRectEnabled(!1),m||(f&&o.bindFramebuffer(o.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&f&&this.bindFramebufferAttachment(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,L,this.currentColorAttachmentLevels[C])),V=!0,m||(F===this.scTexture?o.bindFramebuffer(f?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,this.scPlatformFramebuffer):(o.bindFramebuffer(f?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&o.framebufferTexture2D(f?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,F.gl_texture,this.currentColorResolveToLevels[C]))),m||(f?(o.blitFramebuffer(0,0,L.width,L.height,0,0,F.width,F.height,o.COLOR_BUFFER_BIT,o.LINEAR),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(L,F)),T=!0),this.currentRenderPassDescriptor.colorStore[C]||!m&&!V&&(o.bindFramebuffer(f?On.READ_FRAMEBUFFER:On.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(f?On.READ_FRAMEBUFFER:On.FRAMEBUFFER,o.COLOR_ATTACHMENT0,L,this.currentColorAttachmentLevels[C])),m||o.bindFramebuffer(f?On.READ_FRAMEBUFFER:On.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var ae=this.currentDepthStencilAttachment;if(ae){var Ae=this.currentDepthStencilResolveTo,V=!1;Ae&&(Va(ae.width===Ae.width&&ae.height===Ae.height),this.setScissorRectEnabled(!1),m||(o.bindFramebuffer(f?On.READ_FRAMEBUFFER:On.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),o.bindFramebuffer(f?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(f?On.READ_FRAMEBUFFER:On.FRAMEBUFFER,ae),this.bindFramebufferDepthStencilAttachment(f?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,Ae))),V=!0,m||(f&&o.blitFramebuffer(0,0,ae.width,ae.height,0,0,Ae.width,Ae.height,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(f?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,null)),T=!0),!m&&!this.currentRenderPassDescriptor.depthStencilStore&&(V||(o.bindFramebuffer(f?On.READ_FRAMEBUFFER:On.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(f?On.READ_FRAMEBUFFER:On.FRAMEBUFFER,ae),V=!0),f&&o.invalidateFramebuffer(o.READ_FRAMEBUFFER,[o.DEPTH_STENCIL_ATTACHMENT])),!m&&V&&o.bindFramebuffer(f?On.READ_FRAMEBUFFER:On.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}!m&&!T&&o.bindFramebuffer(f?On.DRAW_FRAMEBUFFER:On.FRAMEBUFFER,null)},a.prototype.setScissorRectEnabled=function(o){if(this.currentScissorEnabled!==o){var f=this.gl;o?f.enable(f.SCISSOR_TEST):f.disable(f.SCISSOR_TEST),this.currentScissorEnabled=o}},a.prototype.applyStencil=function(){(0,$d.Z)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(On.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(On.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},a.prototype.getFallbackTexture=function(o){var f=o.gl_target,m=o.formatKind;if(f===On.TEXTURE_2D)return m===Bu.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===On.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===On.TEXTURE_3D)return this.fallbackTexture3D;if(f===On.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.submitBlitRenderPass=function(o,f){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:Rl.VERTEX|Rl.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:pg.VERTEX,attributes:[{format:ar.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:xc.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[ar.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:vm(wv)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:o.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:o}));var m=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var T=this.createRenderPass({colorAttachment:[o],colorResolveTo:[f],colorClearColor:[HC]}),C=this.getCanvas(),L=C.width,F=C.height;T.setPipeline(this.blitRenderPipeline),T.setBindings(this.blitBindings),T.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),T.setViewport(0,0,L,F),this.gl.disable(this.gl.BLEND),T.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=m,this.inBlitRenderPass=!1},a}(),a2=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,To.mG)(this,void 0,void 0,function(){var f,m,T,C,L,F,V,ae,Ae,Ce,Ye,Bt,rn;return(0,To.Jh)(this,function(Sn){return f=this.pluginOptions,m=f.targets,T=f.xrCompatible,C=f.antialias,L=C===void 0?!1:C,F=f.preserveDrawingBuffer,V=F===void 0?!1:F,ae=f.premultipliedAlpha,Ae=ae===void 0?!0:ae,Ce=f.shaderDebug,Ye=f.trackResources,Bt={antialias:L,preserveDrawingBuffer:V,stencil:!0,premultipliedAlpha:Ae,xrCompatible:T},this.handleContextEvents(o),m.includes("webgl2")&&(rn=o.getContext("webgl2",Bt)||o.getContext("experimental-webgl2",Bt)),!rn&&m.includes("webgl1")&&(rn=o.getContext("webgl",Bt)||o.getContext("experimental-webgl",Bt)),[2,new wT(rn,{shaderDebug:Ce,trackResources:Ye})]})})},a.prototype.handleContextEvents=function(o){var f=this.pluginOptions,m=f.onContextLost,T=f.onContextRestored,C=f.onContextCreationError;C&&o.addEventListener("webglcontextcreationerror",C,!1),m&&o.addEventListener("webglcontextlost",m,!1),T&&o.addEventListener("webglcontextrestored",T,!1)},a}();let iu;const s2=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&s2.decode();let z_=null;function rb(){return(z_===null||z_.byteLength===0)&&(z_=new Uint8Array(iu.memory.buffer)),z_}function ib(a,o){return a=a>>>0,s2.decode(rb().subarray(a,a+o))}const Iv=new Array(128).fill(void 0);Iv.push(void 0,null,!0,!1);let U_=Iv.length;function T3(a){U_===Iv.length&&Iv.push(Iv.length+1);const o=U_;return U_=Iv[o],Iv[o]=a,o}function ob(a){return Iv[a]}function w3(a){a<132||(Iv[a]=U_,U_=a)}function AT(a){const o=ob(a);return w3(a),o}let gy=0;const ab=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},OT=typeof ab.encodeInto=="function"?function(a,o){return ab.encodeInto(a,o)}:function(a,o){const f=ab.encode(a);return o.set(f),{read:a.length,written:f.length}};function sb(a,o,f){if(f===void 0){const F=ab.encode(a),V=o(F.length,1)>>>0;return rb().subarray(V,V+F.length).set(F),gy=F.length,V}let m=a.length,T=o(m,1)>>>0;const C=rb();let L=0;for(;L<m;L++){const F=a.charCodeAt(L);if(F>127)break;C[T+L]=F}if(L!==m){L!==0&&(a=a.slice(L)),T=f(T,m,m=L+a.length*3,1)>>>0;const F=rb().subarray(T+L,T+m),V=OT(a,F);L+=V.written}return gy=L,T}let yy=null;function lb(){return(yy===null||yy.byteLength===0)&&(yy=new Int32Array(iu.memory.buffer)),yy}function A3(a,o,f){let m,T;try{const F=iu.__wbindgen_add_to_stack_pointer(-16),V=sb(a,iu.__wbindgen_malloc,iu.__wbindgen_realloc),ae=gy,Ae=sb(o,iu.__wbindgen_malloc,iu.__wbindgen_realloc),Ce=gy;iu.glsl_compile(F,V,ae,Ae,Ce,f);var C=lb()[F/4+0],L=lb()[F/4+1];return m=C,T=L,ib(C,L)}finally{iu.__wbindgen_add_to_stack_pointer(16),iu.__wbindgen_free(m,T,1)}}class _y{static __wrap(o){o=o>>>0;const f=Object.create(_y.prototype);return f.__wbg_ptr=o,f}__destroy_into_raw(){const o=this.__wbg_ptr;return this.__wbg_ptr=0,o}free(){const o=this.__destroy_into_raw();iu.__wbg_wgslcomposer_free(o)}constructor(){const o=iu.wgslcomposer_new();return _y.__wrap(o)}load_composable(o){const f=sb(o,iu.__wbindgen_malloc,iu.__wbindgen_realloc),m=gy;iu.wgslcomposer_load_composable(this.__wbg_ptr,f,m)}wgsl_compile(o){let f,m;try{const L=iu.__wbindgen_add_to_stack_pointer(-16),F=sb(o,iu.__wbindgen_malloc,iu.__wbindgen_realloc),V=gy;iu.wgslcomposer_wgsl_compile(L,this.__wbg_ptr,F,V);var T=lb()[L/4+0],C=lb()[L/4+1];return f=T,m=C,ib(T,C)}finally{iu.__wbindgen_add_to_stack_pointer(16),iu.__wbindgen_free(f,m,1)}}}function O3(a,o){return P5(this,null,function*(){if(typeof Response=="function"&&a instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(a,o)}catch(m){if(a.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",m);else throw m}const f=yield a.arrayBuffer();return yield WebAssembly.instantiate(f,o)}else{const f=yield WebAssembly.instantiate(a,o);return f instanceof WebAssembly.Instance?{instance:f,module:a}:f}})}function C3(){const a={};return a.wbg={},a.wbg.__wbindgen_string_new=function(o,f){const m=ib(o,f);return T3(m)},a.wbg.__wbindgen_object_drop_ref=function(o){AT(o)},a.wbg.__wbg_log_1d3ae0273d8f4f8a=function(o){console.log(ob(o))},a.wbg.__wbg_log_576ca876af0d4a77=function(o,f){console.log(ob(o),ob(f))},a.wbg.__wbindgen_throw=function(o,f){throw new Error(ib(o,f))},a}function R3(a,o){return iu=a.exports,CT.__wbindgen_wasm_module=o,yy=null,z_=null,iu}function CT(a){return P5(this,null,function*(){if(iu!==void 0)return iu;const o=C3();(typeof a=="string"||typeof Request=="function"&&a instanceof Request||typeof URL=="function"&&a instanceof URL)&&(a=fetch(a));const{instance:f,module:m}=yield O3(yield a,o);return R3(f,m)})}var Xc;(function(a){a[a.COPY_SRC=1]="COPY_SRC",a[a.COPY_DST=2]="COPY_DST",a[a.TEXTURE_BINDING=4]="TEXTURE_BINDING",a[a.STORAGE_BINDING=8]="STORAGE_BINDING",a[a.STORAGE=8]="STORAGE",a[a.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Xc||(Xc={}));var l2;(function(a){a[a.READ=1]="READ",a[a.WRITE=2]="WRITE"})(l2||(l2={}));function RT(a){var o=0;return a&Yf.SAMPLED&&(o|=Xc.TEXTURE_BINDING|Xc.COPY_DST|Xc.COPY_SRC),a&Yf.STORAGE&&(o|=Xc.TEXTURE_BINDING|Xc.STORAGE_BINDING|Xc.COPY_SRC|Xc.COPY_DST),a&Yf.RENDER_TARGET&&(o|=Xc.RENDER_ATTACHMENT|Xc.TEXTURE_BINDING|Xc.COPY_SRC|Xc.COPY_DST),o}function u2(a){if(a===ar.U8_R_NORM)return"r8unorm";if(a===ar.S8_R_NORM)return"r8snorm";if(a===ar.U8_RG_NORM)return"rg8unorm";if(a===ar.S8_RG_NORM)return"rg8snorm";if(a===ar.U32_R)return"r32uint";if(a===ar.S32_R)return"r32sint";if(a===ar.F32_R)return"r32float";if(a===ar.U16_RG)return"rg16uint";if(a===ar.S16_RG)return"rg16sint";if(a===ar.F16_RG)return"rg16float";if(a===ar.U8_RGBA_RT)return"bgra8unorm";if(a===ar.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(a===ar.U8_RGBA_NORM)return"rgba8unorm";if(a===ar.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(a===ar.S8_RGBA_NORM)return"rgba8snorm";if(a===ar.U32_RG)return"rg32uint";if(a===ar.S32_RG)return"rg32sint";if(a===ar.F32_RG)return"rg32float";if(a===ar.U16_RGBA)return"rgba16uint";if(a===ar.S16_RGBA)return"rgba16sint";if(a===ar.F16_RGBA)return"rgba16float";if(a===ar.F32_RGBA)return"rgba32float";if(a===ar.U32_RGBA)return"rgba32uint";if(a===ar.S32_RGBA)return"rgba32sint";if(a===ar.D24)return"depth24plus";if(a===ar.D24_S8)return"depth24plus-stencil8";if(a===ar.D32F)return"depth32float";if(a===ar.D32F_S8)return"depth32float-stencil8";if(a===ar.BC1)return"bc1-rgba-unorm";if(a===ar.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(a===ar.BC2)return"bc2-rgba-unorm";if(a===ar.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(a===ar.BC3)return"bc3-rgba-unorm";if(a===ar.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(a===ar.BC4_SNORM)return"bc4-r-snorm";if(a===ar.BC4_UNORM)return"bc4-r-unorm";if(a===ar.BC5_SNORM)return"bc5-rg-snorm";if(a===ar.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function M3(a){if(a===ss.TEXTURE_2D)return"2d";if(a===ss.TEXTURE_CUBE_MAP)return"2d";if(a===ss.TEXTURE_2D_ARRAY)return"2d";if(a===ss.TEXTURE_3D)return"3d";throw new Error("whoops")}function P3(a){if(a===ss.TEXTURE_2D)return"2d";if(a===ss.TEXTURE_CUBE_MAP)return"cube";if(a===ss.TEXTURE_2D_ARRAY)return"2d-array";if(a===ss.TEXTURE_3D)return"3d";throw new Error("whoops")}function I3(a){var o=0;return a&Rl.INDEX&&(o|=GPUBufferUsage.INDEX),a&Rl.VERTEX&&(o|=GPUBufferUsage.VERTEX),a&Rl.UNIFORM&&(o|=GPUBufferUsage.UNIFORM),a&Rl.STORAGE&&(o|=GPUBufferUsage.STORAGE),a&Rl.COPY_SRC&&(o|=GPUBufferUsage.COPY_SRC),a&Rl.INDIRECT&&(o|=GPUBufferUsage.INDIRECT),o|=GPUBufferUsage.COPY_DST,o}function c2(a){if(a===ol.CLAMP_TO_EDGE)return"clamp-to-edge";if(a===ol.REPEAT)return"repeat";if(a===ol.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function MT(a){if(a===Du.BILINEAR)return"linear";if(a===Du.POINT)return"nearest";throw new Error("whoops")}function L3(a){if(a===Zc.LINEAR)return"linear";if(a===Zc.NEAREST)return"nearest";if(a===Zc.NO_MIP)return"nearest";throw new Error("whoops")}function by(a){var o=a;return o.gpuBuffer}function D3(a){var o=a;return o.gpuSampler}function N3(a){var o=a;return o.querySet}function B3(a){if(a===cy.OcclusionConservative)return"occlusion";throw new Error("whoops")}function F3(a){switch(a){case xc.TRIANGLES:return"triangle-list";case xc.POINTS:return"point-list";case xc.TRIANGLE_STRIP:return"triangle-strip";case xc.LINES:return"line-list";case xc.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function k3(a){if(a===dh.NONE)return"none";if(a===dh.FRONT)return"front";if(a===dh.BACK)return"back";throw new Error("whoops")}function z3(a){if(a===P_.CCW)return"ccw";if(a===P_.CW)return"cw";throw new Error("whoops")}function U3(a,o){return{topology:F3(a),cullMode:k3(o.cullMode),frontFace:z3(o.frontFace)}}function j_(a){if(a===qa.ZERO)return"zero";if(a===qa.ONE)return"one";if(a===qa.SRC)return"src";if(a===qa.ONE_MINUS_SRC)return"one-minus-src";if(a===qa.DST)return"dst";if(a===qa.ONE_MINUS_DST)return"one-minus-dst";if(a===qa.SRC_ALPHA)return"src-alpha";if(a===qa.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(a===qa.DST_ALPHA)return"dst-alpha";if(a===qa.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(a===qa.CONST)return"constant";if(a===qa.ONE_MINUS_CONSTANT)return"one-minus-constant";if(a===qa.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function j3(a){if(a===uf.ADD)return"add";if(a===uf.SUBSTRACT)return"subtract";if(a===uf.REVERSE_SUBSTRACT)return"reverse-subtract";if(a===uf.MIN)return"min";if(a===uf.MAX)return"max";throw new Error("whoops")}function ym(a){return{operation:j3(a.blendMode),srcFactor:j_(a.blendSrcFactor),dstFactor:j_(a.blendDstFactor)}}function PT(a){return a.blendMode===uf.ADD&&a.blendSrcFactor===qa.ONE&&a.blendDstFactor===qa.ZERO}function ub(a){if(!(PT(a.rgbBlendState)&&PT(a.alphaBlendState)))return{color:ym(a.rgbBlendState),alpha:ym(a.alphaBlendState)}}function _m(a,o){return{format:u2(o),blend:ub(a),writeMask:a.channelWriteMask}}function IT(a,o){return o.attachmentsState.map(function(f,m){return _m(f,a[m])})}function cb(a){if(a===Ja.NEVER)return"never";if(a===Ja.LESS)return"less";if(a===Ja.EQUAL)return"equal";if(a===Ja.LEQUAL)return"less-equal";if(a===Ja.GREATER)return"greater";if(a===Ja.NOTEQUAL)return"not-equal";if(a===Ja.GEQUAL)return"greater-equal";if(a===Ja.ALWAYS)return"always";throw new Error("whoops")}function bm(a){if(a===Nu.KEEP)return"keep";if(a===Nu.REPLACE)return"replace";if(a===Nu.ZERO)return"zero";if(a===Nu.DECREMENT_CLAMP)return"decrement-clamp";if(a===Nu.DECREMENT_WRAP)return"decrement-wrap";if(a===Nu.INCREMENT_CLAMP)return"increment-clamp";if(a===Nu.INCREMENT_WRAP)return"increment-wrap";if(a===Nu.INVERT)return"invert";throw new Error("whoops")}function V3(a,o){if(!(0,$d.Z)(a))return{format:u2(a),depthWriteEnabled:!!o.depthWrite,depthCompare:cb(o.depthCompare),depthBias:o.polygonOffset?o.polygonOffsetUnits:0,depthBiasSlopeScale:o.polygonOffset?o.polygonOffsetFactor:0,stencilFront:{compare:cb(o.stencilFront.compare),passOp:bm(o.stencilFront.passOp),failOp:bm(o.stencilFront.failOp),depthFailOp:bm(o.stencilFront.depthFailOp)},stencilBack:{compare:cb(o.stencilBack.compare),passOp:bm(o.stencilBack.passOp),failOp:bm(o.stencilBack.failOp),depthFailOp:bm(o.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function LT(a){if(a!==null){if(a===ar.U16_R)return"uint16";if(a===ar.U32_R)return"uint32";throw new Error("whoops")}}function DT(a){if(a===pg.VERTEX)return"vertex";if(a===pg.INSTANCE)return"instance";throw new Error("whoops")}function H3(a){if(a===ar.U8_R)return"uint8x2";if(a===ar.U8_RG)return"uint8x2";if(a===ar.U8_RGB)return"uint8x4";if(a===ar.U8_RGBA)return"uint8x4";if(a===ar.U8_RG_NORM)return"unorm8x2";if(a===ar.U8_RGBA_NORM)return"unorm8x4";if(a===ar.S8_RGB_NORM)return"snorm8x4";if(a===ar.S8_RGBA_NORM)return"snorm8x4";if(a===ar.U16_RG_NORM)return"unorm16x2";if(a===ar.U16_RGBA_NORM)return"unorm16x4";if(a===ar.S16_RG_NORM)return"snorm16x2";if(a===ar.S16_RGBA_NORM)return"snorm16x4";if(a===ar.S16_RG)return"uint16x2";if(a===ar.F16_RG)return"float16x2";if(a===ar.F16_RGBA)return"float16x4";if(a===ar.F32_R)return"float32";if(a===ar.F32_RG)return"float32x2";if(a===ar.F32_RGB)return"float32x3";if(a===ar.F32_RGBA)return"float32x4";throw"whoops"}function W3(a){var o=W0(a);switch(o){case ni.BC1:case ni.BC2:case ni.BC3:case ni.BC4_SNORM:case ni.BC4_UNORM:case ni.BC5_SNORM:case ni.BC5_UNORM:return!0;default:return!1}}function G3(a){var o=W0(a);switch(o){case ni.BC1:case ni.BC2:case ni.BC3:case ni.BC4_SNORM:case ni.BC4_UNORM:case ni.BC5_SNORM:case ni.BC5_UNORM:return 4;default:return 1}}function NT(a,o,f,m){switch(f===void 0&&(f=!1),a){case ar.S8_R:case ar.S8_R_NORM:case ar.S8_RG_NORM:case ar.S8_RGB_NORM:case ar.S8_RGBA_NORM:{var T=o instanceof ArrayBuffer?new Int8Array(o):new Int8Array(o);return m&&T.set(new Int8Array(m)),T}case ar.U8_R:case ar.U8_R_NORM:case ar.U8_RG:case ar.U8_RG_NORM:case ar.U8_RGB:case ar.U8_RGB_NORM:case ar.U8_RGB_SRGB:case ar.U8_RGBA:case ar.U8_RGBA_NORM:case ar.U8_RGBA_SRGB:{var C=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&C.set(new Uint8Array(m)),C}case ar.S16_R:case ar.S16_RG:case ar.S16_RG_NORM:case ar.S16_RGB_NORM:case ar.S16_RGBA:case ar.S16_RGBA_NORM:{var L=o instanceof ArrayBuffer?new Int16Array(o):new Int16Array(f?o/2:o);return m&&L.set(new Int16Array(m)),L}case ar.U16_R:case ar.U16_RGB:case ar.U16_RGBA_5551:case ar.U16_RGBA_NORM:case ar.U16_RG_NORM:case ar.U16_R_NORM:{var F=o instanceof ArrayBuffer?new Uint16Array(o):new Uint16Array(f?o/2:o);return m&&F.set(new Uint16Array(m)),F}case ar.S32_R:{var V=o instanceof ArrayBuffer?new Int32Array(o):new Int32Array(f?o/4:o);return m&&V.set(new Int32Array(m)),V}case ar.U32_R:case ar.U32_RG:{var ae=o instanceof ArrayBuffer?new Uint32Array(o):new Uint32Array(f?o/4:o);return m&&ae.set(new Uint32Array(m)),ae}case ar.F32_R:case ar.F32_RG:case ar.F32_RGB:case ar.F32_RGBA:{var Ae=o instanceof ArrayBuffer?new Float32Array(o):new Float32Array(f?o/4:o);return m&&Ae.set(new Float32Array(m)),Ae}}var Ce=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&Ce.set(new Uint8Array(m)),Ce}function Z3(a){var o=(a&32768)>>15,f=(a&31744)>>10,m=a&1023;return f===0?(o?-1:1)*Math.pow(2,-14)*(m/Math.pow(2,10)):f==31?m?NaN:(o?-1:1)*(1/0):(o?-1:1)*Math.pow(2,f-15)*(1+m/Math.pow(2,10))}function BT(a){switch(a){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var f0=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=a.call(this)||this;return C.id=m,C.device=T,C}return o.prototype.destroy=function(){},o}(hh),X3=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L,F,V=a.call(this,{id:m,device:T})||this;V.type=Hs.Bindings;var ae=C.pipeline;Va(!!ae);var Ae=C.uniformBufferBindings,Ce=C.storageBufferBindings,Ye=C.samplerBindings,Bt=C.storageTextureBindings;V.numUniformBuffers=(Ae==null?void 0:Ae.length)||0;var rn=[[],[],[],[]],Sn=0;if(Ae&&Ae.length)for(var lr=0;lr<Ae.length;lr++){var Br=C.uniformBufferBindings[lr],Er=Br.binding,ui=Br.size,ji=Br.offset,Po=Br.buffer,no={buffer:by(Po),offset:ji!=null?ji:0,size:ui};rn[0].push({binding:Er!=null?Er:Sn++,resource:no})}if(Ye&&Ye.length){Sn=0;for(var lr=0;lr<Ye.length;lr++){var Gr=(0,To.pi)((0,To.pi)({},Ye[lr]),W1),Er=C.samplerBindings[lr],ro=Er.texture!==null?Er.texture:V.device.getFallbackTexture(Gr);Gr.dimension=ro.dimension,Gr.formatKind=aT(ro.format);var Da=ro.gpuTextureView;if(rn[1].push({binding:(L=Er.textureBinding)!==null&&L!==void 0?L:Sn++,resource:Da}),Er.samplerBinding!==-1){var is=Er.sampler!==null?Er.sampler:V.device.getFallbackSampler(Gr),Qo=D3(is);rn[1].push({binding:(F=Er.samplerBinding)!==null&&F!==void 0?F:Sn++,resource:Qo})}}}if(Ce&&Ce.length){Sn=0;for(var lr=0;lr<Ce.length;lr++){var ps=C.storageBufferBindings[lr],Er=ps.binding,ui=ps.size,ji=ps.offset,Po=ps.buffer,no={buffer:by(Po),offset:ji!=null?ji:0,size:ui};rn[2].push({binding:Er!=null?Er:Sn++,resource:no})}}if(Bt&&Bt.length){Sn=0;for(var lr=0;lr<Bt.length;lr++){var es=C.storageTextureBindings[lr],Er=es.binding,ro=es.texture,Da=ro.gpuTextureView;rn[3].push({binding:Er!=null?Er:Sn++,resource:Da})}}var ls=rn.findLastIndex(function(Qd){return!!Qd.length});return V.gpuBindGroup=rn.map(function(Qd,Jd){return Jd<=ls&&V.device.device.createBindGroup({layout:ae.getBindGroupLayout(Jd),entries:Qd})}),V}return o}(f0),$3=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;L.type=Hs.Buffer;var F=C.usage,V=C.viewOrSize,ae=!!(F&Rl.MAP_READ);L.usage=I3(F),ae&&(L.usage=Rl.MAP_READ|Rl.COPY_DST);var Ae=!(0,dm.Z)(V);if(L.view=(0,dm.Z)(V)?null:V,L.size=(0,dm.Z)(V)?L_(V,4):L_(V.byteLength,4),(0,dm.Z)(V))L.gpuBuffer=L.device.device.createBuffer({usage:L.usage,size:L.size,mappedAtCreation:ae?Ae:!1});else{L.gpuBuffer=L.device.device.createBuffer({usage:L.usage,size:L.size,mappedAtCreation:!0});var Ce=V&&V.constructor||Float32Array;new Ce(L.gpuBuffer.getMappedRange()).set(V),L.gpuBuffer.unmap()}return L}return o.prototype.setSubData=function(f,m,T,C){T===void 0&&(T=0),C===void 0&&(C=0);var L=this.gpuBuffer;C=C||m.byteLength,C=Math.min(C,this.size-f);var F=m.byteOffset+T,V=F+C,ae=C+3&-4;if(ae!==C){var Ae=new Uint8Array(m.buffer.slice(F,V));m=new Uint8Array(ae),m.set(Ae),T=0,F=0,V=ae,C=ae}for(var Ce=1024*1024*15,Ye=0;V-(F+Ye)>Ce;)this.device.device.queue.writeBuffer(L,f+Ye,m.buffer,F+Ye,Ce),Ye+=Ce;this.device.device.queue.writeBuffer(L,f+Ye,m.buffer,F+Ye,C-Ye)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuBuffer.destroy()},o}(f0),FT=function(){function a(){this.gpuComputePassEncoder=null}return a.prototype.dispatchWorkgroups=function(o,f,m){this.gpuComputePassEncoder.dispatchWorkgroups(o,f,m)},a.prototype.dispatchWorkgroupsIndirect=function(o,f){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(o.gpuBuffer,f)},a.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},a.prototype.beginComputePass=function(o){Va(this.gpuComputePassEncoder===null),this.frameCommandEncoder=o,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},a.prototype.setPipeline=function(o){var f=o,m=Kd(f.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(m)},a.prototype.setBindings=function(o){var f=this,m=o;m.gpuBindGroup.forEach(function(T,C){T&&f.gpuComputePassEncoder.setBindGroup(C,m.gpuBindGroup[C])})},a.prototype.pushDebugGroup=function(o){this.gpuComputePassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuComputePassEncoder.insertDebugMarker(o)},a}(),xm=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;L.type=Hs.ComputePipeline,L.gpuComputePipeline=null,L.descriptor=C;var F=C.program,V=F.computeStage;if(V===null)return L;var ae={layout:"auto",compute:(0,To.pi)({},V)};return L.gpuComputePipeline=L.device.device.createComputePipeline(ae),L.name!==void 0&&(L.gpuComputePipeline.label=L.name),L}return o.prototype.getBindGroupLayout=function(f){return this.gpuComputePipeline.getBindGroupLayout(f)},o}(f0),fb=function(a){(0,To.ZT)(o,a);function o(f){var m,T,C,L,F=f.id,V=f.device,ae=f.descriptor,Ae=a.call(this,{id:F,device:V})||this;Ae.type=Hs.InputLayout;var Ce=[];try{for(var Ye=(0,To.XA)(ae.vertexBufferDescriptors),Bt=Ye.next();!Bt.done;Bt=Ye.next()){var rn=Bt.value,Sn=rn.arrayStride,lr=rn.stepMode,Br=rn.attributes;Ce.push({arrayStride:Sn,stepMode:DT(lr),attributes:[]});try{for(var Er=(C=void 0,(0,To.XA)(Br)),ui=Er.next();!ui.done;ui=Er.next()){var ji=ui.value,Po=ji.shaderLocation,no=ji.format,Gr=ji.offset;Ce[Ce.length-1].attributes.push({shaderLocation:Po,format:H3(no),offset:Gr})}}catch(ro){C={error:ro}}finally{try{ui&&!ui.done&&(L=Er.return)&&L.call(Er)}finally{if(C)throw C.error}}}}catch(ro){m={error:ro}}finally{try{Bt&&!Bt.done&&(T=Ye.return)&&T.call(Ye)}finally{if(m)throw m.error}}return Ae.indexFormat=LT(ae.indexBufferFormat),Ae.buffers=Ce,Ae}return o}(f0),f2=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;return L.type=Hs.Program,L.vertexStage=null,L.fragmentStage=null,L.computeStage=null,L.descriptor=C,C.vertex&&(L.vertexStage=L.createShaderStage(C.vertex,"vertex")),C.fragment&&(L.fragmentStage=L.createShaderStage(C.fragment,"fragment")),C.compute&&(L.computeStage=L.createShaderStage(C.compute,"compute")),L}return o.prototype.setUniformsLegacy=function(f){},o.prototype.createShaderStage=function(f,m){var T,C,L=f.glsl,F=f.wgsl,V=f.entryPoint,ae=f.postprocess,Ae=!1,Ce=F;if(!Ce)try{Ce=this.device.glsl_compile(L,m,Ae)}catch(Br){throw console.error(Br,L),new Error("whoops")}var Ye=function(Br){if(!Ce.includes(Br))return"continue";Ce=Ce.replace("var T_".concat(Br,": texture_2d<f32>;"),"var T_".concat(Br,": texture_depth_2d;")),Ce=Ce.replace(new RegExp("textureSample\\(T_".concat(Br,"(.*)\\);$"),"gm"),function(Er,ui){return"vec4<f32>(textureSample(T_".concat(Br).concat(ui,"), 0.0, 0.0, 0.0);")})};try{for(var Bt=(0,To.XA)(["u_TextureFramebufferDepth"]),rn=Bt.next();!rn.done;rn=Bt.next()){var Sn=rn.value;Ye(Sn)}}catch(Br){T={error:Br}}finally{try{rn&&!rn.done&&(C=Bt.return)&&C.call(Bt)}finally{if(T)throw T.error}}ae&&(Ce=ae(Ce));var lr=this.device.device.createShaderModule({code:Ce});return{module:lr,entryPoint:V||"main"}},o}(f0),kT=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;L.type=Hs.QueryPool;var F=C.elemCount,V=C.type;return L.querySet=L.device.device.createQuerySet({type:B3(V),count:F}),L.resolveBuffer=L.device.device.createBuffer({size:F*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),L.cpuBuffer=L.device.device.createBuffer({size:F*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),L.results=null,L}return o.prototype.queryResultOcclusion=function(f){return this.results===null?null:this.results[f]!==BigInt(0)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},o}(f0),zT=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=a.call(this,{id:m,device:T})||this;return C.type=Hs.Readback,C}return o.prototype.readTexture=function(f,m,T,C,L,F,V,ae){return V===void 0&&(V=0),(0,To.mG)(this,void 0,void 0,function(){var Ae,Ce,Ye,Bt,rn,Sn,lr,Br;return(0,To.Jh)(this,function(Er){return Ae=f,Ce=0,Ye=BT(Ae.gpuTextureformat),Bt=Math.ceil(C/Ye.width)*Ye.length,rn=Math.ceil(Bt/256)*256,Sn=rn*L,lr=this.device.createBuffer({usage:Rl.STORAGE|Rl.MAP_READ|Rl.COPY_DST,hint:c0.STATIC,viewOrSize:Sn}),Br=this.device.device.createCommandEncoder(),Br.copyTextureToBuffer({texture:Ae.gpuTexture,mipLevel:0,origin:{x:m,y:T,z:Math.max(Ce,0)}},{buffer:lr.gpuBuffer,offset:0,bytesPerRow:rn},{width:C,height:L,depthOrArrayLayers:1}),this.device.device.queue.submit([Br.finish()]),[2,this.readBuffer(lr,0,F.byteLength===Sn?F:null,V,Sn,Ae.format,!0,!1,Bt,rn,L)]})})},o.prototype.readTextureSync=function(f,m,T,C,L,F,V,ae){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},o.prototype.readBuffer=function(f,m,T,C,L,F,V,ae,Ae,Ce,Ye){var Bt=this;m===void 0&&(m=0),T===void 0&&(T=null),L===void 0&&(L=0),F===void 0&&(F=ar.U8_RGB),V===void 0&&(V=!1),Ae===void 0&&(Ae=0),Ce===void 0&&(Ce=0),Ye===void 0&&(Ye=0);var rn=f,Sn=L||rn.size,lr=T||rn.view,Br=lr&&lr.constructor&&lr.constructor.BYTES_PER_ELEMENT||oT(F),Er=rn;if(!(rn.usage&Rl.MAP_READ&&rn.usage&Rl.COPY_DST)){var ui=this.device.device.createCommandEncoder();Er=this.device.createBuffer({usage:Rl.STORAGE|Rl.MAP_READ|Rl.COPY_DST,hint:c0.STATIC,viewOrSize:Sn}),ui.copyBufferToBuffer(rn.gpuBuffer,m,Er.gpuBuffer,0,Sn),this.device.device.queue.submit([ui.finish()])}return new Promise(function(ji,Po){Er.gpuBuffer.mapAsync(l2.READ,m,Sn).then(function(){var no=Er.gpuBuffer.getMappedRange(m,Sn),Gr=lr;if(V)Gr===null?Gr=NT(F,Sn,!0,no):Gr=NT(F,Gr.buffer,void 0,no);else if(Gr===null)switch(Br){case 1:Gr=new Uint8Array(Sn),Gr.set(new Uint8Array(no));break;case 2:Gr=Bt.getHalfFloatAsFloatRGBAArrayBuffer(Sn/2,no);break;case 4:Gr=new Float32Array(Sn/4),Gr.set(new Float32Array(no));break}else switch(Br){case 1:Gr=new Uint8Array(Gr.buffer),Gr.set(new Uint8Array(no));break;case 2:Gr=Bt.getHalfFloatAsFloatRGBAArrayBuffer(Sn/2,no,lr);break;case 4:var ro=lr&&lr.constructor||Float32Array;Gr=new ro(Gr.buffer),Gr.set(new ro(no));break}if(Ae!==Ce){Br===1&&!V&&(Ae*=2,Ce*=2);for(var Da=new Uint8Array(Gr.buffer),is=Ae,Qo=0,ps=1;ps<Ye;++ps){Qo=ps*Ce;for(var es=0;es<Ae;++es)Da[is++]=Da[Qo++]}Br!==0&&!V?Gr=new Float32Array(Da.buffer,0,is/4):Gr=new Uint8Array(Da.buffer,0,is)}Er.gpuBuffer.unmap(),ji(Gr)},function(no){return Po(no)})})},o.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(f,m,T){T||(T=new Float32Array(f));for(var C=new Uint16Array(m);f--;)T[f]=Z3(C[f]);return T},o}(f0),hb=function(){function a(o){this.device=o,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return a.prototype.getEncoder=function(){var o;return((o=this.renderBundle)===null||o===void 0?void 0:o.renderBundleEncoder)||this.gpuRenderPassEncoder},a.prototype.getTextureView=function(o,f){return Va(f<o.mipLevelCount),o.mipLevelCount===1?o.gpuTextureView:o.gpuTexture.createView({baseMipLevel:f,mipLevelCount:1})},a.prototype.setRenderPassDescriptor=function(o){var f,m,T,C,L,F;this.descriptor=o,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var V=o.colorAttachment.length;this.gfxColorAttachment.length=V,this.gfxColorResolveTo.length=V;for(var ae=0;ae<o.colorAttachment.length;ae++){var Ae=o.colorAttachment[ae],Ce=o.colorResolveTo[ae];if(Ae===null&&Ce!==null&&(Ae=Ce,Ce=null),this.gfxColorAttachment[ae]=Ae,this.gfxColorResolveTo[ae]=Ce,this.gfxColorAttachmentLevel[ae]=((f=o.colorAttachmentLevel)===null||f===void 0?void 0:f[ae])||0,this.gfxColorResolveToLevel[ae]=((m=o.colorResolveToLevel)===null||m===void 0?void 0:m[ae])||0,Ae!==null){this.gpuColorAttachments[ae]===void 0&&(this.gpuColorAttachments[ae]={});var Ye=this.gpuColorAttachments[ae];Ye.view=this.getTextureView(Ae,((T=this.gfxColorAttachmentLevel)===null||T===void 0?void 0:T[ae])||0);var Bt=(L=(C=o.colorClearColor)===null||C===void 0?void 0:C[ae])!==null&&L!==void 0?L:"load";Bt==="load"?Ye.loadOp="load":(Ye.loadOp="clear",Ye.clearValue=Bt),Ye.storeOp=!((F=o.colorStore)===null||F===void 0)&&F[ae]?"store":"discard",Ye.resolveTarget=void 0,Ce!==null&&(Ae.sampleCount>1?Ye.resolveTarget=this.getTextureView(Ce,this.gfxColorResolveToLevel[ae]):Ye.storeOp="store")}else{this.gpuColorAttachments.length=ae,this.gfxColorAttachment.length=ae,this.gfxColorResolveTo.length=ae;break}}if(this.gfxDepthStencilAttachment=o.depthStencilAttachment,this.gfxDepthStencilResolveTo=o.depthStencilResolveTo,o.depthStencilAttachment){var rn=o.depthStencilAttachment,Ye=this.gpuDepthStencilAttachment;Ye.view=rn.gpuTextureView;var Sn=!!(Yd(rn.format)&mo.Depth);Sn?(o.depthClearValue==="load"?Ye.depthLoadOp="load":(Ye.depthLoadOp="clear",Ye.depthClearValue=o.depthClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?Ye.depthStoreOp="store":Ye.depthStoreOp="discard"):(Ye.depthLoadOp=void 0,Ye.depthStoreOp=void 0);var lr=!!(Yd(rn.format)&mo.Stencil);lr?(o.stencilClearValue==="load"?Ye.stencilLoadOp="load":(Ye.stencilLoadOp="clear",Ye.stencilClearValue=o.stencilClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?Ye.stencilStoreOp="store":Ye.stencilStoreOp="discard"):(Ye.stencilLoadOp=void 0,Ye.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,$d.Z)(o.occlusionQueryPool)?void 0:N3(o.occlusionQueryPool)},a.prototype.beginRenderPass=function(o,f){Va(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(f),this.frameCommandEncoder=o,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},a.prototype.flipY=function(o,f){var m=this.device.swapChainHeight;return m-o-f},a.prototype.setViewport=function(o,f,m,T,C,L){C===void 0&&(C=0),L===void 0&&(L=1),this.gpuRenderPassEncoder.setViewport(o,this.flipY(f,T),m,T,C,L)},a.prototype.setScissorRect=function(o,f,m,T){this.gpuRenderPassEncoder.setScissorRect(o,this.flipY(f,T),m,T)},a.prototype.setPipeline=function(o){var f=o,m=Kd(f.gpuRenderPipeline);this.getEncoder().setPipeline(m)},a.prototype.setVertexInput=function(o,f,m){if(o!==null){var T=this.getEncoder(),C=o;m!==null&&T.setIndexBuffer(by(m.buffer),Kd(C.indexFormat),m.offset);for(var L=0;L<f.length;L++){var F=f[L];F!==null&&T.setVertexBuffer(L,by(F.buffer),F.offset)}}},a.prototype.setBindings=function(o){var f=o,m=this.getEncoder();f.gpuBindGroup.forEach(function(T,C){T&&m.setBindGroup(C,f.gpuBindGroup[C])})},a.prototype.setStencilReference=function(o){this.gpuRenderPassEncoder.setStencilReference(o)},a.prototype.draw=function(o,f,m,T){this.getEncoder().draw(o,f,m,T)},a.prototype.drawIndexed=function(o,f,m,T,C){this.getEncoder().drawIndexed(o,f,m,T,C)},a.prototype.drawIndirect=function(o,f){this.getEncoder().drawIndirect(by(o),f)},a.prototype.drawIndexedIndirect=function(o,f){this.getEncoder().drawIndexedIndirect(by(o),f)},a.prototype.beginOcclusionQuery=function(o){this.gpuRenderPassEncoder.beginOcclusionQuery(o)},a.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},a.prototype.pushDebugGroup=function(o){this.gpuRenderPassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuRenderPassEncoder.insertDebugMarker(o)},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle.finish()},a.prototype.executeBundles=function(o){this.gpuRenderPassEncoder.executeBundles(o.map(function(f){return f.renderBundle}))},a.prototype.finish=function(){var o;(o=this.gpuRenderPassEncoder)===null||o===void 0||o.end(),this.gpuRenderPassEncoder=null;for(var f=0;f<this.gfxColorAttachment.length;f++){var m=this.gfxColorAttachment[f],T=this.gfxColorResolveTo[f];m!==null&&T!==null&&m.sampleCount===1&&this.copyAttachment(T,this.gfxColorAttachmentLevel[f],m,this.gfxColorResolveToLevel[f])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},a.prototype.copyAttachment=function(o,f,m,T){Va(m.sampleCount===1);var C={texture:m.gpuTexture,mipLevel:T},L={texture:o.gpuTexture,mipLevel:f};Va(m.width>>>T===o.width>>>f),Va(m.height>>>T===o.height>>>f),Va(!!(m.usage&Xc.COPY_SRC)),Va(!!(o.usage&Xc.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(C,L,[o.width,o.height,1])},a}(),Y3=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=a.call(this,{id:m,device:T})||this;return L.type=Hs.RenderPipeline,L.isCreatingAsync=!1,L.gpuRenderPipeline=null,L.descriptor=C,L.device.createRenderPipelineInternal(L,!1),L}return o.prototype.getBindGroupLayout=function(f){return this.gpuRenderPipeline.getBindGroupLayout(f)},o}(f0),K3=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L,F,V=a.call(this,{id:m,device:T})||this;V.type=Hs.Sampler;var ae=C.lodMinClamp,Ae=C.mipmapFilter===Zc.NO_MIP?C.lodMinClamp:C.lodMaxClamp,Ce=(L=C.maxAnisotropy)!==null&&L!==void 0?L:1;return Ce>1&&Va(C.minFilter===Du.BILINEAR&&C.magFilter===Du.BILINEAR&&C.mipmapFilter===Zc.LINEAR),V.gpuSampler=V.device.device.createSampler({addressModeU:c2(C.addressModeU),addressModeV:c2(C.addressModeV),addressModeW:c2((F=C.addressModeW)!==null&&F!==void 0?F:C.addressModeU),lodMinClamp:ae,lodMaxClamp:Ae,minFilter:MT(C.minFilter),magFilter:MT(C.magFilter),mipmapFilter:L3(C.mipmapFilter),compare:C.compareFunction!==void 0?cb(C.compareFunction):void 0,maxAnisotropy:Ce}),V}return o}(f0),h2=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=f.descriptor,L=f.skipCreate,F=f.sampleCount,V=a.call(this,{id:m,device:T})||this;V.type=Hs.Texture,V.flipY=!1;var ae=C.format,Ae=C.dimension,Ce=C.width,Ye=C.height,Bt=C.depthOrArrayLayers,rn=C.mipLevelCount,Sn=C.usage,lr=C.pixelStore;return V.flipY=!!(lr!=null&&lr.unpackFlipY),V.device.createTextureShared({format:ae,dimension:Ae!=null?Ae:ss.TEXTURE_2D,width:Ce,height:Ye,depthOrArrayLayers:Bt!=null?Bt:1,mipLevelCount:rn!=null?rn:1,usage:Sn,sampleCount:F!=null?F:1},V,L),V}return o.prototype.textureFromImageBitmapOrCanvas=function(f,m,T){for(var C=m[0].width,L=m[0].height,F={size:{width:C,height:L,depthOrArrayLayers:T},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},V=f.createTexture(F),ae=0;ae<m.length;ae++)f.queue.copyExternalImageToTexture({source:m[ae],flipY:this.flipY},{texture:V,origin:[0,0,ae]},[C,L]);return[V,C,L]},o.prototype.isImageBitmapOrCanvases=function(f){var m=f[0];return m instanceof ImageBitmap||m instanceof HTMLCanvasElement||m instanceof OffscreenCanvas},o.prototype.isVideo=function(f){var m=f[0];return m instanceof HTMLVideoElement},o.prototype.setImageData=function(f,m){var T,C=this,L=this.device.device,F,V,ae;if(this.isImageBitmapOrCanvases(f))T=(0,To.CR)(this.textureFromImageBitmapOrCanvas(L,f,this.depthOrArrayLayers),3),F=T[0],V=T[1],ae=T[2];else if(this.isVideo(f))F=L.importExternalTexture({source:f[0]});else{var Ae=BT(this.gpuTextureformat),Ce=Math.ceil(this.width/Ae.width)*Ae.length;f.forEach(function(Ye){L.queue.writeTexture({texture:C.gpuTexture},Ye,{bytesPerRow:Ce},{width:C.width,height:C.height})})}this.width=V,this.height=ae,F&&(this.gpuTexture=F),this.gpuTextureView=this.gpuTexture.createView({dimension:P3(this.dimension)})},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuTexture.destroy()},o}(f0),r4=function(a){(0,To.ZT)(o,a);function o(f){var m=f.id,T=f.device,C=a.call(this,{id:m,device:T})||this;return C.type=Hs.RenderBundle,C.renderBundleEncoder=C.device.device.createRenderBundleEncoder({colorFormats:[C.device.swapChainFormat]}),C}return o.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},o}(f0),i4=function(){function a(o,f,m,T,C,L){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Xc.RENDER_ATTACHMENT|Xc.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=cd.UPPER_LEFT,this.clipSpaceNearZ=vg.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=f,this.canvas=m,this.canvasContext=T,this.glsl_compile=C,this.WGSLComposer=L,this.fallbackTexture2D=this.createFallbackTexture(ss.TEXTURE_2D,Bu.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(ss.TEXTURE_2D,Bu.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(ss.TEXTURE_2D_ARRAY,Bu.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(ss.TEXTURE_3D,Bu.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(ss.TEXTURE_CUBE_MAP,Bu.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:ol.REPEAT,addressModeV:ol.REPEAT,minFilter:Du.POINT,magFilter:Du.POINT,mipmapFilter:Zc.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:ol.REPEAT,addressModeV:ol.REPEAT,minFilter:Du.POINT,magFilter:Du.POINT,mipmapFilter:Zc.NEAREST,compareFunction:Ja.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(F){console.error(F.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return a.prototype.destroy=function(){},a.prototype.configureSwapChain=function(o,f){this.swapChainWidth===o&&this.swapChainHeight===f||(this.swapChainWidth=o,this.swapChainHeight=f)},a.prototype.getOnscreenTexture=function(){var o=this.canvasContext.getCurrentTexture(),f=o.createView(),m=new h2({id:0,device:this,descriptor:{format:ar.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:ss.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return m.depthOrArrayLayers=1,m.sampleCount=1,m.gpuTexture=o,m.gpuTextureView=f,m.name="Onscreen",this.setResourceName(m,"Onscreen Texture"),m},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.canvas},a.prototype.beginFrame=function(){Va(this.frameCommandEncoderPool.length===0)},a.prototype.endFrame=function(){Va(this.frameCommandEncoderPool.every(function(o){return o!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(o){return o.finish()})),this.frameCommandEncoderPool=[]},a.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},a.prototype.createBuffer=function(o){return new $3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new h2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new K3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){var f=new h2({id:this.getNextUniqueId(),device:this,descriptor:(0,To.pi)((0,To.pi)({},o),{dimension:ss.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Yf.RENDER_TARGET}),sampleCount:o.sampleCount});return f.depthOrArrayLayers=1,f.type=Hs.RenderTarget,f},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,T=f.width,C=f.height,L=f.depthOrArrayLayers,F=f.sampleCount,V=f.mipLevelCount,ae=f.gpuTexture,Ae=f.gpuTextureView,Ce=f.usage;Va(!!(Ce&Xc.RENDER_ATTACHMENT));var Ye=new h2({id:this.getNextUniqueId(),device:this,descriptor:{format:m,width:T,height:C,depthOrArrayLayers:L,dimension:ss.TEXTURE_2D,mipLevelCount:V,usage:Ce},skipCreate:!0});return Ye.depthOrArrayLayers=L,Ye.sampleCount=F,Ye.gpuTexture=ae,Ye.gpuTextureView=Ae,Ye},a.prototype.createProgram=function(o){var f,m;return!((f=o.vertex)===null||f===void 0)&&f.glsl&&(o.vertex.glsl=Ov(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((m=o.fragment)===null||m===void 0)&&m.glsl&&(o.fragment.glsl=Ov(this.queryVendorInfo(),"frag",o.fragment.glsl)),new f2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createProgramSimple=function(o){return new f2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTextureShared=function(o,f,m){var T={width:o.width,height:o.height,depthOrArrayLayers:o.depthOrArrayLayers},C=o.mipLevelCount,L=u2(o.format),F=M3(o.dimension),V=RT(o.usage);if(f.gpuTextureformat=L,f.dimension=o.dimension,f.format=o.format,f.width=o.width,f.height=o.height,f.depthOrArrayLayers=o.depthOrArrayLayers,f.mipLevelCount=C,f.usage=V,f.sampleCount=o.sampleCount,!m){var ae=this.device.createTexture({size:T,mipLevelCount:C,format:L,dimension:F,sampleCount:o.sampleCount,usage:V}),Ae=ae.createView();f.gpuTexture=ae,f.gpuTextureView=Ae}},a.prototype.getFallbackSampler=function(o){var f=o.formatKind;return f===Bu.Depth&&o.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},a.prototype.getFallbackTexture=function(o){var f=o.dimension,m=o.formatKind;if(f===ss.TEXTURE_2D)return m===Bu.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===ss.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===ss.TEXTURE_3D)return this.fallbackTexture3D;if(f===ss.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.createFallbackTexture=function(o,f){var m=o===ss.TEXTURE_CUBE_MAP?6:1,T=f===Bu.Float?ar.U8_RGBA_NORM:ar.D24;return this.createTexture({dimension:o,format:T,usage:Yf.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1})},a.prototype.createBindings=function(o){return new X3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new fb({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePipeline=function(o){return new xm({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new Y3({id:this.getNextUniqueId(),device:this,descriptor:(0,To.pi)({},o)})},a.prototype.createQueryPool=function(o,f){return new kT({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.createRenderPipelineInternal=function(o,f){var m;if(o.gpuRenderPipeline===null){var T=o.descriptor,C=T.program,L=C.vertexStage,F=C.fragmentStage;if(!(L===null||F===null)){var V=T.megaStateDescriptor||{},ae=V.stencilBack,Ae=V.stencilFront,Ce=(0,To._T)(V,["stencilBack","stencilFront"]),Ye=vm(wv);T.megaStateDescriptor=(0,To.pi)((0,To.pi)((0,To.pi)({},Ye),{stencilBack:(0,To.pi)((0,To.pi)({},Ye.stencilBack),ae),stencilFront:(0,To.pi)((0,To.pi)({},Ye.stencilFront),Ae)}),Ce);var Bt=T.megaStateDescriptor.attachmentsState[0];T.colorAttachmentFormats.forEach(function(ji,Po){T.megaStateDescriptor.attachmentsState[Po]||(T.megaStateDescriptor.attachmentsState[Po]=Kf(void 0,Bt))});var rn=U3((m=T.topology)!==null&&m!==void 0?m:xc.TRIANGLES,T.megaStateDescriptor),Sn=IT(T.colorAttachmentFormats,T.megaStateDescriptor),lr=V3(T.depthStencilAttachmentFormat,T.megaStateDescriptor),Br=void 0;T.inputLayout!==null&&(Br=T.inputLayout.buffers);var Er=T.sampleCount,ui={layout:"auto",vertex:(0,To.pi)((0,To.pi)({},L),{buffers:Br}),primitive:rn,depthStencil:lr,multisample:{count:Er},fragment:(0,To.pi)((0,To.pi)({},F),{targets:Sn})};o.gpuRenderPipeline=this.device.createRenderPipeline(ui)}}},a.prototype.createReadback=function(){return new zT({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderBundle=function(){return new r4({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderPass=function(o){var f=this.renderPassPool.pop();f===void 0&&(f=new hb(this));var m=this.frameCommandEncoderPool.pop();return m===void 0&&(m=this.device.createCommandEncoder()),f.beginRenderPass(m,o),f},a.prototype.createComputePass=function(){var o=this.computePassPool.pop();o===void 0&&(o=new FT);var f=this.frameCommandEncoderPool.pop();return f===void 0&&(f=this.device.createCommandEncoder()),o.beginComputePass(f),o},a.prototype.submitPass=function(o){var f=o;f instanceof hb?(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.renderPassPool.push(f)):f instanceof FT&&(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.computePassPool.push(f))},a.prototype.copySubTexture2D=function(o,f,m,T,C,L,F){var V=this.device.createCommandEncoder(),ae=o,Ae=T,Ce={texture:Ae.gpuTexture,origin:[C,L,0],mipLevel:0,aspect:"all"},Ye={texture:ae.gpuTexture,origin:[f,m,0],mipLevel:0,aspect:"all"};Va(!!(Ae.usage&Xc.COPY_SRC)),Va(!!(ae.usage&Xc.COPY_DST)),V.copyTextureToTexture(Ce,Ye,[Ae.width,Ae.height,F||1]),this.device.queue.submit([V.finish()])},a.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},a.prototype.queryTextureFormatSupported=function(o,f,m){if(W3(o)){if(!this.featureTextureCompressionBC)return!1;var T=G3(o);return f%T!==0||m%T!==0?!1:this.featureTextureCompressionBC}switch(o){case ar.U16_RGBA_NORM:return!1;case ar.F32_RGBA:return!1}return!0},a.prototype.queryPlatformAvailable=function(){return!0},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){var f=o;return f.descriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Hs.Buffer){var m=o;m.gpuBuffer.label=f}else if(o.type===Hs.Texture){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Hs.RenderTarget){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Hs.Sampler){var m=o;m.gpuSampler.label=f}else if(o.type===Hs.RenderPipeline){var m=o;m.gpuRenderPipeline!==null&&(m.gpuRenderPipeline.label=f)}},a.prototype.setResourceLeakCheck=function(o,f){},a.prototype.checkForLeaks=function(){},a.prototype.programPatched=function(o){},a.prototype.pipelineQueryReady=function(o){var f=o;return f.gpuRenderPipeline!==null},a.prototype.pipelineForceReady=function(o){var f=o;this.createRenderPipelineInternal(f,!1)},a}(),o4=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,To.mG)(this,void 0,void 0,function(){var f,m,T,C,L,F,V,ae;return(0,To.Jh)(this,function(Ae){switch(Ae.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];f=null,Ae.label=1;case 1:return Ae.trys.push([1,3,,4]),m=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:m})];case 2:return f=Ae.sent(),[3,4];case 3:return T=Ae.sent(),console.log(T),[3,4];case 4:return f===null?[2,null]:(C=["depth32float-stencil8","texture-compression-bc","float32-filterable"],L=C.filter(function(Ce){return f.features.has(Ce)}),[4,f.requestDevice({requiredFeatures:L})]);case 5:if(F=Ae.sent(),F&&(V=this.pluginOptions.onContextLost,F.lost.then(function(){V&&V()})),F===null)return[2,null];if(ae=o.getContext("webgpu"),!ae)return[2,null];Ae.label=6;case 6:return Ae.trys.push([6,8,,9]),[4,CT(this.pluginOptions.shaderCompilerPath)];case 7:return Ae.sent(),[3,9];case 8:return Ae.sent(),[3,9];case 9:return[2,new i4(f,F,o,ae,A3,_y&&new _y)]}})})},a}(),a4=Object.defineProperty,s4=Object.defineProperties,l4=Object.getOwnPropertyDescriptors,UT=Object.getOwnPropertySymbols,q3=Object.prototype.hasOwnProperty,Q3=Object.prototype.propertyIsEnumerable,jT=(a,o,f)=>o in a?a4(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,V_=(a,o)=>{for(var f in o||(o={}))q3.call(o,f)&&jT(a,f,o[f]);if(UT)for(var f of UT(o))Q3.call(o,f)&&jT(a,f,o[f]);return a},J3=(a,o)=>s4(a,l4(o)),{isPlainObject:eR,isTypedArray:tR}=Ie.lodashUtil,nR=class{constructor(a,o){this.destroyed=!1,this.uniforms={},this.reGl=a;const{vs:f,fs:m,attributes:T,uniforms:C,primitive:L,count:F,elements:V,depth:ae,cull:Ae,instances:Ce}=o,Ye={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:cd.LOWER_LEFT,clipSpaceNearZ:vg.NEGATIVE_ONE,supportMRT:!1},Bt={};this.options=o,C&&(this.uniforms=this.extractUniforms(C),Object.keys(C).forEach(Er=>{Bt[Er]=a.prop(Er)}));const rn={};Object.keys(T).forEach(Er=>{rn[Er]=T[Er].get()});const Sn=(0,Q.Vb)(Ov(Ye,"frag",m,null,!1)),lr=(0,Q.Vb)(Ov(Ye,"vert",f,null,!1)),Br={attributes:rn,frag:Sn,uniforms:Bt,vert:lr,colorMask:a.prop("colorMask"),lineWidth:1,blend:{enable:a.prop("blend.enable"),func:a.prop("blend.func"),equation:a.prop("blend.equation"),color:a.prop("blend.color")},stencil:{enable:a.prop("stencil.enable"),mask:a.prop("stencil.mask"),func:a.prop("stencil.func"),opFront:a.prop("stencil.opFront"),opBack:a.prop("stencil.opBack")},primitive:IC[L===void 0?Q.gl.TRIANGLES:L]};Ce&&(Br.instances=Ce),F?Br.count=F:V&&(Br.elements=V.get()),this.initDepthDrawParams({depth:ae},Br),this.initCullDrawParams({cull:Ae},Br),this.drawCommand=a(Br),this.drawParams=Br}updateAttributesAndElements(a,o){const f={};Object.keys(a).forEach(m=>{f[m]=a[m].get()}),this.drawParams.attributes=f,this.drawParams.elements=o.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(a){const o={};Object.keys(a).forEach(f=>{o[f]=a[f].get()}),this.drawParams.attributes=o,this.drawCommand=this.reGl(this.drawParams)}addUniforms(a){this.uniforms=V_(V_({},this.uniforms),this.extractUniforms(a))}draw(a,o){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const f=V_(V_({},this.uniforms),this.extractUniforms(a.uniforms||{})),m={};Object.keys(f).forEach(T=>{const C=typeof f[T];C==="boolean"||C==="number"||Array.isArray(f[T])||f[T].BYTES_PER_ELEMENT?m[T]=f[T]:m[T]=f[T].get()}),m.blend=o?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(a),m.stencil=this.getStencilDrawParams(a),m.colorMask=this.getColorMaskDrawParams(a,o),this.drawCommand(m)}destroy(){var a,o;(o=(a=this.drawParams)==null?void 0:a.elements)==null||o.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(f=>{f==null||f.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:a},o){a&&(o.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:NC[a.func||Q.gl.LESS],range:a.range||[0,1]})}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:T=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:M_[f&&f.srcRGB||Q.gl.SRC_ALPHA],srcAlpha:M_[f&&f.srcAlpha||Q.gl.SRC_ALPHA],dstRGB:M_[f&&f.dstRGB||Q.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:M_[f&&f.dstAlpha||Q.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ly[m&&m.rgb||Q.gl.FUNC_ADD],alpha:ly[m&&m.alpha||Q.gl.FUNC_ADD]},color:T}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=-1,func:m={cmp:Q.gl.ALWAYS,ref:0,mask:-1},opFront:T={fail:Q.gl.KEEP,zfail:Q.gl.KEEP,zpass:Q.gl.KEEP},opBack:C={fail:Q.gl.KEEP,zfail:Q.gl.KEEP,zpass:Q.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:J3(V_({},m),{cmp:BC[m.cmp]}),opFront:{fail:uy[T.fail],zfail:uy[T.zfail],zpass:uy[T.zpass]},opBack:{fail:uy[C.fail],zfail:uy[C.zfail],zpass:uy[C.zpass]}}}getColorMaskDrawParams({stencil:a},o){return a!=null&&a.enable&&a.opFront&&!o?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:a},o){if(a){const{enable:f,face:m=Q.gl.BACK}=a;o.cull={enable:!!f,face:FC[m]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||tR(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}eR(o)&&Object.keys(o).forEach(T=>{this.extractUniformsRecursively(T,o[T],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((T,C)=>{Object.keys(T).forEach(L=>{this.extractUniformsRecursively(L,T[L],f,`${m&&m+"."}${a}[${C}]`)})})}},rR=class{constructor(a,o){this.isDestroy=!1;const{data:f,type:m=Q.gl.UNSIGNED_BYTE,width:T,height:C,flipY:L=!1,format:F=Q.gl.RGBA,mipmap:V=!1,wrapS:ae=Q.gl.CLAMP_TO_EDGE,wrapT:Ae=Q.gl.CLAMP_TO_EDGE,aniso:Ce=0,alignment:Ye=1,premultiplyAlpha:Bt=!1,mag:rn=Q.gl.NEAREST,min:Sn=Q.gl.NEAREST,colorSpace:lr=Q.gl.BROWSER_DEFAULT_WEBGL,x:Br=0,y:Er=0,copy:ui=!1}=o;this.width=T,this.height=C;const ji={width:T,height:C,type:R_[m],format:dg[F],wrapS:u0[ae],wrapT:u0[Ae],mag:eT[rn],min:eT[Sn],alignment:Ye,flipY:L,colorSpace:DC[lr],premultiplyAlpha:Bt,aniso:Ce,x:Br,y:Er,copy:ui};f&&(ji.data=f),typeof V=="number"?ji.mipmap=LC[V]:typeof V=="boolean"&&(ji.mipmap=V),this.texture=a.texture(ji)}get(){return this.texture}update(a={}){this.texture(a)}bind(){this.texture._texture.bind()}resize({width:a,height:o}){this.texture.resize(a,o),this.width=a,this.height=o}getSize(){return[this.width,this.height]}destroy(){var a;this.isDestroy||(a=this.texture)==null||a.destroy(),this.isDestroy=!0}},d2=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),VT=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=a=>new nR(this.gl,a),this.createAttribute=a=>new PC(this.gl,a),this.createBuffer=a=>new tT(this.gl,a),this.createElements=a=>new kC(this.gl,a),this.createTexture2D=a=>new rR(this.gl,a),this.createFramebuffer=a=>new zC(this.gl,a),this.useFramebuffer=(a,o)=>{this.gl({framebuffer:a?a.get():null})(o)},this.useFramebufferAsync=(a,o)=>d2(this,null,function*(){this.gl({framebuffer:a?a.get():null})(o)}),this.clear=a=>{var o;const{color:f,depth:m,stencil:T,framebuffer:C=null}=a,L={color:f,depth:m,stencil:T};L.framebuffer=C===null?C:C.get(),(o=this.gl)==null||o.clear(L)},this.viewport=({x:a,y:o,width:f,height:m})=>{this.gl._gl.viewport(a,o,f,m),this.width=f,this.height=m,this.gl._refresh()},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:T,height:C}=a,L={x:f,y:m,width:T,height:C};return o&&(L.framebuffer=o.get()),this.gl.read(L)},this.readPixelsAsync=a=>d2(this,null,function*(){return this.readPixels(a)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var a,o,f;this.canvas=null,(f=(o=(a=this.gl)==null?void 0:a._gl)==null?void 0:o.getExtension("WEBGL_lose_context"))==null||f.loseContext(),this.gl.destroy(),this.gl=null}}init(a,o,f){return d2(this,null,function*(){this.canvas=a,f?this.gl=f:this.gl=yield new Promise((m,T)=>{MC()({canvas:this.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,stencil:o.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(C,L)=>{(C||!L)&&T(C),m(L)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const a=this.getGLContext();a.disable(a.CULL_FACE)}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},iR=class{constructor(a,o){const{buffer:f,offset:m,stride:T,normalized:C,size:L,divisor:F,shaderLocation:V}=o;this.buffer=f,this.attribute={shaderLocation:V,buffer:f.get(),offset:m||0,stride:T||0,normalized:C||!1,divisor:F||0},L&&(this.attribute.size=L)}get(){return this.buffer}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},H_={[Q.gl.FLOAT]:Float32Array,[Q.gl.UNSIGNED_BYTE]:Uint8Array,[Q.gl.SHORT]:Int16Array,[Q.gl.UNSIGNED_SHORT]:Uint16Array,[Q.gl.INT]:Int32Array,[Q.gl.UNSIGNED_INT]:Uint32Array},oR={[Q.gl.POINTS]:xc.POINTS,[Q.gl.LINES]:xc.LINES,[Q.gl.LINE_LOOP]:xc.LINES,[Q.gl.LINE_STRIP]:xc.LINE_STRIP,[Q.gl.TRIANGLES]:xc.TRIANGLES,[Q.gl.TRIANGLE_FAN]:xc.TRIANGLES,[Q.gl.TRIANGLE_STRIP]:xc.TRIANGLE_STRIP},HT={1:ar.F32_R,2:ar.F32_RG,3:ar.F32_RGB,4:ar.F32_RGBA},aR={[Q.gl.STATIC_DRAW]:c0.STATIC,[Q.gl.DYNAMIC_DRAW]:c0.DYNAMIC,[Q.gl.STREAM_DRAW]:c0.DYNAMIC},db={[Q.gl.REPEAT]:ol.REPEAT,[Q.gl.CLAMP_TO_EDGE]:ol.CLAMP_TO_EDGE,[Q.gl.MIRRORED_REPEAT]:ol.MIRRORED_REPEAT},sR={[Q.gl.NEVER]:Ja.NEVER,[Q.gl.ALWAYS]:Ja.ALWAYS,[Q.gl.LESS]:Ja.LESS,[Q.gl.LEQUAL]:Ja.LEQUAL,[Q.gl.GREATER]:Ja.GREATER,[Q.gl.GEQUAL]:Ja.GEQUAL,[Q.gl.EQUAL]:Ja.EQUAL,[Q.gl.NOTEQUAL]:Ja.NOTEQUAL},Lv={[Q.gl.FRONT]:dh.FRONT,[Q.gl.BACK]:dh.BACK},WT={[Q.gl.FUNC_ADD]:uf.ADD,[Q.gl.MIN_EXT]:uf.MIN,[Q.gl.MAX_EXT]:uf.MAX,[Q.gl.FUNC_SUBTRACT]:uf.SUBSTRACT,[Q.gl.FUNC_REVERSE_SUBTRACT]:uf.REVERSE_SUBSTRACT},pb={[Q.gl.ZERO]:qa.ZERO,[Q.gl.ONE]:qa.ONE,[Q.gl.SRC_COLOR]:qa.SRC,[Q.gl.ONE_MINUS_SRC_COLOR]:qa.ONE_MINUS_SRC,[Q.gl.SRC_ALPHA]:qa.SRC_ALPHA,[Q.gl.ONE_MINUS_SRC_ALPHA]:qa.ONE_MINUS_SRC_ALPHA,[Q.gl.DST_COLOR]:qa.DST,[Q.gl.ONE_MINUS_DST_COLOR]:qa.ONE_MINUS_DST,[Q.gl.DST_ALPHA]:qa.DST_ALPHA,[Q.gl.ONE_MINUS_DST_ALPHA]:qa.ONE_MINUS_DST_ALPHA,[Q.gl.CONSTANT_COLOR]:qa.CONST,[Q.gl.ONE_MINUS_CONSTANT_COLOR]:qa.ONE_MINUS_CONSTANT,[Q.gl.CONSTANT_ALPHA]:qa.CONST,[Q.gl.ONE_MINUS_CONSTANT_ALPHA]:qa.ONE_MINUS_CONSTANT,[Q.gl.SRC_ALPHA_SATURATE]:qa.SRC_ALPHA_SATURATE},gg={[Q.gl.REPLACE]:Nu.REPLACE,[Q.gl.KEEP]:Nu.KEEP,[Q.gl.ZERO]:Nu.ZERO,[Q.gl.INVERT]:Nu.INVERT,[Q.gl.INCR]:Nu.INCREMENT_CLAMP,[Q.gl.DECR]:Nu.DECREMENT_CLAMP,[Q.gl.INCR_WRAP]:Nu.INCREMENT_WRAP,[Q.gl.DECR_WRAP]:Nu.DECREMENT_WRAP},lR={[Q.gl.ALWAYS]:Ja.ALWAYS,[Q.gl.EQUAL]:Ja.EQUAL,[Q.gl.GEQUAL]:Ja.GEQUAL,[Q.gl.GREATER]:Ja.GREATER,[Q.gl.LEQUAL]:Ja.LEQUAL,[Q.gl.LESS]:Ja.LESS,[Q.gl.NEVER]:Ja.NEVER,[Q.gl.NOTEQUAL]:Ja.NOTEQUAL},oi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function vb(a){return Object.prototype.toString.call(a)in oi}function u4(a,o){const f=a.length,m=Math.ceil(f/3),T=f+m,C=new Float32Array(T);for(let L=0;L<T;L+=4)C[L]=a[L/4*3],C[L+1]=a[L/4*3+1],C[L+2]=a[L/4*3+2],C[L+3]=o;return C}var p2=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:T,isUBO:C,label:L}=o;let F;vb(f)?F=f:F=new H_[this.type||Q.gl.FLOAT](f),this.type=T,this.size=F.byteLength,this.buffer=a.createBuffer({viewOrSize:F,usage:C?Rl.UNIFORM:Rl.VERTEX,hint:aR[m||Q.gl.STATIC_DRAW]}),L&&a.setResourceName(this.buffer,L)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){let f;vb(a)?f=a:f=new H_[this.type||Q.gl.FLOAT](a),this.buffer.setSubData(o,new Uint8Array(f.buffer))}};function al(a,o=0){return a+=o,a+=a<<10,a+=a>>>6,a>>>0}function v2(a){return a+=a<<3,a^=a>>>11,a+=a<<15,a>>>0}function m2(){return 0}var W_=class{constructor(){this.keys=[],this.values=[]}},ou=class{constructor(a,o){this.keyEqualFunc=a,this.keyHashFunc=o,this.buckets=new Map}findBucketIndex(a,o){for(let f=0;f<a.keys.length;f++)if(this.keyEqualFunc(o,a.keys[f]))return f;return-1}findBucket(a){const o=this.keyHashFunc(a);return this.buckets.get(o)}get(a){const o=this.findBucket(a);if(o===void 0)return null;const f=this.findBucketIndex(o,a);return f<0?null:o.values[f]}add(a,o){const f=this.keyHashFunc(a);this.buckets.get(f)===void 0&&this.buckets.set(f,new W_);const m=this.buckets.get(f);m.keys.push(a),m.values.push(o)}delete(a){const o=this.findBucket(a);if(o===void 0)return;const f=this.findBucketIndex(o,a);f!==-1&&(o.keys.splice(f,1),o.values.splice(f,1))}clear(){this.buckets.clear()}size(){let a=0;for(const o of this.buckets.values())a+=o.values.length;return a}*values(){for(const a of this.buckets.values())for(let o=a.values.length-1;o>=0;o--)yield a.values[o]}};function G_(a,o){return a=al(a,o.blendMode),a=al(a,o.blendSrcFactor),a=al(a,o.blendDstFactor),a}function GT(a,o){return a=G_(a,o.rgbBlendState),a=G_(a,o.alphaBlendState),a=al(a,o.channelWriteMask),a}function c4(a,o){return a=al(a,o.r<<24|o.g<<16|o.b<<8|o.a),a}function f4(a,o){var f,m,T,C,L,F,V,ae;for(let Ae=0;Ae<o.attachmentsState.length;Ae++)a=GT(a,o.attachmentsState[Ae]);return a=c4(a,o.blendConstant||U1),a=al(a,o.depthCompare),a=al(a,o.depthWrite?1:0),a=al(a,(f=o.stencilFront)==null?void 0:f.compare),a=al(a,(m=o.stencilFront)==null?void 0:m.passOp),a=al(a,(T=o.stencilFront)==null?void 0:T.failOp),a=al(a,(C=o.stencilFront)==null?void 0:C.depthFailOp),a=al(a,(L=o.stencilBack)==null?void 0:L.compare),a=al(a,(F=o.stencilBack)==null?void 0:F.passOp),a=al(a,(V=o.stencilBack)==null?void 0:V.failOp),a=al(a,(ae=o.stencilBack)==null?void 0:ae.depthFailOp),a=al(a,o.stencilWrite?1:0),a=al(a,o.cullMode),a=al(a,o.frontFace?1:0),a=al(a,o.polygonOffset?1:0),a}function g2(a){let o=0;o=al(o,a.program.id),a.inputLayout!==null&&(o=al(o,a.inputLayout.id)),o=f4(o,a.megaStateDescriptor);for(let f=0;f<a.colorAttachmentFormats.length;f++)o=al(o,a.colorAttachmentFormats[f]||0);return o=al(o,a.depthStencilAttachmentFormat||0),v2(o)}function y2(a){let o=0;if(a.samplerBindings)for(let f=0;f<a.samplerBindings.length;f++){const m=a.samplerBindings[f];m!==null&&m.texture!==null&&(o=al(o,m.texture.id))}if(a.uniformBufferBindings)for(let f=0;f<a.uniformBufferBindings.length;f++){const m=a.uniformBufferBindings[f];m!==null&&m.buffer!==null&&(o=al(o,m.buffer.id),o=al(o,m.binding),o=al(o,m.offset),o=al(o,m.size))}if(a.storageBufferBindings)for(let f=0;f<a.storageBufferBindings.length;f++){const m=a.storageBufferBindings[f];m!==null&&m.buffer!==null&&(o=al(o,m.buffer.id),o=al(o,m.binding),o=al(o,m.offset),o=al(o,m.size))}if(a.storageTextureBindings)for(let f=0;f<a.storageTextureBindings.length;f++){const m=a.storageTextureBindings[f];m!==null&&m.texture!==null&&(o=al(o,m.texture.id),o=al(o,m.binding))}return v2(o)}function h4(a,o){var f,m,T,C;return((f=a.vertex)==null?void 0:f.glsl)===((m=o.vertex)==null?void 0:m.glsl)&&((T=a.fragment)==null?void 0:T.glsl)===((C=o.fragment)==null?void 0:C.glsl)}function d4(a){var o,f;return{vertex:{glsl:(o=a.vertex)==null?void 0:o.glsl},fragment:{glsl:(f=a.fragment)==null?void 0:f.glsl}}}var ZT=class{constructor(a){this.device=a,this.bindingsCache=new ou(QC,y2),this.renderPipelinesCache=new ou(fT,g2),this.inputLayoutsCache=new ou(e2,m2),this.programCache=new ou(h4,m2)}createBindings(a){var o;let f=this.bindingsCache.get(a);if(f===null){const m=pT(a);m.uniformBufferBindings=(o=m.uniformBufferBindings)==null?void 0:o.filter(({size:T})=>T&&T>0),f=this.device.createBindings(m),this.bindingsCache.add(m,f)}return f}createRenderPipeline(a){let o=this.renderPipelinesCache.get(a);if(o===null){const f=a3(a);f.colorAttachmentFormats=f.colorAttachmentFormats.filter(m=>m),o=this.device.createRenderPipeline(f),this.renderPipelinesCache.add(f,o)}return o}createInputLayout(a){a.vertexBufferDescriptors=a.vertexBufferDescriptors.filter(f=>!!f);let o=this.inputLayoutsCache.get(a);if(o===null){const f=dy(a);o=this.device.createInputLayout(f),this.inputLayoutsCache.add(f,o)}return o}createProgram(a){let o=this.programCache.get(a);if(o===null){const f=d4(a);o=this.device.createProgram(a),this.programCache.add(f,o)}return o}destroy(){for(const a of this.bindingsCache.values())a.destroy();for(const a of this.renderPipelinesCache.values())a.destroy();for(const a of this.inputLayoutsCache.values())a.destroy();for(const a of this.programCache.values())a.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},xy=class{constructor(a,o){const{data:f,type:m,count:T=0}=o;let C;vb(f)?C=f:C=new H_[this.type||Q.gl.UNSIGNED_INT](f),this.type=m,this.count=T,this.indexBuffer=a.createBuffer({viewOrSize:C,usage:Rl.INDEX})}get(){return this.indexBuffer}subData({data:a}){let o;vb(a)?o=a:o=new H_[this.type||Q.gl.UNSIGNED_INT](a),this.indexBuffer.setSubData(0,new Uint8Array(o.buffer))}destroy(){this.indexBuffer.destroy()}};function _2(a){return!!(a&&a.texture)}var XT=class{constructor(a,o){this.device=a,this.options=o,this.isDestroy=!1;const{wrapS:f=Q.gl.CLAMP_TO_EDGE,wrapT:m=Q.gl.CLAMP_TO_EDGE,aniso:T,mag:C=Q.gl.NEAREST,min:L=Q.gl.NEAREST}=o;this.createTexture(o),this.sampler=a.createSampler({addressModeU:db[f],addressModeV:db[m],minFilter:L===Q.gl.NEAREST?Du.POINT:Du.BILINEAR,magFilter:C===Q.gl.NEAREST?Du.POINT:Du.BILINEAR,mipmapFilter:Zc.NO_MIP,maxAnisotropy:T})}createTexture(a){const{type:o=Q.gl.UNSIGNED_BYTE,width:f,height:m,flipY:T=!1,format:C=Q.gl.RGBA,alignment:L=1,usage:F=Q.v2.SAMPLED,unorm:V=!1,label:ae}=a;let{data:Ae}=a;this.width=f,this.height=m;let Ce=ar.U8_RGBA_RT;if(o===Q.gl.UNSIGNED_BYTE&&C===Q.gl.RGBA)Ce=V?ar.U8_RGBA_NORM:ar.U8_RGBA_RT;else if(o===Q.gl.UNSIGNED_BYTE&&C===Q.gl.LUMINANCE)Ce=ar.U8_LUMINANCE;else if(o===Q.gl.FLOAT&&C===Q.gl.LUMINANCE)Ce=ar.F32_LUMINANCE;else if(o===Q.gl.FLOAT&&C===Q.gl.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(Ae&&(Ae=u4(Ae,0)),Ce=ar.F32_RGBA):Ce=ar.F32_RGB;else if(o===Q.gl.FLOAT&&C===Q.gl.RGBA)Ce=ar.F32_RGBA;else if(o===Q.gl.FLOAT&&C===Q.gl.RED)Ce=ar.F32_R;else throw new Error(`create texture error, type: ${o}, format: ${C}`);this.texture=this.device.createTexture({format:Ce,width:f,height:m,usage:F===Q.v2.SAMPLED?Yf.SAMPLED:Yf.RENDER_TARGET,pixelStore:{unpackFlipY:T,packAlignment:L},mipLevelCount:1}),ae&&this.device.setResourceName(this.texture,ae),Ae&&this.texture.setImageData([Ae])}get(){return this.texture}update(a){const{data:o}=a;this.texture.setImageData([o])}bind(){}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&this.destroy(),this.options.width=a,this.options.height=o,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var a;!this.isDestroy&&!this.texture.destroyed&&((a=this.texture)==null||a.destroy()),this.isDestroy=!0}},b2=class{constructor(a,o){this.device=a,this.options=o,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(a=!1){const{width:o,height:f,color:m}=this.options;m&&(_2(m)?(a&&m.resize({width:o,height:f}),this.colorTexture=m.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=m.width,this.height=m.height):o&&f&&(this.colorTexture=this.device.createTexture({format:ar.U8_RGBA_RT,usage:Yf.RENDER_TARGET,width:o,height:f}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=o,this.height=f))}createDepthRenderTarget(a=!1){const{width:o,height:f,depth:m}=this.options;m&&(_2(m)?(a&&m.resize({width:o,height:f}),this.depthTexture=m.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=m.width,this.height=m.height):o&&f&&(this.depthTexture=this.device.createTexture({format:ar.D24_S8,usage:Yf.RENDER_TARGET,width:o,height:f}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=o,this.height=f))}get(){return this.colorRenderTarget}destroy(){var a,o;(a=this.colorRenderTarget)==null||a.destroy(),(o=this.depthRenderTarget)==null||o.destroy()}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=a,this.options.height=o,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},uR=Object.defineProperty,yg=Object.defineProperties,x2=Object.getOwnPropertyDescriptors,$T=Object.getOwnPropertySymbols,E2=Object.prototype.hasOwnProperty,Ey=Object.prototype.propertyIsEnumerable,mb=(a,o,f)=>o in a?uR(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,cl=(a,o)=>{for(var f in o||(o={}))E2.call(o,f)&&mb(a,f,o[f]);if($T)for(var f of $T(o))Ey.call(o,f)&&mb(a,f,o[f]);return a},p4=(a,o)=>yg(a,x2(o)),{isPlainObject:cR,isTypedArray:fR,isNil:go}=Ie.lodashUtil,YT=class{constructor(a,o,f){this.device=a,this.options=o,this.service=f,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:m,fs:T,attributes:C,uniforms:L,count:F,elements:V,diagnosticDerivativeUniformityEnabled:ae}=o;this.options=o;const Ae=ae?"":this.service.viewportOrigin===cd.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=f.renderCache.createProgram({vertex:{glsl:m},fragment:{glsl:T,postprocess:rn=>Ae+rn}}),L&&(this.uniforms=this.extractUniforms(L));const Ce=[];let Ye=0;Object.keys(C).forEach(rn=>{const Sn=C[rn],lr=Sn.get();this.vertexBuffers.push(lr.get());const{offset:Br=0,stride:Er=0,size:ui=1,divisor:ji=0,shaderLocation:Po=0}=Sn.attribute;Ce.push({arrayStride:Er||ui*4,stepMode:pg.VERTEX,attributes:[{format:HT[ui],shaderLocation:Po,offset:Br,divisor:ji}]}),Ye=lr.size/ui}),F||(this.options.count=Ye),V&&(this.indexBuffer=V.get());const Bt=f.renderCache.createInputLayout({vertexBufferDescriptors:Ce,indexBufferFormat:V?ar.U32_R:null,program:this.program});this.inputLayout=Bt,this.pipeline=this.createPipeline(o)}createPipeline(a,o){var f;const{primitive:m=Q.gl.TRIANGLES,depth:T,cull:C,blend:L,stencil:F}=a,V=this.initDepthDrawParams({depth:T}),ae=!!(V&&V.enable),Ae=this.initCullDrawParams({cull:C}),Ce=!!(Ae&&Ae.enable),Ye=this.getBlendDrawParams({blend:L}),Bt=!!(Ye&&Ye.enable),rn=this.getStencilDrawParams({stencil:F}),Sn=!!(rn&&rn.enable),lr=this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:oR[m],colorAttachmentFormats:[ar.U8_RGBA_RT],depthStencilAttachmentFormat:ar.D24_S8,megaStateDescriptor:{attachmentsState:[o?{channelWriteMask:cf.ALL,rgbBlendState:{blendMode:uf.ADD,blendSrcFactor:qa.ONE,blendDstFactor:qa.ZERO},alphaBlendState:{blendMode:uf.ADD,blendSrcFactor:qa.ONE,blendDstFactor:qa.ZERO}}:{channelWriteMask:Sn&&rn.opFront.zpass===Nu.REPLACE?cf.NONE:cf.ALL,rgbBlendState:{blendMode:Bt&&Ye.equation.rgb||uf.ADD,blendSrcFactor:Bt&&Ye.func.srcRGB||qa.SRC_ALPHA,blendDstFactor:Bt&&Ye.func.dstRGB||qa.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:Bt&&Ye.equation.alpha||uf.ADD,blendSrcFactor:Bt&&Ye.func.srcAlpha||qa.ONE,blendDstFactor:Bt&&Ye.func.dstAlpha||qa.ONE}}],blendConstant:Bt?U1:void 0,depthWrite:ae,depthCompare:ae&&V.func||Ja.LESS,cullMode:Ce&&Ae.face||dh.NONE,stencilWrite:Sn,stencilFront:{compare:Sn?rn.func.cmp:Ja.ALWAYS,passOp:rn.opFront.zpass,failOp:rn.opFront.fail,depthFailOp:rn.opFront.zfail,mask:rn.opFront.mask},stencilBack:{compare:Sn?rn.func.cmp:Ja.ALWAYS,passOp:rn.opBack.zpass,failOp:rn.opBack.fail,depthFailOp:rn.opBack.zfail,mask:rn.opBack.mask}}});return Sn&&!go((f=F==null?void 0:F.func)==null?void 0:f.ref)&&(lr.stencilFuncReference=F.func.ref),lr}updateAttributesAndElements(){}updateAttributes(){}addUniforms(a){this.uniforms=cl(cl({},this.uniforms),this.extractUniforms(a))}draw(a,o){const f=cl(cl({},this.options),a),{count:m=0,instances:T,elements:C,uniforms:L={},uniformBuffers:F,textures:V}=f;this.uniforms=cl(cl({},this.uniforms),this.extractUniforms(L));const{renderPass:ae,currentFramebuffer:Ae,width:Ce,height:Ye}=this.service;this.pipeline=this.createPipeline(f,o);const Bt=this.service.device,rn=Bt.swapChainHeight;if(Bt.swapChainHeight=(Ae==null?void 0:Ae.height)||Ye,ae.setViewport(0,0,(Ae==null?void 0:Ae.width)||Ce,(Ae==null?void 0:Ae.height)||Ye),Bt.swapChainHeight=rn,ae.setPipeline(this.pipeline),go(this.pipeline.stencilFuncReference)||ae.setStencilReference(this.pipeline.stencilFuncReference),ae.setVertexInput(this.inputLayout,this.vertexBuffers.map(Sn=>({buffer:Sn})),C?{buffer:this.indexBuffer,offset:0}:null),F&&(this.bindings=Bt.createBindings({pipeline:this.pipeline,uniformBufferBindings:F.map((Sn,lr)=>{const Br=Sn;return{binding:lr,buffer:Br.get(),size:Br.size}}),samplerBindings:V==null?void 0:V.map(Sn=>({texture:Sn.texture,sampler:Sn.sampler}))})),this.bindings&&(ae.setBindings(this.bindings),Object.keys(this.uniforms).forEach(Sn=>{const lr=this.uniforms[Sn];lr instanceof XT?this.uniforms[Sn]=lr.get():lr instanceof b2&&(this.uniforms[Sn]=lr.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),C){const Sn=C.count;Sn===0?ae.draw(m,T):ae.drawIndexed(Sn,T)}else ae.draw(m,T)}destroy(){var a,o,f;(a=this.vertexBuffers)==null||a.forEach(m=>m.destroy()),(o=this.indexBuffer)==null||o.destroy(),(f=this.bindings)==null||f.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:a}){if(a)return{enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:sR[a.func||Q.gl.LESS],range:a.range||[0,1]}}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:T=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:pb[f&&f.srcRGB||Q.gl.SRC_ALPHA],srcAlpha:pb[f&&f.srcAlpha||Q.gl.SRC_ALPHA],dstRGB:pb[f&&f.dstRGB||Q.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:pb[f&&f.dstAlpha||Q.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:WT[m&&m.rgb||Q.gl.FUNC_ADD],alpha:WT[m&&m.alpha||Q.gl.FUNC_ADD]},color:T}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=4294967295,func:m={cmp:Q.gl.ALWAYS,ref:0,mask:4294967295},opFront:T={fail:Q.gl.KEEP,zfail:Q.gl.KEEP,zpass:Q.gl.KEEP},opBack:C={fail:Q.gl.KEEP,zfail:Q.gl.KEEP,zpass:Q.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:p4(cl({},m),{cmp:lR[m.cmp]}),opFront:{fail:gg[T.fail],zfail:gg[T.zfail],zpass:gg[T.zpass],mask:m.mask},opBack:{fail:gg[C.fail],zfail:gg[C.zfail],zpass:gg[C.zpass],mask:m.mask}}}initCullDrawParams({cull:a}){if(a){const{enable:o,face:f=Q.gl.BACK}=a;return{enable:!!o,face:Lv[f]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||fR(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}cR(o)&&Object.keys(o).forEach(T=>{this.extractUniformsRecursively(T,o[T],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((T,C)=>{Object.keys(T).forEach(L=>{this.extractUniformsRecursively(L,T[L],f,`${m&&m+"."}${a}[${C}]`)})})}};function v4(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}var S2=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),{isUndefined:Sy}=Ie.lodashUtil,KT=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=a=>new YT(this.device,a,this),this.createAttribute=a=>new iR(this.device,a),this.createBuffer=a=>new p2(this.device,a),this.createElements=a=>new xy(this.device,a),this.createTexture2D=a=>new XT(this.device,a),this.createFramebuffer=a=>new b2(this.device,a),this.useFramebuffer=(a,o)=>{this.currentFramebuffer=a,this.beginFrame(),o(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(a,o)=>S2(this,null,function*(){this.currentFramebuffer=a,this.preRenderPass=this.renderPass,this.beginFrame(),yield o(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=a=>{const{color:o,depth:f,stencil:m,framebuffer:T=null}=a;if(T)T.clearOptions={color:o,depth:f,stencil:m};else{const C=this.queryVerdorInfo();if(C==="WebGL1"){const L=this.getGLContext();Sy(m)?Sy(f)||(L.clearDepth(f),L.clear(L.DEPTH_BUFFER_BIT)):(L.clearStencil(m),L.clear(L.STENCIL_BUFFER_BIT))}else if(C==="WebGL2"){const L=this.getGLContext();Sy(m)?Sy(f)||L.clearBufferfv(L.DEPTH,0,[f]):L.clearBufferiv(L.STENCIL,0,[m])}}},this.viewport=({width:a,height:o})=>{this.swapChain.configureSwapChain(a,o),this.createMainColorDepthRT(a,o),this.width=a,this.height=o},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:T,height:C}=a,L=this.device.createReadback(),F=o.colorTexture,V=L.readTextureSync(F,f,this.viewportOrigin===cd.LOWER_LEFT?m:this.height-m,T,C,new Uint8Array(T*C*4));if(this.viewportOrigin!==cd.LOWER_LEFT)for(let ae=0;ae<V.length;ae+=4){const Ae=V[ae];V[ae]=V[ae+2],V[ae+2]=Ae}return L.destroy(),V},this.readPixelsAsync=a=>S2(this,null,function*(){const{framebuffer:o,x:f,y:m,width:T,height:C}=a,L=this.device.createReadback(),F=o.colorTexture,V=yield L.readTexture(F,f,this.viewportOrigin===cd.LOWER_LEFT?m:this.height-m,T,C,new Uint8Array(T*C*4));if(this.viewportOrigin!==cd.LOWER_LEFT)for(let ae=0;ae<V.length;ae+=4){const Ae=V[ae];V[ae]=V[ae+2],V[ae+2]=Ae}return L.destroy(),V}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var a;this.canvas=null,(a=this.uniformBuffers)==null||a.forEach(o=>{o.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(a,o){return S2(this,null,function*(){const{enableWebGPU:f,shaderCompilerPath:m,antialias:T}=o;this.canvas=a;const L=yield(f?new o4({shaderCompilerPath:m}):new a2({targets:["webgl2","webgl1"],antialias:T,onContextLost(V){console.warn("context lost",V)},onContextCreationError(V){console.warn("context creation error",V)},onContextRestored(V){console.warn("context restored",V)}})).createSwapChain(a);L.configureSwapChain(a.width,a.height),this.device=L.getDevice(),this.swapChain=L,this.renderCache=new ZT(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const F=this.device.gl;this.extensionObject={OES_texture_float:!v4(F)&&this.device.OES_texture_float},this.createMainColorDepthRT(a.width,a.height)})}createMainColorDepthRT(a,o){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:ar.U8_RGBA_RT,width:a,height:o,usage:Yf.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:ar.D24_S8,width:a,height:o,usage:Yf.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:a,swapChain:o,mainColorRT:f,mainDepthRT:m}=this,T=a?a.colorRenderTarget:f,C=a?null:o.getOnscreenTexture(),L=a?a.depthRenderTarget:m,{color:F=[0,0,0,0],depth:V=1,stencil:ae=0}=(a==null?void 0:a.clearOptions)||{},Ae=T?I_(F[0]*255,F[1]*255,F[2]*255,F[3]):U1,Ce=L?V:void 0,Ye=L?ae:void 0,Bt=this.device.createRenderPass({colorAttachment:[T],colorResolveTo:[C],colorClearColor:[Ae],colorStore:[!0],depthStencilAttachment:L,depthClearValue:Ce,stencilClearValue:Ye});this.renderPass=Bt}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const a=this.device.gl;return a.getParameter(a.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}},Em=["selectstart","selecting","selectend"],Dv=class extends Hu.EventEmitter{constructor(a,o={}){super(),this.isEnable=!1,this.onDragStart=f=>{this.box.style.display="block",this.startEvent=this.endEvent=f,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=f=>{this.endEvent=f,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=f=>{this.endEvent=f,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=a,this.options=o}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:a}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const o=Ie.SO.create("div",void 0,this.container);o.classList.add("l7-select-box"),a&&o.classList.add(a),o.style.display="none",this.box=o}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:a,y:o}=this.startEvent,{x:f,y:m}=this.endEvent,T=Math.min(a,f),C=Math.min(o,m),L=Math.abs(a-f),F=Math.abs(o-m);this.box.style.top=`${C}px`,this.box.style.left=`${T}px`,this.box.style.width=`${L}px`,this.box.style.height=`${F}px`}getLngLatBox(){const{lngLat:{lng:a,lat:o}}=this.startEvent,{lngLat:{lng:f,lat:m}}=this.endEvent;return(0,Ie.Ol)([[a,o],[f,m]])}},qT=Object.defineProperty,Aa=Object.defineProperties,Pc=Object.getOwnPropertyDescriptors,bl=Object.getOwnPropertySymbols,hR=Object.prototype.hasOwnProperty,Sm=Object.prototype.propertyIsEnumerable,QT=(a,o,f)=>o in a?qT(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,gb=(a,o)=>{for(var f in o||(o={}))hR.call(o,f)&&QT(a,f,o[f]);if(bl)for(var f of bl(o))Sm.call(o,f)&&QT(a,f,o[f]);return a},dR=(a,o)=>Aa(a,Pc(o)),Z_=(a,o,f)=>new Promise((m,T)=>{var C=V=>{try{F(f.next(V))}catch(ae){T(ae)}},L=V=>{try{F(f.throw(V))}catch(ae){T(ae)}},F=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,L);F((f=f.apply(a,o)).next())}),pR=class{constructor(a){const{id:o,map:f,renderer:m="device"}=a,T=(0,Q.Hp)();this.container=T,f.setContainer(T,o),m==="regl"?T.rendererService=new VT:T.rendererService=new KT,this.sceneService=T.sceneService,this.mapService=T.mapService,this.iconService=T.iconService,this.fontService=T.fontService,this.controlService=T.controlService,this.layerService=T.layerService,this.debugService=T.debugService,this.debugService.setEnable(a.debug),this.markerService=T.markerService,this.interactionService=T.interactionService,this.popupService=T.popupService,this.boxSelect=new Dv(this,{}),this.initComponent(o),this.sceneService.init(a),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(a){return Z_(this,null,function*(){return this.sceneService.exportPng(a)})}exportMap(a){return Z_(this,null,function*(){return this.sceneService.exportPng(a)})}registerRenderService(a){this.sceneService.loaded?new a(this).init():this.on("loaded",()=>{new a(this).init()})}setBgColor(a){this.mapService.setBgColor(a)}addLayer(a){this.loaded?this.preAddLayer(a):this.once("loaded",()=>{this.preAddLayer(a)})}preAddLayer(a){const o=(0,Q.e7)(this.container);if(a.setContainer(o),this.sceneService.addLayer(a),a.inited){this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)}else a.on("inited",()=>{this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)})}initMask(a){const{mask:o,maskfence:f,maskColor:m="#000",maskOpacity:T=0}=a.getLayerConfig();return!o||!f?void 0:new O_().source(f).shape("fill").style({color:m,opacity:T})}addMask(a,o){if(!a)return;const f=this.getLayer(o);if(f){const m=(0,Q.e7)(this.container);a.setContainer(m),f.addMaskLayer(a),this.sceneService.addMask(a)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(a){return this.layerService.getLayer(a)}getLayerByName(a){return this.layerService.getLayerByName(a)}removeLayer(a,o){return Z_(this,null,function*(){yield this.layerService.remove(a,o)})}removeAllLayer(){return Z_(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(a){this.layerService.setEnableRender(a)}addIconFont(a,o){this.fontService.addIconFont(a,o)}addIconFonts(a){a.forEach(([o,f])=>{this.fontService.addIconFont(o,f)})}addFontFace(a,o){this.fontService.once("fontloaded",f=>{this.emit("fontloaded",f)}),this.fontService.addFontFace(a,o)}addImage(a,o){return Z_(this,null,function*(){yield this.iconService.addImage(a,o)})}hasImage(a){return this.iconService.hasImage(a)}removeImage(a){this.iconService.removeImage(a)}addIconFontGlyphs(a,o){this.fontService.addIconGlyphs(o)}addControl(a){this.controlService.addControl(a,this.container)}removeControl(a){this.controlService.removeControl(a)}getControlByName(a){return this.controlService.getControlByName(a)}addMarker(a){this.markerService.addMarker(a)}addMarkerLayer(a){this.markerService.addMarkerLayer(a)}removeMarkerLayer(a){this.markerService.removeMarkerLayer(a)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(a){this.popupService.addPopup(a)}removePopup(a){this.popupService.removePopup(a)}on(a,o){var f;Em.includes(a)?(f=this.boxSelect)==null||f.on(a,o):Q.P7.includes(a)?this.sceneService.on(a,o):this.mapService.on(a,o)}once(a,o){var f;Em.includes(a)?(f=this.boxSelect)==null||f.once(a,o):Q.P7.includes(a)?this.sceneService.once(a,o):this.mapService.once(a,o)}emit(a,o){Q.P7.indexOf(a)===-1?this.mapService.on(a,o):this.sceneService.emit(a,o)}off(a,o){var f;Em.includes(a)?(f=this.boxSelect)==null||f.off(a,o):Q.P7.includes(a)?this.sceneService.off(a,o):this.mapService.off(a,o)}getZoom(){return this.mapService.getZoom()}getCenter(a){return this.mapService.getCenter(a)}setCenter(a,o){return this.mapService.setCenter(a,o)}getPitch(){return this.mapService.getPitch()}setPitch(a){return this.mapService.setPitch(a)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(a){this.mapService.setRotation(a)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(a){this.mapService.panTo(a)}panBy(a,o){this.mapService.panBy(a,o)}getContainer(){return this.mapService.getContainer()}setZoom(a){this.mapService.setZoom(a)}fitBounds(a,o){const{fitBoundsOptions:f,animate:m}=this.sceneService.getSceneConfig();this.mapService.fitBounds(a,o||dR(gb({},f),{animate:m}))}setZoomAndCenter(a,o){this.mapService.setZoomAndCenter(a,o)}setMapStyle(a){this.mapService.setMapStyle(a)}setMapStatus(a){this.mapService.setMapStatus(a)}pixelToLngLat(a){return this.mapService.pixelToLngLat(a)}lngLatToPixel(a){return this.mapService.lngLatToPixel(a)}containerToLngLat(a){return this.mapService.containerToLngLat(a)}lngLatToContainer(a){return this.mapService.lngLatToContainer(a)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(a){this.container.postProcessingPass.name=new a}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(a=!0){this.boxSelect.enable(),a&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(a,o){Ie.SA.REGISTERED_PROTOCOLS[a]=o}static removeProtocol(a){delete Ie.SA.REGISTERED_PROTOCOLS[a]}getProtocol(a){return Ie.SA.REGISTERED_PROTOCOLS[a]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(a){this.controlService.init({container:Ie.SO.getContainer(a)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:a,logoPosition:o}=this.sceneService.getSceneConfig();a&&this.addControl(new dp({position:o}))}initTileLayer(a){a.getSource().isTile&&(a.tileLayer=new C_(a))}},m4="2.22.0"},81957:function(mt,W){"use strict";var D=function(q,G,E){return q<G?G:q>E?E:q};W.Z=D},95147:function(mt,W){"use strict";var D=function(q){return q==null};W.Z=D},25897:function(mt,W,D){"use strict";var q=D(95456),G=function(E){return(0,q.Z)(E,"Number")};W.Z=G},95456:function(mt,W){"use strict";var D={}.toString,q=function(G,E){return D.call(G)==="[object "+E+"]"};W.Z=q},131:function(mt,W,D){"use strict";D.r(W),D.d(W,{TinyColor:function(){return q.C},bounds:function(){return dt},convertDecimalToHex:function(){return ue.Wl},convertHexToDecimal:function(){return ue.T6},default:function(){return bt},fromRatio:function(){return oe},hslToRgb:function(){return ue.ve},hsvToRgb:function(){return ue.WE},inputToRGB:function(){return re.uA},isReadable:function(){return he},isValidCSSUnit:function(){return re.ky},legacyRandom:function(){return Ve},mostReadable:function(){return ne},names:function(){return G.R},numberInputToObject:function(){return ue.Yt},parseIntFromHex:function(){return ue.VD},random:function(){return me},readability:function(){return E},rgbToHex:function(){return ue.vq},rgbToHsl:function(){return ue.lC},rgbToHsv:function(){return ue.py},rgbToRgb:function(){return ue.rW},rgbaToArgbHex:function(){return ue.GC},rgbaToHex:function(){return ue.s},stringInputToObject:function(){return re.uz},tinycolor:function(){return q.H},toMsFilter:function(){return ce}});var q=D(10274),G=D(48701);function E(Me,we){var je=new q.C(Me),Ze=new q.C(we);return(Math.max(je.getLuminance(),Ze.getLuminance())+.05)/(Math.min(je.getLuminance(),Ze.getLuminance())+.05)}function he(Me,we,je){var Ze,ut;je===void 0&&(je={level:"AA",size:"small"});var Qt=E(Me,we);switch(((Ze=je.level)!==null&&Ze!==void 0?Ze:"AA")+((ut=je.size)!==null&&ut!==void 0?ut:"small")){case"AAsmall":case"AAAlarge":return Qt>=4.5;case"AAlarge":return Qt>=3;case"AAAsmall":return Qt>=7;default:return!1}}function ne(Me,we,je){je===void 0&&(je={includeFallbackColors:!1,level:"AA",size:"small"});for(var Ze=null,ut=0,Qt=je.includeFallbackColors,De=je.level,St=je.size,Oe=0,it=we;Oe<it.length;Oe++){var Ke=it[Oe],Xe=E(Me,Ke);Xe>ut&&(ut=Xe,Ze=new q.C(Ke))}return he(Me,Ze,{level:De,size:St})||!Qt?Ze:(je.includeFallbackColors=!1,ne(Me,["#fff","#000"],je))}var ue=D(86500);function ce(Me,we){var je=new q.C(Me),Ze="#"+(0,ue.GC)(je.r,je.g,je.b,je.a),ut=Ze,Qt=je.gradientType?"GradientType = 1, ":"";if(we){var De=new q.C(we);ut="#"+(0,ue.GC)(De.r,De.g,De.b,De.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(Qt,"startColorstr=").concat(Ze,",endColorstr=").concat(ut,")")}var xe=D(90279);function oe(Me,we){var je={r:(0,xe.JX)(Me.r),g:(0,xe.JX)(Me.g),b:(0,xe.JX)(Me.b)};return Me.a!==void 0&&(je.a=Number(Me.a)),new q.C(je,we)}function Ve(){return new q.C({r:Math.random(),g:Math.random(),b:Math.random()})}var re=D(1350);function me(Me){if(Me===void 0&&(Me={}),Me.count!==void 0&&Me.count!==null){var we=Me.count,je=[];for(Me.count=void 0;we>je.length;)Me.count=null,Me.seed&&(Me.seed+=1),je.push(me(Me));return Me.count=we,je}var Ze=Re(Me.hue,Me.seed),ut=Y(Ze,Me),Qt=le(Ze,ut,Me),De={h:Ze,s:ut,v:Qt};return Me.alpha!==void 0&&(De.a=Me.alpha),new q.C(De)}function Re(Me,we){var je=_e(Me),Ze=Je(je,we);return Ze<0&&(Ze=360+Ze),Ze}function Y(Me,we){if(we.hue==="monochrome")return 0;if(we.luminosity==="random")return Je([0,100],we.seed);var je=et(Me).saturationRange,Ze=je[0],ut=je[1];switch(we.luminosity){case"bright":Ze=55;break;case"dark":Ze=ut-10;break;case"light":ut=55;break;default:break}return Je([Ze,ut],we.seed)}function le(Me,we,je){var Ze=K(Me,we),ut=100;switch(je.luminosity){case"dark":ut=Ze+20;break;case"light":Ze=(ut+Ze)/2;break;case"random":Ze=0,ut=100;break;default:break}return Je([Ze,ut],je.seed)}function K(Me,we){for(var je=et(Me).lowerBounds,Ze=0;Ze<je.length-1;Ze++){var ut=je[Ze][0],Qt=je[Ze][1],De=je[Ze+1][0],St=je[Ze+1][1];if(we>=ut&&we<=De){var Oe=(St-Qt)/(De-ut),it=Qt-Oe*ut;return Oe*we+it}}return 0}function _e(Me){var we=parseInt(Me,10);if(!Number.isNaN(we)&&we<360&&we>0)return[we,we];if(typeof Me=="string"){var je=dt.find(function(De){return De.name===Me});if(je){var Ze=Ot(je);if(Ze.hueRange)return Ze.hueRange}var ut=new q.C(Me);if(ut.isValid){var Qt=ut.toHsv().h;return[Qt,Qt]}}return[0,360]}function et(Me){Me>=334&&Me<=360&&(Me-=360);for(var we=0,je=dt;we<je.length;we++){var Ze=je[we],ut=Ot(Ze);if(ut.hueRange&&Me>=ut.hueRange[0]&&Me<=ut.hueRange[1])return ut}throw Error("Color not found")}function Je(Me,we){if(we===void 0)return Math.floor(Me[0]+Math.random()*(Me[1]+1-Me[0]));var je=Me[1]||1,Ze=Me[0]||0;we=(we*9301+49297)%233280;var ut=we/233280;return Math.floor(Ze+ut*(je-Ze))}function Ot(Me){var we=Me.lowerBounds[0][0],je=Me.lowerBounds[Me.lowerBounds.length-1][0],Ze=Me.lowerBounds[Me.lowerBounds.length-1][1],ut=Me.lowerBounds[0][1];return{name:Me.name,hueRange:Me.hueRange,lowerBounds:Me.lowerBounds,saturationRange:[we,je],brightnessRange:[Ze,ut]}}var dt=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],bt=q.H},38163:function(mt){mt.exports=W;function W(G,E){var he=G&&G.type,ne;if(he==="FeatureCollection")for(ne=0;ne<G.features.length;ne++)W(G.features[ne],E);else if(he==="GeometryCollection")for(ne=0;ne<G.geometries.length;ne++)W(G.geometries[ne],E);else if(he==="Feature")W(G.geometry,E);else if(he==="Polygon")D(G.coordinates,E);else if(he==="MultiPolygon")for(ne=0;ne<G.coordinates.length;ne++)D(G.coordinates[ne],E);return G}function D(G,E){if(G.length!==0){q(G[0],E);for(var he=1;he<G.length;he++)q(G[he],!E)}}function q(G,E){for(var he=0,ne=0,ue=0,ce=G.length,xe=ce-1;ue<ce;xe=ue++){var oe=(G[ue][0]-G[xe][0])*(G[xe][1]+G[ue][1]),Ve=he+oe;ne+=Math.abs(he)>=Math.abs(oe)?he-Ve+oe:oe-Ve+he,he=Ve}he+ne>=0!=!!E&&G.reverse()}},75550:function(mt){"use strict";mt.exports=W;function W(D,q){this.x=D,this.y=q}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(D){return this.clone()._add(D)},sub:function(D){return this.clone()._sub(D)},multByPoint:function(D){return this.clone()._multByPoint(D)},divByPoint:function(D){return this.clone()._divByPoint(D)},mult:function(D){return this.clone()._mult(D)},div:function(D){return this.clone()._div(D)},rotate:function(D){return this.clone()._rotate(D)},rotateAround:function(D,q){return this.clone()._rotateAround(D,q)},matMult:function(D){return this.clone()._matMult(D)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(D){return this.x===D.x&&this.y===D.y},dist:function(D){return Math.sqrt(this.distSqr(D))},distSqr:function(D){var q=D.x-this.x,G=D.y-this.y;return q*q+G*G},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(D){return Math.atan2(this.y-D.y,this.x-D.x)},angleWith:function(D){return this.angleWithSep(D.x,D.y)},angleWithSep:function(D,q){return Math.atan2(this.x*q-this.y*D,this.x*D+this.y*q)},_matMult:function(D){var q=D[0]*this.x+D[1]*this.y,G=D[2]*this.x+D[3]*this.y;return this.x=q,this.y=G,this},_add:function(D){return this.x+=D.x,this.y+=D.y,this},_sub:function(D){return this.x-=D.x,this.y-=D.y,this},_mult:function(D){return this.x*=D,this.y*=D,this},_div:function(D){return this.x/=D,this.y/=D,this},_multByPoint:function(D){return this.x*=D.x,this.y*=D.y,this},_divByPoint:function(D){return this.x/=D.x,this.y/=D.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var D=this.y;return this.y=this.x,this.x=-D,this},_rotate:function(D){var q=Math.cos(D),G=Math.sin(D),E=q*this.x-G*this.y,he=G*this.x+q*this.y;return this.x=E,this.y=he,this},_rotateAround:function(D,q){var G=Math.cos(D),E=Math.sin(D),he=q.x+G*(this.x-q.x)-E*(this.y-q.y),ne=q.y+E*(this.x-q.x)+G*(this.y-q.y);return this.x=he,this.y=ne,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(D){return D instanceof W?D:Array.isArray(D)?new W(D[0],D[1]):D}},49296:function(mt){"use strict";mt.exports=D,mt.exports.default=D;var W=1e20;function D(ne,ue,ce,xe,oe,Ve){this.fontSize=ne||24,this.buffer=ue===void 0?3:ue,this.cutoff=xe||.25,this.fontFamily=oe||"sans-serif",this.fontWeight=Ve||"normal",this.radius=ce||8;var re=this.size=this.fontSize+this.buffer*2,me=re+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=re,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(me*me),this.gridInner=new Float64Array(me*me),this.f=new Float64Array(me),this.z=new Float64Array(me+1),this.v=new Uint16Array(me),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(re/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function q(ne,ue,ce,xe,oe,Ve,re){Ve.fill(W,0,ue*ce),re.fill(0,0,ue*ce);for(var me=(ue-xe)/2,Re=0;Re<oe;Re++)for(var Y=0;Y<xe;Y++){var le=(Re+me)*ue+Y+me,K=ne.data[4*(Re*xe+Y)+3]/255;if(K===1)Ve[le]=0,re[le]=W;else if(K===0)Ve[le]=W,re[le]=0;else{var _e=Math.max(0,.5-K),et=Math.max(0,K-.5);Ve[le]=_e*_e,re[le]=et*et}}}function G(ne,ue,ce,xe,oe,Ve,re){for(var me=0;me<ue*ce;me++){var Re=Math.sqrt(xe[me])-Math.sqrt(oe[me]);ne[me]=Math.round(255-255*(Re/Ve+re))}}D.prototype._draw=function(ne,ue){var ce=this.ctx.measureText(ne),xe=ce.width,oe=2*this.buffer,Ve,re,me,Re,Y,le,K,_e;ue&&this.useMetrics?(Y=Math.floor(ce.actualBoundingBoxAscent),_e=this.buffer+Math.ceil(ce.actualBoundingBoxAscent),le=this.buffer,K=this.buffer,re=Math.min(this.size,Math.ceil(ce.actualBoundingBoxRight-ce.actualBoundingBoxLeft)),Re=Math.min(this.size-le,Math.ceil(ce.actualBoundingBoxAscent+ce.actualBoundingBoxDescent)),Ve=re+oe,me=Re+oe,this.ctx.textBaseline="alphabetic"):(Ve=re=this.size,me=Re=this.size,Y=19*this.fontSize/24,le=K=0,_e=this.middle,this.ctx.textBaseline="middle");var et;re&&Re&&(this.ctx.clearRect(K,le,re,Re),this.ctx.fillText(ne,this.buffer,_e),et=this.ctx.getImageData(K,le,re,Re));var Je=new Uint8ClampedArray(Ve*me);return q(et,Ve,me,re,Re,this.gridOuter,this.gridInner),E(this.gridOuter,Ve,me,this.f,this.v,this.z),E(this.gridInner,Ve,me,this.f,this.v,this.z),G(Je,Ve,me,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Je,metrics:{width:re,height:Re,sdfWidth:Ve,sdfHeight:me,top:Y,left:0,advance:xe}}},D.prototype.draw=function(ne){return this._draw(ne,!1).data},D.prototype.drawWithMetrics=function(ne){return this._draw(ne,!0)};function E(ne,ue,ce,xe,oe,Ve){for(var re=0;re<ue;re++)he(ne,re,ue,ce,xe,oe,Ve);for(var me=0;me<ce;me++)he(ne,me*ue,1,ue,xe,oe,Ve)}function he(ne,ue,ce,xe,oe,Ve,re){var me,Re,Y,le;for(Ve[0]=0,re[0]=-W,re[1]=W,me=0;me<xe;me++)oe[me]=ne[ue+me*ce];for(me=1,Re=0,Y=0;me<xe;me++){do le=Ve[Re],Y=(oe[me]-oe[le]+me*me-le*le)/(me-le)/2;while(Y<=re[Re]&&--Re>-1);Re++,Ve[Re]=me,re[Re]=Y,re[Re+1]=W}for(me=0,Re=0;me<xe;me++){for(;re[Re+1]<me;)Re++;le=Ve[Re],ne[ue+me*ce]=oe[le]+(me-le)*(me-le)}}},38929:function(mt,W,D){mt.exports.VectorTile=D(22779),D(66024),D(59701)},22779:function(mt,W,D){"use strict";var q=D(59701);mt.exports=G;function G(he,ne){this.layers=he.readFields(E,{},ne)}function E(he,ne,ue){if(he===3){var ce=new q(ue,ue.readVarint()+ue.pos);ce.length&&(ne[ce.name]=ce)}}},66024:function(mt,W,D){"use strict";var q=D(75550);mt.exports=G;function G(ce,xe,oe,Ve,re){this.properties={},this.extent=oe,this.type=0,this._pbf=ce,this._geometry=-1,this._keys=Ve,this._values=re,ce.readFields(E,this,xe)}function E(ce,xe,oe){ce==1?xe.id=oe.readVarint():ce==2?he(oe,xe):ce==3?xe.type=oe.readVarint():ce==4&&(xe._geometry=oe.pos)}function he(ce,xe){for(var oe=ce.readVarint()+ce.pos;ce.pos<oe;){var Ve=xe._keys[ce.readVarint()],re=xe._values[ce.readVarint()];xe.properties[Ve]=re}}G.types=["Unknown","Point","LineString","Polygon"],G.prototype.loadGeometry=function(){var ce=this._pbf;ce.pos=this._geometry;for(var xe=ce.readVarint()+ce.pos,oe=1,Ve=0,re=0,me=0,Re=[],Y;ce.pos<xe;){if(Ve<=0){var le=ce.readVarint();oe=le&7,Ve=le>>3}if(Ve--,oe===1||oe===2)re+=ce.readSVarint(),me+=ce.readSVarint(),oe===1&&(Y&&Re.push(Y),Y=[]),Y.push(new q(re,me));else if(oe===7)Y&&Y.push(Y[0].clone());else throw new Error("unknown command "+oe)}return Y&&Re.push(Y),Re},G.prototype.bbox=function(){var ce=this._pbf;ce.pos=this._geometry;for(var xe=ce.readVarint()+ce.pos,oe=1,Ve=0,re=0,me=0,Re=1/0,Y=-1/0,le=1/0,K=-1/0;ce.pos<xe;){if(Ve<=0){var _e=ce.readVarint();oe=_e&7,Ve=_e>>3}if(Ve--,oe===1||oe===2)re+=ce.readSVarint(),me+=ce.readSVarint(),re<Re&&(Re=re),re>Y&&(Y=re),me<le&&(le=me),me>K&&(K=me);else if(oe!==7)throw new Error("unknown command "+oe)}return[Re,le,Y,K]},G.prototype.toGeoJSON=function(ce,xe,oe){var Ve=this.extent*Math.pow(2,oe),re=this.extent*ce,me=this.extent*xe,Re=this.loadGeometry(),Y=G.types[this.type],le,K;function _e(Ot){for(var dt=0;dt<Ot.length;dt++){var bt=Ot[dt],Me=180-(bt.y+me)*360/Ve;Ot[dt]=[(bt.x+re)*360/Ve-180,360/Math.PI*Math.atan(Math.exp(Me*Math.PI/180))-90]}}switch(this.type){case 1:var et=[];for(le=0;le<Re.length;le++)et[le]=Re[le][0];Re=et,_e(Re);break;case 2:for(le=0;le<Re.length;le++)_e(Re[le]);break;case 3:for(Re=ne(Re),le=0;le<Re.length;le++)for(K=0;K<Re[le].length;K++)_e(Re[le][K]);break}Re.length===1?Re=Re[0]:Y="Multi"+Y;var Je={type:"Feature",geometry:{type:Y,coordinates:Re},properties:this.properties};return"id"in this&&(Je.id=this.id),Je};function ne(ce){var xe=ce.length;if(xe<=1)return[ce];for(var oe=[],Ve,re,me=0;me<xe;me++){var Re=ue(ce[me]);Re!==0&&(re===void 0&&(re=Re<0),re===Re<0?(Ve&&oe.push(Ve),Ve=[ce[me]]):Ve.push(ce[me]))}return Ve&&oe.push(Ve),oe}function ue(ce){for(var xe=0,oe=0,Ve=ce.length,re=Ve-1,me,Re;oe<Ve;re=oe++)me=ce[oe],Re=ce[re],xe+=(Re.x-me.x)*(me.y+Re.y);return xe}},59701:function(mt,W,D){"use strict";var q=D(66024);mt.exports=G;function G(ne,ue){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=ne,this._keys=[],this._values=[],this._features=[],ne.readFields(E,this,ue),this.length=this._features.length}function E(ne,ue,ce){ne===15?ue.version=ce.readVarint():ne===1?ue.name=ce.readString():ne===5?ue.extent=ce.readVarint():ne===2?ue._features.push(ce.pos):ne===3?ue._keys.push(ce.readString()):ne===4&&ue._values.push(he(ce))}function he(ne){for(var ue=null,ce=ne.readVarint()+ne.pos;ne.pos<ce;){var xe=ne.readVarint()>>3;ue=xe===1?ne.readString():xe===2?ne.readFloat():xe===3?ne.readDouble():xe===4?ne.readVarint64():xe===5?ne.readVarint():xe===6?ne.readSVarint():xe===7?ne.readBoolean():null}return ue}G.prototype.feature=function(ne){if(ne<0||ne>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[ne];var ue=this._pbf.readVarint()+this._pbf.pos;return new q(this._pbf,ue,this.extent,this._keys,this._values)}},45471:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.PresetStatusColorTypes=void 0,W.isPresetColor=ue,W.isPresetStatusColor=ce;var G=q(D(861)),E=D(36496);const he=E.PresetColors.map(xe=>`${xe}-inverse`),ne=W.PresetStatusColorTypes=["success","processing","error","default","warning"];function ue(xe){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,G.default)(he),(0,G.default)(E.PresetColors)).includes(xe):E.PresetColors.includes(xe)}function ce(xe){return ne.includes(xe)}},49314:function(mt,W,D){"use strict";"use client";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294)),E=q(D(43273));const he=ue=>{let ce;return typeof ue=="object"&&(ue!=null&&ue.clearIcon)?ce=ue:ue&&(ce={clearIcon:G.default.createElement(E.default,null)}),ce};var ne=W.default=he},63101:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=xe;var G=q(D(56690)),E=q(D(89728)),he=q(D(67294));const ne=1e3*60*10;let ue=function(){function oe(){(0,G.default)(this,oe),this.map=new Map,this.objectIDMap=new WeakMap,this.nextID=0,this.lastAccessBeat=new Map,this.accessBeat=0}return(0,E.default)(oe,[{key:"set",value:function(re,me){this.clear();const Re=this.getCompositeKey(re);this.map.set(Re,me),this.lastAccessBeat.set(Re,Date.now())}},{key:"get",value:function(re){const me=this.getCompositeKey(re),Re=this.map.get(me);return this.lastAccessBeat.set(me,Date.now()),this.accessBeat+=1,Re}},{key:"getCompositeKey",value:function(re){return re.map(Re=>Re&&typeof Re=="object"?`obj_${this.getObjectID(Re)}`:`${typeof Re}_${Re}`).join("|")}},{key:"getObjectID",value:function(re){if(this.objectIDMap.has(re))return this.objectIDMap.get(re);const me=this.nextID;return this.objectIDMap.set(re,me),this.nextID+=1,me}},{key:"clear",value:function(){if(this.accessBeat>1e4){const re=Date.now();this.lastAccessBeat.forEach((me,Re)=>{re-me>ne&&(this.map.delete(Re),this.lastAccessBeat.delete(Re))}),this.accessBeat=0}}}])}();const ce=new ue;function xe(oe,Ve){return he.default.useMemo(()=>{const re=ce.get(Ve);if(re)return re;const me=oe();return ce.set(Ve,me),me},Ve)}},56333:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.containerBaseZIndexOffset=W.consumerBaseZIndexOffset=W.CONTAINER_MAX_OFFSET=void 0,W.useZIndex=re;var G=q(D(67294)),E=q(D(41401)),he=q(D(96877));const ne=100,ue=10,ce=W.CONTAINER_MAX_OFFSET=ne*ue,xe=W.containerBaseZIndexOffset={Modal:ne,Drawer:ne,Popover:ne,Popconfirm:ne,Tooltip:ne,Tour:ne},oe=W.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function Ve(me){return me in xe}function re(me,Re){const[,Y]=(0,E.default)(),le=G.default.useContext(he.default),K=Ve(me);if(Re!==void 0)return[Re,Re];let _e=le!=null?le:0;return K?(_e+=(le?0:Y.zIndexPopupBase)+xe[me],_e=Math.min(_e,Y.zIndexPopupBase+ce)):_e+=oe[me],[le===void 0?Re:_e,_e]}},53683:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getTransitionName=W.default=void 0;const D=()=>({height:0,opacity:0}),q=xe=>{const{scrollHeight:oe}=xe;return{height:oe,opacity:1}},G=xe=>({height:xe?xe.offsetHeight:0}),E=(xe,oe)=>(oe==null?void 0:oe.deadline)===!0||oe.propertyName==="height",he=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:D,onEnterStart:D,onAppearActive:q,onEnterActive:q,onLeaveStart:G,onLeaveActive:D,onAppearEnd:E,onEnterEnd:E,onLeaveEnd:E,motionDeadline:500}},ne=null,ue=(xe,oe,Ve)=>Ve!==void 0?Ve:`${xe}-${oe}`;W.getTransitionName=ue;var ce=W.default=he},74132:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=ue,W.getOverflowOptions=G;var q=D(9064);function G(ce,xe,oe,Ve){if(Ve===!1)return{adjustX:!1,adjustY:!1};const re=Ve&&typeof Ve=="object"?Ve:{},me={};switch(ce){case"top":case"bottom":me.shiftX=xe.arrowOffsetHorizontal*2+oe,me.shiftY=!0,me.adjustY=!0;break;case"left":case"right":me.shiftY=xe.arrowOffsetVertical*2+oe,me.shiftX=!0,me.adjustX=!0;break}const Re=Object.assign(Object.assign({},me),re);return Re.shiftX||(Re.adjustX=!0),Re.shiftY||(Re.adjustY=!0),Re}const E={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},he={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},ne=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function ue(ce){const{arrowWidth:xe,autoAdjustOverflow:oe,arrowPointAtCenter:Ve,offset:re,borderRadius:me,visibleFirst:Re}=ce,Y=xe/2,le={};return Object.keys(E).forEach(K=>{const _e=Ve&&he[K]||E[K],et=Object.assign(Object.assign({},_e),{offset:[0,0],dynamicInset:!0});switch(le[K]=et,ne.has(K)&&(et.autoArrow=!1),K){case"top":case"topLeft":case"topRight":et.offset[1]=-Y-re;break;case"bottom":case"bottomLeft":case"bottomRight":et.offset[1]=Y+re;break;case"left":case"leftTop":case"leftBottom":et.offset[0]=-Y-re;break;case"right":case"rightTop":case"rightBottom":et.offset[0]=Y+re;break}const Je=(0,q.getArrowOffsetToken)({contentRadius:me,limitVerticalRadius:!0});if(Ve)switch(K){case"topLeft":case"bottomLeft":et.offset[0]=-Je.arrowOffsetHorizontal-Y;break;case"topRight":case"bottomRight":et.offset[0]=Je.arrowOffsetHorizontal+Y;break;case"leftTop":case"rightTop":et.offset[1]=-Je.arrowOffsetHorizontal-Y;break;case"leftBottom":case"rightBottom":et.offset[1]=Je.arrowOffsetHorizontal+Y;break}et.overflow=G(K,Je,xe,oe),Re&&(et.htmlRegion="visibleFirst")}),le}},47419:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.cloneElement=ne,W.isFragment=E,W.replaceElement=void 0;var G=q(D(67294));function E(ue){return ue&&G.default.isValidElement(ue)&&ue.type===G.default.Fragment}const he=(ue,ce,xe)=>G.default.isValidElement(ue)?G.default.cloneElement(ue,typeof xe=="function"?xe(ue.props||{}):xe):ce;W.replaceElement=he;function ne(ue,ce){return he(ue,ue,ce)}},71434:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.getMergedStatus=void 0,W.getStatusClassNames=he;var G=q(D(93967));const E=null;function he(ue,ce,xe){return(0,G.default)({[`${ue}-status-success`]:ce==="success",[`${ue}-status-warning`]:ce==="warning",[`${ue}-status-error`]:ce==="error",[`${ue}-status-validating`]:ce==="validating",[`${ue}-has-feedback`]:xe})}const ne=(ue,ce)=>ce||ue;W.getMergedStatus=ne},38882:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.canUseDocElement=void 0,Object.defineProperty(W,"isStyleSupport",{enumerable:!0,get:function(){return E.isStyleSupport}});var G=q(D(19158)),E=D(3481);const he=()=>(0,G.default)()&&window.document.documentElement;W.canUseDocElement=he},60938:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(27712)),ne=function(oe,Ve){var re={};for(var me in oe)Object.prototype.hasOwnProperty.call(oe,me)&&Ve.indexOf(me)<0&&(re[me]=oe[me]);if(oe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Re=0,me=Object.getOwnPropertySymbols(oe);Re<me.length;Re++)Ve.indexOf(me[Re])<0&&Object.prototype.propertyIsEnumerable.call(oe,me[Re])&&(re[me[Re]]=oe[me[Re]]);return re};const ue={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-flex"},ce=E.forwardRef((oe,Ve)=>{const re=Je=>{const{keyCode:Ot}=Je;Ot===he.default.ENTER&&Je.preventDefault()},me=Je=>{const{keyCode:Ot}=Je,{onClick:dt}=oe;Ot===he.default.ENTER&&dt&&dt()},{style:Re,noStyle:Y,disabled:le,tabIndex:K=0}=oe,_e=ne(oe,["style","noStyle","disabled","tabIndex"]);let et={};return Y||(et=Object.assign({},ue)),le&&(et.pointerEvents="none"),et=Object.assign(Object.assign({},et),Re),E.createElement("div",Object.assign({role:"button",tabIndex:K,ref:Ve},_e,{onKeyDown:re,onKeyUp:me,style:et}))});var xe=W.default=ce},13594:function(mt,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.devUseWarning=W.default=W.WarningContext=void 0,W.noop=he,W.resetWarned=ue;var G=q(D(67294)),E=q(D(45520));function he(){}let ne=null;function ue(){ne=null,(0,E.resetWarned)()}let ce=he;const xe=W.WarningContext=G.createContext({}),oe=W.devUseWarning=()=>{const re=()=>{};return re.deprecated=he,re};var Ve=W.default=ce},96877:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294));const E=G.default.createContext(void 0);var he=W.default=E},93319:function(mt,W,D){"use strict";"use client";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.DisabledContextProvider=void 0;var G=q(D(67294));const E=G.createContext(!1),he=ue=>{let{children:ce,disabled:xe}=ue;const oe=G.useContext(E);return G.createElement(E.Provider,{value:xe!=null?xe:oe},ce)};W.DisabledContextProvider=he;var ne=W.default=E},16722:function(mt,W,D){"use strict";"use client";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ne;var G=q(D(67294)),E=D(82225),he=D(3184);function ne(ue){const{children:ce}=ue,[,xe]=(0,he.useToken)(),{motion:oe}=xe,Ve=G.useRef(!1);return Ve.current=Ve.current||oe===!1,Ve.current?G.createElement(E.Provider,{motion:oe},ce):ce}},11380:function(mt,W,D){"use strict";"use client";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294)),E=D(13594);const he=null;var ne=W.default=()=>null},3236:function(mt,W,D){"use strict";"use client";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.SizeContextProvider=void 0;var G=q(D(67294));const E=G.createContext(void 0),he=ue=>{let{children:ce,size:xe}=ue;const oe=G.useContext(E);return G.createElement(E.Provider,{value:xe||oe},ce)};W.SizeContextProvider=he;var ne=W.default=E},7177:function(mt,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.defaultIconPrefixCls=W.ConfigContext=W.ConfigConsumer=void 0;var G=q(D(67294));const E=W.defaultIconPrefixCls="anticon",he=(ce,xe)=>xe||(ce?`ant-${ce}`:"ant"),ne=W.ConfigContext=G.createContext({getPrefixCls:he,iconPrefixCls:E}),{Consumer:ue}=ne;W.ConfigConsumer=ue},56301:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.getStyle=xe,W.registerTheme=oe;var G=D(78589),E=D(131),he=q(D(19158)),ne=D(93399),ue=q(D(13594));const ce=`-ant-${Date.now()}-${Math.random()}`;function xe(Ve,re){const me={},Re=(K,_e)=>{let et=K.clone();return et=(_e==null?void 0:_e(et))||et,et.toRgbString()},Y=(K,_e)=>{const et=new E.TinyColor(K),Je=(0,G.generate)(et.toRgbString());me[`${_e}-color`]=Re(et),me[`${_e}-color-disabled`]=Je[1],me[`${_e}-color-hover`]=Je[4],me[`${_e}-color-active`]=Je[6],me[`${_e}-color-outline`]=et.clone().setAlpha(.2).toRgbString(),me[`${_e}-color-deprecated-bg`]=Je[0],me[`${_e}-color-deprecated-border`]=Je[2]};if(re.primaryColor){Y(re.primaryColor,"primary");const K=new E.TinyColor(re.primaryColor),_e=(0,G.generate)(K.toRgbString());_e.forEach((Je,Ot)=>{me[`primary-${Ot+1}`]=Je}),me["primary-color-deprecated-l-35"]=Re(K,Je=>Je.lighten(35)),me["primary-color-deprecated-l-20"]=Re(K,Je=>Je.lighten(20)),me["primary-color-deprecated-t-20"]=Re(K,Je=>Je.tint(20)),me["primary-color-deprecated-t-50"]=Re(K,Je=>Je.tint(50)),me["primary-color-deprecated-f-12"]=Re(K,Je=>Je.setAlpha(Je.getAlpha()*.12));const et=new E.TinyColor(_e[0]);me["primary-color-active-deprecated-f-30"]=Re(et,Je=>Je.setAlpha(Je.getAlpha()*.3)),me["primary-color-active-deprecated-d-02"]=Re(et,Je=>Je.darken(2))}return re.successColor&&Y(re.successColor,"success"),re.warningColor&&Y(re.warningColor,"warning"),re.errorColor&&Y(re.errorColor,"error"),re.infoColor&&Y(re.infoColor,"info"),`
  :root {
    ${Object.keys(me).map(K=>`--${Ve}-${K}: ${me[K]};`).join(`
`)}
  }
  `.trim()}function oe(Ve,re){const me=xe(Ve,re);(0,he.default)()&&(0,ne.updateCSS)(me,`${ce}-dynamic-theme`)}},14893:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var q=D(3184);const G=he=>{const[,,,,ne]=(0,q.useToken)();return ne?`${he}-css-var`:""};var E=W.default=G},5819:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=D(67294),E=q(D(93319)),he=q(D(3236));function ne(){const ce=(0,G.useContext)(E.default),xe=(0,G.useContext)(he.default);return{componentDisabled:ce,componentSize:xe}}var ue=W.default=ne},65693:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294)),E=q(D(3236));const he=ue=>{const ce=G.default.useContext(E.default);return G.default.useMemo(()=>ue?typeof ue=="string"?ue!=null?ue:ce:ue instanceof Function?ue(ce):ce:ce,[ue,ce])};var ne=W.default=he},25494:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ce;var G=q(D(67265)),E=q(D(11102)),he=D(13594),ne=D(3184),ue=q(D(78459));function ce(xe,oe,Ve){var re,me;const Re=(0,he.devUseWarning)("ConfigProvider"),Y=xe||{},le=Y.inherit===!1||!oe?Object.assign(Object.assign({},ne.defaultConfig),{hashed:(re=oe==null?void 0:oe.hashed)!==null&&re!==void 0?re:ne.defaultConfig.hashed,cssVar:oe==null?void 0:oe.cssVar}):oe,K=(0,ue.default)();return(0,G.default)(()=>{var _e,et;if(!xe)return oe;const Je=Object.assign({},le.components);Object.keys(xe.components||{}).forEach(bt=>{Je[bt]=Object.assign(Object.assign({},Je[bt]),xe.components[bt])});const Ot=`css-var-${K.replace(/:/g,"")}`,dt=((_e=Y.cssVar)!==null&&_e!==void 0?_e:le.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:Ve==null?void 0:Ve.prefixCls},typeof le.cssVar=="object"?le.cssVar:{}),typeof Y.cssVar=="object"?Y.cssVar:{}),{key:typeof Y.cssVar=="object"&&((et=Y.cssVar)===null||et===void 0?void 0:et.key)||Ot});return Object.assign(Object.assign(Object.assign({},le),Y),{token:Object.assign(Object.assign({},le.token),Y.token),components:Je,cssVar:dt})},[Y,le],(_e,et)=>_e.some((Je,Ot)=>{const dt=et[Ot];return!(0,E.default)(Je,dt,!0)}))}},78459:function(mt,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294));const E=Object.assign({},G),{useId:he}=E,ue=typeof he=="undefined"?()=>"":he;var ce=W.default=ue},31929:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"ConfigConsumer",{enumerable:!0,get:function(){return le.ConfigConsumer}}),Object.defineProperty(W,"ConfigContext",{enumerable:!0,get:function(){return le.ConfigContext}}),W.default=W.configConsumerProps=void 0,Object.defineProperty(W,"defaultIconPrefixCls",{enumerable:!0,get:function(){return le.defaultIconPrefixCls}}),W.warnContext=W.globalConfig=W.defaultPrefixCls=void 0;var E=G(D(67294)),he=D(6731),ne=q(D(13357)),ue=q(D(67265)),ce=D(20059),xe=G(D(13594)),oe=q(D(2197)),Ve=G(D(24522)),re=q(D(44805)),me=q(D(18253)),Re=D(89329),Y=q(D(98411)),le=D(7177),K=D(56301),_e=D(93319),et=q(D(5819)),Je=q(D(25494)),Ot=q(D(16722)),dt=q(D(11380)),bt=G(D(3236)),Me=q(D(82932)),we=function(nr,Ft){var Jt={};for(var ln in nr)Object.prototype.hasOwnProperty.call(nr,ln)&&Ft.indexOf(ln)<0&&(Jt[ln]=nr[ln]);if(nr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Un=0,ln=Object.getOwnPropertySymbols(nr);Un<ln.length;Un++)Ft.indexOf(ln[Un])<0&&Object.prototype.propertyIsEnumerable.call(nr,ln[Un])&&(Jt[ln[Un]]=nr[ln[Un]]);return Jt};let je=!1;const Ze=W.warnContext=null,ut=W.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale"],Qt=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],De=W.defaultPrefixCls="ant";let St,Oe,it,Ke;function Xe(){return St||De}function Pt(){return Oe||le.defaultIconPrefixCls}function xt(nr){return Object.keys(nr).some(Ft=>Ft.endsWith("Color"))}const Ie=nr=>{const{prefixCls:Ft,iconPrefixCls:Jt,theme:ln,holderRender:Un}=nr;Ft!==void 0&&(St=Ft),Jt!==void 0&&(Oe=Jt),"holderRender"in nr&&(Ke=Un),ln&&(xt(ln)?(0,K.registerTheme)(Xe(),ln):it=ln)},Wt=()=>({getPrefixCls:(nr,Ft)=>Ft||(nr?`${Xe()}-${nr}`:Xe()),getIconPrefixCls:Pt,getRootPrefixCls:()=>St||Xe(),getTheme:()=>it,holderRender:Ke});W.globalConfig=Wt;const hn=nr=>{const{children:Ft,csp:Jt,autoInsertSpaceInButton:ln,alert:Un,anchor:on,form:zt,locale:kt,componentSize:ke,direction:nt,space:Vt,virtual:U,dropdownMatchSelectWidth:pe,popupMatchSelectWidth:ct,popupOverflow:de,legacyLocale:Yt,parentContext:sn,iconPrefixCls:pn,theme:Dn,componentDisabled:Wn,segmented:Xn,statistic:dn,spin:_t,calendar:Rt,carousel:wn,cascader:In,collapse:Zn,typography:vt,checkbox:Ee,descriptions:Fe,divider:st,drawer:It,skeleton:Mt,steps:En,image:Yn,layout:yr,list:qn,mentions:Pe,modal:Te,progress:Ue,result:ot,slider:wt,breadcrumb:$t,menu:vn,pagination:Et,input:Kt,textArea:Qn,empty:_r,badge:Vr,radio:pr,rate:zr,switch:gi,transfer:wi,avatar:Sr,message:Ti,tag:hi,table:ai,card:Mo,tabs:xi,timeline:ea,timePicker:va,upload:Ro,notification:$o,tree:Be,colorPicker:rt,datePicker:jt,rangePicker:un,flex:Nn,wave:Bn,dropdown:yn,warning:Cn,tour:dr,floatButtonGroup:hr}=nr,Jr=E.useCallback((oo,Ao)=>{const{prefixCls:bs}=nr;if(Ao)return Ao;const ma=bs||sn.getPrefixCls("");return oo?`${ma}-${oo}`:ma},[sn.getPrefixCls,nr.prefixCls]),zi=pn||sn.iconPrefixCls||le.defaultIconPrefixCls,Ji=Jt||sn.csp;(0,Me.default)(zi,Ji);const ei=(0,Je.default)(Dn,sn.theme,{prefixCls:Jr("")}),Hi={csp:Ji,autoInsertSpaceInButton:ln,alert:Un,anchor:on,locale:kt||Yt,direction:nt,space:Vt,virtual:U,popupMatchSelectWidth:ct!=null?ct:pe,popupOverflow:de,getPrefixCls:Jr,iconPrefixCls:zi,theme:ei,segmented:Xn,statistic:dn,spin:_t,calendar:Rt,carousel:wn,cascader:In,collapse:Zn,typography:vt,checkbox:Ee,descriptions:Fe,divider:st,drawer:It,skeleton:Mt,steps:En,image:Yn,input:Kt,textArea:Qn,layout:yr,list:qn,mentions:Pe,modal:Te,progress:Ue,result:ot,slider:wt,breadcrumb:$t,menu:vn,pagination:Et,empty:_r,badge:Vr,radio:pr,rate:zr,switch:gi,transfer:wi,avatar:Sr,message:Ti,tag:hi,table:ai,card:Mo,tabs:xi,timeline:ea,timePicker:va,upload:Ro,notification:$o,tree:Be,colorPicker:rt,datePicker:jt,rangePicker:un,flex:Nn,wave:Bn,dropdown:yn,warning:Cn,tour:dr,floatButtonGroup:hr},Ii=Object.assign({},sn);Object.keys(Hi).forEach(oo=>{Hi[oo]!==void 0&&(Ii[oo]=Hi[oo])}),Qt.forEach(oo=>{const Ao=nr[oo];Ao&&(Ii[oo]=Ao)}),typeof ln!="undefined"&&(Ii.button=Object.assign({autoInsertSpace:ln},Ii.button));const Wr=(0,ue.default)(()=>Ii,Ii,(oo,Ao)=>{const bs=Object.keys(oo),ma=Object.keys(Ao);return bs.length!==ma.length||bs.some(ta=>oo[ta]!==Ao[ta])}),Eo=E.useMemo(()=>({prefixCls:zi,csp:Ji}),[zi,Ji]);let ci=E.createElement(E.Fragment,null,E.createElement(dt.default,{dropdownMatchSelectWidth:pe}),Ft);const xo=E.useMemo(()=>{var oo,Ao,bs,ma;return(0,ce.merge)(((oo=me.default.Form)===null||oo===void 0?void 0:oo.defaultValidateMessages)||{},((bs=(Ao=Wr.locale)===null||Ao===void 0?void 0:Ao.Form)===null||bs===void 0?void 0:bs.defaultValidateMessages)||{},((ma=Wr.form)===null||ma===void 0?void 0:ma.validateMessages)||{},(zt==null?void 0:zt.validateMessages)||{})},[Wr,zt==null?void 0:zt.validateMessages]);Object.keys(xo).length>0&&(ci=E.createElement(oe.default.Provider,{value:xo},ci)),kt&&(ci=E.createElement(Ve.default,{locale:kt,_ANT_MARK__:Ve.ANT_MARK},ci)),(zi||Ji)&&(ci=E.createElement(ne.default.Provider,{value:Eo},ci)),ke&&(ci=E.createElement(bt.SizeContextProvider,{size:ke},ci)),ci=E.createElement(Ot.default,null,ci);const Wi=E.useMemo(()=>{const oo=ei||{},{algorithm:Ao,token:bs,components:ma,cssVar:ta}=oo,vs=we(oo,["algorithm","token","components","cssVar"]),ms=Ao&&(!Array.isArray(Ao)||Ao.length>0)?(0,he.createTheme)(Ao):Re.defaultTheme,At={};Object.entries(ma||{}).forEach(jn=>{let[Lr,Oi]=jn;const Gi=Object.assign({},Oi);"algorithm"in Gi&&(Gi.algorithm===!0?Gi.theme=ms:(Array.isArray(Gi.algorithm)||typeof Gi.algorithm=="function")&&(Gi.theme=(0,he.createTheme)(Gi.algorithm)),delete Gi.algorithm),At[Lr]=Gi});const Gt=Object.assign(Object.assign({},Y.default),bs);return Object.assign(Object.assign({},vs),{theme:ms,token:Gt,components:At,override:Object.assign({override:Gt},At),cssVar:ta})},[ei]);return Dn&&(ci=E.createElement(Re.DesignTokenContext.Provider,{value:Wi},ci)),Wr.warning&&(ci=E.createElement(xe.WarningContext.Provider,{value:Wr.warning},ci)),Wn!==void 0&&(ci=E.createElement(_e.DisabledContextProvider,{disabled:Wn},ci)),E.createElement(le.ConfigContext.Provider,{value:Wr},ci)},Pn=nr=>{const Ft=E.useContext(le.ConfigContext),Jt=E.useContext(re.default);return E.createElement(hn,Object.assign({parentContext:Ft,legacyLocale:Jt},nr))};Pn.ConfigContext=le.ConfigContext,Pn.SizeContext=bt.default,Pn.config=Ie,Pn.useConfig=et.default,Object.defineProperty(Pn,"SizeContext",{get:()=>bt.default});var $n=W.default=Pn},82932:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return q.useResetIconStyle}});var q=D(3184)},51130:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.VariantContext=W.NoStyleItemContext=W.NoFormStyle=W.FormProvider=W.FormItemPrefixContext=W.FormItemInputContext=W.FormContext=void 0;var E=G(D(67294)),he=E,ne=D(88692),ue=q(D(18475));const ce=W.FormContext=he.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),xe=W.NoStyleItemContext=he.createContext(null),oe=Y=>{const le=(0,ue.default)(Y,["prefixCls"]);return he.createElement(ne.FormProvider,Object.assign({},le))};W.FormProvider=oe;const Ve=W.FormItemPrefixContext=he.createContext({prefixCls:""}),re=W.FormItemInputContext=he.createContext({}),me=Y=>{let{children:le,status:K,override:_e}=Y;const et=(0,E.useContext)(re),Je=(0,E.useMemo)(()=>{const Ot=Object.assign({},et);return _e&&delete Ot.isFormItemInput,K&&(delete Ot.status,delete Ot.hasFeedback,delete Ot.feedbackIcon),Ot},[K,_e,et]);return he.createElement(re.Provider,{value:Je},le)};W.NoFormStyle=me;const Re=W.VariantContext=(0,E.createContext)(void 0)},96424:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.Variants=void 0;var q=D(67294),G=D(51130);const E=W.Variants=["outlined","borderless","filled"],he=function(ue){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const xe=(0,q.useContext)(G.VariantContext);let oe;typeof ue!="undefined"?oe=ue:ce===!1?oe="borderless":oe=xe!=null?xe:"outlined";const Ve=E.includes(oe);return[oe,Ve]};var ne=W.default=he},2197:function(mt,W,D){"use strict";"use client";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var q=D(67294),G=W.default=(0,q.createContext)(void 0)},10815:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0,W.triggerFocus=dt;var E=G(D(67294)),he=q(D(93967)),ne=q(D(67656)),ue=D(75531),ce=q(D(49314)),xe=D(71434),oe=D(13594),Ve=D(31929),re=q(D(93319)),me=q(D(14893)),Re=q(D(65693)),Y=D(51130),le=q(D(96424)),K=D(46549),_e=q(D(81722)),et=q(D(89858)),Je=D(36714),Ot=function(we,je){var Ze={};for(var ut in we)Object.prototype.hasOwnProperty.call(we,ut)&&je.indexOf(ut)<0&&(Ze[ut]=we[ut]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Qt=0,ut=Object.getOwnPropertySymbols(we);Qt<ut.length;Qt++)je.indexOf(ut[Qt])<0&&Object.prototype.propertyIsEnumerable.call(we,ut[Qt])&&(Ze[ut[Qt]]=we[ut[Qt]]);return Ze};function dt(we,je){if(!we)return;we.focus(je);const{cursor:Ze}=je||{};if(Ze){const ut=we.value.length;switch(Ze){case"start":we.setSelectionRange(0,0);break;case"end":we.setSelectionRange(ut,ut);break;default:we.setSelectionRange(0,ut)}}}const bt=(0,E.forwardRef)((we,je)=>{var Ze;const{prefixCls:ut,bordered:Qt=!0,status:De,size:St,disabled:Oe,onBlur:it,onFocus:Ke,suffix:Xe,allowClear:Pt,addonAfter:xt,addonBefore:Ie,className:Wt,style:hn,styles:Pn,rootClassName:$n,onChange:nr,classNames:Ft,variant:Jt}=we,ln=Ot(we,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:Un,direction:on,input:zt}=E.default.useContext(Ve.ConfigContext),kt=Un("input",ut),ke=(0,E.useRef)(null),nt=(0,me.default)(kt),[Vt,U,pe]=(0,et.default)(kt,nt),{compactSize:ct,compactItemClassnames:de}=(0,K.useCompactItemContext)(kt,on),Yt=(0,Re.default)(En=>{var Yn;return(Yn=St!=null?St:ct)!==null&&Yn!==void 0?Yn:En}),sn=E.default.useContext(re.default),pn=Oe!=null?Oe:sn,{status:Dn,hasFeedback:Wn,feedbackIcon:Xn}=(0,E.useContext)(Y.FormItemInputContext),dn=(0,xe.getMergedStatus)(Dn,De),_t=(0,Je.hasPrefixSuffix)(we)||!!Wn,Rt=(0,E.useRef)(_t),wn=(0,_e.default)(ke,!0),In=En=>{wn(),it==null||it(En)},Zn=En=>{wn(),Ke==null||Ke(En)},vt=En=>{wn(),nr==null||nr(En)},Ee=(Wn||Xe)&&E.default.createElement(E.default.Fragment,null,Xe,Wn&&Xn),Fe=En=>En&&E.default.createElement(K.NoCompactStyle,null,E.default.createElement(Y.NoFormStyle,{override:!0,status:!0},En)),st=(0,ce.default)(Pt!=null?Pt:zt==null?void 0:zt.allowClear),[It,Mt]=(0,le.default)(Jt,Qt);return Vt(E.default.createElement(ne.default,Object.assign({ref:(0,ue.composeRef)(je,ke),prefixCls:kt,autoComplete:zt==null?void 0:zt.autoComplete},ln,{disabled:pn,onBlur:In,onFocus:Zn,style:Object.assign(Object.assign({},zt==null?void 0:zt.style),hn),styles:Object.assign(Object.assign({},zt==null?void 0:zt.styles),Pn),suffix:Ee,allowClear:st,className:(0,he.default)(Wt,$n,pe,nt,de,zt==null?void 0:zt.className),onChange:vt,addonBefore:Fe(Ie),addonAfter:Fe(xt),classNames:Object.assign(Object.assign(Object.assign({},Ft),zt==null?void 0:zt.classNames),{input:(0,he.default)({[`${kt}-sm`]:Yt==="small",[`${kt}-lg`]:Yt==="large",[`${kt}-rtl`]:on==="rtl"},Ft==null?void 0:Ft.input,(Ze=zt==null?void 0:zt.classNames)===null||Ze===void 0?void 0:Ze.input,U),variant:(0,he.default)({[`${kt}-${It}`]:Mt},(0,xe.getStatusClassNames)(kt,dn)),affixWrapper:(0,he.default)({[`${kt}-affix-wrapper-sm`]:Yt==="small",[`${kt}-affix-wrapper-lg`]:Yt==="large",[`${kt}-affix-wrapper-rtl`]:on==="rtl"},U),wrapper:(0,he.default)({[`${kt}-group-rtl`]:on==="rtl"},U),groupWrapper:(0,he.default)({[`${kt}-group-wrapper-sm`]:Yt==="small",[`${kt}-group-wrapper-lg`]:Yt==="large",[`${kt}-group-wrapper-rtl`]:on==="rtl",[`${kt}-group-wrapper-${It}`]:Mt},(0,xe.getStatusClassNames)(`${kt}-group-wrapper`,dn,Wn),U)})})))});var Me=W.default=bt},14104:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=E,ne=q(D(93967)),ue=q(D(43961)),ce=q(D(49314)),xe=D(71434),oe=D(13594),Ve=D(31929),re=q(D(93319)),me=q(D(14893)),Re=q(D(65693)),Y=D(51130),le=q(D(96424)),K=D(10815),_e=q(D(89858)),et=function(dt,bt){var Me={};for(var we in dt)Object.prototype.hasOwnProperty.call(dt,we)&&bt.indexOf(we)<0&&(Me[we]=dt[we]);if(dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,we=Object.getOwnPropertySymbols(dt);je<we.length;je++)bt.indexOf(we[je])<0&&Object.prototype.propertyIsEnumerable.call(dt,we[je])&&(Me[we[je]]=dt[we[je]]);return Me};const Je=(0,E.forwardRef)((dt,bt)=>{var Me,we;const{prefixCls:je,bordered:Ze=!0,size:ut,disabled:Qt,status:De,allowClear:St,classNames:Oe,rootClassName:it,className:Ke,style:Xe,styles:Pt,variant:xt}=dt,Ie=et(dt,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:Wt,direction:hn,textArea:Pn}=he.useContext(Ve.ConfigContext),$n=(0,Re.default)(ut),nr=he.useContext(re.default),Ft=Qt!=null?Qt:nr,{status:Jt,hasFeedback:ln,feedbackIcon:Un}=he.useContext(Y.FormItemInputContext),on=(0,xe.getMergedStatus)(Jt,De),zt=he.useRef(null);he.useImperativeHandle(bt,()=>{var Yt;return{resizableTextArea:(Yt=zt.current)===null||Yt===void 0?void 0:Yt.resizableTextArea,focus:sn=>{var pn,Dn;(0,K.triggerFocus)((Dn=(pn=zt.current)===null||pn===void 0?void 0:pn.resizableTextArea)===null||Dn===void 0?void 0:Dn.textArea,sn)},blur:()=>{var sn;return(sn=zt.current)===null||sn===void 0?void 0:sn.blur()}}});const kt=Wt("input",je),ke=(0,me.default)(kt),[nt,Vt,U]=(0,_e.default)(kt,ke),[pe,ct]=(0,le.default)(xt,Ze),de=(0,ce.default)(St!=null?St:Pn==null?void 0:Pn.allowClear);return nt(he.createElement(ue.default,Object.assign({autoComplete:Pn==null?void 0:Pn.autoComplete},Ie,{style:Object.assign(Object.assign({},Pn==null?void 0:Pn.style),Xe),styles:Object.assign(Object.assign({},Pn==null?void 0:Pn.styles),Pt),disabled:Ft,allowClear:de,className:(0,ne.default)(U,ke,Ke,it,Pn==null?void 0:Pn.className),classNames:Object.assign(Object.assign(Object.assign({},Oe),Pn==null?void 0:Pn.classNames),{textarea:(0,ne.default)({[`${kt}-sm`]:$n==="small",[`${kt}-lg`]:$n==="large"},Vt,Oe==null?void 0:Oe.textarea,(Me=Pn==null?void 0:Pn.classNames)===null||Me===void 0?void 0:Me.textarea),variant:(0,ne.default)({[`${kt}-${pe}`]:ct},(0,xe.getStatusClassNames)(kt,on)),affixWrapper:(0,ne.default)(`${kt}-textarea-affix-wrapper`,{[`${kt}-affix-wrapper-rtl`]:hn==="rtl",[`${kt}-affix-wrapper-sm`]:$n==="small",[`${kt}-affix-wrapper-lg`]:$n==="large",[`${kt}-textarea-show-count`]:dt.showCount||((we=dt.count)===null||we===void 0?void 0:we.show)},Vt)}),prefixCls:kt,suffix:ln&&he.createElement("span",{className:`${kt}-textarea-suffix`},Un),ref:zt})))});var Ot=W.default=Je},81722:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=G;var q=D(67294);function G(E,he){const ne=(0,q.useRef)([]),ue=()=>{ne.current.push(setTimeout(()=>{var ce,xe,oe,Ve;!((ce=E.current)===null||ce===void 0)&&ce.input&&((xe=E.current)===null||xe===void 0?void 0:xe.input.getAttribute("type"))==="password"&&(!((oe=E.current)===null||oe===void 0)&&oe.input.hasAttribute("value"))&&((Ve=E.current)===null||Ve===void 0||Ve.input.removeAttribute("value"))}))};return(0,q.useEffect)(()=>(he&&ue(),()=>ne.current.forEach(ce=>{ce&&clearTimeout(ce)})),[]),ue}},89858:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genPlaceholderStyle=W.genInputSmallStyle=W.genInputGroupStyle=W.genBasicInputStyle=W.genActiveStyle=W.default=void 0,Object.defineProperty(W,"initComponentToken",{enumerable:!0,get:function(){return ne.initComponentToken}}),Object.defineProperty(W,"initInputToken",{enumerable:!0,get:function(){return ne.initInputToken}});var q=D(6731),G=D(98078),E=D(78793),he=D(3184),ne=D(25735),ue=D(58594);const ce=dt=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:dt,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});W.genPlaceholderStyle=ce;const xe=dt=>({borderColor:dt.activeBorderColor,boxShadow:dt.activeShadow,outline:0,backgroundColor:dt.activeBg});W.genActiveStyle=xe;const oe=dt=>{const{paddingBlockLG:bt,lineHeightLG:Me,borderRadiusLG:we,paddingInlineLG:je}=dt;return{padding:`${(0,q.unit)(bt)} ${(0,q.unit)(je)}`,fontSize:dt.inputFontSizeLG,lineHeight:Me,borderRadius:we}},Ve=dt=>({padding:`${(0,q.unit)(dt.paddingBlockSM)} ${(0,q.unit)(dt.paddingInlineSM)}`,fontSize:dt.inputFontSizeSM,borderRadius:dt.borderRadiusSM});W.genInputSmallStyle=Ve;const re=dt=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,q.unit)(dt.paddingBlock)} ${(0,q.unit)(dt.paddingInline)}`,color:dt.colorText,fontSize:dt.inputFontSize,lineHeight:dt.lineHeight,borderRadius:dt.borderRadius,transition:`all ${dt.motionDurationMid}`},ce(dt.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:dt.controlHeight,lineHeight:dt.lineHeight,verticalAlign:"bottom",transition:`all ${dt.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},oe(dt)),"&-sm":Object.assign({},Ve(dt)),"&-rtl, &-textarea-rtl":{direction:"rtl"}});W.genBasicInputStyle=re;const me=dt=>{const{componentCls:bt,antCls:Me}=dt;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:dt.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${bt}, &-lg > ${bt}-group-addon`]:Object.assign({},oe(dt)),[`&-sm ${bt}, &-sm > ${bt}-group-addon`]:Object.assign({},Ve(dt)),[`&-lg ${Me}-select-single ${Me}-select-selector`]:{height:dt.controlHeightLG},[`&-sm ${Me}-select-single ${Me}-select-selector`]:{height:dt.controlHeightSM},[`> ${bt}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${bt}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,q.unit)(dt.paddingInline)}`,color:dt.colorText,fontWeight:"normal",fontSize:dt.inputFontSize,textAlign:"center",borderRadius:dt.borderRadius,transition:`all ${dt.motionDurationSlow}`,lineHeight:1,[`${Me}-select`]:{margin:`${(0,q.unit)(dt.calc(dt.paddingBlock).add(1).mul(-1).equal())} ${(0,q.unit)(dt.calc(dt.paddingInline).mul(-1).equal())}`,[`&${Me}-select-single:not(${Me}-select-customize-input):not(${Me}-pagination-size-changer)`]:{[`${Me}-select-selector`]:{backgroundColor:"inherit",border:`${(0,q.unit)(dt.lineWidth)} ${dt.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Me}-select-selector`]:{color:dt.colorPrimary}}},[`${Me}-cascader-picker`]:{margin:`-9px ${(0,q.unit)(dt.calc(dt.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${Me}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${bt}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${bt}-search-with-button &`]:{zIndex:0}}},[`> ${bt}:first-child, ${bt}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Me}-select ${Me}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${bt}-affix-wrapper`]:{[`&:not(:first-child) ${bt}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${bt}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${bt}:last-child, ${bt}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Me}-select ${Me}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${bt}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${bt}-search &`]:{borderStartStartRadius:dt.borderRadius,borderEndStartRadius:dt.borderRadius}},[`&:not(:first-child), ${bt}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${bt}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,G.clearFix)()),{[`${bt}-group-addon, ${bt}-group-wrap, > ${bt}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:dt.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${bt}-affix-wrapper,
        & > ${bt}-number-affix-wrapper,
        & > ${Me}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:dt.calc(dt.lineWidth).mul(-1).equal(),borderInlineEndWidth:dt.lineWidth},[`${bt}`]:{float:"none"},[`& > ${Me}-select > ${Me}-select-selector,
      & > ${Me}-select-auto-complete ${bt},
      & > ${Me}-cascader-picker ${bt},
      & > ${bt}-group-wrapper ${bt}`]:{borderInlineEndWidth:dt.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${Me}-select-focused`]:{zIndex:1},[`& > ${Me}-select > ${Me}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Me}-select:first-child > ${Me}-select-selector,
      & > ${Me}-select-auto-complete:first-child ${bt},
      & > ${Me}-cascader-picker:first-child ${bt}`]:{borderStartStartRadius:dt.borderRadius,borderEndStartRadius:dt.borderRadius},[`& > *:last-child,
      & > ${Me}-select:last-child > ${Me}-select-selector,
      & > ${Me}-cascader-picker:last-child ${bt},
      & > ${Me}-cascader-picker-focused:last-child ${bt}`]:{borderInlineEndWidth:dt.lineWidth,borderStartEndRadius:dt.borderRadius,borderEndEndRadius:dt.borderRadius},[`& > ${Me}-select-auto-complete ${bt}`]:{verticalAlign:"top"},[`${bt}-group-wrapper + ${bt}-group-wrapper`]:{marginInlineStart:dt.calc(dt.lineWidth).mul(-1).equal(),[`${bt}-affix-wrapper`]:{borderRadius:0}},[`${bt}-group-wrapper:not(:last-child)`]:{[`&${bt}-search > ${bt}-group`]:{[`& > ${bt}-group-addon > ${bt}-search-button`]:{borderRadius:0},[`& > ${bt}`]:{borderStartStartRadius:dt.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:dt.borderRadius}}}})}};W.genInputGroupStyle=me;const Re=dt=>{const{componentCls:bt,controlHeightSM:Me,lineWidth:we,calc:je}=dt,ut=je(Me).sub(je(we).mul(2)).sub(16).div(2).equal();return{[bt]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,G.resetComponent)(dt)),re(dt)),(0,ue.genOutlinedStyle)(dt)),(0,ue.genFilledStyle)(dt)),(0,ue.genBorderlessStyle)(dt)),{'&[type="color"]':{height:dt.controlHeight,[`&${bt}-lg`]:{height:dt.controlHeightLG},[`&${bt}-sm`]:{height:Me,paddingTop:ut,paddingBottom:ut}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Y=dt=>{const{componentCls:bt}=dt;return{[`${bt}-clear-icon`]:{margin:0,color:dt.colorTextQuaternary,fontSize:dt.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${dt.motionDurationSlow}`,"&:hover":{color:dt.colorTextTertiary},"&:active":{color:dt.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,q.unit)(dt.inputAffixPadding)}`}}}},le=dt=>{const{componentCls:bt,inputAffixPadding:Me,colorTextDescription:we,motionDurationSlow:je,colorIcon:Ze,colorIconHover:ut,iconCls:Qt}=dt;return{[`${bt}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},re(dt)),{display:"inline-flex",[`&:not(${bt}-disabled):hover`]:{zIndex:1,[`${bt}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${bt}`]:{padding:0},[`> input${bt}, > textarea${bt}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${bt}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:dt.paddingXS}},"&-show-count-suffix":{color:we},"&-show-count-has-suffix":{marginInlineEnd:dt.paddingXXS},"&-prefix":{marginInlineEnd:Me},"&-suffix":{marginInlineStart:Me}}}),Y(dt)),{[`${Qt}${bt}-password-icon`]:{color:Ze,cursor:"pointer",transition:`all ${je}`,"&:hover":{color:ut}}})}},K=dt=>{const{componentCls:bt,borderRadiusLG:Me,borderRadiusSM:we}=dt;return{[`${bt}-group`]:Object.assign(Object.assign(Object.assign({},(0,G.resetComponent)(dt)),me(dt)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${bt}-group-addon`]:{borderRadius:Me,fontSize:dt.inputFontSizeLG}},"&-sm":{[`${bt}-group-addon`]:{borderRadius:we}}},(0,ue.genOutlinedGroupStyle)(dt)),(0,ue.genFilledGroupStyle)(dt)),{[`&:not(${bt}-compact-first-item):not(${bt}-compact-last-item)${bt}-compact-item`]:{[`${bt}, ${bt}-group-addon`]:{borderRadius:0}},[`&:not(${bt}-compact-last-item)${bt}-compact-first-item`]:{[`${bt}, ${bt}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${bt}-compact-first-item)${bt}-compact-last-item`]:{[`${bt}, ${bt}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${bt}-compact-last-item)${bt}-compact-item`]:{[`${bt}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},_e=dt=>{const{componentCls:bt,antCls:Me}=dt,we=`${bt}-search`;return{[we]:{[`${bt}`]:{"&:hover, &:focus":{borderColor:dt.colorPrimaryHover,[`+ ${bt}-group-addon ${we}-button:not(${Me}-btn-primary)`]:{borderInlineStartColor:dt.colorPrimaryHover}}},[`${bt}-affix-wrapper`]:{borderRadius:0},[`${bt}-lg`]:{lineHeight:dt.calc(dt.lineHeightLG).sub(2e-4).equal()},[`> ${bt}-group`]:{[`> ${bt}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${we}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:dt.borderRadius,borderEndEndRadius:dt.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${we}-button:not(${Me}-btn-primary)`]:{color:dt.colorTextDescription,"&:hover":{color:dt.colorPrimaryHover},"&:active":{color:dt.colorPrimaryActive},[`&${Me}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${we}-button`]:{height:dt.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${we}-button`]:{height:dt.controlHeightLG},[`&-small ${we}-button`]:{height:dt.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${bt}-compact-item`]:{[`&:not(${bt}-compact-last-item)`]:{[`${bt}-group-addon`]:{[`${bt}-search-button`]:{marginInlineEnd:dt.calc(dt.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${bt}-compact-first-item)`]:{[`${bt},${bt}-affix-wrapper`]:{borderRadius:0}},[`> ${bt}-group-addon ${bt}-search-button,
        > ${bt},
        ${bt}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${bt}-affix-wrapper-focused`]:{zIndex:2}}}}},et=dt=>{const{componentCls:bt,paddingLG:Me}=dt,we=`${bt}-textarea`;return{[we]:{position:"relative","&-show-count":{[`> ${bt}`]:{height:"100%"},[`${bt}-data-count`]:{position:"absolute",bottom:dt.calc(dt.fontSize).mul(dt.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:dt.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${bt},
        &-affix-wrapper${we}-has-feedback ${bt}
      `]:{paddingInlineEnd:Me},[`&-affix-wrapper${bt}-affix-wrapper`]:{padding:0,[`> textarea${bt}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${bt}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${bt}-clear-icon`]:{position:"absolute",insetInlineEnd:dt.paddingXS,insetBlockStart:dt.paddingXS},[`${we}-suffix`]:{position:"absolute",top:0,insetInlineEnd:dt.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},Je=dt=>{const{componentCls:bt}=dt;return{[`${bt}-out-of-range`]:{[`&, & input, & textarea, ${bt}-show-count-suffix, ${bt}-data-count`]:{color:dt.colorError}}}};var Ot=W.default=(0,he.genStyleHooks)("Input",dt=>{const bt=(0,he.mergeToken)(dt,(0,ne.initInputToken)(dt));return[Re(bt),et(bt),le(bt),K(bt),_e(bt),Je(bt),(0,E.genCompactItemStyle)(bt)]},ne.initComponentToken,{resetFont:!1})},25735:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.initComponentToken=void 0,W.initInputToken=G;var q=D(3184);function G(he){return(0,q.mergeToken)(he,{inputAffixPadding:he.paddingXXS})}const E=he=>{const{controlHeight:ne,fontSize:ue,lineHeight:ce,lineWidth:xe,controlHeightSM:oe,controlHeightLG:Ve,fontSizeLG:re,lineHeightLG:me,paddingSM:Re,controlPaddingHorizontalSM:Y,controlPaddingHorizontal:le,colorFillAlter:K,colorPrimaryHover:_e,colorPrimary:et,controlOutlineWidth:Je,controlOutline:Ot,colorErrorOutline:dt,colorWarningOutline:bt,colorBgContainer:Me}=he;return{paddingBlock:Math.max(Math.round((ne-ue*ce)/2*10)/10-xe,0),paddingBlockSM:Math.max(Math.round((oe-ue*ce)/2*10)/10-xe,0),paddingBlockLG:Math.ceil((Ve-re*me)/2*10)/10-xe,paddingInline:Re-xe,paddingInlineSM:Y-xe,paddingInlineLG:le-xe,addonBg:K,activeBorderColor:et,hoverBorderColor:_e,activeShadow:`0 0 0 ${Je}px ${Ot}`,errorActiveShadow:`0 0 0 ${Je}px ${dt}`,warningActiveShadow:`0 0 0 ${Je}px ${bt}`,hoverBg:Me,activeBg:Me,inputFontSize:ue,inputFontSizeLG:re,inputFontSizeSM:ue}};W.initComponentToken=E},58594:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genOutlinedStyle=W.genOutlinedGroupStyle=W.genHoverStyle=W.genFilledStyle=W.genFilledGroupStyle=W.genDisabledStyle=W.genBorderlessStyle=W.genBaseOutlinedStyle=void 0;var q=D(6731),G=D(3184);const E=K=>({borderColor:K.hoverBorderColor,backgroundColor:K.hoverBg});W.genHoverStyle=E;const he=K=>({color:K.colorTextDisabled,backgroundColor:K.colorBgContainerDisabled,borderColor:K.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},E((0,G.mergeToken)(K,{hoverBorderColor:K.colorBorder,hoverBg:K.colorBgContainerDisabled})))});W.genDisabledStyle=he;const ne=(K,_e)=>({background:K.colorBgContainer,borderWidth:K.lineWidth,borderStyle:K.lineType,borderColor:_e.borderColor,"&:hover":{borderColor:_e.hoverBorderColor,backgroundColor:K.hoverBg},"&:focus, &:focus-within":{borderColor:_e.activeBorderColor,boxShadow:_e.activeShadow,outline:0,backgroundColor:K.activeBg}});W.genBaseOutlinedStyle=ne;const ue=(K,_e)=>({[`&${K.componentCls}-status-${_e.status}:not(${K.componentCls}-disabled)`]:Object.assign(Object.assign({},ne(K,_e)),{[`${K.componentCls}-prefix, ${K.componentCls}-suffix`]:{color:_e.affixColor}}),[`&${K.componentCls}-status-${_e.status}${K.componentCls}-disabled`]:{borderColor:_e.borderColor}}),ce=(K,_e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ne(K,{borderColor:K.colorBorder,hoverBorderColor:K.hoverBorderColor,activeBorderColor:K.activeBorderColor,activeShadow:K.activeShadow})),{[`&${K.componentCls}-disabled, &[disabled]`]:Object.assign({},he(K))}),ue(K,{status:"error",borderColor:K.colorError,hoverBorderColor:K.colorErrorBorderHover,activeBorderColor:K.colorError,activeShadow:K.errorActiveShadow,affixColor:K.colorError})),ue(K,{status:"warning",borderColor:K.colorWarning,hoverBorderColor:K.colorWarningBorderHover,activeBorderColor:K.colorWarning,activeShadow:K.warningActiveShadow,affixColor:K.colorWarning})),_e)});W.genOutlinedStyle=ce;const xe=(K,_e)=>({[`&${K.componentCls}-group-wrapper-status-${_e.status}`]:{[`${K.componentCls}-group-addon`]:{borderColor:_e.addonBorderColor,color:_e.addonColor}}}),oe=K=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${K.componentCls}-group`]:{"&-addon":{background:K.addonBg,border:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},xe(K,{status:"error",addonBorderColor:K.colorError,addonColor:K.colorErrorText})),xe(K,{status:"warning",addonBorderColor:K.colorWarning,addonColor:K.colorWarningText})),{[`&${K.componentCls}-group-wrapper-disabled`]:{[`${K.componentCls}-group-addon`]:Object.assign({},he(K))}})});W.genOutlinedGroupStyle=oe;const Ve=(K,_e)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${K.componentCls}-disabled, &[disabled]`]:{color:K.colorTextDisabled}},_e)});W.genBorderlessStyle=Ve;const re=(K,_e)=>({background:_e.bg,borderWidth:K.lineWidth,borderStyle:K.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:_e==null?void 0:_e.inputColor},"&:hover":{background:_e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:_e.activeBorderColor,backgroundColor:K.activeBg}}),me=(K,_e)=>({[`&${K.componentCls}-status-${_e.status}:not(${K.componentCls}-disabled)`]:Object.assign(Object.assign({},re(K,_e)),{[`${K.componentCls}-prefix, ${K.componentCls}-suffix`]:{color:_e.affixColor}})}),Re=(K,_e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},re(K,{bg:K.colorFillTertiary,hoverBg:K.colorFillSecondary,activeBorderColor:K.colorPrimary})),{[`&${K.componentCls}-disabled, &[disabled]`]:Object.assign({},he(K))}),me(K,{status:"error",bg:K.colorErrorBg,hoverBg:K.colorErrorBgHover,activeBorderColor:K.colorError,inputColor:K.colorErrorText,affixColor:K.colorError})),me(K,{status:"warning",bg:K.colorWarningBg,hoverBg:K.colorWarningBgHover,activeBorderColor:K.colorWarning,inputColor:K.colorWarningText,affixColor:K.colorWarning})),_e)});W.genFilledStyle=Re;const Y=(K,_e)=>({[`&${K.componentCls}-group-wrapper-status-${_e.status}`]:{[`${K.componentCls}-group-addon`]:{background:_e.addonBg,color:_e.addonColor}}}),le=K=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${K.componentCls}-group`]:{"&-addon":{background:K.colorFillTertiary},[`${K.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorSplit}`}}}},Y(K,{status:"error",addonBg:K.colorErrorBg,addonColor:K.colorErrorText})),Y(K,{status:"warning",addonBg:K.colorWarningBg,addonColor:K.colorWarningText})),{[`&${K.componentCls}-group-wrapper-disabled`]:{[`${K.componentCls}-group`]:{"&-addon":{background:K.colorFillTertiary,color:K.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`,borderTop:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`,borderBottom:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`,borderTop:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`,borderBottom:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`}}}})});W.genFilledGroupStyle=le},36714:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.hasPrefixSuffix=D;function D(q){return!!(q.prefix||q.suffix||q.allowClear||q.showCount)}},44805:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var q=D(67294);const G=(0,q.createContext)(void 0);var E=W.default=G},24522:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.ANT_MARK=void 0,Object.defineProperty(W,"useLocale",{enumerable:!0,get:function(){return ce.default}});var E=G(D(67294)),he=D(13594),ne=D(10625),ue=q(D(44805)),ce=q(D(76647));const xe=W.ANT_MARK="internalMark",oe=re=>{const{locale:me={},children:Re,_ANT_MARK__:Y}=re;E.useEffect(()=>(0,ne.changeConfirmLocale)(me&&me.Modal),[me]);const le=E.useMemo(()=>Object.assign(Object.assign({},me),{exist:!0}),[me]);return E.createElement(ue.default.Provider,{value:le},Re)};var Ve=W.default=oe},76647:function(mt,W,D){"use strict";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(44805)),ne=q(D(18253));const ue=(xe,oe)=>{const Ve=E.useContext(he.default),re=E.useMemo(()=>{var Re;const Y=oe||ne.default[xe],le=(Re=Ve==null?void 0:Ve[xe])!==null&&Re!==void 0?Re:{};return Object.assign(Object.assign({},typeof Y=="function"?Y():Y),le||{})},[xe,oe,Ve]),me=E.useMemo(()=>{const Re=Ve==null?void 0:Ve.locale;return Ve!=null&&Ve.exist&&!Re?ne.default.locale:Re},[Ve]);return[re,me]};var ce=W.default=ue},10625:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.changeConfirmLocale=ue,W.getConfirmLocale=ce;var G=q(D(18253));let E=Object.assign({},G.default.Modal),he=[];const ne=()=>he.reduce((xe,oe)=>Object.assign(Object.assign({},xe),oe),G.default.Modal);function ue(xe){if(xe){const oe=Object.assign({},xe);return he.push(oe),E=ne(),()=>{he=he.filter(Ve=>Ve!==oe),E=ne()}}E=Object.assign({},G.default.Modal)}function ce(){return E}},46549:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.useCompactItemContext=W.default=W.SpaceCompactItemContext=W.NoCompactStyle=void 0;var E=G(D(67294)),he=q(D(93967)),ne=q(D(45598)),ue=D(31929),ce=q(D(65693)),xe=q(D(54277)),oe=function(K,_e){var et={};for(var Je in K)Object.prototype.hasOwnProperty.call(K,Je)&&_e.indexOf(Je)<0&&(et[Je]=K[Je]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ot=0,Je=Object.getOwnPropertySymbols(K);Ot<Je.length;Ot++)_e.indexOf(Je[Ot])<0&&Object.prototype.propertyIsEnumerable.call(K,Je[Ot])&&(et[Je[Ot]]=K[Je[Ot]]);return et};const Ve=W.SpaceCompactItemContext=E.createContext(null),re=(K,_e)=>{const et=E.useContext(Ve),Je=E.useMemo(()=>{if(!et)return"";const{compactDirection:Ot,isFirstItem:dt,isLastItem:bt}=et,Me=Ot==="vertical"?"-vertical-":"-";return(0,he.default)(`${K}-compact${Me}item`,{[`${K}-compact${Me}first-item`]:dt,[`${K}-compact${Me}last-item`]:bt,[`${K}-compact${Me}item-rtl`]:_e==="rtl"})},[K,_e,et]);return{compactSize:et==null?void 0:et.compactSize,compactDirection:et==null?void 0:et.compactDirection,compactItemClassnames:Je}};W.useCompactItemContext=re;const me=K=>{let{children:_e}=K;return E.createElement(Ve.Provider,{value:null},_e)};W.NoCompactStyle=me;const Re=K=>{var{children:_e}=K,et=oe(K,["children"]);return E.createElement(Ve.Provider,{value:et},_e)},Y=K=>{const{getPrefixCls:_e,direction:et}=E.useContext(ue.ConfigContext),{size:Je,direction:Ot,block:dt,prefixCls:bt,className:Me,rootClassName:we,children:je}=K,Ze=oe(K,["size","direction","block","prefixCls","className","rootClassName","children"]),ut=(0,ce.default)(Pt=>Je!=null?Je:Pt),Qt=_e("space-compact",bt),[De,St]=(0,xe.default)(Qt),Oe=(0,he.default)(Qt,St,{[`${Qt}-rtl`]:et==="rtl",[`${Qt}-block`]:dt,[`${Qt}-vertical`]:Ot==="vertical"},Me,we),it=E.useContext(Ve),Ke=(0,ne.default)(je),Xe=E.useMemo(()=>Ke.map((Pt,xt)=>{const Ie=Pt&&Pt.key||`${Qt}-item-${xt}`;return E.createElement(Re,{key:Ie,compactSize:ut,compactDirection:Ot,isFirstItem:xt===0&&(!it||(it==null?void 0:it.isFirstItem)),isLastItem:xt===Ke.length-1&&(!it||(it==null?void 0:it.isLastItem))},Pt)}),[Je,Ke,it]);return Ke.length===0?null:De(E.createElement("div",Object.assign({className:Oe},Ze),Xe))};var le=W.default=Y},35969:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=G=>{const{componentCls:E}=G;return{[E]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var q=W.default=D},54277:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.prepareComponentToken=W.default=void 0;var G=D(3184),E=q(D(35969));const he=xe=>{const{componentCls:oe,antCls:Ve}=xe;return{[oe]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${oe}-item:empty`]:{display:"none"},[`${oe}-item > ${Ve}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},ne=xe=>{const{componentCls:oe}=xe;return{[oe]:{"&-gap-row-small":{rowGap:xe.spaceGapSmallSize},"&-gap-row-middle":{rowGap:xe.spaceGapMiddleSize},"&-gap-row-large":{rowGap:xe.spaceGapLargeSize},"&-gap-col-small":{columnGap:xe.spaceGapSmallSize},"&-gap-col-middle":{columnGap:xe.spaceGapMiddleSize},"&-gap-col-large":{columnGap:xe.spaceGapLargeSize}}}},ue=()=>({});W.prepareComponentToken=ue;var ce=W.default=(0,G.genStyleHooks)("Space",xe=>{const oe=(0,G.mergeToken)(xe,{spaceGapSmallSize:xe.paddingXS,spaceGapMiddleSize:xe.padding,spaceGapLargeSize:xe.paddingLG});return[he(oe),ne(oe),(0,E.default)(oe)]},()=>({}),{resetStyle:!1})},78793:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genCompactItemStyle=G;function D(E,he,ne){const{focusElCls:ue,focus:ce,borderElCls:xe}=ne,oe=xe?"> *":"",Ve=["hover",ce?"focus":null,"active"].filter(Boolean).map(re=>`&:${re} ${oe}`).join(",");return{[`&-item:not(${he}-last-item)`]:{marginInlineEnd:E.calc(E.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[Ve]:{zIndex:2}},ue?{[`&${ue}`]:{zIndex:2}}:{}),{[`&[disabled] ${oe}`]:{zIndex:0}})}}function q(E,he,ne){const{borderElCls:ue}=ne,ce=ue?`> ${ue}`:"";return{[`&-item:not(${he}-first-item):not(${he}-last-item) ${ce}`]:{borderRadius:0},[`&-item:not(${he}-last-item)${he}-first-item`]:{[`& ${ce}, &${E}-sm ${ce}, &${E}-lg ${ce}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${he}-first-item)${he}-last-item`]:{[`& ${ce}, &${E}-sm ${ce}, &${E}-lg ${ce}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function G(E){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:ne}=E,ue=`${ne}-compact`;return{[ue]:Object.assign(Object.assign({},D(E,ue,he)),q(ne,ue,he))}}},98078:function(mt,W,D){"use strict";"use client";Object.defineProperty(W,"__esModule",{value:!0}),W.genLinkStyle=W.genFocusStyle=W.genFocusOutline=W.genCommonStyle=W.clearFix=void 0,Object.defineProperty(W,"operationUnit",{enumerable:!0,get:function(){return G.operationUnit}}),W.textEllipsis=W.resetIcon=W.resetComponent=void 0;var q=D(6731),G=D(22548);const E=W.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},he=function(re){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:re.colorText,fontSize:re.fontSize,lineHeight:re.lineHeight,listStyle:"none",fontFamily:me?"inherit":re.fontFamily}};W.resetComponent=he;const ne=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});W.resetIcon=ne;const ue=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});W.clearFix=ue;const ce=re=>({a:{color:re.colorLink,textDecoration:re.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${re.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:re.colorLinkHover},"&:active":{color:re.colorLinkActive},"&:active,\n  &:hover":{textDecoration:re.linkHoverDecoration,outline:0},"&:focus":{textDecoration:re.linkFocusDecoration,outline:0},"&[disabled]":{color:re.colorTextDisabled,cursor:"not-allowed"}}});W.genLinkStyle=ce;const xe=(re,me,Re,Y)=>{const le=`[class^="${me}"], [class*=" ${me}"]`,K=Re?`.${Re}`:le,_e={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let et={};return Y!==!1&&(et={fontFamily:re.fontFamily,fontSize:re.fontSize}),{[K]:Object.assign(Object.assign(Object.assign({},et),_e),{[le]:_e})}};W.genCommonStyle=xe;const oe=re=>({outline:`${(0,q.unit)(re.lineWidthFocus)} solid ${re.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});W.genFocusOutline=oe;const Ve=re=>({"&:focus-visible":Object.assign({},oe(re))});W.genFocusStyle=Ve},57253:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=G=>({[G.componentCls]:{[`${G.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${G.motionDurationMid} ${G.motionEaseInOut},
        opacity ${G.motionDurationMid} ${G.motionEaseInOut} !important`}},[`${G.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${G.motionDurationMid} ${G.motionEaseInOut},
        opacity ${G.motionDurationMid} ${G.motionEaseInOut} !important`}}});var q=W.default=D},84460:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.initFadeMotion=W.fadeOut=W.fadeIn=void 0;var q=D(6731),G=D(94631);const E=W.fadeIn=new q.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),he=W.fadeOut=new q.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),ne=function(ue){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:xe}=ue,oe=`${xe}-fade`,Ve=ce?"&":"";return[(0,G.initMotion)(oe,E,he,ue.motionDurationMid,ce),{[`
        ${Ve}${oe}-enter,
        ${Ve}${oe}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${Ve}${oe}-leave`]:{animationTimingFunction:"linear"}}]};W.initFadeMotion=ne},42836:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"fadeIn",{enumerable:!0,get:function(){return E.fadeIn}}),Object.defineProperty(W,"fadeOut",{enumerable:!0,get:function(){return E.fadeOut}}),Object.defineProperty(W,"genCollapseMotion",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(W,"initFadeMotion",{enumerable:!0,get:function(){return E.initFadeMotion}}),Object.defineProperty(W,"initMoveMotion",{enumerable:!0,get:function(){return he.initMoveMotion}}),Object.defineProperty(W,"initSlideMotion",{enumerable:!0,get:function(){return ne.initSlideMotion}}),Object.defineProperty(W,"initZoomMotion",{enumerable:!0,get:function(){return ue.initZoomMotion}}),Object.defineProperty(W,"moveDownIn",{enumerable:!0,get:function(){return he.moveDownIn}}),Object.defineProperty(W,"moveDownOut",{enumerable:!0,get:function(){return he.moveDownOut}}),Object.defineProperty(W,"moveLeftIn",{enumerable:!0,get:function(){return he.moveLeftIn}}),Object.defineProperty(W,"moveLeftOut",{enumerable:!0,get:function(){return he.moveLeftOut}}),Object.defineProperty(W,"moveRightIn",{enumerable:!0,get:function(){return he.moveRightIn}}),Object.defineProperty(W,"moveRightOut",{enumerable:!0,get:function(){return he.moveRightOut}}),Object.defineProperty(W,"moveUpIn",{enumerable:!0,get:function(){return he.moveUpIn}}),Object.defineProperty(W,"moveUpOut",{enumerable:!0,get:function(){return he.moveUpOut}}),Object.defineProperty(W,"slideDownIn",{enumerable:!0,get:function(){return ne.slideDownIn}}),Object.defineProperty(W,"slideDownOut",{enumerable:!0,get:function(){return ne.slideDownOut}}),Object.defineProperty(W,"slideLeftIn",{enumerable:!0,get:function(){return ne.slideLeftIn}}),Object.defineProperty(W,"slideLeftOut",{enumerable:!0,get:function(){return ne.slideLeftOut}}),Object.defineProperty(W,"slideRightIn",{enumerable:!0,get:function(){return ne.slideRightIn}}),Object.defineProperty(W,"slideRightOut",{enumerable:!0,get:function(){return ne.slideRightOut}}),Object.defineProperty(W,"slideUpIn",{enumerable:!0,get:function(){return ne.slideUpIn}}),Object.defineProperty(W,"slideUpOut",{enumerable:!0,get:function(){return ne.slideUpOut}}),Object.defineProperty(W,"zoomBigIn",{enumerable:!0,get:function(){return ue.zoomBigIn}}),Object.defineProperty(W,"zoomBigOut",{enumerable:!0,get:function(){return ue.zoomBigOut}}),Object.defineProperty(W,"zoomDownIn",{enumerable:!0,get:function(){return ue.zoomDownIn}}),Object.defineProperty(W,"zoomDownOut",{enumerable:!0,get:function(){return ue.zoomDownOut}}),Object.defineProperty(W,"zoomIn",{enumerable:!0,get:function(){return ue.zoomIn}}),Object.defineProperty(W,"zoomLeftIn",{enumerable:!0,get:function(){return ue.zoomLeftIn}}),Object.defineProperty(W,"zoomLeftOut",{enumerable:!0,get:function(){return ue.zoomLeftOut}}),Object.defineProperty(W,"zoomOut",{enumerable:!0,get:function(){return ue.zoomOut}}),Object.defineProperty(W,"zoomRightIn",{enumerable:!0,get:function(){return ue.zoomRightIn}}),Object.defineProperty(W,"zoomRightOut",{enumerable:!0,get:function(){return ue.zoomRightOut}}),Object.defineProperty(W,"zoomUpIn",{enumerable:!0,get:function(){return ue.zoomUpIn}}),Object.defineProperty(W,"zoomUpOut",{enumerable:!0,get:function(){return ue.zoomUpOut}});var G=q(D(57253)),E=D(84460),he=D(17060),ne=D(17581),ue=D(99269)},94631:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.initMotion=void 0;const D=E=>({animationDuration:E,animationFillMode:"both"}),q=E=>({animationDuration:E,animationFillMode:"both"}),G=function(E,he,ne,ue){const xe=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${xe}${E}-enter,
      ${xe}${E}-appear
    `]:Object.assign(Object.assign({},D(ue)),{animationPlayState:"paused"}),[`${xe}${E}-leave`]:Object.assign(Object.assign({},q(ue)),{animationPlayState:"paused"}),[`
      ${xe}${E}-enter${E}-enter-active,
      ${xe}${E}-appear${E}-appear-active
    `]:{animationName:he,animationPlayState:"running"},[`${xe}${E}-leave${E}-leave-active`]:{animationName:ne,animationPlayState:"running",pointerEvents:"none"}}};W.initMotion=G},17060:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.moveUpOut=W.moveUpIn=W.moveRightOut=W.moveRightIn=W.moveLeftOut=W.moveLeftIn=W.moveDownOut=W.moveDownIn=W.initMoveMotion=void 0;var q=D(6731),G=D(94631);const E=W.moveDownIn=new q.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),he=W.moveDownOut=new q.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),ne=W.moveLeftIn=new q.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ue=W.moveLeftOut=new q.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),ce=W.moveRightIn=new q.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),xe=W.moveRightOut=new q.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),oe=W.moveUpIn=new q.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Ve=W.moveUpOut=new q.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),re={"move-up":{inKeyframes:oe,outKeyframes:Ve},"move-down":{inKeyframes:E,outKeyframes:he},"move-left":{inKeyframes:ne,outKeyframes:ue},"move-right":{inKeyframes:ce,outKeyframes:xe}},me=(Re,Y)=>{const{antCls:le}=Re,K=`${le}-${Y}`,{inKeyframes:_e,outKeyframes:et}=re[Y];return[(0,G.initMotion)(K,_e,et,Re.motionDurationMid),{[`
        ${K}-enter,
        ${K}-appear
      `]:{opacity:0,animationTimingFunction:Re.motionEaseOutCirc},[`${K}-leave`]:{animationTimingFunction:Re.motionEaseInOutCirc}}]};W.initMoveMotion=me},17581:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.slideUpOut=W.slideUpIn=W.slideRightOut=W.slideRightIn=W.slideLeftOut=W.slideLeftIn=W.slideDownOut=W.slideDownIn=W.initSlideMotion=void 0;var q=D(6731),G=D(94631);const E=W.slideUpIn=new q.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),he=W.slideUpOut=new q.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),ne=W.slideDownIn=new q.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),ue=W.slideDownOut=new q.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),ce=W.slideLeftIn=new q.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),xe=W.slideLeftOut=new q.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),oe=W.slideRightIn=new q.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),Ve=W.slideRightOut=new q.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),re={"slide-up":{inKeyframes:E,outKeyframes:he},"slide-down":{inKeyframes:ne,outKeyframes:ue},"slide-left":{inKeyframes:ce,outKeyframes:xe},"slide-right":{inKeyframes:oe,outKeyframes:Ve}},me=(Re,Y)=>{const{antCls:le}=Re,K=`${le}-${Y}`,{inKeyframes:_e,outKeyframes:et}=re[Y];return[(0,G.initMotion)(K,_e,et,Re.motionDurationMid),{[`
      ${K}-enter,
      ${K}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:Re.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${K}-leave`]:{animationTimingFunction:Re.motionEaseInQuint}}]};W.initSlideMotion=me},99269:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.zoomUpOut=W.zoomUpIn=W.zoomRightOut=W.zoomRightIn=W.zoomOut=W.zoomLeftOut=W.zoomLeftIn=W.zoomIn=W.zoomDownOut=W.zoomDownIn=W.zoomBigOut=W.zoomBigIn=W.initZoomMotion=void 0;var q=D(6731),G=D(94631);const E=W.zoomIn=new q.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),he=W.zoomOut=new q.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),ne=W.zoomBigIn=new q.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ue=W.zoomBigOut=new q.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),ce=W.zoomUpIn=new q.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),xe=W.zoomUpOut=new q.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),oe=W.zoomLeftIn=new q.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),Ve=W.zoomLeftOut=new q.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),re=W.zoomRightIn=new q.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),me=W.zoomRightOut=new q.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Re=W.zoomDownIn=new q.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),Y=W.zoomDownOut=new q.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),le={zoom:{inKeyframes:E,outKeyframes:he},"zoom-big":{inKeyframes:ne,outKeyframes:ue},"zoom-big-fast":{inKeyframes:ne,outKeyframes:ue},"zoom-left":{inKeyframes:oe,outKeyframes:Ve},"zoom-right":{inKeyframes:re,outKeyframes:me},"zoom-up":{inKeyframes:ce,outKeyframes:xe},"zoom-down":{inKeyframes:Re,outKeyframes:Y}},K=(_e,et)=>{const{antCls:Je}=_e,Ot=`${Je}-${et}`,{inKeyframes:dt,outKeyframes:bt}=le[et];return[(0,G.initMotion)(Ot,dt,bt,et==="zoom-big-fast"?_e.motionDurationFast:_e.motionDurationMid),{[`
        ${Ot}-enter,
        ${Ot}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:_e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${Ot}-leave`]:{animationTimingFunction:_e.motionEaseInOutCirc}}]};W.initZoomMotion=K},22548:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.operationUnit=void 0;const D=q=>({color:q.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${q.motionDurationSlow}`,"&:focus, &:hover":{color:q.colorLinkHover},"&:active":{color:q.colorLinkActive}});W.operationUnit=D},9064:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.MAX_VERTICAL_CONTENT_RADIUS=void 0,W.default=ne,W.getArrowOffsetToken=E;var q=D(51337);const G=W.MAX_VERTICAL_CONTENT_RADIUS=8;function E(ue){const{contentRadius:ce,limitVerticalRadius:xe}=ue,oe=ce>12?ce+2:12;return{arrowOffsetHorizontal:oe,arrowOffsetVertical:xe?G:oe}}function he(ue,ce){return ue?ce:{}}function ne(ue,ce,xe){const{componentCls:oe,boxShadowPopoverArrow:Ve,arrowOffsetVertical:re,arrowOffsetHorizontal:me}=ue,{arrowDistance:Re=0,arrowPlacement:Y={left:!0,right:!0,top:!0,bottom:!0}}=xe||{};return{[oe]:Object.assign(Object.assign(Object.assign(Object.assign({[`${oe}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,q.genRoundedArrow)(ue,ce,Ve)),{"&:before":{background:ce}})]},he(!!Y.top,{[[`&-placement-top > ${oe}-arrow`,`&-placement-topLeft > ${oe}-arrow`,`&-placement-topRight > ${oe}-arrow`].join(",")]:{bottom:Re,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${oe}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${oe}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-topRight > ${oe}-arrow`]:{right:{_skip_check_:!0,value:me}}})),he(!!Y.bottom,{[[`&-placement-bottom > ${oe}-arrow`,`&-placement-bottomLeft > ${oe}-arrow`,`&-placement-bottomRight > ${oe}-arrow`].join(",")]:{top:Re,transform:"translateY(-100%)"},[`&-placement-bottom > ${oe}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${oe}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-bottomRight > ${oe}-arrow`]:{right:{_skip_check_:!0,value:me}}})),he(!!Y.left,{[[`&-placement-left > ${oe}-arrow`,`&-placement-leftTop > ${oe}-arrow`,`&-placement-leftBottom > ${oe}-arrow`].join(",")]:{right:{_skip_check_:!0,value:Re},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${oe}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${oe}-arrow`]:{top:re},[`&-placement-leftBottom > ${oe}-arrow`]:{bottom:re}})),he(!!Y.right,{[[`&-placement-right > ${oe}-arrow`,`&-placement-rightTop > ${oe}-arrow`,`&-placement-rightBottom > ${oe}-arrow`].join(",")]:{left:{_skip_check_:!0,value:Re},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${oe}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${oe}-arrow`]:{top:re},[`&-placement-rightBottom > ${oe}-arrow`]:{bottom:re}}))}}},51337:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genRoundedArrow=void 0,W.getArrowToken=G;var q=D(6731);function G(he){const{sizePopupArrow:ne,borderRadiusXS:ue,borderRadiusOuter:ce}=he,xe=ne/2,oe=0,Ve=xe,re=ce*1/Math.sqrt(2),me=xe-ce*(1-1/Math.sqrt(2)),Re=xe-ue*(1/Math.sqrt(2)),Y=ce*(Math.sqrt(2)-1)+ue*(1/Math.sqrt(2)),le=2*xe-Re,K=Y,_e=2*xe-re,et=me,Je=2*xe-oe,Ot=Ve,dt=xe*Math.sqrt(2)+ce*(Math.sqrt(2)-2),bt=ce*(Math.sqrt(2)-1),Me=`polygon(${bt}px 100%, 50% ${bt}px, ${2*xe-bt}px 100%, ${bt}px 100%)`,we=`path('M ${oe} ${Ve} A ${ce} ${ce} 0 0 0 ${re} ${me} L ${Re} ${Y} A ${ue} ${ue} 0 0 1 ${le} ${K} L ${_e} ${et} A ${ce} ${ce} 0 0 0 ${Je} ${Ot} Z')`;return{arrowShadowWidth:dt,arrowPath:we,arrowPolygon:Me}}const E=(he,ne,ue)=>{const{sizePopupArrow:ce,arrowPolygon:xe,arrowPath:oe,arrowShadowWidth:Ve,borderRadiusXS:re,calc:me}=he;return{pointerEvents:"none",width:ce,height:ce,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:ce,height:me(ce).div(2).equal(),background:ne,clipPath:{_multi_value_:!0,value:[xe,oe]},content:'""'},"&::after":{content:'""',position:"absolute",width:Ve,height:Ve,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,q.unit)(re)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:ue,zIndex:0,background:"transparent"}}};W.genRoundedArrow=E},89329:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.defaultTheme=W.defaultConfig=W.DesignTokenContext=void 0;var G=q(D(67294)),E=D(6731),he=q(D(9924)),ne=q(D(98411));const ue=W.defaultTheme=(0,E.createTheme)(he.default),ce=W.defaultConfig={token:ne.default,override:{override:ne.default},hashed:!0},xe=W.DesignTokenContext=G.default.createContext(ce)},36496:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"PresetColors",{enumerable:!0,get:function(){return q.PresetColors}});var q=D(81342)},81342:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.PresetColors=void 0;const D=W.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(mt,W,D){"use strict";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"DesignTokenContext",{enumerable:!0,get:function(){return me.DesignTokenContext}}),Object.defineProperty(W,"PresetColors",{enumerable:!0,get:function(){return he.PresetColors}}),Object.defineProperty(W,"calc",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(W,"defaultConfig",{enumerable:!0,get:function(){return me.defaultConfig}}),Object.defineProperty(W,"genComponentStyleHook",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(W,"genPresetColor",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(W,"genStyleHooks",{enumerable:!0,get:function(){return xe.genStyleHooks}}),Object.defineProperty(W,"genSubStyleComponent",{enumerable:!0,get:function(){return xe.genSubStyleComponent}}),Object.defineProperty(W,"getLineHeight",{enumerable:!0,get:function(){return ne.getLineHeight}}),Object.defineProperty(W,"mergeToken",{enumerable:!0,get:function(){return Ve.merge}}),Object.defineProperty(W,"statisticToken",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(W,"useResetIconStyle",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(W,"useStyleRegister",{enumerable:!0,get:function(){return E.useStyleRegister}}),Object.defineProperty(W,"useToken",{enumerable:!0,get:function(){return ue.default}});var E=D(6731),he=D(36496),ne=D(62231),ue=G(D(41401)),ce=G(D(22996)),xe=q(D(3737)),oe=G(D(36219)),Ve=q(D(99636)),re=G(D(54894)),me=D(89329)},26162:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getSolidColor=W.getAlphaColor=void 0;var q=D(131);const G=(he,ne)=>new q.TinyColor(he).setAlpha(ne).toRgbString();W.getAlphaColor=G;const E=(he,ne)=>new q.TinyColor(he).darken(ne).toHexString();W.getSolidColor=E},80373:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.generateNeutralColorPalettes=W.generateColorPalettes=void 0;var q=D(78589),G=D(26162);const E=ne=>{const ue=(0,q.generate)(ne);return{1:ue[0],2:ue[1],3:ue[2],4:ue[3],5:ue[4],6:ue[5],7:ue[6],8:ue[4],9:ue[5],10:ue[6]}};W.generateColorPalettes=E;const he=(ne,ue)=>{const ce=ne||"#fff",xe=ue||"#000";return{colorBgBase:ce,colorTextBase:xe,colorText:(0,G.getAlphaColor)(xe,.88),colorTextSecondary:(0,G.getAlphaColor)(xe,.65),colorTextTertiary:(0,G.getAlphaColor)(xe,.45),colorTextQuaternary:(0,G.getAlphaColor)(xe,.25),colorFill:(0,G.getAlphaColor)(xe,.15),colorFillSecondary:(0,G.getAlphaColor)(xe,.06),colorFillTertiary:(0,G.getAlphaColor)(xe,.04),colorFillQuaternary:(0,G.getAlphaColor)(xe,.02),colorBgLayout:(0,G.getSolidColor)(ce,4),colorBgContainer:(0,G.getSolidColor)(ce,0),colorBgElevated:(0,G.getSolidColor)(ce,0),colorBgSpotlight:(0,G.getAlphaColor)(xe,.85),colorBgBlur:"transparent",colorBorder:(0,G.getSolidColor)(ce,15),colorBorderSecondary:(0,G.getSolidColor)(ce,6)}};W.generateNeutralColorPalettes=he},9924:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=Ve;var G=D(78589),E=D(98411),he=q(D(10805)),ne=q(D(81594)),ue=q(D(54730)),ce=q(D(69853)),xe=q(D(19216)),oe=D(80373);function Ve(re){const me=Object.keys(E.defaultPresetColors).map(Re=>{const Y=(0,G.generate)(re[Re]);return new Array(10).fill(1).reduce((le,K,_e)=>(le[`${Re}-${_e+1}`]=Y[_e],le[`${Re}${_e+1}`]=Y[_e],le),{})}).reduce((Re,Y)=>(Re=Object.assign(Object.assign({},Re),Y),Re),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},re),me),(0,he.default)(re,{generateColorPalettes:oe.generateColorPalettes,generateNeutralColorPalettes:oe.generateNeutralColorPalettes})),(0,ce.default)(re.fontSize)),(0,xe.default)(re)),(0,ue.default)(re)),(0,ne.default)(re))}},98411:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.defaultPresetColors=W.default=void 0;const D=W.defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},q=Object.assign(Object.assign({},D),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var G=W.default=q},10805:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=G;var q=D(131);function G(E,he){let{generateColorPalettes:ne,generateNeutralColorPalettes:ue}=he;const{colorSuccess:ce,colorWarning:xe,colorError:oe,colorInfo:Ve,colorPrimary:re,colorBgBase:me,colorTextBase:Re}=E,Y=ne(re),le=ne(ce),K=ne(xe),_e=ne(oe),et=ne(Ve),Je=ue(me,Re),Ot=E.colorLink||E.colorInfo,dt=ne(Ot);return Object.assign(Object.assign({},Je),{colorPrimaryBg:Y[1],colorPrimaryBgHover:Y[2],colorPrimaryBorder:Y[3],colorPrimaryBorderHover:Y[4],colorPrimaryHover:Y[5],colorPrimary:Y[6],colorPrimaryActive:Y[7],colorPrimaryTextHover:Y[8],colorPrimaryText:Y[9],colorPrimaryTextActive:Y[10],colorSuccessBg:le[1],colorSuccessBgHover:le[2],colorSuccessBorder:le[3],colorSuccessBorderHover:le[4],colorSuccessHover:le[4],colorSuccess:le[6],colorSuccessActive:le[7],colorSuccessTextHover:le[8],colorSuccessText:le[9],colorSuccessTextActive:le[10],colorErrorBg:_e[1],colorErrorBgHover:_e[2],colorErrorBgActive:_e[3],colorErrorBorder:_e[3],colorErrorBorderHover:_e[4],colorErrorHover:_e[5],colorError:_e[6],colorErrorActive:_e[7],colorErrorTextHover:_e[8],colorErrorText:_e[9],colorErrorTextActive:_e[10],colorWarningBg:K[1],colorWarningBgHover:K[2],colorWarningBorder:K[3],colorWarningBorderHover:K[4],colorWarningHover:K[4],colorWarning:K[6],colorWarningActive:K[7],colorWarningTextHover:K[8],colorWarningText:K[9],colorWarningTextActive:K[10],colorInfoBg:et[1],colorInfoBgHover:et[2],colorInfoBorder:et[3],colorInfoBorderHover:et[4],colorInfoHover:et[4],colorInfo:et[6],colorInfoActive:et[7],colorInfoTextHover:et[8],colorInfoText:et[9],colorInfoTextActive:et[10],colorLinkHover:dt[4],colorLink:dt[6],colorLinkActive:dt[7],colorBgMask:new q.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var G=q(D(78117));function E(he){const{motionUnit:ne,motionBase:ue,borderRadius:ce,lineWidth:xe}=he;return Object.assign({motionDurationFast:`${(ue+ne).toFixed(1)}s`,motionDurationMid:`${(ue+ne*2).toFixed(1)}s`,motionDurationSlow:`${(ue+ne*3).toFixed(1)}s`,lineWidthBold:xe+1},(0,G.default)(ce))}},54730:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=G=>{const{controlHeight:E}=G;return{controlHeightSM:E*.75,controlHeightXS:E*.5,controlHeightLG:E*1.25}};var q=W.default=D},69853:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(62231));const E=ne=>{const ue=(0,G.default)(ne),ce=ue.map(le=>le.size),xe=ue.map(le=>le.lineHeight),oe=ce[1],Ve=ce[0],re=ce[2],me=xe[1],Re=xe[0],Y=xe[2];return{fontSizeSM:Ve,fontSize:oe,fontSizeLG:re,fontSizeXL:ce[3],fontSizeHeading1:ce[6],fontSizeHeading2:ce[5],fontSizeHeading3:ce[4],fontSizeHeading4:ce[3],fontSizeHeading5:ce[2],lineHeight:me,lineHeightLG:Y,lineHeightSM:Re,fontHeight:Math.round(me*oe),fontHeightLG:Math.round(Y*re),fontHeightSM:Math.round(Re*Ve),lineHeightHeading1:xe[6],lineHeightHeading2:xe[5],lineHeightHeading3:xe[4],lineHeightHeading4:xe[3],lineHeightHeading5:xe[2]}};var he=W.default=E},62231:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=q,W.getLineHeight=D;function D(G){return(G+8)/G}function q(G){const E=new Array(10).fill(null).map((he,ne)=>{const ue=ne-1,ce=G*Math.pow(2.71828,ue/5),xe=ne>1?Math.floor(ce):Math.ceil(ce);return Math.floor(xe/2)*2});return E[1]=G,E.map(he=>({size:he,lineHeight:D(he)}))}},78117:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=G=>{let E=G,he=G,ne=G,ue=G;return G<6&&G>=5?E=G+1:G<16&&G>=6?E=G+2:G>=16&&(E=16),G<7&&G>=5?he=4:G<8&&G>=7?he=5:G<14&&G>=8?he=6:G<16&&G>=14?he=7:G>=16&&(he=8),G<6&&G>=2?ne=1:G>=6&&(ne=2),G>4&&G<8?ue=4:G>=8&&(ue=6),{borderRadius:G,borderRadiusXS:ne,borderRadiusSM:he,borderRadiusLG:E,borderRadiusOuter:ue}};var q=W.default=D},19216:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=D;function D(q){const{sizeUnit:G,sizeStep:E}=q;return{sizeXXL:G*(E+8),sizeXL:G*(E+4),sizeLG:G*(E+2),sizeMD:G*(E+1),sizeMS:G*E,size:G*E,sizeSM:G*(E-1),sizeXS:G*(E-2),sizeXXS:G*(E-3)}}},41401:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=Re,W.unitless=W.ignore=W.getComputedToken=void 0;var G=q(D(67294)),E=D(6731),he=q(D(87629)),ne=D(89329),ue=q(D(98411)),ce=q(D(27722)),xe=function(Y,le){var K={};for(var _e in Y)Object.prototype.hasOwnProperty.call(Y,_e)&&le.indexOf(_e)<0&&(K[_e]=Y[_e]);if(Y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,_e=Object.getOwnPropertySymbols(Y);et<_e.length;et++)le.indexOf(_e[et])<0&&Object.prototype.propertyIsEnumerable.call(Y,_e[et])&&(K[_e[et]]=Y[_e[et]]);return K};const oe=W.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},Ve=W.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},re={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},me=(Y,le,K)=>{const _e=K.getDerivativeToken(Y),{override:et}=le,Je=xe(le,["override"]);let Ot=Object.assign(Object.assign({},_e),{override:et});return Ot=(0,ce.default)(Ot),Je&&Object.entries(Je).forEach(dt=>{let[bt,Me]=dt;const{theme:we}=Me,je=xe(Me,["theme"]);let Ze=je;we&&(Ze=me(Object.assign(Object.assign({},Ot),je),{override:je},we)),Ot[bt]=Ze}),Ot};W.getComputedToken=me;function Re(){const{token:Y,hashed:le,theme:K,override:_e,cssVar:et}=G.default.useContext(ne.DesignTokenContext),Je=`${he.default}-${le||""}`,Ot=K||ne.defaultTheme,[dt,bt,Me]=(0,E.useCacheToken)(Ot,[ue.default,Y],{salt:Je,override:_e,getComputedToken:me,formatToken:ce.default,cssVar:et&&{prefix:et.prefix,key:et.key,unitless:oe,ignore:Ve,preserve:re}});return[Ot,Me,le?bt:"",dt,et]}},27722:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ue;var G=D(131),E=q(D(98411)),he=q(D(83609)),ne=function(ce,xe){var oe={};for(var Ve in ce)Object.prototype.hasOwnProperty.call(ce,Ve)&&xe.indexOf(Ve)<0&&(oe[Ve]=ce[Ve]);if(ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var re=0,Ve=Object.getOwnPropertySymbols(ce);re<Ve.length;re++)xe.indexOf(Ve[re])<0&&Object.prototype.propertyIsEnumerable.call(ce,Ve[re])&&(oe[Ve[re]]=ce[Ve[re]]);return oe};function ue(ce){const{override:xe}=ce,oe=ne(ce,["override"]),Ve=Object.assign({},xe);Object.keys(E.default).forEach(Je=>{delete Ve[Je]});const re=Object.assign(Object.assign({},oe),Ve),me=480,Re=576,Y=768,le=992,K=1200,_e=1600;if(re.motion===!1){const Je="0s";re.motionDurationFast=Je,re.motionDurationMid=Je,re.motionDurationSlow=Je}return Object.assign(Object.assign(Object.assign({},re),{colorFillContent:re.colorFillSecondary,colorFillContentHover:re.colorFill,colorFillAlter:re.colorFillQuaternary,colorBgContainerDisabled:re.colorFillTertiary,colorBorderBg:re.colorBgContainer,colorSplit:(0,he.default)(re.colorBorderSecondary,re.colorBgContainer),colorTextPlaceholder:re.colorTextQuaternary,colorTextDisabled:re.colorTextQuaternary,colorTextHeading:re.colorText,colorTextLabel:re.colorTextSecondary,colorTextDescription:re.colorTextTertiary,colorTextLightSolid:re.colorWhite,colorHighlight:re.colorError,colorBgTextHover:re.colorFillSecondary,colorBgTextActive:re.colorFill,colorIcon:re.colorTextTertiary,colorIconHover:re.colorText,colorErrorOutline:(0,he.default)(re.colorErrorBg,re.colorBgContainer),colorWarningOutline:(0,he.default)(re.colorWarningBg,re.colorBgContainer),fontSizeIcon:re.fontSizeSM,lineWidthFocus:re.lineWidth*4,lineWidth:re.lineWidth,controlOutlineWidth:re.lineWidth*2,controlInteractiveSize:re.controlHeight/2,controlItemBgHover:re.colorFillTertiary,controlItemBgActive:re.colorPrimaryBg,controlItemBgActiveHover:re.colorPrimaryBgHover,controlItemBgActiveDisabled:re.colorFill,controlTmpOutline:re.colorFillQuaternary,controlOutline:(0,he.default)(re.colorPrimaryBg,re.colorBgContainer),lineType:re.lineType,borderRadius:re.borderRadius,borderRadiusXS:re.borderRadiusXS,borderRadiusSM:re.borderRadiusSM,borderRadiusLG:re.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:re.sizeXXS,paddingXS:re.sizeXS,paddingSM:re.sizeSM,padding:re.size,paddingMD:re.sizeMD,paddingLG:re.sizeLG,paddingXL:re.sizeXL,paddingContentHorizontalLG:re.sizeLG,paddingContentVerticalLG:re.sizeMS,paddingContentHorizontal:re.sizeMS,paddingContentVertical:re.sizeSM,paddingContentHorizontalSM:re.size,paddingContentVerticalSM:re.sizeXS,marginXXS:re.sizeXXS,marginXS:re.sizeXS,marginSM:re.sizeSM,margin:re.size,marginMD:re.sizeMD,marginLG:re.sizeLG,marginXL:re.sizeXL,marginXXL:re.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:me,screenXSMin:me,screenXSMax:Re-1,screenSM:Re,screenSMMin:Re,screenSMMax:Y-1,screenMD:Y,screenMDMin:Y,screenMDMax:le-1,screenLG:le,screenLGMin:le,screenLGMax:K-1,screenXL:K,screenXLMin:K,screenXLMax:_e-1,screenXXL:_e,screenXXLMin:_e,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new G.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new G.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new G.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),Ve)}},24312:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(56690)),E=q(D(89728)),he=q(D(76976)),ne=q(D(61655)),ue=q(D(38194));const ce="CALC_UNIT",xe=new RegExp(ce,"g");function oe(re){return typeof re=="number"?`${re}${ce}`:re}let Ve=W.default=function(re){function me(Re,Y){var le;(0,G.default)(this,me),le=(0,he.default)(this,me),le.result="";const K=typeof Re;return le.unitlessCssVar=Y,Re instanceof me?le.result=`(${Re.result})`:K==="number"?le.result=oe(Re):K==="string"&&(le.result=Re),le}return(0,ne.default)(me,re),(0,E.default)(me,[{key:"add",value:function(Y){return Y instanceof me?this.result=`${this.result} + ${Y.getResult()}`:(typeof Y=="number"||typeof Y=="string")&&(this.result=`${this.result} + ${oe(Y)}`),this.lowPriority=!0,this}},{key:"sub",value:function(Y){return Y instanceof me?this.result=`${this.result} - ${Y.getResult()}`:(typeof Y=="number"||typeof Y=="string")&&(this.result=`${this.result} - ${oe(Y)}`),this.lowPriority=!0,this}},{key:"mul",value:function(Y){return this.lowPriority&&(this.result=`(${this.result})`),Y instanceof me?this.result=`${this.result} * ${Y.getResult(!0)}`:(typeof Y=="number"||typeof Y=="string")&&(this.result=`${this.result} * ${Y}`),this.lowPriority=!1,this}},{key:"div",value:function(Y){return this.lowPriority&&(this.result=`(${this.result})`),Y instanceof me?this.result=`${this.result} / ${Y.getResult(!0)}`:(typeof Y=="number"||typeof Y=="string")&&(this.result=`${this.result} / ${Y}`),this.lowPriority=!1,this}},{key:"getResult",value:function(Y){return this.lowPriority||Y?`(${this.result})`:this.result}},{key:"equal",value:function(Y){const{unit:le}=Y||{};let K=!0;return typeof le=="boolean"?K=le:Array.from(this.unitlessCssVar).some(_e=>this.result.includes(_e))&&(K=!1),this.result=this.result.replace(xe,K?"px":""),typeof this.lowPriority!="undefined"?`calc(${this.result})`:this.result}}])}(ue.default)},14774:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(56690)),E=q(D(89728)),he=q(D(76976)),ne=q(D(61655)),ue=q(D(38194));let ce=W.default=function(xe){function oe(Ve){var re;return(0,G.default)(this,oe),re=(0,he.default)(this,oe),re.result=0,Ve instanceof oe?re.result=Ve.result:typeof Ve=="number"&&(re.result=Ve),re}return(0,ne.default)(oe,xe),(0,E.default)(oe,[{key:"add",value:function(re){return re instanceof oe?this.result+=re.result:typeof re=="number"&&(this.result+=re),this}},{key:"sub",value:function(re){return re instanceof oe?this.result-=re.result:typeof re=="number"&&(this.result-=re),this}},{key:"mul",value:function(re){return re instanceof oe?this.result*=re.result:typeof re=="number"&&(this.result*=re),this}},{key:"div",value:function(re){return re instanceof oe?this.result/=re.result:typeof re=="number"&&(this.result/=re),this}},{key:"equal",value:function(){return this.result}}])}(ue.default)},38194:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(89728)),E=q(D(56690));let he=(0,G.default)(function ue(){(0,E.default)(this,ue)});var ne=W.default=he},22996:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(24312)),E=q(D(14774));const he=(ue,ce)=>{const xe=ue==="css"?G.default:E.default;return oe=>new xe(oe,ce)};var ne=W.default=he},3737:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=_e,W.genSubStyleComponent=W.genStyleHooks=void 0;var E=G(D(67294)),he=D(6731),ne=q(D(63101)),ue=D(56790),ce=D(7177),xe=D(98078),oe=G(D(41401)),Ve=q(D(22996)),re=q(D(1657)),me=G(D(99636)),Re=q(D(54894));const Y=(dt,bt,Me)=>{var we;return typeof Me=="function"?Me((0,me.merge)(bt,(we=bt[dt])!==null&&we!==void 0?we:{})):Me!=null?Me:{}},le=(dt,bt,Me,we)=>{const je=Object.assign({},bt[dt]);if(we!=null&&we.deprecatedTokens){const{deprecatedTokens:ut}=we;ut.forEach(Qt=>{let[De,St]=Qt;var Oe;(je!=null&&je[De]||je!=null&&je[St])&&((Oe=je[St])!==null&&Oe!==void 0||(je[St]=je==null?void 0:je[De]))})}const Ze=Object.assign(Object.assign({},Me),je);return Object.keys(Ze).forEach(ut=>{Ze[ut]===bt[ut]&&delete Ze[ut]}),Ze},K=(dt,bt)=>`${[bt,dt.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function _e(dt,bt,Me){let we=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const je=Array.isArray(dt)?dt:[dt,dt],[Ze]=je,ut=je.join("-");return function(Qt){let De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qt;const[St,Oe,it,Ke,Xe]=(0,oe.default)(),{getPrefixCls:Pt,iconPrefixCls:xt,csp:Ie}=(0,E.useContext)(ce.ConfigContext),Wt=Pt(),hn=Xe?"css":"js",Pn=(0,ne.default)(()=>{const ln=new Set;return Xe&&Object.keys(we.unitless||{}).forEach(Un=>{ln.add((0,he.token2CSSVar)(Un,Xe.prefix)),ln.add((0,he.token2CSSVar)(Un,K(Ze,Xe.prefix)))}),(0,Ve.default)(hn,ln)},[hn,Ze,Xe&&Xe.prefix]),{max:$n,min:nr}=(0,re.default)(hn),Ft={theme:St,token:Ke,hashId:it,nonce:()=>Ie==null?void 0:Ie.nonce,clientOnly:we.clientOnly,layer:{name:"antd"},order:we.order||-999};return(0,he.useStyleRegister)(Object.assign(Object.assign({},Ft),{clientOnly:!1,path:["Shared",Wt]}),()=>[{"&":(0,xe.genLinkStyle)(Ke)}]),(0,Re.default)(xt,Ie),[(0,he.useStyleRegister)(Object.assign(Object.assign({},Ft),{path:[ut,Qt,xt]}),()=>{if(we.injectStyle===!1)return[];const{token:ln,flush:Un}=(0,me.default)(Ke),on=Y(Ze,Oe,Me),zt=`.${Qt}`,kt=le(Ze,Oe,on,{deprecatedTokens:we.deprecatedTokens});Xe&&Object.keys(on).forEach(Vt=>{on[Vt]=`var(${(0,he.token2CSSVar)(Vt,K(Ze,Xe.prefix))})`});const ke=(0,me.merge)(ln,{componentCls:zt,prefixCls:Qt,iconCls:`.${xt}`,antCls:`.${Wt}`,calc:Pn,max:$n,min:nr},Xe?on:kt),nt=bt(ke,{hashId:it,prefixCls:Qt,rootPrefixCls:Wt,iconPrefixCls:xt});return Un(Ze,kt),[we.resetStyle===!1?null:(0,xe.genCommonStyle)(ke,Qt,De,we.resetFont),nt]}),it]}}const et=(dt,bt,Me,we)=>{const je=_e(dt,bt,Me,Object.assign({resetStyle:!1,order:-998},we));return ut=>{let{prefixCls:Qt,rootCls:De=Qt}=ut;return je(Qt,De),null}};W.genSubStyleComponent=et;const Je=(dt,bt,Me)=>{const{unitless:we,injectStyle:je=!0,prefixToken:Ze}=Me,ut=De=>{let{rootCls:St,cssVar:Oe}=De;const[,it]=(0,oe.default)();return(0,he.useCSSVarRegister)({path:[dt],prefix:Oe.prefix,key:Oe==null?void 0:Oe.key,unitless:we,ignore:oe.ignore,token:it,scope:St},()=>{const Ke=Y(dt,it,bt),Xe=le(dt,it,Ke,{deprecatedTokens:Me==null?void 0:Me.deprecatedTokens});return Object.keys(Ke).forEach(Pt=>{Xe[Ze(Pt)]=Xe[Pt],delete Xe[Pt]}),Xe}),null};return De=>{const[,,,,St]=(0,oe.default)();return[Oe=>je&&St?E.default.createElement(E.default.Fragment,null,E.default.createElement(ut,{rootCls:De,cssVar:St,component:dt}),Oe):Oe,St==null?void 0:St.key]}},Ot=(dt,bt,Me,we)=>{const je=Array.isArray(dt)?dt[0]:dt;function Ze(it){return`${je}${it.slice(0,1).toUpperCase()}${it.slice(1)}`}const ut=we&&we.unitless||{},Qt=Object.assign(Object.assign({},oe.unitless),{[Ze("zIndexPopup")]:!0});Object.keys(ut).forEach(it=>{Qt[Ze(it)]=ut[it]});const De=Object.assign(Object.assign({},we),{unitless:Qt,prefixToken:Ze}),St=_e(dt,bt,Me,De),Oe=Je(je,Me,De);return function(it){let Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it;const[,Xe]=St(it,Ke),[Pt,xt]=Oe(Ke);return[Pt,Xe,xt]}};W.genStyleHooks=Ot},36219:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=G;var q=D(36496);function G(E,he){return q.PresetColors.reduce((ne,ue)=>{const ce=E[`${ue}1`],xe=E[`${ue}3`],oe=E[`${ue}6`],Ve=E[`${ue}7`];return Object.assign(Object.assign({},ne),he(ue,{lightColor:ce,lightBorderColor:xe,darkColor:oe,textColor:Ve}))},{})}},83609:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var q=D(131);function G(ne){return ne>=0&&ne<=255}function E(ne,ue){const{r:ce,g:xe,b:oe,a:Ve}=new q.TinyColor(ne).toRgb();if(Ve<1)return ne;const{r:re,g:me,b:Re}=new q.TinyColor(ue).toRgb();for(let Y=.01;Y<=1;Y+=.01){const le=Math.round((ce-re*(1-Y))/Y),K=Math.round((xe-me*(1-Y))/Y),_e=Math.round((oe-Re*(1-Y))/Y);if(G(le)&&G(K)&&G(_e))return new q.TinyColor({r:le,g:K,b:_e,a:Math.round(Y*100)/100}).toRgbString()}return new q.TinyColor({r:ce,g:xe,b:oe,a:1}).toRgbString()}var he=W.default=E},1657:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=G;var q=D(6731);function G(E){return E==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var he=arguments.length,ne=new Array(he),ue=0;ue<he;ue++)ne[ue]=arguments[ue];return`max(${ne.map(ce=>(0,q.unit)(ce)).join(",")})`},min:function(){for(var he=arguments.length,ne=new Array(he),ue=0;ue<he;ue++)ne[ue]=arguments[ue];return`min(${ne.map(ce=>(0,q.unit)(ce)).join(",")})`}}}},99636:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=W._statistic_build_=void 0,W.merge=G,W.statistic=void 0;const D=typeof CSSINJS_STATISTIC!="undefined";let q=!0;function G(){for(var xe=arguments.length,oe=new Array(xe),Ve=0;Ve<xe;Ve++)oe[Ve]=arguments[Ve];if(!D)return Object.assign.apply(Object,[{}].concat(oe));q=!1;const re={};return oe.forEach(me=>{Object.keys(me).forEach(Y=>{Object.defineProperty(re,Y,{configurable:!0,enumerable:!0,get:()=>me[Y]})})}),q=!0,re}const E=W.statistic={},he=W._statistic_build_={};function ne(){}const ue=xe=>{let oe,Ve=xe,re=ne;return D&&typeof Proxy!="undefined"&&(oe=new Set,Ve=new Proxy(xe,{get(me,Re){return q&&oe.add(Re),me[Re]}}),re=(me,Re)=>{var Y;E[me]={global:Array.from(oe),component:Object.assign(Object.assign({},(Y=E[me])===null||Y===void 0?void 0:Y.component),Re)}}),{token:Ve,keys:oe,flush:re}};var ce=W.default=ue},54894:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=D(6731),E=D(98078),he=q(D(41401));const ne=(ce,xe)=>{const[oe,Ve]=(0,he.default)();return(0,G.useStyleRegister)({theme:oe,token:Ve,hashId:"",path:["ant-design-icons",ce],nonce:()=>xe==null?void 0:xe.nonce,layer:{name:"antd"}},()=>[{[`.${ce}`]:Object.assign(Object.assign({},(0,E.resetIcon)()),{[`.${ce} .${ce}-icon`]:{display:"block"}})}])};var ue=W.default=ne},92125:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(93967)),ne=D(92419),ue=D(31929),ce=q(D(15086)),xe=D(48125);const oe=re=>{const{prefixCls:me,className:Re,placement:Y="top",title:le,color:K,overlayInnerStyle:_e}=re,{getPrefixCls:et}=E.useContext(ue.ConfigContext),Je=et("tooltip",me),[Ot,dt,bt]=(0,ce.default)(Je),Me=(0,xe.parseColor)(Je,K),we=Me.arrowStyle,je=Object.assign(Object.assign({},_e),Me.overlayStyle),Ze=(0,he.default)(dt,bt,Je,`${Je}-pure`,`${Je}-placement-${Y}`,Re,Me.className);return Ot(E.createElement("div",{className:Ze,style:we},E.createElement("div",{className:`${Je}-arrow`}),E.createElement(ne.Popup,Object.assign({},re,{className:dt,prefixCls:Je,overlayInnerStyle:je}),le)))};var Ve=W.default=oe},94055:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(93967)),ne=q(D(92419)),ue=q(D(60869)),ce=D(56333),xe=D(53683),oe=q(D(74132)),Ve=D(47419),re=D(13594),me=q(D(96877)),Re=D(31929),Y=D(46549),le=D(3184),K=q(D(92125)),_e=q(D(15086)),et=D(48125),Je=function(Me,we){var je={};for(var Ze in Me)Object.prototype.hasOwnProperty.call(Me,Ze)&&we.indexOf(Ze)<0&&(je[Ze]=Me[Ze]);if(Me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,Ze=Object.getOwnPropertySymbols(Me);ut<Ze.length;ut++)we.indexOf(Ze[ut])<0&&Object.prototype.propertyIsEnumerable.call(Me,Ze[ut])&&(je[Ze[ut]]=Me[Ze[ut]]);return je};const dt=E.forwardRef((Me,we)=>{var je,Ze;const{prefixCls:ut,openClassName:Qt,getTooltipContainer:De,overlayClassName:St,color:Oe,overlayInnerStyle:it,children:Ke,afterOpenChange:Xe,afterVisibleChange:Pt,destroyTooltipOnHide:xt,arrow:Ie=!0,title:Wt,overlay:hn,builtinPlacements:Pn,arrowPointAtCenter:$n=!1,autoAdjustOverflow:nr=!0}=Me,Ft=!!Ie,[,Jt]=(0,le.useToken)(),{getPopupContainer:ln,getPrefixCls:Un,direction:on}=E.useContext(Re.ConfigContext),zt=(0,re.devUseWarning)("Tooltip"),kt=E.useRef(null),ke=()=>{var ot;(ot=kt.current)===null||ot===void 0||ot.forceAlign()};E.useImperativeHandle(we,()=>{var ot;return{forceAlign:ke,forcePopupAlign:()=>{zt.deprecated(!1,"forcePopupAlign","forceAlign"),ke()},nativeElement:(ot=kt.current)===null||ot===void 0?void 0:ot.nativeElement}});const[nt,Vt]=(0,ue.default)(!1,{value:(je=Me.open)!==null&&je!==void 0?je:Me.visible,defaultValue:(Ze=Me.defaultOpen)!==null&&Ze!==void 0?Ze:Me.defaultVisible}),U=!Wt&&!hn&&Wt!==0,pe=ot=>{var wt,$t;Vt(U?!1:ot),U||((wt=Me.onOpenChange)===null||wt===void 0||wt.call(Me,ot),($t=Me.onVisibleChange)===null||$t===void 0||$t.call(Me,ot))},ct=E.useMemo(()=>{var ot,wt;let $t=$n;return typeof Ie=="object"&&($t=(wt=(ot=Ie.pointAtCenter)!==null&&ot!==void 0?ot:Ie.arrowPointAtCenter)!==null&&wt!==void 0?wt:$n),Pn||(0,oe.default)({arrowPointAtCenter:$t,autoAdjustOverflow:nr,arrowWidth:Ft?Jt.sizePopupArrow:0,borderRadius:Jt.borderRadius,offset:Jt.marginXXS,visibleFirst:!0})},[$n,Ie,Pn,Jt]),de=E.useMemo(()=>Wt===0?Wt:hn||Wt||"",[hn,Wt]),Yt=E.createElement(Y.NoCompactStyle,null,typeof de=="function"?de():de),{getPopupContainer:sn,placement:pn="top",mouseEnterDelay:Dn=.1,mouseLeaveDelay:Wn=.1,overlayStyle:Xn,rootClassName:dn}=Me,_t=Je(Me,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Rt=Un("tooltip",ut),wn=Un(),In=Me["data-popover-inject"];let Zn=nt;!("open"in Me)&&!("visible"in Me)&&U&&(Zn=!1);const vt=E.isValidElement(Ke)&&!(0,Ve.isFragment)(Ke)?Ke:E.createElement("span",null,Ke),Ee=vt.props,Fe=!Ee.className||typeof Ee.className=="string"?(0,he.default)(Ee.className,Qt||`${Rt}-open`):Ee.className,[st,It,Mt]=(0,_e.default)(Rt,!In),En=(0,et.parseColor)(Rt,Oe),Yn=En.arrowStyle,yr=Object.assign(Object.assign({},it),En.overlayStyle),qn=(0,he.default)(St,{[`${Rt}-rtl`]:on==="rtl"},En.className,dn,It,Mt),[Pe,Te]=(0,ce.useZIndex)("Tooltip",_t.zIndex),Ue=E.createElement(ne.default,Object.assign({},_t,{zIndex:Pe,showArrow:Ft,placement:pn,mouseEnterDelay:Dn,mouseLeaveDelay:Wn,prefixCls:Rt,overlayClassName:qn,overlayStyle:Object.assign(Object.assign({},Yn),Xn),getTooltipContainer:sn||De||ln,ref:kt,builtinPlacements:ct,overlay:Yt,visible:Zn,onVisibleChange:pe,afterVisibleChange:Xe!=null?Xe:Pt,overlayInnerStyle:yr,arrowContent:E.createElement("span",{className:`${Rt}-arrow-content`}),motion:{motionName:(0,xe.getTransitionName)(wn,"zoom-big-fast",Me.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!xt}),Zn?(0,Ve.cloneElement)(vt,{className:Fe}):vt);return st(E.createElement(me.default.Provider,{value:Te},Ue))});dt._InternalPanelDoNotUseOrYouWillBeFired=K.default;var bt=W.default=dt},15086:function(mt,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.prepareComponentToken=W.default=void 0;var G=D(6731),E=D(98078),he=D(42836),ne=q(D(9064)),ue=D(51337),ce=D(3184);const xe=re=>{const{componentCls:me,tooltipMaxWidth:Re,tooltipColor:Y,tooltipBg:le,tooltipBorderRadius:K,zIndexPopup:_e,controlHeight:et,boxShadowSecondary:Je,paddingSM:Ot,paddingXS:dt}=re;return[{[me]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,E.resetComponent)(re)),{position:"absolute",zIndex:_e,display:"block",width:"max-content",maxWidth:Re,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":le,[`${me}-inner`]:{minWidth:"1em",minHeight:et,padding:`${(0,G.unit)(re.calc(Ot).div(2).equal())} ${(0,G.unit)(dt)}`,color:Y,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:le,borderRadius:K,boxShadow:Je,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${me}-inner`]:{borderRadius:re.min(K,ne.MAX_VERTICAL_CONTENT_RADIUS)}},[`${me}-content`]:{position:"relative"}}),(0,ce.genPresetColor)(re,(bt,Me)=>{let{darkColor:we}=Me;return{[`&${me}-${bt}`]:{[`${me}-inner`]:{backgroundColor:we},[`${me}-arrow`]:{"--antd-arrow-background-color":we}}}})),{"&-rtl":{direction:"rtl"}})},(0,ne.default)(re,"var(--antd-arrow-background-color)"),{[`${me}-pure`]:{position:"relative",maxWidth:"none",margin:re.sizePopupArrow}}]},oe=re=>Object.assign(Object.assign({zIndexPopup:re.zIndexPopupBase+70},(0,ne.getArrowOffsetToken)({contentRadius:re.borderRadius,limitVerticalRadius:!0})),(0,ue.getArrowToken)((0,ce.mergeToken)(re,{borderRadiusOuter:Math.min(re.borderRadiusOuter,4)})));W.prepareComponentToken=oe;var Ve=W.default=function(me){let Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,ce.genStyleHooks)("Tooltip",le=>{const{borderRadius:K,colorTextLightSolid:_e,colorBgSpotlight:et}=le,Je=(0,ce.mergeToken)(le,{tooltipMaxWidth:250,tooltipColor:_e,tooltipBorderRadius:K,tooltipBg:et});return[xe(Je),(0,he.initZoomMotion)(le,"zoom-big-fast")]},oe,{resetStyle:!1,injectStyle:Re})(me)}},48125:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.parseColor=he;var G=q(D(93967)),E=D(45471);function he(ne,ue){const ce=(0,E.isPresetColor)(ue),xe=(0,G.default)({[`${ne}-${ue}`]:ue&&ce}),oe={},Ve={};return ue&&!ce&&(oe.background=ue,Ve["--antd-arrow-background-color"]=ue),{className:xe,overlayStyle:oe,arrowStyle:Ve}}},6847:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(83874)),ne=q(D(90091)),ue=q(D(4121)),ce=q(D(93967)),xe=q(D(60938)),oe=q(D(94055)),Ve=D(81410);const re=Re=>{const{prefixCls:Y,copied:le,locale:K,iconOnly:_e,tooltips:et,icon:Je,loading:Ot,tabIndex:dt,onCopy:bt}=Re,Me=(0,Ve.toList)(et),we=(0,Ve.toList)(Je),{copied:je,copy:Ze}=K!=null?K:{},ut=le?(0,Ve.getNode)(Me[1],je):(0,Ve.getNode)(Me[0],Ze),De=typeof ut=="string"?ut:le?je:Ze;return E.createElement(oe.default,{key:"copy",title:ut},E.createElement(xe.default,{className:(0,ce.default)(`${Y}-copy`,{[`${Y}-copy-success`]:le,[`${Y}-copy-icon-only`]:_e}),onClick:bt,"aria-label":De,tabIndex:dt},le?(0,Ve.getNode)(we[1],E.createElement(he.default,null),!0):(0,Ve.getNode)(we[0],Ot?E.createElement(ue.default,null):E.createElement(ne.default,null),!0)))};var me=W.default=re},12385:function(mt,W,D){"use strict";"use client";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=K;var E=G(D(861)),he=q(D(67294)),ne=G(D(45598)),ue=G(D(82546));const ce=he.forwardRef((_e,et)=>{let{style:Je,children:Ot}=_e;const dt=he.useRef(null);return he.useImperativeHandle(et,()=>({isExceed:()=>{const bt=dt.current;return bt.scrollHeight>bt.clientHeight},getHeight:()=>dt.current.clientHeight})),he.createElement("span",{"aria-hidden":!0,ref:dt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},Je)},Ot)});function xe(_e){const et=typeof _e;return et==="string"||et==="number"}function oe(_e){let et=0;return _e.forEach(Je=>{xe(Je)?et+=String(Je).length:et+=1}),et}function Ve(_e,et){let Je=0;const Ot=[];for(let dt=0;dt<_e.length;dt+=1){if(Je===et)return Ot;const bt=_e[dt],we=xe(bt)?String(bt).length:1,je=Je+we;if(je>et){const Ze=et-Je;return Ot.push(String(bt).slice(0,Ze)),Ot}Ot.push(bt),Je=je}return _e}const re=0,me=1,Re=2,Y=3,le={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function K(_e){const{enableMeasure:et,width:Je,text:Ot,children:dt,rows:bt,expanded:Me,miscDeps:we,onEllipsis:je}=_e,Ze=he.useMemo(()=>(0,ne.default)(Ot),[Ot]),ut=he.useMemo(()=>oe(Ze),[Ot]),Qt=he.useMemo(()=>dt(Ze,!1),[Ot]),[De,St]=he.useState(null),Oe=he.useRef(null),it=he.useRef(null),Ke=he.useRef(null),Xe=he.useRef(null),[Pt,xt]=he.useState(!1),[Ie,Wt]=he.useState(re),[hn,Pn]=he.useState(0);(0,ue.default)(()=>{Wt(et&&Je&&ut?me:re)},[Je,Ot,bt,et,Ze]),(0,ue.default)(()=>{var Jt,ln,Un,on;if(Ie===me){const zt=!!(!((Jt=it.current)===null||Jt===void 0)&&Jt.isExceed());Wt(zt?Re:Y),St(zt?[0,ut]:null),xt(zt);const kt=((ln=it.current)===null||ln===void 0?void 0:ln.getHeight())||0,ke=bt===1?0:((Un=Ke.current)===null||Un===void 0?void 0:Un.getHeight())||0,nt=((on=Xe.current)===null||on===void 0?void 0:on.getHeight())||0,Vt=ke+nt,U=Math.max(kt,Vt);Pn(U+1),je(zt)}},[Ie]);const $n=De?Math.ceil((De[0]+De[1])/2):0;(0,ue.default)(()=>{var Jt;const[ln,Un]=De||[0,0];if(ln!==Un){const zt=(((Jt=Oe.current)===null||Jt===void 0?void 0:Jt.getHeight())||0)>hn;let kt=$n;Un-ln===1&&(kt=zt?ln:Un),St(zt?[ln,kt]:[kt,Un])}},[De,$n]);const nr=he.useMemo(()=>{if(Ie!==Re||!De||De[0]!==De[1]){const Jt=dt(Ze,!1);return Ie!==Y&&Ie!==re?he.createElement("span",{style:Object.assign(Object.assign({},le),{WebkitLineClamp:bt})},Jt):Jt}return dt(Me?Ze:Ve(Ze,De[0]),Pt)},[Me,Ie,De,Ze].concat((0,E.default)(we))),Ft={width:Je,margin:0,padding:0};return he.createElement(he.Fragment,null,nr,Ie===me&&he.createElement(he.Fragment,null,he.createElement(ce,{style:Object.assign(Object.assign(Object.assign({},Ft),le),{WebkitLineClamp:bt}),ref:it},Qt),he.createElement(ce,{style:Object.assign(Object.assign(Object.assign({},Ft),le),{WebkitLineClamp:bt-1}),ref:Ke},Qt),he.createElement(ce,{style:Object.assign(Object.assign(Object.assign({},Ft),le),{WebkitLineClamp:1}),ref:Xe},dt([],!0))),Ie===Re&&De&&De[0]!==De[1]&&he.createElement(ce,{style:Object.assign(Object.assign({},Ft),{top:400}),ref:Oe},dt(Ve(Ze,$n),!0)))}},69274:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(94055));const ne=ce=>{let{enableEllipsis:xe,isEllipsis:oe,children:Ve,tooltipProps:re}=ce;return!(re!=null&&re.title)||!xe?Ve:E.createElement(he.default,Object.assign({open:oe?void 0:!1},re),Ve)};var ue=W.default=ne},28460:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(10875)),ne=q(D(93967)),ue=q(D(9220)),ce=q(D(45598)),xe=q(D(82546)),oe=q(D(60869)),Ve=q(D(18475)),re=D(75531),me=D(38882),Re=q(D(60938)),Y=D(31929),le=q(D(76647)),K=q(D(94055)),_e=q(D(69425)),et=q(D(63985)),Je=q(D(92759)),Ot=q(D(67312)),dt=q(D(28991)),bt=q(D(89652)),Me=q(D(6847)),we=q(D(12385)),je=q(D(69274)),Ze=function(Oe,it){var Ke={};for(var Xe in Oe)Object.prototype.hasOwnProperty.call(Oe,Xe)&&it.indexOf(Xe)<0&&(Ke[Xe]=Oe[Xe]);if(Oe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Pt=0,Xe=Object.getOwnPropertySymbols(Oe);Pt<Xe.length;Pt++)it.indexOf(Xe[Pt])<0&&Object.prototype.propertyIsEnumerable.call(Oe,Xe[Pt])&&(Ke[Xe[Pt]]=Oe[Xe[Pt]]);return Ke};function ut(Oe,it){let{mark:Ke,code:Xe,underline:Pt,delete:xt,strong:Ie,keyboard:Wt,italic:hn}=Oe,Pn=it;function $n(nr,Ft){Ft&&(Pn=E.createElement(nr,{},Pn))}return $n("strong",Ie),$n("u",Pt),$n("del",xt),$n("code",Xe),$n("mark",Ke),$n("kbd",Wt),$n("i",hn),Pn}const Qt="...",De=E.forwardRef((Oe,it)=>{var Ke,Xe,Pt;const{prefixCls:xt,className:Ie,style:Wt,type:hn,disabled:Pn,children:$n,ellipsis:nr,editable:Ft,copyable:Jt,component:ln,title:Un}=Oe,on=Ze(Oe,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:zt,direction:kt}=E.useContext(Y.ConfigContext),[ke]=(0,le.default)("Text"),nt=E.useRef(null),Vt=E.useRef(null),U=zt("typography",xt),pe=(0,Ve.default)(on,["mark","code","delete","underline","strong","keyboard","italic"]),[ct,de]=(0,Je.default)(Ft),[Yt,sn]=(0,oe.default)(!1,{value:de.editing}),{triggerType:pn=["icon"]}=de,Dn=Be=>{var rt;Be&&((rt=de.onStart)===null||rt===void 0||rt.call(de)),sn(Be)},Wn=(0,dt.default)(Yt);(0,Ot.default)(()=>{var Be;!Yt&&Wn&&((Be=Vt.current)===null||Be===void 0||Be.focus())},[Yt]);const Xn=Be=>{Be==null||Be.preventDefault(),Dn(!0)},dn=Be=>{var rt;(rt=de.onChange)===null||rt===void 0||rt.call(de,Be),Dn(!1)},_t=()=>{var Be;(Be=de.onCancel)===null||Be===void 0||Be.call(de),Dn(!1)},[Rt,wn]=(0,Je.default)(Jt),{copied:In,copyLoading:Zn,onClick:vt}=(0,et.default)({copyConfig:wn,children:$n}),[Ee,Fe]=E.useState(!1),[st,It]=E.useState(!1),[Mt,En]=E.useState(!1),[Yn,yr]=E.useState(!1),[qn,Pe]=E.useState(!0),[Te,Ue]=(0,Je.default)(nr,{expandable:!1,symbol:Be=>Be?ke==null?void 0:ke.collapse:ke==null?void 0:ke.expand}),[ot,wt]=(0,oe.default)(Ue.defaultExpanded||!1,{value:Ue.expanded}),$t=Te&&(!ot||Ue.expandable==="collapsible"),{rows:vn=1}=Ue,Et=E.useMemo(()=>$t&&(Ue.suffix!==void 0||Ue.onEllipsis||Ue.expandable||ct||Rt),[$t,Ue,ct,Rt]);(0,xe.default)(()=>{Te&&!Et&&(Fe((0,me.isStyleSupport)("webkitLineClamp")),It((0,me.isStyleSupport)("textOverflow")))},[Et,Te]);const[Kt,Qn]=E.useState($t),_r=E.useMemo(()=>Et?!1:vn===1?st:Ee,[Et,st,Ee]);(0,xe.default)(()=>{Qn(_r&&$t)},[_r,$t]);const Vr=$t&&(Kt?Yn:Mt),pr=$t&&vn===1&&Kt,zr=$t&&vn>1&&Kt,gi=(Be,rt)=>{var jt;wt(rt.expanded),(jt=Ue.onExpand)===null||jt===void 0||jt.call(Ue,Be,rt)},[wi,Sr]=E.useState(0),Ti=Be=>{let{offsetWidth:rt}=Be;Sr(rt)},hi=Be=>{var rt;En(Be),Mt!==Be&&((rt=Ue.onEllipsis)===null||rt===void 0||rt.call(Ue,Be))};E.useEffect(()=>{const Be=nt.current;if(Te&&Kt&&Be){const rt=zr?Be.offsetHeight<Be.scrollHeight:Be.offsetWidth<Be.scrollWidth;Yn!==rt&&yr(rt)}},[Te,Kt,$n,zr,qn,wi]),E.useEffect(()=>{const Be=nt.current;if(typeof IntersectionObserver=="undefined"||!Be||!Kt||!$t)return;const rt=new IntersectionObserver(()=>{Pe(!!Be.offsetParent)});return rt.observe(Be),()=>{rt.disconnect()}},[Kt,$t]);let ai={};Ue.tooltip===!0?ai={title:(Ke=de.text)!==null&&Ke!==void 0?Ke:$n}:E.isValidElement(Ue.tooltip)?ai={title:Ue.tooltip}:typeof Ue.tooltip=="object"?ai=Object.assign({title:(Xe=de.text)!==null&&Xe!==void 0?Xe:$n},Ue.tooltip):ai={title:Ue.tooltip};const Mo=E.useMemo(()=>{const Be=rt=>["string","number"].includes(typeof rt);if(!(!Te||Kt)){if(Be(de.text))return de.text;if(Be($n))return $n;if(Be(Un))return Un;if(Be(ai.title))return ai.title}},[Te,Kt,Un,ai.title,Vr]);if(Yt)return E.createElement(_e.default,{value:(Pt=de.text)!==null&&Pt!==void 0?Pt:typeof $n=="string"?$n:"",onSave:dn,onCancel:_t,onEnd:de.onEnd,prefixCls:U,className:Ie,style:Wt,direction:kt,component:ln,maxLength:de.maxLength,autoSize:de.autoSize,enterIcon:de.enterIcon});const xi=()=>{const{expandable:Be,symbol:rt}=Ue;return!Be||ot&&Be!=="collapsible"?null:E.createElement("a",{key:"expand",className:`${U}-${ot?"collapse":"expand"}`,onClick:jt=>gi(jt,{expanded:!ot}),"aria-label":ot?ke.collapse:ke==null?void 0:ke.expand},typeof rt=="function"?rt(ot):rt)},ea=()=>{if(!ct)return;const{icon:Be,tooltip:rt,tabIndex:jt}=de,un=(0,ce.default)(rt)[0]||(ke==null?void 0:ke.edit),Nn=typeof un=="string"?un:"";return pn.includes("icon")?E.createElement(K.default,{key:"edit",title:rt===!1?"":un},E.createElement(Re.default,{ref:Vt,className:`${U}-edit`,onClick:Xn,"aria-label":Nn,tabIndex:jt},Be||E.createElement(he.default,{role:"button"}))):null},va=()=>Rt?E.createElement(Me.default,Object.assign({key:"copy"},wn,{prefixCls:U,copied:In,locale:ke,onCopy:vt,loading:Zn,iconOnly:$n==null})):null,Ro=Be=>[Be&&xi(),ea(),va()],$o=Be=>[Be&&!ot&&E.createElement("span",{"aria-hidden":!0,key:"ellipsis"},Qt),Ue.suffix,Ro(Be)];return E.createElement(ue.default,{onResize:Ti,disabled:!$t},Be=>E.createElement(je.default,{tooltipProps:ai,enableEllipsis:$t,isEllipsis:Vr},E.createElement(bt.default,Object.assign({className:(0,ne.default)({[`${U}-${hn}`]:hn,[`${U}-disabled`]:Pn,[`${U}-ellipsis`]:Te,[`${U}-ellipsis-single-line`]:pr,[`${U}-ellipsis-multiple-line`]:zr},Ie),prefixCls:xt,style:Object.assign(Object.assign({},Wt),{WebkitLineClamp:zr?vn:void 0}),component:ln,ref:(0,re.composeRef)(Be,nt,it),direction:kt,onClick:pn.includes("text")?Xn:void 0,"aria-label":Mo==null?void 0:Mo.toString(),title:Un},pe),E.createElement(we.default,{enableMeasure:$t&&!Kt,text:$n,rows:vn,width:wi,onEllipsis:hi,expanded:ot,miscDeps:[In,ot,Zn,ct,Rt]},(rt,jt)=>ut(Oe,E.createElement(E.Fragment,null,rt.length>0&&jt&&!ot&&Mo?E.createElement("span",{key:"show-content","aria-hidden":!0},rt):rt,$o(jt)))))))});var St=W.default=De},81410:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getNode=q,W.toList=D;function D(G){return G===!1?[!1,!1]:Array.isArray(G)?G:[G]}function q(G,E,he){return G===!0||G===void 0?E:G||he&&E}},69425:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(7224)),ne=q(D(93967)),ue=q(D(27712)),ce=D(47419),xe=q(D(14104)),oe=q(D(23461));const Ve=me=>{const{prefixCls:Re,"aria-label":Y,className:le,style:K,direction:_e,maxLength:et,autoSize:Je=!0,value:Ot,onSave:dt,onCancel:bt,onEnd:Me,component:we,enterIcon:je=E.createElement(he.default,null)}=me,Ze=E.useRef(null),ut=E.useRef(!1),Qt=E.useRef(),[De,St]=E.useState(Ot);E.useEffect(()=>{St(Ot)},[Ot]),E.useEffect(()=>{if(Ze.current&&Ze.current.resizableTextArea){const{textArea:Ft}=Ze.current.resizableTextArea;Ft.focus();const{length:Jt}=Ft.value;Ft.setSelectionRange(Jt,Jt)}},[]);const Oe=Ft=>{let{target:Jt}=Ft;St(Jt.value.replace(/[\n\r]/g,""))},it=()=>{ut.current=!0},Ke=()=>{ut.current=!1},Xe=Ft=>{let{keyCode:Jt}=Ft;ut.current||(Qt.current=Jt)},Pt=()=>{dt(De.trim())},xt=Ft=>{let{keyCode:Jt,ctrlKey:ln,altKey:Un,metaKey:on,shiftKey:zt}=Ft;Qt.current===Jt&&!ut.current&&!ln&&!Un&&!on&&!zt&&(Jt===ue.default.ENTER?(Pt(),Me==null||Me()):Jt===ue.default.ESC&&bt())},Ie=()=>{Pt()},Wt=we?`${Re}-${we}`:"",[hn,Pn,$n]=(0,oe.default)(Re),nr=(0,ne.default)(Re,`${Re}-edit-content`,{[`${Re}-rtl`]:_e==="rtl"},le,Wt,Pn,$n);return hn(E.createElement("div",{className:nr,style:K},E.createElement(xe.default,{ref:Ze,maxLength:et,value:De,onChange:Oe,onKeyDown:Xe,onKeyUp:xt,onCompositionStart:it,onCompositionEnd:Ke,onBlur:Ie,"aria-label":Y,rows:1,autoSize:Je}),je!==null?(0,ce.cloneElement)(je,{className:`${Re}-edit-content-confirm`}):null))};var re=W.default=Ve},34528:function(mt,W,D){"use strict";var q,G=D(64836).default,E=D(75263).default;q={value:!0},W.Z=void 0;var he=E(D(67294)),ne=D(13594),ue=G(D(28460)),ce=function(re,me){var Re={};for(var Y in re)Object.prototype.hasOwnProperty.call(re,Y)&&me.indexOf(Y)<0&&(Re[Y]=re[Y]);if(re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var le=0,Y=Object.getOwnPropertySymbols(re);le<Y.length;le++)me.indexOf(Y[le])<0&&Object.prototype.propertyIsEnumerable.call(re,Y[le])&&(Re[Y[le]]=re[Y[le]]);return Re};const xe=[1,2,3,4,5],oe=he.forwardRef((re,me)=>{const{level:Re=1}=re,Y=ce(re,["level"]);let le;return xe.includes(Re)?le=`h${Re}`:le="h1",he.createElement(ue.default,Object.assign({ref:me},Y,{component:le}))});var Ve=W.Z=oe},89652:function(mt,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(93967)),ne=D(75531),ue=D(13594),ce=D(31929),xe=q(D(23461)),oe=function(me,Re){var Y={};for(var le in me)Object.prototype.hasOwnProperty.call(me,le)&&Re.indexOf(le)<0&&(Y[le]=me[le]);if(me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,le=Object.getOwnPropertySymbols(me);K<le.length;K++)Re.indexOf(le[K])<0&&Object.prototype.propertyIsEnumerable.call(me,le[K])&&(Y[le[K]]=me[le[K]]);return Y};const Ve=E.forwardRef((me,Re)=>{const{prefixCls:Y,component:le="article",className:K,rootClassName:_e,setContentRef:et,children:Je,direction:Ot,style:dt}=me,bt=oe(me,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:Me,direction:we,typography:je}=E.useContext(ce.ConfigContext),Ze=Ot!=null?Ot:we;let ut=Re;et&&(ut=(0,ne.composeRef)(Re,et));const Qt=Me("typography",Y),[De,St,Oe]=(0,xe.default)(Qt),it=(0,he.default)(Qt,je==null?void 0:je.className,{[`${Qt}-rtl`]:Ze==="rtl"},K,_e,St,Oe),Ke=Object.assign(Object.assign({},je==null?void 0:je.style),dt);return De(E.createElement(le,Object.assign({className:it,style:Ke,ref:ut},bt),Je))});var re=W.default=Ve},63985:function(mt,W,D){"use strict";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),he=q(D(20640)),ne=D(56790),ue=function(oe,Ve,re,me){function Re(Y){return Y instanceof re?Y:new re(function(le){le(Y)})}return new(re||(re=Promise))(function(Y,le){function K(Je){try{et(me.next(Je))}catch(Ot){le(Ot)}}function _e(Je){try{et(me.throw(Je))}catch(Ot){le(Ot)}}function et(Je){Je.done?Y(Je.value):Re(Je.value).then(K,_e)}et((me=me.apply(oe,Ve||[])).next())})};const ce=oe=>{let{copyConfig:Ve,children:re}=oe;const[me,Re]=E.useState(!1),[Y,le]=E.useState(!1),K=E.useRef(null),_e=()=>{K.current&&clearTimeout(K.current)},et={};Ve.format&&(et.format=Ve.format),E.useEffect(()=>_e,[]);const Je=(0,ne.useEvent)(Ot=>ue(void 0,void 0,void 0,function*(){var dt;Ot==null||Ot.preventDefault(),Ot==null||Ot.stopPropagation(),le(!0);try{const bt=typeof Ve.text=="function"?yield Ve.text():Ve.text;(0,he.default)(bt||String(re)||"",et),le(!1),Re(!0),_e(),K.current=setTimeout(()=>{Re(!1)},3e3),(dt=Ve.onCopy)===null||dt===void 0||dt.call(Ve,Ot)}catch(bt){throw le(!1),bt}}));return{copied:me,copyLoading:Y,onClick:Je}};var xe=W.default=ce},92759:function(mt,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var G=q(D(67294));function E(he,ne){return G.useMemo(()=>{const ue=!!he;return[ue,Object.assign(Object.assign({},ne),ue&&typeof he=="object"?he:null)]},[he])}},28991:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var q=D(67294);const G=he=>{const ne=(0,q.useRef)();return(0,q.useEffect)(()=>{ne.current=he}),ne.current};var E=W.default=G},67312:function(mt,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294));const E=(ne,ue)=>{const ce=G.useRef(!1);G.useEffect(()=>{ce.current?ne():ce.current=!0},ue)};var he=W.default=E},23461:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.prepareComponentToken=W.default=void 0;var q=D(98078),G=D(3184),E=D(48385);const he=ce=>{const{componentCls:xe,titleMarginTop:oe}=ce;return{[xe]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:ce.colorText,wordBreak:"break-word",lineHeight:ce.lineHeight,[`&${xe}-secondary`]:{color:ce.colorTextDescription},[`&${xe}-success`]:{color:ce.colorSuccess},[`&${xe}-warning`]:{color:ce.colorWarning},[`&${xe}-danger`]:{color:ce.colorError,"a&:active, a&:focus":{color:ce.colorErrorActive},"a&:hover":{color:ce.colorErrorHover}},[`&${xe}-disabled`]:{color:ce.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},(0,E.getTitleStyles)(ce)),{[`
      & + h1${xe},
      & + h2${xe},
      & + h3${xe},
      & + h4${xe},
      & + h5${xe}
      `]:{marginTop:oe},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:oe}}}),(0,E.getResetStyles)(ce)),(0,E.getLinkStyles)(ce)),{[`
        ${xe}-expand,
        ${xe}-collapse,
        ${xe}-edit,
        ${xe}-copy
      `]:Object.assign(Object.assign({},(0,q.operationUnit)(ce)),{marginInlineStart:ce.marginXXS})}),(0,E.getEditableStyles)(ce)),(0,E.getCopyableStyles)(ce)),(0,E.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},ne=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});W.prepareComponentToken=ne;var ue=W.default=(0,G.genStyleHooks)("Typography",ce=>[he(ce)],ne)},48385:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getTitleStyles=W.getResetStyles=W.getLinkStyles=W.getEllipsisStyles=W.getEditableStyles=W.getCopyableStyles=void 0;var q=D(78589),G=D(6731),E=D(98078);const he=(re,me,Re,Y)=>{const{titleMarginBottom:le,fontWeightStrong:K}=Y;return{marginBottom:le,color:Re,fontWeight:K,fontSize:re,lineHeight:me}},ne=re=>{const me=[1,2,3,4,5],Re={};return me.forEach(Y=>{Re[`
      h${Y}&,
      div&-h${Y},
      div&-h${Y} > textarea,
      h${Y}
    `]=he(re[`fontSizeHeading${Y}`],re[`lineHeightHeading${Y}`],re.colorTextHeading,re)}),Re};W.getTitleStyles=ne;const ue=re=>{const{componentCls:me}=re;return{"a&, a":Object.assign(Object.assign({},(0,E.operationUnit)(re)),{textDecoration:re.linkDecoration,"&:active, &:hover":{textDecoration:re.linkHoverDecoration},[`&[disabled], &${me}-disabled`]:{color:re.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:re.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};W.getLinkStyles=ue;const ce=re=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:re.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:re.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:q.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:re.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});W.getResetStyles=ce;const xe=re=>{const{componentCls:me,paddingSM:Re}=re,Y=Re;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:re.calc(re.paddingSM).mul(-1).equal(),marginTop:re.calc(Y).mul(-1).equal(),marginBottom:`calc(1em - ${(0,G.unit)(Y)})`},[`${me}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:re.calc(re.marginXS).add(2).equal(),insetBlockEnd:re.marginXS,color:re.colorTextDescription,fontWeight:"normal",fontSize:re.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};W.getEditableStyles=xe;const oe=re=>({[`${re.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:re.colorSuccess}},[`${re.componentCls}-copy-icon-only`]:{marginInlineStart:0}});W.getCopyableStyles=oe;const Ve=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});W.getEllipsisStyles=Ve},87629:function(mt,W,D){"use strict";"use client";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(36245)),E=W.default=G.default},36245:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var D=W.default="5.18.1"},83874:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(71079));function G(he){return he&&he.__esModule?he:{default:he}}const E=q;W.default=E,mt.exports=E},43273:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(72225));function G(he){return he&&he.__esModule?he:{default:he}}const E=q;W.default=E,mt.exports=E},90091:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(29539));function G(he){return he&&he.__esModule?he:{default:he}}const E=q;W.default=E,mt.exports=E},10875:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(54825));function G(he){return he&&he.__esModule?he:{default:he}}const E=q;W.default=E,mt.exports=E},7224:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(43552));function G(he){return he&&he.__esModule?he:{default:he}}const E=q;W.default=E,mt.exports=E},4121:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(61929));function G(he){return he&&he.__esModule?he:{default:he}}const E=q;W.default=E,mt.exports=E},26545:function(mt,W,D){"use client";"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return we}});var q=Re(D(67294)),G=re(D(93967)),E=D(78589),he=re(D(13357)),ne=re(D(46648)),ue=D(46338),ce=D(49458);function xe(je,Ze){(Ze==null||Ze>je.length)&&(Ze=je.length);for(var ut=0,Qt=new Array(Ze);ut<Ze;ut++)Qt[ut]=je[ut];return Qt}function oe(je){if(Array.isArray(je))return je}function Ve(je,Ze,ut){return Ze in je?Object.defineProperty(je,Ze,{value:ut,enumerable:!0,configurable:!0,writable:!0}):je[Ze]=ut,je}function re(je){return je&&je.__esModule?je:{default:je}}function me(je){if(typeof WeakMap!="function")return null;var Ze=new WeakMap,ut=new WeakMap;return(me=function(Qt){return Qt?ut:Ze})(je)}function Re(je,Ze){if(!Ze&&je&&je.__esModule)return je;if(je===null||typeof je!="object"&&typeof je!="function")return{default:je};var ut=me(Ze);if(ut&&ut.has(je))return ut.get(je);var Qt={__proto__:null},De=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var St in je)if(St!=="default"&&Object.prototype.hasOwnProperty.call(je,St)){var Oe=De?Object.getOwnPropertyDescriptor(je,St):null;Oe&&(Oe.get||Oe.set)?Object.defineProperty(Qt,St,Oe):Qt[St]=je[St]}return Qt.default=je,ut&&ut.set(je,Qt),Qt}function Y(je,Ze){var ut=je==null?null:typeof Symbol!="undefined"&&je[Symbol.iterator]||je["@@iterator"];if(ut!=null){var Qt=[],De=!0,St=!1,Oe,it;try{for(ut=ut.call(je);!(De=(Oe=ut.next()).done)&&(Qt.push(Oe.value),!(Ze&&Qt.length===Ze));De=!0);}catch(Ke){St=!0,it=Ke}finally{try{!De&&ut.return!=null&&ut.return()}finally{if(St)throw it}}return Qt}}function le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K(je){for(var Ze=1;Ze<arguments.length;Ze++){var ut=arguments[Ze]!=null?arguments[Ze]:{},Qt=Object.keys(ut);typeof Object.getOwnPropertySymbols=="function"&&(Qt=Qt.concat(Object.getOwnPropertySymbols(ut).filter(function(De){return Object.getOwnPropertyDescriptor(ut,De).enumerable}))),Qt.forEach(function(De){Ve(je,De,ut[De])})}return je}function _e(je,Ze){var ut=Object.keys(je);if(Object.getOwnPropertySymbols){var Qt=Object.getOwnPropertySymbols(je);Ze&&(Qt=Qt.filter(function(De){return Object.getOwnPropertyDescriptor(je,De).enumerable})),ut.push.apply(ut,Qt)}return ut}function et(je,Ze){return Ze=Ze!=null?Ze:{},Object.getOwnPropertyDescriptors?Object.defineProperties(je,Object.getOwnPropertyDescriptors(Ze)):_e(Object(Ze)).forEach(function(ut){Object.defineProperty(je,ut,Object.getOwnPropertyDescriptor(Ze,ut))}),je}function Je(je,Ze){if(je==null)return{};var ut=Ot(je,Ze),Qt,De;if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(je);for(De=0;De<St.length;De++)Qt=St[De],!(Ze.indexOf(Qt)>=0)&&Object.prototype.propertyIsEnumerable.call(je,Qt)&&(ut[Qt]=je[Qt])}return ut}function Ot(je,Ze){if(je==null)return{};var ut={},Qt=Object.keys(je),De,St;for(St=0;St<Qt.length;St++)De=Qt[St],!(Ze.indexOf(De)>=0)&&(ut[De]=je[De]);return ut}function dt(je,Ze){return oe(je)||Y(je,Ze)||bt(je,Ze)||le()}function bt(je,Ze){if(je){if(typeof je=="string")return xe(je,Ze);var ut=Object.prototype.toString.call(je).slice(8,-1);if(ut==="Object"&&je.constructor&&(ut=je.constructor.name),ut==="Map"||ut==="Set")return Array.from(ut);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return xe(je,Ze)}}(0,ue.setTwoToneColor)(E.blue.primary);var Me=q.forwardRef(function(je,Ze){var ut=je.className,Qt=je.icon,De=je.spin,St=je.rotate,Oe=je.tabIndex,it=je.onClick,Ke=je.twoToneColor,Xe=Je(je,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),Pt=q.useContext(he.default),xt=Pt.prefixCls,Ie=xt===void 0?"anticon":xt,Wt=Pt.rootClassName,hn,Pn=(0,G.default)(Wt,Ie,(hn={},Ve(hn,"".concat(Ie,"-").concat(Qt.name),!!Qt.name),Ve(hn,"".concat(Ie,"-spin"),!!De||Qt.name==="loading"),hn),ut),$n=Oe;$n===void 0&&it&&($n=-1);var nr=St?{msTransform:"rotate(".concat(St,"deg)"),transform:"rotate(".concat(St,"deg)")}:void 0,Ft=dt((0,ce.normalizeTwoToneColors)(Ke),2),Jt=Ft[0],ln=Ft[1];return q.createElement("span",et(K({role:"img","aria-label":Qt.name},Xe),{ref:Ze,tabIndex:$n,onClick:it,className:Pn}),q.createElement(ne.default,{icon:Qt,primaryColor:Jt,secondaryColor:ln,style:nr}))});Me.displayName="AntdIcon",Me.getTwoToneColor=ue.getTwoToneColor,Me.setTwoToneColor=ue.setTwoToneColor;var we=Me},13357:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return E}});var q=D(67294),G=(0,q.createContext)({}),E=G},46648:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return le}});var q=ne(D(67294)),G=D(49458);function E(K,_e,et){return _e in K?Object.defineProperty(K,_e,{value:et,enumerable:!0,configurable:!0,writable:!0}):K[_e]=et,K}function he(K){if(typeof WeakMap!="function")return null;var _e=new WeakMap,et=new WeakMap;return(he=function(Je){return Je?et:_e})(K)}function ne(K,_e){if(!_e&&K&&K.__esModule)return K;if(K===null||typeof K!="object"&&typeof K!="function")return{default:K};var et=he(_e);if(et&&et.has(K))return et.get(K);var Je={__proto__:null},Ot=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var dt in K)if(dt!=="default"&&Object.prototype.hasOwnProperty.call(K,dt)){var bt=Ot?Object.getOwnPropertyDescriptor(K,dt):null;bt&&(bt.get||bt.set)?Object.defineProperty(Je,dt,bt):Je[dt]=K[dt]}return Je.default=K,et&&et.set(K,Je),Je}function ue(K){for(var _e=1;_e<arguments.length;_e++){var et=arguments[_e]!=null?arguments[_e]:{},Je=Object.keys(et);typeof Object.getOwnPropertySymbols=="function"&&(Je=Je.concat(Object.getOwnPropertySymbols(et).filter(function(Ot){return Object.getOwnPropertyDescriptor(et,Ot).enumerable}))),Je.forEach(function(Ot){E(K,Ot,et[Ot])})}return K}function ce(K,_e){var et=Object.keys(K);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(K);_e&&(Je=Je.filter(function(Ot){return Object.getOwnPropertyDescriptor(K,Ot).enumerable})),et.push.apply(et,Je)}return et}function xe(K,_e){return _e=_e!=null?_e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(_e)):ce(Object(_e)).forEach(function(et){Object.defineProperty(K,et,Object.getOwnPropertyDescriptor(_e,et))}),K}function oe(K,_e){if(K==null)return{};var et=Ve(K,_e),Je,Ot;if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(K);for(Ot=0;Ot<dt.length;Ot++)Je=dt[Ot],!(_e.indexOf(Je)>=0)&&Object.prototype.propertyIsEnumerable.call(K,Je)&&(et[Je]=K[Je])}return et}function Ve(K,_e){if(K==null)return{};var et={},Je=Object.keys(K),Ot,dt;for(dt=0;dt<Je.length;dt++)Ot=Je[dt],!(_e.indexOf(Ot)>=0)&&(et[Ot]=K[Ot]);return et}var re={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function me(K){var _e=K.primaryColor,et=K.secondaryColor;re.primaryColor=_e,re.secondaryColor=et||(0,G.getSecondaryColor)(_e),re.calculated=!!et}function Re(){return ue({},re)}var Y=function(K){var _e=K.icon,et=K.className,Je=K.onClick,Ot=K.style,dt=K.primaryColor,bt=K.secondaryColor,Me=oe(K,["icon","className","onClick","style","primaryColor","secondaryColor"]),we=q.useRef(),je=re;if(dt&&(je={primaryColor:dt,secondaryColor:bt||(0,G.getSecondaryColor)(dt)}),(0,G.useInsertStyles)(we),(0,G.warning)((0,G.isIconDefinition)(_e),"icon should be icon definiton, but got ".concat(_e)),!(0,G.isIconDefinition)(_e))return null;var Ze=_e;return Ze&&typeof Ze.icon=="function"&&(Ze=xe(ue({},Ze),{icon:Ze.icon(je.primaryColor,je.secondaryColor)})),(0,G.generate)(Ze.icon,"svg-".concat(Ze.name),xe(ue({className:et,onClick:Je,style:Ot,"data-icon":Ze.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Me),{ref:we}))};Y.displayName="IconReact",Y.getTwoToneColors=Re,Y.setTwoToneColors=me;var le=Y},46338:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0});function q(Re,Y){for(var le in Y)Object.defineProperty(Re,le,{enumerable:!0,get:Y[le]})}q(W,{getTwoToneColor:function(){return me},setTwoToneColor:function(){return re}});var G=ue(D(46648)),E=D(49458);function he(Re,Y){(Y==null||Y>Re.length)&&(Y=Re.length);for(var le=0,K=new Array(Y);le<Y;le++)K[le]=Re[le];return K}function ne(Re){if(Array.isArray(Re))return Re}function ue(Re){return Re&&Re.__esModule?Re:{default:Re}}function ce(Re,Y){var le=Re==null?null:typeof Symbol!="undefined"&&Re[Symbol.iterator]||Re["@@iterator"];if(le!=null){var K=[],_e=!0,et=!1,Je,Ot;try{for(le=le.call(Re);!(_e=(Je=le.next()).done)&&(K.push(Je.value),!(Y&&K.length===Y));_e=!0);}catch(dt){et=!0,Ot=dt}finally{try{!_e&&le.return!=null&&le.return()}finally{if(et)throw Ot}}return K}}function xe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oe(Re,Y){return ne(Re)||ce(Re,Y)||Ve(Re,Y)||xe()}function Ve(Re,Y){if(Re){if(typeof Re=="string")return he(Re,Y);var le=Object.prototype.toString.call(Re).slice(8,-1);if(le==="Object"&&Re.constructor&&(le=Re.constructor.name),le==="Map"||le==="Set")return Array.from(le);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return he(Re,Y)}}function re(Re){var Y=oe((0,E.normalizeTwoToneColors)(Re),2),le=Y[0],K=Y[1];return G.default.setTwoToneColors({primaryColor:le,secondaryColor:K})}function me(){var Re=G.default.getTwoToneColors();return Re.calculated?[Re.primaryColor,Re.secondaryColor]:Re.primaryColor}},71079:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Re}});var q=ce(D(67294)),G=ne(D(25330)),E=ne(D(26545));function he(Y,le,K){return le in Y?Object.defineProperty(Y,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):Y[le]=K,Y}function ne(Y){return Y&&Y.__esModule?Y:{default:Y}}function ue(Y){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(_e){return _e?K:le})(Y)}function ce(Y,le){if(!le&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var K=ue(le);if(K&&K.has(Y))return K.get(Y);var _e={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in Y)if(Je!=="default"&&Object.prototype.hasOwnProperty.call(Y,Je)){var Ot=et?Object.getOwnPropertyDescriptor(Y,Je):null;Ot&&(Ot.get||Ot.set)?Object.defineProperty(_e,Je,Ot):_e[Je]=Y[Je]}return _e.default=Y,K&&K.set(Y,_e),_e}function xe(Y){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},_e=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(_e=_e.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),_e.forEach(function(et){he(Y,et,K[et])})}return Y}function oe(Y,le){var K=Object.keys(Y);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(Y);le&&(_e=_e.filter(function(et){return Object.getOwnPropertyDescriptor(Y,et).enumerable})),K.push.apply(K,_e)}return K}function Ve(Y,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(K){Object.defineProperty(Y,K,Object.getOwnPropertyDescriptor(le,K))}),Y}var re=function(Y,le){return q.createElement(E.default,Ve(xe({},Y),{ref:le,icon:G.default}))},me=q.forwardRef(re),Re=me},72225:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Re}});var q=ce(D(67294)),G=ne(D(67303)),E=ne(D(26545));function he(Y,le,K){return le in Y?Object.defineProperty(Y,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):Y[le]=K,Y}function ne(Y){return Y&&Y.__esModule?Y:{default:Y}}function ue(Y){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(_e){return _e?K:le})(Y)}function ce(Y,le){if(!le&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var K=ue(le);if(K&&K.has(Y))return K.get(Y);var _e={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in Y)if(Je!=="default"&&Object.prototype.hasOwnProperty.call(Y,Je)){var Ot=et?Object.getOwnPropertyDescriptor(Y,Je):null;Ot&&(Ot.get||Ot.set)?Object.defineProperty(_e,Je,Ot):_e[Je]=Y[Je]}return _e.default=Y,K&&K.set(Y,_e),_e}function xe(Y){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},_e=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(_e=_e.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),_e.forEach(function(et){he(Y,et,K[et])})}return Y}function oe(Y,le){var K=Object.keys(Y);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(Y);le&&(_e=_e.filter(function(et){return Object.getOwnPropertyDescriptor(Y,et).enumerable})),K.push.apply(K,_e)}return K}function Ve(Y,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(K){Object.defineProperty(Y,K,Object.getOwnPropertyDescriptor(le,K))}),Y}var re=function(Y,le){return q.createElement(E.default,Ve(xe({},Y),{ref:le,icon:G.default}))},me=q.forwardRef(re),Re=me},29539:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Re}});var q=ce(D(67294)),G=ne(D(83647)),E=ne(D(26545));function he(Y,le,K){return le in Y?Object.defineProperty(Y,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):Y[le]=K,Y}function ne(Y){return Y&&Y.__esModule?Y:{default:Y}}function ue(Y){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(_e){return _e?K:le})(Y)}function ce(Y,le){if(!le&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var K=ue(le);if(K&&K.has(Y))return K.get(Y);var _e={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in Y)if(Je!=="default"&&Object.prototype.hasOwnProperty.call(Y,Je)){var Ot=et?Object.getOwnPropertyDescriptor(Y,Je):null;Ot&&(Ot.get||Ot.set)?Object.defineProperty(_e,Je,Ot):_e[Je]=Y[Je]}return _e.default=Y,K&&K.set(Y,_e),_e}function xe(Y){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},_e=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(_e=_e.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),_e.forEach(function(et){he(Y,et,K[et])})}return Y}function oe(Y,le){var K=Object.keys(Y);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(Y);le&&(_e=_e.filter(function(et){return Object.getOwnPropertyDescriptor(Y,et).enumerable})),K.push.apply(K,_e)}return K}function Ve(Y,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(K){Object.defineProperty(Y,K,Object.getOwnPropertyDescriptor(le,K))}),Y}var re=function(Y,le){return q.createElement(E.default,Ve(xe({},Y),{ref:le,icon:G.default}))},me=q.forwardRef(re),Re=me},54825:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Re}});var q=ce(D(67294)),G=ne(D(57583)),E=ne(D(26545));function he(Y,le,K){return le in Y?Object.defineProperty(Y,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):Y[le]=K,Y}function ne(Y){return Y&&Y.__esModule?Y:{default:Y}}function ue(Y){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(_e){return _e?K:le})(Y)}function ce(Y,le){if(!le&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var K=ue(le);if(K&&K.has(Y))return K.get(Y);var _e={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in Y)if(Je!=="default"&&Object.prototype.hasOwnProperty.call(Y,Je)){var Ot=et?Object.getOwnPropertyDescriptor(Y,Je):null;Ot&&(Ot.get||Ot.set)?Object.defineProperty(_e,Je,Ot):_e[Je]=Y[Je]}return _e.default=Y,K&&K.set(Y,_e),_e}function xe(Y){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},_e=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(_e=_e.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),_e.forEach(function(et){he(Y,et,K[et])})}return Y}function oe(Y,le){var K=Object.keys(Y);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(Y);le&&(_e=_e.filter(function(et){return Object.getOwnPropertyDescriptor(Y,et).enumerable})),K.push.apply(K,_e)}return K}function Ve(Y,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(K){Object.defineProperty(Y,K,Object.getOwnPropertyDescriptor(le,K))}),Y}var re=function(Y,le){return q.createElement(E.default,Ve(xe({},Y),{ref:le,icon:G.default}))},me=q.forwardRef(re),Re=me},43552:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Re}});var q=ce(D(67294)),G=ne(D(29260)),E=ne(D(26545));function he(Y,le,K){return le in Y?Object.defineProperty(Y,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):Y[le]=K,Y}function ne(Y){return Y&&Y.__esModule?Y:{default:Y}}function ue(Y){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(_e){return _e?K:le})(Y)}function ce(Y,le){if(!le&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var K=ue(le);if(K&&K.has(Y))return K.get(Y);var _e={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in Y)if(Je!=="default"&&Object.prototype.hasOwnProperty.call(Y,Je)){var Ot=et?Object.getOwnPropertyDescriptor(Y,Je):null;Ot&&(Ot.get||Ot.set)?Object.defineProperty(_e,Je,Ot):_e[Je]=Y[Je]}return _e.default=Y,K&&K.set(Y,_e),_e}function xe(Y){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},_e=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(_e=_e.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),_e.forEach(function(et){he(Y,et,K[et])})}return Y}function oe(Y,le){var K=Object.keys(Y);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(Y);le&&(_e=_e.filter(function(et){return Object.getOwnPropertyDescriptor(Y,et).enumerable})),K.push.apply(K,_e)}return K}function Ve(Y,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(K){Object.defineProperty(Y,K,Object.getOwnPropertyDescriptor(le,K))}),Y}var re=function(Y,le){return q.createElement(E.default,Ve(xe({},Y),{ref:le,icon:G.default}))},me=q.forwardRef(re),Re=me},61929:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Re}});var q=ce(D(67294)),G=ne(D(25828)),E=ne(D(26545));function he(Y,le,K){return le in Y?Object.defineProperty(Y,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):Y[le]=K,Y}function ne(Y){return Y&&Y.__esModule?Y:{default:Y}}function ue(Y){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(_e){return _e?K:le})(Y)}function ce(Y,le){if(!le&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var K=ue(le);if(K&&K.has(Y))return K.get(Y);var _e={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in Y)if(Je!=="default"&&Object.prototype.hasOwnProperty.call(Y,Je)){var Ot=et?Object.getOwnPropertyDescriptor(Y,Je):null;Ot&&(Ot.get||Ot.set)?Object.defineProperty(_e,Je,Ot):_e[Je]=Y[Je]}return _e.default=Y,K&&K.set(Y,_e),_e}function xe(Y){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},_e=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(_e=_e.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),_e.forEach(function(et){he(Y,et,K[et])})}return Y}function oe(Y,le){var K=Object.keys(Y);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(Y);le&&(_e=_e.filter(function(et){return Object.getOwnPropertyDescriptor(Y,et).enumerable})),K.push.apply(K,_e)}return K}function Ve(Y,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(K){Object.defineProperty(Y,K,Object.getOwnPropertyDescriptor(le,K))}),Y}var re=function(Y,le){return q.createElement(E.default,Ve(xe({},Y),{ref:le,icon:G.default}))},me=q.forwardRef(re),Re=me},49458:function(mt,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0});function q(Me,we){for(var je in we)Object.defineProperty(Me,je,{enumerable:!0,get:we[je]})}q(W,{generate:function(){return _e},getSecondaryColor:function(){return et},iconStyles:function(){return dt},isIconDefinition:function(){return le},normalizeAttrs:function(){return K},normalizeTwoToneColors:function(){return Je},svgBaseProps:function(){return Ot},useInsertStyles:function(){return bt},warning:function(){return Y}});var G=D(78589),E=D(93399),he=D(63298),ne=oe(D(45520)),ue=re(D(67294)),ce=oe(D(13357));function xe(Me,we,je){return we in Me?Object.defineProperty(Me,we,{value:je,enumerable:!0,configurable:!0,writable:!0}):Me[we]=je,Me}function oe(Me){return Me&&Me.__esModule?Me:{default:Me}}function Ve(Me){if(typeof WeakMap!="function")return null;var we=new WeakMap,je=new WeakMap;return(Ve=function(Ze){return Ze?je:we})(Me)}function re(Me,we){if(!we&&Me&&Me.__esModule)return Me;if(Me===null||typeof Me!="object"&&typeof Me!="function")return{default:Me};var je=Ve(we);if(je&&je.has(Me))return je.get(Me);var Ze={__proto__:null},ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Qt in Me)if(Qt!=="default"&&Object.prototype.hasOwnProperty.call(Me,Qt)){var De=ut?Object.getOwnPropertyDescriptor(Me,Qt):null;De&&(De.get||De.set)?Object.defineProperty(Ze,Qt,De):Ze[Qt]=Me[Qt]}return Ze.default=Me,je&&je.set(Me,Ze),Ze}function me(Me){for(var we=1;we<arguments.length;we++){var je=arguments[we]!=null?arguments[we]:{},Ze=Object.keys(je);typeof Object.getOwnPropertySymbols=="function"&&(Ze=Ze.concat(Object.getOwnPropertySymbols(je).filter(function(ut){return Object.getOwnPropertyDescriptor(je,ut).enumerable}))),Ze.forEach(function(ut){xe(Me,ut,je[ut])})}return Me}function Re(Me){return Me.replace(/-(.)/g,function(we,je){return je.toUpperCase()})}function Y(Me,we){(0,ne.default)(Me,"[@ant-design/icons] ".concat(we))}function le(Me){return typeof Me=="object"&&typeof Me.name=="string"&&typeof Me.theme=="string"&&(typeof Me.icon=="object"||typeof Me.icon=="function")}function K(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(Me).reduce(function(we,je){var Ze=Me[je];switch(je){case"class":we.className=Ze,delete we.class;break;default:delete we[je],we[Re(je)]=Ze}return we},{})}function _e(Me,we,je){return je?ue.default.createElement(Me.tag,me({key:we},K(Me.attrs),je),(Me.children||[]).map(function(Ze,ut){return _e(Ze,"".concat(we,"-").concat(Me.tag,"-").concat(ut))})):ue.default.createElement(Me.tag,me({key:we},K(Me.attrs)),(Me.children||[]).map(function(Ze,ut){return _e(Ze,"".concat(we,"-").concat(Me.tag,"-").concat(ut))}))}function et(Me){return(0,G.generate)(Me)[0]}function Je(Me){return Me?Array.isArray(Me)?Me:[Me]:[]}var Ot={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},dt=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,bt=function(Me){var we=(0,ue.useContext)(ce.default),je=we.csp,Ze=we.prefixCls,ut=dt;Ze&&(ut=ut.replace(/anticon/g,Ze)),(0,ue.useEffect)(function(){var Qt=Me.current,De=(0,he.getShadowRoot)(Qt);(0,E.updateCSS)(ut,"@ant-design-icons",{prepend:!0,csp:je,attachTo:De})},[])}},98129:function(mt,W,D){"use strict";var q=D(60690);mt.exports=function(he){he=he||{};var ne=he.reporter,ue=q.getOption(he,"async",!0),ce=q.getOption(he,"auto",!0);ce&&!ue&&(ne&&ne.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),ue=!0);var xe=G(),oe,Ve=!1;function re(et,Je){!Ve&&ce&&ue&&xe.size()===0&&Y(),xe.add(et,Je)}function me(){for(Ve=!0;xe.size();){var et=xe;xe=G(),et.process()}Ve=!1}function Re(et){Ve||(et===void 0&&(et=ue),oe&&(K(oe),oe=null),et?Y():me())}function Y(){oe=_e(me)}function le(){xe={},batchSize=0,topLevel=0,bottomLevel=0}function K(et){var Je=clearTimeout;return Je(et)}function _e(et){var Je=function(Ot){return setTimeout(Ot,0)};return Je(et)}return{add:re,force:Re}};function G(){var E={},he=0,ne=0,ue=0;function ce(Ve,re){re||(re=Ve,Ve=0),Ve>ne?ne=Ve:Ve<ue&&(ue=Ve),E[Ve]||(E[Ve]=[]),E[Ve].push(re),he++}function xe(){for(var Ve=ue;Ve<=ne;Ve++)for(var re=E[Ve],me=0;me<re.length;me++){var Re=re[me];Re()}}function oe(){return he}return{add:ce,process:xe,size:oe}}},60690:function(mt){"use strict";var W=mt.exports={};W.getOption=D;function D(q,G,E){var he=q[G];return he==null&&E!==void 0?E:he}},8874:function(mt){"use strict";mt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(mt,W,D){var q=D(8874),G=D(86851),E=Object.hasOwnProperty,he=Object.create(null);for(var ne in q)E.call(q,ne)&&(he[q[ne]]=ne);var ue=mt.exports={to:{},get:{}};ue.get=function(oe){var Ve=oe.substring(0,3).toLowerCase(),re,me;switch(Ve){case"hsl":re=ue.get.hsl(oe),me="hsl";break;case"hwb":re=ue.get.hwb(oe),me="hwb";break;default:re=ue.get.rgb(oe),me="rgb";break}return re?{model:me,value:re}:null},ue.get.rgb=function(oe){if(!oe)return null;var Ve=/^#([a-f0-9]{3,4})$/i,re=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,me=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Re=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Y=/^(\w+)$/,le=[0,0,0,1],K,_e,et;if(K=oe.match(re)){for(et=K[2],K=K[1],_e=0;_e<3;_e++){var Je=_e*2;le[_e]=parseInt(K.slice(Je,Je+2),16)}et&&(le[3]=parseInt(et,16)/255)}else if(K=oe.match(Ve)){for(K=K[1],et=K[3],_e=0;_e<3;_e++)le[_e]=parseInt(K[_e]+K[_e],16);et&&(le[3]=parseInt(et+et,16)/255)}else if(K=oe.match(me)){for(_e=0;_e<3;_e++)le[_e]=parseInt(K[_e+1],0);K[4]&&(K[5]?le[3]=parseFloat(K[4])*.01:le[3]=parseFloat(K[4]))}else if(K=oe.match(Re)){for(_e=0;_e<3;_e++)le[_e]=Math.round(parseFloat(K[_e+1])*2.55);K[4]&&(K[5]?le[3]=parseFloat(K[4])*.01:le[3]=parseFloat(K[4]))}else return(K=oe.match(Y))?K[1]==="transparent"?[0,0,0,0]:E.call(q,K[1])?(le=q[K[1]],le[3]=1,le):null:null;for(_e=0;_e<3;_e++)le[_e]=ce(le[_e],0,255);return le[3]=ce(le[3],0,1),le},ue.get.hsl=function(oe){if(!oe)return null;var Ve=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,re=oe.match(Ve);if(re){var me=parseFloat(re[4]),Re=(parseFloat(re[1])%360+360)%360,Y=ce(parseFloat(re[2]),0,100),le=ce(parseFloat(re[3]),0,100),K=ce(isNaN(me)?1:me,0,1);return[Re,Y,le,K]}return null},ue.get.hwb=function(oe){if(!oe)return null;var Ve=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,re=oe.match(Ve);if(re){var me=parseFloat(re[4]),Re=(parseFloat(re[1])%360+360)%360,Y=ce(parseFloat(re[2]),0,100),le=ce(parseFloat(re[3]),0,100),K=ce(isNaN(me)?1:me,0,1);return[Re,Y,le,K]}return null},ue.to.hex=function(){var oe=G(arguments);return"#"+xe(oe[0])+xe(oe[1])+xe(oe[2])+(oe[3]<1?xe(Math.round(oe[3]*255)):"")},ue.to.rgb=function(){var oe=G(arguments);return oe.length<4||oe[3]===1?"rgb("+Math.round(oe[0])+", "+Math.round(oe[1])+", "+Math.round(oe[2])+")":"rgba("+Math.round(oe[0])+", "+Math.round(oe[1])+", "+Math.round(oe[2])+", "+oe[3]+")"},ue.to.rgb.percent=function(){var oe=G(arguments),Ve=Math.round(oe[0]/255*100),re=Math.round(oe[1]/255*100),me=Math.round(oe[2]/255*100);return oe.length<4||oe[3]===1?"rgb("+Ve+"%, "+re+"%, "+me+"%)":"rgba("+Ve+"%, "+re+"%, "+me+"%, "+oe[3]+")"},ue.to.hsl=function(){var oe=G(arguments);return oe.length<4||oe[3]===1?"hsl("+oe[0]+", "+oe[1]+"%, "+oe[2]+"%)":"hsla("+oe[0]+", "+oe[1]+"%, "+oe[2]+"%, "+oe[3]+")"},ue.to.hwb=function(){var oe=G(arguments),Ve="";return oe.length>=4&&oe[3]!==1&&(Ve=", "+oe[3]),"hwb("+oe[0]+", "+oe[1]+"%, "+oe[2]+"%"+Ve+")"},ue.to.keyword=function(oe){return he[oe.slice(0,3)]};function ce(oe,Ve,re){return Math.min(Math.max(Ve,oe),re)}function xe(oe){var Ve=Math.round(oe).toString(16).toUpperCase();return Ve.length<2?"0"+Ve:Ve}},37620:function(mt,W,D){"use strict";D.d(W,{ZP:function(){return Ot},B8:function(){return we}});function q(Xe,Pt,xt){Xe.prototype=Pt.prototype=xt,xt.constructor=Xe}function G(Xe,Pt){var xt=Object.create(Xe.prototype);for(var Ie in Pt)xt[Ie]=Pt[Ie];return xt}function E(){}var he=.7,ne=1/he,ue="\\s*([+-]?\\d+)\\s*",ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",xe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oe=/^#([0-9a-f]{3,8})$/,Ve=new RegExp("^rgb\\("+[ue,ue,ue]+"\\)$"),re=new RegExp("^rgb\\("+[xe,xe,xe]+"\\)$"),me=new RegExp("^rgba\\("+[ue,ue,ue,ce]+"\\)$"),Re=new RegExp("^rgba\\("+[xe,xe,xe,ce]+"\\)$"),Y=new RegExp("^hsl\\("+[ce,xe,xe]+"\\)$"),le=new RegExp("^hsla\\("+[ce,xe,xe,ce]+"\\)$"),K={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q(E,Ot,{copy:function(Xe){return Object.assign(new this.constructor,this,Xe)},displayable:function(){return this.rgb().displayable()},hex:_e,formatHex:_e,formatHsl:et,formatRgb:Je,toString:Je});function _e(){return this.rgb().formatHex()}function et(){return St(this).formatHsl()}function Je(){return this.rgb().formatRgb()}function Ot(Xe){var Pt,xt;return Xe=(Xe+"").trim().toLowerCase(),(Pt=oe.exec(Xe))?(xt=Pt[1].length,Pt=parseInt(Pt[1],16),xt===6?dt(Pt):xt===3?new je(Pt>>8&15|Pt>>4&240,Pt>>4&15|Pt&240,(Pt&15)<<4|Pt&15,1):xt===8?bt(Pt>>24&255,Pt>>16&255,Pt>>8&255,(Pt&255)/255):xt===4?bt(Pt>>12&15|Pt>>8&240,Pt>>8&15|Pt>>4&240,Pt>>4&15|Pt&240,((Pt&15)<<4|Pt&15)/255):null):(Pt=Ve.exec(Xe))?new je(Pt[1],Pt[2],Pt[3],1):(Pt=re.exec(Xe))?new je(Pt[1]*255/100,Pt[2]*255/100,Pt[3]*255/100,1):(Pt=me.exec(Xe))?bt(Pt[1],Pt[2],Pt[3],Pt[4]):(Pt=Re.exec(Xe))?bt(Pt[1]*255/100,Pt[2]*255/100,Pt[3]*255/100,Pt[4]):(Pt=Y.exec(Xe))?De(Pt[1],Pt[2]/100,Pt[3]/100,1):(Pt=le.exec(Xe))?De(Pt[1],Pt[2]/100,Pt[3]/100,Pt[4]):K.hasOwnProperty(Xe)?dt(K[Xe]):Xe==="transparent"?new je(NaN,NaN,NaN,0):null}function dt(Xe){return new je(Xe>>16&255,Xe>>8&255,Xe&255,1)}function bt(Xe,Pt,xt,Ie){return Ie<=0&&(Xe=Pt=xt=NaN),new je(Xe,Pt,xt,Ie)}function Me(Xe){return Xe instanceof E||(Xe=Ot(Xe)),Xe?(Xe=Xe.rgb(),new je(Xe.r,Xe.g,Xe.b,Xe.opacity)):new je}function we(Xe,Pt,xt,Ie){return arguments.length===1?Me(Xe):new je(Xe,Pt,xt,Ie==null?1:Ie)}function je(Xe,Pt,xt,Ie){this.r=+Xe,this.g=+Pt,this.b=+xt,this.opacity=+Ie}q(je,we,G(E,{brighter:function(Xe){return Xe=Xe==null?ne:Math.pow(ne,Xe),new je(this.r*Xe,this.g*Xe,this.b*Xe,this.opacity)},darker:function(Xe){return Xe=Xe==null?he:Math.pow(he,Xe),new je(this.r*Xe,this.g*Xe,this.b*Xe,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ze,formatHex:Ze,formatRgb:ut,toString:ut}));function Ze(){return"#"+Qt(this.r)+Qt(this.g)+Qt(this.b)}function ut(){var Xe=this.opacity;return Xe=isNaN(Xe)?1:Math.max(0,Math.min(1,Xe)),(Xe===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Xe===1?")":", "+Xe+")")}function Qt(Xe){return Xe=Math.max(0,Math.min(255,Math.round(Xe)||0)),(Xe<16?"0":"")+Xe.toString(16)}function De(Xe,Pt,xt,Ie){return Ie<=0?Xe=Pt=xt=NaN:xt<=0||xt>=1?Xe=Pt=NaN:Pt<=0&&(Xe=NaN),new it(Xe,Pt,xt,Ie)}function St(Xe){if(Xe instanceof it)return new it(Xe.h,Xe.s,Xe.l,Xe.opacity);if(Xe instanceof E||(Xe=Ot(Xe)),!Xe)return new it;if(Xe instanceof it)return Xe;Xe=Xe.rgb();var Pt=Xe.r/255,xt=Xe.g/255,Ie=Xe.b/255,Wt=Math.min(Pt,xt,Ie),hn=Math.max(Pt,xt,Ie),Pn=NaN,$n=hn-Wt,nr=(hn+Wt)/2;return $n?(Pt===hn?Pn=(xt-Ie)/$n+(xt<Ie)*6:xt===hn?Pn=(Ie-Pt)/$n+2:Pn=(Pt-xt)/$n+4,$n/=nr<.5?hn+Wt:2-hn-Wt,Pn*=60):$n=nr>0&&nr<1?0:Pn,new it(Pn,$n,nr,Xe.opacity)}function Oe(Xe,Pt,xt,Ie){return arguments.length===1?St(Xe):new it(Xe,Pt,xt,Ie==null?1:Ie)}function it(Xe,Pt,xt,Ie){this.h=+Xe,this.s=+Pt,this.l=+xt,this.opacity=+Ie}q(it,Oe,G(E,{brighter:function(Xe){return Xe=Xe==null?ne:Math.pow(ne,Xe),new it(this.h,this.s,this.l*Xe,this.opacity)},darker:function(Xe){return Xe=Xe==null?he:Math.pow(he,Xe),new it(this.h,this.s,this.l*Xe,this.opacity)},rgb:function(){var Xe=this.h%360+(this.h<0)*360,Pt=isNaN(Xe)||isNaN(this.s)?0:this.s,xt=this.l,Ie=xt+(xt<.5?xt:1-xt)*Pt,Wt=2*xt-Ie;return new je(Ke(Xe>=240?Xe-240:Xe+120,Wt,Ie),Ke(Xe,Wt,Ie),Ke(Xe<120?Xe+240:Xe-120,Wt,Ie),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Xe=this.opacity;return Xe=isNaN(Xe)?1:Math.max(0,Math.min(1,Xe)),(Xe===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Xe===1?")":", "+Xe+")")}}));function Ke(Xe,Pt,xt){return(Xe<60?Pt+(xt-Pt)*Xe/60:Xe<180?xt:Xe<240?Pt+(xt-Pt)*(240-Xe)/60:Pt)*255}},9187:function(mt){"use strict";mt.exports=W,mt.exports.default=W;function W(Oe,it,Ke){Ke=Ke||2;var Xe=it&&it.length,Pt=Xe?it[0]*Ke:Oe.length,xt=D(Oe,0,Pt,Ke,!0),Ie=[];if(!xt||xt.next===xt.prev)return Ie;var Wt,hn,Pn,$n,nr,Ft,Jt;if(Xe&&(xt=ce(Oe,it,xt,Ke)),Oe.length>80*Ke){Wt=Pn=Oe[0],hn=$n=Oe[1];for(var ln=Ke;ln<Pt;ln+=Ke)nr=Oe[ln],Ft=Oe[ln+1],nr<Wt&&(Wt=nr),Ft<hn&&(hn=Ft),nr>Pn&&(Pn=nr),Ft>$n&&($n=Ft);Jt=Math.max(Pn-Wt,$n-hn),Jt=Jt!==0?32767/Jt:0}return G(xt,Ie,Ke,Wt,hn,Jt,0),Ie}function D(Oe,it,Ke,Xe,Pt){var xt,Ie;if(Pt===St(Oe,it,Ke,Xe)>0)for(xt=it;xt<Ke;xt+=Xe)Ie=ut(xt,Oe[xt],Oe[xt+1],Ie);else for(xt=Ke-Xe;xt>=it;xt-=Xe)Ie=ut(xt,Oe[xt],Oe[xt+1],Ie);return Ie&&Je(Ie,Ie.next)&&(Qt(Ie),Ie=Ie.next),Ie}function q(Oe,it){if(!Oe)return Oe;it||(it=Oe);var Ke=Oe,Xe;do if(Xe=!1,!Ke.steiner&&(Je(Ke,Ke.next)||et(Ke.prev,Ke,Ke.next)===0)){if(Qt(Ke),Ke=it=Ke.prev,Ke===Ke.next)break;Xe=!0}else Ke=Ke.next;while(Xe||Ke!==it);return it}function G(Oe,it,Ke,Xe,Pt,xt,Ie){if(Oe){!Ie&&xt&&me(Oe,Xe,Pt,xt);for(var Wt=Oe,hn,Pn;Oe.prev!==Oe.next;){if(hn=Oe.prev,Pn=Oe.next,xt?he(Oe,Xe,Pt,xt):E(Oe)){it.push(hn.i/Ke|0),it.push(Oe.i/Ke|0),it.push(Pn.i/Ke|0),Qt(Oe),Oe=Pn.next,Wt=Pn.next;continue}if(Oe=Pn,Oe===Wt){Ie?Ie===1?(Oe=ne(q(Oe),it,Ke),G(Oe,it,Ke,Xe,Pt,xt,2)):Ie===2&&ue(Oe,it,Ke,Xe,Pt,xt):G(q(Oe),it,Ke,Xe,Pt,xt,1);break}}}}function E(Oe){var it=Oe.prev,Ke=Oe,Xe=Oe.next;if(et(it,Ke,Xe)>=0)return!1;for(var Pt=it.x,xt=Ke.x,Ie=Xe.x,Wt=it.y,hn=Ke.y,Pn=Xe.y,$n=Pt<xt?Pt<Ie?Pt:Ie:xt<Ie?xt:Ie,nr=Wt<hn?Wt<Pn?Wt:Pn:hn<Pn?hn:Pn,Ft=Pt>xt?Pt>Ie?Pt:Ie:xt>Ie?xt:Ie,Jt=Wt>hn?Wt>Pn?Wt:Pn:hn>Pn?hn:Pn,ln=Xe.next;ln!==it;){if(ln.x>=$n&&ln.x<=Ft&&ln.y>=nr&&ln.y<=Jt&&K(Pt,Wt,xt,hn,Ie,Pn,ln.x,ln.y)&&et(ln.prev,ln,ln.next)>=0)return!1;ln=ln.next}return!0}function he(Oe,it,Ke,Xe){var Pt=Oe.prev,xt=Oe,Ie=Oe.next;if(et(Pt,xt,Ie)>=0)return!1;for(var Wt=Pt.x,hn=xt.x,Pn=Ie.x,$n=Pt.y,nr=xt.y,Ft=Ie.y,Jt=Wt<hn?Wt<Pn?Wt:Pn:hn<Pn?hn:Pn,ln=$n<nr?$n<Ft?$n:Ft:nr<Ft?nr:Ft,Un=Wt>hn?Wt>Pn?Wt:Pn:hn>Pn?hn:Pn,on=$n>nr?$n>Ft?$n:Ft:nr>Ft?nr:Ft,zt=Y(Jt,ln,it,Ke,Xe),kt=Y(Un,on,it,Ke,Xe),ke=Oe.prevZ,nt=Oe.nextZ;ke&&ke.z>=zt&&nt&&nt.z<=kt;){if(ke.x>=Jt&&ke.x<=Un&&ke.y>=ln&&ke.y<=on&&ke!==Pt&&ke!==Ie&&K(Wt,$n,hn,nr,Pn,Ft,ke.x,ke.y)&&et(ke.prev,ke,ke.next)>=0||(ke=ke.prevZ,nt.x>=Jt&&nt.x<=Un&&nt.y>=ln&&nt.y<=on&&nt!==Pt&&nt!==Ie&&K(Wt,$n,hn,nr,Pn,Ft,nt.x,nt.y)&&et(nt.prev,nt,nt.next)>=0))return!1;nt=nt.nextZ}for(;ke&&ke.z>=zt;){if(ke.x>=Jt&&ke.x<=Un&&ke.y>=ln&&ke.y<=on&&ke!==Pt&&ke!==Ie&&K(Wt,$n,hn,nr,Pn,Ft,ke.x,ke.y)&&et(ke.prev,ke,ke.next)>=0)return!1;ke=ke.prevZ}for(;nt&&nt.z<=kt;){if(nt.x>=Jt&&nt.x<=Un&&nt.y>=ln&&nt.y<=on&&nt!==Pt&&nt!==Ie&&K(Wt,$n,hn,nr,Pn,Ft,nt.x,nt.y)&&et(nt.prev,nt,nt.next)>=0)return!1;nt=nt.nextZ}return!0}function ne(Oe,it,Ke){var Xe=Oe;do{var Pt=Xe.prev,xt=Xe.next.next;!Je(Pt,xt)&&Ot(Pt,Xe,Xe.next,xt)&&we(Pt,xt)&&we(xt,Pt)&&(it.push(Pt.i/Ke|0),it.push(Xe.i/Ke|0),it.push(xt.i/Ke|0),Qt(Xe),Qt(Xe.next),Xe=Oe=xt),Xe=Xe.next}while(Xe!==Oe);return q(Xe)}function ue(Oe,it,Ke,Xe,Pt,xt){var Ie=Oe;do{for(var Wt=Ie.next.next;Wt!==Ie.prev;){if(Ie.i!==Wt.i&&_e(Ie,Wt)){var hn=Ze(Ie,Wt);Ie=q(Ie,Ie.next),hn=q(hn,hn.next),G(Ie,it,Ke,Xe,Pt,xt,0),G(hn,it,Ke,Xe,Pt,xt,0);return}Wt=Wt.next}Ie=Ie.next}while(Ie!==Oe)}function ce(Oe,it,Ke,Xe){var Pt=[],xt,Ie,Wt,hn,Pn;for(xt=0,Ie=it.length;xt<Ie;xt++)Wt=it[xt]*Xe,hn=xt<Ie-1?it[xt+1]*Xe:Oe.length,Pn=D(Oe,Wt,hn,Xe,!1),Pn===Pn.next&&(Pn.steiner=!0),Pt.push(le(Pn));for(Pt.sort(xe),xt=0;xt<Pt.length;xt++)Ke=oe(Pt[xt],Ke);return Ke}function xe(Oe,it){return Oe.x-it.x}function oe(Oe,it){var Ke=Ve(Oe,it);if(!Ke)return it;var Xe=Ze(Ke,Oe);return q(Xe,Xe.next),q(Ke,Ke.next)}function Ve(Oe,it){var Ke=it,Xe=Oe.x,Pt=Oe.y,xt=-1/0,Ie;do{if(Pt<=Ke.y&&Pt>=Ke.next.y&&Ke.next.y!==Ke.y){var Wt=Ke.x+(Pt-Ke.y)*(Ke.next.x-Ke.x)/(Ke.next.y-Ke.y);if(Wt<=Xe&&Wt>xt&&(xt=Wt,Ie=Ke.x<Ke.next.x?Ke:Ke.next,Wt===Xe))return Ie}Ke=Ke.next}while(Ke!==it);if(!Ie)return null;var hn=Ie,Pn=Ie.x,$n=Ie.y,nr=1/0,Ft;Ke=Ie;do Xe>=Ke.x&&Ke.x>=Pn&&Xe!==Ke.x&&K(Pt<$n?Xe:xt,Pt,Pn,$n,Pt<$n?xt:Xe,Pt,Ke.x,Ke.y)&&(Ft=Math.abs(Pt-Ke.y)/(Xe-Ke.x),we(Ke,Oe)&&(Ft<nr||Ft===nr&&(Ke.x>Ie.x||Ke.x===Ie.x&&re(Ie,Ke)))&&(Ie=Ke,nr=Ft)),Ke=Ke.next;while(Ke!==hn);return Ie}function re(Oe,it){return et(Oe.prev,Oe,it.prev)<0&&et(it.next,Oe,Oe.next)<0}function me(Oe,it,Ke,Xe){var Pt=Oe;do Pt.z===0&&(Pt.z=Y(Pt.x,Pt.y,it,Ke,Xe)),Pt.prevZ=Pt.prev,Pt.nextZ=Pt.next,Pt=Pt.next;while(Pt!==Oe);Pt.prevZ.nextZ=null,Pt.prevZ=null,Re(Pt)}function Re(Oe){var it,Ke,Xe,Pt,xt,Ie,Wt,hn,Pn=1;do{for(Ke=Oe,Oe=null,xt=null,Ie=0;Ke;){for(Ie++,Xe=Ke,Wt=0,it=0;it<Pn&&(Wt++,Xe=Xe.nextZ,!!Xe);it++);for(hn=Pn;Wt>0||hn>0&&Xe;)Wt!==0&&(hn===0||!Xe||Ke.z<=Xe.z)?(Pt=Ke,Ke=Ke.nextZ,Wt--):(Pt=Xe,Xe=Xe.nextZ,hn--),xt?xt.nextZ=Pt:Oe=Pt,Pt.prevZ=xt,xt=Pt;Ke=Xe}xt.nextZ=null,Pn*=2}while(Ie>1);return Oe}function Y(Oe,it,Ke,Xe,Pt){return Oe=(Oe-Ke)*Pt|0,it=(it-Xe)*Pt|0,Oe=(Oe|Oe<<8)&16711935,Oe=(Oe|Oe<<4)&252645135,Oe=(Oe|Oe<<2)&858993459,Oe=(Oe|Oe<<1)&1431655765,it=(it|it<<8)&16711935,it=(it|it<<4)&252645135,it=(it|it<<2)&858993459,it=(it|it<<1)&1431655765,Oe|it<<1}function le(Oe){var it=Oe,Ke=Oe;do(it.x<Ke.x||it.x===Ke.x&&it.y<Ke.y)&&(Ke=it),it=it.next;while(it!==Oe);return Ke}function K(Oe,it,Ke,Xe,Pt,xt,Ie,Wt){return(Pt-Ie)*(it-Wt)>=(Oe-Ie)*(xt-Wt)&&(Oe-Ie)*(Xe-Wt)>=(Ke-Ie)*(it-Wt)&&(Ke-Ie)*(xt-Wt)>=(Pt-Ie)*(Xe-Wt)}function _e(Oe,it){return Oe.next.i!==it.i&&Oe.prev.i!==it.i&&!Me(Oe,it)&&(we(Oe,it)&&we(it,Oe)&&je(Oe,it)&&(et(Oe.prev,Oe,it.prev)||et(Oe,it.prev,it))||Je(Oe,it)&&et(Oe.prev,Oe,Oe.next)>0&&et(it.prev,it,it.next)>0)}function et(Oe,it,Ke){return(it.y-Oe.y)*(Ke.x-it.x)-(it.x-Oe.x)*(Ke.y-it.y)}function Je(Oe,it){return Oe.x===it.x&&Oe.y===it.y}function Ot(Oe,it,Ke,Xe){var Pt=bt(et(Oe,it,Ke)),xt=bt(et(Oe,it,Xe)),Ie=bt(et(Ke,Xe,Oe)),Wt=bt(et(Ke,Xe,it));return!!(Pt!==xt&&Ie!==Wt||Pt===0&&dt(Oe,Ke,it)||xt===0&&dt(Oe,Xe,it)||Ie===0&&dt(Ke,Oe,Xe)||Wt===0&&dt(Ke,it,Xe))}function dt(Oe,it,Ke){return it.x<=Math.max(Oe.x,Ke.x)&&it.x>=Math.min(Oe.x,Ke.x)&&it.y<=Math.max(Oe.y,Ke.y)&&it.y>=Math.min(Oe.y,Ke.y)}function bt(Oe){return Oe>0?1:Oe<0?-1:0}function Me(Oe,it){var Ke=Oe;do{if(Ke.i!==Oe.i&&Ke.next.i!==Oe.i&&Ke.i!==it.i&&Ke.next.i!==it.i&&Ot(Ke,Ke.next,Oe,it))return!0;Ke=Ke.next}while(Ke!==Oe);return!1}function we(Oe,it){return et(Oe.prev,Oe,Oe.next)<0?et(Oe,it,Oe.next)>=0&&et(Oe,Oe.prev,it)>=0:et(Oe,it,Oe.prev)<0||et(Oe,Oe.next,it)<0}function je(Oe,it){var Ke=Oe,Xe=!1,Pt=(Oe.x+it.x)/2,xt=(Oe.y+it.y)/2;do Ke.y>xt!=Ke.next.y>xt&&Ke.next.y!==Ke.y&&Pt<(Ke.next.x-Ke.x)*(xt-Ke.y)/(Ke.next.y-Ke.y)+Ke.x&&(Xe=!Xe),Ke=Ke.next;while(Ke!==Oe);return Xe}function Ze(Oe,it){var Ke=new De(Oe.i,Oe.x,Oe.y),Xe=new De(it.i,it.x,it.y),Pt=Oe.next,xt=it.prev;return Oe.next=it,it.prev=Oe,Ke.next=Pt,Pt.prev=Ke,Xe.next=Ke,Ke.prev=Xe,xt.next=Xe,Xe.prev=xt,Xe}function ut(Oe,it,Ke,Xe){var Pt=new De(Oe,it,Ke);return Xe?(Pt.next=Xe.next,Pt.prev=Xe,Xe.next.prev=Pt,Xe.next=Pt):(Pt.prev=Pt,Pt.next=Pt),Pt}function Qt(Oe){Oe.next.prev=Oe.prev,Oe.prev.next=Oe.next,Oe.prevZ&&(Oe.prevZ.nextZ=Oe.nextZ),Oe.nextZ&&(Oe.nextZ.prevZ=Oe.prevZ)}function De(Oe,it,Ke){this.i=Oe,this.x=it,this.y=Ke,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}W.deviation=function(Oe,it,Ke,Xe){var Pt=it&&it.length,xt=Pt?it[0]*Ke:Oe.length,Ie=Math.abs(St(Oe,0,xt,Ke));if(Pt)for(var Wt=0,hn=it.length;Wt<hn;Wt++){var Pn=it[Wt]*Ke,$n=Wt<hn-1?it[Wt+1]*Ke:Oe.length;Ie-=Math.abs(St(Oe,Pn,$n,Ke))}var nr=0;for(Wt=0;Wt<Xe.length;Wt+=3){var Ft=Xe[Wt]*Ke,Jt=Xe[Wt+1]*Ke,ln=Xe[Wt+2]*Ke;nr+=Math.abs((Oe[Ft]-Oe[ln])*(Oe[Jt+1]-Oe[Ft+1])-(Oe[Ft]-Oe[Jt])*(Oe[ln+1]-Oe[Ft+1]))}return Ie===0&&nr===0?0:Math.abs((nr-Ie)/Ie)};function St(Oe,it,Ke,Xe){for(var Pt=0,xt=it,Ie=Ke-Xe;xt<Ke;xt+=Xe)Pt+=(Oe[Ie]-Oe[xt])*(Oe[xt+1]+Oe[Ie+1]),Ie=xt;return Pt}W.flatten=function(Oe){for(var it=Oe[0][0].length,Ke={vertices:[],holes:[],dimensions:it},Xe=0,Pt=0;Pt<Oe.length;Pt++){for(var xt=0;xt<Oe[Pt].length;xt++)for(var Ie=0;Ie<it;Ie++)Ke.vertices.push(Oe[Pt][xt][Ie]);Pt>0&&(Xe+=Oe[Pt-1].length,Ke.holes.push(Xe))}return Ke}},2268:function(mt){"use strict";var W=mt.exports={};W.isIE=function(D){function q(){var E=navigator.userAgent.toLowerCase();return E.indexOf("msie")!==-1||E.indexOf("trident")!==-1||E.indexOf(" edge/")!==-1}if(!q())return!1;if(!D)return!0;var G=function(){var E,he=3,ne=document.createElement("div"),ue=ne.getElementsByTagName("i");do ne.innerHTML="<!--[if gt IE "+ ++he+"]><i></i><![endif]-->";while(ue[0]);return he>4?he:E}();return D===G},W.isLegacyOpera=function(){return!!window.opera}},17900:function(mt){"use strict";var W=mt.exports={};W.forEach=function(D,q){for(var G=0;G<D.length;G++){var E=q(D[G]);if(E)return E}}},58229:function(mt,W,D){"use strict";var q=D(2268);mt.exports=function(G){G=G||{};var E=G.reporter,he=G.batchProcessor,ne=G.stateHandler.getState;if(!E)throw new Error("Missing required dependency: reporter.");function ue(re,me){function Re(){me(re)}if(q.isIE(8))ne(re).object={proxy:Re},re.attachEvent("onresize",Re);else{var Y=oe(re);if(!Y)throw new Error("Element is not detectable by this strategy.");Y.contentDocument.defaultView.addEventListener("resize",Re)}}function ce(re){var me=G.important?" !important; ":"; ";return(re.join(me)+me).trim()}function xe(re,me,Re){Re||(Re=me,me=re,re=null),re=re||{};var Y=re.debug;function le(K,_e){var et=ce(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Je=!1,Ot=window.getComputedStyle(K),dt=K.offsetWidth,bt=K.offsetHeight;ne(K).startSize={width:dt,height:bt};function Me(){function we(){if(Ot.position==="static"){K.style.setProperty("position","relative",re.important?"important":"");var ut=function(Qt,De,St,Oe){function it(Xe){return Xe.replace(/[^-\d\.]/g,"")}var Ke=St[Oe];Ke!=="auto"&&it(Ke)!=="0"&&(Qt.warn("An element that is positioned static has style."+Oe+"="+Ke+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Oe+" will be set to 0. Element: ",De),De.style.setProperty(Oe,"0",re.important?"important":""))};ut(E,K,Ot,"top"),ut(E,K,Ot,"right"),ut(E,K,Ot,"bottom"),ut(E,K,Ot,"left")}}function je(){Je||we();function ut(De,St){if(!De.contentDocument){var Oe=ne(De);Oe.checkForObjectDocumentTimeoutId&&window.clearTimeout(Oe.checkForObjectDocumentTimeoutId),Oe.checkForObjectDocumentTimeoutId=setTimeout(function(){Oe.checkForObjectDocumentTimeoutId=0,ut(De,St)},100);return}St(De.contentDocument)}var Qt=this;ut(Qt,function(St){_e(K)})}Ot.position!==""&&(we(Ot),Je=!0);var Ze=document.createElement("object");Ze.style.cssText=et,Ze.tabIndex=-1,Ze.type="text/html",Ze.setAttribute("aria-hidden","true"),Ze.onload=je,q.isIE()||(Ze.data="about:blank"),ne(K)&&(K.appendChild(Ze),ne(K).object=Ze,q.isIE()&&(Ze.data="about:blank"))}he?he.add(Me):Me()}q.isIE(8)?Re(me):le(me,Re)}function oe(re){return ne(re).object}function Ve(re){if(ne(re)){var me=oe(re);me&&(q.isIE(8)?re.detachEvent("onresize",me.proxy):re.removeChild(me),ne(re).checkForObjectDocumentTimeoutId&&window.clearTimeout(ne(re).checkForObjectDocumentTimeoutId),delete ne(re).object)}}return{makeDetectable:xe,addListener:ue,uninstall:Ve}}},60787:function(mt,W,D){"use strict";var q=D(17900).forEach;mt.exports=function(G){G=G||{};var E=G.reporter,he=G.batchProcessor,ne=G.stateHandler.getState,ue=G.stateHandler.hasState,ce=G.idHandler;if(!he)throw new Error("Missing required dependency: batchProcessor");if(!E)throw new Error("Missing required dependency: reporter.");var xe=Re(),oe="erd_scroll_detection_scrollbar_style",Ve="erd_scroll_detection_container";function re(Me){Y(Me,oe,Ve)}re(window.document);function me(Me){var we=G.important?" !important; ":"; ";return(Me.join(we)+we).trim()}function Re(){var Me=500,we=500,je=document.createElement("div");je.style.cssText=me(["position: absolute","width: "+Me*2+"px","height: "+we*2+"px","visibility: hidden","margin: 0","padding: 0"]);var Ze=document.createElement("div");Ze.style.cssText=me(["position: absolute","width: "+Me+"px","height: "+we+"px","overflow: scroll","visibility: none","top: "+-Me*3+"px","left: "+-we*3+"px","visibility: hidden","margin: 0","padding: 0"]),Ze.appendChild(je),document.body.insertBefore(Ze,document.body.firstChild);var ut=Me-Ze.clientWidth,Qt=we-Ze.clientHeight;return document.body.removeChild(Ze),{width:ut,height:Qt}}function Y(Me,we,je){function Ze(St,Oe){Oe=Oe||function(Ke){Me.head.appendChild(Ke)};var it=Me.createElement("style");return it.innerHTML=St,it.id=we,Oe(it),it}if(!Me.getElementById(we)){var ut=je+"_animation",Qt=je+"_animation_active",De=`/* Created by the element-resize-detector library. */
`;De+="."+je+" > div::-webkit-scrollbar { "+me(["display: none"])+` }

`,De+="."+Qt+" { "+me(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+ut,"animation-name: "+ut])+` }
`,De+="@-webkit-keyframes "+ut+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,De+="@keyframes "+ut+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",Ze(De)}}function le(Me){Me.className+=" "+Ve+"_animation_active"}function K(Me,we,je){if(Me.addEventListener)Me.addEventListener(we,je);else if(Me.attachEvent)Me.attachEvent("on"+we,je);else return E.error("[scroll] Don't know how to add event listeners.")}function _e(Me,we,je){if(Me.removeEventListener)Me.removeEventListener(we,je);else if(Me.detachEvent)Me.detachEvent("on"+we,je);else return E.error("[scroll] Don't know how to remove event listeners.")}function et(Me){return ne(Me).container.childNodes[0].childNodes[0].childNodes[0]}function Je(Me){return ne(Me).container.childNodes[0].childNodes[0].childNodes[1]}function Ot(Me,we){var je=ne(Me).listeners;if(!je.push)throw new Error("Cannot add listener to an element that is not detectable.");ne(Me).listeners.push(we)}function dt(Me,we,je){je||(je=we,we=Me,Me=null),Me=Me||{};function Ze(){if(Me.debug){var zt=Array.prototype.slice.call(arguments);if(zt.unshift(ce.get(we),"Scroll: "),E.log.apply)E.log.apply(null,zt);else for(var kt=0;kt<zt.length;kt++)E.log(zt[kt])}}function ut(zt){function kt(ke){var nt=ke.getRootNode&&ke.getRootNode().contains(ke);return ke===ke.ownerDocument.body||ke.ownerDocument.body.contains(ke)||nt}return!kt(zt)||window.getComputedStyle(zt)===null}function Qt(zt){var kt=ne(zt).container.childNodes[0],ke=window.getComputedStyle(kt);return!ke.width||ke.width.indexOf("px")===-1}function De(){var zt=window.getComputedStyle(we),kt={};return kt.position=zt.position,kt.width=we.offsetWidth,kt.height=we.offsetHeight,kt.top=zt.top,kt.right=zt.right,kt.bottom=zt.bottom,kt.left=zt.left,kt.widthCSS=zt.width,kt.heightCSS=zt.height,kt}function St(){var zt=De();ne(we).startSize={width:zt.width,height:zt.height},Ze("Element start size",ne(we).startSize)}function Oe(){ne(we).listeners=[]}function it(){if(Ze("storeStyle invoked."),!ne(we)){Ze("Aborting because element has been uninstalled");return}var zt=De();ne(we).style=zt}function Ke(zt,kt,ke){ne(zt).lastWidth=kt,ne(zt).lastHeight=ke}function Xe(zt){return et(zt).childNodes[0]}function Pt(){return 2*xe.width+1}function xt(){return 2*xe.height+1}function Ie(zt){return zt+10+Pt()}function Wt(zt){return zt+10+xt()}function hn(zt){return zt*2+Pt()}function Pn(zt){return zt*2+xt()}function $n(zt,kt,ke){var nt=et(zt),Vt=Je(zt),U=Ie(kt),pe=Wt(ke),ct=hn(kt),de=Pn(ke);nt.scrollLeft=U,nt.scrollTop=pe,Vt.scrollLeft=ct,Vt.scrollTop=de}function nr(){var zt=ne(we).container;if(!zt){zt=document.createElement("div"),zt.className=Ve,zt.style.cssText=me(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),ne(we).container=zt,le(zt),we.appendChild(zt);var kt=function(){ne(we).onRendered&&ne(we).onRendered()};K(zt,"animationstart",kt),ne(we).onAnimationStart=kt}return zt}function Ft(){function zt(){var In=ne(we).style;if(In.position==="static"){we.style.setProperty("position","relative",Me.important?"important":"");var Zn=function(vt,Ee,Fe,st){function It(En){return En.replace(/[^-\d\.]/g,"")}var Mt=Fe[st];Mt!=="auto"&&It(Mt)!=="0"&&(vt.warn("An element that is positioned static has style."+st+"="+Mt+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+st+" will be set to 0. Element: ",Ee),Ee.style[st]=0)};Zn(E,we,In,"top"),Zn(E,we,In,"right"),Zn(E,we,In,"bottom"),Zn(E,we,In,"left")}}function kt(In,Zn,vt,Ee){return In=In?In+"px":"0",Zn=Zn?Zn+"px":"0",vt=vt?vt+"px":"0",Ee=Ee?Ee+"px":"0",["left: "+In,"top: "+Zn,"right: "+Ee,"bottom: "+vt]}if(Ze("Injecting elements"),!ne(we)){Ze("Aborting because element has been uninstalled");return}zt();var ke=ne(we).container;ke||(ke=nr());var nt=xe.width,Vt=xe.height,U=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),pe=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(kt(-(1+nt),-(1+Vt),-Vt,-nt))),ct=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),de=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Yt=me(["position: absolute","left: 0","top: 0"]),sn=me(["position: absolute","width: 200%","height: 200%"]),pn=document.createElement("div"),Dn=document.createElement("div"),Wn=document.createElement("div"),Xn=document.createElement("div"),dn=document.createElement("div"),_t=document.createElement("div");pn.dir="ltr",pn.style.cssText=U,pn.className=Ve,Dn.className=Ve,Dn.style.cssText=pe,Wn.style.cssText=ct,Xn.style.cssText=Yt,dn.style.cssText=de,_t.style.cssText=sn,Wn.appendChild(Xn),dn.appendChild(_t),Dn.appendChild(Wn),Dn.appendChild(dn),pn.appendChild(Dn),ke.appendChild(pn);function Rt(){var In=ne(we);In&&In.onExpand?In.onExpand():Ze("Aborting expand scroll handler: element has been uninstalled")}function wn(){var In=ne(we);In&&In.onShrink?In.onShrink():Ze("Aborting shrink scroll handler: element has been uninstalled")}K(Wn,"scroll",Rt),K(dn,"scroll",wn),ne(we).onExpandScroll=Rt,ne(we).onShrinkScroll=wn}function Jt(){function zt(ct,de,Yt){var sn=Xe(ct),pn=Ie(de),Dn=Wt(Yt);sn.style.setProperty("width",pn+"px",Me.important?"important":""),sn.style.setProperty("height",Dn+"px",Me.important?"important":"")}function kt(ct){var de=we.offsetWidth,Yt=we.offsetHeight,sn=de!==ne(we).lastWidth||Yt!==ne(we).lastHeight;Ze("Storing current size",de,Yt),Ke(we,de,Yt),he.add(0,function(){if(sn){if(!ne(we)){Ze("Aborting because element has been uninstalled");return}if(!ke()){Ze("Aborting because element container has not been initialized");return}if(Me.debug){var Dn=we.offsetWidth,Wn=we.offsetHeight;(Dn!==de||Wn!==Yt)&&E.warn(ce.get(we),"Scroll: Size changed before updating detector elements.")}zt(we,de,Yt)}}),he.add(1,function(){if(!ne(we)){Ze("Aborting because element has been uninstalled");return}if(!ke()){Ze("Aborting because element container has not been initialized");return}$n(we,de,Yt)}),sn&&ct&&he.add(2,function(){if(!ne(we)){Ze("Aborting because element has been uninstalled");return}if(!ke()){Ze("Aborting because element container has not been initialized");return}ct()})}function ke(){return!!ne(we).container}function nt(){function ct(){return ne(we).lastNotifiedWidth===void 0}Ze("notifyListenersIfNeeded invoked");var de=ne(we);if(ct()&&de.lastWidth===de.startSize.width&&de.lastHeight===de.startSize.height)return Ze("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(de.lastWidth===de.lastNotifiedWidth&&de.lastHeight===de.lastNotifiedHeight)return Ze("Not notifying: Size already notified");Ze("Current size not notified, notifying..."),de.lastNotifiedWidth=de.lastWidth,de.lastNotifiedHeight=de.lastHeight,q(ne(we).listeners,function(Yt){Yt(we)})}function Vt(){if(Ze("startanimation triggered."),Qt(we)){Ze("Ignoring since element is still unrendered...");return}Ze("Element rendered.");var ct=et(we),de=Je(we);(ct.scrollLeft===0||ct.scrollTop===0||de.scrollLeft===0||de.scrollTop===0)&&(Ze("Scrollbars out of sync. Updating detector elements..."),kt(nt))}function U(){if(Ze("Scroll detected."),Qt(we)){Ze("Scroll event fired while unrendered. Ignoring...");return}kt(nt)}if(Ze("registerListenersAndPositionElements invoked."),!ne(we)){Ze("Aborting because element has been uninstalled");return}ne(we).onRendered=Vt,ne(we).onExpand=U,ne(we).onShrink=U;var pe=ne(we).style;zt(we,pe.width,pe.height)}function ln(){if(Ze("finalizeDomMutation invoked."),!ne(we)){Ze("Aborting because element has been uninstalled");return}var zt=ne(we).style;Ke(we,zt.width,zt.height),$n(we,zt.width,zt.height)}function Un(){je(we)}function on(){Ze("Installing..."),Oe(),St(),he.add(0,it),he.add(1,Ft),he.add(2,Jt),he.add(3,ln),he.add(4,Un)}Ze("Making detectable..."),ut(we)?(Ze("Element is detached"),nr(),Ze("Waiting until element is attached..."),ne(we).onRendered=function(){Ze("Element is now attached"),on()}):on()}function bt(Me){var we=ne(Me);we&&(we.onExpandScroll&&_e(et(Me),"scroll",we.onExpandScroll),we.onShrinkScroll&&_e(Je(Me),"scroll",we.onShrinkScroll),we.onAnimationStart&&_e(we.container,"animationstart",we.onAnimationStart),we.container&&Me.removeChild(we.container))}return{makeDetectable:dt,addListener:Ot,uninstall:bt,initDocument:re}}},63844:function(mt,W,D){"use strict";var q=D(17900).forEach,G=D(68452),E=D(96199),he=D(75805),ne=D(79799),ue=D(71724),ce=D(2268),xe=D(98129),oe=D(21931),Ve=D(58229),re=D(60787);function me(K){return Array.isArray(K)||K.length!==void 0}function Re(K){if(Array.isArray(K))return K;var _e=[];return q(K,function(et){_e.push(et)}),_e}function Y(K){return K&&K.nodeType===1}mt.exports=function(K){K=K||{};var _e;if(K.idHandler)_e={get:function(Xe){return K.idHandler.get(Xe,!0)},set:K.idHandler.set};else{var et=he(),Je=ne({idGenerator:et,stateHandler:oe});_e=Je}var Ot=K.reporter;if(!Ot){var dt=Ot===!1;Ot=ue(dt)}var bt=le(K,"batchProcessor",xe({reporter:Ot})),Me={};Me.callOnAdd=!!le(K,"callOnAdd",!0),Me.debug=!!le(K,"debug",!1);var we=E(_e),je=G({stateHandler:oe}),Ze,ut=le(K,"strategy","object"),Qt=le(K,"important",!1),De={reporter:Ot,batchProcessor:bt,stateHandler:oe,idHandler:_e,important:Qt};if(ut==="scroll"&&(ce.isLegacyOpera()?(Ot.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),ut="object"):ce.isIE(9)&&(Ot.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),ut="object")),ut==="scroll")Ze=re(De);else if(ut==="object")Ze=Ve(De);else throw new Error("Invalid strategy name: "+ut);var St={};function Oe(Xe,Pt,xt){function Ie(Ft){var Jt=we.get(Ft);q(Jt,function(Un){Un(Ft)})}function Wt(Ft,Jt,ln){we.add(Jt,ln),Ft&&ln(Jt)}if(xt||(xt=Pt,Pt=Xe,Xe={}),!Pt)throw new Error("At least one element required.");if(!xt)throw new Error("Listener required.");if(Y(Pt))Pt=[Pt];else if(me(Pt))Pt=Re(Pt);else return Ot.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var hn=0,Pn=le(Xe,"callOnAdd",Me.callOnAdd),$n=le(Xe,"onReady",function(){}),nr=le(Xe,"debug",Me.debug);q(Pt,function(Jt){oe.getState(Jt)||(oe.initState(Jt),_e.set(Jt));var ln=_e.get(Jt);if(nr&&Ot.log("Attaching listener to element",ln,Jt),!je.isDetectable(Jt)){if(nr&&Ot.log(ln,"Not detectable."),je.isBusy(Jt)){nr&&Ot.log(ln,"System busy making it detectable"),Wt(Pn,Jt,xt),St[ln]=St[ln]||[],St[ln].push(function(){hn++,hn===Pt.length&&$n()});return}return nr&&Ot.log(ln,"Making detectable..."),je.markBusy(Jt,!0),Ze.makeDetectable({debug:nr,important:Qt},Jt,function(on){if(nr&&Ot.log(ln,"onElementDetectable"),oe.getState(on)){je.markAsDetectable(on),je.markBusy(on,!1),Ze.addListener(on,Ie),Wt(Pn,on,xt);var zt=oe.getState(on);if(zt&&zt.startSize){var kt=on.offsetWidth,ke=on.offsetHeight;(zt.startSize.width!==kt||zt.startSize.height!==ke)&&Ie(on)}St[ln]&&q(St[ln],function(nt){nt()})}else nr&&Ot.log(ln,"Element uninstalled before being detectable.");delete St[ln],hn++,hn===Pt.length&&$n()})}nr&&Ot.log(ln,"Already detecable, adding listener."),Wt(Pn,Jt,xt),hn++}),hn===Pt.length&&$n()}function it(Xe){if(!Xe)return Ot.error("At least one element is required.");if(Y(Xe))Xe=[Xe];else if(me(Xe))Xe=Re(Xe);else return Ot.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");q(Xe,function(Pt){we.removeAllListeners(Pt),Ze.uninstall(Pt),oe.cleanState(Pt)})}function Ke(Xe){Ze.initDocument&&Ze.initDocument(Xe)}return{listenTo:Oe,removeListener:we.removeListener,removeAllListeners:we.removeAllListeners,uninstall:it,initDocument:Ke}};function le(K,_e,et){var Je=K[_e];return Je==null&&et!==void 0?et:Je}},68452:function(mt){"use strict";mt.exports=function(W){var D=W.stateHandler.getState;function q(ne){var ue=D(ne);return ue&&!!ue.isDetectable}function G(ne){D(ne).isDetectable=!0}function E(ne){return!!D(ne).busy}function he(ne,ue){D(ne).busy=!!ue}return{isDetectable:q,markAsDetectable:G,isBusy:E,markBusy:he}}},75805:function(mt){"use strict";mt.exports=function(){var W=1;function D(){return W++}return{generate:D}}},79799:function(mt){"use strict";mt.exports=function(W){var D=W.idGenerator,q=W.stateHandler.getState;function G(he){var ne=q(he);return ne&&ne.id!==void 0?ne.id:null}function E(he){var ne=q(he);if(!ne)throw new Error("setId required the element to have a resize detection state.");var ue=D.generate();return ne.id=ue,ue}return{get:G,set:E}}},96199:function(mt){"use strict";mt.exports=function(W){var D={};function q(ne){var ue=W.get(ne);return ue===void 0?[]:D[ue]||[]}function G(ne,ue){var ce=W.get(ne);D[ce]||(D[ce]=[]),D[ce].push(ue)}function E(ne,ue){for(var ce=q(ne),xe=0,oe=ce.length;xe<oe;++xe)if(ce[xe]===ue){ce.splice(xe,1);break}}function he(ne){var ue=q(ne);ue&&(ue.length=0)}return{get:q,add:G,removeListener:E,removeAllListeners:he}}},71724:function(mt){"use strict";mt.exports=function(W){function D(){}var q={log:D,warn:D,error:D};if(!W&&window.console){var G=function(E,he){E[he]=function(){var ue=console[he];if(ue.apply)ue.apply(console,arguments);else for(var ce=0;ce<arguments.length;ce++)ue(arguments[ce])}};G(q,"log"),G(q,"warn"),G(q,"error")}return q}},21931:function(mt){"use strict";var W="_erd";function D(E){return E[W]={},q(E)}function q(E){return E[W]}function G(E){delete E[W]}mt.exports={initState:D,getState:q,cleanState:G}},26729:function(mt){"use strict";var W=Object.prototype.hasOwnProperty,D="~";function q(){}Object.create&&(q.prototype=Object.create(null),new q().__proto__||(D=!1));function G(ue,ce,xe){this.fn=ue,this.context=ce,this.once=xe||!1}function E(ue,ce,xe,oe,Ve){if(typeof xe!="function")throw new TypeError("The listener must be a function");var re=new G(xe,oe||ue,Ve),me=D?D+ce:ce;return ue._events[me]?ue._events[me].fn?ue._events[me]=[ue._events[me],re]:ue._events[me].push(re):(ue._events[me]=re,ue._eventsCount++),ue}function he(ue,ce){--ue._eventsCount===0?ue._events=new q:delete ue._events[ce]}function ne(){this._events=new q,this._eventsCount=0}ne.prototype.eventNames=function(){var ce=[],xe,oe;if(this._eventsCount===0)return ce;for(oe in xe=this._events)W.call(xe,oe)&&ce.push(D?oe.slice(1):oe);return Object.getOwnPropertySymbols?ce.concat(Object.getOwnPropertySymbols(xe)):ce},ne.prototype.listeners=function(ce){var xe=D?D+ce:ce,oe=this._events[xe];if(!oe)return[];if(oe.fn)return[oe.fn];for(var Ve=0,re=oe.length,me=new Array(re);Ve<re;Ve++)me[Ve]=oe[Ve].fn;return me},ne.prototype.listenerCount=function(ce){var xe=D?D+ce:ce,oe=this._events[xe];return oe?oe.fn?1:oe.length:0},ne.prototype.emit=function(ce,xe,oe,Ve,re,me){var Re=D?D+ce:ce;if(!this._events[Re])return!1;var Y=this._events[Re],le=arguments.length,K,_e;if(Y.fn){switch(Y.once&&this.removeListener(ce,Y.fn,void 0,!0),le){case 1:return Y.fn.call(Y.context),!0;case 2:return Y.fn.call(Y.context,xe),!0;case 3:return Y.fn.call(Y.context,xe,oe),!0;case 4:return Y.fn.call(Y.context,xe,oe,Ve),!0;case 5:return Y.fn.call(Y.context,xe,oe,Ve,re),!0;case 6:return Y.fn.call(Y.context,xe,oe,Ve,re,me),!0}for(_e=1,K=new Array(le-1);_e<le;_e++)K[_e-1]=arguments[_e];Y.fn.apply(Y.context,K)}else{var et=Y.length,Je;for(_e=0;_e<et;_e++)switch(Y[_e].once&&this.removeListener(ce,Y[_e].fn,void 0,!0),le){case 1:Y[_e].fn.call(Y[_e].context);break;case 2:Y[_e].fn.call(Y[_e].context,xe);break;case 3:Y[_e].fn.call(Y[_e].context,xe,oe);break;case 4:Y[_e].fn.call(Y[_e].context,xe,oe,Ve);break;default:if(!K)for(Je=1,K=new Array(le-1);Je<le;Je++)K[Je-1]=arguments[Je];Y[_e].fn.apply(Y[_e].context,K)}}return!0},ne.prototype.on=function(ce,xe,oe){return E(this,ce,xe,oe,!1)},ne.prototype.once=function(ce,xe,oe){return E(this,ce,xe,oe,!0)},ne.prototype.removeListener=function(ce,xe,oe,Ve){var re=D?D+ce:ce;if(!this._events[re])return this;if(!xe)return he(this,re),this;var me=this._events[re];if(me.fn)me.fn===xe&&(!Ve||me.once)&&(!oe||me.context===oe)&&he(this,re);else{for(var Re=0,Y=[],le=me.length;Re<le;Re++)(me[Re].fn!==xe||Ve&&!me[Re].once||oe&&me[Re].context!==oe)&&Y.push(me[Re]);Y.length?this._events[re]=Y.length===1?Y[0]:Y:he(this,re)}return this},ne.prototype.removeAllListeners=function(ce){var xe;return ce?(xe=D?D+ce:ce,this._events[xe]&&he(this,xe)):(this._events=new q,this._eventsCount=0),this},ne.prototype.off=ne.prototype.removeListener,ne.prototype.addListener=ne.prototype.on,ne.prefixed=D,ne.EventEmitter=ne,mt.exports=ne},69916:function(mt,W){(function(D,q){q(W)})(this,function(D){"use strict";function q(Re,Y,le,K){K=K||{};var _e=K.maxIterations||100,et=K.tolerance||1e-10,Je=Re(Y),Ot=Re(le),dt=le-Y;if(Je*Ot>0)throw"Initial bisect points must have opposite signs";if(Je===0)return Y;if(Ot===0)return le;for(var bt=0;bt<_e;++bt){dt/=2;var Me=Y+dt,we=Re(Me);if(we*Je>=0&&(Y=Me),Math.abs(dt)<et||we===0)return Me}return Y+dt}function G(Re){for(var Y=new Array(Re),le=0;le<Re;++le)Y[le]=0;return Y}function E(Re,Y){return G(Re).map(function(){return G(Y)})}function he(Re,Y){for(var le=0,K=0;K<Re.length;++K)le+=Re[K]*Y[K];return le}function ne(Re){return Math.sqrt(he(Re,Re))}function ue(Re,Y,le){for(var K=0;K<Y.length;++K)Re[K]=Y[K]*le}function ce(Re,Y,le,K,_e){for(var et=0;et<Re.length;++et)Re[et]=Y*le[et]+K*_e[et]}function xe(Re,Y,le){le=le||{};var K=le.maxIterations||Y.length*200,_e=le.nonZeroDelta||1.05,et=le.zeroDelta||.001,Je=le.minErrorDelta||1e-6,Ot=le.minErrorDelta||1e-5,dt=le.rho!==void 0?le.rho:1,bt=le.chi!==void 0?le.chi:2,Me=le.psi!==void 0?le.psi:-.5,we=le.sigma!==void 0?le.sigma:.5,je,Ze=Y.length,ut=new Array(Ze+1);ut[0]=Y,ut[0].fx=Re(Y),ut[0].id=0;for(var Qt=0;Qt<Ze;++Qt){var De=Y.slice();De[Qt]=De[Qt]?De[Qt]*_e:et,ut[Qt+1]=De,ut[Qt+1].fx=Re(De),ut[Qt+1].id=Qt+1}function St($n){for(var nr=0;nr<$n.length;nr++)ut[Ze][nr]=$n[nr];ut[Ze].fx=$n.fx}for(var Oe=function($n,nr){return $n.fx-nr.fx},it=Y.slice(),Ke=Y.slice(),Xe=Y.slice(),Pt=Y.slice(),xt=0;xt<K;++xt){if(ut.sort(Oe),le.history){var Ie=ut.map(function($n){var nr=$n.slice();return nr.fx=$n.fx,nr.id=$n.id,nr});Ie.sort(function($n,nr){return $n.id-nr.id}),le.history.push({x:ut[0].slice(),fx:ut[0].fx,simplex:Ie})}for(je=0,Qt=0;Qt<Ze;++Qt)je=Math.max(je,Math.abs(ut[0][Qt]-ut[1][Qt]));if(Math.abs(ut[0].fx-ut[Ze].fx)<Je&&je<Ot)break;for(Qt=0;Qt<Ze;++Qt){it[Qt]=0;for(var Wt=0;Wt<Ze;++Wt)it[Qt]+=ut[Wt][Qt];it[Qt]/=Ze}var hn=ut[Ze];if(ce(Ke,1+dt,it,-dt,hn),Ke.fx=Re(Ke),Ke.fx<ut[0].fx)ce(Pt,1+bt,it,-bt,hn),Pt.fx=Re(Pt),Pt.fx<Ke.fx?St(Pt):St(Ke);else if(Ke.fx>=ut[Ze-1].fx){var Pn=!1;if(Ke.fx>hn.fx?(ce(Xe,1+Me,it,-Me,hn),Xe.fx=Re(Xe),Xe.fx<hn.fx?St(Xe):Pn=!0):(ce(Xe,1-Me*dt,it,Me*dt,hn),Xe.fx=Re(Xe),Xe.fx<Ke.fx?St(Xe):Pn=!0),Pn){if(we>=1)break;for(Qt=1;Qt<ut.length;++Qt)ce(ut[Qt],1-we,ut[0],we,ut[Qt]),ut[Qt].fx=Re(ut[Qt])}}else St(Ke)}return ut.sort(Oe),{fx:ut[0].fx,x:ut[0]}}function oe(Re,Y,le,K,_e,et,Je){var Ot=le.fx,dt=he(le.fxprime,Y),bt=Ot,Me=Ot,we=dt,je=0;_e=_e||1,et=et||1e-6,Je=Je||.1;function Ze(Qt,De,St){for(var Oe=0;Oe<16;++Oe)if(_e=(Qt+De)/2,ce(K.x,1,le.x,_e,Y),bt=K.fx=Re(K.x,K.fxprime),we=he(K.fxprime,Y),bt>Ot+et*_e*dt||bt>=St)De=_e;else{if(Math.abs(we)<=-Je*dt)return _e;we*(De-Qt)>=0&&(De=Qt),Qt=_e,St=bt}return 0}for(var ut=0;ut<10;++ut){if(ce(K.x,1,le.x,_e,Y),bt=K.fx=Re(K.x,K.fxprime),we=he(K.fxprime,Y),bt>Ot+et*_e*dt||ut&&bt>=Me)return Ze(je,_e,Me);if(Math.abs(we)<=-Je*dt)return _e;if(we>=0)return Ze(_e,je,bt);Me=bt,je=_e,_e*=2}return _e}function Ve(Re,Y,le){var K={x:Y.slice(),fx:0,fxprime:Y.slice()},_e={x:Y.slice(),fx:0,fxprime:Y.slice()},et=Y.slice(),Je,Ot,dt=1,bt;le=le||{},bt=le.maxIterations||Y.length*20,K.fx=Re(K.x,K.fxprime),Je=K.fxprime.slice(),ue(Je,K.fxprime,-1);for(var Me=0;Me<bt;++Me){if(dt=oe(Re,Je,K,_e,dt),le.history&&le.history.push({x:K.x.slice(),fx:K.fx,fxprime:K.fxprime.slice(),alpha:dt}),!dt)ue(Je,K.fxprime,-1);else{ce(et,1,_e.fxprime,-1,K.fxprime);var we=he(K.fxprime,K.fxprime),je=Math.max(0,he(et,_e.fxprime)/we);ce(Je,je,Je,-1,_e.fxprime),Ot=K,K=_e,_e=Ot}if(ne(K.fxprime)<=1e-5)break}return le.history&&le.history.push({x:K.x.slice(),fx:K.fx,fxprime:K.fxprime.slice(),alpha:dt}),K}function re(Re,Y,le){le=le||{};for(var K=le.maxIterations||Y.length*100,_e=le.learnRate||.001,et={x:Y.slice(),fx:0,fxprime:Y.slice()},Je=0;Je<K&&(et.fx=Re(et.x,et.fxprime),le.history&&le.history.push({x:et.x.slice(),fx:et.fx,fxprime:et.fxprime.slice()}),ce(et.x,1,et.x,-_e,et.fxprime),!(ne(et.fxprime)<=1e-5));++Je);return et}function me(Re,Y,le){le=le||{};var K={x:Y.slice(),fx:0,fxprime:Y.slice()},_e={x:Y.slice(),fx:0,fxprime:Y.slice()},et=le.maxIterations||Y.length*100,Je=le.learnRate||1,Ot=Y.slice(),dt=le.c1||.001,bt=le.c2||.1,Me,we=[];if(le.history){var je=Re;Re=function(ut,Qt){return we.push(ut.slice()),je(ut,Qt)}}K.fx=Re(K.x,K.fxprime);for(var Ze=0;Ze<et&&(ue(Ot,K.fxprime,-1),Je=oe(Re,Ot,K,_e,Je,dt,bt),le.history&&(le.history.push({x:K.x.slice(),fx:K.fx,fxprime:K.fxprime.slice(),functionCalls:we,learnRate:Je,alpha:Je}),we=[]),Me=K,K=_e,_e=Me,!(Je===0||ne(K.fxprime)<1e-5));++Ze);return K}D.bisect=q,D.nelderMead=xe,D.conjugateGradient=Ve,D.gradientDescent=re,D.gradientDescentLineSearch=me,D.zeros=G,D.zerosM=E,D.norm2=ne,D.weightedSum=ce,D.scale=ue})},49685:function(mt,W,D){"use strict";D.d(W,{Ib:function(){return q},WT:function(){return G}});var q=1e-6,G=typeof Float32Array!="undefined"?Float32Array:Array,E=Math.random;function he(xe){G=xe}var ne=Math.PI/180;function ue(xe){return xe*ne}function ce(xe,oe){return Math.abs(xe-oe)<=q*Math.max(1,Math.abs(xe),Math.abs(oe))}Math.hypot||(Math.hypot=function(){for(var xe=0,oe=arguments.length;oe--;)xe+=arguments[oe]*arguments[oe];return Math.sqrt(xe)})},85975:function(mt,W,D){"use strict";D.r(W),D.d(W,{add:function(){return ln},adjoint:function(){return Ve},clone:function(){return E},copy:function(){return he},create:function(){return G},determinant:function(){return re},equals:function(){return ke},exactEquals:function(){return kt},frob:function(){return Jt},fromQuat:function(){return it},fromQuat2:function(){return Ze},fromRotation:function(){return dt},fromRotationTranslation:function(){return je},fromRotationTranslationScale:function(){return St},fromRotationTranslationScaleOrigin:function(){return Oe},fromScaling:function(){return Ot},fromTranslation:function(){return Je},fromValues:function(){return ne},fromXRotation:function(){return bt},fromYRotation:function(){return Me},fromZRotation:function(){return we},frustum:function(){return Ke},getRotation:function(){return De},getScaling:function(){return Qt},getTranslation:function(){return ut},identity:function(){return ce},invert:function(){return oe},lookAt:function(){return $n},mul:function(){return nt},multiply:function(){return me},multiplyScalar:function(){return on},multiplyScalarAndAdd:function(){return zt},ortho:function(){return hn},orthoNO:function(){return Wt},orthoZO:function(){return Pn},perspective:function(){return Pt},perspectiveFromFieldOfView:function(){return Ie},perspectiveNO:function(){return Xe},perspectiveZO:function(){return xt},rotate:function(){return le},rotateX:function(){return K},rotateY:function(){return _e},rotateZ:function(){return et},scale:function(){return Y},set:function(){return ue},str:function(){return Ft},sub:function(){return Vt},subtract:function(){return Un},targetTo:function(){return nr},translate:function(){return Re},transpose:function(){return xe}});var q=D(49685);function G(){var U=new q.WT(16);return q.WT!=Float32Array&&(U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=0,U[12]=0,U[13]=0,U[14]=0),U[0]=1,U[5]=1,U[10]=1,U[15]=1,U}function E(U){var pe=new q.WT(16);return pe[0]=U[0],pe[1]=U[1],pe[2]=U[2],pe[3]=U[3],pe[4]=U[4],pe[5]=U[5],pe[6]=U[6],pe[7]=U[7],pe[8]=U[8],pe[9]=U[9],pe[10]=U[10],pe[11]=U[11],pe[12]=U[12],pe[13]=U[13],pe[14]=U[14],pe[15]=U[15],pe}function he(U,pe){return U[0]=pe[0],U[1]=pe[1],U[2]=pe[2],U[3]=pe[3],U[4]=pe[4],U[5]=pe[5],U[6]=pe[6],U[7]=pe[7],U[8]=pe[8],U[9]=pe[9],U[10]=pe[10],U[11]=pe[11],U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15],U}function ne(U,pe,ct,de,Yt,sn,pn,Dn,Wn,Xn,dn,_t,Rt,wn,In,Zn){var vt=new q.WT(16);return vt[0]=U,vt[1]=pe,vt[2]=ct,vt[3]=de,vt[4]=Yt,vt[5]=sn,vt[6]=pn,vt[7]=Dn,vt[8]=Wn,vt[9]=Xn,vt[10]=dn,vt[11]=_t,vt[12]=Rt,vt[13]=wn,vt[14]=In,vt[15]=Zn,vt}function ue(U,pe,ct,de,Yt,sn,pn,Dn,Wn,Xn,dn,_t,Rt,wn,In,Zn,vt){return U[0]=pe,U[1]=ct,U[2]=de,U[3]=Yt,U[4]=sn,U[5]=pn,U[6]=Dn,U[7]=Wn,U[8]=Xn,U[9]=dn,U[10]=_t,U[11]=Rt,U[12]=wn,U[13]=In,U[14]=Zn,U[15]=vt,U}function ce(U){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function xe(U,pe){if(U===pe){var ct=pe[1],de=pe[2],Yt=pe[3],sn=pe[6],pn=pe[7],Dn=pe[11];U[1]=pe[4],U[2]=pe[8],U[3]=pe[12],U[4]=ct,U[6]=pe[9],U[7]=pe[13],U[8]=de,U[9]=sn,U[11]=pe[14],U[12]=Yt,U[13]=pn,U[14]=Dn}else U[0]=pe[0],U[1]=pe[4],U[2]=pe[8],U[3]=pe[12],U[4]=pe[1],U[5]=pe[5],U[6]=pe[9],U[7]=pe[13],U[8]=pe[2],U[9]=pe[6],U[10]=pe[10],U[11]=pe[14],U[12]=pe[3],U[13]=pe[7],U[14]=pe[11],U[15]=pe[15];return U}function oe(U,pe){var ct=pe[0],de=pe[1],Yt=pe[2],sn=pe[3],pn=pe[4],Dn=pe[5],Wn=pe[6],Xn=pe[7],dn=pe[8],_t=pe[9],Rt=pe[10],wn=pe[11],In=pe[12],Zn=pe[13],vt=pe[14],Ee=pe[15],Fe=ct*Dn-de*pn,st=ct*Wn-Yt*pn,It=ct*Xn-sn*pn,Mt=de*Wn-Yt*Dn,En=de*Xn-sn*Dn,Yn=Yt*Xn-sn*Wn,yr=dn*Zn-_t*In,qn=dn*vt-Rt*In,Pe=dn*Ee-wn*In,Te=_t*vt-Rt*Zn,Ue=_t*Ee-wn*Zn,ot=Rt*Ee-wn*vt,wt=Fe*ot-st*Ue+It*Te+Mt*Pe-En*qn+Yn*yr;return wt?(wt=1/wt,U[0]=(Dn*ot-Wn*Ue+Xn*Te)*wt,U[1]=(Yt*Ue-de*ot-sn*Te)*wt,U[2]=(Zn*Yn-vt*En+Ee*Mt)*wt,U[3]=(Rt*En-_t*Yn-wn*Mt)*wt,U[4]=(Wn*Pe-pn*ot-Xn*qn)*wt,U[5]=(ct*ot-Yt*Pe+sn*qn)*wt,U[6]=(vt*It-In*Yn-Ee*st)*wt,U[7]=(dn*Yn-Rt*It+wn*st)*wt,U[8]=(pn*Ue-Dn*Pe+Xn*yr)*wt,U[9]=(de*Pe-ct*Ue-sn*yr)*wt,U[10]=(In*En-Zn*It+Ee*Fe)*wt,U[11]=(_t*It-dn*En-wn*Fe)*wt,U[12]=(Dn*qn-pn*Te-Wn*yr)*wt,U[13]=(ct*Te-de*qn+Yt*yr)*wt,U[14]=(Zn*st-In*Mt-vt*Fe)*wt,U[15]=(dn*Mt-_t*st+Rt*Fe)*wt,U):null}function Ve(U,pe){var ct=pe[0],de=pe[1],Yt=pe[2],sn=pe[3],pn=pe[4],Dn=pe[5],Wn=pe[6],Xn=pe[7],dn=pe[8],_t=pe[9],Rt=pe[10],wn=pe[11],In=pe[12],Zn=pe[13],vt=pe[14],Ee=pe[15];return U[0]=Dn*(Rt*Ee-wn*vt)-_t*(Wn*Ee-Xn*vt)+Zn*(Wn*wn-Xn*Rt),U[1]=-(de*(Rt*Ee-wn*vt)-_t*(Yt*Ee-sn*vt)+Zn*(Yt*wn-sn*Rt)),U[2]=de*(Wn*Ee-Xn*vt)-Dn*(Yt*Ee-sn*vt)+Zn*(Yt*Xn-sn*Wn),U[3]=-(de*(Wn*wn-Xn*Rt)-Dn*(Yt*wn-sn*Rt)+_t*(Yt*Xn-sn*Wn)),U[4]=-(pn*(Rt*Ee-wn*vt)-dn*(Wn*Ee-Xn*vt)+In*(Wn*wn-Xn*Rt)),U[5]=ct*(Rt*Ee-wn*vt)-dn*(Yt*Ee-sn*vt)+In*(Yt*wn-sn*Rt),U[6]=-(ct*(Wn*Ee-Xn*vt)-pn*(Yt*Ee-sn*vt)+In*(Yt*Xn-sn*Wn)),U[7]=ct*(Wn*wn-Xn*Rt)-pn*(Yt*wn-sn*Rt)+dn*(Yt*Xn-sn*Wn),U[8]=pn*(_t*Ee-wn*Zn)-dn*(Dn*Ee-Xn*Zn)+In*(Dn*wn-Xn*_t),U[9]=-(ct*(_t*Ee-wn*Zn)-dn*(de*Ee-sn*Zn)+In*(de*wn-sn*_t)),U[10]=ct*(Dn*Ee-Xn*Zn)-pn*(de*Ee-sn*Zn)+In*(de*Xn-sn*Dn),U[11]=-(ct*(Dn*wn-Xn*_t)-pn*(de*wn-sn*_t)+dn*(de*Xn-sn*Dn)),U[12]=-(pn*(_t*vt-Rt*Zn)-dn*(Dn*vt-Wn*Zn)+In*(Dn*Rt-Wn*_t)),U[13]=ct*(_t*vt-Rt*Zn)-dn*(de*vt-Yt*Zn)+In*(de*Rt-Yt*_t),U[14]=-(ct*(Dn*vt-Wn*Zn)-pn*(de*vt-Yt*Zn)+In*(de*Wn-Yt*Dn)),U[15]=ct*(Dn*Rt-Wn*_t)-pn*(de*Rt-Yt*_t)+dn*(de*Wn-Yt*Dn),U}function re(U){var pe=U[0],ct=U[1],de=U[2],Yt=U[3],sn=U[4],pn=U[5],Dn=U[6],Wn=U[7],Xn=U[8],dn=U[9],_t=U[10],Rt=U[11],wn=U[12],In=U[13],Zn=U[14],vt=U[15],Ee=pe*pn-ct*sn,Fe=pe*Dn-de*sn,st=pe*Wn-Yt*sn,It=ct*Dn-de*pn,Mt=ct*Wn-Yt*pn,En=de*Wn-Yt*Dn,Yn=Xn*In-dn*wn,yr=Xn*Zn-_t*wn,qn=Xn*vt-Rt*wn,Pe=dn*Zn-_t*In,Te=dn*vt-Rt*In,Ue=_t*vt-Rt*Zn;return Ee*Ue-Fe*Te+st*Pe+It*qn-Mt*yr+En*Yn}function me(U,pe,ct){var de=pe[0],Yt=pe[1],sn=pe[2],pn=pe[3],Dn=pe[4],Wn=pe[5],Xn=pe[6],dn=pe[7],_t=pe[8],Rt=pe[9],wn=pe[10],In=pe[11],Zn=pe[12],vt=pe[13],Ee=pe[14],Fe=pe[15],st=ct[0],It=ct[1],Mt=ct[2],En=ct[3];return U[0]=st*de+It*Dn+Mt*_t+En*Zn,U[1]=st*Yt+It*Wn+Mt*Rt+En*vt,U[2]=st*sn+It*Xn+Mt*wn+En*Ee,U[3]=st*pn+It*dn+Mt*In+En*Fe,st=ct[4],It=ct[5],Mt=ct[6],En=ct[7],U[4]=st*de+It*Dn+Mt*_t+En*Zn,U[5]=st*Yt+It*Wn+Mt*Rt+En*vt,U[6]=st*sn+It*Xn+Mt*wn+En*Ee,U[7]=st*pn+It*dn+Mt*In+En*Fe,st=ct[8],It=ct[9],Mt=ct[10],En=ct[11],U[8]=st*de+It*Dn+Mt*_t+En*Zn,U[9]=st*Yt+It*Wn+Mt*Rt+En*vt,U[10]=st*sn+It*Xn+Mt*wn+En*Ee,U[11]=st*pn+It*dn+Mt*In+En*Fe,st=ct[12],It=ct[13],Mt=ct[14],En=ct[15],U[12]=st*de+It*Dn+Mt*_t+En*Zn,U[13]=st*Yt+It*Wn+Mt*Rt+En*vt,U[14]=st*sn+It*Xn+Mt*wn+En*Ee,U[15]=st*pn+It*dn+Mt*In+En*Fe,U}function Re(U,pe,ct){var de=ct[0],Yt=ct[1],sn=ct[2],pn,Dn,Wn,Xn,dn,_t,Rt,wn,In,Zn,vt,Ee;return pe===U?(U[12]=pe[0]*de+pe[4]*Yt+pe[8]*sn+pe[12],U[13]=pe[1]*de+pe[5]*Yt+pe[9]*sn+pe[13],U[14]=pe[2]*de+pe[6]*Yt+pe[10]*sn+pe[14],U[15]=pe[3]*de+pe[7]*Yt+pe[11]*sn+pe[15]):(pn=pe[0],Dn=pe[1],Wn=pe[2],Xn=pe[3],dn=pe[4],_t=pe[5],Rt=pe[6],wn=pe[7],In=pe[8],Zn=pe[9],vt=pe[10],Ee=pe[11],U[0]=pn,U[1]=Dn,U[2]=Wn,U[3]=Xn,U[4]=dn,U[5]=_t,U[6]=Rt,U[7]=wn,U[8]=In,U[9]=Zn,U[10]=vt,U[11]=Ee,U[12]=pn*de+dn*Yt+In*sn+pe[12],U[13]=Dn*de+_t*Yt+Zn*sn+pe[13],U[14]=Wn*de+Rt*Yt+vt*sn+pe[14],U[15]=Xn*de+wn*Yt+Ee*sn+pe[15]),U}function Y(U,pe,ct){var de=ct[0],Yt=ct[1],sn=ct[2];return U[0]=pe[0]*de,U[1]=pe[1]*de,U[2]=pe[2]*de,U[3]=pe[3]*de,U[4]=pe[4]*Yt,U[5]=pe[5]*Yt,U[6]=pe[6]*Yt,U[7]=pe[7]*Yt,U[8]=pe[8]*sn,U[9]=pe[9]*sn,U[10]=pe[10]*sn,U[11]=pe[11]*sn,U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15],U}function le(U,pe,ct,de){var Yt=de[0],sn=de[1],pn=de[2],Dn=Math.hypot(Yt,sn,pn),Wn,Xn,dn,_t,Rt,wn,In,Zn,vt,Ee,Fe,st,It,Mt,En,Yn,yr,qn,Pe,Te,Ue,ot,wt,$t;return Dn<q.Ib?null:(Dn=1/Dn,Yt*=Dn,sn*=Dn,pn*=Dn,Wn=Math.sin(ct),Xn=Math.cos(ct),dn=1-Xn,_t=pe[0],Rt=pe[1],wn=pe[2],In=pe[3],Zn=pe[4],vt=pe[5],Ee=pe[6],Fe=pe[7],st=pe[8],It=pe[9],Mt=pe[10],En=pe[11],Yn=Yt*Yt*dn+Xn,yr=sn*Yt*dn+pn*Wn,qn=pn*Yt*dn-sn*Wn,Pe=Yt*sn*dn-pn*Wn,Te=sn*sn*dn+Xn,Ue=pn*sn*dn+Yt*Wn,ot=Yt*pn*dn+sn*Wn,wt=sn*pn*dn-Yt*Wn,$t=pn*pn*dn+Xn,U[0]=_t*Yn+Zn*yr+st*qn,U[1]=Rt*Yn+vt*yr+It*qn,U[2]=wn*Yn+Ee*yr+Mt*qn,U[3]=In*Yn+Fe*yr+En*qn,U[4]=_t*Pe+Zn*Te+st*Ue,U[5]=Rt*Pe+vt*Te+It*Ue,U[6]=wn*Pe+Ee*Te+Mt*Ue,U[7]=In*Pe+Fe*Te+En*Ue,U[8]=_t*ot+Zn*wt+st*$t,U[9]=Rt*ot+vt*wt+It*$t,U[10]=wn*ot+Ee*wt+Mt*$t,U[11]=In*ot+Fe*wt+En*$t,pe!==U&&(U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15]),U)}function K(U,pe,ct){var de=Math.sin(ct),Yt=Math.cos(ct),sn=pe[4],pn=pe[5],Dn=pe[6],Wn=pe[7],Xn=pe[8],dn=pe[9],_t=pe[10],Rt=pe[11];return pe!==U&&(U[0]=pe[0],U[1]=pe[1],U[2]=pe[2],U[3]=pe[3],U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15]),U[4]=sn*Yt+Xn*de,U[5]=pn*Yt+dn*de,U[6]=Dn*Yt+_t*de,U[7]=Wn*Yt+Rt*de,U[8]=Xn*Yt-sn*de,U[9]=dn*Yt-pn*de,U[10]=_t*Yt-Dn*de,U[11]=Rt*Yt-Wn*de,U}function _e(U,pe,ct){var de=Math.sin(ct),Yt=Math.cos(ct),sn=pe[0],pn=pe[1],Dn=pe[2],Wn=pe[3],Xn=pe[8],dn=pe[9],_t=pe[10],Rt=pe[11];return pe!==U&&(U[4]=pe[4],U[5]=pe[5],U[6]=pe[6],U[7]=pe[7],U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15]),U[0]=sn*Yt-Xn*de,U[1]=pn*Yt-dn*de,U[2]=Dn*Yt-_t*de,U[3]=Wn*Yt-Rt*de,U[8]=sn*de+Xn*Yt,U[9]=pn*de+dn*Yt,U[10]=Dn*de+_t*Yt,U[11]=Wn*de+Rt*Yt,U}function et(U,pe,ct){var de=Math.sin(ct),Yt=Math.cos(ct),sn=pe[0],pn=pe[1],Dn=pe[2],Wn=pe[3],Xn=pe[4],dn=pe[5],_t=pe[6],Rt=pe[7];return pe!==U&&(U[8]=pe[8],U[9]=pe[9],U[10]=pe[10],U[11]=pe[11],U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15]),U[0]=sn*Yt+Xn*de,U[1]=pn*Yt+dn*de,U[2]=Dn*Yt+_t*de,U[3]=Wn*Yt+Rt*de,U[4]=Xn*Yt-sn*de,U[5]=dn*Yt-pn*de,U[6]=_t*Yt-Dn*de,U[7]=Rt*Yt-Wn*de,U}function Je(U,pe){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=pe[0],U[13]=pe[1],U[14]=pe[2],U[15]=1,U}function Ot(U,pe){return U[0]=pe[0],U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=pe[1],U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=pe[2],U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function dt(U,pe,ct){var de=ct[0],Yt=ct[1],sn=ct[2],pn=Math.hypot(de,Yt,sn),Dn,Wn,Xn;return pn<q.Ib?null:(pn=1/pn,de*=pn,Yt*=pn,sn*=pn,Dn=Math.sin(pe),Wn=Math.cos(pe),Xn=1-Wn,U[0]=de*de*Xn+Wn,U[1]=Yt*de*Xn+sn*Dn,U[2]=sn*de*Xn-Yt*Dn,U[3]=0,U[4]=de*Yt*Xn-sn*Dn,U[5]=Yt*Yt*Xn+Wn,U[6]=sn*Yt*Xn+de*Dn,U[7]=0,U[8]=de*sn*Xn+Yt*Dn,U[9]=Yt*sn*Xn-de*Dn,U[10]=sn*sn*Xn+Wn,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U)}function bt(U,pe){var ct=Math.sin(pe),de=Math.cos(pe);return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=de,U[6]=ct,U[7]=0,U[8]=0,U[9]=-ct,U[10]=de,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Me(U,pe){var ct=Math.sin(pe),de=Math.cos(pe);return U[0]=de,U[1]=0,U[2]=-ct,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=ct,U[9]=0,U[10]=de,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function we(U,pe){var ct=Math.sin(pe),de=Math.cos(pe);return U[0]=de,U[1]=ct,U[2]=0,U[3]=0,U[4]=-ct,U[5]=de,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function je(U,pe,ct){var de=pe[0],Yt=pe[1],sn=pe[2],pn=pe[3],Dn=de+de,Wn=Yt+Yt,Xn=sn+sn,dn=de*Dn,_t=de*Wn,Rt=de*Xn,wn=Yt*Wn,In=Yt*Xn,Zn=sn*Xn,vt=pn*Dn,Ee=pn*Wn,Fe=pn*Xn;return U[0]=1-(wn+Zn),U[1]=_t+Fe,U[2]=Rt-Ee,U[3]=0,U[4]=_t-Fe,U[5]=1-(dn+Zn),U[6]=In+vt,U[7]=0,U[8]=Rt+Ee,U[9]=In-vt,U[10]=1-(dn+wn),U[11]=0,U[12]=ct[0],U[13]=ct[1],U[14]=ct[2],U[15]=1,U}function Ze(U,pe){var ct=new q.WT(3),de=-pe[0],Yt=-pe[1],sn=-pe[2],pn=pe[3],Dn=pe[4],Wn=pe[5],Xn=pe[6],dn=pe[7],_t=de*de+Yt*Yt+sn*sn+pn*pn;return _t>0?(ct[0]=(Dn*pn+dn*de+Wn*sn-Xn*Yt)*2/_t,ct[1]=(Wn*pn+dn*Yt+Xn*de-Dn*sn)*2/_t,ct[2]=(Xn*pn+dn*sn+Dn*Yt-Wn*de)*2/_t):(ct[0]=(Dn*pn+dn*de+Wn*sn-Xn*Yt)*2,ct[1]=(Wn*pn+dn*Yt+Xn*de-Dn*sn)*2,ct[2]=(Xn*pn+dn*sn+Dn*Yt-Wn*de)*2),je(U,pe,ct),U}function ut(U,pe){return U[0]=pe[12],U[1]=pe[13],U[2]=pe[14],U}function Qt(U,pe){var ct=pe[0],de=pe[1],Yt=pe[2],sn=pe[4],pn=pe[5],Dn=pe[6],Wn=pe[8],Xn=pe[9],dn=pe[10];return U[0]=Math.hypot(ct,de,Yt),U[1]=Math.hypot(sn,pn,Dn),U[2]=Math.hypot(Wn,Xn,dn),U}function De(U,pe){var ct=new q.WT(3);Qt(ct,pe);var de=1/ct[0],Yt=1/ct[1],sn=1/ct[2],pn=pe[0]*de,Dn=pe[1]*Yt,Wn=pe[2]*sn,Xn=pe[4]*de,dn=pe[5]*Yt,_t=pe[6]*sn,Rt=pe[8]*de,wn=pe[9]*Yt,In=pe[10]*sn,Zn=pn+dn+In,vt=0;return Zn>0?(vt=Math.sqrt(Zn+1)*2,U[3]=.25*vt,U[0]=(_t-wn)/vt,U[1]=(Rt-Wn)/vt,U[2]=(Dn-Xn)/vt):pn>dn&&pn>In?(vt=Math.sqrt(1+pn-dn-In)*2,U[3]=(_t-wn)/vt,U[0]=.25*vt,U[1]=(Dn+Xn)/vt,U[2]=(Rt+Wn)/vt):dn>In?(vt=Math.sqrt(1+dn-pn-In)*2,U[3]=(Rt-Wn)/vt,U[0]=(Dn+Xn)/vt,U[1]=.25*vt,U[2]=(_t+wn)/vt):(vt=Math.sqrt(1+In-pn-dn)*2,U[3]=(Dn-Xn)/vt,U[0]=(Rt+Wn)/vt,U[1]=(_t+wn)/vt,U[2]=.25*vt),U}function St(U,pe,ct,de){var Yt=pe[0],sn=pe[1],pn=pe[2],Dn=pe[3],Wn=Yt+Yt,Xn=sn+sn,dn=pn+pn,_t=Yt*Wn,Rt=Yt*Xn,wn=Yt*dn,In=sn*Xn,Zn=sn*dn,vt=pn*dn,Ee=Dn*Wn,Fe=Dn*Xn,st=Dn*dn,It=de[0],Mt=de[1],En=de[2];return U[0]=(1-(In+vt))*It,U[1]=(Rt+st)*It,U[2]=(wn-Fe)*It,U[3]=0,U[4]=(Rt-st)*Mt,U[5]=(1-(_t+vt))*Mt,U[6]=(Zn+Ee)*Mt,U[7]=0,U[8]=(wn+Fe)*En,U[9]=(Zn-Ee)*En,U[10]=(1-(_t+In))*En,U[11]=0,U[12]=ct[0],U[13]=ct[1],U[14]=ct[2],U[15]=1,U}function Oe(U,pe,ct,de,Yt){var sn=pe[0],pn=pe[1],Dn=pe[2],Wn=pe[3],Xn=sn+sn,dn=pn+pn,_t=Dn+Dn,Rt=sn*Xn,wn=sn*dn,In=sn*_t,Zn=pn*dn,vt=pn*_t,Ee=Dn*_t,Fe=Wn*Xn,st=Wn*dn,It=Wn*_t,Mt=de[0],En=de[1],Yn=de[2],yr=Yt[0],qn=Yt[1],Pe=Yt[2],Te=(1-(Zn+Ee))*Mt,Ue=(wn+It)*Mt,ot=(In-st)*Mt,wt=(wn-It)*En,$t=(1-(Rt+Ee))*En,vn=(vt+Fe)*En,Et=(In+st)*Yn,Kt=(vt-Fe)*Yn,Qn=(1-(Rt+Zn))*Yn;return U[0]=Te,U[1]=Ue,U[2]=ot,U[3]=0,U[4]=wt,U[5]=$t,U[6]=vn,U[7]=0,U[8]=Et,U[9]=Kt,U[10]=Qn,U[11]=0,U[12]=ct[0]+yr-(Te*yr+wt*qn+Et*Pe),U[13]=ct[1]+qn-(Ue*yr+$t*qn+Kt*Pe),U[14]=ct[2]+Pe-(ot*yr+vn*qn+Qn*Pe),U[15]=1,U}function it(U,pe){var ct=pe[0],de=pe[1],Yt=pe[2],sn=pe[3],pn=ct+ct,Dn=de+de,Wn=Yt+Yt,Xn=ct*pn,dn=de*pn,_t=de*Dn,Rt=Yt*pn,wn=Yt*Dn,In=Yt*Wn,Zn=sn*pn,vt=sn*Dn,Ee=sn*Wn;return U[0]=1-_t-In,U[1]=dn+Ee,U[2]=Rt-vt,U[3]=0,U[4]=dn-Ee,U[5]=1-Xn-In,U[6]=wn+Zn,U[7]=0,U[8]=Rt+vt,U[9]=wn-Zn,U[10]=1-Xn-_t,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Ke(U,pe,ct,de,Yt,sn,pn){var Dn=1/(ct-pe),Wn=1/(Yt-de),Xn=1/(sn-pn);return U[0]=sn*2*Dn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=sn*2*Wn,U[6]=0,U[7]=0,U[8]=(ct+pe)*Dn,U[9]=(Yt+de)*Wn,U[10]=(pn+sn)*Xn,U[11]=-1,U[12]=0,U[13]=0,U[14]=pn*sn*2*Xn,U[15]=0,U}function Xe(U,pe,ct,de,Yt){var sn=1/Math.tan(pe/2),pn;return U[0]=sn/ct,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=sn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=-1,U[12]=0,U[13]=0,U[15]=0,Yt!=null&&Yt!==1/0?(pn=1/(de-Yt),U[10]=(Yt+de)*pn,U[14]=2*Yt*de*pn):(U[10]=-1,U[14]=-2*de),U}var Pt=Xe;function xt(U,pe,ct,de,Yt){var sn=1/Math.tan(pe/2),pn;return U[0]=sn/ct,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=sn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=-1,U[12]=0,U[13]=0,U[15]=0,Yt!=null&&Yt!==1/0?(pn=1/(de-Yt),U[10]=Yt*pn,U[14]=Yt*de*pn):(U[10]=-1,U[14]=-de),U}function Ie(U,pe,ct,de){var Yt=Math.tan(pe.upDegrees*Math.PI/180),sn=Math.tan(pe.downDegrees*Math.PI/180),pn=Math.tan(pe.leftDegrees*Math.PI/180),Dn=Math.tan(pe.rightDegrees*Math.PI/180),Wn=2/(pn+Dn),Xn=2/(Yt+sn);return U[0]=Wn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=Xn,U[6]=0,U[7]=0,U[8]=-((pn-Dn)*Wn*.5),U[9]=(Yt-sn)*Xn*.5,U[10]=de/(ct-de),U[11]=-1,U[12]=0,U[13]=0,U[14]=de*ct/(ct-de),U[15]=0,U}function Wt(U,pe,ct,de,Yt,sn,pn){var Dn=1/(pe-ct),Wn=1/(de-Yt),Xn=1/(sn-pn);return U[0]=-2*Dn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=-2*Wn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=2*Xn,U[11]=0,U[12]=(pe+ct)*Dn,U[13]=(Yt+de)*Wn,U[14]=(pn+sn)*Xn,U[15]=1,U}var hn=Wt;function Pn(U,pe,ct,de,Yt,sn,pn){var Dn=1/(pe-ct),Wn=1/(de-Yt),Xn=1/(sn-pn);return U[0]=-2*Dn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=-2*Wn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=Xn,U[11]=0,U[12]=(pe+ct)*Dn,U[13]=(Yt+de)*Wn,U[14]=sn*Xn,U[15]=1,U}function $n(U,pe,ct,de){var Yt,sn,pn,Dn,Wn,Xn,dn,_t,Rt,wn,In=pe[0],Zn=pe[1],vt=pe[2],Ee=de[0],Fe=de[1],st=de[2],It=ct[0],Mt=ct[1],En=ct[2];return Math.abs(In-It)<q.Ib&&Math.abs(Zn-Mt)<q.Ib&&Math.abs(vt-En)<q.Ib?ce(U):(dn=In-It,_t=Zn-Mt,Rt=vt-En,wn=1/Math.hypot(dn,_t,Rt),dn*=wn,_t*=wn,Rt*=wn,Yt=Fe*Rt-st*_t,sn=st*dn-Ee*Rt,pn=Ee*_t-Fe*dn,wn=Math.hypot(Yt,sn,pn),wn?(wn=1/wn,Yt*=wn,sn*=wn,pn*=wn):(Yt=0,sn=0,pn=0),Dn=_t*pn-Rt*sn,Wn=Rt*Yt-dn*pn,Xn=dn*sn-_t*Yt,wn=Math.hypot(Dn,Wn,Xn),wn?(wn=1/wn,Dn*=wn,Wn*=wn,Xn*=wn):(Dn=0,Wn=0,Xn=0),U[0]=Yt,U[1]=Dn,U[2]=dn,U[3]=0,U[4]=sn,U[5]=Wn,U[6]=_t,U[7]=0,U[8]=pn,U[9]=Xn,U[10]=Rt,U[11]=0,U[12]=-(Yt*In+sn*Zn+pn*vt),U[13]=-(Dn*In+Wn*Zn+Xn*vt),U[14]=-(dn*In+_t*Zn+Rt*vt),U[15]=1,U)}function nr(U,pe,ct,de){var Yt=pe[0],sn=pe[1],pn=pe[2],Dn=de[0],Wn=de[1],Xn=de[2],dn=Yt-ct[0],_t=sn-ct[1],Rt=pn-ct[2],wn=dn*dn+_t*_t+Rt*Rt;wn>0&&(wn=1/Math.sqrt(wn),dn*=wn,_t*=wn,Rt*=wn);var In=Wn*Rt-Xn*_t,Zn=Xn*dn-Dn*Rt,vt=Dn*_t-Wn*dn;return wn=In*In+Zn*Zn+vt*vt,wn>0&&(wn=1/Math.sqrt(wn),In*=wn,Zn*=wn,vt*=wn),U[0]=In,U[1]=Zn,U[2]=vt,U[3]=0,U[4]=_t*vt-Rt*Zn,U[5]=Rt*In-dn*vt,U[6]=dn*Zn-_t*In,U[7]=0,U[8]=dn,U[9]=_t,U[10]=Rt,U[11]=0,U[12]=Yt,U[13]=sn,U[14]=pn,U[15]=1,U}function Ft(U){return"mat4("+U[0]+", "+U[1]+", "+U[2]+", "+U[3]+", "+U[4]+", "+U[5]+", "+U[6]+", "+U[7]+", "+U[8]+", "+U[9]+", "+U[10]+", "+U[11]+", "+U[12]+", "+U[13]+", "+U[14]+", "+U[15]+")"}function Jt(U){return Math.hypot(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15])}function ln(U,pe,ct){return U[0]=pe[0]+ct[0],U[1]=pe[1]+ct[1],U[2]=pe[2]+ct[2],U[3]=pe[3]+ct[3],U[4]=pe[4]+ct[4],U[5]=pe[5]+ct[5],U[6]=pe[6]+ct[6],U[7]=pe[7]+ct[7],U[8]=pe[8]+ct[8],U[9]=pe[9]+ct[9],U[10]=pe[10]+ct[10],U[11]=pe[11]+ct[11],U[12]=pe[12]+ct[12],U[13]=pe[13]+ct[13],U[14]=pe[14]+ct[14],U[15]=pe[15]+ct[15],U}function Un(U,pe,ct){return U[0]=pe[0]-ct[0],U[1]=pe[1]-ct[1],U[2]=pe[2]-ct[2],U[3]=pe[3]-ct[3],U[4]=pe[4]-ct[4],U[5]=pe[5]-ct[5],U[6]=pe[6]-ct[6],U[7]=pe[7]-ct[7],U[8]=pe[8]-ct[8],U[9]=pe[9]-ct[9],U[10]=pe[10]-ct[10],U[11]=pe[11]-ct[11],U[12]=pe[12]-ct[12],U[13]=pe[13]-ct[13],U[14]=pe[14]-ct[14],U[15]=pe[15]-ct[15],U}function on(U,pe,ct){return U[0]=pe[0]*ct,U[1]=pe[1]*ct,U[2]=pe[2]*ct,U[3]=pe[3]*ct,U[4]=pe[4]*ct,U[5]=pe[5]*ct,U[6]=pe[6]*ct,U[7]=pe[7]*ct,U[8]=pe[8]*ct,U[9]=pe[9]*ct,U[10]=pe[10]*ct,U[11]=pe[11]*ct,U[12]=pe[12]*ct,U[13]=pe[13]*ct,U[14]=pe[14]*ct,U[15]=pe[15]*ct,U}function zt(U,pe,ct,de){return U[0]=pe[0]+ct[0]*de,U[1]=pe[1]+ct[1]*de,U[2]=pe[2]+ct[2]*de,U[3]=pe[3]+ct[3]*de,U[4]=pe[4]+ct[4]*de,U[5]=pe[5]+ct[5]*de,U[6]=pe[6]+ct[6]*de,U[7]=pe[7]+ct[7]*de,U[8]=pe[8]+ct[8]*de,U[9]=pe[9]+ct[9]*de,U[10]=pe[10]+ct[10]*de,U[11]=pe[11]+ct[11]*de,U[12]=pe[12]+ct[12]*de,U[13]=pe[13]+ct[13]*de,U[14]=pe[14]+ct[14]*de,U[15]=pe[15]+ct[15]*de,U}function kt(U,pe){return U[0]===pe[0]&&U[1]===pe[1]&&U[2]===pe[2]&&U[3]===pe[3]&&U[4]===pe[4]&&U[5]===pe[5]&&U[6]===pe[6]&&U[7]===pe[7]&&U[8]===pe[8]&&U[9]===pe[9]&&U[10]===pe[10]&&U[11]===pe[11]&&U[12]===pe[12]&&U[13]===pe[13]&&U[14]===pe[14]&&U[15]===pe[15]}function ke(U,pe){var ct=U[0],de=U[1],Yt=U[2],sn=U[3],pn=U[4],Dn=U[5],Wn=U[6],Xn=U[7],dn=U[8],_t=U[9],Rt=U[10],wn=U[11],In=U[12],Zn=U[13],vt=U[14],Ee=U[15],Fe=pe[0],st=pe[1],It=pe[2],Mt=pe[3],En=pe[4],Yn=pe[5],yr=pe[6],qn=pe[7],Pe=pe[8],Te=pe[9],Ue=pe[10],ot=pe[11],wt=pe[12],$t=pe[13],vn=pe[14],Et=pe[15];return Math.abs(ct-Fe)<=q.Ib*Math.max(1,Math.abs(ct),Math.abs(Fe))&&Math.abs(de-st)<=q.Ib*Math.max(1,Math.abs(de),Math.abs(st))&&Math.abs(Yt-It)<=q.Ib*Math.max(1,Math.abs(Yt),Math.abs(It))&&Math.abs(sn-Mt)<=q.Ib*Math.max(1,Math.abs(sn),Math.abs(Mt))&&Math.abs(pn-En)<=q.Ib*Math.max(1,Math.abs(pn),Math.abs(En))&&Math.abs(Dn-Yn)<=q.Ib*Math.max(1,Math.abs(Dn),Math.abs(Yn))&&Math.abs(Wn-yr)<=q.Ib*Math.max(1,Math.abs(Wn),Math.abs(yr))&&Math.abs(Xn-qn)<=q.Ib*Math.max(1,Math.abs(Xn),Math.abs(qn))&&Math.abs(dn-Pe)<=q.Ib*Math.max(1,Math.abs(dn),Math.abs(Pe))&&Math.abs(_t-Te)<=q.Ib*Math.max(1,Math.abs(_t),Math.abs(Te))&&Math.abs(Rt-Ue)<=q.Ib*Math.max(1,Math.abs(Rt),Math.abs(Ue))&&Math.abs(wn-ot)<=q.Ib*Math.max(1,Math.abs(wn),Math.abs(ot))&&Math.abs(In-wt)<=q.Ib*Math.max(1,Math.abs(In),Math.abs(wt))&&Math.abs(Zn-$t)<=q.Ib*Math.max(1,Math.abs(Zn),Math.abs($t))&&Math.abs(vt-vn)<=q.Ib*Math.max(1,Math.abs(vt),Math.abs(vn))&&Math.abs(Ee-Et)<=q.Ib*Math.max(1,Math.abs(Ee),Math.abs(Et))}var nt=me,Vt=Un},31437:function(mt,W,D){"use strict";D.d(W,{$X:function(){return xe},AK:function(){return je},Fv:function(){return we},I6:function(){return Ie},IH:function(){return ce},JG:function(){return ne},Ue:function(){return G},al:function(){return he},lu:function(){return Pn},t7:function(){return ut},t8:function(){return ue},tk:function(){return bt}});var q=D(49685);function G(){var on=new q.WT(2);return q.WT!=Float32Array&&(on[0]=0,on[1]=0),on}function E(on){var zt=new glMatrix.ARRAY_TYPE(2);return zt[0]=on[0],zt[1]=on[1],zt}function he(on,zt){var kt=new q.WT(2);return kt[0]=on,kt[1]=zt,kt}function ne(on,zt){return on[0]=zt[0],on[1]=zt[1],on}function ue(on,zt,kt){return on[0]=zt,on[1]=kt,on}function ce(on,zt,kt){return on[0]=zt[0]+kt[0],on[1]=zt[1]+kt[1],on}function xe(on,zt,kt){return on[0]=zt[0]-kt[0],on[1]=zt[1]-kt[1],on}function oe(on,zt,kt){return on[0]=zt[0]*kt[0],on[1]=zt[1]*kt[1],on}function Ve(on,zt,kt){return on[0]=zt[0]/kt[0],on[1]=zt[1]/kt[1],on}function re(on,zt){return on[0]=Math.ceil(zt[0]),on[1]=Math.ceil(zt[1]),on}function me(on,zt){return on[0]=Math.floor(zt[0]),on[1]=Math.floor(zt[1]),on}function Re(on,zt,kt){return on[0]=Math.min(zt[0],kt[0]),on[1]=Math.min(zt[1],kt[1]),on}function Y(on,zt,kt){return on[0]=Math.max(zt[0],kt[0]),on[1]=Math.max(zt[1],kt[1]),on}function le(on,zt){return on[0]=Math.round(zt[0]),on[1]=Math.round(zt[1]),on}function K(on,zt,kt){return on[0]=zt[0]*kt,on[1]=zt[1]*kt,on}function _e(on,zt,kt,ke){return on[0]=zt[0]+kt[0]*ke,on[1]=zt[1]+kt[1]*ke,on}function et(on,zt){var kt=zt[0]-on[0],ke=zt[1]-on[1];return Math.hypot(kt,ke)}function Je(on,zt){var kt=zt[0]-on[0],ke=zt[1]-on[1];return kt*kt+ke*ke}function Ot(on){var zt=on[0],kt=on[1];return Math.hypot(zt,kt)}function dt(on){var zt=on[0],kt=on[1];return zt*zt+kt*kt}function bt(on,zt){return on[0]=-zt[0],on[1]=-zt[1],on}function Me(on,zt){return on[0]=1/zt[0],on[1]=1/zt[1],on}function we(on,zt){var kt=zt[0],ke=zt[1],nt=kt*kt+ke*ke;return nt>0&&(nt=1/Math.sqrt(nt)),on[0]=zt[0]*nt,on[1]=zt[1]*nt,on}function je(on,zt){return on[0]*zt[0]+on[1]*zt[1]}function Ze(on,zt,kt){var ke=zt[0]*kt[1]-zt[1]*kt[0];return on[0]=on[1]=0,on[2]=ke,on}function ut(on,zt,kt,ke){var nt=zt[0],Vt=zt[1];return on[0]=nt+ke*(kt[0]-nt),on[1]=Vt+ke*(kt[1]-Vt),on}function Qt(on,zt){zt=zt||1;var kt=glMatrix.RANDOM()*2*Math.PI;return on[0]=Math.cos(kt)*zt,on[1]=Math.sin(kt)*zt,on}function De(on,zt,kt){var ke=zt[0],nt=zt[1];return on[0]=kt[0]*ke+kt[2]*nt,on[1]=kt[1]*ke+kt[3]*nt,on}function St(on,zt,kt){var ke=zt[0],nt=zt[1];return on[0]=kt[0]*ke+kt[2]*nt+kt[4],on[1]=kt[1]*ke+kt[3]*nt+kt[5],on}function Oe(on,zt,kt){var ke=zt[0],nt=zt[1];return on[0]=kt[0]*ke+kt[3]*nt+kt[6],on[1]=kt[1]*ke+kt[4]*nt+kt[7],on}function it(on,zt,kt){var ke=zt[0],nt=zt[1];return on[0]=kt[0]*ke+kt[4]*nt+kt[12],on[1]=kt[1]*ke+kt[5]*nt+kt[13],on}function Ke(on,zt,kt,ke){var nt=zt[0]-kt[0],Vt=zt[1]-kt[1],U=Math.sin(ke),pe=Math.cos(ke);return on[0]=nt*pe-Vt*U+kt[0],on[1]=nt*U+Vt*pe+kt[1],on}function Xe(on,zt){var kt=on[0],ke=on[1],nt=zt[0],Vt=zt[1],U=Math.sqrt(kt*kt+ke*ke)*Math.sqrt(nt*nt+Vt*Vt),pe=U&&(kt*nt+ke*Vt)/U;return Math.acos(Math.min(Math.max(pe,-1),1))}function Pt(on){return on[0]=0,on[1]=0,on}function xt(on){return"vec2("+on[0]+", "+on[1]+")"}function Ie(on,zt){return on[0]===zt[0]&&on[1]===zt[1]}function Wt(on,zt){var kt=on[0],ke=on[1],nt=zt[0],Vt=zt[1];return Math.abs(kt-nt)<=glMatrix.EPSILON*Math.max(1,Math.abs(kt),Math.abs(nt))&&Math.abs(ke-Vt)<=glMatrix.EPSILON*Math.max(1,Math.abs(ke),Math.abs(Vt))}var hn=null,Pn=xe,$n=null,nr=null,Ft=null,Jt=null,ln=null,Un=function(){var on=G();return function(zt,kt,ke,nt,Vt,U){var pe,ct;for(kt||(kt=2),ke||(ke=0),nt?ct=Math.min(nt*kt+ke,zt.length):ct=zt.length,pe=ke;pe<ct;pe+=kt)on[0]=zt[pe],on[1]=zt[pe+1],Vt(on,on,U),zt[pe]=on[0],zt[pe+1]=on[1];return zt}}()},77160:function(mt,W,D){"use strict";D.d(W,{$X:function(){return oe},AK:function(){return je},EU:function(){return Ie},Fv:function(){return we},IH:function(){return xe},JG:function(){return ue},Jp:function(){return Ve},TK:function(){return ln},Ue:function(){return G},VC:function(){return Ke},Zh:function(){return on},al:function(){return ne},bA:function(){return _e},d9:function(){return E},fF:function(){return Oe},fS:function(){return $n},kC:function(){return Ze},kE:function(){return he},kK:function(){return it},lu:function(){return nr},t7:function(){return ut},t8:function(){return ce},tk:function(){return bt}});var q=D(49685);function G(){var ke=new q.WT(3);return q.WT!=Float32Array&&(ke[0]=0,ke[1]=0,ke[2]=0),ke}function E(ke){var nt=new q.WT(3);return nt[0]=ke[0],nt[1]=ke[1],nt[2]=ke[2],nt}function he(ke){var nt=ke[0],Vt=ke[1],U=ke[2];return Math.hypot(nt,Vt,U)}function ne(ke,nt,Vt){var U=new q.WT(3);return U[0]=ke,U[1]=nt,U[2]=Vt,U}function ue(ke,nt){return ke[0]=nt[0],ke[1]=nt[1],ke[2]=nt[2],ke}function ce(ke,nt,Vt,U){return ke[0]=nt,ke[1]=Vt,ke[2]=U,ke}function xe(ke,nt,Vt){return ke[0]=nt[0]+Vt[0],ke[1]=nt[1]+Vt[1],ke[2]=nt[2]+Vt[2],ke}function oe(ke,nt,Vt){return ke[0]=nt[0]-Vt[0],ke[1]=nt[1]-Vt[1],ke[2]=nt[2]-Vt[2],ke}function Ve(ke,nt,Vt){return ke[0]=nt[0]*Vt[0],ke[1]=nt[1]*Vt[1],ke[2]=nt[2]*Vt[2],ke}function re(ke,nt,Vt){return ke[0]=nt[0]/Vt[0],ke[1]=nt[1]/Vt[1],ke[2]=nt[2]/Vt[2],ke}function me(ke,nt){return ke[0]=Math.ceil(nt[0]),ke[1]=Math.ceil(nt[1]),ke[2]=Math.ceil(nt[2]),ke}function Re(ke,nt){return ke[0]=Math.floor(nt[0]),ke[1]=Math.floor(nt[1]),ke[2]=Math.floor(nt[2]),ke}function Y(ke,nt,Vt){return ke[0]=Math.min(nt[0],Vt[0]),ke[1]=Math.min(nt[1],Vt[1]),ke[2]=Math.min(nt[2],Vt[2]),ke}function le(ke,nt,Vt){return ke[0]=Math.max(nt[0],Vt[0]),ke[1]=Math.max(nt[1],Vt[1]),ke[2]=Math.max(nt[2],Vt[2]),ke}function K(ke,nt){return ke[0]=Math.round(nt[0]),ke[1]=Math.round(nt[1]),ke[2]=Math.round(nt[2]),ke}function _e(ke,nt,Vt){return ke[0]=nt[0]*Vt,ke[1]=nt[1]*Vt,ke[2]=nt[2]*Vt,ke}function et(ke,nt,Vt,U){return ke[0]=nt[0]+Vt[0]*U,ke[1]=nt[1]+Vt[1]*U,ke[2]=nt[2]+Vt[2]*U,ke}function Je(ke,nt){var Vt=nt[0]-ke[0],U=nt[1]-ke[1],pe=nt[2]-ke[2];return Math.hypot(Vt,U,pe)}function Ot(ke,nt){var Vt=nt[0]-ke[0],U=nt[1]-ke[1],pe=nt[2]-ke[2];return Vt*Vt+U*U+pe*pe}function dt(ke){var nt=ke[0],Vt=ke[1],U=ke[2];return nt*nt+Vt*Vt+U*U}function bt(ke,nt){return ke[0]=-nt[0],ke[1]=-nt[1],ke[2]=-nt[2],ke}function Me(ke,nt){return ke[0]=1/nt[0],ke[1]=1/nt[1],ke[2]=1/nt[2],ke}function we(ke,nt){var Vt=nt[0],U=nt[1],pe=nt[2],ct=Vt*Vt+U*U+pe*pe;return ct>0&&(ct=1/Math.sqrt(ct)),ke[0]=nt[0]*ct,ke[1]=nt[1]*ct,ke[2]=nt[2]*ct,ke}function je(ke,nt){return ke[0]*nt[0]+ke[1]*nt[1]+ke[2]*nt[2]}function Ze(ke,nt,Vt){var U=nt[0],pe=nt[1],ct=nt[2],de=Vt[0],Yt=Vt[1],sn=Vt[2];return ke[0]=pe*sn-ct*Yt,ke[1]=ct*de-U*sn,ke[2]=U*Yt-pe*de,ke}function ut(ke,nt,Vt,U){var pe=nt[0],ct=nt[1],de=nt[2];return ke[0]=pe+U*(Vt[0]-pe),ke[1]=ct+U*(Vt[1]-ct),ke[2]=de+U*(Vt[2]-de),ke}function Qt(ke,nt,Vt,U,pe,ct){var de=ct*ct,Yt=de*(2*ct-3)+1,sn=de*(ct-2)+ct,pn=de*(ct-1),Dn=de*(3-2*ct);return ke[0]=nt[0]*Yt+Vt[0]*sn+U[0]*pn+pe[0]*Dn,ke[1]=nt[1]*Yt+Vt[1]*sn+U[1]*pn+pe[1]*Dn,ke[2]=nt[2]*Yt+Vt[2]*sn+U[2]*pn+pe[2]*Dn,ke}function De(ke,nt,Vt,U,pe,ct){var de=1-ct,Yt=de*de,sn=ct*ct,pn=Yt*de,Dn=3*ct*Yt,Wn=3*sn*de,Xn=sn*ct;return ke[0]=nt[0]*pn+Vt[0]*Dn+U[0]*Wn+pe[0]*Xn,ke[1]=nt[1]*pn+Vt[1]*Dn+U[1]*Wn+pe[1]*Xn,ke[2]=nt[2]*pn+Vt[2]*Dn+U[2]*Wn+pe[2]*Xn,ke}function St(ke,nt){nt=nt||1;var Vt=glMatrix.RANDOM()*2*Math.PI,U=glMatrix.RANDOM()*2-1,pe=Math.sqrt(1-U*U)*nt;return ke[0]=Math.cos(Vt)*pe,ke[1]=Math.sin(Vt)*pe,ke[2]=U*nt,ke}function Oe(ke,nt,Vt){var U=nt[0],pe=nt[1],ct=nt[2],de=Vt[3]*U+Vt[7]*pe+Vt[11]*ct+Vt[15];return de=de||1,ke[0]=(Vt[0]*U+Vt[4]*pe+Vt[8]*ct+Vt[12])/de,ke[1]=(Vt[1]*U+Vt[5]*pe+Vt[9]*ct+Vt[13])/de,ke[2]=(Vt[2]*U+Vt[6]*pe+Vt[10]*ct+Vt[14])/de,ke}function it(ke,nt,Vt){var U=nt[0],pe=nt[1],ct=nt[2];return ke[0]=U*Vt[0]+pe*Vt[3]+ct*Vt[6],ke[1]=U*Vt[1]+pe*Vt[4]+ct*Vt[7],ke[2]=U*Vt[2]+pe*Vt[5]+ct*Vt[8],ke}function Ke(ke,nt,Vt){var U=Vt[0],pe=Vt[1],ct=Vt[2],de=Vt[3],Yt=nt[0],sn=nt[1],pn=nt[2],Dn=pe*pn-ct*sn,Wn=ct*Yt-U*pn,Xn=U*sn-pe*Yt,dn=pe*Xn-ct*Wn,_t=ct*Dn-U*Xn,Rt=U*Wn-pe*Dn,wn=de*2;return Dn*=wn,Wn*=wn,Xn*=wn,dn*=2,_t*=2,Rt*=2,ke[0]=Yt+Dn+dn,ke[1]=sn+Wn+_t,ke[2]=pn+Xn+Rt,ke}function Xe(ke,nt,Vt,U){var pe=[],ct=[];return pe[0]=nt[0]-Vt[0],pe[1]=nt[1]-Vt[1],pe[2]=nt[2]-Vt[2],ct[0]=pe[0],ct[1]=pe[1]*Math.cos(U)-pe[2]*Math.sin(U),ct[2]=pe[1]*Math.sin(U)+pe[2]*Math.cos(U),ke[0]=ct[0]+Vt[0],ke[1]=ct[1]+Vt[1],ke[2]=ct[2]+Vt[2],ke}function Pt(ke,nt,Vt,U){var pe=[],ct=[];return pe[0]=nt[0]-Vt[0],pe[1]=nt[1]-Vt[1],pe[2]=nt[2]-Vt[2],ct[0]=pe[2]*Math.sin(U)+pe[0]*Math.cos(U),ct[1]=pe[1],ct[2]=pe[2]*Math.cos(U)-pe[0]*Math.sin(U),ke[0]=ct[0]+Vt[0],ke[1]=ct[1]+Vt[1],ke[2]=ct[2]+Vt[2],ke}function xt(ke,nt,Vt,U){var pe=[],ct=[];return pe[0]=nt[0]-Vt[0],pe[1]=nt[1]-Vt[1],pe[2]=nt[2]-Vt[2],ct[0]=pe[0]*Math.cos(U)-pe[1]*Math.sin(U),ct[1]=pe[0]*Math.sin(U)+pe[1]*Math.cos(U),ct[2]=pe[2],ke[0]=ct[0]+Vt[0],ke[1]=ct[1]+Vt[1],ke[2]=ct[2]+Vt[2],ke}function Ie(ke,nt){var Vt=ke[0],U=ke[1],pe=ke[2],ct=nt[0],de=nt[1],Yt=nt[2],sn=Math.sqrt(Vt*Vt+U*U+pe*pe),pn=Math.sqrt(ct*ct+de*de+Yt*Yt),Dn=sn*pn,Wn=Dn&&je(ke,nt)/Dn;return Math.acos(Math.min(Math.max(Wn,-1),1))}function Wt(ke){return ke[0]=0,ke[1]=0,ke[2]=0,ke}function hn(ke){return"vec3("+ke[0]+", "+ke[1]+", "+ke[2]+")"}function Pn(ke,nt){return ke[0]===nt[0]&&ke[1]===nt[1]&&ke[2]===nt[2]}function $n(ke,nt){var Vt=ke[0],U=ke[1],pe=ke[2],ct=nt[0],de=nt[1],Yt=nt[2];return Math.abs(Vt-ct)<=q.Ib*Math.max(1,Math.abs(Vt),Math.abs(ct))&&Math.abs(U-de)<=q.Ib*Math.max(1,Math.abs(U),Math.abs(de))&&Math.abs(pe-Yt)<=q.Ib*Math.max(1,Math.abs(pe),Math.abs(Yt))}var nr=oe,Ft=null,Jt=null,ln=Je,Un=null,on=he,zt=null,kt=function(){var ke=G();return function(nt,Vt,U,pe,ct,de){var Yt,sn;for(Vt||(Vt=3),U||(U=0),pe?sn=Math.min(pe*Vt+U,nt.length):sn=nt.length,Yt=U;Yt<sn;Yt+=Vt)ke[0]=nt[Yt],ke[1]=nt[Yt+1],ke[2]=nt[Yt+2],ct(ke,ke,de),nt[Yt]=ke[0],nt[Yt+1]=ke[1],nt[Yt+2]=ke[2];return nt}}()},98333:function(mt,W,D){"use strict";D.d(W,{AK:function(){return je},Fv:function(){return we},I6:function(){return Ke},IH:function(){return ce},JG:function(){return ne},Ue:function(){return G},al:function(){return he},bA:function(){return K},d9:function(){return E},fF:function(){return De},fS:function(){return Xe},kE:function(){return Ot},t7:function(){return ut},t8:function(){return ue},we:function(){return dt}});var q=D(49685);function G(){var Ft=new q.WT(4);return q.WT!=Float32Array&&(Ft[0]=0,Ft[1]=0,Ft[2]=0,Ft[3]=0),Ft}function E(Ft){var Jt=new q.WT(4);return Jt[0]=Ft[0],Jt[1]=Ft[1],Jt[2]=Ft[2],Jt[3]=Ft[3],Jt}function he(Ft,Jt,ln,Un){var on=new q.WT(4);return on[0]=Ft,on[1]=Jt,on[2]=ln,on[3]=Un,on}function ne(Ft,Jt){return Ft[0]=Jt[0],Ft[1]=Jt[1],Ft[2]=Jt[2],Ft[3]=Jt[3],Ft}function ue(Ft,Jt,ln,Un,on){return Ft[0]=Jt,Ft[1]=ln,Ft[2]=Un,Ft[3]=on,Ft}function ce(Ft,Jt,ln){return Ft[0]=Jt[0]+ln[0],Ft[1]=Jt[1]+ln[1],Ft[2]=Jt[2]+ln[2],Ft[3]=Jt[3]+ln[3],Ft}function xe(Ft,Jt,ln){return Ft[0]=Jt[0]-ln[0],Ft[1]=Jt[1]-ln[1],Ft[2]=Jt[2]-ln[2],Ft[3]=Jt[3]-ln[3],Ft}function oe(Ft,Jt,ln){return Ft[0]=Jt[0]*ln[0],Ft[1]=Jt[1]*ln[1],Ft[2]=Jt[2]*ln[2],Ft[3]=Jt[3]*ln[3],Ft}function Ve(Ft,Jt,ln){return Ft[0]=Jt[0]/ln[0],Ft[1]=Jt[1]/ln[1],Ft[2]=Jt[2]/ln[2],Ft[3]=Jt[3]/ln[3],Ft}function re(Ft,Jt){return Ft[0]=Math.ceil(Jt[0]),Ft[1]=Math.ceil(Jt[1]),Ft[2]=Math.ceil(Jt[2]),Ft[3]=Math.ceil(Jt[3]),Ft}function me(Ft,Jt){return Ft[0]=Math.floor(Jt[0]),Ft[1]=Math.floor(Jt[1]),Ft[2]=Math.floor(Jt[2]),Ft[3]=Math.floor(Jt[3]),Ft}function Re(Ft,Jt,ln){return Ft[0]=Math.min(Jt[0],ln[0]),Ft[1]=Math.min(Jt[1],ln[1]),Ft[2]=Math.min(Jt[2],ln[2]),Ft[3]=Math.min(Jt[3],ln[3]),Ft}function Y(Ft,Jt,ln){return Ft[0]=Math.max(Jt[0],ln[0]),Ft[1]=Math.max(Jt[1],ln[1]),Ft[2]=Math.max(Jt[2],ln[2]),Ft[3]=Math.max(Jt[3],ln[3]),Ft}function le(Ft,Jt){return Ft[0]=Math.round(Jt[0]),Ft[1]=Math.round(Jt[1]),Ft[2]=Math.round(Jt[2]),Ft[3]=Math.round(Jt[3]),Ft}function K(Ft,Jt,ln){return Ft[0]=Jt[0]*ln,Ft[1]=Jt[1]*ln,Ft[2]=Jt[2]*ln,Ft[3]=Jt[3]*ln,Ft}function _e(Ft,Jt,ln,Un){return Ft[0]=Jt[0]+ln[0]*Un,Ft[1]=Jt[1]+ln[1]*Un,Ft[2]=Jt[2]+ln[2]*Un,Ft[3]=Jt[3]+ln[3]*Un,Ft}function et(Ft,Jt){var ln=Jt[0]-Ft[0],Un=Jt[1]-Ft[1],on=Jt[2]-Ft[2],zt=Jt[3]-Ft[3];return Math.hypot(ln,Un,on,zt)}function Je(Ft,Jt){var ln=Jt[0]-Ft[0],Un=Jt[1]-Ft[1],on=Jt[2]-Ft[2],zt=Jt[3]-Ft[3];return ln*ln+Un*Un+on*on+zt*zt}function Ot(Ft){var Jt=Ft[0],ln=Ft[1],Un=Ft[2],on=Ft[3];return Math.hypot(Jt,ln,Un,on)}function dt(Ft){var Jt=Ft[0],ln=Ft[1],Un=Ft[2],on=Ft[3];return Jt*Jt+ln*ln+Un*Un+on*on}function bt(Ft,Jt){return Ft[0]=-Jt[0],Ft[1]=-Jt[1],Ft[2]=-Jt[2],Ft[3]=-Jt[3],Ft}function Me(Ft,Jt){return Ft[0]=1/Jt[0],Ft[1]=1/Jt[1],Ft[2]=1/Jt[2],Ft[3]=1/Jt[3],Ft}function we(Ft,Jt){var ln=Jt[0],Un=Jt[1],on=Jt[2],zt=Jt[3],kt=ln*ln+Un*Un+on*on+zt*zt;return kt>0&&(kt=1/Math.sqrt(kt)),Ft[0]=ln*kt,Ft[1]=Un*kt,Ft[2]=on*kt,Ft[3]=zt*kt,Ft}function je(Ft,Jt){return Ft[0]*Jt[0]+Ft[1]*Jt[1]+Ft[2]*Jt[2]+Ft[3]*Jt[3]}function Ze(Ft,Jt,ln,Un){var on=ln[0]*Un[1]-ln[1]*Un[0],zt=ln[0]*Un[2]-ln[2]*Un[0],kt=ln[0]*Un[3]-ln[3]*Un[0],ke=ln[1]*Un[2]-ln[2]*Un[1],nt=ln[1]*Un[3]-ln[3]*Un[1],Vt=ln[2]*Un[3]-ln[3]*Un[2],U=Jt[0],pe=Jt[1],ct=Jt[2],de=Jt[3];return Ft[0]=pe*Vt-ct*nt+de*ke,Ft[1]=-(U*Vt)+ct*kt-de*zt,Ft[2]=U*nt-pe*kt+de*on,Ft[3]=-(U*ke)+pe*zt-ct*on,Ft}function ut(Ft,Jt,ln,Un){var on=Jt[0],zt=Jt[1],kt=Jt[2],ke=Jt[3];return Ft[0]=on+Un*(ln[0]-on),Ft[1]=zt+Un*(ln[1]-zt),Ft[2]=kt+Un*(ln[2]-kt),Ft[3]=ke+Un*(ln[3]-ke),Ft}function Qt(Ft,Jt){Jt=Jt||1;var ln,Un,on,zt,kt,ke;do ln=glMatrix.RANDOM()*2-1,Un=glMatrix.RANDOM()*2-1,kt=ln*ln+Un*Un;while(kt>=1);do on=glMatrix.RANDOM()*2-1,zt=glMatrix.RANDOM()*2-1,ke=on*on+zt*zt;while(ke>=1);var nt=Math.sqrt((1-kt)/ke);return Ft[0]=Jt*ln,Ft[1]=Jt*Un,Ft[2]=Jt*on*nt,Ft[3]=Jt*zt*nt,Ft}function De(Ft,Jt,ln){var Un=Jt[0],on=Jt[1],zt=Jt[2],kt=Jt[3];return Ft[0]=ln[0]*Un+ln[4]*on+ln[8]*zt+ln[12]*kt,Ft[1]=ln[1]*Un+ln[5]*on+ln[9]*zt+ln[13]*kt,Ft[2]=ln[2]*Un+ln[6]*on+ln[10]*zt+ln[14]*kt,Ft[3]=ln[3]*Un+ln[7]*on+ln[11]*zt+ln[15]*kt,Ft}function St(Ft,Jt,ln){var Un=Jt[0],on=Jt[1],zt=Jt[2],kt=ln[0],ke=ln[1],nt=ln[2],Vt=ln[3],U=Vt*Un+ke*zt-nt*on,pe=Vt*on+nt*Un-kt*zt,ct=Vt*zt+kt*on-ke*Un,de=-kt*Un-ke*on-nt*zt;return Ft[0]=U*Vt+de*-kt+pe*-nt-ct*-ke,Ft[1]=pe*Vt+de*-ke+ct*-kt-U*-nt,Ft[2]=ct*Vt+de*-nt+U*-ke-pe*-kt,Ft[3]=Jt[3],Ft}function Oe(Ft){return Ft[0]=0,Ft[1]=0,Ft[2]=0,Ft[3]=0,Ft}function it(Ft){return"vec4("+Ft[0]+", "+Ft[1]+", "+Ft[2]+", "+Ft[3]+")"}function Ke(Ft,Jt){return Ft[0]===Jt[0]&&Ft[1]===Jt[1]&&Ft[2]===Jt[2]&&Ft[3]===Jt[3]}function Xe(Ft,Jt){var ln=Ft[0],Un=Ft[1],on=Ft[2],zt=Ft[3],kt=Jt[0],ke=Jt[1],nt=Jt[2],Vt=Jt[3];return Math.abs(ln-kt)<=q.Ib*Math.max(1,Math.abs(ln),Math.abs(kt))&&Math.abs(Un-ke)<=q.Ib*Math.max(1,Math.abs(Un),Math.abs(ke))&&Math.abs(on-nt)<=q.Ib*Math.max(1,Math.abs(on),Math.abs(nt))&&Math.abs(zt-Vt)<=q.Ib*Math.max(1,Math.abs(zt),Math.abs(Vt))}var Pt=null,xt=null,Ie=null,Wt=null,hn=null,Pn=null,$n=null,nr=function(){var Ft=G();return function(Jt,ln,Un,on,zt,kt){var ke,nt;for(ln||(ln=4),Un||(Un=0),on?nt=Math.min(on*ln+Un,Jt.length):nt=Jt.length,ke=Un;ke<nt;ke+=ln)Ft[0]=Jt[ke],Ft[1]=Jt[ke+1],Ft[2]=Jt[ke+2],Ft[3]=Jt[ke+3],zt(Ft,Ft,kt),Jt[ke]=Ft[0],Jt[ke+1]=Ft[1],Jt[ke+2]=Ft[2],Jt[ke+3]=Ft[3];return Jt}}()},50840:function(mt,W,D){var q;(function(G,E,he,ne){"use strict";var ue=["","webkit","Moz","MS","ms","o"],ce=E.createElement("div"),xe="function",oe=Math.round,Ve=Math.abs,re=Date.now;function me(At,Gt,jn){return setTimeout(Ot(At,jn),Gt)}function Re(At,Gt,jn){return Array.isArray(At)?(Y(At,jn[Gt],jn),!0):!1}function Y(At,Gt,jn){var Lr;if(At)if(At.forEach)At.forEach(Gt,jn);else if(At.length!==ne)for(Lr=0;Lr<At.length;)Gt.call(jn,At[Lr],Lr,At),Lr++;else for(Lr in At)At.hasOwnProperty(Lr)&&Gt.call(jn,At[Lr],Lr,At)}function le(At,Gt,jn){var Lr="DEPRECATED METHOD: "+Gt+`
`+jn+` AT 
`;return function(){var Oi=new Error("get-stack-trace"),Gi=Oi&&Oi.stack?Oi.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Jo=G.console&&(G.console.warn||G.console.log);return Jo&&Jo.call(G.console,Lr,Gi),At.apply(this,arguments)}}var K;typeof Object.assign!="function"?K=function(Gt){if(Gt===ne||Gt===null)throw new TypeError("Cannot convert undefined or null to object");for(var jn=Object(Gt),Lr=1;Lr<arguments.length;Lr++){var Oi=arguments[Lr];if(Oi!==ne&&Oi!==null)for(var Gi in Oi)Oi.hasOwnProperty(Gi)&&(jn[Gi]=Oi[Gi])}return jn}:K=Object.assign;var _e=le(function(Gt,jn,Lr){for(var Oi=Object.keys(jn),Gi=0;Gi<Oi.length;)(!Lr||Lr&&Gt[Oi[Gi]]===ne)&&(Gt[Oi[Gi]]=jn[Oi[Gi]]),Gi++;return Gt},"extend","Use `assign`."),et=le(function(Gt,jn){return _e(Gt,jn,!0)},"merge","Use `assign`.");function Je(At,Gt,jn){var Lr=Gt.prototype,Oi;Oi=At.prototype=Object.create(Lr),Oi.constructor=At,Oi._super=Lr,jn&&K(Oi,jn)}function Ot(At,Gt){return function(){return At.apply(Gt,arguments)}}function dt(At,Gt){return typeof At==xe?At.apply(Gt&&Gt[0]||ne,Gt):At}function bt(At,Gt){return At===ne?Gt:At}function Me(At,Gt,jn){Y(ut(Gt),function(Lr){At.addEventListener(Lr,jn,!1)})}function we(At,Gt,jn){Y(ut(Gt),function(Lr){At.removeEventListener(Lr,jn,!1)})}function je(At,Gt){for(;At;){if(At==Gt)return!0;At=At.parentNode}return!1}function Ze(At,Gt){return At.indexOf(Gt)>-1}function ut(At){return At.trim().split(/\s+/g)}function Qt(At,Gt,jn){if(At.indexOf&&!jn)return At.indexOf(Gt);for(var Lr=0;Lr<At.length;){if(jn&&At[Lr][jn]==Gt||!jn&&At[Lr]===Gt)return Lr;Lr++}return-1}function De(At){return Array.prototype.slice.call(At,0)}function St(At,Gt,jn){for(var Lr=[],Oi=[],Gi=0;Gi<At.length;){var Jo=Gt?At[Gi][Gt]:At[Gi];Qt(Oi,Jo)<0&&Lr.push(At[Gi]),Oi[Gi]=Jo,Gi++}return jn&&(Gt?Lr=Lr.sort(function(Ds,zs){return Ds[Gt]>zs[Gt]}):Lr=Lr.sort()),Lr}function Oe(At,Gt){for(var jn,Lr,Oi=Gt[0].toUpperCase()+Gt.slice(1),Gi=0;Gi<ue.length;){if(jn=ue[Gi],Lr=jn?jn+Oi:Gt,Lr in At)return Lr;Gi++}return ne}var it=1;function Ke(){return it++}function Xe(At){var Gt=At.ownerDocument||At;return Gt.defaultView||Gt.parentWindow||G}var Pt=/mobile|tablet|ip(ad|hone|od)|android/i,xt="ontouchstart"in G,Ie=Oe(G,"PointerEvent")!==ne,Wt=xt&&Pt.test(navigator.userAgent),hn="touch",Pn="pen",$n="mouse",nr="kinect",Ft=25,Jt=1,ln=2,Un=4,on=8,zt=1,kt=2,ke=4,nt=8,Vt=16,U=kt|ke,pe=nt|Vt,ct=U|pe,de=["x","y"],Yt=["clientX","clientY"];function sn(At,Gt){var jn=this;this.manager=At,this.callback=Gt,this.element=At.element,this.target=At.options.inputTarget,this.domHandler=function(Lr){dt(At.options.enable,[At])&&jn.handler(Lr)},this.init()}sn.prototype={handler:function(){},init:function(){this.evEl&&Me(this.element,this.evEl,this.domHandler),this.evTarget&&Me(this.target,this.evTarget,this.domHandler),this.evWin&&Me(Xe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&we(this.element,this.evEl,this.domHandler),this.evTarget&&we(this.target,this.evTarget,this.domHandler),this.evWin&&we(Xe(this.element),this.evWin,this.domHandler)}};function pn(At){var Gt,jn=At.options.inputClass;return jn?Gt=jn:Ie?Gt=Te:Wt?Gt=Qn:xt?Gt=zr:Gt=En,new Gt(At,Dn)}function Dn(At,Gt,jn){var Lr=jn.pointers.length,Oi=jn.changedPointers.length,Gi=Gt&Jt&&Lr-Oi===0,Jo=Gt&(Un|on)&&Lr-Oi===0;jn.isFirst=!!Gi,jn.isFinal=!!Jo,Gi&&(At.session={}),jn.eventType=Gt,Wn(At,jn),At.emit("hammer.input",jn),At.recognize(jn),At.session.prevInput=jn}function Wn(At,Gt){var jn=At.session,Lr=Gt.pointers,Oi=Lr.length;jn.firstInput||(jn.firstInput=_t(Gt)),Oi>1&&!jn.firstMultiple?jn.firstMultiple=_t(Gt):Oi===1&&(jn.firstMultiple=!1);var Gi=jn.firstInput,Jo=jn.firstMultiple,Gs=Jo?Jo.center:Gi.center,Ds=Gt.center=Rt(Lr);Gt.timeStamp=re(),Gt.deltaTime=Gt.timeStamp-Gi.timeStamp,Gt.angle=vt(Gs,Ds),Gt.distance=Zn(Gs,Ds),Xn(jn,Gt),Gt.offsetDirection=In(Gt.deltaX,Gt.deltaY);var zs=wn(Gt.deltaTime,Gt.deltaX,Gt.deltaY);Gt.overallVelocityX=zs.x,Gt.overallVelocityY=zs.y,Gt.overallVelocity=Ve(zs.x)>Ve(zs.y)?zs.x:zs.y,Gt.scale=Jo?Fe(Jo.pointers,Lr):1,Gt.rotation=Jo?Ee(Jo.pointers,Lr):0,Gt.maxPointers=jn.prevInput?Gt.pointers.length>jn.prevInput.maxPointers?Gt.pointers.length:jn.prevInput.maxPointers:Gt.pointers.length,dn(jn,Gt);var hl=At.element;je(Gt.srcEvent.target,hl)&&(hl=Gt.srcEvent.target),Gt.target=hl}function Xn(At,Gt){var jn=Gt.center,Lr=At.offsetDelta||{},Oi=At.prevDelta||{},Gi=At.prevInput||{};(Gt.eventType===Jt||Gi.eventType===Un)&&(Oi=At.prevDelta={x:Gi.deltaX||0,y:Gi.deltaY||0},Lr=At.offsetDelta={x:jn.x,y:jn.y}),Gt.deltaX=Oi.x+(jn.x-Lr.x),Gt.deltaY=Oi.y+(jn.y-Lr.y)}function dn(At,Gt){var jn=At.lastInterval||Gt,Lr=Gt.timeStamp-jn.timeStamp,Oi,Gi,Jo,Gs;if(Gt.eventType!=on&&(Lr>Ft||jn.velocity===ne)){var Ds=Gt.deltaX-jn.deltaX,zs=Gt.deltaY-jn.deltaY,hl=wn(Lr,Ds,zs);Gi=hl.x,Jo=hl.y,Oi=Ve(hl.x)>Ve(hl.y)?hl.x:hl.y,Gs=In(Ds,zs),At.lastInterval=Gt}else Oi=jn.velocity,Gi=jn.velocityX,Jo=jn.velocityY,Gs=jn.direction;Gt.velocity=Oi,Gt.velocityX=Gi,Gt.velocityY=Jo,Gt.direction=Gs}function _t(At){for(var Gt=[],jn=0;jn<At.pointers.length;)Gt[jn]={clientX:oe(At.pointers[jn].clientX),clientY:oe(At.pointers[jn].clientY)},jn++;return{timeStamp:re(),pointers:Gt,center:Rt(Gt),deltaX:At.deltaX,deltaY:At.deltaY}}function Rt(At){var Gt=At.length;if(Gt===1)return{x:oe(At[0].clientX),y:oe(At[0].clientY)};for(var jn=0,Lr=0,Oi=0;Oi<Gt;)jn+=At[Oi].clientX,Lr+=At[Oi].clientY,Oi++;return{x:oe(jn/Gt),y:oe(Lr/Gt)}}function wn(At,Gt,jn){return{x:Gt/At||0,y:jn/At||0}}function In(At,Gt){return At===Gt?zt:Ve(At)>=Ve(Gt)?At<0?kt:ke:Gt<0?nt:Vt}function Zn(At,Gt,jn){jn||(jn=de);var Lr=Gt[jn[0]]-At[jn[0]],Oi=Gt[jn[1]]-At[jn[1]];return Math.sqrt(Lr*Lr+Oi*Oi)}function vt(At,Gt,jn){jn||(jn=de);var Lr=Gt[jn[0]]-At[jn[0]],Oi=Gt[jn[1]]-At[jn[1]];return Math.atan2(Oi,Lr)*180/Math.PI}function Ee(At,Gt){return vt(Gt[1],Gt[0],Yt)+vt(At[1],At[0],Yt)}function Fe(At,Gt){return Zn(Gt[0],Gt[1],Yt)/Zn(At[0],At[1],Yt)}var st={mousedown:Jt,mousemove:ln,mouseup:Un},It="mousedown",Mt="mousemove mouseup";function En(){this.evEl=It,this.evWin=Mt,this.pressed=!1,sn.apply(this,arguments)}Je(En,sn,{handler:function(Gt){var jn=st[Gt.type];jn&Jt&&Gt.button===0&&(this.pressed=!0),jn&ln&&Gt.which!==1&&(jn=Un),this.pressed&&(jn&Un&&(this.pressed=!1),this.callback(this.manager,jn,{pointers:[Gt],changedPointers:[Gt],pointerType:$n,srcEvent:Gt}))}});var Yn={pointerdown:Jt,pointermove:ln,pointerup:Un,pointercancel:on,pointerout:on},yr={2:hn,3:Pn,4:$n,5:nr},qn="pointerdown",Pe="pointermove pointerup pointercancel";G.MSPointerEvent&&!G.PointerEvent&&(qn="MSPointerDown",Pe="MSPointerMove MSPointerUp MSPointerCancel");function Te(){this.evEl=qn,this.evWin=Pe,sn.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Je(Te,sn,{handler:function(Gt){var jn=this.store,Lr=!1,Oi=Gt.type.toLowerCase().replace("ms",""),Gi=Yn[Oi],Jo=yr[Gt.pointerType]||Gt.pointerType,Gs=Jo==hn,Ds=Qt(jn,Gt.pointerId,"pointerId");Gi&Jt&&(Gt.button===0||Gs)?Ds<0&&(jn.push(Gt),Ds=jn.length-1):Gi&(Un|on)&&(Lr=!0),!(Ds<0)&&(jn[Ds]=Gt,this.callback(this.manager,Gi,{pointers:jn,changedPointers:[Gt],pointerType:Jo,srcEvent:Gt}),Lr&&jn.splice(Ds,1))}});var Ue={touchstart:Jt,touchmove:ln,touchend:Un,touchcancel:on},ot="touchstart",wt="touchstart touchmove touchend touchcancel";function $t(){this.evTarget=ot,this.evWin=wt,this.started=!1,sn.apply(this,arguments)}Je($t,sn,{handler:function(Gt){var jn=Ue[Gt.type];if(jn===Jt&&(this.started=!0),!!this.started){var Lr=vn.call(this,Gt,jn);jn&(Un|on)&&Lr[0].length-Lr[1].length===0&&(this.started=!1),this.callback(this.manager,jn,{pointers:Lr[0],changedPointers:Lr[1],pointerType:hn,srcEvent:Gt})}}});function vn(At,Gt){var jn=De(At.touches),Lr=De(At.changedTouches);return Gt&(Un|on)&&(jn=St(jn.concat(Lr),"identifier",!0)),[jn,Lr]}var Et={touchstart:Jt,touchmove:ln,touchend:Un,touchcancel:on},Kt="touchstart touchmove touchend touchcancel";function Qn(){this.evTarget=Kt,this.targetIds={},sn.apply(this,arguments)}Je(Qn,sn,{handler:function(Gt){var jn=Et[Gt.type],Lr=_r.call(this,Gt,jn);Lr&&this.callback(this.manager,jn,{pointers:Lr[0],changedPointers:Lr[1],pointerType:hn,srcEvent:Gt})}});function _r(At,Gt){var jn=De(At.touches),Lr=this.targetIds;if(Gt&(Jt|ln)&&jn.length===1)return Lr[jn[0].identifier]=!0,[jn,jn];var Oi,Gi,Jo=De(At.changedTouches),Gs=[],Ds=this.target;if(Gi=jn.filter(function(zs){return je(zs.target,Ds)}),Gt===Jt)for(Oi=0;Oi<Gi.length;)Lr[Gi[Oi].identifier]=!0,Oi++;for(Oi=0;Oi<Jo.length;)Lr[Jo[Oi].identifier]&&Gs.push(Jo[Oi]),Gt&(Un|on)&&delete Lr[Jo[Oi].identifier],Oi++;if(Gs.length)return[St(Gi.concat(Gs),"identifier",!0),Gs]}var Vr=2500,pr=25;function zr(){sn.apply(this,arguments);var At=Ot(this.handler,this);this.touch=new Qn(this.manager,At),this.mouse=new En(this.manager,At),this.primaryTouch=null,this.lastTouches=[]}Je(zr,sn,{handler:function(Gt,jn,Lr){var Oi=Lr.pointerType==hn,Gi=Lr.pointerType==$n;if(!(Gi&&Lr.sourceCapabilities&&Lr.sourceCapabilities.firesTouchEvents)){if(Oi)gi.call(this,jn,Lr);else if(Gi&&Sr.call(this,Lr))return;this.callback(Gt,jn,Lr)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function gi(At,Gt){At&Jt?(this.primaryTouch=Gt.changedPointers[0].identifier,wi.call(this,Gt)):At&(Un|on)&&wi.call(this,Gt)}function wi(At){var Gt=At.changedPointers[0];if(Gt.identifier===this.primaryTouch){var jn={x:Gt.clientX,y:Gt.clientY};this.lastTouches.push(jn);var Lr=this.lastTouches,Oi=function(){var Gi=Lr.indexOf(jn);Gi>-1&&Lr.splice(Gi,1)};setTimeout(Oi,Vr)}}function Sr(At){for(var Gt=At.srcEvent.clientX,jn=At.srcEvent.clientY,Lr=0;Lr<this.lastTouches.length;Lr++){var Oi=this.lastTouches[Lr],Gi=Math.abs(Gt-Oi.x),Jo=Math.abs(jn-Oi.y);if(Gi<=pr&&Jo<=pr)return!0}return!1}var Ti=Oe(ce.style,"touchAction"),hi=Ti!==ne,ai="compute",Mo="auto",xi="manipulation",ea="none",va="pan-x",Ro="pan-y",$o=jt();function Be(At,Gt){this.manager=At,this.set(Gt)}Be.prototype={set:function(At){At==ai&&(At=this.compute()),hi&&this.manager.element.style&&$o[At]&&(this.manager.element.style[Ti]=At),this.actions=At.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var At=[];return Y(this.manager.recognizers,function(Gt){dt(Gt.options.enable,[Gt])&&(At=At.concat(Gt.getTouchAction()))}),rt(At.join(" "))},preventDefaults:function(At){var Gt=At.srcEvent,jn=At.offsetDirection;if(this.manager.session.prevented){Gt.preventDefault();return}var Lr=this.actions,Oi=Ze(Lr,ea)&&!$o[ea],Gi=Ze(Lr,Ro)&&!$o[Ro],Jo=Ze(Lr,va)&&!$o[va];if(Oi){var Gs=At.pointers.length===1,Ds=At.distance<2,zs=At.deltaTime<250;if(Gs&&Ds&&zs)return}if(!(Jo&&Gi)&&(Oi||Gi&&jn&U||Jo&&jn&pe))return this.preventSrc(Gt)},preventSrc:function(At){this.manager.session.prevented=!0,At.preventDefault()}};function rt(At){if(Ze(At,ea))return ea;var Gt=Ze(At,va),jn=Ze(At,Ro);return Gt&&jn?ea:Gt||jn?Gt?va:Ro:Ze(At,xi)?xi:Mo}function jt(){if(!hi)return!1;var At={},Gt=G.CSS&&G.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(jn){At[jn]=Gt?G.CSS.supports("touch-action",jn):!0}),At}var un=1,Nn=2,Bn=4,yn=8,Cn=yn,dr=16,hr=32;function Jr(At){this.options=K({},this.defaults,At||{}),this.id=Ke(),this.manager=null,this.options.enable=bt(this.options.enable,!0),this.state=un,this.simultaneous={},this.requireFail=[]}Jr.prototype={defaults:{},set:function(At){return K(this.options,At),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(At){if(Re(At,"recognizeWith",this))return this;var Gt=this.simultaneous;return At=ei(At,this),Gt[At.id]||(Gt[At.id]=At,At.recognizeWith(this)),this},dropRecognizeWith:function(At){return Re(At,"dropRecognizeWith",this)?this:(At=ei(At,this),delete this.simultaneous[At.id],this)},requireFailure:function(At){if(Re(At,"requireFailure",this))return this;var Gt=this.requireFail;return At=ei(At,this),Qt(Gt,At)===-1&&(Gt.push(At),At.requireFailure(this)),this},dropRequireFailure:function(At){if(Re(At,"dropRequireFailure",this))return this;At=ei(At,this);var Gt=Qt(this.requireFail,At);return Gt>-1&&this.requireFail.splice(Gt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(At){return!!this.simultaneous[At.id]},emit:function(At){var Gt=this,jn=this.state;function Lr(Oi){Gt.manager.emit(Oi,At)}jn<yn&&Lr(Gt.options.event+zi(jn)),Lr(Gt.options.event),At.additionalEvent&&Lr(At.additionalEvent),jn>=yn&&Lr(Gt.options.event+zi(jn))},tryEmit:function(At){if(this.canEmit())return this.emit(At);this.state=hr},canEmit:function(){for(var At=0;At<this.requireFail.length;){if(!(this.requireFail[At].state&(hr|un)))return!1;At++}return!0},recognize:function(At){var Gt=K({},At);if(!dt(this.options.enable,[this,Gt])){this.reset(),this.state=hr;return}this.state&(Cn|dr|hr)&&(this.state=un),this.state=this.process(Gt),this.state&(Nn|Bn|yn|dr)&&this.tryEmit(Gt)},process:function(At){},getTouchAction:function(){},reset:function(){}};function zi(At){return At&dr?"cancel":At&yn?"end":At&Bn?"move":At&Nn?"start":""}function Ji(At){return At==Vt?"down":At==nt?"up":At==kt?"left":At==ke?"right":""}function ei(At,Gt){var jn=Gt.manager;return jn?jn.get(At):At}function Hi(){Jr.apply(this,arguments)}Je(Hi,Jr,{defaults:{pointers:1},attrTest:function(At){var Gt=this.options.pointers;return Gt===0||At.pointers.length===Gt},process:function(At){var Gt=this.state,jn=At.eventType,Lr=Gt&(Nn|Bn),Oi=this.attrTest(At);return Lr&&(jn&on||!Oi)?Gt|dr:Lr||Oi?jn&Un?Gt|yn:Gt&Nn?Gt|Bn:Nn:hr}});function Ii(){Hi.apply(this,arguments),this.pX=null,this.pY=null}Je(Ii,Hi,{defaults:{event:"pan",threshold:10,pointers:1,direction:ct},getTouchAction:function(){var At=this.options.direction,Gt=[];return At&U&&Gt.push(Ro),At&pe&&Gt.push(va),Gt},directionTest:function(At){var Gt=this.options,jn=!0,Lr=At.distance,Oi=At.direction,Gi=At.deltaX,Jo=At.deltaY;return Oi&Gt.direction||(Gt.direction&U?(Oi=Gi===0?zt:Gi<0?kt:ke,jn=Gi!=this.pX,Lr=Math.abs(At.deltaX)):(Oi=Jo===0?zt:Jo<0?nt:Vt,jn=Jo!=this.pY,Lr=Math.abs(At.deltaY))),At.direction=Oi,jn&&Lr>Gt.threshold&&Oi&Gt.direction},attrTest:function(At){return Hi.prototype.attrTest.call(this,At)&&(this.state&Nn||!(this.state&Nn)&&this.directionTest(At))},emit:function(At){this.pX=At.deltaX,this.pY=At.deltaY;var Gt=Ji(At.direction);Gt&&(At.additionalEvent=this.options.event+Gt),this._super.emit.call(this,At)}});function Wr(){Hi.apply(this,arguments)}Je(Wr,Hi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ea]},attrTest:function(At){return this._super.attrTest.call(this,At)&&(Math.abs(At.scale-1)>this.options.threshold||this.state&Nn)},emit:function(At){if(At.scale!==1){var Gt=At.scale<1?"in":"out";At.additionalEvent=this.options.event+Gt}this._super.emit.call(this,At)}});function Eo(){Jr.apply(this,arguments),this._timer=null,this._input=null}Je(Eo,Jr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Mo]},process:function(At){var Gt=this.options,jn=At.pointers.length===Gt.pointers,Lr=At.distance<Gt.threshold,Oi=At.deltaTime>Gt.time;if(this._input=At,!Lr||!jn||At.eventType&(Un|on)&&!Oi)this.reset();else if(At.eventType&Jt)this.reset(),this._timer=me(function(){this.state=Cn,this.tryEmit()},Gt.time,this);else if(At.eventType&Un)return Cn;return hr},reset:function(){clearTimeout(this._timer)},emit:function(At){this.state===Cn&&(At&&At.eventType&Un?this.manager.emit(this.options.event+"up",At):(this._input.timeStamp=re(),this.manager.emit(this.options.event,this._input)))}});function ci(){Hi.apply(this,arguments)}Je(ci,Hi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ea]},attrTest:function(At){return this._super.attrTest.call(this,At)&&(Math.abs(At.rotation)>this.options.threshold||this.state&Nn)}});function xo(){Hi.apply(this,arguments)}Je(xo,Hi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:U|pe,pointers:1},getTouchAction:function(){return Ii.prototype.getTouchAction.call(this)},attrTest:function(At){var Gt=this.options.direction,jn;return Gt&(U|pe)?jn=At.overallVelocity:Gt&U?jn=At.overallVelocityX:Gt&pe&&(jn=At.overallVelocityY),this._super.attrTest.call(this,At)&&Gt&At.offsetDirection&&At.distance>this.options.threshold&&At.maxPointers==this.options.pointers&&Ve(jn)>this.options.velocity&&At.eventType&Un},emit:function(At){var Gt=Ji(At.offsetDirection);Gt&&this.manager.emit(this.options.event+Gt,At),this.manager.emit(this.options.event,At)}});function Wi(){Jr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Je(Wi,Jr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xi]},process:function(At){var Gt=this.options,jn=At.pointers.length===Gt.pointers,Lr=At.distance<Gt.threshold,Oi=At.deltaTime<Gt.time;if(this.reset(),At.eventType&Jt&&this.count===0)return this.failTimeout();if(Lr&&Oi&&jn){if(At.eventType!=Un)return this.failTimeout();var Gi=this.pTime?At.timeStamp-this.pTime<Gt.interval:!0,Jo=!this.pCenter||Zn(this.pCenter,At.center)<Gt.posThreshold;this.pTime=At.timeStamp,this.pCenter=At.center,!Jo||!Gi?this.count=1:this.count+=1,this._input=At;var Gs=this.count%Gt.taps;if(Gs===0)return this.hasRequireFailures()?(this._timer=me(function(){this.state=Cn,this.tryEmit()},Gt.interval,this),Nn):Cn}return hr},failTimeout:function(){return this._timer=me(function(){this.state=hr},this.options.interval,this),hr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Cn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function oo(At,Gt){return Gt=Gt||{},Gt.recognizers=bt(Gt.recognizers,oo.defaults.preset),new ma(At,Gt)}oo.VERSION="2.0.7",oo.defaults={domEvents:!1,touchAction:ai,enable:!0,inputTarget:null,inputClass:null,preset:[[ci,{enable:!1}],[Wr,{enable:!1},["rotate"]],[xo,{direction:U}],[Ii,{direction:U},["swipe"]],[Wi],[Wi,{event:"doubletap",taps:2},["tap"]],[Eo]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ao=1,bs=2;function ma(At,Gt){this.options=K({},oo.defaults,Gt||{}),this.options.inputTarget=this.options.inputTarget||At,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=At,this.input=pn(this),this.touchAction=new Be(this,this.options.touchAction),ta(this,!0),Y(this.options.recognizers,function(jn){var Lr=this.add(new jn[0](jn[1]));jn[2]&&Lr.recognizeWith(jn[2]),jn[3]&&Lr.requireFailure(jn[3])},this)}ma.prototype={set:function(At){return K(this.options,At),At.touchAction&&this.touchAction.update(),At.inputTarget&&(this.input.destroy(),this.input.target=At.inputTarget,this.input.init()),this},stop:function(At){this.session.stopped=At?bs:Ao},recognize:function(At){var Gt=this.session;if(!Gt.stopped){this.touchAction.preventDefaults(At);var jn,Lr=this.recognizers,Oi=Gt.curRecognizer;(!Oi||Oi&&Oi.state&Cn)&&(Oi=Gt.curRecognizer=null);for(var Gi=0;Gi<Lr.length;)jn=Lr[Gi],Gt.stopped!==bs&&(!Oi||jn==Oi||jn.canRecognizeWith(Oi))?jn.recognize(At):jn.reset(),!Oi&&jn.state&(Nn|Bn|yn)&&(Oi=Gt.curRecognizer=jn),Gi++}},get:function(At){if(At instanceof Jr)return At;for(var Gt=this.recognizers,jn=0;jn<Gt.length;jn++)if(Gt[jn].options.event==At)return Gt[jn];return null},add:function(At){if(Re(At,"add",this))return this;var Gt=this.get(At.options.event);return Gt&&this.remove(Gt),this.recognizers.push(At),At.manager=this,this.touchAction.update(),At},remove:function(At){if(Re(At,"remove",this))return this;if(At=this.get(At),At){var Gt=this.recognizers,jn=Qt(Gt,At);jn!==-1&&(Gt.splice(jn,1),this.touchAction.update())}return this},on:function(At,Gt){if(At!==ne&&Gt!==ne){var jn=this.handlers;return Y(ut(At),function(Lr){jn[Lr]=jn[Lr]||[],jn[Lr].push(Gt)}),this}},off:function(At,Gt){if(At!==ne){var jn=this.handlers;return Y(ut(At),function(Lr){Gt?jn[Lr]&&jn[Lr].splice(Qt(jn[Lr],Gt),1):delete jn[Lr]}),this}},emit:function(At,Gt){this.options.domEvents&&vs(At,Gt);var jn=this.handlers[At]&&this.handlers[At].slice();if(!(!jn||!jn.length)){Gt.type=At,Gt.preventDefault=function(){Gt.srcEvent.preventDefault()};for(var Lr=0;Lr<jn.length;)jn[Lr](Gt),Lr++}},destroy:function(){this.element&&ta(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ta(At,Gt){var jn=At.element;if(jn.style){var Lr;Y(At.options.cssProps,function(Oi,Gi){Lr=Oe(jn.style,Gi),Gt?(At.oldCssProps[Lr]=jn.style[Lr],jn.style[Lr]=Oi):jn.style[Lr]=At.oldCssProps[Lr]||""}),Gt||(At.oldCssProps={})}}function vs(At,Gt){var jn=E.createEvent("Event");jn.initEvent(At,!0,!0),jn.gesture=Gt,Gt.target.dispatchEvent(jn)}K(oo,{INPUT_START:Jt,INPUT_MOVE:ln,INPUT_END:Un,INPUT_CANCEL:on,STATE_POSSIBLE:un,STATE_BEGAN:Nn,STATE_CHANGED:Bn,STATE_ENDED:yn,STATE_RECOGNIZED:Cn,STATE_CANCELLED:dr,STATE_FAILED:hr,DIRECTION_NONE:zt,DIRECTION_LEFT:kt,DIRECTION_RIGHT:ke,DIRECTION_UP:nt,DIRECTION_DOWN:Vt,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:pe,DIRECTION_ALL:ct,Manager:ma,Input:sn,TouchAction:Be,TouchInput:Qn,MouseInput:En,PointerEventInput:Te,TouchMouseInput:zr,SingleTouchInput:$t,Recognizer:Jr,AttrRecognizer:Hi,Tap:Wi,Pan:Ii,Swipe:xo,Pinch:Wr,Rotate:ci,Press:Eo,on:Me,off:we,each:Y,merge:et,extend:_e,assign:K,inherit:Je,bindFn:Ot,prefixed:Oe});var ms=typeof G!="undefined"?G:typeof self!="undefined"?self:{};ms.Hammer=oo,q=function(){return oo}.call(W,D,W,mt),q!==ne&&(mt.exports=q)})(window,document,"Hammer")},47443:function(mt,W,D){var q=D(42118);function G(E,he){var ne=E==null?0:E.length;return!!ne&&q(E,he,0)>-1}mt.exports=G},1196:function(mt){function W(D,q,G){for(var E=-1,he=D==null?0:D.length;++E<he;)if(G(q,D[E]))return!0;return!1}mt.exports=W},29750:function(mt){function W(D,q,G){return D===D&&(G!==void 0&&(D=D<=G?D:G),q!==void 0&&(D=D>=q?D:q)),D}mt.exports=W},41848:function(mt){function W(D,q,G,E){for(var he=D.length,ne=G+(E?1:-1);E?ne--:++ne<he;)if(q(D[ne],ne,D))return ne;return-1}mt.exports=W},42118:function(mt,W,D){var q=D(41848),G=D(62722),E=D(39375);function he(ne,ue,ce){return ue===ue?E(ne,ue,ce):q(ne,G,ce)}mt.exports=he},74221:function(mt){function W(D,q,G,E){for(var he=G-1,ne=D.length;++he<ne;)if(E(D[he],q))return he;return-1}mt.exports=W},62722:function(mt){function W(D){return D!==D}mt.exports=W},65464:function(mt,W,D){var q=D(29932),G=D(42118),E=D(74221),he=D(51717),ne=D(6450),ue=Array.prototype,ce=ue.splice;function xe(oe,Ve,re,me){var Re=me?E:G,Y=-1,le=Ve.length,K=oe;for(oe===Ve&&(Ve=ne(Ve)),re&&(K=q(oe,he(re)));++Y<le;)for(var _e=0,et=Ve[Y],Je=re?re(et):et;(_e=Re(K,Je,_e,me))>-1;)K!==oe&&ce.call(K,_e,1),ce.call(oe,_e,1);return oe}mt.exports=xe},45652:function(mt,W,D){var q=D(88668),G=D(47443),E=D(1196),he=D(74757),ne=D(23593),ue=D(21814),ce=200;function xe(oe,Ve,re){var me=-1,Re=G,Y=oe.length,le=!0,K=[],_e=K;if(re)le=!1,Re=E;else if(Y>=ce){var et=Ve?null:ne(oe);if(et)return ue(et);le=!1,Re=he,_e=new q}else _e=Ve?[]:K;e:for(;++me<Y;){var Je=oe[me],Ot=Ve?Ve(Je):Je;if(Je=re||Je!==0?Je:0,le&&Ot===Ot){for(var dt=_e.length;dt--;)if(_e[dt]===Ot)continue e;Ve&&_e.push(Ot),K.push(Je)}else Re(_e,Ot,re)||(_e!==K&&_e.push(Ot),K.push(Je))}return K}mt.exports=xe},23593:function(mt,W,D){var q=D(58525),G=D(28117),E=D(21814),he=1/0,ne=q&&1/E(new q([,-0]))[1]==he?function(ue){return new q(ue)}:G;mt.exports=ne},39375:function(mt){function W(D,q,G){for(var E=G-1,he=D.length;++E<he;)if(D[E]===q)return E;return-1}mt.exports=W},74691:function(mt,W,D){var q=D(29750),G=D(14841);function E(he,ne,ue){return ue===void 0&&(ue=ne,ne=void 0),ue!==void 0&&(ue=G(ue),ue=ue===ue?ue:0),ne!==void 0&&(ne=G(ne),ne=ne===ne?ne:0),q(G(he),ne,ue)}mt.exports=E},51584:function(mt,W,D){var q=D(44239),G=D(37005),E="[object Boolean]";function he(ne){return ne===!0||ne===!1||G(ne)&&q(ne)==E}mt.exports=he},18446:function(mt,W,D){var q=D(90939);function G(E,he){return q(E,he)}mt.exports=G},14293:function(mt){function W(D){return D==null}mt.exports=W},81763:function(mt,W,D){var q=D(44239),G=D(37005),E="[object Number]";function he(ne){return typeof ne=="number"||G(ne)&&q(ne)==E}mt.exports=he},52353:function(mt){function W(D){return D===void 0}mt.exports=W},30236:function(mt,W,D){var q=D(42980),G=D(21463),E=G(function(he,ne,ue,ce){q(he,ne,ue,ce)});mt.exports=E},28117:function(mt){function W(){}mt.exports=W},97019:function(mt,W,D){var q=D(5976),G=D(45604),E=q(G);mt.exports=E},45604:function(mt,W,D){var q=D(65464);function G(E,he){return E&&E.length&&he&&he.length?q(E,he):E}mt.exports=G},44908:function(mt,W,D){var q=D(45652);function G(E){return E&&E.length?q(E):[]}mt.exports=G},73955:function(mt,W,D){var q=D(79833),G=0;function E(he){var ne=++G;return q(he)+ne}mt.exports=E},6158:function(mt){(function(W,D){mt.exports=D()})(this,function(){"use strict";var W,D,q;function G(E,he){if(!W)W=he;else if(!D)D=he;else{var ne="var sharedChunk = {}; ("+W+")(sharedChunk); ("+D+")(sharedChunk);",ue={};W(ue),q=he(ue),typeof window!="undefined"&&(q.workerUrl=window.URL.createObjectURL(new Blob([ne],{type:"text/javascript"})))}}return G(["exports"],function(E){"use strict";function he(u,d){return u(d={exports:{}},d.exports),d.exports}var ne=ue;function ue(u,d,g,A){this.cx=3*u,this.bx=3*(g-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(A-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=A,this.p2x=g,this.p2y=A}ue.prototype.sampleCurveX=function(u){return((this.ax*u+this.bx)*u+this.cx)*u},ue.prototype.sampleCurveY=function(u){return((this.ay*u+this.by)*u+this.cy)*u},ue.prototype.sampleCurveDerivativeX=function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},ue.prototype.solveCurveX=function(u,d){var g,A,P,B,j;for(d===void 0&&(d=1e-6),P=u,j=0;j<8;j++){if(B=this.sampleCurveX(P)-u,Math.abs(B)<d)return P;var ee=this.sampleCurveDerivativeX(P);if(Math.abs(ee)<1e-6)break;P-=B/ee}if((P=u)<(g=0))return g;if(P>(A=1))return A;for(;g<A;){if(B=this.sampleCurveX(P),Math.abs(B-u)<d)return P;u>B?g=P:A=P,P=.5*(A-g)+g}return P},ue.prototype.solve=function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))};var ce=xe;function xe(u,d){this.x=u,this.y=d}xe.prototype={clone:function(){return new xe(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,d){return this.clone()._rotateAround(u,d)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var d=u.x-this.x,g=u.y-this.y;return d*d+g*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,d){return Math.atan2(this.x*d-this.y*u,this.x*u+this.y*d)},_matMult:function(u){var d=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=d,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var d=Math.cos(u),g=Math.sin(u),A=g*this.x+d*this.y;return this.x=d*this.x-g*this.y,this.y=A,this},_rotateAround:function(u,d){var g=Math.cos(u),A=Math.sin(u),P=d.y+A*(this.x-d.x)+g*(this.y-d.y);return this.x=d.x+g*(this.x-d.x)-A*(this.y-d.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},xe.convert=function(u){return u instanceof xe?u:Array.isArray(u)?new xe(u[0],u[1]):u};var oe=typeof self!="undefined"?self:{},Ve=Math.pow(2,53)-1;function re(u,d,g,A){var P=new ne(u,d,g,A);return function(B){return P.solve(B)}}var me=re(.25,.1,.25,1);function Re(u,d,g){return Math.min(g,Math.max(d,u))}function Y(u,d,g){var A=g-d,P=((u-d)%A+A)%A+d;return P===d?g:P}function le(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var B=P[A];for(var j in B)u[j]=B[j]}return u}var K=1;function _e(){return K++}function et(){return function u(d){return d?(d^16*Math.random()>>d/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()}function Je(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)}function Ot(u,d){u.forEach(function(g){d[g]&&(d[g]=d[g].bind(d))})}function dt(u,d){return u.indexOf(d,u.length-d.length)!==-1}function bt(u,d,g){var A={};for(var P in u)A[P]=d.call(g||this,u[P],P,u);return A}function Me(u,d,g){var A={};for(var P in u)d.call(g||this,u[P],P,u)&&(A[P]=u[P]);return A}function we(u){return Array.isArray(u)?u.map(we):typeof u=="object"&&u?bt(u,we):u}var je={};function Ze(u){je[u]||(typeof console!="undefined"&&console.warn(u),je[u]=!0)}function ut(u,d,g){return(g.y-u.y)*(d.x-u.x)>(d.y-u.y)*(g.x-u.x)}function Qt(u){for(var d=0,g=0,A=u.length,P=A-1,B=void 0,j=void 0;g<A;P=g++)d+=((j=u[P]).x-(B=u[g]).x)*(B.y+j.y);return d}function De(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function St(u){var d={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(A,P,B,j){var ee=B||j;return d[P]=!ee||ee.toLowerCase(),""}),d["max-age"]){var g=parseInt(d["max-age"],10);isNaN(g)?delete d["max-age"]:d["max-age"]=g}return d}var Oe=null;function it(u){if(Oe==null){var d=u.navigator?u.navigator.userAgent:null;Oe=!!u.safari||!(!d||!(/\b(iPad|iPhone|iPod)\b/.test(d)||d.match("Safari")&&!d.match("Chrome")))}return Oe}function Ke(u){try{var d=oe[u];return d.setItem("_mapbox_test_",1),d.removeItem("_mapbox_test_"),!0}catch(g){return!1}}var Xe,Pt,xt,Ie,Wt=oe.performance&&oe.performance.now?oe.performance.now.bind(oe.performance):Date.now.bind(Date),hn=oe.requestAnimationFrame||oe.mozRequestAnimationFrame||oe.webkitRequestAnimationFrame||oe.msRequestAnimationFrame,Pn=oe.cancelAnimationFrame||oe.mozCancelAnimationFrame||oe.webkitCancelAnimationFrame||oe.msCancelAnimationFrame,$n={now:Wt,frame:function(u){var d=hn(u);return{cancel:function(){return Pn(d)}}},getImageData:function(u,d){d===void 0&&(d=0);var g=oe.document.createElement("canvas"),A=g.getContext("2d");if(!A)throw new Error("failed to create canvas 2d context");return g.width=u.width,g.height=u.height,A.drawImage(u,0,0,u.width,u.height),A.getImageData(-d,-d,u.width+2*d,u.height+2*d)},resolveURL:function(u){return Xe||(Xe=oe.document.createElement("a")),Xe.href=u,Xe.href},hardwareConcurrency:oe.navigator&&oe.navigator.hardwareConcurrency||4,get devicePixelRatio(){return oe.devicePixelRatio},get prefersReducedMotion(){return!!oe.matchMedia&&(Pt==null&&(Pt=oe.matchMedia("(prefers-reduced-motion: reduce)")),Pt.matches)}},nr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ft={supported:!1,testSupport:function(u){!Jt&&Ie&&(ln?Un(u):xt=u)}},Jt=!1,ln=!1;function Un(u){var d=u.createTexture();u.bindTexture(u.TEXTURE_2D,d);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Ie),u.isContextLost())return;Ft.supported=!0}catch(g){}u.deleteTexture(d),Jt=!0}oe.document&&((Ie=oe.document.createElement("img")).onload=function(){xt&&Un(xt),xt=null,ln=!0},Ie.onerror=function(){Jt=!0,xt=null},Ie.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var on="01",zt=function(u,d){this._transformRequestFn=u,this._customAccessToken=d,this._createSkuToken()};function kt(u){return u.indexOf("mapbox:")===0}zt.prototype._createSkuToken=function(){var u=function(){for(var d="",g=0;g<10;g++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",on,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=u.token,this._skuTokenExpiresAt=u.tokenExpiresAt},zt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},zt.prototype.transformRequest=function(u,d){return this._transformRequestFn&&this._transformRequestFn(u,d)||{url:u}},zt.prototype.normalizeStyleURL=function(u,d){if(!kt(u))return u;var g=U(u);return g.path="/styles/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},zt.prototype.normalizeGlyphsURL=function(u,d){if(!kt(u))return u;var g=U(u);return g.path="/fonts/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},zt.prototype.normalizeSourceURL=function(u,d){if(!kt(u))return u;var g=U(u);return g.path="/v4/"+g.authority+".json",g.params.push("secure"),this._makeAPIURL(g,this._customAccessToken||d)},zt.prototype.normalizeSpriteURL=function(u,d,g,A){var P=U(u);return kt(u)?(P.path="/styles/v1"+P.path+"/sprite"+d+g,this._makeAPIURL(P,this._customAccessToken||A)):(P.path+=""+d+g,pe(P))},zt.prototype.normalizeTileURL=function(u,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),u&&!kt(u))return u;var g=U(u);g.path=g.path.replace(/(\.(png|jpg)\d*)(?=$)/,($n.devicePixelRatio>=2||d===512?"@2x":"")+(Ft.supported?".webp":"$1")),g.path=g.path.replace(/^.+\/v4\//,"/"),g.path="/v4"+g.path;var A=this._customAccessToken||function(P){for(var B=0,j=P;B<j.length;B+=1){var ee=j[B].match(/^access_token=(.*)$/);if(ee)return ee[1]}return null}(g.params)||nr.ACCESS_TOKEN;return nr.REQUIRE_ACCESS_TOKEN&&A&&this._skuToken&&g.params.push("sku="+this._skuToken),this._makeAPIURL(g,A)},zt.prototype.canonicalizeTileURL=function(u,d){var g=U(u);if(!g.path.match(/(^\/v4\/)/)||!g.path.match(/\.[\w]+$/))return u;var A="mapbox://tiles/";A+=g.path.replace("/v4/","");var P=g.params;return d&&(P=P.filter(function(B){return!B.match(/^access_token=/)})),P.length&&(A+="?"+P.join("&")),A},zt.prototype.canonicalizeTileset=function(u,d){for(var g=!!d&&kt(d),A=[],P=0,B=u.tiles||[];P<B.length;P+=1){var j=B[P];nt(j)?A.push(this.canonicalizeTileURL(j,g)):A.push(j)}return A},zt.prototype._makeAPIURL=function(u,d){var g="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",A=U(nr.API_URL);if(u.protocol=A.protocol,u.authority=A.authority,u.protocol==="http"){var P=u.params.indexOf("secure");P>=0&&u.params.splice(P,1)}if(A.path!=="/"&&(u.path=""+A.path+u.path),!nr.REQUIRE_ACCESS_TOKEN)return pe(u);if(!(d=d||nr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+g);if(d[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+g);return u.params=u.params.filter(function(B){return B.indexOf("access_token")===-1}),u.params.push("access_token="+d),pe(u)};var ke=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function nt(u){return ke.test(u)}var Vt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function U(u){var d=u.match(Vt);if(!d)throw new Error("Unable to parse URL object");return{protocol:d[1],authority:d[2],path:d[3]||"/",params:d[4]?d[4].split("&"):[]}}function pe(u){var d=u.params.length?"?"+u.params.join("&"):"";return u.protocol+"://"+u.authority+u.path+d}function ct(u){if(!u)return null;var d=u.split(".");if(!d||d.length!==3)return null;try{return JSON.parse(decodeURIComponent(oe.atob(d[1]).split("").map(function(g){return"%"+("00"+g.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(g){return null}}var de=function(u){this.type=u,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};de.prototype.getStorageKey=function(u){var d,g=ct(nr.ACCESS_TOKEN);return d=g&&g.u?oe.btoa(encodeURIComponent(g.u).replace(/%([0-9A-F]{2})/g,function(A,P){return String.fromCharCode(+("0x"+P))})):nr.ACCESS_TOKEN||"",u?"mapbox.eventData."+u+":"+d:"mapbox.eventData:"+d},de.prototype.fetchEventData=function(){var u=Ke("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(u)try{var A=oe.localStorage.getItem(d);A&&(this.eventData=JSON.parse(A));var P=oe.localStorage.getItem(g);P&&(this.anonId=P)}catch(B){Ze("Unable to read from LocalStorage")}},de.prototype.saveEventData=function(){var u=Ke("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(u)try{oe.localStorage.setItem(g,this.anonId),Object.keys(this.eventData).length>=1&&oe.localStorage.setItem(d,JSON.stringify(this.eventData))}catch(A){Ze("Unable to write to LocalStorage")}},de.prototype.processRequests=function(u){},de.prototype.postEvent=function(u,d,g,A){var P=this;if(nr.EVENTS_URL){var B=U(nr.EVENTS_URL);B.params.push("access_token="+(A||nr.ACCESS_TOKEN||""));var j={event:this.type,created:new Date(u).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:on,userId:this.anonId},ee=d?le(j,d):j,be={url:pe(B),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ee])};this.pendingRequest=qn(be,function(Ne){P.pendingRequest=null,g(Ne),P.saveEventData(),P.processRequests(A)})}},de.prototype.queueRequest=function(u,d){this.queue.push(u),this.processRequests(d)};var Yt,sn,pn=function(u){function d(){u.call(this,"map.load"),this.success={},this.skuToken=""}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.postMapLoadEvent=function(g,A,P,B){this.skuToken=P;var j=!(!B&&!nr.ACCESS_TOKEN),ee=Array.isArray(g)&&g.some(function(be){return kt(be)||nt(be)});nr.EVENTS_URL&&j&&ee&&this.queueRequest({id:A,timestamp:Date.now()},B)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){var P=this.queue.shift(),B=P.id,j=P.timestamp;B&&this.success[B]||(this.anonId||this.fetchEventData(),Je(this.anonId)||(this.anonId=et()),this.postEvent(j,{skuToken:this.skuToken},function(ee){ee||B&&(A.success[B]=!0)},g))}},d}(de),Dn=new(function(u){function d(g){u.call(this,"appUserTurnstile"),this._customAccessToken=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.postTurnstileEvent=function(g,A){nr.EVENTS_URL&&nr.ACCESS_TOKEN&&Array.isArray(g)&&g.some(function(P){return kt(P)||nt(P)})&&this.queueRequest(Date.now(),A)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var P=ct(nr.ACCESS_TOKEN),B=P?P.u:nr.ACCESS_TOKEN,j=B!==this.eventData.tokenU;Je(this.anonId)||(this.anonId=et(),j=!0);var ee=this.queue.shift();if(this.eventData.lastSuccess){var be=new Date(this.eventData.lastSuccess),Ne=new Date(ee),$e=(ee-this.eventData.lastSuccess)/864e5;j=j||$e>=1||$e<-1||be.getDate()!==Ne.getDate()}else j=!0;if(!j)return this.processRequests();this.postEvent(ee,{"enabled.telemetry":!1},function(at){at||(A.eventData.lastSuccess=ee,A.eventData.tokenU=B)},g)}},d}(de)),Wn=Dn.postTurnstileEvent.bind(Dn),Xn=new pn,dn=Xn.postMapLoadEvent.bind(Xn),_t=500,Rt=50;function wn(){oe.caches&&!Yt&&(Yt=oe.caches.open("mapbox-tiles"))}function In(u){var d=u.indexOf("?");return d<0?u:u.slice(0,d)}var Zn,vt=1/0;function Ee(){return Zn==null&&(Zn=oe.OffscreenCanvas&&new oe.OffscreenCanvas(1,1).getContext("2d")&&typeof oe.createImageBitmap=="function"),Zn}var Fe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Fe);var st=function(u){function d(g,A,P){A===401&&nt(P)&&(g+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),u.call(this,g),this.status=A,this.url=P,this.name=this.constructor.name,this.message=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},d}(Error),It=De()?function(){return self.worker&&self.worker.referrer}:function(){return(oe.location.protocol==="blob:"?oe.parent:oe).location.href},Mt,En,Yn=function(u,d){if(!(/^file:/.test(g=u.url)||/^file:/.test(It())&&!/^\w+:/.test(g))){if(oe.fetch&&oe.Request&&oe.AbortController&&oe.Request.prototype.hasOwnProperty("signal"))return function(A,P){var B,j=new oe.AbortController,ee=new oe.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:It(),signal:j.signal}),be=!1,Ne=!1,$e=(B=ee.url).indexOf("sku=")>0&&nt(B);A.type==="json"&&ee.headers.set("Accept","application/json");var at=function(Nt,fn,_n){if(!Ne){if(Nt&&Nt.message!=="SecurityError"&&Ze(Nt),fn&&_n)return Tt(fn);var Hn=Date.now();oe.fetch(ee).then(function(Ln){if(Ln.ok){var cr=$e?Ln.clone():null;return Tt(Ln,cr,Hn)}return P(new st(Ln.statusText,Ln.status,A.url))}).catch(function(Ln){Ln.code!==20&&P(new Error(Ln.message))})}},Tt=function(Nt,fn,_n){(A.type==="arrayBuffer"?Nt.arrayBuffer():A.type==="json"?Nt.json():Nt.text()).then(function(Hn){Ne||(fn&&_n&&function(Ln,cr,gr){if(wn(),Yt){var Ir={status:cr.status,statusText:cr.statusText,headers:new oe.Headers};cr.headers.forEach(function(Xr,Mi){return Ir.headers.set(Mi,Xr)});var Nr=St(cr.headers.get("Cache-Control")||"");Nr["no-store"]||(Nr["max-age"]&&Ir.headers.set("Expires",new Date(gr+1e3*Nr["max-age"]).toUTCString()),new Date(Ir.headers.get("Expires")).getTime()-gr<42e4||function(Xr,Mi){if(sn===void 0)try{new Response(new ReadableStream),sn=!0}catch(Yi){sn=!1}sn?Mi(Xr.body):Xr.blob().then(Mi)}(cr,function(Xr){var Mi=new oe.Response(Xr,Ir);wn(),Yt&&Yt.then(function(Yi){return Yi.put(In(Ln.url),Mi)}).catch(function(Yi){return Ze(Yi.message)})}))}}(ee,fn,_n),be=!0,P(null,Hn,Nt.headers.get("Cache-Control"),Nt.headers.get("Expires")))}).catch(function(Hn){Ne||P(new Error(Hn.message))})};return $e?function(Nt,fn){if(wn(),!Yt)return fn(null);var _n=In(Nt.url);Yt.then(function(Hn){Hn.match(_n).then(function(Ln){var cr=function(gr){if(!gr)return!1;var Ir=new Date(gr.headers.get("Expires")||0),Nr=St(gr.headers.get("Cache-Control")||"");return Ir>Date.now()&&!Nr["no-cache"]}(Ln);Hn.delete(_n),cr&&Hn.put(_n,Ln.clone()),fn(null,Ln,cr)}).catch(fn)}).catch(fn)}(ee,at):at(null,null),{cancel:function(){Ne=!0,be||j.abort()}}}(u,d);if(De()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,d,void 0,!0)}var g;return function(A,P){var B=new oe.XMLHttpRequest;for(var j in B.open(A.method||"GET",A.url,!0),A.type==="arrayBuffer"&&(B.responseType="arraybuffer"),A.headers)B.setRequestHeader(j,A.headers[j]);return A.type==="json"&&(B.responseType="text",B.setRequestHeader("Accept","application/json")),B.withCredentials=A.credentials==="include",B.onerror=function(){P(new Error(B.statusText))},B.onload=function(){if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){var ee=B.response;if(A.type==="json")try{ee=JSON.parse(B.response)}catch(be){return P(be)}P(null,ee,B.getResponseHeader("Cache-Control"),B.getResponseHeader("Expires"))}else P(new st(B.statusText,B.status,A.url))},B.send(A.body),{cancel:function(){return B.abort()}}}(u,d)},yr=function(u,d){return Yn(le(u,{type:"arrayBuffer"}),d)},qn=function(u,d){return Yn(le(u,{method:"POST"}),d)},Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Mt=[],En=0;var Te=function(u,d){if(Ft.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),En>=nr.MAX_PARALLEL_IMAGE_REQUESTS){var g={requestParameters:u,callback:d,cancelled:!1,cancel:function(){this.cancelled=!0}};return Mt.push(g),g}En++;var A=!1,P=function(){if(!A)for(A=!0,En--;Mt.length&&En<nr.MAX_PARALLEL_IMAGE_REQUESTS;){var j=Mt.shift();j.cancelled||(j.cancel=Te(j.requestParameters,j.callback).cancel)}},B=yr(u,function(j,ee,be,Ne){P(),j?d(j):ee&&(Ee()?function($e,at){var Tt=new oe.Blob([new Uint8Array($e)],{type:"image/png"});oe.createImageBitmap(Tt).then(function(Nt){at(null,Nt)}).catch(function(Nt){at(new Error("Could not load image because of "+Nt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(ee,d):function($e,at,Tt,Nt){var fn=new oe.Image,_n=oe.URL;fn.onload=function(){at(null,fn),_n.revokeObjectURL(fn.src),fn.onload=null,oe.requestAnimationFrame(function(){fn.src=Pe})},fn.onerror=function(){return at(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Hn=new oe.Blob([new Uint8Array($e)],{type:"image/png"});fn.cacheControl=Tt,fn.expires=Nt,fn.src=$e.byteLength?_n.createObjectURL(Hn):Pe}(ee,d,be,Ne))});return{cancel:function(){B.cancel(),P()}}};function Ue(u,d,g){g[u]&&g[u].indexOf(d)!==-1||(g[u]=g[u]||[],g[u].push(d))}function ot(u,d,g){if(g&&g[u]){var A=g[u].indexOf(d);A!==-1&&g[u].splice(A,1)}}var wt=function(u,d){d===void 0&&(d={}),le(this,d),this.type=u},$t=function(u){function d(g,A){A===void 0&&(A={}),u.call(this,"error",le({error:g},A))}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(wt),vn=function(){};vn.prototype.on=function(u,d){return this._listeners=this._listeners||{},Ue(u,d,this._listeners),this},vn.prototype.off=function(u,d){return ot(u,d,this._listeners),ot(u,d,this._oneTimeListeners),this},vn.prototype.once=function(u,d){return this._oneTimeListeners=this._oneTimeListeners||{},Ue(u,d,this._oneTimeListeners),this},vn.prototype.fire=function(u,d){typeof u=="string"&&(u=new wt(u,d||{}));var g=u.type;if(this.listens(g)){u.target=this;for(var A=0,P=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];A<P.length;A+=1)P[A].call(this,u);for(var B=0,j=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];B<j.length;B+=1){var ee=j[B];ot(g,ee,this._oneTimeListeners),ee.call(this,u)}var be=this._eventedParent;be&&(le(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),be.fire(u))}else u instanceof $t&&console.error(u.error);return this},vn.prototype.listens=function(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)},vn.prototype.setEventedParent=function(u,d){return this._eventedParent=u,this._eventedParentData=d,this};var Et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Kt=function(u,d,g,A){this.message=(u?u+": ":"")+g,A&&(this.identifier=A),d!=null&&d.__line__&&(this.line=d.__line__)};function Qn(u){var d=u.value;return d?[new Kt(u.key,d,"constants have been deprecated as of v8")]:[]}function _r(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var B=P[A];for(var j in B)u[j]=B[j]}return u}function Vr(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function pr(u){if(Array.isArray(u))return u.map(pr);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){var d={};for(var g in u)d[g]=pr(u[g]);return d}return Vr(u)}var zr=function(u){function d(g,A){u.call(this,A),this.message=A,this.key=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Error),gi=function(u,d){d===void 0&&(d=[]),this.parent=u,this.bindings={};for(var g=0,A=d;g<A.length;g+=1){var P=A[g];this.bindings[P[0]]=P[1]}};gi.prototype.concat=function(u){return new gi(this,u)},gi.prototype.get=function(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(u+" not found in scope.")},gi.prototype.has=function(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)};var wi={kind:"null"},Sr={kind:"number"},Ti={kind:"string"},hi={kind:"boolean"},ai={kind:"color"},Mo={kind:"object"},xi={kind:"value"},ea={kind:"collator"},va={kind:"formatted"},Ro={kind:"resolvedImage"};function $o(u,d){return{kind:"array",itemType:u,N:d}}function Be(u){if(u.kind==="array"){var d=Be(u.itemType);return typeof u.N=="number"?"array<"+d+", "+u.N+">":u.itemType.kind==="value"?"array":"array<"+d+">"}return u.kind}var rt=[wi,Sr,Ti,hi,ai,va,Mo,$o(xi),Ro];function jt(u,d){if(d.kind==="error")return null;if(u.kind==="array"){if(d.kind==="array"&&(d.N===0&&d.itemType.kind==="value"||!jt(u.itemType,d.itemType))&&(typeof u.N!="number"||u.N===d.N))return null}else{if(u.kind===d.kind)return null;if(u.kind==="value"){for(var g=0,A=rt;g<A.length;g+=1)if(!jt(A[g],d))return null}}return"Expected "+Be(u)+" but found "+Be(d)+" instead."}function un(u,d){return d.some(function(g){return g.kind===u.kind})}function Nn(u,d){return d.some(function(g){return g==="null"?u===null:g==="array"?Array.isArray(u):g==="object"?u&&!Array.isArray(u)&&typeof u=="object":g===typeof u})}var Bn=he(function(u,d){var g={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function A(ee){return(ee=Math.round(ee))<0?0:ee>255?255:ee}function P(ee){return A(ee[ee.length-1]==="%"?parseFloat(ee)/100*255:parseInt(ee))}function B(ee){return(be=ee[ee.length-1]==="%"?parseFloat(ee)/100:parseFloat(ee))<0?0:be>1?1:be;var be}function j(ee,be,Ne){return Ne<0?Ne+=1:Ne>1&&(Ne-=1),6*Ne<1?ee+(be-ee)*Ne*6:2*Ne<1?be:3*Ne<2?ee+(be-ee)*(2/3-Ne)*6:ee}try{d.parseCSSColor=function(ee){var be,Ne=ee.replace(/ /g,"").toLowerCase();if(Ne in g)return g[Ne].slice();if(Ne[0]==="#")return Ne.length===4?(be=parseInt(Ne.substr(1),16))>=0&&be<=4095?[(3840&be)>>4|(3840&be)>>8,240&be|(240&be)>>4,15&be|(15&be)<<4,1]:null:Ne.length===7&&(be=parseInt(Ne.substr(1),16))>=0&&be<=16777215?[(16711680&be)>>16,(65280&be)>>8,255&be,1]:null;var $e=Ne.indexOf("("),at=Ne.indexOf(")");if($e!==-1&&at+1===Ne.length){var Tt=Ne.substr(0,$e),Nt=Ne.substr($e+1,at-($e+1)).split(","),fn=1;switch(Tt){case"rgba":if(Nt.length!==4)return null;fn=B(Nt.pop());case"rgb":return Nt.length!==3?null:[P(Nt[0]),P(Nt[1]),P(Nt[2]),fn];case"hsla":if(Nt.length!==4)return null;fn=B(Nt.pop());case"hsl":if(Nt.length!==3)return null;var _n=(parseFloat(Nt[0])%360+360)%360/360,Hn=B(Nt[1]),Ln=B(Nt[2]),cr=Ln<=.5?Ln*(Hn+1):Ln+Hn-Ln*Hn,gr=2*Ln-cr;return[A(255*j(gr,cr,_n+1/3)),A(255*j(gr,cr,_n)),A(255*j(gr,cr,_n-1/3)),fn];default:return null}}return null}}catch(ee){}}).parseCSSColor,yn=function(u,d,g,A){A===void 0&&(A=1),this.r=u,this.g=d,this.b=g,this.a=A};yn.parse=function(u){if(u){if(u instanceof yn)return u;if(typeof u=="string"){var d=Bn(u);if(d)return new yn(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3])}}},yn.prototype.toString=function(){var u=this.toArray(),d=u[1],g=u[2],A=u[3];return"rgba("+Math.round(u[0])+","+Math.round(d)+","+Math.round(g)+","+A+")"},yn.prototype.toArray=function(){var u=this.a;return u===0?[0,0,0,0]:[255*this.r/u,255*this.g/u,255*this.b/u,u]},yn.black=new yn(0,0,0,1),yn.white=new yn(1,1,1,1),yn.transparent=new yn(0,0,0,0),yn.red=new yn(1,0,0,1);var Cn=function(u,d,g){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Cn.prototype.compare=function(u,d){return this.collator.compare(u,d)},Cn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var dr=function(u,d,g,A,P){this.text=u,this.image=d,this.scale=g,this.fontStack=A,this.textColor=P},hr=function(u){this.sections=u};hr.fromString=function(u){return new hr([new dr(u,null,null,null,null)])},hr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(u){return u.text.length!==0||u.image&&u.image.name.length!==0})},hr.factory=function(u){return u instanceof hr?u:hr.fromString(u)},hr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(u){return u.text}).join("")},hr.prototype.serialize=function(){for(var u=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];if(A.image)u.push(["image",A.image.name]);else{u.push(A.text);var P={};A.fontStack&&(P["text-font"]=["literal",A.fontStack.split(",")]),A.scale&&(P["font-scale"]=A.scale),A.textColor&&(P["text-color"]=["rgba"].concat(A.textColor.toArray())),u.push(P)}}return u};var Jr=function(u){this.name=u.name,this.available=u.available};function zi(u,d,g,A){return typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255&&typeof g=="number"&&g>=0&&g<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:"Invalid rgba value ["+[u,d,g,A].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof A=="number"?[u,d,g,A]:[u,d,g]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ji(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof yn||u instanceof Cn||u instanceof hr||u instanceof Jr)return!0;if(Array.isArray(u)){for(var d=0,g=u;d<g.length;d+=1)if(!Ji(g[d]))return!1;return!0}if(typeof u=="object"){for(var A in u)if(!Ji(u[A]))return!1;return!0}return!1}function ei(u){if(u===null)return wi;if(typeof u=="string")return Ti;if(typeof u=="boolean")return hi;if(typeof u=="number")return Sr;if(u instanceof yn)return ai;if(u instanceof Cn)return ea;if(u instanceof hr)return va;if(u instanceof Jr)return Ro;if(Array.isArray(u)){for(var d,g=u.length,A=0,P=u;A<P.length;A+=1){var B=ei(P[A]);if(d){if(d===B)continue;d=xi;break}d=B}return $o(d||xi,g)}return Mo}function Hi(u){var d=typeof u;return u===null?"":d==="string"||d==="number"||d==="boolean"?String(u):u instanceof yn||u instanceof hr||u instanceof Jr?u.toString():JSON.stringify(u)}Jr.prototype.toString=function(){return this.name},Jr.fromString=function(u){return u?new Jr({name:u,available:!1}):null},Jr.prototype.serialize=function(){return["image",this.name]};var Ii=function(u,d){this.type=u,this.value=d};Ii.parse=function(u,d){if(u.length!==2)return d.error("'literal' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(!Ji(u[1]))return d.error("invalid value");var g=u[1],A=ei(g),P=d.expectedType;return A.kind!=="array"||A.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(A=P),new Ii(A,g)},Ii.prototype.evaluate=function(){return this.value},Ii.prototype.eachChild=function(){},Ii.prototype.outputDefined=function(){return!0},Ii.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof yn?["rgba"].concat(this.value.toArray()):this.value instanceof hr?this.value.serialize():this.value};var Wr=function(u){this.name="ExpressionEvaluationError",this.message=u};Wr.prototype.toJSON=function(){return this.message};var Eo={string:Ti,number:Sr,boolean:hi,object:Mo},ci=function(u,d){this.type=u,this.args=d};ci.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g,A=1,P=u[0];if(P==="array"){var B,j;if(u.length>2){var ee=u[1];if(typeof ee!="string"||!(ee in Eo)||ee==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);B=Eo[ee],A++}else B=xi;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);j=u[2],A++}g=$o(B,j)}else g=Eo[P];for(var be=[];A<u.length;A++){var Ne=d.parse(u[A],A,xi);if(!Ne)return null;be.push(Ne)}return new ci(g,be)},ci.prototype.evaluate=function(u){for(var d=0;d<this.args.length;d++){var g=this.args[d].evaluate(u);if(!jt(this.type,ei(g)))return g;if(d===this.args.length-1)throw new Wr("Expected value to be of type "+Be(this.type)+", but found "+Be(ei(g))+" instead.")}return null},ci.prototype.eachChild=function(u){this.args.forEach(u)},ci.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},ci.prototype.serialize=function(){var u=this.type,d=[u.kind];if(u.kind==="array"){var g=u.itemType;if(g.kind==="string"||g.kind==="number"||g.kind==="boolean"){d.push(g.kind);var A=u.N;(typeof A=="number"||this.args.length>1)&&d.push(A)}}return d.concat(this.args.map(function(P){return P.serialize()}))};var xo=function(u){this.type=va,this.sections=u};xo.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g=u[1];if(!Array.isArray(g)&&typeof g=="object")return d.error("First argument must be an image or text section.");for(var A=[],P=!1,B=1;B<=u.length-1;++B){var j=u[B];if(P&&typeof j=="object"&&!Array.isArray(j)){P=!1;var ee=null;if(j["font-scale"]&&!(ee=d.parse(j["font-scale"],1,Sr)))return null;var be=null;if(j["text-font"]&&!(be=d.parse(j["text-font"],1,$o(Ti))))return null;var Ne=null;if(j["text-color"]&&!(Ne=d.parse(j["text-color"],1,ai)))return null;var $e=A[A.length-1];$e.scale=ee,$e.font=be,$e.textColor=Ne}else{var at=d.parse(u[B],1,xi);if(!at)return null;var Tt=at.type.kind;if(Tt!=="string"&&Tt!=="value"&&Tt!=="null"&&Tt!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,A.push({content:at,scale:null,font:null,textColor:null})}}return new xo(A)},xo.prototype.evaluate=function(u){return new hr(this.sections.map(function(d){var g=d.content.evaluate(u);return ei(g)===Ro?new dr("",g,null,null,null):new dr(Hi(g),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null)}))},xo.prototype.eachChild=function(u){for(var d=0,g=this.sections;d<g.length;d+=1){var A=g[d];u(A.content),A.scale&&u(A.scale),A.font&&u(A.font),A.textColor&&u(A.textColor)}},xo.prototype.outputDefined=function(){return!1},xo.prototype.serialize=function(){for(var u=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];u.push(A.content.serialize());var P={};A.scale&&(P["font-scale"]=A.scale.serialize()),A.font&&(P["text-font"]=A.font.serialize()),A.textColor&&(P["text-color"]=A.textColor.serialize()),u.push(P)}return u};var Wi=function(u){this.type=Ro,this.input=u};Wi.parse=function(u,d){if(u.length!==2)return d.error("Expected two arguments.");var g=d.parse(u[1],1,Ti);return g?new Wi(g):d.error("No image name provided.")},Wi.prototype.evaluate=function(u){var d=this.input.evaluate(u),g=Jr.fromString(d);return g&&u.availableImages&&(g.available=u.availableImages.indexOf(d)>-1),g},Wi.prototype.eachChild=function(u){u(this.input)},Wi.prototype.outputDefined=function(){return!1},Wi.prototype.serialize=function(){return["image",this.input.serialize()]};var oo={"to-boolean":hi,"to-color":ai,"to-number":Sr,"to-string":Ti},Ao=function(u,d){this.type=u,this.args=d};Ao.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g=u[0];if((g==="to-boolean"||g==="to-string")&&u.length!==2)return d.error("Expected one argument.");for(var A=oo[g],P=[],B=1;B<u.length;B++){var j=d.parse(u[B],B,xi);if(!j)return null;P.push(j)}return new Ao(A,P)},Ao.prototype.evaluate=function(u){if(this.type.kind==="boolean")return!!this.args[0].evaluate(u);if(this.type.kind==="color"){for(var d,g,A=0,P=this.args;A<P.length;A+=1){if(g=null,(d=P[A].evaluate(u))instanceof yn)return d;if(typeof d=="string"){var B=u.parseColor(d);if(B)return B}else if(Array.isArray(d)&&!(g=d.length<3||d.length>4?"Invalid rbga value "+JSON.stringify(d)+": expected an array containing either three or four numeric values.":zi(d[0],d[1],d[2],d[3])))return new yn(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Wr(g||"Could not parse color from value '"+(typeof d=="string"?d:String(JSON.stringify(d)))+"'")}if(this.type.kind==="number"){for(var j=null,ee=0,be=this.args;ee<be.length;ee+=1){if((j=be[ee].evaluate(u))===null)return 0;var Ne=Number(j);if(!isNaN(Ne))return Ne}throw new Wr("Could not convert "+JSON.stringify(j)+" to number.")}return this.type.kind==="formatted"?hr.fromString(Hi(this.args[0].evaluate(u))):this.type.kind==="resolvedImage"?Jr.fromString(Hi(this.args[0].evaluate(u))):Hi(this.args[0].evaluate(u))},Ao.prototype.eachChild=function(u){this.args.forEach(u)},Ao.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},Ao.prototype.serialize=function(){if(this.type.kind==="formatted")return new xo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Wi(this.args[0]).serialize();var u=["to-"+this.type.kind];return this.eachChild(function(d){u.push(d.serialize())}),u};var bs=["Unknown","Point","LineString","Polygon"],ma=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ma.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ma.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?bs[this.feature.type]:this.feature.type:null},ma.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ma.prototype.canonicalID=function(){return this.canonical},ma.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ma.prototype.parseColor=function(u){var d=this._parseColorCache[u];return d||(d=this._parseColorCache[u]=yn.parse(u)),d};var ta=function(u,d,g,A){this.name=u,this.type=d,this._evaluate=g,this.args=A};ta.prototype.evaluate=function(u){return this._evaluate(u,this.args)},ta.prototype.eachChild=function(u){this.args.forEach(u)},ta.prototype.outputDefined=function(){return!1},ta.prototype.serialize=function(){return[this.name].concat(this.args.map(function(u){return u.serialize()}))},ta.parse=function(u,d){var g,A=u[0],P=ta.definitions[A];if(!P)return d.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0);for(var B=Array.isArray(P)?P[0]:P.type,j=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,ee=j.filter(function(Xo){var ho=Xo[0];return!Array.isArray(ho)||ho.length===u.length-1}),be=null,Ne=0,$e=ee;Ne<$e.length;Ne+=1){var at=$e[Ne],Tt=at[0],Nt=at[1];be=new uc(d.registry,d.path,null,d.scope);for(var fn=[],_n=!1,Hn=1;Hn<u.length;Hn++){var Ln=u[Hn],cr=Array.isArray(Tt)?Tt[Hn-1]:Tt.type,gr=be.parse(Ln,1+fn.length,cr);if(!gr){_n=!0;break}fn.push(gr)}if(!_n)if(Array.isArray(Tt)&&Tt.length!==fn.length)be.error("Expected "+Tt.length+" arguments, but found "+fn.length+" instead.");else{for(var Ir=0;Ir<fn.length;Ir++){var Nr=Array.isArray(Tt)?Tt[Ir]:Tt.type,Xr=fn[Ir];be.concat(Ir+1).checkSubtype(Nr,Xr.type)}if(be.errors.length===0)return new ta(A,B,Nt,fn)}}if(ee.length===1)(g=d.errors).push.apply(g,be.errors);else{for(var Mi=(ee.length?ee:j).map(function(Xo){var ho;return ho=Xo[0],Array.isArray(ho)?"("+ho.map(Be).join(", ")+")":"("+Be(ho.type)+"...)"}).join(" | "),Yi=[],Lo=1;Lo<u.length;Lo++){var fo=d.parse(u[Lo],1+Yi.length);if(!fo)return null;Yi.push(Be(fo.type))}d.error("Expected arguments of type "+Mi+", but found ("+Yi.join(", ")+") instead.")}return null},ta.register=function(u,d){for(var g in ta.definitions=d,d)u[g]=ta};var vs=function(u,d,g){this.type=ea,this.locale=g,this.caseSensitive=u,this.diacriticSensitive=d};function ms(u,d){u[0]=Math.min(u[0],d[0]),u[1]=Math.min(u[1],d[1]),u[2]=Math.max(u[2],d[0]),u[3]=Math.max(u[3],d[1])}function At(u,d){return!(u[0]<=d[0]||u[2]>=d[2]||u[1]<=d[1]||u[3]>=d[3])}function Gt(u,d){var g=(180+u[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,P=Math.pow(2,d.z);return[Math.round(g*P*8192),Math.round(A*P*8192)]}function jn(u,d,g){return d[1]>u[1]!=g[1]>u[1]&&u[0]<(g[0]-d[0])*(u[1]-d[1])/(g[1]-d[1])+d[0]}function Lr(u,d){for(var g,A,P,B,j,ee,be,Ne=!1,$e=0,at=d.length;$e<at;$e++)for(var Tt=d[$e],Nt=0,fn=Tt.length;Nt<fn-1;Nt++){if((B=(g=u)[0]-(A=Tt[Nt])[0])*(be=g[1]-(P=Tt[Nt+1])[1])-(ee=g[0]-P[0])*(j=g[1]-A[1])==0&&B*ee<=0&&j*be<=0)return!1;jn(u,Tt[Nt],Tt[Nt+1])&&(Ne=!Ne)}return Ne}function Oi(u,d){for(var g=0;g<d.length;g++)if(Lr(u,d[g]))return!0;return!1}function Gi(u,d,g,A){var P=A[0]-g[0],B=A[1]-g[1],j=(u[0]-g[0])*B-P*(u[1]-g[1]),ee=(d[0]-g[0])*B-P*(d[1]-g[1]);return j>0&&ee<0||j<0&&ee>0}function Jo(u,d,g){for(var A=0,P=g;A<P.length;A+=1)for(var B=P[A],j=0;j<B.length-1;++j)if((at=[($e=B[j+1])[0]-(Ne=B[j])[0],$e[1]-Ne[1]])[0]*(Tt=[(be=d)[0]-(ee=u)[0],be[1]-ee[1]])[1]-at[1]*Tt[0]!=0&&Gi(ee,be,Ne,$e)&&Gi(Ne,$e,ee,be))return!0;var ee,be,Ne,$e,at,Tt;return!1}function Gs(u,d){for(var g=0;g<u.length;++g)if(!Lr(u[g],d))return!1;for(var A=0;A<u.length-1;++A)if(Jo(u[A],u[A+1],d))return!1;return!0}function Ds(u,d){for(var g=0;g<d.length;g++)if(Gs(u,d[g]))return!0;return!1}function zs(u,d,g){for(var A=[],P=0;P<u.length;P++){for(var B=[],j=0;j<u[P].length;j++){var ee=Gt(u[P][j],g);ms(d,ee),B.push(ee)}A.push(B)}return A}function hl(u,d,g){for(var A=[],P=0;P<u.length;P++){var B=zs(u[P],d,g);A.push(B)}return A}function yh(u,d,g,A){if(u[0]<g[0]||u[0]>g[2]){var P=.5*A,B=u[0]-g[0]>P?-A:g[0]-u[0]>P?A:0;B===0&&(B=u[0]-g[2]>P?-A:g[2]-u[0]>P?A:0),u[0]+=B}ms(d,u)}function Np(u,d,g,A){for(var P=8192*Math.pow(2,A.z),B=[8192*A.x,8192*A.y],j=[],ee=0,be=u;ee<be.length;ee+=1)for(var Ne=0,$e=be[ee];Ne<$e.length;Ne+=1){var at=$e[Ne],Tt=[at.x+B[0],at.y+B[1]];yh(Tt,d,g,P),j.push(Tt)}return j}function Ed(u,d,g,A){for(var P,B=8192*Math.pow(2,A.z),j=[8192*A.x,8192*A.y],ee=[],be=0,Ne=u;be<Ne.length;be+=1){for(var $e=[],at=0,Tt=Ne[be];at<Tt.length;at+=1){var Nt=Tt[at],fn=[Nt.x+j[0],Nt.y+j[1]];ms(d,fn),$e.push(fn)}ee.push($e)}if(d[2]-d[0]<=B/2){(P=d)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(var _n=0,Hn=ee;_n<Hn.length;_n+=1)for(var Ln=0,cr=Hn[_n];Ln<cr.length;Ln+=1)yh(cr[Ln],d,g,B)}return ee}vs.parse=function(u,d){if(u.length!==2)return d.error("Expected one argument.");var g=u[1];if(typeof g!="object"||Array.isArray(g))return d.error("Collator options argument must be an object.");var A=d.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,hi);if(!A)return null;var P=d.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,hi);if(!P)return null;var B=null;return g.locale&&!(B=d.parse(g.locale,1,Ti))?null:new vs(A,P,B)},vs.prototype.evaluate=function(u){return new Cn(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)},vs.prototype.eachChild=function(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)},vs.prototype.outputDefined=function(){return!1},vs.prototype.serialize=function(){var u={};return u["case-sensitive"]=this.caseSensitive.serialize(),u["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(u.locale=this.locale.serialize()),["collator",u]};var jl=function(u,d){this.type=hi,this.geojson=u,this.geometries=d};function Pf(u){if(u instanceof ta&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof jl)return!1;var d=!0;return u.eachChild(function(g){d&&!Pf(g)&&(d=!1)}),d}function If(u){if(u instanceof ta&&u.name==="feature-state")return!1;var d=!0;return u.eachChild(function(g){d&&!If(g)&&(d=!1)}),d}function lu(u,d){if(u instanceof ta&&d.indexOf(u.name)>=0)return!1;var g=!0;return u.eachChild(function(A){g&&!lu(A,d)&&(g=!1)}),g}jl.parse=function(u,d){if(u.length!==2)return d.error("'within' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(Ji(u[1])){var g=u[1];if(g.type==="FeatureCollection")for(var A=0;A<g.features.length;++A){var P=g.features[A].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new jl(g,g.features[A].geometry)}else if(g.type==="Feature"){var B=g.geometry.type;if(B==="Polygon"||B==="MultiPolygon")return new jl(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new jl(g,g)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")},jl.prototype.evaluate=function(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],B=d.canonicalID();if(g.type==="Polygon"){var j=zs(g.coordinates,P,B),ee=Np(d.geometry(),A,P,B);if(!At(A,P))return!1;for(var be=0,Ne=ee;be<Ne.length;be+=1)if(!Lr(Ne[be],j))return!1}if(g.type==="MultiPolygon"){var $e=hl(g.coordinates,P,B),at=Np(d.geometry(),A,P,B);if(!At(A,P))return!1;for(var Tt=0,Nt=at;Tt<Nt.length;Tt+=1)if(!Oi(Nt[Tt],$e))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],B=d.canonicalID();if(g.type==="Polygon"){var j=zs(g.coordinates,P,B),ee=Ed(d.geometry(),A,P,B);if(!At(A,P))return!1;for(var be=0,Ne=ee;be<Ne.length;be+=1)if(!Gs(Ne[be],j))return!1}if(g.type==="MultiPolygon"){var $e=hl(g.coordinates,P,B),at=Ed(d.geometry(),A,P,B);if(!At(A,P))return!1;for(var Tt=0,Nt=at;Tt<Nt.length;Tt+=1)if(!Ds(Nt[Tt],$e))return!1}return!0}(u,this.geometries)}return!1},jl.prototype.eachChild=function(){},jl.prototype.outputDefined=function(){return!0},jl.prototype.serialize=function(){return["within",this.geojson]};var ju=function(u,d){this.type=d.type,this.name=u,this.boundExpression=d};ju.parse=function(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");var g=u[1];return d.scope.has(g)?new ju(g,d.scope.get(g)):d.error('Unknown variable "'+g+'". Make sure "'+g+'" has been bound in an enclosing "let" expression before using it.',1)},ju.prototype.evaluate=function(u){return this.boundExpression.evaluate(u)},ju.prototype.eachChild=function(){},ju.prototype.outputDefined=function(){return!1},ju.prototype.serialize=function(){return["var",this.name]};var uc=function(u,d,g,A,P){d===void 0&&(d=[]),A===void 0&&(A=new gi),P===void 0&&(P=[]),this.registry=u,this.path=d,this.key=d.map(function(B){return"["+B+"]"}).join(""),this.scope=A,this.errors=P,this.expectedType=g};function Qf(u,d){for(var g,A=u.length-1,P=0,B=A,j=0;P<=B;)if((g=u[j=Math.floor((P+B)/2)])<=d){if(j===A||d<u[j+1])return j;P=j+1}else{if(!(g>d))throw new Wr("Input is not a number.");B=j-1}return 0}uc.prototype.parse=function(u,d,g,A,P){return P===void 0&&(P={}),d?this.concat(d,g,A)._parse(u,P):this._parse(u,P)},uc.prototype._parse=function(u,d){function g(Ne,$e,at){return at==="assert"?new ci($e,[Ne]):at==="coerce"?new Ao($e,[Ne]):Ne}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var A=u[0];if(typeof A!="string")return this.error("Expression name must be a string, but found "+typeof A+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var P=this.registry[A];if(P){var B=P.parse(u,this);if(!B)return null;if(this.expectedType){var j=this.expectedType,ee=B.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||ee.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||ee.kind!=="value"&&ee.kind!=="string"){if(this.checkSubtype(j,ee))return null}else B=g(B,j,d.typeAnnotation||"coerce");else B=g(B,j,d.typeAnnotation||"assert")}if(!(B instanceof Ii)&&B.type.kind!=="resolvedImage"&&function Ne($e){if($e instanceof ju)return Ne($e.boundExpression);if($e instanceof ta&&$e.name==="error"||$e instanceof vs||$e instanceof jl)return!1;var at=$e instanceof Ao||$e instanceof ci,Tt=!0;return $e.eachChild(function(Nt){Tt=at?Tt&&Ne(Nt):Tt&&Nt instanceof Ii}),!!Tt&&Pf($e)&&lu($e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(B)){var be=new ma;try{B=new Ii(B.type,B.evaluate(be))}catch(Ne){return this.error(Ne.message),null}}return B}return this.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof u+" instead.")},uc.prototype.concat=function(u,d,g){var A=typeof u=="number"?this.path.concat(u):this.path,P=g?this.scope.concat(g):this.scope;return new uc(this.registry,A,d||null,P,this.errors)},uc.prototype.error=function(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];var A=""+this.key+d.map(function(P){return"["+P+"]"}).join("");this.errors.push(new zr(A,u))},uc.prototype.checkSubtype=function(u,d){var g=jt(u,d);return g&&this.error(g),g};var vu=function(u,d,g){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(var A=0,P=g;A<P.length;A+=1){var B=P[A],j=B[1];this.labels.push(B[0]),this.outputs.push(j)}};function Cs(u,d,g){return u*(1-g)+d*g}vu.parse=function(u,d){if(u.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");var g=d.parse(u[1],1,Sr);if(!g)return null;var A=[],P=null;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);for(var B=1;B<u.length;B+=2){var j=B===1?-1/0:u[B],ee=u[B+1],be=B,Ne=B+1;if(typeof j!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',be);if(A.length&&A[A.length-1][0]>=j)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',be);var $e=d.parse(ee,Ne,P);if(!$e)return null;P=P||$e.type,A.push([j,$e])}return new vu(P,g,A)},vu.prototype.evaluate=function(u){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(u);var A=this.input.evaluate(u);if(A<=d[0])return g[0].evaluate(u);var P=d.length;return A>=d[P-1]?g[P-1].evaluate(u):g[Qf(d,A)].evaluate(u)},vu.prototype.eachChild=function(u){u(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)u(g[d])},vu.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},vu.prototype.serialize=function(){for(var u=["step",this.input.serialize()],d=0;d<this.labels.length;d++)d>0&&u.push(this.labels[d]),u.push(this.outputs[d].serialize());return u};var Ou=Object.freeze({__proto__:null,number:Cs,color:function(u,d,g){return new yn(Cs(u.r,d.r,g),Cs(u.g,d.g,g),Cs(u.b,d.b,g),Cs(u.a,d.a,g))},array:function(u,d,g){return u.map(function(A,P){return Cs(A,d[P],g)})}}),yf=6/29*3*(6/29),Vh=Math.PI/180,Bp=180/Math.PI;function _h(u){return u>.008856451679035631?Math.pow(u,1/3):u/yf+4/29}function Sd(u){return u>6/29?u*u*u:yf*(u-4/29)}function Jf(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Hh(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Td(u){var d=Hh(u.r),g=Hh(u.g),A=Hh(u.b),P=_h((.4124564*d+.3575761*g+.1804375*A)/.95047),B=_h((.2126729*d+.7151522*g+.072175*A)/1);return{l:116*B-16,a:500*(P-B),b:200*(B-_h((.0193339*d+.119192*g+.9503041*A)/1.08883)),alpha:u.a}}function wd(u){var d=(u.l+16)/116,g=isNaN(u.a)?d:d+u.a/500,A=isNaN(u.b)?d:d-u.b/200;return d=1*Sd(d),g=.95047*Sd(g),A=1.08883*Sd(A),new yn(Jf(3.2404542*g-1.5371385*d-.4985314*A),Jf(-.969266*g+1.8760108*d+.041556*A),Jf(.0556434*g-.2040259*d+1.0572252*A),u.alpha)}function m0(u,d,g){var A=d-u;return u+g*(A>180||A<-180?A-360*Math.round(A/360):A)}var Lf={forward:Td,reverse:wd,interpolate:function(u,d,g){return{l:Cs(u.l,d.l,g),a:Cs(u.a,d.a,g),b:Cs(u.b,d.b,g),alpha:Cs(u.alpha,d.alpha,g)}}},Fc={forward:function(u){var d=Td(u),g=d.l,A=d.a,P=d.b,B=Math.atan2(P,A)*Bp;return{h:B<0?B+360:B,c:Math.sqrt(A*A+P*P),l:g,alpha:u.a}},reverse:function(u){var d=u.h*Vh,g=u.c;return wd({l:u.l,a:Math.cos(d)*g,b:Math.sin(d)*g,alpha:u.alpha})},interpolate:function(u,d,g){return{h:m0(u.h,d.h,g),c:Cs(u.c,d.c,g),l:Cs(u.l,d.l,g),alpha:Cs(u.alpha,d.alpha,g)}}},ap=Object.freeze({__proto__:null,lab:Lf,hcl:Fc}),Vl=function(u,d,g,A,P){this.type=u,this.operator=d,this.interpolation=g,this.input=A,this.labels=[],this.outputs=[];for(var B=0,j=P;B<j.length;B+=1){var ee=j[B],be=ee[1];this.labels.push(ee[0]),this.outputs.push(be)}};function Ec(u,d,g,A){var P=A-g,B=u-g;return P===0?0:d===1?B/P:(Math.pow(d,B)-1)/(Math.pow(d,P)-1)}Vl.interpolationFactor=function(u,d,g,A){var P=0;if(u.name==="exponential")P=Ec(d,u.base,g,A);else if(u.name==="linear")P=Ec(d,1,g,A);else if(u.name==="cubic-bezier"){var B=u.controlPoints;P=new ne(B[0],B[1],B[2],B[3]).solve(Ec(d,1,g,A))}return P},Vl.parse=function(u,d){var g=u[0],A=u[1],P=u[2],B=u.slice(3);if(!Array.isArray(A)||A.length===0)return d.error("Expected an interpolation type expression.",1);if(A[0]==="linear")A={name:"linear"};else if(A[0]==="exponential"){var j=A[1];if(typeof j!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);A={name:"exponential",base:j}}else{if(A[0]!=="cubic-bezier")return d.error("Unknown interpolation type "+String(A[0]),1,0);var ee=A.slice(1);if(ee.length!==4||ee.some(function(Hn){return typeof Hn!="number"||Hn<0||Hn>1}))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);A={name:"cubic-bezier",controlPoints:ee}}if(u.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(!(P=d.parse(P,2,Sr)))return null;var be=[],Ne=null;g==="interpolate-hcl"||g==="interpolate-lab"?Ne=ai:d.expectedType&&d.expectedType.kind!=="value"&&(Ne=d.expectedType);for(var $e=0;$e<B.length;$e+=2){var at=B[$e],Tt=B[$e+1],Nt=$e+3,fn=$e+4;if(typeof at!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Nt);if(be.length&&be[be.length-1][0]>=at)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Nt);var _n=d.parse(Tt,fn,Ne);if(!_n)return null;Ne=Ne||_n.type,be.push([at,_n])}return Ne.kind==="number"||Ne.kind==="color"||Ne.kind==="array"&&Ne.itemType.kind==="number"&&typeof Ne.N=="number"?new Vl(Ne,g,A,P,be):d.error("Type "+Be(Ne)+" is not interpolatable.")},Vl.prototype.evaluate=function(u){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(u);var A=this.input.evaluate(u);if(A<=d[0])return g[0].evaluate(u);var P=d.length;if(A>=d[P-1])return g[P-1].evaluate(u);var B=Qf(d,A),j=Vl.interpolationFactor(this.interpolation,A,d[B],d[B+1]),ee=g[B].evaluate(u),be=g[B+1].evaluate(u);return this.operator==="interpolate"?Ou[this.type.kind.toLowerCase()](ee,be,j):this.operator==="interpolate-hcl"?Fc.reverse(Fc.interpolate(Fc.forward(ee),Fc.forward(be),j)):Lf.reverse(Lf.interpolate(Lf.forward(ee),Lf.forward(be),j))},Vl.prototype.eachChild=function(u){u(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)u(g[d])},Vl.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},Vl.prototype.serialize=function(){var u;u=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var d=[this.operator,u,this.input.serialize()],g=0;g<this.labels.length;g++)d.push(this.labels[g],this.outputs[g].serialize());return d};var Qc=function(u,d){this.type=u,this.args=d};Qc.parse=function(u,d){if(u.length<2)return d.error("Expectected at least one argument.");var g=null,A=d.expectedType;A&&A.kind!=="value"&&(g=A);for(var P=[],B=0,j=u.slice(1);B<j.length;B+=1){var ee=d.parse(j[B],1+P.length,g,void 0,{typeAnnotation:"omit"});if(!ee)return null;g=g||ee.type,P.push(ee)}var be=A&&P.some(function(Ne){return jt(A,Ne.type)});return new Qc(be?xi:g,P)},Qc.prototype.evaluate=function(u){for(var d,g=null,A=0,P=0,B=this.args;P<B.length&&(A++,(g=B[P].evaluate(u))&&g instanceof Jr&&!g.available&&(d||(d=g.name),g=null,A===this.args.length&&(g=d)),g===null);P+=1);return g},Qc.prototype.eachChild=function(u){this.args.forEach(u)},Qc.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},Qc.prototype.serialize=function(){var u=["coalesce"];return this.eachChild(function(d){u.push(d.serialize())}),u};var mu=function(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d};mu.prototype.evaluate=function(u){return this.result.evaluate(u)},mu.prototype.eachChild=function(u){for(var d=0,g=this.bindings;d<g.length;d+=1)u(g[d][1]);u(this.result)},mu.parse=function(u,d){if(u.length<4)return d.error("Expected at least 3 arguments, but found "+(u.length-1)+" instead.");for(var g=[],A=1;A<u.length-1;A+=2){var P=u[A];if(typeof P!="string")return d.error("Expected string, but found "+typeof P+" instead.",A);if(/[^a-zA-Z0-9_]/.test(P))return d.error("Variable names must contain only alphanumeric characters or '_'.",A);var B=d.parse(u[A+1],A+1);if(!B)return null;g.push([P,B])}var j=d.parse(u[u.length-1],u.length-1,d.expectedType,g);return j?new mu(g,j):null},mu.prototype.outputDefined=function(){return this.result.outputDefined()},mu.prototype.serialize=function(){for(var u=["let"],d=0,g=this.bindings;d<g.length;d+=1){var A=g[d];u.push(A[0],A[1].serialize())}return u.push(this.result.serialize()),u};var Jc=function(u,d,g){this.type=u,this.index=d,this.input=g};Jc.parse=function(u,d){if(u.length!==3)return d.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,Sr),A=d.parse(u[2],2,$o(d.expectedType||xi));return g&&A?new Jc(A.type.itemType,g,A):null},Jc.prototype.evaluate=function(u){var d=this.index.evaluate(u),g=this.input.evaluate(u);if(d<0)throw new Wr("Array index out of bounds: "+d+" < 0.");if(d>=g.length)throw new Wr("Array index out of bounds: "+d+" > "+(g.length-1)+".");if(d!==Math.floor(d))throw new Wr("Array index must be an integer, but found "+d+" instead.");return g[d]},Jc.prototype.eachChild=function(u){u(this.index),u(this.input)},Jc.prototype.outputDefined=function(){return!1},Jc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var cc=function(u,d){this.type=hi,this.needle=u,this.haystack=d};cc.parse=function(u,d){if(u.length!==3)return d.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,xi),A=d.parse(u[2],2,xi);return g&&A?un(g.type,[hi,Ti,Sr,wi,xi])?new cc(g,A):d.error("Expected first argument to be of type boolean, string, number or null, but found "+Be(g.type)+" instead"):null},cc.prototype.evaluate=function(u){var d=this.needle.evaluate(u),g=this.haystack.evaluate(u);if(!g)return!1;if(!Nn(d,["boolean","string","number","null"]))throw new Wr("Expected first argument to be of type boolean, string, number or null, but found "+Be(ei(d))+" instead.");if(!Nn(g,["string","array"]))throw new Wr("Expected second argument to be of type array or string, but found "+Be(ei(g))+" instead.");return g.indexOf(d)>=0},cc.prototype.eachChild=function(u){u(this.needle),u(this.haystack)},cc.prototype.outputDefined=function(){return!0},cc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ef=function(u,d,g){this.type=Sr,this.needle=u,this.haystack=d,this.fromIndex=g};ef.parse=function(u,d){if(u.length<=2||u.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,xi),A=d.parse(u[2],2,xi);if(!g||!A)return null;if(!un(g.type,[hi,Ti,Sr,wi,xi]))return d.error("Expected first argument to be of type boolean, string, number or null, but found "+Be(g.type)+" instead");if(u.length===4){var P=d.parse(u[3],3,Sr);return P?new ef(g,A,P):null}return new ef(g,A)},ef.prototype.evaluate=function(u){var d=this.needle.evaluate(u),g=this.haystack.evaluate(u);if(!Nn(d,["boolean","string","number","null"]))throw new Wr("Expected first argument to be of type boolean, string, number or null, but found "+Be(ei(d))+" instead.");if(!Nn(g,["string","array"]))throw new Wr("Expected second argument to be of type array or string, but found "+Be(ei(g))+" instead.");if(this.fromIndex){var A=this.fromIndex.evaluate(u);return g.indexOf(d,A)}return g.indexOf(d)},ef.prototype.eachChild=function(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)},ef.prototype.outputDefined=function(){return!1},ef.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var u=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),u]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Pl=function(u,d,g,A,P,B){this.inputType=u,this.type=d,this.input=g,this.cases=A,this.outputs=P,this.otherwise=B};Pl.parse=function(u,d){if(u.length<5)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(u.length%2!=1)return d.error("Expected an even number of arguments.");var g,A;d.expectedType&&d.expectedType.kind!=="value"&&(A=d.expectedType);for(var P={},B=[],j=2;j<u.length-1;j+=2){var ee=u[j],be=u[j+1];Array.isArray(ee)||(ee=[ee]);var Ne=d.concat(j);if(ee.length===0)return Ne.error("Expected at least one branch label.");for(var $e=0,at=ee;$e<at.length;$e+=1){var Tt=at[$e];if(typeof Tt!="number"&&typeof Tt!="string")return Ne.error("Branch labels must be numbers or strings.");if(typeof Tt=="number"&&Math.abs(Tt)>Number.MAX_SAFE_INTEGER)return Ne.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Tt=="number"&&Math.floor(Tt)!==Tt)return Ne.error("Numeric branch labels must be integer values.");if(g){if(Ne.checkSubtype(g,ei(Tt)))return null}else g=ei(Tt);if(P[String(Tt)]!==void 0)return Ne.error("Branch labels must be unique.");P[String(Tt)]=B.length}var Nt=d.parse(be,j,A);if(!Nt)return null;A=A||Nt.type,B.push(Nt)}var fn=d.parse(u[1],1,xi);if(!fn)return null;var _n=d.parse(u[u.length-1],u.length-1,A);return _n?fn.type.kind!=="value"&&d.concat(1).checkSubtype(g,fn.type)?null:new Pl(g,A,fn,P,B,_n):null},Pl.prototype.evaluate=function(u){var d=this.input.evaluate(u);return(ei(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)},Pl.prototype.eachChild=function(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)},Pl.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})&&this.otherwise.outputDefined()},Pl.prototype.serialize=function(){for(var u=this,d=["match",this.input.serialize()],g=[],A={},P=0,B=Object.keys(this.cases).sort();P<B.length;P+=1){var j=B[P];(at=A[this.cases[j]])===void 0?(A[this.cases[j]]=g.length,g.push([this.cases[j],[j]])):g[at][1].push(j)}for(var ee=function(Nt){return u.inputType.kind==="number"?Number(Nt):Nt},be=0,Ne=g;be<Ne.length;be+=1){var $e=Ne[be],at=$e[0],Tt=$e[1];d.push(Tt.length===1?ee(Tt[0]):Tt.map(ee)),d.push(this.outputs[outputIndex$1].serialize())}return d.push(this.otherwise.serialize()),d};var kc=function(u,d,g){this.type=u,this.branches=d,this.otherwise=g};kc.parse=function(u,d){if(u.length<4)return d.error("Expected at least 3 arguments, but found only "+(u.length-1)+".");if(u.length%2!=0)return d.error("Expected an odd number of arguments.");var g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);for(var A=[],P=1;P<u.length-1;P+=2){var B=d.parse(u[P],P,hi);if(!B)return null;var j=d.parse(u[P+1],P+1,g);if(!j)return null;A.push([B,j]),g=g||j.type}var ee=d.parse(u[u.length-1],u.length-1,g);return ee?new kc(g,A,ee):null},kc.prototype.evaluate=function(u){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];if(A[0].evaluate(u))return P.evaluate(u)}return this.otherwise.evaluate(u)},kc.prototype.eachChild=function(u){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];u(A[0]),u(P)}u(this.otherwise)},kc.prototype.outputDefined=function(){return this.branches.every(function(u){return u[1].outputDefined()})&&this.otherwise.outputDefined()},kc.prototype.serialize=function(){var u=["case"];return this.eachChild(function(d){u.push(d.serialize())}),u};var _f=function(u,d,g,A){this.type=u,this.input=d,this.beginIndex=g,this.endIndex=A};function sp(u,d){return u==="=="||u==="!="?d.kind==="boolean"||d.kind==="string"||d.kind==="number"||d.kind==="null"||d.kind==="value":d.kind==="string"||d.kind==="number"||d.kind==="value"}function Wh(u,d,g,A){return A.compare(d,g)===0}function gs(u,d,g){var A=u!=="=="&&u!=="!=";return function(){function P(B,j,ee){this.type=hi,this.lhs=B,this.rhs=j,this.collator=ee,this.hasUntypedArgument=B.type.kind==="value"||j.type.kind==="value"}return P.parse=function(B,j){if(B.length!==3&&B.length!==4)return j.error("Expected two or three arguments.");var ee=B[0],be=j.parse(B[1],1,xi);if(!be)return null;if(!sp(ee,be.type))return j.concat(1).error('"'+ee+`" comparisons are not supported for type '`+Be(be.type)+"'.");var Ne=j.parse(B[2],2,xi);if(!Ne)return null;if(!sp(ee,Ne.type))return j.concat(2).error('"'+ee+`" comparisons are not supported for type '`+Be(Ne.type)+"'.");if(be.type.kind!==Ne.type.kind&&be.type.kind!=="value"&&Ne.type.kind!=="value")return j.error("Cannot compare types '"+Be(be.type)+"' and '"+Be(Ne.type)+"'.");A&&(be.type.kind==="value"&&Ne.type.kind!=="value"?be=new ci(Ne.type,[be]):be.type.kind!=="value"&&Ne.type.kind==="value"&&(Ne=new ci(be.type,[Ne])));var $e=null;if(B.length===4){if(be.type.kind!=="string"&&Ne.type.kind!=="string"&&be.type.kind!=="value"&&Ne.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(!($e=j.parse(B[3],3,ea)))return null}return new P(be,Ne,$e)},P.prototype.evaluate=function(B){var j=this.lhs.evaluate(B),ee=this.rhs.evaluate(B);if(A&&this.hasUntypedArgument){var be=ei(j),Ne=ei(ee);if(be.kind!==Ne.kind||be.kind!=="string"&&be.kind!=="number")throw new Wr('Expected arguments for "'+u+'" to be (string, string) or (number, number), but found ('+be.kind+", "+Ne.kind+") instead.")}if(this.collator&&!A&&this.hasUntypedArgument){var $e=ei(j),at=ei(ee);if($e.kind!=="string"||at.kind!=="string")return d(B,j,ee)}return this.collator?g(B,j,ee,this.collator.evaluate(B)):d(B,j,ee)},P.prototype.eachChild=function(B){B(this.lhs),B(this.rhs),this.collator&&B(this.collator)},P.prototype.outputDefined=function(){return!0},P.prototype.serialize=function(){var B=[u];return this.eachChild(function(j){B.push(j.serialize())}),B},P}()}_f.parse=function(u,d){if(u.length<=2||u.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,xi),A=d.parse(u[2],2,Sr);if(!g||!A)return null;if(!un(g.type,[$o(xi),Ti,xi]))return d.error("Expected first argument to be of type array or string, but found "+Be(g.type)+" instead");if(u.length===4){var P=d.parse(u[3],3,Sr);return P?new _f(g.type,g,A,P):null}return new _f(g.type,g,A)},_f.prototype.evaluate=function(u){var d=this.input.evaluate(u),g=this.beginIndex.evaluate(u);if(!Nn(d,["string","array"]))throw new Wr("Expected first argument to be of type array or string, but found "+Be(ei(d))+" instead.");if(this.endIndex){var A=this.endIndex.evaluate(u);return d.slice(g,A)}return d.slice(g)},_f.prototype.eachChild=function(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)},_f.prototype.outputDefined=function(){return!1},_f.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var u=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),u]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ad=gs("==",function(u,d,g){return d===g},Wh),Gh=gs("!=",function(u,d,g){return d!==g},function(u,d,g,A){return!Wh(0,d,g,A)}),Od=gs("<",function(u,d,g){return d<g},function(u,d,g,A){return A.compare(d,g)<0}),ul=gs(">",function(u,d,g){return d>g},function(u,d,g,A){return A.compare(d,g)>0}),bh=gs("<=",function(u,d,g){return d<=g},function(u,d,g,A){return A.compare(d,g)<=0}),xh=gs(">=",function(u,d,g){return d>=g},function(u,d,g,A){return A.compare(d,g)>=0}),ie=function(u,d,g,A,P){this.type=Ti,this.number=u,this.locale=d,this.currency=g,this.minFractionDigits=A,this.maxFractionDigits=P};ie.parse=function(u,d){if(u.length!==3)return d.error("Expected two arguments.");var g=d.parse(u[1],1,Sr);if(!g)return null;var A=u[2];if(typeof A!="object"||Array.isArray(A))return d.error("NumberFormat options argument must be an object.");var P=null;if(A.locale&&!(P=d.parse(A.locale,1,Ti)))return null;var B=null;if(A.currency&&!(B=d.parse(A.currency,1,Ti)))return null;var j=null;if(A["min-fraction-digits"]&&!(j=d.parse(A["min-fraction-digits"],1,Sr)))return null;var ee=null;return A["max-fraction-digits"]&&!(ee=d.parse(A["max-fraction-digits"],1,Sr))?null:new ie(g,P,B,j,ee)},ie.prototype.evaluate=function(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))},ie.prototype.eachChild=function(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)},ie.prototype.outputDefined=function(){return!1},ie.prototype.serialize=function(){var u={};return this.locale&&(u.locale=this.locale.serialize()),this.currency&&(u.currency=this.currency.serialize()),this.minFractionDigits&&(u["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(u["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),u]};var Se=function(u){this.type=Sr,this.input=u};Se.parse=function(u,d){if(u.length!==2)return d.error("Expected 1 argument, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?d.error("Expected argument of type string or array, but found "+Be(g.type)+" instead."):new Se(g):null},Se.prototype.evaluate=function(u){var d=this.input.evaluate(u);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Wr("Expected value to be of type string or array, but found "+Be(ei(d))+" instead.")},Se.prototype.eachChild=function(u){u(this.input)},Se.prototype.outputDefined=function(){return!1},Se.prototype.serialize=function(){var u=["length"];return this.eachChild(function(d){u.push(d.serialize())}),u};var tt={"==":Ad,"!=":Gh,">":ul,"<":Od,">=":xh,"<=":bh,array:ci,at:Jc,boolean:ci,case:kc,coalesce:Qc,collator:vs,format:xo,image:Wi,in:cc,"index-of":ef,interpolate:Vl,"interpolate-hcl":Vl,"interpolate-lab":Vl,length:Se,let:mu,literal:Ii,match:Pl,number:ci,"number-format":ie,object:ci,slice:_f,step:vu,string:ci,"to-boolean":Ao,"to-color":Ao,"to-number":Ao,"to-string":Ao,var:ju,within:jl};function cn(u,d){var g=d[0],A=d[1],P=d[2],B=d[3];g=g.evaluate(u),A=A.evaluate(u),P=P.evaluate(u);var j=B?B.evaluate(u):1,ee=zi(g,A,P,j);if(ee)throw new Wr(ee);return new yn(g/255*j,A/255*j,P/255*j,j)}function Q(u,d){return u in d}function rr(u,d){var g=d[u];return g===void 0?null:g}function Rr(u){return{type:u}}function Li(u){return{result:"success",value:u}}function Ui(u){return{result:"error",value:u}}function so(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function uo(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function xa(u){return!!u.expression&&u.expression.interpolated}function Do(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Ea(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function ts(u){return u}function da(u,d,g){return u!==void 0?u:d!==void 0?d:g!==void 0?g:void 0}function Ta(u,d,g,A,P){return da(typeof g===P?A[g]:void 0,u.default,d.default)}function Rs(u,d,g){if(Do(g)!=="number")return da(u.default,d.default);var A=u.stops.length;if(A===1||g<=u.stops[0][0])return u.stops[0][1];if(g>=u.stops[A-1][0])return u.stops[A-1][1];var P=Qf(u.stops.map(function(B){return B[0]}),g);return u.stops[P][1]}function Ba(u,d,g){var A=u.base!==void 0?u.base:1;if(Do(g)!=="number")return da(u.default,d.default);var P=u.stops.length;if(P===1||g<=u.stops[0][0])return u.stops[0][1];if(g>=u.stops[P-1][0])return u.stops[P-1][1];var B=Qf(u.stops.map(function(at){return at[0]}),g),j=function(at,Tt,Nt,fn){var _n=fn-Nt,Hn=at-Nt;return _n===0?0:Tt===1?Hn/_n:(Math.pow(Tt,Hn)-1)/(Math.pow(Tt,_n)-1)}(g,A,u.stops[B][0],u.stops[B+1][0]),ee=u.stops[B][1],be=u.stops[B+1][1],Ne=Ou[d.type]||ts;if(u.colorSpace&&u.colorSpace!=="rgb"){var $e=ap[u.colorSpace];Ne=function(at,Tt){return $e.reverse($e.interpolate($e.forward(at),$e.forward(Tt),j))}}return typeof ee.evaluate=="function"?{evaluate:function(){for(var at=[],Tt=arguments.length;Tt--;)at[Tt]=arguments[Tt];var Nt=ee.evaluate.apply(void 0,at),fn=be.evaluate.apply(void 0,at);if(Nt!==void 0&&fn!==void 0)return Ne(Nt,fn,j)}}:Ne(ee,be,j)}function Ha(u,d,g){return d.type==="color"?g=yn.parse(g):d.type==="formatted"?g=hr.fromString(g.toString()):d.type==="resolvedImage"?g=Jr.fromString(g.toString()):Do(g)===d.type||d.type==="enum"&&d.values[g]||(g=void 0),da(g,u.default,d.default)}ta.register(tt,{error:[{kind:"error"},[Ti],function(u,d){throw new Wr(d[0].evaluate(u))}],typeof:[Ti,[xi],function(u,d){return Be(ei(d[0].evaluate(u)))}],"to-rgba":[$o(Sr,4),[ai],function(u,d){return d[0].evaluate(u).toArray()}],rgb:[ai,[Sr,Sr,Sr],cn],rgba:[ai,[Sr,Sr,Sr,Sr],cn],has:{type:hi,overloads:[[[Ti],function(u,d){return Q(d[0].evaluate(u),u.properties())}],[[Ti,Mo],function(u,d){var g=d[1];return Q(d[0].evaluate(u),g.evaluate(u))}]]},get:{type:xi,overloads:[[[Ti],function(u,d){return rr(d[0].evaluate(u),u.properties())}],[[Ti,Mo],function(u,d){var g=d[1];return rr(d[0].evaluate(u),g.evaluate(u))}]]},"feature-state":[xi,[Ti],function(u,d){return rr(d[0].evaluate(u),u.featureState||{})}],properties:[Mo,[],function(u){return u.properties()}],"geometry-type":[Ti,[],function(u){return u.geometryType()}],id:[xi,[],function(u){return u.id()}],zoom:[Sr,[],function(u){return u.globals.zoom}],"heatmap-density":[Sr,[],function(u){return u.globals.heatmapDensity||0}],"line-progress":[Sr,[],function(u){return u.globals.lineProgress||0}],accumulated:[xi,[],function(u){return u.globals.accumulated===void 0?null:u.globals.accumulated}],"+":[Sr,Rr(Sr),function(u,d){for(var g=0,A=0,P=d;A<P.length;A+=1)g+=P[A].evaluate(u);return g}],"*":[Sr,Rr(Sr),function(u,d){for(var g=1,A=0,P=d;A<P.length;A+=1)g*=P[A].evaluate(u);return g}],"-":{type:Sr,overloads:[[[Sr,Sr],function(u,d){var g=d[1];return d[0].evaluate(u)-g.evaluate(u)}],[[Sr],function(u,d){return-d[0].evaluate(u)}]]},"/":[Sr,[Sr,Sr],function(u,d){var g=d[1];return d[0].evaluate(u)/g.evaluate(u)}],"%":[Sr,[Sr,Sr],function(u,d){var g=d[1];return d[0].evaluate(u)%g.evaluate(u)}],ln2:[Sr,[],function(){return Math.LN2}],pi:[Sr,[],function(){return Math.PI}],e:[Sr,[],function(){return Math.E}],"^":[Sr,[Sr,Sr],function(u,d){var g=d[1];return Math.pow(d[0].evaluate(u),g.evaluate(u))}],sqrt:[Sr,[Sr],function(u,d){return Math.sqrt(d[0].evaluate(u))}],log10:[Sr,[Sr],function(u,d){return Math.log(d[0].evaluate(u))/Math.LN10}],ln:[Sr,[Sr],function(u,d){return Math.log(d[0].evaluate(u))}],log2:[Sr,[Sr],function(u,d){return Math.log(d[0].evaluate(u))/Math.LN2}],sin:[Sr,[Sr],function(u,d){return Math.sin(d[0].evaluate(u))}],cos:[Sr,[Sr],function(u,d){return Math.cos(d[0].evaluate(u))}],tan:[Sr,[Sr],function(u,d){return Math.tan(d[0].evaluate(u))}],asin:[Sr,[Sr],function(u,d){return Math.asin(d[0].evaluate(u))}],acos:[Sr,[Sr],function(u,d){return Math.acos(d[0].evaluate(u))}],atan:[Sr,[Sr],function(u,d){return Math.atan(d[0].evaluate(u))}],min:[Sr,Rr(Sr),function(u,d){return Math.min.apply(Math,d.map(function(g){return g.evaluate(u)}))}],max:[Sr,Rr(Sr),function(u,d){return Math.max.apply(Math,d.map(function(g){return g.evaluate(u)}))}],abs:[Sr,[Sr],function(u,d){return Math.abs(d[0].evaluate(u))}],round:[Sr,[Sr],function(u,d){var g=d[0].evaluate(u);return g<0?-Math.round(-g):Math.round(g)}],floor:[Sr,[Sr],function(u,d){return Math.floor(d[0].evaluate(u))}],ceil:[Sr,[Sr],function(u,d){return Math.ceil(d[0].evaluate(u))}],"filter-==":[hi,[Ti,xi],function(u,d){var g=d[0],A=d[1];return u.properties()[g.value]===A.value}],"filter-id-==":[hi,[xi],function(u,d){var g=d[0];return u.id()===g.value}],"filter-type-==":[hi,[Ti],function(u,d){var g=d[0];return u.geometryType()===g.value}],"filter-<":[hi,[Ti,xi],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],B=A.value;return typeof P==typeof B&&P<B}],"filter-id-<":[hi,[xi],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A<P}],"filter->":[hi,[Ti,xi],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],B=A.value;return typeof P==typeof B&&P>B}],"filter-id->":[hi,[xi],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A>P}],"filter-<=":[hi,[Ti,xi],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],B=A.value;return typeof P==typeof B&&P<=B}],"filter-id-<=":[hi,[xi],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A<=P}],"filter->=":[hi,[Ti,xi],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],B=A.value;return typeof P==typeof B&&P>=B}],"filter-id->=":[hi,[xi],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A>=P}],"filter-has":[hi,[xi],function(u,d){return d[0].value in u.properties()}],"filter-has-id":[hi,[],function(u){return u.id()!==null&&u.id()!==void 0}],"filter-type-in":[hi,[$o(Ti)],function(u,d){return d[0].value.indexOf(u.geometryType())>=0}],"filter-id-in":[hi,[$o(xi)],function(u,d){return d[0].value.indexOf(u.id())>=0}],"filter-in-small":[hi,[Ti,$o(xi)],function(u,d){var g=d[0];return d[1].value.indexOf(u.properties()[g.value])>=0}],"filter-in-large":[hi,[Ti,$o(xi)],function(u,d){var g=d[0],A=d[1];return function(P,B,j,ee){for(;j<=ee;){var be=j+ee>>1;if(B[be]===P)return!0;B[be]>P?ee=be-1:j=be+1}return!1}(u.properties()[g.value],A.value,0,A.value.length-1)}],all:{type:hi,overloads:[[[hi,hi],function(u,d){var g=d[1];return d[0].evaluate(u)&&g.evaluate(u)}],[Rr(hi),function(u,d){for(var g=0,A=d;g<A.length;g+=1)if(!A[g].evaluate(u))return!1;return!0}]]},any:{type:hi,overloads:[[[hi,hi],function(u,d){var g=d[1];return d[0].evaluate(u)||g.evaluate(u)}],[Rr(hi),function(u,d){for(var g=0,A=d;g<A.length;g+=1)if(A[g].evaluate(u))return!0;return!1}]]},"!":[hi,[hi],function(u,d){return!d[0].evaluate(u)}],"is-supported-script":[hi,[Ti],function(u,d){var g=u.globals&&u.globals.isSupportedScript;return!g||g(d[0].evaluate(u))}],upcase:[Ti,[Ti],function(u,d){return d[0].evaluate(u).toUpperCase()}],downcase:[Ti,[Ti],function(u,d){return d[0].evaluate(u).toLowerCase()}],concat:[Ti,Rr(xi),function(u,d){return d.map(function(g){return Hi(g.evaluate(u))}).join("")}],"resolved-locale":[Ti,[ea],function(u,d){return d[0].evaluate(u).resolvedLocale()}]});var fs=function(u,d){this.expression=u,this._warningHistory={},this._evaluator=new ma,this._defaultValue=d?function(g){return g.type==="color"&&Ea(g.default)?new yn(0,0,0,0):g.type==="color"?yn.parse(g.default)||null:g.default===void 0?null:g.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null};function tl(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in tt}function ja(u,d){var g=new uc(tt,[],d?function(P){var B={color:ai,string:Ti,number:Sr,enum:Ti,boolean:hi,formatted:va,resolvedImage:Ro};return P.type==="array"?$o(B[P.value]||xi,P.length):B[P.type]}(d):void 0),A=g.parse(u,void 0,void 0,void 0,d&&d.type==="string"?{typeAnnotation:"coerce"}:void 0);return A?Li(new fs(A,d)):Ui(g.errors)}fs.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,B){return this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=g,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=B,this.expression.evaluate(this._evaluator)},fs.prototype.evaluate=function(u,d,g,A,P,B){this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=g||null,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=B||null;try{var j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new Wr("Expected value to be one of "+Object.keys(this._enumValues).map(function(ee){return JSON.stringify(ee)}).join(", ")+", but found "+JSON.stringify(j)+" instead.");return j}catch(ee){return this._warningHistory[ee.message]||(this._warningHistory[ee.message]=!0,typeof console!="undefined"&&console.warn(ee.message)),this._defaultValue}};var Cu=function(u,d){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!If(d.expression)};Cu.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,B){return this._styleExpression.evaluateWithoutErrorHandling(u,d,g,A,P,B)},Cu.prototype.evaluate=function(u,d,g,A,P,B){return this._styleExpression.evaluate(u,d,g,A,P,B)};var os=function(u,d,g,A){this.kind=u,this.zoomStops=g,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!If(d.expression),this.interpolationType=A};function Sc(u,d){if((u=ja(u,d)).result==="error")return u;var g=u.value.expression,A=Pf(g);if(!A&&!so(d))return Ui([new zr("","data expressions not supported")]);var P=lu(g,["zoom"]);if(!P&&!uo(d))return Ui([new zr("","zoom expressions not supported")]);var B=function j(ee){var be=null;if(ee instanceof mu)be=j(ee.result);else if(ee instanceof Qc)for(var Ne=0,$e=ee.args;Ne<$e.length&&!(be=j($e[Ne]));Ne+=1);else(ee instanceof vu||ee instanceof Vl)&&ee.input instanceof ta&&ee.input.name==="zoom"&&(be=ee);return be instanceof zr||ee.eachChild(function(at){var Tt=j(at);Tt instanceof zr?be=Tt:!be&&Tt?be=new zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):be&&Tt&&be!==Tt&&(be=new zr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),be}(g);return B||P?B instanceof zr?Ui([B]):B instanceof Vl&&!xa(d)?Ui([new zr("",'"interpolate" expressions cannot be used with this property')]):Li(B?new os(A?"camera":"composite",u.value,B.labels,B instanceof Vl?B.interpolation:void 0):new Cu(A?"constant":"source",u.value)):Ui([new zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}os.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,B){return this._styleExpression.evaluateWithoutErrorHandling(u,d,g,A,P,B)},os.prototype.evaluate=function(u,d,g,A,P,B){return this._styleExpression.evaluate(u,d,g,A,P,B)},os.prototype.interpolationFactor=function(u,d,g){return this.interpolationType?Vl.interpolationFactor(this.interpolationType,u,d,g):0};var fc=function(u,d){this._parameters=u,this._specification=d,_r(this,function g(A,P){var B,j,ee,be=P.type==="color",Ne=A.stops&&typeof A.stops[0][0]=="object",$e=Ne||!(Ne||A.property!==void 0),at=A.type||(xa(P)?"exponential":"interval");if(be&&((A=_r({},A)).stops&&(A.stops=A.stops.map(function(fo){return[fo[0],yn.parse(fo[1])]})),A.default=yn.parse(A.default?A.default:P.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!ap[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(at==="exponential")B=Ba;else if(at==="interval")B=Rs;else if(at==="categorical"){B=Ta,j=Object.create(null);for(var Tt=0,Nt=A.stops;Tt<Nt.length;Tt+=1){var fn=Nt[Tt];j[fn[0]]=fn[1]}ee=typeof A.stops[0][0]}else{if(at!=="identity")throw new Error('Unknown function type "'+at+'"');B=Ha}if(Ne){for(var _n={},Hn=[],Ln=0;Ln<A.stops.length;Ln++){var cr=A.stops[Ln],gr=cr[0].zoom;_n[gr]===void 0&&(_n[gr]={zoom:gr,type:A.type,property:A.property,default:A.default,stops:[]},Hn.push(gr)),_n[gr].stops.push([cr[0].value,cr[1]])}for(var Ir=[],Nr=0,Xr=Hn;Nr<Xr.length;Nr+=1){var Mi=Xr[Nr];Ir.push([_n[Mi].zoom,g(_n[Mi],P)])}var Yi={name:"linear"};return{kind:"composite",interpolationType:Yi,interpolationFactor:Vl.interpolationFactor.bind(void 0,Yi),zoomStops:Ir.map(function(fo){return fo[0]}),evaluate:function(fo,Xo){var ho=fo.zoom;return Ba({stops:Ir,base:A.base},P,ho).evaluate(ho,Xo)}}}if($e){var Lo=at==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:Lo,interpolationFactor:Vl.interpolationFactor.bind(void 0,Lo),zoomStops:A.stops.map(function(fo){return fo[0]}),evaluate:function(fo){return B(A,P,fo.zoom,j,ee)}}}return{kind:"source",evaluate:function(fo,Xo){var ho=Xo&&Xo.properties?Xo.properties[A.property]:void 0;return ho===void 0?da(A.default,P.default):B(A,P,ho,j,ee)}}}(this._parameters,this._specification))};function Vu(u){var d=u.key,g=u.value,A=u.valueSpec||{},P=u.objectElementValidators||{},B=u.style,j=u.styleSpec,ee=[],be=Do(g);if(be!=="object")return[new Kt(d,g,"object expected, "+be+" found")];for(var Ne in g){var $e=Ne.split(".")[0],at=A[$e]||A["*"],Tt=void 0;if(P[$e])Tt=P[$e];else if(A[$e])Tt=ze;else if(P["*"])Tt=P["*"];else{if(!A["*"]){ee.push(new Kt(d,g[Ne],'unknown property "'+Ne+'"'));continue}Tt=ze}ee=ee.concat(Tt({key:(d&&d+".")+Ne,value:g[Ne],valueSpec:at,style:B,styleSpec:j,object:g,objectKey:Ne},g))}for(var Nt in A)P[Nt]||A[Nt].required&&A[Nt].default===void 0&&g[Nt]===void 0&&ee.push(new Kt(d,g,'missing required property "'+Nt+'"'));return ee}function eh(u){var d=u.value,g=u.valueSpec,A=u.style,P=u.styleSpec,B=u.key,j=u.arrayElementValidator||ze;if(Do(d)!=="array")return[new Kt(B,d,"array expected, "+Do(d)+" found")];if(g.length&&d.length!==g.length)return[new Kt(B,d,"array length "+g.length+" expected, length "+d.length+" found")];if(g["min-length"]&&d.length<g["min-length"])return[new Kt(B,d,"array length at least "+g["min-length"]+" expected, length "+d.length+" found")];var ee={type:g.value,values:g.values};P.$version<7&&(ee.function=g.function),Do(g.value)==="object"&&(ee=g.value);for(var be=[],Ne=0;Ne<d.length;Ne++)be=be.concat(j({array:d,arrayIndex:Ne,value:d[Ne],valueSpec:ee,style:A,styleSpec:P,key:B+"["+Ne+"]"}));return be}function Cd(u){var d=u.key,g=u.value,A=u.valueSpec,P=Do(g);return P==="number"&&g!=g&&(P="NaN"),P!=="number"?[new Kt(d,g,"number expected, "+P+" found")]:"minimum"in A&&g<A.minimum?[new Kt(d,g,g+" is less than the minimum value "+A.minimum)]:"maximum"in A&&g>A.maximum?[new Kt(d,g,g+" is greater than the maximum value "+A.maximum)]:[]}function bf(u){var d,g,A,P=u.valueSpec,B=Vr(u.value.type),j={},ee=B!=="categorical"&&u.value.property===void 0,be=!ee,Ne=Do(u.value.stops)==="array"&&Do(u.value.stops[0])==="array"&&Do(u.value.stops[0][0])==="object",$e=Vu({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Nt){if(B==="identity")return[new Kt(Nt.key,Nt.value,'identity function may not have a "stops" property')];var fn=[],_n=Nt.value;return fn=fn.concat(eh({key:Nt.key,value:_n,valueSpec:Nt.valueSpec,style:Nt.style,styleSpec:Nt.styleSpec,arrayElementValidator:at})),Do(_n)==="array"&&_n.length===0&&fn.push(new Kt(Nt.key,_n,"array must have at least one stop")),fn},default:function(Nt){return ze({key:Nt.key,value:Nt.value,valueSpec:P,style:Nt.style,styleSpec:Nt.styleSpec})}}});return B==="identity"&&ee&&$e.push(new Kt(u.key,u.value,'missing required property "property"')),B==="identity"||u.value.stops||$e.push(new Kt(u.key,u.value,'missing required property "stops"')),B==="exponential"&&u.valueSpec.expression&&!xa(u.valueSpec)&&$e.push(new Kt(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(be&&!so(u.valueSpec)?$e.push(new Kt(u.key,u.value,"property functions not supported")):ee&&!uo(u.valueSpec)&&$e.push(new Kt(u.key,u.value,"zoom functions not supported"))),B!=="categorical"&&!Ne||u.value.property!==void 0||$e.push(new Kt(u.key,u.value,'"property" property is required')),$e;function at(Nt){var fn=[],_n=Nt.value,Hn=Nt.key;if(Do(_n)!=="array")return[new Kt(Hn,_n,"array expected, "+Do(_n)+" found")];if(_n.length!==2)return[new Kt(Hn,_n,"array length 2 expected, length "+_n.length+" found")];if(Ne){if(Do(_n[0])!=="object")return[new Kt(Hn,_n,"object expected, "+Do(_n[0])+" found")];if(_n[0].zoom===void 0)return[new Kt(Hn,_n,"object stop key must have zoom")];if(_n[0].value===void 0)return[new Kt(Hn,_n,"object stop key must have value")];if(A&&A>Vr(_n[0].zoom))return[new Kt(Hn,_n[0].zoom,"stop zoom values must appear in ascending order")];Vr(_n[0].zoom)!==A&&(A=Vr(_n[0].zoom),g=void 0,j={}),fn=fn.concat(Vu({key:Hn+"[0]",value:_n[0],valueSpec:{zoom:{}},style:Nt.style,styleSpec:Nt.styleSpec,objectElementValidators:{zoom:Cd,value:Tt}}))}else fn=fn.concat(Tt({key:Hn+"[0]",value:_n[0],valueSpec:{},style:Nt.style,styleSpec:Nt.styleSpec},_n));return tl(pr(_n[1]))?fn.concat([new Kt(Hn+"[1]",_n[1],"expressions are not allowed in function stops.")]):fn.concat(ze({key:Hn+"[1]",value:_n[1],valueSpec:P,style:Nt.style,styleSpec:Nt.styleSpec}))}function Tt(Nt,fn){var _n=Do(Nt.value),Hn=Vr(Nt.value),Ln=Nt.value!==null?Nt.value:fn;if(d){if(_n!==d)return[new Kt(Nt.key,Ln,_n+" stop domain type must match previous stop domain type "+d)]}else d=_n;if(_n!=="number"&&_n!=="string"&&_n!=="boolean")return[new Kt(Nt.key,Ln,"stop domain value must be a number, string, or boolean")];if(_n!=="number"&&B!=="categorical"){var cr="number expected, "+_n+" found";return so(P)&&B===void 0&&(cr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Kt(Nt.key,Ln,cr)]}return B!=="categorical"||_n!=="number"||isFinite(Hn)&&Math.floor(Hn)===Hn?B!=="categorical"&&_n==="number"&&g!==void 0&&Hn<g?[new Kt(Nt.key,Ln,"stop domain values must appear in ascending order")]:(g=Hn,B==="categorical"&&Hn in j?[new Kt(Nt.key,Ln,"stop domain values must be unique")]:(j[Hn]=!0,[])):[new Kt(Nt.key,Ln,"integer expected, found "+Hn)]}}function Df(u){var d=(u.expressionContext==="property"?Sc:ja)(pr(u.value),u.valueSpec);if(d.result==="error")return d.value.map(function(A){return new Kt(""+u.key+A.key,u.value,A.message)});var g=d.value.expression||d.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!g.outputDefined())return[new Kt(u.key,u.value,'Invalid data expression for "'+u.propertyKey+'". Output values must be contained as literals within the expression.')];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!If(g))return[new Kt(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!If(g))return[new Kt(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!lu(g,["zoom","feature-state"]))return[new Kt(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Pf(g))return[new Kt(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tf(u){var d=u.key,g=u.value,A=u.valueSpec,P=[];return Array.isArray(A.values)?A.values.indexOf(Vr(g))===-1&&P.push(new Kt(d,g,"expected one of ["+A.values.join(", ")+"], "+JSON.stringify(g)+" found")):Object.keys(A.values).indexOf(Vr(g))===-1&&P.push(new Kt(d,g,"expected one of ["+Object.keys(A.values).join(", ")+"], "+JSON.stringify(g)+" found")),P}function Eh(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(var d=0,g=u.slice(1);d<g.length;d+=1){var A=g[d];if(!Eh(A)&&typeof A!="boolean")return!1}return!0;default:return!0}}fc.deserialize=function(u){return new fc(u._parameters,u._specification)},fc.serialize=function(u){return{_parameters:u._parameters,_specification:u._specification}};var Sh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nf(u){if(u==null)return{filter:function(){return!0},needGeometry:!1};Eh(u)||(u=Rd(u));var d=ja(u,Sh);if(d.result==="error")throw new Error(d.value.map(function(g){return g.key+": "+g.message}).join(", "));return{filter:function(g,A,P){return d.value.evaluate(g,A,{},P)},needGeometry:function g(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var P=1;P<A.length;P++)if(g(A[P]))return!0;return!1}(u)}}function g0(u,d){return u<d?-1:u>d?1:0}function Rd(u){if(!u)return!0;var d,g=u[0];return u.length<=1?g!=="any":g==="=="?Fp(u[1],u[2],"=="):g==="!="?Md(Fp(u[1],u[2],"==")):g==="<"||g===">"||g==="<="||g===">="?Fp(u[1],u[2],g):g==="any"?(d=u.slice(1),["any"].concat(d.map(Rd))):g==="all"?["all"].concat(u.slice(1).map(Rd)):g==="none"?["all"].concat(u.slice(1).map(Rd).map(Md)):g==="in"?Bf(u[1],u.slice(2)):g==="!in"?Md(Bf(u[1],u.slice(2))):g==="has"?kp(u[1]):g==="!has"?Md(kp(u[1])):g!=="within"||u}function Fp(u,d,g){switch(u){case"$type":return["filter-type-"+g,d];case"$id":return["filter-id-"+g,d];default:return["filter-"+g,u,d]}}function Bf(u,d){if(d.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",d]];case"$id":return["filter-id-in",["literal",d]];default:return d.length>200&&!d.some(function(g){return typeof g!=typeof d[0]})?["filter-in-large",u,["literal",d.sort(g0)]]:["filter-in-small",u,["literal",d]]}}function kp(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Md(u){return["!",u]}function lp(u){return Eh(pr(u.value))?Df(_r({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function d(g){var A=g.value,P=g.key;if(Do(A)!=="array")return[new Kt(P,A,"array expected, "+Do(A)+" found")];var B,j=g.styleSpec,ee=[];if(A.length<1)return[new Kt(P,A,"filter array must have at least 1 element")];switch(ee=ee.concat(tf({key:P+"[0]",value:A[0],valueSpec:j.filter_operator,style:g.style,styleSpec:g.styleSpec})),Vr(A[0])){case"<":case"<=":case">":case">=":A.length>=2&&Vr(A[1])==="$type"&&ee.push(new Kt(P,A,'"$type" cannot be use with operator "'+A[0]+'"'));case"==":case"!=":A.length!==3&&ee.push(new Kt(P,A,'filter array for operator "'+A[0]+'" must have 3 elements'));case"in":case"!in":A.length>=2&&(B=Do(A[1]))!=="string"&&ee.push(new Kt(P+"[1]",A[1],"string expected, "+B+" found"));for(var be=2;be<A.length;be++)B=Do(A[be]),Vr(A[1])==="$type"?ee=ee.concat(tf({key:P+"["+be+"]",value:A[be],valueSpec:j.geometry_type,style:g.style,styleSpec:g.styleSpec})):B!=="string"&&B!=="number"&&B!=="boolean"&&ee.push(new Kt(P+"["+be+"]",A[be],"string, number, or boolean expected, "+B+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<A.length;Ne++)ee=ee.concat(d({key:P+"["+Ne+"]",value:A[Ne],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":B=Do(A[1]),A.length!==2?ee.push(new Kt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):B!=="string"&&ee.push(new Kt(P+"[1]",A[1],"string expected, "+B+" found"));break;case"within":B=Do(A[1]),A.length!==2?ee.push(new Kt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):B!=="object"&&ee.push(new Kt(P+"[1]",A[1],"object expected, "+B+" found"))}return ee}(u)}function Ff(u,d){var g=u.key,A=u.style,P=u.styleSpec,B=u.value,j=u.objectKey,ee=P[d+"_"+u.layerType];if(!ee)return[];var be=j.match(/^(.*)-transition$/);if(d==="paint"&&be&&ee[be[1]]&&ee[be[1]].transition)return ze({key:g,value:B,valueSpec:P.transition,style:A,styleSpec:P});var Ne,$e=u.valueSpec||ee[j];if(!$e)return[new Kt(g,B,'unknown property "'+j+'"')];if(Do(B)==="string"&&so($e)&&!$e.tokens&&(Ne=/^{([^}]+)}$/.exec(B)))return[new Kt(g,B,'"'+j+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ne[1])+" }`.")];var at=[];return u.layerType==="symbol"&&(j==="text-field"&&A&&!A.glyphs&&at.push(new Kt(g,B,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&Ea(pr(B))&&Vr(B.type)==="identity"&&at.push(new Kt(g,B,'"text-font" does not support identity functions'))),at.concat(ze({key:u.key,value:B,valueSpec:$e,style:A,styleSpec:P,expressionContext:"property",propertyType:d,propertyKey:j}))}function zp(u){return Ff(u,"paint")}function Th(u){return Ff(u,"layout")}function Up(u){var d=[],g=u.value,A=u.key,P=u.style,B=u.styleSpec;g.type||g.ref||d.push(new Kt(A,g,'either "type" or "ref" is required'));var j,ee=Vr(g.type),be=Vr(g.ref);if(g.id)for(var Ne=Vr(g.id),$e=0;$e<u.arrayIndex;$e++){var at=P.layers[$e];Vr(at.id)===Ne&&d.push(new Kt(A,g.id,'duplicate layer id "'+g.id+'", previously used at line '+at.id.__line__))}if("ref"in g)["type","source","source-layer","filter","layout"].forEach(function(fn){fn in g&&d.push(new Kt(A,g[fn],'"'+fn+'" is prohibited for ref layers'))}),P.layers.forEach(function(fn){Vr(fn.id)===be&&(j=fn)}),j?j.ref?d.push(new Kt(A,g.ref,"ref cannot reference another ref layer")):ee=Vr(j.type):d.push(new Kt(A,g.ref,'ref layer "'+be+'" not found'));else if(ee!=="background")if(g.source){var Tt=P.sources&&P.sources[g.source],Nt=Tt&&Vr(Tt.type);Tt?Nt==="vector"&&ee==="raster"?d.push(new Kt(A,g.source,'layer "'+g.id+'" requires a raster source')):Nt==="raster"&&ee!=="raster"?d.push(new Kt(A,g.source,'layer "'+g.id+'" requires a vector source')):Nt!=="vector"||g["source-layer"]?Nt==="raster-dem"&&ee!=="hillshade"?d.push(new Kt(A,g.source,"raster-dem source can only be used with layer type 'hillshade'.")):ee!=="line"||!g.paint||!g.paint["line-gradient"]||Nt==="geojson"&&Tt.lineMetrics||d.push(new Kt(A,g,'layer "'+g.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):d.push(new Kt(A,g,'layer "'+g.id+'" must specify a "source-layer"')):d.push(new Kt(A,g.source,'source "'+g.source+'" not found'))}else d.push(new Kt(A,g,'missing required property "source"'));return d=d.concat(Vu({key:A,value:g,valueSpec:B.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ze({key:A+".type",value:g.type,valueSpec:B.layer.type,style:u.style,styleSpec:u.styleSpec,object:g,objectKey:"type"})},filter:lp,layout:function(fn){return Vu({layer:g,key:fn.key,value:fn.value,style:fn.style,styleSpec:fn.styleSpec,objectElementValidators:{"*":function(_n){return Th(_r({layerType:ee},_n))}}})},paint:function(fn){return Vu({layer:g,key:fn.key,value:fn.value,style:fn.style,styleSpec:fn.styleSpec,objectElementValidators:{"*":function(_n){return zp(_r({layerType:ee},_n))}}})}}}))}function kf(u){var d=u.value,g=u.key,A=Do(d);return A!=="string"?[new Kt(g,d,"string expected, "+A+" found")]:[]}var Zs={promoteId:function(u){var d=u.key,g=u.value;if(Do(g)==="string")return kf({key:d,value:g});var A=[];for(var P in g)A.push.apply(A,kf({key:d+"."+P,value:g[P]}));return A}};function up(u){var d=u.value,g=u.key,A=u.styleSpec,P=u.style;if(!d.type)return[new Kt(g,d,'"type" is required')];var B,j=Vr(d.type);switch(j){case"vector":case"raster":case"raster-dem":return Vu({key:g,value:d,valueSpec:A["source_"+j.replace("-","_")],style:u.style,styleSpec:A,objectElementValidators:Zs});case"geojson":if(B=Vu({key:g,value:d,valueSpec:A.source_geojson,style:P,styleSpec:A,objectElementValidators:Zs}),d.cluster)for(var ee in d.clusterProperties){var be=d.clusterProperties[ee],Ne=be[0],$e=typeof Ne=="string"?[Ne,["accumulated"],["get",ee]]:Ne;B.push.apply(B,Df({key:g+"."+ee+".map",value:be[1],expressionContext:"cluster-map"})),B.push.apply(B,Df({key:g+"."+ee+".reduce",value:$e,expressionContext:"cluster-reduce"}))}return B;case"video":return Vu({key:g,value:d,valueSpec:A.source_video,style:P,styleSpec:A});case"image":return Vu({key:g,value:d,valueSpec:A.source_image,style:P,styleSpec:A});case"canvas":return[new Kt(g,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tf({key:g+".type",value:d.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,styleSpec:A})}}function xf(u){var d=u.value,g=u.styleSpec,A=g.light,P=u.style,B=[],j=Do(d);if(d===void 0)return B;if(j!=="object")return B.concat([new Kt("light",d,"object expected, "+j+" found")]);for(var ee in d){var be=ee.match(/^(.*)-transition$/);B=B.concat(be&&A[be[1]]&&A[be[1]].transition?ze({key:ee,value:d[ee],valueSpec:g.transition,style:P,styleSpec:g}):A[ee]?ze({key:ee,value:d[ee],valueSpec:A[ee],style:P,styleSpec:g}):[new Kt(ee,d[ee],'unknown property "'+ee+'"')])}return B}var ve={"*":function(){return[]},array:eh,boolean:function(u){var d=u.value,g=u.key,A=Do(d);return A!=="boolean"?[new Kt(g,d,"boolean expected, "+A+" found")]:[]},number:Cd,color:function(u){var d=u.key,g=u.value,A=Do(g);return A!=="string"?[new Kt(d,g,"color expected, "+A+" found")]:Bn(g)===null?[new Kt(d,g,'color expected, "'+g+'" found')]:[]},constants:Qn,enum:tf,filter:lp,function:bf,layer:Up,object:Vu,source:up,light:xf,string:kf,formatted:function(u){return kf(u).length===0?[]:Df(u)},resolvedImage:function(u){return kf(u).length===0?[]:Df(u)}};function ze(u){var d=u.value,g=u.valueSpec,A=u.styleSpec;return g.expression&&Ea(Vr(d))?bf(u):g.expression&&tl(pr(d))?Df(u):g.type&&ve[g.type]?ve[g.type](u):Vu(_r({},u,{valueSpec:g.type?A[g.type]:g}))}function yt(u){var d=u.value,g=u.key,A=kf(u);return A.length||(d.indexOf("{fontstack}")===-1&&A.push(new Kt(g,d,'"glyphs" url must include a "{fontstack}" token')),d.indexOf("{range}")===-1&&A.push(new Kt(g,d,'"glyphs" url must include a "{range}" token'))),A}function An(u,d){d===void 0&&(d=Et);var g=[];return g=g.concat(ze({key:"",value:u,valueSpec:d.$root,styleSpec:d,style:u,objectElementValidators:{glyphs:yt,"*":function(){return[]}}})),u.constants&&(g=g.concat(Qn({key:"constants",value:u.constants,style:u,styleSpec:d}))),sr(g)}function sr(u){return[].concat(u).sort(function(d,g){return d.line-g.line})}function Ur(u){return function(){for(var d=[],g=arguments.length;g--;)d[g]=arguments[g];return sr(u.apply(this,d))}}An.source=Ur(up),An.light=Ur(xf),An.layer=Ur(Up),An.filter=Ur(lp),An.paintProperty=Ur(zp),An.layoutProperty=Ur(Th);var yi=An,qi=yi.light,pa=yi.paintProperty,_a=yi.layoutProperty;function xs(u,d){var g=!1;if(d&&d.length)for(var A=0,P=d;A<P.length;A+=1)u.fire(new $t(new Error(P[A].message))),g=!0;return g}var Fa=Ia;function Ia(u,d,g){var A=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var P=new Int32Array(this.arrayBuffer);u=P[0],this.d=(d=P[1])+2*(g=P[2]);for(var B=0;B<this.d*this.d;B++){var j=P[3+B],ee=P[3+B+1];A.push(j===ee?null:P.subarray(j,ee))}var be=P[3+A.length+1];this.keys=P.subarray(P[3+A.length],be),this.bboxes=P.subarray(be),this.insert=this._insertReadonly}else{this.d=d+2*g;for(var Ne=0;Ne<this.d*this.d;Ne++)A.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=g,this.scale=d/u,this.uid=0;var $e=g/d*u;this.min=-$e,this.max=u+$e}Ia.prototype.insert=function(u,d,g,A,P){this._forEachCell(d,g,A,P,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(A),this.bboxes.push(P)},Ia.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ia.prototype._insertCell=function(u,d,g,A,P,B){this.cells[P].push(B)},Ia.prototype.query=function(u,d,g,A,P){var B=this.min,j=this.max;if(u<=B&&d<=B&&j<=g&&j<=A&&!P)return Array.prototype.slice.call(this.keys);var ee=[];return this._forEachCell(u,d,g,A,this._queryCell,ee,{},P),ee},Ia.prototype._queryCell=function(u,d,g,A,P,B,j,ee){var be=this.cells[P];if(be!==null)for(var Ne=this.keys,$e=this.bboxes,at=0;at<be.length;at++){var Tt=be[at];if(j[Tt]===void 0){var Nt=4*Tt;(ee?ee($e[Nt+0],$e[Nt+1],$e[Nt+2],$e[Nt+3]):u<=$e[Nt+2]&&d<=$e[Nt+3]&&g>=$e[Nt+0]&&A>=$e[Nt+1])?(j[Tt]=!0,B.push(Ne[Tt])):j[Tt]=!1}}},Ia.prototype._forEachCell=function(u,d,g,A,P,B,j,ee){for(var be=this._convertToCellCoord(u),Ne=this._convertToCellCoord(d),$e=this._convertToCellCoord(g),at=this._convertToCellCoord(A),Tt=be;Tt<=$e;Tt++)for(var Nt=Ne;Nt<=at;Nt++){var fn=this.d*Nt+Tt;if((!ee||ee(this._convertFromCellCoord(Tt),this._convertFromCellCoord(Nt),this._convertFromCellCoord(Tt+1),this._convertFromCellCoord(Nt+1)))&&P.call(this,u,d,g,A,fn,B,j,ee))return}},Ia.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},Ia.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},Ia.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,d=3+this.cells.length+1+1,g=0,A=0;A<this.cells.length;A++)g+=this.cells[A].length;var P=new Int32Array(d+g+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;for(var B=d,j=0;j<u.length;j++){var ee=u[j];P[3+j]=B,P.set(ee,B),B+=ee.length}return P[3+u.length]=B,P.set(this.keys,B),P[3+u.length+1]=B+=this.keys.length,P.set(this.bboxes,B),B+=this.bboxes.length,P.buffer};var Ru=oe.ImageData,nf=oe.ImageBitmap,nl={};function co(u,d,g){g===void 0&&(g={}),Object.defineProperty(d,"_classRegistryKey",{value:u,writeable:!1}),nl[u]={klass:d,omit:g.omit||[],shallow:g.shallow||[]}}for(var Yu in co("Object",Object),Fa.serialize=function(u,d){var g=u.toArrayBuffer();return d&&d.push(g),{buffer:g}},Fa.deserialize=function(u){return new Fa(u.buffer)},co("Grid",Fa),co("Color",yn),co("Error",Error),co("ResolvedImage",Jr),co("StylePropertyFunction",fc),co("StyleExpression",fs,{omit:["_evaluator"]}),co("ZoomDependentExpression",os),co("ZoomConstantExpression",Cu),co("CompoundExpression",ta,{omit:["_evaluate"]}),tt)tt[Yu]._classRegistryKey||co("Expression_"+Yu,tt[Yu]);function Pd(u){return u&&typeof ArrayBuffer!="undefined"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function wh(u){return nf&&u instanceof nf}function wa(u,d){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(Pd(u)||wh(u))return d&&d.push(u),u;if(ArrayBuffer.isView(u)){var g=u;return d&&d.push(g.buffer),g}if(u instanceof Ru)return d&&d.push(u.data.buffer),u;if(Array.isArray(u)){for(var A=[],P=0,B=u;P<B.length;P+=1)A.push(wa(B[P],d));return A}if(typeof u=="object"){var j=u.constructor,ee=j._classRegistryKey;if(!ee)throw new Error("can't serialize object of unregistered class");var be=j.serialize?j.serialize(u,d):{};if(!j.serialize){for(var Ne in u)if(u.hasOwnProperty(Ne)&&!(nl[ee].omit.indexOf(Ne)>=0)){var $e=u[Ne];be[Ne]=nl[ee].shallow.indexOf(Ne)>=0?$e:wa($e,d)}u instanceof Error&&(be.message=u.message)}if(be.$name)throw new Error("$name property is reserved for worker serialization logic.");return ee!=="Object"&&(be.$name=ee),be}throw new Error("can't serialize object of type "+typeof u)}function ns(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||Pd(u)||wh(u)||ArrayBuffer.isView(u)||u instanceof Ru)return u;if(Array.isArray(u))return u.map(ns);if(typeof u=="object"){var d=u.$name||"Object",g=nl[d].klass;if(!g)throw new Error("can't deserialize unregistered class "+d);if(g.deserialize)return g.deserialize(u);for(var A=Object.create(g.prototype),P=0,B=Object.keys(u);P<B.length;P+=1){var j=B[P];if(j!=="$name"){var ee=u[j];A[j]=nl[d].shallow.indexOf(j)>=0?ee:ns(ee)}}return A}throw new Error("can't deserialize object of type "+typeof u)}var y0=function(){this.first=!0};y0.prototype.update=function(u,d){var g=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=g,!0))};var Zi={"Latin-1 Supplement":function(u){return u>=128&&u<=255},Arabic:function(u){return u>=1536&&u<=1791},"Arabic Supplement":function(u){return u>=1872&&u<=1919},"Arabic Extended-A":function(u){return u>=2208&&u<=2303},"Hangul Jamo":function(u){return u>=4352&&u<=4607},"Unified Canadian Aboriginal Syllabics":function(u){return u>=5120&&u<=5759},Khmer:function(u){return u>=6016&&u<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(u){return u>=6320&&u<=6399},"General Punctuation":function(u){return u>=8192&&u<=8303},"Letterlike Symbols":function(u){return u>=8448&&u<=8527},"Number Forms":function(u){return u>=8528&&u<=8591},"Miscellaneous Technical":function(u){return u>=8960&&u<=9215},"Control Pictures":function(u){return u>=9216&&u<=9279},"Optical Character Recognition":function(u){return u>=9280&&u<=9311},"Enclosed Alphanumerics":function(u){return u>=9312&&u<=9471},"Geometric Shapes":function(u){return u>=9632&&u<=9727},"Miscellaneous Symbols":function(u){return u>=9728&&u<=9983},"Miscellaneous Symbols and Arrows":function(u){return u>=11008&&u<=11263},"CJK Radicals Supplement":function(u){return u>=11904&&u<=12031},"Kangxi Radicals":function(u){return u>=12032&&u<=12255},"Ideographic Description Characters":function(u){return u>=12272&&u<=12287},"CJK Symbols and Punctuation":function(u){return u>=12288&&u<=12351},Hiragana:function(u){return u>=12352&&u<=12447},Katakana:function(u){return u>=12448&&u<=12543},Bopomofo:function(u){return u>=12544&&u<=12591},"Hangul Compatibility Jamo":function(u){return u>=12592&&u<=12687},Kanbun:function(u){return u>=12688&&u<=12703},"Bopomofo Extended":function(u){return u>=12704&&u<=12735},"CJK Strokes":function(u){return u>=12736&&u<=12783},"Katakana Phonetic Extensions":function(u){return u>=12784&&u<=12799},"Enclosed CJK Letters and Months":function(u){return u>=12800&&u<=13055},"CJK Compatibility":function(u){return u>=13056&&u<=13311},"CJK Unified Ideographs Extension A":function(u){return u>=13312&&u<=19903},"Yijing Hexagram Symbols":function(u){return u>=19904&&u<=19967},"CJK Unified Ideographs":function(u){return u>=19968&&u<=40959},"Yi Syllables":function(u){return u>=40960&&u<=42127},"Yi Radicals":function(u){return u>=42128&&u<=42191},"Hangul Jamo Extended-A":function(u){return u>=43360&&u<=43391},"Hangul Syllables":function(u){return u>=44032&&u<=55215},"Hangul Jamo Extended-B":function(u){return u>=55216&&u<=55295},"Private Use Area":function(u){return u>=57344&&u<=63743},"CJK Compatibility Ideographs":function(u){return u>=63744&&u<=64255},"Arabic Presentation Forms-A":function(u){return u>=64336&&u<=65023},"Vertical Forms":function(u){return u>=65040&&u<=65055},"CJK Compatibility Forms":function(u){return u>=65072&&u<=65103},"Small Form Variants":function(u){return u>=65104&&u<=65135},"Arabic Presentation Forms-B":function(u){return u>=65136&&u<=65279},"Halfwidth and Fullwidth Forms":function(u){return u>=65280&&u<=65519}};function Ef(u){for(var d=0,g=u;d<g.length;d+=1)if(Id(g[d].charCodeAt(0)))return!0;return!1}function Id(u){return!(u!==746&&u!==747&&(u<4352||!(Zi["Bopomofo Extended"](u)||Zi.Bopomofo(u)||Zi["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Zi["CJK Compatibility Ideographs"](u)||Zi["CJK Compatibility"](u)||Zi["CJK Radicals Supplement"](u)||Zi["CJK Strokes"](u)||!(!Zi["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Zi["CJK Unified Ideographs Extension A"](u)||Zi["CJK Unified Ideographs"](u)||Zi["Enclosed CJK Letters and Months"](u)||Zi["Hangul Compatibility Jamo"](u)||Zi["Hangul Jamo Extended-A"](u)||Zi["Hangul Jamo Extended-B"](u)||Zi["Hangul Jamo"](u)||Zi["Hangul Syllables"](u)||Zi.Hiragana(u)||Zi["Ideographic Description Characters"](u)||Zi.Kanbun(u)||Zi["Kangxi Radicals"](u)||Zi["Katakana Phonetic Extensions"](u)||Zi.Katakana(u)&&u!==12540||!(!Zi["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Zi["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Zi["Unified Canadian Aboriginal Syllabics"](u)||Zi["Unified Canadian Aboriginal Syllabics Extended"](u)||Zi["Vertical Forms"](u)||Zi["Yijing Hexagram Symbols"](u)||Zi["Yi Syllables"](u)||Zi["Yi Radicals"](u))))}function Ah(u){return!(Id(u)||function(d){return!!(Zi["Latin-1 Supplement"](d)&&(d===167||d===169||d===174||d===177||d===188||d===189||d===190||d===215||d===247)||Zi["General Punctuation"](d)&&(d===8214||d===8224||d===8225||d===8240||d===8241||d===8251||d===8252||d===8258||d===8263||d===8264||d===8265||d===8273)||Zi["Letterlike Symbols"](d)||Zi["Number Forms"](d)||Zi["Miscellaneous Technical"](d)&&(d>=8960&&d<=8967||d>=8972&&d<=8991||d>=8996&&d<=9e3||d===9003||d>=9085&&d<=9114||d>=9150&&d<=9165||d===9167||d>=9169&&d<=9179||d>=9186&&d<=9215)||Zi["Control Pictures"](d)&&d!==9251||Zi["Optical Character Recognition"](d)||Zi["Enclosed Alphanumerics"](d)||Zi["Geometric Shapes"](d)||Zi["Miscellaneous Symbols"](d)&&!(d>=9754&&d<=9759)||Zi["Miscellaneous Symbols and Arrows"](d)&&(d>=11026&&d<=11055||d>=11088&&d<=11097||d>=11192&&d<=11243)||Zi["CJK Symbols and Punctuation"](d)||Zi.Katakana(d)||Zi["Private Use Area"](d)||Zi["CJK Compatibility Forms"](d)||Zi["Small Form Variants"](d)||Zi["Halfwidth and Fullwidth Forms"](d)||d===8734||d===8756||d===8757||d>=9984&&d<=10087||d>=10102&&d<=10131||d===65532||d===65533)}(u))}function Sf(u){return u>=1424&&u<=2303||Zi["Arabic Presentation Forms-A"](u)||Zi["Arabic Presentation Forms-B"](u)}function hc(u,d){return!(!d&&Sf(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Zi.Khmer(u))}function _0(u){for(var d=0,g=u;d<g.length;d+=1)if(Sf(g[d].charCodeAt(0)))return!0;return!1}var Oh=null,Ku="unavailable",th=null,b0=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(Ku="error"),Oh&&Oh(u)};function Ld(){x0.fire(new wt("pluginStateChange",{pluginStatus:Ku,pluginURL:th}))}var x0=new vn,iv=function(){return Ku},dc=function(){if(Ku!=="deferred"||!th)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ku="loading",Ld(),th&&yr({url:th},function(u){u?b0(u):(Ku="loaded",Ld())})},zc={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ku==="loaded"||zc.applyArabicShaping!=null},isLoading:function(){return Ku==="loading"},setState:function(u){Ku=u.pluginStatus,th=u.pluginURL},isParsed:function(){return zc.applyArabicShaping!=null&&zc.processBidirectionalText!=null&&zc.processStyledBidirectionalText!=null},getPluginURL:function(){return th}},ba=function(u,d){this.zoom=u,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new y0,this.transition={})};ba.prototype.isSupportedScript=function(u){return function(d,g){for(var A=0,P=d;A<P.length;A+=1)if(!hc(P[A].charCodeAt(0),g))return!1;return!0}(u,zc.isLoaded())},ba.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ba.prototype.getCrossfadeParameters=function(){var u=this.zoom,d=u-Math.floor(u),g=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*d}};var pc=function(u,d){this.property=u,this.value=d,this.expression=function(g,A){if(Ea(g))return new fc(g,A);if(tl(g)){var P=Sc(g,A);if(P.result==="error")throw new Error(P.value.map(function(j){return j.key+": "+j.message}).join(", "));return P.value}var B=g;return typeof g=="string"&&A.type==="color"&&(B=yn.parse(g)),{kind:"constant",evaluate:function(){return B}}}(d===void 0?u.specification.default:d,u.specification)};pc.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},pc.prototype.possiblyEvaluate=function(u,d,g){return this.property.possiblyEvaluate(this,u,d,g)};var rf=function(u){this.property=u,this.value=new pc(u,void 0)};rf.prototype.transitioned=function(u,d){return new Zh(this.property,this.value,d,le({},u.transition,this.transition),u.now)},rf.prototype.untransitioned=function(){return new Zh(this.property,this.value,null,{},0)};var gu=function(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)};gu.prototype.getValue=function(u){return we(this._values[u].value.value)},gu.prototype.setValue=function(u,d){this._values.hasOwnProperty(u)||(this._values[u]=new rf(this._values[u].property)),this._values[u].value=new pc(this._values[u].property,d===null?void 0:we(d))},gu.prototype.getTransition=function(u){return we(this._values[u].transition)},gu.prototype.setTransition=function(u,d){this._values.hasOwnProperty(u)||(this._values[u]=new rf(this._values[u].property)),this._values[u].transition=we(d)||void 0},gu.prototype.serialize=function(){for(var u={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(u[A]=P);var B=this.getTransition(A);B!==void 0&&(u[A+"-transition"]=B)}return u},gu.prototype.transitioned=function(u,d){for(var g=new ql(this._properties),A=0,P=Object.keys(this._values);A<P.length;A+=1){var B=P[A];g._values[B]=this._values[B].transitioned(u,d._values[B])}return g},gu.prototype.untransitioned=function(){for(var u=new ql(this._properties),d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d];u._values[A]=this._values[A].untransitioned()}return u};var Zh=function(u,d,g,A,P){this.property=u,this.value=d,this.begin=P+A.delay||0,this.end=this.begin+A.duration||0,u.specification.transition&&(A.delay||A.duration)&&(this.prior=g)};Zh.prototype.possiblyEvaluate=function(u,d,g){var A=u.now||0,P=this.value.possiblyEvaluate(u,d,g),B=this.prior;if(B){if(A>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(A<this.begin)return B.possiblyEvaluate(u,d,g);var j=(A-this.begin)/(this.end-this.begin);return this.property.interpolate(B.possiblyEvaluate(u,d,g),P,function(ee){if(ee<=0)return 0;if(ee>=1)return 1;var be=ee*ee,Ne=be*ee;return 4*(ee<.5?Ne:3*(ee-be)+Ne-.75)}(j))}return P};var ql=function(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)};ql.prototype.possiblyEvaluate=function(u,d,g){for(var A=new cp(this._properties),P=0,B=Object.keys(this._values);P<B.length;P+=1){var j=B[P];A._values[j]=this._values[j].possiblyEvaluate(u,d,g)}return A},ql.prototype.hasTransition=function(){for(var u=0,d=Object.keys(this._values);u<d.length;u+=1)if(this._values[d[u]].prior)return!0;return!1};var Hu=function(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)};Hu.prototype.getValue=function(u){return we(this._values[u].value)},Hu.prototype.setValue=function(u,d){this._values[u]=new pc(this._values[u].property,d===null?void 0:we(d))},Hu.prototype.serialize=function(){for(var u={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(u[A]=P)}return u},Hu.prototype.possiblyEvaluate=function(u,d,g){for(var A=new cp(this._properties),P=0,B=Object.keys(this._values);P<B.length;P+=1){var j=B[P];A._values[j]=this._values[j].possiblyEvaluate(u,d,g)}return A};var qu=function(u,d,g){this.property=u,this.value=d,this.parameters=g};qu.prototype.isConstant=function(){return this.value.kind==="constant"},qu.prototype.constantOr=function(u){return this.value.kind==="constant"?this.value.value:u},qu.prototype.evaluate=function(u,d,g,A){return this.property.evaluate(this.value,this.parameters,u,d,g,A)};var cp=function(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)};cp.prototype.get=function(u){return this._values[u]};var No=function(u){this.specification=u};No.prototype.possiblyEvaluate=function(u,d){return u.expression.evaluate(d)},No.prototype.interpolate=function(u,d,g){var A=Ou[this.specification.type];return A?A(u,d,g):u};var So=function(u,d){this.specification=u,this.overrides=d};So.prototype.possiblyEvaluate=function(u,d,g,A){return new qu(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},g,A)}:u.expression,d)},So.prototype.interpolate=function(u,d,g){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new qu(this,{kind:"constant",value:void 0},u.parameters);var A=Ou[this.specification.type];return A?new qu(this,{kind:"constant",value:A(u.value.value,d.value.value,g)},u.parameters):u},So.prototype.evaluate=function(u,d,g,A,P,B){return u.kind==="constant"?u.value:u.evaluate(d,g,A,P,B)};var Ql=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A,P,B){if(g.value===void 0)return new qu(this,{kind:"constant",value:void 0},A);if(g.expression.kind==="constant"){var j=g.expression.evaluate(A,null,{},P,B),ee=g.property.specification.type==="resolvedImage"&&typeof j!="string"?j.name:j,be=this._calculate(ee,ee,ee,A);return new qu(this,{kind:"constant",value:be},A)}if(g.expression.kind==="camera"){var Ne=this._calculate(g.expression.evaluate({zoom:A.zoom-1}),g.expression.evaluate({zoom:A.zoom}),g.expression.evaluate({zoom:A.zoom+1}),A);return new qu(this,{kind:"constant",value:Ne},A)}return new qu(this,g.expression,A)},d.prototype.evaluate=function(g,A,P,B,j,ee){if(g.kind==="source"){var be=g.evaluate(A,P,B,j,ee);return this._calculate(be,be,be,A)}return g.kind==="composite"?this._calculate(g.evaluate({zoom:Math.floor(A.zoom)-1},P,B),g.evaluate({zoom:Math.floor(A.zoom)},P,B),g.evaluate({zoom:Math.floor(A.zoom)+1},P,B),A):g.value},d.prototype._calculate=function(g,A,P,B){return B.zoom>B.zoomHistory.lastIntegerZoom?{from:g,to:A}:{from:P,to:A}},d.prototype.interpolate=function(g){return g},d}(So),Qu=function(u){this.specification=u};Qu.prototype.possiblyEvaluate=function(u,d,g,A){if(u.value!==void 0){if(u.expression.kind==="constant"){var P=u.expression.evaluate(d,null,{},g,A);return this._calculate(P,P,P,d)}return this._calculate(u.expression.evaluate(new ba(Math.floor(d.zoom-1),d)),u.expression.evaluate(new ba(Math.floor(d.zoom),d)),u.expression.evaluate(new ba(Math.floor(d.zoom+1),d)),d)}},Qu.prototype._calculate=function(u,d,g,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:g,to:d}},Qu.prototype.interpolate=function(u){return u};var Ju=function(u){this.specification=u};Ju.prototype.possiblyEvaluate=function(u,d,g,A){return!!u.expression.evaluate(d,null,{},g,A)},Ju.prototype.interpolate=function(){return!1};var dl=function(u){for(var d in this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],u){var g=u[d];g.specification.overridable&&this.overridableProperties.push(d);var A=this.defaultPropertyValues[d]=new pc(g,void 0),P=this.defaultTransitionablePropertyValues[d]=new rf(g);this.defaultTransitioningPropertyValues[d]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=A.possiblyEvaluate({})}};co("DataDrivenProperty",So),co("DataConstantProperty",No),co("CrossFadedDataDrivenProperty",Ql),co("CrossFadedProperty",Qu),co("ColorRampProperty",Ju);var Tc=function(u){function d(g,A){if(u.call(this),this.id=g.id,this.type=g.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},g.type!=="custom"&&(this.metadata=(g=g).metadata,this.minzoom=g.minzoom,this.maxzoom=g.maxzoom,g.type!=="background"&&(this.source=g.source,this.sourceLayer=g["source-layer"],this.filter=g.filter),A.layout&&(this._unevaluatedLayout=new Hu(A.layout)),A.paint)){for(var P in this._transitionablePaint=new gu(A.paint),g.paint)this.setPaintProperty(P,g.paint[P],{validate:!1});for(var B in g.layout)this.setLayoutProperty(B,g.layout[B],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new cp(A.paint)}}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},d.prototype.getLayoutProperty=function(g){return g==="visibility"?this.visibility:this._unevaluatedLayout.getValue(g)},d.prototype.setLayoutProperty=function(g,A,P){P===void 0&&(P={}),A!=null&&this._validate(_a,"layers."+this.id+".layout."+g,g,A,P)||(g!=="visibility"?this._unevaluatedLayout.setValue(g,A):this.visibility=A)},d.prototype.getPaintProperty=function(g){return dt(g,"-transition")?this._transitionablePaint.getTransition(g.slice(0,-11)):this._transitionablePaint.getValue(g)},d.prototype.setPaintProperty=function(g,A,P){if(P===void 0&&(P={}),A!=null&&this._validate(pa,"layers."+this.id+".paint."+g,g,A,P))return!1;if(dt(g,"-transition"))return this._transitionablePaint.setTransition(g.slice(0,-11),A||void 0),!1;var B=this._transitionablePaint._values[g],j=B.property.specification["property-type"]==="cross-faded-data-driven",ee=B.value.isDataDriven(),be=B.value;this._transitionablePaint.setValue(g,A),this._handleSpecialPaintPropertyUpdate(g);var Ne=this._transitionablePaint._values[g].value;return Ne.isDataDriven()||ee||j||this._handleOverridablePaintPropertyUpdate(g,be,Ne)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!1},d.prototype.isHidden=function(g){return!!(this.minzoom&&g<this.minzoom)||!!(this.maxzoom&&g>=this.maxzoom)||this.visibility==="none"},d.prototype.updateTransitions=function(g){this._transitioningPaint=this._transitionablePaint.transitioned(g,this._transitioningPaint)},d.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},d.prototype.recalculate=function(g,A){g.getCrossfadeParameters&&(this._crossfadeParameters=g.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(g,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(g,void 0,A)},d.prototype.serialize=function(){var g={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(g.layout=g.layout||{},g.layout.visibility=this.visibility),Me(g,function(A,P){return!(A===void 0||P==="layout"&&!Object.keys(A).length||P==="paint"&&!Object.keys(A).length)})},d.prototype._validate=function(g,A,P,B,j){return j===void 0&&(j={}),(!j||j.validate!==!1)&&xs(this,g.call(yi,{key:A,layerType:this.type,objectKey:P,value:B,styleSpec:Et,style:{glyphs:!0,sprite:!0}}))},d.prototype.is3D=function(){return!1},d.prototype.isTileClipped=function(){return!1},d.prototype.hasOffscreenPass=function(){return!1},d.prototype.resize=function(){},d.prototype.isStateDependent=function(){for(var g in this.paint._values){var A=this.paint.get(g);if(A instanceof qu&&so(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1},d}(vn),nh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Dd=function(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ms=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function yu(u,d){d===void 0&&(d=1);var g=0,A=0;return{members:u.map(function(P){var B=nh[P.type].BYTES_PER_ELEMENT,j=g=E0(g,Math.max(d,B)),ee=P.components||1;return A=Math.max(A,B),g+=B*ee,{name:P.name,type:P.type,components:ee,offset:j}}),size:E0(g,Math.max(A,d)),alignment:d}}function E0(u,d){return Math.ceil(u/d)*d}Ms.serialize=function(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}},Ms.deserialize=function(u){var d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d},Ms.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ms.prototype.clear=function(){this.length=0},Ms.prototype.resize=function(u){this.reserve(u),this.length=u},Ms.prototype.reserve=function(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}},Ms.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Xh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var B=2*g;return this.int16[B+0]=A,this.int16[B+1]=P,g},d}(Ms);Xh.prototype.bytesPerElement=4,co("StructArrayLayout2i4",Xh);var fp=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,B)},d.prototype.emplace=function(g,A,P,B,j){var ee=4*g;return this.int16[ee+0]=A,this.int16[ee+1]=P,this.int16[ee+2]=B,this.int16[ee+3]=j,g},d}(Ms);fp.prototype.bytesPerElement=8,co("StructArrayLayout4i8",fp);var Ch=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,ee){var be=this.length;return this.resize(be+1),this.emplace(be,g,A,P,B,j,ee)},d.prototype.emplace=function(g,A,P,B,j,ee,be){var Ne=6*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.int16[Ne+2]=B,this.int16[Ne+3]=j,this.int16[Ne+4]=ee,this.int16[Ne+5]=be,g},d}(Ms);Ch.prototype.bytesPerElement=12,co("StructArrayLayout2i4i12",Ch);var ec=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,ee){var be=this.length;return this.resize(be+1),this.emplace(be,g,A,P,B,j,ee)},d.prototype.emplace=function(g,A,P,B,j,ee,be){var Ne=4*g,$e=8*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.uint8[$e+4]=B,this.uint8[$e+5]=j,this.uint8[$e+6]=ee,this.uint8[$e+7]=be,g},d}(Ms);ec.prototype.bytesPerElement=8,co("StructArrayLayout2i4ub8",ec);var hp=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var B=2*g;return this.float32[B+0]=A,this.float32[B+1]=P,g},d}(Ms);hp.prototype.bytesPerElement=8,co("StructArrayLayout2f8",hp);var wc=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,ee,be,Ne,$e,at){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,g,A,P,B,j,ee,be,Ne,$e,at)},d.prototype.emplace=function(g,A,P,B,j,ee,be,Ne,$e,at,Tt){var Nt=10*g;return this.uint16[Nt+0]=A,this.uint16[Nt+1]=P,this.uint16[Nt+2]=B,this.uint16[Nt+3]=j,this.uint16[Nt+4]=ee,this.uint16[Nt+5]=be,this.uint16[Nt+6]=Ne,this.uint16[Nt+7]=$e,this.uint16[Nt+8]=at,this.uint16[Nt+9]=Tt,g},d}(Ms);wc.prototype.bytesPerElement=20,co("StructArrayLayout10ui20",wc);var jp=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt){var fn=this.length;return this.resize(fn+1),this.emplace(fn,g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt)},d.prototype.emplace=function(g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn){var _n=12*g;return this.int16[_n+0]=A,this.int16[_n+1]=P,this.int16[_n+2]=B,this.int16[_n+3]=j,this.uint16[_n+4]=ee,this.uint16[_n+5]=be,this.uint16[_n+6]=Ne,this.uint16[_n+7]=$e,this.int16[_n+8]=at,this.int16[_n+9]=Tt,this.int16[_n+10]=Nt,this.int16[_n+11]=fn,g},d}(Ms);jp.prototype.bytesPerElement=24,co("StructArrayLayout4i4ui4i24",jp);var Uc=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var B=this.length;return this.resize(B+1),this.emplace(B,g,A,P)},d.prototype.emplace=function(g,A,P,B){var j=3*g;return this.float32[j+0]=A,this.float32[j+1]=P,this.float32[j+2]=B,g},d}(Ms);Uc.prototype.bytesPerElement=12,co("StructArrayLayout3f12",Uc);var Nd=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint32[1*g+0]=A,g},d}(Ms);Nd.prototype.bytesPerElement=4,co("StructArrayLayout1ul4",Nd);var S0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,ee,be,Ne,$e){var at=this.length;return this.resize(at+1),this.emplace(at,g,A,P,B,j,ee,be,Ne,$e)},d.prototype.emplace=function(g,A,P,B,j,ee,be,Ne,$e,at){var Tt=10*g,Nt=5*g;return this.int16[Tt+0]=A,this.int16[Tt+1]=P,this.int16[Tt+2]=B,this.int16[Tt+3]=j,this.int16[Tt+4]=ee,this.int16[Tt+5]=be,this.uint32[Nt+3]=Ne,this.uint16[Tt+8]=$e,this.uint16[Tt+9]=at,g},d}(Ms);S0.prototype.bytesPerElement=20,co("StructArrayLayout6i1ul2ui20",S0);var Rh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,ee){var be=this.length;return this.resize(be+1),this.emplace(be,g,A,P,B,j,ee)},d.prototype.emplace=function(g,A,P,B,j,ee,be){var Ne=6*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.int16[Ne+2]=B,this.int16[Ne+3]=j,this.int16[Ne+4]=ee,this.int16[Ne+5]=be,g},d}(Ms);Rh.prototype.bytesPerElement=12,co("StructArrayLayout2i2i2i12",Rh);var $h=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j){var ee=this.length;return this.resize(ee+1),this.emplace(ee,g,A,P,B,j)},d.prototype.emplace=function(g,A,P,B,j,ee){var be=4*g,Ne=8*g;return this.float32[be+0]=A,this.float32[be+1]=P,this.float32[be+2]=B,this.int16[Ne+6]=j,this.int16[Ne+7]=ee,g},d}(Ms);$h.prototype.bytesPerElement=16,co("StructArrayLayout2f1f2i16",$h);var T0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,B)},d.prototype.emplace=function(g,A,P,B,j){var ee=12*g,be=3*g;return this.uint8[ee+0]=A,this.uint8[ee+1]=P,this.float32[be+1]=B,this.float32[be+2]=j,g},d}(Ms);T0.prototype.bytesPerElement=12,co("StructArrayLayout2ub2f12",T0);var zf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var B=this.length;return this.resize(B+1),this.emplace(B,g,A,P)},d.prototype.emplace=function(g,A,P,B){var j=3*g;return this.uint16[j+0]=A,this.uint16[j+1]=P,this.uint16[j+2]=B,g},d}(Ms);zf.prototype.bytesPerElement=6,co("StructArrayLayout3ui6",zf);var Uf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn,_n,Hn,Ln,cr){var gr=this.length;return this.resize(gr+1),this.emplace(gr,g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn,_n,Hn,Ln,cr)},d.prototype.emplace=function(g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn,_n,Hn,Ln,cr,gr){var Ir=24*g,Nr=12*g,Xr=48*g;return this.int16[Ir+0]=A,this.int16[Ir+1]=P,this.uint16[Ir+2]=B,this.uint16[Ir+3]=j,this.uint32[Nr+2]=ee,this.uint32[Nr+3]=be,this.uint32[Nr+4]=Ne,this.uint16[Ir+10]=$e,this.uint16[Ir+11]=at,this.uint16[Ir+12]=Tt,this.float32[Nr+7]=Nt,this.float32[Nr+8]=fn,this.uint8[Xr+36]=_n,this.uint8[Xr+37]=Hn,this.uint8[Xr+38]=Ln,this.uint32[Nr+10]=cr,this.int16[Ir+22]=gr,g},d}(Ms);Uf.prototype.bytesPerElement=48,co("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Uf);var w0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn,_n,Hn,Ln,cr,gr,Ir,Nr,Xr,Mi,Yi,Lo,fo,Xo,ho,za){var oa=this.length;return this.resize(oa+1),this.emplace(oa,g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn,_n,Hn,Ln,cr,gr,Ir,Nr,Xr,Mi,Yi,Lo,fo,Xo,ho,za)},d.prototype.emplace=function(g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn,_n,Hn,Ln,cr,gr,Ir,Nr,Xr,Mi,Yi,Lo,fo,Xo,ho,za,oa){var Oo=34*g,Xa=17*g;return this.int16[Oo+0]=A,this.int16[Oo+1]=P,this.int16[Oo+2]=B,this.int16[Oo+3]=j,this.int16[Oo+4]=ee,this.int16[Oo+5]=be,this.int16[Oo+6]=Ne,this.int16[Oo+7]=$e,this.uint16[Oo+8]=at,this.uint16[Oo+9]=Tt,this.uint16[Oo+10]=Nt,this.uint16[Oo+11]=fn,this.uint16[Oo+12]=_n,this.uint16[Oo+13]=Hn,this.uint16[Oo+14]=Ln,this.uint16[Oo+15]=cr,this.uint16[Oo+16]=gr,this.uint16[Oo+17]=Ir,this.uint16[Oo+18]=Nr,this.uint16[Oo+19]=Xr,this.uint16[Oo+20]=Mi,this.uint16[Oo+21]=Yi,this.uint16[Oo+22]=Lo,this.uint32[Xa+12]=fo,this.float32[Xa+13]=Xo,this.float32[Xa+14]=ho,this.float32[Xa+15]=za,this.float32[Xa+16]=oa,g},d}(Ms);w0.prototype.bytesPerElement=68,co("StructArrayLayout8i15ui1ul4f68",w0);var rh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.float32[1*g+0]=A,g},d}(Ms);rh.prototype.bytesPerElement=4,co("StructArrayLayout1f4",rh);var Tf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var B=this.length;return this.resize(B+1),this.emplace(B,g,A,P)},d.prototype.emplace=function(g,A,P,B){var j=3*g;return this.int16[j+0]=A,this.int16[j+1]=P,this.int16[j+2]=B,g},d}(Ms);Tf.prototype.bytesPerElement=6,co("StructArrayLayout3i6",Tf);var ov=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var B=this.length;return this.resize(B+1),this.emplace(B,g,A,P)},d.prototype.emplace=function(g,A,P,B){var j=4*g;return this.uint32[2*g+0]=A,this.uint16[j+2]=P,this.uint16[j+3]=B,g},d}(Ms);ov.prototype.bytesPerElement=8,co("StructArrayLayout1ul2ui8",ov);var jf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var B=2*g;return this.uint16[B+0]=A,this.uint16[B+1]=P,g},d}(Ms);jf.prototype.bytesPerElement=4,co("StructArrayLayout2ui4",jf);var Yh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint16[1*g+0]=A,g},d}(Ms);Yh.prototype.bytesPerElement=2,co("StructArrayLayout1ui2",Yh);var A0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,B){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,B)},d.prototype.emplace=function(g,A,P,B,j){var ee=4*g;return this.float32[ee+0]=A,this.float32[ee+1]=P,this.float32[ee+2]=B,this.float32[ee+3]=j,g},d}(Ms);A0.prototype.bytesPerElement=16,co("StructArrayLayout4f16",A0);var _=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return g.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},g.x1.get=function(){return this._structArray.int16[this._pos2+2]},g.y1.get=function(){return this._structArray.int16[this._pos2+3]},g.x2.get=function(){return this._structArray.int16[this._pos2+4]},g.y2.get=function(){return this._structArray.int16[this._pos2+5]},g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.anchorPoint.get=function(){return new ce(this.anchorPointX,this.anchorPointY)},Object.defineProperties(d.prototype,g),d}(Dd);_.prototype.size=20;var S=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new _(this,g)},d}(S0);co("CollisionBoxArray",S);var x=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},g.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},g.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},g.segment.get=function(){return this._structArray.uint16[this._pos2+10]},g.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},g.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},g.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},g.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},g.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},g.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},g.placedOrientation.set=function(A){this._structArray.uint8[this._pos1+37]=A},g.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},g.hidden.set=function(A){this._structArray.uint8[this._pos1+38]=A},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+10]=A},g.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(d.prototype,g),d}(Dd);x.prototype.size=48;var O=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new x(this,g)},d}(Uf);co("PlacedSymbolArray",O);var k=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},g.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},g.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},g.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},g.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},g.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},g.key.get=function(){return this._structArray.uint16[this._pos2+8]},g.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},g.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},g.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},g.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},g.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},g.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},g.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},g.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},g.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},g.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},g.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},g.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},g.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+12]=A},g.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},g.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},g.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},g.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(d.prototype,g),d}(Dd);k.prototype.size=68;var Z=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new k(this,g)},d}(w0);co("SymbolInstanceArray",Z);var J=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getoffsetX=function(g){return this.float32[1*g+0]},d}(rh);co("GlyphOffsetArray",J);var ge=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getx=function(g){return this.int16[3*g+0]},d.prototype.gety=function(g){return this.int16[3*g+1]},d.prototype.gettileUnitDistanceFromAnchor=function(g){return this.int16[3*g+2]},d}(Tf);co("SymbolLineVertexArray",ge);var We=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(d.prototype,g),d}(Dd);We.prototype.size=8;var ht=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new We(this,g)},d}(ov);co("FeatureIndexArray",ht);var Ut=yu([{name:"a_pos",components:2,type:"Int16"}],4).members,Ht=function(u){u===void 0&&(u=[]),this.segments=u};function Xt(u,d){return 256*(u=Re(Math.floor(u),0,255))+Re(Math.floor(d),0,255)}Ht.prototype.prepareSegment=function(u,d,g,A){var P=this.segments[this.segments.length-1];return u>Ht.MAX_VERTEX_ARRAY_LENGTH&&Ze("Max vertices per segment is "+Ht.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+u),(!P||P.vertexLength+u>Ht.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==A)&&(P={vertexOffset:d.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},A!==void 0&&(P.sortKey=A),this.segments.push(P)),P},Ht.prototype.get=function(){return this.segments},Ht.prototype.destroy=function(){for(var u=0,d=this.segments;u<d.length;u+=1){var g=d[u];for(var A in g.vaos)g.vaos[A].destroy()}},Ht.simpleSegment=function(u,d,g,A){return new Ht([{vertexOffset:u,primitiveOffset:d,vertexLength:g,primitiveLength:A,vaos:{},sortKey:0}])},Ht.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,co("SegmentVector",Ht);var bn=yu([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),mn=he(function(u){u.exports=function(d,g){var A,P,B,j,ee,be,Ne,$e;for(P=d.length-(A=3&d.length),B=g,ee=3432918353,be=461845907,$e=0;$e<P;)Ne=255&d.charCodeAt($e)|(255&d.charCodeAt(++$e))<<8|(255&d.charCodeAt(++$e))<<16|(255&d.charCodeAt(++$e))<<24,++$e,B=27492+(65535&(j=5*(65535&(B=(B^=Ne=(65535&(Ne=(Ne=(65535&Ne)*ee+(((Ne>>>16)*ee&65535)<<16)&4294967295)<<15|Ne>>>17))*be+(((Ne>>>16)*be&65535)<<16)&4294967295)<<13|B>>>19))+((5*(B>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(Ne=0,A){case 3:Ne^=(255&d.charCodeAt($e+2))<<16;case 2:Ne^=(255&d.charCodeAt($e+1))<<8;case 1:B^=Ne=(65535&(Ne=(Ne=(65535&(Ne^=255&d.charCodeAt($e)))*ee+(((Ne>>>16)*ee&65535)<<16)&4294967295)<<15|Ne>>>17))*be+(((Ne>>>16)*be&65535)<<16)&4294967295}return B^=d.length,B=2246822507*(65535&(B^=B>>>16))+((2246822507*(B>>>16)&65535)<<16)&4294967295,B=3266489909*(65535&(B^=B>>>13))+((3266489909*(B>>>16)&65535)<<16)&4294967295,(B^=B>>>16)>>>0}}),zn=he(function(u){u.exports=function(d,g){for(var A,P=d.length,B=g^P,j=0;P>=4;)A=1540483477*(65535&(A=255&d.charCodeAt(j)|(255&d.charCodeAt(++j))<<8|(255&d.charCodeAt(++j))<<16|(255&d.charCodeAt(++j))<<24))+((1540483477*(A>>>16)&65535)<<16),B=1540483477*(65535&B)+((1540483477*(B>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),P-=4,++j;switch(P){case 3:B^=(255&d.charCodeAt(j+2))<<16;case 2:B^=(255&d.charCodeAt(j+1))<<8;case 1:B=1540483477*(65535&(B^=255&d.charCodeAt(j)))+((1540483477*(B>>>16)&65535)<<16)}return B=1540483477*(65535&(B^=B>>>13))+((1540483477*(B>>>16)&65535)<<16),(B^=B>>>15)>>>0}}),an=mn,kn=zn;an.murmur3=mn,an.murmur2=kn;var er=function(){this.ids=[],this.positions=[],this.indexed=!1};er.prototype.add=function(u,d,g,A){this.ids.push(Mr(u)),this.positions.push(d,g,A)},er.prototype.getPositions=function(u){for(var d=Mr(u),g=0,A=this.ids.length-1;g<A;){var P=g+A>>1;this.ids[P]>=d?A=P:g=P+1}for(var B=[];this.ids[g]===d;)B.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return B},er.serialize=function(u,d){var g=new Float64Array(u.ids),A=new Uint32Array(u.positions);return function P(B,j,ee,be){for(;ee<be;){for(var Ne=B[ee+be>>1],$e=ee-1,at=be+1;;){do $e++;while(B[$e]<Ne);do at--;while(B[at]>Ne);if($e>=at)break;wr(B,$e,at),wr(j,3*$e,3*at),wr(j,3*$e+1,3*at+1),wr(j,3*$e+2,3*at+2)}at-ee<be-at?(P(B,j,ee,at),ee=at+1):(P(B,j,at+1,be),be=at)}}(g,A,0,g.length-1),d&&d.push(g.buffer,A.buffer),{ids:g,positions:A}},er.deserialize=function(u){var d=new er;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d};var vr=Math.pow(2,53)-1;function Mr(u){var d=+u;return!isNaN(d)&&d<=vr?d:an(String(u))}function wr(u,d,g){var A=u[d];u[d]=u[g],u[g]=A}co("FeaturePositionMap",er);var Fr=function(u,d){this.gl=u.gl,this.location=d},ti=function(u){function d(g,A){u.call(this,g,A),this.current=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))},d}(Fr),Ni=function(u){function d(g,A){u.call(this,g,A),this.current=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1f(this.location,g))},d}(Fr),Pi=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1]))},d}(Fr),lo=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2]))},d}(Fr),zo=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0,0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]&&g[3]===this.current[3]||(this.current=g,this.gl.uniform4f(this.location,g[0],g[1],g[2],g[3]))},d}(Fr),Wo=function(u){function d(g,A){u.call(this,g,A),this.current=yn.transparent}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g.r===this.current.r&&g.g===this.current.g&&g.b===this.current.b&&g.a===this.current.a||(this.current=g,this.gl.uniform4f(this.location,g.r,g.g,g.b,g.a))},d}(Fr),Go=new Float32Array(16),as=function(u){function d(g,A){u.call(this,g,A),this.current=Go}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(var A=1;A<16;A++)if(g[A]!==this.current[A]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}},d}(Fr);function Or(u){return[Xt(255*u.r,255*u.g),Xt(255*u.b,255*u.a)]}var en=function(u,d,g){this.value=u,this.uniformNames=d.map(function(A){return"u_"+A}),this.type=g};en.prototype.setUniform=function(u,d,g){u.set(g.constantOr(this.value))},en.prototype.getBinding=function(u,d,g){return this.type==="color"?new Wo(u,d):new Ni(u,d)};var ha=function(u,d){this.uniformNames=d.map(function(g){return"u_"+g}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ha.prototype.setConstantPatternPositions=function(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr},ha.prototype.setUniform=function(u,d,g,A){var P=A==="u_pattern_to"?this.patternTo:A==="u_pattern_from"?this.patternFrom:A==="u_pixel_ratio_to"?this.pixelRatioTo:A==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&u.set(P)},ha.prototype.getBinding=function(u,d,g){return g.substr(0,9)==="u_pattern"?new zo(u,d):new Ni(u,d)};var aa=function(u,d,g,A){this.expression=u,this.type=g,this.maxValue=0,this.paintVertexAttributes=d.map(function(P){return{name:"a_"+P,type:"Float32",components:g==="color"?2:1,offset:0}}),this.paintVertexArray=new A};aa.prototype.populatePaintArray=function(u,d,g,A,P){var B=this.paintVertexArray.length,j=this.expression.evaluate(new ba(0),d,{},A,[],P);this.paintVertexArray.resize(u),this._setPaintValue(B,u,j)},aa.prototype.updatePaintArray=function(u,d,g,A){var P=this.expression.evaluate({zoom:0},g,A);this._setPaintValue(u,d,P)},aa.prototype._setPaintValue=function(u,d,g){if(this.type==="color")for(var A=Or(g),P=u;P<d;P++)this.paintVertexArray.emplace(P,A[0],A[1]);else{for(var B=u;B<d;B++)this.paintVertexArray.emplace(B,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}},aa.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},aa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Yo=function(u,d,g,A,P,B){this.expression=u,this.uniformNames=d.map(function(j){return"u_"+j+"_t"}),this.type=g,this.useIntegerZoom=A,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=d.map(function(j){return{name:"a_"+j,type:"Float32",components:g==="color"?4:2,offset:0}}),this.paintVertexArray=new B};Yo.prototype.populatePaintArray=function(u,d,g,A,P){var B=this.expression.evaluate(new ba(this.zoom),d,{},A,[],P),j=this.expression.evaluate(new ba(this.zoom+1),d,{},A,[],P),ee=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(ee,u,B,j)},Yo.prototype.updatePaintArray=function(u,d,g,A){var P=this.expression.evaluate({zoom:this.zoom},g,A),B=this.expression.evaluate({zoom:this.zoom+1},g,A);this._setPaintValue(u,d,P,B)},Yo.prototype._setPaintValue=function(u,d,g,A){if(this.type==="color")for(var P=Or(g),B=Or(A),j=u;j<d;j++)this.paintVertexArray.emplace(j,P[0],P[1],B[0],B[1]);else{for(var ee=u;ee<d;ee++)this.paintVertexArray.emplace(ee,g,A);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(A))}},Yo.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Yo.prototype.setUniform=function(u,d){var g=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,A=Re(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);u.set(A)},Yo.prototype.getBinding=function(u,d,g){return new Ni(u,d)};var ga=function(u,d,g,A,P,B){this.expression=u,this.type=d,this.useIntegerZoom=g,this.zoom=A,this.layerId=B,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P};ga.prototype.populatePaintArray=function(u,d,g){var A=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(A,u,d.patterns&&d.patterns[this.layerId],g)},ga.prototype.updatePaintArray=function(u,d,g,A,P){this._setPaintValues(u,d,g.patterns&&g.patterns[this.layerId],P)},ga.prototype._setPaintValues=function(u,d,g,A){if(A&&g){var P=A[g.min],B=A[g.mid],j=A[g.max];if(P&&B&&j)for(var ee=u;ee<d;ee++)this.zoomInPaintVertexArray.emplace(ee,B.tl[0],B.tl[1],B.br[0],B.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],B.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,B.tl[0],B.tl[1],B.br[0],B.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],B.pixelRatio,j.pixelRatio)}},ga.prototype.upload=function(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,bn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,bn.members,this.expression.isStateDependent))},ga.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ra=function(u,d,g){this.binders={},this._buffers=[];var A=[];for(var P in u.paint._values)if(g(P)){var B=u.paint.get(P);if(B instanceof qu&&so(B.property.specification)){var j=uu(P,u.type),ee=B.value,be=B.property.specification.type,Ne=B.property.useIntegerZoom,$e=B.property.specification["property-type"],at=$e==="cross-faded"||$e==="cross-faded-data-driven";if(ee.kind==="constant")this.binders[P]=at?new ha(ee.value,j):new en(ee.value,j,be),A.push("/u_"+P);else if(ee.kind==="source"||at){var Tt=El(P,be,"source");this.binders[P]=at?new ga(ee,be,Ne,d,Tt,u.id):new aa(ee,j,be,Tt),A.push("/a_"+P)}else{var Nt=El(P,be,"composite");this.binders[P]=new Yo(ee,j,be,Ne,d,Nt),A.push("/z_"+P)}}}this.cacheKey=A.sort().join("")};ra.prototype.getMaxValue=function(u){var d=this.binders[u];return d instanceof aa||d instanceof Yo?d.maxValue:0},ra.prototype.populatePaintArrays=function(u,d,g,A,P){for(var B in this.binders){var j=this.binders[B];(j instanceof aa||j instanceof Yo||j instanceof ga)&&j.populatePaintArray(u,d,g,A,P)}},ra.prototype.setConstantPatternPositions=function(u,d){for(var g in this.binders){var A=this.binders[g];A instanceof ha&&A.setConstantPatternPositions(u,d)}},ra.prototype.updatePaintArrays=function(u,d,g,A,P){var B=!1;for(var j in u)for(var ee=0,be=d.getPositions(j);ee<be.length;ee+=1){var Ne=be[ee],$e=g.feature(Ne.index);for(var at in this.binders){var Tt=this.binders[at];if((Tt instanceof aa||Tt instanceof Yo||Tt instanceof ga)&&Tt.expression.isStateDependent===!0){var Nt=A.paint.get(at);Tt.expression=Nt.value,Tt.updatePaintArray(Ne.start,Ne.end,$e,u[j],P),B=!0}}}return B},ra.prototype.defines=function(){var u=[];for(var d in this.binders){var g=this.binders[d];(g instanceof en||g instanceof ha)&&u.push.apply(u,g.uniformNames.map(function(A){return"#define HAS_UNIFORM_"+A}))}return u},ra.prototype.getBinderAttributes=function(){var u=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof aa||g instanceof Yo)for(var A=0;A<g.paintVertexAttributes.length;A++)u.push(g.paintVertexAttributes[A].name);else if(g instanceof ga)for(var P=0;P<bn.members.length;P++)u.push(bn.members[P].name)}return u},ra.prototype.getBinderUniforms=function(){var u=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof en||g instanceof ha||g instanceof Yo)for(var A=0,P=g.uniformNames;A<P.length;A+=1)u.push(P[A])}return u},ra.prototype.getPaintVertexBuffers=function(){return this._buffers},ra.prototype.getUniforms=function(u,d){var g=[];for(var A in this.binders){var P=this.binders[A];if(P instanceof en||P instanceof ha||P instanceof Yo)for(var B=0,j=P.uniformNames;B<j.length;B+=1){var ee=j[B];if(d[ee]){var be=P.getBinding(u,d[ee],ee);g.push({name:ee,property:A,binding:be})}}}return g},ra.prototype.setUniforms=function(u,d,g,A){for(var P=0,B=d;P<B.length;P+=1){var j=B[P],ee=j.name,be=j.property;this.binders[be].setUniform(j.binding,A,g.get(be),ee)}},ra.prototype.updatePaintBuffers=function(u){for(var d in this._buffers=[],this.binders){var g=this.binders[d];if(u&&g instanceof ga){var A=u.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;A&&this._buffers.push(A)}else(g instanceof aa||g instanceof Yo)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}},ra.prototype.upload=function(u){for(var d in this.binders){var g=this.binders[d];(g instanceof aa||g instanceof Yo||g instanceof ga)&&g.upload(u)}this.updatePaintBuffers()},ra.prototype.destroy=function(){for(var u in this.binders){var d=this.binders[u];(d instanceof aa||d instanceof Yo||d instanceof ga)&&d.destroy()}};var Bo=function(u,d,g){g===void 0&&(g=function(){return!0}),this.programConfigurations={};for(var A=0,P=u;A<P.length;A+=1){var B=P[A];this.programConfigurations[B.id]=new ra(B,d,g)}this.needsUpload=!1,this._featureMap=new er,this._bufferOffset=0};function uu(u,d){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(d+"-","").replace(/-/g,"_")]}function El(u,d,g){var A={color:{source:hp,composite:A0},number:{source:rh,composite:hp}},P=function(B){return{"line-pattern":{source:wc,composite:wc},"fill-pattern":{source:wc,composite:wc},"fill-extrusion-pattern":{source:wc,composite:wc}}[B]}(u);return P&&P[g]||A[d][g]}Bo.prototype.populatePaintArrays=function(u,d,g,A,P,B){for(var j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(u,d,A,P,B);d.id!==void 0&&this._featureMap.add(d.id,g,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0},Bo.prototype.updatePaintArrays=function(u,d,g,A){for(var P=0,B=g;P<B.length;P+=1){var j=B[P];this.needsUpload=this.programConfigurations[j.id].updatePaintArrays(u,this._featureMap,d,j,A)||this.needsUpload}},Bo.prototype.get=function(u){return this.programConfigurations[u]},Bo.prototype.upload=function(u){if(this.needsUpload){for(var d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}},Bo.prototype.destroy=function(){for(var u in this.programConfigurations)this.programConfigurations[u].destroy()},co("ConstantBinder",en),co("CrossFadedConstantBinder",ha),co("SourceExpressionBinder",aa),co("CrossFadedCompositeBinder",ga),co("CompositeExpressionBinder",Yo),co("ProgramConfiguration",ra,{omit:["_buffers"]}),co("ProgramConfigurationSet",Bo);var Mu=Math.pow(2,14)-1,cu=-Mu-1;function Es(u){for(var d=8192/u.extent,g=u.loadGeometry(),A=0;A<g.length;A++)for(var P=g[A],B=0;B<P.length;B++){var j=P[B],ee=Math.round(j.x*d),be=Math.round(j.y*d);j.x=Re(ee,cu,Mu),j.y=Re(be,cu,Mu),(ee<j.x||ee>j.x+1||be<j.y||be>j.y+1)&&Ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return g}function _l(u,d){return{type:u.type,id:u.id,properties:u.properties,geometry:d?Es(u):[]}}function pl(u,d,g,A,P){u.emplaceBack(2*d+(A+1)/2,2*g+(P+1)/2)}var vc=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Xh,this.indexArray=new zf,this.segments=new Ht,this.programConfigurations=new Bo(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function Vf(u,d){for(var g=0;g<u.length;g++)if(ih(d,u[g]))return!0;for(var A=0;A<d.length;A++)if(ih(u,d[A]))return!0;return!!dp(u,d)}function Ac(u,d,g){return!!ih(u,d)||!!Mh(d,u,g)}function of(u,d){if(u.length===1)return qh(d,u[0]);for(var g=0;g<d.length;g++)for(var A=d[g],P=0;P<A.length;P++)if(ih(u,A[P]))return!0;for(var B=0;B<u.length;B++)if(qh(d,u[B]))return!0;for(var j=0;j<d.length;j++)if(dp(u,d[j]))return!0;return!1}function jc(u,d,g){if(u.length>1){if(dp(u,d))return!0;for(var A=0;A<d.length;A++)if(Mh(d[A],u,g))return!0}for(var P=0;P<u.length;P++)if(Mh(u[P],d,g))return!0;return!1}function dp(u,d){if(u.length===0||d.length===0)return!1;for(var g=0;g<u.length-1;g++)for(var A=u[g],P=u[g+1],B=0;B<d.length-1;B++)if(pp(A,P,d[B],d[B+1]))return!0;return!1}function pp(u,d,g,A){return ut(u,g,A)!==ut(d,g,A)&&ut(u,d,g)!==ut(u,d,A)}function Mh(u,d,g){var A=g*g;if(d.length===1)return u.distSqr(d[0])<A;for(var P=1;P<d.length;P++)if(Kh(u,d[P-1],d[P])<A)return!0;return!1}function Kh(u,d,g){var A=d.distSqr(g);if(A===0)return u.distSqr(d);var P=((u.x-d.x)*(g.x-d.x)+(u.y-d.y)*(g.y-d.y))/A;return u.distSqr(P<0?d:P>1?g:g.sub(d)._mult(P)._add(d))}function qh(u,d){for(var g,A,P,B=!1,j=0;j<u.length;j++)for(var ee=0,be=(g=u[j]).length-1;ee<g.length;be=ee++)(A=g[ee]).y>d.y!=(P=g[be]).y>d.y&&d.x<(P.x-A.x)*(d.y-A.y)/(P.y-A.y)+A.x&&(B=!B);return B}function ih(u,d){for(var g=!1,A=0,P=u.length-1;A<u.length;P=A++){var B=u[A],j=u[P];B.y>d.y!=j.y>d.y&&d.x<(j.x-B.x)*(d.y-B.y)/(j.y-B.y)+B.x&&(g=!g)}return g}function Ai(u,d,g){var A=g[0],P=g[2];if(u.x<A.x&&d.x<A.x||u.x>P.x&&d.x>P.x||u.y<A.y&&d.y<A.y||u.y>P.y&&d.y>P.y)return!1;var B=ut(u,d,g[0]);return B!==ut(u,d,g[1])||B!==ut(u,d,g[2])||B!==ut(u,d,g[3])}function Il(u,d,g){var A=d.paint.get(u).value;return A.kind==="constant"?A.value:g.programConfigurations.get(d.id).getMaxValue(u)}function Ll(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function tc(u,d,g,A,P){if(!d[0]&&!d[1])return u;var B=ce.convert(d)._mult(P);g==="viewport"&&B._rotate(-A);for(var j=[],ee=0;ee<u.length;ee++)j.push(u[ee].sub(B));return j}vc.prototype.populate=function(u,d,g){var A=this.layers[0],P=[],B=null;A.type==="circle"&&(B=A.layout.get("circle-sort-key"));for(var j=0,ee=u;j<ee.length;j+=1){var be=ee[j],Ne=be.feature,$e=be.id,at=be.index,Tt=be.sourceLayerIndex,Nt=this.layers[0]._featureFilter.needGeometry,fn=_l(Ne,Nt);if(this.layers[0]._featureFilter.filter(new ba(this.zoom),fn,g)){var _n=B?B.evaluate(fn,{},g):void 0,Hn={id:$e,properties:Ne.properties,type:Ne.type,sourceLayerIndex:Tt,index:at,geometry:Nt?fn.geometry:Es(Ne),patterns:{},sortKey:_n};P.push(Hn)}}B&&P.sort(function(Yi,Lo){return Yi.sortKey-Lo.sortKey});for(var Ln=0,cr=P;Ln<cr.length;Ln+=1){var gr=cr[Ln],Ir=gr.geometry,Nr=gr.index,Xr=gr.sourceLayerIndex,Mi=u[Nr].feature;this.addFeature(gr,Ir,Nr,g),d.featureIndex.insert(Mi,Ir,Nr,Xr,this.index)}},vc.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},vc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vc.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ut),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vc.prototype.addFeature=function(u,d,g,A){for(var P=0,B=d;P<B.length;P+=1)for(var j=0,ee=B[P];j<ee.length;j+=1){var be=ee[j],Ne=be.x,$e=be.y;if(!(Ne<0||Ne>=8192||$e<0||$e>=8192)){var at=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),Tt=at.vertexLength;pl(this.layoutVertexArray,Ne,$e,-1,-1),pl(this.layoutVertexArray,Ne,$e,1,-1),pl(this.layoutVertexArray,Ne,$e,1,1),pl(this.layoutVertexArray,Ne,$e,-1,1),this.indexArray.emplaceBack(Tt,Tt+1,Tt+2),this.indexArray.emplaceBack(Tt,Tt+3,Tt+2),at.vertexLength+=4,at.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,{},A)},co("CircleBucket",vc,{omit:["layers"]});var wf=new dl({"circle-sort-key":new So(Et.layout_circle["circle-sort-key"])}),Af={paint:new dl({"circle-radius":new So(Et.paint_circle["circle-radius"]),"circle-color":new So(Et.paint_circle["circle-color"]),"circle-blur":new So(Et.paint_circle["circle-blur"]),"circle-opacity":new So(Et.paint_circle["circle-opacity"]),"circle-translate":new No(Et.paint_circle["circle-translate"]),"circle-translate-anchor":new No(Et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new No(Et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new No(Et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new So(Et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new So(Et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new So(Et.paint_circle["circle-stroke-opacity"])}),layout:wf},Ga=typeof Float32Array!="undefined"?Float32Array:Array;function Hl(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Jl(u,d,g){var A=d[0],P=d[1],B=d[2],j=d[3],ee=d[4],be=d[5],Ne=d[6],$e=d[7],at=d[8],Tt=d[9],Nt=d[10],fn=d[11],_n=d[12],Hn=d[13],Ln=d[14],cr=d[15],gr=g[0],Ir=g[1],Nr=g[2],Xr=g[3];return u[0]=gr*A+Ir*ee+Nr*at+Xr*_n,u[1]=gr*P+Ir*be+Nr*Tt+Xr*Hn,u[2]=gr*B+Ir*Ne+Nr*Nt+Xr*Ln,u[3]=gr*j+Ir*$e+Nr*fn+Xr*cr,u[4]=(gr=g[4])*A+(Ir=g[5])*ee+(Nr=g[6])*at+(Xr=g[7])*_n,u[5]=gr*P+Ir*be+Nr*Tt+Xr*Hn,u[6]=gr*B+Ir*Ne+Nr*Nt+Xr*Ln,u[7]=gr*j+Ir*$e+Nr*fn+Xr*cr,u[8]=(gr=g[8])*A+(Ir=g[9])*ee+(Nr=g[10])*at+(Xr=g[11])*_n,u[9]=gr*P+Ir*be+Nr*Tt+Xr*Hn,u[10]=gr*B+Ir*Ne+Nr*Nt+Xr*Ln,u[11]=gr*j+Ir*$e+Nr*fn+Xr*cr,u[12]=(gr=g[12])*A+(Ir=g[13])*ee+(Nr=g[14])*at+(Xr=g[15])*_n,u[13]=gr*P+Ir*be+Nr*Tt+Xr*Hn,u[14]=gr*B+Ir*Ne+Nr*Nt+Xr*Ln,u[15]=gr*j+Ir*$e+Nr*fn+Xr*cr,u}Math.hypot||(Math.hypot=function(){for(var u=arguments,d=0,g=arguments.length;g--;)d+=u[g]*u[g];return Math.sqrt(d)});var Hf,Vp=Jl;function oh(u,d,g){var A=d[0],P=d[1],B=d[2],j=d[3];return u[0]=g[0]*A+g[4]*P+g[8]*B+g[12]*j,u[1]=g[1]*A+g[5]*P+g[9]*B+g[13]*j,u[2]=g[2]*A+g[6]*P+g[10]*B+g[14]*j,u[3]=g[3]*A+g[7]*P+g[11]*B+g[15]*j,u}Hf=new Ga(3),Ga!=Float32Array&&(Hf[0]=0,Hf[1]=0,Hf[2]=0),function(){var u=new Ga(4);Ga!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0)}();var O0=(function(){var u=new Ga(2);Ga!=Float32Array&&(u[0]=0,u[1]=0)}(),function(u){function d(g){u.call(this,g,Af)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new vc(g)},d.prototype.queryRadius=function(g){var A=g;return Il("circle-radius",this,A)+Il("circle-stroke-width",this,A)+Ll(this.paint.get("circle-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,B,j,ee,be,Ne){for(var $e=tc(g,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ee.angle,be),at=this.paint.get("circle-radius").evaluate(A,P)+this.paint.get("circle-stroke-width").evaluate(A,P),Tt=this.paint.get("circle-pitch-alignment")==="map",Nt=Tt?$e:function(Mi,Yi){return Mi.map(function(Lo){return Bd(Lo,Yi)})}($e,Ne),fn=Tt?at*be:at,_n=0,Hn=B;_n<Hn.length;_n+=1)for(var Ln=0,cr=Hn[_n];Ln<cr.length;Ln+=1){var gr=cr[Ln],Ir=Tt?gr:Bd(gr,Ne),Nr=fn,Xr=oh([],[gr.x,gr.y,0,1],Ne);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Nr*=Xr[3]/ee.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Nr*=ee.cameraToCenterDistance/Xr[3]),Ac(Nt,Ir,Nr))return!0}return!1},d}(Tc));function Bd(u,d){var g=oh([],[u.x,u.y,0,1],d);return new ce(g[0]/g[3],g[1]/g[3])}var Fd=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(vc);function Wf(u,d,g,A){var P=d.width,B=d.height;if(A){if(A instanceof Uint8ClampedArray)A=new Uint8Array(A.buffer);else if(A.length!==P*B*g)throw new RangeError("mismatched image size")}else A=new Uint8Array(P*B*g);return u.width=P,u.height=B,u.data=A,u}function Hp(u,d,g){var A=d.width,P=d.height;if(A!==u.width||P!==u.height){var B=Wf({},{width:A,height:P},g);Vv(u,B,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,A),height:Math.min(u.height,P)},g),u.width=A,u.height=P,u.data=B.data}}function Vv(u,d,g,A,P,B){if(P.width===0||P.height===0)return d;if(P.width>u.width||P.height>u.height||g.x>u.width-P.width||g.y>u.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>d.width||P.height>d.height||A.x>d.width-P.width||A.y>d.height-P.height)throw new RangeError("out of range destination coordinates for image copy");for(var j=u.data,ee=d.data,be=0;be<P.height;be++)for(var Ne=((g.y+be)*u.width+g.x)*B,$e=((A.y+be)*d.width+A.x)*B,at=0;at<P.width*B;at++)ee[$e+at]=j[Ne+at];return d}co("HeatmapBucket",Fd,{omit:["layers"]});var kd=function(u,d){Wf(this,u,1,d)};kd.prototype.resize=function(u){Hp(this,u,1)},kd.prototype.clone=function(){return new kd({width:this.width,height:this.height},new Uint8Array(this.data))},kd.copy=function(u,d,g,A,P){Vv(u,d,g,A,P,1)};var Oc=function(u,d){Wf(this,u,4,d)};Oc.prototype.resize=function(u){Hp(this,u,4)},Oc.prototype.replace=function(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u},Oc.prototype.clone=function(){return new Oc({width:this.width,height:this.height},new Uint8Array(this.data))},Oc.copy=function(u,d,g,A,P){Vv(u,d,g,A,P,4)},co("AlphaImage",kd),co("RGBAImage",Oc);var Xy={paint:new dl({"heatmap-radius":new So(Et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new So(Et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new No(Et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ju(Et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new No(Et.paint_heatmap["heatmap-opacity"])})};function Hv(u){var d={},g=u.resolution||256,A=u.clips?u.clips.length:1,P=u.image||new Oc({width:g,height:A}),B=function(fn,_n,Hn){d[u.evaluationKey]=Hn;var Ln=u.expression.evaluate(d);P.data[fn+_n+0]=Math.floor(255*Ln.r/Ln.a),P.data[fn+_n+1]=Math.floor(255*Ln.g/Ln.a),P.data[fn+_n+2]=Math.floor(255*Ln.b/Ln.a),P.data[fn+_n+3]=Math.floor(255*Ln.a)};if(u.clips)for(var j=0,ee=0;j<A;++j,ee+=4*g)for(var be=0,Ne=0;be<g;be++,Ne+=4){var $e=be/(g-1),at=u.clips[j];B(ee,Ne,at.start*(1-$e)+at.end*$e)}else for(var Tt=0,Nt=0;Tt<g;Tt++,Nt+=4)B(0,Nt,Tt/(g-1));return P}var Wp=function(u){function d(g){u.call(this,g,Xy),this._updateColorRamp()}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new Fd(g)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="heatmap-color"&&this._updateColorRamp()},d.prototype._updateColorRamp=function(){this.colorRamp=Hv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},d.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},d}(Tc),$y={paint:new dl({"hillshade-illumination-direction":new No(Et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new No(Et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new No(Et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new No(Et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new No(Et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new No(Et.paint_hillshade["hillshade-accent-color"])})},Lg=function(u){function d(g){u.call(this,g,$y)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},d}(Tc),Yy=yu([{name:"a_pos",components:2,type:"Int16"}],4).members,Um=av,Wv=av;function av(u,d,g){g=g||2;var A,P,B,j,ee,be,Ne,$e=d&&d.length,at=$e?d[0]*g:u.length,Tt=Ky(u,0,at,g,!0),Nt=[];if(!Tt||Tt.next===Tt.prev)return Nt;if($e&&(Tt=function(_n,Hn,Ln,cr){var gr,Ir,Nr,Xr=[];for(gr=0,Ir=Hn.length;gr<Ir;gr++)(Nr=Ky(_n,Hn[gr]*cr,gr<Ir-1?Hn[gr+1]*cr:_n.length,cr,!1))===Nr.next&&(Nr.steiner=!0),Xr.push(lv(Nr));for(Xr.sort(Zv),gr=0;gr<Xr.length;gr++)Ng(Xr[gr],Ln),Ln=Gp(Ln,Ln.next);return Ln}(u,d,Tt,g)),u.length>80*g){A=B=u[0],P=j=u[1];for(var fn=g;fn<at;fn+=g)(ee=u[fn])<A&&(A=ee),(be=u[fn+1])<P&&(P=be),ee>B&&(B=ee),be>j&&(j=be);Ne=(Ne=Math.max(B-A,j-P))!==0?1/Ne:0}return Zp(Tt,Nt,g,A,P,Ne),Nt}function Ky(u,d,g,A,P){var B,j;if(P===R0(u,d,g,A)>0)for(B=d;B<g;B+=A)j=Jh(B,u[B],u[B+1],j);else for(B=g-A;B>=d;B-=A)j=Jh(B,u[B],u[B+1],j);return j&&Qh(j,j.next)&&(af(j),j=j.next),j}function Gp(u,d){if(!u)return u;d||(d=u);var g,A=u;do if(g=!1,A.steiner||!Qh(A,A.next)&&Sl(A.prev,A,A.next)!==0)A=A.next;else{if(af(A),(A=d=A.prev)===A.next)break;g=!0}while(g||A!==d);return d}function Zp(u,d,g,A,P,B,j){if(u){!j&&B&&function($e,at,Tt,Nt){var fn=$e;do fn.z===null&&(fn.z=C0(fn.x,fn.y,at,Tt,Nt)),fn.prevZ=fn.prev,fn.nextZ=fn.next,fn=fn.next;while(fn!==$e);fn.prevZ.nextZ=null,fn.prevZ=null,function(_n){var Hn,Ln,cr,gr,Ir,Nr,Xr,Mi,Yi=1;do{for(Ln=_n,_n=null,Ir=null,Nr=0;Ln;){for(Nr++,cr=Ln,Xr=0,Hn=0;Hn<Yi&&(Xr++,cr=cr.nextZ);Hn++);for(Mi=Yi;Xr>0||Mi>0&&cr;)Xr!==0&&(Mi===0||!cr||Ln.z<=cr.z)?(gr=Ln,Ln=Ln.nextZ,Xr--):(gr=cr,cr=cr.nextZ,Mi--),Ir?Ir.nextZ=gr:_n=gr,gr.prevZ=Ir,Ir=gr;Ln=cr}Ir.nextZ=null,Yi*=2}while(Nr>1)}(fn)}(u,A,P,B);for(var ee,be,Ne=u;u.prev!==u.next;)if(ee=u.prev,be=u.next,B?Vm(u,A,P,B):jm(u))d.push(ee.i/g),d.push(u.i/g),d.push(be.i/g),af(u),u=be.next,Ne=be.next;else if((u=be)===Ne){j?j===1?Zp(u=Dg(Gp(u),d,g),d,g,A,P,B,2):j===2&&Gv(u,d,g,A,P,B):Zp(Gp(u),d,g,A,P,B,1);break}}}function jm(u){var d=u.prev,g=u,A=u.next;if(Sl(d,g,A)>=0)return!1;for(var P=u.next.next;P!==u.prev;){if(nc(d.x,d.y,g.x,g.y,A.x,A.y,P.x,P.y)&&Sl(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function Vm(u,d,g,A){var P=u.prev,B=u,j=u.next;if(Sl(P,B,j)>=0)return!1;for(var ee=P.x>B.x?P.x>j.x?P.x:j.x:B.x>j.x?B.x:j.x,be=P.y>B.y?P.y>j.y?P.y:j.y:B.y>j.y?B.y:j.y,Ne=C0(P.x<B.x?P.x<j.x?P.x:j.x:B.x<j.x?B.x:j.x,P.y<B.y?P.y<j.y?P.y:j.y:B.y<j.y?B.y:j.y,d,g,A),$e=C0(ee,be,d,g,A),at=u.prevZ,Tt=u.nextZ;at&&at.z>=Ne&&Tt&&Tt.z<=$e;){if(at!==u.prev&&at!==u.next&&nc(P.x,P.y,B.x,B.y,j.x,j.y,at.x,at.y)&&Sl(at.prev,at,at.next)>=0||(at=at.prevZ,Tt!==u.prev&&Tt!==u.next&&nc(P.x,P.y,B.x,B.y,j.x,j.y,Tt.x,Tt.y)&&Sl(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;at&&at.z>=Ne;){if(at!==u.prev&&at!==u.next&&nc(P.x,P.y,B.x,B.y,j.x,j.y,at.x,at.y)&&Sl(at.prev,at,at.next)>=0)return!1;at=at.prevZ}for(;Tt&&Tt.z<=$e;){if(Tt!==u.prev&&Tt!==u.next&&nc(P.x,P.y,B.x,B.y,j.x,j.y,Tt.x,Tt.y)&&Sl(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function Dg(u,d,g){var A=u;do{var P=A.prev,B=A.next.next;!Qh(P,B)&&Hm(P,A,A.next,B)&&zd(P,B)&&zd(B,P)&&(d.push(P.i/g),d.push(A.i/g),d.push(B.i/g),af(A),af(A.next),A=u=B),A=A.next}while(A!==u);return Gp(A)}function Gv(u,d,g,A,P,B){var j=u;do{for(var ee=j.next.next;ee!==j.prev;){if(j.i!==ee.i&&Xp(j,ee)){var be=Kp(j,ee);return j=Gp(j,j.next),be=Gp(be,be.next),Zp(j,d,g,A,P,B),void Zp(be,d,g,A,P,B)}ee=ee.next}j=j.next}while(j!==u)}function Zv(u,d){return u.x-d.x}function Ng(u,d){if(d=function(A,P){var B,j=P,ee=A.x,be=A.y,Ne=-1/0;do{if(be<=j.y&&be>=j.next.y&&j.next.y!==j.y){var $e=j.x+(be-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if($e<=ee&&$e>Ne){if(Ne=$e,$e===ee){if(be===j.y)return j;if(be===j.next.y)return j.next}B=j.x<j.next.x?j:j.next}}j=j.next}while(j!==P);if(!B)return null;if(ee===Ne)return B;var at,Tt=B,Nt=B.x,fn=B.y,_n=1/0;j=B;do ee>=j.x&&j.x>=Nt&&ee!==j.x&&nc(be<fn?ee:Ne,be,Nt,fn,be<fn?Ne:ee,be,j.x,j.y)&&(at=Math.abs(be-j.y)/(ee-j.x),zd(j,A)&&(at<_n||at===_n&&(j.x>B.x||j.x===B.x&&sv(B,j)))&&(B=j,_n=at)),j=j.next;while(j!==Tt);return B}(u,d)){var g=Kp(d,u);Gp(d,d.next),Gp(g,g.next)}}function sv(u,d){return Sl(u.prev,u,d.prev)<0&&Sl(d.next,u,u.next)<0}function C0(u,d,g,A,P){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-g)*P)|u<<8))|u<<4))|u<<2))|u<<1))|(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-A)*P)|d<<8))|d<<4))|d<<2))|d<<1))<<1}function lv(u){var d=u,g=u;do(d.x<g.x||d.x===g.x&&d.y<g.y)&&(g=d),d=d.next;while(d!==u);return g}function nc(u,d,g,A,P,B,j,ee){return(P-j)*(d-ee)-(u-j)*(B-ee)>=0&&(u-j)*(A-ee)-(g-j)*(d-ee)>=0&&(g-j)*(B-ee)-(P-j)*(A-ee)>=0}function Xp(u,d){return u.next.i!==d.i&&u.prev.i!==d.i&&!function(g,A){var P=g;do{if(P.i!==g.i&&P.next.i!==g.i&&P.i!==A.i&&P.next.i!==A.i&&Hm(P,P.next,g,A))return!0;P=P.next}while(P!==g);return!1}(u,d)&&(zd(u,d)&&zd(d,u)&&function(g,A){var P=g,B=!1,j=(g.x+A.x)/2,ee=(g.y+A.y)/2;do P.y>ee!=P.next.y>ee&&P.next.y!==P.y&&j<(P.next.x-P.x)*(ee-P.y)/(P.next.y-P.y)+P.x&&(B=!B),P=P.next;while(P!==g);return B}(u,d)&&(Sl(u.prev,u,d.prev)||Sl(u,d.prev,d))||Qh(u,d)&&Sl(u.prev,u,u.next)>0&&Sl(d.prev,d,d.next)>0)}function Sl(u,d,g){return(d.y-u.y)*(g.x-d.x)-(d.x-u.x)*(g.y-d.y)}function Qh(u,d){return u.x===d.x&&u.y===d.y}function Hm(u,d,g,A){var P=Yp(Sl(u,d,g)),B=Yp(Sl(u,d,A)),j=Yp(Sl(g,A,u)),ee=Yp(Sl(g,A,d));return P!==B&&j!==ee||!(P!==0||!$p(u,g,d))||!(B!==0||!$p(u,A,d))||!(j!==0||!$p(g,u,A))||!(ee!==0||!$p(g,d,A))}function $p(u,d,g){return d.x<=Math.max(u.x,g.x)&&d.x>=Math.min(u.x,g.x)&&d.y<=Math.max(u.y,g.y)&&d.y>=Math.min(u.y,g.y)}function Yp(u){return u>0?1:u<0?-1:0}function zd(u,d){return Sl(u.prev,u,u.next)<0?Sl(u,d,u.next)>=0&&Sl(u,u.prev,d)>=0:Sl(u,d,u.prev)<0||Sl(u,u.next,d)<0}function Kp(u,d){var g=new qp(u.i,u.x,u.y),A=new qp(d.i,d.x,d.y),P=u.next,B=d.prev;return u.next=d,d.prev=u,g.next=P,P.prev=g,A.next=g,g.prev=A,B.next=A,A.prev=B,A}function Jh(u,d,g,A){var P=new qp(u,d,g);return A?(P.next=A.next,P.prev=A,A.next.prev=P,A.next=P):(P.prev=P,P.next=P),P}function af(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function qp(u,d,g){this.i=u,this.x=d,this.y=g,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R0(u,d,g,A){for(var P=0,B=d,j=g-A;B<g;B+=A)P+=(u[j]-u[B])*(u[B+1]+u[j+1]),j=B;return P}function Wm(u,d,g,A,P){(function B(j,ee,be,Ne,$e){for(;Ne>be;){if(Ne-be>600){var at=Ne-be+1,Tt=ee-be+1,Nt=Math.log(at),fn=.5*Math.exp(2*Nt/3),_n=.5*Math.sqrt(Nt*fn*(at-fn)/at)*(Tt-at/2<0?-1:1);B(j,ee,Math.max(be,Math.floor(ee-Tt*fn/at+_n)),Math.min(Ne,Math.floor(ee+(at-Tt)*fn/at+_n)),$e)}var Hn=j[ee],Ln=be,cr=Ne;for(ed(j,be,ee),$e(j[Ne],Hn)>0&&ed(j,be,Ne);Ln<cr;){for(ed(j,Ln,cr),Ln++,cr--;$e(j[Ln],Hn)<0;)Ln++;for(;$e(j[cr],Hn)>0;)cr--}$e(j[be],Hn)===0?ed(j,be,cr):ed(j,++cr,Ne),cr<=ee&&(be=cr+1),ee<=cr&&(Ne=cr-1)}})(u,d,g||0,A||u.length-1,P||Of)}function ed(u,d,g){var A=u[d];u[d]=u[g],u[g]=A}function Of(u,d){return u<d?-1:u>d?1:0}function Ph(u,d){var g=u.length;if(g<=1)return[u];for(var A,P,B=[],j=0;j<g;j++){var ee=Qt(u[j]);ee!==0&&(u[j].area=Math.abs(ee),P===void 0&&(P=ee<0),P===ee<0?(A&&B.push(A),A=[u[j]]):A.push(u[j]))}if(A&&B.push(A),d>1)for(var be=0;be<B.length;be++)B[be].length<=d||(Wm(B[be],d,1,B[be].length-1,Xv),B[be]=B[be].slice(0,d));return B}function Xv(u,d){return d.area-u.area}function $v(u,d,g){for(var A=g.patternDependencies,P=!1,B=0,j=d;B<j.length;B+=1){var ee=j[B].paint.get(u+"-pattern");ee.isConstant()||(P=!0);var be=ee.constantOr(null);be&&(P=!0,A[be.to]=!0,A[be.from]=!0)}return P}function M0(u,d,g,A,P){for(var B=P.patternDependencies,j=0,ee=d;j<ee.length;j+=1){var be=ee[j],Ne=be.paint.get(u+"-pattern").value;if(Ne.kind!=="constant"){var $e=Ne.evaluate({zoom:A-1},g,{},P.availableImages),at=Ne.evaluate({zoom:A},g,{},P.availableImages),Tt=Ne.evaluate({zoom:A+1},g,{},P.availableImages);at=at&&at.name?at.name:at,Tt=Tt&&Tt.name?Tt.name:Tt,B[$e=$e&&$e.name?$e.name:$e]=!0,B[at]=!0,B[Tt]=!0,g.patterns[be.id]={min:$e,mid:at,max:Tt}}}return g}av.deviation=function(u,d,g,A){var P=d&&d.length,B=Math.abs(R0(u,0,P?d[0]*g:u.length,g));if(P)for(var j=0,ee=d.length;j<ee;j++)B-=Math.abs(R0(u,d[j]*g,j<ee-1?d[j+1]*g:u.length,g));var be=0;for(j=0;j<A.length;j+=3){var Ne=A[j]*g,$e=A[j+1]*g,at=A[j+2]*g;be+=Math.abs((u[Ne]-u[at])*(u[$e+1]-u[Ne+1])-(u[Ne]-u[$e])*(u[at+1]-u[Ne+1]))}return B===0&&be===0?0:Math.abs((be-B)/B)},av.flatten=function(u){for(var d=u[0][0].length,g={vertices:[],holes:[],dimensions:d},A=0,P=0;P<u.length;P++){for(var B=0;B<u[P].length;B++)for(var j=0;j<d;j++)g.vertices.push(u[P][B][j]);P>0&&g.holes.push(A+=u[P-1].length)}return g},Um.default=Wv;var Gf=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xh,this.indexArray=new zf,this.indexArray2=new jf,this.programConfigurations=new Bo(u.layers,u.zoom),this.segments=new Ht,this.segments2=new Ht,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};Gf.prototype.populate=function(u,d,g){this.hasPattern=$v("fill",this.layers,d);for(var A=this.layers[0].layout.get("fill-sort-key"),P=[],B=0,j=u;B<j.length;B+=1){var ee=j[B],be=ee.feature,Ne=ee.id,$e=ee.index,at=ee.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Nt=_l(be,Tt);if(this.layers[0]._featureFilter.filter(new ba(this.zoom),Nt,g)){var fn=A?A.evaluate(Nt,{},g,d.availableImages):void 0,_n={id:Ne,properties:be.properties,type:be.type,sourceLayerIndex:at,index:$e,geometry:Tt?Nt.geometry:Es(be),patterns:{},sortKey:fn};P.push(_n)}}A&&P.sort(function(Mi,Yi){return Mi.sortKey-Yi.sortKey});for(var Hn=0,Ln=P;Hn<Ln.length;Hn+=1){var cr=Ln[Hn],gr=cr.geometry,Ir=cr.index,Nr=cr.sourceLayerIndex;if(this.hasPattern){var Xr=M0("fill",this.layers,cr,this.zoom,d);this.patternFeatures.push(Xr)}else this.addFeature(cr,gr,Ir,g,{});d.featureIndex.insert(u[Ir].feature,gr,Ir,Nr,this.index)}},Gf.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},Gf.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var B=P[A];this.addFeature(B,B.geometry,B.index,d,g)}},Gf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gf.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Yy),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0},Gf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Gf.prototype.addFeature=function(u,d,g,A,P){for(var B=0,j=Ph(d,500);B<j.length;B+=1){for(var ee=j[B],be=0,Ne=0,$e=ee;Ne<$e.length;Ne+=1)be+=$e[Ne].length;for(var at=this.segments.prepareSegment(be,this.layoutVertexArray,this.indexArray),Tt=at.vertexLength,Nt=[],fn=[],_n=0,Hn=ee;_n<Hn.length;_n+=1){var Ln=Hn[_n];if(Ln.length!==0){Ln!==ee[0]&&fn.push(Nt.length/2);var cr=this.segments2.prepareSegment(Ln.length,this.layoutVertexArray,this.indexArray2),gr=cr.vertexLength;this.layoutVertexArray.emplaceBack(Ln[0].x,Ln[0].y),this.indexArray2.emplaceBack(gr+Ln.length-1,gr),Nt.push(Ln[0].x),Nt.push(Ln[0].y);for(var Ir=1;Ir<Ln.length;Ir++)this.layoutVertexArray.emplaceBack(Ln[Ir].x,Ln[Ir].y),this.indexArray2.emplaceBack(gr+Ir-1,gr+Ir),Nt.push(Ln[Ir].x),Nt.push(Ln[Ir].y);cr.vertexLength+=Ln.length,cr.primitiveLength+=Ln.length}}for(var Nr=Um(Nt,fn),Xr=0;Xr<Nr.length;Xr+=3)this.indexArray.emplaceBack(Tt+Nr[Xr],Tt+Nr[Xr+1],Tt+Nr[Xr+2]);at.vertexLength+=be,at.primitiveLength+=Nr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},co("FillBucket",Gf,{omit:["layers","patternFeatures"]});var Ud=new dl({"fill-sort-key":new So(Et.layout_fill["fill-sort-key"])}),qy={paint:new dl({"fill-antialias":new No(Et.paint_fill["fill-antialias"]),"fill-opacity":new So(Et.paint_fill["fill-opacity"]),"fill-color":new So(Et.paint_fill["fill-color"]),"fill-outline-color":new So(Et.paint_fill["fill-outline-color"]),"fill-translate":new No(Et.paint_fill["fill-translate"]),"fill-translate-anchor":new No(Et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ql(Et.paint_fill["fill-pattern"])}),layout:Ud},Qy=function(u){function d(g){u.call(this,g,qy)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.recalculate=function(g,A){u.prototype.recalculate.call(this,g,A);var P=this.paint._values["fill-outline-color"];P.value.kind==="constant"&&P.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},d.prototype.createBucket=function(g){return new Gf(g)},d.prototype.queryRadius=function(){return Ll(this.paint.get("fill-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,B,j,ee,be){return of(tc(g,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ee.angle,be),B)},d.prototype.isTileClipped=function(){return!0},d}(Tc),Yv=yu([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Bg=td;function td(u,d,g,A,P){this.properties={},this.extent=g,this.type=0,this._pbf=u,this._geometry=-1,this._keys=A,this._values=P,u.readFields(Jy,this,d)}function Jy(u,d,g){u==1?d.id=g.readVarint():u==2?function(A,P){for(var B=A.readVarint()+A.pos;A.pos<B;){var j=P._keys[A.readVarint()],ee=P._values[A.readVarint()];P.properties[j]=ee}}(g,d):u==3?d.type=g.readVarint():u==4&&(d._geometry=g.pos)}function ah(u){for(var d,g,A=0,P=0,B=u.length,j=B-1;P<B;j=P++)A+=((g=u[j]).x-(d=u[P]).x)*(d.y+g.y);return A}td.types=["Unknown","Point","LineString","Polygon"],td.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var d,g=u.readVarint()+u.pos,A=1,P=0,B=0,j=0,ee=[];u.pos<g;){if(P<=0){var be=u.readVarint();A=7&be,P=be>>3}if(P--,A===1||A===2)B+=u.readSVarint(),j+=u.readSVarint(),A===1&&(d&&ee.push(d),d=[]),d.push(new ce(B,j));else{if(A!==7)throw new Error("unknown command "+A);d&&d.push(d[0].clone())}}return d&&ee.push(d),ee},td.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var d=u.readVarint()+u.pos,g=1,A=0,P=0,B=0,j=1/0,ee=-1/0,be=1/0,Ne=-1/0;u.pos<d;){if(A<=0){var $e=u.readVarint();g=7&$e,A=$e>>3}if(A--,g===1||g===2)(P+=u.readSVarint())<j&&(j=P),P>ee&&(ee=P),(B+=u.readSVarint())<be&&(be=B),B>Ne&&(Ne=B);else if(g!==7)throw new Error("unknown command "+g)}return[j,be,ee,Ne]},td.prototype.toGeoJSON=function(u,d,g){var A,P,B=this.extent*Math.pow(2,g),j=this.extent*u,ee=this.extent*d,be=this.loadGeometry(),Ne=td.types[this.type];function $e(Nt){for(var fn=0;fn<Nt.length;fn++){var _n=Nt[fn];Nt[fn]=[360*(_n.x+j)/B-180,360/Math.PI*Math.atan(Math.exp((180-360*(_n.y+ee)/B)*Math.PI/180))-90]}}switch(this.type){case 1:var at=[];for(A=0;A<be.length;A++)at[A]=be[A][0];$e(be=at);break;case 2:for(A=0;A<be.length;A++)$e(be[A]);break;case 3:for(be=function(Nt){var fn=Nt.length;if(fn<=1)return[Nt];for(var _n,Hn,Ln=[],cr=0;cr<fn;cr++){var gr=ah(Nt[cr]);gr!==0&&(Hn===void 0&&(Hn=gr<0),Hn===gr<0?(_n&&Ln.push(_n),_n=[Nt[cr]]):_n.push(Nt[cr]))}return _n&&Ln.push(_n),Ln}(be),A=0;A<be.length;A++)for(P=0;P<be[A].length;P++)$e(be[A][P])}be.length===1?be=be[0]:Ne="Multi"+Ne;var Tt={type:"Feature",geometry:{type:Ne,coordinates:be},properties:this.properties};return"id"in this&&(Tt.id=this.id),Tt};var uv=Qp;function Qp(u,d){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(vp,this,d),this.length=this._features.length}function vp(u,d,g){u===15?d.version=g.readVarint():u===1?d.name=g.readString():u===5?d.extent=g.readVarint():u===2?d._features.push(g.pos):u===3?d._keys.push(g.readString()):u===4&&d._values.push(function(A){for(var P=null,B=A.readVarint()+A.pos;A.pos<B;){var j=A.readVarint()>>3;P=j===1?A.readString():j===2?A.readFloat():j===3?A.readDouble():j===4?A.readVarint64():j===5?A.readVarint():j===6?A.readSVarint():j===7?A.readBoolean():null}return P}(g))}function Fg(u,d,g){if(u===3){var A=new uv(g,g.readVarint()+g.pos);A.length&&(d[A.name]=A)}}Qp.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var d=this._pbf.readVarint()+this._pbf.pos;return new Bg(this._pbf,d,this.extent,this._keys,this._values)};var mp={VectorTile:function(u,d){this.layers=u.readFields(Fg,{},d)},VectorTileFeature:Bg,VectorTileLayer:uv},Kv=mp.VectorTileFeature.types,P0=Math.pow(2,13);function Cc(u,d,g,A,P,B,j,ee){u.emplaceBack(d,g,2*Math.floor(A*P0)+j,P*P0*2,B*P0*2,Math.round(ee))}var mc=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Ch,this.indexArray=new zf,this.programConfigurations=new Bo(u.layers,u.zoom),this.segments=new Ht,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function _u(u,d){return u.x===d.x&&(u.x<0||u.x>8192)||u.y===d.y&&(u.y<0||u.y>8192)}mc.prototype.populate=function(u,d,g){this.features=[],this.hasPattern=$v("fill-extrusion",this.layers,d);for(var A=0,P=u;A<P.length;A+=1){var B=P[A],j=B.feature,ee=B.id,be=B.index,Ne=B.sourceLayerIndex,$e=this.layers[0]._featureFilter.needGeometry,at=_l(j,$e);if(this.layers[0]._featureFilter.filter(new ba(this.zoom),at,g)){var Tt={id:ee,sourceLayerIndex:Ne,index:be,geometry:$e?at.geometry:Es(j),properties:j.properties,type:j.type,patterns:{}};this.hasPattern?this.features.push(M0("fill-extrusion",this.layers,Tt,this.zoom,d)):this.addFeature(Tt,Tt.geometry,be,g,{}),d.featureIndex.insert(j,Tt.geometry,be,Ne,this.index,!0)}}},mc.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.features;A<P.length;A+=1){var B=P[A];this.addFeature(B,B.geometry,B.index,d,g)}},mc.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},mc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mc.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Yv),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},mc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mc.prototype.addFeature=function(u,d,g,A,P){for(var B=0,j=Ph(d,500);B<j.length;B+=1){for(var ee=j[B],be=0,Ne=0,$e=ee;Ne<$e.length;Ne+=1)be+=$e[Ne].length;for(var at=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Tt=0,Nt=ee;Tt<Nt.length;Tt+=1){var fn=Nt[Tt];if(fn.length!==0&&!((Xa=fn).every(function(jo){return jo.x<0})||Xa.every(function(jo){return jo.x>8192})||Xa.every(function(jo){return jo.y<0})||Xa.every(function(jo){return jo.y>8192})))for(var _n=0,Hn=0;Hn<fn.length;Hn++){var Ln=fn[Hn];if(Hn>=1){var cr=fn[Hn-1];if(!_u(Ln,cr)){at.vertexLength+4>Ht.MAX_VERTEX_ARRAY_LENGTH&&(at=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var gr=Ln.sub(cr)._perp()._unit(),Ir=cr.dist(Ln);_n+Ir>32768&&(_n=0),Cc(this.layoutVertexArray,Ln.x,Ln.y,gr.x,gr.y,0,0,_n),Cc(this.layoutVertexArray,Ln.x,Ln.y,gr.x,gr.y,0,1,_n),Cc(this.layoutVertexArray,cr.x,cr.y,gr.x,gr.y,0,0,_n+=Ir),Cc(this.layoutVertexArray,cr.x,cr.y,gr.x,gr.y,0,1,_n);var Nr=at.vertexLength;this.indexArray.emplaceBack(Nr,Nr+2,Nr+1),this.indexArray.emplaceBack(Nr+1,Nr+2,Nr+3),at.vertexLength+=4,at.primitiveLength+=2}}}}if(at.vertexLength+be>Ht.MAX_VERTEX_ARRAY_LENGTH&&(at=this.segments.prepareSegment(be,this.layoutVertexArray,this.indexArray)),Kv[u.type]==="Polygon"){for(var Xr=[],Mi=[],Yi=at.vertexLength,Lo=0,fo=ee;Lo<fo.length;Lo+=1){var Xo=fo[Lo];if(Xo.length!==0){Xo!==ee[0]&&Mi.push(Xr.length/2);for(var ho=0;ho<Xo.length;ho++){var za=Xo[ho];Cc(this.layoutVertexArray,za.x,za.y,0,0,1,1,0),Xr.push(za.x),Xr.push(za.y)}}}for(var oa=Um(Xr,Mi),Oo=0;Oo<oa.length;Oo+=3)this.indexArray.emplaceBack(Yi+oa[Oo],Yi+oa[Oo+2],Yi+oa[Oo+1]);at.primitiveLength+=oa.length/3,at.vertexLength+=be}}var Xa;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},co("FillExtrusionBucket",mc,{omit:["layers","features"]});var sf={paint:new dl({"fill-extrusion-opacity":new No(Et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new So(Et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new No(Et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new No(Et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ql(Et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new So(Et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new So(Et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new No(Et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Rc=function(u){function d(g){u.call(this,g,sf)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new mc(g)},d.prototype.queryRadius=function(){return Ll(this.paint.get("fill-extrusion-translate"))},d.prototype.is3D=function(){return!0},d.prototype.queryIntersectsFeature=function(g,A,P,B,j,ee,be,Ne){var $e=tc(g,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ee.angle,be),at=this.paint.get("fill-extrusion-height").evaluate(A,P),Tt=this.paint.get("fill-extrusion-base").evaluate(A,P),Nt=function(_n,Hn,Ln,cr){for(var gr=[],Ir=0,Nr=_n;Ir<Nr.length;Ir+=1){var Xr=Nr[Ir],Mi=[Xr.x,Xr.y,0,1];oh(Mi,Mi,Hn),gr.push(new ce(Mi[0]/Mi[3],Mi[1]/Mi[3]))}return gr}($e,Ne),fn=function(_n,Hn,Ln,cr){for(var gr=[],Ir=[],Nr=cr[8]*Hn,Xr=cr[9]*Hn,Mi=cr[10]*Hn,Yi=cr[11]*Hn,Lo=cr[8]*Ln,fo=cr[9]*Ln,Xo=cr[10]*Ln,ho=cr[11]*Ln,za=0,oa=_n;za<oa.length;za+=1){for(var Oo=[],Xa=[],jo=0,Ya=oa[za];jo<Ya.length;jo+=1){var Vo=Ya[jo],Is=Vo.x,rl=Vo.y,Zl=cr[0]*Is+cr[4]*rl+cr[12],Nl=cr[1]*Is+cr[5]*rl+cr[13],Al=cr[2]*Is+cr[6]*rl+cr[14],nu=cr[3]*Is+cr[7]*rl+cr[15],hu=Al+Mi,bu=nu+Yi,Vc=Zl+Lo,Iu=Nl+fo,Hc=Al+Xo,Xl=nu+ho,ac=new ce((Zl+Nr)/bu,(Nl+Xr)/bu);ac.z=hu/bu,Oo.push(ac);var Ka=new ce(Vc/Xl,Iu/Xl);Ka.z=Hc/Xl,Xa.push(Ka)}gr.push(Oo),Ir.push(Xa)}return[gr,Ir]}(B,Tt,at,Ne);return function(_n,Hn,Ln){var cr=1/0;of(Ln,Hn)&&(cr=I0(Ln,Hn[0]));for(var gr=0;gr<Hn.length;gr++)for(var Ir=Hn[gr],Nr=_n[gr],Xr=0;Xr<Ir.length-1;Xr++){var Mi=Ir[Xr],Yi=[Mi,Ir[Xr+1],Nr[Xr+1],Nr[Xr],Mi];Vf(Ln,Yi)&&(cr=Math.min(cr,I0(Ln,Yi)))}return cr!==1/0&&cr}(fn[0],fn[1],Nt)},d}(Tc);function Ys(u,d){return u.x*d.x+u.y*d.y}function I0(u,d){if(u.length===1){for(var g,A=0,P=d[A++];!g||P.equals(g);)if(!(g=d[A++]))return 1/0;for(;A<d.length;A++){var B=d[A],j=u[0],ee=g.sub(P),be=B.sub(P),Ne=j.sub(P),$e=Ys(ee,ee),at=Ys(ee,be),Tt=Ys(be,be),Nt=Ys(Ne,ee),fn=Ys(Ne,be),_n=$e*Tt-at*at,Hn=(Tt*Nt-at*fn)/_n,Ln=($e*fn-at*Nt)/_n,cr=P.z*(1-Hn-Ln)+g.z*Hn+B.z*Ln;if(isFinite(cr))return cr}return 1/0}for(var gr=1/0,Ir=0,Nr=d;Ir<Nr.length;Ir+=1)gr=Math.min(gr,Nr[Ir].z);return gr}var kg=yu([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,e_=yu([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,cv=mp.VectorTileFeature.types,Gm=Math.cos(Math.PI/180*37.5),qv=Math.pow(2,14)/.5,Mc=function(u){var d=this;this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(g){return g.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(g){d.gradients[g.id]={}}),this.layoutVertexArray=new ec,this.layoutVertexArray2=new hp,this.indexArray=new zf,this.programConfigurations=new Bo(u.layers,u.zoom),this.segments=new Ht,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(g){return g.isStateDependent()}).map(function(g){return g.id})};Mc.prototype.populate=function(u,d,g){this.hasPattern=$v("line",this.layers,d);for(var A=this.layers[0].layout.get("line-sort-key"),P=[],B=0,j=u;B<j.length;B+=1){var ee=j[B],be=ee.feature,Ne=ee.id,$e=ee.index,at=ee.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Nt=_l(be,Tt);if(this.layers[0]._featureFilter.filter(new ba(this.zoom),Nt,g)){var fn=A?A.evaluate(Nt,{},g):void 0,_n={id:Ne,properties:be.properties,type:be.type,sourceLayerIndex:at,index:$e,geometry:Tt?Nt.geometry:Es(be),patterns:{},sortKey:fn};P.push(_n)}}A&&P.sort(function(Mi,Yi){return Mi.sortKey-Yi.sortKey});for(var Hn=0,Ln=P;Hn<Ln.length;Hn+=1){var cr=Ln[Hn],gr=cr.geometry,Ir=cr.index,Nr=cr.sourceLayerIndex;if(this.hasPattern){var Xr=M0("line",this.layers,cr,this.zoom,d);this.patternFeatures.push(Xr)}else this.addFeature(cr,gr,Ir,g,{});d.featureIndex.insert(u[Ir].feature,gr,Ir,Nr,this.index)}},Mc.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},Mc.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var B=P[A];this.addFeature(B,B.geometry,B.index,d,g)}},Mc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Mc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mc.prototype.upload=function(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,e_)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,kg),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},Mc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Mc.prototype.lineFeatureClips=function(u){if(u.properties&&u.properties.hasOwnProperty("mapbox_clip_start")&&u.properties.hasOwnProperty("mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}},Mc.prototype.addFeature=function(u,d,g,A,P){var B=this.layers[0].layout,j=B.get("line-join").evaluate(u,{}),ee=B.get("line-cap"),be=B.get("line-miter-limit"),Ne=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(var $e=0,at=d;$e<at.length;$e+=1)this.addLine(at[$e],u,j,ee,be,Ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},Mc.prototype.addLine=function(u,d,g,A,P,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var j=0;j<u.length-1;j++)this.totalDistance+=u[j].dist(u[j+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ee=cv[d.type]==="Polygon",be=u.length;be>=2&&u[be-1].equals(u[be-2]);)be--;for(var Ne=0;Ne<be-1&&u[Ne].equals(u[Ne+1]);)Ne++;if(!(be<(ee?3:2))){g==="bevel"&&(P=1.05);var $e,at=this.overscaling<=16?122880/(512*this.overscaling):0,Tt=this.segments.prepareSegment(10*be,this.layoutVertexArray,this.indexArray),Nt=void 0,fn=void 0,_n=void 0,Hn=void 0;this.e1=this.e2=-1,ee&&(Hn=u[Ne].sub($e=u[be-2])._unit()._perp());for(var Ln=Ne;Ln<be;Ln++)if(!(fn=Ln===be-1?ee?u[Ne+1]:void 0:u[Ln+1])||!u[Ln].equals(fn)){Hn&&(_n=Hn),$e&&(Nt=$e),$e=u[Ln],Hn=fn?fn.sub($e)._unit()._perp():_n;var cr=(_n=_n||Hn).add(Hn);cr.x===0&&cr.y===0||cr._unit();var gr=_n.x*Hn.x+_n.y*Hn.y,Ir=cr.x*Hn.x+cr.y*Hn.y,Nr=Ir!==0?1/Ir:1/0,Xr=2*Math.sqrt(2-2*Ir),Mi=Ir<Gm&&Nt&&fn,Yi=_n.x*Hn.y-_n.y*Hn.x>0;if(Mi&&Ln>Ne){var Lo=$e.dist(Nt);if(Lo>2*at){var fo=$e.sub($e.sub(Nt)._mult(at/Lo)._round());this.updateDistance(Nt,fo),this.addCurrentVertex(fo,_n,0,0,Tt),Nt=fo}}var Xo=Nt&&fn,ho=Xo?g:ee?"butt":A;if(Xo&&ho==="round"&&(Nr<B?ho="miter":Nr<=2&&(ho="fakeround")),ho==="miter"&&Nr>P&&(ho="bevel"),ho==="bevel"&&(Nr>2&&(ho="flipbevel"),Nr<P&&(ho="miter")),Nt&&this.updateDistance(Nt,$e),ho==="miter")cr._mult(Nr),this.addCurrentVertex($e,cr,0,0,Tt);else if(ho==="flipbevel"){if(Nr>100)cr=Hn.mult(-1);else{var za=Nr*_n.add(Hn).mag()/_n.sub(Hn).mag();cr._perp()._mult(za*(Yi?-1:1))}this.addCurrentVertex($e,cr,0,0,Tt),this.addCurrentVertex($e,cr.mult(-1),0,0,Tt)}else if(ho==="bevel"||ho==="fakeround"){var oa=-Math.sqrt(Nr*Nr-1),Oo=Yi?oa:0,Xa=Yi?0:oa;if(Nt&&this.addCurrentVertex($e,_n,Oo,Xa,Tt),ho==="fakeround")for(var jo=Math.round(180*Xr/Math.PI/20),Ya=1;Ya<jo;Ya++){var Vo=Ya/jo;if(Vo!==.5){var Is=Vo-.5;Vo+=Vo*Is*(Vo-1)*((1.0904+gr*(gr*(3.55645-1.43519*gr)-3.2452))*Is*Is+(.848013+gr*(.215638*gr-1.06021)))}var rl=Hn.sub(_n)._mult(Vo)._add(_n)._unit()._mult(Yi?-1:1);this.addHalfVertex($e,rl.x,rl.y,!1,Yi,0,Tt)}fn&&this.addCurrentVertex($e,Hn,-Oo,-Xa,Tt)}else if(ho==="butt")this.addCurrentVertex($e,cr,0,0,Tt);else if(ho==="square"){var Zl=Nt?1:-1;this.addCurrentVertex($e,cr,Zl,Zl,Tt)}else ho==="round"&&(Nt&&(this.addCurrentVertex($e,_n,0,0,Tt),this.addCurrentVertex($e,_n,1,1,Tt,!0)),fn&&(this.addCurrentVertex($e,Hn,-1,-1,Tt,!0),this.addCurrentVertex($e,Hn,0,0,Tt)));if(Mi&&Ln<be-1){var Nl=$e.dist(fn);if(Nl>2*at){var Al=$e.add(fn.sub($e)._mult(at/Nl)._round());this.updateDistance($e,Al),this.addCurrentVertex(Al,Hn,0,0,Tt),$e=Al}}}}},Mc.prototype.addCurrentVertex=function(u,d,g,A,P,B){B===void 0&&(B=!1);var j=d.y*A-d.x,ee=-d.y-d.x*A;this.addHalfVertex(u,d.x+d.y*g,d.y-d.x*g,B,!1,g,P),this.addHalfVertex(u,j,ee,B,!0,-A,P),this.distance>qv/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(u,d,g,A,P,B))},Mc.prototype.addHalfVertex=function(u,d,g,A,P,B,j){var ee=.5*(this.lineClips?this.scaledDistance*(qv-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u.x<<1)+(A?1:0),(u.y<<1)+(P?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(B===0?0:B<0?-1:1)|(63&ee)<<2,ee>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var be=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,be),j.primitiveLength++),P?this.e2=be:this.e1=be},Mc.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Mc.prototype.updateDistance=function(u,d){this.distance+=u.dist(d),this.updateScaledDistance()},co("LineBucket",Mc,{omit:["layers","patternFeatures"]});var Qv=new dl({"line-cap":new No(Et.layout_line["line-cap"]),"line-join":new So(Et.layout_line["line-join"]),"line-miter-limit":new No(Et.layout_line["line-miter-limit"]),"line-round-limit":new No(Et.layout_line["line-round-limit"]),"line-sort-key":new So(Et.layout_line["line-sort-key"])}),gp={paint:new dl({"line-opacity":new So(Et.paint_line["line-opacity"]),"line-color":new So(Et.paint_line["line-color"]),"line-translate":new No(Et.paint_line["line-translate"]),"line-translate-anchor":new No(Et.paint_line["line-translate-anchor"]),"line-width":new So(Et.paint_line["line-width"]),"line-gap-width":new So(Et.paint_line["line-gap-width"]),"line-offset":new So(Et.paint_line["line-offset"]),"line-blur":new So(Et.paint_line["line-blur"]),"line-dasharray":new Qu(Et.paint_line["line-dasharray"]),"line-pattern":new Ql(Et.paint_line["line-pattern"]),"line-gradient":new Ju(Et.paint_line["line-gradient"])}),layout:Qv},Zm=new(function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A){return A=new ba(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),u.prototype.possiblyEvaluate.call(this,g,A)},d.prototype.evaluate=function(g,A,P,B){return A=le({},A,{zoom:Math.floor(A.zoom)}),u.prototype.evaluate.call(this,g,A,P,B)},d}(So))(gp.paint.properties["line-width"].specification);Zm.useIntegerZoom=!0;var fv=function(u){function d(g){u.call(this,g,gp),this.gradientVersion=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof vu,this.gradientVersion=(this.gradientVersion+1)%Ve)},d.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},d.prototype.recalculate=function(g,A){u.prototype.recalculate.call(this,g,A),this.paint._values["line-floorwidth"]=Zm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,g)},d.prototype.createBucket=function(g){return new Mc(g)},d.prototype.queryRadius=function(g){var A=g,P=yp(Il("line-width",this,A),Il("line-gap-width",this,A)),B=Il("line-offset",this,A);return P/2+Math.abs(B)+Ll(this.paint.get("line-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,B,j,ee,be){var Ne=tc(g,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ee.angle,be),$e=be/2*yp(this.paint.get("line-width").evaluate(A,P),this.paint.get("line-gap-width").evaluate(A,P)),at=this.paint.get("line-offset").evaluate(A,P);return at&&(B=function(Tt,Nt){for(var fn=[],_n=new ce(0,0),Hn=0;Hn<Tt.length;Hn++){for(var Ln=Tt[Hn],cr=[],gr=0;gr<Ln.length;gr++){var Ir=Ln[gr],Nr=Ln[gr+1],Xr=gr===0?_n:Ir.sub(Ln[gr-1])._unit()._perp(),Mi=gr===Ln.length-1?_n:Nr.sub(Ir)._unit()._perp(),Yi=Xr._add(Mi)._unit();Yi._mult(1/(Yi.x*Mi.x+Yi.y*Mi.y)),cr.push(Yi._mult(Nt)._add(Ir))}fn.push(cr)}return fn}(B,at*be)),function(Tt,Nt,fn){for(var _n=0;_n<Nt.length;_n++){var Hn=Nt[_n];if(Tt.length>=3){for(var Ln=0;Ln<Hn.length;Ln++)if(ih(Tt,Hn[Ln]))return!0}if(jc(Tt,Hn,fn))return!0}return!1}(Ne,B,$e)},d.prototype.isTileClipped=function(){return!0},d}(Tc);function yp(u,d){return d>0?d+2*u:u}var Xm=yu([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),t_=yu([{name:"a_projected_pos",components:3,type:"Float32"}],4),Jv=(yu([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),yu([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),zg=(yu([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),yu([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),He=yu([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qt(u,d,g){return u.sections.forEach(function(A){A.text=function(P,B,j){var ee=B.layout.get("text-transform").evaluate(j,{});return ee==="uppercase"?P=P.toLocaleUpperCase():ee==="lowercase"&&(P=P.toLocaleLowerCase()),zc.applyArabicShaping&&(P=zc.applyArabicShaping(P)),P}(A.text,d,g)}),u}yu([{name:"triangle",components:3,type:"Uint16"}]),yu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),yu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),yu([{type:"Float32",name:"offsetX"}]),yu([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Rn={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Ar=function(u,d,g,A,P){var B,j,ee=8*P-A-1,be=(1<<ee)-1,Ne=be>>1,$e=-7,at=g?P-1:0,Tt=g?-1:1,Nt=u[d+at];for(at+=Tt,B=Nt&(1<<-$e)-1,Nt>>=-$e,$e+=ee;$e>0;B=256*B+u[d+at],at+=Tt,$e-=8);for(j=B&(1<<-$e)-1,B>>=-$e,$e+=A;$e>0;j=256*j+u[d+at],at+=Tt,$e-=8);if(B===0)B=1-Ne;else{if(B===be)return j?NaN:1/0*(Nt?-1:1);j+=Math.pow(2,A),B-=Ne}return(Nt?-1:1)*j*Math.pow(2,B-A)},$r=function(u,d,g,A,P,B){var j,ee,be,Ne=8*B-P-1,$e=(1<<Ne)-1,at=$e>>1,Tt=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,Nt=A?0:B-1,fn=A?1:-1,_n=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(ee=isNaN(d)?1:0,j=$e):(j=Math.floor(Math.log(d)/Math.LN2),d*(be=Math.pow(2,-j))<1&&(j--,be*=2),(d+=j+at>=1?Tt/be:Tt*Math.pow(2,1-at))*be>=2&&(j++,be/=2),j+at>=$e?(ee=0,j=$e):j+at>=1?(ee=(d*be-1)*Math.pow(2,P),j+=at):(ee=d*Math.pow(2,at-1)*Math.pow(2,P),j=0));P>=8;u[g+Nt]=255&ee,Nt+=fn,ee/=256,P-=8);for(j=j<<P|ee,Ne+=P;Ne>0;u[g+Nt]=255&j,Nt+=fn,j/=256,Ne-=8);u[g+Nt-fn]|=128*_n},Cr=mr;function mr(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}mr.Varint=0,mr.Fixed64=1,mr.Bytes=2,mr.Fixed32=5;var Ci=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function li(u){return u.type===mr.Bytes?u.readVarint()+u.pos:u.pos+1}function Bi(u,d,g){return g?4294967296*d+(u>>>0):4294967296*(d>>>0)+(u>>>0)}function Ri(u,d,g){var A=d<=16383?1:d<=2097151?2:d<=268435455?3:Math.floor(Math.log(d)/(7*Math.LN2));g.realloc(A);for(var P=g.pos-1;P>=u;P--)g.buf[P+A]=g.buf[P]}function Di(u,d){for(var g=0;g<u.length;g++)d.writeVarint(u[g])}function Xi(u,d){for(var g=0;g<u.length;g++)d.writeSVarint(u[g])}function pi(u,d){for(var g=0;g<u.length;g++)d.writeFloat(u[g])}function ki(u,d){for(var g=0;g<u.length;g++)d.writeDouble(u[g])}function fr(u,d){for(var g=0;g<u.length;g++)d.writeBoolean(u[g])}function kr(u,d){for(var g=0;g<u.length;g++)d.writeFixed32(u[g])}function _i(u,d){for(var g=0;g<u.length;g++)d.writeSFixed32(u[g])}function io(u,d){for(var g=0;g<u.length;g++)d.writeFixed64(u[g])}function ri(u,d){for(var g=0;g<u.length;g++)d.writeSFixed64(u[g])}function eo(u,d){return(u[d]|u[d+1]<<8|u[d+2]<<16)+16777216*u[d+3]}function Ei(u,d,g){u[g]=d,u[g+1]=d>>>8,u[g+2]=d>>>16,u[g+3]=d>>>24}function to(u,d){return(u[d]|u[d+1]<<8|u[d+2]<<16)+(u[d+3]<<24)}function si(u,d,g){u===1&&g.readMessage(di,d)}function di(u,d,g){if(u===3){var A=g.readMessage(Uo,{}),P=A.width,B=A.height,j=A.left,ee=A.top,be=A.advance;d.push({id:A.id,bitmap:new kd({width:P+6,height:B+6},A.bitmap),metrics:{width:P,height:B,left:j,top:ee,advance:be}})}}function Uo(u,d,g){u===1?d.id=g.readVarint():u===2?d.bitmap=g.readBytes():u===3?d.width=g.readVarint():u===4?d.height=g.readVarint():u===5?d.left=g.readSVarint():u===6?d.top=g.readSVarint():u===7&&(d.advance=g.readVarint())}function ua(u){for(var d=0,g=0,A=0,P=u;A<P.length;A+=1){var B=P[A];d+=B.w*B.h,g=Math.max(g,B.w)}u.sort(function(_n,Hn){return Hn.h-_n.h});for(var j=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),g),h:1/0}],ee=0,be=0,Ne=0,$e=u;Ne<$e.length;Ne+=1)for(var at=$e[Ne],Tt=j.length-1;Tt>=0;Tt--){var Nt=j[Tt];if(!(at.w>Nt.w||at.h>Nt.h)){if(at.x=Nt.x,at.y=Nt.y,be=Math.max(be,at.y+at.h),ee=Math.max(ee,at.x+at.w),at.w===Nt.w&&at.h===Nt.h){var fn=j.pop();Tt<j.length&&(j[Tt]=fn)}else at.h===Nt.h?(Nt.x+=at.w,Nt.w-=at.w):at.w===Nt.w?(Nt.y+=at.h,Nt.h-=at.h):(j.push({x:Nt.x+at.w,y:Nt.y,w:Nt.w-at.w,h:at.h}),Nt.y+=at.h,Nt.h-=at.h);break}}return{w:ee,h:be,fill:d/(ee*be)||0}}mr.prototype={destroy:function(){this.buf=null},readFields:function(u,d,g){for(g=g||this.length;this.pos<g;){var A=this.readVarint(),P=A>>3,B=this.pos;this.type=7&A,u(P,d,this),this.pos===B&&this.skip(A)}return d},readMessage:function(u,d){return this.readFields(u,d,this.readVarint()+this.pos)},readFixed32:function(){var u=eo(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=to(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=eo(this.buf,this.pos)+4294967296*eo(this.buf,this.pos+4);return this.pos+=8,u},readSFixed64:function(){var u=eo(this.buf,this.pos)+4294967296*to(this.buf,this.pos+4);return this.pos+=8,u},readFloat:function(){var u=Ar(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=Ar(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var d,g,A=this.buf;return d=127&(g=A[this.pos++]),g<128?d:(d|=(127&(g=A[this.pos++]))<<7,g<128?d:(d|=(127&(g=A[this.pos++]))<<14,g<128?d:(d|=(127&(g=A[this.pos++]))<<21,g<128?d:function(P,B,j){var ee,be,Ne=j.buf;if(ee=(112&(be=Ne[j.pos++]))>>4,be<128||(ee|=(127&(be=Ne[j.pos++]))<<3,be<128)||(ee|=(127&(be=Ne[j.pos++]))<<10,be<128)||(ee|=(127&(be=Ne[j.pos++]))<<17,be<128)||(ee|=(127&(be=Ne[j.pos++]))<<24,be<128)||(ee|=(1&(be=Ne[j.pos++]))<<31,be<128))return Bi(P,ee,B);throw new Error("Expected varint not more than 10 bytes")}(d|=(15&(g=A[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&Ci?function(g,A,P){return Ci.decode(g.subarray(A,P))}(this.buf,d,u):function(g,A,P){for(var B="",j=A;j<P;){var ee,be,Ne,$e=g[j],at=null,Tt=$e>239?4:$e>223?3:$e>191?2:1;if(j+Tt>P)break;Tt===1?$e<128&&(at=$e):Tt===2?(192&(ee=g[j+1]))==128&&(at=(31&$e)<<6|63&ee)<=127&&(at=null):Tt===3?(be=g[j+2],(192&(ee=g[j+1]))==128&&(192&be)==128&&((at=(15&$e)<<12|(63&ee)<<6|63&be)<=2047||at>=55296&&at<=57343)&&(at=null)):Tt===4&&(be=g[j+2],Ne=g[j+3],(192&(ee=g[j+1]))==128&&(192&be)==128&&(192&Ne)==128&&((at=(15&$e)<<18|(63&ee)<<12|(63&be)<<6|63&Ne)<=65535||at>=1114112)&&(at=null)),at===null?(at=65533,Tt=1):at>65535&&(at-=65536,B+=String.fromCharCode(at>>>10&1023|55296),at=56320|1023&at),B+=String.fromCharCode(at),j+=Tt}return B}(this.buf,d,u)},readBytes:function(){var u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d},readPackedVarint:function(u,d){if(this.type!==mr.Bytes)return u.push(this.readVarint(d));var g=li(this);for(u=u||[];this.pos<g;)u.push(this.readVarint(d));return u},readPackedSVarint:function(u){if(this.type!==mr.Bytes)return u.push(this.readSVarint());var d=li(this);for(u=u||[];this.pos<d;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==mr.Bytes)return u.push(this.readBoolean());var d=li(this);for(u=u||[];this.pos<d;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==mr.Bytes)return u.push(this.readFloat());var d=li(this);for(u=u||[];this.pos<d;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==mr.Bytes)return u.push(this.readDouble());var d=li(this);for(u=u||[];this.pos<d;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==mr.Bytes)return u.push(this.readFixed32());var d=li(this);for(u=u||[];this.pos<d;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==mr.Bytes)return u.push(this.readSFixed32());var d=li(this);for(u=u||[];this.pos<d;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==mr.Bytes)return u.push(this.readFixed64());var d=li(this);for(u=u||[];this.pos<d;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==mr.Bytes)return u.push(this.readSFixed64());var d=li(this);for(u=u||[];this.pos<d;)u.push(this.readSFixed64());return u},skip:function(u){var d=7&u;if(d===mr.Varint)for(;this.buf[this.pos++]>127;);else if(d===mr.Bytes)this.pos=this.readVarint()+this.pos;else if(d===mr.Fixed32)this.pos+=4;else{if(d!==mr.Fixed64)throw new Error("Unimplemented type: "+d);this.pos+=8}},writeTag:function(u,d){this.writeVarint(u<<3|d)},realloc:function(u){for(var d=this.length||16;d<this.pos+u;)d*=2;if(d!==this.length){var g=new Uint8Array(d);g.set(this.buf),this.buf=g,this.length=d}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Ei(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Ei(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Ei(this.buf,-1&u,this.pos),Ei(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Ei(this.buf,-1&u,this.pos),Ei(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(d,g){var A,P;if(d>=0?(A=d%4294967296|0,P=d/4294967296|0):(P=~(-d/4294967296),4294967295^(A=~(-d%4294967296))?A=A+1|0:(A=0,P=P+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(B,j,ee){ee.buf[ee.pos++]=127&B|128,B>>>=7,ee.buf[ee.pos++]=127&B|128,B>>>=7,ee.buf[ee.pos++]=127&B|128,B>>>=7,ee.buf[ee.pos++]=127&B|128,ee.buf[ee.pos]=127&(B>>>=7)}(A,0,g),function(B,j){var ee=(7&B)<<4;j.buf[j.pos++]|=ee|((B>>>=3)?128:0),B&&(j.buf[j.pos++]=127&B|((B>>>=7)?128:0),B&&(j.buf[j.pos++]=127&B|((B>>>=7)?128:0),B&&(j.buf[j.pos++]=127&B|((B>>>=7)?128:0),B&&(j.buf[j.pos++]=127&B|((B>>>=7)?128:0),B&&(j.buf[j.pos++]=127&B)))))}(P,g)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var d=this.pos;this.pos=function(A,P,B){for(var j,ee,be=0;be<P.length;be++){if((j=P.charCodeAt(be))>55295&&j<57344){if(!ee){j>56319||be+1===P.length?(A[B++]=239,A[B++]=191,A[B++]=189):ee=j;continue}if(j<56320){A[B++]=239,A[B++]=191,A[B++]=189,ee=j;continue}j=ee-55296<<10|j-56320|65536,ee=null}else ee&&(A[B++]=239,A[B++]=191,A[B++]=189,ee=null);j<128?A[B++]=j:(j<2048?A[B++]=j>>6|192:(j<65536?A[B++]=j>>12|224:(A[B++]=j>>18|240,A[B++]=j>>12&63|128),A[B++]=j>>6&63|128),A[B++]=63&j|128)}return B}(this.buf,u,this.pos);var g=this.pos-d;g>=128&&Ri(d,g,this),this.pos=d-1,this.writeVarint(g),this.pos+=g},writeFloat:function(u){this.realloc(4),$r(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),$r(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var d=u.length;this.writeVarint(d),this.realloc(d);for(var g=0;g<d;g++)this.buf[this.pos++]=u[g]},writeRawMessage:function(u,d){this.pos++;var g=this.pos;u(d,this);var A=this.pos-g;A>=128&&Ri(g,A,this),this.pos=g-1,this.writeVarint(A),this.pos+=A},writeMessage:function(u,d,g){this.writeTag(u,mr.Bytes),this.writeRawMessage(d,g)},writePackedVarint:function(u,d){d.length&&this.writeMessage(u,Di,d)},writePackedSVarint:function(u,d){d.length&&this.writeMessage(u,Xi,d)},writePackedBoolean:function(u,d){d.length&&this.writeMessage(u,fr,d)},writePackedFloat:function(u,d){d.length&&this.writeMessage(u,pi,d)},writePackedDouble:function(u,d){d.length&&this.writeMessage(u,ki,d)},writePackedFixed32:function(u,d){d.length&&this.writeMessage(u,kr,d)},writePackedSFixed32:function(u,d){d.length&&this.writeMessage(u,_i,d)},writePackedFixed64:function(u,d){d.length&&this.writeMessage(u,io,d)},writePackedSFixed64:function(u,d){d.length&&this.writeMessage(u,ri,d)},writeBytesField:function(u,d){this.writeTag(u,mr.Bytes),this.writeBytes(d)},writeFixed32Field:function(u,d){this.writeTag(u,mr.Fixed32),this.writeFixed32(d)},writeSFixed32Field:function(u,d){this.writeTag(u,mr.Fixed32),this.writeSFixed32(d)},writeFixed64Field:function(u,d){this.writeTag(u,mr.Fixed64),this.writeFixed64(d)},writeSFixed64Field:function(u,d){this.writeTag(u,mr.Fixed64),this.writeSFixed64(d)},writeVarintField:function(u,d){this.writeTag(u,mr.Varint),this.writeVarint(d)},writeSVarintField:function(u,d){this.writeTag(u,mr.Varint),this.writeSVarint(d)},writeStringField:function(u,d){this.writeTag(u,mr.Bytes),this.writeString(d)},writeFloatField:function(u,d){this.writeTag(u,mr.Fixed32),this.writeFloat(d)},writeDoubleField:function(u,d){this.writeTag(u,mr.Fixed64),this.writeDouble(d)},writeBooleanField:function(u,d){this.writeVarintField(u,!!d)}};var Qi=function(u,d){var g=d.pixelRatio,A=d.version,P=d.stretchX,B=d.stretchY,j=d.content;this.paddedRect=u,this.pixelRatio=g,this.stretchX=P,this.stretchY=B,this.content=j,this.version=A},Si={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Si.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Si.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Si.tlbr.get=function(){return this.tl.concat(this.br)},Si.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Qi.prototype,Si);var Yr=function(u,d){var g={},A={};this.haveRenderCallbacks=[];var P=[];this.addImages(u,g,P),this.addImages(d,A,P);var B=ua(P),j=new Oc({width:B.w||1,height:B.h||1});for(var ee in u){var be=u[ee],Ne=g[ee].paddedRect;Oc.copy(be.data,j,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},be.data)}for(var $e in d){var at=d[$e],Tt=A[$e].paddedRect,Nt=Tt.x+1,fn=Tt.y+1,_n=at.data.width,Hn=at.data.height;Oc.copy(at.data,j,{x:0,y:0},{x:Nt,y:fn},at.data),Oc.copy(at.data,j,{x:0,y:Hn-1},{x:Nt,y:fn-1},{width:_n,height:1}),Oc.copy(at.data,j,{x:0,y:0},{x:Nt,y:fn+Hn},{width:_n,height:1}),Oc.copy(at.data,j,{x:_n-1,y:0},{x:Nt-1,y:fn},{width:1,height:Hn}),Oc.copy(at.data,j,{x:0,y:0},{x:Nt+_n,y:fn},{width:1,height:Hn})}this.image=j,this.iconPositions=g,this.patternPositions=A};Yr.prototype.addImages=function(u,d,g){for(var A in u){var P=u[A],B={x:0,y:0,w:P.data.width+2,h:P.data.height+2};g.push(B),d[A]=new Qi(B,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(A)}},Yr.prototype.patchUpdatedImages=function(u,d){for(var g in u.dispatchRenderCallbacks(this.haveRenderCallbacks),u.updatedImages)this.patchUpdatedImage(this.iconPositions[g],u.getImage(g),d),this.patchUpdatedImage(this.patternPositions[g],u.getImage(g),d)},Yr.prototype.patchUpdatedImage=function(u,d,g){if(u&&d&&u.version!==d.version){u.version=d.version;var A=u.tl;g.update(d.data,void 0,{x:A[0],y:A[1]})}},co("ImagePosition",Qi),co("ImageAtlas",Yr);var Fo={horizontal:1,vertical:2,horizontalOnly:3},La=function(){this.scale=1,this.fontStack="",this.imageName=null};La.forText=function(u,d){var g=new La;return g.scale=u||1,g.fontStack=d,g},La.forImage=function(u){var d=new La;return d.imageName=u,d};var ao=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ca(u,d,g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn,_n){var Hn,Ln=ao.fromFeature(u,P);at===Fo.vertical&&Ln.verticalizePunctuation();var cr=zc.processBidirectionalText,gr=zc.processStyledBidirectionalText;if(cr&&Ln.sections.length===1){Hn=[];for(var Ir=0,Nr=cr(Ln.toString(),Wl(Ln,Ne,B,d,A,Nt,fn));Ir<Nr.length;Ir+=1){var Xr=Nr[Ir],Mi=new ao;Mi.text=Xr,Mi.sections=Ln.sections;for(var Yi=0;Yi<Xr.length;Yi++)Mi.sectionIndex.push(0);Hn.push(Mi)}}else if(gr){Hn=[];for(var Lo=0,fo=gr(Ln.text,Ln.sectionIndex,Wl(Ln,Ne,B,d,A,Nt,fn));Lo<fo.length;Lo+=1){var Xo=fo[Lo],ho=new ao;ho.text=Xo[0],ho.sectionIndex=Xo[1],ho.sections=Ln.sections,Hn.push(ho)}}else Hn=function(Oo,Xa){for(var jo=[],Ya=Oo.text,Vo=0,Is=0,rl=Xa;Is<rl.length;Is+=1){var Zl=rl[Is];jo.push(Oo.substring(Vo,Zl)),Vo=Zl}return Vo<Ya.length&&jo.push(Oo.substring(Vo,Ya.length)),jo}(Ln,Wl(Ln,Ne,B,d,A,Nt,fn));var za=[],oa={positionedLines:za,text:Ln.toString(),top:$e[1],bottom:$e[1],left:$e[0],right:$e[0],writingMode:at,iconsInText:!1,verticalizable:!1};return function(Oo,Xa,jo,Ya,Vo,Is,rl,Zl,Nl,Al,nu,hu){for(var bu=0,Vc=-17,Iu=0,Hc=0,Xl=Zl==="right"?1:Zl==="left"?0:.5,ac=0,Ka=0,Js=Vo;Ka<Js.length;Ka+=1){var Xs=Js[Ka];Xs.trim();var ys=Xs.getMaxScale(),Wc=24*(ys-1),gc={positionedGlyphs:[],lineOffset:0};Oo.positionedLines[ac]=gc;var vl=gc.positionedGlyphs,du=0;if(Xs.length()){for(var xu=0;xu<Xs.length();xu++){var Ss=Xs.getSection(xu),js=Xs.getSectionIndex(xu),sh=Xs.getCharCode(xu),jd=0,ml=null,lh=null,Gc=null,Vd=24,Zf=!(Nl===Fo.horizontal||!nu&&!Id(sh)||nu&&(sa[sh]||(rd=sh,Zi.Arabic(rd)||Zi["Arabic Supplement"](rd)||Zi["Arabic Extended-A"](rd)||Zi["Arabic Presentation Forms-A"](rd)||Zi["Arabic Presentation Forms-B"](rd))));if(Ss.imageName){var Ep=Ya[Ss.imageName];if(!Ep)continue;Gc=Ss.imageName,Oo.iconsInText=Oo.iconsInText||!0,lh=Ep.paddedRect;var Lh=Ep.displaySize;Ss.scale=24*Ss.scale/hu,jd=Wc+(24-Lh[1]*Ss.scale),Vd=(ml={width:Lh[0],height:Lh[1],left:1,top:-3,advance:Zf?Lh[1]:Lh[0]}).advance;var Dh=Zf?Lh[0]*Ss.scale-24*ys:Lh[1]*Ss.scale-24*ys;Dh>0&&Dh>du&&(du=Dh)}else{var N0=jo[Ss.fontStack],Xf=N0&&N0[sh];if(Xf&&Xf.rect)lh=Xf.rect,ml=Xf.metrics;else{var nm=Xa[Ss.fontStack],Vg=nm&&nm[sh];if(!Vg)continue;ml=Vg.metrics}jd=24*(ys-Ss.scale)}Zf?(Oo.verticalizable=!0,vl.push({glyph:sh,imageName:Gc,x:bu,y:Vc+jd,vertical:Zf,scale:Ss.scale,fontStack:Ss.fontStack,sectionIndex:js,metrics:ml,rect:lh}),bu+=Vd*Ss.scale+Al):(vl.push({glyph:sh,imageName:Gc,x:bu,y:Vc+jd,vertical:Zf,scale:Ss.scale,fontStack:Ss.fontStack,sectionIndex:js,metrics:ml,rect:lh}),bu+=ml.advance*Ss.scale+Al)}vl.length!==0&&(Iu=Math.max(bu-Al,Iu),se(vl,0,vl.length-1,Xl,du)),bu=0;var o_=Is*ys+du;gc.lineOffset=Math.max(du,Wc),Vc+=o_,Hc=Math.max(o_,Hc),++ac}else Vc+=Is,++ac}var rd,t0=Vc- -17,dv=Ks(rl),B0=dv.horizontalAlign,pv=dv.verticalAlign;(function(rm,a_,Jm,n0,F0,im,k0,om,s_){var yc,vv=(a_-Jm)*F0;yc=im!==k0?-om*n0- -17:(-n0*s_+.5)*k0;for(var am=0,sm=rm;am<sm.length;am+=1)for(var Sp=0,Hd=sm[am].positionedGlyphs;Sp<Hd.length;Sp+=1){var id=Hd[Sp];id.x+=vv,id.y+=yc}})(Oo.positionedLines,Xl,B0,pv,Iu,Hc,Is,t0,Vo.length),Oo.top+=-pv*t0,Oo.bottom=Oo.top+t0,Oo.left+=-B0*Iu,Oo.right=Oo.left+Iu}(oa,d,g,A,Hn,j,ee,be,at,Ne,Tt,_n),!function(Oo){for(var Xa=0,jo=Oo;Xa<jo.length;Xa+=1)if(jo[Xa].positionedGlyphs.length!==0)return!1;return!0}(za)&&oa}ao.fromFeature=function(u,d){for(var g=new ao,A=0;A<u.sections.length;A++){var P=u.sections[A];P.image?g.addImageSection(P):g.addTextSection(P,d)}return g},ao.prototype.length=function(){return this.text.length},ao.prototype.getSection=function(u){return this.sections[this.sectionIndex[u]]},ao.prototype.getSectionIndex=function(u){return this.sectionIndex[u]},ao.prototype.getCharCode=function(u){return this.text.charCodeAt(u)},ao.prototype.verticalizePunctuation=function(){this.text=function(u){for(var d="",g=0;g<u.length;g++){var A=u.charCodeAt(g+1)||null,P=u.charCodeAt(g-1)||null;d+=A&&Ah(A)&&!Rn[u[g+1]]||P&&Ah(P)&&!Rn[u[g-1]]||!Rn[u[g]]?u[g]:Rn[u[g]]}return d}(this.text)},ao.prototype.trim=function(){for(var u=0,d=0;d<this.text.length&&sa[this.text.charCodeAt(d)];d++)u++;for(var g=this.text.length,A=this.text.length-1;A>=0&&A>=u&&sa[this.text.charCodeAt(A)];A--)g--;this.text=this.text.substring(u,g),this.sectionIndex=this.sectionIndex.slice(u,g)},ao.prototype.substring=function(u,d){var g=new ao;return g.text=this.text.substring(u,d),g.sectionIndex=this.sectionIndex.slice(u,d),g.sections=this.sections,g},ao.prototype.toString=function(){return this.text},ao.prototype.getMaxScale=function(){var u=this;return this.sectionIndex.reduce(function(d,g){return Math.max(d,u.sections[g].scale)},0)},ao.prototype.addTextSection=function(u,d){this.text+=u.text,this.sections.push(La.forText(u.scale,u.fontStack||d));for(var g=this.sections.length-1,A=0;A<u.text.length;++A)this.sectionIndex.push(g)},ao.prototype.addImageSection=function(u){var d=u.image?u.image.name:"";if(d.length!==0){var g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(La.forImage(d)),this.sectionIndex.push(this.sections.length-1)):Ze("Reached maximum number of images 6401")}else Ze("Can't add FormattedSection with an empty image.")},ao.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var sa={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ko={};function hs(u,d,g,A,P,B){if(d.imageName){var j=A[d.imageName];return j?j.displaySize[0]*d.scale*24/B+P:0}var ee=g[d.fontStack],be=ee&&ee[u];return be?be.metrics.advance*d.scale+P:0}function Tl(u,d,g,A){var P=Math.pow(u-d,2);return A?u<d?P/2:2*P:P+Math.abs(g)*g}function Wu(u,d,g){var A=0;return u===10&&(A-=1e4),g&&(A+=150),u!==40&&u!==65288||(A+=50),d!==41&&d!==65289||(A+=50),A}function Za(u,d,g,A,P,B){for(var j=null,ee=Tl(d,g,P,B),be=0,Ne=A;be<Ne.length;be+=1){var $e=Ne[be],at=Tl(d-$e.x,g,P,B)+$e.badness;at<=ee&&(j=$e,ee=at)}return{index:u,x:d,priorBreak:j,badness:ee}}function Wl(u,d,g,A,P,B,j){if(B!=="point")return[];if(!u)return[];for(var ee,be=[],Ne=function(Hn,Ln,cr,gr,Ir,Nr){for(var Xr=0,Mi=0;Mi<Hn.length();Mi++){var Yi=Hn.getSection(Mi);Xr+=hs(Hn.getCharCode(Mi),Yi,gr,Ir,Ln,Nr)}return Xr/Math.max(1,Math.ceil(Xr/cr))}(u,d,g,A,P,j),$e=u.text.indexOf("\u200B")>=0,at=0,Tt=0;Tt<u.length();Tt++){var Nt=u.getSection(Tt),fn=u.getCharCode(Tt);if(sa[fn]||(at+=hs(fn,Nt,A,P,d,j)),Tt<u.length()-1){var _n=!((ee=fn)<11904||!(Zi["Bopomofo Extended"](ee)||Zi.Bopomofo(ee)||Zi["CJK Compatibility Forms"](ee)||Zi["CJK Compatibility Ideographs"](ee)||Zi["CJK Compatibility"](ee)||Zi["CJK Radicals Supplement"](ee)||Zi["CJK Strokes"](ee)||Zi["CJK Symbols and Punctuation"](ee)||Zi["CJK Unified Ideographs Extension A"](ee)||Zi["CJK Unified Ideographs"](ee)||Zi["Enclosed CJK Letters and Months"](ee)||Zi["Halfwidth and Fullwidth Forms"](ee)||Zi.Hiragana(ee)||Zi["Ideographic Description Characters"](ee)||Zi["Kangxi Radicals"](ee)||Zi["Katakana Phonetic Extensions"](ee)||Zi.Katakana(ee)||Zi["Vertical Forms"](ee)||Zi["Yi Radicals"](ee)||Zi["Yi Syllables"](ee)));(Ko[fn]||_n||Nt.imageName)&&be.push(Za(Tt+1,at,Ne,be,Wu(fn,u.getCharCode(Tt+1),_n&&$e),!1))}}return function Hn(Ln){return Ln?Hn(Ln.priorBreak).concat(Ln.index):[]}(Za(u.length(),at,Ne,be,0,!0))}function Ks(u){var d=.5,g=.5;switch(u){case"right":case"top-right":case"bottom-right":d=1;break;case"left":case"top-left":case"bottom-left":d=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":g=1;break;case"top":case"top-right":case"top-left":g=0}return{horizontalAlign:d,verticalAlign:g}}function se(u,d,g,A,P){if(A||P)for(var B=u[g],j=(u[g].x+B.metrics.advance*B.scale)*A,ee=d;ee<=g;ee++)u[ee].x-=j,u[ee].y+=P}function eu(u,d,g,A,P,B){var j,ee=u.image;if(ee.content){var be=ee.content,Ne=ee.pixelRatio||1;j=[be[0]/Ne,be[1]/Ne,ee.displaySize[0]-be[2]/Ne,ee.displaySize[1]-be[3]/Ne]}var $e,at,Tt,Nt,fn=d.left*B,_n=d.right*B;g==="width"||g==="both"?(Nt=P[0]+fn-A[3],at=P[0]+_n+A[1]):at=(Nt=P[0]+(fn+_n-ee.displaySize[0])/2)+ee.displaySize[0];var Hn=d.top*B,Ln=d.bottom*B;return g==="height"||g==="both"?($e=P[1]+Hn-A[0],Tt=P[1]+Ln+A[2]):Tt=($e=P[1]+(Hn+Ln-ee.displaySize[1])/2)+ee.displaySize[1],{image:ee,top:$e,right:at,bottom:Tt,left:Nt,collisionPadding:j}}Ko[10]=!0,Ko[32]=!0,Ko[38]=!0,Ko[40]=!0,Ko[41]=!0,Ko[43]=!0,Ko[45]=!0,Ko[47]=!0,Ko[173]=!0,Ko[183]=!0,Ko[8203]=!0,Ko[8208]=!0,Ko[8211]=!0,Ko[8231]=!0;var rs=function(u){function d(g,A,P,B){u.call(this,g,A),this.angle=P,B!==void 0&&(this.segment=B)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)},d}(ce);function ur(u,d){var g=d.expression;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new ba(u+1))};if(g.kind==="source")return{kind:"source"};for(var A=g.zoomStops,P=g.interpolationType,B=0;B<A.length&&A[B]<=u;)B++;for(var j=B=Math.max(0,B-1);j<A.length&&A[j]<u+1;)j++;j=Math.min(A.length-1,j);var ee=A[B],be=A[j];return g.kind==="composite"?{kind:"composite",minZoom:ee,maxZoom:be,interpolationType:P}:{kind:"camera",minZoom:ee,maxZoom:be,minSize:g.evaluate(new ba(ee)),maxSize:g.evaluate(new ba(be)),interpolationType:P}}function Kr(u,d,g){var A=d.uSize,P=g.lowerSize;return u.kind==="source"?P/128:u.kind==="composite"?Cs(P/128,g.upperSize/128,d.uSizeT):A}function Dl(u,d){var g=0,A=0;if(u.kind==="constant")A=u.layoutSize;else if(u.kind!=="source"){var P=u.interpolationType,B=P?Re(Vl.interpolationFactor(P,d,u.minZoom,u.maxZoom),0,1):0;u.kind==="camera"?A=Cs(u.minSize,u.maxSize,B):g=B}return{uSizeT:g,uSize:A}}co("Anchor",rs);var Sa=Object.freeze({__proto__:null,getSizeData:ur,evaluateSizeForFeature:Kr,evaluateSizeForZoom:Dl,SIZE_PACK_FACTOR:128});function rc(u,d,g,A,P){if(d.segment===void 0)return!0;for(var B=d,j=d.segment+1,ee=0;ee>-g/2;){if(--j<0)return!1;ee-=u[j].dist(B),B=u[j]}ee+=u[j].dist(u[j+1]),j++;for(var be=[],Ne=0;ee<g/2;){var $e=u[j],at=u[j+1];if(!at)return!1;var Tt=u[j-1].angleTo($e)-$e.angleTo(at);for(Tt=Math.abs((Tt+3*Math.PI)%(2*Math.PI)-Math.PI),be.push({distance:ee,angleDelta:Tt}),Ne+=Tt;ee-be[0].distance>A;)Ne-=be.shift().angleDelta;if(Ne>P)return!1;j++,ee+=$e.dist(at)}return!0}function Us(u){for(var d=0,g=0;g<u.length-1;g++)d+=u[g].dist(u[g+1]);return d}function qo(u,d,g){return u?.6*d*g:0}function Ca(u,d){return Math.max(u?u.right-u.left:0,d?d.right-d.left:0)}function ds(u,d,g,A,P,B){for(var j=qo(g,P,B),ee=Ca(g,A)*B,be=0,Ne=Us(u)/2,$e=0;$e<u.length-1;$e++){var at=u[$e],Tt=u[$e+1],Nt=at.dist(Tt);if(be+Nt>Ne){var fn=(Ne-be)/Nt,_n=Cs(at.x,Tt.x,fn),Hn=Cs(at.y,Tt.y,fn),Ln=new rs(_n,Hn,Tt.angleTo(at),$e);return Ln._round(),!j||rc(u,Ln,ee,j,d)?Ln:void 0}be+=Nt}}function fu(u,d,g,A,P,B,j,ee,be){var Ne=qo(A,B,j),$e=Ca(A,P),at=$e*j,Tt=u[0].x===0||u[0].x===be||u[0].y===0||u[0].y===be;return d-at<d/4&&(d=at+d/4),function Nt(fn,_n,Hn,Ln,cr,gr,Ir,Nr,Xr){for(var Mi=gr/2,Yi=Us(fn),Lo=0,fo=_n-Hn,Xo=[],ho=0;ho<fn.length-1;ho++){for(var za=fn[ho],oa=fn[ho+1],Oo=za.dist(oa),Xa=oa.angleTo(za);fo+Hn<Lo+Oo;){var jo=((fo+=Hn)-Lo)/Oo,Ya=Cs(za.x,oa.x,jo),Vo=Cs(za.y,oa.y,jo);if(Ya>=0&&Ya<Xr&&Vo>=0&&Vo<Xr&&fo-Mi>=0&&fo+Mi<=Yi){var Is=new rs(Ya,Vo,Xa,ho);Is._round(),Ln&&!rc(fn,Is,gr,Ln,cr)||Xo.push(Is)}}Lo+=Oo}return Nr||Xo.length||Ir||(Xo=Nt(fn,Lo/2,Hn,Ln,cr,gr,Ir,!0,Xr)),Xo}(u,Tt?d/2*ee%d:($e/2+2*B)*j*ee%d,d,Ne,g,at,Tt,!1,be)}function Ih(u,d,g,A,P){for(var B=[],j=0;j<u.length;j++)for(var ee=u[j],be=void 0,Ne=0;Ne<ee.length-1;Ne++){var $e=ee[Ne],at=ee[Ne+1];$e.x<d&&at.x<d||($e.x<d?$e=new ce(d,$e.y+(d-$e.x)/(at.x-$e.x)*(at.y-$e.y))._round():at.x<d&&(at=new ce(d,$e.y+(d-$e.x)/(at.x-$e.x)*(at.y-$e.y))._round()),$e.y<g&&at.y<g||($e.y<g?$e=new ce($e.x+(g-$e.y)/(at.y-$e.y)*(at.x-$e.x),g)._round():at.y<g&&(at=new ce($e.x+(g-$e.y)/(at.y-$e.y)*(at.x-$e.x),g)._round()),$e.x>=A&&at.x>=A||($e.x>=A?$e=new ce(A,$e.y+(A-$e.x)/(at.x-$e.x)*(at.y-$e.y))._round():at.x>=A&&(at=new ce(A,$e.y+(A-$e.x)/(at.x-$e.x)*(at.y-$e.y))._round()),$e.y>=P&&at.y>=P||($e.y>=P?$e=new ce($e.x+(P-$e.y)/(at.y-$e.y)*(at.x-$e.x),P)._round():at.y>=P&&(at=new ce($e.x+(P-$e.y)/(at.y-$e.y)*(at.x-$e.x),P)._round()),be&&$e.equals(be[be.length-1])||B.push(be=[$e]),be.push(at)))))}return B}function gn(u,d,g,A){var P=[],B=u.image,j=B.pixelRatio,ee=B.paddedRect.w-2,be=B.paddedRect.h-2,Ne=u.right-u.left,$e=u.bottom-u.top,at=B.stretchX||[[0,ee]],Tt=B.stretchY||[[0,be]],Nt=function(Ya,Vo){return Ya+Vo[1]-Vo[0]},fn=at.reduce(Nt,0),_n=Tt.reduce(Nt,0),Hn=ee-fn,Ln=be-_n,cr=0,gr=fn,Ir=0,Nr=_n,Xr=0,Mi=Hn,Yi=0,Lo=Ln;if(B.content&&A){var fo=B.content;cr=Pr(at,0,fo[0]),Ir=Pr(Tt,0,fo[1]),gr=Pr(at,fo[0],fo[2]),Nr=Pr(Tt,fo[1],fo[3]),Xr=fo[0]-cr,Yi=fo[1]-Ir,Mi=fo[2]-fo[0]-gr,Lo=fo[3]-fo[1]-Nr}var Xo=function(Ya,Vo,Is,rl){var Zl=vo(Ya.stretch-cr,gr,Ne,u.left),Nl=ka(Ya.fixed-Xr,Mi,Ya.stretch,fn),Al=vo(Vo.stretch-Ir,Nr,$e,u.top),nu=ka(Vo.fixed-Yi,Lo,Vo.stretch,_n),hu=vo(Is.stretch-cr,gr,Ne,u.left),bu=ka(Is.fixed-Xr,Mi,Is.stretch,fn),Vc=vo(rl.stretch-Ir,Nr,$e,u.top),Iu=ka(rl.fixed-Yi,Lo,rl.stretch,_n),Hc=new ce(Zl,Al),Xl=new ce(hu,Al),ac=new ce(hu,Vc),Ka=new ce(Zl,Vc),Js=new ce(Nl/j,nu/j),Xs=new ce(bu/j,Iu/j),ys=d*Math.PI/180;if(ys){var Wc=Math.sin(ys),gc=Math.cos(ys),vl=[gc,-Wc,Wc,gc];Hc._matMult(vl),Xl._matMult(vl),Ka._matMult(vl),ac._matMult(vl)}var du=Ya.stretch+Ya.fixed,xu=Vo.stretch+Vo.fixed;return{tl:Hc,tr:Xl,bl:Ka,br:ac,tex:{x:B.paddedRect.x+1+du,y:B.paddedRect.y+1+xu,w:Is.stretch+Is.fixed-du,h:rl.stretch+rl.fixed-xu},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Js,pixelOffsetBR:Xs,minFontScaleX:Mi/j/Ne,minFontScaleY:Lo/j/$e,isSDF:g}};if(A&&(B.stretchX||B.stretchY))for(var ho=xr(at,Hn,fn),za=xr(Tt,Ln,_n),oa=0;oa<ho.length-1;oa++)for(var Oo=ho[oa],Xa=ho[oa+1],jo=0;jo<za.length-1;jo++)P.push(Xo(Oo,za[jo],Xa,za[jo+1]));else P.push(Xo({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ee+1},{fixed:0,stretch:be+1}));return P}function Pr(u,d,g){for(var A=0,P=0,B=u;P<B.length;P+=1){var j=B[P];A+=Math.max(d,Math.min(g,j[1]))-Math.max(d,Math.min(g,j[0]))}return A}function xr(u,d,g){for(var A=[{fixed:-1,stretch:0}],P=0,B=u;P<B.length;P+=1){var j=B[P],ee=j[0],be=j[1],Ne=A[A.length-1];A.push({fixed:ee-Ne.stretch,stretch:Ne.stretch}),A.push({fixed:ee-Ne.stretch,stretch:Ne.stretch+(be-ee)})}return A.push({fixed:d+1,stretch:g}),A}function vo(u,d,g,A){return u/d*g+A}function ka(u,d,g,A){return u-d*g/A}var Ps=function(u,d,g,A,P,B,j,ee,be,Ne){if(this.boxStartIndex=u.length,be){var $e=B.top,at=B.bottom,Tt=B.collisionPadding;Tt&&($e-=Tt[1],at+=Tt[3]);var Nt=at-$e;Nt>0&&(Nt=Math.max(10,Nt),this.circleDiameter=Nt)}else{var fn=B.top*j-ee,_n=B.bottom*j+ee,Hn=B.left*j-ee,Ln=B.right*j+ee,cr=B.collisionPadding;if(cr&&(Hn-=cr[0]*j,fn-=cr[1]*j,Ln+=cr[2]*j,_n+=cr[3]*j),Ne){var gr=new ce(Hn,fn),Ir=new ce(Ln,fn),Nr=new ce(Hn,_n),Xr=new ce(Ln,_n),Mi=Ne*Math.PI/180;gr._rotate(Mi),Ir._rotate(Mi),Nr._rotate(Mi),Xr._rotate(Mi),Hn=Math.min(gr.x,Ir.x,Nr.x,Xr.x),Ln=Math.max(gr.x,Ir.x,Nr.x,Xr.x),fn=Math.min(gr.y,Ir.y,Nr.y,Xr.y),_n=Math.max(gr.y,Ir.y,Nr.y,Xr.y)}u.emplaceBack(d.x,d.y,Hn,fn,Ln,_n,g,A,P)}this.boxEndIndex=u.length},Dt=function(u,d){if(u===void 0&&(u=[]),d===void 0&&(d=nn),this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(var g=(this.length>>1)-1;g>=0;g--)this._down(g)};function nn(u,d){return u<d?-1:u>d?1:0}function Mn(u,d,g){d===void 0&&(d=1),g===void 0&&(g=!1);for(var A=1/0,P=1/0,B=-1/0,j=-1/0,ee=u[0],be=0;be<ee.length;be++){var Ne=ee[be];(!be||Ne.x<A)&&(A=Ne.x),(!be||Ne.y<P)&&(P=Ne.y),(!be||Ne.x>B)&&(B=Ne.x),(!be||Ne.y>j)&&(j=Ne.y)}var $e=Math.min(B-A,j-P),at=$e/2,Tt=new Dt([],Tr);if($e===0)return new ce(A,P);for(var Nt=A;Nt<B;Nt+=$e)for(var fn=P;fn<j;fn+=$e)Tt.push(new br(Nt+at,fn+at,at,u));for(var _n=function(cr){for(var gr=0,Ir=0,Nr=0,Xr=cr[0],Mi=0,Yi=Xr.length,Lo=Yi-1;Mi<Yi;Lo=Mi++){var fo=Xr[Mi],Xo=Xr[Lo],ho=fo.x*Xo.y-Xo.x*fo.y;Ir+=(fo.x+Xo.x)*ho,Nr+=(fo.y+Xo.y)*ho,gr+=3*ho}return new br(Ir/gr,Nr/gr,0,cr)}(u),Hn=Tt.length;Tt.length;){var Ln=Tt.pop();(Ln.d>_n.d||!_n.d)&&(_n=Ln,g&&console.log("found best %d after %d probes",Math.round(1e4*Ln.d)/1e4,Hn)),Ln.max-_n.d<=d||(Tt.push(new br(Ln.p.x-(at=Ln.h/2),Ln.p.y-at,at,u)),Tt.push(new br(Ln.p.x+at,Ln.p.y-at,at,u)),Tt.push(new br(Ln.p.x-at,Ln.p.y+at,at,u)),Tt.push(new br(Ln.p.x+at,Ln.p.y+at,at,u)),Hn+=4)}return g&&(console.log("num probes: "+Hn),console.log("best distance: "+_n.d)),_n.p}function Tr(u,d){return d.max-u.max}function br(u,d,g,A){this.p=new ce(u,d),this.h=g,this.d=function(P,B){for(var j=!1,ee=1/0,be=0;be<B.length;be++)for(var Ne=B[be],$e=0,at=Ne.length,Tt=at-1;$e<at;Tt=$e++){var Nt=Ne[$e],fn=Ne[Tt];Nt.y>P.y!=fn.y>P.y&&P.x<(fn.x-Nt.x)*(P.y-Nt.y)/(fn.y-Nt.y)+Nt.x&&(j=!j),ee=Math.min(ee,Kh(P,Nt,fn))}return(j?1:-1)*Math.sqrt(ee)}(this.p,A),this.max=this.d+this.h*Math.SQRT2}Dt.prototype.push=function(u){this.data.push(u),this.length++,this._up(this.length-1)},Dt.prototype.pop=function(){if(this.length!==0){var u=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),u}},Dt.prototype.peek=function(){return this.data[0]},Dt.prototype._up=function(u){for(var d=this.data,g=this.compare,A=d[u];u>0;){var P=u-1>>1,B=d[P];if(g(A,B)>=0)break;d[u]=B,u=P}d[u]=A},Dt.prototype._down=function(u){for(var d=this.data,g=this.compare,A=this.length>>1,P=d[u];u<A;){var B=1+(u<<1),j=d[B],ee=B+1;if(ee<this.length&&g(d[ee],j)<0&&(B=ee,j=d[ee]),g(j,P)>=0)break;d[u]=j,u=B}d[u]=P};var Vn=Number.POSITIVE_INFINITY;function Jn(u,d){return d[1]!==Vn?function(g,A,P){var B=0,j=0;switch(A=Math.abs(A),P=Math.abs(P),g){case"top-right":case"top-left":case"top":j=P-7;break;case"bottom-right":case"bottom-left":case"bottom":j=7-P}switch(g){case"top-right":case"bottom-right":case"right":B=-A;break;case"top-left":case"bottom-left":case"left":B=A}return[B,j]}(u,d[0],d[1]):function(g,A){var P=0,B=0;A<0&&(A=0);var j=A/Math.sqrt(2);switch(g){case"top-right":case"top-left":B=j-7;break;case"bottom-right":case"bottom-left":B=7-j;break;case"bottom":B=7-A;break;case"top":B=A-7}switch(g){case"top-right":case"bottom-right":P=-j;break;case"top-left":case"bottom-left":P=j;break;case"left":P=A;break;case"right":P=-A}return[P,B]}(u,d[0])}function or(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xn(u,d,g,A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn){var _n=function(Ir,Nr,Xr,Mi,Yi,Lo,fo,Xo){for(var ho=Mi.layout.get("text-rotate").evaluate(Lo,{})*Math.PI/180,za=[],oa=0,Oo=Nr.positionedLines;oa<Oo.length;oa+=1)for(var Xa=Oo[oa],jo=0,Ya=Xa.positionedGlyphs;jo<Ya.length;jo+=1){var Vo=Ya[jo];if(Vo.rect){var Is=Vo.rect||{},rl=4,Zl=!0,Nl=1,Al=0,nu=(Yi||Xo)&&Vo.vertical,hu=Vo.metrics.advance*Vo.scale/2;if(Xo&&Nr.verticalizable&&(Al=Xa.lineOffset/2-(Vo.imageName?-(24-Vo.metrics.width*Vo.scale)/2:24*(Vo.scale-1))),Vo.imageName){var bu=fo[Vo.imageName];Zl=bu.sdf,rl=1/(Nl=bu.pixelRatio)}var Vc=Yi?[Vo.x+hu,Vo.y]:[0,0],Iu=Yi?[0,0]:[Vo.x+hu+Xr[0],Vo.y+Xr[1]-Al],Hc=[0,0];nu&&(Hc=Iu,Iu=[0,0]);var Xl=(Vo.metrics.left-rl)*Vo.scale-hu+Iu[0],ac=(-Vo.metrics.top-rl)*Vo.scale+Iu[1],Ka=Xl+Is.w*Vo.scale/Nl,Js=ac+Is.h*Vo.scale/Nl,Xs=new ce(Xl,ac),ys=new ce(Ka,ac),Wc=new ce(Xl,Js),gc=new ce(Ka,Js);if(nu){var vl=new ce(-hu,hu- -17),du=-Math.PI/2,xu=12-hu,Ss=new ce(22-xu,-(Vo.imageName?xu:0)),js=new(Function.prototype.bind.apply(ce,[null].concat(Hc)));Xs._rotateAround(du,vl)._add(Ss)._add(js),ys._rotateAround(du,vl)._add(Ss)._add(js),Wc._rotateAround(du,vl)._add(Ss)._add(js),gc._rotateAround(du,vl)._add(Ss)._add(js)}if(ho){var sh=Math.sin(ho),jd=Math.cos(ho),ml=[jd,-sh,sh,jd];Xs._matMult(ml),ys._matMult(ml),Wc._matMult(ml),gc._matMult(ml)}var lh=new ce(0,0),Gc=new ce(0,0);za.push({tl:Xs,tr:ys,bl:Wc,br:gc,tex:Is,writingMode:Nr.writingMode,glyphOffset:Vc,sectionIndex:Vo.sectionIndex,isSDF:Zl,pixelOffsetTL:lh,pixelOffsetBR:Gc,minFontScaleX:0,minFontScaleY:0})}}return za}(0,g,ee,P,B,j,A,u.allowVerticalPlacement),Hn=u.textSizeData,Ln=null;Hn.kind==="source"?(Ln=[128*P.layout.get("text-size").evaluate(j,{})])[0]>32640&&Ze(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Hn.kind==="composite"&&((Ln=[128*Nt.compositeTextSizes[0].evaluate(j,{},fn),128*Nt.compositeTextSizes[1].evaluate(j,{},fn)])[0]>32640||Ln[1]>32640)&&Ze(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),u.addSymbols(u.text,_n,Ln,ee,B,j,Ne,d,be.lineStartIndex,be.lineLength,Tt,fn);for(var cr=0,gr=$e;cr<gr.length;cr+=1)at[gr[cr]]=u.text.placedSymbolArray.length-1;return 4*_n.length}function Gn(u){for(var d in u)return u[d];return null}function tn(u,d,g,A){var P=u.compareText;if(d in P){for(var B=P[d],j=B.length-1;j>=0;j--)if(A.dist(B[j])<g)return!0}else P[d]=[];return P[d].push(A),!1}var Kn=mp.VectorTileFeature.types,Dr=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function jr(u,d,g,A,P,B,j,ee,be,Ne,$e,at,Tt){var Nt=ee?Math.min(32640,Math.round(ee[0])):0,fn=ee?Math.min(32640,Math.round(ee[1])):0;u.emplaceBack(d,g,Math.round(32*A),Math.round(32*P),B,j,(Nt<<1)+(be?1:0),fn,16*Ne,16*$e,256*at,256*Tt)}function vi(u,d,g){u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g)}function Qr(u){for(var d=0,g=u.sections;d<g.length;d+=1)if(_0(g[d].text))return!0;return!1}var bi=function(u){this.layoutVertexArray=new jp,this.indexArray=new zf,this.programConfigurations=u,this.segments=new Ht,this.dynamicLayoutVertexArray=new Uc,this.opacityVertexArray=new Nd,this.placedSymbolArray=new O};bi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},bi.prototype.upload=function(u,d,g,A){this.isEmpty()||(g&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Xm.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,t_.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,Dr,!0),this.opacityVertexBuffer.itemSize=1),(g||A)&&this.programConfigurations.upload(u))},bi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},co("SymbolBuffers",bi);var Io=function(u,d,g){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new g,this.segments=new Ht,this.collisionVertexArray=new T0};Io.prototype.upload=function(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Jv.members,!0)},Io.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},co("CollisionBuffers",Io);var Fi=function(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Hl([]),this.placementViewportMatrix=Hl([]);var d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ur(this.zoom,d["text-size"]),this.iconSizeData=ur(this.zoom,d["icon-size"]);var g=this.layers[0].layout,A=g.get("symbol-sort-key"),P=g.get("symbol-z-order");this.canOverlap=g.get("text-allow-overlap")||g.get("icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&A.constantOr(1)!==void 0,this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(function(B){return Fo[B]})),this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id}),this.sourceID=u.sourceID};Fi.prototype.createArrays=function(){this.text=new bi(new Bo(this.layers,this.zoom,function(u){return/^text/.test(u)})),this.icon=new bi(new Bo(this.layers,this.zoom,function(u){return/^icon/.test(u)})),this.glyphOffsetArray=new J,this.lineVertexArray=new ge,this.symbolInstances=new Z},Fi.prototype.calculateGlyphDependencies=function(u,d,g,A,P){for(var B=0;B<u.length;B++)if(d[u.charCodeAt(B)]=!0,(g||A)&&P){var j=Rn[u.charAt(B)];j&&(d[j.charCodeAt(0)]=!0)}},Fi.prototype.populate=function(u,d,g){var A=this.layers[0],P=A.layout,B=P.get("text-font"),j=P.get("text-field"),ee=P.get("icon-image"),be=(j.value.kind!=="constant"||j.value.value instanceof hr&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(B.value.kind!=="constant"||B.value.value.length>0),Ne=ee.value.kind!=="constant"||!!ee.value.value||Object.keys(ee.parameters).length>0,$e=P.get("symbol-sort-key");if(this.features=[],be||Ne){for(var at=d.iconDependencies,Tt=d.glyphDependencies,Nt=d.availableImages,fn=new ba(this.zoom),_n=0,Hn=u;_n<Hn.length;_n+=1){var Ln=Hn[_n],cr=Ln.feature,gr=Ln.id,Ir=Ln.index,Nr=Ln.sourceLayerIndex,Xr=A._featureFilter.needGeometry,Mi=_l(cr,Xr);if(A._featureFilter.filter(fn,Mi,g)){Xr||(Mi.geometry=Es(cr));var Yi=void 0;if(be){var Lo=A.getValueAndResolveTokens("text-field",Mi,g,Nt),fo=hr.factory(Lo);Qr(fo)&&(this.hasRTLText=!0),(!this.hasRTLText||iv()==="unavailable"||this.hasRTLText&&zc.isParsed())&&(Yi=qt(fo,A,Mi))}var Xo=void 0;if(Ne){var ho=A.getValueAndResolveTokens("icon-image",Mi,g,Nt);Xo=ho instanceof Jr?ho:Jr.fromString(ho)}if(Yi||Xo){var za=this.sortFeaturesByKey?$e.evaluate(Mi,{},g):void 0;if(this.features.push({id:gr,text:Yi,icon:Xo,index:Ir,sourceLayerIndex:Nr,geometry:Mi.geometry,properties:cr.properties,type:Kn[cr.type],sortKey:za}),Xo&&(at[Xo.name]=!0),Yi){var oa=B.evaluate(Mi,{},g).join(","),Oo=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Fo.vertical)>=0;for(var Xa=0,jo=Yi.sections;Xa<jo.length;Xa+=1){var Ya=jo[Xa];if(Ya.image)at[Ya.image.name]=!0;else{var Vo=Ef(Yi.toString()),Is=Ya.fontStack||oa,rl=Tt[Is]=Tt[Is]||{};this.calculateGlyphDependencies(Ya.text,rl,Oo,this.allowVerticalPlacement,Vo)}}}}}}P.get("symbol-placement")==="line"&&(this.features=function(Zl){var Nl={},Al={},nu=[],hu=0;function bu(vl){nu.push(Zl[vl]),hu++}function Vc(vl,du,xu){var Ss=Al[vl];return delete Al[vl],Al[du]=Ss,nu[Ss].geometry[0].pop(),nu[Ss].geometry[0]=nu[Ss].geometry[0].concat(xu[0]),Ss}function Iu(vl,du,xu){var Ss=Nl[du];return delete Nl[du],Nl[vl]=Ss,nu[Ss].geometry[0].shift(),nu[Ss].geometry[0]=xu[0].concat(nu[Ss].geometry[0]),Ss}function Hc(vl,du,xu){var Ss=xu?du[0][du[0].length-1]:du[0][0];return vl+":"+Ss.x+":"+Ss.y}for(var Xl=0;Xl<Zl.length;Xl++){var ac=Zl[Xl],Ka=ac.geometry,Js=ac.text?ac.text.toString():null;if(Js){var Xs=Hc(Js,Ka),ys=Hc(Js,Ka,!0);if(Xs in Al&&ys in Nl&&Al[Xs]!==Nl[ys]){var Wc=Iu(Xs,ys,Ka),gc=Vc(Xs,ys,nu[Wc].geometry);delete Nl[Xs],delete Al[ys],Al[Hc(Js,nu[gc].geometry,!0)]=gc,nu[Wc].geometry=null}else Xs in Al?Vc(Xs,ys,Ka):ys in Nl?Iu(Xs,ys,Ka):(bu(Xl),Nl[Xs]=hu-1,Al[ys]=hu-1)}else bu(Xl)}return nu.filter(function(vl){return vl.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Zl,Nl){return Zl.sortKey-Nl.sortKey})}},Fi.prototype.update=function(u,d,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,g),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,g))},Fi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Fi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Fi.prototype.upload=function(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Fi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Fi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Fi.prototype.addToLineVertexArray=function(u,d){var g=this.lineVertexArray.length;if(u.segment!==void 0){for(var A=u.dist(d[u.segment+1]),P=u.dist(d[u.segment]),B={},j=u.segment+1;j<d.length;j++)B[j]={x:d[j].x,y:d[j].y,tileUnitDistanceFromAnchor:A},j<d.length-1&&(A+=d[j+1].dist(d[j]));for(var ee=u.segment||0;ee>=0;ee--)B[ee]={x:d[ee].x,y:d[ee].y,tileUnitDistanceFromAnchor:P},ee>0&&(P+=d[ee-1].dist(d[ee]));for(var be=0;be<d.length;be++){var Ne=B[be];this.lineVertexArray.emplaceBack(Ne.x,Ne.y,Ne.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}},Fi.prototype.addSymbols=function(u,d,g,A,P,B,j,ee,be,Ne,$e,at){for(var Tt=u.indexArray,Nt=u.layoutVertexArray,fn=u.segments.prepareSegment(4*d.length,Nt,Tt,this.canOverlap?B.sortKey:void 0),_n=this.glyphOffsetArray.length,Hn=fn.vertexLength,Ln=this.allowVerticalPlacement&&j===Fo.vertical?Math.PI/2:0,cr=B.text&&B.text.sections,gr=0;gr<d.length;gr++){var Ir=d[gr],Nr=Ir.tl,Xr=Ir.tr,Mi=Ir.bl,Yi=Ir.br,Lo=Ir.tex,fo=Ir.pixelOffsetTL,Xo=Ir.pixelOffsetBR,ho=Ir.minFontScaleX,za=Ir.minFontScaleY,oa=Ir.glyphOffset,Oo=Ir.isSDF,Xa=Ir.sectionIndex,jo=fn.vertexLength,Ya=oa[1];jr(Nt,ee.x,ee.y,Nr.x,Ya+Nr.y,Lo.x,Lo.y,g,Oo,fo.x,fo.y,ho,za),jr(Nt,ee.x,ee.y,Xr.x,Ya+Xr.y,Lo.x+Lo.w,Lo.y,g,Oo,Xo.x,fo.y,ho,za),jr(Nt,ee.x,ee.y,Mi.x,Ya+Mi.y,Lo.x,Lo.y+Lo.h,g,Oo,fo.x,Xo.y,ho,za),jr(Nt,ee.x,ee.y,Yi.x,Ya+Yi.y,Lo.x+Lo.w,Lo.y+Lo.h,g,Oo,Xo.x,Xo.y,ho,za),vi(u.dynamicLayoutVertexArray,ee,Ln),Tt.emplaceBack(jo,jo+1,jo+2),Tt.emplaceBack(jo+1,jo+2,jo+3),fn.vertexLength+=4,fn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(oa[0]),gr!==d.length-1&&Xa===d[gr+1].sectionIndex||u.programConfigurations.populatePaintArrays(Nt.length,B,B.index,{},at,cr&&cr[Xa])}u.placedSymbolArray.emplaceBack(ee.x,ee.y,_n,this.glyphOffsetArray.length-_n,Hn,be,Ne,ee.segment,g?g[0]:0,g?g[1]:0,A[0],A[1],j,0,!1,0,$e)},Fi.prototype._addCollisionDebugVertex=function(u,d,g,A,P,B){return d.emplaceBack(0,0),u.emplaceBack(g.x,g.y,A,P,Math.round(B.x),Math.round(B.y))},Fi.prototype.addCollisionDebugVertices=function(u,d,g,A,P,B,j){var ee=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),be=ee.vertexLength,Ne=P.layoutVertexArray,$e=P.collisionVertexArray,at=j.anchorX,Tt=j.anchorY;this._addCollisionDebugVertex(Ne,$e,B,at,Tt,new ce(u,d)),this._addCollisionDebugVertex(Ne,$e,B,at,Tt,new ce(g,d)),this._addCollisionDebugVertex(Ne,$e,B,at,Tt,new ce(g,A)),this._addCollisionDebugVertex(Ne,$e,B,at,Tt,new ce(u,A)),ee.vertexLength+=4;var Nt=P.indexArray;Nt.emplaceBack(be,be+1),Nt.emplaceBack(be+1,be+2),Nt.emplaceBack(be+2,be+3),Nt.emplaceBack(be+3,be),ee.primitiveLength+=4},Fi.prototype.addDebugCollisionBoxes=function(u,d,g,A){for(var P=u;P<d;P++){var B=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(B.x1,B.y1,B.x2,B.y2,A?this.textCollisionBox:this.iconCollisionBox,B.anchorPoint,g)}},Fi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Io(Rh,zg.members,jf),this.iconCollisionBox=new Io(Rh,zg.members,jf);for(var u=0;u<this.symbolInstances.length;u++){var d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}},Fi.prototype._deserializeCollisionBoxesForSymbol=function(u,d,g,A,P,B,j,ee,be){for(var Ne={},$e=d;$e<g;$e++){var at=u.get($e);Ne.textBox={x1:at.x1,y1:at.y1,x2:at.x2,y2:at.y2,anchorPointX:at.anchorPointX,anchorPointY:at.anchorPointY},Ne.textFeatureIndex=at.featureIndex;break}for(var Tt=A;Tt<P;Tt++){var Nt=u.get(Tt);Ne.verticalTextBox={x1:Nt.x1,y1:Nt.y1,x2:Nt.x2,y2:Nt.y2,anchorPointX:Nt.anchorPointX,anchorPointY:Nt.anchorPointY},Ne.verticalTextFeatureIndex=Nt.featureIndex;break}for(var fn=B;fn<j;fn++){var _n=u.get(fn);Ne.iconBox={x1:_n.x1,y1:_n.y1,x2:_n.x2,y2:_n.y2,anchorPointX:_n.anchorPointX,anchorPointY:_n.anchorPointY},Ne.iconFeatureIndex=_n.featureIndex;break}for(var Hn=ee;Hn<be;Hn++){var Ln=u.get(Hn);Ne.verticalIconBox={x1:Ln.x1,y1:Ln.y1,x2:Ln.x2,y2:Ln.y2,anchorPointX:Ln.anchorPointX,anchorPointY:Ln.anchorPointY},Ne.verticalIconFeatureIndex=Ln.featureIndex;break}return Ne},Fi.prototype.deserializeCollisionBoxes=function(u){this.collisionArrays=[];for(var d=0;d<this.symbolInstances.length;d++){var g=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}},Fi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Fi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Fi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Fi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Fi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Fi.prototype.addIndicesForPlacedSymbol=function(u,d){for(var g=u.placedSymbolArray.get(d),A=g.vertexStartIndex+4*g.numGlyphs,P=g.vertexStartIndex;P<A;P+=4)u.indexArray.emplaceBack(P,P+1,P+2),u.indexArray.emplaceBack(P+1,P+2,P+3)},Fi.prototype.getSortedSymbolIndexes=function(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var d=Math.sin(u),g=Math.cos(u),A=[],P=[],B=[],j=0;j<this.symbolInstances.length;++j){B.push(j);var ee=this.symbolInstances.get(j);A.push(0|Math.round(d*ee.anchorX+g*ee.anchorY)),P.push(ee.featureIndex)}return B.sort(function(be,Ne){return A[be]-A[Ne]||P[Ne]-P[be]}),B},Fi.prototype.addToSortKeyRanges=function(u,d){var g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===d?g.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})},Fi.prototype.sortFeatures=function(u){var d=this;if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var g=0,A=this.symbolInstanceIndexes;g<A.length;g+=1){var P=this.symbolInstances.get(A[g]);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach(function(B,j,ee){B>=0&&ee.indexOf(B)===j&&d.addIndicesForPlacedSymbol(d.text,B)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},co("SymbolBucket",Fi,{omit:["layers","collisionBoxArray","features","compareText"]}),Fi.MAX_GLYPHS=65535,Fi.addDynamicAttributes=vi;var $i=new dl({"symbol-placement":new No(Et.layout_symbol["symbol-placement"]),"symbol-spacing":new No(Et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new No(Et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new So(Et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new No(Et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new No(Et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new No(Et.layout_symbol["icon-ignore-placement"]),"icon-optional":new No(Et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new No(Et.layout_symbol["icon-rotation-alignment"]),"icon-size":new So(Et.layout_symbol["icon-size"]),"icon-text-fit":new No(Et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new No(Et.layout_symbol["icon-text-fit-padding"]),"icon-image":new So(Et.layout_symbol["icon-image"]),"icon-rotate":new So(Et.layout_symbol["icon-rotate"]),"icon-padding":new No(Et.layout_symbol["icon-padding"]),"icon-keep-upright":new No(Et.layout_symbol["icon-keep-upright"]),"icon-offset":new So(Et.layout_symbol["icon-offset"]),"icon-anchor":new So(Et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new No(Et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new No(Et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new No(Et.layout_symbol["text-rotation-alignment"]),"text-field":new So(Et.layout_symbol["text-field"]),"text-font":new So(Et.layout_symbol["text-font"]),"text-size":new So(Et.layout_symbol["text-size"]),"text-max-width":new So(Et.layout_symbol["text-max-width"]),"text-line-height":new No(Et.layout_symbol["text-line-height"]),"text-letter-spacing":new So(Et.layout_symbol["text-letter-spacing"]),"text-justify":new So(Et.layout_symbol["text-justify"]),"text-radial-offset":new So(Et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new No(Et.layout_symbol["text-variable-anchor"]),"text-anchor":new So(Et.layout_symbol["text-anchor"]),"text-max-angle":new No(Et.layout_symbol["text-max-angle"]),"text-writing-mode":new No(Et.layout_symbol["text-writing-mode"]),"text-rotate":new So(Et.layout_symbol["text-rotate"]),"text-padding":new No(Et.layout_symbol["text-padding"]),"text-keep-upright":new No(Et.layout_symbol["text-keep-upright"]),"text-transform":new So(Et.layout_symbol["text-transform"]),"text-offset":new So(Et.layout_symbol["text-offset"]),"text-allow-overlap":new No(Et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new No(Et.layout_symbol["text-ignore-placement"]),"text-optional":new No(Et.layout_symbol["text-optional"])}),na={paint:new dl({"icon-opacity":new So(Et.paint_symbol["icon-opacity"]),"icon-color":new So(Et.paint_symbol["icon-color"]),"icon-halo-color":new So(Et.paint_symbol["icon-halo-color"]),"icon-halo-width":new So(Et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new So(Et.paint_symbol["icon-halo-blur"]),"icon-translate":new No(Et.paint_symbol["icon-translate"]),"icon-translate-anchor":new No(Et.paint_symbol["icon-translate-anchor"]),"text-opacity":new So(Et.paint_symbol["text-opacity"]),"text-color":new So(Et.paint_symbol["text-color"],{runtimeType:ai,getOverride:function(u){return u.textColor},hasOverride:function(u){return!!u.textColor}}),"text-halo-color":new So(Et.paint_symbol["text-halo-color"]),"text-halo-width":new So(Et.paint_symbol["text-halo-width"]),"text-halo-blur":new So(Et.paint_symbol["text-halo-blur"]),"text-translate":new No(Et.paint_symbol["text-translate"]),"text-translate-anchor":new No(Et.paint_symbol["text-translate-anchor"])}),layout:$i},Zo=function(u){this.type=u.property.overrides?u.property.overrides.runtimeType:wi,this.defaultValue=u};Zo.prototype.evaluate=function(u){if(u.formattedSection){var d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default},Zo.prototype.eachChild=function(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)},Zo.prototype.outputDefined=function(){return!1},Zo.prototype.serialize=function(){return null},co("FormatSectionOverride",Zo,{omit:["defaultValue"]});var Ns=function(u){function d(g){u.call(this,g,na)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.recalculate=function(g,A){if(u.prototype.recalculate.call(this,g,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var P=this.layout.get("text-writing-mode");if(P){for(var B=[],j=0,ee=P;j<ee.length;j+=1){var be=ee[j];B.indexOf(be)<0&&B.push(be)}this.layout._values["text-writing-mode"]=B}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},d.prototype.getValueAndResolveTokens=function(g,A,P,B){var j=this.layout.get(g).evaluate(A,{},P,B),ee=this._unevaluatedLayout._values[g];return ee.isDataDriven()||tl(ee.value)||!j?j:function(be,Ne){return Ne.replace(/{([^{}]+)}/g,function($e,at){return at in be?String(be[at]):""})}(A.properties,j)},d.prototype.createBucket=function(g){return new Fi(g)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype._setPaintOverrides=function(){for(var g=0,A=na.paint.overridableProperties;g<A.length;g+=1){var P=A[g];if(d.hasPaintOverride(this.layout,P)){var B,j=this.paint.get(P),ee=new Zo(j),be=new fs(ee,j.property.specification);B=j.value.kind==="constant"||j.value.kind==="source"?new Cu("source",be):new os("composite",be,j.value.zoomStops,j.value._interpolationType),this.paint._values[P]=new qu(j.property,B,j.parameters)}}},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!(!this.layout||A.isDataDriven()||P.isDataDriven())&&d.hasPaintOverride(this.layout,g)},d.hasPaintOverride=function(g,A){var P=g.get("text-field"),B=na.paint.properties[A],j=!1,ee=function($e){for(var at=0,Tt=$e;at<Tt.length;at+=1)if(B.overrides&&B.overrides.hasOverride(Tt[at]))return void(j=!0)};if(P.value.kind==="constant"&&P.value.value instanceof hr)ee(P.value.value.sections);else if(P.value.kind==="source"){var be=function($e){j||($e instanceof Ii&&ei($e.value)===va?ee($e.value.sections):$e instanceof xo?ee($e.sections):$e.eachChild(be))},Ne=P.value;Ne._styleExpression&&be(Ne._styleExpression.expression)}return j},d}(Tc),Gu={paint:new dl({"background-color":new No(Et.paint_background["background-color"]),"background-pattern":new Qu(Et.paint_background["background-pattern"]),"background-opacity":new No(Et.paint_background["background-opacity"])})},tu=function(u){function d(g){u.call(this,g,Gu)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Tc),$m={paint:new dl({"raster-opacity":new No(Et.paint_raster["raster-opacity"]),"raster-hue-rotate":new No(Et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new No(Et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new No(Et.paint_raster["raster-brightness-max"]),"raster-saturation":new No(Et.paint_raster["raster-saturation"]),"raster-contrast":new No(Et.paint_raster["raster-contrast"]),"raster-resampling":new No(Et.paint_raster["raster-resampling"]),"raster-fade-duration":new No(Et.paint_raster["raster-fade-duration"])})},Cf=function(u){function d(g){u.call(this,g,$m)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Tc),n_=function(u){function d(g){u.call(this,g,{}),this.implementation=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},d.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},d.prototype.recalculate=function(){},d.prototype.updateTransitions=function(){},d.prototype.hasTransition=function(){},d.prototype.serialize=function(){},d.prototype.onAdd=function(g){this.implementation.onAdd&&this.implementation.onAdd(g,g.painter.context.gl)},d.prototype.onRemove=function(g){this.implementation.onRemove&&this.implementation.onRemove(g,g.painter.context.gl)},d}(Tc),_p={circle:O0,heatmap:Wp,hillshade:Lg,fill:Qy,"fill-extrusion":Rc,line:fv,symbol:Ns,background:tu,raster:Cf},bp=oe.HTMLImageElement,E1=oe.HTMLCanvasElement,px=oe.HTMLVideoElement,r_=oe.ImageData,S1=oe.ImageBitmap,L0=function(u,d,g,A){this.context=u,this.format=g,this.texture=u.gl.createTexture(),this.update(d,A)};L0.prototype.update=function(u,d,g){var A=u.width,P=u.height,B=!(this.size&&this.size[0]===A&&this.size[1]===P||g),j=this.context,ee=j.gl;if(this.useMipmap=!!(d&&d.useMipmap),ee.bindTexture(ee.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===ee.RGBA&&(!d||d.premultiply!==!1)),B)this.size=[A,P],u instanceof bp||u instanceof E1||u instanceof px||u instanceof r_||S1&&u instanceof S1?ee.texImage2D(ee.TEXTURE_2D,0,this.format,this.format,ee.UNSIGNED_BYTE,u):ee.texImage2D(ee.TEXTURE_2D,0,this.format,A,P,0,this.format,ee.UNSIGNED_BYTE,u.data);else{var be=g||{x:0,y:0},Ne=be.x,$e=be.y;u instanceof bp||u instanceof E1||u instanceof px||u instanceof r_||S1&&u instanceof S1?ee.texSubImage2D(ee.TEXTURE_2D,0,Ne,$e,ee.RGBA,ee.UNSIGNED_BYTE,u):ee.texSubImage2D(ee.TEXTURE_2D,0,Ne,$e,A,P,ee.RGBA,ee.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ee.generateMipmap(ee.TEXTURE_2D)},L0.prototype.bind=function(u,d,g){var A=this.context.gl;A.bindTexture(A.TEXTURE_2D,this.texture),g!==A.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=A.LINEAR),u!==this.filter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,u),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,g||u),this.filter=u),d!==this.wrap&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,d),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,d),this.wrap=d)},L0.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},L0.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var vx=function(u){var d=this;this._callback=u,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){d._triggered=!1,d._callback()})};vx.prototype.trigger=function(){var u=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){u._triggered=!1,u._callback()},0))},vx.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ym=function(u,d,g){this.target=u,this.parent=d,this.mapId=g,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ot(["receive","process"],this),this.invoker=new vx(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=De()?u:oe};function Ug(u,d,g){var A=2*Math.PI*6378137/256/Math.pow(2,g);return[u*A-2*Math.PI*6378137/2,d*A-2*Math.PI*6378137/2]}Ym.prototype.send=function(u,d,g,A,P){var B=this;P===void 0&&(P=!1);var j=Math.round(1e18*Math.random()).toString(36).substring(0,10);g&&(this.callbacks[j]=g);var ee=it(this.globalScope)?void 0:[];return this.target.postMessage({id:j,type:u,hasCallback:!!g,targetMapId:A,mustQueue:P,sourceMapId:this.mapId,data:wa(d,ee)},ee),{cancel:function(){g&&delete B.callbacks[j],B.target.postMessage({id:j,type:"<cancel>",targetMapId:A,sourceMapId:B.mapId})}}},Ym.prototype.receive=function(u){var d=u.data,g=d.id;if(g&&(!d.targetMapId||this.mapId===d.targetMapId))if(d.type==="<cancel>"){delete this.tasks[g];var A=this.cancelCallbacks[g];delete this.cancelCallbacks[g],A&&A()}else De()||d.mustQueue?(this.tasks[g]=d,this.taskQueue.push(g),this.invoker.trigger()):this.processTask(g,d)},Ym.prototype.process=function(){if(this.taskQueue.length){var u=this.taskQueue.shift(),d=this.tasks[u];delete this.tasks[u],this.taskQueue.length&&this.invoker.trigger(),d&&this.processTask(u,d)}},Ym.prototype.processTask=function(u,d){var g=this;if(d.type==="<response>"){var A=this.callbacks[u];delete this.callbacks[u],A&&(d.error?A(ns(d.error)):A(null,ns(d.data)))}else{var P=!1,B=it(this.globalScope)?void 0:[],j=d.hasCallback?function($e,at){P=!0,delete g.cancelCallbacks[u],g.target.postMessage({id:u,type:"<response>",sourceMapId:g.mapId,error:$e?wa($e):null,data:wa(at,B)},B)}:function($e){P=!0},ee=null,be=ns(d.data);if(this.parent[d.type])ee=this.parent[d.type](d.sourceMapId,be,j);else if(this.parent.getWorkerSource){var Ne=d.type.split(".");ee=this.parent.getWorkerSource(d.sourceMapId,Ne[0],be.source)[Ne[1]](be,j)}else j(new Error("Could not find function "+d.type));!P&&ee&&ee.cancel&&(this.cancelCallbacks[u]=ee.cancel)}},Ym.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ic=function(u,d){u&&(d?this.setSouthWest(u).setNorthEast(d):u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))};ic.prototype.setNorthEast=function(u){return this._ne=u instanceof wl?new wl(u.lng,u.lat):wl.convert(u),this},ic.prototype.setSouthWest=function(u){return this._sw=u instanceof wl?new wl(u.lng,u.lat):wl.convert(u),this},ic.prototype.extend=function(u){var d,g,A=this._sw,P=this._ne;if(u instanceof wl)d=u,g=u;else{if(!(u instanceof ic))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(ic.convert(u)):this.extend(wl.convert(u)):this;if(g=u._ne,!(d=u._sw)||!g)return this}return A||P?(A.lng=Math.min(d.lng,A.lng),A.lat=Math.min(d.lat,A.lat),P.lng=Math.max(g.lng,P.lng),P.lat=Math.max(g.lat,P.lat)):(this._sw=new wl(d.lng,d.lat),this._ne=new wl(g.lng,g.lat)),this},ic.prototype.getCenter=function(){return new wl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ic.prototype.getSouthWest=function(){return this._sw},ic.prototype.getNorthEast=function(){return this._ne},ic.prototype.getNorthWest=function(){return new wl(this.getWest(),this.getNorth())},ic.prototype.getSouthEast=function(){return new wl(this.getEast(),this.getSouth())},ic.prototype.getWest=function(){return this._sw.lng},ic.prototype.getSouth=function(){return this._sw.lat},ic.prototype.getEast=function(){return this._ne.lng},ic.prototype.getNorth=function(){return this._ne.lat},ic.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ic.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ic.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ic.prototype.contains=function(u){var d=wl.convert(u),g=d.lng,A=d.lat,P=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=A&&A<=this._ne.lat&&P},ic.convert=function(u){return!u||u instanceof ic?u:new ic(u)};var wl=function(u,d){if(isNaN(u)||isNaN(d))throw new Error("Invalid LngLat object: ("+u+", "+d+")");if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};wl.prototype.wrap=function(){return new wl(Y(this.lng,-180,180),this.lat)},wl.prototype.toArray=function(){return[this.lng,this.lat]},wl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},wl.prototype.distanceTo=function(u){var d=Math.PI/180,g=this.lat*d,A=u.lat*d,P=Math.sin(g)*Math.sin(A)+Math.cos(g)*Math.cos(A)*Math.cos((u.lng-this.lng)*d);return 63710088e-1*Math.acos(Math.min(P,1))},wl.prototype.toBounds=function(u){u===void 0&&(u=0);var d=360*u/40075017,g=d/Math.cos(Math.PI/180*this.lat);return new ic(new wl(this.lng-g,this.lat-d),new wl(this.lng+g,this.lat+d))},wl.convert=function(u){if(u instanceof wl)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new wl(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new wl(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Km=2*Math.PI*63710088e-1;function jg(u){return Km*Math.cos(u*Math.PI/180)}function i_(u){return(180+u)/360}function qm(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function T1(u,d){return u/jg(d)}function Qm(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}var Jp=function(u,d,g){g===void 0&&(g=0),this.x=+u,this.y=+d,this.z=+g};Jp.fromLngLat=function(u,d){d===void 0&&(d=0);var g=wl.convert(u);return new Jp(i_(g.lng),qm(g.lat),T1(d,g.lat))},Jp.prototype.toLngLat=function(){return new wl(360*this.x-180,Qm(this.y))},Jp.prototype.toAltitude=function(){return this.z*jg(Qm(this.y))},Jp.prototype.meterInMercatorCoordinateUnits=function(){return 1/Km*(u=Qm(this.y),1/Math.cos(u*Math.PI/180));var u};var xp=function(u,d,g){this.z=u,this.x=d,this.y=g,this.key=oc(0,u,u,d,g)};xp.prototype.equals=function(u){return this.z===u.z&&this.x===u.x&&this.y===u.y},xp.prototype.url=function(u,d){var g,A,P,B,j,ee=(A=this.y,P=this.z,B=Ug(256*(g=this.x),256*(A=Math.pow(2,P)-A-1),P),j=Ug(256*(g+1),256*(A+1),P),B[0]+","+B[1]+","+j[0]+","+j[1]),be=function(Ne,$e,at){for(var Tt,Nt="",fn=Ne;fn>0;fn--)Nt+=($e&(Tt=1<<fn-1)?1:0)+(at&Tt?2:0);return Nt}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",be).replace("{bbox-epsg-3857}",ee)},xp.prototype.getTilePoint=function(u){var d=Math.pow(2,this.z);return new ce(8192*(u.x*d-this.x),8192*(u.y*d-this.y))},xp.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var mx=function(u,d){this.wrap=u,this.canonical=d,this.key=oc(u,d.z,d.z,d.x,d.y)},Pu=function(u,d,g,A,P){this.overscaledZ=u,this.wrap=d,this.canonical=new xp(g,+A,+P),this.key=oc(d,u,g,A,P)};function oc(u,d,g,A,P){(u*=2)<0&&(u=-1*u-1);var B=1<<g;return(B*B*u+B*P+A).toString(36)+g.toString(36)+d.toString(36)}Pu.prototype.equals=function(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)},Pu.prototype.scaledTo=function(u){var d=this.canonical.z-u;return u>this.canonical.z?new Pu(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Pu(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)},Pu.prototype.calculateScaledKey=function(u,d){var g=this.canonical.z-u;return u>this.canonical.z?oc(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):oc(this.wrap*+d,u,u,this.canonical.x>>g,this.canonical.y>>g)},Pu.prototype.isChildOf=function(u){if(u.wrap!==this.wrap)return!1;var d=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d},Pu.prototype.children=function(u){if(this.overscaledZ>=u)return[new Pu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var d=this.canonical.z+1,g=2*this.canonical.x,A=2*this.canonical.y;return[new Pu(d,this.wrap,d,g,A),new Pu(d,this.wrap,d,g+1,A),new Pu(d,this.wrap,d,g,A+1),new Pu(d,this.wrap,d,g+1,A+1)]},Pu.prototype.isLessThan=function(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))},Pu.prototype.wrapped=function(){return new Pu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Pu.prototype.unwrapTo=function(u){return new Pu(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)},Pu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Pu.prototype.toUnwrapped=function(){return new mx(this.wrap,this.canonical)},Pu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Pu.prototype.getTilePoint=function(u){return this.canonical.getTilePoint(new Jp(u.x-this.wrap,u.y))},co("CanonicalTileID",xp),co("OverscaledTileID",Pu,{omit:["posMatrix"]});var D0=function(u,d,g){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(g&&g!=="mapbox"&&g!=="terrarium")return Ze('"'+g+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=d.height;var A=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=g||"mapbox";for(var P=0;P<A;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(A,P)]=this.data[this._idx(A-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,A)]=this.data[this._idx(P,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)]};D0.prototype.get=function(u,d){var g=new Uint8Array(this.data.buffer),A=4*this._idx(u,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(g[A],g[A+1],g[A+2])},D0.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},D0.prototype._idx=function(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)},D0.prototype._unpackMapbox=function(u,d,g){return(256*u*256+256*d+g)/10-1e4},D0.prototype._unpackTerrarium=function(u,d,g){return 256*u+d+g/256-32768},D0.prototype.getPixels=function(){return new Oc({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},D0.prototype.backfillBorder=function(u,d,g){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");var A=d*this.dim,P=d*this.dim+this.dim,B=g*this.dim,j=g*this.dim+this.dim;switch(d){case-1:A=P-1;break;case 1:P=A+1}switch(g){case-1:B=j-1;break;case 1:j=B+1}for(var ee=-d*this.dim,be=-g*this.dim,Ne=B;Ne<j;Ne++)for(var $e=A;$e<P;$e++)this.data[this._idx($e,Ne)]=u.data[this._idx($e+ee,Ne+be)]},co("DEMData",D0);var hv=function(u){this._stringToNumber={},this._numberToString=[];for(var d=0;d<u.length;d++){var g=u[d];this._stringToNumber[g]=d,this._numberToString[d]=g}};hv.prototype.encode=function(u){return this._stringToNumber[u]},hv.prototype.decode=function(u){return this._numberToString[u]};var qs=function(u,d,g,A,P){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=g,u._y=A,this.properties=u.properties,this.id=P},w1={geometry:{configurable:!0}};w1.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},w1.geometry.set=function(u){this._geometry=u},qs.prototype.toJSON=function(){var u={geometry:this.geometry};for(var d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u},Object.defineProperties(qs.prototype,w1);var e0=function(){this.state={},this.stateChanges={},this.deletedStates={}};e0.prototype.updateState=function(u,d,g){var A=String(d);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][A]=this.stateChanges[u][A]||{},le(this.stateChanges[u][A],g),this.deletedStates[u]===null)for(var P in this.deletedStates[u]={},this.state[u])P!==A&&(this.deletedStates[u][P]=null);else if(this.deletedStates[u]&&this.deletedStates[u][A]===null)for(var B in this.deletedStates[u][A]={},this.state[u][A])g[B]||(this.deletedStates[u][A][B]=null);else for(var j in g)this.deletedStates[u]&&this.deletedStates[u][A]&&this.deletedStates[u][A][j]===null&&delete this.deletedStates[u][A][j]},e0.prototype.removeFeatureState=function(u,d,g){if(this.deletedStates[u]!==null){var A=String(d);if(this.deletedStates[u]=this.deletedStates[u]||{},g&&d!==void 0)this.deletedStates[u][A]!==null&&(this.deletedStates[u][A]=this.deletedStates[u][A]||{},this.deletedStates[u][A][g]=null);else if(d!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][A])for(g in this.deletedStates[u][A]={},this.stateChanges[u][A])this.deletedStates[u][A][g]=null;else this.deletedStates[u][A]=null;else this.deletedStates[u]=null}},e0.prototype.getState=function(u,d){var g=String(d),A=le({},(this.state[u]||{})[g],(this.stateChanges[u]||{})[g]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){var P=this.deletedStates[u][d];if(P===null)return{};for(var B in P)delete A[B]}return A},e0.prototype.initializeTileState=function(u,d){u.setFeatureState(this.state,d)},e0.prototype.coalesceChanges=function(u,d){var g={};for(var A in this.stateChanges){this.state[A]=this.state[A]||{};var P={};for(var B in this.stateChanges[A])this.state[A][B]||(this.state[A][B]={}),le(this.state[A][B],this.stateChanges[A][B]),P[B]=this.state[A][B];g[A]=P}for(var j in this.deletedStates){this.state[j]=this.state[j]||{};var ee={};if(this.deletedStates[j]===null)for(var be in this.state[j])ee[be]={},this.state[j][be]={};else for(var Ne in this.deletedStates[j]){if(this.deletedStates[j][Ne]===null)this.state[j][Ne]={};else for(var $e=0,at=Object.keys(this.deletedStates[j][Ne]);$e<at.length;$e+=1)delete this.state[j][Ne][at[$e]];ee[Ne]=this.state[j][Ne]}g[j]=g[j]||{},le(g[j],ee)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(var Tt in u)u[Tt].setFeatureState(g,d)};var nd=function(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Fa(8192,16,0),this.grid3D=new Fa(8192,16,0),this.featureIndexArray=new ht,this.promoteId=d};function gx(u,d,g,A,P){return bt(u,function(B,j){var ee=d instanceof cp?d.get(j):null;return ee&&ee.evaluate?ee.evaluate(g,A,P):ee})}function em(u){for(var d=1/0,g=1/0,A=-1/0,P=-1/0,B=0,j=u;B<j.length;B+=1){var ee=j[B];d=Math.min(d,ee.x),g=Math.min(g,ee.y),A=Math.max(A,ee.x),P=Math.max(P,ee.y)}return{minX:d,minY:g,maxX:A,maxY:P}}function Gl(u,d){return d-u}nd.prototype.insert=function(u,d,g,A,P,B){var j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,A,P);for(var ee=B?this.grid3D:this.grid,be=0;be<d.length;be++){for(var Ne=d[be],$e=[1/0,1/0,-1/0,-1/0],at=0;at<Ne.length;at++){var Tt=Ne[at];$e[0]=Math.min($e[0],Tt.x),$e[1]=Math.min($e[1],Tt.y),$e[2]=Math.max($e[2],Tt.x),$e[3]=Math.max($e[3],Tt.y)}$e[0]<8192&&$e[1]<8192&&$e[2]>=0&&$e[3]>=0&&ee.insert(j,$e[0],$e[1],$e[2],$e[3])}},nd.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new mp.VectorTile(new Cr(this.rawTileData)).layers,this.sourceLayerCoder=new hv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},nd.prototype.query=function(u,d,g,A){var P=this;this.loadVTLayers();for(var B=u.params||{},j=8192/u.tileSize/u.scale,ee=Nf(B.filter),be=u.queryGeometry,Ne=u.queryPadding*j,$e=em(be),at=this.grid.query($e.minX-Ne,$e.minY-Ne,$e.maxX+Ne,$e.maxY+Ne),Tt=em(u.cameraQueryGeometry),Nt=this.grid3D.query(Tt.minX-Ne,Tt.minY-Ne,Tt.maxX+Ne,Tt.maxY+Ne,function(Ir,Nr,Xr,Mi){return function(Yi,Lo,fo,Xo,ho){for(var za=0,oa=Yi;za<oa.length;za+=1){var Oo=oa[za];if(Lo<=Oo.x&&fo<=Oo.y&&Xo>=Oo.x&&ho>=Oo.y)return!0}var Xa=[new ce(Lo,fo),new ce(Lo,ho),new ce(Xo,ho),new ce(Xo,fo)];if(Yi.length>2){for(var jo=0,Ya=Xa;jo<Ya.length;jo+=1)if(ih(Yi,Ya[jo]))return!0}for(var Vo=0;Vo<Yi.length-1;Vo++)if(Ai(Yi[Vo],Yi[Vo+1],Xa))return!0;return!1}(u.cameraQueryGeometry,Ir-Ne,Nr-Ne,Xr+Ne,Mi+Ne)}),fn=0,_n=Nt;fn<_n.length;fn+=1)at.push(_n[fn]);at.sort(Gl);for(var Hn,Ln={},cr=function(Ir){var Nr=at[Ir];if(Nr!==Hn){Hn=Nr;var Xr=P.featureIndexArray.get(Nr),Mi=null;P.loadMatchingFeature(Ln,Xr.bucketIndex,Xr.sourceLayerIndex,Xr.featureIndex,ee,B.layers,B.availableImages,d,g,A,function(Yi,Lo,fo){return Mi||(Mi=Es(Yi)),Lo.queryIntersectsFeature(be,Yi,fo,Mi,P.z,u.transform,j,u.pixelPosMatrix)})}},gr=0;gr<at.length;gr++)cr(gr);return Ln},nd.prototype.loadMatchingFeature=function(u,d,g,A,P,B,j,ee,be,Ne,$e){var at=this.bucketLayerIDs[d];if(!B||function(Yi,Lo){for(var fo=0;fo<Yi.length;fo++)if(Lo.indexOf(Yi[fo])>=0)return!0;return!1}(B,at)){var Tt=this.sourceLayerCoder.decode(g),Nt=this.vtLayers[Tt].feature(A);if(P.needGeometry){var fn=_l(Nt,!0);if(!P.filter(new ba(this.tileID.overscaledZ),fn,this.tileID.canonical))return}else if(!P.filter(new ba(this.tileID.overscaledZ),Nt))return;for(var _n=this.getId(Nt,Tt),Hn=0;Hn<at.length;Hn++){var Ln=at[Hn];if(!(B&&B.indexOf(Ln)<0)){var cr=ee[Ln];if(cr){var gr={};_n!==void 0&&Ne&&(gr=Ne.getState(cr.sourceLayer||"_geojsonTileLayer",_n));var Ir=le({},be[Ln]);Ir.paint=gx(Ir.paint,cr.paint,Nt,gr,j),Ir.layout=gx(Ir.layout,cr.layout,Nt,gr,j);var Nr=!$e||$e(Nt,cr,gr);if(Nr){var Xr=new qs(Nt,this.z,this.x,this.y,_n);Xr.layer=Ir;var Mi=u[Ln];Mi===void 0&&(Mi=u[Ln]=[]),Mi.push({featureIndex:A,feature:Xr,intersectionZ:Nr})}}}}}},nd.prototype.lookupSymbolFeatures=function(u,d,g,A,P,B,j,ee){var be={};this.loadVTLayers();for(var Ne=Nf(P),$e=0,at=u;$e<at.length;$e+=1)this.loadMatchingFeature(be,g,A,at[$e],Ne,B,j,ee,d);return be},nd.prototype.hasLayer=function(u){for(var d=0,g=this.bucketLayerIDs;d<g.length;d+=1)for(var A=0,P=g[d];A<P.length;A+=1)if(u===P[A])return!0;return!1},nd.prototype.getId=function(u,d){var g=u.id;return this.promoteId&&typeof(g=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]])=="boolean"&&(g=Number(g)),g},co("FeatureIndex",nd,{omit:["rawTileData","sourceLayerCoder"]});var Qs=function(u,d){this.tileID=u,this.uid=_e(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Qs.prototype.registerFadeDuration=function(u){var d=u+this.timeAdded;d<$n.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)},Qs.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Qs.prototype.loadVectorData=function(u,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){for(var A in u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(Ne,$e){var at={};if(!$e)return at;for(var Tt=function(){var _n=fn[Nt],Hn=_n.layerIds.map(function(gr){return $e.getLayer(gr)}).filter(Boolean);if(Hn.length!==0){_n.layers=Hn,_n.stateDependentLayerIds&&(_n.stateDependentLayers=_n.stateDependentLayerIds.map(function(gr){return Hn.filter(function(Ir){return Ir.id===gr})[0]}));for(var Ln=0,cr=Hn;Ln<cr.length;Ln+=1)at[cr[Ln].id]=_n}},Nt=0,fn=Ne;Nt<fn.length;Nt+=1)Tt();return at}(u.buckets,d.style),this.hasSymbolBuckets=!1,this.buckets){var P=this.buckets[A];if(P instanceof Fi){if(this.hasSymbolBuckets=!0,!g)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var B in this.buckets){var j=this.buckets[B];if(j instanceof Fi&&j.hasRTLText){this.hasRTLText=!0,zc.isLoading()||zc.isLoaded()||iv()!=="deferred"||dc();break}}for(var ee in this.queryPadding=0,this.buckets){var be=this.buckets[ee];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(ee).queryRadius(be))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new S},Qs.prototype.unloadVectorData=function(){for(var u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Qs.prototype.getBucket=function(u){return this.buckets[u.id]},Qs.prototype.upload=function(u){for(var d in this.buckets){var g=this.buckets[d];g.uploadPending()&&g.upload(u)}var A=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new L0(u,this.imageAtlas.image,A.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new L0(u,this.glyphAtlasImage,A.ALPHA),this.glyphAtlasImage=null)},Qs.prototype.prepare=function(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)},Qs.prototype.queryRenderedFeatures=function(u,d,g,A,P,B,j,ee,be,Ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:A,cameraQueryGeometry:P,scale:B,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:ee,params:j,queryPadding:this.queryPadding*be},u,d,g):{}},Qs.prototype.querySourceFeatures=function(u,d){var g=this.latestFeatureIndex;if(g&&g.rawTileData){var A=g.loadVTLayers(),P=d?d.sourceLayer:"",B=A._geojsonTileLayer||A[P];if(B)for(var j=Nf(d&&d.filter),ee=this.tileID.canonical,be=ee.z,Ne=ee.x,$e=ee.y,at={z:be,x:Ne,y:$e},Tt=0;Tt<B.length;Tt++){var Nt=B.feature(Tt);if(j.needGeometry){var fn=_l(Nt,!0);if(!j.filter(new ba(this.tileID.overscaledZ),fn,this.tileID.canonical))continue}else if(!j.filter(new ba(this.tileID.overscaledZ),Nt))continue;var _n=g.getId(Nt,P),Hn=new qs(Nt,be,Ne,$e,_n);Hn.tile=at,u.push(Hn)}}},Qs.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Qs.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Qs.prototype.setExpiryData=function(u){var d=this.expirationTime;if(u.cacheControl){var g=St(u.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){var A=Date.now(),P=!1;if(this.expirationTime>A)P=!1;else if(d)if(this.expirationTime<d)P=!0;else{var B=this.expirationTime-d;B?this.expirationTime=A+Math.max(B,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Qs.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Qs.prototype.setFeatureState=function(u,d){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(u).length!==0){var g=this.latestFeatureIndex.loadVTLayers();for(var A in this.buckets)if(d.style.hasLayer(A)){var P=this.buckets[A],B=P.layers[0].sourceLayer||"_geojsonTileLayer",j=g[B],ee=u[B];if(j&&ee&&Object.keys(ee).length!==0){P.update(ee,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});var be=d&&d.style&&d.style.getLayer(A);be&&(this.queryPadding=Math.max(this.queryPadding,be.queryRadius(P)))}}}},Qs.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Qs.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$n.now()},Qs.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Qs.prototype.setHoldDuration=function(u){this.symbolFadeHoldUntil=$n.now()+u},Qs.prototype.setDependencies=function(u,d){for(var g={},A=0,P=d;A<P.length;A+=1)g[P[A]]=!0;this.dependencies[u]=g},Qs.prototype.hasDependency=function(u,d){for(var g=0,A=u;g<A.length;g+=1){var P=this.dependencies[A[g]];if(P){for(var B=0,j=d;B<j.length;B+=1)if(P[j[B]])return!0}}return!1};var ya=oe.performance,tm=function(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},ya.mark(this._marks.start)};tm.prototype.finish=function(){ya.mark(this._marks.end);var u=ya.getEntriesByName(this._marks.measure);return u.length===0&&(ya.measure(this._marks.measure,this._marks.start,this._marks.end),u=ya.getEntriesByName(this._marks.measure),ya.clearMarks(this._marks.start),ya.clearMarks(this._marks.end),ya.clearMeasures(this._marks.measure)),u},E.Actor=Ym,E.AlphaImage=kd,E.CanonicalTileID=xp,E.CollisionBoxArray=S,E.Color=yn,E.DEMData=D0,E.DataConstantProperty=No,E.DictionaryCoder=hv,E.EXTENT=8192,E.ErrorEvent=$t,E.EvaluationParameters=ba,E.Event=wt,E.Evented=vn,E.FeatureIndex=nd,E.FillBucket=Gf,E.FillExtrusionBucket=mc,E.ImageAtlas=Yr,E.ImagePosition=Qi,E.LineBucket=Mc,E.LngLat=wl,E.LngLatBounds=ic,E.MercatorCoordinate=Jp,E.ONE_EM=24,E.OverscaledTileID=Pu,E.Point=ce,E.Point$1=ce,E.Properties=dl,E.Protobuf=Cr,E.RGBAImage=Oc,E.RequestManager=zt,E.RequestPerformance=tm,E.ResourceType=Fe,E.SegmentVector=Ht,E.SourceFeatureState=e0,E.StructArrayLayout1ui2=Yh,E.StructArrayLayout2f1f2i16=$h,E.StructArrayLayout2i4=Xh,E.StructArrayLayout3ui6=zf,E.StructArrayLayout4i8=fp,E.SymbolBucket=Fi,E.Texture=L0,E.Tile=Qs,E.Transitionable=gu,E.Uniform1f=Ni,E.Uniform1i=ti,E.Uniform2f=Pi,E.Uniform3f=lo,E.Uniform4f=zo,E.UniformColor=Wo,E.UniformMatrix4f=as,E.UnwrappedTileID=mx,E.ValidationError=Kt,E.WritingMode=Fo,E.ZoomHistory=y0,E.add=function(u,d,g){return u[0]=d[0]+g[0],u[1]=d[1]+g[1],u[2]=d[2]+g[2],u},E.addDynamicAttributes=vi,E.asyncAll=function(u,d,g){if(!u.length)return g(null,[]);var A=u.length,P=new Array(u.length),B=null;u.forEach(function(j,ee){d(j,function(be,Ne){be&&(B=be),P[ee]=Ne,--A==0&&g(B,P)})})},E.bezier=re,E.bindAll=Ot,E.browser=$n,E.cacheEntryPossiblyAdded=function(u){++vt>Rt&&(u.getActor().send("enforceCacheSizeLimit",_t),vt=0)},E.clamp=Re,E.clearTileCache=function(u){var d=oe.caches.delete("mapbox-tiles");u&&d.catch(u).then(function(){return u()})},E.clipLine=Ih,E.clone=function(u){var d=new Ga(16);return d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},E.clone$1=we,E.clone$2=function(u){var d=new Ga(3);return d[0]=u[0],d[1]=u[1],d[2]=u[2],d},E.collisionCircleLayout=He,E.config=nr,E.create=function(){var u=new Ga(16);return Ga!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},E.create$1=function(){var u=new Ga(9);return Ga!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u},E.create$2=function(){var u=new Ga(4);return Ga!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u},E.createCommonjsModule=he,E.createExpression=ja,E.createLayout=yu,E.createStyleLayer=function(u){return u.type==="custom"?new n_(u):new _p[u.type](u)},E.cross=function(u,d,g){var A=d[0],P=d[1],B=d[2],j=g[0],ee=g[1],be=g[2];return u[0]=P*be-B*ee,u[1]=B*j-A*be,u[2]=A*ee-P*j,u},E.deepEqual=function u(d,g){if(Array.isArray(d)){if(!Array.isArray(g)||d.length!==g.length)return!1;for(var A=0;A<d.length;A++)if(!u(d[A],g[A]))return!1;return!0}if(typeof d=="object"&&d!==null&&g!==null){if(typeof g!="object"||Object.keys(d).length!==Object.keys(g).length)return!1;for(var P in d)if(!u(d[P],g[P]))return!1;return!0}return d===g},E.dot=function(u,d){return u[0]*d[0]+u[1]*d[1]+u[2]*d[2]},E.dot$1=function(u,d){return u[0]*d[0]+u[1]*d[1]+u[2]*d[2]+u[3]*d[3]},E.ease=me,E.emitValidationErrors=xs,E.endsWith=dt,E.enforceCacheSizeLimit=function(u){wn(),Yt&&Yt.then(function(d){d.keys().then(function(g){for(var A=0;A<g.length-u;A++)d.delete(g[A])})})},E.evaluateSizeForFeature=Kr,E.evaluateSizeForZoom=Dl,E.evaluateVariableOffset=Jn,E.evented=x0,E.extend=le,E.featureFilter=Nf,E.filterObject=Me,E.fromRotation=function(u,d){var g=Math.sin(d),A=Math.cos(d);return u[0]=A,u[1]=g,u[2]=0,u[3]=-g,u[4]=A,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},E.getAnchorAlignment=Ks,E.getAnchorJustification=or,E.getArrayBuffer=yr,E.getImage=Te,E.getJSON=function(u,d){return Yn(le(u,{type:"json"}),d)},E.getRTLTextPluginStatus=iv,E.getReferrer=It,E.getVideo=function(u,d){var g,A,P=oe.document.createElement("video");P.muted=!0,P.onloadstart=function(){d(null,P)};for(var B=0;B<u.length;B++){var j=oe.document.createElement("source");g=u[B],A=void 0,(A=oe.document.createElement("a")).href=g,(A.protocol!==oe.document.location.protocol||A.host!==oe.document.location.host)&&(P.crossOrigin="Anonymous"),j.src=u[B],P.appendChild(j)}return{cancel:function(){}}},E.identity=Hl,E.invert=function(u,d){var g=d[0],A=d[1],P=d[2],B=d[3],j=d[4],ee=d[5],be=d[6],Ne=d[7],$e=d[8],at=d[9],Tt=d[10],Nt=d[11],fn=d[12],_n=d[13],Hn=d[14],Ln=d[15],cr=g*ee-A*j,gr=g*be-P*j,Ir=g*Ne-B*j,Nr=A*be-P*ee,Xr=A*Ne-B*ee,Mi=P*Ne-B*be,Yi=$e*_n-at*fn,Lo=$e*Hn-Tt*fn,fo=$e*Ln-Nt*fn,Xo=at*Hn-Tt*_n,ho=at*Ln-Nt*_n,za=Tt*Ln-Nt*Hn,oa=cr*za-gr*ho+Ir*Xo+Nr*fo-Xr*Lo+Mi*Yi;return oa?(u[0]=(ee*za-be*ho+Ne*Xo)*(oa=1/oa),u[1]=(P*ho-A*za-B*Xo)*oa,u[2]=(_n*Mi-Hn*Xr+Ln*Nr)*oa,u[3]=(Tt*Xr-at*Mi-Nt*Nr)*oa,u[4]=(be*fo-j*za-Ne*Lo)*oa,u[5]=(g*za-P*fo+B*Lo)*oa,u[6]=(Hn*Ir-fn*Mi-Ln*gr)*oa,u[7]=($e*Mi-Tt*Ir+Nt*gr)*oa,u[8]=(j*ho-ee*fo+Ne*Yi)*oa,u[9]=(A*fo-g*ho-B*Yi)*oa,u[10]=(fn*Xr-_n*Ir+Ln*cr)*oa,u[11]=(at*Ir-$e*Xr-Nt*cr)*oa,u[12]=(ee*Lo-j*Xo-be*Yi)*oa,u[13]=(g*Xo-A*Lo+P*Yi)*oa,u[14]=(_n*gr-fn*Nr-Hn*cr)*oa,u[15]=($e*Nr-at*gr+Tt*cr)*oa,u):null},E.isChar=Zi,E.isMapboxURL=kt,E.keysDifference=function(u,d){var g=[];for(var A in u)A in d||g.push(A);return g},E.makeRequest=Yn,E.mapObject=bt,E.mercatorXfromLng=i_,E.mercatorYfromLat=qm,E.mercatorZfromAltitude=T1,E.mul=Vp,E.multiply=Jl,E.mvt=mp,E.nextPowerOfTwo=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},E.normalize=function(u,d){var g=d[0],A=d[1],P=d[2],B=g*g+A*A+P*P;return B>0&&(B=1/Math.sqrt(B)),u[0]=d[0]*B,u[1]=d[1]*B,u[2]=d[2]*B,u},E.number=Cs,E.offscreenCanvasSupported=Ee,E.ortho=function(u,d,g,A,P,B,j){var ee=1/(d-g),be=1/(A-P),Ne=1/(B-j);return u[0]=-2*ee,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*be,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*Ne,u[11]=0,u[12]=(d+g)*ee,u[13]=(P+A)*be,u[14]=(j+B)*Ne,u[15]=1,u},E.parseGlyphPBF=function(u){return new Cr(u).readFields(si,[])},E.pbf=Cr,E.performSymbolLayout=function(u,d,g,A,P,B,j){u.createArrays(),u.tilePixelRatio=8192/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;var ee=u.layers[0].layout,be=u.layers[0]._unevaluatedLayout._values,Ne={};if(u.textSizeData.kind==="composite"){var $e=u.textSizeData,at=$e.maxZoom;Ne.compositeTextSizes=[be["text-size"].possiblyEvaluate(new ba($e.minZoom),j),be["text-size"].possiblyEvaluate(new ba(at),j)]}if(u.iconSizeData.kind==="composite"){var Tt=u.iconSizeData,Nt=Tt.maxZoom;Ne.compositeIconSizes=[be["icon-size"].possiblyEvaluate(new ba(Tt.minZoom),j),be["icon-size"].possiblyEvaluate(new ba(Nt),j)]}Ne.layoutTextSize=be["text-size"].possiblyEvaluate(new ba(u.zoom+1),j),Ne.layoutIconSize=be["icon-size"].possiblyEvaluate(new ba(u.zoom+1),j),Ne.textMaxSize=be["text-size"].possiblyEvaluate(new ba(18));for(var fn=24*ee.get("text-line-height"),_n=ee.get("text-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",Hn=ee.get("text-keep-upright"),Ln=ee.get("text-size"),cr=function(){var Nr=Ir[gr],Xr=ee.get("text-font").evaluate(Nr,{},j).join(","),Mi=Ln.evaluate(Nr,{},j),Yi=Ne.layoutTextSize.evaluate(Nr,{},j),Lo=Ne.layoutIconSize.evaluate(Nr,{},j),fo={horizontal:{},vertical:void 0},Xo=Nr.text,ho=[0,0];if(Xo){var za=Xo.toString(),oa=24*ee.get("text-letter-spacing").evaluate(Nr,{},j),Oo=function(Ka){for(var Js=0,Xs=Ka;Js<Xs.length;Js+=1)if(ys=Xs[Js].charCodeAt(0),Zi.Arabic(ys)||Zi["Arabic Supplement"](ys)||Zi["Arabic Extended-A"](ys)||Zi["Arabic Presentation Forms-A"](ys)||Zi["Arabic Presentation Forms-B"](ys))return!1;var ys;return!0}(za)?oa:0,Xa=ee.get("text-anchor").evaluate(Nr,{},j),jo=ee.get("text-variable-anchor");if(!jo){var Ya=ee.get("text-radial-offset").evaluate(Nr,{},j);ho=Ya?Jn(Xa,[24*Ya,Vn]):ee.get("text-offset").evaluate(Nr,{},j).map(function(Ka){return 24*Ka})}var Vo=_n?"center":ee.get("text-justify").evaluate(Nr,{},j),Is=ee.get("symbol-placement"),rl=Is==="point"?24*ee.get("text-max-width").evaluate(Nr,{},j):0,Zl=function(){u.allowVerticalPlacement&&Ef(za)&&(fo.vertical=ca(Xo,d,g,P,Xr,rl,fn,Xa,"left",Oo,ho,Fo.vertical,!0,Is,Yi,Mi))};if(!_n&&jo){for(var Nl=Vo==="auto"?jo.map(function(Ka){return or(Ka)}):[Vo],Al=!1,nu=0;nu<Nl.length;nu++){var hu=Nl[nu];if(!fo.horizontal[hu])if(Al)fo.horizontal[hu]=fo.horizontal[0];else{var bu=ca(Xo,d,g,P,Xr,rl,fn,"center",hu,Oo,ho,Fo.horizontal,!1,Is,Yi,Mi);bu&&(fo.horizontal[hu]=bu,Al=bu.positionedLines.length===1)}}Zl()}else{Vo==="auto"&&(Vo=or(Xa));var Vc=ca(Xo,d,g,P,Xr,rl,fn,Xa,Vo,Oo,ho,Fo.horizontal,!1,Is,Yi,Mi);Vc&&(fo.horizontal[Vo]=Vc),Zl(),Ef(za)&&_n&&Hn&&(fo.vertical=ca(Xo,d,g,P,Xr,rl,fn,Xa,Vo,Oo,ho,Fo.vertical,!1,Is,Yi,Mi))}}var Iu=void 0,Hc=!1;if(Nr.icon&&Nr.icon.name){var Xl=A[Nr.icon.name];Xl&&(Iu=function(Ka,Js,Xs){var ys=Ks(Xs),Wc=Js[0]-Ka.displaySize[0]*ys.horizontalAlign,gc=Js[1]-Ka.displaySize[1]*ys.verticalAlign;return{image:Ka,top:gc,bottom:gc+Ka.displaySize[1],left:Wc,right:Wc+Ka.displaySize[0]}}(P[Nr.icon.name],ee.get("icon-offset").evaluate(Nr,{},j),ee.get("icon-anchor").evaluate(Nr,{},j)),Hc=Xl.sdf,u.sdfIcons===void 0?u.sdfIcons=Xl.sdf:u.sdfIcons!==Xl.sdf&&Ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xl.pixelRatio!==u.pixelRatio||ee.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0))}var ac=Gn(fo.horizontal)||fo.vertical;u.iconsInText=!!ac&&ac.iconsInText,(ac||Iu)&&function(Ka,Js,Xs,ys,Wc,gc,vl,du,xu,Ss,js){var sh=gc.textMaxSize.evaluate(Js,{});sh===void 0&&(sh=vl);var jd,ml=Ka.layers[0].layout,lh=ml.get("icon-offset").evaluate(Js,{},js),Gc=Gn(Xs.horizontal),Vd=vl/24,Zf=Ka.tilePixelRatio*Vd,Ep=Ka.tilePixelRatio*sh/24,Lh=Ka.tilePixelRatio*du,Dh=Ka.tilePixelRatio*ml.get("symbol-spacing"),N0=ml.get("text-padding")*Ka.tilePixelRatio,Xf=ml.get("icon-padding")*Ka.tilePixelRatio,nm=ml.get("text-max-angle")/180*Math.PI,Vg=ml.get("text-rotation-alignment")==="map"&&ml.get("symbol-placement")!=="point",o_=ml.get("icon-rotation-alignment")==="map"&&ml.get("symbol-placement")!=="point",rd=ml.get("symbol-placement"),t0=Dh/2,dv=ml.get("icon-text-fit");ys&&dv!=="none"&&(Ka.allowVerticalPlacement&&Xs.vertical&&(jd=eu(ys,Xs.vertical,dv,ml.get("icon-text-fit-padding"),lh,Vd)),Gc&&(ys=eu(ys,Gc,dv,ml.get("icon-text-fit-padding"),lh,Vd)));var B0=function(eg,mv){mv.x<0||mv.x>=8192||mv.y<0||mv.y>=8192||function(Ts,uh,A1,r0,Gg,c_,Zg,lf,Xg,tg,i0,$g,Yg,f_,ng,yx,_x,O1,h_,d_,Nh,rg,Wd,Tp,Kg){var C1,ch,Lu,gv,lm,o0=Ts.addToLineVertexArray(uh,A1),yv=0,bx=0,p_=0,v_=0,ig=-1,R1=-1,fh={},qg=an(""),og=0,ag=0;if(lf._unevaluatedLayout.getValue("text-radial-offset")===void 0?(og=(C1=lf.layout.get("text-offset").evaluate(Nh,{},Tp).map(function(l0){return 24*l0}))[0],ag=C1[1]):(og=24*lf.layout.get("text-radial-offset").evaluate(Nh,{},Tp),ag=Vn),Ts.allowVerticalPlacement&&r0.vertical){var Ol=lf.layout.get("text-rotate").evaluate(Nh,{},Tp)+90;gv=new Ps(Xg,uh,tg,i0,$g,r0.vertical,Yg,f_,ng,Ol),Zg&&(lm=new Ps(Xg,uh,tg,i0,$g,Zg,_x,O1,ng,Ol))}if(Gg){var m_=lf.layout.get("icon-rotate").evaluate(Nh,{}),g_=lf.layout.get("icon-text-fit")!=="none",eS=gn(Gg,m_,Wd,g_),xx=Zg?gn(Zg,m_,Wd,g_):void 0;Lu=new Ps(Xg,uh,tg,i0,$g,Gg,_x,O1,!1,m_),yv=4*eS.length;var M1=Ts.iconSizeData,a0=null;M1.kind==="source"?(a0=[128*lf.layout.get("icon-size").evaluate(Nh,{})])[0]>32640&&Ze(Ts.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):M1.kind==="composite"&&((a0=[128*rg.compositeIconSizes[0].evaluate(Nh,{},Tp),128*rg.compositeIconSizes[1].evaluate(Nh,{},Tp)])[0]>32640||a0[1]>32640)&&Ze(Ts.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Ts.addSymbols(Ts.icon,eS,a0,d_,h_,Nh,!1,uh,o0.lineStartIndex,o0.lineLength,-1,Tp),ig=Ts.icon.placedSymbolArray.length-1,xx&&(bx=4*xx.length,Ts.addSymbols(Ts.icon,xx,a0,d_,h_,Nh,Fo.vertical,uh,o0.lineStartIndex,o0.lineLength,-1,Tp),R1=Ts.icon.placedSymbolArray.length-1)}for(var tS in r0.horizontal){var Ls=r0.horizontal[tS];if(!ch){qg=an(Ls.text);var Ex=lf.layout.get("text-rotate").evaluate(Nh,{},Tp);ch=new Ps(Xg,uh,tg,i0,$g,Ls,Yg,f_,ng,Ex)}var nS=Ls.positionedLines.length===1;if(p_+=xn(Ts,uh,Ls,c_,lf,ng,Nh,yx,o0,r0.vertical?Fo.horizontal:Fo.horizontalOnly,nS?Object.keys(r0.horizontal):[tS],fh,ig,rg,Tp),nS)break}r0.vertical&&(v_+=xn(Ts,uh,r0.vertical,c_,lf,ng,Nh,yx,o0,Fo.vertical,["vertical"],fh,R1,rg,Tp));var Gd=ch?ch.boxStartIndex:Ts.collisionBoxArray.length,s0=ch?ch.boxEndIndex:Ts.collisionBoxArray.length,sg=gv?gv.boxStartIndex:Ts.collisionBoxArray.length,P1=gv?gv.boxEndIndex:Ts.collisionBoxArray.length,_v=Lu?Lu.boxStartIndex:Ts.collisionBoxArray.length,Qg=Lu?Lu.boxEndIndex:Ts.collisionBoxArray.length,Sx=lm?lm.boxStartIndex:Ts.collisionBoxArray.length,rS=lm?lm.boxEndIndex:Ts.collisionBoxArray.length,wp=-1,z0=function(l0,ii){return l0&&l0.circleDiameter?Math.max(l0.circleDiameter,ii):ii};wp=z0(ch,wp),wp=z0(gv,wp),wp=z0(Lu,wp);var bv=(wp=z0(lm,wp))>-1?1:0;bv&&(wp*=Kg/24),Ts.glyphOffsetArray.length>=Fi.MAX_GLYPHS&&Ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Nh.sortKey!==void 0&&Ts.addToSortKeyRanges(Ts.symbolInstances.length,Nh.sortKey),Ts.symbolInstances.emplaceBack(uh.x,uh.y,fh.right>=0?fh.right:-1,fh.center>=0?fh.center:-1,fh.left>=0?fh.left:-1,fh.vertical||-1,ig,R1,qg,Gd,s0,sg,P1,_v,Qg,Sx,rS,tg,p_,v_,yv,bx,bv,0,Yg,og,ag,wp)}(Ka,mv,eg,Xs,ys,Wc,jd,Ka.layers[0],Ka.collisionBoxArray,Js.index,Js.sourceLayerIndex,Ka.index,Zf,N0,Vg,xu,Lh,Xf,o_,lh,Js,gc,Ss,js,vl)};if(rd==="line")for(var pv=0,rm=Ih(Js.geometry,0,0,8192,8192);pv<rm.length;pv+=1)for(var a_=rm[pv],Jm=0,n0=fu(a_,Dh,nm,Xs.vertical||Gc,ys,24,Ep,Ka.overscaling,8192);Jm<n0.length;Jm+=1){var F0=n0[Jm];Gc&&tn(Ka,Gc.text,t0,F0)||B0(a_,F0)}else if(rd==="line-center")for(var im=0,k0=Js.geometry;im<k0.length;im+=1){var om=k0[im];if(om.length>1){var s_=ds(om,nm,Xs.vertical||Gc,ys,24,Ep);s_&&B0(om,s_)}}else if(Js.type==="Polygon")for(var yc=0,vv=Ph(Js.geometry,0);yc<vv.length;yc+=1){var am=vv[yc],sm=Mn(am,16);B0(am[0],new rs(sm.x,sm.y,0))}else if(Js.type==="LineString")for(var Sp=0,Hd=Js.geometry;Sp<Hd.length;Sp+=1){var id=Hd[Sp];B0(id,new rs(id[0].x,id[0].y,0))}else if(Js.type==="Point")for(var Hg=0,l_=Js.geometry;Hg<l_.length;Hg+=1)for(var u_=0,od=l_[Hg];u_<od.length;u_+=1){var Wg=od[u_];B0([Wg],new rs(Wg.x,Wg.y,0))}}(u,Nr,fo,Iu,A,Ne,Yi,Lo,ho,Hc,j)},gr=0,Ir=u.features;gr<Ir.length;gr+=1)cr();B&&u.generateCollisionDebugBuffers()},E.perspective=function(u,d,g,A,P){var B,j=1/Math.tan(d/2);return u[0]=j/g,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=j,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,P!=null&&P!==1/0?(u[10]=(P+A)*(B=1/(A-P)),u[14]=2*P*A*B):(u[10]=-1,u[14]=-2*A),u},E.pick=function(u,d){for(var g={},A=0;A<d.length;A++){var P=d[A];P in u&&(g[P]=u[P])}return g},E.plugin=zc,E.polygonIntersectsPolygon=Vf,E.postMapLoadEvent=dn,E.postTurnstileEvent=Wn,E.potpack=ua,E.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],E.register=co,E.registerForPluginStateChange=function(u){return u({pluginStatus:Ku,pluginURL:th}),x0.on("pluginStateChange",u),u},E.renderColorRamp=Hv,E.rotate=function(u,d,g){var A=d[0],P=d[1],B=d[2],j=d[3],ee=Math.sin(g),be=Math.cos(g);return u[0]=A*be+B*ee,u[1]=P*be+j*ee,u[2]=A*-ee+B*be,u[3]=P*-ee+j*be,u},E.rotateX=function(u,d,g){var A=Math.sin(g),P=Math.cos(g),B=d[4],j=d[5],ee=d[6],be=d[7],Ne=d[8],$e=d[9],at=d[10],Tt=d[11];return d!==u&&(u[0]=d[0],u[1]=d[1],u[2]=d[2],u[3]=d[3],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15]),u[4]=B*P+Ne*A,u[5]=j*P+$e*A,u[6]=ee*P+at*A,u[7]=be*P+Tt*A,u[8]=Ne*P-B*A,u[9]=$e*P-j*A,u[10]=at*P-ee*A,u[11]=Tt*P-be*A,u},E.rotateZ=function(u,d,g){var A=Math.sin(g),P=Math.cos(g),B=d[0],j=d[1],ee=d[2],be=d[3],Ne=d[4],$e=d[5],at=d[6],Tt=d[7];return d!==u&&(u[8]=d[8],u[9]=d[9],u[10]=d[10],u[11]=d[11],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15]),u[0]=B*P+Ne*A,u[1]=j*P+$e*A,u[2]=ee*P+at*A,u[3]=be*P+Tt*A,u[4]=Ne*P-B*A,u[5]=$e*P-j*A,u[6]=at*P-ee*A,u[7]=Tt*P-be*A,u},E.scale=function(u,d,g){var A=g[0],P=g[1],B=g[2];return u[0]=d[0]*A,u[1]=d[1]*A,u[2]=d[2]*A,u[3]=d[3]*A,u[4]=d[4]*P,u[5]=d[5]*P,u[6]=d[6]*P,u[7]=d[7]*P,u[8]=d[8]*B,u[9]=d[9]*B,u[10]=d[10]*B,u[11]=d[11]*B,u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15],u},E.scale$1=function(u,d,g){return u[0]=d[0]*g,u[1]=d[1]*g,u[2]=d[2]*g,u[3]=d[3]*g,u},E.scale$2=function(u,d,g){return u[0]=d[0]*g,u[1]=d[1]*g,u[2]=d[2]*g,u},E.setCacheLimits=function(u,d){_t=u,Rt=d},E.setRTLTextPlugin=function(u,d,g){if(g===void 0&&(g=!1),Ku==="deferred"||Ku==="loading"||Ku==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");th=$n.resolveURL(u),Ku="deferred",Oh=d,Ld(),g||dc()},E.sphericalToCartesian=function(u){var d=u[0],g=u[1],A=u[2];return g+=90,g*=Math.PI/180,A*=Math.PI/180,{x:d*Math.cos(g)*Math.sin(A),y:d*Math.sin(g)*Math.sin(A),z:d*Math.cos(A)}},E.sqrLen=function(u){var d=u[0],g=u[1];return d*d+g*g},E.styleSpec=Et,E.sub=function(u,d,g){return u[0]=d[0]-g[0],u[1]=d[1]-g[1],u[2]=d[2]-g[2],u},E.symbolSize=Sa,E.transformMat3=function(u,d,g){var A=d[0],P=d[1],B=d[2];return u[0]=A*g[0]+P*g[3]+B*g[6],u[1]=A*g[1]+P*g[4]+B*g[7],u[2]=A*g[2]+P*g[5]+B*g[8],u},E.transformMat4=oh,E.translate=function(u,d,g){var A,P,B,j,ee,be,Ne,$e,at,Tt,Nt,fn,_n=g[0],Hn=g[1],Ln=g[2];return d===u?(u[12]=d[0]*_n+d[4]*Hn+d[8]*Ln+d[12],u[13]=d[1]*_n+d[5]*Hn+d[9]*Ln+d[13],u[14]=d[2]*_n+d[6]*Hn+d[10]*Ln+d[14],u[15]=d[3]*_n+d[7]*Hn+d[11]*Ln+d[15]):(P=d[1],B=d[2],j=d[3],ee=d[4],be=d[5],Ne=d[6],$e=d[7],at=d[8],Tt=d[9],Nt=d[10],fn=d[11],u[0]=A=d[0],u[1]=P,u[2]=B,u[3]=j,u[4]=ee,u[5]=be,u[6]=Ne,u[7]=$e,u[8]=at,u[9]=Tt,u[10]=Nt,u[11]=fn,u[12]=A*_n+ee*Hn+at*Ln+d[12],u[13]=P*_n+be*Hn+Tt*Ln+d[13],u[14]=B*_n+Ne*Hn+Nt*Ln+d[14],u[15]=j*_n+$e*Hn+fn*Ln+d[15]),u},E.triggerPluginCompletionEvent=b0,E.uniqueId=_e,E.validateCustomStyleLayer=function(u){var d=[],g=u.id;return g===void 0&&d.push({message:"layers."+g+': missing required property "id"'}),u.render===void 0&&d.push({message:"layers."+g+': missing required method "render"'}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&d.push({message:"layers."+g+': property "renderingMode" must be either "2d" or "3d"'}),d},E.validateLight=qi,E.validateStyle=yi,E.values=function(u){var d=[];for(var g in u)d.push(u[g]);return d},E.vectorTile=mp,E.version="1.13.3",E.warnOnce=Ze,E.webpSupported=Ft,E.window=oe,E.wrap=Y}),G(["./shared"],function(E){"use strict";function he(Pe){var Te=typeof Pe;if(Te==="number"||Te==="boolean"||Te==="string"||Pe==null)return JSON.stringify(Pe);if(Array.isArray(Pe)){for(var Ue="[",ot=0,wt=Pe;ot<wt.length;ot+=1)Ue+=he(wt[ot])+",";return Ue+"]"}for(var $t=Object.keys(Pe).sort(),vn="{",Et=0;Et<$t.length;Et++)vn+=JSON.stringify($t[Et])+":"+he(Pe[$t[Et]])+",";return vn+"}"}function ne(Pe){for(var Te="",Ue=0,ot=E.refProperties;Ue<ot.length;Ue+=1)Te+="/"+he(Pe[ot[Ue]]);return Te}var ue=function(Pe){this.keyCache={},Pe&&this.replace(Pe)};ue.prototype.replace=function(Pe){this._layerConfigs={},this._layers={},this.update(Pe,[])},ue.prototype.update=function(Pe,Te){for(var Ue=this,ot=0,wt=Pe;ot<wt.length;ot+=1){var $t=wt[ot];this._layerConfigs[$t.id]=$t;var vn=this._layers[$t.id]=E.createStyleLayer($t);vn._featureFilter=E.featureFilter(vn.filter),this.keyCache[$t.id]&&delete this.keyCache[$t.id]}for(var Et=0,Kt=Te;Et<Kt.length;Et+=1){var Qn=Kt[Et];delete this.keyCache[Qn],delete this._layerConfigs[Qn],delete this._layers[Qn]}this.familiesBySource={};for(var _r=0,Vr=function(hi,ai){for(var Mo={},xi=0;xi<hi.length;xi++){var ea=ai&&ai[hi[xi].id]||ne(hi[xi]);ai&&(ai[hi[xi].id]=ea);var va=Mo[ea];va||(va=Mo[ea]=[]),va.push(hi[xi])}var Ro=[];for(var $o in Mo)Ro.push(Mo[$o]);return Ro}(E.values(this._layerConfigs),this.keyCache);_r<Vr.length;_r+=1){var pr=Vr[_r].map(function(hi){return Ue._layers[hi.id]}),zr=pr[0];if(zr.visibility!=="none"){var gi=zr.source||"",wi=this.familiesBySource[gi];wi||(wi=this.familiesBySource[gi]={});var Sr=zr.sourceLayer||"_geojsonTileLayer",Ti=wi[Sr];Ti||(Ti=wi[Sr]=[]),Ti.push(pr)}}};var ce=function(Pe){var Te={},Ue=[];for(var ot in Pe){var wt=Pe[ot],$t=Te[ot]={};for(var vn in wt){var Et=wt[+vn];if(Et&&Et.bitmap.width!==0&&Et.bitmap.height!==0){var Kt={x:0,y:0,w:Et.bitmap.width+2,h:Et.bitmap.height+2};Ue.push(Kt),$t[vn]={rect:Kt,metrics:Et.metrics}}}}var Qn=E.potpack(Ue),_r=new E.AlphaImage({width:Qn.w||1,height:Qn.h||1});for(var Vr in Pe){var pr=Pe[Vr];for(var zr in pr){var gi=pr[+zr];if(gi&&gi.bitmap.width!==0&&gi.bitmap.height!==0){var wi=Te[Vr][zr].rect;E.AlphaImage.copy(gi.bitmap,_r,{x:0,y:0},{x:wi.x+1,y:wi.y+1},gi.bitmap)}}}this.image=_r,this.positions=Te};E.register("GlyphAtlas",ce);var xe=function(Pe){this.tileID=new E.OverscaledTileID(Pe.tileID.overscaledZ,Pe.tileID.wrap,Pe.tileID.canonical.z,Pe.tileID.canonical.x,Pe.tileID.canonical.y),this.uid=Pe.uid,this.zoom=Pe.zoom,this.pixelRatio=Pe.pixelRatio,this.tileSize=Pe.tileSize,this.source=Pe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Pe.showCollisionBoxes,this.collectResourceTiming=!!Pe.collectResourceTiming,this.returnDependencies=!!Pe.returnDependencies,this.promoteId=Pe.promoteId};function oe(Pe,Te,Ue){for(var ot=new E.EvaluationParameters(Te),wt=0,$t=Pe;wt<$t.length;wt+=1)$t[wt].recalculate(ot,Ue)}function Ve(Pe,Te){var Ue=E.getArrayBuffer(Pe.request,function(ot,wt,$t,vn){ot?Te(ot):wt&&Te(null,{vectorTile:new E.vectorTile.VectorTile(new E.pbf(wt)),rawData:wt,cacheControl:$t,expires:vn})});return function(){Ue.cancel(),Te()}}xe.prototype.parse=function(Pe,Te,Ue,ot,wt){var $t=this;this.status="parsing",this.data=Pe,this.collisionBoxArray=new E.CollisionBoxArray;var vn=new E.DictionaryCoder(Object.keys(Pe.layers).sort()),Et=new E.FeatureIndex(this.tileID,this.promoteId);Et.bucketLayerIDs=[];var Kt,Qn,_r,Vr,pr={},zr={featureIndex:Et,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ue},gi=Te.familiesBySource[this.source];for(var wi in gi){var Sr=Pe.layers[wi];if(Sr){Sr.version===1&&E.warnOnce('Vector tile source "'+this.source+'" layer "'+wi+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ti=vn.encode(wi),hi=[],ai=0;ai<Sr.length;ai++){var Mo=Sr.feature(ai),xi=Et.getId(Mo,wi);hi.push({feature:Mo,id:xi,index:ai,sourceLayerIndex:Ti})}for(var ea=0,va=gi[wi];ea<va.length;ea+=1){var Ro=va[ea],$o=Ro[0];$o.minzoom&&this.zoom<Math.floor($o.minzoom)||$o.maxzoom&&this.zoom>=$o.maxzoom||$o.visibility!=="none"&&(oe(Ro,this.zoom,Ue),(pr[$o.id]=$o.createBucket({index:Et.bucketLayerIDs.length,layers:Ro,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ti,sourceID:this.source})).populate(hi,zr,this.tileID.canonical),Et.bucketLayerIDs.push(Ro.map(function(Nn){return Nn.id})))}}}var Be=E.mapObject(zr.glyphDependencies,function(Nn){return Object.keys(Nn).map(Number)});Object.keys(Be).length?ot.send("getGlyphs",{uid:this.uid,stacks:Be},function(Nn,Bn){Kt||(Kt=Nn,Qn=Bn,un.call($t))}):Qn={};var rt=Object.keys(zr.iconDependencies);rt.length?ot.send("getImages",{icons:rt,source:this.source,tileID:this.tileID,type:"icons"},function(Nn,Bn){Kt||(Kt=Nn,_r=Bn,un.call($t))}):_r={};var jt=Object.keys(zr.patternDependencies);function un(){if(Kt)return wt(Kt);if(Qn&&_r&&Vr){var Nn=new ce(Qn),Bn=new E.ImageAtlas(_r,Vr);for(var yn in pr){var Cn=pr[yn];Cn instanceof E.SymbolBucket?(oe(Cn.layers,this.zoom,Ue),E.performSymbolLayout(Cn,Qn,Nn.positions,_r,Bn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Cn.hasPattern&&(Cn instanceof E.LineBucket||Cn instanceof E.FillBucket||Cn instanceof E.FillExtrusionBucket)&&(oe(Cn.layers,this.zoom,Ue),Cn.addFeatures(zr,this.tileID.canonical,Bn.patternPositions))}this.status="done",wt(null,{buckets:E.values(pr).filter(function(dr){return!dr.isEmpty()}),featureIndex:Et,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nn.image,imageAtlas:Bn,glyphMap:this.returnDependencies?Qn:null,iconMap:this.returnDependencies?_r:null,glyphPositions:this.returnDependencies?Nn.positions:null})}}jt.length?ot.send("getImages",{icons:jt,source:this.source,tileID:this.tileID,type:"patterns"},function(Nn,Bn){Kt||(Kt=Nn,Vr=Bn,un.call($t))}):Vr={},un.call(this)};var re=function(Pe,Te,Ue,ot){this.actor=Pe,this.layerIndex=Te,this.availableImages=Ue,this.loadVectorData=ot||Ve,this.loading={},this.loaded={}};re.prototype.loadTile=function(Pe,Te){var Ue=this,ot=Pe.uid;this.loading||(this.loading={});var wt=!!(Pe&&Pe.request&&Pe.request.collectResourceTiming)&&new E.RequestPerformance(Pe.request),$t=this.loading[ot]=new xe(Pe);$t.abort=this.loadVectorData(Pe,function(vn,Et){if(delete Ue.loading[ot],vn||!Et)return $t.status="done",Ue.loaded[ot]=$t,Te(vn);var Kt=Et.rawData,Qn={};Et.expires&&(Qn.expires=Et.expires),Et.cacheControl&&(Qn.cacheControl=Et.cacheControl);var _r={};if(wt){var Vr=wt.finish();Vr&&(_r.resourceTiming=JSON.parse(JSON.stringify(Vr)))}$t.vectorTile=Et.vectorTile,$t.parse(Et.vectorTile,Ue.layerIndex,Ue.availableImages,Ue.actor,function(pr,zr){if(pr||!zr)return Te(pr);Te(null,E.extend({rawTileData:Kt.slice(0)},zr,Qn,_r))}),Ue.loaded=Ue.loaded||{},Ue.loaded[ot]=$t})},re.prototype.reloadTile=function(Pe,Te){var Ue=this,ot=this.loaded,wt=Pe.uid,$t=this;if(ot&&ot[wt]){var vn=ot[wt];vn.showCollisionBoxes=Pe.showCollisionBoxes;var Et=function(Kt,Qn){var _r=vn.reloadCallback;_r&&(delete vn.reloadCallback,vn.parse(vn.vectorTile,$t.layerIndex,Ue.availableImages,$t.actor,_r)),Te(Kt,Qn)};vn.status==="parsing"?vn.reloadCallback=Et:vn.status==="done"&&(vn.vectorTile?vn.parse(vn.vectorTile,this.layerIndex,this.availableImages,this.actor,Et):Et())}},re.prototype.abortTile=function(Pe,Te){var Ue=this.loading,ot=Pe.uid;Ue&&Ue[ot]&&Ue[ot].abort&&(Ue[ot].abort(),delete Ue[ot]),Te()},re.prototype.removeTile=function(Pe,Te){var Ue=this.loaded,ot=Pe.uid;Ue&&Ue[ot]&&delete Ue[ot],Te()};var me=E.window.ImageBitmap,Re=function(){this.loaded={}};function Y(Pe,Te){if(Pe.length!==0){le(Pe[0],Te);for(var Ue=1;Ue<Pe.length;Ue++)le(Pe[Ue],!Te)}}function le(Pe,Te){for(var Ue=0,ot=0,wt=0,$t=Pe.length,vn=$t-1;wt<$t;vn=wt++){var Et=(Pe[wt][0]-Pe[vn][0])*(Pe[vn][1]+Pe[wt][1]),Kt=Ue+Et;ot+=Math.abs(Ue)>=Math.abs(Et)?Ue-Kt+Et:Et-Kt+Ue,Ue=Kt}Ue+ot>=0!=!!Te&&Pe.reverse()}Re.prototype.loadTile=function(Pe,Te){var Ue=Pe.uid,ot=Pe.encoding,wt=Pe.rawImageData,$t=me&&wt instanceof me?this.getImageData(wt):wt,vn=new E.DEMData(Ue,$t,ot);this.loaded=this.loaded||{},this.loaded[Ue]=vn,Te(null,vn)},Re.prototype.getImageData=function(Pe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Pe.width,Pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Pe.width,this.offscreenCanvas.height=Pe.height,this.offscreenCanvasContext.drawImage(Pe,0,0,Pe.width,Pe.height);var Te=this.offscreenCanvasContext.getImageData(-1,-1,Pe.width+2,Pe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new E.RGBAImage({width:Te.width,height:Te.height},Te.data)},Re.prototype.removeTile=function(Pe){var Te=this.loaded,Ue=Pe.uid;Te&&Te[Ue]&&delete Te[Ue]};var K=E.vectorTile.VectorTileFeature.prototype.toGeoJSON,_e=function(Pe){this._feature=Pe,this.extent=E.EXTENT,this.type=Pe.type,this.properties=Pe.tags,"id"in Pe&&!isNaN(Pe.id)&&(this.id=parseInt(Pe.id,10))};_e.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Pe=[],Te=0,Ue=this._feature.geometry;Te<Ue.length;Te+=1){var ot=Ue[Te];Pe.push([new E.Point$1(ot[0],ot[1])])}return Pe}for(var wt=[],$t=0,vn=this._feature.geometry;$t<vn.length;$t+=1){for(var Et=[],Kt=0,Qn=vn[$t];Kt<Qn.length;Kt+=1){var _r=Qn[Kt];Et.push(new E.Point$1(_r[0],_r[1]))}wt.push(Et)}return wt},_e.prototype.toGeoJSON=function(Pe,Te,Ue){return K.call(this,Pe,Te,Ue)};var et=function(Pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=E.EXTENT,this.length=Pe.length,this._features=Pe};et.prototype.feature=function(Pe){return new _e(this._features[Pe])};var Je=E.vectorTile.VectorTileFeature,Ot=dt;function dt(Pe,Te){this.options=Te||{},this.features=Pe,this.length=Pe.length}function bt(Pe,Te){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=Te||4096}dt.prototype.feature=function(Pe){return new bt(this.features[Pe],this.options.extent)},bt.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var Te=0;Te<Pe.length;Te++){for(var Ue=Pe[Te],ot=[],wt=0;wt<Ue.length;wt++)ot.push(new E.Point$1(Ue[wt][0],Ue[wt][1]));this.geometry.push(ot)}return this.geometry},bt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,Te=1/0,Ue=-1/0,ot=1/0,wt=-1/0,$t=0;$t<Pe.length;$t++)for(var vn=Pe[$t],Et=0;Et<vn.length;Et++){var Kt=vn[Et];Te=Math.min(Te,Kt.x),Ue=Math.max(Ue,Kt.x),ot=Math.min(ot,Kt.y),wt=Math.max(wt,Kt.y)}return[Te,ot,Ue,wt]},bt.prototype.toGeoJSON=Je.prototype.toGeoJSON;var Me=je,we=Ot;function je(Pe){var Te=new E.pbf;return function(Ue,ot){for(var wt in Ue.layers)ot.writeMessage(3,Ze,Ue.layers[wt])}(Pe,Te),Te.finish()}function Ze(Pe,Te){var Ue;Te.writeVarintField(15,Pe.version||1),Te.writeStringField(1,Pe.name||""),Te.writeVarintField(5,Pe.extent||4096);var ot={keys:[],values:[],keycache:{},valuecache:{}};for(Ue=0;Ue<Pe.length;Ue++)ot.feature=Pe.feature(Ue),Te.writeMessage(2,ut,ot);var wt=ot.keys;for(Ue=0;Ue<wt.length;Ue++)Te.writeStringField(3,wt[Ue]);var $t=ot.values;for(Ue=0;Ue<$t.length;Ue++)Te.writeMessage(4,it,$t[Ue])}function ut(Pe,Te){var Ue=Pe.feature;Ue.id!==void 0&&Te.writeVarintField(1,Ue.id),Te.writeMessage(2,Qt,Pe),Te.writeVarintField(3,Ue.type),Te.writeMessage(4,Oe,Ue)}function Qt(Pe,Te){var Ue=Pe.feature,ot=Pe.keys,wt=Pe.values,$t=Pe.keycache,vn=Pe.valuecache;for(var Et in Ue.properties){var Kt=$t[Et];Kt===void 0&&(ot.push(Et),$t[Et]=Kt=ot.length-1),Te.writeVarint(Kt);var Qn=Ue.properties[Et],_r=typeof Qn;_r!=="string"&&_r!=="boolean"&&_r!=="number"&&(Qn=JSON.stringify(Qn));var Vr=_r+":"+Qn,pr=vn[Vr];pr===void 0&&(wt.push(Qn),vn[Vr]=pr=wt.length-1),Te.writeVarint(pr)}}function De(Pe,Te){return(Te<<3)+(7&Pe)}function St(Pe){return Pe<<1^Pe>>31}function Oe(Pe,Te){for(var Ue=Pe.loadGeometry(),ot=Pe.type,wt=0,$t=0,vn=Ue.length,Et=0;Et<vn;Et++){var Kt=Ue[Et],Qn=1;ot===1&&(Qn=Kt.length),Te.writeVarint(De(1,Qn));for(var _r=ot===3?Kt.length-1:Kt.length,Vr=0;Vr<_r;Vr++){Vr===1&&ot!==1&&Te.writeVarint(De(2,_r-1));var pr=Kt[Vr].x-wt,zr=Kt[Vr].y-$t;Te.writeVarint(St(pr)),Te.writeVarint(St(zr)),wt+=pr,$t+=zr}ot===3&&Te.writeVarint(De(7,1))}}function it(Pe,Te){var Ue=typeof Pe;Ue==="string"?Te.writeStringField(1,Pe):Ue==="boolean"?Te.writeBooleanField(7,Pe):Ue==="number"&&(Pe%1!=0?Te.writeDoubleField(3,Pe):Pe<0?Te.writeSVarintField(6,Pe):Te.writeVarintField(5,Pe))}function Ke(Pe,Te,Ue,ot){Xe(Pe,Ue,ot),Xe(Te,2*Ue,2*ot),Xe(Te,2*Ue+1,2*ot+1)}function Xe(Pe,Te,Ue){var ot=Pe[Te];Pe[Te]=Pe[Ue],Pe[Ue]=ot}function Pt(Pe,Te,Ue,ot){var wt=Pe-Ue,$t=Te-ot;return wt*wt+$t*$t}Me.fromVectorTileJs=je,Me.fromGeojsonVt=function(Pe,Te){Te=Te||{};var Ue={};for(var ot in Pe)Ue[ot]=new Ot(Pe[ot].features,Te),Ue[ot].name=ot,Ue[ot].version=Te.version,Ue[ot].extent=Te.extent;return je({layers:Ue})},Me.GeoJSONWrapper=we;var xt=function(Pe){return Pe[0]},Ie=function(Pe){return Pe[1]},Wt=function(Pe,Te,Ue,ot,wt){Te===void 0&&(Te=xt),Ue===void 0&&(Ue=Ie),ot===void 0&&(ot=64),wt===void 0&&(wt=Float64Array),this.nodeSize=ot,this.points=Pe;for(var $t=Pe.length<65536?Uint16Array:Uint32Array,vn=this.ids=new $t(Pe.length),Et=this.coords=new wt(2*Pe.length),Kt=0;Kt<Pe.length;Kt++)vn[Kt]=Kt,Et[2*Kt]=Te(Pe[Kt]),Et[2*Kt+1]=Ue(Pe[Kt]);(function Qn(_r,Vr,pr,zr,gi,wi){if(!(gi-zr<=pr)){var Sr=zr+gi>>1;(function Ti(hi,ai,Mo,xi,ea,va){for(;ea>xi;){if(ea-xi>600){var Ro=ea-xi+1,$o=Mo-xi+1,Be=Math.log(Ro),rt=.5*Math.exp(2*Be/3),jt=.5*Math.sqrt(Be*rt*(Ro-rt)/Ro)*($o-Ro/2<0?-1:1);Ti(hi,ai,Mo,Math.max(xi,Math.floor(Mo-$o*rt/Ro+jt)),Math.min(ea,Math.floor(Mo+(Ro-$o)*rt/Ro+jt)),va)}var un=ai[2*Mo+va],Nn=xi,Bn=ea;for(Ke(hi,ai,xi,Mo),ai[2*ea+va]>un&&Ke(hi,ai,xi,ea);Nn<Bn;){for(Ke(hi,ai,Nn,Bn),Nn++,Bn--;ai[2*Nn+va]<un;)Nn++;for(;ai[2*Bn+va]>un;)Bn--}ai[2*xi+va]===un?Ke(hi,ai,xi,Bn):Ke(hi,ai,++Bn,ea),Bn<=Mo&&(xi=Bn+1),Mo<=Bn&&(ea=Bn-1)}})(_r,Vr,Sr,zr,gi,wi%2),Qn(_r,Vr,pr,zr,Sr-1,wi+1),Qn(_r,Vr,pr,Sr+1,gi,wi+1)}})(vn,Et,ot,0,vn.length-1,0)};Wt.prototype.range=function(Pe,Te,Ue,ot){return function(wt,$t,vn,Et,Kt,Qn,_r){for(var Vr,pr,zr=[0,wt.length-1,0],gi=[];zr.length;){var wi=zr.pop(),Sr=zr.pop(),Ti=zr.pop();if(Sr-Ti<=_r)for(var hi=Ti;hi<=Sr;hi++)pr=$t[2*hi+1],(Vr=$t[2*hi])>=vn&&Vr<=Kt&&pr>=Et&&pr<=Qn&&gi.push(wt[hi]);else{var ai=Math.floor((Ti+Sr)/2);pr=$t[2*ai+1],(Vr=$t[2*ai])>=vn&&Vr<=Kt&&pr>=Et&&pr<=Qn&&gi.push(wt[ai]);var Mo=(wi+1)%2;(wi===0?vn<=Vr:Et<=pr)&&(zr.push(Ti),zr.push(ai-1),zr.push(Mo)),(wi===0?Kt>=Vr:Qn>=pr)&&(zr.push(ai+1),zr.push(Sr),zr.push(Mo))}}return gi}(this.ids,this.coords,Pe,Te,Ue,ot,this.nodeSize)},Wt.prototype.within=function(Pe,Te,Ue){return function(ot,wt,$t,vn,Et,Kt){for(var Qn=[0,ot.length-1,0],_r=[],Vr=Et*Et;Qn.length;){var pr=Qn.pop(),zr=Qn.pop(),gi=Qn.pop();if(zr-gi<=Kt)for(var wi=gi;wi<=zr;wi++)Pt(wt[2*wi],wt[2*wi+1],$t,vn)<=Vr&&_r.push(ot[wi]);else{var Sr=Math.floor((gi+zr)/2),Ti=wt[2*Sr],hi=wt[2*Sr+1];Pt(Ti,hi,$t,vn)<=Vr&&_r.push(ot[Sr]);var ai=(pr+1)%2;(pr===0?$t-Et<=Ti:vn-Et<=hi)&&(Qn.push(gi),Qn.push(Sr-1),Qn.push(ai)),(pr===0?$t+Et>=Ti:vn+Et>=hi)&&(Qn.push(Sr+1),Qn.push(zr),Qn.push(ai))}}return _r}(this.ids,this.coords,Pe,Te,Ue,this.nodeSize)};var hn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Pe){return Pe}},Pn=function(Pe){this.options=on(Object.create(hn),Pe),this.trees=new Array(this.options.maxZoom+1)};function $n(Pe,Te,Ue,ot,wt){return{x:Pe,y:Te,zoom:1/0,id:Ue,parentId:-1,numPoints:ot,properties:wt}}function nr(Pe,Te){var Ue=Pe.geometry.coordinates,ot=Ue[1];return{x:ln(Ue[0]),y:Un(ot),zoom:1/0,index:Te,parentId:-1}}function Ft(Pe){return{type:"Feature",id:Pe.id,properties:Jt(Pe),geometry:{type:"Point",coordinates:[(ot=Pe.x,360*(ot-.5)),(Te=Pe.y,Ue=(180-360*Te)*Math.PI/180,360*Math.atan(Math.exp(Ue))/Math.PI-90)]}};var Te,Ue,ot}function Jt(Pe){var Te=Pe.numPoints,Ue=Te>=1e4?Math.round(Te/1e3)+"k":Te>=1e3?Math.round(Te/100)/10+"k":Te;return on(on({},Pe.properties),{cluster:!0,cluster_id:Pe.id,point_count:Te,point_count_abbreviated:Ue})}function ln(Pe){return Pe/360+.5}function Un(Pe){var Te=Math.sin(Pe*Math.PI/180),Ue=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return Ue<0?0:Ue>1?1:Ue}function on(Pe,Te){for(var Ue in Te)Pe[Ue]=Te[Ue];return Pe}function zt(Pe){return Pe.x}function kt(Pe){return Pe.y}function ke(Pe,Te,Ue,ot,wt,$t){var vn=wt-Ue,Et=$t-ot;if(vn!==0||Et!==0){var Kt=((Pe-Ue)*vn+(Te-ot)*Et)/(vn*vn+Et*Et);Kt>1?(Ue=wt,ot=$t):Kt>0&&(Ue+=vn*Kt,ot+=Et*Kt)}return(vn=Pe-Ue)*vn+(Et=Te-ot)*Et}function nt(Pe,Te,Ue,ot){var wt={id:Pe===void 0?null:Pe,type:Te,geometry:Ue,tags:ot,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function($t){var vn=$t.geometry,Et=$t.type;if(Et==="Point"||Et==="MultiPoint"||Et==="LineString")Vt($t,vn);else if(Et==="Polygon"||Et==="MultiLineString")for(var Kt=0;Kt<vn.length;Kt++)Vt($t,vn[Kt]);else if(Et==="MultiPolygon")for(Kt=0;Kt<vn.length;Kt++)for(var Qn=0;Qn<vn[Kt].length;Qn++)Vt($t,vn[Kt][Qn])}(wt),wt}function Vt(Pe,Te){for(var Ue=0;Ue<Te.length;Ue+=3)Pe.minX=Math.min(Pe.minX,Te[Ue]),Pe.minY=Math.min(Pe.minY,Te[Ue+1]),Pe.maxX=Math.max(Pe.maxX,Te[Ue]),Pe.maxY=Math.max(Pe.maxY,Te[Ue+1])}function U(Pe,Te,Ue,ot){if(Te.geometry){var wt=Te.geometry.coordinates,$t=Te.geometry.type,vn=Math.pow(Ue.tolerance/((1<<Ue.maxZoom)*Ue.extent),2),Et=[],Kt=Te.id;if(Ue.promoteId?Kt=Te.properties[Ue.promoteId]:Ue.generateId&&(Kt=ot||0),$t==="Point")pe(wt,Et);else if($t==="MultiPoint")for(var Qn=0;Qn<wt.length;Qn++)pe(wt[Qn],Et);else if($t==="LineString")ct(wt,Et,vn,!1);else if($t==="MultiLineString"){if(Ue.lineMetrics){for(Qn=0;Qn<wt.length;Qn++)ct(wt[Qn],Et=[],vn,!1),Pe.push(nt(Kt,"LineString",Et,Te.properties));return}de(wt,Et,vn,!1)}else if($t==="Polygon")de(wt,Et,vn,!0);else{if($t!=="MultiPolygon"){if($t==="GeometryCollection"){for(Qn=0;Qn<Te.geometry.geometries.length;Qn++)U(Pe,{id:Kt,geometry:Te.geometry.geometries[Qn],properties:Te.properties},Ue,ot);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qn=0;Qn<wt.length;Qn++){var _r=[];de(wt[Qn],_r,vn,!0),Et.push(_r)}}Pe.push(nt(Kt,$t,Et,Te.properties))}}function pe(Pe,Te){Te.push(Yt(Pe[0])),Te.push(sn(Pe[1])),Te.push(0)}function ct(Pe,Te,Ue,ot){for(var wt,$t,vn=0,Et=0;Et<Pe.length;Et++){var Kt=Yt(Pe[Et][0]),Qn=sn(Pe[Et][1]);Te.push(Kt),Te.push(Qn),Te.push(0),Et>0&&(vn+=ot?(wt*Qn-Kt*$t)/2:Math.sqrt(Math.pow(Kt-wt,2)+Math.pow(Qn-$t,2))),wt=Kt,$t=Qn}var _r=Te.length-3;Te[2]=1,function Vr(pr,zr,gi,wi){for(var Sr,Ti=wi,hi=gi-zr>>1,ai=gi-zr,Mo=pr[zr],xi=pr[zr+1],ea=pr[gi],va=pr[gi+1],Ro=zr+3;Ro<gi;Ro+=3){var $o=ke(pr[Ro],pr[Ro+1],Mo,xi,ea,va);if($o>Ti)Sr=Ro,Ti=$o;else if($o===Ti){var Be=Math.abs(Ro-hi);Be<ai&&(Sr=Ro,ai=Be)}}Ti>wi&&(Sr-zr>3&&Vr(pr,zr,Sr,wi),pr[Sr+2]=Ti,gi-Sr>3&&Vr(pr,Sr,gi,wi))}(Te,0,_r,Ue),Te[_r+2]=1,Te.size=Math.abs(vn),Te.start=0,Te.end=Te.size}function de(Pe,Te,Ue,ot){for(var wt=0;wt<Pe.length;wt++){var $t=[];ct(Pe[wt],$t,Ue,ot),Te.push($t)}}function Yt(Pe){return Pe/360+.5}function sn(Pe){var Te=Math.sin(Pe*Math.PI/180),Ue=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return Ue<0?0:Ue>1?1:Ue}function pn(Pe,Te,Ue,ot,wt,$t,vn,Et){if(ot/=Te,$t>=(Ue/=Te)&&vn<ot)return Pe;if(vn<Ue||$t>=ot)return null;for(var Kt=[],Qn=0;Qn<Pe.length;Qn++){var _r=Pe[Qn],Vr=_r.geometry,pr=_r.type,zr=wt===0?_r.minX:_r.minY,gi=wt===0?_r.maxX:_r.maxY;if(zr>=Ue&&gi<ot)Kt.push(_r);else if(!(gi<Ue||zr>=ot)){var wi=[];if(pr==="Point"||pr==="MultiPoint")Dn(Vr,wi,Ue,ot,wt);else if(pr==="LineString")Wn(Vr,wi,Ue,ot,wt,!1,Et.lineMetrics);else if(pr==="MultiLineString")dn(Vr,wi,Ue,ot,wt,!1);else if(pr==="Polygon")dn(Vr,wi,Ue,ot,wt,!0);else if(pr==="MultiPolygon")for(var Sr=0;Sr<Vr.length;Sr++){var Ti=[];dn(Vr[Sr],Ti,Ue,ot,wt,!0),Ti.length&&wi.push(Ti)}if(wi.length){if(Et.lineMetrics&&pr==="LineString"){for(Sr=0;Sr<wi.length;Sr++)Kt.push(nt(_r.id,pr,wi[Sr],_r.tags));continue}pr!=="LineString"&&pr!=="MultiLineString"||(wi.length===1?(pr="LineString",wi=wi[0]):pr="MultiLineString"),pr!=="Point"&&pr!=="MultiPoint"||(pr=wi.length===3?"Point":"MultiPoint"),Kt.push(nt(_r.id,pr,wi,_r.tags))}}}return Kt.length?Kt:null}function Dn(Pe,Te,Ue,ot,wt){for(var $t=0;$t<Pe.length;$t+=3){var vn=Pe[$t+wt];vn>=Ue&&vn<=ot&&(Te.push(Pe[$t]),Te.push(Pe[$t+1]),Te.push(Pe[$t+2]))}}function Wn(Pe,Te,Ue,ot,wt,$t,vn){for(var Et,Kt,Qn=Xn(Pe),_r=wt===0?Rt:wn,Vr=Pe.start,pr=0;pr<Pe.length-3;pr+=3){var zr=Pe[pr],gi=Pe[pr+1],wi=Pe[pr+2],Sr=Pe[pr+3],Ti=Pe[pr+4],hi=wt===0?zr:gi,ai=wt===0?Sr:Ti,Mo=!1;vn&&(Et=Math.sqrt(Math.pow(zr-Sr,2)+Math.pow(gi-Ti,2))),hi<Ue?ai>Ue&&(Kt=_r(Qn,zr,gi,Sr,Ti,Ue),vn&&(Qn.start=Vr+Et*Kt)):hi>ot?ai<ot&&(Kt=_r(Qn,zr,gi,Sr,Ti,ot),vn&&(Qn.start=Vr+Et*Kt)):_t(Qn,zr,gi,wi),ai<Ue&&hi>=Ue&&(Kt=_r(Qn,zr,gi,Sr,Ti,Ue),Mo=!0),ai>ot&&hi<=ot&&(Kt=_r(Qn,zr,gi,Sr,Ti,ot),Mo=!0),!$t&&Mo&&(vn&&(Qn.end=Vr+Et*Kt),Te.push(Qn),Qn=Xn(Pe)),vn&&(Vr+=Et)}var xi=Pe.length-3;zr=Pe[xi],gi=Pe[xi+1],wi=Pe[xi+2],(hi=wt===0?zr:gi)>=Ue&&hi<=ot&&_t(Qn,zr,gi,wi),xi=Qn.length-3,$t&&xi>=3&&(Qn[xi]!==Qn[0]||Qn[xi+1]!==Qn[1])&&_t(Qn,Qn[0],Qn[1],Qn[2]),Qn.length&&Te.push(Qn)}function Xn(Pe){var Te=[];return Te.size=Pe.size,Te.start=Pe.start,Te.end=Pe.end,Te}function dn(Pe,Te,Ue,ot,wt,$t){for(var vn=0;vn<Pe.length;vn++)Wn(Pe[vn],Te,Ue,ot,wt,$t,!1)}function _t(Pe,Te,Ue,ot){Pe.push(Te),Pe.push(Ue),Pe.push(ot)}function Rt(Pe,Te,Ue,ot,wt,$t){var vn=($t-Te)/(ot-Te);return Pe.push($t),Pe.push(Ue+(wt-Ue)*vn),Pe.push(1),vn}function wn(Pe,Te,Ue,ot,wt,$t){var vn=($t-Ue)/(wt-Ue);return Pe.push(Te+(ot-Te)*vn),Pe.push($t),Pe.push(1),vn}function In(Pe,Te){for(var Ue=[],ot=0;ot<Pe.length;ot++){var wt,$t=Pe[ot],vn=$t.type;if(vn==="Point"||vn==="MultiPoint"||vn==="LineString")wt=Zn($t.geometry,Te);else if(vn==="MultiLineString"||vn==="Polygon"){wt=[];for(var Et=0;Et<$t.geometry.length;Et++)wt.push(Zn($t.geometry[Et],Te))}else if(vn==="MultiPolygon")for(wt=[],Et=0;Et<$t.geometry.length;Et++){for(var Kt=[],Qn=0;Qn<$t.geometry[Et].length;Qn++)Kt.push(Zn($t.geometry[Et][Qn],Te));wt.push(Kt)}Ue.push(nt($t.id,vn,wt,$t.tags))}return Ue}function Zn(Pe,Te){var Ue=[];Ue.size=Pe.size,Pe.start!==void 0&&(Ue.start=Pe.start,Ue.end=Pe.end);for(var ot=0;ot<Pe.length;ot+=3)Ue.push(Pe[ot]+Te,Pe[ot+1],Pe[ot+2]);return Ue}function vt(Pe,Te){if(Pe.transformed)return Pe;var Ue,ot,wt,$t=1<<Pe.z,vn=Pe.x,Et=Pe.y;for(Ue=0;Ue<Pe.features.length;Ue++){var Kt=Pe.features[Ue],Qn=Kt.geometry,_r=Kt.type;if(Kt.geometry=[],_r===1)for(ot=0;ot<Qn.length;ot+=2)Kt.geometry.push(Ee(Qn[ot],Qn[ot+1],Te,$t,vn,Et));else for(ot=0;ot<Qn.length;ot++){var Vr=[];for(wt=0;wt<Qn[ot].length;wt+=2)Vr.push(Ee(Qn[ot][wt],Qn[ot][wt+1],Te,$t,vn,Et));Kt.geometry.push(Vr)}}return Pe.transformed=!0,Pe}function Ee(Pe,Te,Ue,ot,wt,$t){return[Math.round(Ue*(Pe*ot-wt)),Math.round(Ue*(Te*ot-$t))]}function Fe(Pe,Te,Ue,ot,wt){for(var $t=Te===wt.maxZoom?0:wt.tolerance/((1<<Te)*wt.extent),vn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ue,y:ot,z:Te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Et=0;Et<Pe.length;Et++){vn.numFeatures++,st(vn,Pe[Et],$t,wt);var Kt=Pe[Et].minX,Qn=Pe[Et].minY,_r=Pe[Et].maxX,Vr=Pe[Et].maxY;Kt<vn.minX&&(vn.minX=Kt),Qn<vn.minY&&(vn.minY=Qn),_r>vn.maxX&&(vn.maxX=_r),Vr>vn.maxY&&(vn.maxY=Vr)}return vn}function st(Pe,Te,Ue,ot){var wt=Te.geometry,$t=Te.type,vn=[];if($t==="Point"||$t==="MultiPoint")for(var Et=0;Et<wt.length;Et+=3)vn.push(wt[Et]),vn.push(wt[Et+1]),Pe.numPoints++,Pe.numSimplified++;else if($t==="LineString")It(vn,wt,Pe,Ue,!1,!1);else if($t==="MultiLineString"||$t==="Polygon")for(Et=0;Et<wt.length;Et++)It(vn,wt[Et],Pe,Ue,$t==="Polygon",Et===0);else if($t==="MultiPolygon")for(var Kt=0;Kt<wt.length;Kt++){var Qn=wt[Kt];for(Et=0;Et<Qn.length;Et++)It(vn,Qn[Et],Pe,Ue,!0,Et===0)}if(vn.length){var _r=Te.tags||null;if($t==="LineString"&&ot.lineMetrics){for(var Vr in _r={},Te.tags)_r[Vr]=Te.tags[Vr];_r.mapbox_clip_start=wt.start/wt.size,_r.mapbox_clip_end=wt.end/wt.size}var pr={geometry:vn,type:$t==="Polygon"||$t==="MultiPolygon"?3:$t==="LineString"||$t==="MultiLineString"?2:1,tags:_r};Te.id!==null&&(pr.id=Te.id),Pe.features.push(pr)}}function It(Pe,Te,Ue,ot,wt,$t){var vn=ot*ot;if(ot>0&&Te.size<(wt?vn:ot))Ue.numPoints+=Te.length/3;else{for(var Et=[],Kt=0;Kt<Te.length;Kt+=3)(ot===0||Te[Kt+2]>vn)&&(Ue.numSimplified++,Et.push(Te[Kt]),Et.push(Te[Kt+1])),Ue.numPoints++;wt&&function(Qn,_r){for(var Vr=0,pr=0,zr=Qn.length,gi=zr-2;pr<zr;gi=pr,pr+=2)Vr+=(Qn[pr]-Qn[gi])*(Qn[pr+1]+Qn[gi+1]);if(Vr>0===_r)for(pr=0,zr=Qn.length;pr<zr/2;pr+=2){var wi=Qn[pr],Sr=Qn[pr+1];Qn[pr]=Qn[zr-2-pr],Qn[pr+1]=Qn[zr-1-pr],Qn[zr-2-pr]=wi,Qn[zr-1-pr]=Sr}}(Et,$t),Pe.push(Et)}}function Mt(Pe,Te){var Ue=(Te=this.options=function(wt,$t){for(var vn in $t)wt[vn]=$t[vn];return wt}(Object.create(this.options),Te)).debug;if(Ue&&console.time("preprocess data"),Te.maxZoom<0||Te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Te.promoteId&&Te.generateId)throw new Error("promoteId and generateId cannot be used together.");var ot=function(wt,$t){var vn=[];if(wt.type==="FeatureCollection")for(var Et=0;Et<wt.features.length;Et++)U(vn,wt.features[Et],$t,Et);else U(vn,wt.type==="Feature"?wt:{geometry:wt},$t);return vn}(Pe,Te);this.tiles={},this.tileCoords=[],Ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Te.indexMaxZoom,Te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ot=function(wt,$t){var vn=$t.buffer/$t.extent,Et=wt,Kt=pn(wt,1,-1-vn,vn,0,-1,2,$t),Qn=pn(wt,1,1-vn,2+vn,0,-1,2,$t);return(Kt||Qn)&&(Et=pn(wt,1,-vn,1+vn,0,-1,2,$t)||[],Kt&&(Et=In(Kt,1).concat(Et)),Qn&&(Et=Et.concat(In(Qn,-1)))),Et}(ot,Te)).length&&this.splitTile(ot,0,0,0),Ue&&(ot.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function En(Pe,Te,Ue){return 32*((1<<Pe)*Ue+Te)+Pe}function Yn(Pe,Te){var Ue=Pe.tileID.canonical;if(!this._geoJSONIndex)return Te(null,null);var ot=this._geoJSONIndex.getTile(Ue.z,Ue.x,Ue.y);if(!ot)return Te(null,null);var wt=new et(ot.features),$t=Me(wt);$t.byteOffset===0&&$t.byteLength===$t.buffer.byteLength||($t=new Uint8Array($t)),Te(null,{vectorTile:wt,rawData:$t.buffer})}Pn.prototype.load=function(Pe){var Te=this.options,Ue=Te.log,ot=Te.minZoom,wt=Te.maxZoom,$t=Te.nodeSize;Ue&&console.time("total time");var vn="prepare "+Pe.length+" points";Ue&&console.time(vn),this.points=Pe;for(var Et=[],Kt=0;Kt<Pe.length;Kt++)Pe[Kt].geometry&&Et.push(nr(Pe[Kt],Kt));this.trees[wt+1]=new Wt(Et,zt,kt,$t,Float32Array),Ue&&console.timeEnd(vn);for(var Qn=wt;Qn>=ot;Qn--){var _r=+Date.now();Et=this._cluster(Et,Qn),this.trees[Qn]=new Wt(Et,zt,kt,$t,Float32Array),Ue&&console.log("z%d: %d clusters in %dms",Qn,Et.length,+Date.now()-_r)}return Ue&&console.timeEnd("total time"),this},Pn.prototype.getClusters=function(Pe,Te){var Ue=((Pe[0]+180)%360+360)%360-180,ot=Math.max(-90,Math.min(90,Pe[1])),wt=Pe[2]===180?180:((Pe[2]+180)%360+360)%360-180,$t=Math.max(-90,Math.min(90,Pe[3]));if(Pe[2]-Pe[0]>=360)Ue=-180,wt=180;else if(Ue>wt){var vn=this.getClusters([Ue,ot,180,$t],Te),Et=this.getClusters([-180,ot,wt,$t],Te);return vn.concat(Et)}for(var Kt=this.trees[this._limitZoom(Te)],Qn=[],_r=0,Vr=Kt.range(ln(Ue),Un($t),ln(wt),Un(ot));_r<Vr.length;_r+=1){var pr=Kt.points[Vr[_r]];Qn.push(pr.numPoints?Ft(pr):this.points[pr.index])}return Qn},Pn.prototype.getChildren=function(Pe){var Te=this._getOriginId(Pe),Ue=this._getOriginZoom(Pe),ot="No cluster with the specified id.",wt=this.trees[Ue];if(!wt)throw new Error(ot);var $t=wt.points[Te];if(!$t)throw new Error(ot);for(var vn=this.options.radius/(this.options.extent*Math.pow(2,Ue-1)),Et=[],Kt=0,Qn=wt.within($t.x,$t.y,vn);Kt<Qn.length;Kt+=1){var _r=wt.points[Qn[Kt]];_r.parentId===Pe&&Et.push(_r.numPoints?Ft(_r):this.points[_r.index])}if(Et.length===0)throw new Error(ot);return Et},Pn.prototype.getLeaves=function(Pe,Te,Ue){var ot=[];return this._appendLeaves(ot,Pe,Te=Te||10,Ue=Ue||0,0),ot},Pn.prototype.getTile=function(Pe,Te,Ue){var ot=this.trees[this._limitZoom(Pe)],wt=Math.pow(2,Pe),$t=this.options,vn=$t.radius/$t.extent,Et=(Ue-vn)/wt,Kt=(Ue+1+vn)/wt,Qn={features:[]};return this._addTileFeatures(ot.range((Te-vn)/wt,Et,(Te+1+vn)/wt,Kt),ot.points,Te,Ue,wt,Qn),Te===0&&this._addTileFeatures(ot.range(1-vn/wt,Et,1,Kt),ot.points,wt,Ue,wt,Qn),Te===wt-1&&this._addTileFeatures(ot.range(0,Et,vn/wt,Kt),ot.points,-1,Ue,wt,Qn),Qn.features.length?Qn:null},Pn.prototype.getClusterExpansionZoom=function(Pe){for(var Te=this._getOriginZoom(Pe)-1;Te<=this.options.maxZoom;){var Ue=this.getChildren(Pe);if(Te++,Ue.length!==1)break;Pe=Ue[0].properties.cluster_id}return Te},Pn.prototype._appendLeaves=function(Pe,Te,Ue,ot,wt){for(var $t=0,vn=this.getChildren(Te);$t<vn.length;$t+=1){var Et=vn[$t],Kt=Et.properties;if(Kt&&Kt.cluster?wt+Kt.point_count<=ot?wt+=Kt.point_count:wt=this._appendLeaves(Pe,Kt.cluster_id,Ue,ot,wt):wt<ot?wt++:Pe.push(Et),Pe.length===Ue)break}return wt},Pn.prototype._addTileFeatures=function(Pe,Te,Ue,ot,wt,$t){for(var vn=0,Et=Pe;vn<Et.length;vn+=1){var Kt=Te[Et[vn]],Qn=Kt.numPoints,_r={type:1,geometry:[[Math.round(this.options.extent*(Kt.x*wt-Ue)),Math.round(this.options.extent*(Kt.y*wt-ot))]],tags:Qn?Jt(Kt):this.points[Kt.index].properties},Vr=void 0;Qn?Vr=Kt.id:this.options.generateId?Vr=Kt.index:this.points[Kt.index].id&&(Vr=this.points[Kt.index].id),Vr!==void 0&&(_r.id=Vr),$t.features.push(_r)}},Pn.prototype._limitZoom=function(Pe){return Math.max(this.options.minZoom,Math.min(+Pe,this.options.maxZoom+1))},Pn.prototype._cluster=function(Pe,Te){for(var Ue=[],ot=this.options,wt=ot.reduce,$t=ot.minPoints,vn=ot.radius/(ot.extent*Math.pow(2,Te)),Et=0;Et<Pe.length;Et++){var Kt=Pe[Et];if(!(Kt.zoom<=Te)){Kt.zoom=Te;for(var Qn=this.trees[Te+1],_r=Qn.within(Kt.x,Kt.y,vn),Vr=Kt.numPoints||1,pr=Vr,zr=0,gi=_r;zr<gi.length;zr+=1){var wi=Qn.points[gi[zr]];wi.zoom>Te&&(pr+=wi.numPoints||1)}if(pr>=$t){for(var Sr=Kt.x*Vr,Ti=Kt.y*Vr,hi=wt&&Vr>1?this._map(Kt,!0):null,ai=(Et<<5)+(Te+1)+this.points.length,Mo=0,xi=_r;Mo<xi.length;Mo+=1){var ea=Qn.points[xi[Mo]];if(!(ea.zoom<=Te)){ea.zoom=Te;var va=ea.numPoints||1;Sr+=ea.x*va,Ti+=ea.y*va,ea.parentId=ai,wt&&(hi||(hi=this._map(Kt,!0)),wt(hi,this._map(ea)))}}Kt.parentId=ai,Ue.push($n(Sr/pr,Ti/pr,ai,pr,hi))}else if(Ue.push(Kt),pr>1)for(var Ro=0,$o=_r;Ro<$o.length;Ro+=1){var Be=Qn.points[$o[Ro]];Be.zoom<=Te||(Be.zoom=Te,Ue.push(Be))}}}return Ue},Pn.prototype._getOriginId=function(Pe){return Pe-this.points.length>>5},Pn.prototype._getOriginZoom=function(Pe){return(Pe-this.points.length)%32},Pn.prototype._map=function(Pe,Te){if(Pe.numPoints)return Te?on({},Pe.properties):Pe.properties;var Ue=this.points[Pe.index].properties,ot=this.options.map(Ue);return Te&&ot===Ue?on({},ot):ot},Mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mt.prototype.splitTile=function(Pe,Te,Ue,ot,wt,$t,vn){for(var Et=[Pe,Te,Ue,ot],Kt=this.options,Qn=Kt.debug;Et.length;){ot=Et.pop(),Ue=Et.pop(),Te=Et.pop(),Pe=Et.pop();var _r=1<<Te,Vr=En(Te,Ue,ot),pr=this.tiles[Vr];if(!pr&&(Qn>1&&console.time("creation"),pr=this.tiles[Vr]=Fe(Pe,Te,Ue,ot,Kt),this.tileCoords.push({z:Te,x:Ue,y:ot}),Qn)){Qn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Te,Ue,ot,pr.numFeatures,pr.numPoints,pr.numSimplified),console.timeEnd("creation"));var zr="z"+Te;this.stats[zr]=(this.stats[zr]||0)+1,this.total++}if(pr.source=Pe,wt){if(Te===Kt.maxZoom||Te===wt)continue;var gi=1<<wt-Te;if(Ue!==Math.floor($t/gi)||ot!==Math.floor(vn/gi))continue}else if(Te===Kt.indexMaxZoom||pr.numPoints<=Kt.indexMaxPoints)continue;if(pr.source=null,Pe.length!==0){Qn>1&&console.time("clipping");var wi,Sr,Ti,hi,ai,Mo,xi=.5*Kt.buffer/Kt.extent,ea=.5-xi,va=.5+xi,Ro=1+xi;wi=Sr=Ti=hi=null,ai=pn(Pe,_r,Ue-xi,Ue+va,0,pr.minX,pr.maxX,Kt),Mo=pn(Pe,_r,Ue+ea,Ue+Ro,0,pr.minX,pr.maxX,Kt),Pe=null,ai&&(wi=pn(ai,_r,ot-xi,ot+va,1,pr.minY,pr.maxY,Kt),Sr=pn(ai,_r,ot+ea,ot+Ro,1,pr.minY,pr.maxY,Kt),ai=null),Mo&&(Ti=pn(Mo,_r,ot-xi,ot+va,1,pr.minY,pr.maxY,Kt),hi=pn(Mo,_r,ot+ea,ot+Ro,1,pr.minY,pr.maxY,Kt),Mo=null),Qn>1&&console.timeEnd("clipping"),Et.push(wi||[],Te+1,2*Ue,2*ot),Et.push(Sr||[],Te+1,2*Ue,2*ot+1),Et.push(Ti||[],Te+1,2*Ue+1,2*ot),Et.push(hi||[],Te+1,2*Ue+1,2*ot+1)}}},Mt.prototype.getTile=function(Pe,Te,Ue){var ot=this.options,wt=ot.extent,$t=ot.debug;if(Pe<0||Pe>24)return null;var vn=1<<Pe,Et=En(Pe,Te=(Te%vn+vn)%vn,Ue);if(this.tiles[Et])return vt(this.tiles[Et],wt);$t>1&&console.log("drilling down to z%d-%d-%d",Pe,Te,Ue);for(var Kt,Qn=Pe,_r=Te,Vr=Ue;!Kt&&Qn>0;)Qn--,_r=Math.floor(_r/2),Vr=Math.floor(Vr/2),Kt=this.tiles[En(Qn,_r,Vr)];return Kt&&Kt.source?($t>1&&console.log("found parent tile z%d-%d-%d",Qn,_r,Vr),$t>1&&console.time("drilling down"),this.splitTile(Kt.source,Qn,_r,Vr,Pe,Te,Ue),$t>1&&console.timeEnd("drilling down"),this.tiles[Et]?vt(this.tiles[Et],wt):null):null};var yr=function(Pe){function Te(Ue,ot,wt,$t){Pe.call(this,Ue,ot,wt,Yn),$t&&(this.loadGeoJSON=$t)}return Pe&&(Te.__proto__=Pe),(Te.prototype=Object.create(Pe&&Pe.prototype)).constructor=Te,Te.prototype.loadData=function(Ue,ot){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ot,this._pendingLoadDataParams=Ue,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Te.prototype._loadData=function(){var Ue=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ot=this._pendingCallback,wt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var $t=!!(wt&&wt.request&&wt.request.collectResourceTiming)&&new E.RequestPerformance(wt.request);this.loadGeoJSON(wt,function(vn,Et){if(vn||!Et)return ot(vn);if(typeof Et!="object")return ot(new Error("Input data given to '"+wt.source+"' is not a valid GeoJSON object."));(function pr(zr,gi){var wi,Sr=zr&&zr.type;if(Sr==="FeatureCollection")for(wi=0;wi<zr.features.length;wi++)pr(zr.features[wi],gi);else if(Sr==="GeometryCollection")for(wi=0;wi<zr.geometries.length;wi++)pr(zr.geometries[wi],gi);else if(Sr==="Feature")pr(zr.geometry,gi);else if(Sr==="Polygon")Y(zr.coordinates,gi);else if(Sr==="MultiPolygon")for(wi=0;wi<zr.coordinates.length;wi++)Y(zr.coordinates[wi],gi);return zr})(Et,!0);try{if(wt.filter){var Kt=E.createExpression(wt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Kt.result==="error")throw new Error(Kt.value.map(function(pr){return pr.key+": "+pr.message}).join(", "));var Qn=Et.features.filter(function(pr){return Kt.value.evaluate({zoom:0},pr)});Et={type:"FeatureCollection",features:Qn}}Ue._geoJSONIndex=wt.cluster?new Pn(function(pr){var zr=pr.superclusterOptions,gi=pr.clusterProperties;if(!gi||!zr)return zr;for(var wi={},Sr={},Ti={accumulated:null,zoom:0},hi={properties:null},ai=Object.keys(gi),Mo=0,xi=ai;Mo<xi.length;Mo+=1){var ea=xi[Mo],va=gi[ea],Ro=va[0],$o=E.createExpression(va[1]),Be=E.createExpression(typeof Ro=="string"?[Ro,["accumulated"],["get",ea]]:Ro);wi[ea]=$o.value,Sr[ea]=Be.value}return zr.map=function(rt){hi.properties=rt;for(var jt={},un=0,Nn=ai;un<Nn.length;un+=1){var Bn=Nn[un];jt[Bn]=wi[Bn].evaluate(Ti,hi)}return jt},zr.reduce=function(rt,jt){hi.properties=jt;for(var un=0,Nn=ai;un<Nn.length;un+=1){var Bn=Nn[un];Ti.accumulated=rt[Bn],rt[Bn]=Sr[Bn].evaluate(Ti,hi)}},zr}(wt)).load(Et.features):function(pr,zr){return new Mt(pr,zr)}(Et,wt.geojsonVtOptions)}catch(pr){return ot(pr)}Ue.loaded={};var _r={};if($t){var Vr=$t.finish();Vr&&(_r.resourceTiming={},_r.resourceTiming[wt.source]=JSON.parse(JSON.stringify(Vr)))}ot(null,_r)})}},Te.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Te.prototype.reloadTile=function(Ue,ot){var wt=this.loaded;return wt&&wt[Ue.uid]?Pe.prototype.reloadTile.call(this,Ue,ot):this.loadTile(Ue,ot)},Te.prototype.loadGeoJSON=function(Ue,ot){if(Ue.request)E.getJSON(Ue.request,ot);else{if(typeof Ue.data!="string")return ot(new Error("Input data given to '"+Ue.source+"' is not a valid GeoJSON object."));try{return ot(null,JSON.parse(Ue.data))}catch(wt){return ot(new Error("Input data given to '"+Ue.source+"' is not a valid GeoJSON object."))}}},Te.prototype.removeSource=function(Ue,ot){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ot()},Te.prototype.getClusterExpansionZoom=function(Ue,ot){try{ot(null,this._geoJSONIndex.getClusterExpansionZoom(Ue.clusterId))}catch(wt){ot(wt)}},Te.prototype.getClusterChildren=function(Ue,ot){try{ot(null,this._geoJSONIndex.getChildren(Ue.clusterId))}catch(wt){ot(wt)}},Te.prototype.getClusterLeaves=function(Ue,ot){try{ot(null,this._geoJSONIndex.getLeaves(Ue.clusterId,Ue.limit,Ue.offset))}catch(wt){ot(wt)}},Te}(re),qn=function(Pe){var Te=this;this.self=Pe,this.actor=new E.Actor(Pe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:re,geojson:yr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ue,ot){if(Te.workerSourceTypes[Ue])throw new Error('Worker source with name "'+Ue+'" already registered.');Te.workerSourceTypes[Ue]=ot},this.self.registerRTLTextPlugin=function(Ue){if(E.plugin.isParsed())throw new Error("RTL text plugin already registered.");E.plugin.applyArabicShaping=Ue.applyArabicShaping,E.plugin.processBidirectionalText=Ue.processBidirectionalText,E.plugin.processStyledBidirectionalText=Ue.processStyledBidirectionalText}};return qn.prototype.setReferrer=function(Pe,Te){this.referrer=Te},qn.prototype.setImages=function(Pe,Te,Ue){for(var ot in this.availableImages[Pe]=Te,this.workerSources[Pe]){var wt=this.workerSources[Pe][ot];for(var $t in wt)wt[$t].availableImages=Te}Ue()},qn.prototype.setLayers=function(Pe,Te,Ue){this.getLayerIndex(Pe).replace(Te),Ue()},qn.prototype.updateLayers=function(Pe,Te,Ue){this.getLayerIndex(Pe).update(Te.layers,Te.removedIds),Ue()},qn.prototype.loadTile=function(Pe,Te,Ue){this.getWorkerSource(Pe,Te.type,Te.source).loadTile(Te,Ue)},qn.prototype.loadDEMTile=function(Pe,Te,Ue){this.getDEMWorkerSource(Pe,Te.source).loadTile(Te,Ue)},qn.prototype.reloadTile=function(Pe,Te,Ue){this.getWorkerSource(Pe,Te.type,Te.source).reloadTile(Te,Ue)},qn.prototype.abortTile=function(Pe,Te,Ue){this.getWorkerSource(Pe,Te.type,Te.source).abortTile(Te,Ue)},qn.prototype.removeTile=function(Pe,Te,Ue){this.getWorkerSource(Pe,Te.type,Te.source).removeTile(Te,Ue)},qn.prototype.removeDEMTile=function(Pe,Te){this.getDEMWorkerSource(Pe,Te.source).removeTile(Te)},qn.prototype.removeSource=function(Pe,Te,Ue){if(this.workerSources[Pe]&&this.workerSources[Pe][Te.type]&&this.workerSources[Pe][Te.type][Te.source]){var ot=this.workerSources[Pe][Te.type][Te.source];delete this.workerSources[Pe][Te.type][Te.source],ot.removeSource!==void 0?ot.removeSource(Te,Ue):Ue()}},qn.prototype.loadWorkerSource=function(Pe,Te,Ue){try{this.self.importScripts(Te.url),Ue()}catch(ot){Ue(ot.toString())}},qn.prototype.syncRTLPluginState=function(Pe,Te,Ue){try{E.plugin.setState(Te);var ot=E.plugin.getPluginURL();if(E.plugin.isLoaded()&&!E.plugin.isParsed()&&ot!=null){this.self.importScripts(ot);var wt=E.plugin.isParsed();Ue(wt?void 0:new Error("RTL Text Plugin failed to import scripts from "+ot),wt)}}catch($t){Ue($t.toString())}},qn.prototype.getAvailableImages=function(Pe){var Te=this.availableImages[Pe];return Te||(Te=[]),Te},qn.prototype.getLayerIndex=function(Pe){var Te=this.layerIndexes[Pe];return Te||(Te=this.layerIndexes[Pe]=new ue),Te},qn.prototype.getWorkerSource=function(Pe,Te,Ue){var ot=this;return this.workerSources[Pe]||(this.workerSources[Pe]={}),this.workerSources[Pe][Te]||(this.workerSources[Pe][Te]={}),this.workerSources[Pe][Te][Ue]||(this.workerSources[Pe][Te][Ue]=new this.workerSourceTypes[Te]({send:function(wt,$t,vn){ot.actor.send(wt,$t,vn,Pe)}},this.getLayerIndex(Pe),this.getAvailableImages(Pe))),this.workerSources[Pe][Te][Ue]},qn.prototype.getDEMWorkerSource=function(Pe,Te){return this.demWorkerSources[Pe]||(this.demWorkerSources[Pe]={}),this.demWorkerSources[Pe][Te]||(this.demWorkerSources[Pe][Te]=new Re),this.demWorkerSources[Pe][Te]},qn.prototype.enforceCacheSizeLimit=function(Pe,Te){E.enforceCacheSizeLimit(Te)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new qn(self)),qn}),G(["./shared"],function(E){"use strict";var he=E.createCommonjsModule(function(_){function S(k){return!x(k)}function x(k){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var J,ge,We=new Blob([""],{type:"text/javascript"}),ht=URL.createObjectURL(We);try{ge=new Worker(ht),J=!0}catch(Ut){J=!1}return ge&&ge.terminate(),URL.revokeObjectURL(ht),J}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var J=document.createElement("canvas");J.width=J.height=1;var ge=J.getContext("2d");if(!ge)return!1;var We=ge.getImageData(0,0,1,1);return We&&We.width===J.width}()?(O[Z=k&&k.failIfMajorPerformanceCaveat]===void 0&&(O[Z]=function(J){var ge=function(ht){var Ut=document.createElement("canvas"),Ht=Object.create(S.webGLContextAttributes);return Ht.failIfMajorPerformanceCaveat=ht,Ut.probablySupportsContext?Ut.probablySupportsContext("webgl",Ht)||Ut.probablySupportsContext("experimental-webgl",Ht):Ut.supportsContext?Ut.supportsContext("webgl",Ht)||Ut.supportsContext("experimental-webgl",Ht):Ut.getContext("webgl",Ht)||Ut.getContext("experimental-webgl",Ht)}(J);if(!ge)return!1;var We=ge.createShader(ge.VERTEX_SHADER);return!(!We||ge.isContextLost())&&(ge.shaderSource(We,"void main() {}"),ge.compileShader(We),ge.getShaderParameter(We,ge.COMPILE_STATUS)===!0)}(Z)),O[Z]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Z}_.exports?_.exports=S:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=S,window.mapboxgl.notSupportedReason=x);var O={};S.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),ne={create:function(_,S,x){var O=E.window.document.createElement(_);return S!==void 0&&(O.className=S),x&&x.appendChild(O),O},createNS:function(_,S){return E.window.document.createElementNS(_,S)}},ue=E.window.document&&E.window.document.documentElement.style;function ce(_){if(!ue)return _[0];for(var S=0;S<_.length;S++)if(_[S]in ue)return _[S];return _[0]}var xe,oe=ce(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);ne.disableDrag=function(){ue&&oe&&(xe=ue[oe],ue[oe]="none")},ne.enableDrag=function(){ue&&oe&&(ue[oe]=xe)};var Ve=ce(["transform","WebkitTransform"]);ne.setTransform=function(_,S){_.style[Ve]=S};var re=!1;try{var me=Object.defineProperty({},"passive",{get:function(){re=!0}});E.window.addEventListener("test",me,me),E.window.removeEventListener("test",me,me)}catch(_){re=!1}ne.addEventListener=function(_,S,x,O){O===void 0&&(O={}),_.addEventListener(S,x,"passive"in O&&re?O:O.capture)},ne.removeEventListener=function(_,S,x,O){O===void 0&&(O={}),_.removeEventListener(S,x,"passive"in O&&re?O:O.capture)};var Re=function(_){_.preventDefault(),_.stopPropagation(),E.window.removeEventListener("click",Re,!0)};function Y(_){var S=_.userImage;return!!(S&&S.render&&S.render())&&(_.data.replace(new Uint8Array(S.data.buffer)),!0)}ne.suppressClick=function(){E.window.addEventListener("click",Re,!0),E.window.setTimeout(function(){E.window.removeEventListener("click",Re,!0)},0)},ne.mousePos=function(_,S){var x=_.getBoundingClientRect();return new E.Point(S.clientX-x.left-_.clientLeft,S.clientY-x.top-_.clientTop)},ne.touchPos=function(_,S){for(var x=_.getBoundingClientRect(),O=[],k=0;k<S.length;k++)O.push(new E.Point(S[k].clientX-x.left-_.clientLeft,S[k].clientY-x.top-_.clientTop));return O},ne.mouseButton=function(_){return E.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&E.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button},ne.remove=function(_){_.parentNode&&_.parentNode.removeChild(_)};var le=function(_){function S(){_.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new E.RGBAImage({width:1,height:1}),this.dirty=!0}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.isLoaded=function(){return this.loaded},S.prototype.setLoaded=function(x){if(this.loaded!==x&&(this.loaded=x,x)){for(var O=0,k=this.requestors;O<k.length;O+=1){var Z=k[O];this._notify(Z.ids,Z.callback)}this.requestors=[]}},S.prototype.getImage=function(x){return this.images[x]},S.prototype.addImage=function(x,O){this._validate(x,O)&&(this.images[x]=O)},S.prototype._validate=function(x,O){var k=!0;return this._validateStretch(O.stretchX,O.data&&O.data.width)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchX" value'))),k=!1),this._validateStretch(O.stretchY,O.data&&O.data.height)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchY" value'))),k=!1),this._validateContent(O.content,O)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "content" value'))),k=!1),k},S.prototype._validateStretch=function(x,O){if(!x)return!0;for(var k=0,Z=0,J=x;Z<J.length;Z+=1){var ge=J[Z];if(ge[0]<k||ge[1]<ge[0]||O<ge[1])return!1;k=ge[1]}return!0},S.prototype._validateContent=function(x,O){return!(x&&(x.length!==4||x[0]<0||O.data.width<x[0]||x[1]<0||O.data.height<x[1]||x[2]<0||O.data.width<x[2]||x[3]<0||O.data.height<x[3]||x[2]<x[0]||x[3]<x[1]))},S.prototype.updateImage=function(x,O){O.version=this.images[x].version+1,this.images[x]=O,this.updatedImages[x]=!0},S.prototype.removeImage=function(x){var O=this.images[x];delete this.images[x],delete this.patterns[x],O.userImage&&O.userImage.onRemove&&O.userImage.onRemove()},S.prototype.listImages=function(){return Object.keys(this.images)},S.prototype.getImages=function(x,O){var k=!0;if(!this.isLoaded())for(var Z=0,J=x;Z<J.length;Z+=1)this.images[J[Z]]||(k=!1);this.isLoaded()||k?this._notify(x,O):this.requestors.push({ids:x,callback:O})},S.prototype._notify=function(x,O){for(var k={},Z=0,J=x;Z<J.length;Z+=1){var ge=J[Z];this.images[ge]||this.fire(new E.Event("styleimagemissing",{id:ge}));var We=this.images[ge];We?k[ge]={data:We.data.clone(),pixelRatio:We.pixelRatio,sdf:We.sdf,version:We.version,stretchX:We.stretchX,stretchY:We.stretchY,content:We.content,hasRenderCallback:!!(We.userImage&&We.userImage.render)}:E.warnOnce('Image "'+ge+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}O(null,k)},S.prototype.getPixelSize=function(){var x=this.atlasImage;return{width:x.width,height:x.height}},S.prototype.getPattern=function(x){var O=this.patterns[x],k=this.getImage(x);if(!k)return null;if(O&&O.position.version===k.version)return O.position;if(O)O.position.version=k.version;else{var Z={w:k.data.width+2,h:k.data.height+2,x:0,y:0},J=new E.ImagePosition(Z,k);this.patterns[x]={bin:Z,position:J}}return this._updatePatternAtlas(),this.patterns[x].position},S.prototype.bind=function(x){var O=x.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new E.Texture(x,this.atlasImage,O.RGBA),this.atlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE)},S.prototype._updatePatternAtlas=function(){var x=[];for(var O in this.patterns)x.push(this.patterns[O].bin);var k=E.potpack(x),Z=k.w,J=k.h,ge=this.atlasImage;for(var We in ge.resize({width:Z||1,height:J||1}),this.patterns){var ht=this.patterns[We].bin,Ut=ht.x+1,Ht=ht.y+1,Xt=this.images[We].data,bn=Xt.width,mn=Xt.height;E.RGBAImage.copy(Xt,ge,{x:0,y:0},{x:Ut,y:Ht},{width:bn,height:mn}),E.RGBAImage.copy(Xt,ge,{x:0,y:mn-1},{x:Ut,y:Ht-1},{width:bn,height:1}),E.RGBAImage.copy(Xt,ge,{x:0,y:0},{x:Ut,y:Ht+mn},{width:bn,height:1}),E.RGBAImage.copy(Xt,ge,{x:bn-1,y:0},{x:Ut-1,y:Ht},{width:1,height:mn}),E.RGBAImage.copy(Xt,ge,{x:0,y:0},{x:Ut+bn,y:Ht},{width:1,height:mn})}this.dirty=!0},S.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},S.prototype.dispatchRenderCallbacks=function(x){for(var O=0,k=x;O<k.length;O+=1){var Z=k[O];if(!this.callbackDispatchedThisFrame[Z]){this.callbackDispatchedThisFrame[Z]=!0;var J=this.images[Z];Y(J)&&this.updateImage(Z,J)}}},S}(E.Evented),K=Je,_e=Je,et=1e20;function Je(_,S,x,O,k,Z){this.fontSize=_||24,this.buffer=S===void 0?3:S,this.cutoff=O||.25,this.fontFamily=k||"sans-serif",this.fontWeight=Z||"normal",this.radius=x||8;var J=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=J,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(J*J),this.gridInner=new Float64Array(J*J),this.f=new Float64Array(J),this.d=new Float64Array(J),this.z=new Float64Array(J+1),this.v=new Int16Array(J),this.middle=Math.round(J/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ot(_,S,x,O,k,Z,J){for(var ge=0;ge<S;ge++){for(var We=0;We<x;We++)O[We]=_[We*S+ge];for(dt(O,k,Z,J,x),We=0;We<x;We++)_[We*S+ge]=k[We]}for(We=0;We<x;We++){for(ge=0;ge<S;ge++)O[ge]=_[We*S+ge];for(dt(O,k,Z,J,S),ge=0;ge<S;ge++)_[We*S+ge]=Math.sqrt(k[ge])}}function dt(_,S,x,O,k){x[0]=0,O[0]=-et,O[1]=+et;for(var Z=1,J=0;Z<k;Z++){for(var ge=(_[Z]+Z*Z-(_[x[J]]+x[J]*x[J]))/(2*Z-2*x[J]);ge<=O[J];)J--,ge=(_[Z]+Z*Z-(_[x[J]]+x[J]*x[J]))/(2*Z-2*x[J]);x[++J]=Z,O[J]=ge,O[J+1]=+et}for(Z=0,J=0;Z<k;Z++){for(;O[J+1]<Z;)J++;S[Z]=(Z-x[J])*(Z-x[J])+_[x[J]]}}Je.prototype.draw=function(_){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(_,this.buffer,this.middle);for(var S=this.ctx.getImageData(0,0,this.size,this.size),x=new Uint8ClampedArray(this.size*this.size),O=0;O<this.size*this.size;O++){var k=S.data[4*O+3]/255;this.gridOuter[O]=k===1?0:k===0?et:Math.pow(Math.max(0,.5-k),2),this.gridInner[O]=k===1?et:k===0?0:Math.pow(Math.max(0,k-.5),2)}for(Ot(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ot(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),O=0;O<this.size*this.size;O++)x[O]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[O]-this.gridInner[O])/this.radius+this.cutoff))));return x},K.default=_e;var bt=function(_,S){this.requestManager=_,this.localIdeographFontFamily=S,this.entries={}};bt.prototype.setURL=function(_){this.url=_},bt.prototype.getGlyphs=function(_,S){var x=this,O=[];for(var k in _)for(var Z=0,J=_[k];Z<J.length;Z+=1)O.push({stack:k,id:J[Z]});E.asyncAll(O,function(ge,We){var ht=ge.stack,Ut=ge.id,Ht=x.entries[ht];Ht||(Ht=x.entries[ht]={glyphs:{},requests:{},ranges:{}});var Xt=Ht.glyphs[Ut];if(Xt===void 0){if(Xt=x._tinySDF(Ht,ht,Ut))return Ht.glyphs[Ut]=Xt,void We(null,{stack:ht,id:Ut,glyph:Xt});var bn=Math.floor(Ut/256);if(256*bn>65535)We(new Error("glyphs > 65535 not supported"));else if(Ht.ranges[bn])We(null,{stack:ht,id:Ut,glyph:Xt});else{var mn=Ht.requests[bn];mn||(mn=Ht.requests[bn]=[],bt.loadGlyphRange(ht,bn,x.url,x.requestManager,function(zn,an){if(an){for(var kn in an)x._doesCharSupportLocalGlyph(+kn)||(Ht.glyphs[+kn]=an[+kn]);Ht.ranges[bn]=!0}for(var er=0,vr=mn;er<vr.length;er+=1)(0,vr[er])(zn,an);delete Ht.requests[bn]})),mn.push(function(zn,an){zn?We(zn):an&&We(null,{stack:ht,id:Ut,glyph:an[Ut]||null})})}}else We(null,{stack:ht,id:Ut,glyph:Xt})},function(ge,We){if(ge)S(ge);else if(We){for(var ht={},Ut=0,Ht=We;Ut<Ht.length;Ut+=1){var Xt=Ht[Ut],bn=Xt.stack,mn=Xt.id,zn=Xt.glyph;(ht[bn]||(ht[bn]={}))[mn]=zn&&{id:zn.id,bitmap:zn.bitmap.clone(),metrics:zn.metrics}}S(null,ht)}})},bt.prototype._doesCharSupportLocalGlyph=function(_){return!!this.localIdeographFontFamily&&(E.isChar["CJK Unified Ideographs"](_)||E.isChar["Hangul Syllables"](_)||E.isChar.Hiragana(_)||E.isChar.Katakana(_))},bt.prototype._tinySDF=function(_,S,x){var O=this.localIdeographFontFamily;if(O&&this._doesCharSupportLocalGlyph(x)){var k=_.tinySDF;if(!k){var Z="400";/bold/i.test(S)?Z="900":/medium/i.test(S)?Z="500":/light/i.test(S)&&(Z="200"),k=_.tinySDF=new bt.TinySDF(24,3,8,.25,O,Z)}return{id:x,bitmap:new E.AlphaImage({width:30,height:30},k.draw(String.fromCharCode(x))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},bt.loadGlyphRange=function(_,S,x,O,k){var Z=256*S,J=Z+255,ge=O.transformRequest(O.normalizeGlyphsURL(x).replace("{fontstack}",_).replace("{range}",Z+"-"+J),E.ResourceType.Glyphs);E.getArrayBuffer(ge,function(We,ht){if(We)k(We);else if(ht){for(var Ut={},Ht=0,Xt=E.parseGlyphPBF(ht);Ht<Xt.length;Ht+=1){var bn=Xt[Ht];Ut[bn.id]=bn}k(null,Ut)}})},bt.TinySDF=K;var Me=function(){this.specification=E.styleSpec.light.position};Me.prototype.possiblyEvaluate=function(_,S){return E.sphericalToCartesian(_.expression.evaluate(S))},Me.prototype.interpolate=function(_,S,x){return{x:E.number(_.x,S.x,x),y:E.number(_.y,S.y,x),z:E.number(_.z,S.z,x)}};var we=new E.Properties({anchor:new E.DataConstantProperty(E.styleSpec.light.anchor),position:new Me,color:new E.DataConstantProperty(E.styleSpec.light.color),intensity:new E.DataConstantProperty(E.styleSpec.light.intensity)}),je=function(_){function S(x){_.call(this),this._transitionable=new E.Transitionable(we),this.setLight(x),this._transitioning=this._transitionable.untransitioned()}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getLight=function(){return this._transitionable.serialize()},S.prototype.setLight=function(x,O){if(O===void 0&&(O={}),!this._validate(E.validateLight,x,O))for(var k in x){var Z=x[k];E.endsWith(k,"-transition")?this._transitionable.setTransition(k.slice(0,-11),Z):this._transitionable.setValue(k,Z)}},S.prototype.updateTransitions=function(x){this._transitioning=this._transitionable.transitioned(x,this._transitioning)},S.prototype.hasTransition=function(){return this._transitioning.hasTransition()},S.prototype.recalculate=function(x){this.properties=this._transitioning.possiblyEvaluate(x)},S.prototype._validate=function(x,O,k){return(!k||k.validate!==!1)&&E.emitValidationErrors(this,x.call(E.validateStyle,E.extend({value:O,style:{glyphs:!0,sprite:!0},styleSpec:E.styleSpec})))},S}(E.Evented),Ze=function(_,S){this.width=_,this.height=S,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ze.prototype.getDash=function(_,S){var x=_.join(",")+String(S);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(_,S)),this.dashEntry[x]},Ze.prototype.getDashRanges=function(_,S,x){var O=[],k=_.length%2==1?-_[_.length-1]*x:0,Z=_[0]*x,J=!0;O.push({left:k,right:Z,isDash:J,zeroLength:_[0]===0});for(var ge=_[0],We=1;We<_.length;We++){var ht=_[We];O.push({left:k=ge*x,right:Z=(ge+=ht)*x,isDash:J=!J,zeroLength:ht===0})}return O},Ze.prototype.addRoundDash=function(_,S,x){for(var O=S/2,k=-x;k<=x;k++)for(var Z=this.width*(this.nextRow+x+k),J=0,ge=_[J],We=0;We<this.width;We++){We/ge.right>1&&(ge=_[++J]);var ht=Math.abs(We-ge.left),Ut=Math.abs(We-ge.right),Ht=Math.min(ht,Ut),Xt=void 0,bn=k/x*(O+1);if(ge.isDash){var mn=O-Math.abs(bn);Xt=Math.sqrt(Ht*Ht+mn*mn)}else Xt=O-Math.sqrt(Ht*Ht+bn*bn);this.data[Z+We]=Math.max(0,Math.min(255,Xt+128))}},Ze.prototype.addRegularDash=function(_){for(var S=_.length-1;S>=0;--S){var x=_[S],O=_[S+1];x.zeroLength?_.splice(S,1):O&&O.isDash===x.isDash&&(O.left=x.left,_.splice(S,1))}var k=_[0],Z=_[_.length-1];k.isDash===Z.isDash&&(k.left=Z.left-this.width,Z.right=k.right+this.width);for(var J=this.width*this.nextRow,ge=0,We=_[ge],ht=0;ht<this.width;ht++){ht/We.right>1&&(We=_[++ge]);var Ut=Math.abs(ht-We.left),Ht=Math.abs(ht-We.right),Xt=Math.min(Ut,Ht);this.data[J+ht]=Math.max(0,Math.min(255,(We.isDash?Xt:-Xt)+128))}},Ze.prototype.addDash=function(_,S){var x=S?7:0,O=2*x+1;if(this.nextRow+O>this.height)return E.warnOnce("LineAtlas out of space"),null;for(var k=0,Z=0;Z<_.length;Z++)k+=_[Z];if(k!==0){var J=this.width/k,ge=this.getDashRanges(_,this.width,J);S?this.addRoundDash(ge,J,x):this.addRegularDash(ge)}var We={y:(this.nextRow+x+.5)/this.height,height:2*x/this.height,width:k};return this.nextRow+=O,this.dirty=!0,We},Ze.prototype.bind=function(_){var S=_.gl;this.texture?(S.bindTexture(S.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,S.texSubImage2D(S.TEXTURE_2D,0,0,0,this.width,this.height,S.ALPHA,S.UNSIGNED_BYTE,this.data))):(this.texture=S.createTexture(),S.bindTexture(S.TEXTURE_2D,this.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR),S.texImage2D(S.TEXTURE_2D,0,S.ALPHA,this.width,this.height,0,S.ALPHA,S.UNSIGNED_BYTE,this.data))};var ut=function _(S,x){this.workerPool=S,this.actors=[],this.currentActor=0,this.id=E.uniqueId();for(var O=this.workerPool.acquire(this.id),k=0;k<O.length;k++){var Z=new _.Actor(O[k],x,this.id);Z.name="Worker "+k,this.actors.push(Z)}};function Qt(_,S,x){var O=function(k,Z){if(k)return x(k);if(Z){var J=E.pick(E.extend(Z,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Z.vector_layers&&(J.vectorLayers=Z.vector_layers,J.vectorLayerIds=J.vectorLayers.map(function(ge){return ge.id})),J.tiles=S.canonicalizeTileset(J,_.url),x(null,J)}};return _.url?E.getJSON(S.transformRequest(S.normalizeSourceURL(_.url),E.ResourceType.Source),O):E.browser.frame(function(){return O(null,_)})}ut.prototype.broadcast=function(_,S,x){E.asyncAll(this.actors,function(O,k){O.send(_,S,k)},x=x||function(){})},ut.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ut.prototype.remove=function(){this.actors.forEach(function(_){_.remove()}),this.actors=[],this.workerPool.release(this.id)},ut.Actor=E.Actor;var De=function(_,S,x){this.bounds=E.LngLatBounds.convert(this.validateBounds(_)),this.minzoom=S||0,this.maxzoom=x||24};De.prototype.validateBounds=function(_){return Array.isArray(_)&&_.length===4?[Math.max(-180,_[0]),Math.max(-90,_[1]),Math.min(180,_[2]),Math.min(90,_[3])]:[-180,-90,180,90]},De.prototype.contains=function(_){var S=Math.pow(2,_.z),x=Math.floor(E.mercatorXfromLng(this.bounds.getWest())*S),O=Math.floor(E.mercatorYfromLat(this.bounds.getNorth())*S),k=Math.ceil(E.mercatorXfromLng(this.bounds.getEast())*S),Z=Math.ceil(E.mercatorYfromLat(this.bounds.getSouth())*S);return _.x>=x&&_.x<k&&_.y>=O&&_.y<Z};var St=function(_){function S(x,O,k,Z){if(_.call(this),this.id=x,this.dispatcher=k,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,E.extend(this,E.pick(O,["url","scheme","tileSize","promoteId"])),this._options=E.extend({type:"vector"},O),this._collectResourceTiming=O.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Z)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Qt(this._options,this.map._requestManager,function(O,k){x._tileJSONRequest=null,x._loaded=!0,O?x.fire(new E.ErrorEvent(O)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new De(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles,x.map._requestManager._customAccessToken),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken,x.map._requestManager._customAccessToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setSourceProperty=function(x){this._tileJSONRequest&&this._tileJSONRequest.cancel(),x(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},S.prototype.setTiles=function(x){var O=this;return this.setSourceProperty(function(){O._options.tiles=x}),this},S.prototype.setUrl=function(x){var O=this;return this.setSourceProperty(function(){O.url=x,O._options.url=x}),this},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.loadTile=function(x,O){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme)),Z={request:this.map._requestManager.transformRequest(k,E.ResourceType.Tile),uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,tileSize:this.tileSize*x.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function J(ge,We){return delete x.request,x.aborted?O(null):ge&&ge.status!==404?O(ge):(We&&We.resourceTiming&&(x.resourceTiming=We.resourceTiming),this.map._refreshExpiredTiles&&We&&x.setExpiryData(We),x.loadVectorData(We,this.map.painter),E.cacheEntryPossiblyAdded(this.dispatcher),O(null),void(x.reloadCallback&&(this.loadTile(x,x.reloadCallback),x.reloadCallback=null)))}Z.request.collectResourceTiming=this._collectResourceTiming,x.actor&&x.state!=="expired"?x.state==="loading"?x.reloadCallback=O:x.request=x.actor.send("reloadTile",Z,J.bind(this)):(x.actor=this.dispatcher.getActor(),x.request=x.actor.send("loadTile",Z,J.bind(this)))},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.actor&&x.actor.send("abortTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.unloadTile=function(x){x.unloadVectorData(),x.actor&&x.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.hasTransition=function(){return!1},S}(E.Evented),Oe=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.dispatcher=k,this.setEventedParent(Z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=E.extend({type:"raster"},O),E.extend(this,E.pick(O,["url","scheme","tileSize"]))}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Qt(this._options,this.map._requestManager,function(O,k){x._tileJSONRequest=null,x._loaded=!0,O?x.fire(new E.ErrorEvent(O)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new De(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.loadTile=function(x,O){var k=this,Z=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);x.request=E.getImage(this.map._requestManager.transformRequest(Z,E.ResourceType.Tile),function(J,ge){if(delete x.request,x.aborted)x.state="unloaded",O(null);else if(J)x.state="errored",O(J);else if(ge){k.map._refreshExpiredTiles&&x.setExpiryData(ge),delete ge.cacheControl,delete ge.expires;var We=k.map.painter.context,ht=We.gl;x.texture=k.map.painter.getTileTexture(ge.width),x.texture?x.texture.update(ge,{useMipmap:!0}):(x.texture=new E.Texture(We,ge,ht.RGBA,{useMipmap:!0}),x.texture.bind(ht.LINEAR,ht.CLAMP_TO_EDGE,ht.LINEAR_MIPMAP_NEAREST),We.extTextureFilterAnisotropic&&ht.texParameterf(ht.TEXTURE_2D,We.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,We.extTextureFilterAnisotropicMax)),x.state="loaded",E.cacheEntryPossiblyAdded(k.dispatcher),O(null)}})},S.prototype.abortTile=function(x,O){x.request&&(x.request.cancel(),delete x.request),O()},S.prototype.unloadTile=function(x,O){x.texture&&this.map.painter.saveTileTexture(x.texture),O()},S.prototype.hasTransition=function(){return!1},S}(E.Evented),it=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),this.type="raster-dem",this.maxzoom=22,this._options=E.extend({type:"raster-dem"},O),this.encoding=O.encoding||"mapbox"}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},S.prototype.loadTile=function(x,O){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Z(J,ge){J&&(x.state="errored",O(J)),ge&&(x.dem=ge,x.needsHillshadePrepare=!0,x.state="loaded",O(null))}x.request=E.getImage(this.map._requestManager.transformRequest(k,E.ResourceType.Tile),function(J,ge){if(delete x.request,x.aborted)x.state="unloaded",O(null);else if(J)x.state="errored",O(J);else if(ge){this.map._refreshExpiredTiles&&x.setExpiryData(ge),delete ge.cacheControl,delete ge.expires;var We=E.window.ImageBitmap&&ge instanceof E.window.ImageBitmap&&E.offscreenCanvasSupported()?ge:E.browser.getImageData(ge,1),ht={uid:x.uid,coord:x.tileID,source:this.id,rawImageData:We,encoding:this.encoding};x.actor&&x.state!=="expired"||(x.actor=this.dispatcher.getActor(),x.actor.send("loadDEMTile",ht,Z.bind(this)))}}.bind(this)),x.neighboringTiles=this._getNeighboringTiles(x.tileID)},S.prototype._getNeighboringTiles=function(x){var O=x.canonical,k=Math.pow(2,O.z),Z=(O.x-1+k)%k,J=O.x===0?x.wrap-1:x.wrap,ge=(O.x+1+k)%k,We=O.x+1===k?x.wrap+1:x.wrap,ht={};return ht[new E.OverscaledTileID(x.overscaledZ,J,O.z,Z,O.y).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,We,O.z,ge,O.y).key]={backfilled:!1},O.y>0&&(ht[new E.OverscaledTileID(x.overscaledZ,J,O.z,Z,O.y-1).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,x.wrap,O.z,O.x,O.y-1).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,We,O.z,ge,O.y-1).key]={backfilled:!1}),O.y+1<k&&(ht[new E.OverscaledTileID(x.overscaledZ,J,O.z,Z,O.y+1).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,x.wrap,O.z,O.x,O.y+1).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,We,O.z,ge,O.y+1).key]={backfilled:!1}),ht},S.prototype.unloadTile=function(x){x.demTexture&&this.map.painter.saveTileTexture(x.demTexture),x.fbo&&(x.fbo.destroy(),delete x.fbo),x.dem&&delete x.dem,delete x.neighboringTiles,x.state="unloaded",x.actor&&x.actor.send("removeDEMTile",{uid:x.uid,source:this.id})},S}(Oe),Ke=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=k.getActor(),this.setEventedParent(Z),this._data=O.data,this._options=E.extend({},O),this._collectResourceTiming=O.collectResourceTiming,this._resourceTiming=[],O.maxzoom!==void 0&&(this.maxzoom=O.maxzoom),O.type&&(this.type=O.type),O.attribution&&(this.attribution=O.attribution),this.promoteId=O.promoteId;var J=E.EXTENT/this.tileSize;this.workerOptions=E.extend({source:this.id,cluster:O.cluster||!1,geojsonVtOptions:{buffer:(O.buffer!==void 0?O.buffer:128)*J,tolerance:(O.tolerance!==void 0?O.tolerance:.375)*J,extent:E.EXTENT,maxZoom:this.maxzoom,lineMetrics:O.lineMetrics||!1,generateId:O.generateId||!1},superclusterOptions:{maxZoom:O.clusterMaxZoom!==void 0?Math.min(O.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,O.clusterMinPoints||2),extent:E.EXTENT,radius:(O.clusterRadius||50)*J,log:!1,generateId:O.generateId||!1},clusterProperties:O.clusterProperties,filter:O.filter},O.workerOptions)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(O){if(O)x.fire(new E.ErrorEvent(O));else{var k={dataType:"source",sourceDataType:"metadata"};x._collectResourceTiming&&x._resourceTiming&&x._resourceTiming.length>0&&(k.resourceTiming=x._resourceTiming,x._resourceTiming=[]),x.fire(new E.Event("data",k))}})},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setData=function(x){var O=this;return this._data=x,this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(k){if(k)O.fire(new E.ErrorEvent(k));else{var Z={dataType:"source",sourceDataType:"content"};O._collectResourceTiming&&O._resourceTiming&&O._resourceTiming.length>0&&(Z.resourceTiming=O._resourceTiming,O._resourceTiming=[]),O.fire(new E.Event("data",Z))}}),this},S.prototype.getClusterExpansionZoom=function(x,O){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:x,source:this.id},O),this},S.prototype.getClusterChildren=function(x,O){return this.actor.send("geojson.getClusterChildren",{clusterId:x,source:this.id},O),this},S.prototype.getClusterLeaves=function(x,O,k,Z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:x,limit:O,offset:k},Z),this},S.prototype._updateWorkerData=function(x){var O=this;this._loaded=!1;var k=E.extend({},this.workerOptions),Z=this._data;typeof Z=="string"?(k.request=this.map._requestManager.transformRequest(E.browser.resolveURL(Z),E.ResourceType.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(Z),this.actor.send(this.type+".loadData",k,function(J,ge){O._removed||ge&&ge.abandoned||(O._loaded=!0,ge&&ge.resourceTiming&&ge.resourceTiming[O.id]&&(O._resourceTiming=ge.resourceTiming[O.id].slice(0)),O.actor.send(O.type+".coalesce",{source:k.source},null),x(J))})},S.prototype.loaded=function(){return this._loaded},S.prototype.loadTile=function(x,O){var k=this,Z=x.actor?"reloadTile":"loadTile";x.actor=this.actor,x.request=this.actor.send(Z,{type:this.type,uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(J,ge){return delete x.request,x.unloadVectorData(),x.aborted?O(null):J?O(J):(x.loadVectorData(ge,k.map.painter,Z==="reloadTile"),O(null))})},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.aborted=!0},S.prototype.unloadTile=function(x){x.unloadVectorData(),this.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id})},S.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},S.prototype.serialize=function(){return E.extend({},this._options,{type:this.type,data:this._data})},S.prototype.hasTransition=function(){return!1},S}(E.Evented),Xe=E.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Pt=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.dispatcher=k,this.coordinates=O.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Z),this.options=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(x,O){var k=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this.url=this.options.url,E.getImage(this.map._requestManager.transformRequest(this.url,E.ResourceType.Image),function(Z,J){k._loaded=!0,Z?k.fire(new E.ErrorEvent(Z)):J&&(k.image=J,x&&(k.coordinates=x),O&&O(),k._finishLoading())})},S.prototype.loaded=function(){return this._loaded},S.prototype.updateImage=function(x){var O=this;return this.image&&x.url?(this.options.url=x.url,this.load(x.coordinates,function(){O.texture=null}),this):this},S.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})))},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setCoordinates=function(x){var O=this;this.coordinates=x;var k=x.map(E.MercatorCoordinate.fromLngLat);this.tileID=function(J){for(var ge=1/0,We=1/0,ht=-1/0,Ut=-1/0,Ht=0,Xt=J;Ht<Xt.length;Ht+=1){var bn=Xt[Ht];ge=Math.min(ge,bn.x),We=Math.min(We,bn.y),ht=Math.max(ht,bn.x),Ut=Math.max(Ut,bn.y)}var mn=Math.max(ht-ge,Ut-We),zn=Math.max(0,Math.floor(-Math.log(mn)/Math.LN2)),an=Math.pow(2,zn);return new E.CanonicalTileID(zn,Math.floor((ge+ht)/2*an),Math.floor((We+Ut)/2*an))}(k),this.minzoom=this.maxzoom=this.tileID.z;var Z=k.map(function(J){return O.tileID.getTilePoint(J)._round()});return this._boundsArray=new E.StructArrayLayout4i8,this._boundsArray.emplaceBack(Z[0].x,Z[0].y,0,0),this._boundsArray.emplaceBack(Z[1].x,Z[1].y,E.EXTENT,0),this._boundsArray.emplaceBack(Z[3].x,Z[3].y,0,E.EXTENT),this._boundsArray.emplaceBack(Z[2].x,Z[2].y,E.EXTENT,E.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})),this},S.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var x=this.map.painter.context,O=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Xe.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new E.Texture(x,this.image,O.RGBA),this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE)),this.tiles){var Z=this.tiles[k];Z.state!=="loaded"&&(Z.state="loaded",Z.texture=this.texture)}}},S.prototype.loadTile=function(x,O){this.tileID&&this.tileID.equals(x.tileID.canonical)?(this.tiles[String(x.tileID.wrap)]=x,x.buckets={},O(null)):(x.state="errored",O(null))},S.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return!1},S}(E.Evented),xt=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),this.roundZoom=!0,this.type="video",this.options=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1;var O=this.options;this.urls=[];for(var k=0,Z=O.urls;k<Z.length;k+=1)this.urls.push(this.map._requestManager.transformRequest(Z[k],E.ResourceType.Source).url);E.getVideo(this.urls,function(J,ge){x._loaded=!0,J?x.fire(new E.ErrorEvent(J)):ge&&(x.video=ge,x.video.loop=!0,x.video.setAttribute("playsinline",""),x.video.addEventListener("playing",function(){x.map.triggerRepaint()}),x.map&&x.video.play(),x._finishLoading())})},S.prototype.pause=function(){this.video&&this.video.pause()},S.prototype.play=function(){this.video&&this.video.play()},S.prototype.seek=function(x){if(this.video){var O=this.video.seekable;x<O.start(0)||x>O.end(0)?this.fire(new E.ErrorEvent(new E.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+O.start(0)+" and "+O.end(0)+"-second mark."))):this.video.currentTime=x}},S.prototype.getVideo=function(){return this.video},S.prototype.onAdd=function(x){this.map||(this.map=x,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},S.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var x=this.map.painter.context,O=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Xe.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE),O.texSubImage2D(O.TEXTURE_2D,0,0,0,O.RGBA,O.UNSIGNED_BYTE,this.video)):(this.texture=new E.Texture(x,this.video,O.RGBA),this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE)),this.tiles){var Z=this.tiles[k];Z.state!=="loaded"&&(Z.state="loaded",Z.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this.video&&!this.video.paused},S}(Pt),Ie=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),O.coordinates?Array.isArray(O.coordinates)&&O.coordinates.length===4&&!O.coordinates.some(function(J){return!Array.isArray(J)||J.length!==2||J.some(function(ge){return typeof ge!="number"})})||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "coordinates"'))),O.animate&&typeof O.animate!="boolean"&&this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'optional "animate" property must be a boolean value'))),O.canvas?typeof O.canvas=="string"||O.canvas instanceof E.window.HTMLCanvasElement||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "canvas"'))),this.options=O,this.animate=O.animate===void 0||O.animate}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof E.window.HTMLCanvasElement?this.options.canvas:E.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new E.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},S.prototype.getCanvas=function(){return this.canvas},S.prototype.onAdd=function(x){this.map=x,this.load(),this.canvas&&this.animate&&this.play()},S.prototype.onRemove=function(){this.pause()},S.prototype.prepare=function(){var x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var O=this.map.painter.context,k=O.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=O.createVertexBuffer(this._boundsArray,Xe.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new E.Texture(O,this.canvas,k.RGBA,{premultiply:!0}),this.tiles){var J=this.tiles[Z];J.state!=="loaded"&&(J.state="loaded",J.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this._playing},S.prototype._hasInvalidDimensions=function(){for(var x=0,O=[this.canvas.width,this.canvas.height];x<O.length;x+=1){var k=O[x];if(isNaN(k)||k<=0)return!0}return!1},S}(Pt),Wt={vector:St,raster:Oe,"raster-dem":it,geojson:Ke,video:xt,image:Pt,canvas:Ie};function hn(_,S){var x=E.identity([]);return E.translate(x,x,[1,1,0]),E.scale(x,x,[.5*_.width,.5*_.height,1]),E.multiply(x,x,_.calculatePosMatrix(S.toUnwrapped()))}function Pn(_,S,x,O,k,Z){var J=function(zn,an,kn){if(zn)for(var er=0,vr=zn;er<vr.length;er+=1){var Mr=an[vr[er]];if(Mr&&Mr.source===kn&&Mr.type==="fill-extrusion")return!0}else for(var wr in an){var Fr=an[wr];if(Fr.source===kn&&Fr.type==="fill-extrusion")return!0}return!1}(k&&k.layers,S,_.id),ge=Z.maxPitchScaleFactor(),We=_.tilesIn(O,ge,J);We.sort($n);for(var ht=[],Ut=0,Ht=We;Ut<Ht.length;Ut+=1){var Xt=Ht[Ut];ht.push({wrappedTileID:Xt.tileID.wrapped().key,queryResults:Xt.tile.queryRenderedFeatures(S,x,_._state,Xt.queryGeometry,Xt.cameraQueryGeometry,Xt.scale,k,Z,ge,hn(_.transform,Xt.tileID))})}var bn=function(zn){for(var an={},kn={},er=0,vr=zn;er<vr.length;er+=1){var Mr=vr[er],wr=Mr.queryResults,Fr=Mr.wrappedTileID,ti=kn[Fr]=kn[Fr]||{};for(var Ni in wr)for(var Pi=wr[Ni],lo=ti[Ni]=ti[Ni]||{},zo=an[Ni]=an[Ni]||[],Wo=0,Go=Pi;Wo<Go.length;Wo+=1){var as=Go[Wo];lo[as.featureIndex]||(lo[as.featureIndex]=!0,zo.push(as))}}return an}(ht);for(var mn in bn)bn[mn].forEach(function(zn){var an=zn.feature,kn=_.getFeatureState(an.layer["source-layer"],an.id);an.source=an.layer.source,an.layer["source-layer"]&&(an.sourceLayer=an.layer["source-layer"]),an.state=kn});return bn}function $n(_,S){var x=_.tileID,O=S.tileID;return x.overscaledZ-O.overscaledZ||x.canonical.y-O.canonical.y||x.wrap-O.wrap||x.canonical.x-O.canonical.x}var nr=function(_,S){this.max=_,this.onRemove=S,this.reset()};nr.prototype.reset=function(){for(var _ in this.data)for(var S=0,x=this.data[_];S<x.length;S+=1){var O=x[S];O.timeout&&clearTimeout(O.timeout),this.onRemove(O.value)}return this.data={},this.order=[],this},nr.prototype.add=function(_,S,x){var O=this,k=_.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);var Z={value:S,timeout:void 0};if(x!==void 0&&(Z.timeout=setTimeout(function(){O.remove(_,Z)},x)),this.data[k].push(Z),this.order.push(k),this.order.length>this.max){var J=this._getAndRemoveByKey(this.order[0]);J&&this.onRemove(J)}return this},nr.prototype.has=function(_){return _.wrapped().key in this.data},nr.prototype.getAndRemove=function(_){return this.has(_)?this._getAndRemoveByKey(_.wrapped().key):null},nr.prototype._getAndRemoveByKey=function(_){var S=this.data[_].shift();return S.timeout&&clearTimeout(S.timeout),this.data[_].length===0&&delete this.data[_],this.order.splice(this.order.indexOf(_),1),S.value},nr.prototype.getByKey=function(_){var S=this.data[_];return S?S[0].value:null},nr.prototype.get=function(_){return this.has(_)?this.data[_.wrapped().key][0].value:null},nr.prototype.remove=function(_,S){if(!this.has(_))return this;var x=_.wrapped().key,O=S===void 0?0:this.data[x].indexOf(S),k=this.data[x][O];return this.data[x].splice(O,1),k.timeout&&clearTimeout(k.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(k.value),this.order.splice(this.order.indexOf(x),1),this},nr.prototype.setMaxSize=function(_){for(this.max=_;this.order.length>this.max;){var S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this},nr.prototype.filter=function(_){var S=[];for(var x in this.data)for(var O=0,k=this.data[x];O<k.length;O+=1){var Z=k[O];_(Z.value)||S.push(Z)}for(var J=0,ge=S;J<ge.length;J+=1){var We=ge[J];this.remove(We.value.tileID,We)}};var Ft=function(_,S,x){this.context=_;var O=_.gl;this.buffer=O.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),_.bindElementBuffer.set(this.buffer),O.bufferData(O.ELEMENT_ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};Ft.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ft.prototype.updateData=function(_){var S=this.context.gl;this.context.unbindVAO(),this.bind(),S.bufferSubData(S.ELEMENT_ARRAY_BUFFER,0,_.arrayBuffer)},Ft.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Jt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ln=function(_,S,x,O){this.length=S.length,this.attributes=x,this.itemSize=S.bytesPerElement,this.dynamicDraw=O,this.context=_;var k=_.gl;this.buffer=k.createBuffer(),_.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};ln.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ln.prototype.updateData=function(_){var S=this.context.gl;this.bind(),S.bufferSubData(S.ARRAY_BUFFER,0,_.arrayBuffer)},ln.prototype.enableAttributes=function(_,S){for(var x=0;x<this.attributes.length;x++){var O=S.attributes[this.attributes[x].name];O!==void 0&&_.enableVertexAttribArray(O)}},ln.prototype.setVertexAttribPointers=function(_,S,x){for(var O=0;O<this.attributes.length;O++){var k=this.attributes[O],Z=S.attributes[k.name];Z!==void 0&&_.vertexAttribPointer(Z,k.components,_[Jt[k.type]],!1,this.itemSize,k.offset+this.itemSize*(x||0))}},ln.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Un=function(_){this.gl=_.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Un.prototype.get=function(){return this.current},Un.prototype.set=function(_){},Un.prototype.getDefault=function(){return this.default},Un.prototype.setDefault=function(){this.set(this.default)};var on=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var O=this.current;(x.r!==O.r||x.g!==O.g||x.b!==O.b||x.a!==O.a||this.dirty)&&(this.gl.clearColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Un),zt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 1},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearDepth(x),this.current=x,this.dirty=!1)},S}(Un),kt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearStencil(x),this.current=x,this.dirty=!1)},S}(Un),ke=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[!0,!0,!0,!0]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||x[3]!==O[3]||this.dirty)&&(this.gl.colorMask(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Un),nt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthMask(x),this.current=x,this.dirty=!1)},S}(Un),Vt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 255},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.stencilMask(x),this.current=x,this.dirty=!1)},S}(Un),U=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},S.prototype.set=function(x){var O=this.current;(x.func!==O.func||x.ref!==O.ref||x.mask!==O.mask||this.dirty)&&(this.gl.stencilFunc(x.func,x.ref,x.mask),this.current=x,this.dirty=!1)},S}(Un),pe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.KEEP,x.KEEP,x.KEEP]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||this.dirty)&&(this.gl.stencilOp(x[0],x[1],x[2]),this.current=x,this.dirty=!1)},S}(Un),ct=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.STENCIL_TEST):O.disable(O.STENCIL_TEST),this.current=x,this.dirty=!1}},S}(Un),de=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[0,1]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||this.dirty)&&(this.gl.depthRange(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Un),Yt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.DEPTH_TEST):O.disable(O.DEPTH_TEST),this.current=x,this.dirty=!1}},S}(Un),sn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.LESS},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthFunc(x),this.current=x,this.dirty=!1)},S}(Un),pn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.BLEND):O.disable(O.BLEND),this.current=x,this.dirty=!1}},S}(Un),Dn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.ONE,x.ZERO]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||this.dirty)&&(this.gl.blendFunc(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Un),Wn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var O=this.current;(x.r!==O.r||x.g!==O.g||x.b!==O.b||x.a!==O.a||this.dirty)&&(this.gl.blendColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Un),Xn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.FUNC_ADD},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.blendEquation(x),this.current=x,this.dirty=!1)},S}(Un),dn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.CULL_FACE):O.disable(O.CULL_FACE),this.current=x,this.dirty=!1}},S}(Un),_t=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.BACK},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.cullFace(x),this.current=x,this.dirty=!1)},S}(Un),Rt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.CCW},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.frontFace(x),this.current=x,this.dirty=!1)},S}(Un),wn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.useProgram(x),this.current=x,this.dirty=!1)},S}(Un),In=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.TEXTURE0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.activeTexture(x),this.current=x,this.dirty=!1)},S}(Un),Zn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[0,0,x.drawingBufferWidth,x.drawingBufferHeight]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||x[3]!==O[3]||this.dirty)&&(this.gl.viewport(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Un),vt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindFramebuffer(O.FRAMEBUFFER,x),this.current=x,this.dirty=!1}},S}(Un),Ee=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindRenderbuffer(O.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}(Un),Fe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindTexture(O.TEXTURE_2D,x),this.current=x,this.dirty=!1}},S}(Un),st=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindBuffer(O.ARRAY_BUFFER,x),this.current=x,this.dirty=!1}},S}(Un),It=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){var O=this.gl;O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,x),this.current=x,this.dirty=!1},S}(Un),Mt=function(_){function S(x){_.call(this,x),this.vao=x.extVertexArrayObject}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){this.vao&&(x!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(x),this.current=x,this.dirty=!1)},S}(Un),En=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 4},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_ALIGNMENT,x),this.current=x,this.dirty=!1}},S}(Un),Yn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),this.current=x,this.dirty=!1}},S}(Un),yr=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,x),this.current=x,this.dirty=!1}},S}(Un),qn=function(_){function S(x,O){_.call(this,x),this.context=x,this.parent=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S}(Un),Pe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.setDirty=function(){this.dirty=!0},S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var O=this.gl;O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,x,0),this.current=x,this.dirty=!1}},S}(qn),Te=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var O=this.gl;O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_ATTACHMENT,O.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}(qn),Ue=function(_,S,x,O){this.context=_,this.width=S,this.height=x;var k=this.framebuffer=_.gl.createFramebuffer();this.colorAttachment=new Pe(_,k),O&&(this.depthAttachment=new Te(_,k))};Ue.prototype.destroy=function(){var _=this.context.gl,S=this.colorAttachment.get();if(S&&_.deleteTexture(S),this.depthAttachment){var x=this.depthAttachment.get();x&&_.deleteRenderbuffer(x)}_.deleteFramebuffer(this.framebuffer)};var ot=function(_,S,x){this.func=_,this.mask=S,this.range=x};ot.ReadOnly=!1,ot.ReadWrite=!0,ot.disabled=new ot(519,ot.ReadOnly,[0,1]);var wt=function(_,S,x,O,k,Z){this.test=_,this.ref=S,this.mask=x,this.fail=O,this.depthFail=k,this.pass=Z};wt.disabled=new wt({func:519,mask:0},0,0,7680,7680,7680);var $t=function(_,S,x){this.blendFunction=_,this.blendColor=S,this.mask=x};$t.disabled=new $t($t.Replace=[1,0],E.Color.transparent,[!1,!1,!1,!1]),$t.unblended=new $t($t.Replace,E.Color.transparent,[!0,!0,!0,!0]),$t.alphaBlended=new $t([1,771],E.Color.transparent,[!0,!0,!0,!0]);var vn=function(_,S,x){this.enable=_,this.mode=S,this.frontFace=x};vn.disabled=new vn(!1,1029,2305),vn.backCCW=new vn(!0,1029,2305);var Et=function(_){this.gl=_,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new on(this),this.clearDepth=new zt(this),this.clearStencil=new kt(this),this.colorMask=new ke(this),this.depthMask=new nt(this),this.stencilMask=new Vt(this),this.stencilFunc=new U(this),this.stencilOp=new pe(this),this.stencilTest=new ct(this),this.depthRange=new de(this),this.depthTest=new Yt(this),this.depthFunc=new sn(this),this.blend=new pn(this),this.blendFunc=new Dn(this),this.blendColor=new Wn(this),this.blendEquation=new Xn(this),this.cullFace=new dn(this),this.cullFaceSide=new _t(this),this.frontFace=new Rt(this),this.program=new wn(this),this.activeTexture=new In(this),this.viewport=new Zn(this),this.bindFramebuffer=new vt(this),this.bindRenderbuffer=new Ee(this),this.bindTexture=new Fe(this),this.bindVertexBuffer=new st(this),this.bindElementBuffer=new It(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Mt(this),this.pixelStoreUnpack=new En(this),this.pixelStoreUnpackPremultiplyAlpha=new Yn(this),this.pixelStoreUnpackFlipY=new yr(this),this.extTextureFilterAnisotropic=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=_.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=_.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(_.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=_.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=_.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=_.getParameter(_.MAX_TEXTURE_SIZE)};Et.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Et.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Et.prototype.createIndexBuffer=function(_,S){return new Ft(this,_,S)},Et.prototype.createVertexBuffer=function(_,S,x){return new ln(this,_,S,x)},Et.prototype.createRenderbuffer=function(_,S,x){var O=this.gl,k=O.createRenderbuffer();return this.bindRenderbuffer.set(k),O.renderbufferStorage(O.RENDERBUFFER,_,S,x),this.bindRenderbuffer.set(null),k},Et.prototype.createFramebuffer=function(_,S,x){return new Ue(this,_,S,x)},Et.prototype.clear=function(_){var S=_.color,x=_.depth,O=this.gl,k=0;S&&(k|=O.COLOR_BUFFER_BIT,this.clearColor.set(S),this.colorMask.set([!0,!0,!0,!0])),x!==void 0&&(k|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(x),this.depthMask.set(!0)),O.clear(k)},Et.prototype.setCullFace=function(_){_.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(_.mode),this.frontFace.set(_.frontFace))},Et.prototype.setDepthMode=function(_){_.func!==this.gl.ALWAYS||_.mask?(this.depthTest.set(!0),this.depthFunc.set(_.func),this.depthMask.set(_.mask),this.depthRange.set(_.range)):this.depthTest.set(!1)},Et.prototype.setStencilMode=function(_){_.test.func!==this.gl.ALWAYS||_.mask?(this.stencilTest.set(!0),this.stencilMask.set(_.mask),this.stencilOp.set([_.fail,_.depthFail,_.pass]),this.stencilFunc.set({func:_.test.func,ref:_.ref,mask:_.test.mask})):this.stencilTest.set(!1)},Et.prototype.setColorMode=function(_){E.deepEqual(_.blendFunction,$t.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(_.blendFunction),this.blendColor.set(_.blendColor)),this.colorMask.set(_.mask)},Et.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Kt=function(_){function S(x,O,k){var Z=this;_.call(this),this.id=x,this.dispatcher=k,this.on("data",function(J){J.dataType==="source"&&J.sourceDataType==="metadata"&&(Z._sourceLoaded=!0),Z._sourceLoaded&&!Z._paused&&J.dataType==="source"&&J.sourceDataType==="content"&&(Z.reload(),Z.transform&&Z.update(Z.transform))}),this.on("error",function(){Z._sourceErrored=!0}),this._source=function(J,ge,We,ht){var Ut=new Wt[ge.type](J,ge,We,ht);if(Ut.id!==J)throw new Error("Expected Source id to be "+J+" instead of "+Ut.id);return E.bindAll(["load","abort","unload","serialize","prepare"],Ut),Ut}(x,O,k,this),this._tiles={},this._cache=new nr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new E.SourceFeatureState}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){this.map=x,this._maxTileCacheSize=x?x._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(x)},S.prototype.onRemove=function(x){this._source&&this._source.onRemove&&this._source.onRemove(x)},S.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var x in this._tiles){var O=this._tiles[x];if(O.state!=="loaded"&&O.state!=="errored")return!1}return!0},S.prototype.getSource=function(){return this._source},S.prototype.pause=function(){this._paused=!0},S.prototype.resume=function(){if(this._paused){var x=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,x&&this.reload(),this.transform&&this.update(this.transform)}},S.prototype._loadTile=function(x,O){return this._source.loadTile(x,O)},S.prototype._unloadTile=function(x){if(this._source.unloadTile)return this._source.unloadTile(x,function(){})},S.prototype._abortTile=function(x){if(this._source.abortTile)return this._source.abortTile(x,function(){})},S.prototype.serialize=function(){return this._source.serialize()},S.prototype.prepare=function(x){for(var O in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var k=this._tiles[O];k.upload(x),k.prepare(this.map.style.imageManager)}},S.prototype.getIds=function(){return E.values(this._tiles).map(function(x){return x.tileID}).sort(Qn).map(function(x){return x.key})},S.prototype.getRenderableIds=function(x){var O=this,k=[];for(var Z in this._tiles)this._isIdRenderable(Z,x)&&k.push(this._tiles[Z]);return x?k.sort(function(J,ge){var We=J.tileID,ht=ge.tileID,Ut=new E.Point(We.canonical.x,We.canonical.y)._rotate(O.transform.angle),Ht=new E.Point(ht.canonical.x,ht.canonical.y)._rotate(O.transform.angle);return We.overscaledZ-ht.overscaledZ||Ht.y-Ut.y||Ht.x-Ut.x}).map(function(J){return J.tileID.key}):k.map(function(J){return J.tileID}).sort(Qn).map(function(J){return J.key})},S.prototype.hasRenderableParent=function(x){var O=this.findLoadedParent(x,0);return!!O&&this._isIdRenderable(O.tileID.key)},S.prototype._isIdRenderable=function(x,O){return this._tiles[x]&&this._tiles[x].hasData()&&!this._coveredTiles[x]&&(O||!this._tiles[x].holdingForFade())},S.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var x in this._cache.reset(),this._tiles)this._tiles[x].state!=="errored"&&this._reloadTile(x,"reloading")},S.prototype._reloadTile=function(x,O){var k=this._tiles[x];k&&(k.state!=="loading"&&(k.state=O),this._loadTile(k,this._tileLoaded.bind(this,k,x,O)))},S.prototype._tileLoaded=function(x,O,k,Z){if(Z)return x.state="errored",void(Z.status!==404?this._source.fire(new E.ErrorEvent(Z,{tile:x})):this.update(this.transform));x.timeAdded=E.browser.now(),k==="expired"&&(x.refreshedUponExpiration=!0),this._setTileReloadTimer(O,x),this.getSource().type==="raster-dem"&&x.dem&&this._backfillDEM(x),this._state.initializeTileState(x,this.map?this.map.painter:null),this._source.fire(new E.Event("data",{dataType:"source",tile:x,coord:x.tileID}))},S.prototype._backfillDEM=function(x){for(var O=this.getRenderableIds(),k=0;k<O.length;k++){var Z=O[k];if(x.neighboringTiles&&x.neighboringTiles[Z]){var J=this.getTileByID(Z);ge(x,J),ge(J,x)}}function ge(We,ht){We.needsHillshadePrepare=!0;var Ut=ht.tileID.canonical.x-We.tileID.canonical.x,Ht=ht.tileID.canonical.y-We.tileID.canonical.y,Xt=Math.pow(2,We.tileID.canonical.z),bn=ht.tileID.key;Ut===0&&Ht===0||Math.abs(Ht)>1||(Math.abs(Ut)>1&&(Math.abs(Ut+Xt)===1?Ut+=Xt:Math.abs(Ut-Xt)===1&&(Ut-=Xt)),ht.dem&&We.dem&&(We.dem.backfillBorder(ht.dem,Ut,Ht),We.neighboringTiles&&We.neighboringTiles[bn]&&(We.neighboringTiles[bn].backfilled=!0)))}},S.prototype.getTile=function(x){return this.getTileByID(x.key)},S.prototype.getTileByID=function(x){return this._tiles[x]},S.prototype._retainLoadedChildren=function(x,O,k,Z){for(var J in this._tiles){var ge=this._tiles[J];if(!(Z[J]||!ge.hasData()||ge.tileID.overscaledZ<=O||ge.tileID.overscaledZ>k)){for(var We=ge.tileID;ge&&ge.tileID.overscaledZ>O+1;){var ht=ge.tileID.scaledTo(ge.tileID.overscaledZ-1);(ge=this._tiles[ht.key])&&ge.hasData()&&(We=ht)}for(var Ut=We;Ut.overscaledZ>O;)if(x[(Ut=Ut.scaledTo(Ut.overscaledZ-1)).key]){Z[We.key]=We;break}}}},S.prototype.findLoadedParent=function(x,O){if(x.key in this._loadedParentTiles){var k=this._loadedParentTiles[x.key];return k&&k.tileID.overscaledZ>=O?k:null}for(var Z=x.overscaledZ-1;Z>=O;Z--){var J=x.scaledTo(Z),ge=this._getLoadedTile(J);if(ge)return ge}},S.prototype._getLoadedTile=function(x){var O=this._tiles[x.key];return O&&O.hasData()?O:this._cache.getByKey(x.wrapped().key)},S.prototype.updateCacheSize=function(x){var O=Math.ceil(x.width/this._source.tileSize)+1,k=Math.ceil(x.height/this._source.tileSize)+1,Z=Math.floor(O*k*5),J=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Z):Z;this._cache.setMaxSize(J)},S.prototype.handleWrapJump=function(x){var O=Math.round((x-(this._prevLng===void 0?x:this._prevLng))/360);if(this._prevLng=x,O){var k={};for(var Z in this._tiles){var J=this._tiles[Z];J.tileID=J.tileID.unwrapTo(J.tileID.wrap+O),k[J.tileID.key]=J}for(var ge in this._tiles=k,this._timers)clearTimeout(this._timers[ge]),delete this._timers[ge];for(var We in this._tiles)this._setTileReloadTimer(We,this._tiles[We])}},S.prototype.update=function(x){var O=this;if(this.transform=x,this._sourceLoaded&&!this._paused){var k;this.updateCacheSize(x),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?k=x.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ti){return new E.OverscaledTileID(ti.canonical.z,ti.wrap,ti.canonical.z,ti.canonical.x,ti.canonical.y)}):(k=x.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(k=k.filter(function(ti){return O._source.hasTile(ti)}))):k=[];var Z=x.coveringZoomLevel(this._source),J=Math.max(Z-S.maxOverzooming,this._source.minzoom),ge=Math.max(Z+S.maxUnderzooming,this._source.minzoom),We=this._updateRetainedTiles(k,Z);if(_r(this._source.type)){for(var ht={},Ut={},Ht=0,Xt=Object.keys(We);Ht<Xt.length;Ht+=1){var bn=Xt[Ht],mn=We[bn],zn=this._tiles[bn];if(zn&&!(zn.fadeEndTime&&zn.fadeEndTime<=E.browser.now())){var an=this.findLoadedParent(mn,J);an&&(this._addTile(an.tileID),ht[an.tileID.key]=an.tileID),Ut[bn]=mn}}for(var kn in this._retainLoadedChildren(Ut,Z,ge,We),ht)We[kn]||(this._coveredTiles[kn]=!0,We[kn]=ht[kn])}for(var er in We)this._tiles[er].clearFadeHold();for(var vr=0,Mr=E.keysDifference(this._tiles,We);vr<Mr.length;vr+=1){var wr=Mr[vr],Fr=this._tiles[wr];Fr.hasSymbolBuckets&&!Fr.holdingForFade()?Fr.setHoldDuration(this.map._fadeDuration):Fr.hasSymbolBuckets&&!Fr.symbolFadeFinished()||this._removeTile(wr)}this._updateLoadedParentTileCache()}},S.prototype.releaseSymbolFadeTiles=function(){for(var x in this._tiles)this._tiles[x].holdingForFade()&&this._removeTile(x)},S.prototype._updateRetainedTiles=function(x,O){for(var k={},Z={},J=Math.max(O-S.maxOverzooming,this._source.minzoom),ge=Math.max(O+S.maxUnderzooming,this._source.minzoom),We={},ht=0,Ut=x;ht<Ut.length;ht+=1){var Ht=Ut[ht],Xt=this._addTile(Ht);k[Ht.key]=Ht,Xt.hasData()||O<this._source.maxzoom&&(We[Ht.key]=Ht)}this._retainLoadedChildren(We,O,ge,k);for(var bn=0,mn=x;bn<mn.length;bn+=1){var zn=mn[bn],an=this._tiles[zn.key];if(!an.hasData()){if(O+1>this._source.maxzoom){var kn=zn.children(this._source.maxzoom)[0],er=this.getTile(kn);if(er&&er.hasData()){k[kn.key]=kn;continue}}else{var vr=zn.children(this._source.maxzoom);if(k[vr[0].key]&&k[vr[1].key]&&k[vr[2].key]&&k[vr[3].key])continue}for(var Mr=an.wasRequested(),wr=zn.overscaledZ-1;wr>=J;--wr){var Fr=zn.scaledTo(wr);if(Z[Fr.key]||(Z[Fr.key]=!0,!(an=this.getTile(Fr))&&Mr&&(an=this._addTile(Fr)),an&&(k[Fr.key]=Fr,Mr=an.wasRequested(),an.hasData())))break}}}return k},S.prototype._updateLoadedParentTileCache=function(){for(var x in this._loadedParentTiles={},this._tiles){for(var O=[],k=void 0,Z=this._tiles[x].tileID;Z.overscaledZ>0;){if(Z.key in this._loadedParentTiles){k=this._loadedParentTiles[Z.key];break}O.push(Z.key);var J=Z.scaledTo(Z.overscaledZ-1);if(k=this._getLoadedTile(J))break;Z=J}for(var ge=0,We=O;ge<We.length;ge+=1)this._loadedParentTiles[We[ge]]=k}},S.prototype._addTile=function(x){var O=this._tiles[x.key];if(O)return O;(O=this._cache.getAndRemove(x))&&(this._setTileReloadTimer(x.key,O),O.tileID=x,this._state.initializeTileState(O,this.map?this.map.painter:null),this._cacheTimers[x.key]&&(clearTimeout(this._cacheTimers[x.key]),delete this._cacheTimers[x.key],this._setTileReloadTimer(x.key,O)));var k=!!O;return k||(O=new E.Tile(x,this._source.tileSize*x.overscaleFactor()),this._loadTile(O,this._tileLoaded.bind(this,O,x.key,O.state))),O?(O.uses++,this._tiles[x.key]=O,k||this._source.fire(new E.Event("dataloading",{tile:O,coord:O.tileID,dataType:"source"})),O):null},S.prototype._setTileReloadTimer=function(x,O){var k=this;x in this._timers&&(clearTimeout(this._timers[x]),delete this._timers[x]);var Z=O.getExpiryTimeout();Z&&(this._timers[x]=setTimeout(function(){k._reloadTile(x,"expired"),delete k._timers[x]},Z))},S.prototype._removeTile=function(x){var O=this._tiles[x];O&&(O.uses--,delete this._tiles[x],this._timers[x]&&(clearTimeout(this._timers[x]),delete this._timers[x]),O.uses>0||(O.hasData()&&O.state!=="reloading"?this._cache.add(O.tileID,O,O.getExpiryTimeout()):(O.aborted=!0,this._abortTile(O),this._unloadTile(O))))},S.prototype.clearTiles=function(){for(var x in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(x);this._cache.reset()},S.prototype.tilesIn=function(x,O,k){var Z=this,J=[],ge=this.transform;if(!ge)return J;for(var We=k?ge.getCameraQueryGeometry(x):x,ht=x.map(function(wr){return ge.pointCoordinate(wr)}),Ut=We.map(function(wr){return ge.pointCoordinate(wr)}),Ht=this.getIds(),Xt=1/0,bn=1/0,mn=-1/0,zn=-1/0,an=0,kn=Ut;an<kn.length;an+=1){var er=kn[an];Xt=Math.min(Xt,er.x),bn=Math.min(bn,er.y),mn=Math.max(mn,er.x),zn=Math.max(zn,er.y)}for(var vr=function(wr){var Fr=Z._tiles[Ht[wr]];if(!Fr.holdingForFade()){var ti=Fr.tileID,Ni=Math.pow(2,ge.zoom-Fr.tileID.overscaledZ),Pi=O*Fr.queryPadding*E.EXTENT/Fr.tileSize/Ni,lo=[ti.getTilePoint(new E.MercatorCoordinate(Xt,bn)),ti.getTilePoint(new E.MercatorCoordinate(mn,zn))];if(lo[0].x-Pi<E.EXTENT&&lo[0].y-Pi<E.EXTENT&&lo[1].x+Pi>=0&&lo[1].y+Pi>=0){var zo=ht.map(function(Go){return ti.getTilePoint(Go)}),Wo=Ut.map(function(Go){return ti.getTilePoint(Go)});J.push({tile:Fr,tileID:ti,queryGeometry:zo,cameraQueryGeometry:Wo,scale:Ni})}}},Mr=0;Mr<Ht.length;Mr++)vr(Mr);return J},S.prototype.getVisibleCoordinates=function(x){for(var O=this,k=this.getRenderableIds(x).map(function(We){return O._tiles[We].tileID}),Z=0,J=k;Z<J.length;Z+=1){var ge=J[Z];ge.posMatrix=this.transform.calculatePosMatrix(ge.toUnwrapped())}return k},S.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(_r(this._source.type))for(var x in this._tiles){var O=this._tiles[x];if(O.fadeEndTime!==void 0&&O.fadeEndTime>=E.browser.now())return!0}return!1},S.prototype.setFeatureState=function(x,O,k){this._state.updateState(x=x||"_geojsonTileLayer",O,k)},S.prototype.removeFeatureState=function(x,O,k){this._state.removeFeatureState(x=x||"_geojsonTileLayer",O,k)},S.prototype.getFeatureState=function(x,O){return this._state.getState(x=x||"_geojsonTileLayer",O)},S.prototype.setDependencies=function(x,O,k){var Z=this._tiles[x];Z&&Z.setDependencies(O,k)},S.prototype.reloadTilesForDependencies=function(x,O){for(var k in this._tiles)this._tiles[k].hasDependency(x,O)&&this._reloadTile(k,"reloading");this._cache.filter(function(Z){return!Z.hasDependency(x,O)})},S}(E.Evented);function Qn(_,S){var x=Math.abs(2*_.wrap)-+(_.wrap<0),O=Math.abs(2*S.wrap)-+(S.wrap<0);return _.overscaledZ-S.overscaledZ||O-x||S.canonical.y-_.canonical.y||S.canonical.x-_.canonical.x}function _r(_){return _==="raster"||_==="image"||_==="video"}function Vr(){return new E.window.Worker(A0.workerUrl)}Kt.maxOverzooming=10,Kt.maxUnderzooming=3;var pr="mapboxgl_preloaded_worker_pool",zr=function(){this.active={}};zr.prototype.acquire=function(_){if(!this.workers)for(this.workers=[];this.workers.length<zr.workerCount;)this.workers.push(new Vr);return this.active[_]=!0,this.workers.slice()},zr.prototype.release=function(_){delete this.active[_],this.numActive()===0&&(this.workers.forEach(function(S){S.terminate()}),this.workers=null)},zr.prototype.isPreloaded=function(){return!!this.active[pr]},zr.prototype.numActive=function(){return Object.keys(this.active).length};var gi,wi=Math.floor(E.browser.hardwareConcurrency/2);function Sr(){return gi||(gi=new zr),gi}function Ti(_,S){var x={};for(var O in _)O!=="ref"&&(x[O]=_[O]);return E.refProperties.forEach(function(k){k in S&&(x[k]=S[k])}),x}function hi(_){_=_.slice();for(var S=Object.create(null),x=0;x<_.length;x++)S[_[x].id]=_[x];for(var O=0;O<_.length;O++)"ref"in _[O]&&(_[O]=Ti(_[O],S[_[O].ref]));return _}zr.workerCount=Math.max(Math.min(wi,6),1);var ai={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mo(_,S,x){x.push({command:ai.addSource,args:[_,S[_]]})}function xi(_,S,x){S.push({command:ai.removeSource,args:[_]}),x[_]=!0}function ea(_,S,x,O){xi(_,x,O),Mo(_,S,x)}function va(_,S,x){var O;for(O in _[x])if(_[x].hasOwnProperty(O)&&O!=="data"&&!E.deepEqual(_[x][O],S[x][O]))return!1;for(O in S[x])if(S[x].hasOwnProperty(O)&&O!=="data"&&!E.deepEqual(_[x][O],S[x][O]))return!1;return!0}function Ro(_,S,x,O,k,Z){var J;for(J in S=S||{},_=_||{})_.hasOwnProperty(J)&&(E.deepEqual(_[J],S[J])||x.push({command:Z,args:[O,J,S[J],k]}));for(J in S)S.hasOwnProperty(J)&&!_.hasOwnProperty(J)&&(E.deepEqual(_[J],S[J])||x.push({command:Z,args:[O,J,S[J],k]}))}function $o(_){return _.id}function Be(_,S){return _[S.id]=S,_}var rt=function(_,S){this.reset(_,S)};rt.prototype.reset=function(_,S){this.points=_||[],this._distances=[0];for(var x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(S||0,.5*this.length),this.paddedLength=this.length-2*this.padding},rt.prototype.lerp=function(_){if(this.points.length===1)return this.points[0];_=E.clamp(_,0,1);for(var S=1,x=this._distances[S],O=_*this.paddedLength+this.padding;x<O&&S<this._distances.length;)x=this._distances[++S];var k=S-1,Z=this._distances[k],J=x-Z,ge=J>0?(O-Z)/J:0;return this.points[k].mult(1-ge).add(this.points[S].mult(ge))};var jt=function(_,S,x){var O=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(_/x),this.yCellCount=Math.ceil(S/x);for(var Z=0;Z<this.xCellCount*this.yCellCount;Z++)O.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=_,this.height=S,this.xScale=this.xCellCount/_,this.yScale=this.yCellCount/S,this.boxUid=0,this.circleUid=0};function un(_,S,x,O,k){var Z=E.create();return S?(E.scale(Z,Z,[1/k,1/k,1]),x||E.rotateZ(Z,Z,O.angle)):E.multiply(Z,O.labelPlaneMatrix,_),Z}function Nn(_,S,x,O,k){if(S){var Z=E.clone(_);return E.scale(Z,Z,[k,k,1]),x||E.rotateZ(Z,Z,-O.angle),Z}return O.glCoordMatrix}function Bn(_,S){var x=[_.x,_.y,0,1];Wr(x,x,S);var O=x[3];return{point:new E.Point(x[0]/O,x[1]/O),signedDistanceFromCamera:O}}function yn(_,S){return .5+_/S*.5}function Cn(_,S){var x=_[0]/_[3],O=_[1]/_[3];return x>=-S[0]&&x<=S[0]&&O>=-S[1]&&O<=S[1]}function dr(_,S,x,O,k,Z,J,ge){var We=O?_.textSizeData:_.iconSizeData,ht=E.evaluateSizeForZoom(We,x.transform.zoom),Ut=[256/x.width*2+1,256/x.height*2+1],Ht=O?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Ht.clear();for(var Xt=_.lineVertexArray,bn=O?_.text.placedSymbolArray:_.icon.placedSymbolArray,mn=x.transform.width/x.transform.height,zn=!1,an=0;an<bn.length;an++){var kn=bn.get(an);if(kn.hidden||kn.writingMode===E.WritingMode.vertical&&!zn)Ii(kn.numGlyphs,Ht);else{zn=!1;var er=[kn.anchorX,kn.anchorY,0,1];if(E.transformMat4(er,er,S),Cn(er,Ut)){var vr=yn(x.transform.cameraToCenterDistance,er[3]),Mr=E.evaluateSizeForFeature(We,ht,kn),wr=J?Mr/vr:Mr*vr,Fr=new E.Point(kn.anchorX,kn.anchorY),ti=Bn(Fr,k).point,Ni={},Pi=zi(kn,wr,!1,ge,S,k,Z,_.glyphOffsetArray,Xt,Ht,ti,Fr,Ni,mn);zn=Pi.useVertical,(Pi.notEnoughRoom||zn||Pi.needsFlipping&&zi(kn,wr,!0,ge,S,k,Z,_.glyphOffsetArray,Xt,Ht,ti,Fr,Ni,mn).notEnoughRoom)&&Ii(kn.numGlyphs,Ht)}else Ii(kn.numGlyphs,Ht)}}O?_.text.dynamicLayoutVertexBuffer.updateData(Ht):_.icon.dynamicLayoutVertexBuffer.updateData(Ht)}function hr(_,S,x,O,k,Z,J,ge,We,ht,Ut){var Ht=ge.glyphStartIndex+ge.numGlyphs,Xt=ge.lineStartIndex,bn=ge.lineStartIndex+ge.lineLength,mn=S.getoffsetX(ge.glyphStartIndex),zn=S.getoffsetX(Ht-1),an=ei(_*mn,x,O,k,Z,J,ge.segment,Xt,bn,We,ht,Ut);if(!an)return null;var kn=ei(_*zn,x,O,k,Z,J,ge.segment,Xt,bn,We,ht,Ut);return kn?{first:an,last:kn}:null}function Jr(_,S,x,O){return _===E.WritingMode.horizontal&&Math.abs(x.y-S.y)>Math.abs(x.x-S.x)*O?{useVertical:!0}:(_===E.WritingMode.vertical?S.y<x.y:S.x>x.x)?{needsFlipping:!0}:null}function zi(_,S,x,O,k,Z,J,ge,We,ht,Ut,Ht,Xt,bn){var mn,zn=S/24,an=_.lineOffsetX*zn,kn=_.lineOffsetY*zn;if(_.numGlyphs>1){var er=_.glyphStartIndex+_.numGlyphs,vr=_.lineStartIndex,Mr=_.lineStartIndex+_.lineLength,wr=hr(zn,ge,an,kn,x,Ut,Ht,_,We,Z,Xt);if(!wr)return{notEnoughRoom:!0};var Fr=Bn(wr.first.point,J).point,ti=Bn(wr.last.point,J).point;if(O&&!x){var Ni=Jr(_.writingMode,Fr,ti,bn);if(Ni)return Ni}mn=[wr.first];for(var Pi=_.glyphStartIndex+1;Pi<er-1;Pi++)mn.push(ei(zn*ge.getoffsetX(Pi),an,kn,x,Ut,Ht,_.segment,vr,Mr,We,Z,Xt));mn.push(wr.last)}else{if(O&&!x){var lo=Bn(Ht,k).point,zo=_.lineStartIndex+_.segment+1,Wo=new E.Point(We.getx(zo),We.gety(zo)),Go=Bn(Wo,k),as=Go.signedDistanceFromCamera>0?Go.point:Ji(Ht,Wo,lo,1,k),Or=Jr(_.writingMode,lo,as,bn);if(Or)return Or}var en=ei(zn*ge.getoffsetX(_.glyphStartIndex),an,kn,x,Ut,Ht,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,We,Z,Xt);if(!en)return{notEnoughRoom:!0};mn=[en]}for(var ha=0,aa=mn;ha<aa.length;ha+=1){var Yo=aa[ha];E.addDynamicAttributes(ht,Yo.point,Yo.angle)}return{}}function Ji(_,S,x,O,k){var Z=Bn(_.add(_.sub(S)._unit()),k).point,J=x.sub(Z);return x.add(J._mult(O/J.mag()))}function ei(_,S,x,O,k,Z,J,ge,We,ht,Ut,Ht){var Xt=O?_-S:_+S,bn=Xt>0?1:-1,mn=0;O&&(bn*=-1,mn=Math.PI),bn<0&&(mn+=Math.PI);for(var zn=bn>0?ge+J:ge+J+1,an=k,kn=k,er=0,vr=0,Mr=Math.abs(Xt),wr=[];er+vr<=Mr;){if((zn+=bn)<ge||zn>=We)return null;if(kn=an,wr.push(an),(an=Ht[zn])===void 0){var Fr=new E.Point(ht.getx(zn),ht.gety(zn)),ti=Bn(Fr,Ut);if(ti.signedDistanceFromCamera>0)an=Ht[zn]=ti.point;else{var Ni=zn-bn;an=Ji(er===0?Z:new E.Point(ht.getx(Ni),ht.gety(Ni)),Fr,kn,Mr-er+1,Ut)}}er+=vr,vr=kn.dist(an)}var Pi=(Mr-er)/vr,lo=an.sub(kn),zo=lo.mult(Pi)._add(kn);zo._add(lo._unit()._perp()._mult(x*bn));var Wo=mn+Math.atan2(an.y-kn.y,an.x-kn.x);return wr.push(zo),{point:zo,angle:Wo,path:wr}}jt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},jt.prototype.insert=function(_,S,x,O,k){this._forEachCell(S,x,O,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(_),this.bboxes.push(S),this.bboxes.push(x),this.bboxes.push(O),this.bboxes.push(k)},jt.prototype.insertCircle=function(_,S,x,O){this._forEachCell(S-O,x-O,S+O,x+O,this._insertCircleCell,this.circleUid++),this.circleKeys.push(_),this.circles.push(S),this.circles.push(x),this.circles.push(O)},jt.prototype._insertBoxCell=function(_,S,x,O,k,Z){this.boxCells[k].push(Z)},jt.prototype._insertCircleCell=function(_,S,x,O,k,Z){this.circleCells[k].push(Z)},jt.prototype._query=function(_,S,x,O,k,Z){if(x<0||_>this.width||O<0||S>this.height)return!k&&[];var J=[];if(_<=0&&S<=0&&this.width<=x&&this.height<=O){if(k)return!0;for(var ge=0;ge<this.boxKeys.length;ge++)J.push({key:this.boxKeys[ge],x1:this.bboxes[4*ge],y1:this.bboxes[4*ge+1],x2:this.bboxes[4*ge+2],y2:this.bboxes[4*ge+3]});for(var We=0;We<this.circleKeys.length;We++){var ht=this.circles[3*We],Ut=this.circles[3*We+1],Ht=this.circles[3*We+2];J.push({key:this.circleKeys[We],x1:ht-Ht,y1:Ut-Ht,x2:ht+Ht,y2:Ut+Ht})}return Z?J.filter(Z):J}return this._forEachCell(_,S,x,O,this._queryCell,J,{hitTest:k,seenUids:{box:{},circle:{}}},Z),k?J.length>0:J},jt.prototype._queryCircle=function(_,S,x,O,k){var Z=_-x,J=_+x,ge=S-x,We=S+x;if(J<0||Z>this.width||We<0||ge>this.height)return!O&&[];var ht=[];return this._forEachCell(Z,ge,J,We,this._queryCellCircle,ht,{hitTest:O,circle:{x:_,y:S,radius:x},seenUids:{box:{},circle:{}}},k),O?ht.length>0:ht},jt.prototype.query=function(_,S,x,O,k){return this._query(_,S,x,O,!1,k)},jt.prototype.hitTest=function(_,S,x,O,k){return this._query(_,S,x,O,!0,k)},jt.prototype.hitTestCircle=function(_,S,x,O){return this._queryCircle(_,S,x,!0,O)},jt.prototype._queryCell=function(_,S,x,O,k,Z,J,ge){var We=J.seenUids,ht=this.boxCells[k];if(ht!==null)for(var Ut=this.bboxes,Ht=0,Xt=ht;Ht<Xt.length;Ht+=1){var bn=Xt[Ht];if(!We.box[bn]){We.box[bn]=!0;var mn=4*bn;if(_<=Ut[mn+2]&&S<=Ut[mn+3]&&x>=Ut[mn+0]&&O>=Ut[mn+1]&&(!ge||ge(this.boxKeys[bn]))){if(J.hitTest)return Z.push(!0),!0;Z.push({key:this.boxKeys[bn],x1:Ut[mn],y1:Ut[mn+1],x2:Ut[mn+2],y2:Ut[mn+3]})}}}var zn=this.circleCells[k];if(zn!==null)for(var an=this.circles,kn=0,er=zn;kn<er.length;kn+=1){var vr=er[kn];if(!We.circle[vr]){We.circle[vr]=!0;var Mr=3*vr;if(this._circleAndRectCollide(an[Mr],an[Mr+1],an[Mr+2],_,S,x,O)&&(!ge||ge(this.circleKeys[vr]))){if(J.hitTest)return Z.push(!0),!0;var wr=an[Mr],Fr=an[Mr+1],ti=an[Mr+2];Z.push({key:this.circleKeys[vr],x1:wr-ti,y1:Fr-ti,x2:wr+ti,y2:Fr+ti})}}}},jt.prototype._queryCellCircle=function(_,S,x,O,k,Z,J,ge){var We=J.circle,ht=J.seenUids,Ut=this.boxCells[k];if(Ut!==null)for(var Ht=this.bboxes,Xt=0,bn=Ut;Xt<bn.length;Xt+=1){var mn=bn[Xt];if(!ht.box[mn]){ht.box[mn]=!0;var zn=4*mn;if(this._circleAndRectCollide(We.x,We.y,We.radius,Ht[zn+0],Ht[zn+1],Ht[zn+2],Ht[zn+3])&&(!ge||ge(this.boxKeys[mn])))return Z.push(!0),!0}}var an=this.circleCells[k];if(an!==null)for(var kn=this.circles,er=0,vr=an;er<vr.length;er+=1){var Mr=vr[er];if(!ht.circle[Mr]){ht.circle[Mr]=!0;var wr=3*Mr;if(this._circlesCollide(kn[wr],kn[wr+1],kn[wr+2],We.x,We.y,We.radius)&&(!ge||ge(this.circleKeys[Mr])))return Z.push(!0),!0}}},jt.prototype._forEachCell=function(_,S,x,O,k,Z,J,ge){for(var We=this._convertToXCellCoord(_),ht=this._convertToYCellCoord(S),Ut=this._convertToXCellCoord(x),Ht=this._convertToYCellCoord(O),Xt=We;Xt<=Ut;Xt++)for(var bn=ht;bn<=Ht;bn++)if(k.call(this,_,S,x,O,this.xCellCount*bn+Xt,Z,J,ge))return},jt.prototype._convertToXCellCoord=function(_){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(_*this.xScale)))},jt.prototype._convertToYCellCoord=function(_){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(_*this.yScale)))},jt.prototype._circlesCollide=function(_,S,x,O,k,Z){var J=O-_,ge=k-S,We=x+Z;return We*We>J*J+ge*ge},jt.prototype._circleAndRectCollide=function(_,S,x,O,k,Z,J){var ge=(Z-O)/2,We=Math.abs(_-(O+ge));if(We>ge+x)return!1;var ht=(J-k)/2,Ut=Math.abs(S-(k+ht));if(Ut>ht+x)return!1;if(We<=ge||Ut<=ht)return!0;var Ht=We-ge,Xt=Ut-ht;return Ht*Ht+Xt*Xt<=x*x};var Hi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ii(_,S){for(var x=0;x<_;x++){var O=S.length;S.resize(O+4),S.float32.set(Hi,3*O)}}function Wr(_,S,x){var O=S[0],k=S[1];return _[0]=x[0]*O+x[4]*k+x[12],_[1]=x[1]*O+x[5]*k+x[13],_[3]=x[3]*O+x[7]*k+x[15],_}var Eo=function(_,S,x){S===void 0&&(S=new jt(_.width+200,_.height+200,25)),x===void 0&&(x=new jt(_.width+200,_.height+200,25)),this.transform=_,this.grid=S,this.ignoredGrid=x,this.pitchfactor=Math.cos(_._pitch)*_.cameraToCenterDistance,this.screenRightBoundary=_.width+100,this.screenBottomBoundary=_.height+100,this.gridRightBoundary=_.width+200,this.gridBottomBoundary=_.height+200};function ci(_,S,x){return S*(E.EXTENT/(_.tileSize*Math.pow(2,x-_.tileID.overscaledZ)))}Eo.prototype.placeCollisionBox=function(_,S,x,O,k){var Z=this.projectAndGetPerspectiveRatio(O,_.anchorPointX,_.anchorPointY),J=x*Z.perspectiveRatio,ge=_.x1*J+Z.point.x,We=_.y1*J+Z.point.y,ht=_.x2*J+Z.point.x,Ut=_.y2*J+Z.point.y;return!this.isInsideGrid(ge,We,ht,Ut)||!S&&this.grid.hitTest(ge,We,ht,Ut,k)?{box:[],offscreen:!1}:{box:[ge,We,ht,Ut],offscreen:this.isOffscreen(ge,We,ht,Ut)}},Eo.prototype.placeCollisionCircles=function(_,S,x,O,k,Z,J,ge,We,ht,Ut,Ht,Xt){var bn=[],mn=new E.Point(S.anchorX,S.anchorY),zn=Bn(mn,Z),an=yn(this.transform.cameraToCenterDistance,zn.signedDistanceFromCamera),kn=(ht?k/an:k*an)/E.ONE_EM,er=Bn(mn,J).point,vr=hr(kn,O,S.lineOffsetX*kn,S.lineOffsetY*kn,!1,er,mn,S,x,J,{}),Mr=!1,wr=!1,Fr=!0;if(vr){for(var ti=.5*Ht*an+Xt,Ni=new E.Point(-100,-100),Pi=new E.Point(this.screenRightBoundary,this.screenBottomBoundary),lo=new rt,zo=vr.first,Wo=vr.last,Go=[],as=zo.path.length-1;as>=1;as--)Go.push(zo.path[as]);for(var Or=1;Or<Wo.path.length;Or++)Go.push(Wo.path[Or]);var en=2.5*ti;if(ge){var ha=Go.map(function(jc){return Bn(jc,ge)});Go=ha.some(function(jc){return jc.signedDistanceFromCamera<=0})?[]:ha.map(function(jc){return jc.point})}var aa=[];if(Go.length>0){for(var Yo=Go[0].clone(),ga=Go[0].clone(),ra=1;ra<Go.length;ra++)Yo.x=Math.min(Yo.x,Go[ra].x),Yo.y=Math.min(Yo.y,Go[ra].y),ga.x=Math.max(ga.x,Go[ra].x),ga.y=Math.max(ga.y,Go[ra].y);aa=Yo.x>=Ni.x&&ga.x<=Pi.x&&Yo.y>=Ni.y&&ga.y<=Pi.y?[Go]:ga.x<Ni.x||Yo.x>Pi.x||ga.y<Ni.y||Yo.y>Pi.y?[]:E.clipLine([Go],Ni.x,Ni.y,Pi.x,Pi.y)}for(var Bo=0,uu=aa;Bo<uu.length;Bo+=1){var El;lo.reset(uu[Bo],.25*ti),El=lo.length<=.5*ti?1:Math.ceil(lo.paddedLength/en)+1;for(var Mu=0;Mu<El;Mu++){var cu=Mu/Math.max(El-1,1),Es=lo.lerp(cu),_l=Es.x+100,pl=Es.y+100;bn.push(_l,pl,ti,0);var vc=_l-ti,Vf=pl-ti,Ac=_l+ti,of=pl+ti;if(Fr=Fr&&this.isOffscreen(vc,Vf,Ac,of),wr=wr||this.isInsideGrid(vc,Vf,Ac,of),!_&&this.grid.hitTestCircle(_l,pl,ti,Ut)&&(Mr=!0,!We))return{circles:[],offscreen:!1,collisionDetected:Mr}}}}return{circles:!We&&Mr||!wr?[]:bn,offscreen:Fr,collisionDetected:Mr}},Eo.prototype.queryRenderedSymbols=function(_){if(_.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var S=[],x=1/0,O=1/0,k=-1/0,Z=-1/0,J=0,ge=_;J<ge.length;J+=1){var We=ge[J],ht=new E.Point(We.x+100,We.y+100);x=Math.min(x,ht.x),O=Math.min(O,ht.y),k=Math.max(k,ht.x),Z=Math.max(Z,ht.y),S.push(ht)}for(var Ut={},Ht={},Xt=0,bn=this.grid.query(x,O,k,Z).concat(this.ignoredGrid.query(x,O,k,Z));Xt<bn.length;Xt+=1){var mn=bn[Xt],zn=mn.key;if(Ut[zn.bucketInstanceId]===void 0&&(Ut[zn.bucketInstanceId]={}),!Ut[zn.bucketInstanceId][zn.featureIndex]){var an=[new E.Point(mn.x1,mn.y1),new E.Point(mn.x2,mn.y1),new E.Point(mn.x2,mn.y2),new E.Point(mn.x1,mn.y2)];E.polygonIntersectsPolygon(S,an)&&(Ut[zn.bucketInstanceId][zn.featureIndex]=!0,Ht[zn.bucketInstanceId]===void 0&&(Ht[zn.bucketInstanceId]=[]),Ht[zn.bucketInstanceId].push(zn.featureIndex))}}return Ht},Eo.prototype.insertCollisionBox=function(_,S,x,O,k){(S?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:O,collisionGroupID:k},_[0],_[1],_[2],_[3])},Eo.prototype.insertCollisionCircles=function(_,S,x,O,k){for(var Z=S?this.ignoredGrid:this.grid,J={bucketInstanceId:x,featureIndex:O,collisionGroupID:k},ge=0;ge<_.length;ge+=4)Z.insertCircle(J,_[ge],_[ge+1],_[ge+2])},Eo.prototype.projectAndGetPerspectiveRatio=function(_,S,x){var O=[S,x,0,1];return Wr(O,O,_),{point:new E.Point((O[0]/O[3]+1)/2*this.transform.width+100,(-O[1]/O[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O[3]*.5}},Eo.prototype.isOffscreen=function(_,S,x,O){return x<100||_>=this.screenRightBoundary||O<100||S>this.screenBottomBoundary},Eo.prototype.isInsideGrid=function(_,S,x,O){return x>=0&&_<this.gridRightBoundary&&O>=0&&S<this.gridBottomBoundary},Eo.prototype.getViewportMatrix=function(){var _=E.identity([]);return E.translate(_,_,[-100,-100,0]),_};var xo=function(_,S,x,O){this.opacity=_?Math.max(0,Math.min(1,_.opacity+(_.placed?S:-S))):O&&x?1:0,this.placed=x};xo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Wi=function(_,S,x,O,k){this.text=new xo(_?_.text:null,S,x,k),this.icon=new xo(_?_.icon:null,S,O,k)};Wi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var oo=function(_,S,x){this.text=_,this.icon=S,this.skipFade=x},Ao=function(){this.invProjMatrix=E.create(),this.viewportMatrix=E.create(),this.circles=[]},bs=function(_,S,x,O,k){this.bucketInstanceId=_,this.featureIndex=S,this.sourceLayerIndex=x,this.bucketIndex=O,this.tileID=k},ma=function(_){this.crossSourceCollisions=_,this.maxGroupID=0,this.collisionGroups={}};function ta(_,S,x,O,k){var Z=E.getAnchorAlignment(_),J=-(Z.horizontalAlign-.5)*S,ge=-(Z.verticalAlign-.5)*x,We=E.evaluateVariableOffset(_,O);return new E.Point(J+We[0]*k,ge+We[1]*k)}function vs(_,S,x,O,k,Z){var J=_.x1,ge=_.x2,We=_.y1,ht=_.y2,Ut=_.anchorPointX,Ht=_.anchorPointY,Xt=new E.Point(S,x);return O&&Xt._rotate(k?Z:-Z),{x1:J+Xt.x,y1:We+Xt.y,x2:ge+Xt.x,y2:ht+Xt.y,anchorPointX:Ut,anchorPointY:Ht}}ma.prototype.get=function(_){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[_]){var S=++this.maxGroupID;this.collisionGroups[_]={ID:S,predicate:function(x){return x.collisionGroupID===S}}}return this.collisionGroups[_]};var ms=function(_,S,x,O){this.transform=_.clone(),this.collisionIndex=new Eo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=S,this.retainedQueryData={},this.collisionGroups=new ma(x),this.collisionCircleArrays={},this.prevPlacement=O,O&&(O.prevPlacement=void 0),this.placedOrientations={}};function At(_,S,x,O,k){_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0)}ms.prototype.getBucketParts=function(_,S,x,O){var k=x.getBucket(S),Z=x.latestFeatureIndex;if(k&&Z&&S.id===k.layerIds[0]){var J=x.collisionBoxArray,ge=k.layers[0].layout,We=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),ht=x.tileSize/E.EXTENT,Ut=this.transform.calculatePosMatrix(x.tileID.toUnwrapped()),Ht=ge.get("text-pitch-alignment")==="map",Xt=ge.get("text-rotation-alignment")==="map",bn=ci(x,1,this.transform.zoom),mn=un(Ut,Ht,Xt,this.transform,bn),zn=null;if(Ht){var an=Nn(Ut,Ht,Xt,this.transform,bn);zn=E.multiply([],this.transform.labelPlaneMatrix,an)}this.retainedQueryData[k.bucketInstanceId]=new bs(k.bucketInstanceId,Z,k.sourceLayerIndex,k.index,x.tileID);var kn={bucket:k,layout:ge,posMatrix:Ut,textLabelPlaneMatrix:mn,labelToScreenMatrix:zn,scale:We,textPixelRatio:ht,holdingForFade:x.holdingForFade(),collisionBoxArray:J,partiallyEvaluatedTextSize:E.evaluateSizeForZoom(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(O)for(var er=0,vr=k.sortKeyRanges;er<vr.length;er+=1){var Mr=vr[er];_.push({sortKey:Mr.sortKey,symbolInstanceStart:Mr.symbolInstanceStart,symbolInstanceEnd:Mr.symbolInstanceEnd,parameters:kn})}else _.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:kn})}},ms.prototype.attemptAnchorPlacement=function(_,S,x,O,k,Z,J,ge,We,ht,Ut,Ht,Xt,bn,mn){var zn,an=[Ht.textOffset0,Ht.textOffset1],kn=ta(_,x,O,an,k),er=this.collisionIndex.placeCollisionBox(vs(S,kn.x,kn.y,Z,J,this.transform.angle),Ut,ge,We,ht.predicate);if(!mn||this.collisionIndex.placeCollisionBox(vs(mn,kn.x,kn.y,Z,J,this.transform.angle),Ut,ge,We,ht.predicate).box.length!==0)return er.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ht.crossTileID]&&this.prevPlacement.placements[Ht.crossTileID]&&this.prevPlacement.placements[Ht.crossTileID].text&&(zn=this.prevPlacement.variableOffsets[Ht.crossTileID].anchor),this.variableOffsets[Ht.crossTileID]={textOffset:an,width:x,height:O,anchor:_,textBoxScale:k,prevAnchor:zn},this.markUsedJustification(Xt,_,Ht,bn),Xt.allowVerticalPlacement&&(this.markUsedOrientation(Xt,bn,Ht),this.placedOrientations[Ht.crossTileID]=bn),{shift:kn,placedGlyphBoxes:er}):void 0},ms.prototype.placeLayerBucketPart=function(_,S,x){var O=this,k=_.parameters,Z=k.bucket,J=k.layout,ge=k.posMatrix,We=k.textLabelPlaneMatrix,ht=k.labelToScreenMatrix,Ut=k.textPixelRatio,Ht=k.holdingForFade,Xt=k.collisionBoxArray,bn=k.partiallyEvaluatedTextSize,mn=k.collisionGroup,zn=J.get("text-optional"),an=J.get("icon-optional"),kn=J.get("text-allow-overlap"),er=J.get("icon-allow-overlap"),vr=J.get("text-rotation-alignment")==="map",Mr=J.get("text-pitch-alignment")==="map",wr=J.get("icon-text-fit")!=="none",Fr=J.get("symbol-z-order")==="viewport-y",ti=kn&&(er||!Z.hasIconData()||an),Ni=er&&(kn||!Z.hasTextData()||zn);!Z.collisionArrays&&Xt&&Z.deserializeCollisionBoxes(Xt);var Pi=function(Or,en){if(!S[Or.crossTileID])if(Ht)O.placements[Or.crossTileID]=new oo(!1,!1,!1);else{var ha,aa=!1,Yo=!1,ga=!0,ra=null,Bo={box:null,offscreen:null},uu={box:null,offscreen:null},El=null,Mu=null,cu=0,Es=0,_l=0;en.textFeatureIndex?cu=en.textFeatureIndex:Or.useRuntimeCollisionCircles&&(cu=Or.featureIndex),en.verticalTextFeatureIndex&&(Es=en.verticalTextFeatureIndex);var pl=en.textBox;if(pl){var vc=function(Ga){var Hl=E.WritingMode.horizontal;if(Z.allowVerticalPlacement&&!Ga&&O.prevPlacement){var Jl=O.prevPlacement.placedOrientations[Or.crossTileID];Jl&&(O.placedOrientations[Or.crossTileID]=Jl,O.markUsedOrientation(Z,Hl=Jl,Or))}return Hl},Vf=function(Ga,Hl){if(Z.allowVerticalPlacement&&Or.numVerticalGlyphVertices>0&&en.verticalTextBox)for(var Jl=0,Hf=Z.writingModes;Jl<Hf.length&&(Hf[Jl]===E.WritingMode.vertical?(Bo=Hl(),uu=Bo):Bo=Ga(),!(Bo&&Bo.box&&Bo.box.length));Jl+=1);else Bo=Ga()};if(J.get("text-variable-anchor")){var Ac=J.get("text-variable-anchor");if(O.prevPlacement&&O.prevPlacement.variableOffsets[Or.crossTileID]){var of=O.prevPlacement.variableOffsets[Or.crossTileID];Ac.indexOf(of.anchor)>0&&(Ac=Ac.filter(function(Ga){return Ga!==of.anchor})).unshift(of.anchor)}var jc=function(Ga,Hl,Jl){for(var Hf=Ga.x2-Ga.x1,Vp=Ga.y2-Ga.y1,oh=Or.textBoxScale,O0=wr&&!er?Hl:null,Bd={box:[],offscreen:!1},Fd=kn?2*Ac.length:Ac.length,Wf=0;Wf<Fd;++Wf){var Hp=O.attemptAnchorPlacement(Ac[Wf%Ac.length],Ga,Hf,Vp,oh,vr,Mr,Ut,ge,mn,Wf>=Ac.length,Or,Z,Jl,O0);if(Hp&&(Bd=Hp.placedGlyphBoxes)&&Bd.box&&Bd.box.length){aa=!0,ra=Hp.shift;break}}return Bd};Vf(function(){return jc(pl,en.iconBox,E.WritingMode.horizontal)},function(){var Ga=en.verticalTextBox;return Z.allowVerticalPlacement&&!(Bo&&Bo.box&&Bo.box.length)&&Or.numVerticalGlyphVertices>0&&Ga?jc(Ga,en.verticalIconBox,E.WritingMode.vertical):{box:null,offscreen:null}}),Bo&&(aa=Bo.box,ga=Bo.offscreen);var dp=vc(Bo&&Bo.box);if(!aa&&O.prevPlacement){var pp=O.prevPlacement.variableOffsets[Or.crossTileID];pp&&(O.variableOffsets[Or.crossTileID]=pp,O.markUsedJustification(Z,pp.anchor,Or,dp))}}else{var Mh=function(Ga,Hl){var Jl=O.collisionIndex.placeCollisionBox(Ga,kn,Ut,ge,mn.predicate);return Jl&&Jl.box&&Jl.box.length&&(O.markUsedOrientation(Z,Hl,Or),O.placedOrientations[Or.crossTileID]=Hl),Jl};Vf(function(){return Mh(pl,E.WritingMode.horizontal)},function(){var Ga=en.verticalTextBox;return Z.allowVerticalPlacement&&Or.numVerticalGlyphVertices>0&&Ga?Mh(Ga,E.WritingMode.vertical):{box:null,offscreen:null}}),vc(Bo&&Bo.box&&Bo.box.length)}}if(aa=(ha=Bo)&&ha.box&&ha.box.length>0,ga=ha&&ha.offscreen,Or.useRuntimeCollisionCircles){var Kh=Z.text.placedSymbolArray.get(Or.centerJustifiedTextSymbolIndex),qh=E.evaluateSizeForFeature(Z.textSizeData,bn,Kh),ih=J.get("text-padding");El=O.collisionIndex.placeCollisionCircles(kn,Kh,Z.lineVertexArray,Z.glyphOffsetArray,qh,ge,We,ht,x,Mr,mn.predicate,Or.collisionCircleDiameter,ih),aa=kn||El.circles.length>0&&!El.collisionDetected,ga=ga&&El.offscreen}if(en.iconFeatureIndex&&(_l=en.iconFeatureIndex),en.iconBox){var Ai=function(Ga){var Hl=wr&&ra?vs(Ga,ra.x,ra.y,vr,Mr,O.transform.angle):Ga;return O.collisionIndex.placeCollisionBox(Hl,er,Ut,ge,mn.predicate)};Yo=uu&&uu.box&&uu.box.length&&en.verticalIconBox?(Mu=Ai(en.verticalIconBox)).box.length>0:(Mu=Ai(en.iconBox)).box.length>0,ga=ga&&Mu.offscreen}var Il=zn||Or.numHorizontalGlyphVertices===0&&Or.numVerticalGlyphVertices===0,Ll=an||Or.numIconVertices===0;if(Il||Ll?Ll?Il||(Yo=Yo&&aa):aa=Yo&&aa:Yo=aa=Yo&&aa,aa&&ha&&ha.box&&O.collisionIndex.insertCollisionBox(ha.box,J.get("text-ignore-placement"),Z.bucketInstanceId,uu&&uu.box&&Es?Es:cu,mn.ID),Yo&&Mu&&O.collisionIndex.insertCollisionBox(Mu.box,J.get("icon-ignore-placement"),Z.bucketInstanceId,_l,mn.ID),El&&(aa&&O.collisionIndex.insertCollisionCircles(El.circles,J.get("text-ignore-placement"),Z.bucketInstanceId,cu,mn.ID),x)){var tc=Z.bucketInstanceId,wf=O.collisionCircleArrays[tc];wf===void 0&&(wf=O.collisionCircleArrays[tc]=new Ao);for(var Af=0;Af<El.circles.length;Af+=4)wf.circles.push(El.circles[Af+0]),wf.circles.push(El.circles[Af+1]),wf.circles.push(El.circles[Af+2]),wf.circles.push(El.collisionDetected?1:0)}O.placements[Or.crossTileID]=new oo(aa||ti,Yo||Ni,ga||Z.justReloaded),S[Or.crossTileID]=!0}};if(Fr)for(var lo=Z.getSortedSymbolIndexes(this.transform.angle),zo=lo.length-1;zo>=0;--zo){var Wo=lo[zo];Pi(Z.symbolInstances.get(Wo),Z.collisionArrays[Wo])}else for(var Go=_.symbolInstanceStart;Go<_.symbolInstanceEnd;Go++)Pi(Z.symbolInstances.get(Go),Z.collisionArrays[Go]);if(x&&Z.bucketInstanceId in this.collisionCircleArrays){var as=this.collisionCircleArrays[Z.bucketInstanceId];E.invert(as.invProjMatrix,ge),as.viewportMatrix=this.collisionIndex.getViewportMatrix()}Z.justReloaded=!1},ms.prototype.markUsedJustification=function(_,S,x,O){var k;k=O===E.WritingMode.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[E.getAnchorJustification(S)];for(var Z=0,J=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];Z<J.length;Z+=1){var ge=J[Z];ge>=0&&(_.text.placedSymbolArray.get(ge).crossTileID=k>=0&&ge!==k?0:x.crossTileID)}},ms.prototype.markUsedOrientation=function(_,S,x){for(var O=S===E.WritingMode.horizontal||S===E.WritingMode.horizontalOnly?S:0,k=S===E.WritingMode.vertical?S:0,Z=0,J=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];Z<J.length;Z+=1)_.text.placedSymbolArray.get(J[Z]).placedOrientation=O;x.verticalPlacedTextSymbolIndex&&(_.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=k)},ms.prototype.commit=function(_){this.commitTime=_,this.zoomAtLastRecencyCheck=this.transform.zoom;var S=this.prevPlacement,x=!1;this.prevZoomAdjustment=S?S.zoomAdjustment(this.transform.zoom):0;var O=S?S.symbolFadeChange(_):1,k=S?S.opacities:{},Z=S?S.variableOffsets:{},J=S?S.placedOrientations:{};for(var ge in this.placements){var We=this.placements[ge],ht=k[ge];ht?(this.opacities[ge]=new Wi(ht,O,We.text,We.icon),x=x||We.text!==ht.text.placed||We.icon!==ht.icon.placed):(this.opacities[ge]=new Wi(null,O,We.text,We.icon,We.skipFade),x=x||We.text||We.icon)}for(var Ut in k){var Ht=k[Ut];if(!this.opacities[Ut]){var Xt=new Wi(Ht,O,!1,!1);Xt.isHidden()||(this.opacities[Ut]=Xt,x=x||Ht.text.placed||Ht.icon.placed)}}for(var bn in Z)this.variableOffsets[bn]||!this.opacities[bn]||this.opacities[bn].isHidden()||(this.variableOffsets[bn]=Z[bn]);for(var mn in J)this.placedOrientations[mn]||!this.opacities[mn]||this.opacities[mn].isHidden()||(this.placedOrientations[mn]=J[mn]);x?this.lastPlacementChangeTime=_:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=S?S.lastPlacementChangeTime:_)},ms.prototype.updateLayerOpacities=function(_,S){for(var x={},O=0,k=S;O<k.length;O+=1){var Z=k[O],J=Z.getBucket(_);J&&Z.latestFeatureIndex&&_.id===J.layerIds[0]&&this.updateBucketOpacities(J,x,Z.collisionBoxArray)}},ms.prototype.updateBucketOpacities=function(_,S,x){var O=this;_.hasTextData()&&_.text.opacityVertexArray.clear(),_.hasIconData()&&_.icon.opacityVertexArray.clear(),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexArray.clear(),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexArray.clear();var k=_.layers[0].layout,Z=new Wi(null,0,!1,!1,!0),J=k.get("text-allow-overlap"),ge=k.get("icon-allow-overlap"),We=k.get("text-variable-anchor"),ht=k.get("text-rotation-alignment")==="map",Ut=k.get("text-pitch-alignment")==="map",Ht=k.get("icon-text-fit")!=="none",Xt=new Wi(null,0,J&&(ge||!_.hasIconData()||k.get("icon-optional")),ge&&(J||!_.hasTextData()||k.get("text-optional")),!0);!_.collisionArrays&&x&&(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData())&&_.deserializeCollisionBoxes(x);for(var bn=function(kn,er,vr){for(var Mr=0;Mr<er/4;Mr++)kn.opacityVertexArray.emplaceBack(vr)},mn=function(kn){var er=_.symbolInstances.get(kn),vr=er.numHorizontalGlyphVertices,Mr=er.numVerticalGlyphVertices,wr=er.crossTileID,Fr=O.opacities[wr];S[wr]?Fr=Z:Fr||(O.opacities[wr]=Fr=Xt),S[wr]=!0;var ti=er.numIconVertices>0,Ni=O.placedOrientations[er.crossTileID],Pi=Ni===E.WritingMode.vertical,lo=Ni===E.WritingMode.horizontal||Ni===E.WritingMode.horizontalOnly;if(vr>0||Mr>0){var zo=Ds(Fr.text);bn(_.text,vr,Pi?zs:zo),bn(_.text,Mr,lo?zs:zo);var Wo=Fr.text.isHidden();[er.rightJustifiedTextSymbolIndex,er.centerJustifiedTextSymbolIndex,er.leftJustifiedTextSymbolIndex].forEach(function(Bo){Bo>=0&&(_.text.placedSymbolArray.get(Bo).hidden=Wo||Pi?1:0)}),er.verticalPlacedTextSymbolIndex>=0&&(_.text.placedSymbolArray.get(er.verticalPlacedTextSymbolIndex).hidden=Wo||lo?1:0);var Go=O.variableOffsets[er.crossTileID];Go&&O.markUsedJustification(_,Go.anchor,er,Ni);var as=O.placedOrientations[er.crossTileID];as&&(O.markUsedJustification(_,"left",er,as),O.markUsedOrientation(_,as,er))}if(ti){var Or=Ds(Fr.icon),en=!(Ht&&er.verticalPlacedIconSymbolIndex&&Pi);er.placedIconSymbolIndex>=0&&(bn(_.icon,er.numIconVertices,en?Or:zs),_.icon.placedSymbolArray.get(er.placedIconSymbolIndex).hidden=Fr.icon.isHidden()),er.verticalPlacedIconSymbolIndex>=0&&(bn(_.icon,er.numVerticalIconVertices,en?zs:Or),_.icon.placedSymbolArray.get(er.verticalPlacedIconSymbolIndex).hidden=Fr.icon.isHidden())}if(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData()){var ha=_.collisionArrays[kn];if(ha){var aa=new E.Point(0,0);if(ha.textBox||ha.verticalTextBox){var Yo=!0;if(We){var ga=O.variableOffsets[wr];ga?(aa=ta(ga.anchor,ga.width,ga.height,ga.textOffset,ga.textBoxScale),ht&&aa._rotate(Ut?O.transform.angle:-O.transform.angle)):Yo=!1}ha.textBox&&At(_.textCollisionBox.collisionVertexArray,Fr.text.placed,!Yo||Pi,aa.x,aa.y),ha.verticalTextBox&&At(_.textCollisionBox.collisionVertexArray,Fr.text.placed,!Yo||lo,aa.x,aa.y)}var ra=!!(!lo&&ha.verticalIconBox);ha.iconBox&&At(_.iconCollisionBox.collisionVertexArray,Fr.icon.placed,ra,Ht?aa.x:0,Ht?aa.y:0),ha.verticalIconBox&&At(_.iconCollisionBox.collisionVertexArray,Fr.icon.placed,!ra,Ht?aa.x:0,Ht?aa.y:0)}}},zn=0;zn<_.symbolInstances.length;zn++)mn(zn);if(_.sortFeatures(this.transform.angle),this.retainedQueryData[_.bucketInstanceId]&&(this.retainedQueryData[_.bucketInstanceId].featureSortOrder=_.featureSortOrder),_.hasTextData()&&_.text.opacityVertexBuffer&&_.text.opacityVertexBuffer.updateData(_.text.opacityVertexArray),_.hasIconData()&&_.icon.opacityVertexBuffer&&_.icon.opacityVertexBuffer.updateData(_.icon.opacityVertexArray),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexBuffer&&_.iconCollisionBox.collisionVertexBuffer.updateData(_.iconCollisionBox.collisionVertexArray),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexBuffer&&_.textCollisionBox.collisionVertexBuffer.updateData(_.textCollisionBox.collisionVertexArray),_.bucketInstanceId in this.collisionCircleArrays){var an=this.collisionCircleArrays[_.bucketInstanceId];_.placementInvProjMatrix=an.invProjMatrix,_.placementViewportMatrix=an.viewportMatrix,_.collisionCircleArray=an.circles,delete this.collisionCircleArrays[_.bucketInstanceId]}},ms.prototype.symbolFadeChange=function(_){return this.fadeDuration===0?1:(_-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ms.prototype.zoomAdjustment=function(_){return Math.max(0,(this.transform.zoom-_)/1.5)},ms.prototype.hasTransitions=function(_){return this.stale||_-this.lastPlacementChangeTime<this.fadeDuration},ms.prototype.stillRecent=function(_,S){var x=this.zoomAtLastRecencyCheck===S?1-this.zoomAdjustment(S):1;return this.zoomAtLastRecencyCheck=S,this.commitTime+this.fadeDuration*x>_},ms.prototype.setStale=function(){this.stale=!0};var Gt=Math.pow(2,25),jn=Math.pow(2,24),Lr=Math.pow(2,17),Oi=Math.pow(2,16),Gi=Math.pow(2,9),Jo=Math.pow(2,8),Gs=Math.pow(2,1);function Ds(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;var S=_.placed?1:0,x=Math.floor(127*_.opacity);return x*Gt+S*jn+x*Lr+S*Oi+x*Gi+S*Jo+x*Gs+S}var zs=0,hl=function(_){this._sortAcrossTiles=_.layout.get("symbol-z-order")!=="viewport-y"&&_.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};hl.prototype.continuePlacement=function(_,S,x,O,k){for(var Z=this._bucketParts;this._currentTileIndex<_.length;)if(S.getBucketParts(Z,O,_[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Z.sort(function(J,ge){return J.sortKey-ge.sortKey}));this._currentPartIndex<Z.length;)if(S.placeLayerBucketPart(Z[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,k())return!0;return!1};var yh=function(_,S,x,O,k,Z,J){this.placement=new ms(_,k,Z,J),this._currentPlacementIndex=S.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=O,this._done=!1};yh.prototype.isDone=function(){return this._done},yh.prototype.continuePlacement=function(_,S,x){for(var O=this,k=E.browser.now(),Z=function(){var We=E.browser.now()-k;return!O._forceFullPlacement&&We>2};this._currentPlacementIndex>=0;){var J=S[_[this._currentPlacementIndex]],ge=this.placement.collisionIndex.transform.zoom;if(J.type==="symbol"&&(!J.minzoom||J.minzoom<=ge)&&(!J.maxzoom||J.maxzoom>ge)){if(this._inProgressLayer||(this._inProgressLayer=new hl(J)),this._inProgressLayer.continuePlacement(x[J.source],this.placement,this._showCollisionBoxes,J,Z))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},yh.prototype.commit=function(_){return this.placement.commit(_),this.placement};var Np=512/E.EXTENT/2,Ed=function(_,S,x){this.tileID=_,this.indexedSymbolInstances={},this.bucketInstanceId=x;for(var O=0;O<S.length;O++){var k=S.get(O),Z=k.key;this.indexedSymbolInstances[Z]||(this.indexedSymbolInstances[Z]=[]),this.indexedSymbolInstances[Z].push({crossTileID:k.crossTileID,coord:this.getScaledCoordinates(k,_)})}};Ed.prototype.getScaledCoordinates=function(_,S){var x=Np/Math.pow(2,S.canonical.z-this.tileID.canonical.z);return{x:Math.floor((S.canonical.x*E.EXTENT+_.anchorX)*x),y:Math.floor((S.canonical.y*E.EXTENT+_.anchorY)*x)}},Ed.prototype.findMatches=function(_,S,x){for(var O=this.tileID.canonical.z<S.canonical.z?1:Math.pow(2,this.tileID.canonical.z-S.canonical.z),k=0;k<_.length;k++){var Z=_.get(k);if(!Z.crossTileID){var J=this.indexedSymbolInstances[Z.key];if(J)for(var ge=this.getScaledCoordinates(Z,S),We=0,ht=J;We<ht.length;We+=1){var Ut=ht[We];if(Math.abs(Ut.coord.x-ge.x)<=O&&Math.abs(Ut.coord.y-ge.y)<=O&&!x[Ut.crossTileID]){x[Ut.crossTileID]=!0,Z.crossTileID=Ut.crossTileID;break}}}}};var jl=function(){this.maxCrossTileID=0};jl.prototype.generate=function(){return++this.maxCrossTileID};var Pf=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Pf.prototype.handleWrapJump=function(_){var S=Math.round((_-this.lng)/360);if(S!==0)for(var x in this.indexes){var O=this.indexes[x],k={};for(var Z in O){var J=O[Z];J.tileID=J.tileID.unwrapTo(J.tileID.wrap+S),k[J.tileID.key]=J}this.indexes[x]=k}this.lng=_},Pf.prototype.addBucket=function(_,S,x){if(this.indexes[_.overscaledZ]&&this.indexes[_.overscaledZ][_.key]){if(this.indexes[_.overscaledZ][_.key].bucketInstanceId===S.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(_.overscaledZ,this.indexes[_.overscaledZ][_.key])}for(var O=0;O<S.symbolInstances.length;O++)S.symbolInstances.get(O).crossTileID=0;this.usedCrossTileIDs[_.overscaledZ]||(this.usedCrossTileIDs[_.overscaledZ]={});var k=this.usedCrossTileIDs[_.overscaledZ];for(var Z in this.indexes){var J=this.indexes[Z];if(Number(Z)>_.overscaledZ)for(var ge in J){var We=J[ge];We.tileID.isChildOf(_)&&We.findMatches(S.symbolInstances,_,k)}else{var ht=J[_.scaledTo(Number(Z)).key];ht&&ht.findMatches(S.symbolInstances,_,k)}}for(var Ut=0;Ut<S.symbolInstances.length;Ut++){var Ht=S.symbolInstances.get(Ut);Ht.crossTileID||(Ht.crossTileID=x.generate(),k[Ht.crossTileID]=!0)}return this.indexes[_.overscaledZ]===void 0&&(this.indexes[_.overscaledZ]={}),this.indexes[_.overscaledZ][_.key]=new Ed(_,S.symbolInstances,S.bucketInstanceId),!0},Pf.prototype.removeBucketCrossTileIDs=function(_,S){for(var x in S.indexedSymbolInstances)for(var O=0,k=S.indexedSymbolInstances[x];O<k.length;O+=1)delete this.usedCrossTileIDs[_][k[O].crossTileID]},Pf.prototype.removeStaleBuckets=function(_){var S=!1;for(var x in this.indexes){var O=this.indexes[x];for(var k in O)_[O[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,O[k]),delete O[k],S=!0)}return S};var If=function(){this.layerIndexes={},this.crossTileIDs=new jl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};If.prototype.addLayer=function(_,S,x){var O=this.layerIndexes[_.id];O===void 0&&(O=this.layerIndexes[_.id]=new Pf);var k=!1,Z={};O.handleWrapJump(x);for(var J=0,ge=S;J<ge.length;J+=1){var We=ge[J],ht=We.getBucket(_);ht&&_.id===ht.layerIds[0]&&(ht.bucketInstanceId||(ht.bucketInstanceId=++this.maxBucketInstanceId),O.addBucket(We.tileID,ht,this.crossTileIDs)&&(k=!0),Z[ht.bucketInstanceId]=!0)}return O.removeStaleBuckets(Z)&&(k=!0),k},If.prototype.pruneUnusedLayers=function(_){var S={};for(var x in _.forEach(function(O){S[O]=!0}),this.layerIndexes)S[x]||delete this.layerIndexes[x]};var lu=function(_,S){return E.emitValidationErrors(_,S&&S.filter(function(x){return x.identifier!=="source.canvas"}))},ju=E.pick(ai,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),uc=E.pick(ai,["setCenter","setZoom","setBearing","setPitch"]),Qf=function(){var _={},S=E.styleSpec.$version;for(var x in E.styleSpec.$root){var O,k=E.styleSpec.$root[x];k.required&&(O=x==="version"?S:k.type==="array"?[]:{})!=null&&(_[x]=O)}return _}(),vu=function(_){function S(x,O){var k=this;O===void 0&&(O={}),_.call(this),this.map=x,this.dispatcher=new ut(Sr(),this),this.imageManager=new le,this.imageManager.setEventedParent(this),this.glyphManager=new bt(x._requestManager,O.localIdeographFontFamily),this.lineAtlas=new Ze(256,512),this.crossTileSymbolIndex=new If,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new E.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",E.getReferrer());var Z=this;this._rtlTextPluginCallback=S.registerForPluginStateChange(function(J){Z.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:J.pluginStatus,pluginURL:J.pluginURL},function(ge,We){if(E.triggerPluginCompletionEvent(ge),We&&We.every(function(Ut){return Ut}))for(var ht in Z.sourceCaches)Z.sourceCaches[ht].reload()})}),this.on("data",function(J){if(J.dataType==="source"&&J.sourceDataType==="metadata"){var ge=k.sourceCaches[J.sourceId];if(ge){var We=ge.getSource();if(We&&We.vectorLayerIds)for(var ht in k._layers){var Ut=k._layers[ht];Ut.source===We.id&&k._validateLayer(Ut)}}}})}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.loadURL=function(x,O){var k=this;O===void 0&&(O={}),this.fire(new E.Event("dataloading",{dataType:"style"}));var Z=typeof O.validate=="boolean"?O.validate:!E.isMapboxURL(x);x=this.map._requestManager.normalizeStyleURL(x,O.accessToken);var J=this.map._requestManager.transformRequest(x,E.ResourceType.Style);this._request=E.getJSON(J,function(ge,We){k._request=null,ge?k.fire(new E.ErrorEvent(ge)):We&&k._load(We,Z)})},S.prototype.loadJSON=function(x,O){var k=this;O===void 0&&(O={}),this.fire(new E.Event("dataloading",{dataType:"style"})),this._request=E.browser.frame(function(){k._request=null,k._load(x,O.validate!==!1)})},S.prototype.loadEmpty=function(){this.fire(new E.Event("dataloading",{dataType:"style"})),this._load(Qf,!1)},S.prototype._load=function(x,O){if(!O||!lu(this,E.validateStyle(x))){for(var k in this._loaded=!0,this.stylesheet=x,x.sources)this.addSource(k,x.sources[k],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs);var Z=hi(this.stylesheet.layers);this._order=Z.map(function(ht){return ht.id}),this._layers={},this._serializedLayers={};for(var J=0,ge=Z;J<ge.length;J+=1){var We=ge[J];(We=E.createStyleLayer(We)).setEventedParent(this,{layer:{id:We.id}}),this._layers[We.id]=We,this._serializedLayers[We.id]=We.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new je(this.stylesheet.light),this.fire(new E.Event("data",{dataType:"style"})),this.fire(new E.Event("style.load"))}},S.prototype._loadSprite=function(x){var O=this;this._spriteRequest=function(k,Z,J){var ge,We,ht,Ut=E.browser.devicePixelRatio>1?"@2x":"",Ht=E.getJSON(Z.transformRequest(Z.normalizeSpriteURL(k,Ut,".json"),E.ResourceType.SpriteJSON),function(mn,zn){Ht=null,ht||(ht=mn,ge=zn,bn())}),Xt=E.getImage(Z.transformRequest(Z.normalizeSpriteURL(k,Ut,".png"),E.ResourceType.SpriteImage),function(mn,zn){Xt=null,ht||(ht=mn,We=zn,bn())});function bn(){if(ht)J(ht);else if(ge&&We){var mn=E.browser.getImageData(We),zn={};for(var an in ge){var kn=ge[an],er=kn.width,vr=kn.height,Mr=kn.x,wr=kn.y,Fr=kn.sdf,ti=kn.pixelRatio,Ni=kn.stretchX,Pi=kn.stretchY,lo=kn.content,zo=new E.RGBAImage({width:er,height:vr});E.RGBAImage.copy(mn,zo,{x:Mr,y:wr},{x:0,y:0},{width:er,height:vr}),zn[an]={data:zo,pixelRatio:ti,sdf:Fr,stretchX:Ni,stretchY:Pi,content:lo}}J(null,zn)}}return{cancel:function(){Ht&&(Ht.cancel(),Ht=null),Xt&&(Xt.cancel(),Xt=null)}}}(x,this.map._requestManager,function(k,Z){if(O._spriteRequest=null,k)O.fire(new E.ErrorEvent(k));else if(Z)for(var J in Z)O.imageManager.addImage(J,Z[J]);O.imageManager.setLoaded(!0),O._availableImages=O.imageManager.listImages(),O.dispatcher.broadcast("setImages",O._availableImages),O.fire(new E.Event("data",{dataType:"style"}))})},S.prototype._validateLayer=function(x){var O=this.sourceCaches[x.source];if(O){var k=x.sourceLayer;if(k){var Z=O.getSource();(Z.type==="geojson"||Z.vectorLayerIds&&Z.vectorLayerIds.indexOf(k)===-1)&&this.fire(new E.ErrorEvent(new Error('Source layer "'+k+'" does not exist on source "'+Z.id+'" as specified by style layer "'+x.id+'"')))}}},S.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var x in this.sourceCaches)if(!this.sourceCaches[x].loaded())return!1;return!!this.imageManager.isLoaded()},S.prototype._serializeLayers=function(x){for(var O=[],k=0,Z=x;k<Z.length;k+=1){var J=this._layers[Z[k]];J.type!=="custom"&&O.push(J.serialize())}return O},S.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(var O in this._layers)if(this._layers[O].hasTransition())return!0;return!1},S.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},S.prototype.update=function(x){if(this._loaded){var O=this._changed;if(this._changed){var k=Object.keys(this._updatedLayers),Z=Object.keys(this._removedLayers);for(var J in(k.length||Z.length)&&this._updateWorkerLayers(k,Z),this._updatedSources){var ge=this._updatedSources[J];ge==="reload"?this._reloadSource(J):ge==="clear"&&this._clearSource(J)}for(var We in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[We].updateTransitions(x);this.light.updateTransitions(x),this._resetUpdates()}var ht={};for(var Ut in this.sourceCaches){var Ht=this.sourceCaches[Ut];ht[Ut]=Ht.used,Ht.used=!1}for(var Xt=0,bn=this._order;Xt<bn.length;Xt+=1){var mn=this._layers[bn[Xt]];mn.recalculate(x,this._availableImages),!mn.isHidden(x.zoom)&&mn.source&&(this.sourceCaches[mn.source].used=!0)}for(var zn in ht){var an=this.sourceCaches[zn];ht[zn]!==an.used&&an.fire(new E.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:zn}))}this.light.recalculate(x),this.z=x.zoom,O&&this.fire(new E.Event("data",{dataType:"style"}))}},S.prototype._updateTilesForChangedImages=function(){var x=Object.keys(this._changedImages);if(x.length){for(var O in this.sourceCaches)this.sourceCaches[O].reloadTilesForDependencies(["icons","patterns"],x);this._changedImages={}}},S.prototype._updateWorkerLayers=function(x,O){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(x),removedIds:O})},S.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},S.prototype.setState=function(x){var O=this;if(this._checkLoaded(),lu(this,E.validateStyle(x)))return!1;(x=E.clone$1(x)).layers=hi(x.layers);var k=function(J,ge){if(!J)return[{command:ai.setStyle,args:[ge]}];var We=[];try{if(!E.deepEqual(J.version,ge.version))return[{command:ai.setStyle,args:[ge]}];E.deepEqual(J.center,ge.center)||We.push({command:ai.setCenter,args:[ge.center]}),E.deepEqual(J.zoom,ge.zoom)||We.push({command:ai.setZoom,args:[ge.zoom]}),E.deepEqual(J.bearing,ge.bearing)||We.push({command:ai.setBearing,args:[ge.bearing]}),E.deepEqual(J.pitch,ge.pitch)||We.push({command:ai.setPitch,args:[ge.pitch]}),E.deepEqual(J.sprite,ge.sprite)||We.push({command:ai.setSprite,args:[ge.sprite]}),E.deepEqual(J.glyphs,ge.glyphs)||We.push({command:ai.setGlyphs,args:[ge.glyphs]}),E.deepEqual(J.transition,ge.transition)||We.push({command:ai.setTransition,args:[ge.transition]}),E.deepEqual(J.light,ge.light)||We.push({command:ai.setLight,args:[ge.light]});var ht={},Ut=[];(function(Xt,bn,mn,zn){var an;for(an in bn=bn||{},Xt=Xt||{})Xt.hasOwnProperty(an)&&(bn.hasOwnProperty(an)||xi(an,mn,zn));for(an in bn)bn.hasOwnProperty(an)&&(Xt.hasOwnProperty(an)?E.deepEqual(Xt[an],bn[an])||(Xt[an].type==="geojson"&&bn[an].type==="geojson"&&va(Xt,bn,an)?mn.push({command:ai.setGeoJSONSourceData,args:[an,bn[an].data]}):ea(an,bn,mn,zn)):Mo(an,bn,mn))})(J.sources,ge.sources,Ut,ht);var Ht=[];J.layers&&J.layers.forEach(function(Xt){ht[Xt.source]?We.push({command:ai.removeLayer,args:[Xt.id]}):Ht.push(Xt)}),We=We.concat(Ut),function(Xt,bn,mn){bn=bn||[];var zn,an,kn,er,vr,Mr,wr,Fr=(Xt=Xt||[]).map($o),ti=bn.map($o),Ni=Xt.reduce(Be,{}),Pi=bn.reduce(Be,{}),lo=Fr.slice(),zo=Object.create(null);for(zn=0,an=0;zn<Fr.length;zn++)Pi.hasOwnProperty(kn=Fr[zn])?an++:(mn.push({command:ai.removeLayer,args:[kn]}),lo.splice(lo.indexOf(kn,an),1));for(zn=0,an=0;zn<ti.length;zn++)lo[lo.length-1-zn]!==(kn=ti[ti.length-1-zn])&&(Ni.hasOwnProperty(kn)?(mn.push({command:ai.removeLayer,args:[kn]}),lo.splice(lo.lastIndexOf(kn,lo.length-an),1)):an++,mn.push({command:ai.addLayer,args:[Pi[kn],Mr=lo[lo.length-zn]]}),lo.splice(lo.length-zn,0,kn),zo[kn]=!0);for(zn=0;zn<ti.length;zn++)if(er=Ni[kn=ti[zn]],vr=Pi[kn],!zo[kn]&&!E.deepEqual(er,vr))if(E.deepEqual(er.source,vr.source)&&E.deepEqual(er["source-layer"],vr["source-layer"])&&E.deepEqual(er.type,vr.type)){for(wr in Ro(er.layout,vr.layout,mn,kn,null,ai.setLayoutProperty),Ro(er.paint,vr.paint,mn,kn,null,ai.setPaintProperty),E.deepEqual(er.filter,vr.filter)||mn.push({command:ai.setFilter,args:[kn,vr.filter]}),E.deepEqual(er.minzoom,vr.minzoom)&&E.deepEqual(er.maxzoom,vr.maxzoom)||mn.push({command:ai.setLayerZoomRange,args:[kn,vr.minzoom,vr.maxzoom]}),er)er.hasOwnProperty(wr)&&wr!=="layout"&&wr!=="paint"&&wr!=="filter"&&wr!=="metadata"&&wr!=="minzoom"&&wr!=="maxzoom"&&(wr.indexOf("paint.")===0?Ro(er[wr],vr[wr],mn,kn,wr.slice(6),ai.setPaintProperty):E.deepEqual(er[wr],vr[wr])||mn.push({command:ai.setLayerProperty,args:[kn,wr,vr[wr]]}));for(wr in vr)vr.hasOwnProperty(wr)&&!er.hasOwnProperty(wr)&&wr!=="layout"&&wr!=="paint"&&wr!=="filter"&&wr!=="metadata"&&wr!=="minzoom"&&wr!=="maxzoom"&&(wr.indexOf("paint.")===0?Ro(er[wr],vr[wr],mn,kn,wr.slice(6),ai.setPaintProperty):E.deepEqual(er[wr],vr[wr])||mn.push({command:ai.setLayerProperty,args:[kn,wr,vr[wr]]}))}else mn.push({command:ai.removeLayer,args:[kn]}),Mr=lo[lo.lastIndexOf(kn)+1],mn.push({command:ai.addLayer,args:[vr,Mr]})}(Ht,ge.layers,We)}catch(Xt){console.warn("Unable to compute style diff:",Xt),We=[{command:ai.setStyle,args:[ge]}]}return We}(this.serialize(),x).filter(function(J){return!(J.command in uc)});if(k.length===0)return!1;var Z=k.filter(function(J){return!(J.command in ju)});if(Z.length>0)throw new Error("Unimplemented: "+Z.map(function(J){return J.command}).join(", ")+".");return k.forEach(function(J){J.command!=="setTransition"&&O[J.command].apply(O,J.args)}),this.stylesheet=x,!0},S.prototype.addImage=function(x,O){if(this.getImage(x))return this.fire(new E.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(x,O),this._afterImageUpdated(x)},S.prototype.updateImage=function(x,O){this.imageManager.updateImage(x,O)},S.prototype.getImage=function(x){return this.imageManager.getImage(x)},S.prototype.removeImage=function(x){if(!this.getImage(x))return this.fire(new E.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(x),this._afterImageUpdated(x)},S.prototype._afterImageUpdated=function(x){this._availableImages=this.imageManager.listImages(),this._changedImages[x]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new E.Event("data",{dataType:"style"}))},S.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},S.prototype.addSource=function(x,O,k){var Z=this;if(k===void 0&&(k={}),this._checkLoaded(),this.sourceCaches[x]!==void 0)throw new Error("There is already a source with this ID");if(!O.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(O).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(O.type)>=0&&this._validate(E.validateStyle.source,"sources."+x,O,null,k))){this.map&&this.map._collectResourceTiming&&(O.collectResourceTiming=!0);var J=this.sourceCaches[x]=new Kt(x,O,this.dispatcher);J.style=this,J.setEventedParent(this,function(){return{isSourceLoaded:Z.loaded(),source:J.serialize(),sourceId:x}}),J.onAdd(this.map),this._changed=!0}},S.prototype.removeSource=function(x){if(this._checkLoaded(),this.sourceCaches[x]===void 0)throw new Error("There is no source with this ID");for(var O in this._layers)if(this._layers[O].source===x)return this.fire(new E.ErrorEvent(new Error('Source "'+x+'" cannot be removed while layer "'+O+'" is using it.')));var k=this.sourceCaches[x];delete this.sourceCaches[x],delete this._updatedSources[x],k.fire(new E.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x})),k.setEventedParent(null),k.clearTiles(),k.onRemove&&k.onRemove(this.map),this._changed=!0},S.prototype.setGeoJSONSourceData=function(x,O){this._checkLoaded(),this.sourceCaches[x].getSource().setData(O),this._changed=!0},S.prototype.getSource=function(x){return this.sourceCaches[x]&&this.sourceCaches[x].getSource()},S.prototype.addLayer=function(x,O,k){k===void 0&&(k={}),this._checkLoaded();var Z=x.id;if(this.getLayer(Z))this.fire(new E.ErrorEvent(new Error('Layer with id "'+Z+'" already exists on this map')));else{var J;if(x.type==="custom"){if(lu(this,E.validateCustomStyleLayer(x)))return;J=E.createStyleLayer(x)}else{if(typeof x.source=="object"&&(this.addSource(Z,x.source),x=E.clone$1(x),x=E.extend(x,{source:Z})),this._validate(E.validateStyle.layer,"layers."+Z,x,{arrayIndex:-1},k))return;J=E.createStyleLayer(x),this._validateLayer(J),J.setEventedParent(this,{layer:{id:Z}}),this._serializedLayers[J.id]=J.serialize()}var ge=O?this._order.indexOf(O):this._order.length;if(O&&ge===-1)this.fire(new E.ErrorEvent(new Error('Layer with id "'+O+'" does not exist on this map.')));else{if(this._order.splice(ge,0,Z),this._layerOrderChanged=!0,this._layers[Z]=J,this._removedLayers[Z]&&J.source&&J.type!=="custom"){var We=this._removedLayers[Z];delete this._removedLayers[Z],We.type!==J.type?this._updatedSources[J.source]="clear":(this._updatedSources[J.source]="reload",this.sourceCaches[J.source].pause())}this._updateLayer(J),J.onAdd&&J.onAdd(this.map)}}},S.prototype.moveLayer=function(x,O){if(this._checkLoaded(),this._changed=!0,this._layers[x]){if(x!==O){var k=this._order.indexOf(x);this._order.splice(k,1);var Z=O?this._order.indexOf(O):this._order.length;O&&Z===-1?this.fire(new E.ErrorEvent(new Error('Layer with id "'+O+'" does not exist on this map.'))):(this._order.splice(Z,0,x),this._layerOrderChanged=!0)}}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be moved.")))},S.prototype.removeLayer=function(x){this._checkLoaded();var O=this._layers[x];if(O){O.setEventedParent(null);var k=this._order.indexOf(x);this._order.splice(k,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[x]=O,delete this._layers[x],delete this._serializedLayers[x],delete this._updatedLayers[x],delete this._updatedPaintProps[x],O.onRemove&&O.onRemove(this.map)}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be removed.")))},S.prototype.getLayer=function(x){return this._layers[x]},S.prototype.hasLayer=function(x){return x in this._layers},S.prototype.setLayerZoomRange=function(x,O,k){this._checkLoaded();var Z=this.getLayer(x);Z?Z.minzoom===O&&Z.maxzoom===k||(O!=null&&(Z.minzoom=O),k!=null&&(Z.maxzoom=k),this._updateLayer(Z)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot have zoom extent.")))},S.prototype.setFilter=function(x,O,k){k===void 0&&(k={}),this._checkLoaded();var Z=this.getLayer(x);if(Z){if(!E.deepEqual(Z.filter,O))return O==null?(Z.filter=void 0,void this._updateLayer(Z)):void(this._validate(E.validateStyle.filter,"layers."+Z.id+".filter",O,null,k)||(Z.filter=E.clone$1(O),this._updateLayer(Z)))}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be filtered.")))},S.prototype.getFilter=function(x){return E.clone$1(this.getLayer(x).filter)},S.prototype.setLayoutProperty=function(x,O,k,Z){Z===void 0&&(Z={}),this._checkLoaded();var J=this.getLayer(x);J?E.deepEqual(J.getLayoutProperty(O),k)||(J.setLayoutProperty(O,k,Z),this._updateLayer(J)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getLayoutProperty=function(x,O){var k=this.getLayer(x);if(k)return k.getLayoutProperty(O);this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style.")))},S.prototype.setPaintProperty=function(x,O,k,Z){Z===void 0&&(Z={}),this._checkLoaded();var J=this.getLayer(x);J?E.deepEqual(J.getPaintProperty(O),k)||(J.setPaintProperty(O,k,Z)&&this._updateLayer(J),this._changed=!0,this._updatedPaintProps[x]=!0):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getPaintProperty=function(x,O){return this.getLayer(x).getPaintProperty(O)},S.prototype.setFeatureState=function(x,O){this._checkLoaded();var k=x.source,Z=x.sourceLayer,J=this.sourceCaches[k];if(J!==void 0){var ge=J.getSource().type;ge==="geojson"&&Z?this.fire(new E.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ge!=="vector"||Z?(x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),J.setFeatureState(Z,x.id,O)):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.removeFeatureState=function(x,O){this._checkLoaded();var k=x.source,Z=this.sourceCaches[k];if(Z!==void 0){var J=Z.getSource().type,ge=J==="vector"?x.sourceLayer:void 0;J!=="vector"||ge?O&&typeof x.id!="string"&&typeof x.id!="number"?this.fire(new E.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Z.removeFeatureState(ge,x.id,O):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.getFeatureState=function(x){this._checkLoaded();var O=x.source,k=x.sourceLayer,Z=this.sourceCaches[O];if(Z!==void 0){if(Z.getSource().type!=="vector"||k)return x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),Z.getFeatureState(k,x.id);this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+O+"' does not exist in the map's style.")))},S.prototype.getTransition=function(){return E.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},S.prototype.serialize=function(){return E.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:E.mapObject(this.sourceCaches,function(x){return x.serialize()}),layers:this._serializeLayers(this._order)},function(x){return x!==void 0})},S.prototype._updateLayer=function(x){this._updatedLayers[x.id]=!0,x.source&&!this._updatedSources[x.source]&&this.sourceCaches[x.source].getSource().type!=="raster"&&(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause()),this._changed=!0},S.prototype._flattenAndSortRenderedFeatures=function(x){for(var O=this,k=function(Ni){return O._layers[Ni].type==="fill-extrusion"},Z={},J=[],ge=this._order.length-1;ge>=0;ge--){var We=this._order[ge];if(k(We)){Z[We]=ge;for(var ht=0,Ut=x;ht<Ut.length;ht+=1){var Ht=Ut[ht][We];if(Ht)for(var Xt=0,bn=Ht;Xt<bn.length;Xt+=1)J.push(bn[Xt])}}}J.sort(function(Ni,Pi){return Pi.intersectionZ-Ni.intersectionZ});for(var mn=[],zn=this._order.length-1;zn>=0;zn--){var an=this._order[zn];if(k(an))for(var kn=J.length-1;kn>=0;kn--){var er=J[kn].feature;if(Z[er.layer.id]<zn)break;mn.push(er),J.pop()}else for(var vr=0,Mr=x;vr<Mr.length;vr+=1){var wr=Mr[vr][an];if(wr)for(var Fr=0,ti=wr;Fr<ti.length;Fr+=1)mn.push(ti[Fr].feature)}}return mn},S.prototype.queryRenderedFeatures=function(x,O,k){O&&O.filter&&this._validate(E.validateStyle.filter,"queryRenderedFeatures.filter",O.filter,null,O);var Z={};if(O&&O.layers){if(!Array.isArray(O.layers))return this.fire(new E.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var J=0,ge=O.layers;J<ge.length;J+=1){var We=ge[J],ht=this._layers[We];if(!ht)return this.fire(new E.ErrorEvent(new Error("The layer '"+We+"' does not exist in the map's style and cannot be queried for features."))),[];Z[ht.source]=!0}}var Ut=[];for(var Ht in O.availableImages=this._availableImages,this.sourceCaches)O.layers&&!Z[Ht]||Ut.push(Pn(this.sourceCaches[Ht],this._layers,this._serializedLayers,x,O,k));return this.placement&&Ut.push(function(Xt,bn,mn,zn,an,kn,er){for(var vr={},Mr=kn.queryRenderedSymbols(zn),wr=[],Fr=0,ti=Object.keys(Mr).map(Number);Fr<ti.length;Fr+=1)wr.push(er[ti[Fr]]);wr.sort($n);for(var Ni=function(){var Go=lo[Pi],as=Go.featureIndex.lookupSymbolFeatures(Mr[Go.bucketInstanceId],bn,Go.bucketIndex,Go.sourceLayerIndex,an.filter,an.layers,an.availableImages,Xt);for(var Or in as){var en=vr[Or]=vr[Or]||[],ha=as[Or];ha.sort(function(ga,ra){var Bo=Go.featureSortOrder;if(Bo){var uu=Bo.indexOf(ga.featureIndex);return Bo.indexOf(ra.featureIndex)-uu}return ra.featureIndex-ga.featureIndex});for(var aa=0,Yo=ha;aa<Yo.length;aa+=1)en.push(Yo[aa])}},Pi=0,lo=wr;Pi<lo.length;Pi+=1)Ni();var zo=function(Go){vr[Go].forEach(function(as){var Or=as.feature,en=mn[Xt[Go].source].getFeatureState(Or.layer["source-layer"],Or.id);Or.source=Or.layer.source,Or.layer["source-layer"]&&(Or.sourceLayer=Or.layer["source-layer"]),Or.state=en})};for(var Wo in vr)zo(Wo);return vr}(this._layers,this._serializedLayers,this.sourceCaches,x,O,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ut)},S.prototype.querySourceFeatures=function(x,O){O&&O.filter&&this._validate(E.validateStyle.filter,"querySourceFeatures.filter",O.filter,null,O);var k=this.sourceCaches[x];return k?function(Z,J){for(var ge=Z.getRenderableIds().map(function(bn){return Z.getTileByID(bn)}),We=[],ht={},Ut=0;Ut<ge.length;Ut++){var Ht=ge[Ut],Xt=Ht.tileID.canonical.key;ht[Xt]||(ht[Xt]=!0,Ht.querySourceFeatures(We,J))}return We}(k,O):[]},S.prototype.addSourceType=function(x,O,k){return S.getSourceType(x)?k(new Error('A source type called "'+x+'" already exists.')):(S.setSourceType(x,O),O.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:x,url:O.workerSourceURL},k):k(null,null))},S.prototype.getLight=function(){return this.light.getLight()},S.prototype.setLight=function(x,O){O===void 0&&(O={}),this._checkLoaded();var k=this.light.getLight(),Z=!1;for(var J in x)if(!E.deepEqual(x[J],k[J])){Z=!0;break}if(Z){var ge={now:E.browser.now(),transition:E.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(x,O),this.light.updateTransitions(ge)}},S.prototype._validate=function(x,O,k,Z,J){return J===void 0&&(J={}),(!J||J.validate!==!1)&&lu(this,x.call(E.validateStyle,E.extend({key:O,style:this.serialize(),value:k,styleSpec:E.styleSpec},Z)))},S.prototype._remove=function(){for(var x in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),E.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[x].setEventedParent(null);for(var O in this.sourceCaches)this.sourceCaches[O].clearTiles(),this.sourceCaches[O].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},S.prototype._clearSource=function(x){this.sourceCaches[x].clearTiles()},S.prototype._reloadSource=function(x){this.sourceCaches[x].resume(),this.sourceCaches[x].reload()},S.prototype._updateSources=function(x){for(var O in this.sourceCaches)this.sourceCaches[O].update(x)},S.prototype._generateCollisionBoxes=function(){for(var x in this.sourceCaches)this._reloadSource(x)},S.prototype._updatePlacement=function(x,O,k,Z,J){J===void 0&&(J=!1);for(var ge=!1,We=!1,ht={},Ut=0,Ht=this._order;Ut<Ht.length;Ut+=1){var Xt=this._layers[Ht[Ut]];if(Xt.type==="symbol"){if(!ht[Xt.source]){var bn=this.sourceCaches[Xt.source];ht[Xt.source]=bn.getRenderableIds(!0).map(function(er){return bn.getTileByID(er)}).sort(function(er,vr){return vr.tileID.overscaledZ-er.tileID.overscaledZ||(er.tileID.isLessThan(vr.tileID)?-1:1)})}var mn=this.crossTileSymbolIndex.addLayer(Xt,ht[Xt.source],x.center.lng);ge=ge||mn}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((J=J||this._layerOrderChanged||k===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.browser.now(),x.zoom))&&(this.pauseablePlacement=new yh(x,this._order,J,O,k,Z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ht),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.browser.now()),We=!0),ge&&this.pauseablePlacement.placement.setStale()),We||ge)for(var zn=0,an=this._order;zn<an.length;zn+=1){var kn=this._layers[an[zn]];kn.type==="symbol"&&this.placement.updateLayerOpacities(kn,ht[kn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.browser.now())},S.prototype._releaseSymbolFadeTiles=function(){for(var x in this.sourceCaches)this.sourceCaches[x].releaseSymbolFadeTiles()},S.prototype.getImages=function(x,O,k){this.imageManager.getImages(O.icons,k),this._updateTilesForChangedImages();var Z=this.sourceCaches[O.source];Z&&Z.setDependencies(O.tileID.key,O.type,O.icons)},S.prototype.getGlyphs=function(x,O,k){this.glyphManager.getGlyphs(O.stacks,k)},S.prototype.getResource=function(x,O,k){return E.makeRequest(O,k)},S}(E.Evented);vu.getSourceType=function(_){return Wt[_]},vu.setSourceType=function(_,S){Wt[_]=S},vu.registerForPluginStateChange=E.registerForPluginStateChange;var Cs=E.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ou=gs(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),yf=gs(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Vh=gs(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Bp=gs(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),_h=gs("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Sd=gs(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Jf=gs(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Hh=gs("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Td=gs("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),wd=gs("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),m0=gs(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Lf=gs(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Fc=gs(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ap=gs(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Vl=gs(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ec=gs(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Qc=gs(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),mu=gs(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Jc=gs(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),cc=gs(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ef=gs(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Pl=gs(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),kc=gs(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),_f=gs(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),sp=gs(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Wh=gs(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function gs(_,S){var x=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,O=S.match(/attribute ([\w]+) ([\w]+)/g),k=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Z=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),J=Z?Z.concat(k):k,ge={};return{fragmentSource:_=_.replace(x,function(We,ht,Ut,Ht,Xt){return ge[Xt]=!0,ht==="define"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
varying `+Ut+" "+Ht+" "+Xt+`;
#else
uniform `+Ut+" "+Ht+" u_"+Xt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Xt+`
    `+Ut+" "+Ht+" "+Xt+" = u_"+Xt+`;
#endif
`}),vertexSource:S=S.replace(x,function(We,ht,Ut,Ht,Xt){var bn=Ht==="float"?"vec2":"vec4",mn=Xt.match(/color/)?"color":bn;return ge[Xt]?ht==="define"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
uniform lowp float u_`+Xt+`_t;
attribute `+Ut+" "+bn+" a_"+Xt+`;
varying `+Ut+" "+Ht+" "+Xt+`;
#else
uniform `+Ut+" "+Ht+" u_"+Xt+`;
#endif
`:mn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Xt+" = a_"+Xt+`;
#else
    `+Ut+" "+Ht+" "+Xt+" = u_"+Xt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Xt+" = unpack_mix_"+mn+"(a_"+Xt+", u_"+Xt+`_t);
#else
    `+Ut+" "+Ht+" "+Xt+" = u_"+Xt+`;
#endif
`:ht==="define"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
uniform lowp float u_`+Xt+`_t;
attribute `+Ut+" "+bn+" a_"+Xt+`;
#else
uniform `+Ut+" "+Ht+" u_"+Xt+`;
#endif
`:mn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Ut+" "+Ht+" "+Xt+" = a_"+Xt+`;
#else
    `+Ut+" "+Ht+" "+Xt+" = u_"+Xt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Ut+" "+Ht+" "+Xt+" = unpack_mix_"+mn+"(a_"+Xt+", u_"+Xt+`_t);
#else
    `+Ut+" "+Ht+" "+Xt+" = u_"+Xt+`;
#endif
`}),staticAttributes:O,staticUniforms:J}}var Ad=Object.freeze({__proto__:null,prelude:Ou,background:yf,backgroundPattern:Vh,circle:Bp,clippingMask:_h,heatmap:Sd,heatmapTexture:Jf,collisionBox:Hh,collisionCircle:Td,debug:wd,fill:m0,fillOutline:Lf,fillOutlinePattern:Fc,fillPattern:ap,fillExtrusion:Vl,fillExtrusionPattern:Ec,hillshadePrepare:Qc,hillshade:mu,line:Jc,lineGradient:cc,linePattern:ef,lineSDF:Pl,raster:kc,symbolIcon:_f,symbolSDF:sp,symbolTextAndIcon:Wh}),Gh=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Od(_){for(var S=[],x=0;x<_.length;x++)if(_[x]!==null){var O=_[x].split(" ");S.push(O.pop())}return S}Gh.prototype.bind=function(_,S,x,O,k,Z,J,ge){this.context=_;for(var We=this.boundPaintVertexBuffers.length!==O.length,ht=0;!We&&ht<O.length;ht++)this.boundPaintVertexBuffers[ht]!==O[ht]&&(We=!0);_.extVertexArrayObject&&this.vao&&this.boundProgram===S&&this.boundLayoutVertexBuffer===x&&!We&&this.boundIndexBuffer===k&&this.boundVertexOffset===Z&&this.boundDynamicVertexBuffer===J&&this.boundDynamicVertexBuffer2===ge?(_.bindVertexArrayOES.set(this.vao),J&&J.bind(),k&&k.dynamicDraw&&k.bind(),ge&&ge.bind()):this.freshBind(S,x,O,k,Z,J,ge)},Gh.prototype.freshBind=function(_,S,x,O,k,Z,J){var ge,We=_.numAttributes,ht=this.context,Ut=ht.gl;if(ht.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ht.extVertexArrayObject.createVertexArrayOES(),ht.bindVertexArrayOES.set(this.vao),ge=0,this.boundProgram=_,this.boundLayoutVertexBuffer=S,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=O,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=Z,this.boundDynamicVertexBuffer2=J;else{ge=ht.currentNumAttributes||0;for(var Ht=We;Ht<ge;Ht++)Ut.disableVertexAttribArray(Ht)}S.enableAttributes(Ut,_);for(var Xt=0,bn=x;Xt<bn.length;Xt+=1)bn[Xt].enableAttributes(Ut,_);Z&&Z.enableAttributes(Ut,_),J&&J.enableAttributes(Ut,_),S.bind(),S.setVertexAttribPointers(Ut,_,k);for(var mn=0,zn=x;mn<zn.length;mn+=1){var an=zn[mn];an.bind(),an.setVertexAttribPointers(Ut,_,k)}Z&&(Z.bind(),Z.setVertexAttribPointers(Ut,_,k)),O&&O.bind(),J&&(J.bind(),J.setVertexAttribPointers(Ut,_,k)),ht.currentNumAttributes=We},Gh.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ul=function(_,S,x,O,k,Z){var J=_.gl;this.program=J.createProgram();for(var ge=Od(x.staticAttributes),We=O?O.getBinderAttributes():[],ht=ge.concat(We),Ut=x.staticUniforms?Od(x.staticUniforms):[],Ht=O?O.getBinderUniforms():[],Xt=[],bn=0,mn=Ut.concat(Ht);bn<mn.length;bn+=1){var zn=mn[bn];Xt.indexOf(zn)<0&&Xt.push(zn)}var an=O?O.defines():[];Z&&an.push("#define OVERDRAW_INSPECTOR;");var kn=an.concat(Ou.fragmentSource,x.fragmentSource).join(`
`),er=an.concat(Ou.vertexSource,x.vertexSource).join(`
`),vr=J.createShader(J.FRAGMENT_SHADER);if(J.isContextLost())this.failedToCreate=!0;else{J.shaderSource(vr,kn),J.compileShader(vr),J.attachShader(this.program,vr);var Mr=J.createShader(J.VERTEX_SHADER);if(J.isContextLost())this.failedToCreate=!0;else{J.shaderSource(Mr,er),J.compileShader(Mr),J.attachShader(this.program,Mr),this.attributes={};var wr={};this.numAttributes=ht.length;for(var Fr=0;Fr<this.numAttributes;Fr++)ht[Fr]&&(J.bindAttribLocation(this.program,Fr,ht[Fr]),this.attributes[ht[Fr]]=Fr);J.linkProgram(this.program),J.deleteShader(Mr),J.deleteShader(vr);for(var ti=0;ti<Xt.length;ti++){var Ni=Xt[ti];if(Ni&&!wr[Ni]){var Pi=J.getUniformLocation(this.program,Ni);Pi&&(wr[Ni]=Pi)}}this.fixedUniforms=k(_,wr),this.binderUniforms=O?O.getUniforms(_,wr):[]}}};function bh(_,S,x){var O=1/ci(x,1,S.transform.tileZoom),k=Math.pow(2,x.tileID.overscaledZ),Z=x.tileSize*Math.pow(2,S.transform.tileZoom)/k,J=Z*(x.tileID.canonical.x+x.tileID.wrap*k),ge=Z*x.tileID.canonical.y;return{u_image:0,u_texsize:x.imageAtlasTexture.size,u_scale:[O,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[J>>16,ge>>16],u_pixel_coord_lower:[65535&J,65535&ge]}}ul.prototype.draw=function(_,S,x,O,k,Z,J,ge,We,ht,Ut,Ht,Xt,bn,mn,zn){var an,kn=_.gl;if(!this.failedToCreate){for(var er in _.program.set(this.program),_.setDepthMode(x),_.setStencilMode(O),_.setColorMode(k),_.setCullFace(Z),this.fixedUniforms)this.fixedUniforms[er].set(J[er]);bn&&bn.setUniforms(_,this.binderUniforms,Ht,{zoom:Xt});for(var vr=(an={},an[kn.LINES]=2,an[kn.TRIANGLES]=3,an[kn.LINE_STRIP]=1,an)[S],Mr=0,wr=Ut.get();Mr<wr.length;Mr+=1){var Fr=wr[Mr],ti=Fr.vaos||(Fr.vaos={});(ti[ge]||(ti[ge]=new Gh)).bind(_,this,We,bn?bn.getPaintVertexBuffers():[],ht,Fr.vertexOffset,mn,zn),kn.drawElements(S,Fr.primitiveLength*vr,kn.UNSIGNED_SHORT,Fr.primitiveOffset*vr*2)}}};var xh=function(_,S,x,O){var k=S.style.light,Z=k.properties.get("position"),J=[Z.x,Z.y,Z.z],ge=E.create$1();k.properties.get("anchor")==="viewport"&&E.fromRotation(ge,-S.transform.angle),E.transformMat3(J,J,ge);var We=k.properties.get("color");return{u_matrix:_,u_lightpos:J,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[We.r,We.g,We.b],u_vertical_gradient:+x,u_opacity:O}},ie=function(_,S,x,O,k,Z,J){return E.extend(xh(_,S,x,O),bh(Z,S,J),{u_height_factor:-Math.pow(2,k.overscaledZ)/J.tileSize/8})},Se=function(_){return{u_matrix:_}},tt=function(_,S,x,O){return E.extend(Se(_),bh(x,S,O))},cn=function(_,S){return{u_matrix:_,u_world:S}},Q=function(_,S,x,O,k){return E.extend(tt(_,S,x,O),{u_world:k})},rr=function(_,S,x,O){var k,Z,J=_.transform;if(O.paint.get("circle-pitch-alignment")==="map"){var ge=ci(x,1,J.zoom);k=!0,Z=[ge,ge]}else k=!1,Z=J.pixelsToGLUnits;return{u_camera_to_center_distance:J.cameraToCenterDistance,u_scale_with_map:+(O.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(S.posMatrix,x,O.paint.get("circle-translate"),O.paint.get("circle-translate-anchor")),u_pitch_with_map:+k,u_device_pixel_ratio:E.browser.devicePixelRatio,u_extrude_scale:Z}},Rr=function(_,S,x){var O=ci(x,1,S.zoom),k=Math.pow(2,S.zoom-x.tileID.overscaledZ),Z=x.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:S.cameraToCenterDistance,u_pixels_to_tile_units:O,u_extrude_scale:[S.pixelsToGLUnits[0]/(O*k),S.pixelsToGLUnits[1]/(O*k)],u_overscale_factor:Z}},Li=function(_,S,x){return{u_matrix:_,u_inv_matrix:S,u_camera_to_center_distance:x.cameraToCenterDistance,u_viewport_size:[x.width,x.height]}},Ui=function(_,S,x){return x===void 0&&(x=1),{u_matrix:_,u_color:S,u_overlay:0,u_overlay_scale:x}},so=function(_){return{u_matrix:_}},uo=function(_,S,x,O){return{u_matrix:_,u_extrude_scale:ci(S,1,x),u_intensity:O}},xa=function(_,S,x){var O=_.transform;return{u_matrix:Ta(_,S,x),u_ratio:1/ci(S,1,O.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},Do=function(_,S,x,O){return E.extend(xa(_,S,x),{u_image:0,u_image_height:O})},Ea=function(_,S,x,O){var k=_.transform,Z=da(S,k);return{u_matrix:Ta(_,S,x),u_texsize:S.imageAtlasTexture.size,u_ratio:1/ci(S,1,k.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_image:0,u_scale:[Z,O.fromScale,O.toScale],u_fade:O.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},ts=function(_,S,x,O,k){var Z=_.lineAtlas,J=da(S,_.transform),ge=x.layout.get("line-cap")==="round",We=Z.getDash(O.from,ge),ht=Z.getDash(O.to,ge),Ut=We.width*k.fromScale,Ht=ht.width*k.toScale;return E.extend(xa(_,S,x),{u_patternscale_a:[J/Ut,-We.height/2],u_patternscale_b:[J/Ht,-ht.height/2],u_sdfgamma:Z.width/(256*Math.min(Ut,Ht)*E.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:We.y,u_tex_y_b:ht.y,u_mix:k.t})};function da(_,S){return 1/ci(_,1,S.tileZoom)}function Ta(_,S,x){return _.translatePosMatrix(S.tileID.posMatrix,S,x.paint.get("line-translate"),x.paint.get("line-translate-anchor"))}var Rs=function(_,S,x,O,k){return{u_matrix:_,u_tl_parent:S,u_scale_parent:x,u_buffer_scale:1,u_fade_t:O.mix,u_opacity:O.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(J=k.paint.get("raster-saturation"),J>0?1-1/(1.001-J):-J),u_contrast_factor:(Z=k.paint.get("raster-contrast"),Z>0?1/(1-Z):1+Z),u_spin_weights:Ba(k.paint.get("raster-hue-rotate"))};var Z,J};function Ba(_){_*=Math.PI/180;var S=Math.sin(_),x=Math.cos(_);return[(2*x+1)/3,(-Math.sqrt(3)*S-x+1)/3,(Math.sqrt(3)*S-x+1)/3]}var Ha,fs=function(_,S,x,O,k,Z,J,ge,We,ht){var Ut=k.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:S?S.uSizeT:0,u_size:S?S.uSize:0,u_camera_to_center_distance:Ut.cameraToCenterDistance,u_pitch:Ut.pitch/360*2*Math.PI,u_rotate_symbol:+x,u_aspect_ratio:Ut.width/Ut.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:Z,u_label_plane_matrix:J,u_coord_matrix:ge,u_is_text:+We,u_pitch_with_map:+O,u_texsize:ht,u_texture:0}},tl=function(_,S,x,O,k,Z,J,ge,We,ht,Ut){var Ht=k.transform;return E.extend(fs(_,S,x,O,k,Z,J,ge,We,ht),{u_gamma_scale:O?Math.cos(Ht._pitch)*Ht.cameraToCenterDistance:1,u_device_pixel_ratio:E.browser.devicePixelRatio,u_is_halo:+Ut})},ja=function(_,S,x,O,k,Z,J,ge,We,ht){return E.extend(tl(_,S,x,O,k,Z,J,ge,!0,We,!0),{u_texsize_icon:ht,u_texture_icon:1})},Cu=function(_,S,x){return{u_matrix:_,u_opacity:S,u_color:x}},os=function(_,S,x,O,k,Z){return E.extend(function(J,ge,We,ht){var Ut=We.imageManager.getPattern(J.from.toString()),Ht=We.imageManager.getPattern(J.to.toString()),Xt=We.imageManager.getPixelSize(),bn=Xt.width,mn=Xt.height,zn=Math.pow(2,ht.tileID.overscaledZ),an=ht.tileSize*Math.pow(2,We.transform.tileZoom)/zn,kn=an*(ht.tileID.canonical.x+ht.tileID.wrap*zn),er=an*ht.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ut.tl,u_pattern_br_a:Ut.br,u_pattern_tl_b:Ht.tl,u_pattern_br_b:Ht.br,u_texsize:[bn,mn],u_mix:ge.t,u_pattern_size_a:Ut.displaySize,u_pattern_size_b:Ht.displaySize,u_scale_a:ge.fromScale,u_scale_b:ge.toScale,u_tile_units_to_pixels:1/ci(ht,1,We.transform.tileZoom),u_pixel_coord_upper:[kn>>16,er>>16],u_pixel_coord_lower:[65535&kn,65535&er]}}(O,Z,x,k),{u_matrix:_,u_opacity:S})},Sc={fillExtrusion:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fillExtrusionPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_height_factor:new E.Uniform1f(_,S.u_height_factor),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fill:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},fillPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},fillOutline:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world)}},fillOutlinePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},circle:function(_,S){return{u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_scale_with_map:new E.Uniform1i(_,S.u_scale_with_map),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},collisionBox:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pixels_to_tile_units:new E.Uniform1f(_,S.u_pixels_to_tile_units),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_overscale_factor:new E.Uniform1f(_,S.u_overscale_factor)}},collisionCircle:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_inv_matrix:new E.UniformMatrix4f(_,S.u_inv_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_viewport_size:new E.Uniform2f(_,S.u_viewport_size)}},debug:function(_,S){return{u_color:new E.UniformColor(_,S.u_color),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_overlay:new E.Uniform1i(_,S.u_overlay),u_overlay_scale:new E.Uniform1f(_,S.u_overlay_scale)}},clippingMask:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmap:function(_,S){return{u_extrude_scale:new E.Uniform1f(_,S.u_extrude_scale),u_intensity:new E.Uniform1f(_,S.u_intensity),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmapTexture:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_color_ramp:new E.Uniform1i(_,S.u_color_ramp),u_opacity:new E.Uniform1f(_,S.u_opacity)}},hillshade:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_latrange:new E.Uniform2f(_,S.u_latrange),u_light:new E.Uniform2f(_,S.u_light),u_shadow:new E.UniformColor(_,S.u_shadow),u_highlight:new E.UniformColor(_,S.u_highlight),u_accent:new E.UniformColor(_,S.u_accent)}},hillshadePrepare:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_dimension:new E.Uniform2f(_,S.u_dimension),u_zoom:new E.Uniform1f(_,S.u_zoom),u_unpack:new E.Uniform4f(_,S.u_unpack)}},line:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels)}},lineGradient:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_image:new E.Uniform1i(_,S.u_image),u_image_height:new E.Uniform1f(_,S.u_image_height)}},linePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_texsize:new E.Uniform2f(_,S.u_texsize),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_image:new E.Uniform1i(_,S.u_image),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},lineSDF:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_patternscale_a:new E.Uniform2f(_,S.u_patternscale_a),u_patternscale_b:new E.Uniform2f(_,S.u_patternscale_b),u_sdfgamma:new E.Uniform1f(_,S.u_sdfgamma),u_image:new E.Uniform1i(_,S.u_image),u_tex_y_a:new E.Uniform1f(_,S.u_tex_y_a),u_tex_y_b:new E.Uniform1f(_,S.u_tex_y_b),u_mix:new E.Uniform1f(_,S.u_mix)}},raster:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_tl_parent:new E.Uniform2f(_,S.u_tl_parent),u_scale_parent:new E.Uniform1f(_,S.u_scale_parent),u_buffer_scale:new E.Uniform1f(_,S.u_buffer_scale),u_fade_t:new E.Uniform1f(_,S.u_fade_t),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image0:new E.Uniform1i(_,S.u_image0),u_image1:new E.Uniform1i(_,S.u_image1),u_brightness_low:new E.Uniform1f(_,S.u_brightness_low),u_brightness_high:new E.Uniform1f(_,S.u_brightness_high),u_saturation_factor:new E.Uniform1f(_,S.u_saturation_factor),u_contrast_factor:new E.Uniform1f(_,S.u_contrast_factor),u_spin_weights:new E.Uniform3f(_,S.u_spin_weights)}},symbolIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture)}},symbolSDF:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},symbolTextAndIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texsize_icon:new E.Uniform2f(_,S.u_texsize_icon),u_texture:new E.Uniform1i(_,S.u_texture),u_texture_icon:new E.Uniform1i(_,S.u_texture_icon),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},background:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_color:new E.UniformColor(_,S.u_color)}},backgroundPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image:new E.Uniform1i(_,S.u_image),u_pattern_tl_a:new E.Uniform2f(_,S.u_pattern_tl_a),u_pattern_br_a:new E.Uniform2f(_,S.u_pattern_br_a),u_pattern_tl_b:new E.Uniform2f(_,S.u_pattern_tl_b),u_pattern_br_b:new E.Uniform2f(_,S.u_pattern_br_b),u_texsize:new E.Uniform2f(_,S.u_texsize),u_mix:new E.Uniform1f(_,S.u_mix),u_pattern_size_a:new E.Uniform2f(_,S.u_pattern_size_a),u_pattern_size_b:new E.Uniform2f(_,S.u_pattern_size_b),u_scale_a:new E.Uniform1f(_,S.u_scale_a),u_scale_b:new E.Uniform1f(_,S.u_scale_b),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_tile_units_to_pixels:new E.Uniform1f(_,S.u_tile_units_to_pixels)}}};function fc(_,S,x,O,k,Z,J){for(var ge=_.context,We=ge.gl,ht=_.useProgram("collisionBox"),Ut=[],Ht=0,Xt=0,bn=0;bn<O.length;bn++){var mn=O[bn],zn=S.getTile(mn),an=zn.getBucket(x);if(an){var kn=mn.posMatrix;k[0]===0&&k[1]===0||(kn=_.translatePosMatrix(mn.posMatrix,zn,k,Z));var er=J?an.textCollisionBox:an.iconCollisionBox,vr=an.collisionCircleArray;if(vr.length>0){var Mr=E.create(),wr=kn;E.mul(Mr,an.placementInvProjMatrix,_.transform.glCoordMatrix),E.mul(Mr,Mr,an.placementViewportMatrix),Ut.push({circleArray:vr,circleOffset:Xt,transform:wr,invTransform:Mr}),Xt=Ht+=vr.length/4}er&&ht.draw(ge,We.LINES,ot.disabled,wt.disabled,_.colorModeForRenderPass(),vn.disabled,Rr(kn,_.transform,zn),x.id,er.layoutVertexBuffer,er.indexBuffer,er.segments,null,_.transform.zoom,null,null,er.collisionVertexBuffer)}}if(J&&Ut.length){var Fr=_.useProgram("collisionCircle"),ti=new E.StructArrayLayout2f1f2i16;ti.resize(4*Ht),ti._trim();for(var Ni=0,Pi=0,lo=Ut;Pi<lo.length;Pi+=1)for(var zo=lo[Pi],Wo=0;Wo<zo.circleArray.length/4;Wo++){var Go=4*Wo,as=zo.circleArray[Go+0],Or=zo.circleArray[Go+1],en=zo.circleArray[Go+2],ha=zo.circleArray[Go+3];ti.emplace(Ni++,as,Or,en,ha,0),ti.emplace(Ni++,as,Or,en,ha,1),ti.emplace(Ni++,as,Or,en,ha,2),ti.emplace(Ni++,as,Or,en,ha,3)}(!Ha||Ha.length<2*Ht)&&(Ha=function(El){var Mu=2*El,cu=new E.StructArrayLayout3ui6;cu.resize(Mu),cu._trim();for(var Es=0;Es<Mu;Es++){var _l=6*Es;cu.uint16[_l+0]=4*Es+0,cu.uint16[_l+1]=4*Es+1,cu.uint16[_l+2]=4*Es+2,cu.uint16[_l+3]=4*Es+2,cu.uint16[_l+4]=4*Es+3,cu.uint16[_l+5]=4*Es+0}return cu}(Ht));for(var aa=ge.createIndexBuffer(Ha,!0),Yo=ge.createVertexBuffer(ti,E.collisionCircleLayout.members,!0),ga=0,ra=Ut;ga<ra.length;ga+=1){var Bo=ra[ga],uu=Li(Bo.transform,Bo.invTransform,_.transform);Fr.draw(ge,We.TRIANGLES,ot.disabled,wt.disabled,_.colorModeForRenderPass(),vn.disabled,uu,x.id,Yo,aa,E.SegmentVector.simpleSegment(0,2*Bo.circleOffset,Bo.circleArray.length,Bo.circleArray.length/2),null,_.transform.zoom,null,null,null)}Yo.destroy(),aa.destroy()}}var Vu=E.identity(new Float32Array(16));function eh(_,S,x,O,k,Z){var J=E.getAnchorAlignment(_),ge=-(J.horizontalAlign-.5)*S,We=-(J.verticalAlign-.5)*x,ht=E.evaluateVariableOffset(_,O);return new E.Point((ge/k+ht[0])*Z,(We/k+ht[1])*Z)}function Cd(_,S,x,O,k,Z,J,ge,We,ht,Ut){var Ht=_.text.placedSymbolArray,Xt=_.text.dynamicLayoutVertexArray,bn=_.icon.dynamicLayoutVertexArray,mn={};Xt.clear();for(var zn=0;zn<Ht.length;zn++){var an=Ht.get(zn),kn=an.hidden||!an.crossTileID||_.allowVerticalPlacement&&!an.placedOrientation?null:O[an.crossTileID];if(kn){var er=new E.Point(an.anchorX,an.anchorY),vr=Bn(er,x?ge:J),Mr=yn(Z.cameraToCenterDistance,vr.signedDistanceFromCamera),wr=k.evaluateSizeForFeature(_.textSizeData,ht,an)*Mr/E.ONE_EM;x&&(wr*=_.tilePixelRatio/We);for(var Fr=eh(kn.anchor,kn.width,kn.height,kn.textOffset,kn.textBoxScale,wr),ti=x?Bn(er.add(Fr),J).point:vr.point.add(S?Fr.rotate(-Z.angle):Fr),Ni=_.allowVerticalPlacement&&an.placedOrientation===E.WritingMode.vertical?Math.PI/2:0,Pi=0;Pi<an.numGlyphs;Pi++)E.addDynamicAttributes(Xt,ti,Ni);Ut&&an.associatedIconIndex>=0&&(mn[an.associatedIconIndex]={shiftedAnchor:ti,angle:Ni})}else Ii(an.numGlyphs,Xt)}if(Ut){bn.clear();for(var lo=_.icon.placedSymbolArray,zo=0;zo<lo.length;zo++){var Wo=lo.get(zo);if(Wo.hidden)Ii(Wo.numGlyphs,bn);else{var Go=mn[zo];if(Go)for(var as=0;as<Wo.numGlyphs;as++)E.addDynamicAttributes(bn,Go.shiftedAnchor,Go.angle);else Ii(Wo.numGlyphs,bn)}}_.icon.dynamicLayoutVertexBuffer.updateData(bn)}_.text.dynamicLayoutVertexBuffer.updateData(Xt)}function bf(_,S,x){return x.iconsInText&&S?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Df(_,S,x,O,k,Z,J,ge,We,ht,Ut,Ht){for(var Xt=_.context,bn=Xt.gl,mn=_.transform,zn=ge==="map",an=We==="map",kn=zn&&x.layout.get("symbol-placement")!=="point",er=zn&&!an&&!kn,vr=x.layout.get("symbol-sort-key").constantOr(1)!==void 0,Mr=!1,wr=_.depthModeForSublayer(0,ot.ReadOnly),Fr=x.layout.get("text-variable-anchor"),ti=[],Ni=0,Pi=O;Ni<Pi.length;Ni+=1){var lo=Pi[Ni],zo=S.getTile(lo),Wo=zo.getBucket(x);if(Wo){var Go=k?Wo.text:Wo.icon;if(Go&&Go.segments.get().length){var as=Go.programConfigurations.get(x.id),Or=k||Wo.sdfIcons,en=k?Wo.textSizeData:Wo.iconSizeData,ha=an||mn.pitch!==0,aa=_.useProgram(bf(Or,k,Wo),as),Yo=E.evaluateSizeForZoom(en,mn.zoom),ga=void 0,ra=[0,0],Bo=void 0,uu=void 0,El=null,Mu=void 0;if(k)Bo=zo.glyphAtlasTexture,uu=bn.LINEAR,ga=zo.glyphAtlasTexture.size,Wo.iconsInText&&(ra=zo.imageAtlasTexture.size,El=zo.imageAtlasTexture,Mu=ha||_.options.rotating||_.options.zooming||en.kind==="composite"||en.kind==="camera"?bn.LINEAR:bn.NEAREST);else{var cu=x.layout.get("icon-size").constantOr(0)!==1||Wo.iconsNeedLinear;Bo=zo.imageAtlasTexture,uu=Or||_.options.rotating||_.options.zooming||cu||ha?bn.LINEAR:bn.NEAREST,ga=zo.imageAtlasTexture.size}var Es=ci(zo,1,_.transform.zoom),_l=un(lo.posMatrix,an,zn,_.transform,Es),pl=Nn(lo.posMatrix,an,zn,_.transform,Es),vc=Fr&&Wo.hasTextData(),Vf=x.layout.get("icon-text-fit")!=="none"&&vc&&Wo.hasIconData();kn&&dr(Wo,lo.posMatrix,_,k,_l,pl,an,ht);var Ac=_.translatePosMatrix(lo.posMatrix,zo,Z,J),of=kn||k&&Fr||Vf?Vu:_l,jc=_.translatePosMatrix(pl,zo,Z,J,!0),dp=Or&&x.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0,pp={program:aa,buffers:Go,uniformValues:Or?Wo.iconsInText?ja(en.kind,Yo,er,an,_,Ac,of,jc,ga,ra):tl(en.kind,Yo,er,an,_,Ac,of,jc,k,ga,!0):fs(en.kind,Yo,er,an,_,Ac,of,jc,k,ga),atlasTexture:Bo,atlasTextureIcon:El,atlasInterpolation:uu,atlasInterpolationIcon:Mu,isSDF:Or,hasHalo:dp};if(vr&&Wo.canOverlap){Mr=!0;for(var Mh=0,Kh=Go.segments.get();Mh<Kh.length;Mh+=1){var qh=Kh[Mh];ti.push({segments:new E.SegmentVector([qh]),sortKey:qh.sortKey,state:pp})}}else ti.push({segments:Go.segments,sortKey:0,state:pp})}}}Mr&&ti.sort(function(wf,Af){return wf.sortKey-Af.sortKey});for(var ih=0,Ai=ti;ih<Ai.length;ih+=1){var Il=Ai[ih],Ll=Il.state;if(Xt.activeTexture.set(bn.TEXTURE0),Ll.atlasTexture.bind(Ll.atlasInterpolation,bn.CLAMP_TO_EDGE),Ll.atlasTextureIcon&&(Xt.activeTexture.set(bn.TEXTURE1),Ll.atlasTextureIcon&&Ll.atlasTextureIcon.bind(Ll.atlasInterpolationIcon,bn.CLAMP_TO_EDGE)),Ll.isSDF){var tc=Ll.uniformValues;Ll.hasHalo&&(tc.u_is_halo=1,tf(Ll.buffers,Il.segments,x,_,Ll.program,wr,Ut,Ht,tc)),tc.u_is_halo=0}tf(Ll.buffers,Il.segments,x,_,Ll.program,wr,Ut,Ht,Ll.uniformValues)}}function tf(_,S,x,O,k,Z,J,ge,We){var ht=O.context;k.draw(ht,ht.gl.TRIANGLES,Z,J,ge,vn.disabled,We,x.id,_.layoutVertexBuffer,_.indexBuffer,S,x.paint,O.transform.zoom,_.programConfigurations.get(x.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Eh(_,S,x,O,k,Z,J){var ge,We,ht,Ut,Ht,Xt=_.context.gl,bn=x.paint.get("fill-pattern"),mn=bn&&bn.constantOr(1),zn=x.getCrossfadeParameters();J?(We=mn&&!x.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=Xt.LINES):(We=mn?"fillPattern":"fill",ge=Xt.TRIANGLES);for(var an=0,kn=O;an<kn.length;an+=1){var er=kn[an],vr=S.getTile(er);if(!mn||vr.patternsLoaded()){var Mr=vr.getBucket(x);if(Mr){var wr=Mr.programConfigurations.get(x.id),Fr=_.useProgram(We,wr);mn&&(_.context.activeTexture.set(Xt.TEXTURE0),vr.imageAtlasTexture.bind(Xt.LINEAR,Xt.CLAMP_TO_EDGE),wr.updatePaintBuffers(zn));var ti=bn.constantOr(null);if(ti&&vr.imageAtlas){var Ni=vr.imageAtlas,Pi=Ni.patternPositions[ti.to.toString()],lo=Ni.patternPositions[ti.from.toString()];Pi&&lo&&wr.setConstantPatternPositions(Pi,lo)}var zo=_.translatePosMatrix(er.posMatrix,vr,x.paint.get("fill-translate"),x.paint.get("fill-translate-anchor"));if(J){Ut=Mr.indexBuffer2,Ht=Mr.segments2;var Wo=[Xt.drawingBufferWidth,Xt.drawingBufferHeight];ht=We==="fillOutlinePattern"&&mn?Q(zo,_,zn,vr,Wo):cn(zo,Wo)}else Ut=Mr.indexBuffer,Ht=Mr.segments,ht=mn?tt(zo,_,zn,vr):Se(zo);Fr.draw(_.context,ge,k,_.stencilModeForClipping(er),Z,vn.disabled,ht,x.id,Mr.layoutVertexBuffer,Ut,Ht,x.paint,_.transform.zoom,wr)}}}}function Sh(_,S,x,O,k,Z,J){for(var ge=_.context,We=ge.gl,ht=x.paint.get("fill-extrusion-pattern"),Ut=ht.constantOr(1),Ht=x.getCrossfadeParameters(),Xt=x.paint.get("fill-extrusion-opacity"),bn=0,mn=O;bn<mn.length;bn+=1){var zn=mn[bn],an=S.getTile(zn),kn=an.getBucket(x);if(kn){var er=kn.programConfigurations.get(x.id),vr=_.useProgram(Ut?"fillExtrusionPattern":"fillExtrusion",er);Ut&&(_.context.activeTexture.set(We.TEXTURE0),an.imageAtlasTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE),er.updatePaintBuffers(Ht));var Mr=ht.constantOr(null);if(Mr&&an.imageAtlas){var wr=an.imageAtlas,Fr=wr.patternPositions[Mr.to.toString()],ti=wr.patternPositions[Mr.from.toString()];Fr&&ti&&er.setConstantPatternPositions(Fr,ti)}var Ni=_.translatePosMatrix(zn.posMatrix,an,x.paint.get("fill-extrusion-translate"),x.paint.get("fill-extrusion-translate-anchor")),Pi=x.paint.get("fill-extrusion-vertical-gradient"),lo=Ut?ie(Ni,_,Pi,Xt,zn,Ht,an):xh(Ni,_,Pi,Xt);vr.draw(ge,ge.gl.TRIANGLES,k,Z,J,vn.backCCW,lo,x.id,kn.layoutVertexBuffer,kn.indexBuffer,kn.segments,x.paint,_.transform.zoom,er)}}}function Nf(_,S,x,O,k,Z){var J=_.context,ge=J.gl,We=S.fbo;if(We){var ht=_.useProgram("hillshade");J.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,We.colorAttachment.get());var Ut=function(Ht,Xt,bn){var mn=bn.paint.get("hillshade-shadow-color"),zn=bn.paint.get("hillshade-highlight-color"),an=bn.paint.get("hillshade-accent-color"),kn=bn.paint.get("hillshade-illumination-direction")*(Math.PI/180);bn.paint.get("hillshade-illumination-anchor")==="viewport"&&(kn-=Ht.transform.angle);var er,vr,Mr,wr=!Ht.options.moving;return{u_matrix:Ht.transform.calculatePosMatrix(Xt.tileID.toUnwrapped(),wr),u_image:0,u_latrange:(er=Xt.tileID,vr=Math.pow(2,er.canonical.z),Mr=er.canonical.y,[new E.MercatorCoordinate(0,Mr/vr).toLngLat().lat,new E.MercatorCoordinate(0,(Mr+1)/vr).toLngLat().lat]),u_light:[bn.paint.get("hillshade-exaggeration"),kn],u_shadow:mn,u_highlight:zn,u_accent:an}}(_,S,x);ht.draw(J,ge.TRIANGLES,O,k,Z,vn.disabled,Ut,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}}function g0(_,S,x,O,k,Z){var J=_.context,ge=J.gl,We=S.dem;if(We&&We.data){var ht=We.dim,Ut=We.stride,Ht=We.getPixels();if(J.activeTexture.set(ge.TEXTURE1),J.pixelStoreUnpackPremultiplyAlpha.set(!1),S.demTexture=S.demTexture||_.getTileTexture(Ut),S.demTexture){var Xt=S.demTexture;Xt.update(Ht,{premultiply:!1}),Xt.bind(ge.NEAREST,ge.CLAMP_TO_EDGE)}else S.demTexture=new E.Texture(J,Ht,ge.RGBA,{premultiply:!1}),S.demTexture.bind(ge.NEAREST,ge.CLAMP_TO_EDGE);J.activeTexture.set(ge.TEXTURE0);var bn=S.fbo;if(!bn){var mn=new E.Texture(J,{width:ht,height:ht,data:null},ge.RGBA);mn.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),(bn=S.fbo=J.createFramebuffer(ht,ht,!0)).colorAttachment.set(mn.texture)}J.bindFramebuffer.set(bn.framebuffer),J.viewport.set([0,0,ht,ht]),_.useProgram("hillshadePrepare").draw(J,ge.TRIANGLES,O,k,Z,vn.disabled,function(zn,an){var kn=an.stride,er=E.create();return E.ortho(er,0,E.EXTENT,-E.EXTENT,0,0,1),E.translate(er,er,[0,-E.EXTENT,0]),{u_matrix:er,u_image:1,u_dimension:[kn,kn],u_zoom:zn.overscaledZ,u_unpack:an.getUnpackVector()}}(S.tileID,We),x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),S.needsHillshadePrepare=!1}}function Rd(_,S,x,O,k){var Z=O.paint.get("raster-fade-duration");if(Z>0){var J=E.browser.now(),ge=(J-_.timeAdded)/Z,We=S?(J-S.timeAdded)/Z:-1,ht=x.getSource(),Ut=k.coveringZoomLevel({tileSize:ht.tileSize,roundZoom:ht.roundZoom}),Ht=!S||Math.abs(S.tileID.overscaledZ-Ut)>Math.abs(_.tileID.overscaledZ-Ut),Xt=Ht&&_.refreshedUponExpiration?1:E.clamp(Ht?ge:1-We,0,1);return _.refreshedUponExpiration&&ge>=1&&(_.refreshedUponExpiration=!1),S?{opacity:1,mix:1-Xt}:{opacity:Xt,mix:0}}return{opacity:1,mix:0}}var Fp=new E.Color(1,0,0,1),Bf=new E.Color(0,1,0,1),kp=new E.Color(0,0,1,1),Md=new E.Color(1,0,1,1),lp=new E.Color(0,1,1,1);function Ff(_,S,x,O){Th(_,0,S+x/2,_.transform.width,x,O)}function zp(_,S,x,O){Th(_,S-x/2,0,x,_.transform.height,O)}function Th(_,S,x,O,k,Z){var J=_.context,ge=J.gl;ge.enable(ge.SCISSOR_TEST),ge.scissor(S*E.browser.devicePixelRatio,x*E.browser.devicePixelRatio,O*E.browser.devicePixelRatio,k*E.browser.devicePixelRatio),J.clear({color:Z}),ge.disable(ge.SCISSOR_TEST)}function Up(_,S,x){var O=_.context,k=O.gl,Z=x.posMatrix,J=_.useProgram("debug"),ge=ot.disabled,We=wt.disabled,ht=_.colorModeForRenderPass();O.activeTexture.set(k.TEXTURE0),_.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),J.draw(O,k.LINE_STRIP,ge,We,ht,vn.disabled,Ui(Z,E.Color.red),"$debug",_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments);var Ut=S.getTileByID(x.key).latestRawTileData,Ht=Math.floor((Ut&&Ut.byteLength||0)/1024),Xt=S.getTile(x).tileSize,bn=512/Math.min(Xt,512)*(x.overscaledZ/_.transform.zoom)*.5,mn=x.canonical.toString();x.overscaledZ!==x.canonical.z&&(mn+=" => "+x.overscaledZ),function(zn,an){zn.initDebugOverlayCanvas();var kn=zn.debugOverlayCanvas,er=zn.context.gl,vr=zn.debugOverlayCanvas.getContext("2d");vr.clearRect(0,0,kn.width,kn.height),vr.shadowColor="white",vr.shadowBlur=2,vr.lineWidth=1.5,vr.strokeStyle="white",vr.textBaseline="top",vr.font="bold 36px Open Sans, sans-serif",vr.fillText(an,5,5),vr.strokeText(an,5,5),zn.debugOverlayTexture.update(kn),zn.debugOverlayTexture.bind(er.LINEAR,er.CLAMP_TO_EDGE)}(_,mn+" "+Ht+"kb"),J.draw(O,k.TRIANGLES,ge,We,$t.alphaBlended,vn.disabled,Ui(Z,E.Color.transparent,bn),"$debug",_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments)}var kf={symbol:function(_,S,x,O,k){if(_.renderPass==="translucent"){var Z=wt.disabled,J=_.colorModeForRenderPass();x.layout.get("text-variable-anchor")&&function(ge,We,ht,Ut,Ht,Xt,bn){for(var mn=We.transform,zn=Ht==="map",an=Xt==="map",kn=0,er=ge;kn<er.length;kn+=1){var vr=er[kn],Mr=Ut.getTile(vr),wr=Mr.getBucket(ht);if(wr&&wr.text&&wr.text.segments.get().length){var Fr=E.evaluateSizeForZoom(wr.textSizeData,mn.zoom),ti=ci(Mr,1,We.transform.zoom),Ni=un(vr.posMatrix,an,zn,We.transform,ti),Pi=ht.layout.get("icon-text-fit")!=="none"&&wr.hasIconData();if(Fr){var lo=Math.pow(2,mn.zoom-Mr.tileID.overscaledZ);Cd(wr,zn,an,bn,E.symbolSize,mn,Ni,vr.posMatrix,lo,Fr,Pi)}}}}(O,_,x,S,x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),k),x.paint.get("icon-opacity").constantOr(1)!==0&&Df(_,S,x,O,!1,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),x.layout.get("icon-rotation-alignment"),x.layout.get("icon-pitch-alignment"),x.layout.get("icon-keep-upright"),Z,J),x.paint.get("text-opacity").constantOr(1)!==0&&Df(_,S,x,O,!0,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),x.layout.get("text-keep-upright"),Z,J),S.map.showCollisionBoxes&&(fc(_,S,x,O,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),!0),fc(_,S,x,O,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),!1))}},circle:function(_,S,x,O){if(_.renderPass==="translucent"){var k=x.paint.get("circle-opacity"),Z=x.paint.get("circle-stroke-width"),J=x.paint.get("circle-stroke-opacity"),ge=x.layout.get("circle-sort-key").constantOr(1)!==void 0;if(k.constantOr(1)!==0||Z.constantOr(1)!==0&&J.constantOr(1)!==0){for(var We=_.context,ht=We.gl,Ut=_.depthModeForSublayer(0,ot.ReadOnly),Ht=wt.disabled,Xt=_.colorModeForRenderPass(),bn=[],mn=0;mn<O.length;mn++){var zn=O[mn],an=S.getTile(zn),kn=an.getBucket(x);if(kn){var er=kn.programConfigurations.get(x.id),vr={programConfiguration:er,program:_.useProgram("circle",er),layoutVertexBuffer:kn.layoutVertexBuffer,indexBuffer:kn.indexBuffer,uniformValues:rr(_,zn,an,x)};if(ge)for(var Mr=0,wr=kn.segments.get();Mr<wr.length;Mr+=1){var Fr=wr[Mr];bn.push({segments:new E.SegmentVector([Fr]),sortKey:Fr.sortKey,state:vr})}else bn.push({segments:kn.segments,sortKey:0,state:vr})}}ge&&bn.sort(function(zo,Wo){return zo.sortKey-Wo.sortKey});for(var ti=0,Ni=bn;ti<Ni.length;ti+=1){var Pi=Ni[ti],lo=Pi.state;lo.program.draw(We,ht.TRIANGLES,Ut,Ht,Xt,vn.disabled,lo.uniformValues,x.id,lo.layoutVertexBuffer,lo.indexBuffer,Pi.segments,x.paint,_.transform.zoom,lo.programConfiguration)}}}},heatmap:function(_,S,x,O){if(x.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){var k=_.context,Z=k.gl,J=wt.disabled,ge=new $t([Z.ONE,Z.ONE],E.Color.transparent,[!0,!0,!0,!0]);(function(bn,mn,zn){var an=bn.gl;bn.activeTexture.set(an.TEXTURE1),bn.viewport.set([0,0,mn.width/4,mn.height/4]);var kn=zn.heatmapFbo;if(kn)an.bindTexture(an.TEXTURE_2D,kn.colorAttachment.get()),bn.bindFramebuffer.set(kn.framebuffer);else{var er=an.createTexture();an.bindTexture(an.TEXTURE_2D,er),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_WRAP_S,an.CLAMP_TO_EDGE),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_WRAP_T,an.CLAMP_TO_EDGE),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_MIN_FILTER,an.LINEAR),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_MAG_FILTER,an.LINEAR),kn=zn.heatmapFbo=bn.createFramebuffer(mn.width/4,mn.height/4,!1),function(vr,Mr,wr,Fr){var ti=vr.gl;ti.texImage2D(ti.TEXTURE_2D,0,ti.RGBA,Mr.width/4,Mr.height/4,0,ti.RGBA,vr.extRenderToTextureHalfFloat?vr.extTextureHalfFloat.HALF_FLOAT_OES:ti.UNSIGNED_BYTE,null),Fr.colorAttachment.set(wr)}(bn,mn,er,kn)}})(k,_,x),k.clear({color:E.Color.transparent});for(var We=0;We<O.length;We++){var ht=O[We];if(!S.hasRenderableParent(ht)){var Ut=S.getTile(ht),Ht=Ut.getBucket(x);if(Ht){var Xt=Ht.programConfigurations.get(x.id);_.useProgram("heatmap",Xt).draw(k,Z.TRIANGLES,ot.disabled,J,ge,vn.disabled,uo(ht.posMatrix,Ut,_.transform.zoom,x.paint.get("heatmap-intensity")),x.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,x.paint,_.transform.zoom,Xt)}}}k.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(bn,mn){var zn=bn.context,an=zn.gl,kn=mn.heatmapFbo;if(kn){zn.activeTexture.set(an.TEXTURE0),an.bindTexture(an.TEXTURE_2D,kn.colorAttachment.get()),zn.activeTexture.set(an.TEXTURE1);var er=mn.colorRampTexture;er||(er=mn.colorRampTexture=new E.Texture(zn,mn.colorRamp,an.RGBA)),er.bind(an.LINEAR,an.CLAMP_TO_EDGE),bn.useProgram("heatmapTexture").draw(zn,an.TRIANGLES,ot.disabled,wt.disabled,bn.colorModeForRenderPass(),vn.disabled,function(vr,Mr,wr,Fr){var ti=E.create();E.ortho(ti,0,vr.width,vr.height,0,0,1);var Ni=vr.context.gl;return{u_matrix:ti,u_world:[Ni.drawingBufferWidth,Ni.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Mr.paint.get("heatmap-opacity")}}(bn,mn),mn.id,bn.viewportBuffer,bn.quadTriangleIndexBuffer,bn.viewportSegments,mn.paint,bn.transform.zoom)}}(_,x))},line:function(_,S,x,O){if(_.renderPass==="translucent"){var k=x.paint.get("line-opacity"),Z=x.paint.get("line-width");if(k.constantOr(1)!==0&&Z.constantOr(1)!==0)for(var J=_.depthModeForSublayer(0,ot.ReadOnly),ge=_.colorModeForRenderPass(),We=x.paint.get("line-dasharray"),ht=x.paint.get("line-pattern"),Ut=ht.constantOr(1),Ht=x.paint.get("line-gradient"),Xt=x.getCrossfadeParameters(),bn=Ut?"linePattern":We?"lineSDF":Ht?"lineGradient":"line",mn=_.context,zn=mn.gl,an=!0,kn=0,er=O;kn<er.length;kn+=1){var vr=er[kn],Mr=S.getTile(vr);if(!Ut||Mr.patternsLoaded()){var wr=Mr.getBucket(x);if(wr){var Fr=wr.programConfigurations.get(x.id),ti=_.context.program.get(),Ni=_.useProgram(bn,Fr),Pi=an||Ni.program!==ti,lo=ht.constantOr(null);if(lo&&Mr.imageAtlas){var zo=Mr.imageAtlas,Wo=zo.patternPositions[lo.to.toString()],Go=zo.patternPositions[lo.from.toString()];Wo&&Go&&Fr.setConstantPatternPositions(Wo,Go)}var as=Ut?Ea(_,Mr,x,Xt):We?ts(_,Mr,x,We,Xt):Ht?Do(_,Mr,x,wr.lineClipsArray.length):xa(_,Mr,x);if(Ut)mn.activeTexture.set(zn.TEXTURE0),Mr.imageAtlasTexture.bind(zn.LINEAR,zn.CLAMP_TO_EDGE),Fr.updatePaintBuffers(Xt);else if(We&&(Pi||_.lineAtlas.dirty))mn.activeTexture.set(zn.TEXTURE0),_.lineAtlas.bind(mn);else if(Ht){var Or=wr.gradients[x.id],en=Or.texture;if(x.gradientVersion!==Or.version){var ha=256;if(x.stepInterpolant){var aa=S.getSource().maxzoom,Yo=vr.canonical.z===aa?Math.ceil(1<<_.transform.maxZoom-vr.canonical.z):1;ha=E.clamp(E.nextPowerOfTwo(wr.maxLineLength/E.EXTENT*1024*Yo),256,mn.maxTextureSize)}Or.gradient=E.renderColorRamp({expression:x.gradientExpression(),evaluationKey:"lineProgress",resolution:ha,image:Or.gradient||void 0,clips:wr.lineClipsArray}),Or.texture?Or.texture.update(Or.gradient):Or.texture=new E.Texture(mn,Or.gradient,zn.RGBA),Or.version=x.gradientVersion,en=Or.texture}mn.activeTexture.set(zn.TEXTURE0),en.bind(x.stepInterpolant?zn.NEAREST:zn.LINEAR,zn.CLAMP_TO_EDGE)}Ni.draw(mn,zn.TRIANGLES,J,_.stencilModeForClipping(vr),ge,vn.disabled,as,x.id,wr.layoutVertexBuffer,wr.indexBuffer,wr.segments,x.paint,_.transform.zoom,Fr,wr.layoutVertexBuffer2),an=!1}}}}},fill:function(_,S,x,O){var k=x.paint.get("fill-color"),Z=x.paint.get("fill-opacity");if(Z.constantOr(1)!==0){var J=_.colorModeForRenderPass(),ge=x.paint.get("fill-pattern"),We=_.opaquePassEnabledForLayer()&&!ge.constantOr(1)&&k.constantOr(E.Color.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===We){var ht=_.depthModeForSublayer(1,_.renderPass==="opaque"?ot.ReadWrite:ot.ReadOnly);Eh(_,S,x,O,ht,J,!1)}if(_.renderPass==="translucent"&&x.paint.get("fill-antialias")){var Ut=_.depthModeForSublayer(x.getPaintProperty("fill-outline-color")?2:0,ot.ReadOnly);Eh(_,S,x,O,Ut,J,!0)}}},"fill-extrusion":function(_,S,x,O){var k=x.paint.get("fill-extrusion-opacity");if(k!==0&&_.renderPass==="translucent"){var Z=new ot(_.context.gl.LEQUAL,ot.ReadWrite,_.depthRangeFor3D);if(k!==1||x.paint.get("fill-extrusion-pattern").constantOr(1))Sh(_,S,x,O,Z,wt.disabled,$t.disabled),Sh(_,S,x,O,Z,_.stencilModeFor3D(),_.colorModeForRenderPass());else{var J=_.colorModeForRenderPass();Sh(_,S,x,O,Z,wt.disabled,J)}}},hillshade:function(_,S,x,O){if(_.renderPass==="offscreen"||_.renderPass==="translucent"){for(var k=_.context,Z=_.depthModeForSublayer(0,ot.ReadOnly),J=_.colorModeForRenderPass(),ge=_.renderPass==="translucent"?_.stencilConfigForOverlap(O):[{},O],We=ge[0],ht=0,Ut=ge[1];ht<Ut.length;ht+=1){var Ht=Ut[ht],Xt=S.getTile(Ht);Xt.needsHillshadePrepare&&_.renderPass==="offscreen"?g0(_,Xt,x,Z,wt.disabled,J):_.renderPass==="translucent"&&Nf(_,Xt,x,Z,We[Ht.overscaledZ],J)}k.viewport.set([0,0,_.width,_.height])}},raster:function(_,S,x,O){if(_.renderPass==="translucent"&&x.paint.get("raster-opacity")!==0&&O.length)for(var k=_.context,Z=k.gl,J=S.getSource(),ge=_.useProgram("raster"),We=_.colorModeForRenderPass(),ht=J instanceof Pt?[{},O]:_.stencilConfigForOverlap(O),Ut=ht[0],Ht=ht[1],Xt=Ht[Ht.length-1].overscaledZ,bn=!_.options.moving,mn=0,zn=Ht;mn<zn.length;mn+=1){var an=zn[mn],kn=_.depthModeForSublayer(an.overscaledZ-Xt,x.paint.get("raster-opacity")===1?ot.ReadWrite:ot.ReadOnly,Z.LESS),er=S.getTile(an),vr=_.transform.calculatePosMatrix(an.toUnwrapped(),bn);er.registerFadeDuration(x.paint.get("raster-fade-duration"));var Mr=S.findLoadedParent(an,0),wr=Rd(er,Mr,S,x,_.transform),Fr=void 0,ti=void 0,Ni=x.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;k.activeTexture.set(Z.TEXTURE0),er.texture.bind(Ni,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(Z.TEXTURE1),Mr?(Mr.texture.bind(Ni,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Fr=Math.pow(2,Mr.tileID.overscaledZ-er.tileID.overscaledZ),ti=[er.tileID.canonical.x*Fr%1,er.tileID.canonical.y*Fr%1]):er.texture.bind(Ni,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST);var Pi=Rs(vr,ti||[0,0],Fr||1,wr,x);J instanceof Pt?ge.draw(k,Z.TRIANGLES,kn,wt.disabled,We,vn.disabled,Pi,x.id,J.boundsBuffer,_.quadTriangleIndexBuffer,J.boundsSegments):ge.draw(k,Z.TRIANGLES,kn,Ut[an.overscaledZ],We,vn.disabled,Pi,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,S,x){var O=x.paint.get("background-color"),k=x.paint.get("background-opacity");if(k!==0){var Z=_.context,J=Z.gl,ge=_.transform,We=ge.tileSize,ht=x.paint.get("background-pattern");if(!_.isPatternMissing(ht)){var Ut=!ht&&O.a===1&&k===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass===Ut){var Ht=wt.disabled,Xt=_.depthModeForSublayer(0,Ut==="opaque"?ot.ReadWrite:ot.ReadOnly),bn=_.colorModeForRenderPass(),mn=_.useProgram(ht?"backgroundPattern":"background"),zn=ge.coveringTiles({tileSize:We});ht&&(Z.activeTexture.set(J.TEXTURE0),_.imageManager.bind(_.context));for(var an=x.getCrossfadeParameters(),kn=0,er=zn;kn<er.length;kn+=1){var vr=er[kn],Mr=_.transform.calculatePosMatrix(vr.toUnwrapped()),wr=ht?os(Mr,k,_,ht,{tileID:vr,tileSize:We},an):Cu(Mr,k,O);mn.draw(Z,J.TRIANGLES,Xt,Ht,bn,vn.disabled,wr,x.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}}}},debug:function(_,S,x){for(var O=0;O<x.length;O++)Up(_,S,x[O])},custom:function(_,S,x){var O=_.context,k=x.implementation;if(_.renderPass==="offscreen"){var Z=k.prerender;Z&&(_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),Z.call(k,O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),O.setStencilMode(wt.disabled);var J=k.renderingMode==="3d"?new ot(_.context.gl.LEQUAL,ot.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,ot.ReadOnly);O.setDepthMode(J),k.render(O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState(),O.bindFramebuffer.set(null)}}},Zs=function(_,S){this.context=new Et(_),this.transform=S,this._tileTextures={},this.setup(),this.numSublayers=Kt.maxUnderzooming+Kt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new If,this.gpuTimers={}};Zs.prototype.resize=function(_,S){if(this.width=_*E.browser.devicePixelRatio,this.height=S*E.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var x=0,O=this.style._order;x<O.length;x+=1)this.style._layers[O[x]].resize()},Zs.prototype.setup=function(){var _=this.context,S=new E.StructArrayLayout2i4;S.emplaceBack(0,0),S.emplaceBack(E.EXTENT,0),S.emplaceBack(0,E.EXTENT),S.emplaceBack(E.EXTENT,E.EXTENT),this.tileExtentBuffer=_.createVertexBuffer(S,Cs.members),this.tileExtentSegments=E.SegmentVector.simpleSegment(0,0,4,2);var x=new E.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(E.EXTENT,0),x.emplaceBack(0,E.EXTENT),x.emplaceBack(E.EXTENT,E.EXTENT),this.debugBuffer=_.createVertexBuffer(x,Cs.members),this.debugSegments=E.SegmentVector.simpleSegment(0,0,4,5);var O=new E.StructArrayLayout4i8;O.emplaceBack(0,0,0,0),O.emplaceBack(E.EXTENT,0,E.EXTENT,0),O.emplaceBack(0,E.EXTENT,0,E.EXTENT),O.emplaceBack(E.EXTENT,E.EXTENT,E.EXTENT,E.EXTENT),this.rasterBoundsBuffer=_.createVertexBuffer(O,Xe.members),this.rasterBoundsSegments=E.SegmentVector.simpleSegment(0,0,4,2);var k=new E.StructArrayLayout2i4;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=_.createVertexBuffer(k,Cs.members),this.viewportSegments=E.SegmentVector.simpleSegment(0,0,4,2);var Z=new E.StructArrayLayout1ui2;Z.emplaceBack(0),Z.emplaceBack(1),Z.emplaceBack(3),Z.emplaceBack(2),Z.emplaceBack(0),this.tileBorderIndexBuffer=_.createIndexBuffer(Z);var J=new E.StructArrayLayout3ui6;J.emplaceBack(0,1,2),J.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=_.createIndexBuffer(J),this.emptyTexture=new E.Texture(_,{width:1,height:1,data:new Uint8Array([0,0,0,0])},_.gl.RGBA);var ge=this.context.gl;this.stencilClearMode=new wt({func:ge.ALWAYS,mask:0},0,255,ge.ZERO,ge.ZERO,ge.ZERO)},Zs.prototype.clearStencil=function(){var _=this.context,S=_.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var x=E.create();E.ortho(x,0,this.width,this.height,0,0,1),E.scale(x,x,[S.drawingBufferWidth,S.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(_,S.TRIANGLES,ot.disabled,this.stencilClearMode,$t.disabled,vn.disabled,so(x),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Zs.prototype._renderTileClippingMasks=function(_,S){if(this.currentStencilSource!==_.source&&_.isTileClipped()&&S&&S.length){this.currentStencilSource=_.source;var x=this.context,O=x.gl;this.nextStencilID+S.length>256&&this.clearStencil(),x.setColorMode($t.disabled),x.setDepthMode(ot.disabled);var k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Z=0,J=S;Z<J.length;Z+=1){var ge=J[Z],We=this._tileClippingMaskIDs[ge.key]=this.nextStencilID++;k.draw(x,O.TRIANGLES,ot.disabled,new wt({func:O.ALWAYS,mask:0},We,255,O.KEEP,O.KEEP,O.REPLACE),$t.disabled,vn.disabled,so(ge.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Zs.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var _=this.nextStencilID++,S=this.context.gl;return new wt({func:S.NOTEQUAL,mask:255},_,255,S.KEEP,S.KEEP,S.REPLACE)},Zs.prototype.stencilModeForClipping=function(_){var S=this.context.gl;return new wt({func:S.EQUAL,mask:255},this._tileClippingMaskIDs[_.key],0,S.KEEP,S.KEEP,S.REPLACE)},Zs.prototype.stencilConfigForOverlap=function(_){var S,x=this.context.gl,O=_.sort(function(We,ht){return ht.overscaledZ-We.overscaledZ}),k=O[O.length-1].overscaledZ,Z=O[0].overscaledZ-k+1;if(Z>1){this.currentStencilSource=void 0,this.nextStencilID+Z>256&&this.clearStencil();for(var J={},ge=0;ge<Z;ge++)J[ge+k]=new wt({func:x.GEQUAL,mask:255},ge+this.nextStencilID,255,x.KEEP,x.KEEP,x.REPLACE);return this.nextStencilID+=Z,[J,O]}return[(S={},S[k]=wt.disabled,S),O]},Zs.prototype.colorModeForRenderPass=function(){var _=this.context.gl;return this._showOverdrawInspector?new $t([_.CONSTANT_COLOR,_.ONE],new E.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?$t.unblended:$t.alphaBlended},Zs.prototype.depthModeForSublayer=function(_,S,x){if(!this.opaquePassEnabledForLayer())return ot.disabled;var O=1-((1+this.currentLayer)*this.numSublayers+_)*this.depthEpsilon;return new ot(x||this.context.gl.LEQUAL,S,[O,O])},Zs.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Zs.prototype.render=function(_,S){var x=this;this.style=_,this.options=S,this.lineAtlas=_.lineAtlas,this.imageManager=_.imageManager,this.glyphManager=_.glyphManager,this.symbolFadeChange=_.placement.symbolFadeChange(E.browser.now()),this.imageManager.beginFrame();var O=this.style._order,k=this.style.sourceCaches;for(var Z in k){var J=k[Z];J.used&&J.prepare(this.context)}var ge,We,ht={},Ut={},Ht={};for(var Xt in k){var bn=k[Xt];ht[Xt]=bn.getVisibleCoordinates(),Ut[Xt]=ht[Xt].slice().reverse(),Ht[Xt]=bn.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var mn=0;mn<O.length;mn++)if(this.style._layers[O[mn]].is3D()){this.opaquePassCutoff=mn;break}this.renderPass="offscreen";for(var zn=0,an=O;zn<an.length;zn+=1){var kn=this.style._layers[an[zn]];if(kn.hasOffscreenPass()&&!kn.isHidden(this.transform.zoom)){var er=Ut[kn.source];(kn.type==="custom"||er.length)&&this.renderLayer(this,k[kn.source],kn,er)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:S.showOverdrawInspector?E.Color.black:E.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=S.showOverdrawInspector,this.depthRangeFor3D=[0,1-(_._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){var vr=this.style._layers[O[this.currentLayer]],Mr=k[vr.source],wr=ht[vr.source];this._renderTileClippingMasks(vr,wr),this.renderLayer(this,Mr,vr,wr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){var Fr=this.style._layers[O[this.currentLayer]],ti=k[Fr.source],Ni=(Fr.type==="symbol"?Ht:Ut)[Fr.source];this._renderTileClippingMasks(Fr,ht[Fr.source]),this.renderLayer(this,ti,Fr,Ni)}this.options.showTileBoundaries&&(E.values(this.style._layers).forEach(function(Pi){Pi.source&&!Pi.isHidden(x.transform.zoom)&&(Pi.source!==(We&&We.id)&&(We=x.style.sourceCaches[Pi.source]),(!ge||ge.getSource().maxzoom<We.getSource().maxzoom)&&(ge=We))}),ge&&kf.debug(this,ge,ge.getVisibleCoordinates())),this.options.showPadding&&function(Pi){var lo=Pi.transform.padding;Ff(Pi,Pi.transform.height-(lo.top||0),3,Fp),Ff(Pi,lo.bottom||0,3,Bf),zp(Pi,lo.left||0,3,kp),zp(Pi,Pi.transform.width-(lo.right||0),3,Md);var zo=Pi.transform.centerPoint;(function(Wo,Go,as,Or){Th(Wo,Go-1,as-10,2,20,Or),Th(Wo,Go-10,as-1,20,2,Or)})(Pi,zo.x,Pi.transform.height-zo.y,lp)}(this),this.context.setDefault()},Zs.prototype.renderLayer=function(_,S,x,O){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="custom"||O.length)&&(this.id=x.id,this.gpuTimingStart(x),kf[x.type](_,S,x,O,this.style.placement.variableOffsets),this.gpuTimingEnd())},Zs.prototype.gpuTimingStart=function(_){if(this.options.gpuTiming){var S=this.context.extTimerQuery,x=this.gpuTimers[_.id];x||(x=this.gpuTimers[_.id]={calls:0,cpuTime:0,query:S.createQueryEXT()}),x.calls++,S.beginQueryEXT(S.TIME_ELAPSED_EXT,x.query)}},Zs.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var _=this.context.extTimerQuery;_.endQueryEXT(_.TIME_ELAPSED_EXT)}},Zs.prototype.collectGpuTimers=function(){var _=this.gpuTimers;return this.gpuTimers={},_},Zs.prototype.queryGpuTimers=function(_){var S={};for(var x in _){var O=_[x],k=this.context.extTimerQuery,Z=k.getQueryObjectEXT(O.query,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(O.query),S[x]=Z}return S},Zs.prototype.translatePosMatrix=function(_,S,x,O,k){if(!x[0]&&!x[1])return _;var Z=k?O==="map"?this.transform.angle:0:O==="viewport"?-this.transform.angle:0;if(Z){var J=Math.sin(Z),ge=Math.cos(Z);x=[x[0]*ge-x[1]*J,x[0]*J+x[1]*ge]}var We=[k?x[0]:ci(S,x[0],this.transform.zoom),k?x[1]:ci(S,x[1],this.transform.zoom),0],ht=new Float32Array(16);return E.translate(ht,_,We),ht},Zs.prototype.saveTileTexture=function(_){var S=this._tileTextures[_.size[0]];S?S.push(_):this._tileTextures[_.size[0]]=[_]},Zs.prototype.getTileTexture=function(_){var S=this._tileTextures[_];return S&&S.length>0?S.pop():null},Zs.prototype.isPatternMissing=function(_){if(!_)return!1;if(!_.from||!_.to)return!0;var S=this.imageManager.getPattern(_.from.toString()),x=this.imageManager.getPattern(_.to.toString());return!S||!x},Zs.prototype.useProgram=function(_,S){this.cache=this.cache||{};var x=""+_+(S?S.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[x]||(this.cache[x]=new ul(this.context,_,Ad[_],S,Sc[_],this._showOverdrawInspector)),this.cache[x]},Zs.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Zs.prototype.setBaseState=function(){var _=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(_.FUNC_ADD)},Zs.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=E.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new E.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Zs.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var up=function(_,S){this.points=_,this.planes=S};up.fromInvProjectionMatrix=function(_,S,x){var O=Math.pow(2,x),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(J){return E.transformMat4([],J,_)}).map(function(J){return E.scale$1([],J,1/J[3]/S*O)}),Z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(J){var ge=E.sub([],k[J[0]],k[J[1]]),We=E.sub([],k[J[2]],k[J[1]]),ht=E.normalize([],E.cross([],ge,We)),Ut=-E.dot(ht,k[J[1]]);return ht.concat(Ut)});return new up(k,Z)};var xf=function(_,S){this.min=_,this.max=S,this.center=E.scale$2([],E.add([],this.min,this.max),.5)};xf.prototype.quadrant=function(_){for(var S=[_%2==0,_<2],x=E.clone$2(this.min),O=E.clone$2(this.max),k=0;k<S.length;k++)x[k]=S[k]?this.min[k]:this.center[k],O[k]=S[k]?this.center[k]:this.max[k];return O[2]=this.max[2],new xf(x,O)},xf.prototype.distanceX=function(_){return Math.max(Math.min(this.max[0],_[0]),this.min[0])-_[0]},xf.prototype.distanceY=function(_){return Math.max(Math.min(this.max[1],_[1]),this.min[1])-_[1]},xf.prototype.intersects=function(_){for(var S=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],x=!0,O=0;O<_.planes.length;O++){for(var k=_.planes[O],Z=0,J=0;J<S.length;J++)Z+=E.dot$1(k,S[J])>=0;if(Z===0)return 0;Z!==S.length&&(x=!1)}if(x)return 2;for(var ge=0;ge<3;ge++){for(var We=Number.MAX_VALUE,ht=-Number.MAX_VALUE,Ut=0;Ut<_.points.length;Ut++){var Ht=_.points[Ut][ge]-this.min[ge];We=Math.min(We,Ht),ht=Math.max(ht,Ht)}if(ht<0||We>this.max[ge]-this.min[ge])return 0}return 1};var ve=function(_,S,x,O){if(_===void 0&&(_=0),S===void 0&&(S=0),x===void 0&&(x=0),O===void 0&&(O=0),isNaN(_)||_<0||isNaN(S)||S<0||isNaN(x)||x<0||isNaN(O)||O<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=_,this.bottom=S,this.left=x,this.right=O};ve.prototype.interpolate=function(_,S,x){return S.top!=null&&_.top!=null&&(this.top=E.number(_.top,S.top,x)),S.bottom!=null&&_.bottom!=null&&(this.bottom=E.number(_.bottom,S.bottom,x)),S.left!=null&&_.left!=null&&(this.left=E.number(_.left,S.left,x)),S.right!=null&&_.right!=null&&(this.right=E.number(_.right,S.right,x)),this},ve.prototype.getCenter=function(_,S){var x=E.clamp((this.left+_-this.right)/2,0,_),O=E.clamp((this.top+S-this.bottom)/2,0,S);return new E.Point(x,O)},ve.prototype.equals=function(_){return this.top===_.top&&this.bottom===_.bottom&&this.left===_.left&&this.right===_.right},ve.prototype.clone=function(){return new ve(this.top,this.bottom,this.left,this.right)},ve.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ze=function(_,S,x,O,k){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=k===void 0||k,this._minZoom=_||0,this._maxZoom=S||22,this._minPitch=x==null?0:x,this._maxPitch=O==null?60:O,this.setMaxBounds(),this.width=0,this.height=0,this._center=new E.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ve,this._posMatrixCache={},this._alignedPosMatrixCache={}},yt={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ze.prototype.clone=function(){var _=new ze(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return _.tileSize=this.tileSize,_.latRange=this.latRange,_.width=this.width,_.height=this.height,_._center=this._center,_.zoom=this.zoom,_.angle=this.angle,_._fov=this._fov,_._pitch=this._pitch,_._unmodified=this._unmodified,_._edgeInsets=this._edgeInsets.clone(),_._calcMatrices(),_},yt.minZoom.get=function(){return this._minZoom},yt.minZoom.set=function(_){this._minZoom!==_&&(this._minZoom=_,this.zoom=Math.max(this.zoom,_))},yt.maxZoom.get=function(){return this._maxZoom},yt.maxZoom.set=function(_){this._maxZoom!==_&&(this._maxZoom=_,this.zoom=Math.min(this.zoom,_))},yt.minPitch.get=function(){return this._minPitch},yt.minPitch.set=function(_){this._minPitch!==_&&(this._minPitch=_,this.pitch=Math.max(this.pitch,_))},yt.maxPitch.get=function(){return this._maxPitch},yt.maxPitch.set=function(_){this._maxPitch!==_&&(this._maxPitch=_,this.pitch=Math.min(this.pitch,_))},yt.renderWorldCopies.get=function(){return this._renderWorldCopies},yt.renderWorldCopies.set=function(_){_===void 0?_=!0:_===null&&(_=!1),this._renderWorldCopies=_},yt.worldSize.get=function(){return this.tileSize*this.scale},yt.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},yt.size.get=function(){return new E.Point(this.width,this.height)},yt.bearing.get=function(){return-this.angle/Math.PI*180},yt.bearing.set=function(_){var S=-E.wrap(_,-180,180)*Math.PI/180;this.angle!==S&&(this._unmodified=!1,this.angle=S,this._calcMatrices(),this.rotationMatrix=E.create$2(),E.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},yt.pitch.get=function(){return this._pitch/Math.PI*180},yt.pitch.set=function(_){var S=E.clamp(_,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==S&&(this._unmodified=!1,this._pitch=S,this._calcMatrices())},yt.fov.get=function(){return this._fov/Math.PI*180},yt.fov.set=function(_){_=Math.max(.01,Math.min(60,_)),this._fov!==_&&(this._unmodified=!1,this._fov=_/180*Math.PI,this._calcMatrices())},yt.zoom.get=function(){return this._zoom},yt.zoom.set=function(_){var S=Math.min(Math.max(_,this.minZoom),this.maxZoom);this._zoom!==S&&(this._unmodified=!1,this._zoom=S,this.scale=this.zoomScale(S),this.tileZoom=Math.floor(S),this.zoomFraction=S-this.tileZoom,this._constrain(),this._calcMatrices())},yt.center.get=function(){return this._center},yt.center.set=function(_){_.lat===this._center.lat&&_.lng===this._center.lng||(this._unmodified=!1,this._center=_,this._constrain(),this._calcMatrices())},yt.padding.get=function(){return this._edgeInsets.toJSON()},yt.padding.set=function(_){this._edgeInsets.equals(_)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,_,1),this._calcMatrices())},yt.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ze.prototype.isPaddingEqual=function(_){return this._edgeInsets.equals(_)},ze.prototype.interpolatePadding=function(_,S,x){this._unmodified=!1,this._edgeInsets.interpolate(_,S,x),this._constrain(),this._calcMatrices()},ze.prototype.coveringZoomLevel=function(_){var S=(_.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/_.tileSize));return Math.max(0,S)},ze.prototype.getVisibleUnwrappedCoordinates=function(_){var S=[new E.UnwrappedTileID(0,_)];if(this._renderWorldCopies)for(var x=this.pointCoordinate(new E.Point(0,0)),O=this.pointCoordinate(new E.Point(this.width,0)),k=this.pointCoordinate(new E.Point(this.width,this.height)),Z=this.pointCoordinate(new E.Point(0,this.height)),J=Math.floor(Math.min(x.x,O.x,k.x,Z.x)),ge=Math.floor(Math.max(x.x,O.x,k.x,Z.x)),We=J-1;We<=ge+1;We++)We!==0&&S.push(new E.UnwrappedTileID(We,_));return S},ze.prototype.coveringTiles=function(_){var S=this.coveringZoomLevel(_),x=S;if(_.minzoom!==void 0&&S<_.minzoom)return[];_.maxzoom!==void 0&&S>_.maxzoom&&(S=_.maxzoom);var O=E.MercatorCoordinate.fromLngLat(this.center),k=Math.pow(2,S),Z=[k*O.x,k*O.y,0],J=up.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,S),ge=_.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ge=S);var We=function(Pi){return{aabb:new xf([Pi*k,0,0],[(Pi+1)*k,k,0]),zoom:0,x:0,y:0,wrap:Pi,fullyVisible:!1}},ht=[],Ut=[],Ht=S,Xt=_.reparseOverscaled?x:S;if(this._renderWorldCopies)for(var bn=1;bn<=3;bn++)ht.push(We(-bn)),ht.push(We(bn));for(ht.push(We(0));ht.length>0;){var mn=ht.pop(),zn=mn.x,an=mn.y,kn=mn.fullyVisible;if(!kn){var er=mn.aabb.intersects(J);if(er===0)continue;kn=er===2}var vr=mn.aabb.distanceX(Z),Mr=mn.aabb.distanceY(Z),wr=Math.max(Math.abs(vr),Math.abs(Mr));if(mn.zoom===Ht||wr>3+(1<<Ht-mn.zoom)-2&&mn.zoom>=ge)Ut.push({tileID:new E.OverscaledTileID(mn.zoom===Ht?Xt:mn.zoom,mn.wrap,mn.zoom,zn,an),distanceSq:E.sqrLen([Z[0]-.5-zn,Z[1]-.5-an])});else for(var Fr=0;Fr<4;Fr++){var ti=(zn<<1)+Fr%2,Ni=(an<<1)+(Fr>>1);ht.push({aabb:mn.aabb.quadrant(Fr),zoom:mn.zoom+1,x:ti,y:Ni,wrap:mn.wrap,fullyVisible:kn})}}return Ut.sort(function(Pi,lo){return Pi.distanceSq-lo.distanceSq}).map(function(Pi){return Pi.tileID})},ze.prototype.resize=function(_,S){this.width=_,this.height=S,this.pixelsToGLUnits=[2/_,-2/S],this._constrain(),this._calcMatrices()},yt.unmodified.get=function(){return this._unmodified},ze.prototype.zoomScale=function(_){return Math.pow(2,_)},ze.prototype.scaleZoom=function(_){return Math.log(_)/Math.LN2},ze.prototype.project=function(_){var S=E.clamp(_.lat,-this.maxValidLatitude,this.maxValidLatitude);return new E.Point(E.mercatorXfromLng(_.lng)*this.worldSize,E.mercatorYfromLat(S)*this.worldSize)},ze.prototype.unproject=function(_){return new E.MercatorCoordinate(_.x/this.worldSize,_.y/this.worldSize).toLngLat()},yt.point.get=function(){return this.project(this.center)},ze.prototype.setLocationAtPoint=function(_,S){var x=this.pointCoordinate(S),O=this.pointCoordinate(this.centerPoint),k=this.locationCoordinate(_),Z=new E.MercatorCoordinate(k.x-(x.x-O.x),k.y-(x.y-O.y));this.center=this.coordinateLocation(Z),this._renderWorldCopies&&(this.center=this.center.wrap())},ze.prototype.locationPoint=function(_){return this.coordinatePoint(this.locationCoordinate(_))},ze.prototype.pointLocation=function(_){return this.coordinateLocation(this.pointCoordinate(_))},ze.prototype.locationCoordinate=function(_){return E.MercatorCoordinate.fromLngLat(_)},ze.prototype.coordinateLocation=function(_){return _.toLngLat()},ze.prototype.pointCoordinate=function(_){var S=[_.x,_.y,0,1],x=[_.x,_.y,1,1];E.transformMat4(S,S,this.pixelMatrixInverse),E.transformMat4(x,x,this.pixelMatrixInverse);var O=S[3],k=x[3],Z=S[1]/O,J=x[1]/k,ge=S[2]/O,We=x[2]/k,ht=ge===We?0:(0-ge)/(We-ge);return new E.MercatorCoordinate(E.number(S[0]/O,x[0]/k,ht)/this.worldSize,E.number(Z,J,ht)/this.worldSize)},ze.prototype.coordinatePoint=function(_){var S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix),new E.Point(S[0]/S[3],S[1]/S[3])},ze.prototype.getBounds=function(){return new E.LngLatBounds().extend(this.pointLocation(new E.Point(0,0))).extend(this.pointLocation(new E.Point(this.width,0))).extend(this.pointLocation(new E.Point(this.width,this.height))).extend(this.pointLocation(new E.Point(0,this.height)))},ze.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new E.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ze.prototype.setMaxBounds=function(_){_?(this.lngRange=[_.getWest(),_.getEast()],this.latRange=[_.getSouth(),_.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ze.prototype.calculatePosMatrix=function(_,S){S===void 0&&(S=!1);var x=_.key,O=S?this._alignedPosMatrixCache:this._posMatrixCache;if(O[x])return O[x];var k=_.canonical,Z=this.worldSize/this.zoomScale(k.z),J=k.x+Math.pow(2,k.z)*_.wrap,ge=E.identity(new Float64Array(16));return E.translate(ge,ge,[J*Z,k.y*Z,0]),E.scale(ge,ge,[Z/E.EXTENT,Z/E.EXTENT,1]),E.multiply(ge,S?this.alignedProjMatrix:this.projMatrix,ge),O[x]=new Float32Array(ge),O[x]},ze.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ze.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var _,S,x,O,k=-90,Z=90,J=-180,ge=180,We=this.size,ht=this._unmodified;if(this.latRange){var Ut=this.latRange;k=E.mercatorYfromLat(Ut[1])*this.worldSize,_=(Z=E.mercatorYfromLat(Ut[0])*this.worldSize)-k<We.y?We.y/(Z-k):0}if(this.lngRange){var Ht=this.lngRange;J=E.mercatorXfromLng(Ht[0])*this.worldSize,S=(ge=E.mercatorXfromLng(Ht[1])*this.worldSize)-J<We.x?We.x/(ge-J):0}var Xt=this.point,bn=Math.max(S||0,_||0);if(bn)return this.center=this.unproject(new E.Point(S?(ge+J)/2:Xt.x,_?(Z+k)/2:Xt.y)),this.zoom+=this.scaleZoom(bn),this._unmodified=ht,void(this._constraining=!1);if(this.latRange){var mn=Xt.y,zn=We.y/2;mn-zn<k&&(O=k+zn),mn+zn>Z&&(O=Z-zn)}if(this.lngRange){var an=Xt.x,kn=We.x/2;an-kn<J&&(x=J+kn),an+kn>ge&&(x=ge-kn)}x===void 0&&O===void 0||(this.center=this.unproject(new E.Point(x!==void 0?x:Xt.x,O!==void 0?O:Xt.y))),this._unmodified=ht,this._constraining=!1}},ze.prototype._calcMatrices=function(){if(this.height){var _=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var S=Math.PI/2+this._pitch,x=this._fov*(.5+_.y/this.height),O=Math.sin(x)*this.cameraToCenterDistance/Math.sin(E.clamp(Math.PI-S-x,.01,Math.PI-.01)),k=this.point,Z=k.x,J=k.y,ge=1.01*(Math.cos(Math.PI/2-this._pitch)*O+this.cameraToCenterDistance),We=this.height/50,ht=new Float64Array(16);E.perspective(ht,this._fov,this.width/this.height,We,ge),ht[8]=2*-_.x/this.width,ht[9]=2*_.y/this.height,E.scale(ht,ht,[1,-1,1]),E.translate(ht,ht,[0,0,-this.cameraToCenterDistance]),E.rotateX(ht,ht,this._pitch),E.rotateZ(ht,ht,this.angle),E.translate(ht,ht,[-Z,-J,0]),this.mercatorMatrix=E.scale([],ht,[this.worldSize,this.worldSize,this.worldSize]),E.scale(ht,ht,[1,1,E.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ht,this.invProjMatrix=E.invert([],this.projMatrix);var Ut=this.width%2/2,Ht=this.height%2/2,Xt=Math.cos(this.angle),bn=Math.sin(this.angle),mn=Z-Math.round(Z)+Xt*Ut+bn*Ht,zn=J-Math.round(J)+Xt*Ht+bn*Ut,an=new Float64Array(ht);if(E.translate(an,an,[mn>.5?mn-1:mn,zn>.5?zn-1:zn,0]),this.alignedProjMatrix=an,ht=E.create(),E.scale(ht,ht,[this.width/2,-this.height/2,1]),E.translate(ht,ht,[1,-1,0]),this.labelPlaneMatrix=ht,ht=E.create(),E.scale(ht,ht,[1,-1,1]),E.translate(ht,ht,[-1,-1,0]),E.scale(ht,ht,[2/this.width,2/this.height,1]),this.glCoordMatrix=ht,this.pixelMatrix=E.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ht=E.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ht,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ze.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var _=this.pointCoordinate(new E.Point(0,0)),S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix)[3]/this.cameraToCenterDistance},ze.prototype.getCameraPoint=function(){var _=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new E.Point(0,_))},ze.prototype.getCameraQueryGeometry=function(_){var S=this.getCameraPoint();if(_.length===1)return[_[0],S];for(var x=S.x,O=S.y,k=S.x,Z=S.y,J=0,ge=_;J<ge.length;J+=1){var We=ge[J];x=Math.min(x,We.x),O=Math.min(O,We.y),k=Math.max(k,We.x),Z=Math.max(Z,We.y)}return[new E.Point(x,O),new E.Point(k,O),new E.Point(k,Z),new E.Point(x,Z),new E.Point(x,O)]},Object.defineProperties(ze.prototype,yt);var An=function(_){var S,x,O,k;this._hashName=_&&encodeURIComponent(_),E.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(S=this._updateHashUnthrottled.bind(this),x=!1,O=null,k=function(){O=null,x&&(S(),O=setTimeout(k,300),x=!1)},function(){return x=!0,O||k(),O})};An.prototype.addTo=function(_){return this._map=_,E.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},An.prototype.remove=function(){return E.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},An.prototype.getHashString=function(_){var S=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,O=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,O),Z=Math.round(S.lng*k)/k,J=Math.round(S.lat*k)/k,ge=this._map.getBearing(),We=this._map.getPitch(),ht="";if(ht+=_?"/"+Z+"/"+J+"/"+x:x+"/"+J+"/"+Z,(ge||We)&&(ht+="/"+Math.round(10*ge)/10),We&&(ht+="/"+Math.round(We)),this._hashName){var Ut=this._hashName,Ht=!1,Xt=E.window.location.hash.slice(1).split("&").map(function(bn){var mn=bn.split("=")[0];return mn===Ut?(Ht=!0,mn+"="+ht):bn}).filter(function(bn){return bn});return Ht||Xt.push(Ut+"="+ht),"#"+Xt.join("&")}return"#"+ht},An.prototype._getCurrentHash=function(){var _,S=this,x=E.window.location.hash.replace("#","");return this._hashName?(x.split("&").map(function(O){return O.split("=")}).forEach(function(O){O[0]===S._hashName&&(_=O)}),(_&&_[1]||"").split("/")):x.split("/")},An.prototype._onHashChange=function(){var _=this._getCurrentHash();if(_.length>=3&&!_.some(function(x){return isNaN(x)})){var S=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(_[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:S,pitch:+(_[4]||0)}),!0}return!1},An.prototype._updateHashUnthrottled=function(){var _=E.window.location.href.replace(/(#.+)?$/,this.getHashString());try{E.window.history.replaceState(E.window.history.state,null,_)}catch(S){}};var sr={linearity:.3,easing:E.bezier(0,0,.3,1)},Ur=E.extend({deceleration:2500,maxSpeed:1400},sr),yi=E.extend({deceleration:20,maxSpeed:1400},sr),qi=E.extend({deceleration:1e3,maxSpeed:360},sr),pa=E.extend({deceleration:1e3,maxSpeed:90},sr),_a=function(_){this._map=_,this.clear()};function xs(_,S){(!_.duration||_.duration<S.duration)&&(_.duration=S.duration,_.easing=S.easing)}function Fa(_,S,x){var O=x.maxSpeed,k=x.linearity,Z=x.deceleration,J=E.clamp(_*k/(S/1e3),-O,O),ge=Math.abs(J)/(Z*k);return{easing:x.easing,duration:1e3*ge,amount:J*(ge/2)}}_a.prototype.clear=function(){this._inertiaBuffer=[]},_a.prototype.record=function(_){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.browser.now(),settings:_})},_a.prototype._drainInertiaBuffer=function(){for(var _=this._inertiaBuffer,S=E.browser.now();_.length>0&&S-_[0].time>160;)_.shift()},_a.prototype._onMoveEnd=function(_){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var S={zoom:0,bearing:0,pitch:0,pan:new E.Point(0,0),pinchAround:void 0,around:void 0},x=0,O=this._inertiaBuffer;x<O.length;x+=1){var k=O[x].settings;S.zoom+=k.zoomDelta||0,S.bearing+=k.bearingDelta||0,S.pitch+=k.pitchDelta||0,k.panDelta&&S.pan._add(k.panDelta),k.around&&(S.around=k.around),k.pinchAround&&(S.pinchAround=k.pinchAround)}var Z=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,J={};if(S.pan.mag()){var ge=Fa(S.pan.mag(),Z,E.extend({},Ur,_||{}));J.offset=S.pan.mult(ge.amount/S.pan.mag()),J.center=this._map.transform.center,xs(J,ge)}if(S.zoom){var We=Fa(S.zoom,Z,yi);J.zoom=this._map.transform.zoom+We.amount,xs(J,We)}if(S.bearing){var ht=Fa(S.bearing,Z,qi);J.bearing=this._map.transform.bearing+E.clamp(ht.amount,-179,179),xs(J,ht)}if(S.pitch){var Ut=Fa(S.pitch,Z,pa);J.pitch=this._map.transform.pitch+Ut.amount,xs(J,Ut)}if(J.zoom||J.bearing){var Ht=S.pinchAround===void 0?S.around:S.pinchAround;J.around=Ht?this._map.unproject(Ht):this._map.getCenter()}return this.clear(),E.extend(J,{noMoveStart:!0})}};var Ia=function(_){function S(O,k,Z,J){J===void 0&&(J={});var ge=ne.mousePos(k.getCanvasContainer(),Z),We=k.unproject(ge);_.call(this,O,E.extend({point:ge,lngLat:We,originalEvent:Z},J)),this._defaultPrevented=!1,this.target=k}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),Ru=function(_){function S(O,k,Z){var J=O==="touchend"?Z.changedTouches:Z.touches,ge=ne.touchPos(k.getCanvasContainer(),J),We=ge.map(function(Ht){return k.unproject(Ht)}),ht=ge.reduce(function(Ht,Xt,bn,mn){return Ht.add(Xt.div(mn.length))},new E.Point(0,0)),Ut=k.unproject(ht);_.call(this,O,{points:ge,point:ht,lngLats:We,lngLat:Ut,originalEvent:Z}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),nf=function(_){function S(O,k,Z){_.call(this,O,{originalEvent:Z}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),nl=function(_,S){this._map=_,this._clickTolerance=S.clickTolerance};nl.prototype.reset=function(){delete this._mousedownPos},nl.prototype.wheel=function(_){return this._firePreventable(new nf(_.type,this._map,_))},nl.prototype.mousedown=function(_,S){return this._mousedownPos=S,this._firePreventable(new Ia(_.type,this._map,_))},nl.prototype.mouseup=function(_){this._map.fire(new Ia(_.type,this._map,_))},nl.prototype.click=function(_,S){this._mousedownPos&&this._mousedownPos.dist(S)>=this._clickTolerance||this._map.fire(new Ia(_.type,this._map,_))},nl.prototype.dblclick=function(_){return this._firePreventable(new Ia(_.type,this._map,_))},nl.prototype.mouseover=function(_){this._map.fire(new Ia(_.type,this._map,_))},nl.prototype.mouseout=function(_){this._map.fire(new Ia(_.type,this._map,_))},nl.prototype.touchstart=function(_){return this._firePreventable(new Ru(_.type,this._map,_))},nl.prototype.touchmove=function(_){this._map.fire(new Ru(_.type,this._map,_))},nl.prototype.touchend=function(_){this._map.fire(new Ru(_.type,this._map,_))},nl.prototype.touchcancel=function(_){this._map.fire(new Ru(_.type,this._map,_))},nl.prototype._firePreventable=function(_){if(this._map.fire(_),_.defaultPrevented)return{}},nl.prototype.isEnabled=function(){return!0},nl.prototype.isActive=function(){return!1},nl.prototype.enable=function(){},nl.prototype.disable=function(){};var co=function(_){this._map=_};co.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},co.prototype.mousemove=function(_){this._map.fire(new Ia(_.type,this._map,_))},co.prototype.mousedown=function(){this._delayContextMenu=!0},co.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ia("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},co.prototype.contextmenu=function(_){this._delayContextMenu?this._contextMenuEvent=_:this._map.fire(new Ia(_.type,this._map,_)),this._map.listens("contextmenu")&&_.preventDefault()},co.prototype.isEnabled=function(){return!0},co.prototype.isActive=function(){return!1},co.prototype.enable=function(){},co.prototype.disable=function(){};var Yu=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._container=_.getContainer(),this._clickTolerance=S.clickTolerance||1};function Pd(_,S){for(var x={},O=0;O<_.length;O++)x[_[O].identifier]=S[O];return x}Yu.prototype.isEnabled=function(){return!!this._enabled},Yu.prototype.isActive=function(){return!!this._active},Yu.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Yu.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Yu.prototype.mousedown=function(_,S){this.isEnabled()&&_.shiftKey&&_.button===0&&(ne.disableDrag(),this._startPos=this._lastPos=S,this._active=!0)},Yu.prototype.mousemoveWindow=function(_,S){if(this._active){var x=S;if(!(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)){var O=this._startPos;this._lastPos=x,this._box||(this._box=ne.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",_));var k=Math.min(O.x,x.x),Z=Math.max(O.x,x.x),J=Math.min(O.y,x.y),ge=Math.max(O.y,x.y);ne.setTransform(this._box,"translate("+k+"px,"+J+"px)"),this._box.style.width=Z-k+"px",this._box.style.height=ge-J+"px"}}},Yu.prototype.mouseupWindow=function(_,S){var x=this;if(this._active&&_.button===0){var O=this._startPos,k=S;if(this.reset(),ne.suppressClick(),O.x!==k.x||O.y!==k.y)return this._map.fire(new E.Event("boxzoomend",{originalEvent:_})),{cameraAnimation:function(Z){return Z.fitScreenCoordinates(O,k,x._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",_)}},Yu.prototype.keydown=function(_){this._active&&_.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",_))},Yu.prototype.blur=function(){this.reset()},Yu.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(ne.remove(this._box),this._box=null),ne.enableDrag(),delete this._startPos,delete this._lastPos},Yu.prototype._fireEvent=function(_,S){return this._map.fire(new E.Event(_,{originalEvent:S}))};var wh=function(_){this.reset(),this.numTouches=_.numTouches};wh.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},wh.prototype.touchstart=function(_,S,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=_.timeStamp),x.length===this.numTouches&&(this.centroid=function(O){for(var k=new E.Point(0,0),Z=0,J=O;Z<J.length;Z+=1)k._add(J[Z]);return k.div(O.length)}(S),this.touches=Pd(x,S)))},wh.prototype.touchmove=function(_,S,x){if(!this.aborted&&this.centroid){var O=Pd(x,S);for(var k in this.touches){var Z=O[k];(!Z||Z.dist(this.touches[k])>30)&&(this.aborted=!0)}}},wh.prototype.touchend=function(_,S,x){if((!this.centroid||_.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){var O=!this.aborted&&this.centroid;if(this.reset(),O)return O}};var wa=function(_){this.singleTap=new wh(_),this.numTaps=_.numTaps,this.reset()};wa.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},wa.prototype.touchstart=function(_,S,x){this.singleTap.touchstart(_,S,x)},wa.prototype.touchmove=function(_,S,x){this.singleTap.touchmove(_,S,x)},wa.prototype.touchend=function(_,S,x){var O=this.singleTap.touchend(_,S,x);if(O){var k=_.timeStamp-this.lastTime<500,Z=!this.lastTap||this.lastTap.dist(O)<30;if(k&&Z||this.reset(),this.count++,this.lastTime=_.timeStamp,this.lastTap=O,this.count===this.numTaps)return this.reset(),O}};var ns=function(){this._zoomIn=new wa({numTouches:1,numTaps:2}),this._zoomOut=new wa({numTouches:2,numTaps:1}),this.reset()};ns.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ns.prototype.touchstart=function(_,S,x){this._zoomIn.touchstart(_,S,x),this._zoomOut.touchstart(_,S,x)},ns.prototype.touchmove=function(_,S,x){this._zoomIn.touchmove(_,S,x),this._zoomOut.touchmove(_,S,x)},ns.prototype.touchend=function(_,S,x){var O=this,k=this._zoomIn.touchend(_,S,x),Z=this._zoomOut.touchend(_,S,x);return k?(this._active=!0,_.preventDefault(),setTimeout(function(){return O.reset()},0),{cameraAnimation:function(J){return J.easeTo({duration:300,zoom:J.getZoom()+1,around:J.unproject(k)},{originalEvent:_})}}):Z?(this._active=!0,_.preventDefault(),setTimeout(function(){return O.reset()},0),{cameraAnimation:function(J){return J.easeTo({duration:300,zoom:J.getZoom()-1,around:J.unproject(Z)},{originalEvent:_})}}):void 0},ns.prototype.touchcancel=function(){this.reset()},ns.prototype.enable=function(){this._enabled=!0},ns.prototype.disable=function(){this._enabled=!1,this.reset()},ns.prototype.isEnabled=function(){return this._enabled},ns.prototype.isActive=function(){return this._active};var y0={0:1,2:2},Zi=function(_){this.reset(),this._clickTolerance=_.clickTolerance||1};Zi.prototype.blur=function(){this.reset()},Zi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Zi.prototype._correctButton=function(_,S){return!1},Zi.prototype._move=function(_,S){return{}},Zi.prototype.mousedown=function(_,S){if(!this._lastPoint){var x=ne.mouseButton(_);this._correctButton(_,x)&&(this._lastPoint=S,this._eventButton=x)}},Zi.prototype.mousemoveWindow=function(_,S){var x=this._lastPoint;if(x){if(_.preventDefault(),function(O,k){var Z=y0[k];return O.buttons===void 0||(O.buttons&Z)!==Z}(_,this._eventButton))this.reset();else if(this._moved||!(S.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=S,this._move(x,S)}},Zi.prototype.mouseupWindow=function(_){this._lastPoint&&ne.mouseButton(_)===this._eventButton&&(this._moved&&ne.suppressClick(),this.reset())},Zi.prototype.enable=function(){this._enabled=!0},Zi.prototype.disable=function(){this._enabled=!1,this.reset()},Zi.prototype.isEnabled=function(){return this._enabled},Zi.prototype.isActive=function(){return this._active};var Ef=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.mousedown=function(x,O){_.prototype.mousedown.call(this,x,O),this._lastPoint&&(this._active=!0)},S.prototype._correctButton=function(x,O){return O===0&&!x.ctrlKey},S.prototype._move=function(x,O){return{around:O,panDelta:O.sub(x)}},S}(Zi),Id=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,O){return O===0&&x.ctrlKey||O===2},S.prototype._move=function(x,O){var k=.8*(O.x-x.x);if(k)return this._active=!0,{bearingDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Zi),Ah=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,O){return O===0&&x.ctrlKey||O===2},S.prototype._move=function(x,O){var k=-.5*(O.y-x.y);if(k)return this._active=!0,{pitchDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Zi),Sf=function(_){this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset()};Sf.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new E.Point(0,0)},Sf.prototype.touchstart=function(_,S,x){return this._calculateTransform(_,S,x)},Sf.prototype.touchmove=function(_,S,x){if(this._active&&!(x.length<this._minTouches))return _.preventDefault(),this._calculateTransform(_,S,x)},Sf.prototype.touchend=function(_,S,x){this._calculateTransform(_,S,x),this._active&&x.length<this._minTouches&&this.reset()},Sf.prototype.touchcancel=function(){this.reset()},Sf.prototype._calculateTransform=function(_,S,x){x.length>0&&(this._active=!0);var O=Pd(x,S),k=new E.Point(0,0),Z=new E.Point(0,0),J=0;for(var ge in O){var We=O[ge],ht=this._touches[ge];ht&&(k._add(We),Z._add(We.sub(ht)),J++,O[ge]=We)}if(this._touches=O,!(J<this._minTouches)&&Z.mag()){var Ut=Z.div(J);if(this._sum._add(Ut),!(this._sum.mag()<this._clickTolerance))return{around:k.div(J),panDelta:Ut}}},Sf.prototype.enable=function(){this._enabled=!0},Sf.prototype.disable=function(){this._enabled=!1,this.reset()},Sf.prototype.isEnabled=function(){return this._enabled},Sf.prototype.isActive=function(){return this._active};var hc=function(){this.reset()};function _0(_,S,x){for(var O=0;O<_.length;O++)if(_[O].identifier===x)return S[O]}function Oh(_,S){return Math.log(_/S)/Math.LN2}hc.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},hc.prototype._start=function(_){},hc.prototype._move=function(_,S,x){return{}},hc.prototype.touchstart=function(_,S,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([S[0],S[1]]))},hc.prototype.touchmove=function(_,S,x){if(this._firstTwoTouches){_.preventDefault();var O=this._firstTwoTouches,k=O[1],Z=_0(x,S,O[0]),J=_0(x,S,k);if(Z&&J){var ge=this._aroundCenter?null:Z.add(J).div(2);return this._move([Z,J],ge,_)}}},hc.prototype.touchend=function(_,S,x){if(this._firstTwoTouches){var O=this._firstTwoTouches,k=O[1],Z=_0(x,S,O[0]),J=_0(x,S,k);Z&&J||(this._active&&ne.suppressClick(),this.reset())}},hc.prototype.touchcancel=function(){this.reset()},hc.prototype.enable=function(_){this._enabled=!0,this._aroundCenter=!!_&&_.around==="center"},hc.prototype.disable=function(){this._enabled=!1,this.reset()},hc.prototype.isEnabled=function(){return this._enabled},hc.prototype.isActive=function(){return this._active};var Ku=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._distance,delete this._startDistance},S.prototype._start=function(x){this._startDistance=this._distance=x[0].dist(x[1])},S.prototype._move=function(x,O){var k=this._distance;if(this._distance=x[0].dist(x[1]),this._active||!(Math.abs(Oh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Oh(this._distance,k),pinchAround:O}},S}(hc);function th(_,S){return 180*_.angleWith(S)/Math.PI}var b0=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},S.prototype._start=function(x){this._startVector=this._vector=x[0].sub(x[1]),this._minDiameter=x[0].dist(x[1])},S.prototype._move=function(x,O){var k=this._vector;if(this._vector=x[0].sub(x[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:th(this._vector,k),pinchAround:O}},S.prototype._isBelowThreshold=function(x){this._minDiameter=Math.min(this._minDiameter,x.mag());var O=25/(Math.PI*this._minDiameter)*360,k=th(x,this._startVector);return Math.abs(k)<O},S}(hc);function Ld(_){return Math.abs(_.y)>Math.abs(_.x)}var x0=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},S.prototype._start=function(x){this._lastPoints=x,Ld(x[0].sub(x[1]))&&(this._valid=!1)},S.prototype._move=function(x,O,k){var Z=x[0].sub(this._lastPoints[0]),J=x[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Z,J,k.timeStamp),this._valid)return this._lastPoints=x,this._active=!0,{pitchDelta:(Z.y+J.y)/2*-.5}},S.prototype.gestureBeginsVertically=function(x,O,k){if(this._valid!==void 0)return this._valid;var Z=x.mag()>=2,J=O.mag()>=2;if(Z||J){if(!Z||!J)return this._firstMove===void 0&&(this._firstMove=k),k-this._firstMove<100&&void 0;var ge=x.y>0==O.y>0;return Ld(x)&&Ld(O)&&ge}},S}(hc),iv={panStep:100,bearingStep:15,pitchStep:10},dc=function(){var _=iv;this._panStep=_.panStep,this._bearingStep=_.bearingStep,this._pitchStep=_.pitchStep,this._rotationDisabled=!1};function zc(_){return _*(2-_)}dc.prototype.blur=function(){this.reset()},dc.prototype.reset=function(){this._active=!1},dc.prototype.keydown=function(_){var S=this;if(!(_.altKey||_.ctrlKey||_.metaKey)){var x=0,O=0,k=0,Z=0,J=0;switch(_.keyCode){case 61:case 107:case 171:case 187:x=1;break;case 189:case 109:case 173:x=-1;break;case 37:_.shiftKey?O=-1:(_.preventDefault(),Z=-1);break;case 39:_.shiftKey?O=1:(_.preventDefault(),Z=1);break;case 38:_.shiftKey?k=1:(_.preventDefault(),J=-1);break;case 40:_.shiftKey?k=-1:(_.preventDefault(),J=1);break;default:return}return this._rotationDisabled&&(O=0,k=0),{cameraAnimation:function(ge){var We=ge.getZoom();ge.easeTo({duration:300,easeId:"keyboardHandler",easing:zc,zoom:x?Math.round(We)+x*(_.shiftKey?2:1):We,bearing:ge.getBearing()+O*S._bearingStep,pitch:ge.getPitch()+k*S._pitchStep,offset:[-Z*S._panStep,-J*S._panStep],center:ge.getCenter()},{originalEvent:_})}}}},dc.prototype.enable=function(){this._enabled=!0},dc.prototype.disable=function(){this._enabled=!1,this.reset()},dc.prototype.isEnabled=function(){return this._enabled},dc.prototype.isActive=function(){return this._active},dc.prototype.disableRotation=function(){this._rotationDisabled=!0},dc.prototype.enableRotation=function(){this._rotationDisabled=!1};var ba=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._handler=S,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,E.bindAll(["_onTimeout"],this)};ba.prototype.setZoomRate=function(_){this._defaultZoomRate=_},ba.prototype.setWheelZoomRate=function(_){this._wheelZoomRate=_},ba.prototype.isEnabled=function(){return!!this._enabled},ba.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ba.prototype.isZooming=function(){return!!this._zooming},ba.prototype.enable=function(_){this.isEnabled()||(this._enabled=!0,this._aroundCenter=_&&_.around==="center")},ba.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ba.prototype.wheel=function(_){if(this.isEnabled()){var S=_.deltaMode===E.window.WheelEvent.DOM_DELTA_LINE?40*_.deltaY:_.deltaY,x=E.browser.now(),O=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,S!==0&&S%4.000244140625==0?this._type="wheel":S!==0&&Math.abs(S)<4?this._type="trackpad":O>400?(this._type=null,this._lastValue=S,this._timeout=setTimeout(this._onTimeout,40,_)):this._type||(this._type=Math.abs(O*S)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,S+=this._lastValue)),_.shiftKey&&S&&(S/=4),this._type&&(this._lastWheelEvent=_,this._delta-=S,this._active||this._start(_)),_.preventDefault()}},ba.prototype._onTimeout=function(_){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},ba.prototype._start=function(_){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var S=ne.mousePos(this._el,_);this._around=E.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(S)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ba.prototype.renderFrame=function(){var _=this;if(this._frameId&&(this._frameId=null,this.isActive())){var S=this._map.transform;if(this._delta!==0){var x=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,O=2/(1+Math.exp(-Math.abs(this._delta*x)));this._delta<0&&O!==0&&(O=1/O);var k=typeof this._targetZoom=="number"?S.zoomScale(this._targetZoom):S.scale;this._targetZoom=Math.min(S.maxZoom,Math.max(S.minZoom,S.scaleZoom(k*O))),this._type==="wheel"&&(this._startZoom=S.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Z,J=typeof this._targetZoom=="number"?this._targetZoom:S.zoom,ge=this._startZoom,We=this._easing,ht=!1;if(this._type==="wheel"&&ge&&We){var Ut=Math.min((E.browser.now()-this._lastWheelEventTime)/200,1),Ht=We(Ut);Z=E.number(ge,J,Ht),Ut<1?this._frameId||(this._frameId=!0):ht=!0}else Z=J,ht=!0;return this._active=!0,ht&&(this._active=!1,this._finishTimeout=setTimeout(function(){_._zooming=!1,_._handler._triggerRenderFrame(),delete _._targetZoom,delete _._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ht,zoomDelta:Z-S.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ba.prototype._smoothOutEasing=function(_){var S=E.ease;if(this._prevEase){var x=this._prevEase,O=(E.browser.now()-x.start)/x.duration,k=x.easing(O+.01)-x.easing(O),Z=.27/Math.sqrt(k*k+1e-4)*.01,J=Math.sqrt(.0729-Z*Z);S=E.bezier(Z,J,.25,1)}return this._prevEase={start:E.browser.now(),duration:_,easing:S},S},ba.prototype.blur=function(){this.reset()},ba.prototype.reset=function(){this._active=!1};var pc=function(_,S){this._clickZoom=_,this._tapZoom=S};pc.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},pc.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},pc.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},pc.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var rf=function(){this.reset()};rf.prototype.reset=function(){this._active=!1},rf.prototype.blur=function(){this.reset()},rf.prototype.dblclick=function(_,S){return _.preventDefault(),{cameraAnimation:function(x){x.easeTo({duration:300,zoom:x.getZoom()+(_.shiftKey?-1:1),around:x.unproject(S)},{originalEvent:_})}}},rf.prototype.enable=function(){this._enabled=!0},rf.prototype.disable=function(){this._enabled=!1,this.reset()},rf.prototype.isEnabled=function(){return this._enabled},rf.prototype.isActive=function(){return this._active};var gu=function(){this._tap=new wa({numTouches:1,numTaps:1}),this.reset()};gu.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},gu.prototype.touchstart=function(_,S,x){this._swipePoint||(this._tapTime&&_.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=S[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(_,S,x))},gu.prototype.touchmove=function(_,S,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;var O=S[0],k=O.y-this._swipePoint.y;return this._swipePoint=O,_.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(_,S,x)},gu.prototype.touchend=function(_,S,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(_,S,x)&&(this._tapTime=_.timeStamp)},gu.prototype.touchcancel=function(){this.reset()},gu.prototype.enable=function(){this._enabled=!0},gu.prototype.disable=function(){this._enabled=!1,this.reset()},gu.prototype.isEnabled=function(){return this._enabled},gu.prototype.isActive=function(){return this._active};var Zh=function(_,S,x){this._el=_,this._mousePan=S,this._touchPan=x};Zh.prototype.enable=function(_){this._inertiaOptions=_||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Zh.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Zh.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Zh.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ql=function(_,S,x){this._pitchWithRotate=_.pitchWithRotate,this._mouseRotate=S,this._mousePitch=x};ql.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ql.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ql.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ql.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Hu=function(_,S,x,O){this._el=_,this._touchZoom=S,this._touchRotate=x,this._tapDragZoom=O,this._rotationDisabled=!1,this._enabled=!0};Hu.prototype.enable=function(_){this._touchZoom.enable(_),this._rotationDisabled||this._touchRotate.enable(_),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Hu.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Hu.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Hu.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Hu.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Hu.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var qu=function(_){return _.zoom||_.drag||_.pitch||_.rotate},cp=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S}(E.Event);function No(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}var So=function(_,S){this._map=_,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _a(_),this._bearingSnap=S.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(S),E.bindAll(["handleEvent","handleWindowEvent"],this);var x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[E.window.document,"mousemove",{capture:!0}],[E.window.document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[E.window,"blur",void 0]];for(var O=0,k=this._listeners;O<k.length;O+=1){var Z=k[O],J=Z[0];ne.addEventListener(J,Z[1],J===E.window.document?this.handleWindowEvent:this.handleEvent,Z[2])}};So.prototype.destroy=function(){for(var _=0,S=this._listeners;_<S.length;_+=1){var x=S[_],O=x[0];ne.removeEventListener(O,x[1],O===E.window.document?this.handleWindowEvent:this.handleEvent,x[2])}},So.prototype._addDefaultHandlers=function(_){var S=this._map,x=S.getCanvasContainer();this._add("mapEvent",new nl(S,_));var O=S.boxZoom=new Yu(S,_);this._add("boxZoom",O);var k=new ns,Z=new rf;S.doubleClickZoom=new pc(Z,k),this._add("tapZoom",k),this._add("clickZoom",Z);var J=new gu;this._add("tapDragZoom",J);var ge=S.touchPitch=new x0;this._add("touchPitch",ge);var We=new Id(_),ht=new Ah(_);S.dragRotate=new ql(_,We,ht),this._add("mouseRotate",We,["mousePitch"]),this._add("mousePitch",ht,["mouseRotate"]);var Ut=new Ef(_),Ht=new Sf(_);S.dragPan=new Zh(x,Ut,Ht),this._add("mousePan",Ut),this._add("touchPan",Ht,["touchZoom","touchRotate"]);var Xt=new b0,bn=new Ku;S.touchZoomRotate=new Hu(x,bn,Xt,J),this._add("touchRotate",Xt,["touchPan","touchZoom"]),this._add("touchZoom",bn,["touchPan","touchRotate"]);var mn=S.scrollZoom=new ba(S,this);this._add("scrollZoom",mn,["mousePan"]);var zn=S.keyboard=new dc;this._add("keyboard",zn),this._add("blockableMapEvent",new co(S));for(var an=0,kn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];an<kn.length;an+=1){var er=kn[an];_.interactive&&_[er]&&S[er].enable(_[er])}},So.prototype._add=function(_,S,x){this._handlers.push({handlerName:_,handler:S,allowed:x}),this._handlersById[_]=S},So.prototype.stop=function(_){if(!this._updatingCamera){for(var S=0,x=this._handlers;S<x.length;S+=1)x[S].handler.reset();this._inertia.clear(),this._fireEvents({},{},_),this._changes=[]}},So.prototype.isActive=function(){for(var _=0,S=this._handlers;_<S.length;_+=1)if(S[_].handler.isActive())return!0;return!1},So.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},So.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},So.prototype.isMoving=function(){return!!qu(this._eventsInProgress)||this.isZooming()},So.prototype._blockedByActive=function(_,S,x){for(var O in _)if(O!==x&&(!S||S.indexOf(O)<0))return!0;return!1},So.prototype.handleWindowEvent=function(_){this.handleEvent(_,_.type+"Window")},So.prototype._getMapTouches=function(_){for(var S=[],x=0,O=_;x<O.length;x+=1){var k=O[x];this._el.contains(k.target)&&S.push(k)}return S},So.prototype.handleEvent=function(_,S){this._updatingCamera=!0;for(var x=_.type==="renderFrame"?void 0:_,O={needsRenderFrame:!1},k={},Z={},J=_.touches?this._getMapTouches(_.touches):void 0,ge=J?ne.touchPos(this._el,J):ne.mousePos(this._el,_),We=0,ht=this._handlers;We<ht.length;We+=1){var Ut=ht[We],Ht=Ut.handlerName,Xt=Ut.handler,bn=Ut.allowed;if(Xt.isEnabled()){var mn=void 0;this._blockedByActive(Z,bn,Ht)?Xt.reset():Xt[S||_.type]&&(mn=Xt[S||_.type](_,ge,J),this.mergeHandlerResult(O,k,mn,Ht,x),mn&&mn.needsRenderFrame&&this._triggerRenderFrame()),(mn||Xt.isActive())&&(Z[Ht]=Xt)}}var zn={};for(var an in this._previousActiveHandlers)Z[an]||(zn[an]=x);this._previousActiveHandlers=Z,(Object.keys(zn).length||No(O))&&(this._changes.push([O,k,zn]),this._triggerRenderFrame()),(Object.keys(Z).length||No(O))&&this._map._stop(!0),this._updatingCamera=!1;var kn=O.cameraAnimation;kn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],kn(this._map))},So.prototype.mergeHandlerResult=function(_,S,x,O,k){if(x){E.extend(_,x);var Z={handlerName:O,originalEvent:x.originalEvent||k};x.zoomDelta!==void 0&&(S.zoom=Z),x.panDelta!==void 0&&(S.drag=Z),x.pitchDelta!==void 0&&(S.pitch=Z),x.bearingDelta!==void 0&&(S.rotate=Z)}},So.prototype._applyChanges=function(){for(var _={},S={},x={},O=0,k=this._changes;O<k.length;O+=1){var Z=k[O],J=Z[0],ge=Z[1],We=Z[2];J.panDelta&&(_.panDelta=(_.panDelta||new E.Point(0,0))._add(J.panDelta)),J.zoomDelta&&(_.zoomDelta=(_.zoomDelta||0)+J.zoomDelta),J.bearingDelta&&(_.bearingDelta=(_.bearingDelta||0)+J.bearingDelta),J.pitchDelta&&(_.pitchDelta=(_.pitchDelta||0)+J.pitchDelta),J.around!==void 0&&(_.around=J.around),J.pinchAround!==void 0&&(_.pinchAround=J.pinchAround),J.noInertia&&(_.noInertia=J.noInertia),E.extend(S,ge),E.extend(x,We)}this._updateMapTransform(_,S,x),this._changes=[]},So.prototype._updateMapTransform=function(_,S,x){var O=this._map,k=O.transform;if(!No(_))return this._fireEvents(S,x,!0);var Z=_.panDelta,J=_.zoomDelta,ge=_.bearingDelta,We=_.pitchDelta,ht=_.around,Ut=_.pinchAround;Ut!==void 0&&(ht=Ut),O._stop(!0),ht=ht||O.transform.centerPoint;var Ht=k.pointLocation(Z?ht.sub(Z):ht);ge&&(k.bearing+=ge),We&&(k.pitch+=We),J&&(k.zoom+=J),k.setLocationAtPoint(Ht,ht),this._map._update(),_.noInertia||this._inertia.record(_),this._fireEvents(S,x,!0)},So.prototype._fireEvents=function(_,S,x){var O=this,k=qu(this._eventsInProgress),Z=qu(_),J={};for(var ge in _)this._eventsInProgress[ge]||(J[ge+"start"]=_[ge].originalEvent),this._eventsInProgress[ge]=_[ge];for(var We in!k&&Z&&this._fireEvent("movestart",Z.originalEvent),J)this._fireEvent(We,J[We]);for(var ht in Z&&this._fireEvent("move",Z.originalEvent),_)this._fireEvent(ht,_[ht].originalEvent);var Ut,Ht={};for(var Xt in this._eventsInProgress){var bn=this._eventsInProgress[Xt],mn=bn.handlerName,zn=bn.originalEvent;this._handlersById[mn].isActive()||(delete this._eventsInProgress[Xt],Ht[Xt+"end"]=Ut=S[mn]||zn)}for(var an in Ht)this._fireEvent(an,Ht[an]);var kn=qu(this._eventsInProgress);if(x&&(k||Z)&&!kn){this._updatingCamera=!0;var er=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),vr=function(Mr){return Mr!==0&&-O._bearingSnap<Mr&&Mr<O._bearingSnap};er?(vr(er.bearing||this._map.getBearing())&&(er.bearing=0),this._map.easeTo(er,{originalEvent:Ut})):(this._map.fire(new E.Event("moveend",{originalEvent:Ut})),vr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},So.prototype._fireEvent=function(_,S){this._map.fire(new E.Event(_,S?{originalEvent:S}:{}))},So.prototype._requestFrame=function(){var _=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(S){delete _._frameId,_.handleEvent(new cp("renderFrame",{timeStamp:S})),_._applyChanges()})},So.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ql=function(_){function S(x,O){_.call(this),this._moving=!1,this._zooming=!1,this.transform=x,this._bearingSnap=O.bearingSnap,E.bindAll(["_renderFrameCallback"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getCenter=function(){return new E.LngLat(this.transform.center.lng,this.transform.center.lat)},S.prototype.setCenter=function(x,O){return this.jumpTo({center:x},O)},S.prototype.panBy=function(x,O,k){return x=E.Point.convert(x).mult(-1),this.panTo(this.transform.center,E.extend({offset:x},O),k)},S.prototype.panTo=function(x,O,k){return this.easeTo(E.extend({center:x},O),k)},S.prototype.getZoom=function(){return this.transform.zoom},S.prototype.setZoom=function(x,O){return this.jumpTo({zoom:x},O),this},S.prototype.zoomTo=function(x,O,k){return this.easeTo(E.extend({zoom:x},O),k)},S.prototype.zoomIn=function(x,O){return this.zoomTo(this.getZoom()+1,x,O),this},S.prototype.zoomOut=function(x,O){return this.zoomTo(this.getZoom()-1,x,O),this},S.prototype.getBearing=function(){return this.transform.bearing},S.prototype.setBearing=function(x,O){return this.jumpTo({bearing:x},O),this},S.prototype.getPadding=function(){return this.transform.padding},S.prototype.setPadding=function(x,O){return this.jumpTo({padding:x},O),this},S.prototype.rotateTo=function(x,O,k){return this.easeTo(E.extend({bearing:x},O),k)},S.prototype.resetNorth=function(x,O){return this.rotateTo(0,E.extend({duration:1e3},x),O),this},S.prototype.resetNorthPitch=function(x,O){return this.easeTo(E.extend({bearing:0,pitch:0,duration:1e3},x),O),this},S.prototype.snapToNorth=function(x,O){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(x,O):this},S.prototype.getPitch=function(){return this.transform.pitch},S.prototype.setPitch=function(x,O){return this.jumpTo({pitch:x},O),this},S.prototype.cameraForBounds=function(x,O){x=E.LngLatBounds.convert(x);var k=O&&O.bearing||0;return this._cameraForBoxAndBearing(x.getNorthWest(),x.getSouthEast(),k,O)},S.prototype._cameraForBoxAndBearing=function(x,O,k,Z){var J={top:0,bottom:0,right:0,left:0};if(typeof(Z=E.extend({padding:J,offset:[0,0],maxZoom:this.transform.maxZoom},Z)).padding=="number"){var ge=Z.padding;Z.padding={top:ge,bottom:ge,right:ge,left:ge}}Z.padding=E.extend(J,Z.padding);var We=this.transform,ht=We.padding,Ut=We.project(E.LngLat.convert(x)),Ht=We.project(E.LngLat.convert(O)),Xt=Ut.rotate(-k*Math.PI/180),bn=Ht.rotate(-k*Math.PI/180),mn=new E.Point(Math.max(Xt.x,bn.x),Math.max(Xt.y,bn.y)),zn=new E.Point(Math.min(Xt.x,bn.x),Math.min(Xt.y,bn.y)),an=mn.sub(zn),kn=(We.width-(ht.left+ht.right+Z.padding.left+Z.padding.right))/an.x,er=(We.height-(ht.top+ht.bottom+Z.padding.top+Z.padding.bottom))/an.y;if(!(er<0||kn<0)){var vr=Math.min(We.scaleZoom(We.scale*Math.min(kn,er)),Z.maxZoom),Mr=typeof Z.offset.x=="number"?new E.Point(Z.offset.x,Z.offset.y):E.Point.convert(Z.offset),wr=new E.Point((Z.padding.left-Z.padding.right)/2,(Z.padding.top-Z.padding.bottom)/2).rotate(k*Math.PI/180),Fr=Mr.add(wr).mult(We.scale/We.zoomScale(vr));return{center:We.unproject(Ut.add(Ht).div(2).sub(Fr)),zoom:vr,bearing:k}}E.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},S.prototype.fitBounds=function(x,O,k){return this._fitInternal(this.cameraForBounds(x,O),O,k)},S.prototype.fitScreenCoordinates=function(x,O,k,Z,J){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(E.Point.convert(x)),this.transform.pointLocation(E.Point.convert(O)),k,Z),Z,J)},S.prototype._fitInternal=function(x,O,k){return x?(delete(O=E.extend(x,O)).padding,O.linear?this.easeTo(O,k):this.flyTo(O,k)):this},S.prototype.jumpTo=function(x,O){this.stop();var k=this.transform,Z=!1,J=!1,ge=!1;return"zoom"in x&&k.zoom!==+x.zoom&&(Z=!0,k.zoom=+x.zoom),x.center!==void 0&&(k.center=E.LngLat.convert(x.center)),"bearing"in x&&k.bearing!==+x.bearing&&(J=!0,k.bearing=+x.bearing),"pitch"in x&&k.pitch!==+x.pitch&&(ge=!0,k.pitch=+x.pitch),x.padding==null||k.isPaddingEqual(x.padding)||(k.padding=x.padding),this.fire(new E.Event("movestart",O)).fire(new E.Event("move",O)),Z&&this.fire(new E.Event("zoomstart",O)).fire(new E.Event("zoom",O)).fire(new E.Event("zoomend",O)),J&&this.fire(new E.Event("rotatestart",O)).fire(new E.Event("rotate",O)).fire(new E.Event("rotateend",O)),ge&&this.fire(new E.Event("pitchstart",O)).fire(new E.Event("pitch",O)).fire(new E.Event("pitchend",O)),this.fire(new E.Event("moveend",O))},S.prototype.easeTo=function(x,O){var k=this;this._stop(!1,x.easeId),((x=E.extend({offset:[0,0],duration:500,easing:E.ease},x)).animate===!1||!x.essential&&E.browser.prefersReducedMotion)&&(x.duration=0);var Z=this.transform,J=this.getZoom(),ge=this.getBearing(),We=this.getPitch(),ht=this.getPadding(),Ut="zoom"in x?+x.zoom:J,Ht="bearing"in x?this._normalizeBearing(x.bearing,ge):ge,Xt="pitch"in x?+x.pitch:We,bn="padding"in x?x.padding:Z.padding,mn=E.Point.convert(x.offset),zn=Z.centerPoint.add(mn),an=Z.pointLocation(zn),kn=E.LngLat.convert(x.center||an);this._normalizeCenter(kn);var er,vr,Mr=Z.project(an),wr=Z.project(kn).sub(Mr),Fr=Z.zoomScale(Ut-J);x.around&&(er=E.LngLat.convert(x.around),vr=Z.locationPoint(er));var ti={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ut!==J,this._rotating=this._rotating||ge!==Ht,this._pitching=this._pitching||Xt!==We,this._padding=!Z.isPaddingEqual(bn),this._easeId=x.easeId,this._prepareEase(O,x.noMoveStart,ti),this._ease(function(Ni){if(k._zooming&&(Z.zoom=E.number(J,Ut,Ni)),k._rotating&&(Z.bearing=E.number(ge,Ht,Ni)),k._pitching&&(Z.pitch=E.number(We,Xt,Ni)),k._padding&&(Z.interpolatePadding(ht,bn,Ni),zn=Z.centerPoint.add(mn)),er)Z.setLocationAtPoint(er,vr);else{var Pi=Z.zoomScale(Z.zoom-J),lo=Ut>J?Math.min(2,Fr):Math.max(.5,Fr),zo=Math.pow(lo,1-Ni),Wo=Z.unproject(Mr.add(wr.mult(Ni*zo)).mult(Pi));Z.setLocationAtPoint(Z.renderWorldCopies?Wo.wrap():Wo,zn)}k._fireMoveEvents(O)},function(Ni){k._afterEase(O,Ni)},x),this},S.prototype._prepareEase=function(x,O,k){k===void 0&&(k={}),this._moving=!0,O||k.moving||this.fire(new E.Event("movestart",x)),this._zooming&&!k.zooming&&this.fire(new E.Event("zoomstart",x)),this._rotating&&!k.rotating&&this.fire(new E.Event("rotatestart",x)),this._pitching&&!k.pitching&&this.fire(new E.Event("pitchstart",x))},S.prototype._fireMoveEvents=function(x){this.fire(new E.Event("move",x)),this._zooming&&this.fire(new E.Event("zoom",x)),this._rotating&&this.fire(new E.Event("rotate",x)),this._pitching&&this.fire(new E.Event("pitch",x))},S.prototype._afterEase=function(x,O){if(!this._easeId||!O||this._easeId!==O){delete this._easeId;var k=this._zooming,Z=this._rotating,J=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,k&&this.fire(new E.Event("zoomend",x)),Z&&this.fire(new E.Event("rotateend",x)),J&&this.fire(new E.Event("pitchend",x)),this.fire(new E.Event("moveend",x))}},S.prototype.flyTo=function(x,O){var k=this;if(!x.essential&&E.browser.prefersReducedMotion){var Z=E.pick(x,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Z,O)}this.stop(),x=E.extend({offset:[0,0],speed:1.2,curve:1.42,easing:E.ease},x);var J=this.transform,ge=this.getZoom(),We=this.getBearing(),ht=this.getPitch(),Ut=this.getPadding(),Ht="zoom"in x?E.clamp(+x.zoom,J.minZoom,J.maxZoom):ge,Xt="bearing"in x?this._normalizeBearing(x.bearing,We):We,bn="pitch"in x?+x.pitch:ht,mn="padding"in x?x.padding:J.padding,zn=J.zoomScale(Ht-ge),an=E.Point.convert(x.offset),kn=J.centerPoint.add(an),er=J.pointLocation(kn),vr=E.LngLat.convert(x.center||er);this._normalizeCenter(vr);var Mr=J.project(er),wr=J.project(vr).sub(Mr),Fr=x.curve,ti=Math.max(J.width,J.height),Ni=ti/zn,Pi=wr.mag();if("minZoom"in x){var lo=E.clamp(Math.min(x.minZoom,ge,Ht),J.minZoom,J.maxZoom),zo=ti/J.zoomScale(lo-ge);Fr=Math.sqrt(zo/Pi*2)}var Wo=Fr*Fr;function Go(ra){var Bo=(Ni*Ni-ti*ti+(ra?-1:1)*Wo*Wo*Pi*Pi)/(2*(ra?Ni:ti)*Wo*Pi);return Math.log(Math.sqrt(Bo*Bo+1)-Bo)}function as(ra){return(Math.exp(ra)-Math.exp(-ra))/2}function Or(ra){return(Math.exp(ra)+Math.exp(-ra))/2}var en=Go(0),ha=function(ra){return Or(en)/Or(en+Fr*ra)},aa=function(ra){return ti*((Or(en)*(as(Bo=en+Fr*ra)/Or(Bo))-as(en))/Wo)/Pi;var Bo},Yo=(Go(1)-en)/Fr;if(Math.abs(Pi)<1e-6||!isFinite(Yo)){if(Math.abs(ti-Ni)<1e-6)return this.easeTo(x,O);var ga=Ni<ti?-1:1;Yo=Math.abs(Math.log(Ni/ti))/Fr,aa=function(){return 0},ha=function(ra){return Math.exp(ga*Fr*ra)}}return x.duration="duration"in x?+x.duration:1e3*Yo/("screenSpeed"in x?+x.screenSpeed/Fr:+x.speed),x.maxDuration&&x.duration>x.maxDuration&&(x.duration=0),this._zooming=!0,this._rotating=We!==Xt,this._pitching=bn!==ht,this._padding=!J.isPaddingEqual(mn),this._prepareEase(O,!1),this._ease(function(ra){var Bo=ra*Yo,uu=1/ha(Bo);J.zoom=ra===1?Ht:ge+J.scaleZoom(uu),k._rotating&&(J.bearing=E.number(We,Xt,ra)),k._pitching&&(J.pitch=E.number(ht,bn,ra)),k._padding&&(J.interpolatePadding(Ut,mn,ra),kn=J.centerPoint.add(an));var El=ra===1?vr:J.unproject(Mr.add(wr.mult(aa(Bo))).mult(uu));J.setLocationAtPoint(J.renderWorldCopies?El.wrap():El,kn),k._fireMoveEvents(O)},function(){return k._afterEase(O)},x),this},S.prototype.isEasing=function(){return!!this._easeFrameId},S.prototype.stop=function(){return this._stop()},S.prototype._stop=function(x,O){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var k=this._onEaseEnd;delete this._onEaseEnd,k.call(this,O)}if(!x){var Z=this.handlers;Z&&Z.stop(!1)}return this},S.prototype._ease=function(x,O,k){k.animate===!1||k.duration===0?(x(1),O()):(this._easeStart=E.browser.now(),this._easeOptions=k,this._onEaseFrame=x,this._onEaseEnd=O,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},S.prototype._renderFrameCallback=function(){var x=Math.min((E.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},S.prototype._normalizeBearing=function(x,O){x=E.wrap(x,-180,180);var k=Math.abs(x-O);return Math.abs(x-360-O)<k&&(x-=360),Math.abs(x+360-O)<k&&(x+=360),x},S.prototype._normalizeCenter=function(x){var O=this.transform;if(O.renderWorldCopies&&!O.lngRange){var k=x.lng-O.center.lng;x.lng+=k>180?-360:k<-180?360:0}},S}(E.Evented),Qu=function(_){_===void 0&&(_={}),this.options=_,E.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Qu.prototype.getDefaultPosition=function(){return"bottom-right"},Qu.prototype.onAdd=function(_){var S=this.options&&this.options.compact;return this._map=_,this._container=ne.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ne.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ne.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),S&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),S===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Qu.prototype.onRemove=function(){ne.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Qu.prototype._setElementTitle=function(_,S){var x=this._map._getUIString("AttributionControl."+S);_.title=x,_.setAttribute("aria-label",x)},Qu.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Qu.prototype._updateEditLink=function(){var _=this._editLink;_||(_=this._editLink=this._container.querySelector(".mapbox-improve-map"));var S=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||E.config.ACCESS_TOKEN}];if(_){var x=S.reduce(function(O,k,Z){return k.value&&(O+=k.key+"="+k.value+(Z<S.length-1?"&":"")),O},"?");_.href=E.config.FEEDBACK_URL+"/"+x+(this._map._hash?this._map._hash.getHashString(!0):""),_.rel="noopener nofollow",this._setElementTitle(_,"MapFeedback")}},Qu.prototype._updateData=function(_){!_||_.sourceDataType!=="metadata"&&_.sourceDataType!=="visibility"&&_.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Qu.prototype._updateAttributions=function(){if(this._map.style){var _=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?_=_.concat(this.options.customAttribution.map(function(ge){return typeof ge!="string"?"":ge})):typeof this.options.customAttribution=="string"&&_.push(this.options.customAttribution)),this._map.style.stylesheet){var S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}var x=this._map.style.sourceCaches;for(var O in x){var k=x[O];if(k.used){var Z=k.getSource();Z.attribution&&_.indexOf(Z.attribution)<0&&_.push(Z.attribution)}}_.sort(function(ge,We){return ge.length-We.length});var J=(_=_.filter(function(ge,We){for(var ht=We+1;ht<_.length;ht++)if(_[ht].indexOf(ge)>=0)return!1;return!0})).join(" | ");J!==this._attribHTML&&(this._attribHTML=J,_.length?(this._innerContainer.innerHTML=J,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Qu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Ju=function(){E.bindAll(["_updateLogo"],this),E.bindAll(["_updateCompact"],this)};Ju.prototype.onAdd=function(_){this._map=_,this._container=ne.create("div","mapboxgl-ctrl");var S=ne.create("a","mapboxgl-ctrl-logo");return S.target="_blank",S.rel="noopener nofollow",S.href="https://www.mapbox.com/",S.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),S.setAttribute("rel","noopener nofollow"),this._container.appendChild(S),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ju.prototype.onRemove=function(){ne.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ju.prototype.getDefaultPosition=function(){return"bottom-left"},Ju.prototype._updateLogo=function(_){_&&_.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Ju.prototype._logoRequired=function(){if(this._map.style){var _=this._map.style.sourceCaches;for(var S in _)if(_[S].getSource().mapbox_logo)return!0;return!1}},Ju.prototype._updateCompact=function(){var _=this._container.children;if(_.length){var S=_[0];this._map.getCanvasContainer().offsetWidth<250?S.classList.add("mapboxgl-compact"):S.classList.remove("mapboxgl-compact")}};var dl=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};dl.prototype.add=function(_){var S=++this._id;return this._queue.push({callback:_,id:S,cancelled:!1}),S},dl.prototype.remove=function(_){for(var S=this._currentlyRunning,x=0,O=S?this._queue.concat(S):this._queue;x<O.length;x+=1){var k=O[x];if(k.id===_)return void(k.cancelled=!0)}},dl.prototype.run=function(_){_===void 0&&(_=0);var S=this._currentlyRunning=this._queue;this._queue=[];for(var x=0,O=S;x<O.length;x+=1){var k=O[x];if(!k.cancelled&&(k.callback(_),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},dl.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Tc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},nh=E.window.HTMLImageElement,Dd=E.window.HTMLElement,Ms=E.window.ImageBitmap,yu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},E0=function(_){function S(O){var k=this;if((O=E.extend({},yu,O)).minZoom!=null&&O.maxZoom!=null&&O.minZoom>O.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(O.minPitch!=null&&O.maxPitch!=null&&O.minPitch>O.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(O.minPitch!=null&&O.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(O.maxPitch!=null&&O.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Z=new ze(O.minZoom,O.maxZoom,O.minPitch,O.maxPitch,O.renderWorldCopies);if(_.call(this,Z,O),this._interactive=O.interactive,this._maxTileCacheSize=O.maxTileCacheSize,this._failIfMajorPerformanceCaveat=O.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=O.preserveDrawingBuffer,this._antialias=O.antialias,this._trackResize=O.trackResize,this._bearingSnap=O.bearingSnap,this._refreshExpiredTiles=O.refreshExpiredTiles,this._fadeDuration=O.fadeDuration,this._crossSourceCollisions=O.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=O.collectResourceTiming,this._renderTaskQueue=new dl,this._controls=[],this._mapId=E.uniqueId(),this._locale=E.extend({},Tc,O.locale),this._clickTolerance=O.clickTolerance,this._requestManager=new E.RequestManager(O.transformRequest,O.accessToken),typeof O.container=="string"){if(this._container=E.window.document.getElementById(O.container),!this._container)throw new Error("Container '"+O.container+"' not found.")}else{if(!(O.container instanceof Dd))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=O.container}if(O.maxBounds&&this.setMaxBounds(O.maxBounds),E.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return k._update(!1)}),this.on("moveend",function(){return k._update(!1)}),this.on("zoom",function(){return k._update(!0)}),E.window!==void 0&&(E.window.addEventListener("online",this._onWindowOnline,!1),E.window.addEventListener("resize",this._onWindowResize,!1),E.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new So(this,O),this._hash=O.hash&&new An(typeof O.hash=="string"&&O.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:O.center,zoom:O.zoom,bearing:O.bearing,pitch:O.pitch}),O.bounds&&(this.resize(),this.fitBounds(O.bounds,E.extend({},O.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=O.localIdeographFontFamily,O.style&&this.setStyle(O.style,{localIdeographFontFamily:O.localIdeographFontFamily}),O.attributionControl&&this.addControl(new Qu({customAttribution:O.customAttribution})),this.addControl(new Ju,O.logoPosition),this.on("style.load",function(){k.transform.unmodified&&k.jumpTo(k.style.stylesheet)}),this.on("data",function(J){k._update(J.dataType==="style"),k.fire(new E.Event(J.dataType+"data",J))}),this.on("dataloading",function(J){k.fire(new E.Event(J.dataType+"dataloading",J))})}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return S.prototype._getMapId=function(){return this._mapId},S.prototype.addControl=function(O,k){if(k===void 0&&(k=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Z=O.onAdd(this);this._controls.push(O);var J=this._controlPositions[k];return k.indexOf("bottom")!==-1?J.insertBefore(Z,J.firstChild):J.appendChild(Z),this},S.prototype.removeControl=function(O){if(!O||!O.onRemove)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var k=this._controls.indexOf(O);return k>-1&&this._controls.splice(k,1),O.onRemove(this),this},S.prototype.hasControl=function(O){return this._controls.indexOf(O)>-1},S.prototype.resize=function(O){var k=this._containerDimensions(),Z=k[0],J=k[1];if(Z===this.transform.width&&J===this.transform.height)return this;this._resizeCanvas(Z,J),this.transform.resize(Z,J),this.painter.resize(Z,J);var ge=!this._moving;return ge&&this.fire(new E.Event("movestart",O)).fire(new E.Event("move",O)),this.fire(new E.Event("resize",O)),ge&&this.fire(new E.Event("moveend",O)),this},S.prototype.getBounds=function(){return this.transform.getBounds()},S.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},S.prototype.setMaxBounds=function(O){return this.transform.setMaxBounds(E.LngLatBounds.convert(O)),this._update()},S.prototype.setMinZoom=function(O){if((O=O==null?-2:O)>=-2&&O<=this.transform.maxZoom)return this.transform.minZoom=O,this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},S.prototype.getMinZoom=function(){return this.transform.minZoom},S.prototype.setMaxZoom=function(O){if((O=O==null?22:O)>=this.transform.minZoom)return this.transform.maxZoom=O,this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")},S.prototype.getMaxZoom=function(){return this.transform.maxZoom},S.prototype.setMinPitch=function(O){if((O=O==null?0:O)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.minPitch=O,this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},S.prototype.getMinPitch=function(){return this.transform.minPitch},S.prototype.setMaxPitch=function(O){if((O=O==null?60:O)>60)throw new Error("maxPitch must be less than or equal to 60");if(O>=this.transform.minPitch)return this.transform.maxPitch=O,this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")},S.prototype.getMaxPitch=function(){return this.transform.maxPitch},S.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},S.prototype.setRenderWorldCopies=function(O){return this.transform.renderWorldCopies=O,this._update()},S.prototype.project=function(O){return this.transform.locationPoint(E.LngLat.convert(O))},S.prototype.unproject=function(O){return this.transform.pointLocation(E.Point.convert(O))},S.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},S.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},S.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},S.prototype._createDelegatedListener=function(O,k,Z){var J,ge=this;if(O==="mouseenter"||O==="mouseover"){var We=!1;return{layer:k,listener:Z,delegates:{mousemove:function(Ut){var Ht=ge.getLayer(k)?ge.queryRenderedFeatures(Ut.point,{layers:[k]}):[];Ht.length?We||(We=!0,Z.call(ge,new Ia(O,ge,Ut.originalEvent,{features:Ht}))):We=!1},mouseout:function(){We=!1}}}}if(O==="mouseleave"||O==="mouseout"){var ht=!1;return{layer:k,listener:Z,delegates:{mousemove:function(Ut){(ge.getLayer(k)?ge.queryRenderedFeatures(Ut.point,{layers:[k]}):[]).length?ht=!0:ht&&(ht=!1,Z.call(ge,new Ia(O,ge,Ut.originalEvent)))},mouseout:function(Ut){ht&&(ht=!1,Z.call(ge,new Ia(O,ge,Ut.originalEvent)))}}}}return{layer:k,listener:Z,delegates:(J={},J[O]=function(Ut){var Ht=ge.getLayer(k)?ge.queryRenderedFeatures(Ut.point,{layers:[k]}):[];Ht.length&&(Ut.features=Ht,Z.call(ge,Ut),delete Ut.features)},J)}},S.prototype.on=function(O,k,Z){if(Z===void 0)return _.prototype.on.call(this,O,k);var J=this._createDelegatedListener(O,k,Z);for(var ge in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(J),J.delegates)this.on(ge,J.delegates[ge]);return this},S.prototype.once=function(O,k,Z){if(Z===void 0)return _.prototype.once.call(this,O,k);var J=this._createDelegatedListener(O,k,Z);for(var ge in J.delegates)this.once(ge,J.delegates[ge]);return this},S.prototype.off=function(O,k,Z){var J=this;return Z===void 0?_.prototype.off.call(this,O,k):(this._delegatedListeners&&this._delegatedListeners[O]&&function(ge){for(var We=ge[O],ht=0;ht<We.length;ht++){var Ut=We[ht];if(Ut.layer===k&&Ut.listener===Z){for(var Ht in Ut.delegates)J.off(Ht,Ut.delegates[Ht]);return We.splice(ht,1),J}}}(this._delegatedListeners),this)},S.prototype.queryRenderedFeatures=function(O,k){if(!this.style)return[];var Z;if(k!==void 0||O===void 0||O instanceof E.Point||Array.isArray(O)||(k=O,O=void 0),k=k||{},(O=O||[[0,0],[this.transform.width,this.transform.height]])instanceof E.Point||typeof O[0]=="number")Z=[E.Point.convert(O)];else{var J=E.Point.convert(O[0]),ge=E.Point.convert(O[1]);Z=[J,new E.Point(ge.x,J.y),ge,new E.Point(J.x,ge.y),J]}return this.style.queryRenderedFeatures(Z,k,this.transform)},S.prototype.querySourceFeatures=function(O,k){return this.style.querySourceFeatures(O,k)},S.prototype.setStyle=function(O,k){return(k=E.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},k)).diff!==!1&&k.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,k),this):(this._localIdeographFontFamily=k.localIdeographFontFamily,this._updateStyle(O,k))},S.prototype._getUIString=function(O){var k=this._locale[O];if(k==null)throw new Error("Missing UI string '"+O+"'");return k},S.prototype._updateStyle=function(O,k){return this.style&&(this.style.setEventedParent(null),this.style._remove()),O?(this.style=new vu(this,k||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O):this.style.loadJSON(O),this):(delete this.style,this)},S.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new vu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},S.prototype._diffStyle=function(O,k){var Z=this;if(typeof O=="string"){var J=this._requestManager.normalizeStyleURL(O),ge=this._requestManager.transformRequest(J,E.ResourceType.Style);E.getJSON(ge,function(We,ht){We?Z.fire(new E.ErrorEvent(We)):ht&&Z._updateDiff(ht,k)})}else typeof O=="object"&&this._updateDiff(O,k)},S.prototype._updateDiff=function(O,k){try{this.style.setState(O)&&this._update(!0)}catch(Z){E.warnOnce("Unable to perform style diff: "+(Z.message||Z.error||Z)+".  Rebuilding the style from scratch."),this._updateStyle(O,k)}},S.prototype.getStyle=function(){if(this.style)return this.style.serialize()},S.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():E.warnOnce("There is no style added to the map.")},S.prototype.addSource=function(O,k){return this._lazyInitEmptyStyle(),this.style.addSource(O,k),this._update(!0)},S.prototype.isSourceLoaded=function(O){var k=this.style&&this.style.sourceCaches[O];if(k!==void 0)return k.loaded();this.fire(new E.ErrorEvent(new Error("There is no source with ID '"+O+"'")))},S.prototype.areTilesLoaded=function(){var O=this.style&&this.style.sourceCaches;for(var k in O){var Z=O[k]._tiles;for(var J in Z){var ge=Z[J];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}}return!0},S.prototype.addSourceType=function(O,k,Z){return this._lazyInitEmptyStyle(),this.style.addSourceType(O,k,Z)},S.prototype.removeSource=function(O){return this.style.removeSource(O),this._update(!0)},S.prototype.getSource=function(O){return this.style.getSource(O)},S.prototype.addImage=function(O,k,Z){Z===void 0&&(Z={});var J=Z.pixelRatio;J===void 0&&(J=1);var ge=Z.sdf;ge===void 0&&(ge=!1);var We=Z.stretchX,ht=Z.stretchY,Ut=Z.content;if(this._lazyInitEmptyStyle(),k instanceof nh||Ms&&k instanceof Ms){var Ht=E.browser.getImageData(k);this.style.addImage(O,{data:new E.RGBAImage({width:Ht.width,height:Ht.height},Ht.data),pixelRatio:J,stretchX:We,stretchY:ht,content:Ut,sdf:ge,version:0})}else{if(k.width===void 0||k.height===void 0)return this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Xt=k;this.style.addImage(O,{data:new E.RGBAImage({width:k.width,height:k.height},new Uint8Array(k.data)),pixelRatio:J,stretchX:We,stretchY:ht,content:Ut,sdf:ge,version:0,userImage:Xt}),Xt.onAdd&&Xt.onAdd(this,O)}},S.prototype.updateImage=function(O,k){var Z=this.style.getImage(O);if(!Z)return this.fire(new E.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var J=k instanceof nh||Ms&&k instanceof Ms?E.browser.getImageData(k):k,ge=J.width,We=J.height,ht=J.data;return ge===void 0||We===void 0?this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ge!==Z.data.width||We!==Z.data.height?this.fire(new E.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Z.data.replace(ht,!(k instanceof nh||Ms&&k instanceof Ms)),void this.style.updateImage(O,Z))},S.prototype.hasImage=function(O){return O?!!this.style.getImage(O):(this.fire(new E.ErrorEvent(new Error("Missing required image id"))),!1)},S.prototype.removeImage=function(O){this.style.removeImage(O)},S.prototype.loadImage=function(O,k){E.getImage(this._requestManager.transformRequest(O,E.ResourceType.Image),k)},S.prototype.listImages=function(){return this.style.listImages()},S.prototype.addLayer=function(O,k){return this._lazyInitEmptyStyle(),this.style.addLayer(O,k),this._update(!0)},S.prototype.moveLayer=function(O,k){return this.style.moveLayer(O,k),this._update(!0)},S.prototype.removeLayer=function(O){return this.style.removeLayer(O),this._update(!0)},S.prototype.getLayer=function(O){return this.style.getLayer(O)},S.prototype.setLayerZoomRange=function(O,k,Z){return this.style.setLayerZoomRange(O,k,Z),this._update(!0)},S.prototype.setFilter=function(O,k,Z){return Z===void 0&&(Z={}),this.style.setFilter(O,k,Z),this._update(!0)},S.prototype.getFilter=function(O){return this.style.getFilter(O)},S.prototype.setPaintProperty=function(O,k,Z,J){return J===void 0&&(J={}),this.style.setPaintProperty(O,k,Z,J),this._update(!0)},S.prototype.getPaintProperty=function(O,k){return this.style.getPaintProperty(O,k)},S.prototype.setLayoutProperty=function(O,k,Z,J){return J===void 0&&(J={}),this.style.setLayoutProperty(O,k,Z,J),this._update(!0)},S.prototype.getLayoutProperty=function(O,k){return this.style.getLayoutProperty(O,k)},S.prototype.setLight=function(O,k){return k===void 0&&(k={}),this._lazyInitEmptyStyle(),this.style.setLight(O,k),this._update(!0)},S.prototype.getLight=function(){return this.style.getLight()},S.prototype.setFeatureState=function(O,k){return this.style.setFeatureState(O,k),this._update()},S.prototype.removeFeatureState=function(O,k){return this.style.removeFeatureState(O,k),this._update()},S.prototype.getFeatureState=function(O){return this.style.getFeatureState(O)},S.prototype.getContainer=function(){return this._container},S.prototype.getCanvasContainer=function(){return this._canvasContainer},S.prototype.getCanvas=function(){return this._canvas},S.prototype._containerDimensions=function(){var O=0,k=0;return this._container&&(O=this._container.clientWidth||400,k=this._container.clientHeight||300),[O,k]},S.prototype._detectMissingCSS=function(){E.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&E.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},S.prototype._setupContainer=function(){var O=this._container;O.classList.add("mapboxgl-map"),(this._missingCSSCanary=ne.create("div","mapboxgl-canary",O)).style.visibility="hidden",this._detectMissingCSS();var k=this._canvasContainer=ne.create("div","mapboxgl-canvas-container",O);this._interactive&&k.classList.add("mapboxgl-interactive"),this._canvas=ne.create("canvas","mapboxgl-canvas",k),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Z=this._containerDimensions();this._resizeCanvas(Z[0],Z[1]);var J=this._controlContainer=ne.create("div","mapboxgl-control-container",O),ge=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(We){ge[We]=ne.create("div","mapboxgl-ctrl-"+We,J)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},S.prototype._resizeCanvas=function(O,k){var Z=E.browser.devicePixelRatio||1;this._canvas.width=Z*O,this._canvas.height=Z*k,this._canvas.style.width=O+"px",this._canvas.style.height=k+"px"},S.prototype._setupPainter=function(){var O=E.extend({},he.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),k=this._canvas.getContext("webgl",O)||this._canvas.getContext("experimental-webgl",O);k?(this.painter=new Zs(k,this.transform),E.webpSupported.testSupport(k)):this.fire(new E.ErrorEvent(new Error("Failed to initialize WebGL")))},S.prototype._contextLost=function(O){O.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new E.Event("webglcontextlost",{originalEvent:O}))},S.prototype._contextRestored=function(O){this._setupPainter(),this.resize(),this._update(),this.fire(new E.Event("webglcontextrestored",{originalEvent:O}))},S.prototype._onMapScroll=function(O){if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},S.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},S.prototype._update=function(O){return this.style?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this},S.prototype._requestRenderFrame=function(O){return this._update(),this._renderTaskQueue.add(O)},S.prototype._cancelRenderFrame=function(O){this._renderTaskQueue.remove(O)},S.prototype._render=function(O){var k,Z=this,J=0,ge=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(k=ge.createQueryEXT(),ge.beginQueryEXT(ge.TIME_ELAPSED_EXT,k),J=E.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),!this._removed){var We=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ht=this.transform.zoom,Ut=E.browser.now();this.style.zoomHistory.update(ht,Ut);var Ht=new E.EvaluationParameters(ht,{now:Ut,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Xt=Ht.crossFadingFactor();Xt===1&&Xt===this._crossFadingFactor||(We=!0,this._crossFadingFactor=Xt),this.style.update(Ht)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new E.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new E.Event("load"))),this.style&&(this.style.hasTransitions()||We)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var bn=E.browser.now()-J;ge.endQueryEXT(ge.TIME_ELAPSED_EXT,k),setTimeout(function(){var an=ge.getQueryObjectEXT(k,ge.QUERY_RESULT_EXT)/1e6;ge.deleteQueryEXT(k),Z.fire(new E.Event("gpu-timing-frame",{cpuTime:bn,gpuTime:an}))},50)}if(this.listens("gpu-timing-layer")){var mn=this.painter.collectGpuTimers();setTimeout(function(){var an=Z.painter.queryGpuTimers(mn);Z.fire(new E.Event("gpu-timing-layer",{layerTimes:an}))},50)}var zn=this._sourcesDirty||this._styleDirty||this._placementDirty;return zn||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new E.Event("idle")),!this._loaded||this._fullyLoaded||zn||(this._fullyLoaded=!0),this}},S.prototype.remove=function(){this._hash&&this._hash.remove();for(var O=0,k=this._controls;O<k.length;O+=1)k[O].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),E.window!==void 0&&(E.window.removeEventListener("resize",this._onWindowResize,!1),E.window.removeEventListener("orientationchange",this._onWindowResize,!1),E.window.removeEventListener("online",this._onWindowOnline,!1));var Z=this.painter.context.gl.getExtension("WEBGL_lose_context");Z&&Z.loseContext(),Xh(this._canvasContainer),Xh(this._controlContainer),Xh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new E.Event("remove"))},S.prototype.triggerRepaint=function(){var O=this;this.style&&!this._frame&&(this._frame=E.browser.frame(function(k){O._frame=null,O._render(k)}))},S.prototype._onWindowOnline=function(){this._update()},S.prototype._onWindowResize=function(O){this._trackResize&&this.resize({originalEvent:O})._update()},x.showTileBoundaries.get=function(){return!!this._showTileBoundaries},x.showTileBoundaries.set=function(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())},x.showPadding.get=function(){return!!this._showPadding},x.showPadding.set=function(O){this._showPadding!==O&&(this._showPadding=O,this._update())},x.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},x.showCollisionBoxes.set=function(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())},x.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},x.showOverdrawInspector.set=function(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())},x.repaint.get=function(){return!!this._repaint},x.repaint.set=function(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())},x.vertices.get=function(){return!!this._vertices},x.vertices.set=function(O){this._vertices=O,this._update()},S.prototype._setCacheLimits=function(O,k){E.setCacheLimits(O,k)},x.version.get=function(){return E.version},Object.defineProperties(S.prototype,x),S}(Ql);function Xh(_){_.parentNode&&_.parentNode.removeChild(_)}var fp={showCompass:!0,showZoom:!0,visualizePitch:!1},Ch=function(_){var S=this;this.options=E.extend({},fp,_),this._container=ne.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this.options.showZoom&&(E.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(x){return S._map.zoomIn({},{originalEvent:x})}),ne.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(x){return S._map.zoomOut({},{originalEvent:x})}),ne.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(E.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(x){S.options.visualizePitch?S._map.resetNorthPitch({},{originalEvent:x}):S._map.resetNorth({},{originalEvent:x})}),this._compassIcon=ne.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ch.prototype._updateZoomButtons=function(){var _=this._map.getZoom(),S=_===this._map.getMaxZoom(),x=_===this._map.getMinZoom();this._zoomInButton.disabled=S,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",S.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},Ch.prototype._rotateCompassArrow=function(){var _=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=_},Ch.prototype.onAdd=function(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ec(this._map,this._compass,this.options.visualizePitch)),this._container},Ch.prototype.onRemove=function(){ne.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ch.prototype._createButton=function(_,S){var x=ne.create("button",_,this._container);return x.type="button",x.addEventListener("click",S),x},Ch.prototype._setButtonTitle=function(_,S){var x=this._map._getUIString("NavigationControl."+S);_.title=x,_.setAttribute("aria-label",x)};var ec=function(_,S,x){x===void 0&&(x=!1),this._clickTolerance=10,this.element=S,this.mouseRotate=new Id({clickTolerance:_.dragRotate._mouseRotate._clickTolerance}),this.map=_,x&&(this.mousePitch=new Ah({clickTolerance:_.dragRotate._mousePitch._clickTolerance})),E.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),ne.addEventListener(S,"mousedown",this.mousedown),ne.addEventListener(S,"touchstart",this.touchstart,{passive:!1}),ne.addEventListener(S,"touchmove",this.touchmove),ne.addEventListener(S,"touchend",this.touchend),ne.addEventListener(S,"touchcancel",this.reset)};function hp(_,S,x){if(_=new E.LngLat(_.lng,_.lat),S){var O=new E.LngLat(_.lng-360,_.lat),k=new E.LngLat(_.lng+360,_.lat),Z=x.locationPoint(_).distSqr(S);x.locationPoint(O).distSqr(S)<Z?_=O:x.locationPoint(k).distSqr(S)<Z&&(_=k)}for(;Math.abs(_.lng-x.center.lng)>180;){var J=x.locationPoint(_);if(J.x>=0&&J.y>=0&&J.x<=x.width&&J.y<=x.height)break;_.lng>x.center.lng?_.lng-=360:_.lng+=360}return _}ec.prototype.down=function(_,S){this.mouseRotate.mousedown(_,S),this.mousePitch&&this.mousePitch.mousedown(_,S),ne.disableDrag()},ec.prototype.move=function(_,S){var x=this.map,O=this.mouseRotate.mousemoveWindow(_,S);if(O&&O.bearingDelta&&x.setBearing(x.getBearing()+O.bearingDelta),this.mousePitch){var k=this.mousePitch.mousemoveWindow(_,S);k&&k.pitchDelta&&x.setPitch(x.getPitch()+k.pitchDelta)}},ec.prototype.off=function(){var _=this.element;ne.removeEventListener(_,"mousedown",this.mousedown),ne.removeEventListener(_,"touchstart",this.touchstart,{passive:!1}),ne.removeEventListener(_,"touchmove",this.touchmove),ne.removeEventListener(_,"touchend",this.touchend),ne.removeEventListener(_,"touchcancel",this.reset),this.offTemp()},ec.prototype.offTemp=function(){ne.enableDrag(),ne.removeEventListener(E.window,"mousemove",this.mousemove),ne.removeEventListener(E.window,"mouseup",this.mouseup)},ec.prototype.mousedown=function(_){this.down(E.extend({},_,{ctrlKey:!0,preventDefault:function(){return _.preventDefault()}}),ne.mousePos(this.element,_)),ne.addEventListener(E.window,"mousemove",this.mousemove),ne.addEventListener(E.window,"mouseup",this.mouseup)},ec.prototype.mousemove=function(_){this.move(_,ne.mousePos(this.element,_))},ec.prototype.mouseup=function(_){this.mouseRotate.mouseupWindow(_),this.mousePitch&&this.mousePitch.mouseupWindow(_),this.offTemp()},ec.prototype.touchstart=function(_){_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ne.touchPos(this.element,_.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return _.preventDefault()}},this._startPos))},ec.prototype.touchmove=function(_){_.targetTouches.length!==1?this.reset():(this._lastPos=ne.touchPos(this.element,_.targetTouches)[0],this.move({preventDefault:function(){return _.preventDefault()}},this._lastPos))},ec.prototype.touchend=function(_){_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ec.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var wc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function jp(_,S,x){var O=_.classList;for(var k in wc)O.remove("mapboxgl-"+x+"-anchor-"+k);O.add("mapboxgl-"+x+"-anchor-"+S)}var Uc,Nd=function(_){function S(x,O){if(_.call(this),(x instanceof E.window.HTMLElement||O)&&(x=E.extend({element:x},O)),E.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=x&&x.anchor||"center",this._color=x&&x.color||"#3FB1CE",this._scale=x&&x.scale||1,this._draggable=x&&x.draggable||!1,this._clickTolerance=x&&x.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=x&&x.rotation||0,this._rotationAlignment=x&&x.rotationAlignment||"auto",this._pitchAlignment=x&&x.pitchAlignment&&x.pitchAlignment!=="auto"?x.pitchAlignment:this._rotationAlignment,x&&x.element)this._element=x.element,this._offset=E.Point.convert(x&&x.offset||[0,0]);else{this._defaultMarker=!0,this._element=ne.create("div"),this._element.setAttribute("aria-label","Map marker");var k=ne.createNS("http://www.w3.org/2000/svg","svg");k.setAttributeNS(null,"display","block"),k.setAttributeNS(null,"height","41px"),k.setAttributeNS(null,"width","27px"),k.setAttributeNS(null,"viewBox","0 0 27 41");var Z=ne.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"stroke","none"),Z.setAttributeNS(null,"stroke-width","1"),Z.setAttributeNS(null,"fill","none"),Z.setAttributeNS(null,"fill-rule","evenodd");var J=ne.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill-rule","nonzero");var ge=ne.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ge.setAttributeNS(null,"fill","#000000");for(var We=0,ht=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];We<ht.length;We+=1){var Ut=ht[We],Ht=ne.createNS("http://www.w3.org/2000/svg","ellipse");Ht.setAttributeNS(null,"opacity","0.04"),Ht.setAttributeNS(null,"cx","10.5"),Ht.setAttributeNS(null,"cy","5.80029008"),Ht.setAttributeNS(null,"rx",Ut.rx),Ht.setAttributeNS(null,"ry",Ut.ry),ge.appendChild(Ht)}var Xt=ne.createNS("http://www.w3.org/2000/svg","g");Xt.setAttributeNS(null,"fill",this._color);var bn=ne.createNS("http://www.w3.org/2000/svg","path");bn.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Xt.appendChild(bn);var mn=ne.createNS("http://www.w3.org/2000/svg","g");mn.setAttributeNS(null,"opacity","0.25"),mn.setAttributeNS(null,"fill","#000000");var zn=ne.createNS("http://www.w3.org/2000/svg","path");zn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),mn.appendChild(zn);var an=ne.createNS("http://www.w3.org/2000/svg","g");an.setAttributeNS(null,"transform","translate(6.0, 7.0)"),an.setAttributeNS(null,"fill","#FFFFFF");var kn=ne.createNS("http://www.w3.org/2000/svg","g");kn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var er=ne.createNS("http://www.w3.org/2000/svg","circle");er.setAttributeNS(null,"fill","#000000"),er.setAttributeNS(null,"opacity","0.25"),er.setAttributeNS(null,"cx","5.5"),er.setAttributeNS(null,"cy","5.5"),er.setAttributeNS(null,"r","5.4999962");var vr=ne.createNS("http://www.w3.org/2000/svg","circle");vr.setAttributeNS(null,"fill","#FFFFFF"),vr.setAttributeNS(null,"cx","5.5"),vr.setAttributeNS(null,"cy","5.5"),vr.setAttributeNS(null,"r","5.4999962"),kn.appendChild(er),kn.appendChild(vr),J.appendChild(ge),J.appendChild(Xt),J.appendChild(mn),J.appendChild(an),J.appendChild(kn),k.appendChild(J),k.setAttributeNS(null,"height",41*this._scale+"px"),k.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(k),this._offset=E.Point.convert(x&&x.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Mr){Mr.preventDefault()}),this._element.addEventListener("mousedown",function(Mr){Mr.preventDefault()}),jp(this._element,this._anchor,"marker"),this._popup=null}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this.remove(),this._map=x,x.getCanvasContainer().appendChild(this._element),x.on("move",this._update),x.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},S.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),ne.remove(this._element),this._popup&&this._popup.remove(),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},S.prototype.getElement=function(){return this._element},S.prototype.setPopup=function(x){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),x){if(!("offset"in x.options)){var O=Math.sqrt(Math.pow(13.5,2)/2);x.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[O,-1*(24.6+O)],"bottom-right":[-O,-1*(24.6+O)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=x,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},S.prototype._onKeyPress=function(x){var O=x.code,k=x.charCode||x.keyCode;O!=="Space"&&O!=="Enter"&&k!==32&&k!==13||this.togglePopup()},S.prototype._onMapClick=function(x){var O=x.originalEvent.target,k=this._element;this._popup&&(O===k||k.contains(O))&&this.togglePopup()},S.prototype.getPopup=function(){return this._popup},S.prototype.togglePopup=function(){var x=this._popup;return x?(x.isOpen()?x.remove():x.addTo(this._map),this):this},S.prototype._update=function(x){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=hp(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var O="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?O="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(O="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k="rotateX("+this._map.getPitch()+"deg)"),x&&x.type!=="moveend"||(this._pos=this._pos.round()),ne.setTransform(this._element,wc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+k+" "+O)}},S.prototype.getOffset=function(){return this._offset},S.prototype.setOffset=function(x){return this._offset=E.Point.convert(x),this._update(),this},S.prototype._onMove=function(x){if(!this._isDragging){var O=this._clickTolerance||this._map._clickTolerance;this._isDragging=x.point.dist(this._pointerdownPos)>=O}this._isDragging&&(this._pos=x.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new E.Event("dragstart"))),this.fire(new E.Event("drag")))},S.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new E.Event("dragend")),this._state="inactive"},S.prototype._addDragHandler=function(x){this._element.contains(x.originalEvent.target)&&(x.preventDefault(),this._positionDelta=x.point.sub(this._pos).add(this._offset),this._pointerdownPos=x.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},S.prototype.setDraggable=function(x){return this._draggable=!!x,this._map&&(x?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},S.prototype.isDraggable=function(){return this._draggable},S.prototype.setRotation=function(x){return this._rotation=x||0,this._update(),this},S.prototype.getRotation=function(){return this._rotation},S.prototype.setRotationAlignment=function(x){return this._rotationAlignment=x||"auto",this._update(),this},S.prototype.getRotationAlignment=function(){return this._rotationAlignment},S.prototype.setPitchAlignment=function(x){return this._pitchAlignment=x&&x!=="auto"?x:this._rotationAlignment,this._update(),this},S.prototype.getPitchAlignment=function(){return this._pitchAlignment},S}(E.Evented),S0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Rh=0,$h=!1,T0=function(_){function S(x){_.call(this),this.options=E.extend({},S0,x),E.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){var O;return this._map=x,this._container=ne.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),O=this._setupUI,Uc!==void 0?O(Uc):E.window.navigator.permissions!==void 0?E.window.navigator.permissions.query({name:"geolocation"}).then(function(k){O(Uc=k.state!=="denied")}):O(Uc=!!E.window.navigator.geolocation),this._container},S.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),ne.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Rh=0,$h=!1},S.prototype._isOutOfMapMaxBounds=function(x){var O=this._map.getMaxBounds(),k=x.coords;return O&&(k.longitude<O.getWest()||k.longitude>O.getEast()||k.latitude<O.getSouth()||k.latitude>O.getNorth())},S.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},S.prototype._onSuccess=function(x){if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new E.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(x),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("geolocate",x)),this._finish()}},S.prototype._updateCamera=function(x){var O=new E.LngLat(x.coords.longitude,x.coords.latitude),k=x.coords.accuracy,Z=this._map.getBearing(),J=E.extend({bearing:Z},this.options.fitBoundsOptions);this._map.fitBounds(O.toBounds(k),J,{geolocateSource:!0})},S.prototype._updateMarker=function(x){if(x){var O=new E.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(O).addTo(this._map),this._userLocationDotMarker.setLngLat(O).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},S.prototype._updateCircleRadius=function(){var x=this._map._container.clientHeight/2,O=this._map.unproject([0,x]),k=this._map.unproject([1,x]),Z=O.distanceTo(k),J=Math.ceil(2*this._accuracy/Z);this._circleElement.style.width=J+"px",this._circleElement.style.height=J+"px"},S.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},S.prototype._onError=function(x){if(this._map){if(this.options.trackUserLocation)if(x.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var O=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=O,this._geolocateButton.setAttribute("aria-label",O),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(x.code===3&&$h)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("error",x)),this._finish()}},S.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},S.prototype._setupUI=function(x){var O=this;if(this._container.addEventListener("contextmenu",function(J){return J.preventDefault()}),this._geolocateButton=ne.create("button","mapboxgl-ctrl-geolocate",this._container),ne.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",x===!1){E.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var k=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=k,this._geolocateButton.setAttribute("aria-label",k)}else{var Z=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ne.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Nd(this._dotElement),this._circleElement=ne.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(J){J.geolocateSource||O._watchState!=="ACTIVE_LOCK"||J.originalEvent&&J.originalEvent.type==="resize"||(O._watchState="BACKGROUND",O._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),O._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),O.fire(new E.Event("trackuserlocationend")))})},S.prototype.trigger=function(){if(!this._setup)return E.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new E.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Rh--,$h=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new E.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new E.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var x;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Rh>1?(x={maximumAge:6e5,timeout:0},$h=!0):(x=this.options.positionOptions,$h=!1),this._geolocationWatchID=E.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else E.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},S.prototype._clearWatch=function(){E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},S}(E.Evented),zf={maxWidth:100,unit:"metric"},Uf=function(_){this.options=E.extend({},zf,_),E.bindAll(["_onMove","setUnit"],this)};function w0(_,S,x){var O=x&&x.maxWidth||100,k=_._container.clientHeight/2,Z=_.unproject([0,k]),J=_.unproject([O,k]),ge=Z.distanceTo(J);if(x&&x.unit==="imperial"){var We=3.2808*ge;We>5280?rh(S,O,We/5280,_._getUIString("ScaleControl.Miles")):rh(S,O,We,_._getUIString("ScaleControl.Feet"))}else x&&x.unit==="nautical"?rh(S,O,ge/1852,_._getUIString("ScaleControl.NauticalMiles")):ge>=1e3?rh(S,O,ge/1e3,_._getUIString("ScaleControl.Kilometers")):rh(S,O,ge,_._getUIString("ScaleControl.Meters"))}function rh(_,S,x,O){var k,Z,J,ge=(k=x,(Z=Math.pow(10,(""+Math.floor(k)).length-1))*(J=(J=k/Z)>=10?10:J>=5?5:J>=3?3:J>=2?2:J>=1?1:function(We){var ht=Math.pow(10,Math.ceil(-Math.log(We)/Math.LN10));return Math.round(We*ht)/ht}(J)));_.style.width=S*(ge/x)+"px",_.innerHTML=ge+"&nbsp;"+O}Uf.prototype.getDefaultPosition=function(){return"bottom-left"},Uf.prototype._onMove=function(){w0(this._map,this._container,this.options)},Uf.prototype.onAdd=function(_){return this._map=_,this._container=ne.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Uf.prototype.onRemove=function(){ne.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Uf.prototype.setUnit=function(_){this.options.unit=_,w0(this._map,this._container,this.options)};var Tf=function(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof E.window.HTMLElement?this._container=_.container:E.warnOnce("Full screen control 'container' must be a DOM element.")),E.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in E.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in E.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in E.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in E.window.document&&(this._fullscreenchange="MSFullscreenChange")};Tf.prototype.onAdd=function(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=ne.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",E.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Tf.prototype.onRemove=function(){ne.remove(this._controlContainer),this._map=null,E.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Tf.prototype._checkFullscreenSupport=function(){return!!(E.window.document.fullscreenEnabled||E.window.document.mozFullScreenEnabled||E.window.document.msFullscreenEnabled||E.window.document.webkitFullscreenEnabled)},Tf.prototype._setupUI=function(){var _=this._fullscreenButton=ne.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ne.create("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden",!0),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),E.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Tf.prototype._updateTitle=function(){var _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_},Tf.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Tf.prototype._isFullscreen=function(){return this._fullscreen},Tf.prototype._changeIcon=function(){(E.window.document.fullscreenElement||E.window.document.mozFullScreenElement||E.window.document.webkitFullscreenElement||E.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Tf.prototype._onClickFullscreen=function(){this._isFullscreen()?E.window.document.exitFullscreen?E.window.document.exitFullscreen():E.window.document.mozCancelFullScreen?E.window.document.mozCancelFullScreen():E.window.document.msExitFullscreen?E.window.document.msExitFullscreen():E.window.document.webkitCancelFullScreen&&E.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ov={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},jf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Yh=function(_){function S(x){_.call(this),this.options=E.extend(Object.create(ov),x),E.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new E.Event("open")),this},S.prototype.isOpen=function(){return!!this._map},S.prototype.remove=function(){return this._content&&ne.remove(this._content),this._container&&(ne.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new E.Event("close")),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},S.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},S.prototype.getElement=function(){return this._container},S.prototype.setText=function(x){return this.setDOMContent(E.window.document.createTextNode(x))},S.prototype.setHTML=function(x){var O,k=E.window.document.createDocumentFragment(),Z=E.window.document.createElement("body");for(Z.innerHTML=x;O=Z.firstChild;)k.appendChild(O);return this.setDOMContent(k)},S.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},S.prototype.setMaxWidth=function(x){return this.options.maxWidth=x,this._update(),this},S.prototype.setDOMContent=function(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=ne.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this},S.prototype.addClassName=function(x){this._container&&this._container.classList.add(x)},S.prototype.removeClassName=function(x){this._container&&this._container.classList.remove(x)},S.prototype.setOffset=function(x){return this.options.offset=x,this._update(),this},S.prototype.toggleClassName=function(x){if(this._container)return this._container.classList.toggle(x)},S.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=ne.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},S.prototype._onMouseUp=function(x){this._update(x.point)},S.prototype._onMouseMove=function(x){this._update(x.point)},S.prototype._onDrag=function(x){this._update(x.point)},S.prototype._update=function(x){var O=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=ne.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=ne.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ht){return O._container.classList.add(Ht)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=hp(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||x)){var k=this._pos=this._trackPointer&&x?x:this._map.project(this._lngLat),Z=this.options.anchor,J=function Ht(Xt){if(Xt){if(typeof Xt=="number"){var bn=Math.round(Math.sqrt(.5*Math.pow(Xt,2)));return{center:new E.Point(0,0),top:new E.Point(0,Xt),"top-left":new E.Point(bn,bn),"top-right":new E.Point(-bn,bn),bottom:new E.Point(0,-Xt),"bottom-left":new E.Point(bn,-bn),"bottom-right":new E.Point(-bn,-bn),left:new E.Point(Xt,0),right:new E.Point(-Xt,0)}}if(Xt instanceof E.Point||Array.isArray(Xt)){var mn=E.Point.convert(Xt);return{center:mn,top:mn,"top-left":mn,"top-right":mn,bottom:mn,"bottom-left":mn,"bottom-right":mn,left:mn,right:mn}}return{center:E.Point.convert(Xt.center||[0,0]),top:E.Point.convert(Xt.top||[0,0]),"top-left":E.Point.convert(Xt["top-left"]||[0,0]),"top-right":E.Point.convert(Xt["top-right"]||[0,0]),bottom:E.Point.convert(Xt.bottom||[0,0]),"bottom-left":E.Point.convert(Xt["bottom-left"]||[0,0]),"bottom-right":E.Point.convert(Xt["bottom-right"]||[0,0]),left:E.Point.convert(Xt.left||[0,0]),right:E.Point.convert(Xt.right||[0,0])}}return Ht(new E.Point(0,0))}(this.options.offset);if(!Z){var ge,We=this._container.offsetWidth,ht=this._container.offsetHeight;ge=k.y+J.bottom.y<ht?["top"]:k.y>this._map.transform.height-ht?["bottom"]:[],k.x<We/2?ge.push("left"):k.x>this._map.transform.width-We/2&&ge.push("right"),Z=ge.length===0?"bottom":ge.join("-")}var Ut=k.add(J[Z]).round();ne.setTransform(this._container,wc[Z]+" translate("+Ut.x+"px,"+Ut.y+"px)"),jp(this._container,Z,"popup")}},S.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var x=this._container.querySelector(jf);x&&x.focus()}},S.prototype._onClose=function(){this.remove()},S}(E.Evented),A0={version:E.version,supported:he,setRTLTextPlugin:E.setRTLTextPlugin,getRTLTextPluginStatus:E.getRTLTextPluginStatus,Map:E0,NavigationControl:Ch,GeolocateControl:T0,AttributionControl:Qu,ScaleControl:Uf,FullscreenControl:Tf,Popup:Yh,Marker:Nd,Style:vu,LngLat:E.LngLat,LngLatBounds:E.LngLatBounds,Point:E.Point,MercatorCoordinate:E.MercatorCoordinate,Evented:E.Evented,config:E.config,prewarm:function(){Sr().acquire(pr)},clearPrewarmedResources:function(){var _=gi;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(pr),gi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return E.config.ACCESS_TOKEN},set accessToken(_){E.config.ACCESS_TOKEN=_},get baseApiUrl(){return E.config.API_URL},set baseApiUrl(_){E.config.API_URL=_},get workerCount(){return zr.workerCount},set workerCount(_){zr.workerCount=_},get maxParallelImageRequests(){return E.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){E.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage:function(_){E.clearTileCache(_)},workerUrl:""};return A0}),q})},92077:function(mt,W,D){var q,G;(function(E,he){q=he,G=typeof q=="function"?q.call(W,D,W,mt):q,G!==void 0&&(mt.exports=G)})(this,function(){var E,he,ne="2.0.6",ue={},ce={},xe={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},oe={currentLocale:xe.currentLocale,zeroFormat:xe.zeroFormat,nullFormat:xe.nullFormat,defaultFormat:xe.defaultFormat,scalePercentBy100:xe.scalePercentBy100};function Ve(re,me){this._input=re,this._value=me}return E=function(re){var me,Re,Y,le;if(E.isNumeral(re))me=re.value();else if(re===0||typeof re=="undefined")me=0;else if(re===null||he.isNaN(re))me=null;else if(typeof re=="string")if(oe.zeroFormat&&re===oe.zeroFormat)me=0;else if(oe.nullFormat&&re===oe.nullFormat||!re.replace(/[^0-9]+/g,"").length)me=null;else{for(Re in ue)if(le=typeof ue[Re].regexps.unformat=="function"?ue[Re].regexps.unformat():ue[Re].regexps.unformat,le&&re.match(le)){Y=ue[Re].unformat;break}Y=Y||E._.stringToNumber,me=Y(re)}else me=Number(re)||null;return new Ve(re,me)},E.version=ne,E.isNumeral=function(re){return re instanceof Ve},E._=he={numberToFormat:function(re,me,Re){var Y=ce[E.options.currentLocale],le=!1,K=!1,_e=0,et="",Je=1e12,Ot=1e9,dt=1e6,bt=1e3,Me="",we=!1,je,Ze,ut,Qt,De,St,Oe,it,Ke,Xe;if(re=re||0,Ze=Math.abs(re),E._.includes(me,"(")?(le=!0,me=me.replace(/[\(|\)]/g,"")):(E._.includes(me,"+")||E._.includes(me,"-"))&&(it=E._.includes(me,"+")?me.indexOf("+"):re<0?me.indexOf("-"):-1,me=me.replace(/[\+|\-]/g,"")),E._.includes(me,"a")&&(je=me.match(/a(k|m|b|t)?/),je=je?je[1]:!1,E._.includes(me," a")&&(et=" "),me=me.replace(new RegExp(et+"a[kmbt]?"),""),Ze>=Je&&!je||je==="t"?(et+=Y.abbreviations.trillion,re=re/Je):Ze<Je&&Ze>=Ot&&!je||je==="b"?(et+=Y.abbreviations.billion,re=re/Ot):Ze<Ot&&Ze>=dt&&!je||je==="m"?(et+=Y.abbreviations.million,re=re/dt):(Ze<dt&&Ze>=bt&&!je||je==="k")&&(et+=Y.abbreviations.thousand,re=re/bt)),E._.includes(me,"[.]")&&(K=!0,me=me.replace("[.]",".")),St=re.toString().split(".")[0],Oe=me.split(".")[1],Ke=me.indexOf(","),_e=(me.split(".")[0].split(",")[0].match(/0/g)||[]).length,Oe?(E._.includes(Oe,"[")?(Oe=Oe.replace("]",""),Oe=Oe.split("["),Me=E._.toFixed(re,Oe[0].length+Oe[1].length,Re,Oe[1].length)):Me=E._.toFixed(re,Oe.length,Re),St=Me.split(".")[0],E._.includes(Me,".")?Me=Y.delimiters.decimal+Me.split(".")[1]:Me="",K&&Number(Me.slice(1))===0&&(Me="")):St=E._.toFixed(re,0,Re),et&&!je&&Number(St)>=1e3&&et!==Y.abbreviations.trillion)switch(St=String(Number(St)/1e3),et){case Y.abbreviations.thousand:et=Y.abbreviations.million;break;case Y.abbreviations.million:et=Y.abbreviations.billion;break;case Y.abbreviations.billion:et=Y.abbreviations.trillion;break}if(E._.includes(St,"-")&&(St=St.slice(1),we=!0),St.length<_e)for(var Pt=_e-St.length;Pt>0;Pt--)St="0"+St;return Ke>-1&&(St=St.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+Y.delimiters.thousands)),me.indexOf(".")===0&&(St=""),Xe=St+Me+(et||""),le?Xe=(le&&we?"(":"")+Xe+(le&&we?")":""):it>=0?Xe=it===0?(we?"-":"+")+Xe:Xe+(we?"-":"+"):we&&(Xe="-"+Xe),Xe},stringToNumber:function(re){var me=ce[oe.currentLocale],Re=re,Y={thousand:3,million:6,billion:9,trillion:12},le,K,_e,et;if(oe.zeroFormat&&re===oe.zeroFormat)K=0;else if(oe.nullFormat&&re===oe.nullFormat||!re.replace(/[^0-9]+/g,"").length)K=null;else{K=1,me.delimiters.decimal!=="."&&(re=re.replace(/\./g,"").replace(me.delimiters.decimal,"."));for(le in Y)if(et=new RegExp("[^a-zA-Z]"+me.abbreviations[le]+"(?:\\)|(\\"+me.currency.symbol+")?(?:\\))?)?$"),Re.match(et)){K*=Math.pow(10,Y[le]);break}K*=(re.split("-").length+Math.min(re.split("(").length-1,re.split(")").length-1))%2?1:-1,re=re.replace(/[^0-9\.]+/g,""),K*=Number(re)}return K},isNaN:function(re){return typeof re=="number"&&isNaN(re)},includes:function(re,me){return re.indexOf(me)!==-1},insert:function(re,me,Re){return re.slice(0,Re)+me+re.slice(Re)},reduce:function(re,me){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof me!="function")throw new TypeError(me+" is not a function");var Re=Object(re),Y=Re.length>>>0,le=0,K;if(arguments.length===3)K=arguments[2];else{for(;le<Y&&!(le in Re);)le++;if(le>=Y)throw new TypeError("Reduce of empty array with no initial value");K=Re[le++]}for(;le<Y;le++)le in Re&&(K=me(K,Re[le],le,Re));return K},multiplier:function(re){var me=re.toString().split(".");return me.length<2?1:Math.pow(10,me[1].length)},correctionFactor:function(){var re=Array.prototype.slice.call(arguments);return re.reduce(function(me,Re){var Y=he.multiplier(Re);return me>Y?me:Y},1)},toFixed:function(re,me,Re,Y){var le=re.toString().split("."),K=me-(Y||0),_e,et,Je,Ot;return le.length===2?_e=Math.min(Math.max(le[1].length,K),me):_e=K,Je=Math.pow(10,_e),Ot=(Re(re+"e+"+_e)/Je).toFixed(_e),Y>me-_e&&(et=new RegExp("\\.?0{1,"+(Y-(me-_e))+"}$"),Ot=Ot.replace(et,"")),Ot}},E.options=oe,E.formats=ue,E.locales=ce,E.locale=function(re){return re&&(oe.currentLocale=re.toLowerCase()),oe.currentLocale},E.localeData=function(re){if(!re)return ce[oe.currentLocale];if(re=re.toLowerCase(),!ce[re])throw new Error("Unknown locale : "+re);return ce[re]},E.reset=function(){for(var re in xe)oe[re]=xe[re]},E.zeroFormat=function(re){oe.zeroFormat=typeof re=="string"?re:null},E.nullFormat=function(re){oe.nullFormat=typeof re=="string"?re:null},E.defaultFormat=function(re){oe.defaultFormat=typeof re=="string"?re:"0.0"},E.register=function(re,me,Re){if(me=me.toLowerCase(),this[re+"s"][me])throw new TypeError(me+" "+re+" already registered.");return this[re+"s"][me]=Re,Re},E.validate=function(re,me){var Re,Y,le,K,_e,et,Je,Ot;if(typeof re!="string"&&(re+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",re)),re=re.trim(),re.match(/^\d+$/))return!0;if(re==="")return!1;try{Je=E.localeData(me)}catch(dt){Je=E.localeData(E.locale())}return le=Je.currency.symbol,_e=Je.abbreviations,Re=Je.delimiters.decimal,Je.delimiters.thousands==="."?Y="\\.":Y=Je.delimiters.thousands,Ot=re.match(/^[^\d]+/),Ot!==null&&(re=re.substr(1),Ot[0]!==le)||(Ot=re.match(/[^\d]+$/),Ot!==null&&(re=re.slice(0,-1),Ot[0]!==_e.thousand&&Ot[0]!==_e.million&&Ot[0]!==_e.billion&&Ot[0]!==_e.trillion))?!1:(et=new RegExp(Y+"{2}"),re.match(/[^\d.,]/g)?!1:(K=re.split(Re),K.length>2?!1:K.length<2?!!K[0].match(/^\d+.*\d$/)&&!K[0].match(et):K[0].length===1?!!K[0].match(/^\d+$/)&&!K[0].match(et)&&!!K[1].match(/^\d+$/):!!K[0].match(/^\d+.*\d$/)&&!K[0].match(et)&&!!K[1].match(/^\d+$/)))},E.fn=Ve.prototype={clone:function(){return E(this)},format:function(re,me){var Re=this._value,Y=re||oe.defaultFormat,le,K,_e;if(me=me||Math.round,Re===0&&oe.zeroFormat!==null)K=oe.zeroFormat;else if(Re===null&&oe.nullFormat!==null)K=oe.nullFormat;else{for(le in ue)if(Y.match(ue[le].regexps.format)){_e=ue[le].format;break}_e=_e||E._.numberToFormat,K=_e(Re,Y,me)}return K},value:function(){return this._value},input:function(){return this._input},set:function(re){return this._value=Number(re),this},add:function(re){var me=he.correctionFactor.call(null,this._value,re);function Re(Y,le,K,_e){return Y+Math.round(me*le)}return this._value=he.reduce([this._value,re],Re,0)/me,this},subtract:function(re){var me=he.correctionFactor.call(null,this._value,re);function Re(Y,le,K,_e){return Y-Math.round(me*le)}return this._value=he.reduce([re],Re,Math.round(this._value*me))/me,this},multiply:function(re){function me(Re,Y,le,K){var _e=he.correctionFactor(Re,Y);return Math.round(Re*_e)*Math.round(Y*_e)/Math.round(_e*_e)}return this._value=he.reduce([this._value,re],me,1),this},divide:function(re){function me(Re,Y,le,K){var _e=he.correctionFactor(Re,Y);return Math.round(Re*_e)/Math.round(Y*_e)}return this._value=he.reduce([this._value,re],me),this},difference:function(re){return Math.abs(E(this._value).subtract(re).value())}},E.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(re){var me=re%10;return~~(re%100/10)===1?"th":me===1?"st":me===2?"nd":me===3?"rd":"th"},currency:{symbol:"$"}}),function(){E.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(re,me,Re){var Y=E._.includes(me," BPS")?" ":"",le;return re=re*1e4,me=me.replace(/\s?BPS/,""),le=E._.numberToFormat(re,me,Re),E._.includes(le,")")?(le=le.split(""),le.splice(-1,0,Y+"BPS"),le=le.join("")):le=le+Y+"BPS",le},unformat:function(re){return+(E._.stringToNumber(re)*1e-4).toFixed(15)}})}(),function(){var re={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},me={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},Re=re.suffixes.concat(me.suffixes.filter(function(le){return re.suffixes.indexOf(le)<0})),Y=Re.join("|");Y="("+Y.replace("B","B(?!PS)")+")",E.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(Y)},format:function(le,K,_e){var et,Je=E._.includes(K,"ib")?me:re,Ot=E._.includes(K," b")||E._.includes(K," ib")?" ":"",dt,bt,Me;for(K=K.replace(/\s?i?b/,""),dt=0;dt<=Je.suffixes.length;dt++)if(bt=Math.pow(Je.base,dt),Me=Math.pow(Je.base,dt+1),le===null||le===0||le>=bt&&le<Me){Ot+=Je.suffixes[dt],bt>0&&(le=le/bt);break}return et=E._.numberToFormat(le,K,_e),et+Ot},unformat:function(le){var K=E._.stringToNumber(le),_e,et;if(K){for(_e=re.suffixes.length-1;_e>=0;_e--){if(E._.includes(le,re.suffixes[_e])){et=Math.pow(re.base,_e);break}if(E._.includes(le,me.suffixes[_e])){et=Math.pow(me.base,_e);break}}K*=et||1}return K}})}(),function(){E.register("format","currency",{regexps:{format:/(\$)/},format:function(re,me,Re){var Y=E.locales[E.options.currentLocale],le={before:me.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:me.match(/([\+|\-|\)|\s|\$]*)$/)[0]},K,_e,et;for(me=me.replace(/\s?\$\s?/,""),K=E._.numberToFormat(re,me,Re),re>=0?(le.before=le.before.replace(/[\-\(]/,""),le.after=le.after.replace(/[\-\)]/,"")):re<0&&!E._.includes(le.before,"-")&&!E._.includes(le.before,"(")&&(le.before="-"+le.before),et=0;et<le.before.length;et++)switch(_e=le.before[et],_e){case"$":K=E._.insert(K,Y.currency.symbol,et);break;case" ":K=E._.insert(K," ",et+Y.currency.symbol.length-1);break}for(et=le.after.length-1;et>=0;et--)switch(_e=le.after[et],_e){case"$":K=et===le.after.length-1?K+Y.currency.symbol:E._.insert(K,Y.currency.symbol,-(le.after.length-(1+et)));break;case" ":K=et===le.after.length-1?K+" ":E._.insert(K," ",-(le.after.length-(1+et)+Y.currency.symbol.length-1));break}return K}})}(),function(){E.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(re,me,Re){var Y,le=typeof re=="number"&&!E._.isNaN(re)?re.toExponential():"0e+0",K=le.split("e");return me=me.replace(/e[\+|\-]{1}0/,""),Y=E._.numberToFormat(Number(K[0]),me,Re),Y+"e"+K[1]},unformat:function(re){var me=E._.includes(re,"e+")?re.split("e+"):re.split("e-"),Re=Number(me[0]),Y=Number(me[1]);Y=E._.includes(re,"e-")?Y*=-1:Y;function le(K,_e,et,Je){var Ot=E._.correctionFactor(K,_e),dt=K*Ot*(_e*Ot)/(Ot*Ot);return dt}return E._.reduce([Re,Math.pow(10,Y)],le,1)}})}(),function(){E.register("format","ordinal",{regexps:{format:/(o)/},format:function(re,me,Re){var Y=E.locales[E.options.currentLocale],le,K=E._.includes(me," o")?" ":"";return me=me.replace(/\s?o/,""),K+=Y.ordinal(re),le=E._.numberToFormat(re,me,Re),le+K}})}(),function(){E.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(re,me,Re){var Y=E._.includes(me," %")?" ":"",le;return E.options.scalePercentBy100&&(re=re*100),me=me.replace(/\s?\%/,""),le=E._.numberToFormat(re,me,Re),E._.includes(le,")")?(le=le.split(""),le.splice(-1,0,Y+"%"),le=le.join("")):le=le+Y+"%",le},unformat:function(re){var me=E._.stringToNumber(re);return E.options.scalePercentBy100?me*.01:me}})}(),function(){E.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(re,me,Re){var Y=Math.floor(re/60/60),le=Math.floor((re-Y*60*60)/60),K=Math.round(re-Y*60*60-le*60);return Y+":"+(le<10?"0"+le:le)+":"+(K<10?"0"+K:K)},unformat:function(re){var me=re.split(":"),Re=0;return me.length===3?(Re=Re+Number(me[0])*60*60,Re=Re+Number(me[1])*60,Re=Re+Number(me[2])):me.length===2&&(Re=Re+Number(me[0])*60,Re=Re+Number(me[1])),Number(Re)}})}(),E})},3614:function(mt,W,D){"use strict";mt.exports=G;var q=D(80645);function G(De){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(De)?De:new Uint8Array(De||0),this.pos=0,this.type=0,this.length=this.buf.length}G.Varint=0,G.Fixed64=1,G.Bytes=2,G.Fixed32=5;var E=65536*65536,he=1/E,ne=12,ue=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");G.prototype={destroy:function(){this.buf=null},readFields:function(De,St,Oe){for(Oe=Oe||this.length;this.pos<Oe;){var it=this.readVarint(),Ke=it>>3,Xe=this.pos;this.type=it&7,De(Ke,St,this),this.pos===Xe&&this.skip(it)}return St},readMessage:function(De,St){return this.readFields(De,St,this.readVarint()+this.pos)},readFixed32:function(){var De=Me(this.buf,this.pos);return this.pos+=4,De},readSFixed32:function(){var De=je(this.buf,this.pos);return this.pos+=4,De},readFixed64:function(){var De=Me(this.buf,this.pos)+Me(this.buf,this.pos+4)*E;return this.pos+=8,De},readSFixed64:function(){var De=Me(this.buf,this.pos)+je(this.buf,this.pos+4)*E;return this.pos+=8,De},readFloat:function(){var De=q.read(this.buf,this.pos,!0,23,4);return this.pos+=4,De},readDouble:function(){var De=q.read(this.buf,this.pos,!0,52,8);return this.pos+=8,De},readVarint:function(De){var St=this.buf,Oe,it;return it=St[this.pos++],Oe=it&127,it<128||(it=St[this.pos++],Oe|=(it&127)<<7,it<128)||(it=St[this.pos++],Oe|=(it&127)<<14,it<128)||(it=St[this.pos++],Oe|=(it&127)<<21,it<128)?Oe:(it=St[this.pos],Oe|=(it&15)<<28,ce(Oe,De,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var De=this.readVarint();return De%2===1?(De+1)/-2:De/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var De=this.readVarint()+this.pos,St=this.pos;return this.pos=De,De-St>=ne&&ue?ut(this.buf,St,De):Ze(this.buf,St,De)},readBytes:function(){var De=this.readVarint()+this.pos,St=this.buf.subarray(this.pos,De);return this.pos=De,St},readPackedVarint:function(De,St){if(this.type!==G.Bytes)return De.push(this.readVarint(St));var Oe=xe(this);for(De=De||[];this.pos<Oe;)De.push(this.readVarint(St));return De},readPackedSVarint:function(De){if(this.type!==G.Bytes)return De.push(this.readSVarint());var St=xe(this);for(De=De||[];this.pos<St;)De.push(this.readSVarint());return De},readPackedBoolean:function(De){if(this.type!==G.Bytes)return De.push(this.readBoolean());var St=xe(this);for(De=De||[];this.pos<St;)De.push(this.readBoolean());return De},readPackedFloat:function(De){if(this.type!==G.Bytes)return De.push(this.readFloat());var St=xe(this);for(De=De||[];this.pos<St;)De.push(this.readFloat());return De},readPackedDouble:function(De){if(this.type!==G.Bytes)return De.push(this.readDouble());var St=xe(this);for(De=De||[];this.pos<St;)De.push(this.readDouble());return De},readPackedFixed32:function(De){if(this.type!==G.Bytes)return De.push(this.readFixed32());var St=xe(this);for(De=De||[];this.pos<St;)De.push(this.readFixed32());return De},readPackedSFixed32:function(De){if(this.type!==G.Bytes)return De.push(this.readSFixed32());var St=xe(this);for(De=De||[];this.pos<St;)De.push(this.readSFixed32());return De},readPackedFixed64:function(De){if(this.type!==G.Bytes)return De.push(this.readFixed64());var St=xe(this);for(De=De||[];this.pos<St;)De.push(this.readFixed64());return De},readPackedSFixed64:function(De){if(this.type!==G.Bytes)return De.push(this.readSFixed64());var St=xe(this);for(De=De||[];this.pos<St;)De.push(this.readSFixed64());return De},skip:function(De){var St=De&7;if(St===G.Varint)for(;this.buf[this.pos++]>127;);else if(St===G.Bytes)this.pos=this.readVarint()+this.pos;else if(St===G.Fixed32)this.pos+=4;else if(St===G.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+St)},writeTag:function(De,St){this.writeVarint(De<<3|St)},realloc:function(De){for(var St=this.length||16;St<this.pos+De;)St*=2;if(St!==this.length){var Oe=new Uint8Array(St);Oe.set(this.buf),this.buf=Oe,this.length=St}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(De){this.realloc(4),we(this.buf,De,this.pos),this.pos+=4},writeSFixed32:function(De){this.realloc(4),we(this.buf,De,this.pos),this.pos+=4},writeFixed64:function(De){this.realloc(8),we(this.buf,De&-1,this.pos),we(this.buf,Math.floor(De*he),this.pos+4),this.pos+=8},writeSFixed64:function(De){this.realloc(8),we(this.buf,De&-1,this.pos),we(this.buf,Math.floor(De*he),this.pos+4),this.pos+=8},writeVarint:function(De){if(De=+De||0,De>268435455||De<0){Ve(De,this);return}this.realloc(4),this.buf[this.pos++]=De&127|(De>127?128:0),!(De<=127)&&(this.buf[this.pos++]=(De>>>=7)&127|(De>127?128:0),!(De<=127)&&(this.buf[this.pos++]=(De>>>=7)&127|(De>127?128:0),!(De<=127)&&(this.buf[this.pos++]=De>>>7&127)))},writeSVarint:function(De){this.writeVarint(De<0?-De*2-1:De*2)},writeBoolean:function(De){this.writeVarint(!!De)},writeString:function(De){De=String(De),this.realloc(De.length*4),this.pos++;var St=this.pos;this.pos=Qt(this.buf,De,this.pos);var Oe=this.pos-St;Oe>=128&&Re(St,Oe,this),this.pos=St-1,this.writeVarint(Oe),this.pos+=Oe},writeFloat:function(De){this.realloc(4),q.write(this.buf,De,this.pos,!0,23,4),this.pos+=4},writeDouble:function(De){this.realloc(8),q.write(this.buf,De,this.pos,!0,52,8),this.pos+=8},writeBytes:function(De){var St=De.length;this.writeVarint(St),this.realloc(St);for(var Oe=0;Oe<St;Oe++)this.buf[this.pos++]=De[Oe]},writeRawMessage:function(De,St){this.pos++;var Oe=this.pos;De(St,this);var it=this.pos-Oe;it>=128&&Re(Oe,it,this),this.pos=Oe-1,this.writeVarint(it),this.pos+=it},writeMessage:function(De,St,Oe){this.writeTag(De,G.Bytes),this.writeRawMessage(St,Oe)},writePackedVarint:function(De,St){St.length&&this.writeMessage(De,Y,St)},writePackedSVarint:function(De,St){St.length&&this.writeMessage(De,le,St)},writePackedBoolean:function(De,St){St.length&&this.writeMessage(De,et,St)},writePackedFloat:function(De,St){St.length&&this.writeMessage(De,K,St)},writePackedDouble:function(De,St){St.length&&this.writeMessage(De,_e,St)},writePackedFixed32:function(De,St){St.length&&this.writeMessage(De,Je,St)},writePackedSFixed32:function(De,St){St.length&&this.writeMessage(De,Ot,St)},writePackedFixed64:function(De,St){St.length&&this.writeMessage(De,dt,St)},writePackedSFixed64:function(De,St){St.length&&this.writeMessage(De,bt,St)},writeBytesField:function(De,St){this.writeTag(De,G.Bytes),this.writeBytes(St)},writeFixed32Field:function(De,St){this.writeTag(De,G.Fixed32),this.writeFixed32(St)},writeSFixed32Field:function(De,St){this.writeTag(De,G.Fixed32),this.writeSFixed32(St)},writeFixed64Field:function(De,St){this.writeTag(De,G.Fixed64),this.writeFixed64(St)},writeSFixed64Field:function(De,St){this.writeTag(De,G.Fixed64),this.writeSFixed64(St)},writeVarintField:function(De,St){this.writeTag(De,G.Varint),this.writeVarint(St)},writeSVarintField:function(De,St){this.writeTag(De,G.Varint),this.writeSVarint(St)},writeStringField:function(De,St){this.writeTag(De,G.Bytes),this.writeString(St)},writeFloatField:function(De,St){this.writeTag(De,G.Fixed32),this.writeFloat(St)},writeDoubleField:function(De,St){this.writeTag(De,G.Fixed64),this.writeDouble(St)},writeBooleanField:function(De,St){this.writeVarintField(De,!!St)}};function ce(De,St,Oe){var it=Oe.buf,Ke,Xe;if(Xe=it[Oe.pos++],Ke=(Xe&112)>>4,Xe<128||(Xe=it[Oe.pos++],Ke|=(Xe&127)<<3,Xe<128)||(Xe=it[Oe.pos++],Ke|=(Xe&127)<<10,Xe<128)||(Xe=it[Oe.pos++],Ke|=(Xe&127)<<17,Xe<128)||(Xe=it[Oe.pos++],Ke|=(Xe&127)<<24,Xe<128)||(Xe=it[Oe.pos++],Ke|=(Xe&1)<<31,Xe<128))return oe(De,Ke,St);throw new Error("Expected varint not more than 10 bytes")}function xe(De){return De.type===G.Bytes?De.readVarint()+De.pos:De.pos+1}function oe(De,St,Oe){return Oe?St*4294967296+(De>>>0):(St>>>0)*4294967296+(De>>>0)}function Ve(De,St){var Oe,it;if(De>=0?(Oe=De%4294967296|0,it=De/4294967296|0):(Oe=~(-De%4294967296),it=~(-De/4294967296),Oe^4294967295?Oe=Oe+1|0:(Oe=0,it=it+1|0)),De>=18446744073709552e3||De<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");St.realloc(10),re(Oe,it,St),me(it,St)}function re(De,St,Oe){Oe.buf[Oe.pos++]=De&127|128,De>>>=7,Oe.buf[Oe.pos++]=De&127|128,De>>>=7,Oe.buf[Oe.pos++]=De&127|128,De>>>=7,Oe.buf[Oe.pos++]=De&127|128,De>>>=7,Oe.buf[Oe.pos]=De&127}function me(De,St){var Oe=(De&7)<<4;St.buf[St.pos++]|=Oe|((De>>>=3)?128:0),De&&(St.buf[St.pos++]=De&127|((De>>>=7)?128:0),De&&(St.buf[St.pos++]=De&127|((De>>>=7)?128:0),De&&(St.buf[St.pos++]=De&127|((De>>>=7)?128:0),De&&(St.buf[St.pos++]=De&127|((De>>>=7)?128:0),De&&(St.buf[St.pos++]=De&127)))))}function Re(De,St,Oe){var it=St<=16383?1:St<=2097151?2:St<=268435455?3:Math.floor(Math.log(St)/(Math.LN2*7));Oe.realloc(it);for(var Ke=Oe.pos-1;Ke>=De;Ke--)Oe.buf[Ke+it]=Oe.buf[Ke]}function Y(De,St){for(var Oe=0;Oe<De.length;Oe++)St.writeVarint(De[Oe])}function le(De,St){for(var Oe=0;Oe<De.length;Oe++)St.writeSVarint(De[Oe])}function K(De,St){for(var Oe=0;Oe<De.length;Oe++)St.writeFloat(De[Oe])}function _e(De,St){for(var Oe=0;Oe<De.length;Oe++)St.writeDouble(De[Oe])}function et(De,St){for(var Oe=0;Oe<De.length;Oe++)St.writeBoolean(De[Oe])}function Je(De,St){for(var Oe=0;Oe<De.length;Oe++)St.writeFixed32(De[Oe])}function Ot(De,St){for(var Oe=0;Oe<De.length;Oe++)St.writeSFixed32(De[Oe])}function dt(De,St){for(var Oe=0;Oe<De.length;Oe++)St.writeFixed64(De[Oe])}function bt(De,St){for(var Oe=0;Oe<De.length;Oe++)St.writeSFixed64(De[Oe])}function Me(De,St){return(De[St]|De[St+1]<<8|De[St+2]<<16)+De[St+3]*16777216}function we(De,St,Oe){De[Oe]=St,De[Oe+1]=St>>>8,De[Oe+2]=St>>>16,De[Oe+3]=St>>>24}function je(De,St){return(De[St]|De[St+1]<<8|De[St+2]<<16)+(De[St+3]<<24)}function Ze(De,St,Oe){for(var it="",Ke=St;Ke<Oe;){var Xe=De[Ke],Pt=null,xt=Xe>239?4:Xe>223?3:Xe>191?2:1;if(Ke+xt>Oe)break;var Ie,Wt,hn;xt===1?Xe<128&&(Pt=Xe):xt===2?(Ie=De[Ke+1],(Ie&192)===128&&(Pt=(Xe&31)<<6|Ie&63,Pt<=127&&(Pt=null))):xt===3?(Ie=De[Ke+1],Wt=De[Ke+2],(Ie&192)===128&&(Wt&192)===128&&(Pt=(Xe&15)<<12|(Ie&63)<<6|Wt&63,(Pt<=2047||Pt>=55296&&Pt<=57343)&&(Pt=null))):xt===4&&(Ie=De[Ke+1],Wt=De[Ke+2],hn=De[Ke+3],(Ie&192)===128&&(Wt&192)===128&&(hn&192)===128&&(Pt=(Xe&15)<<18|(Ie&63)<<12|(Wt&63)<<6|hn&63,(Pt<=65535||Pt>=1114112)&&(Pt=null))),Pt===null?(Pt=65533,xt=1):Pt>65535&&(Pt-=65536,it+=String.fromCharCode(Pt>>>10&1023|55296),Pt=56320|Pt&1023),it+=String.fromCharCode(Pt),Ke+=xt}return it}function ut(De,St,Oe){return ue.decode(De.subarray(St,Oe))}function Qt(De,St,Oe){for(var it=0,Ke,Xe;it<St.length;it++){if(Ke=St.charCodeAt(it),Ke>55295&&Ke<57344)if(Xe)if(Ke<56320){De[Oe++]=239,De[Oe++]=191,De[Oe++]=189,Xe=Ke;continue}else Ke=Xe-55296<<10|Ke-56320|65536,Xe=null;else{Ke>56319||it+1===St.length?(De[Oe++]=239,De[Oe++]=191,De[Oe++]=189):Xe=Ke;continue}else Xe&&(De[Oe++]=239,De[Oe++]=191,De[Oe++]=189,Xe=null);Ke<128?De[Oe++]=Ke:(Ke<2048?De[Oe++]=Ke>>6|192:(Ke<65536?De[Oe++]=Ke>>12|224:(De[Oe++]=Ke>>18|240,De[Oe++]=Ke>>12&63|128),De[Oe++]=Ke>>6&63|128),De[Oe++]=Ke&63|128)}return Oe}},73807:function(mt){"use strict";var W=mt.exports;mt.exports.isNumber=function(D){return typeof D=="number"},mt.exports.findMin=function(D){if(D.length===0)return 1/0;for(var q=D[0],G=1;G<D.length;G++)q=Math.min(q,D[G]);return q},mt.exports.findMax=function(D){if(D.length===0)return-1/0;for(var q=D[0],G=1;G<D.length;G++)q=Math.max(q,D[G]);return q},mt.exports.findMinMulti=function(D){for(var q=W.findMin(D[0]),G=1;G<D.length;G++)q=Math.min(q,W.findMin(D[G]));return q},mt.exports.findMaxMulti=function(D){for(var q=W.findMax(D[0]),G=1;G<D.length;G++)q=Math.max(q,W.findMax(D[G]));return q},mt.exports.inside=function(D,q,G){return D<=G&&G<=q}},53843:function(mt,W,D){"use strict";var q=50,G=2,E=Math.log(2),he=mt.exports,ne=D(73807);function ue(xe){return 1-Math.abs(xe)}mt.exports.getUnifiedMinMax=function(xe,oe){return he.getUnifiedMinMaxMulti([xe],oe)},mt.exports.getUnifiedMinMaxMulti=function(xe,oe){oe=oe||{};var Ve=!1,re=!1,me=ne.isNumber(oe.width)?oe.width:G,Re=ne.isNumber(oe.size)?oe.size:q,Y=ne.isNumber(oe.min)?oe.min:(Ve=!0,ne.findMinMulti(xe)),le=ne.isNumber(oe.max)?oe.max:(re=!0,ne.findMaxMulti(xe)),K=le-Y,_e=K/(Re-1);return Ve&&(Y=Y-2*me*_e),re&&(le=le+2*me*_e),{min:Y,max:le}},mt.exports.create=function(xe,oe){if(oe=oe||{},!xe||xe.length===0)return[];var Ve=ne.isNumber(oe.size)?oe.size:q,re=ne.isNumber(oe.width)?oe.width:G,me=he.getUnifiedMinMax(xe,{size:Ve,width:re,min:oe.min,max:oe.max}),Re=me.min,Y=me.max,le=Y-Re,K=le/(Ve-1);if(le===0)return[{x:Re,y:1}];for(var _e=[],et=0;et<Ve;et++)_e.push({x:Re+et*K,y:0});var Je=function(ut){return Math.floor((ut-Re)/K)},Ot=ce(ue,re),dt=Ot[re],bt=Ot[re-1]-Ot[re-2],Me=0;xe.forEach(function(ut){var Qt=Je(ut);if(!(Qt+re<0||Qt-re>=_e.length)){var De=Math.max(Qt-re,0),St=Qt,Oe=Math.min(Qt+re,_e.length-1),it=De-(Qt-re),Ke=Qt+re-Oe,Xe=Ot[-re-1+it]||0,Pt=Ot[-re-1+Ke]||0,xt=dt/(dt-Xe-Pt);it>0&&(Me+=xt*(it-1)*bt);var Ie=Math.max(0,Qt-re+1);ne.inside(0,_e.length-1,Ie)&&(_e[Ie].y+=xt*1*bt),ne.inside(0,_e.length-1,St+1)&&(_e[St+1].y-=xt*2*bt),ne.inside(0,_e.length-1,Oe+1)&&(_e[Oe+1].y+=xt*1*bt)}});var we=Me,je=0,Ze=0;return _e.forEach(function(ut){je+=ut.y,we+=je,ut.y=we,Ze+=we}),Ze>0&&_e.forEach(function(ut){ut.y/=Ze}),_e};function ce(xe,oe){for(var Ve={},re=0,me=-oe;me<=oe;me++)re+=xe(me/oe),Ve[me]=re;return Ve}mt.exports.getExpectedValueFromPdf=function(xe){if(!(!xe||xe.length===0)){var oe=0;return xe.forEach(function(Ve){oe+=Ve.x*Ve.y}),oe}},mt.exports.getXWithLeftTailArea=function(xe,oe){if(!(!xe||xe.length===0)){for(var Ve=0,re=0,me=0;me<xe.length&&(re=me,Ve+=xe[me].y,!(Ve>=oe));me++);return xe[re].x}},mt.exports.getPerplexity=function(xe){if(!(!xe||xe.length===0)){var oe=0;return xe.forEach(function(Ve){var re=Math.log(Ve.y);isFinite(re)&&(oe+=Ve.y*re)}),oe=-oe/E,Math.pow(2,oe)}}},32676:function(mt,W,D){var q=D(34155);(function(G,E){mt.exports=E()})(this,function(){"use strict";function G(vt,Ee){var Fe={label:0,sent:function(){if(Mt[0]&1)throw Mt[1];return Mt[1]},trys:[],ops:[]},st,It,Mt,En;return En={next:Yn(0),throw:Yn(1),return:Yn(2)},typeof Symbol=="function"&&(En[Symbol.iterator]=function(){return this}),En;function Yn(qn){return function(Pe){return yr([qn,Pe])}}function yr(qn){if(st)throw new TypeError("Generator is already executing.");for(;Fe;)try{if(st=1,It&&(Mt=qn[0]&2?It.return:qn[0]?It.throw||((Mt=It.return)&&Mt.call(It),0):It.next)&&!(Mt=Mt.call(It,qn[1])).done)return Mt;switch(It=0,Mt&&(qn=[qn[0]&2,Mt.value]),qn[0]){case 0:case 1:Mt=qn;break;case 4:return Fe.label++,{value:qn[1],done:!1};case 5:Fe.label++,It=qn[1],qn=[0];continue;case 7:qn=Fe.ops.pop(),Fe.trys.pop();continue;default:if(Mt=Fe.trys,!(Mt=Mt.length>0&&Mt[Mt.length-1])&&(qn[0]===6||qn[0]===2)){Fe=0;continue}if(qn[0]===3&&(!Mt||qn[1]>Mt[0]&&qn[1]<Mt[3])){Fe.label=qn[1];break}if(qn[0]===6&&Fe.label<Mt[1]){Fe.label=Mt[1],Mt=qn;break}if(Mt&&Fe.label<Mt[2]){Fe.label=Mt[2],Fe.ops.push(qn);break}Mt[2]&&Fe.ops.pop(),Fe.trys.pop();continue}qn=Ee.call(vt,Fe)}catch(Pe){qn=[6,Pe],It=0}finally{st=Mt=0}if(qn[0]&5)throw qn[1];return{value:qn[0]?qn[1]:void 0,done:!0}}}var E=function(){function vt(Ee,Fe){this.next=null,this.key=Ee,this.data=Fe,this.left=null,this.right=null}return vt}();function he(vt,Ee){return vt>Ee?1:vt<Ee?-1:0}function ne(vt,Ee,Fe){for(var st=new E(null,null),It=st,Mt=st;;){var En=Fe(vt,Ee.key);if(En<0){if(Ee.left===null)break;if(Fe(vt,Ee.left.key)<0){var Yn=Ee.left;if(Ee.left=Yn.right,Yn.right=Ee,Ee=Yn,Ee.left===null)break}Mt.left=Ee,Mt=Ee,Ee=Ee.left}else if(En>0){if(Ee.right===null)break;if(Fe(vt,Ee.right.key)>0){var Yn=Ee.right;if(Ee.right=Yn.left,Yn.left=Ee,Ee=Yn,Ee.right===null)break}It.right=Ee,It=Ee,Ee=Ee.right}else break}return It.right=Ee.left,Mt.left=Ee.right,Ee.left=st.right,Ee.right=st.left,Ee}function ue(vt,Ee,Fe,st){var It=new E(vt,Ee);if(Fe===null)return It.left=It.right=null,It;Fe=ne(vt,Fe,st);var Mt=st(vt,Fe.key);return Mt<0?(It.left=Fe.left,It.right=Fe,Fe.left=null):Mt>=0&&(It.right=Fe.right,It.left=Fe,Fe.right=null),It}function ce(vt,Ee,Fe){var st=null,It=null;if(Ee){Ee=ne(vt,Ee,Fe);var Mt=Fe(Ee.key,vt);Mt===0?(st=Ee.left,It=Ee.right):Mt<0?(It=Ee.right,Ee.right=null,st=Ee):(st=Ee.left,Ee.left=null,It=Ee)}return{left:st,right:It}}function xe(vt,Ee,Fe){return Ee===null?vt:(vt===null||(Ee=ne(vt.key,Ee,Fe),Ee.left=vt),Ee)}function oe(vt,Ee,Fe,st,It){if(vt){st(""+Ee+(Fe?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+It(vt)+`
`);var Mt=Ee+(Fe?"    ":"\u2502   ");vt.left&&oe(vt.left,Mt,!1,st,It),vt.right&&oe(vt.right,Mt,!0,st,It)}}var Ve=function(){function vt(Ee){Ee===void 0&&(Ee=he),this._root=null,this._size=0,this._comparator=Ee}return vt.prototype.insert=function(Ee,Fe){return this._size++,this._root=ue(Ee,Fe,this._root,this._comparator)},vt.prototype.add=function(Ee,Fe){var st=new E(Ee,Fe);this._root===null&&(st.left=st.right=null,this._size++,this._root=st);var It=this._comparator,Mt=ne(Ee,this._root,It),En=It(Ee,Mt.key);return En===0?this._root=Mt:(En<0?(st.left=Mt.left,st.right=Mt,Mt.left=null):En>0&&(st.right=Mt.right,st.left=Mt,Mt.right=null),this._size++,this._root=st),this._root},vt.prototype.remove=function(Ee){this._root=this._remove(Ee,this._root,this._comparator)},vt.prototype._remove=function(Ee,Fe,st){var It;if(Fe===null)return null;Fe=ne(Ee,Fe,st);var Mt=st(Ee,Fe.key);return Mt===0?(Fe.left===null?It=Fe.right:(It=ne(Ee,Fe.left,st),It.right=Fe.right),this._size--,It):Fe},vt.prototype.pop=function(){var Ee=this._root;if(Ee){for(;Ee.left;)Ee=Ee.left;return this._root=ne(Ee.key,this._root,this._comparator),this._root=this._remove(Ee.key,this._root,this._comparator),{key:Ee.key,data:Ee.data}}return null},vt.prototype.findStatic=function(Ee){for(var Fe=this._root,st=this._comparator;Fe;){var It=st(Ee,Fe.key);if(It===0)return Fe;It<0?Fe=Fe.left:Fe=Fe.right}return null},vt.prototype.find=function(Ee){return this._root&&(this._root=ne(Ee,this._root,this._comparator),this._comparator(Ee,this._root.key)!==0)?null:this._root},vt.prototype.contains=function(Ee){for(var Fe=this._root,st=this._comparator;Fe;){var It=st(Ee,Fe.key);if(It===0)return!0;It<0?Fe=Fe.left:Fe=Fe.right}return!1},vt.prototype.forEach=function(Ee,Fe){for(var st=this._root,It=[],Mt=!1;!Mt;)st!==null?(It.push(st),st=st.left):It.length!==0?(st=It.pop(),Ee.call(Fe,st),st=st.right):Mt=!0;return this},vt.prototype.range=function(Ee,Fe,st,It){for(var Mt=[],En=this._comparator,Yn=this._root,yr;Mt.length!==0||Yn;)if(Yn)Mt.push(Yn),Yn=Yn.left;else{if(Yn=Mt.pop(),yr=En(Yn.key,Fe),yr>0)break;if(En(Yn.key,Ee)>=0&&st.call(It,Yn))return this;Yn=Yn.right}return this},vt.prototype.keys=function(){var Ee=[];return this.forEach(function(Fe){var st=Fe.key;return Ee.push(st)}),Ee},vt.prototype.values=function(){var Ee=[];return this.forEach(function(Fe){var st=Fe.data;return Ee.push(st)}),Ee},vt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},vt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},vt.prototype.minNode=function(Ee){if(Ee===void 0&&(Ee=this._root),Ee)for(;Ee.left;)Ee=Ee.left;return Ee},vt.prototype.maxNode=function(Ee){if(Ee===void 0&&(Ee=this._root),Ee)for(;Ee.right;)Ee=Ee.right;return Ee},vt.prototype.at=function(Ee){for(var Fe=this._root,st=!1,It=0,Mt=[];!st;)if(Fe)Mt.push(Fe),Fe=Fe.left;else if(Mt.length>0){if(Fe=Mt.pop(),It===Ee)return Fe;It++,Fe=Fe.right}else st=!0;return null},vt.prototype.next=function(Ee){var Fe=this._root,st=null;if(Ee.right){for(st=Ee.right;st.left;)st=st.left;return st}for(var It=this._comparator;Fe;){var Mt=It(Ee.key,Fe.key);if(Mt===0)break;Mt<0?(st=Fe,Fe=Fe.left):Fe=Fe.right}return st},vt.prototype.prev=function(Ee){var Fe=this._root,st=null;if(Ee.left!==null){for(st=Ee.left;st.right;)st=st.right;return st}for(var It=this._comparator;Fe;){var Mt=It(Ee.key,Fe.key);if(Mt===0)break;Mt<0?Fe=Fe.left:(st=Fe,Fe=Fe.right)}return st},vt.prototype.clear=function(){return this._root=null,this._size=0,this},vt.prototype.toList=function(){return Re(this._root)},vt.prototype.load=function(Ee,Fe,st){Fe===void 0&&(Fe=[]),st===void 0&&(st=!1);var It=Ee.length,Mt=this._comparator;if(st&&K(Ee,Fe,0,It-1,Mt),this._root===null)this._root=re(Ee,Fe,0,It),this._size=It;else{var En=le(this.toList(),me(Ee,Fe),Mt);It=this._size+It,this._root=Y({head:En},0,It)}return this},vt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(vt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(vt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),vt.prototype.toString=function(Ee){Ee===void 0&&(Ee=function(st){return String(st.key)});var Fe=[];return oe(this._root,"",!0,function(st){return Fe.push(st)},Ee),Fe.join("")},vt.prototype.update=function(Ee,Fe,st){var It=this._comparator,Mt=ce(Ee,this._root,It),En=Mt.left,Yn=Mt.right;It(Ee,Fe)<0?Yn=ue(Fe,st,Yn,It):En=ue(Fe,st,En,It),this._root=xe(En,Yn,It)},vt.prototype.split=function(Ee){return ce(Ee,this._root,this._comparator)},vt.prototype[Symbol.iterator]=function(){var Ee,Fe,st;return G(this,function(It){switch(It.label){case 0:Ee=this._root,Fe=[],st=!1,It.label=1;case 1:return st?[3,6]:Ee===null?[3,2]:(Fe.push(Ee),Ee=Ee.left,[3,5]);case 2:return Fe.length===0?[3,4]:(Ee=Fe.pop(),[4,Ee]);case 3:return It.sent(),Ee=Ee.right,[3,5];case 4:st=!0,It.label=5;case 5:return[3,1];case 6:return[2]}})},vt}();function re(vt,Ee,Fe,st){var It=st-Fe;if(It>0){var Mt=Fe+Math.floor(It/2),En=vt[Mt],Yn=Ee[Mt],yr=new E(En,Yn);return yr.left=re(vt,Ee,Fe,Mt),yr.right=re(vt,Ee,Mt+1,st),yr}return null}function me(vt,Ee){for(var Fe=new E(null,null),st=Fe,It=0;It<vt.length;It++)st=st.next=new E(vt[It],Ee[It]);return st.next=null,Fe.next}function Re(vt){for(var Ee=vt,Fe=[],st=!1,It=new E(null,null),Mt=It;!st;)Ee?(Fe.push(Ee),Ee=Ee.left):Fe.length>0?(Ee=Mt=Mt.next=Fe.pop(),Ee=Ee.right):st=!0;return Mt.next=null,It.next}function Y(vt,Ee,Fe){var st=Fe-Ee;if(st>0){var It=Ee+Math.floor(st/2),Mt=Y(vt,Ee,It),En=vt.head;return En.left=Mt,vt.head=vt.head.next,En.right=Y(vt,It+1,Fe),En}return null}function le(vt,Ee,Fe){for(var st=new E(null,null),It=st,Mt=vt,En=Ee;Mt!==null&&En!==null;)Fe(Mt.key,En.key)<0?(It.next=Mt,Mt=Mt.next):(It.next=En,En=En.next),It=It.next;return Mt!==null?It.next=Mt:En!==null&&(It.next=En),st.next}function K(vt,Ee,Fe,st,It){if(!(Fe>=st)){for(var Mt=vt[Fe+st>>1],En=Fe-1,Yn=st+1;;){do En++;while(It(vt[En],Mt)<0);do Yn--;while(It(vt[Yn],Mt)>0);if(En>=Yn)break;var yr=vt[En];vt[En]=vt[Yn],vt[Yn]=yr,yr=Ee[En],Ee[En]=Ee[Yn],Ee[Yn]=yr}K(vt,Ee,Fe,Yn,It),K(vt,Ee,Yn+1,st,It)}}const _e=(vt,Ee)=>vt.ll.x<=Ee.x&&Ee.x<=vt.ur.x&&vt.ll.y<=Ee.y&&Ee.y<=vt.ur.y,et=(vt,Ee)=>{if(Ee.ur.x<vt.ll.x||vt.ur.x<Ee.ll.x||Ee.ur.y<vt.ll.y||vt.ur.y<Ee.ll.y)return null;const Fe=vt.ll.x<Ee.ll.x?Ee.ll.x:vt.ll.x,st=vt.ur.x<Ee.ur.x?vt.ur.x:Ee.ur.x,It=vt.ll.y<Ee.ll.y?Ee.ll.y:vt.ll.y,Mt=vt.ur.y<Ee.ur.y?vt.ur.y:Ee.ur.y;return{ll:{x:Fe,y:It},ur:{x:st,y:Mt}}};let Je=Number.EPSILON;Je===void 0&&(Je=Math.pow(2,-52));const Ot=Je*Je,dt=(vt,Ee)=>{if(-Je<vt&&vt<Je&&-Je<Ee&&Ee<Je)return 0;const Fe=vt-Ee;return Fe*Fe<Ot*vt*Ee?0:vt<Ee?-1:1};class bt{constructor(){this.reset()}reset(){this.xRounder=new Me,this.yRounder=new Me}round(Ee,Fe){return{x:this.xRounder.round(Ee),y:this.yRounder.round(Fe)}}}class Me{constructor(){this.tree=new Ve,this.round(0)}round(Ee){const Fe=this.tree.add(Ee),st=this.tree.prev(Fe);if(st!==null&&dt(Fe.key,st.key)===0)return this.tree.remove(Ee),st.key;const It=this.tree.next(Fe);return It!==null&&dt(Fe.key,It.key)===0?(this.tree.remove(Ee),It.key):Ee}}const we=new bt,je=11102230246251565e-32,Ze=134217729,ut=(3+8*je)*je;function Qt(vt,Ee,Fe,st,It){let Mt,En,Yn,yr,qn=Ee[0],Pe=st[0],Te=0,Ue=0;Pe>qn==Pe>-qn?(Mt=qn,qn=Ee[++Te]):(Mt=Pe,Pe=st[++Ue]);let ot=0;if(Te<vt&&Ue<Fe)for(Pe>qn==Pe>-qn?(En=qn+Mt,Yn=Mt-(En-qn),qn=Ee[++Te]):(En=Pe+Mt,Yn=Mt-(En-Pe),Pe=st[++Ue]),Mt=En,Yn!==0&&(It[ot++]=Yn);Te<vt&&Ue<Fe;)Pe>qn==Pe>-qn?(En=Mt+qn,yr=En-Mt,Yn=Mt-(En-yr)+(qn-yr),qn=Ee[++Te]):(En=Mt+Pe,yr=En-Mt,Yn=Mt-(En-yr)+(Pe-yr),Pe=st[++Ue]),Mt=En,Yn!==0&&(It[ot++]=Yn);for(;Te<vt;)En=Mt+qn,yr=En-Mt,Yn=Mt-(En-yr)+(qn-yr),qn=Ee[++Te],Mt=En,Yn!==0&&(It[ot++]=Yn);for(;Ue<Fe;)En=Mt+Pe,yr=En-Mt,Yn=Mt-(En-yr)+(Pe-yr),Pe=st[++Ue],Mt=En,Yn!==0&&(It[ot++]=Yn);return(Mt!==0||ot===0)&&(It[ot++]=Mt),ot}function De(vt,Ee){let Fe=Ee[0];for(let st=1;st<vt;st++)Fe+=Ee[st];return Fe}function St(vt){return new Float64Array(vt)}const Oe=(3+16*je)*je,it=(2+12*je)*je,Ke=(9+64*je)*je*je,Xe=St(4),Pt=St(8),xt=St(12),Ie=St(16),Wt=St(4);function hn(vt,Ee,Fe,st,It,Mt,En){let Yn,yr,qn,Pe,Te,Ue,ot,wt,$t,vn,Et,Kt,Qn,_r,Vr,pr,zr,gi;const wi=vt-It,Sr=Fe-It,Ti=Ee-Mt,hi=st-Mt;_r=wi*hi,Ue=Ze*wi,ot=Ue-(Ue-wi),wt=wi-ot,Ue=Ze*hi,$t=Ue-(Ue-hi),vn=hi-$t,Vr=wt*vn-(_r-ot*$t-wt*$t-ot*vn),pr=Ti*Sr,Ue=Ze*Ti,ot=Ue-(Ue-Ti),wt=Ti-ot,Ue=Ze*Sr,$t=Ue-(Ue-Sr),vn=Sr-$t,zr=wt*vn-(pr-ot*$t-wt*$t-ot*vn),Et=Vr-zr,Te=Vr-Et,Xe[0]=Vr-(Et+Te)+(Te-zr),Kt=_r+Et,Te=Kt-_r,Qn=_r-(Kt-Te)+(Et-Te),Et=Qn-pr,Te=Qn-Et,Xe[1]=Qn-(Et+Te)+(Te-pr),gi=Kt+Et,Te=gi-Kt,Xe[2]=Kt-(gi-Te)+(Et-Te),Xe[3]=gi;let ai=De(4,Xe),Mo=it*En;if(ai>=Mo||-ai>=Mo||(Te=vt-wi,Yn=vt-(wi+Te)+(Te-It),Te=Fe-Sr,qn=Fe-(Sr+Te)+(Te-It),Te=Ee-Ti,yr=Ee-(Ti+Te)+(Te-Mt),Te=st-hi,Pe=st-(hi+Te)+(Te-Mt),Yn===0&&yr===0&&qn===0&&Pe===0)||(Mo=Ke*En+ut*Math.abs(ai),ai+=wi*Pe+hi*Yn-(Ti*qn+Sr*yr),ai>=Mo||-ai>=Mo))return ai;_r=Yn*hi,Ue=Ze*Yn,ot=Ue-(Ue-Yn),wt=Yn-ot,Ue=Ze*hi,$t=Ue-(Ue-hi),vn=hi-$t,Vr=wt*vn-(_r-ot*$t-wt*$t-ot*vn),pr=yr*Sr,Ue=Ze*yr,ot=Ue-(Ue-yr),wt=yr-ot,Ue=Ze*Sr,$t=Ue-(Ue-Sr),vn=Sr-$t,zr=wt*vn-(pr-ot*$t-wt*$t-ot*vn),Et=Vr-zr,Te=Vr-Et,Wt[0]=Vr-(Et+Te)+(Te-zr),Kt=_r+Et,Te=Kt-_r,Qn=_r-(Kt-Te)+(Et-Te),Et=Qn-pr,Te=Qn-Et,Wt[1]=Qn-(Et+Te)+(Te-pr),gi=Kt+Et,Te=gi-Kt,Wt[2]=Kt-(gi-Te)+(Et-Te),Wt[3]=gi;const xi=Qt(4,Xe,4,Wt,Pt);_r=wi*Pe,Ue=Ze*wi,ot=Ue-(Ue-wi),wt=wi-ot,Ue=Ze*Pe,$t=Ue-(Ue-Pe),vn=Pe-$t,Vr=wt*vn-(_r-ot*$t-wt*$t-ot*vn),pr=Ti*qn,Ue=Ze*Ti,ot=Ue-(Ue-Ti),wt=Ti-ot,Ue=Ze*qn,$t=Ue-(Ue-qn),vn=qn-$t,zr=wt*vn-(pr-ot*$t-wt*$t-ot*vn),Et=Vr-zr,Te=Vr-Et,Wt[0]=Vr-(Et+Te)+(Te-zr),Kt=_r+Et,Te=Kt-_r,Qn=_r-(Kt-Te)+(Et-Te),Et=Qn-pr,Te=Qn-Et,Wt[1]=Qn-(Et+Te)+(Te-pr),gi=Kt+Et,Te=gi-Kt,Wt[2]=Kt-(gi-Te)+(Et-Te),Wt[3]=gi;const ea=Qt(xi,Pt,4,Wt,xt);_r=Yn*Pe,Ue=Ze*Yn,ot=Ue-(Ue-Yn),wt=Yn-ot,Ue=Ze*Pe,$t=Ue-(Ue-Pe),vn=Pe-$t,Vr=wt*vn-(_r-ot*$t-wt*$t-ot*vn),pr=yr*qn,Ue=Ze*yr,ot=Ue-(Ue-yr),wt=yr-ot,Ue=Ze*qn,$t=Ue-(Ue-qn),vn=qn-$t,zr=wt*vn-(pr-ot*$t-wt*$t-ot*vn),Et=Vr-zr,Te=Vr-Et,Wt[0]=Vr-(Et+Te)+(Te-zr),Kt=_r+Et,Te=Kt-_r,Qn=_r-(Kt-Te)+(Et-Te),Et=Qn-pr,Te=Qn-Et,Wt[1]=Qn-(Et+Te)+(Te-pr),gi=Kt+Et,Te=gi-Kt,Wt[2]=Kt-(gi-Te)+(Et-Te),Wt[3]=gi;const va=Qt(ea,xt,4,Wt,Ie);return Ie[va-1]}function Pn(vt,Ee,Fe,st,It,Mt){const En=(Ee-Mt)*(Fe-It),Yn=(vt-It)*(st-Mt),yr=En-Yn,qn=Math.abs(En+Yn);return Math.abs(yr)>=Oe*qn?yr:-hn(vt,Ee,Fe,st,It,Mt,qn)}const $n=(vt,Ee)=>vt.x*Ee.y-vt.y*Ee.x,nr=(vt,Ee)=>vt.x*Ee.x+vt.y*Ee.y,Ft=(vt,Ee,Fe)=>{const st=Pn(vt.x,vt.y,Ee.x,Ee.y,Fe.x,Fe.y);return st>0?-1:st<0?1:0},Jt=vt=>Math.sqrt(nr(vt,vt)),ln=(vt,Ee,Fe)=>{const st={x:Ee.x-vt.x,y:Ee.y-vt.y},It={x:Fe.x-vt.x,y:Fe.y-vt.y};return $n(It,st)/Jt(It)/Jt(st)},Un=(vt,Ee,Fe)=>{const st={x:Ee.x-vt.x,y:Ee.y-vt.y},It={x:Fe.x-vt.x,y:Fe.y-vt.y};return nr(It,st)/Jt(It)/Jt(st)},on=(vt,Ee,Fe)=>Ee.y===0?null:{x:vt.x+Ee.x/Ee.y*(Fe-vt.y),y:Fe},zt=(vt,Ee,Fe)=>Ee.x===0?null:{x:Fe,y:vt.y+Ee.y/Ee.x*(Fe-vt.x)},kt=(vt,Ee,Fe,st)=>{if(Ee.x===0)return zt(Fe,st,vt.x);if(st.x===0)return zt(vt,Ee,Fe.x);if(Ee.y===0)return on(Fe,st,vt.y);if(st.y===0)return on(vt,Ee,Fe.y);const It=$n(Ee,st);if(It==0)return null;const Mt={x:Fe.x-vt.x,y:Fe.y-vt.y},En=$n(Mt,Ee)/It,Yn=$n(Mt,st)/It,yr=vt.x+Yn*Ee.x,qn=Fe.x+En*st.x,Pe=vt.y+Yn*Ee.y,Te=Fe.y+En*st.y,Ue=(yr+qn)/2,ot=(Pe+Te)/2;return{x:Ue,y:ot}};class ke{static compare(Ee,Fe){const st=ke.comparePoints(Ee.point,Fe.point);return st!==0?st:(Ee.point!==Fe.point&&Ee.link(Fe),Ee.isLeft!==Fe.isLeft?Ee.isLeft?1:-1:Vt.compare(Ee.segment,Fe.segment))}static comparePoints(Ee,Fe){return Ee.x<Fe.x?-1:Ee.x>Fe.x?1:Ee.y<Fe.y?-1:Ee.y>Fe.y?1:0}constructor(Ee,Fe){Ee.events===void 0?Ee.events=[this]:Ee.events.push(this),this.point=Ee,this.isLeft=Fe}link(Ee){if(Ee.point===this.point)throw new Error("Tried to link already linked events");const Fe=Ee.point.events;for(let st=0,It=Fe.length;st<It;st++){const Mt=Fe[st];this.point.events.push(Mt),Mt.point=this.point}this.checkForConsuming()}checkForConsuming(){const Ee=this.point.events.length;for(let Fe=0;Fe<Ee;Fe++){const st=this.point.events[Fe];if(st.segment.consumedBy===void 0)for(let It=Fe+1;It<Ee;It++){const Mt=this.point.events[It];Mt.consumedBy===void 0&&st.otherSE.point.events===Mt.otherSE.point.events&&st.segment.consume(Mt.segment)}}}getAvailableLinkedEvents(){const Ee=[];for(let Fe=0,st=this.point.events.length;Fe<st;Fe++){const It=this.point.events[Fe];It!==this&&!It.segment.ringOut&&It.segment.isInResult()&&Ee.push(It)}return Ee}getLeftmostComparator(Ee){const Fe=new Map,st=It=>{const Mt=It.otherSE;Fe.set(It,{sine:ln(this.point,Ee.point,Mt.point),cosine:Un(this.point,Ee.point,Mt.point)})};return(It,Mt)=>{Fe.has(It)||st(It),Fe.has(Mt)||st(Mt);const{sine:En,cosine:Yn}=Fe.get(It),{sine:yr,cosine:qn}=Fe.get(Mt);return En>=0&&yr>=0?Yn<qn?1:Yn>qn?-1:0:En<0&&yr<0?Yn<qn?-1:Yn>qn?1:0:yr<En?-1:yr>En?1:0}}}let nt=0;class Vt{static compare(Ee,Fe){const st=Ee.leftSE.point.x,It=Fe.leftSE.point.x,Mt=Ee.rightSE.point.x,En=Fe.rightSE.point.x;if(En<st)return 1;if(Mt<It)return-1;const Yn=Ee.leftSE.point.y,yr=Fe.leftSE.point.y,qn=Ee.rightSE.point.y,Pe=Fe.rightSE.point.y;if(st<It){if(yr<Yn&&yr<qn)return 1;if(yr>Yn&&yr>qn)return-1;const Te=Ee.comparePoint(Fe.leftSE.point);if(Te<0)return 1;if(Te>0)return-1;const Ue=Fe.comparePoint(Ee.rightSE.point);return Ue!==0?Ue:-1}if(st>It){if(Yn<yr&&Yn<Pe)return-1;if(Yn>yr&&Yn>Pe)return 1;const Te=Fe.comparePoint(Ee.leftSE.point);if(Te!==0)return Te;const Ue=Ee.comparePoint(Fe.rightSE.point);return Ue<0?1:Ue>0?-1:1}if(Yn<yr)return-1;if(Yn>yr)return 1;if(Mt<En){const Te=Fe.comparePoint(Ee.rightSE.point);if(Te!==0)return Te}if(Mt>En){const Te=Ee.comparePoint(Fe.rightSE.point);if(Te<0)return 1;if(Te>0)return-1}if(Mt!==En){const Te=qn-Yn,Ue=Mt-st,ot=Pe-yr,wt=En-It;if(Te>Ue&&ot<wt)return 1;if(Te<Ue&&ot>wt)return-1}return Mt>En?1:Mt<En||qn<Pe?-1:qn>Pe?1:Ee.id<Fe.id?-1:Ee.id>Fe.id?1:0}constructor(Ee,Fe,st,It){this.id=++nt,this.leftSE=Ee,Ee.segment=this,Ee.otherSE=Fe,this.rightSE=Fe,Fe.segment=this,Fe.otherSE=Ee,this.rings=st,this.windings=It}static fromRing(Ee,Fe,st){let It,Mt,En;const Yn=ke.comparePoints(Ee,Fe);if(Yn<0)It=Ee,Mt=Fe,En=1;else if(Yn>0)It=Fe,Mt=Ee,En=-1;else throw new Error(`Tried to create degenerate segment at [${Ee.x}, ${Ee.y}]`);const yr=new ke(It,!0),qn=new ke(Mt,!1);return new Vt(yr,qn,[st],[En])}replaceRightSE(Ee){this.rightSE=Ee,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const Ee=this.leftSE.point.y,Fe=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Ee<Fe?Ee:Fe},ur:{x:this.rightSE.point.x,y:Ee>Fe?Ee:Fe}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(Ee){return Ee.x===this.leftSE.point.x&&Ee.y===this.leftSE.point.y||Ee.x===this.rightSE.point.x&&Ee.y===this.rightSE.point.y}comparePoint(Ee){if(this.isAnEndpoint(Ee))return 0;const Fe=this.leftSE.point,st=this.rightSE.point,It=this.vector();if(Fe.x===st.x)return Ee.x===Fe.x?0:Ee.x<Fe.x?1:-1;const Mt=(Ee.y-Fe.y)/It.y,En=Fe.x+Mt*It.x;if(Ee.x===En)return 0;const Yn=(Ee.x-Fe.x)/It.x,yr=Fe.y+Yn*It.y;return Ee.y===yr?0:Ee.y<yr?-1:1}getIntersection(Ee){const Fe=this.bbox(),st=Ee.bbox(),It=et(Fe,st);if(It===null)return null;const Mt=this.leftSE.point,En=this.rightSE.point,Yn=Ee.leftSE.point,yr=Ee.rightSE.point,qn=_e(Fe,Yn)&&this.comparePoint(Yn)===0,Pe=_e(st,Mt)&&Ee.comparePoint(Mt)===0,Te=_e(Fe,yr)&&this.comparePoint(yr)===0,Ue=_e(st,En)&&Ee.comparePoint(En)===0;if(Pe&&qn)return Ue&&!Te?En:!Ue&&Te?yr:null;if(Pe)return Te&&Mt.x===yr.x&&Mt.y===yr.y?null:Mt;if(qn)return Ue&&En.x===Yn.x&&En.y===Yn.y?null:Yn;if(Ue&&Te)return null;if(Ue)return En;if(Te)return yr;const ot=kt(Mt,this.vector(),Yn,Ee.vector());return ot===null||!_e(It,ot)?null:we.round(ot.x,ot.y)}split(Ee){const Fe=[],st=Ee.events!==void 0,It=new ke(Ee,!0),Mt=new ke(Ee,!1),En=this.rightSE;this.replaceRightSE(Mt),Fe.push(Mt),Fe.push(It);const Yn=new Vt(It,En,this.rings.slice(),this.windings.slice());return ke.comparePoints(Yn.leftSE.point,Yn.rightSE.point)>0&&Yn.swapEvents(),ke.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),st&&(It.checkForConsuming(),Mt.checkForConsuming()),Fe}swapEvents(){const Ee=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Ee,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let Fe=0,st=this.windings.length;Fe<st;Fe++)this.windings[Fe]*=-1}consume(Ee){let Fe=this,st=Ee;for(;Fe.consumedBy;)Fe=Fe.consumedBy;for(;st.consumedBy;)st=st.consumedBy;const It=Vt.compare(Fe,st);if(It!==0){if(It>0){const Mt=Fe;Fe=st,st=Mt}if(Fe.prev===st){const Mt=Fe;Fe=st,st=Mt}for(let Mt=0,En=st.rings.length;Mt<En;Mt++){const Yn=st.rings[Mt],yr=st.windings[Mt],qn=Fe.rings.indexOf(Yn);qn===-1?(Fe.rings.push(Yn),Fe.windings.push(yr)):Fe.windings[qn]+=yr}st.rings=null,st.windings=null,st.consumedBy=Fe,st.leftSE.consumedBy=Fe.leftSE,st.rightSE.consumedBy=Fe.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const Ee=this.prev.consumedBy||this.prev;this._beforeState=Ee.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const Ee=this.beforeState();this._afterState={rings:Ee.rings.slice(0),windings:Ee.windings.slice(0),multiPolys:[]};const Fe=this._afterState.rings,st=this._afterState.windings,It=this._afterState.multiPolys;for(let Yn=0,yr=this.rings.length;Yn<yr;Yn++){const qn=this.rings[Yn],Pe=this.windings[Yn],Te=Fe.indexOf(qn);Te===-1?(Fe.push(qn),st.push(Pe)):st[Te]+=Pe}const Mt=[],En=[];for(let Yn=0,yr=Fe.length;Yn<yr;Yn++){if(st[Yn]===0)continue;const qn=Fe[Yn],Pe=qn.poly;if(En.indexOf(Pe)===-1)if(qn.isExterior)Mt.push(Pe);else{En.indexOf(Pe)===-1&&En.push(Pe);const Te=Mt.indexOf(qn.poly);Te!==-1&&Mt.splice(Te,1)}}for(let Yn=0,yr=Mt.length;Yn<yr;Yn++){const qn=Mt[Yn].multiPoly;It.indexOf(qn)===-1&&It.push(qn)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const Ee=this.beforeState().multiPolys,Fe=this.afterState().multiPolys;switch(dn.type){case"union":{const st=Ee.length===0,It=Fe.length===0;this._isInResult=st!==It;break}case"intersection":{let st,It;Ee.length<Fe.length?(st=Ee.length,It=Fe.length):(st=Fe.length,It=Ee.length),this._isInResult=It===dn.numMultiPolys&&st<It;break}case"xor":{const st=Math.abs(Ee.length-Fe.length);this._isInResult=st%2===1;break}case"difference":{const st=It=>It.length===1&&It[0].isSubject;this._isInResult=st(Ee)!==st(Fe);break}default:throw new Error(`Unrecognized operation type found ${dn.type}`)}return this._isInResult}}class U{constructor(Ee,Fe,st){if(!Array.isArray(Ee)||Ee.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Fe,this.isExterior=st,this.segments=[],typeof Ee[0][0]!="number"||typeof Ee[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const It=we.round(Ee[0][0],Ee[0][1]);this.bbox={ll:{x:It.x,y:It.y},ur:{x:It.x,y:It.y}};let Mt=It;for(let En=1,Yn=Ee.length;En<Yn;En++){if(typeof Ee[En][0]!="number"||typeof Ee[En][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let yr=we.round(Ee[En][0],Ee[En][1]);yr.x===Mt.x&&yr.y===Mt.y||(this.segments.push(Vt.fromRing(Mt,yr,this)),yr.x<this.bbox.ll.x&&(this.bbox.ll.x=yr.x),yr.y<this.bbox.ll.y&&(this.bbox.ll.y=yr.y),yr.x>this.bbox.ur.x&&(this.bbox.ur.x=yr.x),yr.y>this.bbox.ur.y&&(this.bbox.ur.y=yr.y),Mt=yr)}(It.x!==Mt.x||It.y!==Mt.y)&&this.segments.push(Vt.fromRing(Mt,It,this))}getSweepEvents(){const Ee=[];for(let Fe=0,st=this.segments.length;Fe<st;Fe++){const It=this.segments[Fe];Ee.push(It.leftSE),Ee.push(It.rightSE)}return Ee}}class pe{constructor(Ee,Fe){if(!Array.isArray(Ee))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new U(Ee[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let st=1,It=Ee.length;st<It;st++){const Mt=new U(Ee[st],this,!1);Mt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Mt.bbox.ll.x),Mt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Mt.bbox.ll.y),Mt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Mt.bbox.ur.x),Mt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Mt.bbox.ur.y),this.interiorRings.push(Mt)}this.multiPoly=Fe}getSweepEvents(){const Ee=this.exteriorRing.getSweepEvents();for(let Fe=0,st=this.interiorRings.length;Fe<st;Fe++){const It=this.interiorRings[Fe].getSweepEvents();for(let Mt=0,En=It.length;Mt<En;Mt++)Ee.push(It[Mt])}return Ee}}class ct{constructor(Ee,Fe){if(!Array.isArray(Ee))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof Ee[0][0][0]=="number"&&(Ee=[Ee])}catch(st){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let st=0,It=Ee.length;st<It;st++){const Mt=new pe(Ee[st],this);Mt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Mt.bbox.ll.x),Mt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Mt.bbox.ll.y),Mt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Mt.bbox.ur.x),Mt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Mt.bbox.ur.y),this.polys.push(Mt)}this.isSubject=Fe}getSweepEvents(){const Ee=[];for(let Fe=0,st=this.polys.length;Fe<st;Fe++){const It=this.polys[Fe].getSweepEvents();for(let Mt=0,En=It.length;Mt<En;Mt++)Ee.push(It[Mt])}return Ee}}class de{static factory(Ee){const Fe=[];for(let st=0,It=Ee.length;st<It;st++){const Mt=Ee[st];if(!Mt.isInResult()||Mt.ringOut)continue;let En=null,Yn=Mt.leftSE,yr=Mt.rightSE;const qn=[Yn],Pe=Yn.point,Te=[];for(;En=Yn,Yn=yr,qn.push(Yn),Yn.point!==Pe;)for(;;){const Ue=Yn.getAvailableLinkedEvents();if(Ue.length===0){const $t=qn[0].point,vn=qn[qn.length-1].point;throw new Error(`Unable to complete output ring starting at [${$t.x}, ${$t.y}]. Last matching segment found ends at [${vn.x}, ${vn.y}].`)}if(Ue.length===1){yr=Ue[0].otherSE;break}let ot=null;for(let $t=0,vn=Te.length;$t<vn;$t++)if(Te[$t].point===Yn.point){ot=$t;break}if(ot!==null){const $t=Te.splice(ot)[0],vn=qn.splice($t.index);vn.unshift(vn[0].otherSE),Fe.push(new de(vn.reverse()));continue}Te.push({index:qn.length,point:Yn.point});const wt=Yn.getLeftmostComparator(En);yr=Ue.sort(wt)[0].otherSE;break}Fe.push(new de(qn))}return Fe}constructor(Ee){this.events=Ee;for(let Fe=0,st=Ee.length;Fe<st;Fe++)Ee[Fe].segment.ringOut=this;this.poly=null}getGeom(){let Ee=this.events[0].point;const Fe=[Ee];for(let qn=1,Pe=this.events.length-1;qn<Pe;qn++){const Te=this.events[qn].point,Ue=this.events[qn+1].point;Ft(Te,Ee,Ue)!==0&&(Fe.push(Te),Ee=Te)}if(Fe.length===1)return null;const st=Fe[0],It=Fe[1];Ft(st,Ee,It)===0&&Fe.shift(),Fe.push(Fe[0]);const Mt=this.isExteriorRing()?1:-1,En=this.isExteriorRing()?0:Fe.length-1,Yn=this.isExteriorRing()?Fe.length:-1,yr=[];for(let qn=En;qn!=Yn;qn+=Mt)yr.push([Fe[qn].x,Fe[qn].y]);return yr}isExteriorRing(){if(this._isExteriorRing===void 0){const Ee=this.enclosingRing();this._isExteriorRing=Ee?!Ee.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let Ee=this.events[0];for(let It=1,Mt=this.events.length;It<Mt;It++){const En=this.events[It];ke.compare(Ee,En)>0&&(Ee=En)}let Fe=Ee.segment.prevInResult(),st=Fe?Fe.prevInResult():null;for(;;){if(!Fe)return null;if(!st)return Fe.ringOut;if(st.ringOut!==Fe.ringOut)return st.ringOut.enclosingRing()!==Fe.ringOut?Fe.ringOut:Fe.ringOut.enclosingRing();Fe=st.prevInResult(),st=Fe?Fe.prevInResult():null}}}class Yt{constructor(Ee){this.exteriorRing=Ee,Ee.poly=this,this.interiorRings=[]}addInterior(Ee){this.interiorRings.push(Ee),Ee.poly=this}getGeom(){const Ee=[this.exteriorRing.getGeom()];if(Ee[0]===null)return null;for(let Fe=0,st=this.interiorRings.length;Fe<st;Fe++){const It=this.interiorRings[Fe].getGeom();It!==null&&Ee.push(It)}return Ee}}class sn{constructor(Ee){this.rings=Ee,this.polys=this._composePolys(Ee)}getGeom(){const Ee=[];for(let Fe=0,st=this.polys.length;Fe<st;Fe++){const It=this.polys[Fe].getGeom();It!==null&&Ee.push(It)}return Ee}_composePolys(Ee){const Fe=[];for(let st=0,It=Ee.length;st<It;st++){const Mt=Ee[st];if(!Mt.poly)if(Mt.isExteriorRing())Fe.push(new Yt(Mt));else{const En=Mt.enclosingRing();En.poly||Fe.push(new Yt(En)),En.poly.addInterior(Mt)}}return Fe}}class pn{constructor(Ee){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt.compare;this.queue=Ee,this.tree=new Ve(Fe),this.segments=[]}process(Ee){const Fe=Ee.segment,st=[];if(Ee.consumedBy)return Ee.isLeft?this.queue.remove(Ee.otherSE):this.tree.remove(Fe),st;const It=Ee.isLeft?this.tree.add(Fe):this.tree.find(Fe);if(!It)throw new Error(`Unable to find segment #${Fe.id} [${Fe.leftSE.point.x}, ${Fe.leftSE.point.y}] -> [${Fe.rightSE.point.x}, ${Fe.rightSE.point.y}] in SweepLine tree.`);let Mt=It,En=It,Yn,yr;for(;Yn===void 0;)Mt=this.tree.prev(Mt),Mt===null?Yn=null:Mt.key.consumedBy===void 0&&(Yn=Mt.key);for(;yr===void 0;)En=this.tree.next(En),En===null?yr=null:En.key.consumedBy===void 0&&(yr=En.key);if(Ee.isLeft){let qn=null;if(Yn){const Te=Yn.getIntersection(Fe);if(Te!==null&&(Fe.isAnEndpoint(Te)||(qn=Te),!Yn.isAnEndpoint(Te))){const Ue=this._splitSafely(Yn,Te);for(let ot=0,wt=Ue.length;ot<wt;ot++)st.push(Ue[ot])}}let Pe=null;if(yr){const Te=yr.getIntersection(Fe);if(Te!==null&&(Fe.isAnEndpoint(Te)||(Pe=Te),!yr.isAnEndpoint(Te))){const Ue=this._splitSafely(yr,Te);for(let ot=0,wt=Ue.length;ot<wt;ot++)st.push(Ue[ot])}}if(qn!==null||Pe!==null){let Te=null;qn===null?Te=Pe:Pe===null?Te=qn:Te=ke.comparePoints(qn,Pe)<=0?qn:Pe,this.queue.remove(Fe.rightSE),st.push(Fe.rightSE);const Ue=Fe.split(Te);for(let ot=0,wt=Ue.length;ot<wt;ot++)st.push(Ue[ot])}st.length>0?(this.tree.remove(Fe),st.push(Ee)):(this.segments.push(Fe),Fe.prev=Yn)}else{if(Yn&&yr){const qn=Yn.getIntersection(yr);if(qn!==null){if(!Yn.isAnEndpoint(qn)){const Pe=this._splitSafely(Yn,qn);for(let Te=0,Ue=Pe.length;Te<Ue;Te++)st.push(Pe[Te])}if(!yr.isAnEndpoint(qn)){const Pe=this._splitSafely(yr,qn);for(let Te=0,Ue=Pe.length;Te<Ue;Te++)st.push(Pe[Te])}}}this.tree.remove(Fe)}return st}_splitSafely(Ee,Fe){this.tree.remove(Ee);const st=Ee.rightSE;this.queue.remove(st);const It=Ee.split(Fe);return It.push(st),Ee.consumedBy===void 0&&this.tree.add(Ee),It}}const Dn=typeof q!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Wn=typeof q!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Xn{run(Ee,Fe,st){dn.type=Ee,we.reset();const It=[new ct(Fe,!0)];for(let Te=0,Ue=st.length;Te<Ue;Te++)It.push(new ct(st[Te],!1));if(dn.numMultiPolys=It.length,dn.type==="difference"){const Te=It[0];let Ue=1;for(;Ue<It.length;)et(It[Ue].bbox,Te.bbox)!==null?Ue++:It.splice(Ue,1)}if(dn.type==="intersection")for(let Te=0,Ue=It.length;Te<Ue;Te++){const ot=It[Te];for(let wt=Te+1,$t=It.length;wt<$t;wt++)if(et(ot.bbox,It[wt].bbox)===null)return[]}const Mt=new Ve(ke.compare);for(let Te=0,Ue=It.length;Te<Ue;Te++){const ot=It[Te].getSweepEvents();for(let wt=0,$t=ot.length;wt<$t;wt++)if(Mt.insert(ot[wt]),Mt.size>Dn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const En=new pn(Mt);let Yn=Mt.size,yr=Mt.pop();for(;yr;){const Te=yr.key;if(Mt.size===Yn){const ot=Te.segment;throw new Error(`Unable to pop() ${Te.isLeft?"left":"right"} SweepEvent [${Te.point.x}, ${Te.point.y}] from segment #${ot.id} [${ot.leftSE.point.x}, ${ot.leftSE.point.y}] -> [${ot.rightSE.point.x}, ${ot.rightSE.point.y}] from queue.`)}if(Mt.size>Dn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(En.segments.length>Wn)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const Ue=En.process(Te);for(let ot=0,wt=Ue.length;ot<wt;ot++){const $t=Ue[ot];$t.consumedBy===void 0&&Mt.insert($t)}Yn=Mt.size,yr=Mt.pop()}we.reset();const qn=de.factory(En.segments);return new sn(qn).getGeom()}}const dn=new Xn;var Zn={union:function(vt){for(var Ee=arguments.length,Fe=new Array(Ee>1?Ee-1:0),st=1;st<Ee;st++)Fe[st-1]=arguments[st];return dn.run("union",vt,Fe)},intersection:function(vt){for(var Ee=arguments.length,Fe=new Array(Ee>1?Ee-1:0),st=1;st<Ee;st++)Fe[st-1]=arguments[st];return dn.run("intersection",vt,Fe)},xor:function(vt){for(var Ee=arguments.length,Fe=new Array(Ee>1?Ee-1:0),st=1;st<Ee;st++)Fe[st-1]=arguments[st];return dn.run("xor",vt,Fe)},difference:function(vt){for(var Ee=arguments.length,Fe=new Array(Ee>1?Ee-1:0),st=1;st<Ee;st++)Fe[st-1]=arguments[st];return dn.run("difference",vt,Fe)}};return Zn})},45598:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=he;var G=q(D(67294)),E=D(11805);function he(ne){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=[];return G.default.Children.forEach(ne,function(xe){xe==null&&!ue.keepEmpty||(Array.isArray(xe)?ce=ce.concat(he(xe)):(0,E.isFragment)(xe)&&xe.props?ce=ce.concat(he(xe.props.children,ue)):ce.push(xe))}),ce}},3481:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.isStyleSupport=ne;var G=q(D(19158)),E=function(ce){if((0,G.default)()&&window.document.documentElement){var xe=Array.isArray(ce)?ce:[ce],oe=window.document.documentElement;return xe.some(function(Ve){return Ve in oe.style})}return!1},he=function(ce,xe){if(!E(ce))return!1;var oe=document.createElement("div"),Ve=oe.style[ce];return oe.style[ce]=xe,oe.style[ce]!==Ve};function ne(ue,ce){return!Array.isArray(ue)&&ce!==void 0?he(ue,ce):E(ue)}},27712:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var D={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(E){var he=E.keyCode;if(E.altKey&&!E.ctrlKey||E.metaKey||he>=D.F1&&he<=D.F12)return!1;switch(he){case D.ALT:case D.CAPS_LOCK:case D.CONTEXT_MENU:case D.CTRL:case D.DOWN:case D.END:case D.ESC:case D.HOME:case D.INSERT:case D.LEFT:case D.MAC_FF_META:case D.META:case D.NUMLOCK:case D.NUM_CENTER:case D.PAGE_DOWN:case D.PAGE_UP:case D.PAUSE:case D.PRINT_SCREEN:case D.RIGHT:case D.SHIFT:case D.UP:case D.WIN_KEY:case D.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(E){if(E>=D.ZERO&&E<=D.NINE||E>=D.NUM_ZERO&&E<=D.NUM_MULTIPLY||E>=D.A&&E<=D.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&E===0)return!0;switch(E){case D.SPACE:case D.QUESTION_MARK:case D.NUM_PLUS:case D.NUM_MINUS:case D.NUM_PERIOD:case D.NUM_DIVISION:case D.SEMICOLON:case D.DASH:case D.EQUALS:case D.COMMA:case D.PERIOD:case D.SLASH:case D.APOSTROPHE:case D.SINGLE_QUOTE:case D.OPEN_SQUARE_BRACKET:case D.BACKSLASH:case D.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},q=W.default=D},18545:function(mt,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var G=q(D(67294));function E(he){var ne=G.useRef();ne.current=he;var ue=G.useCallback(function(){for(var ce,xe=arguments.length,oe=new Array(xe),Ve=0;Ve<xe;Ve++)oe[Ve]=arguments[Ve];return(ce=ne.current)===null||ce===void 0?void 0:ce.call.apply(ce,[ne].concat(oe))},[]);return ue}},82546:function(mt,W,D){"use strict";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.useLayoutUpdateEffect=W.default=void 0;var E=G(D(67294)),he=q(D(19158)),ne=(0,he.default)()?E.useLayoutEffect:E.useEffect,ue=function(Ve,re){var me=E.useRef(!0);ne(function(){return Ve(me.current)},re),ne(function(){return me.current=!1,function(){me.current=!0}},[])},ce=W.useLayoutUpdateEffect=function(Ve,re){ue(function(me){if(!me)return Ve()},re)},xe=W.default=ue},67265:function(mt,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var G=q(D(67294));function E(he,ne,ue){var ce=G.useRef({});return(!("value"in ce.current)||ue(ce.current.condition,ne))&&(ce.current.value=he(),ce.current.condition=ne),ce.current.value}},60869:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ce;var G=q(D(27424)),E=q(D(18545)),he=D(82546),ne=q(D(78423));function ue(xe){return xe!==void 0}function ce(xe,oe){var Ve=oe||{},re=Ve.defaultValue,me=Ve.value,Re=Ve.onChange,Y=Ve.postState,le=(0,ne.default)(function(){return ue(me)?me:ue(re)?typeof re=="function"?re():re:typeof xe=="function"?xe():xe}),K=(0,G.default)(le,2),_e=K[0],et=K[1],Je=me!==void 0?me:_e,Ot=Y?Y(Je):Je,dt=(0,E.default)(Re),bt=(0,ne.default)([Je]),Me=(0,G.default)(bt,2),we=Me[0],je=Me[1];(0,he.useLayoutUpdateEffect)(function(){var ut=we[0];_e!==ut&&dt(_e,ut)},[we]),(0,he.useLayoutUpdateEffect)(function(){ue(me)||et(me)},[me]);var Ze=(0,E.default)(function(ut,Qt){et(ut,Qt),je([Je],Qt)});return[Ot,Ze]}},78423:function(mt,W,D){"use strict";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ne;var E=G(D(27424)),he=q(D(67294));function ne(ue){var ce=he.useRef(!1),xe=he.useState(ue),oe=(0,E.default)(xe,2),Ve=oe[0],re=oe[1];he.useEffect(function(){return ce.current=!1,function(){ce.current=!0}},[]);function me(Re,Y){Y&&ce.current||re(Re)}return[Ve,me]}},11102:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(18698)),E=q(D(45520));function he(ue,ce){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,oe=new Set;function Ve(re,me){var Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Y=oe.has(re);if((0,E.default)(!Y,"Warning: There may be circular references"),Y)return!1;if(re===me)return!0;if(xe&&Re>1)return!1;oe.add(re);var le=Re+1;if(Array.isArray(re)){if(!Array.isArray(me)||re.length!==me.length)return!1;for(var K=0;K<re.length;K++)if(!Ve(re[K],me[K],le))return!1;return!0}if(re&&me&&(0,G.default)(re)==="object"&&(0,G.default)(me)==="object"){var _e=Object.keys(re);return _e.length!==Object.keys(me).length?!1:_e.every(function(et){return Ve(re[et],me[et],le)})}return!1}return Ve(ue,ce)}var ne=W.default=he},18475:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=D;function D(q,G){var E=Object.assign({},q);return Array.isArray(G)&&G.forEach(function(he){delete E[he]}),E}},75531:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.useComposeRef=W.supportRef=W.supportNodeRef=W.getNodeRef=W.fillRef=W.composeRef=void 0;var G=q(D(18698)),E=D(67294),he=D(11805),ne=q(D(67265)),ue=W.fillRef=function(Y,le){typeof Y=="function"?Y(le):(0,G.default)(Y)==="object"&&Y&&"current"in Y&&(Y.current=le)},ce=W.composeRef=function(){for(var Y=arguments.length,le=new Array(Y),K=0;K<Y;K++)le[K]=arguments[K];var _e=le.filter(Boolean);return _e.length<=1?_e[0]:function(et){le.forEach(function(Je){ue(Je,et)})}},xe=W.useComposeRef=function(){for(var Y=arguments.length,le=new Array(Y),K=0;K<Y;K++)le[K]=arguments[K];return(0,ne.default)(function(){return ce.apply(void 0,le)},le,function(_e,et){return _e.length!==et.length||_e.every(function(Je,Ot){return Je!==et[Ot]})})},oe=W.supportRef=function(Y){var le,K,_e=(0,he.isMemo)(Y)?Y.type.type:Y.type;return!(typeof _e=="function"&&!((le=_e.prototype)!==null&&le!==void 0&&le.render)&&_e.$$typeof!==he.ForwardRef||typeof Y=="function"&&!((K=Y.prototype)!==null&&K!==void 0&&K.render)&&Y.$$typeof!==he.ForwardRef)};function Ve(Re){return(0,E.isValidElement)(Re)&&!(0,he.isFragment)(Re)}var re=W.supportNodeRef=function(Y){return Ve(Y)&&oe(Y)},me=W.getNodeRef=Number(E.version.split(".")[0])>=19?function(Re){return Ve(Re)?Re.props.ref:null}:function(Re){return Ve(Re)?Re.ref:null}},94787:function(mt,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=D;function D(q,G){for(var E=q,he=0;he<G.length;he+=1){if(E==null)return;E=E[G[he]]}return E}},20059:function(mt,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=xe,W.merge=me;var G=q(D(18698)),E=q(D(42122)),he=q(D(861)),ne=q(D(51589)),ue=q(D(94787));function ce(Re,Y,le,K){if(!Y.length)return le;var _e=(0,ne.default)(Y),et=_e[0],Je=_e.slice(1),Ot;return!Re&&typeof et=="number"?Ot=[]:Array.isArray(Re)?Ot=(0,he.default)(Re):Ot=(0,E.default)({},Re),K&&le===void 0&&Je.length===1?delete Ot[et][Je[0]]:Ot[et]=ce(Ot[et],Je,le,K),Ot}function xe(Re,Y,le){var K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Y.length&&K&&le===void 0&&!(0,ue.default)(Re,Y.slice(0,-1))?Re:ce(Re,Y,le,K)}function oe(Re){return(0,G.default)(Re)==="object"&&Re!==null&&Object.getPrototypeOf(Re)===Object.prototype}function Ve(Re){return Array.isArray(Re)?[]:{}}var re=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function me(){for(var Re=arguments.length,Y=new Array(Re),le=0;le<Re;le++)Y[le]=arguments[le];var K=Ve(Y[0]);return Y.forEach(function(_e){function et(Je,Ot){var dt=new Set(Ot),bt=(0,ue.default)(_e,Je),Me=Array.isArray(bt);if(Me||oe(bt)){if(!dt.has(bt)){dt.add(bt);var we=(0,ue.default)(K,Je);Me?K=xe(K,Je,[]):(!we||(0,G.default)(we)!=="object")&&(K=xe(K,Je,Ve(bt))),re(bt).forEach(function(je){et([].concat((0,he.default)(Je),[je]),dt)})}}else K=xe(K,Je,bt)}et([])}),K}},81550:function(mt){(function(W,D){mt.exports=D()})(this,function(){"use strict";var W=function(He){return He instanceof Uint8Array||He instanceof Uint16Array||He instanceof Uint32Array||He instanceof Int8Array||He instanceof Int16Array||He instanceof Int32Array||He instanceof Float32Array||He instanceof Float64Array||He instanceof Uint8ClampedArray},D=function(He,qt){for(var Rn=Object.keys(qt),Ar=0;Ar<Rn.length;++Ar)He[Rn[Ar]]=qt[Rn[Ar]];return He},q=`
`;function G(He){return typeof atob!="undefined"?atob(He):"base64:"+He}function E(He){var qt=new Error("(regl) "+He);throw console.error(qt),qt}function he(He,qt){He||E(qt)}function ne(He){return He?": "+He:""}function ue(He,qt,Rn){He in qt||E("unknown parameter ("+He+")"+ne(Rn)+". possible values: "+Object.keys(qt).join())}function ce(He,qt){W(He)||E("invalid parameter type"+ne(qt)+". must be a typed array")}function xe(He,qt){switch(qt){case"number":return typeof He=="number";case"object":return typeof He=="object";case"string":return typeof He=="string";case"boolean":return typeof He=="boolean";case"function":return typeof He=="function";case"undefined":return typeof He=="undefined";case"symbol":return typeof He=="symbol"}}function oe(He,qt,Rn){xe(He,qt)||E("invalid parameter type"+ne(Rn)+". expected "+qt+", got "+typeof He)}function Ve(He,qt){He>=0&&(He|0)===He||E("invalid parameter type, ("+He+")"+ne(qt)+". must be a nonnegative integer")}function re(He,qt,Rn){qt.indexOf(He)<0&&E("invalid value"+ne(Rn)+". must be one of: "+qt)}var me=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function Re(He){Object.keys(He).forEach(function(qt){me.indexOf(qt)<0&&E('invalid regl constructor argument "'+qt+'". must be one of '+me)})}function Y(He,qt){for(He=He+"";He.length<qt;)He=" "+He;return He}function le(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function K(He,qt){this.number=He,this.line=qt,this.errors=[]}function _e(He,qt,Rn){this.file=He,this.line=qt,this.message=Rn}function et(){var He=new Error,qt=(He.stack||He).toString(),Rn=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(qt);if(Rn)return Rn[1];var Ar=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(qt);return Ar?Ar[1]:"unknown"}function Je(){var He=new Error,qt=(He.stack||He).toString(),Rn=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(qt);if(Rn)return Rn[1];var Ar=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(qt);return Ar?Ar[1]:"unknown"}function Ot(He,qt){var Rn=He.split(`
`),Ar=1,$r=0,Cr={unknown:new le,0:new le};Cr.unknown.name=Cr[0].name=qt||et(),Cr.unknown.lines.push(new K(0,""));for(var mr=0;mr<Rn.length;++mr){var Ci=Rn[mr],li=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ci);if(li)switch(li[1]){case"line":var Bi=/(\d+)(\s+\d+)?/.exec(li[2]);Bi&&(Ar=Bi[1]|0,Bi[2]&&($r=Bi[2]|0,$r in Cr||(Cr[$r]=new le)));break;case"define":var Ri=/SHADER_NAME(_B64)?\s+(.*)$/.exec(li[2]);Ri&&(Cr[$r].name=Ri[1]?G(Ri[2]):Ri[2]);break}Cr[$r].lines.push(new K(Ar++,Ci))}return Object.keys(Cr).forEach(function(Di){var Xi=Cr[Di];Xi.lines.forEach(function(pi){Xi.index[pi.number]=pi})}),Cr}function dt(He){var qt=[];return He.split(`
`).forEach(function(Rn){if(!(Rn.length<5)){var Ar=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Rn);Ar?qt.push(new _e(Ar[1]|0,Ar[2]|0,Ar[3].trim())):Rn.length>0&&qt.push(new _e("unknown",0,Rn))}}),qt}function bt(He,qt){qt.forEach(function(Rn){var Ar=He[Rn.file];if(Ar){var $r=Ar.index[Rn.line];if($r){$r.errors.push(Rn),Ar.hasErrors=!0;return}}He.unknown.hasErrors=!0,He.unknown.lines[0].errors.push(Rn)})}function Me(He,qt,Rn,Ar,$r){if(!He.getShaderParameter(qt,He.COMPILE_STATUS)){var Cr=He.getShaderInfoLog(qt),mr=Ar===He.FRAGMENT_SHADER?"fragment":"vertex";St(Rn,"string",mr+" shader source must be a string",$r);var Ci=Ot(Rn,$r),li=dt(Cr);bt(Ci,li),Object.keys(Ci).forEach(function(Bi){var Ri=Ci[Bi];if(!Ri.hasErrors)return;var Di=[""],Xi=[""];function pi(ki,fr){Di.push(ki),Xi.push(fr||"")}pi("file number "+Bi+": "+Ri.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Ri.lines.forEach(function(ki){if(ki.errors.length>0){pi(Y(ki.number,4)+"|  ","background-color:yellow; font-weight:bold"),pi(ki.line+q,"color:red; background-color:yellow; font-weight:bold");var fr=0;ki.errors.forEach(function(kr){var _i=kr.message,io=/^\s*'(.*)'\s*:\s*(.*)$/.exec(_i);if(io){var ri=io[1];switch(_i=io[2],ri){case"assign":ri="=";break}fr=Math.max(ki.line.indexOf(ri,fr),0)}else fr=0;pi(Y("| ",6)),pi(Y("^^^",fr+3)+q,"font-weight:bold"),pi(Y("| ",6)),pi(_i+q,"font-weight:bold")}),pi(Y("| ",6)+q)}else pi(Y(ki.number,4)+"|  "),pi(ki.line+q,"color:red")}),typeof document!="undefined"&&!window.chrome?(Xi[0]=Di.join("%c"),console.log.apply(console,Xi)):console.log(Di.join(""))}),he.raise("Error compiling "+mr+" shader, "+Ci[0].name)}}function we(He,qt,Rn,Ar,$r){if(!He.getProgramParameter(qt,He.LINK_STATUS)){var Cr=He.getProgramInfoLog(qt),mr=Ot(Rn,$r),Ci=Ot(Ar,$r),li='Error linking program with vertex shader, "'+Ci[0].name+'", and fragment shader "'+mr[0].name+'"';typeof document!="undefined"?console.log("%c"+li+q+"%c"+Cr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(li+q+Cr),he.raise(li)}}function je(He){He._commandRef=et()}function Ze(He,qt,Rn,Ar){je(He);function $r(li){return li?Ar.id(li):0}He._fragId=$r(He.static.frag),He._vertId=$r(He.static.vert);function Cr(li,Bi){Object.keys(Bi).forEach(function(Ri){li[Ar.id(Ri)]=!0})}var mr=He._uniformSet={};Cr(mr,qt.static),Cr(mr,qt.dynamic);var Ci=He._attributeSet={};Cr(Ci,Rn.static),Cr(Ci,Rn.dynamic),He._hasCount="count"in He.static||"count"in He.dynamic||"elements"in He.static||"elements"in He.dynamic}function ut(He,qt){var Rn=Je();E(He+" in command "+(qt||et())+(Rn==="unknown"?"":" called from "+Rn))}function Qt(He,qt,Rn){He||ut(qt,Rn||et())}function De(He,qt,Rn,Ar){He in qt||ut("unknown parameter ("+He+")"+ne(Rn)+". possible values: "+Object.keys(qt).join(),Ar||et())}function St(He,qt,Rn,Ar){xe(He,qt)||ut("invalid parameter type"+ne(Rn)+". expected "+qt+", got "+typeof He,Ar||et())}function Oe(He){He()}function it(He,qt,Rn){He.texture?re(He.texture._texture.internalformat,qt,"unsupported texture format for attachment"):re(He.renderbuffer._renderbuffer.format,Rn,"unsupported renderbuffer format for attachment")}var Ke=33071,Xe=9728,Pt=9984,xt=9985,Ie=9986,Wt=9987,hn=5120,Pn=5121,$n=5122,nr=5123,Ft=5124,Jt=5125,ln=5126,Un=32819,on=32820,zt=33635,kt=34042,ke=36193,nt={};nt[hn]=nt[Pn]=1,nt[$n]=nt[nr]=nt[ke]=nt[zt]=nt[Un]=nt[on]=2,nt[Ft]=nt[Jt]=nt[ln]=nt[kt]=4;function Vt(He,qt){return He===on||He===Un||He===zt?2:He===kt?4:nt[He]*qt}function U(He){return!(He&He-1)&&!!He}function pe(He,qt,Rn){var Ar,$r=qt.width,Cr=qt.height,mr=qt.channels;he($r>0&&$r<=Rn.maxTextureSize&&Cr>0&&Cr<=Rn.maxTextureSize,"invalid texture shape"),(He.wrapS!==Ke||He.wrapT!==Ke)&&he(U($r)&&U(Cr),"incompatible wrap mode for texture, both width and height must be power of 2"),qt.mipmask===1?$r!==1&&Cr!==1&&he(He.minFilter!==Pt&&He.minFilter!==Ie&&He.minFilter!==xt&&He.minFilter!==Wt,"min filter requires mipmap"):(he(U($r)&&U(Cr),"texture must be a square power of 2 to support mipmapping"),he(qt.mipmask===($r<<1)-1,"missing or incomplete mipmap data")),qt.type===ln&&(Rn.extensions.indexOf("oes_texture_float_linear")<0&&he(He.minFilter===Xe&&He.magFilter===Xe,"filter not supported, must enable oes_texture_float_linear"),he(!He.genMipmaps,"mipmap generation not supported with float textures"));var Ci=qt.images;for(Ar=0;Ar<16;++Ar)if(Ci[Ar]){var li=$r>>Ar,Bi=Cr>>Ar;he(qt.mipmask&1<<Ar,"missing mipmap data");var Ri=Ci[Ar];if(he(Ri.width===li&&Ri.height===Bi,"invalid shape for mip images"),he(Ri.format===qt.format&&Ri.internalformat===qt.internalformat&&Ri.type===qt.type,"incompatible type for mip image"),!Ri.compressed)if(Ri.data){var Di=Math.ceil(Vt(Ri.type,mr)*li/Ri.unpackAlignment)*Ri.unpackAlignment;he(Ri.data.byteLength===Di*Bi,"invalid data for image, buffer size is inconsistent with image format")}else Ri.element||Ri.copy}else He.genMipmaps||he((qt.mipmask&1<<Ar)===0,"extra mipmap data");qt.compressed&&he(!He.genMipmaps,"mipmap generation for compressed images not supported")}function ct(He,qt,Rn,Ar){var $r=He.width,Cr=He.height,mr=He.channels;he($r>0&&$r<=Ar.maxTextureSize&&Cr>0&&Cr<=Ar.maxTextureSize,"invalid texture shape"),he($r===Cr,"cube map must be square"),he(qt.wrapS===Ke&&qt.wrapT===Ke,"wrap mode not supported by cube map");for(var Ci=0;Ci<Rn.length;++Ci){var li=Rn[Ci];he(li.width===$r&&li.height===Cr,"inconsistent cube map face shape"),qt.genMipmaps&&(he(!li.compressed,"can not generate mipmap for compressed textures"),he(li.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Bi=li.images,Ri=0;Ri<16;++Ri){var Di=Bi[Ri];if(Di){var Xi=$r>>Ri,pi=Cr>>Ri;he(li.mipmask&1<<Ri,"missing mipmap data"),he(Di.width===Xi&&Di.height===pi,"invalid shape for mip images"),he(Di.format===He.format&&Di.internalformat===He.internalformat&&Di.type===He.type,"incompatible type for mip image"),Di.compressed||(Di.data?he(Di.data.byteLength===Xi*pi*Math.max(Vt(Di.type,mr),Di.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Di.element||Di.copy)}}}}var de=D(he,{optional:Oe,raise:E,commandRaise:ut,command:Qt,parameter:ue,commandParameter:De,constructor:Re,type:oe,commandType:St,isTypedArray:ce,nni:Ve,oneOf:re,shaderError:Me,linkError:we,callSite:Je,saveCommandRef:je,saveDrawInfo:Ze,framebufferFormat:it,guessCommand:et,texture2D:pe,textureCube:ct}),Yt=0,sn=0;function pn(He,qt){this.id=Yt++,this.type=He,this.data=qt}function Dn(He){return He.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Wn(He){if(He.length===0)return[];var qt=He.charAt(0),Rn=He.charAt(He.length-1);if(He.length>1&&qt===Rn&&(qt==='"'||qt==="'"))return['"'+Dn(He.substr(1,He.length-2))+'"'];var Ar=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(He);if(Ar)return Wn(He.substr(0,Ar.index)).concat(Wn(Ar[1])).concat(Wn(He.substr(Ar.index+Ar[0].length)));var $r=He.split(".");if($r.length===1)return['"'+Dn(He)+'"'];for(var Cr=[],mr=0;mr<$r.length;++mr)Cr=Cr.concat(Wn($r[mr]));return Cr}function Xn(He){return"["+Wn(He).join("][")+"]"}function dn(He,qt){return new pn(He,Xn(qt+""))}function _t(He){return typeof He=="function"&&!He._reglType||He instanceof pn}function Rt(He,qt){return typeof He=="function"?new pn(sn,He):He}var wn={DynamicVariable:pn,define:dn,isDynamic:_t,unbox:Rt,accessor:Xn},In={next:typeof requestAnimationFrame=="function"?function(He){return requestAnimationFrame(He)}:function(He){return setTimeout(He,16)},cancel:typeof cancelAnimationFrame=="function"?function(He){return cancelAnimationFrame(He)}:clearTimeout},Zn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function vt(){var He={"":0},qt=[""];return{id:function(Rn){var Ar=He[Rn];return Ar||(Ar=He[Rn]=qt.length,qt.push(Rn),Ar)},str:function(Rn){return qt[Rn]}}}function Ee(He,qt,Rn){var Ar=document.createElement("canvas");D(Ar.style,{border:0,margin:0,padding:0,top:0,left:0}),He.appendChild(Ar),He===document.body&&(Ar.style.position="absolute",D(He.style,{margin:0,padding:0}));function $r(){var Ci=window.innerWidth,li=window.innerHeight;if(He!==document.body){var Bi=He.getBoundingClientRect();Ci=Bi.right-Bi.left,li=Bi.bottom-Bi.top}Ar.width=Rn*Ci,Ar.height=Rn*li,D(Ar.style,{width:Ci+"px",height:li+"px"})}var Cr;He!==document.body&&typeof ResizeObserver=="function"?(Cr=new ResizeObserver(function(){setTimeout($r)}),Cr.observe(He)):window.addEventListener("resize",$r,!1);function mr(){Cr?Cr.disconnect():window.removeEventListener("resize",$r),He.removeChild(Ar)}return $r(),{canvas:Ar,onDestroy:mr}}function Fe(He,qt){function Rn(Ar){try{return He.getContext(Ar,qt)}catch($r){return null}}return Rn("webgl")||Rn("experimental-webgl")||Rn("webgl-experimental")}function st(He){return typeof He.nodeName=="string"&&typeof He.appendChild=="function"&&typeof He.getBoundingClientRect=="function"}function It(He){return typeof He.drawArrays=="function"||typeof He.drawElements=="function"}function Mt(He){return typeof He=="string"?He.split():(de(Array.isArray(He),"invalid extension array"),He)}function En(He){return typeof He=="string"?(de(typeof document!="undefined","not supported outside of DOM"),document.querySelector(He)):He}function Yn(He){var qt=He||{},Rn,Ar,$r,Cr,mr={},Ci=[],li=[],Bi=typeof window=="undefined"?1:window.devicePixelRatio,Ri=!1,Di=function(ki){ki&&de.raise(ki)},Xi=function(){};if(typeof qt=="string"?(de(typeof document!="undefined","selector queries only supported in DOM enviroments"),Rn=document.querySelector(qt),de(Rn,"invalid query string for element")):typeof qt=="object"?st(qt)?Rn=qt:It(qt)?(Cr=qt,$r=Cr.canvas):(de.constructor(qt),"gl"in qt?Cr=qt.gl:"canvas"in qt?$r=En(qt.canvas):"container"in qt&&(Ar=En(qt.container)),"attributes"in qt&&(mr=qt.attributes,de.type(mr,"object","invalid context attributes")),"extensions"in qt&&(Ci=Mt(qt.extensions)),"optionalExtensions"in qt&&(li=Mt(qt.optionalExtensions)),"onDone"in qt&&(de.type(qt.onDone,"function","invalid or missing onDone callback"),Di=qt.onDone),"profile"in qt&&(Ri=!!qt.profile),"pixelRatio"in qt&&(Bi=+qt.pixelRatio,de(Bi>0,"invalid pixel ratio"))):de.raise("invalid arguments to regl"),Rn&&(Rn.nodeName.toLowerCase()==="canvas"?$r=Rn:Ar=Rn),!Cr){if(!$r){de(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var pi=Ee(Ar||document.body,Di,Bi);if(!pi)return null;$r=pi.canvas,Xi=pi.onDestroy}mr.premultipliedAlpha===void 0&&(mr.premultipliedAlpha=!0),Cr=Fe($r,mr)}return Cr?{gl:Cr,canvas:$r,container:Ar,extensions:Ci,optionalExtensions:li,pixelRatio:Bi,profile:Ri,onDone:Di,onDestroy:Xi}:(Xi(),Di("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function yr(He,qt){var Rn={};function Ar(mr){de.type(mr,"string","extension name must be string");var Ci=mr.toLowerCase(),li;try{li=Rn[Ci]=He.getExtension(Ci)}catch(Bi){}return!!li}for(var $r=0;$r<qt.extensions.length;++$r){var Cr=qt.extensions[$r];if(!Ar(Cr))return qt.onDestroy(),qt.onDone('"'+Cr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return qt.optionalExtensions.forEach(Ar),{extensions:Rn,restore:function(){Object.keys(Rn).forEach(function(mr){if(Rn[mr]&&!Ar(mr))throw new Error("(regl): error restoring extension "+mr)})}}}function qn(He,qt){for(var Rn=Array(He),Ar=0;Ar<He;++Ar)Rn[Ar]=qt(Ar);return Rn}var Pe=5120,Te=5121,Ue=5122,ot=5123,wt=5124,$t=5125,vn=5126;function Et(He){for(var qt=16;qt<=1<<28;qt*=16)if(He<=qt)return qt;return 0}function Kt(He){var qt,Rn;return qt=(He>65535)<<4,He>>>=qt,Rn=(He>255)<<3,He>>>=Rn,qt|=Rn,Rn=(He>15)<<2,He>>>=Rn,qt|=Rn,Rn=(He>3)<<1,He>>>=Rn,qt|=Rn,qt|He>>1}function Qn(){var He=qn(8,function(){return[]});function qt(Cr){var mr=Et(Cr),Ci=He[Kt(mr)>>2];return Ci.length>0?Ci.pop():new ArrayBuffer(mr)}function Rn(Cr){He[Kt(Cr.byteLength)>>2].push(Cr)}function Ar(Cr,mr){var Ci=null;switch(Cr){case Pe:Ci=new Int8Array(qt(mr),0,mr);break;case Te:Ci=new Uint8Array(qt(mr),0,mr);break;case Ue:Ci=new Int16Array(qt(2*mr),0,mr);break;case ot:Ci=new Uint16Array(qt(2*mr),0,mr);break;case wt:Ci=new Int32Array(qt(4*mr),0,mr);break;case $t:Ci=new Uint32Array(qt(4*mr),0,mr);break;case vn:Ci=new Float32Array(qt(4*mr),0,mr);break;default:return null}return Ci.length!==mr?Ci.subarray(0,mr):Ci}function $r(Cr){Rn(Cr.buffer)}return{alloc:qt,free:Rn,allocType:Ar,freeType:$r}}var _r=Qn();_r.zero=Qn();var Vr=3408,pr=3410,zr=3411,gi=3412,wi=3413,Sr=3414,Ti=3415,hi=33901,ai=33902,Mo=3379,xi=3386,ea=34921,va=36347,Ro=36348,$o=35661,Be=35660,rt=34930,jt=36349,un=34076,Nn=34024,Bn=7936,yn=7937,Cn=7938,dr=35724,hr=34047,Jr=36063,zi=34852,Ji=3553,ei=34067,Hi=34069,Ii=33984,Wr=6408,Eo=5126,ci=5121,xo=36160,Wi=36053,oo=36064,Ao=16384,bs=function(He,qt){var Rn=1;qt.ext_texture_filter_anisotropic&&(Rn=He.getParameter(hr));var Ar=1,$r=1;qt.webgl_draw_buffers&&(Ar=He.getParameter(zi),$r=He.getParameter(Jr));var Cr=!!qt.oes_texture_float;if(Cr){var mr=He.createTexture();He.bindTexture(Ji,mr),He.texImage2D(Ji,0,Wr,1,1,0,Wr,Eo,null);var Ci=He.createFramebuffer();if(He.bindFramebuffer(xo,Ci),He.framebufferTexture2D(xo,oo,Ji,mr,0),He.bindTexture(Ji,null),He.checkFramebufferStatus(xo)!==Wi)Cr=!1;else{He.viewport(0,0,1,1),He.clearColor(1,0,0,1),He.clear(Ao);var li=_r.allocType(Eo,4);He.readPixels(0,0,1,1,Wr,Eo,li),He.getError()?Cr=!1:(He.deleteFramebuffer(Ci),He.deleteTexture(mr),Cr=li[0]===1),_r.freeType(li)}}var Bi=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Ri=!0;if(!Bi){var Di=He.createTexture(),Xi=_r.allocType(ci,36);He.activeTexture(Ii),He.bindTexture(ei,Di),He.texImage2D(Hi,0,Wr,3,3,0,Wr,ci,Xi),_r.freeType(Xi),He.bindTexture(ei,null),He.deleteTexture(Di),Ri=!He.getError()}return{colorBits:[He.getParameter(pr),He.getParameter(zr),He.getParameter(gi),He.getParameter(wi)],depthBits:He.getParameter(Sr),stencilBits:He.getParameter(Ti),subpixelBits:He.getParameter(Vr),extensions:Object.keys(qt).filter(function(pi){return!!qt[pi]}),maxAnisotropic:Rn,maxDrawbuffers:Ar,maxColorAttachments:$r,pointSizeDims:He.getParameter(hi),lineWidthDims:He.getParameter(ai),maxViewportDims:He.getParameter(xi),maxCombinedTextureUnits:He.getParameter($o),maxCubeMapSize:He.getParameter(un),maxRenderbufferSize:He.getParameter(Nn),maxTextureUnits:He.getParameter(rt),maxTextureSize:He.getParameter(Mo),maxAttributes:He.getParameter(ea),maxVertexUniforms:He.getParameter(va),maxVertexTextureUnits:He.getParameter(Be),maxVaryingVectors:He.getParameter(Ro),maxFragmentUniforms:He.getParameter(jt),glsl:He.getParameter(dr),renderer:He.getParameter(yn),vendor:He.getParameter(Bn),version:He.getParameter(Cn),readFloat:Cr,npotTextureCube:Ri}};function ma(He){return!!He&&typeof He=="object"&&Array.isArray(He.shape)&&Array.isArray(He.stride)&&typeof He.offset=="number"&&He.shape.length===He.stride.length&&(Array.isArray(He.data)||W(He.data))}var ta=function(He){return Object.keys(He).map(function(qt){return He[qt]})},vs={shape:Oi,flatten:Lr};function ms(He,qt,Rn){for(var Ar=0;Ar<qt;++Ar)Rn[Ar]=He[Ar]}function At(He,qt,Rn,Ar){for(var $r=0,Cr=0;Cr<qt;++Cr)for(var mr=He[Cr],Ci=0;Ci<Rn;++Ci)Ar[$r++]=mr[Ci]}function Gt(He,qt,Rn,Ar,$r,Cr){for(var mr=Cr,Ci=0;Ci<qt;++Ci)for(var li=He[Ci],Bi=0;Bi<Rn;++Bi)for(var Ri=li[Bi],Di=0;Di<Ar;++Di)$r[mr++]=Ri[Di]}function jn(He,qt,Rn,Ar,$r){for(var Cr=1,mr=Rn+1;mr<qt.length;++mr)Cr*=qt[mr];var Ci=qt[Rn];if(qt.length-Rn===4){var li=qt[Rn+1],Bi=qt[Rn+2],Ri=qt[Rn+3];for(mr=0;mr<Ci;++mr)Gt(He[mr],li,Bi,Ri,Ar,$r),$r+=Cr}else for(mr=0;mr<Ci;++mr)jn(He[mr],qt,Rn+1,Ar,$r),$r+=Cr}function Lr(He,qt,Rn,Ar){var $r=1;if(qt.length)for(var Cr=0;Cr<qt.length;++Cr)$r*=qt[Cr];else $r=0;var mr=Ar||_r.allocType(Rn,$r);switch(qt.length){case 0:break;case 1:ms(He,qt[0],mr);break;case 2:At(He,qt[0],qt[1],mr);break;case 3:Gt(He,qt[0],qt[1],qt[2],mr,0);break;default:jn(He,qt,0,mr,0)}return mr}function Oi(He){for(var qt=[],Rn=He;Rn.length;Rn=Rn[0])qt.push(Rn.length);return qt}var Gi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Jo=5120,Gs=5122,Ds=5124,zs=5121,hl=5123,yh=5125,Np=5126,Ed=5126,jl={int8:Jo,int16:Gs,int32:Ds,uint8:zs,uint16:hl,uint32:yh,float:Np,float32:Ed},Pf=35048,If=35040,lu={dynamic:Pf,stream:If,static:35044},ju=vs.flatten,uc=vs.shape,Qf=35044,vu=35040,Cs=5121,Ou=5126,yf=[];yf[5120]=1,yf[5122]=2,yf[5124]=4,yf[5121]=1,yf[5123]=2,yf[5125]=4,yf[5126]=4;function Vh(He){return Gi[Object.prototype.toString.call(He)]|0}function Bp(He,qt){for(var Rn=0;Rn<qt.length;++Rn)He[Rn]=qt[Rn]}function _h(He,qt,Rn,Ar,$r,Cr,mr){for(var Ci=0,li=0;li<Rn;++li)for(var Bi=0;Bi<Ar;++Bi)He[Ci++]=qt[$r*li+Cr*Bi+mr]}function Sd(He,qt,Rn,Ar){var $r=0,Cr={};function mr(fr){this.id=$r++,this.buffer=He.createBuffer(),this.type=fr,this.usage=Qf,this.byteLength=0,this.dimension=1,this.dtype=Cs,this.persistentData=null,Rn.profile&&(this.stats={size:0})}mr.prototype.bind=function(){He.bindBuffer(this.type,this.buffer)},mr.prototype.destroy=function(){Xi(this)};var Ci=[];function li(fr,kr){var _i=Ci.pop();return _i||(_i=new mr(fr)),_i.bind(),Di(_i,kr,vu,0,1,!1),_i}function Bi(fr){Ci.push(fr)}function Ri(fr,kr,_i){fr.byteLength=kr.byteLength,He.bufferData(fr.type,kr,_i)}function Di(fr,kr,_i,io,ri,eo){var Ei;if(fr.usage=_i,Array.isArray(kr)){if(fr.dtype=io||Ou,kr.length>0){var to;if(Array.isArray(kr[0])){Ei=uc(kr);for(var si=1,di=1;di<Ei.length;++di)si*=Ei[di];fr.dimension=si,to=ju(kr,Ei,fr.dtype),Ri(fr,to,_i),eo?fr.persistentData=to:_r.freeType(to)}else if(typeof kr[0]=="number"){fr.dimension=ri;var Uo=_r.allocType(fr.dtype,kr.length);Bp(Uo,kr),Ri(fr,Uo,_i),eo?fr.persistentData=Uo:_r.freeType(Uo)}else W(kr[0])?(fr.dimension=kr[0].length,fr.dtype=io||Vh(kr[0])||Ou,to=ju(kr,[kr.length,kr[0].length],fr.dtype),Ri(fr,to,_i),eo?fr.persistentData=to:_r.freeType(to)):de.raise("invalid buffer data")}}else if(W(kr))fr.dtype=io||Vh(kr),fr.dimension=ri,Ri(fr,kr,_i),eo&&(fr.persistentData=new Uint8Array(new Uint8Array(kr.buffer)));else if(ma(kr)){Ei=kr.shape;var ua=kr.stride,Qi=kr.offset,Si=0,Yr=0,Fo=0,La=0;Ei.length===1?(Si=Ei[0],Yr=1,Fo=ua[0],La=0):Ei.length===2?(Si=Ei[0],Yr=Ei[1],Fo=ua[0],La=ua[1]):de.raise("invalid shape"),fr.dtype=io||Vh(kr.data)||Ou,fr.dimension=Yr;var ao=_r.allocType(fr.dtype,Si*Yr);_h(ao,kr.data,Si,Yr,Fo,La,Qi),Ri(fr,ao,_i),eo?fr.persistentData=ao:_r.freeType(ao)}else kr instanceof ArrayBuffer?(fr.dtype=Cs,fr.dimension=ri,Ri(fr,kr,_i),eo&&(fr.persistentData=new Uint8Array(new Uint8Array(kr)))):de.raise("invalid buffer data")}function Xi(fr){qt.bufferCount--,Ar(fr);var kr=fr.buffer;de(kr,"buffer must not be deleted already"),He.deleteBuffer(kr),fr.buffer=null,delete Cr[fr.id]}function pi(fr,kr,_i,io){qt.bufferCount++;var ri=new mr(kr);Cr[ri.id]=ri;function eo(si){var di=Qf,Uo=null,ua=0,Qi=0,Si=1;return Array.isArray(si)||W(si)||ma(si)||si instanceof ArrayBuffer?Uo=si:typeof si=="number"?ua=si|0:si&&(de.type(si,"object","buffer arguments must be an object, a number or an array"),"data"in si&&(de(Uo===null||Array.isArray(Uo)||W(Uo)||ma(Uo),"invalid data for buffer"),Uo=si.data),"usage"in si&&(de.parameter(si.usage,lu,"invalid buffer usage"),di=lu[si.usage]),"type"in si&&(de.parameter(si.type,jl,"invalid buffer type"),Qi=jl[si.type]),"dimension"in si&&(de.type(si.dimension,"number","invalid dimension"),Si=si.dimension|0),"length"in si&&(de.nni(ua,"buffer length must be a nonnegative integer"),ua=si.length|0)),ri.bind(),Uo?Di(ri,Uo,di,Qi,Si,io):(ua&&He.bufferData(ri.type,ua,di),ri.dtype=Qi||Cs,ri.usage=di,ri.dimension=Si,ri.byteLength=ua),Rn.profile&&(ri.stats.size=ri.byteLength*yf[ri.dtype]),eo}function Ei(si,di){de(di+si.byteLength<=ri.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+si.byteLength+" starting from offset "+di+" to a buffer of size "+ri.byteLength),He.bufferSubData(ri.type,di,si)}function to(si,di){var Uo=(di||0)|0,ua;if(ri.bind(),W(si)||si instanceof ArrayBuffer)Ei(si,Uo);else if(Array.isArray(si)){if(si.length>0)if(typeof si[0]=="number"){var Qi=_r.allocType(ri.dtype,si.length);Bp(Qi,si),Ei(Qi,Uo),_r.freeType(Qi)}else if(Array.isArray(si[0])||W(si[0])){ua=uc(si);var Si=ju(si,ua,ri.dtype);Ei(Si,Uo),_r.freeType(Si)}else de.raise("invalid buffer data")}else if(ma(si)){ua=si.shape;var Yr=si.stride,Fo=0,La=0,ao=0,ca=0;ua.length===1?(Fo=ua[0],La=1,ao=Yr[0],ca=0):ua.length===2?(Fo=ua[0],La=ua[1],ao=Yr[0],ca=Yr[1]):de.raise("invalid shape");var sa=Array.isArray(si.data)?ri.dtype:Vh(si.data),Ko=_r.allocType(sa,Fo*La);_h(Ko,si.data,Fo,La,ao,ca,si.offset),Ei(Ko,Uo),_r.freeType(Ko)}else de.raise("invalid data for buffer subdata");return eo}return _i||eo(fr),eo._reglType="buffer",eo._buffer=ri,eo.subdata=to,Rn.profile&&(eo.stats=ri.stats),eo.destroy=function(){Xi(ri)},eo}function ki(){ta(Cr).forEach(function(fr){fr.buffer=He.createBuffer(),He.bindBuffer(fr.type,fr.buffer),He.bufferData(fr.type,fr.persistentData||fr.byteLength,fr.usage)})}return Rn.profile&&(qt.getTotalBufferSize=function(){var fr=0;return Object.keys(Cr).forEach(function(kr){fr+=Cr[kr].stats.size}),fr}),{create:pi,createStream:li,destroyStream:Bi,clear:function(){ta(Cr).forEach(Xi),Ci.forEach(Xi)},getBuffer:function(fr){return fr&&fr._buffer instanceof mr?fr._buffer:null},restore:ki,_initBuffer:Di}}var Jf=0,Hh=0,Td=1,wd=1,m0=4,Lf=4,Fc={points:Jf,point:Hh,lines:Td,line:wd,triangles:m0,triangle:Lf,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ap=0,Vl=1,Ec=4,Qc=5120,mu=5121,Jc=5122,cc=5123,ef=5124,Pl=5125,kc=34963,_f=35040,sp=35044;function Wh(He,qt,Rn,Ar){var $r={},Cr=0,mr={uint8:mu,uint16:cc};qt.oes_element_index_uint&&(mr.uint32=Pl);function Ci(ki){this.id=Cr++,$r[this.id]=this,this.buffer=ki,this.primType=Ec,this.vertCount=0,this.type=0}Ci.prototype.bind=function(){this.buffer.bind()};var li=[];function Bi(ki){var fr=li.pop();return fr||(fr=new Ci(Rn.create(null,kc,!0,!1)._buffer)),Di(fr,ki,_f,-1,-1,0,0),fr}function Ri(ki){li.push(ki)}function Di(ki,fr,kr,_i,io,ri,eo){ki.buffer.bind();var Ei;if(fr){var to=eo;!eo&&(!W(fr)||ma(fr)&&!W(fr.data))&&(to=qt.oes_element_index_uint?Pl:cc),Rn._initBuffer(ki.buffer,fr,kr,to,3)}else He.bufferData(kc,ri,kr),ki.buffer.dtype=Ei||mu,ki.buffer.usage=kr,ki.buffer.dimension=3,ki.buffer.byteLength=ri;if(Ei=eo,!eo){switch(ki.buffer.dtype){case mu:case Qc:Ei=mu;break;case cc:case Jc:Ei=cc;break;case Pl:case ef:Ei=Pl;break;default:de.raise("unsupported type for element array")}ki.buffer.dtype=Ei}ki.type=Ei,de(Ei!==Pl||!!qt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var si=io;si<0&&(si=ki.buffer.byteLength,Ei===cc?si>>=1:Ei===Pl&&(si>>=2)),ki.vertCount=si;var di=_i;if(_i<0){di=Ec;var Uo=ki.buffer.dimension;Uo===1&&(di=ap),Uo===2&&(di=Vl),Uo===3&&(di=Ec)}ki.primType=di}function Xi(ki){Ar.elementsCount--,de(ki.buffer!==null,"must not double destroy elements"),delete $r[ki.id],ki.buffer.destroy(),ki.buffer=null}function pi(ki,fr){var kr=Rn.create(null,kc,!0),_i=new Ci(kr._buffer);Ar.elementsCount++;function io(ri){if(!ri)kr(),_i.primType=Ec,_i.vertCount=0,_i.type=mu;else if(typeof ri=="number")kr(ri),_i.primType=Ec,_i.vertCount=ri|0,_i.type=mu;else{var eo=null,Ei=sp,to=-1,si=-1,di=0,Uo=0;Array.isArray(ri)||W(ri)||ma(ri)?eo=ri:(de.type(ri,"object","invalid arguments for elements"),"data"in ri&&(eo=ri.data,de(Array.isArray(eo)||W(eo)||ma(eo),"invalid data for element buffer")),"usage"in ri&&(de.parameter(ri.usage,lu,"invalid element buffer usage"),Ei=lu[ri.usage]),"primitive"in ri&&(de.parameter(ri.primitive,Fc,"invalid element buffer primitive"),to=Fc[ri.primitive]),"count"in ri&&(de(typeof ri.count=="number"&&ri.count>=0,"invalid vertex count for elements"),si=ri.count|0),"type"in ri&&(de.parameter(ri.type,mr,"invalid buffer type"),Uo=mr[ri.type]),"length"in ri?di=ri.length|0:(di=si,Uo===cc||Uo===Jc?di*=2:(Uo===Pl||Uo===ef)&&(di*=4))),Di(_i,eo,Ei,to,si,di,Uo)}return io}return io(ki),io._reglType="elements",io._elements=_i,io.subdata=function(ri,eo){return kr.subdata(ri,eo),io},io.destroy=function(){Xi(_i)},io}return{create:pi,createStream:Bi,destroyStream:Ri,getElements:function(ki){return typeof ki=="function"&&ki._elements instanceof Ci?ki._elements:null},clear:function(){ta($r).forEach(Xi)}}}var gs=new Float32Array(1),Ad=new Uint32Array(gs.buffer),Gh=5123;function Od(He){for(var qt=_r.allocType(Gh,He.length),Rn=0;Rn<He.length;++Rn)if(isNaN(He[Rn]))qt[Rn]=65535;else if(He[Rn]===1/0)qt[Rn]=31744;else if(He[Rn]===-1/0)qt[Rn]=64512;else{gs[0]=He[Rn];var Ar=Ad[0],$r=Ar>>>31<<15,Cr=(Ar<<1>>>24)-127,mr=Ar>>13&1023;if(Cr<-24)qt[Rn]=$r;else if(Cr<-14){var Ci=-14-Cr;qt[Rn]=$r+(mr+1024>>Ci)}else Cr>15?qt[Rn]=$r+31744:qt[Rn]=$r+(Cr+15<<10)+mr}return qt}function ul(He){return Array.isArray(He)||W(He)}var bh=function(He){return!(He&He-1)&&!!He},xh=34467,ie=3553,Se=34067,tt=34069,cn=6408,Q=6406,rr=6407,Rr=6409,Li=6410,Ui=32854,so=32855,uo=36194,xa=32819,Do=32820,Ea=33635,ts=34042,da=6402,Ta=34041,Rs=35904,Ba=35906,Ha=36193,fs=33776,tl=33777,ja=33778,Cu=33779,os=35986,Sc=35987,fc=34798,Vu=35840,eh=35841,Cd=35842,bf=35843,Df=36196,tf=5121,Eh=5123,Sh=5125,Nf=5126,g0=10242,Rd=10243,Fp=10497,Bf=33071,kp=33648,Md=10240,lp=10241,Ff=9728,zp=9729,Th=9984,Up=9985,kf=9986,Zs=9987,up=33170,xf=4352,ve=4353,ze=4354,yt=34046,An=3317,sr=37440,Ur=37441,yi=37443,qi=37444,pa=33984,_a=[Th,kf,Up,Zs],xs=[0,Rr,Li,rr,cn],Fa={};Fa[Rr]=Fa[Q]=Fa[da]=1,Fa[Ta]=Fa[Li]=2,Fa[rr]=Fa[Rs]=3,Fa[cn]=Fa[Ba]=4;function Ia(He){return"[object "+He+"]"}var Ru=Ia("HTMLCanvasElement"),nf=Ia("OffscreenCanvas"),nl=Ia("CanvasRenderingContext2D"),co=Ia("ImageBitmap"),Yu=Ia("HTMLImageElement"),Pd=Ia("HTMLVideoElement"),wh=Object.keys(Gi).concat([Ru,nf,nl,co,Yu,Pd]),wa=[];wa[tf]=1,wa[Nf]=4,wa[Ha]=2,wa[Eh]=2,wa[Sh]=4;var ns=[];ns[Ui]=2,ns[so]=2,ns[uo]=2,ns[Ta]=4,ns[fs]=.5,ns[tl]=.5,ns[ja]=1,ns[Cu]=1,ns[os]=.5,ns[Sc]=1,ns[fc]=1,ns[Vu]=.5,ns[eh]=.25,ns[Cd]=.5,ns[bf]=.25,ns[Df]=.5;function y0(He){return Array.isArray(He)&&(He.length===0||typeof He[0]=="number")}function Zi(He){if(!Array.isArray(He))return!1;var qt=He.length;return!(qt===0||!ul(He[0]))}function Ef(He){return Object.prototype.toString.call(He)}function Id(He){return Ef(He)===Ru}function Ah(He){return Ef(He)===nf}function Sf(He){return Ef(He)===nl}function hc(He){return Ef(He)===co}function _0(He){return Ef(He)===Yu}function Oh(He){return Ef(He)===Pd}function Ku(He){if(!He)return!1;var qt=Ef(He);return wh.indexOf(qt)>=0?!0:y0(He)||Zi(He)||ma(He)}function th(He){return Gi[Object.prototype.toString.call(He)]|0}function b0(He,qt){var Rn=qt.length;switch(He.type){case tf:case Eh:case Sh:case Nf:var Ar=_r.allocType(He.type,Rn);Ar.set(qt),He.data=Ar;break;case Ha:He.data=Od(qt);break;default:de.raise("unsupported texture type, must specify a typed array")}}function Ld(He,qt){return _r.allocType(He.type===Ha?Nf:He.type,qt)}function x0(He,qt){He.type===Ha?(He.data=Od(qt),_r.freeType(qt)):He.data=qt}function iv(He,qt,Rn,Ar,$r,Cr){for(var mr=He.width,Ci=He.height,li=He.channels,Bi=mr*Ci*li,Ri=Ld(He,Bi),Di=0,Xi=0;Xi<Ci;++Xi)for(var pi=0;pi<mr;++pi)for(var ki=0;ki<li;++ki)Ri[Di++]=qt[Rn*pi+Ar*Xi+$r*ki+Cr];x0(He,Ri)}function dc(He,qt,Rn,Ar,$r,Cr){var mr;if(typeof ns[He]!="undefined"?mr=ns[He]:mr=Fa[He]*wa[qt],Cr&&(mr*=6),$r){for(var Ci=0,li=Rn;li>=1;)Ci+=mr*li*li,li/=2;return Ci}else return mr*Rn*Ar}function zc(He,qt,Rn,Ar,$r,Cr,mr){var Ci={"don't care":xf,"dont care":xf,nice:ze,fast:ve},li={repeat:Fp,clamp:Bf,mirror:kp},Bi={nearest:Ff,linear:zp},Ri=D({mipmap:Zs,"nearest mipmap nearest":Th,"linear mipmap nearest":Up,"nearest mipmap linear":kf,"linear mipmap linear":Zs},Bi),Di={none:0,browser:qi},Xi={uint8:tf,rgba4:xa,rgb565:Ea,"rgb5 a1":Do},pi={alpha:Q,luminance:Rr,"luminance alpha":Li,rgb:rr,rgba:cn,rgba4:Ui,"rgb5 a1":so,rgb565:uo},ki={};qt.ext_srgb&&(pi.srgb=Rs,pi.srgba=Ba),qt.oes_texture_float&&(Xi.float32=Xi.float=Nf),qt.oes_texture_half_float&&(Xi.float16=Xi["half float"]=Ha),qt.webgl_depth_texture&&(D(pi,{depth:da,"depth stencil":Ta}),D(Xi,{uint16:Eh,uint32:Sh,"depth stencil":ts})),qt.webgl_compressed_texture_s3tc&&D(ki,{"rgb s3tc dxt1":fs,"rgba s3tc dxt1":tl,"rgba s3tc dxt3":ja,"rgba s3tc dxt5":Cu}),qt.webgl_compressed_texture_atc&&D(ki,{"rgb atc":os,"rgba atc explicit alpha":Sc,"rgba atc interpolated alpha":fc}),qt.webgl_compressed_texture_pvrtc&&D(ki,{"rgb pvrtc 4bppv1":Vu,"rgb pvrtc 2bppv1":eh,"rgba pvrtc 4bppv1":Cd,"rgba pvrtc 2bppv1":bf}),qt.webgl_compressed_texture_etc1&&(ki["rgb etc1"]=Df);var fr=Array.prototype.slice.call(He.getParameter(xh));Object.keys(ki).forEach(function(gn){var Pr=ki[gn];fr.indexOf(Pr)>=0&&(pi[gn]=Pr)});var kr=Object.keys(pi);Rn.textureFormats=kr;var _i=[];Object.keys(pi).forEach(function(gn){var Pr=pi[gn];_i[Pr]=gn});var io=[];Object.keys(Xi).forEach(function(gn){var Pr=Xi[gn];io[Pr]=gn});var ri=[];Object.keys(Bi).forEach(function(gn){var Pr=Bi[gn];ri[Pr]=gn});var eo=[];Object.keys(Ri).forEach(function(gn){var Pr=Ri[gn];eo[Pr]=gn});var Ei=[];Object.keys(li).forEach(function(gn){var Pr=li[gn];Ei[Pr]=gn});var to=kr.reduce(function(gn,Pr){var xr=pi[Pr];return xr===Rr||xr===Q||xr===Rr||xr===Li||xr===da||xr===Ta||qt.ext_srgb&&(xr===Rs||xr===Ba)?gn[xr]=xr:xr===so||Pr.indexOf("rgba")>=0?gn[xr]=cn:gn[xr]=rr,gn},{});function si(){this.internalformat=cn,this.format=cn,this.type=tf,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=qi,this.width=0,this.height=0,this.channels=0}function di(gn,Pr){gn.internalformat=Pr.internalformat,gn.format=Pr.format,gn.type=Pr.type,gn.compressed=Pr.compressed,gn.premultiplyAlpha=Pr.premultiplyAlpha,gn.flipY=Pr.flipY,gn.unpackAlignment=Pr.unpackAlignment,gn.colorSpace=Pr.colorSpace,gn.width=Pr.width,gn.height=Pr.height,gn.channels=Pr.channels}function Uo(gn,Pr){if(!(typeof Pr!="object"||!Pr)){if("premultiplyAlpha"in Pr&&(de.type(Pr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),gn.premultiplyAlpha=Pr.premultiplyAlpha),"flipY"in Pr&&(de.type(Pr.flipY,"boolean","invalid texture flip"),gn.flipY=Pr.flipY),"alignment"in Pr&&(de.oneOf(Pr.alignment,[1,2,4,8],"invalid texture unpack alignment"),gn.unpackAlignment=Pr.alignment),"colorSpace"in Pr&&(de.parameter(Pr.colorSpace,Di,"invalid colorSpace"),gn.colorSpace=Di[Pr.colorSpace]),"type"in Pr){var xr=Pr.type;de(qt.oes_texture_float||!(xr==="float"||xr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),de(qt.oes_texture_half_float||!(xr==="half float"||xr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),de(qt.webgl_depth_texture||!(xr==="uint16"||xr==="uint32"||xr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(xr,Xi,"invalid texture type"),gn.type=Xi[xr]}var vo=gn.width,ka=gn.height,Ps=gn.channels,Dt=!1;"shape"in Pr?(de(Array.isArray(Pr.shape)&&Pr.shape.length>=2,"shape must be an array"),vo=Pr.shape[0],ka=Pr.shape[1],Pr.shape.length===3&&(Ps=Pr.shape[2],de(Ps>0&&Ps<=4,"invalid number of channels"),Dt=!0),de(vo>=0&&vo<=Rn.maxTextureSize,"invalid width"),de(ka>=0&&ka<=Rn.maxTextureSize,"invalid height")):("radius"in Pr&&(vo=ka=Pr.radius,de(vo>=0&&vo<=Rn.maxTextureSize,"invalid radius")),"width"in Pr&&(vo=Pr.width,de(vo>=0&&vo<=Rn.maxTextureSize,"invalid width")),"height"in Pr&&(ka=Pr.height,de(ka>=0&&ka<=Rn.maxTextureSize,"invalid height")),"channels"in Pr&&(Ps=Pr.channels,de(Ps>0&&Ps<=4,"invalid number of channels"),Dt=!0)),gn.width=vo|0,gn.height=ka|0,gn.channels=Ps|0;var nn=!1;if("format"in Pr){var Mn=Pr.format;de(qt.webgl_depth_texture||!(Mn==="depth"||Mn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(Mn,pi,"invalid texture format");var Tr=gn.internalformat=pi[Mn];gn.format=to[Tr],Mn in Xi&&("type"in Pr||(gn.type=Xi[Mn])),Mn in ki&&(gn.compressed=!0),nn=!0}!Dt&&nn?gn.channels=Fa[gn.format]:Dt&&!nn?gn.channels!==xs[gn.format]&&(gn.format=gn.internalformat=xs[gn.channels]):nn&&Dt&&de(gn.channels===Fa[gn.format],"number of channels inconsistent with specified format")}}function ua(gn){He.pixelStorei(sr,gn.flipY),He.pixelStorei(Ur,gn.premultiplyAlpha),He.pixelStorei(yi,gn.colorSpace),He.pixelStorei(An,gn.unpackAlignment)}function Qi(){si.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Si(gn,Pr){var xr=null;if(Ku(Pr)?xr=Pr:Pr&&(de.type(Pr,"object","invalid pixel data type"),Uo(gn,Pr),"x"in Pr&&(gn.xOffset=Pr.x|0),"y"in Pr&&(gn.yOffset=Pr.y|0),Ku(Pr.data)&&(xr=Pr.data)),de(!gn.compressed||xr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Pr.copy){de(!xr,"can not specify copy and data field for the same texture");var vo=$r.viewportWidth,ka=$r.viewportHeight;gn.width=gn.width||vo-gn.xOffset,gn.height=gn.height||ka-gn.yOffset,gn.needsCopy=!0,de(gn.xOffset>=0&&gn.xOffset<vo&&gn.yOffset>=0&&gn.yOffset<ka&&gn.width>0&&gn.width<=vo&&gn.height>0&&gn.height<=ka,"copy texture read out of bounds")}else if(!xr)gn.width=gn.width||1,gn.height=gn.height||1,gn.channels=gn.channels||4;else if(W(xr))gn.channels=gn.channels||4,gn.data=xr,!("type"in Pr)&&gn.type===tf&&(gn.type=th(xr));else if(y0(xr))gn.channels=gn.channels||4,b0(gn,xr),gn.alignment=1,gn.needsFree=!0;else if(ma(xr)){var Ps=xr.data;!Array.isArray(Ps)&&gn.type===tf&&(gn.type=th(Ps));var Dt=xr.shape,nn=xr.stride,Mn,Tr,br,Vn,Jn,or;Dt.length===3?(br=Dt[2],or=nn[2]):(de(Dt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),br=1,or=1),Mn=Dt[0],Tr=Dt[1],Vn=nn[0],Jn=nn[1],gn.alignment=1,gn.width=Mn,gn.height=Tr,gn.channels=br,gn.format=gn.internalformat=xs[br],gn.needsFree=!0,iv(gn,Ps,Vn,Jn,or,xr.offset)}else if(Id(xr)||Ah(xr)||Sf(xr))Id(xr)||Ah(xr)?gn.element=xr:gn.element=xr.canvas,gn.width=gn.element.width,gn.height=gn.element.height,gn.channels=4;else if(hc(xr))gn.element=xr,gn.width=xr.width,gn.height=xr.height,gn.channels=4;else if(_0(xr))gn.element=xr,gn.width=xr.naturalWidth,gn.height=xr.naturalHeight,gn.channels=4;else if(Oh(xr))gn.element=xr,gn.width=xr.videoWidth,gn.height=xr.videoHeight,gn.channels=4;else if(Zi(xr)){var xn=gn.width||xr[0].length,Gn=gn.height||xr.length,tn=gn.channels;ul(xr[0][0])?tn=tn||xr[0][0].length:tn=tn||1;for(var Kn=vs.shape(xr),Dr=1,jr=0;jr<Kn.length;++jr)Dr*=Kn[jr];var vi=Ld(gn,Dr);vs.flatten(xr,Kn,"",vi),x0(gn,vi),gn.alignment=1,gn.width=xn,gn.height=Gn,gn.channels=tn,gn.format=gn.internalformat=xs[tn],gn.needsFree=!0}gn.type===Nf?de(Rn.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):gn.type===Ha&&de(Rn.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Yr(gn,Pr,xr){var vo=gn.element,ka=gn.data,Ps=gn.internalformat,Dt=gn.format,nn=gn.type,Mn=gn.width,Tr=gn.height;ua(gn),vo?He.texImage2D(Pr,xr,Dt,Dt,nn,vo):gn.compressed?He.compressedTexImage2D(Pr,xr,Ps,Mn,Tr,0,ka):gn.needsCopy?(Ar(),He.copyTexImage2D(Pr,xr,Dt,gn.xOffset,gn.yOffset,Mn,Tr,0)):He.texImage2D(Pr,xr,Dt,Mn,Tr,0,Dt,nn,ka||null)}function Fo(gn,Pr,xr,vo,ka){var Ps=gn.element,Dt=gn.data,nn=gn.internalformat,Mn=gn.format,Tr=gn.type,br=gn.width,Vn=gn.height;ua(gn),Ps?He.texSubImage2D(Pr,ka,xr,vo,Mn,Tr,Ps):gn.compressed?He.compressedTexSubImage2D(Pr,ka,xr,vo,nn,br,Vn,Dt):gn.needsCopy?(Ar(),He.copyTexSubImage2D(Pr,ka,xr,vo,gn.xOffset,gn.yOffset,br,Vn)):He.texSubImage2D(Pr,ka,xr,vo,br,Vn,Mn,Tr,Dt)}var La=[];function ao(){return La.pop()||new Qi}function ca(gn){gn.needsFree&&_r.freeType(gn.data),Qi.call(gn),La.push(gn)}function sa(){si.call(this),this.genMipmaps=!1,this.mipmapHint=xf,this.mipmask=0,this.images=Array(16)}function Ko(gn,Pr,xr){var vo=gn.images[0]=ao();gn.mipmask=1,vo.width=gn.width=Pr,vo.height=gn.height=xr,vo.channels=gn.channels=4}function hs(gn,Pr){var xr=null;if(Ku(Pr))xr=gn.images[0]=ao(),di(xr,gn),Si(xr,Pr),gn.mipmask=1;else if(Uo(gn,Pr),Array.isArray(Pr.mipmap))for(var vo=Pr.mipmap,ka=0;ka<vo.length;++ka)xr=gn.images[ka]=ao(),di(xr,gn),xr.width>>=ka,xr.height>>=ka,Si(xr,vo[ka]),gn.mipmask|=1<<ka;else xr=gn.images[0]=ao(),di(xr,gn),Si(xr,Pr),gn.mipmask=1;di(gn,gn.images[0]),gn.compressed&&(gn.internalformat===fs||gn.internalformat===tl||gn.internalformat===ja||gn.internalformat===Cu)&&de(gn.width%4===0&&gn.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Tl(gn,Pr){for(var xr=gn.images,vo=0;vo<xr.length;++vo){if(!xr[vo])return;Yr(xr[vo],Pr,vo)}}var Wu=[];function Za(){var gn=Wu.pop()||new sa;si.call(gn),gn.mipmask=0;for(var Pr=0;Pr<16;++Pr)gn.images[Pr]=null;return gn}function Wl(gn){for(var Pr=gn.images,xr=0;xr<Pr.length;++xr)Pr[xr]&&ca(Pr[xr]),Pr[xr]=null;Wu.push(gn)}function Ks(){this.minFilter=Ff,this.magFilter=Ff,this.wrapS=Bf,this.wrapT=Bf,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=xf}function se(gn,Pr){if("min"in Pr){var xr=Pr.min;de.parameter(xr,Ri),gn.minFilter=Ri[xr],_a.indexOf(gn.minFilter)>=0&&!("faces"in Pr)&&(gn.genMipmaps=!0)}if("mag"in Pr){var vo=Pr.mag;de.parameter(vo,Bi),gn.magFilter=Bi[vo]}var ka=gn.wrapS,Ps=gn.wrapT;if("wrap"in Pr){var Dt=Pr.wrap;typeof Dt=="string"?(de.parameter(Dt,li),ka=Ps=li[Dt]):Array.isArray(Dt)&&(de.parameter(Dt[0],li),de.parameter(Dt[1],li),ka=li[Dt[0]],Ps=li[Dt[1]])}else{if("wrapS"in Pr){var nn=Pr.wrapS;de.parameter(nn,li),ka=li[nn]}if("wrapT"in Pr){var Mn=Pr.wrapT;de.parameter(Mn,li),Ps=li[Mn]}}if(gn.wrapS=ka,gn.wrapT=Ps,"anisotropic"in Pr){var Tr=Pr.anisotropic;de(typeof Tr=="number"&&Tr>=1&&Tr<=Rn.maxAnisotropic,"aniso samples must be between 1 and "),gn.anisotropic=Pr.anisotropic}if("mipmap"in Pr){var br=!1;switch(typeof Pr.mipmap){case"string":de.parameter(Pr.mipmap,Ci,"invalid mipmap hint"),gn.mipmapHint=Ci[Pr.mipmap],gn.genMipmaps=!0,br=!0;break;case"boolean":br=gn.genMipmaps=Pr.mipmap;break;case"object":de(Array.isArray(Pr.mipmap),"invalid mipmap type"),gn.genMipmaps=!1,br=!0;break;default:de.raise("invalid mipmap type")}br&&!("min"in Pr)&&(gn.minFilter=Th)}}function eu(gn,Pr){He.texParameteri(Pr,lp,gn.minFilter),He.texParameteri(Pr,Md,gn.magFilter),He.texParameteri(Pr,g0,gn.wrapS),He.texParameteri(Pr,Rd,gn.wrapT),qt.ext_texture_filter_anisotropic&&He.texParameteri(Pr,yt,gn.anisotropic),gn.genMipmaps&&(He.hint(up,gn.mipmapHint),He.generateMipmap(Pr))}var rs=0,ur={},Kr=Rn.maxTextureUnits,Dl=Array(Kr).map(function(){return null});function Sa(gn){si.call(this),this.mipmask=0,this.internalformat=cn,this.id=rs++,this.refCount=1,this.target=gn,this.texture=He.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ks,mr.profile&&(this.stats={size:0})}function rc(gn){He.activeTexture(pa),He.bindTexture(gn.target,gn.texture)}function Us(){var gn=Dl[0];gn?He.bindTexture(gn.target,gn.texture):He.bindTexture(ie,null)}function qo(gn){var Pr=gn.texture;de(Pr,"must not double destroy texture");var xr=gn.unit,vo=gn.target;xr>=0&&(He.activeTexture(pa+xr),He.bindTexture(vo,null),Dl[xr]=null),He.deleteTexture(Pr),gn.texture=null,gn.params=null,gn.pixels=null,gn.refCount=0,delete ur[gn.id],Cr.textureCount--}D(Sa.prototype,{bind:function(){var gn=this;gn.bindCount+=1;var Pr=gn.unit;if(Pr<0){for(var xr=0;xr<Kr;++xr){var vo=Dl[xr];if(vo){if(vo.bindCount>0)continue;vo.unit=-1}Dl[xr]=gn,Pr=xr;break}Pr>=Kr&&de.raise("insufficient number of texture units"),mr.profile&&Cr.maxTextureUnits<Pr+1&&(Cr.maxTextureUnits=Pr+1),gn.unit=Pr,He.activeTexture(pa+Pr),He.bindTexture(gn.target,gn.texture)}return Pr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&qo(this)}});function Ca(gn,Pr){var xr=new Sa(ie);ur[xr.id]=xr,Cr.textureCount++;function vo(Dt,nn){var Mn=xr.texInfo;Ks.call(Mn);var Tr=Za();return typeof Dt=="number"?typeof nn=="number"?Ko(Tr,Dt|0,nn|0):Ko(Tr,Dt|0,Dt|0):Dt?(de.type(Dt,"object","invalid arguments to regl.texture"),se(Mn,Dt),hs(Tr,Dt)):Ko(Tr,1,1),Mn.genMipmaps&&(Tr.mipmask=(Tr.width<<1)-1),xr.mipmask=Tr.mipmask,di(xr,Tr),de.texture2D(Mn,Tr,Rn),xr.internalformat=Tr.internalformat,vo.width=Tr.width,vo.height=Tr.height,rc(xr),Tl(Tr,ie),eu(Mn,ie),Us(),Wl(Tr),mr.profile&&(xr.stats.size=dc(xr.internalformat,xr.type,Tr.width,Tr.height,Mn.genMipmaps,!1)),vo.format=_i[xr.internalformat],vo.type=io[xr.type],vo.mag=ri[Mn.magFilter],vo.min=eo[Mn.minFilter],vo.wrapS=Ei[Mn.wrapS],vo.wrapT=Ei[Mn.wrapT],vo}function ka(Dt,nn,Mn,Tr){de(!!Dt,"must specify image data");var br=nn|0,Vn=Mn|0,Jn=Tr|0,or=ao();return di(or,xr),or.width=0,or.height=0,Si(or,Dt),or.width=or.width||(xr.width>>Jn)-br,or.height=or.height||(xr.height>>Jn)-Vn,de(xr.type===or.type&&xr.format===or.format&&xr.internalformat===or.internalformat,"incompatible format for texture.subimage"),de(br>=0&&Vn>=0&&br+or.width<=xr.width&&Vn+or.height<=xr.height,"texture.subimage write out of bounds"),de(xr.mipmask&1<<Jn,"missing mipmap data"),de(or.data||or.element||or.needsCopy,"missing image data"),rc(xr),Fo(or,ie,br,Vn,Jn),Us(),ca(or),vo}function Ps(Dt,nn){var Mn=Dt|0,Tr=nn|0||Mn;if(Mn===xr.width&&Tr===xr.height)return vo;vo.width=xr.width=Mn,vo.height=xr.height=Tr,rc(xr);for(var br=0;xr.mipmask>>br;++br){var Vn=Mn>>br,Jn=Tr>>br;if(!Vn||!Jn)break;He.texImage2D(ie,br,xr.format,Vn,Jn,0,xr.format,xr.type,null)}return Us(),mr.profile&&(xr.stats.size=dc(xr.internalformat,xr.type,Mn,Tr,!1,!1)),vo}return vo(gn,Pr),vo.subimage=ka,vo.resize=Ps,vo._reglType="texture2d",vo._texture=xr,mr.profile&&(vo.stats=xr.stats),vo.destroy=function(){xr.decRef()},vo}function ds(gn,Pr,xr,vo,ka,Ps){var Dt=new Sa(Se);ur[Dt.id]=Dt,Cr.cubeCount++;var nn=new Array(6);function Mn(Vn,Jn,or,xn,Gn,tn){var Kn,Dr=Dt.texInfo;for(Ks.call(Dr),Kn=0;Kn<6;++Kn)nn[Kn]=Za();if(typeof Vn=="number"||!Vn){var jr=Vn|0||1;for(Kn=0;Kn<6;++Kn)Ko(nn[Kn],jr,jr)}else if(typeof Vn=="object")if(Jn)hs(nn[0],Vn),hs(nn[1],Jn),hs(nn[2],or),hs(nn[3],xn),hs(nn[4],Gn),hs(nn[5],tn);else if(se(Dr,Vn),Uo(Dt,Vn),"faces"in Vn){var vi=Vn.faces;for(de(Array.isArray(vi)&&vi.length===6,"cube faces must be a length 6 array"),Kn=0;Kn<6;++Kn)de(typeof vi[Kn]=="object"&&!!vi[Kn],"invalid input for cube map face"),di(nn[Kn],Dt),hs(nn[Kn],vi[Kn])}else for(Kn=0;Kn<6;++Kn)hs(nn[Kn],Vn);else de.raise("invalid arguments to cube map");for(di(Dt,nn[0]),Rn.npotTextureCube||de(bh(Dt.width)&&bh(Dt.height),"your browser does not support non power or two texture dimensions"),Dr.genMipmaps?Dt.mipmask=(nn[0].width<<1)-1:Dt.mipmask=nn[0].mipmask,de.textureCube(Dt,Dr,nn,Rn),Dt.internalformat=nn[0].internalformat,Mn.width=nn[0].width,Mn.height=nn[0].height,rc(Dt),Kn=0;Kn<6;++Kn)Tl(nn[Kn],tt+Kn);for(eu(Dr,Se),Us(),mr.profile&&(Dt.stats.size=dc(Dt.internalformat,Dt.type,Mn.width,Mn.height,Dr.genMipmaps,!0)),Mn.format=_i[Dt.internalformat],Mn.type=io[Dt.type],Mn.mag=ri[Dr.magFilter],Mn.min=eo[Dr.minFilter],Mn.wrapS=Ei[Dr.wrapS],Mn.wrapT=Ei[Dr.wrapT],Kn=0;Kn<6;++Kn)Wl(nn[Kn]);return Mn}function Tr(Vn,Jn,or,xn,Gn){de(!!Jn,"must specify image data"),de(typeof Vn=="number"&&Vn===(Vn|0)&&Vn>=0&&Vn<6,"invalid face");var tn=or|0,Kn=xn|0,Dr=Gn|0,jr=ao();return di(jr,Dt),jr.width=0,jr.height=0,Si(jr,Jn),jr.width=jr.width||(Dt.width>>Dr)-tn,jr.height=jr.height||(Dt.height>>Dr)-Kn,de(Dt.type===jr.type&&Dt.format===jr.format&&Dt.internalformat===jr.internalformat,"incompatible format for texture.subimage"),de(tn>=0&&Kn>=0&&tn+jr.width<=Dt.width&&Kn+jr.height<=Dt.height,"texture.subimage write out of bounds"),de(Dt.mipmask&1<<Dr,"missing mipmap data"),de(jr.data||jr.element||jr.needsCopy,"missing image data"),rc(Dt),Fo(jr,tt+Vn,tn,Kn,Dr),Us(),ca(jr),Mn}function br(Vn){var Jn=Vn|0;if(Jn!==Dt.width){Mn.width=Dt.width=Jn,Mn.height=Dt.height=Jn,rc(Dt);for(var or=0;or<6;++or)for(var xn=0;Dt.mipmask>>xn;++xn)He.texImage2D(tt+or,xn,Dt.format,Jn>>xn,Jn>>xn,0,Dt.format,Dt.type,null);return Us(),mr.profile&&(Dt.stats.size=dc(Dt.internalformat,Dt.type,Mn.width,Mn.height,!1,!0)),Mn}}return Mn(gn,Pr,xr,vo,ka,Ps),Mn.subimage=Tr,Mn.resize=br,Mn._reglType="textureCube",Mn._texture=Dt,mr.profile&&(Mn.stats=Dt.stats),Mn.destroy=function(){Dt.decRef()},Mn}function fu(){for(var gn=0;gn<Kr;++gn)He.activeTexture(pa+gn),He.bindTexture(ie,null),Dl[gn]=null;ta(ur).forEach(qo),Cr.cubeCount=0,Cr.textureCount=0}mr.profile&&(Cr.getTotalTextureSize=function(){var gn=0;return Object.keys(ur).forEach(function(Pr){gn+=ur[Pr].stats.size}),gn});function Ih(){for(var gn=0;gn<Kr;++gn){var Pr=Dl[gn];Pr&&(Pr.bindCount=0,Pr.unit=-1,Dl[gn]=null)}ta(ur).forEach(function(xr){xr.texture=He.createTexture(),He.bindTexture(xr.target,xr.texture);for(var vo=0;vo<32;++vo)if(xr.mipmask&1<<vo)if(xr.target===ie)He.texImage2D(ie,vo,xr.internalformat,xr.width>>vo,xr.height>>vo,0,xr.internalformat,xr.type,null);else for(var ka=0;ka<6;++ka)He.texImage2D(tt+ka,vo,xr.internalformat,xr.width>>vo,xr.height>>vo,0,xr.internalformat,xr.type,null);eu(xr.texInfo,xr.target)})}return{create2D:Ca,createCube:ds,clear:fu,getTexture:function(gn){return null},restore:Ih}}var ba=36161,pc=32854,rf=32855,gu=36194,Zh=33189,ql=36168,Hu=34041,qu=35907,cp=34836,No=34842,So=34843,Ql=[];Ql[pc]=2,Ql[rf]=2,Ql[gu]=2,Ql[Zh]=2,Ql[ql]=1,Ql[Hu]=4,Ql[qu]=4,Ql[cp]=16,Ql[No]=8,Ql[So]=6;function Qu(He,qt,Rn){return Ql[He]*qt*Rn}var Ju=function(He,qt,Rn,Ar,$r){var Cr={rgba4:pc,rgb565:gu,"rgb5 a1":rf,depth:Zh,stencil:ql,"depth stencil":Hu};qt.ext_srgb&&(Cr.srgba=qu),qt.ext_color_buffer_half_float&&(Cr.rgba16f=No,Cr.rgb16f=So),qt.webgl_color_buffer_float&&(Cr.rgba32f=cp);var mr=[];Object.keys(Cr).forEach(function(pi){var ki=Cr[pi];mr[ki]=pi});var Ci=0,li={};function Bi(pi){this.id=Ci++,this.refCount=1,this.renderbuffer=pi,this.format=pc,this.width=0,this.height=0,$r.profile&&(this.stats={size:0})}Bi.prototype.decRef=function(){--this.refCount<=0&&Ri(this)};function Ri(pi){var ki=pi.renderbuffer;de(ki,"must not double destroy renderbuffer"),He.bindRenderbuffer(ba,null),He.deleteRenderbuffer(ki),pi.renderbuffer=null,pi.refCount=0,delete li[pi.id],Ar.renderbufferCount--}function Di(pi,ki){var fr=new Bi(He.createRenderbuffer());li[fr.id]=fr,Ar.renderbufferCount++;function kr(io,ri){var eo=0,Ei=0,to=pc;if(typeof io=="object"&&io){var si=io;if("shape"in si){var di=si.shape;de(Array.isArray(di)&&di.length>=2,"invalid renderbuffer shape"),eo=di[0]|0,Ei=di[1]|0}else"radius"in si&&(eo=Ei=si.radius|0),"width"in si&&(eo=si.width|0),"height"in si&&(Ei=si.height|0);"format"in si&&(de.parameter(si.format,Cr,"invalid renderbuffer format"),to=Cr[si.format])}else typeof io=="number"?(eo=io|0,typeof ri=="number"?Ei=ri|0:Ei=eo):io?de.raise("invalid arguments to renderbuffer constructor"):eo=Ei=1;if(de(eo>0&&Ei>0&&eo<=Rn.maxRenderbufferSize&&Ei<=Rn.maxRenderbufferSize,"invalid renderbuffer size"),!(eo===fr.width&&Ei===fr.height&&to===fr.format))return kr.width=fr.width=eo,kr.height=fr.height=Ei,fr.format=to,He.bindRenderbuffer(ba,fr.renderbuffer),He.renderbufferStorage(ba,to,eo,Ei),de(He.getError()===0,"invalid render buffer format"),$r.profile&&(fr.stats.size=Qu(fr.format,fr.width,fr.height)),kr.format=mr[fr.format],kr}function _i(io,ri){var eo=io|0,Ei=ri|0||eo;return eo===fr.width&&Ei===fr.height||(de(eo>0&&Ei>0&&eo<=Rn.maxRenderbufferSize&&Ei<=Rn.maxRenderbufferSize,"invalid renderbuffer size"),kr.width=fr.width=eo,kr.height=fr.height=Ei,He.bindRenderbuffer(ba,fr.renderbuffer),He.renderbufferStorage(ba,fr.format,eo,Ei),de(He.getError()===0,"invalid render buffer format"),$r.profile&&(fr.stats.size=Qu(fr.format,fr.width,fr.height))),kr}return kr(pi,ki),kr.resize=_i,kr._reglType="renderbuffer",kr._renderbuffer=fr,$r.profile&&(kr.stats=fr.stats),kr.destroy=function(){fr.decRef()},kr}$r.profile&&(Ar.getTotalRenderbufferSize=function(){var pi=0;return Object.keys(li).forEach(function(ki){pi+=li[ki].stats.size}),pi});function Xi(){ta(li).forEach(function(pi){pi.renderbuffer=He.createRenderbuffer(),He.bindRenderbuffer(ba,pi.renderbuffer),He.renderbufferStorage(ba,pi.format,pi.width,pi.height)}),He.bindRenderbuffer(ba,null)}return{create:Di,clear:function(){ta(li).forEach(Ri)},restore:Xi}},dl=36160,Tc=36161,nh=3553,Dd=34069,Ms=36064,yu=36096,E0=36128,Xh=33306,fp=36053,Ch=36054,ec=36055,hp=36057,wc=36061,jp=36193,Uc=5121,Nd=5126,S0=6407,Rh=6408,$h=6402,T0=[S0,Rh],zf=[];zf[Rh]=4,zf[S0]=3;var Uf=[];Uf[Uc]=1,Uf[Nd]=4,Uf[jp]=2;var w0=32854,rh=32855,Tf=36194,ov=33189,jf=36168,Yh=34041,A0=35907,_=34836,S=34842,x=34843,O=[w0,rh,Tf,A0,S,x,_],k={};k[fp]="complete",k[Ch]="incomplete attachment",k[hp]="incomplete dimensions",k[ec]="incomplete, missing attachment",k[wc]="unsupported";function Z(He,qt,Rn,Ar,$r,Cr){var mr={cur:null,next:null,dirty:!1,setFBO:null},Ci=["rgba"],li=["rgba4","rgb565","rgb5 a1"];qt.ext_srgb&&li.push("srgba"),qt.ext_color_buffer_half_float&&li.push("rgba16f","rgb16f"),qt.webgl_color_buffer_float&&li.push("rgba32f");var Bi=["uint8"];qt.oes_texture_half_float&&Bi.push("half float","float16"),qt.oes_texture_float&&Bi.push("float","float32");function Ri(Qi,Si,Yr){this.target=Qi,this.texture=Si,this.renderbuffer=Yr;var Fo=0,La=0;Si?(Fo=Si.width,La=Si.height):Yr&&(Fo=Yr.width,La=Yr.height),this.width=Fo,this.height=La}function Di(Qi){Qi&&(Qi.texture&&Qi.texture._texture.decRef(),Qi.renderbuffer&&Qi.renderbuffer._renderbuffer.decRef())}function Xi(Qi,Si,Yr){if(Qi)if(Qi.texture){var Fo=Qi.texture._texture,La=Math.max(1,Fo.width),ao=Math.max(1,Fo.height);de(La===Si&&ao===Yr,"inconsistent width/height for supplied texture"),Fo.refCount+=1}else{var ca=Qi.renderbuffer._renderbuffer;de(ca.width===Si&&ca.height===Yr,"inconsistent width/height for renderbuffer"),ca.refCount+=1}}function pi(Qi,Si){Si&&(Si.texture?He.framebufferTexture2D(dl,Qi,Si.target,Si.texture._texture.texture,0):He.framebufferRenderbuffer(dl,Qi,Tc,Si.renderbuffer._renderbuffer.renderbuffer))}function ki(Qi){var Si=nh,Yr=null,Fo=null,La=Qi;typeof Qi=="object"&&(La=Qi.data,"target"in Qi&&(Si=Qi.target|0)),de.type(La,"function","invalid attachment data");var ao=La._reglType;return ao==="texture2d"?(Yr=La,de(Si===nh)):ao==="textureCube"?(Yr=La,de(Si>=Dd&&Si<Dd+6,"invalid cube map target")):ao==="renderbuffer"?(Fo=La,Si=Tc):de.raise("invalid regl object for attachment"),new Ri(Si,Yr,Fo)}function fr(Qi,Si,Yr,Fo,La){if(Yr){var ao=Ar.create2D({width:Qi,height:Si,format:Fo,type:La});return ao._texture.refCount=0,new Ri(nh,ao,null)}else{var ca=$r.create({width:Qi,height:Si,format:Fo});return ca._renderbuffer.refCount=0,new Ri(Tc,null,ca)}}function kr(Qi){return Qi&&(Qi.texture||Qi.renderbuffer)}function _i(Qi,Si,Yr){Qi&&(Qi.texture?Qi.texture.resize(Si,Yr):Qi.renderbuffer&&Qi.renderbuffer.resize(Si,Yr),Qi.width=Si,Qi.height=Yr)}var io=0,ri={};function eo(){this.id=io++,ri[this.id]=this,this.framebuffer=He.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ei(Qi){Qi.colorAttachments.forEach(Di),Di(Qi.depthAttachment),Di(Qi.stencilAttachment),Di(Qi.depthStencilAttachment)}function to(Qi){var Si=Qi.framebuffer;de(Si,"must not double destroy framebuffer"),He.deleteFramebuffer(Si),Qi.framebuffer=null,Cr.framebufferCount--,delete ri[Qi.id]}function si(Qi){var Si;He.bindFramebuffer(dl,Qi.framebuffer);var Yr=Qi.colorAttachments;for(Si=0;Si<Yr.length;++Si)pi(Ms+Si,Yr[Si]);for(Si=Yr.length;Si<Rn.maxColorAttachments;++Si)He.framebufferTexture2D(dl,Ms+Si,nh,null,0);He.framebufferTexture2D(dl,Xh,nh,null,0),He.framebufferTexture2D(dl,yu,nh,null,0),He.framebufferTexture2D(dl,E0,nh,null,0),pi(yu,Qi.depthAttachment),pi(E0,Qi.stencilAttachment),pi(Xh,Qi.depthStencilAttachment);var Fo=He.checkFramebufferStatus(dl);!He.isContextLost()&&Fo!==fp&&de.raise("framebuffer configuration not supported, status = "+k[Fo]),He.bindFramebuffer(dl,mr.next?mr.next.framebuffer:null),mr.cur=mr.next,He.getError()}function di(Qi,Si){var Yr=new eo;Cr.framebufferCount++;function Fo(ao,ca){var sa;de(mr.next!==Yr,"can not update framebuffer which is currently in use");var Ko=0,hs=0,Tl=!0,Wu=!0,Za=null,Wl=!0,Ks="rgba",se="uint8",eu=1,rs=null,ur=null,Kr=null,Dl=!1;if(typeof ao=="number")Ko=ao|0,hs=ca|0||Ko;else if(!ao)Ko=hs=1;else{de.type(ao,"object","invalid arguments for framebuffer");var Sa=ao;if("shape"in Sa){var rc=Sa.shape;de(Array.isArray(rc)&&rc.length>=2,"invalid shape for framebuffer"),Ko=rc[0],hs=rc[1]}else"radius"in Sa&&(Ko=hs=Sa.radius),"width"in Sa&&(Ko=Sa.width),"height"in Sa&&(hs=Sa.height);("color"in Sa||"colors"in Sa)&&(Za=Sa.color||Sa.colors,Array.isArray(Za)&&de(Za.length===1||qt.webgl_draw_buffers,"multiple render targets not supported")),Za||("colorCount"in Sa&&(eu=Sa.colorCount|0,de(eu>0,"invalid color buffer count")),"colorTexture"in Sa&&(Wl=!!Sa.colorTexture,Ks="rgba4"),"colorType"in Sa&&(se=Sa.colorType,Wl?(de(qt.oes_texture_float||!(se==="float"||se==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),de(qt.oes_texture_half_float||!(se==="half float"||se==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):se==="half float"||se==="float16"?(de(qt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Ks="rgba16f"):(se==="float"||se==="float32")&&(de(qt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Ks="rgba32f"),de.oneOf(se,Bi,"invalid color type")),"colorFormat"in Sa&&(Ks=Sa.colorFormat,Ci.indexOf(Ks)>=0?Wl=!0:li.indexOf(Ks)>=0?Wl=!1:Wl?de.oneOf(Sa.colorFormat,Ci,"invalid color format for texture"):de.oneOf(Sa.colorFormat,li,"invalid color format for renderbuffer"))),("depthTexture"in Sa||"depthStencilTexture"in Sa)&&(Dl=!!(Sa.depthTexture||Sa.depthStencilTexture),de(!Dl||qt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Sa&&(typeof Sa.depth=="boolean"?Tl=Sa.depth:(rs=Sa.depth,Wu=!1)),"stencil"in Sa&&(typeof Sa.stencil=="boolean"?Wu=Sa.stencil:(ur=Sa.stencil,Tl=!1)),"depthStencil"in Sa&&(typeof Sa.depthStencil=="boolean"?Tl=Wu=Sa.depthStencil:(Kr=Sa.depthStencil,Tl=!1,Wu=!1))}var Us=null,qo=null,Ca=null,ds=null;if(Array.isArray(Za))Us=Za.map(ki);else if(Za)Us=[ki(Za)];else for(Us=new Array(eu),sa=0;sa<eu;++sa)Us[sa]=fr(Ko,hs,Wl,Ks,se);de(qt.webgl_draw_buffers||Us.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),de(Us.length<=Rn.maxColorAttachments,"too many color attachments, not supported"),Ko=Ko||Us[0].width,hs=hs||Us[0].height,rs?qo=ki(rs):Tl&&!Wu&&(qo=fr(Ko,hs,Dl,"depth","uint32")),ur?Ca=ki(ur):Wu&&!Tl&&(Ca=fr(Ko,hs,!1,"stencil","uint8")),Kr?ds=ki(Kr):!rs&&!ur&&Wu&&Tl&&(ds=fr(Ko,hs,Dl,"depth stencil","depth stencil")),de(!!rs+!!ur+!!Kr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var fu=null;for(sa=0;sa<Us.length;++sa)if(Xi(Us[sa],Ko,hs),de(!Us[sa]||Us[sa].texture&&T0.indexOf(Us[sa].texture._texture.format)>=0||Us[sa].renderbuffer&&O.indexOf(Us[sa].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+sa+" is invalid"),Us[sa]&&Us[sa].texture){var Ih=zf[Us[sa].texture._texture.format]*Uf[Us[sa].texture._texture.type];fu===null?fu=Ih:de(fu===Ih,"all color attachments much have the same number of bits per pixel.")}return Xi(qo,Ko,hs),de(!qo||qo.texture&&qo.texture._texture.format===$h||qo.renderbuffer&&qo.renderbuffer._renderbuffer.format===ov,"invalid depth attachment for framebuffer object"),Xi(Ca,Ko,hs),de(!Ca||Ca.renderbuffer&&Ca.renderbuffer._renderbuffer.format===jf,"invalid stencil attachment for framebuffer object"),Xi(ds,Ko,hs),de(!ds||ds.texture&&ds.texture._texture.format===Yh||ds.renderbuffer&&ds.renderbuffer._renderbuffer.format===Yh,"invalid depth-stencil attachment for framebuffer object"),Ei(Yr),Yr.width=Ko,Yr.height=hs,Yr.colorAttachments=Us,Yr.depthAttachment=qo,Yr.stencilAttachment=Ca,Yr.depthStencilAttachment=ds,Fo.color=Us.map(kr),Fo.depth=kr(qo),Fo.stencil=kr(Ca),Fo.depthStencil=kr(ds),Fo.width=Yr.width,Fo.height=Yr.height,si(Yr),Fo}function La(ao,ca){de(mr.next!==Yr,"can not resize a framebuffer which is currently in use");var sa=Math.max(ao|0,1),Ko=Math.max(ca|0||sa,1);if(sa===Yr.width&&Ko===Yr.height)return Fo;for(var hs=Yr.colorAttachments,Tl=0;Tl<hs.length;++Tl)_i(hs[Tl],sa,Ko);return _i(Yr.depthAttachment,sa,Ko),_i(Yr.stencilAttachment,sa,Ko),_i(Yr.depthStencilAttachment,sa,Ko),Yr.width=Fo.width=sa,Yr.height=Fo.height=Ko,si(Yr),Fo}return Fo(Qi,Si),D(Fo,{resize:La,_reglType:"framebuffer",_framebuffer:Yr,destroy:function(){to(Yr),Ei(Yr)},use:function(ao){mr.setFBO({framebuffer:Fo},ao)}})}function Uo(Qi){var Si=Array(6);function Yr(La){var ao;de(Si.indexOf(mr.next)<0,"can not update framebuffer which is currently in use");var ca={color:null},sa=0,Ko=null,hs="rgba",Tl="uint8",Wu=1;if(typeof La=="number")sa=La|0;else if(!La)sa=1;else{de.type(La,"object","invalid arguments for framebuffer");var Za=La;if("shape"in Za){var Wl=Za.shape;de(Array.isArray(Wl)&&Wl.length>=2,"invalid shape for framebuffer"),de(Wl[0]===Wl[1],"cube framebuffer must be square"),sa=Wl[0]}else"radius"in Za&&(sa=Za.radius|0),"width"in Za?(sa=Za.width|0,"height"in Za&&de(Za.height===sa,"must be square")):"height"in Za&&(sa=Za.height|0);("color"in Za||"colors"in Za)&&(Ko=Za.color||Za.colors,Array.isArray(Ko)&&de(Ko.length===1||qt.webgl_draw_buffers,"multiple render targets not supported")),Ko||("colorCount"in Za&&(Wu=Za.colorCount|0,de(Wu>0,"invalid color buffer count")),"colorType"in Za&&(de.oneOf(Za.colorType,Bi,"invalid color type"),Tl=Za.colorType),"colorFormat"in Za&&(hs=Za.colorFormat,de.oneOf(Za.colorFormat,Ci,"invalid color format for texture"))),"depth"in Za&&(ca.depth=Za.depth),"stencil"in Za&&(ca.stencil=Za.stencil),"depthStencil"in Za&&(ca.depthStencil=Za.depthStencil)}var Ks;if(Ko)if(Array.isArray(Ko))for(Ks=[],ao=0;ao<Ko.length;++ao)Ks[ao]=Ko[ao];else Ks=[Ko];else{Ks=Array(Wu);var se={radius:sa,format:hs,type:Tl};for(ao=0;ao<Wu;++ao)Ks[ao]=Ar.createCube(se)}for(ca.color=Array(Ks.length),ao=0;ao<Ks.length;++ao){var eu=Ks[ao];de(typeof eu=="function"&&eu._reglType==="textureCube","invalid cube map"),sa=sa||eu.width,de(eu.width===sa&&eu.height===sa,"invalid cube map shape"),ca.color[ao]={target:Dd,data:Ks[ao]}}for(ao=0;ao<6;++ao){for(var rs=0;rs<Ks.length;++rs)ca.color[rs].target=Dd+ao;ao>0&&(ca.depth=Si[0].depth,ca.stencil=Si[0].stencil,ca.depthStencil=Si[0].depthStencil),Si[ao]?Si[ao](ca):Si[ao]=di(ca)}return D(Yr,{width:sa,height:sa,color:Ks})}function Fo(La){var ao,ca=La|0;if(de(ca>0&&ca<=Rn.maxCubeMapSize,"invalid radius for cube fbo"),ca===Yr.width)return Yr;var sa=Yr.color;for(ao=0;ao<sa.length;++ao)sa[ao].resize(ca);for(ao=0;ao<6;++ao)Si[ao].resize(ca);return Yr.width=Yr.height=ca,Yr}return Yr(Qi),D(Yr,{faces:Si,resize:Fo,_reglType:"framebufferCube",destroy:function(){Si.forEach(function(La){La.destroy()})}})}function ua(){mr.cur=null,mr.next=null,mr.dirty=!0,ta(ri).forEach(function(Qi){Qi.framebuffer=He.createFramebuffer(),si(Qi)})}return D(mr,{getFramebuffer:function(Qi){if(typeof Qi=="function"&&Qi._reglType==="framebuffer"){var Si=Qi._framebuffer;if(Si instanceof eo)return Si}return null},create:di,createCube:Uo,clear:function(){ta(ri).forEach(to)},restore:ua})}var J=5126,ge=34962;function We(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=J,this.offset=0,this.stride=0,this.divisor=0}function ht(He,qt,Rn,Ar,$r){for(var Cr=Rn.maxAttributes,mr=new Array(Cr),Ci=0;Ci<Cr;++Ci)mr[Ci]=new We;var li=0,Bi={},Ri={Record:We,scope:{},state:mr,currentVAO:null,targetVAO:null,restore:Xi()?ri:function(){},createVAO:eo,getVAO:ki,destroyBuffer:Di,setVAO:Xi()?fr:kr,clear:Xi()?_i:function(){}};function Di(Ei){for(var to=0;to<mr.length;++to){var si=mr[to];si.buffer===Ei&&(He.disableVertexAttribArray(to),si.buffer=null)}}function Xi(){return qt.oes_vertex_array_object}function pi(){return qt.angle_instanced_arrays}function ki(Ei){return typeof Ei=="function"&&Ei._vao?Ei._vao:null}function fr(Ei){if(Ei!==Ri.currentVAO){var to=Xi();Ei?to.bindVertexArrayOES(Ei.vao):to.bindVertexArrayOES(null),Ri.currentVAO=Ei}}function kr(Ei){if(Ei!==Ri.currentVAO){if(Ei)Ei.bindAttrs();else for(var to=pi(),si=0;si<mr.length;++si){var di=mr[si];di.buffer?(He.enableVertexAttribArray(si),He.vertexAttribPointer(si,di.size,di.type,di.normalized,di.stride,di.offfset),to&&to.vertexAttribDivisorANGLE(si,di.divisor)):(He.disableVertexAttribArray(si),He.vertexAttrib4f(si,di.x,di.y,di.z,di.w))}Ri.currentVAO=Ei}}function _i(){ta(Bi).forEach(function(Ei){Ei.destroy()})}function io(){this.id=++li,this.attributes=[];var Ei=Xi();Ei?this.vao=Ei.createVertexArrayOES():this.vao=null,Bi[this.id]=this,this.buffers=[]}io.prototype.bindAttrs=function(){for(var Ei=pi(),to=this.attributes,si=0;si<to.length;++si){var di=to[si];di.buffer?(He.enableVertexAttribArray(si),He.bindBuffer(ge,di.buffer.buffer),He.vertexAttribPointer(si,di.size,di.type,di.normalized,di.stride,di.offset),Ei&&Ei.vertexAttribDivisorANGLE(si,di.divisor)):(He.disableVertexAttribArray(si),He.vertexAttrib4f(si,di.x,di.y,di.z,di.w))}for(var Uo=to.length;Uo<Cr;++Uo)He.disableVertexAttribArray(Uo)},io.prototype.refresh=function(){var Ei=Xi();Ei&&(Ei.bindVertexArrayOES(this.vao),this.bindAttrs(),Ri.currentVAO=this)},io.prototype.destroy=function(){if(this.vao){var Ei=Xi();this===Ri.currentVAO&&(Ri.currentVAO=null,Ei.bindVertexArrayOES(null)),Ei.deleteVertexArrayOES(this.vao),this.vao=null}Bi[this.id]&&(delete Bi[this.id],Ar.vaoCount-=1)};function ri(){var Ei=Xi();Ei&&ta(Bi).forEach(function(to){to.refresh()})}function eo(Ei){var to=new io;Ar.vaoCount+=1;function si(di){de(Array.isArray(di),"arguments to vertex array constructor must be an array"),de(di.length<Cr,"too many attributes"),de(di.length>0,"must specify at least one attribute");for(var Uo=0;Uo<to.buffers.length;++Uo)to.buffers[Uo].destroy();to.buffers.length=0;var ua=to.attributes;ua.length=di.length;for(var Qi=0;Qi<di.length;++Qi){var Si=di[Qi],Yr=ua[Qi]=new We;if(Array.isArray(Si)||W(Si)||ma(Si)){var Fo=$r.create(Si,ge,!1,!0);Yr.buffer=$r.getBuffer(Fo),Yr.size=Yr.buffer.dimension|0,Yr.normalized=!1,Yr.type=Yr.buffer.dtype,Yr.offset=0,Yr.stride=0,Yr.divisor=0,Yr.state=1,to.buffers.push(Fo)}else $r.getBuffer(Si)?(Yr.buffer=$r.getBuffer(Si),Yr.size=Yr.buffer.dimension|0,Yr.normalized=!1,Yr.type=Yr.buffer.dtype,Yr.offset=0,Yr.stride=0,Yr.divisor=0,Yr.state=1):$r.getBuffer(Si.buffer)?(Yr.buffer=$r.getBuffer(Si.buffer),Yr.size=(+Si.size||Yr.buffer.dimension)|0,Yr.normalized=!!Si.normalized||!1,"type"in Si?(de.parameter(Si.type,jl,"invalid buffer type"),Yr.type=jl[Si.type]):Yr.type=Yr.buffer.dtype,Yr.offset=(Si.offset||0)|0,Yr.stride=(Si.stride||0)|0,Yr.divisor=(Si.divisor||0)|0,Yr.state=1,de(Yr.size>=1&&Yr.size<=4,"size must be between 1 and 4"),de(Yr.offset>=0,"invalid offset"),de(Yr.stride>=0&&Yr.stride<=255,"stride must be between 0 and 255"),de(Yr.divisor>=0,"divisor must be positive"),de(!Yr.divisor||!!qt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Si?(de(Qi>0,"first attribute must not be a constant"),Yr.x=+Si.x||0,Yr.y=+Si.y||0,Yr.z=+Si.z||0,Yr.w=+Si.w||0,Yr.state=2):de(!1,"invalid attribute spec for location "+Qi)}return to.refresh(),si}return si.destroy=function(){to.destroy()},si._vao=to,si._reglType="vao",si(Ei)}return Ri}var Ut=35632,Ht=35633,Xt=35718,bn=35721;function mn(He,qt,Rn,Ar){var $r={},Cr={};function mr(fr,kr,_i,io){this.name=fr,this.id=kr,this.location=_i,this.info=io}function Ci(fr,kr){for(var _i=0;_i<fr.length;++_i)if(fr[_i].id===kr.id){fr[_i].location=kr.location;return}fr.push(kr)}function li(fr,kr,_i){var io=fr===Ut?$r:Cr,ri=io[kr];if(!ri){var eo=qt.str(kr);ri=He.createShader(fr),He.shaderSource(ri,eo),He.compileShader(ri),de.shaderError(He,ri,eo,fr,_i),io[kr]=ri}return ri}var Bi={},Ri=[],Di=0;function Xi(fr,kr){this.id=Di++,this.fragId=fr,this.vertId=kr,this.program=null,this.uniforms=[],this.attributes=[],Ar.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function pi(fr,kr,_i){var io,ri,eo=li(Ut,fr.fragId),Ei=li(Ht,fr.vertId),to=fr.program=He.createProgram();if(He.attachShader(to,eo),He.attachShader(to,Ei),_i)for(io=0;io<_i.length;++io){var si=_i[io];He.bindAttribLocation(to,si[0],si[1])}He.linkProgram(to),de.linkError(He,to,qt.str(fr.fragId),qt.str(fr.vertId),kr);var di=He.getProgramParameter(to,Xt);Ar.profile&&(fr.stats.uniformsCount=di);var Uo=fr.uniforms;for(io=0;io<di;++io)if(ri=He.getActiveUniform(to,io),ri)if(ri.size>1)for(var ua=0;ua<ri.size;++ua){var Qi=ri.name.replace("[0]","["+ua+"]");Ci(Uo,new mr(Qi,qt.id(Qi),He.getUniformLocation(to,Qi),ri))}else Ci(Uo,new mr(ri.name,qt.id(ri.name),He.getUniformLocation(to,ri.name),ri));var Si=He.getProgramParameter(to,bn);Ar.profile&&(fr.stats.attributesCount=Si);var Yr=fr.attributes;for(io=0;io<Si;++io)ri=He.getActiveAttrib(to,io),ri&&Ci(Yr,new mr(ri.name,qt.id(ri.name),He.getAttribLocation(to,ri.name),ri))}Ar.profile&&(Rn.getMaxUniformsCount=function(){var fr=0;return Ri.forEach(function(kr){kr.stats.uniformsCount>fr&&(fr=kr.stats.uniformsCount)}),fr},Rn.getMaxAttributesCount=function(){var fr=0;return Ri.forEach(function(kr){kr.stats.attributesCount>fr&&(fr=kr.stats.attributesCount)}),fr});function ki(){$r={},Cr={};for(var fr=0;fr<Ri.length;++fr)pi(Ri[fr],null,Ri[fr].attributes.map(function(kr){return[kr.location,kr.name]}))}return{clear:function(){var fr=He.deleteShader.bind(He);ta($r).forEach(fr),$r={},ta(Cr).forEach(fr),Cr={},Ri.forEach(function(kr){He.deleteProgram(kr.program)}),Ri.length=0,Bi={},Rn.shaderCount=0},program:function(fr,kr,_i,io){de.command(fr>=0,"missing vertex shader",_i),de.command(kr>=0,"missing fragment shader",_i);var ri=Bi[kr];ri||(ri=Bi[kr]={});var eo=ri[fr];if(eo&&!io)return eo;var Ei=new Xi(kr,fr);return Rn.shaderCount++,pi(Ei,_i,io),eo||(ri[fr]=Ei),Ri.push(Ei),Ei},restore:ki,shader:li,frag:-1,vert:-1}}var zn=6408,an=5121,kn=3333,er=5126;function vr(He,qt,Rn,Ar,$r,Cr,mr){function Ci(Ri){var Di;qt.next===null?(de($r.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Di=an):(de(qt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Di=qt.next.colorAttachments[0].texture._texture.type,Cr.oes_texture_float?(de(Di===an||Di===er,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Di===er&&de(mr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):de(Di===an,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Xi=0,pi=0,ki=Ar.framebufferWidth,fr=Ar.framebufferHeight,kr=null;W(Ri)?kr=Ri:Ri&&(de.type(Ri,"object","invalid arguments to regl.read()"),Xi=Ri.x|0,pi=Ri.y|0,de(Xi>=0&&Xi<Ar.framebufferWidth,"invalid x offset for regl.read"),de(pi>=0&&pi<Ar.framebufferHeight,"invalid y offset for regl.read"),ki=(Ri.width||Ar.framebufferWidth-Xi)|0,fr=(Ri.height||Ar.framebufferHeight-pi)|0,kr=Ri.data||null),kr&&(Di===an?de(kr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Di===er&&de(kr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),de(ki>0&&ki+Xi<=Ar.framebufferWidth,"invalid width for read pixels"),de(fr>0&&fr+pi<=Ar.framebufferHeight,"invalid height for read pixels"),Rn();var _i=ki*fr*4;return kr||(Di===an?kr=new Uint8Array(_i):Di===er&&(kr=kr||new Float32Array(_i))),de.isTypedArray(kr,"data buffer for regl.read() must be a typedarray"),de(kr.byteLength>=_i,"data buffer for regl.read() too small"),He.pixelStorei(kn,4),He.readPixels(Xi,pi,ki,fr,zn,Di,kr),kr}function li(Ri){var Di;return qt.setFBO({framebuffer:Ri.framebuffer},function(){Di=Ci(Ri)}),Di}function Bi(Ri){return!Ri||!("framebuffer"in Ri)?Ci(Ri):li(Ri)}return Bi}function Mr(He){return Array.prototype.slice.call(He)}function wr(He){return Mr(He).join("")}function Fr(){var He=0,qt=[],Rn=[];function Ar(Di){for(var Xi=0;Xi<Rn.length;++Xi)if(Rn[Xi]===Di)return qt[Xi];var pi="g"+He++;return qt.push(pi),Rn.push(Di),pi}function $r(){var Di=[];function Xi(){Di.push.apply(Di,Mr(arguments))}var pi=[];function ki(){var fr="v"+He++;return pi.push(fr),arguments.length>0&&(Di.push(fr,"="),Di.push.apply(Di,Mr(arguments)),Di.push(";")),fr}return D(Xi,{def:ki,toString:function(){return wr([pi.length>0?"var "+pi.join(",")+";":"",wr(Di)])}})}function Cr(){var Di=$r(),Xi=$r(),pi=Di.toString,ki=Xi.toString;function fr(kr,_i){Xi(kr,_i,"=",Di.def(kr,_i),";")}return D(function(){Di.apply(Di,Mr(arguments))},{def:Di.def,entry:Di,exit:Xi,save:fr,set:function(kr,_i,io){fr(kr,_i),Di(kr,_i,"=",io,";")},toString:function(){return pi()+ki()}})}function mr(){var Di=wr(arguments),Xi=Cr(),pi=Cr(),ki=Xi.toString,fr=pi.toString;return D(Xi,{then:function(){return Xi.apply(Xi,Mr(arguments)),this},else:function(){return pi.apply(pi,Mr(arguments)),this},toString:function(){var kr=fr();return kr&&(kr="else{"+kr+"}"),wr(["if(",Di,"){",ki(),"}",kr])}})}var Ci=$r(),li={};function Bi(Di,Xi){var pi=[];function ki(){var ri="a"+pi.length;return pi.push(ri),ri}Xi=Xi||0;for(var fr=0;fr<Xi;++fr)ki();var kr=Cr(),_i=kr.toString,io=li[Di]=D(kr,{arg:ki,toString:function(){return wr(["function(",pi.join(),"){",_i(),"}"])}});return io}function Ri(){var Di=['"use strict";',Ci,"return {"];Object.keys(li).forEach(function(ki){Di.push('"',ki,'":',li[ki].toString(),",")}),Di.push("}");var Xi=wr(Di).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),pi=Function.apply(null,qt.concat(Xi));return pi.apply(null,Rn)}return{global:Ci,link:Ar,block:$r,proc:Bi,scope:Cr,cond:mr,compile:Ri}}var ti="xyzw".split(""),Ni=5121,Pi=1,lo=2,zo=0,Wo=1,Go=2,as=3,Or=4,en="dither",ha="blend.enable",aa="blend.color",Yo="blend.equation",ga="blend.func",ra="depth.enable",Bo="depth.func",uu="depth.range",El="depth.mask",Mu="colorMask",cu="cull.enable",Es="cull.face",_l="frontFace",pl="lineWidth",vc="polygonOffset.enable",Vf="polygonOffset.offset",Ac="sample.alpha",of="sample.enable",jc="sample.coverage",dp="stencil.enable",pp="stencil.mask",Mh="stencil.func",Kh="stencil.opFront",qh="stencil.opBack",ih="scissor.enable",Ai="scissor.box",Il="viewport",Ll="profile",tc="framebuffer",wf="vert",Af="frag",Ga="elements",Hl="primitive",Jl="count",Hf="offset",Vp="instances",oh="vao",O0="Width",Bd="Height",Fd=tc+O0,Wf=tc+Bd,Hp=Il+O0,Vv=Il+Bd,kd="drawingBuffer",Oc=kd+O0,Xy=kd+Bd,Hv=[ga,Yo,Mh,Kh,qh,jc,Il,Ai,Vf],Wp=34962,$y=34963,Lg=35632,Yy=35633,Um=3553,Wv=34067,av=2884,Ky=3042,Gp=3024,Zp=2960,jm=2929,Vm=3089,Dg=32823,Gv=32926,Zv=32928,Ng=5126,sv=35664,C0=35665,lv=35666,nc=5124,Xp=35667,Sl=35668,Qh=35669,Hm=35670,$p=35671,Yp=35672,zd=35673,Kp=35674,Jh=35675,af=35676,qp=35678,R0=35680,Wm=4,ed=1028,Of=1029,Ph=2304,Xv=2305,$v=32775,M0=32776,Gf=519,Ud=7680,qy=0,Qy=1,Yv=32774,Bg=513,td=36160,Jy=36064,ah={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},uv=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Qp={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},vp={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Fg={frag:Lg,vert:Yy},mp={cw:Ph,ccw:Xv};function Kv(He){return Array.isArray(He)||W(He)||ma(He)}function P0(He){return He.sort(function(qt,Rn){return qt===Il?-1:Rn===Il?1:qt<Rn?-1:1})}function Cc(He,qt,Rn,Ar){this.thisDep=He,this.contextDep=qt,this.propDep=Rn,this.append=Ar}function mc(He){return He&&!(He.thisDep||He.contextDep||He.propDep)}function _u(He){return new Cc(!1,!1,!1,He)}function sf(He,qt){var Rn=He.type;if(Rn===zo){var Ar=He.data.length;return new Cc(!0,Ar>=1,Ar>=2,qt)}else if(Rn===Or){var $r=He.data;return new Cc($r.thisDep,$r.contextDep,$r.propDep,qt)}else return new Cc(Rn===as,Rn===Go,Rn===Wo,qt)}var Rc=new Cc(!1,!1,!1,function(){});function Ys(He,qt,Rn,Ar,$r,Cr,mr,Ci,li,Bi,Ri,Di,Xi,pi,ki){var fr=Bi.Record,kr={add:32774,subtract:32778,"reverse subtract":32779};Rn.ext_blend_minmax&&(kr.min=$v,kr.max=M0);var _i=Rn.angle_instanced_arrays,io=Rn.webgl_draw_buffers,ri={dirty:!0,profile:ki.profile},eo={},Ei=[],to={},si={};function di(Dt){return Dt.replace(".","_")}function Uo(Dt,nn,Mn){var Tr=di(Dt);Ei.push(Dt),eo[Tr]=ri[Tr]=!!Mn,to[Tr]=nn}function ua(Dt,nn,Mn){var Tr=di(Dt);Ei.push(Dt),Array.isArray(Mn)?(ri[Tr]=Mn.slice(),eo[Tr]=Mn.slice()):ri[Tr]=eo[Tr]=Mn,si[Tr]=nn}Uo(en,Gp),Uo(ha,Ky),ua(aa,"blendColor",[0,0,0,0]),ua(Yo,"blendEquationSeparate",[Yv,Yv]),ua(ga,"blendFuncSeparate",[Qy,qy,Qy,qy]),Uo(ra,jm,!0),ua(Bo,"depthFunc",Bg),ua(uu,"depthRange",[0,1]),ua(El,"depthMask",!0),ua(Mu,Mu,[!0,!0,!0,!0]),Uo(cu,av),ua(Es,"cullFace",Of),ua(_l,_l,Xv),ua(pl,pl,1),Uo(vc,Dg),ua(Vf,"polygonOffset",[0,0]),Uo(Ac,Gv),Uo(of,Zv),ua(jc,"sampleCoverage",[1,!1]),Uo(dp,Zp),ua(pp,"stencilMask",-1),ua(Mh,"stencilFunc",[Gf,0,-1]),ua(Kh,"stencilOpSeparate",[ed,Ud,Ud,Ud]),ua(qh,"stencilOpSeparate",[Of,Ud,Ud,Ud]),Uo(ih,Vm),ua(Ai,"scissor",[0,0,He.drawingBufferWidth,He.drawingBufferHeight]),ua(Il,Il,[0,0,He.drawingBufferWidth,He.drawingBufferHeight]);var Qi={gl:He,context:Xi,strings:qt,next:eo,current:ri,draw:Di,elements:Cr,buffer:$r,shader:Ri,attributes:Bi.state,vao:Bi,uniforms:li,framebuffer:Ci,extensions:Rn,timer:pi,isBufferArgs:Kv},Si={primTypes:Fc,compareFuncs:Qp,blendFuncs:ah,blendEquations:kr,stencilOps:vp,glTypes:jl,orientationType:mp};de.optional(function(){Qi.isArrayLike=ul}),io&&(Si.backBuffer=[Of],Si.drawBuffer=qn(Ar.maxDrawbuffers,function(Dt){return Dt===0?[0]:qn(Dt,function(nn){return Jy+nn})}));var Yr=0;function Fo(){var Dt=Fr(),nn=Dt.link,Mn=Dt.global;Dt.id=Yr++,Dt.batchId="0";var Tr=nn(Qi),br=Dt.shared={props:"a0"};Object.keys(Qi).forEach(function(Gn){br[Gn]=Mn.def(Tr,".",Gn)}),de.optional(function(){Dt.CHECK=nn(de),Dt.commandStr=de.guessCommand(),Dt.command=nn(Dt.commandStr),Dt.assert=function(Gn,tn,Kn){Gn("if(!(",tn,"))",this.CHECK,".commandRaise(",nn(Kn),",",this.command,");")},Si.invalidBlendCombinations=uv});var Vn=Dt.next={},Jn=Dt.current={};Object.keys(si).forEach(function(Gn){Array.isArray(ri[Gn])&&(Vn[Gn]=Mn.def(br.next,".",Gn),Jn[Gn]=Mn.def(br.current,".",Gn))});var or=Dt.constants={};Object.keys(Si).forEach(function(Gn){or[Gn]=Mn.def(JSON.stringify(Si[Gn]))}),Dt.invoke=function(Gn,tn){switch(tn.type){case zo:var Kn=["this",br.context,br.props,Dt.batchId];return Gn.def(nn(tn.data),".call(",Kn.slice(0,Math.max(tn.data.length+1,4)),")");case Wo:return Gn.def(br.props,tn.data);case Go:return Gn.def(br.context,tn.data);case as:return Gn.def("this",tn.data);case Or:return tn.data.append(Dt,Gn),tn.data.ref}},Dt.attribCache={};var xn={};return Dt.scopeAttrib=function(Gn){var tn=qt.id(Gn);if(tn in xn)return xn[tn];var Kn=Bi.scope[tn];Kn||(Kn=Bi.scope[tn]=new fr);var Dr=xn[tn]=nn(Kn);return Dr},Dt}function La(Dt){var nn=Dt.static,Mn=Dt.dynamic,Tr;if(Ll in nn){var br=!!nn[Ll];Tr=_u(function(Jn,or){return br}),Tr.enable=br}else if(Ll in Mn){var Vn=Mn[Ll];Tr=sf(Vn,function(Jn,or){return Jn.invoke(or,Vn)})}return Tr}function ao(Dt,nn){var Mn=Dt.static,Tr=Dt.dynamic;if(tc in Mn){var br=Mn[tc];return br?(br=Ci.getFramebuffer(br),de.command(br,"invalid framebuffer object"),_u(function(Jn,or){var xn=Jn.link(br),Gn=Jn.shared;or.set(Gn.framebuffer,".next",xn);var tn=Gn.context;return or.set(tn,"."+Fd,xn+".width"),or.set(tn,"."+Wf,xn+".height"),xn})):_u(function(Jn,or){var xn=Jn.shared;or.set(xn.framebuffer,".next","null");var Gn=xn.context;return or.set(Gn,"."+Fd,Gn+"."+Oc),or.set(Gn,"."+Wf,Gn+"."+Xy),"null"})}else if(tc in Tr){var Vn=Tr[tc];return sf(Vn,function(Jn,or){var xn=Jn.invoke(or,Vn),Gn=Jn.shared,tn=Gn.framebuffer,Kn=or.def(tn,".getFramebuffer(",xn,")");de.optional(function(){Jn.assert(or,"!"+xn+"||"+Kn,"invalid framebuffer object")}),or.set(tn,".next",Kn);var Dr=Gn.context;return or.set(Dr,"."+Fd,Kn+"?"+Kn+".width:"+Dr+"."+Oc),or.set(Dr,"."+Wf,Kn+"?"+Kn+".height:"+Dr+"."+Xy),Kn})}else return null}function ca(Dt,nn,Mn){var Tr=Dt.static,br=Dt.dynamic;function Vn(xn){if(xn in Tr){var Gn=Tr[xn];de.commandType(Gn,"object","invalid "+xn,Mn.commandStr);var tn=!0,Kn=Gn.x|0,Dr=Gn.y|0,jr,vi;return"width"in Gn?(jr=Gn.width|0,de.command(jr>=0,"invalid "+xn,Mn.commandStr)):tn=!1,"height"in Gn?(vi=Gn.height|0,de.command(vi>=0,"invalid "+xn,Mn.commandStr)):tn=!1,new Cc(!tn&&nn&&nn.thisDep,!tn&&nn&&nn.contextDep,!tn&&nn&&nn.propDep,function(Io,Fi){var $i=Io.shared.context,na=jr;"width"in Gn||(na=Fi.def($i,".",Fd,"-",Kn));var Zo=vi;return"height"in Gn||(Zo=Fi.def($i,".",Wf,"-",Dr)),[Kn,Dr,na,Zo]})}else if(xn in br){var Qr=br[xn],bi=sf(Qr,function(Io,Fi){var $i=Io.invoke(Fi,Qr);de.optional(function(){Io.assert(Fi,$i+"&&typeof "+$i+'==="object"',"invalid "+xn)});var na=Io.shared.context,Zo=Fi.def($i,".x|0"),Ns=Fi.def($i,".y|0"),Gu=Fi.def('"width" in ',$i,"?",$i,".width|0:","(",na,".",Fd,"-",Zo,")"),tu=Fi.def('"height" in ',$i,"?",$i,".height|0:","(",na,".",Wf,"-",Ns,")");return de.optional(function(){Io.assert(Fi,Gu+">=0&&"+tu+">=0","invalid "+xn)}),[Zo,Ns,Gu,tu]});return nn&&(bi.thisDep=bi.thisDep||nn.thisDep,bi.contextDep=bi.contextDep||nn.contextDep,bi.propDep=bi.propDep||nn.propDep),bi}else return nn?new Cc(nn.thisDep,nn.contextDep,nn.propDep,function(Io,Fi){var $i=Io.shared.context;return[0,0,Fi.def($i,".",Fd),Fi.def($i,".",Wf)]}):null}var Jn=Vn(Il);if(Jn){var or=Jn;Jn=new Cc(Jn.thisDep,Jn.contextDep,Jn.propDep,function(xn,Gn){var tn=or.append(xn,Gn),Kn=xn.shared.context;return Gn.set(Kn,"."+Hp,tn[2]),Gn.set(Kn,"."+Vv,tn[3]),tn})}return{viewport:Jn,scissor_box:Vn(Ai)}}function sa(Dt,nn){var Mn=Dt.static,Tr=typeof Mn[Af]=="string"&&typeof Mn[wf]=="string";if(Tr){if(Object.keys(nn.dynamic).length>0)return null;var br=nn.static,Vn=Object.keys(br);if(Vn.length>0&&typeof br[Vn[0]]=="number"){for(var Jn=[],or=0;or<Vn.length;++or)de(typeof br[Vn[or]]=="number","must specify all vertex attribute locations when using vaos"),Jn.push([br[Vn[or]]|0,Vn[or]]);return Jn}}return null}function Ko(Dt,nn,Mn){var Tr=Dt.static,br=Dt.dynamic;function Vn(tn){if(tn in Tr){var Kn=qt.id(Tr[tn]);de.optional(function(){Ri.shader(Fg[tn],Kn,de.guessCommand())});var Dr=_u(function(){return Kn});return Dr.id=Kn,Dr}else if(tn in br){var jr=br[tn];return sf(jr,function(vi,Qr){var bi=vi.invoke(Qr,jr),Io=Qr.def(vi.shared.strings,".id(",bi,")");return de.optional(function(){Qr(vi.shared.shader,".shader(",Fg[tn],",",Io,",",vi.command,");")}),Io})}return null}var Jn=Vn(Af),or=Vn(wf),xn=null,Gn;return mc(Jn)&&mc(or)?(xn=Ri.program(or.id,Jn.id,null,Mn),Gn=_u(function(tn,Kn){return tn.link(xn)})):Gn=new Cc(Jn&&Jn.thisDep||or&&or.thisDep,Jn&&Jn.contextDep||or&&or.contextDep,Jn&&Jn.propDep||or&&or.propDep,function(tn,Kn){var Dr=tn.shared.shader,jr;Jn?jr=Jn.append(tn,Kn):jr=Kn.def(Dr,".",Af);var vi;or?vi=or.append(tn,Kn):vi=Kn.def(Dr,".",wf);var Qr=Dr+".program("+vi+","+jr;return de.optional(function(){Qr+=","+tn.command}),Kn.def(Qr+")")}),{frag:Jn,vert:or,progVar:Gn,program:xn}}function hs(Dt,nn){var Mn=Dt.static,Tr=Dt.dynamic;function br(){if(Ga in Mn){var tn=Mn[Ga];Kv(tn)?tn=Cr.getElements(Cr.create(tn,!0)):tn&&(tn=Cr.getElements(tn),de.command(tn,"invalid elements",nn.commandStr));var Kn=_u(function(jr,vi){if(tn){var Qr=jr.link(tn);return jr.ELEMENTS=Qr,Qr}return jr.ELEMENTS=null,null});return Kn.value=tn,Kn}else if(Ga in Tr){var Dr=Tr[Ga];return sf(Dr,function(jr,vi){var Qr=jr.shared,bi=Qr.isBufferArgs,Io=Qr.elements,Fi=jr.invoke(vi,Dr),$i=vi.def("null"),na=vi.def(bi,"(",Fi,")"),Zo=jr.cond(na).then($i,"=",Io,".createStream(",Fi,");").else($i,"=",Io,".getElements(",Fi,");");return de.optional(function(){jr.assert(Zo.else,"!"+Fi+"||"+$i,"invalid elements")}),vi.entry(Zo),vi.exit(jr.cond(na).then(Io,".destroyStream(",$i,");")),jr.ELEMENTS=$i,$i})}return null}var Vn=br();function Jn(){if(Hl in Mn){var tn=Mn[Hl];return de.commandParameter(tn,Fc,"invalid primitve",nn.commandStr),_u(function(Dr,jr){return Fc[tn]})}else if(Hl in Tr){var Kn=Tr[Hl];return sf(Kn,function(Dr,jr){var vi=Dr.constants.primTypes,Qr=Dr.invoke(jr,Kn);return de.optional(function(){Dr.assert(jr,Qr+" in "+vi,"invalid primitive, must be one of "+Object.keys(Fc))}),jr.def(vi,"[",Qr,"]")})}else if(Vn)return mc(Vn)?Vn.value?_u(function(Dr,jr){return jr.def(Dr.ELEMENTS,".primType")}):_u(function(){return Wm}):new Cc(Vn.thisDep,Vn.contextDep,Vn.propDep,function(Dr,jr){var vi=Dr.ELEMENTS;return jr.def(vi,"?",vi,".primType:",Wm)});return null}function or(tn,Kn){if(tn in Mn){var Dr=Mn[tn]|0;return de.command(!Kn||Dr>=0,"invalid "+tn,nn.commandStr),_u(function(vi,Qr){return Kn&&(vi.OFFSET=Dr),Dr})}else if(tn in Tr){var jr=Tr[tn];return sf(jr,function(vi,Qr){var bi=vi.invoke(Qr,jr);return Kn&&(vi.OFFSET=bi,de.optional(function(){vi.assert(Qr,bi+">=0","invalid "+tn)})),bi})}else if(Kn&&Vn)return _u(function(vi,Qr){return vi.OFFSET="0",0});return null}var xn=or(Hf,!0);function Gn(){if(Jl in Mn){var tn=Mn[Jl]|0;return de.command(typeof tn=="number"&&tn>=0,"invalid vertex count",nn.commandStr),_u(function(){return tn})}else if(Jl in Tr){var Kn=Tr[Jl];return sf(Kn,function(vi,Qr){var bi=vi.invoke(Qr,Kn);return de.optional(function(){vi.assert(Qr,"typeof "+bi+'==="number"&&'+bi+">=0&&"+bi+"===("+bi+"|0)","invalid vertex count")}),bi})}else if(Vn)if(mc(Vn)){if(Vn)return xn?new Cc(xn.thisDep,xn.contextDep,xn.propDep,function(vi,Qr){var bi=Qr.def(vi.ELEMENTS,".vertCount-",vi.OFFSET);return de.optional(function(){vi.assert(Qr,bi+">=0","invalid vertex offset/element buffer too small")}),bi}):_u(function(vi,Qr){return Qr.def(vi.ELEMENTS,".vertCount")});var Dr=_u(function(){return-1});return de.optional(function(){Dr.MISSING=!0}),Dr}else{var jr=new Cc(Vn.thisDep||xn.thisDep,Vn.contextDep||xn.contextDep,Vn.propDep||xn.propDep,function(vi,Qr){var bi=vi.ELEMENTS;return vi.OFFSET?Qr.def(bi,"?",bi,".vertCount-",vi.OFFSET,":-1"):Qr.def(bi,"?",bi,".vertCount:-1")});return de.optional(function(){jr.DYNAMIC=!0}),jr}return null}return{elements:Vn,primitive:Jn(),count:Gn(),instances:or(Vp,!1),offset:xn}}function Tl(Dt,nn){var Mn=Dt.static,Tr=Dt.dynamic,br={};return Ei.forEach(function(Vn){var Jn=di(Vn);function or(xn,Gn){if(Vn in Mn){var tn=xn(Mn[Vn]);br[Jn]=_u(function(){return tn})}else if(Vn in Tr){var Kn=Tr[Vn];br[Jn]=sf(Kn,function(Dr,jr){return Gn(Dr,jr,Dr.invoke(jr,Kn))})}}switch(Vn){case cu:case ha:case en:case dp:case ra:case ih:case vc:case Ac:case of:case El:return or(function(xn){return de.commandType(xn,"boolean",Vn,nn.commandStr),xn},function(xn,Gn,tn){return de.optional(function(){xn.assert(Gn,"typeof "+tn+'==="boolean"',"invalid flag "+Vn,xn.commandStr)}),tn});case Bo:return or(function(xn){return de.commandParameter(xn,Qp,"invalid "+Vn,nn.commandStr),Qp[xn]},function(xn,Gn,tn){var Kn=xn.constants.compareFuncs;return de.optional(function(){xn.assert(Gn,tn+" in "+Kn,"invalid "+Vn+", must be one of "+Object.keys(Qp))}),Gn.def(Kn,"[",tn,"]")});case uu:return or(function(xn){return de.command(ul(xn)&&xn.length===2&&typeof xn[0]=="number"&&typeof xn[1]=="number"&&xn[0]<=xn[1],"depth range is 2d array",nn.commandStr),xn},function(xn,Gn,tn){de.optional(function(){xn.assert(Gn,xn.shared.isArrayLike+"("+tn+")&&"+tn+".length===2&&typeof "+tn+'[0]==="number"&&typeof '+tn+'[1]==="number"&&'+tn+"[0]<="+tn+"[1]","depth range must be a 2d array")});var Kn=Gn.def("+",tn,"[0]"),Dr=Gn.def("+",tn,"[1]");return[Kn,Dr]});case ga:return or(function(xn){de.commandType(xn,"object","blend.func",nn.commandStr);var Gn="srcRGB"in xn?xn.srcRGB:xn.src,tn="srcAlpha"in xn?xn.srcAlpha:xn.src,Kn="dstRGB"in xn?xn.dstRGB:xn.dst,Dr="dstAlpha"in xn?xn.dstAlpha:xn.dst;return de.commandParameter(Gn,ah,Jn+".srcRGB",nn.commandStr),de.commandParameter(tn,ah,Jn+".srcAlpha",nn.commandStr),de.commandParameter(Kn,ah,Jn+".dstRGB",nn.commandStr),de.commandParameter(Dr,ah,Jn+".dstAlpha",nn.commandStr),de.command(uv.indexOf(Gn+", "+Kn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Gn+", "+Kn+")",nn.commandStr),[ah[Gn],ah[Kn],ah[tn],ah[Dr]]},function(xn,Gn,tn){var Kn=xn.constants.blendFuncs;de.optional(function(){xn.assert(Gn,tn+"&&typeof "+tn+'==="object"',"invalid blend func, must be an object")});function Dr($i,na){var Zo=Gn.def('"',$i,na,'" in ',tn,"?",tn,".",$i,na,":",tn,".",$i);return de.optional(function(){xn.assert(Gn,Zo+" in "+Kn,"invalid "+Vn+"."+$i+na+", must be one of "+Object.keys(ah))}),Zo}var jr=Dr("src","RGB"),vi=Dr("dst","RGB");de.optional(function(){var $i=xn.constants.invalidBlendCombinations;xn.assert(Gn,$i+".indexOf("+jr+'+", "+'+vi+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Qr=Gn.def(Kn,"[",jr,"]"),bi=Gn.def(Kn,"[",Dr("src","Alpha"),"]"),Io=Gn.def(Kn,"[",vi,"]"),Fi=Gn.def(Kn,"[",Dr("dst","Alpha"),"]");return[Qr,Io,bi,Fi]});case Yo:return or(function(xn){if(typeof xn=="string")return de.commandParameter(xn,kr,"invalid "+Vn,nn.commandStr),[kr[xn],kr[xn]];if(typeof xn=="object")return de.commandParameter(xn.rgb,kr,Vn+".rgb",nn.commandStr),de.commandParameter(xn.alpha,kr,Vn+".alpha",nn.commandStr),[kr[xn.rgb],kr[xn.alpha]];de.commandRaise("invalid blend.equation",nn.commandStr)},function(xn,Gn,tn){var Kn=xn.constants.blendEquations,Dr=Gn.def(),jr=Gn.def(),vi=xn.cond("typeof ",tn,'==="string"');return de.optional(function(){function Qr(bi,Io,Fi){xn.assert(bi,Fi+" in "+Kn,"invalid "+Io+", must be one of "+Object.keys(kr))}Qr(vi.then,Vn,tn),xn.assert(vi.else,tn+"&&typeof "+tn+'==="object"',"invalid "+Vn),Qr(vi.else,Vn+".rgb",tn+".rgb"),Qr(vi.else,Vn+".alpha",tn+".alpha")}),vi.then(Dr,"=",jr,"=",Kn,"[",tn,"];"),vi.else(Dr,"=",Kn,"[",tn,".rgb];",jr,"=",Kn,"[",tn,".alpha];"),Gn(vi),[Dr,jr]});case aa:return or(function(xn){return de.command(ul(xn)&&xn.length===4,"blend.color must be a 4d array",nn.commandStr),qn(4,function(Gn){return+xn[Gn]})},function(xn,Gn,tn){return de.optional(function(){xn.assert(Gn,xn.shared.isArrayLike+"("+tn+")&&"+tn+".length===4","blend.color must be a 4d array")}),qn(4,function(Kn){return Gn.def("+",tn,"[",Kn,"]")})});case pp:return or(function(xn){return de.commandType(xn,"number",Jn,nn.commandStr),xn|0},function(xn,Gn,tn){return de.optional(function(){xn.assert(Gn,"typeof "+tn+'==="number"',"invalid stencil.mask")}),Gn.def(tn,"|0")});case Mh:return or(function(xn){de.commandType(xn,"object",Jn,nn.commandStr);var Gn=xn.cmp||"keep",tn=xn.ref||0,Kn="mask"in xn?xn.mask:-1;return de.commandParameter(Gn,Qp,Vn+".cmp",nn.commandStr),de.commandType(tn,"number",Vn+".ref",nn.commandStr),de.commandType(Kn,"number",Vn+".mask",nn.commandStr),[Qp[Gn],tn,Kn]},function(xn,Gn,tn){var Kn=xn.constants.compareFuncs;de.optional(function(){function Qr(){xn.assert(Gn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Qr(tn+"&&typeof ",tn,'==="object"'),Qr('!("cmp" in ',tn,")||(",tn,".cmp in ",Kn,")")});var Dr=Gn.def('"cmp" in ',tn,"?",Kn,"[",tn,".cmp]",":",Ud),jr=Gn.def(tn,".ref|0"),vi=Gn.def('"mask" in ',tn,"?",tn,".mask|0:-1");return[Dr,jr,vi]});case Kh:case qh:return or(function(xn){de.commandType(xn,"object",Jn,nn.commandStr);var Gn=xn.fail||"keep",tn=xn.zfail||"keep",Kn=xn.zpass||"keep";return de.commandParameter(Gn,vp,Vn+".fail",nn.commandStr),de.commandParameter(tn,vp,Vn+".zfail",nn.commandStr),de.commandParameter(Kn,vp,Vn+".zpass",nn.commandStr),[Vn===qh?Of:ed,vp[Gn],vp[tn],vp[Kn]]},function(xn,Gn,tn){var Kn=xn.constants.stencilOps;de.optional(function(){xn.assert(Gn,tn+"&&typeof "+tn+'==="object"',"invalid "+Vn)});function Dr(jr){return de.optional(function(){xn.assert(Gn,'!("'+jr+'" in '+tn+")||("+tn+"."+jr+" in "+Kn+")","invalid "+Vn+"."+jr+", must be one of "+Object.keys(vp))}),Gn.def('"',jr,'" in ',tn,"?",Kn,"[",tn,".",jr,"]:",Ud)}return[Vn===qh?Of:ed,Dr("fail"),Dr("zfail"),Dr("zpass")]});case Vf:return or(function(xn){de.commandType(xn,"object",Jn,nn.commandStr);var Gn=xn.factor|0,tn=xn.units|0;return de.commandType(Gn,"number",Jn+".factor",nn.commandStr),de.commandType(tn,"number",Jn+".units",nn.commandStr),[Gn,tn]},function(xn,Gn,tn){de.optional(function(){xn.assert(Gn,tn+"&&typeof "+tn+'==="object"',"invalid "+Vn)});var Kn=Gn.def(tn,".factor|0"),Dr=Gn.def(tn,".units|0");return[Kn,Dr]});case Es:return or(function(xn){var Gn=0;return xn==="front"?Gn=ed:xn==="back"&&(Gn=Of),de.command(!!Gn,Jn,nn.commandStr),Gn},function(xn,Gn,tn){return de.optional(function(){xn.assert(Gn,tn+'==="front"||'+tn+'==="back"',"invalid cull.face")}),Gn.def(tn,'==="front"?',ed,":",Of)});case pl:return or(function(xn){return de.command(typeof xn=="number"&&xn>=Ar.lineWidthDims[0]&&xn<=Ar.lineWidthDims[1],"invalid line width, must be a positive number between "+Ar.lineWidthDims[0]+" and "+Ar.lineWidthDims[1],nn.commandStr),xn},function(xn,Gn,tn){return de.optional(function(){xn.assert(Gn,"typeof "+tn+'==="number"&&'+tn+">="+Ar.lineWidthDims[0]+"&&"+tn+"<="+Ar.lineWidthDims[1],"invalid line width")}),tn});case _l:return or(function(xn){return de.commandParameter(xn,mp,Jn,nn.commandStr),mp[xn]},function(xn,Gn,tn){return de.optional(function(){xn.assert(Gn,tn+'==="cw"||'+tn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Gn.def(tn+'==="cw"?'+Ph+":"+Xv)});case Mu:return or(function(xn){return de.command(ul(xn)&&xn.length===4,"color.mask must be length 4 array",nn.commandStr),xn.map(function(Gn){return!!Gn})},function(xn,Gn,tn){return de.optional(function(){xn.assert(Gn,xn.shared.isArrayLike+"("+tn+")&&"+tn+".length===4","invalid color.mask")}),qn(4,function(Kn){return"!!"+tn+"["+Kn+"]"})});case jc:return or(function(xn){de.command(typeof xn=="object"&&xn,Jn,nn.commandStr);var Gn="value"in xn?xn.value:1,tn=!!xn.invert;return de.command(typeof Gn=="number"&&Gn>=0&&Gn<=1,"sample.coverage.value must be a number between 0 and 1",nn.commandStr),[Gn,tn]},function(xn,Gn,tn){de.optional(function(){xn.assert(Gn,tn+"&&typeof "+tn+'==="object"',"invalid sample.coverage")});var Kn=Gn.def('"value" in ',tn,"?+",tn,".value:1"),Dr=Gn.def("!!",tn,".invert");return[Kn,Dr]})}}),br}function Wu(Dt,nn){var Mn=Dt.static,Tr=Dt.dynamic,br={};return Object.keys(Mn).forEach(function(Vn){var Jn=Mn[Vn],or;if(typeof Jn=="number"||typeof Jn=="boolean")or=_u(function(){return Jn});else if(typeof Jn=="function"){var xn=Jn._reglType;xn==="texture2d"||xn==="textureCube"?or=_u(function(Gn){return Gn.link(Jn)}):xn==="framebuffer"||xn==="framebufferCube"?(de.command(Jn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Vn+'"',nn.commandStr),or=_u(function(Gn){return Gn.link(Jn.color[0])})):de.commandRaise('invalid data for uniform "'+Vn+'"',nn.commandStr)}else ul(Jn)?or=_u(function(Gn){var tn=Gn.global.def("[",qn(Jn.length,function(Kn){return de.command(typeof Jn[Kn]=="number"||typeof Jn[Kn]=="boolean","invalid uniform "+Vn,Gn.commandStr),Jn[Kn]}),"]");return tn}):de.commandRaise('invalid or missing data for uniform "'+Vn+'"',nn.commandStr);or.value=Jn,br[Vn]=or}),Object.keys(Tr).forEach(function(Vn){var Jn=Tr[Vn];br[Vn]=sf(Jn,function(or,xn){return or.invoke(xn,Jn)})}),br}function Za(Dt,nn){var Mn=Dt.static,Tr=Dt.dynamic,br={};return Object.keys(Mn).forEach(function(Vn){var Jn=Mn[Vn],or=qt.id(Vn),xn=new fr;if(Kv(Jn))xn.state=Pi,xn.buffer=$r.getBuffer($r.create(Jn,Wp,!1,!0)),xn.type=0;else{var Gn=$r.getBuffer(Jn);if(Gn)xn.state=Pi,xn.buffer=Gn,xn.type=0;else if(de.command(typeof Jn=="object"&&Jn,"invalid data for attribute "+Vn,nn.commandStr),"constant"in Jn){var tn=Jn.constant;xn.buffer="null",xn.state=lo,typeof tn=="number"?xn.x=tn:(de.command(ul(tn)&&tn.length>0&&tn.length<=4,"invalid constant for attribute "+Vn,nn.commandStr),ti.forEach(function(Io,Fi){Fi<tn.length&&(xn[Io]=tn[Fi])}))}else{Kv(Jn.buffer)?Gn=$r.getBuffer($r.create(Jn.buffer,Wp,!1,!0)):Gn=$r.getBuffer(Jn.buffer),de.command(!!Gn,'missing buffer for attribute "'+Vn+'"',nn.commandStr);var Kn=Jn.offset|0;de.command(Kn>=0,'invalid offset for attribute "'+Vn+'"',nn.commandStr);var Dr=Jn.stride|0;de.command(Dr>=0&&Dr<256,'invalid stride for attribute "'+Vn+'", must be integer betweeen [0, 255]',nn.commandStr);var jr=Jn.size|0;de.command(!("size"in Jn)||jr>0&&jr<=4,'invalid size for attribute "'+Vn+'", must be 1,2,3,4',nn.commandStr);var vi=!!Jn.normalized,Qr=0;"type"in Jn&&(de.commandParameter(Jn.type,jl,"invalid type for attribute "+Vn,nn.commandStr),Qr=jl[Jn.type]);var bi=Jn.divisor|0;"divisor"in Jn&&(de.command(bi===0||_i,'cannot specify divisor for attribute "'+Vn+'", instancing not supported',nn.commandStr),de.command(bi>=0,'invalid divisor for attribute "'+Vn+'"',nn.commandStr)),de.optional(function(){var Io=nn.commandStr,Fi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Jn).forEach(function($i){de.command(Fi.indexOf($i)>=0,'unknown parameter "'+$i+'" for attribute pointer "'+Vn+'" (valid parameters are '+Fi+")",Io)})}),xn.buffer=Gn,xn.state=Pi,xn.size=jr,xn.normalized=vi,xn.type=Qr||Gn.dtype,xn.offset=Kn,xn.stride=Dr,xn.divisor=bi}}br[Vn]=_u(function(Io,Fi){var $i=Io.attribCache;if(or in $i)return $i[or];var na={isStream:!1};return Object.keys(xn).forEach(function(Zo){na[Zo]=xn[Zo]}),xn.buffer&&(na.buffer=Io.link(xn.buffer),na.type=na.type||na.buffer+".dtype"),$i[or]=na,na})}),Object.keys(Tr).forEach(function(Vn){var Jn=Tr[Vn];function or(xn,Gn){var tn=xn.invoke(Gn,Jn),Kn=xn.shared,Dr=xn.constants,jr=Kn.isBufferArgs,vi=Kn.buffer;de.optional(function(){xn.assert(Gn,tn+"&&(typeof "+tn+'==="object"||typeof '+tn+'==="function")&&('+jr+"("+tn+")||"+vi+".getBuffer("+tn+")||"+vi+".getBuffer("+tn+".buffer)||"+jr+"("+tn+'.buffer)||("constant" in '+tn+"&&(typeof "+tn+'.constant==="number"||'+Kn.isArrayLike+"("+tn+".constant))))",'invalid dynamic attribute "'+Vn+'"')});var Qr={isStream:Gn.def(!1)},bi=new fr;bi.state=Pi,Object.keys(bi).forEach(function(na){Qr[na]=Gn.def(""+bi[na])});var Io=Qr.buffer,Fi=Qr.type;Gn("if(",jr,"(",tn,")){",Qr.isStream,"=true;",Io,"=",vi,".createStream(",Wp,",",tn,");",Fi,"=",Io,".dtype;","}else{",Io,"=",vi,".getBuffer(",tn,");","if(",Io,"){",Fi,"=",Io,".dtype;",'}else if("constant" in ',tn,"){",Qr.state,"=",lo,";","if(typeof "+tn+'.constant === "number"){',Qr[ti[0]],"=",tn,".constant;",ti.slice(1).map(function(na){return Qr[na]}).join("="),"=0;","}else{",ti.map(function(na,Zo){return Qr[na]+"="+tn+".constant.length>"+Zo+"?"+tn+".constant["+Zo+"]:0;"}).join(""),"}}else{","if(",jr,"(",tn,".buffer)){",Io,"=",vi,".createStream(",Wp,",",tn,".buffer);","}else{",Io,"=",vi,".getBuffer(",tn,".buffer);","}",Fi,'="type" in ',tn,"?",Dr.glTypes,"[",tn,".type]:",Io,".dtype;",Qr.normalized,"=!!",tn,".normalized;");function $i(na){Gn(Qr[na],"=",tn,".",na,"|0;")}return $i("size"),$i("offset"),$i("stride"),$i("divisor"),Gn("}}"),Gn.exit("if(",Qr.isStream,"){",vi,".destroyStream(",Io,");","}"),Qr}br[Vn]=sf(Jn,or)}),br}function Wl(Dt,nn){var Mn=Dt.static,Tr=Dt.dynamic;if(oh in Mn){var br=Mn[oh];return br!==null&&Bi.getVAO(br)===null&&(br=Bi.createVAO(br)),_u(function(Jn){return Jn.link(Bi.getVAO(br))})}else if(oh in Tr){var Vn=Tr[oh];return sf(Vn,function(Jn,or){var xn=Jn.invoke(or,Vn);return or.def(Jn.shared.vao+".getVAO("+xn+")")})}return null}function Ks(Dt){var nn=Dt.static,Mn=Dt.dynamic,Tr={};return Object.keys(nn).forEach(function(br){var Vn=nn[br];Tr[br]=_u(function(Jn,or){return typeof Vn=="number"||typeof Vn=="boolean"?""+Vn:Jn.link(Vn)})}),Object.keys(Mn).forEach(function(br){var Vn=Mn[br];Tr[br]=sf(Vn,function(Jn,or){return Jn.invoke(or,Vn)})}),Tr}function se(Dt,nn,Mn,Tr,br){var Vn=Dt.static,Jn=Dt.dynamic;de.optional(function(){var $i=[tc,wf,Af,Ga,Hl,Hf,Jl,Vp,Ll,oh].concat(Ei);function na(Zo){Object.keys(Zo).forEach(function(Ns){de.command($i.indexOf(Ns)>=0,'unknown parameter "'+Ns+'"',br.commandStr)})}na(Vn),na(Jn)});var or=sa(Dt,nn),xn=ao(Dt,br),Gn=ca(Dt,xn,br),tn=hs(Dt,br),Kn=Tl(Dt,br),Dr=Ko(Dt,br,or);function jr($i){var na=Gn[$i];na&&(Kn[$i]=na)}jr(Il),jr(di(Ai));var vi=Object.keys(Kn).length>0,Qr={framebuffer:xn,draw:tn,shader:Dr,state:Kn,dirty:vi,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Qr.profile=La(Dt,br),Qr.uniforms=Wu(Mn,br),Qr.drawVAO=Qr.scopeVAO=Wl(Dt,br),!Qr.drawVAO&&Dr.program&&!or&&Rn.angle_instanced_arrays){var bi=!0,Io=Dr.program.attributes.map(function($i){var na=nn.static[$i];return bi=bi&&!!na,na});if(bi&&Io.length>0){var Fi=Bi.getVAO(Bi.createVAO(Io));Qr.drawVAO=new Cc(null,null,null,function($i,na){return $i.link(Fi)}),Qr.useVAO=!0}}return or?Qr.useVAO=!0:Qr.attributes=Za(nn,br),Qr.context=Ks(Tr,br),Qr}function eu(Dt,nn,Mn){var Tr=Dt.shared,br=Tr.context,Vn=Dt.scope();Object.keys(Mn).forEach(function(Jn){nn.save(br,"."+Jn);var or=Mn[Jn];Vn(br,".",Jn,"=",or.append(Dt,nn),";")}),nn(Vn)}function rs(Dt,nn,Mn,Tr){var br=Dt.shared,Vn=br.gl,Jn=br.framebuffer,or;io&&(or=nn.def(br.extensions,".webgl_draw_buffers"));var xn=Dt.constants,Gn=xn.drawBuffer,tn=xn.backBuffer,Kn;Mn?Kn=Mn.append(Dt,nn):Kn=nn.def(Jn,".next"),Tr||nn("if(",Kn,"!==",Jn,".cur){"),nn("if(",Kn,"){",Vn,".bindFramebuffer(",td,",",Kn,".framebuffer);"),io&&nn(or,".drawBuffersWEBGL(",Gn,"[",Kn,".colorAttachments.length]);"),nn("}else{",Vn,".bindFramebuffer(",td,",null);"),io&&nn(or,".drawBuffersWEBGL(",tn,");"),nn("}",Jn,".cur=",Kn,";"),Tr||nn("}")}function ur(Dt,nn,Mn){var Tr=Dt.shared,br=Tr.gl,Vn=Dt.current,Jn=Dt.next,or=Tr.current,xn=Tr.next,Gn=Dt.cond(or,".dirty");Ei.forEach(function(tn){var Kn=di(tn);if(!(Kn in Mn.state)){var Dr,jr;if(Kn in Jn){Dr=Jn[Kn],jr=Vn[Kn];var vi=qn(ri[Kn].length,function(bi){return Gn.def(Dr,"[",bi,"]")});Gn(Dt.cond(vi.map(function(bi,Io){return bi+"!=="+jr+"["+Io+"]"}).join("||")).then(br,".",si[Kn],"(",vi,");",vi.map(function(bi,Io){return jr+"["+Io+"]="+bi}).join(";"),";"))}else{Dr=Gn.def(xn,".",Kn);var Qr=Dt.cond(Dr,"!==",or,".",Kn);Gn(Qr),Kn in to?Qr(Dt.cond(Dr).then(br,".enable(",to[Kn],");").else(br,".disable(",to[Kn],");"),or,".",Kn,"=",Dr,";"):Qr(br,".",si[Kn],"(",Dr,");",or,".",Kn,"=",Dr,";")}}}),Object.keys(Mn.state).length===0&&Gn(or,".dirty=false;"),nn(Gn)}function Kr(Dt,nn,Mn,Tr){var br=Dt.shared,Vn=Dt.current,Jn=br.current,or=br.gl;P0(Object.keys(Mn)).forEach(function(xn){var Gn=Mn[xn];if(!(Tr&&!Tr(Gn))){var tn=Gn.append(Dt,nn);if(to[xn]){var Kn=to[xn];mc(Gn)?tn?nn(or,".enable(",Kn,");"):nn(or,".disable(",Kn,");"):nn(Dt.cond(tn).then(or,".enable(",Kn,");").else(or,".disable(",Kn,");")),nn(Jn,".",xn,"=",tn,";")}else if(ul(tn)){var Dr=Vn[xn];nn(or,".",si[xn],"(",tn,");",tn.map(function(jr,vi){return Dr+"["+vi+"]="+jr}).join(";"),";")}else nn(or,".",si[xn],"(",tn,");",Jn,".",xn,"=",tn,";")}})}function Dl(Dt,nn){_i&&(Dt.instancing=nn.def(Dt.shared.extensions,".angle_instanced_arrays"))}function Sa(Dt,nn,Mn,Tr,br){var Vn=Dt.shared,Jn=Dt.stats,or=Vn.current,xn=Vn.timer,Gn=Mn.profile;function tn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Kn,Dr;function jr($i){Kn=nn.def(),$i(Kn,"=",tn(),";"),typeof br=="string"?$i(Jn,".count+=",br,";"):$i(Jn,".count++;"),pi&&(Tr?(Dr=nn.def(),$i(Dr,"=",xn,".getNumPendingQueries();")):$i(xn,".beginQuery(",Jn,");"))}function vi($i){$i(Jn,".cpuTime+=",tn(),"-",Kn,";"),pi&&(Tr?$i(xn,".pushScopeStats(",Dr,",",xn,".getNumPendingQueries(),",Jn,");"):$i(xn,".endQuery();"))}function Qr($i){var na=nn.def(or,".profile");nn(or,".profile=",$i,";"),nn.exit(or,".profile=",na,";")}var bi;if(Gn){if(mc(Gn)){Gn.enable?(jr(nn),vi(nn.exit),Qr("true")):Qr("false");return}bi=Gn.append(Dt,nn),Qr(bi)}else bi=nn.def(or,".profile");var Io=Dt.block();jr(Io),nn("if(",bi,"){",Io,"}");var Fi=Dt.block();vi(Fi),nn.exit("if(",bi,"){",Fi,"}")}function rc(Dt,nn,Mn,Tr,br){var Vn=Dt.shared;function Jn(xn){switch(xn){case sv:case Xp:case $p:return 2;case C0:case Sl:case Yp:return 3;case lv:case Qh:case zd:return 4;default:return 1}}function or(xn,Gn,tn){var Kn=Vn.gl,Dr=nn.def(xn,".location"),jr=nn.def(Vn.attributes,"[",Dr,"]"),vi=tn.state,Qr=tn.buffer,bi=[tn.x,tn.y,tn.z,tn.w],Io=["buffer","normalized","offset","stride"];function Fi(){nn("if(!",jr,".buffer){",Kn,".enableVertexAttribArray(",Dr,");}");var na=tn.type,Zo;if(tn.size?Zo=nn.def(tn.size,"||",Gn):Zo=Gn,nn("if(",jr,".type!==",na,"||",jr,".size!==",Zo,"||",Io.map(function(Gu){return jr+"."+Gu+"!=="+tn[Gu]}).join("||"),"){",Kn,".bindBuffer(",Wp,",",Qr,".buffer);",Kn,".vertexAttribPointer(",[Dr,Zo,na,tn.normalized,tn.stride,tn.offset],");",jr,".type=",na,";",jr,".size=",Zo,";",Io.map(function(Gu){return jr+"."+Gu+"="+tn[Gu]+";"}).join(""),"}"),_i){var Ns=tn.divisor;nn("if(",jr,".divisor!==",Ns,"){",Dt.instancing,".vertexAttribDivisorANGLE(",[Dr,Ns],");",jr,".divisor=",Ns,";}")}}function $i(){nn("if(",jr,".buffer){",Kn,".disableVertexAttribArray(",Dr,");",jr,".buffer=null;","}if(",ti.map(function(na,Zo){return jr+"."+na+"!=="+bi[Zo]}).join("||"),"){",Kn,".vertexAttrib4f(",Dr,",",bi,");",ti.map(function(na,Zo){return jr+"."+na+"="+bi[Zo]+";"}).join(""),"}")}vi===Pi?Fi():vi===lo?$i():(nn("if(",vi,"===",Pi,"){"),Fi(),nn("}else{"),$i(),nn("}"))}Tr.forEach(function(xn){var Gn=xn.name,tn=Mn.attributes[Gn],Kn;if(tn){if(!br(tn))return;Kn=tn.append(Dt,nn)}else{if(!br(Rc))return;var Dr=Dt.scopeAttrib(Gn);de.optional(function(){Dt.assert(nn,Dr+".state","missing attribute "+Gn)}),Kn={},Object.keys(new fr).forEach(function(jr){Kn[jr]=nn.def(Dr,".",jr)})}or(Dt.link(xn),Jn(xn.info.type),Kn)})}function Us(Dt,nn,Mn,Tr,br){for(var Vn=Dt.shared,Jn=Vn.gl,or,xn=0;xn<Tr.length;++xn){var Gn=Tr[xn],tn=Gn.name,Kn=Gn.info.type,Dr=Mn.uniforms[tn],jr=Dt.link(Gn),vi=jr+".location",Qr;if(Dr){if(!br(Dr))continue;if(mc(Dr)){var bi=Dr.value;if(de.command(bi!==null&&typeof bi!="undefined",'missing uniform "'+tn+'"',Dt.commandStr),Kn===qp||Kn===R0){de.command(typeof bi=="function"&&(Kn===qp&&(bi._reglType==="texture2d"||bi._reglType==="framebuffer")||Kn===R0&&(bi._reglType==="textureCube"||bi._reglType==="framebufferCube")),"invalid texture for uniform "+tn,Dt.commandStr);var Io=Dt.link(bi._texture||bi.color[0]._texture);nn(Jn,".uniform1i(",vi,",",Io+".bind());"),nn.exit(Io,".unbind();")}else if(Kn===Kp||Kn===Jh||Kn===af){de.optional(function(){de.command(ul(bi),"invalid matrix for uniform "+tn,Dt.commandStr),de.command(Kn===Kp&&bi.length===4||Kn===Jh&&bi.length===9||Kn===af&&bi.length===16,"invalid length for matrix uniform "+tn,Dt.commandStr)});var Fi=Dt.global.def("new Float32Array(["+Array.prototype.slice.call(bi)+"])"),$i=2;Kn===Jh?$i=3:Kn===af&&($i=4),nn(Jn,".uniformMatrix",$i,"fv(",vi,",false,",Fi,");")}else{switch(Kn){case Ng:de.commandType(bi,"number","uniform "+tn,Dt.commandStr),or="1f";break;case sv:de.command(ul(bi)&&bi.length===2,"uniform "+tn,Dt.commandStr),or="2f";break;case C0:de.command(ul(bi)&&bi.length===3,"uniform "+tn,Dt.commandStr),or="3f";break;case lv:de.command(ul(bi)&&bi.length===4,"uniform "+tn,Dt.commandStr),or="4f";break;case Hm:de.commandType(bi,"boolean","uniform "+tn,Dt.commandStr),or="1i";break;case nc:de.commandType(bi,"number","uniform "+tn,Dt.commandStr),or="1i";break;case $p:de.command(ul(bi)&&bi.length===2,"uniform "+tn,Dt.commandStr),or="2i";break;case Xp:de.command(ul(bi)&&bi.length===2,"uniform "+tn,Dt.commandStr),or="2i";break;case Yp:de.command(ul(bi)&&bi.length===3,"uniform "+tn,Dt.commandStr),or="3i";break;case Sl:de.command(ul(bi)&&bi.length===3,"uniform "+tn,Dt.commandStr),or="3i";break;case zd:de.command(ul(bi)&&bi.length===4,"uniform "+tn,Dt.commandStr),or="4i";break;case Qh:de.command(ul(bi)&&bi.length===4,"uniform "+tn,Dt.commandStr),or="4i";break}nn(Jn,".uniform",or,"(",vi,",",ul(bi)?Array.prototype.slice.call(bi):bi,");")}continue}else Qr=Dr.append(Dt,nn)}else{if(!br(Rc))continue;Qr=nn.def(Vn.uniforms,"[",qt.id(tn),"]")}Kn===qp?nn("if(",Qr,"&&",Qr,'._reglType==="framebuffer"){',Qr,"=",Qr,".color[0];","}"):Kn===R0&&nn("if(",Qr,"&&",Qr,'._reglType==="framebufferCube"){',Qr,"=",Qr,".color[0];","}"),de.optional(function(){function tu(_p,bp){Dt.assert(nn,_p,'bad data or missing for uniform "'+tn+'".  '+bp)}function $m(_p){tu("typeof "+Qr+'==="'+_p+'"',"invalid type, expected "+_p)}function Cf(_p,bp){tu(Vn.isArrayLike+"("+Qr+")&&"+Qr+".length==="+_p,"invalid vector, should have length "+_p,Dt.commandStr)}function n_(_p){tu("typeof "+Qr+'==="function"&&'+Qr+'._reglType==="texture'+(_p===Um?"2d":"Cube")+'"',"invalid texture type",Dt.commandStr)}switch(Kn){case nc:$m("number");break;case Xp:Cf(2,"number");break;case Sl:Cf(3,"number");break;case Qh:Cf(4,"number");break;case Ng:$m("number");break;case sv:Cf(2,"number");break;case C0:Cf(3,"number");break;case lv:Cf(4,"number");break;case Hm:$m("boolean");break;case $p:Cf(2,"boolean");break;case Yp:Cf(3,"boolean");break;case zd:Cf(4,"boolean");break;case Kp:Cf(4,"number");break;case Jh:Cf(9,"number");break;case af:Cf(16,"number");break;case qp:n_(Um);break;case R0:n_(Wv);break}});var na=1;switch(Kn){case qp:case R0:var Zo=nn.def(Qr,"._texture");nn(Jn,".uniform1i(",vi,",",Zo,".bind());"),nn.exit(Zo,".unbind();");continue;case nc:case Hm:or="1i";break;case Xp:case $p:or="2i",na=2;break;case Sl:case Yp:or="3i",na=3;break;case Qh:case zd:or="4i",na=4;break;case Ng:or="1f";break;case sv:or="2f",na=2;break;case C0:or="3f",na=3;break;case lv:or="4f",na=4;break;case Kp:or="Matrix2fv";break;case Jh:or="Matrix3fv";break;case af:or="Matrix4fv";break}if(nn(Jn,".uniform",or,"(",vi,","),or.charAt(0)==="M"){var Ns=Math.pow(Kn-Kp+2,2),Gu=Dt.global.def("new Float32Array(",Ns,")");nn("false,(Array.isArray(",Qr,")||",Qr," instanceof Float32Array)?",Qr,":(",qn(Ns,function(tu){return Gu+"["+tu+"]="+Qr+"["+tu+"]"}),",",Gu,")")}else na>1?nn(qn(na,function(tu){return Qr+"["+tu+"]"})):nn(Qr);nn(");")}}function qo(Dt,nn,Mn,Tr){var br=Dt.shared,Vn=br.gl,Jn=br.draw,or=Tr.draw;function xn(){var Zo=or.elements,Ns,Gu=nn;return Zo?((Zo.contextDep&&Tr.contextDynamic||Zo.propDep)&&(Gu=Mn),Ns=Zo.append(Dt,Gu)):Ns=Gu.def(Jn,".",Ga),Ns&&Gu("if("+Ns+")"+Vn+".bindBuffer("+$y+","+Ns+".buffer.buffer);"),Ns}function Gn(){var Zo=or.count,Ns,Gu=nn;return Zo?((Zo.contextDep&&Tr.contextDynamic||Zo.propDep)&&(Gu=Mn),Ns=Zo.append(Dt,Gu),de.optional(function(){Zo.MISSING&&Dt.assert(nn,"false","missing vertex count"),Zo.DYNAMIC&&Dt.assert(Gu,Ns+">=0","missing vertex count")})):(Ns=Gu.def(Jn,".",Jl),de.optional(function(){Dt.assert(Gu,Ns+">=0","missing vertex count")})),Ns}var tn=xn();function Kn(Zo){var Ns=or[Zo];return Ns?Ns.contextDep&&Tr.contextDynamic||Ns.propDep?Ns.append(Dt,Mn):Ns.append(Dt,nn):nn.def(Jn,".",Zo)}var Dr=Kn(Hl),jr=Kn(Hf),vi=Gn();if(typeof vi=="number"){if(vi===0)return}else Mn("if(",vi,"){"),Mn.exit("}");var Qr,bi;_i&&(Qr=Kn(Vp),bi=Dt.instancing);var Io=tn+".type",Fi=or.elements&&mc(or.elements);function $i(){function Zo(){Mn(bi,".drawElementsInstancedANGLE(",[Dr,vi,Io,jr+"<<(("+Io+"-"+Ni+")>>1)",Qr],");")}function Ns(){Mn(bi,".drawArraysInstancedANGLE(",[Dr,jr,vi,Qr],");")}tn?Fi?Zo():(Mn("if(",tn,"){"),Zo(),Mn("}else{"),Ns(),Mn("}")):Ns()}function na(){function Zo(){Mn(Vn+".drawElements("+[Dr,vi,Io,jr+"<<(("+Io+"-"+Ni+")>>1)"]+");")}function Ns(){Mn(Vn+".drawArrays("+[Dr,jr,vi]+");")}tn?Fi?Zo():(Mn("if(",tn,"){"),Zo(),Mn("}else{"),Ns(),Mn("}")):Ns()}_i&&(typeof Qr!="number"||Qr>=0)?typeof Qr=="string"?(Mn("if(",Qr,">0){"),$i(),Mn("}else if(",Qr,"<0){"),na(),Mn("}")):$i():na()}function Ca(Dt,nn,Mn,Tr,br){var Vn=Fo(),Jn=Vn.proc("body",br);return de.optional(function(){Vn.commandStr=nn.commandStr,Vn.command=Vn.link(nn.commandStr)}),_i&&(Vn.instancing=Jn.def(Vn.shared.extensions,".angle_instanced_arrays")),Dt(Vn,Jn,Mn,Tr),Vn.compile().body}function ds(Dt,nn,Mn,Tr){Dl(Dt,nn),Mn.useVAO?Mn.drawVAO?nn(Dt.shared.vao,".setVAO(",Mn.drawVAO.append(Dt,nn),");"):nn(Dt.shared.vao,".setVAO(",Dt.shared.vao,".targetVAO);"):(nn(Dt.shared.vao,".setVAO(null);"),rc(Dt,nn,Mn,Tr.attributes,function(){return!0})),Us(Dt,nn,Mn,Tr.uniforms,function(){return!0}),qo(Dt,nn,nn,Mn)}function fu(Dt,nn){var Mn=Dt.proc("draw",1);Dl(Dt,Mn),eu(Dt,Mn,nn.context),rs(Dt,Mn,nn.framebuffer),ur(Dt,Mn,nn),Kr(Dt,Mn,nn.state),Sa(Dt,Mn,nn,!1,!0);var Tr=nn.shader.progVar.append(Dt,Mn);if(Mn(Dt.shared.gl,".useProgram(",Tr,".program);"),nn.shader.program)ds(Dt,Mn,nn,nn.shader.program);else{Mn(Dt.shared.vao,".setVAO(null);");var br=Dt.global.def("{}"),Vn=Mn.def(Tr,".id"),Jn=Mn.def(br,"[",Vn,"]");Mn(Dt.cond(Jn).then(Jn,".call(this,a0);").else(Jn,"=",br,"[",Vn,"]=",Dt.link(function(or){return Ca(ds,Dt,nn,or,1)}),"(",Tr,");",Jn,".call(this,a0);"))}Object.keys(nn.state).length>0&&Mn(Dt.shared.current,".dirty=true;")}function Ih(Dt,nn,Mn,Tr){Dt.batchId="a1",Dl(Dt,nn);function br(){return!0}rc(Dt,nn,Mn,Tr.attributes,br),Us(Dt,nn,Mn,Tr.uniforms,br),qo(Dt,nn,nn,Mn)}function gn(Dt,nn,Mn,Tr){Dl(Dt,nn);var br=Mn.contextDep,Vn=nn.def(),Jn="a0",or="a1",xn=nn.def();Dt.shared.props=xn,Dt.batchId=Vn;var Gn=Dt.scope(),tn=Dt.scope();nn(Gn.entry,"for(",Vn,"=0;",Vn,"<",or,";++",Vn,"){",xn,"=",Jn,"[",Vn,"];",tn,"}",Gn.exit);function Kn(Io){return Io.contextDep&&br||Io.propDep}function Dr(Io){return!Kn(Io)}if(Mn.needsContext&&eu(Dt,tn,Mn.context),Mn.needsFramebuffer&&rs(Dt,tn,Mn.framebuffer),Kr(Dt,tn,Mn.state,Kn),Mn.profile&&Kn(Mn.profile)&&Sa(Dt,tn,Mn,!1,!0),Tr)Mn.useVAO?Mn.drawVAO?Kn(Mn.drawVAO)?tn(Dt.shared.vao,".setVAO(",Mn.drawVAO.append(Dt,tn),");"):Gn(Dt.shared.vao,".setVAO(",Mn.drawVAO.append(Dt,Gn),");"):Gn(Dt.shared.vao,".setVAO(",Dt.shared.vao,".targetVAO);"):(Gn(Dt.shared.vao,".setVAO(null);"),rc(Dt,Gn,Mn,Tr.attributes,Dr),rc(Dt,tn,Mn,Tr.attributes,Kn)),Us(Dt,Gn,Mn,Tr.uniforms,Dr),Us(Dt,tn,Mn,Tr.uniforms,Kn),qo(Dt,Gn,tn,Mn);else{var jr=Dt.global.def("{}"),vi=Mn.shader.progVar.append(Dt,tn),Qr=tn.def(vi,".id"),bi=tn.def(jr,"[",Qr,"]");tn(Dt.shared.gl,".useProgram(",vi,".program);","if(!",bi,"){",bi,"=",jr,"[",Qr,"]=",Dt.link(function(Io){return Ca(Ih,Dt,Mn,Io,2)}),"(",vi,");}",bi,".call(this,a0[",Vn,"],",Vn,");")}}function Pr(Dt,nn){var Mn=Dt.proc("batch",2);Dt.batchId="0",Dl(Dt,Mn);var Tr=!1,br=!0;Object.keys(nn.context).forEach(function(jr){Tr=Tr||nn.context[jr].propDep}),Tr||(eu(Dt,Mn,nn.context),br=!1);var Vn=nn.framebuffer,Jn=!1;Vn?(Vn.propDep?Tr=Jn=!0:Vn.contextDep&&Tr&&(Jn=!0),Jn||rs(Dt,Mn,Vn)):rs(Dt,Mn,null),nn.state.viewport&&nn.state.viewport.propDep&&(Tr=!0);function or(jr){return jr.contextDep&&Tr||jr.propDep}ur(Dt,Mn,nn),Kr(Dt,Mn,nn.state,function(jr){return!or(jr)}),(!nn.profile||!or(nn.profile))&&Sa(Dt,Mn,nn,!1,"a1"),nn.contextDep=Tr,nn.needsContext=br,nn.needsFramebuffer=Jn;var xn=nn.shader.progVar;if(xn.contextDep&&Tr||xn.propDep)gn(Dt,Mn,nn,null);else{var Gn=xn.append(Dt,Mn);if(Mn(Dt.shared.gl,".useProgram(",Gn,".program);"),nn.shader.program)gn(Dt,Mn,nn,nn.shader.program);else{Mn(Dt.shared.vao,".setVAO(null);");var tn=Dt.global.def("{}"),Kn=Mn.def(Gn,".id"),Dr=Mn.def(tn,"[",Kn,"]");Mn(Dt.cond(Dr).then(Dr,".call(this,a0,a1);").else(Dr,"=",tn,"[",Kn,"]=",Dt.link(function(jr){return Ca(gn,Dt,nn,jr,2)}),"(",Gn,");",Dr,".call(this,a0,a1);"))}}Object.keys(nn.state).length>0&&Mn(Dt.shared.current,".dirty=true;")}function xr(Dt,nn){var Mn=Dt.proc("scope",3);Dt.batchId="a2";var Tr=Dt.shared,br=Tr.current;eu(Dt,Mn,nn.context),nn.framebuffer&&nn.framebuffer.append(Dt,Mn),P0(Object.keys(nn.state)).forEach(function(Jn){var or=nn.state[Jn],xn=or.append(Dt,Mn);ul(xn)?xn.forEach(function(Gn,tn){Mn.set(Dt.next[Jn],"["+tn+"]",Gn)}):Mn.set(Tr.next,"."+Jn,xn)}),Sa(Dt,Mn,nn,!0,!0),[Ga,Hf,Jl,Vp,Hl].forEach(function(Jn){var or=nn.draw[Jn];or&&Mn.set(Tr.draw,"."+Jn,""+or.append(Dt,Mn))}),Object.keys(nn.uniforms).forEach(function(Jn){Mn.set(Tr.uniforms,"["+qt.id(Jn)+"]",nn.uniforms[Jn].append(Dt,Mn))}),Object.keys(nn.attributes).forEach(function(Jn){var or=nn.attributes[Jn].append(Dt,Mn),xn=Dt.scopeAttrib(Jn);Object.keys(new fr).forEach(function(Gn){Mn.set(xn,"."+Gn,or[Gn])})}),nn.scopeVAO&&Mn.set(Tr.vao,".targetVAO",nn.scopeVAO.append(Dt,Mn));function Vn(Jn){var or=nn.shader[Jn];or&&Mn.set(Tr.shader,"."+Jn,or.append(Dt,Mn))}Vn(wf),Vn(Af),Object.keys(nn.state).length>0&&(Mn(br,".dirty=true;"),Mn.exit(br,".dirty=true;")),Mn("a1(",Dt.shared.context,",a0,",Dt.batchId,");")}function vo(Dt){if(!(typeof Dt!="object"||ul(Dt))){for(var nn=Object.keys(Dt),Mn=0;Mn<nn.length;++Mn)if(wn.isDynamic(Dt[nn[Mn]]))return!0;return!1}}function ka(Dt,nn,Mn){var Tr=nn.static[Mn];if(!Tr||!vo(Tr))return;var br=Dt.global,Vn=Object.keys(Tr),Jn=!1,or=!1,xn=!1,Gn=Dt.global.def("{}");Vn.forEach(function(Kn){var Dr=Tr[Kn];if(wn.isDynamic(Dr)){typeof Dr=="function"&&(Dr=Tr[Kn]=wn.unbox(Dr));var jr=sf(Dr,null);Jn=Jn||jr.thisDep,xn=xn||jr.propDep,or=or||jr.contextDep}else{switch(br(Gn,".",Kn,"="),typeof Dr){case"number":br(Dr);break;case"string":br('"',Dr,'"');break;case"object":Array.isArray(Dr)&&br("[",Dr.join(),"]");break;default:br(Dt.link(Dr));break}br(";")}});function tn(Kn,Dr){Vn.forEach(function(jr){var vi=Tr[jr];if(wn.isDynamic(vi)){var Qr=Kn.invoke(Dr,vi);Dr(Gn,".",jr,"=",Qr,";")}})}nn.dynamic[Mn]=new wn.DynamicVariable(Or,{thisDep:Jn,contextDep:or,propDep:xn,ref:Gn,append:tn}),delete nn.static[Mn]}function Ps(Dt,nn,Mn,Tr,br){var Vn=Fo();Vn.stats=Vn.link(br),Object.keys(nn.static).forEach(function(or){ka(Vn,nn,or)}),Hv.forEach(function(or){ka(Vn,Dt,or)});var Jn=se(Dt,nn,Mn,Tr,Vn);return fu(Vn,Jn),xr(Vn,Jn),Pr(Vn,Jn),Vn.compile()}return{next:eo,current:ri,procs:function(){var Dt=Fo(),nn=Dt.proc("poll"),Mn=Dt.proc("refresh"),Tr=Dt.block();nn(Tr),Mn(Tr);var br=Dt.shared,Vn=br.gl,Jn=br.next,or=br.current;Tr(or,".dirty=false;"),rs(Dt,nn),rs(Dt,Mn,null,!0);var xn;_i&&(xn=Dt.link(_i)),Rn.oes_vertex_array_object&&Mn(Dt.link(Rn.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Gn=0;Gn<Ar.maxAttributes;++Gn){var tn=Mn.def(br.attributes,"[",Gn,"]"),Kn=Dt.cond(tn,".buffer");Kn.then(Vn,".enableVertexAttribArray(",Gn,");",Vn,".bindBuffer(",Wp,",",tn,".buffer.buffer);",Vn,".vertexAttribPointer(",Gn,",",tn,".size,",tn,".type,",tn,".normalized,",tn,".stride,",tn,".offset);").else(Vn,".disableVertexAttribArray(",Gn,");",Vn,".vertexAttrib4f(",Gn,",",tn,".x,",tn,".y,",tn,".z,",tn,".w);",tn,".buffer=null;"),Mn(Kn),_i&&Mn(xn,".vertexAttribDivisorANGLE(",Gn,",",tn,".divisor);")}return Mn(Dt.shared.vao,".currentVAO=null;",Dt.shared.vao,".setVAO(",Dt.shared.vao,".targetVAO);"),Object.keys(to).forEach(function(Dr){var jr=to[Dr],vi=Tr.def(Jn,".",Dr),Qr=Dt.block();Qr("if(",vi,"){",Vn,".enable(",jr,")}else{",Vn,".disable(",jr,")}",or,".",Dr,"=",vi,";"),Mn(Qr),nn("if(",vi,"!==",or,".",Dr,"){",Qr,"}")}),Object.keys(si).forEach(function(Dr){var jr=si[Dr],vi=ri[Dr],Qr,bi,Io=Dt.block();if(Io(Vn,".",jr,"("),ul(vi)){var Fi=vi.length;Qr=Dt.global.def(Jn,".",Dr),bi=Dt.global.def(or,".",Dr),Io(qn(Fi,function($i){return Qr+"["+$i+"]"}),");",qn(Fi,function($i){return bi+"["+$i+"]="+Qr+"["+$i+"];"}).join("")),nn("if(",qn(Fi,function($i){return Qr+"["+$i+"]!=="+bi+"["+$i+"]"}).join("||"),"){",Io,"}")}else Qr=Tr.def(Jn,".",Dr),bi=Tr.def(or,".",Dr),Io(Qr,");",or,".",Dr,"=",Qr,";"),nn("if(",Qr,"!==",bi,"){",Io,"}");Mn(Io)}),Dt.compile()}(),compile:Ps}}function I0(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var kg=34918,e_=34919,cv=35007,Gm=function(He,qt){if(!qt.ext_disjoint_timer_query)return null;var Rn=[];function Ar(){return Rn.pop()||qt.ext_disjoint_timer_query.createQueryEXT()}function $r(_i){Rn.push(_i)}var Cr=[];function mr(_i){var io=Ar();qt.ext_disjoint_timer_query.beginQueryEXT(cv,io),Cr.push(io),pi(Cr.length-1,Cr.length,_i)}function Ci(){qt.ext_disjoint_timer_query.endQueryEXT(cv)}function li(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Bi=[];function Ri(){return Bi.pop()||new li}function Di(_i){Bi.push(_i)}var Xi=[];function pi(_i,io,ri){var eo=Ri();eo.startQueryIndex=_i,eo.endQueryIndex=io,eo.sum=0,eo.stats=ri,Xi.push(eo)}var ki=[],fr=[];function kr(){var _i,io,ri=Cr.length;if(ri!==0){fr.length=Math.max(fr.length,ri+1),ki.length=Math.max(ki.length,ri+1),ki[0]=0,fr[0]=0;var eo=0;for(_i=0,io=0;io<Cr.length;++io){var Ei=Cr[io];qt.ext_disjoint_timer_query.getQueryObjectEXT(Ei,e_)?(eo+=qt.ext_disjoint_timer_query.getQueryObjectEXT(Ei,kg),$r(Ei)):Cr[_i++]=Ei,ki[io+1]=eo,fr[io+1]=_i}for(Cr.length=_i,_i=0,io=0;io<Xi.length;++io){var to=Xi[io],si=to.startQueryIndex,di=to.endQueryIndex;to.sum+=ki[di]-ki[si];var Uo=fr[si],ua=fr[di];ua===Uo?(to.stats.gpuTime+=to.sum/1e6,Di(to)):(to.startQueryIndex=Uo,to.endQueryIndex=ua,Xi[_i++]=to)}Xi.length=_i}}return{beginQuery:mr,endQuery:Ci,pushScopeStats:pi,update:kr,getNumPendingQueries:function(){return Cr.length},clear:function(){Rn.push.apply(Rn,Cr);for(var _i=0;_i<Rn.length;_i++)qt.ext_disjoint_timer_query.deleteQueryEXT(Rn[_i]);Cr.length=0,Rn.length=0},restore:function(){Cr.length=0,Rn.length=0}}},qv=16384,Mc=256,Qv=1024,gp=34962,Zm="webglcontextlost",fv="webglcontextrestored",yp=1,Xm=2,t_=3;function Jv(He,qt){for(var Rn=0;Rn<He.length;++Rn)if(He[Rn]===qt)return Rn;return-1}function zg(He){var qt=Yn(He);if(!qt)return null;var Rn=qt.gl,Ar=Rn.getContextAttributes(),$r=Rn.isContextLost(),Cr=yr(Rn,qt);if(!Cr)return null;var mr=vt(),Ci=I0(),li=Cr.extensions,Bi=Gm(Rn,li),Ri=Zn(),Di=Rn.drawingBufferWidth,Xi=Rn.drawingBufferHeight,pi={tick:0,time:0,viewportWidth:Di,viewportHeight:Xi,framebufferWidth:Di,framebufferHeight:Xi,drawingBufferWidth:Di,drawingBufferHeight:Xi,pixelRatio:qt.pixelRatio},ki={},fr={elements:null,primitive:4,count:-1,offset:0,instances:-1},kr=bs(Rn,li),_i=Sd(Rn,Ci,qt,ri),io=ht(Rn,li,kr,Ci,_i);function ri(qo){return io.destroyBuffer(qo)}var eo=Wh(Rn,li,_i,Ci),Ei=mn(Rn,mr,Ci,qt),to=zc(Rn,li,kr,function(){Uo.procs.poll()},pi,Ci,qt),si=Ju(Rn,li,kr,Ci,qt),di=Z(Rn,li,kr,to,si,Ci),Uo=Ys(Rn,mr,li,kr,_i,eo,to,di,ki,io,Ei,fr,pi,Bi,qt),ua=vr(Rn,di,Uo.procs.poll,pi,Ar,li,kr),Qi=Uo.next,Si=Rn.canvas,Yr=[],Fo=[],La=[],ao=[qt.onDestroy],ca=null;function sa(){if(Yr.length===0){Bi&&Bi.update(),ca=null;return}ca=In.next(sa),Kr();for(var qo=Yr.length-1;qo>=0;--qo){var Ca=Yr[qo];Ca&&Ca(pi,null,0)}Rn.flush(),Bi&&Bi.update()}function Ko(){!ca&&Yr.length>0&&(ca=In.next(sa))}function hs(){ca&&(In.cancel(sa),ca=null)}function Tl(qo){qo.preventDefault(),$r=!0,hs(),Fo.forEach(function(Ca){Ca()})}function Wu(qo){Rn.getError(),$r=!1,Cr.restore(),Ei.restore(),_i.restore(),to.restore(),si.restore(),di.restore(),io.restore(),Bi&&Bi.restore(),Uo.procs.refresh(),Ko(),La.forEach(function(Ca){Ca()})}Si&&(Si.addEventListener(Zm,Tl,!1),Si.addEventListener(fv,Wu,!1));function Za(){Yr.length=0,hs(),Si&&(Si.removeEventListener(Zm,Tl),Si.removeEventListener(fv,Wu)),Ei.clear(),di.clear(),si.clear(),to.clear(),eo.clear(),_i.clear(),io.clear(),Bi&&Bi.clear(),ao.forEach(function(qo){qo()})}function Wl(qo){de(!!qo,"invalid args to regl({...})"),de.type(qo,"object","invalid args to regl({...})");function Ca(br){var Vn=D({},br);delete Vn.uniforms,delete Vn.attributes,delete Vn.context,delete Vn.vao,"stencil"in Vn&&Vn.stencil.op&&(Vn.stencil.opBack=Vn.stencil.opFront=Vn.stencil.op,delete Vn.stencil.op);function Jn(or){if(or in Vn){var xn=Vn[or];delete Vn[or],Object.keys(xn).forEach(function(Gn){Vn[or+"."+Gn]=xn[Gn]})}}return Jn("blend"),Jn("depth"),Jn("cull"),Jn("stencil"),Jn("polygonOffset"),Jn("scissor"),Jn("sample"),"vao"in br&&(Vn.vao=br.vao),Vn}function ds(br){var Vn={},Jn={};return Object.keys(br).forEach(function(or){var xn=br[or];wn.isDynamic(xn)?Jn[or]=wn.unbox(xn,or):Vn[or]=xn}),{dynamic:Jn,static:Vn}}var fu=ds(qo.context||{}),Ih=ds(qo.uniforms||{}),gn=ds(qo.attributes||{}),Pr=ds(Ca(qo)),xr={gpuTime:0,cpuTime:0,count:0},vo=Uo.compile(Pr,gn,Ih,fu,xr),ka=vo.draw,Ps=vo.batch,Dt=vo.scope,nn=[];function Mn(br){for(;nn.length<br;)nn.push(null);return nn}function Tr(br,Vn){var Jn;if($r&&de.raise("context lost"),typeof br=="function")return Dt.call(this,null,br,0);if(typeof Vn=="function")if(typeof br=="number")for(Jn=0;Jn<br;++Jn)Dt.call(this,null,Vn,Jn);else if(Array.isArray(br))for(Jn=0;Jn<br.length;++Jn)Dt.call(this,br[Jn],Vn,Jn);else return Dt.call(this,br,Vn,0);else if(typeof br=="number"){if(br>0)return Ps.call(this,Mn(br|0),br|0)}else if(Array.isArray(br)){if(br.length)return Ps.call(this,br,br.length)}else return ka.call(this,br)}return D(Tr,{stats:xr})}var Ks=di.setFBO=Wl({framebuffer:wn.define.call(null,yp,"framebuffer")});function se(qo,Ca){var ds=0;Uo.procs.poll();var fu=Ca.color;fu&&(Rn.clearColor(+fu[0]||0,+fu[1]||0,+fu[2]||0,+fu[3]||0),ds|=qv),"depth"in Ca&&(Rn.clearDepth(+Ca.depth),ds|=Mc),"stencil"in Ca&&(Rn.clearStencil(Ca.stencil|0),ds|=Qv),de(!!ds,"called regl.clear with no buffer specified"),Rn.clear(ds)}function eu(qo){if(de(typeof qo=="object"&&qo,"regl.clear() takes an object as input"),"framebuffer"in qo)if(qo.framebuffer&&qo.framebuffer_reglType==="framebufferCube")for(var Ca=0;Ca<6;++Ca)Ks(D({framebuffer:qo.framebuffer.faces[Ca]},qo),se);else Ks(qo,se);else se(null,qo)}function rs(qo){de.type(qo,"function","regl.frame() callback must be a function"),Yr.push(qo);function Ca(){var ds=Jv(Yr,qo);de(ds>=0,"cannot cancel a frame twice");function fu(){var Ih=Jv(Yr,fu);Yr[Ih]=Yr[Yr.length-1],Yr.length-=1,Yr.length<=0&&hs()}Yr[ds]=fu}return Ko(),{cancel:Ca}}function ur(){var qo=Qi.viewport,Ca=Qi.scissor_box;qo[0]=qo[1]=Ca[0]=Ca[1]=0,pi.viewportWidth=pi.framebufferWidth=pi.drawingBufferWidth=qo[2]=Ca[2]=Rn.drawingBufferWidth,pi.viewportHeight=pi.framebufferHeight=pi.drawingBufferHeight=qo[3]=Ca[3]=Rn.drawingBufferHeight}function Kr(){pi.tick+=1,pi.time=Sa(),ur(),Uo.procs.poll()}function Dl(){ur(),Uo.procs.refresh(),Bi&&Bi.update()}function Sa(){return(Zn()-Ri)/1e3}Dl();function rc(qo,Ca){de.type(Ca,"function","listener callback must be a function");var ds;switch(qo){case"frame":return rs(Ca);case"lost":ds=Fo;break;case"restore":ds=La;break;case"destroy":ds=ao;break;default:de.raise("invalid event, must be one of frame,lost,restore,destroy")}return ds.push(Ca),{cancel:function(){for(var fu=0;fu<ds.length;++fu)if(ds[fu]===Ca){ds[fu]=ds[ds.length-1],ds.pop();return}}}}var Us=D(Wl,{clear:eu,prop:wn.define.bind(null,yp),context:wn.define.bind(null,Xm),this:wn.define.bind(null,t_),draw:Wl({}),buffer:function(qo){return _i.create(qo,gp,!1,!1)},elements:function(qo){return eo.create(qo,!1)},texture:to.create2D,cube:to.createCube,renderbuffer:si.create,framebuffer:di.create,framebufferCube:di.createCube,vao:io.createVAO,attributes:Ar,frame:rs,on:rc,limits:kr,hasExtension:function(qo){return kr.extensions.indexOf(qo.toLowerCase())>=0},read:ua,destroy:Za,_gl:Rn,_refresh:Dl,poll:function(){Kr(),Bi&&Bi.update()},now:Sa,stats:Ci});return qt.onDone(null,Us),Us}return zg})},86851:function(mt,W,D){"use strict";var q=D(89594),G=Array.prototype.concat,E=Array.prototype.slice,he=mt.exports=function(ue){for(var ce=[],xe=0,oe=ue.length;xe<oe;xe++){var Ve=ue[xe];q(Ve)?ce=G.call(ce,E.call(Ve)):ce.push(Ve)}return ce};he.wrap=function(ne){return function(){return ne(he(arguments))}}},89594:function(mt){mt.exports=function(D){return!D||typeof D=="string"?!1:D instanceof Array||Array.isArray(D)||D.length>=0&&(D.splice instanceof Function||Object.getOwnPropertyDescriptor(D,D.length-1)&&D.constructor.name!=="String")}},69848:function(mt){(function(W,D){mt.exports=D()})(this,function(){"use strict";function W(Me,we,je,Ze,ut,Qt){if(!(ut-Ze<=je)){var De=Ze+ut>>1;D(Me,we,De,Ze,ut,Qt%2),W(Me,we,je,Ze,De-1,Qt+1),W(Me,we,je,De+1,ut,Qt+1)}}function D(Me,we,je,Ze,ut,Qt){for(;ut>Ze;){if(ut-Ze>600){var De=ut-Ze+1,St=je-Ze+1,Oe=Math.log(De),it=.5*Math.exp(2*Oe/3),Ke=.5*Math.sqrt(Oe*it*(De-it)/De)*(St-De/2<0?-1:1),Xe=Math.max(Ze,Math.floor(je-St*it/De+Ke)),Pt=Math.min(ut,Math.floor(je+(De-St)*it/De+Ke));D(Me,we,je,Xe,Pt,Qt)}var xt=we[2*je+Qt],Ie=Ze,Wt=ut;for(q(Me,we,Ze,je),we[2*ut+Qt]>xt&&q(Me,we,Ze,ut);Ie<Wt;){for(q(Me,we,Ie,Wt),Ie++,Wt--;we[2*Ie+Qt]<xt;)Ie++;for(;we[2*Wt+Qt]>xt;)Wt--}we[2*Ze+Qt]===xt?q(Me,we,Ze,Wt):(Wt++,q(Me,we,Wt,ut)),Wt<=je&&(Ze=Wt+1),je<=Wt&&(ut=Wt-1)}}function q(Me,we,je,Ze){G(Me,je,Ze),G(we,2*je,2*Ze),G(we,2*je+1,2*Ze+1)}function G(Me,we,je){var Ze=Me[we];Me[we]=Me[je],Me[je]=Ze}function E(Me,we,je,Ze,ut,Qt,De){for(var St=[0,Me.length-1,0],Oe=[],it,Ke;St.length;){var Xe=St.pop(),Pt=St.pop(),xt=St.pop();if(Pt-xt<=De){for(var Ie=xt;Ie<=Pt;Ie++)it=we[2*Ie],Ke=we[2*Ie+1],it>=je&&it<=ut&&Ke>=Ze&&Ke<=Qt&&Oe.push(Me[Ie]);continue}var Wt=Math.floor((xt+Pt)/2);it=we[2*Wt],Ke=we[2*Wt+1],it>=je&&it<=ut&&Ke>=Ze&&Ke<=Qt&&Oe.push(Me[Wt]);var hn=(Xe+1)%2;(Xe===0?je<=it:Ze<=Ke)&&(St.push(xt),St.push(Wt-1),St.push(hn)),(Xe===0?ut>=it:Qt>=Ke)&&(St.push(Wt+1),St.push(Pt),St.push(hn))}return Oe}function he(Me,we,je,Ze,ut,Qt){for(var De=[0,Me.length-1,0],St=[],Oe=ut*ut;De.length;){var it=De.pop(),Ke=De.pop(),Xe=De.pop();if(Ke-Xe<=Qt){for(var Pt=Xe;Pt<=Ke;Pt++)ne(we[2*Pt],we[2*Pt+1],je,Ze)<=Oe&&St.push(Me[Pt]);continue}var xt=Math.floor((Xe+Ke)/2),Ie=we[2*xt],Wt=we[2*xt+1];ne(Ie,Wt,je,Ze)<=Oe&&St.push(Me[xt]);var hn=(it+1)%2;(it===0?je-ut<=Ie:Ze-ut<=Wt)&&(De.push(Xe),De.push(xt-1),De.push(hn)),(it===0?je+ut>=Ie:Ze+ut>=Wt)&&(De.push(xt+1),De.push(Ke),De.push(hn))}return St}function ne(Me,we,je,Ze){var ut=Me-je,Qt=we-Ze;return ut*ut+Qt*Qt}var ue=function(Me){return Me[0]},ce=function(Me){return Me[1]},xe=function(we,je,Ze,ut,Qt){je===void 0&&(je=ue),Ze===void 0&&(Ze=ce),ut===void 0&&(ut=64),Qt===void 0&&(Qt=Float64Array),this.nodeSize=ut,this.points=we;for(var De=we.length<65536?Uint16Array:Uint32Array,St=this.ids=new De(we.length),Oe=this.coords=new Qt(we.length*2),it=0;it<we.length;it++)St[it]=it,Oe[2*it]=je(we[it]),Oe[2*it+1]=Ze(we[it]);W(St,Oe,ut,0,St.length-1,0)};xe.prototype.range=function(we,je,Ze,ut){return E(this.ids,this.coords,we,je,Ze,ut,this.nodeSize)},xe.prototype.within=function(we,je,Ze){return he(this.ids,this.coords,we,je,Ze,this.nodeSize)};var oe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Me){return Me}},Ve=Math.fround||function(Me){return function(we){return Me[0]=+we,Me[0]}}(new Float32Array(1)),re=function(we){this.options=Ot(Object.create(oe),we),this.trees=new Array(this.options.maxZoom+1)};re.prototype.load=function(we){var je=this.options,Ze=je.log,ut=je.minZoom,Qt=je.maxZoom,De=je.nodeSize;Ze&&console.time("total time");var St="prepare "+we.length+" points";Ze&&console.time(St),this.points=we;for(var Oe=[],it=0;it<we.length;it++)we[it].geometry&&Oe.push(Re(we[it],it));this.trees[Qt+1]=new xe(Oe,dt,bt,De,Float32Array),Ze&&console.timeEnd(St);for(var Ke=Qt;Ke>=ut;Ke--){var Xe=+Date.now();Oe=this._cluster(Oe,Ke),this.trees[Ke]=new xe(Oe,dt,bt,De,Float32Array),Ze&&console.log("z%d: %d clusters in %dms",Ke,Oe.length,+Date.now()-Xe)}return Ze&&console.timeEnd("total time"),this},re.prototype.getClusters=function(we,je){var Ze=((we[0]+180)%360+360)%360-180,ut=Math.max(-90,Math.min(90,we[1])),Qt=we[2]===180?180:((we[2]+180)%360+360)%360-180,De=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)Ze=-180,Qt=180;else if(Ze>Qt){var St=this.getClusters([Ze,ut,180,De],je),Oe=this.getClusters([-180,ut,Qt,De],je);return St.concat(Oe)}for(var it=this.trees[this._limitZoom(je)],Ke=it.range(K(Ze),_e(De),K(Qt),_e(ut)),Xe=[],Pt=0,xt=Ke;Pt<xt.length;Pt+=1){var Ie=xt[Pt],Wt=it.points[Ie];Xe.push(Wt.numPoints?Y(Wt):this.points[Wt.index])}return Xe},re.prototype.getChildren=function(we){var je=this._getOriginId(we),Ze=this._getOriginZoom(we),ut="No cluster with the specified id.",Qt=this.trees[Ze];if(!Qt)throw new Error(ut);var De=Qt.points[je];if(!De)throw new Error(ut);for(var St=this.options.radius/(this.options.extent*Math.pow(2,Ze-1)),Oe=Qt.within(De.x,De.y,St),it=[],Ke=0,Xe=Oe;Ke<Xe.length;Ke+=1){var Pt=Xe[Ke],xt=Qt.points[Pt];xt.parentId===we&&it.push(xt.numPoints?Y(xt):this.points[xt.index])}if(it.length===0)throw new Error(ut);return it},re.prototype.getLeaves=function(we,je,Ze){je=je||10,Ze=Ze||0;var ut=[];return this._appendLeaves(ut,we,je,Ze,0),ut},re.prototype.getTile=function(we,je,Ze){var ut=this.trees[this._limitZoom(we)],Qt=Math.pow(2,we),De=this.options,St=De.extent,Oe=De.radius,it=Oe/St,Ke=(Ze-it)/Qt,Xe=(Ze+1+it)/Qt,Pt={features:[]};return this._addTileFeatures(ut.range((je-it)/Qt,Ke,(je+1+it)/Qt,Xe),ut.points,je,Ze,Qt,Pt),je===0&&this._addTileFeatures(ut.range(1-it/Qt,Ke,1,Xe),ut.points,Qt,Ze,Qt,Pt),je===Qt-1&&this._addTileFeatures(ut.range(0,Ke,it/Qt,Xe),ut.points,-1,Ze,Qt,Pt),Pt.features.length?Pt:null},re.prototype.getClusterExpansionZoom=function(we){for(var je=this._getOriginZoom(we)-1;je<=this.options.maxZoom;){var Ze=this.getChildren(we);if(je++,Ze.length!==1)break;we=Ze[0].properties.cluster_id}return je},re.prototype._appendLeaves=function(we,je,Ze,ut,Qt){for(var De=this.getChildren(je),St=0,Oe=De;St<Oe.length;St+=1){var it=Oe[St],Ke=it.properties;if(Ke&&Ke.cluster?Qt+Ke.point_count<=ut?Qt+=Ke.point_count:Qt=this._appendLeaves(we,Ke.cluster_id,Ze,ut,Qt):Qt<ut?Qt++:we.push(it),we.length===Ze)break}return Qt},re.prototype._addTileFeatures=function(we,je,Ze,ut,Qt,De){for(var St=0,Oe=we;St<Oe.length;St+=1){var it=Oe[St],Ke=je[it],Xe=Ke.numPoints,Pt=void 0,xt=void 0,Ie=void 0;if(Xe)Pt=le(Ke),xt=Ke.x,Ie=Ke.y;else{var Wt=this.points[Ke.index];Pt=Wt.properties,xt=K(Wt.geometry.coordinates[0]),Ie=_e(Wt.geometry.coordinates[1])}var hn={type:1,geometry:[[Math.round(this.options.extent*(xt*Qt-Ze)),Math.round(this.options.extent*(Ie*Qt-ut))]],tags:Pt},Pn=void 0;Xe?Pn=Ke.id:this.options.generateId?Pn=Ke.index:this.points[Ke.index].id&&(Pn=this.points[Ke.index].id),Pn!==void 0&&(hn.id=Pn),De.features.push(hn)}},re.prototype._limitZoom=function(we){return Math.max(this.options.minZoom,Math.min(Math.floor(+we),this.options.maxZoom+1))},re.prototype._cluster=function(we,je){for(var Ze=[],ut=this.options,Qt=ut.radius,De=ut.extent,St=ut.reduce,Oe=ut.minPoints,it=Qt/(De*Math.pow(2,je)),Ke=0;Ke<we.length;Ke++){var Xe=we[Ke];if(!(Xe.zoom<=je)){Xe.zoom=je;for(var Pt=this.trees[je+1],xt=Pt.within(Xe.x,Xe.y,it),Ie=Xe.numPoints||1,Wt=Ie,hn=0,Pn=xt;hn<Pn.length;hn+=1){var $n=Pn[hn],nr=Pt.points[$n];nr.zoom>je&&(Wt+=nr.numPoints||1)}if(Wt>Ie&&Wt>=Oe){for(var Ft=Xe.x*Ie,Jt=Xe.y*Ie,ln=St&&Ie>1?this._map(Xe,!0):null,Un=(Ke<<5)+(je+1)+this.points.length,on=0,zt=xt;on<zt.length;on+=1){var kt=zt[on],ke=Pt.points[kt];if(!(ke.zoom<=je)){ke.zoom=je;var nt=ke.numPoints||1;Ft+=ke.x*nt,Jt+=ke.y*nt,ke.parentId=Un,St&&(ln||(ln=this._map(Xe,!0)),St(ln,this._map(ke)))}}Xe.parentId=Un,Ze.push(me(Ft/Wt,Jt/Wt,Un,Wt,ln))}else if(Ze.push(Xe),Wt>1)for(var Vt=0,U=xt;Vt<U.length;Vt+=1){var pe=U[Vt],ct=Pt.points[pe];ct.zoom<=je||(ct.zoom=je,Ze.push(ct))}}}return Ze},re.prototype._getOriginId=function(we){return we-this.points.length>>5},re.prototype._getOriginZoom=function(we){return(we-this.points.length)%32},re.prototype._map=function(we,je){if(we.numPoints)return je?Ot({},we.properties):we.properties;var Ze=this.points[we.index].properties,ut=this.options.map(Ze);return je&&ut===Ze?Ot({},ut):ut};function me(Me,we,je,Ze,ut){return{x:Ve(Me),y:Ve(we),zoom:1/0,id:je,parentId:-1,numPoints:Ze,properties:ut}}function Re(Me,we){var je=Me.geometry.coordinates,Ze=je[0],ut=je[1];return{x:Ve(K(Ze)),y:Ve(_e(ut)),zoom:1/0,index:we,parentId:-1}}function Y(Me){return{type:"Feature",id:Me.id,properties:le(Me),geometry:{type:"Point",coordinates:[et(Me.x),Je(Me.y)]}}}function le(Me){var we=Me.numPoints,je=we>=1e4?Math.round(we/1e3)+"k":we>=1e3?Math.round(we/100)/10+"k":we;return Ot(Ot({},Me.properties),{cluster:!0,cluster_id:Me.id,point_count:we,point_count_abbreviated:je})}function K(Me){return Me/360+.5}function _e(Me){var we=Math.sin(Me*Math.PI/180),je=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return je<0?0:je>1?1:je}function et(Me){return(Me-.5)*360}function Je(Me){var we=(180-Me*360)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function Ot(Me,we){for(var je in we)Me[je]=we[je];return Me}function dt(Me){return Me.x}function bt(Me){return Me.y}return re})},73897:function(mt){function W(D,q){(q==null||q>D.length)&&(q=D.length);for(var G=0,E=Array(q);G<q;G++)E[G]=D[G];return E}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},85372:function(mt){function W(D){if(Array.isArray(D))return D}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},63405:function(mt,W,D){var q=D(73897);function G(E){if(Array.isArray(E))return q(E)}mt.exports=G,mt.exports.__esModule=!0,mt.exports.default=mt.exports},66115:function(mt){function W(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},76976:function(mt,W,D){var q=D(73808),G=D(69617),E=D(94993);function he(ne,ue,ce){return ue=q(ue),E(ne,G()?Reflect.construct(ue,ce||[],q(ne).constructor):ue.apply(ne,ce))}mt.exports=he,mt.exports.__esModule=!0,mt.exports.default=mt.exports},56690:function(mt){function W(D,q){if(!(D instanceof q))throw new TypeError("Cannot call a class as a function")}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},89728:function(mt,W,D){var q=D(64062);function G(he,ne){for(var ue=0;ue<ne.length;ue++){var ce=ne[ue];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(he,q(ce.key),ce)}}function E(he,ne,ue){return ne&&G(he.prototype,ne),ue&&G(he,ue),Object.defineProperty(he,"prototype",{writable:!1}),he}mt.exports=E,mt.exports.__esModule=!0,mt.exports.default=mt.exports},73808:function(mt){function W(D){return mt.exports=W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)},mt.exports.__esModule=!0,mt.exports.default=mt.exports,W(D)}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},61655:function(mt,W,D){var q=D(6015);function G(E,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(he&&he.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),he&&q(E,he)}mt.exports=G,mt.exports.__esModule=!0,mt.exports.default=mt.exports},75263:function(mt,W,D){var q=D(18698).default;function G(he){if(typeof WeakMap!="function")return null;var ne=new WeakMap,ue=new WeakMap;return(G=function(xe){return xe?ue:ne})(he)}function E(he,ne){if(!ne&&he&&he.__esModule)return he;if(he===null||q(he)!="object"&&typeof he!="function")return{default:he};var ue=G(ne);if(ue&&ue.has(he))return ue.get(he);var ce={__proto__:null},xe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var oe in he)if(oe!=="default"&&{}.hasOwnProperty.call(he,oe)){var Ve=xe?Object.getOwnPropertyDescriptor(he,oe):null;Ve&&(Ve.get||Ve.set)?Object.defineProperty(ce,oe,Ve):ce[oe]=he[oe]}return ce.default=he,ue&&ue.set(he,ce),ce}mt.exports=E,mt.exports.__esModule=!0,mt.exports.default=mt.exports},69617:function(mt){function W(){try{var D=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(q){}return(mt.exports=W=function(){return!!D},mt.exports.__esModule=!0,mt.exports.default=mt.exports)()}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},79498:function(mt){function W(D){if(typeof Symbol!="undefined"&&D[Symbol.iterator]!=null||D["@@iterator"]!=null)return Array.from(D)}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},68872:function(mt){function W(D,q){var G=D==null?null:typeof Symbol!="undefined"&&D[Symbol.iterator]||D["@@iterator"];if(G!=null){var E,he,ne,ue,ce=[],xe=!0,oe=!1;try{if(ne=(G=G.call(D)).next,q===0){if(Object(G)!==G)return;xe=!1}else for(;!(xe=(E=ne.call(G)).done)&&(ce.push(E.value),ce.length!==q);xe=!0);}catch(Ve){oe=!0,he=Ve}finally{try{if(!xe&&G.return!=null&&(ue=G.return(),Object(ue)!==ue))return}finally{if(oe)throw he}}return ce}}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},12218:function(mt){function W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},42281:function(mt){function W(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},94993:function(mt,W,D){var q=D(18698).default,G=D(66115);function E(he,ne){if(ne&&(q(ne)=="object"||typeof ne=="function"))return ne;if(ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G(he)}mt.exports=E,mt.exports.__esModule=!0,mt.exports.default=mt.exports},6015:function(mt){function W(D,q){return mt.exports=W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,E){return G.__proto__=E,G},mt.exports.__esModule=!0,mt.exports.default=mt.exports,W(D,q)}mt.exports=W,mt.exports.__esModule=!0,mt.exports.default=mt.exports},27424:function(mt,W,D){var q=D(85372),G=D(68872),E=D(86116),he=D(12218);function ne(ue,ce){return q(ue)||G(ue,ce)||E(ue,ce)||he()}mt.exports=ne,mt.exports.__esModule=!0,mt.exports.default=mt.exports},51589:function(mt,W,D){var q=D(85372),G=D(79498),E=D(86116),he=D(12218);function ne(ue){return q(ue)||G(ue)||E(ue)||he()}mt.exports=ne,mt.exports.__esModule=!0,mt.exports.default=mt.exports},861:function(mt,W,D){var q=D(63405),G=D(79498),E=D(86116),he=D(42281);function ne(ue){return q(ue)||G(ue)||E(ue)||he()}mt.exports=ne,mt.exports.__esModule=!0,mt.exports.default=mt.exports},86116:function(mt,W,D){var q=D(73897);function G(E,he){if(E){if(typeof E=="string")return q(E,he);var ne={}.toString.call(E).slice(8,-1);return ne==="Object"&&E.constructor&&(ne=E.constructor.name),ne==="Map"||ne==="Set"?Array.from(E):ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne)?q(E,he):void 0}}mt.exports=G,mt.exports.__esModule=!0,mt.exports.default=mt.exports},1449:function(mt,W,D){"use strict";D.d(W,{Tu:function(){return re},tw:function(){return K},uf:function(){return Re},yu:function(){return oe},zL:function(){return ne}});var q=63710088e-1,G={centimeters:q*100,centimetres:q*100,degrees:q/111325,feet:q*3.28084,inches:q*39.37,kilometers:q/1e3,kilometres:q/1e3,meters:q,metres:q,miles:q/1609.344,millimeters:q*1e3,millimetres:q*1e3,nauticalmiles:q/1852,radians:1,yards:q*1.0936},E={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/q,yards:1.0936133},he={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ne(Oe,it,Ke){Ke===void 0&&(Ke={});var Xe={type:"Feature"};return(Ke.id===0||Ke.id)&&(Xe.id=Ke.id),Ke.bbox&&(Xe.bbox=Ke.bbox),Xe.properties=it||{},Xe.geometry=Oe,Xe}function ue(Oe,it,Ke){switch(Ke===void 0&&(Ke={}),Oe){case"Point":return ce(it).geometry;case"LineString":return re(it).geometry;case"Polygon":return oe(it).geometry;case"MultiPoint":return le(it).geometry;case"MultiLineString":return Y(it).geometry;case"MultiPolygon":return K(it).geometry;default:throw new Error(Oe+" is invalid")}}function ce(Oe,it,Ke){if(Ke===void 0&&(Ke={}),!Oe)throw new Error("coordinates is required");if(!Array.isArray(Oe))throw new Error("coordinates must be an Array");if(Oe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ut(Oe[0])||!ut(Oe[1]))throw new Error("coordinates must contain numbers");var Xe={type:"Point",coordinates:Oe};return ne(Xe,it,Ke)}function xe(Oe,it,Ke){return Ke===void 0&&(Ke={}),Re(Oe.map(function(Xe){return ce(Xe,it)}),Ke)}function oe(Oe,it,Ke){Ke===void 0&&(Ke={});for(var Xe=0,Pt=Oe;Xe<Pt.length;Xe++){var xt=Pt[Xe];if(xt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ie=0;Ie<xt[xt.length-1].length;Ie++)if(xt[xt.length-1][Ie]!==xt[0][Ie])throw new Error("First and last Position are not equivalent.")}var Wt={type:"Polygon",coordinates:Oe};return ne(Wt,it,Ke)}function Ve(Oe,it,Ke){return Ke===void 0&&(Ke={}),Re(Oe.map(function(Xe){return oe(Xe,it)}),Ke)}function re(Oe,it,Ke){if(Ke===void 0&&(Ke={}),Oe.length<2)throw new Error("coordinates must be an array of two or more positions");var Xe={type:"LineString",coordinates:Oe};return ne(Xe,it,Ke)}function me(Oe,it,Ke){return Ke===void 0&&(Ke={}),Re(Oe.map(function(Xe){return re(Xe,it)}),Ke)}function Re(Oe,it){it===void 0&&(it={});var Ke={type:"FeatureCollection"};return it.id&&(Ke.id=it.id),it.bbox&&(Ke.bbox=it.bbox),Ke.features=Oe,Ke}function Y(Oe,it,Ke){Ke===void 0&&(Ke={});var Xe={type:"MultiLineString",coordinates:Oe};return ne(Xe,it,Ke)}function le(Oe,it,Ke){Ke===void 0&&(Ke={});var Xe={type:"MultiPoint",coordinates:Oe};return ne(Xe,it,Ke)}function K(Oe,it,Ke){Ke===void 0&&(Ke={});var Xe={type:"MultiPolygon",coordinates:Oe};return ne(Xe,it,Ke)}function _e(Oe,it,Ke){Ke===void 0&&(Ke={});var Xe={type:"GeometryCollection",geometries:Oe};return ne(Xe,it,Ke)}function et(Oe,it){if(it===void 0&&(it=0),it&&!(it>=0))throw new Error("precision must be a positive number");var Ke=Math.pow(10,it||0);return Math.round(Oe*Ke)/Ke}function Je(Oe,it){it===void 0&&(it="kilometers");var Ke=G[it];if(!Ke)throw new Error(it+" units is invalid");return Oe*Ke}function Ot(Oe,it){it===void 0&&(it="kilometers");var Ke=G[it];if(!Ke)throw new Error(it+" units is invalid");return Oe/Ke}function dt(Oe,it){return Me(Ot(Oe,it))}function bt(Oe){var it=Oe%360;return it<0&&(it+=360),it}function Me(Oe){var it=Oe%(2*Math.PI);return it*180/Math.PI}function we(Oe){var it=Oe%360;return it*Math.PI/180}function je(Oe,it,Ke){if(it===void 0&&(it="kilometers"),Ke===void 0&&(Ke="kilometers"),!(Oe>=0))throw new Error("length must be a positive number");return Je(Ot(Oe,it),Ke)}function Ze(Oe,it,Ke){if(it===void 0&&(it="meters"),Ke===void 0&&(Ke="kilometers"),!(Oe>=0))throw new Error("area must be a positive number");var Xe=he[it];if(!Xe)throw new Error("invalid original units");var Pt=he[Ke];if(!Pt)throw new Error("invalid final units");return Oe/Xe*Pt}function ut(Oe){return!isNaN(Oe)&&Oe!==null&&!Array.isArray(Oe)}function Qt(Oe){return!!Oe&&Oe.constructor===Object}function De(Oe){if(!Oe)throw new Error("bbox is required");if(!Array.isArray(Oe))throw new Error("bbox must be an Array");if(Oe.length!==4&&Oe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Oe.forEach(function(it){if(!ut(it))throw new Error("bbox must only contain numbers")})}function St(Oe){if(!Oe)throw new Error("id is required");if(["string","number"].indexOf(typeof Oe)===-1)throw new Error("id must be a number or a string")}},39034:function(mt,W,D){"use strict";D.d(W,{nG:function(){return re},pZ:function(){return G}});var q=D(1449);function G(Je,Ot,dt){if(Je!==null)for(var bt,Me,we,je,Ze,ut,Qt,De=0,St=0,Oe,it=Je.type,Ke=it==="FeatureCollection",Xe=it==="Feature",Pt=Ke?Je.features.length:1,xt=0;xt<Pt;xt++){Qt=Ke?Je.features[xt].geometry:Xe?Je.geometry:Je,Oe=Qt?Qt.type==="GeometryCollection":!1,Ze=Oe?Qt.geometries.length:1;for(var Ie=0;Ie<Ze;Ie++){var Wt=0,hn=0;if(je=Oe?Qt.geometries[Ie]:Qt,je!==null){ut=je.coordinates;var Pn=je.type;switch(De=dt&&(Pn==="Polygon"||Pn==="MultiPolygon")?1:0,Pn){case null:break;case"Point":if(Ot(ut,St,xt,Wt,hn)===!1)return!1;St++,Wt++;break;case"LineString":case"MultiPoint":for(bt=0;bt<ut.length;bt++){if(Ot(ut[bt],St,xt,Wt,hn)===!1)return!1;St++,Pn==="MultiPoint"&&Wt++}Pn==="LineString"&&Wt++;break;case"Polygon":case"MultiLineString":for(bt=0;bt<ut.length;bt++){for(Me=0;Me<ut[bt].length-De;Me++){if(Ot(ut[bt][Me],St,xt,Wt,hn)===!1)return!1;St++}Pn==="MultiLineString"&&Wt++,Pn==="Polygon"&&hn++}Pn==="Polygon"&&Wt++;break;case"MultiPolygon":for(bt=0;bt<ut.length;bt++){for(hn=0,Me=0;Me<ut[bt].length;Me++){for(we=0;we<ut[bt][Me].length-De;we++){if(Ot(ut[bt][Me][we],St,xt,Wt,hn)===!1)return!1;St++}hn++}Wt++}break;case"GeometryCollection":for(bt=0;bt<je.geometries.length;bt++)if(G(je.geometries[bt],Ot,dt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E(Je,Ot,dt,bt){var Me=dt;return G(Je,function(we,je,Ze,ut,Qt){je===0&&dt===void 0?Me=we:Me=Ot(Me,we,je,Ze,ut,Qt)},bt),Me}function he(Je,Ot){var dt;switch(Je.type){case"FeatureCollection":for(dt=0;dt<Je.features.length&&Ot(Je.features[dt].properties,dt)!==!1;dt++);break;case"Feature":Ot(Je.properties,0);break}}function ne(Je,Ot,dt){var bt=dt;return he(Je,function(Me,we){we===0&&dt===void 0?bt=Me:bt=Ot(bt,Me,we)}),bt}function ue(Je,Ot){if(Je.type==="Feature")Ot(Je,0);else if(Je.type==="FeatureCollection")for(var dt=0;dt<Je.features.length&&Ot(Je.features[dt],dt)!==!1;dt++);}function ce(Je,Ot,dt){var bt=dt;return ue(Je,function(Me,we){we===0&&dt===void 0?bt=Me:bt=Ot(bt,Me,we)}),bt}function xe(Je){var Ot=[];return G(Je,function(dt){Ot.push(dt)}),Ot}function oe(Je,Ot){var dt,bt,Me,we,je,Ze,ut,Qt,De,St,Oe=0,it=Je.type==="FeatureCollection",Ke=Je.type==="Feature",Xe=it?Je.features.length:1;for(dt=0;dt<Xe;dt++){for(Ze=it?Je.features[dt].geometry:Ke?Je.geometry:Je,Qt=it?Je.features[dt].properties:Ke?Je.properties:{},De=it?Je.features[dt].bbox:Ke?Je.bbox:void 0,St=it?Je.features[dt].id:Ke?Je.id:void 0,ut=Ze?Ze.type==="GeometryCollection":!1,je=ut?Ze.geometries.length:1,Me=0;Me<je;Me++){if(we=ut?Ze.geometries[Me]:Ze,we===null){if(Ot(null,Oe,Qt,De,St)===!1)return!1;continue}switch(we.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Ot(we,Oe,Qt,De,St)===!1)return!1;break}case"GeometryCollection":{for(bt=0;bt<we.geometries.length;bt++)if(Ot(we.geometries[bt],Oe,Qt,De,St)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Oe++}}function Ve(Je,Ot,dt){var bt=dt;return oe(Je,function(Me,we,je,Ze,ut){we===0&&dt===void 0?bt=Me:bt=Ot(bt,Me,we,je,Ze,ut)}),bt}function re(Je,Ot){oe(Je,function(dt,bt,Me,we,je){var Ze=dt===null?null:dt.type;switch(Ze){case null:case"Point":case"LineString":case"Polygon":return Ot((0,q.zL)(dt,Me,{bbox:we,id:je}),bt,0)===!1?!1:void 0}var ut;switch(Ze){case"MultiPoint":ut="Point";break;case"MultiLineString":ut="LineString";break;case"MultiPolygon":ut="Polygon";break}for(var Qt=0;Qt<dt.coordinates.length;Qt++){var De=dt.coordinates[Qt],St={type:ut,coordinates:De};if(Ot((0,q.zL)(St,Me),bt,Qt)===!1)return!1}})}function me(Je,Ot,dt){var bt=dt;return re(Je,function(Me,we,je){we===0&&je===0&&dt===void 0?bt=Me:bt=Ot(bt,Me,we,je)}),bt}function Re(Je,Ot){re(Je,function(dt,bt,Me){var we=0;if(dt.geometry){var je=dt.geometry.type;if(!(je==="Point"||je==="MultiPoint")){var Ze,ut=0,Qt=0,De=0;if(G(dt,function(St,Oe,it,Ke,Xe){if(Ze===void 0||bt>ut||Ke>Qt||Xe>De){Ze=St,ut=bt,Qt=Ke,De=Xe,we=0;return}var Pt=lineString([Ze,St],dt.properties);if(Ot(Pt,bt,Me,Xe,we)===!1)return!1;we++,Ze=St})===!1)return!1}}})}function Y(Je,Ot,dt){var bt=dt,Me=!1;return Re(Je,function(we,je,Ze,ut,Qt){Me===!1&&dt===void 0?bt=we:bt=Ot(bt,we,je,Ze,ut,Qt),Me=!0}),bt}function le(Je,Ot){if(!Je)throw new Error("geojson is required");re(Je,function(dt,bt,Me){if(dt.geometry!==null){var we=dt.geometry.type,je=dt.geometry.coordinates;switch(we){case"LineString":if(Ot(dt,bt,Me,0,0)===!1)return!1;break;case"Polygon":for(var Ze=0;Ze<je.length;Ze++)if(Ot(lineString(je[Ze],dt.properties),bt,Me,Ze)===!1)return!1;break}}})}function K(Je,Ot,dt){var bt=dt;return le(Je,function(Me,we,je,Ze){we===0&&dt===void 0?bt=Me:bt=Ot(bt,Me,we,je,Ze)}),bt}function _e(Je,Ot){if(Ot=Ot||{},!isObject(Ot))throw new Error("options is invalid");var dt=Ot.featureIndex||0,bt=Ot.multiFeatureIndex||0,Me=Ot.geometryIndex||0,we=Ot.segmentIndex||0,je=Ot.properties,Ze;switch(Je.type){case"FeatureCollection":dt<0&&(dt=Je.features.length+dt),je=je||Je.features[dt].properties,Ze=Je.features[dt].geometry;break;case"Feature":je=je||Je.properties,Ze=Je.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ze=Je;break;default:throw new Error("geojson is invalid")}if(Ze===null)return null;var ut=Ze.coordinates;switch(Ze.type){case"Point":case"MultiPoint":return null;case"LineString":return we<0&&(we=ut.length+we-1),lineString([ut[we],ut[we+1]],je,Ot);case"Polygon":return Me<0&&(Me=ut.length+Me),we<0&&(we=ut[Me].length+we-1),lineString([ut[Me][we],ut[Me][we+1]],je,Ot);case"MultiLineString":return bt<0&&(bt=ut.length+bt),we<0&&(we=ut[bt].length+we-1),lineString([ut[bt][we],ut[bt][we+1]],je,Ot);case"MultiPolygon":return bt<0&&(bt=ut.length+bt),Me<0&&(Me=ut[bt].length+Me),we<0&&(we=ut[bt][Me].length-we-1),lineString([ut[bt][Me][we],ut[bt][Me][we+1]],je,Ot)}throw new Error("geojson is invalid")}function et(Je,Ot){if(Ot=Ot||{},!isObject(Ot))throw new Error("options is invalid");var dt=Ot.featureIndex||0,bt=Ot.multiFeatureIndex||0,Me=Ot.geometryIndex||0,we=Ot.coordIndex||0,je=Ot.properties,Ze;switch(Je.type){case"FeatureCollection":dt<0&&(dt=Je.features.length+dt),je=je||Je.features[dt].properties,Ze=Je.features[dt].geometry;break;case"Feature":je=je||Je.properties,Ze=Je.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ze=Je;break;default:throw new Error("geojson is invalid")}if(Ze===null)return null;var ut=Ze.coordinates;switch(Ze.type){case"Point":return point(ut,je,Ot);case"MultiPoint":return bt<0&&(bt=ut.length+bt),point(ut[bt],je,Ot);case"LineString":return we<0&&(we=ut.length+we),point(ut[we],je,Ot);case"Polygon":return Me<0&&(Me=ut.length+Me),we<0&&(we=ut[Me].length+we),point(ut[Me][we],je,Ot);case"MultiLineString":return bt<0&&(bt=ut.length+bt),we<0&&(we=ut[bt].length+we),point(ut[bt][we],je,Ot);case"MultiPolygon":return bt<0&&(bt=ut.length+bt),Me<0&&(Me=ut[bt].length+Me),we<0&&(we=ut[bt][Me].length-we),point(ut[bt][Me][we],je,Ot)}throw new Error("geojson is invalid")}},97582:function(mt,W,D){"use strict";D.d(W,{CR:function(){return _e},Jh:function(){return Re},Q_:function(){return De},XA:function(){return K},ZT:function(){return G},_T:function(){return he},ev:function(){return Ot},mG:function(){return me},pi:function(){return E}});var q=function(xt,Ie){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Wt,hn){Wt.__proto__=hn}||function(Wt,hn){for(var Pn in hn)Object.prototype.hasOwnProperty.call(hn,Pn)&&(Wt[Pn]=hn[Pn])},q(xt,Ie)};function G(xt,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Class extends value "+String(Ie)+" is not a constructor or null");q(xt,Ie);function Wt(){this.constructor=xt}xt.prototype=Ie===null?Object.create(Ie):(Wt.prototype=Ie.prototype,new Wt)}var E=function(){return E=Object.assign||function(Ie){for(var Wt,hn=1,Pn=arguments.length;hn<Pn;hn++){Wt=arguments[hn];for(var $n in Wt)Object.prototype.hasOwnProperty.call(Wt,$n)&&(Ie[$n]=Wt[$n])}return Ie},E.apply(this,arguments)};function he(xt,Ie){var Wt={};for(var hn in xt)Object.prototype.hasOwnProperty.call(xt,hn)&&Ie.indexOf(hn)<0&&(Wt[hn]=xt[hn]);if(xt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Pn=0,hn=Object.getOwnPropertySymbols(xt);Pn<hn.length;Pn++)Ie.indexOf(hn[Pn])<0&&Object.prototype.propertyIsEnumerable.call(xt,hn[Pn])&&(Wt[hn[Pn]]=xt[hn[Pn]]);return Wt}function ne(xt,Ie,Wt,hn){var Pn=arguments.length,$n=Pn<3?Ie:hn===null?hn=Object.getOwnPropertyDescriptor(Ie,Wt):hn,nr;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$n=Reflect.decorate(xt,Ie,Wt,hn);else for(var Ft=xt.length-1;Ft>=0;Ft--)(nr=xt[Ft])&&($n=(Pn<3?nr($n):Pn>3?nr(Ie,Wt,$n):nr(Ie,Wt))||$n);return Pn>3&&$n&&Object.defineProperty(Ie,Wt,$n),$n}function ue(xt,Ie){return function(Wt,hn){Ie(Wt,hn,xt)}}function ce(xt,Ie,Wt,hn,Pn,$n){function nr(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var Ft=hn.kind,Jt=Ft==="getter"?"get":Ft==="setter"?"set":"value",ln=!Ie&&xt?hn.static?xt:xt.prototype:null,Un=Ie||(ln?Object.getOwnPropertyDescriptor(ln,hn.name):{}),on,zt=!1,kt=Wt.length-1;kt>=0;kt--){var ke={};for(var nt in hn)ke[nt]=nt==="access"?{}:hn[nt];for(var nt in hn.access)ke.access[nt]=hn.access[nt];ke.addInitializer=function(U){if(zt)throw new TypeError("Cannot add initializers after decoration has completed");$n.push(nr(U||null))};var Vt=(0,Wt[kt])(Ft==="accessor"?{get:Un.get,set:Un.set}:Un[Jt],ke);if(Ft==="accessor"){if(Vt===void 0)continue;if(Vt===null||typeof Vt!="object")throw new TypeError("Object expected");(on=nr(Vt.get))&&(Un.get=on),(on=nr(Vt.set))&&(Un.set=on),(on=nr(Vt.init))&&Pn.unshift(on)}else(on=nr(Vt))&&(Ft==="field"?Pn.unshift(on):Un[Jt]=on)}ln&&Object.defineProperty(ln,hn.name,Un),zt=!0}function xe(xt,Ie,Wt){for(var hn=arguments.length>2,Pn=0;Pn<Ie.length;Pn++)Wt=hn?Ie[Pn].call(xt,Wt):Ie[Pn].call(xt);return hn?Wt:void 0}function oe(xt){return typeof xt=="symbol"?xt:"".concat(xt)}function Ve(xt,Ie,Wt){return typeof Ie=="symbol"&&(Ie=Ie.description?"[".concat(Ie.description,"]"):""),Object.defineProperty(xt,"name",{configurable:!0,value:Wt?"".concat(Wt," ",Ie):Ie})}function re(xt,Ie){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(xt,Ie)}function me(xt,Ie,Wt,hn){function Pn($n){return $n instanceof Wt?$n:new Wt(function(nr){nr($n)})}return new(Wt||(Wt=Promise))(function($n,nr){function Ft(Un){try{ln(hn.next(Un))}catch(on){nr(on)}}function Jt(Un){try{ln(hn.throw(Un))}catch(on){nr(on)}}function ln(Un){Un.done?$n(Un.value):Pn(Un.value).then(Ft,Jt)}ln((hn=hn.apply(xt,Ie||[])).next())})}function Re(xt,Ie){var Wt={label:0,sent:function(){if($n[0]&1)throw $n[1];return $n[1]},trys:[],ops:[]},hn,Pn,$n,nr;return nr={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(nr[Symbol.iterator]=function(){return this}),nr;function Ft(ln){return function(Un){return Jt([ln,Un])}}function Jt(ln){if(hn)throw new TypeError("Generator is already executing.");for(;nr&&(nr=0,ln[0]&&(Wt=0)),Wt;)try{if(hn=1,Pn&&($n=ln[0]&2?Pn.return:ln[0]?Pn.throw||(($n=Pn.return)&&$n.call(Pn),0):Pn.next)&&!($n=$n.call(Pn,ln[1])).done)return $n;switch(Pn=0,$n&&(ln=[ln[0]&2,$n.value]),ln[0]){case 0:case 1:$n=ln;break;case 4:return Wt.label++,{value:ln[1],done:!1};case 5:Wt.label++,Pn=ln[1],ln=[0];continue;case 7:ln=Wt.ops.pop(),Wt.trys.pop();continue;default:if($n=Wt.trys,!($n=$n.length>0&&$n[$n.length-1])&&(ln[0]===6||ln[0]===2)){Wt=0;continue}if(ln[0]===3&&(!$n||ln[1]>$n[0]&&ln[1]<$n[3])){Wt.label=ln[1];break}if(ln[0]===6&&Wt.label<$n[1]){Wt.label=$n[1],$n=ln;break}if($n&&Wt.label<$n[2]){Wt.label=$n[2],Wt.ops.push(ln);break}$n[2]&&Wt.ops.pop(),Wt.trys.pop();continue}ln=Ie.call(xt,Wt)}catch(Un){ln=[6,Un],Pn=0}finally{hn=$n=0}if(ln[0]&5)throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}}var Y=Object.create?function(xt,Ie,Wt,hn){hn===void 0&&(hn=Wt);var Pn=Object.getOwnPropertyDescriptor(Ie,Wt);(!Pn||("get"in Pn?!Ie.__esModule:Pn.writable||Pn.configurable))&&(Pn={enumerable:!0,get:function(){return Ie[Wt]}}),Object.defineProperty(xt,hn,Pn)}:function(xt,Ie,Wt,hn){hn===void 0&&(hn=Wt),xt[hn]=Ie[Wt]};function le(xt,Ie){for(var Wt in xt)Wt!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,Wt)&&Y(Ie,xt,Wt)}function K(xt){var Ie=typeof Symbol=="function"&&Symbol.iterator,Wt=Ie&&xt[Ie],hn=0;if(Wt)return Wt.call(xt);if(xt&&typeof xt.length=="number")return{next:function(){return xt&&hn>=xt.length&&(xt=void 0),{value:xt&&xt[hn++],done:!xt}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")}function _e(xt,Ie){var Wt=typeof Symbol=="function"&&xt[Symbol.iterator];if(!Wt)return xt;var hn=Wt.call(xt),Pn,$n=[],nr;try{for(;(Ie===void 0||Ie-- >0)&&!(Pn=hn.next()).done;)$n.push(Pn.value)}catch(Ft){nr={error:Ft}}finally{try{Pn&&!Pn.done&&(Wt=hn.return)&&Wt.call(hn)}finally{if(nr)throw nr.error}}return $n}function et(){for(var xt=[],Ie=0;Ie<arguments.length;Ie++)xt=xt.concat(_e(arguments[Ie]));return xt}function Je(){for(var xt=0,Ie=0,Wt=arguments.length;Ie<Wt;Ie++)xt+=arguments[Ie].length;for(var hn=Array(xt),Pn=0,Ie=0;Ie<Wt;Ie++)for(var $n=arguments[Ie],nr=0,Ft=$n.length;nr<Ft;nr++,Pn++)hn[Pn]=$n[nr];return hn}function Ot(xt,Ie,Wt){if(Wt||arguments.length===2)for(var hn=0,Pn=Ie.length,$n;hn<Pn;hn++)($n||!(hn in Ie))&&($n||($n=Array.prototype.slice.call(Ie,0,hn)),$n[hn]=Ie[hn]);return xt.concat($n||Array.prototype.slice.call(Ie))}function dt(xt){return this instanceof dt?(this.v=xt,this):new dt(xt)}function bt(xt,Ie,Wt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var hn=Wt.apply(xt,Ie||[]),Pn,$n=[];return Pn={},Ft("next"),Ft("throw"),Ft("return",nr),Pn[Symbol.asyncIterator]=function(){return this},Pn;function nr(kt){return function(ke){return Promise.resolve(ke).then(kt,on)}}function Ft(kt,ke){hn[kt]&&(Pn[kt]=function(nt){return new Promise(function(Vt,U){$n.push([kt,nt,Vt,U])>1||Jt(kt,nt)})},ke&&(Pn[kt]=ke(Pn[kt])))}function Jt(kt,ke){try{ln(hn[kt](ke))}catch(nt){zt($n[0][3],nt)}}function ln(kt){kt.value instanceof dt?Promise.resolve(kt.value.v).then(Un,on):zt($n[0][2],kt)}function Un(kt){Jt("next",kt)}function on(kt){Jt("throw",kt)}function zt(kt,ke){kt(ke),$n.shift(),$n.length&&Jt($n[0][0],$n[0][1])}}function Me(xt){var Ie,Wt;return Ie={},hn("next"),hn("throw",function(Pn){throw Pn}),hn("return"),Ie[Symbol.iterator]=function(){return this},Ie;function hn(Pn,$n){Ie[Pn]=xt[Pn]?function(nr){return(Wt=!Wt)?{value:dt(xt[Pn](nr)),done:!1}:$n?$n(nr):nr}:$n}}function we(xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie=xt[Symbol.asyncIterator],Wt;return Ie?Ie.call(xt):(xt=typeof K=="function"?K(xt):xt[Symbol.iterator](),Wt={},hn("next"),hn("throw"),hn("return"),Wt[Symbol.asyncIterator]=function(){return this},Wt);function hn($n){Wt[$n]=xt[$n]&&function(nr){return new Promise(function(Ft,Jt){nr=xt[$n](nr),Pn(Ft,Jt,nr.done,nr.value)})}}function Pn($n,nr,Ft,Jt){Promise.resolve(Jt).then(function(ln){$n({value:ln,done:Ft})},nr)}}function je(xt,Ie){return Object.defineProperty?Object.defineProperty(xt,"raw",{value:Ie}):xt.raw=Ie,xt}var Ze=Object.create?function(xt,Ie){Object.defineProperty(xt,"default",{enumerable:!0,value:Ie})}:function(xt,Ie){xt.default=Ie};function ut(xt){if(xt&&xt.__esModule)return xt;var Ie={};if(xt!=null)for(var Wt in xt)Wt!=="default"&&Object.prototype.hasOwnProperty.call(xt,Wt)&&Y(Ie,xt,Wt);return Ze(Ie,xt),Ie}function Qt(xt){return xt&&xt.__esModule?xt:{default:xt}}function De(xt,Ie,Wt,hn){if(Wt==="a"&&!hn)throw new TypeError("Private accessor was defined without a getter");if(typeof Ie=="function"?xt!==Ie||!hn:!Ie.has(xt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Wt==="m"?hn:Wt==="a"?hn.call(xt):hn?hn.value:Ie.get(xt)}function St(xt,Ie,Wt,hn,Pn){if(hn==="m")throw new TypeError("Private method is not writable");if(hn==="a"&&!Pn)throw new TypeError("Private accessor was defined without a setter");if(typeof Ie=="function"?xt!==Ie||!Pn:!Ie.has(xt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return hn==="a"?Pn.call(xt,Wt):Pn?Pn.value=Wt:Ie.set(xt,Wt),Wt}function Oe(xt,Ie){if(Ie===null||typeof Ie!="object"&&typeof Ie!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof xt=="function"?Ie===xt:xt.has(Ie)}function it(xt,Ie,Wt){if(Ie!=null){if(typeof Ie!="object"&&typeof Ie!="function")throw new TypeError("Object expected.");var hn,Pn;if(Wt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");hn=Ie[Symbol.asyncDispose]}if(hn===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");hn=Ie[Symbol.dispose],Wt&&(Pn=hn)}if(typeof hn!="function")throw new TypeError("Object not disposable.");Pn&&(hn=function(){try{Pn.call(this)}catch($n){return Promise.reject($n)}}),xt.stack.push({value:Ie,dispose:hn,async:Wt})}else Wt&&xt.stack.push({async:!0});return Ie}var Ke=typeof SuppressedError=="function"?SuppressedError:function(xt,Ie,Wt){var hn=new Error(Wt);return hn.name="SuppressedError",hn.error=xt,hn.suppressed=Ie,hn};function Xe(xt){function Ie(hn){xt.error=xt.hasError?new Ke(hn,xt.error,"An error was suppressed during disposal."):hn,xt.hasError=!0}function Wt(){for(;xt.stack.length;){var hn=xt.stack.pop();try{var Pn=hn.dispose&&hn.dispose.call(hn.value);if(hn.async)return Promise.resolve(Pn).then(Wt,function($n){return Ie($n),Wt()})}catch($n){Ie($n)}}if(xt.hasError)throw xt.error}return Wt()}var Pt={__extends:G,__assign:E,__rest:he,__decorate:ne,__param:ue,__metadata:re,__awaiter:me,__generator:Re,__createBinding:Y,__exportStar:le,__values:K,__read:_e,__spread:et,__spreadArrays:Je,__spreadArray:Ot,__await:dt,__asyncGenerator:bt,__asyncDelegator:Me,__asyncValues:we,__makeTemplateObject:je,__importStar:ut,__importDefault:Qt,__classPrivateFieldGet:De,__classPrivateFieldSet:St,__classPrivateFieldIn:Oe,__addDisposableResource:it,__disposeResources:Xe}}}]);
}());