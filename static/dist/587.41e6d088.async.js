"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[587,35],{19048:function(Kt,X,a){a.r(X),a.d(X,{default:function(){return Yt}});var Ce=a(15009),k=a.n(Ce),Te=a(99289),Pe=a.n(Te),je=a(5574),z=a.n(je),Ie=a(13769),W=a.n(Ie),be=a(97857),x=a.n(be),q=a(97584),De=a(43425),V=a(38345),Se=a(1956),B=a(7837),_=a(15746),Fe=a(48096),Ze=a(71230),Re=a(48054),$=a(42075),ee=a(14726),Ee=a(86250),I=a(67294),Me=a(24912),$e=a(53463),Ne=a(89649),N=a(71812),Oe=a(55647),H=a(47666),ze=a(14056),G=a(65302),Ae=a(96604),Ve=a(6466),Be=a(96074),Le=a(38703),we=a(61503),Ue=a(63430),We=a(79611),He=a(78677),Ge=a(54686),Y=function(){return Y=Object.assign||function(g){for(var e,r=1,l=arguments.length;r<l;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(g[n]=e[n])}return g},Y.apply(this,arguments)},Ye=(0,I.forwardRef)(function(g,e){return I.createElement(Ge.P,Y({},g,{chartType:"Area",ref:e}))}),Je=Ye,Ke=a(80652),te=a(96486),Qe=a(92077),J=a.n(Qe),Xe=a(58092),t=a(85893),ke=["type","data","config"],qe=function(e){var r=e.type,l=e.data,n=e.config,s=W()(e,ke),o=(0,te.cloneDeep)(n),d=function(u){var p;return s==null||(p=s.fields)===null||p===void 0?void 0:p.find(function(c){return(c==null?void 0:c.value)==u})};if(delete o.type,r=="pie"){var C=o.colorField,i=o.angleField,h=(0,te.sum)(l.map(function(P){return P[i]}));return(0,t.jsx)(Ue.Z,x()({appendPadding:10,data:l,label:{position:"outside",text:function(u){return"".concat(u[C],": ").concat(J()(u[i]).format("0,0"))},transform:[{type:"overlapDodgeY"}]},tooltip:function(u,p,c,y){return{value:"".concat(u[C],": ").concat(J()(u[i]).format("0,0"))}},annotations:[{type:"text",style:{text:`\u603B\u8BA1
`.concat(J()(h).format("0,0")),x:"50%",y:"50%",textAlign:"center",fontSize:18}}],interactions:[{type:"element-active"}],radius:.9,innerRadius:.6,legend:{color:{maxCols:1,maxRows:1,position:"top"}}},o))}else{if(r=="bar")return(0,t.jsx)(We.Z,x()({data:l,scale:{x:{paddingInner:.4}}},o));if(r=="column"){var S=o.xField,T=o.yField,v=d(T);return(0,t.jsx)(He.Z,x()({data:l,scale:{x:{paddingInner:.4}},label:{text:function(u){return u==null?void 0:u[T]},textBaseline:"bottom"},style:{radiusTopLeft:10,radiusTopRight:10},tooltip:{name:v==null?void 0:v.label,field:T}},o))}else{if(r=="area")return(0,t.jsx)(Je,x()({data:l},o));if(r=="mapDots")return(0,t.jsx)(we.O1,x()(x()({},o),{},{dots:(0,G.H1)(l)?l:[]}));if(r=="areaMap"){var b=x()({map:{style:"blank",center:[120.19382669582967,30.258134],zoom:13,pitch:0},source:{data:l,parser:{type:"geojson"}},autoFit:!0,color:{field:o.field,value:["#1A4397","#3165D1","#6296FE","#98B7F7","#DDE6F7","#F2F5FC"].reverse(),scale:{type:"quantile"}},style:{opacity:1,stroke:"#eee",lineWidth:.8,lineOpacity:1},state:{active:!0,select:{stroke:"blue",lineWidth:1.5,lineOpacity:.8}},label:{visible:!0,field:"name",style:{fill:"black",opacity:.5,fontSize:12,spacing:1,padding:[15,15]}},zoom:{position:"bottomright"},legend:{position:"bottomleft"}},o);return(0,t.jsx)(Xe.Z,{config:b,data:l})}else return(0,t.jsx)(Ke.Z,x()({data:l},o))}}},_e=qe,et=function(e){var r,l,n=e.title,s=e.data,o=e.config,d=o===void 0?{}:o,C=e.height,i=e.label,h=d.open,S=function(p,c){var y=p!=null&&p.href?p.href:c!=null&&c.href?c.href:null;if(y){var f,j;return(0,t.jsx)(B.Link,{to:y,style:{fontSize:12},children:(f=p.statistic)!==null&&f!==void 0&&f.description?(j=p.statistic)===null||j===void 0?void 0:j.description:"\u67E5\u770B"})}else{var m;return(m=p.statistic)===null||m===void 0?void 0:m.description}},T=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"horizontal",y=p.map(function(f,j){return(0,t.jsx)(Ae.Z,x()({},f),j)});return c=="vertical"?y:(0,t.jsx)($.Z,{children:y})},v=function(p,c){var y,f=p.footer||{type:"text"};if(!((y=p.open)!==null&&y!==void 0&&y.footer))return null;var j;if(f.type=="trend"){if(!c.trend)return null;j=T(c.trend,f==null?void 0:f.layout)}else{var m=c.footer?c.footer:f.text;if(!m)return null;j=m}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Be.Z,{style:{marginTop:-16,marginBottom:10}}),j]})},b=h!=null&&h.statistic?x()(x()({},d==null?void 0:d.statistic),{},{value:(0,G.BP)(s)?s==null?void 0:s.value:s,description:S(d,s),title:d!=null&&(r=d.statistic)!==null&&r!==void 0&&r.title?d==null||(l=d.statistic)===null||l===void 0?void 0:l.title:i}):!1,P=function(p,c){var y=p.chart,f=y===void 0?{}:y,j=p.open,m=f.type,F=m===void 0?"":m;if(!(j!=null&&j.chart)||!F)return null;var M=f!=null&&f.height?{height:f==null?void 0:f.height,lineHeight:(f==null?void 0:f.height)+"px"}:{};if(F=="trend"){var Z;return(0,t.jsx)("div",{style:M,children:T(c.trend,(Z=p.chart)===null||Z===void 0||(Z=Z.trend)===null||Z===void 0?void 0:Z.layout)})}else if(F=="progress"){var D;return(0,t.jsx)("div",{style:M,children:(D=c.progress)===null||D===void 0?void 0:D.map(function(K,U){return(0,t.jsx)(Le.Z,x()({},K),U)})})}else return(0,t.jsx)(_e,x()(x()({},c==null?void 0:c.chart),{},{config:f,type:F}));return null};return(0,t.jsx)(Ve.Z,{footer:v(d,s),style:{height:C||"100%"},title:n,statistic:b,chart:P(d,s)})},tt=et,lt=a(17003),at=a(53110),le=a(51042),ae=a(52108),ne=a(47389),nt=a(26706),it=a(94261),ot=a(53682),rt=a(93967),st=a.n(rt),ie=a(70145),dt=a(61723),oe=a(75686),re=a(10399),ut=a(19632),L=a.n(ut),vt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},ve(6)]}]},ct=vt,ft=function(e){return[{valueType:"group",columns:[{title:"\u5B57\u6BB5",dataIndex:["defaultConfig","chart","field"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u533A\u95F4\u503Cmin",dataIndex:["defaultConfig","chart","domain_min"],colProps:{span:6},valueType:"digit",width:"100%"},{title:"\u533A\u95F4\u503Cmax",dataIndex:["defaultConfig","chart","domain_max"],colProps:{span:6},valueType:"digit",width:"100%"}]}]},pt=ft,gt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}}]}]},mt=gt,xt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}}]}]},ht=xt,yt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u5206\u7EC4\u5B57\u6BB5",tooltip:"\u591A\u6761\u7EBF\u53EF\u4F7F\u7528\u8BE5\u53C2\u6570",dataIndex:["defaultConfig","chart","colorField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},ve(6)]}]},Ct=yt,Tt=function(e){return[{valueType:"group",columns:[{title:"\u7F29\u653E\u7EA7\u522B",dataIndex:["defaultConfig","chart","zoom"],colProps:{span:12},valueType:"digit",width:"100%"},{title:"\u4E2D\u5FC3\u70B9lat",dataIndex:["defaultConfig","chart","lat"],colProps:{span:6},valueType:"digit",width:"100%"},{title:"\u4E2D\u5FC3\u70B9lng",dataIndex:["defaultConfig","chart","lng"],colProps:{span:6},valueType:"digit",width:"100%"}]}]},Pt=Tt,jt=function(e){return[{valueType:"group",columns:[{title:"\u89D2\u5EA6\u6620\u5C04\u5B57\u6BB5",dataIndex:["defaultConfig","chart","angleField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u989C\u8272\u6620\u5C04\u5B57\u6BB5",dataIndex:["defaultConfig","chart","colorField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u997C\u56FE\u534A\u5F84",dataIndex:["defaultConfig","chart","radius"],valueType:"digit",colProps:{span:6},width:"100%",fieldProps:{min:.1,max:1,step:.1,defaultValue:.9}},{title:"\u997C\u56FE\u5185\u534A\u5F84",dataIndex:["defaultConfig","chart","innerRadius"],valueType:"digit",colProps:{span:6},width:"100%",fieldProps:{min:.1,max:1,step:.1,defaultValue:.6}}]}]},It=jt,bt=function(e){var r,l,n=e!=null&&(r=e.data)!==null&&r!==void 0&&r.chart?e==null||(l=e.data)===null||l===void 0?void 0:l.chart:e;return[{title:"\u56FE\u8868\u7C7B\u578B",dataIndex:["defaultConfig","chart","type"],valueType:"select",fieldProps:{options:[{label:"\u997C\u56FE",value:"pie"},{label:"\u6298\u7EBF\u56FE",value:"line"},{label:"\u67F1\u5F62\u56FE",value:"column"},{label:"\u6761\u5F62\u56FE",value:"bar"},{label:"\u533A\u57DF\u56FE",value:"area"},{label:"\u533A\u57DF\u5730\u56FE",value:"areaMap"},{label:"\u8D8B\u52BF",value:"trend"},{label:"\u8FDB\u5EA6\u6761",value:"progress"},{label:"\u6807\u70B9\u5730\u56FE",value:"mapDots"}]},colProps:{span:12}},{title:"\u9AD8\u5EA6",dataIndex:["defaultConfig","chart","height"],valueType:"digit",width:"100%",colProps:{span:12}},{name:[["defaultConfig","chart","type"]],valueType:"dependency",columns:function(o){var d=o.defaultConfig;if(!d)return[];var C=d.chart,i=C===void 0?{}:C;return(i==null?void 0:i.type)=="pie"?It(n):(i==null?void 0:i.type)=="line"?Ct(n):(i==null?void 0:i.type)=="area"?ct(n):(i==null?void 0:i.type)=="column"?ht(n):(i==null?void 0:i.type)=="bar"?mt(n):(i==null?void 0:i.type)=="areaMap"?pt(n):(i==null?void 0:i.type)=="trend"?ue(["defaultConfig","chart","trend","layout"]):(i==null?void 0:i.type)=="mapDots"?Pt(n):[]}}]},se=bt,Dt=[{valueType:"group",title:"statistic\u8BBE\u7F6E",columns:[{title:"\u6807\u9898",dataIndex:["defaultConfig","statistic","title"],colProps:{span:6}},{title:"\u63D0\u793A",dataIndex:["defaultConfig","statistic","tip"],colProps:{span:6}},{title:"\u524D\u7F00",dataIndex:["defaultConfig","statistic","prefix"],colProps:{span:6}},{title:"\u540E\u7F00",dataIndex:["defaultConfig","statistic","suffix"],colProps:{span:6}}]},{valueType:"group",columns:[{title:"\u72B6\u6001",dataIndex:["defaultConfig","statistic","status"],valueType:"select",fieldProps:{options:[{label:"success",value:"success"},{label:"processing",value:"processing"},{label:"default",value:"default"},{label:"error",value:"error"},{label:"warning",value:"warning"}]},colProps:{span:12}},{title:"\u94FE\u63A5",dataIndex:["defaultConfig","href"],colProps:{span:12}}]},{valueType:"group",columns:[{title:"\u63CF\u8FF0",dataIndex:["defaultConfig","statistic","description"],valueType:"textarea",colProps:{span:24}}]}],St=[{valueType:"group",title:"footer\u8BBE\u7F6E",columns:[{title:"\u7C7B\u578B",dataIndex:["defaultConfig","footer","type"],valueType:"select",tooltip:"\u5982\u679C\u7C7B\u578B\u662F\u8D8B\u52BF\uFF0C\u6240\u9009\u6570\u636E\u5E94\u8BE5\u8FD4\u56DE\u6709trend:[{title,value,trend}]\u683C\u5F0F\u6570\u636E",fieldProps:{options:[{label:"\u6587\u672C",value:"text"},{label:"\u8D8B\u52BF",value:"trend"}],defaultValue:"text"},colProps:{span:12}},{name:[["defaultConfig","footer","type"]],valueType:"dependency",columns:function(e){var r,l=e.defaultConfig;return(l==null||(r=l.footer)===null||r===void 0?void 0:r.type)=="trend"?ue(["defaultConfig","footer","layout"]):[{title:"\u5E95\u90E8\u8BBE\u7F6E",dataIndex:["defaultConfig","footer","text"],valueType:"textarea",colProps:{span:24}}]}}]}],Ft=function(e){return[{valueType:"group",columns:[{title:"statistic",dataIndex:["defaultConfig","open","statistic"],valueType:"switch",colProps:{span:8}},{title:"chart",dataIndex:["defaultConfig","open","chart"],valueType:"switch",colProps:{span:8}},{title:"footer",dataIndex:["defaultConfig","open","footer"],valueType:"switch",colProps:{span:8}}]},{name:["defaultConfig","sourceDataName"],valueType:"dependency",columns:function(l){var n,s,o,d=l.defaultConfig,C=l.sourceDataName;if(!d)return[];var i=[];if((n=d.open)!==null&&n!==void 0&&n.statistic&&(i=[].concat(L()(i),Dt)),(s=d.open)!==null&&s!==void 0&&s.chart){var h=se(e);i=[].concat(L()(i),[{valueType:"group",title:"chart\u8BBE\u7F6E",columns:L()(h)}])}return(o=d.open)!==null&&o!==void 0&&o.footer&&(i=[].concat(L()(i),St)),i}}]},Zt=Ft,Rt=a(21352),Et=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["defaultConfig","columns"];return[{valueType:"group",columns:[{title:"\u5217\u8868\u5B57\u6BB5",dataIndex:r,colProps:{span:24},rowProps:{gutter:0},valueType:"formList",columns:[{valueType:"group",columns:[{title:"\u8868\u5355\u9879",dataIndex:"dataIndex",colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"Label",dataIndex:"title",colProps:{span:6},fieldProps:{placeholder:"\u4E0D\u8F93\u5165\u7684\u8BDD\u4F7F\u7528\u540E\u53F0\u6570\u636E"}},{title:"\u7EC4\u4EF6\u7C7B\u578B",dataIndex:"valueType",colProps:{span:6},valueType:"select",fieldProps:{options:Rt.lG}},{title:"fieldProps",dataIndex:"fieldProps",colProps:{span:6},valueType:"modalJson"}]}]}]}]},de=Et,Mt=function(e){return[{valueType:"group",columns:[{title:"Table Size",dataIndex:["defaultConfig","size"],colProps:{span:12},valueType:"select",fieldProps:{options:["small","middle","large"]}},{title:"\u5206\u9875",tooltip:"\u8BBE\u7F6E\u4E3A0\u7684\u8BDD\u8868\u793A\u5173\u95ED\u5206\u9875",dataIndex:["defaultConfig","cpage"],colProps:{span:12},valueType:"digit",width:"100%"},{title:"\u5217\u8868\u5B57\u6BB5",dataIndex:["defaultConfig","columns"],colProps:{span:24},rowProps:{gutter:0},valueType:"formList",columns:[{valueType:"group",columns:[{title:"dataIndex",dataIndex:"dataIndex",colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"title",dataIndex:"title",colProps:{span:6}},{title:"width",dataIndex:"width",colProps:{span:6},valueType:"digit"},{title:"\u6392\u5E8F",dataIndex:"sort",valueType:"switch",colProps:{span:6}}]}]}]}]},$t=Mt,Nt={title:"\u914D\u7F6E",valueType:"jsonEditor",dataIndex:"config"},ue=function(e){return[{title:"\u6392\u5217\u65B9\u5F0F",dataIndex:e,valueType:"select",fieldProps:{options:[{label:"\u6A2A\u5411",value:"horizontal"},{label:"\u7EB5\u5411",value:"vertical"}],defaultValue:"horizontal"},colProps:{span:12}}]},ve=function(e){return{title:"\u5F62\u72B6",dataIndex:["defaultConfig","chart","shapeField"],valueType:"select",fieldProps:{options:[{label:"smooth - \u5E73\u6ED1",value:"smooth"},{label:"trail - \u53D8\u7C97",value:"trail"}]},colProps:{span:e}}},Ot=function(e){return[{title:"\u57FA\u7840\u4FE1\u606F",formColumns:[{title:"Title",dataIndex:"title",colProps:{span:12}}]}]},zt=function(e){return[{title:"\u57FA\u7840\u4FE1\u606F",formColumns:[{valueType:"group",columns:[{title:"\u7C7B\u578B",dataIndex:"type",valueType:"select",fieldProps:{options:[{label:"StatisticCard - \u6307\u6807\u5361",value:"StatisticCard"},{label:"tab",value:"tab"},{label:"\u8868\u683C",value:"table"},{label:"\u5BB9\u5668",value:"rows"},{label:"\u67E5\u8BE2\u8868\u5355",value:"form"},{label:"\u4E2A\u4EBA\u4FE1\u606F",value:"user"}]},colProps:{span:24}}]},{valueType:"group",columns:[{title:"Title",dataIndex:"title",colProps:{span:12}},{title:"\u6570\u636E\u6E90",dataIndex:"sourceDataName",valueType:"select",fieldProps:{options:(0,G.H1)(e)?e:[],showSearch:!0},colProps:{span:12}}]},{name:["type","sourceDataName"],valueType:"dependency",columns:function(l){var n=l.type,s=l.sourceDataName;return n=="chart"?se(e==null?void 0:e.find(function(o){return o.value==s})):n=="table"?$t(e==null?void 0:e.find(function(o){return o.value==s})):n=="StatisticCard"?Zt(e==null?void 0:e.find(function(o){return o.value==s})):n=="form"?de(e==null?void 0:e.find(function(o){return o.value==s})):n=="tab"?de(e==null?void 0:e.find(function(o){return o.value==s}),["defaultConfig","form","columns"]):[]}}]},{title:"\u914D\u7F6E",formColumns:[{valueType:"group",columns:[{title:"\u5217\u5BBD",dataIndex:"customer_span",valueType:"digit",width:"100%",colProps:{span:12}},{title:"\u81EA\u5B9A\u4E49\u9AD8\u5EA6",dataIndex:"height",valueType:"digit",width:"100%",colProps:{span:12}}]},{valueType:"group",columns:[{title:"\u663E\u793A\u6761\u4EF6",dataIndex:"show_condition",tooltip:"\u53EF\u6839\u636E\u5F53\u524D\u7528\u6237\u7F16\u5199\u662F\u5426\u663E\u793A\u8BE5\u7EC4\u4EF6,\u4F8B\u5982 {{ user.id == 1?true:false }} user\u4E3A\u5F53\u524D\u767B\u5F55\u7528\u6237\u4FE1\u606F",valueType:"textarea",colProps:{span:24}}]},Nt]}]},At=zt,w=function(e){var r=e.title,l=e.uid,n=e.data,s=e.type,o=s===void 0?"col":s,d=e.extpost,C=(0,I.useContext)(N.x),i=C.tableDesigner,h=i.pageMenu,S=i.reflush,T=i.editUrl,v=i.sourceData,b=(0,I.useContext)(ie.r),P=b.setting,u=(0,I.useContext)(H.YF),p=u.setVisible,c=(0,I.useState)({}),y=z()(c,2),f=y[0],j=y[1];return(0,I.useEffect)(function(){j(n)},[h,n]),(0,t.jsx)("div",{onClick:function(F){F.preventDefault()},children:(0,t.jsx)(dt.default,{trigger:(0,t.jsx)("div",{style:{width:"100%"},onClick:function(F){p==null||p(!1)},children:r}),tabs:o=="col"?At(v):Ot(v),value:f,postUrl:T,data:x()({id:h==null?void 0:h.id,uid:l},d),callback:function(F){var M=F.data;return S(M),!0},saFormProps:{devEnable:!1}})})},O=function(e){var r=e.title,l=e.uid,n=e.devData,s=e.col,o=e.row,d=e.otitle,C=e.style,i=n.itemType,h=i===void 0?"row":i,S=(0,I.useContext)(N.x),T=S.tableDesigner.devEnable,v=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{label:(0,t.jsx)(w,{title:(0,t.jsxs)($.Z,{children:[m==0?(0,t.jsx)(le.Z,{}):(0,t.jsx)(ae.Z,{}),(0,t.jsx)("span",{children:m==0?"\u63D2\u5165\u5217":"\u5411\u540E\u6DFB\u52A0\u5217"})]}),uid:l,extpost:{actionType:m==0?"insertCol":"addCol"}}),key:"addCol"+m}},b=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{label:(0,t.jsx)(w,{title:(0,t.jsxs)($.Z,{children:[m==0?(0,t.jsx)(le.Z,{}):(0,t.jsx)(ae.Z,{}),(0,t.jsx)("span",{children:m==0?"\u63D2\u5165\u884C":"\u5411\u540E\u6DFB\u52A0\u884C"})]}),uid:l,type:"row",extpost:{actionType:m==0?"insertRow":"addRow"}}),key:"addRow"+m}},P={label:(0,t.jsx)(w,{title:(0,t.jsxs)($.Z,{children:[(0,t.jsx)(ne.Z,{}),(0,t.jsx)("span",{children:"\u7F16\u8F91"})]}),uid:l,data:o,type:"row",extpost:{actionType:"editRow"}}),key:"editRow"},u={label:(0,t.jsx)(w,{title:(0,t.jsxs)($.Z,{children:[(0,t.jsx)(ne.Z,{}),(0,t.jsx)("span",{children:"\u7F16\u8F91"})]}),uid:l,data:s,type:"col",extpost:{actionType:"editCol"}}),key:"editCol"},p=function(m){return{label:(0,t.jsx)(re.VV,{title:(0,t.jsxs)($.Z,{children:[(0,t.jsx)(nt.Z,{}),(0,t.jsx)("span",{children:"\u5220\u9664"})]}),uid:l,extpost:{actionType:m=="col"?"deleteCol":"deleteRow"}}),key:"deleteItem",danger:!0}},c=h=="row"?[P,v(0),{type:"divider"},b(1),{type:"divider"},p("row")]:[u,b(0),{type:"divider"},v(1),{type:"divider"},p("col")],y=(0,re.i3)(),f=y.styles;return T?(0,t.jsxs)(oe.TR,{className:f.saSortItem,id:l,eid:l,devData:x()({type:"panel"},n),style:C,children:[(0,t.jsx)("div",{className:st()("general-schema-designer",f.overrideAntdCSS),children:(0,t.jsx)("div",{className:"general-schema-designer-icons",children:(0,t.jsxs)($.Z,{size:3,align:"center",children:[(0,t.jsx)(oe.IW,{children:(0,t.jsx)(it.Z,{role:"button","aria-label":"drag-handler"})}),(0,t.jsx)(H.cM,{title:(0,t.jsx)(ot.Z,{role:"button",style:{cursor:"pointer"}}),items:c})]})})}),(0,t.jsx)("div",{role:"button",children:r})]}):d?(0,t.jsx)(t.Fragment,{children:d}):null},Vt=["columns"],Bt=function(e){var r=e.config,l=e.data,n=e.title,s=e.uid,o=r.columns,d=W()(r,Vt),C=(0,B.useModel)("@@initialState"),i=C.initialState,h=(0,I.useContext)(N.x),S=h.tableDesigner.devEnable,T=S?(0,t.jsx)(O,{otitle:null,uid:s,col:e,devData:{itemType:"col"},title:(n||"Table")+" - "+s}):n||!1;return(0,t.jsx)(V.Z,{style:{height:"100%"},title:T,children:(0,t.jsx)(at.Z,x()({columns:(0,lt.SS)({initRequest:!0,columns:o,initialState:i,devEnable:!1}),dataSource:l==null?void 0:l.data,rowKey:"id"},d))})},Lt=Bt,wt=a(36942),Ut=["url","pageMenu","path"],Wt=function(e){var r=e.span,l=e.title,n=e.uid,s=e.rows,o=e.data,d=e.config,C=e.sourceDataName,i=e.chart,h=e.noTitle,S=h===void 0?!1:h,T=e.height,v=e.type,b=e.getData,P=e.show_condition,u=o==null?void 0:o.find(function(M){return M.value==C}),p=(0,I.useContext)(N.x),c=p.tableDesigner.devEnable,y=(0,B.useModel)("@@initialState"),f=y.initialState,j=P&&!c?(0,Me.mF)(P,{user:f==null?void 0:f.currentUser}):!0,m=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return S?null:(0,t.jsx)(O,{otitle:Z||l,title:(Z||l||"\u5143\u7D20")+" - "+n,uid:n,col:e,devData:{itemType:"col"}})},F=c?m(l):l||!1;return j?(0,t.jsx)(_.Z,{span:r,children:v=="tab"?(0,t.jsx)(Ht,x()({},e)):v=="table"?(0,t.jsx)(Lt,x()(x()({},e),{},{data:u})):s||v=="rows"?(0,t.jsxs)(t.Fragment,{children:[m(),(0,t.jsx)(pe,{rows:s,data:o})]}):v=="form"?(0,t.jsx)(ce,x()(x()({},e),{},{idata:u})):v=="user"?(0,t.jsx)(V.Z,{headStyle:c?{width:"100%",display:"block"}:{},title:c?m():!1,children:(0,t.jsx)($e.PagePanelHeader,{flash:b})}):v=="StatisticCard"?(0,t.jsx)(tt,{title:F,data:u==null?void 0:u.data,label:u==null?void 0:u.label,config:d,height:T}):null}):null},ce=function(e){var r,l=e.config,n=e.idata,s=e.title,o=e.uid,d=e.getData,C=e.simple,i=(0,I.useContext)(N.x),h=i.tableDesigner.devEnable,S=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return(0,t.jsx)(O,{otitle:u||s,title:u||s||"\u5143\u7D20 - "+o,uid:o,col:e,devData:{itemType:"col"}})},T=l==null||(r=l.columns)===null||r===void 0?void 0:r.map(function(P){var u,p=n==null||(u=n.data)===null||u===void 0?void 0:u.find(function(c){return c.name==P.dataIndex});return p&&(P=x()(x()({},P),p.props)),P}),v=(0,Ne.ab)({initRequest:!0,columns:T,devEnable:!1}),b=(0,t.jsx)(Se.Z,{layoutType:C?"LightFilter":"QueryFilter",columns:v,rowProps:{gutter:[16,16]},colProps:{span:12},grid:!1,initialValues:n==null?void 0:n.initialValues,onFinish:function(u){d==null||d(u)}});return C?b:(0,t.jsx)(V.Z,{bodyStyle:{padding:0},title:h?S():!1,children:b})},Ht=function(e){var r=e.uid,l=e.rows,n=e.data,s=e.getData,o=e.config,d=e.sourceDataName,C=e.height,i=(0,I.useContext)(N.x),h=i.tableDesigner.devEnable,S=n==null?void 0:n.find(function(v){return v.value==d}),T=o.form?(0,t.jsx)(ce,{simple:!0,idata:S,config:o.form,getData:s}):null;return(0,t.jsx)(V.Z,{style:{borderTopRightRadius:0,borderTopLeftRadius:0},title:h?(0,t.jsx)(O,{uid:r,col:e,devData:{itemType:"col"},title:"Tab - "+r,otitle:null}):!1,children:(0,t.jsx)(Fe.Z,{style:{background:"none"},tabBarExtraContent:T?{right:T}:null,destroyInactiveTabPane:!0,items:l==null?void 0:l.map(function(v,b){return{key:b,label:(0,t.jsx)(O,{title:v!=null&&v.title?v==null?void 0:v.title:"tabItem",otitle:v==null?void 0:v.title,uid:v==null?void 0:v.uid,row:v,devData:{itemType:"row"}}),children:(0,t.jsx)(fe,{index:b,row:v,data:n,noTitle:!0},b)}})})})},fe=function(e){var r,l=e.row,n=e.data,s=e.noTitle,o=s===void 0?!1:s,d=e.index,C=e.getData;return(0,t.jsxs)(Ze.Z,{gutter:[16,16],style:{marginTop:-16},children:[o?null:(0,t.jsx)(_.Z,{span:24,children:(0,t.jsx)(O,{span:24,otitle:null,title:l!=null&&l.title?l==null?void 0:l.title:"\u5206\u7EC4 - "+(l==null?void 0:l.uid),uid:l==null?void 0:l.uid,devData:{itemType:"row"},row:l})},"row"),l==null||(r=l.cols)===null||r===void 0?void 0:r.map(function(i,h){return(0,I.createElement)(Wt,x()(x()({},i),{},{key:h,data:n,getData:C}))})]})},Gt=function(e){var r,l,n,s=e.url,o=s===void 0?"":s,d=e.pageMenu,C=e.path,i=W()(e,Ut),h=(0,I.useState)(),S=z()(h,2),T=S[0],v=S[1],b=(0,I.useState)(),P=z()(b,2),u=P[0],p=P[1],c=(0,I.useContext)(ie.r),y=c.messageApi,f=function(){var R=Pe()(k()().mark(function E(){var xe,he,ye,Q=arguments;return k()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return xe=Q.length>0&&Q[0]!==void 0?Q[0]:{},y==null||y.loading({content:"\u52A0\u8F7D\u4E2D...",key:q.iU,duration:0}),A.next=4,q.ZP.get(o,{params:x()(x()({},u),xe)});case 4:he=A.sent,ye=he.data,y==null||y.destroy(),v(ye);case 8:case"end":return A.stop()}},E)}));return function(){return R.apply(this,arguments)}}(),j=(0,I.useState)(),m=z()(j,2),F=m[0],M=m[1],Z=(0,B.useModel)("@@initialState"),D=Z.initialState,K=(0,I.useState)(!!(!(D!=null&&(r=D.settings)!==null&&r!==void 0&&r.devDisable)&&D!==null&&D!==void 0&&(l=D.settings)!==null&&l!==void 0&&(l=l.adminSetting)!==null&&l!==void 0&&l.dev)),U=z()(K,2),ge=U[0],Jt=U[1];(0,I.useEffect)(function(){var R;M(d==null||(R=d.data)===null||R===void 0?void 0:R.panel),f()},[]);var me=(0,H.Yx)({pageMenu:d,setColumns:M,getColumnsRender:function(E){return E},type:"panel",devEnable:ge,sourceData:T});return(0,I.useEffect)(function(){var R,E;Jt(!!(!(D!=null&&(R=D.settings)!==null&&R!==void 0&&R.devDisable)&&D!==null&&D!==void 0&&(E=D.settings)!==null&&E!==void 0&&(E=E.adminSetting)!==null&&E!==void 0&&E.dev))},[D==null||(n=D.settings)===null||n===void 0?void 0:n.devDisable]),(0,t.jsx)(wt.PageContainer404,{title:!1,path:C,children:(0,t.jsxs)(N.x.Provider,{value:{tableDesigner:me},children:[(0,t.jsx)(Oe.L,{children:T&&(0,t.jsx)(pe,x()(x()({},i),{},{rows:F,data:T,getData:f}))},"content"),!T&&(0,t.jsx)(Re.Z,{paragraph:{rows:10},active:!0}),ge?(0,t.jsxs)($.Z,{style:{marginTop:10},children:[(0,t.jsx)(ee.ZP,{type:"dashed",onClick:function(){me.edit({base:{id:d==null?void 0:d.id,actionType:"insertRow"}})},children:"+ Row"},"addrow"),(0,t.jsx)(ze.SE,{trigger:(0,t.jsx)(ee.ZP,{type:"dashed",danger:!0,children:(0,t.jsx)(De.Z,{})}),pageMenu:d},"devsetting")]}):null]})})},pe=function(e){var r=e.rows,l=e.data,n=e.getData;return(0,t.jsx)(Ee.Z,{vertical:!0,gap:"middle",children:r==null?void 0:r.map(function(s,o){return(0,t.jsx)(fe,{index:o,row:s,data:l,getData:n},o)})})},Yt=Gt}}]);
