!(function(){var UG=Object.defineProperty,ZG=Object.defineProperties;var HG=Object.getOwnPropertyDescriptors;var DD=Object.getOwnPropertySymbols;var VG=Object.prototype.hasOwnProperty,WG=Object.prototype.propertyIsEnumerable;var iP=(Me,de)=>(de=Symbol[Me])?de:Symbol.for("Symbol."+Me),GG=Me=>{throw TypeError(Me)},Fi=Math.pow,FD=(Me,de,k)=>de in Me?UG(Me,de,{enumerable:!0,configurable:!0,writable:!0,value:k}):Me[de]=k,eO=(Me,de)=>{for(var k in de||(de={}))VG.call(de,k)&&FD(Me,k,de[k]);if(DD)for(var k of DD(de))WG.call(de,k)&&FD(Me,k,de[k]);return Me},ND=(Me,de)=>ZG(Me,HG(de));var $G=function(Me,de){this[0]=Me,this[1]=de};var BD=Me=>{var de=Me[iP("asyncIterator")],k=!1,yt,st={};return de==null?(de=Me[iP("iterator")](),yt=St=>st[St]=Kt=>de[St](Kt)):(de=de.call(Me),yt=St=>st[St]=Kt=>{if(k){if(k=!1,St==="throw")throw Kt;return Kt}return k=!0,{done:!1,value:new $G(new Promise(et=>{var Qt=de[St](Kt);Qt instanceof Object||GG("Object expected"),et(Qt)}),1)}}),st[iP("iterator")]=()=>st,yt("next"),"throw"in de?yt("throw"):st.throw=St=>{throw St},"return"in de&&yt("return"),st};(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[772],{79611:function(Me,de,k){"use strict";var yt=k(47044),st=(0,yt.i)("Bar");de.Z=st},78677:function(Me,de,k){"use strict";var yt=k(47044),st=(0,yt.i)("Column");de.Z=st},80652:function(Me,de,k){"use strict";var yt=k(47044),st=(0,yt.i)("Line");de.Z=st},63430:function(Me,de,k){"use strict";var yt=k(47044),st=(0,yt.i)("Pie");de.Z=st},47044:function(Me,de,k){"use strict";k.d(de,{i:function(){return BG}});var yt={};k.r(yt),k.d(yt,{area:function(){return $b},bottom:function(){return bs},bottomLeft:function(){return bs},bottomRight:function(){return bs},inside:function(){return bs},left:function(){return bs},outside:function(){return e6},right:function(){return bs},spider:function(){return t_},surround:function(){return e_},top:function(){return bs},topLeft:function(){return bs},topRight:function(){return bs}});var st={};k.r(st),k.d(st,{interpolateBlues:function(){return F5},interpolateBrBG:function(){return E5},interpolateBuGn:function(){return v6},interpolateBuPu:function(){return I5},interpolateCividis:function(){return E6},interpolateCool:function(){return i2},interpolateCubehelixDefault:function(){return J5},interpolateGnBu:function(){return B_},interpolateGreens:function(){return ml},interpolateGreys:function(){return N5},interpolateInferno:function(){return sT},interpolateMagma:function(){return aT},interpolateOrRd:function(){return m6},interpolateOranges:function(){return O6},interpolatePRGn:function(){return I_},interpolatePiYG:function(){return w5},interpolatePlasma:function(){return cT},interpolatePuBu:function(){return Sh},interpolatePuBuGn:function(){return k5},interpolatePuOr:function(){return A5},interpolatePuRd:function(){return y6},interpolatePurples:function(){return x6},interpolateRainbow:function(){return eT},interpolateRdBu:function(){return T5},interpolateRdGy:function(){return h6},interpolateRdPu:function(){return Dg},interpolateRdYlBu:function(){return p6},interpolateRdYlGn:function(){return g6},interpolateReds:function(){return S6},interpolateSinebow:function(){return iT},interpolateSpectral:function(){return F_},interpolateTurbo:function(){return oT},interpolateViridis:function(){return o2},interpolateWarm:function(){return tT},interpolateYlGn:function(){return _6},interpolateYlGnBu:function(){return b6},interpolateYlOrBr:function(){return U_},interpolateYlOrRd:function(){return Z_},schemeAccent:function(){return dh},schemeBlues:function(){return Ju},schemeBrBG:function(){return P_},schemeBuGn:function(){return N_},schemeBuPu:function(){return Rg},schemeCategory10:function(){return f5},schemeDark2:function(){return Sg},schemeGnBu:function(){return R5},schemeGreens:function(){return H_},schemeGreys:function(){return V_},schemeObservable10:function(){return d5},schemeOrRd:function(){return j_},schemeOranges:function(){return z5},schemePRGn:function(){return Cs},schemePaired:function(){return hh},schemePastel1:function(){return vl},schemePastel2:function(){return h5},schemePiYG:function(){return R_},schemePuBu:function(){return D5},schemePuBuGn:function(){return kg},schemePuOr:function(){return k_},schemePuRd:function(){return z_},schemePurples:function(){return B5},schemeRdBu:function(){return D_},schemeRdGy:function(){return C5},schemeRdPu:function(){return Oh},schemeRdYlBu:function(){return M5},schemeRdYlGn:function(){return L5},schemeReds:function(){return j5},schemeSet1:function(){return p5},schemeSet2:function(){return g5},schemeSet3:function(){return v5},schemeSpectral:function(){return P5},schemeTableau10:function(){return __},schemeYlGn:function(){return Fg},schemeYlGnBu:function(){return Ta},schemeYlOrBr:function(){return Ng},schemeYlOrRd:function(){return Ms}});var St={};k.r(St),k.d(St,{geoAlbers:function(){return dk},geoAlbersUsa:function(){return Xz},geoAzimuthalEqualArea:function(){return qz},geoAzimuthalEqualAreaRaw:function(){return vL},geoAzimuthalEquidistant:function(){return Kz},geoAzimuthalEquidistantRaw:function(){return mL},geoConicConformal:function(){return Jz},geoConicConformalRaw:function(){return gk},geoConicEqualArea:function(){return PS},geoConicEqualAreaRaw:function(){return fk},geoConicEquidistant:function(){return eU},geoConicEquidistantRaw:function(){return vk},geoEqualEarth:function(){return rU},geoEqualEarthRaw:function(){return yL},geoEquirectangular:function(){return tU},geoEquirectangularRaw:function(){return Im},geoGnomonic:function(){return iU},geoGnomonicRaw:function(){return bL},geoIdentity:function(){return oU},geoMercator:function(){return Qz},geoMercatorRaw:function(){return Pm},geoNaturalEarth1:function(){return aU},geoNaturalEarth1Raw:function(){return _L},geoOrthographic:function(){return sU},geoOrthographicRaw:function(){return xL},geoProjection:function(){return Ws},geoProjectionMutator:function(){return pL},geoStereographic:function(){return cU},geoStereographicRaw:function(){return SL},geoTransverseMercator:function(){return lU},geoTransverseMercatorRaw:function(){return OL}});var Kt={};k.r(Kt),k.d(Kt,{frequency:function(){return lH},id:function(){return uH},name:function(){return fH},weight:function(){return cH}});var et=k(67294),Qt=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},Ut=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,o,c,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(p){return d([h,p])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(n=0)),n;)try{if(r=1,o&&(c=h[0]&2?o.return:h[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,h[1])).done)return c;switch(o=0,c&&(h=[h[0]&2,c.value]),h[0]){case 0:case 1:c=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,o=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!c||h[1]>c[0]&&h[1]<c[3])){n.label=h[1];break}if(h[0]===6&&n.label<c[1]){n.label=c[1],c=h;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(h);break}c[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(p){h=[6,p],o=0}finally{r=c=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},zt=et.version||"",ft,re,q,Q="__rc_react_root__";try{var Dt=parseInt(zt.split(".")[0],10);if(Dt>=18){var At=k(20745);ft=At.createRoot}else{var Ft=k(73935);re=Ft.render,q=Ft.unmountComponentAtNode}}catch(t){}function Pt(t,e){e[Q]||(e[Q]=ft(e)),e[Q].render(t)}function $t(t,e){if(re)re(t,e);else throw new Error("ReactDOM.render is not available in this React version")}function Oe(t,e){ft?Pt(t,e):$t(t,e)}function De(t){if(q)q(t);else throw new Error("ReactDOM.unmountComponentAtNode is not available in this React version")}function Ge(t){return Qt(this,void 0,void 0,function(){return Ut(this,function(e){return[2,Promise.resolve().then(function(){var n,r;(r=(n=t[Q])===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),delete t[Q]})]})})}function un(t){return Qt(this,void 0,void 0,function(){return Ut(this,function(e){return ft?[2,Ge(t)]:[2,De(t)]})})}var Te=new Map;typeof document!="undefined"&&Te.set("tooltip",document.createElement("div"));var Vt=function(t,e){e===void 0&&(e=!1);var n=null;if(e)n=Te.get("tooltip");else if(n=document.createElement("div"),t!=null&&t.key){var r=Te.get(t.key);r?n=r:Te.set(t.key,n)}return Oe(t,n),n},J=function(){return J=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},J.apply(this,arguments)},ce=function(t,e){if(e===void 0&&(e={}),typeof document=="undefined")return"loading";var n="";e&&Object.keys(e).forEach(function(l){n+="".concat(l,": ").concat(e[l],`;
`)});var r=t.attachShadow({mode:"open"}),o=document.createElement("div"),c=document.createElement("style");c.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
    `.concat(n,`
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `),o.classList.add("loading"),o.innerHTML="<div></div><div></div><div></div><div></div>",r.appendChild(c),r.appendChild(o)},Gt=function(t){var e=t.loadingTemplate,n=t.theme,r=n===void 0?"light":n,o=t.loading,c=et.useRef(null),l=typeof o=="object"?o:{},u=l.container,d=u===void 0?{}:u,h=l.icon,p=h===void 0?{}:h;et.useEffect(function(){!e&&c.current&&ce(c.current,p)},[]);var v=function(){return e||et.createElement("div",{ref:c})};return et.createElement("div",{className:"charts-loading-container",style:J({position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,background:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"},d)},v())},ke=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ie=function(t){ke(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var o=n.props.errorTemplate;switch(r){default:return typeof o=="function"?o(r):o||et.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return e.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},e.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):et.createElement(et.Fragment,null,this.props.children)},e}(et.Component),B=k(96486),Ct,G=function(){return Ct||(Ct=document.createElement("canvas").getContext("2d")),Ct},Mt=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,c;r<o;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))},Et=(0,B.memoize)(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,o=r===void 0?"sans-serif":r,c=e.fontWeight,l=e.fontStyle,u=e.fontVariant,d=G();return d.font=[l,c,u,"".concat(n,"px"),o].join(" "),d.measureText((0,B.isString)(t)?t:"")},function(t,e){return e===void 0&&(e={}),Mt([t],(0,B.values)(e),!0).join("")}),U=function(t,e){return e===void 0&&(e={}),Et(t,e).width},it=function(t,e){e===void 0&&(e={});var n=Et(t,e);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent},te=function(t){var e=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return e.test(t)},he=function(){return he=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},he.apply(this,arguments)};function xt(t,e){var n=(0,et.useRef)(null),r=(0,et.useRef)(null),o=(0,et.useRef)(null),c=e.onReady,l=e.onEvent,u=function(p,v){var m;p===void 0&&(p="image/png");var b=(m=o.current)===null||m===void 0?void 0:m.getElementsByTagName("canvas")[0];return b==null?void 0:b.toDataURL(p,v)},d=function(p,v,m){p===void 0&&(p="download"),v===void 0&&(v="image/png");var b=p;p.indexOf(".")===-1&&(b="".concat(p,".").concat(v.split("/")[1]));var _=u(v,m),S=document.createElement("a");return S.href=_,S.download=b,document.body.appendChild(S),S.click(),document.body.removeChild(S),S=null,b},h=function(p,v){v===void 0&&(v=!1);var m=Object.keys(p),b=v;m.forEach(function(_){var S=p[_];_==="tooltip"&&(b=!0),(0,B.isFunction)(S)&&te("".concat(S))?p[_]=function(){for(var E=[],w=0;w<arguments.length;w++)E[w]=arguments[w];return Vt(S.apply(void 0,E),b)}:(0,B.isArray)(S)?S.forEach(function(E){h(E,b)}):(0,B.isObject)(S)?h(S,b):b=v})};return(0,et.useEffect)(function(){n.current&&!(0,B.isEqual)(r.current,e)&&(r.current=(0,B.cloneDeep)(e),h(e),n.current.update(e),n.current.render())},[e]),(0,et.useEffect)(function(){if(!o.current)return function(){return null};r.current||(r.current=(0,B.cloneDeep)(e)),h(e);var p=new t(o.current,he({},e));p.toDataURL=u,p.downloadImage=d,p.render(),n.current=p,c&&c(p);var v=function(m){l&&l(p,m)};return p.on("*",v),function(){n.current&&(n.current.destroy(),n.current.off("*",v),n.current=void 0)}},[]),{chart:n,container:o}}var ee="*",qt=function(){function t(){this._events={}}return t.prototype.on=function(e,n,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:n,once:!!r}),this},t.prototype.once=function(e,n){return this.on(e,n,!0)},t.prototype.emit=function(e){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var c=this._events[e]||[],l=this._events[ee]||[],u=function(d){for(var h=d.length,p=0;p<h;p++)if(d[p]){var v=d[p],m=v.callback,b=v.once;b&&(d.splice(p,1),d.length===0&&delete n._events[e],h--,p--),m.apply(n,r)}};u(c),u(l)},t.prototype.off=function(e,n){if(!e)this._events={};else if(!n)delete this._events[e];else{for(var r=this._events[e]||[],o=r.length,c=0;c<o;c++)r[c].callback===n&&(r.splice(c,1),o--,c--);r.length===0&&delete this._events[e]}return this},t.prototype.getEvents=function(){return this._events},t}(),pe=qt;const Ce="main-layer",vt="label-layer",K="element",kt="view",le="plot",ut="component",Tt="label",ae="area",Y="mask";var I=k(4559),Yt=k(15671),T=k(43144),F=k(53640),Lt=k(60136),Wt=k(76714),ie=k(25897),be=k(32945),Ae=k(85975),we=k(77160);var $e=function(t){function e(){var n;(0,Yt.Z)(this,e);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=(0,F.Z)(this,e,[].concat(o)),n.landmarks=[],n}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"rotate",value:function(r,o,c){if(this.relElevation=(0,I._O)(o),this.relAzimuth=(0,I._O)(r),this.relRoll=(0,I._O)(c),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===I.iM.EXPLORING){var l=be.yY(be.Ue(),[1,0,0],(0,I.Vl)((this.rotateWorld?1:-1)*this.relElevation)),u=be.yY(be.Ue(),[0,1,0],(0,I.Vl)((this.rotateWorld?1:-1)*this.relAzimuth)),d=be.yY(be.Ue(),[0,0,1],(0,I.Vl)(this.relRoll)),h=be.Jp(be.Ue(),u,l);h=be.Jp(be.Ue(),h,d);var p=Ae.fromQuat(Ae.create(),h);Ae.translate(this.matrix,this.matrix,[0,0,-this.distance]),Ae.multiply(this.matrix,this.matrix,p),Ae.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===I.iM.ORBITING||this.type===I.iM.EXPLORING?this._getPosition():this.type===I.iM.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(r,o){var c=(0,I.O4)(r,o,0),l=we.d9(this.position);return we.IH(l,l,we.bA(we.Ue(),this.right,c[0])),we.IH(l,l,we.bA(we.Ue(),this.up,c[1])),this._setPosition(l),this.triggerUpdate(),this}},{key:"dolly",value:function(r){var o=this.forward,c=we.d9(this.position),l=r*this.dollyingStep,u=this.distance+r*this.dollyingStep;return l=Math.max(Math.min(u,this.maxDistance),this.minDistance)-this.distance,c[0]+=l*o[0],c[1]+=l*o[1],c[2]+=l*o[2],this._setPosition(c),this.type===I.iM.ORBITING||this.type===I.iM.EXPLORING?this._getDistance():this.type===I.iM.TRACKING&&we.IH(this.focalPoint,c,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(r){var o,c,l,u,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=d.position,p=h===void 0?this.position:h,v=d.focalPoint,m=v===void 0?this.focalPoint:v,b=d.roll,_=d.zoom,S=new I.GZ.CameraContribution;S.setType(this.type,void 0),S.setPosition(p[0],(o=p[1])!==null&&o!==void 0?o:this.position[1],(c=p[2])!==null&&c!==void 0?c:this.position[2]),S.setFocalPoint(m[0],(l=m[1])!==null&&l!==void 0?l:this.focalPoint[1],(u=m[2])!==null&&u!==void 0?u:this.focalPoint[2]),S.setRoll(b!=null?b:this.roll),S.setZoom(_!=null?_:this.zoom);var E={name:r,matrix:Ae.clone(S.getWorldTransform()),right:we.d9(S.right),up:we.d9(S.up),forward:we.d9(S.forward),position:we.d9(S.getPosition()),focalPoint:we.d9(S.getFocalPoint()),distanceVector:we.d9(S.getDistanceVector()),distance:S.getDistance(),dollyingStep:S.getDollyingStep(),azimuth:S.getAzimuth(),elevation:S.getElevation(),roll:S.getRoll(),relAzimuth:S.relAzimuth,relElevation:S.relElevation,relRoll:S.relRoll,zoom:S.getZoom()};return this.landmarks.push(E),E}},{key:"gotoLandmark",value:function(r){var o=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(0,Wt.Z)(r)?this.landmarks.find(function(gt){return gt.name===r}):r;if(l){var u=(0,ie.Z)(c)?{duration:c}:c,d=u.easing,h=d===void 0?"linear":d,p=u.duration,v=p===void 0?100:p,m=u.easingFunction,b=m===void 0?void 0:m,_=u.onfinish,S=_===void 0?void 0:_,E=u.onframe,w=E===void 0?void 0:E,C=.01;this.cancelLandmarkAnimation();var M=l.position,L=l.focalPoint,R=l.zoom,j=l.roll,z=b||I.GZ.EasingFunction(h),H,$=function(){o.setFocalPoint(L),o.setPosition(M),o.setRoll(j),o.setZoom(R),o.computeMatrix(),o.triggerUpdate(),S==null||S()};if(v===0)return $();var dt=function(It){H===void 0&&(H=It);var rt=It-H;if(rt>=v){$();return}var lt=z(rt/v),pt=we.Ue(),bt=we.Ue(),Ht=1,Rt=0;we.t7(pt,o.focalPoint,L,lt),we.t7(bt,o.position,M,lt),Rt=o.roll*(1-lt)+j*lt,Ht=o.zoom*(1-lt)+R*lt,o.setFocalPoint(pt),o.setPosition(bt),o.setRoll(Rt),o.setZoom(Ht);var jt=we.TK(pt,L)+we.TK(bt,M);if(jt<=C&&R===void 0&&j===void 0)return $();o.computeMatrix(),o.triggerUpdate(),rt<v&&(w==null||w(lt),o.landmarkAnimationID=o.canvas.requestAnimationFrame(dt))};this.canvas.requestAnimationFrame(dt)}}}])}(I.V1);I.GZ.CameraContribution=$e;var Xe=null,Qe=0,qe=new WeakMap,Zt=null,ne=null,se,fe;function tt(t,e){return se=new Xe(t,e)}function D(t){return fe||(fe=Xe.copy(se),fe.oldValue=t,fe)}function V(){se=fe=void 0}function nt(t){return t===fe||t===se}function _t(t,e){return t===e?t:fe&&nt(t)?fe:null}function Ot(t){t.nodes.forEach(function(e){var n=qe.get(e);n&&n.forEach(function(r){r.observer===t&&r.removeTransientObservers()})})}function ge(t,e){for(var n=t;n;n=n.parentNode){var r=qe.get(n);if(r)for(var o=0;o<r.length;o++){var c=r[o],l=c.options;if(!(n!==t&&!l.subtree)){var u=e(l);u&&c.enqueue(u)}}}}var Ee=!1,Be=null;function je(t){Be.push(t),Ee||(Ee=!0,typeof runtime.globalThis!="undefined"?runtime.globalThis.setTimeout(fn):fn())}function fn(){Ee=!1;var t=Be;Be=[],t.sort(function(n,r){return n.uid-r.uid});var e=!1;t.forEach(function(n){var r=n.takeRecords();Ot(n),r.length&&(n.callback(r,n),e=!0)}),e&&fn()}var Re=k(74902),Ye=k(97685),cn=k(81957),sn=k(95147);var Mn=function(t){function e(n,r,o,c){var l;return(0,Yt.Z)(this,e),l=(0,F.Z)(this,e,[n]),l.currentTime=o,l.timelineTime=c,l.target=r,l.type="finish",l.bubbles=!1,l.currentTarget=r,l.defaultPrevented=!1,l.eventPhase=l.AT_TARGET,l.timeStamp=Date.now(),l.currentTime=o,l.timelineTime=c,l}return(0,Lt.Z)(e,t),(0,T.Z)(e)}(I.xA),Vn=0,Un=function(){function t(e,n){var r;(0,Yt.Z)(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(Vn++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return(0,T.Z)(t,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var n=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(r,o){n.resolveReadyPromise=function(){r(n)},n.rejectReadyPromise=function(){o(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var n=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(r,o){n.resolveFinishedPromise=function(){r(n)},n.rejectFinishedPromise=function(){o(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(n){if(n=Number(n),!isNaN(n)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var r;this._startTime=Number((r=this.timeline)===null||r===void 0?void 0:r.currentTime)-n/this.playbackRate}this.currentTimePending=!1,this._currentTime!==n&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(n,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(n){if(n!==null){if(this.updatePromises(),n=Number(n),isNaN(n)||this._paused||this._idle)return;this._startTime=n,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(n){if(n!==this._playbackRate){this.updatePromises();var r=this.currentTime;this._playbackRate=n,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),r!==null&&(this.currentTime=r),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var n;if((n=this.effect.target)!==null&&n!==void 0&&n.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var r=this.oldPlayState,o=this.pending?"pending":this.playState;return this.readyPromise&&o!==r&&(o==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):r==="pending"?this.resolveReadyPromise():o==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&o!==r&&(o==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):o==="finished"?this.resolveFinishedPromise():r==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=o,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var n=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var r=new Mn(null,this,this.currentTime,null);setTimeout(function(){n.oncancel(r)})}}},{key:"reverse",value:function(){this.updatePromises();var n=this.currentTime;this.playbackRate*=-1,this.play(),n!==null&&(this.currentTime=n),this.updatePromises()}},{key:"updatePlaybackRate",value:function(n){this.playbackRate=n}},{key:"targetAnimations",value:function(){var n,r=(n=this.effect)===null||n===void 0?void 0:n.target;return r.getAnimations()}},{key:"markTarget",value:function(){var n=this.targetAnimations();n.indexOf(this)===-1&&n.push(this)}},{key:"unmarkTarget",value:function(){var n=this.targetAnimations(),r=n.indexOf(this);r!==-1&&n.splice(r,1)}},{key:"tick",value:function(n,r){!this._idle&&!this._paused&&(this._startTime===null?r&&(this.startTime=n-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((n-this._startTime)*this.playbackRate)),r&&(this.currentTimePending=!1,this.fireEvents(n))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(I.jf)}},{key:"addEventListener",value:function(n,r,o){throw new Error(I.jf)}},{key:"removeEventListener",value:function(n,r,o){throw new Error(I.jf)}},{key:"dispatchEvent",value:function(n){throw new Error(I.jf)}},{key:"commitStyles",value:function(){throw new Error(I.jf)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(-1))}else{var r;this._inEffect=!!((r=this.effect)!==null&&r!==void 0&&r.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(n,r){n!==this._currentTime&&(this._currentTime=n,this._isFinished&&!r&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(n){var r=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var o=new Mn(null,this,this.currentTime,n);setTimeout(function(){r.onfinish&&r.onfinish(o)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var c=new Mn(null,this,this.currentTime,n);this.onframe(c)}this._finishedFlag=!1}}}])}(),Jn=4,hr=.001,Ir=1e-7,Qr=10,Sr=11,Or=1/(Sr-1),zr=typeof Float32Array=="function",ci=function(e,n){return 1-3*n+3*e},Ti=function(e,n){return 3*n-6*e},Ci=function(e){return 3*e},ri=function(e,n,r){return((ci(n,r)*e+Ti(n,r))*e+Ci(n))*e},Hi=function(e,n,r){return 3*ci(n,r)*e*e+2*Ti(n,r)*e+Ci(n)},fo=function(e,n,r,o,c){var l,u,d=0;do u=n+(r-n)/2,l=ri(u,o,c)-e,l>0?r=u:n=u;while(Math.abs(l)>Ir&&++d<Qr);return u},es=function(e,n,r,o){for(var c=0;c<Jn;++c){var l=Hi(n,r,o);if(l===0)return n;var u=ri(n,r,o)-e;n-=u/l}return n},so=function(e,n,r,o){if(!(e>=0&&e<=1&&r>=0&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&r===o)return function(d){return d};for(var c=zr?new Float32Array(Sr):new Array(Sr),l=0;l<Sr;++l)c[l]=ri(l*Or,e,r);var u=function(h){for(var p=0,v=1,m=Sr-1;v!==m&&c[v]<=h;++v)p+=Or;--v;var b=(h-c[v])/(c[v+1]-c[v]),_=p+b*Or,S=Hi(_,e,r);return S>=hr?es(h,_,e,r):S===0?_:fo(h,p,p+Or,e,r)};return function(d){return d===0||d===1?d:ri(u(d),n,o)}},va=function(e){return e=e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},Yr=function(e){return Math.pow(e,2)},Jr=function(e){return Math.pow(e,3)},at=function(e){return Math.pow(e,4)},ht=function(e){return Math.pow(e,5)},Xt=function(e){return Math.pow(e,6)},ue=function(e){return 1-Math.cos(e*Math.PI/2)},Le=function(e){return 1-Math.sqrt(1-e*e)},Fe=function(e){return e*e*(3*e-2)},ve=function(e){for(var n,r=4;e<((n=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((n*3-2)/22-e,2)},me=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=(0,Ye.Z)(n,2),o=r[0],c=o===void 0?1:o,l=r[1],u=l===void 0?.5:l,d=(0,cn.Z)(Number(c),1,10),h=(0,cn.Z)(Number(u),.1,2);return e===0||e===1?e:-d*Math.pow(2,10*(e-1))*Math.sin((e-1-h/(Math.PI*2)*Math.asin(1/d))*(Math.PI*2)/h)},Ue=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=(0,Ye.Z)(n,4),c=o[0],l=c===void 0?1:c,u=o[1],d=u===void 0?100:u,h=o[2],p=h===void 0?10:h,v=o[3],m=v===void 0?0:v;l=(0,cn.Z)(l,.1,1e3),d=(0,cn.Z)(d,.1,1e3),p=(0,cn.Z)(p,.1,1e3),m=(0,cn.Z)(m,.1,1e3);var b=Math.sqrt(d/l),_=p/(2*Math.sqrt(d*l)),S=_<1?b*Math.sqrt(1-_*_):0,E=1,w=_<1?(_*b+-m)/S:-m+b,C=r?r*e/1e3:e;return _<1?C=Math.exp(-C*_*b)*(E*Math.cos(S*C)+w*Math.sin(S*C)):C=(E+w*C)*Math.exp(-C*b),e===0||e===1?e:1-C},Ve=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n,o=(0,Ye.Z)(r,2),c=o[0],l=c===void 0?10:c,u=o[1],d=u==="start"?Math.ceil:Math.floor;return d((0,cn.Z)(e,0,1)*l)/l},vn=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=(0,Ye.Z)(n,4),o=r[0],c=r[1],l=r[2],u=r[3];return so(o,c,l,u)(e)},bn=so(.42,0,1,1),An=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return 1-e(1-n,r,o)}},hn=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return n<.5?e(n*2,r,o)/2:1-e(n*-2+2,r,o)/2}},_n=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return n<.5?(1-e(1-n*2,r,o))/2:(e(n*2-1,r,o)+1)/2}},Tn={steps:Ve,"step-start":function(e){return Ve(e,[1,"start"])},"step-end":function(e){return Ve(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":vn,ease:function(e){return vn(e,[.25,.1,.25,1])},in:bn,out:An(bn),"in-out":hn(bn),"out-in":_n(bn),"in-quad":Yr,"out-quad":An(Yr),"in-out-quad":hn(Yr),"out-in-quad":_n(Yr),"in-cubic":Jr,"out-cubic":An(Jr),"in-out-cubic":hn(Jr),"out-in-cubic":_n(Jr),"in-quart":at,"out-quart":An(at),"in-out-quart":hn(at),"out-in-quart":_n(at),"in-quint":ht,"out-quint":An(ht),"in-out-quint":hn(ht),"out-in-quint":_n(ht),"in-expo":Xt,"out-expo":An(Xt),"in-out-expo":hn(Xt),"out-in-expo":_n(Xt),"in-sine":ue,"out-sine":An(ue),"in-out-sine":hn(ue),"out-in-sine":_n(ue),"in-circ":Le,"out-circ":An(Le),"in-out-circ":hn(Le),"out-in-circ":_n(Le),"in-back":Fe,"out-back":An(Fe),"in-out-back":hn(Fe),"out-in-back":_n(Fe),"in-bounce":ve,"out-bounce":An(ve),"in-out-bounce":hn(ve),"out-in-bounce":_n(ve),"in-elastic":me,"out-elastic":An(me),"in-out-elastic":hn(me),"out-in-elastic":_n(me),spring:Ue,"spring-in":Ue,"spring-out":An(Ue),"spring-in-out":hn(Ue),"spring-out-in":_n(Ue)},mn=function(e){return va(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},Zn=function(e){return Tn[mn(e)]||Tn.linear},kn=function(e){return e},Hn=1,Ln=.5,Fn=0;function tr(t,e){return function(n){if(n>=1)return 1;var r=1/t;return n+=e*r,n-n%r}}var di="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",Mi=new RegExp("cubic-bezier\\(".concat(di,",").concat(di,",").concat(di,",").concat(di,"\\)")),ti=/steps\(\s*(\d+)\s*\)/,Ni=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function yi(t){var e=Mi.exec(t);if(e)return so.apply(void 0,(0,Re.Z)(e.slice(1).map(Number)));var n=ti.exec(t);if(n)return tr(Number(n[1]),Fn);var r=Ni.exec(t);return r?tr(Number(r[1]),{start:Hn,middle:Ln,end:Fn}[r[2]]):Zn(t)}function wt(t){return Math.abs(Bt(t)/(t.playbackRate||1))}function Bt(t){var e;return t.duration===0||t.iterations===0?0:(t.duration==="auto"?0:Number(t.duration))*((e=t.iterations)!==null&&e!==void 0?e:1)}var _e=0,tn=1,gn=2,Cn=3;function Wn(t,e,n){if(e===null)return _e;var r=n.endTime;return e<Math.min(n.delay,r)?tn:e>=Math.min(n.delay+t+n.endDelay,r)?gn:Cn}function Wr(t,e,n,r,o){switch(r){case tn:return e==="backwards"||e==="both"?0:null;case Cn:return n-o;case gn:return e==="forwards"||e==="both"?t:null;case _e:return null}}function ei(t,e,n,r,o){var c=o;return t===0?e!==tn&&(c+=n):c+=r/t,c}function Er(t,e,n,r,o,c){var l=t===1/0?e%1:t%1;return l===0&&n===gn&&r!==0&&(o!==0||c===0)&&(l=1),l}function ai(t,e,n,r){return t===gn&&e===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function oP(t,e,n){var r=t;if(t!=="normal"&&t!=="reverse"){var o=e;t==="alternate-reverse"&&(o+=1),r="normal",o!==1/0&&o%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function Fr(t,e,n){var r=Wn(t,e,n),o=Wr(t,n.fill,e,r,n.delay);if(o===null)return null;var c=n.duration==="auto"?0:n.duration,l=ei(c,r,n.iterations,o,n.iterationStart),u=Er(l,n.iterationStart,r,n.iterations,o,c),d=ai(r,n.iterations,u,l),h=oP(n.direction,d,u);return n.currentIteration=d,n.progress=h,n.easingFunction(h)}function Gs(t,e,n){var r=nO(t,e),o=rO(r,n);return function(c,l){if(l!==null)o.filter(function(d){return l>=d.applyFrom&&l<d.applyTo}).forEach(function(d){var h=l-d.startOffset,p=d.endOffset-d.startOffset,v=p===0?0:h/p;c.setAttribute(d.property,d.interpolation(v),!1,!1)});else for(var u in r)$s(u)&&c.setAttribute(u,null)}}function $s(t){return t!=="offset"&&t!=="easing"&&t!=="composite"&&t!=="computedOffset"}function nO(t,e){for(var n={},r=0;r<t.length;r++)for(var o in t[r])if($s(o)){var c={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:yi(t[r].easing)||e.easingFunction,value:t[r][o]};n[o]=n[o]||[],n[o].push(c)}return n}function rO(t,e){var n=[];for(var r in t)for(var o=t[r],c=0;c<o.length-1;c++){var l=c,u=c+1,d=o[l].computedOffset,h=o[u].computedOffset,p=d,v=h;c===0&&(p=-1/0,h===0&&(u=l)),c===o.length-2&&(v=1/0,d===1&&(l=u)),n.push({applyFrom:p,applyTo:v,startOffset:o[l].computedOffset,endOffset:o[u].computedOffset,easingFunction:o[l].easingFunction,property:r,interpolation:iO(r,o[l].value,o[u].value,e)})}return n.sort(function(m,b){return m.startOffset-b.startOffset}),n}var Ym=function(e,n,r){return function(o){var c=Xm(e,n,o);return(0,ie.Z)(c)?c:r(c)}};function iO(t,e,n,r){var o=I.N1[t];if(o&&o.syntax&&o.int){var c=I.GZ.styleValueRegistry.getPropertySyntax(o.syntax);if(c){var l=c.parser,u=l?l(e,r):e,d=l?l(n,r):n,h=c.mixer(u,d,r);if(h){var p=Ym.apply(void 0,(0,Re.Z)(h));return function(v){return v===0?e:v===1?n:p(v)}}}}return Ym(!1,!0,function(v){return v?n:e})}function Xm(t,e,n){if(typeof t=="number"&&typeof e=="number")return t*(1-n)+e*n;if(typeof t=="boolean"&&typeof e=="boolean"||typeof t=="string"&&typeof e=="string")return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,o=e.length,c=Math.max(r,o),l=[],u=0;u<c;u++)l.push(Xm(t[u<r?u:r-1],e[u<o?u:o-1],n));return l}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var Mp=function(){function t(){(0,Yt.Z)(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=kn,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return(0,T.Z)(t,[{key:"easing",get:function(){return this._easing},set:function(n){this.easingFunction=yi(n),this._easing=n}}])}();function Lp(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var o=r.length,c=0;c<o;c++){if(!e[c]){var l={};"offset"in t&&(l.offset=Number(t.offset)),"easing"in t&&(l.easing=t.easing),"composite"in t&&(l.composite=t.composite),e[c]=l}r[c]!==void 0&&r[c]!==null&&(e[c][n]=r[c])}}return e.sort(function(u,d){return(u.computedOffset||0)-(d.computedOffset||0)}),e}function qm(t,e){if(t===null)return[];Array.isArray(t)||(t=Lp(t));for(var n=t.map(function(d){var h={};e!=null&&e.composite&&(h.composite="auto");for(var p in d){var v=d[p];if(p==="offset"){if(v!==null){if(v=Number(v),!isFinite(v))throw new Error("Keyframe offsets must be numbers.");if(v<0||v>1)throw new Error("Keyframe offsets must be between 0 and 1.");h.computedOffset=v}}else if(p==="composite"&&["replace","add","accumulate","auto"].indexOf(v)===-1)throw new Error("".concat(v," compositing is not supported"));h[p]=v}return h.offset===void 0&&(h.offset=null),h.easing===void 0&&(h.easing=(e==null?void 0:e.easing)||"linear"),h.composite===void 0&&(h.composite="auto"),h}),r=!0,o=-1/0,c=0;c<n.length;c++){var l=n[c].offset;if((0,sn.Z)(l))r=!1;else{if(l<o)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");o=l}}n=n.filter(function(d){return Number(d.offset)>=0&&Number(d.offset)<=1});function u(){var d,h=n,p=h.length;if(n[p-1].computedOffset=Number((d=n[p-1].offset)!==null&&d!==void 0?d:1),p>1){var v;n[0].computedOffset=Number((v=n[0].offset)!==null&&v!==void 0?v:0)}for(var m=0,b=Number(n[0].computedOffset),_=1;_<p;_++){var S=n[_].computedOffset;if(!(0,sn.Z)(S)&&!(0,sn.Z)(b)){for(var E=1;E<_-m;E++)n[m+E].computedOffset=b+(Number(S)-b)*E/(_-m);m=_,b=Number(S)}}}return r||u(),n}var oO="backwards|forwards|both|none".split("|"),aO="reverse|alternate|alternate-reverse".split("|");function sO(t,e){var n=new Mp;return e&&(n.fill="both",n.duration="auto"),typeof t=="number"&&!isNaN(t)?n.duration=t:t!==void 0&&Object.keys(t).forEach(function(r){if(t[r]!==void 0&&t[r]!==null&&t[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof t[r]!="number"||isNaN(t[r]))||r==="fill"&&oO.indexOf(t[r])===-1||r==="direction"&&aO.indexOf(t[r])===-1)return;n[r]=t[r]}}),n}function cO(t,e){return t=lO(t!=null?t:{duration:"auto"}),sO(t,e)}function lO(t){return typeof t=="number"&&(isNaN(t)?t={duration:"auto"}:t={duration:t}),t}var uO=function(){function t(e,n,r){var o=this;(0,Yt.Z)(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=cO(r,!1),this.timing.effect=this,this.timing.activeDuration=wt(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=qm(n,this.timing),this.interpolations=Gs(this.normalizedKeyframes,this.timing,this.target);var c=I.GZ.globalThis.Proxy;this.computedTiming=c?new c(this.timing,{get:function(u,d){return d==="duration"?u.duration==="auto"?0:u.duration:d==="fill"?u.fill==="auto"?"none":u.fill:d==="localTime"?o.animation&&o.animation.currentTime||null:d==="currentIteration"?!o.animation||o.animation.playState!=="running"?null:u.currentIteration||0:d==="progress"?!o.animation||o.animation.playState!=="running"?null:u.progress||0:u[d]},set:function(){return!0}}):this.timing}return(0,T.Z)(t,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(n){return n===null?!1:(this.timeFraction=Fr(this.timing.activeDuration,n,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(n){this.normalizedKeyframes=qm(n)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(n){var r=this;Object.keys(n||{}).forEach(function(o){r.timing[o]=n[o]})}}])}();function Km(t,e){return Number(t.id)-Number(e.id)}var fO=function(){function t(e){var n=this;(0,Yt.Z)(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var o=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(Km),n.animations=n.tick(r,!0,n.animations)[0],o.forEach(function(c){c[1](r)}),n.applyPendingEffects()},this.document=e}return(0,T.Z)(t,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(n,r,o){var c=new uO(n,r,o),l=new Un(c,this);return this.animations.push(l),this.restartWebAnimationsNextTick(),l.updatePromises(),l.play(),l.updatePromises(),l}},{key:"applyDirtiedAnimation",value:function(n){var r=this;if(!this.inTick){n.markTarget();var o=n.targetAnimations();o.sort(Km);var c=this.tick(Number(this.currentTime),!1,o.slice())[1];c.forEach(function(l){var u=r.animations.indexOf(l);u!==-1&&r.animations.splice(u,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(n){n==null||n.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(n){return n.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(n){return n.playState!=="finished"&&n.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(n){var r=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([r,n]),r}},{key:"requestAnimationFrame",value:function(n){var r=this;return this.rAF(function(o){r.updateAnimationsPromises(),n(o),r.updateAnimationsPromises()})}},{key:"tick",value:function(n,r,o){var c=this,l,u;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=n,this.ticking=!1;var d=[],h=[],p=[],v=[];return o.forEach(function(m){m.tick(n,r),m._inEffect?(h.push(m.effect),m.markTarget()):(d.push(m.effect),m.unmarkTarget()),m._needsTick&&(c.ticking=!0);var b=m._inEffect||m._needsTick;m._inTimeline=b,b?p.push(m):v.push(m)}),(l=this.pendingEffects).push.apply(l,d),(u=this.pendingEffects).push.apply(u,h),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[p,v]}}])}();I.GZ.EasingFunction=yi,I.GZ.AnimationTimeline=fO;var dO=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Pp=(t,e,n)=>[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]];Pp.style=["fill"];const Qm=Pp.bind(void 0);Qm.style=["stroke","lineWidth"];const Vf=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]];Vf.style=["fill"];const Jm=Vf.bind(void 0);Jm.style=["fill"];const ty=Vf.bind(void 0);ty.style=["stroke","lineWidth"];const Ip=(t,e,n)=>{const r=n*.618;return[["M",t-r,e],["L",t,e-n],["L",t+r,e],["L",t,e+n],["Z"]]};Ip.style=["fill"];const ey=Ip.bind(void 0);ey.style=["stroke","lineWidth"];const Rp=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]};Rp.style=["fill"];const ny=Rp.bind(void 0);ny.style=["stroke","lineWidth"];const kp=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]};kp.style=["fill"];const ry=kp.bind(void 0);ry.style=["stroke","lineWidth"];const Dp=(t,e,n)=>{const r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]};Dp.style=["fill"];const iy=Dp.bind(void 0);iy.style=["stroke","lineWidth"];const Fp=(t,e,n)=>{const r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]};Fp.style=["fill"];const oy=Fp.bind(void 0);oy.style=["stroke","lineWidth"];const ay=(t,e,n)=>[["M",t,e+n],["L",t,e-n]];ay.style=["stroke","lineWidth"];const sy=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]];sy.style=["stroke","lineWidth"];const cy=(t,e,n)=>[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]];cy.style=["stroke","lineWidth"];const ly=(t,e,n)=>[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]];ly.style=["stroke","lineWidth"];const uy=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];uy.style=["stroke","lineWidth"];const Np=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];Np.style=["stroke","lineWidth"];const fy=Np.bind(void 0);fy.style=["stroke","lineWidth"];const dy=(t,e,n)=>[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]];dy.style=["stroke","lineWidth"];const hy=(t,e,n)=>[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]];hy.style=["stroke","lineWidth"];const py=(t,e,n)=>[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]];py.style=["stroke","lineWidth"];const gy=(t,e,n)=>[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]];gy.style=["stroke","lineWidth"];const vy=(t,e,n)=>[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]];vy.style=["stroke","lineWidth"];const Uc=new Map([["bowtie",Fp],["cross",sy],["dash",fy],["diamond",Ip],["dot",Np],["hexagon",Dp],["hollowBowtie",oy],["hollowDiamond",ey],["hollowHexagon",iy],["hollowPoint",Qm],["hollowSquare",ty],["hollowTriangle",ny],["hollowTriangleDown",ry],["hv",hy],["hvh",gy],["hyphen",uy],["line",ay],["plus",ly],["point",Pp],["rect",Jm],["smooth",dy],["square",Vf],["tick",cy],["triangleDown",kp],["triangle",Rp],["vh",py],["vhv",vy]]);function hO(t,e){var{d:n,fill:r,lineWidth:o,path:c,stroke:l,color:u}=e,d=dO(e,["d","fill","lineWidth","path","stroke","color"]);const h=Uc.get(t)||Uc.get("point");return(...p)=>new I.y$({style:Object.assign(Object.assign({},d),{d:h(...p),stroke:h.style.includes("stroke")?u||l:"",fill:h.style.includes("fill")?u||r:"",lineWidth:h.style.includes("lineWidth")?o||o||2:0})})}function pO(t,e){Uc.set(t,e)}function aP(t){Uc.delete(t)}const yy={};function by(t,e){t.startsWith("symbol.")?pO(t.split(".").pop(),e):Object.assign(yy,{[t]:e})}var fr=k(4942);function ii(t,e){var n=e.cx,r=n===void 0?0:n,o=e.cy,c=o===void 0?0:o,l=e.r;t.arc(r,c,l,0,Math.PI*2,!1)}function gO(t,e){var n=e.cx,r=n===void 0?0:n,o=e.cy,c=o===void 0?0:o,l=e.rx,u=e.ry;if(t.ellipse)t.ellipse(r,c,l,u,0,0,Math.PI*2,!1);else{var d=l>u?l:u,h=l>u?1:l/u,p=l>u?u/l:1;t.save(),t.scale(h,p),t.arc(r,c,d,0,Math.PI*2)}}function vO(t,e){var n=e.x1,r=e.y1,o=e.x2,c=e.y2,l=e.markerStart,u=e.markerEnd,d=e.markerStartOffset,h=e.markerEndOffset,p=0,v=0,m=0,b=0,_=0,S,E;l&&(0,I.RV)(l)&&d&&(S=o-n,E=c-r,_=Math.atan2(E,S),p=Math.cos(_)*(d||0),v=Math.sin(_)*(d||0)),u&&(0,I.RV)(u)&&h&&(S=n-o,E=r-c,_=Math.atan2(E,S),m=Math.cos(_)*(h||0),b=Math.sin(_)*(h||0)),t.moveTo(n+p,r+v),t.lineTo(o+m,c+b)}function _y(t,e){var n=e.markerStart,r=e.markerEnd,o=e.markerStartOffset,c=e.markerEndOffset,l=e.d,u=l.absolutePath,d=l.segments,h=0,p=0,v=0,m=0,b=0,_,S;if(n&&(0,I.RV)(n)&&o){var E=n.parentNode.getStartTangent(),w=(0,Ye.Z)(E,2),C=w[0],M=w[1];_=C[0]-M[0],S=C[1]-M[1],b=Math.atan2(S,_),h=Math.cos(b)*(o||0),p=Math.sin(b)*(o||0)}if(r&&(0,I.RV)(r)&&c){var L=r.parentNode.getEndTangent(),R=(0,Ye.Z)(L,2),j=R[0],z=R[1];_=j[0]-z[0],S=j[1]-z[1],b=Math.atan2(S,_),v=Math.cos(b)*(c||0),m=Math.sin(b)*(c||0)}for(var H=0;H<u.length;H++){var $=u[H],dt=$[0],gt=u[H+1],It=H===0&&(h!==0||p!==0),rt=(H===u.length-1||gt&&(gt[0]==="M"||gt[0]==="Z"))&&v!==0&&m!==0,lt=It?[h,p]:[0,0],pt=(0,Ye.Z)(lt,2),bt=pt[0],Ht=pt[1],Rt=rt?[v,m]:[0,0],jt=(0,Ye.Z)(Rt,2),oe=jt[0],Se=jt[1];switch(dt){case"M":t.moveTo($[1]+bt,$[2]+Ht);break;case"L":t.lineTo($[1]+oe,$[2]+Se);break;case"Q":t.quadraticCurveTo($[1],$[2],$[3]+oe,$[4]+Se);break;case"C":t.bezierCurveTo($[1],$[2],$[3],$[4],$[5]+oe,$[6]+Se);break;case"A":{var xe=d[H].arcParams,Pe=xe.cx,Ke=xe.cy,Ze=xe.rx,en=xe.ry,rn=xe.startAngle,We=xe.endAngle,dn=xe.xRotation,yn=xe.sweepFlag;if(t.ellipse)t.ellipse(Pe,Ke,Ze,en,dn,rn,We,!!(1-yn));else{var wn=Ze>en?Ze:en,Sn=Ze>en?1:Ze/en,Pn=Ze>en?en/Ze:1;t.translate(Pe,Ke),t.rotate(dn),t.scale(Sn,Pn),t.arc(0,0,wn,rn,We,!!(1-yn)),t.scale(1/Sn,1/Pn),t.rotate(-dn),t.translate(-Pe,-Ke)}rt&&t.lineTo($[6]+v,$[7]+m);break}case"Z":t.closePath();break}}}function xy(t,e){var n=e.markerStart,r=e.markerEnd,o=e.markerStartOffset,c=e.markerEndOffset,l=e.points.points,u=l.length,d=l[0][0],h=l[0][1],p=l[u-1][0],v=l[u-1][1],m=0,b=0,_=0,S=0,E=0,w,C;n&&(0,I.RV)(n)&&o&&(w=l[1][0]-l[0][0],C=l[1][1]-l[0][1],E=Math.atan2(C,w),m=Math.cos(E)*(o||0),b=Math.sin(E)*(o||0)),r&&(0,I.RV)(r)&&c&&(w=l[u-1][0]-l[0][0],C=l[u-1][1]-l[0][1],E=Math.atan2(C,w),_=Math.cos(E)*(c||0),S=Math.sin(E)*(c||0)),t.moveTo(d+(m||_),h+(b||S));for(var M=1;M<u-1;M++){var L=l[M];t.lineTo(L[0],L[1])}t.lineTo(p,v)}function mO(t,e){var n=e.markerStart,r=e.markerEnd,o=e.markerStartOffset,c=e.markerEndOffset,l=e.points.points,u=l.length,d=l[0][0],h=l[0][1],p=l[u-1][0],v=l[u-1][1],m=0,b=0,_=0,S=0,E=0,w,C;n&&(0,I.RV)(n)&&o&&(w=l[1][0]-l[0][0],C=l[1][1]-l[0][1],E=Math.atan2(C,w),m=Math.cos(E)*(o||0),b=Math.sin(E)*(o||0)),r&&(0,I.RV)(r)&&c&&(w=l[u-2][0]-l[u-1][0],C=l[u-2][1]-l[u-1][1],E=Math.atan2(C,w),_=Math.cos(E)*(c||0),S=Math.sin(E)*(c||0)),t.moveTo(d+m,h+b);for(var M=1;M<u-1;M++){var L=l[M];t.lineTo(L[0],L[1])}t.lineTo(p+_,v+S)}function Bi(t,e){var n=e.x,r=n===void 0?0:n,o=e.y,c=o===void 0?0:o,l=e.radius,u=e.width,d=e.height,h=u,p=d,v=l&&l.some(function(R){return R!==0});if(!v)t.rect(r,c,h,p);else{var m=u>0?1:-1,b=d>0?1:-1,_=m+b===0,S=l.map(function(R){return(0,cn.Z)(R,0,Math.min(Math.abs(h)/2,Math.abs(p)/2))}),E=(0,Ye.Z)(S,4),w=E[0],C=E[1],M=E[2],L=E[3];t.moveTo(m*w+r,c),t.lineTo(h-m*C+r,c),C!==0&&t.arc(h-m*C+r,b*C+c,C,-b*Math.PI/2,m>0?0:Math.PI,_),t.lineTo(h+r,p-b*M+c),M!==0&&t.arc(h-m*M+r,p-b*M+c,M,m>0?0:Math.PI,b>0?Math.PI/2:1.5*Math.PI,_),t.lineTo(m*L+r,p+c),L!==0&&t.arc(m*L+r,p-b*L+c,L,b>0?Math.PI/2:-Math.PI/2,m>0?Math.PI:0,_),t.lineTo(r,b*w+c),w!==0&&t.arc(m*w+r,b*w+c,w,m>0?Math.PI:0,b>0?Math.PI*1.5:Math.PI/2,_)}}var Ba=function(t){function e(){var n;(0,Yt.Z)(this,e);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=(0,F.Z)(this,e,[].concat(o)),n.name="canvas-path-generator",n}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"init",value:function(){var r,o=(r={},(0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)(r,I.bn.CIRCLE,ii),I.bn.ELLIPSE,gO),I.bn.RECT,Bi),I.bn.LINE,vO),I.bn.POLYLINE,mO),I.bn.POLYGON,xy),I.bn.PATH,_y),I.bn.TEXT,void 0),I.bn.GROUP,void 0),I.bn.IMAGE,void 0),(0,fr.Z)((0,fr.Z)((0,fr.Z)(r,I.bn.HTML,void 0),I.bn.MESH,void 0),I.bn.FRAGMENT,void 0));this.context.pathGeneratorFactory=o}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(I.F6),ja=k(37762),co=k(55850),Zc=k(15861),Ys=k(11702),sP=k(74873),Ji=k(1413);var cP=we.Ue(),yO=we.Ue(),bO=we.Ue(),lP=Ae.create(),_O=function(){function t(){var e=this;(0,Yt.Z)(this,t),this.isHit=function(n,r,o,c){var l=e.context.pointInPathPickerFactory[n.nodeName];if(l){var u=Ae.invert(lP,o),d=we.fF(yO,we.t8(bO,r[0],r[1],0),u);if(l(n,new I.E9(d[0],d[1]),c,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(n,r){var o=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),c=e.context.pathGeneratorFactory[n.nodeName];return c&&(o.beginPath(),c(o,n.parsedStyle),o.closePath()),o.isPointInPath(r.x,r.y)}}return(0,T.Z)(t,[{key:"apply",value:function(n,r){var o,c=this,l=n.renderingService,u=n.renderingContext;this.context=n,this.runtime=r;var d=(o=u.root)===null||o===void 0?void 0:o.ownerDocument;l.hooks.pick.tapPromise(t.tag,function(){var h=(0,Zc.Z)((0,co.Z)().mark(function p(v){return(0,co.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",c.pick(d,v));case 1:case"end":return m.stop()}},p)}));return function(p){return h.apply(this,arguments)}}()),l.hooks.pickSync.tap(t.tag,function(h){return c.pick(d,h)})}},{key:"pick",value:function(n,r){var o=r.topmost,c=r.position,l=c.x,u=c.y,d=we.t8(cP,l,u,0),h=n.elementsFromBBox(d[0],d[1],d[0],d[1]),p=[],v=(0,ja.Z)(h),m;try{for(v.s();!(m=v.n()).done;){var b=m.value,_=b.getWorldTransform(),S=this.isHit(b,d,_,!1);if(S){var E=(0,I.Oi)(b);if(E){var w=E.parsedStyle.clipPath,C=this.isHit(w,d,w.getWorldTransform(),!0);if(C){if(o)return r.picked=[b],r;p.push(b)}}else{if(o)return r.picked=[b],r;p.push(b)}}}}catch(M){v.e(M)}finally{v.f()}return r.picked=p,r}}])}();_O.tag="CanvasPicker";function xO(t,e,n){var r=t.parsedStyle,o=r.cx,c=o===void 0?0:o,l=r.cy,u=l===void 0?0:l,d=r.r,h=r.fill,p=r.stroke,v=r.lineWidth,m=v===void 0?1:v,b=r.increasedLineWidthForHitTesting,_=b===void 0?0:b,S=r.pointerEvents,E=S===void 0?"auto":S,w=(m+_)/2,C=(0,Ys.TE)(c,u,e.x,e.y),M=(0,I.L1)(E,h,p),L=(0,Ye.Z)(M,2),R=L[0],j=L[1];return R&&j||n?C<=d+w:R?C<=d:j?C>=d-w&&C<=d+w:!1}function Vi(t,e,n,r){return t/(n*n)+e/(r*r)}function Sy(t,e,n){var r=t.parsedStyle,o=r.cx,c=o===void 0?0:o,l=r.cy,u=l===void 0?0:l,d=r.rx,h=r.ry,p=r.fill,v=r.stroke,m=r.lineWidth,b=m===void 0?1:m,_=r.increasedLineWidthForHitTesting,S=_===void 0?0:_,E=r.pointerEvents,w=E===void 0?"auto":E,C=e.x,M=e.y,L=(0,I.L1)(w,p,v),R=(0,Ye.Z)(L,2),j=R[0],z=R[1],H=(b+S)/2,$=(C-c)*(C-c),dt=(M-u)*(M-u);return j&&z||n?Vi($,dt,d+H,h+H)<=1:j?Vi($,dt,d,h)<=1:z?Vi($,dt,d-H,h-H)>=1&&Vi($,dt,d+H,h+H)<=1:!1}function ns(t,e,n,r,o,c){return o>=t&&o<=t+n&&c>=e&&c<=e+r}function uP(t,e,n,r,o,c,l){var u=o/2;return ns(t-u,e-u,n,o,c,l)||ns(t+n-u,e-u,o,r,c,l)||ns(t+u,e+r-u,n,o,c,l)||ns(t-u,e+u,o,r,c,l)}function Wf(t,e,n,r,o,c,l,u){var d=(Math.atan2(u-e,l-t)+Math.PI*2)%(Math.PI*2),h={x:t+n*Math.cos(d),y:e+n*Math.sin(d)};return(0,Ys.TE)(h.x,h.y,l,u)<=c/2}function rs(t,e,n,r,o,c,l){var u=Math.min(t,n),d=Math.max(t,n),h=Math.min(e,r),p=Math.max(e,r),v=o/2;return c>=u-v&&c<=d+v&&l>=h-v&&l<=p+v?(0,Ys._x)(t,e,n,r,c,l)<=o/2:!1}function SO(t,e,n,r,o){var c=t.length;if(c<2)return!1;for(var l=0;l<c-1;l++){var u=t[l][0],d=t[l][1],h=t[l+1][0],p=t[l+1][1];if(rs(u,d,h,p,e,n,r))return!0}if(o){var v=t[0],m=t[c-1];if(rs(v[0],v[1],m[0],m[1],e,n,r))return!0}return!1}var Bp=1e-6;function jp(t){return Math.abs(t)<Bp?0:t<0?-1:1}function Oy(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function Ey(t,e,n){var r=!1,o=t.length;if(o<=2)return!1;for(var c=0;c<o;c++){var l=t[c],u=t[(c+1)%o];if(Oy(l,u,[e,n]))return!0;jp(l[1]-n)>0!=jp(u[1]-n)>0&&jp(e-(n-l[1])*(l[0]-u[0])/(l[1]-u[1])-l[0])<0&&(r=!r)}return r}function wy(t,e,n){for(var r=!1,o=0;o<t.length;o++){var c=t[o];if(r=Ey(c,e,n),r)break}return r}function OO(t,e,n){var r=t.parsedStyle,o=r.x1,c=r.y1,l=r.x2,u=r.y2,d=r.lineWidth,h=d===void 0?1:d,p=r.increasedLineWidthForHitTesting,v=p===void 0?0:p,m=r.pointerEvents,b=m===void 0?"auto":m,_=r.fill,S=r.stroke,E=(0,I.L1)(b,_,S),w=(0,Ye.Z)(E,2),C=w[1];return!C&&!n||!h?!1:rs(o,c,l,u,h+v,e.x,e.y)}function fP(t,e,n,r,o){for(var c=!1,l=e/2,u=0;u<t.length;u++){var d=t[u],h=d.currentPoint,p=d.params,v=d.prePoint,m=d.box;if(!(m&&!ns(m.x-l,m.y-l,m.width+e,m.height+e,n,r)))switch(d.command){case"L":case"Z":if(c=rs(v[0],v[1],h[0],h[1],e,n,r),c)return!0;break;case"Q":var b=(0,Ys.Y1)(v[0],v[1],p[1],p[2],p[3],p[4],n,r);if(c=b<=e/2,c)return!0;break;case"C":var _=(0,Ys.ph)(v[0],v[1],p[1],p[2],p[3],p[4],p[5],p[6],n,r,o);if(c=_<=e/2,c)return!0;break;case"A":d.cubicParams||(d.cubicParams=(0,sP.W)(v[0],v[1],p[1],p[2],p[3],p[4],p[5],p[6],p[7],void 0));for(var S=d.cubicParams,E=v,w=0;w<S.length;w+=6){var C=(0,Ys.ph)(E[0],E[1],S[w],S[w+1],S[w+2],S[w+3],S[w+4],S[w+5],n,r,o);if(E=[S[w+4],S[w+5]],c=C<=e/2,c)return!0}break}}return c}function Gf(t,e,n,r,o,c){var l=t.parsedStyle,u=l.lineWidth,d=u===void 0?1:u,h=l.increasedLineWidthForHitTesting,p=h===void 0?0:h,v=l.stroke,m=l.fill,b=l.d,_=l.pointerEvents,S=_===void 0?"auto":_,E=b.segments,w=b.hasArc,C=b.polylines,M=b.polygons,L=(0,I.L1)(S,(M==null?void 0:M.length)&&m,v),R=(0,Ye.Z)(L,2),j=R[0],z=R[1],H=(0,I.gz)(t),$=!1;return j||n?(w?$=r(t,e):$=wy(M,e.x,e.y)||wy(C,e.x,e.y),$):((z||n)&&($=fP(E,d+p,e.x,e.y,H)),$)}function dP(t,e,n){var r=t.parsedStyle,o=r.stroke,c=r.fill,l=r.lineWidth,u=l===void 0?1:l,d=r.increasedLineWidthForHitTesting,h=d===void 0?0:d,p=r.points,v=r.pointerEvents,m=v===void 0?"auto":v,b=(0,I.L1)(m,c,o),_=(0,Ye.Z)(b,2),S=_[0],E=_[1],w=!1;return(E||n)&&(w=SO(p.points,u+h,e.x,e.y,!0)),!w&&(S||n)&&(w=Ey(p.points,e.x,e.y)),w}function hP(t,e,n){var r=t.parsedStyle,o=r.lineWidth,c=o===void 0?1:o,l=r.increasedLineWidthForHitTesting,u=l===void 0?0:l,d=r.points,h=r.pointerEvents,p=h===void 0?"auto":h,v=r.fill,m=r.stroke,b=(0,I.L1)(p,v,m),_=(0,Ye.Z)(b,2),S=_[1];return!S&&!n||!c?!1:SO(d.points,c+u,e.x,e.y,!1)}function pP(t,e,n,r,o){var c=t.parsedStyle,l=c.radius,u=c.fill,d=c.stroke,h=c.lineWidth,p=h===void 0?1:h,v=c.increasedLineWidthForHitTesting,m=v===void 0?0:v,b=c.x,_=b===void 0?0:b,S=c.y,E=S===void 0?0:S,w=c.width,C=c.height,M=c.pointerEvents,L=M===void 0?"auto":M,R=(0,I.L1)(L,u,d),j=(0,Ye.Z)(R,2),z=j[0],H=j[1],$=l&&l.some(function(rt){return rt!==0}),dt=p+m;if($){var It=!1;return(H||n)&&(It=gP(_,E,w,C,l.map(function(rt){return(0,cn.Z)(rt,0,Math.min(Math.abs(w)/2,Math.abs(C)/2))}),dt,e.x,e.y)),!It&&(z||n)&&(It=r(t,e)),It}else{var gt=dt/2;if(z&&H||n)return ns(_-gt,E-gt,w+gt,C+gt,e.x,e.y);if(z)return ns(_,E,w,C,e.x,e.y);if(H)return uP(_,E,w,C,dt,e.x,e.y)}return!1}function gP(t,e,n,r,o,c,l,u){var d=(0,Ye.Z)(o,4),h=d[0],p=d[1],v=d[2],m=d[3];return rs(t+h,e,t+n-p,e,c,l,u)||rs(t+n,e+p,t+n,e+r-v,c,l,u)||rs(t+n-v,e+r,t+m,e+r,c,l,u)||rs(t,e+r-m,t,e+h,c,l,u)||Wf(t+n-p,e+p,p,1.5*Math.PI,2*Math.PI,c,l,u)||Wf(t+n-v,e+r-v,v,0,.5*Math.PI,c,l,u)||Wf(t+m,e+r-m,m,.5*Math.PI,Math.PI,c,l,u)||Wf(t+h,e+h,h,Math.PI,1.5*Math.PI,c,l,u)}function vP(t,e,n,r,o,c){var l=t.parsedStyle,u=l.pointerEvents,d=u===void 0?"auto":u,h=l.x,p=h===void 0?0:h,v=l.y,m=v===void 0?0:v,b=l.width,_=l.height;if(d==="non-transparent-pixel"){var S=o.config.offscreenCanvas,E=c.offscreenCanvasCreator.getOrCreateCanvas(S),w=c.offscreenCanvasCreator.getOrCreateContext(S,{willReadFrequently:!0});E.width=b,E.height=_,o.defaultStyleRendererFactory[I.bn.IMAGE].render(w,(0,Ji.Z)((0,Ji.Z)({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0);var C=w.getImageData(e.x-p,e.y-m,1,1).data;return C.every(function(M){return M!==0})}return!0}function zp(t,e,n,r){var o=t.getGeometryBounds();return e.x>=o.min[0]&&e.y>=o.min[1]&&e.x<=o.max[0]&&e.y<=o.max[1]}var EO=function(t){function e(){var n;(0,Yt.Z)(this,e);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=(0,F.Z)(this,e,[].concat(o)),n.name="canvas-picker",n}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"init",value:function(){var r,o=(r={},(0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)(r,I.bn.CIRCLE,xO),I.bn.ELLIPSE,Sy),I.bn.RECT,pP),I.bn.LINE,OO),I.bn.POLYLINE,hP),I.bn.POLYGON,dP),I.bn.PATH,Gf),I.bn.TEXT,zp),I.bn.GROUP,null),I.bn.IMAGE,vP),(0,fr.Z)((0,fr.Z)(r,I.bn.HTML,null),I.bn.MESH,null));this.context.pointInPathPickerFactory=o,this.addRenderingPlugin(new _O)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(I.F6);function ko(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var bi=0;function $f(t){return"__private_"+bi+++"_"+t}var wO=function(){function t(){(0,Yt.Z)(this,t),this.cacheStore=new Map}return(0,T.Z)(t,[{key:"onRefAdded",value:function(n){}},{key:"has",value:function(n){return this.cacheStore.has(n)}},{key:"put",value:function(n,r,o){return this.cacheStore.has(n)?!1:(this.cacheStore.set(n,{value:r,counter:new Set([o.entity])}),this.onRefAdded(o),!0)}},{key:"get",value:function(n,r){var o=this.cacheStore.get(n);return o?(o.counter.has(r.entity)||(o.counter.add(r.entity),this.onRefAdded(r)),o.value):null}},{key:"update",value:function(n,r,o){var c=this.cacheStore.get(n);return c?(c.value=(0,Ji.Z)((0,Ji.Z)({},c.value),r),c.counter.has(o.entity)||(c.counter.add(o.entity),this.onRefAdded(o)),!0):!1}},{key:"release",value:function(n,r){var o=this.cacheStore.get(n);return o?(o.counter.delete(r.entity),o.counter.size<=0&&this.cacheStore.delete(n),!0):!1}},{key:"releaseRef",value:function(n){var r=this;Array.from(this.cacheStore.keys()).forEach(function(o){r.release(o,n)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),Up=[],Yf=[],Ay=function(){function t(){(0,Yt.Z)(this,t)}return(0,T.Z)(t,null,[{key:"stop",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;t.rafId&&(n.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;Up.length<=0&&Yf.length<=0||(Yf.forEach(function(r){return r()}),Yf=Up.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=n.requestAnimationFrame(function(){t.executeTask(n)}))}},{key:"sliceImage",value:function(n,r,o,c){for(var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t.api,d=n.naturalWidth||n.width,h=n.naturalHeight||n.height,p=r-l,v=o-l,m=Math.ceil(d/p),b=Math.ceil(h/v),_={tileSize:[r,o],gridSize:[b,m],tiles:Array(b).fill(null).map(function(){return Array(m).fill(null)})},S=function(C){for(var M=function(j){Up.push(function(){var z=j*p,H=C*v,$=[Math.min(r,d-z),Math.min(o,h-H)],dt=$[0],gt=$[1],It=u.createCanvas();It.width=r,It.height=o;var rt=It.getContext("2d");rt.drawImage(n,z,H,dt,gt,0,0,dt,gt),_.tiles[C][j]={x:z,y:H,tileX:j,tileY:C,data:It},c()})},L=0;L<m;L++)M(L)},E=0;E<b;E++)S(E);return t.stop(),t.executeTask(),_}}])}();Ay.TASK_NUM_PER_FRAME=10;var ho=new wO;ho.onRefAdded=function(e){var n=this;e.addEventListener(I.Dk.DESTROY,function(){n.releaseRef(e)},{once:!0})};var Hc=function(){function t(e,n){(0,Yt.Z)(this,t),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=n}return(0,T.Z)(t,[{key:"getImageSync",value:function(n,r,o){var c=(0,Wt.Z)(n)?n:n.src;if(ho.has(c)){var l=ho.get(c,r);if(l.img.complete)return o==null||o(l),l}return this.getOrCreateImage(n,r).then(function(u){o==null||o(u)}).catch(function(u){console.error(u)}),null}},{key:"getOrCreateImage",value:function(n,r){var o=this,c=(0,Wt.Z)(n)?n:n.src;if(!(0,Wt.Z)(n)&&!ho.has(c)){var l={img:n,size:[n.naturalWidth||n.width,n.naturalHeight||n.height],tileSize:Zp(n)};ho.put(c,l,r)}if(ho.has(c)){var u=ho.get(c,r);return u.img.complete?Promise.resolve(u):new Promise(function(d,h){u.img.addEventListener("load",function(){u.size=[u.img.naturalWidth||u.img.width,u.img.naturalHeight||u.img.height],u.tileSize=Zp(u.img),d(u)}),u.img.addEventListener("error",function(p){h(p)})})}return new Promise(function(d,h){var p=o.context.config.createImage();if(p){var v={img:p,size:[0,0],tileSize:Zp(p)};ho.put(c,v,r),p.onload=function(){v.size=[p.naturalWidth||p.width,p.naturalHeight||p.height],v.tileSize=Zp(v.img),d(v)},p.onerror=function(m){h(m)},p.crossOrigin="Anonymous",p.src=c}})}},{key:"createDownSampledImage",value:function(){var e=(0,Zc.Z)((0,co.Z)().mark(function r(o,c){var l,u,d,h,p,v,m,b,_,S,E,w,C,M;return(0,co.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=1,this.getOrCreateImage(o,c);case 1:if(l=L.sent,typeof l.downSamplingRate=="undefined"){L.next=2;break}return L.abrupt("return",l);case 2:if(u=this.context.config.enableLargeImageOptimization,d=typeof u=="boolean"?{}:u,h=d.maxDownSampledImageSize,p=h===void 0?2048:h,v=d.downSamplingRateThreshold,m=v===void 0?.5:v,b=this.runtime.globalThis.createImageBitmap,_=(0,Ye.Z)(l.size,2),S=_[0],E=_[1],w=l.img,C=Math.min((p+p)/(S+E),Math.max(.01,Math.min(m,.5))),M=(0,Ji.Z)((0,Ji.Z)({},l),{},{downSamplingRate:C}),ho.update(l.img.src,M,c),!b){L.next=7;break}return L.prev=3,L.next=4,b(l.img,{resizeWidth:S*C,resizeHeight:E*C});case 4:w=L.sent,L.next=6;break;case 5:L.prev=5,L.catch(3),C=1;case 6:L.next=8;break;case 7:C=1;case 8:return M=(0,Ji.Z)((0,Ji.Z)({},this.getImageSync(o,c)),{},{downSampled:w,downSamplingRate:C}),ho.update(l.img.src,M,c),L.abrupt("return",M);case 9:case"end":return L.stop()}},r,this,[[3,5]])}));function n(r,o){return e.apply(this,arguments)}return n}()},{key:"createImageTiles",value:function(){var e=(0,Zc.Z)((0,co.Z)().mark(function r(o,c,l,u){var d,h,p,v,m;return(0,co.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=1,this.getOrCreateImage(o,u);case 1:return d=b.sent,h=u.ownerDocument.defaultView,p=h.requestAnimationFrame,v=h.cancelAnimationFrame,Ay.api={requestAnimationFrame:p,cancelAnimationFrame:v,createCanvas:function(){return I.jB.createCanvas()}},m=(0,Ji.Z)((0,Ji.Z)({},d),Ay.sliceImage(d.img,d.tileSize[0],d.tileSize[0],l)),ho.update(d.img.src,m,u),b.abrupt("return",m);case 2:case"end":return b.stop()}},r,this)}));function n(r,o,c,l){return e.apply(this,arguments)}return n}()},{key:"releaseImage",value:function(n,r){ho.release((0,Wt.Z)(n)?n:n.src,r)}},{key:"releaseImageRef",value:function(n){ho.releaseRef(n)}},{key:"getOrCreatePatternSync",value:function(n,r,o,c,l,u,d){var h=this.generatePatternKey(r);if(h&&this.patternCache[h])return this.patternCache[h];var p=r.image,v=r.repetition,m=r.transform,b,_=!1;if((0,Wt.Z)(p)){var S=this.getImageSync(p,n,d);b=S==null?void 0:S.img}else c?(b=c,_=!0):b=p;var E=b&&o.createPattern(b,v);if(E){var w;m?w=(0,I.G0)((0,I.G$)(m),new I.s$({})):w=Ae.identity(Ae.create()),_&&Ae.scale(w,w,[1/l,1/l,1]),E.setTransform({a:w[0],b:w[1],c:w[4],d:w[5],e:w[12]+u[0],f:w[13]+u[1]})}return h&&E&&(this.patternCache[h]=E),E}},{key:"getOrCreateGradient",value:function(n,r){var o=this.generateGradientKey(n),c=n.type,l=n.steps,u=n.min,d=n.width,h=n.height,p=n.angle,v=n.cx,m=n.cy,b=n.size;if(this.gradientCache[o])return this.gradientCache[o];var _=null;if(c===I.GL.LinearGradient){var S=(0,I.Rx)(u,d,h,p),E=S.x1,w=S.y1,C=S.x2,M=S.y2;_=r.createLinearGradient(E,w,C,M)}else if(c===I.GL.RadialGradient){var L=(0,I.o6)(u,d,h,v,m,b),R=L.x,j=L.y,z=L.r;_=r.createRadialGradient(R,j,0,R,j,z)}return _&&(l.forEach(function(H){var $=H.offset,dt=H.color;if($.unit===I.Cm.kPercentage){var gt;(gt=_)===null||gt===void 0||gt.addColorStop($.value/100,dt.toString())}}),this.gradientCache[o]=_),this.gradientCache[o]}},{key:"generateGradientKey",value:function(n){var r=n.type,o=n.min,c=n.width,l=n.height,u=n.steps,d=n.angle,h=n.cx,p=n.cy,v=n.size;return"gradient-".concat(r,"-").concat((d==null?void 0:d.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat((v==null?void 0:v.toString())||0,"-").concat(o[0],"-").concat(o[1],"-").concat(c,"-").concat(l,"-").concat(u.map(function(m){var b=m.offset,_=m.color;return"".concat(b).concat(_)}).join("-"))}},{key:"generatePatternKey",value:function(n){var r=n.image,o=n.repetition;if((0,Wt.Z)(r))return"pattern-".concat(r,"-").concat(o);if(r.nodeName==="rect")return"pattern-".concat(r.entity,"-").concat(o)}}])}();Hc.isSupportTile=!!I.jB.createCanvas();function Zp(t){if(!t.complete)return[0,0];var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,r=256;return[256,512].forEach(function(o){var c=Math.ceil(n/o),l=Math.ceil(e/o);c*l<1e3&&(r=o)}),[r,r]}var Ty=function(){function t(){(0,Yt.Z)(this,t)}return(0,T.Z)(t,[{key:"apply",value:function(n){var r=n.renderingService,o=n.renderingContext,c=n.imagePool,l=o.root.ownerDocument.defaultView,u=function(v,m,b){var _=v.parsedStyle,S=_.width,E=_.height;S&&!E?v.setAttribute("height",b/m*S):!S&&E&&v.setAttribute("width",m/b*E)},d=function(v){var m=v.target,b=m.nodeName,_=m.attributes;if(b===I.bn.IMAGE){var S=_.src,E=_.keepAspectRatio;c.getImageSync(S,m,function(w){var C=w.img,M=C.width,L=C.height;E&&u(m,M,L),m.renderable.dirty=!0,r.dirtify()})}},h=function(v){var m=v.target,b=v.attrName,_=v.prevValue,S=v.newValue;m.nodeName!==I.bn.IMAGE||b!=="src"||(_!==S&&c.releaseImage(_,m),(0,Wt.Z)(S)&&c.getOrCreateImage(S,m).then(function(E){var w=E.img,C=w.width,M=w.height;m.attributes.keepAspectRatio&&u(m,C,M),m.renderable.dirty=!0,r.dirtify()}).catch(function(){}))};r.hooks.init.tap(t.tag,function(){l.addEventListener(I.Dk.MOUNTED,d),l.addEventListener(I.Dk.ATTR_MODIFIED,h)}),r.hooks.destroy.tap(t.tag,function(){l.removeEventListener(I.Dk.MOUNTED,d),l.removeEventListener(I.Dk.ATTR_MODIFIED,h)})}}])}();Ty.tag="LoadImage";var AO=function(t){function e(){var n;(0,Yt.Z)(this,e);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=(0,F.Z)(this,e,[].concat(o)),n.name="image-loader",n}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"init",value:function(r){this.context.imagePool=new Hc(this.context,r),this.addRenderingPlugin(new Ty)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(I.F6);var hi=$f("renderState"),Oo=function(){function t(e){(0,Yt.Z)(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,hi,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Ae.create(),this.dprMatrix=Ae.create(),this.tmpMat4=Ae.create(),this.vec3a=we.Ue(),this.vec3b=we.Ue(),this.vec3c=we.Ue(),this.vec3d=we.Ue(),this.canvasRendererPluginOptions=e}return(0,T.Z)(t,[{key:"apply",value:function(n,r){var o=this;this.context=n;var c=this.context,l=c.config,u=c.camera,d=c.renderingService,h=c.renderingContext,p=c.rBushRoot,v=c.pathGeneratorFactory,m=l.renderer.getConfig().enableRenderingOptimization;l.renderer.getConfig().enableDirtyCheck=!1,l.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=p,this.pathGeneratorFactory=v;var b=n.contextService,_=h.root.ownerDocument.defaultView,S=function(L){var R=L.target,j=R.rBushNode;j!=null&&j.aabb&&o.removedRBushNodeAABBs.push(j.aabb)},E=function(L){var R=L.target,j=R.rBushNode;j.aabb&&o.removedRBushNodeAABBs.push(j.aabb)};d.hooks.init.tap(t.tag,function(){_.addEventListener(I.Dk.UNMOUNTED,S),_.addEventListener(I.Dk.CULLED,E);var M=b.getDPR(),L=l.width,R=l.height,j=b.getContext();o.clearRect(j,0,0,L*M,R*M,l.background)}),d.hooks.destroy.tap(t.tag,function(){_.removeEventListener(I.Dk.UNMOUNTED,S),_.removeEventListener(I.Dk.CULLED,E),o.renderQueue=[],o.removedRBushNodeAABBs=[],ko(o,hi)[hi]={restoreStack:[],prevObject:null,currentContext:null}});var w=function(){var L,R=b.getContext(),j=b.getDPR(),z=l.width,H=l.height,$=o.canvasRendererPluginOptions,dt=$.dirtyObjectNumThreshold,gt=$.dirtyObjectRatioThreshold,It=d.getStats(),rt=It.total,lt=It.rendered,pt=lt/rt;o.clearFullScreen=o.clearFullScreenLastFrame||!((L=_.context.renderingPlugins[1])!==null&&L!==void 0&&L.isFirstTimeRenderingFinished)||d.disableDirtyRectangleRendering()||lt>dt&&pt>gt,R&&(typeof R.resetTransform=="function"?R.resetTransform():R.setTransform(1,0,0,1,0,0),o.clearFullScreen&&o.clearRect(R,0,0,z*j,H*j,l.background))},C=function(L,R){for(var j=[L];j.length>0;){var z,H=j.pop();H.isVisible()&&!H.isCulled()&&(m?o.renderDisplayObjectOptimized(H,R,o.context,ko(o,hi)[hi],r):o.renderDisplayObject(H,R,o.context,ko(o,hi)[hi],r));for(var $=((z=H.sortable)===null||z===void 0||(z=z.sorted)===null||z===void 0?void 0:z.length)>0?H.sortable.sorted:H.childNodes,dt=$.length-1;dt>=0;dt--)j.push($[dt])}};d.hooks.endFrame.tap(t.tag,function(){if(w(),h.root.childNodes.length===0){o.clearFullScreenLastFrame=!0;return}m=l.renderer.getConfig().enableRenderingOptimization,ko(o,hi)[hi]={restoreStack:[],prevObject:null,currentContext:ko(o,hi)[hi].currentContext},ko(o,hi)[hi].currentContext.clear(),o.clearFullScreenLastFrame=!1;var M=b.getContext(),L=b.getDPR();if(Ae.fromScaling(o.dprMatrix,[L,L,1]),Ae.multiply(o.vpMatrix,o.dprMatrix,u.getOrthoMatrix()),o.clearFullScreen)m?(M.save(),C(h.root,M),M.restore()):C(h.root,M),o.removedRBushNodeAABBs=[];else{var R=o.safeMergeAABB.apply(o,[o.mergeDirtyAABBs(o.renderQueue)].concat((0,Re.Z)(o.removedRBushNodeAABBs.map(function(en){var rn=en.minX,We=en.minY,dn=en.maxX,yn=en.maxY,wn=new I.mN;return wn.setMinMax([rn,We,0],[dn,yn,0]),wn}))));if(o.removedRBushNodeAABBs=[],I.mN.isEmpty(R)){o.renderQueue=[];return}var j=o.convertAABB2Rect(R),z=j.x,H=j.y,$=j.width,dt=j.height,gt=we.fF(o.vec3a,[z,H,0],o.vpMatrix),It=we.fF(o.vec3b,[z+$,H,0],o.vpMatrix),rt=we.fF(o.vec3c,[z,H+dt,0],o.vpMatrix),lt=we.fF(o.vec3d,[z+$,H+dt,0],o.vpMatrix),pt=Math.min(gt[0],It[0],lt[0],rt[0]),bt=Math.min(gt[1],It[1],lt[1],rt[1]),Ht=Math.max(gt[0],It[0],lt[0],rt[0]),Rt=Math.max(gt[1],It[1],lt[1],rt[1]),jt=Math.floor(pt),oe=Math.floor(bt),Se=Math.ceil(Ht-pt),xe=Math.ceil(Rt-bt);M.save(),o.clearRect(M,jt,oe,Se,xe,l.background),M.beginPath(),M.rect(jt,oe,Se,xe),M.clip(),M.setTransform(o.vpMatrix[0],o.vpMatrix[1],o.vpMatrix[4],o.vpMatrix[5],o.vpMatrix[12],o.vpMatrix[13]);var Pe=l.renderer.getConfig(),Ke=Pe.enableDirtyRectangleRenderingDebug;Ke&&_.dispatchEvent(new I.Aw(I.$6.DIRTY_RECTANGLE,{dirtyRect:{x:jt,y:oe,width:Se,height:xe}}));var Ze=o.searchDirtyObjects(R);Ze.sort(function(en,rn){return en.sortable.renderOrder-rn.sortable.renderOrder}).forEach(function(en){en&&en.isVisible()&&!en.isCulled()&&o.renderDisplayObject(en,M,o.context,ko(o,hi)[hi],r)}),M.restore(),o.renderQueue.forEach(function(en){o.saveDirtyAABB(en)}),o.renderQueue=[]}ko(o,hi)[hi].restoreStack.forEach(function(){M.restore()}),ko(o,hi)[hi].restoreStack=[]}),d.hooks.render.tap(t.tag,function(M){o.clearFullScreen||o.renderQueue.push(M)})}},{key:"clearRect",value:function(n,r,o,c,l,u){n.clearRect(r,o,c,l),u&&(n.fillStyle=u,n.fillRect(r,o,c,l))}},{key:"renderDisplayObjectOptimized",value:function(n,r,o,c,l){var u=n.nodeName,d=!1,h=!1,p=this.context.styleRendererFactory[u],v=this.pathGeneratorFactory[u],m=n.parsedStyle.clipPath;if(m){d=!c.prevObject||!Ae.exactEquals(m.getWorldTransform(),c.prevObject.getWorldTransform()),d&&(this.applyWorldTransform(r,m),c.prevObject=null);var b=this.pathGeneratorFactory[m.nodeName];b&&(r.save(),h=!0,r.beginPath(),b(r,m.parsedStyle),r.closePath(),r.clip())}if(p){d=!c.prevObject||!Ae.exactEquals(n.getWorldTransform(),c.prevObject.getWorldTransform()),d&&this.applyWorldTransform(r,n);var _=!c.prevObject;if(!_){var S=c.prevObject.nodeName;u===I.bn.TEXT?_=S!==I.bn.TEXT:u===I.bn.IMAGE?_=S!==I.bn.IMAGE:_=S===I.bn.TEXT||S===I.bn.IMAGE}p.applyStyleToContext(r,n,_,c),c.prevObject=n}v&&(r.beginPath(),v(r,n.parsedStyle),u!==I.bn.LINE&&u!==I.bn.PATH&&u!==I.bn.POLYLINE&&r.closePath()),p&&p.drawToContext(r,n,ko(this,hi)[hi],this,l),h&&r.restore(),n.dirty(!1)}},{key:"renderDisplayObject",value:function(n,r,o,c,l){var u=n.nodeName,d=c.restoreStack[c.restoreStack.length-1];d&&!(n.compareDocumentPosition(d)&I.NB.DOCUMENT_POSITION_CONTAINS)&&(r.restore(),c.restoreStack.pop());var h=this.context.styleRendererFactory[u],p=this.pathGeneratorFactory[u],v=n.parsedStyle.clipPath;if(v){this.applyWorldTransform(r,v);var m=this.pathGeneratorFactory[v.nodeName];m&&(r.save(),c.restoreStack.push(n),r.beginPath(),m(r,v.parsedStyle),r.closePath(),r.clip())}h&&(this.applyWorldTransform(r,n),r.save(),this.applyAttributesToContext(r,n)),p&&(r.beginPath(),p(r,n.parsedStyle),u!==I.bn.LINE&&u!==I.bn.PATH&&u!==I.bn.POLYLINE&&r.closePath()),h&&(h.render(r,n.parsedStyle,n,o,this,l),r.restore()),n.dirty(!1)}},{key:"applyAttributesToContext",value:function(n,r){var o=r.parsedStyle,c=o.stroke,l=o.fill,u=o.opacity,d=o.lineDash,h=o.lineDashOffset;d&&n.setLineDash(d),(0,sn.Z)(h)||(n.lineDashOffset=h),(0,sn.Z)(u)||(n.globalAlpha*=u),!(0,sn.Z)(c)&&!Array.isArray(c)&&!c.isNone&&(n.strokeStyle=r.attributes.stroke),!(0,sn.Z)(l)&&!Array.isArray(l)&&!l.isNone&&(n.fillStyle=r.attributes.fill)}},{key:"convertAABB2Rect",value:function(n){var r=n.getMin(),o=n.getMax(),c=Math.floor(r[0]),l=Math.floor(r[1]),u=Math.ceil(o[0]),d=Math.ceil(o[1]),h=u-c,p=d-l;return{x:c,y:l,width:h,height:p}}},{key:"mergeDirtyAABBs",value:function(n){var r=new I.mN;return n.forEach(function(o){var c=o.getRenderBounds();r.add(c);var l=o.renderable.dirtyRenderBounds;l&&r.add(l)}),r}},{key:"searchDirtyObjects",value:function(n){var r=n.getMin(),o=(0,Ye.Z)(r,2),c=o[0],l=o[1],u=n.getMax(),d=(0,Ye.Z)(u,2),h=d[0],p=d[1],v=this.rBush.search({minX:c,minY:l,maxX:h,maxY:p});return v.map(function(m){var b=m.displayObject;return b})}},{key:"saveDirtyAABB",value:function(n){var r=n.renderable;r.dirtyRenderBounds||(r.dirtyRenderBounds=new I.mN);var o=n.getRenderBounds();o&&r.dirtyRenderBounds.update(o.center,o.halfExtents)}},{key:"applyWorldTransform",value:function(n,r,o){o?(Ae.copy(this.tmpMat4,r.getLocalTransform()),Ae.multiply(this.tmpMat4,o,this.tmpMat4),Ae.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Ae.copy(this.tmpMat4,r.getWorldTransform()),Ae.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),n.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var n=new I.mN,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return o.forEach(function(l){n.add(l)}),n}}])}();Oo.tag="CanvasRenderer";function Hp(t,e,n,r,o,c,l){var u,d;if(t.image.nodeName==="rect"){var h=t.image.parsedStyle,p=h.width,v=h.height;d=r.contextService.getDPR();var m=r.config.offscreenCanvas;u=c.offscreenCanvasCreator.getOrCreateCanvas(m),u.width=p*d,u.height=v*d;var b=c.offscreenCanvasCreator.getOrCreateContext(m),_={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach(function(E){o.renderDisplayObject(E,b,r,_,c)}),_.restoreStack.forEach(function(){b.restore()})}var S=l.getOrCreatePatternSync(e,t,n,u,d,e.getGeometryBounds().min,function(){e.dirty(),r.renderingService.dirtify()});return S}function Vp(t,e,n,r){var o;if(t.type===I.GL.LinearGradient||t.type===I.GL.RadialGradient){var c=e.getGeometryBounds(),l=c&&c.halfExtents[0]*2||1,u=c&&c.halfExtents[1]*2||1,d=c&&c.min||[0,0];o=r.getOrCreateGradient((0,Ji.Z)((0,Ji.Z)({type:t.type},t.value),{},{min:d,width:l,height:u}),n)}return o}var Wp=["shadowBlur","shadowOffsetX","shadowOffsetY"],TO=["lineCap","lineJoin","miterLimit"],Li={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},Xf={};function oi(t,e,n,r){var o=r.has(e)?r.get(e):Li[e];return o!==n&&(e==="lineDash"?t.setLineDash(n):t[e]=n,r.set(e,n)),o}var qf=function(){function t(e){(0,Yt.Z)(this,t),this.imagePool=e}return(0,T.Z)(t,[{key:"applyAttributesToContext",value:function(n,r){}},{key:"render",value:function(n,r,o,c,l,u){}},{key:"applyCommonStyleToContext",value:function(n,r,o,c){var l=o?Xf:c.prevObject.parsedStyle,u=r.parsedStyle;(o||u.opacity!==l.opacity)&&oi(n,"globalAlpha",(0,sn.Z)(u.opacity)?Li.globalAlpha:u.opacity,c.currentContext),(o||u.blend!==l.blend)&&oi(n,"globalCompositeOperation",(0,sn.Z)(u.blend)?Li.globalCompositeOperation:u.blend,c.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(n,r,o,c){var l=o?Xf:c.prevObject.parsedStyle,u=r.parsedStyle,d=u.lineWidth,h=d===void 0?Li.lineWidth:d,p=u.fill&&!u.fill.isNone,v=u.stroke&&!u.stroke.isNone&&h>0;if(v){if(o||r.attributes.stroke!==c.prevObject.attributes.stroke){var m=!(0,sn.Z)(u.stroke)&&!Array.isArray(u.stroke)&&!u.stroke.isNone?r.attributes.stroke:Li.strokeStyle;oi(n,"strokeStyle",m,c.currentContext)}(o||u.lineWidth!==l.lineWidth)&&oi(n,"lineWidth",(0,sn.Z)(u.lineWidth)?Li.lineWidth:u.lineWidth,c.currentContext),(o||u.lineDash!==l.lineDash)&&oi(n,"lineDash",u.lineDash||Li.lineDash,c.currentContext),(o||u.lineDashOffset!==l.lineDashOffset)&&oi(n,"lineDashOffset",(0,sn.Z)(u.lineDashOffset)?Li.lineDashOffset:u.lineDashOffset,c.currentContext);for(var b=0;b<TO.length;b++){var _=TO[b];(o||u[_]!==l[_])&&oi(n,_,(0,sn.Z)(u[_])?Li[_]:u[_],c.currentContext)}}if(p&&(o||r.attributes.fill!==c.prevObject.attributes.fill)){var S=!(0,sn.Z)(u.fill)&&!Array.isArray(u.fill)&&!u.fill.isNone?r.attributes.fill:Li.fillStyle;oi(n,"fillStyle",S,c.currentContext)}}},{key:"applyStyleToContext",value:function(n,r,o,c){var l=r.nodeName;this.applyCommonStyleToContext(n,r,o,c),l===I.bn.IMAGE||this.applyStrokeFillStyleToContext(n,r,o,c)}},{key:"applyShadowAndFilterStyleToContext",value:function(n,r,o,c){var l=r.parsedStyle;if(o){oi(n,"shadowColor",l.shadowColor.toString(),c.currentContext);for(var u=0;u<Wp.length;u++){var d=Wp[u];oi(n,d,l[d]||Li[d],c.currentContext)}}l.filter&&l.filter.length&&oi(n,"filter",r.attributes.filter,c.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(n,r,o,c){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(r){oi(n,"shadowColor",Li.shadowColor,c.currentContext);for(var u=0;u<Wp.length;u++){var d=Wp[u];oi(n,d,Li[d],c.currentContext)}}if(o)if(r&&l){var h=n.filter;!(0,sn.Z)(h)&&h.indexOf("drop-shadow")>-1&&oi(n,"filter",h.replace(/drop-shadow\([^)]*\)/,"").trim()||Li.filter,c.currentContext)}else oi(n,"filter",Li.filter,c.currentContext)}},{key:"fillToContext",value:function(n,r,o,c,l){var u=this,d=r.parsedStyle,h=d.fill,p=d.fillRule,v=null;if(Array.isArray(h)&&h.length>0)h.forEach(function(b){var _=oi(n,"fillStyle",Vp(b,r,n,u.imagePool),o.currentContext);v=v!=null?v:_,p?n.fill(p):n.fill()});else{if((0,I.R)(h)){var m=Hp(h,r,n,r.ownerDocument.defaultView.context,c,l,this.imagePool);m&&(n.fillStyle=m,v=!0)}p?n.fill(p):n.fill()}v!==null&&oi(n,"fillStyle",v,o.currentContext)}},{key:"strokeToContext",value:function(n,r,o,c,l){var u=this,d=r.parsedStyle.stroke,h=null;if(Array.isArray(d)&&d.length>0)d.forEach(function(m){var b=oi(n,"strokeStyle",Vp(m,r,n,u.imagePool),o.currentContext);h=h!=null?h:b,n.stroke()});else{if((0,I.R)(d)){var p=Hp(d,r,n,r.ownerDocument.defaultView.context,c,l,this.imagePool);if(p){var v=oi(n,"strokeStyle",p,o.currentContext);h=h!=null?h:v}}n.stroke()}h!==null&&oi(n,"strokeStyle",h,o.currentContext)}},{key:"drawToContext",value:function(n,r,o,c,l){var u,d=r.nodeName,h=r.parsedStyle,p=h.opacity,v=p===void 0?Li.globalAlpha:p,m=h.fillOpacity,b=m===void 0?Li.fillOpacity:m,_=h.strokeOpacity,S=_===void 0?Li.strokeOpacity:_,E=h.lineWidth,w=E===void 0?Li.lineWidth:E,C=h.fill&&!h.fill.isNone,M=h.stroke&&!h.stroke.isNone&&w>0;if(!(!C&&!M)){var L=!(0,sn.Z)(h.shadowColor)&&h.shadowBlur>0,R=h.shadowType==="inner",j=((u=h.fill)===null||u===void 0?void 0:u.alpha)===0,z=!!(h.filter&&h.filter.length),H=L&&M&&(d===I.bn.PATH||d===I.bn.LINE||d===I.bn.POLYLINE||j||R),$=null;if(C){H||this.applyShadowAndFilterStyleToContext(n,r,L,o);var dt=v*b;$=oi(n,"globalAlpha",dt,o.currentContext),this.fillToContext(n,r,o,c,l),H||this.clearShadowAndFilterStyleForContext(n,L,z,o)}if(M){var gt=!1,It=v*S,rt=oi(n,"globalAlpha",It,o.currentContext);if($=C?$:rt,H&&(this.applyShadowAndFilterStyleToContext(n,r,L,o),gt=!0,R)){var lt=n.globalCompositeOperation;n.globalCompositeOperation="source-atop",this.strokeToContext(n,r,o,c,l),n.globalCompositeOperation=lt,this.clearShadowAndFilterStyleForContext(n,L,z,o,!0)}this.strokeToContext(n,r,o,c,l),gt&&this.clearShadowAndFilterStyleForContext(n,L,z,o)}$!==null&&oi(n,"globalAlpha",$,o.currentContext)}}}])}(),Gp=function(t){function e(){return(0,Yt.Z)(this,e),(0,F.Z)(this,e,arguments)}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"render",value:function(r,o,c,l,u,d){var h=o.fill,p=o.fillRule,v=o.opacity,m=v===void 0?1:v,b=o.fillOpacity,_=b===void 0?1:b,S=o.stroke,E=o.strokeOpacity,w=E===void 0?1:E,C=o.lineWidth,M=C===void 0?1:C,L=o.lineCap,R=o.lineJoin,j=o.shadowType,z=o.shadowColor,H=o.shadowBlur,$=o.filter,dt=o.miterLimit,gt=h&&!h.isNone,It=S&&!S.isNone&&M>0,rt=(h==null?void 0:h.alpha)===0,lt=!!($&&$.length),pt=!(0,sn.Z)(z)&&H>0,bt=c.nodeName,Ht=j==="inner",Rt=It&&pt&&(bt===I.bn.PATH||bt===I.bn.LINE||bt===I.bn.POLYLINE||rt||Ht);gt&&(r.globalAlpha=m*_,Rt||Kl(c,r,pt),Cy(r,c,h,p,l,u,d,this.imagePool),Rt||this.clearShadowAndFilter(r,lt,pt)),It&&(r.globalAlpha=m*w,r.lineWidth=M,(0,sn.Z)(dt)||(r.miterLimit=dt),(0,sn.Z)(L)||(r.lineCap=L),(0,sn.Z)(R)||(r.lineJoin=R),Rt&&(Ht&&(r.globalCompositeOperation="source-atop"),Kl(c,r,!0),Ht&&(Kf(r,c,S,l,u,d,this.imagePool),r.globalCompositeOperation=Li.globalCompositeOperation,this.clearShadowAndFilter(r,lt,!0))),Kf(r,c,S,l,u,d,this.imagePool))}},{key:"clearShadowAndFilter",value:function(r,o,c){if(c&&(r.shadowColor="transparent",r.shadowBlur=0),o){var l=r.filter;!(0,sn.Z)(l)&&l.indexOf("drop-shadow")>-1&&(r.filter=l.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(qf);function Kl(t,e,n){var r=t.parsedStyle,o=r.filter,c=r.shadowColor,l=r.shadowBlur,u=r.shadowOffsetX,d=r.shadowOffsetY;o&&o.length&&(e.filter=t.style.filter),n&&(e.shadowColor=c.toString(),e.shadowBlur=l||0,e.shadowOffsetX=u||0,e.shadowOffsetY=d||0)}function Cy(t,e,n,r,o,c,l,u){var d=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(n)?n.forEach(function(h){t.fillStyle=Vp(h,e,t,u),d||(r?t.fill(r):t.fill())}):((0,I.R)(n)&&(t.fillStyle=Hp(n,e,t,o,c,l,u)),d||(r?t.fill(r):t.fill()))}function Kf(t,e,n,r,o,c,l){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(n)?n.forEach(function(d){t.strokeStyle=Vp(d,e,t,l),u||t.stroke()}):((0,I.R)(n)&&(t.strokeStyle=Hp(n,e,t,r,o,c,l)),u||t.stroke())}function mP(t,e){var n=(0,Ye.Z)(t,4),r=n[0],o=n[1],c=n[2],l=n[3],u=(0,Ye.Z)(e,4),d=u[0],h=u[1],p=u[2],v=u[3],m=Math.max(r,d),b=Math.max(o,h),_=Math.min(r+c,d+p),S=Math.min(o+l,h+v);return _<=m||S<=b?null:[m,b,_-m,S-b]}function CO(t,e){var n=we.fF(we.Ue(),[t[0],t[1],0],e),r=we.fF(we.Ue(),[t[0]+t[2],t[1],0],e),o=we.fF(we.Ue(),[t[0],t[1]+t[3],0],e),c=we.fF(we.Ue(),[t[0]+t[2],t[1]+t[3],0],e);return[Math.min(n[0],r[0],o[0],c[0]),Math.min(n[1],r[1],o[1],c[1]),Math.max(n[0],r[0],o[0],c[0])-Math.min(n[0],r[0],o[0],c[0]),Math.max(n[1],r[1],o[1],c[1])-Math.min(n[1],r[1],o[1],c[1])]}var yP=function(t){function e(){return(0,Yt.Z)(this,e),(0,F.Z)(this,e,arguments)}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"renderDownSampled",value:function(r,o,c,l){var u=l.src,d=l.imageCache;if(!d.downSampled){this.imagePool.createDownSampledImage(u,c).then(function(){c.ownerDocument&&(c.dirty(),c.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(h){console.error(h)});return}r.drawImage(d.downSampled,Math.floor(l.drawRect[0]),Math.floor(l.drawRect[1]),Math.ceil(l.drawRect[2]),Math.ceil(l.drawRect[3]))}},{key:"renderTile",value:function(r,o,c,l){var u=l.src,d=l.imageCache,h=l.imageRect,p=l.drawRect,v=d.size,m=r.getTransform(),b=m.a,_=m.b,S=m.c,E=m.d,w=m.e,C=m.f;if(r.resetTransform(),!(d!=null&&d.gridSize)){this.imagePool.createImageTiles(u,[],function(){c.ownerDocument&&(c.dirty(),c.ownerDocument.defaultView.context.renderingService.dirtify())},c).catch(function(pt){console.error(pt)});return}for(var M=[v[0]/h[2],v[1]/h[3]],L=[d.tileSize[0]/M[0],d.tileSize[1]/M[1]],R=[Math.floor((p[0]-h[0])/L[0]),Math.ceil((p[0]+p[2]-h[0])/L[0])],j=R[0],z=R[1],H=[Math.floor((p[1]-h[1])/L[1]),Math.ceil((p[1]+p[3]-h[1])/L[1])],$=H[0],dt=H[1],gt=$;gt<=dt;gt++)for(var It=j;It<=z;It++){var rt=d.tiles[gt][It];if(rt){var lt=[Math.floor(h[0]+rt.tileX*L[0]),Math.floor(h[1]+rt.tileY*L[1]),Math.ceil(L[0]),Math.ceil(L[1])];r.drawImage(rt.data,lt[0],lt[1],lt[2],lt[3])}}r.setTransform(b,_,S,E,w,C)}},{key:"render",value:function(r,o,c){var l=o.x,u=l===void 0?0:l,d=o.y,h=d===void 0?0:d,p=o.width,v=o.height,m=o.src,b=o.shadowColor,_=o.shadowBlur,S=this.imagePool.getImageSync(m,c),E=S==null?void 0:S.img,w=p,C=v;if(E){w||(w=E.width),C||(C=E.height);var M=!(0,sn.Z)(b)&&_>0;Kl(c,r,M);try{var L=c.ownerDocument.defaultView.getContextService().getDomElement(),R=L.width,j=L.height,z=r.getTransform(),H=z.a,$=z.b,dt=z.c,gt=z.d,It=z.e,rt=z.f,lt=Ae.fromValues(H,dt,0,0,$,gt,0,0,0,0,1,0,It,rt,0,1),pt=CO([u,h,w,C],lt),bt=mP([0,0,R,j],pt);if(!bt)return;if(!c.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){e.renderFull(r,o,c,{image:E,drawRect:[u,h,w,C]});return}var Ht=pt[2]/S.size[0];if(Ht<(S.downSamplingRate||.5)){this.renderDownSampled(r,o,c,{src:m,imageCache:S,drawRect:[u,h,w,C]});return}if(!Hc.isSupportTile){e.renderFull(r,o,c,{image:E,drawRect:[u,h,w,C]});return}this.renderTile(r,o,c,{src:m,imageCache:S,imageRect:pt,drawRect:bt})}catch(Rt){}}}},{key:"drawToContext",value:function(r,o,c,l,u){this.render(r,o.parsedStyle,o)}}],[{key:"renderFull",value:function(r,o,c,l){r.drawImage(l.image,Math.floor(l.drawRect[0]),Math.floor(l.drawRect[1]),Math.ceil(l.drawRect[2]),Math.ceil(l.drawRect[3]))}}])}(Gp),Xs=function(t){function e(){return(0,Yt.Z)(this,e),(0,F.Z)(this,e,arguments)}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"render",value:function(r,o,c,l,u,d){c.getBounds();var h=o.lineWidth,p=h===void 0?1:h,v=o.textAlign,m=v===void 0?"start":v,b=o.textBaseline,_=b===void 0?"alphabetic":b,S=o.lineJoin,E=S===void 0?"miter":S,w=o.miterLimit,C=w===void 0?10:w,M=o.letterSpacing,L=M===void 0?0:M,R=o.stroke,j=o.fill,z=o.fillRule,H=o.fillOpacity,$=H===void 0?1:H,dt=o.strokeOpacity,gt=dt===void 0?1:dt,It=o.opacity,rt=It===void 0?1:It,lt=o.metrics,pt=o.x,bt=pt===void 0?0:pt,Ht=o.y,Rt=Ht===void 0?0:Ht,jt=o.dx,oe=o.dy,Se=o.shadowColor,xe=o.shadowBlur,Pe=lt.font,Ke=lt.lines,Ze=lt.height,en=lt.lineHeight,rn=lt.lineMetrics;r.font=Pe,r.lineWidth=p,r.textAlign=m==="middle"?"center":m;var We=_;We==="alphabetic"&&(We="bottom"),r.lineJoin=E,(0,sn.Z)(C)||(r.miterLimit=C);var dn=Rt;_==="middle"?dn+=-Ze/2-en/2:_==="bottom"||_==="alphabetic"||_==="ideographic"?dn+=-Ze:(_==="top"||_==="hanging")&&(dn+=-en);var yn=bt+(jt||0);dn+=oe||0,Ke.length===1&&(We==="bottom"?(We="middle",dn-=.5*Ze):We==="top"&&(We="middle",dn+=.5*Ze)),r.textBaseline=We;var wn=!(0,sn.Z)(Se)&&xe>0;Kl(c,r,wn);for(var Sn=0;Sn<Ke.length;Sn++){var Pn=p/2+yn;dn+=en,!(0,sn.Z)(R)&&!R.isNone&&p&&this.drawLetterSpacing(r,c,Ke[Sn],rn[Sn],m,Pn,dn,L,j,z,$,R,gt,rt,!0,l,u,d),(0,sn.Z)(j)||this.drawLetterSpacing(r,c,Ke[Sn],rn[Sn],m,Pn,dn,L,j,z,$,R,gt,rt,!1,l,u,d)}}},{key:"drawLetterSpacing",value:function(r,o,c,l,u,d,h,p,v,m,b,_,S,E,w,C,M,L){if(p===0){w?this.strokeText(r,o,c,d,h,_,S,C,M,L):this.fillText(r,o,c,d,h,v,m,b,E,C,M,L);return}var R=r.textAlign;r.textAlign="left";var j=d;u==="center"||u==="middle"?j=d-l.width/2:(u==="right"||u==="end")&&(j=d-l.width);for(var z=Array.from(c),H=r.measureText(c).width,$=0,dt=0;dt<z.length;++dt){var gt=z[dt];w?this.strokeText(r,o,gt,j,h,_,S,C,M,L):this.fillText(r,o,gt,j,h,v,m,b,E,C,M,L),$=r.measureText(c.substring(dt+1)).width,j+=H-$+p,H=$}r.textAlign=R}},{key:"fillText",value:function(r,o,c,l,u,d,h,p,v,m,b,_){Cy(r,o,d,h,m,b,_,this.imagePool,!0);var S,E=!(0,sn.Z)(p)&&p!==1;E&&(S=r.globalAlpha,r.globalAlpha=p*v),r.fillText(c,l,u),E&&(r.globalAlpha=S)}},{key:"strokeText",value:function(r,o,c,l,u,d,h,p,v,m){Kf(r,o,d,p,v,m,this.imagePool,!0);var b,_=!(0,sn.Z)(h)&&h!==1;_&&(b=r.globalAlpha,r.globalAlpha=h),r.strokeText(c,l,u),_&&(r.globalAlpha=b)}},{key:"drawToContext",value:function(r,o,c,l,u){this.render(r,o.parsedStyle,o,o.ownerDocument.defaultView.context,l,u)}}])}(Gp),MO=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,Yt.Z)(this,e),n=(0,F.Z)(this,e),n.name="canvas-renderer",n.options=r,n}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"init",value:function(){var r,o=(0,Ji.Z)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),c=this.context.imagePool,l=new Gp(c),u=(r={},(0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)((0,fr.Z)(r,I.bn.CIRCLE,l),I.bn.ELLIPSE,l),I.bn.RECT,l),I.bn.IMAGE,new yP(c)),I.bn.TEXT,new Xs(c)),I.bn.LINE,l),I.bn.POLYLINE,l),I.bn.POLYGON,l),I.bn.PATH,l),I.bn.GROUP,void 0),(0,fr.Z)((0,fr.Z)((0,fr.Z)(r,I.bn.HTML,void 0),I.bn.MESH,void 0),I.bn.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=u,this.context.styleRendererFactory=u,this.addRenderingPlugin(new Oo(o))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(I.F6);var My=function(){function t(){(0,Yt.Z)(this,t)}return(0,T.Z)(t,[{key:"apply",value:function(n,r){var o=this,c=n.renderingService,l=n.renderingContext,u=n.config;this.context=n;var d=l.root.ownerDocument.defaultView,h=function(H){c.hooks.pointerMove.call(H)},p=function(H){c.hooks.pointerUp.call(H)},v=function(H){c.hooks.pointerDown.call(H)},m=function(H){c.hooks.pointerOver.call(H)},b=function(H){c.hooks.pointerOut.call(H)},_=function(H){c.hooks.pointerCancel.call(H)},S=function(H){c.hooks.pointerWheel.call(H)},E=function(H){c.hooks.click.call(H)},w=function(H){r.globalThis.document.addEventListener("pointermove",h,!0),H.addEventListener("pointerdown",v,!0),H.addEventListener("pointerleave",b,!0),H.addEventListener("pointerover",m,!0),r.globalThis.addEventListener("pointerup",p,!0),r.globalThis.addEventListener("pointercancel",_,!0)},C=function(H){H.addEventListener("touchstart",v,!0),H.addEventListener("touchend",p,!0),H.addEventListener("touchmove",h,!0),H.addEventListener("touchcancel",_,!0)},M=function(H){r.globalThis.document.addEventListener("mousemove",h,!0),H.addEventListener("mousedown",v,!0),H.addEventListener("mouseout",b,!0),H.addEventListener("mouseover",m,!0),r.globalThis.addEventListener("mouseup",p,!0)},L=function(H){r.globalThis.document.removeEventListener("pointermove",h,!0),H.removeEventListener("pointerdown",v,!0),H.removeEventListener("pointerleave",b,!0),H.removeEventListener("pointerover",m,!0),r.globalThis.removeEventListener("pointerup",p,!0),r.globalThis.removeEventListener("pointercancel",_,!0)},R=function(H){H.removeEventListener("touchstart",v,!0),H.removeEventListener("touchend",p,!0),H.removeEventListener("touchmove",h,!0),H.removeEventListener("touchcancel",_,!0)},j=function(H){r.globalThis.document.removeEventListener("mousemove",h,!0),H.removeEventListener("mousedown",v,!0),H.removeEventListener("mouseout",b,!0),H.removeEventListener("mouseover",m,!0),r.globalThis.removeEventListener("mouseup",p,!0)};c.hooks.init.tap(t.tag,function(){var z=o.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(z.style.msContentZooming="none",z.style.msTouchAction="none"):d.supportsPointerEvents&&(z.style.touchAction="none"),d.supportsPointerEvents?w(z):M(z),d.supportsTouchEvents&&C(z),u.useNativeClickEvent&&z.addEventListener("click",E,!0),z.addEventListener("wheel",S,{passive:!0,capture:!0})}),c.hooks.destroy.tap(t.tag,function(){var z=o.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(z.style.msContentZooming="",z.style.msTouchAction=""):d.supportsPointerEvents&&(z.style.touchAction=""),d.supportsPointerEvents?L(z):j(z),d.supportsTouchEvents&&R(z),u.useNativeClickEvent&&z.removeEventListener("click",E,!0),z.removeEventListener("wheel",S,!0)})}}])}();My.tag="DOMInteraction";var bP=function(t){function e(){var n;(0,Yt.Z)(this,e);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=(0,F.Z)(this,e,[].concat(o)),n.name="dom-interaction",n}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"init",value:function(){this.addRenderingPlugin(new My)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(I.F6);var _P="g-canvas-camera",Ly=function(){function t(){(0,Yt.Z)(this,t),this.displayObjectHTMLElementMap=new WeakMap}return(0,T.Z)(t,[{key:"joinTransformMatrix",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([n[0],n[1],n[4],n[5],n[12]+r[0],n[13]+r[1]].join(","),")")}},{key:"apply",value:function(n,r){var o=this,c=n.camera,l=n.renderingContext,u=n.renderingService;this.context=n;var d=l.root.ownerDocument.defaultView,h=d.context.eventService.nativeHTMLMap,p=function(w,C){C.style.transform=o.joinTransformMatrix(w.getWorldTransform(),w.getOrigin())},v=function(w){var C=w.target;if(C.nodeName===I.bn.HTML){o.$camera||(o.$camera=o.createCamera(c));var M=o.getOrCreateEl(C);o.$camera.appendChild(M),Object.keys(C.attributes).forEach(function(L){o.updateAttribute(L,C)}),p(C,M),h.set(M,C)}},m=function(w){var C=w.target;if(C.nodeName===I.bn.HTML&&o.$camera){var M=o.getOrCreateEl(C);M&&(M.remove(),h.delete(M))}},b=function(w){var C=w.target;if(C.nodeName===I.bn.HTML){var M=w.attrName;o.updateAttribute(M,C)}},_=function(w){var C=w.target,M=C.nodeName===I.bn.FRAGMENT?C.childNodes:[C];M.forEach(function(L){if(L.nodeName===I.bn.HTML){var R=o.getOrCreateEl(L);p(L,R)}})},S=function(){if(o.$camera){var w=o.context.config,C=w.width,M=w.height;o.$camera.parentElement.style.width="".concat(C||0,"px"),o.$camera.parentElement.style.height="".concat(M||0,"px")}};u.hooks.init.tap(t.tag,function(){d.addEventListener(I.$6.RESIZE,S),d.addEventListener(I.Dk.MOUNTED,v),d.addEventListener(I.Dk.UNMOUNTED,m),d.addEventListener(I.Dk.ATTR_MODIFIED,b),d.addEventListener(I.Dk.BOUNDS_CHANGED,_)}),u.hooks.endFrame.tap(t.tag,function(){o.$camera&&l.renderReasons.has(I.Rr.CAMERA_CHANGED)&&(o.$camera.style.transform=o.joinTransformMatrix(c.getOrthoMatrix()))}),u.hooks.destroy.tap(t.tag,function(){o.$camera&&o.$camera.remove(),d.removeEventListener(I.$6.RESIZE,S),d.removeEventListener(I.Dk.MOUNTED,v),d.removeEventListener(I.Dk.UNMOUNTED,m),d.removeEventListener(I.Dk.ATTR_MODIFIED,b),d.removeEventListener(I.Dk.BOUNDS_CHANGED,_)})}},{key:"createCamera",value:function(n){var r=this.context.config,o=r.document,c=r.width,l=r.height,u=this.context.contextService.getDomElement(),d=u.parentNode;if(d){var h=_P,p=d.querySelector("#".concat(h));if(!p){var v=(o||document).createElement("div");v.style.overflow="hidden",v.style.pointerEvents="none",v.style.position="absolute",v.style.left="0px",v.style.top="0px",v.style.width="".concat(c||0,"px"),v.style.height="".concat(l||0,"px");var m=(o||document).createElement("div");p=m,m.id=h,m.style.position="absolute",m.style.left="".concat(u.offsetLeft||0,"px"),m.style.top="".concat(u.offsetTop||0,"px"),m.style.transformOrigin="left top",m.style.transform=this.joinTransformMatrix(n.getOrthoMatrix()),m.style.pointerEvents="none",m.style.width="100%",m.style.height="100%",v.appendChild(m),d.appendChild(v)}return p}return null}},{key:"getOrCreateEl",value:function(n){var r=this.context.config.document,o=this.displayObjectHTMLElementMap.get(n);return o||(o=(r||document).createElement("div"),n.parsedStyle.$el=o,this.displayObjectHTMLElementMap.set(n,o),n.id&&(o.id=n.id),n.name&&o.setAttribute("name",n.name),n.className&&(o.className=n.className),o.style.position="absolute",o.style["will-change"]="transform",o.style.transform=this.joinTransformMatrix(n.getWorldTransform(),n.getOrigin())),o}},{key:"updateAttribute",value:function(n,r){var o=this.getOrCreateEl(r);switch(n){case"innerHTML":var c=r.parsedStyle.innerHTML;(0,Wt.Z)(c)?o.innerHTML=c:(o.innerHTML="",o.appendChild(c));break;case"x":o.style.left="".concat(r.parsedStyle.x,"px");break;case"y":o.style.top="".concat(r.parsedStyle.y,"px");break;case"transformOrigin":var l=r.parsedStyle.transformOrigin;o.style["transform-origin"]="".concat(l[0].buildCSSText(null,null,"")," ").concat(l[1].buildCSSText(null,null,""));break;case"width":var u=r.parsedStyle.width;o.style.width=(0,ie.Z)(u)?"".concat(u,"px"):u.toString();break;case"height":var d=r.parsedStyle.height;o.style.height=(0,ie.Z)(d)?"".concat(d,"px"):d.toString();break;case"zIndex":var h=r.parsedStyle.zIndex;o.style["z-index"]="".concat(h);break;case"visibility":var p=r.parsedStyle.visibility;o.style.visibility=p;break;case"pointerEvents":var v=r.parsedStyle.pointerEvents,m=v===void 0?"auto":v;o.style.pointerEvents=m;break;case"opacity":var b=r.parsedStyle.opacity;o.style.opacity="".concat(b);break;case"fill":var _=r.parsedStyle.fill,S="";(0,I.qA)(_)?_.isNone?S="transparent":S=r.getAttribute("fill"):Array.isArray(_)?S=r.getAttribute("fill"):(0,I.R)(_),o.style.background=S;break;case"stroke":var E=r.parsedStyle.stroke,w="";(0,I.qA)(E)?E.isNone?w="transparent":w=r.getAttribute("stroke"):Array.isArray(E)?w=r.getAttribute("stroke"):(0,I.R)(E),o.style["border-color"]=w,o.style["border-style"]="solid";break;case"lineWidth":var C=r.parsedStyle.lineWidth;o.style["border-width"]="".concat(C||0,"px");break;case"lineDash":o.style["border-style"]="dashed";break;case"filter":var M=r.style.filter;o.style.filter=M;break;default:!(0,sn.Z)(r.style[n])&&r.style[n]!==""&&(o.style[n]=r.style[n])}}}])}();Ly.tag="HTMLRendering";var xP=function(t){function e(){var n;(0,Yt.Z)(this,e);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=(0,F.Z)(this,e,[].concat(o)),n.name="html-renderer",n}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"init",value:function(){this.addRenderingPlugin(new Ly)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(I.F6);var Py=function(){function t(e){(0,Yt.Z)(this,t),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return(0,T.Z)(t,[{key:"init",value:function(){var n=this.canvasConfig,r=n.container,o=n.canvas;if(o)this.$canvas=o,r&&o.parentElement!==r&&r.appendChild(o),this.$container=o.parentElement,this.canvasConfig.container=this.$container;else if(r&&(this.$container=(0,Wt.Z)(r)?document.getElementById(r):r,this.$container)){var c=document.createElement("canvas");this.$container.appendChild(c),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=c}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(n,r){var o=this.canvasConfig.devicePixelRatio;this.dpr=o,this.$canvas&&(this.$canvas.width=this.dpr*n,this.$canvas.height=this.dpr*r,(0,I.$p)(this.$canvas,n,r)),this.renderingContext.renderReasons.add(I.Rr.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(n){this.$container&&this.$container.style&&(this.$container.style.cursor=n)}},{key:"toDataURL",value:function(){var e=(0,Zc.Z)((0,co.Z)().mark(function r(){var o,c,l,u=arguments;return(0,co.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=u.length>0&&u[0]!==void 0?u[0]:{},c=o.type,l=o.encoderOptions,d.abrupt("return",this.context.canvas.toDataURL(c,l));case 1:case"end":return d.stop()}},r,this)}));function n(){return e.apply(this,arguments)}return n}()}])}(),LO=function(t){function e(){var n;(0,Yt.Z)(this,e);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=(0,F.Z)(this,e,[].concat(o)),n.name="canvas-context-register",n}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"init",value:function(){this.context.ContextService=Py}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(I.F6),Iy=function(t){function e(n){var r;return(0,Yt.Z)(this,e),r=(0,F.Z)(this,e,[n]),r.registerPlugin(new LO),r.registerPlugin(new AO),r.registerPlugin(new Ba),r.registerPlugin(new MO),r.registerPlugin(new bP),r.registerPlugin(new EO),r.registerPlugin(new xP),r}return(0,Lt.Z)(e,t),(0,T.Z)(e)}(I.I8),Ry=k(44078);var PO=function(){function t(e){(0,Yt.Z)(this,t),this.dragndropPluginOptions=e}return(0,T.Z)(t,[{key:"apply",value:function(n){var r=this,o=n.renderingService,c=n.renderingContext,l=c.root.ownerDocument,u=l.defaultView,d=function(p){var v=p.target,m=v===l,b=m&&r.dragndropPluginOptions.isDocumentDraggable?l:v.closest&&v.closest("[draggable=true]");if(b){var _=!1,S=p.timeStamp,E=[p.clientX,p.clientY],w=null,C=[p.clientX,p.clientY],M=function(){var R=(0,Zc.Z)((0,co.Z)().mark(function j(z){var H,$,dt,gt,It,rt;return(0,co.Z)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(_){lt.next=2;break}if(H=z.timeStamp-S,$=(0,Ry.y)([z.clientX,z.clientY],E),!(H<=r.dragndropPluginOptions.dragstartTimeThreshold||$<=r.dragndropPluginOptions.dragstartDistanceThreshold)){lt.next=1;break}return lt.abrupt("return");case 1:z.type="dragstart",b.dispatchEvent(z),_=!0;case 2:if(z.type="drag",z.dx=z.clientX-C[0],z.dy=z.clientY-C[1],b.dispatchEvent(z),C=[z.clientX,z.clientY],m){lt.next=4;break}return dt=r.dragndropPluginOptions.overlap==="pointer"?[z.canvasX,z.canvasY]:v.getBounds().center,lt.next=3,l.elementsFromPoint(dt[0],dt[1]);case 3:gt=lt.sent,It=gt[gt.indexOf(v)+1],rt=(It==null?void 0:It.closest("[droppable=true]"))||(r.dragndropPluginOptions.isDocumentDroppable?l:null),w!==rt&&(w&&(z.type="dragleave",z.target=w,w.dispatchEvent(z)),rt&&(z.type="dragenter",z.target=rt,rt.dispatchEvent(z)),w=rt,w&&(z.type="dragover",z.target=w,w.dispatchEvent(z)));case 4:case"end":return lt.stop()}},j)}));return function(z){return R.apply(this,arguments)}}();u.addEventListener("pointermove",M);var L=function(j){if(_){j.detail={preventClick:!0};var z=j.clone();w&&(z.type="drop",z.target=w,w.dispatchEvent(z)),z.type="dragend",b.dispatchEvent(z),_=!1}u.removeEventListener("pointermove",M)};v.addEventListener("pointerup",L,{once:!0}),v.addEventListener("pointerupoutside",L,{once:!0})}};o.hooks.init.tap(t.tag,function(){u.addEventListener("pointerdown",d)}),o.hooks.destroy.tap(t.tag,function(){u.removeEventListener("pointerdown",d)})}}])}();PO.tag="Dragndrop";var ky=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,Yt.Z)(this,e),n=(0,F.Z)(this,e),n.name="dragndrop",n.options=r,n}return(0,Lt.Z)(e,t),(0,T.Z)(e,[{key:"init",value:function(){this.addRenderingPlugin(new PO((0,Ji.Z)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(r){Object.assign(this.plugins[0].dragndropPluginOptions,r)}}])}(I.F6);function IO(t,e,n){var r;return function(){var o=this,c=arguments,l=function(){r=null,n||t.apply(o,c)},u=n&&!r;clearTimeout(r),r=setTimeout(l,e),u&&t.apply(o,c)}}var RO=IO,pr=function(t,e,n){for(var r=0,o=(0,Wt.Z)(e)?e.split("."):e;t&&r<o.length;)t=t[o[r++]];return t===void 0||r<o.length?n:t};class kO extends Map{constructor(e,n=$p){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,o]of e)this.set(r,o)}get(e){return super.get(Qf(this,e))}has(e){return super.has(Qf(this,e))}set(e,n){return super.set(Dy(this,e),n)}delete(e){return super.delete(Fy(this,e))}}class SP extends null{constructor(e,n=$p){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Qf(this,e))}add(e){return super.add(Dy(this,e))}delete(e){return super.delete(Fy(this,e))}}function Qf({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Dy({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Fy({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function $p(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Vc(t){return t}function Nr(t,...e){return qs(t,Vc,Vc,e)}function Yp(t,...e){return qs(t,Array.from,Vc,e)}function Ny(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(o=>o.pop().map(([c,l])=>[...o,c,l]));return t}function OP(t,...e){return Ny(Yp(t,...e),e)}function EP(t,e,...n){return Ny(Ql(t,e,...n),n)}function Xp(t,e,...n){return qs(t,Vc,e,n)}function Ql(t,e,...n){return qs(t,Array.from,e,n)}function wP(t,...e){return qs(t,identity,Jf,e)}function AP(t,...e){return qs(t,Array.from,Jf,e)}function Jf(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function qs(t,e,n,r){return function o(c,l){if(l>=r.length)return n(c);const u=new kO,d=r[l++];let h=-1;for(const p of c){const v=d(p,++h,c),m=u.get(v);m?m.push(p):u.set(v,[p])}for(const[p,v]of u)u.set(p,o(v,l));return e(u)}(t,0)}var Wi=k(5199),DO=function(t){return typeof t=="object"&&t!==null},to=DO,qp=k(95456),Jl=function(t){if(!to(t)||!(0,qp.Z)(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},_i=Jl,By=5;function jy(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function tu(t,e,n,r){n=n||0,r=r||By;for(var o in e)if(jy(e,o)){var c=e[o];c!==null&&_i(c)?(_i(t[o])||(t[o]={}),n<r?tu(t[o],c,n+1,r):t[o]=e[o]):(0,Wi.Z)(c)?(t[o]=[],t[o]=t[o].concat(c)):c!==void 0&&(t[o]=c)}}var FO=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)tu(t,e[r]);return t},an=FO,zy=function(t){return(0,sn.Z)(t)?"":t.toString()},Uy=function(t){var e=zy(t);return e.charAt(0).toLowerCase()+e.substring(1)},td=Uy;function NO({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Zy({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function BO({map:t,initKey:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function jO(t){return typeof t=="object"?t.valueOf():t}class Hy extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=jO,e!==null)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(NO({map:this.map,initKey:this.initKey},e))}has(e){return super.has(NO({map:this.map,initKey:this.initKey},e))}set(e,n){return super.set(Zy({map:this.map,initKey:this.initKey},e),n)}delete(e){return super.delete(BO({map:this.map,initKey:this.initKey},e))}}class eu{constructor(e){this.options=an({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=an({},this.options,e),this.rescale(e)}rescale(e){}}const Wc=Symbol("defaultUnknown");function Kp(t,e,n){for(let r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function Qp(t){const{value:e,from:n,to:r,mapper:o,notFoundReturn:c}=t;let l=o.get(e);if(l===void 0){if(c!==Wc)return c;l=n.push(e)-1,o.set(e,l)}return r[l%r.length]}function Vy(t){return t instanceof Date?e=>`${e}`:typeof t=="object"?e=>JSON.stringify(e):e=>e}class ed extends eu{getDefaultOptions(){return{domain:[],range:[],unknown:Wc}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&Kp(this.domainIndexMap,this.getDomain(),this.domainKey),Qp({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&Kp(this.rangeIndexMap,this.getRange(),this.rangeKey),Qp({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=Vy(n),this.rangeKey=Vy(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new ed(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:n}=this.options;return this.sortedDomain=n?[...e].sort(n):e,this.sortedDomain}}function zO(t){const e=Math.min(...t);return t.map(n=>n/e)}function UO(t,e){const n=t.length,r=e-n;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,e):t}function ZO(t){return Math.round(t*1e12)/1e12}function HO(t){const{domain:e,range:n,paddingOuter:r,paddingInner:o,flex:c,round:l,align:u}=t,d=e.length,h=UO(c,d),[p,v]=n,m=v-p,b=2/d*r+1-1/d*o,_=m/b,S=_*o/d,E=_-d*S,w=zO(h),C=w.reduce((It,rt)=>It+rt),M=E/C,L=new Hy(e.map((It,rt)=>{const lt=w[rt]*M;return[It,l?Math.floor(lt):lt]})),R=new Hy(e.map((It,rt)=>{const pt=w[rt]*M+S;return[It,l?Math.floor(pt):pt]})),j=Array.from(R.values()).reduce((It,rt)=>It+rt),H=(m-(j-j/d*o))*u,$=p+H;let dt=l?Math.round($):$;const gt=new Array(d);for(let It=0;It<d;It+=1){gt[It]=ZO(dt);const rt=e[It];dt+=R.get(rt)}return{valueBandWidth:L,valueStep:R,adjustedRange:gt}}function VO(t){var e;const{domain:n}=t,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=t.flex)===null||e===void 0)&&e.length))return HO(t);const{range:c,paddingOuter:l,paddingInner:u,round:d,align:h}=t;let p,v,m=c[0];const _=c[1]-m,S=l*2,E=r-u;p=_/Math.max(1,S+E),d&&(p=Math.floor(p)),m+=(_-p*(r-u))*h,v=p*(1-u),d&&(m=Math.round(m),v=Math.round(v));const w=new Array(r).fill(0).map((C,M)=>m+M*p);return{valueStep:p,valueBandWidth:v,adjustedRange:w}}class is extends ed{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:Wc,flex:[]}}constructor(e){super(e)}clone(){return new is(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:n}=this.options;return e>0?e:n}getPaddingOuter(){const{padding:e,paddingOuter:n}=this.options;return e>0?e:n}rescale(){super.rescale();const{align:e,domain:n,range:r,round:o,flex:c}=this.options,{adjustedRange:l,valueBandWidth:u,valueStep:d}=VO({align:e,range:r,round:o,flex:c,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=d,this.valueBandWidth=u,this.adjustedRange=l}}const Jp=Math.sqrt(50),nd=Math.sqrt(10),t0=Math.sqrt(2);function rd(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),c=r/Fi(10,o);return o>=0?(c>=Jp?10:c>=nd?5:c>=t0?2:1)*Fi(10,o):-Fi(10,-o)/(c>=Jp?10:c>=nd?5:c>=t0?2:1)}function e0(t,e,n){const r=Math.abs(e-t)/Math.max(0,n);let o=Fi(10,Math.floor(Math.log(r)/Math.LN10));const c=r/o;return c>=Jp?o*=10:c>=nd?o*=5:c>=t0&&(o*=2),e<t?-o:o}const os=(t,e,n)=>{let r,o,c=t,l=e;if(c===l&&n>0)return[c];let u=rd(c,l,n);if(u===0||!Number.isFinite(u))return[];if(u>0){c=Math.ceil(c/u),l=Math.floor(l/u),o=new Array(r=Math.ceil(l-c+1));for(let d=0;d<r;d+=1)o[d]=(c+d)*u}else{u=-u,c=Math.ceil(c*u),l=Math.floor(l*u),o=new Array(r=Math.ceil(l-c+1));for(let d=0;d<r;d+=1)o[d]=(c+d)/u}return o};class nu extends eu{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:os}}map(e){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(e){const[n]=this.options.range;return e===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:e,domain:n,tickCount:r}=this.options,[o,c]=n;return!(0,ie.Z)(o)||!(0,ie.Z)(c)?[]:e(o,c,r)}clone(){return new nu(this.options)}}var WO=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};function Wy(t){var e;let n=t;for(;n;){if(((e=n.attributes)===null||e===void 0?void 0:e.class)==="view")return n;n=n.parentNode}return null}function Gy(t,e){const n=e!=null?e:Wy(t).__data__,r=t.__data__,{markKey:o,index:c,seriesIndex:l}=r,{markState:u}=n,d=Array.from(u.keys()).find(h=>h.key===o);if(d)return l?l.map(h=>d.data[h]):d.data[c]}function jD(t){const e=Wy(t).__data__,{scale:n}=e;return n0(n,t.__data__)}function n0(t,e){const{color:n,series:r,facet:o=!1}=t,{color:c,series:l}=e,u=d=>d&&d.invert&&!(d instanceof is)&&!(d instanceof nu);if(u(r))return r.clone().invert(l);if(l&&r instanceof is&&r.invert(l)!==c&&!o)return r.invert(l);if(u(n)){const d=n.invert(c);return Array.isArray(d)?null:d}return null}function Do(t){return t}function r0(t){return t.reduce((e,n)=>(r,...o)=>n(e(r,...o),...o),Do)}function ru(t){return t.reduce((e,n)=>r=>WO(this,void 0,void 0,function*(){const o=yield e(r);return n(o)}),Do)}function i0(t){return t.replace(/( |^)[a-z]/g,e=>e.toUpperCase())}function Gc(t=""){throw new Error(t)}function o0(t,e){const{attributes:n}=e,r=new Set(["id","className"]);for(const[o,c]of Object.entries(n))r.has(o)||t.attr(o,c)}function Ur(t){return t!=null&&!Number.isNaN(t)}function zD(t,e){return t+(e-t)*Math.random()}function $y(t){const e=new Map;return n=>{if(e.has(n))return e.get(n);const r=t(n);return e.set(n,r),r}}function a0(t,e){const{transform:n}=t.style,o=(c=>c==="none"||c===void 0)(n)?"":n;t.style.transform=`${o} ${e}`.trimStart()}function xn(t,e){return Yy(t,e)||{}}function Yy(t,e){const n=Object.entries(t||{}).filter(([r])=>r.startsWith(e)).map(([r,o])=>[td(r.replace(e,"").trim()),o]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function TP(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[`${e}${upperFirst(n)}`,r]))}function GO(t,e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.find(r=>n.startsWith(r))))}function iu(t,...e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.every(r=>!n.startsWith(r))))}function Xy(t,e){if(t===void 0)return null;if(typeof t=="number")return t;const n=+t.replace("%","");return Number.isNaN(n)?null:n/100*e}function $c(t){return typeof t=="object"&&!(t instanceof Date)&&t!==null&&!Array.isArray(t)}function ma(t){return t===null||t===!1}function s0(t,e,n=5,r=0){if(!(r>=n)){for(const o of Object.keys(e)){const c=e[o];!_i(c)||!_i(t[o])?t[o]=c:s0(t[o],c,n,r+1)}return t}}function Gn(t){return new li([t],null,t,t.ownerDocument)}class li{constructor(e=null,n=null,r=null,o=null,c=[null,null,null,null,null],l=[],u=[]){this._elements=Array.from(e),this._data=n,this._parent=r,this._document=o,this._enter=c[0],this._update=c[1],this._exit=c[2],this._merge=c[3],this._split=c[4],this._transitions=l,this._facetElements=u}selectAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new li(n,null,this._elements[0],this._document)}selectFacetAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new li(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(e){const n=typeof e=="string"?this._parent.querySelectorAll(e)[0]||null:e;return new li([n],null,n,this._document)}append(e){const n=typeof e=="function"?e:()=>this.createElement(e),r=[];if(this._data!==null){for(let o=0;o<this._data.length;o++){const c=this._data[o],[l,u]=Array.isArray(c)?c:[c,null],d=n(l,o);d.__data__=l,u!==null&&(d.__fromElements__=u),this._parent.appendChild(d),r.push(d)}return new li(r,null,this._parent,this._document)}else{for(let o=0;o<this._elements.length;o++){const c=this._elements[o],l=c.__data__,u=n(l,o);c.appendChild(u),r.push(u)}return new li(r,null,r[0],this._document)}}maybeAppend(e,n,r){const o=this._elements[0],c=o.getElementById(e);if(c)return new li([c],null,this._parent,this._document);const l=typeof n=="string"?this.createElement(n):n();return l.id=e,r&&(l.className=r),o.appendChild(l),new li([l],null,this._parent,this._document)}data(e,n=o=>o,r=()=>null){const o=[],c=[],l=new Set(this._elements),u=[],d=new Set,h=new Map(this._elements.map((b,_)=>[n(b.__data__,_),b])),p=new Map(this._facetElements.map((b,_)=>[n(b.__data__,_),b])),v=Nr(this._elements,b=>r(b.__data__));for(let b=0;b<e.length;b++){const _=e[b],S=n(_,b),E=r(_,b);if(h.has(S)){const w=h.get(S);w.__data__=_,w.__facet__=!1,c.push(w),l.delete(w),h.delete(S)}else if(p.has(S)){const w=p.get(S);w.__data__=_,w.__facet__=!0,c.push(w),p.delete(S)}else if(v.has(S)){const w=v.get(S);u.push([_,w]);for(const C of w)l.delete(C);v.delete(S)}else if(h.has(E)){const w=h.get(E);w.__toData__?w.__toData__.push(_):w.__toData__=[_],d.add(w),l.delete(w)}else o.push(_)}const m=[new li([],o,this._parent,this._document),new li(c,null,this._parent,this._document),new li(l,null,this._parent,this._document),new li([],u,this._parent,this._document),new li(d,null,this._parent,this._document)];return new li(this._elements,null,this._parent,this._document,m)}merge(e){const n=[...this._elements,...e._elements],r=[...this._transitions,...e._transitions];return new li(n,null,this._parent,this._document,void 0,r)}createElement(e){if(this._document)return this._document.createElement(e,{});const n=li.registry[e];return n?new n:Gc(`Unknown node type: ${e}`)}join(e=l=>l,n=l=>l,r=l=>l.remove(),o=l=>l,c=l=>l.remove()){const l=e(this._enter),u=n(this._update),d=r(this._exit),h=o(this._merge),p=c(this._split);return u.merge(l).merge(d).merge(h).merge(p)}remove(){for(let e=0;e<this._elements.length;e++){const n=this._transitions[e];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(o=>o.finished)).then(()=>{this._elements[e].remove()})}else this._elements[e].remove()}return new li([],null,this._parent,this._document,void 0,this._transitions)}each(e){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],o=r.__data__;e(o,n,r)}return this}attr(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(o,c,l){n!==void 0&&(l[e]=r(o,c,l))})}style(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(o,c,l){n!==void 0&&(l.style[e]=r(o,c,l))})}transition(e){const n=typeof e!="function"?()=>e:e,{_transitions:r}=this;return this.each(function(o,c,l){r[c]=n(o,c,l)})}on(e,n){return this.each(function(r,o,c){c.addEventListener(e,n)}),this}call(e,...n){return e(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}li.registry={g:I.ZA,rect:I.UL,circle:I.Cd,path:I.y$,text:I.xv,ellipse:I.Pj,image:I.Ee,line:I.x1,polygon:I.mg,polyline:I.aH,html:I.k9};const Cr={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"},qy={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};function CP(t,e){qy[t]=e}class xi extends Error{constructor(e,n,r){super(e),this.position=n,this.token=r,this.name="ExpressionError"}}var Qn;(function(t){t[t.STRING=0]="STRING",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN",t[t.NULL=3]="NULL",t[t.IDENTIFIER=4]="IDENTIFIER",t[t.OPERATOR=5]="OPERATOR",t[t.FUNCTION=6]="FUNCTION",t[t.DOT=7]="DOT",t[t.BRACKET_LEFT=8]="BRACKET_LEFT",t[t.BRACKET_RIGHT=9]="BRACKET_RIGHT",t[t.PAREN_LEFT=10]="PAREN_LEFT",t[t.PAREN_RIGHT=11]="PAREN_RIGHT",t[t.COMMA=12]="COMMA",t[t.QUESTION=13]="QUESTION",t[t.COLON=14]="COLON",t[t.DOLLAR=15]="DOLLAR"})(Qn||(Qn={}));const $O=new Set([32,9,10,13]),YO=new Set([43,45,42,47,37,33,38,124,61,60,62]),Ky=new Map([["true",Qn.BOOLEAN],["false",Qn.BOOLEAN],["null",Qn.NULL]]),c0=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),XO=new Map([[46,Qn.DOT],[91,Qn.BRACKET_LEFT],[93,Qn.BRACKET_RIGHT],[40,Qn.PAREN_LEFT],[41,Qn.PAREN_RIGHT],[44,Qn.COMMA],[63,Qn.QUESTION],[58,Qn.COLON],[36,Qn.DOLLAR]]),Qy=new Map;for(const[t,e]of XO.entries())Qy.set(t,{type:e,value:String.fromCharCode(t)});function ou(t){return t>=48&&t<=57}function l0(t){return t>=97&&t<=122||t>=65&&t<=90||t===95}function id(t){return l0(t)||ou(t)}function qO(t){return YO.has(t)}var Gr;(function(t){t[t.Program=0]="Program",t[t.Literal=1]="Literal",t[t.Identifier=2]="Identifier",t[t.MemberExpression=3]="MemberExpression",t[t.CallExpression=4]="CallExpression",t[t.BinaryExpression=5]="BinaryExpression",t[t.UnaryExpression=6]="UnaryExpression",t[t.ConditionalExpression=7]="ConditionalExpression"})(Gr||(Gr={}));const KO=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),u0={type:Gr.Literal,value:null},QO={type:Gr.Literal,value:!0},od={type:Gr.Literal,value:!1},Jy=t=>{let e=0;const n=t.length,r=()=>e>=n?null:t[e],o=()=>t[e++],c=v=>{const m=r();return m!==null&&m.type===v},l=v=>v.type===Qn.OPERATOR?KO.get(v.value)||-1:v.type===Qn.DOT||v.type===Qn.BRACKET_LEFT?9:v.type===Qn.QUESTION?1:-1,u=v=>{let m,b;if(o().type===Qn.DOT){if(!c(Qn.IDENTIFIER)){const S=r();throw new xi("Expected property name",e,S?S.value:"<end of input>")}const _=o();m={type:Gr.Identifier,name:_.value},b=!1}else{if(m=h(0),!c(Qn.BRACKET_RIGHT)){const _=r();throw new xi("Expected closing bracket",e,_?_.value:"<end of input>")}o(),b=!0}return{type:Gr.MemberExpression,object:v,property:m,computed:b}},d=()=>{const v=r();if(!v)throw new xi("Unexpected end of input",e,"<end of input>");if(v.type===Qn.OPERATOR&&(v.value==="!"||v.value==="-")){o();const m=d();return{type:Gr.UnaryExpression,operator:v.value,argument:m,prefix:!0}}switch(v.type){case Qn.NUMBER:return o(),{type:Gr.Literal,value:Number(v.value)};case Qn.STRING:return o(),{type:Gr.Literal,value:v.value};case Qn.BOOLEAN:return o(),v.value==="true"?QO:od;case Qn.NULL:return o(),u0;case Qn.IDENTIFIER:return o(),{type:Gr.Identifier,name:v.value};case Qn.FUNCTION:return(()=>{const m=o(),b=[];if(!c(Qn.PAREN_LEFT)){const _=r();throw new xi("Expected opening parenthesis after function name",e,_?_.value:"<end of input>")}for(o();;){if(c(Qn.PAREN_RIGHT)){o();break}if(!r()){const S=r();throw new xi("Expected closing parenthesis",e,S?S.value:"<end of input>")}if(b.length>0){if(!c(Qn.COMMA)){const S=r();throw new xi("Expected comma between function arguments",e,S?S.value:"<end of input>")}o()}const _=h(0);b.push(_)}return{type:Gr.CallExpression,callee:{type:Gr.Identifier,name:m.value},arguments:b}})();case Qn.PAREN_LEFT:{o();const m=h(0);if(!c(Qn.PAREN_RIGHT)){const b=r();throw new xi("Expected closing parenthesis",e,b?b.value:"<end of input>")}return o(),m}default:throw new xi(`Unexpected token: ${v.type}`,e,v.value)}},h=(v=0)=>{let m=d();for(;e<n;){const b=t[e],_=l(b);if(_<=v)break;if(b.type!==Qn.QUESTION)if(b.type!==Qn.OPERATOR){if(b.type!==Qn.DOT&&b.type!==Qn.BRACKET_LEFT)break;m=u(m)}else{o();const S=h(_);m={type:Gr.BinaryExpression,operator:b.value,left:m,right:S}}else{o();const S=h(0);if(!c(Qn.COLON)){const w=r();throw new xi("Expected : in conditional expression",e,w?w.value:"<end of input>")}o();const E=h(0);m={type:Gr.ConditionalExpression,test:m,consequent:S,alternate:E}}}return m},p=h();return{type:Gr.Program,body:p}},f0=(t,e,n)=>{let r=e;n&&(r=ND(eO({},e),{context:eO(eO({},e.context),n)}));const o=c=>{switch(c.type){case Gr.Literal:return(l=>l.value)(c);case Gr.Identifier:return(l=>{if(!(l.name in r.context))throw new xi(`Undefined variable: ${l.name}`);return r.context[l.name]})(c);case Gr.MemberExpression:return(l=>{const u=o(l.object);if(u==null)throw new xi("Cannot access property of null or undefined");return u[l.computed?o(l.property):l.property.name]})(c);case Gr.CallExpression:return(l=>{const u=r.functions[l.callee.name];if(!u)throw new xi(`Undefined function: ${l.callee.name}`);return u(...l.arguments.map(d=>o(d)))})(c);case Gr.BinaryExpression:return(l=>{if(l.operator==="&&"){const h=o(l.left);return h&&o(l.right)}if(l.operator==="||")return o(l.left)||o(l.right);const u=o(l.left),d=o(l.right);switch(l.operator){case"+":return u+d;case"-":return u-d;case"*":return u*d;case"/":return u/d;case"%":return u%d;case"===":return u===d;case"!==":return u!==d;case">":return u>d;case">=":return u>=d;case"<":return u<d;case"<=":return u<=d;default:throw new xi(`Unknown operator: ${l.operator}`)}})(c);case Gr.UnaryExpression:return(l=>{const u=o(l.argument);if(l.prefix)switch(l.operator){case"!":return!u;case"-":if(typeof u!="number")throw new xi(`Cannot apply unary - to non-number: ${u}`);return-u;default:throw new xi(`Unknown operator: ${l.operator}`)}throw new xi(`Postfix operators are not supported: ${l.operator}`)})(c);case Gr.ConditionalExpression:return(l=>{const u=o(l.test);return o(u?l.consequent:l.alternate)})(c);default:throw new xi(`Evaluation error: Unsupported node type: ${c.type}`)}};return o(t.body)};function ad(t){const e=(o=>{const c=o,l=c.length,u=new Array(Math.ceil(l/3));let d=0,h=0;function p(E){const w=h+1;h++;let C="",M=!1;for(;h<l;){const L=c.charCodeAt(h);if(L===E)return M||(C=c.substring(w,h)),h++,{type:Qn.STRING,value:C};L===92?(M||(C=c.substring(w,h),M=!0),h++,C+=c[h]):M&&(C+=c[h]),h++}throw new xi(`Unterminated string starting with ${String.fromCharCode(E)}`,h,c.substring(Math.max(0,h-10),h))}function v(){const E=h;for(c.charCodeAt(h)===45&&h++;h<l&&ou(c.charCodeAt(h));)h++;if(h<l&&c.charCodeAt(h)===46)for(h++;h<l&&ou(c.charCodeAt(h));)h++;const w=c.slice(E,h);return{type:Qn.NUMBER,value:w}}function m(){h++;const E=h;if(h<l&&l0(c.charCodeAt(h)))for(h++;h<l&&id(c.charCodeAt(h));)h++;const w=c.slice(E,h);return{type:Qn.FUNCTION,value:w}}function b(){const E=h++;for(;h<l&&id(c.charCodeAt(h));)h++;const w=c.slice(E,h),C=Ky.get(w);return C?{type:C,value:w}:{type:Qn.IDENTIFIER,value:w}}function _(){if(h+2<l){const w=c.substring(h,h+3);if(c0.has(w))return h+=3,{type:Qn.OPERATOR,value:w}}if(h+1<l){const w=c.substring(h,h+2);if(c0.has(w))return h+=2,{type:Qn.OPERATOR,value:w}}const E=c[h];if(c0.has(E))return h++,{type:Qn.OPERATOR,value:E};throw new xi(`Unknown operator at position ${h}: ${c.substring(h,h+1)}`,h,c.substring(Math.max(0,h-10),h))}for(;h<l;){const E=c.charCodeAt(h);if(S=E,$O.has(S)){h++;continue}const w=Qy.get(E);if(w)u[d++]=w,h++;else if(E!==34&&E!==39)if(ou(E)||E===45&&h+1<l&&ou(c.charCodeAt(h+1)))u[d++]=v();else if(E!==64)if(l0(E))u[d++]=b();else{if(!qO(E))throw new xi(`Unexpected character: ${c[h]}`,h,c.substring(Math.max(0,h-10),h));u[d++]=_()}else u[d++]=m();else u[d++]=p(E)}var S;return d===u.length?u:u.slice(0,d)})(t),n=Jy(e),r=((o={},c={})=>({context:o,functions:c}))({},qy);return(o={})=>f0(n,r,o)}function JO(t,e={}){return ad(t)(e)}var au=k(4637),za=function(t){return t},tE=function(t,e){e===void 0&&(e=za);var n={};return(0,au.Z)(t)&&!(0,sn.Z)(t)&&Object.keys(t).forEach(function(r){n[r]=e(t[r],r)}),n};function d0(t){var e,n,r,o=t||1;function c(u,d){++e>o&&(r=n,l(1),++e),n[u]=d}function l(u){e=0,n=Object.create(null),u||(r=Object.create(null))}return l(),{clear:l,has:function(u){return n[u]!==void 0||r[u]!==void 0},get:function(u){var d=n[u];if(d!==void 0)return d;if((d=r[u])!==void 0)return c(u,d),d},set:function(u,d){n[u]!==void 0?n[u]=d:c(u,d)}}}const eE=d0(3);function sd(t,e=(...r)=>`${r[0]}`,n=16){const r=d0(n);return(...o)=>{const c=e(...o);let l=r.get(c);return r.has(c)?r.get(c):(l=t(...o),r.set(c,l),l)}}const h0=["style","encode","labels","children"],nE=sd(t=>{const e=ad(t);return(...n)=>{const r=Array.from({length:n.length},(c,l)=>String.fromCharCode(97+l)),o=Object.fromEntries(n.map((c,l)=>[r[l],c]));return e(Object.assign(Object.assign({},o),{global:Object.assign({},o)}))}},t=>t,128);function cd(t,e=!0){if(Array.isArray(t))return t.map((n,r)=>cd(t[r],e));if(typeof t=="object"&&t)return tE(t,(n,r)=>e&&h0.includes(r)?cd(n,r==="children"):e?n:cd(n,!1));if(typeof t=="string"){const n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))return nE(n.slice(1,-1))}return t}var rE=function(t){var e=zy(t);return e.charAt(0).toUpperCase()+e.substring(1)},Ua=rE;function p0(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function su(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function t1(t){return t=su(Math.abs(t)),t?t[1]:NaN}function iE(t,e){return function(n,r){for(var o=n.length,c=[],l=0,u=t[0],d=0;o>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),c.push(n.substring(o-=u,o+u)),!((d+=u+1)>r));)u=t[l=(l+1)%t.length];return c.reverse().join(e)}}function oE(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var g0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function v0(t){if(!(e=g0.exec(t)))throw new Error("invalid format: "+t);var e;return new m0({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}v0.prototype=m0.prototype;function m0(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}m0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ld(t){t:for(var e=t.length,n=1,r=-1,o;n<e;++n)switch(t[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(o+1):t}var ud;function aE(t,e){var n=su(t,e);if(!n)return t+"";var r=n[0],o=n[1],c=o-(ud=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,l=r.length;return c===l?r:c>l?r+new Array(c-l+1).join("0"):c>0?r.slice(0,c)+"."+r.slice(c):"0."+new Array(1-c).join("0")+su(t,Math.max(0,e+c-1))[0]}function Yc(t,e){var n=su(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}var e1={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:p0,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Yc(t*100,e),r:Yc,s:aE,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function n1(t){return t}var r1=Array.prototype.map,y0=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function sE(t){var e=t.grouping===void 0||t.thousands===void 0?n1:iE(r1.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",c=t.numerals===void 0?n1:oE(r1.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"\u2212":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(v){v=v0(v);var m=v.fill,b=v.align,_=v.sign,S=v.symbol,E=v.zero,w=v.width,C=v.comma,M=v.precision,L=v.trim,R=v.type;R==="n"?(C=!0,R="g"):e1[R]||(M===void 0&&(M=12),L=!0,R="g"),(E||m==="0"&&b==="=")&&(E=!0,m="0",b="=");var j=S==="$"?n:S==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",z=S==="$"?r:/[%p]/.test(R)?l:"",H=e1[R],$=/[defgprs%]/.test(R);M=M===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function dt(gt){var It=j,rt=z,lt,pt,bt;if(R==="c")rt=H(gt)+rt,gt="";else{gt=+gt;var Ht=gt<0||1/gt<0;if(gt=isNaN(gt)?d:H(Math.abs(gt),M),L&&(gt=ld(gt)),Ht&&+gt==0&&_!=="+"&&(Ht=!1),It=(Ht?_==="("?_:u:_==="-"||_==="("?"":_)+It,rt=(R==="s"?y0[8+ud/3]:"")+rt+(Ht&&_==="("?")":""),$){for(lt=-1,pt=gt.length;++lt<pt;)if(bt=gt.charCodeAt(lt),48>bt||bt>57){rt=(bt===46?o+gt.slice(lt+1):gt.slice(lt))+rt,gt=gt.slice(0,lt);break}}}C&&!E&&(gt=e(gt,1/0));var Rt=It.length+gt.length+rt.length,jt=Rt<w?new Array(w-Rt+1).join(m):"";switch(C&&E&&(gt=e(jt+gt,jt.length?w-rt.length:1/0),jt=""),b){case"<":gt=It+gt+rt+jt;break;case"=":gt=It+jt+gt+rt;break;case"^":gt=jt.slice(0,Rt=jt.length>>1)+It+gt+rt+jt.slice(Rt);break;default:gt=jt+It+gt+rt;break}return c(gt)}return dt.toString=function(){return v+""},dt}function p(v,m){var b=h((v=v0(v),v.type="f",v)),_=Math.max(-8,Math.min(8,Math.floor(t1(m)/3)))*3,S=Math.pow(10,-_),E=y0[8+_/3];return function(w){return b(S*w)+E}}return{format:h,formatPrefix:p}}var fd,Za,dd;cE({thousands:",",grouping:[3],currency:["$",""]});function cE(t){return fd=sE(t),Za=fd.format,dd=fd.formatPrefix,fd}function ya(t,e){return Object.entries(t).reduce((n,[r,o])=>(n[r]=e(o,r,t),n),{})}function Ks(t){return t.map((e,n)=>n)}function MP(t){const e=t.length,n=t[0].length,r=new Array(n).fill(0).map(()=>new Array(e));for(let o=0;o<n;o++)for(let c=0;c<e;c++)r[o][c]=t[c][o];return r}function lE(t){return t[0]}function i1(t){return t[t.length-1]}function LP(t){return!t.some(Array.isArray)}function uE(t){return Array.from(new Set(t))}function o1(t,e){const n=[[],[]];return t.forEach(r=>{n[e(r)?0:1].push(r)}),n}function a1(t,e=t.length){if(e===1)return t.map(r=>[r]);const n=[];for(let r=0;r<t.length;r++){const o=t.slice(r+1);a1(o,e-1).forEach(l=>{n.push([t[r],...l])})}return n}function fE(t){if(t.length===1)return[t];const e=[];for(let n=1;n<=t.length;n++)e.push(...a1(t,n));return e}var dE=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},Xc=dE,hd=function(t,e){if(t===e)return!0;if(!t||!e||(0,Wt.Z)(t)||(0,Wt.Z)(e))return!1;if(Xc(t)||Xc(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=hd(t[r],e[r]),!!n);r++);return n}if(to(t)||to(e)){var o=Object.keys(t),c=Object.keys(e);if(o.length!==c.length)return!1;for(var n=!0,r=0;r<o.length&&(n=hd(t[o[r]],e[o[r]]),!!n);r++);return n}return!1},s1=hd;function Fo(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&(n+=o)}return n}function wr(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function hE(t){return t*Math.PI/180}function pE(t){return t*180/Math.PI}function c1(t,e){return t=t%(2*Math.PI),e=e%(2*Math.PI),t<0&&(t=2*Math.PI+t),e<0&&(e=2*Math.PI+e),t>=e&&(e=e+2*Math.PI),{startAngle:t,endAngle:e}}const l1=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},e),t);return Object.assign(Object.assign({},n),c1(n.startAngle,n.endAngle))},cu=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:o}=l1(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",e,n,r,o]]};cu.props={};const u1=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},b0=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:o}=u1(t);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...cu({startAngle:e,endAngle:n,innerRadius:r,outerRadius:o})]};b0.props={};function lu(t,e,n){return Math.max(e,Math.min(t,n))}function pd(t,e=10){return typeof t!="number"||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(e))}const gE=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var _0=k(17816);function Zr(t){const{transformations:e}=t.getOptions();return e.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function Ar(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="polar")}function uu(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="reflect")&&e.some(([n])=>n.startsWith("transpose"))}function f1(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="helix")}function fu(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="parallel")}function d1(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="fisheye")}function vE(t){return fu(t)&&Ar(t)}function qc(t){return f1(t)||Ar(t)}function h1(t){return Ar(t)&&Zr(t)}function PP(t){return Ar(t)||fu(t)||uu(t)||h1(t)}function mE(t){if(qc(t)){const[e,n]=t.getSize(),r=t.getOptions().transformations.find(o=>o[0]==="polar");if(r)return Math.max(e,n)/2*r[4]}return 0}function du(t){const{transformations:e}=t.getOptions(),[,,,n,r]=e.find(o=>o[0]==="polar");return[+n,+r]}function x0(t,e=!0){const{transformations:n}=t.getOptions(),[,r,o]=n.find(c=>c[0]==="polar");return e?[+r*180/Math.PI,+o*180/Math.PI]:[r,o]}function yE(t,e){const{transformations:n}=t.getOptions(),[,...r]=n.find(o=>o[0]===e);return r}var X=k(97582);function S0(t,e){e(t),t.children&&t.children.forEach(function(n){n&&S0(n,e)})}function hu(t){gd(t,!0)}function Ha(t){gd(t,!1)}function gd(t,e){var n=e?"visible":"hidden";S0(t,function(r){r.attr("visibility",n)})}function bE(t){return typeof t=="boolean"?!1:"enter"in t&&"update"in t&&"exit"in t}function p1(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter(function(r){var o=(0,X.CR)(r,1),c=o[0];return!e.includes(c)}));return Object.fromEntries(e.map(function(r){return bE(t)?t[r]===!1?[r,!1]:[r,(0,X.pi)((0,X.pi)({},t[r]),n)]:[r,n]}))}function Qs(t,e){t?t.finished.then(e):e()}function _E(t,e){t.length===0?e():Promise.all(t.map(function(n){return n==null?void 0:n.finished})).then(e)}function g1(t,e){"update"in t?t.update(e):t.attr(e)}function O0(t,e,n){if(e.length===0)return null;if(!n){var r=e.slice(-1)[0];return g1(t,{style:r}),null}return t.animate(e,n)}function E0(t,e){return!(t.nodeName!=="text"||e.nodeName!=="text"||t.attributes.text!==e.attributes.text)}function v1(t,e,n,r){if(r===void 0&&(r="destroy"),E0(t,e))return t.remove(),[null];var o=function(){r==="destroy"?t.destroy():r==="hide"&&Ha(t),e.isVisible()&&hu(e)};if(!n)return o(),[null];var c=n.duration,l=c===void 0?0:c,u=n.delay,d=u===void 0?0:u,h=Math.ceil(+l/2),p=+l/4,v=(0,X.CR)(t.getGeometryBounds().center,2),m=v[0],b=v[1],_=(0,X.CR)(e.getGeometryBounds().center,2),S=_[0],E=_[1],w=(0,X.CR)([(m+S)/2-m,(b+E)/2-b],2),C=w[0],M=w[1],L=t.style.opacity,R=L===void 0?1:L,j=e.style.opacity,z=j===void 0?1:j,H=t.style.transform||"",$=e.style.transform||"",dt=t.animate([{opacity:R,transform:"translate(0, 0) ".concat(H)},{opacity:0,transform:"translate(".concat(C,", ").concat(M,") ").concat(H)}],(0,X.pi)((0,X.pi)({fill:"both"},n),{duration:d+h+p})),gt=e.animate([{opacity:0,transform:"translate(".concat(-C,", ").concat(-M,") ").concat($),offset:.01},{opacity:z,transform:"translate(0, 0) ".concat($)}],(0,X.pi)((0,X.pi)({fill:"both"},n),{duration:h+p,delay:d+h-p}));return Qs(gt,o),[dt,gt]}function Qo(t,e,n){var r={},o={};return Object.entries(e).forEach(function(c){var l=(0,X.CR)(c,2),u=l[0],d=l[1];if(!(0,sn.Z)(d)){var h=t.style[u]||t.parsedStyle[u]||0;h!==d&&(r[u]=h,o[u]=d)}}),n?O0(t,[r,o],(0,X.pi)({fill:"both"},n)):(g1(t,o),null)}var xE=5,m1=function(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=xE),Object.entries(e).forEach(function(o){var c=(0,X.CR)(o,2),l=c[0],u=c[1],d=t;Object.prototype.hasOwnProperty.call(e,l)&&(u?_i(u)?(_i(t[l])||(d[l]={}),n<r?m1(t[l],u,n+1,r):d[l]=e[l]):(0,Wi.Z)(u)?(d[l]=[],d[l]=d[l].concat(u)):d[l]=u:d[l]=u)})},Va=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)m1(t,e[r]);return t},SE=function(t){(0,X.ZT)(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,(0,X.ev)([],(0,X.CR)(n),!1))||this;return o.isMutationObserved=!0,o.addEventListener(I.Dk.INSERTED,function(){Ha(o)}),o}return e}(I.ZA);function Kc(t){var e=t.appendChild(new SE({class:"offscreen"}));return Ha(e),e}function y1(t){for(var e=t;e;){if(e.className==="offscreen")return!0;e=e.parent}return!1}function OE(){gd(this,this.attributes.visibility!=="hidden")}var Si=function(t){(0,X.ZT)(e,t);function e(n,r){r===void 0&&(r={});var o=t.call(this,Va({},{style:r},n))||this;return o.initialized=!1,o._defaultOptions=r,o}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=Kc(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e.prototype.attributeChangedCallback=function(n){n==="visibility"&&OE.call(this)},e.prototype.update=function(n,r){var o;return this.attr(Va({},this.attributes,n||{})),(o=this.render)===null||o===void 0?void 0:o.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(n,r){},e.prototype.getSubShapeStyle=function(n){var r=n.x,o=n.y,c=n.transform,l=n.transformOrigin,u=n.class,d=n.className,h=n.zIndex,p=(0,X._T)(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return p},e}(I.b_);function po(t,e,n,r,o){return r===void 0&&(r=!0),o===void 0&&(o=function(c){c.node().removeChildren()}),t?n(e):(r&&o(e),null)}function EE(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],o=0;o<t.length;o+=n)r.push(t[o]);return r}var Qc=function(t){if(!(0,Wi.Z)(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},wE=Qc,w0=function(t){(0,X.ZT)(e,t);function e(n){n===void 0&&(n={});var r=n.style,o=(0,X._T)(n,["style"]);return t.call(this,(0,X.pi)({style:(0,X.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},o))||this}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=Kc(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e}(I.xv);function AE(t,e){var n=new Map;return t.forEach(function(r){var o=e(r);n.has(o)||n.set(o,[]),n.get(o).push(r)}),n}function b1(t){throw new Error(t)}var TE=function(){function t(o,c,l,u,d,h,p){o===void 0&&(o=null),c===void 0&&(c=null),l===void 0&&(l=null),u===void 0&&(u=null),d===void 0&&(d=[null,null,null,null,null]),h===void 0&&(h=[]),p===void 0&&(p=[]),e.add(this),this._elements=Array.from(o),this._data=c,this._parent=l,this._document=u,this._enter=d[0],this._update=d[1],this._exit=d[2],this._merge=d[3],this._split=d[4],this._transitions=h,this._facetElements=p}t.prototype.selectAll=function(o){var c=typeof o=="string"?this._parent.querySelectorAll(o):o;return new n(c,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(o){var c=typeof o=="string"?this._parent.querySelectorAll(o):o;return new n(this._elements,null,this._parent,this._document,void 0,void 0,c)},t.prototype.select=function(o){var c=typeof o=="string"?this._parent.querySelectorAll(o)[0]||null:o;return new n([c],null,c,this._document)},t.prototype.append=function(o){var c=this,l=typeof o=="function"?o:function(){return c.createElement(o)},u=[];if(this._data!==null){for(var d=0;d<this._data.length;d++){var h=this._data[d],p=(0,X.CR)(Array.isArray(h)?h:[h,null],2),v=p[0],m=p[1],b=l(v,d);b.__data__=v,m!==null&&(b.__fromElements__=m),this._parent.appendChild(b),u.push(b)}return new n(u,null,this._parent,this._document)}for(var d=0;d<this._elements.length;d++){var _=this._elements[d],v=_.__data__,b=l(v,d);_.appendChild(b),u.push(b)}return new n(u,null,u[0],this._document)},t.prototype.maybeAppend=function(o,c){var l=(0,X.Q_)(this,e,"m",r).call(this,o[0]==="#"?o:"#".concat(o),c);return l.attr("id",o),l},t.prototype.maybeAppendByClassName=function(o,c){var l=o.toString(),u=(0,X.Q_)(this,e,"m",r).call(this,l[0]==="."?l:".".concat(l),c);return u.attr("className",l),u},t.prototype.maybeAppendByName=function(o,c){var l=(0,X.Q_)(this,e,"m",r).call(this,'[name="'.concat(o,'"]'),c);return l.attr("name",o),l},t.prototype.data=function(o,c,l){var u,d;c===void 0&&(c=function(dt){return dt}),l===void 0&&(l=function(){return null});for(var h=[],p=[],v=new Set(this._elements),m=[],b=new Set,_=new Map(this._elements.map(function(dt,gt){return[c(dt.__data__,gt),dt]})),S=new Map(this._facetElements.map(function(dt,gt){return[c(dt.__data__,gt),dt]})),E=AE(this._elements,function(dt){return l(dt.__data__)}),w=0;w<o.length;w++){var C=o[w],M=c(C,w),L=l(C,w);if(_.has(M)){var R=_.get(M);R.__data__=C,R.__facet__=!1,p.push(R),v.delete(R),_.delete(M)}else if(S.has(M)){var R=S.get(M);R.__data__=C,R.__facet__=!0,p.push(R),S.delete(M)}else if(E.has(M)){var j=E.get(M);m.push([C,j]);try{for(var z=(u=void 0,(0,X.XA)(j)),H=z.next();!H.done;H=z.next()){var R=H.value;v.delete(R)}}catch(dt){u={error:dt}}finally{try{H&&!H.done&&(d=z.return)&&d.call(z)}finally{if(u)throw u.error}}E.delete(M)}else if(_.has(L)){var R=_.get(L);R.__toData__?R.__toData__.push(C):R.__toData__=[C],b.add(R),v.delete(R)}else h.push(C)}var $=[new n([],h,this._parent,this._document),new n(p,null,this._parent,this._document),new n(v,null,this._parent,this._document),new n([],m,this._parent,this._document),new n(b,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,$)},t.prototype.merge=function(o){var c=(0,X.ev)((0,X.ev)([],(0,X.CR)(this._elements),!1),(0,X.CR)(o._elements),!1),l=(0,X.ev)((0,X.ev)([],(0,X.CR)(this._transitions),!1),(0,X.CR)(o._transitions),!1);return new n(c,null,this._parent,this._document,void 0,l)},t.prototype.createElement=function(o){if(this._document)return this._document.createElement(o,{});var c=n.registry[o];return c?new c:b1("Unknown node type: ".concat(o))},t.prototype.join=function(o,c,l,u,d){o===void 0&&(o=function(_){return _}),c===void 0&&(c=function(_){return _}),l===void 0&&(l=function(_){return _.remove()}),u===void 0&&(u=function(_){return _}),d===void 0&&(d=function(_){return _.remove()});var h=o(this._enter),p=c(this._update),v=l(this._exit),m=u(this._merge),b=d(this._split);return p.merge(h).merge(v).merge(m).merge(b)},t.prototype.remove=function(){for(var o=function(u){var d=c._elements[u],h=c._transitions[u];h?h.then(function(){return d.remove()}):d.remove()},c=this,l=0;l<this._elements.length;l++)o(l);return new n([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(o){for(var c=0;c<this._elements.length;c++){var l=this._elements[c],u=l.__data__;o.call(l,u,c)}return this},t.prototype.attr=function(o,c){var l=typeof c!="function"?function(){return c}:c;return this.each(function(u,d){c!==void 0&&(this[o]=l.call(this,u,d))})},t.prototype.style=function(o,c,l){l===void 0&&(l=!0);var u=typeof c!="function"||!l?function(){return c}:c;return this.each(function(d,h){c!==void 0&&(this.style[o]=u.call(this,d,h))})},t.prototype.styles=function(o,c){return o===void 0&&(o={}),c===void 0&&(c=!0),this.each(function(l,u){var d=this;Object.entries(o).forEach(function(h){var p=(0,X.CR)(h,2),v=p[0],m=p[1],b=typeof m!="function"||!c?function(){return m}:m;m!==void 0&&d.attr(v,b.call(d,l,u))})})},t.prototype.update=function(o,c){c===void 0&&(c=!0);var l=typeof o!="function"||!c?function(){return o}:o;return this.each(function(u,d){o&&this.update&&this.update(l.call(this,u,d))})},t.prototype.maybeUpdate=function(o,c){c===void 0&&(c=!0);var l=typeof o!="function"||!c?function(){return o}:o;return this.each(function(u,d){o&&this.update&&this.update(l.call(this,u,d))})},t.prototype.transition=function(o){var c=this._transitions,l=new Array(this._elements.length);return this.each(function(u,d){l[d]=o.call(this,u,d)}),this._transitions=wE(l),this},t.prototype.on=function(o,c){return this.each(function(){this.addEventListener(o,c)}),this},t.prototype.call=function(o){for(var c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];return o.call.apply(o,(0,X.ev)([this._parent,this],(0,X.CR)(c),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(o){return!!o})},t.prototype.parent=function(){return this._parent};var e,n,r;return n=t,e=new WeakSet,r=function(c,l){var u=this._elements[0],d=u.querySelector(c);if(d)return new n([d],null,this._parent,this._document);var h=typeof l=="string"?this.createElement(l):l();return u.appendChild(h),new n([h],null,this._parent,this._document)},t.registry={g:I.ZA,rect:I.UL,circle:I.Cd,path:I.y$,text:w0,ellipse:I.Pj,image:I.Ee,line:I.x1,polygon:I.mg,polyline:I.aH,html:I.k9},t}();function Kn(t){return new TE([t],null,t,t.ownerDocument)}function _1(t,e,n){return t.querySelector(e)?Kn(t).select(e):Kn(t).append(n)}var No=function(t,e){var n=function(o){return"".concat(e,"-").concat(o)},r=Object.fromEntries(Object.entries(t).map(function(o){var c=(0,X.CR)(o,2),l=c[0],u=c[1],d=n(u);return[l,{name:d,class:".".concat(d),id:"#".concat(d),toString:function(){return d}}]}));return Object.assign(r,{prefix:n}),r},A0={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new I.y$({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},CE=an({},A0,{style:{type:"arc"}}),x1=an({},A0,{style:{}}),Rr=No({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),go=k(45607);function Jo(t,e){return[t[0]*e,t[1]*e]}function pu(t,e){return[t[0]+e[0],t[1]+e[1]]}function on(t,e){return[t[0]-e[0],t[1]-e[1]]}function ct(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function ta(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function ot(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function S1(t){if(t[0]===0&&t[1]===0)return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function IP(t,e,n){var r=__read(t,2),o=r[0],c=r[1],l=__read(e,2),u=l[0],d=l[1],h=o-u,p=c-d,v=Math.sin(n),m=Math.cos(n);return[h*m-p*v+u,h*v+p*m+d]}function ME(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}function Jc(t){return t*Math.PI/180}function ba(t){return Number((t*180/Math.PI).toPrecision(5))}function T0(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function O1(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function E1(t,e){return"".concat(e).concat(T0(t))}function vd(t,e,n){var r;n===void 0&&(n=!0);var o=e||((r=t.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",c=t.replace(new RegExp("^(".concat(o,")")),"");return n?O1(c):c}function w1(t,e){Object.entries(e).forEach(function(n){var r=(0,X.CR)(n,2),o=r[0],c=r[1];(0,X.ev)([t],(0,X.CR)(t.querySelectorAll(o)),!1).filter(function(l){return l.matches(o)}).forEach(function(l){if(l){var u=l;u.style.cssText+=Object.entries(c).reduce(function(d,h){return"".concat(d).concat(h.join(":"),";")},"")}})})}var md=function(t,e){if(!(t!=null&&t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function sr(t,e,n){n===void 0&&(n=!1);var r={};return Object.entries(t).forEach(function(o){var c=(0,X.CR)(o,2),l=c[0],u=c[1];if(!(l==="className"||l==="class")){if(md(l,"show")&&md(vd(l,"show"),e)!==n)l===E1(e,"show")?r[l]=u:r[l.replace(new RegExp(T0(e)),"")]=u;else if(!md(l,"show")&&md(l,e)!==n){var d=vd(l,e);d==="filter"&&typeof u=="function"||(r[d]=u)}}}),r}function ea(t,e){return Object.entries(t).reduce(function(n,r){var o=(0,X.CR)(r,2),c=o[0],l=o[1];return c.startsWith("show")?n["show".concat(e).concat(c.slice(4))]=l:n["".concat(e).concat(T0(c))]=l,n},{})}function Wa(t,e){e===void 0&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},o={};return Object.entries(t).forEach(function(c){var l=(0,X.CR)(c,2),u=l[0],d=l[1];e.includes(u)||(n.indexOf(u)!==-1?o[u]=d:r[u]=d)}),[r,o]}function Bo(t,e){return(0,go.Z)(t)?t.apply(void 0,(0,X.ev)([],(0,X.CR)(e),!1)):t}function yd(t,e){return t.style.opacity||(t.style.opacity=1),Qo(t,{opacity:0},e)}var RP=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function LE(t){return RP.includes(t)}function A1(t){var e={};for(var n in t)LE(n)&&(e[n]=t[n]);return e}var gu=No({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function PE(t){return t.reduce(function(e,n,r){return e.push((0,X.ev)([r===0?"M":"L"],(0,X.CR)(n),!1)),e},[])}function kP(t,e,n){var r=e.connect,o=r===void 0?"line":r,c=e.center;if(o==="line")return PE(t);if(!c)return[];var l=ot(t[0],c),u=n?0:1;return t.reduce(function(d,h,p){return p===0?d.push((0,X.ev)(["M"],(0,X.CR)(h),!1)):d.push((0,X.ev)(["A",l,l,0,0,u],(0,X.CR)(h),!1)),d},[])}function C0(t,e,n){return e.type==="surround"?kP(t,e,n):PE(t)}function T1(t,e,n){var r=n.type,o=n.connect,c=n.center,l=n.closed,u=l?[["Z"]]:[],d=(0,X.CR)([C0(t,n),C0(e.slice().reverse(),n,!0)],2),h=d[0],p=d[1],v=(0,X.CR)([t[0],e.slice(-1)[0]],2),m=v[0],b=v[1],_=function(C,M){return[h,C,p,M,u].flat()};if(o==="line"||r==="surround")return _([(0,X.ev)(["L"],(0,X.CR)(b),!1)],[(0,X.ev)(["L"],(0,X.CR)(m),!1)]);if(!c)throw new Error("Arc grid need to specified center");var S=(0,X.CR)([ot(b,c),ot(m,c)],2),E=S[0],w=S[1];return _([(0,X.ev)(["A",E,E,0,0,1],(0,X.CR)(b),!1),(0,X.ev)(["L"],(0,X.CR)(b),!1)],[(0,X.ev)(["A",w,w,0,0,0],(0,X.CR)(m),!1),(0,X.ev)(["L"],(0,X.CR)(m),!1)])}function DP(t,e,n,r){var o=n.animate,c=n.isBillboard,l=e.map(function(u,d){return{id:u.id||"grid-line-".concat(d),d:C0(u.points,n)}});return t.selectAll(gu.line.class).data(l,function(u){return u.id}).join(function(u){return u.append("path").each(function(d,h){var p=Bo(A1((0,X.pi)({d:d.d},r)),[d,h,l]);this.attr((0,X.pi)({class:gu.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:c},p))})},function(u){return u.transition(function(d,h){var p=Bo(A1((0,X.pi)({d:d.d},r)),[d,h,l]);return Qo(this,p,o.update)})},function(u){return u.transition(function(){var d=this,h=yd(this,o.exit);return Qs(h,function(){return d.remove()}),h})}).transitions()}function IE(t,e,n){var r=n.animate,o=n.connect,c=n.areaFill;if(e.length<2||!c||!o)return[];for(var l=Array.isArray(c)?c:[c,"transparent"],u=function(_){return l[_%l.length]},d=[],h=0;h<e.length-1;h++){var p=(0,X.CR)([e[h].points,e[h+1].points],2),v=p[0],m=p[1],b=T1(v,m,n);d.push({d:b,fill:u(h)})}return t.selectAll(gu.region.class).data(d,function(_,S){return S}).join(function(_){return _.append("path").each(function(S,E){var w=Bo(S,[S,E,d]);this.attr(w)}).attr("className",gu.region.name)},function(_){return _.transition(function(S,E){var w=Bo(S,[S,E,d]);return Qo(this,w,r.update)})},function(_){return _.transition(function(){var S=this,E=yd(this,r.exit);return Qs(E,function(){return S.remove()}),E})}).transitions()}function FP(t){var e=t.data,n=e===void 0?[]:e,r=t.closed;return r?n.map(function(o){var c=o.points,l=(0,X.CR)(c,1),u=l[0];return(0,X.pi)((0,X.pi)({},o),{points:(0,X.ev)((0,X.ev)([],(0,X.CR)(c),!1),[u],!1)})}):n}var RE=function(t){(0,X.ZT)(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var o=n.type,c=n.center,l=n.areaFill,u=n.closed,d=(0,X._T)(n,["type","center","areaFill","closed"]),h=FP(n),p=Kn(r).maybeAppendByClassName(gu.lineGroup,"g"),v=Kn(r).maybeAppendByClassName(gu.regionGroup,"g"),m=DP(p,h,n,d),b=IE(v,h,n);return(0,X.ev)((0,X.ev)([],(0,X.CR)(m),!1),(0,X.CR)(b),!1)},e}(Si),NP=function(t,e){return function(n){return t*(1-n)+e*n}};function kE(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(o){var c=new Array(r),l=new Array(n),u=0;for(u=0;u<r;++u)c[u]=M0(t[u],e[u]);for(;u<n;++u)l[u]=e[u];for(u=0;u<r;++u)l[u]=c[u](o);return l}}function DE(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={},r={};return Object.entries(e).forEach(function(o){var c=(0,X.CR)(o,2),l=c[0],u=c[1];l in t?n[l]=M0(t[l],u):r[l]=u}),function(o){return Object.entries(n).forEach(function(c){var l=(0,X.CR)(c,2),u=l[0],d=l[1];return r[u]=d(o)}),r}}function M0(t,e){return typeof t=="number"&&typeof e=="number"?NP(t,e):Array.isArray(t)&&Array.isArray(e)?kE(t,e):typeof t=="object"&&typeof e=="object"?DE(t,e):function(n){return t}}function bd(t,e,n,r){if(!r)return t.attr("__keyframe_data__",n),null;var o=r.duration,c=o===void 0?0:o,l=M0(e,n),u=Math.ceil(+c/16),d=new Array(u).fill(0).map(function(h,p,v){return{__keyframe_data__:l(p/(v.length-1))}});return t.animate(d,(0,X.pi)({fill:"both"},r))}function tl(t){return typeof t=="function"?t():(0,Wt.Z)(t)||(0,ie.Z)(t)?new w0({style:{text:String(t)}}):t}function C1(t,e,n){n===void 0&&(n=!1);var r=t.getBBox(),o=r.width,c=r.height,l=e/Math.max(o,c);return n&&(t.style.transform="scale(".concat(l,")")),l}function as(t,e){var n={},r=Array.isArray(e)?e:[e];for(var o in t)r.includes(o)||(n[o]=t[o]);return n}function vu(t,e){return Object.fromEntries(Object.entries(t).map(function(n){var r=(0,X.CR)(n,2),o=r[0],c=r[1];return[o,Bo(c,e)]}))}function L0(t){if(t.type==="linear"){var e=t.startPos,n=t.endPos;return __spreadArray(__spreadArray([],__read(e),!1),__read(n),!1)}var r=t.startAngle,o=t.endAngle,c=t.center,l=t.radius;return __spreadArray(__spreadArray([r,o],__read(c),!1),[l],!1)}function ss(t,e){return e&&(0,go.Z)(e)?t.filter(e):t}function Oi(t,e){var n=e.startAngle,r=e.endAngle;return(r-n)*t+n}function Gi(t,e){if(e.type==="linear"){var n=(0,X.CR)(e.startPos,2),r=n[0],o=n[1],c=(0,X.CR)(e.endPos,2),l=c[0],u=c[1],d=(0,X.CR)([l-r,u-o],2),h=d[0],p=d[1];return S1([h,p])}var v=Jc(Oi(t,e));return[-Math.sin(v),Math.cos(v)]}function _a(t,e,n){var r=Gi(t,n);return ME(r,e!=="positive")}function na(t,e){return _a(t,e.labelDirection,e)}function _d(t,e){var n=(0,X.CR)(e.startPos,2),r=n[0],o=n[1],c=(0,X.CR)(e.endPos,2),l=c[0],u=c[1],d=(0,X.CR)([l-r,u-o],2),h=d[0],p=d[1];return[r+h*t,o+p*t]}function $i(t,e){var n=e.radius,r=(0,X.CR)(e.center,2),o=r[0],c=r[1],l=Jc(Oi(t,e));return[o+n*Math.cos(l),c+n*Math.sin(l)]}function br(t,e){return e.type==="linear"?_d(t,e):$i(t,e)}function cs(t){return Gi(0,t)[1]===0}function Dn(t){return Gi(0,t)[0]===0}function M1(t,e){return e-t===360}function L1(t,e,n,r,o){var c=e-t,l=(0,X.CR)([o,o],2),u=l[0],d=l[1],h=(0,X.CR)([Jc(t),Jc(e)],2),p=h[0],v=h[1],m=function(dt){return[n+o*Math.cos(dt),r+o*Math.sin(dt)]},b=(0,X.CR)(m(p),2),_=b[0],S=b[1],E=(0,X.CR)(m(v),2),w=E[0],C=E[1];if(M1(t,e)){var M=(v+p)/2,L=(0,X.CR)(m(M),2),R=L[0],j=L[1];return[["M",_,S],["A",u,d,0,1,0,R,j],["A",u,d,0,1,0,w,C]]}var z=c>180?1:0,H=t>e?0:1,$=!1;return $?"M".concat(n,",").concat(r,",L").concat(_,",").concat(S,",A").concat(u,",").concat(d,",0,").concat(z,",").concat(H,",").concat(w,",").concat(C,",L").concat(n,",").concat(r):"M".concat(_,",").concat(S,",A").concat(u,",").concat(d,",0,").concat(z,",").concat(H,",").concat(w,",").concat(C)}function FE(t){var e=t.attributes,n=e.startAngle,r=e.endAngle,o=e.center,c=e.radius;return(0,X.ev)((0,X.ev)([n,r],(0,X.CR)(o),!1),[c],!1)}function mu(t,e,n,r){var o=e.startAngle,c=e.endAngle,l=e.center,u=e.radius;return t.selectAll(Rr.line.class).data([{d:L1.apply(void 0,(0,X.ev)((0,X.ev)([o,c],(0,X.CR)(l),!1),[u],!1))}],function(d,h){return h}).join(function(d){return d.append("path").attr("className",Rr.line.name).styles(e).styles({d:function(h){return h.d}})},function(d){return d.transition(function(){var h=this,p=bd(this,FE(this),(0,X.ev)((0,X.ev)([o,c],(0,X.CR)(l),!1),[u],!1),r.update);if(p){var v=function(){var m=pr(h.attributes,"__keyframe_data__");h.style.d=L1.apply(void 0,(0,X.ev)([],(0,X.CR)(m),!1))};p.onframe=v,p.onfinish=v}return p}).styles(e)},function(d){return d.remove()}).styles(n).transitions()}function NE(t,e){var n=e.truncRange,r=e.truncShape,o=e.lineExtension}function BE(t,e,n){n===void 0&&(n=[0,0]);var r=(0,X.CR)([t,e,n],3),o=(0,X.CR)(r[0],2),c=o[0],l=o[1],u=(0,X.CR)(r[1],2),d=u[0],h=u[1],p=(0,X.CR)(r[2],2),v=p[0],m=p[1],b=(0,X.CR)([d-c,h-l],2),_=b[0],S=b[1],E=Math.sqrt(Math.pow(_,2)+Math.pow(S,2)),w=(0,X.CR)([-v/E,m/E],2),C=w[0],M=w[1];return[C*_,C*S,M*_,M*S]}function P0(t){var e=(0,X.CR)(t,2),n=(0,X.CR)(e[0],2),r=n[0],o=n[1],c=(0,X.CR)(e[1],2),l=c[0],u=c[1];return{x1:r,y1:o,x2:l,y2:u}}function P1(t,e,n,r){var o=e.showTrunc,c=e.startPos,l=e.endPos,u=e.truncRange,d=e.lineExtension,h=(0,X.CR)([c,l],2),p=(0,X.CR)(h[0],2),v=p[0],m=p[1],b=(0,X.CR)(h[1],2),_=b[0],S=b[1],E=(0,X.CR)(d?BE(c,l,d):new Array(4).fill(0),4),w=E[0],C=E[1],M=E[2],L=E[3],R=function(Rt){return t.selectAll(Rr.line.class).data(Rt,function(jt,oe){return oe}).join(function(jt){return jt.append("line").attr("className",function(oe){return"".concat(Rr.line.name," ").concat(oe.className)}).styles(n).transition(function(oe){return Qo(this,P0(oe.line),!1)})},function(jt){return jt.styles(n).transition(function(oe){var Se=oe.line;return Qo(this,P0(Se),r.update)})},function(jt){return jt.remove()}).transitions()};if(!o||!u)return R([{line:[[v+w,m+C],[_+M,S+L]],className:Rr.line.name}]);var j=(0,X.CR)(u,2),z=j[0],H=j[1],$=_-v,dt=S-m,gt=(0,X.CR)([v+$*z,m+dt*z],2),It=gt[0],rt=gt[1],lt=(0,X.CR)([v+$*H,m+dt*H],2),pt=lt[0],bt=lt[1],Ht=R([{line:[[v+w,m+C],[It,rt]],className:Rr.lineFirst.name},{line:[[pt,bt],[_+M,S+L]],className:Rr.lineSecond.name}]);return NE(t,e),Ht}function jE(t,e,n,r){var o=n.showArrow,c=n.showTrunc,l=n.lineArrow,u=n.lineArrowOffset,d=n.lineArrowSize,h;if(e==="arc"?h=t.select(Rr.line.class):c?h=t.select(Rr.lineSecond.class):h=t.select(Rr.line.class),!o||!l||n.type==="arc"&&M1(n.startAngle,n.endAngle)){var p=h.node();p&&(p.style.markerEnd=void 0);return}var v=tl(l);v.attr(r),C1(v,d,!0),h.style("markerEnd",v).style("markerEndOffset",-u)}function zE(t,e,n){var r=e.type,o,c=sr(e,"line");return r==="linear"?o=P1(t,e,as(c,"arrow"),n):o=mu(t,e,as(c,"arrow"),n),jE(t,r,e,c),o}function UE(t,e){return _a(t,e.gridDirection,e)}function I1(t){var e=t.type,n=t.gridCenter;return e==="linear"?n:n||t.center}function ZE(t,e){var n=e.gridLength;return t.map(function(r,o){var c=r.value,l=(0,X.CR)(br(c,e),2),u=l[0],d=l[1],h=(0,X.CR)(Jo(UE(c,e),n),2),p=h[0],v=h[1];return{id:o,points:[[u,d],[u+p,d+v]]}})}function HE(t,e){var n=e.gridControlAngles,r=I1(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var o=(0,X.CR)(r,2),c=o[0],l=o[1];return t.map(function(u,d){var h=u.value,p=(0,X.CR)(br(h,e),2),v=p[0],m=p[1],b=(0,X.CR)([v-c,m-l],2),_=b[0],S=b[1],E=[];return n.forEach(function(w){var C=Jc(w),M=(0,X.CR)([Math.cos(C),Math.sin(C)],2),L=M[0],R=M[1],j=_*L-S*R+c,z=_*R+S*L+l;E.push([j,z])}),{points:E,id:d}})}function VE(t,e,n,r){var o=sr(n,"grid"),c=o.type,l=o.areaFill,u=I1(n),d=ss(e,n.gridFilter),h=c==="segment"?ZE(d,n):HE(d,n),p=(0,X.pi)((0,X.pi)({},o),{center:u,areaFill:(0,go.Z)(l)?d.map(function(v,m){return Bo(l,[v,m,d])}):l,animate:r,data:h});return t.selectAll(Rr.grid.class).data([1]).join(function(v){return v.append(function(){return new RE({style:p})}).attr("className",Rr.grid.name)},function(v){return v.transition(function(){return this.update(p)})},function(v){return v.remove()}).transitions()}function ji(t,e,n,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!1),r&&t===e||o&&t===n?!0:t>e&&t<n}function WE(t){var e,n,r,o=t||1;function c(u,d){++e>o&&(r=n,l(1),++e),n[u]=d}function l(u){e=0,n=Object.create(null),u||(r=Object.create(null))}return l(),{clear:l,has:function(u){return n[u]!==void 0||r[u]!==void 0},get:function(u){var d=n[u];if(d!==void 0)return d;if((d=r[u])!==void 0)return c(u,d),d},set:function(u,d){n[u]!==void 0?n[u]=d:c(u,d)}}}var xd=new Map;function GE(t,e,n){n===void 0&&(n=128);var r=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var l=e?e.apply(this,o):o[0];xd.has(t)||xd.set(t,WE(n));var u=xd.get(t);if(u.has(l))return u.get(l);var d=t.apply(this,o);return u.set(l,d),d};return r}var I0,R0;function $E(t){R0=t}var R1=GE(function(t,e){var n=e.fontSize,r=e.fontFamily,o=e.fontWeight,c=e.fontStyle,l=e.fontVariant;return R0?R0(t,n):(I0||(I0=I.GZ.offscreenCanvasCreator.getOrCreateContext(void 0)),I0.font=[c,l,o,"".concat(n,"px"),r].join(" "),I0.measureText(t).width)},function(t,e){return[t,Object.values(e||k1(t)).join()].join("")},4096),k1=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",o=t.style.fontVariant,c=t.style.fontSize;return c=typeof c=="object"?c.value:c,{fontSize:c,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:o}};function ln(t){return t.nodeName==="text"?t:t.nodeName==="g"&&t.children.length===1&&t.children[0].nodeName==="text"?t.children[0]:null}function D1(t,e){var n=ln(t);n&&n.attr(e)}function Sd(t,e,n){n===void 0&&(n="..."),D1(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}function yu(t,e,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),D1(t,{wordWrap:!0,wordWrapWidth:e,maxLines:n,textBaseline:r})}function YE(t,e,n){var r=t.getBBox(),o=r.width,c=r.height,l=(0,X.CR)([e,n].map(function(h,p){var v;return h.includes("%")?parseFloat(((v=h.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||v===void 0?void 0:v[0])||"0")/100*(p===0?o:c):h}),2),u=l[0],d=l[1];return[u,d]}function Mr(t,e){if(e)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=e.replace(n,function(o,c,l){return"translate(".concat(YE(t,c,l),")")});t.attr("transform",r)}catch(o){}}function Yi(t){if((0,ie.Z)(t))return[t,t,t,t];if((0,Wi.Z)(t)){var e=t.length;if(e===1)return[t[0],t[0],t[0],t[0]];if(e===2)return[t[0],t[1],t[0],t[1]];if(e===3)return[t[0],t[1],t[2],t[1]];if(e===4)return t}return[0,0,0,0]}var k0=function(){function t(e,n,r,o){this.set(e,n,r,o)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(e,n,r){var o=this,c=o.x1,l=o.y1,u=o.x2,d=o.y2,h=Math.cos(e),p=Math.sin(e),v=n-n*h+r*p,m=r-n*p-r*h,b=[[h*c-p*d+v,p*c+h*d+m],[h*u-p*d+v,p*u+h*d+m],[h*c-p*l+v,p*c+h*l+m],[h*u-p*l+v,p*u+h*l+m]];return b},t.prototype.set=function(e,n,r,o){return r<e?(this.x2=e,this.x1=r):(this.x1=e,this.x2=r),o<n?(this.y2=n,this.y1=o):(this.y1=n,this.y2=o),this},t.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},t}();function Od(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),o=(0,X.CR)(r.min,2),c=o[0],l=o[1],u=(0,X.CR)(r.max,2),d=u[0],h=u[1],p=t.getBBox(),v=p.width,m=p.height,b=m,_=0,S=0,E=c,w=l,C=ln(t);if(C){b-=1.5;var M=C.style.textAlign,L=C.style.textBaseline;M==="center"?E=(c+d)/2:(M==="right"||M==="end")&&(E=d),L==="middle"?w=(l+h)/2:L==="bottom"&&(w=h)}var R=(0,X.CR)(Yi(e),4),j=R[0],z=j===void 0?0:j,H=R[1],$=H===void 0?0:H,dt=R[2],gt=dt===void 0?z:dt,It=R[3],rt=It===void 0?$:It,lt=new k0((_+=c)-rt,(S+=l)-z,_+v+$,S+b+gt);return t.setEulerAngles(n),lt.rotatedPoints(Jc(n),E,w)}function bu(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function _u(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return r===0?0:r<0?2:1}function BP(t,e){var n=_u(t[0],t[1],e[0]),r=_u(t[0],t[1],e[1]),o=_u(e[0],e[1],t[0]),c=_u(e[0],e[1],t[1]);return!!(n!==r&&o!==c||n===0&&bu(t,e[0])||r===0&&bu(t,e[1])||o===0&&bu(e,t[0])||c===0&&bu(e,t[1]))}function XE(t,e){var n=t.length;if(n<3)return!1;var r=[e,[9999,e[1]]],o=0,c=0;do{var l=[t[c],t[(c+1)%n]];if(BP(l,r)){if(_u(l[0],e,l[1])===0)return bu(l,e);o++}c=(c+1)%n}while(c!==0);return!!(o&1)}function qE(t,e){return e.every(function(n){return XE(t,n)})}function KE(t,e,n){var r=t.x1,o=t.x2,c=t.y1,l=t.y2,u=[[r,c],[o,c],[o,l],[r,l]],d=Od(e,n);return qE(u,d)}function F1(t,e){var n=(0,X.CR)(t,4),r=n[0],o=n[1],c=n[2],l=n[3],u=(0,X.CR)(e,4),d=u[0],h=u[1],p=u[2],v=u[3],m=c-r,b=l-o,_=p-d,S=v-h,E=m*S-_*b;if(E===0)return!1;var w=E>0,C=r-d,M=o-h,L=m*M-b*C;if(L<0===w)return!1;var R=_*M-S*C;return!(R<0===w||L>E===w||R>E===w)}function N1(t,e){var n=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]];return n.some(function(r){return F1(e,r)})}var xu={lineToLine:F1,intersectBoxLine:N1,getBounds:Od};function D0(t,e,n){var r,o,c=Od(t,n).flat(1),l=Od(e,n).flat(1),u=[[c[0],c[1],c[2],c[3]],[c[0],c[1],c[4],c[5]],[c[4],c[5],c[6],c[7]],[c[2],c[3],c[6],c[7]]];try{for(var d=(0,X.XA)(u),h=d.next();!h.done;h=d.next()){var p=h.value;if(N1(l,p))return!0}}catch(v){r={error:v}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return!1}function QE(t,e){var n=t.type,r=t.labelDirection,o=t.crossSize;if(!o)return!1;if(n==="arc"){var c=t.center,l=t.radius,u=(0,X.CR)(c,2),d=u[0],h=u[1],p=r==="negative"?0:o,v=-l-p,m=l+p,b=(0,X.CR)(Yi(e),4),_=b[0],S=b[1],E=b[2],w=b[3];return new k0(d+v-w,h+v-_,d+m+S,h+m+E)}var C=(0,X.CR)(t.startPos,2),M=C[0],L=C[1],R=(0,X.CR)(t.endPos,2),j=R[0],z=R[1],H=(0,X.CR)(Dn(t)?[-e,0,e,0]:[0,e,0,-e],4),$=H[0],dt=H[1],gt=H[2],It=H[3],rt=na(0,t),lt=Jo(rt,o),pt=new k0(M,L,j,z);return pt.x1+=It,pt.y1+=$,pt.x2+=dt+lt[0],pt.y2+=gt+lt[1],pt}function Su(t,e,n){var r,o,c=e.crossPadding,l=new Set,u=null,d=QE(e,c),h=function(_){return d?KE(d,_):!0},p=function(_,S){return!_||!_.firstChild?!0:!D0(_.firstChild,S.firstChild,Yi(n))};try{for(var v=(0,X.XA)(t),m=v.next();!m.done;m=v.next()){var b=m.value;h(b)?!u||p(u,b)?u=b:(l.add(u),l.add(b)):l.add(b)}}catch(_){r={error:_}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(r)throw r.error}}return Array.from(l)}function Ed(t,e){return e===void 0&&(e={}),(0,sn.Z)(t)?0:typeof t=="number"?t:Math.floor(R1(t,e))}function JE(t,e,n,r){if(!(t.length<=0)){var o=e.suffix,c=o===void 0?"...":o,l=e.minLength,u=e.maxLength,d=u===void 0?1/0:u,h=e.step,p=h===void 0?" ":h,v=e.margin,m=v===void 0?[0,0,0,0]:v,b=k1(r.getTextShape(t[0])),_=Ed(p,b),S=l?Ed(l,b):_,E=Ed(d,b);((0,sn.Z)(E)||E===1/0)&&(E=Math.max.apply(null,t.map(function(lt){return lt.getBBox().width})));for(var w=t.slice(),C=(0,X.CR)(m,4),M=C[0],L=M===void 0?0:M,R=C[1],j=R===void 0?0:R,z=C[2],H=z===void 0?L:z,$=C[3],dt=$===void 0?j:$,gt=function(lt){if(w.forEach(function(pt){r.ellipsis(r.getTextShape(pt),lt,c)}),w=Su(t,n,m),w.length<1)return{value:void 0}},It=E;It>S+_;It-=_){var rt=gt(It);if(typeof rt=="object")return rt.value}}}var tw=function(t){return t!==void 0&&t!=null&&!Number.isNaN(t)};function jP(t){var e=t&&t.getRenderBounds();if(!e)return{width:0,height:0};var n=e.getMax(),r=e.getMin();return{width:n[0]-r[0],height:n[1]-r[1]}}function B1(t){var e=t.getLocalBounds(),n=e.min,r=e.max,o=(0,X.CR)([n,r],2),c=(0,X.CR)(o[0],2),l=c[0],u=c[1],d=(0,X.CR)(o[1],2),h=d[0],p=d[1];return{x:l,y:u,width:h-l,height:p-u,left:l,bottom:p,top:u,right:h}}function wd(t,e){var n=select(t).append("text").node();return n.attr(__assign(__assign({},e),{visibility:"hidden"})),n}function ew(t,e){var n=(0,X.CR)(t,2),r=n[0],o=n[1],c=(0,X.CR)(e,2),l=c[0],u=c[1];return r!==l&&o===u}function zP(t,e){var n=__read(t,2),r=n[0],o=n[1],c=__read(e,2),l=c[0],u=c[1];return r===l&&o!==u}function nw(t,e){var n,r,o=e.attributes;try{for(var c=(0,X.XA)(Object.entries(o)),l=c.next();!l.done;l=c.next()){var u=(0,X.CR)(l.value,2),d=u[0],h=u[1];d!=="id"&&d!=="className"&&t.attr(d,h)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}var rw={parity:function(t,e){var n=e.seq,r=n===void 0?2:n;return t.filter(function(o,c){return c%r?(Ha(o),!1):!0})}},iw=function(t){return t.filter(tw)};function Ou(t,e,n,r){var o=t.length,c=e.keepHeader,l=e.keepTail;if(!(o<=1||o===2&&c&&l)){var u=rw.parity,d=function(M){return M.forEach(r.show),M},h=2,p=t.slice(),v=t.slice(),m=Math.min.apply(Math,(0,X.ev)([1],(0,X.CR)(t.map(function(M){return M.getBBox().width})),!1));if(n.type==="linear"&&(cs(n)||Dn(n))){var b=B1(t[0]).left,_=B1(t[o-1]).right,S=Math.abs(_-b)||1;h=Math.max(Math.floor(o*m/S),h)}var E,w;for(c&&(E=p.splice(0,1)[0]),l&&(w=p.splice(-1,1)[0],p.reverse()),d(p);h<t.length&&Su(iw(w?(0,X.ev)((0,X.ev)([w],(0,X.CR)(v),!1),[E],!1):(0,X.ev)([E],(0,X.CR)(v),!1)),n,e==null?void 0:e.margin).length;){if(w&&!E&&h%2===0){var C=p.splice(0,1);C.forEach(r.hide)}else if(w&&E){var C=p.splice(0,1);C.forEach(r.hide)}v=u(d(p),{seq:h}),h++}}}function ow(t,e,n,r){var o,c,l=e.optionalAngles,u=l===void 0?[0,45,90]:l,d=e.margin,h=e.recoverWhenFailed,p=h===void 0?!0:h,v=t.map(function(w){return w.getLocalEulerAngles()}),m=function(){return Su(t,n,d).length<1},b=function(w){return t.forEach(function(C,M){var L=Array.isArray(w)?w[M]:w;r.rotate(C,+L)})};try{for(var _=(0,X.XA)(u),S=_.next();!S.done;S=_.next()){var E=S.value;if(b(E),m())return}}catch(w){o={error:w}}finally{try{S&&!S.done&&(c=_.return)&&c.call(_)}finally{if(o)throw o.error}}p&&b(v)}function aw(t){var e=t.type,n=t.labelDirection;return e==="linear"&&cs(t)?n==="negative"?"bottom":"top":"middle"}function j1(t,e,n,r,o){var c,l=e.maxLines,u=l===void 0?3:l,d=e.recoverWhenFailed,h=d===void 0?!0:d,p=e.margin,v=p===void 0?[0,0,0,0]:p,m=Bo((c=e.wordWrapWidth)!==null&&c!==void 0?c:50,[o]),b=t.map(function(M){return M.attr("maxLines")||1}),_=Math.min.apply(Math,(0,X.ev)([],(0,X.CR)(b),!1)),S=function(){return Su(t,n,v).length<1},E=aw(n),w=function(M){return t.forEach(function(L,R){var j=Array.isArray(M)?M[R]:M;r.wrap(L,m,j,E)})};if(!(_>u)){if(n.type==="linear"&&cs(n)){if(w(u),S())return}else for(var C=_;C<=u;C++)if(w(C),S())return;h&&w(b)}}var sw=new Map([["hide",Ou],["rotate",ow],["ellipsis",JE],["wrap",j1]]);function xa(t,e,n){return e.labelOverlap.length<1?!1:n==="hide"?!y1(t[0]):n==="rotate"?!t.some(function(r){var o;return!!(!((o=r.attr("transform"))===null||o===void 0)&&o.includes("rotate"))}):n==="ellipsis"||n==="wrap"?t.filter(function(r){return r.querySelector("text")}).length>=1:!0}function cw(t,e,n,r){var o=e.labelOverlap,c=o===void 0?[]:o;c.length&&c.forEach(function(l){var u=l.type,d=sw.get(u);xa(t,e,u)&&(d==null||d(t,l,e,r,n))})}function lw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(r){return r==="positive"?-1:1};return t.reduce(function(r,o){return r*n(o)},1)}function z1(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function F0(t,e){var n=(0,X.CR)(t,2),r=n[0],o=n[1],c=(0,X.CR)(e,2),l=c[0],u=c[1],d=(0,X.CR)([r*l+o*u,r*u-o*l],2),h=d[0],p=d[1];return Math.atan2(p,h)}function uw(t){var e=(t+360)%180;return ji(e,-90,90)||(e+=180),e}function fw(t,e,n){var r,o=n.labelAlign,c=(r=e.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(c)return e.getLocalEulerAngles();var l=0,u=na(t.value,n),d=Gi(t.value,n);return o==="horizontal"?0:(o==="perpendicular"?l=F0([1,0],u):l=F0([d[0]<0?-1:1,0],d),uw(ba(l)))}function Ad(t,e,n){var r=n.type,o=n.labelAlign,c=na(t,n),l=z1(e),u=z1(ba(F0([1,0],c))),d="center",h="middle";return r==="linear"?[90,270].includes(u)&&l===0?(d="center",h=c[1]===1?"top":"bottom"):!(u%180)&&[90,270].includes(l)?d="center":u===0?(ji(l,0,90,!1,!0)||ji(l,0,90)||ji(l,270,360))&&(d="start"):u===90?ji(l,0,90,!1,!0)?d="start":(ji(l,90,180)||ji(l,270,360))&&(d="end"):u===270?ji(l,0,90,!1,!0)?d="end":(ji(l,90,180)||ji(l,270,360))&&(d="start"):u===180&&(l===90?d="start":(ji(l,0,90)||ji(l,270,360))&&(d="end")):o==="parallel"?ji(u,0,180,!0)?h="top":h="bottom":o==="horizontal"?ji(u,90,270,!1)?d="end":(ji(u,270,360,!1)||ji(u,0,90))&&(d="start"):o==="perpendicular"&&(ji(u,90,270)?d="end":d="start"),{textAlign:d,textBaseline:h}}function N0(t,e,n){e.setLocalEulerAngles(t);var r=e.__data__.value,o=Ad(r,t,n),c=e.querySelector(Rr.labelItem.class);c&&Eu(c,o)}function Td(t,e,n){var r=n.showTick,o=n.tickLength,c=n.tickDirection,l=n.labelDirection,u=n.labelSpacing,d=e.indexOf(t),h=Bo(u,[t,d,e]),p=(0,X.CR)([na(t.value,n),lw(l,c)],2),v=p[0],m=p[1],b=m===1?Bo(r?o:0,[t,d,e]):0,_=(0,X.CR)(pu(Jo(v,h+b),br(t.value,n)),2),S=_[0],E=_[1];return{x:S,y:E}}function Cd(t,e,n,r){var o=r.labelFormatter,c=(0,go.Z)(o)?function(){return tl(Bo(o,[t,e,n,na(t.value,r)]))}:function(){return tl(t.label||"")};return c}function Eu(t,e){t.nodeName==="text"&&t.attr(e)}function B0(t,e){cw(this.node().childNodes,t,e,{hide:Ha,show:hu,rotate:function(n,r){N0(+r,n,t)},ellipsis:function(n,r,o){n&&Sd(n,r||1/0,o)},wrap:function(n,r,o){n&&yu(n,r,o)},getTextShape:function(n){return n.querySelector("text")}})}function Md(t,e,n,r,o){var c=n.indexOf(e),l=Kn(t).append(Cd(e,c,n,o)).attr("className",Rr.labelItem.name).node(),u=(0,X.CR)(Wa(vu(r,[e,c,n])),2),d=u[0],h=u[1],p=h.transform,v=(0,X._T)(h,["transform"]);Mr(l,p);var m=fw(e,l,o);return l.getLocalEulerAngles()||l.setLocalEulerAngles(m),Eu(l,(0,X.pi)((0,X.pi)({},Ad(e.value,m,o)),d)),t.attr(v),l}function Ld(t,e,n,r,o){var c=ss(e,n.labelFilter),l=sr(n,"label"),u,d=t.selectAll(Rr.label.class).data(c,function(h,p){return p}).join(function(h){return h.append("g").attr("className",Rr.label.name).transition(function(p){Md(this,p,e,l,n);var v=Td(p,e,n),m=v.x,b=v.y;return this.style.transform="translate(".concat(m,", ").concat(b,")"),null})},function(h){return h.transition(function(p){var v=this.querySelector(Rr.labelItem.class),m=Md(this,p,e,l,n),b=v1(v,m,r.update),_=Td(p,e,n),S=_.x,E=_.y,w=Qo(this,{transform:"translate(".concat(S,", ").concat(E,")")},r.update);return(0,X.ev)((0,X.ev)([],(0,X.CR)(b),!1),[w],!1)})},function(h){return u=h,h.transition(function(){var p=this,v=yd(this.childNodes[0],r.exit);return Qs(v,function(){return Kn(p).remove()}),v}),u}).transitions();return _E(d,function(){B0.call(t,n,o)}),d}function el(t,e){return _a(t,e.tickDirection,e)}function vo(t,e){var n=(0,X.CR)(t,2),r=n[0],o=n[1];return[[0,0],[r*e,o*e]]}function j0(t,e,n,r,o){var c=o.tickLength,l=(0,X.CR)(vo(r,Bo(c,[t,e,n])),2),u=(0,X.CR)(l[0],2),d=u[0],h=u[1],p=(0,X.CR)(l[1],2),v=p[0],m=p[1];return{x1:d,x2:v,y1:h,y2:m}}function z0(t,e,n,r,o){var c=o.tickFormatter,l=el(e.value,o),u="line";return(0,go.Z)(c)&&(u=function(){return Bo(c,[e,n,r,l])}),t.append(u).attr("className",Rr.tickItem.name)}function ls(t,e,n,r,o,c,l){var u=el(t.value,c),d=j0(t,e,n,u,c),h=d.x1,p=d.x2,v=d.y1,m=d.y2,b=(0,X.CR)(Wa(vu(l,[t,e,n,u])),2),_=b[0],S=b[1];r.node().nodeName==="line"&&r.styles((0,X.pi)({x1:h,x2:p,y1:v,y2:m},_)),o.attr(S),r.styles(_)}function U1(t,e,n,r,o,c){var l=z0(Kn(this),t,e,n,r);ls(t,e,n,l,this,r,o);var u=(0,X.CR)(br(t.value,r),2),d=u[0],h=u[1];return Qo(this,{transform:"translate(".concat(d,", ").concat(h,")")},c)}function dw(t,e,n,r){var o=ss(e,n.tickFilter),c=sr(n,"tick");return t.selectAll(Rr.tick.class).data(o,function(l){return l.id||l.label}).join(function(l){return l.append("g").attr("className",Rr.tick.name).transition(function(u,d){return U1.call(this,u,d,o,n,c,!1)})},function(l){return l.transition(function(u,d){return this.removeChildren(),U1.call(this,u,d,o,n,c,r.update)})},function(l){return l.transition(function(){var u=this,d=yd(this.childNodes[0],r.exit);return Qs(d,function(){return u.remove()}),d})}).transitions()}var Xr=function(){function t(e,n,r,o){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),o===void 0&&(o=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=n,this.width=r,this.height=o}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom},t}();function hw(t){var e=t.getRenderBounds(),n=__read(e.min,2),r=n[0],o=n[1],c=__read(e.max,2),l=c[0],u=c[1],d=l-r,h=u-o;return new Xr(r,o,d,h)}var U0=No({text:"text"},"title");function us(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(e){return e[0]}):t.length>2?[t[0]]:t.split("")}function pw(t,e){var n=t.attributes,r=n.position,o=n.spacing,c=n.inset,l=n.text,u=t.getBBox(),d=e.getBBox(),h=us(r),p=(0,X.CR)(Yi(l?o:0),4),v=p[0],m=p[1],b=p[2],_=p[3],S=(0,X.CR)(Yi(c),4),E=S[0],w=S[1],C=S[2],M=S[3],L=(0,X.CR)([_+m,v+b],2),R=L[0],j=L[1],z=(0,X.CR)([M+w,E+C],2),H=z[0],$=z[1];if(h[0]==="l")return new Xr(u.x,u.y,d.width+u.width+R+H,Math.max(d.height+$,u.height));if(h[0]==="t")return new Xr(u.x,u.y,Math.max(d.width+H,u.width),d.height+u.height+j+$);var dt=(0,X.CR)([e.attributes.width||d.width,e.attributes.height||d.height],2),gt=dt[0],It=dt[1];return new Xr(d.x,d.y,gt+u.width+R+H,It+u.height+j+$)}function gw(t,e){var n=Object.entries(e).reduce(function(r,o){var c=(0,X.CR)(o,2),l=c[0],u=c[1],d=t.node().attr(l);return d||(r[l]=u),r},{});t.styles(n)}function vw(t){var e,n,r,o,c=t,l=c.width,u=c.height,d=c.position,h=(0,X.CR)([+l/2,+u/2],2),p=h[0],v=h[1],m=(0,X.CR)([+p,+v,"center","middle"],4),b=m[0],_=m[1],S=m[2],E=m[3],w=us(d);return w.includes("l")&&(e=(0,X.CR)([0,"start"],2),b=e[0],S=e[1]),w.includes("r")&&(n=(0,X.CR)([+l,"end"],2),b=n[0],S=n[1]),w.includes("t")&&(r=(0,X.CR)([0,"top"],2),_=r[0],E=r[1]),w.includes("b")&&(o=(0,X.CR)([+u,"bottom"],2),_=o[0],E=o[1]),{x:b,y:_,textAlign:S,textBaseline:E}}var Z0=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return e.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,o=r.width,c=r.height,l=r.position,u=r.spacing,d=r.inset,h=n.querySelector(U0.text.class);if(!h)return new Xr(0,0,+o,+c);var p=h.getBBox(),v=p.width,m=p.height,b=(0,X.CR)(Yi(u),4),_=b[0],S=b[1],E=b[2],w=b[3],C=(0,X.CR)([0,0,+o,+c],4),M=C[0],L=C[1],R=C[2],j=C[3],z=us(l);if(z.includes("i"))return new Xr(M,L,R,j);z.forEach(function(bt,Ht){var Rt,jt,oe,Se;bt==="t"&&(Rt=(0,X.CR)(Ht===0?[m+E,+c-m-E]:[0,+c],2),L=Rt[0],j=Rt[1]),bt==="r"&&(jt=(0,X.CR)([+o-v-w],1),R=jt[0]),bt==="b"&&(oe=(0,X.CR)([+c-m-_],1),j=oe[0]),bt==="l"&&(Se=(0,X.CR)(Ht===0?[v+S,+o-v-S]:[0,+o],2),M=Se[0],R=Se[1])});var H=(0,X.CR)(Yi(d),4),$=H[0],dt=H[1],gt=H[2],It=H[3],rt=(0,X.CR)([It+dt,$+gt],2),lt=rt[0],pt=rt[1];return new Xr(M+It,L+$,R-lt,j-pt)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new Xr(0,0,0,0)},e.prototype.render=function(n,r){var o=this,c=n.width,l=n.height,u=n.position,d=n.spacing,h=(0,X._T)(n,["width","height","position","spacing"]),p=(0,X.CR)(Wa(h),1),v=p[0],m=vw(n),b=m.x,_=m.y,S=m.textAlign,E=m.textBaseline;po(!!h.text,Kn(r),function(w){o.title=w.maybeAppendByClassName(U0.text,"text").styles(v).call(gw,{x:b,y:_,textAlign:S,textBaseline:E}).node()})},e}(Si);function mw(t,e,n){var r=n.titlePosition,o=r===void 0?"lb":r,c=n.titleSpacing,l=us(o),u=t.node().getLocalBounds(),d=(0,X.CR)(u.min,2),h=d[0],p=d[1],v=(0,X.CR)(u.halfExtents,2),m=v[0],b=v[1],_=(0,X.CR)(e.node().getLocalBounds().halfExtents,2),S=_[0],E=_[1],w=(0,X.CR)([h+m,p+b],2),C=w[0],M=w[1],L=(0,X.CR)(Yi(c),4),R=L[0],j=L[1],z=L[2],H=L[3];if(["start","end"].includes(o)&&n.type==="linear"){var $=n.startPos,dt=n.endPos,gt=(0,X.CR)(o==="start"?[$,dt]:[dt,$],2),It=gt[0],rt=gt[1],lt=S1([-rt[0]+It[0],-rt[1]+It[1]]),pt=(0,X.CR)(Jo(lt,R),2),bt=pt[0],Ht=pt[1];return{x:It[0]+bt,y:It[1]+Ht}}return l.includes("t")&&(M-=b+E+R),l.includes("r")&&(C+=m+S+j),l.includes("l")&&(C-=m+S+H),l.includes("b")&&(M+=b+E+z),{x:C,y:M}}function yw(t,e,n){var r=t.getGeometryBounds().halfExtents,o=r[1]*2;if(e==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(o/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(o/2,")")}return""}function Z1(t,e,n,r,o){var c=sr(r,"title"),l=(0,X.CR)(Wa(c),2),u=l[0],d=l[1],h=d.transform,p=d.transformOrigin,v=(0,X._T)(d,["transform","transformOrigin"]);e.styles(v);var m=h||yw(t.node(),u.direction,u.position);t.styles((0,X.pi)((0,X.pi)({},u),{transformOrigin:p})),Mr(t.node(),m);var b=mw(Kn(n._offscreen||n.querySelector(Rr.mainGroup.class)),e,r),_=b.x,S=b.y,E=Qo(e.node(),{transform:"translate(".concat(_,", ").concat(S,")")},o);return E}function Js(t,e,n,r){var o=n.titleText;return t.selectAll(Rr.title.class).data([{title:o}].filter(function(c){return!!c.title}),function(c,l){return c.title}).join(function(c){return c.append(function(){return tl(o)}).attr("className",Rr.title.name).transition(function(){return Z1(Kn(this),t,e,n,r.enter)})},function(c){return c.transition(function(){return Z1(Kn(this),t,e,n,r.update)})},function(c){return c.remove()}).transitions()}function Pd(t,e,n,r){var o=t.showLine,c=t.showTick,l=t.showLabel,u=e.maybeAppendByClassName(Rr.lineGroup,"g"),d=po(o,u,function(b){return zE(b,t,r)})||[],h=e.maybeAppendByClassName(Rr.tickGroup,"g"),p=po(c,h,function(b){return dw(b,n,t,r)})||[],v=e.maybeAppendByClassName(Rr.labelGroup,"g"),m=po(l,v,function(b){return Ld(b,n,t,r,e.node())})||[];return(0,X.ev)((0,X.ev)((0,X.ev)([],(0,X.CR)(d),!1),(0,X.CR)(p),!1),(0,X.CR)(m),!1).filter(function(b){return!!b})}var nl=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,A0)||this}return e.prototype.render=function(n,r,o){var c=this,l=n.titleText,u=n.data,d=n.animate,h=n.showTitle,p=n.showGrid,v=n.dataThreshold,m=n.truncRange,b=EE(u,v).filter(function(R){var j=R.value;return!(m&&j>m[0]&&j<m[1])}),_=p1(o===void 0?d:o),S=Kn(r).maybeAppendByClassName(Rr.gridGroup,"g"),E=po(p,S,function(R){return VE(R,b,n,_)})||[],w=Kn(r).maybeAppendByClassName(Rr.mainGroup,"g");l&&(!this.initialized&&_.enter||this.initialized&&_.update)&&Pd(n,Kn(this.offscreenGroup),b,p1(!1));var C=Pd(n,Kn(w.node()),b,_),M=Kn(r).maybeAppendByClassName(Rr.titleGroup,"g"),L=po(h,M,function(R){return Js(R,c,n,_)})||[];return(0,X.ev)((0,X.ev)((0,X.ev)([],(0,X.CR)(E),!1),(0,X.CR)(C),!1),(0,X.CR)(L),!1).flat().filter(function(R){return!!R})},e}(Si),Ga=function(t){return t};function fs(t,e){return e-t?n=>(n-t)/(e-t):n=>.5}function ds(t,...e){return e.reduce((n,r)=>o=>n(r(o)),t)}function wu(t,e,n,r,o){let c=n||0,l=r||t.length;const u=o||(d=>d);for(;c<l;){const d=Math.floor((c+l)/2);u(t[d])>e?l=d:c=d+1}return c}var Au=k(19818),H0=k.n(Au);function tc(t,e,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Id(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100,o=t[3];if(n===0)return[r*255,r*255,r*255,o];const c=r<.5?r*(1+n):r+n-r*n,l=2*r-c,u=tc(l,c,e+1/3),d=tc(l,c,e),h=tc(l,c,e-1/3);return[u*255,d*255,h*255,o]}function ra(t){const e=H0().get(t);if(!e)return null;const{model:n,value:r}=e;return n==="rgb"?r:n==="hsl"?Id(r):null}const hs=(t,e)=>n=>t*(1-n)+e*n,V0=(t,e)=>{const n=ra(t),r=ra(e);return n===null||r===null?n?()=>t:()=>e:o=>{const c=new Array(4);for(let p=0;p<4;p+=1){const v=n[p],m=r[p];c[p]=v*(1-o)+m*o}const[l,u,d,h]=c;return`rgba(${Math.round(l)}, ${Math.round(u)}, ${Math.round(d)}, ${h})`}},Tu=(t,e)=>typeof t=="number"&&typeof e=="number"?hs(t,e):typeof t=="string"&&typeof e=="string"?V0(t,e):()=>t,UP=(t,e)=>{const n=hs(t,e);return r=>Math.round(n(r))};var rl=k(71154);function H1(t){return t===null}function W0(t){return!(0,rl.Z)(t)&&!H1(t)&&!Number.isNaN(t)}const G0=(t,e,n=5)=>{const r=[t,e];let o=0,c=r.length-1,l=r[o],u=r[c],d;return u<l&&([l,u]=[u,l],[o,c]=[c,o]),d=rd(l,u,n),d>0?(l=Math.floor(l/d)*d,u=Math.ceil(u/d)*d,d=rd(l,u,n)):d<0&&(l=Math.ceil(l*d)/d,u=Math.floor(u*d)/d,d=rd(l,u,n)),d>0?(r[o]=Math.floor(l/d)*d,r[c]=Math.ceil(u/d)*d):d<0&&(r[o]=Math.ceil(l*d)/d,r[c]=Math.floor(u*d)/d),r};function bw(t,e){const n=e<t?e:t,r=t>e?t:e;return o=>Math.min(Math.max(n,o),r)}const _w=(t,e,n)=>{const[r,o]=t,[c,l]=e;let u,d;return r<o?(u=fs(r,o),d=n(c,l)):(u=fs(o,r),d=n(l,c)),ds(d,u)},xw=(t,e,n)=>{const r=Math.min(t.length,e.length)-1,o=new Array(r),c=new Array(r),l=t[0]>t[r],u=l?[...t].reverse():t,d=l?[...e].reverse():e;for(let h=0;h<r;h+=1)o[h]=fs(u[h],u[h+1]),c[h]=n(d[h],d[h+1]);return h=>{const p=wu(t,h,1,r)-1,v=o[p],m=c[p];return ds(m,v)(h)}},V1=(t,e,n,r)=>(Math.min(t.length,e.length)>2?xw:_w)(t,e,r?UP:n);class Rd extends eu{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:hs,tickCount:5}}map(e){return W0(e)?this.output(e):this.options.unknown}invert(e){return W0(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;const[e,n,r,...o]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,n,r,...o)}getTicks(){const{tickMethod:e}=this.options,[n,r,o,...c]=this.getTickMethodOptions();return e(n,r,o,...c)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],o=e[e.length-1];return[r,o,n]}chooseNice(){return G0}rescale(){this.nice();const[e,n]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}chooseClamp(e){const{clamp:n,range:r}=this.options,o=this.options.domain.map(e),c=Math.min(o.length,r.length);return n?bw(o[0],o[c-1]):Ga}composeOutput(e,n){const{domain:r,range:o,round:c,interpolate:l}=this.options,u=V1(r.map(e),o,l,c);this.output=ds(u,n,e)}composeInput(e,n,r){const{domain:o,range:c}=this.options,l=V1(c,o.map(e),hs);this.input=ds(n,r,l)}}class eo extends Rd{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Tu,tickMethod:os,tickCount:5}}chooseTransforms(){return[Ga,Ga]}clone(){return new eo(this.options)}}function Sw(t,e){if(t){var n;if((0,Wi.Z)(t))for(var r=0,o=t.length;r<o&&(n=e(t[r],r),n!==!1);r++);else if((0,au.Z)(t)){for(var c in t)if(t.hasOwnProperty(c)&&(n=e(t[c],c),n===!1))break}}}var kd=Sw,Ow=function(t,e,n){if(!(0,Wi.Z)(t)&&!_i(t))return t;var r=n;return kd(t,function(o,c){r=e(r,o,c)}),r},W1=Ow,$0=function(t,e){return W1(t,function(n,r,o){return e.includes(o)||(n[o]=r),n},{})};function $a(t,e){let n,r;if(e===void 0)for(const o of t)o!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)));else{let o=-1;for(let c of t)(c=e(c,++o,t))!=null&&(n===void 0?c>=c&&(n=r=c):(n>c&&(n=c),r<c&&(r=c)))}return[n,r]}function G1(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,c=0;c<t.length;c++){var l=t[c],u=l.x,d=l.y,h=l.width,p=l.height,v=(0,X.CR)([u+h,d+p],2),m=v[0],b=v[1];u<e&&(e=u),d<n&&(n=d),m>r&&(r=m),b>o&&(o=b)}return new Xr(e,n,r-e,o-n)}var $1=function(t,e,n){var r=t.width,o=t.height,c=n.flexDirection,l=c===void 0?"row":c,u=n.flexWrap,d=u===void 0?"nowrap":u,h=n.justifyContent,p=h===void 0?"flex-start":h,v=n.alignContent,m=v===void 0?"flex-start":v,b=n.alignItems,_=b===void 0?"flex-start":b,S=l==="row",E=l==="row"||l==="column",w=S?E?[1,0]:[-1,0]:E?[0,1]:[0,-1],C=(0,X.CR)([0,0],2),M=C[0],L=C[1],R=e.map(function(rt){var lt,pt=rt.width,bt=rt.height,Ht=(0,X.CR)([M,L],2),Rt=Ht[0],jt=Ht[1];return lt=(0,X.CR)([M+pt*w[0],L+bt*w[1]],2),M=lt[0],L=lt[1],new Xr(Rt,jt,pt,bt)}),j=G1(R),z={"flex-start":0,"flex-end":S?r-j.width:o-j.height,center:S?(r-j.width)/2:(o-j.height)/2},H=R.map(function(rt){var lt=rt.x,pt=rt.y,bt=Xr.fromRect(rt);return bt.x=S?lt+z[p]:lt,bt.y=S?pt:pt+z[p],bt}),$=G1(H),dt=function(rt){var lt=(0,X.CR)(S?["height",o]:["width",r],2),pt=lt[0],bt=lt[1];switch(_){case"flex-start":return 0;case"flex-end":return bt-rt[pt];case"center":return bt/2-rt[pt]/2;default:return 0}},gt=H.map(function(rt){var lt=rt.x,pt=rt.y,bt=Xr.fromRect(rt);return bt.x=S?lt:lt+dt(bt),bt.y=S?pt+dt(bt):pt,bt}),It=gt.map(function(rt){var lt,pt,bt=Xr.fromRect(rt);return bt.x+=(lt=t.x)!==null&&lt!==void 0?lt:0,bt.y+=(pt=t.y)!==null&&pt!==void 0?pt:0,bt});return It},Ew=function(t,e,n){return[]},Y1=function(t,e,n){if(e.length===0)return[];var r={flex:$1,grid:Ew},o=n.display in r?r[n.display]:null;return(o==null?void 0:o.call(null,t,e,n))||[]},ww=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n)||this;r.layoutEvents=[I.Dk.BOUNDS_CHANGED,I.Dk.INSERTED,I.Dk.REMOVED],r.$margin=Yi(0),r.$padding=Yi(0);var o=n.style||{},c=o.margin,l=c===void 0?0:c,u=o.padding,d=u===void 0?0:u;return r.margin=l,r.padding=d,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(e.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=Yi(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=Yi(n)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.x,o=r===void 0?0:r,c=n.y,l=c===void 0?0:c,u=n.width,d=n.height,h=(0,X.CR)(this.$margin,4),p=h[0],v=h[1],m=h[2],b=h[3];return new Xr(o-b,l-p,u+b+v,d+p+m)},e.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,t.prototype.appendChild.call(this,n,r),n},e.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,o=n.height,c=(0,X.CR)(this.$padding,4),l=c[0],u=c[1],d=c[2],h=c[3],p=(0,X.CR)(this.$margin,4),v=p[0],m=p[3];return new Xr(h+m,l+v,r-h-u,o-l-d)},e.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(l){return!l.isConnected}))try{var n=this.attributes,r=n.x,o=n.y;this.style.transform="translate(".concat(r,", ").concat(o,")");var c=Y1(this.getAvailableSpace(),this.children.map(function(l){return l.getBBox()}),this.attributes);this.children.forEach(function(l,u){var d=c[u],h=d.x,p=d.y;l.style.transform="translate(".concat(h,", ").concat(p,")")})}catch(l){}},e.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(o){o.target&&(o.target.isMutationObserved=!0,n.layout())})})},e.prototype.attributeChangedCallback=function(n,r,o){n==="margin"?this.margin=o:n==="padding"&&(this.padding=o),this.layout()},e}(I.ZA),X1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Aw(t){return class extends I.b_{constructor(e){super(e),this.descriptor=t}connectedCallback(){var e,n;(n=(e=this.descriptor).render)===null||n===void 0||n.call(e,this.attributes,this)}update(e={}){var n,r;this.attr(an({},this.attributes,e)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function Y0(t,e,n){return t.querySelector(e)?Gn(t).select(e):Gn(t).append(n)}function Cu(t){return Array.isArray(t)?t.join(", "):`${t||""}`}function q1(t,e){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:o,alignItems:c}=n;const l={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return t in l&&([r,o,c]=l[t]),Object.assign({display:"flex",flexDirection:r,justifyContent:o,alignItems:c},e)}class K1 extends ww{get child(){var e;return(e=this.children)===null||e===void 0?void 0:e[0]}update(e){var n;this.attr(e);const{subOptions:r}=e;(n=this.child)===null||n===void 0||n.update(r)}}class Tw extends K1{update(e){var n;const{subOptions:r}=e;this.attr(e),(n=this.child)===null||n===void 0||n.update(r)}}function Sa(t,e){var n;return(n=t.filter(r=>r.getOptions().name===e))===null||n===void 0?void 0:n[0]}function X0(t){return t==="horizontal"||t===0}function Cw(t){return t==="vertical"||t===-Math.PI/2}function Q1(t,e,n){const{bbox:r}=t,{position:o="top",size:c,length:l}=e,u=["top","bottom","center"].includes(o),[d,h]=u?[r.height,r.width]:[r.width,r.height],{defaultSize:p,defaultLength:v}=n.props,m=c||p||d,b=l||v||h,_=u?"horizontal":"vertical",[S,E]=u?[b,m]:[m,b];return{orientation:_,width:S,height:E,size:m,length:b}}function Mw(t){return t.find(e=>e.getOptions().domain.length>0).getOptions().domain}function Dd(t){const e=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=t,r=X1(t,["style"]),o={};return Object.entries(r).forEach(([c,l])=>{e.includes(c)?o[`show${Ua(c)}`]=l:o[c]=l}),Object.assign(Object.assign({},o),n)}var J1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function tb(t,e){const{eulerAngles:n,origin:r}=e;r&&t.setOrigin(r),n&&t.rotate(n[0],n[1],n[2])}function eb(t){const{innerWidth:e,innerHeight:n,depth:r}=t.getOptions();return[e,n,r]}function q0(t,e){const{width:n,height:r}=e.getOptions();return o=>{if(!d1(e))return o;const c=t==="bottom"?[o,1]:[0,o],l=e.map(c);if(t==="bottom"){const u=l[0];return new eo({domain:[0,n],range:[0,1]}).map(u)}else if(t==="left"){const u=l[1];return new eo({domain:[0,r],range:[0,1]}).map(u)}return o}}function Lw(t,e,n){if(t.getTicks)return t.getTicks();if(!n)return e;const[r,o]=$a(e,l=>+l),{tickCount:c}=t.getOptions();return n(r,o,c)}function Pw(t,e){if(Ar(e))return b=>b;const n=e.getOptions(),{innerWidth:r,innerHeight:o,insetTop:c,insetBottom:l,insetLeft:u,insetRight:d}=n,[h,p,v]=t==="left"||t==="right"?[c,l,o]:[u,d,r],m=new eo({domain:[0,1],range:[h/v,1-p/v]});return b=>m.map(b)}function nb(t,e,n,r,o,c,l,u){var d;(n!==void 0||c!==void 0)&&t.update(Object.assign(Object.assign({},n&&{tickCount:n}),c&&{tickMethod:c}));const h=Lw(t,e,c),p=o?h.filter(o):h,v=w=>w instanceof Date?String(w):typeof w=="object"&&w?w:String(w),m=r||((d=t.getFormatter)===null||d===void 0?void 0:d.call(t))||v,b=Pw(l,u),_=q0(l,u),S=w=>["top","bottom","center","outer"].includes(w),E=w=>["left","right"].includes(w);return Ar(u)||Zr(u)?p.map((w,C,M)=>{var L,R;const j=((L=t.getBandWidth)===null||L===void 0?void 0:L.call(t,w))/2||0,z=b(t.map(w)+j);return{value:uu(u)&&l==="center"||Zr(u)&&((R=t.getTicks)===null||R===void 0?void 0:R.call(t))&&S(l)||Zr(u)&&E(l)?1-z:z,label:v(m(pd(w),C,M)),id:String(C)}}):p.map((w,C,M)=>{var L;const R=((L=t.getBandWidth)===null||L===void 0?void 0:L.call(t,w))/2||0,j=_(b(t.map(w)+R));return{value:E(l)?1-j:j,label:v(m(pd(w),C,M)),id:String(C)}})}function Iw(t,e,n="xy"){const[r,o,c]=eb(e);return n==="xy"?t.includes("bottom")||t.includes("top")?o:r:n==="xz"?t.includes("bottom")||t.includes("top")?c:r:t.includes("bottom")||t.includes("top")?o:c}function Rw(t=[],e){if(t.length>0)return t;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:o,labelAutoWrap:c}=e,l=[],u=(d,h)=>{h&&l.push(Object.assign(Object.assign({},d),h))};return u({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),u({type:"ellipsis",minLength:20},o),u({type:"hide"},r),u({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},c),l}function kw(t,e,n,r,o){const{x:c,y:l,width:u,height:d}=e,h=[c+u/2,l+d/2],p=Math.min(u,d)/2,[v,m]=x0(o),[b,_]=eb(o),S=Math.min(b,_)/2,E={center:h,radius:p,startAngle:v,endAngle:m,gridLength:(r-n)*S};if(t==="inner"){const{insetLeft:w,insetTop:C}=o.getOptions();return Object.assign(Object.assign({},E),{center:[h[0]-w,h[1]-C],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},E),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function Dw(t,e,n){return h1(e)||fu(e)?!1:t===void 0?!!n.getTicks:t}function Fw(t){const{depth:e}=t.getOptions();return e?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function Nw(t,e,n,r,o){const{x:c,y:l,width:u,height:d}=n;if(t==="bottom")return{startPos:[c,l],endPos:[c+u,l]};if(t==="left")return{startPos:[c+u,l+d],endPos:[c+u,l]};if(t==="right")return{startPos:[c,l+d],endPos:[c,l]};if(t==="top")return{startPos:[c,l+d],endPos:[c+u,l+d]};if(t==="center"){if(e==="vertical")return{startPos:[c,l],endPos:[c,l+d]};if(e==="horizontal")return{startPos:[c,l],endPos:[c+u,l]};if(typeof e=="number"){const[h,p]=r.getCenter(),[v,m]=du(r),[b,_]=x0(r),S=Math.min(u,d)/2,{insetLeft:E,insetTop:w}=r.getOptions(),C=v*S,M=m*S,[L,R]=[h+c-E,p+l-w],[j,z]=[Math.cos(e),Math.sin(e)],H=[L+M*j,R+M*z],$=[L+C*j,R+C*z],dt=()=>{const{domain:It}=o.getOptions();return It.length},gt=Ar(r)&&o?dt():3;return{startPos:H,endPos:$,gridClosed:Math.abs(_-b-360)<1e-6,gridCenter:[L,R],gridControlAngles:new Array(gt).fill(0).map((It,rt,lt)=>(_-b)/gt*rt)}}}return{}}const Bw=t=>{const{order:e,size:n,position:r,orientation:o,labelFormatter:c,tickFilter:l,tickCount:u,tickMethod:d,important:h={},style:p={},indexBBox:v,title:m,grid:b=!1}=t,_=J1(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[S],value:E,coordinate:w,theme:C})=>{const{bbox:M}=E,{domain:L}=S.getOptions(),R=nb(S,L,u,c,l,d,r,w),j=v?R.map((rt,lt)=>{const pt=v.get(lt);return!pt||pt[0]!==rt.label?rt:Object.assign(Object.assign({},rt),{bbox:pt[1]})}):R,[z,H]=du(w),$=kw(r,M,z,H,w),{axis:dt,axisArc:gt={}}=C,It=Dd(an({},dt,gt,$,Object.assign(Object.assign({type:"arc",data:j,titleText:Cu(m),grid:b},_),h)));return new nl({style:$0(It,["transform"])})}};function jw(t,e,n,r,o,c){const l=n.axis,u=["top","right","bottom","left"].includes(o)?n[`axis${i0(o)}`]:n.axisLinear,d=t.getOptions().name,h=n[`axis${Ua(d)}`]||{};return Object.assign({},l,u,h)}function zw(t,e,n,r,o,c){const l=jw(t,e,n,r,o,c);return o==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},l),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:Cw(c)?10:0,tick:r==="center"?!1:void 0}):l}const Uw=t=>{const{direction:e="left",important:n={},labelFormatter:r,order:o,orientation:c,actualPosition:l,position:u,size:d,style:h={},title:p,tickCount:v,tickFilter:m,tickMethod:b,transform:_,indexBBox:S}=t,E=J1(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:w,value:C,coordinate:M,theme:L})=>{const{bbox:R}=C,[j]=w,{domain:z,xScale:H}=j.getOptions(),$=zw(j,M,L,e,u,c),dt=Object.assign(Object.assign(Object.assign({},$),h),E),gt=Iw(l||u,M,t.plane),It=Nw(u,c,R,M,H),rt=Fw(M),lt=nb(j,z,v,r,m,b,u,M),pt=S?lt.map((Rt,jt)=>{const oe=S.get(jt);return!oe||oe[0]!==Rt.label?Rt:Object.assign(Object.assign({},Rt),{bbox:oe[1]})}):lt,bt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},dt),{type:"linear",data:pt,crossSize:d,titleText:Cu(p),labelOverlap:Rw(_,dt),grid:Dw(dt.grid,M,j),gridLength:gt,line:!0,indexBBox:S}),dt.line?null:{lineOpacity:0}),It),rt),n);return bt.labelOverlap.find(Rt=>Rt.type==="hide")&&(bt.crossSize=!1),new nl({className:"axis",style:Dd(bt)})}},rb=t=>e=>{const{labelFormatter:n,labelFilter:r=()=>!0}=e;return o=>{var c;const{scales:[l]}=o,u=((c=l.getTicks)===null||c===void 0?void 0:c.call(l))||l.getOptions().domain,d=typeof n=="string"?Za(n):n,h=(v,m,b)=>r(u[m],m,u),p=Object.assign(Object.assign({},e),{labelFormatter:d,labelFilter:h,scale:l});return t(p)(o)}},ps=rb(Uw),ib=rb(Bw);ps.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},ib.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var Zw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Hw(t){const e=t%(Math.PI*2);return e===Math.PI/2?{titleTransform:"translate(0, 50%)"}:e>-Math.PI/2&&e<Math.PI/2?{titleTransform:"translate(50%, 0)"}:e>Math.PI/2&&e<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function Vw(t,e,n,r){const{radar:o}=t,[c]=r,l=c.getOptions().name,[u,d]=x0(n),{axisRadar:h={}}=e;return Object.assign(Object.assign({},h),{grid:l==="position",gridConnect:"line",gridControlAngles:new Array(o.count).fill(0).map((p,v)=>(d-u)/o.count*v)})}const ob=t=>{const{important:e={}}=t,n=Zw(t,["important"]);return r=>{const{theme:o,coordinate:c,scales:l}=r;return ps(Object.assign(Object.assign(Object.assign({},n),Hw(t.orientation)),{important:Object.assign(Object.assign({},Vw(t,o,c,l)),e)}))(r)}};ob.props=Object.assign(Object.assign({},ps.props),{defaultPosition:"center"});function Fd(t,e){return+t.toPrecision(e)}function ZP(t){return t.toLocaleString()}function HP(t){return t.toExponential()}function VP(t,e){return e===void 0&&(e=0),Math.abs(t)<1e3?String(t):"".concat(Fd(t/1e3,e).toLocaleString(),"K")}var WP=function(t,e,n){return t<0&&Number.isFinite(t)?e:n},GP=function(t,e,n){return t>0&&Number.isFinite(t)?e:n},$P=function(t,e){return t*e},Ww=function(t,e){return t/2+(e||0)/2};function Nd(t){var e=t.canvas,n=t.touches,r=t.offsetX,o=t.offsetY;if(e){var c=e.x,l=e.y;return[c,l]}if(n){var u=n[0],d=u.clientX,h=u.clientY;return[d,h]}return r&&o?[r,o]:[0,0]}var Gw={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},ec=No({background:"background",labelGroup:"label-group",label:"label"},"indicator"),Bd=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,Gw)||this;return r.point=[0,0],r.group=r.appendChild(new I.ZA({})),r.isMutationObserved=!0,r}return e.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,o=n.padding,c=(0,X.CR)(Yi(o),4),l=c[0],u=c[1],d=c[2],h=c[3],p=this.label.node().getLocalBounds(),v=p.min,m=p.max,b=new Xr(v[0]-h,v[1]-l,m[0]+u-v[0]+h,m[1]+d-v[1]+l),_=this.getPath(r,b),S=sr(this.attributes,"background");this.background=Kn(this.group).maybeAppendByClassName(ec.background,"path").styles((0,X.pi)((0,X.pi)({},S),{d:_})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,o=n.labelText,c=sr(this.attributes,"label"),l=(0,X.CR)(Wa(c),2),u=l[0],d=l[1],h=u.text,p=(0,X._T)(u,["text"]);if(this.label=Kn(this.group).maybeAppendByClassName(ec.labelGroup,"g").styles(d),!!o){var v=this.label.maybeAppendByClassName(ec.label,function(){return tl(r(o))}).style("text",r(o).toString());v.selectAll("text").styles(p)}},e.prototype.adjustLayout=function(){var n=(0,X.CR)(this.point,2),r=n[0],o=n[1],c=this.attributes,l=c.x,u=c.y;this.group.attr("transform","translate(".concat(l-r,", ").concat(u-o,")"))},e.prototype.getPath=function(n,r){var o=this.attributes.radius,c=r.x,l=r.y,u=r.width,d=r.height,h=[["M",c+o,l],["L",c+u-o,l],["A",o,o,0,0,1,c+u,l+o],["L",c+u,l+d-o],["A",o,o,0,0,1,c+u-o,l+d],["L",c+o,l+d],["A",o,o,0,0,1,c,l+d-o],["L",c,l+o],["A",o,o,0,0,1,c+o,l],["Z"]],p={top:4,right:6,bottom:0,left:2},v=p[n],m=this.createCorner([h[v].slice(-2),h[v+1].slice(-2)]);return h.splice.apply(h,(0,X.ev)([v+1,1],(0,X.CR)(m),!1)),h[0][0]="M",h},e.prototype.createCorner=function(n,r){r===void 0&&(r=10);var o=.8,c=ew.apply(void 0,(0,X.ev)([],(0,X.CR)(n),!1)),l=(0,X.CR)(n,2),u=(0,X.CR)(l[0],2),d=u[0],h=u[1],p=(0,X.CR)(l[1],2),v=p[0],m=p[1],b=(0,X.CR)(c?[v-d,[d,v]]:[m-h,[h,m]],2),_=b[0],S=(0,X.CR)(b[1],2),E=S[0],w=S[1],C=_/2,M=_/Math.abs(_),L=r*M,R=L/2,j=L*Math.sqrt(3)/2*o,z=(0,X.CR)([E,E+C-R,E+C,E+C+R,w],5),H=z[0],$=z[1],dt=z[2],gt=z[3],It=z[4];return c?(this.point=[dt,h-j],[["L",H,h],["L",$,h],["L",dt,h-j],["L",gt,h],["L",It,h]]):(this.point=[d+j,dt],[["L",d,H],["L",d,$],["L",d+j,dt],["L",d,gt],["L",d,It]])},e.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?Ha(this):hu(this)},e.prototype.bindEvents=function(){this.label.on(I.Dk.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(Si),zi={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},K0={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},ab={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},Oa=No({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),gs=No({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),$w=function(t){(0,X.ZT)(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var o=n.x,c=n.y,l=n.size,u=l===void 0?10:l,d=n.radius,h=d===void 0?u/4:d,p=n.orientation,v=(0,X._T)(n,["x","y","size","radius","orientation"]),m=u,b=m*2.4,_=Kn(r).maybeAppendByClassName(gs.iconRect,"rect").styles((0,X.pi)((0,X.pi)({},v),{width:m,height:b,radius:h,x:o-m/2,y:c-b/2,transformOrigin:"center"})),S=o+1/3*m-m/2,E=o+2/3*m-m/2,w=c+1/4*b-b/2,C=c+3/4*b-b/2;_.maybeAppendByClassName("".concat(gs.iconLine,"-1"),"line").styles((0,X.pi)({x1:S,x2:S,y1:w,y2:C},v)),_.maybeAppendByClassName("".concat(gs.iconLine,"-2"),"line").styles((0,X.pi)({x1:E,x2:E,y1:w,y2:C},v)),p==="vertical"&&(_.node().style.transform="rotate(90)")},e}(Si),Q0=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,ab)||this}return e.prototype.renderLabel=function(n){var r=this,o=this.attributes,c=o.x,l=o.y,u=o.showLabel,d=sr(this.attributes,"label"),h=d.x,p=h===void 0?0:h,v=d.y,m=v===void 0?0:v,b=d.transform,_=d.transformOrigin,S=(0,X._T)(d,["x","y","transform","transformOrigin"]),E=(0,X.CR)(Wa(S,[]),2),w=E[0],C=E[1],M=Kn(n).maybeAppendByClassName(gs.labelGroup,"g").styles(C),L=(0,X.pi)((0,X.pi)({},K0),w),R=L.text,j=(0,X._T)(L,["text"]);po(!!u,M,function(z){r.label=z.maybeAppendByClassName(gs.label,"text").styles((0,X.pi)((0,X.pi)({},j),{x:c+p,y:l+m,transform:b,transformOrigin:_,text:"".concat(R)})),r.label.on("mousedown",function(H){H.stopPropagation()}),r.label.on("touchstart",function(H){H.stopPropagation()})})},e.prototype.renderIcon=function(n){var r=this.attributes,o=r.x,c=r.y,l=r.orientation,u=r.type,d=(0,X.pi)((0,X.pi)({x:o,y:c,orientation:l},zi),sr(this.attributes,"icon")),h=this.attributes.iconShape,p=h===void 0?function(){return new $w({style:d})}:h,v=Kn(n).maybeAppendByClassName(gs.iconGroup,"g");v.selectAll(gs.icon.class).data([p]).join(function(m){return m.append(typeof p=="string"?p:function(){return p(u)}).attr("className",gs.icon.name)},function(m){return m.update(d)},function(m){return m.remove()})},e.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},e}(Si),sb=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},Yw=sb,Xw=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},cb=function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},qw=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},Kw=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]},lb=function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},ub=function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},J0=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},fb=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},Qw=function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},Jw=function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},tA=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},db=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},eA=db,hb=function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},nA=function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},rA=function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},pb=function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]};function jd(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}var gb=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]};function vb(t){var e="default";if((0,au.Z)(t)&&t instanceof Image)e="image";else if((0,go.Z)(t))e="symbol";else if((0,Wt.Z)(t)){var n=new RegExp("data:(image|text)");t.match(n)?e="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?e="url":e="symbol"}return e}function iA(t){var e=vb(t);return["base64","url","image"].includes(e)?"image":t&&e==="symbol"?"path":null}var _r=function(t){(0,X.ZT)(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var o=n.x,c=o===void 0?0:o,l=n.y,u=l===void 0?0:l,d=this.getSubShapeStyle(n),h=d.symbol,p=d.size,v=p===void 0?16:p,m=(0,X._T)(d,["symbol","size"]),b=iA(h);po(!!b,Kn(r),function(_){_.maybeAppendByClassName("marker",b).attr("className","marker ".concat(b,"-marker")).call(function(S){if(b==="image"){var E=v*2;S.styles({img:h,width:E,height:E,x:c-v,y:u-v})}else{var E=v/2,w=(0,go.Z)(h)?h:e.getSymbol(h);S.styles((0,X.pi)({d:w==null?void 0:w(c,u,E)},m))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(n,r){e.MARKER_SYMBOL_MAP.set(n,r)},e.getSymbol=function(n){return e.MARKER_SYMBOL_MAP.get(n)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(Si);_r.registerSymbol("cross",fb),_r.registerSymbol("hyphen",tA),_r.registerSymbol("line",J0),_r.registerSymbol("plus",Jw),_r.registerSymbol("tick",Qw),_r.registerSymbol("circle",sb),_r.registerSymbol("point",Yw),_r.registerSymbol("bowtie",ub),_r.registerSymbol("hexagon",lb),_r.registerSymbol("square",Xw),_r.registerSymbol("diamond",cb),_r.registerSymbol("triangle",qw),_r.registerSymbol("triangle-down",Kw),_r.registerSymbol("line",J0),_r.registerSymbol("dot",db),_r.registerSymbol("dash",eA),_r.registerSymbol("smooth",hb),_r.registerSymbol("hv",nA),_r.registerSymbol("vh",rA),_r.registerSymbol("hvh",pb),_r.registerSymbol("vhv",jd);function mb(t,e,n){var r=Math.round((t-n)/e);return n+r*e}function oA(t,e,n){var r=1.4,o=r*n;return[["M",t-n,e-o],["L",t+n,e-o],["L",t+n,e+o],["L",t-n,e+o],["Z"]]}var yb=1.4,bb=.4;function _b(t,e,n){var r=n,o=r*yb,c=r/2,l=r/6,u=t+o*bb;return[["M",t,e],["L",u,e+c],["L",t+o,e+c],["L",t+o,e-c],["L",u,e-c],["Z"],["M",u,e+l],["L",t+o-2,e+l],["M",u,e-l],["L",t+o-2,e-l]]}function aA(t,e,n){var r=n,o=r*yb,c=r/2,l=r/6,u=e+o*bb;return[["M",t,e],["L",t-c,u],["L",t-c,e+o],["L",t+c,e+o],["L",t+c,u],["Z"],["M",t-l,u],["L",t-l,e+o-2],["M",t+l,u],["L",t+l,e+o-2]]}_r.registerSymbol("hiddenHandle",oA),_r.registerSymbol("verticalHandle",_b),_r.registerSymbol("horizontalHandle",aA);var YP=function(t,e,n){return t===void 0&&(t="horizontal"),t==="horizontal"?e:n};function xb(t,e,n,r){var o;r===void 0&&(r=4);var c=(0,X.CR)(t,2),l=c[0],u=c[1],d=(0,X.CR)(e,2),h=d[0],p=d[1],v=(0,X.CR)(n,2),m=v[0],b=v[1],_=(0,X.CR)([h,p],2),S=_[0],E=_[1],w=E-S;return S>E&&(o=(0,X.CR)([E,S],2),S=o[0],E=o[1]),w>u-l?[l,u]:S<l?m===l&&b===E?[l,E]:[l,w+l]:E>u?b===u&&m===S?[S,u]:[u-w,u]:[S,E]}function ia(t,e,n){return t===void 0&&(t="horizontal"),t==="horizontal"?e:n}var Mu=No({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),Sb={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},XP=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,Sb)||this}return e.prototype.render=function(n,r){var o=Kn(r).maybeAppendByClassName(Mu.markerGroup,"g");this.renderMarker(o);var c=Kn(r).maybeAppendByClassName(Mu.labelGroup,"g");this.renderLabel(c)},e.prototype.renderMarker=function(n){var r=this,o=this.attributes,c=o.orientation,l=o.markerSymbol,u=l===void 0?ia(c,"horizontalHandle","verticalHandle"):l;po(!!u,n,function(d){var h=sr(r.attributes,"marker"),p=(0,X.pi)({symbol:u},h);r.marker=d.maybeAppendByClassName(Mu.marker,function(){return new _r({style:p})}).update(p)})},e.prototype.renderLabel=function(n){var r=this,o=this.attributes,c=o.showLabel,l=o.orientation,u=o.spacing,d=u===void 0?0:u,h=o.formatter;po(c,n,function(p){var v,m=sr(r.attributes,"label"),b=m.text,_=(0,X._T)(m,["text"]),S=((v=p.select(Mu.marker.class))===null||v===void 0?void 0:v.node().getBBox())||{},E=S.width,w=E===void 0?0:E,C=S.height,M=C===void 0?0:C,L=(0,X.CR)(ia(l,[0,M+d,"center","top"],[w+d,0,"start","middle"]),4),R=L[0],j=L[1],z=L[2],H=L[3];p.maybeAppendByClassName(Mu.label,"text").styles((0,X.pi)((0,X.pi)({},_),{x:R,y:j,text:h(b).toString(),textAlign:z,textBaseline:H}))})},e}(Si),Ob={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},sA=Va({},Ob,{}),cA=Va({},Ob,ea(Sb,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),lA=.01,qP=.5,Ei=No({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function Eb(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],o=t[n];if(e>=r&&e<=o)return[r,o]}return[e,e]}function wb(t,e,n){var r=Array.from(e),o=t.length;return new Array(o).fill(0).reduce(function(c,l,u){var d=r[u%r.length];return c+=" ".concat(t[u],":").concat(d).concat(u<o-1?" ".concat(t[u+1],":").concat(d):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function tg(t,e){var n=(0,X.CR)(Eb(t,e),2),r=n[0],o=n[1];return{tick:e>(r+o)/2?o:r,range:[r,o]}}var Lu=No({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function Ab(t){var e=t.orientation,n=t.size,r=t.length;return ia(e,[r,n],[n,r])}function Tb(t){var e=t.type,n=(0,X.CR)(Ab(t),2),r=n[0],o=n[1];return e==="size"?[["M",0,o],["L",0+r,0],["L",0+r,o],["Z"]]:[["M",0,o],["L",0,0],["L",0+r,0],["L",0+r,o],["Z"]]}function uA(t){return Tb(t)}function fA(t){var e=t.orientation,n=t.color,r=t.block,o=t.partition,c;if((0,go.Z)(n)){var l=20;c=new Array(l).fill(0).map(function(h,p,v){return n(p/(v.length-1))})}else c=n;var u=c.length,d=c.map(function(h){return(0,I.lu)(h).toString()});return u?u===1?d[0]:r?wb(o,d,e):d.reduce(function(h,p,v){return h+=" ".concat(v/(u-1),":").concat(p)},"l(".concat(ia(e,"0","270"),")")):""}function dA(t){var e=t.orientation,n=t.range;if(!n)return[];var r=(0,X.CR)(Ab(t),2),o=r[0],c=r[1],l=(0,X.CR)(n,2),u=l[0],d=l[1],h=ia(e,u*o,0),p=ia(e,0,u*c),v=ia(e,d*o,o),m=ia(e,c,d*c);return[["M",h,p],["L",h,m],["L",v,m],["L",v,p],["Z"]]}function hA(t,e){var n=sr(e,"track");t.maybeAppendByClassName(Lu.track,"path").styles((0,X.pi)({d:Tb(e)},n))}function zd(t,e){var n=sr(e,"selection"),r=fA(e),o=t.maybeAppendByClassName(Lu.selection,"path").styles((0,X.pi)({d:uA(e),fill:r},n)),c=o.maybeAppendByClassName(Lu.clipPath,"path").styles({d:dA(e)}).node();o.style("clipPath",c)}var Cb=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return e.prototype.render=function(n,r){var o=Kn(r).maybeAppendByClassName(Lu.trackGroup,"g");hA(o,n);var c=Kn(r).maybeAppendByClassName(Lu.selectionGroup,"g");zd(c,n)},e}(Si);function Mb(t){return{min:Math.min.apply(Math,(0,X.ev)([],(0,X.CR)(t.map(function(e){return e.value})),!1)),max:Math.max.apply(Math,(0,X.ev)([],(0,X.CR)(t.map(function(e){return e.value})),!1))}}var Lb=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,cA)||this;return r.eventToOffsetScale=new eo({}),r.innerRibbonScale=new eo({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(o){var c=r.attributes,l=c.data,u=c.block;o.stopPropagation();var d=r.getValueByCanvasPoint(o);if(u){var h=tg(l.map(function(m){var b=m.value;return b}),d).range,p=r.getRealSelection(h);r.showIndicator((h[0]+h[1])/2,"".concat(p[0],"-").concat(p[1])),r.dispatchIndicated(d,h)}else{var v=r.getTickValue(d);r.showIndicator(v,"".concat(r.getRealValue(v))),r.dispatchIndicated(v)}},r.onDragStart=function(o){return function(c){c.stopPropagation(),r.attributes.slidable&&(r.target=o,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(c)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(o){var c=r.target;r.updateMouse();var l=(0,X.CR)(r.selection,2),u=l[0],d=l[1],h=r.getTickValue(r.getValueByCanvasPoint(o)),p=h-r.prevValue;c==="start"?u!==h&&r.updateSelection(h,d):c==="end"?d!==h&&r.updateSelection(u,h):c==="ribbon"&&p!==0&&(r.prevValue=h,r.updateSelection(p,p,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(e.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.width,o=n.height;return new Xr(0,0,r,o)},e.prototype.render=function(n,r){var o=this,c=n.showLabel;this.renderTitle(Kn(r));var l=this.availableSpace,u=l.x,d=l.y,h=Kn(r).maybeAppendByClassName(Ei.contentGroup,"g").styles({transform:"translate(".concat(u,", ").concat(d,")")}),p=h.maybeAppendByClassName(Ei.labelGroup,"g").styles({zIndex:1});po(!!c,p,function(m){o.renderLabel(m)});var v=h.maybeAppendByClassName(Ei.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=h.maybeAppendByClassName(Ei.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(v),this.renderIndicator(h),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(e.prototype,"range",{get:function(){var n=this.attributes,r=n.data,o=n.domain;return o?{min:o[0],max:o[1]}:Mb(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,o=n.max;return this.innerRibbonScale.update({domain:[r,o],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonRange",{get:function(){var n=(0,X.CR)(this.selection,2),r=n[0],o=n[1],c=this.ribbonScale;return[c.map(r),c.map(o)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var n=this.range,r=n.min,o=n.max,c=this.attributes.defaultValue,l=c===void 0?[r,o]:c,u=(0,X.CR)(l,2),d=u[0],h=u[1];return[d,h]},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){return ia(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},e.prototype.renderTitle=function(n){var r=this.attributes,o=r.showTitle,c=r.titleText,l=r.width,u=r.height,d=sr(this.attributes,"title"),h=(0,X.pi)((0,X.pi)({},d),{width:l,height:u,text:c}),p=this;n.selectAll(Ei.title.class).data(o?[c]:[]).join(function(v){return v.append(function(){return new Z0({style:h})}).attr("className",Ei.title.name).each(function(){p.title=this})},function(v){return v.update(h)},function(v){return v.each(function(){p.title=void 0}).remove()})},Object.defineProperty(e.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,o=n.height;return new Xr(0,0,r,o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,o=n.labelDirection,c={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return c[r][o]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Xr(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var o=((n=this.label.querySelector(Rr.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),c=o.width,l=o.height;return this.cacheLabelBBox=new Xr(0,0,c,l),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,o=n.labelSpacing,c=o===void 0?0:o;if(!r)return{width:0,height:0,size:0,length:0};var l=this.labelBBox,u=l.width,d=l.height,h=this.ifHorizontal(d,u)+c+this.labelFixedSpacing,p=this.ifHorizontal(u,d);return{width:u,height:d,size:h,length:p}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,o=n.ribbonSize,c=this.availableSpace,l=c.width,u=c.height,d=this.labelShape,h=d.size,p=d.length,v=(0,X.CR)(this.ifHorizontal([u,l],[l,u]),2),m=v[0],b=v[1],_=r?this.handleShape:{size:0,length:0},S=_.size,E=_.length,w=this.handleOffsetRatio,C=0,M=this.labelPosition;o?C=o:["bottom","right"].includes(M)?C=Math.min(m-h,(m-S)/w):m*(1-w)>S?C=Math.max(m-h,0):C=Math.max((m-h-S)/w,0);var L=Math.max(E,p),R=b-L,j=(0,X.CR)(this.ifHorizontal([R,C],[C,R]),2),z=j[0],H=j[1],$=["top","left"].includes(M)?h:0,dt=(0,X.CR)(this.ifHorizontal([L/2,$],[$,L/2]),2),gt=dt[0],It=dt[1];return new Xr(gt,It,z,H)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,o=n.height;return this.ifHorizontal({size:o,length:r},{size:r,length:o})},enumerable:!1,configurable:!0}),e.prototype.renderRibbon=function(n){var r=this.attributes,o=r.data,c=r.type,l=r.orientation,u=r.color,d=r.block,h=sr(this.attributes,"ribbon"),p=this.range,v=p.min,m=p.max,b=this.ribbonBBox,_=b.x,S=b.y,E=this.ribbonShape,w=E.length,C=E.size,M=Va({transform:"translate(".concat(_,", ").concat(S,")"),length:w,size:C,type:c,orientation:l,color:u,block:d,partition:o.map(function(L){return(L.value-v)/(m-v)}),range:this.ribbonRange},h);this.ribbon=n.maybeAppendByClassName(Ei.ribbon,function(){return new Cb({style:M})}).update(M)},e.prototype.getHandleClassName=function(n){return"".concat(Ei.prefix("".concat(n,"-handle")))},e.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,o=n.orientation,c=sr(this.attributes,"handle"),l=(0,X.CR)(this.selection,2),u=l[0],d=l[1],h=(0,X.pi)((0,X.pi)({},c),{orientation:o}),p=c.shape,v=p===void 0?"slider":p,m=v==="basic"?XP:Q0,b=this;this.handlesGroup.selectAll(Ei.handle.class).data(r?[{value:u,type:"start"},{value:d,type:"end"}]:[],function(_){return _.type}).join(function(_){return _.append(function(){return new m({style:h})}).attr("className",function(S){var E=S.type;return"".concat(Ei.handle," ").concat(b.getHandleClassName(E))}).each(function(S){var E=S.type,w=S.value;this.update({labelText:w});var C="".concat(E,"Handle");b[C]=this,this.addEventListener("pointerdown",b.onDragStart(E))})},function(_){return _.update(h).each(function(S){var E=S.value;this.update({labelText:E})})},function(_){return _.each(function(S){var E=S.type,w="".concat(E,"Handle");b[w]=void 0}).remove()})},e.prototype.adjustHandles=function(){var n=(0,X.CR)(this.selection,2),r=n[0],o=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",o)},Object.defineProperty(e.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Xr(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,o=n.height,c=this.endHandle.getBBox(),l=c.width,u=c.height,d=(0,X.CR)([Math.max(r,l),Math.max(o,u)],2),h=d[0],p=d[1];return this.cacheHandleBBox=new Xr(0,0,h,p),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,o=n.height,c=(0,X.CR)(this.ifHorizontal([o,r],[r,o]),2),l=c[0],u=c[1];return{width:r,height:o,size:l,length:u}},enumerable:!1,configurable:!0}),e.prototype.setHandlePosition=function(n,r){var o=this.attributes.handleFormatter,c=this.ribbonBBox,l=c.x,u=c.y,d=this.ribbonShape.size,h=this.getOffset(r),p=(0,X.CR)(this.ifHorizontal([l+h,u+d*this.handleOffsetRatio],[l+d*this.handleOffsetRatio,u+h]),2),v=p[0],m=p[1],b=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();b==null||b.update({transform:"translate(".concat(v,", ").concat(m,")"),formatter:o})},e.prototype.renderIndicator=function(n){var r=sr(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(Ei.indicator,function(){return new Bd({})}).update(r)},Object.defineProperty(e.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(o,c,l,u){var d,h,p=(d=c==null?void 0:c.id)!==null&&d!==void 0?d:l.toString();if(o.push((0,X.pi)((0,X.pi)({},c),{id:p,index:l,type:"value",label:(h=c==null?void 0:c.label)!==null&&h!==void 0?h:c.value.toString(),value:n.ribbonScale.map(c.value)})),l<u.length-1){var v=u[l+1],m=(0,X.CR)([c.value,v.value],2),b=m[0],_=m[1],S=(b+_)/2;o.push((0,X.pi)((0,X.pi)({},c),{id:p,index:l,type:"range",range:[b,_],label:[b,_].join("~"),value:n.ribbonScale.map(S)}))}return o},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelStyle",{get:function(){var n=(0,X.CR)(["center","middle"],2),r=n[0],o=n[1],c=this.labelPosition;return c==="top"?o="bottom":c==="bottom"?o="top":c==="left"?r="end":c==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:o}},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(n){var r=this.attributes,o=r.showTick,c=o===void 0?!1:o,l=r.labelFilter,u=r.labelFormatter,d=sr(this.attributes,"tick"),h=sr(this.attributes,"label"),p=h.align,v=Va((0,X.pi)({showLine:!1,showGrid:!1,showTick:c,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),ea(d,"tick"),ea(h,"label"),{data:this.labelData}),m={tickFilter:function(_,S,E){return(_==null?void 0:_.type)!=="value"?!1:l?l(_,_.index,E.filter(function(w){return w.type!=="value"})):!0},labelFilter:function(_,S,E){return(_==null?void 0:_.type)!==p?!1:l?l(_,_.index,E.filter(function(w){return w.type===p})):!0},labelFormatter:u},b=(0,X.pi)((0,X.pi)((0,X.pi)({},v),m),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(Ei.label,function(){return new nl({style:b})}).node(),this.label.update(b,!1)},Object.defineProperty(e.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,o=n.labelDirection,c=n.labelSpacing,l=n.tickLength,u=this.ribbonShape.size,d=this.labelPosition,h=this.labelFixedSpacing,p=(0,X.CR)([0,0,0],3),v=p[0],m=p[1],b=p[2],_=l!=null?l:u;return r?(b=_,m=h,o==="positive"?d==="right"?(v=_,b=_):d==="bottom"&&(v=b):o==="negative"&&(d==="top"||d==="left")&&(v=u)):o==="positive"?d==="right"?m=_:d==="bottom"&&(v=u+h,m=c):o==="negative"&&(d==="left"||d==="top")&&(m=c),{offset:v,spacing:m,tickLength:b}},enumerable:!1,configurable:!0}),e.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,o=r.x,c=r.y,l=r.width,u=r.height,d=this.labelAxisStyle,h=d.offset,p=d.spacing,v=d.tickLength,m=(0,X.CR)(this.ifHorizontal([[o,c+h],[o+l,c+h]],[[o+h,c+u],[o+h,c]]),2),b=m[0],_=m[1];this.label.update({startPos:b,endPos:_,tickLength:v,labelSpacing:p},!1)}},e.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},e.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var o=this.attributes.showIndicator;if(!o||typeof n!="number"){this.hideIndicator();return}var c=this.range,l=c.min,u=c.max,d=this.ribbonBBox,h=d.x,p=d.y,v=(0,cn.Z)(n,l,u),m=this.getOffset(v),b=this.ifHorizontal([m+h,p],[h,m+p]);this.indicator.update({x:b[0],y:b[1],position:this.ifHorizontal("top","left"),labelText:r}),hu(this.indicator.node())},e.prototype.hideIndicator=function(){Ha(this.indicator.node())},e.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},e.prototype.setSelection=function(n,r){this.updateSelection(n,r)},e.prototype.updateSelection=function(n,r,o){var c;o===void 0&&(o=!1);var l=(0,X.CR)(this.selection,2),u=l[0],d=l[1],h=(0,X.CR)([n,r],2),p=h[0],v=h[1];o&&(p+=u,v+=d);var m=this.range,b=m.min,_=m.max;c=(0,X.CR)(xb([b,_],[p,v],this.selection),2),p=c[0],v=c[1],this.update({defaultValue:[p,v]}),this.dispatchSelection()},Object.defineProperty(e.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,o=this.range,c=o.min,l=o.max;return(0,rl.Z)(r)?Fd((l-c)*lA,0):r},enumerable:!1,configurable:!0}),e.prototype.getTickValue=function(n){var r=this.attributes,o=r.data,c=r.block,l=this.range.min;return c?tg(o.map(function(u){var d=u.value;return d}),n).tick:mb(n,this.step,l)},e.prototype.getValueByCanvasPoint=function(n){var r=this.range,o=r.min,c=r.max,l=(0,X.CR)(this.ribbon.node().getPosition(),2),u=l[0],d=l[1],h=this.ifHorizontal(u,d),p=this.ifHorizontal.apply(this,(0,X.ev)([],(0,X.CR)(Nd(n)),!1)),v=p-h,m=(0,cn.Z)(this.getOffset(v,!0),o,c);return m},e.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var o=this.range,c=o.min,l=o.max,u=this.ribbonShape.length,d=this.eventToOffsetScale;return d.update({domain:[c,l],range:[0,u]}),r?d.invert(n):d.map(n)},e.prototype.getRealSelection=function(n){var r=this.range.max,o=(0,X.CR)(n,2),c=o[0],l=o[1];return this.ifHorizontal([c,l],[r-l,r-c])},e.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},e.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new I.Aw("valuechange",{detail:{value:n}});this.dispatchEvent(r)},e.prototype.dispatchIndicated=function(n,r){var o=this,c=this.range.max,l=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:c-n,range:r?o.getRealSelection(r):void 0}}),u=new I.Aw("indicate",{detail:l});this.dispatchEvent(u)},e}(Si);class il extends eu{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(e){super(e)}map(e){if(!W0(e))return this.options.unknown;const n=wu(this.thresholds,e,0,this.n);return this.options.range[n]}invert(e){const{range:n}=this.options,r=n.indexOf(e),o=this.thresholds;return[o[r-1],o[r]]}clone(){return new il(this.options)}rescale(){const{domain:e,range:n}=this.options;this.n=Math.min(e.length,n.length-1),this.thresholds=e}}function Pu(t){return(0,sn.Z)(t)?0:Xc(t)?t.length:Object.keys(t).length}var pA=function(t,e){if(!Xc(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,o=0;o<t.length;o++)if(t[o]===e){r=o;break}return r},Pb=pA;function Iu(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const gA=[1,5,2,2.5,4,3],KP=null,Ru=Number.EPSILON*100;function Ib(t,e){return(t%e+e)%e}function Rb(t){return Math.round(t*1e12)/1e12}function kb(t,e,n,r,o,c){const l=Pu(e),u=Pb(e,t);let d=0;const h=Ib(r,c);return(h<Ru||c-h<Ru)&&r<=0&&o>=0&&(d=1),1-u/(l-1)-n+d}function vA(t,e,n){const r=Pu(e);return 1-Pb(e,t)/(r-1)-n+1}function mA(t,e,n,r,o,c){const l=(t-1)/(c-o),u=(e-1)/(Math.max(c,r)-Math.min(n,o));return 2-Math.max(l/u,u/l)}function yA(t,e){return t>=e?2-(t-1)/(e-1):1}function bA(t,e,n,r){const o=e-t;return 1-.5*(Fi(e-r,2)+Fi(t-n,2))/Fi(.1*o,2)}function _A(t,e,n){const r=e-t;if(n>r){const o=(n-r)/2;return 1-Fi(o,2)/Fi(.1*r,2)}return 1}function xA(){return 1}const eg=(t,e,n=5,r=!0,o=gA,c=[.25,.2,.5,.05])=>{const l=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||typeof t!="number"||typeof e!="number"||!l)return[];if(e-t<1e-15||l===1)return[t];const u={score:-2,lmin:0,lmax:0,lstep:0};let d=1;for(;d<1/0;){for(let _=0;_<o.length;_+=1){const S=o[_],E=vA(S,o,d);if(c[0]*E+c[1]+c[2]+c[3]<u.score){d=1/0;break}let w=2;for(;w<1/0;){const C=yA(w,l);if(c[0]*E+c[1]+c[2]*C+c[3]<u.score)break;const M=(e-t)/(w+1)/d/S;let L=Math.ceil(Math.log10(M));for(;L<1/0;){const R=d*S*Fi(10,L),j=_A(t,e,R*(w-1));if(c[0]*E+c[1]*j+c[2]*C+c[3]<u.score)break;const z=Math.floor(e/R)*d-(w-1)*d,H=Math.ceil(t/R)*d;if(z<=H){const $=H-z;for(let dt=0;dt<=$;dt+=1){const It=(z+dt)*(R/d),rt=It+R*(w-1),lt=R,pt=kb(S,o,d,It,rt,lt),bt=bA(t,e,It,rt),Ht=mA(w,l,t,e,It,rt),Rt=xA(),jt=c[0]*pt+c[1]*bt+c[2]*Ht+c[3]*Rt;jt>u.score&&(!r||It<=t&&rt>=e)&&(u.lmin=It,u.lmax=rt,u.lstep=lt,u.score=jt)}}L+=1}w+=1}}d+=1}const h=Iu(u.lmax),p=Iu(u.lmin),v=Iu(u.lstep),m=Math.floor(Rb((h-p)/v))+1,b=new Array(m);b[0]=Iu(p);for(let _=1;_<m;_+=1)b[_]=Iu(b[_-1]+v);return b};class ku extends il{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:eg}}constructor(e){super(e)}nice(){const{nice:e}=this.options;if(e){const[n,r,o]=this.getTickMethodOptions();this.options.domain=G0(n,r,o)}}getTicks(){const{tickMethod:e}=this.options,[n,r,o]=this.getTickMethodOptions();return e(n,r,o)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],o=e[e.length-1];return[r,o,n]}rescale(){this.nice();const{range:e,domain:n}=this.options,[r,o]=n;this.n=e.length-1,this.thresholds=new Array(this.n);for(let c=0;c<this.n;c+=1)this.thresholds[c]=((c+1)*o-(c-this.n)*r)/(this.n+1)}invert(e){const[n,r]=super.invert(e),[o,c]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||o,r||c]}getThresholds(){return this.thresholds}clone(){return new ku(this.options)}}function SA(t,e){const n=t.length;if(!n)return;if(n<2)return t[n-1];const r=(n-1)*e,o=Math.floor(r),c=t[o],l=t[o+1];return c+(l-c)*(r-o)}function OA(t,e,n=!1){const r=t;n||r.sort((c,l)=>c-l);const o=[];for(let c=1;c<e;c+=1)o.push(SA(r,c/e));return o}class Du extends il{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:eg}}constructor(e){super(e)}rescale(){const{domain:e,range:n}=this.options;this.n=n.length-1,this.thresholds=OA(e,this.n+1,!1)}invert(e){const[n,r]=super.invert(e),{domain:o}=this.options,c=o[0],l=o[o.length-1];return n===void 0&&r===void 0?[n,r]:[n||c,r||l]}getThresholds(){return this.thresholds}clone(){return new Du(this.options)}getTicks(){const{tickCount:e,domain:n,tickMethod:r}=this.options,o=n.length-1,c=n[0],l=n[o];return r(c,l,e)}}var Db=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function EA(t,e,n){return t.size=e,X0(n)?t.height=e:t.width=e,t}function wA(t,e,n){const{size:r}=e,o=Q1(t,e,n);return EA(o,r,o.orientation)}function AA(t){return e=>({value:e/t,label:String(e)})}function TA(t,e,n,r,o){const c=e.thresholds,l=AA(r);return Object.assign(Object.assign({},t),{color:o,data:[n,...c,r].map(l)})}function CA(t,e,n){const o=[-1/0,...e.thresholds,1/0].map((c,l)=>({value:l,label:c}));return Object.assign(Object.assign({},t),{data:o,color:n,labelFilter:(c,l)=>l>0&&l<o.length-1})}function ng(t){const{domain:e}=t.getOptions(),[n,r]=[e[0],i1(e)];return[n,r]}function MA(t,e){const n=t.getOptions(),r=t.clone();return r.update(Object.assign(Object.assign({},n),{range:[(0,I.lu)(e).toString()]})),r}function LA(t,e,n,r,o,c){const{length:l}=t,u=n||r,d=o.color?c.legendContinuous.ribbonFill||"black":c.color,h=e||MA(u,d),[p,v]=ng(h),[m,b]=ng([e,n,r].filter(_=>_!==void 0).find(_=>!(_ instanceof nu)));return Object.assign(Object.assign({},t),{domain:[m,b],data:h.getTicks().map(_=>({value:_})),color:new Array(Math.floor(l)).fill(0).map((_,S)=>{const E=(v-p)/(l-1)*S+p,w=h.map(E)||d,C=r?r.map(E):1;return w.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(M,L,R,j)=>`rgba(${L}, ${R}, ${j}, ${C})`)})})}function Fb(t,e,n,r,o,c){const l=Sa(t,"color"),u=wA(n,r,o);if(l instanceof il){const{range:p}=l.getOptions(),[v,m]=ng(l);return l instanceof ku||l instanceof Du?TA(u,l,v,m,p):CA(u,l,p)}const d=Sa(t,"size"),h=Sa(t,"opacity");return LA(u,l,d,h,e,c)}const vs=t=>{const{labelFormatter:e,layout:n,order:r,orientation:o,position:c,size:l,title:u,style:d,crossPadding:h,padding:p}=t,v=Db(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:m,value:b,theme:_,scale:S})=>{const{bbox:E}=b,{x:w,y:C,width:M,height:L}=E,R=q1(c,n),{legendContinuous:j={}}=_,z=Dd(Object.assign({},j,Object.assign(Object.assign({titleText:Cu(u),labelAlign:"value",labelFormatter:typeof e=="string"?$=>Za(e)($.label):e},Fb(m,S,b,t,vs,_)),d),v)),H=new K1({style:Object.assign(Object.assign({x:w,y:C,width:M,height:L},R),{subOptions:z})});return H.appendChild(new Lb({className:"legend-continuous",style:z})),H}};vs.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const Nb=t=>(...e)=>vs(Object.assign({},{block:!0},t))(...e);Nb.props=Object.assign(Object.assign({},vs.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const Ud=t=>e=>{const{scales:n}=e,r=Sa(n,"size");return vs(Object.assign({},{type:"size",data:r.getTicks().map((o,c)=>({value:o,label:String(o)}))},t))(e)};Ud.props=Object.assign(Object.assign({},vs.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const rg=t=>Ud(Object.assign({},{block:!0},t));rg.props=Object.assign(Object.assign({},vs.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var Bb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const jb=({static:t=!1}={})=>e=>{const{width:n,height:r,depth:o,paddingLeft:c,paddingRight:l,paddingTop:u,paddingBottom:d,padding:h,inset:p,insetLeft:v,insetTop:m,insetRight:b,insetBottom:_,margin:S,marginLeft:E,marginBottom:w,marginTop:C,marginRight:M,data:L,coordinate:R,theme:j,component:z,interaction:H,x:$,y:dt,z:gt,key:It,frame:rt,labelTransform:lt,parentKey:pt,clip:bt,viewStyle:Ht,title:Rt}=e,jt=Bb(e,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:$,y:dt,z:gt,key:It,width:n,height:r,depth:o,padding:h,paddingLeft:c,paddingRight:l,paddingTop:u,inset:p,insetLeft:v,insetTop:m,insetRight:b,insetBottom:_,paddingBottom:d,theme:j,coordinate:R,component:z,interaction:H,frame:rt,labelTransform:lt,margin:S,marginLeft:E,marginBottom:w,marginTop:C,marginRight:M,parentKey:pt,clip:bt,style:Ht},!t&&{title:Rt}),{marks:[Object.assign(Object.assign(Object.assign({},jt),{key:`${It}-0`,data:L}),t&&{title:Rt})]})]};jb.props={};var PA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Fu(t){return(e,...n)=>an({},t(e,...n),e)}function ms(t){return(e,...n)=>an({},e,t(e,...n))}function IA(t){return t instanceof Date?!1:typeof t=="object"}function ig(t,e){if(!t)return e;if(Array.isArray(t))return t;if(IA(t)){const{value:n=e}=t,r=PA(t,["value"]);return Object.assign(Object.assign({},r),{value:n})}return t}var og=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const ag=()=>t=>{const{children:e}=t,n=og(t,["children"]);if(!Array.isArray(e))return[];const{data:r,scale:o={},axis:c={},legend:l={},encode:u={},transform:d=[]}=n,h=og(n,["data","scale","axis","legend","encode","transform"]),p=e.map(v=>{var{data:m,scale:b={},axis:_={},legend:S={},encode:E={},transform:w=[]}=v,C=og(v,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:ig(m,r),scale:an({},o,b),encode:an({},u,E),transform:[...d,...w],axis:_&&c?an({},c,_):!1,legend:S&&l?an({},l,S):!1},C)});return[Object.assign(Object.assign({},h),{marks:p,type:"standardView"})]};ag.props={};function si([t,e],[n,r]){return[t-n,e-r]}function Zd([t,e],[n,r]){return[t+n,e+r]}function ni([t,e],[n,r]){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function no([t,e]){return Math.atan2(e,t)}function nc([t,e]){return no([t,e])+Math.PI/2}function zb(t,e){const n=no(t),r=no(e);return n<r?r-n:Math.PI*2-(n-r)}function Hd(t){let e=1/0,n=-1/0,r=1/0,o=-1/0;for(const[u,d]of t)e=Math.min(u,e),n=Math.max(u,n),r=Math.min(d,r),o=Math.max(d,o);const c=n-e,l=o-r;return[e,r,c,l]}function Ub([t,e],[n,r]){return[(t+n)/2,(e+r)/2]}function Bn(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function RA(t,e){return e.forEach((n,r)=>r===0?t.moveTo(n[0],n[1]):t.lineTo(n[0],n[1])),t.closePath(),t}function kA(t,e,n){const{arrowSize:r}=n,o=typeof r=="string"?+parseFloat(r)/100*ni(t,e):r,c=Math.PI/6,l=Math.atan2(e[1]-t[1],e[0]-t[0]),u=Math.PI/2-l-c,d=[e[0]-o*Math.sin(u),e[1]-o*Math.cos(u)],h=l-c,p=[e[0]-o*Math.cos(h),e[1]-o*Math.sin(h)];return[d,p]}function Nu(t,e,n,r,o){const c=no(si(r,e))+Math.PI,l=no(si(r,n))+Math.PI;return t.arc(r[0],r[1],o,c,l,l-c<0),t}function Vd(t,e,n,r="y",o="between",c=!1){const l=(E,w)=>E==="y"||E===!0?w?180:90:w?90:0,u=r==="y"||r===!0?n:e,d=l(r,c),h=Ks(u),[p,v]=$a(h,E=>u[E]),m=new eo({domain:[p,v],range:[0,100]}),b=E=>(0,ie.Z)(u[E])&&!Number.isNaN(u[E])?m.map(u[E]):0,_={between:E=>`${t[E]} ${b(E)}%`,start:E=>E===0?`${t[E]} ${b(E)}%`:`${t[E-1]} ${b(E)}%, ${t[E]} ${b(E)}%`,end:E=>E===t.length-1?`${t[E]} ${b(E)}%`:`${t[E]} ${b(E)}%, ${t[E+1]} ${b(E)}%`},S=h.sort((E,w)=>b(E)-b(w)).map(_[o]||_.between).join(",");return`linear-gradient(${d}deg, ${S})`}function Wd(t){const[e,n,r,o]=t;return[o,e,n,r]}function rc(t,e,n){const[r,o,,c]=Zr(t)?Wd(e):e,[l,u]=n,d=t.getCenter(),h=nc(si(r,d)),p=nc(si(o,d)),v=p===h&&l!==u?p+Math.PI*2:p;return{startAngle:h,endAngle:v-h>=0?v:Math.PI*2+v,innerRadius:ni(c,d),outerRadius:ni(r,d)}}function QP(t){const e="connect";return Object.fromEntries(Object.entries(t).filter(([n])=>n.startsWith(e)).map(([n,r])=>[lowerFirst(n.replace(e,"").trim()),r]).filter(([n])=>n!==void 0))}function sg(t){const{colorAttribute:e,opacityAttribute:n=e}=t;return`${n}Opacity`}function Zb(t,e){if(!Ar(t))return"";const n=t.getCenter(),{transform:r}=e;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function cg(t){if(t.length===1)return t[0];const[[e,n,r=0],[o,c,l=0]]=t;return[(e+o)/2,(n+c)/2,(r+l)/2]}function ys(t){return t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()})}function DA(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}var JP=Array.prototype.slice;function Hb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qr(t){return function(){return t}}function Vb(t){this._context=t}Vb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Bu(t){return new Vb(t)}const lg=Math.PI,Gd=2*lg,ic=1e-6,FA=Gd-ic;function ug(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function NA(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ug;const n=Fi(10,e);return function(r){this._+=r[0];for(let o=1,c=r.length;o<c;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class $d{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?ug:NA(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,o){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(e,n,r,o,c,l){this._append`C${+e},${+n},${+r},${+o},${this._x1=+c},${this._y1=+l}`}arcTo(e,n,r,o,c){if(e=+e,n=+n,r=+r,o=+o,c=+c,c<0)throw new Error(`negative radius: ${c}`);let l=this._x1,u=this._y1,d=r-e,h=o-n,p=l-e,v=u-n,m=p*p+v*v;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>ic)if(!(Math.abs(v*d-h*p)>ic)||!c)this._append`L${this._x1=e},${this._y1=n}`;else{let b=r-l,_=o-u,S=d*d+h*h,E=b*b+_*_,w=Math.sqrt(S),C=Math.sqrt(m),M=c*Math.tan((lg-Math.acos((S+m-E)/(2*w*C)))/2),L=M/C,R=M/w;Math.abs(L-1)>ic&&this._append`L${e+L*p},${n+L*v}`,this._append`A${c},${c},0,0,${+(v*b>p*_)},${this._x1=e+R*d},${this._y1=n+R*h}`}}arc(e,n,r,o,c,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(o),d=r*Math.sin(o),h=e+u,p=n+d,v=1^l,m=l?o-c:c-o;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>ic||Math.abs(this._y1-p)>ic)&&this._append`L${h},${p}`,r&&(m<0&&(m=m%Gd+Gd),m>FA?this._append`A${r},${r},0,1,${v},${e-u},${n-d}A${r},${r},0,1,${v},${this._x1=h},${this._y1=p}`:m>ic&&this._append`A${r},${r},0,${+(m>=lg)},${v},${this._x1=e+r*Math.cos(c)},${this._y1=n+r*Math.sin(c)}`)}rect(e,n,r,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function jo(){return new $d}jo.prototype=$d.prototype;function t6(t=3){return new $d(+t)}function fg(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new $d(e)}function dg(t){return t[0]}function Wb(t){return t[1]}function oc(t,e){var n=qr(!0),r=null,o=Bu,c=null,l=fg(u);t=typeof t=="function"?t:t===void 0?dg:qr(t),e=typeof e=="function"?e:e===void 0?Wb:qr(e);function u(d){var h,p=(d=Hb(d)).length,v,m=!1,b;for(r==null&&(c=o(b=l())),h=0;h<=p;++h)!(h<p&&n(v=d[h],h,d))===m&&((m=!m)?c.lineStart():c.lineEnd()),m&&c.point(+t(v,h,d),+e(v,h,d));if(b)return c=null,b+""||null}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:qr(+d),u):t},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:qr(+d),u):e},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:qr(!!d),u):n},u.curve=function(d){return arguments.length?(o=d,r!=null&&(c=o(r)),u):o},u.context=function(d){return arguments.length?(d==null?r=c=null:c=o(r=d),u):r},u}function ac(t){const e=typeof t=="function"?t:t.render;return class extends I.b_{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){e(this)}}}var Yd=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function BA(t){const{min:[e,n],max:[r,o]}=t.getLocalBounds();let c=0,l=0;return e>0&&(c=e),r<0&&(c=r),n>0&&(l=n),o<0&&(l=o),[c,l]}function jA(t,e=[]){const[n=0,r=0,o=n,c=r]=e,l=t.parentNode,u=l.getEulerAngles();l.setEulerAngles(0);const{min:d,halfExtents:h}=t.getLocalBounds(),[p,v]=d,[m,b]=h;return l.setEulerAngles(u),{x:p-c,y:v-n,width:m*2+c+r,height:b*2+n+o}}const UD=(t,e,n)=>{const r=dist(t,e),o=dist(e,n),c=dist(n,t);return(Math.pow(r,2)+Math.pow(o,2)-Math.pow(c,2))/(2*r*o)};function zA(t,e,n,r,o=!0,c=!0){const l=v=>oc()(v);if(!e[0]&&!e[1])return l([BA(t),e]);if(!n.length)return l([[0,0],e]);const[u,d]=n,h=[...d],p=[...u];if(d[0]!==u[0]){const v=o?-4:4;h[1]=d[1],c&&!o&&(h[0]=Math.max(u[0],d[0]-v),d[1]<u[1]?p[1]=h[1]:(p[1]=u[1],p[0]=Math.max(p[0],h[0]-v))),!c&&!o&&(h[0]=Math.max(u[0],d[0]-v),d[1]>u[1]?p[1]=h[1]:(p[1]=u[1],p[0]=Math.max(p[0],h[0]-v))),!c&&o&&(h[0]=Math.min(u[0],d[0]-v),d[1]>u[1]?p[1]=h[1]:(p[1]=u[1],p[0]=Math.min(p[0],h[0]-v))),c&&o&&(h[0]=Math.min(u[0],d[0]-v),d[1]<u[1]?p[1]=h[1]:(p[1]=u[1],p[0]=Math.min(p[0],h[0]-v)))}return l([d,h,p,u,e])}const Gb=ac(t=>{const e=t.attributes,{className:n,class:r,transform:o,rotate:c,labelTransform:l,labelTransformOrigin:u,x:d,y:h,x0:p=d,y0:v=h,text:m,background:b,connector:_,startMarker:S,endMarker:E,coordCenter:w,innerHTML:C}=e,M=Yd(e,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform=`translate(${d}, ${h})`,[d,h,p,v].some(Rt=>!(0,ie.Z)(Rt))){t.children.forEach(Rt=>Rt.remove());return}const L=xn(M,"background"),{padding:R}=L,j=Yd(L,["padding"]),z=xn(M,"connector"),{points:H=[]}=z,$=Yd(z,["points"]);let dt;C?dt=Gn(t).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",C).call(Bn,Object.assign({transform:l,transformOrigin:u},M)).node():dt=Gn(t).maybeAppend("text","text").style("zIndex",0).style("text",m).call(Bn,Object.assign({textBaseline:"middle",transform:l,transformOrigin:u},M)).node();const gt=Gn(t).maybeAppend("background","rect").style("zIndex",-1).call(Bn,jA(dt,R)).call(Bn,b?j:{}).node(),It=+p<w[0],rt=+v<w[1],lt=[+p-+d,+v-+h],pt=zA(gt,lt,H,w,It,rt),bt=S&&new _r({id:"startMarker",style:Object.assign({x:0,y:0},xn(M,"startMarker"))}),Ht=E&&new _r({id:"endMarker",style:Object.assign({x:0,y:0},xn(M,"endMarker"))});Gn(t).maybeAppend("connector","path").style("zIndex",0).style("d",pt).style("markerStart",bt).style("markerEnd",Ht).call(Bn,_?$:{})});function ol(t,e){let n,r=-1,o=-1;if(e===void 0)for(const c of t)++o,c!=null&&(n<c||n===void 0&&c>=c)&&(n=c,r=o);else for(let c of t)(c=e(c,++o,t))!=null&&(n<c||n===void 0&&c>=c)&&(n=c,r=o);return r}function $b(t,e,n,r){const o=e.length/2,c=e.slice(0,o),l=e.slice(o);let u=ol(c,(b,_)=>Math.abs(b[1]-l[_][1]));u=Math.max(Math.min(u,o-2),1);const d=b=>[c[b][0],(c[b][1]+l[b][1])/2],h=d(u),p=d(u-1),v=d(u+1),m=no(si(v,p))/Math.PI*180;return{x:h[0],y:h[1],transform:`rotate(${m})`,textAlign:"center",textBaseline:"middle"}}function Yb(t,e,n,r){const{bounds:o}=n,[[c,l],[u,d]]=o,h=u-c,p=d-l,v=m=>{const{x:b,y:_}=m,S=Xy(n.x,h),E=Xy(n.y,p);return Object.assign(Object.assign({},m),{x:(S||b)+c,y:(E||_)+l})};return v(t==="left"?{x:0,y:p/2,textAlign:"start",textBaseline:"middle"}:t==="right"?{x:h,y:p/2,textAlign:"end",textBaseline:"middle"}:t==="top"?{x:h/2,y:0,textAlign:"center",textBaseline:"top"}:t==="bottom"?{x:h/2,y:p,textAlign:"center",textBaseline:"bottom"}:t==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:t==="top-right"?{x:h,y:0,textAlign:"end",textBaseline:"top"}:t==="bottom-left"?{x:0,y:p,textAlign:"start",textBaseline:"bottom"}:t==="bottom-right"?{x:h,y:p,textAlign:"end",textBaseline:"bottom"}:{x:h/2,y:p/2,textAlign:"center",textBaseline:"middle"})}function Xb(t,e,n,r){const{y:o,y1:c,autoRotate:l,rotateToAlignArc:u}=n,d=r.getCenter(),h=rc(r,e,[o,c]),{innerRadius:p,outerRadius:v,startAngle:m,endAngle:b}=h,_=t==="inside"?(m+b)/2:b,S=Xd(_,l,u),E=(()=>{const[w,C]=e,M=p+(v-p)*.5,[L,R]=t==="inside"?al(d,_,M):Ub(w,C);return{x:L,y:R}})();return Object.assign(Object.assign({},E),{textAlign:t==="inside"?"center":"start",textBaseline:"middle",rotate:S})}function al(t,e,n){return[t[0]+Math.sin(e)*n,t[1]-Math.cos(e)*n]}function Xd(t,e,n){if(!e)return 0;const r=n?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+r}function qb(t,e,n,r){const{y:o,y1:c,autoRotate:l,rotateToAlignArc:u,radius:d=.5,offset:h=0}=n,p=rc(r,e,[o,c]),{startAngle:v,endAngle:m}=p,b=r.getCenter(),_=(v+m)/2,E={textAlign:"center",textBaseline:"middle",rotate:Xd(_,l,u)},{innerRadius:w,outerRadius:C}=p,L=w+(C-w)*d+h,[R,j]=al(b,_,L);return Object.assign({x:R,y:j},E)}function Kb(t){return t===void 0?null:t}function Qb(t,e,n,r){const{bounds:o}=n,[c]=o;return{x:Kb(c[0]),y:Kb(c[1])}}function bs(t,e,n,r){const{bounds:o}=n;return o.length===1?Qb(t,e,n,r):(uu(r)?Xb:qc(r)?qb:Yb)(t,e,n,r)}function UA(t,e,n,r,o){const[c,l]=al(t,e,n),[u,d]=al(t,e,r),h=Math.sin(e)>0?1:-1;return[[c,l],[u,d],[u+h*o,d]]}function Jb(t,e,n){const r=rc(n,t,[e.y,e.y1]),{innerRadius:o,outerRadius:c}=r;return o+(c-o)}function ZA(t,e,n){const r=rc(n,t,[e.y,e.y1]),{startAngle:o,endAngle:c}=r;return(o+c)/2}function hg(t,e,n,r){const{autoRotate:o,rotateToAlignArc:c,offset:l=0,connector:u=!0,connectorLength:d=l,connectorLength2:h=0,connectorDistance:p=0}=n,v=r.getCenter(),m=ZA(e,n,r),b=Math.sin(m)>0?1:-1,_=Xd(m,o,c),S={textAlign:b>0||uu(r)?"start":"end",textBaseline:"middle",rotate:_},E=Jb(e,n,r),w=E+(u?d:l),[[C,M],[L,R],[j,z]]=UA(v,m,E,w,u?h:0),H=u?+p*b:0,$=j+H,dt=z,gt={connector:u,connectorPoints:[[L-$,R-dt],[j-$,z-dt]]};return Object.assign(Object.assign({x0:C,y0:M,x:j+H,y:z},S),gt)}function e6(t,e,n,r){const{bounds:o}=n;return o.length===1?Qb(t,e,n,r):(uu(r)?Xb:qc(r)?hg:Yb)(t,e,n,r)}function ui(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sl(t,e){return Array.from(e,n=>t[n])}function Ea(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(o,c)=>c);return e.length>1?(e=e.map(o=>t.map(o)),r.sort((o,c)=>{for(const l of e){const u=zu(l[o],l[c]);if(u)return u}})):(n=t.map(n),r.sort((o,c)=>zu(n[o],n[c]))),sl(t,r)}return t.sort(ju(n))}function ju(t=ui){if(t===ui)return zu;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function zu(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function HA(t,e={}){const{labelHeight:n=14,height:r}=e,o=Ea(t,h=>h.y),c=o.length,l=new Array(c);for(let h=0;h<c;h++){const p=o[h],{y:v}=p;l[h]={y:v,y1:v+n,labels:[v]}}let u=!0;for(;u;){u=!1;for(let h=l.length-1;h>0;h--){const p=l[h],v=l[h-1];if(v.y1>p.y){u=!0,v.labels.push(...p.labels),l.splice(h,1),v.y1+=p.y1-p.y;const m=v.y1-v.y;v.y1=Math.max(Math.min(v.y1,r),m),v.y=v.y1-m}}}let d=0;for(const h of l){const{y:p,labels:v}=h;let m=p-n;for(const b of v){const _=o[d++],E=m+n-b;_.connectorPoints[0][1]-=E,_.y=m+n,m+=n}}}function _s(t,e){const n=Ea(t,u=>u.y),{height:r,labelHeight:o=14}=e,c=Math.ceil(r/o);if(n.length<=c)return HA(n,e);const l=[];for(let u=0;u<n.length;u++)u<n.length-c?(n[u].opacity=0,n[u].connector=!1):l.push(n[u]);HA(l,e)}var n6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const qd=new WeakMap;function r6(t,e,n){const{connectorLength:r,connectorLength2:o,connectorDistance:c}=e,l=n6(hg("outside",t,e,n),[]),u=n.getCenter(),d=Jb(t,e,n),h=ZA(t,e,n),p=d+r+o,v=Math.sin(h)>0?1:-1,m=u[0]+(p+ +c)*v,{x:b}=l,_=m-b;return l.x+=_,l.connectorPoints[0][0]-=_,l}function t_(t,e,n,r,o,c){if(!qc(r))return{};if(qd.has(e))return qd.get(e);const l=c.map(m=>r6(m,n,r)),{width:u,height:d}=r.getOptions(),h=l.filter(m=>m.x<u/2),p=l.filter(m=>m.x>=u/2),v=Object.assign(Object.assign({},o),{height:d});return _s(h,v),_s(p,v),l.forEach((m,b)=>qd.set(c[b],m)),qd.get(e)}var Ya=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function e_(t,e,n,r){if(!qc(r))return{};const{connectorLength:o,connectorLength2:c,connectorDistance:l}=n,u=Ya(hg("outside",e,n,r),[]),{x0:d,y0:h}=u,p=r.getCenter(),m=mE(r)+o,b=nc([d-p[0],h-p[1]]),_=Math.sin(b)>0?1:-1,[S,E]=al(p,b,m);return u.x=S+(c+l)*_,u.y=E,u}var Eo=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function i6(t,e){return t!==void 0?t:qc(e)?"inside":Zr(e)?"right":"top"}function o6(t,e,n,r,o,c){const{position:l}=e,{render:u}=o,d=i6(l,n),p=r[u?"htmlLabel":d==="inside"?"innerLabel":"label"],v=Object.assign({},p,e),m=yt[ys(d)];if(!m)throw new Error(`Unknown position: ${d}`);return Object.assign(Object.assign({},p),m(d,t,v,n,o,c))}const VA=(t,e)=>{const{coordinate:n,theme:r}=e,{render:o}=t;return(c,l,u,d)=>{const{text:h,x:p,y:v,transform:m="",transformOrigin:b,className:_=""}=l,S=Eo(l,["text","x","y","transform","transformOrigin","className"]),E=o6(c,l,n,r,t,d),{rotate:w=0,transform:C=""}=E,M=Eo(E,["rotate","transform"]);return Gn(new Gb).call(Bn,M).style("text",`${h}`).style("className",`${_} g2-label`).style("innerHTML",o?o(h,l.datum,l.index):void 0).style("labelTransform",`${C} rotate(${+w}) ${m}`.trim()).style("labelTransformOrigin",b).style("coordCenter",n.getCenter()).call(Bn,S).node()}};VA.props={defaultMarker:"point"};function n_(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xs(t){let e,n,r;t.length!==2?(e=ui,n=(u,d)=>ui(t(u),d),r=(u,d)=>t(u)-d):(e=t===ui||t===n_?t:WA,n=t,r=t);function o(u,d,h=0,p=u.length){if(h<p){if(e(d,d)!==0)return p;do{const v=h+p>>>1;n(u[v],d)<0?h=v+1:p=v}while(h<p)}return h}function c(u,d,h=0,p=u.length){if(h<p){if(e(d,d)!==0)return p;do{const v=h+p>>>1;n(u[v],d)<=0?h=v+1:p=v}while(h<p)}return h}function l(u,d,h=0,p=u.length){const v=o(u,d,h,p-1);return v>h&&r(u[v-1],d)>-r(u[v],d)?v-1:v}return{left:o,center:l,right:c}}function WA(){return 0}var a6=function(t,e){if(!Xc(t))return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];e(o,r)&&n.push(o)}return n},GA=a6;function r_(t){return t===null?NaN:+t}function*s6(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const $A=xs(ui),YA=$A.right,XA=$A.left,qA=xs(r_).center;var i_=YA;function o_(t,e,n){return Math.min(n,Math.max(e,t))}function cl(t){return!!t.getBandWidth}function ll(t,e,n){if(!cl(t))return t.invert(e);const{adjustedRange:r}=t,{domain:o}=t.getOptions(),c=n?-1:0,l=t.getStep(),u=n?r:r.map(p=>p+l),d=XA(u,e),h=o_(d+c,0,o.length-1);return o[h]}function Ss(t,e,n){if(!e)return t.getOptions().domain;if(!cl(t)){const d=Ea(e);if(!n)return d;const[h]=d,{range:p}=t.getOptions(),[v,m]=p,b=v>m?-1:1,_=t.invert(t.map(h)+b*n);return[h,_]}const{domain:r}=t.getOptions(),o=e[0],c=r.indexOf(o);if(n){const d=c+Math.round(r.length*n);return r.slice(c,d)}const l=e[e.length-1],u=r.indexOf(l);return r.slice(c,u+1)}function Uu(t,e,n,r,o,c){const{x:l,y:u}=o,d=(b,_)=>{const[S,E]=c.invert(b);return[ll(l,S,_),ll(u,E,_)]},h=d([t,e],!0),p=d([n,r],!1),v=Ss(l,[h[0],p[0]]),m=Ss(u,[h[1],p[1]]);return[v,m]}function Zu(t,e){const[n,r]=t,o=c=>c.getStep?c.getStep():0;return[e.map(n),e.map(r)+o(e)]}function KA(t,e,n){const{x:r,y:o}=e,[c,l]=t,u=Zu(c,r),d=Zu(l,o),h=[u[0],d[0]],p=[u[1],d[1]],[v,m]=n.map(h),[b,_]=n.map(p);return[v,m,b,_]}const QA=Math.abs,ro=Math.atan2,Os=Math.cos,c6=Math.max,Kd=Math.min,wa=Math.sin,Hu=Math.sqrt,Ui=1e-12,ul=Math.PI,Qd=ul/2,a_=2*ul;function JA(t){return t>1?0:t<-1?ul:Math.acos(t)}function t5(t){return t>=1?Qd:t<=-1?-Qd:Math.asin(t)}function Jd(t){return t.innerRadius}function s_(t){return t.outerRadius}function l6(t){return t.startAngle}function u6(t){return t.endAngle}function pg(t){return t&&t.padAngle}function gg(t,e,n,r,o,c,l,u){var d=n-t,h=r-e,p=l-o,v=u-c,m=v*d-p*h;if(!(m*m<Ui))return m=(p*(e-c)-v*(t-o))/m,[t+m*d,e+m*h]}function fl(t,e,n,r,o,c,l){var u=t-n,d=e-r,h=(l?c:-c)/Hu(u*u+d*d),p=h*d,v=-h*u,m=t+p,b=e+v,_=n+p,S=r+v,E=(m+_)/2,w=(b+S)/2,C=_-m,M=S-b,L=C*C+M*M,R=o-c,j=m*S-_*b,z=(M<0?-1:1)*Hu(c6(0,R*R*L-j*j)),H=(j*M-C*z)/L,$=(-j*C-M*z)/L,dt=(j*M+C*z)/L,gt=(-j*C+M*z)/L,It=H-E,rt=$-w,lt=dt-E,pt=gt-w;return It*It+rt*rt>lt*lt+pt*pt&&(H=dt,$=gt),{cx:H,cy:$,x01:-p,y01:-v,x11:H*(o/R-1),y11:$*(o/R-1)}}function th(){var t=Jd,e=s_,n=qr(0),r=null,o=l6,c=u6,l=pg,u=null,d=fg(h);function h(){var p,v,m=+t.apply(this,arguments),b=+e.apply(this,arguments),_=o.apply(this,arguments)-Qd,S=c.apply(this,arguments)-Qd,E=QA(S-_),w=S>_;if(u||(u=p=d()),b<m&&(v=b,b=m,m=v),!(b>Ui))u.moveTo(0,0);else if(E>a_-Ui)u.moveTo(b*Os(_),b*wa(_)),u.arc(0,0,b,_,S,!w),m>Ui&&(u.moveTo(m*Os(S),m*wa(S)),u.arc(0,0,m,S,_,w));else{var C=_,M=S,L=_,R=S,j=E,z=E,H=l.apply(this,arguments)/2,$=H>Ui&&(r?+r.apply(this,arguments):Hu(m*m+b*b)),dt=Kd(QA(b-m)/2,+n.apply(this,arguments)),gt=dt,It=dt,rt,lt;if($>Ui){var pt=t5($/m*wa(H)),bt=t5($/b*wa(H));(j-=pt*2)>Ui?(pt*=w?1:-1,L+=pt,R-=pt):(j=0,L=R=(_+S)/2),(z-=bt*2)>Ui?(bt*=w?1:-1,C+=bt,M-=bt):(z=0,C=M=(_+S)/2)}var Ht=b*Os(C),Rt=b*wa(C),jt=m*Os(R),oe=m*wa(R);if(dt>Ui){var Se=b*Os(M),xe=b*wa(M),Pe=m*Os(L),Ke=m*wa(L),Ze;if(E<ul)if(Ze=gg(Ht,Rt,Pe,Ke,Se,xe,jt,oe)){var en=Ht-Ze[0],rn=Rt-Ze[1],We=Se-Ze[0],dn=xe-Ze[1],yn=1/wa(JA((en*We+rn*dn)/(Hu(en*en+rn*rn)*Hu(We*We+dn*dn)))/2),wn=Hu(Ze[0]*Ze[0]+Ze[1]*Ze[1]);gt=Kd(dt,(m-wn)/(yn-1)),It=Kd(dt,(b-wn)/(yn+1))}else gt=It=0}z>Ui?It>Ui?(rt=fl(Pe,Ke,Ht,Rt,b,It,w),lt=fl(Se,xe,jt,oe,b,It,w),u.moveTo(rt.cx+rt.x01,rt.cy+rt.y01),It<dt?u.arc(rt.cx,rt.cy,It,ro(rt.y01,rt.x01),ro(lt.y01,lt.x01),!w):(u.arc(rt.cx,rt.cy,It,ro(rt.y01,rt.x01),ro(rt.y11,rt.x11),!w),u.arc(0,0,b,ro(rt.cy+rt.y11,rt.cx+rt.x11),ro(lt.cy+lt.y11,lt.cx+lt.x11),!w),u.arc(lt.cx,lt.cy,It,ro(lt.y11,lt.x11),ro(lt.y01,lt.x01),!w))):(u.moveTo(Ht,Rt),u.arc(0,0,b,C,M,!w)):u.moveTo(Ht,Rt),!(m>Ui)||!(j>Ui)?u.lineTo(jt,oe):gt>Ui?(rt=fl(jt,oe,Se,xe,m,-gt,w),lt=fl(Ht,Rt,Pe,Ke,m,-gt,w),u.lineTo(rt.cx+rt.x01,rt.cy+rt.y01),gt<dt?u.arc(rt.cx,rt.cy,gt,ro(rt.y01,rt.x01),ro(lt.y01,lt.x01),!w):(u.arc(rt.cx,rt.cy,gt,ro(rt.y01,rt.x01),ro(rt.y11,rt.x11),!w),u.arc(0,0,m,ro(rt.cy+rt.y11,rt.cx+rt.x11),ro(lt.cy+lt.y11,lt.cx+lt.x11),w),u.arc(lt.cx,lt.cy,gt,ro(lt.y11,lt.x11),ro(lt.y01,lt.x01),!w))):u.arc(0,0,m,R,L,w)}if(u.closePath(),p)return u=null,p+""||null}return h.centroid=function(){var p=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,v=(+o.apply(this,arguments)+ +c.apply(this,arguments))/2-ul/2;return[Os(v)*p,wa(v)*p]},h.innerRadius=function(p){return arguments.length?(t=typeof p=="function"?p:qr(+p),h):t},h.outerRadius=function(p){return arguments.length?(e=typeof p=="function"?p:qr(+p),h):e},h.cornerRadius=function(p){return arguments.length?(n=typeof p=="function"?p:qr(+p),h):n},h.padRadius=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:qr(+p),h):r},h.startAngle=function(p){return arguments.length?(o=typeof p=="function"?p:qr(+p),h):o},h.endAngle=function(p){return arguments.length?(c=typeof p=="function"?p:qr(+p),h):c},h.padAngle=function(p){return arguments.length?(l=typeof p=="function"?p:qr(+p),h):l},h.context=function(p){return arguments.length?(u=p==null?null:p,h):u},h}var sc=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function eh(t,e,n,r,o={}){const{inset:c=0,radius:l=0,insetLeft:u=c,insetTop:d=c,insetRight:h=c,insetBottom:p=c,radiusBottomLeft:v=l,radiusBottomRight:m=l,radiusTopLeft:b=l,radiusTopRight:_=l,minWidth:S=-1/0,maxWidth:E=1/0,minHeight:w=-1/0}=o,C=sc(o,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!Ar(r)&&!f1(r)){const H=!!Zr(r),[$,,dt]=H?Wd(e):e,[gt,It]=$,[rt,lt]=si(dt,$),pt=rt>0?gt:gt+rt,bt=lt>0?It:It+lt,Ht=Math.abs(rt),Rt=Math.abs(lt),jt=pt+u,oe=bt+d,Se=Ht-(u+h),xe=Rt-(d+p),Pe=H?lu(Se,w,1/0):lu(Se,S,E),Ke=H?lu(xe,S,E):lu(xe,w,1/0),Ze=H?jt:jt-(Pe-Se)/2,en=H?oe-(Ke-xe)/2:oe-(Ke-xe);return Gn(t.createElement("rect",{})).style("x",Ze).style("y",en).style("width",Pe).style("height",Ke).style("radius",[b,_,m,v]).call(Bn,C).node()}const{y:M,y1:L}=n,R=r.getCenter(),j=rc(r,e,[M,L]),z=th().cornerRadius(l).padAngle(c*Math.PI/180);return Gn(t.createElement("path",{})).style("d",z(j)).style("transform",`translate(${R[0]}, ${R[1]})`).style("radius",l).style("inset",c).call(Bn,C).node()}const nh=(t,e)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:o=!0,last:c=!0}=t,l=sc(t,["colorAttribute","opacityAttribute","first","last"]),{coordinate:u,document:d}=e;return(h,p,v)=>{const{color:m,radius:b=0}=v,_=sc(v,["color","radius"]),S=_.lineWidth||1,{stroke:E,radius:w=b,radiusTopLeft:C=w,radiusTopRight:M=w,radiusBottomRight:L=w,radiusBottomLeft:R=w,innerRadius:j=0,innerRadiusTopLeft:z=j,innerRadiusTopRight:H=j,innerRadiusBottomRight:$=j,innerRadiusBottomLeft:dt=j,lineWidth:gt=n==="stroke"||E?S:0,inset:It=0,insetLeft:rt=It,insetRight:lt=It,insetBottom:pt=It,insetTop:bt=It,minWidth:Ht,maxWidth:Rt,minHeight:jt}=l,oe=sc(l,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:Se=m,opacity:xe}=p,Pe=[o?C:z,o?M:H,c?L:$,c?R:dt],Ke=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Zr(u)&&Ke.push(Ke.shift());const Ze=Object.assign(Object.assign({radius:w},Object.fromEntries(Ke.map((en,rn)=>[en,Pe[rn]]))),{inset:It,insetLeft:rt,insetRight:lt,insetBottom:pt,insetTop:bt,minWidth:Ht,maxWidth:Rt,minHeight:jt});return Gn(eh(d,h,p,u,Ze)).call(Bn,_).style("fill","transparent").style(n,Se).style(sg(t),xe).style("lineWidth",gt).style("stroke",E===void 0?Se:E).call(Bn,oe).node()}};nh.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function rh(t,e){if(e(t))return!0;if(t.tagName==="g"){const{childNodes:n=[]}=t;for(const r of n)if(rh(r,e))return!0}return!1}const e5={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function n5(t,e){let n;return rh(t,r=>{var o;return r.tagName!=="g"&&((o=r.style)===null||o===void 0?void 0:o[e])!==void 0?(n=r.style[e],!0):!1}),n!=null?n:e5[e]}function mo(t,e,n,r){t.style[e]=n,r&&t.children.forEach(o=>mo(o,e,n,r))}function dl(t){mo(t,"visibility","hidden",!0)}function Vu(t){mo(t,"visibility","visible",!0)}var cc=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function lc(t){return Gn(t).selectAll(`.${K}`).nodes().filter(e=>!e.__removed__)}function c_(t,e){return vg(t,e).flatMap(({container:n})=>lc(n))}function vg(t,e){return e.filter(n=>n!==t&&n.options.parentKey===t.options.key)}function zo(t){return Gn(t).select(`.${le}`).node()}function Wu(t){if(t.tagName==="g")return t.getRenderBounds();const e=t.getGeometryBounds(),n=new I.mN;return n.setFromTransformedAABB(e,t.getWorldTransform()),n}function Aa(t,e){const{offsetX:n,offsetY:r}=e,o=Wu(t),{min:[c,l],max:[u,d]}=o,h=n<c||n>u,p=r<l||r>d;return h||p?null:[n-c,r-l]}function Xa(t,e){const{offsetX:n,offsetY:r}=e,[o,c,l,u]=r5(t);return[Math.min(l,Math.max(o,n))-o,Math.min(u,Math.max(c,r))-c]}function r5(t){const e=t.getRenderBounds(),{min:[n,r],max:[o,c]}=e;return[n,r,o,c]}function i5(t){return e=>e.__data__.color}function hl(t){return e=>e.__data__.x}function Es(t){const e=Array.isArray(t)?t:[t],n=new Map(e.flatMap(r=>Array.from(r.markState.keys()).map(c=>[Gu(r.key,c.key),c.data])));return r=>{const{index:o,markKey:c,viewKey:l}=r.__data__;return n.get(Gu(l,c))[o]}}const ws={selected:3,unselected:3,active:2,inactive:2,default:1},As={selection:["selected","unselected"],highlight:["active","inactive"]},mg=(t,e,n)=>{rh(t,r=>{"setAttribute"in r&&typeof r.setAttribute=="function"&&r.setAttribute(e,n)})};function yg(t,e){return e.forEach(n=>{const r=n.__interactionStyle__;r?n.__interactionStyle__=Object.assign(Object.assign({},r),t):n.__interactionStyle__=t}),(n=(o,c)=>o,r=mg)=>oa(void 0,n,r)}function oa(t,e=(r,o)=>r,n=mg){const r="__states__",o="__ordinal__",c=b=>ws[b]||ws.default,l=b=>{var _;return(_=Object.entries(As).find(([S,E])=>E.includes(b)))===null||_===void 0?void 0:_[0]},u=b=>{var _;const{[r]:S=[],[o]:E={}}=b,w=[...S].sort((L,R)=>c(R)-c(L)),C=new Map;for(const L of w){const R=((_=t!=null?t:b.__interactionStyle__)===null||_===void 0?void 0:_[L])||{};for(const[j,z]of Object.entries(R))C.has(j)||C.set(j,z)}const M=Object.assign({},E);for(const[L,R]of C.entries())M[L]=R;if(Object.keys(M).length!==0){for(const[L,R]of Object.entries(M)){const j=n5(b,L),z=e(R,b);n(b,L,z),L in E||(E[L]=j)}b[o]=E}},d=b=>{b[r]||(b[r]=[])};return{setState:(b,..._)=>{d(b),b[r]=[..._],u(b)},updateState:(b,..._)=>{d(b);const S=b[r],E=new Set(_.map(C=>l(C)).filter(C=>C!==void 0)),w=S.filter(C=>!E.has(l(C)));b[r]=[...w,..._],u(b)},removeState:(b,..._)=>{d(b);for(const S of _){const E=b[r].indexOf(S);E!==-1&&b[r].splice(E,1)}u(b)},hasState:(b,_)=>(d(b),b[r].indexOf(_)!==-1)}}function l_(t){return t===void 0?!0:typeof t!="object"?!1:Object.keys(t).length===0}function Gu(t,e){return`${t},${e}`}function $u(t,e){const r=(Array.isArray(t)?t:[t]).flatMap(c=>c.marks.map(l=>[Gu(c.key,l.key),l.state])),o={};for(const c of e){const[l,u]=Array.isArray(c)?c:[c,{}];o[l]=r.reduce((d,h)=>{const[p,v={}]=h,m=l_(v[l])?u:v[l];for(const[b,_]of Object.entries(m)){const S=d[b],E=(w,C,M,L)=>{const R=Gu(L.__data__.viewKey,L.__data__.markKey);return p!==R?S==null?void 0:S(w,C,M,L):typeof _!="function"?_:_(w,C,M,L)};d[b]=E}return d},{})}return o}function pl(t,e){const n=new Map(t.map((o,c)=>[o,c])),r=e?t.map(e):t;return(o,c)=>{if(typeof o!="function")return o;const l=n.get(c),u=e?e(c):c;return o(u,l,r,c)}}function u_(t){var{link:e=!1,valueof:n=(p,v)=>p,coordinate:r}=t,o=cc(t,["link","valueof","coordinate"]);const c="element-link";if(!e)return[()=>{},()=>{}];const l=p=>p.__data__.points,u=(p,v)=>{const[,m,b]=p,[_,,,S]=v;return[m,_,S,b]};return[p=>{var v;if(p.length<=1)return;const m=Ea(p,(b,_)=>{const{x:S}=b.__data__,{x:E}=_.__data__;return S-E});for(let b=1;b<m.length;b++){const _=jo(),S=m[b-1],E=m[b],[w,C,M,L]=u(l(S),l(E));_.moveTo(...w),_.lineTo(...C),_.lineTo(...M),_.lineTo(...L),_.closePath();const R=ya(o,$=>n($,S)),{fill:j=S.getAttribute("fill")}=R,z=cc(R,["fill"]),H=new I.y$({className:c,style:Object.assign({d:_.toString(),fill:j,zIndex:-2},z)});(v=S.link)===null||v===void 0||v.remove(),S.parentNode.appendChild(H),S.link=H}},p=>{var v;(v=p.link)===null||v===void 0||v.remove(),p.link=null}]}function f_(t,e,n){const r=o=>{const{transform:c}=t.style;return c?`${c} ${o}`:o};if(Ar(n)){const{points:o}=t.__data__,[c,l]=Zr(n)?Wd(o):o,u=n.getCenter(),d=si(c,u),h=si(l,u),p=no(d),v=zb(d,h),m=p+v/2,b=e*Math.cos(m),_=e*Math.sin(m);return r(`translate(${b}, ${_})`)}return Zr(n)?r(`translate(${e}, 0)`):r(`translate(0, ${-e})`)}function ih(t){var{document:e,background:n,scale:r,coordinate:o,valueof:c}=t,l=cc(t,["document","background","scale","coordinate","valueof"]);const u="element-background";if(!n)return[()=>{},()=>{}];const d=(w,C,M)=>{const L=w.invert(C),R=C+w.getBandWidth(L)/2,j=w.getStep(L)/2,z=j*M;return[R-j+z,R+j-z]},h=(w,C)=>{const{x:M}=r;if(!cl(M))return[0,1];const{__data__:L}=w,{x:R}=L,[j,z]=d(M,R,C);return[j,z]},p=(w,C)=>{const{y:M}=r;if(!cl(M))return[0,1];const{__data__:L}=w,{y:R}=L,[j,z]=d(M,R,C);return[j,z]},v=(w,C)=>{const{padding:M}=C,[L,R]=h(w,M),[j,z]=p(w,M),H=[[L,j],[R,j],[R,z],[L,z]].map(It=>o.map(It)),{__data__:$}=w,{y:dt,y1:gt}=$;return eh(e,H,{y:dt,y1:gt},o,C)},m=(w,C)=>{const{transform:M="scale(1.2, 1.2)",transformOrigin:L="center center",stroke:R=""}=C,j=cc(C,["transform","transformOrigin","stroke"]),z=Object.assign({transform:M,transformOrigin:L,stroke:R},j),H=w.cloneNode(!0);for(const[$,dt]of Object.entries(z))H.style[$]=dt;return H},b=()=>{const{x:w,y:C}=r;return[w,C].some(cl)};return[w=>{w.background&&w.background.remove();const C=ya(l,It=>c(It,w)),{fill:M="#CCD6EC",fillOpacity:L=.3,zIndex:R=-2,padding:j=.001,lineWidth:z=0}=C,H=cc(C,["fill","fillOpacity","zIndex","padding","lineWidth"]),$=Object.assign(Object.assign({},H),{fill:M,fillOpacity:L,zIndex:R,padding:j,lineWidth:z}),gt=(b()?v:m)(w,$);gt.className=u,w.parentNode.parentNode.appendChild(gt),w.background=gt},w=>{var C;(C=w.background)===null||C===void 0||C.remove(),w.background=null},w=>w.className===u]}function qa(t,e){const r=t.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(t.cursor=r.style.cursor,r.style.cursor=e)}function o5(t){qa(t,t.cursor)}function d_(t,e,n){return t.find(r=>Object.entries(e).every(([o,c])=>n(r)[o]===c))}function oh(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function gl(t,e=!1){const n=GA(t,r=>!!r).map((r,o)=>[o===0?"M":"L",...r]);return e&&n.push(["Z"]),n}function bg(t){return t.querySelectorAll(".element")}function h_(t,e,n=0){const r=[["M",...e[1]]],o=oh(t,e[1]),c=oh(t,e[0]);return o===0?r.push(["L",...e[3]],["A",c,c,0,n,1,...e[0]],["Z"]):r.push(["A",o,o,0,n,0,...e[2]],["L",...e[3]],["A",c,c,0,n,1,...e[0]],["Z"]),r}function ah(t,e){if(e(t))return t;let n=t.parent;for(;n&&!e(n);)n=n.parent;return n}const p_=["interval","point","density"];function a5({elementsof:t,root:e,coordinate:n,scale:r,validFindByXMarks:o=p_}){var c,l;let u=t(e);const d=p=>o.includes(p.markType);if(u.find(d)){u=u.filter(d);const p=r.x,v=r.series,m=(l=(c=p==null?void 0:p.getBandWidth)===null||c===void 0?void 0:c.call(p))!==null&&l!==void 0?l:0,b=v?_=>{var S,E;const w=Math.round(1/((S=v.valueBandWidth)!==null&&S!==void 0?S:1));return _.__data__.x+((E=_.__data__.series)!==null&&E!==void 0?E:0)*m+m/(w*2)}:_=>_.__data__.x+m/2;return u.sort((_,S)=>b(_)-b(S)),_=>{const S=Aa(e,_);if(!S)return;const[E]=n.invert(S),w=xs(b).center,C=w(u,E);return u[C]}}return p=>{const{target:v}=p;return ah(v,m=>m.classList?m.classList.includes("element"):!1)}}function g_(t){return ah(t,e=>e.className==="component")}function s5(t){return ah(t,e=>e.className==="element")}function sh(t){return ah(t,e=>e.className==="label")}function Zi(t,e,n,r=o=>!0){return o=>{if(!r(o))return;n.emit(`plot:${t}`,o);const{target:c}=o;if(!c)return;const{className:l}=c;if(l==="plot")return;const u=s5(c),d=g_(c),h=sh(c),p=u||d||h;if(!p)return;const{className:v,markType:m}=p,b=Object.assign(Object.assign({},o),{nativeEvent:!0});v==="element"?(b.data={data:Gy(p,e)},n.emit(`element:${t}`,b),n.emit(`${m}:${t}`,b)):v==="label"?(b.data={data:p.attributes.datum},n.emit(`label:${t}`,b),n.emit(`${l}:${t}`,b)):(n.emit(`component:${t}`,b),n.emit(`${l}:${t}`,b))}}function ch(){return(t,e,n)=>{const{container:r,view:o}=t,c=Zi(Cr.CLICK,o,n,z=>z.detail===1),l=Zi(Cr.DBLCLICK,o,n,z=>z.detail===2),u=Zi(Cr.POINTER_TAP,o,n),d=Zi(Cr.POINTER_DOWN,o,n),h=Zi(Cr.POINTER_UP,o,n),p=Zi(Cr.POINTER_OVER,o,n),v=Zi(Cr.POINTER_OUT,o,n),m=Zi(Cr.POINTER_MOVE,o,n),b=Zi(Cr.POINTER_ENTER,o,n),_=Zi(Cr.POINTER_LEAVE,o,n),S=Zi(Cr.POINTER_UPOUTSIDE,o,n),E=Zi(Cr.DRAG_START,o,n),w=Zi(Cr.DRAG,o,n),C=Zi(Cr.DRAG_END,o,n),M=Zi(Cr.DRAG_ENTER,o,n),L=Zi(Cr.DRAG_LEAVE,o,n),R=Zi(Cr.DRAG_OVER,o,n),j=Zi(Cr.DROP,o,n);return r.addEventListener("click",c),r.addEventListener("click",l),r.addEventListener("pointertap",u),r.addEventListener("pointerdown",d),r.addEventListener("pointerup",h),r.addEventListener("pointerover",p),r.addEventListener("pointerout",v),r.addEventListener("pointermove",m),r.addEventListener("pointerenter",b),r.addEventListener("pointerleave",_),r.addEventListener("pointerupoutside",S),r.addEventListener("dragstart",E),r.addEventListener("drag",w),r.addEventListener("dragend",C),r.addEventListener("dragenter",M),r.addEventListener("dragleave",L),r.addEventListener("dragover",R),r.addEventListener("drop",j),()=>{r.removeEventListener("click",c),r.removeEventListener("click",l),r.removeEventListener("pointertap",u),r.removeEventListener("pointerdown",d),r.removeEventListener("pointerup",h),r.removeEventListener("pointerover",p),r.removeEventListener("pointerout",v),r.removeEventListener("pointermove",m),r.removeEventListener("pointerenter",b),r.removeEventListener("pointerleave",_),r.removeEventListener("pointerupoutside",S),r.removeEventListener("dragstart",E),r.removeEventListener("drag",w),r.removeEventListener("dragend",C),r.removeEventListener("dragenter",M),r.removeEventListener("dragleave",L),r.removeEventListener("dragover",R),r.removeEventListener("drop",j)}}}ch.props={reapplyWhenUpdate:!0};function _g(){return{"component.axisRadar":ob,"component.axisLinear":ps,"component.axisArc":ib,"component.legendContinuousBlock":Nb,"component.legendContinuousBlockSize":rg,"component.legendContinuousSize":Ud,"interaction.event":ch,"composition.mark":jb,"composition.view":ag,"shape.label.label":VA}}var c5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Kr(t,e){const n=Object.assign(Object.assign({},_g()),e),r=c=>{if(typeof c!="string")return c;const l=`${t}.${c}`;return n[l]||Gc(`Unknown Component: ${l}`)};return[(c,l)=>{const{type:u}=c,d=c5(c,["type"]);u||Gc("Plot type is required!");const h=r(u);return h==null?void 0:h(d,l)},r]}function v_(t){const{canvas:e,group:n}=t;return(e==null?void 0:e.document)||(n==null?void 0:n.ownerDocument)||Gc("Cannot find library document")}var m_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function l5(t,e,n){const[r]=Kr("coordinate",n),{innerHeight:o,innerWidth:c,insetLeft:l,insetTop:u,insetRight:d,insetBottom:h}=t,{coordinates:p=[]}=e,v=xg(p),m=v[0].type==="cartesian3D",b=Object.assign(Object.assign({},t),{x:l,y:u,width:c-l-d,height:o-h-u,transformations:v.flatMap(r)});return m?new _0.Coordinate3D(b):new _0.Coordinate(b)}function lh(t,e){const{coordinate:n={},coordinates:r}=t,o=m_(t,["coordinate","coordinates"]);if(r)return t;const{type:c,transform:l=[]}=n,u=m_(n,["type","transform"]);if(!c)return Object.assign(Object.assign({},o),{coordinates:l});const[,d]=Kr("coordinate",e),{transform:h=!1}=d(c).props||{};if(h)throw new Error(`Unknown coordinate: ${c}.`);return Object.assign(Object.assign({},o),{coordinates:[Object.assign({type:c},u),...l]})}function aa(t,e){return t.filter(n=>n.type===e)}function uc(t){return aa(t,"polar").length>0}function u5(t){return aa(t,"helix").length>0}function fc(t){return aa(t,"transpose").length%2===1}function io(t){return aa(t,"parallel").length>0}function uh(t){return aa(t,"theta").length>0}function y_(t){return aa(t,"reflect").length>0}function Yu(t){return aa(t,"radial").length>0}function b_(t){return aa(t,"radar").length>0}function fh(t){return aa(t,"reflectY").length>0}function xg(t){return t.find(e=>e.type==="cartesian"||e.type==="cartesian3D")?t:[...t,{type:"cartesian"}]}function er(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}var f5=er("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),dh=er("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Sg=er("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),d5=er("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),hh=er("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),vl=er("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),h5=er("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),p5=er("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),g5=er("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),v5=er("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),__=er("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function ph(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function gh(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function dc(){}var Ts=.7,hc=1/Ts,pc="\\s*([+-]?\\d+)\\s*",Xu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Og=/^#([0-9a-f]{3,8})$/,x_=new RegExp("^rgb\\(".concat(pc,",").concat(pc,",").concat(pc,"\\)$")),m5=new RegExp("^rgb\\(".concat(wo,",").concat(wo,",").concat(wo,"\\)$")),y5=new RegExp("^rgba\\(".concat(pc,",").concat(pc,",").concat(pc,",").concat(Xu,"\\)$")),b5=new RegExp("^rgba\\(".concat(wo,",").concat(wo,",").concat(wo,",").concat(Xu,"\\)$")),_5=new RegExp("^hsl\\(".concat(Xu,",").concat(wo,",").concat(wo,"\\)$")),qu=new RegExp("^hsla\\(".concat(Xu,",").concat(wo,",").concat(wo,",").concat(Xu,"\\)$")),Eg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ph(dc,Ag,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:S_,formatHex:S_,formatHex8:O_,formatHsl:E_,formatRgb:wg,toString:wg});function S_(){return this.rgb().formatHex()}function O_(){return this.rgb().formatHex8()}function E_(){return M_(this).formatHsl()}function wg(){return this.rgb().formatRgb()}function Ag(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Og.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?w_(e):n===3?new Xi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?vh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?vh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=x_.exec(t))?new Xi(e[1],e[2],e[3],1):(e=m5.exec(t))?new Xi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=y5.exec(t))?vh(e[1],e[2],e[3],e[4]):(e=b5.exec(t))?vh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_5.exec(t))?Cg(e[1],e[2]/100,e[3]/100,1):(e=qu.exec(t))?Cg(e[1],e[2]/100,e[3]/100,e[4]):Eg.hasOwnProperty(t)?w_(Eg[t]):t==="transparent"?new Xi(NaN,NaN,NaN,0):null}function w_(t){return new Xi(t>>16&255,t>>8&255,t&255,1)}function vh(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xi(t,e,n,r)}function A_(t){return t instanceof dc||(t=Ag(t)),t?(t=t.rgb(),new Xi(t.r,t.g,t.b,t.opacity)):new Xi}function mh(t,e,n,r){return arguments.length===1?A_(t):new Xi(t,e,n,r==null?1:r)}function Xi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ph(Xi,mh,gh(dc,{brighter:function(e){return e=e==null?hc:Math.pow(hc,e),new Xi(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Ts:Math.pow(Ts,e),new Xi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Xi(gc(this.r),gc(this.g),gc(this.b),Ku(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T_,formatHex:T_,formatHex8:C_,formatRgb:Tg,toString:Tg}));function T_(){return"#".concat(vc(this.r)).concat(vc(this.g)).concat(vc(this.b))}function C_(){return"#".concat(vc(this.r)).concat(vc(this.g)).concat(vc(this.b)).concat(vc((isNaN(this.opacity)?1:this.opacity)*255))}function Tg(){var t=Ku(this.opacity);return"".concat(t===1?"rgb(":"rgba(").concat(gc(this.r),", ").concat(gc(this.g),", ").concat(gc(this.b)).concat(t===1?")":", ".concat(t,")"))}function Ku(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function gc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vc(t){return t=gc(t),(t<16?"0":"")+t.toString(16)}function Cg(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new sa(t,e,n,r)}function M_(t){if(t instanceof sa)return new sa(t.h,t.s,t.l,t.opacity);if(t instanceof dc||(t=Ag(t)),!t)return new sa;if(t instanceof sa)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),c=Math.max(e,n,r),l=NaN,u=c-o,d=(c+o)/2;return u?(e===c?l=(n-r)/u+(n<r)*6:n===c?l=(r-e)/u+2:l=(e-n)/u+4,u/=d<.5?c+o:2-c-o,l*=60):u=d>0&&d<1?0:l,new sa(l,u,d,t.opacity)}function x5(t,e,n,r){return arguments.length===1?M_(t):new sa(t,e,n,r==null?1:r)}function sa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ph(sa,x5,gh(dc,{brighter:function(e){return e=e==null?hc:Math.pow(hc,e),new sa(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ts:Math.pow(Ts,e),new sa(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,c=2*r-o;return new Xi(bh(e>=240?e-240:e+120,c,o),bh(e,c,o),bh(e<120?e+240:e-120,c,o),this.opacity)},clamp:function(){return new sa(yh(this.h),Mg(this.s),Mg(this.l),Ku(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Ku(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(yh(this.h),", ").concat(Mg(this.s)*100,"%, ").concat(Mg(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function yh(t){return t=(t||0)%360,t<0?t+360:t}function Mg(t){return Math.max(0,Math.min(1,t||0))}function bh(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Lg(t,e,n,r,o){var c=t*t,l=c*t;return((1-3*t+3*c-l)*e+(4-6*c+3*l)*n+(1+3*t+3*c-3*l)*r+l*o)/6}function L_(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],c=t[r+1],l=r>0?t[r-1]:2*o-c,u=r<e-1?t[r+2]:2*c-o;return Lg((n-r/e)*e,l,o,c,u)}}function Pg(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],c=t[r%e],l=t[(r+1)%e],u=t[(r+2)%e];return Lg((n-r/e)*e,o,c,l,u)}}var Qu=function(t){return function(){return t}};function Uo(t,e){return function(n){return t+n*e}}function Ig(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function S5(t,e){var n=e-t;return n?Uo(t,n>180||n<-180?n-360*Math.round(n/360):n):Qu(isNaN(t)?e:t)}function f6(t){return(t=+t)==1?mc:function(e,n){return n-e?Ig(e,n,t):Qu(isNaN(e)?n:e)}}function mc(t,e){var n=e-t;return n?Uo(t,n):Qu(isNaN(t)?e:t)}var d6=function t(e){var n=f6(e);function r(o,c){var l=n((o=mh(o)).r,(c=mh(c)).r),u=n(o.g,c.g),d=n(o.b,c.b),h=mc(o.opacity,c.opacity);return function(p){return o.r=l(p),o.g=u(p),o.b=d(p),o.opacity=h(p),o+""}}return r.gamma=t,r}(1);function O5(t){return function(e){var n=e.length,r=new Array(n),o=new Array(n),c=new Array(n),l,u;for(l=0;l<n;++l)u=mh(e[l]),r[l]=u.r||0,o[l]=u.g||0,c[l]=u.b||0;return r=t(r),o=t(o),c=t(c),u.opacity=1,function(d){return u.r=r(d),u.g=o(d),u.b=c(d),u+""}}}var _h=O5(L_),xh=O5(Pg),Hr=t=>_h(t[t.length-1]),P_=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(er),E5=Hr(P_),Cs=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(er),I_=Hr(Cs),R_=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(er),w5=Hr(R_),k_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(er),A5=Hr(k_),D_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(er),T5=Hr(D_),C5=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(er),h6=Hr(C5),M5=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(er),p6=Hr(M5),L5=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(er),g6=Hr(L5),P5=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(er),F_=Hr(P5),N_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(er),v6=Hr(N_),Rg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(er),I5=Hr(Rg),R5=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(er),B_=Hr(R5),j_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(er),m6=Hr(j_),kg=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(er),k5=Hr(kg),D5=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(er),Sh=Hr(D5),z_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(er),y6=Hr(z_),Oh=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(er),Dg=Hr(Oh),Ta=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(er),b6=Hr(Ta),Fg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(er),_6=Hr(Fg),Ng=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(er),U_=Hr(Ng),Ms=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(er),Z_=Hr(Ms),Ju=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(er),F5=Hr(Ju),H_=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(er),ml=Hr(H_),V_=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(er),N5=Hr(V_),B5=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(er),x6=Hr(B5),j5=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(er),S6=Hr(j5),z5=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(er),O6=Hr(z5);function E6(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}function tf(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Eh(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ef(){}var Ao=.7,yc=1/Ao,Ka="\\s*([+-]?\\d+)\\s*",nf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ca="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yl=/^#([0-9a-f]{3,8})$/,U5=new RegExp("^rgb\\(".concat(Ka,",").concat(Ka,",").concat(Ka,"\\)$")),Z5=new RegExp("^rgb\\(".concat(Ca,",").concat(Ca,",").concat(Ca,"\\)$")),w6=new RegExp("^rgba\\(".concat(Ka,",").concat(Ka,",").concat(Ka,",").concat(nf,"\\)$")),A6=new RegExp("^rgba\\(".concat(Ca,",").concat(Ca,",").concat(Ca,",").concat(nf,"\\)$")),T6=new RegExp("^hsl\\(".concat(nf,",").concat(Ca,",").concat(Ca,"\\)$")),C6=new RegExp("^hsla\\(".concat(nf,",").concat(Ca,",").concat(Ca,",").concat(nf,"\\)$")),H5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tf(ef,G_,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:V5,formatHex:V5,formatHex8:M6,formatHsl:W_,formatRgb:Bg,toString:Bg});function V5(){return this.rgb().formatHex()}function M6(){return this.rgb().formatHex8()}function W_(){return $_(this).formatHsl()}function Bg(){return this.rgb().formatRgb()}function G_(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=yl.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?wh(e):n===3?new wi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ls(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ls(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=U5.exec(t))?new wi(e[1],e[2],e[3],1):(e=Z5.exec(t))?new wi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=w6.exec(t))?Ls(e[1],e[2],e[3],e[4]):(e=A6.exec(t))?Ls(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=T6.exec(t))?Pi(e[1],e[2]/100,e[3]/100,1):(e=C6.exec(t))?Pi(e[1],e[2]/100,e[3]/100,e[4]):H5.hasOwnProperty(t)?wh(H5[t]):t==="transparent"?new wi(NaN,NaN,NaN,0):null}function wh(t){return new wi(t>>16&255,t>>8&255,t&255,1)}function Ls(t,e,n,r){return r<=0&&(t=e=n=NaN),new wi(t,e,n,r)}function W5(t){return t instanceof ef||(t=G_(t)),t?(t=t.rgb(),new wi(t.r,t.g,t.b,t.opacity)):new wi}function Ah(t,e,n,r){return arguments.length===1?W5(t):new wi(t,e,n,r==null?1:r)}function wi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}tf(wi,Ah,Eh(ef,{brighter:function(e){return e=e==null?yc:Math.pow(yc,e),new wi(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Ao:Math.pow(Ao,e),new wi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new wi(bc(this.r),bc(this.g),bc(this.b),Ps(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:G5,formatHex:G5,formatHex8:jg,formatRgb:Th,toString:Th}));function G5(){return"#".concat(Is(this.r)).concat(Is(this.g)).concat(Is(this.b))}function jg(){return"#".concat(Is(this.r)).concat(Is(this.g)).concat(Is(this.b)).concat(Is((isNaN(this.opacity)?1:this.opacity)*255))}function Th(){var t=Ps(this.opacity);return"".concat(t===1?"rgb(":"rgba(").concat(bc(this.r),", ").concat(bc(this.g),", ").concat(bc(this.b)).concat(t===1?")":", ".concat(t,")"))}function Ps(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Is(t){return t=bc(t),(t<16?"0":"")+t.toString(16)}function Pi(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nr(t,e,n,r)}function $_(t){if(t instanceof nr)return new nr(t.h,t.s,t.l,t.opacity);if(t instanceof ef||(t=G_(t)),!t)return new nr;if(t instanceof nr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),c=Math.max(e,n,r),l=NaN,u=c-o,d=(c+o)/2;return u?(e===c?l=(n-r)/u+(n<r)*6:n===c?l=(r-e)/u+2:l=(e-n)/u+4,u/=d<.5?c+o:2-c-o,l*=60):u=d>0&&d<1?0:l,new nr(l,u,d,t.opacity)}function $5(t,e,n,r){return arguments.length===1?$_(t):new nr(t,e,n,r==null?1:r)}function nr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}tf(nr,$5,Eh(ef,{brighter:function(e){return e=e==null?yc:Math.pow(yc,e),new nr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ao:Math.pow(Ao,e),new nr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,c=2*r-o;return new wi(_c(e>=240?e-240:e+120,c,o),_c(e,c,o),_c(e<120?e+240:e-120,c,o),this.opacity)},clamp:function(){return new nr(Y_(this.h),Rs(this.s),Rs(this.l),Ps(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Ps(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(Y_(this.h),", ").concat(Rs(this.s)*100,"%, ").concat(Rs(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function Y_(t){return t=(t||0)%360,t<0?t+360:t}function Rs(t){return Math.max(0,Math.min(1,t||0))}function _c(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var Y5=Math.PI/180,X5=180/Math.PI,X_=-.14861,zg=1.78277,Ug=-.29227,rf=-.90649,bl=1.97294,q_=bl*rf,K_=bl*zg,Q_=zg*Ug-rf*X_;function J_(t){if(t instanceof Ds)return new Ds(t.h,t.s,t.l,t.opacity);t instanceof wi||(t=W5(t));var e=t.r/255,n=t.g/255,r=t.b/255,o=(Q_*r+q_*e-K_*n)/(Q_+q_-K_),c=r-o,l=(bl*(n-o)-Ug*c)/rf,u=Math.sqrt(l*l+c*c)/(bl*o*(1-o)),d=u?Math.atan2(l,c)*X5-120:NaN;return new Ds(d<0?d+360:d,u,o,t.opacity)}function ks(t,e,n,r){return arguments.length===1?J_(t):new Ds(t,e,n,r==null?1:r)}function Ds(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}tf(Ds,ks,Eh(ef,{brighter:function(e){return e=e==null?yc:Math.pow(yc,e),new Ds(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ao:Math.pow(Ao,e),new Ds(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Y5,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),o=Math.cos(e),c=Math.sin(e);return new wi(255*(n+r*(X_*o+zg*c)),255*(n+r*(Ug*o+rf*c)),255*(n+r*(bl*o)),this.opacity)}}));var q5=Math.PI/180,K5=180/Math.PI,t2=-.14861,Zg=1.78277,Hg=-.29227,Ch=-.90649,of=1.97294,Vg=of*Ch,e2=of*Zg,n2=Zg*Hg-Ch*t2;function Q5(t){if(t instanceof xc)return new xc(t.h,t.s,t.l,t.opacity);t instanceof Xi||(t=A_(t));var e=t.r/255,n=t.g/255,r=t.b/255,o=(n2*r+Vg*e-e2*n)/(n2+Vg-e2),c=r-o,l=(of*(n-o)-Hg*c)/Ch,u=Math.sqrt(l*l+c*c)/(of*o*(1-o)),d=u?Math.atan2(l,c)*K5-120:NaN;return new xc(d<0?d+360:d,u,o,t.opacity)}function Mh(t,e,n,r){return arguments.length===1?Q5(t):new xc(t,e,n,r==null?1:r)}function xc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ph(xc,Mh,gh(dc,{brighter:function(e){return e=e==null?hc:Math.pow(hc,e),new xc(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ts:Math.pow(Ts,e),new xc(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*q5,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),o=Math.cos(e),c=Math.sin(e);return new Xi(255*(n+r*(t2*o+Zg*c)),255*(n+r*(Hg*o+Ch*c)),255*(n+r*(of*o)),this.opacity)}}));function r2(t){return function e(n){n=+n;function r(o,c){var l=t((o=Mh(o)).h,(c=Mh(c)).h),u=mc(o.s,c.s),d=mc(o.l,c.l),h=mc(o.opacity,c.opacity);return function(p){return o.h=l(p),o.s=u(p),o.l=d(Math.pow(p,n)),o.opacity=h(p),o+""}}return r.gamma=e,r}(1)}var L6=r2(S5),Wg=r2(mc),J5=Wg(ks(300,.5,0),ks(-240,.5,1)),tT=Wg(ks(-100,.75,.35),ks(80,1.5,.8)),i2=Wg(ks(260,.75,.35),ks(80,1.5,.8)),Lh=ks();function eT(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Lh.h=360*t-100,Lh.s=1.5-1.5*e,Lh.l=.8-.9*e,Lh+""}var Ph=Ah(),nT=Math.PI/3,rT=Math.PI*2/3;function iT(t){var e;return t=(.5-t)*Math.PI,Ph.r=255*(e=Math.sin(t))*e,Ph.g=255*(e=Math.sin(t+nT))*e,Ph.b=255*(e=Math.sin(t+rT))*e,Ph+""}function oT(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Ih(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var o2=Ih(er("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),aT=Ih(er("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),sT=Ih(er("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),cT=Ih(er("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function a2(t,e,n,r,o,c){const{guide:l={}}=n,u=mT(t,e,n);if(typeof u!="string")return n;const d=h2(u,t,e,n),h=pT(u,d,n);return Object.assign(Object.assign(Object.assign({},n),g2(u,t,e,n,r)),{domain:h,range:p2(u,t,e,n,h,o,c),expectedDomain:d,guide:l,name:t,type:u})}function lT(t,e){const n={};for(const r of t){const{values:o,name:c}=r,l=e[c];for(const u of o){const{name:d,value:h}=u;n[d]=h.map(p=>l.map(p))}}return n}function uT(t,e){const n=Array.from(t.values()).flatMap(o=>o.channels);Ql(n,o=>o.map(c=>e.get(c.scale.uid)),o=>o.name).filter(([,o])=>o.some(c=>typeof c.getOptions().groupTransform=="function")&&o.every(c=>c.getTicks)).map(o=>o[1]).forEach(o=>{const c=o.map(l=>l.getOptions().groupTransform)[0];c(o)})}function fT(t,e){var n;const{components:r=[]}=e,o=["scale","encode","axis","legend","data","transform"],c=Array.from(new Set(t.flatMap(u=>u.channels.map(d=>d.scale)))),l=new Map(c.map(u=>[u.name,u]));for(const u of r){const d=hT(u);for(const h of d){const p=l.get(h),v=((n=u.scale)===null||n===void 0?void 0:n[h])||{},{independent:m=!1}=v;if(p&&!m){const{guide:b}=p,_=typeof b=="boolean"?{}:b;p.guide=an({},_,u),Object.assign(p,v)}else{const b=Object.assign(Object.assign({},v),{expectedDomain:v.domain,name:h,guide:$0(u,o)});c.push(b)}}}return c}function dT(t){if(!t||!Array.isArray(t))return[Do,Do];let e,n;return[c=>{var l;e=c.map.bind(c),n=(l=c.invert)===null||l===void 0?void 0:l.bind(c);const u=t.filter(([m])=>typeof m=="function"),d=t.filter(([m])=>typeof m!="function"),h=new Map(d);if(c.map=m=>{for(const[b,_]of u)if(b(m))return _;return h.has(m)?h.get(m):e(m)},!n)return c;const p=new Map(d.map(([m,b])=>[b,m])),v=new Map(u.map(([m,b])=>[b,m]));return c.invert=m=>v.has(m)?m:p.has(m)?p.get(m):n(m),c},c=>(e!==null&&(c.map=e),n!==null&&(c.invert=n),c)]}function s2(t,e){const n=Object.keys(t);for(const r of Object.values(e)){const{name:o}=r.getOptions();if(!(o in t))t[o]=r;else{const c=n.filter(d=>d.startsWith(o)).map(d=>+(d.replace(o,"")||0)),l=wr(c)+1,u=`${o}${l}`;t[u]=r,r.getOptions().key=u}}return t}function c2(t,e){const[n]=Kr("scale",e),{relations:r}=t,[o]=dT(r),c=n(t);return o(c)}function l2(t){const e=t.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));u2(e,"x"),u2(e,"y")}function hT(t){const{channels:e=[],type:n,scale:r={}}=t,o=["shape","color","opacity","size"];return e.length!==0?e:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(c=>o.includes(c)):[]}function u2(t,e){const n=t.filter(({name:c,facet:l=!0})=>l&&c===e),r=n.flatMap(c=>c.domain),o=n.every(f2)?$a(r):n.every(d2)?Array.from(new Set(r)):null;if(o!==null)for(const c of n)c.domain=o}function pT(t,e,n){const{ratio:r}=n;return r==null?e:f2({type:t})?gT(e,r,t):d2({type:t})?vT(e,r):e}function gT(t,e,n){const r=t.map(Number),o=new eo({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*e]});return n==="time"?t.map(c=>new Date(o.map(c))):t.map(c=>o.map(c))}function vT(t,e){const n=Math.round(t.length*e);return t.slice(0,n)}function f2(t){const{type:e}=t;return typeof e!="string"?!1:["linear","log","pow","time"].includes(e)}function d2(t){const{type:e}=t;return typeof e!="string"?!1:["band","point","ordinal"].includes(e)}function mT(t,e,n){const{type:r,domain:o,range:c,quantitative:l,ordinal:u}=n;return r!==void 0?r:P6(e)?"identity":typeof c=="string"?"linear":(o||c||[]).length>2?Oc(t,u):o!==void 0?$g([o])?Oc(t,u):y2(e)?"time":_l(t,c,l):$g(e)?Oc(t,u):y2(e)?"time":_l(t,c,l)}function h2(t,e,n,r){const{domain:o}=r;if(o!==void 0)return o;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return xl(ST(n,r),r);case"band":case"ordinal":case"point":return m2(n);case"quantile":return Gg(n);case"sequential":return xl(OT(n),r);default:return[]}}function p2(t,e,n,r,o,c,l){const{range:u}=r;if(typeof u=="string")return v2(u);if(u!==void 0)return u;const{rangeMin:d,rangeMax:h}=r;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":{const p=Sc(n,r,o,c,l),[v,m]=ET(e,p);return[d!=null?d:v,h!=null?h:m]}case"band":case"point":{const p=e==="size"?5:0,v=e==="size"?10:1;return[d!=null?d:p,h!=null?h:v]}case"ordinal":return Sc(n,r,o,c,l);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function g2(t,e,n,r,o){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return _T(o,r);case"band":case"point":return xT(t,e,o,r);case"sequential":return bT(r);default:return r}}function Sc(t,e,n,r,o){const[c]=Kr("palette",o),{category10:l,category20:u}=r,d=uE(n).length<=l.length?l:u,{palette:h=d,offset:p}=e;if(Array.isArray(h))return h;try{return c({type:h})}catch(v){const m=yT(h,n,p);if(m)return m;throw new Error(`Unknown Component: ${h} `)}}function v2(t){return t.split("-")}function yT(t,e,n=r=>r){if(!t)return null;const r=Ua(t),o=st[`scheme${r}`],c=st[`interpolate${r}`];if(!o&&!c)return null;if(o){if(!o.some(Array.isArray))return o;const l=o[e.length];if(l)return l}return e.map((l,u)=>c(n(u/e.length)))}function bT(t){const{palette:e="ylGnBu",offset:n}=t,r=Ua(e),o=st[`interpolate${r}`];if(!o)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?c=>o(n(c)):o}}function _T(t,e){const{interpolate:n=Tu,nice:r=!1,tickCount:o=5}=e;return Object.assign(Object.assign({},e),{interpolate:n,nice:r,tickCount:o})}function xT(t,e,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const o=af(t,e,n),{paddingInner:c=o,paddingOuter:l=o}=r;return Object.assign(Object.assign({},r),{paddingInner:c,paddingOuter:l,padding:o,unknown:NaN})}function af(t,e,n){return e==="enterDelay"||e==="enterDuration"||e==="size"?0:t==="band"?uh(n)?0:.1:t==="point"?.5:0}function Oc(t,e){return e||(sf(t)?"point":"ordinal")}function _l(t,e,n){return n||(t!=="color"||e?"linear":"sequential")}function xl(t,e){if(t.length===0)return t;const{domainMin:n,domainMax:r}=e,[o,c]=t;return[n!=null?n:o,r!=null?r:c]}function ST(t,e){const{zero:n=!1}=e;let r=1/0,o=-1/0;for(const c of t)for(const l of c)Ur(l)&&(r=Math.min(r,+l),o=Math.max(o,+l));return r===1/0?[]:n?[Math.min(0,r),o]:[r,o]}function m2(t){return Array.from(new Set(t.flat()))}function Gg(t){return t.flat().sort()}function OT(t){let e=1/0,n=-1/0;for(const r of t)for(const o of r)Ur(o)&&(e=Math.min(e,+o),n=Math.max(n,+o));return e===1/0?[]:[e<0?-n:e,n]}function ET(t,e){return t==="enterDelay"?[0,1e3]:t=="enterDuration"?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:t==="color"?[lE(e),i1(e)]:t==="opacity"?[0,1]:t==="size"?[1,10]:[0,1]}function $g(t){return Sl(t,e=>{const n=typeof e;return n==="string"||n==="boolean"})}function y2(t){return Sl(t,e=>e instanceof Date)}function P6(t){return Sl(t,$c)}function Sl(t,e){for(const n of t)if(n.some(e))return!0;return!1}function sf(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}function b2(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t==="enterDelay"||t==="enterDuration"||t==="updateDelay"||t==="updateDuration"||t==="exitDelay"||t==="exitDuration"}function wT(t){if(!t||!t.type)return!1;if(typeof t.type=="function")return!0;const{type:e,domain:n,range:r,interpolator:o}=t,c=n&&n.length>0,l=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(e)&&c&&l||["sequential"].includes(e)&&c&&(l||o)||["constant","identity"].includes(e)&&l)}const AT={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},_2={threshold:"threshold",quantize:"quantize",quantile:"quantile"},I6={ordinal:"ordinal",band:"band",point:"point"},TT={constant:"constant"};var ca=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function x2(t,e,n){const{coordinates:r=[],title:o}=e,[,c]=Kr("component",n),l=t.filter(({guide:p})=>p!==null),u=[],d=NT(e,t,n);if(u.push(...d),o){const{props:p}=c("title"),{defaultPosition:v,defaultOrientation:m,defaultOrder:b,defaultSize:_,defaultCrossPadding:S}=p,E=typeof o=="string"?{title:o}:o;u.push(Object.assign({type:"title",position:v,orientation:m,order:b,crossPadding:S[0],defaultSize:_},E))}return IT(l,r).forEach(([p,v])=>{const{props:m}=c(p),{defaultPosition:b,defaultPlane:_="xy",defaultOrientation:S,defaultSize:E,defaultOrder:w,defaultLength:C,defaultPadding:M=[0,0],defaultCrossPadding:L=[0,0]}=m,R=an({},...v),{guide:j,field:z}=R,H=Array.isArray(j)?j:[j];for(const $ of H){const[dt,gt]=DT(p,b,S,$,v,l,r);if(!dt&&!gt)continue;const It=dt==="left"||dt==="right",rt=It?M[1]:M[0],lt=It?L[1]:L[0],{size:pt,order:bt=w,length:Ht=C,padding:Rt=rt,crossPadding:jt=lt}=$;u.push(Object.assign(Object.assign({title:z},$),{defaultSize:E,length:Ht,position:dt,plane:_,orientation:gt,padding:Rt,order:bt,crossPadding:jt,size:pt,type:p,scales:v}))}}),u}function S2(t,e,n,r,o){const[c]=Kr("component",r),{scaleInstances:l,scale:u,bbox:d}=t,h=ca(t,["scaleInstances","scale","bbox"]),p={bbox:d,library:r};return c(h)({coordinate:e,library:r,markState:o,scales:l,theme:n,value:p,scale:u})}function CT(t){return t.map(e=>{const n=an(e,e.style);return delete n.style,n})}function MT(t){return t.flatMap(e=>e.type=="group"?e.children:e)}function LT(t,e){const n=["left","right","bottom","top"];return Yp(t,({type:c,position:l,group:u})=>n.includes(l)?u===void 0?c.startsWith("legend")?`legend-${l}`:Symbol("independent"):u==="independent"?Symbol("independent"):u:Symbol("independent")).flatMap(([,c])=>{if(c.length===1)return c[0];if(e!==void 0){const p=c.filter(S=>S.length!==void 0).map(S=>S.length),v=Fo(p);if(v>e)return c.forEach(S=>S.group=Symbol("independent")),c;const m=e-v,b=c.length-p.length,_=m/b;c.forEach(S=>{S.length===void 0&&(S.length=_)})}const l=wr(c,p=>p.size),u=wr(c,p=>p.order),d=wr(c,p=>p.crossPadding),h=c[0].position;return{type:"group",size:l,order:u,position:h,children:c,crossPadding:d}})}function O2(t,e){const n=["shape","size","color","opacity"],r=(m,b)=>m==="constant"&&b==="size",o=t.filter(({type:m,name:b})=>typeof m=="string"&&n.includes(b)&&!r(m,b)),c=o.filter(({type:m})=>m==="constant"),l=o.filter(({type:m})=>m!=="constant"),d=Yp(l,m=>m.field?m.field:Symbol("independent")).map(([m,b])=>[m,[...b,...c]]).filter(([,m])=>m.some(b=>b.type!=="constant")),h=new Map(d);if(h.size===0)return[];const p=m=>m.sort(([b],[_])=>b.localeCompare(_));return Array.from(h).map(([,m])=>{const _=fE(m).sort((S,E)=>E.length-S.length).map(S=>({combination:S,option:S.map(E=>[E.name,Yg(E)])}));for(const{option:S,combination:E}of _)if(!S.every(w=>w[1]==="constant")&&S.every(w=>w[1]==="discrete"||w[1]==="constant"))return["legendCategory",E];for(const[S,E]of gE)for(const{option:w,combination:C}of _)if(E.some(M=>s1(p(M),p(w))))return[S,C];return null}).filter(Ur)}function Yg(t){const{type:e}=t;return typeof e!="string"?null:e in AT?"continuous":e in I6?"discrete":e in _2?"distribution":e in TT?"constant":null}function PT(t,e){return t.map(n=>{const{name:r}=n;if(u5(e)||uh(e)||fc(e)&&(uc(e)||Yu(e)))return null;if(r.startsWith("x"))return uc(e)?["axisArc",[n]]:Yu(e)?["axisLinear",[n]]:[fc(e)?"axisY":"axisX",[n]];if(r.startsWith("y"))return uc(e)?["axisLinear",[n]]:Yu(e)?["axisArc",[n]]:[fc(e)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(b_(e))return["axisRadar",[n]];if(!uc(e))return["axisY",[n]]}return null}).filter(Ur)}function IT(t,e){const n=t.filter(r=>wT(r));return[...O2(n,e),...PT(n,e)]}function Xg(t){const e=aa(t,"polar");if(e.length){const r=e[e.length-1],{startAngle:o,endAngle:c}=l1(r);return[o,c]}const n=aa(t,"radial");if(n.length){const r=n[n.length-1],{startAngle:o,endAngle:c}=u1(r);return[o,c]}return[-Math.PI/2,Math.PI/2*3]}function RT(t){const e=/position(\d*)/g.exec(t);return e?+e[1]:null}function kT(t,e,n,r,o){const{name:c}=n[0];if(t==="axisRadar"){const l=r.filter(m=>m.name.startsWith("position")),u=RT(c);if(u===null)return[null,null];const[d,h]=Xg(o),p=b_(o)?l.length:l.length-1;return["center",(h-d)/p*u+d]}if(t==="axisY"&&io(o))return fc(o)?["center","horizontal"]:["center","vertical"];if(t==="axisLinear"){const[l]=Xg(o);return["center",l]}return t==="axisArc"?e[0]==="inner"?["inner",null]:["outer",null]:uc(o)?["center",null]:Yu(o)?["center",null]:t==="axisX"&&y_(o)||t==="axisX"&&fh(o)?["top",null]:e}function DT(t,e,n,r,o,c,l){const[u]=Xg(l),d=[r.position||e,u!=null?u:n];return typeof t=="string"&&t.startsWith("axis")?kT(t,d,o,c,l):typeof t=="string"&&t.startsWith("legend")&&uc(l)&&r.position==="center"?["center","vertical"]:d}function FT(t,e,n=[]){return t==="x"?fc(n)?`${e}Y`:`${e}X`:t==="y"?fc(n)?`${e}X`:`${e}Y`:null}function NT(t,e,n){const[,r]=Kr("component",n),{coordinates:o}=t;function c(l,u,d,h){const p=FT(u,l,o);if(!h||!p)return;const{props:v}=r(p),{defaultPosition:m,defaultSize:b,defaultOrder:_,defaultCrossPadding:[S]}=v;return Object.assign(Object.assign({position:m,defaultSize:b,order:_,type:p,crossPadding:S},h),{scales:[d]})}return e.filter(l=>l.slider||l.scrollbar).flatMap(l=>{const{slider:u,scrollbar:d,name:h}=l;return[c("slider",h,l,u),c("scrollbar",h,l,d)]}).filter(l=>!!l)}function E2(t,e,n,r,o,c){const{type:l}=t;if(!["left","right","bottom","top"].includes(r)||typeof l!="string")return;const d=l;return(d.startsWith("axis")?UT:d.startsWith("group")?BT:d.startsWith("legendContinuous")?ZT:d==="legendCategory"?HT:d.startsWith("slider")?zT:d==="title"?jT:d.startsWith("scrollbar")?w2:()=>{})(t,e,n,r,o,c)}function BT(t,e,n,r,o,c){const{children:l}=t,u=wr(l,h=>h.crossPadding);l.forEach(h=>h.crossPadding=u),l.forEach(h=>E2(h,e,n,r,o,c));const d=wr(l,h=>h.size);t.size=d,l.forEach(h=>h.size=d)}function w2(t,e,n,r,o,c){const{trackSize:l=6}=an({},o.scrollbar,t);t.size=l}function jT(t,e,n,r,o,c){const l=an({},o.title,t),{title:u,subtitle:d,spacing:h=0}=l,p=ca(l,["title","subtitle","spacing"]);if(u){const v=xn(p,"title"),m=kh(u,v);t.size=m.height}if(d){const v=xn(p,"subtitle"),m=kh(d,v);t.size+=h+m.height}}function zT(t,e,n,r,o,c){const l=()=>{const{slider:p}=o;return an({},p,t)},{trackSize:u,handleIconSize:d}=l(),h=Math.max(u,d*2.4);t.size=h}function UT(t,e,n,r,o,c){var l;t.transform=t.transform||[{type:"hide"}];const u=r==="left"||r==="right",d=Qa(t,r,o),{tickLength:h=0,labelSpacing:p=0,titleSpacing:v=0,labelAutoRotate:m}=d,b=ca(d,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),_=cf(t,c),S=lf(b,_),E=h+p;if(S&&S.length){const C=wr(S,L=>L.width),M=wr(S,L=>L.height);if(u)t.size=C+E;else{const{tickFilter:L,labelTransform:R}=t;WT(_,S,e,n,L)&&!R&&m!==!1&&m!==null?(t.labelTransform="rotate(90)",t.size=C+E):(t.labelTransform=(l=t.labelTransform)!==null&&l!==void 0?l:"rotate(0)",t.size=M+E)}}else t.size=h;const w=Rh(b);w&&(u?t.size+=v+w.width:t.size+=v+w.height)}function ZT(t,e,n,r,o,c){const u=(()=>{const{legendContinuous:L}=o;return an({},L,t)})(),{labelSpacing:d=0,titleSpacing:h=0}=u,p=ca(u,["labelSpacing","titleSpacing"]),v=r==="left"||r==="right",m=xn(p,"ribbon"),{size:b}=m,_=xn(p,"handleIcon"),{size:S}=_,E=Math.max(b,S*2.4);t.size=E;const w=cf(t,c),C=lf(p,w);if(C){const L=v?"width":"height",R=wr(C,j=>j[L]);t.size+=R+d}const M=Rh(p);M&&(v?t.size=Math.max(t.size,M.width):t.size+=h+M.height)}function HT(t,e,n,r,o,c){const u=(()=>{const{legendCategory:lt}=o,{title:pt}=t,[bt,Ht]=Array.isArray(pt)?[pt,void 0]:[void 0,pt];return an({title:bt},lt,Object.assign(Object.assign({},t),{title:Ht}))})(),{itemSpacing:d,itemMarkerSize:h,titleSpacing:p,rowPadding:v,colPadding:m,maxCols:b=1/0,maxRows:_=1/0}=u,S=ca(u,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:E,length:w}=t,C=lt=>Math.min(lt,_),M=lt=>Math.min(lt,b),L=r==="left"||r==="right",R=w===void 0?e+(L?0:n[0]+n[1]):w,j=Rh(S),z=cf(t,c),H=lf(S,z,"itemLabel"),$=Math.max(H[0].height,h)+v,dt=(lt,pt=0)=>h+lt+d[0]+pt;L?(()=>{let lt=-1/0,pt=0,bt=1,Ht=0,Rt=-1/0,jt=-1/0;const oe=j?j.height:0,Se=R-oe;for(const{width:xe}of H){const Pe=dt(xe,m);lt=Math.max(lt,Pe),pt+$>Se?(bt++,Rt=Math.max(Rt,Ht),jt=Math.max(jt,pt),Ht=1,pt=$):(pt+=$,Ht++)}bt<=1&&(Rt=Ht,jt=pt),t.size=lt*M(bt),t.length=jt+oe,an(t,{cols:M(bt),gridRow:Rt})})():typeof E=="number"?(()=>{const lt=Math.ceil(H.length/E),pt=wr(H,bt=>dt(bt.width))*E;t.size=$*C(lt)-v,t.length=Math.min(pt,R)})():(()=>{let lt=1,pt=0,bt=-1/0;for(const{width:Ht}of H){const Rt=dt(Ht,m);pt+Rt>R?(bt=Math.max(bt,pt),pt=Rt,lt++):pt+=Rt}lt===1&&(bt=pt),t.size=$*C(lt)-v,t.length=bt})(),j&&(L?t.size=Math.max(t.size,j.width):t.size+=p+j.height)}function cf(t,e){const[n]=Kr("scale",e),{scales:r,tickCount:o,tickMethod:c}=t,l=r.find(u=>u.type!=="constant"&&u.type!=="identity");return o!==void 0&&(l.tickCount=o),c!==void 0&&(l.tickMethod=c),n(l)}function lf(t,e,n="label"){const{labelFormatter:r,tickFilter:o,label:c=!0}=t,l=ca(t,["labelFormatter","tickFilter","label"]);if(!c)return null;const u=VT(e,r,o),d=xn(l,n),h=u.map((m,b)=>Object.fromEntries(Object.entries(d).map(([_,S])=>[_,typeof S=="function"?S(m,b):S]))),p=u.map((m,b)=>{const _=h[b];return kh(m,_)});if(!h.some(m=>m.transform)){const m=u.map((b,_)=>_);t.indexBBox=new Map(m.map(b=>[b,[u[b],p[b]]]))}return p}function Rh(t){const e=h=>h===!1||h===null,{title:n}=t,r=ca(t,["title"]);if(e(n)||n===void 0)return null;const o=xn(r,"title"),{direction:c,transform:l}=o,u=Array.isArray(n)?n.join(","):n;return typeof u!="string"?null:kh(u,Object.assign(Object.assign({},o),{transform:l||(c==="vertical"?"rotate(-90)":"")}))}function Qa(t,e,n){const{title:r}=t,[o,c]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:l,[`axis${i0(e)}`]:u}=n;return an({title:o},l,u,Object.assign(Object.assign({},t),{title:c}))}function A2(t,e){const n=t.getTicks?t.getTicks():t.getOptions().domain;return e?n.filter(e):n}function VT(t,e,n){const o=A2(t,n).map(l=>typeof l=="number"?pd(l):l),c=e?typeof e=="string"?Za(e):e:t.getFormatter?t.getFormatter():l=>`${l}`;return o.map(c)}function Ol(t,e){return t.getBandWidth?t.getBandWidth(e)/2:0}function WT(t,e,n,r,o){if(Fo(e,b=>b.width)>n)return!0;const l=t.clone();l.update({range:[0,n]});const u=A2(t,o),d=u.map(b=>l.map(b)+Ol(l,b)),h=u.map((b,_)=>_),p=-r[0],v=n+r[1],m=(b,_)=>{const{width:S}=_;return[b-S/2,b+S/2]};for(let b=0;b<h.length;b++){const _=d[b],[S,E]=m(_,e[b]);if(S<p||E>v)return!0;const w=d[b+1];if(w){const[C]=m(w,e[b+1]);if(E>C)return!0}}return!1}function kh(t,e){const n=GT(t),{filter:r}=e,o=ca(e,["filter"]);return n.attr(Object.assign(Object.assign({},o),{visibility:"none"})),n.getBBox()}function GT(t){return t instanceof I.s$?t:new I.xv({style:{text:`${t}`}})}function To(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function $T(t){const e=t.find(({type:o})=>o==="axisX"),n=t.find(({type:o})=>o==="axisY"),r=t.find(({type:o})=>o==="axisZ");e&&n&&r&&(e.plane="xy",n.plane="xy",r.plane="yz",r.origin=[e.bbox.x,e.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=e.bbox.x,r.bbox.y=e.bbox.y,t.push(Object.assign(Object.assign({},e),{plane:"xz",showLabel:!1,showTitle:!1,origin:[e.bbox.x,e.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function YT(t,e,n,r){var o,c;const{width:l,height:u,depth:d,x:h=0,y:p=0,z:v=0,inset:m=(o=n.inset)!==null&&o!==void 0?o:0,insetLeft:b=m,insetTop:_=m,insetBottom:S=m,insetRight:E=m,margin:w=(c=n.margin)!==null&&c!==void 0?c:0,marginLeft:C=w,marginBottom:M=w,marginTop:L=w,marginRight:R=w,padding:j=n.padding,paddingBottom:z=j,paddingLeft:H=j,paddingRight:$=j,paddingTop:dt=j}=qT(t,e,n,r),gt=1/4,It=(yn,wn,Sn,Pn,Nn)=>{const{marks:jn}=e;if(jn.length===0)return[Pn,Nn];if(yn-Pn-Nn-yn*gt>0)return[Pn,Nn];const Xn=yn*(1-gt);return[wn==="auto"?Xn*Pn/(Pn+Nn):Pn,Sn==="auto"?Xn*Nn/(Pn+Nn):Nn]},rt=yn=>yn==="auto"?20:yn!=null?yn:20,lt=rt(dt),pt=rt(z),bt=qg(t,u-lt-pt,[lt+L,pt+M],["left","right"],e,n,r),{paddingLeft:Ht,paddingRight:Rt}=bt,jt=l-C-R,[oe,Se]=It(jt,H,$,Ht,Rt),xe=jt-oe-Se,Pe=qg(t,xe,[oe+C,Se+R],["bottom","top"],e,n,r),{paddingTop:Ke,paddingBottom:Ze}=Pe,en=u-M-L,[rn,We]=It(en,z,dt,Ze,Ke),dn=en-rn-We;return{width:l,height:u,depth:d,insetLeft:b,insetTop:_,insetBottom:S,insetRight:E,innerWidth:xe,innerHeight:dn,paddingLeft:oe,paddingRight:Se,paddingTop:We,paddingBottom:rn,marginLeft:C,marginBottom:M,marginTop:L,marginRight:R,x:h,y:p,z:v}}function XT(t){const{height:e,width:n,padding:r=0,paddingLeft:o=r,paddingRight:c=r,paddingTop:l=r,paddingBottom:u=r,margin:d=16,marginLeft:h=d,marginRight:p=d,marginTop:v=d,marginBottom:m=d,inset:b=0,insetLeft:_=b,insetRight:S=b,insetTop:E=b,insetBottom:w=b}=t,C=R=>R==="auto"?20:R,M=n-C(o)-C(c)-h-p-_-S,L=e-C(l)-C(u)-v-m-E-w;return{width:M,height:L}}function qT(t,e,n,r){const{coordinates:o}=e;if(!uc(o)&&!Yu(o))return e;const c=t.filter(w=>typeof w.type=="string"&&w.type.startsWith("axis"));if(c.length===0)return e;const l=c.map(w=>{const C=w.type==="axisArc"?"arc":"linear";return Qa(w,C,n)}),u=wr(l,w=>{var C;return(C=w.labelSpacing)!==null&&C!==void 0?C:0}),d=c.flatMap((w,C)=>{const M=l[C],L=cf(w,r);return lf(M,L)}).filter(Ur),h=wr(d,w=>w.height)+u,p=c.flatMap((w,C)=>{const M=l[C];return Rh(M)}).filter(w=>w!==null),v=p.length===0?0:wr(p,w=>w.height),{inset:m=h,insetLeft:b=m,insetBottom:_=m,insetTop:S=m+v,insetRight:E=m}=e;return Object.assign(Object.assign({},e),{insetLeft:b,insetBottom:_,insetTop:S,insetRight:E})}function qg(t,e,n,r,o,c,l){const u=Nr(t,_=>_.position),{padding:d=c.padding,paddingLeft:h=d,paddingRight:p=d,paddingBottom:v=d,paddingTop:m=d}=o,b={paddingBottom:v,paddingLeft:h,paddingTop:m,paddingRight:p};for(const _ of r){const S=`padding${i0(ys(_))}`,E=u.get(_)||[],w=b[S],C=$=>{$.size===void 0&&($.size=$.defaultSize)},M=$=>{$.type==="group"?($.children.forEach(C),$.size=wr($.children,dt=>dt.size)):$.size=$.defaultSize},L=$=>{$.size||(w!=="auto"?M($):(E2($,e,n,_,c,l),C($)))},R=$=>{$.type.startsWith("axis")&&$.labelAutoHide===void 0&&($.labelAutoHide=!0)},j=_==="bottom"||_==="top",z=To(E,$=>$.order),H=E.filter($=>$.type.startsWith("axis")&&$.order==z);if(H.length&&(H[0].crossPadding=0),typeof w=="number")E.forEach(C),E.forEach(R);else if(E.length===0)b[S]=0;else{const $=j?e+n[0]+n[1]:e,dt=LT(E,$);dt.forEach(L);const gt=dt.reduce((It,{size:rt,crossPadding:lt=12})=>It+rt+lt,0);b[S]=gt}}return b}function KT(t,e,n){const r=Nr(t,j=>`${j.plane||"xy"}-${j.position}`),{paddingLeft:o,paddingRight:c,paddingTop:l,paddingBottom:u,marginLeft:d,marginTop:h,marginBottom:p,marginRight:v,innerHeight:m,innerWidth:b,insetBottom:_,insetLeft:S,insetRight:E,insetTop:w,height:C,width:M,depth:L}=n,R={xy:Kg({width:M,height:C,paddingLeft:o,paddingRight:c,paddingTop:l,paddingBottom:u,marginLeft:d,marginTop:h,marginBottom:p,marginRight:v,innerHeight:m,innerWidth:b,insetBottom:_,insetLeft:S,insetRight:E,insetTop:w}),yz:Kg({width:L,height:C,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:L,innerHeight:C,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:Kg({width:M,height:L,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:M,innerHeight:L,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[j,z]of r.entries()){const[H,$]=j.split("-"),dt=R[H][$],[gt,It]=o1(z,rt=>typeof rt.type!="string"?!1:!!($==="center"||rt.type.startsWith("axis")&&["inner","outer"].includes($)));gt.length&&QT(gt,e,dt,$),It.length&&El(z,e,dt)}}function Kg({width:t,height:e,paddingLeft:n,paddingRight:r,paddingTop:o,paddingBottom:c,marginLeft:l,marginTop:u,marginBottom:d,marginRight:h,innerHeight:p,innerWidth:v,insetBottom:m,insetLeft:b,insetRight:_,insetTop:S}){const E=n+l,w=o+u,C=r+h,M=c+d,L=t-l-h,R=[E+b,w+S,v-b-_,p-S-m,"center",null,null];return{top:[E,0,v,w,"vertical",!0,ui,l,L],right:[t-C,w,C,p,"horizontal",!1,ui],bottom:[E,e-M,v,M,"vertical",!1,ui,l,L],left:[0,w,E,p,"horizontal",!0,ui],"top-left":[E,0,v,w,"vertical",!0,ui],"top-right":[E,0,v,w,"vertical",!0,ui],"bottom-left":[E,e-M,v,M,"vertical",!1,ui],"bottom-right":[E,e-M,v,M,"vertical",!1,ui],center:R,inner:R,outer:R}}function QT(t,e,n,r){const[o,c]=o1(t,l=>!!(typeof l.type=="string"&&l.type.startsWith("axis")));JT(o,e,n,r),nC(c,e,n)}function JT(t,e,n,r){r==="center"?vE(e)?M2(t,e,n,r):Ar(e)?C2(t,e,n):fu(e)&&qi(t,e,n,t[0].orientation):r==="inner"?Qg(t,e,n):r==="outer"&&T2(t,e,n)}function Qg(t,e,n){const[r,o,,c]=n,[l,u]=e.getCenter(),[d]=du(e),h=c/2,p=d*h,v=l-p,m=u-p;for(let b=0;b<t.length;b++){const _=t[b];_.bbox={x:r+v,y:o+m,width:p*2,height:p*2}}}function T2(t,e,n){const[r,o,c,l]=n;for(const u of t)u.bbox={x:r,y:o,width:c,height:l}}function C2(t,e,n){const[r,o,c,l]=n;for(const u of t)u.bbox={x:r,y:o,width:c,height:l}}function qi(t,e,n,r){r==="horizontal"?eC(t,e,n):r==="vertical"&&tC(t,e,n)}function tC(t,e,n){const[r,o,,c]=n,l=new Array(t.length).fill(0),d=e.map(l).filter((h,p)=>p%2===0).map(h=>h+r);for(let h=0;h<t.length;h++){const p=t[h],v=d[h],m=d[h+1]-v;p.bbox={x:v,y:o,width:m,height:c}}}function eC(t,e,n){const[r,o,c]=n,l=new Array(t.length).fill(0),d=e.map(l).filter((h,p)=>p%2===1).map(h=>h+o);for(let h=0;h<t.length;h++){const p=t[h],v=d[h],m=d[h+1]-v;p.bbox={x:r,y:v,width:c,height:m}}}function M2(t,e,n,r){const[o,c,l,u]=n;for(const d of t)d.bbox={x:o,y:c,width:l,height:u},d.radar={index:t.indexOf(d),count:t.length}}function El(t,e,n){const[r,o,c,l,u,d,h,p,v]=n,[m,b,_,S,E,w,C,M]=u==="vertical"?["y",o,"x",r,"height",l,"width",c]:["x",r,"y",o,"width",c,"height",l];t.sort(($,dt)=>h==null?void 0:h($.order,dt.order));const L=$=>$==="title"||$==="group"||$.startsWith("legend"),R=($,dt,gt)=>gt===void 0?dt:L($)?gt:dt,j=($,dt,gt)=>gt===void 0?dt:L($)?gt:dt,z=d?b+w:b;for(let $=0,dt=z;$<t.length;$++){const gt=t[$],{crossPadding:It=0,type:rt}=gt,{size:lt}=gt;gt.bbox={[m]:d?dt-lt-It:dt+It,[_]:j(rt,S,p),[E]:lt,[C]:R(rt,M,v)},dt+=(lt+It)*(d?-1:1)}const H=t.filter($=>$.type==="group");for(const $ of H){const{bbox:dt,children:gt}=$,It=dt[C],rt=It/gt.length,lt=gt.reduce((jt,oe)=>{var Se;const xe=(Se=oe.layout)===null||Se===void 0?void 0:Se.justifyContent;return xe||jt},"flex-start"),pt=gt.map((jt,oe)=>{const{length:Se=rt,padding:xe=0}=jt;return Se+(oe===gt.length-1?0:xe)}),bt=Fo(pt),Ht=It-bt,Rt=lt==="flex-start"?0:lt==="center"?Ht/2:Ht;for(let jt=0,oe=dt[_]+Rt;jt<gt.length;jt++){const Se=gt[jt],{padding:xe=0}=Se,Pe=jt===gt.length-1?0:xe;Se.bbox={[E]:dt[E],[m]:dt[m],[_]:oe,[C]:pt[jt]-Pe},an(Se,{layout:{justifyContent:lt}}),oe+=pt[jt]}}}function nC(t,e,n){if(t.length===0)return;const[r,o,c,l]=n,[u]=du(e),d=l/2*u/Math.sqrt(2),h=r+c/2,p=o+l/2;for(let v=0;v<t.length;v++){const m=t[v];m.bbox={x:h-d,y:p-d,width:d*2,height:d*2}}}function la(t,e,n={},r=!1){if(ma(t)||Array.isArray(t)&&r)return t;const o=xn(t,e);return an(n,o)}function Dh(t,e={}){return ma(t)||Array.isArray(t)||!uf(t)?t:an(e,t)}function uf(t){if(Object.keys(t).length===0)return!0;const{title:e,items:n}=t;return e!==void 0||n!==void 0}function Ma(t,e){return typeof t=="object"?xn(t,e):t}var ff=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},Ec=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Jg=Symbol("CALLBACK_ITEM");function L2(t,e,n){const{encode:r={},scale:o={},transform:c=[]}=e,l=Ec(e,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},l),{encode:r,scale:o,transform:c})]}function Vr(t,e,n){return ff(this,void 0,void 0,function*(){const{library:r}=n,{data:o}=e,[c]=Kr("data",r),l=Fh(o),{transform:u=[]}=l,p=[Ec(l,["transform"]),...u].map(b=>c(b,n)),v=yield ru(p)(o),m=o&&!Array.isArray(o)&&!Array.isArray(v)?{value:v}:v;return[Array.isArray(v)?Ks(v):[],Object.assign(Object.assign({},e),{data:m})]})}function rC(t,e,n){const{encode:r}=e;if(!r)return[t,e];const o={};for(const[c,l]of Object.entries(r))if(Array.isArray(l))for(let u=0;u<l.length;u++){const d=`${c}${u===0?"":u}`;o[d]=l[u]}else o[c]=l;return[t,Object.assign(Object.assign({},e),{encode:o})]}function P2(t,e,n){const{encode:r,data:o}=e;if(!r)return[t,e];const c=ya(r,l=>F6(l)?l:{type:Zo(o,l),value:l});return[t,Object.assign(Object.assign({},e),{encode:c})]}function R6(t,e,n){const{encode:r}=e;if(!r)return[t,e];const o=ya(r,(c,l)=>{const{type:u}=c;return u!=="constant"||b2(l)?c:Object.assign(Object.assign({},c),{constant:!0})});return[t,Object.assign(Object.assign({},e),{encode:o})]}function k6(t,e,n){const{encode:r,data:o}=e;if(!r)return[t,e];const{library:c}=n,l=D2(c),u=ya(r,d=>l(o,d));return[t,Object.assign(Object.assign({},e),{encode:u})]}function I2(t,e,n){const{tooltip:r={}}=e;return ma(r)?[t,e]:Array.isArray(r)?[t,Object.assign(Object.assign({},e),{tooltip:{items:r}})]:$c(r)&&uf(r)?[t,Object.assign(Object.assign({},e),{tooltip:r})]:[t,Object.assign(Object.assign({},e),{tooltip:{items:[r]}})]}function R2(t,e,n){const{data:r,encode:o,tooltip:c={}}=e;if(ma(c))return[t,e];const l=v=>{if(!v)return v;if(typeof v=="string")return t.map(m=>({name:v,value:r[m][v]}));if($c(v)){const{field:m,channel:b,color:_,name:S=m,valueFormatter:E=j=>j}=v,w=typeof E=="string"?Za(E):E,C=b&&o[b],M=C&&o[b].field,L=S||M||b,R=[];for(const j of t){const z=m?r[j][m]:C?o[b].value[j]:null;R[j]={name:L,color:_,value:w(z)}}return R}if(typeof v=="function"){const m=[];for(const b of t){const _=v(r[b],b,r,o);$c(_)?m[b]=Object.assign(Object.assign({},_),{[Jg]:!0}):m[b]={value:_}}return m}return v},{title:u,items:d=[]}=c,h=Ec(c,["title","items"]),p=Object.assign({title:l(u),items:Array.isArray(d)?d.map(l):[]},h);return[t,Object.assign(Object.assign({},e),{tooltip:p})]}function D6(t,e,n){const{encode:r}=e,o=Ec(e,["encode"]);if(!r)return[t,e];const c=Object.entries(r),l=c.filter(([,d])=>{const{value:h}=d;return Array.isArray(h[0])}).flatMap(([d,h])=>{const p=[[d,new Array(t.length).fill(void 0)]],{value:v}=h,m=Ec(h,["value"]);for(let b=0;b<v.length;b++){const _=v[b];if(Array.isArray(_))for(let S=0;S<_.length;S++){const E=p[S]||[`${d}${S}`,new Array(t).fill(void 0)];E[1][b]=_[S],p[S]=E}}return p.map(([b,_])=>[b,Object.assign({type:"column",value:_},m)])}),u=Object.fromEntries([...c,...l]);return[t,Object.assign(Object.assign({},o),{encode:u})]}function ar(t,e,n){const{axis:r={},legend:o={},slider:c={},scrollbar:l={}}=e,u=(h,p)=>{if(typeof h=="boolean")return h?{}:null;const v=h[p];return v===void 0||v?v:null},d=typeof r=="object"?Array.from(new Set(["x","y","z",...Object.keys(r)])):["x","y","z"];return an(e,{scale:Object.assign(Object.assign({},Object.fromEntries(d.map(h=>{const p=u(l,h);return[h,Object.assign({guide:u(r,h),slider:u(c,h),scrollbar:p},p&&{ratio:p.ratio===void 0?.5:p.ratio})]}))),{color:{guide:u(o,"color")},size:{guide:u(o,"size")},shape:{guide:u(o,"shape")},opacity:{guide:u(o,"opacity")}})}),[t,e]}function k2(t,e,n){const{animate:r}=e;return r||r===void 0?[t,e]:(an(e,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,e])}function F6(t){if(typeof t!="object"||t instanceof Date||t===null)return!1;const{type:e}=t;return Ur(e)}function Zo(t,e){return typeof e=="function"?"transform":typeof e=="string"&&df(t,e)?"field":"constant"}function df(t,e){return Array.isArray(t)?t.some(n=>n[e]!==void 0):!1}function Fh(t){if((0,ie.Z)(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};const{type:e="inline"}=t,n=Ec(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}var tv=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},hf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Nh(t,e,n){return tv(this,void 0,void 0,function*(){const[r,o]=yield N6(t,e,n),{encode:c,scale:l,data:u,tooltip:d}=o;if(Array.isArray(u)===!1)return null;const{channels:h}=e,p=Ql(Object.entries(c).filter(([,m])=>Ur(m)),m=>m.map(([b,_])=>Object.assign({name:b},_)),([m])=>{var b;const _=(b=/([^\d]+)\d*$/.exec(m))===null||b===void 0?void 0:b[1],S=h.find(E=>E.name===_);return S!=null&&S.independent?m:_}),v=h.filter(m=>{const{name:b,required:_}=m;if(p.find(([S])=>S===b))return!0;if(_)throw new Error(`Missing encoding for channel: ${b}.`);return!1}).flatMap(m=>{const{name:b,scale:_,scaleKey:S,range:E,quantitative:w,ordinal:C}=m;return p.filter(([L])=>L.startsWith(b)).map(([L,R],j)=>{const z=R.some(bt=>bt.visual),H=R.some(bt=>bt.constant),$=l[L]||{},{independent:dt=!1,key:gt=S||L,type:It=H?"constant":z?"identity":_}=$,rt=hf($,["independent","key","type"]),lt=It==="constant",pt=lt?void 0:E;return{name:L,values:R,scaleKey:dt||lt?Symbol("independent"):gt,scale:Object.assign(Object.assign({type:It,range:pt},rt),{quantitative:w,ordinal:C})}})});return[o,Object.assign(Object.assign({},e),{index:r,channels:v,tooltip:d})]})}function D2(t){const[e]=Kr("encode",t);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:e(r)(n),field:iC(r)})}function N6(t,e,n){return tv(this,void 0,void 0,function*(){const{library:r}=n,[o]=Kr("transform",r),{preInference:c=[],postInference:l=[]}=e,{transform:u=[]}=t,d=[L2,Vr,rC,P2,R6,k6,D6,k2,ar,I2,...c.map(o),...u.map(o),...l.map(o),R2];let h=[],p=t;for(const v of d)[h,p]=yield v(h,p,n);return[h,p]})}function iC(t){const{type:e,value:n}=t;return e==="field"&&typeof n=="string"?n:null}var Co=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},Ho=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function wc(t,e,n){var r;return Co(this,void 0,void 0,function*(){const{library:o}=n,[c]=Kr("composition",o),[l]=Kr("interaction",o),u=new Set(Object.keys(o).map(rt=>{var lt;return(lt=/mark\.(.*)/.exec(rt))===null||lt===void 0?void 0:lt[1]}).filter(Ur)),d=new Set(Object.keys(o).map(rt=>{var lt;return(lt=/component\.(.*)/.exec(rt))===null||lt===void 0?void 0:lt[1]}).filter(Ur)),h=rt=>{const{type:lt}=rt;if(typeof lt=="function"){const{props:pt={}}=lt,{composite:bt=!0}=pt;if(bt)return"mark"}return typeof lt!="string"?lt:u.has(lt)||d.has(lt)?"mark":lt},p=rt=>h(rt)==="mark",v=rt=>h(rt)==="standardView",m=rt=>{const{type:lt}=rt;return typeof lt!="string"?!1:!!d.has(lt)},b=rt=>{if(v(rt))return[rt];const lt=h(rt);return c({type:lt,static:m(rt)})(rt)},_=[],S=new Map,E=new Map,w=[t],C=[];for(;w.length;){const rt=w.shift();if(v(rt)){const lt=E.get(rt),[pt,bt]=lt?rv(lt,rt,o):yield ev(rt,n);S.set(pt,rt),_.push(pt);const Ht=bt.flatMap(b).map(Rt=>lh(Rt,o));if(w.push(...Ht),Ht.every(v)){const Rt=yield Promise.all(Ht.map(jt=>oC(jt,n)));l2(Rt);for(let jt=0;jt<Ht.length;jt++){const oe=Ht[jt],Se=Rt[jt];E.set(oe,Se)}}}else{const lt=p(rt)?rt:yield zh(rt,n),pt=b(lt);Array.isArray(pt)?w.push(...pt):typeof pt=="function"&&C.push(pt())}}n.emitter.emit(Cr.BEFORE_PAINT);const M=new Map,L=new Map,R=[];e.selectAll(Ja(kt)).data(_,rt=>rt.key).join(rt=>rt.append("g").attr("className",kt).attr("id",lt=>lt.key).call(Bh).each(function(lt,pt,bt){iv(lt,Gn(bt),R,n),M.set(lt,bt)}),rt=>rt.call(Bh).each(function(lt,pt,bt){iv(lt,Gn(bt),R,n),L.set(lt,bt)}),rt=>rt.each(function(lt,pt,bt){const Ht=bt.nameInteraction.values();for(const Rt of Ht)Rt.destroy()}).remove());const j=(rt,lt,pt)=>Array.from(rt.entries()).map(([bt,Ht])=>{const Rt=pt||new Map,jt=(xe,Pe=Ke=>Ke)=>Rt.set(xe,Pe),oe=S.get(bt),Se=N2(Gn(Ht),oe,n);return{view:bt,container:Ht,options:oe,setState:jt,update:(xe,Pe)=>Co(this,void 0,void 0,function*(){const Ze=r0(Array.from(Rt.values()))(oe);return yield Se(Ze,xe,()=>{(0,Wi.Z)(Pe)&&lt(rt,Pe,Rt)})})}}),z=(rt=L,lt,pt)=>{var bt;const Ht=j(rt,z,pt);for(const Rt of Ht){const{options:jt,container:oe}=Rt,Se=oe.nameInteraction;let xe=Tc(jt);lt&&(xe=xe.filter(Pe=>lt.includes(Pe[0])));for(const Pe of xe){const[Ke,Ze]=Pe,en=Se.get(Ke);if(en&&((bt=en.destroy)===null||bt===void 0||bt.call(en)),Ze){const We=j2(Rt.view,Ke,Ze,l)(Rt,Ht,n.emitter);Se.set(Ke,{destroy:We})}}}},H=j(M,z);for(const rt of H){const{options:lt}=rt,pt=new Map;rt.container.nameInteraction=pt;for(const bt of Tc(lt)){const[Ht,Rt]=bt;if(Rt){const oe=j2(rt.view,Ht,Rt,l)(rt,H,n.emitter);pt.set(Ht,{destroy:oe})}}}z();const{width:$,height:dt}=t,gt=[];for(const rt of C){const lt=new Promise(pt=>Co(this,void 0,void 0,function*(){for(const bt of rt){const Ht=Object.assign({width:$,height:dt},bt);yield wc(Ht,e,n)}pt()}));gt.push(lt)}n.views=_,(r=n.animations)===null||r===void 0||r.forEach(rt=>rt==null?void 0:rt.cancel()),n.animations=R,n.emitter.emit(Cr.AFTER_PAINT);const It=R.filter(Ur).map(lC).map(rt=>rt.finished);return Promise.all([...It,...gt])})}function Bh(t){t.style("transform",e=>`translate(${e.layout.x}, ${e.layout.y})`)}function F2(t){const[,e]=Kr("interaction",t);return n=>{const[r,o]=n;try{return[r,e(r)]}catch(c){return[r,o.type]}}}function N2(t,e,n){const{library:r}=n,o=F2(r),c=d=>d[1]&&d[1].props&&d[1].props.reapplyWhenUpdate,u=Tc(e).map(o).filter(c).map(d=>d[0]);return(d,h,p)=>Co(this,void 0,void 0,function*(){const v=[],[m,b]=yield ev(d,n);iv(m,t,v,n);for(const _ of u.filter(S=>S!==h))B2(_,t,d,m,n);for(const _ of b)wc(_,t,n);return p(),{options:d,view:m}})}function B2(t,e,n,r,o){var c;const{library:l}=o,[u]=Kr("interaction",l),h=e.node().nameInteraction,p=Tc(n).find(([S])=>S===t),v=h.get(t);if(!v||((c=v.destroy)===null||c===void 0||c.call(v),!p[1]))return;const m=j2(r,t,p[1],u),b={options:n,view:r,container:e.node(),update:S=>Promise.resolve(S)},_=m(b,[],o.emitter);h.set(t,{destroy:_})}function ev(t,e){return Co(this,void 0,void 0,function*(){const{library:n}=e,r=yield kr(t,e),o=nv(r);t.interaction=o.interaction,t.coordinate=o.coordinate,t.marks=[...o.marks,...o.components];const c=lh(o,n),l=yield oC(c,e);return rv(l,c,n)})}function nv(t){const{coordinate:e={},interaction:n={},style:r={},marks:o}=t,c=Ho(t,["coordinate","interaction","style","marks"]),l=o.map(m=>m.coordinate||{}),u=o.map(m=>m.interaction||{}),d=o.map(m=>m.viewStyle||{}),h=[...l,e].reduceRight((m,b)=>an(m,b),{}),p=[n,...u].reduce((m,b)=>an(m,b),{}),v=[...d,r].reduce((m,b)=>an(m,b),{});return Object.assign(Object.assign({},c),{marks:o,coordinate:h,interaction:p,style:v})}function kr(t,e){return Co(this,void 0,void 0,function*(){const{library:n}=e,[r,o]=Kr("mark",n),c=new Set(Object.keys(n).map(b=>{var _;return(_=/component\.(.*)/.exec(b))===null||_===void 0?void 0:_[1]}).filter(Ur)),{marks:l}=t,u=[],d=[],h=[...l],{width:p,height:v}=XT(t),m={options:t,width:p,height:v};for(;h.length;){const[b]=h.splice(0,1),_=yield zh(b,e),{type:S=Gc("G2Mark type is required."),key:E}=_;if(c.has(S))d.push(_);else{const{props:w={}}=o(S),{composite:C=!0}=w;if(!C)u.push(_);else{const{data:M}=_,L=Object.assign(Object.assign({},_),{data:M&&(Array.isArray(M)?M:M.value)}),R=yield r(L,m),j=Array.isArray(R)?R:[R];h.unshift(...j.map((z,H)=>Object.assign(Object.assign({},z),{key:`${E}-${H}`})))}}}return Object.assign(Object.assign({},t),{marks:u,components:d})})}function oC(t,e){return Co(this,void 0,void 0,function*(){const{library:n}=e,[r]=Kr("theme",n),[,o]=Kr("mark",n),{theme:c,marks:l,coordinates:u=[]}=t,d=r(fC(c)),h=new Map;for(const v of l){const{type:m}=v,{props:b={}}=o(m),_=yield Nh(v,b,e);if(_){const[S,E]=_;h.set(S,E)}}const p=Nr(Array.from(h.values()).flatMap(v=>v.channels),({scaleKey:v})=>v);for(const v of p.values()){const m=v.reduce((L,{scale:R})=>an(L,R),{}),{scaleKey:b}=v[0],{values:_}=v[0],S=Array.from(new Set(_.map(L=>L.field).filter(Ur))),E=an({guide:{title:S.length===0?void 0:S},field:S[0]},m),{name:w}=v[0],C=v.flatMap(({values:L})=>L.map(R=>R.value)),M=Object.assign(Object.assign({},a2(w,C,E,u,d,n)),{uid:Symbol("scale"),key:b});v.forEach(L=>L.scale=M)}return h})}function j2(t,e,n,r){const o=t.theme,c=typeof e=="string"?o[e]||{}:{};return r(an(c,Object.assign({type:e},n)))}function rv(t,e,n){var r;const[o]=Kr("mark",n),[c]=Kr("theme",n),[l]=Kr("labelTransform",n),{key:u,frame:d=!1,theme:h,clip:p,style:v={},labelTransform:m=[]}=e,b=c(fC(h)),_=Array.from(t.values()),S=fT(_,e),E=CT(x2(Uh(Array.from(S),_,t),e,n)),w=YT(E,e,b,n),C=l5(w,e,n),M=d?an({mainLineWidth:1,mainStroke:"#000"},v):v;KT(LT(E),C,w),$T(E);const L=new Map(Array.from(t.values()).flatMap($=>{const{channels:dt}=$;return dt.map(({scale:gt})=>[gt.uid,c2(gt,n)])}));uT(t,L);const R={};for(const $ of E){const{scales:dt=[]}=$,gt=[];for(const It of dt){const{name:rt,uid:lt}=It,pt=(r=L.get(lt))!==null&&r!==void 0?r:c2(It,n);gt.push(pt),rt==="y"&&pt.update(Object.assign(Object.assign({},pt.getOptions()),{xScale:R.x})),s2(R,{[rt]:pt})}$.scaleInstances=gt}const j=[],z=new Map;for(const[$,dt]of t.entries()){const{children:gt,dataDomain:It,modifier:rt,key:lt,data:pt}=$;z.set(lt,pt);const{index:bt,channels:Ht,tooltip:Rt}=dt,jt=Object.fromEntries(Ht.map(({name:Sn,scale:Pn})=>[Sn,Pn])),oe=ya(jt,({uid:Sn})=>L.get(Sn));s2(R,oe);const Se=lT(Ht,oe),xe=o($),[Pe,Ke,Ze]=z2(xe(bt,oe,Se,C)),en=It||Pe.length,rn=rt?rt(Ke,en,w):[],We=Sn=>{var Pn,Nn;return(Nn=(Pn=Rt.title)===null||Pn===void 0?void 0:Pn[Sn])===null||Nn===void 0?void 0:Nn.value},dn=Sn=>Rt.items.map(Pn=>Pn[Sn]),yn=Pe.map((Sn,Pn)=>{const Nn=Object.assign({points:Ke[Pn],transform:rn[Pn],index:Sn,markKey:lt,viewKey:u,data:pt[Sn]},Rt&&{title:We(Sn),items:dn(Sn)});for(const[jn,or]of Object.entries(Se))Nn[jn]=or[Sn],Ze&&(Nn[`series${Ua(jn)}`]=Ze[Pn].map(Yn=>or[Yn]));return Ze&&(Nn.seriesIndex=Ze[Pn]),Ze&&Rt&&(Nn.seriesItems=Ze[Pn].map(jn=>dn(jn)),Nn.seriesTitle=Ze[Pn].map(jn=>We(jn))),Nn});dt.data=yn,dt.index=Pe;const wn=gt==null?void 0:gt(yn,oe,w);j.push(...wn||[])}return[{layout:w,theme:b,coordinate:C,markState:t,key:u,clip:p,scale:R,style:M,components:E,data:z,labelTransform:r0(m.map(l))},j]}function iv(t,e,n,r){return Co(this,void 0,void 0,function*(){const{library:o}=r,{components:c,theme:l,layout:u,markState:d,coordinate:h,key:p,style:v,clip:m,scale:b}=t,{x:_,y:S,width:E,height:w}=u,C=Ho(u,["x","y","width","height"]),M=["view","plot","main","content"],L=M.map((Rt,jt)=>jt),R=["a","margin","padding","inset"],j=M.map(Rt=>Yy(Object.assign({},l.view,v),Rt)),z=R.map(Rt=>xn(C,Rt)),H=Rt=>Rt.style("x",jt=>rt[jt].x).style("y",jt=>rt[jt].y).style("width",jt=>rt[jt].width).style("height",jt=>rt[jt].height).each(function(jt,oe,Se){j6(Gn(Se),j[jt])});let $=0,dt=0,gt=E,It=w;const rt=L.map(Rt=>{const jt=z[Rt],{left:oe=0,top:Se=0,bottom:xe=0,right:Pe=0}=jt;return $+=oe,dt+=Se,gt-=oe+Pe,It-=Se+xe,{x:$,y:dt,width:gt,height:It}});e.selectAll(Ja(ae)).data(L.filter(Rt=>Ur(j[Rt])),Rt=>M[Rt]).join(Rt=>Rt.append("rect").attr("className",ae).style("zIndex",-2).call(H),Rt=>Rt.call(H),Rt=>Rt.remove());const lt=cC(d),pt=lt?{duration:lt[1]}:!1;for(const[,Rt]of Yp(c,jt=>`${jt.type}-${jt.position}`))Rt.forEach((jt,oe)=>jt.index=oe);const bt=e.selectAll(Ja(ut)).data(c,Rt=>`${Rt.type}-${Rt.position}-${Rt.index}`).join(Rt=>Rt.append("g").style("zIndex",({zIndex:jt})=>jt||-1).attr("className",ut).append(jt=>S2(an({animate:pt,scale:b},jt),h,l,o,d)),Rt=>Rt.transition(function(jt,oe,Se){const{preserve:xe=!1}=jt;if(xe)return;const Pe=S2(an({animate:pt,scale:b},jt),h,l,o,d),{attributes:Ke}=Pe,[Ze]=Se.childNodes;return Ze.update(Ke,!1)})).transitions();n.push(...bt.flat().filter(Ur));const Ht=e.selectAll(Ja(le)).data([u],()=>p).join(Rt=>Rt.append("rect").style("zIndex",0).style("fill","transparent").attr("className",le).call(dC).call(W2,Array.from(d.keys())).call(G2,m),Rt=>Rt.call(W2,Array.from(d.keys())).call(jt=>lt?hC(jt,lt):dC(jt)).call(G2,m)).transitions();n.push(...Ht.flat());for(const[Rt,jt]of d.entries()){const{data:oe}=jt,{key:Se,class:xe,type:Pe}=Rt,Ke=e.select(`#${Se}`),Ze=wl(Rt,jt,t,r),en=pf(Rt,jt,t,o),rn=uC(Rt,jt,t,o),We=V2(Rt,jt,t,o),dn=B6(e,Ke,xe,"element"),yn=Ke.selectAll(Ja(K)).selectFacetAll(dn).data(oe,wn=>wn.key,wn=>wn.groupKey).join(wn=>wn.append(Ze).attr("className",K).attr("markType",Pe).transition(function(Sn,Pn,Nn){return en(Sn,[Nn])}),wn=>wn.call(Sn=>{const Pn=Sn.parent(),Nn=$y(jn=>{const[or,Yn]=jn.getBounds().min;return[or,Yn]});Sn.transition(function(jn,or,Yn){Z2(Yn,Pn,Nn);const Xn=Ze(jn,or),lr=rn(jn,[Yn],[Xn]);return lr!=null&&lr.length||(Yn.nodeName===Xn.nodeName&&Xn.nodeName!=="g"?o0(Yn,Xn):(Yn.parentNode.replaceChild(Xn,Yn),Xn.className=K,Xn.markType=Pe,Xn.__data__=Yn.__data__)),lr}).attr("markType",Pe).attr("className",K)}),wn=>wn.each(function(Sn,Pn,Nn){Nn.__removed__=!0}).transition(function(Sn,Pn,Nn){return We(Sn,[Nn])}).remove(),wn=>wn.append(Ze).attr("className",K).attr("markType",Pe).transition(function(Sn,Pn,Nn){const{__fromElements__:jn}=Nn,or=rn(Sn,jn,[Nn]);return new li(jn,null,Nn.parentNode).transition(or).remove(),or}),wn=>wn.transition(function(Sn,Pn,Nn){const or=new li([],Nn.__toData__,Nn.parentNode).append(Ze).attr("className",K).attr("markType",Pe).nodes();return rn(Sn,[Nn],or)}).remove()).transitions();n.push(...yn.flat())}jh(t,e,n,o,r)})}function jh(t,e,n,r,o){const[c]=Kr("labelTransform",r),{markState:l,labelTransform:u}=t,d=e.select(Ja(vt)).node(),h=new Map,p=new Map,v=Array.from(l.entries()).flatMap(([w,C])=>{const{labels:M=[],key:L}=w,R=ov(w,C,t,r,o),j=e.select(`#${L}`).selectAll(Ja(K)).nodes().filter(z=>!z.__removed__);return M.flatMap((z,H)=>{const{transform:$=[]}=z,dt=Ho(z,["transform"]);return j.flatMap(gt=>{const It=Ac(dt,H,gt);return It.forEach(rt=>{h.set(rt,lt=>R(Object.assign(Object.assign({},lt),{element:gt}))),p.set(rt,z)}),It})})}),m=Gn(d).selectAll(Ja(Tt)).data(v,w=>w.key).join(w=>w.append(C=>h.get(C)(C)).attr("className",Tt),w=>w.each(function(C,M,L){const j=h.get(C)(C);o0(L,j)}),w=>w.remove()).nodes(),b=Nr(m,w=>p.get(w.__data__)),{coordinate:_,layout:S}=t,E={canvas:o.canvas,coordinate:_,layout:S};for(const[w,C]of b){const{transform:M=[]}=w;r0(M.map(c))(C,E)}u&&u(m,E)}function Ac(t,e,n){const{seriesIndex:r,seriesKey:o,points:c,key:l,index:u}=n.__data__,d=aC(n);if(!r)return[Object.assign(Object.assign({},t),{key:`${l}-${e}`,bounds:d,index:u,points:c,dependentElement:n})];const h=U2(t),p=r.map((v,m)=>Object.assign(Object.assign({},t),{key:`${o[m]}-${e}`,bounds:[c[m]],index:v,points:c,dependentElement:n}));return h?h(p):p}function z2([t,e,n]){if(n)return[t,e,n];const r=[],o=[];for(let c=0;c<t.length;c++){const l=t[c],u=e[c];u.every(([d,h])=>Ur(d)&&Ur(h))&&(r.push(l),o.push(u))}return[r,o]}function U2(t){const{selector:e}=t;if(!e)return null;if(typeof e=="function")return e;if(e==="first")return n=>[n[0]];if(e==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${e}`)}function aC(t){const e=t.cloneNode(!0),n=t.getAnimations();e.style.visibility="hidden",n.forEach(l=>{const u=l.effect.getKeyframes();e.attr(u[u.length-1])}),t.parentNode.appendChild(e);const r=e.getLocalBounds();e.destroy();const{min:o,max:c}=r;return[o,c]}function ov(t,e,n,r,o){const[c]=Kr("shape",r),{data:l,encode:u}=t,{data:d,defaultLabelShape:h}=e,p=d.map(S=>S.points),v=ya(u,S=>S.value),{theme:m,coordinate:b}=n,_=Object.assign(Object.assign({},o),{document:v_(o),theme:m,coordinate:b});return S=>{const{index:E,points:w}=S,C=l[E],{formatter:M=jt=>`${jt}`,transform:L,style:R,render:j,selector:z,element:H}=S,$=Ho(S,["formatter","transform","style","render","selector","element"]),dt=ya(Object.assign(Object.assign({},$),R),jt=>sC(jt,C,E,l,{channel:v,element:H})),{shape:gt=h,text:It}=dt,rt=Ho(dt,["shape","text"]),lt=typeof M=="string"?Za(M):M,pt=Object.assign(Object.assign({},rt),{text:lt(It,C,E,l),datum:C}),bt=Object.assign({type:`label.${gt}`,render:j},rt),Ht=c(bt,_),Rt=H2(m,"label",gt,"label");return Ht(w,pt,Rt,p)}}function sC(t,e,n,r,o){return typeof t=="function"?t(e,n,r,o):typeof t!="string"?t:$c(e)&&e[t]!==void 0?e[t]:t}function cC(t){let e=-1/0,n=1/0;for(const[r,o]of t){const{animate:c={}}=r,{data:l}=o,{enter:u={},update:d={},exit:h={}}=c,{type:p,duration:v=300,delay:m=0}=d,{type:b,duration:_=300,delay:S=0}=u,{type:E,duration:w=300,delay:C=0}=h;for(const M of l){const{updateType:L=p,updateDuration:R=v,updateDelay:j=m,enterType:z=b,enterDuration:H=_,enterDelay:$=S,exitDuration:dt=w,exitDelay:gt=C,exitType:It=E}=M;(L===void 0||L)&&(e=Math.max(e,R+j),n=Math.min(n,j)),(It===void 0||It)&&(e=Math.max(e,dt+gt),n=Math.min(n,gt)),(z===void 0||z)&&(e=Math.max(e,H+$),n=Math.min(n,$))}}return e===-1/0?null:[n,e-n]}function B6(t,e,n,r){const o=t.node().parentElement;return!o||typeof o.findAll!="function"?[]:o.findAll(c=>c.style.facet!==void 0&&c.style.facet===n&&c!==e.node()).flatMap(c=>c.getElementsByClassName(r))}function Z2(t,e,n){if(!t.__facet__)return;const r=t.parentNode.parentNode,o=e.parentNode,[c,l]=n(r),[u,d]=n(o),h=`translate(${c-u}, ${l-d})`;a0(t,h),e.append(t)}function wl(t,e,n,r){const{library:o}=r,[c]=Kr("shape",o),{data:l,encode:u}=t,{defaultShape:d,data:h,shape:p}=e,v=ya(u,C=>C.value),m=h.map(C=>C.points),{theme:b,coordinate:_}=n,{type:S,style:E={}}=t,w=Object.assign(Object.assign({},r),{document:v_(r),coordinate:_,theme:b});return C=>{const{shape:M=d}=E,{shape:L=M,points:R,seriesIndex:j,index:z}=C,H=Ho(C,["shape","points","seriesIndex","index"]),$=Object.assign(Object.assign({},H),{index:z}),dt=j?j.map(pt=>l[pt]):l[z],gt=j||z,It=ya(E,pt=>sC(pt,dt,gt,l,{channel:v})),rt=p[L]?p[L](It,w):c(Object.assign(Object.assign({},It),{type:pC(t,L)}),w),lt=H2(b,S,L,d);return rt(R,$,lt,m)}}function H2(t,e,n,r){if(typeof e!="string")return;const{color:o}=t,c=t[e]||{},l=c[n]||c[r];return Object.assign({color:o},l)}function av(t,e,n,r,o){var c,l;const[,u]=Kr("shape",o),[d]=Kr("animation",o),{defaultShape:h,shape:p}=n,{theme:v,coordinate:m}=r,_=`default${Ua(t)}Animation`,{[_]:S}=((c=p[h])===null||c===void 0?void 0:c.props)||u(pC(e,h)).props,{[t]:E={}}=v,w=((l=e.animate)===null||l===void 0?void 0:l[t])||{},C={coordinate:m};return(M,L,R)=>{const{[`${t}Type`]:j,[`${t}Delay`]:z,[`${t}Duration`]:H,[`${t}Easing`]:$}=M,dt=Object.assign({type:j||S},w);if(!dt.type)return null;const rt=d(dt,C)(L,R,an(E,{delay:z,duration:H,easing:$}));let lt=[];return Array.isArray(rt)?lt=rt:lt=[rt],lt.filter(Boolean)}}function pf(t,e,n,r){return av("enter",t,e,n,r)}function lC(t){return t.finished.then(()=>{t.cancel()}),t}function uC(t,e,n,r){return av("update",t,e,n,r)}function V2(t,e,n,r){return av("exit",t,e,n,r)}function fC(t={}){if(typeof t=="string")return{type:t};const{type:e="light"}=t,n=Ho(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}function Tc(t){const e={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=t;return Object.entries(an(e,n)).reverse()}function zh(t,e){return Co(this,void 0,void 0,function*(){const{data:n}=t,r=Ho(t,["data"]);if(n==null)return t;const[,{data:o}]=yield Vr([],{data:n},e);return Object.assign({data:o},r)})}function dC(t){t.style("transform",e=>`translate(${e.paddingLeft+e.marginLeft}, ${e.paddingTop+e.marginTop})`).style("width",e=>e.innerWidth).style("height",e=>e.innerHeight)}function hC(t,e){const[n,r]=e;t.transition(function(o,c,l){const{transform:u,width:d,height:h}=l.style,{paddingLeft:p,paddingTop:v,innerWidth:m,innerHeight:b,marginLeft:_,marginTop:S}=o,E=[{transform:u,width:d,height:h},{transform:`translate(${p+_}, ${v+S})`,width:m,height:b}];return l.animate(E,{delay:n,duration:r,fill:"both"})})}function pC(t,e){const{type:n}=t;return typeof e=="string"?`${n}.${e}`:e}function W2(t,e){const n=c=>c.class!==void 0?`${c.class}`:"";t.nodes().length===0||(t.selectAll(Ja(Ce)).data(e,c=>c.key).join(c=>c.append("g").attr("className",Ce).attr("id",l=>l.key).style("facet",n).style("fill","transparent").style("zIndex",l=>{var u;return(u=l.zIndex)!==null&&u!==void 0?u:0}),c=>c.style("facet",n).style("fill","transparent").style("zIndex",l=>{var u;return(u=l.zIndex)!==null&&u!==void 0?u:0}),c=>c.remove()),t.select(Ja(vt)).node())||t.append("g").attr("className",vt).style("zIndex",0)}function Ja(...t){return t.map(e=>`.${e}`).join("")}function G2(t,e){t.node()&&t.style("clipPath",n=>{if(!e)return null;const{paddingTop:r,paddingLeft:o,marginLeft:c,marginTop:l,innerWidth:u,innerHeight:d}=n;return new I.UL({style:{x:o+c,y:r+l,width:u,height:d}})})}function Uh(t,e,n){var r;for(const[h]of n.entries())if(h.type==="cell")return t.filter(p=>p.name!=="shape");if(e.length!==1||t.some(h=>h.name==="shape"))return t;const{defaultShape:o}=e[0];if(!["point","line","rect","hollow"].includes(o))return t;const l={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},d={field:((r=t.find(h=>h.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[l[o]]};return[...t,d]}function j6(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function z6(...t){return e=>t.reduce((n,r)=>r(n),e)}function gC(t){const{style:e,scale:n,type:r}=t,o={},c=pr(e,"columnWidthRatio");return c&&r==="interval"&&(o.x=Object.assign(Object.assign({},n==null?void 0:n.x),{padding:1-c})),Object.assign(Object.assign({},t),{scale:Object.assign(Object.assign({},n),o)})}function $2(t){const e=vC(t);return e.children&&Array.isArray(e.children)&&(e.children=e.children.map(n=>$2(n))),e}function vC(t){return z6(gC)(t)}function Y2(t){const e=an({},t),n=new Map([[e,null]]),r=new Map([[null,-1]]),o=[e];for(;o.length;){const c=o.shift();if(c.key===void 0){const u=n.get(c),d=r.get(c),h=u===null?"0":`${u.key}-${d}`;c.key=h}const{children:l=[]}=c;if(Array.isArray(l))for(let u=0;u<l.length;u++){const d=an({},l[u]);l[u]=d,n.set(d,c),r.set(d,u),o.push(d)}}return e}function mC(t,e){const n=new Iy;return n.registerPlugin(new ky),new I.Xz({width:t,height:e,container:document.createElement("div"),renderer:n})}function yC(t,e={},n=()=>{},r=o=>{throw o}){const o=cd(t),{width:c=640,height:l=480,depth:u=0}=o,d=$2(o),h=Y2(d),{canvas:p=mC(c,l),emitter:v=new pe,library:m}=e;e.canvas=p,e.emitter=v;const{width:b,height:_}=p.getConfig();(b!==c||_!==l)&&p.resize(c,l),v.emit(Cr.BEFORE_RENDER);const S=Gn(p.document.documentElement);return p.ready.then(()=>wc(Object.assign(Object.assign({},h),{width:c,height:l,depth:u}),S,e)).then(()=>{if(u){const[E,w]=p.document.documentElement.getPosition();p.document.documentElement.setPosition(E,w,-u/2)}p.requestAnimationFrame(()=>{p.requestAnimationFrame(()=>{v.emit(Cr.AFTER_RENDER),n==null||n()})})}).catch(E=>{r==null||r(E)}),yo(p.getConfig().container)}function U6(t,e={},n=()=>{},r=o=>{throw o}){var o;const{width:c=640,height:l=480}=t,u=Y2(t),{group:d=new Group,emitter:h=new EventEmitter,library:p}=e;d!=null&&d.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const v=select(d);return e.group=d,e.emitter=h,e.canvas=e.canvas||((o=d==null?void 0:d.ownerDocument)===null||o===void 0?void 0:o.defaultView),h.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},u),{width:c,height:l}),v,e).then(()=>{var m;(m=e.canvas)===null||m===void 0||m.requestAnimationFrame(()=>{h.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(m=>{r==null||r(m)}),d}function sv(t,e={},n=!1,r=!0){const{canvas:o,emitter:c}=e;o&&(X2(o),n?o.destroy():o.destroyChildren()),r&&c.off()}function X2(t){const e=t.getRoot().querySelectorAll(`.${kt}`);e==null||e.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(o=>{o==null||o.destroy()})})}function yo(t){return typeof t=="string"?document.getElementById(t):t}function gf(t,e){let n,r=-1,o=-1;if(e===void 0)for(const c of t)++o,c!=null&&(n>c||n===void 0&&c>=c)&&(n=c,r=o);else for(let c of t)(c=e(c,++o,t))!=null&&(n>c||n===void 0&&c>=c)&&(n=c,r=o);return r}function vf(t,e){let n=0,r=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(++n,r+=o);else{let o=-1;for(let c of t)(c=e(c,++o,t))!=null&&(c=+c)>=c&&(++n,r+=c)}if(n)return r/n}var Cc=function(t,e,n){var r,o,c,l,u=0;n||(n={});var d=function(){u=n.leading===!1?0:Date.now(),r=null,l=t.apply(o,c),r||(o=c=null)},h=function(){var p=Date.now();!u&&n.leading===!1&&(u=p);var v=e-(p-u);return o=this,c=arguments,v<=0||v>e?(r&&(clearTimeout(r),r=null),u=p,l=t.apply(o,c),r||(o=c=null)):!r&&n.trailing!==!1&&(r=setTimeout(d,v)),l};return h.cancel=function(){clearTimeout(r),u=0,r=o=c=null},h};function q2(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}function bC(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):e[r]===void 0?"":e[r]})}var _C=bC,K2=function(t,e){if(e==null){t.innerHTML="";return}t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,(0,X.ev)([],(0,X.CR)(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach(function(n){return t.appendChild(n)}):t.appendChild(e))};function Zh(t){return t===void 0&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var Q2={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function xC(t){var e;t===void 0&&(t="");var n=Zh(t);return e={},e[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=(0,X.pi)({flex:1},Q2),e[".".concat(n.VALUE)]=(0,X.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},Q2),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var SC=function(t){(0,X.ZT)(e,t);function e(n){var r=this,o,c,l=(c=(o=n.style)===null||o===void 0?void 0:o.template)===null||c===void 0?void 0:c.prefixCls,u=Zh(l);return r=t.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(u.CONTAINER,'"></div>'),title:'<div class="'.concat(u.TITLE,'"></div>'),item:'<li class="'.concat(u.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(u.NAME,`">
          <span class="`).concat(u.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(u.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(u.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:xC(l)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,o=n.template;return r.map(function(c,l){var u=c.name,d=u===void 0?"":u,h=c.color,p=h===void 0?"black":h,v=c.index,m=(0,X._T)(c,["name","color","index"]),b=(0,X.pi)({name:d,color:p,index:v!=null?v:l},m);return q2(_C(o.item,b))})},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(n,r){var o=this;if(n!==void 0&&r!==void 0){var c=this.element.style.visibility==="hidden",l=function(){o.attributes.x=n!=null?n:o.attributes.x,o.attributes.y=r!=null?r:o.attributes.y,o.updatePosition()};c?this.closeTransition(l):l()}this.element.style.visibility="visible"},e.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var o=this.attributes.enterable;o&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var n=this.attributes.template;this.element=q2(n.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:K2(this.element,n))}},e.prototype.renderHTMLTooltipElement=function(){var n,r,o=this.attributes,c=o.template,l=o.title,u=o.enterable,d=o.style,h=o.content,p=Zh(c.prefixCls),v=this.element;if(this.element.style.pointerEvents=u?"auto":"none",h)this.renderCustomContent();else{l?(v.innerHTML=c.title,v.getElementsByClassName(p.TITLE)[0].innerHTML=l):(r=(n=v.getElementsByClassName(p.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var m=this.HTMLTooltipItemsElements,b=document.createElement("ul");b.className=p.LIST,K2(b,m);var _=this.element.querySelector(".".concat(p.LIST));_?_.replaceWith(b):v.appendChild(b)}w1(v,d)},e.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,o=r.position,c=r.offset,l=n||o,u=l.split("-"),d={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},h=this.elementSize,p=h.width,v=h.height,m=[-p/2,-v/2];return u.forEach(function(b){var _=(0,X.CR)(m,2),S=_[0],E=_[1],w=(0,X.CR)(d[b],2),C=w[0],M=w[1];m=[S+(p/2+c[0])*C,E+(v/2+c[1])*M]}),m},e.prototype.setOffsetPosition=function(n){var r=(0,X.CR)(n,2),o=r[0],c=r[1],l=this.attributes,u=l.x,d=u===void 0?0:u,h=l.y,p=h===void 0?0:h,v=l.container,m=v.x,b=v.y;this.element.style.left="".concat(+d+m+o,"px"),this.element.style.top="".concat(+p+b+c,"px")},e.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,o=Date.now();this.timestamp>0&&o-this.timestamp<r||(this.timestamp=o,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(n){var r=(0,X.CR)(n,2),o=r[0],c=r[1],l=this.attributes,u=l.x,d=l.y,h=l.bounding,p=l.position;if(!h)return[o,c];var v=this.element,m=v.offsetWidth,b=v.offsetHeight,_=(0,X.CR)([+u+o,+d+c],2),S=_[0],E=_[1],w={left:"right",right:"left",top:"bottom",bottom:"top"},C=h.x,M=h.y,L=h.width,R=h.height,j={left:S<C,right:S+m>C+L,top:E<M,bottom:E+b>M+R},z=[];p.split("-").forEach(function($){j[$]?z.push(w[$]):z.push($)});var H=z.join("-");return this.getRelativeOffsetFromCursor(H)},e.prototype.isCursorEntered=function(n,r){if(this.element){var o=this.element.getBoundingClientRect(),c=o.x,l=o.y,u=o.width,d=o.height;return new Xr(c,l,u,d).isPointIn(n,r)}return!1},e.prototype.closeTransition=function(n){var r=this,o=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=o},10)},e.tag="tooltip",e}(Si),Fs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Hh(t,e){var n;if(e)return typeof e=="string"?document.querySelector(e):e;const r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView;return r?r.getContextService().getDomElement().parentElement:void 0}function OC(t){const e=t.getRenderBounds(),{min:[n,r],max:[o,c]}=e;return{x:n,y:r,width:o-n,height:c-r}}function EC(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function wC(t,e,n,r,o,c,l,u={},d=[10,10]){const h={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},p=new SC({className:"tooltip",style:{x:e,y:n,container:l,data:[],bounding:c,position:r,enterable:o,title:"",offset:d,template:{prefixCls:"g2-"},style:an(h,u)}});return t.appendChild(p.HTMLTooltipElement),p}function J2({root:t,data:e,x:n,y:r,render:o,event:c,single:l,position:u="right-bottom",enterable:d=!1,css:h,mount:p,bounding:v,offset:m}){const b=Hh(t,p),_=Hh(t),S=l?_:t,E=v||OC(t),w=EC(_,b),{tooltipElement:C=wC(b,n,r,u,d,E,w,h,m)}=S,{items:M,title:L=""}=e;C.update(Object.assign({x:n,y:r,data:M,title:L,position:u,enterable:d,container:w},o!==void 0&&{content:o(c,{items:M,title:L})})),S.tooltipElement=C}function Ns({root:t,single:e,emitter:n,nativeEvent:r=!0,event:o=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const c=Hh(t),l=e?c:t,{tooltipElement:u}=l;u&&u.hide(o==null?void 0:o.clientX,o==null?void 0:o.clientY),lv(t),nx(t),rx(t)}function cv({root:t,single:e}){const n=Hh(t),r=e?n:t;if(!r)return;const{tooltipElement:o}=r;o&&(o.destroy(),r.tooltipElement=void 0),lv(t),nx(t),rx(t)}function AC(t){const{value:e}=t;return Object.assign(Object.assign({},t),{value:e===void 0?"undefined":e})}function tx(t){const{__data__:e}=t,{title:n,items:r=[]}=e,o=r.filter(Ur).map(c=>{var{color:l=ex(t)}=c,u=Fs(c,["color"]);return Object.assign(Object.assign({},u),{color:l})}).map(AC);return Object.assign(Object.assign({},n&&{title:n}),{items:o})}function ex(t){const e=t.getAttribute("fill"),n=t.getAttribute("stroke"),{__data__:r}=t,{color:o=e&&e!=="transparent"?e:n}=r;return o}function Vh(t,e=n=>n){const n=new Map(t.map(r=>[e(r),r]));return Array.from(n.values())}function TC(t,e,n,r=t.map(c=>c.__data__),o={}){const c=d=>d instanceof Date?+d:d,l=Vh(r.map(d=>d.title),c).filter(Ur),u=r.flatMap((d,h)=>{const p=t[h],{items:v=[],title:m}=d,b=v.filter(Ur),_=n!==void 0?n:v.length<=1;return b.map(S=>{var{color:E=ex(p)||o.color,name:w}=S,C=Fs(S,["color","name"]);const M=n0(e,d),L=_&&!(Jg in C)?M||w:w||M;return Object.assign(Object.assign({},C),{color:E,name:L||m})})}).map(AC);return Object.assign(Object.assign({},l.length>0&&{title:l.join(",")}),{items:Vh(u,d=>`(${c(d.name)}, ${c(d.value)}, ${c(d.color)})`)})}function CC(t,e,n,r){var{plotWidth:o,plotHeight:c,mainWidth:l,mainHeight:u,startX:d,startY:h,transposed:p,polar:v,insetLeft:m,insetTop:b}=r,_=Fs(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const S=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},_),E=(j,z,H)=>{const $=new I.Cd({style:Object.assign({cx:j,cy:z,r:H},S)});return t.appendChild($),$},w=(j,z,H,$)=>{const dt=new I.x1({style:Object.assign({x1:j,x2:z,y1:H,y2:$},S)});return t.appendChild(dt),dt},M=((j,z)=>{if(z.length===1)return z[0];const H=z.map(dt=>ni(dt,j)),$=gf(H,dt=>dt);return z[$]})(n,e),L=()=>p?[d+M[0],d+M[0],h,h+c]:[d,d+o,M[1]+h,M[1]+h],R=()=>{const j=d+m+l/2,z=h+b+u/2,H=ni([j,z],M);return[j,z,H]};if(v){const[j,z,H]=R(),$=t.ruleX||E(j,z,H);$.style.cx=j,$.style.cy=z,$.style.r=H,t.ruleX=$}else{const[j,z,H,$]=L(),dt=t.ruleX||w(j,z,H,$);dt.style.x1=j,dt.style.x2=z,dt.style.y1=H,dt.style.y2=$,t.ruleX=dt}}function MC(t,e,n){var{plotWidth:r,plotHeight:o,mainWidth:c,mainHeight:l,startX:u,startY:d,transposed:h,polar:p,insetLeft:v,insetTop:m}=n,b=Fs(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const _=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},b),S=e.map($=>$[1]),E=e.map($=>$[0]),w=vf(S),C=vf(E),M=()=>{if(p){const $=Math.min(c,l)/2,dt=u+v+c/2,gt=d+m+l/2,It=no(si([C,w],[dt,gt])),rt=dt+$*Math.cos(It),lt=gt+$*Math.sin(It);return[dt,rt,gt,lt]}return h?[u,u+r,w+d,w+d]:[C+u,C+u,d,d+o]},[L,R,j,z]=M(),H=()=>{const $=new I.x1({style:Object.assign({x1:L,x2:R,y1:j,y2:z},_)});return t.appendChild($),$};if(E.length>0){const $=t.ruleY||H();$.style.x1=L,$.style.x2=R,$.style.y1=j,$.style.y2=z,t.ruleY=$}}function lv(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function nx(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function LC(t,{data:e,style:n,theme:r}){t.markers&&t.markers.forEach(l=>l.remove());const{type:o=""}=n,c=e.filter(l=>{const[{x:u,y:d}]=l;return Ur(u)&&Ur(d)}).map(l=>{const[{color:u,element:d},h]=l,p=u||d.style.fill||d.style.stroke||r.color,v=o==="hollow"?"transparent":p,m=o==="hollow"?p:"#fff";return new I.Cd({className:"g2-tooltip-marker",style:Object.assign({cx:h[0],cy:h[1],fill:v,r:4,stroke:m,lineWidth:2,pointerEvents:"none"},n)})});for(const l of c)t.appendChild(l);t.markers=c}function rx(t){t.markers&&(t.markers.forEach(e=>e.remove()),t.markers=[])}function ix(t,e){return Array.from(t.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[e]})}function La(t,e){return t===void 0?e:t}function ox(t){const{title:e,items:n}=t;return n.length===0&&e===void 0}function Z6(t){return Array.from(t.values()).some(e=>{var n;return((n=e.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&e.tooltip})}function ax({root:t,event:e,elements:n,coordinate:r,scale:o,shared:c}){var l,u;const d=E=>E.markType==="interval",h=n.every(d)&&!Ar(r),p=o.x,v=o.series,m=(u=(l=p==null?void 0:p.getBandWidth)===null||l===void 0?void 0:l.call(p))!==null&&u!==void 0?u:0,b=v?E=>{const w=Math.round(1/v.valueBandWidth);return E.__data__.x+E.__data__.series*m+m/(w*2)}:E=>E.__data__.x+m/2;h&&n.sort((E,w)=>b(E)-b(w));const _=E=>{const{target:w}=E;return ah(w,C=>C.classList?C.classList.includes("element"):!1)};return(h?E=>{const w=Aa(t,E);if(!w)return;const[C]=r.invert(w),M=xs(b).center,L=M(n,C),R=n[L];return!c&&n.find(z=>z!==R&&b(z)===b(R))?_(E):R}:_)(e)}function Wh({root:t,event:e,elements:n,coordinate:r,scale:o,startX:c,startY:l}){const u=Zr(r),d=[],h=[];for(const Ht of n){const{__data__:Rt}=Ht,{seriesX:jt,title:oe,items:Se}=Rt;jt?d.push(Ht):(oe||Se)&&h.push(Ht)}const p=Ht=>Ht.markType==="interval",v=h.length&&h.every(p)&&!Ar(r),m=Ht=>Ht.__data__.x,_=!!o.x.getBandWidth&&h.length>0;d.sort((Ht,Rt)=>{const jt=u?0:1,oe=Se=>Se.getBounds().min[jt];return u?oe(Rt)-oe(Ht):oe(Ht)-oe(Rt)});const S=Ht=>{const Rt=u?1:0,{min:jt,max:oe}=Ht.getLocalBounds();return Ea([jt[Rt],oe[Rt]])};v?n.sort((Ht,Rt)=>m(Ht)-m(Rt)):h.sort((Ht,Rt)=>{const[jt,oe]=S(Ht),[Se,xe]=S(Rt),Pe=(jt+oe)/2,Ke=(Se+xe)/2;return u?Ke-Pe:Pe-Ke});const E=new Map(d.map(Ht=>{const{__data__:Rt}=Ht,{seriesX:jt}=Rt,oe=jt.map((xe,Pe)=>Pe),Se=Ea(oe,xe=>jt[+xe]);return[Ht,[Se,jt]]})),{x:w}=o,C=w!=null&&w.getBandWidth?w.getBandWidth()/2:0,M=Ht=>{const[Rt]=r.invert(Ht);return Rt-C},L=(Ht,Rt,jt,oe)=>{const{_x:Se}=Ht,xe=Se!==void 0?w.map(Se):M(Rt),Pe=oe.filter(Ur),[Ke,Ze]=Ea([Pe[0],Pe[Pe.length-1]]),en=Ke===Ze;if(!_&&(xe<Ke||xe>Ze)&&!en)return null;const rn=xs(dn=>oe[+dn]).center,We=rn(jt,xe);return jt[We]},R=v?(Ht,Rt)=>{const jt=xs(m).center,oe=jt(Rt,M(Ht)),Se=Rt[oe];return Nr(Rt,m).get(m(Se))}:(Ht,Rt)=>{const oe=Ht[u?1:0],Se=Rt.filter(Ke=>{const[Ze,en]=S(Ke);return oe>=Ze&&oe<=en});if(!_||Se.length>0)return Se;const xe=xs(Ke=>{const[Ze,en]=S(Ke);return(Ze+en)/2}).center,Pe=xe(Rt,oe);return[Rt[Pe]].filter(Ur)},j=(Ht,Rt)=>{const{__data__:jt}=Ht;return Object.fromEntries(Object.entries(jt).filter(([oe])=>oe.startsWith("series")&&oe!=="series").map(([oe,Se])=>{const xe=Se[Rt];return[td(oe.replace("series","")),xe]}))},z=Aa(t,e);if(!z)return;const H=[z[0]-c,z[1]-l];if(!H)return;const $=R(H,h),dt=[],gt=[];for(const Ht of d){const[Rt,jt]=E.get(Ht),oe=L(e,H,Rt,jt);if(oe!==null){dt.push(Ht);const Se=j(Ht,oe),{x:xe,y:Pe}=Se,Ke=r.map([(xe||0)+C,Pe||0]);gt.push([Object.assign(Object.assign({},Se),{element:Ht}),Ke])}}const It=Array.from(new Set(gt.map(Ht=>Ht[0].x))),rt=It[gf(It,Ht=>Math.abs(Ht-M(H)))],lt=gt.filter(Ht=>Ht[0].x===rt),pt=[...lt.map(Ht=>Ht[0]),...$.map(Ht=>Ht.__data__)];return{selectedElements:[...dt,...$],selectedData:pt,filteredSeriesData:lt,abstractX:M}}function sx(t,e){var{elements:n,sort:r,filter:o,scale:c,coordinate:l,crosshairs:u,crosshairsX:d,crosshairsY:h,render:p,groupName:v,emitter:m,wait:b=50,leading:_=!0,trailing:S=!1,startX:E=0,startY:w=0,body:C=!0,single:M=!0,position:L,enterable:R,mount:j,bounding:z,theme:H,offset:$,disableNative:dt=!1,marker:gt=!0,preserve:It=!1,style:rt={},css:lt={}}=e,pt=Fs(e,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css"]);const bt=n(t),Ht=an(rt,pt),Rt=Ar(l),jt=Zr(l),{innerWidth:oe,innerHeight:Se,width:xe,height:Pe,insetLeft:Ke,insetTop:Ze}=l.getOptions(),en=Cc(jn=>{var or;const Yn=Aa(t,jn);if(!Yn)return;const Xn=Wu(t),lr=Xn.min[0],Ki=Xn.min[1],{selectedElements:ga,selectedData:Ii,filteredSeriesData:uo,abstractX:Qi}=Wh({root:t,event:jn,elements:bt,coordinate:l,scale:c,startX:E,startY:w}),ao=TC(ga,c,v,Ii,H);if(r&&ao.items.sort((ki,Di)=>r(ki)-r(Di)),o&&(ao.items=ao.items.filter(o)),ga.length===0||ox(ao)){rn(jn);return}if(C&&J2({root:t,data:ao,x:Yn[0]+lr,y:Yn[1]+Ki,render:p,event:jn,single:M,position:L,enterable:R,mount:j,bounding:z,css:lt,offset:$}),u||d||h){const ki=xn(Ht,"crosshairs"),Di=Object.assign(Object.assign({},ki),xn(Ht,"crosshairsX")),fi=Object.assign(Object.assign({},ki),xn(Ht,"crosshairsY")),Io=uo.map(Ro=>Ro[1]);d&&CC(t,Io,Yn,Object.assign(Object.assign({},Di),{plotWidth:oe,plotHeight:Se,mainWidth:xe,mainHeight:Pe,insetLeft:Ke,insetTop:Ze,startX:E,startY:w,transposed:jt,polar:Rt})),h&&MC(t,Io,Object.assign(Object.assign({},fi),{plotWidth:oe,plotHeight:Se,mainWidth:xe,mainHeight:Pe,insetLeft:Ke,insetTop:Ze,startX:E,startY:w,transposed:jt,polar:Rt}))}if(gt){const ki=xn(Ht,"marker");LC(t,{data:uo,style:ki,theme:H})}const mi=(or=uo[0])===null||or===void 0?void 0:or[0].x,Ri=mi!=null?mi:Qi(focus);m.emit("tooltip:show",Object.assign(Object.assign({},jn),{nativeEvent:!0,data:Object.assign(Object.assign({},ao),{data:{x:ll(c.x,Ri,!0)}})}))},b,{leading:_,trailing:S}),rn=jn=>{Ns({root:t,single:M,emitter:m,event:jn})},We=()=>{cv({root:t,single:M})},dn=jn=>{var or,{nativeEvent:Yn,data:Xn,offsetX:lr,offsetY:Ki}=jn,ga=Fs(jn,["nativeEvent","data","offsetX","offsetY"]);if(Yn)return;const Ii=(or=Xn==null?void 0:Xn.data)===null||or===void 0?void 0:or.x,Qi=c.x.map(Ii),[ao,mi]=l.map([Qi,.5]),Ri=t.getRenderBounds(),ki=Ri.min[0],Di=Ri.min[1];en(Object.assign(Object.assign({},ga),{offsetX:lr!==void 0?lr:ki+ao,offsetY:Ki!==void 0?Ki:Di+mi,_x:Ii}))},yn=()=>{Ns({root:t,single:M,emitter:m,nativeEvent:!1})},wn=()=>{Nn(),We()},Sn=()=>{Pn()},Pn=()=>{dt||(t.addEventListener("pointerdown",en),t.addEventListener("pointerenter",en),t.addEventListener("pointermove",en),t.addEventListener("pointerleave",jn=>{Aa(t,jn)||rn(jn)}),t.addEventListener("pointerup",rn))},Nn=()=>{dt||(t.removeEventListener("pointerdown",en),t.removeEventListener("pointerenter",en),t.removeEventListener("pointermove",en),t.removeEventListener("pointerleave",rn),t.removeEventListener("pointerup",rn))};return Pn(),m.on("tooltip:show",dn),m.on("tooltip:hide",yn),m.on("tooltip:disable",wn),m.on("tooltip:enable",Sn),()=>{Nn(),m.off("tooltip:show",dn),m.off("tooltip:hide",yn),m.off("tooltip:disable",wn),m.off("tooltip:enable",Sn),It?Ns({root:t,single:M,emitter:m,nativeEvent:!1}):We()}}function PC(t,{elements:e,coordinate:n,scale:r,render:o,groupName:c,sort:l,filter:u,emitter:d,wait:h=50,leading:p=!0,trailing:v=!1,groupKey:m=gt=>gt,single:b=!0,position:_,enterable:S,datum:E,view:w,mount:C,bounding:M,theme:L,offset:R,shared:j=!1,body:z=!0,disableNative:H=!1,preserve:$=!1,css:dt={}}){const gt=e(t),It=Nr(gt,m),rt=Cc(Se=>{const xe=ax({root:t,event:Se,elements:gt,coordinate:n,scale:r,shared:j});if(!xe){Ns({root:t,single:b,emitter:d,event:Se});return}const Pe=m(xe),Ke=It.get(Pe);if(!Ke)return;const Ze=Ke.length===1&&!j?tx(Ke[0]):TC(Ke,r,c,void 0,L);if(l&&Ze.items.sort((We,dn)=>l(We)-l(dn)),u&&(Ze.items=Ze.items.filter(u)),ox(Ze)){Ns({root:t,single:b,emitter:d,event:Se});return}const{offsetX:en,offsetY:rn}=Se;z&&J2({root:t,data:Ze,x:en,y:rn,render:o,event:Se,single:b,position:_,enterable:S,mount:C,bounding:M,css:dt,offset:R}),d.emit("tooltip:show",Object.assign(Object.assign({},Se),{nativeEvent:!0,data:Object.assign(Object.assign({},Ze),{data:Gy(xe,w)})}))},h,{leading:p,trailing:v}),lt=Se=>{Ns({root:t,single:b,emitter:d,event:Se})},pt=()=>{H||(t.addEventListener("pointerdown",rt),t.addEventListener("pointermove",rt),t.addEventListener("pointerleave",lt),t.addEventListener("pointerup",lt))},bt=()=>{H||(t.removeEventListener("pointerdown",rt),t.removeEventListener("pointermove",rt),t.removeEventListener("pointerleave",lt),t.removeEventListener("pointerup",lt))},Ht=({nativeEvent:Se,offsetX:xe,offsetY:Pe,data:Ke})=>{if(Se)return;const{data:Ze}=Ke,en=d_(gt,Ze,E);if(!en)return;const rn=en.getBBox(),{x:We,y:dn,width:yn,height:wn}=rn,Sn=t.getBBox();rt({target:en,offsetX:xe!==void 0?xe+Sn.x:We+yn/2,offsetY:Pe!==void 0?Pe+Sn.y:dn+wn/2})},Rt=({nativeEvent:Se}={})=>{Se||Ns({root:t,single:b,emitter:d,nativeEvent:!1})},jt=()=>{bt(),cv({root:t,single:b})},oe=()=>{pt()};return d.on("tooltip:show",Ht),d.on("tooltip:hide",Rt),d.on("tooltip:enable",oe),d.on("tooltip:disable",jt),pt(),()=>{bt(),d.off("tooltip:show",Ht),d.off("tooltip:hide",Rt),$?Ns({root:t,single:b,emitter:d,nativeEvent:!1}):cv({root:t,single:b})}}function uv(t){const{shared:e,crosshairs:n,crosshairsX:r,crosshairsY:o,series:c,name:l,item:u=()=>({}),facet:d=!1}=t,h=Fs(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(p,v,m)=>{const{container:b,view:_}=p,{scale:S,markState:E,coordinate:w,theme:C}=_,M=ix(E,"seriesTooltip"),L=ix(E,"crosshairs"),R=zo(b),j=La(c,M),z=La(n,L);if(j&&Z6(E)&&!d)return sx(R,Object.assign(Object.assign({},h),{theme:C,elements:lc,scale:S,coordinate:w,crosshairs:z,crosshairsX:La(La(r,n),!1),crosshairsY:La(o,z),item:u,emitter:m}));if(j&&d){const H=v.filter(lt=>lt!==p&&lt.options.parentKey===p.options.key),$=c_(p,v),dt=H[0].view.scale,gt=R.getBounds(),It=gt.min[0],rt=gt.min[1];return Object.assign(dt,{facet:!0}),sx(R.parentNode.parentNode,Object.assign(Object.assign({},h),{theme:C,elements:()=>$,scale:dt,coordinate:w,crosshairs:La(n,L),crosshairsX:La(La(r,n),!1),crosshairsY:La(o,z),item:u,startX:It,startY:rt,emitter:m}))}return PC(R,Object.assign(Object.assign({},h),{datum:Es(_),elements:lc,scale:S,coordinate:w,groupKey:e?hl(_):void 0,item:u,emitter:m,view:_,theme:C,shared:e}))}}uv.props={reapplyWhenUpdate:!0};const Al=t=>t?parseInt(t):0;function IC(t){const e=getComputedStyle(t),n=t.clientWidth||Al(e.width),r=t.clientHeight||Al(e.height),o=Al(e.paddingLeft)+Al(e.paddingRight),c=Al(e.paddingTop)+Al(e.paddingBottom);return{width:n-o,height:r-c}}function RC(t){const{height:e,width:n,padding:r=0,paddingLeft:o=r,paddingRight:c=r,paddingTop:l=r,paddingBottom:u=r,margin:d=0,marginLeft:h=d,marginRight:p=d,marginTop:v=d,marginBottom:m=d,inset:b=0,insetLeft:_=b,insetRight:S=b,insetTop:E=b,insetBottom:w=b}=t,C=R=>R==="auto"?20:R,M=n-C(o)-C(c)-h-p-_-S,L=e-C(l)-C(u)-v-m-E-w;return{width:M,height:L}}function fv(t,e){const n=[t];for(;n.length;){const r=n.shift();e&&e(r);const o=r.children||[];for(const c of o)n.push(c)}}class dv{constructor(e={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=e}map(e=n=>n){const n=e(this.value);return this.value=n,this}attr(e,n){return arguments.length===1?this.value[e]:this.map(r=>(r[e]=n,r))}append(e){const n=new e({});return n.children=[],this.push(n),n}push(e){return e.parentNode=this,e.index=this.children.length,this.children.push(e),this}remove(){const e=this.parentNode;if(e){const{children:n}=e,r=n.findIndex(o=>o===this);n.splice(r,1)}return this}getNodeByKey(e){let n=null;return fv(this,o=>{e===o.attr("key")&&(n=o)}),n}getNodesByType(e){const n=[];return fv(this,o=>{e===o.type&&n.push(o)}),n}getNodeByType(e){let n=null;return fv(this,r=>{n||e===r.type&&(n=r)}),n}call(e,...n){return e(this.map(),...n),this}getRoot(){let e=this;for(;e&&e.parentNode;)e=e.parentNode;return e}}var hv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const pv=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],cx="__remove__",gv="__callback__",vv=1,lx=1;function kC(t){if(t===void 0){const e=document.createElement("div");return e[cx]=!0,e}return typeof t=="string"?document.getElementById(t):t}function DC(t){const e=t.parentNode;e&&e.removeChild(t)}function ux(t){if(t.type!==null)return t;const e=t.children[t.children.length-1];for(const n of pv)e.attr(n,t.attr(n));return e}function mv(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function Gh(t,e){const{width:n,height:r,autoFit:o,depth:c=0}=t;let l=640,u=480;if(o){const{width:d,height:h}=IC(e);l=d||l,u=h||u}return l=n||l,u=r||u,{width:Math.max((0,ie.Z)(l)?l:vv,vv),height:Math.max((0,ie.Z)(u)?u:lx,lx),depth:c}}function FC(t){const e=ux(t),n=[e],r=new Map;for(r.set(e,mv(e));n.length;){const o=n.pop(),c=r.get(o),{children:l=[]}=o;for(const u of l)if(u.type===gv)c.children=u.value;else{const d=mv(u),{children:h=[]}=c;h.push(d),n.push(u),r.set(u,d),c.children=h}}return r.get(e)}function NC(t,e){return typeof t=="function"?!0:new Set(Object.keys(e)).has(t)}function BC(t,e){return typeof t!="function"&&new Set(Object.keys(e)).has(t)}function jC(t,e,n,r,o){const{type:c}=t,{type:l=n||c}=e;if(BC(l,o)){for(const u of pv)t.attr(u)!==void 0&&e[u]===void 0&&(e[u]=t.attr(u));return e}if(NC(l,r)){const u={type:"view"},d=Object.assign({},e);for(const h of pv)d[h]!==void 0&&(u[h]=d[h],delete d[h]);return Object.assign(Object.assign({},u),{children:[d]})}return e}function fx(t,e,n){if(typeof t=="function")return e.mark;const o=Object.assign(Object.assign({},e),n)[t];if(!o)throw new Error(`Unknown mark: ${t}.`);return o}function dx(t,e,n){if(typeof t=="function"){const d=new dv;return d.value=t,d.type=gv,d}const{type:r,children:o}=t,c=hv(t,["type","children"]),l=fx(r,e,n),u=new l;return u.value=c,u.type=r,u}function mf(t,e){const{type:n,children:r}=e,o=hv(e,["type","children"]);t.type===n||n===void 0?s0(t.value,o):typeof n=="string"&&(t.type=n,t.value=o)}function hx(t,e,n,r){if(!t)return;const o=[[t,e]];for(;o.length;){const[c,l]=o.shift(),u=dx(l,n,r);Array.isArray(c.children)&&c.push(u);const{children:d}=l;if(Array.isArray(d))for(const h of d)o.push([u,h]);else typeof d=="function"&&o.push([u,d])}}function px(t,e,n,r,o){const c=jC(t,e,n,r,o),l=[[null,t,c]];for(;l.length;){const[u,d,h]=l.shift();if(!d)hx(u,h,r,o);else if(!h)d.remove();else{mf(d,h);const{children:p}=h,{children:v}=d;if(Array.isArray(p)&&Array.isArray(v)){const m=Math.max(p.length,v.length);for(let b=0;b<m;b++){const _=p[b],S=v[b];l.push([d,S,_])}}else typeof p=="function"&&l.push([d,null,p])}}}function zC(){let t,e;return[new Promise((r,o)=>{e=r,t=o}),e,t]}function yv(t,e,{key:n=e}){t.prototype[e]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function UC(t,e,{key:n=e}){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const o=[...this.attr(n)||[],r];return this.attr(n,o)}}function ZC(t,e,{key:n=e}){t.prototype[e]=function(r,o){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const c=this.attr(n)||{};return c[r]=arguments.length===1?!0:o,this.attr(n,c)}}function HC(t,e,n){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(e);if(Array.isArray(r))return this.attr(e,{items:r});if($c(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(e,r);if(r===null||r===!1)return this.attr(e,r);const o=this.attr(e)||{},{items:c=[]}=o;return c.push(r),o.items=c,this.attr(e,o)}}function VC(t,e,{ctor:n}){t.prototype[e]=function(r){const o=this.append(n);return e==="mark"&&(o.type=r),o}}function WC(t,e,{ctor:n}){t.prototype[e]=function(){return this.type=null,this.append(n)}}function $h(t){return e=>{for(const[n,r]of Object.entries(t)){const{type:o}=r;o==="value"?yv(e,n,r):o==="array"?UC(e,n,r):o==="object"?ZC(e,n,r):o==="node"?VC(e,n,r):o==="container"?WC(e,n,r):o==="mix"&&HC(e,n,r)}return e}}function gx(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,{type:"node",ctor:n}]))}const vx={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},GC=Object.assign(Object.assign({},vx),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),$C=Object.assign(Object.assign({},vx),{labelTransform:{type:"array"}});var YC=function(t,e,n,r){var o=arguments.length,c=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(c=(o<3?l(c):o>3?l(e,n,c):l(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c};let Yh=class extends dv{changeData(e){var n;const r=this.getRoot();if(r)return this.attr("data",e),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(o=>{o.attr("data",e)}),r==null?void 0:r.render()}getView(){const e=this.getRoot(),{views:n}=e.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var e;return(e=this.getView())===null||e===void 0?void 0:e.scale}getScaleByChannel(e){const n=this.getScale();if(n)return n[e]}getCoordinate(){var e;return(e=this.getView())===null||e===void 0?void 0:e.coordinate}getTheme(){var e;return(e=this.getView())===null||e===void 0?void 0:e.theme}getGroup(){const e=this._key;return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}show(){const e=this.getGroup();e&&!e.isVisible()&&Vu(e)}hide(){const e=this.getGroup();e&&e.isVisible()&&dl(e)}};Yh=YC([$h($C)],Yh);var XC=function(t,e,n,r){var o=arguments.length,c=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(c=(o<3?l(c):o>3?l(e,n,c):l(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c};let bv=class extends dv{changeData(e){const n=this.getRoot();if(n)return this.attr("data",e),n==null?void 0:n.render()}getMark(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(!n)return;const{markState:r}=n,o=Array.from(r.keys()).find(c=>c.key===this.attr("key"));return r.get(o)}getScale(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(e){var n,r;const o=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(o)return(r=o==null?void 0:o.scale)===null||r===void 0?void 0:r[e]}getGroup(){const e=this.attr("key");return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}};bv=XC([$h(GC)],bv);var qC=function(t,e,n,r){var o=arguments.length,c=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(c=(o<3?l(c):o>3?l(e,n,c):l(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},KC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const QC="G2_CHART_KEY";class JC extends Yh{constructor(e){const{container:n,canvas:r,renderer:o,plugins:c,lib:l,createCanvas:u}=e,d=KC(e,["container","canvas","renderer","plugins","lib","createCanvas"]);super(d,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailingClear=null,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=RO(()=>{this.forceFit()},300),this._renderer=o||new Iy,this._plugins=c||[],this._container=kC(n),this._emitter=new pe,this._context={library:Object.assign(Object.assign({},l),yy),emitter:this._emitter,canvas:r,createCanvas:u},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;const e=new Promise((c,l)=>yC(this._computedOptions(),this._context,this._createResolve(c),this._createReject(l))),[n,r,o]=zC();return e.then(r).then(()=>{if(this._trailingClear){const c=this.options();this._trailingClear(),this._trailing&&this.options(c)}}).catch(o).then(()=>{this._trailingClear=null,this._renderTrailing()}),n}options(e){if(arguments.length===0)return FC(this);const{type:n}=e;return n&&(this._previousDefinedType=n),px(this,e,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(e,n,r){return this._emitter.on(e,n,r),this}once(e,n){return this._emitter.once(e,n),this}emit(e,...n){return this._emitter.emit(e,...n),this}off(e,n){return this._emitter.off(e,n),this}clear(e=!0){if(this._rendering){this._trailingClear=()=>{this.clear(e)},this._reset();return}const n=this.options();this.emit(Cr.BEFORE_CLEAR),this._reset(),sv(n,this._context,!1,e),this.emit(Cr.AFTER_CLEAR)}destroy(){const e=this.options();this.emit(Cr.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),sv(e,this._context,!0),this._container[cx]&&DC(this._container),this.emit(Cr.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:e,height:n}=Gh(this.options(),this._container);if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(Cr.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(Cr.AFTER_CHANGE_SIZE)}),r}changeSize(e,n){if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(Cr.BEFORE_CHANGE_SIZE),this.attr("width",e),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(Cr.AFTER_CHANGE_SIZE)}),r}getDataByXY(e,n={}){const{shared:r=!1,series:o,facet:c=!1,startX:l=0,startY:u=0}=n,{canvas:d,views:h}=this._context,{document:p}=d,{x:v,y:m}=e,{coordinate:b,scale:_,markState:S,data:E,key:w}=h[0],C=p.getElementsByClassName(K),M=r?gt=>gt.__data__.x:gt=>gt,L=Nr(C,M),R=p.getElementsByClassName(kt)[0],j=zo(R),z=gt=>Array.from(gt.values()).some(It=>{var rt,lt;return((rt=It.interaction)===null||rt===void 0?void 0:rt.seriesTooltip)||((lt=It.channels)===null||lt===void 0?void 0:lt.some(pt=>pt.name==="series"&&pt.values!==void 0))}),H=La(o,z(S)),$=gt=>pr(gt,"__data__.data",null),dt=gt=>gt.map($);try{if(H&&z(S)&&!c){const{selectedData:lt}=Wh({root:j,event:{offsetX:v,offsetY:m},elements:C,coordinate:b,scale:_,startX:l,startY:u}),pt=E.get(`${w}-0`);return lt.map(({index:bt})=>pt[bt])}const gt=ax({root:j,event:{offsetX:v,offsetY:m},elements:C,coordinate:b,scale:_,shared:r}),It=M(gt),rt=L.get(It);return rt?dt(rt):[]}catch(gt){const It=d.document.elementFromPointSync(v,m);return It?$(It):[]}}_create(){const{library:e}=this._context,n=c=>c.startsWith("mark.")||c==="component.axisX"||c==="component.axisY"||c==="component.legends",r=["mark.mark",...Object.keys(e).filter(n)];this._marks={};for(const c of r){const l=c.split(".").pop();class u extends bv{constructor(){super({},l)}}this._marks[l]=u,this[l]=function(d){const h=this.append(u);return l==="mark"&&(h.type=d),h}}const o=["composition.view",...Object.keys(e).filter(c=>c.startsWith("composition.")&&c!=="composition.mark")];this._compositions=Object.fromEntries(o.map(c=>{const l=c.split(".").pop();let u=class extends Yh{constructor(){super({},l)}};return u=qC([$h(gx(this._marks))],u),[l,u]}));for(const c of Object.values(this._compositions))$h(gx(this._compositions))(c);for(const c of o){const l=c.split(".").pop();this[l]=function(){const u=this._compositions[l];return this.type=null,this.append(u)}}}_reset(){const e=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||e.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const e=this._trailingResolve.bind(this);this._trailingResolve=null,e(this)}).catch(e=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(e)}))}_createResolve(e){return()=>{this._rendering=!1,e(this)}}_createReject(e){return n=>{this._rendering=!1,e(n)}}_computedOptions(){const e=this.options(),{key:n=QC}=e,{width:r,height:o,depth:c}=Gh(e,this._container);return this._width=r,this._height=o,this._key=n,Object.assign(Object.assign({key:this._key},e),{width:r,height:o,depth:c})}_createCanvas(){const{width:e,height:n}=Gh(this.options(),this._container);this._plugins.push(new ky),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new I.Xz({container:this._container,width:e,height:n,renderer:this._renderer})}_addToTrailing(){var e;return(e=this._trailingResolve)===null||e===void 0||e.call(this,this),this._trailing=!0,new Promise((r,o)=>{this._trailingResolve=r,this._trailingReject=o})}_bindAutoFit(){const e=this.options(),{autoFit:n}=e;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function tM(t,e){class n extends t{constructor(o){super(Object.assign(Object.assign({},o),{lib:e}))}}return n}var eM=Object.prototype.hasOwnProperty,_v=function(t,e){if(t===null||!_i(t))return{};var n={};return kd(e,function(r){eM.call(t,r)&&(n[r]=t[r])}),n};function nM(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function yf(t,e,n,r,o){for(var c=t.children,l,u=-1,d=c.length,h=t.value&&(r-e)/t.value;++u<d;)l=c[u],l.y0=n,l.y1=o,l.x0=e,l.x1=e+=l.value*h}function xv(){var t=1,e=1,n=0,r=!1;function o(l){var u=l.height+1;return l.x0=l.y0=n,l.x1=t,l.y1=e/u,l.eachBefore(c(e,u)),r&&l.eachBefore(nM),l}function c(l,u){return function(d){d.children&&yf(d,d.x0,l*(d.depth+1)/u,d.x1,l*(d.depth+2)/u);var h=d.x0,p=d.y0,v=d.x1-n,m=d.y1-n;v<h&&(h=v=(h+v)/2),m<p&&(p=m=(p+m)/2),d.x0=h,d.y0=p,d.x1=v,d.y1=m}}return o.round=function(l){return arguments.length?(r=!!l,o):r},o.size=function(l){return arguments.length?(t=+l[0],e=+l[1],o):[t,e]},o.padding=function(l){return arguments.length?(n=+l,o):n},o}var rM=k(9783);function iM(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function oM(){return this.eachAfter(iM)}var Sv=k(64599);function aM(t,e){var n=-1,r=Sv(this),o;try{for(r.s();!(o=r.n()).done;){var c=o.value;t.call(e,c,++n,this)}}catch(l){r.e(l)}finally{r.f()}return this}function bf(t,e){for(var n=this,r=[n],o,c,l=-1;n=r.pop();)if(t.call(e,n,++l,this),o=n.children)for(c=o.length-1;c>=0;--c)r.push(o[c]);return this}function _f(t,e){for(var n=this,r=[n],o=[],c,l,u,d=-1;n=r.pop();)if(o.push(n),c=n.children)for(l=0,u=c.length;l<u;++l)r.push(c[l]);for(;n=o.pop();)t.call(e,n,++d,this);return this}function sM(t,e){var n=-1,r=Sv(this),o;try{for(r.s();!(o=r.n()).done;){var c=o.value;if(t.call(e,c,++n,this))return c}}catch(l){r.e(l)}finally{r.f()}}function cM(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,o=r&&r.length;--o>=0;)n+=r[o].value;e.value=n})}function lM(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function mx(t){for(var e=this,n=uM(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var o=r.length;t!==n;)r.splice(o,0,t),t=t.parent;return r}function uM(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),o=null;for(t=n.pop(),e=r.pop();t===e;)o=t,t=n.pop(),e=r.pop();return o}function fM(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function dM(){return Array.from(this)}function hM(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function pM(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}var yx=k(15009),gM=yx().mark(bx);function bx(){var t,e,n,r,o,c;return yx().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=this,n=[t];case 1:e=n.reverse(),n=[];case 2:if(!(t=e.pop())){u.next=8;break}return u.next=5,t;case 5:if(r=t.children)for(o=0,c=r.length;o<c;++o)n.push(r[o]);u.next=2;break;case 8:if(n.length){u.next=1;break}case 9:case"end":return u.stop()}},gM,this)}function Tl(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=yM)):e===void 0&&(e=mM);for(var n=new xf(t),r,o=[n],c,l,u,d;r=o.pop();)if((l=e(r.data))&&(d=(l=Array.from(l)).length))for(r.children=l,u=d-1;u>=0;--u)o.push(c=l[u]=new xf(l[u])),c.parent=r,c.depth=r.depth+1;return n.eachBefore(_x)}function vM(){return Tl(this).eachBefore(bM)}function mM(t){return t.children}function yM(t){return Array.isArray(t)?t[1]:null}function bM(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function _x(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function xf(t){this.data=t,this.depth=this.height=0,this.parent=null}xf.prototype=Tl.prototype=rM({constructor:xf,count:oM,each:aM,eachAfter:_f,eachBefore:bf,find:sM,sum:cM,sort:lM,path:mx,ancestors:fM,descendants:dM,leaves:hM,links:pM,copy:vM},Symbol.iterator,bx);function Ov(t,e){for(var n in e)e.hasOwnProperty(n)&&n!=="constructor"&&e[n]!==void 0&&(t[n]=e[n])}function Ev(t,e,n,r){return e&&Ov(t,e),n&&Ov(t,n),r&&Ov(t,r),t}const _M={field:"value",size:[1,1],round:!1,padding:0,sort:(t,e)=>e.value-t.value,as:["x","y"],ignoreParentValue:!0},xM="nodeIndex",ua="childNodeCount",SM="nodeAncestor",wv="Invalid field: it must be a string!";function OM(t,e){const{field:n,fields:r}=t;if((0,Wt.Z)(n))return n;if((0,Wi.Z)(n))return console.warn(wv),n[0];if(console.warn(`${wv} will try to get fields instead.`),(0,Wt.Z)(r))return r;if((0,Wi.Z)(r)&&r.length)return r[0];if(e)return e;throw new TypeError(wv)}function EM(t){const e=[];if(t&&t.each){let n,r;t.each(o=>{var c,l;o.parent!==n?(n=o.parent,r=0):r+=1;const u=GA((((c=o.ancestors)===null||c===void 0?void 0:c.call(o))||[]).map(d=>e.find(h=>h.name===d.name)||d),({depth:d})=>d>0&&d<o.depth);o[SM]=u,o[ua]=((l=o.children)===null||l===void 0?void 0:l.length)||0,o[xM]=r,e.push(o)})}else t&&t.eachNode&&t.eachNode(n=>{e.push(n)});return e}function H6(t,e){e=Ev({},_M,e);const n=e.as;if(!(0,Wi.Z)(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=OM(e)}catch(d){console.warn(d)}const c=(d=>xv().size(e.size).round(e.round).padding(e.padding)(Tl(d).sum(h=>Pu(h.children)?e.ignoreParentValue?0:h[r]-W1(h.children,(p,v)=>p+v[r],0):h[r]).sort(e.sort)))(t),l=n[0],u=n[1];return c.each(d=>{var h,p;d[l]=[d.x0,d.x1,d.x1,d.x0],d[u]=[d.y1,d.y1,d.y0,d.y0],d.name=d.name||((h=d.data)===null||h===void 0?void 0:h.name)||((p=d.data)===null||p===void 0?void 0:p.label),d.data.name=d.name,["x0","x1","y0","y1"].forEach(v=>{n.indexOf(v)===-1&&delete d[v]})}),EM(c)}var wM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Cl="sunburst",Av="markType",V6="value",xx="path",Xh="ancestor-node";function W6(t){const{data:e,encode:n}=t,{color:r,value:o}=n,l=H6(e,{field:o,type:"hierarchy.partition",as:["x","y"]}),u=[];return l.forEach(d=>{var h,p,v,m;if(d.depth===0)return null;let b=d.data.name;const _=[b];let S=Object.assign({},d);for(;S.depth>1;)b=`${(h=S.parent.data)===null||h===void 0?void 0:h.name} / ${b}`,_.unshift((p=S.parent.data)===null||p===void 0?void 0:p.name),S=S.parent;const E=Object.assign(Object.assign(Object.assign({},_v(d.data,[o])),{[xx]:b,[Xh]:S.data.name}),d);r&&r!==Xh&&(E[r]=d.data[r]||((m=(v=d.parent)===null||v===void 0?void 0:v.data)===null||m===void 0?void 0:m[r])),u.push(E)}),u.map(d=>{const h=d.x.slice(0,2),p=[d.y[2],d.y[0]];return h[0]===h[1]&&(p[0]=p[1]=(d.y[2]+d.y[0])/2),Object.assign(Object.assign({},d),{x:h,y:p,fillOpacity:Math.pow(.85,d.depth)})})}const Sx={id:Cl,encode:{x:"x",y:"y",key:xx,color:Xh,value:"value"},axis:{x:!1,y:!1},style:{[Av]:Cl,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[ua]:ua,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},Tv=t=>{const{encode:e,data:n=[]}=t,r=wM(t,["encode","data"]),o=Object.assign(Object.assign({},r.coordinate),{innerRadius:Math.max(pr(r,["coordinate","innerRadius"],.2),1e-5)}),c=Object.assign(Object.assign({},Sx.encode),e),{value:l}=c,u=W6({encode:c,data:n});return[an({},Sx,Object.assign(Object.assign({type:"rect",data:u,encode:c,tooltip:{title:"path",items:[d=>({name:l,value:d[l]})]}},r),{coordinate:o}))]};Tv.props={};var AM=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return kd(t,function(n,r){(0,go.Z)(t)&&r==="prototype"||e.push(r)}),e},Cv=AM,TM=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const CM=t=>t.querySelectorAll(".element").filter(e=>pr(e,["style",Av])===Cl);function Ox(t){return Gn(t).select(`.${le}`).node()}const MM={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function LM(t={}){const{breadCrumb:e={},isFixedColor:n=!1}=t,r=an({},MM,e);return o=>{const{update:c,setState:l,container:u,view:d,options:h}=o,p=u.ownerDocument,v=Ox(u),m=h.marks.find(({id:M})=>M===Cl),{state:b}=m,_=p.createElement("g");v.appendChild(_);const S=(M,L)=>TM(this,void 0,void 0,function*(){if(_.removeChildren(),M){const R=p.createElement("text",{style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});_.appendChild(R);let j="";const z=M==null?void 0:M.split(" / ");let H=r.style.y,$=_.getBBox().width;const dt=v.getBBox().width,gt=z.map((It,rt)=>{const lt=p.createElement("text",{style:Object.assign(Object.assign({x:$,text:" / "},r.style),{y:H})});_.appendChild(lt),$+=lt.getBBox().width,j=`${j}${It} / `;const pt=p.createElement("text",{name:j.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:It,x:$,depth:rt+1},r.style),{y:H})});return _.appendChild(pt),$+=pt.getBBox().width,$>dt&&(H=_.getBBox().height,$=0,lt.attr({x:$,y:H}),$+=lt.getBBox().width,pt.attr({x:$,y:H}),$+=pt.getBBox().width),pt});[R,...gt].forEach((It,rt)=>{if(rt===gt.length)return;const lt=Object.assign({},It.attributes);It.attr("cursor","pointer"),It.addEventListener("mouseenter",()=>{It.attr(r.active)}),It.addEventListener("mouseleave",()=>{It.attr(lt)}),It.addEventListener("click",()=>{S(It.name,pr(It,["style","depth"]))})})}l("drillDown",R=>{const{marks:j}=R,z=j.map(H=>{if(H.id!==Cl&&H.type!=="rect")return H;const{data:$}=H,dt=Object.fromEntries(["color"].map(It=>[It,{domain:d.scale[It].getOptions().domain}])),gt=$.filter(It=>{const rt=It.path;return n||(It[Xh]=rt.split(" / ")[L]),M?new RegExp(`^${M}.+`).test(rt):!0});return an({},H,n?{data:gt,scale:dt}:{data:gt})});return Object.assign(Object.assign({},R),{marks:z})}),yield c()}),E=M=>{const L=M.target;if(pr(L,["style",Av])!==Cl||pr(L,["markType"])!=="rect"||!pr(L,["style",ua]))return;const R=pr(L,["__data__","key"]),j=pr(L,["style","depth"]);L.style.cursor="pointer",S(R,j)};v.addEventListener("click",E);const w=Cv(Object.assign(Object.assign({},b.active),b.inactive)),C=()=>{CM(v).forEach(L=>{const R=pr(L,["style",ua]);if(pr(L,["style","cursor"])!=="pointer"&&R){L.style.cursor="pointer";const z=_v(L.attributes,w);L.addEventListener("mouseenter",()=>{L.attr(b.active)}),L.addEventListener("mouseleave",()=>{L.attr(an(z,b.inactive))})}})};return v.addEventListener("mousemove",C),()=>{_.remove(),v.removeEventListener("click",E),v.removeEventListener("mousemove",C)}}}function PM(){return{"interaction.drillDown":LM,"mark.sunburst":Tv}}const Ex=()=>[["cartesian"]];Ex.props={};const Mv=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];Mv.props={transform:!0};const IM=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},Ax=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:o}=IM(t);return[...Mv(),...cu({startAngle:e,endAngle:n,innerRadius:r,outerRadius:o})]};Ax.props={};const Lv=()=>[["parallel",0,1,0,1]];Lv.props={};const RM=({focusX:t=0,focusY:e=0,distortionX:n=2,distortionY:r=2,visual:o=!1})=>[["fisheye",t,e,n,r,o]];RM.props={transform:!0};const Tx=t=>{const{startAngle:e=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:o=1}=t;return[...Lv(),...cu({startAngle:e,endAngle:n,innerRadius:r,outerRadius:o})]};Tx.props={};const qh=({startAngle:t=0,endAngle:e=Math.PI*6,innerRadius:n=0,outerRadius:r=1})=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",t,e,n,r]];qh.props={};const Cx=({value:t})=>e=>e.map(()=>t);Cx.props={};const Mx=({value:t})=>e=>e.map(n=>n[t]);Mx.props={};const Lx=({value:t})=>e=>e.map(t);Lx.props={};const Px=({value:t})=>()=>t;Px.props={};function Br(t,e){if(t!==null)return{type:"column",value:t,field:e}}function Sf(t,e){const n=Br(t,e);return Object.assign(Object.assign({},n),{inferred:!0})}function Mc(t,e){if(t!==null)return{type:"column",value:t,field:e,visual:!0}}function kM(t,e){const n=Br(t,e);return Object.assign(Object.assign({},n),{constant:!1})}function Bs(t,e){const n=[];for(const r of t)n[r]=e;return n}function vr(t,e){const n=t[e];if(!n)return[null,null];const{value:r,field:o=null}=n;return[r,o]}function Kh(t,...e){for(const n of e)if(typeof n=="string"){const[r,o]=vr(t,n);if(r!==null)return[r,o]}else return[n,null];return[null,null]}function Qh(t){return t instanceof Date?!1:typeof t=="object"}const Jh=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;return r!==void 0?[t,e]:[t,an({},e,{encode:{y1:Sf(Bs(t,0))}})]};Jh.props={};const Lc=()=>(t,e)=>{const{encode:n}=e,{x:r}=n;return r!==void 0?[t,e]:[t,an({},e,{encode:{x:Sf(Bs(t,0))},scale:{x:{guide:null}}})]};Lc.props={};const Pc=(t,e)=>nh(Object.assign({colorAttribute:"fill"},t),e);Pc.props=Object.assign(Object.assign({},nh.props),{defaultMarker:"square"});const Pv=(t,e)=>nh(Object.assign({colorAttribute:"stroke"},t),e);Pv.props=Object.assign(Object.assign({},nh.props),{defaultMarker:"hollowSquare"});function Ml(){}function Ix(t){this._context=t}Ix.prototype={areaStart:Ml,areaEnd:Ml,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Iv(t){return new Ix(t)}var Rx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function DM(t,e,n){const[r,o,c,l]=t;if(Zr(n)){const h=[e?e[0][0]:o[0],o[1]],p=[e?e[3][0]:c[0],c[1]];return[r,h,p,l]}const u=[o[0],e?e[0][1]:o[1]],d=[c[0],e?e[3][1]:c[1]];return[r,u,d,l]}const tp=(t,e)=>{const{adjustPoints:n=DM}=t,r=Rx(t,["adjustPoints"]),{coordinate:o,document:c}=e;return(l,u,d,h)=>{const{index:p}=u,{color:v}=d,m=Rx(d,["color"]),b=h[p+1],_=n(l,b,o),S=!!Zr(o),[E,w,C,M]=S?Wd(_):_,{color:L=v,opacity:R}=u,j=oc().curve(Iv)([E,w,C,M]);return Gn(c.createElement("path",{})).call(Bn,m).style("d",j).style("fill",L).style("fillOpacity",R).call(Bn,r).node()}};tp.props={defaultMarker:"square"};function Rv(t,e,n){const[r,o,c,l]=t;if(Zr(n)){const h=[e?e[0][0]:(o[0]+c[0])/2,o[1]],p=[e?e[3][0]:(o[0]+c[0])/2,c[1]];return[r,h,p,l]}const u=[o[0],e?e[0][1]:(o[1]+c[1])/2],d=[c[0],e?e[3][1]:(o[1]+c[1])/2];return[r,u,d,l]}const kx=(t,e)=>tp(Object.assign({adjustPoints:Rv},t),e);kx.props={defaultMarker:"square"};function Of(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}function Dx(t){const e=t.getFullYear(),n=Of(t.getMonth()+1),r=Of(t.getDate()),o=`${e}-${n}-${r}`,c=t.getHours(),l=t.getMinutes(),u=t.getSeconds();return c||l||u?`${o} ${Of(c)}:${Of(l)}:${Of(u)}`:o}const Ef=(t={})=>{const{channel:e="x"}=t;return(n,r)=>{const{encode:o}=r,{tooltip:c}=r;if(ma(c))return[n,r];const{title:l}=c;if(l!==void 0)return[n,r];const u=Object.keys(o).filter(h=>h.startsWith(e)).filter(h=>!o[h].inferred).map(h=>vr(o,h)).filter(([h])=>h).map(h=>h[0]);if(u.length===0)return[n,r];const d=[];for(const h of n)d[h]={value:u.map(p=>p[h]instanceof Date?Dx(p[h]):p[h]).join(", ")};return[n,an({},r,{tooltip:{title:d}})]}};Ef.props={};const ep=t=>{const{channel:e}=t;return(n,r)=>{const{encode:o,tooltip:c}=r;if(ma(c))return[n,r];const{items:l=[]}=c;if(!l||l.length>0)return[n,r];const d=(Array.isArray(e)?e:[e]).flatMap(h=>Object.keys(o).filter(p=>p.startsWith(h)).map(p=>{const{field:v,value:m,inferred:b=!1,aggregate:_}=o[p];return b?null:_&&m?{channel:p}:v?{field:v}:m?{channel:p}:null}).filter(p=>p!==null));return[n,an({},r,{tooltip:{items:d}})]}};ep.props={};var FM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const kv=()=>(t,e)=>{const{encode:n}=e,{key:r}=n,o=FM(n,["key"]);if(r!==void 0)return[t,e];const c=Object.values(o).map(({value:u})=>u),l=t.map(u=>c.filter(Array.isArray).map(d=>d[u]).join("-"));return[t,an({},e,{encode:{key:Br(l)}})]};kv.props={};function wf(t={}){const{shapes:e}=t;return[{name:"color"},{name:"opacity"},{name:"shape",range:e},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function lo(t={}){return[...wf(t),{name:"title",scale:"identity"}]}function Af(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function js(){return[{type:Ef,channel:"color"},{type:ep,channel:["x","y"]}]}function Ll(){return[{type:Ef,channel:"x"},{type:ep,channel:["y"]}]}function NM(){return[{type:Ef,channel:"color"},{type:ep,channel:["position"]}]}function Pl(t={}){return wf(t)}function Je(){return[{type:kv}]}function pi(){return[]}function Dv(t,e){return t.getBandWidth(t.invert(e))}function Ic(t,e,n={}){const{x:r,y:o,series:c}=e,{x:l,y:u,series:d}=t,{style:{bandOffset:h=d?0:.5,bandOffsetX:p=h,bandOffsetY:v=h}={}}=n,m=!!(l!=null&&l.getBandWidth),b=!!(u!=null&&u.getBandWidth),_=!!(d!=null&&d.getBandWidth);return!m&&!b?S=>S:(S,E)=>{const w=m?Dv(l,r[E]):0,C=b?Dv(u,o[E]):0,L=_&&c?(Dv(d,c[E])/2+ +c[E])*w:0,[R,j]=S;return[R+p*w+L,j+v*C]}}function Tf(t){return parseFloat(t)/100}function Fv(t,e,n,r){const{x:o,y:c}=n,{innerWidth:l,innerHeight:u}=r.getOptions(),d=Array.from(t,h=>{const p=o[h],v=c[h],m=typeof p=="string"?Tf(p)*l:+p,b=typeof v=="string"?Tf(v)*u:+v;return[[m,b]]});return[t,d]}function Pa(t){return typeof t=="function"?t:e=>e[t]}function np(t,e){return Array.from(t,Pa(e))}function Rc(t,e){const{source:n=p=>p.source,target:r=p=>p.target,value:o=p=>p.value}=e,{links:c,nodes:l}=t,u=np(c,n),d=np(c,r),h=np(c,o);return{links:c.map((p,v)=>({target:d[v],source:u[v],value:h[v]})),nodes:l||Array.from(new Set([...u,...d]),p=>({key:p}))}}function Fx(t,e){return t.getBandWidth(t.invert(e))}const Nx={rect:Pc,hollow:Pv,funnel:tp,pyramid:kx},Bx=()=>(t,e,n,r)=>{const{x:o,y:c,y1:l,series:u,size:d}=n,h=e.x,p=e.series,[v]=r.getSize(),m=d?d.map(S=>+S/v):null,b=d?(S,E,w)=>{const C=S+E/2,M=m[w];return[C-M/2,C+M/2]}:(S,E,w)=>[S,S+E],_=Array.from(t,S=>{const E=Fx(h,o[S]),w=p?Fx(p,u==null?void 0:u[S]):1,C=E*w,M=(+(u==null?void 0:u[S])||0)*E,L=+o[S]+M,[R,j]=b(L,C,S),z=+c[S],H=+l[S];return[[R,z],[j,z],[j,H],[R,H]].map(rt=>r.map(rt))});return[t,_]};Bx.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:Nx,channels:[...lo({shapes:Object.keys(Nx)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...Je(),{type:Jh},{type:Lc}],postInference:[...pi(),...Ll()],interaction:{shareTooltip:!0}};const jx={rect:Pc,hollow:Pv},zx=()=>(t,e,n,r)=>{const{x:o,x1:c,y:l,y1:u}=n,d=Array.from(t,h=>{const p=[+o[h],+l[h]],v=[+c[h],+l[h]],m=[+c[h],+u[h]],b=[+o[h],+u[h]];return[p,v,m,b].map(_=>r.map(_))});return[t,d]};zx.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:jx,channels:[...lo({shapes:Object.keys(jx)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Je(),{type:Jh}],postInference:[...pi(),...Ll()],interaction:{shareTooltip:!0}};var rp=Nv(Bu);function Ux(t){this._curve=t}Ux.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function Nv(t){function e(n){return new Ux(t(n))}return e._curve=t,e}function zs(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(Nv(n)):e()._curve},t}function BM(){return zs(oc().curve(rp))}var Zx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const jM=ac(t=>{const{d1:e,d2:n,style1:r,style2:o}=t.attributes,c=t.ownerDocument;Gn(t).maybeAppend("line",()=>c.createElement("path",{})).style("d",e).call(Bn,r),Gn(t).maybeAppend("line1",()=>c.createElement("path",{})).style("d",n).call(Bn,o)});function Hx(t,e){const n=[],r=[];let o=!1,c=null;for(const l of t)!e(l[0])||!e(l[1])?o=!0:(n.push(l),o&&(o=!1,r.push([c,l])),c=l);return[n,r]}const Vo=(t,e)=>{const{curve:n,gradient:r=!1,gradientColor:o="between",defined:c=p=>!Number.isNaN(p)&&p!==void 0&&p!==null,connect:l=!1}=t,u=Zx(t,["curve","gradient","gradientColor","defined","connect"]),{coordinate:d,document:h}=e;return(p,v,m)=>{const{color:b,lineWidth:_}=m,S=Zx(m,["color","lineWidth"]),{color:E=b,size:w=_,seriesColor:C,seriesX:M,seriesY:L}=v,R=Zb(d,v),j=Zr(d),z=r&&C?Vd(C,M,L,r,o,j):E,H=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},S),z&&{stroke:z}),w&&{lineWidth:w}),R&&{transform:R}),u);let $;if(Ar(d)){const pt=d.getCenter();$=bt=>BM().angle((Ht,Rt)=>nc(si(bt[Rt],pt))).radius((Ht,Rt)=>ni(bt[Rt],pt)).defined(([Ht,Rt])=>c(Ht)&&c(Rt)).curve(n)(bt)}else $=oc().x(pt=>pt[0]).y(pt=>pt[1]).defined(([pt,bt])=>c(pt)&&c(bt)).curve(n);const[dt,gt]=Hx(p,c),It=xn(H,"connect"),rt=!!gt.length;if(!rt||l&&!Object.keys(It).length)return Gn(h.createElement("path",{})).style("d",$(dt)||[]).call(Bn,H).node();if(rt&&!l)return Gn(h.createElement("path",{})).style("d",$(p)).call(Bn,H).node();const lt=pt=>pt.map($).join(",");return Gn(new jM).style("style1",Object.assign(Object.assign({},H),It)).style("style2",H).style("d1",lt(gt)).style("d2",$(p)).node()}};Vo.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Vx=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const o=Ar(n)?Iv:Bu;return Vo(Object.assign({curve:o},t),e)(...r)}};Vx.props=Object.assign(Object.assign({},Vo.props),{defaultMarker:"line"});function ip(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Il(t,e){this._context=t,this._k=(1-e)/6}Il.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ip(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ip(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Cf=function t(e){function n(r){return new Il(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Bv(t,e){this._context=t,this._k=(1-e)/6}Bv.prototype={areaStart:Ml,areaEnd:Ml,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ip(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var G6=function t(e){function n(r){return new Bv(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Mf(t,e,n){var r=t._x1,o=t._y1,c=t._x2,l=t._y2;if(t._l01_a>Ui){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,d=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/d,o=(o*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/d}if(t._l23_a>Ui){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,p=3*t._l23_a*(t._l23_a+t._l12_a);c=(c*h+t._x1*t._l23_2a-e*t._l12_2a)/p,l=(l*h+t._y1*t._l23_2a-n*t._l12_2a)/p}t._context.bezierCurveTo(r,o,c,l,t._x2,t._y2)}function Wx(t,e){this._context=t,this._alpha=e}Wx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Mf(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $6=function t(e){function n(r){return e?new Wx(r,e):new Il(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function yr(t,e){this._context=t,this._alpha=e}yr.prototype={areaStart:Ml,areaEnd:Ml,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Mf(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var jv=function t(e){function n(r){return e?new yr(r,e):new Bv(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function zv(t){return t<0?-1:1}function Gx(t,e,n){var r=t._x1-t._x0,o=e-t._x1,c=(t._y1-t._y0)/(r||o<0&&-0),l=(n-t._y1)/(o||r<0&&-0),u=(c*o+l*r)/(r+o);return(zv(c)+zv(l))*Math.min(Math.abs(c),Math.abs(l),.5*Math.abs(u))||0}function Lf(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function op(t,e,n){var r=t._x0,o=t._y0,c=t._x1,l=t._y1,u=(c-r)/3;t._context.bezierCurveTo(r+u,o+u*e,c-u,l-u*n,c,l)}function ap(t){this._context=t}ap.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:op(this,this._t0,Lf(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,op(this,Lf(this,n=Gx(this,t,e)),n);break;default:op(this,this._t0,n=Gx(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function $x(t){this._context=new Yx(t)}($x.prototype=Object.create(ap.prototype)).point=function(t,e){ap.prototype.point.call(this,e,t)};function Yx(t){this._context=t}Yx.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,c){this._context.bezierCurveTo(e,t,r,n,c,o)}};function Xx(t){return new ap(t)}function qx(t){return new $x(t)}var zM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Kx=(t,e)=>{const n=zM(t,[]),{coordinate:r}=e;return(...o)=>{const c=Ar(r)?jv:Zr(r)?qx:Xx;return Vo(Object.assign({curve:c},n),e)(...o)}};Kx.props=Object.assign(Object.assign({},Vo.props),{defaultMarker:"smooth"});function sp(t,e){this._context=t,this._t=e}sp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Qx(t){return new sp(t,.5)}function Uv(t){return new sp(t,0)}function Zv(t){return new sp(t,1)}const Hv=(t,e)=>Vo(Object.assign({curve:Zv},t),e);Hv.props=Object.assign(Object.assign({},Vo.props),{defaultMarker:"hv"});const Jx=(t,e)=>Vo(Object.assign({curve:Uv},t),e);Jx.props=Object.assign(Object.assign({},Vo.props),{defaultMarker:"vh"});const t3=(t,e)=>Vo(Object.assign({curve:Qx},t),e);t3.props=Object.assign(Object.assign({},Vo.props),{defaultMarker:"hvh"});var UM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function e3(t,e,n,r,o){const c=si(n,e),l=no(c),u=l+Math.PI/2,d=[r/2*Math.cos(u),r/2*Math.sin(u)],h=[o/2*Math.cos(u),o/2*Math.sin(u)],p=[o/2*Math.cos(l),o/2*Math.sin(l)],v=[r/2*Math.cos(l),r/2*Math.sin(l)],m=Zd(e,d),b=Zd(n,h),_=Zd(b,p),S=Zd(n,p),E=si(S,h),w=si(n,h),C=si(e,d),M=si(C,v),L=si(e,v),R=si(m,v);t.moveTo(...m),t.lineTo(...b),t.arcTo(..._,...S,o/2),t.arcTo(...E,...w,o/2),t.lineTo(...C),t.arcTo(...M,...L,r/2),t.arcTo(...R,...m,r/2),t.closePath()}const n3=(t,e)=>{const{document:n}=e;return(r,o,c)=>{const{seriesSize:l,color:u}=o,{color:d}=c,h=UM(c,["color"]),p=jo();for(let v=0;v<r.length-1;v++){const m=r[v],b=r[v+1],_=l[v],S=l[v+1];[...m,...b].every(Ur)&&e3(p,m,b,_,S)}return Gn(n.createElement("path",{})).call(Bn,h).style("fill",u||d).style("d",p.toString()).call(Bn,t).node()}};n3.props=Object.assign(Object.assign({},Vo.props),{defaultMarker:"line"});const r3=()=>(t,e)=>{const{style:n={},encode:r}=e,{series:o}=r,{gradient:c}=n;return!c||o?[t,e]:[t,an({},e,{encode:{series:Mc(Bs(t,void 0))}})]};r3.props={};const cp=()=>(t,e)=>{const{encode:n}=e,{series:r,color:o}=n;if(r!==void 0||o===void 0)return[t,e];const[c,l]=vr(n,"color");return[t,an({},e,{encode:{series:Br(c,l)}})]};cp.props={};const Us={line:Vx,smooth:Kx,hv:Hv,vh:Jx,hvh:t3,trail:n3},ZM=(t,e,n,r)=>{var o,c;const{series:l,x:u,y:d}=n,{x:h,y:p}=e;if(u===void 0||d===void 0)throw new Error("Missing encode for x or y channel.");const v=l?Array.from(Nr(t,E=>l[E]).values()):[t],m=v.map(E=>E[0]).filter(E=>E!==void 0),b=(((o=h==null?void 0:h.getBandWidth)===null||o===void 0?void 0:o.call(h))||0)/2,_=(((c=p==null?void 0:p.getBandWidth)===null||c===void 0?void 0:c.call(p))||0)/2,S=Array.from(v,E=>E.map(w=>r.map([+u[w]+b,+d[w]+_])));return[m,S,v]},HM=(t,e,n,r)=>{const o=Object.entries(n).filter(([l])=>l.startsWith("position")).map(([,l])=>l);if(o.length===0)throw new Error("Missing encode for position channel.");Ar(r)&&o.push(o[0]);const c=Array.from(t,l=>{const u=o.map(p=>+p[l]),d=r.map(u),h=[];for(let p=0;p<d.length;p+=2)h.push([d[p],d[p+1]]);return h});return[t,c]},i3=()=>(t,e,n,r)=>(fu(r)?HM:ZM)(t,e,n,r);i3.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Us,channels:[...lo({shapes:Object.keys(Us)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Je(),{type:r3},{type:cp}],postInference:[...pi(),...Ll(),...NM()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var o3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function a3(t,e,n,r){if(e.length===1)return;const{size:o}=n;if(t==="fixed")return o;if(t==="normal"||d1(r)){const[[c,l],[u,d]]=e,h=Math.abs((u-c)/2),p=Math.abs((d-l)/2);return Math.max(0,(h+p)/2)}return o}const ur=(t,e)=>{const{colorAttribute:n,symbol:r,mode:o="auto"}=t,c=o3(t,["colorAttribute","symbol","mode"]),l=Uc.get(ys(r))||Uc.get("point"),{coordinate:u,document:d}=e;return(h,p,v)=>{const{lineWidth:m,color:b}=v,_=c.stroke?m||1:m,{color:S=b,transform:E,opacity:w}=p,[C,M]=cg(h),R=a3(o,h,p,u)||c.r||v.r;return Gn(d.createElement("path",{})).call(Bn,v).style("fill","transparent").style("d",l(C,M,R)).style("lineWidth",_).style("transform",E).style("transformOrigin",`${C-R} ${M-R}`).style("stroke",S).style(sg(t),w).style(n,S).call(Bn,c).node()}};ur.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const lp=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"point"},t),e);lp.props=Object.assign({defaultMarker:"hollowPoint"},ur.props);const Pf=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),e);Pf.props=Object.assign({defaultMarker:"hollowDiamond"},ur.props);const s3=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),e);s3.props=Object.assign({defaultMarker:"hollowHexagon"},ur.props);const up=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"square"},t),e);up.props=Object.assign({defaultMarker:"hollowSquare"},ur.props);const c3=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),e);c3.props=Object.assign({defaultMarker:"hollowTriangleDown"},ur.props);const l3=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),e);l3.props=Object.assign({defaultMarker:"hollowTriangle"},ur.props);const u3=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),e);u3.props=Object.assign({defaultMarker:"hollowBowtie"},ur.props);var VM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Vv=(t,e)=>{const{colorAttribute:n,mode:r="auto"}=t,o=VM(t,["colorAttribute","mode"]),{coordinate:c,document:l}=e;return(u,d,h)=>{const{lineWidth:p,color:v}=h,m=o.stroke?p||1:p,{color:b=v,transform:_,opacity:S}=d,[E,w]=cg(u),M=a3(r,u,d,c)||o.r||h.r;return Gn(l.createElement("circle",{})).call(Bn,h).style("fill","transparent").style("cx",E).style("cy",w).style("r",M).style("lineWidth",m).style("transform",_).style("transformOrigin",`${E} ${w}`).style("stroke",b).style(sg(t),S).style(n,b).call(Bn,o).node()}},Wv=(t,e)=>Vv(Object.assign({colorAttribute:"fill"},t),e);Wv.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const f3=(t,e)=>Vv(Object.assign({colorAttribute:"stroke"},t),e);f3.props=Object.assign({defaultMarker:"hollowPoint"},Wv.props);const Gv=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"point"},t),e);Gv.props=Object.assign({defaultMarker:"point"},ur.props);const h3=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),e);h3.props=Object.assign({defaultMarker:"plus"},ur.props);const p3=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),e);p3.props=Object.assign({defaultMarker:"diamond"},ur.props);const Rl=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"square"},t),e);Rl.props=Object.assign({defaultMarker:"square"},ur.props);const g3=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),e);g3.props=Object.assign({defaultMarker:"triangle"},ur.props);const WM=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),e);WM.props=Object.assign({defaultMarker:"hexagon"},ur.props);const v3=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),e);v3.props=Object.assign({defaultMarker:"cross"},ur.props);const m3=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),e);m3.props=Object.assign({defaultMarker:"bowtie"},ur.props);const kl=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),e);kl.props=Object.assign({defaultMarker:"hyphen"},ur.props);const $v=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"line"},t),e);$v.props=Object.assign({defaultMarker:"line"},ur.props);const Yv=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),e);Yv.props=Object.assign({defaultMarker:"tick"},ur.props);const y3=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),e);y3.props=Object.assign({defaultMarker:"triangleDown"},ur.props);const fp=()=>(t,e)=>{const{encode:n}=e,{y:r}=n;return r!==void 0?[t,e]:[t,an({},e,{encode:{y:Sf(Bs(t,0))},scale:{y:{guide:null}}})]};fp.props={};const b3=()=>(t,e)=>{const{encode:n}=e,{size:r}=n;return r!==void 0?[t,e]:[t,an({},e,{encode:{size:Mc(Bs(t,3))}})]};b3.props={};const If={hollow:lp,hollowDiamond:Pf,hollowHexagon:s3,hollowSquare:up,hollowTriangleDown:c3,hollowTriangle:l3,hollowBowtie:u3,hollowCircle:f3,point:Gv,plus:h3,diamond:p3,square:Rl,triangle:g3,hexagon:WM,cross:v3,bowtie:m3,hyphen:kl,line:$v,tick:Yv,triangleDown:y3,circle:Wv},Mo=t=>(e,n,r,o)=>{const{x:c,y:l,x1:u,y1:d,size:h,dx:p,dy:v}=r,[m,b]=o.getSize(),_=Ic(n,r,t),S=w=>{const C=+((p==null?void 0:p[w])||0),M=+((v==null?void 0:v[w])||0),L=u?(+c[w]+ +u[w])/2:+c[w],R=d?(+l[w]+ +d[w])/2:+l[w],j=L+C,z=R+M;return[j,z]},E=h?Array.from(e,w=>{const[C,M]=S(w),L=+h[w],R=L/m,j=L/b,z=[C-R,M-j],H=[C+R,M+j];return[o.map(_(z,w)),o.map(_(H,w))]}):Array.from(e,w=>[o.map(_(S(w),w))]);return[e,E]};Mo.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:If,channels:[...lo({shapes:Object.keys(If)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...Je(),{type:Lc},{type:fp}],postInference:[...pi(),{type:b3},...js()]};const Dl=(t,e)=>{const{coordinate:n}=e;return(r,o,c)=>{const{color:l,text:u="",fontSize:d,rotate:h=0,transform:p=""}=o,v={text:String(u),stroke:l,fill:l,fontSize:d},[[m,b]]=r;return Gn(new Gb).style("x",m).style("y",b).call(Bn,c).style("transform",`${p}rotate(${+h})`).style("coordCenter",n.getCenter()).call(Bn,v).call(Bn,t).node()}};Dl.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Fl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Y6(t){const e=t/Math.sqrt(2),n=t*Math.sqrt(2),[r,o]=[-e,e-n],[c,l]=[0,0],[u,d]=[e,e-n];return[["M",r,o],["A",t,t,0,1,1,u,d],["L",c,l],["Z"]]}function X6(t){const{min:e,max:n}=t.getLocalBounds();return[(e[0]+n[0])*.5,(e[1]+n[1])*.5]}const kc=ac(t=>{const e=t.attributes,{class:n,x:r,y:o,transform:c}=e,l=Fl(e,["class","x","y","transform"]),u=xn(l,"marker"),{size:d=24}=u,h=()=>Y6(d/2),p=Gn(t).maybeAppend("marker",()=>new _r({})).call(b=>b.node().update(Object.assign({symbol:h},u))).node(),[v,m]=X6(p);Gn(t).maybeAppend("text","text").style("x",v).style("y",m).call(Bn,l)}),Wo=(t,e)=>{const n=Fl(t,[]);return(r,o,c)=>{const{color:l}=c,u=Fl(c,["color"]),{color:d=l,text:h=""}=o,p={text:String(h),stroke:d,fill:d},[[v,m]]=r;return Gn(new kc).call(Bn,u).style("transform",`translate(${v},${m})`).call(Bn,p).call(Bn,n).node()}};Wo.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Xv=(t,e)=>{const{coordinate:n}=e;return(r,o,c)=>{const{color:l,text:u="",fontSize:d,rotate:h=0,transform:p=""}=o,v={text:String(u),stroke:l,fill:l,fontSize:d,textAlign:"center",textBaseline:"middle"},[[m,b]]=r;return Gn(new I.xv).style("x",m).style("y",b).call(Bn,c).style("transformOrigin","center center").style("transform",`${p}rotate(${h}deg)`).style("coordCenter",n.getCenter()).call(Bn,v).call(Bn,t).node()}};Xv.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Go=()=>(t,e)=>{const{data:n}=e;if(!Array.isArray(n)||n.some(Qh))return[t,e];const r=Array.isArray(n[0])?n:[n],o=r.map(l=>l[0]),c=r.map(l=>l[1]);return[t,an({},e,{encode:{x:Br(o),y:Br(c)}})]};Go.props={};var qv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Nl=()=>(t,e)=>{const{data:n,style:r={}}=e,o=qv(e,["data","style"]),{x:c,y:l}=r,u=qv(r,["x","y"]);if(c==null||l==null)return[t,e];const d=c||0,h=l||0;return[[0],an({},o,{data:[0],cartesian:!0,encode:{x:Br([d]),y:Br([h])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:u})]};Nl.props={};const dp={text:Dl,badge:Wo,tag:Xv},_3=t=>{const{cartesian:e=!1}=t;return e?Fv:(n,r,o,c)=>{const{x:l,y:u}=o,d=Ic(r,o,t),h=Array.from(n,p=>{const v=[+l[p],+u[p]];return[c.map(d(v,p))]});return[n,h]}};_3.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:dp,channels:[...lo({shapes:Object.keys(dp)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...Je(),{type:Go},{type:Nl}],postInference:[...pi(),...js()]};const hp=()=>(t,e)=>[t,an({scale:{x:{padding:0},y:{padding:0}}},e)];hp.props={};const x3={cell:Pc,hollow:Pv},Rf=()=>(t,e,n,r)=>{const{x:o,y:c}=n,l=e.x,u=e.y,d=Array.from(t,h=>{const p=l.getBandWidth(l.invert(+o[h])),v=u.getBandWidth(u.invert(+c[h])),m=+o[h],b=+c[h],_=[m,b],S=[m+p,b],E=[m+p,b+v],w=[m,b+v];return[_,S,E,w].map(C=>r.map(C))});return[t,d]};Rf.props={defaultShape:"cell",defaultLabelShape:"label",shape:x3,composite:!1,channels:[...lo({shapes:Object.keys(x3)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...Je(),{type:Lc},{type:fp},{type:hp}],postInference:[...pi(),...js()]};function kf(t,e,n){var r=null,o=qr(!0),c=null,l=Bu,u=null,d=fg(h);t=typeof t=="function"?t:t===void 0?dg:qr(+t),e=typeof e=="function"?e:qr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Wb:qr(+n);function h(v){var m,b,_,S=(v=Hb(v)).length,E,w=!1,C,M=new Array(S),L=new Array(S);for(c==null&&(u=l(C=d())),m=0;m<=S;++m){if(!(m<S&&o(E=v[m],m,v))===w)if(w=!w)b=m,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),_=m-1;_>=b;--_)u.point(M[_],L[_]);u.lineEnd(),u.areaEnd()}w&&(M[m]=+t(E,m,v),L[m]=+e(E,m,v),u.point(r?+r(E,m,v):M[m],n?+n(E,m,v):L[m]))}if(C)return u=null,C+""||null}function p(){return oc().defined(o).curve(l).context(c)}return h.x=function(v){return arguments.length?(t=typeof v=="function"?v:qr(+v),r=null,h):t},h.x0=function(v){return arguments.length?(t=typeof v=="function"?v:qr(+v),h):t},h.x1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:qr(+v),h):r},h.y=function(v){return arguments.length?(e=typeof v=="function"?v:qr(+v),n=null,h):e},h.y0=function(v){return arguments.length?(e=typeof v=="function"?v:qr(+v),h):e},h.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:qr(+v),h):n},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(n)},h.lineX1=function(){return p().x(r).y(e)},h.defined=function(v){return arguments.length?(o=typeof v=="function"?v:qr(!!v),h):o},h.curve=function(v){return arguments.length?(l=v,c!=null&&(u=l(c)),h):l},h.context=function(v){return arguments.length?(v==null?c=u=null:u=l(c=v),h):c},h}function q6(){var t=kf().curve(rp),e=t.curve,n=t.lineX0,r=t.lineX1,o=t.lineY0,c=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return zs(n())},delete t.lineX0,t.lineEndAngle=function(){return zs(r())},delete t.lineX1,t.lineInnerRadius=function(){return zs(o())},delete t.lineY0,t.lineOuterRadius=function(){return zs(c())},delete t.lineY1,t.curve=function(l){return arguments.length?e(Nv(l)):e()._curve},t}var S3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function K6(t,e){const n=[],r=[],o=[];let c=!1,l=null;const u=t.length/2;for(let d=0;d<u;d++){const h=t[d],p=t[d+u];if([...h,...p].some(v=>!e(v)))c=!0;else{if(n.push(h),r.push(p),c&&l){c=!1;const[v,m]=l;o.push([v,h,m,p])}l=[h,p]}}return[n.concat(r),o]}const O3=ac(t=>{const{areaPath:e,connectPath:n,areaStyle:r,connectStyle:o}=t.attributes,c=t.ownerDocument;Gn(t).maybeAppend("connect-path",()=>c.createElement("path",{})).style("d",n).call(Bn,o),Gn(t).maybeAppend("area-path",()=>c.createElement("path",{})).style("d",e).call(Bn,r)}),fa=(t,e)=>{const{curve:n,gradient:r=!1,defined:o=h=>!Number.isNaN(h)&&h!==void 0&&h!==null,connect:c=!1}=t,l=S3(t,["curve","gradient","defined","connect"]),{coordinate:u,document:d}=e;return(h,p,v)=>{const{color:m}=v,{color:b=m,seriesColor:_,seriesX:S,seriesY:E}=p,w=Zr(u),C=Zb(u,p),M=r&&_?Vd(_,S,E,r,void 0,w):b,L=Object.assign(Object.assign(Object.assign(Object.assign({},v),{stroke:M,fill:M}),C&&{transform:C}),l),[R,j]=K6(h,o),z=xn(L,"connect"),H=!!j.length,$=dt=>Gn(d.createElement("path",{})).style("d",dt||"").call(Bn,L).node();if(Ar(u)){const dt=gt=>{const It=u.getCenter(),rt=gt.slice(0,gt.length/2),lt=gt.slice(gt.length/2);return q6().angle((pt,bt)=>nc(si(rt[bt],It))).outerRadius((pt,bt)=>ni(rt[bt],It)).innerRadius((pt,bt)=>ni(lt[bt],It)).defined((pt,bt)=>[...rt[bt],...lt[bt]].every(o)).curve(n)(lt)};return!H||c&&!Object.keys(z).length?$(dt(R)):H&&!c?$(dt(h)):Gn(new O3).style("areaStyle",L).style("connectStyle",Object.assign(Object.assign({},z),l)).style("areaPath",dt(h)).style("connectPath",j.map(dt).join("")).node()}else{const dt=gt=>{const It=gt.slice(0,gt.length/2),rt=gt.slice(gt.length/2);return w?kf().y((lt,pt)=>It[pt][1]).x1((lt,pt)=>It[pt][0]).x0((lt,pt)=>rt[pt][0]).defined((lt,pt)=>[...It[pt],...rt[pt]].every(o)).curve(n)(It):kf().x((lt,pt)=>It[pt][0]).y1((lt,pt)=>It[pt][1]).y0((lt,pt)=>rt[pt][1]).defined((lt,pt)=>[...It[pt],...rt[pt]].every(o)).curve(n)(It)};return!H||c&&!Object.keys(z).length?$(dt(R)):H&&!c?$(dt(h)):Gn(new O3).style("areaStyle",L).style("connectStyle",Object.assign(Object.assign({},z),l)).style("areaPath",dt(h)).style("connectPath",j.map(dt).join("")).node()}}};fa.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const E3=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const o=Ar(n)?Iv:Bu;return fa(Object.assign({curve:o},t),e)(...r)}};E3.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"square"});var GM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Kv=(t,e)=>{const n=GM(t,[]),{coordinate:r}=e;return(...o)=>{const c=Ar(r)?jv:Zr(r)?qx:Xx;return fa(Object.assign({curve:c},n),e)(...o)}};Kv.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"smooth"});const Qv=(t,e)=>(...n)=>fa(Object.assign({curve:Qx},t),e)(...n);Qv.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"hvh"});const w3=(t,e)=>(...n)=>fa(Object.assign({curve:Uv},t),e)(...n);w3.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"vh"});const A3=(t,e)=>(...n)=>fa(Object.assign({curve:Zv},t),e)(...n);A3.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"hv"});const pp={area:E3,smooth:Kv,hvh:Qv,vh:w3,hv:A3},T3=()=>(t,e,n,r)=>{var o,c;const{x:l,y:u,y1:d,series:h}=n,{x:p,y:v}=e,m=h?Array.from(Nr(t,w=>h[w]).values()):[t],b=m.map(w=>w[0]).filter(w=>w!==void 0),_=(((o=p==null?void 0:p.getBandWidth)===null||o===void 0?void 0:o.call(p))||0)/2,S=(((c=v==null?void 0:v.getBandWidth)===null||c===void 0?void 0:c.call(v))||0)/2,E=Array.from(m,w=>{const C=w.length,M=new Array(C*2);for(let L=0;L<w.length;L++){const R=w[L];M[L]=r.map([+l[R]+_,+u[R]+S]),M[C+L]=r.map([+l[R]+_,+d[R]+S])}return M});return[b,E,m]};T3.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:pp,channels:[...lo({shapes:Object.keys(pp)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Je(),{type:cp},{type:Jh},{type:hp}],postInference:[...pi(),...Ll()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const C3=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;if(r)return[t,e];const[o]=vr(n,"y");return[t,an({},e,{encode:{y1:Br([...o])}})]};C3.props={};const M3=()=>(t,e)=>{const{encode:n}=e,{x1:r}=n;if(r)return[t,e];const[o]=vr(n,"x");return[t,an({},e,{encode:{x1:Br([...o])}})]};M3.props={};var Jv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const tm=(t,e)=>{const{arrow:n=!0,arrowSize:r="40%"}=t,o=Jv(t,["arrow","arrowSize"]),{document:c}=e;return(l,u,d)=>{const{defaultColor:h}=d,p=Jv(d,["defaultColor"]),{color:v=h,transform:m}=u,[b,_]=l,S=jo();if(S.moveTo(...b),S.lineTo(..._),n){const[E,w]=kA(b,_,{arrowSize:r});S.moveTo(...E),S.lineTo(..._),S.lineTo(...w)}return Gn(c.createElement("path",{})).call(Bn,p).style("d",S.toString()).style("stroke",v).style("transform",m).call(Bn,o).node()}};tm.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const L3=(t,e)=>{const{arrow:n=!1}=t;return(...r)=>tm(Object.assign(Object.assign({},t),{arrow:n}),e)(...r)};L3.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var P3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const I3=(t,e)=>{const n=P3(t,[]),{coordinate:r,document:o}=e;return(c,l,u)=>{const{color:d}=u,h=P3(u,["color"]),{color:p=d,transform:v}=l,[m,b]=c,_=jo();if(_.moveTo(m[0],m[1]),Ar(r)){const S=r.getCenter();_.quadraticCurveTo(S[0],S[1],b[0],b[1])}else{const S=Ub(m,b),E=ni(m,b)/2;Nu(_,m,b,S,E)}return Gn(o.createElement("path",{})).call(Bn,h).style("d",_.toString()).style("stroke",p).style("transform",v).call(Bn,n).node()}};I3.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var R3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const em=(t,e)=>{const n=R3(t,[]),{document:r}=e;return(o,c,l)=>{const{color:u}=l,d=R3(l,["color"]),{color:h=u,transform:p}=c,[v,m]=o,b=jo();return b.moveTo(v[0],v[1]),b.bezierCurveTo(v[0]/2+m[0]/2,v[1],v[0]/2+m[0]/2,m[1],m[0],m[1]),Gn(r.createElement("path",{})).call(Bn,d).style("d",b.toString()).style("stroke",h).style("transform",p).call(Bn,n).node()}};em.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var k3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function $M(t,e,n,r){const o=jo();if(Ar(n)){const c=n.getCenter(),l=ni(t,c),d=(ni(e,c)-l)*r+l;return o.moveTo(t[0],t[1]),Nu(o,t,e,c,d),o.lineTo(e[0],e[1]),o}return Zr(n)?(o.moveTo(t[0],t[1]),o.lineTo(t[0]+(e[0]-t[0])*r,t[1]),o.lineTo(t[0]+(e[0]-t[0])*r,e[1]),o.lineTo(e[0],e[1]),o):(o.moveTo(t[0],t[1]),o.lineTo(t[0],t[1]+(e[1]-t[1])*r),o.lineTo(e[0],t[1]+(e[1]-t[1])*r),o.lineTo(e[0],e[1]),o)}const D3=(t,e)=>{const{cornerRatio:n=1/3}=t,r=k3(t,["cornerRatio"]),{coordinate:o,document:c}=e;return(l,u,d)=>{const{defaultColor:h}=d,p=k3(d,["defaultColor"]),{color:v=h,transform:m}=u,[b,_]=l,S=$M(b,_,o,n);return Gn(c.createElement("path",{})).call(Bn,p).style("d",S.toString()).style("stroke",v).style("transform",m).call(Bn,r).node()}};D3.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const F3={link:L3,arc:I3,smooth:em,vhv:D3},nm=t=>(e,n,r,o)=>{const{x:c,y:l,x1:u=c,y1:d=l}=r,h=Ic(n,r,t),p=e.map(v=>[o.map(h([+c[v],+l[v]],v)),o.map(h([+u[v],+d[v]],v))]);return[e,p]};nm.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:F3,channels:[...lo({shapes:Object.keys(F3)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Je(),{type:C3},{type:M3}],postInference:[...pi(),...js()]};var YM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const N3=(t,e)=>{const{coordinate:n,document:r}=e;return(o,c,l)=>{const{color:u}=l,d=YM(l,["color"]),{color:h=u,src:p="",size:v=32,transform:m=""}=c;let{width:b=v,height:_=v}=t;const[[S,E]]=o,[w,C]=n.getSize();b=typeof b=="string"?Tf(b)*w:b,_=typeof _=="string"?Tf(_)*C:_;const M=S-Number(b)/2,L=E-Number(_)/2;return Gn(r.createElement("image",{})).call(Bn,d).style("x",M).style("y",L).style("src",p).style("stroke",h).style("transform",m).call(Bn,t).style("width",b).style("height",_).node()}};N3.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const a={image:N3},i=t=>{const{cartesian:e}=t;return e?Fv:(n,r,o,c)=>{const{x:l,y:u}=o,d=Ic(r,o,t),h=Array.from(n,p=>{const v=[+l[p],+u[p]];return[c.map(d(v,p))]});return[n,h]}};i.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:a,channels:[...lo({shapes:Object.keys(a)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...Je(),{type:Go},{type:Nl}],postInference:[...pi(),...js()]};var s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function f(t,e){const n=jo();if(Ar(e)){const r=e.getCenter(),o=[...t,t[0]],c=o.map(l=>ni(l,r));return o.forEach((l,u)=>{if(u===0){n.moveTo(l[0],l[1]);return}const d=c[u],h=t[u-1],p=c[u-1];p!==void 0&&Math.abs(d-p)<1e-10?Nu(n,h,l,r,d):n.lineTo(l[0],l[1])}),n.closePath(),n}return RA(n,t)}const g=(t,e)=>{const{coordinate:n,document:r}=e;return(o,c,l)=>{const{color:u}=l,d=s(l,["color"]),{color:h=u,transform:p}=c,v=f(o,n);return Gn(r.createElement("path",{})).call(Bn,d).style("d",v.toString()).style("stroke",h).style("fill",h).style("transform",p).call(Bn,t).node()}};g.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var y=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function x(t,e){const[n,r,o,c]=t,l=jo();if(Ar(e)){const u=e.getCenter(),d=ni(u,n);return l.moveTo(n[0],n[1]),l.quadraticCurveTo(u[0],u[1],o[0],o[1]),Nu(l,o,c,u,d),l.quadraticCurveTo(u[0],u[1],r[0],r[1]),Nu(l,r,n,u,d),l.closePath(),l}return l.moveTo(n[0],n[1]),l.bezierCurveTo(n[0]/2+o[0]/2,n[1],n[0]/2+o[0]/2,o[1],o[0],o[1]),l.lineTo(c[0],c[1]),l.bezierCurveTo(c[0]/2+r[0]/2,c[1],c[0]/2+r[0]/2,r[1],r[0],r[1]),l.lineTo(n[0],n[1]),l.closePath(),l}const O=(t,e)=>{const n=y(t,[]),{coordinate:r,document:o}=e;return(c,l,u)=>{const{color:d}=u,h=y(u,["color"]),{color:p=d,transform:v}=l,m=x(c,r);return Gn(o.createElement("path",{})).call(Bn,h).style("d",m.toString()).style("fill",p||d).style("stroke",p||d).style("transform",v).call(Bn,n).node()}};O.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const A={polygon:g,ribbon:O},P=()=>(t,e,n,r)=>{const o=Object.entries(n).filter(([u])=>u.startsWith("x")).map(([,u])=>u),c=Object.entries(n).filter(([u])=>u.startsWith("y")).map(([,u])=>u),l=t.map(u=>{const d=[];for(let h=0;h<o.length;h++){const p=o[h][u];if(p===void 0)break;const v=c[h][u];d.push(r.map([+p,+v]))}return d});return[t,l]};P.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:A,channels:[...lo({shapes:Object.keys(A)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Je()],postInference:[...pi(),...js()]};var N=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Z(t,e){const n=jo();if(!Ar(e))n.moveTo(...t[0]),n.lineTo(...t[1]),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.lineTo(...t[5]),n.lineTo(...t[6]),n.lineTo(...t[7]),n.closePath(),n.moveTo(...t[8]),n.lineTo(...t[9]),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.lineTo(...t[13]);else{const r=e.getCenter(),[o,c]=r,l=no(si(t[0],r)),u=no(si(t[1],r)),d=ni(r,t[2]),h=ni(r,t[3]),p=ni(r,t[8]),v=ni(r,t[10]),m=ni(r,t[11]);n.moveTo(...t[0]),n.arc(o,c,d,l,u),n.arc(o,c,d,u,l,!0),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.arc(o,c,h,l,u),n.lineTo(...t[6]),n.arc(o,c,v,u,l,!0),n.closePath(),n.moveTo(...t[8]),n.arc(o,c,p,l,u),n.arc(o,c,p,u,l,!0),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.arc(o,c,m,l,u),n.arc(o,c,m,u,l,!0)}return n}const W=(t,e)=>{const{coordinate:n,document:r}=e;return(o,c,l)=>{const{color:u,transform:d}=c,{color:h,fill:p=h,stroke:v=h}=l,m=N(l,["color","fill","stroke"]),b=Z(o,n);return Gn(r.createElement("path",{})).call(Bn,m).style("d",b.toString()).style("stroke",v).style("fill",u||p).style("transform",d).call(Bn,t).node()}};W.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var mt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Nt(t,e,n=4){const r=jo();if(!Ar(e))return r.moveTo(...t[2]),r.lineTo(...t[3]),r.lineTo(t[3][0]-n,t[3][1]),r.lineTo(t[10][0]-n,t[10][1]),r.lineTo(t[10][0]+n,t[10][1]),r.lineTo(t[3][0]+n,t[3][1]),r.lineTo(...t[3]),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]),r.moveTo(t[3][0]+n/2,t[8][1]),r.arc(t[3][0],t[8][1],n/2,0,Math.PI*2),r.closePath(),r;const o=e.getCenter(),[c,l]=o,u=ni(o,t[3]),d=ni(o,t[8]),h=ni(o,t[10]),p=no(si(t[2],o)),v=Math.asin(n/d),m=p-v,b=p+v;r.moveTo(...t[2]),r.lineTo(...t[3]),r.moveTo(Math.cos(m)*u+c,Math.sin(m)*u+l),r.arc(c,l,u,m,b),r.lineTo(Math.cos(b)*h+c,Math.sin(b)*h+l),r.arc(c,l,h,b,m,!0),r.lineTo(Math.cos(m)*u+c,Math.sin(m)*u+l),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]);const _=(m+b)/2;return r.moveTo(Math.cos(_)*(d+n/2)+c,Math.sin(_)*(d+n/2)+l),r.arc(Math.cos(_)*d+c,Math.sin(_)*d+l,n/2,_,Math.PI*2+_),r.closePath(),r}const Jt=(t,e)=>{const{coordinate:n,document:r}=e;return(o,c,l)=>{const{color:u,transform:d}=c,h=4,{color:p,fill:v=p,stroke:m=p}=l,b=mt(l,["color","fill","stroke"]),_=Nt(o,n,h);return Gn(r.createElement("path",{})).call(Bn,b).style("d",_.toString()).style("stroke",m).style("fill",u||v).style("transform",d).call(Bn,t).node()}};Jt.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const ye={box:W,violin:Jt},Ne=()=>(t,e,n,r)=>{const{x:o,y:c,y1:l,y2:u,y3:d,y4:h,series:p}=n,v=e.x,m=e.series,b=Array.from(t,_=>{const S=v.getBandWidth(v.invert(+o[_])),E=m?m.getBandWidth(m.invert(+(p==null?void 0:p[_]))):1,w=S*E,C=(+(p==null?void 0:p[_])||0)*S,M=+o[_]+C+w/2,[L,R,j,z,H]=[+c[_],+l[_],+u[_],+d[_],+h[_]];return[[M-w/2,H],[M+w/2,H],[M,H],[M,z],[M-w/2,z],[M+w/2,z],[M+w/2,R],[M-w/2,R],[M-w/2,j],[M+w/2,j],[M,R],[M,L],[M-w/2,L],[M+w/2,L]].map(dt=>r.map(dt))});return[t,b]};Ne.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:ye,channels:[...lo({shapes:Object.keys(ye)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...Je(),{type:Lc}],postInference:[...pi(),...Ll()],interaction:{shareTooltip:!0}};const ze={vector:tm},He=()=>(t,e,n,r)=>{const{x:o,y:c,size:l,rotate:u}=n,[d,h]=r.getSize(),p=t.map(v=>{const m=+u[v]/180*Math.PI,b=+l[v],_=b/d,S=b/h,E=_*Math.cos(m),w=-S*Math.sin(m);return[r.map([+o[v]-E/2,+c[v]-w/2]),r.map([+o[v]+E/2,+c[v]+w/2])]});return[t,p]};He.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:ze,channels:[...lo({shapes:Object.keys(ze)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...Je()],postInference:[...pi(),...js()]};var nn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function pn(t,e,n){return t.createElement("path",{style:Object.assign({d:`M ${e},${e} L -${e},0 L ${e},-${e} L 0,0 Z`,transformOrigin:"center"},n)})}function In(t,e){if(!Ar(e))return oc().x(r=>r[0]).y(r=>r[1])(t);const n=e.getCenter();return th()({startAngle:0,endAngle:Math.PI*2,outerRadius:ni(t[0],n),innerRadius:ni(t[1],n)})}function En(t,e){if(!Ar(t))return e;const[n,r]=t.getCenter();return`translate(${n}, ${r}) ${e||""}`}const Rn=(t,e)=>{const{arrow:n,arrowSize:r=4}=t,o=nn(t,["arrow","arrowSize"]),{coordinate:c,document:l}=e;return(u,d,h)=>{const{color:p,lineWidth:v}=h,m=nn(h,["color","lineWidth"]),{color:b=p,size:_=v}=d,S=n?pn(l,r,Object.assign({fill:o.stroke||b,stroke:o.stroke||b},xn(o,"arrow"))):null,E=In(u,c),w=En(c,d.transform);return Gn(l.createElement("path",{})).call(Bn,m).style("d",E).style("stroke",b).style("lineWidth",_).style("transform",w).style("markerEnd",S).call(Bn,o).node()}};Rn.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const rr=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(Qh)?[t,e]:[t,an({},e,{encode:{x:Br(n)}})]};rr.props={};const Tr={line:Rn},$n=t=>(e,n,r,o)=>{const{x:c}=r,l=Ic(n,r,an({style:{bandOffset:0}},t)),u=Array.from(e,d=>{const h=[c[d],1],p=[c[d],0];return[h,p].map(v=>o.map(l(v,d)))});return[e,u]};$n.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Tr,channels:[...Pl({shapes:Object.keys(Tr)}),{name:"x",required:!0}],preInference:[...Je(),{type:rr}],postInference:[...pi()]};const cr=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(Qh)?[t,e]:[t,an({},e,{encode:{y:Br(n)}})]};cr.props={};const Lr={line:Rn},$o=t=>(e,n,r,o)=>{const{y:c}=r,l=Ic(n,r,an({style:{bandOffset:0}},t)),u=Array.from(e,d=>{const h=[0,c[d]],p=[1,c[d]];return[h,p].map(v=>o.map(l(v,d)))});return[e,u]};$o.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Lr,channels:[...Pl({shapes:Object.keys(Lr)}),{name:"y",required:!0}],preInference:[...Je(),{type:cr}],postInference:[...pi()]};var Dc=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Bl(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}function jl(t){return oc().x(e=>e[0]).y(e=>e[1])(t)}function zl(t,e,n,r,o,c,l=0){const[[u,d],[h,p]]=e;if(Zr(t)){const E=u+n,w=h+r,C=E+l,M=d+o,L=p+c;return[[E,M],[C,M],[C,L],[w,L]]}const v=d-n,m=p-r,b=v-l,_=u-o,S=h-c;return[[_,v],[_,b],[S,b],[S,m]]}const Yo=(t,e)=>{const{offsetX:n=0,sourceOffsetX:r=n,targetOffsetX:o=n,offsetY:c=0,sourceOffsetY:l=c,targetOffsetY:u=c,connectLength1:d,endMarker:h=!0}=t,p=Dc(t,["offsetX","sourceOffsetX","targetOffsetX","offsetY","sourceOffsetY","targetOffsetY","connectLength1","endMarker"]),{coordinate:v}=e;return(m,b,_)=>{const{color:S,connectLength1:E}=_,w=Dc(_,["color","connectLength1"]),{color:C,transform:M}=b,L=zl(v,m,l,u,r,o,d!=null?d:E),R=xn(Object.assign(Object.assign({},p),_),"endMarker");return Gn(new I.y$).call(Bn,w).style("d",jl(L)).style("stroke",C||S).style("transform",M).style("markerEnd",h?new _r({className:"marker",style:Object.assign(Object.assign({},R),{symbol:Bl})}):null).call(Bn,p).node()}};Yo.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const B3={connector:Yo},j3=(...t)=>nm(...t);j3.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:B3,channels:[...Pl({shapes:Object.keys(B3)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Je()],postInference:[...pi()]};function z3(t,e,n,r){if(e)return()=>[0,1];const{[t]:o,[`${t}1`]:c}=n;return l=>{var u;const d=((u=r.getBandWidth)===null||u===void 0?void 0:u.call(r,r.invert(+c[l])))||0;return[o[l],c[l]+d]}}function rm(t={}){const{extendX:e=!1,extendY:n=!1}=t;return(r,o,c,l)=>{const u=z3("x",e,c,o.x),d=z3("y",n,c,o.y),h=Array.from(r,p=>{const[v,m]=u(p),[b,_]=d(p);return[[v,b],[m,b],[m,_],[v,_]].map(M=>l.map(M))});return[r,h]}}const U3={range:Pc},Z3=()=>rm();Z3.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:U3,channels:[...Pl({shapes:Object.keys(U3)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Je()],postInference:[...pi()]};const H3=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(Qh))){const r=(o,c)=>Array.isArray(o[0])?o.map(l=>l[c]):[o[c]];return[t,an({},e,{encode:{x:Br(r(n,0)),x1:Br(r(n,1))}})]}return[t,e]};H3.props={};const V3={range:Pc},W3=()=>rm({extendY:!0});W3.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:V3,channels:[...Pl({shapes:Object.keys(V3)}),{name:"x",required:!0}],preInference:[...Je(),{type:H3}],postInference:[...pi()]};const zn=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(Qh))){const r=(o,c)=>Array.isArray(o[0])?o.map(l=>l[c]):[o[c]];return[t,an({},e,{encode:{y:Br(r(n,0)),y1:Br(r(n,1))}})]}return[t,e]};zn.props={};const gr={range:Pc},xr=()=>rm({extendX:!0});xr.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:gr,channels:[...Pl({shapes:Object.keys(gr)}),{name:"y",required:!0}],preInference:[...Je(),{type:zn}],postInference:[...pi()]};var On=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const oo=(t,e)=>{const{arrow:n,colorAttribute:r}=t,o=On(t,["arrow","colorAttribute"]),{coordinate:c,document:l}=e;return(u,d,h)=>{const{color:p,stroke:v}=h,m=On(h,["color","stroke"]),{d:b,color:_=p}=d,[S,E]=c.getSize();return Gn(l.createElement("path",{})).call(Bn,m).style("d",typeof b=="function"?b({width:S,height:E}):b).style(r,_).call(Bn,o).node()}};oo.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const $r=(t,e)=>oo(Object.assign({colorAttribute:"fill"},t),e);$r.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const bo=(t,e)=>oo(Object.assign({fill:"none",colorAttribute:"stroke"},t),e);bo.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const _o={path:$r,hollow:bo},Zs=t=>(e,n,r,o)=>[e,e.map(()=>[[0,0]])];Zs.props={defaultShape:"path",defaultLabelShape:"label",shape:_o,composite:!1,channels:[...lo({shapes:Object.keys(_o)}),{name:"d",scale:"identity"}],preInference:[...Je()],postInference:[...pi()]};var G3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Q6=(t,e)=>{const{render:n}=t,r=G3(t,["render"]);return o=>{const[[c,l]]=o;return n(Object.assign(Object.assign({},r),{x:c,y:l}),e)}};Q6.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const J6=()=>(t,e)=>{const{style:n={}}=e;return[t,an({},e,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,o])=>[r,()=>o])))})]};J6.props={};const ZD={shape:Q6},t7=t=>{const{cartesian:e}=t;return e?Fv:(n,r,o,c)=>{const{x:l,y:u}=o,d=Ic(r,o,t),h=Array.from(n,p=>{const v=[+l[p],+u[p]];return[c.map(d(v,p))]});return[n,h]}};t7.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:ZD,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Je(),{type:Go},{type:Nl},{type:J6}]};var HD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const e7=(t,e)=>{const{document:n}=e;return(r,o,c)=>{const{transform:l}=o,{color:u}=c,d=HD(c,["color"]),{color:h=u}=o,[p,...v]=r,m=jo();return m.moveTo(...p),v.forEach(([b,_])=>{m.lineTo(b,_)}),m.closePath(),Gn(n.createElement("path",{})).call(Bn,d).style("d",m.toString()).style("stroke",h||u).style("fill",h||u).style("fillOpacity",.4).style("transform",l).call(Bn,t).node()}};e7.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const n7={density:e7},r7=()=>(t,e,n,r)=>{const{x:o,series:c}=n,l=Object.entries(n).filter(([v])=>v.startsWith("y")).map(([,v])=>v),u=Object.entries(n).filter(([v])=>v.startsWith("size")).map(([,v])=>v);if(o===void 0||l===void 0||u===void 0)throw new Error("Missing encode for x or y or size channel.");const d=e.x,h=e.series,p=Array.from(t,v=>{const m=d.getBandWidth(d.invert(+o[v])),b=h?h.getBandWidth(h.invert(+(c==null?void 0:c[v]))):1,_=m*b,S=(+(c==null?void 0:c[v])||0)*m,E=+o[v]+S+_/2;return[...l.map((C,M)=>[E+ +u[M][v]/t.length,+l[M][v]]),...l.map((C,M)=>[E-+u[M][v]/t.length,+l[M][v]]).reverse()].map(C=>r.map(C))});return[t,p]};r7.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:n7,channels:[...lo({shapes:Object.keys(n7)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...Je(),{type:Jh},{type:Lc}],postInference:[...pi(),...Ll()],interaction:{shareTooltip:!0}};function VD(t){return typeof t=="string"?t.split(" ").map(e=>{const[n,r]=e.split(":");return[+n,r]}):t}function $3(t,e,n){const r=t?t():document.createElement("canvas");return r.width=e,r.height=n,r}const WD=sd((t,e,n)=>{const r=$3(n,t*2,t*2),o=r.getContext("2d"),c=t,l=t;if(e===1)o.beginPath(),o.arc(c,l,t,0,2*Math.PI,!1),o.fillStyle="rgba(0,0,0,1)",o.fill();else{const u=o.createRadialGradient(c,l,t*e,c,l,t);u.addColorStop(0,"rgba(0,0,0,1)"),u.addColorStop(1,"rgba(0,0,0,0)"),o.fillStyle=u,o.fillRect(0,0,2*t,2*t)}return r},t=>`${t}`);function GD(t,e){const r=$3(e,256,1).getContext("2d"),o=r.createLinearGradient(0,0,256,1);return VD(t).forEach(([c,l])=>{o.addColorStop(c,l)}),r.fillStyle=o,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function $D(t,e,n,r,o,c){const{blur:l}=o;let u=r.length;for(;u--;){const{x:d,y:h,value:p,radius:v}=r[u],m=Math.min(p,n),b=d-v,_=h-v,S=WD(v,1-l,c),E=(m-e)/(n-e);t.globalAlpha=Math.max(E,.001),t.drawImage(S,b,_)}return t}function YD(t,e,n,r,o){const{minOpacity:c,opacity:l,maxOpacity:u,useGradientOpacity:d}=o,h=0,p=0,v=e,m=n,b=t.getImageData(h,p,v,m),_=b.data,S=_.length;for(let E=3;E<S;E+=4){const w=_[E],C=w*4;if(!C)continue;const M=l||Math.max(0,Math.min(u,Math.max(c,w)));_[E-3]=r[C],_[E-2]=r[C+1],_[E-1]=r[C+2],_[E]=d?r[C+3]:M}return b}function XD(t,e,n,r,o,c,l){const u=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},c);u.minOpacity*=255,u.opacity*=255,u.maxOpacity*=255;const h=$3(l,t,e).getContext("2d"),p=GD(u.gradient,l);h.clearRect(0,0,t,e),$D(h,n,r,o,u,l);const v=YD(h,t,e,p,u),b=$3(l,t,e).getContext("2d");return b.putImageData(v,0,0),b}var qD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function KD(t,e){return Object.keys(t).reduce((n,r)=>{const o=t[r];return e(o,r)||(n[r]=o),n},{})}const i7=(t,e)=>{const{gradient:n,opacity:r,maxOpacity:o,minOpacity:c,blur:l,useGradientOpacity:u}=t,d=qD(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:h,createCanvas:p,document:v}=e;return(m,b,_)=>{const{transform:S}=b,[E,w]=h.getSize(),C=m.map(z=>({x:z[0],y:z[1],value:z[2],radius:z[3]})),M=To(m,z=>z[2]),L=wr(m,z=>z[2]),j=E&&w?XD(E,w,M,L,C,KD({gradient:n,opacity:r,minOpacity:c,maxOpacity:o,blur:l,useGradientOpacity:u},z=>z===void 0),p):{canvas:null};return Gn(v.createElement("image",{})).call(Bn,_).style("x",0).style("y",0).style("width",E).style("height",w).style("src",j.canvas.toDataURL()).style("transform",S).call(Bn,d).node()}};i7.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const o7={heatmap:i7},a7=t=>(e,n,r,o)=>{const{x:c,y:l,size:u,color:d}=r,h=Array.from(e,p=>{const v=u?+u[p]:40;return[...o.map([+c[p],+l[p]]),d[p],v]});return[[0],[h]]};a7.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:o7,channels:[...lo({shapes:Object.keys(o7)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...Je(),{type:Lc},{type:fp}],postInference:[...pi(),...js()]};var QD=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},JD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function t9(t,e){const{text:n="text",value:r="value"}=e;return t.map(o=>Object.assign(Object.assign({},o),{text:o[n],value:o[r]}))}const e9=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:t=>t.fontFamily},tooltip:{items:[t=>({name:t.text,value:t.value})]}}),XM=(t,e)=>QD(void 0,void 0,void 0,function*(){const{width:n,height:r}=e,{data:o,encode:c={},scale:l,style:u={},layout:d={}}=t,h=JD(t,["data","encode","scale","style","layout"]),p=t9(o,c);return an({},e9(),Object.assign(Object.assign({data:{value:p,transform:[Object.assign({type:"wordCloud",size:[n,r]},d)]},encode:c,scale:l,style:u},h),{axis:!1}))});XM.props={};const s7=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];s7.props={};const c7=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];c7.props={};const l7=t=>new eo(t);l7.props={};const u7=t=>new ed(t);u7.props={};const f7=t=>new is(t);f7.props={};class Y3 extends eu{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:eg}}map(e){return W0(e)?e:this.options.unknown}invert(e){return this.map(e)}clone(){return new Y3(this.options)}getTicks(){const{domain:e,tickCount:n,tickMethod:r}=this.options,[o,c]=e;return!(0,ie.Z)(o)||!(0,ie.Z)(c)?[]:r(o,c,n)}}const d7=t=>new Y3(t);d7.props={};class qM extends is{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:Wc,paddingInner:1,paddingOuter:0}}constructor(e){super(e)}getPaddingInner(){return 1}clone(){return new qM(this.options)}update(e){super.update(e)}getPaddingOuter(){return this.options.padding}}const h7=t=>new qM(t);h7.props={};var p7=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Ul="\\d\\d?",Zl="\\d\\d",n9="\\d{3}",r9="\\d{4}",im="[^\\s]+",g7=/\[([^]*?)\]/gm;function v7(t,e){for(var n=[],r=0,o=t.length;r<o;r++)n.push(t[r].substr(0,e));return n}var m7=function(t){return function(e,n){var r=n[t].map(function(c){return c.toLowerCase()}),o=r.indexOf(e.toLowerCase());return o>-1?o:null}};function Df(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,o=e;r<o.length;r++){var c=o[r];for(var l in c)t[l]=c[l]}return t}var y7=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b7=["January","February","March","April","May","June","July","August","September","October","November","December"],i9=v7(b7,3),o9=v7(y7,3),_7={dayNamesShort:o9,dayNames:y7,monthNamesShort:i9,monthNames:b7,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},X3=Df({},_7),a9=function(t){return X3=Df(X3,t)},x7=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Xo=function(t,e){for(e===void 0&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},s9={D:function(t){return String(t.getDate())},DD:function(t){return Xo(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return Xo(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return Xo(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return Xo(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return Xo(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return Xo(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return Xo(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return Xo(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return Xo(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return Xo(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return Xo(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Xo(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Xo(Math.floor(Math.abs(e)/60),2)+":"+Xo(Math.abs(e)%60,2)}},S7=function(t){return+t-1},O7=[null,Ul],E7=[null,im],w7=["isPm",im,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],A7=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?n:-n}return 0}],c9={D:["day",Ul],DD:["day",Zl],Do:["day",Ul+im,function(t){return parseInt(t,10)}],M:["month",Ul,S7],MM:["month",Zl,S7],YY:["year",Zl,function(t){var e=new Date,n=+(""+e.getFullYear()).substr(0,2);return+(""+(+t>68?n-1:n)+t)}],h:["hour",Ul,void 0,"isPm"],hh:["hour",Zl,void 0,"isPm"],H:["hour",Ul],HH:["hour",Zl],m:["minute",Ul],mm:["minute",Zl],s:["second",Ul],ss:["second",Zl],YYYY:["year",r9],S:["millisecond","\\d",function(t){return+t*100}],SS:["millisecond",Zl,function(t){return+t*10}],SSS:["millisecond",n9],d:O7,dd:O7,ddd:E7,dddd:E7,MMM:["month",im,m7("monthNamesShort")],MMMM:["month",im,m7("monthNames")],a:w7,A:w7,ZZ:A7,Z:A7},q3={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},l9=function(t){return Df(q3,t)},T7=function(t,e,n){if(e===void 0&&(e=q3.default),n===void 0&&(n={}),typeof t=="number"&&(t=new Date(t)),Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=q3[e]||e;var r=[];e=e.replace(g7,function(c,l){return r.push(l),"@@@"});var o=Df(Df({},X3),n);return e=e.replace(p7,function(c){return s9[c](t,o)}),e.replace(/@@@/g,function(){return r.shift()})};function u9(t,e,n){if(n===void 0&&(n={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=q3[e]||e,t.length>1e3)return null;var r=new Date,o={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},c=[],l=[],u=e.replace(g7,function(L,R){return l.push(x7(R)),"@@@"}),d={},h={};u=x7(u).replace(p7,function(L){var R=c9[L],j=R[0],z=R[1],H=R[3];if(d[j])throw new Error("Invalid format. "+j+" specified twice in format");return d[j]=!0,H&&(h[H]=!0),c.push(R),"("+z+")"}),Object.keys(h).forEach(function(L){if(!d[L])throw new Error("Invalid format. "+L+" is required in specified format")}),u=u.replace(/@@@/g,function(){return l.shift()});var p=t.match(new RegExp(u,"i"));if(!p)return null;for(var v=Df(Df({},X3),n),m=1;m<p.length;m++){var b=c[m-1],_=b[0],S=b[2],E=S?S(p[m],v):+p[m];if(E==null)return null;o[_]=E}o.isPm===1&&o.hour!=null&&+o.hour!=12?o.hour=+o.hour+12:o.isPm===0&&+o.hour==12&&(o.hour=0);var w;if(o.timezoneOffset==null){w=new Date(o.year,o.month,o.day,o.hour,o.minute,o.second,o.millisecond);for(var C=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],m=0,M=C.length;m<M;m++)if(d[C[m][0]]&&o[C[m][0]]!==w[C[m][1]]())return null}else if(w=new Date(Date.UTC(o.year,o.month,o.day,o.hour,o.minute-o.timezoneOffset,o.second,o.millisecond)),o.month>11||o.month<0||o.day>31||o.day<1||o.hour>23||o.hour<0||o.minute>59||o.minute<0||o.second>59||o.second<0)return null;return w}var YG={format:T7,parse:u9,defaultI18n:_7,setGlobalDateI18n:a9,setGlobalDateMasks:l9},XG=null;const om=1e3,am=om*60,sm=am*60,Ff=sm*24,cm=Ff*7,C7=Ff*30,M7=Ff*365;function xo(t,e,n,r){const o=(h,p)=>{const v=b=>r(b)%p===0;let m=p;for(;m&&!v(h);)n(h,-1),m-=1;return h},c=(h,p)=>{p&&o(h,p),e(h)},l=(h,p)=>{const v=new Date(+h);return c(v,p),v},u=(h,p)=>{const v=new Date(+h-1);return c(v,p),n(v,p),c(v),v};return{ceil:u,floor:l,range:(h,p,v,m)=>{const b=[],_=Math.floor(v),S=m?u(h,v):u(h);for(let E=S;E<p;n(E,_),c(E))b.push(new Date(+E));return b},duration:t}}const f9=xo(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),d9=xo(om,t=>{t.setMilliseconds(0)},(t,e=1)=>{t.setTime(+t+om*e)},t=>t.getSeconds()),h9=xo(am,t=>{t.setSeconds(0,0)},(t,e=1)=>{t.setTime(+t+am*e)},t=>t.getMinutes()),p9=xo(sm,t=>{t.setMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+sm*e)},t=>t.getHours()),g9=xo(Ff,t=>{t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Ff*e)},t=>t.getDate()-1),L7=xo(C7,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getMonth();t.setMonth(n+e)},t=>t.getMonth()),v9=xo(cm,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,e=1)=>{t.setDate(t.getDate()+7*e)},t=>{const e=L7.floor(t),n=new Date(+t);return Math.floor((+n-+e)/cm)}),m9=xo(M7,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getFullYear();t.setFullYear(n+e)},t=>t.getFullYear()),P7={millisecond:f9,second:d9,minute:h9,hour:p9,day:g9,week:v9,month:L7,year:m9},y9=xo(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),b9=xo(om,t=>{t.setUTCMilliseconds(0)},(t,e=1)=>{t.setTime(+t+om*e)},t=>t.getUTCSeconds()),_9=xo(am,t=>{t.setUTCSeconds(0,0)},(t,e=1)=>{t.setTime(+t+am*e)},t=>t.getUTCMinutes()),x9=xo(sm,t=>{t.setUTCMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+sm*e)},t=>t.getUTCHours()),S9=xo(Ff,t=>{t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Ff*e)},t=>t.getUTCDate()-1),I7=xo(C7,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCMonth();t.setUTCMonth(n+e)},t=>t.getUTCMonth()),O9=xo(cm,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+cm*e)},t=>{const e=I7.floor(t),n=new Date(+t);return Math.floor((+n-+e)/cm)}),E9=xo(M7,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCFullYear();t.setUTCFullYear(n+e)},t=>t.getUTCFullYear()),R7={millisecond:y9,second:b9,minute:_9,hour:x9,day:S9,week:O9,month:I7,year:E9};function w9(t){const e=t?R7:P7,{year:n,month:r,week:o,day:c,hour:l,minute:u,second:d,millisecond:h}=e;return{tickIntervals:[[d,1],[d,5],[d,15],[d,30],[u,1],[u,5],[u,15],[u,30],[l,1],[l,3],[l,6],[l,12],[c,1],[c,2],[o,1],[r,1],[r,3],[n,1]],year:n,millisecond:h}}function k7(t,e,n,r,o){const c=+t,l=+e,{tickIntervals:u,year:d,millisecond:h}=w9(o),p=([E,w])=>E.duration*w,v=r?(l-c)/r:n||5,m=r||(l-c)/v,b=u.length,_=wu(u,m,0,b,p);let S;if(_===b){const E=e0(c/d.duration,l/d.duration,v);S=[d,E]}else if(_){const E=m/p(u[_-1])<p(u[_])/m,[w,C]=E?u[_-1]:u[_],M=r?Math.ceil(r/w.duration):C;S=[w,M]}else{const E=Math.max(e0(c,l,v),1);S=[h,E]}return S}const A9=(t,e,n,r,o)=>{const c=t>e,l=c?e:t,u=c?t:e,[d,h]=k7(l,u,n,r,o),p=d.range(l,new Date(+u+1),h,!0);return c?p.reverse():p},T9=(t,e,n,r,o)=>{const c=t>e,l=c?e:t,u=c?t:e,[d,h]=k7(l,u,n,r,o),p=[d.floor(l,h),d.ceil(u,h)];return c?p.reverse():p};function C9(t,e){const{second:n,minute:r,hour:o,day:c,week:l,month:u,year:d}=e;return n.floor(t)<t?".SSS":r.floor(t)<t?":ss":o.floor(t)<t?"hh:mm":c.floor(t)<t?"hh A":u.floor(t)<t?l.floor(t)<t?"MMM DD":"ddd DD":d.floor(t)<t?"MMMM":"YYYY"}function M9(t){const e=t.getTimezoneOffset(),n=new Date(t);return n.setMinutes(n.getMinutes()+e,n.getSeconds(),n.getMilliseconds()),n}class KM extends Rd{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:A9,interpolate:hs,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return T9}getTickMethodOptions(){const{domain:e,tickCount:n,tickInterval:r,utc:o}=this.options,c=e[0],l=e[e.length-1];return[c,l,n,r,o]}getFormatter(){const{mask:e,utc:n}=this.options,r=n?R7:P7,o=n?M9:Ga;return c=>T7(o(c),e||C9(c,r))}clone(){return new KM(this.options)}}const D7=t=>new KM(t);D7.props={};const F7=t=>e=>-t(-e),QM=(t,e)=>{const n=Math.log(t),r=t===Math.E?Math.log:t===10?Math.log10:t===2?Math.log2:o=>Math.log(o)/n;return e?F7(r):r},JM=(t,e)=>{const n=t===Math.E?Math.exp:r=>Fi(t,r);return e?F7(n):n},L9=(t,e,n,r=10)=>{const o=t<0,c=JM(r,o),l=QM(r,o),u=e<t,d=u?e:t,h=u?t:e;let p=l(d),v=l(h),m=[];if(!(r%1)&&v-p<n){if(p=Math.floor(p),v=Math.ceil(v),o)for(;p<=v;p+=1){const b=c(p);for(let _=r-1;_>=1;_-=1){const S=b*_;if(S>h)break;S>=d&&m.push(S)}}else for(;p<=v;p+=1){const b=c(p);for(let _=1;_<r;_+=1){const S=b*_;if(S>h)break;S>=d&&m.push(S)}}m.length*2<n&&(m=os(d,h,n))}else{const b=n===-1?v-p:Math.min(v-p,n);m=os(p,v,b).map(c)}return u?m.reverse():m},P9=(t,e,n,r)=>{const o=t<0,c=QM(r,o),l=JM(r,o),u=t>e,d=u?e:t,h=u?t:e,p=[l(Math.floor(c(d))),l(Math.ceil(c(h)))];return u?p.reverse():p};class t4 extends Rd{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:Tu,tickMethod:L9,tickCount:5}}chooseNice(){return P9}getTickMethodOptions(){const{domain:e,tickCount:n,base:r}=this.options,o=e[0],c=e[e.length-1];return[o,c,n,r]}chooseTransforms(){const{base:e,domain:n}=this.options,r=n[0]<0;return[QM(e,r),JM(e,r)]}clone(){return new t4(this.options)}}const N7=t=>new t4(t);N7.props={};const I9=t=>e=>e<0?-Fi(-e,t):Fi(e,t),R9=t=>e=>e<0?-Fi(-e,1/t):Fi(e,1/t),k9=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);class K3 extends Rd{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:Tu,tickMethod:os,tickCount:5}}constructor(e){super(e)}chooseTransforms(){const{exponent:e}=this.options;if(e===1)return[Ga,Ga];const n=e===.5?k9:I9(e),r=R9(e);return[n,r]}clone(){return new K3(this.options)}}const B7=t=>new K3(t);B7.props={};class e4 extends K3{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Tu,tickMethod:os,tickCount:5,exponent:.5}}constructor(e){super(e)}update(e){super.update(e)}clone(){return new e4(this.options)}}const j7=t=>new e4(t);j7.props={};const z7=t=>new il(t);z7.props={};const U7=t=>new Du(t);U7.props={};const Z7=t=>new ku(t);Z7.props={};const D9=t=>e=>{const n=t(e);return(0,ie.Z)(n)?Math.round(n):n};function F9(t,e){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=t(r)},n.prototype.composeOutput=function(r,o){const{domain:c,interpolator:l,round:u}=this.getOptions(),d=e(c.map(r)),h=u?D9(l):l;this.output=ds(h,d,o,r)},n.prototype.invert=void 0}}var N9=function(t,e,n,r){var o=arguments.length,c=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(c=(o<3?l(c):o>3?l(e,n,c):l(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},n4;function B9(t){return[t(0),t(1)]}const j9=t=>{const[e,n]=t;return ds(hs(0,1),fs(e,n))};let r4=n4=class extends eo{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Ga,tickMethod:os,tickCount:5}}constructor(e){super(e)}clone(){return new n4(this.options)}};r4=n4=N9([F9(B9,j9)],r4);const H7=t=>new r4(t);H7.props={};const V7=t=>new nu(t);V7.props={};function i4({colorDefault:t,colorBlack:e,colorWhite:n,colorStroke:r,colorBackground:o,padding1:c,padding2:l,padding3:u,alpha90:d,alpha65:h,alpha45:p,alpha25:v,alpha10:m,category10:b,category20:_,sizeDefault:S=1,padding:E="auto",margin:w=16}){return{padding:E,margin:w,size:S,color:t,category10:b,category20:_,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:o,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:e,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:e,gridStrokeOpacity:m,labelAlign:"horizontal",labelFill:e,labelOpacity:p,labelFontSize:12,labelFontWeight:"normal",labelSpacing:c,line:!1,lineLineWidth:.5,lineStroke:e,lineStrokeOpacity:p,tickLength:4,tickLineWidth:1,tickStroke:e,tickOpacity:p,titleFill:e,titleOpacity:d,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:e,itemLabelFillOpacity:d,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[c,c],itemValueFill:e,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:e,navButtonFillOpacity:.65,navPageNumFill:e,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:e,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:e,tickStrokeOpacity:.25,rowPadding:c,colPadding:l,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:e,handleLabelFillOpacity:p,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:e,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:e,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:e,labelFillOpacity:p,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:d,tickStroke:e,tickStrokeOpacity:p},label:{fill:e,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:e,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:e,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:t,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:e,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:e,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:e,titleFillOpacity:d,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:e,subtitleFillOpacity:h,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}}}const z9=i4({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),o4=t=>an({},z9,t);o4.props={};const W7=t=>an({},o4(),{category10:"category10",category20:"category20"},t);W7.props={};const U9=i4({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),G7=t=>an({},U9,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},t),$7=t=>Object.assign({},G7(),{category10:"category10",category20:"category20"},t);$7.props={};const Z9=i4({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),Y7=t=>an({},Z9,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(e,n)=>n!==0},axisRight:{gridFilter:(e,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t);Y7.props={};const X7=t=>(...e)=>{const n=ps(Object.assign({},{crossPadding:50},t))(...e);return tb(n,t),n};X7.props=Object.assign(Object.assign({},ps.props),{defaultPosition:"bottom"});function JG(){}const q7=t=>(...e)=>{const n=ps(Object.assign({},{crossPadding:10},t))(...e);return tb(n,t),n};q7.props=Object.assign(Object.assign({},ps.props),{defaultPosition:"left"});var a4=function(){},H9=function(t,e,n){var r=t,o=(0,Wt.Z)(e)?e.split("."):e;return o.forEach(function(c,l){l<o.length-1?((0,au.Z)(r[c])||(r[c]=(0,ie.Z)(o[l+1])?[]:{}),r=r[c]):r[c]=n}),t};function V9(t,e){return t.reduce(function(n,r){return(n[r[e]]=n[r[e]]||[]).push(r),n},{})}function W9(t){var e;return((e=t[0])===null||e===void 0?void 0:e.map(function(n,r){return t.map(function(o){return o[r]})}))||[]}var Ia=No({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),G9=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:gb(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(o,c){return"".concat(o,"/").concat(c)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new I.ZA({class:Ia.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new I.ZA({class:Ia.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(e.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return(0,cn.Z)(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var n=this.pageViews,r=(0,X.CR)(W9(n.map(function(v){var m=v.getBBox(),b=m.width,_=m.height;return[b,_]})).map(function(v){return Math.max.apply(Math,(0,X.ev)([],(0,X.CR)(v),!1))}),2),o=r[0],c=r[1],l=this.attributes,u=l.pageWidth,d=u===void 0?o:u,h=l.pageHeight,p=h===void 0?c:h;return{pageWidth:d,pageHeight:p}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=t.prototype.getBBox.call(this),r=n.x,o=n.y,c=this.controllerShape,l=this.pageShape,u=l.pageWidth,d=l.pageHeight;return new Xr(r,o,u+c.width,d)},e.prototype.goTo=function(n){var r=this,o=this.attributes.animate,c=this,l=c.currPage,u=c.playState,d=c.playWindow,h=c.pageViews;if(u!=="idle"||n<0||h.length<=0||n>=h.length)return null;h[l].setLocalPosition(0,0),this.prepareFollowingPage(n);var p=(0,X.CR)(this.getFollowingPageDiff(n),2),v=p[0],m=p[1];this.playState="running";var b=O0(d,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-v,", ").concat(-m,")")}],o);return Qs(b,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),b},e.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,o=this.currPage;if(!n&&o<=0)return null;var c=n?(o-1+r)%r:(0,cn.Z)(o-1,0,r);return this.goTo(c)},e.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,o=this.currPage;if(!n&&o>=r-1)return null;var c=n?(o+1)%r:(0,cn.Z)(o+1,0,r);return this.goTo(c)},e.prototype.renderClipPath=function(n){var r=this.pageShape,o=r.pageWidth,c=r.pageHeight;if(!o||!c){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(Ia.clipPath,"rect").styles({width:o,height:c}),this.contentGroup.attr("clipPath",this.clipPath.node())},e.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,o){n.includes(o)?hu(r):Ha(r)})},e.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,o=n.nextBtnGroup,c=n.pageInfoGroup,l=this.attributes,u=l.orientation,d=l.controllerPadding,h=c.getBBox(),p=h.width,v=h.height,m=(0,X.CR)(u==="horizontal"?[-180,0]:[-90,90],2),b=m[0],_=m[1];r.setLocalEulerAngles(b),o.setLocalEulerAngles(_);var S=r.getBBox(),E=S.width,w=S.height,C=o.getBBox(),M=C.width,L=C.height,R=Math.max(E,p,M),j=u==="horizontal"?{offset:[[0,0],[E/2+d,0],[E+p+d*2,0]],textAlign:"start"}:{offset:[[R/2,-w-d],[R/2,0],[R/2,L+d]],textAlign:"center"},z=(0,X.CR)(j.offset,3),H=(0,X.CR)(z[0],2),$=H[0],dt=H[1],gt=(0,X.CR)(z[1],2),It=gt[0],rt=gt[1],lt=(0,X.CR)(z[2],2),pt=lt[0],bt=lt[1],Ht=j.textAlign,Rt=c.querySelector("text");Rt&&(Rt.style.textAlign=Ht),r.setLocalPosition($,dt),c.setLocalPosition(It,rt),o.setLocalPosition(pt,bt)},e.prototype.updatePageInfo=function(){var n,r=this,o=r.currPage,c=r.pageViews,l=r.attributes.formatter;c.length<2||((n=this.pageInfoGroup.querySelector(Ia.pageInfo.class))===null||n===void 0||n.attr("text",l(o+1,c.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var o=this.attributes.orientation,c=this.pageShape,l=c.pageWidth,u=c.pageHeight,d=n<r?-1:1;return o==="horizontal"?[d*l,0]:[0,d*u]},e.prototype.prepareFollowingPage=function(n){var r=this,o=r.currPage,c=r.pageViews;if(this.setVisiblePages([n,o]),n!==o){var l=(0,X.CR)(this.getFollowingPageDiff(n),2),u=l[0],d=l[1];c[n].setLocalPosition(u,d)}},e.prototype.renderController=function(n){var r=this,o=this.attributes.controllerSpacing,c=this.pageShape,l=c.pageWidth,u=c.pageHeight,d=this.pageViews.length>=2,h=n.maybeAppendByClassName(Ia.controller,"g");if(gd(h.node(),d),!!d){var p=sr(this.attributes,"button"),v=sr(this.attributes,"pageNum"),m=(0,X.CR)(Wa(p),2),b=m[0],_=m[1],S=b.size,E=(0,X._T)(b,["size"]),w=!h.select(Ia.prevBtnGroup.class).node(),C=h.maybeAppendByClassName(Ia.prevBtnGroup,"g").styles(_);this.prevBtnGroup=C.node();var M=C.maybeAppendByClassName(Ia.prevBtn,"path"),L=h.maybeAppendByClassName(Ia.nextBtnGroup,"g").styles(_);this.nextBtnGroup=L.node();var R=L.maybeAppendByClassName(Ia.nextBtn,"path");[M,R].forEach(function(z){z.styles((0,X.pi)((0,X.pi)({},E),{transformOrigin:"center"})),C1(z.node(),S,!0)});var j=h.maybeAppendByClassName(Ia.pageInfoGroup,"g");this.pageInfoGroup=j.node(),j.maybeAppendByClassName(Ia.pageInfo,"text").styles(v),this.updatePageInfo(),h.node().setLocalPosition(l+o,u/2),w&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},e.prototype.render=function(n,r){var o=n.x,c=o===void 0?0:o,l=n.y,u=l===void 0?0:l;this.attr("transform","translate(".concat(c,", ").concat(u,")"));var d=Kn(r);this.renderClipPath(d),this.renderController(d),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var n=this,r=RO(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(I.Dk.INSERTED,r),this.playWindow.addEventListener(I.Dk.REMOVED,r)},e}(Si),da=No({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function $9(t){var e=t.querySelector(da.marker.class);return e?e.style:{}}var Y9=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,{span:[1,1],marker:function(){return new I.Cd({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(e.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,o=this.attributes.markerSize,c=n.node().getBBox(),l=c.width,u=c.height,d=r.node().getBBox(),h=d.width,p=d.height;return{markerWidth:o,labelWidth:l,valueWidth:h,height:Math.max(o,u,p)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=(0,X.CR)(Yi(n),2),o=r[0],c=r[1],l=this.showValue?c:0,u=o+l;return[o/u,l/u]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var n,r=this.attributes,o=r.markerSize,c=r.width,l=this.actualSpace,u=l.markerWidth,d=l.height,h=this.actualSpace,p=h.labelWidth,v=h.valueWidth,m=(0,X.CR)(this.spacing,2),b=m[0],_=m[1];if(c){var S=c-o-b-_,E=(0,X.CR)(this.span,2),w=E[0],C=E[1];n=(0,X.CR)([w*S,C*S],2),p=n[0],v=n[1]}var M=u+p+v+b+_;return{width:M,height:d,markerWidth:u,labelWidth:p,valueWidth:v}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=(0,X.CR)(Yi(n),2),o=r[0],c=r[1];return this.showValue?[o,c]:[o,0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,o=n.labelWidth,c=n.valueWidth,l=n.width,u=n.height,d=(0,X.CR)(this.spacing,2),h=d[0],p=d[1];return{height:u,width:l,markerWidth:r,labelWidth:o,valueWidth:c,position:[r/2,r+h,r+o+h+p]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var n=$9(this.markerGroup.node()),r=this.attributes,o=r.markerSize,c=r.markerStrokeWidth,l=c===void 0?n.strokeWidth:c,u=r.markerLineWidth,d=u===void 0?n.lineWidth:u,h=r.markerStroke,p=h===void 0?n.stroke:h,v=+(l||d||(p?1:0))*Math.sqrt(2),m=this.markerGroup.node().getBBox(),b=m.width,_=m.height;return(1-v/Math.max(b,_))*o},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(n){var r=this,o=this.attributes.marker,c=sr(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(da.markerGroup,"g").style("zIndex",0),po(!!o,this.markerGroup,function(){var l,u=r.markerGroup.node(),d=(l=u.childNodes)===null||l===void 0?void 0:l[0],h=typeof o=="string"?new _r({style:{symbol:o},className:da.marker.name}):o();d?h.nodeName===d.nodeName?d instanceof _r?d.update((0,X.pi)((0,X.pi)({},c),{symbol:o})):(nw(d,h),Kn(d).styles(c)):(d.remove(),Kn(h).attr("className",da.marker.name).styles(c),u.appendChild(h)):(h instanceof _r||Kn(h).attr("className",da.marker.name).styles(c),u.appendChild(h)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var p=C1(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(p,")")})},e.prototype.renderLabel=function(n){var r=sr(this.attributes,"label"),o=r.text,c=(0,X._T)(r,["text"]);this.labelGroup=n.maybeAppendByClassName(da.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(da.label,function(){return tl(o)}).styles(c)},e.prototype.renderValue=function(n){var r=this,o=sr(this.attributes,"value"),c=o.text,l=(0,X._T)(o,["text"]);this.valueGroup=n.maybeAppendByClassName(da.valueGroup,"g").style("zIndex",0),po(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(da.value,function(){return tl(c)}).styles(l)})},e.prototype.renderBackground=function(n){var r=this.shape,o=r.width,c=r.height,l=sr(this.attributes,"background");this.background=n.maybeAppendByClassName(da.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(da.background,"rect").styles((0,X.pi)({width:o,height:c},l))},e.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,o=n.valueWidth,c=n.height,l=(0,X.CR)(n.position,3),u=l[0],d=l[1],h=l[2],p=c/2;this.markerGroup.styles({transform:"translate(".concat(u,", ").concat(p,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(d,", ").concat(p,")")}),Sd(this.labelGroup.select(da.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(h,", ").concat(p,")")}),Sd(this.valueGroup.select(da.value.class).node(),Math.ceil(o)))},e.prototype.render=function(n,r){var o=Kn(r),c=n.x,l=c===void 0?0:c,u=n.y,d=u===void 0?0:u;o.styles({transform:"translate(".concat(l,", ").concat(d,")")}),this.renderMarker(o),this.renderLabel(o),this.renderValue(o),this.renderBackground(o),this.adjustLayout()},e}(Si),Nf=No({page:"item-page",navigator:"navigator",item:"item"},"items"),K7=function(t,e,n){return n===void 0&&(n=!0),t?e(t):n},X9=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:a4,mouseenter:a4,mouseleave:a4})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,o=n.gridCol,c=n.data;if(!r&&!o)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&o?[r,o]:r?[r,c.length]:[c.length,o]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,o=n.layout,c=sr(this.attributes,"item"),l=r.map(function(u,d){var h=u.id,p=h===void 0?d:h,v=u.label,m=u.value;return{id:"".concat(p),index:d,style:(0,X.pi)({layout:o,labelText:v,valueText:m},Object.fromEntries(Object.entries(c).map(function(b){var _=(0,X.CR)(b,2),S=_[0],E=_[1];return[S,Bo(E,[u,d,r])]})))}});return l},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var n=this,r=this.attributes,o=r.orientation,c=r.width,l=r.rowPadding,u=r.colPadding,d=(0,X.CR)(this.navigatorShape,1),h=d[0],p=(0,X.CR)(this.grid,2),v=p[0],m=p[1],b=m*v,_=0;return this.pageViews.children.map(function(S,E){var w,C,M=Math.floor(E/b),L=E%b,R=n.ifHorizontal(m,v),j=[Math.floor(L/R),L%R];o==="vertical"&&j.reverse();var z=(0,X.CR)(j,2),H=z[0],$=z[1],dt=(c-h-(m-1)*u)/m,gt=S.getBBox().height,It=(0,X.CR)([0,0],2),rt=It[0],lt=It[1];return o==="horizontal"?(w=(0,X.CR)([_,H*(gt+l)],2),rt=w[0],lt=w[1],_=$===m-1?0:_+dt+u):(C=(0,X.CR)([$*(dt+u),_],2),rt=C[0],lt=C[1],_=H===v-1?0:_+gt+l),{page:M,index:E,row:H,col:$,pageIndex:L,width:dt,height:gt,x:rt,y:lt}})},e.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,o=n.height,c=n.rowPadding,l=n.colPadding,u=(0,X.CR)(this.navigatorShape,1),d=u[0],h=(0,X.CR)(this.grid,2),p=h[0],v=h[1],m=(0,X.CR)([r-d,o],2),b=m[0],_=m[1],S=(0,X.CR)([0,0,0,0,0,0,0,0],8),E=S[0],w=S[1],C=S[2],M=S[3],L=S[4],R=S[5],j=S[6],z=S[7];return this.pageViews.children.map(function(H,$){var dt,gt,It,rt,lt=H.getBBox(),pt=lt.width,bt=lt.height,Ht=j===0?0:l,Rt=j+Ht+pt;if(Rt<=b&&K7(L,function(oe){return oe<v}))return dt=(0,X.CR)([j+Ht,z,Rt],3),E=dt[0],w=dt[1],j=dt[2],{width:pt,height:bt,x:E,y:w,page:C,index:$,pageIndex:M++,row:R,col:L++};gt=(0,X.CR)([R+1,0,0,z+bt+c],4),R=gt[0],L=gt[1],j=gt[2],z=gt[3];var jt=z+bt;return jt<=_&&K7(R,function(oe){return oe<p})?(It=(0,X.CR)([j,z,pt],3),E=It[0],w=It[1],j=It[2],{width:pt,height:bt,x:E,y:w,page:C,index:$,pageIndex:M++,row:R,col:L++}):(rt=(0,X.CR)([0,0,pt,0,C+1,0,0,0],8),E=rt[0],w=rt[1],j=rt[2],z=rt[3],C=rt[4],M=rt[5],R=rt[6],L=rt[7],{width:pt,height:bt,x:E,y:w,page:C,index:$,pageIndex:M++,row:R,col:L++})})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){var o=this.attributes.orientation;return ia(o,n,r)},e.prototype.flattenPage=function(n){n.querySelectorAll(Nf.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(Nf.page.class).forEach(function(r){var o=n.removeChild(r);o.destroy()})},e.prototype.renderItems=function(n){var r=this.attributes,o=r.click,c=r.mouseenter,l=r.mouseleave;this.flattenPage(n);var u=this.dispatchCustomEvent.bind(this);Kn(n).selectAll(Nf.item.class).data(this.renderData,function(d){return d.id}).join(function(d){return d.append(function(h){var p=h.style;return new Y9({style:p})}).attr("className",Nf.item.name).on("click",function(){o==null||o(this),u("itemClick",{item:this})}).on("pointerenter",function(){c==null||c(this),u("itemMouseenter",{item:this})}).on("pointerleave",function(){l==null||l(this),u("itemMouseleave",{item:this})})},function(d){return d.each(function(h){var p=h.style;this.update(p)})},function(d){return d.remove()})},e.prototype.relayoutNavigator=function(){var n,r=this.attributes,o=r.layout,c=r.width,l=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,u=(0,X.CR)(this.navigatorShape,2),d=u[0],h=u[1];this.navigator.update(o==="grid"?{pageWidth:c-d,pageHeight:l-h}:{})},e.prototype.adjustLayout=function(){var n=this,r=Object.entries(V9(this.itemsLayout,"page")).map(function(c){var l=(0,X.CR)(c,2),u=l[0],d=l[1];return{page:u,layouts:d}}),o=(0,X.ev)([],(0,X.CR)(this.navigator.getContainer().children),!1);r.forEach(function(c){var l=c.layouts,u=n.pageViews.appendChild(new I.ZA({className:Nf.page.name}));l.forEach(function(d){var h=d.x,p=d.y,v=d.index,m=d.width,b=d.height,_=o[v];u.appendChild(_),H9(_,"__layout__",d),_.update({x:h,y:p,width:m,height:b})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(n){var r=this.attributes.orientation,o=sr(this.attributes,"nav"),c=Va({orientation:r},o),l=this;return n.selectAll(Nf.navigator.class).data(["nav"]).join(function(u){return u.append(function(){return new G9({style:c})}).attr("className",Nf.navigator.name).each(function(){l.navigator=this})},function(u){return u.each(function(){this.update(c)})},function(u){return u.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(n,r){var o=this.attributes.data;if(!(!o||o.length===0)){var c=this.renderNavigator(Kn(r));this.renderItems(c.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(n,r){var o=new I.Aw(n,{detail:r});this.dispatchEvent(o)},e}(Si),q9=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,sA)||this}return e.prototype.renderTitle=function(n,r,o){var c=this.attributes,l=c.showTitle,u=c.titleText,d=sr(this.attributes,"title"),h=(0,X.CR)(Wa(d),2),p=h[0],v=h[1];this.titleGroup=n.maybeAppendByClassName(Ei.titleGroup,"g").styles(v);var m=(0,X.pi)((0,X.pi)({width:r,height:o},p),{text:l?u:""});this.title=this.titleGroup.maybeAppendByClassName(Ei.title,function(){return new Z0({style:m})}).update(m)},e.prototype.renderItems=function(n,r){var o=r.x,c=r.y,l=r.width,u=r.height,d=sr(this.attributes,"title",!0),h=(0,X.CR)(Wa(d),2),p=h[0],v=h[1],m=(0,X.pi)((0,X.pi)({},p),{width:l,height:u,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(Ei.itemsGroup,"g").styles((0,X.pi)((0,X.pi)({},v),{transform:"translate(".concat(o,", ").concat(c,")")}));var b=this;this.itemsGroup.selectAll(Ei.items.class).data(["items"]).join(function(_){return _.append(function(){return new X9({style:m})}).attr("className",Ei.items.name).each(function(){b.items=Kn(this)})},function(_){return _.update(m)},function(_){return _.remove()})},e.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),o=r.x,c=r.y;this.itemsGroup.node().style.transform="translate(".concat(o,", ").concat(c,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,o=n.width,c=n.height;return r?this.title.node().getAvailableSpace():new Xr(0,0,o,c)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n,r,o=(n=this.title)===null||n===void 0?void 0:n.node(),c=(r=this.items)===null||r===void 0?void 0:r.node();return!o||!c?t.prototype.getBBox.call(this):pw(o,c)},e.prototype.render=function(n,r){var o=this.attributes,c=o.width,l=o.height,u=o.x,d=u===void 0?0:u,h=o.y,p=h===void 0?0:h,v=Kn(r);r.style.transform="translate(".concat(d,", ").concat(p,")"),this.renderTitle(v,c,l),this.renderItems(v,this.availableSpace),this.adjustLayout()},e}(Si);function lm(t){if(Xc(t)){var e=t;return e[e.length-1]}}var K9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Q7(t,e){const n=Sa(t,"shape"),r=Sa(t,"color"),o=n?n.clone():null,c=[];for(const[u,d]of e){const h=u.type,v=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:d.data).map((m,b)=>{var _;return o?o.map(m||"point"):((_=u==null?void 0:u.style)===null||_===void 0?void 0:_.shape)||d.defaultShape||"point"});typeof h=="string"&&c.push([h,v])}if(c.length===0)return["point",["point"]];if(c.length===1||!n)return c[0];const{range:l}=n.getOptions();return c.map(([u,d])=>{let h=0;for(let p=0;p<c.length;p++){const v=l[p%l.length];d[p]===v&&h++}return[h/d.length,[u,d]]}).sort((u,d)=>d[0]-u[0])[0][1]}function Q9(t,e){const{scales:n,library:r,markState:o}=e,[c,l]=Q7(n,o),{itemMarker:u,itemMarkerSize:d}=t,h=(m,b)=>{var _,S,E;const w=((E=(S=(_=r[`mark.${c}`])===null||_===void 0?void 0:_.props)===null||S===void 0?void 0:S.shape[m])===null||E===void 0?void 0:E.props.defaultMarker)||lm(m.split(".")),C=typeof d=="function"?d(b):d;return()=>hO(w,{color:b.color})(0,0,C)},p=m=>`${l[m]}`;return Sa(n,"shape")&&!u?(m,b)=>h(p(b),m):typeof u=="function"?(m,b)=>{const _=u(m.id,b);return typeof _=="string"?h(_,m):_}:(m,b)=>h(u||p(b),m)}function J9(t){const e=Sa(t,"opacity");if(e){const{range:n}=e.getOptions();return(r,o)=>n[o]}}function tF(t,e){const n=Sa(t,"size");return n instanceof Y3?n.map(NaN)*2:e}function eF(t,e){const{scales:n,markState:r}=e,[o,c]=Q7(n,r),{itemMarker:l,itemMarkerLineWidth:u}=t;if(u!==void 0)return u;const d=["line","hyphen","dash","smooth","hv","hvh","vh","vhv"];if(typeof l=="string"&&d.includes(l))return 4;if(typeof l=="function")return(v,m)=>{const b=l(v.id,m);if(typeof b=="string"&&d.includes(b))return 4};if((Array.isArray(c)?c:[c]).some(v=>d.includes(v)))return 4}function nF(t,e){const{labelFormatter:n=m=>`${m}`}=t,{scales:r,theme:o}=e,c=o.legendCategory.itemMarkerSize,l=tF(r,c),u={itemMarker:Q9(Object.assign(Object.assign({},t),{itemMarkerSize:l}),e),itemMarkerSize:l,itemMarkerOpacity:J9(r),itemMarkerLineWidth:eF(t,e)},d=typeof n=="string"?Za(n):n,h=Sa(r,"color"),p=Mw(r),v=h?m=>h.map(m):()=>e.theme.color;return Object.assign(Object.assign({},u),{data:p.map(m=>({id:m,label:d(m),color:v(m)}))})}function rF(t,e,n){const{position:r}=e;if(r==="center"){const{bbox:l}=t,{width:u,height:d}=l;return{width:u,height:d}}const{width:o,height:c}=Q1(t,e,n);return{width:o,height:c}}function iF(t){return Object.assign(Object.assign({},t),{data:(t==null?void 0:t.data.filter(e=>e.id!==""))||[]})}const s4=t=>{const{labelFormatter:e,layout:n,order:r,orientation:o,position:c,size:l,title:u,cols:d,itemMarker:h}=t,p=K9(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:v}=p;return m=>{const{value:b,theme:_}=m,{bbox:S}=b,{width:E,height:w}=rF(b,t,s4),C=q1(c,n),M=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(c)?"vertical":"horizontal",width:E,height:w,layout:d!==void 0?"grid":"flex"},d!==void 0&&{gridCol:d}),v!==void 0&&{gridRow:v}),{titleText:Cu(u)}),nF(t,m)),{legendCategory:L={}}=_,R=Dd(Object.assign({},L,iF(M),p)),j=new Tw({style:Object.assign(Object.assign({x:S.x,y:S.y,width:S.width,height:S.height},C),{subOptions:R})});return j.appendChild(new q9({className:"legend-category",style:R})),j}};s4.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const J7=t=>()=>new I.ZA;J7.props={};var oF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function t8(t,e,n,r){switch(r){case"center":return{x:t+n/2,y:e,textAlign:"middle"};case"right":return{x:t+n,y:e,textAlign:"right"};default:return{x:t,y:e,textAlign:"left"}}}const aF=Aw({render(t,e){const{width:n,title:r,subtitle:o,spacing:c=2,align:l="left",x:u,y:d}=t,h=oF(t,["width","title","subtitle","spacing","align","x","y"]);e.style.transform=`translate(${u}, ${d})`;const p=xn(h,"title"),v=xn(h,"subtitle"),b=Y0(e,".title","text").attr("className","title").call(Bn,Object.assign(Object.assign(Object.assign({},t8(0,0,n,l)),{fontSize:14,textBaseline:"top",text:r}),p)).node().getLocalBounds();Y0(e,".sub-title","text").attr("className","sub-title").call(_=>{if(!o)return _.node().remove();_.node().attr(Object.assign(Object.assign(Object.assign({},t8(0,b.max[1]+c,n,l)),{fontSize:12,textBaseline:"top",text:o}),v))})}}),e8=t=>({value:e,theme:n})=>{const{x:r,y:o,width:c,height:l}=e.bbox;return new aF({style:an({},n.title,Object.assign({x:r,y:o,width:c,height:l},t))})};e8.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var c4=function(t){if(typeof t!="object"||t===null)return t;var e;if((0,Wi.Z)(t)){e=[];for(var n=0,r=t.length;n<r;n++)typeof t[n]=="object"&&t[n]!=null?e[n]=c4(t[n]):e[n]=t[n]}else{e={};for(var o in t)typeof t[o]=="object"&&t[o]!=null?e[o]=c4(t[o]):e[o]=t[o]}return e},l4=c4,sF=function(t){(0,X.ZT)(e,t);function e(n){var r=this,o=n.style,c=(0,X._T)(n,["style"]);return r=t.call(this,an({},{type:"column"},(0,X.pi)({style:o},c)))||this,r.columnsGroup=new I.ZA({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.columns,o=n.x,c=n.y;this.columnsGroup.style.transform="translate(".concat(o,", ").concat(c,")"),Kn(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(l){return l.append("rect").attr("className","column").each(function(u){this.attr(u)})},function(l){return l.each(function(u){this.attr(u)})},function(l){return l.remove()})},e.prototype.update=function(n){this.attr(Va({},this.attributes,n)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(I.s$),cF=function(t){(0,X.ZT)(e,t);function e(n){var r=this,o=n.style,c=(0,X._T)(n,["style"]);return r=t.call(this,an({},{type:"lines"},(0,X.pi)({style:o},c)))||this,r.linesGroup=r.appendChild(new I.ZA),r.areasGroup=r.appendChild(new I.ZA),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.lines,o=n.areas,c=n.x,l=n.y;this.style.transform="translate(".concat(c,", ").concat(l,")"),r&&this.renderLines(r),o&&this.renderAreas(o)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(n){this.attr(Va({},this.attributes,n)),this.render()},e.prototype.renderLines=function(n){Kn(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(o){this.attr(o)})},function(r){return r.each(function(o){this.attr(o)})},function(r){return r.remove()})},e.prototype.renderAreas=function(n){Kn(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(o){this.attr(o)})},function(r){return r.each(function(o){this.style(o)})},function(r){return r.remove()})},e}(I.s$);function lF(t,e,n,r){var o,c=[],l=!!r,u,d,h=[1/0,1/0],p=[-1/0,-1/0],v,m,b;if(l){o=(0,X.CR)(r,2),h=o[0],p=o[1];for(var _=0,S=t.length;_<S;_+=1){var E=t[_];h=ct(h,E),p=ta(p,E)}}for(var _=0,w=t.length;_<w;_+=1){var E=t[_];if(_===0&&!n)b=E;else if(_===w-1&&!n)m=E,c.push(b),c.push(m);else{var C=[_?_-1:w-1,_-1][n?0:1];u=t[C],d=t[n?(_+1)%w:_+1];var M=[0,0];M=on(d,u),M=Jo(M,e);var L=ot(E,u),R=ot(E,d),j=L+R;j!==0&&(L/=j,R/=j);var z=Jo(M,-L),H=Jo(M,R);m=pu(E,z),v=pu(E,H),v=ct(v,ta(d,E)),v=ta(v,ct(d,E)),z=on(v,E),z=Jo(z,-L/R),m=pu(E,z),m=ct(m,ta(u,E)),m=ta(m,ct(u,E)),H=on(E,m),H=Jo(H,R/L),v=pu(E,H),l&&(m=ta(m,h),m=ct(m,p),v=ta(v,h),v=ct(v,p)),c.push(b),c.push(m),b=v}}return n&&c.push(c.shift()),c}function uF(t,e,n){var r;e===void 0&&(e=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var o=!!e,c=[],l=0,u=t.length;l<u;l+=2)c.push([t[l],t[l+1]]);for(var d=lF(c,.4,o,n),h=c.length,p=[],v,m,b,l=0;l<h-1;l+=1)v=d[l*2],m=d[l*2+1],b=c[l+1],p.push(["C",v[0],v[1],m[0],m[1],b[0],b[1]]);return o&&(v=d[h],m=d[h+1],r=(0,X.CR)(c,1),b=r[0],p.push(["C",v[0],v[1],m[0],m[1],b[0],b[1]])),p}function fF(t,e){var n,r=e.x,o=e.y,c=(0,X.CR)(o.getOptions().range||[0,0],2),l=c[0],u=c[1];return u>l&&(n=(0,X.CR)([l,u],2),u=n[0],l=n[1]),t.map(function(d){var h=d.map(function(p,v){return[r.map(v),(0,cn.Z)(o.map(p),u,l)]});return h})}function um(t,e){e===void 0&&(e=!1);var n=e?t.length-1:0,r=t.map(function(o,c){return(0,X.ev)([c===n?"M":"L"],(0,X.CR)(o),!1)});return e?r.reverse():r}function Q3(t,e){if(e===void 0&&(e=!1),t.length<=2)return um(t);for(var n=[],r=t.length,o=0;o<r;o+=1){var c=e?t[r-o-1]:t[o];s1(c,n.slice(-2))||n.push.apply(n,(0,X.ev)([],(0,X.CR)(c),!1))}var l=uF(n,!1);return e?l.unshift((0,X.ev)(["M"],(0,X.CR)(t[r-1]),!1)):l.unshift((0,X.ev)(["M"],(0,X.CR)(t[0]),!1)),l}function u4(t,e,n){var r=l4(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}function dF(t,e,n,r){return t.map(function(o){return u4(e?Q3(o):um(o),n,r)})}function hF(t,e,n){for(var r=[],o=t.length-1;o>=0;o-=1){var c=t[o],l=um(c),u=void 0;if(o===0)u=u4(l,e,n);else{var d=t[o-1],h=um(d,!0);h[0][0]="L",u=(0,X.ev)((0,X.ev)((0,X.ev)([],(0,X.CR)(l),!1),(0,X.CR)(h),!1),[["Z"]],!1)}r.push(u)}return r}function pF(t,e,n){for(var r=[],o=t.length-1;o>=0;o-=1){var c=t[o],l=Q3(c),u=void 0;if(o===0)u=u4(l,e,n);else{var d=t[o-1],h=Q3(d,!0),p=c[0];h[0][0]="L",u=(0,X.ev)((0,X.ev)((0,X.ev)([],(0,X.CR)(l),!1),(0,X.CR)(h),!1),[(0,X.ev)(["M"],(0,X.CR)(p),!1),["Z"]],!1)}r.push(u)}return r}var n8=k(71523),gF=function(t,e){if((0,Wi.Z)(t)){for(var n,r=1/0,o=0;o<t.length;o++){var c=t[o],l=(0,go.Z)(e)?e(c):c[e];l<r&&(n=c,r=l)}return n}},r8=k(13882),vF=function(t,e){if((0,Wi.Z)(t)){for(var n,r=-1/0,o=0;o<t.length;o++){var c=t[o],l=(0,go.Z)(e)?e(c):c[e];l>r&&(n=c,r=l)}return n}};function i8(t){return t.length===0?[0,0]:[(0,n8.Z)(gF(t,function(e){return(0,n8.Z)(e)||0})),(0,r8.Z)(vF(t,function(e){return(0,r8.Z)(e)||0}))]}function o8(t){for(var e=l4(t),n=e[0].length,r=(0,X.CR)([Array(n).fill(0),Array(n).fill(0)],2),o=r[0],c=r[1],l=0;l<e.length;l+=1)for(var u=e[l],d=0;d<n;d+=1)u[d]>=0?(u[d]+=o[d],o[d]=u[d]):(u[d]+=c[d],c[d]=u[d]);return e}var mF=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(e.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=l4(n);return(0,ie.Z)(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?o8(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var n=this.scales.y,r=(0,X.CR)(n.getOptions().domain||[0,0],2),o=r[0],c=r[1];return c<0?n.map(c):n.map(o<0?0:o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,o=n.height;return{width:r,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,o=r.type,c=r.isStack,l=r.smooth;if(o!=="line")throw new Error("linesStyle can only be used in line type");var u=sr(this.attributes,"area"),d=sr(this.attributes,"line"),h=this.containerShape.width,p=this.data;if(p[0].length===0)return{lines:[],areas:[]};var v=this.scales,m=v.x,b=v.y,_=fF(p,{type:"line",x:m,y:b}),S=[];if(u){var E=this.baseline;c?S=l?pF(_,h,E):hF(_,h,E):S=dF(_,l,h,E)}return{lines:_.map(function(w,C){return(0,X.pi)({stroke:n.getColor(C),d:l?Q3(w):um(w)},d)}),areas:S.map(function(w,C){return(0,X.pi)({d:w,fill:n.getColor(C)},u)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var n=this,r=sr(this.attributes,"column"),o=this.attributes,c=o.isStack,l=o.type,u=o.scale;if(l!=="column")throw new Error("columnsStyle can only be used in column type");var d=this.containerShape.height,h=this.rawData;if(!h)return{columns:[]};c&&(h=o8(h));var p=this.createScales(h),v=p.x,m=p.y,b=(0,X.CR)(i8(h),2),_=b[0],S=b[1],E=new eo({domain:[0,S-(_>0?0:_)],range:[0,d*u]}),w=v.getBandWidth(),C=this.rawData;return{columns:h.map(function(M,L){return M.map(function(R,j){var z=w/h.length,H=function(){return{x:v.map(j)+z*L,y:R>=0?m.map(R):m.map(0),width:z,height:E.map(Math.abs(R))}},$=function(){return{x:v.map(j),y:m.map(R),width:w,height:E.map(C[L][j])}};return(0,X.pi)((0,X.pi)({fill:n.getColor(L)},r),c?$():H())})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){_1(r,".container","rect").attr("className","container").node();var o=n.type,c=n.x,l=n.y,u="spark".concat(o),d=(0,X.pi)({x:c,y:l},o==="line"?this.linesStyle:this.columnsStyle);Kn(r).selectAll(".spark").data([o]).join(function(h){return h.append(function(p){return p==="line"?new cF({className:u,style:d}):new sF({className:u,style:d})}).attr("className","spark ".concat(u))},function(h){return h.update(d)},function(h){return h.remove()})},e.prototype.getColor=function(n){var r=this.attributes.color;return(0,Wi.Z)(r)?r[n%r.length]:(0,go.Z)(r)?r.call(null,n):r},e.prototype.createScales=function(n){var r,o,c=this.attributes,l=c.type,u=c.scale,d=c.range,h=d===void 0?[]:d,p=c.spacing,v=this.containerShape,m=v.width,b=v.height,_=(0,X.CR)(i8(n),2),S=_[0],E=_[1],w=new eo({domain:[(r=h[0])!==null&&r!==void 0?r:S,(o=h[1])!==null&&o!==void 0?o:E],range:[b,b*(1-u)]});return l==="line"?{type:l,x:new eo({domain:[0,n[0].length-1],range:[0,m]}),y:w}:{type:l,x:new is({domain:n[0].map(function(C,M){return M}),range:[0,m],paddingInner:p,paddingOuter:p/2,align:.5}),y:w}},e.tag="sparkline",e}(Si),a8=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,(0,X.pi)((0,X.pi)((0,X.pi)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(o){return o.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},ea(ab,"handle")),ea(zi,"handleIcon")),ea(K0,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(o){return function(c){c.stopPropagation(),r.target=o,r.prevPos=r.getOrientVal(Nd(c));var l=r.availableSpace,u=l.x,d=l.y,h=r.getBBox(),p=h.x,v=h.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([u,d])-r.getOrientVal([+p,+v])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(o){var c=r.attributes,l=c.slidable,u=c.brushable,d=c.type;o.stopPropagation();var h=r.getOrientVal(Nd(o)),p=h-r.prevPos;if(p){var v=r.getRatio(p);switch(r.target){case"start":l&&r.setValuesOffset(v);break;case"end":l&&r.setValuesOffset(0,v);break;case"selection":l&&r.setValuesOffset(v,v);break;case"track":if(!u)return;r.selectionWidth+=v,d==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=h}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(o){var c=r.attributes,l=c.onChange,u=c.type,d=u==="range"?o:o[1],h=u==="range"?r.getValues():r.getValues()[1],p=new I.Aw("valuechange",{detail:{oldValue:d,value:h}});r.dispatchEvent(p),l==null||l(h)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=sr(this.attributes,"sparkline");return(0,X.pi)((0,X.pi)({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,o=n.trackSize,c=(0,X.CR)(this.getOrientVal([[r,o],[o,r]]),2),l=c[0],u=c[1];return{width:l,height:u}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.x,o=n.y,c=n.padding,l=(0,X.CR)(Yi(c),4),u=l[0],d=l[1],h=l[2],p=l[3],v=this.shape,m=v.width,b=v.height;return{x:p,y:u,width:m-(p+d),height:b-(u+h)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var o=r===!1?!1:this.attributes.animate;this.updateSelectionArea(o),this.updateHandlesPosition(o)},e.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(Oa.selection.class).each(function(o,c){Qo(this,r[c],n)})},e.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&Qo(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&Qo(this.endHandle,this.getHandleStyle("end"),n))},e.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var o=this.values,c=this.clampValues(n);this.attributes.values=c,this.setValues(c),r&&this.onValueChange(o)},e.prototype.renderTrack=function(n){var r=this.attributes,o=r.x,c=r.y,l=sr(this.attributes,"track");this.trackShape=Kn(n).maybeAppendByClassName(Oa.track,"rect").styles((0,X.pi)((0,X.pi)({x:o,y:c},this.shape),l))},e.prototype.renderBrushArea=function(n){var r=this.attributes,o=r.x,c=r.y,l=r.brushable;this.brushArea=Kn(n).maybeAppendByClassName(Oa.brushArea,"rect").styles((0,X.pi)({x:o,y:c,fill:"transparent",cursor:l?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(n){var r=this,o=this.attributes,c=o.x,l=o.y,u=o.orientation,d=Kn(n).maybeAppendByClassName(Oa.sparklineGroup,"g");po(u==="horizontal",d,function(h){var p=(0,X.pi)((0,X.pi)({},r.sparklineStyle),{x:c,y:l});h.maybeAppendByClassName(Oa.sparkline,function(){return new mF({style:p})}).update(p)})},e.prototype.renderHandles=function(){var n=this,r,o=this.attributes,c=o.showHandle,l=o.type,u=l==="range"?["start","end"]:["end"],d=c?u:[],h=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(Oa.handle.class).data(d.map(function(p){return{type:p}}),function(p){return p.type}).join(function(p){return p.append(function(v){var m=v.type;return new Q0({style:n.getHandleStyle(m)})}).each(function(v){var m=v.type;this.attr("class","".concat(Oa.handle.name," ").concat(m,"-handle"));var b="".concat(m,"Handle");h[b]=this,this.addEventListener("pointerdown",h.onDragStart(m))})},function(p){return p.each(function(v){var m=v.type;this.update(h.getHandleStyle(m))})},function(p){return p.each(function(v){var m=v.type,b="".concat(m,"Handle");h[b]=void 0}).remove()})},e.prototype.renderSelection=function(n){var r=this.attributes,o=r.x,c=r.y,l=r.type,u=r.selectionType;this.foregroundGroup=Kn(n).maybeAppendByClassName(Oa.foreground,"g");var d=sr(this.attributes,"selection"),h=function(v){return v.style("visibility",function(m){return m.show?"visible":"hidden"}).style("cursor",function(m){return u==="select"?"grab":u==="invert"?"crosshair":"default"}).styles((0,X.pi)((0,X.pi)({},d),{transform:"translate(".concat(o,", ").concat(c,")")}))},p=this;this.foregroundGroup.selectAll(Oa.selection.class).data(l==="value"?[]:this.calcSelectionArea().map(function(v,m){return{style:(0,X.pi)({},v),index:m,show:u==="select"?m===1:m!==1}}),function(v){return v.index}).join(function(v){return v.append("rect").attr("className",Oa.selection.name).call(h).each(function(m,b){var _=this;b===1?(p.selectionShape=Kn(this),this.on("pointerdown",function(S){_.attr("cursor","grabbing"),p.onDragStart("selection")(S)}),p.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),p.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),p.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){_.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){_.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){_.attr("cursor","pointer")})):this.on("pointerdown",p.onDragStart("track"))})},function(v){return v.call(h)},function(v){return v.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},e.prototype.clampValues=function(n,r){var o;r===void 0&&(r=4);var c=(0,X.CR)(this.range,2),l=c[0],u=c[1],d=(0,X.CR)(this.getValues().map(function(E){return Fd(E,r)}),2),h=d[0],p=d[1],v=Array.isArray(n)?n:[h,n!=null?n:p],m=(0,X.CR)((v||[h,p]).map(function(E){return Fd(E,r)}),2),b=m[0],_=m[1];if(this.attributes.type==="value")return[0,(0,cn.Z)(_,l,u)];b>_&&(o=(0,X.CR)([_,b],2),b=o[0],_=o[1]);var S=_-b;return S>u-l?[l,u]:b<l?h===l&&p===_?[l,_]:[l,S+l]:_>u?p===u&&h===b?[b,u]:[u-S,u]:[b,_]},e.prototype.calcSelectionArea=function(n){var r=(0,X.CR)(this.clampValues(n),2),o=r[0],c=r[1],l=this.availableSpace,u=l.x,d=l.y,h=l.width,p=l.height;return this.getOrientVal([[{y:d,height:p,x:u,width:o*h},{y:d,height:p,x:o*h+u,width:(c-o)*h},{y:d,height:p,x:c*h,width:(1-c)*h}],[{x:u,width:h,y:d,height:o*p},{x:u,width:h,y:o*p+d,height:(c-o)*p},{x:u,width:h,y:c*p,height:(1-c)*p}]])},e.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,o=this.availableSpace,c=o.x,l=o.y,u=o.width,d=o.height,h=(0,X.CR)(this.clampValues(),2),p=h[0],v=h[1],m=n==="start"?-r:r,b=(n==="start"?p:v)*this.getOrientVal([u,d])+m;return{x:c+this.getOrientVal([b,u/2]),y:l+this.getOrientVal([d/2,b])}},e.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(n){var r,o=this.attributes,c=o.type,l=o.orientation,u=o.formatter,d=o.autoFitLabel,h=sr(this.attributes,"handle"),p=sr(h,"label"),v=h.spacing,m=this.getHandleSize(),b=this.clampValues(),_=n==="start"?b[0]:b[1],S=u(_),E=new w0({style:(0,X.pi)((0,X.pi)((0,X.pi)({},p),this.inferTextStyle(n)),{text:S})}),w=E.getBBox(),C=w.width,M=w.height;if(E.destroy(),!d){if(c==="value")return{text:S,x:0,y:-M-v};var L=v+m+(l==="horizontal"?C/2:0);return r={text:S},r[l==="horizontal"?"x":"y"]=n==="start"?-L:L,r}var R=0,j=0,z=this.availableSpace,H=z.width,$=z.height,dt=this.calcSelectionArea()[1],gt=dt.x,It=dt.y,rt=dt.width,lt=dt.height,pt=v+m;if(l==="horizontal"){var bt=pt+C/2;if(n==="start"){var Ht=gt-pt-C;R=Ht>0?-bt:bt}else{var Rt=H-gt-rt-pt>C;R=Rt?bt:-bt}}else{var jt=pt,oe=M+pt;n==="start"?j=It-m>M?-oe:jt:j=$-(It+lt)-m>M?oe:-jt}return{x:R,y:j,text:S}},e.prototype.getHandleLabelStyle=function(n){var r=sr(this.attributes,"handleLabel");return(0,X.pi)((0,X.pi)((0,X.pi)({},r),this.calcHandleText(n)),this.inferTextStyle(n))},e.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=sr(this.attributes,"handleIcon"),o=this.getOrientVal(["ew-resize","ns-resize"]),c=this.getHandleSize();return(0,X.pi)({cursor:o,shape:n,size:c},r)},e.prototype.getHandleStyle=function(n){var r=this.attributes,o=r.x,c=r.y,l=r.showLabel,u=r.showLabelOnInteraction,d=r.orientation,h=this.calcHandlePosition(n),p=h.x,v=h.y,m=this.calcHandleText(n),b=l;return!l&&u&&(this.target?b=!0:b=!1),(0,X.pi)((0,X.pi)((0,X.pi)({},ea(this.getHandleIconStyle(),"icon")),ea((0,X.pi)((0,X.pi)({},this.getHandleLabelStyle(n)),m),"label")),{transform:"translate(".concat(p+o,", ").concat(v+c,")"),orientation:d,showLabel:b,type:n,zIndex:3})},e.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,o=n.width,c=n.height;return r||Math.floor((this.getOrientVal([+c,+o])+4)/2.4)},e.prototype.getOrientVal=function(n){var r=(0,X.CR)(n,2),o=r[0],c=r[1],l=this.attributes.orientation;return l==="horizontal"?o:c},e.prototype.setValuesOffset=function(n,r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var c=this.attributes.type,l=(0,X.CR)(this.getValues(),2),u=l[0],d=l[1],h=c==="range"?n:0,p=[u+h,d+r].sort();o?this.setValues(p):this.innerSetValues(p,!0)},e.prototype.getRatio=function(n){var r=this.availableSpace,o=r.width,c=r.height;return n/this.getOrientVal([o,c])},e.prototype.dispatchCustomEvent=function(n,r,o){var c=this;n.on(r,function(l){l.stopPropagation(),c.dispatchEvent(new I.Aw(o,{detail:l}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var o=n.deltaX,c=n.deltaY,l=c||o,u=this.getRatio(l);this.setValuesOffset(u,u,!0)}},e.tag="slider",e}(Si),yF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function bF(t,e,n){const{x:r,y:o,width:c,height:l}=t;if(e==="left")return[r+c-n,o];if(e==="right")return[r,o];if(e==="bottom")return[r,o];if(e==="top")return[r,o+l-n]}const fm=t=>{const{orientation:e,labelFormatter:n,size:r,style:o={},position:c}=t,l=yF(t,["orientation","labelFormatter","size","style","position"]);return u=>{var d;const{scales:[h],value:p,theme:v,coordinate:m}=u,{bbox:b}=p,{width:_,height:S}=b,{slider:E={}}=v,w=((d=h.getFormatter)===null||d===void 0?void 0:d.call(h))||(H=>H+""),C=typeof n=="string"?Za(n):n,M=e==="horizontal",L=Zr(m)&&M,{trackSize:R=E.trackSize}=o,[j,z]=bF(b,c,R);return new a8({className:"slider",style:Object.assign({},E,Object.assign(Object.assign({x:j,y:z,trackLength:M?_:S,orientation:e,formatter:H=>{const $=C||w,dt=L?1-H:H,gt=ll(h,dt,!0);return $(gt)},sparklineData:xF(t,u)},o),l))})}};function _F(t,e){const[n]=Array.from(t.entries()).filter(([o])=>o.type==="line"||o.type==="area").filter(([o])=>o.slider).map(([o])=>{const{encode:c,slider:l}=o;if(l!=null&&l.x){const u=d=>{const h=c[d];return[d,h?h.value:void 0]};return Object.fromEntries(e.map(u))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((o,c,l)=>(o[c]=o[c]||[],o[c].push(n.y[l]),o),{});return Object.values(r)}function xF(t,e){const{markState:n}=e;return(0,Wi.Z)(t.sparklineData)?t.sparklineData:_F(n,["y","series"])}fm.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const s8=t=>fm(Object.assign(Object.assign({},t),{orientation:"horizontal"}));s8.props=Object.assign(Object.assign({},fm.props),{defaultPosition:"bottom"});const c8=t=>fm(Object.assign(Object.assign({},t),{orientation:"vertical"}));c8.props=Object.assign(Object.assign({},fm.props),{defaultPosition:"left"});var SF=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(o){var c=r.attributes.value;if(o!==c){var l={detail:{oldValue:o,value:c}};r.dispatchEvent(new I.Aw("scroll",l)),r.dispatchEvent(new I.Aw("valuechange",l))}},r.onTrackClick=function(o){var c=r.attributes.slidable;if(c){var l=(0,X.CR)(r.getLocalPosition(),2),u=l[0],d=l[1],h=(0,X.CR)(r.padding,4),p=h[0],v=h[3],m=r.getOrientVal([u+v,d+p]),b=r.getOrientVal(Nd(o)),_=(b-m)/r.trackLength;r.setValue(_,!0)}},r.onThumbMouseenter=function(o){r.dispatchEvent(new I.Aw("thumbMouseenter",{detail:o.detail}))},r.onTrackMouseenter=function(o){r.dispatchEvent(new I.Aw("trackMouseenter",{detail:o.detail}))},r.onThumbMouseleave=function(o){r.dispatchEvent(new I.Aw("thumbMouseleave",{detail:o.detail}))},r.onTrackMouseleave=function(o){r.dispatchEvent(new I.Aw("trackMouseleave",{detail:o.detail}))},r}return Object.defineProperty(e.prototype,"padding",{get:function(){var n=this.attributes.padding;return Yi(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,X.CR)(this.range,2),o=r[0],c=r[1];return(0,cn.Z)(n,o,c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,o=n.trackLength,c=o===void 0?r:o;return c},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,o=(0,X.CR)(this.padding,4),c=o[0],l=o[1],u=o[2],d=o[3],h=(0,X.CR)(this.getOrientVal([[r,n],[n,r]]),2),p=h[0],v=h[1];return{x:d,y:c,width:+p-(d+l),height:+v-(c+u)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,o=n.trackSize;return r?o/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,o=n.thumbRadius;if(!r)return 0;var c=this.availableSpace,l=c.width,u=c.height;return o||this.getOrientVal([u,l])/2},enumerable:!1,configurable:!0}),e.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,o=r.viewportLength,c=r.contentLength,l=o/c,u=(0,X.CR)(this.range,2),d=u[0],h=u[1],p=n*(h-d-l);return[p,p+l]},e.prototype.getValue=function(){return this.value},e.prototype.renderSlider=function(n){var r=this.attributes,o=r.x,c=r.y,l=r.orientation,u=r.trackSize,d=r.padding,h=r.slidable,p=sr(this.attributes,"track"),v=sr(this.attributes,"thumb"),m=(0,X.pi)((0,X.pi)({x:o,y:c,brushable:!1,orientation:l,padding:d,selectionRadius:this.thumbRadius,showHandle:!1,slidable:h,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:u,values:this.getValues()},ea(p,"track")),ea(v,"selection"));this.slider=Kn(n).maybeAppendByClassName("scrollbar",function(){return new a8({style:m})}).update(m).node()},e.prototype.render=function(n,r){this.renderSlider(r)},e.prototype.setValue=function(n,r){r===void 0&&(r=!1);var o=this.attributes.value,c=(0,X.CR)(this.range,2),l=c[0],u=c[1];this.slider.setValues(this.getValues((0,cn.Z)(n,l,u)),r),this.onValueChange(o)},e.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},e.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},e.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e}(Si),OF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const dm=t=>{const{orientation:e,labelFormatter:n,style:r}=t,o=OF(t,["orientation","labelFormatter","style"]);return({scales:[c],value:l,theme:u})=>{const{bbox:d}=l,{x:h,y:p,width:v,height:m}=d,{scrollbar:b={}}=u,{ratio:_,range:S}=c.getOptions(),E=e==="horizontal"?v:m,w=E/_,[C,M]=S,L=M>C?0:1;return new SF({className:"g2-scrollbar",style:Object.assign({},b,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:h,y:p,trackLength:E,value:L}),o),{orientation:e,contentLength:w,viewportLength:E}))})}};dm.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const l8=t=>dm(Object.assign(Object.assign({},t),{orientation:"horizontal"}));l8.props=Object.assign(Object.assign({},dm.props),{defaultPosition:"bottom"});const u8=t=>dm(Object.assign(Object.assign({},t),{orientation:"vertical"}));u8.props=Object.assign(Object.assign({},dm.props),{defaultPosition:"left"});const f4=(t,e)=>{const{coordinate:r}=e;return(o,c,l)=>{const[u]=o,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=u.style,[m,b]=Zr(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],_=[{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.01},{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:m,fillOpacity:h,strokeOpacity:p,opacity:v}];return u.animate(_,Object.assign(Object.assign({},l),t))}},EF=(t,e)=>{const{coordinate:r}=e;return(o,c,l)=>{const[u]=o,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=u.style,[m,b]=Zr(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],_=[{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:m},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.99},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:0,strokeOpacity:0,opacity:0}];return u.animate(_,Object.assign(Object.assign({},l),t))}},f8=(t,e)=>{const{coordinate:r}=e;return I.ux.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:I.h0.NUMBER}),(o,c,l)=>{const[u]=o,d=p=>{const{__data__:v,style:m}=p,{fillOpacity:b=1,strokeOpacity:_=1,opacity:S=1}=m,{points:E,y:w,y1:C}=v,M=rc(r,E,[w,C]),{innerRadius:L,outerRadius:R}=M,j=[{scaleInYRadius:L+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:L+1e-4,fillOpacity:b,strokeOpacity:_,opacity:S,offset:.01},{scaleInYRadius:R,fillOpacity:b,strokeOpacity:_,opacity:S}];return p.animate(j,Object.assign(Object.assign({},l),t))},h=p=>{const{style:v}=p,{transform:m="",fillOpacity:b=1,strokeOpacity:_=1,opacity:S=1}=v,[E,w]=Zr(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],C=[{transform:`${m} ${w}`.trimStart(),transformOrigin:E,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${m} ${w}`.trimStart(),transformOrigin:E,fillOpacity:b,strokeOpacity:_,opacity:S,offset:.01},{transform:`${m} scale(1, 1)`.trimStart(),transformOrigin:E,fillOpacity:b,strokeOpacity:_,opacity:S}];return p.animate(C,Object.assign(Object.assign({},l),t))};return Ar(r)?d(u):h(u)}},wF=(t,e)=>{const{coordinate:r}=e;return(o,c,l)=>{const[u]=o,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=u.style,[m,b]=Zr(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],_=[{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:m},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.99},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:0,strokeOpacity:0,opacity:0}];return u.animate(_,Object.assign(Object.assign({},l),t))}},d8=(t,e)=>{I.ux.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:I.h0.NUMBER});const{coordinate:r}=e;return(o,c,l)=>{const[u]=o;if(!Ar(r))return f4(t,e)(o,c,l);const{__data__:d,style:h}=u,{radius:p=0,inset:v=0,fillOpacity:m=1,strokeOpacity:b=1,opacity:_=1}=h,{points:S,y:E,y1:w}=d,C=th().cornerRadius(p).padAngle(v*Math.PI/180),M=rc(r,S,[E,w]),{startAngle:L,endAngle:R}=M,j=[{waveInArcAngle:L+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:L+1e-4,fillOpacity:m,strokeOpacity:b,opacity:_,offset:.01},{waveInArcAngle:R,fillOpacity:m,strokeOpacity:b,opacity:_}],z=u.animate(j,Object.assign(Object.assign({},l),t));return z.onframe=function(){u.style.d=C(Object.assign(Object.assign({},M),{endAngle:Number(u.style.waveInArcAngle)}))},z.onfinish=function(){u.style.d=C(Object.assign(Object.assign({},M),{endAngle:R}))},z}};d8.props={};const h8=t=>(e,n,r)=>{const[o]=e,{fillOpacity:c=1,strokeOpacity:l=1,opacity:u=1}=o.style,d=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:c,strokeOpacity:l,opacity:u}];return o.animate(d,Object.assign(Object.assign({},r),t))};h8.props={};const p8=t=>(e,n,r)=>{const[o]=e,{fillOpacity:c=1,strokeOpacity:l=1,opacity:u=1}=o.style,d=[{fillOpacity:c,strokeOpacity:l,opacity:u},{fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(d,Object.assign(Object.assign({},r),t))};p8.props={};const AF=t=>(n,r,o)=>{const[c]=n,{transform:l="",fillOpacity:u=1,strokeOpacity:d=1,opacity:h=1}=c.style,p="center center",v=[{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:p,fillOpacity:u,strokeOpacity:d,opacity:h,offset:.01},{transform:`${l} scale(1)`.trimStart(),transformOrigin:p,fillOpacity:u,strokeOpacity:d,opacity:h}];return c.animate(v,Object.assign(Object.assign({},o),t))},TF=t=>(n,r,o)=>{const[c]=n,{transform:l="",fillOpacity:u=1,strokeOpacity:d=1,opacity:h=1}=c.style,p="center center",v=[{transform:`${l} scale(1)`.trimStart(),transformOrigin:p},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:p,fillOpacity:u,strokeOpacity:d,opacity:h,offset:.99},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0}];return c.animate(v,Object.assign(Object.assign({},o),t))},g8=t=>(e,n,r)=>{var o,c;const[l]=e,u=((c=(o=l).getTotalLength)===null||c===void 0?void 0:c.call(o))||0,d=[{lineDash:[0,u]},{lineDash:[u,0]}];return l.animate(d,Object.assign(Object.assign({},r),t))};g8.props={};const CF={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},MF={[I.bn.CIRCLE]:["cx","cy","r"],[I.bn.ELLIPSE]:["cx","cy","rx","ry"],[I.bn.RECT]:["x","y","width","height"],[I.bn.IMAGE]:["x","y","width","height"],[I.bn.LINE]:["x1","y1","x2","y2"],[I.bn.POLYLINE]:["points"],[I.bn.POLYGON]:["points"]};function gp(t,e,n=!1){const r={};for(const o of e){const c=t.style[o];c?r[o]=c:n&&(r[o]=CF[o])}return r}const hm=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function d4(t){const{min:e,max:n}=t.getLocalBounds(),[r,o]=e,[c,l]=n,u=l-o,d=c-r;return[r,o,d,u]}function LF(t){const[e,n,r,o]=t;return`
    M ${e} ${n}
    L ${e+r} ${n}
    L ${e+r} ${n+o}
    L ${e} ${n+o}
    Z
  `}function PF(t,e){const[n,r,o,c]=d4(t),l=c/o,u=Math.ceil(Math.sqrt(e/l)),d=Math.ceil(e/u),h=[],p=c/d;let v=0,m=e;for(;m>0;){const b=Math.min(m,u),_=o/b;for(let S=0;S<b;S++){const E=n+S*_,w=r+v*p;h.push(LF([E,w,_,p]))}m-=b,v+=1}return h}function IF(t="pack"){return typeof t=="function"?t:PF}function RF(t,e,n){let{transform:r}=t.style;const{transform:o}=e.style;v8(e,t);let c=hm;if(t.nodeName===I.bn.GROUP){const[d,h,p,v]=d4(t),[m,b,_,S]=d4(e),E=d-m,w=h-b,C=p/_,M=v/S;r=`translate(${E}, ${w}) scale(${C}, ${M})`}else c=c.concat(MF[t.nodeName]||[]);const l=[Object.assign({transform:r!=null?r:"none"},gp(t,c,!0)),Object.assign({transform:o!=null?o:"none"},gp(e,c,!0))];return e.animate(l,n)}function v8(t,e){t.__data__=e.__data__,t.className=e.className,t.markType=e.markType,e.parentNode.replaceChild(t,e)}function kF(t,e){const{nodeName:n}=t;if(n==="path")return t;const r=new I.y$({style:Object.assign(Object.assign({},gp(t,hm)),{d:e})});return v8(r,t),r}function m8(t,e){const n=t.indexOf(e),r=t.lastIndexOf(e);return n===r}function DF(t){return!m8(t,"m")||!m8(t,"M")}function y8(t){const e=(0,I.YR)(t);if(e&&!DF(e))return e}function b8(t){const{nodeName:e}=t;if(e==="path"){const n=pr(t,"attributes");return n.markerEnd||n.markerStart}return!1}function h4(t,e,n,r){const{nodeName:o}=e,{nodeName:c}=n,l=y8(e),u=y8(n),d=o===c&&o!=="path",h=l===void 0||u===void 0,p=b8(e)||b8(n);if(d||h||p)return RF(e,n,r);const v=kF(t,l),m=[Object.assign({},gp(e,hm)),Object.assign({},gp(n,hm))];if(l!==u){m[0].d=l,m[1].d=u;const b=v.animate(m,r);return b.onfinish=()=>{o0(v,n),v.style.d=u,v.style.transform="none"},v.style.transform="none",b}return null}function FF(t,e,n,r){t.style.visibility="hidden";const o=r(t,e.length);return e.map((c,l)=>{const u=new I.y$({style:Object.assign({d:o[l]},gp(t,hm))});return h4(c,u,c,n)})}function NF(t,e,n,r){const o=r(e,t.length),{fillOpacity:c=1,strokeOpacity:l=1,opacity:u=1}=e.style,d=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:c,strokeOpacity:l,opacity:u}],h=e.animate(d,n);return[...t.map((v,m)=>{const b=new I.y$({style:{d:o[m],fill:e.style.fill}});return h4(v,v,b,n)}),h]}const _8=t=>(e,n,r)=>{const o=IF(t.split),c=Object.assign(Object.assign({},r),t),{length:l}=e,{length:u}=n;if(l===1&&u===1||l>1&&u>1){const[d]=e,[h]=n;return h4(d,d,h,c)}if(l===1&&u>1){const[d]=e;return FF(d,n,c,o)}if(l>1&&u===1){const[d]=n;return NF(e,d,c,o)}return null};_8.props={};const x8=(t,e)=>(n,r,o)=>{const[c]=n,{min:[l,u],halfExtents:d}=c.getLocalBounds(),h=d[0]*2,p=d[1]*2,v=new I.y$({style:{d:`M${l},${u}L${l+h},${u}L${l+h},${u+p}L${l},${u+p}Z`}});return c.appendChild(v),c.style.clipPath=v,f4(t,e)([v],r,o)};x8.props={};const S8=(t,e)=>(n,r,o)=>{const[c]=n,{min:[l,u],halfExtents:d}=c.getLocalBounds(),h=d[0]*2,p=d[1]*2,v=new I.y$({style:{d:`M${l},${u}L${l+h},${u}L${l+h},${u+p}L${l},${u+p}Z`}});return c.appendChild(v),c.style.clipPath=v,f8(t,e)([v],r,o)};S8.props={};var BF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function jF(t,{elements:e,datum:n,groupKey:r=_=>_,regionGroupKey:o=_=>_,link:c=!1,background:l=!1,delay:u=60,scale:d,coordinate:h,emitter:p,state:v={},region:m=!1,regionEleFilter:b=_=>p_.includes(_.markType)}){var _,S;const E=(_=e(t))!==null&&_!==void 0?_:[],w=m?E.filter(b):E,C=new Set(w),M=m?o:r,L=Nr(w,M),R=a5({elementsof:e,root:t,coordinate:h,scale:d}),j=pl(w,n),[z,H]=u_(Object.assign({elements:w,valueof:j,link:c,coordinate:h},xn(v.active,"link"))),[$,dt,gt]=ih(Object.assign({document:t.ownerDocument,scale:d,coordinate:h,background:l,valueof:j},xn(v.active,"background"))),It=an(v,{active:Object.assign({},((S=v.active)===null||S===void 0?void 0:S.offset)&&{transform:(...Ze)=>{const en=v.active.offset(...Ze),[,rn]=Ze;return f_(w[rn],en,h)}})}),rt=yg(It,w),{updateState:lt,removeState:pt,hasState:bt}=rt(j);let Ht;const Rt=Ze=>{const{nativeEvent:en=!0}=Ze;let rn=Ze.target;if(m&&(rn=R(Ze)),!C.has(rn))return;Ht&&clearTimeout(Ht);const We=M(rn),dn=L.get(We),yn=new Set(dn);for(const wn of w)yn.has(wn)?bt(wn,"active")||lt(wn,"active"):(lt(wn,"inactive"),H(wn)),wn!==rn&&dt(wn);$(rn),z(dn),en&&p.emit("element:highlight",{nativeEvent:en,data:{data:n(rn),group:dn.map(n)}})},jt=()=>{Ht&&clearTimeout(Ht),Ht=setTimeout(()=>{oe(),Ht=null},u)},oe=(Ze=!0)=>{for(const en of w)pt(en,"active","inactive"),dt(en),H(en);Ze&&p.emit("element:unhighlight",{nativeEvent:Ze})},Se=Ze=>{let en=Ze.target;if(m&&(en=R(Ze)),!en){u>0?jt():oe();return}l&&!gt(en)||!l&&!C.has(en)||(u>0?jt():oe())},xe=()=>{oe()};t.addEventListener("pointerover",Rt),t.addEventListener("pointermove",Rt),t.addEventListener("pointerout",Se),t.addEventListener("pointerleave",xe);const Pe=Ze=>{const{nativeEvent:en}=Ze;en||oe(!1)},Ke=Ze=>{const{nativeEvent:en}=Ze;if(en)return;const{data:rn}=Ze.data,We=d_(w,rn,n);We&&Rt({target:We,nativeEvent:!1})};return p.on("element:highlight",Ke),p.on("element:unhighlight",Pe),()=>{t.removeEventListener("pointerover",Rt),t.removeEventListener("pointermove",Rt),t.removeEventListener("pointerout",Se),t.removeEventListener("pointerleave",xe),p.off("element:highlight",Ke),p.off("element:unhighlight",Pe);for(const Ze of w)dt(Ze),H(Ze)}}function J3(t){var{delay:e,createGroup:n,createRegionGroup:r,background:o=!1,link:c=!1}=t,l=BF(t,["delay","createGroup","createRegionGroup","background","link"]);return(u,d,h)=>{const{container:p,view:v,options:m}=u,{scale:b,coordinate:_}=v,S=zo(p);return jF(S,Object.assign({elements:lc,datum:Es(v),groupKey:n?n(v):void 0,regionGroupKey:r?r(v):hl(v),coordinate:_,scale:b,state:$u(m,[["active",o?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:o,link:c,delay:e,emitter:h},l))}}J3.props={reapplyWhenUpdate:!0};function O8(t){return J3(Object.assign(Object.assign({},t),{createGroup:hl}))}O8.props={reapplyWhenUpdate:!0};function E8(t){return J3(Object.assign(Object.assign({},t),{createGroup:i5}))}E8.props={reapplyWhenUpdate:!0};var zF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function UF(t,{elements:e,datum:n,groupKey:r=S=>S,regionGroupKey:o=S=>S,link:c=!1,single:l=!1,multipleSelectHotkey:u,coordinate:d,background:h=!1,scale:p,emitter:v,state:m={},region:b=!1,regionEleFilter:_=S=>p_.includes(S.markType)}){var S;const E=e(t),w=new Set(E),C=a5({elementsof:e,root:t,coordinate:d,scale:p}),M=Nr(E,r),L=Nr(E,o),R=pl(E,n),[j,z]=u_(Object.assign({link:c,elements:E,valueof:R,coordinate:d},xn(m.selected,"link"))),[H,$]=ih(Object.assign({document:t.ownerDocument,background:h,coordinate:d,scale:p,valueof:R},xn(m.selected,"background"))),dt=an(m,{selected:Object.assign({},((S=m.selected)===null||S===void 0?void 0:S.offset)&&{transform:(...We)=>{const dn=m.selected.offset(...We),[,yn]=We;return f_(E[yn],dn,d)}})}),gt=yg(dt,E),{updateState:It,removeState:rt,hasState:lt}=gt(R);let pt=!l,bt=null;const Ht=(We=!0)=>{for(const dn of E)rt(dn,"selected","unselected"),z(dn),$(dn);We&&v.emit("element:unselect",{nativeEvent:!0})},Rt=({event:We,element:dn,nativeEvent:yn=!0,filter:wn=Nn=>!0,groupBy:Sn=r,groupMap:Pn=M})=>{const Nn=E.filter(wn);if(lt(dn,"selected"))Ht();else{const jn=Sn(dn),or=Pn.get(jn),Yn=new Set(or);for(const Xn of Nn)Yn.has(Xn)?It(Xn,"selected"):(It(Xn,"unselected"),z(Xn)),Xn!==dn&&$(Xn);if(j(or),H(dn),!yn)return;v.emit("element:select",Object.assign(Object.assign({},We),{nativeEvent:yn,data:{data:[n(dn),...or.map(n)]}}))}},jt=({event:We,element:dn,nativeEvent:yn=!0,filter:wn=Nn=>!0,groupBy:Sn=r,groupMap:Pn=M})=>{const Nn=Sn(dn),jn=Pn.get(Nn),or=new Set(jn),Yn=E.filter(wn);if(lt(dn,"selected")){if(!E.some(lr=>!or.has(lr)&&lt(lr,"selected")))return Ht();for(const lr of jn)It(lr,"unselected"),z(lr),$(lr)}else{const Xn=jn.some(lr=>lt(lr,"selected"));for(const lr of Yn)or.has(lr)?It(lr,"selected"):lt(lr,"selected")||It(lr,"unselected");!Xn&&c&&j(jn),H(dn)}yn&&v.emit("element:select",Object.assign(Object.assign({},We),{nativeEvent:yn,data:{data:E.filter(Xn=>lt(Xn,"selected")).map(n)}}))},oe=We=>{if(w.has(We))return!0;for(const dn of w)if(rh(dn,wn=>wn===We))return!0;return!1},Se=We=>{if(w.has(We))return We;for(const dn of w){let yn=null;if(rh(dn,wn=>{wn===We&&(yn=dn)}),yn)return yn}return We},xe=We=>{const{target:dn,nativeEvent:yn=!0}=We,wn=pt?jt:Rt;let Sn=dn;const Pn=oe(dn);return!b||Pn?Pn?wn({event:We,element:Se(Sn),nativeEvent:yn,groupBy:r}):Ht():(Sn=C(We),w.has(Sn)?wn({event:We,element:Sn,nativeEvent:yn,filter:_,groupBy:o,groupMap:L}):Ht())},Pe=Array.isArray(u)?u:[u],Ke=We=>{Pe.includes(We.code)&&!bt&&(bt=We.code,pt=!0)},Ze=We=>{We.code===bt&&(bt=null,pt=!1)};t.addEventListener("click",xe),u&&(pt=!1,document.addEventListener("keydown",Ke),document.addEventListener("keyup",Ze));const en=We=>{const{nativeEvent:dn,data:yn}=We;if(dn)return;const wn=pt?yn.data:yn.data.slice(0,1);for(const Sn of wn){const Pn=d_(E,Sn,n);xe({target:Pn,nativeEvent:!1})}},rn=()=>{Ht(!1)};return v.on("element:select",en),v.on("element:unselect",rn),()=>{for(const We of E)z(We);t.removeEventListener("click",xe),u&&(document.removeEventListener("keydown",Ke),document.removeEventListener("keyup",Ze)),v.off("element:select",en),v.off("element:unselect",rn)}}function tS(t){var{createGroup:e,createRegionGroup:n,background:r=!1,link:o=!1}=t,c=zF(t,["createGroup","createRegionGroup","background","link"]);return(l,u,d)=>{const{container:h,view:p,options:v}=l,{coordinate:m,scale:b}=p,_=zo(h);return UF(_,Object.assign({elements:lc,datum:Es(p),groupKey:e?e(p):void 0,regionGroupKey:n?n(p):hl(p),coordinate:m,scale:b,state:$u(v,[["selected",r?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:r,link:o,emitter:d},c))}}tS.props={reapplyWhenUpdate:!0};function w8(t){return tS(Object.assign(Object.assign({},t),{createGroup:hl}))}w8.props={reapplyWhenUpdate:!0};function A8(t){return tS(Object.assign(Object.assign({},t),{createGroup:i5}))}A8.props={reapplyWhenUpdate:!0};function ZF(t){const{coordinate:e={}}=t,{transform:n=[]}=e,r=n.find(c=>c.type==="fisheye");if(r)return r;const o={type:"fisheye"};return n.push(o),e.transform=n,t.coordinate=e,o}function HF({wait:t=30,leading:e,trailing:n=!1}){return r=>{const{options:o,update:c,setState:l,container:u}=r,d=zo(u),h=Cc(p=>{const v=Aa(d,p);if(!v){l("fisheye"),c();return}l("fisheye",m=>{const b=an({},m,{interaction:{tooltip:{preserve:!0}}});for(const w of b.marks)w.animate=!1;const[_,S]=v,E=ZF(b);return E.focusX=_,E.focusY=S,E.visual=!0,b}),c()},t,{leading:e,trailing:n});return d.addEventListener("pointerenter",h),d.addEventListener("pointermove",h),d.addEventListener("pointerleave",h),()=>{d.removeEventListener("pointerenter",h),d.removeEventListener("pointermove",h),d.removeEventListener("pointerleave",h)}}}var VF=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},WF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function GF(t){const{transform:e=[]}=t,n=e.find(o=>o.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return e.push(r),t.transform=e,r}function $F(t,e,n){const[r]=Array.from(t.entries()).filter(([o])=>o.type===e).map(([o])=>{const{encode:c}=o,l=u=>{const d=c[u];return[u,d?d.value:void 0]};return Object.fromEntries(n.map(l))});return r}function T8(t){var{wait:e=20,leading:n,trailing:r=!1,labelFormatter:o=l=>`${l}`}=t,c=WF(t,["wait","leading","trailing","labelFormatter"]);return l=>{const{view:u,container:d,update:h,setState:p}=l,{markState:v,scale:m,coordinate:b}=u,_=$F(v,"line",["x","y","series"]);if(!_)return;const{y:S,x:E,series:w=[]}=_,C=S.map((Ht,Rt)=>Rt),M=Ea(C.map(Ht=>E[Ht])),L=zo(d),R=d.getElementsByClassName(K),j=d.getElementsByClassName(Tt),H=Nr(j,Ht=>Ht.__data__.key.split("-")[0]),$=new I.x1({style:Object.assign({x1:0,y1:0,x2:0,y2:L.getAttribute("height"),stroke:"black",lineWidth:1},xn(c,"rule"))}),dt=new I.xv({style:Object.assign({x:0,y:L.getAttribute("height"),text:"",fontSize:10},xn(c,"label"))});$.append(dt),L.appendChild($);const gt=(Ht,Rt,jt)=>{const[oe]=Ht.invert(jt),Se=Rt.invert(oe);return M[qA(M,Se)]},It=(Ht,Rt)=>{$.setAttribute("x1",Ht[0]),$.setAttribute("x2",Ht[0]),dt.setAttribute("text",o(Rt))};let rt;const lt=Ht=>VF(this,void 0,void 0,function*(){const{x:Rt}=m,jt=gt(b,Rt,Ht);It(Ht,jt),p("chartIndex",Se=>{const xe=an({},Se),Pe=xe.marks.find(We=>We.type==="line"),Ze=wr(Xp(C,We=>wr(We,dn=>+S[dn])/To(We,dn=>+S[dn]),We=>w[We]).values()),en=[1/Ze,Ze];an(Pe,{scale:{y:{domain:en}}});const rn=GF(Pe);rn.groupBy="color",rn.basis=(We,dn)=>{const yn=We[xs(wn=>E[+wn]).center(We,jt)];return dn[yn]};for(const We of xe.marks)We.animate=!1;return xe}),rt=(yield h("chartIndex")).view}),pt=Ht=>{const{scale:Rt,coordinate:jt}=rt,{x:oe,y:Se}=Rt,xe=gt(jt,oe,Ht);It(Ht,xe);for(const Pe of R){const{seriesIndex:Ke,key:Ze}=Pe.__data__,en=Ke[xs(Pn=>E[+Pn]).center(Ke,xe)],rn=[0,Se.map(1)],We=[0,Se.map(S[en]/S[Ke[0]])],[,dn]=jt.map(rn),[,yn]=jt.map(We),wn=dn-yn;Pe.setAttribute("transform",`translate(0, ${wn})`);const Sn=H.get(Ze)||[];for(const Pn of Sn)Pn.setAttribute("dy",wn)}},bt=Cc(Ht=>{const Rt=Aa(L,Ht);Rt&&pt(Rt)},e,{leading:n,trailing:r});return lt([0,0]),L.addEventListener("pointerenter",bt),L.addEventListener("pointermove",bt),L.addEventListener("pointerleave",bt),()=>{$.remove(),L.removeEventListener("pointerenter",bt),L.removeEventListener("pointermove",bt),L.removeEventListener("pointerleave",bt)}}}T8.props={reapplyWhenUpdate:!0};var eS=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const C8="legend-category",YF="legend-continuous",XF="items-item",qF="legend-category-item-marker",KF="legend-category-item-label";function M8(t){return t.getElementsByClassName(qF)[0]}function L8(t){return t.getElementsByClassName(KF)[0]}function P8(t){return t.getElementsByClassName(XF)}function p4(t){return t.getElementsByClassName(C8)}function I8(t){return t.getElementsByClassName(YF)}function QF(t,e){[...p4(t),...I8(t)].forEach(r=>{e(r,o=>o)})}function g4(t){let e=t.parentNode;for(;e&&!e.__data__;)e=e.parentNode;return e.__data__}function t$(t){let e=t;for(;e&&!e.attr("class").startsWith("legend");)e=e.children[0];return e.attributes}function JF(t,{legends:e,marker:n,label:r,datum:o,filter:c,emitter:l,channel:u,state:d={}}){const h=new Map,p=new Map,v=new Map,{unselected:m={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=d,b={unselected:xn(m,"marker")},_={unselected:xn(m,"label")},{setState:S,removeState:E}=oa(b,void 0),{setState:w,removeState:C}=oa(_,void 0),M=Array.from(e(t));let L=M.map(o);const R=()=>{for(const H of M){const $=o(H),dt=n(H),gt=r(H);L.includes($)?(E(dt,"unselected"),C(gt,"unselected")):(S(dt,"unselected"),w(gt,"unselected"))}};for(const H of M){const $=()=>{qa(t,"pointer")},dt=()=>{o5(t)},gt=It=>eS(this,void 0,void 0,function*(){const rt=o(H),lt=L.indexOf(rt);lt===-1?L.push(rt):L.splice(lt,1),yield c(L),R();const{nativeEvent:pt=!0}=It;pt&&(L.length===M.length?l.emit("legend:reset",{nativeEvent:pt}):l.emit("legend:filter",Object.assign(Object.assign({},It),{nativeEvent:pt,data:{channel:u,values:L}})))});H.addEventListener("click",gt),H.addEventListener("pointerenter",$),H.addEventListener("pointerout",dt),h.set(H,gt),p.set(H,$),v.set(H,dt)}const j=H=>eS(this,void 0,void 0,function*(){const{nativeEvent:$}=H;if($)return;const{data:dt}=H,{channel:gt,values:It}=dt;gt===u&&(L=It,yield c(L),R())}),z=H=>eS(this,void 0,void 0,function*(){const{nativeEvent:$}=H;$||(L=M.map(o),yield c(L),R())});return l.on("legend:filter",j),l.on("legend:reset",z),()=>{for(const H of M)H.removeEventListener("click",h.get(H)),H.removeEventListener("pointerenter",p.get(H)),H.removeEventListener("pointerout",v.get(H)),l.off("legend:filter",j),l.off("legend:reset",z)}}function tN(t,{legend:e,filter:n,emitter:r,channel:o}){const c=({detail:{value:l}})=>{n(l),r.emit({nativeEvent:!0,data:{channel:o,values:l}})};return e.addEventListener("valuechange",c),()=>{e.removeEventListener("valuechange",c)}}function R8(t,{legend:e,channel:n,value:r,ordinal:o,channels:c,allChannels:l,facet:u=!1}){return eS(this,void 0,void 0,function*(){const{view:d,update:h,setState:p}=t;p(e,v=>{const{marks:m}=v,b=m.map(_=>{if(_.type==="legends")return _;const{transform:S=[],data:E=[]}=_,w=S.findIndex(({type:L})=>L.startsWith("group")||L.startsWith("bin")),C=[...S];E.length&&C.splice(w+1,0,{type:"filter",[n]:{value:r,ordinal:o}});const M=Object.fromEntries(c.map(L=>[L,{domain:d.scale[L].getOptions().domain}]));return an({},_,Object.assign(Object.assign({transform:C,scale:M},!o&&{animate:!1}),{legend:u?!1:Object.fromEntries(l.map(L=>[L,{preserve:!0}]))}))});return Object.assign(Object.assign({},v),{marks:b})}),yield h()})}function eN(t,e){for(const n of t)R8(n,Object.assign(Object.assign({},e),{facet:!0}))}function nN(){return(t,e,n)=>{const{container:r}=t,o=e.filter(v=>v!==t),c=o.length>0,l=v=>g4(v).scales.map(m=>m.name),u=[...p4(r),...I8(r)],d=u.flatMap(l),h=c?Cc(eN,50,{trailing:!0}):Cc(R8,50,{trailing:!0}),p=u.map(v=>{const{name:m,domain:b}=g4(v).scales[0],_=l(v),S={legend:v,channel:m,channels:_,allChannels:d};return v.className===C8?JF(r,{legends:P8,marker:M8,label:L8,datum:E=>{const{__data__:w}=E,{index:C}=w;return b[C]},filter:E=>{const w=Object.assign(Object.assign({},S),{value:E,ordinal:!0});h(c?o:t,w)},state:v.attributes.state,channel:m,emitter:n}):tN(r,{legend:v,filter:E=>{const w=Object.assign(Object.assign({},S),{value:E,ordinal:!1});h(c?o:t,w)},emitter:n,channel:m})});return()=>{p.forEach(v=>v())}}}function rN(){return(t,e,n)=>{const{container:r,view:o,options:c}=t,l=p4(r),u=lc(r),d=b=>g4(b).scales[0].name,h=b=>{const{scale:{[b]:_}}=o;return _},p=$u(c,["active","inactive"]),v=pl(u,Es(o)),m=[];for(const b of l){const _=oe=>{const{data:Se}=b.attributes,{__data__:xe}=oe,{index:Pe}=xe;return Se[Pe].label},S=d(b),E=P8(b),w=h(S),C=Nr(u,oe=>w.invert(oe.__data__[S])),{state:M={}}=b.attributes,{inactive:L={}}=M,{setState:R,removeState:j}=oa(p,v),z={inactive:xn(L,"marker")},H={inactive:xn(L,"label")},{setState:$,removeState:dt}=oa(z),{setState:gt,removeState:It}=oa(H),rt=oe=>{for(const Se of E){const xe=M8(Se),Pe=L8(Se);Se===oe||oe===null?(dt(xe,"inactive"),It(Pe,"inactive")):($(xe,"inactive"),gt(Pe,"inactive"))}},lt=(oe,Se)=>{const xe=_(Se),Pe=new Set(C.get(xe));for(const Ze of u)Pe.has(Ze)?R(Ze,"active"):R(Ze,"inactive");rt(Se);const{nativeEvent:Ke=!0}=oe;Ke&&n.emit("legend:highlight",Object.assign(Object.assign({},oe),{nativeEvent:Ke,data:{channel:S,value:xe}}))},pt=new Map;for(const oe of E){const Se=xe=>{lt(xe,oe)};oe.addEventListener("pointerover",Se),pt.set(oe,Se)}const bt=oe=>{for(const xe of u)j(xe,"inactive","active");rt(null);const{nativeEvent:Se=!0}=oe;Se&&n.emit("legend:unhighlight",{nativeEvent:Se})},Ht=oe=>{const{nativeEvent:Se,data:xe}=oe;if(Se)return;const{channel:Pe,value:Ke}=xe;if(Pe!==S)return;const Ze=E.find(en=>_(en)===Ke);Ze&&lt({nativeEvent:!1},Ze)},Rt=oe=>{const{nativeEvent:Se}=oe;Se||bt({nativeEvent:!1})};b.addEventListener("pointerleave",bt),n.on("legend:highlight",Ht),n.on("legend:unhighlight",Rt);const jt=()=>{b.removeEventListener(bt),n.off("legend:highlight",Ht),n.off("legend:unhighlight",Rt);for(const[oe,Se]of pt)oe.removeEventListener(Se)};m.push(jt)}return()=>m.forEach(b=>b())}}var Ra=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function iN(t,e){const[n,r,o,c]=t,[l,u,d,h]=e;return!(l>o||d<n||u>c||h<r)}function oN(t,e,n,r,o){const[c,l,u,d]=o;return[Math.max(c,Math.min(t,n)),Math.max(l,Math.min(e,r)),Math.min(u,Math.max(t,n)),Math.min(d,Math.max(e,r))]}function aN(t){const{width:e,height:n}=t.getBBox();return[0,0,e,n]}function Fc(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}const k8=ac(t=>{const e=t.attributes,{x:n,y:r,width:o,height:c,class:l,renders:u={},handleSize:d=10,document:h}=e,p=Ra(e,["x","y","width","height","class","renders","handleSize","document"]);if(!h||o===void 0||c===void 0||n===void 0||r===void 0)return;const v=d/2,m=(Ke,Ze,en)=>{Ke.handle||(Ke.handle=en.createElement("rect"),Ke.append(Ke.handle));const{handle:rn}=Ke;return rn.attr(Ze),rn},b=xn(iu(p,"handleNW","handleNE"),"handleN"),{render:_=m}=b,S=Ra(b,["render"]),E=xn(p,"handleE"),{render:w=m}=E,C=Ra(E,["render"]),M=xn(iu(p,"handleSE","handleSW"),"handleS"),{render:L=m}=M,R=Ra(M,["render"]),j=xn(p,"handleW"),{render:z=m}=j,H=Ra(j,["render"]),$=xn(p,"handleNW"),{render:dt=m}=$,gt=Ra($,["render"]),It=xn(p,"handleNE"),{render:rt=m}=It,lt=Ra(It,["render"]),pt=xn(p,"handleSE"),{render:bt=m}=pt,Ht=Ra(pt,["render"]),Rt=xn(p,"handleSW"),{render:jt=m}=Rt,oe=Ra(Rt,["render"]),Se=(Ke,Ze)=>{const{id:en}=Ke,rn=Ze(Ke,Ke.attributes,h);rn.id=en,rn.style.draggable=!0},xe=Ke=>()=>{const Ze=ac(en=>Se(en,Ke));return new Ze({})},Pe=Gn(t).attr("className",l).style("transform",`translate(${n}, ${r})`).style("draggable",!0);Pe.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(Fc,Object.assign(Object.assign({width:o,height:c},iu(p,"handle")),{transform:void 0})),Pe.maybeAppend("handle-n",xe(_)).style("x",v).style("y",-v).style("width",o-d).style("height",d).style("fill","transparent").call(Fc,S),Pe.maybeAppend("handle-e",xe(w)).style("x",o-v).style("y",v).style("width",d).style("height",c-d).style("fill","transparent").call(Fc,C),Pe.maybeAppend("handle-s",xe(L)).style("x",v).style("y",c-v).style("width",o-d).style("height",d).style("fill","transparent").call(Fc,R),Pe.maybeAppend("handle-w",xe(z)).style("x",-v).style("y",v).style("width",d).style("height",c-d).style("fill","transparent").call(Fc,H),Pe.maybeAppend("handle-nw",xe(dt)).style("x",-v).style("y",-v).style("width",d).style("height",d).style("fill","transparent").call(Fc,gt),Pe.maybeAppend("handle-ne",xe(rt)).style("x",o-v).style("y",-v).style("width",d).style("height",d).style("fill","transparent").call(Fc,lt),Pe.maybeAppend("handle-se",xe(bt)).style("x",o-v).style("y",c-v).style("width",d).style("height",d).style("fill","transparent").call(Fc,Ht),Pe.maybeAppend("handle-sw",xe(jt)).style("x",-v).style("y",c-v).style("width",d).style("height",d).style("fill","transparent").call(Fc,oe)});function v4(t,e){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:o=()=>{},brushstarted:c=()=>{},brushupdated:l=()=>{},extent:u=aN(t),brushRegion:d=(rn,We,dn,yn,wn)=>[rn,We,dn,yn],reverse:h=!1,fill:p="#777",fillOpacity:v="0.3",stroke:m="#fff",selectedHandles:b=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=e,_=Ra(e,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let S=null,E=null,w=null,C=null,M=null,L=!1;const[R,j,z,H]=u;qa(t,"crosshair"),t.style.draggable=!0;const $=(rn,We,dn)=>{if(c(dn),C&&C.remove(),M&&M.remove(),S=[rn,We],h)return dt();gt()},dt=()=>{M=new I.y$({style:Object.assign(Object.assign({},_),{fill:p,fillOpacity:v,stroke:m,pointerEvents:"none"})}),C=new k8({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(M),t.appendChild(C)},gt=()=>{C=new k8({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},_),{fill:p,fillOpacity:v,stroke:m,draggable:!0}),className:"mask"}),t.appendChild(C)},It=(rn=!0)=>{C&&C.remove(),M&&M.remove(),S=null,E=null,w=null,L=!1,C=null,M=null,r(rn)},rt=(rn,We,dn=!0)=>{const[yn,wn,Sn,Pn]=oN(rn[0],rn[1],We[0],We[1],u),[Nn,jn,or,Yn]=d(yn,wn,Sn,Pn,u);return h?pt(Nn,jn,or,Yn):lt(Nn,jn,or,Yn),n(Nn,jn,or,Yn,dn),[Nn,jn,or,Yn]},lt=(rn,We,dn,yn)=>{C.style.x=rn,C.style.y=We,C.style.width=dn-rn,C.style.height=yn-We},pt=(rn,We,dn,yn)=>{M.style.d=`
      M${R},${j}L${z},${j}L${z},${H}L${R},${H}Z
      M${rn},${We}L${rn},${yn}L${dn},${yn}L${dn},${We}Z
    `,C.style.x=rn,C.style.y=We,C.style.width=dn-rn,C.style.height=yn-We},bt=rn=>{const We=(jn,or,Yn,Xn,lr)=>jn+or<Xn?Xn-or:jn+Yn>lr?lr-Yn:jn,dn=rn[0]-w[0],yn=rn[1]-w[1],wn=We(dn,S[0],E[0],R,z),Sn=We(yn,S[1],E[1],j,H),Pn=[S[0]+wn,S[1]+Sn],Nn=[E[0]+wn,E[1]+Sn];rt(Pn,Nn)},Ht={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},Rt=rn=>oe(rn)||jt(rn),jt=rn=>{const{id:We}=rn;return b.indexOf(We)===-1?!1:new Set(Object.keys(Ht)).has(We)},oe=rn=>rn===C.getElementById("selection"),Se=rn=>{const{target:We}=rn,[dn,yn]=Xa(t,rn);if(!C||!Rt(We)){$(dn,yn,rn),L=!0;return}Rt(We)&&(w=[dn,yn])},xe=rn=>{const{target:We}=rn,dn=Xa(t,rn);if(!S)return;if(!w)return rt(S,dn);if(oe(We))return bt(dn);const[yn,wn]=[dn[0]-w[0],dn[1]-w[1]],{id:Sn}=We;if(Ht[Sn]){const[Pn,Nn,jn,or]=Ht[Sn].vector;return rt([S[0]+yn*Pn,S[1]+wn*Nn],[E[0]+yn*jn,E[1]+wn*or])}},Pe=rn=>{if(w){w=null;const{x:Sn,y:Pn,width:Nn,height:jn}=C.style;S=[Sn,Pn],E=[Sn+Nn,Pn+jn],l(Sn,Pn,Sn+Nn,Pn+jn,rn);return}E=Xa(t,rn);const[We,dn,yn,wn]=rt(S,E);L=!1,o(We,dn,yn,wn,rn)},Ke=rn=>{const{target:We}=rn;C&&!Rt(We)&&It()},Ze=rn=>{const{target:We}=rn;!C||!Rt(We)||L?qa(t,"crosshair"):oe(We)?qa(t,"move"):jt(We)&&qa(t,Ht[We.id].cursor)},en=()=>{qa(t,"default")};return t.addEventListener("dragstart",Se),t.addEventListener("drag",xe),t.addEventListener("dragend",Pe),t.addEventListener("click",Ke),t.addEventListener("pointermove",Ze),t.addEventListener("pointerleave",en),{mask:C,move(rn,We,dn,yn,wn=!0){C||$(rn,We,{}),S=[rn,We],E=[dn,yn],rt([rn,We],[dn,yn],wn)},remove(rn=!0){C&&It(rn)},destroy(){C&&It(!1),qa(t,"default"),t.removeEventListener("dragstart",Se),t.removeEventListener("drag",xe),t.removeEventListener("dragend",Pe),t.removeEventListener("click",Ke),t.removeEventListener("pointermove",Ze),t.removeEventListener("pointerleave",en)}}}function m4(t,e,n){return e.filter(r=>{if(r===t)return!1;const{interaction:o={}}=r.options;return Object.values(o).find(c=>c.brushKey===n)})}function sN(t,e,n){return m4(t,e,n).map(r=>zo(r.container))}function cN(t,e,n){return m4(t,e,n).map(r=>r.options)}function D8(t,e){var{elements:n,selectedHandles:r,siblings:o=xe=>[],datum:c,brushRegion:l,extent:u,reverse:d,scale:h,coordinate:p,series:v=!1,key:m=xe=>xe,bboxOf:b=xe=>{const{x:Pe,y:Ke,width:Ze,height:en}=xe.style;return{x:Pe,y:Ke,width:Ze,height:en}},state:_={},emitter:S}=e,E=Ra(e,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const w=n(t),C=o(t),M=C.flatMap(n),L=pl(w,c),R=xn(E,"mask"),{setState:j,removeState:z}=oa(_,L),H=new Map,{width:$,height:dt,x:gt=0,y:It=0}=b(t),rt=u||[0,0,$,dt],lt=()=>{for(const xe of[...w,...M])z(xe,"active","inactive")},pt=(xe,Pe,Ke,Ze)=>{var en;for(const We of C)(en=We.brush)===null||en===void 0||en.remove();const rn=new Set;for(const We of w){const{min:dn,max:yn}=We.getLocalBounds(),[wn,Sn]=dn,[Pn,Nn]=yn;iN([wn,Sn,Pn,Nn],[xe,Pe,Ke,Ze])?(j(We,"active"),rn.add(m(We))):j(We,"inactive")}for(const We of M)rn.has(m(We))?j(We,"active"):j(We,"inactive")},bt=()=>{for(const xe of w)z(xe,"inactive");for(const xe of H.values())xe.remove();H.clear()},Ht=(xe,Pe,Ke,Ze)=>{const en=We=>{const dn=We.cloneNode();return dn.__data__=We.__data__,We.parentNode.appendChild(dn),H.set(We,dn),dn},rn=new I.UL({style:{x:xe+gt,y:Pe+It,width:Ke-xe,height:Ze-Pe}});t.appendChild(rn);for(const We of w){const dn=H.get(We)||en(We);dn.style.clipPath=rn,j(We,"inactive"),j(dn,"active")}},Rt=v4(t,Object.assign(Object.assign({},R),{extent:rt,brushRegion:l,reverse:d,selectedHandles:r,brushended:xe=>{const Pe=v?bt:lt;xe&&S.emit("brush:remove",{nativeEvent:!0}),Pe()},brushed:(xe,Pe,Ke,Ze,en)=>{const rn=Uu(xe,Pe,Ke,Ze,h,p);en&&S.emit("brush:highlight",{nativeEvent:!0,data:{selection:rn}}),(v?Ht:pt)(xe,Pe,Ke,Ze)},brushcreated:(xe,Pe,Ke,Ze,en)=>{const rn=Uu(xe,Pe,Ke,Ze,h,p);S.emit("brush:end",Object.assign(Object.assign({},en),{nativeEvent:!0,data:{selection:rn}}))},brushupdated:(xe,Pe,Ke,Ze,en)=>{const rn=Uu(xe,Pe,Ke,Ze,h,p);S.emit("brush:end",Object.assign(Object.assign({},en),{nativeEvent:!0,data:{selection:rn}}))},brushstarted:xe=>{S.emit("brush:start",xe)}})),jt=({nativeEvent:xe,data:Pe})=>{if(xe)return;const{selection:Ke}=Pe,[Ze,en,rn,We]=KA(Ke,h,p);Rt.move(Ze,en,rn,We,!1)};S.on("brush:highlight",jt);const oe=({nativeEvent:xe}={})=>{xe||Rt.remove(!1)};S.on("brush:remove",oe);const Se=Rt.destroy.bind(Rt);return Rt.destroy=()=>{S.off("brush:highlight",jt),S.off("brush:remove",oe),Se()},Rt}function y4(t){var{facet:e,brushKey:n}=t,r=Ra(t,["facet","brushKey"]);return(o,c,l)=>{const{container:u,view:d,options:h}=o,p=zo(u),v={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},m=["active",["inactive",{opacity:.5}]],{scale:b,coordinate:_}=d;if(e){const E=p.getBounds(),w=E.min[0],C=E.min[1],M=E.max[0],L=E.max[1];return D8(p.parentNode.parentNode,Object.assign(Object.assign({elements:()=>c_(o,c),datum:Es(vg(o,c).map(R=>R.view)),brushRegion:(R,j,z,H)=>[R,j,z,H],extent:[w,C,M,L],state:$u(vg(o,c).map(R=>R.options),m),emitter:l,scale:b,coordinate:_,selectedHandles:void 0},v),r))}const S=D8(p,Object.assign(Object.assign({elements:lc,key:E=>E.__data__.key,siblings:()=>sN(o,c,n),datum:Es([d,...m4(o,c,n).map(E=>E.view)]),brushRegion:(E,w,C,M)=>[E,w,C,M],extent:void 0,state:$u([h,...cN(o,c,n)],m),emitter:l,scale:b,coordinate:_,selectedHandles:void 0},v),r));return p.brush=S,()=>S.destroy()}}function b4(t,e,n,r,o){const[,c,,l]=o;return[t,c,n,l]}function lN(t){return y4(Object.assign(Object.assign({},t),{brushRegion:b4,selectedHandles:["handle-e","handle-w"]}))}function _4(t,e,n,r,o){const[c,,l]=o;return[c,e,l,r]}function uN(t){return y4(Object.assign(Object.assign({},t),{brushRegion:_4,selectedHandles:["handle-n","handle-s"]}))}var x4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const fN="axis",dN="axis-line",hN="axis-main-group",F8="axis-hot-area";function pN(t){return t.getElementsByClassName(fN)}function N8(t){return t.getElementsByClassName(dN)[0]}function gN(t){return t.getElementsByClassName(hN)[0]}function B8(t){return gN(t).getLocalBounds()}function vN(t,e){var{cross:n,offsetX:r,offsetY:o}=e,c=x4(e,["cross","offsetX","offsetY"]);const l=B8(t),u=N8(t),[d]=u.getLocalBounds().min,[h,p]=l.min,[v,m]=l.max,b=(v-h)*2;return{brushRegion:_4,hotZone:new I.UL({className:F8,style:Object.assign({width:n?b/2:b,transform:`translate(${(n?h:d-b/2).toFixed(2)}, ${p})`,height:m-p},c)}),extent:n?(_,S,E,w)=>[-1/0,S,1/0,w]:(_,S,E,w)=>[Math.floor(h-r),S,Math.ceil(v-r),w]}}function mN(t,e){var{offsetY:n,offsetX:r,cross:o=!1}=e,c=x4(e,["offsetY","offsetX","cross"]);const l=B8(t),u=N8(t),[,d]=u.getLocalBounds().min,[h,p]=l.min,[v,m]=l.max,b=m-p;return{brushRegion:b4,hotZone:new I.UL({className:F8,style:Object.assign({width:v-h,height:o?b:b*2,transform:`translate(${h}, ${o?p:d-b})`},c)}),extent:o?(_,S,E,w)=>[_,-1/0,E,1/0]:(_,S,E,w)=>[_,Math.floor(p-n),E,Math.ceil(m-n)]}}function yN(t,e){var{axes:n,elements:r,points:o,horizontal:c,datum:l,offsetY:u,offsetX:d,reverse:h=!1,state:p={},emitter:v,coordinate:m}=e,b=x4(e,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const _=r(t),S=n(t),E=pl(_,l),{setState:w,removeState:C}=oa(p,E),M=new Map,L=xn(b,"mask"),R=jt=>Array.from(M.values()).every(([oe,Se,xe,Pe])=>jt.some(([Ke,Ze])=>Ke>=oe&&Ke<=xe&&Ze>=Se&&Ze<=Pe)),j=S.map(jt=>jt.attributes.scale),z=jt=>jt.length>2?[jt[0],jt[jt.length-1]]:jt,H=new Map,$=()=>{H.clear();for(let jt=0;jt<S.length;jt++){const oe=j[jt],{domain:Se}=oe.getOptions();H.set(jt,z(Se))}};$();const dt=(jt,oe)=>{const Se=[];for(const Pe of _){const Ke=o(Pe);R(Ke)?(w(Pe,"active"),Se.push(Pe)):w(Pe,"inactive")}if(H.set(jt,It(Se,jt)),!oe)return;const xe=()=>{if(!rt)return Array.from(H.values());const Pe=[];for(const[Ke,Ze]of H){const en=j[Ke],{name:rn}=en.getOptions();rn==="x"?Pe[0]=Ze:Pe[1]=Ze}return Pe};v.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:xe()}})},gt=jt=>{for(const oe of _)C(oe,"active","inactive");$(),jt&&v.emit("brushAxis:remove",{nativeEvent:!0})},It=(jt,oe)=>{const Se=j[oe],{name:xe}=Se.getOptions(),Pe=jt.map(Ke=>{const Ze=Ke.__data__;return Se.invert(Ze[xe])});return z(Ss(Se,Pe))},rt=S.some(c)&&S.some(jt=>!c(jt)),lt=[];for(let jt=0;jt<S.length;jt++){const oe=S[jt],Se=c(oe)?mN:vN,{hotZone:xe,brushRegion:Pe,extent:Ke}=Se(oe,{offsetY:u,offsetX:d,cross:rt,zIndex:999,fill:"transparent"});oe.parentNode.appendChild(xe);const Ze=v4(xe,Object.assign(Object.assign({},L),{reverse:h,brushRegion:Pe,brushended(en){M.delete(oe),Array.from(M.entries()).length===0?gt(en):dt(jt,en)},brushed(en,rn,We,dn,yn){M.set(oe,Ke(en,rn,We,dn)),dt(jt,yn)}}));lt.push(Ze)}const pt=(jt={})=>{const{nativeEvent:oe}=jt;oe||lt.forEach(Se=>Se.remove(!1))},bt=(jt,oe,Se)=>{const[xe,Pe]=jt,Ke=rn=>rn.getStep?rn.getStep():0,Ze=Ht(xe,oe,Se),en=Ht(Pe,oe,Se)+Ke(oe);return c(Se)?[Ze,-1/0,en,1/0]:[-1/0,Ze,1/0,en]},Ht=(jt,oe,Se)=>{const{height:xe,width:Pe}=m.getOptions(),Ke=oe.clone();return c(Se)?Ke.update({range:[0,Pe]}):Ke.update({range:[xe,0]}),Ke.map(jt)},Rt=jt=>{const{nativeEvent:oe}=jt;if(oe)return;const{selection:Se}=jt.data;for(let xe=0;xe<lt.length;xe++){const Pe=Se[xe],Ke=lt[xe],Ze=S[xe];if(Pe){const en=j[xe];Ke.move(...bt(Pe,en,Ze),!1)}else Ke.remove(!1)}};return v.on("brushAxis:remove",pt),v.on("brushAxis:highlight",Rt),()=>{lt.forEach(jt=>jt.destroy()),v.off("brushAxis:remove",pt),v.off("brushAxis:highlight",Rt)}}function bN(t){return(e,n,r)=>{const{container:o,view:c,options:l}=e,u=zo(o),{x:d,y:h}=u.getBBox(),{coordinate:p}=c;return yN(o,Object.assign({elements:lc,axes:pN,offsetY:h,offsetX:d,points:v=>v.__data__.points,horizontal:v=>{const{startPos:[m,b],endPos:[_,S]}=v.attributes;return m!==_&&b===S},datum:Es(c),state:$u(l,["active",["inactive",{opacity:.5}]]),coordinate:p,emitter:r},t))}}var _N=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},j8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function xN(t=300){let e=null;return n=>{const{timeStamp:r}=n;return e!==null&&r-e<t?(e=r,!0):(e=r,!1)}}function SN(t,e){var{filter:n,reset:r,brushRegion:o,extent:c,reverse:l,emitter:u,scale:d,coordinate:h,selection:p,series:v=!1}=e,m=j8(e,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const b=xn(m,"mask"),{width:_,height:S}=t.getBBox(),E=c||[0,0,_,S],w=xN(),C=v4(t,Object.assign(Object.assign({},b),{extent:E,brushRegion:o,reverse:l,brushcreated:M}));t.addEventListener("click",L);function M(j,z,H,$,dt){j===H&&z===$||(dt.nativeEvent=!0,n(p(j,z,H,$),dt),C.remove())}function L(j){w(j)&&(j.nativeEvent=!0,r(j))}const R=({nativeEvent:j,data:z})=>{if(j)return;const{selection:H}=z;n(H,{nativeEvent:!1})};return u.on("brush:filter",R),()=>{C.destroy(),u.off("brush:filter",R),t.removeEventListener("click",L)}}function S4(t){var{hideX:e=!0,hideY:n=!0}=t,r=j8(t,["hideX","hideY"]);return(o,c,l)=>{const{container:u,view:d,options:h,update:p,setState:v}=o,m=zo(u),b={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let _=!1,S=!1,E=d;const{scale:w,coordinate:C}=d;return SN(m,Object.assign(Object.assign({brushRegion:(M,L,R,j)=>[M,L,R,j],selection:(M,L,R,j)=>{const{scale:z,coordinate:H}=E;return Uu(M,L,R,j,z,H)},filter:(M,L)=>_N(this,void 0,void 0,function*(){if(S)return;S=!0;const[R,j]=M;v("brushFilter",H=>{const{marks:$}=H,dt=$.map(gt=>an({axis:Object.assign(Object.assign({},e&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},gt,{scale:{x:{domain:R,nice:!1},y:{domain:j,nice:!1}}}));return Object.assign(Object.assign({},h),{marks:dt,clip:!0})}),l.emit("brush:filter",Object.assign(Object.assign({},L),{data:{selection:[R,j]}})),E=(yield p()).view,S=!1,_=!0}),reset:M=>{if(S||!_)return;const{scale:L}=d,{x:R,y:j}=L,z=R.getOptions().domain,H=j.getOptions().domain;l.emit("brush:filter",Object.assign(Object.assign({},M),{data:{selection:[z,H]}})),_=!1,E=d,v("brushFilter"),p()},extent:void 0,emitter:l,scale:w,coordinate:C},b),r))}}function ON(t){return S4(Object.assign(Object.assign({hideX:!0},t),{brushRegion:b4}))}function EN(t){return S4(Object.assign(Object.assign({hideY:!0},t),{brushRegion:_4}))}var wN=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const AN="slider";function TN(t,e,n,r=!1,o="x",c="y"){const{marks:l}=t,u=l.map(d=>{var h,p;return an({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},d,{scale:e,[n]:Object.assign(Object.assign({},((h=d[n])===null||h===void 0?void 0:h[o])&&{[o]:Object.assign({preserve:!0},r&&{ratio:null})}),((p=d[n])===null||p===void 0?void 0:p[c])&&{[c]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:u,clip:!0,animate:!1})}function CN(t,e,n){const[r,o]=t,c=n?d=>1-d:d=>d,l=ll(e,c(r),!0),u=ll(e,c(o),!1);return Ss(e,[l,u])}function nS(t){return[t[0],t[t.length-1]]}function z8({initDomain:t={},className:e=AN,prefix:n="slider",setValue:r=(h,p)=>h.setValues(p),hasState:o=!1,wait:c=50,leading:l=!0,trailing:u=!1,getInitValues:d=h=>{var p;const v=(p=h==null?void 0:h.attributes)===null||p===void 0?void 0:p.values;if(v[0]!==0||v[1]!==1)return v}}){return(h,p,v)=>{const{container:m,view:b,update:_,setState:S}=h,E=m.getElementsByClassName(e);if(!E.length)return()=>{};let w=!1;const{scale:C,coordinate:M,layout:L}=b,{paddingLeft:R,paddingTop:j,paddingBottom:z,paddingRight:H}=L,{x:$,y:dt}=C,gt=Zr(M),It=bt=>{const Ht=bt==="vertical"?"y":"x",Rt=bt==="vertical"?"x":"y";return gt?[Rt,Ht]:[Ht,Rt]},rt=new Map,lt=new Set,pt={x:t.x||$.getOptions().domain,y:t.y||dt.getOptions().domain};for(const bt of E){const{orientation:Ht}=bt.attributes,[Rt,jt]=It(Ht),oe=`${n}${Ua(Rt)}:filter`,Se=Rt==="x",{ratio:xe}=$.getOptions(),{ratio:Pe}=dt.getOptions(),Ke=We=>{if(We.data){const{selection:Pn}=We.data,[Nn=nS(pt.x),jn=nS(pt.y)]=Pn;return Se?[Ss($,Nn,xe),Ss(dt,jn,Pe)]:[Ss(dt,jn,Pe),Ss($,Nn,xe)]}const{value:dn}=We.detail,yn=C[Rt],wn=CN(dn,yn,gt&&Ht==="horizontal"),Sn=pt[jt];return[wn,Sn]},Ze=Cc(We=>wN(this,void 0,void 0,function*(){const{initValue:dn=!1}=We;if(w&&!dn)return;w=!0;const{nativeEvent:yn=!0}=We,[wn,Sn]=Ke(We);if(pt[Rt]=wn,pt[jt]=Sn,yn){const Pn=Se?wn:Sn,Nn=Se?Sn:wn;v.emit(oe,Object.assign(Object.assign({},We),{nativeEvent:yn,data:{selection:[nS(Pn),nS(Nn)]}}))}S(bt,Pn=>Object.assign(Object.assign({},TN(Pn,{[Rt]:{domain:wn,nice:!1}},n,o,Rt,jt)),{paddingLeft:R,paddingTop:j,paddingBottom:z,paddingRight:H})),yield _(),w=!1}),c,{leading:l,trailing:u}),en=We=>{const{nativeEvent:dn}=We;if(dn)return;const{data:yn}=We,{selection:wn}=yn,[Sn,Pn]=wn;bt.dispatchEvent(new I.Aw("valuechange",{data:yn,nativeEvent:!1}));const Nn=Se?Zu(Sn,$):Zu(Pn,dt);r(bt,Nn)};v.on(oe,en),bt.addEventListener("valuechange",Ze),rt.set(bt,Ze),lt.add([oe,en]);const rn=d(bt);rn&&bt.dispatchEvent(new I.Aw("valuechange",{detail:{value:rn},nativeEvent:!1,initValue:!0}))}return()=>{for(const[bt,Ht]of rt)bt.removeEventListener("valuechange",Ht);for(const[bt,Ht]of lt)v.off(bt,Ht)}}}const U8="g2-scrollbar";function MN(t={}){return(e,n,r)=>{const{view:o,container:c}=e;if(!c.getElementsByClassName(U8).length)return()=>{};const{scale:u}=o,{x:d,y:h}=u,p={x:[...d.getOptions().domain],y:[...h.getOptions().domain]};return d.update({domain:d.getOptions().expectedDomain}),h.update({domain:h.getOptions().expectedDomain}),z8(Object.assign(Object.assign({},t),{initDomain:p,className:U8,prefix:"scrollbar",hasState:!0,setValue:(m,b)=>m.setValue(b[0]),getInitValues:m=>{const b=m.slider.attributes.values;if(b[0]!==0)return b}}))(e,n,r)}}var LN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function PN(t,e,n){return`<${t} style="${Object.entries(n).map(([r,o])=>`${DA(r)}:${o}`).join(";")}">${e}</${t}>`}const IN={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function Z8(t){return t.nodeName!=="text"?!1:!!t.isOverflowing()}function H8(t){var{offsetX:e=8,offsetY:n=8}=t,r=LN(t,["offsetX","offsetY"]);return o=>{const{container:c}=o,[l,u]=c.getBounds().min,d=xn(r,"tip"),h=new Set,p=m=>{const{target:b}=m;if(!Z8(b)){m.stopPropagation();return}const{offsetX:_,offsetY:S}=m,E=_+e-l,w=S+n-u;if(b.tip){b.tip.style.x=E,b.tip.style.y=w;return}const{text:C}=b.style,M=new I.k9({className:"poptip",style:{innerHTML:PN("div",C,Object.assign(Object.assign({},IN),d)),x:E,y:w}});c.appendChild(M),b.tip=M,h.add(M)},v=m=>{const{target:b}=m;if(!Z8(b)){m.stopPropagation();return}b.tip&&(b.tip.remove(),b.tip=null,h.delete(b.tip))};return c.addEventListener("pointerover",p),c.addEventListener("pointerout",v),()=>{c.removeEventListener("pointerover",p),c.removeEventListener("pointerout",v),h.forEach(m=>m.remove())}}}H8.props={reapplyWhenUpdate:!0};function RN(t,e){var n=Cv(e),r=n.length;if((0,sn.Z)(t))return!r;for(var o=0;o<r;o+=1){var c=n[o];if(e[c]!==t[c]||!(c in t))return!1}return!0}var kN=RN;function DN(t,e){if(!(0,Wi.Z)(t))return null;var n;if((0,go.Z)(e)&&(n=e),_i(e)&&(n=function(o){return kN(o,e)}),n){for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r]}return null}var vp=DN;function rS(t){return t==null?null:V8(t)}function V8(t){if(typeof t!="function")throw new Error;return t}var FN={depth:-1},W8={},O4={};function NN(t){return t.id}function BN(t){return t.parentId}function E4(){var t=NN,e=BN,n;function r(o){var c=Array.from(o),l=t,u=e,d,h,p,v,m,b,_,S,E=new Map;if(n!=null){var w=c.map(function(H,$){return jN(n(H,$,o))}),C=w.map(G8),M=new Set(w).add(""),L=Sv(C),R;try{for(L.s();!(R=L.n()).done;){var j=R.value;M.has(j)||(M.add(j),w.push(j),C.push(G8(j)),c.push(O4))}}catch(H){L.e(H)}finally{L.f()}l=function($,dt){return w[dt]},u=function($,dt){return C[dt]}}for(p=0,d=c.length;p<d;++p)h=c[p],b=c[p]=new xf(h),(_=l(h,p,o))!=null&&(_+="")&&(S=b.id=_,E.set(S,E.has(S)?W8:b)),(_=u(h,p,o))!=null&&(_+="")&&(b.parent=_);for(p=0;p<d;++p)if(b=c[p],_=b.parent){if(m=E.get(_),!m)throw new Error("missing: "+_);if(m===W8)throw new Error("ambiguous: "+_);m.children?m.children.push(b):m.children=[b],b.parent=m}else{if(v)throw new Error("multiple roots");v=b}if(!v)throw new Error("no root");if(n!=null){for(;v.data===O4&&v.children.length===1;)v=v.children[0],--d;for(var z=c.length-1;z>=0&&(b=c[z],b.data===O4);--z)b.data=null}if(v.parent=FN,v.eachBefore(function(H){H.depth=H.parent.depth+1,--d}).eachBefore(_x),v.parent=null,d>0)throw new Error("cycle");return v}return r.id=function(o){return arguments.length?(t=rS(o),r):t},r.parentId=function(o){return arguments.length?(e=rS(o),r):e},r.path=function(o){return arguments.length?(n=rS(o),r):n},r}function jN(t){t="".concat(t);var e=t.length;return w4(t,e-1)&&!w4(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:"/".concat(t)}function G8(t){var e=t.length;if(e<2)return"";for(;--e>1&&!w4(t,e););return t.slice(0,e)}function w4(t,e){if(t[e]==="/"){for(var n=0;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function zN(t,e,n,r,o){var c=t.children,l,u=c.length,d,h=new Array(u+1);for(h[0]=d=l=0;l<u;++l)h[l+1]=d+=c[l].value;p(0,u,t.value,e,n,r,o);function p(v,m,b,_,S,E,w){if(v>=m-1){var C=c[v];C.x0=_,C.y0=S,C.x1=E,C.y1=w;return}for(var M=h[v],L=b/2+M,R=v+1,j=m-1;R<j;){var z=R+j>>>1;h[z]<L?R=z+1:j=z}L-h[R-1]<h[R]-L&&v+1<R&&--R;var H=h[R]-M,$=b-H;if(E-_>w-S){var dt=b?(_*$+E*H)/b:E;p(v,R,H,_,S,dt,w),p(R,m,$,dt,S,E,w)}else{var gt=b?(S*$+w*H)/b:w;p(v,R,H,_,S,E,gt),p(R,m,$,_,gt,E,w)}}}function iS(t,e,n,r,o){for(var c=t.children,l,u=-1,d=c.length,h=t.value&&(o-n)/t.value;++u<d;)l=c[u],l.x0=e,l.x1=r,l.y0=n,l.y1=n+=l.value*h}function UN(t,e,n,r,o){(t.depth&1?iS:yf)(t,e,n,r,o)}var $8=(1+Math.sqrt(5))/2;function Y8(t,e,n,r,o,c){for(var l=[],u=e.children,d,h,p=0,v=0,m=u.length,b,_,S=e.value,E,w,C,M,L,R,j;p<m;){b=o-n,_=c-r;do E=u[v++].value;while(!E&&v<m);for(w=C=E,R=Math.max(_/b,b/_)/(S*t),j=E*E*R,L=Math.max(C/j,j/w);v<m;++v){if(E+=h=u[v].value,h<w&&(w=h),h>C&&(C=h),j=E*E*R,M=Math.max(C/j,j/w),M>L){E-=h;break}L=M}l.push(d={value:E,dice:b<_,children:u.slice(p,v)}),d.dice?yf(d,n,r,o,S?r+=_*E/S:c):iS(d,n,r,S?n+=b*E/S:o,c),S-=E,p=v}return l}var X8=function t(e){function n(r,o,c,l,u){Y8(e,r,o,c,l,u)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}($8),ZN=function t(e){function n(r,o,c,l,u){if((d=r._squarify)&&d.ratio===e)for(var d,h,p,v,m=-1,b,_=d.length,S=r.value;++m<_;){for(h=d[m],p=h.children,v=h.value=0,b=p.length;v<b;++v)h.value+=p[v].value;h.dice?yf(h,o,c,l,S?c+=(u-c)*h.value/S:u):iS(h,o,c,S?o+=(l-o)*h.value/S:l,u),S-=h.value}else r._squarify=d=Y8(e,r,o,c,l,u),d.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}($8);function Bf(){return 0}function mp(t){return function(){return t}}function HN(){var t=X8,e=!1,n=1,r=1,o=[0],c=Bf,l=Bf,u=Bf,d=Bf,h=Bf;function p(m){return m.x0=m.y0=0,m.x1=n,m.y1=r,m.eachBefore(v),o=[0],e&&m.eachBefore(nM),m}function v(m){var b=o[m.depth],_=m.x0+b,S=m.y0+b,E=m.x1-b,w=m.y1-b;E<_&&(_=E=(_+E)/2),w<S&&(S=w=(S+w)/2),m.x0=_,m.y0=S,m.x1=E,m.y1=w,m.children&&(b=o[m.depth+1]=c(m)/2,_+=h(m)-b,S+=l(m)-b,E-=u(m)-b,w-=d(m)-b,E<_&&(_=E=(_+E)/2),w<S&&(S=w=(S+w)/2),t(m,_,S,E,w))}return p.round=function(m){return arguments.length?(e=!!m,p):e},p.size=function(m){return arguments.length?(n=+m[0],r=+m[1],p):[n,r]},p.tile=function(m){return arguments.length?(t=V8(m),p):t},p.padding=function(m){return arguments.length?p.paddingInner(m).paddingOuter(m):p.paddingInner()},p.paddingInner=function(m){return arguments.length?(c=typeof m=="function"?m:mp(+m),p):c},p.paddingOuter=function(m){return arguments.length?p.paddingTop(m).paddingRight(m).paddingBottom(m).paddingLeft(m):p.paddingTop()},p.paddingTop=function(m){return arguments.length?(l=typeof m=="function"?m:mp(+m),p):l},p.paddingRight=function(m){return arguments.length?(u=typeof m=="function"?m:mp(+m),p):u},p.paddingBottom=function(m){return arguments.length?(d=typeof m=="function"?m:mp(+m),p):d},p.paddingLeft=function(m){return arguments.length?(h=typeof m=="function"?m:mp(+m),p):h},p}function VN(t,e){return Array.isArray(t)?typeof e=="function"?E4().path(e)(t):E4()(t):Tl(t)}function q8(t,e=[t.data.name]){t.id=t.id||t.data.name,t.path=e,t.children&&t.children.forEach(n=>{n.id=`${t.id}/${n.data.name}`,n.path=[...e,n.data.name],q8(n,n.path)})}function K8(t){const e=pr(t,["data","name"]);e.replaceAll&&(t.path=e.replaceAll(".","/").split("/")),t.children&&t.children.forEach(n=>{K8(n)})}function WN(t,e){const n={treemapBinary:zN,treemapDice:yf,treemapSlice:iS,treemapSliceDice:UN,treemapSquarify:X8,treemapResquarify:ZN},r=t==="treemapSquarify"?n[t].ratio(e):n[t];if(!r)throw new TypeError("Invalid tile method!");return r}function Q8(t,e,n){const{value:r}=n,o=WN(e.tile,e.ratio),c=VN(t,e.path);(0,Wi.Z)(t)?K8(c):q8(c),r?c.sum(d=>e.ignoreParentValue&&d.children?0:Pa(r)(d)).sort(e.sort):c.count(),HN().tile(o).size(e.size).round(e.round).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(c);const l=c.descendants().map(d=>Object.assign(d,{id:d.id.replace(/^\//,""),x:[d.x0,d.x1],y:[d.y0,d.y1]}));return[l.filter(typeof e.layer=="function"?e.layer:d=>d.height===e.layer),l]}var GN=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},$N=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function YN(t){return Gn(t).select(`.${le}`).node()}const XN={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function qN(t={}){const{originData:e=[],layout:n}=t,r=$N(t,["originData","layout"]),o=an({},XN,r),c=xn(o,"breadCrumb"),l=xn(o,"active");return u=>{const{update:d,setState:h,container:p,options:v}=u,m=YN(p),b=v.marks[0],{state:_}=b,S=new I.ZA;m.appendChild(S);const E=(j,z)=>GN(this,void 0,void 0,function*(){if(S.removeChildren(),z){let H="",$=c.y,dt=0;const gt=[],It=m.getBBox().width,rt=j.map((lt,pt)=>{H=`${H}${lt}/`,gt.push(lt);const bt=new I.xv({name:H.replace(/\/$/,""),style:Object.assign(Object.assign({text:lt,x:dt,path:[...gt],depth:pt},c),{y:$})});S.appendChild(bt),dt+=bt.getBBox().width;const Ht=new I.xv({style:Object.assign(Object.assign({x:dt,text:" / "},c),{y:$})});return S.appendChild(Ht),dt+=Ht.getBBox().width,dt>It&&($=S.getBBox().height+c.y,dt=0,bt.attr({x:dt,y:$}),dt+=bt.getBBox().width,Ht.attr({x:dt,y:$}),dt+=Ht.getBBox().width),pt===Pu(j)-1&&Ht.remove(),bt});rt.forEach((lt,pt)=>{if(pt===Pu(rt)-1)return;const bt=Object.assign({},lt.attributes);lt.attr("cursor","pointer"),lt.addEventListener("mouseenter",()=>{lt.attr(l)}),lt.addEventListener("mouseleave",()=>{lt.attr(bt)}),lt.addEventListener("click",()=>{E(pr(lt,["style","path"]),pr(lt,["style","depth"]))})})}QF(p,h),h("treemapDrillDown",H=>{const{marks:$}=H,dt=j.join("/"),gt=$.map(It=>{if(It.type!=="rect")return It;let rt=e;if(z){const pt=e.filter(oe=>{const Se=pr(oe,["id"]);return Se&&(Se.match(`${dt}/`)||dt.match(Se))}).map(oe=>({value:oe.height===0?pr(oe,["value"]):void 0,name:pr(oe,["id"])})),{paddingLeft:bt,paddingBottom:Ht,paddingRight:Rt}=n,jt=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||S.getBBox().height+10)/(z+1),paddingLeft:bt/(z+1),paddingBottom:Ht/(z+1),paddingRight:Rt/(z+1),path:oe=>oe.name,layer:oe=>oe.depth===z+1});rt=Q8(pt,jt,{value:"value"})[0]}else rt=e.filter(pt=>pt.depth===1);const lt=[];return rt.forEach(({path:pt})=>{lt.push(lm(pt))}),an({},It,{data:rt,scale:{color:{domain:lt}}})});return Object.assign(Object.assign({},H),{marks:gt})}),yield d(void 0,["legendFilter"])}),w=j=>j.attributes.key.split("-")[0],C=j=>pr(j,["__data__","key"]),M=j=>{const z=j.target,{markType:H,nodeName:$,attributes:dt}=z||{};if(H!=="rect"&&$!==I.bn.TEXT)return;const gt=$===I.bn.TEXT&&pr(dt,"isTreemapLabel")===!0?w(z):C(z),It=vp(e,rt=>rt.id===gt);pr(It,"height")&&E(pr(It,"path"),pr(It,"depth"))};m.addEventListener("click",M);const L=Cv(Object.assign(Object.assign({},_.active),_.inactive)),R=()=>{bg(m).forEach(z=>{const H=pr(z,["style","cursor"]),$=vp(e,dt=>dt.id===pr(z,["__data__","key"]));if(H!=="pointer"&&($!=null&&$.height)){z.style.cursor="pointer";const dt=_v(z.attributes,L);z.addEventListener("mouseenter",()=>{z.attr(_.active)}),z.addEventListener("mouseleave",()=>{z.attr(an(dt,_.inactive))})}})};return R(),m.addEventListener("mousemove",R),()=>{S.remove(),m.removeEventListener("click",M),m.removeEventListener("mousemove",R)}}}var A4=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},KN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const QN={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},T4="movePoint",J8=t=>{const e=t.target,{markType:n}=e;n==="line"&&(e.attr("_lineWidth",e.attr("lineWidth")||1),e.attr("lineWidth",e.attr("_lineWidth")+3)),n==="interval"&&(e.attr("_opacity",e.attr("opacity")||1),e.attr("opacity",.7*e.attr("_opacity")))},tI=t=>{const e=t.target,{markType:n}=e;n==="line"&&e.attr("lineWidth",e.attr("_lineWidth")),n==="interval"&&e.attr("opacity",e.attr("_opacity"))},JN=(t,e,n)=>e.map(r=>["x","color"].reduce((c,l)=>{const u=n[l];return u&&r[u]!==t[u]?!1:c},!0)?Object.assign(Object.assign({},r),t):r),tB=t=>{const e=pr(t,["__data__","y"]),r=pr(t,["__data__","y1"])-e,{__data__:{data:o,encode:c,transform:l},childNodes:u}=t.parentNode,d=vp(l,({type:v})=>v==="normalizeY"),h=pr(c,["y","field"]),p=o[u.indexOf(t)][h];return(v,m=!1)=>d||m?v/(1-v)/(r/(1-r))*p:v},eB=(t,e)=>{const n=pr(t,["__data__","seriesItems",e,"0","value"]),r=pr(t,["__data__","seriesIndex",e]),{__data__:{data:o,encode:c,transform:l}}=t.parentNode,u=vp(l,({type:p})=>p==="normalizeY"),d=pr(c,["y","field"]),h=o[r][d];return p=>u?n===1?p:p/(1-p)/(n/(1-n))*h:p},eI=(t,e,n)=>{t.forEach((r,o)=>{r.attr("stroke",e[1]===o?n.activeStroke:n.stroke)})},nI=(t,e,n,r)=>{const o=new I.y$({style:n}),c=new I.xv({style:r});return e.appendChild(c),t.appendChild(o),[o,c]},rI=(t,e)=>{if(!pr(t,["options","range","indexOf"]))return;const r=t.options.range.indexOf(e);return t.sortedDomain[r]},C4=(t,e,n)=>{const r=oh(t,e),c=oh(t,n)/r,l=t[0]+(e[0]-t[0])*c,u=t[1]+(e[1]-t[1])*c;return[l,u]};function nB(t={}){const{selection:e=[],precision:n=2}=t,r=KN(t,["selection","precision"]),o=Object.assign(Object.assign({},QN),r||{}),c=xn(o,"path"),l=xn(o,"label"),u=xn(o,"point");return(d,h,p)=>{const{update:v,setState:m,container:b,view:_,options:{marks:S,coordinate:E}}=d,w=zo(b);let C=bg(w),M,L=e;const{transform:R=[],type:j}=E,z=!!vp(R,({type:Rt})=>Rt==="transpose"),H=j==="polar",$=j==="theta",dt=!!vp(C,({markType:Rt})=>Rt==="area");dt&&(C=C.filter(({markType:Rt})=>Rt==="area"));const gt=new I.ZA({style:{zIndex:2}});w.appendChild(gt);const It=()=>{p.emit("element-point:select",{nativeEvent:!0,data:{selection:L}})},rt=(Rt,jt)=>{p.emit("element-point:moved",{nativeEvent:!0,data:{changeData:Rt,data:jt}})},lt=Rt=>{const jt=Rt.target;L=[jt.parentNode.childNodes.indexOf(jt)],It(),bt(jt)},pt=Rt=>{const{data:{selection:jt},nativeEvent:oe}=Rt;if(oe)return;L=jt;const Se=pr(C,[L==null?void 0:L[0]]);Se&&bt(Se)},bt=Rt=>{const{attributes:jt,markType:oe,__data__:Se}=Rt,{stroke:xe}=jt,{points:Pe,seriesTitle:Ke,color:Ze,title:en,seriesX:rn,y1:We}=Se;if(z&&oe!=="interval")return;const{scale:dn,coordinate:yn}=(M==null?void 0:M.view)||_,{color:wn,y:Sn,x:Pn}=dn,Nn=yn.getCenter();gt.removeChildren();let jn;const or=(Yn,Xn,lr,Ki)=>A4(this,void 0,void 0,function*(){return m("elementPointMove",ga=>{var Ii;const uo=(((Ii=M==null?void 0:M.options)===null||Ii===void 0?void 0:Ii.marks)||S).map(Qi=>{if(!Ki.includes(Qi.type))return Qi;const{data:ao,encode:mi}=Qi,ki=Object.keys(mi).reduce((fi,Io)=>{const Ro=mi[Io];return Io==="x"&&(fi[Ro]=Yn),Io==="y"&&(fi[Ro]=Xn),Io==="color"&&(fi[Ro]=lr),fi},{}),Di=JN(ki,ao,mi);return rt(ki,Di),an({},Qi,{data:Di,animate:!1})});return Object.assign(Object.assign({},ga),{marks:uo})}),yield v("elementPointMove")});if(["line","area"].includes(oe))Pe.forEach((Yn,Xn)=>{const lr=Pn.invert(rn[Xn]);if(!lr)return;const Ki=new I.Cd({name:T4,style:Object.assign({cx:Yn[0],cy:Yn[1],fill:xe},u)}),ga=eB(Rt,Xn);Ki.addEventListener("mousedown",Ii=>{const uo=yn.output([rn[Xn],0]),Qi=Ke==null?void 0:Ke.length;b.attr("cursor","move"),L[1]!==Xn&&(L[1]=Xn,It()),eI(gt.childNodes,L,u);const[ao,mi]=nI(gt,Ki,c,l),Ri=Di=>{const fi=Yn[1]+Di.clientY-jn[1];if(dt)if(H){const Io=Yn[0]+Di.clientX-jn[0],[Ro,Hf]=C4(Nn,uo,[Io,fi]),[,$m]=yn.output([1,Sn.output(0)]),[,rP]=yn.invert([Ro,$m-(Pe[Xn+Qi][1]-Hf)]),kD=(Xn+1)%Qi,jG=(Xn-1+Qi)%Qi,zG=gl([Pe[jG],[Ro,Hf],Ke[kD]&&Pe[kD]]);mi.attr("text",ga(Sn.invert(rP)).toFixed(n)),ao.attr("d",zG),Ki.attr("cx",Ro),Ki.attr("cy",Hf)}else{const[,Io]=yn.output([1,Sn.output(0)]),[,Ro]=yn.invert([Yn[0],Io-(Pe[Xn+Qi][1]-fi)]),Hf=gl([Pe[Xn-1],[Yn[0],fi],Ke[Xn+1]&&Pe[Xn+1]]);mi.attr("text",ga(Sn.invert(Ro)).toFixed(n)),ao.attr("d",Hf),Ki.attr("cy",fi)}else{const[,Io]=yn.invert([Yn[0],fi]),Ro=gl([Pe[Xn-1],[Yn[0],fi],Pe[Xn+1]]);mi.attr("text",Sn.invert(Io).toFixed(n)),ao.attr("d",Ro),Ki.attr("cy",fi)}};jn=[Ii.clientX,Ii.clientY],window.addEventListener("mousemove",Ri);const ki=()=>A4(this,void 0,void 0,function*(){if(b.attr("cursor","default"),window.removeEventListener("mousemove",Ri),b.removeEventListener("mouseup",ki),(0,rl.Z)(mi.attr("text")))return;const Di=Number(mi.attr("text")),fi=rI(wn,Ze);M=yield or(lr,Di,fi,["line","area"]),mi.remove(),ao.remove(),bt(Rt)});b.addEventListener("mouseup",ki)}),gt.appendChild(Ki)}),eI(gt.childNodes,L,u);else if(oe==="interval"){let Yn=[(Pe[0][0]+Pe[1][0])/2,Pe[0][1]];z?Yn=[Pe[0][0],(Pe[0][1]+Pe[1][1])/2]:$&&(Yn=Pe[0]);const Xn=tB(Rt),lr=new I.Cd({name:T4,style:Object.assign(Object.assign({cx:Yn[0],cy:Yn[1],fill:xe},u),{stroke:u.activeStroke})});lr.addEventListener("mousedown",Ki=>{b.attr("cursor","move");const ga=rI(wn,Ze),[Ii,uo]=nI(gt,lr,c,l),Qi=mi=>{if(z){const Ri=Yn[0]+mi.clientX-jn[0],[ki]=yn.output([Sn.output(0),Sn.output(0)]),[,Di]=yn.invert([ki+(Ri-Pe[2][0]),Yn[1]]),fi=gl([[Ri,Pe[0][1]],[Ri,Pe[1][1]],Pe[2],Pe[3]],!0);uo.attr("text",Xn(Sn.invert(Di)).toFixed(n)),Ii.attr("d",fi),lr.attr("cx",Ri)}else if($){const Ri=Yn[1]+mi.clientY-jn[1],ki=Yn[0]+mi.clientX-jn[0],[Di,fi]=C4(Nn,[ki,Ri],Yn),[Io,Ro]=C4(Nn,[ki,Ri],Pe[1]),Hf=yn.invert([Di,fi])[1],$m=We-Hf;if($m<0)return;const rP=h_(Nn,[[Di,fi],[Io,Ro],Pe[2],Pe[3]],$m>.5?1:0);uo.attr("text",Xn($m,!0).toFixed(n)),Ii.attr("d",rP),lr.attr("cx",Di),lr.attr("cy",fi)}else{const Ri=Yn[1]+mi.clientY-jn[1],[,ki]=yn.output([1,Sn.output(0)]),[,Di]=yn.invert([Yn[0],ki-(Pe[2][1]-Ri)]),fi=gl([[Pe[0][0],Ri],[Pe[1][0],Ri],Pe[2],Pe[3]],!0);uo.attr("text",Xn(Sn.invert(Di)).toFixed(n)),Ii.attr("d",fi),lr.attr("cy",Ri)}};jn=[Ki.clientX,Ki.clientY],window.addEventListener("mousemove",Qi);const ao=()=>A4(this,void 0,void 0,function*(){if(b.attr("cursor","default"),b.removeEventListener("mouseup",ao),window.removeEventListener("mousemove",Qi),(0,rl.Z)(uo.attr("text")))return;const mi=Number(uo.attr("text"));M=yield or(en,mi,ga,[oe]),uo.remove(),Ii.remove(),bt(Rt)});b.addEventListener("mouseup",ao)}),gt.appendChild(lr)}};C.forEach((Rt,jt)=>{L[0]===jt&&bt(Rt),Rt.addEventListener("click",lt),Rt.addEventListener("mouseenter",J8),Rt.addEventListener("mouseleave",tI)});const Ht=Rt=>{const jt=Rt==null?void 0:Rt.target;(!jt||jt.name!==T4&&!C.includes(jt))&&(L=[],It(),gt.removeChildren())};return p.on("element-point:select",pt),p.on("element-point:unselect",Ht),b.addEventListener("mousedown",Ht),()=>{gt.remove(),p.off("element-point:select",pt),p.off("element-point:unselect",Ht),b.removeEventListener("mousedown",Ht),C.forEach(Rt=>{Rt.removeEventListener("click",lt),Rt.removeEventListener("mouseenter",J8),Rt.removeEventListener("mouseleave",tI)})}}}var rB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const iI=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{x:n=0,y:r=0,width:o,height:c,data:l}=t;return e.map(u=>{var{data:d,x:h,y:p,width:v,height:m}=u,b=rB(u,["data","x","y","width","height"]);return Object.assign(Object.assign({},b),{data:ig(d,l),x:h!=null?h:n,y:p!=null?p:r,width:v!=null?v:o,height:m!=null?m:c})})};iI.props={};var iB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const oI=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{direction:n="row",ratio:r=e.map(()=>1),padding:o=0,data:c}=t,[l,u,d,h]=n==="col"?["y","height","width","x"]:["x","width","height","y"],p=r.reduce((S,E)=>S+E),v=t[u]-o*(e.length-1),m=r.map(S=>v*(S/p)),b=[];let _=t[l]||0;for(let S=0;S<m.length;S+=1){const E=e[S],{data:w}=E,C=iB(E,["data"]),M=ig(w,c);b.push(Object.assign({[l]:_,[u]:m[S],[h]:t[h]||0,[d]:t[d],data:M},C)),_+=m[S]+o}return b};oI.props={};class pm{constructor(e){this.$value=e}static of(e){return new pm(e)}call(e,...n){return this.$value=e(this.$value,...n),this}value(){return this.$value}}var oB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const aB=Fu(t=>{const{encode:e,data:n,scale:r,shareSize:o=!1}=t,{x:c,y:l}=e,u=(d,h)=>{var p;if(d===void 0||!o)return{};const v=Nr(n,_=>_[d]),m=((p=r==null?void 0:r[h])===null||p===void 0?void 0:p.domain)||Array.from(v.keys()),b=m.map(_=>v.has(_)?v.get(_).length:1);return{domain:m,flex:b}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:c===void 0?null:{position:"top"}},c===void 0&&{paddingInner:0}),u(c,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:l===void 0?null:{position:"right"}},l===void 0&&{paddingInner:0}),u(l,"y"))}}}),M4=ms(t=>{const{data:e,scale:n,legend:r}=t,o=[t];let c,l,u;for(;o.length;){const m=o.shift(),{children:b,encode:_={},scale:S={},legend:E={}}=m,{color:w}=_,{color:C}=S,{color:M}=E;w!==void 0&&(c=w),C!==void 0&&(l=C),M!==void 0&&(u=M),Array.isArray(b)&&o.push(...b)}const d=()=>{var m;const b=(m=n==null?void 0:n.color)===null||m===void 0?void 0:m.domain;if(b!==void 0)return[b];if(c===void 0)return[void 0];const _=typeof c=="function"?c:E=>E[c],S=e.map(_);return S.some(E=>typeof E=="number")?[$a(S)]:[Array.from(new Set(S)),"ordinal"]},h=typeof c=="string"?c:"",[p,v]=d();return Object.assign({encode:{color:{type:"column",value:p!=null?p:[]}},scale:{color:an({},l,{domain:p,type:v})}},r===void 0&&{legend:{color:an({title:h},u)}})}),L4=Fu(()=>({animate:{enterType:"fadeIn"}})),P4=ms(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),I4=ms(()=>({type:"cell"})),aI=ms(t=>{const{data:e}=t;return{data:{type:"inline",value:e,transform:[{type:"custom",callback:()=>{const{data:r,encode:o}=t,{x:c,y:l}=o,u=c?Array.from(new Set(r.map(p=>p[c]))):[],d=l?Array.from(new Set(r.map(p=>p[l]))):[];return(()=>{if(u.length&&d.length){const p=[];for(const v of u)for(const m of d)p.push({[c]:v,[l]:m});return p}if(u.length)return u.map(p=>({[c]:p}));if(d.length)return d.map(p=>({[l]:p}))})()}}]}}}),sI=ms((t,e=sB,n=cB,r=lB,o={})=>{const{data:c,encode:l,children:u,scale:d,x:h=0,y:p=0,shareData:v=!1,key:m}=t,{value:b}=c,{x:_,y:S}=l,{color:E}=d,{domain:w}=E;return{children:(M,L,R)=>{const{x:j,y:z}=L,{paddingLeft:H,paddingTop:$,marginLeft:dt,marginTop:gt}=R,{domain:It}=j.getOptions(),{domain:rt}=z.getOptions(),lt=Ks(M),pt=M.map(e),bt=M.map(({x:xe,y:Pe})=>[j.invert(xe),z.invert(Pe)]),Rt=bt.map(([xe,Pe])=>Ke=>{const{[_]:Ze,[S]:en}=Ke;return(_!==void 0?Ze===xe:!0)&&(S!==void 0?en===Pe:!0)}).map(xe=>b.filter(xe)),jt=v?wr(Rt,xe=>xe.length):void 0,oe=bt.map(([xe,Pe])=>({columnField:_,columnIndex:It.indexOf(xe),columnValue:xe,columnValuesLength:It.length,rowField:S,rowIndex:rt.indexOf(Pe),rowValue:Pe,rowValuesLength:rt.length})),Se=oe.map(xe=>Array.isArray(u)?u:[u(xe)].flat(1));return lt.flatMap(xe=>{const[Pe,Ke,Ze,en]=pt[xe],rn=oe[xe],We=Rt[xe];return Se[xe].map(yn=>{var wn,Sn,{scale:Pn,key:Nn,facet:jn=!0,axis:or={},legend:Yn={}}=yn,Xn=oB(yn,["scale","key","facet","axis","legend"]);const lr=((wn=Pn==null?void 0:Pn.y)===null||wn===void 0?void 0:wn.guide)||or.y,Ki=((Sn=Pn==null?void 0:Pn.x)===null||Sn===void 0?void 0:Sn.guide)||or.x,ga={x:{tickCount:_?5:void 0},y:{tickCount:S?5:void 0}},Ii=jn?We:We.length===0?[]:b,uo={color:{domain:w}},Qi={x:cI(Ki,n)(rn,Ii),y:cI(lr,r)(rn,Ii)};return Object.assign(Object.assign({key:`${Nn}-${xe}`,data:Ii,margin:0,x:Pe+H+h+dt,y:Ke+$+p+gt,parentKey:m,width:Ze,height:en,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!Ii.length,dataDomain:jt,scale:an(ga,Pn,uo),axis:an({},or,Qi),legend:!1},Xn),o)})})}}});function sB(t){const{points:e}=t;return Hd(e)}function oS(t,e){return e.length?an({title:!1,tick:null,label:null},t):an({title:!1,tick:null,label:null,grid:null},t)}function cB(t){return(e,n)=>{const{rowIndex:r,rowValuesLength:o,columnIndex:c,columnValuesLength:l}=e;if(r!==o-1)return oS(t,n);const u=c!==l-1?!1:void 0,d=n.length?void 0:null;return an({title:u,grid:d},t)}}function lB(t){return(e,n)=>{const{rowIndex:r,columnIndex:o}=e;if(o!==0)return oS(t,n);const c=r!==0?!1:void 0,l=n.length?void 0:null;return an({title:c,grid:l},t)}}function cI(t,e){return typeof t=="function"?t:t===null||t===!1?()=>null:e(t)}const lI=()=>t=>[pm.of(t).call(I4).call(M4).call(L4).call(aB).call(P4).call(aI).call(sI).value()];lI.props={};var R4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const uB=Fu(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),fB=ms(t=>{const{data:e,children:n,x:r=0,y:o=0,key:c}=t;return{children:(u,d,h)=>{const{x:p,y:v}=d,{paddingLeft:m,paddingTop:b,marginLeft:_,marginTop:S}=h,{domain:E}=p.getOptions(),{domain:w}=v.getOptions(),C=Ks(u),M=u.map(({points:z})=>Hd(z)),L=u.map(({x:z,y:H})=>[p.invert(z),v.invert(H)]),R=L.map(([z,H])=>({columnField:z,columnIndex:E.indexOf(z),columnValue:z,columnValuesLength:E.length,rowField:H,rowIndex:w.indexOf(H),rowValue:H,rowValuesLength:w.length})),j=R.map(z=>Array.isArray(n)?n:[n(z)].flat(1));return C.flatMap(z=>{const[H,$,dt,gt]=M[z],[It,rt]=L[z],lt=R[z];return j[z].map(bt=>{var Ht,Rt;const{scale:jt,key:oe,encode:Se,axis:xe,interaction:Pe}=bt,Ke=R4(bt,["scale","key","encode","axis","interaction"]),Ze=(Ht=jt==null?void 0:jt.y)===null||Ht===void 0?void 0:Ht.guide,en=(Rt=jt==null?void 0:jt.x)===null||Rt===void 0?void 0:Rt.guide,rn={x:{facet:!1},y:{facet:!1}},We={x:hB(en)(lt,e),y:pB(Ze)(lt,e)},dn={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:e,parentKey:c,key:`${oe}-${z}`,x:H+m+r+_,y:$+b+o+S,width:dt,height:gt,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:an(rn,jt),axis:an(dn,xe,We),legend:!1,encode:an({},Se,{x:It,y:rt}),interaction:an({},Pe,{legendFilter:!1})},Ke)})})}}}),dB=ms(t=>{const{encode:e}=t,n=R4(t,["encode"]),{position:r=[],x:o=r,y:c=[...r].reverse()}=e,l=R4(e,["position","x","y"]),u=[];for(const d of[o].flat(1))for(const h of[c].flat(1))u.push({$x:d,$y:h});return Object.assign(Object.assign({},n),{data:u,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[o].flat(1).length===1&&{x:{paddingInner:0}}),[c].flat(1).length===1&&{y:{paddingInner:0}})})});function hB(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{rowIndex:r,rowValuesLength:o}=e;if(r!==o-1)return oS(t,n)}}function pB(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{columnIndex:r}=e;if(r!==0)return oS(t,n)}}const gB=()=>t=>[pm.of(t).call(I4).call(M4).call(fB).call(dB).call(L4).call(P4).call(uB).value()];var vB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const mB=Fu(t=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),yB=Fu(t=>({coordinate:{type:"polar"}})),bB=t=>{const{encode:e}=t,n=vB(t,["encode"]),{position:r}=e;return Object.assign(Object.assign({},n),{encode:{x:r}})};function uI(t){return e=>null}function _B(t){const{points:e}=t,[n,r,o,c]=e,l=ni(n,c),u=si(n,c),d=si(r,o),h=zb(u,d),p=1/Math.sin(h/2),v=l/(1+p),m=v*Math.sqrt(2),[b,_]=o,E=nc(u)+h/2,w=v*p,C=b+w*Math.sin(E),M=_-w*Math.cos(E);return[C-m/2,M-m/2,m,m]}const xB=()=>t=>[pm.of(t).call(I4).call(bB).call(M4).call(yB).call(aI).call(sI,_B,uI,uI,{frame:!1}).call(L4).call(P4).call(mB).value()];function SB(t,e,n){const o=n,c=[0,o],l=[-o+1,1];if(t==="normal")return c;if(t==="reverse")return l;if(t==="alternate")return e%2===0?c:l;if(t==="reverse-alternate")return e%2===0?l:c}function OB(t,e,n){const r=[t];for(;r.length;){const o=r.pop();o.animate=an({enter:{duration:e},update:{duration:e,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:e}},o.animate||{});const{children:c}=o;Array.isArray(c)&&r.push(...c)}return t}const fI=()=>t=>{const{children:e=[],duration:n=1e3,iterationCount:r=1,direction:o="normal",easing:c="ease-in-out-sine"}=t,l=e.length;if(!Array.isArray(e)||l===0)return[];const{key:u}=e[0],d=e.map(h=>Object.assign(Object.assign({},h),{key:u})).map(h=>OB(h,n,c));return function*(){let h=0,p;for(;r==="infinite"||h<r;){const[v,m]=SB(o,h,l);for(let b=v;b<m;b+=1){const _=Math.abs(b);p!==_&&(yield d[_]),p=_}h++}}};fI.props={};function Hl(t,e,n){const{encode:r}=n;if(t===null)return[e];const o=EB(t).map(l=>{var u;return[l,(u=vr(r,l))===null||u===void 0?void 0:u[0]]}).filter(([,l])=>Ur(l)),c=l=>o.map(([,u])=>u[l]).join("-");return Array.from(Nr(e,c).values())}function dI(t){return Array.isArray(t)?TB(t):typeof t=="function"?AB(t):t==="series"?wB:t==="value"?CB:t==="sum"?MB:t==="maxIndex"?LB:null}function hI(t,e){for(const n of t)n.sort(e)}function pI(t,e){return(e==null?void 0:e.domain)||Array.from(new Set(t))}function EB(t){return Array.isArray(t)?t:[t]}function wB(t,e,n){return gm(r=>n[r])}function AB(t){return(e,n,r)=>gm(o=>t(e[o]))}function TB(t){return(e,n,r)=>(o,c)=>t.reduce((l,u)=>l!==0?l:ui(e[o][u],e[c][u]),0)}function CB(t,e,n){return gm(r=>e[r])}function MB(t,e,n){const r=Ks(t),o=Array.from(Nr(r,l=>n[+l]).entries()),c=new Map(o.map(([l,u])=>[l,u.reduce((d,h)=>d+ +e[h])]));return gm(l=>c.get(n[l]))}function LB(t,e,n){const r=Ks(t),o=Array.from(Nr(r,l=>n[+l]).entries()),c=new Map(o.map(([l,u])=>[l,ol(u,d=>e[d])]));return gm(l=>c.get(n[l]))}function gm(t){return(e,n)=>ui(t(e),t(n))}const gI=(t={})=>{const{groupBy:e="x",orderBy:n=null,reverse:r=!1,y:o="y",y1:c="y1",series:l=!0}=t;return(u,d)=>{var h;const{data:p,encode:v,style:m={}}=d,[b,_]=vr(v,"y"),[S,E]=vr(v,"y1"),[w]=l?Kh(v,"series","color"):vr(v,"color"),C=Hl(e,u,d),L=((h=dI(n))!==null&&h!==void 0?h:()=>null)(p,b,w);L&&hI(C,L);const R=new Array(u.length),j=new Array(u.length),z=new Array(u.length),H=[],$=[];for(const pt of C){r&&pt.reverse();const bt=S?+S[pt[0]]:0,Ht=[],Rt=[];for(const Ze of pt){const en=z[Ze]=+b[Ze]-bt;en<0?Rt.push(Ze):en>=0&&Ht.push(Ze)}const jt=Ht.length>0?Ht:Rt,oe=Rt.length>0?Rt:Ht;let Se=Ht.length-1,xe=0;for(;Se>0&&b[jt[Se]]===0;)Se--;for(;xe<oe.length-1&&b[oe[xe]]===0;)xe++;H.push(jt[Se]),$.push(oe[xe]);let Pe=bt;for(const Ze of Rt.reverse()){const en=z[Ze];Pe=R[Ze]=(j[Ze]=Pe)+en}let Ke=bt;for(const Ze of Ht){const en=z[Ze];en>0?Ke=R[Ze]=(j[Ze]=Ke)+en:R[Ze]=j[Ze]=Ke}}const dt=new Set(H),gt=new Set($),It=o==="y"?R:j,rt=c==="y"?R:j;let lt;return d.type==="point"?lt={y0:Sf(b,_),y:Br(It,_)}:lt={y0:Sf(b,_),y:Br(It,_),y1:Br(rt,E)},[u,an({},d,{encode:Object.assign({},lt),style:Object.assign({first:(pt,bt)=>dt.has(bt),last:(pt,bt)=>gt.has(bt)},m)})]}};gI.props={};function vI(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&++n}return n}function PB(t,e){let n=0,r,o=0,c=0;if(e===void 0)for(let l of t)l!=null&&(l=+l)>=l&&(r=l-o,o+=r/++n,c+=r*(l-o));else{let l=-1;for(let u of t)(u=e(u,++l,t))!=null&&(u=+u)>=u&&(r=u-o,o+=r/++n,c+=r*(u-o))}if(n>1)return c/(n-1)}function mI(t,e){const n=PB(t,e);return n&&Math.sqrt(n)}function IB(t,e,n){const r=vI(t),o=mI(t);return r&&o?Math.ceil((n-e)*Math.cbrt(r)/(3.49*o)):1}var yI=Array.prototype,RB=yI.slice,e$=yI.map;function k4(t){return()=>t}const kB=Math.sqrt(50),DB=Math.sqrt(10),FB=Math.sqrt(2);function aS(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),c=r/Math.pow(10,o),l=c>=kB?10:c>=DB?5:c>=FB?2:1;let u,d,h;return o<0?(h=Math.pow(10,-o)/l,u=Math.round(t*h),d=Math.round(e*h),u/h<t&&++u,d/h>e&&--d,h=-h):(h=Math.pow(10,o)*l,u=Math.round(t/h),d=Math.round(e/h),u*h<t&&++u,d*h>e&&--d),d<u&&.5<=n&&n<2?aS(t,e,n*2):[u,d,h]}function NB(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[o,c,l]=r?aS(e,t,n):aS(t,e,n);if(!(c>=o))return[];const u=c-o+1,d=new Array(u);if(r)if(l<0)for(let h=0;h<u;++h)d[h]=(c-h)/-l;else for(let h=0;h<u;++h)d[h]=(c-h)*l;else if(l<0)for(let h=0;h<u;++h)d[h]=(o+h)/-l;else for(let h=0;h<u;++h)d[h]=(o+h)*l;return d}function vm(t,e,n){return e=+e,t=+t,n=+n,aS(t,e,n)[2]}function n$(t,e,n){e=+e,t=+t,n=+n;const r=e<t,o=r?vm(e,t,n):vm(t,e,n);return(r?-1:1)*(o<0?1/-o:o)}function BB(t,e,n){let r;for(;;){const o=vm(t,e,n);if(o===r||o===0||!isFinite(o))return[t,e];o>0?(t=Math.floor(t/o)*o,e=Math.ceil(e/o)*o):o<0&&(t=Math.ceil(t*o)/o,e=Math.floor(e*o)/o),r=o}}function jB(t){return Math.max(1,Math.ceil(Math.log(vI(t))/Math.LN2)+1)}function zB(){var t=Vc,e=$a,n=jB;function r(o){Array.isArray(o)||(o=Array.from(o));var c,l=o.length,u,d,h=new Array(l);for(c=0;c<l;++c)h[c]=t(o[c],c,o);var p=e(h),v=p[0],m=p[1],b=n(h,v,m);if(!Array.isArray(b)){const M=m,L=+b;if(e===$a&&([v,m]=BB(v,m,L)),b=NB(v,m,L),b[0]<=v&&(d=vm(v,m,L)),b[b.length-1]>=m)if(M>=m&&e===$a){const R=vm(v,m,L);isFinite(R)&&(R>0?m=(Math.floor(m/R)+1)*R:R<0&&(m=(Math.ceil(m*-R)+1)/-R))}else b.pop()}for(var _=b.length,S=0,E=_;b[S]<=v;)++S;for(;b[E-1]>m;)--E;(S||E<_)&&(b=b.slice(S,E),_=E-S);var w=new Array(_+1),C;for(c=0;c<=_;++c)C=w[c]=[],C.x0=c>0?b[c-1]:v,C.x1=c<_?b[c]:m;if(isFinite(d)){if(d>0)for(c=0;c<l;++c)(u=h[c])!=null&&v<=u&&u<=m&&w[Math.min(_,Math.floor((u-v)/d))].push(o[c]);else if(d<0){for(c=0;c<l;++c)if((u=h[c])!=null&&v<=u&&u<=m){const M=Math.floor((v-u)*d);w[Math.min(_,M+(b[M]<=u))].push(o[c])}}}else for(c=0;c<l;++c)(u=h[c])!=null&&v<=u&&u<=m&&w[i_(b,u,0,_)].push(o[c]);return w}return r.value=function(o){return arguments.length?(t=typeof o=="function"?o:k4(o),r):t},r.domain=function(o){return arguments.length?(e=typeof o=="function"?o:k4([o[0],o[1]]),r):e},r.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:k4(Array.isArray(o)?RB.call(o):o),r):n},r}function D4(t,e,n=0,r=1/0,o){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(o=o===void 0?zu:ju(o);r>n;){if(r-n>600){const d=r-n+1,h=e-n+1,p=Math.log(d),v=.5*Math.exp(2*p/3),m=.5*Math.sqrt(p*v*(d-v)/d)*(h-d/2<0?-1:1),b=Math.max(n,Math.floor(e-h*v/d+m)),_=Math.min(r,Math.floor(e+(d-h)*v/d+m));D4(t,e,b,_,o)}const c=t[e];let l=n,u=r;for(mm(t,n,e),o(t[r],c)>0&&mm(t,n,r);l<u;){for(mm(t,l,u),++l,--u;o(t[l],c)<0;)++l;for(;o(t[u],c)>0;)--u}o(t[n],c)===0?mm(t,n,u):(++u,mm(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function mm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function UB(t,e=ui){let n,r=!1;if(e.length===1){let o;for(const c of t){const l=e(c);(r?ui(l,o)>0:ui(l,l)===0)&&(n=c,o=l,r=!0)}}else for(const o of t)(r?e(o,n)>0:e(o,o)===0)&&(n=o,r=!0);return n}function sS(t,e,n){if(t=Float64Array.from(s6(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return To(t);if(e>=1)return wr(t);var r,o=(r-1)*e,c=Math.floor(o),l=wr(D4(t,c).subarray(0,c+1)),u=To(t.subarray(c+1));return l+(u-l)*(o-c)}}function r$(t,e,n=number){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,c=Math.floor(o),l=+n(t[c],c,t),u=+n(t[c+1],c+1,t);return l+(u-l)*(o-c)}}function ZB(t,e,n=r_){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(u,d)=>r_(n(t[d],d,t))),e<=0)return gf(r);if(e>=1)return ol(r);var r,o=Uint32Array.from(t,(u,d)=>d),c=r.length-1,l=Math.floor(c*e);return D4(o,l,0,c,(u,d)=>zu(r[u],r[d])),l=UB(o.subarray(0,l+1),u=>r[u]),l>=0?l:-1}}function F4(t,e){return sS(t,.5,e)}function HB(t,e){return ZB(t,.5,e)}var VB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Vl(t){return e=>e===null?t:`${t} of ${e}`}function WB(t){if(typeof t=="function")return[t,null];const n={mean:GB,max:YB,count:qB,first:QB,last:JB,sum:KB,min:XB,median:$B}[t];if(!n)throw new Error(`Unknown reducer: ${t}.`);return n()}function GB(){const t=(n,r)=>vf(n,o=>+r[o]),e=Vl("mean");return[t,e]}function $B(){const t=(n,r)=>F4(n,o=>+r[o]),e=Vl("median");return[t,e]}function YB(){const t=(n,r)=>wr(n,o=>+r[o]),e=Vl("max");return[t,e]}function XB(){const t=(n,r)=>To(n,o=>+r[o]),e=Vl("min");return[t,e]}function qB(){const t=(n,r)=>n.length,e=Vl("count");return[t,e]}function KB(){const t=(n,r)=>Fo(n,o=>+r[o]),e=Vl("sum");return[t,e]}function QB(){const t=(n,r)=>r[n[0]],e=Vl("first");return[t,e]}function JB(){const t=(n,r)=>r[n[n.length-1]],e=Vl("last");return[t,e]}const N4=(t={})=>{const{groupBy:e}=t,n=VB(t,["groupBy"]);return(r,o)=>{const{data:c,encode:l}=o,u=e(r,o);if(!u)return[r,o];const d=(b,_)=>{if(b)return b;const{from:S}=_;if(!S)return b;const[,E]=vr(l,S);return E},h=Object.entries(n).map(([b,_])=>{const[S,E]=WB(_),[w,C]=vr(l,b),M=d(C,_),L=u.map(R=>S(R,w!=null?w:c));return[b,Object.assign(Object.assign({},kM(L,(E==null?void 0:E(M))||M)),{aggregate:!0})]}),p=Object.keys(l).map(b=>{const[_,S]=vr(l,b),E=u.map(w=>_[w[0]]);return[b,Br(E,S)]}),v=u.map(b=>c[b[0]]);return[Ks(u),an({},o,{data:v,encode:Object.fromEntries([...p,...h])})]}};N4.props={};var tj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const bI="thresholds";function ej(t){const[e,n]=$a(t);return Math.min(200,IB(t,e,n))}const B4=(t={})=>{const{groupChannels:e=["color"],binChannels:n=["x","y"]}=t,r=tj(t,["groupChannels","binChannels"]),o={},c=(l,u)=>{const{encode:d}=u,h=n.map(_=>{const[S]=vr(d,_);return S}),p=xn(r,bI),v=l.filter(_=>h.every(S=>Ur(S[_]))),m=[...e.map(_=>{const[S]=vr(d,_);return S}).filter(Ur).map(_=>S=>_[S]),...n.map((_,S)=>{const E=h[S],w=p[_]||ej(E),C=zB().thresholds(w).value(L=>+E[L])(v),M=new Map(C.flatMap(L=>{const{x0:R,x1:j}=L,z=`${R},${j}`;return L.map(H=>[H,z])}));return o[_]=M,L=>M.get(L)})],b=_=>m.map(S=>S(_)).join("-");return Array.from(Nr(v,b).values())};return N4(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([l])=>!l.startsWith(bI)))),Object.fromEntries(n.flatMap(l=>{const u=([h])=>+o[l].get(h).split(",")[0],d=([h])=>+o[l].get(h).split(",")[1];return d.from=l,[[l,u],[`${l}1`,d]]}))),{groupBy:c}))};B4.props={};const _I=(t={})=>{const{thresholds:e}=t;return B4(Object.assign(Object.assign({},t),{thresholdsX:e,groupChannels:["color"],binChannels:["x"]}))};_I.props={};var nj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const xI=(t={})=>{const{groupBy:e="x",reverse:n=!1,orderBy:r,padding:o}=t,c=nj(t,["groupBy","reverse","orderBy","padding"]);return(l,u)=>{const{data:d,encode:h,scale:p}=u,{series:v}=p,[m]=vr(h,"y"),[b]=Kh(h,"series","color"),_=pI(b,v),S=an({},u,{scale:{series:{domain:_,paddingInner:o}}}),E=Hl(e,l,u),w=dI(r);if(!w)return[l,an(S,{encode:{series:Br(b)}})];const C=w(d,m,b);C&&hI(E,C);const M=new Array(l.length);for(const L of E){n&&L.reverse();for(let R=0;R<L.length;R++)M[L[R]]=_[R]}return[l,an(S,{encode:{series:Br(r?M:b)}})]}};xI.props={};function cS(t,e,n){if(t===null)return[-.5,.5];const r=pI(t,e),c=new is({domain:r,range:[0,1],padding:n}).getBandWidth();return[-c/2,c/2]}function lS(t,e,n){return e*(1-t)+n*t}const SI=(t={})=>{const{padding:e=0,paddingX:n=e,paddingY:r=e,random:o=Math.random}=t;return(c,l)=>{const{encode:u,scale:d}=l,{x:h,y:p}=d,[v]=vr(u,"x"),[m]=vr(u,"y"),b=cS(v,h,n),_=cS(m,p,r),S=c.map(()=>lS(o(),..._)),E=c.map(()=>lS(o(),...b));return[c,an({scale:{x:{padding:.5},y:{padding:.5}}},l,{encode:{dy:Br(S),dx:Br(E)}})]}};SI.props={};const OI=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,o)=>{const{encode:c,scale:l}=o,{x:u}=l,[d]=vr(c,"x"),h=cS(d,u,e),p=r.map(()=>lS(n(),...h));return[r,an({scale:{x:{padding:.5}}},o,{encode:{dx:Br(p)}})]}};OI.props={};const EI=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,o)=>{const{encode:c,scale:l}=o,{y:u}=l,[d]=vr(c,"y"),h=cS(d,u,e),p=r.map(()=>lS(n(),...h));return[r,an({scale:{y:{padding:.5}}},o,{encode:{dy:Br(p)}})]}};EI.props={};var rj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const wI=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:o}=r,{x:c}=o,l=rj(o,["x"]),u=Object.entries(l).filter(([m])=>m.startsWith("y")).map(([m])=>[m,vr(o,m)[0]]),d=u.map(([m])=>[m,new Array(n.length)]),h=Hl(e,n,r),p=new Array(h.length);for(let m=0;m<h.length;m++){const _=h[m].flatMap(w=>u.map(([,C])=>+C[w])),[S,E]=$a(_);p[m]=(S+E)/2}const v=Math.max(...p);for(let m=0;m<h.length;m++){const b=v-p[m],_=h[m];for(const S of _)for(let E=0;E<u.length;E++){const[,w]=u[E],[,C]=d[E];C[S]=+w[S]+b}}return[n,an({},r,{encode:Object.fromEntries(d.map(([m,b])=>[m,Br(b,vr(o,m)[1])]))})]}};wI.props={};const AI=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:o}=r,[c]=vr(o,"y"),[l,u]=vr(o,"y1"),d=Hl(e,n,r),h=new Array(n.length);for(const p of d){const v=p.map(m=>+c[m]);for(let m=0;m<p.length;m++){const b=p[m],_=Math.max(...v.filter((S,E)=>E!==m));h[b]=+c[b]>_?_:c[b]}}return[n,an({},r,{encode:{y1:Br(h,u)}})]}};AI.props={};const TI=t=>{const{groupBy:e=["x"],reducer:n=(l,u)=>u[l[0]],orderBy:r=null,reverse:o=!1,duration:c}=t;return(l,u)=>{const{encode:d}=u,p=(Array.isArray(e)?e:[e]).map(E=>[E,vr(d,E)[0]]);if(p.length===0)return[l,u];let v=[l];for(const[,E]of p){const w=[];for(const C of v){const M=Array.from(Nr(C,L=>E[L]).values());w.push(...M)}v=w}if(r){const[E]=vr(d,r);E&&v.sort((w,C)=>n(w,E)-n(C,E)),o&&v.reverse()}const m=(c||3e3)/v.length,[b]=c?[Bs(l,m)]:Kh(d,"enterDuration",Bs(l,m)),[_]=Kh(d,"enterDelay",Bs(l,0)),S=new Array(l.length);for(let E=0,w=0;E<v.length;E++){const C=v[E],M=wr(C,L=>+b[L]);for(const L of C)S[L]=+_[L]+w;w+=M}return[l,an({},u,{encode:{enterDuration:Mc(b),enterDelay:Mc(S)}})]}};TI.props={};var ij=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function oj(t){return typeof t=="function"?t:{min:(n,r)=>To(n,o=>r[+o]),max:(n,r)=>wr(n,o=>r[+o]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>vf(n,o=>r[+o]),median:(n,r)=>F4(n,o=>r[+o]),sum:(n,r)=>Fo(n,o=>r[+o]),deviation:(n,r)=>mI(n,o=>r[+o])}[t]||wr}const CI=(t={})=>{const{groupBy:e="x",basis:n="max"}=t;return(r,o)=>{const{encode:c,tooltip:l}=o,{x:u}=c,d=ij(c,["x"]),h=Object.entries(d).filter(([S])=>S.startsWith("y")).map(([S])=>[S,vr(c,S)[0]]),[,p]=h.find(([S])=>S==="y"),v=h.map(([S])=>[S,new Array(r.length)]),m=Hl(e,r,o),b=oj(n);for(const S of m){const E=b(S,p);for(const w of S)for(let C=0;C<h.length;C++){const[,M]=h[C],[,L]=v[C];L[w]=+M[w]/E}}const _=ma(l)||(l==null?void 0:l.items)&&(l==null?void 0:l.items.length)!==0;return[r,an({},o,Object.assign({encode:Object.fromEntries(v.map(([S,E])=>[S,Br(E,vr(c,S)[1])]))},!_&&c.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};CI.props={};function MI(t,e){return[t[0]]}function aj(t,e){const n=t.length-1;return[t[n]]}function sj(t,e){const n=ol(t,r=>e[r]);return[t[n]]}function cj(t,e){const n=gf(t,r=>e[r]);return[t[n]]}function lj(t){return typeof t=="function"?t:{first:MI,last:aj,max:sj,min:cj}[t]||MI}const uS=(t={})=>{const{groupBy:e="series",channel:n,selector:r}=t;return(o,c)=>{const{encode:l}=c,u=Hl(e,o,c),[d]=vr(l,n),h=lj(r);return[u.flatMap(p=>h(p,d)),c]}};uS.props={};var uj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const LI=(t={})=>{const{selector:e}=t,n=uj(t,["selector"]);return uS(Object.assign({channel:"x",selector:e},n))};LI.props={};var fj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const PI=(t={})=>{const{selector:e}=t,n=fj(t,["selector"]);return uS(Object.assign({channel:"y",selector:e},n))};PI.props={};var dj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const ym=(t={})=>{const{channels:e=["x","y"]}=t,n=dj(t,["channels"]),r=(o,c)=>Hl(e,o,c);return N4(Object.assign(Object.assign({},n),{groupBy:r}))};ym.props={};const II=(t={})=>ym(Object.assign(Object.assign({},t),{channels:["x","color","series"]}));II.props={};const RI=(t={})=>ym(Object.assign(Object.assign({},t),{channels:["y","color","series"]}));RI.props={};const kI=(t={})=>ym(Object.assign(Object.assign({},t),{channels:["color"]}));kI.props={};function hj(t,e,n){return(e.length!==2?Ea(Xp(t,e,n),([r,o],[c,l])=>ui(o,l)||ui(r,c)):Ea(Nr(t,n),([r,o],[c,l])=>e(o,l)||ui(r,c))).map(([r])=>r)}function pj(t,e,n){const{by:r=t,reducer:o="max"}=e,[c]=vr(n,r);if(typeof o=="function")return l=>o(l,c);if(o==="max")return l=>wr(l,u=>+c[u]);if(o==="min")return l=>To(l,u=>+c[u]);if(o==="sum")return l=>Fo(l,u=>+c[u]);if(o==="median")return l=>F4(l,u=>+c[u]);if(o==="mean")return l=>vf(l,u=>+c[u]);if(o==="first")return l=>c[l[0]];if(o==="last")return l=>c[l[l.length-1]];throw new Error(`Unknown reducer: ${o}`)}function gj(t,e,n){if(!Array.isArray(n))return t;const r=new Set(n);return t.filter(o=>r.has(e[o]))}const fS=(t={})=>(e,n)=>{const{reverse:r,slice:o,channel:c,by:l,ordinal:u=!0,reducer:d}=t,{encode:h,scale:p={}}=n,v=p[c].domain,[m]=vr(h,l!=null?l:c),[b]=vr(h,c),_=pj(c,{by:l,reducer:d},h),S=gj(e,b,v),E=hj(S,_,L=>b[L]),w=u?e:Ea(e,L=>m[L]);r&&(!u&&w.reverse(),E.reverse());const C=typeof o=="number"?[0,o]:o,M=o?E.slice(...C):E;return[w,an(n,{scale:{[c]:{domain:M}}})]};fS.props={};const DI=(t={})=>fS(Object.assign(Object.assign({},t),{channel:"x"}));DI.props={};const FI=(t={})=>fS(Object.assign(Object.assign({},t),{channel:"y"}));FI.props={};const NI=(t={})=>fS(Object.assign(Object.assign({},t),{channel:"color"}));NI.props={};function vj(t,e){return typeof e=="string"?t.map(n=>n[e]):t.map(e)}function mj(t,e){if(typeof t=="function")return n=>t(n,e);if(t==="sum")return n=>Fo(n,r=>+e[r]);throw new Error(`Unknown reducer: ${t}`)}const BI=(t={})=>{const{field:e,channel:n="y",reducer:r="sum"}=t;return(o,c)=>{const{data:l,encode:u}=c,[d]=vr(u,"x"),h=e?vj(l,e):vr(u,n)[0],p=mj(r,h),v=Ql(o,p,m=>d[m]).map(m=>m[1]);return[o,an({},c,{scale:{x:{flex:v}}})]}};BI.props={};function yj(t){const{padding:e=0,direction:n="col"}=t;return(r,o,c)=>{const l=r.length;if(l===0)return[];const{innerWidth:u,innerHeight:d}=c,h=d/u;let p=Math.ceil(Math.sqrt(o/h)),v=u/p,m=Math.ceil(o/p),b=m*v;for(;b>d;)p=p+1,v=u/p,m=Math.ceil(o/p),b=m*v;const _=d-m*v,S=m<=1?0:_/(m-1),[E,w]=m<=1?[(u-l*v)/(l-1),(d-v)/2]:[0,0];return r.map((C,M)=>{const[L,R,j,z]=Hd(C),H=n==="col"?M%p:Math.floor(M/m),$=n==="col"?Math.floor(M/p):M%m,dt=H*v,gt=(m-$-1)*v+_,It=(v-e)/j,rt=(v-e)/z,lt=dt-L+E*H+1/2*e,pt=gt-R-S*$-w+1/2*e;return`translate(${lt}, ${pt}) scale(${It}, ${rt})`})}}const jI=t=>(e,n)=>[e,an({},n,{modifier:yj(t),axis:!1})];jI.props={};function bj(t,e,n,r){const o=t.length;if(r>=o||r===0)return t;const c=b=>e[t[b]]*1,l=b=>n[t[b]]*1,u=[],d=(o-2)/(r-2);let h=0,p,v,m;u.push(h);for(let b=0;b<r-2;b++){let _=0,S=0,E=Math.floor((b+1)*d)+1,w=Math.floor((b+2)*d)+1;w=Math.min(w,o);const C=w-E;for(;E<w;E++)_+=c(E),S+=l(E);_/=C,S/=C;let M=Math.floor((b+0)*d)+1;const L=Math.floor((b+1)*d)+1,R=[c(h),l(h)];for(p=v=-1;M<L;M++)v=Math.abs((R[0]-_)*(c(M)-R[1])-(R[0]-l(M))*(S-R[0]))*.5,v>p&&(p=v,m=M);u.push(m),h=m}return u.push(o-1),u.map(b=>t[b])}function _j(t){if(typeof t=="function")return t;if(t==="lttb")return bj;const e={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,o,c)=>[r[gf(r,l=>c[l])]],max:(r,o,c)=>[r[ol(r,l=>c[l])]],median:(r,o,c)=>[r[HB(r,l=>c[l])]]},n=e[t]||e.median;return(r,o,c,l)=>{const u=Math.max(1,Math.floor(r.length/l));return xj(r,u).flatMap(h=>n(h,o,c))}}function xj(t,e){const n=t.length,r=[];let o=0;for(;o<n;)r.push(t.slice(o,o+=e));return r}const zI=(t={})=>{const{strategy:e="median",thresholds:n=2e3,groupBy:r=["series","color"]}=t,o=_j(e);return(c,l)=>{const{encode:u}=l,d=Hl(r,c,l),[h]=vr(u,"x"),[p]=vr(u,"y");return[d.flatMap(v=>o(v,h,p,n)),l]}};zI.props={};function Sj(t){return typeof t=="object"?[t.value,t.ordinal]:[t,!0]}function Oj(t){var e;const{encode:n}=t,r=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),o=(e=n==null?void 0:n.color)===null||e===void 0?void 0:e.field;if(!n||!o)return r;let c;for(const[l,u]of Object.entries(n))(l==="x"||l==="y")&&u.field===o&&(c=Object.assign(Object.assign({},c),{[l]:Object.assign(Object.assign({},u),{value:[]})}));return c?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),c)}):r}const UI=(t={})=>(e,n)=>{const{encode:r,data:o}=n,c=Object.entries(t).map(([p,v])=>{const[m]=vr(r,p);if(!m)return null;const[b,_=!0]=Sj(v);if(typeof b=="function")return S=>b(m[S]);if(_){const S=Array.isArray(b)?b:[b];return S.length===0?null:E=>S.includes(m[E])}else{const[S,E]=b;return w=>m[w]>=S&&m[w]<=E}}).filter(Ur),l=p=>c.every(v=>v(p)),u=e.filter(l),d=u.map((p,v)=>v);if(c.length===0){const p=Oj(n);return[e,p]}const h=Object.entries(r).map(([p,v])=>[p,Object.assign(Object.assign({},v),{value:d.map(m=>v.value[u[m]]).filter(m=>m!==void 0)})]);return[d,an({},n,{encode:Object.fromEntries(h),data:u.map(p=>o[p])})]};UI.props={};var ZI={},j4={},z4=34,bm=10,U4=13;function HI(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Ej(t,e){var n=HI(t);return function(r,o){return e(n(r),o,t)}}function VI(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var o in r)o in e||n.push(e[o]=o)}),n}function qo(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function wj(t){return t<0?"-"+qo(-t,6):t>9999?"+"+qo(t,6):qo(t,4)}function Aj(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":wj(t.getUTCFullYear(),4)+"-"+qo(t.getUTCMonth()+1,2)+"-"+qo(t.getUTCDate(),2)+(o?"T"+qo(e,2)+":"+qo(n,2)+":"+qo(r,2)+"."+qo(o,3)+"Z":r?"T"+qo(e,2)+":"+qo(n,2)+":"+qo(r,2)+"Z":n||e?"T"+qo(e,2)+":"+qo(n,2)+"Z":"")}function Tj(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(v,m){var b,_,S=o(v,function(E,w){if(b)return b(E,w-1);_=E,b=m?Ej(E,m):HI(E)});return S.columns=_||[],S}function o(v,m){var b=[],_=v.length,S=0,E=0,w,C=_<=0,M=!1;v.charCodeAt(_-1)===bm&&--_,v.charCodeAt(_-1)===U4&&--_;function L(){if(C)return j4;if(M)return M=!1,ZI;var j,z=S,H;if(v.charCodeAt(z)===z4){for(;S++<_&&v.charCodeAt(S)!==z4||v.charCodeAt(++S)===z4;);return(j=S)>=_?C=!0:(H=v.charCodeAt(S++))===bm?M=!0:H===U4&&(M=!0,v.charCodeAt(S)===bm&&++S),v.slice(z+1,j-1).replace(/""/g,'"')}for(;S<_;){if((H=v.charCodeAt(j=S++))===bm)M=!0;else if(H===U4)M=!0,v.charCodeAt(S)===bm&&++S;else if(H!==n)continue;return v.slice(z,j)}return C=!0,v.slice(z,_)}for(;(w=L())!==j4;){for(var R=[];w!==ZI&&w!==j4;)R.push(w),w=L();m&&(R=m(R,E++))==null||b.push(R)}return b}function c(v,m){return v.map(function(b){return m.map(function(_){return p(b[_])}).join(t)})}function l(v,m){return m==null&&(m=VI(v)),[m.map(p).join(t)].concat(c(v,m)).join(`
`)}function u(v,m){return m==null&&(m=VI(v)),c(v,m).join(`
`)}function d(v){return v.map(h).join(`
`)}function h(v){return v.map(p).join(t)}function p(v){return v==null?"":v instanceof Date?Aj(v):e.test(v+="")?'"'+v.replace(/"/g,'""')+'"':v}return{parse:r,parseRows:o,format:l,formatBody:u,formatRows:d,formatRow:h,formatValue:p}}function Cj(t){for(var e in t){var n=t[e].trim(),r,o;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(o=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Mj&&o[4]&&!o[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const Mj=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var Lj=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const WI=t=>{const{value:e,format:n=e.split(".").pop(),delimiter:r=",",autoType:o=!0}=t;return()=>Lj(void 0,void 0,void 0,function*(){const c=yield fetch(e);if(n==="csv"){const l=yield c.text();return Tj(r).parse(l,o?Cj:Do)}if(n==="json")return yield c.json();throw new Error(`Unknown format: ${n}.`)})};WI.props={};const GI=t=>{const{value:e}=t;return()=>e};GI.props={};function Pj(t,e){return t.map(n=>{if(Array.isArray(n)){const[r,o=e]=n;return[r,o]}return[n,e]})}const $I=t=>{const{fields:e=[]}=t,n=Pj(e,!0);return r=>{const o=(c,l)=>n.reduce((u,[d,h=!0])=>u!==0?u:h?c[d]<l[d]?-1:+(c[d]!==l[d]):c[d]>l[d]?-1:+(c[d]!==l[d]),0);return[...r].sort(o)}};$I.props={};function i$(t){return t!=null&&!Number.isNaN(t)}const YI=t=>{const{callback:e}=t;return n=>Array.isArray(n)?[...n].sort(e):n};YI.props={};function Ij(t){return t!=null&&!Number.isNaN(t)}const XI=t=>{const{callback:e=Ij}=t;return n=>n.filter(e)};XI.props={};function Rj(t,e=[]){return e.reduce((n,r)=>(r in t&&(n[r]=t[r]),n),{})}const qI=t=>{const{fields:e}=t;return n=>n.map(r=>Rj(r,e))};qI.props={};function kj(t){return Object.keys(t).length===0}const KI=t=>e=>{if(!t||kj(t))return e;const n=r=>Object.entries(r).reduce((o,[c,l])=>(o[t[c]||c]=l,o),{});return e.map(n)};KI.props={};function Dj(t){return!t||Object.keys(t).length===0}const QI=t=>{const{fields:e,key:n="key",value:r="value"}=t;return o=>Dj(e)?o:o.flatMap(c=>e.map(l=>Object.assign(Object.assign({},c),{[n]:l,[r]:c[l]})))};QI.props={};const JI=t=>{const{start:e,end:n}=t;return r=>r.slice(e,n)};JI.props={};const tR=t=>{const{callback:e=Do}=t;return n=>e(n)};tR.props={};const eR=t=>{const{callback:e=Do}=t;return n=>Array.isArray(n)?n.map(e):n};eR.props={};function nR(t){return typeof t=="string"?e=>e[t]:t}const rR=t=>{const{join:e,on:n,select:r=[],as:o=r,unknown:c=NaN}=t,[l,u]=n,d=nR(u),h=nR(l),p=Xp(e,([v])=>v,v=>d(v));return v=>v.map(m=>{const b=p.get(h(m));return Object.assign(Object.assign({},m),r.reduce((_,S,E)=>(_[o[E]]=b?b[S]:c,_),{}))})};rR.props={};var Fj=k(53843),Nj=k.n(Fj);function o$(t){return t!=null&&!Number.isNaN(t)}const iR=t=>{const{field:e,groupBy:n,as:r=["y","size"],min:o,max:c,size:l=10,width:u}=t,[d,h]=r;return p=>Array.from(Nr(p,m=>n.map(b=>m[b]).join("-")).values()).map(m=>{const b=Nj().create(m.map(E=>E[e]),{min:o,max:c,size:l,width:u}),_=b.map(E=>E.x),S=b.map(E=>E.y);return Object.assign(Object.assign({},m[0]),{[d]:_,[h]:S})})};iR.props={};const oR=()=>t=>(console.log("G2 data section:",t),t);oR.props={};var Bj=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};function jj(t,e){return{set(n,r,o){if(e[n]===void 0)return this;const c=r?r.call(null,e[n]):e[n];return o?o.call(null,c):typeof t[n]=="function"?t[n](c):t[n]=c,this},setAsync(n,r,o){return Bj(this,void 0,void 0,function*(){if(e[n]===void 0)return this;const c=r?yield r.call(null,e[n]):e[n];return o?o.call(null,c):typeof t[n]=="function"?t[n](c):t[n]=c,this})}}}const Z4=Math.PI/180,_m=64,dS=2048;function zj(t){return t.text}function Uj(){return"serif"}function aR(){return"normal"}function Zj(t){return t.value}function Hj(){return~~(Math.random()*2)*90}function Vj(){return 1}function Wj(){}function Gj(t,e,n,r){if(e.sprite)return;const o=t.context,c=t.ratio;o.clearRect(0,0,(_m<<5)/c,dS/c);let l=0,u=0,d=0;const h=n.length;for(--r;++r<h;){e=n[r],o.save(),o.font=e.style+" "+e.weight+" "+~~((e.size+1)/c)+"px "+e.font;let m=o.measureText(e.text+"m").width*c,b=e.size<<1;if(e.rotate){const _=Math.sin(e.rotate*Z4),S=Math.cos(e.rotate*Z4),E=m*S,w=m*_,C=b*S,M=b*_;m=Math.max(Math.abs(E+M),Math.abs(E-M))+31>>5<<5,b=~~Math.max(Math.abs(w+C),Math.abs(w-C))}else m=m+31>>5<<5;if(b>d&&(d=b),l+m>=_m<<5&&(l=0,u+=d,d=0),u+b>=dS)break;o.translate((l+(m>>1))/c,(u+(b>>1))/c),e.rotate&&o.rotate(e.rotate*Z4),o.fillText(e.text,0,0),e.padding&&(o.lineWidth=2*e.padding,o.strokeText(e.text,0,0)),o.restore(),e.width=m,e.height=b,e.xoff=l,e.yoff=u,e.x1=m>>1,e.y1=b>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,l+=m}const p=o.getImageData(0,0,(_m<<5)/c,dS/c).data,v=[];for(;--r>=0;){if(e=n[r],!e.hasText)continue;const m=e.width,b=m>>5;let _=e.y1-e.y0;for(let w=0;w<_*b;w++)v[w]=0;if(l=e.xoff,l==null)return;u=e.yoff;let S=0,E=-1;for(let w=0;w<_;w++){for(let C=0;C<m;C++){const M=b*w+(C>>5),L=p[(u+w)*(_m<<5)+(l+C)<<2]?1<<31-C%32:0;v[M]|=L,S|=L}S?E=w:(e.y0++,_--,w--,u++)}e.y1=e.y0+E,e.sprite=v.slice(0,(e.y1-e.y0)*b)}}function $j(t,e,n){n>>=5;const r=t.sprite,o=t.width>>5,c=t.x-(o<<4),l=c&127,u=32-l,d=t.y1-t.y0;let h=(t.y+t.y0)*n+(c>>5),p;for(let v=0;v<d;v++){p=0;for(let m=0;m<=o;m++)if((p<<u|(m<o?(p=r[v*o+m])>>>l:0))&e[h+m])return!0;h+=n}return!1}function Yj(t,e){const n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function Xj(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function sR(t){const e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function qj(t){const n=4*t[0]/t[1];let r=0,o=0;return function(c){const l=c<0?-1:1;switch(Math.sqrt(1+4*l*c)-l&3){case 0:r+=n;break;case 1:o+=4;break;case 2:r-=n;break;default:o-=4;break}return[r,o]}}function cR(t){const e=[];let n=-1;for(;++n<t;)e[n]=0;return e}function Kj(){return document.createElement("canvas")}function Nc(t){return typeof t=="function"?t:function(){return t}}const Qj={archimedean:sR,rectangular:qj};function Jj(){let t=[256,256],e=zj,n=Uj,r=Zj,o=aR,c=Hj,l=Vj,u=sR,d=Math.random,h=Wj,p=[],v=null,m=1/0,b=Kj;const _=aR,S={};S.start=function(){const[C,M]=t,L=E(b()),R=S.board?S.board:cR((t[0]>>5)*t[1]),j=p.length,z=[],H=p.map(function(It,rt,lt){return It.text=e.call(this,It,rt,lt),It.font=n.call(this,It,rt,lt),It.style=_.call(this,It,rt,lt),It.weight=o.call(this,It,rt,lt),It.rotate=c.call(this,It,rt,lt),It.size=~~r.call(this,It,rt,lt),It.padding=l.call(this,It,rt,lt),It}).sort(function(It,rt){return rt.size-It.size});let $=-1,dt=S.board?[{x:0,y:0},{x:C,y:M}]:void 0;v&&clearInterval(v),v=setInterval(gt,0),gt();function gt(){const It=Date.now();for(;Date.now()-It<m&&++$<j;){const rt=H[$];rt.x=C*(d()+.5)>>1,rt.y=M*(d()+.5)>>1,Gj(L,rt,H,$),rt.hasText&&w(R,rt,dt)&&(h.call(null,"word",{cloud:S,word:rt}),z.push(rt),dt?S.hasImage||Yj(dt,rt):dt=[{x:rt.x+rt.x0,y:rt.y+rt.y0},{x:rt.x+rt.x1,y:rt.y+rt.y1}],rt.x-=t[0]>>1,rt.y-=t[1]>>1)}S._tags=z,S._bounds=dt,$>=j&&(S.stop(),h.call(null,"end",{cloud:S,words:z,bounds:dt}))}return S},S.stop=function(){return v&&(clearInterval(v),v=null),S};function E(C){C.width=C.height=1;const M=Math.sqrt(C.getContext("2d").getImageData(0,0,1,1).data.length>>2);C.width=(_m<<5)/M,C.height=dS/M;const L=C.getContext("2d");return L.fillStyle=L.strokeStyle="red",L.textAlign="center",L.textBaseline="middle",{context:L,ratio:M}}function w(C,M,L){const R=M.x,j=M.y,z=Math.sqrt(t[0]*t[0]+t[1]*t[1]),H=u(t),$=d()<.5?1:-1;let dt,gt=-$,It,rt;for(;(dt=H(gt+=$))&&(It=~~dt[0],rt=~~dt[1],!(Math.min(Math.abs(It),Math.abs(rt))>=z));)if(M.x=R+It,M.y=j+rt,!(M.x+M.x0<0||M.y+M.y0<0||M.x+M.x1>t[0]||M.y+M.y1>t[1])&&(!L||!$j(M,C,t[0]))&&(!L||Xj(M,L))){const lt=M.sprite,pt=M.width>>5,bt=t[0]>>5,Ht=M.x-(pt<<4),Rt=Ht&127,jt=32-Rt,oe=M.y1-M.y0;let Se,xe=(M.y+M.y0)*bt+(Ht>>5);for(let Pe=0;Pe<oe;Pe++){Se=0;for(let Ke=0;Ke<=pt;Ke++)C[xe+Ke]|=Se<<jt|(Ke<pt?(Se=lt[Pe*pt+Ke])>>>Rt:0);xe+=bt}return delete M.sprite,!0}return!1}return S.createMask=C=>{const M=document.createElement("canvas"),[L,R]=t;if(!L||!R)return;const j=L>>5,z=cR((L>>5)*R);M.width=L,M.height=R;const H=M.getContext("2d");H.drawImage(C,0,0,C.width,C.height,0,0,L,R);const $=H.getImageData(0,0,L,R).data;for(let dt=0;dt<R;dt++)for(let gt=0;gt<L;gt++){const It=j*dt+(gt>>5),rt=dt*L+gt<<2,pt=$[rt]>=250&&$[rt+1]>=250&&$[rt+2]>=250?1<<31-gt%32:0;z[It]|=pt}S.board=z,S.hasImage=!0},S.timeInterval=function(C){m=C==null?1/0:C},S.words=function(C){p=C},S.size=function(C=[]){t=[+C[0],+C[1]]},S.text=function(C){e=Nc(C)},S.font=function(C){n=Nc(C)},S.fontWeight=function(C){o=Nc(C)},S.rotate=function(C){c=Nc(C)},S.canvas=function(C){b=Nc(C)},S.spiral=function(C){u=Qj[C]||C},S.fontSize=function(C){r=Nc(C)},S.padding=function(C){l=Nc(C)},S.random=function(C){d=Nc(C)},S.on=function(C){h=Nc(C)},S}var tz=function(t,e,n,r){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?c(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},ez=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const nz={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function rz(t){return new Promise((e,n)=>{if(t instanceof HTMLImageElement){e(t);return}if(typeof t=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=()=>e(r),r.onerror=()=>{console.error(`'image ${t} load failed !!!'`),n()};return}n()})}function iz(t,e){if(typeof t=="function")return t;if(Array.isArray(t)){const[n,r]=t;if(!e)return()=>(r+n)/2;const[o,c]=e;return c===o?()=>(r+n)/2:({value:l})=>(r-n)/(c-o)*(l-o)+n}return()=>t}const lR=(t,e)=>n=>tz(void 0,void 0,void 0,function*(){const r=Object.assign({},nz,t,{canvas:e.createCanvas}),o=Jj();yield jj(o,r).set("fontSize",C=>{const M=n.map(L=>L.value);return iz(C,[To(M),wr(M)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",rz,o.createMask),o.words([...n]);const c=o.start(),[l,u]=r.size,d=[{x:0,y:0},{x:l,y:u}],{_bounds:h=d,_tags:p,hasImage:v}=c,m=p.map(C=>{var{x:M,y:L,font:R}=C,j=ez(C,["x","y","font"]);return Object.assign(Object.assign({},j),{x:M+l/2,y:L+u/2,fontFamily:R})}),[{x:b,y:_},{x:S,y:E}]=h,w={text:"",value:0,opacity:0,fontSize:0};return m.push(Object.assign(Object.assign({},w),{x:v?0:b,y:v?0:_}),Object.assign(Object.assign({},w),{x:v?l:S,y:v?u:E})),m});lR.props={};function oz(t,e){if(e<0||e>1)throw new Error("alpha must be between 0 and 1.");if(t.length===0)return[];let n=t[0];const r=[];for(const o of t){if(o==null){r.push(o),console.warn("EMA\uFF1AThe value is null or undefined",t);continue}n==null&&(n=o);const c=n*e+(1-e)*o;r.push(c),n=c}return r}const uR=t=>{const{field:e="y",alpha:n=.6,as:r=e}=t;return o=>{const c=o.map(u=>u[e]),l=oz(c,n);return o.map((u,d)=>Object.assign(Object.assign({},u),{[r]:l[d]}))}};uR.props={};const fR=.01;function xm(t){const{min:e,max:n}=t;return[[e[0],e[1]],[n[0],n[1]]]}function dR(t,e,n=fR){const[r,o]=t,[c,l]=e;return r>=c[0]-n&&r<=l[0]+n&&o>=c[1]-n&&o<=l[1]+n}function hR(t,e,n=fR){const[r,o]=t;return!(dR(r,e,n)&&dR(o,e,n))}function az(t,e){const[n,r]=t,[o,c]=e;return n[0]<c[0]&&r[0]>o[0]&&n[1]<c[1]&&r[1]>o[1]}const sz=t=>{const{priority:e}=t;return n=>{const r=[];return e&&n.sort(e),n.forEach(o=>{Vu(o);const c=o.getLocalBounds();r.some(u=>az(xm(c),xm(u.getLocalBounds())))?dl(o):r.push(o)}),n}};function cz([t,e],[n,r]){return r>t&&e>n}function hS(){const t=new Map;return[r=>t.get(r),(r,o)=>t.set(r,o)]}function lz(t){const e=t.cloneNode(!0),n=e.getElementById("connector");n&&e.removeChild(n);const{min:r,max:o}=e.getRenderBounds();return e.destroy(),{min:r,max:o}}const uz=t=>{const{maxIterations:e=10,maxError:n=.1,padding:r=1}=t;return o=>{const c=o.length;if(c<=1)return o;const[l,u]=hS(),[d,h]=hS(),[p,v]=hS(),[m,b]=hS();for(const _ of o){const{min:S,max:E}=lz(_),[w,C]=S,[M,L]=E;u(_,C),h(_,C),v(_,L-C),b(_,[w,M])}for(let _=0;_<e;_++){o.sort((E,w)=>ui(d(E),d(w)));let S=0;for(let E=0;E<c-1;E++){const w=o[E];let C=E+1,M;for(;(M=o[C])&&!cz(m(w),m(M));)C+=1;if(M){const L=d(w),R=p(w),j=d(M),z=j-(L+R);if(z<r){const H=(r-z)/2;S=Math.max(S,H),h(w,L-H),h(M,j+H)}}}if(S<n)break}for(const _ of o)_.style.y+=d(_)-l(_);return o}},fz=()=>t=>(t.forEach(e=>{Vu(e);const n=e.attr("bounds"),r=e.getLocalBounds();hR(xm(r),n)&&dl(e)}),t);function pR(t){return typeof t=="object"?t:(0,I.lu)(t)}function H4(t){let e=t/255;return e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),e}function gR(t,e,n){return .2126*H4(t)+.7152*H4(e)+.0722*H4(n)}function vR(t,e){if(!t||!e||t===e)return 1;const{r:n,g:r,b:o}=t,{r:c,g:l,b:u}=e,d=gR(n,r,o),h=gR(c,l,u);return(Math.max(d,h)+.05)/(Math.min(d,h)+.05)}function mR(t,e){const n=ol(e,r=>vR(t,pR(r)));return e[n]}const dz=t=>{const{threshold:e=4.5,palette:n=["#000","#fff"]}=t;return r=>(r.forEach(o=>{const c=o.attr("dependentElement").parsedStyle.fill,l=o.parsedStyle.fill;vR(l,c)<e&&o.attr("fill",mR(c,n))}),r)};function yR(t){var e;const n=t.getAnimations();if(!n||n.length===0)return Wu(t);const r=t.cloneNode(!0);r.style.visibility="hidden",n.forEach(c=>{const l=c.effect.getKeyframes();l&&l.length>0&&r.attr(l[l.length-1])}),(e=t.parentNode)===null||e===void 0||e.appendChild(r);const o=Wu(r);return r.destroy(),o}const hz=t=>{const{palette:e=["#000","#fff"],threshold:n=2}=t;return r=>(r.forEach(o=>{var c,l;const u=o.attr("dependentElement"),d=(l=(c=o.attributes.fill)!==null&&c!==void 0?c:o.parsedStyle.fill)!==null&&l!==void 0?l:"#fff",h=xm(yR(o)),p=xm(yR(u));if(hR(h,p,n)){const v=mR(pR(d),e);o.attr("stroke",v)}else o.removeAttribute("stroke")}),r)},pz=(t,e)=>{const[[n,r],[o,c]]=e,[[l,u],[d,h]]=t;let p=0,v=0;return l<n?p=n-l:d>o&&(p=o-d),u<r?v=r-u:h>c&&(v=c-h),[p,v]},gz=(t={})=>(e,{canvas:n,layout:r})=>{const{bounds:o="view",offsetX:c=0,offsetY:l=0}=t,d=(()=>{if(o==="main"){const{x:h=0,y:p=0,width:v=0,height:m=0,marginLeft:b=0,marginRight:_=0,marginTop:S=0,marginBottom:E=0,paddingLeft:w=0,paddingRight:C=0,paddingTop:M=0,paddingBottom:L=0}=r;return[[h+b+w+c,p+S+M+l],[h+v-_-C-c,p+m-E-L-l]]}else{const{x:h=0,y:p=0,width:v=0,height:m=0}=r;return[[h+c,p+l],[h+v-c,p+m-l]]}})();return e.forEach(h=>{Vu(h);const{max:p,min:v}=h.getRenderBounds(),[m,b]=p,[_,S]=v,E=pz([[_,S],[m,b]],d);h.style.connector&&h.style.connectorPoints&&(h.style.connectorPoints[0][0]-=E[0],h.style.connectorPoints[0][1]-=E[1]),h.style.x+=E[0],h.style.y+=E[1]}),e};function vz(){return{"data.fetch":WI,"data.inline":GI,"data.sortBy":$I,"data.sort":YI,"data.filter":XI,"data.pick":qI,"data.rename":KI,"data.fold":QI,"data.slice":JI,"data.custom":tR,"data.map":eR,"data.join":rR,"data.kde":iR,"data.log":oR,"data.wordCloud":lR,"data.ema":uR,"transform.stackY":gI,"transform.binX":_I,"transform.bin":B4,"transform.dodgeX":xI,"transform.jitter":SI,"transform.jitterX":OI,"transform.jitterY":EI,"transform.symmetryY":wI,"transform.diffY":AI,"transform.stackEnter":TI,"transform.normalizeY":CI,"transform.select":uS,"transform.selectX":LI,"transform.selectY":PI,"transform.groupX":II,"transform.groupY":RI,"transform.groupColor":kI,"transform.group":ym,"transform.sortX":DI,"transform.sortY":FI,"transform.sortColor":NI,"transform.flexX":BI,"transform.pack":jI,"transform.sample":zI,"transform.filter":UI,"coordinate.cartesian":Ex,"coordinate.polar":cu,"coordinate.transpose":Mv,"coordinate.theta":Ax,"coordinate.parallel":Lv,"coordinate.fisheye":RM,"coordinate.radial":b0,"coordinate.radar":Tx,"coordinate.helix":qh,"encode.constant":Cx,"encode.field":Mx,"encode.transform":Lx,"encode.column":Px,"mark.interval":Bx,"mark.rect":zx,"mark.line":i3,"mark.point":Mo,"mark.text":_3,"mark.cell":Rf,"mark.area":T3,"mark.link":nm,"mark.image":i,"mark.polygon":P,"mark.box":Ne,"mark.vector":He,"mark.lineX":$n,"mark.lineY":$o,"mark.connector":j3,"mark.range":Z3,"mark.rangeX":W3,"mark.rangeY":xr,"mark.path":Zs,"mark.shape":t7,"mark.density":r7,"mark.heatmap":a7,"mark.wordCloud":XM,"palette.category10":s7,"palette.category20":c7,"scale.linear":l7,"scale.ordinal":u7,"scale.band":f7,"scale.identity":d7,"scale.point":h7,"scale.time":D7,"scale.log":N7,"scale.pow":B7,"scale.sqrt":j7,"scale.threshold":z7,"scale.quantile":U7,"scale.quantize":Z7,"scale.sequential":H7,"scale.constant":V7,"theme.classic":W7,"theme.classicDark":$7,"theme.academy":Y7,"theme.light":o4,"theme.dark":G7,"component.axisX":X7,"component.axisY":q7,"component.legendCategory":s4,"component.legendContinuous":vs,"component.legends":J7,"component.title":e8,"component.sliderX":s8,"component.sliderY":c8,"component.scrollbarX":l8,"component.scrollbarY":u8,"animation.scaleInX":f4,"animation.scaleOutX":EF,"animation.scaleInY":f8,"animation.scaleOutY":wF,"animation.waveIn":d8,"animation.fadeIn":h8,"animation.fadeOut":p8,"animation.zoomIn":AF,"animation.zoomOut":TF,"animation.pathIn":g8,"animation.morphing":_8,"animation.growInX":x8,"animation.growInY":S8,"interaction.elementHighlight":J3,"interaction.elementHighlightByX":O8,"interaction.elementHighlightByColor":E8,"interaction.elementSelect":tS,"interaction.elementSelectByX":w8,"interaction.elementSelectByColor":A8,"interaction.fisheye":HF,"interaction.chartIndex":T8,"interaction.tooltip":uv,"interaction.legendFilter":nN,"interaction.legendHighlight":rN,"interaction.brushHighlight":y4,"interaction.brushXHighlight":lN,"interaction.brushYHighlight":uN,"interaction.brushAxisHighlight":bN,"interaction.brushFilter":S4,"interaction.brushXFilter":ON,"interaction.brushYFilter":EN,"interaction.sliderFilter":z8,"interaction.scrollbarFilter":MN,"interaction.poptip":H8,"interaction.treemapDrillDown":qN,"interaction.elementPointMove":nB,"composition.spaceLayer":iI,"composition.spaceFlex":oI,"composition.facetRect":lI,"composition.repeatMatrix":gB,"composition.facetCircle":xB,"composition.timingKeyframe":fI,"labelTransform.overlapHide":sz,"labelTransform.overlapDodgeY":uz,"labelTransform.overflowHide":fz,"labelTransform.contrastReverse":dz,"labelTransform.overflowStroke":hz,"labelTransform.exceedAdjust":gz}}var Sm=t=>t;function pS(t,e){t&&_R.hasOwnProperty(t.type)&&_R[t.type](t,e)}var bR={Feature:function(t,e){pS(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)pS(n[r].geometry,e)}},_R={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){V4(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)V4(n[r],e,0)},Polygon:function(t,e){xR(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)xR(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)pS(n[r],e)}};function V4(t,e,n){var r=-1,o=t.length-n,c;for(e.lineStart();++r<o;)c=t[r],e.point(c[0],c[1],c[2]);e.lineEnd()}function xR(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)V4(t[n],e,1);e.polygonEnd()}function yp(t,e){t&&bR.hasOwnProperty(t.type)?bR[t.type](t,e):pS(t,e)}class Bc{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let o=0;o<this._n&&o<32;o++){const c=n[o],l=e+c,u=Math.abs(e)<Math.abs(c)?e-(l-c):c-(l-e);u&&(n[r++]=u),e=l}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,o,c,l=0;if(n>0){for(l=e[--n];n>0&&(r=l,o=e[--n],l=r+o,c=o-(l-r),!c););n>0&&(c<0&&e[n-1]<0||c>0&&e[n-1]>0)&&(o=c*2,r=l+o,o==r-l&&(l=r))}return l}}function a$(t,e){const n=new Bc;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&n.add(o)}return+n}function s$(t,e){const n=new Bc;let r=-1;return Float64Array.from(t,e===void 0?o=>n.add(+o||0):o=>n.add(+e(o,++r,t)||0))}var qn=1e-6,SR=1e-12,mr=Math.PI,Ai=mr/2,OR=mr/4,ha=mr*2,So=180/mr,gi=mr/180,Dr=Math.abs,bp=Math.atan,jc=Math.atan2,dr=Math.cos,gS=Math.ceil,ER=Math.exp,c$=Math.floor,l$=Math.hypot,vS=Math.log,W4=Math.pow,ir=Math.sin,ka=Math.sign||function(t){return t>0?1:t<0?-1:0},Ko=Math.sqrt,G4=Math.tan;function wR(t){return t>1?0:t<-1?mr:Math.acos(t)}function Da(t){return t>1?Ai:t<-1?-Ai:Math.asin(t)}function u$(t){return(t=ir(t/2))*t}function Fa(){}var $4=new Bc,Y4=new Bc,AR,TR,X4,q4,Wl={point:Fa,lineStart:Fa,lineEnd:Fa,polygonStart:function(){Wl.lineStart=mz,Wl.lineEnd=bz},polygonEnd:function(){Wl.lineStart=Wl.lineEnd=Wl.point=Fa,$4.add(Dr(Y4)),Y4=new Bc},result:function(){var t=$4/2;return $4=new Bc,t}};function mz(){Wl.point=yz}function yz(t,e){Wl.point=CR,AR=X4=t,TR=q4=e}function CR(t,e){Y4.add(q4*t-X4*e),X4=t,q4=e}function bz(){CR(AR,TR)}var MR=Wl,_p=1/0,mS=_p,Om=-_p,yS=Om,_z={point:xz,lineStart:Fa,lineEnd:Fa,polygonStart:Fa,polygonEnd:Fa,result:function(){var t=[[_p,mS],[Om,yS]];return Om=yS=-(mS=_p=1/0),t}};function xz(t,e){t<_p&&(_p=t),t>Om&&(Om=t),e<mS&&(mS=e),e>yS&&(yS=e)}var bS=_z,K4=0,Q4=0,Em=0,_S=0,xS=0,xp=0,J4=0,tL=0,wm=0,LR,PR,Hs,Vs,ts={point:jf,lineStart:IR,lineEnd:RR,polygonStart:function(){ts.lineStart=Ez,ts.lineEnd=wz},polygonEnd:function(){ts.point=jf,ts.lineStart=IR,ts.lineEnd=RR},result:function(){var t=wm?[J4/wm,tL/wm]:xp?[_S/xp,xS/xp]:Em?[K4/Em,Q4/Em]:[NaN,NaN];return K4=Q4=Em=_S=xS=xp=J4=tL=wm=0,t}};function jf(t,e){K4+=t,Q4+=e,++Em}function IR(){ts.point=Sz}function Sz(t,e){ts.point=Oz,jf(Hs=t,Vs=e)}function Oz(t,e){var n=t-Hs,r=e-Vs,o=Ko(n*n+r*r);_S+=o*(Hs+t)/2,xS+=o*(Vs+e)/2,xp+=o,jf(Hs=t,Vs=e)}function RR(){ts.point=jf}function Ez(){ts.point=Az}function wz(){kR(LR,PR)}function Az(t,e){ts.point=kR,jf(LR=Hs=t,PR=Vs=e)}function kR(t,e){var n=t-Hs,r=e-Vs,o=Ko(n*n+r*r);_S+=o*(Hs+t)/2,xS+=o*(Vs+e)/2,xp+=o,o=Vs*t-Hs*e,J4+=o*(Hs+t),tL+=o*(Vs+e),wm+=o*3,jf(Hs=t,Vs=e)}var DR=ts;function FR(t){this._context=t}FR.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,ha);break}}},result:Fa};var eL=new Bc,nL,NR,BR,Am,Tm,SS={point:Fa,lineStart:function(){SS.point=Tz},lineEnd:function(){nL&&jR(NR,BR),SS.point=Fa},polygonStart:function(){nL=!0},polygonEnd:function(){nL=null},result:function(){var t=+eL;return eL=new Bc,t}};function Tz(t,e){SS.point=jR,NR=Am=t,BR=Tm=e}function jR(t,e){Am-=t,Tm-=e,eL.add(Ko(Am*Am+Tm*Tm)),Am=t,Tm=e}var zR=SS;let UR,OS,ZR,HR;class VR{constructor(e){this._append=e==null?WR:Cz(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==ZR||this._append!==OS){const r=this._radius,o=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,ZR=r,OS=this._append,HR=this._,this._=o}this._+=HR;break}}}result(){const e=this._;return this._="",e.length?e:null}}function WR(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Cz(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return WR;if(e!==UR){const n=Fi(10,e);UR=e,OS=function(o){let c=1;this._+=o[0];for(const l=o.length;c<l;++c)this._+=Math.round(arguments[c]*n)/n+o[c]}}return OS}function GR(t,e){let n=3,r=4.5,o,c;function l(u){return u&&(typeof r=="function"&&c.pointRadius(+r.apply(this,arguments)),yp(u,o(c))),c.result()}return l.area=function(u){return yp(u,o(MR)),MR.result()},l.measure=function(u){return yp(u,o(zR)),zR.result()},l.bounds=function(u){return yp(u,o(bS)),bS.result()},l.centroid=function(u){return yp(u,o(DR)),DR.result()},l.projection=function(u){return arguments.length?(o=u==null?(t=null,Sm):(t=u).stream,l):t},l.context=function(u){return arguments.length?(c=u==null?(e=null,new VR(n)):new FR(e=u),typeof r!="function"&&c.pointRadius(r),l):e},l.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(c.pointRadius(+u),+u),l):r},l.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const d=Math.floor(u);if(!(d>=0))throw new RangeError(`invalid digits: ${u}`);n=d}return e===null&&(c=new VR(n)),l},l.projection(t).digits(n).context(e)}function Sp(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((e-t)/n))|0,c=new Array(o);++r<o;)c[r]=t+r*n;return c}function $R(t,e,n){var r=Sp(t,e-qn,n).concat(e);return function(o){return r.map(function(c){return[o,c]})}}function YR(t,e,n){var r=Sp(t,e-qn,n).concat(e);return function(o){return r.map(function(c){return[c,o]})}}function Mz(){var t,e,n,r,o,c,l,u,d=10,h=d,p=90,v=360,m,b,_,S,E=2.5;function w(){return{type:"MultiLineString",coordinates:C()}}function C(){return Sp(gS(r/p)*p,n,p).map(_).concat(Sp(gS(u/v)*v,l,v).map(S)).concat(Sp(gS(e/d)*d,t,d).filter(function(M){return Dr(M%p)>qn}).map(m)).concat(Sp(gS(c/h)*h,o,h).filter(function(M){return Dr(M%v)>qn}).map(b))}return w.lines=function(){return C().map(function(M){return{type:"LineString",coordinates:M}})},w.outline=function(){return{type:"Polygon",coordinates:[_(r).concat(S(l).slice(1),_(n).reverse().slice(1),S(u).reverse().slice(1))]}},w.extent=function(M){return arguments.length?w.extentMajor(M).extentMinor(M):w.extentMinor()},w.extentMajor=function(M){return arguments.length?(r=+M[0][0],n=+M[1][0],u=+M[0][1],l=+M[1][1],r>n&&(M=r,r=n,n=M),u>l&&(M=u,u=l,l=M),w.precision(E)):[[r,u],[n,l]]},w.extentMinor=function(M){return arguments.length?(e=+M[0][0],t=+M[1][0],c=+M[0][1],o=+M[1][1],e>t&&(M=e,e=t,t=M),c>o&&(M=c,c=o,o=M),w.precision(E)):[[e,c],[t,o]]},w.step=function(M){return arguments.length?w.stepMajor(M).stepMinor(M):w.stepMinor()},w.stepMajor=function(M){return arguments.length?(p=+M[0],v=+M[1],w):[p,v]},w.stepMinor=function(M){return arguments.length?(d=+M[0],h=+M[1],w):[d,h]},w.precision=function(M){return arguments.length?(E=+M,m=$R(c,o,90),b=YR(e,t,E),_=$R(u,l,90),S=YR(r,n,E),w):E},w.extentMajor([[-180,-90+qn],[180,90-qn]]).extentMinor([[-180,-80-qn],[180,80+qn]])}function Lz(){return Mz()()}function XR(){var t=[],e;return{point:function(n,r,o){e.push([n,r,o])},lineStart:function(){t.push(e=[])},lineEnd:Fa,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ES(t,e){return Dr(t[0]-e[0])<qn&&Dr(t[1]-e[1])<qn}function wS(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function qR(t,e,n,r,o){var c=[],l=[],u,d;if(t.forEach(function(_){if(!((S=_.length-1)<=0)){var S,E=_[0],w=_[S],C;if(ES(E,w)){if(!E[2]&&!w[2]){for(o.lineStart(),u=0;u<S;++u)o.point((E=_[u])[0],E[1]);o.lineEnd();return}w[0]+=2*qn}c.push(C=new wS(E,_,null,!0)),l.push(C.o=new wS(E,null,C,!1)),c.push(C=new wS(w,_,null,!1)),l.push(C.o=new wS(w,null,C,!0))}}),!!c.length){for(l.sort(e),KR(c),KR(l),u=0,d=l.length;u<d;++u)l[u].e=n=!n;for(var h=c[0],p,v;;){for(var m=h,b=!0;m.v;)if((m=m.n)===h)return;p=m.z,o.lineStart();do{if(m.v=m.o.v=!0,m.e){if(b)for(u=0,d=p.length;u<d;++u)o.point((v=p[u])[0],v[1]);else r(m.x,m.n.x,1,o);m=m.n}else{if(b)for(p=m.p.z,u=p.length-1;u>=0;--u)o.point((v=p[u])[0],v[1]);else r(m.x,m.p.x,-1,o);m=m.p}m=m.o,p=m.z,b=!b}while(!m.v);o.lineEnd()}}}function KR(t){if(e=t.length){for(var e,n=0,r=t[0],o;++n<e;)r.n=o=t[n],o.p=r,r=o;r.n=o=t[0],o.p=r}}function rL(t){return[jc(t[1],t[0]),Da(t[2])]}function Op(t){var e=t[0],n=t[1],r=dr(n);return[r*dr(e),r*ir(e),ir(n)]}function AS(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function TS(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function iL(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function CS(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function oL(t){var e=Ko(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function aL(t){return Dr(t[0])<=mr?t[0]:ka(t[0])*((Dr(t[0])+mr)%ha-mr)}function Pz(t,e){var n=aL(e),r=e[1],o=ir(r),c=[ir(n),-dr(n),0],l=0,u=0,d=new Bc;o===1?r=Ai+qn:o===-1&&(r=-Ai-qn);for(var h=0,p=t.length;h<p;++h)if(m=(v=t[h]).length)for(var v,m,b=v[m-1],_=aL(b),S=b[1]/2+OR,E=ir(S),w=dr(S),C=0;C<m;++C,_=L,E=j,w=z,b=M){var M=v[C],L=aL(M),R=M[1]/2+OR,j=ir(R),z=dr(R),H=L-_,$=H>=0?1:-1,dt=$*H,gt=dt>mr,It=E*j;if(d.add(jc(It*$*ir(dt),w*z+It*dr(dt))),l+=gt?H+$*ha:H,gt^_>=n^L>=n){var rt=TS(Op(b),Op(M));oL(rt);var lt=TS(c,rt);oL(lt);var pt=(gt^H>=0?-1:1)*Da(lt[2]);(r>pt||r===pt&&(rt[0]||rt[1]))&&(u+=gt^H>=0?1:-1)}}return(l<-qn||l<qn&&d<-SR)^u&1}function*Iz(t){for(const e of t)yield*BD(e)}function QR(t){return Array.from(Iz(t))}function JR(t,e,n,r){return function(o){var c=e(o),l=XR(),u=e(l),d=!1,h,p,v,m={point:b,lineStart:S,lineEnd:E,polygonStart:function(){m.point=w,m.lineStart=C,m.lineEnd=M,p=[],h=[]},polygonEnd:function(){m.point=b,m.lineStart=S,m.lineEnd=E,p=QR(p);var L=Pz(h,r);p.length?(d||(o.polygonStart(),d=!0),qR(p,kz,L,n,o)):L&&(d||(o.polygonStart(),d=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),p=h=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function b(L,R){t(L,R)&&o.point(L,R)}function _(L,R){c.point(L,R)}function S(){m.point=_,c.lineStart()}function E(){m.point=b,c.lineEnd()}function w(L,R){v.push([L,R]),u.point(L,R)}function C(){u.lineStart(),v=[]}function M(){w(v[0][0],v[0][1]),u.lineEnd();var L=u.clean(),R=l.result(),j,z=R.length,H,$,dt;if(v.pop(),h.push(v),v=null,!!z){if(L&1){if($=R[0],(H=$.length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),j=0;j<H;++j)o.point((dt=$[j])[0],dt[1]);o.lineEnd()}return}z>1&&L&2&&R.push(R.pop().concat(R.shift())),p.push(R.filter(Rz))}}return m}}function Rz(t){return t.length>1}function kz(t,e){return((t=t.x)[0]<0?t[1]-Ai-qn:Ai-t[1])-((e=e.x)[0]<0?e[1]-Ai-qn:Ai-e[1])}var tk=JR(function(){return!0},Dz,Nz,[-mr,-Ai]);function Dz(t){var e=NaN,n=NaN,r=NaN,o;return{lineStart:function(){t.lineStart(),o=1},point:function(c,l){var u=c>0?mr:-mr,d=Dr(c-e);Dr(d-mr)<qn?(t.point(e,n=(n+l)/2>0?Ai:-Ai),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(u,n),t.point(c,n),o=0):r!==u&&d>=mr&&(Dr(e-r)<qn&&(e-=r*qn),Dr(c-u)<qn&&(c-=u*qn),n=Fz(e,n,c,l),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(u,n),o=0),t.point(e=c,n=l),r=u},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-o}}}function Fz(t,e,n,r){var o,c,l=ir(t-n);return Dr(l)>qn?bp((ir(e)*(c=dr(r))*ir(n)-ir(r)*(o=dr(e))*ir(t))/(o*c*l)):(e+r)/2}function Nz(t,e,n,r){var o;if(t==null)o=n*Ai,r.point(-mr,o),r.point(0,o),r.point(mr,o),r.point(mr,0),r.point(mr,-o),r.point(0,-o),r.point(-mr,-o),r.point(-mr,0),r.point(-mr,o);else if(Dr(t[0]-e[0])>qn){var c=t[0]<e[0]?mr:-mr;o=n*c/2,r.point(-c,o),r.point(0,o),r.point(c,o)}else r.point(e[0],e[1])}function ek(t,e,n,r,o,c){if(n){var l=dr(e),u=ir(e),d=r*n;o==null?(o=e+r*ha,c=e-d/2):(o=nk(l,o),c=nk(l,c),(r>0?o<c:o>c)&&(o+=r*ha));for(var h,p=o;r>0?p>c:p<c;p-=d)h=rL([l,-u*dr(p),-u*ir(p)]),t.point(h[0],h[1])}}function nk(t,e){e=Op(e),e[0]-=t,oL(e);var n=wR(-e[1]);return((-e[2]<0?-n:n)+ha-qn)%ha}function f$(){var t=constant([0,0]),e=constant(90),n=constant(2),r,o,c={point:l};function l(d,h){r.push(d=o(d,h)),d[0]*=degrees,d[1]*=degrees}function u(){var d=t.apply(this,arguments),h=e.apply(this,arguments)*radians,p=n.apply(this,arguments)*radians;return r=[],o=rotateRadians(-d[0]*radians,-d[1]*radians,0).invert,ek(c,h,p,1),d={type:"Polygon",coordinates:[r]},r=o=null,d}return u.center=function(d){return arguments.length?(t=typeof d=="function"?d:constant([+d[0],+d[1]]),u):t},u.radius=function(d){return arguments.length?(e=typeof d=="function"?d:constant(+d),u):e},u.precision=function(d){return arguments.length?(n=typeof d=="function"?d:constant(+d),u):n},u}function Bz(t){var e=dr(t),n=2*gi,r=e>0,o=Dr(e)>qn;function c(p,v,m,b){ek(b,t,n,m,p,v)}function l(p,v){return dr(p)*dr(v)>e}function u(p){var v,m,b,_,S;return{lineStart:function(){_=b=!1,S=1},point:function(E,w){var C=[E,w],M,L=l(E,w),R=r?L?0:h(E,w):L?h(E+(E<0?mr:-mr),w):0;if(!v&&(_=b=L)&&p.lineStart(),L!==b&&(M=d(v,C),(!M||ES(v,M)||ES(C,M))&&(C[2]=1)),L!==b)S=0,L?(p.lineStart(),M=d(C,v),p.point(M[0],M[1])):(M=d(v,C),p.point(M[0],M[1],2),p.lineEnd()),v=M;else if(o&&v&&r^L){var j;!(R&m)&&(j=d(C,v,!0))&&(S=0,r?(p.lineStart(),p.point(j[0][0],j[0][1]),p.point(j[1][0],j[1][1]),p.lineEnd()):(p.point(j[1][0],j[1][1]),p.lineEnd(),p.lineStart(),p.point(j[0][0],j[0][1],3)))}L&&(!v||!ES(v,C))&&p.point(C[0],C[1]),v=C,b=L,m=R},lineEnd:function(){b&&p.lineEnd(),v=null},clean:function(){return S|(_&&b)<<1}}}function d(p,v,m){var b=Op(p),_=Op(v),S=[1,0,0],E=TS(b,_),w=AS(E,E),C=E[0],M=w-C*C;if(!M)return!m&&p;var L=e*w/M,R=-e*C/M,j=TS(S,E),z=CS(S,L),H=CS(E,R);iL(z,H);var $=j,dt=AS(z,$),gt=AS($,$),It=dt*dt-gt*(AS(z,z)-1);if(!(It<0)){var rt=Ko(It),lt=CS($,(-dt-rt)/gt);if(iL(lt,z),lt=rL(lt),!m)return lt;var pt=p[0],bt=v[0],Ht=p[1],Rt=v[1],jt;bt<pt&&(jt=pt,pt=bt,bt=jt);var oe=bt-pt,Se=Dr(oe-mr)<qn,xe=Se||oe<qn;if(!Se&&Rt<Ht&&(jt=Ht,Ht=Rt,Rt=jt),xe?Se?Ht+Rt>0^lt[1]<(Dr(lt[0]-pt)<qn?Ht:Rt):Ht<=lt[1]&&lt[1]<=Rt:oe>mr^(pt<=lt[0]&&lt[0]<=bt)){var Pe=CS($,(-dt+rt)/gt);return iL(Pe,z),[lt,rL(Pe)]}}}function h(p,v){var m=r?t:mr-t,b=0;return p<-m?b|=1:p>m&&(b|=2),v<-m?b|=4:v>m&&(b|=8),b}return JR(l,u,c,r?[0,-t]:[-mr,t-mr])}function jz(t,e,n,r,o,c){var l=t[0],u=t[1],d=e[0],h=e[1],p=0,v=1,m=d-l,b=h-u,_;if(_=n-l,!(!m&&_>0)){if(_/=m,m<0){if(_<p)return;_<v&&(v=_)}else if(m>0){if(_>v)return;_>p&&(p=_)}if(_=o-l,!(!m&&_<0)){if(_/=m,m<0){if(_>v)return;_>p&&(p=_)}else if(m>0){if(_<p)return;_<v&&(v=_)}if(_=r-u,!(!b&&_>0)){if(_/=b,b<0){if(_<p)return;_<v&&(v=_)}else if(b>0){if(_>v)return;_>p&&(p=_)}if(_=c-u,!(!b&&_<0)){if(_/=b,b<0){if(_>v)return;_>p&&(p=_)}else if(b>0){if(_<p)return;_<v&&(v=_)}return p>0&&(t[0]=l+p*m,t[1]=u+p*b),v<1&&(e[0]=l+v*m,e[1]=u+v*b),!0}}}}}var Cm=1e9,MS=-Cm;function rk(t,e,n,r){function o(h,p){return t<=h&&h<=n&&e<=p&&p<=r}function c(h,p,v,m){var b=0,_=0;if(h==null||(b=l(h,v))!==(_=l(p,v))||d(h,p)<0^v>0)do m.point(b===0||b===3?t:n,b>1?r:e);while((b=(b+v+4)%4)!==_);else m.point(p[0],p[1])}function l(h,p){return Dr(h[0]-t)<qn?p>0?0:3:Dr(h[0]-n)<qn?p>0?2:1:Dr(h[1]-e)<qn?p>0?1:0:p>0?3:2}function u(h,p){return d(h.x,p.x)}function d(h,p){var v=l(h,1),m=l(p,1);return v!==m?v-m:v===0?p[1]-h[1]:v===1?h[0]-p[0]:v===2?h[1]-p[1]:p[0]-h[0]}return function(h){var p=h,v=XR(),m,b,_,S,E,w,C,M,L,R,j,z={point:H,lineStart:It,lineEnd:rt,polygonStart:dt,polygonEnd:gt};function H(pt,bt){o(pt,bt)&&p.point(pt,bt)}function $(){for(var pt=0,bt=0,Ht=b.length;bt<Ht;++bt)for(var Rt=b[bt],jt=1,oe=Rt.length,Se=Rt[0],xe,Pe,Ke=Se[0],Ze=Se[1];jt<oe;++jt)xe=Ke,Pe=Ze,Se=Rt[jt],Ke=Se[0],Ze=Se[1],Pe<=r?Ze>r&&(Ke-xe)*(r-Pe)>(Ze-Pe)*(t-xe)&&++pt:Ze<=r&&(Ke-xe)*(r-Pe)<(Ze-Pe)*(t-xe)&&--pt;return pt}function dt(){p=v,m=[],b=[],j=!0}function gt(){var pt=$(),bt=j&&pt,Ht=(m=QR(m)).length;(bt||Ht)&&(h.polygonStart(),bt&&(h.lineStart(),c(null,null,1,h),h.lineEnd()),Ht&&qR(m,u,pt,c,h),h.polygonEnd()),p=h,m=b=_=null}function It(){z.point=lt,b&&b.push(_=[]),R=!0,L=!1,C=M=NaN}function rt(){m&&(lt(S,E),w&&L&&v.rejoin(),m.push(v.result())),z.point=H,L&&p.lineEnd()}function lt(pt,bt){var Ht=o(pt,bt);if(b&&_.push([pt,bt]),R)S=pt,E=bt,w=Ht,R=!1,Ht&&(p.lineStart(),p.point(pt,bt));else if(Ht&&L)p.point(pt,bt);else{var Rt=[C=Math.max(MS,Math.min(Cm,C)),M=Math.max(MS,Math.min(Cm,M))],jt=[pt=Math.max(MS,Math.min(Cm,pt)),bt=Math.max(MS,Math.min(Cm,bt))];jz(Rt,jt,t,e,n,r)?(L||(p.lineStart(),p.point(Rt[0],Rt[1])),p.point(jt[0],jt[1]),Ht||p.lineEnd(),j=!1):Ht&&(p.lineStart(),p.point(pt,bt),j=!1)}C=pt,M=bt,L=Ht}return z}}function sL(t,e){function n(r,o){return r=t(r,o),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,o){return r=e.invert(r,o),r&&t.invert(r[0],r[1])}),n}function cL(t,e){return Dr(t)>mr&&(t-=Math.round(t/ha)*ha),[t,e]}cL.invert=cL;function ik(t,e,n){return(t%=ha)?e||n?sL(ak(t),sk(e,n)):ak(t):e||n?sk(e,n):cL}function ok(t){return function(e,n){return e+=t,Dr(e)>mr&&(e-=Math.round(e/ha)*ha),[e,n]}}function ak(t){var e=ok(t);return e.invert=ok(-t),e}function sk(t,e){var n=dr(t),r=ir(t),o=dr(e),c=ir(e);function l(u,d){var h=dr(d),p=dr(u)*h,v=ir(u)*h,m=ir(d),b=m*n+p*r;return[jc(v*o-b*c,p*n-m*r),Da(b*o+v*c)]}return l.invert=function(u,d){var h=dr(d),p=dr(u)*h,v=ir(u)*h,m=ir(d),b=m*o-v*c;return[jc(v*o+m*c,p*n+b*r),Da(b*n-p*r)]},l}function zz(t){t=ik(t[0]*gi,t[1]*gi,t.length>2?t[2]*gi:0);function e(n){return n=t(n[0]*gi,n[1]*gi),n[0]*=So,n[1]*=So,n}return e.invert=function(n){return n=t.invert(n[0]*gi,n[1]*gi),n[0]*=So,n[1]*=So,n},e}function d$(t){return{stream:Mm(t)}}function Mm(t){return function(e){var n=new lL;for(var r in t)n[r]=t[r];return n.stream=e,n}}function lL(){}lL.prototype={constructor:lL,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function uL(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),yp(n,t.stream(bS)),e(bS.result()),r!=null&&t.clipExtent(r),t}function LS(t,e,n){return uL(t,function(r){var o=e[1][0]-e[0][0],c=e[1][1]-e[0][1],l=Math.min(o/(r[1][0]-r[0][0]),c/(r[1][1]-r[0][1])),u=+e[0][0]+(o-l*(r[1][0]+r[0][0]))/2,d=+e[0][1]+(c-l*(r[1][1]+r[0][1]))/2;t.scale(150*l).translate([u,d])},n)}function fL(t,e,n){return LS(t,[[0,0],e],n)}function dL(t,e,n){return uL(t,function(r){var o=+e,c=o/(r[1][0]-r[0][0]),l=(o-c*(r[1][0]+r[0][0]))/2,u=-c*r[0][1];t.scale(150*c).translate([l,u])},n)}function hL(t,e,n){return uL(t,function(r){var o=+e,c=o/(r[1][1]-r[0][1]),l=-c*r[0][0],u=(o-c*(r[1][1]+r[0][1]))/2;t.scale(150*c).translate([l,u])},n)}var ck=16,Uz=dr(30*gi);function lk(t,e){return+e?Hz(t,e):Zz(t)}function Zz(t){return Mm({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Hz(t,e){function n(r,o,c,l,u,d,h,p,v,m,b,_,S,E){var w=h-r,C=p-o,M=w*w+C*C;if(M>4*e&&S--){var L=l+m,R=u+b,j=d+_,z=Ko(L*L+R*R+j*j),H=Da(j/=z),$=Dr(Dr(j)-1)<qn||Dr(c-v)<qn?(c+v)/2:jc(R,L),dt=t($,H),gt=dt[0],It=dt[1],rt=gt-r,lt=It-o,pt=C*rt-w*lt;(pt*pt/M>e||Dr((w*rt+C*lt)/M-.5)>.3||l*m+u*b+d*_<Uz)&&(n(r,o,c,l,u,d,gt,It,$,L/=z,R/=z,j,S,E),E.point(gt,It),n(gt,It,$,L,R,j,h,p,v,m,b,_,S,E))}}return function(r){var o,c,l,u,d,h,p,v,m,b,_,S,E={point:w,lineStart:C,lineEnd:L,polygonStart:function(){r.polygonStart(),E.lineStart=R},polygonEnd:function(){r.polygonEnd(),E.lineStart=C}};function w(H,$){H=t(H,$),r.point(H[0],H[1])}function C(){v=NaN,E.point=M,r.lineStart()}function M(H,$){var dt=Op([H,$]),gt=t(H,$);n(v,m,p,b,_,S,v=gt[0],m=gt[1],p=H,b=dt[0],_=dt[1],S=dt[2],ck,r),r.point(v,m)}function L(){E.point=w,r.lineEnd()}function R(){C(),E.point=j,E.lineEnd=z}function j(H,$){M(o=H,$),c=v,l=m,u=b,d=_,h=S,E.point=M}function z(){n(v,m,p,b,_,S,c,l,o,u,d,h,ck,r),E.lineEnd=L,L()}return E}}var Vz=Mm({point:function(t,e){this.stream.point(t*gi,e*gi)}});function Wz(t){return Mm({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Gz(t,e,n,r,o){function c(l,u){return l*=r,u*=o,[e+t*l,n-t*u]}return c.invert=function(l,u){return[(l-e)/t*r,(n-u)/t*o]},c}function uk(t,e,n,r,o,c){if(!c)return Gz(t,e,n,r,o);var l=dr(c),u=ir(c),d=l*t,h=u*t,p=l/t,v=u/t,m=(u*n-l*e)/t,b=(u*e+l*n)/t;function _(S,E){return S*=r,E*=o,[d*S-h*E+e,n-h*S-d*E]}return _.invert=function(S,E){return[r*(p*S-v*E+m),o*(b-v*S-p*E)]},_}function Ws(t){return pL(function(){return t})()}function pL(t){var e,n=150,r=480,o=250,c=0,l=0,u=0,d=0,h=0,p,v=0,m=1,b=1,_=null,S=tk,E=null,w,C,M,L=Sm,R=.5,j,z,H,$,dt;function gt(pt){return H(pt[0]*gi,pt[1]*gi)}function It(pt){return pt=H.invert(pt[0],pt[1]),pt&&[pt[0]*So,pt[1]*So]}gt.stream=function(pt){return $&&dt===pt?$:$=Vz(Wz(p)(S(j(L(dt=pt)))))},gt.preclip=function(pt){return arguments.length?(S=pt,_=void 0,lt()):S},gt.postclip=function(pt){return arguments.length?(L=pt,E=w=C=M=null,lt()):L},gt.clipAngle=function(pt){return arguments.length?(S=+pt?Bz(_=pt*gi):(_=null,tk),lt()):_*So},gt.clipExtent=function(pt){return arguments.length?(L=pt==null?(E=w=C=M=null,Sm):rk(E=+pt[0][0],w=+pt[0][1],C=+pt[1][0],M=+pt[1][1]),lt()):E==null?null:[[E,w],[C,M]]},gt.scale=function(pt){return arguments.length?(n=+pt,rt()):n},gt.translate=function(pt){return arguments.length?(r=+pt[0],o=+pt[1],rt()):[r,o]},gt.center=function(pt){return arguments.length?(c=pt[0]%360*gi,l=pt[1]%360*gi,rt()):[c*So,l*So]},gt.rotate=function(pt){return arguments.length?(u=pt[0]%360*gi,d=pt[1]%360*gi,h=pt.length>2?pt[2]%360*gi:0,rt()):[u*So,d*So,h*So]},gt.angle=function(pt){return arguments.length?(v=pt%360*gi,rt()):v*So},gt.reflectX=function(pt){return arguments.length?(m=pt?-1:1,rt()):m<0},gt.reflectY=function(pt){return arguments.length?(b=pt?-1:1,rt()):b<0},gt.precision=function(pt){return arguments.length?(j=lk(z,R=pt*pt),lt()):Ko(R)},gt.fitExtent=function(pt,bt){return LS(gt,pt,bt)},gt.fitSize=function(pt,bt){return fL(gt,pt,bt)},gt.fitWidth=function(pt,bt){return dL(gt,pt,bt)},gt.fitHeight=function(pt,bt){return hL(gt,pt,bt)};function rt(){var pt=uk(n,0,0,m,b,v).apply(null,e(c,l)),bt=uk(n,r-pt[0],o-pt[1],m,b,v);return p=ik(u,d,h),z=sL(e,bt),H=sL(p,z),j=lk(z,R),lt()}function lt(){return $=dt=null,gt}return function(){return e=t.apply(this,arguments),gt.invert=e.invert&&It,rt()}}function gL(t){var e=0,n=mr/3,r=pL(t),o=r(e,n);return o.parallels=function(c){return arguments.length?r(e=c[0]*gi,n=c[1]*gi):[e*So,n*So]},o}function $z(t){var e=dr(t);function n(r,o){return[r*e,ir(o)/e]}return n.invert=function(r,o){return[r/e,Da(o*e)]},n}function fk(t,e){var n=ir(t),r=(n+ir(e))/2;if(Dr(r)<qn)return $z(t);var o=1+n*(2*r-n),c=Ko(o)/r;function l(u,d){var h=Ko(o-2*r*ir(d))/r;return[h*ir(u*=r),c-h*dr(u)]}return l.invert=function(u,d){var h=c-d,p=jc(u,Dr(h))*ka(h);return h*r<0&&(p-=mr*ka(u)*ka(h)),[p/r,Da((o-(u*u+h*h)*r*r)/(2*r))]},l}function PS(){return gL(fk).scale(155.424).center([0,33.6442])}function dk(){return PS().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Yz(t){var e=t.length;return{point:function(n,r){for(var o=-1;++o<e;)t[o].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Xz(){var t,e,n=dk(),r,o=PS().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c,l=PS().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,d,h={point:function(m,b){d=[m,b]}};function p(m){var b=m[0],_=m[1];return d=null,r.point(b,_),d||(c.point(b,_),d)||(u.point(b,_),d)}p.invert=function(m){var b=n.scale(),_=n.translate(),S=(m[0]-_[0])/b,E=(m[1]-_[1])/b;return(E>=.12&&E<.234&&S>=-.425&&S<-.214?o:E>=.166&&E<.234&&S>=-.214&&S<-.115?l:n).invert(m)},p.stream=function(m){return t&&e===m?t:t=Yz([n.stream(e=m),o.stream(m),l.stream(m)])},p.precision=function(m){return arguments.length?(n.precision(m),o.precision(m),l.precision(m),v()):n.precision()},p.scale=function(m){return arguments.length?(n.scale(m),o.scale(m*.35),l.scale(m),p.translate(n.translate())):n.scale()},p.translate=function(m){if(!arguments.length)return n.translate();var b=n.scale(),_=+m[0],S=+m[1];return r=n.translate(m).clipExtent([[_-.455*b,S-.238*b],[_+.455*b,S+.238*b]]).stream(h),c=o.translate([_-.307*b,S+.201*b]).clipExtent([[_-.425*b+qn,S+.12*b+qn],[_-.214*b-qn,S+.234*b-qn]]).stream(h),u=l.translate([_-.205*b,S+.212*b]).clipExtent([[_-.214*b+qn,S+.166*b+qn],[_-.115*b-qn,S+.234*b-qn]]).stream(h),v()},p.fitExtent=function(m,b){return LS(p,m,b)},p.fitSize=function(m,b){return fL(p,m,b)},p.fitWidth=function(m,b){return dL(p,m,b)},p.fitHeight=function(m,b){return hL(p,m,b)};function v(){return t=e=null,p}return p.scale(1070)}function hk(t){return function(e,n){var r=dr(e),o=dr(n),c=t(r*o);return c===1/0?[2,0]:[c*o*ir(e),c*ir(n)]}}function Lm(t){return function(e,n){var r=Ko(e*e+n*n),o=t(r),c=ir(o),l=dr(o);return[jc(e*c,r*l),Da(r&&n*c/r)]}}var vL=hk(function(t){return Ko(2/(1+t))});vL.invert=Lm(function(t){return 2*Da(t/2)});function qz(){return Ws(vL).scale(124.75).clipAngle(180-.001)}var mL=hk(function(t){return(t=wR(t))&&t/ir(t)});mL.invert=Lm(function(t){return t});function Kz(){return Ws(mL).scale(79.4188).clipAngle(180-.001)}function Pm(t,e){return[t,vS(G4((Ai+e)/2))]}Pm.invert=function(t,e){return[t,2*bp(ER(e))-Ai]};function Qz(){return pk(Pm).scale(961/ha)}function pk(t){var e=Ws(t),n=e.center,r=e.scale,o=e.translate,c=e.clipExtent,l=null,u,d,h;e.scale=function(v){return arguments.length?(r(v),p()):r()},e.translate=function(v){return arguments.length?(o(v),p()):o()},e.center=function(v){return arguments.length?(n(v),p()):n()},e.clipExtent=function(v){return arguments.length?(v==null?l=u=d=h=null:(l=+v[0][0],u=+v[0][1],d=+v[1][0],h=+v[1][1]),p()):l==null?null:[[l,u],[d,h]]};function p(){var v=mr*r(),m=e(zz(e.rotate()).invert([0,0]));return c(l==null?[[m[0]-v,m[1]-v],[m[0]+v,m[1]+v]]:t===Pm?[[Math.max(m[0]-v,l),u],[Math.min(m[0]+v,d),h]]:[[l,Math.max(m[1]-v,u)],[d,Math.min(m[1]+v,h)]])}return p()}function IS(t){return G4((Ai+t)/2)}function gk(t,e){var n=dr(t),r=t===e?ir(t):vS(n/dr(e))/vS(IS(e)/IS(t)),o=n*W4(IS(t),r)/r;if(!r)return Pm;function c(l,u){o>0?u<-Ai+qn&&(u=-Ai+qn):u>Ai-qn&&(u=Ai-qn);var d=o/W4(IS(u),r);return[d*ir(r*l),o-d*dr(r*l)]}return c.invert=function(l,u){var d=o-u,h=ka(r)*Ko(l*l+d*d),p=jc(l,Dr(d))*ka(d);return d*r<0&&(p-=mr*ka(l)*ka(d)),[p/r,2*bp(W4(o/h,1/r))-Ai]},c}function Jz(){return gL(gk).scale(109.5).parallels([30,30])}function Im(t,e){return[t,e]}Im.invert=Im;function tU(){return Ws(Im).scale(152.63)}function vk(t,e){var n=dr(t),r=t===e?ir(t):(n-dr(e))/(e-t),o=n/r+t;if(Dr(r)<qn)return Im;function c(l,u){var d=o-u,h=r*l;return[d*ir(h),o-d*dr(h)]}return c.invert=function(l,u){var d=o-u,h=jc(l,Dr(d))*ka(d);return d*r<0&&(h-=mr*ka(l)*ka(d)),[h/r,o-ka(r)*Ko(l*l+d*d)]},c}function eU(){return gL(vk).scale(131.154).center([0,13.9389])}var Rm=1.340264,km=-.081106,Dm=893e-6,Fm=.003796,RS=Ko(3)/2,nU=12;function yL(t,e){var n=Da(RS*ir(e)),r=n*n,o=r*r*r;return[t*dr(n)/(RS*(Rm+3*km*r+o*(7*Dm+9*Fm*r))),n*(Rm+km*r+o*(Dm+Fm*r))]}yL.invert=function(t,e){for(var n=e,r=n*n,o=r*r*r,c=0,l,u,d;c<nU&&(u=n*(Rm+km*r+o*(Dm+Fm*r))-e,d=Rm+3*km*r+o*(7*Dm+9*Fm*r),n-=l=u/d,r=n*n,o=r*r*r,!(Dr(l)<SR));++c);return[RS*t*(Rm+3*km*r+o*(7*Dm+9*Fm*r))/dr(n),Da(ir(n)/RS)]};function rU(){return Ws(yL).scale(177.158)}function bL(t,e){var n=dr(e),r=dr(t)*n;return[n*ir(t)/r,ir(e)/r]}bL.invert=Lm(bp);function iU(){return Ws(bL).scale(144.049).clipAngle(60)}function oU(){var t=1,e=0,n=0,r=1,o=1,c=0,l,u,d=null,h,p,v,m=1,b=1,_=Mm({point:function(L,R){var j=M([L,R]);this.stream.point(j[0],j[1])}}),S=Sm,E,w;function C(){return m=t*r,b=t*o,E=w=null,M}function M(L){var R=L[0]*m,j=L[1]*b;if(c){var z=j*l-R*u;R=R*l+j*u,j=z}return[R+e,j+n]}return M.invert=function(L){var R=L[0]-e,j=L[1]-n;if(c){var z=j*l+R*u;R=R*l-j*u,j=z}return[R/m,j/b]},M.stream=function(L){return E&&w===L?E:E=_(S(w=L))},M.postclip=function(L){return arguments.length?(S=L,d=h=p=v=null,C()):S},M.clipExtent=function(L){return arguments.length?(S=L==null?(d=h=p=v=null,Sm):rk(d=+L[0][0],h=+L[0][1],p=+L[1][0],v=+L[1][1]),C()):d==null?null:[[d,h],[p,v]]},M.scale=function(L){return arguments.length?(t=+L,C()):t},M.translate=function(L){return arguments.length?(e=+L[0],n=+L[1],C()):[e,n]},M.angle=function(L){return arguments.length?(c=L%360*gi,u=ir(c),l=dr(c),C()):c*So},M.reflectX=function(L){return arguments.length?(r=L?-1:1,C()):r<0},M.reflectY=function(L){return arguments.length?(o=L?-1:1,C()):o<0},M.fitExtent=function(L,R){return LS(M,L,R)},M.fitSize=function(L,R){return fL(M,L,R)},M.fitWidth=function(L,R){return dL(M,L,R)},M.fitHeight=function(L,R){return hL(M,L,R)},M}function _L(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}_L.invert=function(t,e){var n=e,r=25,o;do{var c=n*n,l=c*c;n-=o=(n*(1.007226+c*(.015085+l*(-.044475+.028874*c-.005916*l)))-e)/(1.007226+c*(.015085*3+l*(-.044475*7+.028874*9*c-.005916*11*l)))}while(Dr(o)>qn&&--r>0);return[t/(.8707+(c=n*n)*(-.131979+c*(-.013791+c*c*c*(.003971-.001529*c)))),n]};function aU(){return Ws(_L).scale(175.295)}function xL(t,e){return[dr(e)*ir(t),ir(e)]}xL.invert=Lm(Da);function sU(){return Ws(xL).scale(249.5).clipAngle(90+qn)}function SL(t,e){var n=dr(e),r=1+dr(t)*n;return[n*ir(t)/r,ir(e)/r]}SL.invert=Lm(function(t){return 2*bp(t)});function cU(){return Ws(SL).scale(250).clipAngle(142)}function OL(t,e){return[vS(G4((Ai+e)/2)),-t]}OL.invert=function(t,e){return[-e,2*bp(ER(t))-Ai]};function lU(){var t=pk(OL),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var uU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function fU(t){if(typeof t=="function")return t;const e=`geo${Ua(t)}`,n=St[e];if(!n)throw new Error(`Unknown coordinate: ${t}`);return n}function dU(t){return{type:"FeatureCollection",features:t.flatMap(e=>hU(e).features)}}function hU(t){const e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!t||!t.type)return null;const n=e[t.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if(n==="feature")return{type:"FeatureCollection",features:[t]};if(n==="featureCollection")return t}function pU(t,e){var n;for(const[r,o]of Object.entries(e))(n=t[r])===null||n===void 0||n.call(t,o)}function gU(t,e,n,r){const o=()=>{const u=e.filter(mk);return u.find(h=>h.sphere)?{type:"Sphere"}:dU(u.filter(h=>!h.sphere).flatMap(h=>h.data.value))},{outline:c=o()}=r,{size:l="fitExtent"}=r;if(l==="fitExtent")return vU(t,c,n);if(l==="fitWidth")return mU(t,c,n)}function vU(t,e,n){const{x:r,y:o,width:c,height:l}=n;t.fitExtent([[r,o],[c,l]],e)}function mU(t,e,n){const{width:r,height:o}=n,[[c,l],[u,d]]=GR(t.fitWidth(r,e)).bounds(e),h=Math.ceil(d-l),p=Math.min(Math.ceil(u-c),h),v=t.scale()*(p-1)/p,[m,b]=t.translate(),_=b+(o-h)/2;t.scale(v).translate([m,_]).precision(.2)}function yU(t){const{data:e}=t;if(Array.isArray(e))return Object.assign(Object.assign({},t),{data:{value:e}});const{type:n}=e;return n==="graticule10"?Object.assign(Object.assign({},t),{data:{value:[Lz()]}}):n==="sphere"?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function mk(t){return t.type==="geoPath"}const yk=()=>t=>{const{children:e,coordinate:n={}}=t;if(!Array.isArray(e))return[];const{type:r="equalEarth"}=n,o=uU(n,["type"]),c=fU(r),l=e.map(yU);let u;function d(){return[["custom",(v,m,b,_)=>{const S=c();gU(S,l,{x:v,y:m,width:b,height:_},o),pU(S,o),u=GR(S);const w=new eo({domain:[v,v+b]}),C=new eo({domain:[m,m+_]}),M=R=>{const j=S(R);if(!j)return[null,null];const[z,H]=j;return[w.map(z),C.map(H)]},L=R=>{if(!R)return null;const[j,z]=R,H=[w.invert(j),C.invert(z)];return S.invert(H)};return{transform:R=>M(R),untransform:R=>L(R)}}]]}function h(v){const{style:m,tooltip:b={}}=v;return Object.assign(Object.assign({},v),{type:"path",tooltip:Dh(b,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},m),{d:_=>u(_)||[]})})}const p=v=>mk(v)?h(v):v;return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:d},children:l.flatMap(p)})]};yk.props={};var bU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const bk=()=>t=>{const{type:e,data:n,scale:r,encode:o,style:c,animate:l,key:u,state:d,tooltip:h}=t,p=bU(t,["type","data","scale","encode","style","animate","key","state","tooltip"]);return[Object.assign(Object.assign({type:"geoView"},p),{children:[{type:"geoPath",key:`${u}-0`,data:{value:n},scale:r,encode:o,style:c,animate:l,state:d,tooltip:h}]})]};bk.props={};function _U(){return{"composition.geoView":yk,"composition.geoPath":bk}}function xU(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return _k(this.cover(e,n),e,n,t)}function _k(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,c=t._root,l={data:r},u=t._x0,d=t._y0,h=t._x1,p=t._y1,v,m,b,_,S,E,w,C;if(!c)return t._root=l,t;for(;c.length;)if((S=e>=(v=(u+h)/2))?u=v:h=v,(E=n>=(m=(d+p)/2))?d=m:p=m,o=c,!(c=c[w=E<<1|S]))return o[w]=l,t;if(b=+t._x.call(null,c.data),_=+t._y.call(null,c.data),e===b&&n===_)return l.next=c,o?o[w]=l:t._root=l,t;do o=o?o[w]=new Array(4):t._root=new Array(4),(S=e>=(v=(u+h)/2))?u=v:h=v,(E=n>=(m=(d+p)/2))?d=m:p=m;while((w=E<<1|S)===(C=(_>=m)<<1|b>=v));return o[C]=c,o[w]=l,t}function SU(t){var e,n,r=t.length,o,c,l=new Array(r),u=new Array(r),d=1/0,h=1/0,p=-1/0,v=-1/0;for(n=0;n<r;++n)isNaN(o=+this._x.call(null,e=t[n]))||isNaN(c=+this._y.call(null,e))||(l[n]=o,u[n]=c,o<d&&(d=o),o>p&&(p=o),c<h&&(h=c),c>v&&(v=c));if(d>p||h>v)return this;for(this.cover(d,h).cover(p,v),n=0;n<r;++n)_k(this,l[n],u[n],t[n]);return this}function OU(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,c=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,c=(r=Math.floor(e))+1;else{for(var l=o-n||1,u=this._root,d,h;n>t||t>=o||r>e||e>=c;)switch(h=(e<r)<<1|t<n,d=new Array(4),d[h]=u,u=d,l*=2,h){case 0:o=n+l,c=r+l;break;case 1:n=o-l,c=r+l;break;case 2:o=n+l,r=c-l;break;case 3:n=o-l,r=c-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=o,this._y1=c,this}function EU(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function wU(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Lo(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o}function AU(t,e,n){var r,o=this._x0,c=this._y0,l,u,d,h,p=this._x1,v=this._y1,m=[],b=this._root,_,S;for(b&&m.push(new Lo(b,o,c,p,v)),n==null?n=1/0:(o=t-n,c=e-n,p=t+n,v=e+n,n*=n);_=m.pop();)if(!(!(b=_.node)||(l=_.x0)>p||(u=_.y0)>v||(d=_.x1)<o||(h=_.y1)<c))if(b.length){var E=(l+d)/2,w=(u+h)/2;m.push(new Lo(b[3],E,w,d,h),new Lo(b[2],l,w,E,h),new Lo(b[1],E,u,d,w),new Lo(b[0],l,u,E,w)),(S=(e>=w)<<1|t>=E)&&(_=m[m.length-1],m[m.length-1]=m[m.length-1-S],m[m.length-1-S]=_)}else{var C=t-+this._x.call(null,b.data),M=e-+this._y.call(null,b.data),L=C*C+M*M;if(L<n){var R=Math.sqrt(n=L);o=t-R,c=e-R,p=t+R,v=e+R,r=b.data}}return r}function TU(t){if(isNaN(p=+this._x.call(null,t))||isNaN(v=+this._y.call(null,t)))return this;var e,n=this._root,r,o,c,l=this._x0,u=this._y0,d=this._x1,h=this._y1,p,v,m,b,_,S,E,w;if(!n)return this;if(n.length)for(;;){if((_=p>=(m=(l+d)/2))?l=m:d=m,(S=v>=(b=(u+h)/2))?u=b:h=b,e=n,!(n=n[E=S<<1|_]))return this;if(!n.length)break;(e[E+1&3]||e[E+2&3]||e[E+3&3])&&(r=e,w=E)}for(;n.data!==t;)if(o=n,!(n=n.next))return this;return(c=n.next)&&delete n.next,o?(c?o.next=c:delete o.next,this):e?(c?e[E]=c:delete e[E],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[w]=n:this._root=n),this):(this._root=c,this)}function CU(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function MU(){return this._root}function LU(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function PU(t){var e=[],n,r=this._root,o,c,l,u,d;for(r&&e.push(new Lo(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,c=n.x0,l=n.y0,u=n.x1,d=n.y1)&&r.length){var h=(c+u)/2,p=(l+d)/2;(o=r[3])&&e.push(new Lo(o,h,p,u,d)),(o=r[2])&&e.push(new Lo(o,c,p,h,d)),(o=r[1])&&e.push(new Lo(o,h,l,u,p)),(o=r[0])&&e.push(new Lo(o,c,l,h,p))}return this}function IU(t){var e=[],n=[],r;for(this._root&&e.push(new Lo(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var o=r.node;if(o.length){var c,l=r.x0,u=r.y0,d=r.x1,h=r.y1,p=(l+d)/2,v=(u+h)/2;(c=o[0])&&e.push(new Lo(c,l,u,p,v)),(c=o[1])&&e.push(new Lo(c,p,u,d,v)),(c=o[2])&&e.push(new Lo(c,l,v,p,h)),(c=o[3])&&e.push(new Lo(c,p,v,d,h))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function RU(t){return t[0]}function kU(t){return arguments.length?(this._x=t,this):this._x}function DU(t){return t[1]}function FU(t){return arguments.length?(this._y=t,this):this._y}function xk(t,e,n){var r=new EL(e==null?RU:e,n==null?DU:n,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function EL(t,e,n,r,o,c){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=c,this._root=void 0}function Sk(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Po=xk.prototype=EL.prototype;Po.copy=function(){var t=new EL(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Sk(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var o=0;o<4;++o)(r=e.source[o])&&(r.length?n.push({source:r,target:e.target[o]=new Array(4)}):e.target[o]=Sk(r));return t},Po.add=xU,Po.addAll=SU,Po.cover=OU,Po.data=EU,Po.extent=wU,Po.find=AU,Po.remove=TU,Po.removeAll=CU,Po.root=MU,Po.size=LU,Po.visit=PU,Po.visitAfter=IU,Po.x=kU,Po.y=FU;function pa(t){return function(){return t}}function Ep(t){return(t()-.5)*1e-6}var NU={value:function(){}};function Ok(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new kS(n)}function kS(t){this._=t}function BU(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}kS.prototype=Ok.prototype={constructor:kS,on:function(e,n){var r=this._,o=BU(e+"",r),c,l=-1,u=o.length;if(arguments.length<2){for(;++l<u;)if((c=(e=o[l]).type)&&(c=jU(r[c],e.name)))return c;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++l<u;)if(c=(e=o[l]).type)r[c]=Ek(r[c],e.name,n);else if(n==null)for(c in r)r[c]=Ek(r[c],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new kS(e)},call:function(e,n){if((c=arguments.length-2)>0)for(var r=new Array(c),o=0,c,l;o<c;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,c=l.length;o<c;++o)l[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],c=0,l=o.length;c<l;++c)o[c].value.apply(n,r)}};function jU(t,e){for(var n=0,r=t.length,o;n<r;++n)if((o=t[n]).name===e)return o.value}function Ek(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=NU,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var zU=Ok,wp=0,Nm=0,Bm=0,wk=1e3,DS,jm,FS=0,zf=0,NS=0,zm=typeof performance=="object"&&performance.now?performance:Date,Ak=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Tk(){return zf||(Ak(UU),zf=zm.now()+NS)}function UU(){zf=0}function wL(){this._call=this._time=this._next=null}wL.prototype=Ck.prototype={constructor:wL,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Tk():+n)+(e==null?0:+e),!this._next&&jm!==this&&(jm?jm._next=this:DS=this,jm=this),this._call=t,this._time=n,AL()},stop:function(){this._call&&(this._call=null,this._time=1/0,AL())}};function Ck(t,e,n){var r=new wL;return r.restart(t,e,n),r}function ZU(){Tk(),++wp;for(var t=DS,e;t;)(e=zf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--wp}function Mk(){zf=(FS=zm.now())+NS,wp=Nm=0;try{ZU()}finally{wp=0,VU(),zf=0}}function HU(){var t=zm.now(),e=t-FS;e>wk&&(NS-=e,FS=t)}function VU(){for(var t,e=DS,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:DS=n);jm=t,AL(r)}function AL(t){if(!wp){Nm&&(Nm=clearTimeout(Nm));var e=t-zf;e>24?(t<1/0&&(Nm=setTimeout(Mk,t-zm.now()-NS)),Bm&&(Bm=clearInterval(Bm))):(Bm||(FS=zm.now(),Bm=setInterval(HU,wk)),wp=1,Ak(Mk))}}const WU=1664525,GU=1013904223,Lk=4294967296;function $U(){let t=1;return()=>(t=(WU*t+GU)%Lk)/Lk}function YU(t){return t.x}function XU(t){return t.y}var qU=10,KU=Math.PI*(3-Math.sqrt(5));function QU(t){var e,n=1,r=.001,o=1-Math.pow(r,1/300),c=0,l=.6,u=new Map,d=Ck(v),h=zU("tick","end"),p=$U();t==null&&(t=[]);function v(){m(),h.call("tick",e),n<r&&(d.stop(),h.call("end",e))}function m(S){var E,w=t.length,C;S===void 0&&(S=1);for(var M=0;M<S;++M)for(n+=(c-n)*o,u.forEach(function(L){L(n)}),E=0;E<w;++E)C=t[E],C.fx==null?C.x+=C.vx*=l:(C.x=C.fx,C.vx=0),C.fy==null?C.y+=C.vy*=l:(C.y=C.fy,C.vy=0);return e}function b(){for(var S=0,E=t.length,w;S<E;++S){if(w=t[S],w.index=S,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var C=qU*Math.sqrt(.5+S),M=S*KU;w.x=C*Math.cos(M),w.y=C*Math.sin(M)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function _(S){return S.initialize&&S.initialize(t,p),S}return b(),e={tick:m,restart:function(){return d.restart(v),e},stop:function(){return d.stop(),e},nodes:function(S){return arguments.length?(t=S,b(),u.forEach(_),e):t},alpha:function(S){return arguments.length?(n=+S,e):n},alphaMin:function(S){return arguments.length?(r=+S,e):r},alphaDecay:function(S){return arguments.length?(o=+S,e):+o},alphaTarget:function(S){return arguments.length?(c=+S,e):c},velocityDecay:function(S){return arguments.length?(l=1-S,e):1-l},randomSource:function(S){return arguments.length?(p=S,u.forEach(_),e):p},force:function(S,E){return arguments.length>1?(E==null?u.delete(S):u.set(S,_(E)),e):u.get(S)},find:function(S,E,w){var C=0,M=t.length,L,R,j,z,H;for(w==null?w=1/0:w*=w,C=0;C<M;++C)z=t[C],L=S-z.x,R=E-z.y,j=L*L+R*R,j<w&&(H=z,w=j);return H},on:function(S,E){return arguments.length>1?(h.on(S,E),e):h.on(S)}}}function JU(){var t,e,n,r,o=pa(-30),c,l=1,u=1/0,d=.81;function h(b){var _,S=t.length,E=xk(t,YU,XU).visitAfter(v);for(r=b,_=0;_<S;++_)e=t[_],E.visit(m)}function p(){if(t){var b,_=t.length,S;for(c=new Array(_),b=0;b<_;++b)S=t[b],c[S.index]=+o(S,b,t)}}function v(b){var _=0,S,E,w=0,C,M,L;if(b.length){for(C=M=L=0;L<4;++L)(S=b[L])&&(E=Math.abs(S.value))&&(_+=S.value,w+=E,C+=E*S.x,M+=E*S.y);b.x=C/w,b.y=M/w}else{S=b,S.x=S.data.x,S.y=S.data.y;do _+=c[S.data.index];while(S=S.next)}b.value=_}function m(b,_,S,E){if(!b.value)return!0;var w=b.x-e.x,C=b.y-e.y,M=E-_,L=w*w+C*C;if(M*M/d<L)return L<u&&(w===0&&(w=Ep(n),L+=w*w),C===0&&(C=Ep(n),L+=C*C),L<l&&(L=Math.sqrt(l*L)),e.vx+=w*b.value*r/L,e.vy+=C*b.value*r/L),!0;if(b.length||L>=u)return;(b.data!==e||b.next)&&(w===0&&(w=Ep(n),L+=w*w),C===0&&(C=Ep(n),L+=C*C),L<l&&(L=Math.sqrt(l*L)));do b.data!==e&&(M=c[b.data.index]*r/L,e.vx+=w*M,e.vy+=C*M);while(b=b.next)}return h.initialize=function(b,_){t=b,n=_,p()},h.strength=function(b){return arguments.length?(o=typeof b=="function"?b:pa(+b),p(),h):o},h.distanceMin=function(b){return arguments.length?(l=b*b,h):Math.sqrt(l)},h.distanceMax=function(b){return arguments.length?(u=b*b,h):Math.sqrt(u)},h.theta=function(b){return arguments.length?(d=b*b,h):Math.sqrt(d)},h}function tZ(t){return t.index}function Pk(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function eZ(t){var e=tZ,n=v,r,o=pa(30),c,l,u,d,h,p=1;t==null&&(t=[]);function v(E){return 1/Math.min(u[E.source.index],u[E.target.index])}function m(E){for(var w=0,C=t.length;w<p;++w)for(var M=0,L,R,j,z,H,$,dt;M<C;++M)L=t[M],R=L.source,j=L.target,z=j.x+j.vx-R.x-R.vx||Ep(h),H=j.y+j.vy-R.y-R.vy||Ep(h),$=Math.sqrt(z*z+H*H),$=($-c[M])/$*E*r[M],z*=$,H*=$,j.vx-=z*(dt=d[M]),j.vy-=H*dt,R.vx+=z*(dt=1-dt),R.vy+=H*dt}function b(){if(l){var E,w=l.length,C=t.length,M=new Map(l.map((R,j)=>[e(R,j,l),R])),L;for(E=0,u=new Array(w);E<C;++E)L=t[E],L.index=E,typeof L.source!="object"&&(L.source=Pk(M,L.source)),typeof L.target!="object"&&(L.target=Pk(M,L.target)),u[L.source.index]=(u[L.source.index]||0)+1,u[L.target.index]=(u[L.target.index]||0)+1;for(E=0,d=new Array(C);E<C;++E)L=t[E],d[E]=u[L.source.index]/(u[L.source.index]+u[L.target.index]);r=new Array(C),_(),c=new Array(C),S()}}function _(){if(l)for(var E=0,w=t.length;E<w;++E)r[E]=+n(t[E],E,t)}function S(){if(l)for(var E=0,w=t.length;E<w;++E)c[E]=+o(t[E],E,t)}return m.initialize=function(E,w){l=E,h=w,b()},m.links=function(E){return arguments.length?(t=E,b(),m):t},m.id=function(E){return arguments.length?(e=E,m):e},m.iterations=function(E){return arguments.length?(p=+E,m):p},m.strength=function(E){return arguments.length?(n=typeof E=="function"?E:pa(+E),_(),m):n},m.distance=function(E){return arguments.length?(o=typeof E=="function"?E:pa(+E),S(),m):o},m}function nZ(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function o(){var c,l=n.length,u,d=0,h=0;for(c=0;c<l;++c)u=n[c],d+=u.x,h+=u.y;for(d=(d/l-t)*r,h=(h/l-e)*r,c=0;c<l;++c)u=n[c],u.x-=d,u.y-=h}return o.initialize=function(c){n=c},o.x=function(c){return arguments.length?(t=+c,o):t},o.y=function(c){return arguments.length?(e=+c,o):e},o.strength=function(c){return arguments.length?(r=+c,o):r},o}function rZ(t){var e=pa(.1),n,r,o;typeof t!="function"&&(t=pa(t==null?0:+t));function c(u){for(var d=0,h=n.length,p;d<h;++d)p=n[d],p.vx+=(o[d]-p.x)*r[d]*u}function l(){if(n){var u,d=n.length;for(r=new Array(d),o=new Array(d),u=0;u<d;++u)r[u]=isNaN(o[u]=+t(n[u],u,n))?0:+e(n[u],u,n)}}return c.initialize=function(u){n=u,l()},c.strength=function(u){return arguments.length?(e=typeof u=="function"?u:pa(+u),l(),c):e},c.x=function(u){return arguments.length?(t=typeof u=="function"?u:pa(+u),l(),c):t},c}function iZ(t){var e=pa(.1),n,r,o;typeof t!="function"&&(t=pa(t==null?0:+t));function c(u){for(var d=0,h=n.length,p;d<h;++d)p=n[d],p.vy+=(o[d]-p.y)*r[d]*u}function l(){if(n){var u,d=n.length;for(r=new Array(d),o=new Array(d),u=0;u<d;++u)r[u]=isNaN(o[u]=+t(n[u],u,n))?0:+e(n[u],u,n)}}return c.initialize=function(u){n=u,l()},c.strength=function(u){return arguments.length?(e=typeof u=="function"?u:pa(+u),l(),c):e},c.y=function(u){return arguments.length?(t=typeof u=="function"?u:pa(+u),l(),c):t},c}var oZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const aZ={joint:!0},sZ={type:"link",axis:!1,legend:!1,encode:{x:[t=>t.source.x,t=>t.target.x],y:[t=>t.source.y,t=>t.target.y]},style:{stroke:"#999",strokeOpacity:.6}},cZ={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},lZ={text:""};function uZ(t,e,n){const{nodes:r,links:o}=t,{joint:c,nodeStrength:l,linkStrength:u}=e,{nodeKey:d=_=>_.id,linkKey:h=_=>_.id}=n,p=JU(),v=eZ(o).id(Pa(h));typeof l=="function"&&p.strength(l),typeof u=="function"&&v.strength(u);const m=QU(r).force("link",v).force("charge",p);c?m.force("center",nZ()):m.force("x",rZ()).force("y",iZ()),m.stop();const b=Math.ceil(Math.log(m.alphaMin())/Math.log(1-m.alphaDecay()));for(let _=0;_<b;_++)m.tick();return{nodesData:r,linksData:o}}const Ik=t=>{const{data:e,encode:n={},scale:r,style:o={},layout:c={},nodeLabels:l=[],linkLabels:u=[],animate:d={},tooltip:h={}}=t,{nodeKey:p=j=>j.id,linkKey:v=j=>j.id}=n,m=oZ(n,["nodeKey","linkKey"]),b=Object.assign({nodeKey:p,linkKey:v},m),_=xn(b,"node"),S=xn(b,"link"),{links:E,nodes:w}=Rc(e,b),{nodesData:C,linksData:M}=uZ({links:E,nodes:w},an({},aZ,c),b),L=la(h,"link",{items:[j=>({name:"source",value:Pa(v)(j.source)}),j=>({name:"target",value:Pa(v)(j.target)})]}),R=la(h,"node",{items:[j=>({name:"key",value:Pa(p)(j)})]},!0);return[an({},sZ,{data:M,encode:S,labels:u,style:xn(o,"link"),tooltip:L,animate:Ma(d,"link")}),an({},cZ,{data:C,encode:Object.assign({},_),scale:r,style:xn(o,"node"),tooltip:R,labels:[Object.assign(Object.assign({},lZ),xn(o,"label")),...l],animate:Ma(d,"link")})]};Ik.props={};function fZ(t,e){return t.parent===e.parent?1:2}function TL(t){var e=t.children;return e?e[0]:t.t}function CL(t){var e=t.children;return e?e[e.length-1]:t.t}function dZ(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function hZ(t){for(var e=0,n=0,r=t.children,o=r.length,c;--o>=0;)c=r[o],c.z+=e,c.m+=e,e+=c.s+(n+=c.c)}function pZ(t,e,n){return t.a.parent===e.parent?t.a:n}function BS(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}BS.prototype=Object.create(xf.prototype);function gZ(t){for(var e=new BS(t,0),n,r=[e],o,c,l,u;n=r.pop();)if(c=n._.children)for(n.children=new Array(u=c.length),l=u-1;l>=0;--l)r.push(o=n.children[l]=new BS(c[l],l)),o.parent=n;return(e.parent=new BS(null,0)).children=[e],e}function vZ(){var t=fZ,e=1,n=1,r=null;function o(h){var p=gZ(h);if(p.eachAfter(c),p.parent.m=-p.z,p.eachBefore(l),r)h.eachBefore(d);else{var v=h,m=h,b=h;h.eachBefore(function(C){C.x<v.x&&(v=C),C.x>m.x&&(m=C),C.depth>b.depth&&(b=C)});var _=v===m?1:t(v,m)/2,S=_-v.x,E=e/(m.x+_+S),w=n/(b.depth||1);h.eachBefore(function(C){C.x=(C.x+S)*E,C.y=C.depth*w})}return h}function c(h){var p=h.children,v=h.parent.children,m=h.i?v[h.i-1]:null;if(p){hZ(h);var b=(p[0].z+p[p.length-1].z)/2;m?(h.z=m.z+t(h._,m._),h.m=h.z-b):h.z=b}else m&&(h.z=m.z+t(h._,m._));h.parent.A=u(h,m,h.parent.A||v[0])}function l(h){h._.x=h.z+h.parent.m,h.m+=h.parent.m}function u(h,p,v){if(p){for(var m=h,b=h,_=p,S=m.parent.children[0],E=m.m,w=b.m,C=_.m,M=S.m,L;_=CL(_),m=TL(m),_&&m;)S=TL(S),b=CL(b),b.a=h,L=_.z+C-m.z-E+t(_._,m._),L>0&&(dZ(pZ(_,h,v),h,L),E+=L,w+=L),C+=_.m,E+=m.m,M+=S.m,w+=b.m;_&&!CL(b)&&(b.t=_,b.m+=C-w),m&&!TL(S)&&(S.t=m,S.m+=E-M,v=h)}return v}function d(h){h.x*=e,h.y=h.depth*n}return o.separation=function(h){return arguments.length?(t=h,o):t},o.size=function(h){return arguments.length?(r=!1,e=+h[0],n=+h[1],o):r?null:[e,n]},o.nodeSize=function(h){return arguments.length?(r=!0,e=+h[0],n=+h[1],o):r?[e,n]:null},o}function mZ(t,e){return t.parent===e.parent?1:2}function yZ(t){return t.reduce(bZ,0)/t.length}function bZ(t,e){return t+e.x}function _Z(t){return 1+t.reduce(xZ,0)}function xZ(t,e){return Math.max(t,e.y)}function SZ(t){for(var e;e=t.children;)t=e[0];return t}function OZ(t){for(var e;e=t.children;)t=e[e.length-1];return t}function EZ(){var t=mZ,e=1,n=1,r=!1;function o(c){var l,u=0;c.eachAfter(function(m){var b=m.children;b?(m.x=yZ(b),m.y=_Z(b)):(m.x=l?u+=t(m,l):0,m.y=0,l=m)});var d=SZ(c),h=OZ(c),p=d.x-t(d,h)/2,v=h.x+t(h,d)/2;return c.eachAfter(r?function(m){m.x=(m.x-c.x)*e,m.y=(c.y-m.y)*n}:function(m){m.x=(m.x-p)/(v-p)*e,m.y=(1-(c.y?m.y/c.y:1))*n})}return o.separation=function(c){return arguments.length?(t=c,o):t},o.size=function(c){return arguments.length?(r=!1,e=+c[0],n=+c[1],o):r?null:[e,n]},o.nodeSize=function(c){return arguments.length?(r=!0,e=+c[0],n=+c[1],o):r?[e,n]:null},o}const Rk=t=>e=>n=>{const{field:r="value",nodeSize:o,separation:c,sortBy:l,as:u=["x","y"]}=e,[d,h]=u,p=Tl(n,_=>_.children).sum(_=>_[r]).sort(l),v=t();v.size([1,1]),o&&v.nodeSize(o),c&&v.separation(c),v(p);const m=[];p.each(_=>{_[d]=_.x,_[h]=_.y,_.name=_.data.name,m.push(_)});const b=p.links();return b.forEach(_=>{_[d]=[_.source[d],_.target[d]],_[h]=[_.source[h],_.target[h]]}),{nodes:m,edges:b}},kk=t=>Rk(EZ)(t);kk.props={};const Dk=t=>Rk(vZ)(t);Dk.props={};const wZ={sortBy:(t,e)=>e.value-t.value},AZ={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},TZ={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},CZ={text:"",fontSize:10},Fk=t=>{const{data:e,encode:n={},scale:r={},style:o={},layout:c={},nodeLabels:l=[],linkLabels:u=[],animate:d={},tooltip:h={}}=t,p=n==null?void 0:n.value,{nodes:v,edges:m}=Dk(Object.assign(Object.assign(Object.assign({},wZ),c),{field:p}))(e),b=la(h,"node",{title:"name",items:["value"]},!0),_=la(h,"link",{title:"",items:[S=>({name:"source",value:S.source.name}),S=>({name:"target",value:S.target.name})]});return[an({},TZ,{data:m,encode:xn(n,"link"),scale:xn(r,"link"),labels:u,style:Object.assign({stroke:"#999"},xn(o,"link")),tooltip:_,animate:Ma(d,"link")}),an({},AZ,{data:v,scale:xn(r,"node"),encode:xn(n,"node"),labels:[Object.assign(Object.assign({},CZ),xn(o,"label")),...l],style:Object.assign({},xn(o,"node")),tooltip:b,animate:Ma(d,"node")})]};Fk.props={};var MZ=1664525,LZ=1013904223,Nk=4294967296;function PZ(){var t=1;return function(){return(t=(MZ*t+LZ)%Nk)/Nk}}var IZ=k(52677);function RZ(t){return IZ(t)==="object"&&"length"in t?t:Array.from(t)}function kZ(t,e){for(var n=t.length,r,o;n;)o=e()*n--|0,r=t[n],t[n]=t[o],t[o]=r;return t}function h$(t){return Bk(t,lcg())}function Bk(t,e){for(var n=0,r=(t=kZ(Array.from(t),e)).length,o=[],c,l;n<r;)c=t[n],l&&jk(l,c)?++n:(l=FZ(o=DZ(o,c)),n=0);return l}function DZ(t,e){var n,r;if(ML(e,t))return[e];for(n=0;n<t.length;++n)if(jS(e,t[n])&&ML(Um(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(jS(Um(t[n],t[r]),e)&&jS(Um(t[n],e),t[r])&&jS(Um(t[r],e),t[n])&&ML(zk(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function jS(t,e){var n=t.r-e.r,r=e.x-t.x,o=e.y-t.y;return n<0||n*n<r*r+o*o}function jk(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,o=e.y-t.y;return n>0&&n*n>r*r+o*o}function ML(t,e){for(var n=0;n<e.length;++n)if(!jk(t,e[n]))return!1;return!0}function FZ(t){switch(t.length){case 1:return NZ(t[0]);case 2:return Um(t[0],t[1]);case 3:return zk(t[0],t[1],t[2])}}function NZ(t){return{x:t.x,y:t.y,r:t.r}}function Um(t,e){var n=t.x,r=t.y,o=t.r,c=e.x,l=e.y,u=e.r,d=c-n,h=l-r,p=u-o,v=Math.sqrt(d*d+h*h);return{x:(n+c+d/v*p)/2,y:(r+l+h/v*p)/2,r:(v+o+u)/2}}function zk(t,e,n){var r=t.x,o=t.y,c=t.r,l=e.x,u=e.y,d=e.r,h=n.x,p=n.y,v=n.r,m=r-l,b=r-h,_=o-u,S=o-p,E=d-c,w=v-c,C=r*r+o*o-c*c,M=C-l*l-u*u+d*d,L=C-h*h-p*p+v*v,R=b*_-m*S,j=(_*L-S*M)/(R*2)-r,z=(S*E-_*w)/R,H=(b*M-m*L)/(R*2)-o,$=(m*w-b*E)/R,dt=z*z+$*$-1,gt=2*(c+j*z+H*$),It=j*j+H*H-c*c,rt=-(Math.abs(dt)>1e-6?(gt+Math.sqrt(gt*gt-4*dt*It))/(2*dt):It/gt);return{x:r+j+z*rt,y:o+H+$*rt,r:rt}}function Uk(t,e,n){var r=t.x-e.x,o,c,l=t.y-e.y,u,d,h=r*r+l*l;h?(c=e.r+n.r,c*=c,d=t.r+n.r,d*=d,c>d?(o=(h+d-c)/(2*h),u=Math.sqrt(Math.max(0,d/h-o*o)),n.x=t.x-o*r-u*l,n.y=t.y-o*l+u*r):(o=(h+c-d)/(2*h),u=Math.sqrt(Math.max(0,c/h-o*o)),n.x=e.x+o*r-u*l,n.y=e.y+o*l+u*r)):(n.x=e.x+n.r,n.y=e.y)}function Zk(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,o=e.y-t.y;return n>0&&n*n>r*r+o*o}function Hk(t){var e=t._,n=t.next._,r=e.r+n.r,o=(e.x*n.r+n.x*e.r)/r,c=(e.y*n.r+n.y*e.r)/r;return o*o+c*c}function zS(t){this._=t,this.next=null,this.previous=null}function Vk(t,e){if(!(c=(t=RZ(t)).length))return 0;var n,r,o,c,l,u,d,h,p,v,m;if(n=t[0],n.x=0,n.y=0,!(c>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(c>2))return n.r+r.r;Uk(r,n,o=t[2]),n=new zS(n),r=new zS(r),o=new zS(o),n.next=o.previous=r,r.next=n.previous=o,o.next=r.previous=n;t:for(d=3;d<c;++d){Uk(n._,r._,o=t[d]),o=new zS(o),h=r.next,p=n.previous,v=r._.r,m=n._.r;do if(v<=m){if(Zk(h._,o._)){r=h,n.next=r,r.previous=n,--d;continue t}v+=h._.r,h=h.next}else{if(Zk(p._,o._)){n=p,n.next=r,r.previous=n,--d;continue t}m+=p._.r,p=p.previous}while(h!==p.next);for(o.previous=n,o.next=r,n.next=r.previous=r=o,l=Hk(n);(o=o.next)!==r;)(u=Hk(o))<l&&(n=o,l=u);r=n.next}for(n=[r._],o=r;(o=o.next)!==r;)n.push(o._);for(o=Bk(n,e),d=0;d<c;++d)n=t[d],n.x-=o.x,n.y-=o.y;return o.r}function p$(t){return Vk(t,lcg()),t}function BZ(t){return Math.sqrt(t.value)}function jZ(){var t=null,e=1,n=1,r=Bf;function o(c){var l=PZ();return c.x=e/2,c.y=n/2,t?c.eachBefore(Wk(t)).eachAfter(LL(r,.5,l)).eachBefore(Gk(1)):c.eachBefore(Wk(BZ)).eachAfter(LL(Bf,1,l)).eachAfter(LL(r,c.r/Math.min(e,n),l)).eachBefore(Gk(Math.min(e,n)/(2*c.r))),c}return o.radius=function(c){return arguments.length?(t=rS(c),o):t},o.size=function(c){return arguments.length?(e=+c[0],n=+c[1],o):[e,n]},o.padding=function(c){return arguments.length?(r=typeof c=="function"?c:mp(+c),o):r},o}function Wk(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function LL(t,e,n){return function(r){if(o=r.children){var o,c,l=o.length,u=t(r)*e||0,d;if(u)for(c=0;c<l;++c)o[c].r+=u;if(d=Vk(o,n),u)for(c=0;c<l;++c)o[c].r-=u;r.r=d+u}}}function Gk(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var zZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const UZ=(t,e)=>({size:[t,e],padding:0,sort:(n,r)=>r.value-n.value}),ZZ=(t,e,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,e]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),HZ={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.r*2},VZ={title:t=>t.data.name,items:[{field:"value"}]},WZ=(t,e,n)=>{const{value:r}=n,o=(0,Wi.Z)(t)?E4().path(e.path)(t):Tl(t);return r?o.sum(c=>Pa(r)(c)).sort(e.sort):o.count(),jZ().size(e.size).padding(e.padding)(o),o.descendants()},$k=(t,e)=>{const{width:n,height:r}=e,{data:o,encode:c={},scale:l={},style:u={},layout:d={},labels:h=[],tooltip:p={}}=t,v=zZ(t,["data","encode","scale","style","layout","labels","tooltip"]),m=ZZ(n,r,c),b=WZ(o,an({},UZ(n,r),d),an({},m.encode,c)),_=xn(u,"label");return an({},m,Object.assign(Object.assign({data:b,encode:c,scale:l,style:u,labels:[Object.assign(Object.assign({},HZ),_),...h]},v),{tooltip:Dh(p,VZ),axis:!1}))};$k.props={};function GZ(t){return t.target.depth}function $Z(t){return t.depth}function YZ(t,e){return e-1-t.height}function US(t,e){return t.sourceLinks.length?t.depth:e-1}function XZ(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?To(t.sourceLinks,GZ)-1:0}function ZS(t){return function(){return t}}function Yk(t,e){return HS(t.source,e.source)||t.index-e.index}function Xk(t,e){return HS(t.target,e.target)||t.index-e.index}function HS(t,e){return t.y0-e.y0}function PL(t){return t.value}function qZ(t){return t.index}function KZ(t){return t.nodes}function QZ(t){return t.links}function qk(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function Kk({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const o of e.sourceLinks)o.y0=n+o.width/2,n+=o.width;for(const o of e.targetLinks)o.y1=r+o.width/2,r+=o.width}}function JZ(){let t=0,e=0,n=1,r=1,o=24,c=8,l,u=qZ,d=US,h,p,v,m=KZ,b=QZ,_=6;function S(bt){const Ht={nodes:m(bt),links:b(bt)};return E(Ht),w(Ht),C(Ht),M(Ht),j(Ht),Kk(Ht),Ht}S.update=function(bt){return Kk(bt),bt},S.nodeId=function(bt){return arguments.length?(u=typeof bt=="function"?bt:ZS(bt),S):u},S.nodeAlign=function(bt){return arguments.length?(d=typeof bt=="function"?bt:ZS(bt),S):d},S.nodeDepth=function(bt){return arguments.length?(h=bt,S):h},S.nodeSort=function(bt){return arguments.length?(p=bt,S):p},S.nodeWidth=function(bt){return arguments.length?(o=+bt,S):o},S.nodePadding=function(bt){return arguments.length?(c=l=+bt,S):c},S.nodes=function(bt){return arguments.length?(m=typeof bt=="function"?bt:ZS(bt),S):m},S.links=function(bt){return arguments.length?(b=typeof bt=="function"?bt:ZS(bt),S):b},S.linkSort=function(bt){return arguments.length?(v=bt,S):v},S.size=function(bt){return arguments.length?(t=e=0,n=+bt[0],r=+bt[1],S):[n-t,r-e]},S.extent=function(bt){return arguments.length?(t=+bt[0][0],n=+bt[1][0],e=+bt[0][1],r=+bt[1][1],S):[[t,e],[n,r]]},S.iterations=function(bt){return arguments.length?(_=+bt,S):_};function E({nodes:bt,links:Ht}){bt.forEach((jt,oe)=>{jt.index=oe,jt.sourceLinks=[],jt.targetLinks=[]});const Rt=new Map(bt.map(jt=>[u(jt),jt]));if(Ht.forEach((jt,oe)=>{jt.index=oe;let{source:Se,target:xe}=jt;typeof Se!="object"&&(Se=jt.source=qk(Rt,Se)),typeof xe!="object"&&(xe=jt.target=qk(Rt,xe)),Se.sourceLinks.push(jt),xe.targetLinks.push(jt)}),v!=null)for(const{sourceLinks:jt,targetLinks:oe}of bt)jt.sort(v),oe.sort(v)}function w({nodes:bt}){for(const Ht of bt)Ht.value=Ht.fixedValue===void 0?Math.max(Fo(Ht.sourceLinks,PL),Fo(Ht.targetLinks,PL)):Ht.fixedValue}function C({nodes:bt}){const Ht=bt.length;let Rt=new Set(bt),jt=new Set,oe=0;for(;Rt.size;){if(Rt.forEach(Se=>{Se.depth=oe;for(const{target:xe}of Se.sourceLinks)jt.add(xe)}),++oe>Ht)throw new Error("circular link");Rt=jt,jt=new Set}if(h){const Se=Math.max(wr(bt,Pe=>Pe.depth)+1,0);let xe;for(let Pe=0;Pe<bt.length;Pe++)xe=bt[Pe],xe.depth=h.call(null,xe,Se)}}function M({nodes:bt}){const Ht=bt.length;let Rt=new Set(bt),jt=new Set,oe=0;for(;Rt.size;){if(Rt.forEach(Se=>{Se.height=oe;for(const{source:xe}of Se.targetLinks)jt.add(xe)}),++oe>Ht)throw new Error("circular link");Rt=jt,jt=new Set}}function L({nodes:bt}){const Ht=Math.max(wr(bt,oe=>oe.depth)+1,0),Rt=(n-t-o)/(Ht-1),jt=new Array(Ht).fill(0).map(()=>[]);for(const oe of bt){const Se=Math.max(0,Math.min(Ht-1,Math.floor(d.call(null,oe,Ht))));oe.layer=Se,oe.x0=t+Se*Rt,oe.x1=oe.x0+o,jt[Se]?jt[Se].push(oe):jt[Se]=[oe]}if(p)for(const oe of jt)oe.sort(p);return jt}function R(bt){const Ht=To(bt,Rt=>(r-e-(Rt.length-1)*l)/Fo(Rt,PL));for(const Rt of bt){let jt=e;for(const oe of Rt){oe.y0=jt,oe.y1=jt+oe.value*Ht,jt=oe.y1+l;for(const Se of oe.sourceLinks)Se.width=Se.value*Ht}jt=(r-jt+l)/(Rt.length+1);for(let oe=0;oe<Rt.length;++oe){const Se=Rt[oe];Se.y0+=jt*(oe+1),Se.y1+=jt*(oe+1)}rt(Rt)}}function j(bt){const Ht=L(bt);l=Math.min(c,(r-e)/(wr(Ht,Rt=>Rt.length)-1)),R(Ht);for(let Rt=0;Rt<_;++Rt){const jt=Math.pow(.99,Rt),oe=Math.max(1-jt,(Rt+1)/_);H(Ht,jt,oe),z(Ht,jt,oe)}}function z(bt,Ht,Rt){for(let jt=1,oe=bt.length;jt<oe;++jt){const Se=bt[jt];for(const xe of Se){let Pe=0,Ke=0;for(const{source:en,value:rn}of xe.targetLinks){const We=rn*(xe.layer-en.layer);Pe+=lt(en,xe)*We,Ke+=We}if(!(Ke>0))continue;const Ze=(Pe/Ke-xe.y0)*Ht;xe.y0+=Ze,xe.y1+=Ze,It(xe)}p===void 0&&Se.sort(HS),Se.length&&$(Se,Rt)}}function H(bt,Ht,Rt){for(let jt=bt.length,oe=jt-2;oe>=0;--oe){const Se=bt[oe];for(const xe of Se){let Pe=0,Ke=0;for(const{target:en,value:rn}of xe.sourceLinks){const We=rn*(en.layer-xe.layer);Pe+=pt(xe,en)*We,Ke+=We}if(!(Ke>0))continue;const Ze=(Pe/Ke-xe.y0)*Ht;xe.y0+=Ze,xe.y1+=Ze,It(xe)}p===void 0&&Se.sort(HS),Se.length&&$(Se,Rt)}}function $(bt,Ht){const Rt=bt.length>>1,jt=bt[Rt];gt(bt,jt.y0-l,Rt-1,Ht),dt(bt,jt.y1+l,Rt+1,Ht),gt(bt,r,bt.length-1,Ht),dt(bt,e,0,Ht)}function dt(bt,Ht,Rt,jt){for(;Rt<bt.length;++Rt){const oe=bt[Rt],Se=(Ht-oe.y0)*jt;Se>1e-6&&(oe.y0+=Se,oe.y1+=Se),Ht=oe.y1+l}}function gt(bt,Ht,Rt,jt){for(;Rt>=0;--Rt){const oe=bt[Rt],Se=(oe.y1-Ht)*jt;Se>1e-6&&(oe.y0-=Se,oe.y1-=Se),Ht=oe.y0-l}}function It({sourceLinks:bt,targetLinks:Ht}){if(v===void 0){for(const{source:{sourceLinks:Rt}}of Ht)Rt.sort(Xk);for(const{target:{targetLinks:Rt}}of bt)Rt.sort(Yk)}}function rt(bt){if(v===void 0)for(const{sourceLinks:Ht,targetLinks:Rt}of bt)Ht.sort(Xk),Rt.sort(Yk)}function lt(bt,Ht){let Rt=bt.y0-(bt.sourceLinks.length-1)*l/2;for(const{target:jt,width:oe}of bt.sourceLinks){if(jt===Ht)break;Rt+=oe+l}for(const{source:jt,width:oe}of Ht.targetLinks){if(jt===bt)break;Rt-=oe}return Rt}function pt(bt,Ht){let Rt=Ht.y0-(Ht.targetLinks.length-1)*l/2;for(const{source:jt,width:oe}of Ht.targetLinks){if(jt===bt)break;Rt+=oe+l}for(const{target:jt,width:oe}of bt.sourceLinks){if(jt===Ht)break;Rt-=oe}return Rt}return S}const tH={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},eH={left:$Z,right:YZ,center:XZ,justify:US};function nH(t){const e=typeof t;return e==="string"?eH[t]||US:e==="function"?t:US}const Qk=t=>e=>{const{nodeId:n,nodeSort:r,nodeAlign:o,nodeWidth:c,nodePadding:l,nodeDepth:u,nodes:d,links:h,linkSort:p,iterations:v}=Object.assign({},tH,t),m=JZ().nodeSort(r).linkSort(p).links(h).nodes(d).nodeWidth(c).nodePadding(l).nodeDepth(u).nodeAlign(nH(o)).iterations(v).extent([[0,0],[1,1]]);typeof n=="function"&&m.nodeId(n);const b=m(e),{nodes:_,links:S}=b,E=_.map(C=>{const{x0:M,x1:L,y0:R,y1:j}=C;return Object.assign(Object.assign({},C),{x:[M,L,L,M],y:[R,R,j,j]})}),w=S.map(C=>{const{source:M,target:L}=C,R=M.x1,j=L.x0,z=C.width/2;return Object.assign(Object.assign({},C),{x:[R,R,j,j],y:[C.y0+z,C.y0-z,C.y1+z,C.y1-z]})});return{nodes:E,links:w}};Qk.props={};var rH=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const iH={nodeId:t=>t.key,nodeWidth:.02,nodePadding:.02},oH={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},aH={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},sH={textAlign:t=>t.x[0]<.5?"start":"end",position:t=>t.x[0]<.5?"right":"left",fontSize:10},Jk=t=>{const{data:e,encode:n={},scale:r,style:o={},layout:c={},nodeLabels:l=[],linkLabels:u=[],animate:d={},tooltip:h={},interaction:p,state:v={}}=t,{links:m,nodes:b}=Rc(e,n),_=xn(n,"node"),S=xn(n,"link"),{key:E=rt=>rt.key,color:w=E}=_,{links:C,nodes:M}=Qk(Object.assign(Object.assign(Object.assign({},iH),{nodeId:Pa(E)}),c))({links:m,nodes:b}),L=xn(o,"label"),{text:R=E,spacing:j=5}=L,z=rH(L,["text","spacing"]),H=Pa(E),$=la(h,"node",{title:H,items:[{field:"value"}]},!0),dt=la(h,"link",{title:"",items:[rt=>({name:"source",value:H(rt.source)}),rt=>({name:"target",value:H(rt.target)})]}),[gt,It]=Object.entries(v).reduce((rt,[lt,pt])=>{const bt=iu(pt,"node","link"),Ht=xn(pt,"node");rt[0][lt]=Object.assign(Object.assign({},bt),Ht);const Rt=xn(pt,"link");return rt[1][lt]=Object.assign(Object.assign({},bt),Rt),rt},[{},{}]);return[an({},oH,{data:M,encode:Object.assign(Object.assign({},_),{color:w}),scale:r,style:xn(o,"node"),labels:[Object.assign(Object.assign(Object.assign({},sH),{text:R,dx:rt=>rt.x[0]<.5?j:-j}),z),...l],tooltip:$,animate:Ma(d,"node"),axis:!1,interaction:p,state:gt}),an({},aH,{data:C,encode:S,labels:u,style:Object.assign({fill:S.color?void 0:"#aaa",lineWidth:0},xn(o,"link")),tooltip:dt,animate:Ma(d,"link"),interaction:p,state:It})]};Jk.props={};function cH(t,e){return e.value-t.value}function lH(t,e){return e.frequency-t.frequency}function uH(t,e){return`${t.id}`.localeCompare(`${e.id}`)}function fH(t,e){return`${t.name}`.localeCompare(`${e.name}`)}const dH={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function hH(t){const{y:e,thickness:n,weight:r,marginRatio:o,id:c,source:l,target:u,sourceWeight:d,targetWeight:h,sortBy:p}=Object.assign(Object.assign({},dH),t);function v(E){const w=E.nodes.map(M=>Object.assign({},M)),C=E.edges.map(M=>Object.assign({},M));return m(w,C),b(w,C),_(w,C),S(w,C),{nodes:w,edges:C}}function m(E,w){w.forEach(L=>{L.source=l(L),L.target=u(L),L.sourceWeight=d(L),L.targetWeight=h(L)});const C=Nr(w,L=>L.source),M=Nr(w,L=>L.target);return E.forEach(L=>{L.id=c(L);const R=C.has(L.id)?C.get(L.id):[],j=M.has(L.id)?M.get(L.id):[];L.frequency=R.length+j.length,L.value=Fo(R,z=>z.sourceWeight)+Fo(j,z=>z.targetWeight)}),{nodes:E,edges:w}}function b(E,w){const C=typeof p=="function"?p:Kt[p];C&&E.sort(C)}function _(E,w){const C=E.length;if(!C)throw Gc("Invalid nodes: it's empty!");if(!r){const R=1/C;return E.forEach((j,z)=>{j.x=(z+.5)*R,j.y=e}),{nodes:E,edges:w}}const M=o/(2*C),L=E.reduce((R,j)=>R+=j.value,0);return E.reduce((R,j)=>{j.weight=j.value/L,j.width=j.weight*(1-o),j.height=n;const z=M+R,H=z+j.width,$=e-n/2,dt=$+n;return j.x=[z,H,H,z],j.y=[$,$,dt,dt],R+j.width+2*M},0),{nodes:E,edges:w}}function S(E,w){const C=new Map(E.map(R=>[R.id,R]));if(!r)return w.forEach(R=>{const j=l(R),z=u(R),H=C.get(j),$=C.get(z);H&&$&&(R.x=[H.x,$.x],R.y=[H.y,$.y])}),{nodes:E,edges:w};w.forEach(R=>{R.x=[0,0,0,0],R.y=[e,e,e,e]});const M=Nr(w,R=>R.source),L=Nr(w,R=>R.target);E.forEach(R=>{const{edges:j,width:z,x:H,y:$,value:dt,id:gt}=R,It=M.get(gt)||[],rt=L.get(gt)||[];let lt=0;It.map(pt=>{const bt=pt.sourceWeight/dt*z;pt.x[0]=H[0]+lt,pt.x[1]=H[0]+lt+bt,lt+=bt}),rt.forEach(pt=>{const bt=pt.targetWeight/dt*z;pt.x[3]=H[0]+lt,pt.x[2]=H[0]+lt+bt,lt+=bt})})}return v}const IL=t=>e=>hH(t)(e);IL.props={};var tD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const RL={y:0,thickness:.05,marginRatio:.1,id:t=>t.key,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null},pH={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},gH={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},vH={position:"outside",fontSize:10},eD=(t,e)=>{const{data:n,encode:r={},scale:o,style:c={},layout:l={},nodeLabels:u=[],linkLabels:d=[],animate:h={},tooltip:p={}}=t,{nodes:v,links:m}=Rc(n,r),b=xn(r,"node"),_=xn(r,"link"),{key:S=pt=>pt.key,color:E=S}=b,{linkEncodeColor:w=pt=>pt.source}=_,{nodeWidthRatio:C=RL.thickness,nodePaddingRatio:M=RL.marginRatio}=l,L=tD(l,["nodeWidthRatio","nodePaddingRatio"]),{nodes:R,edges:j}=IL(Object.assign(Object.assign(Object.assign(Object.assign({},RL),{id:Pa(S),thickness:C,marginRatio:M}),L),{weight:!0}))({nodes:v,edges:m}),z=xn(c,"label"),{text:H=S}=z,$=tD(z,["text"]),dt=la(p,"node",{title:"",items:[pt=>({name:pt.key,value:pt.value})]},!0),gt=la(p,"link",{title:"",items:[pt=>({name:`${pt.source} -> ${pt.target}`,value:pt.value})]}),{height:It,width:rt}=e,lt=Math.min(It,rt);return[an({},gH,{data:j,encode:Object.assign(Object.assign({},_),{color:w}),labels:d,style:Object.assign({fill:w?void 0:"#aaa"},xn(c,"link")),tooltip:gt,animate:Ma(h,"link")}),an({},pH,{data:R,encode:Object.assign(Object.assign({},b),{color:E}),scale:o,style:xn(c,"node"),coordinate:{type:"polar",outerRadius:(lt-20)/lt,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},vH),{text:H}),$),...u],tooltip:dt,animate:Ma(h,"node"),axis:!1})]};eD.props={};var mH=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const yH=(t,e)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,e],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),bH=(t,e)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,e],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),_H={fontSize:10,text:t=>lm(t.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.x1-t.x0,isTreemapLabel:!0},xH={title:t=>{var e,n;return(n=(e=t.path)===null||e===void 0?void 0:e.join)===null||n===void 0?void 0:n.call(e,".")},items:[{field:"value"}]},SH={title:t=>lm(t.path),items:[{field:"value"}]},nD=(t,e)=>{const{width:n,height:r,options:o}=e,{data:c,encode:l={},scale:u,style:d={},layout:h={},labels:p=[],tooltip:v={}}=t,m=mH(t,["data","encode","scale","style","layout","labels","tooltip"]),b=pr(o,["interaction","treemapDrillDown"])||pr(o,["marks",0,"interaction","treemapDrillDown"]),_=an({},yH(n,r),h,{layer:b?C=>C.depth===1:h.layer}),[S,E]=Q8(c,_,l),w=xn(d,"label");return an({},bH(n,r),Object.assign(Object.assign({data:S,scale:u,style:d,labels:[Object.assign(Object.assign(Object.assign({},_H),w),b&&{cursor:"pointer"}),...p]},m),{encode:l,tooltip:Dh(v,xH),axis:!1}),b?{interaction:Object.assign(Object.assign({},m.interaction),{treemapDrillDown:b?Object.assign(Object.assign({},b),{originData:E,layout:_}):void 0}),encode:Object.assign({color:C=>lm(C.path)},l),tooltip:Dh(v,SH)}:{})};nD.props={};function OH(){return{"data.arc":IL,"data.cluster":kk,"mark.forceGraph":Ik,"mark.tree":Fk,"mark.pack":$k,"mark.sankey":Jk,"mark.chord":eD,"mark.treemap":nD}}var rD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function EH(t,e){return To(t,n=>e[n])}function wH(t,e){return wr(t,n=>e[n])}function iD(t,e){const n=kL(t,e)*2.5-DL(t,e)*1.5;return To(t,r=>e[r]>=n?e[r]:NaN)}function kL(t,e){return sS(t,.25,n=>e[n])}function AH(t,e){return sS(t,.5,n=>e[n])}function DL(t,e){return sS(t,.75,n=>e[n])}function oD(t,e){const n=DL(t,e)*2.5-kL(t,e)*1.5;return wr(t,r=>e[r]<=n?e[r]:NaN)}function TH(){return(t,e)=>{const{encode:n}=e,{y:r,x:o}=n,{value:c}=r,{value:l}=o;return[Array.from(Nr(t,h=>l[+h]).values()).flatMap(h=>{const p=iD(h,c),v=oD(h,c);return h.filter(m=>c[m]<p||c[m]>v)}),e]}}const aD=t=>{const{data:e,encode:n,style:r={},tooltip:o={},transform:c,animate:l}=t,u=rD(t,["data","encode","style","tooltip","transform","animate"]),{point:d=!0}=r,h=rD(r,["point"]),{y:p}=n,v={y:p,y1:p,y2:p,y3:p,y4:p},m={y1:kL,y2:AH,y3:DL},b=la(o,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),_=la(o,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!d)return Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:EH},m),{y4:wH})],encode:Object.assign(Object.assign({},n),v),style:h,tooltip:b},u);const S=xn(h,"box"),E=xn(h,"point");return[Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:iD},m),{y4:oD})],encode:Object.assign(Object.assign({},n),v),style:S,tooltip:b,animate:Ma(l,"box")},u),{type:"point",data:e,transform:[{type:TH}],encode:n,style:Object.assign({},E),tooltip:_,animate:Ma(l,"point")}]};aD.props={};const sD=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))/2,CH=(t,e,n)=>{const r=Math.atan2(t[1]-n[1],t[0]-n[0]);let c=Math.atan2(e[1]-n[1],e[0]-n[0])-r;return c<0&&(c+=Math.PI*2),c},MH=(t,e)=>{if(!e)return;const{coordinate:n}=e;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(o,c,l)=>{const{document:u}=e.canvas,{color:d,index:h}=c,p=u.createElement("g",{}),v=sD(o[0],o[1]),m=sD(o[0],r)*2,b=CH(o[3],o[0],r)>Math.PI,_=u.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...o[0]],["A",v,v,0,1,0,...o[1]],["A",m+v*2,m+v*2,0,b?1:0,0,...o[2]],["A",v,v,0,1,h===0?0:1,...o[3]],["A",m,m,0,b?1:0,1,...o[0]],["Z"]]},l),$0(t,["shape","last","first"])),{fill:d||l.color})});return p.appendChild(_),p}};var Zm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const LH=(t,e)=>{const{shape:n,radius:r}=t,o=Zm(t,["shape","radius"]),c=xn(o,"pointer"),l=xn(o,"pin"),{shape:u}=c,d=Zm(c,["shape"]),{shape:h}=l,p=Zm(l,["shape"]),{coordinate:v,theme:m}=e;return(b,_)=>{const S=b.map(lt=>v.invert(lt)),[E,w,C]=yE(v,"polar"),M=v.clone(),{color:L}=_,R=b0({startAngle:E,endAngle:w,innerRadius:C,outerRadius:r});R.push(["cartesian"]),M.update({transformations:R});const j=S.map(lt=>M.map(lt)),[z,H]=cg(j),[$,dt]=v.getCenter(),gt=Object.assign(Object.assign({x1:z,y1:H,x2:$,y2:dt,stroke:L},d),o),It=Object.assign(Object.assign({cx:$,cy:dt,stroke:L},p),o),rt=Gn(new I.ZA);return ma(u)||(typeof u=="function"?rt.append(()=>u(j,_,M,m)):rt.append("line").call(Bn,gt).node()),ma(h)||(typeof h=="function"?rt.append(()=>h(j,_,M,m)):rt.append("circle").call(Bn,It).node()),rt.node()}},cD={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},PH={style:{shape:LH,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},IH={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1};function RH(t){if((0,ie.Z)(t)){const e=Math.max(0,Math.min(t,1));return{percent:e,target:e,total:1}}return t}function kH(t,e){const{name:n="score",target:r,total:o,percent:c,thresholds:l=[]}=RH(t),u=c||r,d=c?1:o,h=Object.assign({y:{domain:[0,d]}},e);return l.length?{targetData:[{x:n,y:u,color:"target"}],totalData:l.map((p,v)=>({x:n,y:v>=1?p-l[v-1]:p,color:v})),target:u,total:d,scale:h}:{targetData:[{x:n,y:u,color:"target"}],totalData:[{x:n,y:u,color:"target"},{x:n,y:d-u,color:"total"}],target:u,total:d,scale:h}}function DH(t,{target:e,total:n}){const{content:r}=t;return r?r(e,n):e.toString()}const lD=t=>{const{data:e={},scale:n={},style:r={},animate:o={},transform:c=[]}=t,l=Zm(t,["data","scale","style","animate","transform"]),{targetData:u,totalData:d,target:h,total:p,scale:v}=kH(e,n),m=xn(r,"text"),{tooltip:b}=m,_=Zm(m,["tooltip"]),S=GO(r,["pointer","pin"]),E=xn(r,"arc"),w=E.shape;return[an({},cD,Object.assign({type:"interval",transform:[{type:"stackY"}],data:d,scale:v,style:w==="round"?Object.assign(Object.assign({},E),{shape:MH}):E,animate:typeof o=="object"?xn(o,"arc"):o},l)),an({},cD,PH,Object.assign({type:"point",data:u,scale:v,style:S,animate:typeof o=="object"?xn(o,"indicator"):o},l)),an({},IH,{style:Object.assign({text:DH(_,{target:h,total:p})},_),tooltip:b,animate:typeof o=="object"?xn(o,"text"):o})]};lD.props={};const uD=5e3;function fD(t,e,n){return t+(e-t)*n}function FH(t,e,n,r){return e===0?[[t+1/2*n/Math.PI/2,r/2],[t+1/2*n/Math.PI,r],[t+n/4,r]]:e===1?[[t+1/2*n/Math.PI/2*(Math.PI-2),r],[t+1/2*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:e===2?[[t+1/2*n/Math.PI/2,-r/2],[t+1/2*n/Math.PI,-r],[t+n/4,-r]]:[[t+1/2*n/Math.PI/2*(Math.PI-2),-r],[t+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function NH(t,e,n,r,o,c,l){const u=Math.ceil(2*t/n*4)*4,d=[];let h=r;for(;h<-Math.PI*2;)h+=Math.PI*2;for(;h>0;)h-=Math.PI*2;h=h/Math.PI/2*n;const p=c-t+h-t*2;d.push(["M",p,e]);let v=0;for(let m=0;m<u;++m){const b=m%4,_=FH(m*n/4,b,n,o);d.push(["C",_[0][0]+p,-_[0][1]+e,_[1][0]+p,-_[1][1]+e,_[2][0]+p,-_[2][1]+e]),m===u-1&&(v=_[2][0])}return d.push(["L",v+p,l+t]),d.push(["L",p,l+t]),d.push(["Z"]),d}function BH(t,e,n,r,o,c,l,u,d,h,p){const{fill:v,fillOpacity:m,opacity:b}=o;for(let _=0;_<r;_++){const S=r<=1?1:_/(r-1),E=NH(u,l+u*n,d,0,u/40,t,e),w=p.createElement("path",{style:{d:E,fill:v,opacity:fD(.2,.9,S)*Number(b||m)}});c.appendChild(w);try{if(h===!1)return;const C=[{transform:"translate(0, 0)"},{transform:`translate(${d*2}, 0)`}];w.animate(C,{duration:fD(.5*uD,uD,S)*2,iterations:1/0})}catch(C){console.warn("off-screen group animate error!")}}}function jH(t,e,n){return`
      M ${t} ${e-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function zH(t,e,n){const o=n*.618;return`
      M ${t-o} ${e-n}
      L ${t+o} ${e-n}
      L ${t+o} ${e+n}
      L ${t-o} ${e+n}
      Z
    `}function UH(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e}
      L ${t} ${e+n}
      L ${t-n} ${e}
      Z
    `}function ZH(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e+n}
      L ${t-n} ${e+n}
      Z
    `}function HH(t,e,n){const r=n*4/3,o=Math.max(r,n*2),c=r/2,l=t,u=c+e-o/2,d=Math.asin(c/((o-c)*.85)),h=Math.sin(d)*c,p=Math.cos(d)*c,v=l-p,m=u+h,b=t,_=u+c/Math.sin(d);return`
      M ${v} ${m}
      A ${c} ${c} 0 1 1 ${v+p*2} ${m}
      Q ${b} ${_} ${t} ${e+o/2}
      Q ${b} ${_} ${v} ${m}
      Z 
    `}const dD={pin:HH,rect:zH,circle:jH,diamond:UH,triangle:ZH};var hD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const VH=(t="circle")=>dD[t]||dD.circle,pD=(t,e)=>{if(!e)return;const{coordinate:n}=e,{liquidOptions:r,styleOptions:o}=t,{liquidShape:c,percent:l}=r,{background:u,outline:d={},wave:h={}}=o,p=hD(o,["background","outline","wave"]),{border:v=2,distance:m=0}=d,b=hD(d,["border","distance"]),{length:_=192,count:S=3}=h;return(E,w,C)=>{const{document:M}=e.canvas,{color:L,fillOpacity:R}=C,j=Object.assign(Object.assign({fill:L},C),p),z=M.createElement("g",{}),[H,$]=n.getCenter(),dt=n.getSize(),gt=Math.min(...dt)/2,rt=((0,go.Z)(c)?c:VH(c))(H,$,gt,...dt);if(Object.keys(u).length){const bt=M.createElement("path",{style:Object.assign({d:rt,fill:"#fff"},u)});z.appendChild(bt)}if(l>0){const bt=M.createElement("path",{style:{d:rt}});z.appendChild(bt),z.style.clipPath=bt,BH(H,$,1-l,S,j,z,bt.getBBox().y,gt*2,_,!0,M)}const lt=M.createElement("path",{style:{d:rt,fill:"transparent",lineWidth:v+2*m,stroke:"#fff"}}),pt=M.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:rt,stroke:L,strokeOpacity:R,lineWidth:v},j),b),{fill:"transparent"})});return z.appendChild(lt),z.appendChild(pt),z}};pD.props={};var WH=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const GH={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:pD},animate:{enter:{type:"fadeIn"}}},$H={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},gD=t=>{const{data:e={},style:n={},animate:r}=t,o=WH(t,["data","style","animate"]),c=Math.max(0,(0,ie.Z)(e)?e:e==null?void 0:e.percent),l=[{percent:c,type:"liquid"}],u=Object.assign(Object.assign({},xn(n,"text")),xn(n,"content")),d=xn(n,"outline"),h=xn(n,"wave"),p=xn(n,"background");return[an({},GH,Object.assign({type:"interval",data:l,style:{liquidOptions:{percent:c,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:d,wave:h,background:p})},animate:r},o)),an({},$H,{style:Object.assign({text:`${pd(c*100)} %`},u),animate:r})]};gD.props={};function FL(t){const e=new Array(t);for(let n=0;n<t;++n)e[n]=0;return e}function vD(t,e){return FL(t).map(()=>FL(e))}function Uf(t,e){let n=0;for(let r=0;r<t.length;++r)n+=t[r]*e[r];return n}function NL(t){return Math.sqrt(Uf(t,t))}function BL(t,e,n){for(let r=0;r<e.length;++r)t[r]=e[r]*n}function zc(t,e,n,r,o){for(let c=0;c<t.length;++c)t[c]=e*n[c]+r*o[c]}function g$(t,e,n){for(let r=0;r<t.length;++r)t[r]=Uf(e[r],n)}function YH(t,e,n){n=n||{};const r=n.maxIterations||e.length*200,o=n.nonZeroDelta||1.05,c=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,d=n.rho!==void 0?n.rho:1,h=n.chi!==void 0?n.chi:2,p=n.psi!==void 0?n.psi:-.5,v=n.sigma!==void 0?n.sigma:.5;let m;const b=e.length,_=new Array(b+1);_[0]=e,_[0].fx=t(e),_[0].id=0;for(let R=0;R<b;++R){const j=e.slice();j[R]=j[R]?j[R]*o:c,_[R+1]=j,_[R+1].fx=t(j),_[R+1].id=R+1}function S(R){for(let j=0;j<R.length;j++)_[b][j]=R[j];_[b].fx=R.fx}const E=(R,j)=>R.fx-j.fx,w=e.slice(),C=e.slice(),M=e.slice(),L=e.slice();for(let R=0;R<r;++R){if(_.sort(E),n.history){const z=_.map(H=>{const $=H.slice();return $.fx=H.fx,$.id=H.id,$});z.sort((H,$)=>H.id-$.id),n.history.push({x:_[0].slice(),fx:_[0].fx,simplex:z})}m=0;for(let z=0;z<b;++z)m=Math.max(m,Math.abs(_[0][z]-_[1][z]));if(Math.abs(_[0].fx-_[b].fx)<l&&m<u)break;for(let z=0;z<b;++z){w[z]=0;for(let H=0;H<b;++H)w[z]+=_[H][z];w[z]/=b}const j=_[b];if(zc(C,1+d,w,-d,j),C.fx=t(C),C.fx<_[0].fx)zc(L,1+h,w,-h,j),L.fx=t(L),L.fx<C.fx?S(L):S(C);else if(C.fx>=_[b-1].fx){let z=!1;if(C.fx>j.fx?(zc(M,1+p,w,-p,j),M.fx=t(M),M.fx<j.fx?S(M):z=!0):(zc(M,1-p*d,w,p*d,j),M.fx=t(M),M.fx<C.fx?S(M):z=!0),z){if(v>=1)break;for(let H=1;H<_.length;++H)zc(_[H],1-v,_[0],v,_[H]),_[H].fx=t(_[H])}}else S(C)}return _.sort(E),{fx:_[0].fx,x:_[0]}}function XH(t,e,n,r){r=r||{};const o=r.maxIterations||100,c=r.tolerance||1e-10,l=t(e),u=t(n);let d=n-e;if(l*u>0)throw"Initial bisect points must have opposite signs";if(l===0)return e;if(u===0)return n;for(let h=0;h<o;++h){d/=2;const p=e+d,v=t(p);if(v*l>=0&&(e=p),Math.abs(d)<c||v===0)return p}return e+d}function qH(t,e,n,r,o,c,l){const u=n.fx,d=Uf(n.fxprime,e);let h=u,p=u,v=d,m=0;o=o||1,c=c||1e-6,l=l||.1;function b(_,S,E){for(let w=0;w<16;++w)if(o=(_+S)/2,zc(r.x,1,n.x,o,e),h=r.fx=t(r.x,r.fxprime),v=Uf(r.fxprime,e),h>u+c*o*d||h>=E)S=o;else{if(Math.abs(v)<=-l*d)return o;v*(S-_)>=0&&(S=_),_=o,E=h}return 0}for(let _=0;_<10;++_){if(zc(r.x,1,n.x,o,e),h=r.fx=t(r.x,r.fxprime),v=Uf(r.fxprime,e),h>u+c*o*d||_&&h>=p)return b(m,o,p);if(Math.abs(v)<=-l*d)return o;if(v>=0)return b(o,m,h);p=h,m=o,o*=2}return o}function KH(t,e,n){let r={x:e.slice(),fx:0,fxprime:e.slice()},o={x:e.slice(),fx:0,fxprime:e.slice()};const c=e.slice();let l,u=1;n=n||{};const d=n.maxIterations||e.length*20;r.fx=t(r.x,r.fxprime);const h=r.fxprime.slice();BL(h,r.fxprime,-1);for(let p=0;p<d;++p){if(u=qH(t,h,r,o,u),n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:u}),!u)BL(h,r.fxprime,-1);else{zc(c,1,o.fxprime,-1,r.fxprime);const v=Uf(r.fxprime,r.fxprime),m=Math.max(0,Uf(c,o.fxprime)/v);zc(h,m,h,-1,o.fxprime),l=r,r=o,o=l}if(NL(r.fxprime)<=1e-5)break}return n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:u}),r}function v$(t,e,n,r){const o=n.slice(),c=n.slice();let l,u,d;gemv(c,t,n),weightedSum(o,1,e,-1,c);const h=o.slice();l=dot(o,o);for(let p=0;p<e.length&&(gemv(c,t,h),d=l/dot(h,c),r&&r.push({x:n.slice(),p:h.slice(),alpha:d}),weightedSum(n,1,n,d,h),weightedSum(o,1,o,-d,c),u=dot(o,o),!(Math.sqrt(u)<=1e-10));++p)weightedSum(h,1,o,u/l,h),l=u;return r&&r.push({x:n.slice(),p:h.slice(),alpha:d}),n}const mD=1e-10;function yD(t,e){const n=JH(t),r=n.filter(function(d){return QH(d,t)});let o=0,c=0,l;const u=[];if(r.length>1){const d=tV(r);for(l=0;l<r.length;++l){const p=r[l];p.angle=Math.atan2(p.x-d.x,p.y-d.y)}r.sort(function(p,v){return v.angle-p.angle});let h=r[r.length-1];for(l=0;l<r.length;++l){const p=r[l];c+=(h.x+p.x)*(p.y-h.y);const v={x:(p.x+h.x)/2,y:(p.y+h.y)/2};let m=null;for(let b=0;b<p.parentIndex.length;++b)if(h.parentIndex.indexOf(p.parentIndex[b])>-1){const _=t[p.parentIndex[b]],S=Math.atan2(p.x-_.x,p.y-_.y),E=Math.atan2(h.x-_.x,h.y-_.y);let w=E-S;w<0&&(w+=2*Math.PI);const C=E-w/2;let M=Hm(v,{x:_.x+_.radius*Math.sin(C),y:_.y+_.radius*Math.cos(C)});M>_.radius*2&&(M=_.radius*2),(m===null||m.width>M)&&(m={circle:_,width:M,p1:p,p2:h})}m!==null&&(u.push(m),o+=jL(m.circle.radius,m.width),h=p)}}else{let d=t[0];for(l=1;l<t.length;++l)t[l].radius<d.radius&&(d=t[l]);let h=!1;for(l=0;l<t.length;++l)if(Hm(t[l],d)>Math.abs(d.radius-t[l].radius)){h=!0;break}h?o=c=0:(o=d.radius*d.radius*Math.PI,u.push({circle:d,p1:{x:d.x,y:d.y+d.radius},p2:{x:d.x-mD,y:d.y+d.radius},width:d.radius*2}))}return c/=2,e&&(e.area=o+c,e.arcArea=o,e.polygonArea=c,e.arcs=u,e.innerPoints=r,e.intersectionPoints=n),o+c}function QH(t,e){for(let n=0;n<e.length;++n)if(Hm(t,e[n])>e[n].radius+mD)return!1;return!0}function JH(t){const e=[];for(let n=0;n<t.length;++n)for(let r=n+1;r<t.length;++r){const o=_D(t[n],t[r]);for(let c=0;c<o.length;++c){const l=o[c];l.parentIndex=[n,r],e.push(l)}}return e}function jL(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function Hm(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function bD(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);const r=t-(n*n-e*e+t*t)/(2*n),o=e-(n*n-t*t+e*e)/(2*n);return jL(t,r)+jL(e,o)}function _D(t,e){const n=Hm(t,e),r=t.radius,o=e.radius;if(n>=r+o||n<=Math.abs(r-o))return[];const c=(r*r-o*o+n*n)/(2*n),l=Math.sqrt(r*r-c*c),u=t.x+c*(e.x-t.x)/n,d=t.y+c*(e.y-t.y)/n,h=-(e.y-t.y)*(l/n),p=-(e.x-t.x)*(l/n);return[{x:u+h,y:d-p},{x:u-h,y:d+p}]}function tV(t){const e={x:0,y:0};for(let n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function eV(t,e){e=e||{},e.maxIterations=e.maxIterations||500;const n=e.initialLayout||oV,r=e.lossFunction||UL;t=nV(t);const o=n(t,e),c=[],l=[];let u;for(u in o)o.hasOwnProperty(u)&&(c.push(o[u].x),c.push(o[u].y),l.push(u));const h=YH(function(p){const v={};for(let m=0;m<l.length;++m){const b=l[m];v[b]={x:p[2*m],y:p[2*m+1],radius:o[b].radius}}return r(v,t)},c,e).x;for(let p=0;p<l.length;++p)u=l[p],o[u].x=h[2*p],o[u].y=h[2*p+1];return o}const xD=1e-10;function zL(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+xD?Math.abs(t-e):XH(function(r){return bD(t,e,r)-n},0,t+e)}function nV(t){t=t.slice();const e=[],n={};let r,o,c,l;for(r=0;r<t.length;++r){const u=t[r];u.sets.length==1?e.push(u.sets[0]):u.sets.length==2&&(c=u.sets[0],l=u.sets[1],n[[c,l]]=!0,n[[l,c]]=!0)}for(e.sort((u,d)=>u>d?1:-1),r=0;r<e.length;++r)for(c=e[r],o=r+1;o<e.length;++o)l=e[o],[c,l]in n||t.push({sets:[c,l],size:0});return t}function rV(t,e,n){const r=vD(e.length,e.length),o=vD(e.length,e.length);return t.filter(function(c){return c.sets.length==2}).map(function(c){const l=n[c.sets[0]],u=n[c.sets[1]],d=Math.sqrt(e[l].size/Math.PI),h=Math.sqrt(e[u].size/Math.PI),p=zL(d,h,c.size);r[l][u]=r[u][l]=p;let v=0;c.size+1e-10>=Math.min(e[l].size,e[u].size)?v=1:c.size<=1e-10&&(v=-1),o[l][u]=o[u][l]=v}),{distances:r,constraints:o}}function iV(t,e,n,r){let o=0,c;for(c=0;c<e.length;++c)e[c]=0;for(c=0;c<n.length;++c){const l=t[2*c],u=t[2*c+1];for(let d=c+1;d<n.length;++d){const h=t[2*d],p=t[2*d+1],v=n[c][d],m=r[c][d],b=(h-l)*(h-l)+(p-u)*(p-u),_=Math.sqrt(b),S=b-v*v;m>0&&_<=v||m<0&&_>=v||(o+=2*S*S,e[2*c]+=4*S*(l-h),e[2*c+1]+=4*S*(u-p),e[2*d]+=4*S*(h-l),e[2*d+1]+=4*S*(p-u))}}return o}function oV(t,e){let n=sV(t,e);const r=e.lossFunction||UL;if(t.length>=8){const o=aV(t,e),c=r(o,t),l=r(n,t);c+1e-8<l&&(n=o)}return n}function aV(t,e){e=e||{};const n=e.restarts||10,r=[],o={};let c;for(c=0;c<t.length;++c){const S=t[c];S.sets.length==1&&(o[S.sets[0]]=r.length,r.push(S))}const l=rV(t,r,o);let u=l.distances;const d=l.constraints,h=NL(u.map(NL))/u.length;u=u.map(function(S){return S.map(function(E){return E/h})});const p=function(S,E){return iV(S,E,u,d)};let v,m;for(c=0;c<n;++c){const S=FL(u.length*2).map(Math.random);m=KH(p,S,e),(!v||m.fx<v.fx)&&(v=m)}const b=v.x,_={};for(c=0;c<r.length;++c){const S=r[c];_[S.sets[0]]={x:b[2*c]*h,y:b[2*c+1]*h,radius:Math.sqrt(S.size/Math.PI)}}if(e.history)for(c=0;c<e.history.length;++c)BL(e.history[c].x,h);return _}function sV(t,e){const n=e&&e.lossFunction?e.lossFunction:UL,r={},o={};let c;for(let v=0;v<t.length;++v){const m=t[v];m.sets.length==1&&(c=m.sets[0],r[c]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:m.size,radius:Math.sqrt(m.size/Math.PI)},o[c]=[])}t=t.filter(function(v){return v.sets.length==2});for(let v=0;v<t.length;++v){const m=t[v];let b=m.hasOwnProperty("weight")?m.weight:1;const _=m.sets[0],S=m.sets[1];m.size+xD>=Math.min(r[_].size,r[S].size)&&(b=0),o[_].push({set:S,size:m.size,weight:b}),o[S].push({set:_,size:m.size,weight:b})}const l=[];for(c in o)if(o.hasOwnProperty(c)){let v=0;for(let m=0;m<o[c].length;++m)v+=o[c][m].size*o[c][m].weight;l.push({set:c,size:v})}function u(v,m){return m.size-v.size}l.sort(u);const d={};function h(v){return v.set in d}function p(v,m){r[m].x=v.x,r[m].y=v.y,d[m]=!0}p({x:0,y:0},l[0].set);for(let v=1;v<l.length;++v){const m=l[v].set,b=o[m].filter(h);if(c=r[m],b.sort(u),b.length===0)throw"ERROR: missing pairwise overlap information";const _=[];for(let w=0;w<b.length;++w){const C=r[b[w].set],M=zL(c.radius,C.radius,b[w].size);_.push({x:C.x+M,y:C.y}),_.push({x:C.x-M,y:C.y}),_.push({y:C.y+M,x:C.x}),_.push({y:C.y-M,x:C.x});for(let L=w+1;L<b.length;++L){const R=r[b[L].set],j=zL(c.radius,R.radius,b[L].size),z=_D({x:C.x,y:C.y,radius:M},{x:R.x,y:R.y,radius:j});for(let H=0;H<z.length;++H)_.push(z[H])}}let S=1e50,E=_[0];for(let w=0;w<_.length;++w){r[m].x=_[w].x,r[m].y=_[w].y;const C=n(r,t);C<S&&(S=C,E=_[w])}p(E,m)}return r}function UL(t,e){let n=0;function r(o){return o.map(function(c){return t[c]})}for(let o=0;o<e.length;++o){const c=e[o];let l;if(c.sets.length==1)continue;if(c.sets.length==2){const d=t[c.sets[0]],h=t[c.sets[1]];l=bD(d.radius,h.radius,Hm(d,h))}else l=yD(r(c.sets));const u=c.hasOwnProperty("weight")?c.weight:1;n+=u*(l-c.size)*(l-c.size)}return n}function cV(t,e,n){n===null?t.sort(function(o,c){return c.radius-o.radius}):t.sort(n);let r;if(t.length>0){const o=t[0].x,c=t[0].y;for(r=0;r<t.length;++r)t[r].x-=o,t[r].y-=c}if(t.length==2&&distance(t[0],t[1])<Math.abs(t[1].radius-t[0].radius)&&(t[1].x=t[0].x+t[0].radius-t[1].radius-1e-10,t[1].y=t[0].y),t.length>1){const o=Math.atan2(t[1].x,t[1].y)-e;let c,l;const u=Math.cos(o),d=Math.sin(o);for(r=0;r<t.length;++r)c=t[r].x,l=t[r].y,t[r].x=u*c-d*l,t[r].y=d*c+u*l}if(t.length>2){let o=Math.atan2(t[2].x,t[2].y)-e;for(;o<0;)o+=2*Math.PI;for(;o>2*Math.PI;)o-=2*Math.PI;if(o>Math.PI){const c=t[1].y/(1e-10+t[1].x);for(r=0;r<t.length;++r){const l=(t[r].x+c*t[r].y)/(1+c*c);t[r].x=2*l-t[r].x,t[r].y=2*l*c-t[r].y}}}}function lV(t){t.map(function(l){l.parent=l});function e(l){return l.parent!==l&&(l.parent=e(l.parent)),l.parent}function n(l,u){const d=e(l),h=e(u);d.parent=h}for(let l=0;l<t.length;++l)for(let u=l+1;u<t.length;++u){const d=t[l].radius+t[u].radius;distance(t[l],t[u])+1e-10<d&&n(t[u],t[l])}const r={};let o;for(let l=0;l<t.length;++l)o=e(t[l]).parent.setid,o in r||(r[o]=[]),r[o].push(t[l]);t.map(function(l){delete l.parent});const c=[];for(o in r)r.hasOwnProperty(o)&&c.push(r[o]);return c}function ZL(t){const e=function(n){const r=Math.max.apply(null,t.map(function(c){return c[n]+c.radius})),o=Math.min.apply(null,t.map(function(c){return c[n]-c.radius}));return{max:r,min:o}};return{xRange:e("x"),yRange:e("y")}}function m$(t,e,n){e===null&&(e=Math.PI/2);let r=[],o,c;for(c in t)if(t.hasOwnProperty(c)){const m=t[c];r.push({x:m.x,y:m.y,radius:m.radius,setid:c})}const l=lV(r);for(o=0;o<l.length;++o){cV(l[o],e,n);const m=ZL(l[o]);l[o].size=(m.xRange.max-m.xRange.min)*(m.yRange.max-m.yRange.min),l[o].bounds=m}l.sort(function(m,b){return b.size-m.size}),r=l[0];let u=r.bounds;const d=(u.xRange.max-u.xRange.min)/50;function h(m,b,_){if(!m)return;const S=m.bounds;let E,w,C;b?E=u.xRange.max-S.xRange.min+d:(E=u.xRange.max-S.xRange.max,C=(S.xRange.max-S.xRange.min)/2-(u.xRange.max-u.xRange.min)/2,C<0&&(E+=C)),_?w=u.yRange.max-S.yRange.min+d:(w=u.yRange.max-S.yRange.max,C=(S.yRange.max-S.yRange.min)/2-(u.yRange.max-u.yRange.min)/2,C<0&&(w+=C));for(let M=0;M<m.length;++M)m[M].x+=E,m[M].y+=w,r.push(m[M])}let p=1;for(;p<l.length;)h(l[p],!0,!1),h(l[p+1],!1,!0),h(l[p+2],!0,!0),p+=3,u=ZL(r);const v={};for(o=0;o<r.length;++o)v[r[o].setid]=r[o];return v}function uV(t,e,n,r){const o=[],c=[];for(const S in t)t.hasOwnProperty(S)&&(c.push(S),o.push(t[S]));e-=2*r,n-=2*r;const l=ZL(o),u=l.xRange,d=l.yRange;if(u.max==u.min||d.max==d.min)return console.log("not scaling solution: zero size detected"),t;const h=e/(u.max-u.min),p=n/(d.max-d.min),v=Math.min(p,h),m=(e-(u.max-u.min)*v)/2,b=(n-(d.max-d.min)*v)/2,_={};for(let S=0;S<o.length;++S){const E=o[S];_[c[S]]={radius:v*E.radius,x:r+m+(E.x-u.min)*v,y:r+b+(E.y-d.min)*v}}return _}function fV(t,e,n){const r=[],o=t-n,c=e;return r.push("M",o,c),r.push("A",n,n,0,1,0,o+2*n,c),r.push("A",n,n,0,1,0,o,c),r.join(" ")}function dV(t){const e={};yD(t,e);const n=e.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return fV(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let o=0;o<n.length;++o){const c=n[o],l=c.circle.radius,u=c.width>l;r.push(`
A`,l,l,0,u?1:0,1,c.p1.x,c.p1.y)}return r.join(" ")}}const SD=t=>{const{sets:e="sets",size:n="size",as:r=["key","path"],padding:o=0}=t,[c,l]=r;return u=>{const d=u.map(v=>Object.assign(Object.assign({},v),{sets:v[e],size:v[n],[c]:v.sets.join("&")}));d.sort((v,m)=>v.sets.length-m.sets.length);const h=eV(d);let p;return d.map(v=>{const m=v[e],b=({width:_,height:S})=>{p=p||uV(h,_,S,o);const E=m.map(C=>p[C]);let w=dV(E);return/[zZ]$/.test(w)||(w+=" Z"),w};return Object.assign(Object.assign({},v),{[l]:b})})}};SD.props={};function hV(){return{"data.venn":SD,"mark.boxplot":aD,"mark.gauge":lD,"mark.wordCloud":XM,"mark.liquid":gD}}function pV(){return Object.assign(Object.assign(Object.assign(Object.assign({},_U()),OH()),hV()),vz())}var VS=function(){return VS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},VS.apply(this,arguments)},gV=tM(JC,VS(VS({},pV()),PM())),Ap=function(){return Ap=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ap.apply(this,arguments)},vV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},mV=["renderer"],OD=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],WS="__transform__",yV="__skipDelCustomKeys__",Gl=function(t,e){return(0,B.isBoolean)(e)?{type:t,available:e}:Ap({type:t},e)},HL={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",y1Field:"encode.y1",sizeField:"encode.size",setsField:"encode.sets",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",coordinateType:"coordinate.type",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(t){return Gl("stackY",t)}},normalize:{target:"transform",value:function(t){return Gl("normalizeY",t)}},percent:{target:"transform",value:function(t){return Gl("normalizeY",t)}},group:{target:"transform",value:function(t){return Gl("dodgeX",t)}},sort:{target:"transform",value:function(t){return Gl("sortX",t)}},symmetry:{target:"transform",value:function(t){return Gl("symmetryY",t)}},diff:{target:"transform",value:function(t){return Gl("diffY",t)}},meta:{target:"scale",value:function(t){return t}},label:{target:"labels",value:function(t){return t}},shape:"style.shape",connectNulls:{target:"style",value:function(t){return(0,B.isBoolean)(t)?{connect:t}:t}},transpose:{target:"transpose",value:function(t){return Gl("transpose",t)}}},VL=["xField","yField","seriesField","colorField","shapeField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],GS=[{key:"annotations",extendedProperties:[]},{key:"line",type:"line",extendedProperties:VL},{key:"connector",type:"connector",extendedProperties:[]},{key:"point",type:"point",extendedProperties:VL,defaultShapeConfig:{shapeField:"circle"}},{key:"area",type:"area",extendedProperties:VL}],bV=[{key:"transform",callback:function(t,e,n){var r;t[e]=t[e]||[];var o=n.available,c=o===void 0?!0:o,l=vV(n,["available"]);if(c)t[e].push(Ap((r={},r[WS]=!0,r),l));else{var u=t[e].indexOf(function(d){return d.type===n.type});u!==-1&&t[e].splice(u,1)}}},{key:"labels",callback:function(t,e,n){var r;if(!n||(0,B.isArray)(n)){t[e]=n||[];return}n.text||(n.text=t.yField),t[e]=t[e]||[],t[e].push(Ap((r={},r[WS]=!0,r),n))}},{key:"transpose",callback:function(t,e,n){var r;n.available?t.coordinate={transform:[Ap((r={},r[WS]=!0,r),n)]}:t.coordinate={}}}],WL=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],_V=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$S=function(){return $S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},$S.apply(this,arguments)},xV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},SV=function(t){_V(e,t);function e(n){n===void 0&&(n={});var r=n.style,o=xV(n,["style"]);return t.call(this,$S({style:$S({fill:"#eee"},r)},o))||this}return e}(I.mg),OV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YS=function(){return YS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},YS.apply(this,arguments)},EV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},ED=function(t){OV(e,t);function e(n){n===void 0&&(n={});var r=n.style,o=EV(n,["style"]);return t.call(this,YS({style:YS({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},o))||this}return e}(I.xv),wD=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,c;r<o;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))},wV=function(t,e){if((0,B.isArray)(e))return e},$l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return B.mergeWith.apply(void 0,wD(wD([],t,!1),[wV],!1))},AV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),AD=function(t){AV(e,t);function e(n,r,o){var c=t.call(this,{style:$l(o,r)})||this;return c.chart=n,c}return e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},e.prototype.disconnectedCallback=function(){},e.prototype.attributeChangedCallback=function(n){},e.prototype.update=function(n,r){var o;return this.attr($l({},this.attributes,n||{})),(o=this.render)===null||o===void 0?void 0:o.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),o=[];return r.forEach(function(c){var l=c.getBBox(),u=l.x,d=l.y,h=l.width,p=l.height,v=c.__data__;o.push({bbox:l,x:u,y:d,width:h,height:p,key:v.key,data:v})}),o},e.prototype.bindEvents=function(n,r){},e}(I.b_),TV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XS=function(){return XS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},XS.apply(this,arguments)},CV=function(t){TV(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=this.getElementsLayout(),o=r[0],c=o.x,l=o.y,u=o.height,d=o.width,h=o.data,p=["items",0,"value"],v=(0,B.get)(h,p),m=n?r[1].y-l-u:r[1].x-c-d,b=[],_=this.attributes,S=_.size,E=S===void 0?40:S,w=_.arrowSize,C=w===void 0?20:w,M=_.spacing,L=M===void 0?4:M;return r.forEach(function(R,j){if(j>0){var z=R.x,H=R.y,$=R.height,dt=R.width,gt=R.data,It=R.key,rt=(0,B.get)(gt,p),lt=E/2;if(n){var pt=z+dt/2,bt=H;b.push({points:[[pt+lt,bt-m+L],[pt+lt,bt-C-L],[pt,bt-L],[pt-lt,bt-C-L],[pt-lt,bt-m+L]],center:[pt,bt-m/2-L],width:m,value:[v,rt],key:It})}else{var pt=z,bt=H+$/2;b.push({points:[[z-m+L,bt-lt],[z-C-L,bt-lt],[pt-L,bt],[z-C-L,bt+lt],[z-m+L,bt+lt]],center:[pt-m/2-L,bt],width:m,value:[v,rt],key:It})}v=rt}}),b},e.prototype.render=function(){this.setDirection(),this.drawConversionTag()},e.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=(0,B.get)(n,"options.transformations"),o="horizontal";r.forEach(function(c){c.includes("transpose")&&(o="vertical")}),this.direction=o},e.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),o=this.attributes,c=o.style,l=o.text,u=l.style,d=l.formatter;r.forEach(function(h){var p=h.points,v=h.center,m=h.value,b=h.key,_=m[0],S=m[1],E=v[0],w=v[1],C=new SV({style:XS({points:p,fill:"#eee"},c),id:"polygon-".concat(b)}),M=new ED({style:XS({x:E,y:w,text:(0,B.isFunction)(d)?d(_,S):(S/_*100).toFixed(2)+"%"},u),id:"text-".concat(b)});n.appendChild(C),n.appendChild(M)})},e.prototype.update=function(){var n=this,r=this.getConversionTagLayout();r.forEach(function(o){var c=o.points,l=o.center,u=o.key,d=l[0],h=l[1],p=n.getElementById("polygon-".concat(u)),v=n.getElementById("text-".concat(u));p.setAttribute("points",c),v.setAttribute("x",d),v.setAttribute("y",h)})},e.tag="ConversionTag",e}(AD),GL=32,TD=16,CD=48,MV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vm=function(){return Vm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Vm.apply(this,arguments)},LV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},PV=function(t){MV(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.render=function(){this.drawText()},e.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",o=this.getElementsLayout(),c=r?(0,B.uniqBy)(o,"x"):(0,B.uniqBy)(o,"y"),l=["title"],u=[],d=this.chart.getContext().views,h=(0,B.get)(d,[0,"layout"]),p=h.width,v=h.height;return c.forEach(function(m){var b=m.x,_=m.y,S=m.height,E=m.width,w=m.data,C=m.key,M=(0,B.get)(w,l);r?u.push({x:b+E/2,y:v,text:M,key:C}):u.push({x:p,y:_+S/2,text:M,key:C})}),(0,B.uniqBy)(u,"text").length!==u.length&&(u=Object.values((0,B.groupBy)(u,"text")).map(function(m){var b,_=m.reduce(function(S,E){return S+(r?E.x:E.y)},0);return Vm(Vm({},m[0]),(b={},b[r?"x":"y"]=_/m.length,b))})),u},e.prototype.transformLabelStyle=function(n){var r={},o=/^label[A-Z]/;return Object.keys(n).forEach(function(c){o.test(c)&&(r[c.replace("label","").replace(/^[A-Z]/,function(l){return l.toLowerCase()})]=n[c])}),r},e.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),o=this.attributes,c=o.layout,l=o.labelFormatter,u=LV(o,["layout","labelFormatter"]);r.forEach(function(d){var h=d.x,p=d.y,v=d.text,m=d.key,b=new ED({style:Vm({x:h,y:p,text:(0,B.isFunction)(l)?l(v):v,wordWrap:!0,wordWrapWidth:c==="horizontal"?GL*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(u)),id:"text-".concat(m)});n.appendChild(b)})},e.prototype.destroy=function(){this.clear()},e.prototype.update=function(){this.destroy(),this.drawText()},e.tag="BidirectionalBarAxisText",e}(AD),IV={ConversionTag:CV,BidirectionalBarAxisText:PV},RV=function(){function t(e,n){this.container=new Map,this.chart=e,this.config=n,this.init()}return t.prototype.init=function(){var e=this;WL.forEach(function(n){var r,o=n.key,c=n.shape,l=e.config[o];if(l){var u=new IV[c](e.chart,l),d=e.chart.getContext().canvas;d.appendChild(u),e.container.set(o,u)}else(r=e.container.get(o))===null||r===void 0||r.clear()})},t.prototype.update=function(){var e=this;this.container.size&&WL.forEach(function(n){var r=n.key,o=e.container.get(r);o==null||o.update()})},t}(),kV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tp=function(){return Tp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Tp.apply(this,arguments)},MD="data-chart-source-type",Pr=function(t){kV(e,t);function e(n,r){var o=t.call(this)||this;return o.container=typeof n=="string"?document.getElementById(n):n,o.options=o.mergeOption(r),o.createG2(),o.bindEvents(),o}return e.prototype.getChartOptions=function(){return Tp(Tp({},(0,B.pick)(this.options,mV)),{container:this.container})},e.prototype.getSpecOptions=function(){return this.type==="base"||this[yV]?Tp(Tp({},this.options),this.getChartOptions()):this.options},e.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new gV(this.getChartOptions()),this.container.setAttribute(MD,"Ant Design Charts")},e.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},e.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},e.prototype.getDefaultOptions=function(){},e.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new RV(n.chart,n.options)}),this.bindSizeSensor()},e.prototype.update=function(n){this.options=this.mergeOption(n)},e.prototype.mergeOption=function(n){return $l({},this.getBaseOptions(),this.getDefaultOptions(),n)},e.prototype.changeData=function(n){this.chart.changeData(n)},e.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},e.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(MD)},e.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit,o=r===void 0?!0:r;o&&this.chart.on(Cr.AFTER_CHANGE_SIZE,function(){n.annotation.update()})},e}(pe),DV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FV=function(t){DV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="base",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return function(n){return n}},e}(Pr),NV=function(t){var e=t.options,n=e.children,r=n===void 0?[]:n;return r.forEach(function(o){Object.keys(o).forEach(function(c){(0,B.isArray)(o[c])&&c!=="data"&&(o[c]=o[c].filter(function(l){return!l[WS]}))})}),e},LD=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,c;r<o;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))},BV=function(t){var e=t.children,n=e===void 0?[]:e,r=Object.keys(HL).concat(GS.map(function(o){return o.key}));return r.forEach(function(o){delete t[o]}),n.forEach(function(o){Object.keys(o).forEach(function(c){r.includes(c)&&delete o[c]})}),Object.keys(t).forEach(function(o){LD(LD([],OD,!0),WL.map(function(c){return c.key}),!0).includes(o)||delete t[o]}),t},$L=function(){return $L=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},$L.apply(this,arguments)},jr=function(t){var e=NV(t),n=e.children,r=n===void 0?[]:n,o=(0,B.omit)(e,[].concat(OD,GS.map(function(h){return h.key}))),c=function(h){var p;return(p=bV.find(function(v){return v.key===h}))===null||p===void 0?void 0:p.callback},l=function(h,p,v){var m=c(p);m?m(h,p,v):h[p]=$l({},h[p],v)},u=function(h){Object.keys(h).forEach(function(p){if(h[p]){var v=GS.find(function(w){return w.key===p});if(v){var m=v.type,b=v.extendedProperties,_=v.defaultShapeConfig,S=_===void 0?{}:_;if(m){var E=h[p].tooltip;r.push(d($l({},(0,B.pick)(h,b),S,{type:m},h[p],{tooltip:E||!1})))}else(0,B.isArray)(h[p])&&h[p].forEach(function(w){r.push(d($L({data:[],tooltip:!1},w)))})}}})},d=function(h){return u(h),Object.keys(HL).forEach(function(p){var v=HL[p];if(!(0,B.isUndefined)(h[p]))if((0,B.isObject)(v)){var m=v.value,b=v.target,_=m(h[p]);l(h,b,_)}else(0,B.set)(h,v,h[p])}),h};return r.forEach(function(h){var p=$l({},o,h);d($l(h,p))}),u(e),BV(e),t},YL=function(){return YL=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},YL.apply(this,arguments)};function jV(t){var e=t.options,n=e.stack,r=e.tooltip,o=e.xField;if(!n)return t;var c=GS.map(function(u){return u.type}).filter(function(u){return!!u}),l=!1;return c.forEach(function(u){e[u]&&(l=!0,(0,B.set)(e,[u,"stack"],YL({y1:"y"},typeof n=="object"?n:{})))}),l&&!(0,B.isBoolean)(r)&&!r&&(0,B.set)(e,"tooltip",{title:o,items:[{channel:"y"}]}),t}function vi(t){return(0,B.flow)(jV)(t)}function zV(t){return(0,B.flow)(vi,jr)(t)}var UV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZV=function(t){UV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return zV},e}(Pr),Cp=function(){return Cp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Cp.apply(this,arguments)};function PD(t){var e=function(n){var r=n.options;(0,B.get)(r,"children.length")>1&&(0,B.set)(r,"children",[{type:"interval"}]);var o=r.scale,c=r.markBackground,l=r.data,u=r.children,d=r.yField,h=(0,B.get)(o,"y.domain",[]);if(c&&h.length&&(0,B.isArray)(l)){var p="domainMax",v=l.map(function(m){var b;return Cp(Cp({originData:Cp({},m)},(0,B.omit)(m,d)),(b={},b[p]=h[h.length-1],b))});u.unshift(Cp({type:"interval",data:v,yField:p,tooltip:!1,style:{fill:"#eee"},label:!1},c))}return n};return(0,B.flow)(e,vi,jr)(t)}var HV=function(){var t=function(e,n){return function(r){var o=e.fill,c=o===void 0?"#2888FF":o,l=e.stroke,u=e.fillOpacity,d=u===void 0?1:u,h=e.strokeOpacity,p=h===void 0?.2:h,v=e.pitch,m=v===void 0?8:v,b=r[0],_=r[1],S=r[2],E=r[3],w=(_[1]-b[1])/2,C=n.document,M=C.createElement("g",{}),L=C.createElement("polygon",{style:{points:[b,[b[0]-m,b[1]+w],[S[0]-m,b[1]+w],E],fill:c,fillOpacity:d,stroke:l,strokeOpacity:p,inset:30}}),R=C.createElement("polygon",{style:{points:[[b[0]-m,b[1]+w],_,S,[S[0]-m,b[1]+w]],fill:c,fillOpacity:d,stroke:l,strokeOpacity:p}}),j=C.createElement("polygon",{style:{points:[b,[b[0]-m,b[1]+w],_,[b[0]+m,b[1]+w]],fill:c,fillOpacity:d-.2}});return M.appendChild(L),M.appendChild(R),M.appendChild(j),M}};by("shape.interval.bar25D",t)},VV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();HV();var WV=function(t){VV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Bar",n}return e.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return PD},e}(Pr),GV=function(){var t=function(e,n){return function(r){var o=e.fill,c=o===void 0?"#2888FF":o,l=e.stroke,u=e.fillOpacity,d=u===void 0?1:u,h=e.strokeOpacity,p=h===void 0?.2:h,v=e.pitch,m=v===void 0?8:v,b=r[1][0]-r[0][0],_=b/2+r[0][0],S=n.document,E=S.createElement("g",{}),w=S.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[_,r[1][1]+m],[_,r[3][1]+m],[r[3][0],r[3][1]]],fill:c,fillOpacity:d,stroke:l,strokeOpacity:p,inset:30}}),C=S.createElement("polygon",{style:{points:[[_,r[1][1]+m],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[_,r[2][1]+m]],fill:c,fillOpacity:d,stroke:l,strokeOpacity:p}}),M=S.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[_,r[1][1]-m],[r[1][0],r[1][1]],[_,r[1][1]+m]],fill:c,fillOpacity:d-.2}});return E.appendChild(C),E.appendChild(w),E.appendChild(M),E}};by("shape.interval.column25D",t)},$V=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();GV();var YV=function(t){$V(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return PD},e}(Pr);function XV(t){var e=function(r){var o=r.options,c=o.children,l=c===void 0?[]:c,u=o.legend;return u&&l.forEach(function(d){if(!(0,B.get)(d,"colorField")){var h=(0,B.get)(d,"yField");(0,B.set)(d,"colorField",function(){return h})}}),r},n=function(r){var o=r.options,c=o.annotations,l=c===void 0?[]:c,u=o.children,d=u===void 0?[]:u,h=o.scale,p=!1;return(0,B.get)(h,"y.key")||d.forEach(function(v,m){if(!(0,B.get)(v,"scale.y.key")){var b="child".concat(m,"Scale");(0,B.set)(v,"scale.y.key",b);var _=v.annotations,S=_===void 0?[]:_;S.length>0&&((0,B.set)(v,"scale.y.independent",!1),S.forEach(function(E){(0,B.set)(E,"scale.y.key",b)})),!p&&l.length>0&&(0,B.get)(v,"scale.y.independent")===void 0&&(p=!0,(0,B.set)(v,"scale.y.independent",!1),l.forEach(function(E){(0,B.set)(E,"scale.y.key",b)}))}}),r};return(0,B.flow)(e,n,vi,jr)(t)}var qV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ID=function(t){qV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="DualAxes",n}return e.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return XV},e}(Pr);function KV(t){var e=function(c){var l=c.options,u=l.xField,d=l.colorField;return d||(0,B.set)(l,"colorField",u),c},n=function(c){var l=c.options,u=l.compareField,d=l.transform,h=l.isTransposed,p=h===void 0?!0:h,v=l.coordinate;return d||(u?(0,B.set)(l,"transform",[]):(0,B.set)(l,"transform",[{type:"symmetryY"}])),!v&&p&&(0,B.set)(l,"coordinate",{transform:[{type:"transpose"}]}),c},r=function(c){var l=c.options,u=l.compareField,d=l.seriesField,h=l.data,p=l.children,v=l.yField,m=l.isTransposed,b=m===void 0?!0:m;if(u||d){var _=Object.values((0,B.groupBy)(h,function(S){return S[u||d]}));p[0].data=_[0],p.push({type:"interval",data:_[1],yField:function(S){return-S[v]}}),delete l.compareField,delete l.data}return d&&((0,B.set)(l,"type","spaceFlex"),(0,B.set)(l,"ratio",[1,1]),(0,B.set)(l,"direction",b?"row":"col"),delete l.seriesField),c},o=function(c){var l=c.options,u=l.tooltip,d=l.xField,h=l.yField;return u||(0,B.set)(l,"tooltip",{title:!1,items:[function(p){return{name:p[d],value:p[h]}}]}),c};return(0,B.flow)(e,n,r,o,vi,jr)(t)}var QV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),JV=function(t){QV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return KV},e}(Pr);function tW(t){return(0,B.flow)(vi,jr)(t)}var eW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nW=function(t){eW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="line",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return tW},e}(Pr);function qS(t){switch(typeof t){case"function":return t;case"string":return function(e){return(0,B.get)(e,[t])};default:return function(){return t}}}var Na=function(){return Na=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Na.apply(this,arguments)};function rW(t){var e=function(n){var r=n.options,o=r.angleField,c=r.data,l=r.label,u=r.tooltip,d=r.colorField,h=qS(d);if((0,B.isArray)(c)&&c.length>0){var p=c.reduce(function(b,_){return b+_[o]},0);if(p===0){var v=c.map(function(b){var _;return Na(Na({},b),(_={},_[o]=1,_))});if((0,B.set)(r,"data",v),l){var m=d===(0,B.get)(l,"text");(0,B.set)(r,"label",Na(Na({},l),m?{}:{formatter:function(){return 0}}))}u!==!1&&((0,B.isFunction)(u)?(0,B.set)(r,"tooltip",function(b,_,S){var E;return u(Na(Na({},b),(E={},E[o]=0,E)),_,S.map(function(w){var C;return Na(Na({},w),(C={},C[o]=0,C))}))}):(0,B.set)(r,"tooltip",Na(Na({},u),{items:[function(b,_,S){return{name:h(b,_,S),value:0}}]})))}}return n};return(0,B.flow)(e,jr)(t)}var iW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oW=function(t){iW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="pie",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return rW},e}(Pr);function aW(t){return(0,B.flow)(vi,jr)(t)}var sW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cW=function(t){sW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="scatter",n}return e.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return aW},e}(Pr);function lW(t){var e=function(n){return(0,B.set)(n,"options.coordinate",{type:(0,B.get)(n,"options.coordinateType","polar")}),n};return(0,B.flow)(e,jr)(t)}var uW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fW=function(t){uW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radar",n}return e.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return lW},e}(Pr);function dW(t){var e=function(n){var r=n.options,o=r.yField,c=r.children,l=r.style,u=l===void 0?{}:l,d=r.lineStyle,h=d===void 0?{}:d,p=o[0],v=o[1],m=o[2],b=o[3];return(0,B.set)(c,[0,"yField"],[m,b]),(0,B.set)(c,[0,"style"],h),(0,B.set)(c,[1,"yField"],[p,v]),(0,B.set)(c,[1,"style"],u),delete r.yField,delete r.lineStyle,delete r.style,n};return(0,B.flow)(e,jr)(t)}var hW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pW=["#26a69a","#999999","#ef5350"],gW=function(t){hW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="stock",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:pW},y:{nice:!0}},children:[{type:"link"},{type:"interval"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return dW},e}(Pr);function vW(t){return(0,B.flow)(vi,jr)(t)}var mW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yW=function(t){mW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyLine",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return vW},e}(Pr);function bW(t){return(0,B.flow)(vi,jr)(t)}var _W=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xW=function(t){_W(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyArea",n}return e.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return bW},e}(Pr);function SW(t){return(0,B.flow)(vi,jr)(t)}var OW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),EW=function(t){OW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyColumn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return SW},e}(Pr),XL=function(){return XL=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},XL.apply(this,arguments)};function wW(t){var e=function(n){var r=n.options,o=r.percent,c=r.color,l=c===void 0?[]:c;if(!o)return n;var u={scale:{color:{range:l.length?l:[]}},data:[1,o]};return Object.assign(r,XL({},u)),n};return(0,B.flow)(e,vi,jr)(t)}var AW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TW=function(t){AW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyProgress",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wW},e}(Pr),qL=function(){return qL=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},qL.apply(this,arguments)};function CW(t){var e=function(r){var o=r.options,c=o.radius,l=c===void 0?.8:c;return(0,B.set)(r,"options.coordinate.innerRadius",l),r},n=function(r){var o=r.options,c=o.percent,l=o.color,u=l===void 0?[]:l;if(!c)return r;var d={scale:{color:{range:u.length?u:[]}},data:[1,c]};return Object.assign(o,qL({},d)),r};return(0,B.flow)(e,n,vi,jr)(t)}var MW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LW=function(t){MW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyRing",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return CW},e}(Pr);function PW(t){return(0,B.flow)(jr)(t)}var IW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),RW=function(t){IW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="rose",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return PW},e}(Pr),KL="__start__",Yl="__end__",QL="__waterfall_value__",KS=function(){return KS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},KS.apply(this,arguments)},kW=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,c;r<o;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))};function DW(t){var e=function(o){var c=o.options,l=c.data,u=l===void 0?[]:l,d=c.yField;return u.length&&(u.reduce(function(h,p,v){var m,b=qS(d),_=b(p,v,u);if(v===0||p.isTotal)p[KL]=0,p[Yl]=_,p[QL]=_;else{var S=(m=h[Yl])!==null&&m!==void 0?m:b(h,v,u);p[KL]=S,p[Yl]=S+_,p[QL]=h[Yl]}return p},[]),Object.assign(c,{yField:[KL,Yl]})),o},n=function(o){var c=o.options,l=c.data,u=l===void 0?[]:l,d=c.xField,h=c.children,p=c.linkStyle,v=kW([],u,!0);return v.reduce(function(m,b,_){return _>0&&(b.x1=m[d],b.x2=b[d],b.y1=m[Yl]),b},[]),v.shift(),h.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:v,style:KS({stroke:"#697474"},p),label:!1,tooltip:!1}),o},r=function(o){var c=o.options,l=c.data,u=l===void 0?[]:l,d=c.connector;return d&&(0,B.set)(c,"connector",KS({xField:d.reverse?["x2","x1"]:["x1","x2"],yField:d.reverse?["y2","y1"]:["y1","y2"],data:[{x1:u[0].x,y1:u[0][Yl],x2:u[u.length-1].x,y2:u[u.length-1][Yl]}]},(0,B.isObject)(d)?d:{})),o};return(0,B.flow)(e,n,vi,r,jr)(t)}var FW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),NW=function(t){FW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="waterfall",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:QL,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return DW},e}(Pr);function BW(t){var e=function(n){var r=n.options,o=r.data,c=r.binNumber,l=r.binWidth,u=r.children,d=r.channel,h=d===void 0?"count":d,p=(0,B.get)(u,"[0].transform[0]",{});return(0,B.isNumber)(l)?((0,B.assign)(p,{thresholds:(0,B.ceil)((0,B.divide)(o.length,l)),y:h}),n):((0,B.isNumber)(c)&&(0,B.assign)(p,{thresholds:c,y:h}),n)};return(0,B.flow)(e,vi,jr)(t)}var jW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zW=function(t){jW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Histogram",n}return e.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return BW},e}(Pr);function UW(t){var e=function(r){var o=r.options,c=o.tooltip,l=c===void 0?{}:c,u=o.colorField,d=o.sizeField;return l&&!l.field&&(l.field=u||d),r},n=function(r){var o=r.options,c=o.mark,l=o.children;return c&&(l[0].type=c),r};return(0,B.flow)(e,n,vi,jr)(t)}var ZW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HW=function(t){ZW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="heatmap",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return UW},e}(Pr);function VW(t){var e=function(n){var r=n.options.boxType,o=r===void 0?"box":r;return n.options.children[0].type=o,n};return(0,B.flow)(e,vi,jr)(t)}var WW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GW=function(t){WW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="box",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return VW},e}(Pr),QS=function(t){var e=t.options,n=e.data;return(0,B.get)(n,"value")||(0,B.get)(n,"type")!=="fetch"&&(0,B.isPlainObject)(n)&&(0,B.set)(e,"data.value",n),t},$W=function(t){var e=t.options,n=e.data,r=[{type:"custom",callback:function(c){return{links:c}}}];if((0,B.isArray)(n))n.length>0?(0,B.set)(e,"data",{value:n,transform:r}):delete e.children;else if((0,B.get)(n,"type")==="fetch"&&(0,B.get)(n,"value")){var o=(0,B.get)(n,"transform");(0,B.isArray)(o)||(0,B.set)(n,"transform",r)}return t};function YW(t){return(0,B.flow)(QS,$W,vi,jr)(t)}var XW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qW=function(t){XW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sankey",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return YW},e}(Pr);function KW(t){var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],t}function QW(t){KW(t);var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.children.forEach(function(r){var o;!((o=r==null?void 0:r.coordinate)===null||o===void 0)&&o.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),t}var Zf=function(){return Zf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Zf.apply(this,arguments)},JS=["#f0efff","#5B8FF9","#3D76DD"];function JL(t,e,n,r){r===void 0&&(r=!0);var o=0,c=!1,l=(0,B.map)(t,function(u){var d,h,p=(0,B.get)(u,[e]);if((0,B.isNil)(p))return[];if((0,B.isString)(p)){var v=Number(p);return isNaN(v)?[]:(d={},d[n]=u[n],d[e]=v,d)}return(0,B.isArray)(p)?(c=!0,o=Math.max(o,p.length),(0,B.map)(r?p.sort(function(m,b){return b-m}):p,function(m,b){var _;return _={},_[n]=u[n],_[e]=m,_.index=b,_})):(o=Math.max(1,o),h={},h[n]=u[n],h[e]=p,h)}).flat();return c?[l.map(function(u){return Zf({index:0},u)}),o]:[l,o]}function tP(t,e){return new Array(t).fill("").map(function(n,r){return(0,B.isArray)(e)?e[r%e.length]:e})}function JW(t){var e=function(o){var c=o.options,l=c.color,u=c.rangeField,d=u===void 0?"ranges":u,h=c.measureField,p=h===void 0?"measures":h,v=c.targetField,m=v===void 0?"targets":v,b=c.xField,_=b===void 0?"title":b,S=c.mapField,E=c.data,w=JL(E,d,_),C=w[0],M=w[1],L=JL(E,p,_,!1),R=L[0],j=L[1],z=JL(E,m,_,!1),H=z[0],$=z[1],dt=(0,B.get)(l,[d],JS[0]),gt=(0,B.get)(l,[p],JS[1]),It=(0,B.get)(l,[m],JS[2]),rt=[tP(M,dt),tP(j,gt),tP($,It)].flat();return c.children=(0,B.map)(c.children,function(lt,pt){var bt=[C,R,H][pt],Ht=[d,p,m][pt];return Zf(Zf({},lt),{data:bt,encode:Zf(Zf({},lt.encode||{}),{x:_,y:Ht,color:function(Rt){var jt=Rt.index,oe=(0,B.isNumber)(jt)?"".concat(Ht,"_").concat(jt):Ht;return S?(0,B.get)(S,[Ht,jt],oe):oe}})})}),(0,B.set)(c,"scale.color.range",rt),c.legend.color.itemMarker=function(lt){return S&&(0,B.includes)(S==null?void 0:S[m],lt)||(lt==null?void 0:lt.replace(/\_\d$/,""))===m?"line":"square"},o},n=function(o){var c=o.options.transpose,l=c===void 0?!0:c;return l||(0,B.set)(o,"options.children[2].shapeField","hyphen"),o},r=function(o){var c=o.options,l=c.range,u=l===void 0?{}:l,d=c.measure,h=d===void 0?{}:d,p=c.target,v=p===void 0?{}:p,m=c.children;return c.children=[u,h,v].map(function(b,_){return $l(m[_],b)}),o};return(0,B.flow)(e,n,r,QW,jr)(t)}var tG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),eG=function(t){tG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bullet",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{range:JS}},legend:{color:{itemMarker:function(n){return n==="targets"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30,zIndex:-2},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20,zIndex:-1},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return JW},e}(Pr);function nG(t){var e=function(n){var r=n.options.data;return n.options.data={value:r},n};return(0,B.flow)(e,vi,jr)(t)}var rG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iG=function(t){rG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Gauge",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return nG},e}(Pr);function oG(t){var e=function(n){var r=n.options.percent;return(0,B.isNumber)(r)&&((0,B.set)(n,"options.data",r),delete n.options.percent),n};return(0,B.flow)(e,vi,jr)(t)}var aG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sG=function(t){aG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Liquid",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return oG},e}(Pr);function cG(t){return(0,B.flow)(vi,jr)(t)}var lG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uG=function(t){lG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="WordCloud",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return cG},e}(Pr);function fG(t){return(0,B.flow)(QS,vi,jr)(t)}var dG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hG=function(t){dG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="treemap",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return fG},e}(Pr),Xl=function(){return Xl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Xl.apply(this,arguments)},pG=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function gG(t){var e=function(o){var c=o.options,l=c.startAngle,u=c.maxAngle,d=c.coordinate,h=(0,B.isNumber)(l)?l/(2*Math.PI)*360:-90,p=(0,B.isNumber)(u)?(Number(u)+h)/180*Math.PI:Math.PI;return(0,B.set)(o,["options","coordinate"],Xl(Xl({},d),{endAngle:p,startAngle:l!=null?l:-Math.PI/2})),o},n=function(o){var c=o.options,l=c.tooltip,u=c.xField,d=c.yField,h=qS(u),p=qS(d);return l||(0,B.set)(c,"tooltip",{title:!1,items:[function(v,m,b){return{name:h(v,m,b),value:p(v,m,b)}}]}),o},r=function(o){var c=o.options,l=c.markBackground,u=c.children,d=c.scale,h=c.coordinate,p=c.xField,v=(0,B.get)(d,"y.domain",[]);if(l){var m=l.style,b=pG(l,["style"]);u.unshift(Xl({type:"interval",xField:p,yField:v[v.length-1],style:Xl({fillOpacity:.4,fill:"#e0e4ee"},m),coordinate:Xl(Xl({},h),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},b))}return o};return(0,B.flow)(e,n,r,vi,jr)(t)}var vG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mG=function(t){vG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radial",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return gG},e}(Pr);function yG(t){return(0,B.flow)(QS,jr)(t)}var bG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_G=function(t){bG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="CirclePacking",n}return e.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack",encode:{color:"depth"}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return yG},e}(Pr),tO=function(){return tO=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},tO.apply(this,arguments)};function eP(t,e){return t||e}function xG(t){var e=function(n){var r=n.options,o=r.xField,c=r.yField,l=r.colorField,u=r.seriesField,d=r.children,h=d==null?void 0:d.map(function(p){return tO(tO({},p),{xField:o,yField:c,seriesField:eP(u,l),colorField:eP(l,u),data:p.type==="density"?{transform:[{type:"kde",field:c,groupBy:[o,eP(u,l)]}]}:p.data})}).filter(function(p){return r.box||p.type==="density"});return(0,B.set)(r,"children",h),delete r.box,n};return(0,B.flow)(e,vi,jr)(t)}var SG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),OG=function(t){SG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="violin",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xG},e}(Pr),Wm=function(){return Wm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Wm.apply(this,arguments)},EG=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,c;r<o;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))};function wG(t){var e=function(c){var l=c.options,u=l.yField,d=l.children;return d.forEach(function(h,p){(0,B.set)(h,"yField",u[p])}),c},n=function(c){var l=c.options,u=l.yField,d=l.children,h=l.data;if((0,B.isPlainObject)(h))return c;var p=(0,B.isArray)((0,B.get)(h,[0]))?h:[h,h];return d.forEach(function(v,m){(0,B.set)(v,"data",EG([],p[m].map(function(b){return Wm({groupKey:u[m]},b)}),!0))}),c},r=function(c){var l=c.options,u=l.yField,d=u[0],h=u[1],p=l.tooltip;return p||(0,B.set)(l,"tooltip",{items:[{field:d,value:d},{field:h,value:h}]}),c},o=function(c){var l=c.options,u=l.children,d=l.layout,h=l.coordinate.transform,p=l.paddingBottom,v=p===void 0?CD:p,m=l.paddingLeft,b=m===void 0?CD:m,_=l.axis;(0,B.set)(l,"axisText",Wm(Wm({},(_==null?void 0:_.x)||{}),{layout:d}));var S=u[0],E=u[1];if(d==="vertical")(0,B.set)(l,"direction","col"),(0,B.set)(l,"paddingLeft",b),(0,B.set)(l,"coordinate.transform",h.filter(function(R){return R.type!=="transpose"})),(0,B.set)(S,"paddingBottom",TD),(0,B.set)(E,"paddingTop",TD),(0,B.set)(E,"axis.x.position","top"),(0,B.set)(E,"scale.y.range",[0,1]);else{(0,B.set)(l,"paddingBottom",v),(0,B.set)(S,"scale.y.range",[0,1]);var w=S.paddingRight,C=w===void 0?GL:w,M=E.paddingLeft,L=M===void 0?GL:M;(0,B.set)(S,"paddingRight",C),(0,B.set)(S,"axis.x.position","right"),(0,B.set)(E,"paddingLeft",L)}return c};return(0,B.flow)(e,n,r,o,vi,jr)(t)}var AG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TG=function(t){AG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return e.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wG},e}(Pr),ql;(function(t){t.color="key",t.d="path"})(ql||(ql={}));function CG(t){var e=function(n){var r=n.options,o=r.data,c=r.setsField,l=r.sizeField;return(0,B.isArray)(o)&&((0,B.set)(r,"data",{type:"inline",value:o,transform:[{type:"venn",sets:c,size:l,as:[ql.color,ql.d]}]}),(0,B.set)(r,"colorField",ql.color),(0,B.set)(r,["children","0","encode","d"],ql.d)),n};return(0,B.flow)(e,jr)(t)}var MG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LG=function(t){MG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="venn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:ql.color,d:ql.d}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return CG},e}(Pr);function PG(t){return(0,B.flow)(QS,jr)(t)}var IG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),RG=function(t){IG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Sunburst",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return PG},e}(Pr),kG={Base:FV,Line:nW,Column:YV,Pie:oW,Area:ZV,Bar:WV,DualAxes:ID,Funnel:JV,Scatter:cW,Radar:fW,Rose:RW,Stock:gW,TinyLine:yW,TinyArea:xW,TinyColumn:EW,TinyProgress:TW,TinyRing:LW,Waterfall:NW,Histogram:zW,Heatmap:HW,Box:GW,Sankey:qW,Bullet:eG,Gauge:iG,Liquid:sG,WordCloud:uG,Treemap:hG,RadialBar:mG,CirclePacking:_G,Violin:OG,BidirectionalBar:TG,Venn:LG,Mix:ID,Sunburst:RG},Gm=function(){return Gm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Gm.apply(this,arguments)},RD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},DG=(0,et.forwardRef)(function(t,e){var n=t.chartType,r=n===void 0?"Base":n,o=RD(t,["chartType"]),c=o.containerStyle,l=c===void 0?{height:"inherit",flex:1}:c,u=o.containerAttributes,d=u===void 0?{}:u,h=o.className,p=o.loading,v=o.loadingTemplate,m=o.errorTemplate,b=o.onReady,_=RD(o,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate","onReady"]),S=xt(kG[r],Gm(Gm({},_),{onReady:function(C){e&&(typeof e=="function"?e(C):e.current=C),b==null||b(C)}})),E=S.chart,w=S.container;return et.createElement(Ie,{errorTemplate:m},p&&et.createElement(Gt,{loadingTemplate:v,theme:o.theme,loading:p}),et.createElement("div",Gm({className:h,style:l,ref:w},d)))}),FG=(0,et.createContext)({});function NG(){return(0,et.useContext)(FG)}var nP=function(){return nP=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},nP.apply(this,arguments)};function BG(t){var e=t.charAt(0).toLowerCase()+t.slice(1);return(0,et.forwardRef)(function(n,r){var o=NG();return et.createElement(DG,nP({},o.common,o[e],n,{chartType:t,ref:r}))})}},6466:function(Me,de,k){"use strict";k.d(de,{Z:function(){return Te}});var yt=k(4942),st=k(1413),St=k(91),Kt=k(21532),et=k(93967),Qt=k.n(et),Ut=k(67294),zt=k(53911),ft=k(44962),re=k(64847),q=function(J){return(0,yt.Z)({},J.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:J.marginLG,marginInline:0,color:J.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function Q(Vt){return(0,re.Xj)("ProCardOperation",function(J){var ce=(0,st.Z)((0,st.Z)({},J),{},{componentCls:".".concat(Vt)});return[q(ce)]})}var Dt=k(85893),At=function(J){var ce=J.className,Gt=J.style,ke=Gt===void 0?{}:Gt,Ie=J.children,B=(0,Ut.useContext)(Kt.ZP.ConfigContext),Ct=B.getPrefixCls,G=Ct("pro-card-operation"),Mt=Q(G),Et=Mt.wrapSSR,U=Mt.hashId,it=Qt()(G,ce,U);return Et((0,Dt.jsx)("div",{className:it,style:ke,children:Ie}))},Ft=At,Pt=k(38521),$t=function(J){return(0,yt.Z)({},J.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,yt.Z)({flexDirection:"row"},"".concat(J.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(J.colorBorder)}})};function Oe(Vt){return(0,re.Xj)("StatisticCard",function(J){var ce=(0,st.Z)((0,st.Z)({},J),{},{componentCls:".".concat(Vt)});return[$t(ce)]})}var De=["children","statistic","className","chart","chartPlacement","footer"],Ge=function(J){var ce=J.children,Gt=J.statistic,ke=J.className,Ie=J.chart,B=J.chartPlacement,Ct=J.footer,G=(0,St.Z)(J,De),Mt=(0,Ut.useContext)(Kt.ZP.ConfigContext),Et=Mt.getPrefixCls,U=Et("pro-statistic-card"),it=Oe(U),te=it.wrapSSR,he=it.hashId,xt=Qt()(U,ke,he),ee=Gt&&(0,Dt.jsx)(Pt.Z,(0,st.Z)({layout:"vertical"},Gt)),qt=Qt()("".concat(U,"-chart"),he,(0,yt.Z)((0,yt.Z)({},"".concat(U,"-chart-left"),B==="left"&&Ie&&Gt),"".concat(U,"-chart-right"),B==="right"&&Ie&&Gt)),pe=Ie&&(0,Dt.jsx)("div",{className:qt,children:Ie}),Ce=Qt()("".concat(U,"-content "),he,(0,yt.Z)({},"".concat(U,"-content-horizontal"),B==="left"||B==="right")),vt=(pe||ee)&&(B==="left"?(0,Dt.jsxs)("div",{className:Ce,children:[pe,ee]}):(0,Dt.jsxs)("div",{className:Ce,children:[ee,pe]})),K=Ct&&(0,Dt.jsx)("div",{className:"".concat(U,"-footer ").concat(he).trim(),children:Ct});return te((0,Dt.jsxs)(zt.Z,(0,st.Z)((0,st.Z)({className:xt},G),{},{children:[vt,ce,K]})))},un=function(J){return(0,Dt.jsx)(Ge,(0,st.Z)({bodyStyle:{padding:0}},J))};Ge.Statistic=Pt.Z,Ge.Divider=ft.Z,Ge.Operation=Ft,Ge.isProCard=!0,Ge.Group=un;var Te=Ge},38521:function(Me,de,k){"use strict";k.d(de,{Z:function(){return ae}});var yt=k(1413),st=k(4942),St=k(91),Kt=k(87462),et=k(67294),Qt=k(36688),Ut=k(55304),zt=function(I,Yt){return et.createElement(Ut.Z,(0,Kt.Z)({},I,{ref:Yt,icon:Qt.Z}))},ft=et.forwardRef(zt),re=ft,q=k(21532),Q=k(83062),Dt=k(40411),At=k(56790),Ft=k(75164),Pt=k(96159),$t=k(93967),Oe=k.n($t),De=k(64217),Ge=k(53124),un=k(48054),Vt=Y=>{const{value:I,formatter:Yt,precision:T,decimalSeparator:F,groupSeparator:Lt="",prefixCls:Wt}=Y;let ie;if(typeof Yt=="function")ie=Yt(I);else{const be=String(I),Ae=be.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Ae||be==="-")ie=be;else{const we=Ae[1];let $e=Ae[2]||"0",Xe=Ae[4]||"";$e=$e.replace(/\B(?=(\d{3})+(?!\d))/g,Lt),typeof T=="number"&&(Xe=Xe.padEnd(T,"0").slice(0,T>0?T:0)),Xe&&(Xe=`${F}${Xe}`),ie=[et.createElement("span",{key:"int",className:`${Wt}-content-value-int`},we,$e),Xe&&et.createElement("span",{key:"decimal",className:`${Wt}-content-value-decimal`},Xe)]}}return et.createElement("span",{className:`${Wt}-content-value`},ie)},J=k(14747),ce=k(83559),Gt=k(83262);const ke=Y=>{const{componentCls:I,marginXXS:Yt,padding:T,colorTextDescription:F,titleFontSize:Lt,colorTextHeading:Wt,contentFontSize:ie,fontFamily:be}=Y;return{[I]:Object.assign(Object.assign({},(0,J.Wf)(Y)),{[`${I}-title`]:{marginBottom:Yt,color:F,fontSize:Lt},[`${I}-skeleton`]:{paddingTop:T},[`${I}-content`]:{color:Wt,fontSize:ie,fontFamily:be,[`${I}-content-value`]:{display:"inline-block",direction:"ltr"},[`${I}-content-prefix, ${I}-content-suffix`]:{display:"inline-block"},[`${I}-content-prefix`]:{marginInlineEnd:Yt},[`${I}-content-suffix`]:{marginInlineStart:Yt}}})}},Ie=Y=>{const{fontSizeHeading3:I,fontSize:Yt}=Y;return{titleFontSize:Yt,contentFontSize:I}};var B=(0,ce.I$)("Statistic",Y=>{const I=(0,Gt.mergeToken)(Y,{});return[ke(I)]},Ie),Ct=function(Y,I){var Yt={};for(var T in Y)Object.prototype.hasOwnProperty.call(Y,T)&&I.indexOf(T)<0&&(Yt[T]=Y[T]);if(Y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,T=Object.getOwnPropertySymbols(Y);F<T.length;F++)I.indexOf(T[F])<0&&Object.prototype.propertyIsEnumerable.call(Y,T[F])&&(Yt[T[F]]=Y[T[F]]);return Yt},Mt=et.forwardRef((Y,I)=>{const{prefixCls:Yt,className:T,rootClassName:F,style:Lt,valueStyle:Wt,value:ie=0,title:be,valueRender:Ae,prefix:we,suffix:$e,loading:Xe=!1,formatter:Qe,precision:qe,decimalSeparator:Zt=".",groupSeparator:ne=",",onMouseEnter:se,onMouseLeave:fe}=Y,tt=Ct(Y,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:D,direction:V,className:nt,style:_t}=(0,Ge.dj)("statistic"),Ot=D("statistic",Yt),[ge,Ee,Be]=B(Ot),je=et.createElement(Vt,{decimalSeparator:Zt,groupSeparator:ne,prefixCls:Ot,formatter:Qe,precision:qe,value:ie}),fn=Oe()(Ot,{[`${Ot}-rtl`]:V==="rtl"},nt,T,F,Ee,Be),Re=et.useRef(null);et.useImperativeHandle(I,()=>({nativeElement:Re.current}));const Ye=(0,De.Z)(tt,{aria:!0,data:!0});return ge(et.createElement("div",Object.assign({},Ye,{ref:Re,className:fn,style:Object.assign(Object.assign({},_t),Lt),onMouseEnter:se,onMouseLeave:fe}),be&&et.createElement("div",{className:`${Ot}-title`},be),et.createElement(un.Z,{paragraph:!1,loading:Xe,className:`${Ot}-skeleton`},et.createElement("div",{style:Wt,className:`${Ot}-content`},we&&et.createElement("span",{className:`${Ot}-content-prefix`},we),Ae?Ae(je):je,$e&&et.createElement("span",{className:`${Ot}-content-suffix`},$e)))))});const Et=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function U(Y,I){let Yt=Y;const T=/\[[^\]]*]/g,F=(I.match(T)||[]).map(be=>be.slice(1,-1)),Lt=I.replace(T,"[]"),Wt=Et.reduce((be,[Ae,we])=>{if(be.includes(Ae)){const $e=Math.floor(Yt/we);return Yt-=$e*we,be.replace(new RegExp(`${Ae}+`,"g"),Xe=>{const Qe=Xe.length;return $e.toString().padStart(Qe,"0")})}return be},Lt);let ie=0;return Wt.replace(T,()=>{const be=F[ie];return ie+=1,be})}function it(Y,I,Yt){const{format:T=""}=I,F=new Date(Y).getTime(),Lt=Date.now(),Wt=Math.max(Yt?F-Lt:Lt-F,0);return U(Wt,T)}var te=function(Y,I){var Yt={};for(var T in Y)Object.prototype.hasOwnProperty.call(Y,T)&&I.indexOf(T)<0&&(Yt[T]=Y[T]);if(Y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,T=Object.getOwnPropertySymbols(Y);F<T.length;F++)I.indexOf(T[F])<0&&Object.prototype.propertyIsEnumerable.call(Y,T[F])&&(Yt[T[F]]=Y[T[F]]);return Yt};function he(Y){return new Date(Y).getTime()}var ee=Y=>{const{value:I,format:Yt="HH:mm:ss",onChange:T,onFinish:F,type:Lt}=Y,Wt=te(Y,["value","format","onChange","onFinish","type"]),ie=Lt==="countdown",[be,Ae]=et.useState(null),we=(0,At.zX)(()=>{const Qe=Date.now(),qe=he(I);Ae({});const Zt=ie?qe-Qe:Qe-qe;return T==null||T(Zt),ie&&qe<Qe?(F==null||F(),!1):!0});et.useEffect(()=>{let Qe;const qe=()=>Ft.Z.cancel(Qe),Zt=()=>{Qe=(0,Ft.Z)(()=>{we()&&Zt()})};return Zt(),qe},[I,ie]),et.useEffect(()=>{Ae({})},[]);const $e=(Qe,qe)=>be?it(Qe,Object.assign(Object.assign({},qe),{format:Yt}),ie):"-",Xe=Qe=>(0,Pt.Tm)(Qe,{title:void 0});return et.createElement(Mt,Object.assign({},Wt,{value:I,valueRender:Xe,formatter:$e}))};const qt=Y=>et.createElement(ee,Object.assign({},Y,{type:"countdown"}));var pe=et.memo(qt);Mt.Timer=ee,Mt.Countdown=pe;var Ce=Mt,vt=k(64847),K=function(I){return(0,st.Z)({},I.componentCls,(0,st.Z)((0,st.Z)((0,st.Z)((0,st.Z)((0,st.Z)({display:"flex",fontSize:I.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,st.Z)({display:"flex",width:"100%"},"".concat(I.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,st.Z)({width:"100%"},"".concat(I.antCls,"-statistic-content"),{"&-value-int":{fontSize:I.fontSizeHeading3}}),"&-description":{width:"100%"}},"".concat(I.antCls,"-statistic-title"),{color:I.colorText}),"&-trend-up",(0,st.Z)({},"".concat(I.antCls,"-statistic-content"),(0,st.Z)({color:"#f5222d"},"".concat(I.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),"&-trend-down",(0,st.Z)({},"".concat(I.antCls,"-statistic-content"),(0,st.Z)({color:"#389e0d"},"".concat(I.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),"& &-layout-horizontal",(0,st.Z)((0,st.Z)((0,st.Z)({display:"flex",justifyContent:"space-between"},"".concat(I.antCls,"-statistic-title"),{marginBlockEnd:0}),"".concat(I.antCls,"-statistic-content-value"),{fontWeight:500}),"".concat(I.antCls,"-statistic-title,").concat(I.antCls,"-statistic-content,").concat(I.antCls,"-statistic-content-suffix,").concat(I.antCls,"-statistic-content-prefix,").concat(I.antCls,"-statistic-content-value-decimal"),{fontSize:I.fontSize})),"& &-layout-inline",(0,st.Z)((0,st.Z)((0,st.Z)({display:"inline-flex",color:I.colorTextSecondary},"".concat(I.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),"".concat(I.antCls,"-statistic-content"),{color:I.colorTextSecondary}),"".concat(I.antCls,"-statistic-title,").concat(I.antCls,"-statistic-content,").concat(I.antCls,"-statistic-content-suffix,").concat(I.antCls,"-statistic-content-prefix,").concat(I.antCls,"-statistic-content-value-decimal"),{fontSize:I.fontSizeSM})))};function kt(Y){return(0,vt.Xj)("Statistic",function(I){var Yt=(0,yt.Z)((0,yt.Z)({},I),{},{componentCls:".".concat(Y)});return[K(Yt)]})}var le=k(85893),ut=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],Tt=function(I){var Yt=I.className,T=I.layout,F=T===void 0?"inline":T,Lt=I.style,Wt=I.description,ie=I.children,be=I.title,Ae=I.tip,we=I.status,$e=I.trend,Xe=I.prefix,Qe=I.icon,qe=(0,St.Z)(I,ut),Zt=(0,et.useContext)(q.ZP.ConfigContext),ne=Zt.getPrefixCls,se=ne("pro-card-statistic"),fe=kt(se),tt=fe.wrapSSR,D=fe.hashId,V=Oe()(se,Yt,D),nt=Oe()("".concat(se,"-status"),D),_t=Oe()("".concat(se,"-icon"),D),Ot=Oe()("".concat(se,"-wrapper"),D),ge=Oe()("".concat(se,"-content"),D),Ee=Oe()(D,(0,st.Z)((0,st.Z)({},"".concat(se,"-layout-").concat(F),F),"".concat(se,"-trend-").concat($e),$e)),Be=Ae&&(0,le.jsx)(Q.Z,{title:Ae,children:(0,le.jsx)(re,{className:"".concat(se,"-tip ").concat(D).trim()})}),je=Oe()("".concat(se,"-trend-icon"),D,(0,st.Z)({},"".concat(se,"-trend-icon-").concat($e),$e)),fn=$e&&(0,le.jsx)("div",{className:je}),Re=we&&(0,le.jsx)("div",{className:nt,children:(0,le.jsx)(Dt.Z,{status:we,text:null})}),Ye=Qe&&(0,le.jsx)("div",{className:_t,children:Qe});return tt((0,le.jsxs)("div",{className:V,style:Lt,children:[Ye,(0,le.jsxs)("div",{className:Ot,children:[Re,(0,le.jsxs)("div",{className:ge,children:[(0,le.jsx)(Ce,(0,yt.Z)({title:(be||Be)&&(0,le.jsxs)(le.Fragment,{children:[be,Be]}),prefix:(fn||Xe)&&(0,le.jsxs)(le.Fragment,{children:[fn,Xe]}),className:Ee},qe)),Wt&&(0,le.jsx)("div",{className:"".concat(se,"-description ").concat(D).trim(),children:Wt})]})]})]}))},ae=Tt},17816:function(Me,de){(function(k,yt){yt(de)})(this,function(k){"use strict";function yt(at){var ht=typeof Symbol=="function"&&Symbol.iterator,Xt=ht&&at[ht],ue=0;if(Xt)return Xt.call(at);if(at&&typeof at.length=="number")return{next:function(){return{value:(at=at&&ue>=at.length?void 0:at)&&at[ue++],done:!at}}};throw new TypeError(ht?"Object is not iterable.":"Symbol.iterator is not defined.")}function st(at,ht){var Xt=typeof Symbol=="function"&&at[Symbol.iterator];if(!Xt)return at;var ue,Le,Fe=Xt.call(at),ve=[];try{for(;(ht===void 0||0<ht--)&&!(ue=Fe.next()).done;)ve.push(ue.value)}catch(me){Le={error:me}}finally{try{ue&&!ue.done&&(Xt=Fe.return)&&Xt.call(Fe)}finally{if(Le)throw Le.error}}return ve}function St(at,ht,Xt){if(Xt||arguments.length===2)for(var ue,Le=0,Fe=ht.length;Le<Fe;Le++)!ue&&Le in ht||((ue=ue||Array.prototype.slice.call(ht,0,Le))[Le]=ht[Le]);return at.concat(ue||Array.prototype.slice.call(ht))}function Kt(at){return Qt(at,"Function")}var et={}.toString,Qt=function(at,ht){return et.call(at)==="[object "+ht+"]"},Ut=function(at){return Array.isArray?Array.isArray(at):Qt(at,"Array")},zt=function(at){if(typeof(ht=at)!="object"||ht===null||!Qt(at,"Object"))return!1;var ht;if(Object.getPrototypeOf(at)===null)return!0;for(var Xt=at;Object.getPrototypeOf(Xt)!==null;)Xt=Object.getPrototypeOf(Xt);return Object.getPrototypeOf(at)===Xt},ft=function(at){return Qt(at,"Number")},re=Object.values?function(at){return Object.values(at)}:function(at){var ht,Xt=[],ue=at,Le=function(Ue,Ve){Kt(at)&&Ve==="prototype"||Xt.push(Ue)};if(ue){if(Ut(ue))for(var Fe=0,ve=ue.length;Fe<ve&&Le(ue[Fe],Fe)!==!1;Fe++);else if(ht=typeof ue,ue!==null&&ht=="object"||ht=="function"){for(var me in ue)if(ue.hasOwnProperty(me)&&Le(ue[me],me)===!1)break}}return Xt},q=5;function Q(at){for(var ht=[],Xt=1;Xt<arguments.length;Xt++)ht[Xt-1]=arguments[Xt];for(var ue=0;ue<ht.length;ue+=1)(function Le(Fe,ve,me,Ue){for(var Ve in me=me||0,Ue=Ue||q,ve){var vn;ve.hasOwnProperty(Ve)&&((vn=ve[Ve])!==null&&zt(vn)?(zt(Fe[Ve])||(Fe[Ve]={}),me<Ue?Le(Fe[Ve],vn,me+1,Ue):Fe[Ve]=ve[Ve]):Ut(vn)?(Fe[Ve]=[],Fe[Ve]=Fe[Ve].concat(vn)):vn!==void 0&&(Fe[Ve]=vn))}})(at,ht[ue]);return at}function Dt(at){return at}(function(at,ht){var Xt;if(Kt(at))return(Xt=function(){for(var ue=[],Le=0;Le<arguments.length;Le++)ue[Le]=arguments[Le];var Fe,ve=ht?ht.apply(this,ue):ue[0],me=Xt.cache;return me.has(ve)?me.get(ve):(Fe=at.apply(this,ue),me.set(ve,Fe),Fe)}).cache=new Map;throw new TypeError("Expected a function")})(function(at,ve){var Xt=(ve=ve===void 0?{}:ve).fontSize,ue=ve.fontFamily,Le=ve.fontWeight,Fe=ve.fontStyle,ve=ve.fontVariant;return(At=At||document.createElement("canvas").getContext("2d")).font=[Fe,ve,Le,Xt+"px",ue].join(" "),At.measureText(Qt(at,"String")?at:"").width},function(at,ht){return function(){for(var Xt=0,ue=0,Le=arguments.length;ue<Le;ue++)Xt+=arguments[ue].length;for(var Fe=Array(Xt),ve=0,ue=0;ue<Le;ue++)for(var me=arguments[ue],Ue=0,Ve=me.length;Ue<Ve;Ue++,ve++)Fe[ve]=me[Ue];return Fe}([at],re(ht=ht===void 0?{}:ht)).join("")});var At,Ft=typeof Float32Array!="undefined"?Float32Array:Array;function Pt(){var at=new Ft(9);return Ft!=Float32Array&&(at[1]=0,at[2]=0,at[3]=0,at[5]=0,at[6]=0,at[7]=0),at[0]=1,at[4]=1,at[8]=1,at}Math.hypot||(Math.hypot=function(){for(var at=0,ht=arguments.length;ht--;)at+=arguments[ht]*arguments[ht];return Math.sqrt(at)});var $t=function(at,bn,Ln){var ue=bn[0],Le=bn[1],Fe=bn[2],ve=bn[3],me=bn[4],Ue=bn[5],Ve=bn[6],vn=bn[7],bn=bn[8],An=Ln[0],hn=Ln[1],_n=Ln[2],Tn=Ln[3],mn=Ln[4],Zn=Ln[5],kn=Ln[6],Hn=Ln[7],Ln=Ln[8];return at[0]=An*ue+hn*ve+_n*Ve,at[1]=An*Le+hn*me+_n*vn,at[2]=An*Fe+hn*Ue+_n*bn,at[3]=Tn*ue+mn*ve+Zn*Ve,at[4]=Tn*Le+mn*me+Zn*vn,at[5]=Tn*Fe+mn*Ue+Zn*bn,at[6]=kn*ue+Hn*ve+Ln*Ve,at[7]=kn*Le+Hn*me+Ln*vn,at[8]=kn*Fe+Hn*Ue+Ln*bn,at};function Oe(){var at=new Ft(16);return Ft!=Float32Array&&(at[1]=0,at[2]=0,at[3]=0,at[4]=0,at[6]=0,at[7]=0,at[8]=0,at[9]=0,at[11]=0,at[12]=0,at[13]=0,at[14]=0),at[0]=1,at[5]=1,at[10]=1,at[15]=1,at}var De=function(at,kn,Xt){var ue=kn[0],Le=kn[1],Fe=kn[2],ve=kn[3],me=kn[4],Ue=kn[5],Ve=kn[6],vn=kn[7],bn=kn[8],An=kn[9],hn=kn[10],_n=kn[11],Tn=kn[12],mn=kn[13],Zn=kn[14],kn=kn[15],Hn=Xt[0],Ln=Xt[1],Fn=Xt[2],tr=Xt[3];return at[0]=Hn*ue+Ln*me+Fn*bn+tr*Tn,at[1]=Hn*Le+Ln*Ue+Fn*An+tr*mn,at[2]=Hn*Fe+Ln*Ve+Fn*hn+tr*Zn,at[3]=Hn*ve+Ln*vn+Fn*_n+tr*kn,Hn=Xt[4],Ln=Xt[5],Fn=Xt[6],tr=Xt[7],at[4]=Hn*ue+Ln*me+Fn*bn+tr*Tn,at[5]=Hn*Le+Ln*Ue+Fn*An+tr*mn,at[6]=Hn*Fe+Ln*Ve+Fn*hn+tr*Zn,at[7]=Hn*ve+Ln*vn+Fn*_n+tr*kn,Hn=Xt[8],Ln=Xt[9],Fn=Xt[10],tr=Xt[11],at[8]=Hn*ue+Ln*me+Fn*bn+tr*Tn,at[9]=Hn*Le+Ln*Ue+Fn*An+tr*mn,at[10]=Hn*Fe+Ln*Ve+Fn*hn+tr*Zn,at[11]=Hn*ve+Ln*vn+Fn*_n+tr*kn,Hn=Xt[12],Ln=Xt[13],Fn=Xt[14],tr=Xt[15],at[12]=Hn*ue+Ln*me+Fn*bn+tr*Tn,at[13]=Hn*Le+Ln*Ue+Fn*An+tr*mn,at[14]=Hn*Fe+Ln*Ve+Fn*hn+tr*Zn,at[15]=Hn*ve+Ln*vn+Fn*_n+tr*kn,at};function Ge(at){for(var ht=[],Xt=1;Xt<arguments.length;Xt++)ht[Xt-1]=arguments[Xt];return at?ht.reduce(function(ue,Le){return function(Fe){return Le(ue(Fe))}},at):Dt}function un(at){return at instanceof Float32Array||at instanceof Array}function Te(at,ht,Xt){for(;at<ht;)at+=2*Math.PI;for(;Xt<at;)at-=2*Math.PI;return at}nt=new Ft(3),Ft!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0),nt=new Ft(4),Ft!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0,nt[3]=0);function Vt(ve,ht,Xt,ue,Le){var Fe=(ve=st(ve,2))[0],ve=ve[1],me=Pt();return Fe=[Fe,ve],(ve=me)[0]=1,ve[1]=0,ve[2]=0,ve[3]=0,ve[4]=1,ve[5]=0,ve[6]=Fe[0],ve[7]=Fe[1],ve[8]=1,ve}function J(at,...ht){return ht.reduce((Xt,ue)=>Le=>Xt(ue(Le)),at)}function ce(at,ht){return ht-at?Xt=>(Xt-at)/(ht-at):Xt=>.5}const Gt=Math.sqrt(50),ke=Math.sqrt(10),Ie=Math.sqrt(2);function B(at,ht,Xt){return ht=(ht-at)/Math.max(0,Xt),at=Math.floor(Math.log(ht)/Math.LN10),Xt=ht/Fi(10,at),0<=at?(Xt>=Gt?10:Xt>=ke?5:Xt>=Ie?2:1)*Fi(10,at):-Fi(10,-at)/(Xt>=Gt?10:Xt>=ke?5:Xt>=Ie?2:1)}const Ct=(at,ht,Xt=5)=>{at=[at,ht];let ue=0,Le=at.length-1,Fe=at[ue],ve=at[Le],me;return ve<Fe&&([Fe,ve]=[ve,Fe],[ue,Le]=[Le,ue]),0<(me=B(Fe,ve,Xt))?(Fe=Math.floor(Fe/me)*me,ve=Math.ceil(ve/me)*me,me=B(Fe,ve,Xt)):me<0&&(Fe=Math.ceil(Fe*me)/me,ve=Math.floor(ve*me)/me,me=B(Fe,ve,Xt)),0<me?(at[ue]=Math.floor(Fe/me)*me,at[Le]=Math.ceil(ve/me)*me):me<0&&(at[ue]=Math.ceil(Fe*me)/me,at[Le]=Math.floor(ve*me)/me),at};function G(at){return at!=null&&!Number.isNaN(at)}function Mt(at,ht){return Xt=>{Xt.prototype.rescale=function(){this.initRange(),this.nice();var[ue]=this.chooseTransforms();this.composeOutput(ue,this.chooseClamp(ue))},Xt.prototype.initRange=function(){var ue=this.options.interpolator;this.options.range=at(ue)},Xt.prototype.composeOutput=function(ue,Le){var Fe,{domain:me,interpolator:ve,round:Ue}=this.getOptions(),me=ht(me.map(ue)),Ue=Ue?(Fe=ve,Ve=>(Ve=Fe(Ve),ft(Ve)?Math.round(Ve):Ve)):ve;this.output=J(Ue,me,Le,ue)},Xt.prototype.invert=void 0}}var Et,nt={exports:{}},V={exports:{}},U=function(at){return!(!at||typeof at=="string")&&(at instanceof Array||Array.isArray(at)||0<=at.length&&(at.splice instanceof Function||Object.getOwnPropertyDescriptor(at,at.length-1)&&at.constructor.name!=="String"))},it=Array.prototype.concat,te=Array.prototype.slice,he=V.exports=function(at){for(var ht=[],Xt=0,ue=at.length;Xt<ue;Xt++){var Le=at[Xt];U(Le)?ht=it.call(ht,te.call(Le)):ht.push(Le)}return ht},xt=(he.wrap=function(at){return function(){return at(he(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),ee=V.exports,qt=Object.hasOwnProperty,pe=Object.create(null);for(Et in xt)qt.call(xt,Et)&&(pe[xt[Et]]=Et);var Ce=nt.exports={to:{},get:{}};function vt(at,ht,Xt){return Math.min(Math.max(ht,at),Xt)}function K(at){return at=Math.round(at).toString(16).toUpperCase(),at.length<2?"0"+at:at}Ce.get=function(at){var ht,Xt;switch(at.substring(0,3).toLowerCase()){case"hsl":ht=Ce.get.hsl(at),Xt="hsl";break;case"hwb":ht=Ce.get.hwb(at),Xt="hwb";break;default:ht=Ce.get.rgb(at),Xt="rgb"}return ht?{model:Xt,value:ht}:null},Ce.get.rgb=function(at){if(!at)return null;var ht,Xt,ue,Le=[0,0,0,1];if(ht=at.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(ue=ht[2],ht=ht[1],Xt=0;Xt<3;Xt++){var Fe=2*Xt;Le[Xt]=parseInt(ht.slice(Fe,2+Fe),16)}ue&&(Le[3]=parseInt(ue,16)/255)}else if(ht=at.match(/^#([a-f0-9]{3,4})$/i)){for(ue=(ht=ht[1])[3],Xt=0;Xt<3;Xt++)Le[Xt]=parseInt(ht[Xt]+ht[Xt],16);ue&&(Le[3]=parseInt(ue+ue,16)/255)}else{if(ht=at.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(Xt=0;Xt<3;Xt++)Le[Xt]=parseInt(ht[Xt+1],0);else{if(!(ht=at.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(ht=at.match(/^(\w+)$/))?ht[1]==="transparent"?[0,0,0,0]:qt.call(xt,ht[1])?((Le=xt[ht[1]])[3]=1,Le):null:null;for(Xt=0;Xt<3;Xt++)Le[Xt]=Math.round(2.55*parseFloat(ht[Xt+1]))}ht[4]&&(ht[5]?Le[3]=.01*parseFloat(ht[4]):Le[3]=parseFloat(ht[4]))}for(Xt=0;Xt<3;Xt++)Le[Xt]=vt(Le[Xt],0,255);return Le[3]=vt(Le[3],0,1),Le},Ce.get.hsl=function(at){var ht;return(at=at&&at.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(ht=parseFloat(at[4]),[(parseFloat(at[1])%360+360)%360,vt(parseFloat(at[2]),0,100),vt(parseFloat(at[3]),0,100),vt(isNaN(ht)?1:ht,0,1)]):null},Ce.get.hwb=function(at){var ht;return(at=at&&at.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(ht=parseFloat(at[4]),[(parseFloat(at[1])%360+360)%360,vt(parseFloat(at[2]),0,100),vt(parseFloat(at[3]),0,100),vt(isNaN(ht)?1:ht,0,1)]):null},Ce.to.hex=function(){var at=ee(arguments);return"#"+K(at[0])+K(at[1])+K(at[2])+(at[3]<1?K(Math.round(255*at[3])):"")},Ce.to.rgb=function(){var at=ee(arguments);return at.length<4||at[3]===1?"rgb("+Math.round(at[0])+", "+Math.round(at[1])+", "+Math.round(at[2])+")":"rgba("+Math.round(at[0])+", "+Math.round(at[1])+", "+Math.round(at[2])+", "+at[3]+")"},Ce.to.rgb.percent=function(){var at=ee(arguments),ht=Math.round(at[0]/255*100),Xt=Math.round(at[1]/255*100),ue=Math.round(at[2]/255*100);return at.length<4||at[3]===1?"rgb("+ht+"%, "+Xt+"%, "+ue+"%)":"rgba("+ht+"%, "+Xt+"%, "+ue+"%, "+at[3]+")"},Ce.to.hsl=function(){var at=ee(arguments);return at.length<4||at[3]===1?"hsl("+at[0]+", "+at[1]+"%, "+at[2]+"%)":"hsla("+at[0]+", "+at[1]+"%, "+at[2]+"%, "+at[3]+")"},Ce.to.hwb=function(){var at=ee(arguments),ht="";return 4<=at.length&&at[3]!==1&&(ht=", "+at[3]),"hwb("+at[0]+", "+at[1]+"%, "+at[2]+"%"+ht+")"},Ce.to.keyword=function(at){return pe[at.slice(0,3)]};var kt=nt.exports;function le(at,ht,Xt){let ue=Xt;return ue<0&&(ue+=1),1<ue&&--ue,ue<1/6?at+6*(ht-at)*ue:ue<.5?ht:ue<2/3?at+(ht-at)*(2/3-ue)*6:at}function ut(Le){var ht,Xt,ue,Le=kt.get(Le);return Le?({model:Le,value:ht}=Le,Le==="rgb"?ht:Le==="hsl"?(ht=(Le=ht)[0]/360,Xt=Le[1]/100,ue=Le[2]/100,Le=Le[3],Xt==0?[255*ue,255*ue,255*ue,Le]:[255*le(Xt=2*ue-(ue=ue<.5?ue*(1+Xt):ue+Xt-ue*Xt),ue,ht+1/3),255*le(Xt,ue,ht),255*le(Xt,ue,ht-1/3),Le]):null):null}const Tt=(at,ht)=>Xt=>at*(1-Xt)+ht*Xt,ae=(at,ht)=>{if(typeof at=="number"&&typeof ht=="number")return Tt(at,ht);if(typeof at!="string"||typeof ht!="string")return()=>at;{var Xt=at,ue=ht;const Le=ut(Xt),Fe=ut(ue);return Le===null||Fe===null?Le?()=>Xt:()=>ue:ve=>{var me=new Array(4);for(let _n=0;_n<4;_n+=1){var Ue=Le[_n],Ve=Fe[_n];me[_n]=Ue*(1-ve)+Ve*ve}var[vn,bn,An,hn]=me;return`rgba(${Math.round(vn)}, ${Math.round(bn)}, ${Math.round(An)}, ${hn})`}}},Y=(at,ht)=>{const Xt=Tt(at,ht);return ue=>Math.round(Xt(ue))};function I({map:at,initKey:ht},Xt){return ht=ht(Xt),at.has(ht)?at.get(ht):Xt}function Yt(at){return typeof at=="object"?at.valueOf():at}class T extends Map{constructor(ht){if(super(),this.map=new Map,this.initKey=Yt,ht!==null)for(var[Xt,ue]of ht)this.set(Xt,ue)}get(ht){return super.get(I({map:this.map,initKey:this.initKey},ht))}has(ht){return super.has(I({map:this.map,initKey:this.initKey},ht))}set(ht,Xt){return super.set(([{map:ht,initKey:ue},Le]=[{map:this.map,initKey:this.initKey},ht],ue=ue(Le),ht.has(ue)?ht.get(ue):(ht.set(ue,Le),Le)),Xt);var ue,Le}delete(ht){return super.delete(([{map:ht,initKey:Xt},ue]=[{map:this.map,initKey:this.initKey},ht],Xt=Xt(ue),ht.has(Xt)&&(ue=ht.get(Xt),ht.delete(Xt)),ue));var Xt,ue}}class F{constructor(ht){this.options=Q({},this.getDefaultOptions()),this.update(ht)}getOptions(){return this.options}update(ht={}){this.options=Q({},this.options,ht),this.rescale(ht)}rescale(ht){}}const Lt=Symbol("defaultUnknown");function Wt(at,ht,Xt){for(let ue=0;ue<ht.length;ue+=1)at.has(ht[ue])||at.set(Xt(ht[ue]),ue)}function ie(ht){var{value:ht,from:Xt,to:ue,mapper:Le,notFoundReturn:Fe}=ht;let ve=Le.get(ht);if(ve===void 0){if(Fe!==Lt)return Fe;ve=Xt.push(ht)-1,Le.set(ht,ve)}return ue[ve%ue.length]}function be(at){return at instanceof Date?ht=>""+ht:typeof at=="object"?ht=>JSON.stringify(ht):ht=>ht}class Ae extends F{getDefaultOptions(){return{domain:[],range:[],unknown:Lt}}constructor(ht){super(ht)}map(ht){return this.domainIndexMap.size===0&&Wt(this.domainIndexMap,this.getDomain(),this.domainKey),ie({value:this.domainKey(ht),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(ht){return this.rangeIndexMap.size===0&&Wt(this.rangeIndexMap,this.getRange(),this.rangeKey),ie({value:this.rangeKey(ht),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(ht){var[Xt]=this.options.domain,[ue]=this.options.range;this.domainKey=be(Xt),this.rangeKey=be(ue),this.rangeIndexMap?(ht&&!ht.range||this.rangeIndexMap.clear(),ht&&!ht.domain&&!ht.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new Ae(this.options)}getRange(){return this.options.range}getDomain(){var ht,Xt;return this.sortedDomain||({domain:ht,compare:Xt}=this.options,this.sortedDomain=Xt?[...ht].sort(Xt):ht),this.sortedDomain}}function we(mn){const{domain:ht,range:Xt,paddingOuter:ue,paddingInner:Le,flex:Fe,round:ve,align:me}=mn;var Ue=ht.length,hn=0<(hn=(mn=Ue)-(Ve=Fe).length)?[...Ve,...new Array(hn).fill(1)]:hn<0?Ve.slice(0,mn):Ve,[mn,Ve]=Xt,Ve=Ve-mn,Tn=Ve/(2/Ue*ue+1-1/Ue*Le);const vn=Tn*Le/Ue;Tn-=Ue*vn;const bn=function(Ln){const Fn=Math.min(...Ln);return Ln.map(tr=>tr/Fn)}(hn),An=Tn/bn.reduce((Ln,Fn)=>Ln+Fn);var hn=new T(ht.map((Ln,Fn)=>(Fn=bn[Fn]*An,[Ln,ve?Math.floor(Fn):Fn]))),_n=new T(ht.map((Ln,Fn)=>(Fn=bn[Fn]*An+vn,[Ln,ve?Math.floor(Fn):Fn]))),Tn=Array.from(_n.values()).reduce((Ln,Fn)=>Ln+Fn),mn=mn+(Ve-(Tn-Tn/Ue*Le))*me;let Zn=ve?Math.round(mn):mn;var kn=new Array(Ue);for(let Ln=0;Ln<Ue;Ln+=1){kn[Ln]=(Hn=Zn,Math.round(1e12*Hn)/1e12);var Hn=ht[Ln];Zn+=_n.get(Hn)}return{valueBandWidth:hn,valueStep:_n,adjustedRange:kn}}class $e extends Ae{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:Lt,flex:[]}}constructor(ht){super(ht)}clone(){return new $e(this.options)}getStep(ht){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:ht===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(ht)}getBandWidth(ht){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:ht===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(ht)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:ht,paddingInner:Xt}=this.options;return 0<ht?ht:Xt}getPaddingOuter(){var{padding:ht,paddingOuter:Xt}=this.options;return 0<ht?ht:Xt}rescale(){super.rescale();var{align:ue,domain:ht,range:Le,round:Fe,flex:Xt}=this.options,{adjustedRange:ue,valueBandWidth:Le,valueStep:Fe}=function(Ve){var me=Ve.domain;if((me=me.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((Ue=Ve.flex)==null||!Ue.length))return we(Ve);var{range:Ue,paddingOuter:Ve,paddingInner:vn,round:bn,align:An}=Ve;let hn,_n,Tn=Ue[0];return Ue=Ue[1]-Tn,hn=Ue/Math.max(1,2*Ve+(me-vn)),bn&&(hn=Math.floor(hn)),Tn+=(Ue-hn*(me-vn))*An,_n=hn*(1-vn),bn&&(Tn=Math.round(Tn),_n=Math.round(_n)),Ve=new Array(me).fill(0).map((mn,Zn)=>Tn+Zn*hn),{valueStep:hn,valueBandWidth:_n,adjustedRange:Ve}}({align:ue,range:Le,round:Fe,flex:Xt,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:ht});this.valueStep=Fe,this.valueBandWidth=Le,this.adjustedRange=ue}}const Xe=(at,ht,Xt)=>{let ue,Le,Fe=at,ve=ht;if(Fe===ve&&0<Xt)return[Fe];let me=B(Fe,ve,Xt);if(me===0||!Number.isFinite(me))return[];if(0<me){Fe=Math.ceil(Fe/me),ve=Math.floor(ve/me),Le=new Array(ue=Math.ceil(ve-Fe+1));for(let Ue=0;Ue<ue;Ue+=1)Le[Ue]=(Fe+Ue)*me}else{me=-me,Fe=Math.ceil(Fe*me),ve=Math.floor(ve*me),Le=new Array(ue=Math.ceil(ve-Fe+1));for(let Ue=0;Ue<ue;Ue+=1)Le[Ue]=(Fe+Ue)/me}return Le},Qe=(ue,Fe,Xt)=>{var[ue,Le]=ue,[Fe,ve]=Fe;let me,Ue;return J(Ue=ue<Le?(me=ce(ue,Le),Xt(Fe,ve)):(me=ce(Le,ue),Xt(ve,Fe)),me)},qe=(at,ht,Xt)=>{const ue=Math.min(at.length,ht.length)-1,Le=new Array(ue),Fe=new Array(ue);var ve=at[0]>at[ue],me=ve?[...at].reverse():at,Ue=ve?[...ht].reverse():ht;for(let Ve=0;Ve<ue;Ve+=1)Le[Ve]=ce(me[Ve],me[Ve+1]),Fe[Ve]=Xt(Ue[Ve],Ue[Ve+1]);return Ve=>{var vn=function(An,hn,_n,Tn,mn){let Zn=_n||0,kn=Tn||An.length;for(var Hn=mn||(Fn=>Fn);Zn<kn;){var Ln=Math.floor((Zn+kn)/2);Hn(An[Ln])>hn?kn=Ln:Zn=Ln+1}return Zn}(at,Ve,1,ue)-1,bn=Le[vn];return J(Fe[vn],bn)(Ve)}},Zt=(at,ht,Xt,ue)=>(2<Math.min(at.length,ht.length)?qe:Qe)(at,ht,ue?Y:Xt);class ne extends F{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Tt,tickCount:5}}map(ht){return G(ht)?this.output(ht):this.options.unknown}invert(ht){return G(ht)?this.input(ht):this.options.unknown}nice(){var ht,Xt,ue,Le;this.options.nice&&([ht,Xt,ue,...Le]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(ht,Xt,ue,...Le))}getTicks(){var ht=this.options.tickMethod,[Xt,ue,Le,...Fe]=this.getTickMethodOptions();return ht(Xt,ue,Le,...Fe)}getTickMethodOptions(){var{domain:ht,tickCount:Xt}=this.options;return[ht[0],ht[ht.length-1],Xt]}chooseNice(){return Ct}rescale(){this.nice();var[ht,Xt]=this.chooseTransforms();this.composeOutput(ht,this.chooseClamp(ht)),this.composeInput(ht,Xt,this.chooseClamp(Xt))}chooseClamp(ue){var{clamp:Xt,range:Le}=this.options,ue=this.options.domain.map(ue),Le=Math.min(ue.length,Le.length);if(Xt){Xt=ue[0],ue=ue[Le-1];const Fe=ue<Xt?ue:Xt,ve=ue<Xt?Xt:ue;return me=>Math.min(Math.max(Fe,me),ve)}return Dt}composeOutput(ht,Xt){var{domain:ve,range:ue,round:Le,interpolate:Fe}=this.options,ve=Zt(ve.map(ht),ue,Fe,Le);this.output=J(ve,Xt,ht)}composeInput(ht,Xt,ue){var{domain:Le,range:Fe}=this.options,Fe=Zt(Fe,Le.map(ht),Tt);this.input=J(Xt,ue,Fe)}}class se extends ne{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:ae,tickMethod:Xe,tickCount:5}}chooseTransforms(){return[Dt,Dt]}clone(){return new se(this.options)}}class fe extends $e{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:Lt,paddingInner:1,paddingOuter:0}}constructor(ht){super(ht)}getPaddingInner(){return 1}clone(){return new fe(this.options)}update(ht){super.update(ht)}getPaddingOuter(){return this.options.padding}}function tt(at,ht){for(var Xt=[],ue=0,Le=at.length;ue<Le;ue++)Xt.push(at[ue].substr(0,ht));return Xt}var D,V=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],nt=["January","February","March","April","May","June","July","August","September","October","November","December"],_t=tt(nt,3);(function(at){for(var ht=[],Xt=1;Xt<arguments.length;Xt++)ht[Xt-1]=arguments[Xt];for(var ue=0,Le=ht;ue<Le.length;ue++){var Fe,ve=Le[ue];for(Fe in ve)at[Fe]=ve[Fe]}})({},{dayNamesShort:tt(V,3),dayNames:V,monthNamesShort:_t,monthNames:nt,amPm:["am","pm"],DoFn:function(at){return at+["th","st","nd","rd"][3<at%10?0:(at-at%10!=10?1:0)*at%10]}});var Ot;let ge=D=class extends se{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Dt,tickMethod:Xe,tickCount:5}}constructor(at){super(at)}clone(){return new D(this.options)}};ge=D=function(at,ht,Xt,ue){var Le,Fe=arguments.length,ve=Fe<3?ht:ue===null?ue=Object.getOwnPropertyDescriptor(ht,Xt):ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ve=Reflect.decorate(at,ht,Xt,ue);else for(var me=at.length-1;0<=me;me--)(Le=at[me])&&(ve=(Fe<3?Le(ve):3<Fe?Le(ht,Xt,ve):Le(ht,Xt))||ve);return 3<Fe&&ve&&Object.defineProperty(ht,Xt,ve),ve}([Mt(function(at){return[at(0),at(1)]},ht=>{var[ht,Xt]=ht;return J(Tt(0,1),ce(ht,Xt))})],ge);let Ee=Ot=class extends se{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Dt,tickMethod:Xe,tickCount:5}}constructor(at){super(at)}clone(){return new Ot(this.options)}};Ee=Ot=function(at,ht,Xt,ue){var Le,Fe=arguments.length,ve=Fe<3?ht:ue===null?ue=Object.getOwnPropertyDescriptor(ht,Xt):ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ve=Reflect.decorate(at,ht,Xt,ue);else for(var me=at.length-1;0<=me;me--)(Le=at[me])&&(ve=(Fe<3?Le(ve):3<Fe?Le(ht,Xt,ve):Le(ht,Xt))||ve);return 3<Fe&&ve&&Object.defineProperty(ht,Xt,ve),ve}([Mt(function(at){return[at(0),at(.5),at(1)]},at=>{const[ht,Xt,ue]=at,Le=J(Tt(0,.5),ce(ht,Xt)),Fe=J(Tt(.5,1),ce(Xt,ue));return ve=>(ht>ue?ve<Xt?Fe:Le:ve<Xt?Le:Fe)(ve)})],Ee);function Be(at,ht,Xt,ue,Le){var Fe=new se({range:[ht,ht+ue]}),ve=new se({range:[Xt,Xt+Le]});return{transform:function(Ve){var Ve=st(Ve,2),Ue=Ve[0],Ve=Ve[1];return[Fe.map(Ue),ve.map(Ve)]},untransform:function(Ve){var Ve=st(Ve,2),Ue=Ve[0],Ve=Ve[1];return[Fe.invert(Ue),ve.invert(Ve)]}}}function je(at,ht,Xt,ue,Le){return(0,st(at,1)[0])(ht,Xt,ue,Le)}function fn(at,ht,Xt,ue,Le){return st(at,1)[0]}function Re(Ue,ht,Xt,ue,Le){var Fe=(Ue=st(Ue,4))[0],ve=Ue[1],me=Ue[2],Ue=Ue[3],Ve=new se({range:[me,Ue]}),vn=new se({range:[Fe,ve]}),bn=1<(me=Le/ue)?1:me,An=1<me?1/me:1;return{transform:function(Tn){var Tn=st(Tn,2),_n=Tn[0],Tn=Tn[1],_n=vn.map(_n),Tn=Ve.map(Tn);return[.5*(Tn*Math.cos(_n)*bn)+.5,.5*(Tn*Math.sin(_n)*An)+.5]},untransform:function(mn){var mn=st(mn,2),_n=mn[0],mn=mn[1],_n=2*(_n-.5)/bn,mn=2*(mn-.5)/An,Tn=Math.sqrt(Math.pow(_n,2)+Math.pow(mn,2)),mn=Te(Math.atan2(mn,_n),Fe,ve);return[vn.invert(mn),Ve.invert(Tn)]}}}function Ye(at,ht,Xt,ue,Le){return{transform:function(ve){var ve=st(ve,2),me=ve[0];return[ve[1],me]},untransform:function(ve){var ve=st(ve,2),me=ve[0];return[ve[1],me]}}}function cn(at){for(var ht=[],Xt=1;Xt<arguments.length;Xt++)ht[Xt-1]=arguments[Xt];return hr.apply(void 0,St([[-1,-1]],st(ht),!1))}function sn(at){for(var ht=[],Xt=1;Xt<arguments.length;Xt++)ht[Xt-1]=arguments[Xt];return hr.apply(void 0,St([[-1,1]],st(ht),!1))}function Mn(at){for(var ht=[],Xt=1;Xt<arguments.length;Xt++)ht[Xt-1]=arguments[Xt];return hr.apply(void 0,St([[1,-1]],st(ht),!1))}function Vn(ve,ht,Xt,ue,Le){var Fe,ve=st(ve,1)[0],me=Pt();return me=me,ve=ve,Fe=Math.sin(ve),ve=Math.cos(ve),me[0]=ve,me[1]=Fe,me[2]=0,me[3]=-Fe,me[4]=ve,me[5]=0,me[6]=0,me[7]=0,me[8]=1,me}function Un(at,ht,Xt,ue,Le){var Fe=(at=st(at,4))[0],ve=at[1],me=at[2],Ue=(at[3]-me)/(+ve/(2*Math.PI)+1),Ve=Ue/(2*Math.PI),vn=new se({range:[me,me+.99*Ue]}),bn=new se({range:[Fe,ve]}),An=1<(at=Le/ue)?1:at,hn=1<at?1/at:1;return{transform:function(mn){var mn=st(mn,2),Tn=mn[0],mn=mn[1],Tn=bn.map(Tn),mn=vn.map(mn);return[.5*(Math.cos(Tn)*(Ve*Tn+mn)*An)+.5,.5*(Math.sin(Tn)*(Ve*Tn+mn)*hn)+.5]},untransform:function(mn){var mn=st(mn,2),Zn=mn[0],mn=mn[1],Zn=2*(Zn-.5)/An,mn=2*(mn-.5)/hn,Tn=Math.sqrt(Math.pow(Zn,2)+Math.pow(mn,2)),mn=Te(Math.atan2(mn,Zn)+Math.floor(Tn/Ue)*Math.PI*2,Fe,ve),Zn=Tn-Ve*mn;return[bn.invert(mn),vn.invert(Zn)]}}}function Jn(Ue,ht,Xt,ue,Le){var Fe=(Ue=st(Ue,4))[0],ve=Ue[1],me=Ue[2],Ue=Ue[3],Ve=new se({range:[me,Ue]});return{transform:function(vn){for(var bn=[],An=vn.length,hn=new fe({domain:new Array(An).fill(0).map(function(Zn,kn){return kn}),range:[Fe,ve]}),_n=0;_n<An;_n++){var mn=vn[_n],Tn=hn.map(_n),mn=Ve.map(mn);bn.push(Tn,mn)}return bn},untransform:function(vn){for(var bn=[],An=0;An<vn.length;An+=2){var hn=vn[An+1];bn.push(Ve.invert(hn))}return bn}}}var hr=function(ve,ht,Xt,ue,Le){var ve=st(ve,2),Fe=ve[0],ve=ve[1],me=Pt();return Fe=[Fe,ve],(ve=me)[0]=Fe[0],ve[1]=0,ve[2]=0,ve[3]=0,ve[4]=Fe[1],ve[5]=0,ve[6]=0,ve[7]=0,ve[8]=1,ve};function Ir(at){return 1/Math.tan(at)}function Qr(at,ht,Xt,ue,Le){var Fe=Ir(st(at,1)[0]);return{transform:function(Ue){var Ue=st(Ue,2),me=Ue[0],Ue=Ue[1];return[me+Ue*Fe,Ue]},untransform:function(Ue){var Ue=st(Ue,2),me=Ue[0],Ue=Ue[1];return[me-Ue*Fe,Ue]}}}function Sr(at,ht,Xt,ue,Le){var Fe=Ir(st(at,1)[0]);return{transform:function(me){var me=st(me,2),Ue=me[0];return[Ue,me[1]+Ue*Fe]},untransform:function(me){var me=st(me,2),Ue=me[0];return[Ue,me[1]-Ue*Fe]}}}function Or(at,ht,Xt,me,ve){var Fe=at<ht,ve=(Fe?ht-me:ve-ht)||ve-me,me=Fe?-1:1;return me*ve*(Xt+1)/(Xt+ve/((at-ht)*me))+ht}function zr(at,ht,Xt,ue,ve){var Fe=at<ht,ve=(Fe?ht-ue:ve-ht)||ve-ue;return ve/(ve*(Xt+1)/(at-ht)-Xt*(Fe?-1:1))+ht}function ci(at,ht,Xt){return Xt?new se({range:[0,1],domain:[0,ht]}).map(at):at}function Ti(me,ht,Xt,ue,Le){var Fe=(me=st(me,3))[0],ve=me[1],me=me[2],Ue=ci(Fe,ue,me!==void 0&&me);return{transform:function(bn){var bn=st(bn,2),vn=bn[0],bn=bn[1];return[Or(vn,Ue,ve,0,1),bn]},untransform:function(bn){var bn=st(bn,2),vn=bn[0],bn=bn[1];return[zr(vn,Ue,ve,0,1),bn]}}}function Ci(me,ht,Xt,ue,Le){var Fe=(me=st(me,3))[0],ve=me[1],me=me[2],Ue=ci(Fe,Le,me!==void 0&&me);return{transform:function(Ve){return Ve=st(Ve,2),[Ve[0],Or(Ve[1],Ue,ve,0,1)]},untransform:function(Ve){return Ve=st(Ve,2),[Ve[0],zr(Ve[1],Ue,ve,0,1)]}}}function ri(Ve,ht,Xt,ue,Le){var Fe=(Ve=st(Ve,5))[0],ve=Ve[1],me=Ve[2],Ue=Ve[3],Ve=Ve[4],vn=ci(Fe,ue,Ve=Ve!==void 0&&Ve),bn=ci(ve,Le,Ve);return{transform:function(_n){var _n=st(_n,2),hn=_n[0],_n=_n[1];return[Or(hn,vn,me,0,1),Or(_n,bn,Ue,0,1)]},untransform:function(_n){var _n=st(_n,2),hn=_n[0],_n=_n[1];return[zr(hn,vn,me,0,1),zr(_n,bn,Ue,0,1)]}}}function Hi(Ve,ht,Xt,ue,Le){var Fe=(Ve=st(Ve,5))[0],ve=Ve[1],me=Ve[2],Ue=Ve[3],Ve=(Ve=Ve[4])!==void 0&&Ve,vn=new se({range:[0,ue]}),bn=new se({range:[0,Le]}),An=Ve?Fe:vn.map(Fe),hn=Ve?ve:bn.map(ve);return{transform:function(mn){var mn=st(mn,2),Tn=mn[0],mn=mn[1],Zn=vn.map(Tn)-An,kn=bn.map(mn)-hn,Hn=Math.sqrt(Zn*Zn+kn*kn);return me<Hn?[Tn,mn]:(Tn=Or(Hn,0,Ue,0,me),mn=Math.atan2(kn,Zn),Hn=An+Tn*Math.cos(mn),kn=hn+Tn*Math.sin(mn),[vn.invert(Hn),bn.invert(kn)])},untransform:function(mn){var mn=st(mn,2),Tn=mn[0],mn=mn[1],Zn=vn.map(Tn)-An,kn=bn.map(mn)-hn,Hn=Math.sqrt(Zn*Zn+kn*kn);return me<Hn?[Tn,mn]:(Tn=zr(Hn,0,Ue,0,me),mn=Math.atan2(kn,Zn),Hn=An+Tn*Math.cos(mn),kn=hn+Tn*Math.sin(mn),[vn.invert(Hn),bn.invert(kn)])}}}function fo(at,ht,Xt,ue,Le,Fe,ve){var me=new se({range:[ht,ht+Le]}),Ue=new se({range:[Xt,Xt+Fe]}),Ve=new se({range:[ue,ue+ve]});return{transform:function(hn){var hn=st(hn,3),bn=hn[0],An=hn[1],hn=hn[2];return[me.map(bn),Ue.map(An),Ve.map(hn)]},untransform:function(hn){var hn=st(hn,3),bn=hn[0],An=hn[1],hn=hn[2];return[me.invert(bn),Ue.invert(An),Ve.invert(hn)]}}}function es(vn,ht,Xt,ue,Le,Fe,ve){var me,Ue=(vn=st(vn,3))[0],Ve=vn[1],vn=vn[2];return me=Oe(),Ue=[Ue,Ve,vn],me[0]=1,me[1]=0,me[2]=0,me[3]=0,me[4]=0,me[5]=1,me[6]=0,me[7]=0,me[8]=0,me[9]=0,me[10]=1,me[11]=0,me[12]=Ue[0],me[13]=Ue[1],me[14]=Ue[2],me[15]=1,me}function so(at,ht,Xt,ue,Le,Fe,ve){return{transform:function(Ue){var Ue=st(Ue,3),Ve=Ue[0];return[Ue[1],Ve,Ue[2]]},untransform:function(Ue){var Ue=st(Ue,3),Ve=Ue[0];return[Ue[1],Ve,Ue[2]]}}}function va(vn,ht,Xt,ue,Le,Fe,ve){var me,Ue=(vn=st(vn,3))[0],Ve=vn[1],vn=vn[2];return me=Oe(),Ue=[Ue,Ve,vn],me[0]=Ue[0],me[1]=0,me[2]=0,me[3]=0,me[4]=0,me[5]=Ue[1],me[6]=0,me[7]=0,me[8]=0,me[9]=0,me[10]=Ue[2],me[11]=0,me[12]=0,me[13]=0,me[14]=0,me[15]=1,me}Yr.prototype.update=function(at){this.options=Q({},this.options,at),this.recoordinate()},Yr.prototype.clone=function(){return new Yr(this.options)},Yr.prototype.getOptions=function(){return this.options},Yr.prototype.clear=function(){this.update({transformations:[]})},Yr.prototype.getSize=function(){var at=this.options;return[at.width,at.height]},Yr.prototype.getCenter=function(){var at=this.options,ht=at.x,Xt=at.y;return[(2*ht+at.width)/2,(2*Xt+at.height)/2]},Yr.prototype.transform=function(){for(var at=[],ht=0;ht<arguments.length;ht++)at[ht]=arguments[ht];var Xt=this.options.transformations;return this.update({transformations:St(St([],st(Xt),!1),[St([],st(at),!1)],!1)}),this},Yr.prototype.map=function(at){return this.output(at)},Yr.prototype.invert=function(at){return this.input(at)},Yr.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},Yr.prototype.compose=function(at){function ht(Ln,Fn){var tr;me.push((Fn=Fn===void 0?!0:Fn)?(tr=Ln,function(di){for(var Mi=[],ti=0;ti<di.length-1;ti+=2){var Ni=[di[ti],di[ti+1]],Ni=tr(Ni);Mi.push.apply(Mi,St([],st(Ni),!1))}return Mi}):Ln)}var Xt,ue,Le=(at=at===void 0?!1:at)?St([],st(this.options.transformations),!1).reverse():this.options.transformations,Fe=at?function(Ln){return Ln.untransform}:function(Ln){return Ln.transform},ve=[],me=[];try{for(var Ue=yt(Le),Ve=Ue.next();!Ve.done;Ve=Ue.next()){var vn,bn,An,hn,_n,Tn,mn=st(Ve.value),Zn=mn[0],kn=mn.slice(1),Hn=this.transformers[Zn];Hn&&(bn=(vn=this.options).x,An=vn.y,hn=vn.width,_n=vn.height,un(Tn=Hn(St([],st(kn),!1),bn,An,hn,_n))?ve.push(Tn):(ve.length&&(ht(this.createMatrixTransform(ve,at)),ve.splice(0,ve.length)),ht(Fe(Tn)||Dt,Zn!=="parallel")))}}catch(Ln){Xt={error:Ln}}finally{try{Ve&&!Ve.done&&(ue=Ue.return)&&ue.call(Ue)}finally{if(Xt)throw Xt.error}}return ve.length&&ht(this.createMatrixTransform(ve,at)),Ge.apply(void 0,St([],st(me),!1))},Yr.prototype.createMatrixTransform=function(at,ht){var Xt,ue,Le,Fe,ve,me,Ue,Ve,vn,bn,An,hn,_n=Pt();return ht&&at.reverse(),at.forEach(function(Tn){return $t(_n,_n,Tn)}),ht&&(ht=at=_n,(hn=new Ft(9))[0]=ht[0],hn[1]=ht[1],hn[2]=ht[2],hn[3]=ht[3],hn[4]=ht[4],hn[5]=ht[5],hn[6]=ht[6],hn[7]=ht[7],hn[8]=ht[8],hn=(ht=hn)[0],Xt=ht[1],ue=ht[2],Le=ht[3],Fe=ht[4],ve=ht[5],me=ht[6],Ue=ht[7],Ve=(ht=ht[8])*Fe-ve*Ue,An=hn*Ve+Xt*(vn=-ht*Le+ve*me)+ue*(bn=Ue*Le-Fe*me))&&(at[0]=Ve*(An=1/An),at[1]=(-ht*Xt+ue*Ue)*An,at[2]=(ve*Xt-ue*Fe)*An,at[3]=vn*An,at[4]=(ht*hn-ue*me)*An,at[5]=(-ve*hn+ue*Le)*An,at[6]=bn*An,at[7]=(-Ue*hn+Xt*me)*An,at[8]=(Fe*hn-Xt*Le)*An),function(Fn){var mn,Zn,kn,Hn,Ln,Fn=[Fn[0],Fn[1],1];return kn=_n,Hn=(Zn=mn=Fn)[0],Ln=Zn[1],Zn=Zn[2],mn[0]=Hn*kn[0]+Ln*kn[3]+Zn*kn[6],mn[1]=Hn*kn[1]+Ln*kn[4]+Zn*kn[7],mn[2]=Hn*kn[2]+Ln*kn[5]+Zn*kn[8],[Fn[0],Fn[1]]}},V=Yr;function Yr(at){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:Be,translate:Vt,custom:je,matrix:fn,polar:Re,transpose:Ye,scale:hr,"shear.x":Qr,"shear.y":Sr,reflect:cn,"reflect.x":sn,"reflect.y":Mn,rotate:Vn,helix:Un,parallel:Jn,fisheye:ri,"fisheye.x":Ti,"fisheye.y":Ci,"fisheye.circular":Hi},this.update(at)}Jr.prototype.update=function(at){this.options=Q({},this.options,at),this.recoordinate()},Jr.prototype.clone=function(){return new Jr(this.options)},Jr.prototype.getOptions=function(){return this.options},Jr.prototype.clear=function(){this.update({transformations:[]})},Jr.prototype.getSize=function(){var at=this.options;return[at.width,at.height,at.depth]},Jr.prototype.getCenter=function(){var at=this.options,ht=at.x,Xt=at.y,ue=at.z;return[(2*ht+at.width)/2,(2*Xt+at.height)/2,(2*ue+at.depth)/2]},Jr.prototype.transform=function(){for(var at=[],ht=0;ht<arguments.length;ht++)at[ht]=arguments[ht];var Xt=this.options.transformations;return this.update({transformations:St(St([],st(Xt),!1),[St([],st(at),!1)],!1)}),this},Jr.prototype.map=function(at){return this.output(at)},Jr.prototype.invert=function(at){return this.input(at)},Jr.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},Jr.prototype.compose=function(at){function ht(tr,di){var Mi;me.push((di=di===void 0?!0:di)?(Mi=tr,function(ti){for(var Ni=[],yi=0;yi<ti.length-1;yi+=3){var wt=[ti[yi],ti[yi+1],ti[yi+2]],wt=Mi(wt);Ni.push.apply(Ni,St([],st(wt),!1))}return Ni}):tr)}var Xt,ue,Le=(at=at===void 0?!1:at)?St([],st(this.options.transformations),!1).reverse():this.options.transformations,Fe=at?function(tr){return tr.untransform}:function(tr){return tr.transform},ve=[],me=[];try{for(var Ue=yt(Le),Ve=Ue.next();!Ve.done;Ve=Ue.next()){var vn,bn,An,hn,_n,Tn,mn,Zn,kn=st(Ve.value),Hn=kn[0],Ln=kn.slice(1),Fn=this.transformers[Hn];Fn&&(bn=(vn=this.options).x,An=vn.y,hn=vn.z,_n=vn.width,Tn=vn.height,mn=vn.depth,un(Zn=Fn(St([],st(Ln),!1),bn,An,hn,_n,Tn,mn))?ve.push(Zn):(ve.length&&(ht(this.createMatrixTransform(ve,at)),ve.splice(0,ve.length)),ht(Fe(Zn)||Dt,!0)))}}catch(tr){Xt={error:tr}}finally{try{Ve&&!Ve.done&&(ue=Ue.return)&&ue.call(Ue)}finally{if(Xt)throw Xt.error}}return ve.length&&ht(this.createMatrixTransform(ve,at)),Ge.apply(void 0,St([],st(me),!1))},Jr.prototype.createMatrixTransform=function(at,ht){var Xt,ue,Le,Fe,ve,me,Ue,Ve,vn,bn,An,hn,_n,Tn,mn,Zn,kn,Hn,Ln,Fn,tr,di,Mi,ti,Ni,yi,wt,Bt,_e=Oe();return ht&&at.reverse(),at.forEach(function(tn){return De(_e,_e,tn)}),ht&&(ht=at=_e,(Bt=new Ft(16))[0]=ht[0],Bt[1]=ht[1],Bt[2]=ht[2],Bt[3]=ht[3],Bt[4]=ht[4],Bt[5]=ht[5],Bt[6]=ht[6],Bt[7]=ht[7],Bt[8]=ht[8],Bt[9]=ht[9],Bt[10]=ht[10],Bt[11]=ht[11],Bt[12]=ht[12],Bt[13]=ht[13],Bt[14]=ht[14],Bt[15]=ht[15],Bt=(ht=Bt)[0],Xt=ht[1],ue=ht[2],Le=ht[3],Fe=ht[4],ve=ht[5],me=ht[6],Ue=ht[7],Ve=ht[8],vn=ht[9],bn=ht[10],An=ht[11],hn=ht[12],_n=ht[13],Tn=ht[14],ht=ht[15],wt=(mn=Bt*ve-Xt*Fe)*(yi=bn*ht-An*Tn)-(Zn=Bt*me-ue*Fe)*(Ni=vn*ht-An*_n)+(kn=Bt*Ue-Le*Fe)*(ti=vn*Tn-bn*_n)+(Hn=Xt*me-ue*ve)*(Mi=Ve*ht-An*hn)-(Ln=Xt*Ue-Le*ve)*(di=Ve*Tn-bn*hn)+(Fn=ue*Ue-Le*me)*(tr=Ve*_n-vn*hn))&&(at[0]=(ve*yi-me*Ni+Ue*ti)*(wt=1/wt),at[1]=(ue*Ni-Xt*yi-Le*ti)*wt,at[2]=(_n*Fn-Tn*Ln+ht*Hn)*wt,at[3]=(bn*Ln-vn*Fn-An*Hn)*wt,at[4]=(me*Mi-Fe*yi-Ue*di)*wt,at[5]=(Bt*yi-ue*Mi+Le*di)*wt,at[6]=(Tn*kn-hn*Fn-ht*Zn)*wt,at[7]=(Ve*Fn-bn*kn+An*Zn)*wt,at[8]=(Fe*Ni-ve*Mi+Ue*tr)*wt,at[9]=(Xt*Mi-Bt*Ni-Le*tr)*wt,at[10]=(hn*Ln-_n*kn+ht*mn)*wt,at[11]=(vn*kn-Ve*Ln-An*mn)*wt,at[12]=(ve*di-Fe*ti-me*tr)*wt,at[13]=(Bt*ti-Xt*di+ue*tr)*wt,at[14]=(_n*Zn-hn*Hn-Tn*mn)*wt,at[15]=(Ve*Hn-vn*Zn+bn*mn)*wt),function(ai){var gn,Cn,Wn,Wr,ei,Er,ai=[ai[0],ai[1],ai[2],1];return Wn=_e,Wr=(Cn=gn=ai)[0],ei=Cn[1],Er=Cn[2],Cn=Cn[3],gn[0]=Wn[0]*Wr+Wn[4]*ei+Wn[8]*Er+Wn[12]*Cn,gn[1]=Wn[1]*Wr+Wn[5]*ei+Wn[9]*Er+Wn[13]*Cn,gn[2]=Wn[2]*Wr+Wn[6]*ei+Wn[10]*Er+Wn[14]*Cn,gn[3]=Wn[3]*Wr+Wn[7]*ei+Wn[11]*Er+Wn[15]*Cn,[ai[0],ai[1],ai[2]]}},_t=Jr;function Jr(at){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:fo,translate3D:es,scale3D:va,transpose3D:so},this.update(at)}k.Coordinate=V,k.Coordinate3D=_t,Object.defineProperty(k,"__esModule",{value:!0})})},90857:function(Me){"use strict";var de=Object.prototype.hasOwnProperty,k="~";function yt(){}Object.create&&(yt.prototype=Object.create(null),new yt().__proto__||(k=!1));function st(Qt,Ut,zt){this.fn=Qt,this.context=Ut,this.once=zt||!1}function St(Qt,Ut,zt,ft,re){if(typeof zt!="function")throw new TypeError("The listener must be a function");var q=new st(zt,ft||Qt,re),Q=k?k+Ut:Ut;return Qt._events[Q]?Qt._events[Q].fn?Qt._events[Q]=[Qt._events[Q],q]:Qt._events[Q].push(q):(Qt._events[Q]=q,Qt._eventsCount++),Qt}function Kt(Qt,Ut){--Qt._eventsCount===0?Qt._events=new yt:delete Qt._events[Ut]}function et(){this._events=new yt,this._eventsCount=0}et.prototype.eventNames=function(){var Ut=[],zt,ft;if(this._eventsCount===0)return Ut;for(ft in zt=this._events)de.call(zt,ft)&&Ut.push(k?ft.slice(1):ft);return Object.getOwnPropertySymbols?Ut.concat(Object.getOwnPropertySymbols(zt)):Ut},et.prototype.listeners=function(Ut){var zt=k?k+Ut:Ut,ft=this._events[zt];if(!ft)return[];if(ft.fn)return[ft.fn];for(var re=0,q=ft.length,Q=new Array(q);re<q;re++)Q[re]=ft[re].fn;return Q},et.prototype.listenerCount=function(Ut){var zt=k?k+Ut:Ut,ft=this._events[zt];return ft?ft.fn?1:ft.length:0},et.prototype.emit=function(Ut,zt,ft,re,q,Q){var Dt=k?k+Ut:Ut;if(!this._events[Dt])return!1;var At=this._events[Dt],Ft=arguments.length,Pt,$t;if(At.fn){switch(At.once&&this.removeListener(Ut,At.fn,void 0,!0),Ft){case 1:return At.fn.call(At.context),!0;case 2:return At.fn.call(At.context,zt),!0;case 3:return At.fn.call(At.context,zt,ft),!0;case 4:return At.fn.call(At.context,zt,ft,re),!0;case 5:return At.fn.call(At.context,zt,ft,re,q),!0;case 6:return At.fn.call(At.context,zt,ft,re,q,Q),!0}for($t=1,Pt=new Array(Ft-1);$t<Ft;$t++)Pt[$t-1]=arguments[$t];At.fn.apply(At.context,Pt)}else{var Oe=At.length,De;for($t=0;$t<Oe;$t++)switch(At[$t].once&&this.removeListener(Ut,At[$t].fn,void 0,!0),Ft){case 1:At[$t].fn.call(At[$t].context);break;case 2:At[$t].fn.call(At[$t].context,zt);break;case 3:At[$t].fn.call(At[$t].context,zt,ft);break;case 4:At[$t].fn.call(At[$t].context,zt,ft,re);break;default:if(!Pt)for(De=1,Pt=new Array(Ft-1);De<Ft;De++)Pt[De-1]=arguments[De];At[$t].fn.apply(At[$t].context,Pt)}}return!0},et.prototype.on=function(Ut,zt,ft){return St(this,Ut,zt,ft,!1)},et.prototype.once=function(Ut,zt,ft){return St(this,Ut,zt,ft,!0)},et.prototype.removeListener=function(Ut,zt,ft,re){var q=k?k+Ut:Ut;if(!this._events[q])return this;if(!zt)return Kt(this,q),this;var Q=this._events[q];if(Q.fn)Q.fn===zt&&(!re||Q.once)&&(!ft||Q.context===ft)&&Kt(this,q);else{for(var Dt=0,At=[],Ft=Q.length;Dt<Ft;Dt++)(Q[Dt].fn!==zt||re&&!Q[Dt].once||ft&&Q[Dt].context!==ft)&&At.push(Q[Dt]);At.length?this._events[q]=At.length===1?At[0]:At:Kt(this,q)}return this},et.prototype.removeAllListeners=function(Ut){var zt;return Ut?(zt=k?k+Ut:Ut,this._events[zt]&&Kt(this,zt)):(this._events=new yt,this._eventsCount=0),this},et.prototype.off=et.prototype.removeListener,et.prototype.addListener=et.prototype.on,et.prefixed=k,et.EventEmitter=et,Me.exports=et},38554:function(Me){"use strict";var de=Object.prototype.hasOwnProperty,k="~";function yt(){}Object.create&&(yt.prototype=Object.create(null),new yt().__proto__||(k=!1));function st(Qt,Ut,zt){this.fn=Qt,this.context=Ut,this.once=zt||!1}function St(Qt,Ut,zt,ft,re){if(typeof zt!="function")throw new TypeError("The listener must be a function");var q=new st(zt,ft||Qt,re),Q=k?k+Ut:Ut;return Qt._events[Q]?Qt._events[Q].fn?Qt._events[Q]=[Qt._events[Q],q]:Qt._events[Q].push(q):(Qt._events[Q]=q,Qt._eventsCount++),Qt}function Kt(Qt,Ut){--Qt._eventsCount===0?Qt._events=new yt:delete Qt._events[Ut]}function et(){this._events=new yt,this._eventsCount=0}et.prototype.eventNames=function(){var Ut=[],zt,ft;if(this._eventsCount===0)return Ut;for(ft in zt=this._events)de.call(zt,ft)&&Ut.push(k?ft.slice(1):ft);return Object.getOwnPropertySymbols?Ut.concat(Object.getOwnPropertySymbols(zt)):Ut},et.prototype.listeners=function(Ut){var zt=k?k+Ut:Ut,ft=this._events[zt];if(!ft)return[];if(ft.fn)return[ft.fn];for(var re=0,q=ft.length,Q=new Array(q);re<q;re++)Q[re]=ft[re].fn;return Q},et.prototype.listenerCount=function(Ut){var zt=k?k+Ut:Ut,ft=this._events[zt];return ft?ft.fn?1:ft.length:0},et.prototype.emit=function(Ut,zt,ft,re,q,Q){var Dt=k?k+Ut:Ut;if(!this._events[Dt])return!1;var At=this._events[Dt],Ft=arguments.length,Pt,$t;if(At.fn){switch(At.once&&this.removeListener(Ut,At.fn,void 0,!0),Ft){case 1:return At.fn.call(At.context),!0;case 2:return At.fn.call(At.context,zt),!0;case 3:return At.fn.call(At.context,zt,ft),!0;case 4:return At.fn.call(At.context,zt,ft,re),!0;case 5:return At.fn.call(At.context,zt,ft,re,q),!0;case 6:return At.fn.call(At.context,zt,ft,re,q,Q),!0}for($t=1,Pt=new Array(Ft-1);$t<Ft;$t++)Pt[$t-1]=arguments[$t];At.fn.apply(At.context,Pt)}else{var Oe=At.length,De;for($t=0;$t<Oe;$t++)switch(At[$t].once&&this.removeListener(Ut,At[$t].fn,void 0,!0),Ft){case 1:At[$t].fn.call(At[$t].context);break;case 2:At[$t].fn.call(At[$t].context,zt);break;case 3:At[$t].fn.call(At[$t].context,zt,ft);break;case 4:At[$t].fn.call(At[$t].context,zt,ft,re);break;default:if(!Pt)for(De=1,Pt=new Array(Ft-1);De<Ft;De++)Pt[De-1]=arguments[De];At[$t].fn.apply(At[$t].context,Pt)}}return!0},et.prototype.on=function(Ut,zt,ft){return St(this,Ut,zt,ft,!1)},et.prototype.once=function(Ut,zt,ft){return St(this,Ut,zt,ft,!0)},et.prototype.removeListener=function(Ut,zt,ft,re){var q=k?k+Ut:Ut;if(!this._events[q])return this;if(!zt)return Kt(this,q),this;var Q=this._events[q];if(Q.fn)Q.fn===zt&&(!re||Q.once)&&(!ft||Q.context===ft)&&Kt(this,q);else{for(var Dt=0,At=[],Ft=Q.length;Dt<Ft;Dt++)(Q[Dt].fn!==zt||re&&!Q[Dt].once||ft&&Q[Dt].context!==ft)&&At.push(Q[Dt]);At.length?this._events[q]=At.length===1?At[0]:At:Kt(this,q)}return this},et.prototype.removeAllListeners=function(Ut){var zt;return Ut?(zt=k?k+Ut:Ut,this._events[zt]&&Kt(this,zt)):(this._events=new yt,this._eventsCount=0),this},et.prototype.off=et.prototype.removeListener,et.prototype.addListener=et.prototype.on,et.prefixed=k,et.EventEmitter=et,Me.exports=et},11702:function(Me,de,k){"use strict";k.d(de,{TE:function(){return Kt},U4:function(){return Gt},Xk:function(){return ce},Y1:function(){return qe},_x:function(){return Ie},hE:function(){return ut},l5:function(){return it},ph:function(){return xt},vp:function(){return Oe},x4:function(){return $e}});var yt=k(74902),st=k(80450),St=k(31437);function Kt(Zt,ne,se,fe){var tt=Zt-se,D=ne-fe;return Math.sqrt(tt*tt+D*D)}function et(Zt,ne){var se=Math.min.apply(Math,(0,yt.Z)(Zt)),fe=Math.min.apply(Math,(0,yt.Z)(ne)),tt=Math.max.apply(Math,(0,yt.Z)(Zt)),D=Math.max.apply(Math,(0,yt.Z)(ne));return{x:se,y:fe,width:tt-se,height:D-fe}}function Qt(Zt){return(Zt+Math.PI*2)%(Math.PI*2)}function Ut(Zt,ne){var se=Math.abs(Zt);return ne>0?se:se*-1}function zt(Zt,ne,se,fe,tt,D){var V=se,nt=fe;if(V===0||nt===0)return{x:Zt,y:ne};for(var _t=tt-Zt,Ot=D-ne,ge=Math.abs(_t),Ee=Math.abs(Ot),Be=V*V,je=nt*nt,fn=Math.PI/4,Re=0,Ye=0,cn=0;cn<4;cn++){Re=V*Math.cos(fn),Ye=nt*Math.sin(fn);var sn=(Be-je)*Math.pow(Math.cos(fn),3)/V,Mn=(je-Be)*Math.pow(Math.sin(fn),3)/nt,Vn=Re-sn,Un=Ye-Mn,Jn=ge-sn,hr=Ee-Mn,Ir=Math.hypot(Un,Vn),Qr=Math.hypot(hr,Jn),Sr=Ir*Math.asin((Vn*hr-Un*Jn)/(Ir*Qr)),Or=Sr/Math.sqrt(Be+je-Re*Re-Ye*Ye);fn+=Or,fn=Math.min(Math.PI/2,Math.max(0,fn))}return{x:Zt+Ut(Re,_t),y:ne+Ut(Ye,Ot)}}function ft(Zt,ne,se,fe,tt,D,V,nt){return-1*se*Math.cos(tt)*Math.sin(nt)-fe*Math.sin(tt)*Math.cos(nt)}function re(Zt,ne,se,fe,tt,D,V,nt){return-1*se*Math.sin(tt)*Math.sin(nt)+fe*Math.cos(tt)*Math.cos(nt)}function q(Zt,ne,se){return Math.atan(-ne/Zt*Math.tan(se))}function Q(Zt,ne,se){return Math.atan(ne/(Zt*Math.tan(se)))}function Dt(Zt,ne,se,fe,tt,D){return se*Math.cos(tt)*Math.cos(D)-fe*Math.sin(tt)*Math.sin(D)+Zt}function At(Zt,ne,se,fe,tt,D){return se*Math.sin(tt)*Math.cos(D)+fe*Math.cos(tt)*Math.sin(D)+ne}function Ft(Zt,ne,se,fe){var tt=Math.atan2(fe*Zt,se*ne);return(tt+Math.PI*2)%(Math.PI*2)}function Pt(Zt,ne,se){return{x:Zt*Math.cos(se),y:ne*Math.sin(se)}}function $t(Zt,ne,se){var fe=Math.cos(se),tt=Math.sin(se);return[Zt*fe-ne*tt,Zt*tt+ne*fe]}function Oe(Zt,ne,se,fe,tt,D,V){for(var nt=q(se,fe,tt),_t=1/0,Ot=-1/0,ge=[D,V],Ee=-Math.PI*2;Ee<=Math.PI*2;Ee+=Math.PI){var Be=nt+Ee;D<V?D<Be&&Be<V&&ge.push(Be):V<Be&&Be<D&&ge.push(Be)}for(var je=0;je<ge.length;je++){var fn=Dt(Zt,ne,se,fe,tt,ge[je]);fn<_t&&(_t=fn),fn>Ot&&(Ot=fn)}for(var Re=Q(se,fe,tt),Ye=1/0,cn=-1/0,sn=[D,V],Mn=-Math.PI*2;Mn<=Math.PI*2;Mn+=Math.PI){var Vn=Re+Mn;D<V?D<Vn&&Vn<V&&sn.push(Vn):V<Vn&&Vn<D&&sn.push(Vn)}for(var Un=0;Un<sn.length;Un++){var Jn=At(Zt,ne,se,fe,tt,sn[Un]);Jn<Ye&&(Ye=Jn),Jn>cn&&(cn=Jn)}return{x:_t,y:Ye,width:Ot-_t,height:cn-Ye}}function De(Zt,ne,se,fe,tt,D,V,nt,_t){var Ot=$t(nt-Zt,_t-ne,-tt),ge=_slicedToArray(Ot,2),Ee=ge[0],Be=ge[1],je=zt(0,0,se,fe,Ee,Be),fn=Ft(se,fe,je.x,je.y);fn<D?je=Pt(se,fe,D):fn>V&&(je=Pt(se,fe,V));var Re=$t(je.x,je.y,tt);return{x:Re[0]+Zt,y:Re[1]+ne}}function Ge(Zt,ne,se,fe,tt,D,V,nt){var _t=(V-D)*nt+D,Ot=ft(Zt,ne,se,fe,tt,D,V,_t),ge=re(Zt,ne,se,fe,tt,D,V,_t);return Qt(Math.atan2(ge,Ot))}var un=1e-4;function Te(Zt,ne,se,fe,tt,D){var V=-1,nt=1/0,_t=[se,fe],Ot=20;D&&D>200&&(Ot=D/10);for(var ge=1/Ot,Ee=ge/10,Be=0;Be<=Ot;Be++){var je=Be*ge,fn=[tt.apply(void 0,(0,yt.Z)(Zt.concat([je]))),tt.apply(void 0,(0,yt.Z)(ne.concat([je])))],Re=Kt(_t[0],_t[1],fn[0],fn[1]);Re<nt&&(V=je,nt=Re)}if(V===0)return{x:Zt[0],y:ne[0]};if(V===1){var Ye=Zt.length;return{x:Zt[Ye-1],y:ne[Ye-1]}}nt=1/0;for(var cn=0;cn<32&&!(Ee<un);cn++){var sn=V-Ee,Mn=V+Ee,Vn=[tt.apply(void 0,(0,yt.Z)(Zt.concat([sn]))),tt.apply(void 0,(0,yt.Z)(ne.concat([sn])))],Un=Kt(_t[0],_t[1],Vn[0],Vn[1]);if(sn>=0&&Un<nt)V=sn,nt=Un;else{var Jn=[tt.apply(void 0,(0,yt.Z)(Zt.concat([Mn]))),tt.apply(void 0,(0,yt.Z)(ne.concat([Mn])))],hr=Kt(_t[0],_t[1],Jn[0],Jn[1]);Mn<=1&&hr<nt?(V=Mn,nt=hr):Ee*=.5}}return{x:tt.apply(void 0,(0,yt.Z)(Zt.concat([V]))),y:tt.apply(void 0,(0,yt.Z)(ne.concat([V])))}}function Vt(Zt,ne){for(var se=0,fe=Zt.length,tt=0;tt<fe;tt++){var D=Zt[tt],V=ne[tt],nt=Zt[(tt+1)%fe],_t=ne[(tt+1)%fe];se+=Kt(D,V,nt,_t)}return se/2}function J(Zt,ne,se,fe){return et([Zt,se],[ne,fe])}function ce(Zt,ne,se,fe){return Kt(Zt,ne,se,fe)}function Gt(Zt,ne,se,fe,tt){return{x:(1-tt)*Zt+tt*se,y:(1-tt)*ne+tt*fe}}function ke(Zt,ne,se,fe,tt,D){var V=(se-Zt)*(tt-Zt)+(fe-ne)*(D-ne);if(V<0)return Kt(Zt,ne,tt,D);var nt=(se-Zt)*(se-Zt)+(fe-ne)*(fe-ne);return V>nt?Kt(se,fe,tt,D):Ie(Zt,ne,se,fe,tt,D)}function Ie(Zt,ne,se,fe,tt,D){var V=[se-Zt,fe-ne];if(St.I6(V,[0,0]))return Math.sqrt((tt-Zt)*(tt-Zt)+(D-ne)*(D-ne));var nt=[-V[1],V[0]];St.Fv(nt,nt);var _t=[tt-Zt,D-ne];return Math.abs(St.AK(_t,nt))}function B(Zt,ne,se,fe){return Math.atan2(fe-ne,se-Zt)}function Ct(Zt,ne,se,fe,tt){var D=1-tt;return D*D*D*Zt+3*ne*tt*D*D+3*se*tt*tt*D+fe*tt*tt*tt}function G(Zt,ne,se,fe,tt){var D=1-tt;return 3*(D*D*(ne-Zt)+2*D*tt*(se-ne)+tt*tt*(fe-se))}function Mt(Zt,ne,se,fe){var tt=-3*Zt+9*ne-9*se+3*fe,D=6*Zt-12*ne+6*se,V=3*ne-3*Zt,nt=[],_t,Ot,ge;if((0,st.Z)(tt,0))(0,st.Z)(D,0)||(_t=-V/D,_t>=0&&_t<=1&&nt.push(_t));else{var Ee=D*D-4*tt*V;(0,st.Z)(Ee,0)?nt.push(-D/(2*tt)):Ee>0&&(ge=Math.sqrt(Ee),_t=(-D+ge)/(2*tt),Ot=(-D-ge)/(2*tt),_t>=0&&_t<=1&&nt.push(_t),Ot>=0&&Ot<=1&&nt.push(Ot))}return nt}function Et(Zt,ne,se,fe,tt,D,V,nt,_t){var Ot=Ct(Zt,se,tt,V,_t),ge=Ct(ne,fe,D,nt,_t),Ee=Gt(Zt,ne,se,fe,_t),Be=Gt(se,fe,tt,D,_t),je=Gt(tt,D,V,nt,_t),fn=Gt(Ee.x,Ee.y,Be.x,Be.y,_t),Re=Gt(Be.x,Be.y,je.x,je.y,_t);return[[Zt,ne,Ee.x,Ee.y,fn.x,fn.y,Ot,ge],[Ot,ge,Re.x,Re.y,je.x,je.y,V,nt]]}function U(Zt,ne,se,fe,tt,D,V,nt,_t){if(_t===0)return Vt([Zt,se,tt,V],[ne,fe,D,nt]);var Ot=Et(Zt,ne,se,fe,tt,D,V,nt,.5),ge=[].concat(_toConsumableArray(Ot[0]),[_t-1]),Ee=[].concat(_toConsumableArray(Ot[1]),[_t-1]);return U.apply(void 0,_toConsumableArray(ge))+U.apply(void 0,_toConsumableArray(Ee))}function it(Zt,ne,se,fe,tt,D,V,nt){for(var _t=[Zt,V],Ot=[ne,nt],ge=Mt(Zt,se,tt,V),Ee=Mt(ne,fe,D,nt),Be=0;Be<ge.length;Be++)_t.push(Ct(Zt,se,tt,V,ge[Be]));for(var je=0;je<Ee.length;je++)Ot.push(Ct(ne,fe,D,nt,Ee[je]));return et(_t,Ot)}function te(Zt,ne,se,fe,tt,D,V,nt){return U(Zt,ne,se,fe,tt,D,V,nt,3)}function he(Zt,ne,se,fe,tt,D,V,nt,_t,Ot,ge){return Te([Zt,se,tt,V],[ne,fe,D,nt],_t,Ot,Ct,ge)}function xt(Zt,ne,se,fe,tt,D,V,nt,_t,Ot,ge){var Ee=he(Zt,ne,se,fe,tt,D,V,nt,_t,Ot,ge);return Kt(Ee.x,Ee.y,_t,Ot)}function ee(Zt,ne,se,fe,tt,D,V,nt,_t){return{x:Ct(Zt,se,tt,V,_t),y:Ct(ne,fe,D,nt,_t)}}function qt(Zt,ne,se,fe,tt,D,V,nt,_t){var Ot=G(Zt,se,tt,V,_t),ge=G(ne,fe,D,nt,_t);return Qt(Math.atan2(ge,Ot))}function pe(Zt){for(var ne=0,se=[],fe=0;fe<Zt.length-1;fe++){var tt=Zt[fe],D=Zt[fe+1],V=Kt(tt[0],tt[1],D[0],D[1]),nt={from:tt,to:D,length:V};se.push(nt),ne+=V}return{segments:se,totalLength:ne}}function Ce(Zt){if(Zt.length<2)return 0;for(var ne=0,se=0;se<Zt.length-1;se++){var fe=Zt[se],tt=Zt[se+1];ne+=Kt(fe[0],fe[1],tt[0],tt[1])}return ne}function vt(Zt,ne){if(ne>1||ne<0||Zt.length<2)return null;var se=pe(Zt),fe=se.segments,tt=se.totalLength;if(tt===0)return{x:Zt[0][0],y:Zt[0][1]};for(var D=0,V=null,nt=0;nt<fe.length;nt++){var _t=fe[nt],Ot=_t.from,ge=_t.to,Ee=_t.length/tt;if(ne>=D&&ne<=D+Ee){var Be=(ne-D)/Ee;V=Gt(Ot[0],Ot[1],ge[0],ge[1],Be);break}D+=Ee}return V}function K(Zt,ne){if(ne>1||ne<0||Zt.length<2)return 0;for(var se=pe(Zt),fe=se.segments,tt=se.totalLength,D=0,V=0,nt=0;nt<fe.length;nt++){var _t=fe[nt],Ot=_t.from,ge=_t.to,Ee=_t.length/tt;if(ne>=D&&ne<=D+Ee){V=Math.atan2(ge[1]-Ot[1],ge[0]-Ot[0]);break}D+=Ee}return V}function kt(Zt,ne,se){for(var fe=1/0,tt=0;tt<Zt.length-1;tt++){var D=Zt[tt],V=Zt[tt+1],nt=ke(D[0],D[1],V[0],V[1],ne,se);nt<fe&&(fe=nt)}return fe}function le(Zt){for(var ne=[],se=[],fe=0;fe<Zt.length;fe++){var tt=Zt[fe];ne.push(tt[0]),se.push(tt[1])}return et(ne,se)}function ut(Zt){return Ce(Zt)}function Tt(Zt,ne){return vt(Zt,ne)}function ae(Zt,ne,se){return kt(Zt,ne,se)}function Y(Zt,ne){return K(Zt,ne)}function I(Zt){var ne=Zt.slice(0);return Zt.length&&ne.push(Zt[0]),ne}function Yt(Zt){return le(Zt)}function T(Zt){return Ce(I(Zt))}function F(Zt,ne){return vt(I(Zt),ne)}function Lt(Zt,ne,se){return kt(I(Zt),ne,se)}function Wt(Zt,ne){return K(I(Zt),ne)}function ie(Zt,ne,se,fe){var tt=1-fe;return tt*tt*Zt+2*fe*tt*ne+fe*fe*se}function be(Zt,ne,se){var fe=Zt+se-2*ne;if((0,st.Z)(fe,0))return[.5];var tt=(Zt-ne)/fe;return tt<=1&&tt>=0?[tt]:[]}function Ae(Zt,ne,se,fe,tt,D,V){var nt=ie(Zt,se,tt,V),_t=ie(ne,fe,D,V),Ot=Gt(Zt,ne,se,fe,V),ge=Gt(se,fe,tt,D,V);return[[Zt,ne,Ot.x,Ot.y,nt,_t],[nt,_t,ge.x,ge.y,tt,D]]}function we(Zt,ne,se,fe,tt,D,V){if(V===0)return(Kt(Zt,ne,se,fe)+Kt(se,fe,tt,D)+Kt(Zt,ne,tt,D))/2;var nt=Ae(Zt,ne,se,fe,tt,D,.5),_t=nt[0],Ot=nt[1];return _t.push(V-1),Ot.push(V-1),we.apply(void 0,_toConsumableArray(_t))+we.apply(void 0,_toConsumableArray(Ot))}function $e(Zt,ne,se,fe,tt,D){var V=be(Zt,se,tt)[0],nt=be(ne,fe,D)[0],_t=[Zt,tt],Ot=[ne,D];return V!==void 0&&_t.push(ie(Zt,se,tt,V)),nt!==void 0&&Ot.push(ie(ne,fe,D,nt)),et(_t,Ot)}function Xe(Zt,ne,se,fe,tt,D){return we(Zt,ne,se,fe,tt,D,3)}function Qe(Zt,ne,se,fe,tt,D,V,nt){return Te([Zt,se,tt],[ne,fe,D],V,nt,ie)}function qe(Zt,ne,se,fe,tt,D,V,nt){var _t=Qe(Zt,ne,se,fe,tt,D,V,nt);return Kt(_t.x,_t.y,V,nt)}},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(Me){try{let ft=function(){et||(et=!0,St())},re=function(){try{Kt.documentElement.doScroll("left")}catch(q){return void setTimeout(re,50)}ft()};var Ut=ft,zt=re,k=(k=document.getElementsByTagName("script"))[k.length-1],de=k.getAttribute("data-injectcss"),k=k.getAttribute("data-disable-injectsvg");if(!k){var yt,st,St,Kt,et,Qt=function(q,Q){Q.parentNode.insertBefore(q,Q)};if(de&&!Me.__iconfont__svg__cssinject__){Me.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(q){console&&console.log(q)}}yt=function(){var q,Q=document.createElement("div");Q.innerHTML=Me._iconfont_svg_string_3580659,(Q=Q.getElementsByTagName("svg")[0])&&(Q.setAttribute("aria-hidden","true"),Q.style.position="absolute",Q.style.width=0,Q.style.height=0,Q.style.overflow="hidden",Q=Q,(q=document.body).firstChild?Qt(Q,q.firstChild):q.appendChild(Q))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(yt,0):(st=function(){document.removeEventListener("DOMContentLoaded",st,!1),yt()},document.addEventListener("DOMContentLoaded",st,!1)):document.attachEvent&&(St=yt,Kt=Me.document,et=!1,re(),Kt.onreadystatechange=function(){Kt.readyState=="complete"&&(Kt.onreadystatechange=null,ft())})}}catch(ft){}}(window)},4771:function(){},81957:function(Me,de){"use strict";var k=function(yt,st,St){return yt<st?st:yt>St?St:yt};de.Z=k},5199:function(Me,de,k){"use strict";k.d(de,{Z:function(){return yt}});function yt(st){return Array.isArray(st)}},90134:function(Me,de,k){"use strict";var yt=k(95456),st=function(St){return(0,yt.Z)(St,"Boolean")};de.Z=st},45607:function(Me,de,k){"use strict";k.d(de,{Z:function(){return yt}});function yt(st){return typeof st=="function"}},95147:function(Me,de,k){"use strict";k.d(de,{Z:function(){return yt}});function yt(st){return st==null}},80450:function(Me,de,k){"use strict";k.d(de,{Z:function(){return st}});var yt=1e-5;function st(St,Kt,et){return et===void 0&&(et=yt),St===Kt||Math.abs(St-Kt)<et}},25897:function(Me,de,k){"use strict";k.d(de,{Z:function(){return yt}});function yt(st){return typeof st=="number"}},4637:function(Me,de){"use strict";de.Z=function(k){var yt=typeof k;return k!==null&&yt==="object"||yt==="function"}},76714:function(Me,de,k){"use strict";k.d(de,{Z:function(){return yt}});function yt(st){return typeof st=="string"}},95456:function(Me,de){"use strict";var k={}.toString,yt=function(st,St){return k.call(st)==="[object "+St+"]"};de.Z=yt},71154:function(Me,de){"use strict";var k=function(yt){return yt===void 0};de.Z=k},13882:function(Me,de,k){"use strict";k.d(de,{Z:function(){return yt}});function yt(st){if(!Array.isArray(st))return-1/0;var St=st.length;if(!St)return-1/0;for(var Kt=st[0],et=1;et<St;et++)Kt=Math.max(Kt,st[et]);return Kt}},71523:function(Me,de,k){"use strict";var yt=k(5199);de.Z=function(st){if((0,yt.Z)(st))return st.reduce(function(St,Kt){return Math.min(St,Kt)},st[0])}},8614:function(Me,de){"use strict";var k=function(yt,st){return(yt%st+st)%st};de.Z=k},75839:function(Me,de,k){"use strict";k.d(de,{Y:function(){return Q}});var yt=k(97582),st=k(64985);function St(Dt,At,Ft){if(Dt[Ft].length>7){Dt[Ft].shift();for(var Pt=Dt[Ft],$t=Ft;Pt.length;)At[Ft]="A",Dt.splice($t+=1,0,["C"].concat(Pt.splice(0,6)));Dt.splice(Ft,1)}}var Kt=k(4848),et=k(11013);function Qt(Dt){return(0,et.y)(Dt)&&Dt.every(function(At){var Ft=At[0];return"MC".includes(Ft)})}var Ut=k(74873);function zt(Dt,At,Ft,Pt,$t,Oe){var De=.3333333333333333,Ge=2/3;return[De*Dt+Ge*Ft,De*At+Ge*Pt,De*$t+Ge*Ft,De*Oe+Ge*Pt,$t,Oe]}var ft=k(17570),re=function(Dt,At,Ft,Pt){var $t=.5,Oe=(0,ft.k)([Dt,At],[Ft,Pt],$t);return(0,yt.ev)((0,yt.ev)([],Oe,!0),[Ft,Pt,Ft,Pt],!1)};function q(Dt,At){var Ft=Dt[0],Pt=Dt.slice(1).map(Number),$t=Pt[0],Oe=Pt[1],De,Ge=At.x1,un=At.y1,Te=At.x,Vt=At.y;switch("TQ".includes(Ft)||(At.qx=null,At.qy=null),Ft){case"M":return At.x=$t,At.y=Oe,Dt;case"A":return De=[Ge,un].concat(Pt),["C"].concat((0,Ut.W)(De[0],De[1],De[2],De[3],De[4],De[5],De[6],De[7],De[8],De[9]));case"Q":return At.qx=$t,At.qy=Oe,De=[Ge,un].concat(Pt),["C"].concat(zt(De[0],De[1],De[2],De[3],De[4],De[5]));case"L":return["C"].concat(re(Ge,un,$t,Oe));case"Z":return Ge===Te&&un===Vt?["C",Ge,un,Te,Vt,Te,Vt]:["C"].concat(re(Ge,un,Te,Vt));default:}return Dt}function Q(Dt,At){if(At===void 0&&(At=!1),Qt(Dt)){var Ft=[].concat(Dt);return At?[Ft,[]]:Ft}for(var Pt=(0,Kt.A)(Dt),$t=(0,yt.pi)({},st.z),Oe=[],De="",Ge=Pt.length,un,Te,Vt=[],J=0;J<Ge;J+=1){Pt[J]&&(De=Pt[J][0]),Oe[J]=De;var ce=q(Pt[J],$t);Pt[J]=ce,St(Pt,Oe,J),Ge=Pt.length,De==="Z"&&Vt.push(J),un=Pt[J],Te=un.length,$t.x1=+un[Te-2],$t.y1=+un[Te-1],$t.x2=+un[Te-4]||$t.x1,$t.y2=+un[Te-3]||$t.y1}return At?[Pt,Vt]:Pt}},18323:function(Me,de,k){"use strict";k.d(de,{R:function(){return yt}});var yt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0}},64985:function(Me,de,k){"use strict";k.d(de,{z:function(){return yt}});var yt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null}},74873:function(Me,de,k){"use strict";k.d(de,{W:function(){return st}});function yt(St,Kt,et){var Qt=St*Math.cos(et)-Kt*Math.sin(et),Ut=St*Math.sin(et)+Kt*Math.cos(et);return{x:Qt,y:Ut}}function st(St,Kt,et,Qt,Ut,zt,ft,re,q,Q){var Dt=St,At=Kt,Ft=et,Pt=Qt,$t=re,Oe=q,De=Math.PI*120/180,Ge=Math.PI/180*(+Ut||0),un=[],Te,Vt,J,ce,Gt;if(Q)Vt=Q[0],J=Q[1],ce=Q[2],Gt=Q[3];else{Te=yt(Dt,At,-Ge),Dt=Te.x,At=Te.y,Te=yt($t,Oe,-Ge),$t=Te.x,Oe=Te.y;var ke=(Dt-$t)/2,Ie=(At-Oe)/2,B=ke*ke/(Ft*Ft)+Ie*Ie/(Pt*Pt);B>1&&(B=Math.sqrt(B),Ft*=B,Pt*=B);var Ct=Ft*Ft,G=Pt*Pt,Mt=(zt===ft?-1:1)*Math.sqrt(Math.abs((Ct*G-Ct*Ie*Ie-G*ke*ke)/(Ct*Ie*Ie+G*ke*ke)));ce=Mt*Ft*Ie/Pt+(Dt+$t)/2,Gt=Mt*-Pt*ke/Ft+(At+Oe)/2,Vt=Math.asin(((At-Gt)/Pt*Math.pow(10,9)>>0)/Math.pow(10,9)),J=Math.asin(((Oe-Gt)/Pt*Math.pow(10,9)>>0)/Math.pow(10,9)),Vt=Dt<ce?Math.PI-Vt:Vt,J=$t<ce?Math.PI-J:J,Vt<0&&(Vt=Math.PI*2+Vt),J<0&&(J=Math.PI*2+J),ft&&Vt>J&&(Vt-=Math.PI*2),!ft&&J>Vt&&(J-=Math.PI*2)}var Et=J-Vt;if(Math.abs(Et)>De){var U=J,it=$t,te=Oe;J=Vt+De*(ft&&J>Vt?1:-1),$t=ce+Ft*Math.cos(J),Oe=Gt+Pt*Math.sin(J),un=st($t,Oe,Ft,Pt,Ut,0,ft,it,te,[J,U,ce,Gt])}Et=J-Vt;var he=Math.cos(Vt),xt=Math.sin(Vt),ee=Math.cos(J),qt=Math.sin(J),pe=Math.tan(Et/4),Ce=4/3*Ft*pe,vt=4/3*Pt*pe,K=[Dt,At],kt=[Dt+Ce*xt,At-vt*he],le=[$t+Ce*qt,Oe-vt*ee],ut=[$t,Oe];if(kt[0]=2*K[0]-kt[0],kt[1]=2*K[1]-kt[1],Q)return kt.concat(le,ut,un);un=kt.concat(le,ut,un);for(var Tt=[],ae=0,Y=un.length;ae<Y;ae+=1)Tt[ae]=ae%2?yt(un[ae-1],un[ae],Ge).y:yt(un[ae],un[ae+1],Ge).x;return Tt}},28659:function(Me,de,k){"use strict";k.d(de,{U:function(){return yt}});function yt(st){return st.map(function(St){return Array.isArray(St)?[].concat(St):St})}},4848:function(Me,de,k){"use strict";k.d(de,{A:function(){return un}});var yt=k(97582),st=k(11013),St=k(64985),Kt=k(41010),et=k(56346),Qt=k(18323);function Ut(Te){for(var Vt=Te.pathValue[Te.segmentStart],J=Vt.toLowerCase(),ce=Te.data;ce.length>=Qt.R[J]&&(J==="m"&&ce.length>2?(Te.segments.push([Vt].concat(ce.splice(0,2))),J="l",Vt=Vt==="m"?"l":"L"):Te.segments.push([Vt].concat(ce.splice(0,Qt.R[J]))),!!Qt.R[J]););}function zt(Te){var Vt=Te.index,J=Te.pathValue,ce=J.charCodeAt(Vt);if(ce===48){Te.param=0,Te.index+=1;return}if(ce===49){Te.param=1,Te.index+=1;return}Te.err='[path-util]: invalid Arc flag "'.concat(J[Vt],'", expecting 0 or 1 at index ').concat(Vt)}function ft(Te){return Te>=48&&Te<=57||Te===43||Te===45||Te===46}function re(Te){return Te>=48&&Te<=57}function q(Te){var Vt=Te.max,J=Te.pathValue,ce=Te.index,Gt=ce,ke=!1,Ie=!1,B=!1,Ct=!1,G;if(Gt>=Vt){Te.err="[path-util]: Invalid path value at index ".concat(Gt,', "pathValue" is missing param');return}if(G=J.charCodeAt(Gt),(G===43||G===45)&&(Gt+=1,G=J.charCodeAt(Gt)),!re(G)&&G!==46){Te.err="[path-util]: Invalid path value at index ".concat(Gt,', "').concat(J[Gt],'" is not a number');return}if(G!==46){if(ke=G===48,Gt+=1,G=J.charCodeAt(Gt),ke&&Gt<Vt&&G&&re(G)){Te.err="[path-util]: Invalid path value at index ".concat(ce,', "').concat(J[ce],'" illegal number');return}for(;Gt<Vt&&re(J.charCodeAt(Gt));)Gt+=1,Ie=!0;G=J.charCodeAt(Gt)}if(G===46){for(Ct=!0,Gt+=1;re(J.charCodeAt(Gt));)Gt+=1,B=!0;G=J.charCodeAt(Gt)}if(G===101||G===69){if(Ct&&!Ie&&!B){Te.err="[path-util]: Invalid path value at index ".concat(Gt,', "').concat(J[Gt],'" invalid float exponent');return}if(Gt+=1,G=J.charCodeAt(Gt),(G===43||G===45)&&(Gt+=1),Gt<Vt&&re(J.charCodeAt(Gt)))for(;Gt<Vt&&re(J.charCodeAt(Gt));)Gt+=1;else{Te.err="[path-util]: Invalid path value at index ".concat(Gt,', "').concat(J[Gt],'" invalid integer exponent');return}}Te.index=Gt,Te.param=+Te.pathValue.slice(ce,Gt)}function Q(Te){var Vt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return Te===10||Te===13||Te===8232||Te===8233||Te===32||Te===9||Te===11||Te===12||Te===160||Te>=5760&&Vt.includes(Te)}function Dt(Te){for(var Vt=Te.pathValue,J=Te.max;Te.index<J&&Q(Vt.charCodeAt(Te.index));)Te.index+=1}function At(Te){switch(Te|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Ft(Te){return(Te|32)===97}function Pt(Te){var Vt=Te.max,J=Te.pathValue,ce=Te.index,Gt=J.charCodeAt(ce),ke=Qt.R[J[ce].toLowerCase()];if(Te.segmentStart=ce,!At(Gt)){Te.err='[path-util]: Invalid path value "'.concat(J[ce],'" is not a path command');return}if(Te.index+=1,Dt(Te),Te.data=[],!ke){Ut(Te);return}for(;;){for(var Ie=ke;Ie>0;Ie-=1){if(Ft(Gt)&&(Ie===3||Ie===4)?zt(Te):q(Te),Te.err.length)return;Te.data.push(Te.param),Dt(Te),Te.index<Vt&&J.charCodeAt(Te.index)===44&&(Te.index+=1,Dt(Te))}if(Te.index>=Te.max||!ft(J.charCodeAt(Te.index)))break}Ut(Te)}var $t=function(){function Te(Vt){this.pathValue=Vt,this.segments=[],this.max=Vt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return Te}();function Oe(Te){if((0,et.n)(Te))return[].concat(Te);var Vt=new $t(Te);for(Dt(Vt);Vt.index<Vt.max&&!Vt.err.length;)Pt(Vt);return Vt.err?Vt.err:Vt.segments}function De(Te){if((0,Kt.b)(Te))return[].concat(Te);var Vt=Oe(Te),J=0,ce=0,Gt=0,ke=0;return Vt.map(function(Ie){var B=Ie.slice(1).map(Number),Ct=Ie[0],G=Ct.toUpperCase();if(Ct==="M")return J=B[0],ce=B[1],Gt=J,ke=ce,["M",J,ce];var Mt;if(Ct!==G)switch(G){case"A":Mt=[G,B[0],B[1],B[2],B[3],B[4],B[5]+J,B[6]+ce];break;case"V":Mt=[G,B[0]+ce];break;case"H":Mt=[G,B[0]+J];break;default:{var Et=B.map(function(it,te){return it+(te%2?ce:J)});Mt=[G].concat(Et)}}else Mt=[G].concat(B);var U=Mt.length;switch(G){case"Z":J=Gt,ce=ke;break;case"H":J=Mt[1];break;case"V":ce=Mt[1];break;default:J=Mt[U-2],ce=Mt[U-1],G==="M"&&(Gt=J,ke=ce)}return Mt})}function Ge(Te,Vt){var J=Te[0],ce=Vt.x1,Gt=Vt.y1,ke=Vt.x2,Ie=Vt.y2,B=Te.slice(1).map(Number),Ct=Te;if("TQ".includes(J)||(Vt.qx=null,Vt.qy=null),J==="H")Ct=["L",Te[1],Gt];else if(J==="V")Ct=["L",ce,Te[1]];else if(J==="S"){var G=ce*2-ke,Mt=Gt*2-Ie;Vt.x1=G,Vt.y1=Mt,Ct=["C",G,Mt].concat(B)}else if(J==="T"){var Et=ce*2-Vt.qx,U=Gt*2-Vt.qy;Vt.qx=Et,Vt.qy=U,Ct=["Q",Et,U].concat(B)}else if(J==="Q"){var it=B[0],te=B[1];Vt.qx=it,Vt.qy=te}return Ct}function un(Te){if((0,st.y)(Te))return[].concat(Te);for(var Vt=De(Te),J=(0,yt.pi)({},St.z),ce=0;ce<Vt.length;ce+=1){Vt[ce]=Ge(Vt[ce],J);var Gt=Vt[ce],ke=Gt.length;J.x1=+Gt[ke-2],J.y1=+Gt[ke-1],J.x2=+Gt[ke-4]||J.x1,J.y2=+Gt[ke-3]||J.y1}return Vt}},65850:function(Me,de,k){"use strict";k.d(de,{G:function(){return yt}});function yt(st){var St=st.slice(1).map(function(Kt,et,Qt){return et?Qt[et-1].slice(-2).concat(Kt.slice(1)):st[0].slice(1).concat(Kt.slice(1))}).map(function(Kt){return Kt.map(function(et,Qt){return Kt[Kt.length-Qt-2*(1-Qt%2)]})}).reverse();return[["M"].concat(St[0].slice(0,2))].concat(St.map(function(Kt){return["C"].concat(Kt.slice(2))}))}},44078:function(Me,de,k){"use strict";k.d(de,{y:function(){return yt}});function yt(st,St){return Math.sqrt((st[0]-St[0])*(st[0]-St[0])+(st[1]-St[1])*(st[1]-St[1]))}},99872:function(Me,de,k){"use strict";k.d(de,{x:function(){return Qt}});var yt=k(17570),st=k(6489),St=50;function Kt(Ut,zt){zt===void 0&&(zt=.5);var ft=Ut.slice(0,2),re=Ut.slice(2,4),q=Ut.slice(4,6),Q=Ut.slice(6,8),Dt=(0,yt.k)(ft,re,zt),At=(0,yt.k)(re,q,zt),Ft=(0,yt.k)(q,Q,zt),Pt=(0,yt.k)(Dt,At,zt),$t=(0,yt.k)(At,Ft,zt),Oe=(0,yt.k)(Pt,$t,zt);return[["C"].concat(Dt,Pt,Oe),["C"].concat($t,Ft,Q)]}function et(Ut){return Ut.map(function(zt,ft,re){var q=ft&&re[ft-1].slice(-2).concat(zt.slice(1)),Q=ft?(0,st.S)(q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],q[8],{bbox:!1}).length:0,Dt;return ft?Dt=Q?Kt(q):[zt,zt]:Dt=[zt],{s:zt,ss:Dt,l:Q}})}function Qt(Ut,zt,ft,re){if(re===void 0&&(re=0),re>St)return console.warn("Maximum recursion depth reached in equalizeSegments"),[Ut,zt];var q=et(Ut),Q=et(zt),Dt=q.length,At=Q.length,Ft=q.filter(function(J){return J.l}).length,Pt=Q.filter(function(J){return J.l}).length,$t=q.filter(function(J){return J.l}).reduce(function(J,ce){var Gt=ce.l;return J+Gt},0)/Ft||0,Oe=Q.filter(function(J){return J.l}).reduce(function(J,ce){var Gt=ce.l;return J+Gt},0)/Pt||0,De=ft||Math.max(Dt,At),Ge=[$t,Oe],un=[De-Dt,De-At],Te=0,Vt=[q,Q].map(function(J,ce){return J.l===De?J.map(function(Gt){return Gt.s}):J.map(function(Gt,ke){return Te=ke&&un[ce]&&Gt.l>=Ge[ce],un[ce]-=Te?1:0,Te?Gt.ss:[Gt.s]}).flat()});return Vt[0].length===Vt[1].length?Vt:Qt(Vt[0],Vt[1],De,re+1)}},92455:function(Me,de,k){"use strict";k.d(de,{b:function(){return Kt}});var yt=k(75839);function st(et,Qt,Ut,zt,ft,re,q,Q){return 3*((Q-Qt)*(Ut+ft)-(q-et)*(zt+re)+zt*(et-ft)-Ut*(Qt-re)+Q*(ft+et/3)-q*(re+Qt/3))/20}function St(et){var Qt=0,Ut=0,zt=0;return(0,yt.Y)(et).map(function(ft){var re;switch(ft[0]){case"M":return Qt=ft[1],Ut=ft[2],0;default:var q=ft.slice(1),Q=q[0],Dt=q[1],At=q[2],Ft=q[3],Pt=q[4],$t=q[5];return zt=st(Qt,Ut,Q,Dt,At,Ft,Pt,$t),re=ft.slice(-2),Qt=re[0],Ut=re[1],zt}}).reduce(function(ft,re){return ft+re},0)}function Kt(et){return St(et)>=0}},84329:function(Me,de,k){"use strict";k.d(de,{r:function(){return St}});var yt=k(97582),st=k(32262);function St(Kt,et,Qt){return(0,st.s)(Kt,et,(0,yt.pi)((0,yt.pi)({},Qt),{bbox:!1,length:!0})).point}},83555:function(Me,de,k){"use strict";k.d(de,{g:function(){return St}});var yt=k(44078);function st(Kt){var et=Kt.length,Qt=et-1;return Kt.map(function(Ut,zt){return Kt.map(function(ft,re){var q=zt+re,Q;return re===0||Kt[q]&&Kt[q][0]==="M"?(Q=Kt[q],["M"].concat(Q.slice(-2))):(q>=et&&(q-=Qt),Kt[q])})})}function St(Kt,et){var Qt=Kt.length-1,Ut=[],zt=0,ft=0,re=st(Kt);return re.forEach(function(q,Q){Kt.slice(1).forEach(function(Dt,At){ft+=(0,yt.y)(Kt[(Q+At)%Qt].slice(-2),et[At%Qt].slice(-2))}),Ut[Q]=ft,ft=0}),zt=Ut.indexOf(Math.min.apply(null,Ut)),re[zt]}},69877:function(Me,de,k){"use strict";k.d(de,{D:function(){return St}});var yt=k(97582),st=k(32262);function St(Kt,et){return(0,st.s)(Kt,void 0,(0,yt.pi)((0,yt.pi)({},et),{bbox:!1,length:!0})).length}},41010:function(Me,de,k){"use strict";k.d(de,{b:function(){return st}});var yt=k(56346);function st(St){return(0,yt.n)(St)&&St.every(function(Kt){var et=Kt[0];return et===et.toUpperCase()})}},11013:function(Me,de,k){"use strict";k.d(de,{y:function(){return st}});var yt=k(41010);function st(St){return(0,yt.b)(St)&&St.every(function(Kt){var et=Kt[0];return"ACLMQZ".includes(et)})}},56346:function(Me,de,k){"use strict";k.d(de,{n:function(){return st}});var yt=k(18323);function st(St){return Array.isArray(St)&&St.every(function(Kt){var et=Kt[0].toLowerCase();return yt.R[et]===Kt.length-1&&"achlmqstvz".includes(et)})}},17570:function(Me,de,k){"use strict";k.d(de,{k:function(){return yt}});function yt(st,St,Kt){var et=st[0],Qt=st[1],Ut=St[0],zt=St[1];return[et+(Ut-et)*Kt,Qt+(zt-Qt)*Kt]}},32262:function(Me,de,k){"use strict";k.d(de,{s:function(){return q}});var yt=k(4848),st=k(17570),St=k(44078);function Kt(Q,Dt,At,Ft,Pt){var $t=(0,St.y)([Q,Dt],[At,Ft]),Oe={x:0,y:0};if(typeof Pt=="number")if(Pt<=0)Oe={x:Q,y:Dt};else if(Pt>=$t)Oe={x:At,y:Ft};else{var De=(0,st.k)([Q,Dt],[At,Ft],Pt/$t),Ge=De[0],un=De[1];Oe={x:Ge,y:un}}return{length:$t,point:Oe,min:{x:Math.min(Q,At),y:Math.min(Dt,Ft)},max:{x:Math.max(Q,At),y:Math.max(Dt,Ft)}}}function et(Q,Dt){var At=Q.x,Ft=Q.y,Pt=Dt.x,$t=Dt.y,Oe=At*Pt+Ft*$t,De=Math.sqrt((Math.pow(At,2)+Math.pow(Ft,2))*(Math.pow(Pt,2)+Math.pow($t,2))),Ge=At*$t-Ft*Pt<0?-1:1,un=Ge*Math.acos(Oe/De);return un}function Qt(Q,Dt,At,Ft,Pt,$t,Oe,De,Ge,un){var Te=Math.abs,Vt=Math.sin,J=Math.cos,ce=Math.sqrt,Gt=Math.PI,ke=Te(At),Ie=Te(Ft),B=(Pt%360+360)%360,Ct=B*(Gt/180);if(Q===De&&Dt===Ge)return{x:Q,y:Dt};if(ke===0||Ie===0)return Kt(Q,Dt,De,Ge,un).point;var G=(Q-De)/2,Mt=(Dt-Ge)/2,Et={x:J(Ct)*G+Vt(Ct)*Mt,y:-Vt(Ct)*G+J(Ct)*Mt},U=Math.pow(Et.x,2)/Math.pow(ke,2)+Math.pow(Et.y,2)/Math.pow(Ie,2);U>1&&(ke*=ce(U),Ie*=ce(U));var it=Math.pow(ke,2)*Math.pow(Ie,2)-Math.pow(ke,2)*Math.pow(Et.y,2)-Math.pow(Ie,2)*Math.pow(Et.x,2),te=Math.pow(ke,2)*Math.pow(Et.y,2)+Math.pow(Ie,2)*Math.pow(Et.x,2),he=it/te;he=he<0?0:he;var xt=($t!==Oe?1:-1)*ce(he),ee={x:xt*(ke*Et.y/Ie),y:xt*(-(Ie*Et.x)/ke)},qt={x:J(Ct)*ee.x-Vt(Ct)*ee.y+(Q+De)/2,y:Vt(Ct)*ee.x+J(Ct)*ee.y+(Dt+Ge)/2},pe={x:(Et.x-ee.x)/ke,y:(Et.y-ee.y)/Ie},Ce=et({x:1,y:0},pe),vt={x:(-Et.x-ee.x)/ke,y:(-Et.y-ee.y)/Ie},K=et(pe,vt);!Oe&&K>0?K-=2*Gt:Oe&&K<0&&(K+=2*Gt),K%=2*Gt;var kt=Ce+K*un,le=ke*J(kt),ut=Ie*Vt(kt),Tt={x:J(Ct)*le-Vt(Ct)*ut+qt.x,y:Vt(Ct)*le+J(Ct)*ut+qt.y};return Tt}function Ut(Q,Dt,At,Ft,Pt,$t,Oe,De,Ge,un,Te){var Vt,J=Te.bbox,ce=J===void 0?!0:J,Gt=Te.length,ke=Gt===void 0?!0:Gt,Ie=Te.sampleSize,B=Ie===void 0?30:Ie,Ct=typeof un=="number",G=Q,Mt=Dt,Et=0,U=[G,Mt,Et],it=[G,Mt],te=0,he={x:0,y:0},xt=[{x:G,y:Mt}];Ct&&un<=0&&(he={x:G,y:Mt});for(var ee=0;ee<=B;ee+=1){if(te=ee/B,Vt=Qt(Q,Dt,At,Ft,Pt,$t,Oe,De,Ge,te),G=Vt.x,Mt=Vt.y,ce&&xt.push({x:G,y:Mt}),ke&&(Et+=(0,St.y)(it,[G,Mt])),it=[G,Mt],Ct&&Et>=un&&un>U[2]){var qt=(Et-un)/(Et-U[2]);he={x:it[0]*(1-qt)+U[0]*qt,y:it[1]*(1-qt)+U[1]*qt}}U=[G,Mt,Et]}return Ct&&un>=Et&&(he={x:De,y:Ge}),{length:Et,point:he,min:{x:Math.min.apply(null,xt.map(function(pe){return pe.x})),y:Math.min.apply(null,xt.map(function(pe){return pe.y}))},max:{x:Math.max.apply(null,xt.map(function(pe){return pe.x})),y:Math.max.apply(null,xt.map(function(pe){return pe.y}))}}}var zt=k(6489);function ft(Q,Dt,At,Ft,Pt,$t,Oe){var De=1-Oe;return{x:Math.pow(De,2)*Q+2*De*Oe*At+Math.pow(Oe,2)*Pt,y:Math.pow(De,2)*Dt+2*De*Oe*Ft+Math.pow(Oe,2)*$t}}function re(Q,Dt,At,Ft,Pt,$t,Oe,De){var Ge,un=De.bbox,Te=un===void 0?!0:un,Vt=De.length,J=Vt===void 0?!0:Vt,ce=De.sampleSize,Gt=ce===void 0?10:ce,ke=typeof Oe=="number",Ie=Q,B=Dt,Ct=0,G=[Ie,B,Ct],Mt=[Ie,B],Et=0,U={x:0,y:0},it=[{x:Ie,y:B}];ke&&Oe<=0&&(U={x:Ie,y:B});for(var te=0;te<=Gt;te+=1){if(Et=te/Gt,Ge=ft(Q,Dt,At,Ft,Pt,$t,Et),Ie=Ge.x,B=Ge.y,Te&&it.push({x:Ie,y:B}),J&&(Ct+=(0,St.y)(Mt,[Ie,B])),Mt=[Ie,B],ke&&Ct>=Oe&&Oe>G[2]){var he=(Ct-Oe)/(Ct-G[2]);U={x:Mt[0]*(1-he)+G[0]*he,y:Mt[1]*(1-he)+G[1]*he}}G=[Ie,B,Ct]}return ke&&Oe>=Ct&&(U={x:Pt,y:$t}),{length:Ct,point:U,min:{x:Math.min.apply(null,it.map(function(xt){return xt.x})),y:Math.min.apply(null,it.map(function(xt){return xt.y}))},max:{x:Math.max.apply(null,it.map(function(xt){return xt.x})),y:Math.max.apply(null,it.map(function(xt){return xt.y}))}}}function q(Q,Dt,At){for(var Ft,Pt,$t,Oe,De,Ge,un=(0,yt.A)(Q),Te=typeof Dt=="number",Vt,J=[],ce,Gt=0,ke=0,Ie=0,B=0,Ct,G=[],Mt=[],Et=0,U={x:0,y:0},it=U,te=U,he=U,xt=0,ee=0,qt=un.length;ee<qt;ee+=1)Ct=un[ee],ce=Ct[0],Vt=ce==="M",J=Vt?J:[Gt,ke].concat(Ct.slice(1)),Vt?(Ie=Ct[1],B=Ct[2],U={x:Ie,y:B},it=U,Et=0,Te&&Dt<.001&&(he=U)):ce==="L"?(Ft=Kt(J[0],J[1],J[2],J[3],(Dt||0)-xt),Et=Ft.length,U=Ft.min,it=Ft.max,te=Ft.point):ce==="A"?(Pt=Ut(J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7],J[8],(Dt||0)-xt,At||{}),Et=Pt.length,U=Pt.min,it=Pt.max,te=Pt.point):ce==="C"?($t=(0,zt.S)(J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7],(Dt||0)-xt,At||{}),Et=$t.length,U=$t.min,it=$t.max,te=$t.point):ce==="Q"?(Oe=re(J[0],J[1],J[2],J[3],J[4],J[5],(Dt||0)-xt,At||{}),Et=Oe.length,U=Oe.min,it=Oe.max,te=Oe.point):ce==="Z"&&(J=[Gt,ke,Ie,B],De=Kt(J[0],J[1],J[2],J[3],(Dt||0)-xt),Et=De.length,U=De.min,it=De.max,te=De.point),Te&&xt<Dt&&xt+Et>=Dt&&(he=te),Mt.push(it),G.push(U),xt+=Et,Ge=ce!=="Z"?Ct.slice(-2):[Ie,B],Gt=Ge[0],ke=Ge[1];return Te&&Dt>=xt&&(he={x:Gt,y:ke}),{length:xt,point:he,min:{x:Math.min.apply(null,G.map(function(pe){return pe.x})),y:Math.min.apply(null,G.map(function(pe){return pe.y}))},max:{x:Math.max.apply(null,Mt.map(function(pe){return pe.x})),y:Math.max.apply(null,Mt.map(function(pe){return pe.y}))}}}},6489:function(Me,de,k){"use strict";k.d(de,{S:function(){return St}});var yt=k(44078);function st(Kt,et,Qt,Ut,zt,ft,re,q,Q){var Dt=1-Q;return{x:Math.pow(Dt,3)*Kt+3*Math.pow(Dt,2)*Q*Qt+3*Dt*Math.pow(Q,2)*zt+Math.pow(Q,3)*re,y:Math.pow(Dt,3)*et+3*Math.pow(Dt,2)*Q*Ut+3*Dt*Math.pow(Q,2)*ft+Math.pow(Q,3)*q}}function St(Kt,et,Qt,Ut,zt,ft,re,q,Q,Dt){var At,Ft=Dt.bbox,Pt=Ft===void 0?!0:Ft,$t=Dt.length,Oe=$t===void 0?!0:$t,De=Dt.sampleSize,Ge=De===void 0?10:De,un=typeof Q=="number",Te=Kt,Vt=et,J=0,ce=[Te,Vt,J],Gt=[Te,Vt],ke=0,Ie={x:0,y:0},B=[{x:Te,y:Vt}];un&&Q<=0&&(Ie={x:Te,y:Vt});for(var Ct=0;Ct<=Ge;Ct+=1){if(ke=Ct/Ge,At=st(Kt,et,Qt,Ut,zt,ft,re,q,ke),Te=At.x,Vt=At.y,Pt&&B.push({x:Te,y:Vt}),Oe&&(J+=(0,yt.y)(Gt,[Te,Vt])),Gt=[Te,Vt],un&&J>=Q&&Q>ce[2]){var G=(J-Q)/(J-ce[2]);Ie={x:Gt[0]*(1-G)+ce[0]*G,y:Gt[1]*(1-G)+ce[1]*G}}ce=[Te,Vt,J]}return un&&Q>=J&&(Ie={x:re,y:q}),{length:J,point:Ie,min:{x:Math.min.apply(null,B.map(function(Mt){return Mt.x})),y:Math.min.apply(null,B.map(function(Mt){return Mt.y}))},max:{x:Math.max.apply(null,B.map(function(Mt){return Mt.x})),y:Math.max.apply(null,B.map(function(Mt){return Mt.y}))}}}},38163:function(Me){Me.exports=de;function de(st,St){var Kt=st&&st.type,et;if(Kt==="FeatureCollection")for(et=0;et<st.features.length;et++)de(st.features[et],St);else if(Kt==="GeometryCollection")for(et=0;et<st.geometries.length;et++)de(st.geometries[et],St);else if(Kt==="Feature")de(st.geometry,St);else if(Kt==="Polygon")k(st.coordinates,St);else if(Kt==="MultiPolygon")for(et=0;et<st.coordinates.length;et++)k(st.coordinates[et],St);return st}function k(st,St){if(st.length!==0){yt(st[0],St);for(var Kt=1;Kt<st.length;Kt++)yt(st[Kt],!St)}}function yt(st,St){for(var Kt=0,et=0,Qt=0,Ut=st.length,zt=Ut-1;Qt<Ut;zt=Qt++){var ft=(st[Qt][0]-st[zt][0])*(st[zt][1]+st[Qt][1]),re=Kt+ft;et+=Math.abs(Kt)>=Math.abs(ft)?Kt-re+ft:ft-re+Kt,Kt=re}Kt+et>=0!=!!St&&st.reverse()}},75550:function(Me){"use strict";Me.exports=de;function de(k,yt){this.x=k,this.y=yt}de.prototype={clone:function(){return new de(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,yt){return this.clone()._rotateAround(k,yt)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var yt=k.x-this.x,st=k.y-this.y;return yt*yt+st*st},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,yt){return Math.atan2(this.x*yt-this.y*k,this.x*k+this.y*yt)},_matMult:function(k){var yt=k[0]*this.x+k[1]*this.y,st=k[2]*this.x+k[3]*this.y;return this.x=yt,this.y=st,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var yt=Math.cos(k),st=Math.sin(k),St=yt*this.x-st*this.y,Kt=st*this.x+yt*this.y;return this.x=St,this.y=Kt,this},_rotateAround:function(k,yt){var st=Math.cos(k),St=Math.sin(k),Kt=yt.x+st*(this.x-yt.x)-St*(this.y-yt.y),et=yt.y+St*(this.x-yt.x)+st*(this.y-yt.y);return this.x=Kt,this.y=et,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},de.convert=function(k){return k instanceof de?k:Array.isArray(k)?new de(k[0],k[1]):k}},49296:function(Me){"use strict";Me.exports=k,Me.exports.default=k;var de=1e20;function k(et,Qt,Ut,zt,ft,re){this.fontSize=et||24,this.buffer=Qt===void 0?3:Qt,this.cutoff=zt||.25,this.fontFamily=ft||"sans-serif",this.fontWeight=re||"normal",this.radius=Ut||8;var q=this.size=this.fontSize+this.buffer*2,Q=q+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=q,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Q*Q),this.gridInner=new Float64Array(Q*Q),this.f=new Float64Array(Q),this.z=new Float64Array(Q+1),this.v=new Uint16Array(Q),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(q/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function yt(et,Qt,Ut,zt,ft,re,q){re.fill(de,0,Qt*Ut),q.fill(0,0,Qt*Ut);for(var Q=(Qt-zt)/2,Dt=0;Dt<ft;Dt++)for(var At=0;At<zt;At++){var Ft=(Dt+Q)*Qt+At+Q,Pt=et.data[4*(Dt*zt+At)+3]/255;if(Pt===1)re[Ft]=0,q[Ft]=de;else if(Pt===0)re[Ft]=de,q[Ft]=0;else{var $t=Math.max(0,.5-Pt),Oe=Math.max(0,Pt-.5);re[Ft]=$t*$t,q[Ft]=Oe*Oe}}}function st(et,Qt,Ut,zt,ft,re,q){for(var Q=0;Q<Qt*Ut;Q++){var Dt=Math.sqrt(zt[Q])-Math.sqrt(ft[Q]);et[Q]=Math.round(255-255*(Dt/re+q))}}k.prototype._draw=function(et,Qt){var Ut=this.ctx.measureText(et),zt=Ut.width,ft=2*this.buffer,re,q,Q,Dt,At,Ft,Pt,$t;Qt&&this.useMetrics?(At=Math.floor(Ut.actualBoundingBoxAscent),$t=this.buffer+Math.ceil(Ut.actualBoundingBoxAscent),Ft=this.buffer,Pt=this.buffer,q=Math.min(this.size,Math.ceil(Ut.actualBoundingBoxRight-Ut.actualBoundingBoxLeft)),Dt=Math.min(this.size-Ft,Math.ceil(Ut.actualBoundingBoxAscent+Ut.actualBoundingBoxDescent)),re=q+ft,Q=Dt+ft,this.ctx.textBaseline="alphabetic"):(re=q=this.size,Q=Dt=this.size,At=19*this.fontSize/24,Ft=Pt=0,$t=this.middle,this.ctx.textBaseline="middle");var Oe;q&&Dt&&(this.ctx.clearRect(Pt,Ft,q,Dt),this.ctx.fillText(et,this.buffer,$t),Oe=this.ctx.getImageData(Pt,Ft,q,Dt));var De=new Uint8ClampedArray(re*Q);return yt(Oe,re,Q,q,Dt,this.gridOuter,this.gridInner),St(this.gridOuter,re,Q,this.f,this.v,this.z),St(this.gridInner,re,Q,this.f,this.v,this.z),st(De,re,Q,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:De,metrics:{width:q,height:Dt,sdfWidth:re,sdfHeight:Q,top:At,left:0,advance:zt}}},k.prototype.draw=function(et){return this._draw(et,!1).data},k.prototype.drawWithMetrics=function(et){return this._draw(et,!0)};function St(et,Qt,Ut,zt,ft,re){for(var q=0;q<Qt;q++)Kt(et,q,Qt,Ut,zt,ft,re);for(var Q=0;Q<Ut;Q++)Kt(et,Q*Qt,1,Qt,zt,ft,re)}function Kt(et,Qt,Ut,zt,ft,re,q){var Q,Dt,At,Ft;for(re[0]=0,q[0]=-de,q[1]=de,Q=0;Q<zt;Q++)ft[Q]=et[Qt+Q*Ut];for(Q=1,Dt=0,At=0;Q<zt;Q++){do Ft=re[Dt],At=(ft[Q]-ft[Ft]+Q*Q-Ft*Ft)/(Q-Ft)/2;while(At<=q[Dt]&&--Dt>-1);Dt++,re[Dt]=Q,q[Dt]=At,q[Dt+1]=de}for(Q=0,Dt=0;Q<zt;Q++){for(;q[Dt+1]<Q;)Dt++;Ft=re[Dt],et[Qt+Q*Ut]=ft[Ft]+(Q-Ft)*(Q-Ft)}}},38929:function(Me,de,k){Me.exports.VectorTile=k(22779),k(66024),k(59701)},22779:function(Me,de,k){"use strict";var yt=k(59701);Me.exports=st;function st(Kt,et){this.layers=Kt.readFields(St,{},et)}function St(Kt,et,Qt){if(Kt===3){var Ut=new yt(Qt,Qt.readVarint()+Qt.pos);Ut.length&&(et[Ut.name]=Ut)}}},66024:function(Me,de,k){"use strict";var yt=k(75550);Me.exports=st;function st(Ut,zt,ft,re,q){this.properties={},this.extent=ft,this.type=0,this._pbf=Ut,this._geometry=-1,this._keys=re,this._values=q,Ut.readFields(St,this,zt)}function St(Ut,zt,ft){Ut==1?zt.id=ft.readVarint():Ut==2?Kt(ft,zt):Ut==3?zt.type=ft.readVarint():Ut==4&&(zt._geometry=ft.pos)}function Kt(Ut,zt){for(var ft=Ut.readVarint()+Ut.pos;Ut.pos<ft;){var re=zt._keys[Ut.readVarint()],q=zt._values[Ut.readVarint()];zt.properties[re]=q}}st.types=["Unknown","Point","LineString","Polygon"],st.prototype.loadGeometry=function(){var Ut=this._pbf;Ut.pos=this._geometry;for(var zt=Ut.readVarint()+Ut.pos,ft=1,re=0,q=0,Q=0,Dt=[],At;Ut.pos<zt;){if(re<=0){var Ft=Ut.readVarint();ft=Ft&7,re=Ft>>3}if(re--,ft===1||ft===2)q+=Ut.readSVarint(),Q+=Ut.readSVarint(),ft===1&&(At&&Dt.push(At),At=[]),At.push(new yt(q,Q));else if(ft===7)At&&At.push(At[0].clone());else throw new Error("unknown command "+ft)}return At&&Dt.push(At),Dt},st.prototype.bbox=function(){var Ut=this._pbf;Ut.pos=this._geometry;for(var zt=Ut.readVarint()+Ut.pos,ft=1,re=0,q=0,Q=0,Dt=1/0,At=-1/0,Ft=1/0,Pt=-1/0;Ut.pos<zt;){if(re<=0){var $t=Ut.readVarint();ft=$t&7,re=$t>>3}if(re--,ft===1||ft===2)q+=Ut.readSVarint(),Q+=Ut.readSVarint(),q<Dt&&(Dt=q),q>At&&(At=q),Q<Ft&&(Ft=Q),Q>Pt&&(Pt=Q);else if(ft!==7)throw new Error("unknown command "+ft)}return[Dt,Ft,At,Pt]},st.prototype.toGeoJSON=function(Ut,zt,ft){var re=this.extent*Math.pow(2,ft),q=this.extent*Ut,Q=this.extent*zt,Dt=this.loadGeometry(),At=st.types[this.type],Ft,Pt;function $t(Ge){for(var un=0;un<Ge.length;un++){var Te=Ge[un],Vt=180-(Te.y+Q)*360/re;Ge[un]=[(Te.x+q)*360/re-180,360/Math.PI*Math.atan(Math.exp(Vt*Math.PI/180))-90]}}switch(this.type){case 1:var Oe=[];for(Ft=0;Ft<Dt.length;Ft++)Oe[Ft]=Dt[Ft][0];Dt=Oe,$t(Dt);break;case 2:for(Ft=0;Ft<Dt.length;Ft++)$t(Dt[Ft]);break;case 3:for(Dt=et(Dt),Ft=0;Ft<Dt.length;Ft++)for(Pt=0;Pt<Dt[Ft].length;Pt++)$t(Dt[Ft][Pt]);break}Dt.length===1?Dt=Dt[0]:At="Multi"+At;var De={type:"Feature",geometry:{type:At,coordinates:Dt},properties:this.properties};return"id"in this&&(De.id=this.id),De};function et(Ut){var zt=Ut.length;if(zt<=1)return[Ut];for(var ft=[],re,q,Q=0;Q<zt;Q++){var Dt=Qt(Ut[Q]);Dt!==0&&(q===void 0&&(q=Dt<0),q===Dt<0?(re&&ft.push(re),re=[Ut[Q]]):re.push(Ut[Q]))}return re&&ft.push(re),ft}function Qt(Ut){for(var zt=0,ft=0,re=Ut.length,q=re-1,Q,Dt;ft<re;q=ft++)Q=Ut[ft],Dt=Ut[q],zt+=(Dt.x-Q.x)*(Q.y+Dt.y);return zt}},59701:function(Me,de,k){"use strict";var yt=k(66024);Me.exports=st;function st(et,Qt){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=et,this._keys=[],this._values=[],this._features=[],et.readFields(St,this,Qt),this.length=this._features.length}function St(et,Qt,Ut){et===15?Qt.version=Ut.readVarint():et===1?Qt.name=Ut.readString():et===5?Qt.extent=Ut.readVarint():et===2?Qt._features.push(Ut.pos):et===3?Qt._keys.push(Ut.readString()):et===4&&Qt._values.push(Kt(Ut))}function Kt(et){for(var Qt=null,Ut=et.readVarint()+et.pos;et.pos<Ut;){var zt=et.readVarint()>>3;Qt=zt===1?et.readString():zt===2?et.readFloat():zt===3?et.readDouble():zt===4?et.readVarint64():zt===5?et.readVarint():zt===6?et.readSVarint():zt===7?et.readBoolean():null}return Qt}st.prototype.feature=function(et){if(et<0||et>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[et];var Qt=this._pbf.readVarint()+this._pbf.pos;return new yt(this._pbf,Qt,this.extent,this._keys,this._values)}},8388:function(Me,de,k){"use strict";k.d(de,{Z:function(){return N3}});var yt=k(85441),st={},St={},Kt=a=>St[a],et=(a,i)=>{St[a]=i},Qt=a=>st[a],Ut=(a,i)=>{st[a]=i},zt={},ft={},re=34,q=10,Q=13;function Dt(a){return new Function("d","return {"+a.map(function(i,s){return JSON.stringify(i)+": d["+s+'] || ""'}).join(",")+"}")}function At(a,i){var s=Dt(a);return function(f,g){return i(s(f),g,a)}}function Ft(a){var i=Object.create(null),s=[];return a.forEach(function(f){for(var g in f)g in i||s.push(i[g]=g)}),s}function Pt(a,i){var s=a+"",f=s.length;return f<i?new Array(i-f+1).join(0)+s:s}function $t(a){return a<0?"-"+Pt(-a,6):a>9999?"+"+Pt(a,6):Pt(a,4)}function Oe(a){var i=a.getUTCHours(),s=a.getUTCMinutes(),f=a.getUTCSeconds(),g=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":$t(a.getUTCFullYear(),4)+"-"+Pt(a.getUTCMonth()+1,2)+"-"+Pt(a.getUTCDate(),2)+(g?"T"+Pt(i,2)+":"+Pt(s,2)+":"+Pt(f,2)+"."+Pt(g,3)+"Z":f?"T"+Pt(i,2)+":"+Pt(s,2)+":"+Pt(f,2)+"Z":s||i?"T"+Pt(i,2)+":"+Pt(s,2)+"Z":"")}function De(a){var i=new RegExp('["'+a+`
\r]`),s=a.charCodeAt(0);function f(Z,W){var mt,Nt,Jt=g(Z,function(ye,Ne){if(mt)return mt(ye,Ne-1);Nt=ye,mt=W?At(ye,W):Dt(ye)});return Jt.columns=Nt||[],Jt}function g(Z,W){var mt=[],Nt=Z.length,Jt=0,ye=0,Ne,ze=Nt<=0,He=!1;Z.charCodeAt(Nt-1)===q&&--Nt,Z.charCodeAt(Nt-1)===Q&&--Nt;function nn(){if(ze)return ft;if(He)return He=!1,zt;var In,En=Jt,Rn;if(Z.charCodeAt(En)===re){for(;Jt++<Nt&&Z.charCodeAt(Jt)!==re||Z.charCodeAt(++Jt)===re;);return(In=Jt)>=Nt?ze=!0:(Rn=Z.charCodeAt(Jt++))===q?He=!0:Rn===Q&&(He=!0,Z.charCodeAt(Jt)===q&&++Jt),Z.slice(En+1,In-1).replace(/""/g,'"')}for(;Jt<Nt;){if((Rn=Z.charCodeAt(In=Jt++))===q)He=!0;else if(Rn===Q)He=!0,Z.charCodeAt(Jt)===q&&++Jt;else if(Rn!==s)continue;return Z.slice(En,In)}return ze=!0,Z.slice(En,Nt)}for(;(Ne=nn())!==ft;){for(var pn=[];Ne!==zt&&Ne!==ft;)pn.push(Ne),Ne=nn();W&&(pn=W(pn,ye++))==null||mt.push(pn)}return mt}function y(Z,W){return Z.map(function(mt){return W.map(function(Nt){return N(mt[Nt])}).join(a)})}function x(Z,W){return W==null&&(W=Ft(Z)),[W.map(N).join(a)].concat(y(Z,W)).join(`
`)}function O(Z,W){return W==null&&(W=Ft(Z)),y(Z,W).join(`
`)}function A(Z){return Z.map(P).join(`
`)}function P(Z){return Z.map(N).join(a)}function N(Z){return Z==null?"":Z instanceof Date?Oe(Z):i.test(Z+="")?'"'+Z.replace(/"/g,'""')+'"':Z}return{parse:f,parseRows:g,format:x,formatBody:O,formatRows:A,formatRow:P,formatValue:N}}var Ge=De(","),un=Ge.parse,Te=Ge.parseRows,Vt=Ge.format,J=Ge.formatBody,ce=Ge.formatRows,Gt=Ge.formatRow,ke=Ge.formatValue,Ie=63710088e-1,B={centimeters:Ie*100,centimetres:Ie*100,degrees:Ie/111325,feet:Ie*3.28084,inches:Ie*39.37,kilometers:Ie/1e3,kilometres:Ie/1e3,meters:Ie,metres:Ie,miles:Ie/1609.344,millimeters:Ie*1e3,millimetres:Ie*1e3,nauticalmiles:Ie/1852,radians:1,yards:Ie*1.0936},Ct={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ie,yards:1.0936133},G={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Mt(a,i,s){s===void 0&&(s={});var f={type:"Feature"};return(s.id===0||s.id)&&(f.id=s.id),s.bbox&&(f.bbox=s.bbox),f.properties=i||{},f.geometry=a,f}function Et(a,i,s){switch(s===void 0&&(s={}),a){case"Point":return U(i).geometry;case"LineString":return xt(i).geometry;case"Polygon":return te(i).geometry;case"MultiPoint":return Ce(i).geometry;case"MultiLineString":return pe(i).geometry;case"MultiPolygon":return vt(i).geometry;default:throw new Error(a+" is invalid")}}function U(a,i,s){if(s===void 0&&(s={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!F(a[0])||!F(a[1]))throw new Error("coordinates must contain numbers");var f={type:"Point",coordinates:a};return Mt(f,i,s)}function it(a,i,s){return s===void 0&&(s={}),qt(a.map(function(f){return U(f,i)}),s)}function te(a,i,s){s===void 0&&(s={});for(var f=0,g=a;f<g.length;f++){var y=g[f];if(y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<y[y.length-1].length;x++)if(y[y.length-1][x]!==y[0][x])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:a};return Mt(O,i,s)}function he(a,i,s){return s===void 0&&(s={}),qt(a.map(function(f){return te(f,i)}),s)}function xt(a,i,s){if(s===void 0&&(s={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");var f={type:"LineString",coordinates:a};return Mt(f,i,s)}function ee(a,i,s){return s===void 0&&(s={}),qt(a.map(function(f){return xt(f,i)}),s)}function qt(a,i){i===void 0&&(i={});var s={type:"FeatureCollection"};return i.id&&(s.id=i.id),i.bbox&&(s.bbox=i.bbox),s.features=a,s}function pe(a,i,s){s===void 0&&(s={});var f={type:"MultiLineString",coordinates:a};return Mt(f,i,s)}function Ce(a,i,s){s===void 0&&(s={});var f={type:"MultiPoint",coordinates:a};return Mt(f,i,s)}function vt(a,i,s){s===void 0&&(s={});var f={type:"MultiPolygon",coordinates:a};return Mt(f,i,s)}function K(a,i,s){s===void 0&&(s={});var f={type:"GeometryCollection",geometries:a};return Mt(f,i,s)}function kt(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var s=Math.pow(10,i||0);return Math.round(a*s)/s}function le(a,i){i===void 0&&(i="kilometers");var s=B[i];if(!s)throw new Error(i+" units is invalid");return a*s}function ut(a,i){i===void 0&&(i="kilometers");var s=B[i];if(!s)throw new Error(i+" units is invalid");return a/s}function Tt(a,i){return Y(ut(a,i))}function ae(a){var i=a%360;return i<0&&(i+=360),i}function Y(a){var i=a%(2*Math.PI);return i*180/Math.PI}function I(a){var i=a%360;return i*Math.PI/180}function Yt(a,i,s){if(i===void 0&&(i="kilometers"),s===void 0&&(s="kilometers"),!(a>=0))throw new Error("length must be a positive number");return le(ut(a,i),s)}function T(a,i,s){if(i===void 0&&(i="meters"),s===void 0&&(s="kilometers"),!(a>=0))throw new Error("area must be a positive number");var f=G[i];if(!f)throw new Error("invalid original units");var g=G[s];if(!g)throw new Error("invalid final units");return a/f*g}function F(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function Lt(a){return!!a&&a.constructor===Object}function Wt(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!F(i))throw new Error("bbox must only contain numbers")})}function ie(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}function be(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ae(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function we(a){if(a.length>1&&isNumber(a[0])&&isNumber(a[1]))return!0;if(Array.isArray(a[0])&&a[0].length)return we(a[0]);throw new Error("coordinates must only contain numbers")}function $e(a,i,s){if(!i||!s)throw new Error("type and name required");if(!a||a.type!==i)throw new Error("Invalid input to "+s+": must be a "+i+", given "+a.type)}function Xe(a,i,s){if(!a)throw new Error("No feature passed");if(!s)throw new Error(".featureOf() requires a name");if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+s+", Feature with geometry required");if(!a.geometry||a.geometry.type!==i)throw new Error("Invalid input to "+s+": must be a "+i+", given "+a.geometry.type)}function Qe(a,i,s){if(!a)throw new Error("No featureCollection passed");if(!s)throw new Error(".collectionOf() requires a name");if(!a||a.type!=="FeatureCollection")throw new Error("Invalid input to "+s+", FeatureCollection required");for(var f=0,g=a.features;f<g.length;f++){var y=g[f];if(!y||y.type!=="Feature"||!y.geometry)throw new Error("Invalid input to "+s+", Feature with geometry required");if(!y.geometry||y.geometry.type!==i)throw new Error("Invalid input to "+s+": must be a "+i+", given "+y.geometry.type)}}function qe(a){return a.type==="Feature"?a.geometry:a}function Zt(a,i){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}function ne(a,i,s){if(a!==null)for(var f,g,y,x,O,A,P,N=0,Z=0,W,mt=a.type,Nt=mt==="FeatureCollection",Jt=mt==="Feature",ye=Nt?a.features.length:1,Ne=0;Ne<ye;Ne++){P=Nt?a.features[Ne].geometry:Jt?a.geometry:a,W=P?P.type==="GeometryCollection":!1,O=W?P.geometries.length:1;for(var ze=0;ze<O;ze++){var He=0,nn=0;if(x=W?P.geometries[ze]:P,x!==null){A=x.coordinates;var pn=x.type;switch(N=s&&(pn==="Polygon"||pn==="MultiPolygon")?1:0,pn){case null:break;case"Point":if(i(A,Z,Ne,He,nn)===!1)return!1;Z++,He++;break;case"LineString":case"MultiPoint":for(f=0;f<A.length;f++){if(i(A[f],Z,Ne,He,nn)===!1)return!1;Z++,pn==="MultiPoint"&&He++}pn==="LineString"&&He++;break;case"Polygon":case"MultiLineString":for(f=0;f<A.length;f++){for(g=0;g<A[f].length-N;g++){if(i(A[f][g],Z,Ne,He,nn)===!1)return!1;Z++}pn==="MultiLineString"&&He++,pn==="Polygon"&&nn++}pn==="Polygon"&&He++;break;case"MultiPolygon":for(f=0;f<A.length;f++){for(nn=0,g=0;g<A[f].length;g++){for(y=0;y<A[f][g].length-N;y++){if(i(A[f][g][y],Z,Ne,He,nn)===!1)return!1;Z++}nn++}He++}break;case"GeometryCollection":for(f=0;f<x.geometries.length;f++)if(ne(x.geometries[f],i,s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function se(a,i,s,f){var g=s;return ne(a,function(y,x,O,A,P){x===0&&s===void 0?g=y:g=i(g,y,x,O,A,P)},f),g}function fe(a,i){var s;switch(a.type){case"FeatureCollection":for(s=0;s<a.features.length&&i(a.features[s].properties,s)!==!1;s++);break;case"Feature":i(a.properties,0);break}}function tt(a,i,s){var f=s;return fe(a,function(g,y){y===0&&s===void 0?f=g:f=i(f,g,y)}),f}function D(a,i){if(a.type==="Feature")i(a,0);else if(a.type==="FeatureCollection")for(var s=0;s<a.features.length&&i(a.features[s],s)!==!1;s++);}function V(a,i,s){var f=s;return D(a,function(g,y){y===0&&s===void 0?f=g:f=i(f,g,y)}),f}function nt(a){var i=[];return ne(a,function(s){i.push(s)}),i}function _t(a,i){var s,f,g,y,x,O,A,P,N,Z,W=0,mt=a.type==="FeatureCollection",Nt=a.type==="Feature",Jt=mt?a.features.length:1;for(s=0;s<Jt;s++){for(O=mt?a.features[s].geometry:Nt?a.geometry:a,P=mt?a.features[s].properties:Nt?a.properties:{},N=mt?a.features[s].bbox:Nt?a.bbox:void 0,Z=mt?a.features[s].id:Nt?a.id:void 0,A=O?O.type==="GeometryCollection":!1,x=A?O.geometries.length:1,g=0;g<x;g++){if(y=A?O.geometries[g]:O,y===null){if(i(null,W,P,N,Z)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(i(y,W,P,N,Z)===!1)return!1;break}case"GeometryCollection":{for(f=0;f<y.geometries.length;f++)if(i(y.geometries[f],W,P,N,Z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}W++}}function Ot(a,i,s){var f=s;return _t(a,function(g,y,x,O,A){y===0&&s===void 0?f=g:f=i(f,g,y,x,O,A)}),f}function ge(a,i){_t(a,function(s,f,g,y,x){var O=s===null?null:s.type;switch(O){case null:case"Point":case"LineString":case"Polygon":return i(Mt(s,g,{bbox:y,id:x}),f,0)===!1?!1:void 0}var A;switch(O){case"MultiPoint":A="Point";break;case"MultiLineString":A="LineString";break;case"MultiPolygon":A="Polygon";break}for(var P=0;P<s.coordinates.length;P++){var N=s.coordinates[P],Z={type:A,coordinates:N};if(i(Mt(Z,g),f,P)===!1)return!1}})}function Ee(a,i,s){var f=s;return ge(a,function(g,y,x){y===0&&x===0&&s===void 0?f=g:f=i(f,g,y,x)}),f}function Be(a,i){ge(a,function(s,f,g){var y=0;if(s.geometry){var x=s.geometry.type;if(!(x==="Point"||x==="MultiPoint")){var O,A=0,P=0,N=0;if(ne(s,function(Z,W,mt,Nt,Jt){if(O===void 0||f>A||Nt>P||Jt>N){O=Z,A=f,P=Nt,N=Jt,y=0;return}var ye=lineString([O,Z],s.properties);if(i(ye,f,g,Jt,y)===!1)return!1;y++,O=Z})===!1)return!1}}})}function je(a,i,s){var f=s,g=!1;return Be(a,function(y,x,O,A,P){g===!1&&s===void 0?f=y:f=i(f,y,x,O,A,P),g=!0}),f}function fn(a,i){if(!a)throw new Error("geojson is required");ge(a,function(s,f,g){if(s.geometry!==null){var y=s.geometry.type,x=s.geometry.coordinates;switch(y){case"LineString":if(i(s,f,g,0,0)===!1)return!1;break;case"Polygon":for(var O=0;O<x.length;O++)if(i(lineString(x[O],s.properties),f,g,O)===!1)return!1;break}}})}function Re(a,i,s){var f=s;return fn(a,function(g,y,x,O){y===0&&s===void 0?f=g:f=i(f,g,y,x,O)}),f}function Ye(a,i){if(i=i||{},!isObject(i))throw new Error("options is invalid");var s=i.featureIndex||0,f=i.multiFeatureIndex||0,g=i.geometryIndex||0,y=i.segmentIndex||0,x=i.properties,O;switch(a.type){case"FeatureCollection":s<0&&(s=a.features.length+s),x=x||a.features[s].properties,O=a.features[s].geometry;break;case"Feature":x=x||a.properties,O=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":O=a;break;default:throw new Error("geojson is invalid")}if(O===null)return null;var A=O.coordinates;switch(O.type){case"Point":case"MultiPoint":return null;case"LineString":return y<0&&(y=A.length+y-1),lineString([A[y],A[y+1]],x,i);case"Polygon":return g<0&&(g=A.length+g),y<0&&(y=A[g].length+y-1),lineString([A[g][y],A[g][y+1]],x,i);case"MultiLineString":return f<0&&(f=A.length+f),y<0&&(y=A[f].length+y-1),lineString([A[f][y],A[f][y+1]],x,i);case"MultiPolygon":return f<0&&(f=A.length+f),g<0&&(g=A[f].length+g),y<0&&(y=A[f][g].length-y-1),lineString([A[f][g][y],A[f][g][y+1]],x,i)}throw new Error("geojson is invalid")}function cn(a,i){if(i=i||{},!isObject(i))throw new Error("options is invalid");var s=i.featureIndex||0,f=i.multiFeatureIndex||0,g=i.geometryIndex||0,y=i.coordIndex||0,x=i.properties,O;switch(a.type){case"FeatureCollection":s<0&&(s=a.features.length+s),x=x||a.features[s].properties,O=a.features[s].geometry;break;case"Feature":x=x||a.properties,O=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":O=a;break;default:throw new Error("geojson is invalid")}if(O===null)return null;var A=O.coordinates;switch(O.type){case"Point":return point(A,x,i);case"MultiPoint":return f<0&&(f=A.length+f),point(A[f],x,i);case"LineString":return y<0&&(y=A.length+y),point(A[y],x,i);case"Polygon":return g<0&&(g=A.length+g),y<0&&(y=A[g].length+y),point(A[g][y],x,i);case"MultiLineString":return f<0&&(f=A.length+f),y<0&&(y=A[f].length+y),point(A[f][y],x,i);case"MultiPolygon":return f<0&&(f=A.length+f),g<0&&(g=A[f].length+g),y<0&&(y=A[f][g].length-y),point(A[f][g][y],x,i)}throw new Error("geojson is invalid")}var sn={REGISTERED_PROTOCOLS:{}},Mn=Object.defineProperty,Vn=Object.defineProperties,Un=Object.getOwnPropertyDescriptors,Jn=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,Qr=(a,i,s)=>i in a?Mn(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,Sr=(a,i)=>{for(var s in i||(i={}))hr.call(i,s)&&Qr(a,s,i[s]);if(Jn)for(var s of Jn(i))Ir.call(i,s)&&Qr(a,s,i[s]);return a},Or=(a,i)=>Vn(a,Un(i)),zr=a=>sn.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))],ci=class extends Error{constructor(a,i,s,f){super(`AJAXError: ${i} (${a}): ${s}`),this.status=a,this.statusText=i,this.url=s,this.body=f}};function Ti(a,i){const s=new XMLHttpRequest,f=Array.isArray(a.url)?a.url[0]:a.url;s.open(a.method||"GET",f,!0),a.type==="arrayBuffer"&&(s.responseType="arraybuffer");for(const g in a.headers)a.headers.hasOwnProperty(g)&&s.setRequestHeader(g,a.headers[g]);return a.type==="json"&&(s.responseType="text",s.setRequestHeader("Accept","application/json")),s.withCredentials=a.credentials==="include",s.onerror=()=>{i(new Error(s.statusText))},s.onload=()=>{if((s.status>=200&&s.status<300||s.status===0)&&s.response!==null){let g=s.response;if(a.type==="json")try{g=JSON.parse(s.response)}catch(y){return i(y)}i(null,g,s.getResponseHeader("Cache-Control"),s.getResponseHeader("Expires"),s)}else{const g=new Blob([s.response],{type:s.getResponseHeader("Content-Type")});i(new ci(s.status,s.statusText,f.toString(),g))}},s.cancel=s.abort,s.send(a.body),s}function Ci(a){return new Promise((i,s)=>{Ti(a,(f,g,y,x,O)=>{f?s({err:f,data:null,xhr:O}):i({err:null,data:g,cacheControl:y,expires:x,xhr:O})})})}function ri(a,i){return Ti(a,i)}var Hi=(a,i)=>(zr(a.url)||ri)(Or(Sr({},a),{type:"json"}),i),fo=(a,i)=>(zr(a.url)||ri)(Or(Sr({},a),{type:"arrayBuffer"}),i),es=(a,i)=>ri(Or(Sr({},a),{method:"POST"}),i),so=(a,i)=>ri(Or(Sr({},a),{method:"GET"}),i);function va(a){const i=window.document.createElement("a");return i.href=a,i.protocol===window.document.location.protocol&&i.host===window.document.location.host}var Yr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Jr(a,i){const s=new window.Image,f=window.URL||window.webkitURL;s.crossOrigin="anonymous",s.onload=()=>{i(null,s),f.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=Yr})},s.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(a)],{type:"image/png"});s.src=a.byteLength?f.createObjectURL(g):Yr}function at(a,i){const s=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(s).then(f=>{i(null,f)}).catch(f=>{i(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var ht=(a,i,s)=>{const f=(g,y)=>{if(g)i(g);else if(y){const x=typeof createImageBitmap=="function",O=s?s(y):y;x?at(O,i):Jr(O,i)}};return a.type==="json"?Hi(a,f):fo(a,f)},Xt=(a,i)=>{typeof createImageBitmap=="function"?at(a,i):Jr(a,i)},ue=(a=>(a.CENTER="center",a.TOP="top",a["TOP-LEFT"]="top-left",a["TOP-RIGHT"]="top-right",a.BOTTOM="bottom",a["BOTTOM-LEFT"]="bottom-left",a["BOTTOM-RIGHT"]="bottom-right",a.LEFT="left",a.RIGHT="right",a))(ue||{}),Le={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fe(a,i,s){const f=a.classList;for(const g in Le)Le.hasOwnProperty(g)&&f.remove(`l7-${s}-anchor-${g}`);f.add(`l7-${s}-anchor-${i}`)}function ve(a,i,s){a.prototype=i.prototype=s,s.constructor=a}function me(a,i){var s=Object.create(a.prototype);for(var f in i)s[f]=i[f];return s}function Ue(){}var Ve=.7,vn=1/Ve,bn="\\s*([+-]?\\d+)\\s*",An="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",hn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_n=/^#([0-9a-f]{3,8})$/,Tn=new RegExp("^rgb\\("+[bn,bn,bn]+"\\)$"),mn=new RegExp("^rgb\\("+[hn,hn,hn]+"\\)$"),Zn=new RegExp("^rgba\\("+[bn,bn,bn,An]+"\\)$"),kn=new RegExp("^rgba\\("+[hn,hn,hn,An]+"\\)$"),Hn=new RegExp("^hsl\\("+[An,hn,hn]+"\\)$"),Ln=new RegExp("^hsla\\("+[An,hn,hn,An]+"\\)$"),Fn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ve(Ue,ti,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:tr,formatHex:tr,formatHsl:di,formatRgb:Mi,toString:Mi});function tr(){return this.rgb().formatHex()}function di(){return Wr(this).formatHsl()}function Mi(){return this.rgb().formatRgb()}function ti(a){var i,s;return a=(a+"").trim().toLowerCase(),(i=_n.exec(a))?(s=i[1].length,i=parseInt(i[1],16),s===6?Ni(i):s===3?new _e(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):s===8?yi(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):s===4?yi(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=Tn.exec(a))?new _e(i[1],i[2],i[3],1):(i=mn.exec(a))?new _e(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=Zn.exec(a))?yi(i[1],i[2],i[3],i[4]):(i=kn.exec(a))?yi(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=Hn.exec(a))?Wn(i[1],i[2]/100,i[3]/100,1):(i=Ln.exec(a))?Wn(i[1],i[2]/100,i[3]/100,i[4]):Fn.hasOwnProperty(a)?Ni(Fn[a]):a==="transparent"?new _e(NaN,NaN,NaN,0):null}function Ni(a){return new _e(a>>16&255,a>>8&255,a&255,1)}function yi(a,i,s,f){return f<=0&&(a=i=s=NaN),new _e(a,i,s,f)}function wt(a){return a instanceof Ue||(a=ti(a)),a?(a=a.rgb(),new _e(a.r,a.g,a.b,a.opacity)):new _e}function Bt(a,i,s,f){return arguments.length===1?wt(a):new _e(a,i,s,f==null?1:f)}function _e(a,i,s,f){this.r=+a,this.g=+i,this.b=+s,this.opacity=+f}ve(_e,Bt,me(Ue,{brighter:function(a){return a=a==null?vn:Math.pow(vn,a),new _e(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=a==null?Ve:Math.pow(Ve,a),new _e(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tn,formatHex:tn,formatRgb:gn,toString:gn}));function tn(){return"#"+Cn(this.r)+Cn(this.g)+Cn(this.b)}function gn(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(a===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(a===1?")":", "+a+")")}function Cn(a){return a=Math.max(0,Math.min(255,Math.round(a)||0)),(a<16?"0":"")+a.toString(16)}function Wn(a,i,s,f){return f<=0?a=i=s=NaN:s<=0||s>=1?a=i=NaN:i<=0&&(a=NaN),new Er(a,i,s,f)}function Wr(a){if(a instanceof Er)return new Er(a.h,a.s,a.l,a.opacity);if(a instanceof Ue||(a=ti(a)),!a)return new Er;if(a instanceof Er)return a;a=a.rgb();var i=a.r/255,s=a.g/255,f=a.b/255,g=Math.min(i,s,f),y=Math.max(i,s,f),x=NaN,O=y-g,A=(y+g)/2;return O?(i===y?x=(s-f)/O+(s<f)*6:s===y?x=(f-i)/O+2:x=(i-s)/O+4,O/=A<.5?y+g:2-y-g,x*=60):O=A>0&&A<1?0:x,new Er(x,O,A,a.opacity)}function ei(a,i,s,f){return arguments.length===1?Wr(a):new Er(a,i,s,f==null?1:f)}function Er(a,i,s,f){this.h=+a,this.s=+i,this.l=+s,this.opacity=+f}ve(Er,ei,me(Ue,{brighter:function(a){return a=a==null?vn:Math.pow(vn,a),new Er(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=a==null?Ve:Math.pow(Ve,a),new Er(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+(this.h<0)*360,i=isNaN(a)||isNaN(this.s)?0:this.s,s=this.l,f=s+(s<.5?s:1-s)*i,g=2*s-f;return new _e(ai(a>=240?a-240:a+120,g,f),ai(a,g,f),ai(a<120?a+240:a-120,g,f),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(a===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(a===1?")":", "+a+")")}}));function ai(a,i,s){return(a<60?i+(s-i)*a/60:a<180?s:a<240?i+(s-i)*(240-a)/60:i)*255}function oP(a){return typeof a=="string"?!!d3.color(a):!1}function Fr(a){const i=ti(a),s=[0,0,0,0];return i!=null&&(s[0]=i.r/255,s[1]=i.g/255,s[2]=i.b/255,s[3]=i.opacity),s}function Gs(a){const i=a&&a[0],s=a&&a[1],f=a&&a[2];return i+s*256+f*65536-1}function $s(a){return[a+1&255,a+1>>8&255,a+1>>8>>8&255]}function nO(a){let i=window.document.createElement("canvas"),s=i.getContext("2d");i.width=256,i.height=1;let f=null;const g=s.createLinearGradient(0,0,256,1),y=a.positions[0],x=a.positions[a.positions.length-1];for(let O=0;O<a.colors.length;++O){const A=(a.positions[O]-y)/(x-y);g.addColorStop(A,a.colors[O])}return s.fillStyle=g,s.fillRect(0,0,256,1),f=new Uint8ClampedArray(s.getImageData(0,0,256,1).data),i=null,s=null,{data:f,width:256,height:1}}function rO(a,i){let s=window.document.createElement("canvas"),f=s.getContext("2d");s.width=256,s.height=1;const g=f.createLinearGradient(0,0,256,1),y=i[1]-i[0];for(let A=0;A<a.colors.length;++A){const P=Math.max((a.positions[A]-i[0])/y,0);g.addColorStop(P,a.colors[A])}f.fillStyle=g,f.fillRect(0,0,256,1);const x=f.getImageData(0,0,256,1).data,O=Mp(f,x);return s=null,f=null,O}function Ym(a){let i=window.document.createElement("canvas"),s=i.getContext("2d");i.width=256,i.height=1;const f=s.createImageData(256,1);return f.data.fill(0),a.positions.forEach((g,y)=>{const x=Fr(a.colors[y]);f.data[g*4+0]=x[0]*255,f.data[g*4+1]=x[1]*255,f.data[g*4+2]=x[2]*255,f.data[g*4+3]=x[3]*255}),i=null,s=null,f}function iO(a){let i=window.document.createElement("canvas"),s=i.getContext("2d");s.globalAlpha=1,i.width=256,i.height=1;const f=256/a.colors.length;for(let x=0;x<a.colors.length;x++)s.beginPath(),s.lineWidth=2,s.strokeStyle=a.colors[x],s.moveTo(x*f,0),s.lineTo((x+1)*f,0),s.stroke();const g=s.getImageData(0,0,256,1).data,y=Mp(s,g);return i=null,s=null,y}function Xm(a,i){let s=window.document.createElement("canvas"),f=s.getContext("2d");f.globalAlpha=1,s.width=256,s.height=1;const g=i[1]-i[0];a.positions.length-a.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(let O=0;O<a.colors.length;O++)f.beginPath(),f.lineWidth=2,f.strokeStyle=a.colors[O],f.moveTo((a.positions[O]-i[0])/g*255,0),f.lineTo((a.positions[O+1]-i[0])/g*255,0),f.stroke();const y=f.getImageData(0,0,256,1).data,x=Mp(f,y);return s=null,f=null,x}function Mp(a,i){const s=a.createImageData(256,1);for(let f=0;f<s.data.length;f+=4)s.data[f+0]=i[f+0],s.data[f+1]=i[f+1],s.data[f+2]=i[f+2],s.data[f+3]=i[f+3];return s}function Lp(a){switch(a==null?void 0:a.type){case"cat":return[0,255];default:return[0,1]}}var qm=k(74691),oO=k.n(qm),aO=k(50361),sO=k.n(aO),cO=k(23279),lO=k.n(cO),uO=k(27361),Km=k.n(uO),fO=k(51584),dO=k.n(fO),Pp=k(18446),Qm=k.n(Pp),Vf=k(14293),Jm=k.n(Vf),ty=k(81763),Ip=k.n(ty),ey=k(68630),Rp=k.n(ey),ny=k(47037),kp=k.n(ny),ry=k(36719),Dp=k.n(ry),iy=k(82492),Fp=k.n(iy),oy=k(30236),ay=k.n(oy),sy=k(97019),cy=k.n(sy),ly=k(23493),uy=k.n(ly),Np=k(44908),fy=k.n(Np),dy=k(11700),hy=k.n(dy),py=k(23560),gy=k.n(py),vy=k(13218),Uc=k.n(vy),hO=k(52353),pO=k.n(hO),aP=k(68929),yy=k.n(aP),by=k(73955),fr=k.n(by),ii={isNil:Jm(),merge:Fp(),throttle:uy(),isString:kp(),debounce:lO(),pull:cy(),isTypedArray:Dp(),isPlainObject:Rp(),isNumber:Ip(),isBoolean:dO(),isEqual:Qm(),cloneDeep:sO(),uniq:fy(),clamp:oO(),upperFirst:hy(),get:Km(),mergeWith:ay(),isFunction:gy(),isObject:Uc(),isUndefined:pO(),camelCase:yy(),uniqueId:fr()},{pull:gO}=ii;function vO(a){let i=a;return typeof a=="string"&&(i=window.document.getElementById(a)),i}function _y(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function xy(a){return _y(a).split(/\s+/)}function mO(a){var i;const s=(i=document==null?void 0:document.documentElement)==null?void 0:i.style;if(!s)return a[0];for(const f in a)if(a[f]&&a[f]in s)return a[f];return a[0]}function Bi(a,i,s){const f=window.document.createElement(a);return i&&(f.className=i||""),s&&s.appendChild(f),f}function Ba(a){const i=a.parentNode;i&&i.removeChild(a)}function ja(a,i){if(a.classList!==void 0){const s=xy(i);for(let f=0,g=s.length;f<g;f++)a.classList.add(s[f])}else if(!Zc(a,i)){const s=Ji(a);Ys(a,(s?s+" ":"")+i)}}function co(a,i){a.classList!==void 0?xy(i).forEach(f=>{a.classList.remove(f)}):Ys(a,_y((" "+Ji(a)+" ").replace(" "+i+" "," ")))}function Zc(a,i){if(a.classList!==void 0)return a.classList.contains(i);const s=Ji(a);return s.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(s)}function Ys(a,i){a instanceof HTMLElement?a.className=i:a.className.baseVal=i}function sP(a,i,s){s===void 0?Zc(a,i)?co(a,i):ja(a,i):s?ja(a,i):co(a,i)}function Ji(a){return a instanceof SVGElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function cP(a){for(;a&&a.firstChild;)a.removeChild(a.firstChild)}var yO=mO(["transform","WebkitTransform"]);function bO(a,i){a.style[yO]=i}function lP(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{const a=window.document.createEvent("UIEvents");a.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(a)}}function _O(a){const i=["padding: "+(a.height/2-8)+"px "+a.width/2+"px;","line-height: "+a.height+"px;","background-image: url("+a.toDataURL()+");"];console.log(`%c
`,i.join(""))}function xO(){var a;const i=window.document.querySelector('meta[name="viewport"]');if(!i)return 1;const f=((a=i.content)==null?void 0:a.split(",")).find(g=>{const[y]=g.split("=");return y==="initial-scale"});return f?f.split("=")[1]*1:1}var Vi=xO()<1?1:window.devicePixelRatio;function Sy(a,i){a.setAttribute("style",`${a.style.cssText}${i}`)}function ns(a){return a.split(";").map(i=>i.trim()).filter(i=>i)}function uP(a,i){var s;const f=ns((s=a.getAttribute("style"))!=null?s:""),g=ns(i),y=gO(f,...g);a.setAttribute("style",y.join(";"))}function Wf(a){return Object.entries(a).map(([i,s])=>`${i}: ${s}`).join(";")}function rs(a,i){return{left:a.left-i.left,top:a.top-i.top,right:i.left+i.width-a.left-a.width,bottom:i.top+i.height-a.top-a.height}}function SO(a,i){a.checked=i,i?a.setAttribute("checked","true"):a.removeAttribute("checked")}function Bp(a){a.innerHTML=""}function jp(a){a.setAttribute("draggable","false")}function Oy(a,i){if(typeof i=="string"){const s=document.createElement("div");for(s.innerHTML=i;s.firstChild;)a.append(s.firstChild)}else Array.isArray(i)?a.append(...i):a.append(i)}function Ey(a,i){var s;const f=Array.isArray(i)?i:[i];let g=a;for(;g instanceof Element&&g!==window.document.body;){if(f.find(y=>g==null?void 0:g.matches(y)))return g;g=(s=g==null?void 0:g.parentElement)!=null?s:null}}function wy(a){return typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap}function OO(){return typeof importScripts=="function"}var fP=OO()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Gf=navigator==null?void 0:navigator.userAgent,dP=!!Gf.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),hP=Gf.indexOf("Android")>-1||Gf.indexOf("Adr")>-1;function pP(){const a=Gf,i=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let s=!0;for(const f of i)if(a.indexOf(f)>0){s=!1;break}return s}function gP(a,i){a.forEach(s=>{i[s]&&(i[s]=i[s].bind(i))})}var vP=class{constructor(a=16){this.duration=16,this.timestamp=new Date().getTime(),this.duration=a}run(a){const i=new Date().getTime(),s=i-this.timestamp;this.timestamp=i,s>=this.duration&&a()}};function zp(a){var i=[1/0,1/0,-1/0,-1/0];return ne(a,function(s){i[0]>s[0]&&(i[0]=s[0]),i[1]>s[1]&&(i[1]=s[1]),i[2]<s[0]&&(i[2]=s[0]),i[3]<s[1]&&(i[3]=s[1])}),i}zp.default=zp;var EO=zp;function ko(a){return typeof a=="number"}function bi(a){return a-Math.fround(a)}var $f=2*Math.PI*6378137/2;function wO(a,i){const[s,f,g,y]=i;return a.lng>s&&a.lng<=g&&a.lat>f&&a.lat<=y}function Up(a){const i=[1/0,1/0,-1/0,-1/0];return a.forEach(s=>{const{coordinates:f}=s;Yf(i,f)}),i}function Yf(a,i){return Array.isArray(i[0])?i.forEach(s=>{Yf(a,s)}):(a[0]>i[0]&&(a[0]=i[0]),a[1]>i[1]&&(a[1]=i[1]),a[2]<i[0]&&(a[2]=i[0]),a[3]<i[1]&&(a[3]=i[1])),a}function Ay(a,i){return ho(a,i)}function ho(a,i){return Array.isArray(a[0])?a.map(s=>ho(s,i)):i(a)}function Hc(a,i=!0,s={enable:!0,decimal:1}){a=hi(a,i);const f=a[0],g=a[1];let y=f*$f/180,x=Math.log(Math.tan((90+g)*Math.PI/360))/(Math.PI/180);return x=x*$f/180,s.enable&&(y=Number(y.toFixed(s.decimal)),x=Number(x.toFixed(s.decimal))),a.length===3?[y,x,a[2]]:[y,x]}function Zp(a,i=6){const s=a[0],f=a[1];let g=s/$f*180,y=f/$f*180;return y=180/Math.PI*(2*Math.atan(Math.exp(y*Math.PI/180))-Math.PI/2),i!=null&&(g=Number(g.toFixed(i)),y=Number(y.toFixed(i))),a.length===3?[g,y,a[2]]:[g,y]}function Ty(a){if(a==null)throw new Error("lng is required");return(a>180||a<-180)&&(a=a%360,a>180&&(a=-360+a),a<-180&&(a=360+a),a===0&&(a=0)),a}function AO(a){if(a==null)throw new Error("lat is required");return(a>90||a<-90)&&(a=a%180,a>90&&(a=-180+a),a<-90&&(a=180+a),a===0&&(a=0)),a}function hi(a,i){if(i===!1)return a;const s=Ty(a[0]);let f=AO(a[1]);return f>85&&(f=85),f<-85&&(f=-85),a.length===3?[s,f,a[2]]:[s,f]}function Oo(a){const i=85.0511287798,s=Math.max(Math.min(i,a[1]),-i),f=256<<20;let g=Math.PI/180,y=a[0]*g,x=s*g;x=Math.log(Math.tan(Math.PI/4+x/2));const O=.5/Math.PI,A=.5,P=-.5/Math.PI;return g=.5,y=f*(O*y+A),x=f*(P*x+g),[Math.floor(y),Math.floor(x)]}function Hp(a){const i=.5/Math.PI,s=.5,f=-.5/Math.PI;let g=.5;const y=256<<20;let[x,O]=a;x=(x/y-s)/i,O=(O/y-g)/f,O=(Math.atan(Math.pow(Math.E,O))-Math.PI/4)*2,g=Math.PI/180;const A=O/g;return[x/g,A]}function Vp(a,i){const s=85.0511287798,f=Math.PI/180,g=6378137;return i=Math.max(Math.min(s,i),-s),a*=f,i*=f,i=Math.log(Math.tan(Math.PI/4+i/2)),[a*g,i*g]}function Wp(a,i){const s=Math.PI/180,f=6378137,g=a/f/s,y=2*(Math.atan(Math.exp(i/f))-Math.PI/4)/s;return[g,y]}function TO(a,i,s){const f=degreesToRadians(i[1]-a[1]),g=degreesToRadians(i[0]-a[0]),y=degreesToRadians(a[1]),x=degreesToRadians(i[1]),O=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(g/2),2)*Math.cos(y)*Math.cos(x);return radiansToLength(2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O)),s="meters")}function Li(a){const i=Math.PI/180,s=85.0511287798,f=6378137,g=Math.max(Math.min(s,a[1]),-s),y=Math.sin(g*i),x=f*a[0]*i,O=f*Math.log((1+y)/(1-y))/2;return[x,O]}function Xf(a,i){const s=Math.abs(a[1][1]-a[0][1])*i,f=Math.abs(a[1][0]-a[0][0])*i;return[[a[0][0]-f,a[0][1]-s],[a[1][0]+f,a[1][1]+s]]}function oi(a,i){return a[0][0]<=i[0][0]&&a[0][1]<=i[0][1]&&a[1][0]>=i[1][0]&&a[1][1]>=i[1][1]}function qf(a){return[[a[0],a[1]],[a[2],a[3]]]}function Gp(a){const i=Kl(a,[0,0]);return[a[0]/i,a[1]/i]}function Kl(a,i){return Math.sqrt(Math.pow(a[0]-i[0],2)+Math.pow(a[1]-i[1],2))}function Cy(a,i){return a[0]*i[0]+a[1]*i[1]}function Kf(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function mP(a,i){return Math.acos(Cy(a,i)/(Kf(a)*Kf(i)))*180/Math.PI}function CO(a,i){return i[0]>0?i[1]>0?90-Math.atan(i[1]/i[0])*180/Math.PI:90+Math.atan(-i[1]/i[0])*180/Math.PI:i[1]<0?180+(90-Math.atan(i[1]/i[0])*180/Math.PI):270+Math.atan(i[1]/-i[0])*180/Math.PI}function yP(a,i=100){if(!a||a.length<2)return;const s=[0,1];let f=0;const g=[];for(let y=0;y<a.length-1;y++){const x=a[y],O=a[y+1],A=Kl(x,O);f+=A;const P=[x[0]-O[0],x[1]-O[1]];let N=CO(s,P);if(y>0){const Z=g[y-1].rotation;Z-N>360-Z+N&&(N=N+360)}g.push({start:x,end:O,dis:A,rotation:N,duration:0})}return g.map(y=>{y.duration=i*(y.dis/f)}),g}function Xs(a){if(ko(a[0]))return a;if(ko(a[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(ko(a[0][0][0])){const i=a;let s=0,f=0,g=0;return i.forEach(y=>{y.forEach(x=>{s+=x[0],f+=x[1],g++})}),[s/g,f/g,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function MO(a){let i=a[0],s=a[1],f=a[0],g=a[1],y=0,x=0,O=0;for(let A=0;A<a.length;A+=2){const P=a[A],N=a[A+1];P&&N&&(i=Math.max(P,i),s=Math.max(N,s),f=Math.min(P,f),g=Math.min(N,g),y+=P,x+=N,O++)}return{center:[y/O,x/O],radius:Math.sqrt(Math.pow(i-f,2)+Math.pow(s-g,2))/2}}function My(a){return EO(qt([xt(a)]))}function bP(a){let f=0;a+="x";const g=Math.floor(9007199254740991/137);for(let y=0;y<a.length;y++)f>g&&(f=Math.floor(f/137)),f=f*131+a.charCodeAt(y);return f}function _P(a){a=a.toString();let i=5381,s=a.length;for(;s;)i=i*33^a.charCodeAt(--s);return i>>>0}function Ly(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const i=Math.random()*16|0;return(a==="x"?i:i&3|8).toString(16)})}function xP(a,i,s,f,g=30,y){let x=s;return y&&(x=Math.round(s*(g-1))/(g-1)),f?Ry(a,i,x,f):Ry(a,i,x,.314)}function Py(a,i){const s=1-i;return(a[0]*s+a[1]*i)*s+(a[1]*s+a[2]*i)*i}function LO(a,i){return Math.sqrt(Math.pow(a[0]-i[0],2)+Math.pow(a[1]-i[1],2))}function Iy(a,i,s){const f=[i[0]-a[0],i[1]-a[1]],g=LO(f,[0,0]),y=Math.atan2(f[1],f[0]),x=g/2/Math.cos(s),O=y+s;return[x*Math.cos(O)+a[0],x*Math.sin(O)+a[1]]}function Ry(a,i,s,f){const g=Iy(a,i,f),y=[a[0],g[0],i[0]],x=[a[1],g[1],i[1]];return[Py(y,s),Py(x,s),0]}function PO(a,i,s,f,g=30,y){let x=s;return y&&(x=Math.round(s*29)/29),IO(a,i,x)}function ky(a,i){const s=[a[0]-i[0],a[1]-i[1]],f=[Math.sin(s[0]/2),Math.sin(s[1]/2)],g=f[1]*f[1]+Math.cos(a[1])*Math.cos(i[1])*f[0]*f[0];return 2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))}function IO(a,i,s){const f=[degreesToRadians(a[0]),degreesToRadians(a[1])],g=[degreesToRadians(i[0]),degreesToRadians(i[1])],y=ky(f,g);if(Math.abs(y-Math.PI)<.001)return[(1-s)*f[0]+s*g[0],(1-s)*f[1]+s*g[1]];const x=Math.sin((1-s)*y)/Math.sin(y),O=Math.sin(s*y)/Math.sin(y),A=[Math.sin(f[0]),Math.sin(f[1])],P=[Math.cos(f[0]),Math.cos(f[1])],N=[Math.sin(g[0]),Math.sin(g[1])],Z=[Math.cos(g[0]),Math.cos(g[1])],W=x*P[1]*P[0]+O*Z[1]*Z[0],mt=x*P[1]*A[0]+O*Z[1]*N[0],Nt=x*A[1]+O*N[1];return[radiansToDegrees(Math.atan2(mt,W)),radiansToDegrees(Math.atan2(Nt,Math.sqrt(W*W+mt*mt)))]}function RO(a,i){let s=0;const f=[];for(let O=0;O<a.length-1;O++){const A=a[O],P=a[O+1],N=kO(A,P),Z=s;s+=N,f.push({p1:A,p2:P,totalDistance:s,distance:N,lastTotalDistance:Z})}const g=s*i;let y,x;for(const O of f)if(O.totalDistance>g){const P=O.p1,N=O.p2,Z=(g-O.lastTotalDistance)/O.distance,W=pr(N,P,Z);y=W[0],x=W[1];break}return{lng:y,lat:x,height:0}}function pr(a,i,s){return[a[0]*s+i[0]*(1-s),a[1]*s+i[1]*(1-s)]}function kO(a,i){return Math.sqrt(Math.pow(a[0]-i[0],2)+Math.pow(a[1]-i[1],2))}var SP=Object.defineProperty,Qf=Object.getOwnPropertySymbols,Dy=Object.prototype.hasOwnProperty,Fy=Object.prototype.propertyIsEnumerable,$p=(a,i,s)=>i in a?SP(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,Vc=(a,i)=>{for(var s in i||(i={}))Dy.call(i,s)&&$p(a,s,i[s]);if(Qf)for(var s of Qf(i))Fy.call(i,s)&&$p(a,s,i[s]);return a};function Nr(a,i){const{featureId:s}=i;let f=a.data.dataArray;return typeof s=="number"&&(f=f.filter(({id:g})=>g===s)),f.map(g=>{const y=Ny(g,i);return Vc(Vc({},g),y)})}function Yp(a,i){return new Promise(s=>{a.inited?s(Nr(a,i)):a.once("update",()=>{s(Nr(a,i))})})}function Ny(a,i){const{offset:s,shape:f,thetaOffset:g,segmentNumber:y=30,autoFit:x=!0}=i,{coordinates:O}=a;if(f==="line")return pathLineAtOffset(O,s);const A=O[0],P=O[1],N=typeof g=="string"?a[g]||0:g;let Z;switch(f){case"arc":Z=arcLineAtOffset;break;case"greatcircle":Z=greatCircleLineAtOffset;break;default:Z=arcLineAtOffset}const[W,mt,Nt]=Z(A,P,s,N,y,x);return{lng:W,lat:mt,height:Nt}}var OP=class{constructor(a=50,i){this.limit=a,this.destroy=i||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(a=>{this.delete(a)}),this.cache={},this.order=[]}get(a){const i=this.cache[a];return i&&(this.deleteOrder(a),this.appendOrder(a)),i}set(a,i){this.cache[a]?(this.delete(a),this.cache[a]=i,this.appendOrder(a)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[a]=i,this.appendOrder(a))}delete(a){const i=this.cache[a];i&&(this.deleteCache(a),this.deleteOrder(a),this.destroy(i,a))}deleteCache(a){delete this.cache[a]}deleteOrder(a){const i=this.order.findIndex(s=>s===a);i>=0&&this.order.splice(i,1)}appendOrder(a){this.order.push(a)}defaultDestroy(a,i){return null}};function EP(a){if(a.length===0)throw new Error("max requires at least one data point");let i=a[0];for(let s=1;s<a.length;s++)a[s]>i&&(i=a[s]);return i*1}function Xp(a){if(a.length===0)throw new Error("min requires at least one data point");let i=a[0];for(let s=1;s<a.length;s++)a[s]<i&&(i=a[s]);return i*1}function Ql(a){if(a.length===0)return 0;let i=a[0]*1;for(let s=1;s<a.length;s++)i+=a[s]*1;return i}function wP(a){if(a.length===0)throw new Error("mean requires at least one data point");return Ql(a)/a.length}function AP(a){if(a.length===0)throw new Error("mean requires at least one data point");if(a.length<3)return a[0];a.sort();let i=a[0],s=NaN,f=0,g=1;for(let y=1;y<a.length+1;y++)a[y]!==i?(g>f&&(f=g,s=i),g=1,i=a[y]):g++;return s*1}var Jf={min:Xp,max:EP,mean:wP,sum:Ql,mode:AP};function qs(a,i){return a.map(s=>s[i])}function Wi(a,i){return Jf[a](i)}function DO(a,i){i===void 0&&(i={});var s=Number(a[0]),f=Number(a[1]),g=Number(a[2]),y=Number(a[3]);if(a.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var x=[s,f],O=[s,y],A=[g,y],P=[g,f];return te([[x,P,A,O,x]],i.properties,{bbox:a,id:i.id})}var to=k(26729),qp=k.n(to),Jl=(a=>(a.Realtime="realtime",a.Overlap="overlap",a.Replace="replace",a))(Jl||{}),_i=(a=>(a.Loading="Loading",a.Loaded="Loaded",a.Failure="Failure",a.Cancelled="Cancelled",a))(_i||{}),By=0,jy=1,tu=2;function FO(a){a.forEach(i=>{i.isCurrent&&(i.isVisible=i.isLoaded)})}function an(a){a.forEach(i=>{i.properties.state=By}),a.forEach(i=>{i.isCurrent&&!Uy(i)&&td(i)}),a.forEach(i=>{i.isVisible=!!(i.properties.state&tu)})}function zy(a){a.forEach(s=>{s.properties.state=By}),a.forEach(s=>{s.isCurrent&&Uy(s)}),a.slice().sort((s,f)=>s.z-f.z).forEach(s=>{s.isVisible=!!(s.properties.state&tu),s.children.length&&(s.isVisible||s.properties.state&jy)?s.children.forEach(f=>{f.properties.state=jy}):s.isCurrent&&td(s)})}function Uy(a){for(;a;){if(a.isLoaded)return a.properties.state|=tu,!0;a=a.parent}return!1}function td(a){a.children.forEach(i=>{i.isLoaded?i.properties.state|=tu:td(i)})}var NO=256,Zy=[-1/0,-1/0,1/0,1/0],BO=.2,jO=5,Hy={[Jl.Realtime]:FO,[Jl.Overlap]:an,[Jl.Replace]:zy},eu=()=>{};function Wc(a,i,s){const f=Math.floor((a+180)/360*Math.pow(2,s)),g=Math.floor((1-Math.log(Math.tan(i*Math.PI/180)+1/Math.cos(i*Math.PI/180))/Math.PI)/2*Math.pow(2,s));return[f,g]}function Kp(a,i,s){const f=a/Math.pow(2,s)*360-180,g=Math.PI-2*Math.PI*i/Math.pow(2,s),y=180/Math.PI*Math.atan(.5*(Math.exp(g)-Math.exp(-g)));return[f,y]}var Qp=(a,i,s)=>{const[f,g]=Kp(a,i,s),[y,x]=Kp(a+1,i+1,s);return[f,x,y,g]};function Vy({zoom:a,latLonBounds:i,maxZoom:s=1/0,minZoom:f=0,zoomOffset:g=0,extent:y=Zy}){let x=Math.ceil(a)+g;if(Number.isFinite(f)&&x<f)return[];Number.isFinite(s)&&x>s&&(x=s);const[O,A,P,N]=i,Z=[Math.max(O,y[0]),Math.max(A,y[1]),Math.min(P,y[2]),Math.min(N,y[3])],W=[],[mt,Nt]=Wc(Z[0],Z[1],x),[Jt,ye]=Wc(Z[2],Z[3],x);for(let nn=mt;nn<=Jt;nn++)for(let pn=ye;pn<=Nt;pn++)W.push({x:nn,y:pn,z:x});const Ne=(Jt+mt)/2,ze=(Nt+ye)/2,He=(nn,pn)=>Math.abs(nn-Ne)+Math.abs(pn-ze);return W.sort((nn,pn)=>He(nn.x,nn.y)-He(pn.x,pn.y)),W}var ed=(a,i,s,f=!0)=>{const g=Math.pow(2,s),y=g-1,x=g;let O=a;const A=i;return f&&(O<0?O=O+x:O>y&&(O=O%x)),{warpX:O,warpY:A}},zO=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),UO=class extends to.EventEmitter{constructor(a){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:i,y:s,z:f,tileSize:g,warp:y=!0}=a;this.x=i,this.y=s,this.z=f,this.warp=y||!0,this.tileSize=g}get isLoading(){return this.loadStatus===_i.Loading}get isLoaded(){return this.loadStatus===_i.Loaded}get isFailure(){return this.loadStatus===_i.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===_i.Cancelled}get isDone(){return[_i.Loaded,_i.Cancelled,_i.Failure].includes(this.loadStatus)}get bounds(){return Qp(this.x,this.y,this.z)}get bboxPolygon(){const[a,i,s,f]=this.bounds,g=[(s-a)/2,(f-i)/2];return DO(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:g,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(a){return zO(this,arguments,function*({getData:i,onLoad:s,onError:f}){this.loadDataId++;const g=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=_i.Loading;let y=null,x;try{const{x:O,y:A,z:P,bounds:N,tileSize:Z,warp:W}=this,{warpX:mt,warpY:Nt}=ed(O,A,P,W),{signal:Jt}=this.abortController;y=yield i({x:mt,y:Nt,z:P,bounds:N,tileSize:Z,signal:Jt,warp:W},this)}catch(O){x=O}if(g===this.loadDataId&&!(this.isCancelled&&!y)){if(x||!y){this.loadStatus=_i.Failure,f(x,this);return}this.loadStatus=_i.Loaded,this.data=y,s(this)}})}reloadData(a){this.isLoading&&this.abortLoad(),this.loadData(a)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=_i.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},ZO=(a,i)=>{const s=qf(a),f=Xf(s,i),g=360*3-180,y=85.0511287798065;return[Math.max(f[0][0],-g),Math.max(f[0][1],-y),Math.min(f[1][0],g),Math.min(f[1][1],y)]},HO=(a,i)=>{const s=qf(a),f=qf(i);return oi(s,f)},VO=Object.defineProperty,is=Object.defineProperties,Jp=Object.getOwnPropertyDescriptors,nd=Object.getOwnPropertySymbols,t0=Object.prototype.hasOwnProperty,rd=Object.prototype.propertyIsEnumerable,e0=(a,i,s)=>i in a?VO(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,os=(a,i)=>{for(var s in i||(i={}))t0.call(i,s)&&e0(a,s,i[s]);if(nd)for(var s of nd(i))rd.call(i,s)&&e0(a,s,i[s]);return a},nu=(a,i)=>is(a,Jp(i)),{throttle:WO}=ii,Wy=(a=>(a.TilesLoadStart="tiles-load-start",a.TileLoaded="tile-loaded",a.TileError="tile-error",a.TileUnload="tile-unload",a.TileUpdate="tile-update",a.TilesLoadFinished="tiles-load-finished",a))(Wy||{}),Gy=class extends qp(){constructor(a){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=WO((i,s)=>{this.update(i,s)},16),this.onTileLoad=i=>{this.emit("tile-loaded",i),this.updateTileVisible(),this.loadFinished()},this.onTileError=(i,s)=>{this.emit("tile-error",{error:i,tile:s}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=i=>{this.emit("tile-unload",i),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Zy,getTileData:eu,warp:!0,updateStrategy:Jl.Replace},this.updateOptions(a)}get isLoaded(){return this.currentTiles.every(a=>a.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((i,s)=>i.z-s.z)}updateOptions(a){const i=a.minZoom===void 0?this.options.minZoom:Math.ceil(a.minZoom),s=a.maxZoom===void 0?this.options.maxZoom:Math.floor(a.maxZoom);this.options=nu(os(os({},this.options),a),{minZoom:i,maxZoom:s})}update(a,i){const s=Math.max(0,Math.ceil(a));if(this.lastViewStates&&this.lastViewStates.zoom===s&&HO(this.lastViewStates.latLonBoundsBuffer,i))return;const f=ZO(i,BO);this.lastViewStates={zoom:s,latLonBounds:i,latLonBoundsBuffer:f},this.currentZoom=s;let g=!1;const y=this.getTileIndices(s,f).filter(x=>this.options.warp||x.x>=0&&x.x<Math.pow(2,s));this.emit("tiles-load-start"),this.currentTiles=y.map(({x,y:O,z:A})=>{let P=this.getTile(x,O,A);return P?(((P==null?void 0:P.isFailure)||(P==null?void 0:P.isCancelled))&&P.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),P):(P=this.createTile(x,O,A),g=!0,P)}),g&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[a,i]of this.cacheTiles){if(!this.currentTiles.includes(i)){this.cacheTiles.delete(a),this.onTileUnload(i);return}this.onTileUnload(i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(a,i,s){const f=this.cacheTiles.get(`${i},${s},${a}`);f&&(this.onTileUnload(f),f.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(a,i,s){const f=this.getTileByLngLat(a,i,s);f&&this.reloadTileById(f.z,f.x,f.y)}reloadTileByExtent(a,i){this.getTileIndices(i,a).forEach(f=>{this.reloadTileById(f.z,f.x,f.y)})}pruneRequests(){const a=[];for(const i of this.cacheTiles.values())i.isLoading&&!i.isCurrent&&!i.isVisible&&a.push(i);for(;a.length>0;)a.shift().abortLoad()}getTileByLngLat(a,i,s){const{zoomOffset:f}=this.options,g=Math.ceil(s)+f,y=Wc(a,i,g);return this.tiles.filter(O=>O.key===`${y[0]}_${y[1]}_${g}`)[0]}getTileExtent(a,i){return this.getTileIndices(i,a)}getTileByZXY(a,i,s){return this.tiles.filter(g=>g.key===`${i}_${s}_${a}`)[0]}clear(){for(const a of this.cacheTiles.values())a.isLoading?a.abortLoad():this.onTileUnload(a);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const a=this.options.updateStrategy,i=new Map;for(const g of this.cacheTiles.values())i.set(g.key,g.isVisible),g.isCurrent=!1,g.isVisible=!1;for(const g of this.currentTiles)g.isCurrent=!0,g.isVisible=!0;const s=Array.from(this.cacheTiles.values());typeof a=="function"?a(s):Hy[a](s);let f=!1;Array.from(this.cacheTiles.values()).forEach(g=>{g.isVisible!==i.get(g.key)?(g.isVisibleChange=!0,f=!0):g.isVisibleChange=!1}),f&&this.emit("tile-update")}getTileIndices(a,i){const{tileSize:s,extent:f,zoomOffset:g}=this.options,y=Math.floor(this.options.maxZoom),x=Math.ceil(this.options.minZoom);return Vy({maxZoom:y,minZoom:x,zoomOffset:g,tileSize:s,zoom:a,latLonBounds:i,extent:f})}getTileId(a,i,s){return`${a},${i},${s}`}loadFinished(){const a=!this.currentTiles.some(i=>!i.isDone);return a&&this.emit("tiles-load-finished"),a}getTile(a,i,s){const f=this.getTileId(a,i,s);return this.cacheTiles.get(f)}createTile(a,i,s){const f=this.getTileId(a,i,s),g=new UO({x:a,y:i,z:s,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(f,g),g.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),g}resizeCacheTiles(){const a=jO*this.currentTiles.length;if(this.cacheTiles.size>a){for(const[s,f]of this.cacheTiles)if(!f.isVisible&&!this.currentTiles.includes(f)&&(this.cacheTiles.delete(s),this.onTileUnload(f)),this.cacheTiles.size<=a)break}this.rebuildTileTree()}rebuildTileTree(){for(const a of this.cacheTiles.values())a.parent=null,a.children.length=0;for(const a of this.cacheTiles.values()){const i=this.getNearestAncestor(a.x,a.y,a.z);a.parent=i,i!=null&&i.children&&i.children.push(a)}}getNearestAncestor(a,i,s){for(;s>this.options.minZoom;){a=Math.floor(a/2),i=Math.floor(i/2),s=s-1;const f=this.getTile(a,i,s);if(f)return f}return null}};function jD(a){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(a)}function n0(a){const i=[];let s=/\{([a-z])-([a-z])\}/.exec(a);if(s){const f=s[1].charCodeAt(0),g=s[2].charCodeAt(0);let y;for(y=f;y<=g;++y)i.push(a.replace(s[0],String.fromCharCode(y)));return i}if(s=/\{(\d+)-(\d+)\}/.exec(a),s){const f=parseInt(s[2],10);for(let g=parseInt(s[1],10);g<=f;g++)i.push(a.replace(s[0],g.toString()));return i}return i.push(a),i}function Do(a,i){if(!a||!a.length)throw new Error("url is not allowed to be empty");const{x:s,y:f,z:g}=i,y=n0(a),x=Math.abs(s+f)%y.length;return(zr(y[x])?`${y[x]}/{z}/{x}/{y}`:y[x]).replace(/\{x\}/g,s.toString()).replace(/\{y\}/g,f.toString()).replace(/\{z\}/g,g.toString()).replace(/\{bbox\}/g,Qp(s,f,g).join(",")).replace(/\{-y\}/g,(Math.pow(2,g)-f-1).toString())}function r0(a,i){const{x:s,y:f,z:g,layer:y,version:x="1.0.0",style:O="default",format:A,service:P="WMTS",tileMatrixset:N}=i,Z=n0(a),W=Math.abs(s+f)%Z.length;return`${Z[W]}&SERVICE=${P}&REQUEST=GetTile&VERSION=${x}&LAYER=${y}&STYLE=${O}&TILEMATRIXSET=${N}&FORMAT=${A}&TILECOL=${s}&TILEROW=${f}&TILEMATRIX=${g}`}function ru(a,i){return a==null?i:a}var i0=k(38163),Gc=k.n(i0);function o0(a,i){return a.map(s=>s[i]*1)}function Ur(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function zD(a){return Array.isArray(a)?a.length===0?!1:!!Ur(a[0]):!1}function $y(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function a0(a){const i=Object.isFrozen(a)?ii.cloneDeep(a):a;return Gc()(i,!0),i}function xn(a,i){return a||[[i[0],i[3]],[i[2],i[3]],[i[2],i[1]],[i[0],i[1]]]}var Yy=Object.defineProperty,TP=Object.defineProperties,GO=Object.getOwnPropertyDescriptors,iu=Object.getOwnPropertySymbols,Xy=Object.prototype.hasOwnProperty,$c=Object.prototype.propertyIsEnumerable,ma=(a,i,s)=>i in a?Yy(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,s0=(a,i)=>{for(var s in i||(i={}))Xy.call(i,s)&&ma(a,s,i[s]);if(iu)for(var s of iu(i))$c.call(i,s)&&ma(a,s,i[s]);return a},Gn=(a,i)=>TP(a,GO(i));function li(a,i){const{x:s,y:f,x1:g,y1:y,coordinates:x,geometry:O}=i,A=[];if(!Array.isArray(a))return{dataArray:[]};if(O)return a.filter(P=>P[O]&&P[O].type&&P[O].coordinates&&P[O].coordinates.length>0).forEach((P,N)=>{const Z=a0(P[O]);ge(Z,W=>{const mt=Ae(W),Nt=Gn(s0({},P),{_id:N,coordinates:mt});A.push(Nt)})}),{dataArray:A};for(let P=0;P<a.length;P++){const N=a[P];let Z=[];if(x){let mt="Polygon";Array.isArray(x[0])||(mt="Point"),Array.isArray(x[0])&&!Array.isArray(x[0][0])&&(mt="LineString"),Z=a0({type:mt,coordinates:N[x]}).coordinates}else if(s&&f&&g&&y){const mt=[parseFloat(N[s]),parseFloat(N[f])],Nt=[parseFloat(N[g]),parseFloat(N[y])];Z=[mt,Nt]}else s&&f&&(Z=[parseFloat(N[s]),parseFloat(N[f])]);const W=Gn(s0({},N),{_id:P,coordinates:Z});A.push(W)}return{dataArray:A}}function Cr(a,i){const s=un(a);return li(s,i)}var qy=Object.defineProperty,CP=Object.defineProperties,xi=Object.getOwnPropertyDescriptors,Qn=Object.getOwnPropertySymbols,$O=Object.prototype.hasOwnProperty,YO=Object.prototype.propertyIsEnumerable,Ky=(a,i,s)=>i in a?qy(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,c0=(a,i)=>{for(var s in i||(i={}))$O.call(i,s)&&Ky(a,s,i[s]);if(Qn)for(var s of Qn(i))YO.call(i,s)&&Ky(a,s,i[s]);return a},XO=(a,i)=>CP(a,xi(i));function Qy(a){const i=a.toString();let s=5381,f=i.length;for(;f;)s=s*33^i.charCodeAt(--f);return s>>>0}function ou(a,i){return i===void 0?null:isNaN(a.properties[i]*1)?a.properties&&a.properties[i]?Qy(a.properties[i]+"")%1000019:null:a.properties[i]*1}function l0(a,i){const s=[],f={};return a.features?(a.features=a.features.filter(g=>{const y=g.geometry;return g!=null&&y&&y.type&&y.coordinates&&y.coordinates.length>0}),a=a0(a),a.features.length===0?{dataArray:[],featureKeys:f}:(ge(a,(g,y)=>{let x=ou(g,i==null?void 0:i.featureId);x===null&&(x=y);const O=x,A=Ae(g),P=XO(c0({},g.properties),{coordinates:A,_id:O});s.push(P)}),{dataArray:s,featureKeys:f})):(a.features=[],{dataArray:[]})}function id(a,i,s,f){for(var g=f,y=s-i>>1,x=s-i,O,A=a[i],P=a[i+1],N=a[s],Z=a[s+1],W=i+3;W<s;W+=3){var mt=qO(a[W],a[W+1],A,P,N,Z);if(mt>g)O=W,g=mt;else if(mt===g){var Nt=Math.abs(W-y);Nt<x&&(O=W,x=Nt)}}g>f&&(O-i>3&&id(a,i,O,f),a[O+2]=g,s-O>3&&id(a,O,s,f))}function qO(a,i,s,f,g,y){var x=g-s,O=y-f;if(x!==0||O!==0){var A=((a-s)*x+(i-f)*O)/(x*x+O*O);A>1?(s=g,f=y):A>0&&(s+=x*A,f+=O*A)}return x=a-s,O=i-f,x*x+O*O}function Gr(a,i,s,f){var g={id:typeof a=="undefined"?null:a,type:i,geometry:s,tags:f,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return KO(g),g}function KO(a){var i=a.geometry,s=a.type;if(s==="Point"||s==="MultiPoint"||s==="LineString")u0(a,i);else if(s==="Polygon"||s==="MultiLineString")for(var f=0;f<i.length;f++)u0(a,i[f]);else if(s==="MultiPolygon")for(f=0;f<i.length;f++)for(var g=0;g<i[f].length;g++)u0(a,i[f][g])}function u0(a,i){for(var s=0;s<i.length;s+=3)a.minX=Math.min(a.minX,i[s]),a.minY=Math.min(a.minY,i[s+1]),a.maxX=Math.max(a.maxX,i[s]),a.maxY=Math.max(a.maxY,i[s+1])}function QO(a,i){var s=[];if(a.type==="FeatureCollection")for(var f=0;f<a.features.length;f++)od(s,a.features[f],i,f);else a.type==="Feature"?od(s,a,i):od(s,{geometry:a},i);return s}function od(a,i,s,f){if(i.geometry){var g=i.geometry.coordinates,y=i.geometry.type,x=Math.pow(s.tolerance/((1<<s.maxZoom)*s.extent),2),O=[],A=i.id;if(s.promoteId?A=i.properties[s.promoteId]:s.generateId&&(A=f||0),y==="Point")Jy(g,O);else if(y==="MultiPoint")for(var P=0;P<g.length;P++)Jy(g[P],O);else if(y==="LineString")f0(g,O,x,!1);else if(y==="MultiLineString")if(s.lineMetrics){for(P=0;P<g.length;P++)O=[],f0(g[P],O,x,!1),a.push(Gr(A,"LineString",O,i.properties));return}else ad(g,O,x,!1);else if(y==="Polygon")ad(g,O,x,!0);else if(y==="MultiPolygon")for(P=0;P<g.length;P++){var N=[];ad(g[P],N,x,!0),O.push(N)}else if(y==="GeometryCollection"){for(P=0;P<i.geometry.geometries.length;P++)od(a,{id:A,geometry:i.geometry.geometries[P],properties:i.properties},s,f);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(Gr(A,y,O,i.properties))}}function Jy(a,i){i.push(JO(a[0])),i.push(au(a[1])),i.push(0)}function f0(a,i,s,f){for(var g,y,x=0,O=0;O<a.length;O++){var A=JO(a[O][0]),P=au(a[O][1]);i.push(A),i.push(P),i.push(0),O>0&&(f?x+=(g*P-A*y)/2:x+=Math.sqrt(Math.pow(A-g,2)+Math.pow(P-y,2))),g=A,y=P}var N=i.length-3;i[2]=1,id(i,0,N,s),i[N+2]=1,i.size=Math.abs(x),i.start=0,i.end=i.size}function ad(a,i,s,f){for(var g=0;g<a.length;g++){var y=[];f0(a[g],y,s,f),i.push(y)}}function JO(a){return a/360+.5}function au(a){var i=Math.sin(a*Math.PI/180),s=.5-.25*Math.log((1+i)/(1-i))/Math.PI;return s<0?0:s>1?1:s}function za(a,i,s,f,g,y,x,O){if(s/=i,f/=i,y>=s&&x<f)return a;if(x<s||y>=f)return null;for(var A=[],P=0;P<a.length;P++){var N=a[P],Z=N.geometry,W=N.type,mt=g===0?N.minX:N.minY,Nt=g===0?N.maxX:N.maxY;if(mt>=s&&Nt<f){A.push(N);continue}else if(Nt<s||mt>=f)continue;var Jt=[];if(W==="Point"||W==="MultiPoint")tE(Z,Jt,s,f,g);else if(W==="LineString")d0(Z,Jt,s,f,g,!1,O.lineMetrics);else if(W==="MultiLineString")sd(Z,Jt,s,f,g,!1);else if(W==="Polygon")sd(Z,Jt,s,f,g,!0);else if(W==="MultiPolygon")for(var ye=0;ye<Z.length;ye++){var Ne=[];sd(Z[ye],Ne,s,f,g,!0),Ne.length&&Jt.push(Ne)}if(Jt.length){if(O.lineMetrics&&W==="LineString"){for(ye=0;ye<Jt.length;ye++)A.push(Gr(N.id,W,Jt[ye],N.tags));continue}(W==="LineString"||W==="MultiLineString")&&(Jt.length===1?(W="LineString",Jt=Jt[0]):W="MultiLineString"),(W==="Point"||W==="MultiPoint")&&(W=Jt.length===3?"Point":"MultiPoint"),A.push(Gr(N.id,W,Jt,N.tags))}}return A.length?A:null}function tE(a,i,s,f,g){for(var y=0;y<a.length;y+=3){var x=a[y+g];x>=s&&x<=f&&(i.push(a[y]),i.push(a[y+1]),i.push(a[y+2]))}}function d0(a,i,s,f,g,y,x){for(var O=eE(a),A=g===0?nE:cd,P=a.start,N,Z,W=0;W<a.length-3;W+=3){var mt=a[W],Nt=a[W+1],Jt=a[W+2],ye=a[W+3],Ne=a[W+4],ze=g===0?mt:Nt,He=g===0?ye:Ne,nn=!1;x&&(N=Math.sqrt(Math.pow(mt-ye,2)+Math.pow(Nt-Ne,2))),ze<s?He>s&&(Z=A(O,mt,Nt,ye,Ne,s),x&&(O.start=P+N*Z)):ze>f?He<f&&(Z=A(O,mt,Nt,ye,Ne,f),x&&(O.start=P+N*Z)):h0(O,mt,Nt,Jt),He<s&&ze>=s&&(Z=A(O,mt,Nt,ye,Ne,s),nn=!0),He>f&&ze<=f&&(Z=A(O,mt,Nt,ye,Ne,f),nn=!0),!y&&nn&&(x&&(O.end=P+N*Z),i.push(O),O=eE(a)),x&&(P+=N)}var pn=a.length-3;mt=a[pn],Nt=a[pn+1],Jt=a[pn+2],ze=g===0?mt:Nt,ze>=s&&ze<=f&&h0(O,mt,Nt,Jt),pn=O.length-3,y&&pn>=3&&(O[pn]!==O[0]||O[pn+1]!==O[1])&&h0(O,O[0],O[1],O[2]),O.length&&i.push(O)}function eE(a){var i=[];return i.size=a.size,i.start=a.start,i.end=a.end,i}function sd(a,i,s,f,g,y){for(var x=0;x<a.length;x++)d0(a[x],i,s,f,g,y,!1)}function h0(a,i,s,f){a.push(i),a.push(s),a.push(f)}function nE(a,i,s,f,g,y){var x=(y-i)/(f-i);return a.push(y),a.push(s+(g-s)*x),a.push(1),x}function cd(a,i,s,f,g,y){var x=(y-s)/(g-s);return a.push(i+(f-i)*x),a.push(y),a.push(1),x}function rE(a,i){var s=i.buffer/i.extent,f=a,g=za(a,1,-1-s,s,0,-1,2,i),y=za(a,1,1-s,2+s,0,-1,2,i);return(g||y)&&(f=za(a,1,-s,1+s,0,-1,2,i)||[],g&&(f=Ua(g,1).concat(f)),y&&(f=f.concat(Ua(y,-1)))),f}function Ua(a,i){for(var s=[],f=0;f<a.length;f++){var g=a[f],y=g.type,x;if(y==="Point"||y==="MultiPoint"||y==="LineString")x=p0(g.geometry,i);else if(y==="MultiLineString"||y==="Polygon"){x=[];for(var O=0;O<g.geometry.length;O++)x.push(p0(g.geometry[O],i))}else if(y==="MultiPolygon")for(x=[],O=0;O<g.geometry.length;O++){for(var A=[],P=0;P<g.geometry[O].length;P++)A.push(p0(g.geometry[O][P],i));x.push(A)}s.push(Gr(g.id,y,x,g.tags))}return s}function p0(a,i){var s=[];s.size=a.size,a.start!==void 0&&(s.start=a.start,s.end=a.end);for(var f=0;f<a.length;f+=3)s.push(a[f]+i,a[f+1],a[f+2]);return s}function su(a,i){if(a.transformed)return a;var s=1<<a.z,f=a.x,g=a.y,y,x,O;for(y=0;y<a.features.length;y++){var A=a.features[y],P=A.geometry,N=A.type;if(A.geometry=[],N===1)for(x=0;x<P.length;x+=2)A.geometry.push(t1(P[x],P[x+1],i,s,f,g));else for(x=0;x<P.length;x++){var Z=[];for(O=0;O<P[x].length;O+=2)Z.push(t1(P[x][O],P[x][O+1],i,s,f,g));A.geometry.push(Z)}}return a.transformed=!0,a}function t1(a,i,s,f,g,y){return[Math.round(s*(a*f-g)),Math.round(s*(i*f-y))]}function iE(a,i,s,f,g){for(var y=i===g.maxZoom?0:g.tolerance/((1<<i)*g.extent),x={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:s,y:f,z:i,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},O=0;O<a.length;O++){x.numFeatures++,oE(x,a[O],y,g);var A=a[O].minX,P=a[O].minY,N=a[O].maxX,Z=a[O].maxY;A<x.minX&&(x.minX=A),P<x.minY&&(x.minY=P),N>x.maxX&&(x.maxX=N),Z>x.maxY&&(x.maxY=Z)}return x}function oE(a,i,s,f){var g=i.geometry,y=i.type,x=[];if(y==="Point"||y==="MultiPoint")for(var O=0;O<g.length;O+=3)x.push(g[O]),x.push(g[O+1]),a.numPoints++,a.numSimplified++;else if(y==="LineString")g0(x,g,a,s,!1,!1);else if(y==="MultiLineString"||y==="Polygon")for(O=0;O<g.length;O++)g0(x,g[O],a,s,y==="Polygon",O===0);else if(y==="MultiPolygon")for(var A=0;A<g.length;A++){var P=g[A];for(O=0;O<P.length;O++)g0(x,P[O],a,s,!0,O===0)}if(x.length){var N=i.tags||null;if(y==="LineString"&&f.lineMetrics){N={};for(var Z in i.tags)N[Z]=i.tags[Z];N.mapbox_clip_start=g.start/g.size,N.mapbox_clip_end=g.end/g.size}var W={geometry:x,type:y==="Polygon"||y==="MultiPolygon"?3:y==="LineString"||y==="MultiLineString"?2:1,tags:N};i.id!==null&&(W.id=i.id),a.features.push(W)}}function g0(a,i,s,f,g,y){var x=f*f;if(f>0&&i.size<(g?x:f)){s.numPoints+=i.length/3;return}for(var O=[],A=0;A<i.length;A+=3)(f===0||i[A+2]>x)&&(s.numSimplified++,O.push(i[A]),O.push(i[A+1])),s.numPoints++;g&&v0(O,y),a.push(O)}function v0(a,i){for(var s=0,f=0,g=a.length,y=g-2;f<g;y=f,f+=2)s+=(a[f]-a[y])*(a[f+1]+a[y+1]);if(s>0===i)for(f=0,g=a.length;f<g/2;f+=2){var x=a[f],O=a[f+1];a[f]=a[g-2-f],a[f+1]=a[g-1-f],a[g-2-f]=x,a[g-1-f]=O}}function m0(a,i){return new ld(a,i)}function ld(a,i){i=this.options=aE(Object.create(this.options),i);var s=i.debug;if(s&&console.time("preprocess data"),i.maxZoom<0||i.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(i.promoteId&&i.generateId)throw new Error("promoteId and generateId cannot be used together.");var f=QO(a,i);this.tiles={},this.tileCoords=[],s&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",i.indexMaxZoom,i.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),f=rE(f,i),f.length&&this.splitTile(f,0,0,0),s&&(f.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}ld.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ld.prototype.splitTile=function(a,i,s,f,g,y,x){for(var O=[a,i,s,f],A=this.options,P=A.debug;O.length;){f=O.pop(),s=O.pop(),i=O.pop(),a=O.pop();var N=1<<i,Z=ud(i,s,f),W=this.tiles[Z];if(!W&&(P>1&&console.time("creation"),W=this.tiles[Z]=iE(a,i,s,f,A),this.tileCoords.push({z:i,x:s,y:f}),P)){P>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",i,s,f,W.numFeatures,W.numPoints,W.numSimplified),console.timeEnd("creation"));var mt="z"+i;this.stats[mt]=(this.stats[mt]||0)+1,this.total++}if(W.source=a,g){if(i===A.maxZoom||i===g)continue;var Nt=1<<g-i;if(s!==Math.floor(y/Nt)||f!==Math.floor(x/Nt))continue}else if(i===A.indexMaxZoom||W.numPoints<=A.indexMaxPoints)continue;if(W.source=null,a.length!==0){P>1&&console.time("clipping");var Jt=.5*A.buffer/A.extent,ye=.5-Jt,Ne=.5+Jt,ze=1+Jt,He,nn,pn,In,En,Rn;He=nn=pn=In=null,En=za(a,N,s-Jt,s+Ne,0,W.minX,W.maxX,A),Rn=za(a,N,s+ye,s+ze,0,W.minX,W.maxX,A),a=null,En&&(He=za(En,N,f-Jt,f+Ne,1,W.minY,W.maxY,A),nn=za(En,N,f+ye,f+ze,1,W.minY,W.maxY,A),En=null),Rn&&(pn=za(Rn,N,f-Jt,f+Ne,1,W.minY,W.maxY,A),In=za(Rn,N,f+ye,f+ze,1,W.minY,W.maxY,A),Rn=null),P>1&&console.timeEnd("clipping"),O.push(He||[],i+1,s*2,f*2),O.push(nn||[],i+1,s*2,f*2+1),O.push(pn||[],i+1,s*2+1,f*2),O.push(In||[],i+1,s*2+1,f*2+1)}}},ld.prototype.getTile=function(a,i,s){var f=this.options,g=f.extent,y=f.debug;if(a<0||a>24)return null;var x=1<<a;i=(i%x+x)%x;var O=ud(a,i,s);if(this.tiles[O])return su(this.tiles[O],g);y>1&&console.log("drilling down to z%d-%d-%d",a,i,s);for(var A=a,P=i,N=s,Z;!Z&&A>0;)A--,P=Math.floor(P/2),N=Math.floor(N/2),Z=this.tiles[ud(A,P,N)];return!Z||!Z.source?null:(y>1&&console.log("found parent tile z%d-%d-%d",A,P,N),y>1&&console.time("drilling down"),this.splitTile(Z.source,A,P,N,a,i,s),y>1&&console.timeEnd("drilling down"),this.tiles[O]?su(this.tiles[O],g):null)};function ud(a,i,s){return((1<<a)*s+i)*32+a}function aE(a,i){for(var s in i)a[s]=i[s];return a}var Yc=class{constructor(a,i,s,f){this.vectorLayerCache={},this.x=i,this.y=s,this.z=f,this.vectorTile=a}getTileData(a){return!a||!this.vectorTile.layers[a]?[]:this.vectorLayerCache[a]?this.vectorLayerCache[a]:this.vectorTile.layers[a].features}getFeatureById(){throw new Error("Method not implemented.")}},e1=Object.defineProperty,n1=Object.defineProperties,r1=Object.getOwnPropertyDescriptors,y0=Object.getOwnPropertySymbols,sE=Object.prototype.hasOwnProperty,fd=Object.prototype.propertyIsEnumerable,Za=(a,i,s)=>i in a?e1(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,dd=(a,i)=>{for(var s in i||(i={}))sE.call(i,s)&&Za(a,s,i[s]);if(y0)for(var s of y0(i))fd.call(i,s)&&Za(a,s,i[s]);return a},cE=(a,i)=>n1(a,r1(i)),ya=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),Ks={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function MP(a){let i=0;for(let s=0,f=a.length,g=f-1,y,x;s<f;g=s++)y=a[s],x=a[g],i+=(x.x-y.x)*(y.y+x.y);return i}function lE(a){const i=a.length;if(i<=1)return[a];const s=[];let f,g;for(let y=0;y<i;y++){const x=MP(a[y]);x!==0&&(g===void 0&&(g=x<0),g===x<0?(f&&s.push(f),f=[a[y]]):f.push(a[y]))}return f&&s.push(f),s}var i1=["Unknown","Point","LineString","Polygon"];function LP(a,i,s,f,g){let y=g.geometry;const x=g.type,O=g.tags,A=g.id,P=a*Math.pow(2,f),N=a*i,Z=a*s;let W=i1[x],mt,Nt;function Jt(Ne){for(let ze=0;ze<Ne.length;ze++){const He=Ne[ze];if(He[3])break;const nn=180-(He[1]+Z)*360/P,pn=(He[0]+N)*360/P-180,In=360/Math.PI*Math.atan(Math.exp(nn*Math.PI/180))-90;Ne[ze]=[pn,In,0,1]}}switch(x){case 1:const Ne=[];for(mt=0;mt<y.length;mt++)Ne[mt]=y[mt][0];y=Ne,Jt(y);break;case 2:for(mt=0;mt<y.length;mt++)Jt(y[mt]);break;case 3:for(y=lE(y),mt=0;mt<y.length;mt++)for(Nt=0;Nt<y[mt].length;Nt++)Jt(y[mt][Nt]);break}return y.length===1?y=y[0]:W="Multi"+W,{type:"Feature",geometry:{type:W,coordinates:y},properties:O,id:A,relativeOrigin:[0,0],coord:""}}var uE=(a,i,s,f)=>ya(void 0,null,function*(){return new Promise(g=>{const y=i.getTile(a.z,a.x,a.y),O={layers:{defaultLayer:{features:y?y.features.map(P=>LP(f,s.x,s.y,s.z,P)):[]}}},A=new Yc(O,a.x,a.y,a.z);g(A)})});function o1(a){const i={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?i:dd(dd({},i),a.geojsonvtOptions)}function a1(a,i){const s=o1(i),f=s.extent||4096,g=m0(a,s),y=(O,A)=>uE(A,g,O,f),x=cE(dd(dd({},Ks),i),{getTileData:y});return{data:a,dataArray:[],tilesetOptions:x,isTile:!0}}var fE=Object.defineProperty,dE=Object.defineProperties,Xc=Object.getOwnPropertyDescriptors,hd=Object.getOwnPropertySymbols,s1=Object.prototype.hasOwnProperty,Fo=Object.prototype.propertyIsEnumerable,wr=(a,i,s)=>i in a?fE(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,hE=(a,i)=>{for(var s in i||(i={}))s1.call(i,s)&&wr(a,s,i[s]);if(hd)for(var s of hd(i))Fo.call(i,s)&&wr(a,s,i[s]);return a},pE=(a,i)=>dE(a,Xc(i));function c1(a,i){const{extent:s=[121.168,30.2828,121.384,30.4219],coordinates:f,requestParameters:g={}}=i,y=new Promise(A=>{a instanceof HTMLImageElement||wy(a)?A([a]):l1(a,g,P=>{A(P)})}),x=xn(f,s);return{originData:a,images:y,_id:1,dataArray:[{_id:0,coordinates:x}]}}function l1(a,i,s){const f=[];if(typeof a=="string")ht(pE(hE({},i),{url:a}),(g,y)=>{y&&(f.push(y),s(f))});else{const g=a.length;let y=0;a.forEach(x=>{ht(pE(hE({},i),{url:x}),(O,A)=>{y++,A&&f.push(A),y===g&&s(f)})})}return c1}var cu=Object.defineProperty,u1=Object.defineProperties,b0=Object.getOwnPropertyDescriptors,lu=Object.getOwnPropertySymbols,pd=Object.prototype.hasOwnProperty,gE=Object.prototype.propertyIsEnumerable,_0=(a,i,s)=>i in a?cu(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,Zr=(a,i)=>{for(var s in i||(i={}))pd.call(i,s)&&_0(a,s,i[s]);if(lu)for(var s of lu(i))gE.call(i,s)&&_0(a,s,i[s]);return a},Ar=(a,i)=>u1(a,b0(i)),uu=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),f1=(a,i,s,f)=>uu(void 0,null,function*(){const g={x:i.x,y:i.y,z:i.z},y=Do(a,g);return new Promise(x=>{f?f(g,(O,A)=>{if(O||!A){const P={layers:{defaultLayer:{features:[]}}},N=new Yc(P,i.x,i.y,i.z);x(N)}else{const P={layers:{defaultLayer:{features:A.features}}},N=new Yc(P,i.x,i.y,i.z);x(N)}}):so(Ar(Zr({},s),{url:y}),(O,A)=>{if(O||!A){const P={layers:{defaultLayer:{features:[]}}},N=new Yc(P,i.x,i.y,i.z);x(N)}else{const N={layers:{defaultLayer:{features:JSON.parse(A)}}},Z=new Yc(N,i.x,i.y,i.z);x(Z)}})})});function fu(a,i){const s=(g,y)=>f1(a,y,i==null?void 0:i.requestParameters,i.getCustomData),f=Ar(Zr({},i),{getTileData:s});return{dataArray:[],tilesetOptions:f,isTile:!0}}var d1=k(38929),vE=k(3614),qc=k.n(vE),h1=Object.defineProperty,PP=Object.defineProperties,mE=Object.getOwnPropertyDescriptors,du=Object.getOwnPropertySymbols,x0=Object.prototype.hasOwnProperty,yE=Object.prototype.propertyIsEnumerable,X=(a,i,s)=>i in a?h1(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,S0=(a,i)=>{for(var s in i||(i={}))x0.call(i,s)&&X(a,s,i[s]);if(du)for(var s of du(i))yE.call(i,s)&&X(a,s,i[s]);return a},hu=(a,i)=>PP(a,mE(i)),Ha=class{constructor(a,i,s,f){this.vectorLayerCache={},this.x=i,this.y=s,this.z=f,this.vectorTile=new d1.VectorTile(new(qc())(a))}getTileData(a){if(!a||!this.vectorTile.layers[a])return[];if(this.vectorLayerCache[a])return this.vectorLayerCache[a];const i=this.vectorTile.layers[a];if(Array.isArray(i.features))return this.vectorLayerCache[a]=i.features,i.features;const s=[];for(let f=0;f<i.length;f++){const y=i.feature(f).toGeoJSON(this.x,this.y,this.z);s.push(hu(S0({},y),{properties:S0({id:y.id},y.properties)}))}return this.vectorLayerCache[a]=s,s}getFeatureById(){throw new Error("Method not implemented.")}},gd=Object.defineProperty,bE=Object.defineProperties,p1=Object.getOwnPropertyDescriptors,Qs=Object.getOwnPropertySymbols,_E=Object.prototype.hasOwnProperty,g1=Object.prototype.propertyIsEnumerable,O0=(a,i,s)=>i in a?gd(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,E0=(a,i)=>{for(var s in i||(i={}))_E.call(i,s)&&O0(a,s,i[s]);if(Qs)for(var s of Qs(i))g1.call(i,s)&&O0(a,s,i[s]);return a},v1=(a,i)=>bE(a,p1(i)),Qo=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),xE={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},m1=(a,i,s,f,g)=>Qo(void 0,null,function*(){const y=Do(a,i);return new Promise(x=>{if(g)g({x:s.x,y:s.y,z:s.z},(O,A)=>{if(O||!A)x(void 0);else{const P=new Ha(A,s.x,s.y,s.z);x(P)}});else{const O=fo(v1(E0({},f),{url:y}),(A,P)=>{if(A||!P)x(void 0);else{const N=new Ha(P,s.x,s.y,s.z);x(N)}});s.xhrCancel=()=>O.cancel()}})});function Va(a,i){const s=Array.isArray(a)?a[0]:a,f=(y,x)=>m1(s,y,x,i==null?void 0:i.requestParameters,i==null?void 0:i.getCustomData),g=v1(E0(E0({},xE),i),{getTileData:f});return{data:s,dataArray:[],tilesetOptions:g,isTile:!0}}function SE(a,i,s){switch(a){case"+":return i+s;case"-":return i-s;case"*":return i*s;case"/":return i/s;case"%":return i%s;case"^":return Math.pow(i,s);case"abs":return Math.abs(i);case"floor":return Math.floor(i);case"round":return Math.round(i);case"ceil":return Math.ceil(i);case"sin":return Math.sin(i);case"cos":return Math.cos(i);case"atan":return s===-1?Math.atan(i):Math.atan2(i,s);case"min":return Math.min(i,s);case"max":return Math.max(i,s);case"log10":return Math.log(i);case"log2":return Math.log2(i);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Kc(a,i){const{width:s,height:f}=i[0],g=i.map(A=>A.rasterData),y=s*f,x=[],O=JSON.stringify(a);for(let A=0;A<y;A++){const P=JSON.parse(O),N=y1(P,g,A);if(typeof N=="number")x.push(N);else{const Z=Si(P);x.push(Z)}}return x}function y1(a,i,s){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return i[a[1]][s]}catch(f){return console.warn("Raster Data err!"),0}a.map((f,g)=>{if(Array.isArray(f)&&f.length>0)switch(f[0]){case"band":try{a[g]=i[f[1]][s]}catch(y){console.warn("Raster Data err!"),a[g]=0}break;default:y1(f,i,s)}})}function OE(a){const[i,s=-1,f=-1]=a;return i===void 0?(console.warn("Express err!"),["+",0,0]):[i.replace(/\s+/g,""),s,f]}function Si(a){const i=OE(a),s=i[0];let f=i[1],g=i[2];return Array.isArray(f)&&(f=Si(a[1])),Array.isArray(g)&&(g=Si(a[2])),SE(s,f,g)}var po={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:EE}};function EE(a,i){const s=a[0].rasterData,f=a[1].rasterData,g=a[2].rasterData,y=[],[x,O]=(i==null?void 0:i.countCut)||[2,98],A=(i==null?void 0:i.RMinMax)||Qc(s,x,O),P=(i==null?void 0:i.GMinMax)||Qc(f,x,O),N=(i==null?void 0:i.BMinMax)||Qc(g,x,O);for(let Z=0;Z<s.length;Z++)y.push(Math.max(0,s[Z]-A[0])),y.push(Math.max(0,f[Z]-P[0])),y.push(Math.max(0,g[Z]-N[0]));return{rasterData:y,rMinMax:A,gMinMax:P,bMinMax:N}}function Qc(a,i,s){const f=a.slice().sort((O,A)=>O-A),g=f.length,y=f[Math.ceil(g*i/100)],x=f[Math.ceil(g*s/100)];return[y,x]}var wE=Object.defineProperty,w0=Object.defineProperties,AE=Object.getOwnPropertyDescriptors,b1=Object.getOwnPropertySymbols,TE=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,_1=(a,i,s)=>i in a?wE(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,No=(a,i)=>{for(var s in i||(i={}))TE.call(i,s)&&_1(a,s,i[s]);if(b1)for(var s of b1(i))Kn.call(i,s)&&_1(a,s,i[s]);return a},A0=(a,i)=>w0(a,AE(i)),CE=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())});function x1(a,i,s){return CE(this,null,function*(){if(a.length===0)return{rasterData:[0],width:1,heigh:1};const f=yield Promise.all(a.map(({data:A,bands:P=[0]})=>i(A,P))),g=[];f.forEach(A=>{Array.isArray(A)?g.push(...A):g.push(A)});const{width:y,height:x}=g[0];let O;switch(typeof s){case"function":O=s(g);break;case"object":Array.isArray(s)?O={rasterData:Kc(s,g)}:O=Rr(s,g);break;default:O={rasterData:g[0].rasterData}}return A0(No({},O),{width:y,height:x})})}function Rr(a,i){const s=po[a.type];if(s.type==="function")return s.method(i,a==null?void 0:a.options);if(s.type==="operation")return a.type==="rgb"?go(s.expression,i):{rasterData:Kc(s.expression,i)}}function go(a,i){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const s=Kc(a.r||["band",0],i),f=Kc(a.g||["band",0],i),g=Kc(a.b||["band",0],i);return[s,f,g]}function Jo(a,i,s,f){return CE(this,null,function*(){const g=yield x1(a,i,s);f(null,{data:g})})}function pu(a,i){const{extent:s=[121.168,30.2828,121.384,30.4219],coordinates:f,width:g,height:y,min:x,max:O,format:A,operation:P}=i;let N,Z,W;if(A===void 0||$y(a))N=Array.from(a),Z=g,W=y;else{const Jt=Array.isArray(a)?a:[a];N=x1(Jt,A,P)}const mt=xn(f,s);return{_id:1,dataArray:[{_id:1,data:N,width:Z,height:W,min:x,max:O,coordinates:mt}]}}var on=k(1413),ct=k(4942);let ta=function(a){return a.Normal="normal",a.PostProcessing="post-processing",a}({}),ot=function(a){return a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN",a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.FUNC_ADD=32774]="FUNC_ADD",a[a.BLEND_EQUATION=32777]="BLEND_EQUATION",a[a.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",a[a.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",a[a.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",a[a.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",a[a.MAX_EXT=32776]="MAX_EXT",a[a.MIN_EXT=32775]="MIN_EXT",a[a.BLEND_DST_RGB=32968]="BLEND_DST_RGB",a[a.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",a[a.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",a[a.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR",a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",a[a.BLEND_COLOR=32773]="BLEND_COLOR",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",a[a.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",a[a.BUFFER_SIZE=34660]="BUFFER_SIZE",a[a.BUFFER_USAGE=34661]="BUFFER_USAGE",a[a.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",a[a.FRONT=1028]="FRONT",a[a.BACK=1029]="BACK",a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK",a[a.CULL_FACE=2884]="CULL_FACE",a[a.BLEND=3042]="BLEND",a[a.DITHER=3024]="DITHER",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",a[a.NO_ERROR=0]="NO_ERROR",a[a.INVALID_ENUM=1280]="INVALID_ENUM",a[a.INVALID_VALUE=1281]="INVALID_VALUE",a[a.INVALID_OPERATION=1282]="INVALID_OPERATION",a[a.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",a[a.CW=2304]="CW",a[a.CCW=2305]="CCW",a[a.LINE_WIDTH=2849]="LINE_WIDTH",a[a.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",a[a.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",a[a.CULL_FACE_MODE=2885]="CULL_FACE_MODE",a[a.FRONT_FACE=2886]="FRONT_FACE",a[a.DEPTH_RANGE=2928]="DEPTH_RANGE",a[a.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",a[a.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",a[a.DEPTH_FUNC=2932]="DEPTH_FUNC",a[a.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",a[a.STENCIL_FUNC=2962]="STENCIL_FUNC",a[a.STENCIL_FAIL=2964]="STENCIL_FAIL",a[a.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",a[a.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",a[a.STENCIL_REF=2967]="STENCIL_REF",a[a.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",a[a.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",a[a.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",a[a.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",a[a.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",a[a.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",a[a.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",a[a.VIEWPORT=2978]="VIEWPORT",a[a.SCISSOR_BOX=3088]="SCISSOR_BOX",a[a.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",a[a.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",a[a.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",a[a.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",a[a.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",a[a.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",a[a.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",a[a.RED_BITS=3410]="RED_BITS",a[a.GREEN_BITS=3411]="GREEN_BITS",a[a.BLUE_BITS=3412]="BLUE_BITS",a[a.ALPHA_BITS=3413]="ALPHA_BITS",a[a.DEPTH_BITS=3414]="DEPTH_BITS",a[a.STENCIL_BITS=3415]="STENCIL_BITS",a[a.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",a[a.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",a[a.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",a[a.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",a[a.SAMPLES=32937]="SAMPLES",a[a.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",a[a.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",a[a.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",a[a.DONT_CARE=4352]="DONT_CARE",a[a.FASTEST=4353]="FASTEST",a[a.NICEST=4354]="NICEST",a[a.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.RED=6403]="RED",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",a[a.VERTEX_SHADER=35633]="VERTEX_SHADER",a[a.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",a[a.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",a[a.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",a[a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",a[a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",a[a.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",a[a.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",a[a.SHADER_TYPE=35663]="SHADER_TYPE",a[a.DELETE_STATUS=35712]="DELETE_STATUS",a[a.LINK_STATUS=35714]="LINK_STATUS",a[a.VALIDATE_STATUS=35715]="VALIDATE_STATUS",a[a.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",a[a.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",a[a.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",a[a.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",a[a.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS",a[a.KEEP=7680]="KEEP",a[a.REPLACE=7681]="REPLACE",a[a.INCR=7682]="INCR",a[a.DECR=7683]="DECR",a[a.INVERT=5386]="INVERT",a[a.INCR_WRAP=34055]="INCR_WRAP",a[a.DECR_WRAP=34056]="DECR_WRAP",a[a.VENDOR=7936]="VENDOR",a[a.RENDERER=7937]="RENDERER",a[a.VERSION=7938]="VERSION",a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR",a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",a[a.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",a[a.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",a[a.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",a[a.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE=5890]="TEXTURE",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a[a.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",a[a.TEXTURE0=33984]="TEXTURE0",a[a.TEXTURE1=33985]="TEXTURE1",a[a.TEXTURE2=33986]="TEXTURE2",a[a.TEXTURE3=33987]="TEXTURE3",a[a.TEXTURE4=33988]="TEXTURE4",a[a.TEXTURE5=33989]="TEXTURE5",a[a.TEXTURE6=33990]="TEXTURE6",a[a.TEXTURE7=33991]="TEXTURE7",a[a.TEXTURE8=33992]="TEXTURE8",a[a.TEXTURE9=33993]="TEXTURE9",a[a.TEXTURE10=33994]="TEXTURE10",a[a.TEXTURE11=33995]="TEXTURE11",a[a.TEXTURE12=33996]="TEXTURE12",a[a.TEXTURE13=33997]="TEXTURE13",a[a.TEXTURE14=33998]="TEXTURE14",a[a.TEXTURE15=33999]="TEXTURE15",a[a.TEXTURE16=34e3]="TEXTURE16",a[a.TEXTURE17=34001]="TEXTURE17",a[a.TEXTURE18=34002]="TEXTURE18",a[a.TEXTURE19=34003]="TEXTURE19",a[a.TEXTURE20=34004]="TEXTURE20",a[a.TEXTURE21=34005]="TEXTURE21",a[a.TEXTURE22=34006]="TEXTURE22",a[a.TEXTURE23=34007]="TEXTURE23",a[a.TEXTURE24=34008]="TEXTURE24",a[a.TEXTURE25=34009]="TEXTURE25",a[a.TEXTURE26=34010]="TEXTURE26",a[a.TEXTURE27=34011]="TEXTURE27",a[a.TEXTURE28=34012]="TEXTURE28",a[a.TEXTURE29=34013]="TEXTURE29",a[a.TEXTURE30=34014]="TEXTURE30",a[a.TEXTURE31=34015]="TEXTURE31",a[a.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",a[a.REPEAT=10497]="REPEAT",a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a[a.FLOAT_VEC2=35664]="FLOAT_VEC2",a[a.FLOAT_VEC3=35665]="FLOAT_VEC3",a[a.FLOAT_VEC4=35666]="FLOAT_VEC4",a[a.INT_VEC2=35667]="INT_VEC2",a[a.INT_VEC3=35668]="INT_VEC3",a[a.INT_VEC4=35669]="INT_VEC4",a[a.BOOL=35670]="BOOL",a[a.BOOL_VEC2=35671]="BOOL_VEC2",a[a.BOOL_VEC3=35672]="BOOL_VEC3",a[a.BOOL_VEC4=35673]="BOOL_VEC4",a[a.FLOAT_MAT2=35674]="FLOAT_MAT2",a[a.FLOAT_MAT3=35675]="FLOAT_MAT3",a[a.FLOAT_MAT4=35676]="FLOAT_MAT4",a[a.SAMPLER_2D=35678]="SAMPLER_2D",a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE",a[a.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",a[a.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",a[a.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",a[a.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",a[a.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",a[a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",a[a.COMPILE_STATUS=35713]="COMPILE_STATUS",a[a.LOW_FLOAT=36336]="LOW_FLOAT",a[a.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",a[a.HIGH_FLOAT=36338]="HIGH_FLOAT",a[a.LOW_INT=36339]="LOW_INT",a[a.MEDIUM_INT=36340]="MEDIUM_INT",a[a.HIGH_INT=36341]="HIGH_INT",a[a.FRAMEBUFFER=36160]="FRAMEBUFFER",a[a.RENDERBUFFER=36161]="RENDERBUFFER",a[a.RGBA4=32854]="RGBA4",a[a.RGB5_A1=32855]="RGB5_A1",a[a.RGB565=36194]="RGB565",a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",a[a.STENCIL_INDEX=6401]="STENCIL_INDEX",a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a[a.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",a[a.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",a[a.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",a[a.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",a[a.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",a[a.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",a[a.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",a[a.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",a[a.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",a[a.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",a[a.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",a[a.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",a[a.NONE=0]="NONE",a[a.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",a[a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",a[a.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",a[a.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",a[a.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",a[a.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",a[a.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",a[a.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",a[a.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",a[a.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",a[a.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",a}({});const S1=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{camelCase:IP,isNil:ME,upperFirst:Jc}=ii;class ba{constructor(){(0,ct.Z)(this,"shaderModuleService",void 0),(0,ct.Z)(this,"rendererService",void 0),(0,ct.Z)(this,"config",void 0),(0,ct.Z)(this,"quad",S1),(0,ct.Z)(this,"enabled",!0),(0,ct.Z)(this,"renderToScreen",!1),(0,ct.Z)(this,"model",void 0),(0,ct.Z)(this,"name",void 0),(0,ct.Z)(this,"optionsToUpdate",{})}getName(){return this.name}setName(i){this.name=i}getType(){return ta.PostProcessing}init(i,s){this.config=s,this.rendererService=i.getContainer().rendererService,this.shaderModuleService=i.getContainer().shaderModuleService;const{createAttribute:f,createBuffer:g,createModel:y}=this.rendererService,{vs:x,fs:O,uniforms:A}=this.setupShaders();this.model=y({vs:x,fs:O,attributes:{a_Position:f({buffer:g({data:[-4,-4,4,-4,0,4],type:ot.FLOAT}),size:2})},uniforms:(0,on.Z)((0,on.Z)({u_Texture:null},A),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(i,s){const f=i.multiPassRenderer.getPostProcessor(),{useFramebuffer:g,getViewportSize:y,clear:x}=this.rendererService,{width:O,height:A}=y();g(this.renderToScreen?null:f.getWriteFBO(),()=>{x({framebuffer:f.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const P=(0,on.Z)({u_BloomFinal:0,u_Texture:f.getReadFBO(),u_ViewportSize:[O,A]},this.convertOptionsToUniforms(this.optionsToUpdate));s&&(P.u_BloomFinal=1,P.u_Texture2=s),this.model.draw({uniforms:P})})}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}setRenderToScreen(i){this.renderToScreen=i}updateOptions(i){this.optionsToUpdate=(0,on.Z)((0,on.Z)({},this.optionsToUpdate),i)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(i){const s={};return Object.keys(i).forEach(f=>{ME(i[f])||(s[`u_${Jc(IP(f))}`]=i[f])}),s}}function T0(a){let i=0;switch(a){case"vec2":case"ivec2":i=2;break;case"vec3":case"ivec3":i=3;break;case"vec4":case"ivec4":case"mat2":i=4;break;case"mat3":i=9;break;case"mat4":i=16;break;default:}return i}const O1=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function E1(a,i=!1){const s={};return a=a.replace(O1,(f,g,y)=>{const x=y.split(":"),O=x[0].trim();let A="";switch(x.length>1&&(A=x[1].trim()),g){case"bool":A=A==="true";break;case"float":case"int":A=Number(A);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":A?A=A.replace("[","").replace("]","").split(",").reduce((P,N)=>(P.push(Number(N.trim())),P),[]):A=new Array(T0(g)).fill(0);break;default:}return s[O]=A,`${i?"uniform ":""}${g} ${O};
`}),{content:a,uniforms:s}}function vd(a){let{content:i,uniforms:s}=E1(a,!0);return i=i.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(f,g,y)=>{y=y.trim().replace(/^.*$/gm,A=>`uniform ${A}`);const{content:x,uniforms:O}=E1(y);return Object.assign(s,O),`${g}{
${x}
};`}),{content:i,uniforms:s}}function w1(a){const i={};return a.replace(O1,(s,f,g)=>{const y=g.trim();return i[y]?"":(i[y]=!0,`uniform ${f} ${y};
`)})}const md=null;function sr(a){return md.indexOf(a)}const{clamp:ea}=ii,Wa=2,Bo=4,yd=64,RP=128,LE=256,A1=512,gu=8192,PE=16384,kP=32768,C0=null,T1=131072,DP=262144,IE=524288,FP=1048576,RE=2097152,NP=4194304,kE=8388608,DE=16777216,M0=null;function bd(a,i){return a=ea(Math.floor(a),0,255),i=ea(Math.floor(i),0,255),256*a+i}function tl(a){const{color:i,radius:s,tileX:f,tileY:g,shape:y,opacity:x,stroke:O,strokeWidth:A,strokeOpacity:P}=a,N=[],Z=[],W=[],mt=[bd(i[0],i[1]),bd(i[2],i[3])],Nt=[bd(O[0],O[1]),bd(O[2],O[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(([Jt,ye])=>{N.push([...mt,(Jt+1)*kE+(ye+1)*RE+getShapeIndex(y)*T1+s,(f+512)*IE+(g+512)*yd]),Z.push([...Nt,A,P]),W.push([x,0,0,0])}),{packedBuffer:N,packedBuffer2:Z,packedBuffer3:W}}function C1(a,i){if(a===0&&!i)return 0;if(a===1&&i)return 4294967295;const s=i?1:0,f=Math.floor(a*127);return f*M0+s*DE+f*T1+s*C0+f*A1+s*LE+f*Wa+s}const as={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let vu=function(a){return a.TOPRIGHT="topright",a.TOPLEFT="topleft",a.BOTTOMRIGHT="bottomright",a.BOTTOMLEFT="bottomleft",a.TOPCENTER="topcenter",a.BOTTOMCENTER="bottomcenter",a.LEFTCENTER="leftcenter",a.RIGHTCENTER="rightcenter",a.LEFTTOP="lefttop",a.RIGHTTOP="righttop",a.LEFTBOTTOM="leftbottom",a.RIGHTBOTTOM="rightbottom",a}({}),L0=function(a){return a[a.LNGLAT=1]="LNGLAT",a[a.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",a[a.VECTOR_TILE=3]="VECTOR_TILE",a[a.IDENTITY=4]="IDENTITY",a[a.METER_OFFSET=5]="METER_OFFSET",a}({});const ss={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",RelativeOrigin:"u_RelativeOrigin"};var Oi={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let Gi=function(a){return a.Hover="hover",a.Click="click",a.Select="select",a.Active="active",a.Drag="drag",a}({}),_a=function(a){return a.normal="normal",a.additive="additive",a.subtractive="subtractive",a.min="min",a.max="max",a.none="none",a}({}),na=function(a){return a.MULTIPLE="MULTIPLE",a.SINGLE="SINGLE",a}({}),_d=function(a){return a.AND="and",a.OR="or",a}({}),$i=function(a){return a.INIT="init",a.UPDATE="update",a}({}),br=function(a){return a.LINEAR="linear",a.SEQUENTIAL="sequential",a.POWER="power",a.LOG="log",a.IDENTITY="identity",a.TIME="time",a.QUANTILE="quantile",a.QUANTIZE="quantize",a.THRESHOLD="threshold",a.CAT="cat",a.DIVERGING="diverging",a.CUSTOM="threshold",a}({}),cs=function(a){return a.CONSTANT="constant",a.VARIABLE="variable",a}({}),Dn=function(a){return a[a.Attribute=0]="Attribute",a[a.InstancedAttribute=1]="InstancedAttribute",a[a.Uniform=2]="Uniform",a}({});const M1=["mapload","mapchange","mapAfterFrameChange"];var L1=k(49296),FE=k.n(L1);const mu=30;function NE({characterSet:a,getFontWidth:i,fontHeight:s,buffer:f,maxCanvasWidth:g,mapping:y={},xOffset:x=0,yOffset:O=0}){let A=0,P=x;Array.from(a).forEach((Z,W)=>{if(!y[Z]){const mt=i(Z,W);P+mu>g&&(P=0,A++),y[Z]={x:P,y:O+A*mu,width:mu,height:mu,advance:mt},P+=mu}});const N=s+f*2;return{mapping:y,xOffset:P,yOffset:O+A*N,canvasHeight:P1(O+(A+1)*N)}}function BE(a,i,s){let f=0,g=0,y=0,x=[];const O={};for(const P of a)if(!O[P.id]){const{size:N}=P;f+N+i>s&&(P0(O,x,g),f=0,g=y+g+i,y=0,x=[]),x.push({icon:P,xOffset:f}),f=f+N+i,y=Math.max(y,N)}x.length>0&&P0(O,x,g);const A=P1(y+g+i);return{mapping:O,canvasHeight:A}}function P0(a,i,s){for(const f of i){const{icon:g,xOffset:y}=f;a[g.id]=(0,on.Z)((0,on.Z)({},g),{},{x:y,y:s,image:g.image,width:g.width,height:g.height})}}function P1(a){return Math.pow(2,Math.ceil(Math.log2(a)))}const jE=R0(),zE="sans-serif",UE="normal",I1=24,ZE=3,HE=.25,VE=8,ji=1024,WE=1,xd=1,GE=3,I0=null;function R0(){const a=[];for(let i=32;i<128;i++)a.push(String.fromCharCode(i));return a}function $E(a,i,s,f){a.font=`${f} ${s}px ${i}`,a.fillStyle="black",a.textBaseline="middle"}function R1(a,i){for(let s=0;s<a.length;s++)i.data[4*s+3]=a[s]}class k1 extends to.EventEmitter{constructor(...i){super(...i),(0,ct.Z)(this,"fontAtlas",void 0),(0,ct.Z)(this,"iconFontMap",void 0),(0,ct.Z)(this,"iconFontGlyphs",{}),(0,ct.Z)(this,"fontOptions",void 0),(0,ct.Z)(this,"key",void 0),(0,ct.Z)(this,"cache",new OP(GE))}get scale(){return xd}get canvas(){const i=this.cache.get(this.key);return i&&i.data}get mapping(){const i=this.cache.get(this.key);return i&&i.mapping||{}}getCanvasByKey(i){const s=this.cache.get(i);return s&&s.data}getMappingByKey(i){const s=this.cache.get(i);return s&&s.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:zE,fontWeight:UE,characterSet:jE,fontSize:I1,buffer:ZE,sdf:!0,cutoff:HE,radius:VE,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(i){i.forEach(s=>{this.iconFontGlyphs[s.name]=s.unicode})}addIconFont(i,s){this.iconFontMap.set(i,s)}getIconFontKey(i){return this.iconFontMap.get(i)||i}getGlyph(i){return this.iconFontGlyphs[i]?String.fromCharCode(parseInt(this.iconFontGlyphs[i],16)):""}setFontOptions(i){this.fontOptions=(0,on.Z)((0,on.Z)({},this.fontOptions),i),this.key=this.getKey();const s=this.getNewChars(this.key,this.fontOptions.characterSet),f=this.cache.get(this.key);if(f&&s.length===0)return;const g=this.generateFontAtlas(this.key,s,f);this.fontAtlas=g,this.cache.set(this.key,g)}addFontFace(i,s){const f=document.createElement("style");f.type="text/css",f.innerText=`
        @font-face{
            font-family: '${i}';
            src: url('${s}') format('woff2'),
            url('${s}') format('woff'),
            url('${s}') format('truetype');
        }`,f.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${i}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:i})})}catch(g){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(g)}},document.getElementsByTagName("head")[0].appendChild(f)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(i,s,f){const{fontFamily:g,fontWeight:y,fontSize:x,buffer:O,sdf:A,radius:P,cutoff:N,iconfont:Z}=this.fontOptions;let W=f&&f.data;W||(W=window.document.createElement("canvas"),W.width=ji);const mt=W.getContext("2d",{willReadFrequently:!0});$E(mt,g,x,y);const{mapping:Nt,canvasHeight:Jt,xOffset:ye,yOffset:Ne}=NE((0,on.Z)({getFontWidth:He=>mt.measureText(He).width,fontHeight:x*xd,buffer:O,characterSet:s,maxCanvasWidth:ji},f&&{mapping:f.mapping,xOffset:f.xOffset,yOffset:f.yOffset})),ze=mt.getImageData(0,0,W.width,W.height);if(W.height=Jt,mt.putImageData(ze,0,0),$E(mt,g,x,y),A){const He=new(FE())(x,O,P,N,g,y),nn=mt.getImageData(0,0,He.size,He.size);for(const pn of s){if(Z){const In=String.fromCharCode(parseInt(pn.replace("&#x","").replace(";",""),16)),En=He.draw(In);R1(En,nn)}else R1(He.draw(pn),nn);mt.putImageData(nn,Nt[pn].x,Nt[pn].y)}}else for(const He of s)mt.fillText(He,Nt[He].x,Nt[He].y+x*WE);return{xOffset:ye,yOffset:Ne,mapping:Nt,data:W,width:W.width,height:W.height}}getKey(){const{fontFamily:i,fontWeight:s}=this.fontOptions;return`${i}_${s}`}getNewChars(i,s){const f=this.cache.get(i);if(!f)return s;const g=[],y=f.mapping,x=new Set(Object.keys(y));return new Set(s).forEach(A=>{x.has(A)||g.push(A)}),g}}var ln=k(15861);const D1=3,Sd=1024,yu=64;class YE extends to.EventEmitter{constructor(...i){super(...i),(0,ct.Z)(this,"canvasHeight",128),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"canvas",void 0),(0,ct.Z)(this,"iconData",void 0),(0,ct.Z)(this,"iconMap",void 0),(0,ct.Z)(this,"ctx",void 0),(0,ct.Z)(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(i,s){var f=this;return(0,ln.Z)(function*(){let g=new Image;f.loadingImageCount++,f.hasImage(i)?console.warn("Image Id already exists"):f.iconData.push({id:i,size:yu}),f.updateIconMap(),g=yield f.loadImage(s);const y=f.iconData.find(x=>x.id===i);y&&(y.image=g,y.width=g.width,y.height=g.height),f.update()})()}addImageMini(i,s,f){const g=f.getSceneConfig().canvas;let y=g.createImage();if(this.loadingImageCount++,this.hasImage(i))throw new Error("Image Id already exists");this.iconData.push({id:i,size:yu}),this.updateIconMap(),this.loadImageMini(s,g).then(x=>{y=x;const O=this.iconData.find(A=>A.id===i);O&&(O.image=y,O.width=y.width,O.height=y.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(i){return this.iconMap.hasOwnProperty(i)}removeImage(i){this.hasImage(i)&&(this.iconData=this.iconData.filter(s=>s.id!==i),delete this.iconMap[i],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(i){return new Promise((s,f)=>{if(i instanceof HTMLImageElement){s(i);return}const g=new Image;g.crossOrigin="anonymous",g.onload=()=>{s(g)},g.onerror=()=>{f(new Error("Could not load image at "+i))},g.src=i instanceof File?URL.createObjectURL(i):i})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=Sd,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(i=>{const{x:s,y:f,image:g,width:y=64,height:x=64}=this.iconMap[i],A=Math.max(y,x)/yu,P=x/A,N=y/A;g&&this.ctx.drawImage(g,s+(yu-N)/2,f+(yu-P)/2,N,P)})}updateIconMap(){const{mapping:i,canvasHeight:s}=BE(this.iconData,D1,Sd);this.iconMap=i,this.canvasHeight=s}loadImageMini(i,s){return new Promise((f,g)=>{const y=s.createImage();y.crossOrigin="anonymous",y.onload=()=>{f(y)},y.onerror=()=>{g(new Error("Could not load image at "+i))},y.src=i})}}var Mr=k(85975);class Yi{constructor(){(0,ct.Z)(this,"viewport",void 0),(0,ct.Z)(this,"overridedViewProjectionMatrix",void 0),(0,ct.Z)(this,"viewMatrixInverse",void 0),(0,ct.Z)(this,"cameraPosition",void 0)}init(){}update(i){this.viewport=i,this.viewMatrixInverse=Mr.create(),Mr.invert(this.viewMatrixInverse,i.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[i,s]=this.viewport.getCenter();return[i,s]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(i,s){return this.viewport.projectFlat(i,s)}setViewProjectionMatrix(i){this.overridedViewProjectionMatrix=i}}const k0={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class Od{constructor(){(0,ct.Z)(this,"container",void 0),(0,ct.Z)(this,"controlCorners",void 0),(0,ct.Z)(this,"controlContainer",void 0),(0,ct.Z)(this,"scene",void 0),(0,ct.Z)(this,"mapsService",void 0),(0,ct.Z)(this,"controls",[]),(0,ct.Z)(this,"unAddControls",[])}init(i,s){this.container=i.container,this.scene=s,this.mapsService=s.mapService,this.initControlPos()}addControl(i,s){s.mapService.map?(i.addTo(this.scene),this.controls.push(i)):this.unAddControls.push(i)}getControlByName(i){return this.controls.find(s=>s.controlOption.name===i)}removeControl(i){const s=this.controls.indexOf(i);return s>-1&&this.controls.splice(s,1),i.remove(),this}addControls(){this.unAddControls.forEach(i=>{i.addTo(this.scene),this.controls.push(i)}),this.unAddControls=[]}destroy(){for(const i of this.controls)i.remove();this.controls=[],this.clearControlPos()}initControlPos(){const i=this.controlCorners={},s="l7-",f=this.controlContainer=Bi("div",s+"control-container",this.container);function g(x=[]){const O=x.map(A=>s+A).join(" ");i[x.filter(A=>!["row","column"].includes(A)).join("")]=Bi("div",O,f)}function y(x){return[...x.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),k0[x]]}Object.values(vu).forEach(x=>{g(y(x))}),this.checkCornerOverlap()}clearControlPos(){for(const i in this.controlCorners)this.controlCorners[i]&&Ba(this.controlCorners[i]);this.controlContainer&&Ba(this.controlContainer)}checkCornerOverlap(){const i=window.MutationObserver;if(i)for(const s of Object.keys(this.controlCorners)){const f=s.match(/^(top|bottom)(left|right)$/);if(f){const[,g,y]=f,x=this.controlCorners[`${g}${y}`];new i(([{target:A}])=>{x&&(x.style[g]=A.clientHeight+"px")}).observe(this.controlCorners[`${y}${g}`],{childList:!0,attributes:!0})}}}}class bu{constructor(){(0,ct.Z)(this,"container",void 0),(0,ct.Z)(this,"scene",void 0),(0,ct.Z)(this,"mapsService",void 0),(0,ct.Z)(this,"markers",[]),(0,ct.Z)(this,"markerLayers",[]),(0,ct.Z)(this,"unAddMarkers",[]),(0,ct.Z)(this,"unAddMarkerLayers",[])}addMarkerLayer(i){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(i),i.addTo(this.scene)):this.unAddMarkerLayers.push(i)}removeMarkerLayer(i){i.destroy(),this.markerLayers.indexOf(i);const s=this.markerLayers.indexOf(i);s>-1&&this.markerLayers.splice(s,1)}addMarker(i){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(i),i.addTo(this.scene)):this.unAddMarkers.push(i)}addMarkers(){this.unAddMarkers.forEach(i=>{i.addTo(this.scene),this.markers.push(i)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(i=>{this.markerLayers.push(i),i.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(i){i.remove(),this.markers.indexOf(i);const s=this.markers.indexOf(i);s>-1&&this.markers.splice(s,1)}removeAllMarkers(){this.destroy()}init(i){this.scene=i,this.mapsService=i.mapService}destroy(){this.markers.forEach(i=>{i.remove()}),this.markers=[],this.markerLayers.forEach(i=>{i.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(i){i.destroy()}}class _u{constructor(){(0,ct.Z)(this,"scene",void 0),(0,ct.Z)(this,"mapsService",void 0),(0,ct.Z)(this,"popups",[]),(0,ct.Z)(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(i){i!=null&&i.isOpen()&&i.remove();const s=this.popups.indexOf(i);s>-1&&this.popups.splice(s,1);const f=this.unAddPopups.indexOf(i);f>-1&&this.unAddPopups.splice(f,1)}destroy(){this.popups.forEach(i=>i.remove())}addPopup(i){i&&i.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(s=>{s.getOptions().autoClose&&this.removePopup(s)}),this.isMarkerReady?(i.addTo(this.scene),this.popups.push(i)):this.unAddPopups.push(i),i.on("close",()=>{this.removePopup(i)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(i=>{this.addPopup(i),this.unAddPopups=[]})}init(i){this.scene=i,this.mapsService=i.mapService}}var XE={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"};const{merge:qE}=ii,KE={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},F1={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:_d.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class N1{constructor(){(0,ct.Z)(this,"sceneConfigCache",{}),(0,ct.Z)(this,"layerConfigCache",{}),(0,ct.Z)(this,"layerAttributeConfigCache",{})}getSceneConfig(i){return this.sceneConfigCache[i]}getSceneWarninfo(i){return XE[i]}setSceneConfig(i,s){this.sceneConfigCache[i]=(0,on.Z)((0,on.Z)({},KE),s)}getLayerConfig(i){return this.layerConfigCache[i]}setLayerConfig(i,s,f){this.layerConfigCache[s]=(0,on.Z)({},qE({},this.sceneConfigCache[i],F1,f))}getAttributeConfig(i){return this.layerAttributeConfigCache[i]}setAttributeConfig(i,s){this.layerAttributeConfigCache[i]=(0,on.Z)((0,on.Z)({},this.layerAttributeConfigCache[i]),s)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}var xu=k(98333);const D0=Math.PI/180,QE=512,Su=4003e4;function Ed({latitude:a=0,zoom:i=0,scale:s,highPrecision:f=!1,flipY:g=!1}){s=s!==void 0?s:Math.pow(2,i);const y={},x=QE*s,O=Math.cos(a*D0),A=x/360,P=A/O,N=x/Su/O;if(y.pixelsPerMeter=[N,-N,N],y.metersPerPixel=[1/N,-1/N,1/N],y.pixelsPerDegree=[A,-P,N],y.degreesPerPixel=[1/A,-1/P,1/N],f){const Z=D0*Math.tan(a*D0)/O,W=A*Z/2,mt=x/Su*Z,Nt=mt/P*N;y.pixelsPerDegree2=[0,-W,mt],y.pixelsPerMeter2=[Nt,0,Nt],g&&(y.pixelsPerDegree2[1]=-y.pixelsPerDegree2[1],y.pixelsPerMeter2[1]=-y.pixelsPerMeter2[1])}return g&&(y.pixelsPerMeter[1]=-y.pixelsPerMeter[1],y.metersPerPixel[1]=-y.metersPerPixel[1],y.pixelsPerDegree[1]=-y.pixelsPerDegree[1],y.degreesPerPixel[1]=-y.degreesPerPixel[1]),y}const JE=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class tw{constructor(i){(0,ct.Z)(this,"needRefresh",!0),(0,ct.Z)(this,"coordinateSystem",void 0),(0,ct.Z)(this,"viewportCenter",void 0),(0,ct.Z)(this,"viewportCenterProjection",void 0),(0,ct.Z)(this,"pixelsPerDegree",void 0),(0,ct.Z)(this,"pixelsPerDegree2",void 0),(0,ct.Z)(this,"pixelsPerMeter",void 0),this.cameraService=i}refresh(i){const s=this.cameraService.getZoom(),f=i||this.cameraService.getCenter(),{pixelsPerMeter:g,pixelsPerDegree:y}=Ed({latitude:f[1],zoom:s});this.viewportCenter=f,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===L0.LNGLAT?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===L0.LNGLAT_OFFSET&&this.calculateLnglatOffset(f,s),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(i){this.coordinateSystem=i}getViewportCenter(){return this.viewportCenter}setViewportCenter(i){this.refresh(i)}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(i,s,f,g){const{pixelsPerMeter:y,pixelsPerDegree:x,pixelsPerDegree2:O}=Ed({latitude:i[1],zoom:s,scale:f,flipY:g,highPrecision:!0});let A=this.cameraService.getViewMatrix();const P=this.cameraService.getProjectionMatrix();let N=Mr.multiply([],P,A);const Z=this.cameraService.projectFlat([Math.fround(i[0]),Math.fround(i[1])],Math.pow(2,s));this.viewportCenterProjection=xu.fF([],[Z[0],Z[1],0,1],N),A=this.cameraService.getViewMatrixUncentered()||A,N=Mr.multiply([],P,A),N=Mr.multiply([],N,JE),this.cameraService.setViewProjectionMatrix(N),this.pixelsPerMeter=y,this.pixelsPerDegree=x,this.pixelsPerDegree2=O}}class jP extends to.EventEmitter{constructor(...i){super(...i),(0,ct.Z)(this,"renderMap",new Map),(0,ct.Z)(this,"enable",!1),(0,ct.Z)(this,"renderEnable",!1),(0,ct.Z)(this,"cacheLogs",{})}setEnable(i){this.enable=!!i}log(i,s){if(!this.enable)return;const f=i.split(".");let g=null;f.forEach((y,x)=>{g!==null?(g[y]||(g[y]={}),x!==f.length-1&&(g=g[y])):(this.cacheLogs[y]||(this.cacheLogs[y]={}),x!==f.length-1&&(g=this.cacheLogs[y])),x===f.length-1&&(g[y]=(0,on.Z)((0,on.Z)({time:Date.now()},g[y]),s))})}getLog(i){switch(typeof i){case"string":return this.cacheLogs[i];case"object":return i.map(s=>this.cacheLogs[s]).filter(s=>s!==void 0);case"undefined":return this.cacheLogs}}removeLog(i){delete this.cacheLogs[i]}generateRenderUid(){return this.renderEnable?Ly():""}renderDebug(i){this.renderEnable=i}renderStart(i){if(!this.renderEnable||!this.enable)return;const s=this.renderMap.get(i)||{};this.renderMap.set(i,(0,on.Z)((0,on.Z)({},s),{},{renderUid:i,renderStart:Date.now()}))}renderEnd(i){if(!this.renderEnable||!this.enable)return;const s=this.renderMap.get(i);if(s){const f=s.renderStart,g=Date.now();this.emit("renderEnd",(0,on.Z)((0,on.Z)({},s),{},{renderEnd:g,renderDuration:g-f})),this.renderMap.delete(i)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var B1=k(50840),wd=k.n(B1);const ew={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class zP extends qp(){get mapService(){return this.container.mapService}constructor(i){super(),(0,ct.Z)(this,"indragging",!1),(0,ct.Z)(this,"hammertime",void 0),(0,ct.Z)(this,"lastClickTime",0),(0,ct.Z)(this,"lastClickXY",[-1,-1]),(0,ct.Z)(this,"clickTimer",void 0),(0,ct.Z)(this,"$containter",void 0),(0,ct.Z)(this,"onDrag",s=>{const f=this.interactionEvent(s);f.type=ew[f.type],f.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(Gi.Drag,f)}),(0,ct.Z)(this,"onHammer",s=>{s.srcEvent.stopPropagation();const f=this.interactionEvent(s);this.emit(Gi.Hover,f)}),(0,ct.Z)(this,"onTouch",s=>{const f=s.touches[0];this.onHover({clientX:f.clientX,clientY:f.clientY,type:"touchstart"})}),(0,ct.Z)(this,"onTouchEnd",s=>{if(s.changedTouches.length>0){const f=s.changedTouches[0];this.onHover({clientX:f.clientX,clientY:f.clientY,type:"touchend"})}}),(0,ct.Z)(this,"onTouchMove",s=>{const f=s.changedTouches[0];this.onHover({clientX:f.clientX,clientY:f.clientY,type:"touchmove"})}),(0,ct.Z)(this,"onHover",s=>{const{clientX:f,clientY:g}=s;let y=f,x=g;const O=s.type,A=this.mapService.getMapContainer();if(A){const{top:N,left:Z}=A.getBoundingClientRect();y=y-Z-A.clientLeft,x=x-N-A.clientTop}const P=this.mapService.containerToLngLat([y,x]);if(O==="click"){this.isDoubleTap(y,x,P);return}if(O==="touch"){this.isDoubleTap(y,x,P);return}O!=="click"&&O!=="dblclick"&&this.emit(Gi.Hover,{x:y,y:x,lngLat:P,type:O,target:s})}),this.container=i}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Gi.Hover)}triggerHover({x:i,y:s}){this.emit(Gi.Hover,{x:i,y:s})}triggerSelect(i){this.emit(Gi.Select,{featureId:i})}triggerActive(i){this.emit(Gi.Active,{featureId:i})}addEventListenerOnMap(){const i=this.mapService.getMapContainer();if(i){const s=new(wd()).Manager(i);s.add(new(wd()).Tap({event:"dblclick",taps:2})),s.add(new(wd()).Tap({event:"click"})),s.add(new(wd()).Pan({threshold:0,pointers:0})),s.add(new(wd()).Press({})),s.on("dblclick click",this.onHammer),s.on("panstart panmove panend pancancel",this.onDrag),i.addEventListener("touchstart",this.onTouch),i.addEventListener("touchend",this.onTouchEnd),i.addEventListener("mousemove",this.onHover),i.addEventListener("touchmove",this.onTouchMove),i.addEventListener("mousedown",this.onHover,!0),i.addEventListener("mouseup",this.onHover),i.addEventListener("contextmenu",this.onHover),this.hammertime=s}}removeEventListenerOnMap(){const i=this.mapService.getMapContainer();i&&(i.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),i.removeEventListener("touchstart",this.onTouch),i.removeEventListener("touchend",this.onTouchEnd),i.removeEventListener("mousedown",this.onHover),i.removeEventListener("mouseup",this.onHover),i.removeEventListener("contextmenu",this.onHover))}interactionEvent(i){const{type:s,pointerType:f}=i;let g,y;f==="touch"?(y=Math.floor(i.pointers[0].clientY),g=Math.floor(i.pointers[0].clientX)):(y=Math.floor(i.srcEvent.y),g=Math.floor(i.srcEvent.x));const x=this.mapService.getMapContainer();if(x){const{top:A,left:P}=x.getBoundingClientRect();g-=P,y-=A}const O=this.mapService.containerToLngLat([g,y]);return{x:g,y,lngLat:O,type:s,target:i.srcEvent}}isDoubleTap(i,s,f){const g=new Date().getTime();let y="click";g-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-i)<10&&Math.abs(this.lastClickXY[1]-s)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),y="dblclick",this.emit(Gi.Hover,{x:i,y:s,lngLat:f,type:y})):(this.lastClickTime=g,this.lastClickXY=[i,s],this.clickTimer=setTimeout(()=>{y="click",this.emit(Gi.Hover,{x:i,y:s,lngLat:f,type:y})},400))}}let nw=0;function rw(a){let i=a;if(typeof a=="string"&&(i=document.getElementById(a)),i){const s=document.createElement("div");return s.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,s.id=`l7-scene-${nw++}`,s.classList.add("l7-scene"),i.appendChild(s),s}return null}function iw(a){var i;let s=!0;if((a==null||(i=a.target)===null||i===void 0?void 0:i.target)instanceof HTMLElement){var f;let y=a==null||(f=a.target)===null||f===void 0?void 0:f.target;for(;y;){var g;const x=Array.from(y.classList);if(x.includes("l7-marker")||x.includes("l7-popup")){s=!1;break}y=(g=y)===null||g===void 0?void 0:g.parentElement}}return s}let Ou=function(a){return a[a.SAMPLED=0]="SAMPLED",a[a.RENDER_TARGET=1]="RENDER_TARGET",a}({});class ow{constructor(i){var s=this;(0,ct.Z)(this,"pickedColors",void 0),(0,ct.Z)(this,"pickedTileLayers",[]),(0,ct.Z)(this,"pickingFBO",void 0),(0,ct.Z)(this,"width",0),(0,ct.Z)(this,"height",0),(0,ct.Z)(this,"alreadyInPicking",!1),(0,ct.Z)(this,"pickBufferScale",1),(0,ct.Z)(this,"pickFromPickingFBO",function(){var f=(0,ln.Z)(function*(g,{x:y,y:x,lngLat:O,type:A,target:P}){var N;let Z=!1;const{readPixels:W,readPixelsAsync:mt,getViewportSize:Nt,queryVerdorInfo:Jt}=s.rendererService,{width:ye,height:Ne}=Nt(),{enableHighlight:ze,enableSelect:He}=g.getLayerConfig(),nn=y*Vi,pn=x*Vi;if(nn>ye-1*Vi||nn<0||pn>Ne-1*Vi||pn<0)return!1;let In;if(Jt()==="WebGPU"?In=yield mt({x:Math.floor(nn/s.pickBufferScale),y:Math.floor((Ne-(x+1)*Vi)/s.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:s.pickingFBO}):In=W({x:Math.floor(nn/s.pickBufferScale),y:Math.floor((Ne-(x+1)*Vi)/s.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:s.pickingFBO}),s.pickedColors=In,In[0]!==0||In[1]!==0||In[2]!==0){const Rn=Gs(In),rr=g.layerPickService.getFeatureById(Rn);Rn!==g.getCurrentPickId()&&A==="mousemove"&&(A="mouseenter");const Tr={x:y,y:x,type:A,lngLat:O,featureId:Rn,feature:rr,target:P};rr&&(Z=!0,g.setCurrentPickId(Rn),s.triggerHoverOnLayer(g,Tr))}else{const Rn={x:y,y:x,lngLat:O,type:g.getCurrentPickId()!==null&&A==="mousemove"?"mouseout":"un"+A,featureId:null,target:P,feature:null};s.triggerHoverOnLayer(g,(0,on.Z)((0,on.Z)({},Rn),{},{type:"unpick"})),s.triggerHoverOnLayer(g,Rn),g.setCurrentPickId(null)}if(ze&&g.layerPickService.highlightPickedFeature(In),He&&A==="click"&&((N=In)===null||N===void 0?void 0:N.toString())!==[0,0,0,0].toString()){const Rn=Gs(In);g.getCurrentSelectedId()===null||Rn!==g.getCurrentSelectedId()?(g.layerPickService.selectFeature(In),g.setCurrentSelectedId(Rn)):(g.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),g.setCurrentSelectedId(null))}return Z});return function(g,y){return f.apply(this,arguments)}}()),this.container=i}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(i){const{createTexture2D:s,createFramebuffer:f,getViewportSize:g}=this.rendererService;let{width:y,height:x}=g();this.pickBufferScale=this.configService.getSceneConfig(i).pickBufferScale||1,y=Math.round(y/this.pickBufferScale),x=Math.round(x/this.pickBufferScale);const O=s({width:y,height:x,usage:Ou.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=f({color:O,depth:!0,width:y,height:x}),this.interactionService.on(Gi.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(i,s,f){var g=this;return(0,ln.Z)(function*(){const{useFramebufferAsync:y,clear:x}=g.rendererService;g.resizePickingFBO(),i.hooks.beforePickingEncode.call(),yield y(g.pickingFBO,(0,ln.Z)(function*(){x({framebuffer:g.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),i.renderModels({ispick:!0})})),i.hooks.afterPickingEncode.call();const O=yield g.pickBox(i,s);f(O)})()}pickBox(i,s){var f=this;return(0,ln.Z)(function*(){const[g,y,x,O]=s.map(Ne=>{const ze=Ne<0?0:Ne;return Math.floor(ze*Vi/f.pickBufferScale)}),{readPixelsAsync:A,getViewportSize:P}=f.rendererService,{width:N,height:Z}=P();if(g>(N-1)*Vi/f.pickBufferScale||x<0||y>(Z-1)*Vi/f.pickBufferScale||O<0)return[];const W=Math.min(N/f.pickBufferScale,x)-g,mt=Math.min(Z/f.pickBufferScale,O)-y,Nt=yield A({x:g,y:Math.floor(Z/f.pickBufferScale-(O+1)),width:W,height:mt,data:new Uint8Array(W*mt*4),framebuffer:f.pickingFBO}),Jt=[],ye={};for(let Ne=0;Ne<Nt.length/4;Ne=Ne+1){const ze=Nt.slice(Ne*4,Ne*4+4),He=Gs(ze);if(He!==-1&&!ye[He]){const nn=i.layerPickService.getFeatureById(He);Jt.push((0,on.Z)((0,on.Z)({},nn),{},{pickedFeatureIdx:He})),ye[He]=!0}}return Jt})()}handleCursor(i,s){const{cursor:f="",cursorEnabled:g}=i.getLayerConfig();if(g){const x=this.mapService.getType()==="amap"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),O=x==null?void 0:x.style.getPropertyValue("cursor");s==="unmousemove"&&O!==""?x==null||x.style.setProperty("cursor",""):s==="mousemove"&&(x==null||x.style.setProperty("cursor",f))}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(i){var s=this;return(0,ln.Z)(function*(){!s.layerService.needPick(i.type)||!s.isPickingAllLayer()||(s.alreadyInPicking=!0,yield s.pickingLayers(i),s.layerService.renderLayers(),s.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:i}=this.rendererService,{width:s,height:f}=i();(this.width!==s||this.height!==f)&&(this.pickingFBO.resize({width:Math.round(s/this.pickBufferScale),height:Math.round(f/this.pickBufferScale)}),this.width=s,this.height=f)}pickingLayers(i){var s=this;return(0,ln.Z)(function*(){const{clear:f,useFramebufferAsync:g}=s.rendererService;s.resizePickingFBO();const y=s.layerService.getRenderList();for(const x of y.filter(O=>O.needPick(i.type)).reverse()){yield g(s.pickingFBO,(0,ln.Z)(function*(){f({framebuffer:s.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),x.layerPickService.pickRender(i)}));const O=yield s.pickFromPickingFBO(x,i);if(s.layerService.pickedLayerId=O?+x.id:-1,O&&!x.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(i,s){iw(s)&&(this.handleCursor(i,s.type),i.emit(s.type,s))}}class aw{constructor(i=!0){(0,ct.Z)(this,"autoStart",void 0),(0,ct.Z)(this,"startTime",0),(0,ct.Z)(this,"oldTime",0),(0,ct.Z)(this,"running",!1),(0,ct.Z)(this,"elapsedTime",0),this.autoStart=i}start(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let i=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const s=(typeof performance=="undefined"?Date:performance).now();i=(s-this.oldTime)/1e3,this.oldTime=s,this.elapsedTime+=i}return i}}const{throttle:j1}=ii;class sw extends to.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(i){super(),(0,ct.Z)(this,"pickedLayerId",-1),(0,ct.Z)(this,"clock",new aw),(0,ct.Z)(this,"alreadyInRendering",!1),(0,ct.Z)(this,"layers",[]),(0,ct.Z)(this,"layerList",[]),(0,ct.Z)(this,"layerRenderID",void 0),(0,ct.Z)(this,"sceneInited",!1),(0,ct.Z)(this,"animateInstanceCount",0),(0,ct.Z)(this,"shaderPicking",!0),(0,ct.Z)(this,"enableRender",!0),(0,ct.Z)(this,"reRender",j1(()=>{this.renderLayers()},32)),(0,ct.Z)(this,"throttleRenderLayers",j1(()=>{this.renderLayers()},16)),this.container=i}needPick(i){return this.updateLayerRenderList(),this.layerList.some(s=>s.needPick(i))}add(i){this.layers.push(i),this.sceneInited&&i.init().then(()=>{this.renderLayers()})}addMask(i){this.sceneInited&&i.init().then(()=>{this.renderLayers()})}initLayers(){var i=this;return(0,ln.Z)(function*(){i.sceneInited=!0,i.layers.forEach(function(){var s=(0,ln.Z)(function*(f){f.startInit||(yield f.init(),i.updateLayerRenderList())});return function(f){return s.apply(this,arguments)}}())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(i){return this.layers.find(s=>s.id===i)}getLayerByName(i){return this.layers.find(s=>s.name===i)}remove(i,s){var f=this;return(0,ln.Z)(function*(){if(s){s.layerChildren||(s.layerChildren=[]);const g=s.layerChildren.findIndex(y=>y.id===i.id);g>-1&&s.layerChildren.splice(g,1)}else{const g=f.layers.findIndex(y=>y.id===i.id);g>-1&&f.layers.splice(g,1)}i.destroy(),f.reRender(),f.emit("layerChange",f.layers)})()}removeAllLayers(){var i=this;return(0,ln.Z)(function*(){i.destroy(),i.reRender()})()}setEnableRender(i){this.enableRender=i}renderLayers(){var i=this;return(0,ln.Z)(function*(){if(i.alreadyInRendering||!i.enableRender)return;i.updateLayerRenderList();const s=i.debugService.generateRenderUid();i.debugService.renderStart(s),i.alreadyInRendering=!0,i.clear();for(const f of i.layerList)f.prerender();i.renderService.beginFrame();for(const f of i.layerList){const{enableMask:g}=f.getLayerConfig();f.masks.filter(y=>y.inited).length>0&&g&&i.renderMask(f.masks),f.getLayerConfig().enableMultiPassRenderer?yield f.renderMultiPass():f.render()}i.renderService.endFrame(),i.debugService.renderEnd(s),i.alreadyInRendering=!1})()}renderMask(i){let s=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const f=i.length>1?na.MULTIPLE:na.SINGLE;for(const g of i)g.render({isStencil:!0,stencilType:f,stencilIndex:s++})}beforeRenderData(i){var s=this;return(0,ln.Z)(function*(){(yield i.hooks.beforeRenderData.promise())&&s.renderLayers()})()}renderTileLayerMask(i){let s=0;const{enableMask:f=!0}=i.getLayerConfig();let g=i.tileMask?1:0;const y=i.masks.filter(O=>O.inited);g=g+(f?y.length:1);const x=g>1?na.MULTIPLE:na.SINGLE;if((i.tileMask||y.length&&f)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),y.length&&f)for(const O of y)O.render({isStencil:!0,stencilType:x,stencilIndex:s++});i.tileMask&&i.tileMask.render({isStencil:!0,stencilType:x,stencilIndex:s++,stencilOperation:_d.OR})}renderTileLayer(i){var s=this;return(0,ln.Z)(function*(){s.renderTileLayerMask(i),i.getLayerConfig().enableMultiPassRenderer?yield i.renderMultiPass():yield i.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(i=>i.inited).filter(i=>i.isVisible()).sort((i,s)=>i.zIndex-s.zIndex).forEach(i=>{this.layerList.push(i)})}destroy(){this.layers.forEach(i=>{i.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const i=Fr(this.mapService.bgColor);this.renderService.clear({color:i,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}var xa=k(91);const{isNil:cw}=ii;class lw{constructor(i){(0,ct.Z)(this,"name",void 0),(0,ct.Z)(this,"type",void 0),(0,ct.Z)(this,"scale",void 0),(0,ct.Z)(this,"descriptor",void 0),(0,ct.Z)(this,"featureBufferLayout",[]),(0,ct.Z)(this,"needRescale",!1),(0,ct.Z)(this,"needRemapping",!1),(0,ct.Z)(this,"needRegenerateVertices",!1),(0,ct.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,ct.Z)(this,"vertexAttribute",void 0),(0,ct.Z)(this,"defaultCallback",s=>{if(s.length===0){var f;return((f=this.scale)===null||f===void 0?void 0:f.defaultValues)||[]}return s.map((g,y)=>{var x;return((x=this.scale)===null||x===void 0?void 0:x.scalers[y].func)(g)})}),this.setProps(i)}setProps(i){Object.assign(this,i)}mapping(i){var s;if((s=this.scale)!==null&&s!==void 0&&s.callback){var f;const g=(f=this.scale)===null||f===void 0?void 0:f.callback(...i);if(!cw(g))return[g]}return this.defaultCallback(i)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const z1=["buffer","update","name"],F0=["buffer","update","name"],uw={[ot.FLOAT]:4,[ot.UNSIGNED_BYTE]:1,[ot.UNSIGNED_SHORT]:2};class fw{constructor(i){(0,ct.Z)(this,"attributesAndIndices",void 0),(0,ct.Z)(this,"attributes",[]),(0,ct.Z)(this,"triangulation",void 0),(0,ct.Z)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=i}registerStyleAttribute(i){let s=this.getLayerStyleAttribute(i.name||"");return s?s.setProps(i):(s=new lw(i),this.attributes.push(s)),s}unRegisterStyleAttribute(i){const s=this.attributes.findIndex(f=>f.name===i);s>-1&&this.attributes.splice(s,1)}updateScaleAttribute(i){this.attributes.forEach(s=>{var f;const g=s.name,y=(f=s.scale)===null||f===void 0?void 0:f.field;(i[g]||y&&i[y])&&(s.needRescale=!0,s.needRemapping=!0,s.needRegenerateVertices=!0)})}updateStyleAttribute(i,s,f){let g=this.getLayerStyleAttribute(i);g||(g=this.registerStyleAttribute((0,on.Z)((0,on.Z)({},s),{},{name:i})));const{scale:y}=s;y&&g&&(g.scale=y,g.needRescale=!0,g.needRemapping=!0,g.needRegenerateVertices=!0,f&&f.featureRange&&(g.featureRange=f.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(i){return this.attributes.find(s=>s.name===i)}getLayerAttributeScale(i){var s;const f=this.getLayerStyleAttribute(i),g=f==null||(s=f.scale)===null||s===void 0?void 0:s.scalers;return g&&g[0]?g[0].func:null}updateAttributeByFeatureRange(i,s,f=0,g,y){const x=this.attributes.find(O=>O.name===i);if(x&&x.descriptor){const{descriptor:O}=x,{update:A,buffer:P,size:N=0}=O,Z=uw[P.type||ot.FLOAT];if(A){const{elements:W,sizePerElement:mt}=this.featureLayout,Nt=W.slice(f,g);if(!Nt.length)return;const{offset:Jt}=Nt[0],ye=Jt*N*Z,Ne=Nt.map(({featureIdx:ze,vertices:He,normals:nn},pn)=>{const In=He.length/mt,En=[];for(let Rn=0;Rn<In;Rn++){const rr=nn?nn.slice(Rn*3,Rn*3+3):[];En.push(...A(s[ze],ze,He.slice(Rn*mt,Rn*mt+mt),pn,rr))}return En}).flat();x.vertexAttribute.updateBuffer({data:Ne,offset:ye}),y==null||y.emit(`legend:${i}`,y.getLegend(i))}}}createAttributesAndIndices(i,s,f,g){this.featureLayout={sizePerElement:0,elements:[]},s&&(this.triangulation=s);const y=this.attributes.map(Jt=>(Jt.resetDescriptor(),Jt.descriptor));let x=0,O=0;const A=[];let P=3;i.forEach((Jt,ye)=>{const{indices:Ne,vertices:ze,normals:He,size:nn,indexes:pn,count:In}=this.triangulation(Jt,f);typeof In=="number"&&(O+=In),Ne.forEach(Rn=>{A.push(Rn+x)}),P=nn;const En=ze.length/nn;this.featureLayout.sizePerElement=P,this.featureLayout.elements.push({featureIdx:ye,vertices:ze,normals:He,offset:x}),x+=En;for(let Rn=0;Rn<En;Rn++){const rr=(He==null?void 0:He.slice(Rn*3,Rn*3+3))||[],Tr=ze.slice(Rn*nn,Rn*nn+nn);let $n=0;pn&&pn[Rn]!==void 0&&($n=pn[Rn]),y.forEach((cr,Lr)=>{cr&&cr.update&&cr.buffer.data.push(...cr.update(Jt,ye,Tr,Rn,rr,$n))})}});const{createAttribute:N,createBuffer:Z,createElements:W}=this.rendererService,mt={};y.forEach((Jt,ye)=>{if(Jt){const{buffer:Ne,update:ze,name:He}=Jt,nn=(0,xa.Z)(Jt,z1),pn=N((0,on.Z)({buffer:Z(Ne)},nn));mt[Jt.name||""]=pn,this.attributes[ye].vertexAttribute=pn}});const Nt=W({data:A,type:ot.UNSIGNED_INT,count:A.length});return this.attributesAndIndices={attributes:mt,elements:Nt,count:O},Object.values(this.attributes).filter(Jt=>Jt.scale).forEach(Jt=>{const ye=Jt.name;g==null||g.emit(`legend:${ye}`,g.getLegend(ye))}),this.attributesAndIndices}createAttributes(i,s){this.featureLayout={sizePerElement:0,elements:[]},s&&(this.triangulation=s);const f=this.attributes.map(N=>(N.resetDescriptor(),N.descriptor));let g=0;const y=[];let x=3;i.forEach((N,Z)=>{const{indices:W,vertices:mt,normals:Nt,size:Jt,indexes:ye}=this.triangulation(N);W.forEach(ze=>{y.push(ze+g)}),x=Jt;const Ne=mt.length/Jt;this.featureLayout.sizePerElement=x,this.featureLayout.elements.push({featureIdx:Z,vertices:mt,normals:Nt,offset:g}),g+=Ne;for(let ze=0;ze<Ne;ze++){const He=(Nt==null?void 0:Nt.slice(ze*3,ze*3+3))||[],nn=mt.slice(ze*Jt,ze*Jt+Jt);let pn=0;ye&&ye[ze]!==void 0&&(pn=ye[ze]),f.forEach((In,En)=>{In&&In.update&&In.buffer.data.push(...In.update(N,Z,nn,ze,He,pn))})}});const{createAttribute:O,createBuffer:A}=this.rendererService,P={};return f.forEach((N,Z)=>{if(N){const{buffer:W,update:mt,name:Nt}=N,Jt=(0,xa.Z)(N,F0),ye=O((0,on.Z)({buffer:A(W)},Jt));P[N.name||""]=ye,this.attributes[Z].vertexAttribute=ye}}),{attributes:P}}clearAllAttributes(){var i;this.attributes.forEach(s=>{s.vertexAttribute&&s.vertexAttribute.destroy()}),(i=this.attributesAndIndices)===null||i===void 0||i.elements.destroy(),this.attributes=[]}}var Ad=k(34155);function N0(a,i,s,f){function g(y){return y instanceof s?y:new s(function(x){x(y)})}return new(s||(s=Promise))(function(y,x){function O(N){try{P(f.next(N))}catch(Z){x(Z)}}function A(N){try{P(f.throw(N))}catch(Z){x(Z)}}function P(N){N.done?y(N.value):g(N.value).then(O,A)}P((f=f.apply(a,i||[])).next())})}function Td(a,i){var s={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},f,g,y,x;return x={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function O(P){return function(N){return A([P,N])}}function A(P){if(f)throw new TypeError("Generator is already executing.");for(;s;)try{if(f=1,g&&(y=P[0]&2?g.return:P[0]?g.throw||((y=g.return)&&y.call(g),0):g.next)&&!(y=y.call(g,P[1])).done)return y;switch(g=0,y&&(P=[P[0]&2,y.value]),P[0]){case 0:case 1:y=P;break;case 4:return s.label++,{value:P[1],done:!1};case 5:s.label++,g=P[1],P=[0];continue;case 7:P=s.ops.pop(),s.trys.pop();continue;default:if(y=s.trys,!(y=y.length>0&&y[y.length-1])&&(P[0]===6||P[0]===2)){s=0;continue}if(P[0]===3&&(!y||P[1]>y[0]&&P[1]<y[3])){s.label=P[1];break}if(P[0]===6&&s.label<y[1]){s.label=y[1],y=P;break}if(y&&s.label<y[2]){s.label=y[2],s.ops.push(P);break}y[2]&&s.ops.pop(),s.trys.pop();continue}P=i.call(a,s)}catch(N){P=[6,N],g=0}finally{f=y=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}}function Cd(a,i){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var f=s.call(a),g,y=[],x;try{for(;(i===void 0||i-- >0)&&!(g=f.next()).done;)y.push(g.value)}catch(O){x={error:O}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(x)throw x.error}}return y}function Eu(a,i,s){if(s||arguments.length===2)for(var f=0,g=i.length,y;f<g;f++)(y||!(f in i))&&(y||(y=Array.prototype.slice.call(i,0,f)),y[f]=i[f]);return a.concat(y||Array.prototype.slice.call(i))}function B0(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Md={exports:{}},Ld={exports:{}},el={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=s;function s(f){return f&&typeof f.length=="number"&&f.length>=0&&f.length%1===0}a.exports=i.default})(el,el.exports);var vo={},j0={exports:{}},z0={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s){return function(){for(var f=[],g=arguments.length;g--;)f[g]=arguments[g];var y=f.pop();return s.call(this,f,y)}},a.exports=i.default})(z0,z0.exports);var ls={};Object.defineProperty(ls,"__esModule",{value:!0}),ls.fallback=hw,ls.wrap=U0;var U1=ls.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,dw=ls.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,Xr=ls.hasNextTick=typeof Ad=="object"&&typeof Ad.nextTick=="function";function hw(a){setTimeout(a,0)}function U0(a){return function(i){for(var s=[],f=arguments.length-1;f-- >0;)s[f]=arguments[f+1];return a(function(){return i.apply(void 0,s)})}}var us;U1?us=queueMicrotask:dw?us=setImmediate:Xr?us=Ad.nextTick:us=hw,ls.default=U0(us),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=A;var s=z0.exports,f=O(s),g=ls,y=O(g),x=vo;function O(Z){return Z&&Z.__esModule?Z:{default:Z}}function A(Z){return(0,x.isAsync)(Z)?function(){for(var W=[],mt=arguments.length;mt--;)W[mt]=arguments[mt];var Nt=W.pop(),Jt=Z.apply(this,W);return P(Jt,Nt)}:(0,f.default)(function(W,mt){var Nt;try{Nt=Z.apply(this,W)}catch(Jt){return mt(Jt)}if(Nt&&typeof Nt.then=="function")return P(Nt,mt);mt(null,Nt)})}function P(Z,W){return Z.then(function(mt){N(W,null,mt)},function(mt){N(W,mt&&mt.message?mt:new Error(mt))})}function N(Z,W,mt){try{Z(W,mt)}catch(Nt){(0,y.default)(function(Jt){throw Jt},Nt)}}a.exports=i.default}(j0,j0.exports),Object.defineProperty(vo,"__esModule",{value:!0}),vo.isAsyncIterable=vo.isAsyncGenerator=vo.isAsync=void 0;var pw=j0.exports,gw=vw(pw);function vw(a){return a&&a.__esModule?a:{default:a}}function Z0(a){return a[Symbol.toStringTag]==="AsyncFunction"}function mw(a){return a[Symbol.toStringTag]==="AsyncGenerator"}function yw(a){return typeof a[Symbol.asyncIterator]=="function"}function Z1(a){if(typeof a!="function")throw new Error("expected a function");return Z0(a)?(0,gw.default)(a):a}vo.default=Z1,vo.isAsync=Z0,vo.isAsyncGenerator=mw,vo.isAsyncIterable=yw;var Js={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=s;function s(f,g){if(g===void 0&&(g=f.length),!g)throw new Error("arity is undefined");function y(){for(var x=this,O=[],A=arguments.length;A--;)O[A]=arguments[A];return typeof O[g-1]=="function"?f.apply(this,O):new Promise(function(P,N){O[g-1]=function(Z){for(var W=[],mt=arguments.length-1;mt-- >0;)W[mt]=arguments[mt+1];if(Z)return N(Z);P(W.length>1?W:W[0])},f.apply(x,O)})}return y}a.exports=i.default})(Js,Js.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var s=el.exports,f=A(s),g=vo,y=A(g),x=Js.exports,O=A(x);function A(P){return P&&P.__esModule?P:{default:P}}i.default=(0,O.default)(function(P,N,Z){var W=(0,f.default)(N)?[]:{};P(N,function(mt,Nt,Jt){(0,y.default)(mt)(function(ye){for(var Ne,ze=[],He=arguments.length-1;He-- >0;)ze[He]=arguments[He+1];ze.length<2&&(Ne=ze,ze=Ne[0]),W[Nt]=ze,Jt(ye)})},function(mt){return Z(mt,W)})},3),a.exports=i.default}(Ld,Ld.exports);var Pd={exports:{}},nl={exports:{}},Ga={exports:{}},fs={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=s;function s(f){function g(){for(var y=[],x=arguments.length;x--;)y[x]=arguments[x];if(f!==null){var O=f;f=null,O.apply(this,y)}}return Object.assign(g,f),g}a.exports=i.default})(fs,fs.exports);var ds={exports:{}},wu={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s){return s[Symbol.iterator]&&s[Symbol.iterator]()},a.exports=i.default})(wu,wu.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=N;var s=el.exports,f=x(s),g=wu.exports,y=x(g);function x(Z){return Z&&Z.__esModule?Z:{default:Z}}function O(Z){var W=-1,mt=Z.length;return function(){return++W<mt?{value:Z[W],key:W}:null}}function A(Z){var W=-1;return function(){var Nt=Z.next();return Nt.done?null:(W++,{value:Nt.value,key:W})}}function P(Z){var W=Z?Object.keys(Z):[],mt=-1,Nt=W.length;return function Jt(){var ye=W[++mt];return ye==="__proto__"?Jt():mt<Nt?{value:Z[ye],key:ye}:null}}function N(Z){if((0,f.default)(Z))return O(Z);var W=(0,y.default)(Z);return W?A(W):P(Z)}a.exports=i.default}(ds,ds.exports);var Au={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=s;function s(f){return function(){for(var g=[],y=arguments.length;y--;)g[y]=arguments[y];if(f===null)throw new Error("Callback was already called.");var x=f;f=null,x.apply(this,g)}}a.exports=i.default})(Au,Au.exports);var H0={exports:{}},tc={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var s={};i.default=s,a.exports=i.default})(tc,tc.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=y;var s=tc.exports,f=g(s);function g(x){return x&&x.__esModule?x:{default:x}}function y(x,O,A,P){var N=!1,Z=!1,W=!1,mt=0,Nt=0;function Jt(){mt>=O||W||N||(W=!0,x.next().then(function(ze){var He=ze.value,nn=ze.done;if(!(Z||N)){if(W=!1,nn){N=!0,mt<=0&&P(null);return}mt++,A(He,Nt,ye),Nt++,Jt()}}).catch(Ne))}function ye(ze,He){if(mt-=1,!Z){if(ze)return Ne(ze);if(ze===!1){N=!0,Z=!0;return}if(He===f.default||N&&mt<=0)return N=!0,P(null);Jt()}}function Ne(ze){Z||(W=!1,N=!0,P(ze))}Jt()}a.exports=i.default}(H0,H0.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var s=fs.exports,f=mt(s),g=ds.exports,y=mt(g),x=Au.exports,O=mt(x),A=vo,P=H0.exports,N=mt(P),Z=tc.exports,W=mt(Z);function mt(Nt){return Nt&&Nt.__esModule?Nt:{default:Nt}}i.default=function(Nt){return function(Jt,ye,Ne){if(Ne=(0,f.default)(Ne),Nt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!Jt)return Ne(null);if((0,A.isAsyncGenerator)(Jt))return(0,N.default)(Jt,Nt,ye,Ne);if((0,A.isAsyncIterable)(Jt))return(0,N.default)(Jt[Symbol.asyncIterator](),Nt,ye,Ne);var ze=(0,y.default)(Jt),He=!1,nn=!1,pn=0,In=!1;function En(rr,Tr){if(!nn)if(pn-=1,rr)He=!0,Ne(rr);else if(rr===!1)He=!0,nn=!0;else{if(Tr===W.default||He&&pn<=0)return He=!0,Ne(null);In||Rn()}}function Rn(){for(In=!0;pn<Nt&&!He;){var rr=ze();if(rr===null){He=!0,pn<=0&&Ne(null);return}pn+=1,ye(rr.value,rr.key,(0,O.default)(En))}In=!1}Rn()}},a.exports=i.default}(Ga,Ga.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var s=Ga.exports,f=A(s),g=vo,y=A(g),x=Js.exports,O=A(x);function A(N){return N&&N.__esModule?N:{default:N}}function P(N,Z,W,mt){return(0,f.default)(Z)(N,(0,y.default)(W),mt)}i.default=(0,O.default)(P,4),a.exports=i.default}(nl,nl.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var s=nl.exports,f=x(s),g=Js.exports,y=x(g);function x(A){return A&&A.__esModule?A:{default:A}}function O(A,P,N){return(0,f.default)(A,1,P,N)}i.default=(0,y.default)(O,3),a.exports=i.default}(Pd,Pd.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=O;var s=Ld.exports,f=x(s),g=Pd.exports,y=x(g);function x(A){return A&&A.__esModule?A:{default:A}}function O(A,P){return(0,f.default)(y.default,A,P)}a.exports=i.default}(Md,Md.exports);var Id=B0(Md.exports),ra=function(){function a(){this.args=[],this.tasks=[]}return a.prototype.call=function(){for(var i=arguments,s=[],f=0;f<arguments.length;f++)s[f]=i[f];return this.args=s,Id(this.tasks)},a.prototype.tap=function(i,s){var f=this;this.tasks.push(function(g){s.apply(void 0,Eu([],Cd(f.args),!1)),g(null,i)})},a}(),hs={exports:{}},V0={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var s=el.exports,f=ye(s),g=tc.exports,y=ye(g),x=nl.exports,O=ye(x),A=fs.exports,P=ye(A),N=Au.exports,Z=ye(N),W=vo,mt=ye(W),Nt=Js.exports,Jt=ye(Nt);function ye(nn){return nn&&nn.__esModule?nn:{default:nn}}function Ne(nn,pn,In){In=(0,P.default)(In);var En=0,Rn=0,rr=nn.length,Tr=!1;rr===0&&In(null);function $n(cr,Lr){cr===!1&&(Tr=!0),Tr!==!0&&(cr?In(cr):(++Rn===rr||Lr===y.default)&&In(null))}for(;En<rr;En++)pn(nn[En],En,(0,Z.default)($n))}function ze(nn,pn,In){return(0,O.default)(nn,1/0,pn,In)}function He(nn,pn,In){var En=(0,f.default)(nn)?Ne:ze;return En(nn,(0,mt.default)(pn),In)}i.default=(0,Jt.default)(He,3),a.exports=i.default})(V0,V0.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=O;var s=V0.exports,f=x(s),g=Ld.exports,y=x(g);function x(A){return A&&A.__esModule?A:{default:A}}function O(A,P){return(0,y.default)(f.default,A,P)}a.exports=i.default}(hs,hs.exports);var Tu=B0(hs.exports),UP=function(){function a(){this.tasks=[]}return a.prototype.promise=function(){return Tu(this.tasks)},a.prototype.tapPromise=function(i,s){var f=this;this.tasks.push(function(g){return N0(f,void 0,void 0,function(){return Td(this,function(y){switch(y.label){case 0:return[4,s()];case 1:return y.sent(),g(null,i),[2]}})})})},a}(),rl={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var s=fs.exports,f=N(s),g=Au.exports,y=N(g),x=vo,O=N(x),A=Js.exports,P=N(A);function N(W){return W&&W.__esModule?W:{default:W}}function Z(W,mt){if(mt=(0,f.default)(mt),!Array.isArray(W))return mt(new Error("First argument to waterfall must be an array of functions"));if(!W.length)return mt();var Nt=0;function Jt(Ne){var ze=(0,O.default)(W[Nt++]);ze.apply(void 0,Ne.concat([(0,y.default)(ye)]))}function ye(Ne){for(var ze=[],He=arguments.length-1;He-- >0;)ze[He]=arguments[He+1];if(Ne!==!1){if(Ne||Nt===W.length)return mt.apply(void 0,[Ne].concat(ze));Jt(ze)}}Jt([])}i.default=(0,P.default)(Z),a.exports=i.default})(rl,rl.exports);var H1=B0(rl.exports),W0=function(){function a(){this.tasks=[]}return a.prototype.call=function(){return H1(this.tasks)},a.prototype.tap=function(i,s){this.tasks.length===0?this.tasks.push(function(f){var g=s();f(g?null:!1,g)}):this.tasks.push(function(f,g){var y=s.apply(void 0,Eu([],Cd(f),!1));g(y?null:!1,i)})},a}(),G0=function(){function a(){this.tasks=[]}return a.prototype.call=function(){return Id(this.tasks)},a.prototype.tap=function(i,s){this.tasks.push(function(f){var g=s();f(g,i)})},a}(),bw=function(){function a(){this.args=[],this.tasks=[]}return a.prototype.promise=function(){for(var i=arguments,s=[],f=0;f<arguments.length;f++)s[f]=i[f];return this.args=s,Id(this.tasks)},a.prototype.tapPromise=function(i,s){var f=this;this.tasks.push(function(g){return N0(f,void 0,void 0,function(){return Td(this,function(y){switch(y.label){case 0:return[4,s.apply(void 0,Eu([],Cd(this.args),!1))];case 1:return y.sent(),g(null,i),[2]}})})})},a}(),_w=function(){function a(){this.args=[],this.tasks=[]}return a.prototype.promise=function(){for(var i=arguments,s=[],f=0;f<arguments.length;f++)s[f]=i[f];return this.args=s,Id(this.tasks)},a.prototype.tapPromise=function(i,s){var f=this;this.tasks.push(function(g){return N0(f,void 0,void 0,function(){var y;return Td(this,function(x){switch(x.label){case 0:return[4,s.apply(void 0,Eu([],Cd(this.args),!1))];case 1:return y=x.sent(),g(y,i),[2]}})})})},a}(),xw=function(){function a(){this.tasks=[]}return a.prototype.promise=function(){return H1(this.tasks)},a.prototype.tapPromise=function(i,s){this.tasks.length===0?this.tasks.push(function(f){s().then(function(g){f(null,g)})}):this.tasks.push(function(f,g){s(f).then(function(y){g(null,y)})})},a}(),V1=k(63844),Rd=k.n(V1);class eo extends to.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(i){super(),(0,ct.Z)(this,"destroyed",!1),(0,ct.Z)(this,"loaded",!1),(0,ct.Z)(this,"id",void 0),(0,ct.Z)(this,"inited",!1),(0,ct.Z)(this,"rendering",!1),(0,ct.Z)(this,"$container",void 0),(0,ct.Z)(this,"canvas",void 0),(0,ct.Z)(this,"markerContainer",void 0),(0,ct.Z)(this,"resizeDetector",void 0),(0,ct.Z)(this,"hooks",void 0),(0,ct.Z)(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),(0,ct.Z)(this,"handleMapCameraChanged",s=>{this.cameraService.update(s),this.render()}),this.container=i,this.hooks={init:new bw},this.id=i.id}init(i){var s=this;this.configService.setSceneConfig(this.id,i),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,ln.Z)(function*(){s.debugService.log("map.mapInitStart",{type:s.map.version}),yield new Promise(f=>{s.map.onCameraChanged(g=>{s.cameraService.init(),s.cameraService.update(g),f()}),s.map.init()}),s.map.onCameraChanged(s.handleMapCameraChanged),s.map.addMarkerContainer(),s.markerService.addMarkers(),s.markerService.addMarkerLayers(),s.popupService.initPopup(),s.interactionService.init(),s.interactionService.on(Gi.Drag,s.addSceneEvent.bind(s))})),this.hooks.init.tapPromise("initRenderer",(0,ln.Z)(function*(){var f;const g=((f=s.map)===null||f===void 0?void 0:f.getOverlayContainer())||void 0;if(g?s.$container=g:s.$container=rw(s.configService.getSceneConfig(s.id).id||""),s.$container){const{canvas:x}=i;if(s.canvas=x||Bi("canvas","",s.$container),s.setCanvas(),yield s.rendererService.init(s.canvas,s.configService.getSceneConfig(s.id),i.gl),s.registerContextLost(),s.initContainer(),s.resizeDetector=Rd()({strategy:"scroll"}),s.resizeDetector.listenTo(s.$container,s.handleWindowResized),window.matchMedia){var y;(y=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||y===void 0||y.addListener(s.handleWindowResized.bind("screen"))}}else console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");s.pickingService.init(s.id)})),this.render()}registerContextLost(){const i=this.rendererService.getCanvas();i&&i.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(i){this.layerService.sceneService=this,this.layerService.add(i)}addMask(i){this.layerService.sceneService=this,this.layerService.addMask(i)}render(){var i=this;return(0,ln.Z)(function*(){i.rendering||i.destroyed||(i.rendering=!0,i.inited?(yield i.layerService.initLayers(),yield i.layerService.renderLayers()):(yield i.hooks.init.promise(),i.destroyed&&i.destroy(),yield i.layerService.initLayers(),i.layerService.renderLayers(),i.controlService.addControls(),i.loaded=!0,i.emit("loaded"),i.inited=!0),i.rendering=!1)})()}addFontFace(i,s){this.fontService.addFontFace(i,s)}getSceneContainer(){return this.$container}exportPng(i){var s=this;return(0,ln.Z)(function*(){var f;const g=(f=s.$container)===null||f===void 0?void 0:f.getElementsByTagName("canvas")[0];return yield s.render(),i==="jpg"?g==null?void 0:g.toDataURL("image/jpeg"):g==null?void 0:g.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const i=this.$container.parentElement;i!==null&&(this.markerContainer=Bi("div","l7-marker-container",i))}getMarkerContainer(){return this.markerContainer}destroy(){var i;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var s;(s=this.$container)===null||s===void 0||s.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(i=this.$container)===null||i===void 0||(i=i.parentNode)===null||i===void 0||i.removeChild(this.$container),this.emit("destroy")}initContainer(){var i,s;const f=Vi,g=((i=this.$container)===null||i===void 0?void 0:i.clientWidth)||400,y=((s=this.$container)===null||s===void 0?void 0:s.clientHeight)||300,x=this.canvas;x&&(x.width=g*f,x.height=y*f),this.rendererService.viewport({x:0,y:0,width:f*g,height:f*y})}setCanvas(){var i,s;const f=Vi,g=((i=this.$container)===null||i===void 0?void 0:i.clientWidth)||400,y=((s=this.$container)===null||s===void 0?void 0:s.clientHeight)||300,x=this.canvas;x.width=g*f,x.height=y*f,x.style.width="100%",x.style.height="100%"}addSceneEvent(i){this.emit(i.type,i)}}const{uniq:Sw}=ii,kd="#define PI 3.14159265359",Ow=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,W1=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,$0=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,$a=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,G1=`layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,$1=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,Ew=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Y1=`#define TILE_SIZE (512.0)
#define PI (3.1415926536)
#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))
#define EARTH_CIRCUMFERENCE (40.03e6)

#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)
#define COORDINATE_SYSTEM_IDENTITY (4.0)
#define COORDINATE_SYSTEM_METER_OFFSET (5.0)

#pragma include "scene_uniforms"

const vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}

// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1.0, 1.0);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}

vec4 project_position(vec4 position, vec2 position64xyLow) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(
      vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)
    );
  }
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01
  ) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  return position;
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_XY_LOW);
}

vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;
  }

  return pixel * 2.0 * u_FocalDistance;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;
  }

  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
    return meter;
  } else {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;

}

float project_pixel(float pixel) {
  return pixel * u_FocalDistance;
}

vec2 project_pixel(vec2 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec3 project_pixel(vec3 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}

bool isEqual(float a, float b) {
  return a < b + 0.001 && a > b - 0.001;
}

`,ww=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,X1=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};
`,Aw=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Y0=/precision\s+(high|low|medium)p\s+float/,Cu=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,q1=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,K1=/void\s+main\s*\([^)]*\)\s*\{\n?/;class Tw{constructor(){(0,ct.Z)(this,"moduleCache",{}),(0,ct.Z)(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:kd,fs:kd}),this.registerModule("decode",{vs:W1,fs:""}),this.registerModule("scene_uniforms",{vs:X1,fs:X1}),this.registerModule("picking_uniforms",{vs:$1,fs:$1}),this.registerModule("projection",{vs:Y1,fs:Y1}),this.registerModule("project",{vs:Ew,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Aw}),this.registerModule("lighting",{vs:$0,fs:""}),this.registerModule("light",{vs:Ow,fs:""}),this.registerModule("picking",{vs:G1,fs:$a}),this.registerModule("rotation_2d",{vs:ww,fs:""})}registerModule(i,s){s.vs=s.vs.replace(/\r\n/g,`
`),s.fs=s.fs.replace(/\r\n/g,`
`);const{vs:f,fs:g,uniforms:y,defines:x,inject:O}=s,{content:A,uniforms:P}=vd(f),{content:N,uniforms:Z}=vd(g);this.rawContentCache[i]={fs:N,defines:x,inject:O,uniforms:(0,on.Z)((0,on.Z)((0,on.Z)({},P),Z),y),vs:A}}getModule(i){let s=this.rawContentCache[i].vs,f=this.rawContentCache[i].fs;const{defines:g={},inject:y={}}=this.rawContentCache[i];let x={};y["vs:#decl"]&&(s=y["vs:#decl"]+s,x=vd(y["vs:#decl"]).uniforms),y["vs:#main-start"]&&(s=s.replace(K1,Jt=>Jt+y["vs:#main-start"])),y["fs:#decl"]&&(f=y["fs:#decl"]+f),s=Sa(g)+s;const{content:A,includeList:P}=this.processModule(s,[],"vs"),{content:N,includeList:Z}=this.processModule(f,[],"fs"),W=Sw(P.concat(Z).concat(i)).reduce((Jt,ye)=>(0,on.Z)((0,on.Z)({},Jt),this.rawContentCache[ye].uniforms),(0,on.Z)({},x)),mt=(Y0.test(N)?"":Cu)+A,Nt=(Y0.test(N)?"":Cu)+N;return this.moduleCache[i]={vs:mt.trim(),fs:Nt.trim(),uniforms:W},this.moduleCache[i]}destroy(){this.moduleCache={},this.rawContentCache={}}processModule(i,s,f){return{content:i.replace(q1,(y,x)=>{const A=x.split(" ")[0].replace(/"/g,"");if(s.indexOf(A)>-1)return"";const P=this.rawContentCache[A][f];s.push(A);const{content:N}=this.processModule(P,s,f);return N}),includeList:s}}}function Sa(a){return Object.keys(a).reduce((s,f)=>s+`#define ${f.toUpperCase()} ${a[f]}
`,`
`)}class X0{constructor(){(0,ct.Z)(this,"shaderModuleService",void 0),(0,ct.Z)(this,"rendererService",void 0),(0,ct.Z)(this,"cameraService",void 0),(0,ct.Z)(this,"mapService",void 0),(0,ct.Z)(this,"interactionService",void 0),(0,ct.Z)(this,"layerService",void 0),(0,ct.Z)(this,"config",void 0)}getName(){return""}getType(){return ta.Normal}init(i,s){this.config=s,this.rendererService=i.getContainer().rendererService,this.cameraService=i.getContainer().cameraService,this.mapService=i.getContainer().mapService,this.interactionService=i.getContainer().interactionService,this.layerService=i.getContainer().layerService,this.shaderModuleService=i.getContainer().shaderModuleService}render(i){}}class Cw extends X0{getName(){return"clear"}init(i,s){super.init(i,s)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class Q1{constructor(i){(0,ct.Z)(this,"passes",[]),(0,ct.Z)(this,"layer",void 0),(0,ct.Z)(this,"renderFlag",void 0),(0,ct.Z)(this,"width",0),(0,ct.Z)(this,"height",0),this.postProcessor=i}setLayer(i){this.layer=i}setRenderFlag(i){this.renderFlag=i}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var i=this;return(0,ln.Z)(function*(){for(const s of i.passes)yield s.render(i.layer);yield i.postProcessor.render(i.layer)})()}resize(i,s){(this.width!==i||this.height!==s)&&(this.postProcessor.resize(i,s),this.width=i,this.height=s)}add(i,s){i.getType()===ta.PostProcessing?this.postProcessor.add(i,this.layer,s):(i.init(this.layer,s),this.passes.push(i))}insert(i,s,f){i.init(this.layer,s),this.passes.splice(f,0,i)}destroy(){this.passes.length=0}}class Mw extends X0{constructor(...i){var s;super(...i),s=this,(0,ct.Z)(this,"pickingFBO",void 0),(0,ct.Z)(this,"layer",void 0),(0,ct.Z)(this,"width",0),(0,ct.Z)(this,"height",0),(0,ct.Z)(this,"alreadyInRendering",!1),(0,ct.Z)(this,"pickFromPickingFBO",({x:f,y:g,lngLat:y,type:x})=>{if(!this.layer.isVisible()||!this.layer.needPick(x))return;const{getViewportSize:O,readPixelsAsync:A,useFramebuffer:P}=this.rendererService,{width:N,height:Z}=O(),{enableHighlight:W,enableSelect:mt}=this.layer.getLayerConfig(),Nt=f*Vi,Jt=g*Vi;if(Nt>N||Nt<0||Jt>Z||Jt<0)return;let ye;P(this.pickingFBO,(0,ln.Z)(function*(){var Ne;if(ye=yield A({x:Math.round(Nt),y:Math.round(Z-(g+1)*Vi),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:s.pickingFBO}),ye[0]!==0||ye[1]!==0||ye[2]!==0){const ze=Gs(ye),He=s.layer.getSource().getFeatureById(ze),nn={x:f,y:g,type:x,lngLat:y,featureId:ze,feature:He};He&&(s.layer.setCurrentPickId(ze),s.triggerHoverOnLayer(nn))}else{const ze={x:f,y:g,lngLat:y,type:s.layer.getCurrentPickId()===null?"un"+x:"mouseout",featureId:null,feature:null};s.triggerHoverOnLayer((0,on.Z)((0,on.Z)({},ze),{},{type:"unpick"})),s.triggerHoverOnLayer(ze),s.layer.setCurrentPickId(null)}W&&s.highlightPickedFeature(ye),mt&&x==="click"&&((Ne=ye)===null||Ne===void 0?void 0:Ne.toString())!==[0,0,0,0].toString()&&s.selectFeature(ye)}))})}getType(){return ta.Normal}getName(){return"pixelPicking"}init(i,s){super.init(i,s),this.layer=i;const{createTexture2D:f,createFramebuffer:g,getViewportSize:y}=this.rendererService,{width:x,height:O}=y(),A=f({width:x,height:O,wrapS:ot.CLAMP_TO_EDGE,wrapT:ot.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=g({color:A}),this.interactionService.on(Gi.Hover,this.pickFromPickingFBO),this.interactionService.on(Gi.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Gi.Active,this.highlightFeatureHandle.bind(this))}render(i){if(this.alreadyInRendering)return;const{getViewportSize:s,useFramebuffer:f,clear:g}=this.rendererService,{width:y,height:x}=s();this.alreadyInRendering=!0,(this.width!==y||this.height!==x)&&(this.pickingFBO.resize({width:y,height:x}),this.width=y,this.height=x),f(this.pickingFBO,()=>{g({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const O=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),i.hooks.beforePickingEncode.call(),i.render(),i.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(O),this.alreadyInRendering=!1})}triggerHoverOnLayer(i){this.layer.emit(i.type,i)}highlightPickedFeature(i){const[s,f,g]=i;this.layer.hooks.beforeHighlight.call([s,f,g]),this.layerService.renderLayers()}selectFeature(i){const[s,f,g]=i;this.layer.hooks.beforeSelect.call([s,f,g]),this.layerService.renderLayers()}selectFeatureHandle({featureId:i}){const s=$s(i);this.selectFeature(new Uint8Array(s))}highlightFeatureHandle({featureId:i}){const s=$s(i);this.highlightPickedFeature(new Uint8Array(s))}}class Dd{constructor(i){(0,ct.Z)(this,"passes",[]),(0,ct.Z)(this,"readFBO",void 0),(0,ct.Z)(this,"writeFBO",void 0),this.rendererService=i,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:i,createTexture2D:s}=this.rendererService,{width:f,height:g}=i();return s({x:0,y:0,width:f,height:g,copy:!0})}getReadFBOTex(){var i=this;const{useFramebuffer:s}=this.rendererService;return new Promise(f=>{s(this.readFBO,(0,ln.Z)(function*(){f(i.getCurrentFBOTex())}))})}renderBloomPass(i,s){var f=this;return(0,ln.Z)(function*(){const g=yield f.getReadFBOTex();let y=0;for(;y<4;)yield s.render(i,g),f.swap(),y++})()}render(i){var s=this;return(0,ln.Z)(function*(){for(let f=0;f<s.passes.length;f++){const g=s.passes[f];g.setRenderToScreen(s.isLastEnabledPass(f)),g.getName()==="bloom"?yield s.renderBloomPass(i,g):(yield g.render(i),f!==s.passes.length-1&&s.swap())}})()}resize(i,s){this.readFBO.resize({width:i,height:s}),this.writeFBO.resize({width:i,height:s})}add(i,s,f){i.init(s,f),this.passes.push(i)}insert(i,s,f,g){i.init(f,g),this.passes.splice(s,0,i)}getPostProcessingPassByName(i){return this.passes.find(s=>s.getName()===i)}init(){const{createFramebuffer:i,createTexture2D:s}=this.rendererService;this.readFBO=i({color:s({width:1,height:1,wrapS:ot.CLAMP_TO_EDGE,wrapT:ot.CLAMP_TO_EDGE,usage:Ou.RENDER_TARGET})}),this.writeFBO=i({color:s({width:1,height:1,wrapS:ot.CLAMP_TO_EDGE,wrapT:ot.CLAMP_TO_EDGE,usage:Ou.RENDER_TARGET})})}isLastEnabledPass(i){for(let s=i+1;s<this.passes.length;s++)if(this.passes[s].isEnabled())return!1;return!0}swap(){const i=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=i}}class J1 extends X0{getType(){return ta.Normal}getName(){return"render"}init(i,s){super.init(i,s)}render(i){const{useFramebuffer:s,clear:f}=this.rendererService,g=i.multiPassRenderer.getPostProcessor().getReadFBO();s(g,()=>{f({color:[0,0,0,0],depth:1,stencil:0,framebuffer:g}),i.multiPassRenderer.setRenderFlag(!1),i.models.forEach(y=>{y.draw({uniforms:i.layerModel.getUninforms()})}),i.multiPassRenderer.setRenderFlag(!0)})}}const tb=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,eb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:q0}=ii;class Lw extends ba{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:eb,fs:tb});const{vs:i,fs:s,uniforms:f}=this.shaderModuleService.getModule("blur-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:s,uniforms:(0,on.Z)((0,on.Z)({},f),{},{u_ViewportSize:[g,y]})}}convertOptionsToUniforms(i){const s={};return q0(i.bloomRadius)||(s.u_radius=i.bloomRadius),q0(i.bloomIntensity)||(s.u_intensity=i.bloomIntensity),q0(i.bloomBaseRadio)||(s.u_baseRadio=i.bloomBaseRadio),s}}const Pw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,nb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Iw}=ii;class Rw extends ba{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:nb,fs:Pw});const{vs:i,fs:s,uniforms:f}=this.shaderModuleService.getModule("blur-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:s,uniforms:(0,on.Z)((0,on.Z)({},f),{},{u_ViewportSize:[g,y]})}}convertOptionsToUniforms(i){const s={};return Iw(i.blurRadius)||(s.u_BlurDir=[i.blurRadius,0]),s}}const kw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Dw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Fw}=ii;class Nw extends ba{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Dw,fs:kw});const{vs:i,fs:s,uniforms:f}=this.shaderModuleService.getModule("blur-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:s,uniforms:(0,on.Z)((0,on.Z)({},f),{},{u_ViewportSize:[g,y]})}}convertOptionsToUniforms(i){const s={};return Fw(i.blurRadius)||(s.u_BlurDir=[0,i.blurRadius]),s}}const Bw=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,jw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class zw extends ba{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:jw,fs:Bw});const{vs:i,fs:s,uniforms:f}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:s,uniforms:(0,on.Z)((0,on.Z)({},f),{},{u_ViewportSize:[g,y]})}}}const Uw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,rb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class ps extends ba{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:rb,fs:Uw}),this.shaderModuleService.getModule("copy-pass")}}const ib=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Zw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Hw extends ba{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Zw,fs:ib});const{vs:i,fs:s,uniforms:f}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:s,uniforms:(0,on.Z)((0,on.Z)({},f),{},{u_ViewportSize:[g,y]})}}}const Vw=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,ob=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Fd extends ba{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:ob,fs:Vw});const{vs:i,fs:s,uniforms:f}=this.shaderModuleService.getModule("ink-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:s,uniforms:(0,on.Z)((0,on.Z)({},f),{},{u_ViewportSize:[g,y]})}}}const ZP=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,HP=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class VP extends ba{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:HP,fs:ZP}),this.shaderModuleService.getModule("noise-pass")}}const WP=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,GP=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class $P extends ba{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:WP,fs:GP}),this.shaderModuleService.getModule("sepia-pass")}}const Ww=new N1;let Nd=0;function Gw(){const a=new Tw,i=new jP,s=new Yi,f=new tw(s),g=new k1,y=new YE,x=new bu,O=new _u,A=new Od,P={id:`${Nd++}`,globalConfigService:Ww,shaderModuleService:a,debugService:i,cameraService:s,coordinateSystemService:f,fontService:g,iconService:y,markerService:x,popupService:O,controlService:A,customRenderService:{}},N=new sw(P);P.layerService=N;const Z=new eo(P);P.sceneService=Z;const W=new zP(P);P.interactionService=W;const mt=new ow(P);P.pickingService=mt;const Nt={clear:new Cw,pixelPicking:new Mw,render:new J1};P.normalPassFactory=ye=>Nt[ye];const Jt={copy:new ps,bloom:new Lw,blurH:new Rw,blurV:new Nw,noise:new VP,sepia:new $P,colorHalftone:new zw,hexagonalPixelate:new Hw,ink:new Fd};return P.postProcessingPass=Jt,P.postProcessingPassFactory=ye=>Jt[ye],P}function ec(a){const i=(0,on.Z)({},a);return i.postProcessor=new Dd(i.rendererService),i.multiPassRenderer=new Q1(i.postProcessor),i.styleAttributeService=new fw(i.rendererService),i}const Bd=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let zi=function(a){return a.IMAGE="image",a.CUSTOMIMAGE="customImage",a.ARRAYBUFFER="arraybuffer",a.RGB="rgb",a.TERRAINRGB="terrainRGB",a.CUSTOMRGB="customRGB",a.CUSTOMARRAYBUFFER="customArrayBuffer",a.CUSTOMTERRAINRGB="customTerrainRGB",a}({});var K0=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),ab=(a,i,s,f)=>K0(void 0,null,function*(){return new Promise((g,y)=>{i({x:a.x,y:a.y,z:a.z},(x,O)=>{if(x||O.length===0){y(x);return}O&&Jo([{data:O,bands:[0]}],s,f,(A,P)=>{A?y(A):P&&g(P)})})})}),Oa=(a,i)=>K0(void 0,null,function*(){return new Promise((s,f)=>{i({x:a.x,y:a.y,z:a.z},(g,y)=>{if(g||!y){f(g);return}y instanceof ArrayBuffer?Xt(y,(x,O)=>{x&&f(x),s(O)}):y instanceof HTMLImageElement?s(y):f(g)})})});function gs(a,i){return Array.isArray(a)?typeof a[0]=="string"?a.map(s=>Do(s,i)):a.map(s=>({url:Do(s.url,i),bands:s.bands||[0]})):Do(a,i)}function $w(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(i=>({url:i,bands:[0]})):a}function Q0(a,i){a.xhrCancel=()=>{i.map(s=>{s.abort()})}}var sb=Object.defineProperty,Yw=Object.defineProperties,Xw=Object.getOwnPropertyDescriptors,cb=Object.getOwnPropertySymbols,qw=Object.prototype.hasOwnProperty,Kw=Object.prototype.propertyIsEnumerable,lb=(a,i,s)=>i in a?sb(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,ub=(a,i)=>{for(var s in i||(i={}))qw.call(i,s)&&lb(a,s,i[s]);if(cb)for(var s of cb(i))Kw.call(i,s)&&lb(a,s,i[s]);return a},J0=(a,i)=>Yw(a,Xw(i)),fb=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),Qw=(a,i,s,f,g)=>fb(void 0,null,function*(){const y=$w(i.url);if(y.length>1){const{rasterFiles:x,xhrList:O,errList:A}=yield Jw(y,i);if(Q0(a,O),A.length>0){s(A,null);return}Jo(x,f,g,s)}else{const x=fo(i,(O,A)=>{if(O)s(O);else if(A){const P=[{data:A,bands:y[0].bands}];Jo(P,f,g,s)}});Q0(a,[x])}});function Jw(a,i){return fb(this,null,function*(){const s=[],f=[],g=[];for(let y=0;y<a.length;y++){const x=a[y],O=J0(ub({},i),{url:x.url}),A=x.bands,{err:P,data:N,xhr:Z}=yield Ci(J0(ub({},O),{type:"arrayBuffer"}));P&&g.push(P),f.push(Z),s.push({data:N,bands:A})}return{rasterFiles:s,xhrList:f,errList:g}})}var tA=Object.defineProperty,db=Object.defineProperties,eA=Object.getOwnPropertyDescriptors,hb=Object.getOwnPropertySymbols,nA=Object.prototype.hasOwnProperty,rA=Object.prototype.propertyIsEnumerable,pb=(a,i,s)=>i in a?tA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,jd=(a,i)=>{for(var s in i||(i={}))nA.call(i,s)&&pb(a,s,i[s]);if(hb)for(var s of hb(i))rA.call(i,s)&&pb(a,s,i[s]);return a},gb=(a,i)=>db(a,eA(i)),vb=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),iA=(a,i,s,f)=>vb(void 0,null,function*(){const{format:g=mb,operation:y,requestParameters:x={}}=f,O=gb(jd({},x),{url:gs(a,i)});return new Promise((A,P)=>{Qw(s,O,(N,Z)=>{N?P(N):Z&&A(Z)},g,y)})}),_r=(a,i,s,f)=>vb(void 0,null,function*(){let g;const y=Array.isArray(a)?a[0]:a;return f.wmtsOptions?g=((f==null?void 0:f.getURLFromTemplate)||r0)(y,jd(jd({},i),f.wmtsOptions)):g=((f==null?void 0:f.getURLFromTemplate)||Do)(y,i),new Promise((x,O)=>{var A;const P=ht(gb(jd({},f==null?void 0:f.requestParameters),{url:g,type:((A=f==null?void 0:f.requestParameters)==null?void 0:A.type)||"arrayBuffer"}),(N,Z)=>{N?O(N):Z&&x(Z)},f.transformResponse);s.xhrCancel=()=>P.cancel()})}),mb=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),oA=Object.defineProperty,yb=Object.defineProperties,bb=Object.getOwnPropertyDescriptors,_b=Object.getOwnPropertySymbols,aA=Object.prototype.hasOwnProperty,YP=Object.prototype.propertyIsEnumerable,xb=(a,i,s)=>i in a?oA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,ia=(a,i)=>{for(var s in i||(i={}))aA.call(i,s)&&xb(a,s,i[s]);if(_b)for(var s of _b(i))YP.call(i,s)&&xb(a,s,i[s]);return a},Mu=(a,i)=>yb(a,bb(i)),Sb={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},XP=[zi.ARRAYBUFFER,zi.RGB];function Ob(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function sA(a,i={}){if(Ob(a))throw new Error("tile server url is error");const{extent:s=[1/0,1/0,-1/0,-1/0],coordinates:f}=i;let g=(i==null?void 0:i.dataType)||zi.IMAGE;g===zi.RGB&&(g=zi.ARRAYBUFFER);const y=(A,P)=>{switch(g){case zi.IMAGE:return _r(a,A,P,i);case zi.CUSTOMIMAGE:case zi.CUSTOMTERRAINRGB:return Oa(P,i==null?void 0:i.getCustomData);case zi.ARRAYBUFFER:return iA(a,A,P,i);case zi.CUSTOMARRAYBUFFER:case zi.CUSTOMRGB:return ab(P,i==null?void 0:i.getCustomData,(i==null?void 0:i.format)||mb,i==null?void 0:i.operation);default:return _r(a,A,P,i)}},x=Mu(ia(ia({},Sb),i),{getTileData:y}),O=xn(f,s);return{data:a,dataArray:[{_id:1,coordinates:O}],tilesetOptions:x,isTile:!0}}var cA=Object.defineProperty,lA=Object.defineProperties,qP=Object.getOwnPropertyDescriptors,Ei=Object.getOwnPropertySymbols,Eb=Object.prototype.hasOwnProperty,wb=Object.prototype.propertyIsEnumerable,tg=(a,i,s)=>i in a?cA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,Lu=(a,i)=>{for(var s in i||(i={}))Eb.call(i,s)&&tg(a,s,i[s]);if(Ei)for(var s of Ei(i))wb.call(i,s)&&tg(a,s,i[s]);return a},Ab=(a,i)=>lA(a,qP(i)),Tb=(a,i)=>{var s={};for(var f in a)Eb.call(a,f)&&i.indexOf(f)<0&&(s[f]=a[f]);if(a!=null&&Ei)for(var f of Ei(a))i.indexOf(f)<0&&wb.call(a,f)&&(s[f]=a[f]);return s};function uA(a,i){const s=i,{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:g,width:y,height:x}=s,O=Tb(s,["extent","coordinates","width","height"]);a.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[A,P]=O.bands||[0,1],N=[a[A],a[P]],Z=[];for(let Nt=0;Nt<N[0].length;Nt++)Z.push((N[1][Nt]-N[0][Nt])/(N[1][Nt]+N[0][Nt]));const W=xn(g,f);return{_id:1,dataArray:[Ab(Lu({_id:1,data:Z,width:y,height:x},O),{coordinates:W})]}}var fA=Object.defineProperty,dA=Object.defineProperties,hA=Object.getOwnPropertyDescriptors,zd=Object.getOwnPropertySymbols,Cb=Object.prototype.hasOwnProperty,Mb=Object.prototype.propertyIsEnumerable,Lb=(a,i,s)=>i in a?fA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,il=(a,i)=>{for(var s in i||(i={}))Cb.call(i,s)&&Lb(a,s,i[s]);if(zd)for(var s of zd(i))Mb.call(i,s)&&Lb(a,s,i[s]);return a},Pu=(a,i)=>dA(a,hA(i)),pA=(a,i)=>{var s={};for(var f in a)Cb.call(a,f)&&i.indexOf(f)<0&&(s[f]=a[f]);if(a!=null&&zd)for(var f of zd(a))i.indexOf(f)<0&&Mb.call(a,f)&&(s[f]=a[f]);return s};function Pb(a,i){const s=i,{extent:f,coordinates:g,width:y,height:x}=s,O=pA(s,["extent","coordinates","width","height"]);a.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[A,P,N]=O.bands||[0,1,2],Z=[a[A],a[P],a[N]],W=[],[mt,Nt]=(O==null?void 0:O.countCut)||[2,98],Jt=(O==null?void 0:O.RMinMax)||Qc(Z[0],mt,Nt),ye=(O==null?void 0:O.GMinMax)||Qc(Z[1],mt,Nt),Ne=(O==null?void 0:O.BMinMax)||Qc(Z[2],mt,Nt);for(let nn=0;nn<Z[0].length;nn++)W.push(Math.max(0,Z[0][nn]-Jt[0])),W.push(Math.max(0,Z[1][nn]-ye[0])),W.push(Math.max(0,Z[2][nn]-Ne[0]));const ze=xn(g,f);return{_id:1,dataArray:[Pu(il({_id:1,data:W,width:y,height:x,rMinMax:Jt,gMinMax:ye,bMinMax:Ne},O),{coordinates:ze})]}}var Iu=Object.defineProperty,gA=Object.defineProperties,KP=Object.getOwnPropertyDescriptors,Ru=Object.getOwnPropertySymbols,Ib=Object.prototype.hasOwnProperty,Rb=Object.prototype.propertyIsEnumerable,kb=(a,i,s)=>i in a?Iu(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,vA=(a,i)=>{for(var s in i||(i={}))Ib.call(i,s)&&kb(a,s,i[s]);if(Ru)for(var s of Ru(i))Rb.call(i,s)&&kb(a,s,i[s]);return a},mA=(a,i)=>gA(a,KP(i)),yA=(a,i)=>{var s={};for(var f in a)Ib.call(a,f)&&i.indexOf(f)<0&&(s[f]=a[f]);if(a!=null&&Ru)for(var f of Ru(a))i.indexOf(f)<0&&Rb.call(a,f)&&(s[f]=a[f]);return s};function bA(a,i){const s=i,{extent:f,coordinates:g,min:y,max:x,width:O,height:A,format:P,operation:N}=s,Z=yA(s,["extent","coordinates","min","max","width","height","format","operation"]);let W;if(P===void 0||$y(a))W=Array.from(a);else{const Jt=Array.isArray(a)?a:[a];W=x1(Jt,P,N)}const mt=xn(g,f);return{_id:1,dataArray:[mA(vA({_id:1,data:W,width:O,height:A},Z),{min:y,max:x,coordinates:mt})]}}var _A=Object.defineProperty,xA=Object.defineProperties,eg=Object.getOwnPropertyDescriptors,ku=Object.getOwnPropertySymbols,SA=Object.prototype.hasOwnProperty,OA=Object.prototype.propertyIsEnumerable,Du=(a,i,s)=>i in a?_A(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,Db=(a,i)=>{for(var s in i||(i={}))SA.call(i,s)&&Du(a,s,i[s]);if(ku)for(var s of ku(i))OA.call(i,s)&&Du(a,s,i[s]);return a},EA=(a,i)=>xA(a,eg(i)),wA=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),AA={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},TA=a=>wA(void 0,null,function*(){return new Promise(i=>{const[s,f,g,y]=a.bounds,x={layers:{testTile:{features:[{type:"Feature",properties:{key:a.x+"/"+a.y+"/"+a.z,x:(s+g)/2,y:(f+y)/2},geometry:{type:"LineString",coordinates:[[g,y],[g,f],[s,f],[s,f]]}}]}}};i(x)})});function CA(a,i){const s=g=>TA(g),f=EA(Db(Db({},AA),i),{getTileData:s});return{data:a,dataArray:[],tilesetOptions:f,isTile:!0}}var ng=k(69848),MA=k.n(ng),LA=Object.defineProperty,Fb=Object.getOwnPropertySymbols,vs=Object.prototype.hasOwnProperty,Nb=Object.prototype.propertyIsEnumerable,Ud=(a,i,s)=>i in a?LA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,rg=(a,i)=>{for(var s in i||(i={}))vs.call(i,s)&&Ud(a,s,i[s]);if(Fb)for(var s of Fb(i))Nb.call(i,s)&&Ud(a,s,i[s]);return a};function Bb(a,i){const{radius:s=40,maxZoom:f=18,minZoom:g=0,zoom:y=2}=i;if(a.pointIndex){const A=a.pointIndex.getClusters(a.extent,Math.floor(y));return a.dataArray=jb(A),a}const x=new(MA())({radius:s,minZoom:g,maxZoom:f}),O={type:"FeatureCollection",features:[]};return O.features=a.dataArray.map(A=>({type:"Feature",geometry:{type:"Point",coordinates:A.coordinates},properties:rg({},A)})),x.load(O.features),x}function jb(a){return a.map((i,s)=>rg({coordinates:i.geometry.coordinates,_id:s+1},i.properties))}function PA(a){if(a.length===0)throw new Error("max requires at least one data point");let i=a[0];for(let s=1;s<a.length;s++)a[s]>i&&(i=a[s]);return i}function Fu(a){if(a.length===0)throw new Error("min requires at least one data point");let i=a[0];for(let s=1;s<a.length;s++)a[s]<i&&(i=a[s]);return i}function ms(a){if(a.length===0)return 0;let i=a[0],s=0,f;for(let g=1;g<a.length;g++)f=i+a[g]*1,Math.abs(i)>=Math.abs(a[g])?s+=i-f+a[g]:s+=a[g]-f+i,i=f;return i+s*1}function IA(a){if(a.length===0)throw new Error("mean requires at least one data point");return ms(a)/a.length}var ig={min:Fu,max:PA,mean:IA,sum:ms},og=Object.defineProperty,ag=Object.getOwnPropertySymbols,si=Object.prototype.hasOwnProperty,Zd=Object.prototype.propertyIsEnumerable,ni=(a,i,s)=>i in a?og(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,no=(a,i)=>{for(var s in i||(i={}))si.call(i,s)&&ni(a,s,i[s]);if(ag)for(var s of ag(i))Zd.call(i,s)&&ni(a,s,i[s]);return a},nc=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),{cloneDeep:zb,isFunction:Hd,isString:Ub,mergeWith:Bn}=ii;function RA(a,i){if(Array.isArray(i))return i}var kA=class extends to.EventEmitter{constructor(a,i){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new ra},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=a,this.initCfg(i),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(a){return this.clusterIndex.getClusters(this.caculClusterExtent(2),a)}getClustersLeaves(a){return this.clusterIndex.getLeaves(a,1/0)}getParserType(){return this.parser.type}updateClusterData(a){const{method:i="sum",field:s}=this.clusterOptions;let f=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(a));this.clusterOptions.zoom=a,f.forEach(g=>{g.id||(g.properties.point_count=1)}),(s||Hd(i))&&(f=f.map(g=>{const y=g.id;if(y){const O=this.clusterIndex.getLeaves(y,1/0).map(P=>P.properties);let A;if(Ub(i)&&s){const P=o0(O,s);A=ig[i](P)}Hd(i)&&(A=i(O)),g.properties.stat=A}else g.properties.point_count=1;return g})),this.data=Kt("geojson")({type:"FeatureCollection",features:f}),this.executeTrans()}getFeatureById(a){const{type:i="geojson",geometry:s}=this.parser;if(i==="geojson"&&!this.cluster){const f=a<this.originData.features.length?this.originData.features[a]:"null",g=zb(f);if(g!=null&&g.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const y=this.data.dataArray.find(x=>x._id===a);g.properties=y}return g}else return i==="json"&&s?this.data.dataArray.find(f=>f._id===a):a<this.data.dataArray.length?this.data.dataArray[a]:"null"}updateFeaturePropertiesById(a,i){this.data.dataArray=this.data.dataArray.map(s=>s._id===a?no(no({},s),i):s),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(a,i){const s=this.data.dataArray.find(f=>f[a]===i);return s==null?void 0:s._id}setData(a,i){this.originData=a,this.dataArrayChanged=!1,this.initCfg(i),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var a;(a=this.tileset)==null||a.reloadAll()}reloadTilebyId(a,i,s){var f;(f=this.tileset)==null||f.reloadTileById(a,i,s)}reloadTileByLnglat(a,i,s){var f;(f=this.tileset)==null||f.reloadTileByLnglat(a,i,s)}getTileExtent(a,i){var s;return(s=this.tileset)==null?void 0:s.getTileExtent(a,i)}getTileByZXY(a,i,s){var f;return(f=this.tileset)==null?void 0:f.getTileByZXY(a,i,s)}reloadTileByExtent(a,i){var s;(s=this.tileset)==null||s.reloadTileByExtent(a,i)}destroy(){var a;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(a=this.tileset)==null||a.destroy()}processData(){return nc(this,null,function*(){return new Promise((a,i)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),a({})}catch(s){i(s)}})})}initCfg(a){this.cfg=Bn(this.cfg,a,RA);const i=this.cfg;i&&(i.parser&&(this.parser=i.parser),i.transforms&&(this.transforms=i.transforms),this.cluster=i.cluster||!1,i.clusterOptions&&(this.cluster=!0,this.clusterOptions=no(no({},this.clusterOptions),i.clusterOptions)))}init(){return nc(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const a=this.parser,i=a.type||"geojson",s=Kt(i);this.data=s(this.originData,a),this.tileset=this.initTileset(),!a.cancelExtent&&(this.extent=Up(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(a){this.center=[(a[0]+a[2])/2,(a[1]+a[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:a}=this.data;return a?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(a),this.tileset):new Gy(no({},a))):void 0}executeTrans(){this.transforms.forEach(i=>{const{type:s}=i,f=Qt(s)(this.data,i);Object.assign(this.data,f)})}initCluster(){if(!this.cluster)return;const a=this.clusterOptions||{};this.clusterIndex=Bb(this.data,a)}caculClusterExtent(a){let i=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(i=Xf(qf(this.extent),a)),i[0].concat(i[1])}};function Nu(a,i){const{callback:s}=i;return s&&(a.dataArray=a.dataArray.filter(s)),a}var Vd=6378e3;function Wd(a,i){const s=a.dataArray,{size:f=10}=i,g=f/(2*Math.PI*Vd)*(256<<20)/2,{gridHash:y,gridOffset:x}=rc(s,f),O=cg(y,x,i);return{yOffset:g,xOffset:g,radius:g,type:"grid",dataArray:O}}function rc(a,i){let s=1/0,f=-1/0,g;for(const A of a)g=A.coordinates[1],Number.isFinite(g)&&(s=g<s?g:s,f=g>f?g:f);const y=(s+f)/2,x=QP(i,y);if(x.xOffset<=0||x.yOffset<=0)return{gridHash:{},gridOffset:x};const O={};for(const A of a){const P=A.coordinates[1],N=A.coordinates[0];if(Number.isFinite(P)&&Number.isFinite(N)){const Z=Math.floor((P+90)/x.yOffset),W=Math.floor((N+180)/x.xOffset),mt=`${Z}-${W}`;O[mt]=O[mt]||{count:0,points:[]},O[mt].count+=1,O[mt].points.push(A)}}return{gridHash:O,gridOffset:x}}function QP(a,i){const s=sg(a),f=Zb(i,a);return{yOffset:s,xOffset:f}}function sg(a){return a/Vd*(180/Math.PI)}function Zb(a,i){return i/Vd*(180/Math.PI)/Math.cos(a*Math.PI/180)}function cg(a,i,s){return Object.keys(a).reduce((f,g,y)=>{const x=g.split("-"),O=parseInt(x[0],10),A=parseInt(x[1],10),P={};if(s.field&&s.method){const N=qs(a[g].points,s.field);P[s.method]=Jf[s.method](N)}return Object.assign(P,{_id:y,coordinates:Oo([-180+i.xOffset*(A+.5),-90+i.yOffset*(O+.5)]),rawData:a[g].points,count:a[g].count}),f.push(P),f},[])}var ys=Math.PI/3,DA=[0,ys,2*ys,3*ys,4*ys,5*ys];function JP(a){return a[0]}function Hb(a){return a[1]}function qr(){var a=0,i=0,s=1,f=1,g=JP,y=Hb,x,O,A;function P(Z){var W={},mt=[],Nt,Jt=Z.length;for(Nt=0;Nt<Jt;++Nt)if(!(isNaN(Ne=+g.call(null,ye=Z[Nt],Nt,Z))||isNaN(ze=+y.call(null,ye,Nt,Z)))){var ye,Ne,ze,He=Math.round(ze=ze/A),nn=Math.round(Ne=Ne/O-(He&1)/2),pn=ze-He;if(Math.abs(pn)*3>1){var In=Ne-nn,En=nn+(Ne<nn?-1:1)/2,Rn=He+(ze<He?-1:1),rr=Ne-En,Tr=ze-Rn;In*In+pn*pn>rr*rr+Tr*Tr&&(nn=En+(He&1?1:-1)/2,He=Rn)}var $n=nn+"-"+He,cr=W[$n];cr?cr.push(ye):(mt.push(cr=W[$n]=[ye]),cr.x=(nn+(He&1)/2)*O,cr.y=He*A)}return mt}function N(Z){var W=0,mt=0;return DA.map(function(Nt){var Jt=Math.sin(Nt)*Z,ye=-Math.cos(Nt)*Z,Ne=Jt-W,ze=ye-mt;return W=Jt,mt=ye,[Ne,ze]})}return P.hexagon=function(Z){return"m"+N(Z==null?x:+Z).join("l")+"z"},P.centers=function(){for(var Z=[],W=Math.round(i/A),mt=Math.round(a/O),Nt=W*A;Nt<f+x;Nt+=A,++W)for(var Jt=mt*O+(W&1)*O/2;Jt<s+O/2;Jt+=O)Z.push([Jt,Nt]);return Z},P.mesh=function(){var Z=N(x).slice(0,4).join("l");return P.centers().map(function(W){return"M"+W+"m"+Z}).join("")},P.x=function(Z){return arguments.length?(g=Z,P):g},P.y=function(Z){return arguments.length?(y=Z,P):y},P.radius=function(Z){return arguments.length?(x=+Z,O=x*2*Math.sin(ys),A=x*1.5,P):x},P.size=function(Z){return arguments.length?(a=i=0,s=+Z[0],f=+Z[1],P):[s-a,f-i]},P.extent=function(Z){return arguments.length?(a=+Z[0][0],i=+Z[0][1],s=+Z[1][0],f=+Z[1][1],P):[[a,i],[s,f]]},P.radius(1)}var Vb=Object.defineProperty,Bu=Object.defineProperties,lg=Object.getOwnPropertyDescriptors,Gd=Object.getOwnPropertySymbols,ic=Object.prototype.hasOwnProperty,FA=Object.prototype.propertyIsEnumerable,ug=(a,i,s)=>i in a?Vb(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,NA=(a,i)=>{for(var s in i||(i={}))ic.call(i,s)&&ug(a,s,i[s]);if(Gd)for(var s of Gd(i))FA.call(i,s)&&ug(a,s,i[s]);return a},$d=(a,i)=>Bu(a,lg(i)),jo=6378e3;function t6(a,i){const s=a.dataArray,{size:f=10,method:g="sum"}=i,y=f/(2*Math.PI*jo)*(256<<20)/2,x=s.map(N=>{const[Z,W]=Oo(N.coordinates);return $d(NA({},N),{coordinates:[Z,W]})});return{dataArray:qr().radius(y).x(N=>N.coordinates[0]).y(N=>N.coordinates[1])(x).map((N,Z)=>{if(i.field&&g){const W=qs(N,i.field);N[g]=Jf[g](W)}return{[i.method]:N[g],count:N.length,rawData:N,coordinates:[N.x,N.y],_id:Z}}),radius:y,xOffset:y,yOffset:y,type:"hexagon"}}var fg=Object.defineProperty,dg=Object.getOwnPropertySymbols,Wb=Object.prototype.hasOwnProperty,oc=Object.prototype.propertyIsEnumerable,ac=(a,i,s)=>i in a?fg(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,Yd=(a,i)=>{for(var s in i||(i={}))Wb.call(i,s)&&ac(a,s,i[s]);if(dg)for(var s of dg(i))oc.call(i,s)&&ac(a,s,i[s]);return a};function BA(a,i){const{sourceField:s,targetField:f,data:g}=i,y={};return g.forEach(x=>{y[x[s]]=x}),a.dataArray=a.dataArray.map(x=>{const O=x[f];return Yd(Yd({},x),y[O])}),a}function jA(a,i){const{callback:s}=i;return s&&(a.dataArray=a.dataArray.map(s)),a}var UD=k(4771),zA=Object.defineProperty,Gb=Object.defineProperties,ol=Object.getOwnPropertyDescriptors,$b=Object.getOwnPropertySymbols,Yb=Object.prototype.hasOwnProperty,Xb=Object.prototype.propertyIsEnumerable,al=(a,i,s)=>i in a?zA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,Xd=(a,i)=>{for(var s in i||(i={}))Yb.call(i,s)&&al(a,s,i[s]);if($b)for(var s of $b(i))Xb.call(i,s)&&al(a,s,i[s]);return a},qb=(a,i)=>Gb(a,ol(i));function Kb(a){let i=1/0,s=-1/0,f=1/0,g=-1/0;a.forEach(O=>{const A=O.coordinates;if(!A)return;const P=N=>{if(typeof N[0]=="number"&&typeof N[1]=="number"){const[Z,W]=N;i=Math.min(i,Z),s=Math.max(s,Z),f=Math.min(f,W),g=Math.max(g,W)}else Array.isArray(N[0])&&N.forEach(P)};P(A)});const y=(i+s)/2,x=(f+g)/2;return[y,x]}function Qb(a,i){const[s,f]=i;return a.map(g=>{if(!g.coordinates)return g;const y=x=>{if(typeof x[0]=="number"&&typeof x[1]=="number"){const O=Number((x[0]-s).toPrecision(15)),A=Number((x[1]-f).toPrecision(15));return[O,A,...x.slice(2)||[]]}else if(Array.isArray(x[0]))return x.map(y);return x};return qb(Xd({},g),{coordinates:y(g.coordinates)})})}function bs(a,i){const[s,f]=i;return a.map(g=>{if(!g.coordinates)return g;const y=x=>{if(typeof x[0]=="number"&&typeof x[1]=="number"){const O=x[0]+s,A=x[1]+f;return[O,A,...x.slice(2)||[]]}else if(Array.isArray(x[0]))return x.map(y);return x};return qb(Xd({},g),{coordinates:y(g.coordinates)})})}function UA(a,i={}){const{enableRelativeCoordinates:s=!1,relativeOrigin:f}=i;if(!s)return{dataArray:a,relativeOrigin:[0,0],originalExtent:[0,0,0,0]};let g=1/0,y=-1/0,x=1/0,O=-1/0;a.forEach(Z=>{const W=Z.coordinates;if(!W)return;const mt=Nt=>{if(typeof Nt[0]=="number"&&typeof Nt[1]=="number"){const[Jt,ye]=Nt;g=Math.min(g,Jt),y=Math.max(y,Jt),x=Math.min(x,ye),O=Math.max(O,ye)}else Array.isArray(Nt[0])&&Nt.forEach(mt)};mt(W)});const A=[g,x,y,O],P=f||Kb(a);return{dataArray:Qb(a,P),relativeOrigin:P,originalExtent:A}}et("rasterTile",sA),et("mvt",Va),et("geojsonvt",a1),et("testTile",CA),et("geojson",l0),et("jsonTile",fu),et("image",c1),et("csv",Cr),et("json",li),et("raster",pu),et("rasterRgb",bA),et("rgb",Pb),et("ndi",uA),Ut("cluster",Bb),Ut("filter",Nu),Ut("join",BA),Ut("map",jA),Ut("grid",Wd),Ut("hexagon",t6);var Jb=kA;class ZA extends null{getMarkerLayerContainerSize(){}constructor(i){super(),_defineProperty(this,"markerOption",void 0),_defineProperty(this,"popup",void 0),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"lngLat",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"added",!1),_defineProperty(this,"preLngLat",{lng:0,lat:0}),_defineProperty(this,"onMarkerDragStart",s=>{const f=this.mapsService.getContainer();if(!f)return;this.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});const{left:g,top:y}=f.getClientRects()[0],{x,y:O}=s;this.preLngLat=this.mapsService.containerToLngLat([x-g,O-y]),this.mapsService.on("mousemove",this.onMarkerDragMove),document.addEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragstart",this.lngLat)}),_defineProperty(this,"onMarkerDragMove",s=>{const f=s.lngLat||s.lnglat,{lng:g,lat:y}=this.preLngLat,{lng:x,lat:O}=f,A={lng:this.lngLat.lng+x-g,lat:this.lngLat.lat+O-y};this.setLnglat(A),this.preLngLat=f,this.emit("dragging",A)}),_defineProperty(this,"onMarkerDragEnd",()=>{this.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragend",this.lngLat)}),_defineProperty(this,"eventHandle",s=>{this.polyfillEvent(s),this.emit(s.type,{target:s,data:this.markerOption.extData,lngLat:this.lngLat})}),_defineProperty(this,"touchStartTime",void 0),this.markerOption=_objectSpread(_objectSpread({},this.getDefault()),i),bindAll(["update","onMove","onMapClick","updatePositionWhenZoom"],this),this.init()}getDefault(){return{element:void 0,anchor:anchorType.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1,overflowHide:!0}}addTo(i){this.scene=i,this.mapsService=i.mapService;const{element:s}=this.markerOption;return this.mapsService.getMarkerContainer().appendChild(s),this.registerMarkerEvent(s),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}remove(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();const{element:i}=this.markerOption;return i&&DOM.remove(i),this.popup&&this.popup.remove(),this}setLnglat(i){return this.lngLat=i,Array.isArray(i)&&(this.lngLat={lng:i[0],lat:i[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}getLnglat(){return this.lngLat}getElement(){return this.markerOption.element}setElement(i){if(!this.added)return this.once("added",()=>{this.setElement(i)}),this;const{element:s}=this.markerOption;return s&&DOM.remove(s),this.markerOption.element=i,this.init(),this.mapsService.getMarkerContainer().appendChild(i),this.registerMarkerEvent(i),this.updateDraggable(),this.update(),this}openPopup(){if(!this.added)return this.once("added",()=>{this.openPopup()}),this;const i=this.popup;return i?(i.isOpen()||i.addTo(this.scene),this):this}closePopup(){this.added||this.once("added",()=>{this.closePopup()});const i=this.popup;return i&&i.remove(),this}setPopup(i){return this.popup=i,this.lngLat&&this.popup.setLnglat(this.lngLat),this}togglePopup(){const i=this.popup;if(i)i.isOpen()?i.remove():i.addTo(this.scene);else return this;return this}getPopup(){return this.popup}getOffset(){return this.markerOption.offsets}setDraggable(i){this.markerOption.draggable=i,this.updateDraggable()}getDraggable(){return this.markerOption.draggable}getExtData(){return this.markerOption.extData}setExtData(i){this.markerOption.extData=i}update(){if(!this.mapsService)return;const{element:i,anchor:s}=this.markerOption;this.updatePosition(),DOM.setTransform(i,`${anchorTranslate[s]}`)}updatePositionWhenZoom(i){if(!this.mapsService)return;const{element:s,offsets:f}=this.markerOption,{lng:g,lat:y}=this.lngLat;if(s){s.style.display="block",s.style.whiteSpace="nowrap";const{containerHeight:x,containerWidth:O,bounds:A}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!A)return;const P=i.map,N=i.center,Z=i.zoom,W=P.DE(this.lngLat,Z,N);if(W.x=Math.round(W.x+f[0]),W.y=Math.round(W.y-f[1]),Math.abs(A[0][0])>180||Math.abs(A[1][0])>180){if(W.x>O){const mt=this.mapsService.lngLatToContainer([g-360,y]);W.x=mt.x}if(W.x<0){const mt=this.mapsService.lngLatToContainer([g+360,y]);W.x=mt.x}}(W.x>O||W.x<0||W.y>x||W.y<0)&&(s.style.display="none"),s.style.left=W.x+"px",s.style.top=W.y+"px",s.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}onMapClick(i){const{element:s}=this.markerOption;this.popup&&s&&this.togglePopup()}getCurrentContainerSize(){const i=this.mapsService.getContainer();return{containerHeight:(i==null?void 0:i.scrollHeight)||0,containerWidth:(i==null?void 0:i.scrollWidth)||0,bounds:this.mapsService.getBounds()}}updateDraggable(){const{element:i}=this.markerOption;i==null||i.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(i==null||i.addEventListener("mousedown",this.onMarkerDragStart))}updatePosition(){if(!this.mapsService)return;const{element:i,offsets:s}=this.markerOption,{lng:f,lat:g}=this.lngLat,y=this.mapsService.lngLatToContainer([f,g]);if(i){i.style.display="block",i.style.whiteSpace="nowrap";const{containerHeight:x,containerWidth:O,bounds:A}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!A)return;if(Math.abs(A[0][0])>180||Math.abs(A[1][0])>180){if(y.x>O){const P=this.mapsService.lngLatToContainer([f-360,g]);y.x=P.x}if(y.x<0){const P=this.mapsService.lngLatToContainer([f+360,g]);y.x=P.x}}this.markerOption.overflowHide&&(y.x>O||y.x<0||y.y>x||y.y<0)&&(i.style.display="none"),i.style.left=y.x+s[0]+"px",i.style.top=y.y-s[1]+"px"}}init(){let{element:i}=this.markerOption;const{color:s,anchor:f}=this.markerOption;if(!i){i=DOM.create("div"),this.markerOption.element=i;const g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","48px"),g.setAttributeNS(null,"width","48px"),g.setAttributeNS(null,"viewBox","0 0 1024 1024");const y=document.createElementNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),y.setAttributeNS(null,"fill",s),g.appendChild(y),i.appendChild(g)}DOM.addClass(i,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(g=>{var y,x;const O=((y=this.markerOption)===null||y===void 0?void 0:y.style)&&((x=this.markerOption)===null||x===void 0?void 0:x.style[g]);i&&(i.style[g]=O)}),applyAnchorClass(i,f,"marker")}registerMarkerEvent(i){i.addEventListener("click",this.onMapClick),i.addEventListener("mousemove",this.eventHandle),i.addEventListener("click",this.eventHandle),i.addEventListener("mousedown",this.eventHandle),i.addEventListener("mouseup",this.eventHandle),i.addEventListener("dblclick",this.eventHandle),i.addEventListener("contextmenu",this.eventHandle),i.addEventListener("mouseover",this.eventHandle),i.addEventListener("mouseout",this.eventHandle),i.addEventListener("touchstart",this.eventHandle),i.addEventListener("touchend",this.eventHandle)}unRegisterMarkerEvent(){const i=this.getElement();i.removeEventListener("click",this.onMapClick),i.removeEventListener("mousemove",this.eventHandle),i.removeEventListener("click",this.eventHandle),i.removeEventListener("mousedown",this.eventHandle),i.removeEventListener("mouseup",this.eventHandle),i.removeEventListener("dblclick",this.eventHandle),i.removeEventListener("contextmenu",this.eventHandle),i.removeEventListener("mouseover",this.eventHandle),i.removeEventListener("mouseout",this.eventHandle),i.removeEventListener("touchstart",this.eventHandle),i.removeEventListener("touchend",this.eventHandle)}polyfillEvent(i){!this.mapsService||this.mapsService.getType()!=="amap"||isPC()||(i.type==="touchstart"&&(this.touchStartTime=Date.now()),i.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:i,data:this.markerOption.extData,lngLat:this.lngLat}))}addDragHandler(i){return null}onUp(i){throw new Error("Method not implemented.")}}const{merge:hg}=ii;class e6 extends null{constructor(i){var s;super(),_defineProperty(this,"markers",[]),_defineProperty(this,"markerLayerOption",void 0),_defineProperty(this,"clusterIndex",void 0),_defineProperty(this,"points",[]),_defineProperty(this,"clusterMarkers",[]),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"zoom",void 0),_defineProperty(this,"bbox",void 0),_defineProperty(this,"inited",void 0),_defineProperty(this,"containerSize",void 0),this.markerLayerOption=hg(this.getDefault(),i),bindAll(["update"],this),this.zoom=((s=this.markerLayerOption.clusterOption)===null||s===void 0?void 0:s.zoom)||-99}getDefault(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}addTo(i){return this.scene=i,this.mapsService=i.mapService,this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}setContainerSize(){if(!this.mapsService)return;const i=this.mapsService.getContainer();this.containerSize={containerWidth:(i==null?void 0:i.scrollWidth)||0,containerHeight:(i==null?void 0:i.scrollHeight)||0,bounds:this.mapsService.getBounds()}}getContainerSize(){return this.containerSize}addMarker(i){const s=this.markerLayerOption.cluster;if(i.getMarkerLayerContainerSize=this.getContainerSize.bind(this),s&&(this.addPoint(i,this.markers.length),this.mapsService)){const f=this.mapsService.getZoom(),g=this.mapsService.getBounds();this.bbox=padBounds(g,.5),this.zoom=Math.floor(f),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(i)}removeMarker(i){this.markers.indexOf(i);const s=this.markers.indexOf(i);s>-1&&(this.markers.splice(s,1),this.markerLayerOption.cluster&&(this.removePoint(s),this.mapsService&&this.getClusterMarker(this.bbox,this.zoom)))}hide(){this.markers.map(i=>{i.getElement().style.opacity="0"}),this.clusterMarkers.map(i=>{i.getElement().style.opacity="0"})}show(){this.markers.map(i=>{i.getElement().style.opacity="1"}),this.clusterMarkers.map(i=>{i.getElement().style.opacity="1"})}getMarkers(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}getOriginMarkers(){return this.markers}addMarkers(){this.getMarkers().forEach(i=>{i.addTo(this.scene)})}clear(){this.markers.forEach(i=>{i.remove()}),this.clusterMarkers.forEach(i=>{i.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}destroy(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}addPoint(i,s){const{lng:f,lat:g}=i.getLnglat(),y={geometry:{type:"Point",coordinates:[f,g]},properties:_objectSpread(_objectSpread({},i.getExtData()),{},{marker_id:s})};this.points.push(y),this.clusterIndex&&this.clusterIndex.load(this.points)}removePoint(i){const s=this.points.findIndex(f=>f.properties.marker_id===i);s>-1&&this.points.splice(s,1),this.clusterIndex&&this.clusterIndex.load(this.points)}initCluster(){if(!this.markerLayerOption.cluster)return;const{radius:i,minZoom:s=0,maxZoom:f}=this.markerLayerOption.clusterOption;this.clusterIndex=new Supercluster({radius:i,minZoom:s,maxZoom:f}),this.clusterIndex.load(this.points)}getClusterMarker(i,s){const f=i[0].concat(i[1]),g=this.clusterIndex.getClusters(f,s);this.clusterMarkers.forEach(y=>{y.remove()}),this.clusterMarkers=[],g.forEach(y=>{var x;const{field:O,method:A}=this.markerLayerOption.clusterOption;if((x=y.properties)!==null&&x!==void 0&&x.cluster_id){var P;const Z=this.getLeaves((P=y.properties)===null||P===void 0?void 0:P.cluster_id);if(y.properties.clusterData=Z,O&&A){const W=Z==null?void 0:Z.map(ye=>({[O]:ye.properties[O]})),mt=Satistics.getColumn(W,O),Nt=Satistics.getSatByColumn(A,mt),Jt="point_"+A;y.properties[Jt]=Nt.toFixed(2)}}const N=this.clusterMarker(y);this.clusterMarkers.push(N),N.addTo(this.scene)})}getLeaves(i,s=1/0,f=0){return i?this.clusterIndex.getLeaves(i,s,f):null}clusterMarker(i){const s=this.markerLayerOption.clusterOption,{element:f=this.generateElement.bind(this)}=s;return new Marker({element:f(i)}).setLnglat({lng:i.geometry.coordinates[0],lat:i.geometry.coordinates[1]})}normalMarker(i){const s=i.properties.marker_id;return this.markers[s]}update(){if(!this.mapsService||this.markers.length===0)return;const i=this.mapsService.getZoom(),s=this.mapsService.getBounds();(!this.bbox||Math.abs(i-this.zoom)>=1||!boundsContains(this.bbox,s))&&(this.bbox=padBounds(s,.5),this.zoom=Math.floor(i),this.getClusterMarker(this.bbox,this.zoom))}generateElement(i){const s=DOM.create("div","l7-marker-cluster"),f=DOM.create("div","",s),g=DOM.create("span","",f),{field:y,method:x}=this.markerLayerOption.clusterOption;i.properties.point_count=i.properties.point_count||1;const O=y&&x?i.properties["point_"+x]||i.properties[y]:i.properties.point_count;return g.textContent=O,s}}var ui=k(4157);class sl extends qp(){constructor(i){super(),(0,ct.Z)(this,"controlOption",void 0),(0,ct.Z)(this,"container",void 0),(0,ct.Z)(this,"isShow",void 0),(0,ct.Z)(this,"sceneContainer",void 0),(0,ct.Z)(this,"scene",void 0),(0,ct.Z)(this,"mapsService",void 0),(0,ct.Z)(this,"renderService",void 0),(0,ct.Z)(this,"layerService",void 0),(0,ct.Z)(this,"controlService",void 0),(0,ct.Z)(this,"configService",void 0),sl.controlCount++,this.controlOption=(0,on.Z)((0,on.Z)({},this.getDefault(i)),i||{})}getOptions(){return this.controlOption}setOptions(i){const s=this.getDefault(i);Object.entries(i).forEach(([f,g])=>{g===void 0&&(i[f]=s[f])}),"position"in i&&this.setPosition(i.position),"className"in i&&this.setClassName(i.className),"style"in i&&this.setStyle(i.style),this.controlOption=(0,on.Z)((0,on.Z)({},this.controlOption),i)}addTo(i){this.mapsService=i.mapService,this.renderService=i.rendererService,this.layerService=i.layerService,this.controlService=i.controlService,this.configService=i.globalConfigService,this.scene=i.sceneService,this.sceneContainer=i,this.isShow=!0,this.container=this.onAdd(),ja(this.container,"l7-control");const{className:s,style:f}=this.controlOption;return s&&this.setClassName(s),f&&this.setStyle(f),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;Ba(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return Bi("div")}onRemove(){}show(){const i=this.container;co(i,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const i=this.container;ja(i,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(i){return{position:vu.TOPRIGHT,name:`${sl.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(i){if(this.mapsService&&i&&i.screenX>0&&i.screenY>0){const s=this.mapsService.getContainer();s!==null&&s.focus()}}setPosition(i=vu.TOPLEFT){const s=this.controlService;return s&&s.removeControl(this),this.controlOption.position=i,s&&s.addControl(this,this.sceneContainer),this}setClassName(i){const s=this.container,{className:f}=this.controlOption;f&&co(s,f),i&&ja(s,i)}setStyle(i){const s=this.container;i?s.setAttribute("style",i):s.removeAttribute("style")}insertContainer(){const i=this.controlOption.position,s=this.container;if(i instanceof Element)i.appendChild(s);else{const f=this.controlService.controlCorners[i];["bottomleft","bottomright","righttop","rightbottom"].includes(i)?f.insertBefore(s,f.firstChild):f.appendChild(s)}}checkUpdateOption(i,s){return s.some(f=>f in i)}}(0,ct.Z)(sl,"controlCount",0);class Ea extends null{constructor(...i){super(...i),_defineProperty(this,"isDisable",!1),_defineProperty(this,"button",void 0),_defineProperty(this,"buttonText",void 0),_defineProperty(this,"buttonIcon",void 0)}setIsDisable(i){if(this.isDisable=i,i){var s;(s=this.button)===null||s===void 0||s.setAttribute("disabled","true")}else{var f;(f=this.button)===null||f===void 0||f.removeAttribute("disabled")}}createButton(i=""){return DOM.create("button",`l7-button-control ${i}`)}onAdd(){this.button=this.createButton(),this.isDisable=!1;const{title:i,btnText:s,btnIcon:f}=this.controlOption;return this.setBtnTitle(i),this.setBtnText(s),this.setBtnIcon(f),this.button}onRemove(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}setOptions(i){const{title:s,btnText:f,btnIcon:g}=i;this.checkUpdateOption(i,["title"])&&this.setBtnTitle(s),this.checkUpdateOption(i,["btnIcon"])&&this.setBtnIcon(g),this.checkUpdateOption(i,["btnText"])&&this.setBtnText(f),super.setOptions(i)}setBtnTitle(i){var s;(s=this.button)===null||s===void 0||s.setAttribute("title",i!=null?i:"")}setBtnIcon(i){if(this.buttonIcon&&DOM.remove(this.buttonIcon),i){var s;const y=(s=this.button)===null||s===void 0?void 0:s.firstChild;if(y){var f;(f=this.button)===null||f===void 0||f.insertBefore(i,y)}else{var g;(g=this.button)===null||g===void 0||g.appendChild(i)}this.buttonIcon=i}}setBtnText(i){if(this.button)if(DOM.removeClass(this.button,"l7-button-control--row"),DOM.removeClass(this.button,"l7-button-control--column"),i){let f=this.buttonText;if(!f){var s;f=DOM.create("div","l7-button-control__text"),(s=this.button)===null||s===void 0||s.appendChild(f),this.buttonText=f}f.innerText=i,DOM.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!i&&this.buttonText&&(DOM.remove(this.buttonText),this.buttonText=void 0)}}class ju extends to.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(i,s){super(),(0,ct.Z)(this,"popperDOM",void 0),(0,ct.Z)(this,"contentDOM",void 0),(0,ct.Z)(this,"button",void 0),(0,ct.Z)(this,"option",void 0),(0,ct.Z)(this,"isShow",!1),(0,ct.Z)(this,"content",void 0),(0,ct.Z)(this,"timeout",null),(0,ct.Z)(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),co(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&ju.conflictPopperList.forEach(f=>{f!==this&&f.isShow&&f.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),(0,ct.Z)(this,"hide",()=>this.isShow?(ja(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),(0,ct.Z)(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),(0,ct.Z)(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),(0,ct.Z)(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),(0,ct.Z)(this,"onPopperUnClick",f=>{Ey(f.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),(0,ct.Z)(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),(0,ct.Z)(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=i,this.option=s,this.init(),s.unique&&ju.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(i){typeof i=="string"?this.contentDOM.innerHTML=i:i instanceof HTMLElement&&(Bp(this.contentDOM),this.contentDOM.appendChild(i)),this.content=i}init(){const{trigger:i}=this.option;this.popperDOM=this.createPopper(),i==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Ba(this.popperDOM)}resetPopperPosition(){const i={},{container:s,offset:f=[0,0],placement:g}=this.option,[y,x]=f,O=this.button.getBoundingClientRect(),A=s.getBoundingClientRect(),{left:P,right:N,top:Z,bottom:W}=rs(O,A);let mt=!1,Nt=!1;/^(left|right)/.test(g)?(g.includes("left")?i.right=`${O.width+N}px`:g.includes("right")&&(i.left=`${O.width+P}px`),g.includes("start")?i.top=`${Z}px`:g.includes("end")?i.bottom=`${W}px`:(i.top=`${Z+O.height/2}px`,Nt=!0,i.transform=`translate(${y}px, calc(${x}px - 50%))`)):/^(top|bottom)/.test(g)&&(g.includes("top")?i.bottom=`${O.height+W}px`:g.includes("bottom")&&(i.top=`${O.height+Z}px`),g.includes("start")?i.left=`${P}px`:g.includes("end")?i.right=`${N}px`:(i.left=`${P+O.width/2}px`,mt=!0,i.transform=`translate(calc(${y}px - 50%), ${x}px)`)),i.transform=`translate(calc(${y}px - ${mt?"50%":"0%"}), calc(${x}px - ${Nt?"50%":"0%"})`;const Jt=g.split("-");Jt.length&&ja(this.popperDOM,Jt.map(ye=>`l7-popper-${ye}`).join(" ")),Sy(this.popperDOM,Wf(i))}createPopper(){const{container:i,className:s="",content:f}=this.option,g=Bi("div",`l7-popper l7-popper-hide ${s}`),y=Bi("div","l7-popper-content"),x=Bi("div","l7-popper-arrow");return g.appendChild(y),g.appendChild(x),i.appendChild(g),this.popperDOM=g,this.contentDOM=y,f&&this.setContent(f),g}}(0,ct.Z)(ju,"conflictPopperList",[]);const zu={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"};class HA extends null{constructor(...i){super(...i),_defineProperty(this,"popper",void 0)}getPopper(){return this.popper}hide(){this.popper.hide(),super.hide()}getDefault(i){var s;const f=super.getDefault(i),g=(s=i==null?void 0:i.position)!==null&&s!==void 0?s:f.position;return _objectSpread(_objectSpread({},super.getDefault(i)),{},{popperPlacement:g instanceof Element?"bottom":zu[g],popperTrigger:"click"})}onAdd(){const i=super.onAdd();return this.initPopper(),i}onRemove(){this.popper.destroy()}initPopper(){const{popperClassName:i,popperPlacement:s,popperTrigger:f}=this.controlOption,g=this.mapsService.getMapContainer();return this.popper=new Popper(this.button,{className:i,placement:s,trigger:f,container:g,unique:!0}),this.popper.on("show",()=>{this.emit("popperShow",this)}).on("hide",()=>{this.emit("popperHide",this)}),this.popper}setOptions(i){if(super.setOptions(i),this.checkUpdateOption(i,["popperPlacement","popperTrigger","popperClassName"])){const s=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(s)}}}var _s=function(a){return a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index",a}(_s||{});class n6 extends null{constructor(...i){super(...i),_defineProperty(this,"selectValue",[]),_defineProperty(this,"optionDOMList",void 0),_defineProperty(this,"createNormalOption",s=>{const f=this.selectValue.includes(s.value),g=DOM.create("div",`l7-select-control-item ${f?_s.ActiveOptionClassName:""}`);this.getIsMultiple()?g.appendChild(this.createCheckbox(f)):g.appendChild(this.createRadio(f)),s.icon&&g.appendChild(s.icon);const y=DOM.create("span");return y.innerText=s.text,g.appendChild(y),g}),_defineProperty(this,"onItemClick",s=>{if(this.getIsMultiple()){const f=this.selectValue.findIndex(g=>g===s.value);f>-1?this.selectValue.splice(f,1):this.selectValue=[...this.selectValue,s.value]}else this.selectValue=[s.value];this.setSelectValue(this.selectValue)})}setOptions(i){super.setOptions(i);const{options:s}=i;s&&this.popper.setContent(this.getPopperContent(s))}onAdd(){const i=super.onAdd(),{defaultValue:s}=this.controlOption;return s&&(this.selectValue=this.transSelectValue(s)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),i}getSelectValue(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}setSelectValue(i,s=!0){const f=this.transSelectValue(i);this.optionDOMList.forEach(g=>{const y=g.getAttribute(_s.OptionValueAttrKey),x=g.querySelector("input[type=checkbox]"),O=g.querySelector("input[type=radio]"),A=f.includes(y),P=(N,Z)=>{DOM.toggleClass(g,_s.ActiveOptionClassName,Z),N&&DOM.setChecked(N,Z)};P(x,A),P(O,A)}),this.selectValue=f,s&&this.emit("selectChange",this.getIsMultiple()?f:f[0])}getIsMultiple(){return!1}getPopperContent(i){const s=this.isImageOptions(),f=DOM.create("div",s?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&DOM.addClass(f,"l7-select-control--multiple");const g=i.map((y,x)=>{const O=s?this.createImageOption(y):this.createNormalOption(y);return O.setAttribute(_s.OptionValueAttrKey,y.value),O.setAttribute(_s.OptionIndexAttrKey,window.String(x)),O.addEventListener("click",this.onItemClick.bind(this,y)),O});return f.append(...g),this.optionDOMList=g,f}createImageOption(i){const s=this.selectValue.includes(i.value),f=DOM.create("div",`l7-select-control-item ${s?_s.ActiveOptionClassName:""}`),g=DOM.create("img");g.setAttribute("src",i.img),DOM.setUnDraggable(g),f.appendChild(g);const y=DOM.create("div","l7-select-control-item-row");this.getIsMultiple()&&f.appendChild(this.createCheckbox(s));const x=DOM.create("span");return x.innerText=i.text,y.appendChild(x),f.appendChild(y),f}createCheckbox(i){const s=DOM.create("input");return s.setAttribute("type","checkbox"),i&&DOM.setChecked(s,!0),s}createRadio(i){const s=DOM.create("input");return s.setAttribute("type","radio"),i&&DOM.setChecked(s,!0),s}isImageOptions(){return!!this.controlOption.options.find(i=>i.img)}transSelectValue(i){return Array.isArray(i)?i:[i]}}const qd=a=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("l7-iconfont"),i.setAttribute("aria-hidden","true");const s=document.createElementNS("http://www.w3.org/2000/svg","use");return s.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${a}`),i.appendChild(s),i};class r6 extends null{constructor(...i){var s;super(...i),s=this,_defineProperty(this,"onClick",_asyncToGenerator(function*(){const{onExport:f}=s.controlOption;f==null||f(yield s.getImage())})),_defineProperty(this,"mergeImage",_asyncToGenerator(function*(...f){var g,y;const{imageType:x}=s.controlOption,{width:O=0,height:A=0}=(g=(y=s.mapsService.getContainer())===null||y===void 0?void 0:y.getBoundingClientRect())!==null&&g!==void 0?g:{},P=document.createElement("canvas");P.width=O,P.height=A;const N=P.getContext("2d");return(yield Promise.all(f.map(W=>new Promise(mt=>{const Nt=new Image;Nt.onload=()=>{mt(Nt)},Nt.src=W})))).forEach(W=>{N==null||N.drawImage(W,0,0,O,A)}),P.toDataURL(`image/${x}`)}))}onAdd(){const i=super.onAdd();return i.addEventListener("click",this.onClick),i}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:createL7Icon("l7-icon-export-picture"),imageType:"png"})}getImage(){var i=this;return _asyncToGenerator(function*(){const s=yield i.mapsService.exportMap("png"),f=yield i.scene.exportPng("png");return i.mergeImage(...[s,f].filter(g=>g))})()}}const t_=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ya=(()=>{if(typeof document=="undefined")return!1;const a=t_[0],i={};for(const s of t_)if((s==null?void 0:s[1])in document){for(const[g,y]of s.entries())i[a[g]]=y;return i}return!1})(),e_={change:Ya.fullscreenchange,error:Ya.fullscreenerror};let Eo={request(a=document.documentElement,i){return new Promise((s,f)=>{const g=()=>{Eo.off("change",g),s()};Eo.on("change",g);const y=a[Ya.requestFullscreen](i);y instanceof Promise&&y.then(g).catch(f)})},exit(){return new Promise((a,i)=>{if(!Eo.isFullscreen){a();return}const s=()=>{Eo.off("change",s),a()};Eo.on("change",s);const f=document[Ya.exitFullscreen]();f instanceof Promise&&f.then(s).catch(i)})},toggle(a,i){return Eo.isFullscreen?Eo.exit():Eo.request(a,i)},onchange(a){Eo.on("change",a)},onerror(a){Eo.on("error",a)},on(a,i){const s=e_[a];s&&document.addEventListener(s,i,!1)},off(a,i){const s=e_[a];s&&document.removeEventListener(s,i,!1)},raw:Ya};Object.defineProperties(Eo,{isFullscreen:{get:()=>!!document[Ya.fullscreenElement]},element:{enumerable:!0,get:()=>{var a;return(a=document[Ya.fullscreenElement])!==null&&a!==void 0?a:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[Ya.fullscreenEnabled]}}),Ya||(Eo={isEnabled:!1});var i6=null;class o6 extends null{constructor(i){var s;super(i),s=this,_defineProperty(this,"isFullscreen",!1),_defineProperty(this,"mapContainer",void 0),_defineProperty(this,"toggleFullscreen",_asyncToGenerator(function*(){ScreenFull.isEnabled&&(yield ScreenFull.toggle(s.mapContainer))})),_defineProperty(this,"onClick",()=>{this.toggleFullscreen()}),_defineProperty(this,"onFullscreenChange",()=>{this.isFullscreen=!!document.fullscreenElement;const{btnText:f,btnIcon:g,title:y,exitBtnText:x,exitBtnIcon:O,exitTitle:A}=this.controlOption;this.isFullscreen?(this.setBtnTitle(A),this.setBtnText(x),this.setBtnIcon(O)):(this.setBtnTitle(y),this.setBtnText(f),this.setBtnIcon(g)),this.emit("fullscreenChange",this.isFullscreen)}),ScreenFull.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316")}setOptions(i){const{exitBtnText:s,exitBtnIcon:f,exitTitle:g}=i;this.isFullscreen&&(this.checkUpdateOption(i,["exitBtnIcon"])&&this.setBtnIcon(f),this.checkUpdateOption(i,["exitBtnText"])&&this.setBtnText(s),this.checkUpdateOption(i,["exitTitle"])&&this.setBtnTitle(g)),super.setOptions(i)}onAdd(){const i=super.onAdd();return i.addEventListener("click",this.onClick),this.mapContainer=DOM.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),i}onRemove(){super.onRemove(),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u5168\u5C4F",btnIcon:createL7Icon("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:createL7Icon("l7-icon-exit-fullscreen")})}}class VA extends null{constructor(i){var s;super(i),s=this,_defineProperty(this,"getGeoLocation",()=>new Promise((f,g)=>{window.navigator.geolocation.getCurrentPosition(({coords:y})=>{const{longitude:x,latitude:O}=y!=null?y:{};!isNaN(x)&&!isNaN(O)?f([x,O]):g()},y=>{g(y)})})),_defineProperty(this,"onClick",_asyncToGenerator(function*(){if(!window.navigator.geolocation)return;const{transform:f}=s.controlOption,g=yield s.getGeoLocation(),y=s.mapsService.getZoom();s.mapsService.setZoomAndCenter(y>15?y:15,f?yield f(g):g)})),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D")}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u5B9A\u4F4D",btnIcon:createL7Icon("l7-icon-reposition")})}onAdd(){const i=super.onAdd();return i.addEventListener("click",this.onClick),i}}function n_(a){return Object.keys(a!=null?a:{}).every(i=>["layer","name","img"].includes(i))}class xs extends null{constructor(...i){super(...i),_defineProperty(this,"onLayerChange",()=>{var s;(s=this.controlOption.layers)!==null&&s!==void 0&&s.length||(this.selectValue=this.getLayerVisible(),this.setOptions({options:this.getLayerOptions()}))}),_defineProperty(this,"onLayerVisibleChane",()=>{this.setSelectValue(this.getLayerVisible())}),_defineProperty(this,"onSelectChange",()=>{this.layers.forEach(s=>{const f=this.selectValue.includes(s.name),g=s.isVisible();f&&!g&&s.show(),!f&&g&&s.hide()})})}get layers(){const i=this.layerService,{layers:s}=this.controlOption;if(Array.isArray(s)&&s.length){const f=[];return s.forEach(g=>{if(g instanceof Object&&(n_(g)?f.push(g.layer):f.push(g)),typeof g=="string"){const y=i.getLayer(g)||i.getLayerByName(g);y&&f.push(y)}}),f}return i.getLayers()||[]}getDefault(i){var s;return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:createL7Icon("l7-icon-layer"),options:[],multiple:(s=i==null?void 0:i.multiple)!==null&&s!==void 0?s:!0})}getLayerVisible(){return this.layers.filter(i=>i.isVisible()).map(i=>i.name)}getLayerOptions(){const{layers:i}=this.controlOption,s=i==null?void 0:i.every(f=>f.img);return i?i==null?void 0:i.map(f=>{if(n_(f))return{text:f.name||f.layer.name,value:f.layer.name,img:s?f.img:void 0};if(typeof f=="string"){const g=this.layerService.getLayer(f)||this.layerService.getLayerByName(f);return{text:g==null?void 0:g.name,value:g==null?void 0:g.name}}return{text:f.name,value:f.name}}):this.layers.map(f=>({text:f.name,value:f.name}))}setOptions(i){const s=this.checkUpdateOption(i,["layers","multiple"]);super.setOptions(i),s&&(this.controlOption.multiple===!1&&this.handleSingleSelection(),this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}handleSingleSelection(){this.layers.forEach((i,s)=>{s===0?i.show():i.hide()})}onAdd(){var i;return this.controlOption.multiple===!1&&this.handleSingleSelection(),(i=this.controlOption.options)!==null&&i!==void 0&&i.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),super.onAdd()}onRemove(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}getIsMultiple(){return this.controlOption.multiple}}class WA extends sl{getDefault(){return{position:vu.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const i=Bi("div","l7-control-logo");return this.setLogoContent(i),i}onRemove(){return null}setOptions(i){super.setOptions(i),this.checkUpdateOption(i,["img","href"])&&(Bp(this.container),this.setLogoContent(this.container))}setLogoContent(i){const{href:s,img:f}=this.controlOption,g=Bi("img");if(g.setAttribute("src",f),g.setAttribute("aria-label","AntV logo"),jp(g),s){const y=Bi("a","l7-control-logo-link");y.target="_blank",y.href=s,y.rel="noopener nofollow",y.setAttribute("rel","noopener nofollow"),y.appendChild(g),i.appendChild(y)}else i.appendChild(g)}}const a6={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},GA={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};class r_ extends null{constructor(...i){super(...i),_defineProperty(this,"onMapThemeChange",()=>{this.mapsService.setMapStyle(this.selectValue[0])})}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:createL7Icon("l7-icon-color"),options:[]})}getStyleOptions(){const i=this.mapsService.getType()==="mapbox"?MapboxMapStyleConfig:GaodeMapStyleConfig;return Object.entries(this.mapsService.getMapStyleConfig()).filter(([s,f])=>typeof f=="string"&&s!=="blank").map(([s,f])=>{var g;const{text:y,img:x}=(g=i[s])!==null&&g!==void 0?g:{};return{text:y!=null?y:s,value:f,img:x,key:s}})}getMapStyle(){return this.mapsService.getMapStyle()}onAdd(){var i;if((i=this.controlOption.options)!==null&&i!==void 0&&i.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var s,f;const g=this.controlOption.defaultValue;this.controlOption.defaultValue=(s=(f=this.controlOption.options.find(y=>y.key===g))===null||f===void 0?void 0:f.value)!==null&&s!==void 0?s:g}else{const g=this.getMapStyle();g?this.controlOption.defaultValue=g:this.mapsService.map.once("styledata",()=>{const y=this.mapsService.getMapStyle();this.controlOption.defaultValue=y,this.setSelectValue(y,!1)})}return this.on("selectChange",this.onMapThemeChange),super.onAdd()}getIsMultiple(){return!1}}class s6 extends null{constructor(...i){super(...i),_defineProperty(this,"location",[0,0]),_defineProperty(this,"onMouseMove",s=>{let f=this.location;const g=s.lngLat||s.lnglat,{transform:y}=this.controlOption;g&&(f=[g.lng,g.lat]),this.location=f,y&&(f=y(f)),this.insertLocation2HTML(f),this.emit("locationChange",f)})}getLocation(){return this.location}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{position:PositionType.BOTTOMLEFT,transform:([s,f])=>[+(+s).toFixed(6),+(+f).toFixed(6)]})}onAdd(){const i=DOM.create("div","l7-control-mouse-location");return i.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),i}onRemove(){this.mapsService.off("mousemove",this.onMouseMove)}insertLocation2HTML(i){this.container.innerText=i.join(", ")}}class $A extends null{constructor(...i){super(...i),_defineProperty(this,"mScale",void 0),_defineProperty(this,"iScale",void 0),_defineProperty(this,"update",()=>{const s=this.mapsService,{maxWidth:f}=this.controlOption,g=s.getSize()[1]/2,y=s.containerToLngLat([0,g]),x=s.containerToLngLat([f,g]),O=lnglatDistance([y.lng,y.lat],[x.lng,x.lat]);this.updateScales(O)})}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{name:"scale",position:PositionType.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}onAdd(){const s=DOM.create("div","l7-control-scale");this.resetScaleLines(s);const{updateWhenIdle:f}=this.controlOption;return this.mapsService.on(f?"moveend":"mapmove",this.update),this.mapsService.on(f?"zoomend":"zoomchange",this.update),s}onRemove(){const{updateWhenIdle:i}=this.controlOption;this.mapsService.off(i?"zoomend":"zoomchange",this.update),this.mapsService.off(i?"moveend":"mapmove",this.update)}setOptions(i){super.setOptions(i),this.checkUpdateOption(i,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}updateScales(i){const{metric:s,imperial:f}=this.controlOption;s&&i&&this.updateMetric(i),f&&i&&this.updateImperial(i)}resetScaleLines(i){DOM.clearChildren(i);const{metric:s,imperial:f,maxWidth:g,lockWidth:y}=this.controlOption;y&&DOM.addStyle(i,`width: ${g}px`),s&&(this.mScale=DOM.create("div","l7-control-scale-line",i)),f&&(this.iScale=DOM.create("div","l7-control-scale-line",i)),this.update()}updateScale(i,s,f){const{maxWidth:g}=this.controlOption;i.style.width=Math.round(g*f)+"px",i.innerHTML=s}getRoundNum(i){const s=Math.pow(10,(Math.floor(i)+"").length-1);let f=i/s;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,s*f}updateMetric(i){const s=this.getRoundNum(i),f=s<1e3?s+" m":s/1e3+" km";this.updateScale(this.mScale,f,s/i)}updateImperial(i){const s=i*3.2808399;let f,g,y;s>5280?(f=s/5280,g=this.getRoundNum(f),this.updateScale(this.iScale,g+" mi",g/f)):(y=this.getRoundNum(s),this.updateScale(this.iScale,y+" ft",y/s))}}class YA{constructor(){(0,ct.Z)(this,"mapService",void 0),(0,ct.Z)(this,"fontService",void 0)}apply(i,{styleAttributeService:s,mapService:f,fontService:g}){var y=this;this.mapService=f,this.fontService=g,i.hooks.init.tapPromise("DataMappingPlugin",(0,ln.Z)(function*(){i.log(Oi.MappingStart,$i.INIT),y.generateMaping(i,{styleAttributeService:s}),i.log(Oi.MappingEnd,$i.INIT)})),i.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var x=(0,ln.Z)(function*(O){if(!O)return O;i.dataState.dataMappingNeedUpdate=!1,i.log(Oi.MappingStart,$i.UPDATE);const A=y.generateMaping(i,{styleAttributeService:s});return i.log(Oi.MappingEnd,$i.UPDATE),A});return function(O){return x.apply(this,arguments)}}()),i.hooks.beforeRender.tap("DataMappingPlugin",()=>{const x=i.getSource();if(i.layerModelNeedUpdate||!x||!x.inited)return;const O=s.getLayerStyleAttributes()||[],A=s.getLayerStyleAttribute("filter"),{dataArray:P}=x.data;if(Array.isArray(P)&&P.length===0)return;const N=O.filter(W=>W.needRemapping);let Z=P;if(A!=null&&A.needRemapping&&A!==null&&A!==void 0&&A.scale&&(Z=P.filter(W=>this.applyAttributeMapping(A,W)[0])),N.length){const W=this.mapping(i,N,Z,i.getEncodedData());i.setEncodedData(W)}})}generateMaping(i,{styleAttributeService:s}){const f=s.getLayerStyleAttributes()||[],g=s.getLayerStyleAttribute("filter"),{dataArray:y}=i.getSource().data;let x=y;g!=null&&g.scale&&(x=y.filter(A=>this.applyAttributeMapping(g,A)[0])),x=i.processData(x);const O=this.mapping(i,f,x,void 0);return i.setEncodedData(O),i.emit("dataUpdate",null),!0}mapping(i,s,f,g){const y=s.filter(O=>O.scale!==void 0).filter(O=>O.name!=="filter"),x=f.map((O,A)=>{const P=g?g[A]:{},N=(0,on.Z)({id:O._id,coordinates:O.coordinates},P);return y.forEach(Z=>{let W=this.applyAttributeMapping(Z,O);(Z.name==="color"||Z.name==="stroke")&&(W=W.map(mt=>Fr(mt))),N[Z.name]=Array.isArray(W)&&W.length===1?W[0]:W,Z.name==="shape"&&(N.shape=this.fontService.getIconFontKey(N[Z.name]))}),N});return s.forEach(O=>{O.needRemapping=!1}),this.adjustData2SimpleCoordinates(x),x}adjustData2SimpleCoordinates(i){i.length>0&&this.mapService.version==="SIMPLE"&&i.map(s=>{s.simpleCoordinate||(s.coordinates=this.unProjectCoordinates(s.coordinates),s.simpleCoordinate=!0)})}unProjectCoordinates(i){if(typeof i[0]=="number")return this.mapService.simpleMapCoord.unproject(i);if(i[0]&&i[0][0]instanceof Array){const s=[];return i.map(f=>{const g=[];f.map(y=>{g.push(this.mapService.simpleMapCoord.unproject(y))}),s.push(g)}),s}else{const s=[];return i.map(f=>{s.push(this.mapService.simpleMapCoord.unproject(f))}),s}}applyAttributeMapping(i,s){var f;if(!i.scale)return[];const g=(i==null||(f=i.scale)===null||f===void 0?void 0:f.scalers)||[],y=[];return g.forEach(({field:O})=>{var A;(s.hasOwnProperty(O)||((A=i.scale)===null||A===void 0?void 0:A.type)==="variable")&&y.push(s[O])}),i.mapping?i.mapping(y):[]}getArrowPoints(i,s){const f=[s[0]-i[0],s[1]-i[1]],g=Gp(f);return[i[0]+g[0]*1e-4,i[1]+g[1]*1e-4]}}class XA{constructor(){(0,ct.Z)(this,"mapService",void 0)}apply(i){var s=this;this.mapService=i.getContainer().mapService,i.hooks.init.tapPromise("DataSourcePlugin",(0,ln.Z)(function*(){i.log(Oi.SourceInitStart,$i.INIT);let f=i.getSource();if(!f){const{data:g,options:y}=i.sourceOption||i.defaultSourceConfig;f=new Jb(g,y),i.setSource(f)}f.inited?(s.updateClusterData(i),i.log(Oi.SourceInitEnd,$i.INIT)):yield new Promise(g=>{f.on("update",y=>{y.type==="inited"&&(s.updateClusterData(i),i.log(Oi.SourceInitEnd,$i.INIT)),g(null)})})})),i.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,ln.Z)(function*(){const f=s.updateClusterData(i),g=i.dataState.dataSourceNeedUpdate;return i.dataState.dataSourceNeedUpdate=!1,f||g}))}updateClusterData(i){if(i.isTileLayer||i.tileLayer||!i.getSource())return!1;const s=i.getSource(),f=s.cluster,{zoom:g=0}=s.clusterOptions,y=this.mapService.getZoom()-1,x=i.dataState.dataSourceNeedUpdate;return f&&x&&s.updateClusterData(Math.floor(y)),f&&Math.abs(i.clusterZoom-y)>=1?(g!==Math.floor(y)&&s.updateClusterData(Math.floor(y)),i.clusterZoom=y,!0):!1}}var qA=k(64599),i_=k.n(qA);function o_(a,i){var s,f;if(i===void 0){var g=i_()(a),y;try{for(g.s();!(y=g.n()).done;){var x=y.value;x!=null&&(s===void 0?x>=x&&(s=f=x):(s>x&&(s=x),f<x&&(f=x)))}}catch(Z){g.e(Z)}finally{g.f()}}else{var O=-1,A=i_()(a),P;try{for(A.s();!(P=A.n()).done;){var N=P.value;(N=i(N,++O,a))!=null&&(s===void 0?N>=N&&(s=f=N):(s>N&&(s=N),f<N&&(f=N)))}}catch(Z){A.e(Z)}finally{A.f()}}return[s,f]}function cl(a,i,s,f,g){var y=a*a,x=y*a;return((1-3*a+3*y-x)*i+(4-6*y+3*x)*s+(1+3*a+3*y-3*x)*f+x*g)/6}function ll(a){var i=a.length-1;return function(s){var f=s<=0?s=0:s>=1?(s=1,i-1):Math.floor(s*i),g=a[f],y=a[f+1],x=f>0?a[f-1]:2*g-y,O=f<i-1?a[f+2]:2*y-g;return cl((s-f/i)*i,x,g,y,O)}}function Ss(a){var i=a.length;return function(s){var f=Math.floor(((s%=1)<0?++s:s)*i),g=a[(f+i-1)%i],y=a[f%i],x=a[(f+1)%i],O=a[(f+2)%i];return cl((s-f/i)*i,g,y,x,O)}}function Uu(a){return function(){return a}}function Zu(a,i){return function(s){return a+s*i}}function KA(a,i,s){return a=Math.pow(a,s),i=Math.pow(i,s)-a,s=1/s,function(f){return Math.pow(a+f*i,s)}}function QA(a,i){var s=i-a;return s?Zu(a,s>180||s<-180?s-360*Math.round(s/360):s):constant(isNaN(a)?i:a)}function ro(a){return(a=+a)==1?Os:function(i,s){return s-i?KA(i,s,a):Uu(isNaN(i)?s:i)}}function Os(a,i){var s=i-a;return s?Zu(a,s):Uu(isNaN(a)?i:a)}var c6=function a(i){var s=ro(i);function f(g,y){var x=s((g=Bt(g)).r,(y=Bt(y)).r),O=s(g.g,y.g),A=s(g.b,y.b),P=Os(g.opacity,y.opacity);return function(N){return g.r=x(N),g.g=O(N),g.b=A(N),g.opacity=P(N),g+""}}return f.gamma=a,f}(1);function Kd(a){return function(i){var s=i.length,f=new Array(s),g=new Array(s),y=new Array(s),x,O;for(x=0;x<s;++x)O=Bt(i[x]),f[x]=O.r||0,g[x]=O.g||0,y[x]=O.b||0;return f=a(f),g=a(g),y=a(y),O.opacity=1,function(A){return O.r=f(A),O.g=g(A),O.b=y(A),O+""}}}var wa=Kd(ll),Hu=Kd(Ss);function Ui(a,i){return a<i?-1:a>i?1:a>=i?0:NaN}function ul(a){return a.length===1&&(a=Qd(a)),{left:function(i,s,f,g){for(f==null&&(f=0),g==null&&(g=i.length);f<g;){var y=f+g>>>1;a(i[y],s)<0?f=y+1:g=y}return f},right:function(i,s,f,g){for(f==null&&(f=0),g==null&&(g=i.length);f<g;){var y=f+g>>>1;a(i[y],s)>0?g=y:f=y+1}return f}}}function Qd(a){return function(i,s){return Ui(a(i),s)}}var a_=ul(Ui),JA=a_.right,t5=a_.left,Jd=JA,s_=Array.prototype,l6=s_.slice,u6=s_.map,pg=Math.sqrt(50),gg=Math.sqrt(10),fl=Math.sqrt(2);function th(a,i,s){var f,g=-1,y,x,O;if(i=+i,a=+a,s=+s,a===i&&s>0)return[a];if((f=i<a)&&(y=a,a=i,i=y),(O=sc(a,i,s))===0||!isFinite(O))return[];if(O>0)for(a=Math.ceil(a/O),i=Math.floor(i/O),x=new Array(y=Math.ceil(i-a+1));++g<y;)x[g]=(a+g)*O;else for(a=Math.floor(a*O),i=Math.ceil(i*O),x=new Array(y=Math.ceil(a-i+1));++g<y;)x[g]=(a-g)/O;return f&&x.reverse(),x}function sc(a,i,s){var f=(i-a)/Math.max(0,s),g=Math.floor(Math.log(f)/Math.LN10),y=f/Math.pow(10,g);return g>=0?(y>=pg?10:y>=gg?5:y>=fl?2:1)*Math.pow(10,g):-Math.pow(10,-g)/(y>=pg?10:y>=gg?5:y>=fl?2:1)}function eh(a,i,s){var f=Math.abs(i-a)/Math.max(0,s),g=Math.pow(10,Math.floor(Math.log(f)/Math.LN10)),y=f/g;return y>=pg?g*=10:y>=gg?g*=5:y>=fl&&(g*=2),i<a?-g:g}function nh(){var a=identity,i=extent,s=sturges;function f(g){var y,x=g.length,O,A=new Array(x);for(y=0;y<x;++y)A[y]=a(g[y],y,g);var P=i(A),N=P[0],Z=P[1],W=s(A,N,Z);Array.isArray(W)||(W=tickStep(N,Z,W),W=range(Math.ceil(N/W)*W,Z,W));for(var mt=W.length;W[0]<=N;)W.shift(),--mt;for(;W[mt-1]>Z;)W.pop(),--mt;var Nt=new Array(mt+1),Jt;for(y=0;y<=mt;++y)Jt=Nt[y]=[],Jt.x0=y>0?W[y-1]:N,Jt.x1=y<mt?W[y]:Z;for(y=0;y<x;++y)O=A[y],N<=O&&O<=Z&&Nt[bisect(W,O,0,mt)].push(g[y]);return Nt}return f.value=function(g){return arguments.length?(a=typeof g=="function"?g:constant(g),f):a},f.domain=function(g){return arguments.length?(i=typeof g=="function"?g:constant([g[0],g[1]]),f):i},f.thresholds=function(g){return arguments.length?(s=typeof g=="function"?g:Array.isArray(g)?constant(slice.call(g)):constant(g),f):s},f}function rh(a,i,s){return a=map.call(a,number).sort(ascending),Math.ceil((s-i)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function e5(a){return a===null?NaN:+a}function n5(a,i,s){if(s==null&&(s=e5),!!(f=a.length)){if((i=+i)<=0||f<2)return+s(a[0],0,a);if(i>=1)return+s(a[f-1],f-1,a);var f,g=(f-1)*i,y=Math.floor(g),x=+s(a[y],y,a),O=+s(a[y+1],y+1,a);return x+(O-x)*(g-y)}}var mo="$";function dl(){}dl.prototype=Vu.prototype={constructor:dl,has:function(a){return mo+a in this},get:function(a){return this[mo+a]},set:function(a,i){return this[mo+a]=i,this},remove:function(a){var i=mo+a;return i in this&&delete this[i]},clear:function(){for(var a in this)a[0]===mo&&delete this[a]},keys:function(){var a=[];for(var i in this)i[0]===mo&&a.push(i.slice(1));return a},values:function(){var a=[];for(var i in this)i[0]===mo&&a.push(this[i]);return a},entries:function(){var a=[];for(var i in this)i[0]===mo&&a.push({key:i.slice(1),value:this[i]});return a},size:function(){var a=0;for(var i in this)i[0]===mo&&++a;return a},empty:function(){for(var a in this)if(a[0]===mo)return!1;return!0},each:function(a){for(var i in this)i[0]===mo&&a(this[i],i.slice(1),this)}};function Vu(a,i){var s=new dl;if(a instanceof dl)a.each(function(O,A){s.set(A,O)});else if(Array.isArray(a)){var f=-1,g=a.length,y;if(i==null)for(;++f<g;)s.set(f,a[f]);else for(;++f<g;)s.set(i(y=a[f],f,a),y)}else if(a)for(var x in a)s.set(x,a[x]);return s}var cc=Vu;function lc(){var a=[],i=[],s,f,g;function y(O,A,P,N){if(A>=a.length)return s!=null&&O.sort(s),f!=null?f(O):O;for(var Z=-1,W=O.length,mt=a[A++],Nt,Jt,ye=map(),Ne,ze=P();++Z<W;)(Ne=ye.get(Nt=mt(Jt=O[Z])+""))?Ne.push(Jt):ye.set(Nt,[Jt]);return ye.each(function(He,nn){N(ze,nn,y(He,A,P,N))}),ze}function x(O,A){if(++A>a.length)return O;var P,N=i[A-1];return f!=null&&A>=a.length?P=O.entries():(P=[],O.each(function(Z,W){P.push({key:W,values:x(Z,A)})})),N!=null?P.sort(function(Z,W){return N(Z.key,W.key)}):P}return g={object:function(O){return y(O,0,c_,vg)},map:function(O){return y(O,0,zo,Wu)},entries:function(O){return x(y(O,0,zo,Wu),0)},key:function(O){return a.push(O),g},sortKeys:function(O){return i[a.length-1]=O,g},sortValues:function(O){return s=O,g},rollup:function(O){return f=O,g}}}function c_(){return{}}function vg(a,i,s){a[i]=s}function zo(){return map()}function Wu(a,i,s){a.set(i,s)}function Aa(){}var Xa=cc.prototype;Aa.prototype=r5.prototype={constructor:Aa,has:Xa.has,add:function(a){return a+="",this[mo+a]=a,this},remove:Xa.remove,clear:Xa.clear,values:Xa.keys,size:Xa.size,empty:Xa.empty,each:Xa.each};function r5(a,i){var s=new Aa;if(a instanceof Aa)a.each(function(y){s.add(y)});else if(a){var f=-1,g=a.length;if(i==null)for(;++f<g;)s.add(a[f]);else for(;++f<g;)s.add(i(a[f],f,a))}return s}var i5=null,hl=Array.prototype,Es=hl.map,ws=hl.slice;function As(a,i){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(i).domain(a);break}return this}function mg(a,i){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(i).domain(a);break}return this}var yg={name:"implicit"};function oa(){var a=cc(),i=[],s=[],f=yg;function g(y){var x=y+"",O=a.get(x);if(!O){if(f!==yg)return f;a.set(x,O=i.push(y))}return s[(O-1)%s.length]}return g.domain=function(y){if(!arguments.length)return i.slice();i=[],a=cc();for(var x=-1,O=y.length,A,P;++x<O;)a.has(P=(A=y[x])+"")||a.set(P,i.push(A));return g},g.range=function(y){return arguments.length?(s=ws.call(y),g):s.slice()},g.unknown=function(y){return arguments.length?(f=y,g):f},g.copy=function(){return oa(i,s).unknown(f)},As.apply(g,arguments),g}function l_(){var a=ordinal().unknown(void 0),i=a.domain,s=a.range,f=[0,1],g,y,x=!1,O=0,A=0,P=.5;delete a.unknown;function N(){var Z=i().length,W=f[1]<f[0],mt=f[W-0],Nt=f[1-W];g=(Nt-mt)/Math.max(1,Z-O+A*2),x&&(g=Math.floor(g)),mt+=(Nt-mt-g*(Z-O))*P,y=g*(1-O),x&&(mt=Math.round(mt),y=Math.round(y));var Jt=sequence(Z).map(function(ye){return mt+g*ye});return s(W?Jt.reverse():Jt)}return a.domain=function(Z){return arguments.length?(i(Z),N()):i()},a.range=function(Z){return arguments.length?(f=[+Z[0],+Z[1]],N()):f.slice()},a.rangeRound=function(Z){return f=[+Z[0],+Z[1]],x=!0,N()},a.bandwidth=function(){return y},a.step=function(){return g},a.round=function(Z){return arguments.length?(x=!!Z,N()):x},a.padding=function(Z){return arguments.length?(O=Math.min(1,A=+Z),N()):O},a.paddingInner=function(Z){return arguments.length?(O=Math.min(1,Z),N()):O},a.paddingOuter=function(Z){return arguments.length?(A=+Z,N()):A},a.align=function(Z){return arguments.length?(P=Math.max(0,Math.min(1,Z)),N()):P},a.copy=function(){return l_(i(),f).round(x).paddingInner(O).paddingOuter(A).align(P)},initRange.apply(N(),arguments)}function Gu(a){var i=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return Gu(i())},a}function $u(){return Gu(l_.apply(null,arguments).paddingInner(1))}function pl(a,i,s,f,g){var y=a*a,x=y*a;return((1-3*a+3*y-x)*i+(4-6*y+3*x)*s+(1+3*a+3*y-3*x)*f+x*g)/6}function u_(a){var i=a.length-1;return function(s){var f=s<=0?s=0:s>=1?(s=1,i-1):Math.floor(s*i),g=a[f],y=a[f+1],x=f>0?a[f-1]:2*g-y,O=f<i-1?a[f+2]:2*y-g;return pl((s-f/i)*i,x,g,y,O)}}function f_(a){var i=a.length;return function(s){var f=Math.floor(((s%=1)<0?++s:s)*i),g=a[(f+i-1)%i],y=a[f%i],x=a[(f+1)%i],O=a[(f+2)%i];return pl((s-f/i)*i,g,y,x,O)}}function ih(a){return function(){return a}}function qa(a,i){return function(s){return a+s*i}}function o5(a,i,s){return a=Math.pow(a,s),i=Math.pow(i,s)-a,s=1/s,function(f){return Math.pow(a+f*i,s)}}function d_(a,i){var s=i-a;return s?qa(a,s>180||s<-180?s-360*Math.round(s/360):s):constant(isNaN(a)?i:a)}function oh(a){return(a=+a)==1?gl:function(i,s){return s-i?o5(i,s,a):ih(isNaN(i)?s:i)}}function gl(a,i){var s=i-a;return s?qa(a,s):ih(isNaN(a)?i:a)}var bg=function a(i){var s=oh(i);function f(g,y){var x=s((g=Bt(g)).r,(y=Bt(y)).r),O=s(g.g,y.g),A=s(g.b,y.b),P=gl(g.opacity,y.opacity);return function(N){return g.r=x(N),g.g=O(N),g.b=A(N),g.opacity=P(N),g+""}}return f.gamma=a,f}(1);function h_(a){return function(i){var s=i.length,f=new Array(s),g=new Array(s),y=new Array(s),x,O;for(x=0;x<s;++x)O=Bt(i[x]),f[x]=O.r||0,g[x]=O.g||0,y[x]=O.b||0;return f=a(f),g=a(g),y=a(y),O.opacity=1,function(A){return O.r=f(A),O.g=g(A),O.b=y(A),O+""}}}var ah=h_(u_),p_=h_(f_);function a5(a,i){return(isNumberArray(i)?numberArray:g_)(a,i)}function g_(a,i){var s=i?i.length:0,f=a?Math.min(s,a.length):0,g=new Array(f),y=new Array(s),x;for(x=0;x<f;++x)g[x]=lh(a[x],i[x]);for(;x<s;++x)y[x]=i[x];return function(O){for(x=0;x<f;++x)y[x]=g[x](O);return y}}function s5(a,i){var s=new Date;return a=+a,i=+i,function(f){return s.setTime(a*(1-f)+i*f),s}}function sh(a,i){return a=+a,i=+i,function(s){return a*(1-s)+i*s}}function Zi(a,i){var s={},f={},g;(a===null||typeof a!="object")&&(a={}),(i===null||typeof i!="object")&&(i={});for(g in i)g in a?s[g]=lh(a[g],i[g]):f[g]=i[g];return function(y){for(g in s)f[g]=s[g](y);return f}}var ch=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_g=new RegExp(ch.source,"g");function c5(a){return function(){return a}}function Kr(a){return function(i){return a(i)+""}}function v_(a,i){var s=ch.lastIndex=_g.lastIndex=0,f,g,y,x=-1,O=[],A=[];for(a=a+"",i=i+"";(f=ch.exec(a))&&(g=_g.exec(i));)(y=g.index)>s&&(y=i.slice(s,y),O[x]?O[x]+=y:O[++x]=y),(f=f[0])===(g=g[0])?O[x]?O[x]+=g:O[++x]=g:(O[++x]=null,A.push({i:x,x:sh(f,g)})),s=_g.lastIndex;return s<i.length&&(y=i.slice(s),O[x]?O[x]+=y:O[++x]=y),O.length<2?A[0]?Kr(A[0].x):c5(i):(i=A.length,function(P){for(var N=0,Z;N<i;++N)O[(Z=A[N]).i]=Z.x(P);return O.join("")})}function m_(a,i){i||(i=[]);var s=a?Math.min(i.length,a.length):0,f=i.slice(),g;return function(y){for(g=0;g<s;++g)f[g]=a[g]*(1-y)+i[g]*y;return f}}function l5(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function lh(a,i){var s=typeof i,f;return i==null||s==="boolean"?ih(i):(s==="number"?sh:s==="string"?(f=ti(i))?(i=f,bg):v_:i instanceof ti?bg:i instanceof Date?s5:l5(i)?m_:Array.isArray(i)?g_:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?Zi:sh)(a,i)}function aa(a,i){return a=+a,i=+i,function(s){return Math.round(a*(1-s)+i*s)}}function uc(a){return function(){return a}}function u5(a){return+a}var fc=[0,1];function io(a){return a}function uh(a,i){return(i-=a=+a)?function(s){return(s-a)/i}:uc(isNaN(i)?NaN:.5)}function y_(a){var i=a[0],s=a[a.length-1],f;return i>s&&(f=i,i=s,s=f),function(g){return Math.max(i,Math.min(s,g))}}function Yu(a,i,s){var f=a[0],g=a[1],y=i[0],x=i[1];return g<f?(f=uh(g,f),y=s(x,y)):(f=uh(f,g),y=s(y,x)),function(O){return y(f(O))}}function b_(a,i,s){var f=Math.min(a.length,i.length)-1,g=new Array(f),y=new Array(f),x=-1;for(a[f]<a[0]&&(a=a.slice().reverse(),i=i.slice().reverse());++x<f;)g[x]=uh(a[x],a[x+1]),y[x]=s(i[x],i[x+1]);return function(O){var A=Jd(a,O,1,f)-1;return y[A](g[A](O))}}function fh(a,i){return i.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function xg(){var a=fc,i=fc,s=lh,f,g,y,x=io,O,A,P;function N(){return O=Math.min(a.length,i.length)>2?b_:Yu,A=P=null,Z}function Z(W){return isNaN(W=+W)?y:(A||(A=O(a.map(f),i,s)))(f(x(W)))}return Z.invert=function(W){return x(g((P||(P=O(i,a.map(f),sh)))(W)))},Z.domain=function(W){return arguments.length?(a=Es.call(W,u5),x===io||(x=y_(a)),N()):a.slice()},Z.range=function(W){return arguments.length?(i=ws.call(W),N()):i.slice()},Z.rangeRound=function(W){return i=ws.call(W),s=aa,N()},Z.clamp=function(W){return arguments.length?(x=W?y_(a):io,Z):x!==io},Z.interpolate=function(W){return arguments.length?(s=W,N()):s},Z.unknown=function(W){return arguments.length?(y=W,Z):y},function(W,mt){return f=W,g=mt,N()}}function er(a,i){return xg()(a,i)}var f5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dh(a){if(!(i=f5.exec(a)))throw new Error("invalid format: "+a);var i;return new Sg({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}dh.prototype=Sg.prototype;function Sg(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}Sg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function d5(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function hh(a,i){if((s=(a=i?a.toExponential(i-1):a.toExponential()).indexOf("e"))<0)return null;var s,f=a.slice(0,s);return[f.length>1?f[0]+f.slice(2):f,+a.slice(s+1)]}function vl(a){return a=hh(Math.abs(a)),a?a[1]:NaN}function h5(a,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vl(i)/3)))*3-vl(Math.abs(a)))}function p5(a,i){return function(s,f){for(var g=s.length,y=[],x=0,O=a[0],A=0;g>0&&O>0&&(A+O+1>f&&(O=Math.max(1,f-A)),y.push(s.substring(g-=O,g+O)),!((A+=O+1)>f));)O=a[x=(x+1)%a.length];return y.reverse().join(i)}}function g5(a){return function(i){return i.replace(/[0-9]/g,function(s){return a[+s]})}}function v5(a){t:for(var i=a.length,s=1,f=-1,g;s<i;++s)switch(a[s]){case".":f=g=s;break;case"0":f===0&&(f=s),g=s;break;default:if(!+a[s])break t;f>0&&(f=0);break}return f>0?a.slice(0,f)+a.slice(g+1):a}var __;function ph(a,i){var s=hh(a,i);if(!s)return a+"";var f=s[0],g=s[1],y=g-(__=Math.max(-8,Math.min(8,Math.floor(g/3)))*3)+1,x=f.length;return y===x?f:y>x?f+new Array(y-x+1).join("0"):y>0?f.slice(0,y)+"."+f.slice(y):"0."+new Array(1-y).join("0")+hh(a,Math.max(0,i+y-1))[0]}function gh(a,i){var s=hh(a,i);if(!s)return a+"";var f=s[0],g=s[1];return g<0?"0."+new Array(-g).join("0")+f:f.length>g+1?f.slice(0,g+1)+"."+f.slice(g+1):f+new Array(g-f.length+2).join("0")}var dc={"%":function(a,i){return(a*100).toFixed(i)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:d5,e:function(a,i){return a.toExponential(i)},f:function(a,i){return a.toFixed(i)},g:function(a,i){return a.toPrecision(i)},o:function(a){return Math.round(a).toString(8)},p:function(a,i){return gh(a*100,i)},r:gh,s:ph,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function Ts(a){return a}var hc=Array.prototype.map,pc=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Xu(a){var i=a.grouping===void 0||a.thousands===void 0?Ts:p5(hc.call(a.grouping,Number),a.thousands+""),s=a.currency===void 0?"":a.currency[0]+"",f=a.currency===void 0?"":a.currency[1]+"",g=a.decimal===void 0?".":a.decimal+"",y=a.numerals===void 0?Ts:g5(hc.call(a.numerals,String)),x=a.percent===void 0?"%":a.percent+"",O=a.minus===void 0?"-":a.minus+"",A=a.nan===void 0?"NaN":a.nan+"";function P(Z){Z=dh(Z);var W=Z.fill,mt=Z.align,Nt=Z.sign,Jt=Z.symbol,ye=Z.zero,Ne=Z.width,ze=Z.comma,He=Z.precision,nn=Z.trim,pn=Z.type;pn==="n"?(ze=!0,pn="g"):dc[pn]||(He===void 0&&(He=12),nn=!0,pn="g"),(ye||W==="0"&&mt==="=")&&(ye=!0,W="0",mt="=");var In=Jt==="$"?s:Jt==="#"&&/[boxX]/.test(pn)?"0"+pn.toLowerCase():"",En=Jt==="$"?f:/[%p]/.test(pn)?x:"",Rn=dc[pn],rr=/[defgprs%]/.test(pn);He=He===void 0?6:/[gprs]/.test(pn)?Math.max(1,Math.min(21,He)):Math.max(0,Math.min(20,He));function Tr($n){var cr=In,Lr=En,$o,Dc,Bl;if(pn==="c")Lr=Rn($n)+Lr,$n="";else{$n=+$n;var jl=$n<0||1/$n<0;if($n=isNaN($n)?A:Rn(Math.abs($n),He),nn&&($n=v5($n)),jl&&+$n==0&&Nt!=="+"&&(jl=!1),cr=(jl?Nt==="("?Nt:O:Nt==="-"||Nt==="("?"":Nt)+cr,Lr=(pn==="s"?pc[8+__/3]:"")+Lr+(jl&&Nt==="("?")":""),rr){for($o=-1,Dc=$n.length;++$o<Dc;)if(Bl=$n.charCodeAt($o),48>Bl||Bl>57){Lr=(Bl===46?g+$n.slice($o+1):$n.slice($o))+Lr,$n=$n.slice(0,$o);break}}}ze&&!ye&&($n=i($n,1/0));var zl=cr.length+$n.length+Lr.length,Yo=zl<Ne?new Array(Ne-zl+1).join(W):"";switch(ze&&ye&&($n=i(Yo+$n,Yo.length?Ne-Lr.length:1/0),Yo=""),mt){case"<":$n=cr+$n+Lr+Yo;break;case"=":$n=cr+Yo+$n+Lr;break;case"^":$n=Yo.slice(0,zl=Yo.length>>1)+cr+$n+Lr+Yo.slice(zl);break;default:$n=Yo+cr+$n+Lr;break}return y($n)}return Tr.toString=function(){return Z+""},Tr}function N(Z,W){var mt=P((Z=dh(Z),Z.type="f",Z)),Nt=Math.max(-8,Math.min(8,Math.floor(vl(W)/3)))*3,Jt=Math.pow(10,-Nt),ye=pc[8+Nt/3];return function(Ne){return mt(Jt*Ne)+ye}}return{format:P,formatPrefix:N}}var wo,Og,x_;m5({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function m5(a){return wo=Xu(a),Og=wo.format,x_=wo.formatPrefix,wo}function y5(a,i){return a=Math.abs(a),i=Math.abs(i)-a,Math.max(0,vl(i)-vl(a))+1}function b5(a){return Math.max(0,-vl(Math.abs(a)))}function _5(a,i,s,f){var g=eh(a,i,s),y;switch(f=dh(f==null?",f":f),f.type){case"s":{var x=Math.max(Math.abs(a),Math.abs(i));return f.precision==null&&!isNaN(y=h5(g,x))&&(f.precision=y),x_(f,x)}case"":case"e":case"g":case"p":case"r":{f.precision==null&&!isNaN(y=y5(g,Math.max(Math.abs(a),Math.abs(i))))&&(f.precision=y-(f.type==="e"));break}case"f":case"%":{f.precision==null&&!isNaN(y=b5(g))&&(f.precision=y-(f.type==="%")*2);break}}return Og(f)}function qu(a){var i=a.domain;return a.ticks=function(s){var f=i();return th(f[0],f[f.length-1],s==null?10:s)},a.tickFormat=function(s,f){var g=i();return _5(g[0],g[g.length-1],s==null?10:s,f)},a.nice=function(s){s==null&&(s=10);var f=i(),g=0,y=f.length-1,x=f[g],O=f[y],A;return O<x&&(A=x,x=O,O=A,A=g,g=y,y=A),A=sc(x,O,s),A>0?(x=Math.floor(x/A)*A,O=Math.ceil(O/A)*A,A=sc(x,O,s)):A<0&&(x=Math.ceil(x*A)/A,O=Math.floor(O*A)/A,A=sc(x,O,s)),A>0?(f[g]=Math.floor(x/A)*A,f[y]=Math.ceil(O/A)*A,i(f)):A<0&&(f[g]=Math.ceil(x*A)/A,f[y]=Math.floor(O*A)/A,i(f)),a},a}function Eg(){var a=er(io,io);return a.copy=function(){return fh(a,Eg())},As.apply(a,arguments),qu(a)}function S_(a){var i;function s(f){return isNaN(f=+f)?i:f}return s.invert=s,s.domain=s.range=function(f){return arguments.length?(a=map.call(f,number),s):a.slice()},s.unknown=function(f){return arguments.length?(i=f,s):i},s.copy=function(){return S_(a).unknown(i)},a=arguments.length?map.call(a,number):[0,1],linearish(s)}function O_(a,i){a=a.slice();var s=0,f=a.length-1,g=a[s],y=a[f],x;return y<g&&(x=s,s=f,f=x,x=g,g=y,y=x),a[s]=i.floor(g),a[f]=i.ceil(y),a}function E_(a){return Math.log(a)}function wg(a){return Math.exp(a)}function Ag(a){return-Math.log(-a)}function w_(a){return-Math.exp(-a)}function vh(a){return isFinite(a)?+("1e"+a):a<0?0:a}function A_(a){return a===10?vh:a===Math.E?Math.exp:function(i){return Math.pow(a,i)}}function mh(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(i){return Math.log(i)/a})}function Xi(a){return function(i){return-a(-i)}}function T_(a){var i=a(E_,wg),s=i.domain,f=10,g,y;function x(){return g=mh(f),y=A_(f),s()[0]<0?(g=Xi(g),y=Xi(y),a(Ag,w_)):a(E_,wg),i}return i.base=function(O){return arguments.length?(f=+O,x()):f},i.domain=function(O){return arguments.length?(s(O),x()):s()},i.ticks=function(O){var A=s(),P=A[0],N=A[A.length-1],Z;(Z=N<P)&&(W=P,P=N,N=W);var W=g(P),mt=g(N),Nt,Jt,ye,Ne=O==null?10:+O,ze=[];if(!(f%1)&&mt-W<Ne){if(W=Math.round(W)-1,mt=Math.round(mt)+1,P>0){for(;W<mt;++W)for(Jt=1,Nt=y(W);Jt<f;++Jt)if(ye=Nt*Jt,!(ye<P)){if(ye>N)break;ze.push(ye)}}else for(;W<mt;++W)for(Jt=f-1,Nt=y(W);Jt>=1;--Jt)if(ye=Nt*Jt,!(ye<P)){if(ye>N)break;ze.push(ye)}}else ze=th(W,mt,Math.min(mt-W,Ne)).map(y);return Z?ze.reverse():ze},i.tickFormat=function(O,A){if(A==null&&(A=f===10?".0e":","),typeof A!="function"&&(A=Og(A)),O===1/0)return A;O==null&&(O=10);var P=Math.max(1,f*O/i.ticks().length);return function(N){var Z=N/y(Math.round(g(N)));return Z*f<f-.5&&(Z*=f),Z<=P?A(N):""}},i.nice=function(){return s(O_(s(),{floor:function(O){return y(Math.floor(g(O)))},ceil:function(O){return y(Math.ceil(g(O)))}}))},i}function C_(){var a=T_(xg()).domain([1,10]);return a.copy=function(){return fh(a,C_()).base(a.base())},As.apply(a,arguments),a}function Tg(a){return function(i){return Math.sign(i)*Math.log1p(Math.abs(i/a))}}function Ku(a){return function(i){return Math.sign(i)*Math.expm1(Math.abs(i))*a}}function gc(a){var i=1,s=a(Tg(i),Ku(i));return s.constant=function(f){return arguments.length?a(Tg(i=+f),Ku(i)):i},linearish(s)}function vc(){var a=gc(transformer());return a.copy=function(){return copy(a,vc()).constant(a.constant())},initRange.apply(a,arguments)}function Cg(a){return function(i){return i<0?-Math.pow(-i,a):Math.pow(i,a)}}function M_(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function x5(a){return a<0?-a*a:a*a}function sa(a){var i=a(io,io),s=1;function f(){return s===1?a(io,io):s===.5?a(M_,x5):a(Cg(s),Cg(1/s))}return i.exponent=function(g){return arguments.length?(s=+g,f()):s},qu(i)}function yh(){var a=sa(xg());return a.copy=function(){return fh(a,yh()).exponent(a.exponent())},As.apply(a,arguments),a}function Mg(){return yh.apply(null,arguments).exponent(.5)}function bh(){var a=[],i=[],s=[],f;function g(){var x=0,O=Math.max(1,i.length);for(s=new Array(O-1);++x<O;)s[x-1]=n5(a,x/O);return y}function y(x){return isNaN(x=+x)?f:i[Jd(s,x)]}return y.invertExtent=function(x){var O=i.indexOf(x);return O<0?[NaN,NaN]:[O>0?s[O-1]:a[0],O<s.length?s[O]:a[a.length-1]]},y.domain=function(x){if(!arguments.length)return a.slice();a=[];for(var O=0,A=x.length,P;O<A;++O)P=x[O],P!=null&&!isNaN(P=+P)&&a.push(P);return a.sort(Ui),g()},y.range=function(x){return arguments.length?(i=ws.call(x),g()):i.slice()},y.unknown=function(x){return arguments.length?(f=x,y):f},y.quantiles=function(){return s.slice()},y.copy=function(){return bh().domain(a).range(i).unknown(f)},As.apply(y,arguments)}function Lg(){var a=0,i=1,s=1,f=[.5],g=[0,1],y;function x(A){return A<=A?g[Jd(f,A,0,s)]:y}function O(){var A=-1;for(f=new Array(s);++A<s;)f[A]=((A+1)*i-(A-s)*a)/(s+1);return x}return x.domain=function(A){return arguments.length?(a=+A[0],i=+A[1],O()):[a,i]},x.range=function(A){return arguments.length?(s=(g=ws.call(A)).length-1,O()):g.slice()},x.invertExtent=function(A){var P=g.indexOf(A);return P<0?[NaN,NaN]:P<1?[a,f[0]]:P>=s?[f[s-1],i]:[f[P-1],f[P]]},x.unknown=function(A){return arguments.length&&(y=A),x},x.thresholds=function(){return f.slice()},x.copy=function(){return Lg().domain([a,i]).range(g).unknown(y)},As.apply(qu(x),arguments)}function L_(){var a=[.5],i=[0,1],s,f=1;function g(y){return y<=y?i[Jd(a,y,0,f)]:s}return g.domain=function(y){return arguments.length?(a=ws.call(y),f=Math.min(a.length,i.length-1),g):a.slice()},g.range=function(y){return arguments.length?(i=ws.call(y),f=Math.min(a.length,i.length-1),g):i.slice()},g.invertExtent=function(y){var x=i.indexOf(y);return[a[x-1],a[x]]},g.unknown=function(y){return arguments.length?(s=y,g):s},g.copy=function(){return L_().domain(a).range(i).unknown(s)},As.apply(g,arguments)}var Pg=new Date,Qu=new Date;function Uo(a,i,s,f){function g(y){return a(y=arguments.length===0?new Date:new Date(+y)),y}return g.floor=function(y){return a(y=new Date(+y)),y},g.ceil=function(y){return a(y=new Date(y-1)),i(y,1),a(y),y},g.round=function(y){var x=g(y),O=g.ceil(y);return y-x<O-y?x:O},g.offset=function(y,x){return i(y=new Date(+y),x==null?1:Math.floor(x)),y},g.range=function(y,x,O){var A=[],P;if(y=g.ceil(y),O=O==null?1:Math.floor(O),!(y<x)||!(O>0))return A;do A.push(P=new Date(+y)),i(y,O),a(y);while(P<y&&y<x);return A},g.filter=function(y){return Uo(function(x){if(x>=x)for(;a(x),!y(x);)x.setTime(x-1)},function(x,O){if(x>=x)if(O<0)for(;++O<=0;)for(;i(x,-1),!y(x););else for(;--O>=0;)for(;i(x,1),!y(x););})},s&&(g.count=function(y,x){return Pg.setTime(+y),Qu.setTime(+x),a(Pg),a(Qu),Math.floor(s(Pg,Qu))},g.every=function(y){return y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?g.filter(f?function(x){return f(x)%y===0}:function(x){return g.count(0,x)%y===0}):g}),g}var Ig=Uo(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,i){a.setFullYear(a.getFullYear()+i)},function(a,i){return i.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});Ig.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:Uo(function(i){i.setFullYear(Math.floor(i.getFullYear()/a)*a),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,s){i.setFullYear(i.getFullYear()+s*a)})};var S5=Ig,f6=Ig.range,mc=Uo(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,i){a.setMonth(a.getMonth()+i)},function(a,i){return i.getMonth()-a.getMonth()+(i.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),d6=mc,O5=mc.range,_h=1e3,xh=6e4,Hr=36e5,P_=864e5,E5=6048e5;function Cs(a){return Uo(function(i){i.setDate(i.getDate()-(i.getDay()+7-a)%7),i.setHours(0,0,0,0)},function(i,s){i.setDate(i.getDate()+s*7)},function(i,s){return(s-i-(s.getTimezoneOffset()-i.getTimezoneOffset())*xh)/E5})}var I_=Cs(0),R_=Cs(1),w5=Cs(2),k_=Cs(3),A5=Cs(4),D_=Cs(5),T5=Cs(6),C5=I_.range,h6=R_.range,M5=w5.range,p6=k_.range,L5=A5.range,g6=D_.range,P5=T5.range,F_=Uo(function(a){a.setHours(0,0,0,0)},function(a,i){a.setDate(a.getDate()+i)},function(a,i){return(i-a-(i.getTimezoneOffset()-a.getTimezoneOffset())*xh)/P_},function(a){return a.getDate()-1}),N_=F_,v6=F_.range,Rg=Uo(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*_h-a.getMinutes()*xh)},function(a,i){a.setTime(+a+i*Hr)},function(a,i){return(i-a)/Hr},function(a){return a.getHours()}),I5=Rg,R5=Rg.range,B_=Uo(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*_h)},function(a,i){a.setTime(+a+i*xh)},function(a,i){return(i-a)/xh},function(a){return a.getMinutes()}),j_=B_,m6=B_.range,kg=Uo(function(a){a.setTime(a-a.getMilliseconds())},function(a,i){a.setTime(+a+i*_h)},function(a,i){return(i-a)/_h},function(a){return a.getUTCSeconds()}),k5=kg,D5=kg.range,Sh=Uo(function(){},function(a,i){a.setTime(+a+i)},function(a,i){return i-a});Sh.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?Uo(function(i){i.setTime(Math.floor(i/a)*a)},function(i,s){i.setTime(+i+s*a)},function(i,s){return(s-i)/a}):Sh};var z_=Sh,y6=Sh.range,Oh=new Date,Dg=new Date;function Ta(a,i,s,f){function g(y){return a(y=arguments.length===0?new Date:new Date(+y)),y}return g.floor=function(y){return a(y=new Date(+y)),y},g.ceil=function(y){return a(y=new Date(y-1)),i(y,1),a(y),y},g.round=function(y){var x=g(y),O=g.ceil(y);return y-x<O-y?x:O},g.offset=function(y,x){return i(y=new Date(+y),x==null?1:Math.floor(x)),y},g.range=function(y,x,O){var A=[],P;if(y=g.ceil(y),O=O==null?1:Math.floor(O),!(y<x)||!(O>0))return A;do A.push(P=new Date(+y)),i(y,O),a(y);while(P<y&&y<x);return A},g.filter=function(y){return Ta(function(x){if(x>=x)for(;a(x),!y(x);)x.setTime(x-1)},function(x,O){if(x>=x)if(O<0)for(;++O<=0;)for(;i(x,-1),!y(x););else for(;--O>=0;)for(;i(x,1),!y(x););})},s&&(g.count=function(y,x){return Oh.setTime(+y),Dg.setTime(+x),a(Oh),a(Dg),Math.floor(s(Oh,Dg))},g.every=function(y){return y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?g.filter(f?function(x){return f(x)%y===0}:function(x){return g.count(0,x)%y===0}):g}),g}var b6=1e3,Fg=6e4,_6=36e5,Ng=864e5,U_=6048e5;function Ms(a){return Ta(function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-a)%7),i.setUTCHours(0,0,0,0)},function(i,s){i.setUTCDate(i.getUTCDate()+s*7)},function(i,s){return(s-i)/U_})}var Z_=Ms(0),Ju=Ms(1),F5=Ms(2),H_=Ms(3),ml=Ms(4),V_=Ms(5),N5=Ms(6),B5=Z_.range,x6=Ju.range,j5=F5.range,S6=H_.range,z5=ml.range,O6=V_.range,E6=N5.range,tf=Ta(function(a){a.setUTCHours(0,0,0,0)},function(a,i){a.setUTCDate(a.getUTCDate()+i)},function(a,i){return(i-a)/Ng},function(a){return a.getUTCDate()-1}),Eh=tf,ef=tf.range;function Ao(a){return Ta(function(i){i.setDate(i.getDate()-(i.getDay()+7-a)%7),i.setHours(0,0,0,0)},function(i,s){i.setDate(i.getDate()+s*7)},function(i,s){return(s-i-(s.getTimezoneOffset()-i.getTimezoneOffset())*Fg)/U_})}var yc=Ao(0),Ka=Ao(1),nf=Ao(2),Ca=Ao(3),yl=Ao(4),U5=Ao(5),Z5=Ao(6),w6=yc.range,A6=Ka.range,T6=nf.range,C6=Ca.range,H5=yl.range,V5=U5.range,M6=Z5.range,W_=Ta(function(a){a.setHours(0,0,0,0)},function(a,i){a.setDate(a.getDate()+i)},function(a,i){return(i-a-(i.getTimezoneOffset()-a.getTimezoneOffset())*Fg)/Ng},function(a){return a.getDate()-1}),Bg=W_,G_=W_.range,wh=Ta(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,i){a.setFullYear(a.getFullYear()+i)},function(a,i){return i.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});wh.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:Ta(function(i){i.setFullYear(Math.floor(i.getFullYear()/a)*a),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,s){i.setFullYear(i.getFullYear()+s*a)})};var Ls=wh,W5=wh.range,Ah=Ta(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,i){a.setUTCFullYear(a.getUTCFullYear()+i)},function(a,i){return i.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});Ah.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:Ta(function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/a)*a),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,s){i.setUTCFullYear(i.getUTCFullYear()+s*a)})};var wi=Ah,G5=Ah.range;function jg(a){if(0<=a.y&&a.y<100){var i=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return i.setFullYear(a.y),i}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Th(a){if(0<=a.y&&a.y<100){var i=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return i.setUTCFullYear(a.y),i}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function Ps(a,i,s){return{y:a,m:i,d:s,H:0,M:0,S:0,L:0}}function bc(a){var i=a.dateTime,s=a.date,f=a.time,g=a.periods,y=a.days,x=a.shortDays,O=a.months,A=a.shortMonths,P=Rs(g),N=_c(g),Z=Rs(y),W=_c(y),mt=Rs(x),Nt=_c(x),Jt=Rs(O),ye=_c(O),Ne=Rs(A),ze=_c(A),He={a:jl,A:zl,b:Yo,B:B3,c:null,d:Vg,e:Vg,f:xc,g:rT,G:oT,H:e2,I:n2,j:Q5,L:Mh,m:r2,M:L6,p:j3,q:z3,Q:p2,s:g2,S:Wg,u:J5,U:tT,V:Lh,w:eT,W:Ph,x:null,X:null,y:nT,Y:iT,Z:Ih,"%":h2},nn={a:rm,A:U3,b:Z3,B:H3,c:null,d:o2,e:o2,f:lT,g:vT,G:d2,H:aT,I:sT,j:cT,L:a2,m:uT,M:fT,p:V3,q:W3,Q:p2,s:g2,S:dT,u:s2,U:c2,V:hT,w:u2,W:pT,x:null,X:null,y:gT,Y:f2,Z:mT,"%":h2},pn={a:Tr,A:$n,b:cr,B:Lr,c:$o,d:J_,e:J_,f:Zg,g:bl,G:rf,H:Ds,I:Ds,j:ks,L:t2,m:Q_,M:q5,p:rr,q:K_,Q:Ch,s:of,S:K5,u:X5,U:X_,V:zg,w:Y5,W:Ug,x:Dc,X:Bl,y:bl,Y:rf,Z:q_,"%":Hg};He.x=In(s,He),He.X=In(f,He),He.c=In(i,He),nn.x=In(s,nn),nn.X=In(f,nn),nn.c=In(i,nn);function In(zn,gr){return function(xr){var On=[],oo=-1,$r=0,bo=zn.length,_o,Zs,G3;for(xr instanceof Date||(xr=new Date(+xr));++oo<bo;)zn.charCodeAt(oo)===37&&(On.push(zn.slice($r,oo)),(Zs=Is[_o=zn.charAt(++oo)])!=null?_o=zn.charAt(++oo):Zs=_o==="e"?" ":"0",(G3=gr[_o])&&(_o=G3(xr,Zs)),On.push(_o),$r=oo+1);return On.push(zn.slice($r,oo)),On.join("")}}function En(zn,gr){return function(xr){var On=Ps(1900,void 0,1),oo=Rn(On,zn,xr+="",0),$r,bo;if(oo!=xr.length)return null;if("Q"in On)return new Date(On.Q);if("s"in On)return new Date(On.s*1e3+("L"in On?On.L:0));if(gr&&!("Z"in On)&&(On.Z=0),"p"in On&&(On.H=On.H%12+On.p*12),On.m===void 0&&(On.m="q"in On?On.q:0),"V"in On){if(On.V<1||On.V>53)return null;"w"in On||(On.w=1),"Z"in On?($r=Th(Ps(On.y,0,1)),bo=$r.getUTCDay(),$r=bo>4||bo===0?Ju.ceil($r):Ju($r),$r=Eh.offset($r,(On.V-1)*7),On.y=$r.getUTCFullYear(),On.m=$r.getUTCMonth(),On.d=$r.getUTCDate()+(On.w+6)%7):($r=jg(Ps(On.y,0,1)),bo=$r.getDay(),$r=bo>4||bo===0?Ka.ceil($r):Ka($r),$r=Bg.offset($r,(On.V-1)*7),On.y=$r.getFullYear(),On.m=$r.getMonth(),On.d=$r.getDate()+(On.w+6)%7)}else("W"in On||"U"in On)&&("w"in On||(On.w="u"in On?On.u%7:"W"in On?1:0),bo="Z"in On?Th(Ps(On.y,0,1)).getUTCDay():jg(Ps(On.y,0,1)).getDay(),On.m=0,On.d="W"in On?(On.w+6)%7+On.W*7-(bo+5)%7:On.w+On.U*7-(bo+6)%7);return"Z"in On?(On.H+=On.Z/100|0,On.M+=On.Z%100,Th(On)):jg(On)}}function Rn(zn,gr,xr,On){for(var oo=0,$r=gr.length,bo=xr.length,_o,Zs;oo<$r;){if(On>=bo)return-1;if(_o=gr.charCodeAt(oo++),_o===37){if(_o=gr.charAt(oo++),Zs=pn[_o in Is?gr.charAt(oo++):_o],!Zs||(On=Zs(zn,xr,On))<0)return-1}else if(_o!=xr.charCodeAt(On++))return-1}return On}function rr(zn,gr,xr){var On=P.exec(gr.slice(xr));return On?(zn.p=N[On[0].toLowerCase()],xr+On[0].length):-1}function Tr(zn,gr,xr){var On=mt.exec(gr.slice(xr));return On?(zn.w=Nt[On[0].toLowerCase()],xr+On[0].length):-1}function $n(zn,gr,xr){var On=Z.exec(gr.slice(xr));return On?(zn.w=W[On[0].toLowerCase()],xr+On[0].length):-1}function cr(zn,gr,xr){var On=Ne.exec(gr.slice(xr));return On?(zn.m=ze[On[0].toLowerCase()],xr+On[0].length):-1}function Lr(zn,gr,xr){var On=Jt.exec(gr.slice(xr));return On?(zn.m=ye[On[0].toLowerCase()],xr+On[0].length):-1}function $o(zn,gr,xr){return Rn(zn,i,gr,xr)}function Dc(zn,gr,xr){return Rn(zn,s,gr,xr)}function Bl(zn,gr,xr){return Rn(zn,f,gr,xr)}function jl(zn){return x[zn.getDay()]}function zl(zn){return y[zn.getDay()]}function Yo(zn){return A[zn.getMonth()]}function B3(zn){return O[zn.getMonth()]}function j3(zn){return g[+(zn.getHours()>=12)]}function z3(zn){return 1+~~(zn.getMonth()/3)}function rm(zn){return x[zn.getUTCDay()]}function U3(zn){return y[zn.getUTCDay()]}function Z3(zn){return A[zn.getUTCMonth()]}function H3(zn){return O[zn.getUTCMonth()]}function V3(zn){return g[+(zn.getUTCHours()>=12)]}function W3(zn){return 1+~~(zn.getUTCMonth()/3)}return{format:function(zn){var gr=In(zn+="",He);return gr.toString=function(){return zn},gr},parse:function(zn){var gr=En(zn+="",!1);return gr.toString=function(){return zn},gr},utcFormat:function(zn){var gr=In(zn+="",nn);return gr.toString=function(){return zn},gr},utcParse:function(zn){var gr=En(zn+="",!0);return gr.toString=function(){return zn},gr}}}var Is={"-":"",_:" ",0:"0"},Pi=/^\s*\d+/,$_=/^%/,$5=/[\\^$*+?|[\]().{}]/g;function nr(a,i,s){var f=a<0?"-":"",g=(f?-a:a)+"",y=g.length;return f+(y<s?new Array(s-y+1).join(i)+g:g)}function Y_(a){return a.replace($5,"\\$&")}function Rs(a){return new RegExp("^(?:"+a.map(Y_).join("|")+")","i")}function _c(a){for(var i={},s=-1,f=a.length;++s<f;)i[a[s].toLowerCase()]=s;return i}function Y5(a,i,s){var f=Pi.exec(i.slice(s,s+1));return f?(a.w=+f[0],s+f[0].length):-1}function X5(a,i,s){var f=Pi.exec(i.slice(s,s+1));return f?(a.u=+f[0],s+f[0].length):-1}function X_(a,i,s){var f=Pi.exec(i.slice(s,s+2));return f?(a.U=+f[0],s+f[0].length):-1}function zg(a,i,s){var f=Pi.exec(i.slice(s,s+2));return f?(a.V=+f[0],s+f[0].length):-1}function Ug(a,i,s){var f=Pi.exec(i.slice(s,s+2));return f?(a.W=+f[0],s+f[0].length):-1}function rf(a,i,s){var f=Pi.exec(i.slice(s,s+4));return f?(a.y=+f[0],s+f[0].length):-1}function bl(a,i,s){var f=Pi.exec(i.slice(s,s+2));return f?(a.y=+f[0]+(+f[0]>68?1900:2e3),s+f[0].length):-1}function q_(a,i,s){var f=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(s,s+6));return f?(a.Z=f[1]?0:-(f[2]+(f[3]||"00")),s+f[0].length):-1}function K_(a,i,s){var f=Pi.exec(i.slice(s,s+1));return f?(a.q=f[0]*3-3,s+f[0].length):-1}function Q_(a,i,s){var f=Pi.exec(i.slice(s,s+2));return f?(a.m=f[0]-1,s+f[0].length):-1}function J_(a,i,s){var f=Pi.exec(i.slice(s,s+2));return f?(a.d=+f[0],s+f[0].length):-1}function ks(a,i,s){var f=Pi.exec(i.slice(s,s+3));return f?(a.m=0,a.d=+f[0],s+f[0].length):-1}function Ds(a,i,s){var f=Pi.exec(i.slice(s,s+2));return f?(a.H=+f[0],s+f[0].length):-1}function q5(a,i,s){var f=Pi.exec(i.slice(s,s+2));return f?(a.M=+f[0],s+f[0].length):-1}function K5(a,i,s){var f=Pi.exec(i.slice(s,s+2));return f?(a.S=+f[0],s+f[0].length):-1}function t2(a,i,s){var f=Pi.exec(i.slice(s,s+3));return f?(a.L=+f[0],s+f[0].length):-1}function Zg(a,i,s){var f=Pi.exec(i.slice(s,s+6));return f?(a.L=Math.floor(f[0]/1e3),s+f[0].length):-1}function Hg(a,i,s){var f=$_.exec(i.slice(s,s+1));return f?s+f[0].length:-1}function Ch(a,i,s){var f=Pi.exec(i.slice(s));return f?(a.Q=+f[0],s+f[0].length):-1}function of(a,i,s){var f=Pi.exec(i.slice(s));return f?(a.s=+f[0],s+f[0].length):-1}function Vg(a,i){return nr(a.getDate(),i,2)}function e2(a,i){return nr(a.getHours(),i,2)}function n2(a,i){return nr(a.getHours()%12||12,i,2)}function Q5(a,i){return nr(1+Bg.count(Ls(a),a),i,3)}function Mh(a,i){return nr(a.getMilliseconds(),i,3)}function xc(a,i){return Mh(a,i)+"000"}function r2(a,i){return nr(a.getMonth()+1,i,2)}function L6(a,i){return nr(a.getMinutes(),i,2)}function Wg(a,i){return nr(a.getSeconds(),i,2)}function J5(a){var i=a.getDay();return i===0?7:i}function tT(a,i){return nr(yc.count(Ls(a)-1,a),i,2)}function i2(a){var i=a.getDay();return i>=4||i===0?yl(a):yl.ceil(a)}function Lh(a,i){return a=i2(a),nr(yl.count(Ls(a),a)+(Ls(a).getDay()===4),i,2)}function eT(a){return a.getDay()}function Ph(a,i){return nr(Ka.count(Ls(a)-1,a),i,2)}function nT(a,i){return nr(a.getFullYear()%100,i,2)}function rT(a,i){return a=i2(a),nr(a.getFullYear()%100,i,2)}function iT(a,i){return nr(a.getFullYear()%1e4,i,4)}function oT(a,i){var s=a.getDay();return a=s>=4||s===0?yl(a):yl.ceil(a),nr(a.getFullYear()%1e4,i,4)}function Ih(a){var i=a.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+nr(i/60|0,"0",2)+nr(i%60,"0",2)}function o2(a,i){return nr(a.getUTCDate(),i,2)}function aT(a,i){return nr(a.getUTCHours(),i,2)}function sT(a,i){return nr(a.getUTCHours()%12||12,i,2)}function cT(a,i){return nr(1+Eh.count(wi(a),a),i,3)}function a2(a,i){return nr(a.getUTCMilliseconds(),i,3)}function lT(a,i){return a2(a,i)+"000"}function uT(a,i){return nr(a.getUTCMonth()+1,i,2)}function fT(a,i){return nr(a.getUTCMinutes(),i,2)}function dT(a,i){return nr(a.getUTCSeconds(),i,2)}function s2(a){var i=a.getUTCDay();return i===0?7:i}function c2(a,i){return nr(Z_.count(wi(a)-1,a),i,2)}function l2(a){var i=a.getUTCDay();return i>=4||i===0?ml(a):ml.ceil(a)}function hT(a,i){return a=l2(a),nr(ml.count(wi(a),a)+(wi(a).getUTCDay()===4),i,2)}function u2(a){return a.getUTCDay()}function pT(a,i){return nr(Ju.count(wi(a)-1,a),i,2)}function gT(a,i){return nr(a.getUTCFullYear()%100,i,2)}function vT(a,i){return a=l2(a),nr(a.getUTCFullYear()%100,i,2)}function f2(a,i){return nr(a.getUTCFullYear()%1e4,i,4)}function d2(a,i){var s=a.getUTCDay();return a=s>=4||s===0?ml(a):ml.ceil(a),nr(a.getUTCFullYear()%1e4,i,4)}function mT(){return"+0000"}function h2(){return"%"}function p2(a){return+a}function g2(a){return Math.floor(+a/1e3)}var Sc,v2,yT,bT,_T;xT({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xT(a){return Sc=bc(a),v2=Sc.format,yT=Sc.parse,bT=Sc.utcFormat,_T=Sc.utcParse,Sc}var af=1e3,Oc=af*60,_l=Oc*60,xl=_l*24,ST=xl*7,m2=xl*30,Gg=xl*365;function OT(a){return new Date(a)}function ET(a){return a instanceof Date?+a:+new Date(+a)}function $g(a,i,s,f,g,y,x,O,A){var P=er(io,io),N=P.invert,Z=P.domain,W=A(".%L"),mt=A(":%S"),Nt=A("%I:%M"),Jt=A("%I %p"),ye=A("%a %d"),Ne=A("%b %d"),ze=A("%B"),He=A("%Y"),nn=[[x,1,af],[x,5,5*af],[x,15,15*af],[x,30,30*af],[y,1,Oc],[y,5,5*Oc],[y,15,15*Oc],[y,30,30*Oc],[g,1,_l],[g,3,3*_l],[g,6,6*_l],[g,12,12*_l],[f,1,xl],[f,2,2*xl],[s,1,ST],[i,1,m2],[i,3,3*m2],[a,1,Gg]];function pn(En){return(x(En)<En?W:y(En)<En?mt:g(En)<En?Nt:f(En)<En?Jt:i(En)<En?s(En)<En?ye:Ne:a(En)<En?ze:He)(En)}function In(En,Rn,rr,Tr){if(En==null&&(En=10),typeof En=="number"){var $n=Math.abs(rr-Rn)/En,cr=ul(function(Lr){return Lr[2]}).right(nn,$n);cr===nn.length?(Tr=eh(Rn/Gg,rr/Gg,En),En=a):cr?(cr=nn[$n/nn[cr-1][2]<nn[cr][2]/$n?cr-1:cr],Tr=cr[1],En=cr[0]):(Tr=Math.max(eh(Rn,rr,En),1),En=O)}return Tr==null?En:En.every(Tr)}return P.invert=function(En){return new Date(N(En))},P.domain=function(En){return arguments.length?Z(Es.call(En,ET)):Z().map(OT)},P.ticks=function(En,Rn){var rr=Z(),Tr=rr[0],$n=rr[rr.length-1],cr=$n<Tr,Lr;return cr&&(Lr=Tr,Tr=$n,$n=Lr),Lr=In(En,Tr,$n,Rn),Lr=Lr?Lr.range(Tr,$n+1):[],cr?Lr.reverse():Lr},P.tickFormat=function(En,Rn){return Rn==null?pn:A(Rn)},P.nice=function(En,Rn){var rr=Z();return(En=In(En,rr[0],rr[rr.length-1],Rn))?Z(O_(rr,En)):P},P.copy=function(){return fh(P,$g(a,i,s,f,g,y,x,O,A))},P}function y2(){return As.apply($g(S5,d6,I_,N_,I5,j_,k5,z_,v2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function P6(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Sl(){var a=0,i=1,s,f,g,y,x=io,O=!1,A;function P(N){return isNaN(N=+N)?A:x(g===0?.5:(N=(y(N)-s)*g,O?Math.max(0,Math.min(1,N)):N))}return P.domain=function(N){return arguments.length?(s=y(a=+N[0]),f=y(i=+N[1]),g=s===f?0:1/(f-s),P):[a,i]},P.clamp=function(N){return arguments.length?(O=!!N,P):O},P.interpolator=function(N){return arguments.length?(x=N,P):x},P.unknown=function(N){return arguments.length?(A=N,P):A},function(N){return y=N,s=N(a),f=N(i),g=s===f?0:1/(f-s),P}}function sf(a,i){return i.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function b2(){var a=qu(Sl()(io));return a.copy=function(){return sf(a,b2())},mg.apply(a,arguments)}function wT(){var a=loggish(Sl()).domain([1,10]);return a.copy=function(){return sf(a,wT()).base(a.base())},initInterpolator.apply(a,arguments)}function AT(){var a=symlogish(Sl());return a.copy=function(){return sf(a,AT()).constant(a.constant())},initInterpolator.apply(a,arguments)}function _2(){var a=powish(Sl());return a.copy=function(){return sf(a,_2()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function I6(){return _2.apply(null,arguments).exponent(.5)}function TT(){var a=[],i=identity;function s(f){if(!isNaN(f=+f))return i((bisect(a,f)-1)/(a.length-1))}return s.domain=function(f){if(!arguments.length)return a.slice();a=[];for(var g=0,y=f.length,x;g<y;++g)x=f[g],x!=null&&!isNaN(x=+x)&&a.push(x);return a.sort(ascending),s},s.interpolator=function(f){return arguments.length?(i=f,s):i},s.copy=function(){return TT(i).domain(a)},initInterpolator.apply(s,arguments)}function ca(){var a=0,i=.5,s=1,f,g,y,x,O,A=io,P,N=!1,Z;function W(mt){return isNaN(mt=+mt)?Z:(mt=.5+((mt=+P(mt))-g)*(mt<g?x:O),A(N?Math.max(0,Math.min(1,mt)):mt))}return W.domain=function(mt){return arguments.length?(f=P(a=+mt[0]),g=P(i=+mt[1]),y=P(s=+mt[2]),x=f===g?0:.5/(g-f),O=g===y?0:.5/(y-g),W):[a,i,s]},W.clamp=function(mt){return arguments.length?(N=!!mt,W):N},W.interpolator=function(mt){return arguments.length?(A=mt,W):A},W.unknown=function(mt){return arguments.length?(Z=mt,W):Z},function(mt){return P=mt,f=mt(a),g=mt(i),y=mt(s),x=f===g?0:.5/(g-f),O=g===y?0:.5/(y-g),W}}function x2(){var a=qu(ca()(io));return a.copy=function(){return sf(a,x2())},mg.apply(a,arguments)}function S2(){var a=loggish(ca()).domain([.1,1,10]);return a.copy=function(){return copy(a,S2()).base(a.base())},initInterpolator.apply(a,arguments)}function CT(){var a=symlogish(ca());return a.copy=function(){return copy(a,CT()).constant(a.constant())},initInterpolator.apply(a,arguments)}function MT(){var a=powish(ca());return a.copy=function(){return copy(a,MT()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function LT(){return MT.apply(null,arguments).exponent(.5)}function O2(a){let i,s=[];function f(g){return g==null?i:g}return f.invert=f,f.domain=f.range=g=>g?(s=g,g):s,f.unknown=g=>g?(i=g,g):i,f.copy=()=>O2(a).unknown(i),f}const{isNil:Yg,isString:PT,uniq:IT}=ii,Xg=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,RT={[br.LINEAR]:Eg,[br.POWER]:yh,[br.LOG]:C_,[br.IDENTITY]:O2,[br.SEQUENTIAL]:b2,[br.TIME]:y2,[br.QUANTILE]:bh,[br.QUANTIZE]:Lg,[br.THRESHOLD]:L_,[br.CAT]:oa,[br.DIVERGING]:x2};class kT{constructor(){(0,ct.Z)(this,"scaleOptions",{})}apply(i,{styleAttributeService:s}){var f=this;i.hooks.init.tapPromise("FeatureScalePlugin",(0,ln.Z)(function*(){var g;i.log(Oi.ScaleInitStart,$i.INIT),f.scaleOptions=i.getScaleOptions();const y=s.getLayerStyleAttributes(),x=(g=i.getSource())===null||g===void 0?void 0:g.data.dataArray;Array.isArray(x)&&x.length===0||(f.caculateScalesForAttributes(y||[],x),i.log(Oi.ScaleInitEnd,$i.INIT))})),i.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var g=(0,ln.Z)(function*(y){if(!y)return y;i.log(Oi.ScaleInitStart,$i.UPDATE),f.scaleOptions=i.getScaleOptions();const x=s.getLayerStyleAttributes(),O=i.getSource().data.dataArray;return Array.isArray(O)&&O.length===0||(f.caculateScalesForAttributes(x||[],O),i.log(Oi.ScaleInitEnd,$i.UPDATE),i.layerModelNeedUpdate=!0),!0});return function(y){return g.apply(this,arguments)}}()),i.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(i.layerModelNeedUpdate)return;this.scaleOptions=i.getScaleOptions();const g=s.getLayerStyleAttributes(),y=i.getSource().data.dataArray;if(!(Array.isArray(y)&&y.length===0)&&g){const x=g.filter(O=>O.needRescale);x.length&&this.caculateScalesForAttributes(x,y)}})}isNumber(i){return!isNaN(parseFloat(i))&&isFinite(i)}caculateScalesForAttributes(i,s){i.forEach(f=>{if(f.scale){const g=f.scale,y=f.scale.field;g.names=this.parseFields(Yg(y)?[]:y);const x=[];g.names.forEach(O=>{var A;x.push(this.createScale(O,f.name,(A=f.scale)===null||A===void 0?void 0:A.values,s))}),x.some(O=>O.type===cs.VARIABLE)?(g.type=cs.VARIABLE,x.forEach(O=>{if(!g.callback&&g.values!=="text"){var A;switch((A=O.option)===null||A===void 0?void 0:A.type){case br.LOG:case br.LINEAR:case br.POWER:if(g.values&&g.values.length>2){const N=O.scale.ticks(g.values.length);O.scale.domain(N)}g.values?O.scale.range(g.values):O.scale.range(O.option.domain);break;case br.QUANTILE:case br.QUANTIZE:case br.THRESHOLD:O.scale.range(g.values);break;case br.IDENTITY:break;case br.CAT:g.values?O.scale.range(g.values):O.scale.range(O.option.domain);break;case br.DIVERGING:case br.SEQUENTIAL:O.scale.interpolator(wa(g.values));break}}if(g.values==="text"){var P;O.scale.range((P=O.option)===null||P===void 0?void 0:P.domain)}})):(g.type=cs.CONSTANT,g.defaultValues=x.map((O,A)=>O.scale(g.names[A]))),g.scalers=x.map(O=>({field:O.field,func:O.scale,option:O.option})),f.needRescale=!1}})}parseFields(i){return Array.isArray(i)?i:PT(i)?i.split("*"):[i]}createScale(i,s,f,g){var y,x;const O=this.scaleOptions[s]&&((y=this.scaleOptions[s])===null||y===void 0?void 0:y.field)===i?this.scaleOptions[s]:this.scaleOptions[i],A={field:i,scale:void 0,type:cs.VARIABLE,option:O};if(!g||!g.length)return O&&O.type?A.scale=this.createDefaultScale(O):(A.scale=oa([i]),A.type=cs.CONSTANT),A;const P=(x=g.find(N=>!Yg(N[i])))===null||x===void 0?void 0:x[i];if(this.isNumber(i)||Yg(P)&&!O)A.scale=oa([i]),A.type=cs.CONSTANT;else{let N=O&&O.type||this.getDefaultType(P);f==="text"&&(N=br.CAT),f===void 0&&(N=br.IDENTITY);const Z=this.createScaleConfig(N,i,O,g);A.scale=this.createDefaultScale(Z),A.option=Z}return A}getDefaultType(i){let s=br.LINEAR;return typeof i=="string"&&(s=Xg.test(i)?br.TIME:br.CAT),s}createScaleConfig(i,s,f,g){const y=(0,on.Z)((0,on.Z)({},f),{},{type:i});if(y!=null&&y.domain)return y;let x=[];if(i===br.QUANTILE){const O=new Map;g==null||g.forEach(A=>{O.set(A._id,A[s])}),x=Array.from(O.values())}else x=(g==null?void 0:g.map(O=>O[s]))||[];if(i===br.CAT||i===br.IDENTITY)y.domain=IT(x);else if(i===br.QUANTILE)y.domain=x;else if(i===br.DIVERGING){const O=o_(x),A=(f==null?void 0:f.neutral)!==void 0?f==null?void 0:f.neutral:(O[0]+O[1])/2;y.domain=[O[0],A,O[1]]}else y.domain=o_(x);return y}createDefaultScale({type:i,domain:s,unknown:f,clamp:g,nice:y}){const x=RT[i]();return s&&x.domain&&x.domain(s),f&&x.unknown(f),g!==void 0&&x.clamp&&x.clamp(g),y!==void 0&&x.nice&&x.nice(y),x}}class DT{apply(i){i.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{i.animateStatus&&i.models.forEach(f=>{f.addUniforms((0,on.Z)({},i.layerModel.getAnimateUniforms()))})})}}class FT{apply(i){i.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:s,enableMask:f}=i.getLayerConfig();!i.tileLayer&&s&&s.length>0&&i.updateLayerConfig({mask:f})})}}class NT{build(i){return(0,ln.Z)(function*(){i.prepareBuildModel(),yield i.buildModels()})()}initLayerModel(i){var s=this;return(0,ln.Z)(function*(){yield s.build(i),i.styleNeedUpdate=!1})()}prepareLayerModel(i){var s=this;return(0,ln.Z)(function*(){yield s.build(i),i.styleNeedUpdate=!1})()}apply(i){var s=this;i.hooks.init.tapPromise("LayerModelPlugin",(0,ln.Z)(function*(){if(i.getSource().isTile){i.prepareBuildModel();return}i.log(Oi.BuildModelStart,$i.INIT),yield s.initLayerModel(i),i.log(Oi.BuildModelEnd,$i.INIT)})),i.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var f=(0,ln.Z)(function*(g){return!g||i.getSource().isTile?!1:(i.log(Oi.BuildModelStart,$i.UPDATE),yield s.prepareLayerModel(i),i.log(Oi.BuildModelEnd,$i.UPDATE),!0)});return function(g){return f.apply(this,arguments)}}())}}class E2{apply(i){i.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:s,fitBoundsOptions:f}=i.getLayerConfig();s&&i.fitBounds(f),i.styleNeedUpdate=!1})}}const BT=["type"],w2={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},jT={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},zT={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},UT={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function ZT(a){const i={u_DirectionalLights:new Array(3).fill((0,on.Z)({},zT)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,on.Z)({},UT)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[jT]),a.forEach(s=>{let{type:f="directional"}=s,g=(0,xa.Z)(s,BT);const y=w2[f].lights,x=w2[f].num,O=i[x];i[y][O]=(0,on.Z)((0,on.Z)({},i[y][O]),g),i[x]++}),i}class HT{apply(i){i.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:s}=i.getLayerConfig();s&&i.models.forEach(f=>f.addUniforms((0,on.Z)({},ZT())))})}}function cf(a){return a.map(i=>(typeof i=="string"&&(i=[i,{}]),i))}function lf(a,i,s,f){const g=a.multiPassRenderer;return g.add(f("render")),cf(i).forEach(y=>{const[x,O]=y;g.add(s(x),O)}),g.add(s("copy")),g}class Rh{constructor(){(0,ct.Z)(this,"enabled",void 0)}apply(i,{rendererService:s,postProcessingPassFactory:f,normalPassFactory:g}){i.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:y,passes:x=[]}=i.getLayerConfig();this.enabled=!!y&&i.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(i.multiPassRenderer=lf(i,x,f,g),i.multiPassRenderer.setRenderFlag(!0))}),i.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:y,height:x}=s.getViewportSize();i.multiPassRenderer.resize(y,x)}})}}const Qa={POSITION:0,POSITION_64LOW:1,COLOR:2,PICKING_COLOR:3,STROKE:4,OPACITY:5,OFFSETS:6,ROTATION:7,MAX:8};function A2(a){switch(a){case"rotation":return{name:"Rotation",type:Dn.Attribute,descriptor:{name:"a_Rotation",shaderLocation:Qa.ROTATION,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{rotation:s=0}=i;return Array.isArray(s)?[s[0]]:[s]}}};case"stroke":return{name:"stroke",type:Dn.Attribute,descriptor:{name:"a_Stroke",shaderLocation:Qa.STROKE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:4,update:i=>{const{stroke:s=[1,1,1,1]}=i;return s}}};case"opacity":return{name:"opacity",type:Dn.Attribute,descriptor:{name:"a_Opacity",shaderLocation:Qa.OPACITY,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{opacity:s=1}=i;return[s]}}};case"offsets":return{name:"offsets",type:Dn.Attribute,descriptor:{name:"a_Offsets",shaderLocation:Qa.OFFSETS,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const{offsets:s}=i;return s}}};default:return}}const{isNumber:VT}=ii,Ol={NONE:0,ENCODE:1,HIGHLIGHT:2};class WT{constructor(){(0,ct.Z)(this,"pickingUniformMap",void 0)}pickOption2Array(){const i=[];return this.pickingUniformMap.forEach(s=>{VT(s)?i.push(s):i.push(...s)}),i}updatePickOption(i,s){Object.keys(i).forEach(x=>{this.pickingUniformMap.set(x,i[x])});const f=s.getLayerConfig().pickingBuffer||0,g=Number(s.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",f),this.pickingUniformMap.set("u_shaderPick",g),s.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(i,{styleAttributeService:s}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),i.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:f}=i.getLayerConfig();s.registerStyleAttribute({name:"pickingColor",type:Dn.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:Qa.PICKING_COLOR,buffer:{data:[],type:ot.FLOAT},size:3,update:g=>{const{id:y}=g;return f?$s(y):[0,0,0]}}})}),i.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:f}=i.getLayerConfig();f&&i.isVisible()&&(this.updatePickOption({u_PickingStage:Ol.ENCODE},i),i.models.forEach(g=>g.addUniforms({u_PickingStage:Ol.ENCODE})))}),i.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:f}=i.getLayerConfig();f&&i.isVisible()&&(this.updatePickOption({u_PickingStage:Ol.HIGHLIGHT},i),i.models.forEach(g=>g.addUniforms({u_PickingStage:Ol.HIGHLIGHT})))}),i.hooks.beforeHighlight.tap("PixelPickingPlugin",f=>{const{highlightColor:g,activeMix:y=0}=i.getLayerConfig(),x=typeof g=="string"?Fr(g):g||[1,0,0,1];i.updateLayerConfig({pickedFeatureID:Gs(new Uint8Array(f))});const O={u_PickingStage:Ol.HIGHLIGHT,u_PickingColor:f,u_HighlightColor:x.map(A=>A*255),u_activeMix:y};this.updatePickOption(O,i),i.models.forEach(A=>A.addUniforms(O))}),i.hooks.beforeSelect.tap("PixelPickingPlugin",f=>{const{selectColor:g,selectMix:y=0}=i.getLayerConfig(),x=typeof g=="string"?Fr(g):g||[1,0,0,1];i.updateLayerConfig({pickedFeatureID:Gs(new Uint8Array(f))});const O={u_PickingStage:Ol.HIGHLIGHT,u_PickingColor:f,u_HighlightColor:x.map(A=>A*255),u_activeMix:y,u_CurrentSelectedId:f,u_SelectColor:x.map(A=>A*255)};this.updatePickOption(O,i),i.models.forEach(A=>A.addUniforms(O))})}}const kh=["mvt","geojsonvt","testTile"];function GT(a){const i=a.getSource();return kh.includes(i.parser.type)}class To{apply(i,{styleAttributeService:s}){i.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{GT(i)||this.registerBuiltinAttributes(s,i)})}registerBuiltinAttributes(i,s){if(s.type==="MaskLayer"){this.registerPositionAttribute(i);return}this.registerPositionAttribute(i),this.registerColorAttribute(i)}registerPositionAttribute(i){i.registerStyleAttribute({name:"position",type:Dn.Attribute,descriptor:{name:"a_Position",shaderLocation:Qa.POSITION,buffer:{data:[],type:ot.FLOAT},size:3,update:(s,f,g)=>g.length===2?[g[0],g[1],0]:[g[0],g[1],g[2]]}})}registerColorAttribute(i){i.registerStyleAttribute({name:"color",type:Dn.Attribute,descriptor:{name:"a_Color",shaderLocation:Qa.COLOR,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:4,update:s=>{const{color:f}=s;return!f||!f.length?[1,1,1,1]:f}}})}}class $T{constructor(){(0,ct.Z)(this,"cameraService",void 0),(0,ct.Z)(this,"coordinateSystemService",void 0),(0,ct.Z)(this,"rendererService",void 0),(0,ct.Z)(this,"mapService",void 0),(0,ct.Z)(this,"layerService",void 0)}apply(i,{rendererService:s,mapService:f,layerService:g,coordinateSystemService:y,cameraService:x}){this.rendererService=s,this.mapService=f,this.layerService=g,this.coordinateSystemService=y,this.cameraService=x;let O;this.rendererService.uniformBuffers[0]||(O=this.rendererService.createBuffer({data:new Float32Array(96),isUBO:!0,label:"renderUniformBuffer"}),this.rendererService.uniformBuffers[0]=O),i.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const P=i.getRelativeOrigin&&i.getRelativeOrigin()||[0,0];this.coordinateSystemService.refresh(),P&&(Math.abs(P[0])>1e-4||Math.abs(P[1])>1e-4)&&this.coordinateSystemService.getCoordinateSystem()===2&&this.coordinateSystemService.setViewportCenter(P);const{width:Z,height:W}=this.rendererService.getViewportSize(),{data:mt,uniforms:Nt}=this.generateUBO(Z,W,P);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:mt}),this.rendererService.queryVerdorInfo()==="WebGL1"&&i.models.forEach(ye=>{ye.addUniforms((0,on.Z)((0,on.Z)({},Nt),{},{u_PickingBuffer:i.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(i.getShaderPickStat())}))})})}generateUBO(i,s,f){const g=this.cameraService.getProjectionMatrix(),y=this.cameraService.getViewMatrix(),x=this.cameraService.getViewProjectionMatrix(),O=this.cameraService.getModelMatrix(),A=this.coordinateSystemService.getViewportCenterProjection(),P=this.coordinateSystemService.getPixelsPerDegree(),N=this.cameraService.getZoom(),Z=this.coordinateSystemService.getPixelsPerDegree2(),W=this.cameraService.getZoomScale(),mt=this.coordinateSystemService.getPixelsPerMeter(),Nt=this.coordinateSystemService.getCoordinateSystem(),Jt=this.cameraService.getCameraPosition(),ye=window.devicePixelRatio,Ne=this.coordinateSystemService.getViewportCenter(),ze=[i,s],He=this.cameraService.getFocalDistance(),nn=f&&f.length>=2?[f[0],f[1]]:[0,0];return{data:[...y,...g,...x,...O,...A,...P,N,...Z,W,...mt,Nt,...Jt,ye,...Ne,...ze,He,...nn,0],uniforms:{[as.ProjectionMatrix]:g,[as.ViewMatrix]:y,[as.ViewProjectionMatrix]:x,[as.Zoom]:N,[as.ZoomScale]:W,[as.FocalDistance]:He,[as.CameraPosition]:Jt,[ss.CoordinateSystem]:Nt,[ss.ViewportCenter]:Ne,[ss.ViewportCenterProjection]:A,[ss.PixelsPerDegree]:P,[ss.PixelsPerDegree2]:Z,[ss.PixelsPerMeter]:mt,u_ViewportSize:ze,u_ModelMatrix:O,u_DevicePixelRatio:ye,u_RelativeOrigin:nn}}}}class YT{apply(i){i.hooks.beforeRender.tap("UpdateModelPlugin",()=>{i.layerModel&&i.layerModel.needUpdate().then(s=>{s&&i.renderLayers()})}),i.hooks.afterRender.tap("UpdateModelPlugin",()=>{i.layerModelNeedUpdate=!1})}}class XT{apply(i,{styleAttributeService:s}){i.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(i,{styleAttributeService:s})}),i.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{i.layerModelNeedUpdate||i.inited&&this.updateStyleAttribute(i,{styleAttributeService:s})})}updateStyleAttribute(i,{styleAttributeService:s}){const f=s.getLayerStyleAttributes()||[],g=s.getLayerStyleAttribute("filter");if(g&&g.needRegenerateVertices){i.layerModelNeedUpdate=!0,f.forEach(y=>y.needRegenerateVertices=!1);return}f.filter(y=>y.needRegenerateVertices).forEach(y=>{s.updateAttributeByFeatureRange(y.name,i.getEncodedData(),y.featureRange.startIndex,y.featureRange.endIndex,i),y.needRegenerateVertices=!1})}initStyleAttribute(i,{styleAttributeService:s}){(s.getLayerStyleAttributes()||[]).filter(g=>g.needRegenerateVertices).forEach(g=>{s.updateAttributeByFeatureRange(g.name,i.getEncodedData(),g.featureRange.startIndex,g.featureRange.endIndex),g.needRegenerateVertices=!1})}}function qT(){return[new XA,new To,new kT,new YA,new E2,new FT,new XT,new YT,new Rh,new $T,new DT,new HT,new WT,new NT]}const qg={[_a.additive]:{enable:!0,func:{srcRGB:ot.ONE,dstRGB:ot.ONE,srcAlpha:1,dstAlpha:1}},[_a.none]:{enable:!1},[_a.normal]:{enable:!0,func:{srcRGB:ot.SRC_ALPHA,dstRGB:ot.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[_a.subtractive]:{enable:!0,func:{srcRGB:ot.ONE,dstRGB:ot.ONE,srcAlpha:ot.ZERO,dstAlpha:ot.ONE_MINUS_SRC_COLOR},equation:{rgb:ot.FUNC_SUBTRACT,alpha:ot.FUNC_SUBTRACT}},[_a.max]:{enable:!0,func:{srcRGB:ot.ONE,dstRGB:ot.ONE},equation:{rgb:ot.MAX_EXT}},[_a.min]:{enable:!0,func:{srcRGB:ot.ONE,dstRGB:ot.ONE},equation:{rgb:ot.MIN_EXT}}};class KT{constructor(i){(0,ct.Z)(this,"layer",void 0),this.layer=i}pickRender(i){const f=this.layer.getContainer().layerService,g=this.layer;if(g.tileLayer)return g.tileLayer.pickRender(i);g.hooks.beforePickingEncode.call(),f.renderTileLayerMask(g),g.renderModels({ispick:!0}),g.hooks.afterPickingEncode.call()}pick(i,s){var f=this;return(0,ln.Z)(function*(){const y=f.layer.getContainer().pickingService;return i.type==="RasterLayer"?f.pickRasterLayer(i,s):(f.pickRender(s),y.pickFromPickingFBO(i,s))})()}pickRasterLayer(i,s,f){const g=this.layer.getContainer(),y=g.pickingService,x=g.mapService,O=this.layer.getSource().extent,A=wO(s.lngLat,O),P={x:s.x,y:s.y,type:s.type,lngLat:s.lngLat,target:s,rasterValue:null},N=f||i;if(A){const Z=this.readRasterValue(i,O,x,s.x,s.y);return P.rasterValue=Z,y.triggerHoverOnLayer(N,P),!0}else return P.type=s.type==="mousemove"?"mouseout":"un"+s.type,y.triggerHoverOnLayer(N,(0,on.Z)((0,on.Z)({},P),{},{type:"unpick"})),y.triggerHoverOnLayer(N,P),!1}readRasterValue(i,s,f,g,y){const x=i.getSource().data.dataArray[0],[O=0,A=0,P=10,N=-10]=s,Z=f.lngLatToContainer([O,A]),W=f.lngLatToContainer([P,N]),mt=W.x-Z.x,Nt=Z.y-W.y,Jt=[(g-Z.x)/mt,(y-W.y)/Nt],ye=x.width||1,Ne=x.height||1,ze=Math.floor(Jt[0]*ye),He=Math.floor(Jt[1]*Ne),nn=Math.max(0,He-1)*ye+ze;return x.data[nn]}selectFeature(i){const s=this.layer,[f,g,y]=i;s.hooks.beforeSelect.call([f,g,y])}highlightPickedFeature(i){const[s,f,g]=i;this.layer.hooks.beforeHighlight.call([s,f,g])}getFeatureById(i){return this.layer.getSource().getFeatureById(i)}}class Kg{constructor(i){(0,ct.Z)(this,"layer",void 0),(0,ct.Z)(this,"rendererService",void 0),(0,ct.Z)(this,"colorTexture",void 0),(0,ct.Z)(this,"key",void 0),this.layer=i;const s=this.layer.getContainer();this.rendererService=s.rendererService}getColorTexture(i,s){const f=this.getTextureKey(i,s);return this.key===f?this.colorTexture:(this.createColorTexture(i,s),this.key=f,this.colorTexture)}createColorTexture(i,s){const{createTexture2D:f}=this.rendererService,g=this.getColorRampBar(i,s),y=f({data:new Uint8Array(g.data),width:g.width,height:g.height,flipY:!1,unorm:!0});return this.colorTexture=y,y}setColorTexture(i,s,f){this.key=this.getTextureKey(s,f),this.colorTexture=i}destroy(){var i;(i=this.colorTexture)===null||i===void 0||i.destroy()}getColorRampBar(i,s){switch(i.type){case"cat":return Ym(i);case"quantize":return iO(i);case"custom":return Xm(i,s);case"linear":return rO(i,s);default:return nO(i)}}getTextureKey(i,s){var f;return`${i.colors.join("_")}_${i==null||(f=i.positions)===null||f===void 0?void 0:f.join("_")}_${i.type}_${s==null?void 0:s.join("_")}`}}const QT=["passes"],JT=["moduleName","vertexShader","fragmentShader","defines","inject","triangulation","styleOption","pickingEnabled"],{isEqual:Qg,isFunction:T2,isNumber:C2,isObject:qi,isPlainObject:tC,isUndefined:eC}=ii;let M2=0;class El extends to.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){var i;return(i=this.container)===null||i===void 0?void 0:i.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(i={}){super(),(0,ct.Z)(this,"id",`${M2++}`),(0,ct.Z)(this,"name",`${M2}`),(0,ct.Z)(this,"parent",void 0),(0,ct.Z)(this,"coordCenter",void 0),(0,ct.Z)(this,"type",void 0),(0,ct.Z)(this,"visible",!0),(0,ct.Z)(this,"zIndex",0),(0,ct.Z)(this,"minZoom",void 0),(0,ct.Z)(this,"maxZoom",void 0),(0,ct.Z)(this,"inited",!1),(0,ct.Z)(this,"layerModelNeedUpdate",!1),(0,ct.Z)(this,"pickedFeatureID",null),(0,ct.Z)(this,"selectedFeatureID",null),(0,ct.Z)(this,"styleNeedUpdate",!1),(0,ct.Z)(this,"rendering",void 0),(0,ct.Z)(this,"forceRender",!1),(0,ct.Z)(this,"clusterZoom",0),(0,ct.Z)(this,"layerType",void 0),(0,ct.Z)(this,"triangulation",void 0),(0,ct.Z)(this,"layerPickService",void 0),(0,ct.Z)(this,"textureService",void 0),(0,ct.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,ct.Z)(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,ct.Z)(this,"hooks",{init:new _w,afterInit:new G0,beforeRender:new G0,beforeRenderData:new xw,afterRender:new ra,beforePickingEncode:new ra,afterPickingEncode:new ra,beforeHighlight:new ra(["pickedColor"]),afterHighlight:new ra,beforeSelect:new ra(["pickedColor"]),afterSelect:new ra,beforeDestroy:new ra,afterDestroy:new ra}),(0,ct.Z)(this,"models",[]),(0,ct.Z)(this,"multiPassRenderer",void 0),(0,ct.Z)(this,"plugins",void 0),(0,ct.Z)(this,"startInit",!1),(0,ct.Z)(this,"sourceOption",void 0),(0,ct.Z)(this,"layerModel",void 0),(0,ct.Z)(this,"shapeOption",void 0),(0,ct.Z)(this,"tileLayer",void 0),(0,ct.Z)(this,"layerChildren",[]),(0,ct.Z)(this,"masks",[]),(0,ct.Z)(this,"configService",Ww),(0,ct.Z)(this,"styleAttributeService",void 0),(0,ct.Z)(this,"layerSource",void 0),(0,ct.Z)(this,"postProcessingPassFactory",void 0),(0,ct.Z)(this,"animateOptions",{enable:!1}),(0,ct.Z)(this,"relativeOrigin",[0,0]),(0,ct.Z)(this,"originalExtent",[0,0,0,0]),(0,ct.Z)(this,"absoluteDataArray",[]),(0,ct.Z)(this,"container",void 0),(0,ct.Z)(this,"encodedData",void 0),(0,ct.Z)(this,"currentPickId",null),(0,ct.Z)(this,"rawConfig",void 0),(0,ct.Z)(this,"needUpdateConfig",void 0),(0,ct.Z)(this,"encodeStyleAttribute",{}),(0,ct.Z)(this,"enableShaderEncodeStyles",[]),(0,ct.Z)(this,"enableDataEncodeStyles",[]),(0,ct.Z)(this,"pendingStyleAttributes",[]),(0,ct.Z)(this,"scaleOptions",{}),(0,ct.Z)(this,"animateStartTime",void 0),(0,ct.Z)(this,"animateStatus",!1),(0,ct.Z)(this,"isDestroyed",!1),(0,ct.Z)(this,"uniformBuffers",[]),(0,ct.Z)(this,"encodeDataLength",0),(0,ct.Z)(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0,this.processRelativeCoordinates();const s=this.getLayerConfig();s&&s.autoFit&&this.fitBounds(s.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=i.name||this.id,this.zIndex=i.zIndex||0,this.rawConfig=i,this.masks=i.maskLayers||[]}addMask(i){this.masks.push(i),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(i){const s=this.masks.indexOf(i);s>-1&&this.masks.splice(s,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(i){this.masks.push(i)}removeMaskLayer(i){const s=this.masks.indexOf(i);s>-1&&this.masks.splice(s,1),i.destroy()}getAttribute(i){return this.styleAttributeService.getLayerStyleAttribute(i)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(i){if(Object.keys(i).map(s=>{s in this.rawConfig&&(this.rawConfig[s]=i[s])}),!this.startInit)this.needUpdateConfig=(0,on.Z)((0,on.Z)({},this.needUpdateConfig),i);else{const s=this.container.id;this.configService.setLayerConfig(s,this.id,(0,on.Z)((0,on.Z)((0,on.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),i)),this.needUpdateConfig={}}}setContainer(i){this.container=i}getContainer(){return this.container}addPlugin(i){return this.plugins.push(i),this}init(){var i=this;return(0,ln.Z)(function*(){const s=i.container.id;i.startInit=!0,i.configService.setLayerConfig(s,i.id,i.rawConfig),i.layerType=i.rawConfig.layerType;const{enableMultiPassRenderer:f,passes:g}=i.getLayerConfig();f&&g!==null&&g!==void 0&&g.length&&g.length>0&&i.mapService.on("mapAfterFrameChange",()=>{i.renderLayers()}),i.postProcessingPassFactory=i.container.postProcessingPassFactory,i.styleAttributeService=i.container.styleAttributeService,f&&(i.multiPassRenderer=i.container.multiPassRenderer,i.multiPassRenderer.setLayer(i)),i.pendingStyleAttributes.forEach(({attributeName:y,attributeField:x,attributeValues:O,updateOptions:A})=>{i.styleAttributeService.updateStyleAttribute(y,{scale:(0,on.Z)({field:x},i.splitValuesAndCallbackInAttribute(O,x?void 0:i.getLayerConfig()[y]))},A)}),i.pendingStyleAttributes=[],i.plugins=qT();for(const y of i.plugins)y.apply(i,i.container);i.layerPickService=new KT(i),i.textureService=new Kg(i),i.log(Oi.LayerInitStart),yield i.hooks.init.promise(),i.log(Oi.LayerInitEnd),i.inited=!0,i.emit("inited",{target:i,type:"inited"}),i.emit("add",{target:i,type:"add"}),i.hooks.afterInit.call()})()}log(i,s="init"){var f;if(this.tileLayer||this.isTileLayer)return;const g=`${this.id}.${s}.${i}`,y={id:this.id,type:this.type};(f=this.debugService)===null||f===void 0||f.log(g,y)}updateModelData(i){i.attributes&&i.elements?this.models.map(s=>{s.updateAttributesAndElements(i.attributes,i.elements)}):console.warn("data error")}setLayerPickService(i){this.layerPickService=i}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:i}=this.getLayerConfig();i!=null&&i.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(i,s,f){return this.updateStyleAttribute("color",i,s,f),this}texture(i,s,f){return this.updateStyleAttribute("texture",i,s,f),this}rotate(i,s,f){return this.updateStyleAttribute("rotate",i,s,f),this}size(i,s,f){return this.updateStyleAttribute("size",i,s,f),this}filter(i,s,f){const g=this.updateStyleAttribute("filter",i,s,f);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}shape(i,s,f){this.shapeOption={field:i,values:s};const g=this.updateStyleAttribute("shape",i,s,f);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}label(i,s,f){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:i,attributeValues:s,updateOptions:f}),this}animate(i){let s={};return qi(i)?(s.enable=!0,s=(0,on.Z)((0,on.Z)({},s),i)):s.enable=i,this.updateLayerConfig({animateOption:s}),this}source(i,s){return(i==null?void 0:i.type)==="source"?(this.setSource(i),this):(this.sourceOption={data:i,options:s},this.clusterZoom=0,this)}setData(i,s){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(i,s)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(i,s)}),this}dataUpdatelog(){this.log(Oi.SourceInitStart,$i.UPDATE),this.layerSource.once("update",()=>{this.log(Oi.SourceInitEnd,$i.UPDATE)})}style(i){const{passes:s}=i,f=(0,xa.Z)(i,QT);s&&cf(s).forEach(y=>{const x=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(y[0]);x&&x.updateOptions(y[1])}),f.borderColor&&(f.stroke=f.borderColor),f.borderWidth&&(f.strokeWidth=f.borderWidth);const g=f;return Object.keys(f).forEach(y=>{const x=f[y];Array.isArray(x)&&x.length===2&&!C2(x[0])&&!C2(x[1])&&(g[y]={field:x[0],value:x[1]})}),this.encodeStyle(g),this.updateLayerConfig(g),this}encodeStyle(i){Object.keys(i).forEach(s=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(s)&&tC(i[s])&&(i[s].field||i[s].value)&&!Qg(this.encodeStyleAttribute[s],i[s])?(this.encodeStyleAttribute[s]=i[s],this.updateStyleAttribute(s,i[s].field,i[s].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[s]&&(delete this.encodeStyleAttribute[s],this.dataState.dataSourceNeedUpdate=!0)})}scale(i,s){const f=(0,on.Z)({},this.scaleOptions);if(qi(i)?this.scaleOptions=(0,on.Z)((0,on.Z)({},this.scaleOptions),i):this.scaleOptions[i]=s,this.styleAttributeService&&!Qg(f,this.scaleOptions)){const g=qi(i)?i:{[i]:s};this.styleAttributeService.updateScaleAttribute(g)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(i={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(i),this))}renderMultiPass(){var i=this;return(0,ln.Z)(function*(){i.encodeDataLength<=0&&!i.forceRender||(i.multiPassRenderer&&i.multiPassRenderer.getRenderFlag()?yield i.multiPassRenderer.render():i.renderModels())})()}active(i){const s={};return s.enableHighlight=qi(i)?!0:i,qi(i)?(s.enableHighlight=!0,i.color&&(s.highlightColor=i.color),i.mix&&(s.activeMix=i.mix)):s.enableHighlight=!!i,this.updateLayerConfig(s),this}setActive(i,s){if(qi(i)){const{x:f=0,y:g=0}=i;this.updateLayerConfig({highlightColor:qi(s)?s.color:this.getLayerConfig().highlightColor,activeMix:qi(s)?s.mix:this.getLayerConfig().activeMix}),this.pick({x:f,y:g})}else this.updateLayerConfig({pickedFeatureID:i,highlightColor:qi(s)?s.color:this.getLayerConfig().highlightColor,activeMix:qi(s)?s.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call($s(i)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(i){const s={};return s.enableSelect=qi(i)?!0:i,qi(i)?(s.enableSelect=!0,i.color&&(s.selectColor=i.color),i.mix&&(s.selectMix=i.mix)):s.enableSelect=!!i,this.updateLayerConfig(s),this}setSelect(i,s){if(qi(i)){const{x:f=0,y:g=0}=i;this.updateLayerConfig({selectColor:qi(s)?s.color:this.getLayerConfig().selectColor,selectMix:qi(s)?s.mix:this.getLayerConfig().selectMix}),this.pick({x:f,y:g})}else this.updateLayerConfig({pickedFeatureID:i,selectColor:qi(s)?s.color:this.getLayerConfig().selectColor,selectMix:qi(s)?s.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call($s(i)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(i){return this.updateLayerConfig({blend:i}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(i){return this.zIndex=i,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(i){this.currentPickId=i}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(i){this.selectedFeatureID=i}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const i=this.mapService.getZoom(),{visible:s,minZoom:f=-1/0,maxZoom:g=1/0}=this.getLayerConfig();return!!s&&i>=f&&i<g}setMultiPass(i,s){if(this.updateLayerConfig({enableMultiPassRenderer:i}),s&&this.updateLayerConfig({passes:s}),i){const{passes:f=[]}=this.getLayerConfig();this.multiPassRenderer=lf(this,f,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:g,height:y}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(g,y)}return this}setMinZoom(i){return this.updateLayerConfig({minZoom:i}),this}getMinZoom(){const{minZoom:i}=this.getLayerConfig();return i}getMaxZoom(){const{maxZoom:i}=this.getLayerConfig();return i}get(i){return this.getLayerConfig()[i]}setMaxZoom(i){return this.updateLayerConfig({maxZoom:i}),this}setAutoFit(i){return this.updateLayerConfig({autoFit:i}),this}fitBounds(i){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const f=this.getSource().extent;return f.some(y=>Math.abs(y)===1/0)?this:(this.mapService.fitBounds([[f[0],f[1]],[f[2],f[3]]],i),this)}destroy(i=!0){var s,f,g,y,x;if(this.isDestroyed)return;(s=this.layerModel)===null||s===void 0||s.uniformBuffers.forEach(A=>{A.destroy()}),this.layerChildren.map(A=>A.destroy(!1)),this.layerChildren=[];const{maskfence:O}=this.getLayerConfig();O&&(this.masks.map(A=>A.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(f=this.multiPassRenderer)===null||f===void 0||f.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(g=this.layerModel)===null||g===void 0||g.clearModels(i),(y=this.tileLayer)===null||y===void 0||y.destroy(),this.models=[],(x=this.debugService)===null||x===void 0||x.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var i;this.models.forEach(s=>s.destroy()),(i=this.layerModel)===null||i===void 0||i.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(i=>i.needRescale||i.needRemapping||i.needRegenerateVertices).length}setSource(i){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=i,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const s=this.mapService.getZoom();this.layerSource.updateClusterData(s)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:s})=>{if(this.coordCenter===void 0){const f=this.layerSource.center;this.coordCenter=f}if(s==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}s==="inited"&&this.processRelativeCoordinates()})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(i){this.encodedData=i,this.encodeDataLength=i.length}getEncodedData(){return this.encodedData}getScale(i){return this.styleAttributeService.getLayerAttributeScale(i)}getLegend(i){var s,f,g;const y=this.styleAttributeService.getLayerStyleAttribute(i);return{type:(f=((y==null||(s=y.scale)===null||s===void 0?void 0:s.scalers)||[])[0])===null||f===void 0||(f=f.option)===null||f===void 0?void 0:f.type,field:y==null||(g=y.scale)===null||g===void 0?void 0:g.field,items:this.getLegendItems(i)}}getLegendItems(i){const s=this.styleAttributeService.getLayerAttributeScale(i);return s?s.invertExtent?s.range().map(g=>({value:s.invertExtent(g),[i]:g})):s.ticks?s.ticks().map(g=>({value:g,[i]:s(g)})):s!=null&&s.domain?s.domain().filter(g=>!eC(g)).map(g=>({value:g,[i]:s(g)})):[]:[]}pick({x:i,y:s}){this.interactionService.triggerHover({x:i,y:s})}boxSelect(i,s){this.pickingService.boxPickLayer(this,i,s)}buildLayerModel(i){var s=this;return(0,ln.Z)(function*(){const{moduleName:f,vertexShader:g,fragmentShader:y,defines:x,inject:O,triangulation:A,styleOption:P,pickingEnabled:N=!0}=i,Z=(0,xa.Z)(i,JT);s.shaderModuleService.registerModule(f,{vs:g,fs:y,defines:x,inject:O});const{vs:W,fs:mt,uniforms:Nt}=s.shaderModuleService.getModule(f),{createModel:Jt}=s.rendererService;return new Promise(ye=>{const{attributes:Ne,elements:ze,count:He}=s.styleAttributeService.createAttributesAndIndices(s.encodedData,A,P,s),nn=[...s.layerModel.uniformBuffers,...s.rendererService.uniformBuffers];N&&nn.push(s.getPickingUniformBuffer());const pn=(0,on.Z)({attributes:Ne,uniforms:Nt,fs:mt,vs:W,elements:ze,blend:qg[_a.normal],uniformBuffers:nn,textures:s.layerModel.textures},Z);He&&(pn.count=He);const In=Jt(pn);ye(In)})})()}createAttributes(i){const{triangulation:s}=i,{attributes:f}=this.styleAttributeService.createAttributes(this.encodedData,s);return f}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(i){const{enableHighlight:s=!0,enableSelect:f=!0}=this.getLayerConfig();let g=this.eventNames().indexOf(i)!==-1||this.eventNames().indexOf("un"+i)!==-1;return(i==="click"||i==="dblclick")&&f&&(g=!0),i==="mousemove"&&(s||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(g=!0),this.isVisible()&&g}buildModels(){return(0,ln.Z)(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var i=this;return(0,ln.Z)(function*(){yield i.buildModels()})()}renderMulPass(i){return(0,ln.Z)(function*(){yield i.render()})()}renderModels(i={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(s=>{s.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(i),textures:this.layerModel.textures},(i==null?void 0:i.ispick)||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(i,s,f,g){const y=this.configService.getAttributeConfig(this.id)||{};return Qg(y[i],{field:s,values:f})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(i)!==-1&&this.configService.setAttributeConfig(this.id,{[i]:{field:s,values:f}}),this.startInit?this.styleAttributeService.updateStyleAttribute(i,{scale:(0,on.Z)({field:s},this.splitValuesAndCallbackInAttribute(f,this.getLayerConfig()[s]))},g):this.pendingStyleAttributes.push({attributeName:i,attributeField:s,attributeValues:f,updateOptions:g}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(i){console.warn("empty fn")}processData(i){return i}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}processRelativeCoordinates(){if(!this.getLayerConfig().enableRelativeCoordinates||!this.layerSource||!this.layerSource.data)return;this.absoluteDataArray=[...this.layerSource.data.dataArray];const f=UA(this.layerSource.data.dataArray,{enableRelativeCoordinates:!0});this.layerSource.data.dataArray=f.dataArray,this.relativeOrigin=f.relativeOrigin,this.originalExtent=f.originalExtent}getAbsoluteData(){return this.absoluteDataArray}getRelativeOrigin(){return this.relativeOrigin}getOriginalExtent(){return this.originalExtent}initLayerModels(){var i=this;return(0,ln.Z)(function*(){i.models.forEach(f=>f.destroy()),i.models=[],i.uniformBuffers.forEach(f=>{f.destroy()}),i.uniformBuffers=[];const s=i.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0,label:"pickingUniforms"});i.uniformBuffers.push(s),i.models=yield i.layerModel.initModels()})()}getPickingUniformBuffer(){return this.uniformBuffers[0]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(i){return{values:T2(i)?void 0:i,callback:T2(i)?i:void 0}}}function nC(a,i){return{enable:a,mask:255,func:{cmp:ot.EQUAL,ref:i?1:0,mask:1}}}function la(a){return a.maskOperation===_d.OR?{enable:!0,mask:255,func:{cmp:ot.ALWAYS,ref:1,mask:255},opFront:{fail:ot.KEEP,zfail:ot.REPLACE,zpass:ot.REPLACE}}:{enable:!0,mask:255,func:{cmp:a.stencilType===na.SINGLE||a.stencilIndex===0?ot.ALWAYS:ot.LESS,ref:a.stencilType===na.SINGLE?1:a.stencilIndex===0?2:1,mask:255},opFront:{fail:ot.KEEP,zfail:ot.REPLACE,zpass:ot.REPLACE}}}const Dh={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},uf={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};var Ma=k(9187),ff=k.n(Ma);function Ec(a){return Math.max(Math.ceil(a/4)*4,4)}function Jg(a,i,s,f=!0){const g=s===3;if(f){a=a.slice();const x=[];for(let O=0;O<a.length;O+=s){x[0]=a[O],x[1]=a[O+1],g&&(x[2]=a[O+2]);const A=Hc(x,!0,{enable:!1,decimal:1});a[O]=A[0],a[O+1]=A[1],g&&(a[O+2]=A[2])}}return ff()(a,i,s)}const L2="ATTRIBUTE_LOCATION_";class Vr{get attributeLocation(){return(0,on.Z)({},Qa)}constructor(i){(0,ct.Z)(this,"triangulation",void 0),(0,ct.Z)(this,"uniformBuffers",[]),(0,ct.Z)(this,"textures",[]),(0,ct.Z)(this,"createTexture2D",void 0),(0,ct.Z)(this,"preStyleAttribute",{}),(0,ct.Z)(this,"encodeStyleAttribute",{}),(0,ct.Z)(this,"layer",void 0),(0,ct.Z)(this,"dataTexture",void 0),(0,ct.Z)(this,"DATA_TEXTURE_WIDTH",void 0),(0,ct.Z)(this,"dataTextureTest",void 0),(0,ct.Z)(this,"configService",void 0),(0,ct.Z)(this,"shaderModuleService",void 0),(0,ct.Z)(this,"rendererService",void 0),(0,ct.Z)(this,"iconService",void 0),(0,ct.Z)(this,"fontService",void 0),(0,ct.Z)(this,"styleAttributeService",void 0),(0,ct.Z)(this,"mapService",void 0),(0,ct.Z)(this,"cameraService",void 0),(0,ct.Z)(this,"layerService",void 0),(0,ct.Z)(this,"pickingService",void 0),(0,ct.Z)(this,"attributeUnifoms",void 0),(0,ct.Z)(this,"commonUnifoms",void 0),this.layer=i,this.configService=i.getContainer().globalConfigService,this.rendererService=i.getContainer().rendererService,this.pickingService=i.getContainer().pickingService,this.shaderModuleService=i.getContainer().shaderModuleService,this.styleAttributeService=i.getContainer().styleAttributeService,this.mapService=i.getContainer().mapService,this.iconService=i.getContainer().iconService,this.fontService=i.getContainer().fontService,this.cameraService=i.getContainer().cameraService,this.layerService=i.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:s}=this.rendererService;this.createTexture2D=s}getBlend(){const{blend:i="normal"}=this.layer.getLayerConfig();return qg[_a[i]]}getStencil(i){const{mask:s=!1,maskInside:f=!0,enableMask:g,maskOperation:y=_d.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return la({isStencil:!0,stencilType:na.SINGLE});if(i.isStencil)return la((0,on.Z)((0,on.Z)({},i),{},{maskOperation:y}));const x=s||g&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return nC(x,f)}getDefaultStyle(){return{}}getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const f=(0,on.Z)((0,on.Z)({},s.uniformsOption),i.uniformsOption);return Object.keys(f).forEach(g=>{typeof f[g]=="boolean"&&(f[g]=f[g]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(f.u_texture=this.textures[0]),f}getAnimateUniforms(){return{}}needUpdate(){return(0,ln.Z)(function*(){return!1})()}buildModels(){return(0,ln.Z)(function*(){throw new Error("Method not implemented.")})()}initModels(){return(0,ln.Z)(function*(){throw new Error("Method not implemented.")})()}clearModels(i=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(i){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(i){return[i.enable?0:1,i.duration||4,i.interval||.2,i.trailLength||.1]}startModelAnimate(){const{animateOption:i}=this.layer.getLayerConfig();i.enable&&this.layer.setAnimateStartTime()}getInject(){return rC(this.layer.enableShaderEncodeStyles,this.layer.encodeStyleAttribute)}getDefines(){const i=Object.keys(this.attributeLocation).reduce((s,f)=>{const g=L2+f;return s[g]=this.attributeLocation[f],s},{});return(0,on.Z)({},i)}getStyleAttribute(){const i={};return this.layer.enableShaderEncodeStyles.forEach(s=>{if(!this.layer.encodeStyleAttribute[s]){const f=this.layer.getLayerConfig()[s];let g=typeof f=="undefined"?Dh[s]:f;s==="stroke"&&(g=Fr(g)),i["u_"+s]=g}}),i}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(i=>{const s=A2(i);s&&this.styleAttributeService.registerStyleAttribute(s)})}registerPosition64LowAttribute(i=!0){this.styleAttributeService.registerStyleAttribute({name:"position64Low",type:Dn.Attribute,descriptor:{name:"a_Position64Low",shaderLocation:this.attributeLocation.POSITION_64LOW,buffer:{data:[],type:ot.FLOAT},size:2,update:(s,f,g)=>i?[bi(g[0]),bi(g[1])]:[0,0]}})}updateEncodeAttribute(i,s){this.encodeStyleAttribute[i]=s}initUniformsBuffer(){const i=this.getUniformsBufferInfo(this.getStyleAttribute()),s=this.getCommonUniformsInfo();i.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(Ec(i.uniformsLength)).fill(0),isUBO:!0,label:"layerModelAttributeUnifoms"}),this.uniformBuffers.push(this.attributeUnifoms)),s.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(Ec(s.uniformsLength)).fill(0),isUBO:!0,label:"layerModelCommonUnifoms"}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(i){let s=0;const f=[];return Object.values(i).forEach(g=>{Array.isArray(g)?(f.push(...g),s+=g.length):typeof g=="number"?(f.push(g),s+=1):typeof g=="boolean"&&(f.push(Number(g)),s+=1)}),{uniformsOption:i,uniformsLength:s,uniformsArray:f}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var i,s;const{uniformsArray:f}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:g}=this.getCommonUniformsInfo();(i=this.attributeUnifoms)===null||i===void 0||i.subData({offset:0,data:new Uint8Array(new Float32Array(f).buffer)}),(s=this.commonUnifoms)===null||s===void 0||s.subData({offset:0,data:new Uint8Array(new Float32Array(g).buffer)})}}function rC(a,i){const s=[];let f="";a.forEach(x=>{const O=x.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),A=L2+O;i[x]?f+=`#define USE_ATTRIBUTE_${O} 0.0 
`:s.push(`  ${uf[x]} u_${x};`),f+=`
#ifdef USE_ATTRIBUTE_${O}
layout(location = ${A}) in ${uf[x]} a_${x.charAt(0).toUpperCase()+x.slice(1)};
#endif 
`});const g=s.length?`
layout(std140) uniform AttributeUniforms {
  ${s.join(`
`)}
};
`:"";f+=g;let y="";return a.forEach(x=>{const O=x.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();y+=`
  #ifdef USE_ATTRIBUTE_${O}
    ${uf[x]} ${x} = a_${x.charAt(0).toUpperCase()+x.slice(1)};
  #else
    ${uf[x]} ${x} = u_${x};
  #endif
  `}),{"vs:#decl":f,"fs:#decl":g,"vs:#main-start":y}}const P2=100,R6=36,k6=40;function I2(a){return a/180*Math.acos(-1)}function R2(a){const i=I2(a[0])+Math.PI/2,s=I2(a[1]),f=P2+Math.random()*.4,g=f*Math.cos(s)*Math.cos(i),y=f*Math.cos(s)*Math.sin(i),x=f*Math.sin(s);return[y,x,g]}function D6(a,i){const s=mat4.create(),f=mat4.create(),g=vec3.fromValues(0,1,0),y=vec3.fromValues(0,0,0);i=i||{},a=typeof a!="undefined"?a:1;const O=2+(typeof i.segments!="undefined"?i.segments:32),A=2*O,P=[],N=[],Z=[],W=[],mt=[],Nt=[];for(let Jt=0;Jt<=O;Jt++){const ye=Jt/O,Ne=ye*Math.PI;for(let ze=0;ze<=A;ze++){const He=ze/A,nn=He*Math.PI*2;mat4.identity(f),mat4.rotateZ(f,f,-Ne),mat4.identity(s),mat4.rotateY(s,s,nn),vec3.transformMat4(y,g,f),vec3.transformMat4(y,y,s),vec3.scale(y,y,-a),Z.push(y.slice()),W.push(...y.slice()),vec3.normalize(y,y),mt.push(...y.slice()),Nt.push([He,1-ye]),W.push(He,1-ye)}if(Jt>0){const ze=Z.length;let He=ze-2*(A+1);for(;He+A+2<ze;He++)P.push([He,He+1,He+A+1]),N.push(He,He+1,He+A+1),P.push([He+A+1,He+1,He+A+2]),N.push(He+A+1,He+1,He+A+2)}}return{cells:P,positions:Z,uvs:Nt,positionsArr:W,indicesArr:N,normalArr:mt}}var ar=k(31437);const k2=ar.Ue(),F6=ar.Ue(),Zo=ar.Ue(),df=ar.Ue(),Fh=ar.Ue();function tv(a,i,s,f,g){ar.IH(a,s,f),ar.Fv(a,a),i=ar.al(-a[1],a[0]);const y=ar.al(-s[1],s[0]);return[g/ar.AK(i,y),i]}function hf(a,i){return ar.t8(a,-i[1],i[0])}function Nh(a,i,s){return ar.lu(a,i,s),ar.Fv(a,a),a}function D2(a,i){return a[0]===i[0]&&a[1]===i[1]}function N6(a){const i=new Map;for(let s=0;s<a.length;s++){const f=a[0].toString()+"-"+a[1].toString();i.get(f)?(a.splice(s,1),s++):i.set(f,f)}return a}class iC{constructor(i={}){(0,ct.Z)(this,"complex",void 0),(0,ct.Z)(this,"join",void 0),(0,ct.Z)(this,"cap",void 0),(0,ct.Z)(this,"miterLimit",void 0),(0,ct.Z)(this,"thickness",void 0),(0,ct.Z)(this,"normal",void 0),(0,ct.Z)(this,"lastFlip",-1),(0,ct.Z)(this,"miter",ar.al(0,0)),(0,ct.Z)(this,"started",!1),(0,ct.Z)(this,"dash",!1),(0,ct.Z)(this,"totalDistance",0),(0,ct.Z)(this,"currentIndex",0),this.join=i.join||"miter",this.cap=i.cap||"butt",this.miterLimit=i.miterLimit||10,this.thickness=i.thickness||1,this.dash=i.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(i){const s=this.complex;if(i.length<=1)return s;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const f=i.length;let g=s.startIndex;for(let y=1;y<f;y++){const x=i[y-1],O=i[y],A=y<i.length-1?i[y+1]:null,P=this.simpleSegment(s,g,x,O,A);g+=P}if(this.dash)for(let y=0;y<s.positions.length/6;y++)s.positions[y*6+5]=this.totalDistance;return s.startIndex=s.positions.length/6,s}extrude(i){const s=this.complex;if(i.length<=1)return s;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const f=i.length;let g=s.startIndex;for(let y=1;y<f;y++){const x=i[y-1],O=i[y],A=y<i.length-1?i[y+1]:null,P=this.segment(s,g,x,O,A);g+=P}if(this.dash)for(let y=0;y<s.positions.length/6;y++)s.positions[y*6+5]=this.totalDistance;return s.startIndex=s.positions.length/6,s}simpleSegment(i,s,f,g,y){let x=0;const O=i.indices,A=i.positions,P=i.normals,N=Oo([g[0],g[1]]),Z=Oo([f[0],f[1]]);Nh(Zo,N,Z);let W=0;if(this.dash&&(W=this.lineSegmentDistance(N,Z),this.totalDistance+=W),this.normal||(this.normal=ar.Ue(),hf(this.normal,Zo)),this.started||(this.started=!0,this.extrusions(A,P,f,this.normal,this.thickness,this.totalDistance-W)),O.push(s+0,s+1,s+2),!y)hf(this.normal,Zo),this.extrusions(A,P,g,this.normal,this.thickness,this.totalDistance),O.push(...this.lastFlip===1?[s,s+2,s+3]:[s+2,s+1,s+3]),x+=2;else{const mt=Oo([y[0],y[1]]);D2(N,mt)&&ar.IH(mt,N,ar.Fv(mt,ar.$X(mt,N,Z))),Nh(df,mt,N);const[Nt,Jt]=tv(Fh,ar.Ue(),Zo,df,this.thickness);let ye=ar.AK(Fh,this.normal)<0?-1:1;this.extrusions(A,P,g,Jt,Nt,this.totalDistance),O.push(...this.lastFlip===1?[s,s+2,s+3]:[s+2,s+1,s+3]),ye=-1,ar.JG(this.normal,Jt),x+=2,this.lastFlip=ye}return x}segment(i,s,f,g,y){let x=0;const O=i.indices,A=i.positions,P=i.normals,N=this.cap==="square",Z=this.join==="bevel",W=Oo([g[0],g[1]]),mt=Oo([f[0],f[1]]);Nh(Zo,W,mt);let Nt=0;if(this.dash&&(Nt=this.lineSegmentDistance(W,mt),this.totalDistance+=Nt),this.normal||(this.normal=ar.Ue(),hf(this.normal,Zo)),!this.started)if(this.started=!0,N){const Jt=ar.Ue(),ye=ar.Ue();ar.IH(Jt,this.normal,Zo),ar.IH(ye,this.normal,Zo),P.push(ye[0],ye[1],0),P.push(Jt[0],Jt[1],0),A.push(f[0],f[1],f[2]|0,this.totalDistance-Nt,-this.thickness,f[2]|0),this.complex.indexes.push(this.currentIndex),A.push(f[0],f[1],f[2]|0,this.totalDistance-Nt,this.thickness,f[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(A,P,f,this.normal,this.thickness,this.totalDistance-Nt);if(O.push(s+0,s+1,s+2),y){const Jt=Oo([y[0],y[1]]);D2(W,Jt)&&ar.IH(Jt,W,ar.Fv(Jt,ar.$X(Jt,W,mt))),Nh(df,Jt,W);const[ye,Ne]=tv(Fh,ar.Ue(),Zo,df,this.thickness);let ze=ar.AK(Fh,this.normal)<0?-1:1,He=Z;!He&&this.join==="miter"&&ye>this.miterLimit&&(He=!0),He?(P.push(this.normal[0],this.normal[1],0),P.push(Ne[0],Ne[1],0),A.push(g[0],g[1],g[2]|0,this.totalDistance,-this.thickness*ze,g[2]|0),this.complex.indexes.push(this.currentIndex),A.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness*ze,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,O.push(...this.lastFlip!==-ze?[s,s+2,s+3]:[s+2,s+1,s+3]),O.push(s+2,s+3,s+4),hf(k2,df),ar.JG(this.normal,k2),P.push(this.normal[0],this.normal[1],0),A.push(g[0],g[1],g[2]|0,this.totalDistance,-this.thickness*ze,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,x+=3):(this.extrusions(A,P,g,Ne,ye,this.totalDistance),O.push(...this.lastFlip===1?[s,s+2,s+3]:[s+2,s+1,s+3]),ze=-1,ar.JG(this.normal,Ne),x+=2),this.lastFlip=ze}else{if(hf(this.normal,Zo),N){const Jt=ar.Ue(),ye=ar.Ue();ar.lu(ye,Zo,this.normal),ar.IH(Jt,Zo,this.normal),P.push(ye[0],ye[1],0),P.push(Jt[0],Jt[1],0),A.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness,g[2]|0),this.complex.indexes.push(this.currentIndex),A.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(A,P,g,this.normal,this.thickness,this.totalDistance);O.push(...this.lastFlip===1?[s,s+2,s+3]:[s+2,s+1,s+3]),x+=2}return x}extrusions(i,s,f,g,y,x){s.push(g[0],g[1],0),s.push(g[0],g[1],0),i.push(f[0],f[1],f[2]|0,x,-y,f[2]|0),this.complex.indexes.push(this.currentIndex),i.push(f[0],f[1],f[2]|0,x,y,f[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(i,s){const f=s[0]-i[0],g=s[1]-i[1];return Math.sqrt(f*f+g*g)}}let Co=function(a){return a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn",a}({}),Ho=function(a){return a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon",a}({});function wc(a,i=0){const s=Math.PI*2/a,f=[];for(let y=0;y<a;y++)f.push(s*y+i*Math.PI/12);return f.map(y=>{const x=Math.sin(y+Math.PI/4),O=Math.cos(y+Math.PI/4);return[x,O,0]})}function Bh(){return wc(30)}function F2(){return wc(4)}function N2(){return wc(3)}function B2(){return wc(6,1)}function ev(){return wc(5)}const nv={[Ho.CIRCLE]:Bh,[Ho.HEXAGON]:B2,[Ho.TRIANGLE]:N2,[Ho.SQUARE]:F2,[Ho.PENTAGON]:ev,[Co.CYLINDER]:Bh,[Co.HEXAGONCOLUMN]:B2,[Co.TRIANGLECOLUMN]:N2,[Co.SQUARECOLUMN]:F2,[Co.PENTAGONCOLUMN]:ev};var kr=k(77160);function oC(a){const i=a[0][0],s=a[0][a[0].length-1];i[0]===s[0]&&i[1]===s[1]&&(a[0]=a[0].slice(0,a[0].length-1));const f=a[0].length,g=earcut.flatten(a),{vertices:y,dimensions:x}=g,O=[],A=[];for(let N=0;N<y.length/x;N++)x===2?O.push(y[N*2],y[N*2+1],1):O.push(y[N*3],y[N*3+1],1);const P=earcut(g.vertices,g.holes,g.dimensions);A.push(...P);for(let N=0;N<f;N++){const Z=g.vertices.slice(N*x,(N+1)*x);let W=g.vertices.slice((N+1)*x,(N+2)*x);W.length===0&&(W=g.vertices.slice(0,x));const mt=O.length/3;O.push(Z[0],Z[1],1,W[0],W[1],1,Z[0],Z[1],0,W[0],W[1],0),A.push(...[0,2,1,2,3,1].map(Nt=>Nt+mt))}return{positions:O,index:A}}function j2(a){const i=earcut.flatten(a),s=earcut(i.vertices,i.holes,i.dimensions);return{positions:i.vertices,index:s}}function rv(a,i=!1){const s=a[0][0],f=a[0][a[0].length-1];s[0]===f[0]&&s[1]===f[1]&&(a[0]=a[0].slice(0,a[0].length-1));const g=a[0].length,y=ff().flatten(a),{vertices:x,dimensions:O,holes:A}=y,P=[],N=[],Z=[];for(let mt=0;mt<x.length/O;mt++)P.push(x[mt*O],x[mt*O+1],1,-1,-1),Z.push(0,0,1);const W=Jg(x,A,O,i);N.push(...W);for(let mt=0;mt<g;mt++){const Nt=y.vertices.slice(mt*O,(mt+1)*O);let Jt=y.vertices.slice((mt+1)*O,(mt+2)*O);Jt.length===0&&(Jt=y.vertices.slice(0,O));const ye=P.length/5;P.push(Nt[0],Nt[1],1,0,0,Jt[0],Jt[1],1,.1,0,Nt[0],Nt[1],0,0,.8,Jt[0],Jt[1],0,.1,.8);const Ne=iv([Jt[0],Jt[1],1],[Nt[0],Nt[1],0],[Nt[0],Nt[1],1],i);Z.push(...Ne,...Ne,...Ne,...Ne),N.push(...[1,2,0,3,2,1].map(ze=>ze+ye))}return{positions:P,index:N,normals:Z}}function iv(a,i,s,f=!1){const g=kr.Ue(),y=kr.Ue(),x=kr.Ue();f&&(a=Hc(a),i=Hc(i),s=Hc(s));const O=kr.al(...a),A=kr.al(...i),P=kr.al(...s);kr.lu(g,P,A),kr.lu(y,O,A),kr.kC(x,g,y);const N=kr.Ue();return kr.Fv(N,x),N}const jh={};function Ac(a){const i=Xs(a.coordinates);return{vertices:[...i,...i,...i,...i],indices:[0,1,2,2,3,0],size:i.length}}function z2(a){const i=Xs(a.coordinates),s=R2(i);return{vertices:[...s,...s,...s,...s],indices:[0,1,2,2,3,0],size:s.length}}function U2(a){const{shape:i}=a,{positions:s,index:f,normals:g}=hC(i,!1);return{vertices:s,indices:f,normals:g,size:5}}function aC(a){const i=Xs(a.coordinates);return{vertices:[...i],indices:[0],size:i.length}}function ov(a){const{coordinates:i}=a,s=new iC({dash:!0,join:"bevel"});let f=i;f[0]&&!Array.isArray(f[0][0])&&(f=[i]),f.forEach(y=>{s.extrude(y)});const g=s.complex;return{vertices:g.positions,indices:g.indices,normals:g.normals,indexes:g.indexes,size:6}}function sC(a){const i=a.coordinates.flat(),s=1,f=1;return{vertices:[1,0,0,...i,1,2,-3,...i,1,1,-3,...i,0,1,0,...i,0,0,0,...i,1,0,0,...i,1,2,-3,...i,1,1,-3,...i,0,1,0,...i,0,0,0,...i],normals:[-s,2*f,1,2*f,-f,1,f,-f,1,f,-f,1,-s,-f,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function cC(a){const{coordinates:i}=a,s=[];if(!Array.isArray(i[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:f,totalDistance:g}=H2(i);return f.map(y=>{s.push(y[0],y[1],y[2],y[3],0,g)}),{vertices:s,indices:[],normals:[],size:6,count:f.length}}function B6(a){const{coordinates:i}=a,s=[];if(!Array.isArray(i[0]))return{vertices:[],indices:[],size:4,count:0};const{results:f}=av(i);return f.map(g=>{s.push(g[0],g[1],g[2],g[3])}),{vertices:s,indices:[],size:4,count:f.length}}function Z2(a,i){const s=i[0]-a[0],f=i[1]-a[1];return Math.sqrt(s*s+f*f)}function wl(a,i){return a.length<3&&a.push(0),i!==void 0&&a.push(i),a}function H2(a){let i=a;Array.isArray(i)&&Array.isArray(i[0])&&Array.isArray(i[0][0])&&(i=a.flat());let s=0;if(i.length<2)return{results:i,totalDistance:0};{const f=[],g=wl(i[0],s);f.push(g);for(let x=1;x<i.length-1;x++){const O=Z2(Oo(i[x-1]),Oo(i[x]));s+=O;const A=wl(i[x],s);f.push(A),f.push(A)}const y=Z2(Oo(i[i.length-2]),Oo(i[i.length-1]));return s+=y,f.push(wl(i[i.length-1],s)),{results:f,totalDistance:s}}}function av(a){if(a.length<2)return{results:a};{const i=[],s=wl(a[0]);i.push(s);for(let f=1;f<a.length-1;f++){const g=wl(a[f]);i.push(g),i.push(g)}return i.push(wl(a[a.length-1])),{results:i}}}function pf(a){const{coordinates:i}=a,s=ff().flatten(i),{vertices:f,dimensions:g,holes:y}=s;return{indices:Jg(f,y,g),vertices:f,size:g}}function lC(a){const{indices:i,vertices:s,size:f}=pf(a);return{indices:i,vertices:uC(s),size:f+4}}function uC(a){const i=[],{center:s,radius:f}=MO(a);for(let g=0;g<a.length;g+=2){const y=a[g],x=a[g+1];i.push(y,x,0,...s,f)}return i}function V2(a){const i=a.coordinates,{positions:s,index:f,normals:g}=rv(i,!0);return{vertices:s,indices:f,normals:g,size:5}}function fC(a){const{shape:i}=a,{positions:s,index:f}=G2(i);return{vertices:s,indices:f,size:3}}function Tc(a){const i=a.coordinates;return{vertices:[...i[0],0,0,0,...i[1],0,1,0,...i[2],0,1,1,...i[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function zh(a,i){const{segmentNumber:s=30}=i,f=a.coordinates,g=[],y=[];for(let x=0;x<s;x++)g.push(x,1,x,f[0][0],f[0][1],f[1][0],f[1][1],x,-1,x,f[0][0],f[0][1],f[1][0],f[1][1]),x!==s-1&&y.push(...[0,1,2,1,3,2].map(O=>x*2+O));return{vertices:g,indices:y,size:7}}function dC(a){const i=a.coordinates;i.length===2&&i.push(0);const s=Uh(-1,1),f=Uh(1,1),g=Uh(-1,-1),y=Uh(1,-1);return{vertices:[...i,...s,...i,...g,...i,...y,...i,...f],indices:[0,1,2,3,0,2],size:5}}function hC(a,i=!1){if(jh&&jh[a])return jh[a];const s=nv[a]?nv[a]():nv.cylinder(),f=rv([s],i);return jh[a]=f,f}function pC(a,i,s=3,f=!1){const g=new Float32Array(a.length/s*3);let y,x,O;const A=vec3.create(),P=vec3.create(),N=vec3.create();for(let Z=0,W=i.length;Z<W;Z+=3){y=i[Z+0]*3,x=i[Z+1]*3,O=i[Z+2]*3;let mt=[a[y],a[y+1]],Nt=[a[x],a[x+1]],Jt=[a[O],a[O+1]];f&&(mt=lngLatToMeters(mt),Nt=lngLatToMeters(Nt),Jt=lngLatToMeters(Jt));const[ye,Ne]=mt,ze=vec3.fromValues(ye,Ne,a[y+2]),[He,nn]=Nt,pn=vec3.fromValues(He,nn,a[x+2]),[In,En]=Jt,Rn=vec3.fromValues(In,En,a[O+2]);vec3.sub(A,Rn,pn),vec3.sub(P,ze,pn),vec3.cross(N,A,P),g[y]+=A[0],g[y+1]+=A[1],g[y+2]+=A[2],g[x]+=A[0],g[x+1]+=A[1],g[x+2]+=A[2],g[O]+=A[0],g[O+1]+=A[1],g[O+2]+=A[2]}return W2(g),g}function W2(a){for(let i=0,s=a.length;i<s;i+=3){const f=vec3.fromValues(a[i],a[i+1],a[i+2]),g=vec3.create();vec3.normalize(g,f),a.set(g,i)}}function Ja(a){const i=a[0][0],s=a[0][a[0].length-1];return i[0]===s[0]&&i[1]===s[1]}function G2(a){const i=["cylinder","triangleColumn","hexagonColumn","squareColumn"],s=geometryShape[a]?geometryShape[a]():geometryShape.circle();return i.indexOf(a)===-1?fillPolygon([s]):extrudePolygon([s])}function Uh(a,i){const s=(a+1)/2,f=(i+1)/2;return[s,f]}function j6(){const a=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),{positionsArr:i,indicesArr:s,normalArr:f}=a;return{vertices:i,indices:s,size:5,normals:f}}function z6(){const a=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),{positionsArr:i,indicesArr:s,normalArr:f}=a;return{vertices:i,indices:s,size:5,normals:f}}const gC=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,$2=`#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  if (u_lineDir == 1.0) {
    // \u6B63\u5411
    return mid;
  } else {
    // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
  //  return index / (segmentNumber - 1.);
}
vec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x, t), bezier3(y, t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return dir_screenspace.xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if (u_linearColor == 1.0) {
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);
  } else {
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source_world = a_Instance.rg; // \u8D77\u59CB\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9

  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  // \u8BA1\u7B97 dashArray \u548C distanceRatio \u8F93\u51FA\u5230\u7247\u5143
  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);
  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);

  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);
  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);

  vec2 offset = project_pixel(
    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)
  );

  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F
    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    arcDistrance = project_pixel(arcDistrance);

    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance / pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,vC={solid:0,dash:1};class Y2 extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"updateTexture",()=>{const{createTexture2D:s}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=s({data:this.iconService.getCanvas(),mag:ot.NEAREST,min:ot.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:s,textureBlend:f="normal",lineType:g="solid",dashArray:y=[10,5],forward:x=!0,lineTexture:O=!1,iconStep:A=100,segmentNumber:P=30}=this.layer.getLayerConfig(),{animateOption:N}=this.layer.getLayerConfig();let Z=y;g!=="dash"&&(Z=[0,0]),Z.length===2&&Z.push(0,0);let W=0,mt=[0,0,0,0],Nt=[0,0,0,0];if(i&&s&&(mt=Fr(i),Nt=Fr(s),W=1),this.rendererService.getDirty()){var Jt;(Jt=this.texture)===null||Jt===void 0||Jt.bind()}const ye={u_animate:this.animateOption2Array(N),u_dash_array:Z,u_sourceColor:mt,u_targetColor:Nt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:P,u_lineDir:x?1:-1,u_icon_step:A,u_line_texture:O?1:0,u_textureBlend:f==="normal"?0:1,u_blur:.9,u_line_type:vC[g||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:W};return this.getUniformsBufferInfo(ye)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:gC,vert:$2,type:""}}buildModels(){var i=this;return(0,ln.Z)(function*(){i.initUniformsBuffer();const{segmentNumber:s=30}=i.layer.getLayerConfig(),{frag:f,vert:g,type:y}=i.getShaders();return[yield i.layer.buildLayerModel({moduleName:"lineArc2d"+y,vertexShader:g,fragmentShader:f,defines:i.getDefines(),inject:i.getInject(),triangulation:zh,depth:{enable:!1},styleOption:{segmentNumber:s}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=1}=i;return Array.isArray(s)?[s[0]]:[s]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Dn.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f)=>[f[3],f[4],f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Dn.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f)=>[bi(f[3]),bi(f[4]),bi(f[5]),bi(f[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const s=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=s[f]||{x:0,y:0};return[g,y]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Dn.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{thetaOffset:s=1}=i;return[s]}}})}}const mC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec4 v_dash_array;
in float v_segmentIndex;
in vec2 v_iconMapUV;
in vec4 v_line_data;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,yC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;

    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }


  setPickingColor(a_PickingColor);
}
`,U6={solid:0,dash:1};class sv extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"updateTexture",()=>{const{createTexture2D:s}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=s({data:this.iconService.getCanvas(),mag:ot.NEAREST,min:ot.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:s,textureBlend:f="normal",lineType:g="solid",dashArray:y=[10,5],lineTexture:x=!1,iconStep:O=100,segmentNumber:A=30,globalArcHeight:P=10}=this.layer.getLayerConfig(),{animateOption:N}=this.layer.getLayerConfig();y.length===2&&y.push(0,0);let Z=0,W=[0,0,0,0],mt=[0,0,0,0];if(i&&s&&(W=Fr(i),mt=Fr(s),Z=1),this.rendererService.getDirty()){var Nt;(Nt=this.texture)===null||Nt===void 0||Nt.bind()}const Jt={u_animate:this.animateOption2Array(N),u_dash_array:y,u_sourceColor:W,u_targetColor:mt,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:P2,u_global_height:P,segmentNumber:A,u_line_type:U6[g]||0,u_icon_step:O,u_line_texture:x?1:0,u_textureBlend:f==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Z};return this.getUniformsBufferInfo(Jt)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:mC,vert:yC,type:""}}buildModels(){var i=this;return(0,ln.Z)(function*(){const{segmentNumber:s=30}=i.layer.getLayerConfig(),{frag:f,vert:g,type:y}=i.getShaders();return[yield i.layer.buildLayerModel({moduleName:"lineArc3d"+y,vertexShader:g,fragmentShader:f,defines:i.getDefines(),inject:i.getInject(),triangulation:zh,styleOption:{segmentNumber:s}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=1}=i;return Array.isArray(s)?[s[0]]:[s]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Dn.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f)=>[f[3],f[4],f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Dn.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f)=>[bi(f[3]),bi(f[4]),bi(f[5]),bi(f[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const s=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=s[f]||{x:0,y:0};return[g,y]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Dn.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{thetaOffset:s=1}=i;return[s]}}})}}const X2={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},yo=1/2;function gf(a,i){const{width:s=2,height:f=1}=i;return{vertices:[0,yo*a,1*a*s,-(f+yo)*a,1*a*s,(f-yo)*a,0,yo*a,1*a*s,-(f+yo)*a,1*a*s,(f-yo)*a],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*a,-2*a,1,-2*a,1.5*a,1,1*a,1.5*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function vf(a,i){const{width:s=2,height:f=3}=i;return{vertices:[0,0,1*a*s,1*f,1*a*s,-1*f,0,0,1*a*s,1*f,1*a*s,-1*f],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*a,1,2,1*a,1,-2,1*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Cc(a,i){const{width:s=2,height:f=2}=i;return{vertices:[0,f/2,a*s*1,f/2,a*s*1,-f/2,0,-f/2,0,f/2,a*s*1,f/2,a*s*1,-f/2,0,-f/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function q2(a,i){const{width:s=2,height:f=3}=i;return{vertices:[0,0,1*s*a,.5*f,2*s*a,0,1*s*a,-.5*f,0,0,1*s*a,.5*f,2*s*a,0,1*s*a,-.5*f],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function bC(a,i){const{width:s=2,height:f=3}=i;return{vertices:[0,0,2*a*s,1*f,1.5*a*s,0,2*a*s,-1*f,0,0,2*a*s,1*f,1.5*a*s,0,2*a*s,-1*f],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function _C(a,i){const{width:s=2,height:f=2}=i,g=Bh(),y=ff().flatten([g]),x=ff()(y.vertices,y.holes,y.dimensions),O=g.map(A=>[A[0]*s*a,A[1]*f]).flat();return{vertices:[...O,...O],dimensions:2,indices:x.map(A=>A+g.length),outLineIndices:x,normals:[...g.map(A=>[A[1]*f,A[0]*s*a,1]).flat(),...new Array(g.length*3).fill(0)]}}function K2(a,i=0,s){const f=typeof s.source=="object"?s.source.type:s.source,g=typeof s.target=="object"?s.target.type:s.target,{width:y=f?X2[f]:0}=typeof s.source=="object"?s.source:{},{width:x=g?X2[g]:0}=typeof s.target=="object"?s.target:{};return{vertices:[0,yo,1*y,...a,1,yo,-1*x,...a,1,-yo,-1*x,...a,0,-yo,1*y,...a,0,yo,1*y,...a,1,yo,-1*x,...a,1,-yo,-1*x,...a,0,-yo,1*y,...a],outLineIndices:[0,1,2,0,2,3].map(O=>O+i),indices:[4,5,6,4,6,7].map(O=>O+i),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function Zh(a,i){const s=typeof a=="object"?a.type:a,f=i==="source"?1:-1,g=typeof a=="object"?a:{};switch(s){case"circle":return _C(f,g);case"triangle":return vf(f,g);case"diamond":return q2(f,g);case"rect":return Cc(f,g);case"classic":return bC(f,g);case"halfTriangle":return gf(f,g);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function Q2(a){const i=a.coordinates.flat(),s=1,f=1;return{vertices:[1,0,0,...i,1,2,-3,...i,1,1,-3,...i,0,1,0,...i,0,0,0,...i,1,0,0,...i,1,2,-3,...i,1,1,-3,...i,0,1,0,...i,0,0,0,...i],normals:[-s,2*f,1,2*f,-f,1,f,-f,1,f,-f,1,-s,-f,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function xC(a,i){return i?SC(a,i):Q2(a)}function SC(a,i){const s=a.coordinates.flat(),{target:f="classic",source:g="circle"}=i,y=Fs(Zh(g,"source"),s,0,0),x=K2(s,y.vertices.length/7,i),O=Fs(Zh(f,"target"),s,1,y.vertices.length/7+x.vertices.length/7);return{vertices:[...y.vertices,...x.vertices,...O.vertices],indices:[...y.outLineIndices,...x.outLineIndices,...O.outLineIndices,...y.indices,...x.indices,...O.indices],normals:[...y.normals,...x.normals,...O.normals],size:7}}function Fs(a,i,s=1,f=0){const g=[],{vertices:y,indices:x,dimensions:O,outLineIndices:A}=a;for(let P=0;P<y.length;P+=O)g.push(s,y[P+1],y[P],...i);return(0,on.Z)((0,on.Z)({},a),{},{vertices:g,indices:x.map(P=>P+f),outLineIndices:A.map(P=>P+f)})}const Hh=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,OC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {
  vec2 data = project_pixel(offsets);

  return vec2(data.x, -data.y);
}

vec2 line_dir(vec2 target, vec2 source) {
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}


void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source_world = a_Instance.rg; // \u8D77\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target_world, source_world);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);

  vec2 position = mix(source_world, target_world, a_Position.x);
  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);

  float lengthCommon = length(
    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))
  );
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(
    offsetDistances,
    project_pixel(-lengthCommon * 0.2),
    project_pixel(lengthCommon * 0.2)
  );

  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),
    a_Position.x
  );

  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));

  float gapCommon = -1. * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));

  setPickingColor(a_PickingColor);
}
`;class EC extends Vr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,NORMAL:12})}getCommonUniformsInfo(){const{gapWidth:i=2,strokeWidth:s=1,strokeOpacity:f=1}=this.layer.getLayerConfig(),g={u_gap_width:i,u_stroke_width:s,u_stroke_opacity:f};return this.getUniformsBufferInfo(g)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return[yield i.layer.buildLayerModel({moduleName:"flow_line",vertexShader:OC,fragmentShader:Hh,defines:i.getDefines(),inject:i.getInject(),triangulation:xC,styleOption:i.layer.getLayerConfig().symbol,primitive:ot.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const{size:s=1}=i;return Array.isArray(s)?[s[0],s[1]]:[s,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Dn.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f)=>[f[3],f[4],f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Dn.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f)=>[bi(f[3]),bi(f[4]),bi(f[5]),bi(f[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f,g,y)=>y}})}}const wC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_dash_array;
in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_line_data;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,J2=`#define LineTypeSolid (0.0)
#define LineTypeDash (1.0)
#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps(float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.0);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}
float getAngularDist(vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {
  if (abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));

}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if (u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    total_Distance = total_Distance * 16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if (u_animate.x == Animate) {
    v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);

  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if (LineTexture == u_line_texture) {
    float d_arcDistrance = length(source - target);
    d_arcDistrance = project_pixel(d_arcDistrance);

    float d_pixelLen = project_pixel(u_icon_step) / 8.0;
    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,Ns={solid:0,dash:1};class cv extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"updateTexture",()=>{const{createTexture2D:s}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=s({data:this.iconService.getCanvas(),mag:ot.NEAREST,min:ot.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:s,textureBlend:f="normal",lineType:g="solid",dashArray:y=[10,5],lineTexture:x=!1,iconStep:O=100,segmentNumber:A=30}=this.layer.getLayerConfig(),{animateOption:P}=this.layer.getLayerConfig();if(y.length===2&&y.push(0,0),this.rendererService.getDirty()){var N;(N=this.texture)===null||N===void 0||N.bind()}let Z=0,W=[0,0,0,0],mt=[0,0,0,0];i&&s&&(W=Fr(i),mt=Fr(s),Z=1);let Nt=this.layer.getLayerAnimateTime();isNaN(Nt)&&(Nt=0);const Jt={u_animate:this.animateOption2Array(P),u_dash_array:y,u_sourceColor:W,u_targetColor:mt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:A,u_line_type:Ns[g]||0,u_icon_step:O,u_line_texture:x?1:0,u_textureBlend:f==="normal"?0:1,u_time:Nt,u_linearColor:Z};return this.getUniformsBufferInfo(Jt)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var i=this;return(0,ln.Z)(function*(){const{segmentNumber:s=30}=i.layer.getLayerConfig();return[yield i.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:J2,fragmentShader:wC,triangulation:zh,styleOption:{segmentNumber:s},defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=1}=i;return Array.isArray(s)?[s[0]]:[s]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Dn.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f)=>[f[3],f[4],f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Dn.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f)=>[bi(f[3]),bi(f[4]),bi(f[5]),bi(f[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const s=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=s[f]||{x:0,y:0};return[g,y]}}})}}let AC=function(a){return a[a.solid=0]="solid",a[a.dash=1]="dash",a}({}),tx=function(a){return a.VERTICAL="vertical",a.HORIZONTAL="horizontal",a}({}),ex=function(a){return a.NORMAL="normal",a.REPLACE="replace",a}({}),Vh=function(a){return a[a.pixel=0]="pixel",a[a.meter=1]="meter",a}({}),TC=function(a){return a.ALWAYS="always",a.DRAGEND="dragend",a}({});const CC=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,MC=`#define Animate (0.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;

  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0; // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    h *= mapboxZoomScale;
    h += u_raisingHeight * mapboxZoomScale;
    if (u_heightfixed > 0.0) {
      lineHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(
    vec4(project_pos.xy + offset, lineHeight + h, 1.0)
  );

  setPickingColor(a_PickingColor);
}
`;class lv extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"textureEventFlag",!1),(0,ct.Z)(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,ct.Z)(this,"updateTexture",()=>{const{createTexture2D:s}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=s({data:this.iconService.getCanvas(),mag:ot.NEAREST,min:ot.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,DISTANCE_INDEX:10,NORMAL:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:s,textureBlend:f="normal",lineType:g="solid",dashArray:y=[10,5,0,0],lineTexture:x=!1,iconStep:O=100,vertexHeightScale:A=20,strokeWidth:P=0,raisingHeight:N=0,heightfixed:Z=!1,linearDir:W=tx.VERTICAL,blur:mt=[1,1,1,0]}=this.layer.getLayerConfig();let Nt=y;if(g!=="dash"&&(Nt=[0,0,0,0]),Nt.length===2&&Nt.push(0,0),this.rendererService.getDirty()&&this.texture){var Jt;(Jt=this.texture)===null||Jt===void 0||Jt.bind()}const{animateOption:ye}=this.layer.getLayerConfig();let Ne=0,ze=[0,0,0,0],He=[0,0,0,0];i&&s&&(ze=Fr(i),He=Fr(s),Ne=1);const nn={u_animate:this.animateOption2Array(ye),u_dash_array:Nt,u_blur:mt,u_sourceColor:ze,u_targetColor:He,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:O,u_heightfixed:Number(Z),u_vertexScale:A,u_raisingHeight:Number(N),u_strokeWidth:P,u_textureBlend:f===ex.NORMAL?0:1,u_line_texture:x?1:0,u_linearDir:W===tx.VERTICAL?1:0,u_linearColor:Ne,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(nn)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),i.textureEventFlag||(i.textureEventFlag=!0,i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture)),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var i=this;return(0,ln.Z)(function*(){const{depth:s=!1}=i.layer.getLayerConfig(),{frag:f,vert:g,type:y}=i.getShaders();return i.layer.triangulation=ov,[yield i.layer.buildLayerModel({moduleName:"line"+y,vertexShader:g,fragmentShader:f,triangulation:ov,defines:i.getDefines(),inject:i.getInject(),depth:{enable:s}})]})()}getShaders(){return{frag:CC,vert:MC,type:""}}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Dn.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:this.attributeLocation.DISTANCE_INDEX,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f,g,y,x)=>x===void 0?[f[3],10,f[4]]:[f[3],x,f[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const{size:s=1}=i;return Array.isArray(s)?[s[0],s[1]]:[s,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:Dn.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f,g,y)=>[...y,f[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const s=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=s[f]||{x:0,y:0};return[g,y]}}})}}const nx=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,LC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color;
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  float lineHeight = a_SizeDistanceAndTotalDistance.y;
  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  gl_PointSize = 10.0;

}
`;class rx extends Vr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:s,lineType:f="solid",dashArray:g=[10,5,0,0],vertexHeightScale:y=20}=this.layer.getLayerConfig();let x=g;f!=="dash"&&(x=[0,0,0,0]),x.length===2&&x.push(0,0);let O=0,A=[0,0,0,0],P=[0,0,0,0];i&&s&&(A=Fr(i),P=Fr(s),O=1);const N={u_sourceColor:A,u_targetColor:P,u_dash_array:x,u_vertexScale:y,u_linearColor:O};return this.getUniformsBufferInfo(N)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}getShaders(){return{frag:nx,vert:LC,type:"lineSimpleNormal"}}buildModels(){var i=this;return(0,ln.Z)(function*(){i.initUniformsBuffer();const{frag:s,vert:f,type:g}=i.getShaders();return[yield i.layer.buildLayerModel({moduleName:g,vertexShader:f,fragmentShader:s,triangulation:cC,defines:i.getDefines(),inject:i.getInject(),primitive:ot.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:Dn.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:4,update:(i,s,f)=>{const{size:g=1}=i,y=Array.isArray(g)?[g[0],g[1]]:[g,0];return[y[0],y[1],f[3],f[5]]}}})}}const ix=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};


in vec2 v_iconMapUV;
in vec4 v_color;
in float v_blur;
in vec4 v_dataset;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }


  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,La=`#define Animate 0.0
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out vec4 v_dataset;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float a_Distance = a_Distance_Total_Miter.x;
  float a_Miter = a_Distance_Total_Miter.y;
  float a_Total_Distance = a_Distance_Total_Miter.z;

  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if (u_heightfixed < 1.0) {
    // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }

  if (u_animate.x == Animate || u_linearColor == 1.0) {
    d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0) / 2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance; // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float originSize = a_Size.x; // \u56FA\u5B9A\u9AD8\u5EA6
  if (u_heightfixed < 1.0) {
    originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    if (u_heightfixed > 0.0) {
      wallHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class ox extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"updateTexture",()=>{const{createTexture2D:s}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=s({data:this.iconService.getCanvas(),mag:ot.NEAREST,min:ot.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:12,UV:13,DISTANCE_MITER_TOTAL:15})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:s,textureBlend:f="normal",heightfixed:g=!1,lineTexture:y=!1,iconStep:x=100,iconStepCount:O=1}=this.layer.getLayerConfig(),{animateOption:A}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var P;(P=this.texture)===null||P===void 0||P.bind()}let N=0,Z=[0,0,0,0],W=[0,0,0,0];i&&s&&(Z=Fr(i),W=Fr(s),N=1);const mt={u_animate:this.animateOption2Array(A),u_sourceColor:Z,u_targetColor:W,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:x,u_heightfixed:Number(g),u_linearColor:N,u_line_texture:y?1:0,u_textureBlend:f==="normal"?0:1,u_iconStepCount:O,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(mt)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var i=this;return(0,ln.Z)(function*(){return[yield i.layer.buildLayerModel({moduleName:"lineWall",vertexShader:La,fragmentShader:ix,triangulation:ov,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1},blend:i.getBlend()})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const{size:s=1}=i;return Array.isArray(s)?[s[0],s[1]]:[s,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f,g,y)=>y}}),this.styleAttributeService.registerStyleAttribute({name:"distanceAndTotalAndMiter",type:Dn.Attribute,descriptor:{name:"a_Distance_Total_Miter",shaderLocation:this.attributeLocation.DISTANCE_MITER_TOTAL,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f)=>[f[3],f[4],f[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const s=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=s[f]||{x:0,y:0};return[g,y]}}})}}var ax={arc:Y2,arc3d:sv,greatcircle:cv,wall:ox,line:lv,simple:rx,flowline:EC,earthArc3d:sv};class Wh extends El{constructor(...i){super(...i),(0,ct.Z)(this,"type","LineLayer"),(0,ct.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,ct.Z)(this,"arrowInsertCount",0),(0,ct.Z)(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var i=this;return(0,ln.Z)(function*(){const s=i.getModelType();i.layerModel=new ax[s](i),yield i.initLayerModels()})()}getDefaultConfig(){const i=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[i]}getModelType(){var i;if(this.layerType)return this.layerType;const s=this.styleAttributeService.getLayerStyleAttribute("shape");return(s==null||(i=s.scale)===null||i===void 0?void 0:i.field)||"line"}processData(i){if(this.getModelType()!=="simple")return i;const s=[];return i.map(f=>{if(Array.isArray(f.coordinates)&&Array.isArray(f.coordinates[0])&&Array.isArray(f.coordinates[0][0])){const g=(0,on.Z)({},f);f.coordinates.map(y=>{s.push((0,on.Z)((0,on.Z)({},g),{},{coordinates:y}))})}else s.push(f)}),s}}const sx=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,PC=`#define pi (3.1415926535)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if (x > 0.0 && z > 0.0) {
    return atan(x / z);
  } else if (x > 0.0 && z <= 0.0) {
    return atan(-z / x) + pi / 2.0;
  } else if (x <= 0.0 && z <= 0.0) {
    return pi + atan(x / z); //atan(x/z) +
  } else {
    return atan(z / -x) + pi * 3.0 / 2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y / r);
}

void main() {
  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if (u_heightfixed < 1.0) {
    // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
  } else {
    // \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);
    }
  }

  vec2 positions = a_Extrude.xy;
  vec2 positions64Low = a_Extrude.zw;
  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if (u_lightEnable > 0.0) {
    // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if (u_linearColor == 1.0) {
    // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a = v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

  if (u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;
  }

  gl_Position = project_common_position_to_clipspace(pos);

  setPickingColor(a_PickingColor);
}
`;class uv extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"raiseCount",0),(0,ct.Z)(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:i={enable:!1,speed:.01,repeat:!1},sourceColor:s,targetColor:f,pickLight:g=!1,heightfixed:y=!1,opacityLinear:x={enable:!1,dir:"up"},lightEnable:O=!0}=this.layer.getLayerConfig();let A=0,P=[0,0,0,0],N=[0,0,0,0];if(s&&f&&(P=Fr(s),N=Fr(f),A=1),this.raiseCount<1&&this.raiseRepeat>0&&i.enable){const{speed:mt=.01}=i;this.raiseCount+=mt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const Z={u_pickLight:Number(g),u_heightfixed:Number(y),u_r:i.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:A,u_sourceColor:P,u_targetColor:N,u_opacitylinear:Number(x.enable),u_opacitylinear_dir:x.dir==="up"?1:0,u_lightEnable:Number(O)};return this.getUniformsBufferInfo(Z)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){const{depth:s=!0,animateOption:{repeat:f=1}}=i.layer.getLayerConfig();return i.raiseRepeat=f,i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:PC,fragmentShader:sx,triangulation:U2,defines:i.getDefines(),inject:i.getInject(),cull:{enable:!0,face:ot.FRONT},depth:{enable:s}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:3,update:i=>{const{size:s}=i;if(s){let f=[];return Array.isArray(s)&&(f=s.length===2?[s[0],s[0],s[1]]:s),Array.isArray(s)||(f=[s,s,s]),f}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f,g,y)=>y}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:4,update:i=>{const s=Xs(i.coordinates);return[s[0],s[1],bi(s[0]),bi(s[1])]}}})}}const Al=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,IC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class RC extends Vr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:i=1,strokeWidth:s=0,blend:f,blur:g=0,raisingHeight:y=0,heightfixed:x=!1,unit:O="pixel"}=this.layer.getLayerConfig();let A=this.getAnimateUniforms().u_time;isNaN(A)&&(A=-1);const P={u_blur_height_fixed:[g,Number(y),Number(x)],u_stroke_width:s,u_additive:f==="additive"?1:0,u_stroke_opacity:i,u_size_unit:Vh[O],u_time:A,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(P)}getAnimateUniforms(){const{animateOption:i={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(i),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Ac)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){const{frag:s,vert:f,type:g}=i.getShaders();return i.layer.triangulation=Ac,i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:g,vertexShader:f,fragmentShader:s,defines:i.getDefines(),inject:i.getInject(),triangulation:Ac,depth:{enable:!1}})]})()}getShaders(){return{frag:Al,vert:IC,type:"pointFill"}}animateOption2Array(i){return[i.enable?0:1,i.speed||1,i.rings||3,0]}registerBuiltinAttributes(){const i=this.layer.getLayerConfig().shape2d;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(s,f,g,y)=>{const x=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],O=y%4*3;return[x[O],x[O+1],x[O+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:s=>{const{size:f=5}=s;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Dn.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:s=>{const{shape:f=2}=s;return[i.indexOf(f)]}}})}}const fv=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,dv=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if (u_heightfixed < 1.0) {
    // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class hv extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"updateTexture",()=>{const{createTexture2D:s}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=s({data:this.iconService.getCanvas(),mag:ot.LINEAR,min:ot.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10})}getUninforms(){if(this.rendererService.getDirty()){var i;(i=this.texture)===null||i===void 0||i.bind()}const s=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)({},s.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:i=0,heightfixed:s=!1}=this.layer.getLayerConfig(),f={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(i),u_heightfixed:Number(s),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(f)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.iconService.on("imageUpdate",i.updateTexture),i.updateTexture(),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointImage",vertexShader:dv,fragmentShader:fv,triangulation:aC,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1},primitive:ot.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=5}=i;return Array.isArray(s)?[s[0]]:[s]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const s=this.iconService.getIconMap(),{shape:f}=i,{x:g,y}=s[f]||{x:-64,y:-64};return[g,y]}}})}}const pv=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,cx=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(project_pos);

  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;
}
`;function gv(a){const i=a.coordinates;return{vertices:[...i],indices:[0],size:i.length}}class vv extends Vr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const i={u_size_scale:.5};return this.getUniformsBufferInfo(i)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.layer.triangulation=gv,i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:cx,fragmentShader:pv,triangulation:gv,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1},primitive:ot.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=1}=i;return Array.isArray(s)?[s[0]]:[s]}}})}}class lx{constructor(i,s,f){(0,ct.Z)(this,"boxCells",[]),(0,ct.Z)(this,"xCellCount",void 0),(0,ct.Z)(this,"yCellCount",void 0),(0,ct.Z)(this,"boxKeys",void 0),(0,ct.Z)(this,"bboxes",void 0),(0,ct.Z)(this,"width",void 0),(0,ct.Z)(this,"height",void 0),(0,ct.Z)(this,"xScale",void 0),(0,ct.Z)(this,"yScale",void 0),(0,ct.Z)(this,"boxUid",void 0);const g=this.boxCells;this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(s/f);for(let y=0;y<this.xCellCount*this.yCellCount;y++)g.push([]);this.boxKeys=[],this.bboxes=[],this.width=i,this.height=s,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/s,this.boxUid=0}insert(i,s,f,g,y){this.forEachCell(s,f,g,y,this.insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(y)}query(i,s,f,g,y){return this.queryHitTest(i,s,f,g,!1,y)}hitTest(i,s,f,g,y){return this.queryHitTest(i,s,f,g,!0,y)}insertBoxCell(i,s,f,g,y,x){this.boxCells[y].push(x)}queryHitTest(i,s,f,g,y,x){if(f<0||i>this.width||g<0||s>this.height)return y?!1:[];const O=[];if(i<=0&&s<=0&&this.width<=f&&this.height<=g){if(y)return!0;for(let P=0;P<this.boxKeys.length;P++)O.push({key:this.boxKeys[P],x1:this.bboxes[P*4],y1:this.bboxes[P*4+1],x2:this.bboxes[P*4+2],y2:this.bboxes[P*4+3]});return x?O.filter(x):O}const A={hitTest:y,seenUids:{box:{},circle:{}}};return this.forEachCell(i,s,f,g,this.queryCell,O,A,x),y?O.length>0:O}queryCell(i,s,f,g,y,x,O,A){const P=O.seenUids,N=this.boxCells[y];if(N!==null){const Z=this.bboxes;for(const W of N)if(!P.box[W]){P.box[W]=!0;const mt=W*4;if(i<=Z[mt+2]&&s<=Z[mt+3]&&f>=Z[mt+0]&&g>=Z[mt+1]&&(!A||A(this.boxKeys[W]))){if(O.hitTest)return x.push(!0),!0;x.push({key:this.boxKeys[W],x1:Z[mt],y1:Z[mt+1],x2:Z[mt+2],y2:Z[mt+3]})}}}return!1}forEachCell(i,s,f,g,y,x,O,A){const P=this.convertToXCellCoord(i),N=this.convertToYCellCoord(s),Z=this.convertToXCellCoord(f),W=this.convertToYCellCoord(g);for(let mt=P;mt<=Z;mt++)for(let Nt=N;Nt<=W;Nt++){const Jt=this.xCellCount*Nt+mt;if(y.call(this,i,s,f,g,Jt,x,O,A))return}}convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}}var kC=lx;class DC{constructor(i,s){(0,ct.Z)(this,"width",void 0),(0,ct.Z)(this,"height",void 0),(0,ct.Z)(this,"grid",void 0),(0,ct.Z)(this,"viewportPadding",100),(0,ct.Z)(this,"screenRightBoundary",void 0),(0,ct.Z)(this,"screenBottomBoundary",void 0),(0,ct.Z)(this,"gridRightBoundary",void 0),(0,ct.Z)(this,"gridBottomBoundary",void 0),this.width=i,this.height=s,this.viewportPadding=Math.max(i,s),this.grid=new kC(i+this.viewportPadding,s+this.viewportPadding,25),this.screenRightBoundary=i+this.viewportPadding,this.screenBottomBoundary=s+this.viewportPadding,this.gridRightBoundary=i+2*this.viewportPadding,this.gridBottomBoundary=s+2*this.viewportPadding}placeCollisionBox(i){const s=i.x1+i.anchorPointX+this.viewportPadding,f=i.y1+i.anchorPointY+this.viewportPadding,g=i.x2+i.anchorPointX+this.viewportPadding,y=i.y2+i.anchorPointY+this.viewportPadding;return!this.isInsideGrid(s,f,g,y)||this.grid.hitTest(s,f,g,y)?{box:[]}:{box:[s,f,g,y]}}insertCollisionBox(i,s){const f={featureIndex:s};this.grid.insert(f,i[0],i[1],i[2],i[3])}project(i,s,f){const g=xu.al(s,f,0,1),y=xu.Ue(),x=Mr.fromValues(...i);return xu.fF(y,g,x),{x:(y[0]/y[3]+1)/2*this.width+this.viewportPadding,y:(-y[1]/y[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(i,s,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&s<this.gridBottomBoundary}}function ux(a){let i=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0;break;default:i=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0;break;default:s=.5}return{horizontalAlign:i,verticalAlign:s}}function mv(a,i,s,f,g){if(!g)return;const y=a[f],x=y.glyph;if(x){const O=i[x].advance*y.scale,A=(a[f].x+O)*g;for(let P=s;P<=f;P++)a[P].x-=A}}function Gh(a,i,s,f,g,y,x){const O=(i-s)*g,A=(-f*x+.5)*y;for(const P of a)P.x+=O,P.y+=A}function FC(a,i,s,f,g,y,x){let A=0,P=-8,N=0;const Z=a.positionedGlyphs,W=y==="right"?1:y==="left"?0:.5,mt=Z.length;s.forEach(Ne=>{if(Ne.split("").forEach(ze=>{const He=i[ze];He&&(Z.push({glyph:ze,x:A,y:P+0,vertical:!1,scale:1,metrics:He}),A+=He.advance+x)}),Z.length!==mt){const ze=A-x;N=Math.max(ze,N),mv(Z,i,mt,Z.length-1,W)}A=0,P-=f+5});const{horizontalAlign:Nt,verticalAlign:Jt}=ux(g);Gh(Z,W,Nt,Jt,N,f,s.length);const ye=P- -8;a.top+=-Jt*ye,a.bottom=a.top-ye,a.left+=-Nt*N,a.right=a.left+N}function NC(a,i,s,f,g,y,x){let A=0,P=-8,N=0;const Z=a.positionedGlyphs,W=y==="right"?1:y==="left"?0:.5,mt=Z.length;s.forEach(Ne=>{const ze=i[Ne];if(ze&&(Z.push({glyph:Ne,x:ze.advance/2,y:P+0,vertical:!1,scale:1,metrics:ze}),A+=ze.advance+x),Z.length!==mt){const nn=A-x;N=Math.max(nn,N),mv(Z,i,mt,Z.length-1,W)}A=0,P-=f+5});const{horizontalAlign:Nt,verticalAlign:Jt}=ux(g);Gh(Z,W,Nt,Jt,N,f,s.length);const ye=P- -8;a.top+=-Jt*ye,a.bottom=a.top-ye,a.left+=-Nt*N,a.right=a.left+N}function BC(a,i,s,f,g,y,x=[0,0],O){const A=a.split(`
`),P=[],N={positionedGlyphs:P,top:x[1],bottom:x[1],left:x[0],right:x[0],lineCount:A.length,text:a};return O?NC(N,i,A,s,f,g,y):FC(N,i,A,s,f,g,y),P.length?N:!1}function jC(a,i=[0,0],s){const{positionedGlyphs:f=[]}=a,g=[];for(const y of f){const x=y.metrics,O=4,A=x.advance*y.scale/2,P=s?[y.x+A,y.y]:[0,0],N=s?[0,0]:[y.x+A+i[0],y.y+i[1]],Z=(0-O)*y.scale-A+N[0],W=(0-O)*y.scale+N[1],mt=Z+x.width*y.scale,Nt=W+x.height*y.scale,Jt={x:Z,y:W},ye={x:mt,y:W},Ne={x:Z,y:Nt},ze={x:mt,y:Nt};g.push({tl:Jt,tr:ye,bl:Ne,br:ze,tex:x,glyphOffset:P})}return g}const fx=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,dx=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);

  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:mf}=ii;function hx(a){const i=this,s=a.id,f=[],g=[];if(!i.glyphInfoMap||!i.glyphInfoMap[s])return{vertices:[],indices:[],size:7};const y=i.glyphInfoMap[s].centroid,x=y.length===2?[y[0],y[1],0]:y;return i.glyphInfoMap[s].glyphQuads.forEach((O,A)=>{f.push(...x,O.tex.x,O.tex.y+O.tex.height,O.tl.x,O.tl.y,...x,O.tex.x+O.tex.width,O.tex.y+O.tex.height,O.tr.x,O.tr.y,...x,O.tex.x+O.tex.width,O.tex.y,O.br.x,O.br.y,...x,O.tex.x,O.tex.y,O.bl.x,O.bl.y),g.push(0+A*4,1+A*4,2+A*4,2+A*4,3+A*4,0+A*4)}),{vertices:f,indices:g,size:7}}class px extends Vr{constructor(...i){var s;super(...i),s=this,(0,ct.Z)(this,"glyphInfo",void 0),(0,ct.Z)(this,"glyphInfoMap",{}),(0,ct.Z)(this,"rawEncodeData",void 0),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"currentZoom",-1),(0,ct.Z)(this,"extent",void 0),(0,ct.Z)(this,"textureHeight",0),(0,ct.Z)(this,"textCount",0),(0,ct.Z)(this,"preTextStyle",{}),(0,ct.Z)(this,"mapping",(0,ln.Z)(function*(){s.initGlyph(),s.updateTexture(),yield s.reBuildModel()}))}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,TEXT_OFFSETS:10,UV:11})}getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)((0,on.Z)({},i.uniformsOption),s.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:i="#fff",strokeWidth:s=0,halo:f=.5,gamma:g=2,raisingHeight:y=0}=this.layer.getLayerConfig(),x=this.getFontServiceMapping(),O=this.getFontServiceCanvas();x&&Object.keys(x).length!==this.textCount&&O&&(this.updateTexture(),this.textCount=Object.keys(x).length),this.preTextStyle=this.getTextStyle();const A={u_stroke_color:Fr(i),u_sdf_map_size:[(O==null?void 0:O.width)||1,(O==null?void 0:O.height)||1],u_raisingHeight:Number(y),u_stroke_width:s,u_gamma_scale:g,u_halo_blur:f};return this.getUniformsBufferInfo(A)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.bindEvent(),i.extent=i.textExtent(),i.rawEncodeData=i.layer.getEncodedData(),i.preTextStyle=i.getTextStyle(),i.initUniformsBuffer(),i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){const{textAllowOverlap:s=!1}=i.layer.getLayerConfig();return i.initGlyph(),i.updateTexture(),s||i.filterGlyphs(),[yield i.layer.buildLayerModel({moduleName:"pointText",vertexShader:dx,fragmentShader:fx,defines:i.getDefines(),inject:i.getInject(),triangulation:hx.bind(i),depth:{enable:!1}})]})()}needUpdate(){var i=this;return(0,ln.Z)(function*(){const{textAllowOverlap:s=!1,textAnchor:f="center",textOffset:g,padding:y,fontFamily:x,fontWeight:O}=i.getTextStyle();if(!mf(y,i.preTextStyle.padding)||!mf(g,i.preTextStyle.textOffset)||!mf(f,i.preTextStyle.textAnchor)||!mf(x,i.preTextStyle.fontFamily)||!mf(O,i.preTextStyle.fontWeight))return yield i.mapping(),!0;if(s)return!1;const A=i.mapService.getZoom(),P=i.mapService.getBounds(),N=oi(i.extent,P);return Math.abs(i.currentZoom-A)>.5||!N||s!==i.preTextStyle.textAllowOverlap?(yield i.reBuildModel(),!0):!1})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Dn.Attribute,descriptor:{shaderLocation:this.attributeLocation.TEXT_OFFSETS,name:"a_textOffsets",buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:2,update:(i,s,f)=>[f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Dn.Attribute,descriptor:{name:"a_tex",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:(i,s,f)=>[f[3],f[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=12}=i;return Array.isArray(s)?[s[0]]:[s]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const i=this.mapService.getBounds();return Xf(i,.5)}initTextFont(){const{fontWeight:i,fontFamily:s}=this.getTextStyle(),f=this.rawEncodeData,g=[];f.forEach(y=>{let{shape:x=""}=y;x=x.toString();for(const O of x)g.indexOf(O)===-1&&g.push(O)}),this.fontService.setFontOptions({characterSet:g,fontWeight:i,fontFamily:s,iconfont:!1})}initIconFontTex(){const{fontWeight:i,fontFamily:s}=this.getTextStyle(),f=this.rawEncodeData,g=[];f.forEach(y=>{let{shape:x=""}=y;x=`${x}`,g.indexOf(x)===-1&&g.push(x)}),this.fontService.setFontOptions({characterSet:g,fontWeight:i,fontFamily:s,iconfont:!0})}getTextStyle(){const{fontWeight:i="400",fontFamily:s="sans-serif",textAllowOverlap:f=!1,padding:g=[0,0],textAnchor:y="center",textOffset:x=[0,0],opacity:O=1,strokeOpacity:A=1,strokeWidth:P=0,stroke:N="#000"}=this.layer.getLayerConfig();return{fontWeight:i,fontFamily:s,textAllowOverlap:f,padding:g,textAnchor:y,textOffset:x,opacity:O,strokeOpacity:A,strokeWidth:P,stroke:N}}generateGlyphLayout(i){const s=this.getFontServiceMapping(),{spacing:f=2,textAnchor:g="center",textOffset:y}=this.layer.getLayerConfig(),x=this.rawEncodeData;this.glyphInfo=x.map(O=>{const{shape:A="",id:P,size:N=1}=O,Z=O.textOffset?O.textOffset:y||[0,0],W=O.textAnchor?O.textAnchor:g||"center",mt=BC(A.toString(),s,N,W,"left",f,Z,i),Nt=jC(mt,Z,!1);return O.shaping=mt,O.glyphQuads=Nt,O.centroid=Xs(O.coordinates),this.glyphInfoMap[P]={shaping:mt,glyphQuads:Nt,centroid:Xs(O.coordinates)},O})}getFontServiceMapping(){const{fontWeight:i="400",fontFamily:s="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${s}_${i}`)}getFontServiceCanvas(){const{fontWeight:i="400",fontFamily:s="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${s}_${i}`)}filterGlyphs(){const{padding:i=[0,0],textAllowOverlap:s=!1}=this.layer.getLayerConfig();if(s)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:f,height:g}=this.rendererService.getViewportSize(),y=new DC(f,g);this.glyphInfo.filter(O=>{const{shaping:A,id:P=0}=O,N=O.centroid,W=O.size/16,mt=this.mapService.lngLatToContainer(N),{box:Nt}=y.placeCollisionBox({x1:A.left*W-i[0],x2:A.right*W+i[0],y1:A.top*W-i[1],y2:A.bottom*W+i[1],anchorPointX:mt.x,anchorPointY:mt.y});return Nt&&Nt.length?(y.insertCollisionBox(Nt,P),!0):!1}).forEach(O=>{this.glyphInfoMap[O.id]=O})}initGlyph(){const{iconfont:i=!1}=this.layer.getLayerConfig();i?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(i)}updateTexture(){const{createTexture2D:i}=this.rendererService,s=this.getFontServiceCanvas();this.textureHeight=s.height,this.texture&&this.texture.destroy(),this.texture=i({data:s,mag:ot.LINEAR,min:ot.LINEAR,width:s.width,height:s.height}),this.textures=[this.texture]}reBuildModel(){var i=this;return(0,ln.Z)(function*(){i.filterGlyphs();const s=yield i.layer.buildLayerModel({moduleName:"pointText",vertexShader:dx,fragmentShader:fx,triangulation:hx.bind(i),defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1}});i.layer.models=[s]})()}}function zC(a){return yv.apply(this,arguments)}function yv(){return yv=(0,ln.Z)(function*(a){if(window.createImageBitmap){const i=yield fetch(a);return yield createImageBitmap(yield i.blob())}else{const i=new window.Image;return new Promise(s=>{i.onload=()=>s(i),i.src=a,i.crossOrigin="Anonymous"})}}),yv.apply(this,arguments)}const UC=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,ZC=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,HC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_texture_data = vec2(a_Position.z, lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,VC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float isSide = a_Position.z;
  float topU = a_uvs[0];
  float topV = 1.0 - a_uvs[1];
  float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

 gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,WC=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,$h=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class gx extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,UV:11})}getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)({},i.uniformsOption),s.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:i,heightfixed:s=!1,raisingHeight:f=0,topsurface:g=!0,sidesurface:y=!0,sourceColor:x,targetColor:O}=this.layer.getLayerConfig();let A=0,P=[1,1,1,1],N=[1,1,1,1];x&&O&&(P=Fr(x),N=Fr(O),A=1);const Z={u_sourceColor:P,u_targetColor:N,u_linearColor:A,u_topsurface:Number(g),u_sidesurface:Number(y),u_heightfixed:Number(s),u_raisingHeight:Number(f)};return i&&this.texture&&(Z.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(Z)}initModels(){var i=this;return(0,ln.Z)(function*(){return yield i.loadTexture(),i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){const{frag:s,vert:f,type:g}=i.getShaders();return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:g,vertexShader:f,fragmentShader:s,depth:{enable:!0},defines:i.getDefines(),inject:i.getInject(),triangulation:V2})]})()}getShaders(){const{pickLight:i,mapTexture:s}=this.layer.getLayerConfig();return s?{frag:WC,vert:$h,type:"polygonExtrudeTexture"}:i?{frag:ZC,vert:HC,type:"polygonExtrudePickLight"}:{frag:UC,vert:VC,type:"polygonExtrude"}}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.textures=[]}registerBuiltinAttributes(){const i=this.layer.getSource().extent,s=i[2]-i[0],f=i[3]-i[1];this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Dn.Attribute,descriptor:{name:"a_uvs",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(g,y,x)=>{const O=x[0],A=x[1];return[(O-i[0])/s,(A-i[1])/f,x[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(g,y,x,O,A)=>A}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:g=>{const{size:y=10}=g;return Array.isArray(y)?[y[0]]:[y]}}})}loadTexture(){var i=this;return(0,ln.Z)(function*(){const{mapTexture:s}=i.layer.getLayerConfig(),{createTexture2D:f}=i.rendererService;if(i.texture=f({height:1,width:1}),s){const g=yield zC(s);i.texture=f({data:g,width:g.width,height:g.height,wrapS:ot.CLAMP_TO_EDGE,wrapT:ot.CLAMP_TO_EDGE,min:ot.LINEAR,mag:ot.LINEAR})}})()}}const vx=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,GC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class $C extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,EXTRUSION_BASE:11})}getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)({},i.uniformsOption),s.uniformsOption)}getCommonUniformsInfo(){const i={};return this.getUniformsBufferInfo(i)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){const{frag:s,vert:f,type:g}=i.getShaders();return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:g,vertexShader:f,fragmentShader:s,defines:i.getDefines(),inject:i.getInject(),triangulation:V2,depth:{enable:!0}})]})()}getShaders(){return{frag:vx,vert:GC,type:"polygonExtrude"}}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f,g,y)=>y}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=10}=i;return Array.isArray(s)?[s[0]]:[s]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrusionBase",type:Dn.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:this.attributeLocation.EXTRUSION_BASE,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{extrusionBase:s=0}=i;return[s]}}})}}const YC=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,Yh=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,XC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}
`,bv=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  project_pos.z += u_raisingHeight;

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class qC extends Vr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,LINEAR:9})}getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)({},i.uniformsOption),s.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:i=0,opacityLinear:s={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),f={u_raisingHeight:Number(i),u_opacitylinear:Number(s.enable),u_dir:s.dir==="in"?1:0};return this.getUniformsBufferInfo(f)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){const{frag:s,vert:f,triangulation:g,type:y}=i.getModelParams();return i.initUniformsBuffer(),i.layer.triangulation=g,[yield i.layer.buildLayerModel({moduleName:y,vertexShader:f,fragmentShader:s,defines:i.getDefines(),inject:i.getInject(),triangulation:g,primitive:ot.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute();const{opacityLinear:i={enable:!1,dir:"in"}}=this.layer.getLayerConfig();i.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Dn.Attribute,descriptor:{name:"a_linear",shaderLocation:this.attributeLocation.LINEAR,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(s,f,g)=>[g[3],g[4],g[5]]}})}getModelParams(){const{opacityLinear:i={enable:!1}}=this.layer.getLayerConfig();return i.enable?{frag:Yh,vert:XC,type:"polygonLinear",triangulation:lC}:{frag:YC,vert:bv,type:"polygonFill",triangulation:pf}}}const KC=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,QC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class JC extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture1",void 0),(0,ct.Z)(this,"texture2",void 0),(0,ct.Z)(this,"texture3",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)({},i.uniformsOption),s.uniformsOption)}getCommonUniformsInfo(){const{watercolor:i="#6D99A8",watercolor2:s="#0F121C"}=this.layer.getLayerConfig(),f={u_watercolor:Fr(i),u_watercolor2:Fr(s),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(f)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var i=this;return(0,ln.Z)(function*(){return i.loadTexture(),i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:QC,fragmentShader:KC,defines:i.getDefines(),inject:i.getInject(),triangulation:pf,primitive:ot.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var i,s,f;(i=this.texture1)===null||i===void 0||i.destroy(),(s=this.texture2)===null||s===void 0||s.destroy(),(f=this.texture3)===null||f===void 0||f.destroy()}registerBuiltinAttributes(){const i=this.layer.getSource().extent,[s,f,g,y]=i,x=g-s,O=y-f;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Dn.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:2,update:(A,P,N)=>{const[Z,W]=N;return[(Z-s)/x,(W-f)/O]}}})}loadTexture(){const{createTexture2D:i}=this.rendererService,s={height:0,width:0};this.texture1=i(s),this.texture2=i(s),this.texture3=i(s),f(y=>{this.texture1=g(y[0]),this.texture2=g(y[1]),this.texture3=g(y[2]),this.layerService.reRender()});function f(y){let x=0;const O=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(P=>{const N=new Image;N.crossOrigin="",N.src=P,O.push(N),N.onload=()=>{x++,x===3&&y(O)}})}function g(y){return i({data:y,width:y.width,height:y.height,wrapS:ot.MIRRORED_REPEAT,wrapT:ot.MIRRORED_REPEAT,min:ot.LINEAR,mag:ot.LINEAR})}}}const tM=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,eM=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class _v extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)({},i.uniformsOption),s.uniformsOption)}getCommonUniformsInfo(){const{speed:i=.5}=this.layer.getLayerConfig(),s={u_speed:i,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(s)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var i=this;return(0,ln.Z)(function*(){return i.loadTexture(),i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:eM,fragmentShader:tM,triangulation:pf,defines:i.getDefines(),inject:i.getInject(),primitive:ot.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}registerBuiltinAttributes(){const i=this.layer.getSource().extent,[s,f,g,y]=i,x=g-s,O=y-f;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Dn.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:2,update:(A,P,N)=>{const[Z,W]=N;return[(Z-s)/x,(W-f)/O]}}})}loadTexture(){const{waterTexture:i}=this.layer.getLayerConfig(),{createTexture2D:s}=this.rendererService;this.texture=s({height:1,width:1});const f=new Image;f.crossOrigin="",i?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),f.src=i):f.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",f.onload=()=>{this.texture=s({data:f,width:f.width,height:f.height,wrapS:ot.MIRRORED_REPEAT,wrapT:ot.MIRRORED_REPEAT,min:ot.LINEAR,mag:ot.LINEAR}),this.layerService.reRender()}}}var yf={fill:qC,line:lv,extrude:gx,text:px,point_fill:RC,point_image:hv,point_normal:vv,point_extrude:uv,water:_v,ocean:JC,extrusion:$C};class xv extends El{constructor(...i){super(...i),(0,ct.Z)(this,"type","PolygonLayer"),(0,ct.Z)(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var i=this;return(0,ln.Z)(function*(){const s=i.getModelType();i.layerModel=new yf[s](i),yield i.initLayerModels()})()}getModelType(){var i;const s=this.styleAttributeService.getLayerStyleAttribute("shape"),f=s==null||(i=s.scale)===null||i===void 0?void 0:i.field;return f==="fill"||!f?"fill":f==="extrude"?"extrude":f==="extrusion"?"extrusion":f==="water"?"water":f==="ocean"?"ocean":f==="line"?"line":this.getPointModelType()}getPointModelType(){const i=this.getEncodedData(),{shape2d:s,shape3d:f}=this.getLayerConfig(),g=this.iconService.getIconMap(),y=i.find(x=>x.hasOwnProperty("shape"));if(y){const x=y.shape;return x==="dot"?"point_normal":(s==null?void 0:s.indexOf(x))!==-1?"point_fill":(f==null?void 0:f.indexOf(x))!==-1?"point_extrude":g.hasOwnProperty(x)?"point_image":"text"}else return"fill"}}class rM{constructor({rendererService:i,layerService:s,parent:f}){(0,ct.Z)(this,"tileResource",new Map),(0,ct.Z)(this,"rendererService",void 0),(0,ct.Z)(this,"layerService",void 0),(0,ct.Z)(this,"parent",void 0),(0,ct.Z)(this,"layerTiles",[]),this.rendererService=i,this.layerService=s,this.parent=f}get tiles(){return this.layerTiles}hasTile(i){return this.layerTiles.some(s=>s.key===i)}addTile(i){this.layerTiles.push(i)}getTile(i){return this.layerTiles.find(s=>s.key===i)}getVisibleTileBylngLat(i){return this.layerTiles.find(s=>s.isLoaded&&s.visible&&s.lnglatInBounds(i))}removeTile(i){const s=this.layerTiles.findIndex(g=>g.key===i),f=this.layerTiles.splice(s,1);f[0]&&f[0].destroy()}updateTileVisible(i){const s=this.getTile(i.key);if(i.isVisible)if(i.parent){const f=this.isChildrenLoaded(i.parent);s==null||s.updateVisible(f)}else s==null||s.updateVisible(!0);else if(i.parent){const f=this.isChildrenLoaded(i.parent);s==null||s.updateVisible(!f)}else s==null||s.updateVisible(!1)}isParentLoaded(i){const s=i.parent;if(!s)return!0;const f=this.getTile(s==null?void 0:s.key);return!!(f!=null&&f.isLoaded)}isChildrenLoaded(i){const s=i==null?void 0:i.children;return s.length===0?!0:s.every(f=>{const g=this.getTile(f==null?void 0:f.key);return g?(g==null?void 0:g.isLoaded)===!0:!0})}render(){var i=this;return(0,ln.Z)(function*(){const f=i.getRenderLayers().map(function(){var g=(0,ln.Z)(function*(y){yield i.layerService.renderTileLayer(y)});return function(y){return g.apply(this,arguments)}}());yield Promise.all(f)})()}getRenderLayers(){const i=this.layerTiles.filter(f=>f.visible&&f.isLoaded),s=[];return i.map(f=>s.push(...f.getLayers())),s}getLayers(){const i=this.layerTiles.filter(f=>f.isLoaded),s=[];return i.map(f=>s.push(...f.getLayers())),s}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(i=>i.destroy()),this.tileResource.clear()}}var iM=k(32676);function oM(a,i,s){s===void 0&&(s={});var f=qe(a),g=qe(i),y=iM.union(f.coordinates,g.coordinates);return y.length===0?null:y.length===1?te(y[0],s.properties):vt(y,s.properties)}var Sv=oM;class aM{getCombineFeature(i){let s=null;const f=i[0];return i.map(g=>{const y=te(g.coordinates);s===null?s=y:s=Sv(s,y)}),f&&(s.properties=(0,on.Z)({},f)),s}}const bf="select",_f="active";class sM{constructor({layerService:i,tileLayerService:s,parent:f}){(0,ct.Z)(this,"layerService",void 0),(0,ct.Z)(this,"tileLayerService",void 0),(0,ct.Z)(this,"tileSourceService",void 0),(0,ct.Z)(this,"parent",void 0),(0,ct.Z)(this,"tilePickID",new Map),this.layerService=i,this.tileLayerService=s,this.parent=f,this.tileSourceService=new aM}pickRender(i){const s=this.tileLayerService.getVisibleTileBylngLat(i.lngLat);if(s){const f=s.getMainLayer();f==null||f.layerPickService.pickRender(i)}}pick(i,s){var f=this;return(0,ln.Z)(function*(){const y=f.parent.getContainer().pickingService;if(i.type==="RasterLayer"){const x=f.tileLayerService.getVisibleTileBylngLat(s.lngLat);if(x&&x.getMainLayer()!==void 0){const O=x.getMainLayer();return O.layerPickService.pickRasterLayer(O,s,f.parent)}return!1}return f.pickRender(s),y.pickFromPickingFBO(i,s)})()}selectFeature(i){const[s,f,g]=i,y=this.color2PickId(s,f,g);this.tilePickID.set(bf,y),this.updateHighLight(s,f,g,bf)}highlightPickedFeature(i){const[s,f,g]=i,y=this.color2PickId(s,f,g);this.tilePickID.set(_f,y),this.updateHighLight(s,f,g,_f)}updateHighLight(i,s,f,g){this.tileLayerService.tiles.map(y=>{const x=y.getMainLayer();switch(g){case bf:x==null||x.hooks.beforeSelect.call([i,s,f]);break;case _f:x==null||x.hooks.beforeHighlight.call([i,s,f]);break}})}setPickState(){const i=this.tilePickID.get(bf),s=this.tilePickID.get(_f);if(i){const[f,g,y]=this.pickId2Color(i);this.updateHighLight(f,g,y,bf);return}if(s){const[f,g,y]=this.pickId2Color(s);this.updateHighLight(f,g,y,_f);return}}color2PickId(i,s,f){return Gs(new Uint8Array([i,s,f]))}pickId2Color(i){return $s(i)}getFeatureById(i){const s=this.tileLayerService.getTiles().filter(g=>g.visible),f=[];return s.forEach(g=>{f.push(...g.getFeatureById(i))}),f}pickRasterLayer(){return!1}}const cM=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,lM=`
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0 / a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  vec2 offset = project_pixel(u_offsets);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function mx(a){const i=a.coordinates;return{vertices:[...i],indices:[0],size:i.length}}class uM extends Vr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:i,strokeOpacity:s=1,strokeWidth:f=0,stroke:g="#fff"}=this.layer.getLayerConfig(),y={u_stroke_color:Fr(g),u_additive:i==="additive"?1:0,u_stroke_opacity:s,u_stroke_width:f};return this.getUniformsBufferInfo(y)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.layer.triangulation=mx,i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:lM,fragmentShader:cM,defines:i.getDefines(),inject:i.getInject(),triangulation:mx,depth:{enable:!1},primitive:ot.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=1}=i;return Array.isArray(s)?[s[0]]:[s]}}})}}const fM=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,dM=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) +
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    //
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;


  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,
    0,xcos,-xsin,0,
    0,xsin,xcos,0,
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,
    0,1,0,0,
    ysin,0,ycos,0,
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);


  setPickingColor(a_PickingColor);
}
`,{isNumber:hM}=ii;class pM extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"raiseCount",0),(0,ct.Z)(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:i={enable:!1,speed:.01,repeat:!1},opacity:s=1,sourceColor:f,targetColor:g,pickLight:y=!1,heightfixed:x=!0,opacityLinear:O={enable:!1,dir:"up"},lightEnable:A=!0}=this.layer.getLayerConfig();let P=0,N=[0,0,0,0],Z=[0,0,0,0];if(f&&g&&(N=Fr(f),Z=Fr(g),P=1),this.raiseCount<1&&this.raiseRepeat>0&&i.enable){const{speed:Nt=.01}=i;this.raiseCount+=Nt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const W={u_sourceColor:N,u_targetColor:Z,u_linearColor:P,u_pickLight:Number(y),u_heightfixed:Number(x),u_r:i.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:hM(s)?s:1,u_opacitylinear:Number(O.enable),u_opacitylinear_dir:O.dir==="up"?1:0,u_lightEnable:Number(A)};return this.getUniformsBufferInfo(W)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){const{animateOption:{repeat:s=1}}=i.layer.getLayerConfig();return i.raiseRepeat=s,[yield i.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:dM,fragmentShader:fM,triangulation:U2,depth:{enable:!0},defines:i.getDefines(),inject:i.getInject(),cull:{enable:!0,face:ot.FRONT},blend:i.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:3,update:i=>{const{size:s}=i;if(s){let f=[];return Array.isArray(s)&&(f=s.length===2?[s[0],s[0],s[1]]:s),Array.isArray(s)||(f=[s,s,s]),f}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:ot.STATIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f,g,y)=>y}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Dn.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:3,update:i=>{const s=Xs(i.coordinates);return R2([s[0],s[1]])}}})}}const yx=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,gM=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}
`;class bx extends Vr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:i=1,strokeWidth:s=0,blend:f,blur:g=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const y={u_additive:f==="additive"?1:0,u_stroke_opacity:i,u_stroke_width:s,u_blur:g};return this.getUniformsBufferInfo(y)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.layer.triangulation=z2,[yield i.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:gM,fragmentShader:yx,triangulation:z2,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!0},blend:i.getBlend()})]})()}animateOption2Array(i){return[i.enable?0:1,i.speed||1,i.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f,g)=>{const[y,x,O]=f,A=kr.al(0,0,1),P=kr.al(y,0,O),N=y>=0?kr.EU(A,P):Math.PI*2-kr.EU(A,P),Z=Math.PI*2-Math.asin(x/100),W=Mr.create();Mr.rotateY(W,W,N),Mr.rotateX(W,W,Z);const mt=kr.al(1,1,0);kr.fF(mt,mt,W),kr.Fv(mt,mt);const Nt=kr.al(-1,1,0);kr.fF(Nt,Nt,W),kr.Fv(Nt,Nt);const Jt=kr.al(-1,-1,0);kr.fF(Jt,Jt,W),kr.Fv(Jt,Jt);const ye=kr.al(1,-1,0);kr.fF(ye,ye,W),kr.Fv(ye,ye);const Ne=[...mt,...Nt,...Jt,...ye],ze=g%4*3;return[Ne[ze],Ne[ze+1],Ne[ze+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=5}=i;return Array.isArray(s)?[s[0]]:[s]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Dn.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{shape:s=2}=i;return[this.layer.getLayerConfig().shape2d.indexOf(s)]}}})}}const Tl=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,vM=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed;
  float u_raisingHeight;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0) / 2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if (u_size_unit == 1.0) {
    newSize = newSize * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = extrude.xy * newSize + offsets;

  offset = rotate_matrix(offset, rotation);

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class mM extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"meter2coord",1),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"isMeter",!1),(0,ct.Z)(this,"radian",0),(0,ct.Z)(this,"updateTexture",()=>{const{createTexture2D:s}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=s({data:this.iconService.getCanvas(),mag:ot.LINEAR,min:ot.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,UV:11})}getCommonUniformsInfo(){const{raisingHeight:i=0,heightfixed:s=!1,unit:f="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var g;(g=this.texture)===null||g===void 0||g.bind()}const y={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(s),u_raisingHeight:Number(i),u_size_unit:Vh[f]};return this.getUniformsBufferInfo(y)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Ac)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.iconService.on("imageUpdate",i.updateTexture),i.updateTexture(),i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:vM,fragmentShader:Tl,triangulation:Ac,depth:{enable:!1},defines:i.getDefines(),inject:i.getInject(),cull:{enable:!0,face:ot.FRONT}})]})()}clearModels(){var i;this.iconService.off("imageUpdate",this.updateTexture),(i=this.texture)===null||i===void 0||i.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:i=>{const s=this.iconService.getIconMap(),{shape:f}=i,{x:g,y}=s[f]||{x:-64,y:-64};return[g,y]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f,g)=>{const y=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],x=g%4*3;return[y[x],y[x+1],y[x+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=5}=i;return Array.isArray(s)?[s[0]]:[s]}}})}}const yM=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,bM=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2(
    cos(time), sin(time),
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));

  offset = project_pixel(offset);

  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class _x extends Vr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10})}getCommonUniformsInfo(){const{blend:i,speed:s=1,unit:f="pixel"}=this.layer.getLayerConfig(),g={u_additive:i==="additive"?1:0,u_size_unit:Vh[f],u_speed:s,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(g)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Ac)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:bM,fragmentShader:yM,triangulation:Ac,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1}})]})()}animateOption2Array(i){return[i.enable?0:1,i.speed||1,i.rings||3,0]}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:3,update:(i,s,f,g)=>{const y=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],x=g%4*3;return[y[x],y[x+1],y[x+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:1,update:i=>{const{size:s=5}=i;return Array.isArray(s)?[s[0]]:[s]}}})}}var Ov={fillImage:mM,fill:RC,radar:_x,image:hv,normal:vv,simplePoint:uM,extrude:uv,text:px,earthFill:bx,earthExtrude:pM};class Ev extends El{constructor(...i){super(...i),(0,ct.Z)(this,"type","PointLayer"),(0,ct.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,ct.Z)(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,ct.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var i=this;return(0,ln.Z)(function*(){const s=i.getModelType();i.layerModel&&i.layerModel.clearModels(),i.layerModel=new Ov[s](i),yield i.initLayerModels()})()}rebuildModels(){var i=this;return(0,ln.Z)(function*(){yield i.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:i,values:s}=this.shapeOption,{shape2d:f}=this.getLayerConfig(),g=this.iconService.getIconMap();if(i&&(f==null?void 0:f.indexOf(i))!==-1)return"fill";if(s==="text")return"text";if(s&&s instanceof Array){for(const y of s)if(typeof y=="string"&&g.hasOwnProperty(y))return"image"}}return"normal"}getDefaultConfig(){const i=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[i]}getModelType(){const i=this.getEncodedData(),{shape2d:s,shape3d:f,billboard:g=!0}=this.getLayerConfig(),y=this.iconService.getIconMap(),x=i.find(O=>O.hasOwnProperty("shape"));if(x){const O=x.shape;return O==="dot"?"normal":O==="simple"?"simplePoint":O==="radar"?"radar":this.layerType==="fillImage"||g===!1?"fillImage":(s==null?void 0:s.indexOf(O))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(f==null?void 0:f.indexOf(O))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":y.hasOwnProperty(O)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function _M(a){return a==="PolygonLayer"?xv:a==="LineLayer"?Wh:Ev}function xM(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}class ua extends to.EventEmitter{constructor(i,s){super(),(0,ct.Z)(this,"x",void 0),(0,ct.Z)(this,"y",void 0),(0,ct.Z)(this,"z",void 0),(0,ct.Z)(this,"key",void 0),(0,ct.Z)(this,"parent",void 0),(0,ct.Z)(this,"sourceTile",void 0),(0,ct.Z)(this,"visible",!0),(0,ct.Z)(this,"layers",[]),(0,ct.Z)(this,"isLoaded",!1),(0,ct.Z)(this,"tileMaskLayers",[]),(0,ct.Z)(this,"tileMask",void 0),this.parent=s,this.sourceTile=i,this.x=i.x,this.y=i.y,this.z=i.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...i){}lnglatInBounds(i){const[s,f,g,y]=this.sourceTile.bounds,{lng:x,lat:O}=i;return x>=s&&x<=g&&O>=f&&O<=y}getLayerOptions(){var i;const s=this.parent.getLayerConfig();return(0,on.Z)((0,on.Z)({},s),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:xM(this.parent.type),mask:s.mask||((i=s.maskLayers)===null||i===void 0?void 0:i.length)!==0&&s.enableMask})}getMaskLayer(){const{maskLayers:i}=this.parent.getLayerConfig(),s=[];return i==null||i.forEach(f=>{if(!f.tileLayer)return s.push(f),f;const y=f.tileLayer.getTile(this.sourceTile.key),x=y==null?void 0:y.getLayers()[0];x&&s.push(x)}),s}addTileMask(){var i=this;return(0,ln.Z)(function*(){const s=new xv({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[i.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),f=ec(i.parent.container);s.setContainer(f),yield s.init(),i.tileMask=s;const g=i.getMainLayer();return g!==void 0&&(g.tileMask=s),s})()}addMask(i,s){var f=this;return(0,ln.Z)(function*(){const g=ec(f.parent.container);s.setContainer(g),yield s.init(),i.addMask(s),f.tileMaskLayers.push(s)})()}addLayer(i){var s=this;return(0,ln.Z)(function*(){i.isTileLayer=!0;const f=ec(s.parent.container);i.setContainer(f),s.layers.push(i),yield i.init()})()}updateVisible(i){this.visible=i,this.updateOptions("visible",i)}updateOptions(i,s){this.layers.forEach(f=>{f.updateLayerConfig({[i]:s})})}getMainLayer(){return this.layers[0]}getFeatures(i){return[]}getFeatureById(i){return[]}destroy(){var i;(i=this.tileMask)===null||i===void 0||i.destroy(),this.layers.forEach(s=>s.destroy())}}class SM extends ua{initTileLayer(){var i=this;return(0,ln.Z)(function*(){const s=i.getSourceOption(),f=s.data.features[0].properties,g=new Wh().source(s.data,s.options).size(1).shape("line").color("red"),y=new Ev({minZoom:i.z-1,maxZoom:i.z+1,textAllowOverlap:!0}).source([f],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(i.key).style({stroke:"#fff",strokeWidth:2});yield i.addLayer(g),yield i.addLayer(y),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:i.transforms}}}}const wv=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,OM=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class EM extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:i,brightness:s,contrast:f,saturation:g,gamma:y}=this.layer.getLayerConfig(),x={u_opacity:ru(i,1),u_brightness:ru(s,1),u_contrast:ru(f,1),u_saturation:ru(g,1),u_gamma:ru(y,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(x)}initModels(){var i=this;return(0,ln.Z)(function*(){return yield i.loadTexture(),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}loadTexture(){var i=this;return(0,ln.Z)(function*(){const{createTexture2D:s}=i.rendererService,g=yield i.layer.getSource().data.images;i.texture=s({data:g[0],width:g[0].width,height:g[0].height,mag:ot.LINEAR,min:ot.LINEAR})})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:OM,fragmentShader:wv,defines:i.getDefines(),triangulation:Tc,primitive:ot.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:(i,s,f)=>[f[3],f[4]]}})}}var wM={image:EM};class Cl extends El{constructor(...i){super(...i),(0,ct.Z)(this,"type","ImageLayer")}buildModels(){var i=this;return(0,ln.Z)(function*(){const s=i.getModelType();i.layerModel=new wM[s](i),yield i.initLayerModels()})()}getDefaultConfig(){const i=this.getModelType();return{image:{}}[i]}getModelType(){return"image"}}class Av extends ua{initTileLayer(){var i=this;return(0,ln.Z)(function*(){const s=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),y=new Cl((0,on.Z)({},f)).source(g.data,g.options);s&&Object.keys(s).forEach(x=>{var O,A;const P=x;y[P]((O=s[P])===null||O===void 0?void 0:O.field,(A=s[P])===null||A===void 0?void 0:A.values)}),yield i.addLayer(y),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:i.transforms}}}}const V6=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,xx=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class Xh extends Vr{getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)({},i.uniformsOption),s.uniformsOption)}getCommonUniformsInfo(){const{opacity:i=1,color:s="#000"}=this.layer.getLayerConfig(),f={u_color:Fr(s),u_opacity:i||1};return this.getUniformsBufferInfo(f)}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"mask",vertexShader:xx,fragmentShader:V6,defines:i.getDefines(),triangulation:pf,depth:{enable:!1},pick:!1})]})()}clearModels(i=!0){i&&this.layerService.clear()}registerBuiltinAttributes(){return""}}var Sx={fill:Xh};class Tv extends El{constructor(...i){super(...i),(0,ct.Z)(this,"type","MaskLayer")}buildModels(){var i=this;return(0,ln.Z)(function*(){const s=i.getModelType();i.layerModel=new Sx[s](i),yield i.initLayerModels()})()}getModelType(){return"fill"}}class AM extends ua{initTileLayer(){var i=this;return(0,ln.Z)(function*(){const s=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),y=new Tv((0,on.Z)({},f)).source(g.data,g.options);s&&Object.keys(s).forEach(x=>{var O,A;const P=x;y[P]((O=s[P])===null||O===void 0?void 0:O.field,(A=s[P])===null||A===void 0?void 0:A.values)}),yield i.addLayer(y),i.isLoaded=!0})()}getFeatures(i){return i?this.sourceTile.data.getTileData(i):[]}getSourceOption(){const i=this.parent.getSource(),{sourceLayer:s,featureId:f}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(s)},options:{parser:{type:"geojson",featureId:f},transforms:i.transforms}}}}function Cv(a,i){return{type:a.type,field:"value",items:a.positions.map((s,f)=>({[i]:f>=a.colors.length?null:a.colors[f],value:s}))}}const TM=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,CM=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class Ox extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"colorTexture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)({},i.uniformsOption),s.uniformsOption)}getCommonUniformsInfo(){const{opacity:i=1,clampLow:s=!0,clampHigh:f=!0,noDataValue:g=-9999999,domain:y,rampColors:x}=this.layer.getLayerConfig(),O=y||Lp(x);this.colorTexture=this.layer.textureService.getColorTexture(x,O);const A={u_domain:O,u_opacity:i||1,u_noDataValue:g,u_clampLow:s?1:0,u_clampHigh:(typeof f!="undefined"?f:s)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(A)}getRasterData(i){return(0,ln.Z)(function*(){if(Array.isArray(i.data))return{data:i.data,width:i.width,height:i.height};{const{rasterData:s,width:f,height:g}=yield i.data;return{data:Array.from(s),width:f,height:g}}})()}initModels(){var i=this;return(0,ln.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,ln.Z)(function*(){i.initUniformsBuffer();const s=i.layer.getSource(),{createTexture2D:f,queryVerdorInfo:g}=i.rendererService,y=s.data.dataArray[0],{data:x,width:O,height:A}=yield i.getRasterData(y);return i.texture=f({data:new Float32Array(x),width:O,height:A,format:g()==="WebGL1"?ot.LUMINANCE:ot.RED,type:ot.FLOAT,alignment:1}),[yield i.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:CM,fragmentShader:TM,defines:i.getDefines(),triangulation:Tc,primitive:ot.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var i,s;(i=this.texture)===null||i===void 0||i.destroy(),(s=this.colorTexture)===null||s===void 0||s.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{shaderLocation:this.attributeLocation.UV,name:"a_Uv",buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:(i,s,f)=>[f[3],f[4]]}})}}const MM=["data"],LM=["rasterData"],PM=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,Ex=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class Mv extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0),(0,ct.Z)(this,"dataOption",{})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const i=this.getCommonUniformsInfo(),s=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,on.Z)((0,on.Z)({},i.uniformsOption),s.uniformsOption)}getCommonUniformsInfo(){const{opacity:i=1,noDataValue:s=0}=this.layer.getLayerConfig(),{rMinMax:f=[0,255],gMinMax:g=[0,255],bMinMax:y=[0,255]}=this.dataOption,x={u_rminmax:f,u_gminmax:g,u_bminmax:y,u_opacity:i||1,u_noDataValue:s,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(x)}getRasterData(i){var s=this;return(0,ln.Z)(function*(){if(Array.isArray(i.data)){const{data:x}=i,O=(0,xa.Z)(i,MM);return s.dataOption=O,(0,on.Z)({data:x},O)}const f=yield i.data,{rasterData:g}=f,y=(0,xa.Z)(f,LM);return s.dataOption=y,Array.isArray(g)?(0,on.Z)({data:g},y):(0,on.Z)({data:Array.from(g)},y)})()}initModels(){var i=this;return(0,ln.Z)(function*(){i.initUniformsBuffer();const s=i.layer.getSource(),{createTexture2D:f}=i.rendererService,g=s.data.dataArray[0],{data:y,width:x,height:O}=yield i.getRasterData(g);return i.texture=f({data:new Float32Array(y),width:x,height:O,format:ot.RGB,type:ot.FLOAT}),[yield i.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:Ex,fragmentShader:PM,defines:i.getDefines(),triangulation:Tc,primitive:ot.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.initModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:(i,s,f)=>[f[3],f[4]]}})}}const IM=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,Ax=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class Lv extends Vr{constructor(...i){super(...i),(0,ct.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:i,clampLow:s=!0,clampHigh:f=!0,noDataValue:g=-9999999,domain:y,rampColors:x,colorTexture:O,rScaler:A=6553.6,gScaler:P=25.6,bScaler:N=.1,offset:Z=1e4}=this.layer.getLayerConfig(),W=y||Lp(x);let mt=O;O?this.layer.textureService.setColorTexture(O,x,W):mt=this.layer.textureService.getColorTexture(x,W);const Nt={u_unpack:[A,P,N,Z],u_domain:W,u_opacity:i||1,u_noDataValue:g,u_clampLow:s,u_clampHigh:typeof f!="undefined"?f:s,u_texture:this.texture,u_colorTexture:mt};return this.textures=[this.texture,mt],this.getUniformsBufferInfo(Nt)}initModels(){var i=this;return(0,ln.Z)(function*(){i.initUniformsBuffer();const s=i.layer.getSource(),{createTexture2D:f}=i.rendererService,g=yield s.data.images;return i.texture=f({data:g[0],width:g[0].width,height:g[0].height,min:ot.LINEAR,mag:ot.LINEAR}),[yield i.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:Ax,fragmentShader:IM,defines:i.getDefines(),triangulation:Tc,primitive:ot.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}buildModels(){var i=this;return(0,ln.Z)(function*(){return i.initModels()})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:ot.DYNAMIC_DRAW,data:[],type:ot.FLOAT},size:2,update:(i,s,f)=>[f[3],f[4]]}})}}var Tx={raster:Ox,rasterRgb:Mv,raster3d:Ox,rasterTerrainRgb:Lv};class qh extends El{constructor(...i){super(...i),(0,ct.Z)(this,"type","RasterLayer")}buildModels(){var i=this;return(0,ln.Z)(function*(){const s=i.getModelType();i.layerModel=new Tx[s](i),yield i.initLayerModels()})()}getDefaultConfig(){const i=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[i]}getModelType(){switch(this.layerSource.getParserType()){case"raster":case"ndi":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(i){if(i!=="color")return{type:void 0,field:void 0,items:[]};const s=this.getLayerConfig().rampColors;return Cv(s,i)}}const Cx=["rasterData"];class Mx extends ua{initTileLayer(){var i=this;return(0,ln.Z)(function*(){const s=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),y=new qh((0,on.Z)({},f)).source(g.data,g.options);s&&Object.keys(s).forEach(x=>{var O,A;const P=x;y[P]((O=s[P])===null||O===void 0?void 0:O.field,(A=s[P])===null||A===void 0?void 0:A.values)}),yield i.addLayer(y),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource(),s=this.sourceTile.data.data,{rasterData:f}=s,g=(0,xa.Z)(s,Cx);return{data:f,options:{parser:(0,on.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},g),transforms:i.transforms}}}}class Lx extends ua{initTileLayer(){var i=this;return(0,ln.Z)(function*(){const s=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),y=new qh((0,on.Z)({},f)).source(g.data,g.options);s&&Object.keys(s).forEach(x=>{var O,A;const P=x;y[P]((O=s[P])===null||O===void 0?void 0:O.field,(A=s[P])===null||A===void 0?void 0:A.values)}),yield i.addLayer(y),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:i.transforms}}}}const Px=["rasterData"],Br={positions:[0,1],colors:["#000","#fff"]};class Sf extends ua{constructor(...i){super(...i),(0,ct.Z)(this,"colorTexture",void 0)}initTileLayer(){var i=this;return(0,ln.Z)(function*(){const s=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),{rampColors:y,domain:x}=i.getLayerOptions();i.colorTexture=i.parent.textureService.getColorTexture(y,x);const O=new qh((0,on.Z)((0,on.Z)({},f),{},{colorTexture:i.colorTexture})).source(g.data,g.options);s&&Object.keys(s).forEach(A=>{var P,N;const Z=A;O[Z]((P=s[Z])===null||P===void 0?void 0:P.field,(N=s[Z])===null||N===void 0?void 0:N.values)}),yield i.addLayer(O),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource(),s=this.sourceTile.data.data,{rasterData:f}=s,g=(0,xa.Z)(s,Px);return{data:f,options:{parser:(0,on.Z)({type:"raster",extent:this.sourceTile.bounds},g),transforms:i.transforms}}}styleUpdate(...i){const{rampColors:s=Br,domain:f}=i;this.colorTexture=this.parent.textureService.getColorTexture(s,f||Lp(s)),this.layers.forEach(g=>g.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(i=>i.destroy())}}class Mc extends ua{initTileLayer(){var i=this;return(0,ln.Z)(function*(){const s=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=_M(i.parent.type),y=i.getSourceOption();if(!y){i.isLoaded=!0,i.emit("loaded");return}const x=new g((0,on.Z)({},f)).source(y.data,y.options);Object.keys(s).forEach(O=>{var A,P;const N=O;x[N]((A=s[N])===null||A===void 0?void 0:A.field,(P=s[N])===null||P===void 0?void 0:P.values)}),yield i.addLayer(x),f.tileMask&&(yield i.addTileMask()),i.setLayerMinMaxZoom(x),i.isLoaded=!0,i.emit("loaded")})()}getSourceOption(){const i=this.parent.getSource(),{sourceLayer:s="defaultLayer",featureId:f="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(s)},options:{parser:{type:"geojson",featureId:f},transforms:i.transforms}}}setLayerMinMaxZoom(i){i.getModelType()==="text"&&i.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(i){return this.sourceTile.data.getTileData(i)}getFeatureById(i){const s=this.getMainLayer();return s?s.getSource().data.dataArray.filter(g=>g._id===i):[]}}function kM(a){switch(a.type){case"PolygonLayer":return Mc;case"LineLayer":return Mc;case"PointLayer":return Mc;case"TileDebugLayer":return SM;case"MaskLayer":return AM;case"RasterLayer":const{dataType:s}=a.getSource().parser;switch(s){case zi.RGB:case zi.CUSTOMRGB:return Mx;case zi.ARRAYBUFFER:case zi.CUSTOMARRAYBUFFER:return Sf;case zi.TERRAINRGB:case zi.CUSTOMTERRAINRGB:return Lx;default:return Av}default:return Mc}}const Bs=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:vr}=ii;class Kh{constructor(i){(0,ct.Z)(this,"parent",void 0),(0,ct.Z)(this,"tileLayerService",void 0),(0,ct.Z)(this,"mapService",void 0),(0,ct.Z)(this,"layerService",void 0),(0,ct.Z)(this,"rendererService",void 0),(0,ct.Z)(this,"pickingService",void 0),(0,ct.Z)(this,"tilePickService",void 0),(0,ct.Z)(this,"tilesetManager",void 0),(0,ct.Z)(this,"initedTileset",!1),(0,ct.Z)(this,"lastViewStates",void 0),(0,ct.Z)(this,"mapchange",()=>{var f;if(this.parent.isVisible()===!1)return;const{latLonBounds:g,zoom:y}=this.getCurrentView();this.lastViewStates&&this.lastViewStates.zoom===y&&this.lastViewStates.latLonBounds.toString()===g.toString()||(this.lastViewStates={zoom:y,latLonBounds:g},(f=this.tilesetManager)===null||f===void 0||f.throttleUpdate(y,g))}),(0,ct.Z)(this,"viewchange",vr(this.mapchange,24)),this.parent=i;const s=this.parent.getContainer();this.rendererService=s.rendererService,this.layerService=s.layerService,this.mapService=s.mapService,this.pickingService=s.pickingService,this.tileLayerService=new rM({rendererService:this.rendererService,layerService:this.layerService,parent:i}),this.tilePickService=new sM({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:i}),this.parent.setLayerPickService(this.tilePickService),this.proxy(i),this.initTileSetManager()}initTileSetManager(){var i;const s=this.parent.getSource();if(this.tilesetManager=s.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:f,zoom:g}=this.getCurrentView();(i=this.tilesetManager)===null||i===void 0||i.update(g,f)}getCurrentView(){const i=this.mapService.getBounds(),s=[i[0][0],i[0][1],i[1][0],i[1][1]],f=this.mapService.getZoom();return{latLonBounds:s,zoom:f}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",i=>{}),this.tilesetManager.on("tile-unload",i=>{this.tileUnLoad(i)}),this.tilesetManager.on("tile-error",(i,s)=>{this.tileError(i)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(i){return this.tileLayerService.getTile(i)}tileLoaded(i){}tileError(i){console.warn("error:",i)}destroy(){var i;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(i=this.tilesetManager)===null||i===void 0||i.destroy(),this.tileLayerService.destroy()}reload(){var i;this.tilesetManager.clear();const{latLonBounds:s,zoom:f}=this.getCurrentView();(i=this.tilesetManager)===null||i===void 0||i.update(f,s)}tileUnLoad(i){this.tileLayerService.removeTile(i.key)}tileUpdate(){var i=this;return(0,ln.Z)(function*(){if(!i.tilesetManager)return;const s=i.parent.getMinZoom(),f=i.parent.getMaxZoom(),g=i.tilesetManager.tiles.filter(y=>y.isLoaded).filter(y=>y.isVisibleChange).filter(y=>y.data).filter(y=>y.z>=s&&y.z<f);yield Promise.all(g.map(function(){var y=(0,ln.Z)(function*(x){if(i.tileLayerService.hasTile(x.key))i.tileLayerService.updateTileVisible(x),i.tilePickService.setPickState(),i.layerService.reRender();else{const O=kM(i.parent),A=new O(x,i.parent);yield A.initTileLayer(),i.tilePickService.setPickState(),A.getLayers().length!==0&&(i.tileLayerService.addTile(A),i.tileLayerService.updateTileVisible(x),i.layerService.reRender())}});return function(x){return y.apply(this,arguments)}}())),i.tilesetManager.isLoaded&&i.parent.emit("tiles-loaded",i.tilesetManager.currentTiles)})()}setPickState(i){}pickRender(i){this.tilePickService.pickRender(i)}selectFeature(i){this.tilePickService.selectFeature(i)}highlightPickedFeature(i){this.tilePickService.highlightPickedFeature(i)}proxy(i){Bs.forEach(s=>{const f=i[s].bind(i);i[s]=(...g)=>(f(...g),this.getLayers().map(y=>{y[s](...g)}),s==="style"&&this.getTiles().forEach(y=>y.styleUpdate(...g)),i)})}}class Qh extends null{constructor(...i){super(...i),_defineProperty(this,"isMoving",!1),_defineProperty(this,"maskLayer",void 0),_defineProperty(this,"move",s=>{switch(s.stopPropagation(),s.type){case"touchcancel":case"touchend":case"mouseup":{var f;this.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(g=>{document.removeEventListener(g,this.move)}),(f=this.scene)===null||f===void 0||f.render();break}case"mousedown":case"touchstart":this.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(g=>{document.addEventListener(g,this.move)});case"mousemove":case"touchmove":{if(this.isMoving)if(this.controlOption.orientation==="vertical"){let g;if("pageX"in s?g=s.pageX:s.touches&&s.touches.length&&s.touches[0].pageX?g=s.touches[0].pageX:s.changedTouches&&s.changedTouches.length&&(g=s.changedTouches[0].pageX),!g)break;const y=this.getContainerDOMRect(),x=this.getContainerSize(),O=x[0],A=(y==null?void 0:y.left)||0,P=g-A+window.scrollX-document.documentElement.clientLeft,N=O-Math.min(Math.max(0,O-P),O),Z=N/O;this.setOptions({ratio:Z}),this.emit("moving",{size:[N,x[1]],ratio:[Z,0]})}else{let g;if("pageY"in s?g=s.pageY:s.touches&&s.touches.length&&s.touches[0].pageY?g=s.touches[0].pageY:s.changedTouches&&s.changedTouches.length&&(g=s.changedTouches[0].pageY),!g)break;const y=this.getContainerDOMRect(),x=this.getContainerSize(),O=x[1],A=(y==null?void 0:y.top)||0,P=g-A+window.scrollY-document.documentElement.clientTop,N=O-Math.min(Math.max(0,O-P),O),Z=N/O;this.setOptions({ratio:Z}),this.emit("moving",{size:[x[0],N],ratio:[0,Z]})}break}default:break}}),_defineProperty(this,"getMaskLayer",()=>(console.log(this.getMaskGeoData()),new PolygonLayer({visible:!1}).source(this.getMaskGeoData()).shape("fill").color("red").style({opacity:.1}))),_defineProperty(this,"updateMask",()=>{var s;if(!this.mapsService)return;const f=this.getMaskGeoData();(s=this.maskLayer)===null||s===void 0||s.setData(f)})}getDefault(){return _objectSpread(_objectSpread({},super.getDefault()),{},{layers:[],rightLayers:[],ratio:.5,orientation:"vertical"})}onAdd(){const i=DOM.create("div","l7-control-swipe");DOM.create("button","l7-control-swipe__button",i);const{orientation:s="vertical",ratio:f=.5}=this.controlOption;return s==="horizontal"?(i.style.top=f*100+"%",i.style.left=""):(i.style.left=f*100+"%",i.style.top=""),i.classList.add(s),i}addTo(i){this.mapsService=i.mapService,this.renderService=i.rendererService,this.layerService=i.layerService,this.controlService=i.controlService,this.configService=i.globalConfigService,this.scene=i.sceneService,this.sceneContainer=i,this.isShow=!0,this.container=this.onAdd();const{className:s,style:f,layers:g,rightLayers:y}=this.controlOption;s&&this.setClassName(s),f&&this.setStyle(f),this.mapsService.getMarkerContainer().appendChild(this.container),this.maskLayer=this.getMaskLayer(),this.registerEvent();const x=createLayerContainer(i);return this.maskLayer.setContainer(x),this.scene.addLayer(this.maskLayer),this.addMaskToLayers(g,!1),this.addMaskToLayers(y,!0),this.emit("add",this),this}onRemove(){if(this.maskLayer){var i;const{layers:s,rightLayers:f}=this.controlOption;this.removeMaskFromLayers(s),this.removeMaskFromLayers(f),(i=this.layerService)===null||i===void 0||i.remove(this.maskLayer)}this.unRegisterEvent(),this.removeAllListeners()}show(){var i;const s=this.container;DOM.removeClass(s,"l7-control-swipe_hide");const{layers:f,rightLayers:g}=this.controlOption;f.forEach(y=>y.enableMask()),g.forEach(y=>y.enableMask()),(i=this.scene)===null||i===void 0||i.render(),this.isShow=!0,this.emit("show",this)}hide(){var i;const s=this.container;DOM.addClass(s,"l7-control-swipe_hide");const{layers:f,rightLayers:g}=this.controlOption;f.forEach(y=>y.disableMask()),g.forEach(y=>y.disableMask()),(i=this.scene)===null||i===void 0||i.render(),this.isShow=!1,this.emit("hide",this)}setOptions(i){const s=_objectSpread(_objectSpread({},this.controlOption),i);if(i.className&&this.setClassName(i.className),i.style&&this.setStyle(i.style),(i.orientation||i.ratio!==void 0)&&this.setOrientationAndRatio(s.orientation,s.ratio),i.layers){const f=i.layers,g=this.controlOption.layers;this.setLayers(f,g,!1)}if(i.rightLayers){const f=i.rightLayers,g=this.controlOption.rightLayers;this.setLayers(f,g,!0)}this.controlOption=s,this.updateMask()}registerEvent(){this.container.addEventListener("mousedown",this.move),this.container.addEventListener("touchstart",this.move),this.mapsService.on("camerachange",this.updateMask)}unRegisterEvent(){var i;this.container.removeEventListener("mousedown",this.move),this.container.removeEventListener("touchstart",this.move),(i=this.mapsService)===null||i===void 0||i.off("camerachange",this.updateMask)}setOrientationAndRatio(i="vertical",s=.5){this.container.classList.remove("horizontal","vertical"),this.container.classList.add(i),i==="horizontal"?(this.container.style.top=s*100+"%",this.container.style.left=""):(this.container.style.left=s*100+"%",this.container.style.top="")}setLayers(i,s,f=!1){const g=i.filter(x=>s.includes(x)===!1),y=s.filter(x=>i.includes(x)===!1);this.addMaskToLayers(g,f),this.removeMaskFromLayers(y)}addMaskToLayers(i,s){i.forEach(f=>{f.updateLayerConfig({maskInside:!s}),f.addMask(this.maskLayer)})}removeMaskFromLayers(i){i.forEach(s=>{s.updateLayerConfig({maskInside:!0}),s.removeMask(this.maskLayer)})}getMaskGeoData(){const{ratio:i=.5,orientation:s="vertical"}=this.controlOption,f=s==="vertical",[g,y]=this.getBounds(),[x,O]=g,[A,P]=y;let N;if(f){const W=x+(A-x)*i;N=[[x,P],[W,P],[W,O],g,[x,P]]}else{const W=this.getContainerSize(),Nt=this.mapsService.containerToLngLat([W[0],W[1]*i]).lat;N=[[x,P],y,[A,Nt],[x,Nt],[x,P]]}return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[N]}}]}}getContainerDOMRect(){var i;return(i=this.mapsService.getContainer())===null||i===void 0?void 0:i.getBoundingClientRect()}getContainerSize(){return this.mapsService.getSize()}getBounds(){return this.mapsService.getBounds()}addLayer(i,s=!1){const f=Array.isArray(i)?i:[i];if(s){const g=this.controlOption.rightLayers.concat(...f);this.setOptions({rightLayers:g})}else{const g=this.controlOption.layers.concat(...f);this.setOptions({layers:g})}}removeLayer(i){const s=Array.isArray(i)?i:[i],f=this.controlOption.layers.filter(y=>s.includes(y)),g=this.controlOption.rightLayers.filter(y=>s.includes(y));this.setOptions({layers:f,rightLayers:g})}removeLayers(){this.setOptions({layers:[],rightLayers:[]})}}class Jh extends null{constructor(...i){super(...i),_defineProperty(this,"disabled",void 0),_defineProperty(this,"zoomInButton",void 0),_defineProperty(this,"zoomOutButton",void 0),_defineProperty(this,"zoomNumDiv",void 0),_defineProperty(this,"zoomIn",()=>{!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}),_defineProperty(this,"zoomOut",()=>{!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}),_defineProperty(this,"updateDisabled",()=>{const s=this.mapsService;this.zoomInButton.removeAttribute("disabled"),this.zoomOutButton.removeAttribute("disabled"),(this.disabled||s.getZoom()<=s.getMinZoom())&&this.zoomOutButton.setAttribute("disabled","true"),this.controlOption.showZoom&&this.zoomNumDiv&&(this.zoomNumDiv.innerText=String(Math.floor(s.getZoom()))),(this.disabled||s.getZoom()>=s.getMaxZoom())&&this.zoomInButton.setAttribute("disabled","true")})}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{position:PositionType.BOTTOMRIGHT,name:"zoom",zoomInText:createL7Icon("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:createL7Icon("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}setOptions(i){super.setOptions(i),this.checkUpdateOption(i,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}onAdd(){const i=DOM.create("div","l7-control-zoom");return this.resetButtonGroup(i),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),i}onRemove(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}disable(){return this.disabled=!0,this.updateDisabled(),this}enable(){return this.disabled=!1,this.updateDisabled(),this}resetButtonGroup(i){DOM.clearChildren(i),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",i,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",i)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",i,this.zoomOut),this.updateDisabled()}createButton(i,s,f,g,y){const x=DOM.create("button",f,g);return typeof i=="string"?x.innerHTML=i:x.append(i),x.title=s,y&&x.addEventListener("click",y),x}}class Lc extends to.EventEmitter{get lngLat(){var i;return(i=this.popupOption.lngLat)!==null&&i!==void 0?i:{lng:0,lat:0}}set lngLat(i){this.popupOption.lngLat=i}constructor(i){super(),(0,ct.Z)(this,"popupOption",void 0),(0,ct.Z)(this,"mapsService",void 0),(0,ct.Z)(this,"sceneService",void 0),(0,ct.Z)(this,"layerService",void 0),(0,ct.Z)(this,"scene",void 0),(0,ct.Z)(this,"closeButton",void 0),(0,ct.Z)(this,"container",void 0),(0,ct.Z)(this,"content",void 0),(0,ct.Z)(this,"contentTitle",void 0),(0,ct.Z)(this,"contentPanel",void 0),(0,ct.Z)(this,"tip",void 0),(0,ct.Z)(this,"isShow",!0),(0,ct.Z)(this,"onMouseMove",f=>{var g;const y=this.mapsService.getMapContainer(),{left:x=0,top:O=0}=(g=y==null?void 0:y.getBoundingClientRect())!==null&&g!==void 0?g:{};this.setPopupPosition(f.clientX-x,f.clientY-O)}),(0,ct.Z)(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:f,lat:g}=this.lngLat,{x:y,y:x}=this.mapsService.lngLatToContainer([f,g]);this.setPopupPosition(y,x)}),(0,ct.Z)(this,"updateLngLatPositionWhenZoom",f=>{if(!this.mapsService||this.popupOption.followCursor)return;const g=f.map,y=g.getSize();y.x=y.x/2,y.y=y.y/2;const x=f.center,O=f.zoom,A=g.DE(this.lngLat,O,x);A.x=Math.round(A.x),A.y=Math.round(A.y),this.setPopupPosition(A.x,A.y,!0)}),(0,ct.Z)(this,"onKeyDown",f=>{f.keyCode===27&&this.remove()}),(0,ct.Z)(this,"onCloseButtonClick",f=>{f.stopPropagation&&f.stopPropagation(),this.hide()}),(0,ct.Z)(this,"updatePosition",(f,g=!0)=>{const y=!!this.lngLat,{className:x,style:O,maxWidth:A,anchor:P,stopPropagation:N}=this.popupOption;if(!this.mapsService||!y||!this.content)return;const Z=this.mapsService.getMarkerContainer();if(!this.container&&Z&&(this.container=Bi("div",`l7-popup ${x!=null?x:""} ${this.isShow?"":"l7-popup-hide"}`,Z),O&&this.container.setAttribute("style",O),this.tip=Bi("div","l7-popup-tip",this.container),this.container.appendChild(this.content),N&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(W=>{this.container.addEventListener(W,mt=>{mt.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),g?this.updateLngLatPositionWhenZoom(f):this.updateLngLatPosition(),bO(this.container,`${Le[P]}`),Fe(this.container,P,"popup"),A){const{width:W}=this.container.getBoundingClientRect();W>parseFloat(A)&&(this.container.style.width=A)}else this.container.style.removeProperty("width")}),(0,ct.Z)(this,"updateWhenZoom",f=>{this.updatePosition(f,!0)}),(0,ct.Z)(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=(0,on.Z)((0,on.Z)({},this.getDefault(i!=null?i:{})),i);const{lngLat:s}=this.popupOption;s&&(this.lngLat=s)}getIsShow(){return this.isShow}addTo(i){this.mapsService=i.mapService,this.sceneService=i.sceneService,this.layerService=i.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=i,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:s,text:f,title:g}=this.popupOption;return s?this.setHTML(s):f&&this.setText(f),g&&this.setTitle(g),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Ba(this.content),this.container&&(Ba(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(i){this.show();const{className:s}=this.popupOption;if(this.popupOption=(0,on.Z)((0,on.Z)({},this.popupOption),i),this.checkUpdateOption(i,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(Ba(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(i,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(i,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(i,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(i,["html"])&&i.html?this.setHTML(i.html):this.checkUpdateOption(i,["text"])&&i.text&&this.setText(i.text),this.checkUpdateOption(i,["className"])){var f;s&&this.container.classList.remove(s!=null?s:""),this.container.classList.add((f=i.className)!==null&&f!==void 0?f:"")}if(this.checkUpdateOption(i,["style"])){var g;Sy(this.container,(g=i.style)!==null&&g!==void 0?g:"")}return this.checkUpdateOption(i,["lngLat"])&&i.lngLat&&this.setLnglat(i.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&co(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&ja(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(i){return this.popupOption.html=i,this.setDOMContent(i)}setText(i){return this.popupOption.text=i,this.setDOMContent(window.document.createTextNode(i))}setTitle(i){this.show(),this.popupOption.title=i,i?(this.contentTitle||(this.contentTitle=Bi("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),Bp(this.contentTitle),Oy(this.contentTitle,i)):this.contentTitle&&(Ba(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:i,lat:s}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([i,s]),this}setLngLat(i){return this.setLnglat(i)}setLnglat(i){return this.show(),this.lngLat=i,Array.isArray(i)&&(this.lngLat={lng:i[0],lat:i[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(i){return this.popupOption.maxWidth=i,this.update(),this}isOpen(){return!!this.mapsService}getDefault(i){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:ue.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(i){return this.show(),this.createContent(),Oy(this.contentPanel,i),this.update(),this}updateCloseOnClick(i){const s=this.mapsService;s&&(s==null||s.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!i&&requestAnimationFrame(()=>{s==null||s.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(i){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!i&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(i){var s;const f=(s=this.mapsService)===null||s===void 0?void 0:s.getContainer();f&&(f==null||f.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!i&&(f==null||f.addEventListener("mousemove",this.onMouseMove)))}createContent(){if(this.content&&Ba(this.content),this.contentTitle=void 0,this.content=Bi("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const i=qd("l7-icon-guanbi");ja(i,"l7-popup-close-button"),this.content.appendChild(i),this.popupOption.closeButtonOffsets&&(i.style.right=this.popupOption.closeButtonOffsets[0]+"px",i.style.top=this.popupOption.closeButtonOffsets[1]+"px"),i.setAttribute("aria-label","Close popup"),i.addEventListener("click",()=>{this.hide()}),i.addEventListener("pointerup",s=>{s.stopPropagation()}),i.addEventListener("pointerdown",s=>{s.stopPropagation()}),this.closeButton=i}else this.closeButton=void 0;this.contentPanel=Bi("div","l7-popup-content__panel",this.content)}setPopupPosition(i,s,f=!1){if(this.container){const{offsets:g}=this.popupOption;this.container.style.left=i+g[0]+"px",this.container.style.top=s-g[1]+"px",f?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(i,s){return s.some(f=>f in i)}}const{get:Pc}=ii;class Pv extends null{constructor(...i){super(...i),_defineProperty(this,"layerClickCountByFrame",0),_defineProperty(this,"layerConfigMap",new WeakMap),_defineProperty(this,"displayFeatureInfo",void 0),_defineProperty(this,"onLayerClick",(s,f)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(s,f.featureId))this.hide();else{const{title:g,content:y}=this.getLayerInfoFrag(s,f);this.setDOMContent(y),this.setLnglat(f.lngLat),this.setTitle(g),this.setDisplayFeatureInfo({layer:s,featureId:f.featureId}),this.show()}})}),_defineProperty(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),_defineProperty(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),_defineProperty(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var i;const{config:s,items:f}=this.popupOption;return(i=s!=null?s:f)!==null&&i!==void 0?i:[]}addTo(i){return super.addTo(i),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(i){this.unbindLayerEvent();const s=_objectSpread({},i),f=s.trigger||this.popupOption.trigger,g=s.items||this.popupOption.items,y=(g==null?void 0:g.length)===0;s.followCursor=f==="hover"&&!y;const x=this.isShow;return super.setOptions(s),this.bindLayerEvent(),(y||!x)&&this.hide(),this}getDefault(i){const s=i.trigger!=="click";return _objectSpread(_objectSpread({},super.getDefault(i)),{},{trigger:"hover",followCursor:s,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:i,closeOnClick:s}=this.popupOption;this.layerConfigItems.forEach(f=>{var g;const y=this.getLayerByConfig(f);if(!y)return;const x=_objectSpread({},f);if(i==="hover"){const N=this.onLayerMouseMove.bind(this,y),Z=this.onLayerMouseOut.bind(this,y);x.onMouseMove=N,x.onMouseOut=Z,y==null||y.on("mousemove",N),y==null||y.on("mouseout",Z)}else{var O;const N=this.onLayerClick.bind(this,y);x.onClick=N,y==null||y.on("click",N);const Z=(O=this.mapsService)===null||O===void 0?void 0:O.getMapContainer();Z&&s&&Z.addEventListener("click",this.onSceneClick)}const A=y==null||(g=y.getSource)===null||g===void 0?void 0:g.call(y),P=this.onSourceUpdate.bind(this);A==null||A.on("update",P),x.onSourceUpdate=P,this.layerConfigMap.set(y,x)})}unbindLayerEvent(){this.layerConfigItems.forEach(i=>{var s;const f=this.getLayerByConfig(i),g=f&&this.layerConfigMap.get(f);if(!g)return;const{onMouseMove:y,onMouseOut:x,onClick:O,onSourceUpdate:A}=g;if(y&&f.off("mousemove",y),x&&f.off("mouseout",x),O&&f.off("click",O),A){var P;f==null||(P=f.getSource())===null||P===void 0||P.off("update",A)}const N=(s=this.mapsService)===null||s===void 0?void 0:s.getMapContainer();N&&N.removeEventListener("click",this.onSceneClick)})}onLayerMouseMove(i,s){if(!this.isSameFeature(i,s.featureId)){const{title:f,content:g}=this.getLayerInfoFrag(i,s);this.setDOMContent(g),this.setTitle(f),this.setDisplayFeatureInfo({layer:i,featureId:s.featureId}),this.show()}}onLayerMouseOut(i,s){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(i,s){const f=this.layerConfigMap.get(i);let g;const y=document.createDocumentFragment();if(f){let x=s.feature;x.type==="Feature"&&"properties"in x&&"geometry"in x&&(x=x.properties);const{title:O,fields:A,customContent:P}=f;if(O){g=document.createDocumentFragment();const N=O instanceof Function?O(x):O;DOM.appendElementType(g,N)}if(P){const N=P instanceof Function?P(x):P;DOM.appendElementType(y,N)}else A!=null&&A.length&&(A==null||A.forEach(N=>{var Z,W;const{field:mt,formatField:Nt,formatValue:Jt,getValue:ye}=typeof N=="string"?{field:N}:N,Ne=DOM.create("div","l7-layer-popup__row"),ze=ye?ye(s.feature):Pc(x,mt),He=(Z=Nt instanceof Function?Nt(mt,x):Nt)!==null&&Z!==void 0?Z:mt;let nn=(W=Jt instanceof Function?Jt(ze,x):Jt)!==null&&W!==void 0?W:ze;const pn=DOM.create("span","l7-layer-popup__key",Ne);DOM.appendElementType(pn,He),DOM.appendElementType(pn,document.createTextNode("\uFF1A"));const In=DOM.create("span","l7-layer-popup__value",Ne);Array.isArray(nn)&&nn.every(En=>!(En instanceof Object))&&(nn=nn.map(En=>String(En)).join(",")),DOM.appendElementType(In,nn),y.appendChild(Ne)}))}return{title:g,content:y}}getLayerByConfig(i){const s=i.layer;if(s instanceof Object)return s;if(typeof s=="string")return this.layerService.getLayer(s)||this.layerService.getLayerByName(s)}isSameFeature(i,s){const f=this.displayFeatureInfo;return f&&i===f.layer&&s===f.featureId}setDisplayFeatureInfo(i){const s=this.displayFeatureInfo;s&&s.layer.off("hide",this.onLayerHide),i&&i.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=i}}function Ml(a,i){var s=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,f=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(s||f)&&(i||(i=document),!!i)){var g=i.head||i.getElementsByTagName("head")[0];if(!g){g=i.createElement("head");var y=i.body||i.getElementsByTagName("body")[0];y?y.parentNode.insertBefore(g,y):i.documentElement.appendChild(g)}var x=i.createElement("style");return x.type="text/css",x.styleSheet?x.styleSheet.cssText=a:x.appendChild(i.createTextNode(a)),g.appendChild(x),x}}Ml(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var Ix=k(81550),Iv=k.n(Ix),Rx=class{constructor(a,i){const{buffer:s,offset:f,stride:g,normalized:y,size:x,divisor:O}=i;this.buffer=s,this.attribute={buffer:s.get(),offset:f||0,stride:g||0,normalized:y||!1,divisor:O||0},x&&(this.attribute.size=x)}get(){return this.attribute}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},DM={[ot.POINTS]:"points",[ot.LINES]:"lines",[ot.LINE_LOOP]:"line loop",[ot.LINE_STRIP]:"line strip",[ot.TRIANGLES]:"triangles",[ot.TRIANGLE_FAN]:"triangle fan",[ot.TRIANGLE_STRIP]:"triangle strip"},tp={[ot.STATIC_DRAW]:"static",[ot.DYNAMIC_DRAW]:"dynamic",[ot.STREAM_DRAW]:"stream"},Rv={[ot.BYTE]:"int8",[ot.INT]:"int32",[ot.UNSIGNED_BYTE]:"uint8",[ot.UNSIGNED_SHORT]:"uint16",[ot.UNSIGNED_INT]:"uint32",[ot.FLOAT]:"float"},kx={[ot.ALPHA]:"alpha",[ot.LUMINANCE]:"luminance",[ot.LUMINANCE_ALPHA]:"luminance alpha",[ot.RGB]:"rgb",[ot.RGBA]:"rgba",[ot.RGBA4]:"rgba4",[ot.RGB5_A1]:"rgb5 a1",[ot.RGB565]:"rgb565",[ot.DEPTH_COMPONENT]:"depth",[ot.DEPTH_STENCIL]:"depth stencil"},Of={[ot.DONT_CARE]:"dont care",[ot.NICEST]:"nice",[ot.FASTEST]:"fast"},Dx={[ot.NEAREST]:"nearest",[ot.LINEAR]:"linear",[ot.LINEAR_MIPMAP_LINEAR]:"mipmap",[ot.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[ot.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[ot.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},Ef={[ot.REPEAT]:"repeat",[ot.CLAMP_TO_EDGE]:"clamp",[ot.MIRRORED_REPEAT]:"mirror"},ep={[ot.NONE]:"none",[ot.BROWSER_DEFAULT_WEBGL]:"browser"},FM={[ot.NEVER]:"never",[ot.ALWAYS]:"always",[ot.LESS]:"less",[ot.LEQUAL]:"lequal",[ot.GREATER]:"greater",[ot.GEQUAL]:"gequal",[ot.EQUAL]:"equal",[ot.NOTEQUAL]:"notequal"},kv={[ot.FUNC_ADD]:"add",[ot.MIN_EXT]:"min",[ot.MAX_EXT]:"max",[ot.FUNC_SUBTRACT]:"subtract",[ot.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},wf={[ot.ZERO]:"zero",[ot.ONE]:"one",[ot.SRC_COLOR]:"src color",[ot.ONE_MINUS_SRC_COLOR]:"one minus src color",[ot.SRC_ALPHA]:"src alpha",[ot.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[ot.DST_COLOR]:"dst color",[ot.ONE_MINUS_DST_COLOR]:"one minus dst color",[ot.DST_ALPHA]:"dst alpha",[ot.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[ot.CONSTANT_COLOR]:"constant color",[ot.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[ot.CONSTANT_ALPHA]:"constant alpha",[ot.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[ot.SRC_ALPHA_SATURATE]:"src alpha saturate"},lo={[ot.NEVER]:"never",[ot.ALWAYS]:"always",[ot.LESS]:"less",[ot.LEQUAL]:"lequal",[ot.GREATER]:"greater",[ot.GEQUAL]:"gequal",[ot.EQUAL]:"equal",[ot.NOTEQUAL]:"notequal"},Af={[ot.ZERO]:"zero",[ot.KEEP]:"keep",[ot.REPLACE]:"replace",[ot.INVERT]:"invert",[ot.INCR]:"increment",[ot.DECR]:"decrement",[ot.INCR_WRAP]:"increment wrap",[ot.DECR_WRAP]:"decrement wrap"},js={[ot.FRONT]:"front",[ot.BACK]:"back"},Ll=class{constructor(a,i){this.isDestroyed=!1;const{data:s,usage:f,type:g}=i;this.buffer=a.buffer({data:s,usage:tp[f||ot.STATIC_DRAW],type:Rv[g||ot.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:i}){this.buffer.subdata(a,i)}},NM=class{constructor(a,i){const{data:s,usage:f,type:g,count:y}=i;this.elements=a.elements({data:s,usage:tp[f||ot.STATIC_DRAW],type:Rv[g||ot.UNSIGNED_BYTE],count:y})}get(){return this.elements}subData({data:a}){this.elements.subdata(a)}destroy(){}},Pl=class{constructor(a,i){const{width:s,height:f,color:g,colors:y}=i,x={width:s,height:f};Array.isArray(y)&&(x.colors=y.map(O=>O.get())),g&&typeof g!="boolean"&&(x.color=g.get()),this.framebuffer=a.framebuffer(x)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:a,height:i}){this.framebuffer.resize(a,i)}},Je=k(75334),pi=Object.defineProperty,Dv=Object.defineProperties,Ic=Object.getOwnPropertyDescriptors,Tf=Object.getOwnPropertySymbols,Fv=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,np=(a,i,s)=>i in a?pi(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,Rc=(a,i)=>{for(var s in i||(i={}))Fv.call(i,s)&&np(a,s,i[s]);if(Tf)for(var s of Tf(i))Pa.call(i,s)&&np(a,s,i[s]);return a},Fx=(a,i)=>Dv(a,Ic(i)),{isPlainObject:Nx,isTypedArray:Bx}=ii,jx=class{constructor(a,i){this.destroyed=!1,this.uniforms={},this.reGl=a;const{vs:s,fs:f,attributes:g,uniforms:y,primitive:x,count:O,elements:A,depth:P,cull:N,instances:Z}=i,W={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:Je.Fp.LOWER_LEFT,clipSpaceNearZ:Je.R$.NEGATIVE_ONE,supportMRT:!1},mt={};this.options=i,y&&(this.uniforms=this.extractUniforms(y),Object.keys(y).forEach(ze=>{mt[ze]=a.prop(ze)}));const Nt={};Object.keys(g).forEach(ze=>{Nt[ze]=g[ze].get()});const Jt=w1((0,Je.oX)(W,"frag",f,null,!1)),ye=w1((0,Je.oX)(W,"vert",s,null,!1)),Ne={attributes:Nt,frag:Jt,uniforms:mt,vert:ye,colorMask:a.prop("colorMask"),lineWidth:1,blend:{enable:a.prop("blend.enable"),func:a.prop("blend.func"),equation:a.prop("blend.equation"),color:a.prop("blend.color")},stencil:{enable:a.prop("stencil.enable"),mask:a.prop("stencil.mask"),func:a.prop("stencil.func"),opFront:a.prop("stencil.opFront"),opBack:a.prop("stencil.opBack")},primitive:DM[x===void 0?ot.TRIANGLES:x]};Z&&(Ne.instances=Z),O?Ne.count=O:A&&(Ne.elements=A.get()),this.initDepthDrawParams({depth:P},Ne),this.initCullDrawParams({cull:N},Ne),this.drawCommand=a(Ne),this.drawParams=Ne}updateAttributesAndElements(a,i){const s={};Object.keys(a).forEach(f=>{s[f]=a[f].get()}),this.drawParams.attributes=s,this.drawParams.elements=i.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(a){const i={};Object.keys(a).forEach(s=>{i[s]=a[s].get()}),this.drawParams.attributes=i,this.drawCommand=this.reGl(this.drawParams)}addUniforms(a){this.uniforms=Rc(Rc({},this.uniforms),this.extractUniforms(a))}draw(a,i){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const s=Rc(Rc({},this.uniforms),this.extractUniforms(a.uniforms||{})),f={};Object.keys(s).forEach(g=>{const y=typeof s[g];y==="boolean"||y==="number"||Array.isArray(s[g])||s[g].BYTES_PER_ELEMENT?f[g]=s[g]:f[g]=s[g].get()}),f.blend=i?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(a),f.stencil=this.getStencilDrawParams(a),f.colorMask=this.getColorMaskDrawParams(a,i),this.drawCommand(f)}destroy(){var a,i;(i=(a=this.drawParams)==null?void 0:a.elements)==null||i.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(s=>{s==null||s.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:a},i){a&&(i.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:FM[a.func||ot.LESS],range:a.range||[0,1]})}getBlendDrawParams({blend:a}){const{enable:i,func:s,equation:f,color:g=[0,0,0,0]}=a||{};return{enable:!!i,func:{srcRGB:wf[s&&s.srcRGB||ot.SRC_ALPHA],srcAlpha:wf[s&&s.srcAlpha||ot.SRC_ALPHA],dstRGB:wf[s&&s.dstRGB||ot.ONE_MINUS_SRC_ALPHA],dstAlpha:wf[s&&s.dstAlpha||ot.ONE_MINUS_SRC_ALPHA]},equation:{rgb:kv[f&&f.rgb||ot.FUNC_ADD],alpha:kv[f&&f.alpha||ot.FUNC_ADD]},color:g}}getStencilDrawParams({stencil:a}){const{enable:i,mask:s=-1,func:f={cmp:ot.ALWAYS,ref:0,mask:-1},opFront:g={fail:ot.KEEP,zfail:ot.KEEP,zpass:ot.KEEP},opBack:y={fail:ot.KEEP,zfail:ot.KEEP,zpass:ot.KEEP}}=a||{};return{enable:!!i,mask:s,func:Fx(Rc({},f),{cmp:lo[f.cmp]}),opFront:{fail:Af[g.fail],zfail:Af[g.zfail],zpass:Af[g.zpass]},opBack:{fail:Af[y.fail],zfail:Af[y.zfail],zpass:Af[y.zpass]}}}getColorMaskDrawParams({stencil:a},i){return a!=null&&a.enable&&a.opFront&&!i?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:a},i){if(a){const{enable:s,face:f=ot.BACK}=a;i.cull={enable:!!s,face:js[f]}}}extractUniforms(a){const i={};return Object.keys(a).forEach(s=>{this.extractUniformsRecursively(s,a[s],i,"")}),i}extractUniformsRecursively(a,i,s,f){if(i===null||typeof i=="number"||typeof i=="boolean"||Array.isArray(i)&&typeof i[0]=="number"||Bx(i)||i===""||"resize"in i){s[`${f&&f+"."}${a}`]=i;return}Nx(i)&&Object.keys(i).forEach(g=>{this.extractUniformsRecursively(g,i[g],s,`${f&&f+"."}${a}`)}),Array.isArray(i)&&i.forEach((g,y)=>{Object.keys(g).forEach(x=>{this.extractUniformsRecursively(x,g[x],s,`${f&&f+"."}${a}[${y}]`)})})}},zx=class{constructor(a,i){this.isDestroy=!1;const{data:s,type:f=ot.UNSIGNED_BYTE,width:g,height:y,flipY:x=!1,format:O=ot.RGBA,mipmap:A=!1,wrapS:P=ot.CLAMP_TO_EDGE,wrapT:N=ot.CLAMP_TO_EDGE,aniso:Z=0,alignment:W=1,premultiplyAlpha:mt=!1,mag:Nt=ot.NEAREST,min:Jt=ot.NEAREST,colorSpace:ye=ot.BROWSER_DEFAULT_WEBGL,x:Ne=0,y:ze=0,copy:He=!1}=i;this.width=g,this.height=y;const nn={width:g,height:y,type:Rv[f],format:kx[O],wrapS:Ef[P],wrapT:Ef[N],mag:Dx[Nt],min:Dx[Jt],alignment:W,flipY:x,colorSpace:ep[ye],premultiplyAlpha:mt,aniso:Z,x:Ne,y:ze,copy:He};s&&(nn.data=s),typeof A=="number"?nn.mipmap=Of[A]:typeof A=="boolean"&&(nn.mipmap=A),this.texture=a.texture(nn)}get(){return this.texture}update(a={}){this.texture(a)}bind(){this.texture._texture.bind()}resize({width:a,height:i}){this.texture.resize(a,i),this.width=a,this.height=i}getSize(){return[this.width,this.height]}destroy(){var a;this.isDestroy||(a=this.texture)==null||a.destroy(),this.isDestroy=!0}},rp=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),Ux=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=a=>new jx(this.gl,a),this.createAttribute=a=>new Rx(this.gl,a),this.createBuffer=a=>new Ll(this.gl,a),this.createElements=a=>new NM(this.gl,a),this.createTexture2D=a=>new zx(this.gl,a),this.createFramebuffer=a=>new Pl(this.gl,a),this.useFramebuffer=(a,i)=>{this.gl({framebuffer:a?a.get():null})(i)},this.useFramebufferAsync=(a,i)=>rp(this,null,function*(){this.gl({framebuffer:a?a.get():null})(i)}),this.clear=a=>{var i;const{color:s,depth:f,stencil:g,framebuffer:y=null}=a,x={color:s,depth:f,stencil:g};x.framebuffer=y===null?y:y.get(),(i=this.gl)==null||i.clear(x)},this.viewport=({x:a,y:i,width:s,height:f})=>{this.gl._gl.viewport(a,i,s,f),this.width=s,this.height=f,this.gl._refresh()},this.readPixels=a=>{const{framebuffer:i,x:s,y:f,width:g,height:y}=a,x={x:s,y:f,width:g,height:y};return i&&(x.framebuffer=i.get()),this.gl.read(x)},this.readPixelsAsync=a=>rp(this,null,function*(){return this.readPixels(a)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var a,i,s;this.canvas=null,(s=(i=(a=this.gl)==null?void 0:a._gl)==null?void 0:i.getExtension("WEBGL_lose_context"))==null||s.loseContext(),this.gl.destroy(),this.gl=null}}init(a,i,s){return rp(this,null,function*(){this.canvas=a,s?this.gl=s:this.gl=yield new Promise((f,g)=>{Iv()({canvas:this.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,stencil:i.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(y,x)=>{(y||!x)&&g(y),f(x)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const a=this.getGLContext();a.disable(a.CULL_FACE)}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},Nv=class{constructor(a,i){const{buffer:s,offset:f,stride:g,normalized:y,size:x,divisor:O,shaderLocation:A}=i;this.buffer=s,this.attribute={shaderLocation:A,buffer:s.get(),offset:f||0,stride:g||0,normalized:y||!1,divisor:O||0},x&&(this.attribute.size=x)}get(){return this.buffer}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},zs={[ot.FLOAT]:Float32Array,[ot.UNSIGNED_BYTE]:Uint8Array,[ot.SHORT]:Int16Array,[ot.UNSIGNED_SHORT]:Uint16Array,[ot.INT]:Int32Array,[ot.UNSIGNED_INT]:Uint32Array},BM={[ot.POINTS]:Je.YV.POINTS,[ot.LINES]:Je.YV.LINES,[ot.LINE_LOOP]:Je.YV.LINES,[ot.LINE_STRIP]:Je.YV.LINE_STRIP,[ot.TRIANGLES]:Je.YV.TRIANGLES,[ot.TRIANGLE_FAN]:Je.YV.TRIANGLES,[ot.TRIANGLE_STRIP]:Je.YV.TRIANGLE_STRIP},Zx={1:Je.ED.F32_R,2:Je.ED.F32_RG,3:Je.ED.F32_RGB,4:Je.ED.F32_RGBA},jM={[ot.STATIC_DRAW]:Je.MP.STATIC,[ot.DYNAMIC_DRAW]:Je.MP.DYNAMIC,[ot.STREAM_DRAW]:Je.MP.DYNAMIC},Hx={[ot.REPEAT]:Je.OB.REPEAT,[ot.CLAMP_TO_EDGE]:Je.OB.CLAMP_TO_EDGE,[ot.MIRRORED_REPEAT]:Je.OB.MIRRORED_REPEAT},Vo={[ot.NEVER]:Je.wb.NEVER,[ot.ALWAYS]:Je.wb.ALWAYS,[ot.LESS]:Je.wb.LESS,[ot.LEQUAL]:Je.wb.LEQUAL,[ot.GREATER]:Je.wb.GREATER,[ot.GEQUAL]:Je.wb.GEQUAL,[ot.EQUAL]:Je.wb.EQUAL,[ot.NOTEQUAL]:Je.wb.NOTEQUAL},Vx={[ot.FRONT]:Je.Wf.FRONT,[ot.BACK]:Je.Wf.BACK},ip={[ot.FUNC_ADD]:Je.bt.ADD,[ot.MIN_EXT]:Je.bt.MIN,[ot.MAX_EXT]:Je.bt.MAX,[ot.FUNC_SUBTRACT]:Je.bt.SUBSTRACT,[ot.FUNC_REVERSE_SUBTRACT]:Je.bt.REVERSE_SUBSTRACT},Il={[ot.ZERO]:Je.zi.ZERO,[ot.ONE]:Je.zi.ONE,[ot.SRC_COLOR]:Je.zi.SRC,[ot.ONE_MINUS_SRC_COLOR]:Je.zi.ONE_MINUS_SRC,[ot.SRC_ALPHA]:Je.zi.SRC_ALPHA,[ot.ONE_MINUS_SRC_ALPHA]:Je.zi.ONE_MINUS_SRC_ALPHA,[ot.DST_COLOR]:Je.zi.DST,[ot.ONE_MINUS_DST_COLOR]:Je.zi.ONE_MINUS_DST,[ot.DST_ALPHA]:Je.zi.DST_ALPHA,[ot.ONE_MINUS_DST_ALPHA]:Je.zi.ONE_MINUS_DST_ALPHA,[ot.CONSTANT_COLOR]:Je.zi.CONST,[ot.ONE_MINUS_CONSTANT_COLOR]:Je.zi.ONE_MINUS_CONSTANT,[ot.CONSTANT_ALPHA]:Je.zi.CONST,[ot.ONE_MINUS_CONSTANT_ALPHA]:Je.zi.ONE_MINUS_CONSTANT,[ot.SRC_ALPHA_SATURATE]:Je.zi.SRC_ALPHA_SATURATE},Cf={[ot.REPLACE]:Je.Kd.REPLACE,[ot.KEEP]:Je.Kd.KEEP,[ot.ZERO]:Je.Kd.ZERO,[ot.INVERT]:Je.Kd.INVERT,[ot.INCR]:Je.Kd.INCREMENT_CLAMP,[ot.DECR]:Je.Kd.DECREMENT_CLAMP,[ot.INCR_WRAP]:Je.Kd.INCREMENT_WRAP,[ot.DECR_WRAP]:Je.Kd.DECREMENT_WRAP},Bv={[ot.ALWAYS]:Je.wb.ALWAYS,[ot.EQUAL]:Je.wb.EQUAL,[ot.GEQUAL]:Je.wb.GEQUAL,[ot.GREATER]:Je.wb.GREATER,[ot.LEQUAL]:Je.wb.LEQUAL,[ot.LESS]:Je.wb.LESS,[ot.NEVER]:Je.wb.NEVER,[ot.NOTEQUAL]:Je.wb.NOTEQUAL},G6={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function Mf(a){return Object.prototype.toString.call(a)in G6}function Wx(a,i){const s=a.length,f=Math.ceil(s/3),g=s+f,y=new Float32Array(g);for(let x=0;x<g;x+=4)y[x]=a[x/4*3],y[x+1]=a[x/4*3+1],y[x+2]=a[x/4*3+2],y[x+3]=i;return y}var $6=class{constructor(a,i){this.isDestroyed=!1;const{data:s,usage:f,type:g,isUBO:y,label:x}=i;let O;Mf(s)?O=s:O=new zs[this.type||ot.FLOAT](s),this.type=g,this.size=O.byteLength,this.buffer=a.createBuffer({viewOrSize:O,usage:y?Je.FB.UNIFORM:Je.FB.VERTEX,hint:jM[f||ot.STATIC_DRAW]}),x&&a.setResourceName(this.buffer,x)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:i}){let s;Mf(a)?s=a:s=new zs[this.type||ot.FLOAT](a),this.buffer.setSubData(i,new Uint8Array(s.buffer))}};function yr(a,i=0){return a+=i,a+=a<<10,a+=a>>>6,a>>>0}function jv(a){return a+=a<<3,a^=a>>>11,a+=a<<15,a>>>0}function zv(){return 0}var Gx=class{constructor(){this.keys=[],this.values=[]}},Lf=class{constructor(a,i){this.keyEqualFunc=a,this.keyHashFunc=i,this.buckets=new Map}findBucketIndex(a,i){for(let s=0;s<a.keys.length;s++)if(this.keyEqualFunc(i,a.keys[s]))return s;return-1}findBucket(a){const i=this.keyHashFunc(a);return this.buckets.get(i)}get(a){const i=this.findBucket(a);if(i===void 0)return null;const s=this.findBucketIndex(i,a);return s<0?null:i.values[s]}add(a,i){const s=this.keyHashFunc(a);this.buckets.get(s)===void 0&&this.buckets.set(s,new Gx);const f=this.buckets.get(s);f.keys.push(a),f.values.push(i)}delete(a){const i=this.findBucket(a);if(i===void 0)return;const s=this.findBucketIndex(i,a);s!==-1&&(i.keys.splice(s,1),i.values.splice(s,1))}clear(){this.buckets.clear()}size(){let a=0;for(const i of this.buckets.values())a+=i.values.length;return a}*values(){for(const a of this.buckets.values())for(let i=a.values.length-1;i>=0;i--)yield a.values[i]}};function op(a,i){return a=yr(a,i.blendMode),a=yr(a,i.blendSrcFactor),a=yr(a,i.blendDstFactor),a}function ap(a,i){return a=op(a,i.rgbBlendState),a=op(a,i.alphaBlendState),a=yr(a,i.channelWriteMask),a}function $x(a,i){return a=yr(a,i.r<<24|i.g<<16|i.b<<8|i.a),a}function Yx(a,i){var s,f,g,y,x,O,A,P;for(let N=0;N<i.attachmentsState.length;N++)a=ap(a,i.attachmentsState[N]);return a=$x(a,i.blendConstant||Je.Ab),a=yr(a,i.depthCompare),a=yr(a,i.depthWrite?1:0),a=yr(a,(s=i.stencilFront)==null?void 0:s.compare),a=yr(a,(f=i.stencilFront)==null?void 0:f.passOp),a=yr(a,(g=i.stencilFront)==null?void 0:g.failOp),a=yr(a,(y=i.stencilFront)==null?void 0:y.depthFailOp),a=yr(a,(x=i.stencilBack)==null?void 0:x.compare),a=yr(a,(O=i.stencilBack)==null?void 0:O.passOp),a=yr(a,(A=i.stencilBack)==null?void 0:A.failOp),a=yr(a,(P=i.stencilBack)==null?void 0:P.depthFailOp),a=yr(a,i.stencilWrite?1:0),a=yr(a,i.cullMode),a=yr(a,i.frontFace?1:0),a=yr(a,i.polygonOffset?1:0),a}function Xx(a){let i=0;i=yr(i,a.program.id),a.inputLayout!==null&&(i=yr(i,a.inputLayout.id)),i=Yx(i,a.megaStateDescriptor);for(let s=0;s<a.colorAttachmentFormats.length;s++)i=yr(i,a.colorAttachmentFormats[s]||0);return i=yr(i,a.depthStencilAttachmentFormat||0),jv(i)}function qx(a){let i=0;if(a.samplerBindings)for(let s=0;s<a.samplerBindings.length;s++){const f=a.samplerBindings[s];f!==null&&f.texture!==null&&(i=yr(i,f.texture.id))}if(a.uniformBufferBindings)for(let s=0;s<a.uniformBufferBindings.length;s++){const f=a.uniformBufferBindings[s];f!==null&&f.buffer!==null&&(i=yr(i,f.buffer.id),i=yr(i,f.binding),i=yr(i,f.offset),i=yr(i,f.size))}if(a.storageBufferBindings)for(let s=0;s<a.storageBufferBindings.length;s++){const f=a.storageBufferBindings[s];f!==null&&f.buffer!==null&&(i=yr(i,f.buffer.id),i=yr(i,f.binding),i=yr(i,f.offset),i=yr(i,f.size))}if(a.storageTextureBindings)for(let s=0;s<a.storageTextureBindings.length;s++){const f=a.storageTextureBindings[s];f!==null&&f.texture!==null&&(i=yr(i,f.texture.id),i=yr(i,f.binding))}return jv(i)}function zM(a,i){var s,f,g,y;return((s=a.vertex)==null?void 0:s.glsl)===((f=i.vertex)==null?void 0:f.glsl)&&((g=a.fragment)==null?void 0:g.glsl)===((y=i.fragment)==null?void 0:y.glsl)}function Kx(a){var i,s;return{vertex:{glsl:(i=a.vertex)==null?void 0:i.glsl},fragment:{glsl:(s=a.fragment)==null?void 0:s.glsl}}}var sp=class{constructor(a){this.device=a,this.bindingsCache=new Lf(Je.PU,qx),this.renderPipelinesCache=new Lf(Je.zC,Xx),this.inputLayoutsCache=new Lf(Je.F3,zv),this.programCache=new Lf(zM,zv)}createBindings(a){var i;let s=this.bindingsCache.get(a);if(s===null){const f=(0,Je.LJ)(a);f.uniformBufferBindings=(i=f.uniformBufferBindings)==null?void 0:i.filter(({size:g})=>g&&g>0),s=this.device.createBindings(f),this.bindingsCache.add(f,s)}return s}createRenderPipeline(a){let i=this.renderPipelinesCache.get(a);if(i===null){const s=(0,Je.yA)(a);s.colorAttachmentFormats=s.colorAttachmentFormats.filter(f=>f),i=this.device.createRenderPipeline(s),this.renderPipelinesCache.add(s,i)}return i}createInputLayout(a){a.vertexBufferDescriptors=a.vertexBufferDescriptors.filter(s=>!!s);let i=this.inputLayoutsCache.get(a);if(i===null){const s=(0,Je.Id)(a);i=this.device.createInputLayout(s),this.inputLayoutsCache.add(s,i)}return i}createProgram(a){let i=this.programCache.get(a);if(i===null){const s=Kx(a);i=this.device.createProgram(a),this.programCache.add(s,i)}return i}destroy(){for(const a of this.bindingsCache.values())a.destroy();for(const a of this.renderPipelinesCache.values())a.destroy();for(const a of this.inputLayoutsCache.values())a.destroy();for(const a of this.programCache.values())a.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},Qx=class{constructor(a,i){const{data:s,type:f,count:g=0}=i;let y;Mf(s)?y=s:y=new zs[this.type||ot.UNSIGNED_INT](s),this.type=f,this.count=g,this.indexBuffer=a.createBuffer({viewOrSize:y,usage:Je.FB.INDEX})}get(){return this.indexBuffer}subData({data:a}){let i;Mf(a)?i=a:i=new zs[this.type||ot.UNSIGNED_INT](a),this.indexBuffer.setSubData(0,new Uint8Array(i.buffer))}destroy(){this.indexBuffer.destroy()}};function Uv(a){return!!(a&&a.texture)}var Zv=class{constructor(a,i){this.device=a,this.options=i,this.isDestroy=!1;const{wrapS:s=ot.CLAMP_TO_EDGE,wrapT:f=ot.CLAMP_TO_EDGE,aniso:g,mag:y=ot.NEAREST,min:x=ot.NEAREST}=i;this.createTexture(i),this.sampler=a.createSampler({addressModeU:Hx[s],addressModeV:Hx[f],minFilter:x===ot.NEAREST?Je.X9.POINT:Je.X9.BILINEAR,magFilter:y===ot.NEAREST?Je.X9.POINT:Je.X9.BILINEAR,mipmapFilter:Je.f$.NO_MIP,maxAnisotropy:g})}createTexture(a){const{type:i=ot.UNSIGNED_BYTE,width:s,height:f,flipY:g=!1,format:y=ot.RGBA,alignment:x=1,usage:O=Ou.SAMPLED,unorm:A=!1,label:P}=a;let{data:N}=a;this.width=s,this.height=f;let Z=Je.ED.U8_RGBA_RT;if(i===ot.UNSIGNED_BYTE&&y===ot.RGBA)Z=A?Je.ED.U8_RGBA_NORM:Je.ED.U8_RGBA_RT;else if(i===ot.UNSIGNED_BYTE&&y===ot.LUMINANCE)Z=Je.ED.U8_LUMINANCE;else if(i===ot.FLOAT&&y===ot.LUMINANCE)Z=Je.ED.F32_LUMINANCE;else if(i===ot.FLOAT&&y===ot.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(N&&(N=Wx(N,0)),Z=Je.ED.F32_RGBA):Z=Je.ED.F32_RGB;else if(i===ot.FLOAT&&y===ot.RGBA)Z=Je.ED.F32_RGBA;else if(i===ot.FLOAT&&y===ot.RED)Z=Je.ED.F32_R;else throw new Error(`create texture error, type: ${i}, format: ${y}`);this.texture=this.device.createTexture({format:Z,width:s,height:f,usage:O===Ou.SAMPLED?Je.v2.SAMPLED:Je.v2.RENDER_TARGET,pixelStore:{unpackFlipY:g,packAlignment:x},mipLevelCount:1}),P&&this.device.setResourceName(this.texture,P),N&&this.texture.setImageData([N])}get(){return this.texture}update(a){const{data:i}=a;this.texture.setImageData([i])}bind(){}resize({width:a,height:i}){(this.width!==a||this.height!==i)&&this.destroy(),this.options.width=a,this.options.height=i,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var a;!this.isDestroy&&!this.texture.destroyed&&((a=this.texture)==null||a.destroy()),this.isDestroy=!0}},Hv=class{constructor(a,i){this.device=a,this.options=i,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(a=!1){const{width:i,height:s,color:f}=this.options;f&&(Uv(f)?(a&&f.resize({width:i,height:s}),this.colorTexture=f.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=f.width,this.height=f.height):i&&s&&(this.colorTexture=this.device.createTexture({format:Je.ED.U8_RGBA_RT,usage:Je.v2.RENDER_TARGET,width:i,height:s}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=i,this.height=s))}createDepthRenderTarget(a=!1){const{width:i,height:s,depth:f}=this.options;f&&(Uv(f)?(a&&f.resize({width:i,height:s}),this.depthTexture=f.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=f.width,this.height=f.height):i&&s&&(this.depthTexture=this.device.createTexture({format:Je.ED.D24_S8,usage:Je.v2.RENDER_TARGET,width:i,height:s}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=i,this.height=s))}get(){return this.colorRenderTarget}destroy(){var a,i;(a=this.colorRenderTarget)==null||a.destroy(),(i=this.depthRenderTarget)==null||i.destroy()}resize({width:a,height:i}){(this.width!==a||this.height!==i)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=a,this.options.height=i,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},Jx=Object.defineProperty,t3=Object.defineProperties,UM=Object.getOwnPropertyDescriptors,e3=Object.getOwnPropertySymbols,n3=Object.prototype.hasOwnProperty,r3=Object.prototype.propertyIsEnumerable,cp=(a,i,s)=>i in a?Jx(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,Us=(a,i)=>{for(var s in i||(i={}))n3.call(i,s)&&cp(a,s,i[s]);if(e3)for(var s of e3(i))r3.call(i,s)&&cp(a,s,i[s]);return a},ZM=(a,i)=>t3(a,UM(i)),{isPlainObject:HM,isTypedArray:i3,isNil:o3}=ii,a3=class{constructor(a,i,s){this.device=a,this.options=i,this.service=s,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:f,fs:g,attributes:y,uniforms:x,count:O,elements:A,diagnosticDerivativeUniformityEnabled:P}=i;this.options=i;const N=P?"":this.service.viewportOrigin===Je.Fp.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=s.renderCache.createProgram({vertex:{glsl:f},fragment:{glsl:g,postprocess:Nt=>N+Nt}}),x&&(this.uniforms=this.extractUniforms(x));const Z=[];let W=0;Object.keys(y).forEach(Nt=>{const Jt=y[Nt],ye=Jt.get();this.vertexBuffers.push(ye.get());const{offset:Ne=0,stride:ze=0,size:He=1,divisor:nn=0,shaderLocation:pn=0}=Jt.attribute;Z.push({arrayStride:ze||He*4,stepMode:Je.Kz.VERTEX,attributes:[{format:Zx[He],shaderLocation:pn,offset:Ne,divisor:nn}]}),W=ye.size/He}),O||(this.options.count=W),A&&(this.indexBuffer=A.get());const mt=s.renderCache.createInputLayout({vertexBufferDescriptors:Z,indexBufferFormat:A?Je.ED.U32_R:null,program:this.program});this.inputLayout=mt,this.pipeline=this.createPipeline(i)}createPipeline(a,i){var s;const{primitive:f=ot.TRIANGLES,depth:g,cull:y,blend:x,stencil:O}=a,A=this.initDepthDrawParams({depth:g}),P=!!(A&&A.enable),N=this.initCullDrawParams({cull:y}),Z=!!(N&&N.enable),W=this.getBlendDrawParams({blend:x}),mt=!!(W&&W.enable),Nt=this.getStencilDrawParams({stencil:O}),Jt=!!(Nt&&Nt.enable),ye=this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:BM[f],colorAttachmentFormats:[Je.ED.U8_RGBA_RT],depthStencilAttachmentFormat:Je.ED.D24_S8,megaStateDescriptor:{attachmentsState:[i?{channelWriteMask:Je.GI.ALL,rgbBlendState:{blendMode:Je.bt.ADD,blendSrcFactor:Je.zi.ONE,blendDstFactor:Je.zi.ZERO},alphaBlendState:{blendMode:Je.bt.ADD,blendSrcFactor:Je.zi.ONE,blendDstFactor:Je.zi.ZERO}}:{channelWriteMask:Jt&&Nt.opFront.zpass===Je.Kd.REPLACE?Je.GI.NONE:Je.GI.ALL,rgbBlendState:{blendMode:mt&&W.equation.rgb||Je.bt.ADD,blendSrcFactor:mt&&W.func.srcRGB||Je.zi.SRC_ALPHA,blendDstFactor:mt&&W.func.dstRGB||Je.zi.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:mt&&W.equation.alpha||Je.bt.ADD,blendSrcFactor:mt&&W.func.srcAlpha||Je.zi.ONE,blendDstFactor:mt&&W.func.dstAlpha||Je.zi.ONE}}],blendConstant:mt?Je.Ab:void 0,depthWrite:P,depthCompare:P&&A.func||Je.wb.LESS,cullMode:Z&&N.face||Je.Wf.NONE,stencilWrite:Jt,stencilFront:{compare:Jt?Nt.func.cmp:Je.wb.ALWAYS,passOp:Nt.opFront.zpass,failOp:Nt.opFront.fail,depthFailOp:Nt.opFront.zfail,mask:Nt.opFront.mask},stencilBack:{compare:Jt?Nt.func.cmp:Je.wb.ALWAYS,passOp:Nt.opBack.zpass,failOp:Nt.opBack.fail,depthFailOp:Nt.opBack.zfail,mask:Nt.opBack.mask}}});return Jt&&!o3((s=O==null?void 0:O.func)==null?void 0:s.ref)&&(ye.stencilFuncReference=O.func.ref),ye}updateAttributesAndElements(){}updateAttributes(){}addUniforms(a){this.uniforms=Us(Us({},this.uniforms),this.extractUniforms(a))}draw(a,i){const s=Us(Us({},this.options),a),{count:f=0,instances:g,elements:y,uniforms:x={},uniformBuffers:O,textures:A}=s;this.uniforms=Us(Us({},this.uniforms),this.extractUniforms(x));const{renderPass:P,currentFramebuffer:N,width:Z,height:W}=this.service;this.pipeline=this.createPipeline(s,i);const mt=this.service.device,Nt=mt.swapChainHeight;if(mt.swapChainHeight=(N==null?void 0:N.height)||W,P.setViewport(0,0,(N==null?void 0:N.width)||Z,(N==null?void 0:N.height)||W),mt.swapChainHeight=Nt,P.setPipeline(this.pipeline),o3(this.pipeline.stencilFuncReference)||P.setStencilReference(this.pipeline.stencilFuncReference),P.setVertexInput(this.inputLayout,this.vertexBuffers.map(Jt=>({buffer:Jt})),y?{buffer:this.indexBuffer,offset:0}:null),O&&(this.bindings=mt.createBindings({pipeline:this.pipeline,uniformBufferBindings:O.map((Jt,ye)=>{const Ne=Jt;return{binding:ye,buffer:Ne.get(),size:Ne.size}}),samplerBindings:A==null?void 0:A.map(Jt=>({texture:Jt.texture,sampler:Jt.sampler}))})),this.bindings&&(P.setBindings(this.bindings),Object.keys(this.uniforms).forEach(Jt=>{const ye=this.uniforms[Jt];ye instanceof Zv?this.uniforms[Jt]=ye.get():ye instanceof Hv&&(this.uniforms[Jt]=ye.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),y){const Jt=y.count;Jt===0?P.draw(f,g):P.drawIndexed(Jt,g)}else P.draw(f,g)}destroy(){var a,i,s;(a=this.vertexBuffers)==null||a.forEach(f=>f.destroy()),(i=this.indexBuffer)==null||i.destroy(),(s=this.bindings)==null||s.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:a}){if(a)return{enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:Vo[a.func||ot.LESS],range:a.range||[0,1]}}getBlendDrawParams({blend:a}){const{enable:i,func:s,equation:f,color:g=[0,0,0,0]}=a||{};return{enable:!!i,func:{srcRGB:Il[s&&s.srcRGB||ot.SRC_ALPHA],srcAlpha:Il[s&&s.srcAlpha||ot.SRC_ALPHA],dstRGB:Il[s&&s.dstRGB||ot.ONE_MINUS_SRC_ALPHA],dstAlpha:Il[s&&s.dstAlpha||ot.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ip[f&&f.rgb||ot.FUNC_ADD],alpha:ip[f&&f.alpha||ot.FUNC_ADD]},color:g}}getStencilDrawParams({stencil:a}){const{enable:i,mask:s=4294967295,func:f={cmp:ot.ALWAYS,ref:0,mask:4294967295},opFront:g={fail:ot.KEEP,zfail:ot.KEEP,zpass:ot.KEEP},opBack:y={fail:ot.KEEP,zfail:ot.KEEP,zpass:ot.KEEP}}=a||{};return{enable:!!i,mask:s,func:ZM(Us({},f),{cmp:Bv[f.cmp]}),opFront:{fail:Cf[g.fail],zfail:Cf[g.zfail],zpass:Cf[g.zpass],mask:f.mask},opBack:{fail:Cf[y.fail],zfail:Cf[y.zfail],zpass:Cf[y.zpass],mask:f.mask}}}initCullDrawParams({cull:a}){if(a){const{enable:i,face:s=ot.BACK}=a;return{enable:!!i,face:Vx[s]}}}extractUniforms(a){const i={};return Object.keys(a).forEach(s=>{this.extractUniformsRecursively(s,a[s],i,"")}),i}extractUniformsRecursively(a,i,s,f){if(i===null||typeof i=="number"||typeof i=="boolean"||Array.isArray(i)&&typeof i[0]=="number"||i3(i)||i===""||"resize"in i){s[`${f&&f+"."}${a}`]=i;return}HM(i)&&Object.keys(i).forEach(g=>{this.extractUniformsRecursively(g,i[g],s,`${f&&f+"."}${a}`)}),Array.isArray(i)&&i.forEach((g,y)=>{Object.keys(g).forEach(x=>{this.extractUniformsRecursively(x,g[x],s,`${f&&f+"."}${a}[${y}]`)})})}};function ur(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}var lp=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),{isUndefined:Pf}=ii,s3=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=a=>new a3(this.device,a,this),this.createAttribute=a=>new Nv(this.device,a),this.createBuffer=a=>new $6(this.device,a),this.createElements=a=>new Qx(this.device,a),this.createTexture2D=a=>new Zv(this.device,a),this.createFramebuffer=a=>new Hv(this.device,a),this.useFramebuffer=(a,i)=>{this.currentFramebuffer=a,this.beginFrame(),i(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(a,i)=>lp(this,null,function*(){this.currentFramebuffer=a,this.preRenderPass=this.renderPass,this.beginFrame(),yield i(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=a=>{const{color:i,depth:s,stencil:f,framebuffer:g=null}=a;if(g)g.clearOptions={color:i,depth:s,stencil:f};else{const y=this.queryVerdorInfo();if(y==="WebGL1"){const x=this.getGLContext();Pf(f)?Pf(s)||(x.clearDepth(s),x.clear(x.DEPTH_BUFFER_BIT)):(x.clearStencil(f),x.clear(x.STENCIL_BUFFER_BIT))}else if(y==="WebGL2"){const x=this.getGLContext();Pf(f)?Pf(s)||x.clearBufferfv(x.DEPTH,0,[s]):x.clearBufferiv(x.STENCIL,0,[f])}}},this.viewport=({width:a,height:i})=>{this.swapChain.configureSwapChain(a,i),this.createMainColorDepthRT(a,i),this.width=a,this.height=i},this.readPixels=a=>{const{framebuffer:i,x:s,y:f,width:g,height:y}=a,x=this.device.createReadback(),O=i.colorTexture,A=x.readTextureSync(O,s,this.viewportOrigin===Je.Fp.LOWER_LEFT?f:this.height-f,g,y,new Uint8Array(g*y*4));if(this.viewportOrigin!==Je.Fp.LOWER_LEFT)for(let P=0;P<A.length;P+=4){const N=A[P];A[P]=A[P+2],A[P+2]=N}return x.destroy(),A},this.readPixelsAsync=a=>lp(this,null,function*(){const{framebuffer:i,x:s,y:f,width:g,height:y}=a,x=this.device.createReadback(),O=i.colorTexture,A=yield x.readTexture(O,s,this.viewportOrigin===Je.Fp.LOWER_LEFT?f:this.height-f,g,y,new Uint8Array(g*y*4));if(this.viewportOrigin!==Je.Fp.LOWER_LEFT)for(let P=0;P<A.length;P+=4){const N=A[P];A[P]=A[P+2],A[P+2]=N}return x.destroy(),A}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var a;this.canvas=null,(a=this.uniformBuffers)==null||a.forEach(i=>{i.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(a,i){return lp(this,null,function*(){const{enableWebGPU:s,shaderCompilerPath:f,antialias:g}=i;this.canvas=a;const x=yield(s?new Je.zo({shaderCompilerPath:f}):new Je.j8({targets:["webgl2","webgl1"],antialias:g,onContextLost(A){console.warn("context lost",A)},onContextCreationError(A){console.warn("context creation error",A)},onContextRestored(A){console.warn("context restored",A)}})).createSwapChain(a);x.configureSwapChain(a.width,a.height),this.device=x.getDevice(),this.swapChain=x,this.renderCache=new sp(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const O=this.device.gl;this.extensionObject={OES_texture_float:!ur(O)&&this.device.OES_texture_float},this.createMainColorDepthRT(a.width,a.height)})}createMainColorDepthRT(a,i){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Je.ED.U8_RGBA_RT,width:a,height:i,usage:Je.v2.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Je.ED.D24_S8,width:a,height:i,usage:Je.v2.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:a,swapChain:i,mainColorRT:s,mainDepthRT:f}=this,g=a?a.colorRenderTarget:s,y=a?null:i.getOnscreenTexture(),x=a?a.depthRenderTarget:f,{color:O=[0,0,0,0],depth:A=1,stencil:P=0}=(a==null?void 0:a.clearOptions)||{},N=g?(0,Je.RH)(O[0]*255,O[1]*255,O[2]*255,O[3]):Je.Ab,Z=x?A:void 0,W=x?P:void 0,mt=this.device.createRenderPass({colorAttachment:[g],colorResolveTo:[y],colorClearColor:[N],colorStore:[!0],depthStencilAttachment:x,depthClearValue:Z,stencilClearValue:W});this.renderPass=mt}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const a=this.device.gl;return a.getParameter(a.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}},up=["selectstart","selecting","selectend"],c3=class extends to.EventEmitter{constructor(a,i={}){super(),this.isEnable=!1,this.onDragStart=s=>{this.box.style.display="block",this.startEvent=this.endEvent=s,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=s=>{this.endEvent=s,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=s=>{this.endEvent=s,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=a,this.options=i}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:a}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const i=Bi("div",void 0,this.container);i.classList.add("l7-select-box"),a&&i.classList.add(a),i.style.display="none",this.box=i}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:a,y:i}=this.startEvent,{x:s,y:f}=this.endEvent,g=Math.min(a,s),y=Math.min(i,f),x=Math.abs(a-s),O=Math.abs(i-f);this.box.style.top=`${y}px`,this.box.style.left=`${g}px`,this.box.style.width=`${x}px`,this.box.style.height=`${O}px`}getLngLatBox(){const{lngLat:{lng:a,lat:i}}=this.startEvent,{lngLat:{lng:s,lat:f}}=this.endEvent;return My([[a,i],[s,f]])}},l3=Object.defineProperty,u3=Object.defineProperties,VM=Object.getOwnPropertyDescriptors,Vv=Object.getOwnPropertySymbols,Wv=Object.prototype.hasOwnProperty,f3=Object.prototype.propertyIsEnumerable,Gv=(a,i,s)=>i in a?l3(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,h3=(a,i)=>{for(var s in i||(i={}))Wv.call(i,s)&&Gv(a,s,i[s]);if(Vv)for(var s of Vv(i))f3.call(i,s)&&Gv(a,s,i[s]);return a},p3=(a,i)=>u3(a,VM(i)),Rl=(a,i,s)=>new Promise((f,g)=>{var y=A=>{try{O(s.next(A))}catch(P){g(P)}},x=A=>{try{O(s.throw(A))}catch(P){g(P)}},O=A=>A.done?f(A.value):Promise.resolve(A.value).then(y,x);O((s=s.apply(a,i)).next())}),g3=class{constructor(a){const{id:i,map:s,renderer:f="device"}=a,g=Gw();this.container=g,s.setContainer(g,i),f==="regl"?g.rendererService=new Ux:g.rendererService=new s3,this.sceneService=g.sceneService,this.mapService=g.mapService,this.iconService=g.iconService,this.fontService=g.fontService,this.controlService=g.controlService,this.layerService=g.layerService,this.debugService=g.debugService,this.debugService.setEnable(a.debug),this.markerService=g.markerService,this.interactionService=g.interactionService,this.popupService=g.popupService,this.boxSelect=new c3(this,{}),this.initComponent(i),this.sceneService.init(a),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(a){return Rl(this,null,function*(){return this.sceneService.exportPng(a)})}exportMap(a){return Rl(this,null,function*(){return this.sceneService.exportPng(a)})}registerRenderService(a){this.sceneService.loaded?new a(this).init():this.on("loaded",()=>{new a(this).init()})}setBgColor(a){this.mapService.setBgColor(a)}addLayer(a){this.loaded?this.preAddLayer(a):this.once("loaded",()=>{this.preAddLayer(a)})}preAddLayer(a){const i=ec(this.container);if(a.setContainer(i),this.sceneService.addLayer(a),a.inited){this.initTileLayer(a);const s=this.initMask(a);this.addMask(s,a.id)}else a.on("inited",()=>{this.initTileLayer(a);const s=this.initMask(a);this.addMask(s,a.id)})}initMask(a){const{mask:i,maskfence:s,maskColor:f="#000",maskOpacity:g=0}=a.getLayerConfig();return!i||!s?void 0:new Tv().source(s).shape("fill").style({color:f,opacity:g})}addMask(a,i){if(!a)return;const s=this.getLayer(i);if(s){const f=ec(this.container);a.setContainer(f),s.addMaskLayer(a),this.sceneService.addMask(a)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(a){return this.layerService.getLayer(a)}getLayerByName(a){return this.layerService.getLayerByName(a)}removeLayer(a,i){return Rl(this,null,function*(){yield this.layerService.remove(a,i)})}removeAllLayer(){return Rl(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(a){this.layerService.setEnableRender(a)}addIconFont(a,i){this.fontService.addIconFont(a,i)}addIconFonts(a){a.forEach(([i,s])=>{this.fontService.addIconFont(i,s)})}addFontFace(a,i){this.fontService.once("fontloaded",s=>{this.emit("fontloaded",s)}),this.fontService.addFontFace(a,i)}addImage(a,i){return Rl(this,null,function*(){yield this.iconService.addImage(a,i)})}hasImage(a){return this.iconService.hasImage(a)}removeImage(a){this.iconService.removeImage(a)}addIconFontGlyphs(a,i){this.fontService.addIconGlyphs(i)}addControl(a){this.controlService.addControl(a,this.container)}removeControl(a){this.controlService.removeControl(a)}getControlByName(a){return this.controlService.getControlByName(a)}addMarker(a){this.markerService.addMarker(a)}addMarkerLayer(a){this.markerService.addMarkerLayer(a)}removeMarkerLayer(a){this.markerService.removeMarkerLayer(a)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(a){this.popupService.addPopup(a)}removePopup(a){this.popupService.removePopup(a)}on(a,i){var s;up.includes(a)?(s=this.boxSelect)==null||s.on(a,i):Bd.includes(a)?this.sceneService.on(a,i):this.mapService.on(a,i)}once(a,i){var s;up.includes(a)?(s=this.boxSelect)==null||s.once(a,i):Bd.includes(a)?this.sceneService.once(a,i):this.mapService.once(a,i)}emit(a,i){Bd.indexOf(a)===-1?this.mapService.on(a,i):this.sceneService.emit(a,i)}off(a,i){var s;up.includes(a)?(s=this.boxSelect)==null||s.off(a,i):Bd.includes(a)?this.sceneService.off(a,i):this.mapService.off(a,i)}getZoom(){return this.mapService.getZoom()}getCenter(a){return this.mapService.getCenter(a)}setCenter(a,i){return this.mapService.setCenter(a,i)}getPitch(){return this.mapService.getPitch()}setPitch(a){return this.mapService.setPitch(a)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(a){this.mapService.setRotation(a)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(a){this.mapService.panTo(a)}panBy(a,i){this.mapService.panBy(a,i)}getContainer(){return this.mapService.getContainer()}setZoom(a){this.mapService.setZoom(a)}fitBounds(a,i){const{fitBoundsOptions:s,animate:f}=this.sceneService.getSceneConfig();this.mapService.fitBounds(a,i||p3(h3({},s),{animate:f}))}setZoomAndCenter(a,i){this.mapService.setZoomAndCenter(a,i)}setMapStyle(a){this.mapService.setMapStyle(a)}setMapStatus(a){this.mapService.setMapStatus(a)}pixelToLngLat(a){return this.mapService.pixelToLngLat(a)}lngLatToPixel(a){return this.mapService.lngLatToPixel(a)}containerToLngLat(a){return this.mapService.containerToLngLat(a)}lngLatToContainer(a){return this.mapService.lngLatToContainer(a)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(a){this.container.postProcessingPass.name=new a}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(a=!0){this.boxSelect.enable(),a&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(a,i){sn.REGISTERED_PROTOCOLS[a]=i}static removeProtocol(a){delete sn.REGISTERED_PROTOCOLS[a]}getProtocol(a){return sn.REGISTERED_PROTOCOLS[a]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(a){this.controlService.init({container:vO(a)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:a,logoPosition:i}=this.sceneService.getSceneConfig();a&&this.addControl(new WA({position:i}))}initTileLayer(a){a.getSource().isTile&&(a.tileLayer=new Kh(a))}},WM="2.23.0";class v3{constructor(i){(0,ct.Z)(this,"configService",void 0),(0,ct.Z)(this,"config",void 0),this.config=i}setContainer(i,s){this.configService=i.globalConfigService,i.mapConfig=(0,on.Z)((0,on.Z)({},this.config),{},{id:s}),i.mapService=new(this.getServiceConstructor())(i)}getServiceConstructor(){throw new Error("Method not implemented.")}}var m3=k(6158),kl=k.n(m3),$v=k(15671),Yv=k(43144),y3=k(82963),fp=k(61120),b3=k(60136),If=k(97326),Mo=k(97685);function Dl(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Fl(a,i){var s=xu.fF([],i,a);return xu.bA(s,s,1/s[3]),s}function Y6(a,i){var s=a%i;return s<0?i+s:s}function X6(a,i,s){return s*i+(1-s)*a}function kc(a,i){if(!a)throw new Error(i||"viewport-mercator-project: assertion failed.")}var Wo=Math.PI,Xv=Wo/4,Go=Wo/180,qv=180/Wo,Nl=512,dp=4003e4,_3=1.5;function hp(a){return Math.pow(2,a)}function x3(a){return Math.log2(a)}function Rf(a,i){var s=(0,Mo.Z)(a,2),f=s[0],g=s[1];kc(Number.isFinite(f)&&Number.isFinite(i)),kc(Number.isFinite(g)&&g>=-90&&g<=90,"invalid latitude"),i*=Nl;var y=f*Go,x=g*Go,O=i*(y+Wo)/(2*Wo),A=i*(Wo-Math.log(Math.tan(Xv+x*.5)))/(2*Wo);return[O,A]}function kf(a,i){var s=(0,Mo.Z)(a,2),f=s[0],g=s[1];i*=Nl;var y=f/i*(2*Wo)-Wo,x=2*(Math.atan(Math.exp(Wo-g/i*(2*Wo)))-Xv);return[y*qv,x*qv]}function q6(a){var i=a.latitude;assert(Number.isFinite(i));var s=Math.cos(i*Go);return x3(dp*s)-9}function S3(a){var i=a.latitude,s=a.longitude,f=a.zoom,g=a.scale,y=a.highPrecision,x=y===void 0?!1:y;g=g!==void 0?g:hp(f),kc(Number.isFinite(i)&&Number.isFinite(s)&&Number.isFinite(g));var O={},A=Nl*g,P=Math.cos(i*Go),N=A/360,Z=N/P,W=A/dp/P;if(O.pixelsPerMeter=[W,-W,W],O.metersPerPixel=[1/W,-1/W,1/W],O.pixelsPerDegree=[N,-Z,W],O.degreesPerPixel=[1/N,-1/Z,1/W],x){var mt=Go*Math.tan(i*Go)/P,Nt=N*mt/2,Jt=A/dp*mt,ye=Jt/Z*W;O.pixelsPerDegree2=[0,-Nt,Jt],O.pixelsPerMeter2=[ye,0,ye]}return O}function K6(a,i){var s=_slicedToArray(a,3),f=s[0],g=s[1],y=s[2],x=_slicedToArray(i,3),O=x[0],A=x[1],P=x[2],N=1,Z=S3({longitude:f,latitude:g,scale:N,highPrecision:!0}),W=Z.pixelsPerMeter,mt=Z.pixelsPerMeter2,Nt=Rf(a,N);Nt[0]+=O*(W[0]+mt[0]*A),Nt[1]+=A*(W[1]+mt[1]*A);var Jt=kf(Nt,N),ye=(y||0)+(P||0);return Number.isFinite(y)||Number.isFinite(P)?[Jt[0],Jt[1],ye]:Jt}function O3(a){var i=a.height,s=a.pitch,f=a.bearing,g=a.altitude,y=a.center,x=y===void 0?null:y,O=a.flipY,A=O===void 0?!1:O,P=Dl();return Mr.translate(P,P,[0,0,-g]),Mr.scale(P,P,[1,1,1/i]),Mr.rotateX(P,P,-s*Go),Mr.rotateZ(P,P,f*Go),A&&Mr.scale(P,P,[1,-1,1]),x&&Mr.translate(P,P,kr.tk([],x)),P}function fa(a){var i=a.width,s=a.height,f=a.altitude,g=f===void 0?_3:f,y=a.pitch,x=y===void 0?0:y,O=a.nearZMultiplier,A=O===void 0?1:O,P=a.farZMultiplier,N=P===void 0?1:P,Z=x*Go,W=Math.atan(.5/g),mt=Math.sin(W)*g/Math.sin(Math.PI/2-Z-W),Nt=Math.cos(Math.PI/2-Z)*mt+g;return{fov:2*Math.atan(s/2/g),aspect:i/s,focalDistance:g,near:A,far:Nt*N}}function E3(a){var i=a.width,s=a.height,f=a.pitch,g=a.altitude,y=a.nearZMultiplier,x=a.farZMultiplier,O=fa({width:i,height:s,altitude:g,pitch:f,nearZMultiplier:y,farZMultiplier:x}),A=O.fov,P=O.aspect,N=O.near,Z=O.far,W=Mr.perspective([],A,P,N,Z);return W}function GM(a,i){var s=(0,Mo.Z)(a,3),f=s[0],g=s[1],y=s[2],x=y===void 0?0:y;return kc(Number.isFinite(f)&&Number.isFinite(g)&&Number.isFinite(x)),Fl(i,[f,g,x,1])}function Kv(a,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,f=(0,Mo.Z)(a,3),g=f[0],y=f[1],x=f[2];if(kc(Number.isFinite(g)&&Number.isFinite(y),"invalid pixel coordinate"),Number.isFinite(x)){var O=Fl(i,[g,y,x,1]);return O}var A=Fl(i,[g,y,0,1]),P=Fl(i,[g,y,1,1]),N=A[2],Z=P[2],W=N===Z?0:((s||0)-N)/(Z-N);return ar.t7([],A,P,W)}var Qv=Dl(),w3=function(){function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.width,f=i.height,g=i.viewMatrix,y=g===void 0?Qv:g,x=i.projectionMatrix,O=x===void 0?Qv:x;(0,$v.Z)(this,a),this.width=s||1,this.height=f||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=y,this.projectionMatrix=O;var A=Dl();Mr.multiply(A,A,this.projectionMatrix),Mr.multiply(A,A,this.viewMatrix),this.viewProjectionMatrix=A;var P=Dl();Mr.scale(P,P,[this.width/2,-this.height/2,1]),Mr.translate(P,P,[1,-1,0]),Mr.multiply(P,P,this.viewProjectionMatrix);var N=Mr.invert(Dl(),P);if(!N)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=P,this.pixelUnprojectionMatrix=N,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,Yv.Z)(a,[{key:"equals",value:function(s){return s instanceof a?s.width===this.width&&s.height===this.height&&Mr.equals(s.projectionMatrix,this.projectionMatrix)&&Mr.equals(s.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=f.topLeft,y=g===void 0?!0:g,x=this.projectPosition(s),O=GM(x,this.pixelProjectionMatrix),A=(0,Mo.Z)(O,2),P=A[0],N=A[1],Z=y?N:this.height-N;return s.length===2?[P,Z]:[P,Z,O[2]]}},{key:"unproject",value:function(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=f.topLeft,y=g===void 0?!0:g,x=f.targetZ,O=(0,Mo.Z)(s,3),A=O[0],P=O[1],N=O[2],Z=y?P:this.height-P,W=x&&x*this.pixelsPerMeter,mt=Kv([A,Z,N],this.pixelUnprojectionMatrix,W),Nt=this.unprojectPosition(mt),Jt=(0,Mo.Z)(Nt,3),ye=Jt[0],Ne=Jt[1],ze=Jt[2];return Number.isFinite(N)?[ye,Ne,ze]:Number.isFinite(x)?[ye,Ne,x]:[ye,Ne]}},{key:"projectPosition",value:function(s){var f=this.projectFlat(s),g=(0,Mo.Z)(f,2),y=g[0],x=g[1],O=(s[2]||0)*this.pixelsPerMeter;return[y,x,O]}},{key:"unprojectPosition",value:function(s){var f=this.unprojectFlat(s),g=(0,Mo.Z)(f,2),y=g[0],x=g[1],O=(s[2]||0)/this.pixelsPerMeter;return[y,x,O]}},{key:"projectFlat",value:function(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return s}},{key:"unprojectFlat",value:function(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return s}}]),a}();function A3(a){var i=a.width,s=a.height,f=a.bounds,g=a.minExtent,y=g===void 0?0:g,x=a.maxZoom,O=x===void 0?24:x,A=a.padding,P=A===void 0?0:A,N=a.offset,Z=N===void 0?[0,0]:N,W=(0,Mo.Z)(f,2),mt=(0,Mo.Z)(W[0],2),Nt=mt[0],Jt=mt[1],ye=(0,Mo.Z)(W[1],2),Ne=ye[0],ze=ye[1];if(Number.isFinite(P)){var He=P;P={top:He,bottom:He,left:He,right:He}}else kc(Number.isFinite(P.top)&&Number.isFinite(P.bottom)&&Number.isFinite(P.left)&&Number.isFinite(P.right));var nn=new pp({width:i,height:s,longitude:0,latitude:0,zoom:0}),pn=nn.project([Nt,ze]),In=nn.project([Ne,Jt]),En=[Math.max(Math.abs(In[0]-pn[0]),y),Math.max(Math.abs(In[1]-pn[1]),y)],Rn=[i-P.left-P.right-Math.abs(Z[0])*2,s-P.top-P.bottom-Math.abs(Z[1])*2];kc(Rn[0]>0&&Rn[1]>0);var rr=Rn[0]/En[0],Tr=Rn[1]/En[1],$n=(P.right-P.left)/2/rr,cr=(P.bottom-P.top)/2/Tr,Lr=[(In[0]+pn[0])/2+$n,(In[1]+pn[1])/2+cr],$o=nn.unproject(Lr),Dc=nn.zoom+Math.log2(Math.abs(Math.min(rr,Tr)));return{longitude:$o[0],latitude:$o[1],zoom:Math.min(Dc,O)}}var pp=function(a){(0,b3.Z)(i,a);function i(){var s,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=f.width,y=f.height,x=f.latitude,O=x===void 0?0:x,A=f.longitude,P=A===void 0?0:A,N=f.zoom,Z=N===void 0?0:N,W=f.pitch,mt=W===void 0?0:W,Nt=f.bearing,Jt=Nt===void 0?0:Nt,ye=f.altitude,Ne=ye===void 0?1.5:ye,ze=f.nearZMultiplier,He=f.farZMultiplier;(0,$v.Z)(this,i),g=g||1,y=y||1;var nn=hp(Z);Ne=Math.max(.75,Ne);var pn=Rf([P,O],nn);pn[2]=0;var In=E3({width:g,height:y,pitch:mt,bearing:Jt,altitude:Ne,nearZMultiplier:ze||1/y,farZMultiplier:He||1.01}),En=O3({height:y,center:pn,pitch:mt,bearing:Jt,altitude:Ne,flipY:!0});return s=(0,y3.Z)(this,(0,fp.Z)(i).call(this,{width:g,height:y,viewMatrix:En,projectionMatrix:In})),s.latitude=O,s.longitude=P,s.zoom=Z,s.pitch=mt,s.bearing=Jt,s.altitude=Ne,s.scale=nn,s.center=pn,s.pixelsPerMeter=S3((0,If.Z)((0,If.Z)(s))).pixelsPerMeter[2],Object.freeze((0,If.Z)((0,If.Z)(s))),s}return(0,Yv.Z)(i,[{key:"projectFlat",value:function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Rf(f,g)}},{key:"unprojectFlat",value:function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return kf(f,g)}},{key:"getMapCenterByLngLatPosition",value:function(f){var g=f.lngLat,y=f.pos,x=Kv(y,this.pixelUnprojectionMatrix),O=Rf(g,this.scale),A=ar.IH([],O,ar.tk([],x)),P=ar.IH([],this.center,A);return kf(P,this.scale)}},{key:"getLocationAtPoint",value:function(f){var g=f.lngLat,y=f.pos;return this.getMapCenterByLngLatPosition({lngLat:g,pos:y})}},{key:"fitBounds",value:function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=this.width,x=this.height,O=A3(Object.assign({width:y,height:x,bounds:f},g)),A=O.longitude,P=O.latitude,N=O.zoom;return new i({width:y,height:x,longitude:A,latitude:P,zoom:N})}}]),i}(w3);class T3{constructor(){(0,ct.Z)(this,"viewport",new pp)}syncWithMapCamera(i){const{center:s,zoom:f,pitch:g,bearing:y,viewportHeight:x,viewportWidth:O}=i,A={width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing};this.viewport=new pp((0,on.Z)((0,on.Z)({},A),{},{width:O,height:x,longitude:s&&s[0],latitude:s&&s[1],zoom:f,pitch:g,bearing:y}))}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(i,s){return this.viewport.projectFlat(i,s)}}class C3{constructor(i){(0,ct.Z)(this,"size",1e4),this.size=i||1e4}setSize(i){this.size=i}getSize(){return[this.size,this.size]}mercatorXfromLng(i){return(180+i)/360*this.size}mercatorYfromLat(i){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360)*this.size}lngFromMercatorX(i){return i/this.size*360-180}latFromMercatorY(i){const s=180-(1-i/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(s*Math.PI/180))-90}project(i){const s=this.mercatorXfromLng(i[0]),f=this.mercatorYfromLat(i[1]);return[s,f]}unproject(i){const s=this.lngFromMercatorX(i[0]),f=this.latFromMercatorY(i[1]);return[s,f]}}const M3={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Jv={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},tm=12;class L3{constructor(i){(0,ct.Z)(this,"version","DEFAUlTMAP"),(0,ct.Z)(this,"map",void 0),(0,ct.Z)(this,"simpleMapCoord",new C3),(0,ct.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,ct.Z)(this,"config",void 0),(0,ct.Z)(this,"configService",void 0),(0,ct.Z)(this,"coordinateSystemService",void 0),(0,ct.Z)(this,"eventEmitter",void 0),(0,ct.Z)(this,"markerContainer",void 0),(0,ct.Z)(this,"cameraChangedCallback",void 0),(0,ct.Z)(this,"$mapContainer",void 0),(0,ct.Z)(this,"handleCameraChanged",s=>{const{lat:f,lng:g}=this.map.getCenter();this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:this.map.getBearing(),center:[g,f],viewportHeight:this.map.transform.height,pitch:this.map.getPitch(),viewportWidth:this.map.transform.width,zoom:this.map.getZoom(),cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}),this.config=i.mapConfig,this.configService=i.globalConfigService,this.coordinateSystemService=i.coordinateSystemService,this.eventEmitter=new to.EventEmitter}setBgColor(i){this.bgColor=i}addMarkerContainer(){const i=this.map.getCanvasContainer();this.markerContainer=Bi("div","l7-marker-container",i),this.markerContainer.setAttribute("tabindex","-1")}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}on(i,s){M1.indexOf(i)!==-1?this.eventEmitter.on(i,s):this.map.on(Jv[i]||i,s)}off(i,s){this.map.off(Jv[i]||i,s),this.eventEmitter.off(i,s)}getContainer(){return this.map.getContainer()}getMapCanvasContainer(){return this.map.getCanvasContainer()}getSize(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();const i=this.map.transform;return[i.width,i.height]}getType(){return"default"}getZoom(){return this.map.getZoom()}setZoom(i){return this.map.setZoom(i)}getCenter(){return this.map.getCenter()}setCenter(i){this.map.setCenter(i)}getPitch(){return this.map.getPitch()}getRotation(){return this.map.getBearing()}getBounds(){return this.map.getBounds().toArray()}getMinZoom(){return this.map.getMinZoom()}getMaxZoom(){return this.map.getMaxZoom()}setRotation(i){this.map.setBearing(i)}zoomIn(i,s){this.map.zoomIn(i,s)}zoomOut(i,s){this.map.zoomOut(i,s)}setPitch(i){return this.map.setPitch(i)}panTo(i){this.map.panTo(i)}panBy(i=0,s=0){this.map.panBy([i,s])}fitBounds(i,s){this.map.fitBounds(i,s)}setMaxZoom(i){this.map.setMaxZoom(i)}setMinZoom(i){this.map.setMinZoom(i)}setMapStatus(i){i.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),i.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),i.dragEnable===!1&&this.map.dragPan.disable(),i.dragEnable===!0&&this.map.dragPan.enable(),i.rotateEnable===!1&&this.map.dragRotate.disable(),i.dragEnable===!0&&this.map.dragRotate.enable(),i.keyboardEnable===!1&&this.map.keyboard.disable(),i.keyboardEnable===!0&&this.map.keyboard.enable(),i.zoomEnable===!1&&this.map.scrollZoom.disable(),i.zoomEnable===!0&&this.map.scrollZoom.enable()}setZoomAndCenter(i,s){this.map.flyTo({zoom:i,center:s})}setMapStyle(i){var s;(s=this.map)===null||s===void 0||s.setStyle(this.getMapStyleValue(i))}meterToCoord(i,s){return 1}pixelToLngLat(i){return this.map.unproject(i)}lngLatToPixel(i){return this.map.project(i)}containerToLngLat(i){return this.map.unproject(i)}lngLatToContainer(i){return this.map.project(i)}getMapStyle(){try{var i;const s=(i=this.map.getStyle().sprite)!==null&&i!==void 0?i:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(s)?s==null?void 0:s.replace(/\/\w+$/,"").replace(/sprites/,"styles"):s}catch(s){return""}}getMapStyleConfig(){return M3}getMapStyleValue(i){var s;return(s=this.getMapStyleConfig()[i])!==null&&s!==void 0?s:i}destroy(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(i,...s){this.eventEmitter.emit(i,...s)}once(i,...s){this.eventEmitter.once(i,...s)}getMapContainer(){return this.$mapContainer}exportMap(i){var s;const f=(s=this.map)===null||s===void 0?void 0:s.getCanvas();return i==="jpg"?f==null?void 0:f.toDataURL("image/jpeg"):f==null?void 0:f.toDataURL("image/png")}onCameraChanged(i){this.cameraChangedCallback=i}creatMapContainer(i){let s=i;return typeof i=="string"&&(s=document.getElementById(i)),s}updateView(i){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:i.bearing,center:i.center,viewportHeight:i.viewportHeight,pitch:i.pitch,viewportWidth:i.viewportWidth,zoom:i.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:i=!0}=this.config;this.viewport.getZoom()>tm&&i?this.coordinateSystemService.setCoordinateSystem(L0.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(L0.LNGLAT)}}const P3=["id","attributionControl","style","token","rotation","mapInstance"];function I3(a,i){var s=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,f=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(s||f)&&(i||(i=document),!!i)){var g=i.head||i.getElementsByTagName("head")[0];if(!g){g=i.createElement("head");var y=i.body||i.getElementsByTagName("body")[0];y?y.parentNode.insertBefore(g,y):i.documentElement.appendChild(g)}var x=i.createElement("style");return x.type="text/css",x.styleSheet?x.styleSheet.cssText=a:x.appendChild(i.createTextNode(a)),g.appendChild(x),x}}I3(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=kl();let R3=0;const em="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";class k3 extends L3{constructor(...i){super(...i),(0,ct.Z)(this,"version","MAPBOX"),(0,ct.Z)(this,"viewport",void 0)}getType(){return"mapbox"}lngLatToCoord(i,s={x:0,y:0,z:0}){const{x:f,y:g}=this.lngLatToMercator(i,0);return[f-s.x,g-s.y]}lngLatToMercator(i,s){const{x:f=0,y:g=0,z:y=0}=window.mapboxgl.MercatorCoordinate.fromLngLat(i,s);return{x:f,y:g,z:y}}getModelMatrix(i,s,f,g=[1,1,1],y={x:0,y:0,z:0}){const x=window.mapboxgl.MercatorCoordinate.fromLngLat(i,s),O=x.meterInMercatorCoordinateUnits(),A=Mr.create();return Mr.translate(A,A,kr.al(x.x-y.x,x.y-y.y,x.z||0-y.z)),Mr.scale(A,A,kr.al(O*g[0],-O*g[1],O*g[2])),Mr.rotateX(A,A,f[0]),Mr.rotateY(A,A,f[1]),Mr.rotateZ(A,A,f[2]),A}init(){var i=this;return(0,ln.Z)(function*(){const s=i.config,{id:f="map",attributionControl:g=!1,style:y="light",token:x=em,rotation:O=0,mapInstance:A}=s,P=(0,xa.Z)(s,P3);i.viewport=new T3,!A&&!window.mapboxgl&&console.error(i.configService.getSceneWarninfo("SDK")),x===em&&y!=="blank"&&!window.mapboxgl.accessToken&&!A&&console.warn(i.configService.getSceneWarninfo("MapToken")),!A&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=x),A?(i.map=A,i.$mapContainer=i.map.getContainer()):(i.$mapContainer=i.creatMapContainer(f),i.map=new window.mapboxgl.Map((0,on.Z)({container:i.$mapContainer,style:i.getMapStyleValue(y),attributionControl:g,bearing:O},P))),i.map.on("load",()=>{i.handleCameraChanged()}),i.map.on("move",i.handleCameraChanged),i.handleCameraChanged()})()}destroy(){var i;(i=this.$mapContainer)===null||i===void 0||(i=i.parentNode)===null||i===void 0||i.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(i,...s){this.eventEmitter.emit(i,...s)}once(i,...s){this.eventEmitter.once(i,...s)}getMapContainer(){return this.$mapContainer}getCanvasOverlays(){var i;return(i=this.getMapContainer())===null||i===void 0?void 0:i.querySelector(".mapboxgl-canvas-container")}meterToCoord(i,s){const f=new(kl()).LngLat(i[0],i[1]),g=new(kl()).LngLat(s[0],s[1]),y=f.distanceTo(g),x=kl().MercatorCoordinate.fromLngLat({lng:i[0],lat:i[1]}),O=kl().MercatorCoordinate.fromLngLat({lng:s[0],lat:s[1]}),{x:A,y:P}=x,{x:N,y:Z}=O;return Math.sqrt(Math.pow(A-N,2)+Math.pow(P-Z,2))*4194304*2/y}exportMap(i){const s=this.map.getCanvas();return i==="jpg"?s==null?void 0:s.toDataURL("image/jpeg"):s==null?void 0:s.toDataURL("image/png")}creatMapContainer(i){let s=i;typeof i=="string"&&(s=document.getElementById(i));const f=document.createElement("div");return f.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,f.id="l7_mapbox_div"+R3++,s.appendChild(f),f}}function $M(a,i){var s=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,f=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(s||f)&&(i||(i=document),!!i)){var g=i.head||i.getElementsByTagName("head")[0];if(!g){g=i.createElement("head");var y=i.body||i.getElementsByTagName("body")[0];y?y.parentNode.insertBefore(g,y):i.documentElement.appendChild(g)}var x=i.createElement("style");return x.type="text/css",x.styleSheet?x.styleSheet.cssText=a:x.appendChild(i.createTextNode(a)),g.appendChild(x),x}}$M(`.mapboxgl-ctrl-logo {
  display: none !important;
}
`);class D3 extends v3{getServiceConstructor(){return k3}}var F3=k(67294),nm=k(85893),YM=function(i){var s=i.data,f=i.config,g=f===void 0?{}:f,y=(0,yt.hQ)();return(0,F3.useEffect)(function(){var x=new g3({id:y,map:new D3({pitch:0,style:"blank",center:[116.368652,39.93866],zoom:10.07})}),O=g.field,A=g.colors,P=A===void 0?["#D7F9F0","#B8EFE2","#A6E1E0","#83CED6","#72BED6","#64A5D3","#4D89E5","#3771D9","#0A3663"]:A,N=0,Z=0;s.features.forEach(function(ye){ye.properties[O]>Z&&(Z=ye.properties[O]),ye.properties[O]<N&&(N=ye.properties[O])});var W=new xv({autoFit:!0}).source(s);W.color(O,P).scale(O,{type:"quantize",domain:[N,Z]}).shape("fill").style({opacity:1}).active(!0);var mt=new Wh({zIndex:2}).source(s).color("#eee").size(.8).active(!0).style({lineType:"solid",dashArray:[2,2],opacity:1});x.addLayer(W),x.addLayer(mt);var Nt=new Lc({offsets:[0,0],closeButton:!1});W.on("mousemove",function(ye){Nt.setLnglat(ye.lngLat).setHTML("<span>".concat(ye.feature.properties.name,":").concat(ye&&ye.feature.properties[O]?ye.feature.properties[O]:"-","</span>")),x.addPopup(Nt)}),W.on("mouseout",function(ye){x.removePopup(Nt)});var Jt=new sl({position:"bottomright"});Jt.onAdd=function(){var ye=document.createElement("div");ye.className="infolegend legend";for(var Ne=Math.floor(Z/P.length),ze=0;ze<P.length;ze++)ye.innerHTML+='<i style="width: 18px;height: 18px;float: left;margin-right: 8px;opacity: 0.7;background:'+P[ze]+'"></i> '+(N+ze*Ne)+(P[ze+1]?"\u2013"+Ne*(ze+1)+"<br>":"+");return ye},x.addControl(Jt)},[]),(0,nm.jsx)("div",{id:y,style:{width:"100%",minHeight:300,position:"relative",overflow:"hidden",height:g.height}})},N3=YM},53463:function(Me,de,k){"use strict";k.r(de),k.d(de,{PagePanelHeader:function(){return pe},default:function(){return K}});var yt=k(15009),st=k.n(yt),St=k(97857),Kt=k.n(St),et=k(99289),Qt=k.n(et),Ut=k(5574),zt=k.n(Ut),ft=k(97584),re=k(38345),q=k(99956),Q=k(6466),Dt=k(52715),At=k(98165),Ft=k(63430),Pt=k(79611),$t=k(78677),Oe=k(80652),De=k(48054),Ge=k(68997),un=k(71230),Te=k(15746),Vt=k(83622),J=k(36447),ce=k(86250),Gt=k(48096),ke=k(53110),Ie=k(27484),B=k.n(Ie),Ct=k(67294),G=k(89649),Mt=k(17003),Et={pageHeaderContent:"pageHeaderContent___exWxI",avatar:"avatar___rptEO",content:"content___jBAzR",contentTitle:"contentTitle___TsVhT",extraContent:"extraContent___tNqx0",statItem:"statItem___jPU6u"},U=k(8388),it=k(92077),te=k.n(it),he=k(36942),xt=k(29393),ee=k(54235),qt=k(85893),pe=function(le){var ut,Tt=(0,Dt.useModel)("@@initialState"),ae=Tt.initialState,Y=ae.currentUser,I=Y&&Object.keys(Y).length;return I?(0,qt.jsxs)("div",{className:Et.pageHeaderContent,children:[(0,qt.jsx)("div",{className:Et.avatar,children:(0,qt.jsx)(Ge.Z,{size:"large",src:Y.avatar?Y.avatar:ae==null||(ut=ae.settings)===null||ut===void 0||(ut=ut.adminSetting)===null||ut===void 0?void 0:ut.logo})}),(0,qt.jsx)("div",{className:Et.content,children:(0,qt.jsx)("div",{className:Et.contentTitle,children:(0,qt.jsxs)(un.Z,{children:[(0,qt.jsxs)(Te.Z,{span:12,children:[(0,qt.jsx)(un.Z,{children:(0,qt.jsxs)(Te.Z,{children:["\u4F60\u597D\uFF0C",Y.realname?Y.realname:Y.name]})}),(0,qt.jsx)(un.Z,{children:(0,qt.jsxs)(Te.Z,{children:[Y.rolename," ",(0,qt.jsx)(Vt.ZP,{shape:"circle",type:"text",onClick:function(){var T;(T=le.flash)===null||T===void 0||T.call(le)},icon:(0,qt.jsx)(At.Z,{})})]})})]}),(0,qt.jsx)(Te.Z,{span:12,style:{textAlign:"right"},children:(0,qt.jsx)(Ce,{})})]})})})]}):(0,qt.jsx)(De.Z,{avatar:!0,paragraph:{rows:1},active:!0})},Ce=function(){var le=(0,Ct.useState)(B()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),ut=zt()(le,2),Tt=ut[0],ae=ut[1],Y=function I(){ae(B()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),setTimeout(function(){return I()},1e3)};return setTimeout(function(){return Y()},1e3),(0,qt.jsx)(qt.Fragment,{children:Tt})},vt=function(le){var ut=le.url,Tt=ut===void 0?"":ut,ae=(0,Ct.useState)(),Y=zt()(ae,2),I=Y[0],Yt=Y[1],T=J.Z.useApp(),F=T.message,Lt=(0,Ct.useState)(),Wt=zt()(Lt,2),ie=Wt[0],be=Wt[1],Ae=(0,Dt.useModel)("@@initialState"),we=Ae.initialState,$e=function(){var qe=Qt()(st()().mark(function Zt(){var ne,se,fe,tt=arguments;return st()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return ne=tt.length>0&&tt[0]!==void 0?tt[0]:{},F.loading("\u52A0\u8F7D\u4E2D..."),V.next=4,ft.ZP.get(Tt,{params:Kt()(Kt()({},ie),ne),then:function(){}});case 4:se=V.sent,fe=se.data,F.destroy(),Yt(fe);case 8:case"end":return V.stop()}},Zt)}));return function(){return qe.apply(this,arguments)}}();(0,Ct.useEffect)(function(){$e()},[]);var Xe=function(Zt){var ne,se,fe=Zt.type,tt=(ne=Zt.config)===null||ne===void 0?void 0:ne.xField,D=(se=Zt.config)===null||se===void 0?void 0:se.yField;if(fe=="pie"){var V,nt;tt=Zt.config.colorField,D=Zt.config.angleField;var _t=(0,ee.S)(Zt.data.map(function(Ee){return Ee[D]}));return(0,qt.jsx)(Ft.Z,Kt()({height:280,appendPadding:10,data:Zt.data,radius:.9,label:{position:"spider",text:function(Be){return"".concat(Be[tt],": ").concat(te()(Be[D]).format("0,0"))}},annotations:[{type:"text",style:{text:`\u603B\u8BA1
`.concat(_t),x:"50%",y:"50%",textAlign:"center",fontSize:18}}],interactions:[{type:"element-active"}],legend:(V=Zt.config)!==null&&V!==void 0&&V.legend?(nt=Zt.config)===null||nt===void 0?void 0:nt.legend:!1},Zt.config))}else if(fe=="bar"){var Ot;return(0,qt.jsx)(Pt.Z,Kt()({xField:tt,yField:D,scale:{x:{paddingInner:.4}},data:Zt.data,tooltip:{name:(Ot=Zt.config)===null||Ot===void 0?void 0:Ot.name,field:D}},Zt.config))}else{if(fe=="column")return(0,qt.jsx)($t.Z,Kt()({xField:tt,yField:D,scale:{x:{paddingInner:.4}},data:Zt.data},Zt.config));if(fe=="areaMap"){var ge=Kt()({map:{type:"mapbox",style:"blank",center:[120.19382669582967,30.258134],zoom:13,pitch:0},source:{data:Zt.data,parser:{type:"geojson"}},autoFit:!0,color:{field:Zt.field,value:["#1A4397","#3165D1","#6296FE","#98B7F7","#DDE6F7","#F2F5FC"].reverse(),scale:{type:"quantile"}},style:{opacity:1,stroke:"#eee",lineWidth:.8,lineOpacity:1},state:{active:!0,select:{stroke:"blue",lineWidth:1.5,lineOpacity:.8}},label:{visible:!0,field:"name",style:{fill:"black",opacity:.5,fontSize:12,spacing:1,padding:[15,15]}},zoom:{position:"bottomright"},legend:{position:"bottomleft"}},Zt.config);return(0,qt.jsx)("div",{style:{width:"100%",height:500},children:(0,qt.jsx)(U.Z,{data:Zt.data,config:Zt})})}else return(0,qt.jsx)(Oe.Z,Kt()({smooth:!0,shapeField:"smooth",height:280,data:Zt.data,xField:"x",yField:"y",title:{visible:!0,text:Zt.title,style:{fontSize:14}},meta:{y:{alias:Zt.y}},label:{content:function(Be){return Be.y},position:"top",style:{fill:"#000000",opacity:.6}}},Zt.config))}},Qe=function qe(Zt,ne){var se;return(0,qt.jsx)(ce.Z,{vertical:!0,gap:"middle",children:Zt==null||(se=Zt.row)===null||se===void 0?void 0:se.map(function(fe,tt){var D;return(0,qt.jsxs)(un.Z,{gutter:[16,16],children:[fe.form?(0,qt.jsx)(Te.Z,{span:24,children:(0,qt.jsx)(re.Z,{bodyStyle:{padding:0},children:(0,qt.jsx)(q.Z,{layoutType:"QueryFilter",columns:(0,G.ab)({initRequest:!0,columns:fe.form.columns,devEnable:!1}),initialValues:ie||fe.form.value,onFinish:function(nt){$e(nt),console.log("onFinish",nt)}})})},tt+"form"):null,fe==null||(D=fe.col)===null||D===void 0?void 0:D.map(function(V,nt){if(V.row){var _t;return(0,qt.jsx)(Te.Z,{span:V.span?V.span:24/((_t=fe.col)===null||_t===void 0?void 0:_t.length),children:qe(V,ne)},nt)}else if(V.tab){var Ot;return(0,qt.jsx)(Te.Z,{span:V.span?V.span:24/((Ot=fe.col)===null||Ot===void 0?void 0:Ot.length),children:(0,qt.jsx)(re.Z,{style:{borderTopRightRadius:0,borderTopLeftRadius:0},children:(0,qt.jsx)(Gt.Z,{style:{background:"none"},tabBarStyle:{paddingLeft:0,marginBottom:0},items:V.tab.map(function(Ee,Be){return{key:Be,label:Ee.title,children:Ee.row?qe(Ee,ne):ne(Ee,Be,{notitle:!0})}})})},nt)},nt)}else{var ge;return(0,qt.jsx)(Te.Z,{span:V.span?V.span:24/((ge=fe.col)===null||ge===void 0?void 0:ge.length),children:ne(V,nt)},nt)}})]},tt)})})};return(0,qt.jsx)(he.PageContainer404,{title:!1,path:le==null?void 0:le.path,children:(0,qt.jsxs)(ce.Z,{vertical:!0,gap:"middle",children:[(0,qt.jsx)(re.Z,{children:(0,qt.jsx)(pe,{flash:$e})},"headcard"),Qe(I,function(qe,Zt,ne){return qe.type=="card"?(0,qt.jsx)(Q.Z,{style:{height:"100%"},statistic:{title:qe.title,value:qe.value,prefix:qe.prefix,suffix:qe.suffix,description:qe.href?(0,qt.jsx)(Dt.Link,{to:qe.href,style:{fontSize:12},children:"\u67E5\u770B\u66F4\u591A"}):""}},Zt+"card"):qe.type=="table"?(0,qt.jsx)(re.Z,{style:{height:"100%"},children:(0,qt.jsx)(ke.Z,Kt()({columns:(0,Mt.SS)({initRequest:!0,columns:qe.columns,initialState:we,devEnable:!1}),dataSource:qe.data,title:function(){return qe.title},rowKey:"id"},qe.props))},Zt+"table"):qe.type=="mapDots"?(0,qt.jsx)(re.Z,{title:qe.title,style:{height:"100%"},children:(0,qt.jsx)(xt.rq,Kt()(Kt()({},qe.props),{},{dots:qe.data}))},Zt+"mapDots"):(0,qt.jsx)(Q.Z,{style:{height:"100%"},title:ne!=null&&ne.notitle?(0,qt.jsx)("div",{style:{height:20}}):qe.title,chart:Xe(qe)},Zt+"chart")})]})})},K=vt},98129:function(Me,de,k){"use strict";var yt=k(60690);Me.exports=function(Kt){Kt=Kt||{};var et=Kt.reporter,Qt=yt.getOption(Kt,"async",!0),Ut=yt.getOption(Kt,"auto",!0);Ut&&!Qt&&(et&&et.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),Qt=!0);var zt=st(),ft,re=!1;function q(Oe,De){!re&&Ut&&Qt&&zt.size()===0&&At(),zt.add(Oe,De)}function Q(){for(re=!0;zt.size();){var Oe=zt;zt=st(),Oe.process()}re=!1}function Dt(Oe){re||(Oe===void 0&&(Oe=Qt),ft&&(Pt(ft),ft=null),Oe?At():Q())}function At(){ft=$t(Q)}function Ft(){zt={},batchSize=0,topLevel=0,bottomLevel=0}function Pt(Oe){var De=clearTimeout;return De(Oe)}function $t(Oe){var De=function(Ge){return setTimeout(Ge,0)};return De(Oe)}return{add:q,force:Dt}};function st(){var St={},Kt=0,et=0,Qt=0;function Ut(re,q){q||(q=re,re=0),re>et?et=re:re<Qt&&(Qt=re),St[re]||(St[re]=[]),St[re].push(q),Kt++}function zt(){for(var re=Qt;re<=et;re++)for(var q=St[re],Q=0;Q<q.length;Q++){var Dt=q[Q];Dt()}}function ft(){return Kt}return{add:Ut,process:zt,size:ft}}},60690:function(Me){"use strict";var de=Me.exports={};de.getOption=k;function k(yt,st,St){var Kt=yt[st];return Kt==null&&St!==void 0?St:Kt}},8874:function(Me){"use strict";Me.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Me,de,k){var yt=k(8874),st=k(86851),St=Object.hasOwnProperty,Kt=Object.create(null);for(var et in yt)St.call(yt,et)&&(Kt[yt[et]]=et);var Qt=Me.exports={to:{},get:{}};Qt.get=function(ft){var re=ft.substring(0,3).toLowerCase(),q,Q;switch(re){case"hsl":q=Qt.get.hsl(ft),Q="hsl";break;case"hwb":q=Qt.get.hwb(ft),Q="hwb";break;default:q=Qt.get.rgb(ft),Q="rgb";break}return q?{model:Q,value:q}:null},Qt.get.rgb=function(ft){if(!ft)return null;var re=/^#([a-f0-9]{3,4})$/i,q=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,Q=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Dt=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,At=/^(\w+)$/,Ft=[0,0,0,1],Pt,$t,Oe;if(Pt=ft.match(q)){for(Oe=Pt[2],Pt=Pt[1],$t=0;$t<3;$t++){var De=$t*2;Ft[$t]=parseInt(Pt.slice(De,De+2),16)}Oe&&(Ft[3]=parseInt(Oe,16)/255)}else if(Pt=ft.match(re)){for(Pt=Pt[1],Oe=Pt[3],$t=0;$t<3;$t++)Ft[$t]=parseInt(Pt[$t]+Pt[$t],16);Oe&&(Ft[3]=parseInt(Oe+Oe,16)/255)}else if(Pt=ft.match(Q)){for($t=0;$t<3;$t++)Ft[$t]=parseInt(Pt[$t+1],0);Pt[4]&&(Pt[5]?Ft[3]=parseFloat(Pt[4])*.01:Ft[3]=parseFloat(Pt[4]))}else if(Pt=ft.match(Dt)){for($t=0;$t<3;$t++)Ft[$t]=Math.round(parseFloat(Pt[$t+1])*2.55);Pt[4]&&(Pt[5]?Ft[3]=parseFloat(Pt[4])*.01:Ft[3]=parseFloat(Pt[4]))}else return(Pt=ft.match(At))?Pt[1]==="transparent"?[0,0,0,0]:St.call(yt,Pt[1])?(Ft=yt[Pt[1]],Ft[3]=1,Ft):null:null;for($t=0;$t<3;$t++)Ft[$t]=Ut(Ft[$t],0,255);return Ft[3]=Ut(Ft[3],0,1),Ft},Qt.get.hsl=function(ft){if(!ft)return null;var re=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,q=ft.match(re);if(q){var Q=parseFloat(q[4]),Dt=(parseFloat(q[1])%360+360)%360,At=Ut(parseFloat(q[2]),0,100),Ft=Ut(parseFloat(q[3]),0,100),Pt=Ut(isNaN(Q)?1:Q,0,1);return[Dt,At,Ft,Pt]}return null},Qt.get.hwb=function(ft){if(!ft)return null;var re=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,q=ft.match(re);if(q){var Q=parseFloat(q[4]),Dt=(parseFloat(q[1])%360+360)%360,At=Ut(parseFloat(q[2]),0,100),Ft=Ut(parseFloat(q[3]),0,100),Pt=Ut(isNaN(Q)?1:Q,0,1);return[Dt,At,Ft,Pt]}return null},Qt.to.hex=function(){var ft=st(arguments);return"#"+zt(ft[0])+zt(ft[1])+zt(ft[2])+(ft[3]<1?zt(Math.round(ft[3]*255)):"")},Qt.to.rgb=function(){var ft=st(arguments);return ft.length<4||ft[3]===1?"rgb("+Math.round(ft[0])+", "+Math.round(ft[1])+", "+Math.round(ft[2])+")":"rgba("+Math.round(ft[0])+", "+Math.round(ft[1])+", "+Math.round(ft[2])+", "+ft[3]+")"},Qt.to.rgb.percent=function(){var ft=st(arguments),re=Math.round(ft[0]/255*100),q=Math.round(ft[1]/255*100),Q=Math.round(ft[2]/255*100);return ft.length<4||ft[3]===1?"rgb("+re+"%, "+q+"%, "+Q+"%)":"rgba("+re+"%, "+q+"%, "+Q+"%, "+ft[3]+")"},Qt.to.hsl=function(){var ft=st(arguments);return ft.length<4||ft[3]===1?"hsl("+ft[0]+", "+ft[1]+"%, "+ft[2]+"%)":"hsla("+ft[0]+", "+ft[1]+"%, "+ft[2]+"%, "+ft[3]+")"},Qt.to.hwb=function(){var ft=st(arguments),re="";return ft.length>=4&&ft[3]!==1&&(re=", "+ft[3]),"hwb("+ft[0]+", "+ft[1]+"%, "+ft[2]+"%"+re+")"},Qt.to.keyword=function(ft){return Kt[ft.slice(0,3)]};function Ut(ft,re,q){return Math.min(Math.max(re,ft),q)}function zt(ft){var re=Math.round(ft).toString(16).toUpperCase();return re.length<2?"0"+re:re}},9187:function(Me){"use strict";Me.exports=de,Me.exports.default=de;function de(G,Mt,Et){Et=Et||2;var U=Mt&&Mt.length,it=U?Mt[0]*Et:G.length,te=k(G,0,it,Et,!0),he=[];if(!te||te.next===te.prev)return he;var xt,ee,qt,pe,Ce,vt,K;if(U&&(te=Ut(G,Mt,te,Et)),G.length>80*Et){xt=qt=G[0],ee=pe=G[1];for(var kt=Et;kt<it;kt+=Et)Ce=G[kt],vt=G[kt+1],Ce<xt&&(xt=Ce),vt<ee&&(ee=vt),Ce>qt&&(qt=Ce),vt>pe&&(pe=vt);K=Math.max(qt-xt,pe-ee),K=K!==0?32767/K:0}return st(te,he,Et,xt,ee,K,0),he}function k(G,Mt,Et,U,it){var te,he;if(it===Ct(G,Mt,Et,U)>0)for(te=Mt;te<Et;te+=U)he=ke(te,G[te],G[te+1],he);else for(te=Et-U;te>=Mt;te-=U)he=ke(te,G[te],G[te+1],he);return he&&De(he,he.next)&&(Ie(he),he=he.next),he}function yt(G,Mt){if(!G)return G;Mt||(Mt=G);var Et=G,U;do if(U=!1,!Et.steiner&&(De(Et,Et.next)||Oe(Et.prev,Et,Et.next)===0)){if(Ie(Et),Et=Mt=Et.prev,Et===Et.next)break;U=!0}else Et=Et.next;while(U||Et!==Mt);return Mt}function st(G,Mt,Et,U,it,te,he){if(G){!he&&te&&Q(G,U,it,te);for(var xt=G,ee,qt;G.prev!==G.next;){if(ee=G.prev,qt=G.next,te?Kt(G,U,it,te):St(G)){Mt.push(ee.i/Et|0),Mt.push(G.i/Et|0),Mt.push(qt.i/Et|0),Ie(G),G=qt.next,xt=qt.next;continue}if(G=qt,G===xt){he?he===1?(G=et(yt(G),Mt,Et),st(G,Mt,Et,U,it,te,2)):he===2&&Qt(G,Mt,Et,U,it,te):st(yt(G),Mt,Et,U,it,te,1);break}}}}function St(G){var Mt=G.prev,Et=G,U=G.next;if(Oe(Mt,Et,U)>=0)return!1;for(var it=Mt.x,te=Et.x,he=U.x,xt=Mt.y,ee=Et.y,qt=U.y,pe=it<te?it<he?it:he:te<he?te:he,Ce=xt<ee?xt<qt?xt:qt:ee<qt?ee:qt,vt=it>te?it>he?it:he:te>he?te:he,K=xt>ee?xt>qt?xt:qt:ee>qt?ee:qt,kt=U.next;kt!==Mt;){if(kt.x>=pe&&kt.x<=vt&&kt.y>=Ce&&kt.y<=K&&Pt(it,xt,te,ee,he,qt,kt.x,kt.y)&&Oe(kt.prev,kt,kt.next)>=0)return!1;kt=kt.next}return!0}function Kt(G,Mt,Et,U){var it=G.prev,te=G,he=G.next;if(Oe(it,te,he)>=0)return!1;for(var xt=it.x,ee=te.x,qt=he.x,pe=it.y,Ce=te.y,vt=he.y,K=xt<ee?xt<qt?xt:qt:ee<qt?ee:qt,kt=pe<Ce?pe<vt?pe:vt:Ce<vt?Ce:vt,le=xt>ee?xt>qt?xt:qt:ee>qt?ee:qt,ut=pe>Ce?pe>vt?pe:vt:Ce>vt?Ce:vt,Tt=At(K,kt,Mt,Et,U),ae=At(le,ut,Mt,Et,U),Y=G.prevZ,I=G.nextZ;Y&&Y.z>=Tt&&I&&I.z<=ae;){if(Y.x>=K&&Y.x<=le&&Y.y>=kt&&Y.y<=ut&&Y!==it&&Y!==he&&Pt(xt,pe,ee,Ce,qt,vt,Y.x,Y.y)&&Oe(Y.prev,Y,Y.next)>=0||(Y=Y.prevZ,I.x>=K&&I.x<=le&&I.y>=kt&&I.y<=ut&&I!==it&&I!==he&&Pt(xt,pe,ee,Ce,qt,vt,I.x,I.y)&&Oe(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;Y&&Y.z>=Tt;){if(Y.x>=K&&Y.x<=le&&Y.y>=kt&&Y.y<=ut&&Y!==it&&Y!==he&&Pt(xt,pe,ee,Ce,qt,vt,Y.x,Y.y)&&Oe(Y.prev,Y,Y.next)>=0)return!1;Y=Y.prevZ}for(;I&&I.z<=ae;){if(I.x>=K&&I.x<=le&&I.y>=kt&&I.y<=ut&&I!==it&&I!==he&&Pt(xt,pe,ee,Ce,qt,vt,I.x,I.y)&&Oe(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function et(G,Mt,Et){var U=G;do{var it=U.prev,te=U.next.next;!De(it,te)&&Ge(it,U,U.next,te)&&J(it,te)&&J(te,it)&&(Mt.push(it.i/Et|0),Mt.push(U.i/Et|0),Mt.push(te.i/Et|0),Ie(U),Ie(U.next),U=G=te),U=U.next}while(U!==G);return yt(U)}function Qt(G,Mt,Et,U,it,te){var he=G;do{for(var xt=he.next.next;xt!==he.prev;){if(he.i!==xt.i&&$t(he,xt)){var ee=Gt(he,xt);he=yt(he,he.next),ee=yt(ee,ee.next),st(he,Mt,Et,U,it,te,0),st(ee,Mt,Et,U,it,te,0);return}xt=xt.next}he=he.next}while(he!==G)}function Ut(G,Mt,Et,U){var it=[],te,he,xt,ee,qt;for(te=0,he=Mt.length;te<he;te++)xt=Mt[te]*U,ee=te<he-1?Mt[te+1]*U:G.length,qt=k(G,xt,ee,U,!1),qt===qt.next&&(qt.steiner=!0),it.push(Ft(qt));for(it.sort(zt),te=0;te<it.length;te++)Et=ft(it[te],Et);return Et}function zt(G,Mt){return G.x-Mt.x}function ft(G,Mt){var Et=re(G,Mt);if(!Et)return Mt;var U=Gt(Et,G);return yt(U,U.next),yt(Et,Et.next)}function re(G,Mt){var Et=Mt,U=G.x,it=G.y,te=-1/0,he;do{if(it<=Et.y&&it>=Et.next.y&&Et.next.y!==Et.y){var xt=Et.x+(it-Et.y)*(Et.next.x-Et.x)/(Et.next.y-Et.y);if(xt<=U&&xt>te&&(te=xt,he=Et.x<Et.next.x?Et:Et.next,xt===U))return he}Et=Et.next}while(Et!==Mt);if(!he)return null;var ee=he,qt=he.x,pe=he.y,Ce=1/0,vt;Et=he;do U>=Et.x&&Et.x>=qt&&U!==Et.x&&Pt(it<pe?U:te,it,qt,pe,it<pe?te:U,it,Et.x,Et.y)&&(vt=Math.abs(it-Et.y)/(U-Et.x),J(Et,G)&&(vt<Ce||vt===Ce&&(Et.x>he.x||Et.x===he.x&&q(he,Et)))&&(he=Et,Ce=vt)),Et=Et.next;while(Et!==ee);return he}function q(G,Mt){return Oe(G.prev,G,Mt.prev)<0&&Oe(Mt.next,G,G.next)<0}function Q(G,Mt,Et,U){var it=G;do it.z===0&&(it.z=At(it.x,it.y,Mt,Et,U)),it.prevZ=it.prev,it.nextZ=it.next,it=it.next;while(it!==G);it.prevZ.nextZ=null,it.prevZ=null,Dt(it)}function Dt(G){var Mt,Et,U,it,te,he,xt,ee,qt=1;do{for(Et=G,G=null,te=null,he=0;Et;){for(he++,U=Et,xt=0,Mt=0;Mt<qt&&(xt++,U=U.nextZ,!!U);Mt++);for(ee=qt;xt>0||ee>0&&U;)xt!==0&&(ee===0||!U||Et.z<=U.z)?(it=Et,Et=Et.nextZ,xt--):(it=U,U=U.nextZ,ee--),te?te.nextZ=it:G=it,it.prevZ=te,te=it;Et=U}te.nextZ=null,qt*=2}while(he>1);return G}function At(G,Mt,Et,U,it){return G=(G-Et)*it|0,Mt=(Mt-U)*it|0,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,Mt=(Mt|Mt<<8)&16711935,Mt=(Mt|Mt<<4)&252645135,Mt=(Mt|Mt<<2)&858993459,Mt=(Mt|Mt<<1)&1431655765,G|Mt<<1}function Ft(G){var Mt=G,Et=G;do(Mt.x<Et.x||Mt.x===Et.x&&Mt.y<Et.y)&&(Et=Mt),Mt=Mt.next;while(Mt!==G);return Et}function Pt(G,Mt,Et,U,it,te,he,xt){return(it-he)*(Mt-xt)>=(G-he)*(te-xt)&&(G-he)*(U-xt)>=(Et-he)*(Mt-xt)&&(Et-he)*(te-xt)>=(it-he)*(U-xt)}function $t(G,Mt){return G.next.i!==Mt.i&&G.prev.i!==Mt.i&&!Vt(G,Mt)&&(J(G,Mt)&&J(Mt,G)&&ce(G,Mt)&&(Oe(G.prev,G,Mt.prev)||Oe(G,Mt.prev,Mt))||De(G,Mt)&&Oe(G.prev,G,G.next)>0&&Oe(Mt.prev,Mt,Mt.next)>0)}function Oe(G,Mt,Et){return(Mt.y-G.y)*(Et.x-Mt.x)-(Mt.x-G.x)*(Et.y-Mt.y)}function De(G,Mt){return G.x===Mt.x&&G.y===Mt.y}function Ge(G,Mt,Et,U){var it=Te(Oe(G,Mt,Et)),te=Te(Oe(G,Mt,U)),he=Te(Oe(Et,U,G)),xt=Te(Oe(Et,U,Mt));return!!(it!==te&&he!==xt||it===0&&un(G,Et,Mt)||te===0&&un(G,U,Mt)||he===0&&un(Et,G,U)||xt===0&&un(Et,Mt,U))}function un(G,Mt,Et){return Mt.x<=Math.max(G.x,Et.x)&&Mt.x>=Math.min(G.x,Et.x)&&Mt.y<=Math.max(G.y,Et.y)&&Mt.y>=Math.min(G.y,Et.y)}function Te(G){return G>0?1:G<0?-1:0}function Vt(G,Mt){var Et=G;do{if(Et.i!==G.i&&Et.next.i!==G.i&&Et.i!==Mt.i&&Et.next.i!==Mt.i&&Ge(Et,Et.next,G,Mt))return!0;Et=Et.next}while(Et!==G);return!1}function J(G,Mt){return Oe(G.prev,G,G.next)<0?Oe(G,Mt,G.next)>=0&&Oe(G,G.prev,Mt)>=0:Oe(G,Mt,G.prev)<0||Oe(G,G.next,Mt)<0}function ce(G,Mt){var Et=G,U=!1,it=(G.x+Mt.x)/2,te=(G.y+Mt.y)/2;do Et.y>te!=Et.next.y>te&&Et.next.y!==Et.y&&it<(Et.next.x-Et.x)*(te-Et.y)/(Et.next.y-Et.y)+Et.x&&(U=!U),Et=Et.next;while(Et!==G);return U}function Gt(G,Mt){var Et=new B(G.i,G.x,G.y),U=new B(Mt.i,Mt.x,Mt.y),it=G.next,te=Mt.prev;return G.next=Mt,Mt.prev=G,Et.next=it,it.prev=Et,U.next=Et,Et.prev=U,te.next=U,U.prev=te,U}function ke(G,Mt,Et,U){var it=new B(G,Mt,Et);return U?(it.next=U.next,it.prev=U,U.next.prev=it,U.next=it):(it.prev=it,it.next=it),it}function Ie(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function B(G,Mt,Et){this.i=G,this.x=Mt,this.y=Et,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}de.deviation=function(G,Mt,Et,U){var it=Mt&&Mt.length,te=it?Mt[0]*Et:G.length,he=Math.abs(Ct(G,0,te,Et));if(it)for(var xt=0,ee=Mt.length;xt<ee;xt++){var qt=Mt[xt]*Et,pe=xt<ee-1?Mt[xt+1]*Et:G.length;he-=Math.abs(Ct(G,qt,pe,Et))}var Ce=0;for(xt=0;xt<U.length;xt+=3){var vt=U[xt]*Et,K=U[xt+1]*Et,kt=U[xt+2]*Et;Ce+=Math.abs((G[vt]-G[kt])*(G[K+1]-G[vt+1])-(G[vt]-G[K])*(G[kt+1]-G[vt+1]))}return he===0&&Ce===0?0:Math.abs((Ce-he)/he)};function Ct(G,Mt,Et,U){for(var it=0,te=Mt,he=Et-U;te<Et;te+=U)it+=(G[he]-G[te])*(G[te+1]+G[he+1]),he=te;return it}de.flatten=function(G){for(var Mt=G[0][0].length,Et={vertices:[],holes:[],dimensions:Mt},U=0,it=0;it<G.length;it++){for(var te=0;te<G[it].length;te++)for(var he=0;he<Mt;he++)Et.vertices.push(G[it][te][he]);it>0&&(U+=G[it-1].length,Et.holes.push(U))}return Et}},2268:function(Me){"use strict";var de=Me.exports={};de.isIE=function(k){function yt(){var St=navigator.userAgent.toLowerCase();return St.indexOf("msie")!==-1||St.indexOf("trident")!==-1||St.indexOf(" edge/")!==-1}if(!yt())return!1;if(!k)return!0;var st=function(){var St,Kt=3,et=document.createElement("div"),Qt=et.getElementsByTagName("i");do et.innerHTML="<!--[if gt IE "+ ++Kt+"]><i></i><![endif]-->";while(Qt[0]);return Kt>4?Kt:St}();return k===st},de.isLegacyOpera=function(){return!!window.opera}},17900:function(Me){"use strict";var de=Me.exports={};de.forEach=function(k,yt){for(var st=0;st<k.length;st++){var St=yt(k[st]);if(St)return St}}},58229:function(Me,de,k){"use strict";var yt=k(2268);Me.exports=function(st){st=st||{};var St=st.reporter,Kt=st.batchProcessor,et=st.stateHandler.getState;if(!St)throw new Error("Missing required dependency: reporter.");function Qt(q,Q){function Dt(){Q(q)}if(yt.isIE(8))et(q).object={proxy:Dt},q.attachEvent("onresize",Dt);else{var At=ft(q);if(!At)throw new Error("Element is not detectable by this strategy.");At.contentDocument.defaultView.addEventListener("resize",Dt)}}function Ut(q){var Q=st.important?" !important; ":"; ";return(q.join(Q)+Q).trim()}function zt(q,Q,Dt){Dt||(Dt=Q,Q=q,q=null),q=q||{};var At=q.debug;function Ft(Pt,$t){var Oe=Ut(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),De=!1,Ge=window.getComputedStyle(Pt),un=Pt.offsetWidth,Te=Pt.offsetHeight;et(Pt).startSize={width:un,height:Te};function Vt(){function J(){if(Ge.position==="static"){Pt.style.setProperty("position","relative",q.important?"important":"");var ke=function(Ie,B,Ct,G){function Mt(U){return U.replace(/[^-\d\.]/g,"")}var Et=Ct[G];Et!=="auto"&&Mt(Et)!=="0"&&(Ie.warn("An element that is positioned static has style."+G+"="+Et+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+G+" will be set to 0. Element: ",B),B.style.setProperty(G,"0",q.important?"important":""))};ke(St,Pt,Ge,"top"),ke(St,Pt,Ge,"right"),ke(St,Pt,Ge,"bottom"),ke(St,Pt,Ge,"left")}}function ce(){De||J();function ke(B,Ct){if(!B.contentDocument){var G=et(B);G.checkForObjectDocumentTimeoutId&&window.clearTimeout(G.checkForObjectDocumentTimeoutId),G.checkForObjectDocumentTimeoutId=setTimeout(function(){G.checkForObjectDocumentTimeoutId=0,ke(B,Ct)},100);return}Ct(B.contentDocument)}var Ie=this;ke(Ie,function(Ct){$t(Pt)})}Ge.position!==""&&(J(Ge),De=!0);var Gt=document.createElement("object");Gt.style.cssText=Oe,Gt.tabIndex=-1,Gt.type="text/html",Gt.setAttribute("aria-hidden","true"),Gt.onload=ce,yt.isIE()||(Gt.data="about:blank"),et(Pt)&&(Pt.appendChild(Gt),et(Pt).object=Gt,yt.isIE()&&(Gt.data="about:blank"))}Kt?Kt.add(Vt):Vt()}yt.isIE(8)?Dt(Q):Ft(Q,Dt)}function ft(q){return et(q).object}function re(q){if(et(q)){var Q=ft(q);Q&&(yt.isIE(8)?q.detachEvent("onresize",Q.proxy):q.removeChild(Q),et(q).checkForObjectDocumentTimeoutId&&window.clearTimeout(et(q).checkForObjectDocumentTimeoutId),delete et(q).object)}}return{makeDetectable:zt,addListener:Qt,uninstall:re}}},60787:function(Me,de,k){"use strict";var yt=k(17900).forEach;Me.exports=function(st){st=st||{};var St=st.reporter,Kt=st.batchProcessor,et=st.stateHandler.getState,Qt=st.stateHandler.hasState,Ut=st.idHandler;if(!Kt)throw new Error("Missing required dependency: batchProcessor");if(!St)throw new Error("Missing required dependency: reporter.");var zt=Dt(),ft="erd_scroll_detection_scrollbar_style",re="erd_scroll_detection_container";function q(Vt){At(Vt,ft,re)}q(window.document);function Q(Vt){var J=st.important?" !important; ":"; ";return(Vt.join(J)+J).trim()}function Dt(){var Vt=500,J=500,ce=document.createElement("div");ce.style.cssText=Q(["position: absolute","width: "+Vt*2+"px","height: "+J*2+"px","visibility: hidden","margin: 0","padding: 0"]);var Gt=document.createElement("div");Gt.style.cssText=Q(["position: absolute","width: "+Vt+"px","height: "+J+"px","overflow: scroll","visibility: none","top: "+-Vt*3+"px","left: "+-J*3+"px","visibility: hidden","margin: 0","padding: 0"]),Gt.appendChild(ce),document.body.insertBefore(Gt,document.body.firstChild);var ke=Vt-Gt.clientWidth,Ie=J-Gt.clientHeight;return document.body.removeChild(Gt),{width:ke,height:Ie}}function At(Vt,J,ce){function Gt(Ct,G){G=G||function(Et){Vt.head.appendChild(Et)};var Mt=Vt.createElement("style");return Mt.innerHTML=Ct,Mt.id=J,G(Mt),Mt}if(!Vt.getElementById(J)){var ke=ce+"_animation",Ie=ce+"_animation_active",B=`/* Created by the element-resize-detector library. */
`;B+="."+ce+" > div::-webkit-scrollbar { "+Q(["display: none"])+` }

`,B+="."+Ie+" { "+Q(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+ke,"animation-name: "+ke])+` }
`,B+="@-webkit-keyframes "+ke+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,B+="@keyframes "+ke+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",Gt(B)}}function Ft(Vt){Vt.className+=" "+re+"_animation_active"}function Pt(Vt,J,ce){if(Vt.addEventListener)Vt.addEventListener(J,ce);else if(Vt.attachEvent)Vt.attachEvent("on"+J,ce);else return St.error("[scroll] Don't know how to add event listeners.")}function $t(Vt,J,ce){if(Vt.removeEventListener)Vt.removeEventListener(J,ce);else if(Vt.detachEvent)Vt.detachEvent("on"+J,ce);else return St.error("[scroll] Don't know how to remove event listeners.")}function Oe(Vt){return et(Vt).container.childNodes[0].childNodes[0].childNodes[0]}function De(Vt){return et(Vt).container.childNodes[0].childNodes[0].childNodes[1]}function Ge(Vt,J){var ce=et(Vt).listeners;if(!ce.push)throw new Error("Cannot add listener to an element that is not detectable.");et(Vt).listeners.push(J)}function un(Vt,J,ce){ce||(ce=J,J=Vt,Vt=null),Vt=Vt||{};function Gt(){if(Vt.debug){var Tt=Array.prototype.slice.call(arguments);if(Tt.unshift(Ut.get(J),"Scroll: "),St.log.apply)St.log.apply(null,Tt);else for(var ae=0;ae<Tt.length;ae++)St.log(Tt[ae])}}function ke(Tt){function ae(Y){var I=Y.getRootNode&&Y.getRootNode().contains(Y);return Y===Y.ownerDocument.body||Y.ownerDocument.body.contains(Y)||I}return!ae(Tt)||window.getComputedStyle(Tt)===null}function Ie(Tt){var ae=et(Tt).container.childNodes[0],Y=window.getComputedStyle(ae);return!Y.width||Y.width.indexOf("px")===-1}function B(){var Tt=window.getComputedStyle(J),ae={};return ae.position=Tt.position,ae.width=J.offsetWidth,ae.height=J.offsetHeight,ae.top=Tt.top,ae.right=Tt.right,ae.bottom=Tt.bottom,ae.left=Tt.left,ae.widthCSS=Tt.width,ae.heightCSS=Tt.height,ae}function Ct(){var Tt=B();et(J).startSize={width:Tt.width,height:Tt.height},Gt("Element start size",et(J).startSize)}function G(){et(J).listeners=[]}function Mt(){if(Gt("storeStyle invoked."),!et(J)){Gt("Aborting because element has been uninstalled");return}var Tt=B();et(J).style=Tt}function Et(Tt,ae,Y){et(Tt).lastWidth=ae,et(Tt).lastHeight=Y}function U(Tt){return Oe(Tt).childNodes[0]}function it(){return 2*zt.width+1}function te(){return 2*zt.height+1}function he(Tt){return Tt+10+it()}function xt(Tt){return Tt+10+te()}function ee(Tt){return Tt*2+it()}function qt(Tt){return Tt*2+te()}function pe(Tt,ae,Y){var I=Oe(Tt),Yt=De(Tt),T=he(ae),F=xt(Y),Lt=ee(ae),Wt=qt(Y);I.scrollLeft=T,I.scrollTop=F,Yt.scrollLeft=Lt,Yt.scrollTop=Wt}function Ce(){var Tt=et(J).container;if(!Tt){Tt=document.createElement("div"),Tt.className=re,Tt.style.cssText=Q(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),et(J).container=Tt,Ft(Tt),J.appendChild(Tt);var ae=function(){et(J).onRendered&&et(J).onRendered()};Pt(Tt,"animationstart",ae),et(J).onAnimationStart=ae}return Tt}function vt(){function Tt(){var se=et(J).style;if(se.position==="static"){J.style.setProperty("position","relative",Vt.important?"important":"");var fe=function(tt,D,V,nt){function _t(ge){return ge.replace(/[^-\d\.]/g,"")}var Ot=V[nt];Ot!=="auto"&&_t(Ot)!=="0"&&(tt.warn("An element that is positioned static has style."+nt+"="+Ot+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+nt+" will be set to 0. Element: ",D),D.style[nt]=0)};fe(St,J,se,"top"),fe(St,J,se,"right"),fe(St,J,se,"bottom"),fe(St,J,se,"left")}}function ae(se,fe,tt,D){return se=se?se+"px":"0",fe=fe?fe+"px":"0",tt=tt?tt+"px":"0",D=D?D+"px":"0",["left: "+se,"top: "+fe,"right: "+D,"bottom: "+tt]}if(Gt("Injecting elements"),!et(J)){Gt("Aborting because element has been uninstalled");return}Tt();var Y=et(J).container;Y||(Y=Ce());var I=zt.width,Yt=zt.height,T=Q(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),F=Q(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(ae(-(1+I),-(1+Yt),-Yt,-I))),Lt=Q(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Wt=Q(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),ie=Q(["position: absolute","left: 0","top: 0"]),be=Q(["position: absolute","width: 200%","height: 200%"]),Ae=document.createElement("div"),we=document.createElement("div"),$e=document.createElement("div"),Xe=document.createElement("div"),Qe=document.createElement("div"),qe=document.createElement("div");Ae.dir="ltr",Ae.style.cssText=T,Ae.className=re,we.className=re,we.style.cssText=F,$e.style.cssText=Lt,Xe.style.cssText=ie,Qe.style.cssText=Wt,qe.style.cssText=be,$e.appendChild(Xe),Qe.appendChild(qe),we.appendChild($e),we.appendChild(Qe),Ae.appendChild(we),Y.appendChild(Ae);function Zt(){var se=et(J);se&&se.onExpand?se.onExpand():Gt("Aborting expand scroll handler: element has been uninstalled")}function ne(){var se=et(J);se&&se.onShrink?se.onShrink():Gt("Aborting shrink scroll handler: element has been uninstalled")}Pt($e,"scroll",Zt),Pt(Qe,"scroll",ne),et(J).onExpandScroll=Zt,et(J).onShrinkScroll=ne}function K(){function Tt(Lt,Wt,ie){var be=U(Lt),Ae=he(Wt),we=xt(ie);be.style.setProperty("width",Ae+"px",Vt.important?"important":""),be.style.setProperty("height",we+"px",Vt.important?"important":"")}function ae(Lt){var Wt=J.offsetWidth,ie=J.offsetHeight,be=Wt!==et(J).lastWidth||ie!==et(J).lastHeight;Gt("Storing current size",Wt,ie),Et(J,Wt,ie),Kt.add(0,function(){if(be){if(!et(J)){Gt("Aborting because element has been uninstalled");return}if(!Y()){Gt("Aborting because element container has not been initialized");return}if(Vt.debug){var we=J.offsetWidth,$e=J.offsetHeight;(we!==Wt||$e!==ie)&&St.warn(Ut.get(J),"Scroll: Size changed before updating detector elements.")}Tt(J,Wt,ie)}}),Kt.add(1,function(){if(!et(J)){Gt("Aborting because element has been uninstalled");return}if(!Y()){Gt("Aborting because element container has not been initialized");return}pe(J,Wt,ie)}),be&&Lt&&Kt.add(2,function(){if(!et(J)){Gt("Aborting because element has been uninstalled");return}if(!Y()){Gt("Aborting because element container has not been initialized");return}Lt()})}function Y(){return!!et(J).container}function I(){function Lt(){return et(J).lastNotifiedWidth===void 0}Gt("notifyListenersIfNeeded invoked");var Wt=et(J);if(Lt()&&Wt.lastWidth===Wt.startSize.width&&Wt.lastHeight===Wt.startSize.height)return Gt("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(Wt.lastWidth===Wt.lastNotifiedWidth&&Wt.lastHeight===Wt.lastNotifiedHeight)return Gt("Not notifying: Size already notified");Gt("Current size not notified, notifying..."),Wt.lastNotifiedWidth=Wt.lastWidth,Wt.lastNotifiedHeight=Wt.lastHeight,yt(et(J).listeners,function(ie){ie(J)})}function Yt(){if(Gt("startanimation triggered."),Ie(J)){Gt("Ignoring since element is still unrendered...");return}Gt("Element rendered.");var Lt=Oe(J),Wt=De(J);(Lt.scrollLeft===0||Lt.scrollTop===0||Wt.scrollLeft===0||Wt.scrollTop===0)&&(Gt("Scrollbars out of sync. Updating detector elements..."),ae(I))}function T(){if(Gt("Scroll detected."),Ie(J)){Gt("Scroll event fired while unrendered. Ignoring...");return}ae(I)}if(Gt("registerListenersAndPositionElements invoked."),!et(J)){Gt("Aborting because element has been uninstalled");return}et(J).onRendered=Yt,et(J).onExpand=T,et(J).onShrink=T;var F=et(J).style;Tt(J,F.width,F.height)}function kt(){if(Gt("finalizeDomMutation invoked."),!et(J)){Gt("Aborting because element has been uninstalled");return}var Tt=et(J).style;Et(J,Tt.width,Tt.height),pe(J,Tt.width,Tt.height)}function le(){ce(J)}function ut(){Gt("Installing..."),G(),Ct(),Kt.add(0,Mt),Kt.add(1,vt),Kt.add(2,K),Kt.add(3,kt),Kt.add(4,le)}Gt("Making detectable..."),ke(J)?(Gt("Element is detached"),Ce(),Gt("Waiting until element is attached..."),et(J).onRendered=function(){Gt("Element is now attached"),ut()}):ut()}function Te(Vt){var J=et(Vt);J&&(J.onExpandScroll&&$t(Oe(Vt),"scroll",J.onExpandScroll),J.onShrinkScroll&&$t(De(Vt),"scroll",J.onShrinkScroll),J.onAnimationStart&&$t(J.container,"animationstart",J.onAnimationStart),J.container&&Vt.removeChild(J.container))}return{makeDetectable:un,addListener:Ge,uninstall:Te,initDocument:q}}},63844:function(Me,de,k){"use strict";var yt=k(17900).forEach,st=k(68452),St=k(96199),Kt=k(75805),et=k(79799),Qt=k(71724),Ut=k(2268),zt=k(98129),ft=k(64258),re=k(58229),q=k(60787);function Q(Pt){return Array.isArray(Pt)||Pt.length!==void 0}function Dt(Pt){if(Array.isArray(Pt))return Pt;var $t=[];return yt(Pt,function(Oe){$t.push(Oe)}),$t}function At(Pt){return Pt&&Pt.nodeType===1}Me.exports=function(Pt){Pt=Pt||{};var $t;if(Pt.idHandler)$t={get:function(U){return Pt.idHandler.get(U,!0)},set:Pt.idHandler.set};else{var Oe=Kt(),De=et({idGenerator:Oe,stateHandler:ft});$t=De}var Ge=Pt.reporter;if(!Ge){var un=Ge===!1;Ge=Qt(un)}var Te=Ft(Pt,"batchProcessor",zt({reporter:Ge})),Vt={};Vt.callOnAdd=!!Ft(Pt,"callOnAdd",!0),Vt.debug=!!Ft(Pt,"debug",!1);var J=St($t),ce=st({stateHandler:ft}),Gt,ke=Ft(Pt,"strategy","object"),Ie=Ft(Pt,"important",!1),B={reporter:Ge,batchProcessor:Te,stateHandler:ft,idHandler:$t,important:Ie};if(ke==="scroll"&&(Ut.isLegacyOpera()?(Ge.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),ke="object"):Ut.isIE(9)&&(Ge.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),ke="object")),ke==="scroll")Gt=q(B);else if(ke==="object")Gt=re(B);else throw new Error("Invalid strategy name: "+ke);var Ct={};function G(U,it,te){function he(vt){var K=J.get(vt);yt(K,function(le){le(vt)})}function xt(vt,K,kt){J.add(K,kt),vt&&kt(K)}if(te||(te=it,it=U,U={}),!it)throw new Error("At least one element required.");if(!te)throw new Error("Listener required.");if(At(it))it=[it];else if(Q(it))it=Dt(it);else return Ge.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var ee=0,qt=Ft(U,"callOnAdd",Vt.callOnAdd),pe=Ft(U,"onReady",function(){}),Ce=Ft(U,"debug",Vt.debug);yt(it,function(K){ft.getState(K)||(ft.initState(K),$t.set(K));var kt=$t.get(K);if(Ce&&Ge.log("Attaching listener to element",kt,K),!ce.isDetectable(K)){if(Ce&&Ge.log(kt,"Not detectable."),ce.isBusy(K)){Ce&&Ge.log(kt,"System busy making it detectable"),xt(qt,K,te),Ct[kt]=Ct[kt]||[],Ct[kt].push(function(){ee++,ee===it.length&&pe()});return}return Ce&&Ge.log(kt,"Making detectable..."),ce.markBusy(K,!0),Gt.makeDetectable({debug:Ce,important:Ie},K,function(ut){if(Ce&&Ge.log(kt,"onElementDetectable"),ft.getState(ut)){ce.markAsDetectable(ut),ce.markBusy(ut,!1),Gt.addListener(ut,he),xt(qt,ut,te);var Tt=ft.getState(ut);if(Tt&&Tt.startSize){var ae=ut.offsetWidth,Y=ut.offsetHeight;(Tt.startSize.width!==ae||Tt.startSize.height!==Y)&&he(ut)}Ct[kt]&&yt(Ct[kt],function(I){I()})}else Ce&&Ge.log(kt,"Element uninstalled before being detectable.");delete Ct[kt],ee++,ee===it.length&&pe()})}Ce&&Ge.log(kt,"Already detecable, adding listener."),xt(qt,K,te),ee++}),ee===it.length&&pe()}function Mt(U){if(!U)return Ge.error("At least one element is required.");if(At(U))U=[U];else if(Q(U))U=Dt(U);else return Ge.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");yt(U,function(it){J.removeAllListeners(it),Gt.uninstall(it),ft.cleanState(it)})}function Et(U){Gt.initDocument&&Gt.initDocument(U)}return{listenTo:G,removeListener:J.removeListener,removeAllListeners:J.removeAllListeners,uninstall:Mt,initDocument:Et}};function Ft(Pt,$t,Oe){var De=Pt[$t];return De==null&&Oe!==void 0?Oe:De}},68452:function(Me){"use strict";Me.exports=function(de){var k=de.stateHandler.getState;function yt(et){var Qt=k(et);return Qt&&!!Qt.isDetectable}function st(et){k(et).isDetectable=!0}function St(et){return!!k(et).busy}function Kt(et,Qt){k(et).busy=!!Qt}return{isDetectable:yt,markAsDetectable:st,isBusy:St,markBusy:Kt}}},75805:function(Me){"use strict";Me.exports=function(){var de=1;function k(){return de++}return{generate:k}}},79799:function(Me){"use strict";Me.exports=function(de){var k=de.idGenerator,yt=de.stateHandler.getState;function st(Kt){var et=yt(Kt);return et&&et.id!==void 0?et.id:null}function St(Kt){var et=yt(Kt);if(!et)throw new Error("setId required the element to have a resize detection state.");var Qt=k.generate();return et.id=Qt,Qt}return{get:st,set:St}}},96199:function(Me){"use strict";Me.exports=function(de){var k={};function yt(et){var Qt=de.get(et);return Qt===void 0?[]:k[Qt]||[]}function st(et,Qt){var Ut=de.get(et);k[Ut]||(k[Ut]=[]),k[Ut].push(Qt)}function St(et,Qt){for(var Ut=yt(et),zt=0,ft=Ut.length;zt<ft;++zt)if(Ut[zt]===Qt){Ut.splice(zt,1);break}}function Kt(et){var Qt=yt(et);Qt&&(Qt.length=0)}return{get:yt,add:st,removeListener:St,removeAllListeners:Kt}}},71724:function(Me){"use strict";Me.exports=function(de){function k(){}var yt={log:k,warn:k,error:k};if(!de&&window.console){var st=function(St,Kt){St[Kt]=function(){var Qt=console[Kt];if(Qt.apply)Qt.apply(console,arguments);else for(var Ut=0;Ut<arguments.length;Ut++)Qt(arguments[Ut])}};st(yt,"log"),st(yt,"warn"),st(yt,"error")}return yt}},64258:function(Me){"use strict";var de="_erd";function k(St){return St[de]={},yt(St)}function yt(St){return St[de]}function st(St){delete St[de]}Me.exports={initState:k,getState:yt,cleanState:st}},26729:function(Me){"use strict";var de=Object.prototype.hasOwnProperty,k="~";function yt(){}Object.create&&(yt.prototype=Object.create(null),new yt().__proto__||(k=!1));function st(Qt,Ut,zt){this.fn=Qt,this.context=Ut,this.once=zt||!1}function St(Qt,Ut,zt,ft,re){if(typeof zt!="function")throw new TypeError("The listener must be a function");var q=new st(zt,ft||Qt,re),Q=k?k+Ut:Ut;return Qt._events[Q]?Qt._events[Q].fn?Qt._events[Q]=[Qt._events[Q],q]:Qt._events[Q].push(q):(Qt._events[Q]=q,Qt._eventsCount++),Qt}function Kt(Qt,Ut){--Qt._eventsCount===0?Qt._events=new yt:delete Qt._events[Ut]}function et(){this._events=new yt,this._eventsCount=0}et.prototype.eventNames=function(){var Ut=[],zt,ft;if(this._eventsCount===0)return Ut;for(ft in zt=this._events)de.call(zt,ft)&&Ut.push(k?ft.slice(1):ft);return Object.getOwnPropertySymbols?Ut.concat(Object.getOwnPropertySymbols(zt)):Ut},et.prototype.listeners=function(Ut){var zt=k?k+Ut:Ut,ft=this._events[zt];if(!ft)return[];if(ft.fn)return[ft.fn];for(var re=0,q=ft.length,Q=new Array(q);re<q;re++)Q[re]=ft[re].fn;return Q},et.prototype.listenerCount=function(Ut){var zt=k?k+Ut:Ut,ft=this._events[zt];return ft?ft.fn?1:ft.length:0},et.prototype.emit=function(Ut,zt,ft,re,q,Q){var Dt=k?k+Ut:Ut;if(!this._events[Dt])return!1;var At=this._events[Dt],Ft=arguments.length,Pt,$t;if(At.fn){switch(At.once&&this.removeListener(Ut,At.fn,void 0,!0),Ft){case 1:return At.fn.call(At.context),!0;case 2:return At.fn.call(At.context,zt),!0;case 3:return At.fn.call(At.context,zt,ft),!0;case 4:return At.fn.call(At.context,zt,ft,re),!0;case 5:return At.fn.call(At.context,zt,ft,re,q),!0;case 6:return At.fn.call(At.context,zt,ft,re,q,Q),!0}for($t=1,Pt=new Array(Ft-1);$t<Ft;$t++)Pt[$t-1]=arguments[$t];At.fn.apply(At.context,Pt)}else{var Oe=At.length,De;for($t=0;$t<Oe;$t++)switch(At[$t].once&&this.removeListener(Ut,At[$t].fn,void 0,!0),Ft){case 1:At[$t].fn.call(At[$t].context);break;case 2:At[$t].fn.call(At[$t].context,zt);break;case 3:At[$t].fn.call(At[$t].context,zt,ft);break;case 4:At[$t].fn.call(At[$t].context,zt,ft,re);break;default:if(!Pt)for(De=1,Pt=new Array(Ft-1);De<Ft;De++)Pt[De-1]=arguments[De];At[$t].fn.apply(At[$t].context,Pt)}}return!0},et.prototype.on=function(Ut,zt,ft){return St(this,Ut,zt,ft,!1)},et.prototype.once=function(Ut,zt,ft){return St(this,Ut,zt,ft,!0)},et.prototype.removeListener=function(Ut,zt,ft,re){var q=k?k+Ut:Ut;if(!this._events[q])return this;if(!zt)return Kt(this,q),this;var Q=this._events[q];if(Q.fn)Q.fn===zt&&(!re||Q.once)&&(!ft||Q.context===ft)&&Kt(this,q);else{for(var Dt=0,At=[],Ft=Q.length;Dt<Ft;Dt++)(Q[Dt].fn!==zt||re&&!Q[Dt].once||ft&&Q[Dt].context!==ft)&&At.push(Q[Dt]);At.length?this._events[q]=At.length===1?At[0]:At:Kt(this,q)}return this},et.prototype.removeAllListeners=function(Ut){var zt;return Ut?(zt=k?k+Ut:Ut,this._events[zt]&&Kt(this,zt)):(this._events=new yt,this._eventsCount=0),this},et.prototype.off=et.prototype.removeListener,et.prototype.addListener=et.prototype.on,et.prefixed=k,et.EventEmitter=et,Me.exports=et},49685:function(Me,de,k){"use strict";k.d(de,{Ib:function(){return yt},WT:function(){return st}});var yt=1e-6,st=typeof Float32Array!="undefined"?Float32Array:Array,St=Math.random;function Kt(zt){st=zt}var et=Math.PI/180;function Qt(zt){return zt*et}function Ut(zt,ft){return Math.abs(zt-ft)<=yt*Math.max(1,Math.abs(zt),Math.abs(ft))}Math.hypot||(Math.hypot=function(){for(var zt=0,ft=arguments.length;ft--;)zt+=arguments[ft]*arguments[ft];return Math.sqrt(zt)})},35600:function(Me,de,k){"use strict";k.d(de,{Ue:function(){return st},al:function(){return Qt},xO:function(){return St}});var yt=k(49685);function st(){var U=new yt.WT(9);return yt.WT!=Float32Array&&(U[1]=0,U[2]=0,U[3]=0,U[5]=0,U[6]=0,U[7]=0),U[0]=1,U[4]=1,U[8]=1,U}function St(U,it){return U[0]=it[0],U[1]=it[1],U[2]=it[2],U[3]=it[4],U[4]=it[5],U[5]=it[6],U[6]=it[8],U[7]=it[9],U[8]=it[10],U}function Kt(U){var it=new glMatrix.ARRAY_TYPE(9);return it[0]=U[0],it[1]=U[1],it[2]=U[2],it[3]=U[3],it[4]=U[4],it[5]=U[5],it[6]=U[6],it[7]=U[7],it[8]=U[8],it}function et(U,it){return U[0]=it[0],U[1]=it[1],U[2]=it[2],U[3]=it[3],U[4]=it[4],U[5]=it[5],U[6]=it[6],U[7]=it[7],U[8]=it[8],U}function Qt(U,it,te,he,xt,ee,qt,pe,Ce){var vt=new yt.WT(9);return vt[0]=U,vt[1]=it,vt[2]=te,vt[3]=he,vt[4]=xt,vt[5]=ee,vt[6]=qt,vt[7]=pe,vt[8]=Ce,vt}function Ut(U,it,te,he,xt,ee,qt,pe,Ce,vt){return U[0]=it,U[1]=te,U[2]=he,U[3]=xt,U[4]=ee,U[5]=qt,U[6]=pe,U[7]=Ce,U[8]=vt,U}function zt(U){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=1,U[5]=0,U[6]=0,U[7]=0,U[8]=1,U}function ft(U,it){if(U===it){var te=it[1],he=it[2],xt=it[5];U[1]=it[3],U[2]=it[6],U[3]=te,U[5]=it[7],U[6]=he,U[7]=xt}else U[0]=it[0],U[1]=it[3],U[2]=it[6],U[3]=it[1],U[4]=it[4],U[5]=it[7],U[6]=it[2],U[7]=it[5],U[8]=it[8];return U}function re(U,it){var te=it[0],he=it[1],xt=it[2],ee=it[3],qt=it[4],pe=it[5],Ce=it[6],vt=it[7],K=it[8],kt=K*qt-pe*vt,le=-K*ee+pe*Ce,ut=vt*ee-qt*Ce,Tt=te*kt+he*le+xt*ut;return Tt?(Tt=1/Tt,U[0]=kt*Tt,U[1]=(-K*he+xt*vt)*Tt,U[2]=(pe*he-xt*qt)*Tt,U[3]=le*Tt,U[4]=(K*te-xt*Ce)*Tt,U[5]=(-pe*te+xt*ee)*Tt,U[6]=ut*Tt,U[7]=(-vt*te+he*Ce)*Tt,U[8]=(qt*te-he*ee)*Tt,U):null}function q(U,it){var te=it[0],he=it[1],xt=it[2],ee=it[3],qt=it[4],pe=it[5],Ce=it[6],vt=it[7],K=it[8];return U[0]=qt*K-pe*vt,U[1]=xt*vt-he*K,U[2]=he*pe-xt*qt,U[3]=pe*Ce-ee*K,U[4]=te*K-xt*Ce,U[5]=xt*ee-te*pe,U[6]=ee*vt-qt*Ce,U[7]=he*Ce-te*vt,U[8]=te*qt-he*ee,U}function Q(U){var it=U[0],te=U[1],he=U[2],xt=U[3],ee=U[4],qt=U[5],pe=U[6],Ce=U[7],vt=U[8];return it*(vt*ee-qt*Ce)+te*(-vt*xt+qt*pe)+he*(Ce*xt-ee*pe)}function Dt(U,it,te){var he=it[0],xt=it[1],ee=it[2],qt=it[3],pe=it[4],Ce=it[5],vt=it[6],K=it[7],kt=it[8],le=te[0],ut=te[1],Tt=te[2],ae=te[3],Y=te[4],I=te[5],Yt=te[6],T=te[7],F=te[8];return U[0]=le*he+ut*qt+Tt*vt,U[1]=le*xt+ut*pe+Tt*K,U[2]=le*ee+ut*Ce+Tt*kt,U[3]=ae*he+Y*qt+I*vt,U[4]=ae*xt+Y*pe+I*K,U[5]=ae*ee+Y*Ce+I*kt,U[6]=Yt*he+T*qt+F*vt,U[7]=Yt*xt+T*pe+F*K,U[8]=Yt*ee+T*Ce+F*kt,U}function At(U,it,te){var he=it[0],xt=it[1],ee=it[2],qt=it[3],pe=it[4],Ce=it[5],vt=it[6],K=it[7],kt=it[8],le=te[0],ut=te[1];return U[0]=he,U[1]=xt,U[2]=ee,U[3]=qt,U[4]=pe,U[5]=Ce,U[6]=le*he+ut*qt+vt,U[7]=le*xt+ut*pe+K,U[8]=le*ee+ut*Ce+kt,U}function Ft(U,it,te){var he=it[0],xt=it[1],ee=it[2],qt=it[3],pe=it[4],Ce=it[5],vt=it[6],K=it[7],kt=it[8],le=Math.sin(te),ut=Math.cos(te);return U[0]=ut*he+le*qt,U[1]=ut*xt+le*pe,U[2]=ut*ee+le*Ce,U[3]=ut*qt-le*he,U[4]=ut*pe-le*xt,U[5]=ut*Ce-le*ee,U[6]=vt,U[7]=K,U[8]=kt,U}function Pt(U,it,te){var he=te[0],xt=te[1];return U[0]=he*it[0],U[1]=he*it[1],U[2]=he*it[2],U[3]=xt*it[3],U[4]=xt*it[4],U[5]=xt*it[5],U[6]=it[6],U[7]=it[7],U[8]=it[8],U}function $t(U,it){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=1,U[5]=0,U[6]=it[0],U[7]=it[1],U[8]=1,U}function Oe(U,it){var te=Math.sin(it),he=Math.cos(it);return U[0]=he,U[1]=te,U[2]=0,U[3]=-te,U[4]=he,U[5]=0,U[6]=0,U[7]=0,U[8]=1,U}function De(U,it){return U[0]=it[0],U[1]=0,U[2]=0,U[3]=0,U[4]=it[1],U[5]=0,U[6]=0,U[7]=0,U[8]=1,U}function Ge(U,it){return U[0]=it[0],U[1]=it[1],U[2]=0,U[3]=it[2],U[4]=it[3],U[5]=0,U[6]=it[4],U[7]=it[5],U[8]=1,U}function un(U,it){var te=it[0],he=it[1],xt=it[2],ee=it[3],qt=te+te,pe=he+he,Ce=xt+xt,vt=te*qt,K=he*qt,kt=he*pe,le=xt*qt,ut=xt*pe,Tt=xt*Ce,ae=ee*qt,Y=ee*pe,I=ee*Ce;return U[0]=1-kt-Tt,U[3]=K-I,U[6]=le+Y,U[1]=K+I,U[4]=1-vt-Tt,U[7]=ut-ae,U[2]=le-Y,U[5]=ut+ae,U[8]=1-vt-kt,U}function Te(U,it){var te=it[0],he=it[1],xt=it[2],ee=it[3],qt=it[4],pe=it[5],Ce=it[6],vt=it[7],K=it[8],kt=it[9],le=it[10],ut=it[11],Tt=it[12],ae=it[13],Y=it[14],I=it[15],Yt=te*pe-he*qt,T=te*Ce-xt*qt,F=te*vt-ee*qt,Lt=he*Ce-xt*pe,Wt=he*vt-ee*pe,ie=xt*vt-ee*Ce,be=K*ae-kt*Tt,Ae=K*Y-le*Tt,we=K*I-ut*Tt,$e=kt*Y-le*ae,Xe=kt*I-ut*ae,Qe=le*I-ut*Y,qe=Yt*Qe-T*Xe+F*$e+Lt*we-Wt*Ae+ie*be;return qe?(qe=1/qe,U[0]=(pe*Qe-Ce*Xe+vt*$e)*qe,U[1]=(Ce*we-qt*Qe-vt*Ae)*qe,U[2]=(qt*Xe-pe*we+vt*be)*qe,U[3]=(xt*Xe-he*Qe-ee*$e)*qe,U[4]=(te*Qe-xt*we+ee*Ae)*qe,U[5]=(he*we-te*Xe-ee*be)*qe,U[6]=(ae*ie-Y*Wt+I*Lt)*qe,U[7]=(Y*F-Tt*ie-I*T)*qe,U[8]=(Tt*Wt-ae*F+I*Yt)*qe,U):null}function Vt(U,it,te){return U[0]=2/it,U[1]=0,U[2]=0,U[3]=0,U[4]=-2/te,U[5]=0,U[6]=-1,U[7]=1,U[8]=1,U}function J(U){return"mat3("+U[0]+", "+U[1]+", "+U[2]+", "+U[3]+", "+U[4]+", "+U[5]+", "+U[6]+", "+U[7]+", "+U[8]+")"}function ce(U){return Math.hypot(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8])}function Gt(U,it,te){return U[0]=it[0]+te[0],U[1]=it[1]+te[1],U[2]=it[2]+te[2],U[3]=it[3]+te[3],U[4]=it[4]+te[4],U[5]=it[5]+te[5],U[6]=it[6]+te[6],U[7]=it[7]+te[7],U[8]=it[8]+te[8],U}function ke(U,it,te){return U[0]=it[0]-te[0],U[1]=it[1]-te[1],U[2]=it[2]-te[2],U[3]=it[3]-te[3],U[4]=it[4]-te[4],U[5]=it[5]-te[5],U[6]=it[6]-te[6],U[7]=it[7]-te[7],U[8]=it[8]-te[8],U}function Ie(U,it,te){return U[0]=it[0]*te,U[1]=it[1]*te,U[2]=it[2]*te,U[3]=it[3]*te,U[4]=it[4]*te,U[5]=it[5]*te,U[6]=it[6]*te,U[7]=it[7]*te,U[8]=it[8]*te,U}function B(U,it,te,he){return U[0]=it[0]+te[0]*he,U[1]=it[1]+te[1]*he,U[2]=it[2]+te[2]*he,U[3]=it[3]+te[3]*he,U[4]=it[4]+te[4]*he,U[5]=it[5]+te[5]*he,U[6]=it[6]+te[6]*he,U[7]=it[7]+te[7]*he,U[8]=it[8]+te[8]*he,U}function Ct(U,it){return U[0]===it[0]&&U[1]===it[1]&&U[2]===it[2]&&U[3]===it[3]&&U[4]===it[4]&&U[5]===it[5]&&U[6]===it[6]&&U[7]===it[7]&&U[8]===it[8]}function G(U,it){var te=U[0],he=U[1],xt=U[2],ee=U[3],qt=U[4],pe=U[5],Ce=U[6],vt=U[7],K=U[8],kt=it[0],le=it[1],ut=it[2],Tt=it[3],ae=it[4],Y=it[5],I=it[6],Yt=it[7],T=it[8];return Math.abs(te-kt)<=glMatrix.EPSILON*Math.max(1,Math.abs(te),Math.abs(kt))&&Math.abs(he-le)<=glMatrix.EPSILON*Math.max(1,Math.abs(he),Math.abs(le))&&Math.abs(xt-ut)<=glMatrix.EPSILON*Math.max(1,Math.abs(xt),Math.abs(ut))&&Math.abs(ee-Tt)<=glMatrix.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Tt))&&Math.abs(qt-ae)<=glMatrix.EPSILON*Math.max(1,Math.abs(qt),Math.abs(ae))&&Math.abs(pe-Y)<=glMatrix.EPSILON*Math.max(1,Math.abs(pe),Math.abs(Y))&&Math.abs(Ce-I)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(I))&&Math.abs(vt-Yt)<=glMatrix.EPSILON*Math.max(1,Math.abs(vt),Math.abs(Yt))&&Math.abs(K-T)<=glMatrix.EPSILON*Math.max(1,Math.abs(K),Math.abs(T))}var Mt=null,Et=null},85975:function(Me,de,k){"use strict";k.r(de),k.d(de,{add:function(){return kt},adjoint:function(){return re},clone:function(){return St},copy:function(){return Kt},create:function(){return st},determinant:function(){return q},equals:function(){return Y},exactEquals:function(){return ae},frob:function(){return K},fromQuat:function(){return Mt},fromQuat2:function(){return Gt},fromRotation:function(){return un},fromRotationTranslation:function(){return ce},fromRotationTranslationScale:function(){return Ct},fromRotationTranslationScaleOrigin:function(){return G},fromScaling:function(){return Ge},fromTranslation:function(){return De},fromValues:function(){return et},fromXRotation:function(){return Te},fromYRotation:function(){return Vt},fromZRotation:function(){return J},frustum:function(){return Et},getRotation:function(){return B},getScaling:function(){return Ie},getTranslation:function(){return ke},identity:function(){return Ut},invert:function(){return ft},lookAt:function(){return pe},mul:function(){return I},multiply:function(){return Q},multiplyScalar:function(){return ut},multiplyScalarAndAdd:function(){return Tt},ortho:function(){return ee},orthoNO:function(){return xt},orthoZO:function(){return qt},perspective:function(){return it},perspectiveFromFieldOfView:function(){return he},perspectiveNO:function(){return U},perspectiveZO:function(){return te},rotate:function(){return Ft},rotateX:function(){return Pt},rotateY:function(){return $t},rotateZ:function(){return Oe},scale:function(){return At},set:function(){return Qt},str:function(){return vt},sub:function(){return Yt},subtract:function(){return le},targetTo:function(){return Ce},translate:function(){return Dt},transpose:function(){return zt}});var yt=k(49685);function st(){var T=new yt.WT(16);return yt.WT!=Float32Array&&(T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=0,T[12]=0,T[13]=0,T[14]=0),T[0]=1,T[5]=1,T[10]=1,T[15]=1,T}function St(T){var F=new yt.WT(16);return F[0]=T[0],F[1]=T[1],F[2]=T[2],F[3]=T[3],F[4]=T[4],F[5]=T[5],F[6]=T[6],F[7]=T[7],F[8]=T[8],F[9]=T[9],F[10]=T[10],F[11]=T[11],F[12]=T[12],F[13]=T[13],F[14]=T[14],F[15]=T[15],F}function Kt(T,F){return T[0]=F[0],T[1]=F[1],T[2]=F[2],T[3]=F[3],T[4]=F[4],T[5]=F[5],T[6]=F[6],T[7]=F[7],T[8]=F[8],T[9]=F[9],T[10]=F[10],T[11]=F[11],T[12]=F[12],T[13]=F[13],T[14]=F[14],T[15]=F[15],T}function et(T,F,Lt,Wt,ie,be,Ae,we,$e,Xe,Qe,qe,Zt,ne,se,fe){var tt=new yt.WT(16);return tt[0]=T,tt[1]=F,tt[2]=Lt,tt[3]=Wt,tt[4]=ie,tt[5]=be,tt[6]=Ae,tt[7]=we,tt[8]=$e,tt[9]=Xe,tt[10]=Qe,tt[11]=qe,tt[12]=Zt,tt[13]=ne,tt[14]=se,tt[15]=fe,tt}function Qt(T,F,Lt,Wt,ie,be,Ae,we,$e,Xe,Qe,qe,Zt,ne,se,fe,tt){return T[0]=F,T[1]=Lt,T[2]=Wt,T[3]=ie,T[4]=be,T[5]=Ae,T[6]=we,T[7]=$e,T[8]=Xe,T[9]=Qe,T[10]=qe,T[11]=Zt,T[12]=ne,T[13]=se,T[14]=fe,T[15]=tt,T}function Ut(T){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function zt(T,F){if(T===F){var Lt=F[1],Wt=F[2],ie=F[3],be=F[6],Ae=F[7],we=F[11];T[1]=F[4],T[2]=F[8],T[3]=F[12],T[4]=Lt,T[6]=F[9],T[7]=F[13],T[8]=Wt,T[9]=be,T[11]=F[14],T[12]=ie,T[13]=Ae,T[14]=we}else T[0]=F[0],T[1]=F[4],T[2]=F[8],T[3]=F[12],T[4]=F[1],T[5]=F[5],T[6]=F[9],T[7]=F[13],T[8]=F[2],T[9]=F[6],T[10]=F[10],T[11]=F[14],T[12]=F[3],T[13]=F[7],T[14]=F[11],T[15]=F[15];return T}function ft(T,F){var Lt=F[0],Wt=F[1],ie=F[2],be=F[3],Ae=F[4],we=F[5],$e=F[6],Xe=F[7],Qe=F[8],qe=F[9],Zt=F[10],ne=F[11],se=F[12],fe=F[13],tt=F[14],D=F[15],V=Lt*we-Wt*Ae,nt=Lt*$e-ie*Ae,_t=Lt*Xe-be*Ae,Ot=Wt*$e-ie*we,ge=Wt*Xe-be*we,Ee=ie*Xe-be*$e,Be=Qe*fe-qe*se,je=Qe*tt-Zt*se,fn=Qe*D-ne*se,Re=qe*tt-Zt*fe,Ye=qe*D-ne*fe,cn=Zt*D-ne*tt,sn=V*cn-nt*Ye+_t*Re+Ot*fn-ge*je+Ee*Be;return sn?(sn=1/sn,T[0]=(we*cn-$e*Ye+Xe*Re)*sn,T[1]=(ie*Ye-Wt*cn-be*Re)*sn,T[2]=(fe*Ee-tt*ge+D*Ot)*sn,T[3]=(Zt*ge-qe*Ee-ne*Ot)*sn,T[4]=($e*fn-Ae*cn-Xe*je)*sn,T[5]=(Lt*cn-ie*fn+be*je)*sn,T[6]=(tt*_t-se*Ee-D*nt)*sn,T[7]=(Qe*Ee-Zt*_t+ne*nt)*sn,T[8]=(Ae*Ye-we*fn+Xe*Be)*sn,T[9]=(Wt*fn-Lt*Ye-be*Be)*sn,T[10]=(se*ge-fe*_t+D*V)*sn,T[11]=(qe*_t-Qe*ge-ne*V)*sn,T[12]=(we*je-Ae*Re-$e*Be)*sn,T[13]=(Lt*Re-Wt*je+ie*Be)*sn,T[14]=(fe*nt-se*Ot-tt*V)*sn,T[15]=(Qe*Ot-qe*nt+Zt*V)*sn,T):null}function re(T,F){var Lt=F[0],Wt=F[1],ie=F[2],be=F[3],Ae=F[4],we=F[5],$e=F[6],Xe=F[7],Qe=F[8],qe=F[9],Zt=F[10],ne=F[11],se=F[12],fe=F[13],tt=F[14],D=F[15];return T[0]=we*(Zt*D-ne*tt)-qe*($e*D-Xe*tt)+fe*($e*ne-Xe*Zt),T[1]=-(Wt*(Zt*D-ne*tt)-qe*(ie*D-be*tt)+fe*(ie*ne-be*Zt)),T[2]=Wt*($e*D-Xe*tt)-we*(ie*D-be*tt)+fe*(ie*Xe-be*$e),T[3]=-(Wt*($e*ne-Xe*Zt)-we*(ie*ne-be*Zt)+qe*(ie*Xe-be*$e)),T[4]=-(Ae*(Zt*D-ne*tt)-Qe*($e*D-Xe*tt)+se*($e*ne-Xe*Zt)),T[5]=Lt*(Zt*D-ne*tt)-Qe*(ie*D-be*tt)+se*(ie*ne-be*Zt),T[6]=-(Lt*($e*D-Xe*tt)-Ae*(ie*D-be*tt)+se*(ie*Xe-be*$e)),T[7]=Lt*($e*ne-Xe*Zt)-Ae*(ie*ne-be*Zt)+Qe*(ie*Xe-be*$e),T[8]=Ae*(qe*D-ne*fe)-Qe*(we*D-Xe*fe)+se*(we*ne-Xe*qe),T[9]=-(Lt*(qe*D-ne*fe)-Qe*(Wt*D-be*fe)+se*(Wt*ne-be*qe)),T[10]=Lt*(we*D-Xe*fe)-Ae*(Wt*D-be*fe)+se*(Wt*Xe-be*we),T[11]=-(Lt*(we*ne-Xe*qe)-Ae*(Wt*ne-be*qe)+Qe*(Wt*Xe-be*we)),T[12]=-(Ae*(qe*tt-Zt*fe)-Qe*(we*tt-$e*fe)+se*(we*Zt-$e*qe)),T[13]=Lt*(qe*tt-Zt*fe)-Qe*(Wt*tt-ie*fe)+se*(Wt*Zt-ie*qe),T[14]=-(Lt*(we*tt-$e*fe)-Ae*(Wt*tt-ie*fe)+se*(Wt*$e-ie*we)),T[15]=Lt*(we*Zt-$e*qe)-Ae*(Wt*Zt-ie*qe)+Qe*(Wt*$e-ie*we),T}function q(T){var F=T[0],Lt=T[1],Wt=T[2],ie=T[3],be=T[4],Ae=T[5],we=T[6],$e=T[7],Xe=T[8],Qe=T[9],qe=T[10],Zt=T[11],ne=T[12],se=T[13],fe=T[14],tt=T[15],D=F*Ae-Lt*be,V=F*we-Wt*be,nt=F*$e-ie*be,_t=Lt*we-Wt*Ae,Ot=Lt*$e-ie*Ae,ge=Wt*$e-ie*we,Ee=Xe*se-Qe*ne,Be=Xe*fe-qe*ne,je=Xe*tt-Zt*ne,fn=Qe*fe-qe*se,Re=Qe*tt-Zt*se,Ye=qe*tt-Zt*fe;return D*Ye-V*Re+nt*fn+_t*je-Ot*Be+ge*Ee}function Q(T,F,Lt){var Wt=F[0],ie=F[1],be=F[2],Ae=F[3],we=F[4],$e=F[5],Xe=F[6],Qe=F[7],qe=F[8],Zt=F[9],ne=F[10],se=F[11],fe=F[12],tt=F[13],D=F[14],V=F[15],nt=Lt[0],_t=Lt[1],Ot=Lt[2],ge=Lt[3];return T[0]=nt*Wt+_t*we+Ot*qe+ge*fe,T[1]=nt*ie+_t*$e+Ot*Zt+ge*tt,T[2]=nt*be+_t*Xe+Ot*ne+ge*D,T[3]=nt*Ae+_t*Qe+Ot*se+ge*V,nt=Lt[4],_t=Lt[5],Ot=Lt[6],ge=Lt[7],T[4]=nt*Wt+_t*we+Ot*qe+ge*fe,T[5]=nt*ie+_t*$e+Ot*Zt+ge*tt,T[6]=nt*be+_t*Xe+Ot*ne+ge*D,T[7]=nt*Ae+_t*Qe+Ot*se+ge*V,nt=Lt[8],_t=Lt[9],Ot=Lt[10],ge=Lt[11],T[8]=nt*Wt+_t*we+Ot*qe+ge*fe,T[9]=nt*ie+_t*$e+Ot*Zt+ge*tt,T[10]=nt*be+_t*Xe+Ot*ne+ge*D,T[11]=nt*Ae+_t*Qe+Ot*se+ge*V,nt=Lt[12],_t=Lt[13],Ot=Lt[14],ge=Lt[15],T[12]=nt*Wt+_t*we+Ot*qe+ge*fe,T[13]=nt*ie+_t*$e+Ot*Zt+ge*tt,T[14]=nt*be+_t*Xe+Ot*ne+ge*D,T[15]=nt*Ae+_t*Qe+Ot*se+ge*V,T}function Dt(T,F,Lt){var Wt=Lt[0],ie=Lt[1],be=Lt[2],Ae,we,$e,Xe,Qe,qe,Zt,ne,se,fe,tt,D;return F===T?(T[12]=F[0]*Wt+F[4]*ie+F[8]*be+F[12],T[13]=F[1]*Wt+F[5]*ie+F[9]*be+F[13],T[14]=F[2]*Wt+F[6]*ie+F[10]*be+F[14],T[15]=F[3]*Wt+F[7]*ie+F[11]*be+F[15]):(Ae=F[0],we=F[1],$e=F[2],Xe=F[3],Qe=F[4],qe=F[5],Zt=F[6],ne=F[7],se=F[8],fe=F[9],tt=F[10],D=F[11],T[0]=Ae,T[1]=we,T[2]=$e,T[3]=Xe,T[4]=Qe,T[5]=qe,T[6]=Zt,T[7]=ne,T[8]=se,T[9]=fe,T[10]=tt,T[11]=D,T[12]=Ae*Wt+Qe*ie+se*be+F[12],T[13]=we*Wt+qe*ie+fe*be+F[13],T[14]=$e*Wt+Zt*ie+tt*be+F[14],T[15]=Xe*Wt+ne*ie+D*be+F[15]),T}function At(T,F,Lt){var Wt=Lt[0],ie=Lt[1],be=Lt[2];return T[0]=F[0]*Wt,T[1]=F[1]*Wt,T[2]=F[2]*Wt,T[3]=F[3]*Wt,T[4]=F[4]*ie,T[5]=F[5]*ie,T[6]=F[6]*ie,T[7]=F[7]*ie,T[8]=F[8]*be,T[9]=F[9]*be,T[10]=F[10]*be,T[11]=F[11]*be,T[12]=F[12],T[13]=F[13],T[14]=F[14],T[15]=F[15],T}function Ft(T,F,Lt,Wt){var ie=Wt[0],be=Wt[1],Ae=Wt[2],we=Math.hypot(ie,be,Ae),$e,Xe,Qe,qe,Zt,ne,se,fe,tt,D,V,nt,_t,Ot,ge,Ee,Be,je,fn,Re,Ye,cn,sn,Mn;return we<yt.Ib?null:(we=1/we,ie*=we,be*=we,Ae*=we,$e=Math.sin(Lt),Xe=Math.cos(Lt),Qe=1-Xe,qe=F[0],Zt=F[1],ne=F[2],se=F[3],fe=F[4],tt=F[5],D=F[6],V=F[7],nt=F[8],_t=F[9],Ot=F[10],ge=F[11],Ee=ie*ie*Qe+Xe,Be=be*ie*Qe+Ae*$e,je=Ae*ie*Qe-be*$e,fn=ie*be*Qe-Ae*$e,Re=be*be*Qe+Xe,Ye=Ae*be*Qe+ie*$e,cn=ie*Ae*Qe+be*$e,sn=be*Ae*Qe-ie*$e,Mn=Ae*Ae*Qe+Xe,T[0]=qe*Ee+fe*Be+nt*je,T[1]=Zt*Ee+tt*Be+_t*je,T[2]=ne*Ee+D*Be+Ot*je,T[3]=se*Ee+V*Be+ge*je,T[4]=qe*fn+fe*Re+nt*Ye,T[5]=Zt*fn+tt*Re+_t*Ye,T[6]=ne*fn+D*Re+Ot*Ye,T[7]=se*fn+V*Re+ge*Ye,T[8]=qe*cn+fe*sn+nt*Mn,T[9]=Zt*cn+tt*sn+_t*Mn,T[10]=ne*cn+D*sn+Ot*Mn,T[11]=se*cn+V*sn+ge*Mn,F!==T&&(T[12]=F[12],T[13]=F[13],T[14]=F[14],T[15]=F[15]),T)}function Pt(T,F,Lt){var Wt=Math.sin(Lt),ie=Math.cos(Lt),be=F[4],Ae=F[5],we=F[6],$e=F[7],Xe=F[8],Qe=F[9],qe=F[10],Zt=F[11];return F!==T&&(T[0]=F[0],T[1]=F[1],T[2]=F[2],T[3]=F[3],T[12]=F[12],T[13]=F[13],T[14]=F[14],T[15]=F[15]),T[4]=be*ie+Xe*Wt,T[5]=Ae*ie+Qe*Wt,T[6]=we*ie+qe*Wt,T[7]=$e*ie+Zt*Wt,T[8]=Xe*ie-be*Wt,T[9]=Qe*ie-Ae*Wt,T[10]=qe*ie-we*Wt,T[11]=Zt*ie-$e*Wt,T}function $t(T,F,Lt){var Wt=Math.sin(Lt),ie=Math.cos(Lt),be=F[0],Ae=F[1],we=F[2],$e=F[3],Xe=F[8],Qe=F[9],qe=F[10],Zt=F[11];return F!==T&&(T[4]=F[4],T[5]=F[5],T[6]=F[6],T[7]=F[7],T[12]=F[12],T[13]=F[13],T[14]=F[14],T[15]=F[15]),T[0]=be*ie-Xe*Wt,T[1]=Ae*ie-Qe*Wt,T[2]=we*ie-qe*Wt,T[3]=$e*ie-Zt*Wt,T[8]=be*Wt+Xe*ie,T[9]=Ae*Wt+Qe*ie,T[10]=we*Wt+qe*ie,T[11]=$e*Wt+Zt*ie,T}function Oe(T,F,Lt){var Wt=Math.sin(Lt),ie=Math.cos(Lt),be=F[0],Ae=F[1],we=F[2],$e=F[3],Xe=F[4],Qe=F[5],qe=F[6],Zt=F[7];return F!==T&&(T[8]=F[8],T[9]=F[9],T[10]=F[10],T[11]=F[11],T[12]=F[12],T[13]=F[13],T[14]=F[14],T[15]=F[15]),T[0]=be*ie+Xe*Wt,T[1]=Ae*ie+Qe*Wt,T[2]=we*ie+qe*Wt,T[3]=$e*ie+Zt*Wt,T[4]=Xe*ie-be*Wt,T[5]=Qe*ie-Ae*Wt,T[6]=qe*ie-we*Wt,T[7]=Zt*ie-$e*Wt,T}function De(T,F){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=F[0],T[13]=F[1],T[14]=F[2],T[15]=1,T}function Ge(T,F){return T[0]=F[0],T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=F[1],T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=F[2],T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function un(T,F,Lt){var Wt=Lt[0],ie=Lt[1],be=Lt[2],Ae=Math.hypot(Wt,ie,be),we,$e,Xe;return Ae<yt.Ib?null:(Ae=1/Ae,Wt*=Ae,ie*=Ae,be*=Ae,we=Math.sin(F),$e=Math.cos(F),Xe=1-$e,T[0]=Wt*Wt*Xe+$e,T[1]=ie*Wt*Xe+be*we,T[2]=be*Wt*Xe-ie*we,T[3]=0,T[4]=Wt*ie*Xe-be*we,T[5]=ie*ie*Xe+$e,T[6]=be*ie*Xe+Wt*we,T[7]=0,T[8]=Wt*be*Xe+ie*we,T[9]=ie*be*Xe-Wt*we,T[10]=be*be*Xe+$e,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T)}function Te(T,F){var Lt=Math.sin(F),Wt=Math.cos(F);return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=Wt,T[6]=Lt,T[7]=0,T[8]=0,T[9]=-Lt,T[10]=Wt,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function Vt(T,F){var Lt=Math.sin(F),Wt=Math.cos(F);return T[0]=Wt,T[1]=0,T[2]=-Lt,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=Lt,T[9]=0,T[10]=Wt,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function J(T,F){var Lt=Math.sin(F),Wt=Math.cos(F);return T[0]=Wt,T[1]=Lt,T[2]=0,T[3]=0,T[4]=-Lt,T[5]=Wt,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function ce(T,F,Lt){var Wt=F[0],ie=F[1],be=F[2],Ae=F[3],we=Wt+Wt,$e=ie+ie,Xe=be+be,Qe=Wt*we,qe=Wt*$e,Zt=Wt*Xe,ne=ie*$e,se=ie*Xe,fe=be*Xe,tt=Ae*we,D=Ae*$e,V=Ae*Xe;return T[0]=1-(ne+fe),T[1]=qe+V,T[2]=Zt-D,T[3]=0,T[4]=qe-V,T[5]=1-(Qe+fe),T[6]=se+tt,T[7]=0,T[8]=Zt+D,T[9]=se-tt,T[10]=1-(Qe+ne),T[11]=0,T[12]=Lt[0],T[13]=Lt[1],T[14]=Lt[2],T[15]=1,T}function Gt(T,F){var Lt=new yt.WT(3),Wt=-F[0],ie=-F[1],be=-F[2],Ae=F[3],we=F[4],$e=F[5],Xe=F[6],Qe=F[7],qe=Wt*Wt+ie*ie+be*be+Ae*Ae;return qe>0?(Lt[0]=(we*Ae+Qe*Wt+$e*be-Xe*ie)*2/qe,Lt[1]=($e*Ae+Qe*ie+Xe*Wt-we*be)*2/qe,Lt[2]=(Xe*Ae+Qe*be+we*ie-$e*Wt)*2/qe):(Lt[0]=(we*Ae+Qe*Wt+$e*be-Xe*ie)*2,Lt[1]=($e*Ae+Qe*ie+Xe*Wt-we*be)*2,Lt[2]=(Xe*Ae+Qe*be+we*ie-$e*Wt)*2),ce(T,F,Lt),T}function ke(T,F){return T[0]=F[12],T[1]=F[13],T[2]=F[14],T}function Ie(T,F){var Lt=F[0],Wt=F[1],ie=F[2],be=F[4],Ae=F[5],we=F[6],$e=F[8],Xe=F[9],Qe=F[10];return T[0]=Math.hypot(Lt,Wt,ie),T[1]=Math.hypot(be,Ae,we),T[2]=Math.hypot($e,Xe,Qe),T}function B(T,F){var Lt=new yt.WT(3);Ie(Lt,F);var Wt=1/Lt[0],ie=1/Lt[1],be=1/Lt[2],Ae=F[0]*Wt,we=F[1]*ie,$e=F[2]*be,Xe=F[4]*Wt,Qe=F[5]*ie,qe=F[6]*be,Zt=F[8]*Wt,ne=F[9]*ie,se=F[10]*be,fe=Ae+Qe+se,tt=0;return fe>0?(tt=Math.sqrt(fe+1)*2,T[3]=.25*tt,T[0]=(qe-ne)/tt,T[1]=(Zt-$e)/tt,T[2]=(we-Xe)/tt):Ae>Qe&&Ae>se?(tt=Math.sqrt(1+Ae-Qe-se)*2,T[3]=(qe-ne)/tt,T[0]=.25*tt,T[1]=(we+Xe)/tt,T[2]=(Zt+$e)/tt):Qe>se?(tt=Math.sqrt(1+Qe-Ae-se)*2,T[3]=(Zt-$e)/tt,T[0]=(we+Xe)/tt,T[1]=.25*tt,T[2]=(qe+ne)/tt):(tt=Math.sqrt(1+se-Ae-Qe)*2,T[3]=(we-Xe)/tt,T[0]=(Zt+$e)/tt,T[1]=(qe+ne)/tt,T[2]=.25*tt),T}function Ct(T,F,Lt,Wt){var ie=F[0],be=F[1],Ae=F[2],we=F[3],$e=ie+ie,Xe=be+be,Qe=Ae+Ae,qe=ie*$e,Zt=ie*Xe,ne=ie*Qe,se=be*Xe,fe=be*Qe,tt=Ae*Qe,D=we*$e,V=we*Xe,nt=we*Qe,_t=Wt[0],Ot=Wt[1],ge=Wt[2];return T[0]=(1-(se+tt))*_t,T[1]=(Zt+nt)*_t,T[2]=(ne-V)*_t,T[3]=0,T[4]=(Zt-nt)*Ot,T[5]=(1-(qe+tt))*Ot,T[6]=(fe+D)*Ot,T[7]=0,T[8]=(ne+V)*ge,T[9]=(fe-D)*ge,T[10]=(1-(qe+se))*ge,T[11]=0,T[12]=Lt[0],T[13]=Lt[1],T[14]=Lt[2],T[15]=1,T}function G(T,F,Lt,Wt,ie){var be=F[0],Ae=F[1],we=F[2],$e=F[3],Xe=be+be,Qe=Ae+Ae,qe=we+we,Zt=be*Xe,ne=be*Qe,se=be*qe,fe=Ae*Qe,tt=Ae*qe,D=we*qe,V=$e*Xe,nt=$e*Qe,_t=$e*qe,Ot=Wt[0],ge=Wt[1],Ee=Wt[2],Be=ie[0],je=ie[1],fn=ie[2],Re=(1-(fe+D))*Ot,Ye=(ne+_t)*Ot,cn=(se-nt)*Ot,sn=(ne-_t)*ge,Mn=(1-(Zt+D))*ge,Vn=(tt+V)*ge,Un=(se+nt)*Ee,Jn=(tt-V)*Ee,hr=(1-(Zt+fe))*Ee;return T[0]=Re,T[1]=Ye,T[2]=cn,T[3]=0,T[4]=sn,T[5]=Mn,T[6]=Vn,T[7]=0,T[8]=Un,T[9]=Jn,T[10]=hr,T[11]=0,T[12]=Lt[0]+Be-(Re*Be+sn*je+Un*fn),T[13]=Lt[1]+je-(Ye*Be+Mn*je+Jn*fn),T[14]=Lt[2]+fn-(cn*Be+Vn*je+hr*fn),T[15]=1,T}function Mt(T,F){var Lt=F[0],Wt=F[1],ie=F[2],be=F[3],Ae=Lt+Lt,we=Wt+Wt,$e=ie+ie,Xe=Lt*Ae,Qe=Wt*Ae,qe=Wt*we,Zt=ie*Ae,ne=ie*we,se=ie*$e,fe=be*Ae,tt=be*we,D=be*$e;return T[0]=1-qe-se,T[1]=Qe+D,T[2]=Zt-tt,T[3]=0,T[4]=Qe-D,T[5]=1-Xe-se,T[6]=ne+fe,T[7]=0,T[8]=Zt+tt,T[9]=ne-fe,T[10]=1-Xe-qe,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function Et(T,F,Lt,Wt,ie,be,Ae){var we=1/(Lt-F),$e=1/(ie-Wt),Xe=1/(be-Ae);return T[0]=be*2*we,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=be*2*$e,T[6]=0,T[7]=0,T[8]=(Lt+F)*we,T[9]=(ie+Wt)*$e,T[10]=(Ae+be)*Xe,T[11]=-1,T[12]=0,T[13]=0,T[14]=Ae*be*2*Xe,T[15]=0,T}function U(T,F,Lt,Wt,ie){var be=1/Math.tan(F/2),Ae;return T[0]=be/Lt,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=be,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,ie!=null&&ie!==1/0?(Ae=1/(Wt-ie),T[10]=(ie+Wt)*Ae,T[14]=2*ie*Wt*Ae):(T[10]=-1,T[14]=-2*Wt),T}var it=U;function te(T,F,Lt,Wt,ie){var be=1/Math.tan(F/2),Ae;return T[0]=be/Lt,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=be,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,ie!=null&&ie!==1/0?(Ae=1/(Wt-ie),T[10]=ie*Ae,T[14]=ie*Wt*Ae):(T[10]=-1,T[14]=-Wt),T}function he(T,F,Lt,Wt){var ie=Math.tan(F.upDegrees*Math.PI/180),be=Math.tan(F.downDegrees*Math.PI/180),Ae=Math.tan(F.leftDegrees*Math.PI/180),we=Math.tan(F.rightDegrees*Math.PI/180),$e=2/(Ae+we),Xe=2/(ie+be);return T[0]=$e,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=Xe,T[6]=0,T[7]=0,T[8]=-((Ae-we)*$e*.5),T[9]=(ie-be)*Xe*.5,T[10]=Wt/(Lt-Wt),T[11]=-1,T[12]=0,T[13]=0,T[14]=Wt*Lt/(Lt-Wt),T[15]=0,T}function xt(T,F,Lt,Wt,ie,be,Ae){var we=1/(F-Lt),$e=1/(Wt-ie),Xe=1/(be-Ae);return T[0]=-2*we,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*$e,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=2*Xe,T[11]=0,T[12]=(F+Lt)*we,T[13]=(ie+Wt)*$e,T[14]=(Ae+be)*Xe,T[15]=1,T}var ee=xt;function qt(T,F,Lt,Wt,ie,be,Ae){var we=1/(F-Lt),$e=1/(Wt-ie),Xe=1/(be-Ae);return T[0]=-2*we,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*$e,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=Xe,T[11]=0,T[12]=(F+Lt)*we,T[13]=(ie+Wt)*$e,T[14]=be*Xe,T[15]=1,T}function pe(T,F,Lt,Wt){var ie,be,Ae,we,$e,Xe,Qe,qe,Zt,ne,se=F[0],fe=F[1],tt=F[2],D=Wt[0],V=Wt[1],nt=Wt[2],_t=Lt[0],Ot=Lt[1],ge=Lt[2];return Math.abs(se-_t)<yt.Ib&&Math.abs(fe-Ot)<yt.Ib&&Math.abs(tt-ge)<yt.Ib?Ut(T):(Qe=se-_t,qe=fe-Ot,Zt=tt-ge,ne=1/Math.hypot(Qe,qe,Zt),Qe*=ne,qe*=ne,Zt*=ne,ie=V*Zt-nt*qe,be=nt*Qe-D*Zt,Ae=D*qe-V*Qe,ne=Math.hypot(ie,be,Ae),ne?(ne=1/ne,ie*=ne,be*=ne,Ae*=ne):(ie=0,be=0,Ae=0),we=qe*Ae-Zt*be,$e=Zt*ie-Qe*Ae,Xe=Qe*be-qe*ie,ne=Math.hypot(we,$e,Xe),ne?(ne=1/ne,we*=ne,$e*=ne,Xe*=ne):(we=0,$e=0,Xe=0),T[0]=ie,T[1]=we,T[2]=Qe,T[3]=0,T[4]=be,T[5]=$e,T[6]=qe,T[7]=0,T[8]=Ae,T[9]=Xe,T[10]=Zt,T[11]=0,T[12]=-(ie*se+be*fe+Ae*tt),T[13]=-(we*se+$e*fe+Xe*tt),T[14]=-(Qe*se+qe*fe+Zt*tt),T[15]=1,T)}function Ce(T,F,Lt,Wt){var ie=F[0],be=F[1],Ae=F[2],we=Wt[0],$e=Wt[1],Xe=Wt[2],Qe=ie-Lt[0],qe=be-Lt[1],Zt=Ae-Lt[2],ne=Qe*Qe+qe*qe+Zt*Zt;ne>0&&(ne=1/Math.sqrt(ne),Qe*=ne,qe*=ne,Zt*=ne);var se=$e*Zt-Xe*qe,fe=Xe*Qe-we*Zt,tt=we*qe-$e*Qe;return ne=se*se+fe*fe+tt*tt,ne>0&&(ne=1/Math.sqrt(ne),se*=ne,fe*=ne,tt*=ne),T[0]=se,T[1]=fe,T[2]=tt,T[3]=0,T[4]=qe*tt-Zt*fe,T[5]=Zt*se-Qe*tt,T[6]=Qe*fe-qe*se,T[7]=0,T[8]=Qe,T[9]=qe,T[10]=Zt,T[11]=0,T[12]=ie,T[13]=be,T[14]=Ae,T[15]=1,T}function vt(T){return"mat4("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+", "+T[4]+", "+T[5]+", "+T[6]+", "+T[7]+", "+T[8]+", "+T[9]+", "+T[10]+", "+T[11]+", "+T[12]+", "+T[13]+", "+T[14]+", "+T[15]+")"}function K(T){return Math.hypot(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8],T[9],T[10],T[11],T[12],T[13],T[14],T[15])}function kt(T,F,Lt){return T[0]=F[0]+Lt[0],T[1]=F[1]+Lt[1],T[2]=F[2]+Lt[2],T[3]=F[3]+Lt[3],T[4]=F[4]+Lt[4],T[5]=F[5]+Lt[5],T[6]=F[6]+Lt[6],T[7]=F[7]+Lt[7],T[8]=F[8]+Lt[8],T[9]=F[9]+Lt[9],T[10]=F[10]+Lt[10],T[11]=F[11]+Lt[11],T[12]=F[12]+Lt[12],T[13]=F[13]+Lt[13],T[14]=F[14]+Lt[14],T[15]=F[15]+Lt[15],T}function le(T,F,Lt){return T[0]=F[0]-Lt[0],T[1]=F[1]-Lt[1],T[2]=F[2]-Lt[2],T[3]=F[3]-Lt[3],T[4]=F[4]-Lt[4],T[5]=F[5]-Lt[5],T[6]=F[6]-Lt[6],T[7]=F[7]-Lt[7],T[8]=F[8]-Lt[8],T[9]=F[9]-Lt[9],T[10]=F[10]-Lt[10],T[11]=F[11]-Lt[11],T[12]=F[12]-Lt[12],T[13]=F[13]-Lt[13],T[14]=F[14]-Lt[14],T[15]=F[15]-Lt[15],T}function ut(T,F,Lt){return T[0]=F[0]*Lt,T[1]=F[1]*Lt,T[2]=F[2]*Lt,T[3]=F[3]*Lt,T[4]=F[4]*Lt,T[5]=F[5]*Lt,T[6]=F[6]*Lt,T[7]=F[7]*Lt,T[8]=F[8]*Lt,T[9]=F[9]*Lt,T[10]=F[10]*Lt,T[11]=F[11]*Lt,T[12]=F[12]*Lt,T[13]=F[13]*Lt,T[14]=F[14]*Lt,T[15]=F[15]*Lt,T}function Tt(T,F,Lt,Wt){return T[0]=F[0]+Lt[0]*Wt,T[1]=F[1]+Lt[1]*Wt,T[2]=F[2]+Lt[2]*Wt,T[3]=F[3]+Lt[3]*Wt,T[4]=F[4]+Lt[4]*Wt,T[5]=F[5]+Lt[5]*Wt,T[6]=F[6]+Lt[6]*Wt,T[7]=F[7]+Lt[7]*Wt,T[8]=F[8]+Lt[8]*Wt,T[9]=F[9]+Lt[9]*Wt,T[10]=F[10]+Lt[10]*Wt,T[11]=F[11]+Lt[11]*Wt,T[12]=F[12]+Lt[12]*Wt,T[13]=F[13]+Lt[13]*Wt,T[14]=F[14]+Lt[14]*Wt,T[15]=F[15]+Lt[15]*Wt,T}function ae(T,F){return T[0]===F[0]&&T[1]===F[1]&&T[2]===F[2]&&T[3]===F[3]&&T[4]===F[4]&&T[5]===F[5]&&T[6]===F[6]&&T[7]===F[7]&&T[8]===F[8]&&T[9]===F[9]&&T[10]===F[10]&&T[11]===F[11]&&T[12]===F[12]&&T[13]===F[13]&&T[14]===F[14]&&T[15]===F[15]}function Y(T,F){var Lt=T[0],Wt=T[1],ie=T[2],be=T[3],Ae=T[4],we=T[5],$e=T[6],Xe=T[7],Qe=T[8],qe=T[9],Zt=T[10],ne=T[11],se=T[12],fe=T[13],tt=T[14],D=T[15],V=F[0],nt=F[1],_t=F[2],Ot=F[3],ge=F[4],Ee=F[5],Be=F[6],je=F[7],fn=F[8],Re=F[9],Ye=F[10],cn=F[11],sn=F[12],Mn=F[13],Vn=F[14],Un=F[15];return Math.abs(Lt-V)<=yt.Ib*Math.max(1,Math.abs(Lt),Math.abs(V))&&Math.abs(Wt-nt)<=yt.Ib*Math.max(1,Math.abs(Wt),Math.abs(nt))&&Math.abs(ie-_t)<=yt.Ib*Math.max(1,Math.abs(ie),Math.abs(_t))&&Math.abs(be-Ot)<=yt.Ib*Math.max(1,Math.abs(be),Math.abs(Ot))&&Math.abs(Ae-ge)<=yt.Ib*Math.max(1,Math.abs(Ae),Math.abs(ge))&&Math.abs(we-Ee)<=yt.Ib*Math.max(1,Math.abs(we),Math.abs(Ee))&&Math.abs($e-Be)<=yt.Ib*Math.max(1,Math.abs($e),Math.abs(Be))&&Math.abs(Xe-je)<=yt.Ib*Math.max(1,Math.abs(Xe),Math.abs(je))&&Math.abs(Qe-fn)<=yt.Ib*Math.max(1,Math.abs(Qe),Math.abs(fn))&&Math.abs(qe-Re)<=yt.Ib*Math.max(1,Math.abs(qe),Math.abs(Re))&&Math.abs(Zt-Ye)<=yt.Ib*Math.max(1,Math.abs(Zt),Math.abs(Ye))&&Math.abs(ne-cn)<=yt.Ib*Math.max(1,Math.abs(ne),Math.abs(cn))&&Math.abs(se-sn)<=yt.Ib*Math.max(1,Math.abs(se),Math.abs(sn))&&Math.abs(fe-Mn)<=yt.Ib*Math.max(1,Math.abs(fe),Math.abs(Mn))&&Math.abs(tt-Vn)<=yt.Ib*Math.max(1,Math.abs(tt),Math.abs(Vn))&&Math.abs(D-Un)<=yt.Ib*Math.max(1,Math.abs(D),Math.abs(Un))}var I=Q,Yt=le},32945:function(Me,de,k){"use strict";k.d(de,{Fv:function(){return xt},JG:function(){return ke},Jp:function(){return re},Su:function(){return Vt},U_:function(){return Ge},Ue:function(){return et},al:function(){return Gt},dC:function(){return Ct},t8:function(){return Ie},yY:function(){return Ut}});var yt=k(49685),st=k(35600),St=k(77160),Kt=k(98333);function et(){var K=new yt.WT(4);return yt.WT!=Float32Array&&(K[0]=0,K[1]=0,K[2]=0),K[3]=1,K}function Qt(K){return K[0]=0,K[1]=0,K[2]=0,K[3]=1,K}function Ut(K,kt,le){le=le*.5;var ut=Math.sin(le);return K[0]=ut*kt[0],K[1]=ut*kt[1],K[2]=ut*kt[2],K[3]=Math.cos(le),K}function zt(K,kt){var le=Math.acos(kt[3])*2,ut=Math.sin(le/2);return ut>glMatrix.EPSILON?(K[0]=kt[0]/ut,K[1]=kt[1]/ut,K[2]=kt[2]/ut):(K[0]=1,K[1]=0,K[2]=0),le}function ft(K,kt){var le=Mt(K,kt);return Math.acos(2*le*le-1)}function re(K,kt,le){var ut=kt[0],Tt=kt[1],ae=kt[2],Y=kt[3],I=le[0],Yt=le[1],T=le[2],F=le[3];return K[0]=ut*F+Y*I+Tt*T-ae*Yt,K[1]=Tt*F+Y*Yt+ae*I-ut*T,K[2]=ae*F+Y*T+ut*Yt-Tt*I,K[3]=Y*F-ut*I-Tt*Yt-ae*T,K}function q(K,kt,le){le*=.5;var ut=kt[0],Tt=kt[1],ae=kt[2],Y=kt[3],I=Math.sin(le),Yt=Math.cos(le);return K[0]=ut*Yt+Y*I,K[1]=Tt*Yt+ae*I,K[2]=ae*Yt-Tt*I,K[3]=Y*Yt-ut*I,K}function Q(K,kt,le){le*=.5;var ut=kt[0],Tt=kt[1],ae=kt[2],Y=kt[3],I=Math.sin(le),Yt=Math.cos(le);return K[0]=ut*Yt-ae*I,K[1]=Tt*Yt+Y*I,K[2]=ae*Yt+ut*I,K[3]=Y*Yt-Tt*I,K}function Dt(K,kt,le){le*=.5;var ut=kt[0],Tt=kt[1],ae=kt[2],Y=kt[3],I=Math.sin(le),Yt=Math.cos(le);return K[0]=ut*Yt+Tt*I,K[1]=Tt*Yt-ut*I,K[2]=ae*Yt+Y*I,K[3]=Y*Yt-ae*I,K}function At(K,kt){var le=kt[0],ut=kt[1],Tt=kt[2];return K[0]=le,K[1]=ut,K[2]=Tt,K[3]=Math.sqrt(Math.abs(1-le*le-ut*ut-Tt*Tt)),K}function Ft(K,kt){var le=kt[0],ut=kt[1],Tt=kt[2],ae=kt[3],Y=Math.sqrt(le*le+ut*ut+Tt*Tt),I=Math.exp(ae),Yt=Y>0?I*Math.sin(Y)/Y:0;return K[0]=le*Yt,K[1]=ut*Yt,K[2]=Tt*Yt,K[3]=I*Math.cos(Y),K}function Pt(K,kt){var le=kt[0],ut=kt[1],Tt=kt[2],ae=kt[3],Y=Math.sqrt(le*le+ut*ut+Tt*Tt),I=Y>0?Math.atan2(Y,ae)/Y:0;return K[0]=le*I,K[1]=ut*I,K[2]=Tt*I,K[3]=.5*Math.log(le*le+ut*ut+Tt*Tt+ae*ae),K}function $t(K,kt,le){return Pt(K,kt),G(K,K,le),Ft(K,K),K}function Oe(K,kt,le,ut){var Tt=kt[0],ae=kt[1],Y=kt[2],I=kt[3],Yt=le[0],T=le[1],F=le[2],Lt=le[3],Wt,ie,be,Ae,we;return ie=Tt*Yt+ae*T+Y*F+I*Lt,ie<0&&(ie=-ie,Yt=-Yt,T=-T,F=-F,Lt=-Lt),1-ie>yt.Ib?(Wt=Math.acos(ie),be=Math.sin(Wt),Ae=Math.sin((1-ut)*Wt)/be,we=Math.sin(ut*Wt)/be):(Ae=1-ut,we=ut),K[0]=Ae*Tt+we*Yt,K[1]=Ae*ae+we*T,K[2]=Ae*Y+we*F,K[3]=Ae*I+we*Lt,K}function De(K){var kt=glMatrix.RANDOM(),le=glMatrix.RANDOM(),ut=glMatrix.RANDOM(),Tt=Math.sqrt(1-kt),ae=Math.sqrt(kt);return K[0]=Tt*Math.sin(2*Math.PI*le),K[1]=Tt*Math.cos(2*Math.PI*le),K[2]=ae*Math.sin(2*Math.PI*ut),K[3]=ae*Math.cos(2*Math.PI*ut),K}function Ge(K,kt){var le=kt[0],ut=kt[1],Tt=kt[2],ae=kt[3],Y=le*le+ut*ut+Tt*Tt+ae*ae,I=Y?1/Y:0;return K[0]=-le*I,K[1]=-ut*I,K[2]=-Tt*I,K[3]=ae*I,K}function un(K,kt){return K[0]=-kt[0],K[1]=-kt[1],K[2]=-kt[2],K[3]=kt[3],K}function Te(K,kt){var le=kt[0]+kt[4]+kt[8],ut;if(le>0)ut=Math.sqrt(le+1),K[3]=.5*ut,ut=.5/ut,K[0]=(kt[5]-kt[7])*ut,K[1]=(kt[6]-kt[2])*ut,K[2]=(kt[1]-kt[3])*ut;else{var Tt=0;kt[4]>kt[0]&&(Tt=1),kt[8]>kt[Tt*3+Tt]&&(Tt=2);var ae=(Tt+1)%3,Y=(Tt+2)%3;ut=Math.sqrt(kt[Tt*3+Tt]-kt[ae*3+ae]-kt[Y*3+Y]+1),K[Tt]=.5*ut,ut=.5/ut,K[3]=(kt[ae*3+Y]-kt[Y*3+ae])*ut,K[ae]=(kt[ae*3+Tt]+kt[Tt*3+ae])*ut,K[Y]=(kt[Y*3+Tt]+kt[Tt*3+Y])*ut}return K}function Vt(K,kt,le,ut){var Tt=.5*Math.PI/180;kt*=Tt,le*=Tt,ut*=Tt;var ae=Math.sin(kt),Y=Math.cos(kt),I=Math.sin(le),Yt=Math.cos(le),T=Math.sin(ut),F=Math.cos(ut);return K[0]=ae*Yt*F-Y*I*T,K[1]=Y*I*F+ae*Yt*T,K[2]=Y*Yt*T-ae*I*F,K[3]=Y*Yt*F+ae*I*T,K}function J(K){return"quat("+K[0]+", "+K[1]+", "+K[2]+", "+K[3]+")"}var ce=Kt.d9,Gt=Kt.al,ke=Kt.JG,Ie=Kt.t8,B=Kt.IH,Ct=re,G=Kt.bA,Mt=Kt.AK,Et=Kt.t7,U=Kt.kE,it=null,te=Kt.we,he=null,xt=Kt.Fv,ee=Kt.I6,qt=Kt.fS,pe=function(){var K=St.Ue(),kt=St.al(1,0,0),le=St.al(0,1,0);return function(ut,Tt,ae){var Y=St.AK(Tt,ae);return Y<-.999999?(St.kC(K,kt,Tt),St.Zh(K)<1e-6&&St.kC(K,le,Tt),St.Fv(K,K),Ut(ut,K,Math.PI),ut):Y>.999999?(ut[0]=0,ut[1]=0,ut[2]=0,ut[3]=1,ut):(St.kC(K,Tt,ae),ut[0]=K[0],ut[1]=K[1],ut[2]=K[2],ut[3]=1+Y,xt(ut,ut))}}(),Ce=function(){var K=et(),kt=et();return function(le,ut,Tt,ae,Y,I){return Oe(K,ut,Y,I),Oe(kt,Tt,ae,I),Oe(le,K,kt,2*I*(1-I)),le}}(),vt=function(){var K=st.Ue();return function(kt,le,ut,Tt){return K[0]=ut[0],K[3]=ut[1],K[6]=ut[2],K[1]=Tt[0],K[4]=Tt[1],K[7]=Tt[2],K[2]=-le[0],K[5]=-le[1],K[8]=-le[2],xt(kt,Te(kt,K))}}()},31437:function(Me,de,k){"use strict";k.d(de,{$X:function(){return zt},AK:function(){return ce},Fv:function(){return J},I6:function(){return he},IH:function(){return Ut},JG:function(){return et},Ue:function(){return st},al:function(){return Kt},lu:function(){return qt},t7:function(){return ke},t8:function(){return Qt},tk:function(){return Te}});var yt=k(49685);function st(){var ut=new yt.WT(2);return yt.WT!=Float32Array&&(ut[0]=0,ut[1]=0),ut}function St(ut){var Tt=new glMatrix.ARRAY_TYPE(2);return Tt[0]=ut[0],Tt[1]=ut[1],Tt}function Kt(ut,Tt){var ae=new yt.WT(2);return ae[0]=ut,ae[1]=Tt,ae}function et(ut,Tt){return ut[0]=Tt[0],ut[1]=Tt[1],ut}function Qt(ut,Tt,ae){return ut[0]=Tt,ut[1]=ae,ut}function Ut(ut,Tt,ae){return ut[0]=Tt[0]+ae[0],ut[1]=Tt[1]+ae[1],ut}function zt(ut,Tt,ae){return ut[0]=Tt[0]-ae[0],ut[1]=Tt[1]-ae[1],ut}function ft(ut,Tt,ae){return ut[0]=Tt[0]*ae[0],ut[1]=Tt[1]*ae[1],ut}function re(ut,Tt,ae){return ut[0]=Tt[0]/ae[0],ut[1]=Tt[1]/ae[1],ut}function q(ut,Tt){return ut[0]=Math.ceil(Tt[0]),ut[1]=Math.ceil(Tt[1]),ut}function Q(ut,Tt){return ut[0]=Math.floor(Tt[0]),ut[1]=Math.floor(Tt[1]),ut}function Dt(ut,Tt,ae){return ut[0]=Math.min(Tt[0],ae[0]),ut[1]=Math.min(Tt[1],ae[1]),ut}function At(ut,Tt,ae){return ut[0]=Math.max(Tt[0],ae[0]),ut[1]=Math.max(Tt[1],ae[1]),ut}function Ft(ut,Tt){return ut[0]=Math.round(Tt[0]),ut[1]=Math.round(Tt[1]),ut}function Pt(ut,Tt,ae){return ut[0]=Tt[0]*ae,ut[1]=Tt[1]*ae,ut}function $t(ut,Tt,ae,Y){return ut[0]=Tt[0]+ae[0]*Y,ut[1]=Tt[1]+ae[1]*Y,ut}function Oe(ut,Tt){var ae=Tt[0]-ut[0],Y=Tt[1]-ut[1];return Math.hypot(ae,Y)}function De(ut,Tt){var ae=Tt[0]-ut[0],Y=Tt[1]-ut[1];return ae*ae+Y*Y}function Ge(ut){var Tt=ut[0],ae=ut[1];return Math.hypot(Tt,ae)}function un(ut){var Tt=ut[0],ae=ut[1];return Tt*Tt+ae*ae}function Te(ut,Tt){return ut[0]=-Tt[0],ut[1]=-Tt[1],ut}function Vt(ut,Tt){return ut[0]=1/Tt[0],ut[1]=1/Tt[1],ut}function J(ut,Tt){var ae=Tt[0],Y=Tt[1],I=ae*ae+Y*Y;return I>0&&(I=1/Math.sqrt(I)),ut[0]=Tt[0]*I,ut[1]=Tt[1]*I,ut}function ce(ut,Tt){return ut[0]*Tt[0]+ut[1]*Tt[1]}function Gt(ut,Tt,ae){var Y=Tt[0]*ae[1]-Tt[1]*ae[0];return ut[0]=ut[1]=0,ut[2]=Y,ut}function ke(ut,Tt,ae,Y){var I=Tt[0],Yt=Tt[1];return ut[0]=I+Y*(ae[0]-I),ut[1]=Yt+Y*(ae[1]-Yt),ut}function Ie(ut,Tt){Tt=Tt||1;var ae=glMatrix.RANDOM()*2*Math.PI;return ut[0]=Math.cos(ae)*Tt,ut[1]=Math.sin(ae)*Tt,ut}function B(ut,Tt,ae){var Y=Tt[0],I=Tt[1];return ut[0]=ae[0]*Y+ae[2]*I,ut[1]=ae[1]*Y+ae[3]*I,ut}function Ct(ut,Tt,ae){var Y=Tt[0],I=Tt[1];return ut[0]=ae[0]*Y+ae[2]*I+ae[4],ut[1]=ae[1]*Y+ae[3]*I+ae[5],ut}function G(ut,Tt,ae){var Y=Tt[0],I=Tt[1];return ut[0]=ae[0]*Y+ae[3]*I+ae[6],ut[1]=ae[1]*Y+ae[4]*I+ae[7],ut}function Mt(ut,Tt,ae){var Y=Tt[0],I=Tt[1];return ut[0]=ae[0]*Y+ae[4]*I+ae[12],ut[1]=ae[1]*Y+ae[5]*I+ae[13],ut}function Et(ut,Tt,ae,Y){var I=Tt[0]-ae[0],Yt=Tt[1]-ae[1],T=Math.sin(Y),F=Math.cos(Y);return ut[0]=I*F-Yt*T+ae[0],ut[1]=I*T+Yt*F+ae[1],ut}function U(ut,Tt){var ae=ut[0],Y=ut[1],I=Tt[0],Yt=Tt[1],T=Math.sqrt(ae*ae+Y*Y)*Math.sqrt(I*I+Yt*Yt),F=T&&(ae*I+Y*Yt)/T;return Math.acos(Math.min(Math.max(F,-1),1))}function it(ut){return ut[0]=0,ut[1]=0,ut}function te(ut){return"vec2("+ut[0]+", "+ut[1]+")"}function he(ut,Tt){return ut[0]===Tt[0]&&ut[1]===Tt[1]}function xt(ut,Tt){var ae=ut[0],Y=ut[1],I=Tt[0],Yt=Tt[1];return Math.abs(ae-I)<=glMatrix.EPSILON*Math.max(1,Math.abs(ae),Math.abs(I))&&Math.abs(Y-Yt)<=glMatrix.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Yt))}var ee=null,qt=zt,pe=null,Ce=null,vt=null,K=null,kt=null,le=function(){var ut=st();return function(Tt,ae,Y,I,Yt,T){var F,Lt;for(ae||(ae=2),Y||(Y=0),I?Lt=Math.min(I*ae+Y,Tt.length):Lt=Tt.length,F=Y;F<Lt;F+=ae)ut[0]=Tt[F],ut[1]=Tt[F+1],Yt(ut,ut,T),Tt[F]=ut[0],Tt[F+1]=ut[1];return Tt}}()},77160:function(Me,de,k){"use strict";k.d(de,{$X:function(){return ft},AK:function(){return ce},EU:function(){return he},Fp:function(){return Ft},Fv:function(){return J},IH:function(){return zt},JG:function(){return Qt},Jp:function(){return re},TK:function(){return kt},Ue:function(){return st},VC:function(){return Et},VV:function(){return At},Zh:function(){return ut},al:function(){return et},bA:function(){return $t},d9:function(){return St},fF:function(){return G},fS:function(){return pe},kC:function(){return Gt},kE:function(){return Kt},kK:function(){return Mt},lu:function(){return Ce},t7:function(){return ke},t8:function(){return Ut},tk:function(){return Te}});var yt=k(49685);function st(){var Y=new yt.WT(3);return yt.WT!=Float32Array&&(Y[0]=0,Y[1]=0,Y[2]=0),Y}function St(Y){var I=new yt.WT(3);return I[0]=Y[0],I[1]=Y[1],I[2]=Y[2],I}function Kt(Y){var I=Y[0],Yt=Y[1],T=Y[2];return Math.hypot(I,Yt,T)}function et(Y,I,Yt){var T=new yt.WT(3);return T[0]=Y,T[1]=I,T[2]=Yt,T}function Qt(Y,I){return Y[0]=I[0],Y[1]=I[1],Y[2]=I[2],Y}function Ut(Y,I,Yt,T){return Y[0]=I,Y[1]=Yt,Y[2]=T,Y}function zt(Y,I,Yt){return Y[0]=I[0]+Yt[0],Y[1]=I[1]+Yt[1],Y[2]=I[2]+Yt[2],Y}function ft(Y,I,Yt){return Y[0]=I[0]-Yt[0],Y[1]=I[1]-Yt[1],Y[2]=I[2]-Yt[2],Y}function re(Y,I,Yt){return Y[0]=I[0]*Yt[0],Y[1]=I[1]*Yt[1],Y[2]=I[2]*Yt[2],Y}function q(Y,I,Yt){return Y[0]=I[0]/Yt[0],Y[1]=I[1]/Yt[1],Y[2]=I[2]/Yt[2],Y}function Q(Y,I){return Y[0]=Math.ceil(I[0]),Y[1]=Math.ceil(I[1]),Y[2]=Math.ceil(I[2]),Y}function Dt(Y,I){return Y[0]=Math.floor(I[0]),Y[1]=Math.floor(I[1]),Y[2]=Math.floor(I[2]),Y}function At(Y,I,Yt){return Y[0]=Math.min(I[0],Yt[0]),Y[1]=Math.min(I[1],Yt[1]),Y[2]=Math.min(I[2],Yt[2]),Y}function Ft(Y,I,Yt){return Y[0]=Math.max(I[0],Yt[0]),Y[1]=Math.max(I[1],Yt[1]),Y[2]=Math.max(I[2],Yt[2]),Y}function Pt(Y,I){return Y[0]=Math.round(I[0]),Y[1]=Math.round(I[1]),Y[2]=Math.round(I[2]),Y}function $t(Y,I,Yt){return Y[0]=I[0]*Yt,Y[1]=I[1]*Yt,Y[2]=I[2]*Yt,Y}function Oe(Y,I,Yt,T){return Y[0]=I[0]+Yt[0]*T,Y[1]=I[1]+Yt[1]*T,Y[2]=I[2]+Yt[2]*T,Y}function De(Y,I){var Yt=I[0]-Y[0],T=I[1]-Y[1],F=I[2]-Y[2];return Math.hypot(Yt,T,F)}function Ge(Y,I){var Yt=I[0]-Y[0],T=I[1]-Y[1],F=I[2]-Y[2];return Yt*Yt+T*T+F*F}function un(Y){var I=Y[0],Yt=Y[1],T=Y[2];return I*I+Yt*Yt+T*T}function Te(Y,I){return Y[0]=-I[0],Y[1]=-I[1],Y[2]=-I[2],Y}function Vt(Y,I){return Y[0]=1/I[0],Y[1]=1/I[1],Y[2]=1/I[2],Y}function J(Y,I){var Yt=I[0],T=I[1],F=I[2],Lt=Yt*Yt+T*T+F*F;return Lt>0&&(Lt=1/Math.sqrt(Lt)),Y[0]=I[0]*Lt,Y[1]=I[1]*Lt,Y[2]=I[2]*Lt,Y}function ce(Y,I){return Y[0]*I[0]+Y[1]*I[1]+Y[2]*I[2]}function Gt(Y,I,Yt){var T=I[0],F=I[1],Lt=I[2],Wt=Yt[0],ie=Yt[1],be=Yt[2];return Y[0]=F*be-Lt*ie,Y[1]=Lt*Wt-T*be,Y[2]=T*ie-F*Wt,Y}function ke(Y,I,Yt,T){var F=I[0],Lt=I[1],Wt=I[2];return Y[0]=F+T*(Yt[0]-F),Y[1]=Lt+T*(Yt[1]-Lt),Y[2]=Wt+T*(Yt[2]-Wt),Y}function Ie(Y,I,Yt,T,F,Lt){var Wt=Lt*Lt,ie=Wt*(2*Lt-3)+1,be=Wt*(Lt-2)+Lt,Ae=Wt*(Lt-1),we=Wt*(3-2*Lt);return Y[0]=I[0]*ie+Yt[0]*be+T[0]*Ae+F[0]*we,Y[1]=I[1]*ie+Yt[1]*be+T[1]*Ae+F[1]*we,Y[2]=I[2]*ie+Yt[2]*be+T[2]*Ae+F[2]*we,Y}function B(Y,I,Yt,T,F,Lt){var Wt=1-Lt,ie=Wt*Wt,be=Lt*Lt,Ae=ie*Wt,we=3*Lt*ie,$e=3*be*Wt,Xe=be*Lt;return Y[0]=I[0]*Ae+Yt[0]*we+T[0]*$e+F[0]*Xe,Y[1]=I[1]*Ae+Yt[1]*we+T[1]*$e+F[1]*Xe,Y[2]=I[2]*Ae+Yt[2]*we+T[2]*$e+F[2]*Xe,Y}function Ct(Y,I){I=I||1;var Yt=glMatrix.RANDOM()*2*Math.PI,T=glMatrix.RANDOM()*2-1,F=Math.sqrt(1-T*T)*I;return Y[0]=Math.cos(Yt)*F,Y[1]=Math.sin(Yt)*F,Y[2]=T*I,Y}function G(Y,I,Yt){var T=I[0],F=I[1],Lt=I[2],Wt=Yt[3]*T+Yt[7]*F+Yt[11]*Lt+Yt[15];return Wt=Wt||1,Y[0]=(Yt[0]*T+Yt[4]*F+Yt[8]*Lt+Yt[12])/Wt,Y[1]=(Yt[1]*T+Yt[5]*F+Yt[9]*Lt+Yt[13])/Wt,Y[2]=(Yt[2]*T+Yt[6]*F+Yt[10]*Lt+Yt[14])/Wt,Y}function Mt(Y,I,Yt){var T=I[0],F=I[1],Lt=I[2];return Y[0]=T*Yt[0]+F*Yt[3]+Lt*Yt[6],Y[1]=T*Yt[1]+F*Yt[4]+Lt*Yt[7],Y[2]=T*Yt[2]+F*Yt[5]+Lt*Yt[8],Y}function Et(Y,I,Yt){var T=Yt[0],F=Yt[1],Lt=Yt[2],Wt=Yt[3],ie=I[0],be=I[1],Ae=I[2],we=F*Ae-Lt*be,$e=Lt*ie-T*Ae,Xe=T*be-F*ie,Qe=F*Xe-Lt*$e,qe=Lt*we-T*Xe,Zt=T*$e-F*we,ne=Wt*2;return we*=ne,$e*=ne,Xe*=ne,Qe*=2,qe*=2,Zt*=2,Y[0]=ie+we+Qe,Y[1]=be+$e+qe,Y[2]=Ae+Xe+Zt,Y}function U(Y,I,Yt,T){var F=[],Lt=[];return F[0]=I[0]-Yt[0],F[1]=I[1]-Yt[1],F[2]=I[2]-Yt[2],Lt[0]=F[0],Lt[1]=F[1]*Math.cos(T)-F[2]*Math.sin(T),Lt[2]=F[1]*Math.sin(T)+F[2]*Math.cos(T),Y[0]=Lt[0]+Yt[0],Y[1]=Lt[1]+Yt[1],Y[2]=Lt[2]+Yt[2],Y}function it(Y,I,Yt,T){var F=[],Lt=[];return F[0]=I[0]-Yt[0],F[1]=I[1]-Yt[1],F[2]=I[2]-Yt[2],Lt[0]=F[2]*Math.sin(T)+F[0]*Math.cos(T),Lt[1]=F[1],Lt[2]=F[2]*Math.cos(T)-F[0]*Math.sin(T),Y[0]=Lt[0]+Yt[0],Y[1]=Lt[1]+Yt[1],Y[2]=Lt[2]+Yt[2],Y}function te(Y,I,Yt,T){var F=[],Lt=[];return F[0]=I[0]-Yt[0],F[1]=I[1]-Yt[1],F[2]=I[2]-Yt[2],Lt[0]=F[0]*Math.cos(T)-F[1]*Math.sin(T),Lt[1]=F[0]*Math.sin(T)+F[1]*Math.cos(T),Lt[2]=F[2],Y[0]=Lt[0]+Yt[0],Y[1]=Lt[1]+Yt[1],Y[2]=Lt[2]+Yt[2],Y}function he(Y,I){var Yt=Y[0],T=Y[1],F=Y[2],Lt=I[0],Wt=I[1],ie=I[2],be=Math.sqrt(Yt*Yt+T*T+F*F),Ae=Math.sqrt(Lt*Lt+Wt*Wt+ie*ie),we=be*Ae,$e=we&&ce(Y,I)/we;return Math.acos(Math.min(Math.max($e,-1),1))}function xt(Y){return Y[0]=0,Y[1]=0,Y[2]=0,Y}function ee(Y){return"vec3("+Y[0]+", "+Y[1]+", "+Y[2]+")"}function qt(Y,I){return Y[0]===I[0]&&Y[1]===I[1]&&Y[2]===I[2]}function pe(Y,I){var Yt=Y[0],T=Y[1],F=Y[2],Lt=I[0],Wt=I[1],ie=I[2];return Math.abs(Yt-Lt)<=yt.Ib*Math.max(1,Math.abs(Yt),Math.abs(Lt))&&Math.abs(T-Wt)<=yt.Ib*Math.max(1,Math.abs(T),Math.abs(Wt))&&Math.abs(F-ie)<=yt.Ib*Math.max(1,Math.abs(F),Math.abs(ie))}var Ce=ft,vt=null,K=null,kt=De,le=null,ut=Kt,Tt=null,ae=function(){var Y=st();return function(I,Yt,T,F,Lt,Wt){var ie,be;for(Yt||(Yt=3),T||(T=0),F?be=Math.min(F*Yt+T,I.length):be=I.length,ie=T;ie<be;ie+=Yt)Y[0]=I[ie],Y[1]=I[ie+1],Y[2]=I[ie+2],Lt(Y,Y,Wt),I[ie]=Y[0],I[ie+1]=Y[1],I[ie+2]=Y[2];return I}}()},98333:function(Me,de,k){"use strict";k.d(de,{AK:function(){return ce},Fv:function(){return J},I6:function(){return Et},IH:function(){return Ut},JG:function(){return et},Ue:function(){return st},al:function(){return Kt},bA:function(){return Pt},d9:function(){return St},fF:function(){return B},fS:function(){return U},kE:function(){return Ge},t7:function(){return ke},t8:function(){return Qt},we:function(){return un}});var yt=k(49685);function st(){var vt=new yt.WT(4);return yt.WT!=Float32Array&&(vt[0]=0,vt[1]=0,vt[2]=0,vt[3]=0),vt}function St(vt){var K=new yt.WT(4);return K[0]=vt[0],K[1]=vt[1],K[2]=vt[2],K[3]=vt[3],K}function Kt(vt,K,kt,le){var ut=new yt.WT(4);return ut[0]=vt,ut[1]=K,ut[2]=kt,ut[3]=le,ut}function et(vt,K){return vt[0]=K[0],vt[1]=K[1],vt[2]=K[2],vt[3]=K[3],vt}function Qt(vt,K,kt,le,ut){return vt[0]=K,vt[1]=kt,vt[2]=le,vt[3]=ut,vt}function Ut(vt,K,kt){return vt[0]=K[0]+kt[0],vt[1]=K[1]+kt[1],vt[2]=K[2]+kt[2],vt[3]=K[3]+kt[3],vt}function zt(vt,K,kt){return vt[0]=K[0]-kt[0],vt[1]=K[1]-kt[1],vt[2]=K[2]-kt[2],vt[3]=K[3]-kt[3],vt}function ft(vt,K,kt){return vt[0]=K[0]*kt[0],vt[1]=K[1]*kt[1],vt[2]=K[2]*kt[2],vt[3]=K[3]*kt[3],vt}function re(vt,K,kt){return vt[0]=K[0]/kt[0],vt[1]=K[1]/kt[1],vt[2]=K[2]/kt[2],vt[3]=K[3]/kt[3],vt}function q(vt,K){return vt[0]=Math.ceil(K[0]),vt[1]=Math.ceil(K[1]),vt[2]=Math.ceil(K[2]),vt[3]=Math.ceil(K[3]),vt}function Q(vt,K){return vt[0]=Math.floor(K[0]),vt[1]=Math.floor(K[1]),vt[2]=Math.floor(K[2]),vt[3]=Math.floor(K[3]),vt}function Dt(vt,K,kt){return vt[0]=Math.min(K[0],kt[0]),vt[1]=Math.min(K[1],kt[1]),vt[2]=Math.min(K[2],kt[2]),vt[3]=Math.min(K[3],kt[3]),vt}function At(vt,K,kt){return vt[0]=Math.max(K[0],kt[0]),vt[1]=Math.max(K[1],kt[1]),vt[2]=Math.max(K[2],kt[2]),vt[3]=Math.max(K[3],kt[3]),vt}function Ft(vt,K){return vt[0]=Math.round(K[0]),vt[1]=Math.round(K[1]),vt[2]=Math.round(K[2]),vt[3]=Math.round(K[3]),vt}function Pt(vt,K,kt){return vt[0]=K[0]*kt,vt[1]=K[1]*kt,vt[2]=K[2]*kt,vt[3]=K[3]*kt,vt}function $t(vt,K,kt,le){return vt[0]=K[0]+kt[0]*le,vt[1]=K[1]+kt[1]*le,vt[2]=K[2]+kt[2]*le,vt[3]=K[3]+kt[3]*le,vt}function Oe(vt,K){var kt=K[0]-vt[0],le=K[1]-vt[1],ut=K[2]-vt[2],Tt=K[3]-vt[3];return Math.hypot(kt,le,ut,Tt)}function De(vt,K){var kt=K[0]-vt[0],le=K[1]-vt[1],ut=K[2]-vt[2],Tt=K[3]-vt[3];return kt*kt+le*le+ut*ut+Tt*Tt}function Ge(vt){var K=vt[0],kt=vt[1],le=vt[2],ut=vt[3];return Math.hypot(K,kt,le,ut)}function un(vt){var K=vt[0],kt=vt[1],le=vt[2],ut=vt[3];return K*K+kt*kt+le*le+ut*ut}function Te(vt,K){return vt[0]=-K[0],vt[1]=-K[1],vt[2]=-K[2],vt[3]=-K[3],vt}function Vt(vt,K){return vt[0]=1/K[0],vt[1]=1/K[1],vt[2]=1/K[2],vt[3]=1/K[3],vt}function J(vt,K){var kt=K[0],le=K[1],ut=K[2],Tt=K[3],ae=kt*kt+le*le+ut*ut+Tt*Tt;return ae>0&&(ae=1/Math.sqrt(ae)),vt[0]=kt*ae,vt[1]=le*ae,vt[2]=ut*ae,vt[3]=Tt*ae,vt}function ce(vt,K){return vt[0]*K[0]+vt[1]*K[1]+vt[2]*K[2]+vt[3]*K[3]}function Gt(vt,K,kt,le){var ut=kt[0]*le[1]-kt[1]*le[0],Tt=kt[0]*le[2]-kt[2]*le[0],ae=kt[0]*le[3]-kt[3]*le[0],Y=kt[1]*le[2]-kt[2]*le[1],I=kt[1]*le[3]-kt[3]*le[1],Yt=kt[2]*le[3]-kt[3]*le[2],T=K[0],F=K[1],Lt=K[2],Wt=K[3];return vt[0]=F*Yt-Lt*I+Wt*Y,vt[1]=-(T*Yt)+Lt*ae-Wt*Tt,vt[2]=T*I-F*ae+Wt*ut,vt[3]=-(T*Y)+F*Tt-Lt*ut,vt}function ke(vt,K,kt,le){var ut=K[0],Tt=K[1],ae=K[2],Y=K[3];return vt[0]=ut+le*(kt[0]-ut),vt[1]=Tt+le*(kt[1]-Tt),vt[2]=ae+le*(kt[2]-ae),vt[3]=Y+le*(kt[3]-Y),vt}function Ie(vt,K){K=K||1;var kt,le,ut,Tt,ae,Y;do kt=glMatrix.RANDOM()*2-1,le=glMatrix.RANDOM()*2-1,ae=kt*kt+le*le;while(ae>=1);do ut=glMatrix.RANDOM()*2-1,Tt=glMatrix.RANDOM()*2-1,Y=ut*ut+Tt*Tt;while(Y>=1);var I=Math.sqrt((1-ae)/Y);return vt[0]=K*kt,vt[1]=K*le,vt[2]=K*ut*I,vt[3]=K*Tt*I,vt}function B(vt,K,kt){var le=K[0],ut=K[1],Tt=K[2],ae=K[3];return vt[0]=kt[0]*le+kt[4]*ut+kt[8]*Tt+kt[12]*ae,vt[1]=kt[1]*le+kt[5]*ut+kt[9]*Tt+kt[13]*ae,vt[2]=kt[2]*le+kt[6]*ut+kt[10]*Tt+kt[14]*ae,vt[3]=kt[3]*le+kt[7]*ut+kt[11]*Tt+kt[15]*ae,vt}function Ct(vt,K,kt){var le=K[0],ut=K[1],Tt=K[2],ae=kt[0],Y=kt[1],I=kt[2],Yt=kt[3],T=Yt*le+Y*Tt-I*ut,F=Yt*ut+I*le-ae*Tt,Lt=Yt*Tt+ae*ut-Y*le,Wt=-ae*le-Y*ut-I*Tt;return vt[0]=T*Yt+Wt*-ae+F*-I-Lt*-Y,vt[1]=F*Yt+Wt*-Y+Lt*-ae-T*-I,vt[2]=Lt*Yt+Wt*-I+T*-Y-F*-ae,vt[3]=K[3],vt}function G(vt){return vt[0]=0,vt[1]=0,vt[2]=0,vt[3]=0,vt}function Mt(vt){return"vec4("+vt[0]+", "+vt[1]+", "+vt[2]+", "+vt[3]+")"}function Et(vt,K){return vt[0]===K[0]&&vt[1]===K[1]&&vt[2]===K[2]&&vt[3]===K[3]}function U(vt,K){var kt=vt[0],le=vt[1],ut=vt[2],Tt=vt[3],ae=K[0],Y=K[1],I=K[2],Yt=K[3];return Math.abs(kt-ae)<=yt.Ib*Math.max(1,Math.abs(kt),Math.abs(ae))&&Math.abs(le-Y)<=yt.Ib*Math.max(1,Math.abs(le),Math.abs(Y))&&Math.abs(ut-I)<=yt.Ib*Math.max(1,Math.abs(ut),Math.abs(I))&&Math.abs(Tt-Yt)<=yt.Ib*Math.max(1,Math.abs(Tt),Math.abs(Yt))}var it=null,te=null,he=null,xt=null,ee=null,qt=null,pe=null,Ce=function(){var vt=st();return function(K,kt,le,ut,Tt,ae){var Y,I;for(kt||(kt=4),le||(le=0),ut?I=Math.min(ut*kt+le,K.length):I=K.length,Y=le;Y<I;Y+=kt)vt[0]=K[Y],vt[1]=K[Y+1],vt[2]=K[Y+2],vt[3]=K[Y+3],Tt(vt,vt,ae),K[Y]=vt[0],K[Y+1]=vt[1],K[Y+2]=vt[2],K[Y+3]=vt[3];return K}}()},50840:function(Me,de,k){var yt;(function(st,St,Kt,et){"use strict";var Qt=["","webkit","Moz","MS","ms","o"],Ut=St.createElement("div"),zt="function",ft=Math.round,re=Math.abs,q=Date.now;function Q(wt,Bt,_e){return setTimeout(Ge(wt,_e),Bt)}function Dt(wt,Bt,_e){return Array.isArray(wt)?(At(wt,_e[Bt],_e),!0):!1}function At(wt,Bt,_e){var tn;if(wt)if(wt.forEach)wt.forEach(Bt,_e);else if(wt.length!==et)for(tn=0;tn<wt.length;)Bt.call(_e,wt[tn],tn,wt),tn++;else for(tn in wt)wt.hasOwnProperty(tn)&&Bt.call(_e,wt[tn],tn,wt)}function Ft(wt,Bt,_e){var tn="DEPRECATED METHOD: "+Bt+`
`+_e+` AT 
`;return function(){var gn=new Error("get-stack-trace"),Cn=gn&&gn.stack?gn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Wn=st.console&&(st.console.warn||st.console.log);return Wn&&Wn.call(st.console,tn,Cn),wt.apply(this,arguments)}}var Pt;typeof Object.assign!="function"?Pt=function(Bt){if(Bt===et||Bt===null)throw new TypeError("Cannot convert undefined or null to object");for(var _e=Object(Bt),tn=1;tn<arguments.length;tn++){var gn=arguments[tn];if(gn!==et&&gn!==null)for(var Cn in gn)gn.hasOwnProperty(Cn)&&(_e[Cn]=gn[Cn])}return _e}:Pt=Object.assign;var $t=Ft(function(Bt,_e,tn){for(var gn=Object.keys(_e),Cn=0;Cn<gn.length;)(!tn||tn&&Bt[gn[Cn]]===et)&&(Bt[gn[Cn]]=_e[gn[Cn]]),Cn++;return Bt},"extend","Use `assign`."),Oe=Ft(function(Bt,_e){return $t(Bt,_e,!0)},"merge","Use `assign`.");function De(wt,Bt,_e){var tn=Bt.prototype,gn;gn=wt.prototype=Object.create(tn),gn.constructor=wt,gn._super=tn,_e&&Pt(gn,_e)}function Ge(wt,Bt){return function(){return wt.apply(Bt,arguments)}}function un(wt,Bt){return typeof wt==zt?wt.apply(Bt&&Bt[0]||et,Bt):wt}function Te(wt,Bt){return wt===et?Bt:wt}function Vt(wt,Bt,_e){At(ke(Bt),function(tn){wt.addEventListener(tn,_e,!1)})}function J(wt,Bt,_e){At(ke(Bt),function(tn){wt.removeEventListener(tn,_e,!1)})}function ce(wt,Bt){for(;wt;){if(wt==Bt)return!0;wt=wt.parentNode}return!1}function Gt(wt,Bt){return wt.indexOf(Bt)>-1}function ke(wt){return wt.trim().split(/\s+/g)}function Ie(wt,Bt,_e){if(wt.indexOf&&!_e)return wt.indexOf(Bt);for(var tn=0;tn<wt.length;){if(_e&&wt[tn][_e]==Bt||!_e&&wt[tn]===Bt)return tn;tn++}return-1}function B(wt){return Array.prototype.slice.call(wt,0)}function Ct(wt,Bt,_e){for(var tn=[],gn=[],Cn=0;Cn<wt.length;){var Wn=Bt?wt[Cn][Bt]:wt[Cn];Ie(gn,Wn)<0&&tn.push(wt[Cn]),gn[Cn]=Wn,Cn++}return _e&&(Bt?tn=tn.sort(function(ei,Er){return ei[Bt]>Er[Bt]}):tn=tn.sort()),tn}function G(wt,Bt){for(var _e,tn,gn=Bt[0].toUpperCase()+Bt.slice(1),Cn=0;Cn<Qt.length;){if(_e=Qt[Cn],tn=_e?_e+gn:Bt,tn in wt)return tn;Cn++}return et}var Mt=1;function Et(){return Mt++}function U(wt){var Bt=wt.ownerDocument||wt;return Bt.defaultView||Bt.parentWindow||st}var it=/mobile|tablet|ip(ad|hone|od)|android/i,te="ontouchstart"in st,he=G(st,"PointerEvent")!==et,xt=te&&it.test(navigator.userAgent),ee="touch",qt="pen",pe="mouse",Ce="kinect",vt=25,K=1,kt=2,le=4,ut=8,Tt=1,ae=2,Y=4,I=8,Yt=16,T=ae|Y,F=I|Yt,Lt=T|F,Wt=["x","y"],ie=["clientX","clientY"];function be(wt,Bt){var _e=this;this.manager=wt,this.callback=Bt,this.element=wt.element,this.target=wt.options.inputTarget,this.domHandler=function(tn){un(wt.options.enable,[wt])&&_e.handler(tn)},this.init()}be.prototype={handler:function(){},init:function(){this.evEl&&Vt(this.element,this.evEl,this.domHandler),this.evTarget&&Vt(this.target,this.evTarget,this.domHandler),this.evWin&&Vt(U(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&J(this.element,this.evEl,this.domHandler),this.evTarget&&J(this.target,this.evTarget,this.domHandler),this.evWin&&J(U(this.element),this.evWin,this.domHandler)}};function Ae(wt){var Bt,_e=wt.options.inputClass;return _e?Bt=_e:he?Bt=Re:xt?Bt=hr:te?Bt=Or:Bt=ge,new Bt(wt,we)}function we(wt,Bt,_e){var tn=_e.pointers.length,gn=_e.changedPointers.length,Cn=Bt&K&&tn-gn===0,Wn=Bt&(le|ut)&&tn-gn===0;_e.isFirst=!!Cn,_e.isFinal=!!Wn,Cn&&(wt.session={}),_e.eventType=Bt,$e(wt,_e),wt.emit("hammer.input",_e),wt.recognize(_e),wt.session.prevInput=_e}function $e(wt,Bt){var _e=wt.session,tn=Bt.pointers,gn=tn.length;_e.firstInput||(_e.firstInput=qe(Bt)),gn>1&&!_e.firstMultiple?_e.firstMultiple=qe(Bt):gn===1&&(_e.firstMultiple=!1);var Cn=_e.firstInput,Wn=_e.firstMultiple,Wr=Wn?Wn.center:Cn.center,ei=Bt.center=Zt(tn);Bt.timeStamp=q(),Bt.deltaTime=Bt.timeStamp-Cn.timeStamp,Bt.angle=tt(Wr,ei),Bt.distance=fe(Wr,ei),Xe(_e,Bt),Bt.offsetDirection=se(Bt.deltaX,Bt.deltaY);var Er=ne(Bt.deltaTime,Bt.deltaX,Bt.deltaY);Bt.overallVelocityX=Er.x,Bt.overallVelocityY=Er.y,Bt.overallVelocity=re(Er.x)>re(Er.y)?Er.x:Er.y,Bt.scale=Wn?V(Wn.pointers,tn):1,Bt.rotation=Wn?D(Wn.pointers,tn):0,Bt.maxPointers=_e.prevInput?Bt.pointers.length>_e.prevInput.maxPointers?Bt.pointers.length:_e.prevInput.maxPointers:Bt.pointers.length,Qe(_e,Bt);var ai=wt.element;ce(Bt.srcEvent.target,ai)&&(ai=Bt.srcEvent.target),Bt.target=ai}function Xe(wt,Bt){var _e=Bt.center,tn=wt.offsetDelta||{},gn=wt.prevDelta||{},Cn=wt.prevInput||{};(Bt.eventType===K||Cn.eventType===le)&&(gn=wt.prevDelta={x:Cn.deltaX||0,y:Cn.deltaY||0},tn=wt.offsetDelta={x:_e.x,y:_e.y}),Bt.deltaX=gn.x+(_e.x-tn.x),Bt.deltaY=gn.y+(_e.y-tn.y)}function Qe(wt,Bt){var _e=wt.lastInterval||Bt,tn=Bt.timeStamp-_e.timeStamp,gn,Cn,Wn,Wr;if(Bt.eventType!=ut&&(tn>vt||_e.velocity===et)){var ei=Bt.deltaX-_e.deltaX,Er=Bt.deltaY-_e.deltaY,ai=ne(tn,ei,Er);Cn=ai.x,Wn=ai.y,gn=re(ai.x)>re(ai.y)?ai.x:ai.y,Wr=se(ei,Er),wt.lastInterval=Bt}else gn=_e.velocity,Cn=_e.velocityX,Wn=_e.velocityY,Wr=_e.direction;Bt.velocity=gn,Bt.velocityX=Cn,Bt.velocityY=Wn,Bt.direction=Wr}function qe(wt){for(var Bt=[],_e=0;_e<wt.pointers.length;)Bt[_e]={clientX:ft(wt.pointers[_e].clientX),clientY:ft(wt.pointers[_e].clientY)},_e++;return{timeStamp:q(),pointers:Bt,center:Zt(Bt),deltaX:wt.deltaX,deltaY:wt.deltaY}}function Zt(wt){var Bt=wt.length;if(Bt===1)return{x:ft(wt[0].clientX),y:ft(wt[0].clientY)};for(var _e=0,tn=0,gn=0;gn<Bt;)_e+=wt[gn].clientX,tn+=wt[gn].clientY,gn++;return{x:ft(_e/Bt),y:ft(tn/Bt)}}function ne(wt,Bt,_e){return{x:Bt/wt||0,y:_e/wt||0}}function se(wt,Bt){return wt===Bt?Tt:re(wt)>=re(Bt)?wt<0?ae:Y:Bt<0?I:Yt}function fe(wt,Bt,_e){_e||(_e=Wt);var tn=Bt[_e[0]]-wt[_e[0]],gn=Bt[_e[1]]-wt[_e[1]];return Math.sqrt(tn*tn+gn*gn)}function tt(wt,Bt,_e){_e||(_e=Wt);var tn=Bt[_e[0]]-wt[_e[0]],gn=Bt[_e[1]]-wt[_e[1]];return Math.atan2(gn,tn)*180/Math.PI}function D(wt,Bt){return tt(Bt[1],Bt[0],ie)+tt(wt[1],wt[0],ie)}function V(wt,Bt){return fe(Bt[0],Bt[1],ie)/fe(wt[0],wt[1],ie)}var nt={mousedown:K,mousemove:kt,mouseup:le},_t="mousedown",Ot="mousemove mouseup";function ge(){this.evEl=_t,this.evWin=Ot,this.pressed=!1,be.apply(this,arguments)}De(ge,be,{handler:function(Bt){var _e=nt[Bt.type];_e&K&&Bt.button===0&&(this.pressed=!0),_e&kt&&Bt.which!==1&&(_e=le),this.pressed&&(_e&le&&(this.pressed=!1),this.callback(this.manager,_e,{pointers:[Bt],changedPointers:[Bt],pointerType:pe,srcEvent:Bt}))}});var Ee={pointerdown:K,pointermove:kt,pointerup:le,pointercancel:ut,pointerout:ut},Be={2:ee,3:qt,4:pe,5:Ce},je="pointerdown",fn="pointermove pointerup pointercancel";st.MSPointerEvent&&!st.PointerEvent&&(je="MSPointerDown",fn="MSPointerMove MSPointerUp MSPointerCancel");function Re(){this.evEl=je,this.evWin=fn,be.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}De(Re,be,{handler:function(Bt){var _e=this.store,tn=!1,gn=Bt.type.toLowerCase().replace("ms",""),Cn=Ee[gn],Wn=Be[Bt.pointerType]||Bt.pointerType,Wr=Wn==ee,ei=Ie(_e,Bt.pointerId,"pointerId");Cn&K&&(Bt.button===0||Wr)?ei<0&&(_e.push(Bt),ei=_e.length-1):Cn&(le|ut)&&(tn=!0),!(ei<0)&&(_e[ei]=Bt,this.callback(this.manager,Cn,{pointers:_e,changedPointers:[Bt],pointerType:Wn,srcEvent:Bt}),tn&&_e.splice(ei,1))}});var Ye={touchstart:K,touchmove:kt,touchend:le,touchcancel:ut},cn="touchstart",sn="touchstart touchmove touchend touchcancel";function Mn(){this.evTarget=cn,this.evWin=sn,this.started=!1,be.apply(this,arguments)}De(Mn,be,{handler:function(Bt){var _e=Ye[Bt.type];if(_e===K&&(this.started=!0),!!this.started){var tn=Vn.call(this,Bt,_e);_e&(le|ut)&&tn[0].length-tn[1].length===0&&(this.started=!1),this.callback(this.manager,_e,{pointers:tn[0],changedPointers:tn[1],pointerType:ee,srcEvent:Bt})}}});function Vn(wt,Bt){var _e=B(wt.touches),tn=B(wt.changedTouches);return Bt&(le|ut)&&(_e=Ct(_e.concat(tn),"identifier",!0)),[_e,tn]}var Un={touchstart:K,touchmove:kt,touchend:le,touchcancel:ut},Jn="touchstart touchmove touchend touchcancel";function hr(){this.evTarget=Jn,this.targetIds={},be.apply(this,arguments)}De(hr,be,{handler:function(Bt){var _e=Un[Bt.type],tn=Ir.call(this,Bt,_e);tn&&this.callback(this.manager,_e,{pointers:tn[0],changedPointers:tn[1],pointerType:ee,srcEvent:Bt})}});function Ir(wt,Bt){var _e=B(wt.touches),tn=this.targetIds;if(Bt&(K|kt)&&_e.length===1)return tn[_e[0].identifier]=!0,[_e,_e];var gn,Cn,Wn=B(wt.changedTouches),Wr=[],ei=this.target;if(Cn=_e.filter(function(Er){return ce(Er.target,ei)}),Bt===K)for(gn=0;gn<Cn.length;)tn[Cn[gn].identifier]=!0,gn++;for(gn=0;gn<Wn.length;)tn[Wn[gn].identifier]&&Wr.push(Wn[gn]),Bt&(le|ut)&&delete tn[Wn[gn].identifier],gn++;if(Wr.length)return[Ct(Cn.concat(Wr),"identifier",!0),Wr]}var Qr=2500,Sr=25;function Or(){be.apply(this,arguments);var wt=Ge(this.handler,this);this.touch=new hr(this.manager,wt),this.mouse=new ge(this.manager,wt),this.primaryTouch=null,this.lastTouches=[]}De(Or,be,{handler:function(Bt,_e,tn){var gn=tn.pointerType==ee,Cn=tn.pointerType==pe;if(!(Cn&&tn.sourceCapabilities&&tn.sourceCapabilities.firesTouchEvents)){if(gn)zr.call(this,_e,tn);else if(Cn&&Ti.call(this,tn))return;this.callback(Bt,_e,tn)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function zr(wt,Bt){wt&K?(this.primaryTouch=Bt.changedPointers[0].identifier,ci.call(this,Bt)):wt&(le|ut)&&ci.call(this,Bt)}function ci(wt){var Bt=wt.changedPointers[0];if(Bt.identifier===this.primaryTouch){var _e={x:Bt.clientX,y:Bt.clientY};this.lastTouches.push(_e);var tn=this.lastTouches,gn=function(){var Cn=tn.indexOf(_e);Cn>-1&&tn.splice(Cn,1)};setTimeout(gn,Qr)}}function Ti(wt){for(var Bt=wt.srcEvent.clientX,_e=wt.srcEvent.clientY,tn=0;tn<this.lastTouches.length;tn++){var gn=this.lastTouches[tn],Cn=Math.abs(Bt-gn.x),Wn=Math.abs(_e-gn.y);if(Cn<=Sr&&Wn<=Sr)return!0}return!1}var Ci=G(Ut.style,"touchAction"),ri=Ci!==et,Hi="compute",fo="auto",es="manipulation",so="none",va="pan-x",Yr="pan-y",Jr=Xt();function at(wt,Bt){this.manager=wt,this.set(Bt)}at.prototype={set:function(wt){wt==Hi&&(wt=this.compute()),ri&&this.manager.element.style&&Jr[wt]&&(this.manager.element.style[Ci]=wt),this.actions=wt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var wt=[];return At(this.manager.recognizers,function(Bt){un(Bt.options.enable,[Bt])&&(wt=wt.concat(Bt.getTouchAction()))}),ht(wt.join(" "))},preventDefaults:function(wt){var Bt=wt.srcEvent,_e=wt.offsetDirection;if(this.manager.session.prevented){Bt.preventDefault();return}var tn=this.actions,gn=Gt(tn,so)&&!Jr[so],Cn=Gt(tn,Yr)&&!Jr[Yr],Wn=Gt(tn,va)&&!Jr[va];if(gn){var Wr=wt.pointers.length===1,ei=wt.distance<2,Er=wt.deltaTime<250;if(Wr&&ei&&Er)return}if(!(Wn&&Cn)&&(gn||Cn&&_e&T||Wn&&_e&F))return this.preventSrc(Bt)},preventSrc:function(wt){this.manager.session.prevented=!0,wt.preventDefault()}};function ht(wt){if(Gt(wt,so))return so;var Bt=Gt(wt,va),_e=Gt(wt,Yr);return Bt&&_e?so:Bt||_e?Bt?va:Yr:Gt(wt,es)?es:fo}function Xt(){if(!ri)return!1;var wt={},Bt=st.CSS&&st.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(_e){wt[_e]=Bt?st.CSS.supports("touch-action",_e):!0}),wt}var ue=1,Le=2,Fe=4,ve=8,me=ve,Ue=16,Ve=32;function vn(wt){this.options=Pt({},this.defaults,wt||{}),this.id=Et(),this.manager=null,this.options.enable=Te(this.options.enable,!0),this.state=ue,this.simultaneous={},this.requireFail=[]}vn.prototype={defaults:{},set:function(wt){return Pt(this.options,wt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(wt){if(Dt(wt,"recognizeWith",this))return this;var Bt=this.simultaneous;return wt=hn(wt,this),Bt[wt.id]||(Bt[wt.id]=wt,wt.recognizeWith(this)),this},dropRecognizeWith:function(wt){return Dt(wt,"dropRecognizeWith",this)?this:(wt=hn(wt,this),delete this.simultaneous[wt.id],this)},requireFailure:function(wt){if(Dt(wt,"requireFailure",this))return this;var Bt=this.requireFail;return wt=hn(wt,this),Ie(Bt,wt)===-1&&(Bt.push(wt),wt.requireFailure(this)),this},dropRequireFailure:function(wt){if(Dt(wt,"dropRequireFailure",this))return this;wt=hn(wt,this);var Bt=Ie(this.requireFail,wt);return Bt>-1&&this.requireFail.splice(Bt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(wt){return!!this.simultaneous[wt.id]},emit:function(wt){var Bt=this,_e=this.state;function tn(gn){Bt.manager.emit(gn,wt)}_e<ve&&tn(Bt.options.event+bn(_e)),tn(Bt.options.event),wt.additionalEvent&&tn(wt.additionalEvent),_e>=ve&&tn(Bt.options.event+bn(_e))},tryEmit:function(wt){if(this.canEmit())return this.emit(wt);this.state=Ve},canEmit:function(){for(var wt=0;wt<this.requireFail.length;){if(!(this.requireFail[wt].state&(Ve|ue)))return!1;wt++}return!0},recognize:function(wt){var Bt=Pt({},wt);if(!un(this.options.enable,[this,Bt])){this.reset(),this.state=Ve;return}this.state&(me|Ue|Ve)&&(this.state=ue),this.state=this.process(Bt),this.state&(Le|Fe|ve|Ue)&&this.tryEmit(Bt)},process:function(wt){},getTouchAction:function(){},reset:function(){}};function bn(wt){return wt&Ue?"cancel":wt&ve?"end":wt&Fe?"move":wt&Le?"start":""}function An(wt){return wt==Yt?"down":wt==I?"up":wt==ae?"left":wt==Y?"right":""}function hn(wt,Bt){var _e=Bt.manager;return _e?_e.get(wt):wt}function _n(){vn.apply(this,arguments)}De(_n,vn,{defaults:{pointers:1},attrTest:function(wt){var Bt=this.options.pointers;return Bt===0||wt.pointers.length===Bt},process:function(wt){var Bt=this.state,_e=wt.eventType,tn=Bt&(Le|Fe),gn=this.attrTest(wt);return tn&&(_e&ut||!gn)?Bt|Ue:tn||gn?_e&le?Bt|ve:Bt&Le?Bt|Fe:Le:Ve}});function Tn(){_n.apply(this,arguments),this.pX=null,this.pY=null}De(Tn,_n,{defaults:{event:"pan",threshold:10,pointers:1,direction:Lt},getTouchAction:function(){var wt=this.options.direction,Bt=[];return wt&T&&Bt.push(Yr),wt&F&&Bt.push(va),Bt},directionTest:function(wt){var Bt=this.options,_e=!0,tn=wt.distance,gn=wt.direction,Cn=wt.deltaX,Wn=wt.deltaY;return gn&Bt.direction||(Bt.direction&T?(gn=Cn===0?Tt:Cn<0?ae:Y,_e=Cn!=this.pX,tn=Math.abs(wt.deltaX)):(gn=Wn===0?Tt:Wn<0?I:Yt,_e=Wn!=this.pY,tn=Math.abs(wt.deltaY))),wt.direction=gn,_e&&tn>Bt.threshold&&gn&Bt.direction},attrTest:function(wt){return _n.prototype.attrTest.call(this,wt)&&(this.state&Le||!(this.state&Le)&&this.directionTest(wt))},emit:function(wt){this.pX=wt.deltaX,this.pY=wt.deltaY;var Bt=An(wt.direction);Bt&&(wt.additionalEvent=this.options.event+Bt),this._super.emit.call(this,wt)}});function mn(){_n.apply(this,arguments)}De(mn,_n,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[so]},attrTest:function(wt){return this._super.attrTest.call(this,wt)&&(Math.abs(wt.scale-1)>this.options.threshold||this.state&Le)},emit:function(wt){if(wt.scale!==1){var Bt=wt.scale<1?"in":"out";wt.additionalEvent=this.options.event+Bt}this._super.emit.call(this,wt)}});function Zn(){vn.apply(this,arguments),this._timer=null,this._input=null}De(Zn,vn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[fo]},process:function(wt){var Bt=this.options,_e=wt.pointers.length===Bt.pointers,tn=wt.distance<Bt.threshold,gn=wt.deltaTime>Bt.time;if(this._input=wt,!tn||!_e||wt.eventType&(le|ut)&&!gn)this.reset();else if(wt.eventType&K)this.reset(),this._timer=Q(function(){this.state=me,this.tryEmit()},Bt.time,this);else if(wt.eventType&le)return me;return Ve},reset:function(){clearTimeout(this._timer)},emit:function(wt){this.state===me&&(wt&&wt.eventType&le?this.manager.emit(this.options.event+"up",wt):(this._input.timeStamp=q(),this.manager.emit(this.options.event,this._input)))}});function kn(){_n.apply(this,arguments)}De(kn,_n,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[so]},attrTest:function(wt){return this._super.attrTest.call(this,wt)&&(Math.abs(wt.rotation)>this.options.threshold||this.state&Le)}});function Hn(){_n.apply(this,arguments)}De(Hn,_n,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:T|F,pointers:1},getTouchAction:function(){return Tn.prototype.getTouchAction.call(this)},attrTest:function(wt){var Bt=this.options.direction,_e;return Bt&(T|F)?_e=wt.overallVelocity:Bt&T?_e=wt.overallVelocityX:Bt&F&&(_e=wt.overallVelocityY),this._super.attrTest.call(this,wt)&&Bt&wt.offsetDirection&&wt.distance>this.options.threshold&&wt.maxPointers==this.options.pointers&&re(_e)>this.options.velocity&&wt.eventType&le},emit:function(wt){var Bt=An(wt.offsetDirection);Bt&&this.manager.emit(this.options.event+Bt,wt),this.manager.emit(this.options.event,wt)}});function Ln(){vn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}De(Ln,vn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[es]},process:function(wt){var Bt=this.options,_e=wt.pointers.length===Bt.pointers,tn=wt.distance<Bt.threshold,gn=wt.deltaTime<Bt.time;if(this.reset(),wt.eventType&K&&this.count===0)return this.failTimeout();if(tn&&gn&&_e){if(wt.eventType!=le)return this.failTimeout();var Cn=this.pTime?wt.timeStamp-this.pTime<Bt.interval:!0,Wn=!this.pCenter||fe(this.pCenter,wt.center)<Bt.posThreshold;this.pTime=wt.timeStamp,this.pCenter=wt.center,!Wn||!Cn?this.count=1:this.count+=1,this._input=wt;var Wr=this.count%Bt.taps;if(Wr===0)return this.hasRequireFailures()?(this._timer=Q(function(){this.state=me,this.tryEmit()},Bt.interval,this),Le):me}return Ve},failTimeout:function(){return this._timer=Q(function(){this.state=Ve},this.options.interval,this),Ve},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Fn(wt,Bt){return Bt=Bt||{},Bt.recognizers=Te(Bt.recognizers,Fn.defaults.preset),new Mi(wt,Bt)}Fn.VERSION="2.0.7",Fn.defaults={domEvents:!1,touchAction:Hi,enable:!0,inputTarget:null,inputClass:null,preset:[[kn,{enable:!1}],[mn,{enable:!1},["rotate"]],[Hn,{direction:T}],[Tn,{direction:T},["swipe"]],[Ln],[Ln,{event:"doubletap",taps:2},["tap"]],[Zn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var tr=1,di=2;function Mi(wt,Bt){this.options=Pt({},Fn.defaults,Bt||{}),this.options.inputTarget=this.options.inputTarget||wt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=wt,this.input=Ae(this),this.touchAction=new at(this,this.options.touchAction),ti(this,!0),At(this.options.recognizers,function(_e){var tn=this.add(new _e[0](_e[1]));_e[2]&&tn.recognizeWith(_e[2]),_e[3]&&tn.requireFailure(_e[3])},this)}Mi.prototype={set:function(wt){return Pt(this.options,wt),wt.touchAction&&this.touchAction.update(),wt.inputTarget&&(this.input.destroy(),this.input.target=wt.inputTarget,this.input.init()),this},stop:function(wt){this.session.stopped=wt?di:tr},recognize:function(wt){var Bt=this.session;if(!Bt.stopped){this.touchAction.preventDefaults(wt);var _e,tn=this.recognizers,gn=Bt.curRecognizer;(!gn||gn&&gn.state&me)&&(gn=Bt.curRecognizer=null);for(var Cn=0;Cn<tn.length;)_e=tn[Cn],Bt.stopped!==di&&(!gn||_e==gn||_e.canRecognizeWith(gn))?_e.recognize(wt):_e.reset(),!gn&&_e.state&(Le|Fe|ve)&&(gn=Bt.curRecognizer=_e),Cn++}},get:function(wt){if(wt instanceof vn)return wt;for(var Bt=this.recognizers,_e=0;_e<Bt.length;_e++)if(Bt[_e].options.event==wt)return Bt[_e];return null},add:function(wt){if(Dt(wt,"add",this))return this;var Bt=this.get(wt.options.event);return Bt&&this.remove(Bt),this.recognizers.push(wt),wt.manager=this,this.touchAction.update(),wt},remove:function(wt){if(Dt(wt,"remove",this))return this;if(wt=this.get(wt),wt){var Bt=this.recognizers,_e=Ie(Bt,wt);_e!==-1&&(Bt.splice(_e,1),this.touchAction.update())}return this},on:function(wt,Bt){if(wt!==et&&Bt!==et){var _e=this.handlers;return At(ke(wt),function(tn){_e[tn]=_e[tn]||[],_e[tn].push(Bt)}),this}},off:function(wt,Bt){if(wt!==et){var _e=this.handlers;return At(ke(wt),function(tn){Bt?_e[tn]&&_e[tn].splice(Ie(_e[tn],Bt),1):delete _e[tn]}),this}},emit:function(wt,Bt){this.options.domEvents&&Ni(wt,Bt);var _e=this.handlers[wt]&&this.handlers[wt].slice();if(!(!_e||!_e.length)){Bt.type=wt,Bt.preventDefault=function(){Bt.srcEvent.preventDefault()};for(var tn=0;tn<_e.length;)_e[tn](Bt),tn++}},destroy:function(){this.element&&ti(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ti(wt,Bt){var _e=wt.element;if(_e.style){var tn;At(wt.options.cssProps,function(gn,Cn){tn=G(_e.style,Cn),Bt?(wt.oldCssProps[tn]=_e.style[tn],_e.style[tn]=gn):_e.style[tn]=wt.oldCssProps[tn]||""}),Bt||(wt.oldCssProps={})}}function Ni(wt,Bt){var _e=St.createEvent("Event");_e.initEvent(wt,!0,!0),_e.gesture=Bt,Bt.target.dispatchEvent(_e)}Pt(Fn,{INPUT_START:K,INPUT_MOVE:kt,INPUT_END:le,INPUT_CANCEL:ut,STATE_POSSIBLE:ue,STATE_BEGAN:Le,STATE_CHANGED:Fe,STATE_ENDED:ve,STATE_RECOGNIZED:me,STATE_CANCELLED:Ue,STATE_FAILED:Ve,DIRECTION_NONE:Tt,DIRECTION_LEFT:ae,DIRECTION_RIGHT:Y,DIRECTION_UP:I,DIRECTION_DOWN:Yt,DIRECTION_HORIZONTAL:T,DIRECTION_VERTICAL:F,DIRECTION_ALL:Lt,Manager:Mi,Input:be,TouchAction:at,TouchInput:hr,MouseInput:ge,PointerEventInput:Re,TouchMouseInput:Or,SingleTouchInput:Mn,Recognizer:vn,AttrRecognizer:_n,Tap:Ln,Pan:Tn,Swipe:Hn,Pinch:mn,Rotate:kn,Press:Zn,on:Vt,off:J,each:At,merge:Oe,extend:$t,assign:Pt,inherit:De,bindFn:Ge,prefixed:G});var yi=typeof st!="undefined"?st:typeof self!="undefined"?self:{};yi.Hammer=Fn,yt=function(){return Fn}.call(de,k,de,Me),yt!==et&&(Me.exports=yt)})(window,document,"Hammer")},47443:function(Me,de,k){var yt=k(42118);function st(St,Kt){var et=St==null?0:St.length;return!!et&&yt(St,Kt,0)>-1}Me.exports=st},1196:function(Me){function de(k,yt,st){for(var St=-1,Kt=k==null?0:k.length;++St<Kt;)if(st(yt,k[St]))return!0;return!1}Me.exports=de},29750:function(Me){function de(k,yt,st){return k===k&&(st!==void 0&&(k=k<=st?k:st),yt!==void 0&&(k=k>=yt?k:yt)),k}Me.exports=de},41848:function(Me){function de(k,yt,st,St){for(var Kt=k.length,et=st+(St?1:-1);St?et--:++et<Kt;)if(yt(k[et],et,k))return et;return-1}Me.exports=de},42118:function(Me,de,k){var yt=k(41848),st=k(62722),St=k(39375);function Kt(et,Qt,Ut){return Qt===Qt?St(et,Qt,Ut):yt(et,st,Ut)}Me.exports=Kt},74221:function(Me){function de(k,yt,st,St){for(var Kt=st-1,et=k.length;++Kt<et;)if(St(k[Kt],yt))return Kt;return-1}Me.exports=de},62722:function(Me){function de(k){return k!==k}Me.exports=de},65464:function(Me,de,k){var yt=k(29932),st=k(42118),St=k(74221),Kt=k(51717),et=k(6450),Qt=Array.prototype,Ut=Qt.splice;function zt(ft,re,q,Q){var Dt=Q?St:st,At=-1,Ft=re.length,Pt=ft;for(ft===re&&(re=et(re)),q&&(Pt=yt(ft,Kt(q)));++At<Ft;)for(var $t=0,Oe=re[At],De=q?q(Oe):Oe;($t=Dt(Pt,De,$t,Q))>-1;)Pt!==ft&&Ut.call(Pt,$t,1),Ut.call(ft,$t,1);return ft}Me.exports=zt},45652:function(Me,de,k){var yt=k(88668),st=k(47443),St=k(1196),Kt=k(74757),et=k(23593),Qt=k(21814),Ut=200;function zt(ft,re,q){var Q=-1,Dt=st,At=ft.length,Ft=!0,Pt=[],$t=Pt;if(q)Ft=!1,Dt=St;else if(At>=Ut){var Oe=re?null:et(ft);if(Oe)return Qt(Oe);Ft=!1,Dt=Kt,$t=new yt}else $t=re?[]:Pt;t:for(;++Q<At;){var De=ft[Q],Ge=re?re(De):De;if(De=q||De!==0?De:0,Ft&&Ge===Ge){for(var un=$t.length;un--;)if($t[un]===Ge)continue t;re&&$t.push(Ge),Pt.push(De)}else Dt($t,Ge,q)||($t!==Pt&&$t.push(Ge),Pt.push(De))}return Pt}Me.exports=zt},23593:function(Me,de,k){var yt=k(58525),st=k(28117),St=k(21814),Kt=1/0,et=yt&&1/St(new yt([,-0]))[1]==Kt?function(Qt){return new yt(Qt)}:st;Me.exports=et},39375:function(Me){function de(k,yt,st){for(var St=st-1,Kt=k.length;++St<Kt;)if(k[St]===yt)return St;return-1}Me.exports=de},74691:function(Me,de,k){var yt=k(29750),st=k(14841);function St(Kt,et,Qt){return Qt===void 0&&(Qt=et,et=void 0),Qt!==void 0&&(Qt=st(Qt),Qt=Qt===Qt?Qt:0),et!==void 0&&(et=st(et),et=et===et?et:0),yt(st(Kt),et,Qt)}Me.exports=St},51584:function(Me,de,k){var yt=k(44239),st=k(37005),St="[object Boolean]";function Kt(et){return et===!0||et===!1||st(et)&&yt(et)==St}Me.exports=Kt},18446:function(Me,de,k){var yt=k(90939);function st(St,Kt){return yt(St,Kt)}Me.exports=st},14293:function(Me){function de(k){return k==null}Me.exports=de},81763:function(Me,de,k){var yt=k(44239),st=k(37005),St="[object Number]";function Kt(et){return typeof et=="number"||st(et)&&yt(et)==St}Me.exports=Kt},52353:function(Me){function de(k){return k===void 0}Me.exports=de},30236:function(Me,de,k){var yt=k(42980),st=k(21463),St=st(function(Kt,et,Qt,Ut){yt(Kt,et,Qt,Ut)});Me.exports=St},28117:function(Me){function de(){}Me.exports=de},97019:function(Me,de,k){var yt=k(5976),st=k(45604),St=yt(st);Me.exports=St},45604:function(Me,de,k){var yt=k(65464);function st(St,Kt){return St&&St.length&&Kt&&Kt.length?yt(St,Kt):St}Me.exports=st},44908:function(Me,de,k){var yt=k(45652);function st(St){return St&&St.length?yt(St):[]}Me.exports=st},73955:function(Me,de,k){var yt=k(79833),st=0;function St(Kt){var et=++st;return yt(Kt)+et}Me.exports=St},92077:function(Me,de,k){var yt,st;(function(St,Kt){yt=Kt,st=typeof yt=="function"?yt.call(de,k,de,Me):yt,st!==void 0&&(Me.exports=st)})(this,function(){var St,Kt,et="2.0.6",Qt={},Ut={},zt={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},ft={currentLocale:zt.currentLocale,zeroFormat:zt.zeroFormat,nullFormat:zt.nullFormat,defaultFormat:zt.defaultFormat,scalePercentBy100:zt.scalePercentBy100};function re(q,Q){this._input=q,this._value=Q}return St=function(q){var Q,Dt,At,Ft;if(St.isNumeral(q))Q=q.value();else if(q===0||typeof q=="undefined")Q=0;else if(q===null||Kt.isNaN(q))Q=null;else if(typeof q=="string")if(ft.zeroFormat&&q===ft.zeroFormat)Q=0;else if(ft.nullFormat&&q===ft.nullFormat||!q.replace(/[^0-9]+/g,"").length)Q=null;else{for(Dt in Qt)if(Ft=typeof Qt[Dt].regexps.unformat=="function"?Qt[Dt].regexps.unformat():Qt[Dt].regexps.unformat,Ft&&q.match(Ft)){At=Qt[Dt].unformat;break}At=At||St._.stringToNumber,Q=At(q)}else Q=Number(q)||null;return new re(q,Q)},St.version=et,St.isNumeral=function(q){return q instanceof re},St._=Kt={numberToFormat:function(q,Q,Dt){var At=Ut[St.options.currentLocale],Ft=!1,Pt=!1,$t=0,Oe="",De=1e12,Ge=1e9,un=1e6,Te=1e3,Vt="",J=!1,ce,Gt,ke,Ie,B,Ct,G,Mt,Et,U;if(q=q||0,Gt=Math.abs(q),St._.includes(Q,"(")?(Ft=!0,Q=Q.replace(/[\(|\)]/g,"")):(St._.includes(Q,"+")||St._.includes(Q,"-"))&&(Mt=St._.includes(Q,"+")?Q.indexOf("+"):q<0?Q.indexOf("-"):-1,Q=Q.replace(/[\+|\-]/g,"")),St._.includes(Q,"a")&&(ce=Q.match(/a(k|m|b|t)?/),ce=ce?ce[1]:!1,St._.includes(Q," a")&&(Oe=" "),Q=Q.replace(new RegExp(Oe+"a[kmbt]?"),""),Gt>=De&&!ce||ce==="t"?(Oe+=At.abbreviations.trillion,q=q/De):Gt<De&&Gt>=Ge&&!ce||ce==="b"?(Oe+=At.abbreviations.billion,q=q/Ge):Gt<Ge&&Gt>=un&&!ce||ce==="m"?(Oe+=At.abbreviations.million,q=q/un):(Gt<un&&Gt>=Te&&!ce||ce==="k")&&(Oe+=At.abbreviations.thousand,q=q/Te)),St._.includes(Q,"[.]")&&(Pt=!0,Q=Q.replace("[.]",".")),Ct=q.toString().split(".")[0],G=Q.split(".")[1],Et=Q.indexOf(","),$t=(Q.split(".")[0].split(",")[0].match(/0/g)||[]).length,G?(St._.includes(G,"[")?(G=G.replace("]",""),G=G.split("["),Vt=St._.toFixed(q,G[0].length+G[1].length,Dt,G[1].length)):Vt=St._.toFixed(q,G.length,Dt),Ct=Vt.split(".")[0],St._.includes(Vt,".")?Vt=At.delimiters.decimal+Vt.split(".")[1]:Vt="",Pt&&Number(Vt.slice(1))===0&&(Vt="")):Ct=St._.toFixed(q,0,Dt),Oe&&!ce&&Number(Ct)>=1e3&&Oe!==At.abbreviations.trillion)switch(Ct=String(Number(Ct)/1e3),Oe){case At.abbreviations.thousand:Oe=At.abbreviations.million;break;case At.abbreviations.million:Oe=At.abbreviations.billion;break;case At.abbreviations.billion:Oe=At.abbreviations.trillion;break}if(St._.includes(Ct,"-")&&(Ct=Ct.slice(1),J=!0),Ct.length<$t)for(var it=$t-Ct.length;it>0;it--)Ct="0"+Ct;return Et>-1&&(Ct=Ct.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+At.delimiters.thousands)),Q.indexOf(".")===0&&(Ct=""),U=Ct+Vt+(Oe||""),Ft?U=(Ft&&J?"(":"")+U+(Ft&&J?")":""):Mt>=0?U=Mt===0?(J?"-":"+")+U:U+(J?"-":"+"):J&&(U="-"+U),U},stringToNumber:function(q){var Q=Ut[ft.currentLocale],Dt=q,At={thousand:3,million:6,billion:9,trillion:12},Ft,Pt,$t,Oe;if(ft.zeroFormat&&q===ft.zeroFormat)Pt=0;else if(ft.nullFormat&&q===ft.nullFormat||!q.replace(/[^0-9]+/g,"").length)Pt=null;else{Pt=1,Q.delimiters.decimal!=="."&&(q=q.replace(/\./g,"").replace(Q.delimiters.decimal,"."));for(Ft in At)if(Oe=new RegExp("[^a-zA-Z]"+Q.abbreviations[Ft]+"(?:\\)|(\\"+Q.currency.symbol+")?(?:\\))?)?$"),Dt.match(Oe)){Pt*=Math.pow(10,At[Ft]);break}Pt*=(q.split("-").length+Math.min(q.split("(").length-1,q.split(")").length-1))%2?1:-1,q=q.replace(/[^0-9\.]+/g,""),Pt*=Number(q)}return Pt},isNaN:function(q){return typeof q=="number"&&isNaN(q)},includes:function(q,Q){return q.indexOf(Q)!==-1},insert:function(q,Q,Dt){return q.slice(0,Dt)+Q+q.slice(Dt)},reduce:function(q,Q){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof Q!="function")throw new TypeError(Q+" is not a function");var Dt=Object(q),At=Dt.length>>>0,Ft=0,Pt;if(arguments.length===3)Pt=arguments[2];else{for(;Ft<At&&!(Ft in Dt);)Ft++;if(Ft>=At)throw new TypeError("Reduce of empty array with no initial value");Pt=Dt[Ft++]}for(;Ft<At;Ft++)Ft in Dt&&(Pt=Q(Pt,Dt[Ft],Ft,Dt));return Pt},multiplier:function(q){var Q=q.toString().split(".");return Q.length<2?1:Math.pow(10,Q[1].length)},correctionFactor:function(){var q=Array.prototype.slice.call(arguments);return q.reduce(function(Q,Dt){var At=Kt.multiplier(Dt);return Q>At?Q:At},1)},toFixed:function(q,Q,Dt,At){var Ft=q.toString().split("."),Pt=Q-(At||0),$t,Oe,De,Ge;return Ft.length===2?$t=Math.min(Math.max(Ft[1].length,Pt),Q):$t=Pt,De=Math.pow(10,$t),Ge=(Dt(q+"e+"+$t)/De).toFixed($t),At>Q-$t&&(Oe=new RegExp("\\.?0{1,"+(At-(Q-$t))+"}$"),Ge=Ge.replace(Oe,"")),Ge}},St.options=ft,St.formats=Qt,St.locales=Ut,St.locale=function(q){return q&&(ft.currentLocale=q.toLowerCase()),ft.currentLocale},St.localeData=function(q){if(!q)return Ut[ft.currentLocale];if(q=q.toLowerCase(),!Ut[q])throw new Error("Unknown locale : "+q);return Ut[q]},St.reset=function(){for(var q in zt)ft[q]=zt[q]},St.zeroFormat=function(q){ft.zeroFormat=typeof q=="string"?q:null},St.nullFormat=function(q){ft.nullFormat=typeof q=="string"?q:null},St.defaultFormat=function(q){ft.defaultFormat=typeof q=="string"?q:"0.0"},St.register=function(q,Q,Dt){if(Q=Q.toLowerCase(),this[q+"s"][Q])throw new TypeError(Q+" "+q+" already registered.");return this[q+"s"][Q]=Dt,Dt},St.validate=function(q,Q){var Dt,At,Ft,Pt,$t,Oe,De,Ge;if(typeof q!="string"&&(q+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",q)),q=q.trim(),q.match(/^\d+$/))return!0;if(q==="")return!1;try{De=St.localeData(Q)}catch(un){De=St.localeData(St.locale())}return Ft=De.currency.symbol,$t=De.abbreviations,Dt=De.delimiters.decimal,De.delimiters.thousands==="."?At="\\.":At=De.delimiters.thousands,Ge=q.match(/^[^\d]+/),Ge!==null&&(q=q.substr(1),Ge[0]!==Ft)||(Ge=q.match(/[^\d]+$/),Ge!==null&&(q=q.slice(0,-1),Ge[0]!==$t.thousand&&Ge[0]!==$t.million&&Ge[0]!==$t.billion&&Ge[0]!==$t.trillion))?!1:(Oe=new RegExp(At+"{2}"),q.match(/[^\d.,]/g)?!1:(Pt=q.split(Dt),Pt.length>2?!1:Pt.length<2?!!Pt[0].match(/^\d+.*\d$/)&&!Pt[0].match(Oe):Pt[0].length===1?!!Pt[0].match(/^\d+$/)&&!Pt[0].match(Oe)&&!!Pt[1].match(/^\d+$/):!!Pt[0].match(/^\d+.*\d$/)&&!Pt[0].match(Oe)&&!!Pt[1].match(/^\d+$/)))},St.fn=re.prototype={clone:function(){return St(this)},format:function(q,Q){var Dt=this._value,At=q||ft.defaultFormat,Ft,Pt,$t;if(Q=Q||Math.round,Dt===0&&ft.zeroFormat!==null)Pt=ft.zeroFormat;else if(Dt===null&&ft.nullFormat!==null)Pt=ft.nullFormat;else{for(Ft in Qt)if(At.match(Qt[Ft].regexps.format)){$t=Qt[Ft].format;break}$t=$t||St._.numberToFormat,Pt=$t(Dt,At,Q)}return Pt},value:function(){return this._value},input:function(){return this._input},set:function(q){return this._value=Number(q),this},add:function(q){var Q=Kt.correctionFactor.call(null,this._value,q);function Dt(At,Ft,Pt,$t){return At+Math.round(Q*Ft)}return this._value=Kt.reduce([this._value,q],Dt,0)/Q,this},subtract:function(q){var Q=Kt.correctionFactor.call(null,this._value,q);function Dt(At,Ft,Pt,$t){return At-Math.round(Q*Ft)}return this._value=Kt.reduce([q],Dt,Math.round(this._value*Q))/Q,this},multiply:function(q){function Q(Dt,At,Ft,Pt){var $t=Kt.correctionFactor(Dt,At);return Math.round(Dt*$t)*Math.round(At*$t)/Math.round($t*$t)}return this._value=Kt.reduce([this._value,q],Q,1),this},divide:function(q){function Q(Dt,At,Ft,Pt){var $t=Kt.correctionFactor(Dt,At);return Math.round(Dt*$t)/Math.round(At*$t)}return this._value=Kt.reduce([this._value,q],Q),this},difference:function(q){return Math.abs(St(this._value).subtract(q).value())}},St.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(q){var Q=q%10;return~~(q%100/10)===1?"th":Q===1?"st":Q===2?"nd":Q===3?"rd":"th"},currency:{symbol:"$"}}),function(){St.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(q,Q,Dt){var At=St._.includes(Q," BPS")?" ":"",Ft;return q=q*1e4,Q=Q.replace(/\s?BPS/,""),Ft=St._.numberToFormat(q,Q,Dt),St._.includes(Ft,")")?(Ft=Ft.split(""),Ft.splice(-1,0,At+"BPS"),Ft=Ft.join("")):Ft=Ft+At+"BPS",Ft},unformat:function(q){return+(St._.stringToNumber(q)*1e-4).toFixed(15)}})}(),function(){var q={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},Q={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},Dt=q.suffixes.concat(Q.suffixes.filter(function(Ft){return q.suffixes.indexOf(Ft)<0})),At=Dt.join("|");At="("+At.replace("B","B(?!PS)")+")",St.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(At)},format:function(Ft,Pt,$t){var Oe,De=St._.includes(Pt,"ib")?Q:q,Ge=St._.includes(Pt," b")||St._.includes(Pt," ib")?" ":"",un,Te,Vt;for(Pt=Pt.replace(/\s?i?b/,""),un=0;un<=De.suffixes.length;un++)if(Te=Math.pow(De.base,un),Vt=Math.pow(De.base,un+1),Ft===null||Ft===0||Ft>=Te&&Ft<Vt){Ge+=De.suffixes[un],Te>0&&(Ft=Ft/Te);break}return Oe=St._.numberToFormat(Ft,Pt,$t),Oe+Ge},unformat:function(Ft){var Pt=St._.stringToNumber(Ft),$t,Oe;if(Pt){for($t=q.suffixes.length-1;$t>=0;$t--){if(St._.includes(Ft,q.suffixes[$t])){Oe=Math.pow(q.base,$t);break}if(St._.includes(Ft,Q.suffixes[$t])){Oe=Math.pow(Q.base,$t);break}}Pt*=Oe||1}return Pt}})}(),function(){St.register("format","currency",{regexps:{format:/(\$)/},format:function(q,Q,Dt){var At=St.locales[St.options.currentLocale],Ft={before:Q.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:Q.match(/([\+|\-|\)|\s|\$]*)$/)[0]},Pt,$t,Oe;for(Q=Q.replace(/\s?\$\s?/,""),Pt=St._.numberToFormat(q,Q,Dt),q>=0?(Ft.before=Ft.before.replace(/[\-\(]/,""),Ft.after=Ft.after.replace(/[\-\)]/,"")):q<0&&!St._.includes(Ft.before,"-")&&!St._.includes(Ft.before,"(")&&(Ft.before="-"+Ft.before),Oe=0;Oe<Ft.before.length;Oe++)switch($t=Ft.before[Oe],$t){case"$":Pt=St._.insert(Pt,At.currency.symbol,Oe);break;case" ":Pt=St._.insert(Pt," ",Oe+At.currency.symbol.length-1);break}for(Oe=Ft.after.length-1;Oe>=0;Oe--)switch($t=Ft.after[Oe],$t){case"$":Pt=Oe===Ft.after.length-1?Pt+At.currency.symbol:St._.insert(Pt,At.currency.symbol,-(Ft.after.length-(1+Oe)));break;case" ":Pt=Oe===Ft.after.length-1?Pt+" ":St._.insert(Pt," ",-(Ft.after.length-(1+Oe)+At.currency.symbol.length-1));break}return Pt}})}(),function(){St.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(q,Q,Dt){var At,Ft=typeof q=="number"&&!St._.isNaN(q)?q.toExponential():"0e+0",Pt=Ft.split("e");return Q=Q.replace(/e[\+|\-]{1}0/,""),At=St._.numberToFormat(Number(Pt[0]),Q,Dt),At+"e"+Pt[1]},unformat:function(q){var Q=St._.includes(q,"e+")?q.split("e+"):q.split("e-"),Dt=Number(Q[0]),At=Number(Q[1]);At=St._.includes(q,"e-")?At*=-1:At;function Ft(Pt,$t,Oe,De){var Ge=St._.correctionFactor(Pt,$t),un=Pt*Ge*($t*Ge)/(Ge*Ge);return un}return St._.reduce([Dt,Math.pow(10,At)],Ft,1)}})}(),function(){St.register("format","ordinal",{regexps:{format:/(o)/},format:function(q,Q,Dt){var At=St.locales[St.options.currentLocale],Ft,Pt=St._.includes(Q," o")?" ":"";return Q=Q.replace(/\s?o/,""),Pt+=At.ordinal(q),Ft=St._.numberToFormat(q,Q,Dt),Ft+Pt}})}(),function(){St.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(q,Q,Dt){var At=St._.includes(Q," %")?" ":"",Ft;return St.options.scalePercentBy100&&(q=q*100),Q=Q.replace(/\s?\%/,""),Ft=St._.numberToFormat(q,Q,Dt),St._.includes(Ft,")")?(Ft=Ft.split(""),Ft.splice(-1,0,At+"%"),Ft=Ft.join("")):Ft=Ft+At+"%",Ft},unformat:function(q){var Q=St._.stringToNumber(q);return St.options.scalePercentBy100?Q*.01:Q}})}(),function(){St.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(q,Q,Dt){var At=Math.floor(q/60/60),Ft=Math.floor((q-At*60*60)/60),Pt=Math.round(q-At*60*60-Ft*60);return At+":"+(Ft<10?"0"+Ft:Ft)+":"+(Pt<10?"0"+Pt:Pt)},unformat:function(q){var Q=q.split(":"),Dt=0;return Q.length===3?(Dt=Dt+Number(Q[0])*60*60,Dt=Dt+Number(Q[1])*60,Dt=Dt+Number(Q[2])):Q.length===2&&(Dt=Dt+Number(Q[0])*60,Dt=Dt+Number(Q[1])),Number(Dt)}})}(),St})},3614:function(Me,de,k){"use strict";Me.exports=st;var yt=k(80645);function st(B){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(B)?B:new Uint8Array(B||0),this.pos=0,this.type=0,this.length=this.buf.length}st.Varint=0,st.Fixed64=1,st.Bytes=2,st.Fixed32=5;var St=65536*65536,Kt=1/St,et=12,Qt=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");st.prototype={destroy:function(){this.buf=null},readFields:function(B,Ct,G){for(G=G||this.length;this.pos<G;){var Mt=this.readVarint(),Et=Mt>>3,U=this.pos;this.type=Mt&7,B(Et,Ct,this),this.pos===U&&this.skip(Mt)}return Ct},readMessage:function(B,Ct){return this.readFields(B,Ct,this.readVarint()+this.pos)},readFixed32:function(){var B=Vt(this.buf,this.pos);return this.pos+=4,B},readSFixed32:function(){var B=ce(this.buf,this.pos);return this.pos+=4,B},readFixed64:function(){var B=Vt(this.buf,this.pos)+Vt(this.buf,this.pos+4)*St;return this.pos+=8,B},readSFixed64:function(){var B=Vt(this.buf,this.pos)+ce(this.buf,this.pos+4)*St;return this.pos+=8,B},readFloat:function(){var B=yt.read(this.buf,this.pos,!0,23,4);return this.pos+=4,B},readDouble:function(){var B=yt.read(this.buf,this.pos,!0,52,8);return this.pos+=8,B},readVarint:function(B){var Ct=this.buf,G,Mt;return Mt=Ct[this.pos++],G=Mt&127,Mt<128||(Mt=Ct[this.pos++],G|=(Mt&127)<<7,Mt<128)||(Mt=Ct[this.pos++],G|=(Mt&127)<<14,Mt<128)||(Mt=Ct[this.pos++],G|=(Mt&127)<<21,Mt<128)?G:(Mt=Ct[this.pos],G|=(Mt&15)<<28,Ut(G,B,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var B=this.readVarint();return B%2===1?(B+1)/-2:B/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var B=this.readVarint()+this.pos,Ct=this.pos;return this.pos=B,B-Ct>=et&&Qt?ke(this.buf,Ct,B):Gt(this.buf,Ct,B)},readBytes:function(){var B=this.readVarint()+this.pos,Ct=this.buf.subarray(this.pos,B);return this.pos=B,Ct},readPackedVarint:function(B,Ct){if(this.type!==st.Bytes)return B.push(this.readVarint(Ct));var G=zt(this);for(B=B||[];this.pos<G;)B.push(this.readVarint(Ct));return B},readPackedSVarint:function(B){if(this.type!==st.Bytes)return B.push(this.readSVarint());var Ct=zt(this);for(B=B||[];this.pos<Ct;)B.push(this.readSVarint());return B},readPackedBoolean:function(B){if(this.type!==st.Bytes)return B.push(this.readBoolean());var Ct=zt(this);for(B=B||[];this.pos<Ct;)B.push(this.readBoolean());return B},readPackedFloat:function(B){if(this.type!==st.Bytes)return B.push(this.readFloat());var Ct=zt(this);for(B=B||[];this.pos<Ct;)B.push(this.readFloat());return B},readPackedDouble:function(B){if(this.type!==st.Bytes)return B.push(this.readDouble());var Ct=zt(this);for(B=B||[];this.pos<Ct;)B.push(this.readDouble());return B},readPackedFixed32:function(B){if(this.type!==st.Bytes)return B.push(this.readFixed32());var Ct=zt(this);for(B=B||[];this.pos<Ct;)B.push(this.readFixed32());return B},readPackedSFixed32:function(B){if(this.type!==st.Bytes)return B.push(this.readSFixed32());var Ct=zt(this);for(B=B||[];this.pos<Ct;)B.push(this.readSFixed32());return B},readPackedFixed64:function(B){if(this.type!==st.Bytes)return B.push(this.readFixed64());var Ct=zt(this);for(B=B||[];this.pos<Ct;)B.push(this.readFixed64());return B},readPackedSFixed64:function(B){if(this.type!==st.Bytes)return B.push(this.readSFixed64());var Ct=zt(this);for(B=B||[];this.pos<Ct;)B.push(this.readSFixed64());return B},skip:function(B){var Ct=B&7;if(Ct===st.Varint)for(;this.buf[this.pos++]>127;);else if(Ct===st.Bytes)this.pos=this.readVarint()+this.pos;else if(Ct===st.Fixed32)this.pos+=4;else if(Ct===st.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+Ct)},writeTag:function(B,Ct){this.writeVarint(B<<3|Ct)},realloc:function(B){for(var Ct=this.length||16;Ct<this.pos+B;)Ct*=2;if(Ct!==this.length){var G=new Uint8Array(Ct);G.set(this.buf),this.buf=G,this.length=Ct}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(B){this.realloc(4),J(this.buf,B,this.pos),this.pos+=4},writeSFixed32:function(B){this.realloc(4),J(this.buf,B,this.pos),this.pos+=4},writeFixed64:function(B){this.realloc(8),J(this.buf,B&-1,this.pos),J(this.buf,Math.floor(B*Kt),this.pos+4),this.pos+=8},writeSFixed64:function(B){this.realloc(8),J(this.buf,B&-1,this.pos),J(this.buf,Math.floor(B*Kt),this.pos+4),this.pos+=8},writeVarint:function(B){if(B=+B||0,B>268435455||B<0){re(B,this);return}this.realloc(4),this.buf[this.pos++]=B&127|(B>127?128:0),!(B<=127)&&(this.buf[this.pos++]=(B>>>=7)&127|(B>127?128:0),!(B<=127)&&(this.buf[this.pos++]=(B>>>=7)&127|(B>127?128:0),!(B<=127)&&(this.buf[this.pos++]=B>>>7&127)))},writeSVarint:function(B){this.writeVarint(B<0?-B*2-1:B*2)},writeBoolean:function(B){this.writeVarint(!!B)},writeString:function(B){B=String(B),this.realloc(B.length*4),this.pos++;var Ct=this.pos;this.pos=Ie(this.buf,B,this.pos);var G=this.pos-Ct;G>=128&&Dt(Ct,G,this),this.pos=Ct-1,this.writeVarint(G),this.pos+=G},writeFloat:function(B){this.realloc(4),yt.write(this.buf,B,this.pos,!0,23,4),this.pos+=4},writeDouble:function(B){this.realloc(8),yt.write(this.buf,B,this.pos,!0,52,8),this.pos+=8},writeBytes:function(B){var Ct=B.length;this.writeVarint(Ct),this.realloc(Ct);for(var G=0;G<Ct;G++)this.buf[this.pos++]=B[G]},writeRawMessage:function(B,Ct){this.pos++;var G=this.pos;B(Ct,this);var Mt=this.pos-G;Mt>=128&&Dt(G,Mt,this),this.pos=G-1,this.writeVarint(Mt),this.pos+=Mt},writeMessage:function(B,Ct,G){this.writeTag(B,st.Bytes),this.writeRawMessage(Ct,G)},writePackedVarint:function(B,Ct){Ct.length&&this.writeMessage(B,At,Ct)},writePackedSVarint:function(B,Ct){Ct.length&&this.writeMessage(B,Ft,Ct)},writePackedBoolean:function(B,Ct){Ct.length&&this.writeMessage(B,Oe,Ct)},writePackedFloat:function(B,Ct){Ct.length&&this.writeMessage(B,Pt,Ct)},writePackedDouble:function(B,Ct){Ct.length&&this.writeMessage(B,$t,Ct)},writePackedFixed32:function(B,Ct){Ct.length&&this.writeMessage(B,De,Ct)},writePackedSFixed32:function(B,Ct){Ct.length&&this.writeMessage(B,Ge,Ct)},writePackedFixed64:function(B,Ct){Ct.length&&this.writeMessage(B,un,Ct)},writePackedSFixed64:function(B,Ct){Ct.length&&this.writeMessage(B,Te,Ct)},writeBytesField:function(B,Ct){this.writeTag(B,st.Bytes),this.writeBytes(Ct)},writeFixed32Field:function(B,Ct){this.writeTag(B,st.Fixed32),this.writeFixed32(Ct)},writeSFixed32Field:function(B,Ct){this.writeTag(B,st.Fixed32),this.writeSFixed32(Ct)},writeFixed64Field:function(B,Ct){this.writeTag(B,st.Fixed64),this.writeFixed64(Ct)},writeSFixed64Field:function(B,Ct){this.writeTag(B,st.Fixed64),this.writeSFixed64(Ct)},writeVarintField:function(B,Ct){this.writeTag(B,st.Varint),this.writeVarint(Ct)},writeSVarintField:function(B,Ct){this.writeTag(B,st.Varint),this.writeSVarint(Ct)},writeStringField:function(B,Ct){this.writeTag(B,st.Bytes),this.writeString(Ct)},writeFloatField:function(B,Ct){this.writeTag(B,st.Fixed32),this.writeFloat(Ct)},writeDoubleField:function(B,Ct){this.writeTag(B,st.Fixed64),this.writeDouble(Ct)},writeBooleanField:function(B,Ct){this.writeVarintField(B,!!Ct)}};function Ut(B,Ct,G){var Mt=G.buf,Et,U;if(U=Mt[G.pos++],Et=(U&112)>>4,U<128||(U=Mt[G.pos++],Et|=(U&127)<<3,U<128)||(U=Mt[G.pos++],Et|=(U&127)<<10,U<128)||(U=Mt[G.pos++],Et|=(U&127)<<17,U<128)||(U=Mt[G.pos++],Et|=(U&127)<<24,U<128)||(U=Mt[G.pos++],Et|=(U&1)<<31,U<128))return ft(B,Et,Ct);throw new Error("Expected varint not more than 10 bytes")}function zt(B){return B.type===st.Bytes?B.readVarint()+B.pos:B.pos+1}function ft(B,Ct,G){return G?Ct*4294967296+(B>>>0):(Ct>>>0)*4294967296+(B>>>0)}function re(B,Ct){var G,Mt;if(B>=0?(G=B%4294967296|0,Mt=B/4294967296|0):(G=~(-B%4294967296),Mt=~(-B/4294967296),G^4294967295?G=G+1|0:(G=0,Mt=Mt+1|0)),B>=18446744073709552e3||B<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ct.realloc(10),q(G,Mt,Ct),Q(Mt,Ct)}function q(B,Ct,G){G.buf[G.pos++]=B&127|128,B>>>=7,G.buf[G.pos++]=B&127|128,B>>>=7,G.buf[G.pos++]=B&127|128,B>>>=7,G.buf[G.pos++]=B&127|128,B>>>=7,G.buf[G.pos]=B&127}function Q(B,Ct){var G=(B&7)<<4;Ct.buf[Ct.pos++]|=G|((B>>>=3)?128:0),B&&(Ct.buf[Ct.pos++]=B&127|((B>>>=7)?128:0),B&&(Ct.buf[Ct.pos++]=B&127|((B>>>=7)?128:0),B&&(Ct.buf[Ct.pos++]=B&127|((B>>>=7)?128:0),B&&(Ct.buf[Ct.pos++]=B&127|((B>>>=7)?128:0),B&&(Ct.buf[Ct.pos++]=B&127)))))}function Dt(B,Ct,G){var Mt=Ct<=16383?1:Ct<=2097151?2:Ct<=268435455?3:Math.floor(Math.log(Ct)/(Math.LN2*7));G.realloc(Mt);for(var Et=G.pos-1;Et>=B;Et--)G.buf[Et+Mt]=G.buf[Et]}function At(B,Ct){for(var G=0;G<B.length;G++)Ct.writeVarint(B[G])}function Ft(B,Ct){for(var G=0;G<B.length;G++)Ct.writeSVarint(B[G])}function Pt(B,Ct){for(var G=0;G<B.length;G++)Ct.writeFloat(B[G])}function $t(B,Ct){for(var G=0;G<B.length;G++)Ct.writeDouble(B[G])}function Oe(B,Ct){for(var G=0;G<B.length;G++)Ct.writeBoolean(B[G])}function De(B,Ct){for(var G=0;G<B.length;G++)Ct.writeFixed32(B[G])}function Ge(B,Ct){for(var G=0;G<B.length;G++)Ct.writeSFixed32(B[G])}function un(B,Ct){for(var G=0;G<B.length;G++)Ct.writeFixed64(B[G])}function Te(B,Ct){for(var G=0;G<B.length;G++)Ct.writeSFixed64(B[G])}function Vt(B,Ct){return(B[Ct]|B[Ct+1]<<8|B[Ct+2]<<16)+B[Ct+3]*16777216}function J(B,Ct,G){B[G]=Ct,B[G+1]=Ct>>>8,B[G+2]=Ct>>>16,B[G+3]=Ct>>>24}function ce(B,Ct){return(B[Ct]|B[Ct+1]<<8|B[Ct+2]<<16)+(B[Ct+3]<<24)}function Gt(B,Ct,G){for(var Mt="",Et=Ct;Et<G;){var U=B[Et],it=null,te=U>239?4:U>223?3:U>191?2:1;if(Et+te>G)break;var he,xt,ee;te===1?U<128&&(it=U):te===2?(he=B[Et+1],(he&192)===128&&(it=(U&31)<<6|he&63,it<=127&&(it=null))):te===3?(he=B[Et+1],xt=B[Et+2],(he&192)===128&&(xt&192)===128&&(it=(U&15)<<12|(he&63)<<6|xt&63,(it<=2047||it>=55296&&it<=57343)&&(it=null))):te===4&&(he=B[Et+1],xt=B[Et+2],ee=B[Et+3],(he&192)===128&&(xt&192)===128&&(ee&192)===128&&(it=(U&15)<<18|(he&63)<<12|(xt&63)<<6|ee&63,(it<=65535||it>=1114112)&&(it=null))),it===null?(it=65533,te=1):it>65535&&(it-=65536,Mt+=String.fromCharCode(it>>>10&1023|55296),it=56320|it&1023),Mt+=String.fromCharCode(it),Et+=te}return Mt}function ke(B,Ct,G){return Qt.decode(B.subarray(Ct,G))}function Ie(B,Ct,G){for(var Mt=0,Et,U;Mt<Ct.length;Mt++){if(Et=Ct.charCodeAt(Mt),Et>55295&&Et<57344)if(U)if(Et<56320){B[G++]=239,B[G++]=191,B[G++]=189,U=Et;continue}else Et=U-55296<<10|Et-56320|65536,U=null;else{Et>56319||Mt+1===Ct.length?(B[G++]=239,B[G++]=191,B[G++]=189):U=Et;continue}else U&&(B[G++]=239,B[G++]=191,B[G++]=189,U=null);Et<128?B[G++]=Et:(Et<2048?B[G++]=Et>>6|192:(Et<65536?B[G++]=Et>>12|224:(B[G++]=Et>>18|240,B[G++]=Et>>12&63|128),B[G++]=Et>>6&63|128),B[G++]=Et&63|128)}return G}},73807:function(Me){"use strict";var de=Me.exports;Me.exports.isNumber=function(k){return typeof k=="number"},Me.exports.findMin=function(k){if(k.length===0)return 1/0;for(var yt=k[0],st=1;st<k.length;st++)yt=Math.min(yt,k[st]);return yt},Me.exports.findMax=function(k){if(k.length===0)return-1/0;for(var yt=k[0],st=1;st<k.length;st++)yt=Math.max(yt,k[st]);return yt},Me.exports.findMinMulti=function(k){for(var yt=de.findMin(k[0]),st=1;st<k.length;st++)yt=Math.min(yt,de.findMin(k[st]));return yt},Me.exports.findMaxMulti=function(k){for(var yt=de.findMax(k[0]),st=1;st<k.length;st++)yt=Math.max(yt,de.findMax(k[st]));return yt},Me.exports.inside=function(k,yt,st){return k<=st&&st<=yt}},53843:function(Me,de,k){"use strict";var yt=50,st=2,St=Math.log(2),Kt=Me.exports,et=k(73807);function Qt(zt){return 1-Math.abs(zt)}Me.exports.getUnifiedMinMax=function(zt,ft){return Kt.getUnifiedMinMaxMulti([zt],ft)},Me.exports.getUnifiedMinMaxMulti=function(zt,ft){ft=ft||{};var re=!1,q=!1,Q=et.isNumber(ft.width)?ft.width:st,Dt=et.isNumber(ft.size)?ft.size:yt,At=et.isNumber(ft.min)?ft.min:(re=!0,et.findMinMulti(zt)),Ft=et.isNumber(ft.max)?ft.max:(q=!0,et.findMaxMulti(zt)),Pt=Ft-At,$t=Pt/(Dt-1);return re&&(At=At-2*Q*$t),q&&(Ft=Ft+2*Q*$t),{min:At,max:Ft}},Me.exports.create=function(zt,ft){if(ft=ft||{},!zt||zt.length===0)return[];var re=et.isNumber(ft.size)?ft.size:yt,q=et.isNumber(ft.width)?ft.width:st,Q=Kt.getUnifiedMinMax(zt,{size:re,width:q,min:ft.min,max:ft.max}),Dt=Q.min,At=Q.max,Ft=At-Dt,Pt=Ft/(re-1);if(Ft===0)return[{x:Dt,y:1}];for(var $t=[],Oe=0;Oe<re;Oe++)$t.push({x:Dt+Oe*Pt,y:0});var De=function(ke){return Math.floor((ke-Dt)/Pt)},Ge=Ut(Qt,q),un=Ge[q],Te=Ge[q-1]-Ge[q-2],Vt=0;zt.forEach(function(ke){var Ie=De(ke);if(!(Ie+q<0||Ie-q>=$t.length)){var B=Math.max(Ie-q,0),Ct=Ie,G=Math.min(Ie+q,$t.length-1),Mt=B-(Ie-q),Et=Ie+q-G,U=Ge[-q-1+Mt]||0,it=Ge[-q-1+Et]||0,te=un/(un-U-it);Mt>0&&(Vt+=te*(Mt-1)*Te);var he=Math.max(0,Ie-q+1);et.inside(0,$t.length-1,he)&&($t[he].y+=te*1*Te),et.inside(0,$t.length-1,Ct+1)&&($t[Ct+1].y-=te*2*Te),et.inside(0,$t.length-1,G+1)&&($t[G+1].y+=te*1*Te)}});var J=Vt,ce=0,Gt=0;return $t.forEach(function(ke){ce+=ke.y,J+=ce,ke.y=J,Gt+=J}),Gt>0&&$t.forEach(function(ke){ke.y/=Gt}),$t};function Ut(zt,ft){for(var re={},q=0,Q=-ft;Q<=ft;Q++)q+=zt(Q/ft),re[Q]=q;return re}Me.exports.getExpectedValueFromPdf=function(zt){if(!(!zt||zt.length===0)){var ft=0;return zt.forEach(function(re){ft+=re.x*re.y}),ft}},Me.exports.getXWithLeftTailArea=function(zt,ft){if(!(!zt||zt.length===0)){for(var re=0,q=0,Q=0;Q<zt.length&&(q=Q,re+=zt[Q].y,!(re>=ft));Q++);return zt[q].x}},Me.exports.getPerplexity=function(zt){if(!(!zt||zt.length===0)){var ft=0;return zt.forEach(function(re){var q=Math.log(re.y);isFinite(q)&&(ft+=re.y*q)}),ft=-ft/St,Math.pow(2,ft)}}},32676:function(Me,de,k){var yt=k(34155);(function(st,St){Me.exports=St()})(this,function(){"use strict";function st(tt,D){var V={label:0,sent:function(){if(Ot[0]&1)throw Ot[1];return Ot[1]},trys:[],ops:[]},nt,_t,Ot,ge;return ge={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(ge[Symbol.iterator]=function(){return this}),ge;function Ee(je){return function(fn){return Be([je,fn])}}function Be(je){if(nt)throw new TypeError("Generator is already executing.");for(;V;)try{if(nt=1,_t&&(Ot=je[0]&2?_t.return:je[0]?_t.throw||((Ot=_t.return)&&Ot.call(_t),0):_t.next)&&!(Ot=Ot.call(_t,je[1])).done)return Ot;switch(_t=0,Ot&&(je=[je[0]&2,Ot.value]),je[0]){case 0:case 1:Ot=je;break;case 4:return V.label++,{value:je[1],done:!1};case 5:V.label++,_t=je[1],je=[0];continue;case 7:je=V.ops.pop(),V.trys.pop();continue;default:if(Ot=V.trys,!(Ot=Ot.length>0&&Ot[Ot.length-1])&&(je[0]===6||je[0]===2)){V=0;continue}if(je[0]===3&&(!Ot||je[1]>Ot[0]&&je[1]<Ot[3])){V.label=je[1];break}if(je[0]===6&&V.label<Ot[1]){V.label=Ot[1],Ot=je;break}if(Ot&&V.label<Ot[2]){V.label=Ot[2],V.ops.push(je);break}Ot[2]&&V.ops.pop(),V.trys.pop();continue}je=D.call(tt,V)}catch(fn){je=[6,fn],_t=0}finally{nt=Ot=0}if(je[0]&5)throw je[1];return{value:je[0]?je[1]:void 0,done:!0}}}var St=function(){function tt(D,V){this.next=null,this.key=D,this.data=V,this.left=null,this.right=null}return tt}();function Kt(tt,D){return tt>D?1:tt<D?-1:0}function et(tt,D,V){for(var nt=new St(null,null),_t=nt,Ot=nt;;){var ge=V(tt,D.key);if(ge<0){if(D.left===null)break;if(V(tt,D.left.key)<0){var Ee=D.left;if(D.left=Ee.right,Ee.right=D,D=Ee,D.left===null)break}Ot.left=D,Ot=D,D=D.left}else if(ge>0){if(D.right===null)break;if(V(tt,D.right.key)>0){var Ee=D.right;if(D.right=Ee.left,Ee.left=D,D=Ee,D.right===null)break}_t.right=D,_t=D,D=D.right}else break}return _t.right=D.left,Ot.left=D.right,D.left=nt.right,D.right=nt.left,D}function Qt(tt,D,V,nt){var _t=new St(tt,D);if(V===null)return _t.left=_t.right=null,_t;V=et(tt,V,nt);var Ot=nt(tt,V.key);return Ot<0?(_t.left=V.left,_t.right=V,V.left=null):Ot>=0&&(_t.right=V.right,_t.left=V,V.right=null),_t}function Ut(tt,D,V){var nt=null,_t=null;if(D){D=et(tt,D,V);var Ot=V(D.key,tt);Ot===0?(nt=D.left,_t=D.right):Ot<0?(_t=D.right,D.right=null,nt=D):(nt=D.left,D.left=null,_t=D)}return{left:nt,right:_t}}function zt(tt,D,V){return D===null?tt:(tt===null||(D=et(tt.key,D,V),D.left=tt),D)}function ft(tt,D,V,nt,_t){if(tt){nt(""+D+(V?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+_t(tt)+`
`);var Ot=D+(V?"    ":"\u2502   ");tt.left&&ft(tt.left,Ot,!1,nt,_t),tt.right&&ft(tt.right,Ot,!0,nt,_t)}}var re=function(){function tt(D){D===void 0&&(D=Kt),this._root=null,this._size=0,this._comparator=D}return tt.prototype.insert=function(D,V){return this._size++,this._root=Qt(D,V,this._root,this._comparator)},tt.prototype.add=function(D,V){var nt=new St(D,V);this._root===null&&(nt.left=nt.right=null,this._size++,this._root=nt);var _t=this._comparator,Ot=et(D,this._root,_t),ge=_t(D,Ot.key);return ge===0?this._root=Ot:(ge<0?(nt.left=Ot.left,nt.right=Ot,Ot.left=null):ge>0&&(nt.right=Ot.right,nt.left=Ot,Ot.right=null),this._size++,this._root=nt),this._root},tt.prototype.remove=function(D){this._root=this._remove(D,this._root,this._comparator)},tt.prototype._remove=function(D,V,nt){var _t;if(V===null)return null;V=et(D,V,nt);var Ot=nt(D,V.key);return Ot===0?(V.left===null?_t=V.right:(_t=et(D,V.left,nt),_t.right=V.right),this._size--,_t):V},tt.prototype.pop=function(){var D=this._root;if(D){for(;D.left;)D=D.left;return this._root=et(D.key,this._root,this._comparator),this._root=this._remove(D.key,this._root,this._comparator),{key:D.key,data:D.data}}return null},tt.prototype.findStatic=function(D){for(var V=this._root,nt=this._comparator;V;){var _t=nt(D,V.key);if(_t===0)return V;_t<0?V=V.left:V=V.right}return null},tt.prototype.find=function(D){return this._root&&(this._root=et(D,this._root,this._comparator),this._comparator(D,this._root.key)!==0)?null:this._root},tt.prototype.contains=function(D){for(var V=this._root,nt=this._comparator;V;){var _t=nt(D,V.key);if(_t===0)return!0;_t<0?V=V.left:V=V.right}return!1},tt.prototype.forEach=function(D,V){for(var nt=this._root,_t=[],Ot=!1;!Ot;)nt!==null?(_t.push(nt),nt=nt.left):_t.length!==0?(nt=_t.pop(),D.call(V,nt),nt=nt.right):Ot=!0;return this},tt.prototype.range=function(D,V,nt,_t){for(var Ot=[],ge=this._comparator,Ee=this._root,Be;Ot.length!==0||Ee;)if(Ee)Ot.push(Ee),Ee=Ee.left;else{if(Ee=Ot.pop(),Be=ge(Ee.key,V),Be>0)break;if(ge(Ee.key,D)>=0&&nt.call(_t,Ee))return this;Ee=Ee.right}return this},tt.prototype.keys=function(){var D=[];return this.forEach(function(V){var nt=V.key;return D.push(nt)}),D},tt.prototype.values=function(){var D=[];return this.forEach(function(V){var nt=V.data;return D.push(nt)}),D},tt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},tt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},tt.prototype.minNode=function(D){if(D===void 0&&(D=this._root),D)for(;D.left;)D=D.left;return D},tt.prototype.maxNode=function(D){if(D===void 0&&(D=this._root),D)for(;D.right;)D=D.right;return D},tt.prototype.at=function(D){for(var V=this._root,nt=!1,_t=0,Ot=[];!nt;)if(V)Ot.push(V),V=V.left;else if(Ot.length>0){if(V=Ot.pop(),_t===D)return V;_t++,V=V.right}else nt=!0;return null},tt.prototype.next=function(D){var V=this._root,nt=null;if(D.right){for(nt=D.right;nt.left;)nt=nt.left;return nt}for(var _t=this._comparator;V;){var Ot=_t(D.key,V.key);if(Ot===0)break;Ot<0?(nt=V,V=V.left):V=V.right}return nt},tt.prototype.prev=function(D){var V=this._root,nt=null;if(D.left!==null){for(nt=D.left;nt.right;)nt=nt.right;return nt}for(var _t=this._comparator;V;){var Ot=_t(D.key,V.key);if(Ot===0)break;Ot<0?V=V.left:(nt=V,V=V.right)}return nt},tt.prototype.clear=function(){return this._root=null,this._size=0,this},tt.prototype.toList=function(){return Dt(this._root)},tt.prototype.load=function(D,V,nt){V===void 0&&(V=[]),nt===void 0&&(nt=!1);var _t=D.length,Ot=this._comparator;if(nt&&Pt(D,V,0,_t-1,Ot),this._root===null)this._root=q(D,V,0,_t),this._size=_t;else{var ge=Ft(this.toList(),Q(D,V),Ot);_t=this._size+_t,this._root=At({head:ge},0,_t)}return this},tt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(tt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(tt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),tt.prototype.toString=function(D){D===void 0&&(D=function(nt){return String(nt.key)});var V=[];return ft(this._root,"",!0,function(nt){return V.push(nt)},D),V.join("")},tt.prototype.update=function(D,V,nt){var _t=this._comparator,Ot=Ut(D,this._root,_t),ge=Ot.left,Ee=Ot.right;_t(D,V)<0?Ee=Qt(V,nt,Ee,_t):ge=Qt(V,nt,ge,_t),this._root=zt(ge,Ee,_t)},tt.prototype.split=function(D){return Ut(D,this._root,this._comparator)},tt.prototype[Symbol.iterator]=function(){var D,V,nt;return st(this,function(_t){switch(_t.label){case 0:D=this._root,V=[],nt=!1,_t.label=1;case 1:return nt?[3,6]:D===null?[3,2]:(V.push(D),D=D.left,[3,5]);case 2:return V.length===0?[3,4]:(D=V.pop(),[4,D]);case 3:return _t.sent(),D=D.right,[3,5];case 4:nt=!0,_t.label=5;case 5:return[3,1];case 6:return[2]}})},tt}();function q(tt,D,V,nt){var _t=nt-V;if(_t>0){var Ot=V+Math.floor(_t/2),ge=tt[Ot],Ee=D[Ot],Be=new St(ge,Ee);return Be.left=q(tt,D,V,Ot),Be.right=q(tt,D,Ot+1,nt),Be}return null}function Q(tt,D){for(var V=new St(null,null),nt=V,_t=0;_t<tt.length;_t++)nt=nt.next=new St(tt[_t],D[_t]);return nt.next=null,V.next}function Dt(tt){for(var D=tt,V=[],nt=!1,_t=new St(null,null),Ot=_t;!nt;)D?(V.push(D),D=D.left):V.length>0?(D=Ot=Ot.next=V.pop(),D=D.right):nt=!0;return Ot.next=null,_t.next}function At(tt,D,V){var nt=V-D;if(nt>0){var _t=D+Math.floor(nt/2),Ot=At(tt,D,_t),ge=tt.head;return ge.left=Ot,tt.head=tt.head.next,ge.right=At(tt,_t+1,V),ge}return null}function Ft(tt,D,V){for(var nt=new St(null,null),_t=nt,Ot=tt,ge=D;Ot!==null&&ge!==null;)V(Ot.key,ge.key)<0?(_t.next=Ot,Ot=Ot.next):(_t.next=ge,ge=ge.next),_t=_t.next;return Ot!==null?_t.next=Ot:ge!==null&&(_t.next=ge),nt.next}function Pt(tt,D,V,nt,_t){if(!(V>=nt)){for(var Ot=tt[V+nt>>1],ge=V-1,Ee=nt+1;;){do ge++;while(_t(tt[ge],Ot)<0);do Ee--;while(_t(tt[Ee],Ot)>0);if(ge>=Ee)break;var Be=tt[ge];tt[ge]=tt[Ee],tt[Ee]=Be,Be=D[ge],D[ge]=D[Ee],D[Ee]=Be}Pt(tt,D,V,Ee,_t),Pt(tt,D,Ee+1,nt,_t)}}const $t=(tt,D)=>tt.ll.x<=D.x&&D.x<=tt.ur.x&&tt.ll.y<=D.y&&D.y<=tt.ur.y,Oe=(tt,D)=>{if(D.ur.x<tt.ll.x||tt.ur.x<D.ll.x||D.ur.y<tt.ll.y||tt.ur.y<D.ll.y)return null;const V=tt.ll.x<D.ll.x?D.ll.x:tt.ll.x,nt=tt.ur.x<D.ur.x?tt.ur.x:D.ur.x,_t=tt.ll.y<D.ll.y?D.ll.y:tt.ll.y,Ot=tt.ur.y<D.ur.y?tt.ur.y:D.ur.y;return{ll:{x:V,y:_t},ur:{x:nt,y:Ot}}};let De=Number.EPSILON;De===void 0&&(De=Math.pow(2,-52));const Ge=De*De,un=(tt,D)=>{if(-De<tt&&tt<De&&-De<D&&D<De)return 0;const V=tt-D;return V*V<Ge*tt*D?0:tt<D?-1:1};class Te{constructor(){this.reset()}reset(){this.xRounder=new Vt,this.yRounder=new Vt}round(D,V){return{x:this.xRounder.round(D),y:this.yRounder.round(V)}}}class Vt{constructor(){this.tree=new re,this.round(0)}round(D){const V=this.tree.add(D),nt=this.tree.prev(V);if(nt!==null&&un(V.key,nt.key)===0)return this.tree.remove(D),nt.key;const _t=this.tree.next(V);return _t!==null&&un(V.key,_t.key)===0?(this.tree.remove(D),_t.key):D}}const J=new Te,ce=11102230246251565e-32,Gt=134217729,ke=(3+8*ce)*ce;function Ie(tt,D,V,nt,_t){let Ot,ge,Ee,Be,je=D[0],fn=nt[0],Re=0,Ye=0;fn>je==fn>-je?(Ot=je,je=D[++Re]):(Ot=fn,fn=nt[++Ye]);let cn=0;if(Re<tt&&Ye<V)for(fn>je==fn>-je?(ge=je+Ot,Ee=Ot-(ge-je),je=D[++Re]):(ge=fn+Ot,Ee=Ot-(ge-fn),fn=nt[++Ye]),Ot=ge,Ee!==0&&(_t[cn++]=Ee);Re<tt&&Ye<V;)fn>je==fn>-je?(ge=Ot+je,Be=ge-Ot,Ee=Ot-(ge-Be)+(je-Be),je=D[++Re]):(ge=Ot+fn,Be=ge-Ot,Ee=Ot-(ge-Be)+(fn-Be),fn=nt[++Ye]),Ot=ge,Ee!==0&&(_t[cn++]=Ee);for(;Re<tt;)ge=Ot+je,Be=ge-Ot,Ee=Ot-(ge-Be)+(je-Be),je=D[++Re],Ot=ge,Ee!==0&&(_t[cn++]=Ee);for(;Ye<V;)ge=Ot+fn,Be=ge-Ot,Ee=Ot-(ge-Be)+(fn-Be),fn=nt[++Ye],Ot=ge,Ee!==0&&(_t[cn++]=Ee);return(Ot!==0||cn===0)&&(_t[cn++]=Ot),cn}function B(tt,D){let V=D[0];for(let nt=1;nt<tt;nt++)V+=D[nt];return V}function Ct(tt){return new Float64Array(tt)}const G=(3+16*ce)*ce,Mt=(2+12*ce)*ce,Et=(9+64*ce)*ce*ce,U=Ct(4),it=Ct(8),te=Ct(12),he=Ct(16),xt=Ct(4);function ee(tt,D,V,nt,_t,Ot,ge){let Ee,Be,je,fn,Re,Ye,cn,sn,Mn,Vn,Un,Jn,hr,Ir,Qr,Sr,Or,zr;const ci=tt-_t,Ti=V-_t,Ci=D-Ot,ri=nt-Ot;Ir=ci*ri,Ye=Gt*ci,cn=Ye-(Ye-ci),sn=ci-cn,Ye=Gt*ri,Mn=Ye-(Ye-ri),Vn=ri-Mn,Qr=sn*Vn-(Ir-cn*Mn-sn*Mn-cn*Vn),Sr=Ci*Ti,Ye=Gt*Ci,cn=Ye-(Ye-Ci),sn=Ci-cn,Ye=Gt*Ti,Mn=Ye-(Ye-Ti),Vn=Ti-Mn,Or=sn*Vn-(Sr-cn*Mn-sn*Mn-cn*Vn),Un=Qr-Or,Re=Qr-Un,U[0]=Qr-(Un+Re)+(Re-Or),Jn=Ir+Un,Re=Jn-Ir,hr=Ir-(Jn-Re)+(Un-Re),Un=hr-Sr,Re=hr-Un,U[1]=hr-(Un+Re)+(Re-Sr),zr=Jn+Un,Re=zr-Jn,U[2]=Jn-(zr-Re)+(Un-Re),U[3]=zr;let Hi=B(4,U),fo=Mt*ge;if(Hi>=fo||-Hi>=fo||(Re=tt-ci,Ee=tt-(ci+Re)+(Re-_t),Re=V-Ti,je=V-(Ti+Re)+(Re-_t),Re=D-Ci,Be=D-(Ci+Re)+(Re-Ot),Re=nt-ri,fn=nt-(ri+Re)+(Re-Ot),Ee===0&&Be===0&&je===0&&fn===0)||(fo=Et*ge+ke*Math.abs(Hi),Hi+=ci*fn+ri*Ee-(Ci*je+Ti*Be),Hi>=fo||-Hi>=fo))return Hi;Ir=Ee*ri,Ye=Gt*Ee,cn=Ye-(Ye-Ee),sn=Ee-cn,Ye=Gt*ri,Mn=Ye-(Ye-ri),Vn=ri-Mn,Qr=sn*Vn-(Ir-cn*Mn-sn*Mn-cn*Vn),Sr=Be*Ti,Ye=Gt*Be,cn=Ye-(Ye-Be),sn=Be-cn,Ye=Gt*Ti,Mn=Ye-(Ye-Ti),Vn=Ti-Mn,Or=sn*Vn-(Sr-cn*Mn-sn*Mn-cn*Vn),Un=Qr-Or,Re=Qr-Un,xt[0]=Qr-(Un+Re)+(Re-Or),Jn=Ir+Un,Re=Jn-Ir,hr=Ir-(Jn-Re)+(Un-Re),Un=hr-Sr,Re=hr-Un,xt[1]=hr-(Un+Re)+(Re-Sr),zr=Jn+Un,Re=zr-Jn,xt[2]=Jn-(zr-Re)+(Un-Re),xt[3]=zr;const es=Ie(4,U,4,xt,it);Ir=ci*fn,Ye=Gt*ci,cn=Ye-(Ye-ci),sn=ci-cn,Ye=Gt*fn,Mn=Ye-(Ye-fn),Vn=fn-Mn,Qr=sn*Vn-(Ir-cn*Mn-sn*Mn-cn*Vn),Sr=Ci*je,Ye=Gt*Ci,cn=Ye-(Ye-Ci),sn=Ci-cn,Ye=Gt*je,Mn=Ye-(Ye-je),Vn=je-Mn,Or=sn*Vn-(Sr-cn*Mn-sn*Mn-cn*Vn),Un=Qr-Or,Re=Qr-Un,xt[0]=Qr-(Un+Re)+(Re-Or),Jn=Ir+Un,Re=Jn-Ir,hr=Ir-(Jn-Re)+(Un-Re),Un=hr-Sr,Re=hr-Un,xt[1]=hr-(Un+Re)+(Re-Sr),zr=Jn+Un,Re=zr-Jn,xt[2]=Jn-(zr-Re)+(Un-Re),xt[3]=zr;const so=Ie(es,it,4,xt,te);Ir=Ee*fn,Ye=Gt*Ee,cn=Ye-(Ye-Ee),sn=Ee-cn,Ye=Gt*fn,Mn=Ye-(Ye-fn),Vn=fn-Mn,Qr=sn*Vn-(Ir-cn*Mn-sn*Mn-cn*Vn),Sr=Be*je,Ye=Gt*Be,cn=Ye-(Ye-Be),sn=Be-cn,Ye=Gt*je,Mn=Ye-(Ye-je),Vn=je-Mn,Or=sn*Vn-(Sr-cn*Mn-sn*Mn-cn*Vn),Un=Qr-Or,Re=Qr-Un,xt[0]=Qr-(Un+Re)+(Re-Or),Jn=Ir+Un,Re=Jn-Ir,hr=Ir-(Jn-Re)+(Un-Re),Un=hr-Sr,Re=hr-Un,xt[1]=hr-(Un+Re)+(Re-Sr),zr=Jn+Un,Re=zr-Jn,xt[2]=Jn-(zr-Re)+(Un-Re),xt[3]=zr;const va=Ie(so,te,4,xt,he);return he[va-1]}function qt(tt,D,V,nt,_t,Ot){const ge=(D-Ot)*(V-_t),Ee=(tt-_t)*(nt-Ot),Be=ge-Ee,je=Math.abs(ge+Ee);return Math.abs(Be)>=G*je?Be:-ee(tt,D,V,nt,_t,Ot,je)}const pe=(tt,D)=>tt.x*D.y-tt.y*D.x,Ce=(tt,D)=>tt.x*D.x+tt.y*D.y,vt=(tt,D,V)=>{const nt=qt(tt.x,tt.y,D.x,D.y,V.x,V.y);return nt>0?-1:nt<0?1:0},K=tt=>Math.sqrt(Ce(tt,tt)),kt=(tt,D,V)=>{const nt={x:D.x-tt.x,y:D.y-tt.y},_t={x:V.x-tt.x,y:V.y-tt.y};return pe(_t,nt)/K(_t)/K(nt)},le=(tt,D,V)=>{const nt={x:D.x-tt.x,y:D.y-tt.y},_t={x:V.x-tt.x,y:V.y-tt.y};return Ce(_t,nt)/K(_t)/K(nt)},ut=(tt,D,V)=>D.y===0?null:{x:tt.x+D.x/D.y*(V-tt.y),y:V},Tt=(tt,D,V)=>D.x===0?null:{x:V,y:tt.y+D.y/D.x*(V-tt.x)},ae=(tt,D,V,nt)=>{if(D.x===0)return Tt(V,nt,tt.x);if(nt.x===0)return Tt(tt,D,V.x);if(D.y===0)return ut(V,nt,tt.y);if(nt.y===0)return ut(tt,D,V.y);const _t=pe(D,nt);if(_t==0)return null;const Ot={x:V.x-tt.x,y:V.y-tt.y},ge=pe(Ot,D)/_t,Ee=pe(Ot,nt)/_t,Be=tt.x+Ee*D.x,je=V.x+ge*nt.x,fn=tt.y+Ee*D.y,Re=V.y+ge*nt.y,Ye=(Be+je)/2,cn=(fn+Re)/2;return{x:Ye,y:cn}};class Y{static compare(D,V){const nt=Y.comparePoints(D.point,V.point);return nt!==0?nt:(D.point!==V.point&&D.link(V),D.isLeft!==V.isLeft?D.isLeft?1:-1:Yt.compare(D.segment,V.segment))}static comparePoints(D,V){return D.x<V.x?-1:D.x>V.x?1:D.y<V.y?-1:D.y>V.y?1:0}constructor(D,V){D.events===void 0?D.events=[this]:D.events.push(this),this.point=D,this.isLeft=V}link(D){if(D.point===this.point)throw new Error("Tried to link already linked events");const V=D.point.events;for(let nt=0,_t=V.length;nt<_t;nt++){const Ot=V[nt];this.point.events.push(Ot),Ot.point=this.point}this.checkForConsuming()}checkForConsuming(){const D=this.point.events.length;for(let V=0;V<D;V++){const nt=this.point.events[V];if(nt.segment.consumedBy===void 0)for(let _t=V+1;_t<D;_t++){const Ot=this.point.events[_t];Ot.consumedBy===void 0&&nt.otherSE.point.events===Ot.otherSE.point.events&&nt.segment.consume(Ot.segment)}}}getAvailableLinkedEvents(){const D=[];for(let V=0,nt=this.point.events.length;V<nt;V++){const _t=this.point.events[V];_t!==this&&!_t.segment.ringOut&&_t.segment.isInResult()&&D.push(_t)}return D}getLeftmostComparator(D){const V=new Map,nt=_t=>{const Ot=_t.otherSE;V.set(_t,{sine:kt(this.point,D.point,Ot.point),cosine:le(this.point,D.point,Ot.point)})};return(_t,Ot)=>{V.has(_t)||nt(_t),V.has(Ot)||nt(Ot);const{sine:ge,cosine:Ee}=V.get(_t),{sine:Be,cosine:je}=V.get(Ot);return ge>=0&&Be>=0?Ee<je?1:Ee>je?-1:0:ge<0&&Be<0?Ee<je?-1:Ee>je?1:0:Be<ge?-1:Be>ge?1:0}}}let I=0;class Yt{static compare(D,V){const nt=D.leftSE.point.x,_t=V.leftSE.point.x,Ot=D.rightSE.point.x,ge=V.rightSE.point.x;if(ge<nt)return 1;if(Ot<_t)return-1;const Ee=D.leftSE.point.y,Be=V.leftSE.point.y,je=D.rightSE.point.y,fn=V.rightSE.point.y;if(nt<_t){if(Be<Ee&&Be<je)return 1;if(Be>Ee&&Be>je)return-1;const Re=D.comparePoint(V.leftSE.point);if(Re<0)return 1;if(Re>0)return-1;const Ye=V.comparePoint(D.rightSE.point);return Ye!==0?Ye:-1}if(nt>_t){if(Ee<Be&&Ee<fn)return-1;if(Ee>Be&&Ee>fn)return 1;const Re=V.comparePoint(D.leftSE.point);if(Re!==0)return Re;const Ye=D.comparePoint(V.rightSE.point);return Ye<0?1:Ye>0?-1:1}if(Ee<Be)return-1;if(Ee>Be)return 1;if(Ot<ge){const Re=V.comparePoint(D.rightSE.point);if(Re!==0)return Re}if(Ot>ge){const Re=D.comparePoint(V.rightSE.point);if(Re<0)return 1;if(Re>0)return-1}if(Ot!==ge){const Re=je-Ee,Ye=Ot-nt,cn=fn-Be,sn=ge-_t;if(Re>Ye&&cn<sn)return 1;if(Re<Ye&&cn>sn)return-1}return Ot>ge?1:Ot<ge||je<fn?-1:je>fn?1:D.id<V.id?-1:D.id>V.id?1:0}constructor(D,V,nt,_t){this.id=++I,this.leftSE=D,D.segment=this,D.otherSE=V,this.rightSE=V,V.segment=this,V.otherSE=D,this.rings=nt,this.windings=_t}static fromRing(D,V,nt){let _t,Ot,ge;const Ee=Y.comparePoints(D,V);if(Ee<0)_t=D,Ot=V,ge=1;else if(Ee>0)_t=V,Ot=D,ge=-1;else throw new Error(`Tried to create degenerate segment at [${D.x}, ${D.y}]`);const Be=new Y(_t,!0),je=new Y(Ot,!1);return new Yt(Be,je,[nt],[ge])}replaceRightSE(D){this.rightSE=D,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const D=this.leftSE.point.y,V=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:D<V?D:V},ur:{x:this.rightSE.point.x,y:D>V?D:V}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(D){return D.x===this.leftSE.point.x&&D.y===this.leftSE.point.y||D.x===this.rightSE.point.x&&D.y===this.rightSE.point.y}comparePoint(D){if(this.isAnEndpoint(D))return 0;const V=this.leftSE.point,nt=this.rightSE.point,_t=this.vector();if(V.x===nt.x)return D.x===V.x?0:D.x<V.x?1:-1;const Ot=(D.y-V.y)/_t.y,ge=V.x+Ot*_t.x;if(D.x===ge)return 0;const Ee=(D.x-V.x)/_t.x,Be=V.y+Ee*_t.y;return D.y===Be?0:D.y<Be?-1:1}getIntersection(D){const V=this.bbox(),nt=D.bbox(),_t=Oe(V,nt);if(_t===null)return null;const Ot=this.leftSE.point,ge=this.rightSE.point,Ee=D.leftSE.point,Be=D.rightSE.point,je=$t(V,Ee)&&this.comparePoint(Ee)===0,fn=$t(nt,Ot)&&D.comparePoint(Ot)===0,Re=$t(V,Be)&&this.comparePoint(Be)===0,Ye=$t(nt,ge)&&D.comparePoint(ge)===0;if(fn&&je)return Ye&&!Re?ge:!Ye&&Re?Be:null;if(fn)return Re&&Ot.x===Be.x&&Ot.y===Be.y?null:Ot;if(je)return Ye&&ge.x===Ee.x&&ge.y===Ee.y?null:Ee;if(Ye&&Re)return null;if(Ye)return ge;if(Re)return Be;const cn=ae(Ot,this.vector(),Ee,D.vector());return cn===null||!$t(_t,cn)?null:J.round(cn.x,cn.y)}split(D){const V=[],nt=D.events!==void 0,_t=new Y(D,!0),Ot=new Y(D,!1),ge=this.rightSE;this.replaceRightSE(Ot),V.push(Ot),V.push(_t);const Ee=new Yt(_t,ge,this.rings.slice(),this.windings.slice());return Y.comparePoints(Ee.leftSE.point,Ee.rightSE.point)>0&&Ee.swapEvents(),Y.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),nt&&(_t.checkForConsuming(),Ot.checkForConsuming()),V}swapEvents(){const D=this.rightSE;this.rightSE=this.leftSE,this.leftSE=D,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let V=0,nt=this.windings.length;V<nt;V++)this.windings[V]*=-1}consume(D){let V=this,nt=D;for(;V.consumedBy;)V=V.consumedBy;for(;nt.consumedBy;)nt=nt.consumedBy;const _t=Yt.compare(V,nt);if(_t!==0){if(_t>0){const Ot=V;V=nt,nt=Ot}if(V.prev===nt){const Ot=V;V=nt,nt=Ot}for(let Ot=0,ge=nt.rings.length;Ot<ge;Ot++){const Ee=nt.rings[Ot],Be=nt.windings[Ot],je=V.rings.indexOf(Ee);je===-1?(V.rings.push(Ee),V.windings.push(Be)):V.windings[je]+=Be}nt.rings=null,nt.windings=null,nt.consumedBy=V,nt.leftSE.consumedBy=V.leftSE,nt.rightSE.consumedBy=V.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const D=this.prev.consumedBy||this.prev;this._beforeState=D.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const D=this.beforeState();this._afterState={rings:D.rings.slice(0),windings:D.windings.slice(0),multiPolys:[]};const V=this._afterState.rings,nt=this._afterState.windings,_t=this._afterState.multiPolys;for(let Ee=0,Be=this.rings.length;Ee<Be;Ee++){const je=this.rings[Ee],fn=this.windings[Ee],Re=V.indexOf(je);Re===-1?(V.push(je),nt.push(fn)):nt[Re]+=fn}const Ot=[],ge=[];for(let Ee=0,Be=V.length;Ee<Be;Ee++){if(nt[Ee]===0)continue;const je=V[Ee],fn=je.poly;if(ge.indexOf(fn)===-1)if(je.isExterior)Ot.push(fn);else{ge.indexOf(fn)===-1&&ge.push(fn);const Re=Ot.indexOf(je.poly);Re!==-1&&Ot.splice(Re,1)}}for(let Ee=0,Be=Ot.length;Ee<Be;Ee++){const je=Ot[Ee].multiPoly;_t.indexOf(je)===-1&&_t.push(je)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const D=this.beforeState().multiPolys,V=this.afterState().multiPolys;switch(Qe.type){case"union":{const nt=D.length===0,_t=V.length===0;this._isInResult=nt!==_t;break}case"intersection":{let nt,_t;D.length<V.length?(nt=D.length,_t=V.length):(nt=V.length,_t=D.length),this._isInResult=_t===Qe.numMultiPolys&&nt<_t;break}case"xor":{const nt=Math.abs(D.length-V.length);this._isInResult=nt%2===1;break}case"difference":{const nt=_t=>_t.length===1&&_t[0].isSubject;this._isInResult=nt(D)!==nt(V);break}default:throw new Error(`Unrecognized operation type found ${Qe.type}`)}return this._isInResult}}class T{constructor(D,V,nt){if(!Array.isArray(D)||D.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=V,this.isExterior=nt,this.segments=[],typeof D[0][0]!="number"||typeof D[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const _t=J.round(D[0][0],D[0][1]);this.bbox={ll:{x:_t.x,y:_t.y},ur:{x:_t.x,y:_t.y}};let Ot=_t;for(let ge=1,Ee=D.length;ge<Ee;ge++){if(typeof D[ge][0]!="number"||typeof D[ge][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let Be=J.round(D[ge][0],D[ge][1]);Be.x===Ot.x&&Be.y===Ot.y||(this.segments.push(Yt.fromRing(Ot,Be,this)),Be.x<this.bbox.ll.x&&(this.bbox.ll.x=Be.x),Be.y<this.bbox.ll.y&&(this.bbox.ll.y=Be.y),Be.x>this.bbox.ur.x&&(this.bbox.ur.x=Be.x),Be.y>this.bbox.ur.y&&(this.bbox.ur.y=Be.y),Ot=Be)}(_t.x!==Ot.x||_t.y!==Ot.y)&&this.segments.push(Yt.fromRing(Ot,_t,this))}getSweepEvents(){const D=[];for(let V=0,nt=this.segments.length;V<nt;V++){const _t=this.segments[V];D.push(_t.leftSE),D.push(_t.rightSE)}return D}}class F{constructor(D,V){if(!Array.isArray(D))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new T(D[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let nt=1,_t=D.length;nt<_t;nt++){const Ot=new T(D[nt],this,!1);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.interiorRings.push(Ot)}this.multiPoly=V}getSweepEvents(){const D=this.exteriorRing.getSweepEvents();for(let V=0,nt=this.interiorRings.length;V<nt;V++){const _t=this.interiorRings[V].getSweepEvents();for(let Ot=0,ge=_t.length;Ot<ge;Ot++)D.push(_t[Ot])}return D}}class Lt{constructor(D,V){if(!Array.isArray(D))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof D[0][0][0]=="number"&&(D=[D])}catch(nt){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let nt=0,_t=D.length;nt<_t;nt++){const Ot=new F(D[nt],this);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.polys.push(Ot)}this.isSubject=V}getSweepEvents(){const D=[];for(let V=0,nt=this.polys.length;V<nt;V++){const _t=this.polys[V].getSweepEvents();for(let Ot=0,ge=_t.length;Ot<ge;Ot++)D.push(_t[Ot])}return D}}class Wt{static factory(D){const V=[];for(let nt=0,_t=D.length;nt<_t;nt++){const Ot=D[nt];if(!Ot.isInResult()||Ot.ringOut)continue;let ge=null,Ee=Ot.leftSE,Be=Ot.rightSE;const je=[Ee],fn=Ee.point,Re=[];for(;ge=Ee,Ee=Be,je.push(Ee),Ee.point!==fn;)for(;;){const Ye=Ee.getAvailableLinkedEvents();if(Ye.length===0){const Mn=je[0].point,Vn=je[je.length-1].point;throw new Error(`Unable to complete output ring starting at [${Mn.x}, ${Mn.y}]. Last matching segment found ends at [${Vn.x}, ${Vn.y}].`)}if(Ye.length===1){Be=Ye[0].otherSE;break}let cn=null;for(let Mn=0,Vn=Re.length;Mn<Vn;Mn++)if(Re[Mn].point===Ee.point){cn=Mn;break}if(cn!==null){const Mn=Re.splice(cn)[0],Vn=je.splice(Mn.index);Vn.unshift(Vn[0].otherSE),V.push(new Wt(Vn.reverse()));continue}Re.push({index:je.length,point:Ee.point});const sn=Ee.getLeftmostComparator(ge);Be=Ye.sort(sn)[0].otherSE;break}V.push(new Wt(je))}return V}constructor(D){this.events=D;for(let V=0,nt=D.length;V<nt;V++)D[V].segment.ringOut=this;this.poly=null}getGeom(){let D=this.events[0].point;const V=[D];for(let je=1,fn=this.events.length-1;je<fn;je++){const Re=this.events[je].point,Ye=this.events[je+1].point;vt(Re,D,Ye)!==0&&(V.push(Re),D=Re)}if(V.length===1)return null;const nt=V[0],_t=V[1];vt(nt,D,_t)===0&&V.shift(),V.push(V[0]);const Ot=this.isExteriorRing()?1:-1,ge=this.isExteriorRing()?0:V.length-1,Ee=this.isExteriorRing()?V.length:-1,Be=[];for(let je=ge;je!=Ee;je+=Ot)Be.push([V[je].x,V[je].y]);return Be}isExteriorRing(){if(this._isExteriorRing===void 0){const D=this.enclosingRing();this._isExteriorRing=D?!D.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let D=this.events[0];for(let _t=1,Ot=this.events.length;_t<Ot;_t++){const ge=this.events[_t];Y.compare(D,ge)>0&&(D=ge)}let V=D.segment.prevInResult(),nt=V?V.prevInResult():null;for(;;){if(!V)return null;if(!nt)return V.ringOut;if(nt.ringOut!==V.ringOut)return nt.ringOut.enclosingRing()!==V.ringOut?V.ringOut:V.ringOut.enclosingRing();V=nt.prevInResult(),nt=V?V.prevInResult():null}}}class ie{constructor(D){this.exteriorRing=D,D.poly=this,this.interiorRings=[]}addInterior(D){this.interiorRings.push(D),D.poly=this}getGeom(){const D=[this.exteriorRing.getGeom()];if(D[0]===null)return null;for(let V=0,nt=this.interiorRings.length;V<nt;V++){const _t=this.interiorRings[V].getGeom();_t!==null&&D.push(_t)}return D}}class be{constructor(D){this.rings=D,this.polys=this._composePolys(D)}getGeom(){const D=[];for(let V=0,nt=this.polys.length;V<nt;V++){const _t=this.polys[V].getGeom();_t!==null&&D.push(_t)}return D}_composePolys(D){const V=[];for(let nt=0,_t=D.length;nt<_t;nt++){const Ot=D[nt];if(!Ot.poly)if(Ot.isExteriorRing())V.push(new ie(Ot));else{const ge=Ot.enclosingRing();ge.poly||V.push(new ie(ge)),ge.poly.addInterior(Ot)}}return V}}class Ae{constructor(D){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yt.compare;this.queue=D,this.tree=new re(V),this.segments=[]}process(D){const V=D.segment,nt=[];if(D.consumedBy)return D.isLeft?this.queue.remove(D.otherSE):this.tree.remove(V),nt;const _t=D.isLeft?this.tree.add(V):this.tree.find(V);if(!_t)throw new Error(`Unable to find segment #${V.id} [${V.leftSE.point.x}, ${V.leftSE.point.y}] -> [${V.rightSE.point.x}, ${V.rightSE.point.y}] in SweepLine tree.`);let Ot=_t,ge=_t,Ee,Be;for(;Ee===void 0;)Ot=this.tree.prev(Ot),Ot===null?Ee=null:Ot.key.consumedBy===void 0&&(Ee=Ot.key);for(;Be===void 0;)ge=this.tree.next(ge),ge===null?Be=null:ge.key.consumedBy===void 0&&(Be=ge.key);if(D.isLeft){let je=null;if(Ee){const Re=Ee.getIntersection(V);if(Re!==null&&(V.isAnEndpoint(Re)||(je=Re),!Ee.isAnEndpoint(Re))){const Ye=this._splitSafely(Ee,Re);for(let cn=0,sn=Ye.length;cn<sn;cn++)nt.push(Ye[cn])}}let fn=null;if(Be){const Re=Be.getIntersection(V);if(Re!==null&&(V.isAnEndpoint(Re)||(fn=Re),!Be.isAnEndpoint(Re))){const Ye=this._splitSafely(Be,Re);for(let cn=0,sn=Ye.length;cn<sn;cn++)nt.push(Ye[cn])}}if(je!==null||fn!==null){let Re=null;je===null?Re=fn:fn===null?Re=je:Re=Y.comparePoints(je,fn)<=0?je:fn,this.queue.remove(V.rightSE),nt.push(V.rightSE);const Ye=V.split(Re);for(let cn=0,sn=Ye.length;cn<sn;cn++)nt.push(Ye[cn])}nt.length>0?(this.tree.remove(V),nt.push(D)):(this.segments.push(V),V.prev=Ee)}else{if(Ee&&Be){const je=Ee.getIntersection(Be);if(je!==null){if(!Ee.isAnEndpoint(je)){const fn=this._splitSafely(Ee,je);for(let Re=0,Ye=fn.length;Re<Ye;Re++)nt.push(fn[Re])}if(!Be.isAnEndpoint(je)){const fn=this._splitSafely(Be,je);for(let Re=0,Ye=fn.length;Re<Ye;Re++)nt.push(fn[Re])}}}this.tree.remove(V)}return nt}_splitSafely(D,V){this.tree.remove(D);const nt=D.rightSE;this.queue.remove(nt);const _t=D.split(V);return _t.push(nt),D.consumedBy===void 0&&this.tree.add(D),_t}}const we=typeof yt!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,$e=typeof yt!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Xe{run(D,V,nt){Qe.type=D,J.reset();const _t=[new Lt(V,!0)];for(let Re=0,Ye=nt.length;Re<Ye;Re++)_t.push(new Lt(nt[Re],!1));if(Qe.numMultiPolys=_t.length,Qe.type==="difference"){const Re=_t[0];let Ye=1;for(;Ye<_t.length;)Oe(_t[Ye].bbox,Re.bbox)!==null?Ye++:_t.splice(Ye,1)}if(Qe.type==="intersection")for(let Re=0,Ye=_t.length;Re<Ye;Re++){const cn=_t[Re];for(let sn=Re+1,Mn=_t.length;sn<Mn;sn++)if(Oe(cn.bbox,_t[sn].bbox)===null)return[]}const Ot=new re(Y.compare);for(let Re=0,Ye=_t.length;Re<Ye;Re++){const cn=_t[Re].getSweepEvents();for(let sn=0,Mn=cn.length;sn<Mn;sn++)if(Ot.insert(cn[sn]),Ot.size>we)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const ge=new Ae(Ot);let Ee=Ot.size,Be=Ot.pop();for(;Be;){const Re=Be.key;if(Ot.size===Ee){const cn=Re.segment;throw new Error(`Unable to pop() ${Re.isLeft?"left":"right"} SweepEvent [${Re.point.x}, ${Re.point.y}] from segment #${cn.id} [${cn.leftSE.point.x}, ${cn.leftSE.point.y}] -> [${cn.rightSE.point.x}, ${cn.rightSE.point.y}] from queue.`)}if(Ot.size>we)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(ge.segments.length>$e)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const Ye=ge.process(Re);for(let cn=0,sn=Ye.length;cn<sn;cn++){const Mn=Ye[cn];Mn.consumedBy===void 0&&Ot.insert(Mn)}Ee=Ot.size,Be=Ot.pop()}J.reset();const je=Wt.factory(ge.segments);return new be(je).getGeom()}}const Qe=new Xe;var fe={union:function(tt){for(var D=arguments.length,V=new Array(D>1?D-1:0),nt=1;nt<D;nt++)V[nt-1]=arguments[nt];return Qe.run("union",tt,V)},intersection:function(tt){for(var D=arguments.length,V=new Array(D>1?D-1:0),nt=1;nt<D;nt++)V[nt-1]=arguments[nt];return Qe.run("intersection",tt,V)},xor:function(tt){for(var D=arguments.length,V=new Array(D>1?D-1:0),nt=1;nt<D;nt++)V[nt-1]=arguments[nt];return Qe.run("xor",tt,V)},difference:function(tt){for(var D=arguments.length,V=new Array(D>1?D-1:0),nt=1;nt<D;nt++)V[nt-1]=arguments[nt];return Qe.run("difference",tt,V)}};return fe})},86851:function(Me,de,k){"use strict";var yt=k(89594),st=Array.prototype.concat,St=Array.prototype.slice,Kt=Me.exports=function(Qt){for(var Ut=[],zt=0,ft=Qt.length;zt<ft;zt++){var re=Qt[zt];yt(re)?Ut=st.call(Ut,St.call(re)):Ut.push(re)}return Ut};Kt.wrap=function(et){return function(){return et(Kt(arguments))}}},89594:function(Me){Me.exports=function(k){return!k||typeof k=="string"?!1:k instanceof Array||Array.isArray(k)||k.length>=0&&(k.splice instanceof Function||Object.getOwnPropertyDescriptor(k,k.length-1)&&k.constructor.name!=="String")}},69848:function(Me){(function(de,k){Me.exports=k()})(this,function(){"use strict";function de(Vt,J,ce,Gt,ke,Ie){if(!(ke-Gt<=ce)){var B=Gt+ke>>1;k(Vt,J,B,Gt,ke,Ie%2),de(Vt,J,ce,Gt,B-1,Ie+1),de(Vt,J,ce,B+1,ke,Ie+1)}}function k(Vt,J,ce,Gt,ke,Ie){for(;ke>Gt;){if(ke-Gt>600){var B=ke-Gt+1,Ct=ce-Gt+1,G=Math.log(B),Mt=.5*Math.exp(2*G/3),Et=.5*Math.sqrt(G*Mt*(B-Mt)/B)*(Ct-B/2<0?-1:1),U=Math.max(Gt,Math.floor(ce-Ct*Mt/B+Et)),it=Math.min(ke,Math.floor(ce+(B-Ct)*Mt/B+Et));k(Vt,J,ce,U,it,Ie)}var te=J[2*ce+Ie],he=Gt,xt=ke;for(yt(Vt,J,Gt,ce),J[2*ke+Ie]>te&&yt(Vt,J,Gt,ke);he<xt;){for(yt(Vt,J,he,xt),he++,xt--;J[2*he+Ie]<te;)he++;for(;J[2*xt+Ie]>te;)xt--}J[2*Gt+Ie]===te?yt(Vt,J,Gt,xt):(xt++,yt(Vt,J,xt,ke)),xt<=ce&&(Gt=xt+1),ce<=xt&&(ke=xt-1)}}function yt(Vt,J,ce,Gt){st(Vt,ce,Gt),st(J,2*ce,2*Gt),st(J,2*ce+1,2*Gt+1)}function st(Vt,J,ce){var Gt=Vt[J];Vt[J]=Vt[ce],Vt[ce]=Gt}function St(Vt,J,ce,Gt,ke,Ie,B){for(var Ct=[0,Vt.length-1,0],G=[],Mt,Et;Ct.length;){var U=Ct.pop(),it=Ct.pop(),te=Ct.pop();if(it-te<=B){for(var he=te;he<=it;he++)Mt=J[2*he],Et=J[2*he+1],Mt>=ce&&Mt<=ke&&Et>=Gt&&Et<=Ie&&G.push(Vt[he]);continue}var xt=Math.floor((te+it)/2);Mt=J[2*xt],Et=J[2*xt+1],Mt>=ce&&Mt<=ke&&Et>=Gt&&Et<=Ie&&G.push(Vt[xt]);var ee=(U+1)%2;(U===0?ce<=Mt:Gt<=Et)&&(Ct.push(te),Ct.push(xt-1),Ct.push(ee)),(U===0?ke>=Mt:Ie>=Et)&&(Ct.push(xt+1),Ct.push(it),Ct.push(ee))}return G}function Kt(Vt,J,ce,Gt,ke,Ie){for(var B=[0,Vt.length-1,0],Ct=[],G=ke*ke;B.length;){var Mt=B.pop(),Et=B.pop(),U=B.pop();if(Et-U<=Ie){for(var it=U;it<=Et;it++)et(J[2*it],J[2*it+1],ce,Gt)<=G&&Ct.push(Vt[it]);continue}var te=Math.floor((U+Et)/2),he=J[2*te],xt=J[2*te+1];et(he,xt,ce,Gt)<=G&&Ct.push(Vt[te]);var ee=(Mt+1)%2;(Mt===0?ce-ke<=he:Gt-ke<=xt)&&(B.push(U),B.push(te-1),B.push(ee)),(Mt===0?ce+ke>=he:Gt+ke>=xt)&&(B.push(te+1),B.push(Et),B.push(ee))}return Ct}function et(Vt,J,ce,Gt){var ke=Vt-ce,Ie=J-Gt;return ke*ke+Ie*Ie}var Qt=function(Vt){return Vt[0]},Ut=function(Vt){return Vt[1]},zt=function(J,ce,Gt,ke,Ie){ce===void 0&&(ce=Qt),Gt===void 0&&(Gt=Ut),ke===void 0&&(ke=64),Ie===void 0&&(Ie=Float64Array),this.nodeSize=ke,this.points=J;for(var B=J.length<65536?Uint16Array:Uint32Array,Ct=this.ids=new B(J.length),G=this.coords=new Ie(J.length*2),Mt=0;Mt<J.length;Mt++)Ct[Mt]=Mt,G[2*Mt]=ce(J[Mt]),G[2*Mt+1]=Gt(J[Mt]);de(Ct,G,ke,0,Ct.length-1,0)};zt.prototype.range=function(J,ce,Gt,ke){return St(this.ids,this.coords,J,ce,Gt,ke,this.nodeSize)},zt.prototype.within=function(J,ce,Gt){return Kt(this.ids,this.coords,J,ce,Gt,this.nodeSize)};var ft={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Vt){return Vt}},re=Math.fround||function(Vt){return function(J){return Vt[0]=+J,Vt[0]}}(new Float32Array(1)),q=function(J){this.options=Ge(Object.create(ft),J),this.trees=new Array(this.options.maxZoom+1)};q.prototype.load=function(J){var ce=this.options,Gt=ce.log,ke=ce.minZoom,Ie=ce.maxZoom,B=ce.nodeSize;Gt&&console.time("total time");var Ct="prepare "+J.length+" points";Gt&&console.time(Ct),this.points=J;for(var G=[],Mt=0;Mt<J.length;Mt++)J[Mt].geometry&&G.push(Dt(J[Mt],Mt));this.trees[Ie+1]=new zt(G,un,Te,B,Float32Array),Gt&&console.timeEnd(Ct);for(var Et=Ie;Et>=ke;Et--){var U=+Date.now();G=this._cluster(G,Et),this.trees[Et]=new zt(G,un,Te,B,Float32Array),Gt&&console.log("z%d: %d clusters in %dms",Et,G.length,+Date.now()-U)}return Gt&&console.timeEnd("total time"),this},q.prototype.getClusters=function(J,ce){var Gt=((J[0]+180)%360+360)%360-180,ke=Math.max(-90,Math.min(90,J[1])),Ie=J[2]===180?180:((J[2]+180)%360+360)%360-180,B=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)Gt=-180,Ie=180;else if(Gt>Ie){var Ct=this.getClusters([Gt,ke,180,B],ce),G=this.getClusters([-180,ke,Ie,B],ce);return Ct.concat(G)}for(var Mt=this.trees[this._limitZoom(ce)],Et=Mt.range(Pt(Gt),$t(B),Pt(Ie),$t(ke)),U=[],it=0,te=Et;it<te.length;it+=1){var he=te[it],xt=Mt.points[he];U.push(xt.numPoints?At(xt):this.points[xt.index])}return U},q.prototype.getChildren=function(J){var ce=this._getOriginId(J),Gt=this._getOriginZoom(J),ke="No cluster with the specified id.",Ie=this.trees[Gt];if(!Ie)throw new Error(ke);var B=Ie.points[ce];if(!B)throw new Error(ke);for(var Ct=this.options.radius/(this.options.extent*Math.pow(2,Gt-1)),G=Ie.within(B.x,B.y,Ct),Mt=[],Et=0,U=G;Et<U.length;Et+=1){var it=U[Et],te=Ie.points[it];te.parentId===J&&Mt.push(te.numPoints?At(te):this.points[te.index])}if(Mt.length===0)throw new Error(ke);return Mt},q.prototype.getLeaves=function(J,ce,Gt){ce=ce||10,Gt=Gt||0;var ke=[];return this._appendLeaves(ke,J,ce,Gt,0),ke},q.prototype.getTile=function(J,ce,Gt){var ke=this.trees[this._limitZoom(J)],Ie=Math.pow(2,J),B=this.options,Ct=B.extent,G=B.radius,Mt=G/Ct,Et=(Gt-Mt)/Ie,U=(Gt+1+Mt)/Ie,it={features:[]};return this._addTileFeatures(ke.range((ce-Mt)/Ie,Et,(ce+1+Mt)/Ie,U),ke.points,ce,Gt,Ie,it),ce===0&&this._addTileFeatures(ke.range(1-Mt/Ie,Et,1,U),ke.points,Ie,Gt,Ie,it),ce===Ie-1&&this._addTileFeatures(ke.range(0,Et,Mt/Ie,U),ke.points,-1,Gt,Ie,it),it.features.length?it:null},q.prototype.getClusterExpansionZoom=function(J){for(var ce=this._getOriginZoom(J)-1;ce<=this.options.maxZoom;){var Gt=this.getChildren(J);if(ce++,Gt.length!==1)break;J=Gt[0].properties.cluster_id}return ce},q.prototype._appendLeaves=function(J,ce,Gt,ke,Ie){for(var B=this.getChildren(ce),Ct=0,G=B;Ct<G.length;Ct+=1){var Mt=G[Ct],Et=Mt.properties;if(Et&&Et.cluster?Ie+Et.point_count<=ke?Ie+=Et.point_count:Ie=this._appendLeaves(J,Et.cluster_id,Gt,ke,Ie):Ie<ke?Ie++:J.push(Mt),J.length===Gt)break}return Ie},q.prototype._addTileFeatures=function(J,ce,Gt,ke,Ie,B){for(var Ct=0,G=J;Ct<G.length;Ct+=1){var Mt=G[Ct],Et=ce[Mt],U=Et.numPoints,it=void 0,te=void 0,he=void 0;if(U)it=Ft(Et),te=Et.x,he=Et.y;else{var xt=this.points[Et.index];it=xt.properties,te=Pt(xt.geometry.coordinates[0]),he=$t(xt.geometry.coordinates[1])}var ee={type:1,geometry:[[Math.round(this.options.extent*(te*Ie-Gt)),Math.round(this.options.extent*(he*Ie-ke))]],tags:it},qt=void 0;U?qt=Et.id:this.options.generateId?qt=Et.index:this.points[Et.index].id&&(qt=this.points[Et.index].id),qt!==void 0&&(ee.id=qt),B.features.push(ee)}},q.prototype._limitZoom=function(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))},q.prototype._cluster=function(J,ce){for(var Gt=[],ke=this.options,Ie=ke.radius,B=ke.extent,Ct=ke.reduce,G=ke.minPoints,Mt=Ie/(B*Math.pow(2,ce)),Et=0;Et<J.length;Et++){var U=J[Et];if(!(U.zoom<=ce)){U.zoom=ce;for(var it=this.trees[ce+1],te=it.within(U.x,U.y,Mt),he=U.numPoints||1,xt=he,ee=0,qt=te;ee<qt.length;ee+=1){var pe=qt[ee],Ce=it.points[pe];Ce.zoom>ce&&(xt+=Ce.numPoints||1)}if(xt>he&&xt>=G){for(var vt=U.x*he,K=U.y*he,kt=Ct&&he>1?this._map(U,!0):null,le=(Et<<5)+(ce+1)+this.points.length,ut=0,Tt=te;ut<Tt.length;ut+=1){var ae=Tt[ut],Y=it.points[ae];if(!(Y.zoom<=ce)){Y.zoom=ce;var I=Y.numPoints||1;vt+=Y.x*I,K+=Y.y*I,Y.parentId=le,Ct&&(kt||(kt=this._map(U,!0)),Ct(kt,this._map(Y)))}}U.parentId=le,Gt.push(Q(vt/xt,K/xt,le,xt,kt))}else if(Gt.push(U),xt>1)for(var Yt=0,T=te;Yt<T.length;Yt+=1){var F=T[Yt],Lt=it.points[F];Lt.zoom<=ce||(Lt.zoom=ce,Gt.push(Lt))}}}return Gt},q.prototype._getOriginId=function(J){return J-this.points.length>>5},q.prototype._getOriginZoom=function(J){return(J-this.points.length)%32},q.prototype._map=function(J,ce){if(J.numPoints)return ce?Ge({},J.properties):J.properties;var Gt=this.points[J.index].properties,ke=this.options.map(Gt);return ce&&ke===Gt?Ge({},ke):ke};function Q(Vt,J,ce,Gt,ke){return{x:re(Vt),y:re(J),zoom:1/0,id:ce,parentId:-1,numPoints:Gt,properties:ke}}function Dt(Vt,J){var ce=Vt.geometry.coordinates,Gt=ce[0],ke=ce[1];return{x:re(Pt(Gt)),y:re($t(ke)),zoom:1/0,index:J,parentId:-1}}function At(Vt){return{type:"Feature",id:Vt.id,properties:Ft(Vt),geometry:{type:"Point",coordinates:[Oe(Vt.x),De(Vt.y)]}}}function Ft(Vt){var J=Vt.numPoints,ce=J>=1e4?Math.round(J/1e3)+"k":J>=1e3?Math.round(J/100)/10+"k":J;return Ge(Ge({},Vt.properties),{cluster:!0,cluster_id:Vt.id,point_count:J,point_count_abbreviated:ce})}function Pt(Vt){return Vt/360+.5}function $t(Vt){var J=Math.sin(Vt*Math.PI/180),ce=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return ce<0?0:ce>1?1:ce}function Oe(Vt){return(Vt-.5)*360}function De(Vt){var J=(180-Vt*360)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function Ge(Vt,J){for(var ce in J)Vt[ce]=J[ce];return Vt}function un(Vt){return Vt.x}function Te(Vt){return Vt.y}return q})},5501:function(Me,de,k){"use strict";var yt=k(90857);de.Z=yt},89093:function(Me,de,k){"use strict";var yt=k(38554);de.Z=yt},71937:function(Me,de,k){"use strict";k.d(de,{Z:function(){return Kt}});var yt=k(61120);function st(et,Qt){for(;!{}.hasOwnProperty.call(et,Qt)&&(et=(0,yt.Z)(et))!==null;);return et}function St(){return St=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(et,Qt,Ut){var zt=st(et,Qt);if(zt){var ft=Object.getOwnPropertyDescriptor(zt,Qt);return ft.get?ft.get.call(arguments.length<3?et:Ut):ft.value}},St.apply(null,arguments)}function Kt(et,Qt,Ut,zt){var ft=St((0,yt.Z)(1&zt?et.prototype:et),Qt,Ut);return 2&zt&&typeof ft=="function"?function(re){return ft.apply(Ut,re)}:ft}},54235:function(Me,de,k){"use strict";k.d(de,{S:function(){return yt}});function yt(st){let St=0;for(let Kt=0;Kt<st.length;Kt++)St+=st[Kt];return St}},97582:function(Me,de,k){"use strict";k.d(de,{CR:function(){return $t},Jh:function(){return Dt},Q_:function(){return Ct},XA:function(){return Pt},ZT:function(){return st},_T:function(){return Kt},ev:function(){return Ge},mG:function(){return Q},pi:function(){return St}});var yt=function(xt,ee){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(qt,pe){qt.__proto__=pe}||function(qt,pe){for(var Ce in pe)Object.prototype.hasOwnProperty.call(pe,Ce)&&(qt[Ce]=pe[Ce])},yt(xt,ee)};function st(xt,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");yt(xt,ee);function qt(){this.constructor=xt}xt.prototype=ee===null?Object.create(ee):(qt.prototype=ee.prototype,new qt)}var St=function(){return St=Object.assign||function(ee){for(var qt,pe=1,Ce=arguments.length;pe<Ce;pe++){qt=arguments[pe];for(var vt in qt)Object.prototype.hasOwnProperty.call(qt,vt)&&(ee[vt]=qt[vt])}return ee},St.apply(this,arguments)};function Kt(xt,ee){var qt={};for(var pe in xt)Object.prototype.hasOwnProperty.call(xt,pe)&&ee.indexOf(pe)<0&&(qt[pe]=xt[pe]);if(xt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ce=0,pe=Object.getOwnPropertySymbols(xt);Ce<pe.length;Ce++)ee.indexOf(pe[Ce])<0&&Object.prototype.propertyIsEnumerable.call(xt,pe[Ce])&&(qt[pe[Ce]]=xt[pe[Ce]]);return qt}function et(xt,ee,qt,pe){var Ce=arguments.length,vt=Ce<3?ee:pe===null?pe=Object.getOwnPropertyDescriptor(ee,qt):pe,K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(xt,ee,qt,pe);else for(var kt=xt.length-1;kt>=0;kt--)(K=xt[kt])&&(vt=(Ce<3?K(vt):Ce>3?K(ee,qt,vt):K(ee,qt))||vt);return Ce>3&&vt&&Object.defineProperty(ee,qt,vt),vt}function Qt(xt,ee){return function(qt,pe){ee(qt,pe,xt)}}function Ut(xt,ee,qt,pe,Ce,vt){function K(Lt){if(Lt!==void 0&&typeof Lt!="function")throw new TypeError("Function expected");return Lt}for(var kt=pe.kind,le=kt==="getter"?"get":kt==="setter"?"set":"value",ut=!ee&&xt?pe.static?xt:xt.prototype:null,Tt=ee||(ut?Object.getOwnPropertyDescriptor(ut,pe.name):{}),ae,Y=!1,I=qt.length-1;I>=0;I--){var Yt={};for(var T in pe)Yt[T]=T==="access"?{}:pe[T];for(var T in pe.access)Yt.access[T]=pe.access[T];Yt.addInitializer=function(Lt){if(Y)throw new TypeError("Cannot add initializers after decoration has completed");vt.push(K(Lt||null))};var F=(0,qt[I])(kt==="accessor"?{get:Tt.get,set:Tt.set}:Tt[le],Yt);if(kt==="accessor"){if(F===void 0)continue;if(F===null||typeof F!="object")throw new TypeError("Object expected");(ae=K(F.get))&&(Tt.get=ae),(ae=K(F.set))&&(Tt.set=ae),(ae=K(F.init))&&Ce.unshift(ae)}else(ae=K(F))&&(kt==="field"?Ce.unshift(ae):Tt[le]=ae)}ut&&Object.defineProperty(ut,pe.name,Tt),Y=!0}function zt(xt,ee,qt){for(var pe=arguments.length>2,Ce=0;Ce<ee.length;Ce++)qt=pe?ee[Ce].call(xt,qt):ee[Ce].call(xt);return pe?qt:void 0}function ft(xt){return typeof xt=="symbol"?xt:"".concat(xt)}function re(xt,ee,qt){return typeof ee=="symbol"&&(ee=ee.description?"[".concat(ee.description,"]"):""),Object.defineProperty(xt,"name",{configurable:!0,value:qt?"".concat(qt," ",ee):ee})}function q(xt,ee){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(xt,ee)}function Q(xt,ee,qt,pe){function Ce(vt){return vt instanceof qt?vt:new qt(function(K){K(vt)})}return new(qt||(qt=Promise))(function(vt,K){function kt(Tt){try{ut(pe.next(Tt))}catch(ae){K(ae)}}function le(Tt){try{ut(pe.throw(Tt))}catch(ae){K(ae)}}function ut(Tt){Tt.done?vt(Tt.value):Ce(Tt.value).then(kt,le)}ut((pe=pe.apply(xt,ee||[])).next())})}function Dt(xt,ee){var qt={label:0,sent:function(){if(vt[0]&1)throw vt[1];return vt[1]},trys:[],ops:[]},pe,Ce,vt,K=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return K.next=kt(0),K.throw=kt(1),K.return=kt(2),typeof Symbol=="function"&&(K[Symbol.iterator]=function(){return this}),K;function kt(ut){return function(Tt){return le([ut,Tt])}}function le(ut){if(pe)throw new TypeError("Generator is already executing.");for(;K&&(K=0,ut[0]&&(qt=0)),qt;)try{if(pe=1,Ce&&(vt=ut[0]&2?Ce.return:ut[0]?Ce.throw||((vt=Ce.return)&&vt.call(Ce),0):Ce.next)&&!(vt=vt.call(Ce,ut[1])).done)return vt;switch(Ce=0,vt&&(ut=[ut[0]&2,vt.value]),ut[0]){case 0:case 1:vt=ut;break;case 4:return qt.label++,{value:ut[1],done:!1};case 5:qt.label++,Ce=ut[1],ut=[0];continue;case 7:ut=qt.ops.pop(),qt.trys.pop();continue;default:if(vt=qt.trys,!(vt=vt.length>0&&vt[vt.length-1])&&(ut[0]===6||ut[0]===2)){qt=0;continue}if(ut[0]===3&&(!vt||ut[1]>vt[0]&&ut[1]<vt[3])){qt.label=ut[1];break}if(ut[0]===6&&qt.label<vt[1]){qt.label=vt[1],vt=ut;break}if(vt&&qt.label<vt[2]){qt.label=vt[2],qt.ops.push(ut);break}vt[2]&&qt.ops.pop(),qt.trys.pop();continue}ut=ee.call(xt,qt)}catch(Tt){ut=[6,Tt],Ce=0}finally{pe=vt=0}if(ut[0]&5)throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}}}var At=Object.create?function(xt,ee,qt,pe){pe===void 0&&(pe=qt);var Ce=Object.getOwnPropertyDescriptor(ee,qt);(!Ce||("get"in Ce?!ee.__esModule:Ce.writable||Ce.configurable))&&(Ce={enumerable:!0,get:function(){return ee[qt]}}),Object.defineProperty(xt,pe,Ce)}:function(xt,ee,qt,pe){pe===void 0&&(pe=qt),xt[pe]=ee[qt]};function Ft(xt,ee){for(var qt in xt)qt!=="default"&&!Object.prototype.hasOwnProperty.call(ee,qt)&&At(ee,xt,qt)}function Pt(xt){var ee=typeof Symbol=="function"&&Symbol.iterator,qt=ee&&xt[ee],pe=0;if(qt)return qt.call(xt);if(xt&&typeof xt.length=="number")return{next:function(){return xt&&pe>=xt.length&&(xt=void 0),{value:xt&&xt[pe++],done:!xt}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}function $t(xt,ee){var qt=typeof Symbol=="function"&&xt[Symbol.iterator];if(!qt)return xt;var pe=qt.call(xt),Ce,vt=[],K;try{for(;(ee===void 0||ee-- >0)&&!(Ce=pe.next()).done;)vt.push(Ce.value)}catch(kt){K={error:kt}}finally{try{Ce&&!Ce.done&&(qt=pe.return)&&qt.call(pe)}finally{if(K)throw K.error}}return vt}function Oe(){for(var xt=[],ee=0;ee<arguments.length;ee++)xt=xt.concat($t(arguments[ee]));return xt}function De(){for(var xt=0,ee=0,qt=arguments.length;ee<qt;ee++)xt+=arguments[ee].length;for(var pe=Array(xt),Ce=0,ee=0;ee<qt;ee++)for(var vt=arguments[ee],K=0,kt=vt.length;K<kt;K++,Ce++)pe[Ce]=vt[K];return pe}function Ge(xt,ee,qt){if(qt||arguments.length===2)for(var pe=0,Ce=ee.length,vt;pe<Ce;pe++)(vt||!(pe in ee))&&(vt||(vt=Array.prototype.slice.call(ee,0,pe)),vt[pe]=ee[pe]);return xt.concat(vt||Array.prototype.slice.call(ee))}function un(xt){return this instanceof un?(this.v=xt,this):new un(xt)}function Te(xt,ee,qt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe=qt.apply(xt,ee||[]),Ce,vt=[];return Ce=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),kt("next"),kt("throw"),kt("return",K),Ce[Symbol.asyncIterator]=function(){return this},Ce;function K(I){return function(Yt){return Promise.resolve(Yt).then(I,ae)}}function kt(I,Yt){pe[I]&&(Ce[I]=function(T){return new Promise(function(F,Lt){vt.push([I,T,F,Lt])>1||le(I,T)})},Yt&&(Ce[I]=Yt(Ce[I])))}function le(I,Yt){try{ut(pe[I](Yt))}catch(T){Y(vt[0][3],T)}}function ut(I){I.value instanceof un?Promise.resolve(I.value.v).then(Tt,ae):Y(vt[0][2],I)}function Tt(I){le("next",I)}function ae(I){le("throw",I)}function Y(I,Yt){I(Yt),vt.shift(),vt.length&&le(vt[0][0],vt[0][1])}}function Vt(xt){var ee,qt;return ee={},pe("next"),pe("throw",function(Ce){throw Ce}),pe("return"),ee[Symbol.iterator]=function(){return this},ee;function pe(Ce,vt){ee[Ce]=xt[Ce]?function(K){return(qt=!qt)?{value:un(xt[Ce](K)),done:!1}:vt?vt(K):K}:vt}}function J(xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee=xt[Symbol.asyncIterator],qt;return ee?ee.call(xt):(xt=typeof Pt=="function"?Pt(xt):xt[Symbol.iterator](),qt={},pe("next"),pe("throw"),pe("return"),qt[Symbol.asyncIterator]=function(){return this},qt);function pe(vt){qt[vt]=xt[vt]&&function(K){return new Promise(function(kt,le){K=xt[vt](K),Ce(kt,le,K.done,K.value)})}}function Ce(vt,K,kt,le){Promise.resolve(le).then(function(ut){vt({value:ut,done:kt})},K)}}function ce(xt,ee){return Object.defineProperty?Object.defineProperty(xt,"raw",{value:ee}):xt.raw=ee,xt}var Gt=Object.create?function(xt,ee){Object.defineProperty(xt,"default",{enumerable:!0,value:ee})}:function(xt,ee){xt.default=ee},ke=function(xt){return ke=Object.getOwnPropertyNames||function(ee){var qt=[];for(var pe in ee)Object.prototype.hasOwnProperty.call(ee,pe)&&(qt[qt.length]=pe);return qt},ke(xt)};function Ie(xt){if(xt&&xt.__esModule)return xt;var ee={};if(xt!=null)for(var qt=ke(xt),pe=0;pe<qt.length;pe++)qt[pe]!=="default"&&At(ee,xt,qt[pe]);return Gt(ee,xt),ee}function B(xt){return xt&&xt.__esModule?xt:{default:xt}}function Ct(xt,ee,qt,pe){if(qt==="a"&&!pe)throw new TypeError("Private accessor was defined without a getter");if(typeof ee=="function"?xt!==ee||!pe:!ee.has(xt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return qt==="m"?pe:qt==="a"?pe.call(xt):pe?pe.value:ee.get(xt)}function G(xt,ee,qt,pe,Ce){if(pe==="m")throw new TypeError("Private method is not writable");if(pe==="a"&&!Ce)throw new TypeError("Private accessor was defined without a setter");if(typeof ee=="function"?xt!==ee||!Ce:!ee.has(xt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return pe==="a"?Ce.call(xt,qt):Ce?Ce.value=qt:ee.set(xt,qt),qt}function Mt(xt,ee){if(ee===null||typeof ee!="object"&&typeof ee!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof xt=="function"?ee===xt:xt.has(ee)}function Et(xt,ee,qt){if(ee!=null){if(typeof ee!="object"&&typeof ee!="function")throw new TypeError("Object expected.");var pe,Ce;if(qt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");pe=ee[Symbol.asyncDispose]}if(pe===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");pe=ee[Symbol.dispose],qt&&(Ce=pe)}if(typeof pe!="function")throw new TypeError("Object not disposable.");Ce&&(pe=function(){try{Ce.call(this)}catch(vt){return Promise.reject(vt)}}),xt.stack.push({value:ee,dispose:pe,async:qt})}else qt&&xt.stack.push({async:!0});return ee}var U=typeof SuppressedError=="function"?SuppressedError:function(xt,ee,qt){var pe=new Error(qt);return pe.name="SuppressedError",pe.error=xt,pe.suppressed=ee,pe};function it(xt){function ee(vt){xt.error=xt.hasError?new U(vt,xt.error,"An error was suppressed during disposal."):vt,xt.hasError=!0}var qt,pe=0;function Ce(){for(;qt=xt.stack.pop();)try{if(!qt.async&&pe===1)return pe=0,xt.stack.push(qt),Promise.resolve().then(Ce);if(qt.dispose){var vt=qt.dispose.call(qt.value);if(qt.async)return pe|=2,Promise.resolve(vt).then(Ce,function(K){return ee(K),Ce()})}else pe|=1}catch(K){ee(K)}if(pe===1)return xt.hasError?Promise.reject(xt.error):Promise.resolve();if(xt.hasError)throw xt.error}return Ce()}function te(xt,ee){return typeof xt=="string"&&/^\.\.?\//.test(xt)?xt.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(qt,pe,Ce,vt,K){return pe?ee?".jsx":".js":Ce&&(!vt||!K)?qt:Ce+vt+"."+K.toLowerCase()+"js"}):xt}var he={__extends:st,__assign:St,__rest:Kt,__decorate:et,__param:Qt,__esDecorate:Ut,__runInitializers:zt,__propKey:ft,__setFunctionName:re,__metadata:q,__awaiter:Q,__generator:Dt,__createBinding:At,__exportStar:Ft,__values:Pt,__read:$t,__spread:Oe,__spreadArrays:De,__spreadArray:Ge,__await:un,__asyncGenerator:Te,__asyncDelegator:Vt,__asyncValues:J,__makeTemplateObject:ce,__importStar:Ie,__importDefault:B,__classPrivateFieldGet:Ct,__classPrivateFieldSet:G,__classPrivateFieldIn:Mt,__addDisposableResource:Et,__disposeResources:it,__rewriteRelativeImportExtension:te}}}]);
}());