!(function(){var Ef=Math.pow;var mI=(_t,W,D)=>new Promise((q,G)=>{var E=se=>{try{$(D.next(se))}catch(ce){G(ce)}},fe=se=>{try{$(D.throw(se))}catch(ce){G(ce)}},$=se=>se.done?q(se.value):Promise.resolve(se.value).then(E,fe);$((D=D.apply(_t,W)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[30],{25330:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};W.default=D},67303:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};W.default=D},83647:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};W.default=D},57583:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};W.default=D},29260:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};W.default=D},25828:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};W.default=D},64183:function(_t,W,D){"use strict";var q=D(67294),G=D(16002),E=function(){return E=Object.assign||function($){for(var se,ce=1,ye=arguments.length;ce<ye;ce++){se=arguments[ce];for(var ae in se)Object.prototype.hasOwnProperty.call(se,ae)&&($[ae]=se[ae])}return $},E.apply(this,arguments)},fe=function($){return q.createElement(G.P,E({},$,{chartType:"Area"}))};W.Z=fe},79611:function(_t,W,D){"use strict";var q=D(67294),G=D(16002),E=function(){return E=Object.assign||function($){for(var se,ce=1,ye=arguments.length;ce<ye;ce++){se=arguments[ce];for(var ae in se)Object.prototype.hasOwnProperty.call(se,ae)&&($[ae]=se[ae])}return $},E.apply(this,arguments)},fe=function($){return q.createElement(G.P,E({},$,{chartType:"Bar"}))};W.Z=fe},16002:function(_t,W,D){"use strict";D.d(W,{P:function(){return fde}});var q={};D.r(q),D.d(q,{area:function(){return JW},bottom:function(){return fg},bottomLeft:function(){return fg},bottomRight:function(){return fg},inside:function(){return fg},left:function(){return fg},outside:function(){return nG},right:function(){return fg},spider:function(){return iG},surround:function(){return aG},top:function(){return fg},topLeft:function(){return fg},topRight:function(){return fg}});var G={};D.r(G),D.d(G,{interpolateBlues:function(){return VZ},interpolateBrBG:function(){return xZ},interpolateBuGn:function(){return RZ},interpolateBuPu:function(){return PZ},interpolateCividis:function(){return YZ},interpolateCool:function(){return eX},interpolateCubehelixDefault:function(){return QZ},interpolateGnBu:function(){return IZ},interpolateGreens:function(){return HZ},interpolateGreys:function(){return WZ},interpolateInferno:function(){return lX},interpolateMagma:function(){return sX},interpolateOrRd:function(){return LZ},interpolateOranges:function(){return XZ},interpolatePRGn:function(){return EZ},interpolatePiYG:function(){return SZ},interpolatePlasma:function(){return uX},interpolatePuBu:function(){return NZ},interpolatePuBuGn:function(){return DZ},interpolatePuOr:function(){return wZ},interpolatePuRd:function(){return FZ},interpolatePurples:function(){return GZ},interpolateRainbow:function(){return tX},interpolateRdBu:function(){return TZ},interpolateRdGy:function(){return AZ},interpolateRdPu:function(){return BZ},interpolateRdYlBu:function(){return CZ},interpolateRdYlGn:function(){return OZ},interpolateReds:function(){return ZZ},interpolateSinebow:function(){return iX},interpolateSpectral:function(){return MZ},interpolateTurbo:function(){return oX},interpolateViridis:function(){return aX},interpolateWarm:function(){return JZ},interpolateYlGn:function(){return zZ},interpolateYlGnBu:function(){return kZ},interpolateYlOrBr:function(){return UZ},interpolateYlOrRd:function(){return jZ},schemeAccent:function(){return YG},schemeBlues:function(){return GD},schemeBrBG:function(){return wD},schemeBuGn:function(){return LD},schemeBuPu:function(){return DD},schemeCategory10:function(){return XG},schemeDark2:function(){return $G},schemeGnBu:function(){return ND},schemeGreens:function(){return ZD},schemeGreys:function(){return XD},schemeObservable10:function(){return qG},schemeOrRd:function(){return FD},schemeOranges:function(){return qD},schemePRGn:function(){return TD},schemePaired:function(){return KG},schemePastel1:function(){return QG},schemePastel2:function(){return JG},schemePiYG:function(){return AD},schemePuBu:function(){return kD},schemePuBuGn:function(){return BD},schemePuOr:function(){return CD},schemePuRd:function(){return zD},schemePurples:function(){return YD},schemeRdBu:function(){return OD},schemeRdGy:function(){return MD},schemeRdPu:function(){return UD},schemeRdYlBu:function(){return RD},schemeRdYlGn:function(){return PD},schemeReds:function(){return $D},schemeSet1:function(){return eZ},schemeSet2:function(){return tZ},schemeSet3:function(){return nZ},schemeSpectral:function(){return ID},schemeTableau10:function(){return rZ},schemeYlGn:function(){return VD},schemeYlGnBu:function(){return jD},schemeYlOrBr:function(){return HD},schemeYlOrRd:function(){return WD}});var E={};D.r(E),D.d(E,{geoAlbers:function(){return iz},geoAlbersUsa:function(){return xre},geoAzimuthalEqualArea:function(){return Ere},geoAzimuthalEqualAreaRaw:function(){return _5},geoAzimuthalEquidistant:function(){return Sre},geoAzimuthalEquidistantRaw:function(){return b5},geoConicConformal:function(){return Tre},geoConicConformalRaw:function(){return sz},geoConicEqualArea:function(){return IA},geoConicEqualAreaRaw:function(){return rz},geoConicEquidistant:function(){return Cre},geoConicEquidistantRaw:function(){return lz},geoEqualEarth:function(){return Mre},geoEqualEarthRaw:function(){return x5},geoEquirectangular:function(){return Are},geoEquirectangularRaw:function(){return SE},geoGnomonic:function(){return Rre},geoGnomonicRaw:function(){return E5},geoIdentity:function(){return Pre},geoMercator:function(){return wre},geoMercatorRaw:function(){return EE},geoNaturalEarth1:function(){return Ire},geoNaturalEarth1Raw:function(){return S5},geoOrthographic:function(){return Lre},geoOrthographicRaw:function(){return w5},geoProjection:function(){return mm},geoProjectionMutator:function(){return g5},geoStereographic:function(){return Dre},geoStereographicRaw:function(){return T5},geoTransverseMercator:function(){return Nre},geoTransverseMercatorRaw:function(){return A5}});var fe={};D.r(fe),D.d(fe,{frequency:function(){return Noe},id:function(){return Foe},name:function(){return Boe},weight:function(){return Doe}});var $=D(67294),se=D(73935),ce=D.t(se,2),ye=function(){return ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ye.apply(this,arguments)},ae=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},He=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(p){return function(v){return h([p,v])}}function h(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(s=p[0]&2?i.return:p[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,p[1])).done)return s;switch(i=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){n.label=p[1];break}if(p[0]===6&&n.label<s[1]){n.label=s[1],s=p;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(p);break}s[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(v){p=[6,v],i=0}finally{r=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},J=ye({},ce),me=J.version,Oe=J.render,Q=J.unmountComponentAtNode,le;try{var ee=Number((me||"").split(".")[0]);ee>=18&&(le=J.createRoot)}catch(e){}function be(e){var t=J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&typeof t=="object"&&(t.usingClientEntryPoint=e)}var et="__rc_react_root__";function tt(e,t){be(!0);var n=t[et]||le(t);be(!1),n.render(e),t[et]=n}function wt(e,t){Oe(e,t)}function gt(e,t){}function ft(e,t){if(le){tt(e,t);return}wt(e,t)}function Pe(e){return ae(this,void 0,void 0,function(){return He(this,function(t){return[2,Promise.resolve().then(function(){var n;(n=e[et])===null||n===void 0||n.unmount(),delete e[et]})]})})}function Ae(e){Q(e)}function Be(e){}function Ze(e){return ae(this,void 0,void 0,function(){return He(this,function(t){return le!==void 0?[2,Pe(e)]:(Ae(e),[2])})})}var ut=new Map;ut.set("tooltip",document.createElement("div"));var tn=function(e,t){t===void 0&&(t=!1);var n=null;if(t)n=ut.get("tooltip");else if(n=document.createElement("div"),e!=null&&e.key){var r=ut.get(e.key);r?n=r:ut.set(e.key,n)}return ft(e,n),n},De=function(e){var t=e.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",t.appendChild(r),t.appendChild(n)},mt=function(e){var t=e.loadingTemplate,n=e.theme,r=n===void 0?"light":n,i=$.useRef(null);$.useEffect(function(){!t&&i.current&&De(i.current)},[]);var s=function(){return t||$.createElement("div",{ref:i})};return $.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},s())},Re=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var i=n.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||$.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return t.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},t.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):$.createElement($.Fragment,null,this.props.children)},t}($.Component),qe=typeof global=="object"&&global&&global.Object===Object&&global,Ge=qe,Dt=typeof self=="object"&&self&&self.Object===Object&&self,yt=Ge||Dt||Function("return this")(),Le=yt,Zt=Le.Symbol,yn=Zt,Tn=Object.prototype,lr=Tn.hasOwnProperty,or=Tn.toString,Lt=yn?yn.toStringTag:void 0;function en(e){var t=lr.call(e,Lt),n=e[Lt];try{e[Lt]=void 0;var r=!0}catch(s){}var i=or.call(e);return r&&(t?e[Lt]=n:delete e[Lt]),i}var hn=en,Xn=Object.prototype,an=Xn.toString;function Pt(e){return an.call(e)}var zt=Pt,je="[object Null]",rt="[object Undefined]",Ut=yn?yn.toStringTag:void 0;function U(e){return e==null?e===void 0?rt:je:Ut&&Ut in Object(e)?hn(e):zt(e)}var he=U;function ot(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var de=ot,qt="[object AsyncFunction]",ln="[object Function]",mn="[object GeneratorFunction]",Dn="[object Proxy]";function Yn(e){if(!de(e))return!1;var t=he(e);return t==ln||t==mn||t==qt||t==Dn}var Kn=Yn,pn=function(e){var t=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return t.test(e)},vt=Array.isArray,Nt=vt;function An(){this.__data__=[],this.size=0}var In=An;function $n(e,t){return e===t||e!==e&&t!==t}var pt=$n;function xe(e,t){for(var n=e.length;n--;)if(pt(e[n][0],t))return n;return-1}var Fe=xe,st=Array.prototype,It=st.splice;function Mt(e){var t=this.__data__,n=Fe(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():It.call(t,n,1),--this.size,!0}var wn=Mt;function rr(e){var t=this.__data__,n=Fe(t,e);return n<0?void 0:t[n][1]}var Er=rr;function qn(e){return Fe(this.__data__,e)>-1}var Me=qn;function Te(e,t){var n=this.__data__,r=Fe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var ke=Te;function at(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}at.prototype.clear=In,at.prototype.delete=wn,at.prototype.get=Er,at.prototype.has=Me,at.prototype.set=ke;var At=at;function nn(){this.__data__=new At,this.size=0}var cn=nn;function Et(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Qt=Et;function Qn(e){return this.__data__.get(e)}var Sr=Qn;function Zr(e){return this.__data__.has(e)}var yr=Zr,Wr=Le["__core-js_shared__"],Ei=Wr,yi=function(){var e=/[^.]+$/.exec(Ei&&Ei.keys&&Ei.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wr(e){return!!yi&&yi in e}var Ai=wr,pi=Function.prototype,_i=pi.toString;function Bo(e){if(e!=null){try{return _i.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Si=Bo,Ci=/[\\^$.*+?()[\]{}|]/g,ho=/^\[object .+?Constructor\]$/,go=Function.prototype,jo=Object.prototype,Ke=go.toString,dt=jo.hasOwnProperty,Wt=RegExp("^"+Ke.call(dt).replace(Ci,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dn(e){if(!de(e)||Ai(e))return!1;var t=Kn(e)?Wt:ho;return t.test(Si(e))}var Fn=dn;function Bn(e,t){return e==null?void 0:e[t]}var _n=Bn;function Cn(e,t){var n=_n(e,t);return Fn(n)?n:void 0}var pr=Cn,hr=pr(Le,"Map"),ni=hr,Wi=pr(Object,"create"),Qi=Wi;function ri(){this.__data__=Qi?Qi(null):{},this.size=0}var Gi=ri;function zi(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var qr=zi,To="__lodash_hash_undefined__",di=Object.prototype,So=di.hasOwnProperty;function Zi(e){var t=this.__data__;if(Qi){var n=t[e];return n===To?void 0:n}return So.call(t,e)?t[e]:void 0}var io=Zi,Mo=Object.prototype,gs=Mo.hasOwnProperty;function ya(e){var t=this.__data__;return Qi?t[e]!==void 0:gs.call(t,e)}var ia=ya,ps="__lodash_hash_undefined__";function os(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Qi&&t===void 0?ps:t,this}var Ct=os;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Gt.prototype.clear=Gi,Gt.prototype.delete=qr,Gt.prototype.get=io,Gt.prototype.has=ia,Gt.prototype.set=Ct;var Un=Gt;function Fr(){this.size=0,this.__data__={hash:new Un,map:new(ni||At),string:new Un}}var Oi=Fr;function Yi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ea=Yi;function Ns(e,t){var n=e.__data__;return ea(t)?n[typeof t=="string"?"string":"hash"]:n.map}var As=Ns;function Is(e){var t=As(this,e).delete(e);return this.size-=t?1:0,t}var al=Is;function Gh(e){return As(this,e).get(e)}var Op=Gh;function Kf(e){return As(this,e).has(e)}var ou=Kf;function Uf(e,t){var n=As(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var of=Uf;function au(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}au.prototype.clear=Oi,au.prototype.delete=al,au.prototype.get=Op,au.prototype.has=ou,au.prototype.set=of;var yu=au,af=200;function Sf(e,t){var n=this.__data__;if(n instanceof At){var r=n.__data__;if(!ni||r.length<af-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new yu(r)}return n.set(e,t),this.size=n.size,this}var Ou=Sf;function xs(e){var t=this.__data__=new At(e);this.size=t.size}xs.prototype.clear=cn,xs.prototype.delete=Qt,xs.prototype.get=Sr,xs.prototype.has=yr,xs.prototype.set=Ou;var tc=xs,sf="__lodash_hash_undefined__";function Ed(e){return this.__data__.set(e,sf),this}var np=Ed;function jf(e){return this.__data__.has(e)}var Sd=jf;function yh(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new yu;++t<n;)this.add(e[t])}yh.prototype.add=yh.prototype.push=np,yh.prototype.has=Sd;var Zh=yh;function Xh(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var wd=Xh;function Qp(e,t){return e.has(t)}var lf=Qp,Vc=1,Td=2;function jl(e,t,n,r,i,s){var l=n&Vc,c=e.length,h=t.length;if(c!=h&&!(l&&h>c))return!1;var p=s.get(e),v=s.get(t);if(p&&v)return p==t&&v==e;var y=-1,b=!0,T=n&Td?new Zh:void 0;for(s.set(e,t),s.set(t,e);++y<c;){var M=e[y],R=t[y];if(r)var L=l?r(R,M,y,t,e,s):r(M,R,y,e,t,s);if(L!==void 0){if(L)continue;b=!1;break}if(T){if(!wd(t,function(N,z){if(!lf(T,z)&&(M===N||i(M,N,n,r,s)))return T.push(z)})){b=!1;break}}else if(!(M===R||i(M,R,n,r,s))){b=!1;break}}return s.delete(e),s.delete(t),b}var Ac=jl,uf=Le.Uint8Array,su=uf;function Hc(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var hc=Hc;function wf(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Ml=wf,cf=1,Tf=2,Ad="[object Boolean]",Cd="[object Date]",ys="[object Error]",rp="[object Map]",Qf="[object Number]",Yh="[object RegExp]",sl="[object Set]",$h="[object String]",_h="[object Symbol]",_u="[object ArrayBuffer]",Wc="[object DataView]",Mu=yn?yn.prototype:void 0,Cc=Mu?Mu.valueOf:void 0;function we(e,t,n,r,i,s,l){switch(n){case Wc:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _u:return!(e.byteLength!=t.byteLength||!s(new su(e),new su(t)));case Ad:case Cd:case Qf:return pt(+e,+t);case ys:return e.name==t.name&&e.message==t.message;case Yh:case $h:return e==t+"";case rp:var c=hc;case sl:var h=r&cf;if(c||(c=Ml),e.size!=t.size&&!h)return!1;var p=l.get(e);if(p)return p==t;r|=Tf,l.set(e,t);var v=Ac(c(e),c(t),r,i,s,l);return l.delete(e),v;case _h:if(Cc)return Cc.call(e)==Cc.call(t)}return!1}var oe=we;function pe(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Je=pe;function sn(e,t,n){var r=t(e);return Nt(e)?r:Je(r,n(e))}var fn=sn;function ir(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var l=e[n];t(l,n,e)&&(s[i++]=l)}return s}var Cr=ir;function Xr(){return[]}var Bi=Xr,bo=Object.prototype,vo=bo.propertyIsEnumerable,Na=Object.getOwnPropertySymbols,Fa=Na?function(e){return e==null?[]:(e=Object(e),Cr(Na(e),function(t){return vo.call(e,t)}))}:Bi,Ea=Fa;function Aa(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var _a=Aa;function Ba(e){return e!=null&&typeof e=="object"}var Ca=Ba,Xa="[object Arguments]";function ba(e){return Ca(e)&&he(e)==Xa}var cs=ba,Ws=Object.prototype,zs=Ws.hasOwnProperty,dc=Ws.propertyIsEnumerable,dl=cs(function(){return arguments}())?cs:function(e){return Ca(e)&&zs.call(e,"callee")&&!dc.call(e,"callee")},ff=dl;function hf(){return!1}var pc=hf,Gc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bh=Gc&&typeof module=="object"&&module&&!module.nodeType&&module,Jf=bh&&bh.exports===Gc,Mp=Jf?Le.Buffer:void 0,ip=Mp?Mp.isBuffer:void 0,Rp=ip||pc,Af=Rp,Pp=9007199254740991,op=/^(?:0|[1-9]\d*)$/;function ap(e,t){var n=typeof e;return t=t==null?Pp:t,!!t&&(n=="number"||n!="symbol"&&op.test(e))&&e>-1&&e%1==0&&e<t}var eh=ap,Ip=9007199254740991;function xh(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ip}var Od=xh,th="[object Arguments]",Gs="[object Array]",nh="[object Boolean]",df="[object Date]",Vf="[object Error]",$a="[object Function]",ue="[object Map]",We="[object Number]",xt="[object Object]",Pn="[object RegExp]",ur="[object Set]",Br="[object String]",fi="[object WeakMap]",Ii="[object ArrayBuffer]",Xo="[object DataView]",Wo="[object Float32Array]",da="[object Float64Array]",$s="[object Int8Array]",Rl="[object Int16Array]",Es="[object Int32Array]",Ji="[object Uint8Array]",Pl="[object Uint8ClampedArray]",Eh="[object Uint16Array]",qh="[object Uint32Array]",Ka={};Ka[Wo]=Ka[da]=Ka[$s]=Ka[Rl]=Ka[Es]=Ka[Ji]=Ka[Pl]=Ka[Eh]=Ka[qh]=!0,Ka[th]=Ka[Gs]=Ka[Ii]=Ka[nh]=Ka[Xo]=Ka[df]=Ka[Vf]=Ka[$a]=Ka[ue]=Ka[We]=Ka[xt]=Ka[Pn]=Ka[ur]=Ka[Br]=Ka[fi]=!1;function Cs(e){return Ca(e)&&Od(e.length)&&!!Ka[he(e)]}var vc=Cs;function Ui(e){return function(t){return e(t)}}var Cf=Ui,Md=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Kh=Md&&typeof module=="object"&&module&&!module.nodeType&&module,Of=Kh&&Kh.exports===Md,mc=Of&&Ge.process,Jp=function(){try{var e=Kh&&Kh.require&&Kh.require("util").types;return e||mc&&mc.binding&&mc.binding("util")}catch(t){}}(),Sh=Jp,nc=Sh&&Sh.isTypedArray,rh=nc?Cf(nc):vc,Rd=rh,Pd=Object.prototype,Lp=Pd.hasOwnProperty;function e0(e,t){var n=Nt(e),r=!n&&ff(e),i=!n&&!r&&Af(e),s=!n&&!r&&!i&&Rd(e),l=n||r||i||s,c=l?_a(e.length,String):[],h=c.length;for(var p in e)(t||Lp.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||s&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||eh(p,h)))&&c.push(p);return c}var Oc=e0,pf=Object.prototype;function Sa(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||pf;return e===n}var gc=Sa;function pl(e,t){return function(n){return e(t(n))}}var vl=pl,Qh=vl(Object.keys,Object),wh=Qh,Mf=Object.prototype,rc=Mf.hasOwnProperty;function Id(e){if(!gc(e))return wh(e);var t=[];for(var n in Object(e))rc.call(e,n)&&n!="constructor"&&t.push(n);return t}var ko=Id;function Ao(e){return e!=null&&Od(e.length)&&!Kn(e)}var Ql=Ao;function ju(e){return Ql(e)?Oc(e):ko(e)}var Vu=ju;function ml(e){return fn(e,Vu,Ea)}var Zc=ml,Th=1,Jh=Object.prototype,Ss=Jh.hasOwnProperty;function bu(e,t,n,r,i,s){var l=n&Th,c=Zc(e),h=c.length,p=Zc(t),v=p.length;if(h!=v&&!l)return!1;for(var y=h;y--;){var b=c[y];if(!(l?b in t:Ss.call(t,b)))return!1}var T=s.get(e),M=s.get(t);if(T&&M)return T==t&&M==e;var R=!0;s.set(e,t),s.set(t,e);for(var L=l;++y<h;){b=c[y];var N=e[b],z=t[b];if(r)var H=l?r(z,N,b,t,e,s):r(N,z,b,e,t,s);if(!(H===void 0?N===z||i(N,z,n,r,s):H)){R=!1;break}L||(L=b=="constructor")}if(R&&!L){var X=e.constructor,Y=t.constructor;X!=Y&&"constructor"in e&&"constructor"in t&&!(typeof X=="function"&&X instanceof X&&typeof Y=="function"&&Y instanceof Y)&&(R=!1)}return s.delete(e),s.delete(t),R}var k0=bu,Ah=pr(Le,"DataView"),sp=Ah,Ch=pr(Le,"Promise"),ic=Ch,ih=pr(Le,"Set"),yc=ih,t0=pr(Le,"WeakMap"),Hf=t0,lp="[object Map]",n0="[object Object]",ed="[object Promise]",td="[object Set]",r0="[object WeakMap]",vf="[object DataView]",Wf=Si(sp),i0=Si(ni),nd=Si(ic),Rf=Si(yc),z0=Si(Hf),Gf=he;(sp&&Gf(new sp(new ArrayBuffer(1)))!=vf||ni&&Gf(new ni)!=lp||ic&&Gf(ic.resolve())!=ed||yc&&Gf(new yc)!=td||Hf&&Gf(new Hf)!=r0)&&(Gf=function(e){var t=he(e),n=t==n0?e.constructor:void 0,r=n?Si(n):"";if(r)switch(r){case Wf:return vf;case i0:return lp;case nd:return ed;case Rf:return td;case z0:return r0}return t});var mf=Gf,o0=1,_="[object Arguments]",S="[object Array]",x="[object Object]",O=Object.prototype,k=O.hasOwnProperty;function Z(e,t,n,r,i,s){var l=Nt(e),c=Nt(t),h=l?S:mf(e),p=c?S:mf(t);h=h==_?x:h,p=p==_?x:p;var v=h==x,y=p==x,b=h==p;if(b&&Af(e)){if(!Af(t))return!1;l=!0,v=!1}if(b&&!v)return s||(s=new tc),l||Rd(e)?Ac(e,t,n,r,i,s):oe(e,t,h,n,r,i,s);if(!(n&o0)){var T=v&&k.call(e,"__wrapped__"),M=y&&k.call(t,"__wrapped__");if(T||M){var R=T?e.value():e,L=M?t.value():t;return s||(s=new tc),i(R,L,n,r,s)}}return b?(s||(s=new tc),k0(e,t,n,r,i,s)):!1}var K=Z;function ge(e,t,n,r,i){return e===t?!0:e==null||t==null||!Ca(e)&&!Ca(t)?e!==e&&t!==t:K(e,t,n,r,ge,i)}var Ve=ge;function ct(e,t){return Ve(e,t)}var jt=ct;function Vt(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Xt=Vt,En=function(){try{var e=pr(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),gn=En;function kn(e,t,n){t=="__proto__"&&gn?gn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var un=kn,zn=Object.prototype,tr=zn.hasOwnProperty;function gr(e,t,n){var r=e[t];(!(tr.call(e,t)&&pt(r,n))||n===void 0&&!(t in e))&&un(e,t,n)}var Ir=gr;function Or(e,t,n,r){var i=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],h=r?r(n[c],e[c],c,n,e):void 0;h===void 0&&(h=e[c]),i?un(n,c,h):Ir(n,c,h)}return n}var zr=Or;function ii(e,t){return e&&zr(t,Vu(t),e)}var Hi=ii;function Fi(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var po=Fi,Vo=Object.prototype,$r=Vo.hasOwnProperty;function Kt(e){if(!de(e))return po(e);var t=gc(e),n=[];for(var r in e)r=="constructor"&&(t||!$r.call(e,r))||n.push(r);return n}var Ya=Kt;function yo(e){return Ql(e)?Oc(e,!0):Ya(e)}var Qo=yo;function Oa(e,t){return e&&zr(t,Qo(t),e)}var fa=Oa,Go=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xa=Go&&typeof module=="object"&&module&&!module.nodeType&&module,aa=xa&&xa.exports===Go,ta=aa?Le.Buffer:void 0,Vl=ta?ta.allocUnsafe:void 0;function Ls(e,t){if(t)return e.slice();var n=e.length,r=Vl?Vl(n):new e.constructor(n);return e.copy(r),r}var lu=Ls;function Us(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var ll=Us;function Il(e,t){return zr(e,Ea(e),t)}var Mc=Il,Hu=vl(Object.getPrototypeOf,Object),Zf=Hu,_c=Object.getOwnPropertySymbols,Xf=_c?function(e){for(var t=[];e;)Je(t,Ea(e)),e=Zf(e);return t}:Bi,Xc=Xf;function Dp(e,t){return zr(e,Xc(e),t)}var up=Dp;function Oh(e){return fn(e,Qo,Xc)}var Mi=Oh,Rc=Object.prototype,Yf=Rc.hasOwnProperty;function rd(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Yf.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Wu=rd;function xl(e){var t=new e.constructor(e.byteLength);return new su(t).set(new su(e)),t}var oc=xl;function Pf(e,t){var n=t?oc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var If=Pf,rs=/\w*$/;function Gu(e){var t=new e.constructor(e.source,rs.exec(e));return t.lastIndex=e.lastIndex,t}var xu=Gu,Lf=yn?yn.prototype:void 0,cp=Lf?Lf.valueOf:void 0;function Ld(e){return cp?Object(cp.call(e)):{}}var Sv=Ld;function Mh(e,t){var n=t?oc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var oh=Mh,gf="[object Boolean]",U0="[object Date]",gm="[object Map]",Np="[object Number]",Yc="[object RegExp]",Dy="[object Set]",a0="[object String]",Fp="[object Symbol]",Ny="[object ArrayBuffer]",Fy="[object DataView]",ym="[object Float32Array]",j0="[object Float64Array]",By="[object Int8Array]",_m="[object Int16Array]",xg="[object Int32Array]",Dd="[object Uint8Array]",s0="[object Uint8ClampedArray]",Eg="[object Uint16Array]",ky="[object Uint32Array]";function c1(e,t,n){var r=e.constructor;switch(t){case Ny:return oc(e);case gf:case U0:return new r(+e);case Fy:return If(e,n);case ym:case j0:case By:case _m:case xg:case Dd:case s0:case Eg:case ky:return oh(e,n);case gm:return new r;case Np:case a0:return new r(e);case Yc:return xu(e);case Dy:return new r;case Fp:return Sv(e)}}var bm=c1,xm=Object.create,Em=function(){function e(){}return function(t){if(!de(t))return{};if(xm)return xm(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Bp=Em;function l0(e){return typeof e.constructor=="function"&&!gc(e)?Bp(Zf(e)):{}}var wv=l0,Rh="[object Map]";function V0(e){return Ca(e)&&mf(e)==Rh}var Hl=V0,kp=Sh&&Sh.isMap,u0=kp?Cf(kp):Hl,Nd=u0,Fd="[object Set]";function Bd(e){return Ca(e)&&mf(e)==Fd}var kd=Bd,zd=Sh&&Sh.isSet,fp=zd?Cf(zd):kd,c0=fp,zp=1,Sg=2,Zu=4,Ph="[object Arguments]",H0="[object Array]",W0="[object Boolean]",wg="[object Date]",Sm="[object Error]",ah="[object Function]",Ud="[object GeneratorFunction]",wm="[object Map]",G0="[object Number]",jd="[object Object]",Tg="[object RegExp]",f0="[object Set]",Ag="[object String]",Ih="[object Symbol]",Vd="[object WeakMap]",Df="[object ArrayBuffer]",Hd="[object DataView]",Tm="[object Float32Array]",Lh="[object Float64Array]",Z0="[object Int8Array]",X0="[object Int16Array]",$c="[object Int32Array]",Pc="[object Uint8Array]",uu="[object Uint8ClampedArray]",Nf="[object Uint16Array]",Y0="[object Uint32Array]",rl={};rl[Ph]=rl[H0]=rl[Df]=rl[Hd]=rl[W0]=rl[wg]=rl[Tm]=rl[Lh]=rl[Z0]=rl[X0]=rl[$c]=rl[wm]=rl[G0]=rl[jd]=rl[Tg]=rl[f0]=rl[Ag]=rl[Ih]=rl[Pc]=rl[uu]=rl[Nf]=rl[Y0]=!0,rl[Sm]=rl[ah]=rl[Vd]=!1;function Up(e,t,n,r,i,s){var l,c=t&zp,h=t&Sg,p=t&Zu;if(n&&(l=i?n(e,r,i,s):n(e)),l!==void 0)return l;if(!de(e))return e;var v=Nt(e);if(v){if(l=Wu(e),!c)return ll(e,l)}else{var y=mf(e),b=y==ah||y==Ud;if(Af(e))return lu(e,c);if(y==jd||y==Ph||b&&!i){if(l=h||b?{}:wv(e),!c)return h?up(e,fa(l,e)):Mc(e,Hi(l,e))}else{if(!rl[y])return i?e:{};l=bm(e,y,c)}}s||(s=new tc);var T=s.get(e);if(T)return T;s.set(e,l),c0(e)?e.forEach(function(L){l.add(Up(L,t,n,L,e,s))}):Nd(e)&&e.forEach(function(L,N){l.set(N,Up(L,t,n,N,e,s))});var M=p?h?Mi:Zc:h?Qo:Vu,R=v?void 0:M(e);return Xt(R||e,function(L,N){R&&(N=L,L=e[N]),Ir(l,N,Up(L,t,n,N,e,s))}),l}var Tv=Up,zy=1,Cg=4;function Uy(e){return Tv(e,zy|Cg)}var Am=Uy,Ic="[object Symbol]";function Cm(e){return typeof e=="symbol"||Ca(e)&&he(e)==Ic}var h0=Cm,Om=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Og=/^\w*$/;function Av(e,t){if(Nt(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||h0(e)?!0:Og.test(e)||!Om.test(e)||t!=null&&e in Object(t)}var bc=Av,Mm="Expected a function";function $0(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Mm);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var l=e.apply(this,r);return n.cache=s.set(i,l)||s,l};return n.cache=new($0.Cache||yu),n}$0.Cache=yu;var Mg=$0,Ue=500;function Yt(e){var t=Mg(e,function(r){return n.size===Ue&&n.clear(),r}),n=t.cache;return t}var On=Yt,Mr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ei=/\\(\\)?/g,Rr=On(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Mr,function(n,r,i,s){t.push(i?s.replace(ei,"$1"):r||n)}),t}),br=Rr;function Li(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var hi=Li,ki=1/0,Di=yn?yn.prototype:void 0,ji=Di?Di.toString:void 0;function $i(e){if(typeof e=="string")return e;if(Nt(e))return hi(e,$i)+"";if(h0(e))return ji?ji.call(e):"";var t=e+"";return t=="0"&&1/e==-ki?"-0":t}var bi=$i;function Vi(e){return e==null?"":bi(e)}var dr=Vi;function Ur(e,t){return Nt(e)?e:bc(e,t)?[e]:br(dr(e))}var xi=Ur,ro=1/0;function ai(e){if(typeof e=="string"||h0(e))return e;var t=e+"";return t=="0"&&1/e==-ro?"-0":t}var eo=ai;function wi(e,t){t=xi(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[eo(t[n++])];return n&&n==r?e:void 0}var qi=wi;function si(e,t,n){var r=e==null?void 0:qi(e,t);return r===void 0?n:r}var vi=si,Ho=function(){return Ho=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ho.apply(this,arguments)},va=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Ki(e,t){var n=(0,$.useRef)(),r=(0,$.useRef)(),i=(0,$.useRef)(null),s=t.onReady,l=t.onEvent,c=function(v,y){var b;v===void 0&&(v="image/png");var T=(b=i.current)===null||b===void 0?void 0:b.getElementsByTagName("canvas")[0];return T==null?void 0:T.toDataURL(v,y)},h=function(v,y,b){v===void 0&&(v="download"),y===void 0&&(y="image/png");var T=v;v.indexOf(".")===-1&&(T="".concat(v,".").concat(y.split("/")[1]));var M=c(y,b),R=document.createElement("a");return R.href=M,R.download=T,document.body.appendChild(R),R.click(),document.body.removeChild(R),R=null,T},p=function(v,y){y===void 0&&(y=!1);var b=Object.keys(v),T=y;b.forEach(function(M){var R=v[M];M==="tooltip"&&(T=!0),Kn(R)&&pn("".concat(R))?v[M]=function(){for(var L=[],N=0;N<arguments.length;N++)L[N]=arguments[N];return tn(R.apply(void 0,L),T)}:Nt(R)?R.forEach(function(L){p(L,T)}):de(R)?p(R,T):T=y})};return(0,$.useEffect)(function(){if(n.current&&!jt(r.current,t)){var v=!1;if(r.current){var y=r.current,b=y.data,T=va(y,["data"]),M=t.data,R=va(t,["data"]);v=jt(T,R)}r.current=Am(t),v?n.current.changeData(vi(t,"data")):(p(t),n.current.update(t),n.current.render())}},[t]),(0,$.useEffect)(function(){if(!i.current)return function(){return null};r.current||(r.current=Am(t)),p(t);var v=new e(i.current,Ho({},t));v.toDataURL=c,v.downloadImage=h,v.render(),n.current=v,s&&s(v);var y=function(b){l&&l(v,b)};return v.on("*",y),function(){n.current&&(n.current.destroy(),n.current.off("*",y),n.current=void 0)}},[]),{chart:n,container:i}}var Ri="*",Jr=function(){function e(){this._events={}}return e.prototype.on=function(t,n,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:n,once:!!r}),this},e.prototype.once=function(t,n){return this.on(t,n,!0)},e.prototype.emit=function(t){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=this._events[t]||[],l=this._events[Ri]||[],c=function(h){for(var p=h.length,v=0;v<p;v++)if(h[v]){var y=h[v],b=y.callback,T=y.once;T&&(h.splice(v,1),h.length===0&&delete n._events[t],p--,v--),b.apply(n,r)}};c(s),c(l)},e.prototype.off=function(t,n){if(!t)this._events={};else if(!n)delete this._events[t];else{for(var r=this._events[t]||[],i=r.length,s=0;s<i;s++)r[s].callback===n&&(r.splice(s,1),i--,s--);r.length===0&&delete this._events[t]}return this},e.prototype.getEvents=function(){return this._events},e}(),zo=Jr,ie=D(97582),lo=D(38554),Ma=lo,Hn=D(77160),jr=D(85975),Qa=D(49685);function Jl(){var e=new Qa.WT(9);return Qa.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Xu(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Ja(e){var t=new glMatrix.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function cu(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function il(e,t,n,r,i,s,l,c,h){var p=new Qa.WT(9);return p[0]=e,p[1]=t,p[2]=n,p[3]=r,p[4]=i,p[5]=s,p[6]=l,p[7]=c,p[8]=h,p}function Eu(e,t,n,r,i,s,l,c,h,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=l,e[6]=c,e[7]=h,e[8]=p,e}function Su(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ll(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Yu(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8],y=v*l-c*p,b=-v*s+c*h,T=p*s-l*h,M=n*y+r*b+i*T;return M?(M=1/M,e[0]=y*M,e[1]=(-v*r+i*p)*M,e[2]=(c*r-i*l)*M,e[3]=b*M,e[4]=(v*n-i*h)*M,e[5]=(-c*n+i*s)*M,e[6]=T*M,e[7]=(-p*n+r*h)*M,e[8]=(l*n-r*s)*M,e):null}function Lc(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8];return e[0]=l*v-c*p,e[1]=i*p-r*v,e[2]=r*c-i*l,e[3]=c*h-s*v,e[4]=n*v-i*h,e[5]=i*s-n*c,e[6]=s*p-l*h,e[7]=r*h-n*p,e[8]=n*l-r*s,e}function wu(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],l=e[5],c=e[6],h=e[7],p=e[8];return t*(p*s-l*h)+n*(-p*i+l*c)+r*(h*i-s*c)}function ka(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],T=n[1],M=n[2],R=n[3],L=n[4],N=n[5],z=n[6],H=n[7],X=n[8];return e[0]=b*r+T*l+M*p,e[1]=b*i+T*c+M*v,e[2]=b*s+T*h+M*y,e[3]=R*r+L*l+N*p,e[4]=R*i+L*c+N*v,e[5]=R*s+L*h+N*y,e[6]=z*r+H*l+X*p,e[7]=z*i+H*c+X*v,e[8]=z*s+H*h+X*y,e}function xc(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],T=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=l,e[4]=c,e[5]=h,e[6]=b*r+T*l+p,e[7]=b*i+T*c+v,e[8]=b*s+T*h+y,e}function Os(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=Math.sin(n),T=Math.cos(n);return e[0]=T*r+b*l,e[1]=T*i+b*c,e[2]=T*s+b*h,e[3]=T*l-b*r,e[4]=T*c-b*i,e[5]=T*h-b*s,e[6]=p,e[7]=v,e[8]=y,e}function Jo(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function es(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function fs(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function fu(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Dh(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function bn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n+n,c=r+r,h=i+i,p=n*l,v=r*l,y=r*c,b=i*l,T=i*c,M=i*h,R=s*l,L=s*c,N=s*h;return e[0]=1-y-M,e[3]=v-N,e[6]=b+L,e[1]=v+N,e[4]=1-p-M,e[7]=T-R,e[2]=b-L,e[5]=T+R,e[8]=1-p-y,e}function Lr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8],y=t[9],b=t[10],T=t[11],M=t[12],R=t[13],L=t[14],N=t[15],z=n*c-r*l,H=n*h-i*l,X=n*p-s*l,Y=r*h-i*c,ne=r*p-s*c,ve=i*p-s*h,Ee=v*R-y*M,Ie=v*L-b*M,Ye=v*N-T*M,$e=y*L-b*R,St=y*N-T*R,Qe=b*N-T*L,lt=z*Qe-H*St+X*$e+Y*Ye-ne*Ie+ve*Ee;return lt?(lt=1/lt,e[0]=(c*Qe-h*St+p*$e)*lt,e[1]=(h*Ye-l*Qe-p*Ie)*lt,e[2]=(l*St-c*Ye+p*Ee)*lt,e[3]=(i*St-r*Qe-s*$e)*lt,e[4]=(n*Qe-i*Ye+s*Ie)*lt,e[5]=(r*Ye-n*St-s*Ee)*lt,e[6]=(R*ve-L*ne+N*Y)*lt,e[7]=(L*X-M*ve-N*H)*lt,e[8]=(M*ne-R*X+N*z)*lt,e):null}function vr(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function co(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function wa(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function qs(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Ft(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function rn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Rn(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function Tr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function _r(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],l=e[4],c=e[5],h=e[6],p=e[7],v=e[8],y=t[0],b=t[1],T=t[2],M=t[3],R=t[4],L=t[5],N=t[6],z=t[7],H=t[8];return Math.abs(n-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-T)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-M)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-R)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(c-L)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(L))&&Math.abs(h-N)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(p-z)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(v-H)<=glMatrix.EPSILON*Math.max(1,Math.abs(v),Math.abs(H))}var jn=null,Jn=null,Vn=D(98333);function on(){var e=new Qa.WT(4);return Qa.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Gn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function $t(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function er(e,t){var n=Math.acos(t[3])*2,r=Math.sin(n/2);return r>glMatrix.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Nr(e,t){var n=Ov(e,t);return Math.acos(2*n*n-1)}function Dr(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=n[0],h=n[1],p=n[2],v=n[3];return e[0]=r*v+l*c+i*p-s*h,e[1]=i*v+l*h+s*c-r*p,e[2]=s*v+l*p+r*h-i*c,e[3]=l*v-r*c-i*h-s*p,e}function gi(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h+l*c,e[1]=i*h+s*c,e[2]=s*h-i*c,e[3]=l*h-r*c,e}function oi(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h-s*c,e[1]=i*h+l*c,e[2]=s*h+r*c,e[3]=l*h-i*c,e}function Ti(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h+i*c,e[1]=i*h-r*c,e[2]=s*h+l*c,e[3]=l*h-s*c,e}function Fo(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function wo(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),c=Math.exp(s),h=l>0?c*Math.sin(l)/l:0;return e[0]=n*h,e[1]=r*h,e[2]=i*h,e[3]=c*Math.cos(l),e}function Ro(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),c=l>0?Math.atan2(l,s)/l:0;return e[0]=n*c,e[1]=r*c,e[2]=i*c,e[3]=.5*Math.log(n*n+r*r+i*i+s*s),e}function sa(e,t,n){return Ro(e,t),Cv(e,e,n),wo(e,e),e}function ha(e,t,n,r){var i=t[0],s=t[1],l=t[2],c=t[3],h=n[0],p=n[1],v=n[2],y=n[3],b,T,M,R,L;return T=i*h+s*p+l*v+c*y,T<0&&(T=-T,h=-h,p=-p,v=-v,y=-y),1-T>Qa.Ib?(b=Math.acos(T),M=Math.sin(b),R=Math.sin((1-r)*b)/M,L=Math.sin(r*b)/M):(R=1-r,L=r),e[0]=R*i+L*h,e[1]=R*s+L*p,e[2]=R*l+L*v,e[3]=R*c+L*y,e}function Ds(e){var t=glMatrix.RANDOM(),n=glMatrix.RANDOM(),r=glMatrix.RANDOM(),i=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=s*Math.sin(2*Math.PI*r),e[3]=s*Math.cos(2*Math.PI*r),e}function Wl(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n+r*r+i*i+s*s,c=l?1/l:0;return e[0]=-n*c,e[1]=-r*c,e[2]=-i*c,e[3]=s*c,e}function sh(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Rg(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,l=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[l*3+l]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+l]-t[l*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[l]=(t[l*3+i]+t[i*3+l])*r}return e}function qc(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var s=Math.sin(t),l=Math.cos(t),c=Math.sin(n),h=Math.cos(n),p=Math.sin(r),v=Math.cos(r);return e[0]=s*h*v-l*c*p,e[1]=l*c*v+s*h*p,e[2]=l*h*p-s*c*v,e[3]=l*h*v+s*c*p,e}function jy(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var jp=Vn.d9,d0=Vn.al,Rm=Vn.JG,jE=Vn.t8,f1=Vn.IH,Pm=Dr,Cv=Vn.bA,Ov=Vn.AK,Im=Vn.t7,VE=Vn.kE,Dl=null,El=Vn.we,Pg=null,Lm=Vn.Fv,ix=Vn.I6,Mv=Vn.fS,ox=function(){var e=Hn.Ue(),t=Hn.al(1,0,0),n=Hn.al(0,1,0);return function(r,i,s){var l=Hn.AK(i,s);return l<-.999999?(Hn.kC(e,t,i),Hn.Zh(e)<1e-6&&Hn.kC(e,n,i),Hn.Fv(e,e),$t(r,e,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Hn.kC(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+l,Lm(r,r))}}(),h1=function(){var e=on(),t=on();return function(n,r,i,s,l,c){return ha(e,r,l,c),ha(t,i,s,c),ha(n,e,t,2*c*(1-c)),n}}(),Dm=function(){var e=Jl();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],Lm(t,Rg(t,e))}}(),hp=D(31437),$u=D(25897);function js(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Lo=D(95147),Wd=D(95456),Gl=function(e){return(0,Wd.Z)(e,"String")},Zl=D(81957),p0={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function Rv(e){return Array.isArray(e)&&e.every(function(t){var n=t[0].toLowerCase();return p0[n]===t.length-1&&"achlmqstvz".includes(n)})}function id(e){return Rv(e)&&e.every(function(t){var n=t[0];return n===n.toUpperCase()})}function q0(e){return id(e)&&e.every(function(t){var n=t[0];return"ACLMQZ".includes(n)})}var d1={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Ig(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=p0[n]&&(n==="m"&&r.length>2?(e.segments.push([t].concat(r.splice(0,2))),n="l",t=t==="m"?"l":"L"):e.segments.push([t].concat(r.splice(0,p0[n]))),!!p0[n]););}function Ru(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);if(r===48){e.param=0,e.index+=1;return}if(r===49){e.param=1,e.index+=1;return}e.err='[path-util]: invalid Arc flag "'+n[t]+'", expecting 0 or 1 at index '+t}function od(e){return e>=48&&e<=57||e===43||e===45||e===46}function K0(e){return e>=48&&e<=57}function u(e){var t=e.max,n=e.pathValue,r=e.index,i=r,s=!1,l=!1,c=!1,h=!1,p;if(i>=t){e.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(p=n.charCodeAt(i),(p===43||p===45)&&(i+=1,p=n.charCodeAt(i)),!K0(p)&&p!==46){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" is not a number';return}if(p!==46){if(s=p===48,i+=1,p=n.charCodeAt(i),s&&i<t&&p&&K0(p)){e.err="[path-util]: Invalid path value at index "+r+', "'+n[r]+'" illegal number';return}for(;i<t&&K0(n.charCodeAt(i));)i+=1,l=!0;p=n.charCodeAt(i)}if(p===46){for(h=!0,i+=1;K0(n.charCodeAt(i));)i+=1,c=!0;p=n.charCodeAt(i)}if(p===101||p===69){if(h&&!l&&!c){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid float exponent';return}if(i+=1,p=n.charCodeAt(i),(p===43||p===45)&&(i+=1),i<t&&K0(n.charCodeAt(i)))for(;i<t&&K0(n.charCodeAt(i));)i+=1;else{e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid integer exponent';return}}e.index=i,e.param=+e.pathValue.slice(r,i)}function d(e){var t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&t.includes(e)}function g(e){for(var t=e.pathValue,n=e.max;e.index<n&&d(t.charCodeAt(e.index));)e.index+=1}function A(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function P(e){return(e|32)===97}function F(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),s=p0[n[r].toLowerCase()];if(e.segmentStart=r,!A(i)){e.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command';return}if(e.index+=1,g(e),e.data=[],!s){Ig(e);return}for(;;){for(var l=s;l>0;l-=1){if(P(i)&&(l===3||l===4)?Ru(e):u(e),e.err.length)return;e.data.push(e.param),g(e),e.index<t&&n.charCodeAt(e.index)===44&&(e.index+=1,g(e))}if(e.index>=e.max||!od(n.charCodeAt(e.index)))break}Ig(e)}var j=function(){function e(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return e}();function te(e){if(Rv(e))return[].concat(e);var t=new j(e);for(g(t);t.index<t.max&&!t.err.length;)F(t);return t.err?t.err:t.segments}function _e(e){if(id(e))return[].concat(e);var t=te(e),n=0,r=0,i=0,s=0;return t.map(function(l){var c=l.slice(1).map(Number),h=l[0],p=h.toUpperCase();if(h==="M")return n=c[0],r=c[1],i=n,s=r,["M",n,r];var v;if(h!==p)switch(p){case"A":v=[p,c[0],c[1],c[2],c[3],c[4],c[5]+n,c[6]+r];break;case"V":v=[p,c[0]+r];break;case"H":v=[p,c[0]+n];break;default:{var y=c.map(function(T,M){return T+(M%2?r:n)});v=[p].concat(y)}}else v=[p].concat(c);var b=v.length;switch(p){case"Z":n=i,r=s;break;case"H":n=v[1];break;case"V":r=v[1];break;default:n=v[b-2],r=v[b-1],p==="M"&&(i=n,s=r)}return v})}function Ne(e,t){var n=e[0],r=t.x1,i=t.y1,s=t.x2,l=t.y2,c=e.slice(1).map(Number),h=e;if("TQ".includes(n)||(t.qx=null,t.qy=null),n==="H")h=["L",e[1],i];else if(n==="V")h=["L",r,e[1]];else if(n==="S"){var p=r*2-s,v=i*2-l;t.x1=p,t.y1=v,h=["C",p,v].concat(c)}else if(n==="T"){var y=r*2-t.qx,b=i*2-t.qy;t.qx=y,t.qy=b,h=["Q",y,b].concat(c)}else if(n==="Q"){var T=c[0],M=c[1];t.qx=T,t.qy=M}return h}function Xe(e){if(q0(e))return[].concat(e);for(var t=_e(e),n=(0,ie.pi)({},d1),r=0;r<t.length;r+=1){t[r]=Ne(t[r],n);var i=t[r],s=i.length;n.x1=+i[s-2],n.y1=+i[s-1],n.x2=+i[s-4]||n.x1,n.y2=+i[s-3]||n.y1}return t}function it(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return[r+(s-r)*n,i+(l-i)*n]}function Tt(e,t,n,r,i){var s=js([e,t],[n,r]),l={x:0,y:0};if(typeof i=="number")if(i<=0)l={x:e,y:t};else if(i>=s)l={x:n,y:r};else{var c=it([e,t],[n,r],i/s),h=c[0],p=c[1];l={x:h,y:p}}return{length:s,point:l,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function Bt(e,t){var n=e.x,r=e.y,i=t.x,s=t.y,l=n*i+r*s,c=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(s,2))),h=n*s-r*i<0?-1:1,p=h*Math.acos(l/c);return p}function vn(e,t,n,r,i,s,l,c,h,p){var v=Math.abs,y=Math.sin,b=Math.cos,T=Math.sqrt,M=Math.PI,R=v(n),L=v(r),N=(i%360+360)%360,z=N*(M/180);if(e===c&&t===h)return{x:e,y:t};if(R===0||L===0)return Tt(e,t,c,h,p).point;var H=(e-c)/2,X=(t-h)/2,Y={x:b(z)*H+y(z)*X,y:-y(z)*H+b(z)*X},ne=Math.pow(Y.x,2)/Math.pow(R,2)+Math.pow(Y.y,2)/Math.pow(L,2);ne>1&&(R*=T(ne),L*=T(ne));var ve=Math.pow(R,2)*Math.pow(L,2)-Math.pow(R,2)*Math.pow(Y.y,2)-Math.pow(L,2)*Math.pow(Y.x,2),Ee=Math.pow(R,2)*Math.pow(Y.y,2)+Math.pow(L,2)*Math.pow(Y.x,2),Ie=ve/Ee;Ie=Ie<0?0:Ie;var Ye=(s!==l?1:-1)*T(Ie),$e={x:Ye*(R*Y.y/L),y:Ye*(-(L*Y.x)/R)},St={x:b(z)*$e.x-y(z)*$e.y+(e+c)/2,y:y(z)*$e.x+b(z)*$e.y+(t+h)/2},Qe={x:(Y.x-$e.x)/R,y:(Y.y-$e.y)/L},lt=Bt({x:1,y:0},Qe),ht={x:(-Y.x-$e.x)/R,y:(-Y.y-$e.y)/L},bt=Bt(Qe,ht);!l&&bt>0?bt-=2*M:l&&bt<0&&(bt+=2*M),bt%=2*M;var Ht=lt+bt*p,Ot=R*b(Ht),kt=L*y(Ht),Mn={x:b(z)*Ot-y(z)*kt+St.x,y:y(z)*Ot+b(z)*kt+St.y};return Mn}function xn(e,t,n,r,i,s,l,c,h,p,v){var y,b=v.bbox,T=b===void 0?!0:b,M=v.length,R=M===void 0?!0:M,L=v.sampleSize,N=L===void 0?30:L,z=typeof p=="number",H=e,X=t,Y=0,ne=[H,X,Y],ve=[H,X],Ee=0,Ie={x:0,y:0},Ye=[{x:H,y:X}];z&&p<=0&&(Ie={x:H,y:X});for(var $e=0;$e<=N;$e+=1){if(Ee=$e/N,y=vn(e,t,n,r,i,s,l,c,h,Ee),H=y.x,X=y.y,T&&Ye.push({x:H,y:X}),R&&(Y+=js(ve,[H,X])),ve=[H,X],z&&Y>=p&&p>ne[2]){var St=(Y-p)/(Y-ne[2]);Ie={x:ve[0]*(1-St)+ne[0]*St,y:ve[1]*(1-St)+ne[1]*St}}ne=[H,X,Y]}return z&&p>=Y&&(Ie={x:c,y:h}),{length:Y,point:Ie,min:{x:Math.min.apply(null,Ye.map(function(Qe){return Qe.x})),y:Math.min.apply(null,Ye.map(function(Qe){return Qe.y}))},max:{x:Math.max.apply(null,Ye.map(function(Qe){return Qe.x})),y:Math.max.apply(null,Ye.map(function(Qe){return Qe.y}))}}}function Zn(e,t,n,r,i,s,l,c,h){var p=1-h;return{x:Math.pow(p,3)*e+3*Math.pow(p,2)*h*n+3*p*Math.pow(h,2)*i+Math.pow(h,3)*l,y:Math.pow(p,3)*t+3*Math.pow(p,2)*h*r+3*p*Math.pow(h,2)*s+Math.pow(h,3)*c}}function Ln(e,t,n,r,i,s,l,c,h,p){var v,y=p.bbox,b=y===void 0?!0:y,T=p.length,M=T===void 0?!0:T,R=p.sampleSize,L=R===void 0?10:R,N=typeof h=="number",z=e,H=t,X=0,Y=[z,H,X],ne=[z,H],ve=0,Ee={x:0,y:0},Ie=[{x:z,y:H}];N&&h<=0&&(Ee={x:z,y:H});for(var Ye=0;Ye<=L;Ye+=1){if(ve=Ye/L,v=Zn(e,t,n,r,i,s,l,c,ve),z=v.x,H=v.y,b&&Ie.push({x:z,y:H}),M&&(X+=js(ne,[z,H])),ne=[z,H],N&&X>=h&&h>Y[2]){var $e=(X-h)/(X-Y[2]);Ee={x:ne[0]*(1-$e)+Y[0]*$e,y:ne[1]*(1-$e)+Y[1]*$e}}Y=[z,H,X]}return N&&h>=X&&(Ee={x:l,y:c}),{length:X,point:Ee,min:{x:Math.min.apply(null,Ie.map(function(St){return St.x})),y:Math.min.apply(null,Ie.map(function(St){return St.y}))},max:{x:Math.max.apply(null,Ie.map(function(St){return St.x})),y:Math.max.apply(null,Ie.map(function(St){return St.y}))}}}function fr(e,t,n,r,i,s,l){var c=1-l;return{x:Math.pow(c,2)*e+2*c*l*n+Math.pow(l,2)*i,y:Math.pow(c,2)*t+2*c*l*r+Math.pow(l,2)*s}}function xr(e,t,n,r,i,s,l,c){var h,p=c.bbox,v=p===void 0?!0:p,y=c.length,b=y===void 0?!0:y,T=c.sampleSize,M=T===void 0?10:T,R=typeof l=="number",L=e,N=t,z=0,H=[L,N,z],X=[L,N],Y=0,ne={x:0,y:0},ve=[{x:L,y:N}];R&&l<=0&&(ne={x:L,y:N});for(var Ee=0;Ee<=M;Ee+=1){if(Y=Ee/M,h=fr(e,t,n,r,i,s,Y),L=h.x,N=h.y,v&&ve.push({x:L,y:N}),b&&(z+=js(X,[L,N])),X=[L,N],R&&z>=l&&l>H[2]){var Ie=(z-l)/(z-H[2]);ne={x:X[0]*(1-Ie)+H[0]*Ie,y:X[1]*(1-Ie)+H[1]*Ie}}H=[L,N,z]}return R&&l>=z&&(ne={x:i,y:s}),{length:z,point:ne,min:{x:Math.min.apply(null,ve.map(function(Ye){return Ye.x})),y:Math.min.apply(null,ve.map(function(Ye){return Ye.y}))},max:{x:Math.max.apply(null,ve.map(function(Ye){return Ye.x})),y:Math.max.apply(null,ve.map(function(Ye){return Ye.y}))}}}function Pr(e,t,n){for(var r,i,s,l,c,h,p=Xe(e),v=typeof t=="number",y,b=[],T,M=0,R=0,L=0,N=0,z,H=[],X=[],Y=0,ne={x:0,y:0},ve=ne,Ee=ne,Ie=ne,Ye=0,$e=0,St=p.length;$e<St;$e+=1)z=p[$e],T=z[0],y=T==="M",b=y?b:[M,R].concat(z.slice(1)),y?(L=z[1],N=z[2],ne={x:L,y:N},ve=ne,Y=0,v&&t<.001&&(Ie=ne)):T==="L"?(r=Tt(b[0],b[1],b[2],b[3],(t||0)-Ye),Y=r.length,ne=r.min,ve=r.max,Ee=r.point):T==="A"?(i=xn(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],(t||0)-Ye,n||{}),Y=i.length,ne=i.min,ve=i.max,Ee=i.point):T==="C"?(s=Ln(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],(t||0)-Ye,n||{}),Y=s.length,ne=s.min,ve=s.max,Ee=s.point):T==="Q"?(l=xr(b[0],b[1],b[2],b[3],b[4],b[5],(t||0)-Ye,n||{}),Y=l.length,ne=l.min,ve=l.max,Ee=l.point):T==="Z"&&(b=[M,R,L,N],c=Tt(b[0],b[1],b[2],b[3],(t||0)-Ye),Y=c.length,ne=c.min,ve=c.max,Ee=c.point),v&&Ye<t&&Ye+Y>=t&&(Ie=Ee),X.push(ve),H.push(ne),Ye+=Y,h=T!=="Z"?z.slice(-2):[L,N],M=h[0],R=h[1];return v&&t>=Ye&&(Ie={x:M,y:R}),{length:Ye,point:Ie,min:{x:Math.min.apply(null,H.map(function(Qe){return Qe.x})),y:Math.min.apply(null,H.map(function(Qe){return Qe.y}))},max:{x:Math.max.apply(null,X.map(function(Qe){return Qe.x})),y:Math.max.apply(null,X.map(function(Qe){return Qe.y}))}}}function kr(e,t){return Pr(e,void 0,(0,ie.pi)((0,ie.pi)({},t),{bbox:!1,length:!0})).length}var Hr=function(e){return Array.isArray?Array.isArray(e):(0,Wd.Z)(e,"Array")},Ni=function(e){if(Hr(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},Xi=function(e){if(Hr(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},Uo=1e-5;function oo(e,t,n){return n===void 0&&(n=Uo),Math.abs(e-t)<n}var Yo=function(e,t){return(e%t+t)%t},fo=Yo;function Ha(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]="A",e.splice(i+=1,0,["C"].concat(r.splice(0,6)));e.splice(n,1)}}function ua(e){return q0(e)&&e.every(function(t){var n=t[0];return"MC".includes(n)})}function Co(e,t,n){var r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return{x:r,y:i}}function Wa(e,t,n,r,i,s,l,c,h,p){var v=e,y=t,b=n,T=r,M=c,R=h,L=Math.PI*120/180,N=Math.PI/180*(+i||0),z=[],H,X,Y,ne,ve;if(p)X=p[0],Y=p[1],ne=p[2],ve=p[3];else{H=Co(v,y,-N),v=H.x,y=H.y,H=Co(M,R,-N),M=H.x,R=H.y;var Ee=(v-M)/2,Ie=(y-R)/2,Ye=Ee*Ee/(b*b)+Ie*Ie/(T*T);Ye>1&&(Ye=Math.sqrt(Ye),b*=Ye,T*=Ye);var $e=b*b,St=T*T,Qe=(s===l?-1:1)*Math.sqrt(Math.abs(($e*St-$e*Ie*Ie-St*Ee*Ee)/($e*Ie*Ie+St*Ee*Ee)));ne=Qe*b*Ie/T+(v+M)/2,ve=Qe*-T*Ee/b+(y+R)/2,X=Math.asin(((y-ve)/T*Math.pow(10,9)>>0)/Math.pow(10,9)),Y=Math.asin(((R-ve)/T*Math.pow(10,9)>>0)/Math.pow(10,9)),X=v<ne?Math.PI-X:X,Y=M<ne?Math.PI-Y:Y,X<0&&(X=Math.PI*2+X),Y<0&&(Y=Math.PI*2+Y),l&&X>Y&&(X-=Math.PI*2),!l&&Y>X&&(Y-=Math.PI*2)}var lt=Y-X;if(Math.abs(lt)>L){var ht=Y,bt=M,Ht=R;Y=X+L*(l&&Y>X?1:-1),M=ne+b*Math.cos(Y),R=ve+T*Math.sin(Y),z=Wa(M,R,b,T,i,0,l,bt,Ht,[Y,ht,ne,ve])}lt=Y-X;var Ot=Math.cos(X),kt=Math.sin(X),Mn=Math.cos(Y),Wn=Math.sin(Y),cr=Math.tan(lt/4),ar=4/3*b*cr,Yr=4/3*T*cr,Pi=[v,y],so=[v+ar*kt,y-Yr*Ot],mi=[M+ar*Wn,R-Yr*Mn],ti=[M,R];if(so[0]=2*Pi[0]-so[0],so[1]=2*Pi[1]-so[1],p)return so.concat(mi,ti,z);z=so.concat(mi,ti,z);for(var Do=[],uo=0,Ko=z.length;uo<Ko;uo+=1)Do[uo]=uo%2?Co(z[uo-1],z[uo],N).y:Co(z[uo],z[uo+1],N).x;return Do}function Ra(e,t,n,r,i,s){var l=.3333333333333333,c=2/3;return[l*e+c*n,l*t+c*r,l*i+c*n,l*s+c*r,i,s]}var ls=function(e,t,n,r){var i=.5,s=it([e,t],[n,r],i);return(0,ie.ev)((0,ie.ev)([],s,!0),[n,r,n,r],!1)};function qo(e,t){var n=e[0],r=e.slice(1).map(Number),i=r[0],s=r[1],l,c=t.x1,h=t.y1,p=t.x,v=t.y;switch("TQ".includes(n)||(t.qx=null,t.qy=null),n){case"M":return t.x=i,t.y=s,e;case"A":return l=[c,h].concat(r),["C"].concat(Wa(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9]));case"Q":return t.qx=i,t.qy=s,l=[c,h].concat(r),["C"].concat(Ra(l[0],l[1],l[2],l[3],l[4],l[5]));case"L":return["C"].concat(ls(c,h,i,s));case"Z":return c===p&&h===v?["C",c,h,p,v,p,v]:["C"].concat(ls(c,h,p,v));default:}return e}function vs(e,t){if(t===void 0&&(t=!1),ua(e)){var n=[].concat(e);return t?[n,[]]:n}for(var r=Xe(e),i=(0,ie.pi)({},d1),s=[],l="",c=r.length,h,p,v=[],y=0;y<c;y+=1){r[y]&&(l=r[y][0]),s[y]=l;var b=qo(r[y],i);r[y]=b,Ha(r,s,y),c=r.length,l==="Z"&&v.push(y),h=r[y],p=h.length,i.x1=+h[p-2],i.y1=+h[p-1],i.x2=+h[p-4]||i.x1,i.y2=+h[p-3]||i.y1}return t?[r,v]:r}function Sl(e,t){t===void 0&&(t=.5);var n=e.slice(0,2),r=e.slice(2,4),i=e.slice(4,6),s=e.slice(6,8),l=it(n,r,t),c=it(r,i,t),h=it(i,s,t),p=it(l,c,t),v=it(c,h,t),y=it(p,v,t);return[["C"].concat(l,p,y),["C"].concat(v,h,s)]}function Xl(e){return e.map(function(t,n,r){var i=n&&r[n-1].slice(-2).concat(t.slice(1)),s=n?Ln(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,l;return n?l=s?Sl(i):[t,t]:l=[t],{s:t,ss:l,l:s}})}function wl(e,t,n){var r=Xl(e),i=Xl(t),s=r.length,l=i.length,c=r.filter(function(L){return L.l}).length,h=i.filter(function(L){return L.l}).length,p=r.filter(function(L){return L.l}).reduce(function(L,N){var z=N.l;return L+z},0)/c||0,v=i.filter(function(L){return L.l}).reduce(function(L,N){var z=N.l;return L+z},0)/h||0,y=n||Math.max(s,l),b=[p,v],T=[y-s,y-l],M=0,R=[r,i].map(function(L,N){return L.l===y?L.map(function(z){return z.s}):L.map(function(z,H){return M=H&&T[N]&&z.l>=b[N],T[N]-=M?1:0,M?z.ss:[z.s]}).flat()});return R[0].length===R[1].length?R:wl(R[0],R[1],y)}function Tl(e,t,n,r,i,s,l,c){return 3*((c-t)*(n+i)-(l-e)*(r+s)+r*(e-i)-n*(t-s)+c*(i+e/3)-l*(s+t/3))/20}function eu(e){var t=0,n=0,r=0;return vs(e).map(function(i){var s;switch(i[0]){case"M":return t=i[1],n=i[2],0;default:var l=i.slice(1),c=l[0],h=l[1],p=l[2],v=l[3],y=l[4],b=l[5];return r=Tl(t,n,c,h,p,v,y,b),s=i.slice(-2),t=s[0],n=s[1],r}}).reduce(function(i,s){return i+s},0)}function Pu(e){return eu(e)>=0}function qu(e){var t=e.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):e[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(n){return["C"].concat(n.slice(2))}))}function Kc(e){return e.map(function(t){return Array.isArray(t)?[].concat(t):t})}function ac(e){var t=e.length,n=t-1;return e.map(function(r,i){return e.map(function(s,l){var c=i+l,h;return l===0||e[c]&&e[c][0]==="M"?(h=e[c],["M"].concat(h.slice(-2))):(c>=t&&(c-=n),e[c])})})}function Qc(e,t){var n=e.length-1,r=[],i=0,s=0,l=ac(e);return l.forEach(function(c,h){e.slice(1).forEach(function(p,v){s+=js(e[(h+v)%n].slice(-2),t[v%n].slice(-2))}),r[h]=s,s=0}),i=r.indexOf(Math.min.apply(null,r)),l[i]}var hu=function(e){return(0,Wd.Z)(e,"Boolean")},Iu=hu,za=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"},Ks=function(e){return e===void 0},pa=Ks;function hs(e,t,n){return Pr(e,t,(0,ie.pi)((0,ie.pi)({},n),{bbox:!1,length:!0})).point}var yf=D(37620);function Zs(e,t,n,r){var i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}function Qs(e,t){var n=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(e),!1)),r=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(t),!1)),i=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(e),!1)),s=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(t),!1));return{x:n,y:r,width:i-n,height:s-r}}function du(e){return(e+Math.PI*2)%(Math.PI*2)}function Ec(e,t){var n=Math.abs(e);return t>0?n:n*-1}function ws(e,t,n,r,i,s){var l=n,c=r;if(l===0||c===0)return{x:e,y:t};for(var h=i-e,p=s-t,v=Math.abs(h),y=Math.abs(p),b=l*l,T=c*c,M=Math.PI/4,R=0,L=0,N=0;N<4;N++){R=l*Math.cos(M),L=c*Math.sin(M);var z=(b-T)*Math.pow(Math.cos(M),3)/l,H=(T-b)*Math.pow(Math.sin(M),3)/c,X=R-z,Y=L-H,ne=v-z,ve=y-H,Ee=Math.hypot(Y,X),Ie=Math.hypot(ve,ne),Ye=Ee*Math.asin((X*ve-Y*ne)/(Ee*Ie)),$e=Ye/Math.sqrt(b+T-R*R-L*L);M+=$e,M=Math.min(Math.PI/2,Math.max(0,M))}return{x:e+Ec(R,h),y:t+Ec(L,p)}}function Gd(e,t,n,r,i,s,l,c){return-1*n*Math.cos(i)*Math.sin(c)-r*Math.sin(i)*Math.cos(c)}function lh(e,t,n,r,i,s,l,c){return-1*n*Math.sin(i)*Math.sin(c)+r*Math.cos(i)*Math.cos(c)}function dp(e,t,n){return Math.atan(-t/e*Math.tan(n))}function pu(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function pp(e,t,n,r,i,s){return n*Math.cos(i)*Math.cos(s)-r*Math.sin(i)*Math.sin(s)+e}function ad(e,t,n,r,i,s){return n*Math.sin(i)*Math.cos(s)+r*Math.cos(i)*Math.sin(s)+t}function Pv(e,t,n,r){var i=Math.atan2(r*e,n*t);return(i+Math.PI*2)%(Math.PI*2)}function v0(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function Q0(e,t,n){var r=Math.cos(n),i=Math.sin(n);return[e*r-t*i,e*i+t*r]}function vp(e,t,n,r,i,s,l){for(var c=dp(n,r,i),h=1/0,p=-1/0,v=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var b=c+y;s<l?s<b&&b<l&&v.push(b):l<b&&b<s&&v.push(b)}for(var y=0;y<v.length;y++){var T=pp(e,t,n,r,i,v[y]);T<h&&(h=T),T>p&&(p=T)}for(var M=pu(n,r,i),R=1/0,L=-1/0,N=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var z=M+y;s<l?s<z&&z<l&&N.push(z):l<z&&z<s&&N.push(z)}for(var y=0;y<N.length;y++){var H=ad(e,t,n,r,i,N[y]);H<R&&(R=H),H>L&&(L=H)}return{x:h,y:R,width:p-h,height:L-R}}function Iv(e,t,n,r,i,s,l,c,h){var p=Q0(c-e,h-t,-i),v=__read(p,2),y=v[0],b=v[1],T=ws(0,0,n,r,y,b),M=Pv(n,r,T.x,T.y);M<s?T=v0(n,r,s):M>l&&(T=v0(n,r,l));var R=Q0(T.x,T.y,i);return{x:R[0]+e,y:R[1]+t}}function Lg(e,t,n,r,i,s,l,c){var h=(l-s)*c+s,p=Gd(e,t,n,r,i,s,l,h),v=lh(e,t,n,r,i,s,l,h);return du(Math.atan2(v,p))}var Zd=1e-4;function J0(e,t,n,r,i,s){var l=-1,c=1/0,h=[n,r],p=20;s&&s>200&&(p=s/10);for(var v=1/p,y=v/10,b=0;b<=p;b++){var T=b*v,M=[i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(e.concat([T])),!1)),i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.concat([T])),!1))],R=Zs(h[0],h[1],M[0],M[1]);R<c&&(l=T,c=R)}if(l===0)return{x:e[0],y:t[0]};if(l===1){var L=e.length;return{x:e[L-1],y:t[L-1]}}c=1/0;for(var b=0;b<32&&!(y<Zd);b++){var N=l-y,z=l+y,M=[i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(e.concat([N])),!1)),i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.concat([N])),!1))],R=Zs(h[0],h[1],M[0],M[1]);if(N>=0&&R<c)l=N,c=R;else{var H=[i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(e.concat([z])),!1)),i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.concat([z])),!1))],X=Zs(h[0],h[1],H[0],H[1]);z<=1&&X<c?(l=z,c=X):y*=.5}}return{x:i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(e.concat([l])),!1)),y:i.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.concat([l])),!1))}}function Dg(e,t){for(var n=0,r=e.length,i=0;i<r;i++){var s=e[i],l=t[i],c=e[(i+1)%r],h=t[(i+1)%r];n+=Zs(s,l,c,h)}return n/2}function Vy(e,t,n,r){return Qs([e,n],[t,r])}function mp(e,t,n,r){return Zs(e,t,n,r)}function uh(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}}function gp(e,t,n,r,i,s){var l=(n-e)*(i-e)+(r-t)*(s-t);if(l<0)return Zs(e,t,i,s);var c=(n-e)*(n-e)+(r-t)*(r-t);return l>c?Zs(n,r,i,s):Nh(e,t,n,r,i,s)}function Nh(e,t,n,r,i,s){var l=[n-e,r-t];if(hp.I6(l,[0,0]))return Math.sqrt((i-e)*(i-e)+(s-t)*(s-t));var c=[-l[1],l[0]];hp.Fv(c,c);var h=[i-e,s-t];return Math.abs(hp.AK(h,c))}function Vp(e,t,n,r){return Math.atan2(r-t,n-e)}function ch(e,t,n,r,i){var s=1-i;return s*s*s*e+3*t*i*s*s+3*n*i*i*s+r*i*i*i}function Nm(e,t,n,r,i){var s=1-i;return 3*(s*s*(t-e)+2*s*i*(n-t)+i*i*(r-n))}function ev(e,t,n,r){var i=-3*e+9*t-9*n+3*r,s=6*e-12*t+6*n,l=3*t-3*e,c=[],h,p,v;if(oo(i,0))oo(s,0)||(h=-l/s,h>=0&&h<=1&&c.push(h));else{var y=s*s-4*i*l;oo(y,0)?c.push(-s/(2*i)):y>0&&(v=Math.sqrt(y),h=(-s+v)/(2*i),p=(-s-v)/(2*i),h>=0&&h<=1&&c.push(h),p>=0&&p<=1&&c.push(p))}return c}function tv(e,t,n,r,i,s,l,c,h){var p=ch(e,n,i,l,h),v=ch(t,r,s,c,h),y=uh(e,t,n,r,h),b=uh(n,r,i,s,h),T=uh(i,s,l,c,h),M=uh(y.x,y.y,b.x,b.y,h),R=uh(b.x,b.y,T.x,T.y,h);return[[e,t,y.x,y.y,M.x,M.y,p,v],[p,v,R.x,R.y,T.x,T.y,l,c]]}function Lv(e,t,n,r,i,s,l,c,h){if(h===0)return Dg([e,n,i,l],[t,r,s,c]);var p=tv(e,t,n,r,i,s,l,c,.5),v=__spreadArray(__spreadArray([],__read(p[0]),!1),[h-1],!1),y=__spreadArray(__spreadArray([],__read(p[1]),!1),[h-1],!1);return Lv.apply(void 0,__spreadArray([],__read(v),!1))+Lv.apply(void 0,__spreadArray([],__read(y),!1))}function Fm(e,t,n,r,i,s,l,c){for(var h=[e,l],p=[t,c],v=ev(e,n,i,l),y=ev(t,r,s,c),b=0;b<v.length;b++)h.push(ch(e,n,i,l,v[b]));for(var b=0;b<y.length;b++)p.push(ch(t,r,s,c,y[b]));return Qs(h,p)}function Bm(e,t,n,r,i,s,l,c){return Lv(e,t,n,r,i,s,l,c,3)}function km(e,t,n,r,i,s,l,c,h,p,v){return J0([e,n,i,l],[t,r,s,c],h,p,ch,v)}function Ng(e,t,n,r,i,s,l,c,h,p,v){var y=km(e,t,n,r,i,s,l,c,h,p,v);return Zs(y.x,y.y,h,p)}function m0(e,t,n,r,i,s,l,c,h){return{x:ch(e,n,i,l,h),y:ch(t,r,s,c,h)}}function nv(e,t,n,r,i,s,l,c,h){var p=Nm(e,n,i,l,h),v=Nm(t,r,s,c,h);return du(Math.atan2(v,p))}function g0(e){for(var t=0,n=[],r=0;r<e.length-1;r++){var i=e[r],s=e[r+1],l=Zs(i[0],i[1],s[0],s[1]),c={from:i,to:s,length:l};n.push(c),t+=l}return{segments:n,totalLength:t}}function Dv(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=Zs(r[0],r[1],i[0],i[1])}return t}function y0(e,t){if(t>1||t<0||e.length<2)return null;var n=g0(e),r=n.segments,i=n.totalLength;if(i===0)return{x:e[0][0],y:e[0][1]};for(var s=0,l=null,c=0;c<r.length;c++){var h=r[c],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){var b=(t-s)/y;l=uh(p[0],p[1],v[0],v[1],b);break}s+=y}return l}function rv(e,t){if(t>1||t<0||e.length<2)return 0;for(var n=g0(e),r=n.segments,i=n.totalLength,s=0,l=0,c=0;c<r.length;c++){var h=r[c],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){l=Math.atan2(v[1]-p[1],v[0]-p[0]);break}s+=y}return l}function Nv(e,t,n){for(var r=1/0,i=0;i<e.length-1;i++){var s=e[i],l=e[i+1],c=gp(s[0],s[1],l[0],l[1],t,n);c<r&&(r=c)}return r}function Hy(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];t.push(i[0]),n.push(i[1])}return Qs(t,n)}function zm(e){return Dv(e)}function Wy(e,t){return y0(e,t)}function ax(e,t,n){return Nv(e,t,n)}function p1(e,t){return rv(e,t)}function Um(e){var t=e.slice(0);return e.length&&t.push(e[0]),t}function Gy(e){return Hy(e)}function vu(e){return Dv(Um(e))}function sd(e,t){return y0(Um(e),t)}function HE(e,t,n){return Nv(Um(e),t,n)}function iv(e,t){return rv(Um(e),t)}function ov(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function Zy(e,t,n){var r=e+n-2*t;if(oo(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function Fg(e,t,n,r,i,s,l){var c=ov(e,n,i,l),h=ov(t,r,s,l),p=uh(e,t,n,r,l),v=uh(n,r,i,s,l);return[[e,t,p.x,p.y,c,h],[c,h,v.x,v.y,i,s]]}function ld(e,t,n,r,i,s,l){if(l===0)return(Zs(e,t,n,r)+Zs(n,r,i,s)+Zs(e,t,i,s))/2;var c=Fg(e,t,n,r,i,s,.5),h=c[0],p=c[1];return h.push(l-1),p.push(l-1),ld.apply(void 0,__spreadArray([],__read(h),!1))+ld.apply(void 0,__spreadArray([],__read(p),!1))}function Bg(e,t,n,r,i,s){var l=Zy(e,n,i)[0],c=Zy(t,r,s)[0],h=[e,i],p=[t,s];return l!==void 0&&h.push(ov(e,n,i,l)),c!==void 0&&p.push(ov(t,r,s,c)),Qs(h,p)}function kg(e,t,n,r,i,s){return ld(e,t,n,r,i,s,3)}function zg(e,t,n,r,i,s,l,c){return J0([e,n,i],[t,r,s],l,c,ov)}function Ug(e,t,n,r,i,s,l,c){var h=zg(e,t,n,r,i,s,l,c);return Zs(h.x,h.y,l,c)}var jg=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof D.g!="undefined"?D.g:typeof self!="undefined"?self:{},Xy={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(jg,function(){function n(Y,ne,ve,Ee,Ie){r(Y,ne,ve||0,Ee||Y.length-1,Ie||s)}function r(Y,ne,ve,Ee,Ie){for(;Ee>ve;){if(Ee-ve>600){var Ye=Ee-ve+1,$e=ne-ve+1,St=Math.log(Ye),Qe=.5*Math.exp(2*St/3),lt=.5*Math.sqrt(St*Qe*(Ye-Qe)/Ye)*($e-Ye/2<0?-1:1),ht=Math.max(ve,Math.floor(ne-$e*Qe/Ye+lt)),bt=Math.min(Ee,Math.floor(ne+(Ye-$e)*Qe/Ye+lt));r(Y,ne,ht,bt,Ie)}var Ht=Y[ne],Ot=ve,kt=Ee;for(i(Y,ve,ne),Ie(Y[Ee],Ht)>0&&i(Y,ve,Ee);Ot<kt;){for(i(Y,Ot,kt),Ot++,kt--;Ie(Y[Ot],Ht)<0;)Ot++;for(;Ie(Y[kt],Ht)>0;)kt--}Ie(Y[ve],Ht)===0?i(Y,ve,kt):(kt++,i(Y,kt,Ee)),kt<=ne&&(ve=kt+1),ne<=kt&&(Ee=kt-1)}}function i(Y,ne,ve){var Ee=Y[ne];Y[ne]=Y[ve],Y[ve]=Ee}function s(Y,ne){return Y<ne?-1:Y>ne?1:0}var l=function(ne){ne===void 0&&(ne=9),this._maxEntries=Math.max(4,ne),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};l.prototype.all=function(){return this._all(this.data,[])},l.prototype.search=function(ne){var ve=this.data,Ee=[];if(!z(ne,ve))return Ee;for(var Ie=this.toBBox,Ye=[];ve;){for(var $e=0;$e<ve.children.length;$e++){var St=ve.children[$e],Qe=ve.leaf?Ie(St):St;z(ne,Qe)&&(ve.leaf?Ee.push(St):N(ne,Qe)?this._all(St,Ee):Ye.push(St))}ve=Ye.pop()}return Ee},l.prototype.collides=function(ne){var ve=this.data;if(!z(ne,ve))return!1;for(var Ee=[];ve;){for(var Ie=0;Ie<ve.children.length;Ie++){var Ye=ve.children[Ie],$e=ve.leaf?this.toBBox(Ye):Ye;if(z(ne,$e)){if(ve.leaf||N(ne,$e))return!0;Ee.push(Ye)}}ve=Ee.pop()}return!1},l.prototype.load=function(ne){if(!(ne&&ne.length))return this;if(ne.length<this._minEntries){for(var ve=0;ve<ne.length;ve++)this.insert(ne[ve]);return this}var Ee=this._build(ne.slice(),0,ne.length-1,0);if(!this.data.children.length)this.data=Ee;else if(this.data.height===Ee.height)this._splitRoot(this.data,Ee);else{if(this.data.height<Ee.height){var Ie=this.data;this.data=Ee,Ee=Ie}this._insert(Ee,this.data.height-Ee.height-1,!0)}return this},l.prototype.insert=function(ne){return ne&&this._insert(ne,this.data.height-1),this},l.prototype.clear=function(){return this.data=H([]),this},l.prototype.remove=function(ne,ve){if(!ne)return this;for(var Ee=this.data,Ie=this.toBBox(ne),Ye=[],$e=[],St,Qe,lt;Ee||Ye.length;){if(Ee||(Ee=Ye.pop(),Qe=Ye[Ye.length-1],St=$e.pop(),lt=!0),Ee.leaf){var ht=c(ne,Ee.children,ve);if(ht!==-1)return Ee.children.splice(ht,1),Ye.push(Ee),this._condense(Ye),this}!lt&&!Ee.leaf&&N(Ee,Ie)?(Ye.push(Ee),$e.push(St),St=0,Qe=Ee,Ee=Ee.children[0]):Qe?(St++,Ee=Qe.children[St],lt=!1):Ee=null}return this},l.prototype.toBBox=function(ne){return ne},l.prototype.compareMinX=function(ne,ve){return ne.minX-ve.minX},l.prototype.compareMinY=function(ne,ve){return ne.minY-ve.minY},l.prototype.toJSON=function(){return this.data},l.prototype.fromJSON=function(ne){return this.data=ne,this},l.prototype._all=function(ne,ve){for(var Ee=[];ne;)ne.leaf?ve.push.apply(ve,ne.children):Ee.push.apply(Ee,ne.children),ne=Ee.pop();return ve},l.prototype._build=function(ne,ve,Ee,Ie){var Ye=Ee-ve+1,$e=this._maxEntries,St;if(Ye<=$e)return St=H(ne.slice(ve,Ee+1)),h(St,this.toBBox),St;Ie||(Ie=Math.ceil(Math.log(Ye)/Math.log($e)),$e=Math.ceil(Ye/Math.pow($e,Ie-1))),St=H([]),St.leaf=!1,St.height=Ie;var Qe=Math.ceil(Ye/$e),lt=Qe*Math.ceil(Math.sqrt($e));X(ne,ve,Ee,lt,this.compareMinX);for(var ht=ve;ht<=Ee;ht+=lt){var bt=Math.min(ht+lt-1,Ee);X(ne,ht,bt,Qe,this.compareMinY);for(var Ht=ht;Ht<=bt;Ht+=Qe){var Ot=Math.min(Ht+Qe-1,bt);St.children.push(this._build(ne,Ht,Ot,Ie-1))}}return h(St,this.toBBox),St},l.prototype._chooseSubtree=function(ne,ve,Ee,Ie){for(;Ie.push(ve),!(ve.leaf||Ie.length-1===Ee);){for(var Ye=1/0,$e=1/0,St=void 0,Qe=0;Qe<ve.children.length;Qe++){var lt=ve.children[Qe],ht=T(lt),bt=R(ne,lt)-ht;bt<$e?($e=bt,Ye=ht<Ye?ht:Ye,St=lt):bt===$e&&ht<Ye&&(Ye=ht,St=lt)}ve=St||ve.children[0]}return ve},l.prototype._insert=function(ne,ve,Ee){var Ie=Ee?ne:this.toBBox(ne),Ye=[],$e=this._chooseSubtree(Ie,this.data,ve,Ye);for($e.children.push(ne),v($e,Ie);ve>=0&&Ye[ve].children.length>this._maxEntries;)this._split(Ye,ve),ve--;this._adjustParentBBoxes(Ie,Ye,ve)},l.prototype._split=function(ne,ve){var Ee=ne[ve],Ie=Ee.children.length,Ye=this._minEntries;this._chooseSplitAxis(Ee,Ye,Ie);var $e=this._chooseSplitIndex(Ee,Ye,Ie),St=H(Ee.children.splice($e,Ee.children.length-$e));St.height=Ee.height,St.leaf=Ee.leaf,h(Ee,this.toBBox),h(St,this.toBBox),ve?ne[ve-1].children.push(St):this._splitRoot(Ee,St)},l.prototype._splitRoot=function(ne,ve){this.data=H([ne,ve]),this.data.height=ne.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},l.prototype._chooseSplitIndex=function(ne,ve,Ee){for(var Ie,Ye=1/0,$e=1/0,St=ve;St<=Ee-ve;St++){var Qe=p(ne,0,St,this.toBBox),lt=p(ne,St,Ee,this.toBBox),ht=L(Qe,lt),bt=T(Qe)+T(lt);ht<Ye?(Ye=ht,Ie=St,$e=bt<$e?bt:$e):ht===Ye&&bt<$e&&($e=bt,Ie=St)}return Ie||Ee-ve},l.prototype._chooseSplitAxis=function(ne,ve,Ee){var Ie=ne.leaf?this.compareMinX:y,Ye=ne.leaf?this.compareMinY:b,$e=this._allDistMargin(ne,ve,Ee,Ie),St=this._allDistMargin(ne,ve,Ee,Ye);$e<St&&ne.children.sort(Ie)},l.prototype._allDistMargin=function(ne,ve,Ee,Ie){ne.children.sort(Ie);for(var Ye=this.toBBox,$e=p(ne,0,ve,Ye),St=p(ne,Ee-ve,Ee,Ye),Qe=M($e)+M(St),lt=ve;lt<Ee-ve;lt++){var ht=ne.children[lt];v($e,ne.leaf?Ye(ht):ht),Qe+=M($e)}for(var bt=Ee-ve-1;bt>=ve;bt--){var Ht=ne.children[bt];v(St,ne.leaf?Ye(Ht):Ht),Qe+=M(St)}return Qe},l.prototype._adjustParentBBoxes=function(ne,ve,Ee){for(var Ie=Ee;Ie>=0;Ie--)v(ve[Ie],ne)},l.prototype._condense=function(ne){for(var ve=ne.length-1,Ee=void 0;ve>=0;ve--)ne[ve].children.length===0?ve>0?(Ee=ne[ve-1].children,Ee.splice(Ee.indexOf(ne[ve]),1)):this.clear():h(ne[ve],this.toBBox)};function c(Y,ne,ve){if(!ve)return ne.indexOf(Y);for(var Ee=0;Ee<ne.length;Ee++)if(ve(Y,ne[Ee]))return Ee;return-1}function h(Y,ne){p(Y,0,Y.children.length,ne,Y)}function p(Y,ne,ve,Ee,Ie){Ie||(Ie=H(null)),Ie.minX=1/0,Ie.minY=1/0,Ie.maxX=-1/0,Ie.maxY=-1/0;for(var Ye=ne;Ye<ve;Ye++){var $e=Y.children[Ye];v(Ie,Y.leaf?Ee($e):$e)}return Ie}function v(Y,ne){return Y.minX=Math.min(Y.minX,ne.minX),Y.minY=Math.min(Y.minY,ne.minY),Y.maxX=Math.max(Y.maxX,ne.maxX),Y.maxY=Math.max(Y.maxY,ne.maxY),Y}function y(Y,ne){return Y.minX-ne.minX}function b(Y,ne){return Y.minY-ne.minY}function T(Y){return(Y.maxX-Y.minX)*(Y.maxY-Y.minY)}function M(Y){return Y.maxX-Y.minX+(Y.maxY-Y.minY)}function R(Y,ne){return(Math.max(ne.maxX,Y.maxX)-Math.min(ne.minX,Y.minX))*(Math.max(ne.maxY,Y.maxY)-Math.min(ne.minY,Y.minY))}function L(Y,ne){var ve=Math.max(Y.minX,ne.minX),Ee=Math.max(Y.minY,ne.minY),Ie=Math.min(Y.maxX,ne.maxX),Ye=Math.min(Y.maxY,ne.maxY);return Math.max(0,Ie-ve)*Math.max(0,Ye-Ee)}function N(Y,ne){return Y.minX<=ne.minX&&Y.minY<=ne.minY&&ne.maxX<=Y.maxX&&ne.maxY<=Y.maxY}function z(Y,ne){return ne.minX<=Y.maxX&&ne.minY<=Y.maxY&&ne.maxX>=Y.minX&&ne.maxY>=Y.minY}function H(Y){return{children:Y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function X(Y,ne,ve,Ee,Ie){for(var Ye=[ne,ve];Ye.length;)if(ve=Ye.pop(),ne=Ye.pop(),!(ve-ne<=Ee)){var $e=ne+Math.ceil((ve-ne)/Ee/2)*Ee;n(Y,$e,ne,ve,Ie),Ye.push(ne,$e,$e,ve)}}return l})})(Xy);var jm=Xy.exports,Gr;(function(e){e.GROUP="g",e.CIRCLE="circle",e.ELLIPSE="ellipse",e.IMAGE="image",e.RECT="rect",e.LINE="line",e.POLYLINE="polyline",e.POLYGON="polygon",e.TEXT="text",e.PATH="path",e.HTML="html",e.MESH="mesh"})(Gr||(Gr={}));var av;(function(e){e[e.ZERO=0]="ZERO",e[e.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(av||(av={}));var Hp=function(){function e(){this.plugins=[]}return e.prototype.addRenderingPlugin=function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)},e.prototype.removeAllRenderingPlugins=function(){var t=this;this.plugins.forEach(function(n){var r=t.context.renderingPlugins.indexOf(n);r>=0&&t.context.renderingPlugins.splice(r,1)})},e}(),Yy=function(){function e(t){this.clipSpaceNearZ=av.NEGATIVE_ONE,this.plugins=[],this.config=(0,ie.pi)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},t)}return e.prototype.registerPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n===-1&&this.plugins.push(t)},e.prototype.unregisterPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n>-1&&this.plugins.splice(n,1)},e.prototype.getPlugins=function(){return this.plugins},e.prototype.getPlugin=function(t){return this.plugins.find(function(n){return n.name===t})},e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(t){Object.assign(this.config,t)},e}();function _0(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ff(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function oa(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function $y(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function yp(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Fv(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function sv(e){return e===void 0?0:e>360||e<-360?e%360:e}function sc(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),Array.isArray(e)&&e.length===3?Hn.d9(e):(0,$u.Z)(e)?Hn.al(e,t,n):Hn.al(e[0],e[1]||t,e[2]||n)}function Al(e){return e*(Math.PI/180)}function _f(e){return e*(180/Math.PI)}function Vm(e){return e=e%400,e<0&&(e+=400),e/400*360}function Hm(e){return e/360}function v1(e){return 360*e}function m1(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n,c=r*r,h=i*i,p=s*s,v=l+c+h+p,y=n*s-r*i;return y>.499995*v?(e[0]=Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):y<-.499995*v?(e[0]=-Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):(e[0]=Math.asin(2*(n*i-s*r)),e[1]=Math.atan2(2*(n*s+r*i),1-2*(h+p)),e[2]=Math.atan2(2*(n*r+i*s),1-2*(c+h))),e}function qy(e,t){var n,r,i=Math.PI*.5,s=(0,ie.CR)(jr.getScaling(Hn.Ue(),t),3),l=s[0],c=s[1],h=s[2],p=Math.asin(-t[2]/l);return p<i?p>-i?(n=Math.atan2(t[6]/c,t[10]/h),r=Math.atan2(t[1]/l,t[0]/l)):(r=0,n=-Math.atan2(t[4]/c,t[5]/c)):(r=0,n=Math.atan2(t[4]/c,t[5]/c)),e[0]=n,e[1]=p,e[2]=r,e}function Vg(e,t){return t.length===16?qy(e,t):m1(e,t)}function Ky(e,t,n,r,i){var s=Math.cos(e),l=Math.sin(e);return il(r*s,i*l,0,-r*l,i*s,0,t,n,1)}function Qy(e,t,n,r,i,s,l,c){c===void 0&&(c=!1);var h=2*s/(n-t),p=2*s/(r-i),v=(n+t)/(n-t),y=(r+i)/(r-i),b,T;return c?(b=-l/(l-s),T=-l*s/(l-s)):(b=-(l+s)/(l-s),T=-2*l*s/(l-s)),e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=v,e[9]=y,e[10]=b,e[11]=-1,e[12]=0,e[13]=0,e[14]=T,e[15]=0,e}function _p(e){var t=e[0],n=e[1],r=e[3],i=e[4],s=Math.sqrt(t*t+n*n),l=Math.sqrt(r*r+i*i),c=t*i-n*r;c<0&&(t<i?s=-s:l=-l),s&&(t*=1/s,n*=1/s),l&&(r*=1/l,i*=1/l);var h=Math.atan2(n,t),p=_f(h);return[e[6],e[7],s,l,p]}var Fh=jr.create(),fh=jr.create(),b0=Vn.Ue(),na=[Hn.Ue(),Hn.Ue(),Hn.Ue()],Hg=Hn.Ue();function g1(e,t,n,r,i,s){if(!Jy(Fh,e)||(jr.copy(fh,Fh),fh[3]=0,fh[7]=0,fh[11]=0,fh[15]=1,Math.abs(jr.determinant(fh))<1e-8))return!1;var l=Fh[3],c=Fh[7],h=Fh[11],p=Fh[12],v=Fh[13],y=Fh[14],b=Fh[15];if(l!==0||c!==0||h!==0){b0[0]=l,b0[1]=c,b0[2]=h,b0[3]=b;var T=jr.invert(fh,fh);if(!T)return!1;jr.transpose(fh,fh),Vn.fF(i,b0,fh)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=p,t[1]=v,t[2]=y,x0(na,Fh),n[0]=Hn.kE(na[0]),Hn.Fv(na[0],na[0]),r[0]=Hn.AK(na[0],na[1]),Wg(na[1],na[1],na[0],1,-r[0]),n[1]=Hn.kE(na[1]),Hn.Fv(na[1],na[1]),r[0]/=n[1],r[1]=Hn.AK(na[0],na[2]),Wg(na[2],na[2],na[0],1,-r[1]),r[2]=Hn.AK(na[1],na[2]),Wg(na[2],na[2],na[1],1,-r[2]),n[2]=Hn.kE(na[2]),Hn.Fv(na[2],na[2]),r[1]/=n[2],r[2]/=n[2],Hn.kC(Hg,na[1],na[2]),Hn.AK(na[0],Hg)<0)for(var M=0;M<3;M++)n[M]*=-1,na[M][0]*=-1,na[M][1]*=-1,na[M][2]*=-1;return s[0]=.5*Math.sqrt(Math.max(1+na[0][0]-na[1][1]-na[2][2],0)),s[1]=.5*Math.sqrt(Math.max(1-na[0][0]+na[1][1]-na[2][2],0)),s[2]=.5*Math.sqrt(Math.max(1-na[0][0]-na[1][1]+na[2][2],0)),s[3]=.5*Math.sqrt(Math.max(1+na[0][0]+na[1][1]+na[2][2],0)),na[2][1]>na[1][2]&&(s[0]=-s[0]),na[0][2]>na[2][0]&&(s[1]=-s[1]),na[1][0]>na[0][1]&&(s[2]=-s[2]),!0}function Jy(e,t){var n=t[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}function x0(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function Wg(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var tu=function(){function e(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return e.isEmpty=function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0},e.prototype.update=function(t,n){_0(this.center,t),_0(this.halfExtents,n),Ff(this.min,this.center,this.halfExtents),oa(this.max,this.center,this.halfExtents)},e.prototype.setMinMax=function(t,n){oa(this.center,n,t),$y(this.center,this.center,.5),Ff(this.halfExtents,n,t),$y(this.halfExtents,this.halfExtents,.5),_0(this.min,t),_0(this.max,n)},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.add=function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,r=n[0],i=n[1],s=n[2],l=this.halfExtents,c=l[0],h=l[1],p=l[2],v=r-c,y=r+c,b=i-h,T=i+h,M=s-p,R=s+p,L=t.center,N=L[0],z=L[1],H=L[2],X=t.halfExtents,Y=X[0],ne=X[1],ve=X[2],Ee=N-Y,Ie=N+Y,Ye=z-ne,$e=z+ne,St=H-ve,Qe=H+ve;Ee<v&&(v=Ee),Ie>y&&(y=Ie),Ye<b&&(b=Ye),$e>T&&(T=$e),St<M&&(M=St),Qe>R&&(R=Qe),n[0]=(v+y)*.5,n[1]=(b+T)*.5,n[2]=(M+R)*.5,l[0]=(y-v)*.5,l[1]=(T-b)*.5,l[2]=(R-M)*.5,this.min[0]=v,this.min[1]=b,this.min[2]=M,this.max[0]=y,this.max[1]=T,this.max[2]=R}},e.prototype.setFromTransformedAABB=function(t,n){var r=this.center,i=this.halfExtents,s=t.center,l=t.halfExtents,c=n[0],h=n[4],p=n[8],v=n[1],y=n[5],b=n[9],T=n[2],M=n[6],R=n[10],L=Math.abs(c),N=Math.abs(h),z=Math.abs(p),H=Math.abs(v),X=Math.abs(y),Y=Math.abs(b),ne=Math.abs(T),ve=Math.abs(M),Ee=Math.abs(R);r[0]=n[12]+c*s[0]+h*s[1]+p*s[2],r[1]=n[13]+v*s[0]+y*s[1]+b*s[2],r[2]=n[14]+T*s[0]+M*s[1]+R*s[2],i[0]=L*l[0]+N*l[1]+z*l[2],i[1]=H*l[0]+X*l[1]+Y*l[2],i[2]=ne*l[0]+ve*l[1]+Ee*l[2],Ff(this.min,r,i),oa(this.max,r,i)},e.prototype.intersects=function(t){var n=this.getMax(),r=this.getMin(),i=t.getMax(),s=t.getMin();return r[0]<=i[0]&&n[0]>=s[0]&&r[1]<=i[1]&&n[1]>=s[1]&&r[2]<=i[2]&&n[2]>=s[2]},e.prototype.intersection=function(t){if(!this.intersects(t))return null;var n=new e,r=yp([0,0,0],this.getMin(),t.getMin()),i=Fv([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n},e.prototype.getNegativeFarPoint=function(t){return t.pnVertexFlag===273?_0([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},e.prototype.getPositiveFarPoint=function(t){return t.pnVertexFlag===273?_0([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},e}(),y1=function(){function e(t,n){this.distance=t||0,this.normal=n||Hn.al(0,1,0),this.updatePNVertexFlag()}return e.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},e.prototype.distanceToPoint=function(t){return Hn.AK(t,this.normal)-this.distance},e.prototype.normalize=function(){var t=1/Hn.Zh(this.normal);Hn.bA(this.normal,this.normal,t),this.distance*=t},e.prototype.intersectsLine=function(t,n,r){var i=this.distanceToPoint(t),s=this.distanceToPoint(n),l=i/(i-s),c=l>=0&&l<=1;return c&&r&&Hn.t7(r,t,n,l),c},e}(),hh;(function(e){e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE"})(hh||(hh={}));var WE=function(){function e(t){if(this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new y1)}return e.prototype.extractFromVPMatrix=function(t){var n=(0,ie.CR)(t,16),r=n[0],i=n[1],s=n[2],l=n[3],c=n[4],h=n[5],p=n[6],v=n[7],y=n[8],b=n[9],T=n[10],M=n[11],R=n[12],L=n[13],N=n[14],z=n[15];Hn.t8(this.planes[0].normal,l-r,v-c,M-y),this.planes[0].distance=z-R,Hn.t8(this.planes[1].normal,l+r,v+c,M+y),this.planes[1].distance=z+R,Hn.t8(this.planes[2].normal,l+i,v+h,M+b),this.planes[2].distance=z+L,Hn.t8(this.planes[3].normal,l-i,v-h,M-b),this.planes[3].distance=z-L,Hn.t8(this.planes[4].normal,l-s,v-p,M-T),this.planes[4].distance=z-N,Hn.t8(this.planes[5].normal,l+s,v+p,M+T),this.planes[5].distance=z+N,this.planes.forEach(function(H){H.normalize(),H.updatePNVertexFlag()})},e}(),Sc=function(){function e(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},e}(),Wp=function(){function e(t,n,r,i){this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i}return e.prototype.toJSON=function(){},e}(),Ta="Method not implemented.",Bv="Use document.documentElement instead.",E0="Cannot append a destroyed element.",ol;(function(e){e[e.ORBITING=0]="ORBITING",e[e.EXPLORING=1]="EXPLORING",e[e.TRACKING=2]="TRACKING"})(ol||(ol={}));var Gg;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROTATIONAL=1]="ROTATIONAL",e[e.TRANSLATIONAL=2]="TRANSLATIONAL",e[e.CINEMATIC=3]="CINEMATIC"})(Gg||(Gg={}));var Bh;(function(e){e[e.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",e[e.PERSPECTIVE=1]="PERSPECTIVE"})(Bh||(Bh={}));var e_={UPDATED:"updated"},ud=2e-4,Zg=function(){function e(){this.clipSpaceNearZ=av.NEGATIVE_ONE,this.eventEmitter=new Ma,this.matrix=jr.create(),this.right=Hn.al(1,0,0),this.up=Hn.al(0,1,0),this.forward=Hn.al(0,0,1),this.position=Hn.al(0,0,1),this.focalPoint=Hn.al(0,0,0),this.distanceVector=Hn.al(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=jr.create(),this.projectionMatrixInverse=jr.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=ol.EXPLORING,this.trackingMode=Gg.DEFAULT,this.projectionMode=Bh.PERSPECTIVE,this.frustum=new WE,this.orthoMatrix=jr.create()}return e.prototype.isOrtho=function(){return this.projectionMode===Bh.ORTHOGRAPHIC},e.prototype.getProjectionMode=function(){return this.projectionMode},e.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},e.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},e.prototype.getFrustum=function(){return this.frustum},e.prototype.getPosition=function(){return this.position},e.prototype.getFocalPoint=function(){return this.focalPoint},e.prototype.getDollyingStep=function(){return this.dollyingStep},e.prototype.getNear=function(){return this.near},e.prototype.getFar=function(){return this.far},e.prototype.getZoom=function(){return this.zoom},e.prototype.getOrthoMatrix=function(){return this.orthoMatrix},e.prototype.getView=function(){return this.view},e.prototype.setEnableUpdate=function(t){this.enableUpdate=t},e.prototype.setType=function(t,n){return this.type=t,this.type===ol.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===ol.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},e.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},e.prototype.setTrackingMode=function(t){if(this.type!==ol.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},e.prototype.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},e.prototype.getViewTransform=function(){return jr.invert(jr.create(),this.matrix)},e.prototype.getWorldTransform=function(){return this.matrix},e.prototype.jitterProjectionMatrix=function(t,n){var r=jr.fromTranslation(jr.create(),[t,n,0]);this.jitteredProjectionMatrix=jr.multiply(jr.create(),r,this.projectionMatrix)},e.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},e.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},e.prototype.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},e.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},e.prototype.setNear=function(t){return this.projectionMode===Bh.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},e.prototype.setFar=function(t){return this.projectionMode===Bh.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},e.prototype.setViewOffset=function(t,n,r,i,s,l){return this.aspect=t/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=l,this.projectionMode===Bh.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Bh.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===Bh.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Bh.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},e.prototype.setZoomByViewportPoint=function(t,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,s=r.y,l=this.roll;this.rotate(0,0,-l),this.setPosition(i,s),this.setFocalPoint(i,s),this.setZoom(t),this.rotate(0,0,l);var c=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),h=c.x,p=c.y,v=Hn.al(h-i,p-s,0),y=Hn.AK(v,this.right)/Hn.kE(this.right),b=Hn.AK(v,this.up)/Hn.kE(this.up);return this.pan(-y,-b),this},e.prototype.setPerspective=function(t,n,r,i){var s;this.projectionMode=Bh.PERSPECTIVE,this.fov=r,this.near=t,this.far=n,this.aspect=i;var l=this.near*Math.tan(Al(.5*this.fov))/this.zoom,c=2*l,h=this.aspect*c,p=-.5*h;if(!((s=this.view)===null||s===void 0)&&s.enabled){var v=this.view.fullWidth,y=this.view.fullHeight;p+=this.view.offsetX*h/v,l-=this.view.offsetY*c/y,h*=this.view.width/v,c*=this.view.height/y}return Qy(this.projectionMatrix,p,p+h,l,l-c,t,this.far,this.clipSpaceNearZ===av.ZERO),jr.scale(this.projectionMatrix,this.projectionMatrix,Hn.al(1,-1,1)),jr.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},e.prototype.setOrthographic=function(t,n,r,i,s,l){var c;this.projectionMode=Bh.ORTHOGRAPHIC,this.rright=n,this.left=t,this.top=r,this.bottom=i,this.near=s,this.far=l;var h=(this.rright-this.left)/(2*this.zoom),p=(this.top-this.bottom)/(2*this.zoom),v=(this.rright+this.left)/2,y=(this.top+this.bottom)/2,b=v-h,T=v+h,M=y+p,R=y-p;if(!((c=this.view)===null||c===void 0)&&c.enabled){var L=(this.rright-this.left)/this.view.fullWidth/this.zoom,N=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=L*this.view.offsetX,T=b+L*this.view.width,M-=N*this.view.offsetY,R=M-N*this.view.height}return this.clipSpaceNearZ===av.NEGATIVE_ONE?jr.ortho(this.projectionMatrix,b,T,R,M,s,l):jr.orthoZO(this.projectionMatrix,b,T,R,M,s,l),jr.scale(this.projectionMatrix,this.projectionMatrix,Hn.al(1,-1,1)),jr.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},e.prototype.setPosition=function(t,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=sc(t,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},e.prototype.setFocalPoint=function(t,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=Hn.al(0,1,0);if(this.focalPoint=sc(t,n,r),this.trackingMode===Gg.CINEMATIC){var s=Hn.$X(Hn.Ue(),this.focalPoint,this.position);t=s[0],n=s[1],r=s[2];var l=Hn.kE(s),c=_f(Math.asin(n/l)),h=90+_f(Math.atan2(r,t)),p=jr.create();jr.rotateY(p,p,Al(h)),jr.rotateX(p,p,Al(c)),i=Hn.fF(Hn.Ue(),[0,1,0],p)}return jr.invert(this.matrix,jr.lookAt(jr.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},e.prototype.getDistance=function(){return this.distance},e.prototype.getDistanceVector=function(){return this.distanceVector},e.prototype.setDistance=function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<ud&&(this.distance=ud),this.dollyingStep=this.distance/100;var n=Hn.Ue();t=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=t*r[0]+i[0],n[1]=t*r[1]+i[1],n[2]=t*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},e.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},e.prototype.setMinDistance=function(t){return this.minDistance=t,this},e.prototype.setAzimuth=function(t){return this.azimuth=sv(t),this.computeMatrix(),this._getAxes(),this.type===ol.ORBITING||this.type===ol.EXPLORING?this._getPosition():this.type===ol.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getAzimuth=function(){return this.azimuth},e.prototype.setElevation=function(t){return this.elevation=sv(t),this.computeMatrix(),this._getAxes(),this.type===ol.ORBITING||this.type===ol.EXPLORING?this._getPosition():this.type===ol.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getElevation=function(){return this.elevation},e.prototype.setRoll=function(t){return this.roll=sv(t),this.computeMatrix(),this._getAxes(),this.type===ol.ORBITING||this.type===ol.EXPLORING?this._getPosition():this.type===ol.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getRoll=function(){return this.roll},e.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},e.prototype.computeMatrix=function(){var t=$t(on(),[0,0,1],Al(this.roll));jr.identity(this.matrix);var n=$t(on(),[1,0,0],Al((this.rotateWorld&&this.type!==ol.TRACKING||this.type===ol.TRACKING?1:-1)*this.elevation)),r=$t(on(),[0,1,0],Al((this.rotateWorld&&this.type!==ol.TRACKING||this.type===ol.TRACKING?1:-1)*this.azimuth)),i=Dr(on(),r,n);i=Dr(on(),i,t);var s=jr.fromQuat(jr.create(),i);this.type===ol.ORBITING||this.type===ol.EXPLORING?(jr.translate(this.matrix,this.matrix,this.focalPoint),jr.multiply(this.matrix,this.matrix,s),jr.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===ol.TRACKING&&(jr.translate(this.matrix,this.matrix,this.position),jr.multiply(this.matrix,this.matrix,s))},e.prototype._setPosition=function(t,n,r){this.position=sc(t,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},e.prototype._getAxes=function(){Hn.JG(this.right,sc(Vn.fF(Vn.Ue(),[1,0,0,0],this.matrix))),Hn.JG(this.up,sc(Vn.fF(Vn.Ue(),[0,1,0,0],this.matrix))),Hn.JG(this.forward,sc(Vn.fF(Vn.Ue(),[0,0,1,0],this.matrix))),Hn.Fv(this.right,this.right),Hn.Fv(this.up,this.up),Hn.Fv(this.forward,this.forward)},e.prototype._getAngles=function(){var t=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=Hn.kE(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===ol.TRACKING?(this.elevation=_f(Math.asin(n/i)),this.azimuth=_f(Math.atan2(-t,-r))):this.rotateWorld?(this.elevation=_f(Math.asin(n/i)),this.azimuth=_f(Math.atan2(-t,-r))):(this.elevation=-_f(Math.asin(n/i)),this.azimuth=-_f(Math.atan2(-t,-r)))},e.prototype._getPosition=function(){Hn.JG(this.position,sc(Vn.fF(Vn.Ue(),[0,0,0,1],this.matrix))),this._getDistance()},e.prototype._getFocalPoint=function(){Hn.kK(this.distanceVector,[0,0,-this.distance],Xu(Jl(),this.matrix)),Hn.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()},e.prototype._getDistance=function(){this.distanceVector=Hn.$X(Hn.Ue(),this.focalPoint,this.position),this.distance=Hn.kE(this.distanceVector),this.dollyingStep=this.distance/100},e.prototype._getOrthoMatrix=function(){if(this.projectionMode===Bh.ORTHOGRAPHIC){var t=this.position,n=$t(on(),[0,0,1],-this.roll*Math.PI/180);jr.fromRotationTranslationScaleOrigin(this.orthoMatrix,n,Hn.al((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),Hn.al(this.zoom,this.zoom,1),t)}},e.prototype.triggerUpdate=function(){if(this.enableUpdate){var t=this.getViewTransform(),n=jr.multiply(jr.create(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(e_.UPDATED)}},e.prototype.rotate=function(t,n,r){throw new Error(Ta)},e.prototype.pan=function(t,n){throw new Error(Ta)},e.prototype.dolly=function(t){throw new Error(Ta)},e.prototype.createLandmark=function(t,n){throw new Error(Ta)},e.prototype.gotoLandmark=function(t,n){throw new Error(Ta)},e.prototype.cancelLandmarkAnimation=function(){throw new Error(Ta)},e}();function $o(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=t?t.apply(this,r):r[0],l=n.cache;if(l.has(s))return l.get(s);var c=e.apply(this,r);return n.cache=l.set(s,c)||l,c};return n.cache=new($o.Cache||Map),n}$o.Cache=Map;var ao;(function(e){e[e.kUnknown=0]="kUnknown",e[e.kNumber=1]="kNumber",e[e.kPercentage=2]="kPercentage",e[e.kEms=3]="kEms",e[e.kPixels=4]="kPixels",e[e.kRems=5]="kRems",e[e.kDegrees=6]="kDegrees",e[e.kRadians=7]="kRadians",e[e.kGradians=8]="kGradians",e[e.kTurns=9]="kTurns",e[e.kMilliseconds=10]="kMilliseconds",e[e.kSeconds=11]="kSeconds",e[e.kInteger=12]="kInteger"})(ao||(ao={}));var kh;(function(e){e[e.kUNumber=0]="kUNumber",e[e.kUPercent=1]="kUPercent",e[e.kULength=2]="kULength",e[e.kUAngle=3]="kUAngle",e[e.kUTime=4]="kUTime",e[e.kUOther=5]="kUOther"})(kh||(kh={}));var Dc;(function(e){e[e.kAll=0]="kAll",e[e.kNonNegative=1]="kNonNegative",e[e.kInteger=2]="kInteger",e[e.kNonNegativeInteger=3]="kNonNegativeInteger",e[e.kPositiveInteger=4]="kPositiveInteger"})(Dc||(Dc={}));var S0;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(S0||(S0={}));var kv;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(kv||(kv={}));var sx=[{name:"em",unit_type:ao.kEms},{name:"px",unit_type:ao.kPixels},{name:"deg",unit_type:ao.kDegrees},{name:"rad",unit_type:ao.kRadians},{name:"grad",unit_type:ao.kGradians},{name:"ms",unit_type:ao.kMilliseconds},{name:"s",unit_type:ao.kSeconds},{name:"rem",unit_type:ao.kRems},{name:"turn",unit_type:ao.kTurns}],zh;(function(e){e[e.kUnknownType=0]="kUnknownType",e[e.kUnparsedType=1]="kUnparsedType",e[e.kKeywordType=2]="kKeywordType",e[e.kUnitType=3]="kUnitType",e[e.kSumType=4]="kSumType",e[e.kProductType=5]="kProductType",e[e.kNegateType=6]="kNegateType",e[e.kInvertType=7]="kInvertType",e[e.kMinType=8]="kMinType",e[e.kMaxType=9]="kMaxType",e[e.kClampType=10]="kClampType",e[e.kTransformType=11]="kTransformType",e[e.kPositionType=12]="kPositionType",e[e.kURLImageType=13]="kURLImageType",e[e.kColorType=14]="kColorType",e[e.kUnsupportedColorType=15]="kUnsupportedColorType"})(zh||(zh={}));var Xg=function(e){return sx.find(function(t){return t.name===e}).unit_type},lx=function(e){return e?e==="number"?ao.kNumber:e==="percent"||e==="%"?ao.kPercentage:Xg(e):ao.kUnknown},gI=function(e){switch(e){case ao.kNumber:case ao.kInteger:return kh.kUNumber;case ao.kPercentage:return kh.kUPercent;case ao.kPixels:return kh.kULength;case ao.kMilliseconds:case ao.kSeconds:return kh.kUTime;case ao.kDegrees:case ao.kRadians:case ao.kGradians:case ao.kTurns:return kh.kUAngle;default:return kh.kUOther}},aC=function(e){switch(e){case kh.kUNumber:return ao.kNumber;case kh.kULength:return ao.kPixels;case kh.kUPercent:return ao.kPercentage;case kh.kUTime:return ao.kSeconds;case kh.kUAngle:return ao.kDegrees;default:return ao.kUnknown}},nu=function(e){var t=1;switch(e){case ao.kPixels:case ao.kDegrees:case ao.kSeconds:break;case ao.kMilliseconds:t=.001;break;case ao.kRadians:t=180/Math.PI;break;case ao.kGradians:t=.9;break;case ao.kTurns:t=360;break}return t},GE=function(e){switch(e){case ao.kNumber:case ao.kInteger:return"";case ao.kPercentage:return"%";case ao.kEms:return"em";case ao.kRems:return"rem";case ao.kPixels:return"px";case ao.kDegrees:return"deg";case ao.kRadians:return"rad";case ao.kGradians:return"grad";case ao.kMilliseconds:return"ms";case ao.kSeconds:return"s";case ao.kTurns:return"turn"}return""},ux=function(){function e(){}return e.isAngle=function(t){return t===ao.kDegrees||t===ao.kRadians||t===ao.kGradians||t===ao.kTurns},e.isLength=function(t){return t>=ao.kEms&&t<ao.kDegrees},e.isRelativeUnit=function(t){return t===ao.kPercentage||t===ao.kEms||t===ao.kRems},e.isTime=function(t){return t===ao.kSeconds||t===ao.kMilliseconds},e.prototype.toString=function(){return this.buildCSSText(S0.kNo,kv.kNo,"")},e.prototype.isNumericValue=function(){return this.getType()>=zh.kUnitType&&this.getType()<=zh.kClampType},e}(),ZE=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.colorSpace=n,r}return t.prototype.getType=function(){return zh.kColorType},t.prototype.to=function(n){return this},t}(ux),w0;(function(e){e[e.Constant=0]="Constant",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"})(w0||(w0={}));var zv=function(e){(0,ie.ZT)(t,e);function t(n,r){var i=e.call(this)||this;return i.type=n,i.value=r,i}return t.prototype.clone=function(){return new t(this.type,this.value)},t.prototype.buildCSSText=function(n,r,i){return i},t.prototype.getType=function(){return zh.kColorType},t}(ux),Bf=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.value=n,r}return t.prototype.clone=function(){return new t(this.value)},t.prototype.getType=function(){return zh.kKeywordType},t.prototype.buildCSSText=function(n,r,i){return i+this.value},t}(ux),t_=$o(function(e){return e===void 0&&(e=""),e.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}),_1=function(e){return e.split("").map(function(t,n){return t.toUpperCase()===t?"".concat(n!==0?"-":"").concat(t.toLowerCase()):t}).join("")};function XE(e){if(!e)throw new Error}function Wm(e){return typeof e=="function"}function YE(e){return typeof e=="symbol"}var sC=function(e){return Object.fromEntries(Object.entries(e).filter(function(t){var n=__read(t,2),r=n[1];return r!==void 0}))},cx={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},Yg=$o(function(e){var t=t_(e),n=cx[t];return t=(n==null?void 0:n.alias)||t,t}),Gm=function(e,t){t===void 0&&(t="");var n="";return Number.isFinite(e)?(XE(Number.isNaN(e)),n="NaN"):e>0?n="infinity":n="-infinity",n+=t},b1=function(e){return aC(gI(e))},Nl=function(e){(0,ie.ZT)(t,e);function t(n,r){r===void 0&&(r=ao.kNumber);var i=e.call(this)||this,s;return typeof r=="string"?s=lx(r):s=r,i.unit=s,i.value=n,i}return t.prototype.clone=function(){return new t(this.value,this.unit)},t.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},t.prototype.getType=function(){return zh.kUnitType},t.prototype.convertTo=function(n){if(this.unit===n)return new t(this.value,this.unit);var r=b1(this.unit);if(r!==b1(n)||r===ao.kUnknown)return null;var i=nu(this.unit)/nu(n);return new t(this.value*i,n)},t.prototype.buildCSSText=function(n,r,i){var s;switch(this.unit){case ao.kUnknown:break;case ao.kInteger:s=Number(this.value).toFixed(0);break;case ao.kNumber:case ao.kPercentage:case ao.kEms:case ao.kRems:case ao.kPixels:case ao.kDegrees:case ao.kRadians:case ao.kGradians:case ao.kMilliseconds:case ao.kSeconds:case ao.kTurns:{var l=-999999,c=999999,h=this.value,p=GE(this.unit);if(h<l||h>c){var v=GE(this.unit);!Number.isFinite(h)||Number.isNaN(h)?s=Gm(h,v):s=h+(v||"")}else s="".concat(h).concat(p)}}return i+=s,i},t}(ux),bf=new Nl(0,"px");new Nl(1,"px");var Xd=new Nl(0,"deg"),$E=function(e){(0,ie.ZT)(t,e);function t(n,r,i,s,l){s===void 0&&(s=1),l===void 0&&(l=!1);var c=e.call(this,"rgb")||this;return c.r=n,c.g=r,c.b=i,c.alpha=s,c.isNone=l,c}return t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},t.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},t}(ZE),mu=new Bf("unset"),yI=new Bf("initial"),qE=new Bf("inherit"),Uv={"":mu,unset:mu,initial:yI,inherit:qE},fx=function(e){return Uv[e]||(Uv[e]=new Bf(e)),Uv[e]},hx=new $E(0,0,0,0,!0),n_=new $E(0,0,0,0),lC=$o(function(e,t,n,r){return new $E(e,t,n,r)},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")")}),ru=function(e,t){return t===void 0&&(t=ao.kNumber),new Nl(e,t)},r_=new Nl(50,"%"),KE;(function(e){e[e.Standard=0]="Standard"})(KE||(KE={}));var lv;(function(e){e[e.ADDED=0]="ADDED",e[e.REMOVED=1]="REMOVED",e[e.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(lv||(lv={}));var x1={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Wp(0,0,0,0)},Po;(function(e){e.COORDINATE="<coordinate>",e.COLOR="<color>",e.PAINT="<paint>",e.NUMBER="<number>",e.ANGLE="<angle>",e.OPACITY_VALUE="<opacity-value>",e.SHADOW_BLUR="<shadow-blur>",e.LENGTH="<length>",e.PERCENTAGE="<percentage>",e.LENGTH_PERCENTAGE="<length> | <percentage>",e.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",e.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",e.LIST_OF_POINTS="<list-of-points>",e.PATH="<path>",e.FILTER="<filter>",e.Z_INDEX="<z-index>",e.OFFSET_DISTANCE="<offset-distance>",e.DEFINED_PATH="<defined-path>",e.MARKER="<marker>",e.TRANSFORM="<transform>",e.TRANSFORM_ORIGIN="<transform-origin>",e.TEXT="<text>",e.TEXT_TRANSFORM="<text-transform>"})(Po||(Po={}));function uC(e){var t=e.type,n=e.value;return t==="hex"?"#".concat(n):t==="literal"?n:t==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var _I=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(Ht){throw new Error(t+": "+Ht)}function r(){var Ht=i();return t.length>0&&n("Invalid input not EOF"),Ht}function i(){return H(s)}function s(){return l("linear-gradient",e.linearGradient,h)||l("repeating-linear-gradient",e.repeatingLinearGradient,h)||l("radial-gradient",e.radialGradient,y)||l("repeating-radial-gradient",e.repeatingRadialGradient,y)||l("conic-gradient",e.conicGradient,y)}function l(Ht,Ot,kt){return c(Ot,function(Mn){var Wn=kt();return Wn&&(ht(e.comma)||n("Missing comma before color stops")),{type:Ht,orientation:Wn,colorStops:H(X)}})}function c(Ht,Ot){var kt=ht(Ht);if(kt){ht(e.startCall)||n("Missing (");var Mn=Ot(kt);return ht(e.endCall)||n("Missing )"),Mn}}function h(){return p()||v()}function p(){return lt("directional",e.sideOrCorner,1)}function v(){return lt("angular",e.angleValue,1)}function y(){var Ht,Ot=b(),kt;return Ot&&(Ht=[],Ht.push(Ot),kt=t,ht(e.comma)&&(Ot=b(),Ot?Ht.push(Ot):t=kt)),Ht}function b(){var Ht=T()||M();if(Ht)Ht.at=L();else{var Ot=R();if(Ot){Ht=Ot;var kt=L();kt&&(Ht.at=kt)}else{var Mn=N();Mn&&(Ht={type:"default-radial",at:Mn})}}return Ht}function T(){var Ht=lt("shape",/^(circle)/i,0);return Ht&&(Ht.style=Qe()||R()),Ht}function M(){var Ht=lt("shape",/^(ellipse)/i,0);return Ht&&(Ht.style=$e()||R()),Ht}function R(){return lt("extent-keyword",e.extentKeywords,1)}function L(){if(lt("position",/^at/,0)){var Ht=N();return Ht||n("Missing positioning value"),Ht}}function N(){var Ht=z();if(Ht.x||Ht.y)return{type:"position",value:Ht}}function z(){return{x:$e(),y:$e()}}function H(Ht){var Ot=Ht(),kt=[];if(Ot)for(kt.push(Ot);ht(e.comma);)Ot=Ht(),Ot?kt.push(Ot):n("One extra comma");return kt}function X(){var Ht=Y();return Ht||n("Expected color definition"),Ht.length=$e(),Ht}function Y(){return ve()||Ie()||Ee()||ne()}function ne(){return lt("literal",e.literalColor,0)}function ve(){return lt("hex",e.hexColor,1)}function Ee(){return c(e.rgbColor,function(){return{type:"rgb",value:H(Ye)}})}function Ie(){return c(e.rgbaColor,function(){return{type:"rgba",value:H(Ye)}})}function Ye(){return ht(e.number)[1]}function $e(){return lt("%",e.percentageValue,1)||St()||Qe()}function St(){return lt("position-keyword",e.positionKeywords,1)}function Qe(){return lt("px",e.pixelValue,1)||lt("em",e.emValue,1)}function lt(Ht,Ot,kt){var Mn=ht(Ot);if(Mn)return{type:Ht,value:Mn[kt]}}function ht(Ht){var Ot=/^[\n\r\t\s]+/.exec(t);Ot&&bt(Ot[0].length);var kt=Ht.exec(t);return kt&&bt(kt[0].length),kt}function bt(Ht){t=t.substring(Ht)}return function(Ht){return t=Ht,r()}}();function cC(e,t,n){var r=Al(n.value),i=0,s=0,l=i+e/2,c=s+t/2,h=Math.abs(e*Math.cos(r))+Math.abs(t*Math.sin(r)),p=l-Math.cos(r)*h/2,v=c-Math.sin(r)*h/2,y=l+Math.cos(r)*h/2,b=c+Math.sin(r)*h/2;return{x1:p,y1:v,x2:y,y2:b}}function bI(e,t,n,r,i){var s=n.value,l=r.value;n.unit===ao.kPercentage&&(s=n.value/100*e),r.unit===ao.kPercentage&&(l=r.value/100*t);var c=Math.max(js([0,0],[s,l]),js([0,t],[s,l]),js([e,t],[s,l]),js([e,0],[s,l]));return i&&(i instanceof Nl?c=i.value:i instanceof Bf&&(i.value==="closest-side"?c=Math.min(s,e-s,l,t-l):i.value==="farthest-side"?c=Math.max(s,e-s,l,t-l):i.value==="closest-corner"&&(c=Math.min(js([0,0],[s,l]),js([0,t],[s,l]),js([e,t],[s,l]),js([e,0],[s,l]))))),{x:s,y:l,r:c}}var fC=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,E1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,xI=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,hC=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function dC(e){var t,n,r,i=e.length;e[i-1].length=(t=e[i-1].length)!==null&&t!==void 0?t:{type:"%",value:"100"},i>1&&(e[0].length=(n=e[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var s=0,l=Number(e[0].length.value),c=1;c<i;c++){var h=(r=e[c].length)===null||r===void 0?void 0:r.value;if(!(0,Lo.Z)(h)&&!(0,Lo.Z)(l)){for(var p=1;p<c-s;p++)e[s+p].length={type:"%",value:"".concat(l+(Number(h)-l)*p/(c-s))};s=c,l=Number(h)}}}var pC={left:270-90,top:0-90,bottom:180-90,right:90-90,"left top":315-90,"top left":315-90,"left bottom":225-90,"bottom left":225-90,"right top":45-90,"top right":45-90,"right bottom":135-90,"bottom right":135-90},vC=$o(function(e){var t;return e.type==="angular"?t=Number(e.value):t=pC[e.value]||0,ru(t,"deg")}),mC=$o(function(e){var t=50,n=50,r="%",i="%";if((e==null?void 0:e.type)==="position"){var s=e.value,l=s.x,c=s.y;(l==null?void 0:l.type)==="position-keyword"&&(l.value==="left"?t=0:l.value==="center"?t=50:l.value==="right"?t=100:l.value==="top"?n=0:l.value==="bottom"&&(n=100)),(c==null?void 0:c.type)==="position-keyword"&&(c.value==="left"?t=0:c.value==="center"?n=50:c.value==="right"?t=100:c.value==="top"?n=0:c.value==="bottom"&&(n=100)),((l==null?void 0:l.type)==="px"||(l==null?void 0:l.type)==="%"||(l==null?void 0:l.type)==="em")&&(r=l==null?void 0:l.type,t=Number(l.value)),((c==null?void 0:c.type)==="px"||(c==null?void 0:c.type)==="%"||(c==null?void 0:c.type)==="em")&&(i=c==null?void 0:c.type,n=Number(c.value))}return{cx:ru(t,r),cy:ru(n,i)}}),gC=$o(function(e){var t;if(e.indexOf("linear")>-1||e.indexOf("radial")>-1){var n=_I(e);return n.map(function(c){var h=c.type,p=c.orientation,v=c.colorStops;dC(v);var y=v.map(function(H){return{offset:ru(Number(H.length.value),"%"),color:uC(H)}});if(h==="linear-gradient")return new zv(w0.LinearGradient,{angle:p?vC(p):Xd,steps:y});if(h==="radial-gradient"&&(p||(p=[{type:"shape",value:"circle"}]),p[0].type==="shape"&&p[0].value==="circle")){var b=mC(p[0].at),T=b.cx,M=b.cy,R=void 0;if(p[0].style){var L=p[0].style,N=L.type,z=L.value;N==="extent-keyword"?R=fx(z):R=ru(z,N)}return new zv(w0.RadialGradient,{cx:T,cy:M,size:R,steps:y})}})}var r=e[0];if(e[1]==="("||e[2]==="("){if(r==="l"){var i=fC.exec(e);if(i){var s=((t=i[2].match(hC))===null||t===void 0?void 0:t.map(function(c){return c.split(":")}))||[];return[new zv(w0.LinearGradient,{angle:ru(parseFloat(i[1]),"deg"),steps:s.map(function(c){var h=(0,ie.CR)(c,2),p=h[0],v=h[1];return{offset:ru(Number(p)*100,"%"),color:v}})})]}}else if(r==="r"){var l=yC(e);if(l)if(Gl(l))e=l;else return[new zv(w0.RadialGradient,l)]}else if(r==="p")return _C(e)}});function yC(e){var t,n=E1.exec(e);if(n){var r=((t=n[4].match(hC))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:ru(50,"%"),cy:ru(50,"%"),steps:r.map(function(i){var s=(0,ie.CR)(i,2),l=s[0],c=s[1];return{offset:ru(Number(l)*100,"%"),color:c}})}}return null}function _C(e){var t=xI.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function bC(e){return!!e.type&&!!e.value}function $g(e){return e&&!!e.image}function $f(e){return e&&!(0,Lo.Z)(e.r)&&!(0,Lo.Z)(e.g)&&!(0,Lo.Z)(e.b)}var uv=$o(function(e){if($g(e))return(0,ie.pi)({repetition:"repeat"},e);if((0,Lo.Z)(e)&&(e=""),e==="transparent")return n_;e==="currentColor"&&(e="black");var t=gC(e);if(t)return t;var n=yf.ZP(e),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),lC.apply(void 0,(0,ie.ev)([],(0,ie.CR)(r),!1))});function xC(e,t){if(!(!$f(e)||!$f(t)))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round((0,Zl.Z)(r[i],0,255));return r[3]=(0,Zl.Z)(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function i_(e,t){if((0,Lo.Z)(t))return ru(0,"px");if(t="".concat(t).trim().toLowerCase(),isFinite(Number(t))){if("px".search(e)>=0)return ru(Number(t),"px");if("deg".search(e)>=0)return ru(Number(t),"deg")}var n=[];t=t.replace(e,function(i){return n.push(i),"U"+i});var r="U("+e.source+")";return n.map(function(i){return ru(Number(t.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var QE=function(e){return i_(new RegExp("px","g"),e)},EC=$o(QE),SC=function(e){return i_(new RegExp("%","g"),e)};$o(SC);var o_=function(e){return(0,$u.Z)(e)||isFinite(Number(e))?ru(Number(e)||0,"px"):i_(new RegExp("px|%|em|rem","g"),e)},Zm=$o(o_),dx=function(e){return i_(new RegExp("deg|rad|grad|turn","g"),e)},JE=$o(dx);function wC(e,t,n,r,i){i===void 0&&(i=0);var s="",l=e.value||0,c=t.value||0,h=b1(e.unit),p=e.convertTo(h),v=t.convertTo(h);return p&&v?(l=p.value,c=v.value,s=GE(e.unit)):(Nl.isLength(e.unit)||Nl.isLength(t.unit))&&(l=Yd(e,i,n),c=Yd(t,i,n),s="px"),[l,c,function(y){return r&&(y=Math.max(y,0)),y+s}]}function cd(e){var t=0;return e.unit===ao.kDegrees?t=e.value:e.unit===ao.kRadians?t=_f(Number(e.value)):e.unit===ao.kTurns&&(t=v1(Number(e.value))),t}function px(e,t){var n;return Array.isArray(e)?n=e.map(function(r){return Number(r)}):Gl(e)?n=e.split(" ").map(function(r){return Number(r)}):(0,$u.Z)(e)&&(n=[e]),t===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function eS(e){return Gl(e)?e.split(" ").map(function(t){return Zm(t)}):e.map(function(t){return Zm(t.toString())})}function Yd(e,t,n){if(e.value===0)return 0;if(e.unit===ao.kPixels)return Number(e.value);if(e.unit===ao.kPercentage&&n){var r=n.nodeName===Gr.GROUP?n.getLocalBounds():n.geometry.contentBounds;return e.value/100*r.halfExtents[t]*2}return 0}var TC=function(e){return i_(/deg|rad|grad|turn|px|%/g,e)},AC=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function tS(e){if(e===void 0&&(e=""),e=e.toLowerCase().trim(),e==="none")return[];for(var t=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];if(i=r.index+r[0].length,AC.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(s){return TC(s)||uv(s)})}),t.lastIndex===e.length)return n}return[]}function nS(e){return e.toString()}var a_=function(e){return typeof e=="number"?ru(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?ru(Number(e)):ru(0)},jv=$o(a_);$o(function(e){return Gl(e)?e.split(" ").map(jv):e.map(jv)});function vx(e,t){return[e,t,nS]}function s_(e,t){return function(n,r){return[n,r,function(i){return nS((0,Zl.Z)(i,e,t))}]}}function CC(e,t){if(e.length===t.length)return[e,t,function(n){return n}]}function mx(e){return e.parsedStyle.path.totalLength===0&&(e.parsedStyle.path.totalLength=kr(e.parsedStyle.path.absolutePath)),e.parsedStyle.path.totalLength}function OC(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t],i=r[0];if(i==="M"&&n){var s=n[0],l=[r[1],r[2]],c=void 0;s==="L"||s==="M"?c=[n[1],n[2]]:(s==="C"||s==="A"||s==="Q")&&(c=[n[n.length-2],n[n.length-1]]),c&&S1(l,c)&&(e.splice(t,1),t--)}}}function rS(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r],s=i[0];if(s==="C"||s==="A"||s==="Q"){t=!0;break}}return t}function MC(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var s=e[i],l=s[0];l==="M"?(r.length&&(n.push(r),r=[]),r.push([s[1],s[2]])):l==="Z"?r.length&&(t.push(r),r=[]):r.push([s[1],s[2]])}return r.length>0&&n.push(r),{polygons:t,polylines:n}}function S1(e,t){return e[0]===t[0]&&e[1]===t[1]}function RC(e,t){for(var n=[],r=[],i=[],s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,h=l.params,p=l.prePoint,v=void 0;switch(l.command){case"Q":v=Bg(p[0],p[1],h[1],h[2],h[3],h[4]);break;case"C":v=Fm(p[0],p[1],h[1],h[2],h[3],h[4],h[5],h[6]);break;case"A":var y=l.arcParams;v=vp(y.cx,y.cy,y.rx,y.ry,y.xRotation,y.startAngle,y.endAngle);break;default:n.push(c[0]),r.push(c[1]);break}v&&(l.box=v,n.push(v.x,v.x+v.width),r.push(v.y,v.y+v.height)),t&&(l.command==="L"||l.command==="M")&&l.prePoint&&l.nextPoint&&i.push(l)}n=n.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0}),r=r.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0});var b=Ni(n),T=Ni(r),M=Xi(n),R=Xi(r);if(i.length===0)return{x:b,y:T,width:M-b,height:R-T};for(var s=0;s<i.length;s++){var l=i[s],c=l.currentPoint,L=void 0;c[0]===b?(L=w1(l,t),b=b-L.xExtra):c[0]===M&&(L=w1(l,t),M=M+L.xExtra),c[1]===T?(L=w1(l,t),T=T-L.yExtra):c[1]===R&&(L=w1(l,t),R=R+L.yExtra)}return{x:b,y:T,width:M-b,height:R-T}}function w1(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,s=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),l=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),c=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),h=Math.acos((s+l-c)/(2*Math.sqrt(s)*Math.sqrt(l)));if(!h||Math.sin(h)===0||oo(h,0))return{xExtra:0,yExtra:0};var p=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),v=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));p=p>Math.PI/2?Math.PI-p:p,v=v>Math.PI/2?Math.PI-v:v;var y={xExtra:Math.cos(h/2-p)*(t/2*(1/Math.sin(h/2)))-t/2||0,yExtra:Math.cos(v-h/2)*(t/2*(1/Math.sin(h/2)))-t/2||0};return y}function iS(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}var oS=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),i=e.x*t.y-e.y*t.x<0?-1:1,s=i*Math.acos(n/r);return s},PC=function(e,t,n,r,i,s,l,c){t=Math.abs(t),n=Math.abs(n),r=fo(r,360);var h=Al(r);if(e.x===l.x&&e.y===l.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var p=(e.x-l.x)/2,v=(e.y-l.y)/2,y={x:Math.cos(h)*p+Math.sin(h)*v,y:-Math.sin(h)*p+Math.cos(h)*v},b=Math.pow(y.x,2)/Math.pow(t,2)+Math.pow(y.y,2)/Math.pow(n,2);b>1&&(t=Math.sqrt(b)*t,n=Math.sqrt(b)*n);var T=Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(y.y,2)-Math.pow(n,2)*Math.pow(y.x,2),M=Math.pow(t,2)*Math.pow(y.y,2)+Math.pow(n,2)*Math.pow(y.x,2),R=T/M;R=R<0?0:R;var L=(i!==s?1:-1)*Math.sqrt(R),N={x:L*(t*y.y/n),y:L*(-(n*y.x)/t)},z={x:Math.cos(h)*N.x-Math.sin(h)*N.y+(e.x+l.x)/2,y:Math.sin(h)*N.x+Math.cos(h)*N.y+(e.y+l.y)/2},H={x:(y.x-N.x)/t,y:(y.y-N.y)/n},X=oS({x:1,y:0},H),Y={x:(-y.x-N.x)/t,y:(-y.y-N.y)/n},ne=oS(H,Y);!s&&ne>0?ne-=2*Math.PI:s&&ne<0&&(ne+=2*Math.PI),ne%=2*Math.PI;var ve=X+ne*c,Ee=t*Math.cos(ve),Ie=n*Math.sin(ve),Ye={x:Math.cos(h)*Ee-Math.sin(h)*Ie+z.x,y:Math.sin(h)*Ee+Math.cos(h)*Ie+z.y,ellipticalArcStartAngle:X,ellipticalArcEndAngle:X+ne,ellipticalArcAngle:ve,ellipticalArcCenter:z,resultantRx:t,resultantRy:n};return Ye};function IC(e){for(var t=[],n=null,r=null,i=null,s=0,l=e.length,c=0;c<l;c++){var h=e[c];r=e[c+1];var p=h[0],v={command:p,prePoint:n,params:h,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(p){case"M":i=[h[1],h[2]],s=c;break;case"A":var y=LC(n,h);v.arcParams=y;break}if(p==="Z")n=i,r=e[s+1];else{var b=h.length;n=[h[b-2],h[b-1]]}r&&r[0]==="Z"&&(r=e[s],t[s]&&(t[s].prePoint=n)),v.currentPoint=n,t[s]&&S1(n,t[s].currentPoint)&&(t[s].prePoint=v.prePoint);var T=r?[r[r.length-2],r[r.length-1]]:null;v.nextPoint=T;var M=v.prePoint;if(["L","H","V"].includes(p))v.startTangent=[M[0]-n[0],M[1]-n[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]];else if(p==="Q"){var R=[h[1],h[2]];v.startTangent=[M[0]-R[0],M[1]-R[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]]}else if(p==="T"){var L=t[c-1],R=iS(L.currentPoint,M);L.command==="Q"?(v.command="Q",v.startTangent=[M[0]-R[0],M[1]-R[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]]):(v.command="TL",v.startTangent=[M[0]-n[0],M[1]-n[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]])}else if(p==="C"){var N=[h[1],h[2]],z=[h[3],h[4]];v.startTangent=[M[0]-N[0],M[1]-N[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]],v.startTangent[0]===0&&v.startTangent[1]===0&&(v.startTangent=[N[0]-z[0],N[1]-z[1]]),v.endTangent[0]===0&&v.endTangent[1]===0&&(v.endTangent=[z[0]-N[0],z[1]-N[1]])}else if(p==="S"){var L=t[c-1],N=iS(L.currentPoint,M),z=[h[1],h[2]];L.command==="C"?(v.command="C",v.startTangent=[M[0]-N[0],M[1]-N[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]]):(v.command="SQ",v.startTangent=[M[0]-z[0],M[1]-z[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]])}else if(p==="A"){var H=T1(v,0),X=H.x,Y=H.y,ne=T1(v,1,!1),ve=ne.x,Ee=ne.y;v.startTangent=[X,Y],v.endTangent=[ve,Ee]}t.push(v)}return t}function T1(e,t,n){n===void 0&&(n=!0);var r=e.arcParams,i=r.rx,s=i===void 0?0:i,l=r.ry,c=l===void 0?0:l,h=r.xRotation,p=r.arcFlag,v=r.sweepFlag,y=PC({x:e.prePoint[0],y:e.prePoint[1]},s,c,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},t),b=PC({x:e.prePoint[0],y:e.prePoint[1]},s,c,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),T=b.x-y.x,M=b.y-y.y,R=Math.sqrt(T*T+M*M);return{x:-T/R,y:-M/R}}function A1(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function gx(e,t){return A1(e)*A1(t)?(e[0]*t[0]+e[1]*t[1])/(A1(e)*A1(t)):1}function yx(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(gx(e,t))}function LC(e,t){var n=t[1],r=t[2],i=fo(Al(t[3]),Math.PI*2),s=t[4],l=t[5],c=e[0],h=e[1],p=t[6],v=t[7],y=Math.cos(i)*(c-p)/2+Math.sin(i)*(h-v)/2,b=-1*Math.sin(i)*(c-p)/2+Math.cos(i)*(h-v)/2,T=y*y/(n*n)+b*b/(r*r);T>1&&(n*=Math.sqrt(T),r*=Math.sqrt(T));var M=n*n*(b*b)+r*r*(y*y),R=M?Math.sqrt((n*n*(r*r)-M)/M):1;s===l&&(R*=-1),isNaN(R)&&(R=0);var L=r?R*n*b/r:0,N=n?R*-r*y/n:0,z=(c+p)/2+Math.cos(i)*L-Math.sin(i)*N,H=(h+v)/2+Math.sin(i)*L+Math.cos(i)*N,X=[(y-L)/n,(b-N)/r],Y=[(-1*y-L)/n,(-1*b-N)/r],ne=yx([1,0],X),ve=yx(X,Y);return gx(X,Y)<=-1&&(ve=Math.PI),gx(X,Y)>=1&&(ve=0),l===0&&ve>0&&(ve=ve-2*Math.PI),l===1&&ve<0&&(ve=ve+2*Math.PI),{cx:z,cy:H,rx:S1(e,[p,v])?0:n,ry:S1(e,[p,v])?0:r,startAngle:ne,endAngle:ne+ve,xRotation:i,arcFlag:s,sweepFlag:l}}function DC(e,t,n){var r=t.parsedStyle,i=r.defX,s=i===void 0?0:i,l=r.defY,c=l===void 0?0:l;return e.reduce(function(h,p){var v="";if(p[0]==="M"||p[0]==="L"){var y=Hn.al(p[1]-s,p[2]-c,0);n&&Hn.fF(y,y,n),v="".concat(p[0]).concat(y[0],",").concat(y[1])}else if(p[0]==="Z")v=p[0];else if(p[0]==="C"){var b=Hn.al(p[1]-s,p[2]-c,0),T=Hn.al(p[3]-s,p[4]-c,0),M=Hn.al(p[5]-s,p[6]-c,0);n&&(Hn.fF(b,b,n),Hn.fF(T,T,n),Hn.fF(M,M,n)),v="".concat(p[0]).concat(b[0],",").concat(b[1],",").concat(T[0],",").concat(T[1],",").concat(M[0],",").concat(M[1])}else if(p[0]==="A"){var R=Hn.al(p[6]-s,p[7]-c,0);n&&Hn.fF(R,R,n),v="".concat(p[0]).concat(p[1],",").concat(p[2],",").concat(p[3],",").concat(p[4],",").concat(p[5],",").concat(R[0],",").concat(R[1])}else if(p[0]==="Q"){var b=Hn.al(p[1]-s,p[2]-c,0),T=Hn.al(p[3]-s,p[4]-c,0);n&&(Hn.fF(b,b,n),Hn.fF(T,T,n)),v="".concat(p[0]).concat(p[1],",").concat(p[2],",").concat(p[3],",").concat(p[4],"}")}return h+=v},"")}function aS(e,t,n,r){return[["M",e,t],["L",n,r]]}function sS(e,t,n,r){var i=(-1+Math.sqrt(2))/3*4,s=e*i,l=t*i,c=n-e,h=n+e,p=r-t,v=r+t;return[["M",c,r],["C",c,r-l,n-s,p,n,p],["C",n+s,p,h,r-l,h,r],["C",h,r+l,n+s,v,n,v],["C",n-s,v,c,r+l,c,r],["Z"]]}function NC(e,t){var n=e.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return t&&n.push(["Z"]),n}function lS(e,t,n,r,i){if(i){var s=(0,ie.CR)(i,4),l=s[0],c=s[1],h=s[2],p=s[3],v=e>0?1:-1,y=t>0?1:-1,b=v+y!==0?1:0;return[["M",v*l+n,r],["L",e-v*c+n,r],c?["A",c,c,0,0,b,e+n,y*c+r]:null,["L",e+n,t-y*h+r],h?["A",h,h,0,0,b,e+n-v*h,t+r]:null,["L",n+v*p,t+r],p?["A",p,p,0,0,b,n,t+r-y*p]:null,["L",n,y*l+r],l?["A",l,l,0,0,b,v*l+n,r]:null,["Z"]].filter(function(T){return T})}return[["M",n,r],["L",n+e,r],["L",n+e,r+t],["L",n,r+t],["Z"]]}function _x(e,t){t===void 0&&(t=e.getLocalTransform());var n=[];switch(e.nodeName){case Gr.LINE:var r=e.parsedStyle,i=r.x1,s=i===void 0?0:i,l=r.y1,c=l===void 0?0:l,h=r.x2,p=h===void 0?0:h,v=r.y2,y=v===void 0?0:v;n=aS(s,c,p,y);break;case Gr.CIRCLE:{var b=e.parsedStyle,T=b.r,M=T===void 0?0:T,R=b.cx,L=R===void 0?0:R,N=b.cy,z=N===void 0?0:N;n=sS(M,M,L,z);break}case Gr.ELLIPSE:{var H=e.parsedStyle,X=H.rx,Y=X===void 0?0:X,ne=H.ry,ve=ne===void 0?0:ne,Ee=H.cx,L=Ee===void 0?0:Ee,Ie=H.cy,z=Ie===void 0?0:Ie;n=sS(Y,ve,L,z);break}case Gr.POLYLINE:case Gr.POLYGON:var Ye=e.parsedStyle.points;n=NC(Ye.points,e.nodeName===Gr.POLYGON);break;case Gr.RECT:var $e=e.parsedStyle,St=$e.width,Qe=St===void 0?0:St,lt=$e.height,ht=lt===void 0?0:lt,bt=$e.x,Ht=bt===void 0?0:bt,Ot=$e.y,kt=Ot===void 0?0:Ot,Mn=$e.radius,Wn=Mn&&Mn.some(function(ar){return ar!==0});n=lS(Qe,ht,Ht,kt,Wn&&Mn.map(function(ar){return(0,Zl.Z)(ar,0,Math.min(Math.abs(Qe)/2,Math.abs(ht)/2))}));break;case Gr.PATH:var cr=e.parsedStyle.path.absolutePath;n=(0,ie.ev)([],(0,ie.CR)(cr),!1);break}if(n.length)return DC(n,e,t)}function EI(e,t,n,r,i,s,l){r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),l===void 0&&(l=0);var c=e.map(function(h,p){var v=h[0],y=e[p+1],b=p===0&&(r!==0||i!==0),T=(p===e.length-1||y&&(y[0]==="M"||y[0]==="Z"))&&s!==0&&l!==0;switch(v){case"M":return b?"M ".concat(h[1]-t+r,",").concat(h[2]-n+i," L ").concat(h[1]-t,",").concat(h[2]-n):"M ".concat(h[1]-t,",").concat(h[2]-n);case"L":return"L ".concat(h[1]-t+(T?s:0),",").concat(h[2]-n+(T?l:0));case"Q":return"Q ".concat(h[1]-t," ").concat(h[2]-n,",").concat(h[3]-t," ").concat(h[4]-n)+(T?" L ".concat(h[3]-t+s,",").concat(h[4]-n+l):"");case"C":return"C ".concat(h[1]-t," ").concat(h[2]-n,",").concat(h[3]-t," ").concat(h[4]-n,",").concat(h[5]-t," ").concat(h[6]-n)+(T?" L ".concat(h[5]-t+s,",").concat(h[6]-n+l):"");case"A":return"A ".concat(h[1]," ").concat(h[2]," ").concat(h[3]," ").concat(h[4]," ").concat(h[5]," ").concat(h[6]-t," ").concat(h[7]-n)+(T?" L ".concat(h[6]-t+s,",").concat(h[7]-n+l):"");case"Z":return"Z"}}).join(" ");return~c.indexOf("NaN")?"":c}var bx=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=Xe(e)}catch(b){t=Xe(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}OC(t);var n=rS(t),r=MC(t),i=r.polygons,s=r.polylines,l=IC(t),c=RC(l,0),h=c.x,p=c.y,v=c.width,y=c.height;return{absolutePath:t,hasArc:n,segments:l,polygons:i,polylines:s,totalLength:0,rect:{x:Number.isFinite(h)?h:0,y:Number.isFinite(p)?p:0,width:Number.isFinite(v)?v:0,height:Number.isFinite(y)?y:0}}},uS=$o(bx);function l_(e){return Gl(e)?uS(e):bx(e)}function C1(e,t,n){var r=e.curve,i=t.curve;(!r||r.length===0)&&(r=vs(e.absolutePath,!1),e.curve=r),(!i||i.length===0)&&(i=vs(t.absolutePath,!1),t.curve=i);var s=[r,i];r.length!==i.length&&(s=wl(r,i));var l=Pu(s[0])!==Pu(s[1])?qu(s[0]):Kc(s[0]);return[l,Qc(s[1],l),function(c){return c}]}function cS(e,t){var n;Gl(e)?n=e.split(" ").map(function(v){var y=(0,ie.CR)(v.split(","),2),b=y[0],T=y[1];return[Number(b),Number(T)]}):n=e;var r=[],i=0,s,l,c=zm(n);n.forEach(function(v,y){n[y+1]&&(s=[0,0],s[0]=i/c,l=mp(v[0],v[1],n[y+1][0],n[y+1][1]),i+=l,s[1]=i/c,r.push(s))});var h=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(v){return v[0]})),!1)),p=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(v){return v[1]})),!1));return t&&(t.parsedStyle.defX=h,t.parsedStyle.defY=p),{points:n,totalLength:c,segments:r}}function FC(e,t){return[e.points,t.points,function(n){return n}]}var lc=null;function Uh(e){return function(t){var n=0;return e.map(function(r){return r===lc?t[n++]:r})}}function Vv(e){return e}var u_={matrix:["NNNNNN",[lc,lc,0,0,lc,lc,0,0,0,0,1,0,lc,lc,0,1],Vv],matrix3d:["NNNNNNNNNNNNNNNN",Vv],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Uh([lc,lc,new Nl(1)]),Vv],scalex:["N",Uh([lc,new Nl(1),new Nl(1)]),Uh([lc,new Nl(1)])],scaley:["N",Uh([new Nl(1),lc,new Nl(1)]),Uh([new Nl(1),lc])],scalez:["N",Uh([new Nl(1),new Nl(1),lc])],scale3d:["NNN",Vv],skew:["Aa",null,Vv],skewx:["A",null,Uh([lc,Xd])],skewy:["A",null,Uh([Xd,lc])],translate:["Tt",Uh([lc,lc,bf]),Vv],translatex:["T",Uh([lc,bf,bf]),Uh([lc,bf])],translatey:["T",Uh([bf,lc,bf]),Uh([bf,lc])],translatez:["L",Uh([bf,bf,lc])],translate3d:["TTL",Vv]};function xx(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=u_[s];if(!l)return[];var c=r[2].split(","),h=l[0];if(h.length<c.length)return[];for(var p=[],v=0;v<h.length;v++){var y=c[v],b=h[v],T=void 0;if(y?T={A:function(M){return M.trim()==="0"?Xd:JE(M)},N:jv,T:Zm,L:EC}[b.toUpperCase()](y):T={a:Xd,n:p[0],t:bf}[b],T===void 0)return[];p.push(T)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function fS(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=u_[s];if(!l)return[];var c=r[2].split(","),h=l[0];if(h.length<c.length)return[];for(var p=[],v=0;v<h.length;v++){var y=c[v],b=h[v],T=void 0;if(y?T={A:function(M){return M.trim()==="0"?Xd:dx(M)},N:a_,T:o_,L:QE}[b.toUpperCase()](y):T={a:Xd,n:p[0],t:bf}[b],T===void 0)return[];p.push(T)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function BC(e){var t,n,r,i;switch(e.t){case"rotatex":return i=Al(cd(e.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=Al(cd(e.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=Al(cd(e.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=Al(cd(e.d[3]));var s=t*t+n*n+r*r;if(s===0)t=1,n=0,r=0;else if(s!==1){var l=Math.sqrt(s);t/=l,n/=l,r/=l}var c=Math.sin(i/2),h=c*Math.cos(i/2),p=c*c;return[1-2*(n*n+r*r)*p,2*(t*n*p+r*h),2*(t*r*p-n*h),0,2*(t*n*p-r*h),1-2*(t*t+r*r)*p,2*(n*r*p+t*h),0,2*(t*r*p+n*h),2*(n*r*p-t*h),1-2*(t*t+n*n)*p,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var v=Al(cd(e.d[0])),y=Al(cd(e.d[1]));return[1,Math.tan(y),0,0,Math.tan(v),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=Al(cd(e.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=Al(cd(e.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return t=Yd(e.d[0],0,null)||0,n=Yd(e.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,0,1];case"translatex":return t=Yd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1];case"translatey":return n=Yd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=Yd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return t=Yd(e.d[0],0,null)||0,n=Yd(e.d[1],0,null)||0,r=Yd(e.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1];case"perspective":var b=Yd(e.d[0],0,null)||0,T=b?-1/b:0;return[1,0,0,0,0,1,0,0,0,0,1,T,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(M){return M.value})}}function kC(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function hS(e){return e.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(BC).reduce(kC)}function Ex(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],s=[0,0,0,1];return g1(hS(e),t,n,r,i,s),[[t,n,r,s,i]]}var c_=function(){function e(r,i){for(var s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],l=0;l<4;l++)for(var c=0;c<4;c++)for(var h=0;h<4;h++)s[l][c]+=i[l][h]*r[h][c];return s}function t(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,s,l,c){for(var h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=0;p<4;p++)h[p][3]=c[p];for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[3][p]+=r[v]*h[v][p];var y=l[0],b=l[1],T=l[2],M=l[3],R=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];R[0][0]=1-2*(b*b+T*T),R[0][1]=2*(y*b-T*M),R[0][2]=2*(y*T+b*M),R[1][0]=2*(y*b+T*M),R[1][1]=1-2*(y*y+T*T),R[1][2]=2*(b*T-y*M),R[2][0]=2*(y*T-b*M),R[2][1]=2*(b*T+y*M),R[2][2]=1-2*(y*y+b*b),h=e(h,R);var L=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];s[2]&&(L[2][1]=s[2],h=e(h,L)),s[1]&&(L[2][1]=0,L[2][0]=s[0],h=e(h,L)),s[0]&&(L[2][0]=0,L[1][0]=s[0],h=e(h,L));for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[p][v]*=i[p];return t(h)?[h[0][0],h[0][1],h[1][0],h[1][1],h[3][0],h[3][1]]:h[0].concat(h[1],h[2],h[3])}return n}();function dS(e){return e.toFixed(6).replace(".000000","")}function O1(e,t){var n,r;return e.decompositionPair!==t&&(e.decompositionPair=t,n=Ex(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=Ex(t)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?t[0].d:e[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var s=Sx(n[0][3],r[0][3],i[5]),l=c_(i[0],i[1],i[2],s,i[4]),c=l.map(dS).join(",");return c}])}function zC(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function Sx(e,t,n){var r=zC(e,t);r=(0,Zl.Z)(r,-1,1);var i=[];if(r===1)i=e;else for(var s=Math.acos(r),l=Math.sin(n*s)*1/Math.sqrt(1-r*r),c=0;c<4;c++)i.push(e[c]*(Math.cos(n*s)-r*l)+t[c]*l);return i}function Tx(e){return e.replace(/[xy]/,"")}function Ax(e){return e.replace(/(x|y|z|3d)?$/,"3d")}var UC=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function jC(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=function(ne){var ve=e[ne],Ee=ve.t,Ie=ve.d,Ye=Ee.substring(0,5)==="scale"?1:0;t.push({t:Ee,d:Ie.map(function($e){return typeof $e=="number"?ru(Ye):ru(Ye,$e.unit)})})},s=0;s<e.length;s++)i(s)}var l=[],c=[],h=[];if(e.length!==t.length){var p=O1(e,t);l=[p[0]],c=[p[1]],h=[["matrix",[p[2]]]]}else for(var s=0;s<e.length;s++){var v=e[s].t,y=t[s].t,b=e[s].d,T=t[s].d,M=u_[v],R=u_[y],L=void 0;if(UC(v,y)){var p=O1([e[s]],[t[s]]);l.push(p[0]),c.push(p[1]),h.push(["matrix",[p[2]]]);continue}else if(v===y)L=v;else if(M[2]&&R[2]&&Tx(v)===Tx(y))L=Tx(v),b=M[2](b),T=R[2](T);else if(M[1]&&R[1]&&Ax(v)===Ax(y))L=Ax(v),b=M[1](b),T=R[1](T);else{var p=O1(e,t);l=[p[0]],c=[p[1]],h=[["matrix",[p[2]]]];break}for(var N=[],z=[],H=[],X=0;X<b.length;X++){var p=wC(b[X],T[X],n,!1,X);N[X]=p[0],z[X]=p[1],H.push(p[2])}l.push(N),c.push(z),h.push([L,H])}if(r){var Y=l;l=c,c=Y}return[l,c,function(ne){return ne.map(function(ve,Ee){var Ie=ve.map(function(Ye,$e){return h[Ee][1][$e](Ye)}).join(",");return h[Ee][0]==="matrix"&&Ie.split(",").length===16&&(h[Ee][0]="matrix3d"),h[Ee][0]==="matrix3d"&&Ie.split(",").length===6&&(h[Ee][0]="matrix"),h[Ee][0]+"("+Ie+")"}).join(" ")}]}var pS=$o(function(e){if(Gl(e)){if(e==="text-anchor")return[ru(0,"px"),ru(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[Zm(M1(t[0])),Zm(M1(t[1]))]}else return[ru(e[0]||0,"px"),ru(e[1]||0,"px")]}),VC=function(e){if(Gl(e)){if(e==="text-anchor")return[ru(0,"px"),ru(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[o_(M1(t[0])),o_(M1(t[1]))]}else return[ru(e[0]||0,"px"),ru(e[1]||0,"px")]};function M1(e){return e==="center"?"50%":e==="left"||e==="top"?"0":e==="right"||e==="bottom"?"100%":e}var Cx=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Po.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Po.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Po.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Po.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Po.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Po.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Po.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Po.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Po.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Po.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Po.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Po.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Po.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Po.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Po.FILTER},{n:"clipPath",syntax:Po.DEFINED_PATH},{n:"textPath",syntax:Po.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Po.TRANSFORM},{n:"transformOrigin",p:100,d:function(e){return e===Gr.CIRCLE||e===Gr.ELLIPSE?"center":e===Gr.TEXT?"text-anchor":"left top"},l:!0,syntax:Po.TRANSFORM_ORIGIN},{n:"anchor",p:99,d:function(e){return e===Gr.CIRCLE||e===Gr.ELLIPSE?"0.5 0.5":"0 0"},l:!0,syntax:Po.LENGTH_PERCENTAGE_12},{n:"cx",int:!0,d:"0",syntax:Po.COORDINATE},{n:"cy",int:!0,d:"0",syntax:Po.COORDINATE},{n:"cz",int:!0,d:"0",syntax:Po.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"x",int:!0,d:"0",syntax:Po.COORDINATE},{n:"y",int:!0,d:"0",syntax:Po.COORDINATE},{n:"z",int:!0,d:"0",syntax:Po.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Po.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Po.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Po.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Po.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Po.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Po.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Po.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Po.COORDINATE},{n:"path",int:!0,l:!0,d:"",a:["d"],syntax:Po.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Po.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Po.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Po.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Po.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Po.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Po.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Po.NUMBER,d:function(e){return e===Gr.PATH||e===Gr.POLYGON||e===Gr.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Po.MARKER},{n:"markerEnd",syntax:Po.MARKER},{n:"markerMid",syntax:Po.MARKER},{n:"markerStartOffset",syntax:Po.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Po.LENGTH,l:!0,int:!0,d:"0"}],vS=Cx.filter(function(e){return!!e.l}).map(function(e){return e.n}),Hv={},qg=new WeakMap,HC=function(e,t){var n=qg.get(e);return!n||n.length===0?!0:n.includes(t)},WC=function(){function e(t){var n=this;this.runtime=t,Cx.forEach(function(r){n.registerMetadata(r)})}return e.prototype.registerMetadata=function(t){(0,ie.ev)([t.n],(0,ie.CR)(t.a||[]),!1).forEach(function(n){Hv[n]=t})},e.prototype.unregisterMetadata=function(t){delete Hv[t]},e.prototype.getPropertySyntax=function(t){return this.runtime.CSSPropertySyntaxFactory[t]},e.prototype.processProperties=function(t,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),!this.runtime.enableCSSParsing){Object.assign(t.attributes,n);var s=Object.keys(n),l=t.parsedStyle.clipPath,c=t.parsedStyle.offsetPath;t.parsedStyle=Object.assign(t.parsedStyle,n);var h=!!r.forceUpdateGeometry;if(!h){for(var p=0;p<vS.length;p++)if(vS[p]in n){h=!0;break}}n.fill&&(t.parsedStyle.fill=uv(n.fill)),n.stroke&&(t.parsedStyle.stroke=uv(n.stroke)),n.shadowColor&&(t.parsedStyle.shadowColor=uv(n.shadowColor)),n.filter&&(t.parsedStyle.filter=tS(n.filter)),(0,Lo.Z)(n.radius)||(t.parsedStyle.radius=px(n.radius,4)),(0,Lo.Z)(n.lineDash)||(t.parsedStyle.lineDash=px(n.lineDash,2)),n.points&&(t.parsedStyle.points=cS(n.points,t)),n.path===""&&(t.parsedStyle.path=(0,ie.pi)({},x1)),n.path&&(t.parsedStyle.path=l_(n.path),t.parsedStyle.defX=t.parsedStyle.path.rect.x,t.parsedStyle.defY=t.parsedStyle.path.rect.y),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},t,null),n.clipPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",l,n.clipPath,t,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",c,n.offsetPath,t,this.runtime),n.anchor&&(t.parsedStyle.anchor=px(n.anchor,2)),n.transform&&(t.parsedStyle.transform=xx(n.transform)),n.transformOrigin&&(t.parsedStyle.transformOrigin=pS(n.transformOrigin)),n.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),((t.nodeName===Gr.CIRCLE||t.nodeName===Gr.ELLIPSE)&&(!(0,Lo.Z)(n.cx)||!(0,Lo.Z)(n.cy))||(t.nodeName===Gr.RECT||t.nodeName===Gr.IMAGE||t.nodeName===Gr.GROUP||t.nodeName===Gr.HTML||t.nodeName===Gr.TEXT||t.nodeName===Gr.MESH)&&(!(0,Lo.Z)(n.x)||!(0,Lo.Z)(n.y)||!(0,Lo.Z)(n.z))||t.nodeName===Gr.LINE&&(!(0,Lo.Z)(n.x1)||!(0,Lo.Z)(n.y1)||!(0,Lo.Z)(n.z1)||!(0,Lo.Z)(n.x2)||!(0,Lo.Z)(n.y2)||!(0,Lo.Z)(n.z2)))&&this.runtime.CSSPropertySyntaxFactory["<coordinate>"].postProcessor(t,s),(0,Lo.Z)(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(t,s),n.path&&this.runtime.CSSPropertySyntaxFactory["<path>"].postProcessor(t,s),n.points&&this.runtime.CSSPropertySyntaxFactory["<list-of-points>"].postProcessor(t,s),(0,Lo.Z)(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(t,s),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(t,s),h&&this.updateGeometry(t);return}var v=r.skipUpdateAttribute,y=r.skipParse,b=r.forceUpdateGeometry,T=r.usedAttributes,M=r.memoize,R=b,L=Object.keys(n);L.forEach(function(N){var z;v||(t.attributes[N]=n[N]),!R&&(!((z=Hv[N])===null||z===void 0)&&z.l)&&(R=!0)}),y||L.forEach(function(N){t.computedStyle[N]=i.parseProperty(N,t.attributes[N],t,M)}),T!=null&&T.length&&(L=Array.from(new Set(L.concat(T)))),L.forEach(function(N){N in t.computedStyle&&(t.parsedStyle[N]=i.computeProperty(N,t.computedStyle[N],t,M))}),R&&this.updateGeometry(t),L.forEach(function(N){N in t.parsedStyle&&i.postProcessProperty(N,t,L)}),this.runtime.enableCSSParsing&&t.children.length&&L.forEach(function(N){N in t.parsedStyle&&i.isPropertyInheritable(N)&&t.children.forEach(function(z){z.internalSetAttribute(N,null,{skipUpdateAttribute:!0,skipParse:!0})})})},e.prototype.parseProperty=function(t,n,r,i){var s=Hv[t],l=n;if((n===""||(0,Lo.Z)(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")l=fx(n);else if(s){var c=s.k,h=s.syntax,p=h&&this.getPropertySyntax(h);c&&c.indexOf(n)>-1?l=fx(n):p&&(!i&&p.parserUnmemoize?l=p.parserUnmemoize(n,r):p.parser&&(l=p.parser(n,r)))}return l},e.prototype.computeProperty=function(t,n,r,i){var s=Hv[t],l=r.id==="g-root",c=n;if(s){var h=s.syntax,p=s.inh,v=s.d;if(n instanceof Bf){var y=n.value;if(y==="unset"&&(p&&!l?y="inherit":y="initial"),y==="initial")(0,Lo.Z)(v)||(n=this.parseProperty(t,Wm(v)?v(r.nodeName):v,r,i));else if(y==="inherit"){var b=this.tryToResolveProperty(r,t,{inherited:!0});if((0,Lo.Z)(b)){this.addUnresolveProperty(r,t);return}else return b}}var T=h&&this.getPropertySyntax(h);if(T&&T.calculator){var M=r.parsedStyle[t];c=T.calculator(t,M,n,r,this.runtime)}else n instanceof Bf?c=n.value:c=n}return c},e.prototype.postProcessProperty=function(t,n,r){var i=Hv[t];if(i&&i.syntax){var s=i.syntax&&this.getPropertySyntax(i.syntax),l=s;l&&l.postProcessor&&l.postProcessor(n,r)}},e.prototype.addUnresolveProperty=function(t,n){var r=qg.get(t);r||(qg.set(t,[]),r=qg.get(t)),r.indexOf(n)===-1&&r.push(n)},e.prototype.tryToResolveProperty=function(t,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&t.parentElement&&HC(t.parentElement,n)){var s=t.parentElement.parsedStyle[n];return s==="unset"||s==="initial"||s==="inherit"?void 0:s}},e.prototype.recalc=function(t){var n=qg.get(t);if(n&&n.length){var r={};n.forEach(function(i){r[i]=t.attributes[i]}),this.processProperties(t,r),qg.delete(t)}},e.prototype.updateGeometry=function(t){var n=t.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=t.geometry;i.contentBounds||(i.contentBounds=new tu),i.renderBounds||(i.renderBounds=new tu);var s=t.parsedStyle,l=r.update(s,t),c=l.width,h=l.height,p=l.depth,v=p===void 0?0:p,y=l.offsetX,b=y===void 0?0:y,T=l.offsetY,M=T===void 0?0:T,R=l.offsetZ,L=R===void 0?0:R,N=[Math.abs(c)/2,Math.abs(h)/2,v/2],z=s,H=z.stroke,X=z.lineWidth,Y=z.increasedLineWidthForHitTesting,ne=z.shadowType,ve=z.shadowColor,Ee=z.filter,Ie=Ee===void 0?[]:Ee,Ye=z.transformOrigin,$e=s.anchor;n===Gr.TEXT?delete s.anchor:n===Gr.MESH&&(s.anchor[2]=.5);var St=[(1-($e&&$e[0]||0)*2)*c/2+b,(1-($e&&$e[1]||0)*2)*h/2+M,(1-($e&&$e[2]||0)*2)*N[2]+L];i.contentBounds.update(St,N);var Qe=n===Gr.POLYLINE||n===Gr.POLYGON||n===Gr.PATH?Math.SQRT2:.5,lt=H&&!H.isNone;if(lt){var ht=((X||0)+(Y||0))*Qe;N[0]+=ht,N[1]+=ht}if(i.renderBounds.update(St,N),ve&&ne&&ne!=="inner"){var bt=i.renderBounds,Ht=bt.min,Ot=bt.max,kt=s,Mn=kt.shadowBlur,Wn=kt.shadowOffsetX,cr=kt.shadowOffsetY,ar=Mn||0,Yr=Wn||0,Pi=cr||0,so=Ht[0]-ar+Yr,mi=Ot[0]+ar+Yr,ti=Ht[1]-ar+Pi,Do=Ot[1]+ar+Pi;Ht[0]=Math.min(Ht[0],so),Ot[0]=Math.max(Ot[0],mi),Ht[1]=Math.min(Ht[1],ti),Ot[1]=Math.max(Ot[1],Do),i.renderBounds.setMinMax(Ht,Ot)}Ie.forEach(function(Da){var us=Da.name,fl=Da.params;if(us==="blur"){var is=fl[0].value;i.renderBounds.update(i.renderBounds.center,oa(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[is,is,0]))}else if(us==="drop-shadow"){var Ts=fl[0].value,zu=fl[1].value,rf=fl[2].value,Cp=i.renderBounds,Uu=Cp.min,jc=Cp.max,as=Uu[0]-rf+Ts,Rs=jc[0]+rf+Ts,Ps=Uu[1]-rf+zu,ss=jc[1]+rf+zu;Uu[0]=Math.min(Uu[0],as),jc[0]=Math.max(jc[0],Rs),Uu[1]=Math.min(Uu[1],Ps),jc[1]=Math.max(jc[1],ss),i.renderBounds.setMinMax(Uu,jc)}}),$e=s.anchor;var uo=c<0,Ko=h<0,ga=(uo?-1:1)*(Ye?Yd(Ye[0],0,t):0),Pa=(Ko?-1:1)*(Ye?Yd(Ye[1],1,t):0);ga=ga-(uo?-1:1)*($e&&$e[0]||0)*i.contentBounds.halfExtents[0]*2,Pa=Pa-(Ko?-1:1)*($e&&$e[1]||0)*i.contentBounds.halfExtents[1]*2,t.setOrigin(ga,Pa),this.runtime.sceneGraphService.dirtifyToRoot(t)}},e.prototype.updateSizeAttenuation=function(t,n){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=t.style.rawLineWidth/n,t.nodeName===Gr.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=t.style.rawR/n)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===Gr.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))},e.prototype.isPropertyInheritable=function(t){var n=Hv[t];return n?n.inh:!1},e}(),GC=function(){function e(){this.parser=JE,this.parserUnmemoize=dx,this.parserWithCSSDisabled=null,this.mixer=vx}return e.prototype.calculator=function(t,n,r,i){return cd(r)},e}(),ZC=function(){function e(){}return e.prototype.calculator=function(t,n,r,i,s){return r instanceof Bf&&(r=null),s.sceneGraphService.updateDisplayObjectDependency(t,n,r,i),t==="clipPath"&&i.forEach(function(l){l.childNodes.length===0&&s.sceneGraphService.dirtifyToRoot(l)}),r},e}(),XC=function(){function e(){this.parser=uv,this.parserWithCSSDisabled=uv,this.mixer=xC}return e.prototype.calculator=function(t,n,r,i){return r instanceof Bf?r.value==="none"?hx:n_:r},e}(),YC=function(){function e(){this.parser=tS}return e.prototype.calculator=function(t,n,r){return r instanceof Bf?[]:r},e}();function mS(e){var t=e.parsedStyle.fontSize;return(0,Lo.Z)(t)?null:t}var Ox=function(){function e(){this.parser=Zm,this.parserUnmemoize=o_,this.parserWithCSSDisabled=null,this.mixer=vx}return e.prototype.calculator=function(t,n,r,i,s){var l;if((0,$u.Z)(r))return r;if(Nl.isRelativeUnit(r.unit)){var c=s.styleValueRegistry;if(r.unit===ao.kPercentage)return 0;if(r.unit===ao.kEms){if(i.parentNode){var h=mS(i.parentNode);if(h)return h*=r.value,h;c.addUnresolveProperty(i,t)}else c.addUnresolveProperty(i,t);return 0}else if(r.unit===ao.kRems){if(!((l=i==null?void 0:i.ownerDocument)===null||l===void 0)&&l.documentElement){var h=mS(i.ownerDocument.documentElement);if(h)return h*=r.value,h;c.addUnresolveProperty(i,t)}else c.addUnresolveProperty(i,t);return 0}}else return r.value},e}(),$C=function(){function e(){this.mixer=CC}return e.prototype.parser=function(t){var n=eS((0,$u.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),qC=function(){function e(){this.mixer=CC}return e.prototype.parser=function(t){var n=eS((0,$u.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),R1=jr.create();function Mx(e,t){var n=t.parsedStyle.defX||0,r=t.parsedStyle.defY||0;return t.resetLocalTransform(),t.setLocalPosition(n,r),e.forEach(function(i){var s=i.t,l=i.d;if(s==="scale"){var c=(l==null?void 0:l.map(function(z){return z.value}))||[1,1];t.scaleLocal(c[0],c[1],1)}else if(s==="scalex"){var c=(l==null?void 0:l.map(function(H){return H.value}))||[1];t.scaleLocal(c[0],1,1)}else if(s==="scaley"){var c=(l==null?void 0:l.map(function(H){return H.value}))||[1];t.scaleLocal(1,c[0],1)}else if(s==="scalez"){var c=(l==null?void 0:l.map(function(H){return H.value}))||[1];t.scaleLocal(1,1,c[0])}else if(s==="scale3d"){var c=(l==null?void 0:l.map(function(H){return H.value}))||[1,1,1];t.scaleLocal(c[0],c[1],c[2])}else if(s==="translate"){var h=l||[bf,bf];t.translateLocal(h[0].value,h[1].value,0)}else if(s==="translatex"){var h=l||[bf];t.translateLocal(h[0].value,0,0)}else if(s==="translatey"){var h=l||[bf];t.translateLocal(0,h[0].value,0)}else if(s==="translatez"){var h=l||[bf];t.translateLocal(0,0,h[0].value)}else if(s==="translate3d"){var h=l||[bf,bf,bf];t.translateLocal(h[0].value,h[1].value,h[2].value)}else if(s==="rotate"){var p=l||[Xd];t.rotateLocal(0,0,cd(p[0]))}else if(s==="rotatex"){var p=l||[Xd];t.rotateLocal(cd(p[0]),0,0)}else if(s==="rotatey"){var p=l||[Xd];t.rotateLocal(0,cd(p[0]),0)}else if(s==="rotatez"){var p=l||[Xd];t.rotateLocal(0,0,cd(p[0]))}else if(s!=="rotate3d")if(s==="skew"){var v=(l==null?void 0:l.map(function(z){return z.value}))||[0,0];t.setLocalSkew(Al(v[0]),Al(v[1]))}else if(s==="skewx"){var v=(l==null?void 0:l.map(function(H){return H.value}))||[0];t.setLocalSkew(Al(v[0]),t.getLocalSkew()[1])}else if(s==="skewy"){var v=(l==null?void 0:l.map(function(H){return H.value}))||[0];t.setLocalSkew(t.getLocalSkew()[0],Al(v[0]))}else if(s==="matrix"){var y=(0,ie.CR)(l.map(function(z){return z.value}),6),b=y[0],T=y[1],M=y[2],R=y[3],L=y[4],N=y[5];t.setLocalTransform(jr.set(R1,b,T,0,0,M,R,0,0,0,0,1,0,L+n,N+r,0,1))}else s==="matrix3d"&&(jr.set.apply(jr,(0,ie.ev)([R1],(0,ie.CR)(l.map(function(z){return z.value})),!1)),R1[12]+=n,R1[13]+=r,t.setLocalTransform(R1))}),t.getLocalTransform()}var Rx=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcessor=function(n,r){var i,s,l;switch(n.nodeName){case Gr.CIRCLE:case Gr.ELLIPSE:var c=n.parsedStyle,h=c.cx,p=c.cy,v=c.cz;(0,Lo.Z)(h)||(i=h),(0,Lo.Z)(p)||(s=p),(0,Lo.Z)(v)||(l=v);break;case Gr.LINE:var y=n.parsedStyle,b=y.x1,T=y.x2,M=y.y1,R=y.y2,L=Math.min(b,T),N=Math.min(M,R);i=L,s=N,l=0;break;case Gr.RECT:case Gr.IMAGE:case Gr.GROUP:case Gr.HTML:case Gr.TEXT:case Gr.MESH:(0,Lo.Z)(n.parsedStyle.x)||(i=n.parsedStyle.x),(0,Lo.Z)(n.parsedStyle.y)||(s=n.parsedStyle.y),(0,Lo.Z)(n.parsedStyle.z)||(l=n.parsedStyle.z);break}n.nodeName!==Gr.PATH&&n.nodeName!==Gr.POLYLINE&&n.nodeName!==Gr.POLYGON&&(n.parsedStyle.defX=i||0,n.parsedStyle.defY=s||0);var z=!(0,Lo.Z)(i)||!(0,Lo.Z)(s)||!(0,Lo.Z)(l);if(z&&r.indexOf("transform")===-1){var H=n.parsedStyle.transform;if(H&&H.length)Mx(H,n);else{var X=(0,ie.CR)(n.getLocalPosition(),3),Y=X[0],ne=X[1],ve=X[2];n.setLocalPosition((0,Lo.Z)(i)?Y:i,(0,Lo.Z)(s)?ne:s,(0,Lo.Z)(l)?ve:l)}}},t}(Ox),KC=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){r instanceof Bf&&(r=null);var s=r==null?void 0:r.cloneNode(!0);return s&&(s.style.isMarker=!0),s},e}(),QC=function(){function e(){this.mixer=vx,this.parser=jv,this.parserUnmemoize=a_,this.parserWithCSSDisabled=null}return e.prototype.calculator=function(t,n,r){return r.value},e}(),JC=function(){function e(){this.parser=jv,this.parserUnmemoize=a_,this.parserWithCSSDisabled=null,this.mixer=s_(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e.prototype.postProcessor=function(t){var n=t.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var s=r.nodeName;if(s===Gr.LINE||s===Gr.PATH||s===Gr.POLYLINE){var l=r.getPoint(i);l&&(t.parsedStyle.defX=l.x,t.parsedStyle.defY=l.y,t.setLocalPosition(l.x,l.y))}}},e}(),eO=function(){function e(){this.parser=jv,this.parserUnmemoize=a_,this.parserWithCSSDisabled=null,this.mixer=s_(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e}(),tO=function(){function e(){this.parser=l_,this.parserWithCSSDisabled=l_,this.mixer=C1}return e.prototype.calculator=function(t,n,r){return r instanceof Bf&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Wp(0,0,0,0)}:r},e.prototype.postProcessor=function(t,n){if(t.parsedStyle.defX=t.parsedStyle.path.rect.x,t.parsedStyle.defY=t.parsedStyle.path.rect.y,t.nodeName===Gr.PATH&&n.indexOf("transform")===-1){var r=t.parsedStyle,i=r.defX,s=i===void 0?0:i,l=r.defY,c=l===void 0?0:l;t.setLocalPosition(s,c)}},e}(),f_=function(){function e(){this.parser=cS,this.mixer=FC}return e.prototype.postProcessor=function(t,n){if((t.nodeName===Gr.POLYGON||t.nodeName===Gr.POLYLINE)&&n.indexOf("transform")===-1){var r=t.parsedStyle,i=r.defX,s=r.defY;t.setLocalPosition(i,s)}},e}(),h_=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.mixer=s_(0,1/0),n}return t}(Ox),nO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){return r instanceof Bf?r.value==="unset"?"":r.value:"".concat(r)},e.prototype.postProcessor=function(t){t.nodeValue="".concat(t.parsedStyle.text)||""},e}(),rO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){var s=i.getAttribute("text");if(s){var l=s;r.value==="capitalize"?l=s.charAt(0).toUpperCase()+s.slice(1):r.value==="lowercase"?l=s.toLowerCase():r.value==="uppercase"&&(l=s.toUpperCase()),i.parsedStyle.text=l}return r.value},e}(),Px={},gS=0;function iO(e,t){if(e){var n=typeof e=="string"?e:e.id||gS++;Px[n]&&Px[n].destroy(),Px[n]=t}}var d_=typeof window!="undefined"&&typeof window.document!="undefined";function oO(e){return!!e.getAttribute}function aO(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;yS(e[i],t)<0?n=i+1:r=i}return n}function yS(e,t){var n=Number(e.parsedStyle.zIndex),r=Number(t.parsedStyle.zIndex);if(n===r){var i=e.parentNode;if(i){var s=i.childNodes||[];return s.indexOf(e)-s.indexOf(t)}}return n-r}function _S(e){var t,n=e;do{var r=(t=n.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var bS="px";function sO(e,t,n){d_&&e.style&&(e.style.width=t+bS,e.style.height=n+bS)}function xS(e,t){if(d_)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function lO(e){var t=xS(e,"width");return t==="auto"?e.offsetWidth:parseFloat(t)}function uO(e){var t=xS(e,"height");return t==="auto"?e.offsetHeight:parseFloat(t)}var cO=1,fO={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Ix=typeof performance=="object"&&performance.now?performance:Date;function Kg(e,t,n){var r=!1,i=!1,s=!!t&&!t.isNone,l=!!n&&!n.isNone;return e==="visiblepainted"||e==="painted"||e==="auto"?(r=s,i=l):e==="visiblefill"||e==="fill"?r=!0:e==="visiblestroke"||e==="stroke"?i=!0:(e==="visible"||e==="all")&&(r=!0,i=!0),[r,i]}var hO=1,Lx=function(){return hO++},T0=typeof self=="object"&&self.self==self?self:typeof D.g=="object"&&D.g.global==D.g?D.g:{},dO=Date.now(),Xm=function(){return T0.performance&&typeof T0.performance.now=="function"?T0.performance.now():Date.now()-dO},p_={},ES=Date.now(),pO=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");var t=Date.now(),n=t-ES,r=n>16?0:16-n,i=Lx();return p_[i]=e,Object.keys(p_).length>1||setTimeout(function(){ES=t;var s=p_;p_={},Object.keys(s).forEach(function(l){return s[l](Xm())})},r),i},vO=function(e){delete p_[e]},SI=["","webkit","moz","ms","o"],SS=function(e){return typeof e!="string"?pO:e===""?T0.requestAnimationFrame:T0[e+"RequestAnimationFrame"]},mO=function(e){return typeof e!="string"?vO:e===""?T0.cancelAnimationFrame:T0[e+"CancelAnimationFrame"]||T0[e+"CancelRequestAnimationFrame"]},gO=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n=n+1}},wS=gO(SI,function(e){return!!SS(e)}),TS=SS(wS),AS=mO(wS);T0.requestAnimationFrame=TS,T0.cancelAnimationFrame=AS;var wI=function(){function e(){this.callbacks=[]}return e.prototype.getCallbacksNum=function(){return this.callbacks.length},e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t),!1))}))},e}(),yO=function(){function e(){this.callbacks=[]}return e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,ie.mG)(this,void 0,void 0,function(){var r,i,s,l;return(0,ie.Jh)(this,function(c){switch(c.label){case 0:return this.callbacks.length?[4,(l=this.callbacks)[0].apply(l,(0,ie.ev)([],(0,ie.CR)(t),!1))]:[3,6];case 1:r=c.sent(),i=0,c.label=2;case 2:return i<this.callbacks.length-1?(s=this.callbacks[i],[4,s(r)]):[3,5];case 3:r=c.sent(),c.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},e}(),dh=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){var t=arguments;this.callbacks.forEach(function(n){n.apply(void 0,t)})},e}(),Dx=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){if(this.callbacks.length){for(var t=arguments,n=this.callbacks[0].apply(void 0,t),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},e}(),_O=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],bO=/([\"\'])[^\'\"]+\1/;function CS(e){for(var t=e.fontSize,n=e.fontFamily,r=e.fontStyle,i=e.fontVariant,s=e.fontWeight,l=(0,$u.Z)(t)&&"".concat(t,"px")||"16px",c=n.split(","),h=c.length-1;h>=0;h--){var p=c[h].trim();!bO.test(p)&&_O.indexOf(p)<0&&(p='"'.concat(p,'"')),c[h]=p}return"".concat(r," ").concat(i," ").concat(s," ").concat(l," ").concat(c.join(","))}var xO=function(){function e(){this.parser=xx,this.parserUnmemoize=fS,this.parserWithCSSDisabled=fS,this.mixer=jC}return e.prototype.calculator=function(t,n,r,i){return r instanceof Bf?[]:r},e.prototype.postProcessor=function(t){var n=t.parsedStyle.transform;Mx(n,t)},e}(),EO=function(){function e(){this.parser=pS,this.parserUnmemoize=VC}return e}(),SO=function(){function e(){this.parser=jv,this.parserUnmemoize=a_}return e.prototype.calculator=function(t,n,r,i){return r.value},e.prototype.postProcessor=function(t){if(t.parentNode){var n=t.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=lv.Z_INDEX_CHANGED)}},e}(),wO=function(){function e(){}return e.prototype.update=function(t,n){var r=t.r,i=r*2,s=r*2;return{width:i,height:s}},e}(),TO=function(){function e(){}return e.prototype.update=function(t,n){var r=t.rx,i=t.ry,s=r*2,l=i*2;return{width:s,height:l}},e}(),AO=function(){function e(){}return e.prototype.update=function(t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=Math.min(n,i),c=Math.max(n,i),h=Math.min(r,s),p=Math.max(r,s),v=c-l,y=p-h;return{width:v,height:y}},e}(),CO=function(){function e(){}return e.prototype.update=function(t){var n=t.path,r=n.rect,i=r.width,s=r.height;return{width:i,height:s}},e}(),OO=function(){function e(){}return e.prototype.update=function(t){if(t.points&&Hr(t.points.points)){var n=t.points.points,r=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(p){return p[0]})),!1)),i=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(p){return p[0]})),!1)),s=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(p){return p[1]})),!1)),l=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(n.map(function(p){return p[1]})),!1)),c=i-r,h=l-s;return{width:c,height:h}}return{width:0,height:0}},e}(),TI=function(){function e(){}return e.prototype.update=function(t,n){var r=t.img,i=t.width,s=i===void 0?0:i,l=t.height,c=l===void 0?0:l,h=s,p=c;return r&&!Gl(r)&&(h||(h=r.width,t.width=h),p||(p=r.height,t.height=p)),{width:h,height:p}},e}(),MO=function(){function e(t){this.globalRuntime=t}return e.prototype.isReadyToMeasure=function(t,n){var r=t.text,i=t.textAlign,s=t.textBaseline,l=t.fontSize,c=t.fontStyle,h=t.fontWeight,p=t.fontVariant,v=t.lineWidth;return r&&l&&c&&h&&p&&i&&s&&!(0,Lo.Z)(v)},e.prototype.update=function(t,n){var r,i,s=t.text,l=t.textAlign,c=t.lineWidth,h=t.textBaseline,p=t.dx,v=t.dy;if(!this.isReadyToMeasure(t,n))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{width:0,height:0,x:0,y:0,offsetX:0,offsetY:0};var y=(((i=(r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,b=this.globalRuntime.textService.measureText(s,t,y);t.metrics=b;var T=b.width,M=b.height,R=b.lineHeight,L=b.fontProperties,N=[T/2,M/2,0],z=[0,1],H=0;l==="center"||l==="middle"?(H=c/2,z=[.5,1]):(l==="right"||l==="end")&&(H=c,z=[1,1]);var X=0;return h==="middle"?X=N[1]:h==="top"||h==="hanging"?X=N[1]*2:h==="alphabetic"?X=this.globalRuntime.enableCSSParsing?R-L.ascent:0:(h==="bottom"||h==="ideographic")&&(X=0),p&&(H+=p),v&&(X+=v),t.anchor=[z[0],z[1],0],{width:N[0]*2,height:N[1]*2,offsetX:H,offsetY:X}},e}();function RO(e){return!!e.type}var Qg=function(){function e(t){this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Sc,this.page=new Sc,this.canvas=new Sc,this.viewport=new Sc,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(e.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},e.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.initEvent=function(){},e.prototype.initUIEvent=function(){},e.prototype.clone=function(){throw new Error(Ta)},e}(),OS=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.client=new Sc,n.movement=new Sc,n.offset=new Sc,n.global=new Sc,n.screen=new Sc,n}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),t.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},t.prototype.initMouseEvent=function(){throw new Error(Ta)},t}(Qg),Nx=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return t.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},t.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},t.prototype.clone=function(){return this.manager.clonePointerEvent(this)},t}(OS),Fx=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},t}(OS),Yl=function(e){(0,ie.ZT)(t,e);function t(n,r){var i=e.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return t}(Qg),MS=":",RS=function(){function e(){this.emitter=new Ma}return e.prototype.on=function(t,n,r){return this.addEventListener(t,n,r),this},e.prototype.addEventListener=function(t,n,r){var i=Iu(r)&&r||za(r)&&r.capture,s=za(r)&&r.once,l=Wm(n)?void 0:n,c=!1,h="";if(t.indexOf(MS)>-1){var p=(0,ie.CR)(t.split(MS),2),v=p[0],y=p[1];t=y,h=v,c=!0}if(t=i?"".concat(t,"capture"):t,n=Wm(n)?n:n.handleEvent,c){var b=n;n=function(){for(var T,M=[],R=0;R<arguments.length;R++)M[R]=arguments[R];((T=M[0].target)===null||T===void 0?void 0:T.name)===h&&b.apply(void 0,(0,ie.ev)([],(0,ie.CR)(M),!1))}}return s?this.emitter.once(t,n,l):this.emitter.on(t,n,l),this},e.prototype.off=function(t,n,r){return t?this.removeEventListener(t,n,r):this.removeAllEventListeners(),this},e.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},e.prototype.removeEventListener=function(t,n,r){var i=Iu(r)&&r||za(r)&&r.capture,s=Wm(n)?void 0:n;return t=i?"".concat(t,"capture"):t,n=Wm(n)?n:n==null?void 0:n.handleEvent,this.emitter.off(t,n,s),this},e.prototype.emit=function(t,n){this.dispatchEvent(new Yl(t,n))},e.prototype.dispatchEvent=function(t,n){var r,i;if(n===void 0&&(n=!1),!RO(t))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var s;if(this.document?s=this:this.defaultView?s=this.defaultView:s=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,s){if(t.manager=s.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],n||(t.target=this),(i=t.manager)===null||i===void 0||i.dispatchEvent(t,t.type,n)}return!t.defaultPrevented},e}(),Nc=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return t.isNode=function(n){return!!n.childNodes},Object.defineProperty(t.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===Gr.TEXT&&(i+=this.style.text);try{for(var s=(0,ie.XA)(this.childNodes),l=s.next();!l.done;l=s.next()){var c=l.value;c.nodeName===Gr.TEXT?i+=c.nodeValue:i+=c.textContent}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===Gr.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),t.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},t.prototype.hasChildNodes=function(){return this.childNodes.length>0},t.prototype.isDefaultNamespace=function(n){throw new Error(Ta)},t.prototype.lookupNamespaceURI=function(n){throw new Error(Ta)},t.prototype.lookupPrefix=function(n){throw new Error(Ta)},t.prototype.normalize=function(){throw new Error(Ta)},t.prototype.isEqualNode=function(n){return this===n},t.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),t.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,s=this,l=[i],c=[s];(r=i.parentNode)!==null&&r!==void 0?r:s.parentNode;)i=i.parentNode?(l.push(i.parentNode),i.parentNode):i,s=s.parentNode?(c.push(s.parentNode),s.parentNode):s;if(i!==s)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var h=l.length>c.length?l:c,p=h===l?c:l;if(h[h.length-p.length]===p[0])return h===l?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var v=h.length-p.length,y=p.length-1;y>=0;y--){var b=p[y],T=h[v+y];if(T!==b){var M=b.parentNode.childNodes;return M.indexOf(b)<M.indexOf(T)?p===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:h===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING},t.prototype.contain=function(n){return this.contains(n)},t.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},t.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},t.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(RS),PO=2048,IO=function(){function e(t,n){var r=this;this.globalRuntime=t,this.context=n,this.emitter=new Ma,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=jr.create(),this.tmpVec3=Hn.Ue(),this.onPointerDown=function(i){var s=r.createPointerEvent(i);if(r.dispatchEvent(s,"pointerdown"),s.pointerType==="touch")r.dispatchEvent(s,"touchstart");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;r.dispatchEvent(s,l?"rightdown":"mousedown")}var c=r.trackingData(i.pointerId);c.pressTargetsByButton[i.button]=s.composedPath(),r.freeEvent(s)},this.onPointerUp=function(i){var s,l=Ix.now(),c=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(c,"pointerup"),c.pointerType==="touch")r.dispatchEvent(c,"touchend");else if(c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;r.dispatchEvent(c,h?"rightup":"mouseup")}var p=r.trackingData(i.pointerId),v=r.findMountedTarget(p.pressTargetsByButton[i.button]),y=v;if(v&&!c.composedPath().includes(v)){for(var b=v;b&&!c.composedPath().includes(b);){if(c.currentTarget=b,r.notifyTarget(c,"pointerupoutside"),c.pointerType==="touch")r.notifyTarget(c,"touchendoutside");else if(c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;r.notifyTarget(c,h?"rightupoutside":"mouseupoutside")}Nc.isNode(b)&&(b=b.parentNode)}delete p.pressTargetsByButton[i.button],y=b}if(y){var T=r.clonePointerEvent(c,"click");T.target=y,T.path=[],p.clicksByButton[i.button]||(p.clicksByButton[i.button]={clickCount:0,target:T.target,timeStamp:l});var M=p.clicksByButton[i.button];M.target===T.target&&l-M.timeStamp<200?++M.clickCount:M.clickCount=1,M.target=T.target,M.timeStamp=l,T.detail=M.clickCount,!((s=c.detail)===null||s===void 0)&&s.preventClick||(!r.context.config.useNativeClickEvent&&(T.pointerType==="mouse"||T.pointerType==="touch")&&r.dispatchEvent(T,"click"),r.dispatchEvent(T,"pointertap")),r.freeEvent(T)}r.freeEvent(c)},this.onPointerMove=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),l=s.pointerType==="mouse"||s.pointerType==="pen",c=r.trackingData(i.pointerId),h=r.findMountedTarget(c.overTargets);if(c.overTargets&&h!==s.target){var p=i.type==="mousemove"?"mouseout":"pointerout",v=r.createPointerEvent(i,p,h||void 0);if(r.dispatchEvent(v,"pointerout"),l&&r.dispatchEvent(v,"mouseout"),!s.composedPath().includes(h)){var y=r.createPointerEvent(i,"pointerleave",h||void 0);for(y.eventPhase=y.AT_TARGET;y.target&&!s.composedPath().includes(y.target);)y.currentTarget=y.target,r.notifyTarget(y),l&&r.notifyTarget(y,"mouseleave"),Nc.isNode(y.target)&&(y.target=y.target.parentNode);r.freeEvent(y)}r.freeEvent(v)}if(h!==s.target){var b=i.type==="mousemove"?"mouseover":"pointerover",T=r.clonePointerEvent(s,b);r.dispatchEvent(T,"pointerover"),l&&r.dispatchEvent(T,"mouseover");for(var M=h&&Nc.isNode(h)&&h.parentNode;M&&M!==(Nc.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&M!==s.target;)M=M.parentNode;var R=!M||M===(Nc.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(R){var L=r.clonePointerEvent(s,"pointerenter");for(L.eventPhase=L.AT_TARGET;L.target&&L.target!==h&&L.target!==(Nc.isNode(r.rootTarget)&&r.rootTarget.parentNode);)L.currentTarget=L.target,r.notifyTarget(L),l&&r.notifyTarget(L,"mouseenter"),Nc.isNode(L.target)&&(L.target=L.target.parentNode);r.freeEvent(L)}r.freeEvent(T)}r.dispatchEvent(s,"pointermove"),s.pointerType==="touch"&&r.dispatchEvent(s,"touchmove"),l&&(r.dispatchEvent(s,"mousemove"),r.cursor=r.getCursor(s.target)),c.overTargets=s.composedPath(),r.freeEvent(s)},this.onPointerOut=function(i){var s=r.trackingData(i.pointerId);if(s.overTargets){var l=i.pointerType==="mouse"||i.pointerType==="pen",c=r.findMountedTarget(s.overTargets),h=r.createPointerEvent(i,"pointerout",c||void 0);r.dispatchEvent(h),l&&r.dispatchEvent(h,"mouseout");var p=r.createPointerEvent(i,"pointerleave",c||void 0);for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==(Nc.isNode(r.rootTarget)&&r.rootTarget.parentNode);)p.currentTarget=p.target,r.notifyTarget(p),l&&r.notifyTarget(p,"mouseleave"),Nc.isNode(p.target)&&(p.target=p.target.parentNode);s.overTargets=null,r.freeEvent(h),r.freeEvent(p)}r.cursor=null},this.onPointerOver=function(i){var s=r.trackingData(i.pointerId),l=r.createPointerEvent(i),c=l.pointerType==="mouse"||l.pointerType==="pen";r.dispatchEvent(l,"pointerover"),c&&r.dispatchEvent(l,"mouseover"),l.pointerType==="mouse"&&(r.cursor=r.getCursor(l.target));var h=r.clonePointerEvent(l,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==(Nc.isNode(r.rootTarget)&&r.rootTarget.parentNode);)h.currentTarget=h.target,r.notifyTarget(h),c&&r.notifyTarget(h,"mouseenter"),Nc.isNode(h.target)&&(h.target=h.target.parentNode);s.overTargets=l.composedPath(),r.freeEvent(l),r.freeEvent(h)},this.onPointerUpOutside=function(i){var s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.pressTargetsByButton[i.button]),c=r.createPointerEvent(i);if(l){for(var h=l;h;)c.currentTarget=h,r.notifyTarget(c,"pointerupoutside"),c.pointerType==="touch"||(c.pointerType==="mouse"||c.pointerType==="pen")&&r.notifyTarget(c,c.button===2?"rightupoutside":"mouseupoutside"),Nc.isNode(h)&&(h=h.parentNode);delete s.pressTargetsByButton[i.button]}r.freeEvent(c)},this.onWheel=function(i){var s=r.createWheelEvent(i);r.dispatchEvent(s),r.freeEvent(s)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var s=r.createPointerEvent(i);r.dispatchEvent(s),r.freeEvent(s)}},this.onPointerCancel=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(s),r.freeEvent(s)}}return e.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},e.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},e.prototype.client2Viewport=function(t){var n=this.context.contextService.getBoundingClientRect();return new Sc(t.x-((n==null?void 0:n.left)||0),t.y-((n==null?void 0:n.top)||0))},e.prototype.viewport2Client=function(t){var n=this.context.contextService.getBoundingClientRect();return new Sc(t.x+((n==null?void 0:n.left)||0),t.y+((n==null?void 0:n.top)||0))},e.prototype.viewport2Canvas=function(t){var n=t.x,r=t.y,i=this.rootTarget.defaultView,s=i.getCamera(),l=this.context.config,c=l.width,h=l.height,p=s.getPerspectiveInverse(),v=s.getWorldTransform(),y=jr.multiply(this.tmpMatrix,v,p),b=Hn.t8(this.tmpVec3,n/c*2-1,(1-r/h)*2-1,0);return Hn.fF(b,b,y),new Sc(b[0],b[1])},e.prototype.canvas2Viewport=function(t){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),s=r.getViewTransform(),l=jr.multiply(this.tmpMatrix,i,s),c=Hn.t8(this.tmpVec3,t.x,t.y,0);Hn.fF(this.tmpVec3,this.tmpVec3,l);var h=this.context.config,p=h.width,v=h.height;return new Sc((c[0]+1)/2*p,(1-(c[1]+1)/2)*v)},e.prototype.setPickHandler=function(t){this.pickHandler=t},e.prototype.addEventMapping=function(t,n){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:n,priority:0}),this.mappingTable[t].sort(function(r,i){return r.priority-i.priority})},e.prototype.mapEvent=function(t){if(this.rootTarget){var n=this.mappingTable[t.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}},e.prototype.dispatchEvent=function(t,n,r){if(!r)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,n);else{t.eventPhase=t.AT_TARGET;var i=this.rootTarget.defaultView||null;t.currentTarget=i,this.notifyListeners(t,n)}this.emitter.emit(n||t.type,t)},e.prototype.propagate=function(t,n){if(t.target){var r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,n),!(t.propagationStopped||t.propagationImmediatelyStopped)){var s=r.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var i=s+1;i<r.length;i++)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return}}},e.prototype.propagationPath=function(t){var n=[t],r=this.rootTarget.defaultView||null;if(r&&r===t)return n.unshift(r.document),n;for(var i=0;i<PO&&t!==this.rootTarget;i++)Nc.isNode(t)&&t.parentNode&&(n.push(t.parentNode),t=t.parentNode);return r&&n.push(r),n},e.prototype.hitTest=function(t){var n=t.viewportX,r=t.viewportY,i=this.context.config,s=i.width,l=i.height,c=i.disableHitTesting;return n<0||r<0||n>s||r>l?null:!c&&this.pickHandler(t)||this.rootTarget||null},e.prototype.isNativeEventFromCanvas=function(t,n){var r=n==null?void 0:n.target;if(r!=null&&r.shadowRoot&&(r=n.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return n!=null&&n.composedPath?n.composedPath().indexOf(t)>-1:!1},e.prototype.getExistedHTML=function(t){var n,r;if(t.nativeEvent.composedPath)try{for(var i=(0,ie.XA)(t.nativeEvent.composedPath()),s=i.next();!s.done;s=i.next()){var l=s.value,c=this.nativeHTMLMap.get(l);if(c)return c}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},e.prototype.pickTarget=function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})},e.prototype.createPointerEvent=function(t,n,r,i){var s=this.allocateEvent(Nx);this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t;var l=this.getExistedHTML(s),c=this.context.contextService.getDomElement();return s.target=r!=null?r:l||this.isNativeEventFromCanvas(c,s.nativeEvent)&&this.pickTarget(s)||i,typeof n=="string"&&(s.type=n),s},e.prototype.createWheelEvent=function(t){var n=this.allocateEvent(Fx);this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t;var r=this.getExistedHTML(n),i=this.context.contextService.getDomElement();return n.target=r||this.isNativeEventFromCanvas(i,n.nativeEvent)&&this.pickTarget(n),n},e.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.prototype.cloneWheelEvent=function(t){var n=this.allocateEvent(Fx);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=t.type,n},e.prototype.clonePointerEvent=function(t,n){var r=this.allocateEvent(Nx);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=n!=null?n:r.type,r},e.prototype.copyPointerData=function(t,n){n.pointerId=t.pointerId,n.width=t.width,n.height=t.height,n.isPrimary=t.isPrimary,n.pointerType=t.pointerType,n.pressure=t.pressure,n.tangentialPressure=t.tangentialPressure,n.tiltX=t.tiltX,n.tiltY=t.tiltY,n.twist=t.twist},e.prototype.copyMouseData=function(t,n){n.altKey=t.altKey,n.button=t.button,n.buttons=t.buttons,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.client.copyFrom(t.client),n.movement.copyFrom(t.movement),n.canvas.copyFrom(t.canvas),n.screen.copyFrom(t.screen),n.global.copyFrom(t.global),n.offset.copyFrom(t.offset)},e.prototype.copyWheelData=function(t,n){n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ},e.prototype.copyData=function(t,n){n.isTrusted=t.isTrusted,n.timeStamp=Ix.now(),n.type=t.type,n.detail=t.detail,n.view=t.view,n.page.copyFrom(t.page),n.viewport.copyFrom(t.viewport)},e.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var n=this.eventPool.get(t).pop()||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},e.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(t)},e.prototype.notifyTarget=function(t,n){n=n!=null?n:t.type;var r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,n)},e.prototype.notifyListeners=function(t,n){var r=t.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(t.currentTarget||i.context,t);else for(var s=0;s<i.length&&!t.propagationImmediatelyStopped;s++)i[s].once&&r.removeListener(n,i[s].fn,void 0,!0),i[s].fn.call(t.currentTarget||i[s].context,t)},e.prototype.findMountedTarget=function(t){if(!t)return null;for(var n=t[t.length-1],r=t.length-2;r>=0;r--){var i=t[r];if(i===this.rootTarget||Nc.isNode(i)&&i.parentNode===n)n=t[r];else break}return n},e.prototype.getCursor=function(t){for(var n=t;n;){var r=oO(n)&&n.getAttribute("cursor");if(r)return r;n=Nc.isNode(n)&&n.parentNode}},e}(),LO=function(){function e(){}return e.prototype.getOrCreateCanvas=function(t,n){if(this.canvas)return this.canvas;if(t||Kr.offscreenCanvas)this.canvas=t||Kr.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,ie.pi)({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,ie.pi)({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,ie.pi)({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},e.prototype.getOrCreateContext=function(t,n){return this.context?this.context:(this.getOrCreateCanvas(t,n),this.context)},e}(),Wv;(function(e){e[e.CAMERA_CHANGED=0]="CAMERA_CHANGED",e[e.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",e[e.NONE=2]="NONE"})(Wv||(Wv={}));var AI=function(){function e(t,n){this.globalRuntime=t,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new dh,initAsync:new wI,dirtycheck:new Dx,cull:new Dx,beginFrame:new dh,beforeRender:new dh,render:new dh,afterRender:new dh,endFrame:new dh,destroy:new dh,pick:new yO,pickSync:new Dx,pointerDown:new dh,pointerUp:new dh,pointerMove:new dh,pointerOut:new dh,pointerOver:new dh,pointerWheel:new dh,pointerCancel:new dh,click:new dh}}return e.prototype.init=function(t){var n=this,r=(0,ie.pi)((0,ie.pi)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){n.inited=!0,t()})},e.prototype.getStats=function(){return this.stats},e.prototype.disableDirtyRectangleRendering=function(){var t=this.context.config.renderer,n=t.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(Wv.CAMERA_CHANGED)},e.prototype.render=function(t,n){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var s=i.renderReasons.size===1&&i.renderReasons.has(Wv.CAMERA_CHANGED),l=!t.disableRenderHooks||!(t.disableRenderHooks&&s);l&&this.renderDisplayObject(i.root,t,i),this.hooks.beginFrame.call(),l&&i.renderListCurrentFrame.forEach(function(c){r.hooks.beforeRender.call(c),r.hooks.render.call(c),r.hooks.afterRender.call(c)}),this.hooks.endFrame.call(),i.renderListCurrentFrame=[],i.renderReasons.clear(),n()}},e.prototype.renderDisplayObject=function(t,n,r){var i=this,s=n.renderer.getConfig(),l=s.enableDirtyCheck,c=s.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(t);var h=t.renderable,p=l?h.dirty||r.dirtyRectangleRenderingDisabled?t:null:t;if(p){var v=c?this.hooks.cull.call(p,this.context.camera):p;v&&(this.stats.rendered++,r.renderListCurrentFrame.push(v))}t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var y=t.sortable;y.dirty&&(this.sort(t,y),y.dirty=!1,y.dirtyChildren=[],y.dirtyReason=void 0),(y.sorted||t.childNodes).forEach(function(b){i.renderDisplayObject(b,n,r)})},e.prototype.sort=function(t,n){n.sorted&&n.dirtyReason!==lv.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=t.childNodes.indexOf(r);if(i===-1){var s=n.sorted.indexOf(r);s>=0&&n.sorted.splice(s,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var l=aO(n.sorted,r);n.sorted.splice(l,0,r)}}):n.sorted=t.childNodes.slice().sort(yS)},e.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},e.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(Wv.DISPLAY_OBJECT_CHANGED)},e}(),CI=/\[\s*(.*)=(.*)\s*\]/,DO=function(){function e(){}return e.prototype.selectOne=function(t,n){var r=this;if(t.startsWith("."))return n.find(function(c){return((c==null?void 0:c.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.find(function(c){return c.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.find(function(c){return n!==c&&(s==="name"?c.name===l:r.attributeToString(c,s)===l)}):null}else return n.find(function(c){return n!==c&&c.nodeName===t})},e.prototype.selectAll=function(t,n){var r=this;if(t.startsWith("."))return n.findAll(function(c){return n!==c&&((c==null?void 0:c.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.findAll(function(c){return n!==c&&c.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.findAll(function(c){return n!==c&&(s==="name"?c.name===l:r.attributeToString(c,s)===l)}):[]}else return n.findAll(function(c){return n!==c&&c.nodeName===t})},e.prototype.is=function(t,n){if(t.startsWith("."))return n.className===this.getIdOrClassname(t);if(t.startsWith("#"))return n.id===this.getIdOrClassname(t);if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,s=r.value;return i==="name"?n.name===s:this.attributeToString(n,i)===s}else return n.nodeName===t},e.prototype.getIdOrClassname=function(t){return t.substring(1)},e.prototype.getAttribute=function(t){var n=t.match(CI),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},e.prototype.attributeToString=function(t,n){if(!t.getAttribute)return"";var r=t.getAttribute(n);return(0,Lo.Z)(r)?"":r.toString?r.toString():""},e}(),Gv=function(e){(0,ie.ZT)(t,e);function t(n,r,i,s,l,c,h,p){var v=e.call(this,null)||this;return v.relatedNode=r,v.prevValue=i,v.newValue=s,v.attrName=l,v.attrChange=c,v.prevParsedValue=h,v.newParsedValue=p,v.type=n,v}return t.ADDITION=2,t.MODIFICATION=1,t.REMOVAL=3,t}(Qg),Ga;(function(e){e.REPARENT="reparent",e.DESTROY="destroy",e.ATTR_MODIFIED="DOMAttrModified",e.INSERTED="DOMNodeInserted",e.REMOVED="removed",e.MOUNTED="DOMNodeInsertedIntoDocument",e.UNMOUNTED="DOMNodeRemovedFromDocument",e.BOUNDS_CHANGED="bounds-changed",e.CULLED="culled"})(Ga||(Ga={}));function PS(e){var t=e.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0)}var NO=new Gv(Ga.REPARENT,null,"","","",0,"",""),FO=function(){function e(t){var n=this;this.runtime=t,this.pendingEvents=[],this.boundsChangedEvent=new Yl(Ga.BOUNDS_CHANGED),this.rotate=function(){var r=on();return function(i,s,l,c){l===void 0&&(l=0),c===void 0&&(c=0),typeof s=="number"&&(s=Hn.al(s,l,c));var h=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,s);else{var p=on();qc(p,s[0],s[1],s[2]);var v=n.getRotation(i),y=n.getRotation(i.parentNode);Rm(r,y),Wl(r,r),Dr(p,r,p),Dr(h.localRotation,p,v),Lm(h.localRotation,h.localRotation),n.dirtifyLocal(i,h)}}}(),this.rotateLocal=function(){var r=on();return function(i,s,l,c){l===void 0&&(l=0),c===void 0&&(c=0),typeof s=="number"&&(s=Hn.al(s,l,c));var h=i.transformable;qc(r,s[0],s[1],s[2]),Pm(h.localRotation,h.localRotation,r),n.dirtifyLocal(i,h)}}(),this.setEulerAngles=function(){var r=on();return function(i,s,l,c){l===void 0&&(l=0),c===void 0&&(c=0),typeof s=="number"&&(s=Hn.al(s,l,c));var h=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,s);else{qc(h.localRotation,s[0],s[1],s[2]);var p=n.getRotation(i.parentNode);Rm(r,Wl(on(),p)),Pm(h.localRotation,h.localRotation,r),n.dirtifyLocal(i,h)}}}(),this.translateLocal=function(){return function(r,i,s,l){s===void 0&&(s=0),l===void 0&&(l=0),typeof i=="number"&&(i=Hn.al(i,s,l));var c=r.transformable;Hn.fS(i,Hn.Ue())||(Hn.VC(i,i,c.localRotation),Hn.IH(c.localPosition,c.localPosition,i),n.dirtifyLocal(r,c))}}(),this.setPosition=function(){var r=jr.create(),i=Hn.Ue();return function(s,l){var c=s.transformable;if(i[0]=l[0],i[1]=l[1],i[2]=l[2]||0,!Hn.fS(n.getPosition(s),i)){if(Hn.JG(c.position,i),s.parentNode===null||!s.parentNode.transformable)Hn.JG(c.localPosition,i);else{var h=s.parentNode.transformable;jr.copy(r,h.worldTransform),jr.invert(r,r),Hn.fF(c.localPosition,i,r)}n.dirtifyLocal(s,c)}}}(),this.setLocalPosition=function(){var r=Hn.Ue();return function(i,s){var l=i.transformable;r[0]=s[0],r[1]=s[1],r[2]=s[2]||0,!Hn.fS(l.localPosition,r)&&(Hn.JG(l.localPosition,r),n.dirtifyLocal(i,l))}}(),this.translate=function(){var r=Hn.Ue(),i=Hn.Ue(),s=Hn.Ue();return function(l,c,h,p){h===void 0&&(h=0),p===void 0&&(p=0),typeof c=="number"&&(c=Hn.t8(i,c,h,p)),!Hn.fS(c,r)&&(Hn.IH(s,n.getPosition(l),c),n.setPosition(l,s))}}(),this.setRotation=function(){var r=on();return function(i,s,l,c,h){var p=i.transformable;if(typeof s=="number"&&(s=d0(s,l,c,h)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,s);else{var v=n.getRotation(i.parentNode);Rm(r,v),Wl(r,r),Dr(p.localRotation,r,s),Lm(p.localRotation,p.localRotation),n.dirtifyLocal(i,p)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=jr.create(),i=Hn.Ue(),s=d0(0,0,0,1);return function(l){var c=l.localSkew[0]!==0||l.localSkew[1]!==0;if(c){if(jr.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,Hn.al(1,1,1),l.origin),l.localSkew[0]!==0||l.localSkew[1]!==0){var h=jr.identity(r);h[4]=Math.tan(l.localSkew[0]),h[1]=Math.tan(l.localSkew[1]),jr.multiply(l.localTransform,l.localTransform,h)}var p=jr.fromRotationTranslationScaleOrigin(r,s,i,l.localScale,l.origin);jr.multiply(l.localTransform,l.localTransform,p)}else jr.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,l.localScale,l.origin)}}()}return e.prototype.matches=function(t,n){return this.runtime.sceneGraphSelector.is(t,n)},e.prototype.querySelector=function(t,n){return this.runtime.sceneGraphSelector.selectOne(t,n)},e.prototype.querySelectorAll=function(t,n){return this.runtime.sceneGraphSelector.selectAll(t,n)},e.prototype.attach=function(t,n,r){var i,s,l=!1;t.parentNode&&(l=t.parentNode!==n,this.detach(t)),t.parentNode=n,(0,Lo.Z)(r)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(r,0,t);var c=n.sortable;(!((i=c==null?void 0:c.sorted)===null||i===void 0)&&i.length||!((s=t.style)===null||s===void 0)&&s.zIndex)&&(c.dirtyChildren.indexOf(t)===-1&&c.dirtyChildren.push(t),c.dirty=!0,c.dirtyReason=lv.ADDED);var h=t.transformable;h&&this.dirtifyWorld(t,h),h.frozen&&this.unfreezeParentToRoot(t),l&&t.dispatchEvent(NO)},e.prototype.detach=function(t){var n,r;if(t.parentNode){var i=t.transformable,s=t.parentNode.sortable;(!((n=s==null?void 0:s.sorted)===null||n===void 0)&&n.length||!((r=t.style)===null||r===void 0)&&r.zIndex)&&(s.dirtyChildren.indexOf(t)===-1&&s.dirtyChildren.push(t),s.dirty=!0,s.dirtyReason=lv.REMOVED);var l=t.parentNode.childNodes.indexOf(t);l>-1&&t.parentNode.childNodes.splice(l,1),i&&this.dirtifyWorld(t,i),t.parentNode=null}},e.prototype.getOrigin=function(t){return t.transformable.origin},e.prototype.setOrigin=function(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var s=t.transformable;if(!(n[0]===s.origin[0]&&n[1]===s.origin[1]&&n[2]===s.origin[2])){var l=s.origin;l[0]=n[0],l[1]=n[1],l[2]=n[2]||0,this.dirtifyLocal(t,s)}},e.prototype.setLocalEulerAngles=function(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=Hn.al(n,r,i));var s=t.transformable;qc(s.localRotation,n[0],n[1],n[2]),this.dirtifyLocal(t,s)},e.prototype.scaleLocal=function(t,n){var r=t.transformable;Hn.Jp(r.localScale,r.localScale,Hn.al(n[0],n[1],n[2]||1)),this.dirtifyLocal(t,r)},e.prototype.setLocalScale=function(t,n){var r=t.transformable,i=Hn.al(n[0],n[1],n[2]||r.localScale[2]);Hn.fS(i,r.localScale)||(Hn.JG(r.localScale,i),this.dirtifyLocal(t,r))},e.prototype.setLocalRotation=function(t,n,r,i,s){typeof n=="number"&&(n=d0(n,r,i,s));var l=t.transformable;Rm(l.localRotation,n),this.dirtifyLocal(t,l)},e.prototype.setLocalSkew=function(t,n,r){typeof n=="number"&&(n=hp.al(n,r));var i=t.transformable;hp.JG(i.localSkew,n),this.dirtifyLocal(t,i)},e.prototype.dirtifyLocal=function(t,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(t,n))},e.prototype.dirtifyWorld=function(t,n){n.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,n),this.dirtifyToRoot(t,!0)},e.prototype.triggerPendingEvents=function(){var t=this,n=new Set,r=function(i,s){i.isConnected&&!n.has(i.entity)&&(t.boundsChangedEvent.detail=s,t.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(t.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var s=(0,ie.CR)(i,2),l=s[0],c=s[1];c.affectChildren?l.forEach(function(h){r(h,c)}):r(l,c)}),this.clearPendingEvents(),n.clear()},e.prototype.clearPendingEvents=function(){this.pendingEvents=[]},e.prototype.dirtifyToRoot=function(t,n){n===void 0&&(n=!1);var r=t;for(r.renderable&&(r.renderable.dirty=!0);r;)PS(r),r=r.parentNode;n&&t.forEach(function(i){PS(i)}),this.informDependentDisplayObjects(t),this.pendingEvents.push([t,{affectChildren:n}])},e.prototype.updateDisplayObjectDependency=function(t,n,r,i){if(n&&n!==r){var s=this.displayObjectDependencyMap.get(n);if(s&&s[t]){var l=s[t].indexOf(i);s[t].splice(l,1)}}if(r){var c=this.displayObjectDependencyMap.get(r);c||(this.displayObjectDependencyMap.set(r,{}),c=this.displayObjectDependencyMap.get(r)),c[t]||(c[t]=[]),c[t].push(i)}},e.prototype.informDependentDisplayObjects=function(t){var n=this,r=this.displayObjectDependencyMap.get(t);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(s){n.dirtifyToRoot(s,!0),s.dispatchEvent(new Gv(Ga.ATTR_MODIFIED,s,n,n,i,Gv.MODIFICATION,n,n)),s.isCustomElement&&s.isConnected&&s.attributeChangedCallback&&s.attributeChangedCallback(i,n,n)})})},e.prototype.getPosition=function(t){var n=t.transformable;return jr.getTranslation(n.position,this.getWorldTransform(t,n))},e.prototype.getRotation=function(t){var n=t.transformable;return jr.getRotation(n.rotation,this.getWorldTransform(t,n))},e.prototype.getScale=function(t){var n=t.transformable;return jr.getScaling(n.scaling,this.getWorldTransform(t,n))},e.prototype.getWorldTransform=function(t,n){return n===void 0&&(n=t.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,n)),n.worldTransform},e.prototype.getLocalPosition=function(t){return t.transformable.localPosition},e.prototype.getLocalRotation=function(t){return t.transformable.localRotation},e.prototype.getLocalScale=function(t){return t.transformable.localScale},e.prototype.getLocalSkew=function(t){return t.transformable.localSkew},e.prototype.getLocalTransform=function(t){var n=t.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},e.prototype.setLocalTransform=function(t,n){var r=jr.getTranslation(Hn.Ue(),n),i=jr.getRotation(on(),n),s=jr.getScaling(Hn.Ue(),n);this.setLocalScale(t,s),this.setLocalPosition(t,r),this.setLocalRotation(t,i)},e.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},e.prototype.getTransformedGeometryBounds=function(t,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(t,n);if(tu.isEmpty(i))return null;var s=r||new tu;return s.setFromTransformedAABB(i,this.getWorldTransform(t)),s},e.prototype.getGeometryBounds=function(t,n){n===void 0&&(n=!1);var r=t.geometry,i=n?r.renderBounds:r.contentBounds||null;return i||new tu},e.prototype.getBounds=function(t,n){var r=this;n===void 0&&(n=!1);var i=t.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var s=n?i.renderBounds:i.bounds,l=this.getTransformedGeometryBounds(t,n,s),c=t.childNodes;if(c.forEach(function(v){var y=r.getBounds(v,n);y&&(l?l.add(y):(l=s||new tu,l.update(y.center,y.halfExtents)))}),l||(l=new tu),n){var h=_S(t);if(h){var p=h.parsedStyle.clipPath.getBounds(n);l?p&&(l=p.intersection(l)):l.update(p.center,p.halfExtents)}}return n?(i.renderBounds=l,i.renderBoundsDirty=!1):(i.bounds=l,i.boundsDirty=!1),l},e.prototype.getLocalBounds=function(t){if(t.parentNode){var n=jr.create();t.parentNode.transformable&&(n=jr.invert(jr.create(),this.getWorldTransform(t.parentNode)));var r=this.getBounds(t);if(!tu.isEmpty(r)){var i=new tu;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(t)},e.prototype.getBoundingClientRect=function(t){var n,r,i,s=this.getGeometryBounds(t);tu.isEmpty(s)||(i=new tu,i.setFromTransformedAABB(s,this.getWorldTransform(t)));var l=(r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var c=(0,ie.CR)(i.getMin(),2),h=c[0],p=c[1],v=(0,ie.CR)(i.getMax(),2),y=v[0],b=v[1];return new Wp(h+((l==null?void 0:l.left)||0),p+((l==null?void 0:l.top)||0),y-h,b-p)}return new Wp((l==null?void 0:l.left)||0,(l==null?void 0:l.top)||0,0,0)},e.prototype.dirtifyWorldInternal=function(t,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,t.childNodes.forEach(function(s){var l=s.transformable;l.dirtyFlag||r.dirtifyWorldInternal(s,l)});var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},e.prototype.syncHierarchy=function(t){var n=t.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(t,n);for(var r=t.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},e.prototype.sync=function(t,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=t.parentNode,i=r&&r.transformable;r===null||!i?jr.copy(n.worldTransform,n.localTransform):jr.multiply(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},e.prototype.unfreezeParentToRoot=function(t){for(var n=t.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},e}(),Ym={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},IS=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,LS=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,Bx=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,BO=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,kO=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,DS=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,NS=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,zO=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,UO=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,FS=new RegExp("".concat(LS.source,"|").concat(BO.source,"|").concat(DS.source,"|").concat(zO.source)),P1=new RegExp("".concat(Bx.source,"|").concat(kO.source,"|").concat(NS.source,"|").concat(UO.source)),jO=function(){function e(t){var n=this;this.runtime=t,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(P1.exec(i)||FS.exec(r)))},this.trimByKinsokuShorui=function(r){var i=(0,ie.ev)([],(0,ie.CR)(r),!1),s=i[i.length-2];if(!s)return r;var l=s[s.length-1];return i[i.length-2]=s.slice(0,-1),i[i.length-1]=l+i[i.length-1],i}}return e.prototype.measureFont=function(t,n){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),s=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});s.font=t;var l=Ym.MetricsString+Ym.BaselineSymbol,c=Math.ceil(s.measureText(l).width),h=Math.ceil(s.measureText(Ym.BaselineSymbol).width),p=Ym.HeightMultiplier*h;h=h*Ym.BaselineMultiplier|0,i.width=c,i.height=p,s.fillStyle="#f00",s.fillRect(0,0,c,p),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(l,0,h);var v=s.getImageData(0,0,c||1,p||1).data,y=v.length,b=c*4,T=0,M=0,R=!1;for(T=0;T<h;++T){for(var L=0;L<b;L+=4)if(v[M+L]!==255){R=!0;break}if(!R)M+=b;else break}for(r.ascent=h-T,M=y-b,R=!1,T=p;T>h;--T){for(var L=0;L<b;L+=4)if(v[M+L]!==255){R=!0;break}if(!R)M-=b;else break}return r.descent=T-h,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[t]=r,r},e.prototype.measureText=function(t,n,r){var i=n.fontSize,s=n.wordWrap,l=n.lineHeight,c=n.lineWidth,h=n.textBaseline,p=n.textAlign,v=n.letterSpacing,y=n.textPath;n.textPathSide,n.textPathStartOffset;var b=n.leading,T=b===void 0?0:b,M=CS(n),R=this.measureFont(M,r);R.fontSize===0&&(R.fontSize=i,R.ascent=i);var L=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);L.font=M,n.isOverflowing=!1;var N=s?this.wordWrap(t,n,r):t,z=N.split(/(?:\r\n|\r|\n)/),H=new Array(z.length),X=0;if(y){y.getTotalLength();for(var Y=0;Y<z.length;Y++)var ne=L.measureText(z[Y]).width+(z[Y].length-1)*v}else{for(var Y=0;Y<z.length;Y++){var ve=L.measureText(z[Y]).width+(z[Y].length-1)*v;H[Y]=ve,X=Math.max(X,ve)}var ne=X+c,Ee=l||R.fontSize+c,Ie=Math.max(Ee,R.fontSize+c)+(z.length-1)*(Ee+T);Ee+=T;var Ye=0;return h==="middle"?Ye=-Ie/2:h==="bottom"||h==="alphabetic"||h==="ideographic"?Ye=-Ie:(h==="top"||h==="hanging")&&(Ye=0),{font:M,width:ne,height:Ie,lines:z,lineWidths:H,lineHeight:Ee,maxLineWidth:X,fontProperties:R,lineMetrics:H.map(function(St,Qe){var lt=0;return p==="center"||p==="middle"?lt-=St/2:(p==="right"||p==="end")&&(lt-=St),new Wp(lt-c/2,Ye+Qe*Ee,St+c,Ee)})}}},e.prototype.setGraphemeOnPath=function(){},e.prototype.wordWrap=function(t,n,r){var i=this,s=n.wordWrapWidth,l=s===void 0?0:s,c=n.letterSpacing,h=n.maxLines,p=h===void 0?1/0:h,v=n.textOverflow,y=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),b=l+c,T="";v==="ellipsis"?T="...":v&&v!=="clip"&&(T=v);for(var M=[],R=0,L=0,N={},z=function(ht){return i.getFromCache(ht,c,N,y)},H=Array.from(T).reduce(function(ht,bt){return ht+z(bt)},0),X=Array.from(t),Y=0;Y<X.length;Y++){var ne=X[Y],ve=t[Y-1],Ee=t[Y+1],Ie=z(ne);if(this.isNewline(ne)){if(R++,R>=p){n.isOverflowing=!0;break}L=0,M[R]="";continue}if(L>0&&L+Ie>b){if(R+1>=p){if(n.isOverflowing=!0,H>0&&H<=b){for(var Ye=M[R].length,$e=0,St=Ye,Qe=0;Qe<Ye;Qe++){var lt=z(M[R][Qe]);if($e+lt+H>b){St=Qe;break}$e+=lt}M[R]=(M[R]||"").slice(0,St)+T}break}if(R++,L=0,M[R]="",this.isBreakingSpace(ne))continue;this.canBreakInLastChar(ne)||(M=this.trimToBreakable(M),L=this.sumTextWidthByCache(M[R]||"",N)),this.shouldBreakByKinsokuShorui(ne,Ee)&&(M=this.trimByKinsokuShorui(M),L+=z(ve||""))}L+=Ie,M[R]=(M[R]||"")+ne}return M.join(`
`)},e.prototype.isBreakingSpace=function(t){return typeof t!="string"?!1:Ym.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},e.prototype.isNewline=function(t){return typeof t!="string"?!1:Ym.Newlines.indexOf(t.charCodeAt(0))>=0},e.prototype.trimToBreakable=function(t){var n=(0,ie.ev)([],(0,ie.CR)(t),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var s=r.slice(i,i+1),l=this.isBreakingSpace(s),c=i+1,h=i+(l?0:1);return n[n.length-1]+=r.slice(c,r.length),n[n.length-2]=r.slice(0,h),n},e.prototype.canBreakInLastChar=function(t){return!(t&&IS.test(t))},e.prototype.sumTextWidthByCache=function(t,n){return t.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},e.prototype.findBreakableIndex=function(t){for(var n=t.length-1;n>=0;n--)if(!IS.test(t[n]))return n;return-1},e.prototype.getFromCache=function(t,n,r,i){var s=r[t];if(typeof s!="number"){var l=t.length*n;s=i.measureText(t).width+l,r[t]=s}return s},e}(),Kr={},VO=function(){var e,t=new TI,n=new OO;return e={},e[Gr.CIRCLE]=new wO,e[Gr.ELLIPSE]=new TO,e[Gr.RECT]=t,e[Gr.IMAGE]=t,e[Gr.GROUP]=t,e[Gr.LINE]=new AO,e[Gr.TEXT]=new MO(Kr),e[Gr.POLYLINE]=n,e[Gr.POLYGON]=n,e[Gr.PATH]=new CO,e[Gr.HTML]=null,e[Gr.MESH]=null,e}(),HO=function(){var e,t=new XC,n=new Ox;return e={},e[Po.PERCENTAGE]=null,e[Po.NUMBER]=new QC,e[Po.ANGLE]=new GC,e[Po.DEFINED_PATH]=new ZC,e[Po.PAINT]=t,e[Po.COLOR]=t,e[Po.FILTER]=new YC,e[Po.LENGTH]=n,e[Po.LENGTH_PERCENTAGE]=n,e[Po.LENGTH_PERCENTAGE_12]=new $C,e[Po.LENGTH_PERCENTAGE_14]=new qC,e[Po.COORDINATE]=new Rx,e[Po.OFFSET_DISTANCE]=new JC,e[Po.OPACITY_VALUE]=new eO,e[Po.PATH]=new tO,e[Po.LIST_OF_POINTS]=new f_,e[Po.SHADOW_BLUR]=new h_,e[Po.TEXT]=new nO,e[Po.TEXT_TRANSFORM]=new rO,e[Po.TRANSFORM]=new xO,e[Po.TRANSFORM_ORIGIN]=new EO,e[Po.Z_INDEX]=new SO,e[Po.MARKER]=new KC,e}(),WO=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof D.g!="undefined"?D.g:{}};Kr.CameraContribution=Zg,Kr.AnimationTimeline=null,Kr.EasingFunction=null,Kr.offscreenCanvasCreator=new LO,Kr.sceneGraphSelector=new DO,Kr.sceneGraphService=new FO(Kr),Kr.textService=new jO(Kr),Kr.geometryUpdaterFactory=VO,Kr.CSSPropertySyntaxFactory=HO,Kr.styleValueRegistry=new WC(Kr),Kr.layoutRegistry=null,Kr.globalThis=WO(),Kr.enableCSSParsing=!0,Kr.enableDataset=!1,Kr.enableStyleSyntax=!0,Kr.enableSizeAttenuation=!1;var BS=0;function Gp(){BS=0}var $m=new Gv(Ga.INSERTED,null,"","","",0,"",""),kS=new Gv(Ga.REMOVED,null,"","","",0,"",""),Oo=new Yl(Ga.DESTROY),GO=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.entity=BS++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:KE.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=Kr.enableCSSParsing?{anchor:mu,opacity:mu,fillOpacity:mu,strokeOpacity:mu,fill:mu,stroke:mu,transform:mu,transformOrigin:mu,visibility:mu,pointerEvents:mu,lineWidth:mu,lineCap:mu,lineJoin:mu,increasedLineWidthForHitTesting:mu,fontSize:mu,fontFamily:mu,fontStyle:mu,fontWeight:mu,fontVariant:mu,textAlign:mu,textBaseline:mu,textTransform:mu,zIndex:mu,filter:mu,shadowType:mu}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(t.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(n){throw new Error(Ta)},t.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(E0);return Kr.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),$m.relatedNode=this,n.dispatchEvent($m),n},t.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},t.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},t.prototype.removeChild=function(n){var r;return kS.relatedNode=this,n.dispatchEvent(kS),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),Kr.sceneGraphService.detach(n),n},t.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},t.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},t.prototype.matches=function(n){return Kr.sceneGraphService.matches(n,this)},t.prototype.getElementById=function(n){return Kr.sceneGraphService.querySelector("#".concat(n),this)},t.prototype.getElementsByName=function(n){return Kr.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},t.prototype.getElementsByClassName=function(n){return Kr.sceneGraphService.querySelectorAll(".".concat(n),this)},t.prototype.getElementsByTagName=function(n){return Kr.sceneGraphService.querySelectorAll(n,this)},t.prototype.querySelector=function(n){return Kr.sceneGraphService.querySelector(n,this)},t.prototype.querySelectorAll=function(n){return Kr.sceneGraphService.querySelectorAll(n,this)},t.prototype.closest=function(n){var r=this;do{if(Kr.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},t.prototype.find=function(n){var r=this,i=null;return this.forEach(function(s){return s!==r&&n(s)?(i=s,!0):!1}),i},t.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(s){s!==r&&n(s)&&i.push(s)}),i},t.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this);r.forEach(function(l,c){var h;return(h=n.parentNode)===null||h===void 0?void 0:h.appendChild(l,s+c+1)})}},t.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this),l=(0,ie.CR)(r),c=l[0],h=l.slice(1);this.parentNode.appendChild(c,s),(n=c).after.apply(n,(0,ie.ev)([],(0,ie.CR)(h),!1))}},t.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,(0,ie.ev)([],(0,ie.CR)(n),!1)),this.remove()},t.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s){return n.appendChild(s)})},t.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s,l){return n.appendChild(s,l)})},t.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,(0,ie.ev)([],(0,ie.CR)(n),!1))},t.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},t.prototype.destroy=function(){this.dispatchEvent(Oo),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},t.prototype.getGeometryBounds=function(){return Kr.sceneGraphService.getGeometryBounds(this)},t.prototype.getRenderBounds=function(){return Kr.sceneGraphService.getBounds(this,!0)},t.prototype.getBounds=function(){return Kr.sceneGraphService.getBounds(this)},t.prototype.getLocalBounds=function(){return Kr.sceneGraphService.getLocalBounds(this)},t.prototype.getBoundingClientRect=function(){return Kr.sceneGraphService.getBoundingClientRect(this)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},t.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},t.prototype.getAttribute=function(n){if(YE(n))return Kr.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){var i=Yg(n);return r=this.attributes[i],Kr.enableCSSParsing&&(0,Lo.Z)(r)?null:r}else return r},t.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},t.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},t.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},t.prototype.setAttribute=function(n,r,i){this.attributes[n]=r},t.prototype.getAttributeNS=function(n,r){throw new Error(Ta)},t.prototype.getAttributeNode=function(n){throw new Error(Ta)},t.prototype.getAttributeNodeNS=function(n,r){throw new Error(Ta)},t.prototype.hasAttributeNS=function(n,r){throw new Error(Ta)},t.prototype.removeAttributeNS=function(n,r){throw new Error(Ta)},t.prototype.removeAttributeNode=function(n){throw new Error(Ta)},t.prototype.setAttributeNS=function(n,r,i){throw new Error(Ta)},t.prototype.setAttributeNode=function(n){throw new Error(Ta)},t.prototype.setAttributeNodeNS=function(n){throw new Error(Ta)},t.prototype.toggleAttribute=function(n,r){throw new Error(Ta)},t}(Nc);function Js(e){return!!(e!=null&&e.nodeName)}var Sn=new Gv(Ga.ATTR_MODIFIED,null,null,null,null,Gv.MODIFICATION,null,null),Fs={anchor:"",opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},ts={anchor:[0,0],fill:hx,stroke:hx,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},v_=(0,ie.pi)((0,ie.pi)({},ts),{opacity:1,fillOpacity:1,strokeOpacity:1,visibility:"visible",pointerEvents:"auto",lineWidth:1,lineCap:"butt",lineJoin:"miter",increasedLineWidthForHitTesting:0,fillRule:"nonzero"}),fd=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],ds=(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(fd),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),Jc="data-",Fl=function(e){(0,ie.ZT)(t,e);function t(n){var r,i=e.call(this)||this;i.isCustomElement=!1,i.isMutationObserved=!1,i.activeAnimations=[],i.getClip=function(){return this.style.clipPath||null},i.config=n,i.config.interactive=(r=i.config.capture)!==null&&r!==void 0?r:i.config.interactive,i.id=i.config.id||"",i.name=i.config.name||"",(i.config.className||i.config.class)&&(i.className=i.config.className||i.config.class),i.nodeName=i.config.type||Gr.GROUP,i.config.style=i.config.style||i.config.attrs||{},Object.assign(i.config.style,i.config.attrs),i.config.visible!=null&&(i.config.style.visibility=i.config.visible===!1?"hidden":"visible"),i.config.interactive!=null&&(i.config.style.pointerEvents=i.config.interactive===!1?"none":"auto"),Object.assign(i.parsedStyle,Kr.enableCSSParsing?ts:v_,i.config.initialParsedStyle),Kr.enableCSSParsing&&Object.assign(i.attributes,Fs),i.initAttributes(i.config.style);var s=Kr.globalThis.Proxy?Kr.globalThis.Proxy:function(){};return Kr.enableDataset&&(i.dataset=new s({},{get:function(l,c){var h="".concat(Jc).concat(_1(c));return l[h]!==void 0?l[h]:i.getAttribute(h)},set:function(l,c,h){return i.setAttribute("".concat(Jc).concat(_1(c)),h),!0}})),Kr.enableStyleSyntax&&(i.style=new s({setProperty:function(l,c){i.setAttribute(l,c)},getPropertyValue:function(l){return i.getAttribute(l)},removeProperty:function(l){i.removeAttribute(l)},item:function(){return""}},{get:function(l,c){return l[c]!==void 0?l[c]:i.getAttribute(c)},set:function(l,c,h){return i.setAttribute(c,h),!0}})),i}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},t.prototype.cloneNode=function(n,r){var i=(0,ie.pi)({},this.attributes);for(var s in i){var l=i[s];Js(l)&&s!=="clipPath"&&s!=="offsetPath"&&s!=="textPath"&&(i[s]=l.cloneNode(n)),r&&(i[s]=r(s,l))}var c=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return c.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(h){if(!h.style.isMarker){var p=h.cloneNode(n);c.appendChild(p)}}),c},t.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};Kr.enableCSSParsing&&(i.usedAttributes=ds);var s={};for(var l in n){var c=Yg(l);s[c]=n[l]}Kr.styleValueRegistry.processProperties(this,s,i),r.dirty=!0},t.prototype.setAttribute=function(n,r,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0);var l=Yg(n);pa(r)||(i||r!==this.attributes[l])&&(this.internalSetAttribute(l,r,{memoize:s}),e.prototype.setAttribute.call(this,l,r))},t.prototype.internalSetAttribute=function(n,r,i){var s;i===void 0&&(i={});var l=this.renderable,c=this.attributes[n],h=this.parsedStyle[n];Kr.styleValueRegistry.processProperties(this,(s={},s[n]=r,s),i),l.dirty=!0;var p=this.parsedStyle[n];this.isConnected&&(Sn.relatedNode=this,Sn.prevValue=c,Sn.newValue=r,Sn.attrName=n,Sn.prevParsedValue=h,Sn.newParsedValue=p,this.isMutationObserved?this.dispatchEvent(Sn):(Sn.target=this,this.ownerDocument.defaultView.dispatchEvent(Sn,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,c,r,h,p)},t.prototype.getBBox=function(){var n=this.getBounds(),r=(0,ie.CR)(n.getMin(),2),i=r[0],s=r[1],l=(0,ie.CR)(n.getMax(),2),c=l[0],h=l[1];return new Wp(i,s,c-i,h-s)},t.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.setOrigin(this,sc(n,r,i)),this},t.prototype.getOrigin=function(){return Kr.sceneGraphService.getOrigin(this)},t.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.setPosition(this,sc(n,r,i)),this},t.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.setLocalPosition(this,sc(n,r,i)),this},t.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.translate(this,sc(n,r,i)),this},t.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.translateLocal(this,sc(n,r,i)),this},t.prototype.getPosition=function(){return Kr.sceneGraphService.getPosition(this)},t.prototype.getLocalPosition=function(){return Kr.sceneGraphService.getLocalPosition(this)},t.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},t.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=sc(n,r,i)),Kr.sceneGraphService.scaleLocal(this,n),this},t.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=sc(n,r,i)),Kr.sceneGraphService.setLocalScale(this,n),this},t.prototype.getLocalScale=function(){return Kr.sceneGraphService.getLocalScale(this)},t.prototype.getScale=function(){return Kr.sceneGraphService.getScale(this)},t.prototype.getEulerAngles=function(){var n=(0,ie.CR)(Vg(Hn.Ue(),Kr.sceneGraphService.getWorldTransform(this)),3),r=n[2];return _f(r)},t.prototype.getLocalEulerAngles=function(){var n=(0,ie.CR)(Vg(Hn.Ue(),Kr.sceneGraphService.getLocalRotation(this)),3),r=n[2];return _f(r)},t.prototype.setEulerAngles=function(n){return Kr.sceneGraphService.setEulerAngles(this,0,0,n),this},t.prototype.setLocalEulerAngles=function(n){return Kr.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},t.prototype.rotateLocal=function(n,r,i){return(0,Lo.Z)(r)&&(0,Lo.Z)(i)?Kr.sceneGraphService.rotateLocal(this,0,0,n):Kr.sceneGraphService.rotateLocal(this,n,r,i),this},t.prototype.rotate=function(n,r,i){return(0,Lo.Z)(r)&&(0,Lo.Z)(i)?Kr.sceneGraphService.rotate(this,0,0,n):Kr.sceneGraphService.rotate(this,n,r,i),this},t.prototype.setRotation=function(n,r,i,s){return Kr.sceneGraphService.setRotation(this,n,r,i,s),this},t.prototype.setLocalRotation=function(n,r,i,s){return Kr.sceneGraphService.setLocalRotation(this,n,r,i,s),this},t.prototype.setLocalSkew=function(n,r){return Kr.sceneGraphService.setLocalSkew(this,n,r),this},t.prototype.getRotation=function(){return Kr.sceneGraphService.getRotation(this)},t.prototype.getLocalRotation=function(){return Kr.sceneGraphService.getLocalRotation(this)},t.prototype.getLocalSkew=function(){return Kr.sceneGraphService.getLocalSkew(this)},t.prototype.getLocalTransform=function(){return Kr.sceneGraphService.getLocalTransform(this)},t.prototype.getWorldTransform=function(){return Kr.sceneGraphService.getWorldTransform(this)},t.prototype.setLocalTransform=function(n){return Kr.sceneGraphService.setLocalTransform(this,n),this},t.prototype.resetLocalTransform=function(){Kr.sceneGraphService.resetLocalTransform(this)},t.prototype.getAnimations=function(){return this.activeAnimations},t.prototype.animate=function(n,r){var i,s=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return s?s.play(this,n,r):null},t.prototype.isVisible=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible"},Object.defineProperty(t.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),t.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},t.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},t.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},t.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},t.prototype.getConfig=function(){return this.config},t.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=(0,ie.CR)(r,2),l=s[0],c=s[1];return l?za(l)?(Object.keys(l).forEach(function(h){n.setAttribute(h,l[h])}),this):r.length===2?(this.setAttribute(l,c),this):this.attributes[l]:this.attributes},t.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=(0,ie.CR)(jr.getTranslation(Hn.Ue(),r),2),s=i[0],l=i[1],c=(0,ie.CR)(jr.getScaling(Hn.Ue(),r),2),h=c[0],p=c[1],v=jr.getRotation(on(),r),y=(0,ie.CR)(Vg(Hn.Ue(),v),3),b=y[0],T=y[2];return Ky(b||T,s,l,h,p)},t.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},t.prototype.setMatrix=function(n){var r=(0,ie.CR)(_p(n),5),i=r[0],s=r[1],l=r[2],c=r[3],h=r[4];this.setEulerAngles(h).setPosition(i,s).setLocalScale(l,c)},t.prototype.setLocalMatrix=function(n){var r=(0,ie.CR)(_p(n),5),i=r[0],s=r[1],l=r[2],c=r[3],h=r[4];this.setLocalEulerAngles(h).setLocalPosition(i,s).setLocalScale(l,c)},t.prototype.show=function(){Kr.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},t.prototype.hide=function(){Kr.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},t.prototype.getCount=function(){return this.childElementCount},t.prototype.getParent=function(){return this.parentElement},t.prototype.getChildren=function(){return this.children},t.prototype.getFirst=function(){return this.firstElementChild},t.prototype.getLast=function(){return this.lastElementChild},t.prototype.getChildByIndex=function(n){return this.children[n]||null},t.prototype.add=function(n,r){return this.appendChild(n,r)},t.prototype.setClip=function(n){this.style.clipPath=n},t.prototype.set=function(n,r){this.config[n]=r},t.prototype.get=function(n){return this.config[n]},t.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.setZIndex=function(n){return this.style.zIndex=n,this},t}(GO),Lu={number:function(e){return new Nl(e)},percent:function(e){return new Nl(e,"%")},px:function(e){return new Nl(e,"px")},em:function(e){return new Nl(e,"em")},rem:function(e){return new Nl(e,"rem")},deg:function(e){return new Nl(e,"deg")},grad:function(e){return new Nl(e,"grad")},rad:function(e){return new Nl(e,"rad")},turn:function(e){return new Nl(e,"turn")},s:function(e){return new Nl(e,"s")},ms:function(e){return new Nl(e,"ms")},registerProperty:function(e){var t=e.name,n=e.inherits,r=e.interpolable,i=e.initialValue,s=e.syntax;Kr.styleValueRegistry.registerMetadata({n:t,inh:n,int:r,d:i,syntax:s})},registerLayout:function(e,t){Kr.layoutRegistry.registerLayout(e,t)}},Tu=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({type:Gr.CIRCLE,style:Kr.enableCSSParsing?(0,ie.pi)({cx:"",cy:"",r:""},r):(0,ie.pi)({},r),initialParsedStyle:{anchor:[.5,.5],transformOrigin:Kr.enableCSSParsing?null:[r_,r_]}},i))||this}return t}(Fl),Du=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);return r=e.call(this,(0,ie.pi)({style:Kr.enableCSSParsing?(0,ie.pi)({x:"",y:""},i):(0,ie.pi)({},i)},s))||this,r.isCustomElement=!0,r}return t}(Fl),ul=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({type:Gr.ELLIPSE,style:Kr.enableCSSParsing?(0,ie.pi)({cx:"",cy:"",rx:"",ry:""},r):(0,ie.pi)({},r),initialParsedStyle:{anchor:[.5,.5],transformOrigin:Kr.enableCSSParsing?null:[r_,r_]}},i))||this}return t}(Fl),$l=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({type:Gr.GROUP,style:Kr.enableCSSParsing?(0,ie.pi)({x:"",y:"",width:"",height:""},r):(0,ie.pi)({},r)},i))||this}return t}(Fl),A0=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);return r=e.call(this,(0,ie.pi)({type:Gr.HTML,style:Kr.enableCSSParsing?(0,ie.pi)({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):(0,ie.pi)({},i)},s))||this,r.cullable.enable=!1,r}return t.prototype.getDomElement=function(){return this.parsedStyle.$el},t.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var n=this.parsedStyle,r=n.x,i=n.y,s=n.width,l=n.height;return new Wp(r,i,s,l)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.getBounds=function(){var n,r,i=this.getBoundingClientRect(),s=(r=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect(),l=new tu,c=i.left-((s==null?void 0:s.left)||0),h=i.top-((s==null?void 0:s.top)||0);return l.setMinMax([c,h,0],[c+i.width,h+i.height,0]),l},t.prototype.getLocalBounds=function(){if(this.parentNode){var n=jr.invert(jr.create(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!tu.isEmpty(r)){var i=new tu;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},t}(Fl),I1=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({type:Gr.IMAGE,style:Kr.enableCSSParsing?(0,ie.pi)({x:"",y:"",img:"",width:"",height:""},r):(0,ie.pi)({},r)},i))||this}return t}(Fl),qa=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);r=e.call(this,(0,ie.pi)({type:Gr.LINE,style:(0,ie.pi)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},s))||this,r.markerStartAngle=0,r.markerEndAngle=0;var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd;return c&&Js(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),h&&Js(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&Js(s)&&(this.markerStartAngle=0,s.remove()),l&&Js(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"&&(s&&Js(s)&&(this.markerEndAngle=0,s.remove()),l&&Js(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1)))},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=r.x1,p=r.x2,v=r.y1,y=r.y2,b=r.defX,T=r.defY,M=n?i:s;if(!(!M||!Js(M))){var R=0,L,N,z,H,X,Y;n?(z=h-b,H=v-T,L=p-h,N=y-v,X=l||0,Y=this.markerStartAngle):(z=p-b,H=y-T,L=h-p,N=v-y,X=c||0,Y=this.markerEndAngle),R=Math.atan2(N,L),M.setLocalEulerAngles(R*180/Math.PI+Y),M.setLocalPosition(z+Math.cos(R)*X,H+Math.sin(R)*X)}},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,s=i.x1,l=i.y1,c=i.x2,h=i.y2,p=i.defX,v=i.defY,y=uh(s,l,c,h,n),b=y.x,T=y.y,M=Hn.fF(Hn.Ue(),Hn.al(b-p,T-v,0),r?this.getWorldTransform():this.getLocalTransform());return new Sc(M[0],M[1])},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,s=n.x2,l=n.y2;return mp(r,i,s,l)},t}(Fl),gl=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);r=e.call(this,(0,ie.pi)({type:Gr.PATH,style:Kr.enableCSSParsing?(0,ie.pi)({path:"",miterLimit:""},i):(0,ie.pi)({},i),initialParsedStyle:Kr.enableCSSParsing?null:{miterLimit:4,path:(0,ie.pi)({},x1)}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd,p=l.markerMid;return c&&Js(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),p&&Js(p)&&r.placeMarkerMid(p),h&&Js(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="path"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&Js(s)&&(this.markerStartAngle=0,s.remove()),l&&Js(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&Js(s)&&(this.markerEndAngle=0,s.remove()),l&&Js(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=r.defX,p=r.defY,v=n?i:s;if(!(!v||!Js(v))){var y=0,b,T,M,R,L,N;if(n){var z=(0,ie.CR)(this.getStartTangent(),2),H=z[0],X=z[1];M=X[0]-h,R=X[1]-p,b=H[0]-X[0],T=H[1]-X[1],L=l||0,N=this.markerStartAngle}else{var Y=(0,ie.CR)(this.getEndTangent(),2),H=Y[0],X=Y[1];M=X[0]-h,R=X[1]-p,b=H[0]-X[0],T=H[1]-X[1],L=c||0,N=this.markerEndAngle}y=Math.atan2(T,b),v.setLocalEulerAngles(y*180/Math.PI+N),v.setLocalPosition(M+Math.cos(y)*L,R+Math.sin(y)*L)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle,i=r.path.segments,s=r.defX,l=r.defY;if(this.markerMidList.forEach(function(b){b.remove()}),n&&Js(n))for(var c=1;c<i.length-1;c++){var h=(0,ie.CR)(i[c].currentPoint,2),p=h[0],v=h[1],y=c===1?n:n.cloneNode(!0);this.markerMidList.push(y),this.appendChild(y),y.setLocalPosition(p-s,v-l)}},t.prototype.getTotalLength=function(){return mx(this)},t.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,s=i.defX,l=i.defY,c=i.path.absolutePath,h=hs(c,n),p=h.x,v=h.y,y=Hn.fF(Hn.Ue(),Hn.al(p-s,v-l,0),r?this.getWorldTransform():this.getLocalTransform());return new Sc(y[0],y[1])},t.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*mx(this),r)},t.prototype.getStartTangent=function(){var n=this.parsedStyle.path.segments,r=[];if(n.length>1){var i=n[0].currentPoint,s=n[1].currentPoint,l=n[1].startTangent;r=[],l?(r.push([i[0]-l[0],i[1]-l[1]]),r.push([i[0],i[1]])):(r.push([s[0],s[1]]),r.push([i[0],i[1]]))}return r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.path.segments,r=n.length,i=[];if(r>1){var s=n[r-2].currentPoint,l=n[r-1].currentPoint,c=n[r-1].endTangent;i=[],c?(i.push([l[0]-c[0],l[1]-c[1]]),i.push([l[0],l[1]])):(i.push([s[0],s[1]]),i.push([l[0],l[1]]))}return i},t}(Fl),uc=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ie._T)(n,["style"]);r=e.call(this,(0,ie.pi)({type:Gr.POLYGON,style:Kr.enableCSSParsing?(0,ie.pi)({points:"",miterLimit:"",isClosed:!0},i):(0,ie.pi)({},i),initialParsedStyle:Kr.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd,p=l.markerMid;return c&&Js(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),p&&Js(p)&&r.placeMarkerMid(p),h&&Js(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&Js(s)&&(this.markerStartAngle=0,s.remove()),l&&Js(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&Js(s)&&(this.markerEndAngle=0,s.remove()),l&&Js(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=r.points,p=r.defX,v=r.defY,y=(h||{}).points,b=n?i:s;if(!(!b||!Js(b)||!y)){var T=0,M,R,L,N,z,H;if(L=y[0][0]-p,N=y[0][1]-v,n)M=y[1][0]-y[0][0],R=y[1][1]-y[0][1],z=l||0,H=this.markerStartAngle;else{var X=y.length;this.parsedStyle.isClosed?(M=y[X-1][0]-y[0][0],R=y[X-1][1]-y[0][1]):(L=y[X-1][0]-p,N=y[X-1][1]-v,M=y[X-2][0]-y[X-1][0],R=y[X-2][1]-y[X-1][1]),z=c||0,H=this.markerEndAngle}T=Math.atan2(R,M),b.setLocalEulerAngles(T*180/Math.PI+H),b.setLocalPosition(L+Math.cos(T)*z,N+Math.sin(T)*z)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle,i=r.points,s=r.defX,l=r.defY,c=(i||{}).points;if(this.markerMidList.forEach(function(b){b.remove()}),this.markerMidList=[],n&&Js(n)&&c)for(var h=1;h<(this.parsedStyle.isClosed?c.length:c.length-1);h++){var p=c[h][0]-s,v=c[h][1]-l,y=h===1?n:n.cloneNode(!0);this.markerMidList.push(y),this.appendChild(y),y.setLocalPosition(p,v)}},t}(Fl),gu=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({type:Gr.POLYLINE,style:Kr.enableCSSParsing?(0,ie.pi)({points:"",miterLimit:"",isClosed:!1},r):(0,ie.pi)({},r),initialParsedStyle:Kr.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return t.prototype.getTotalLength=function(){return this.parsedStyle.points.totalLength},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,s=i.defX,l=i.defY,c=i.points,h=c.points,p=c.segments,v=0,y=0;p.forEach(function(L,N){n>=L[0]&&n<=L[1]&&(v=(n-L[0])/(L[1]-L[0]),y=N)});var b=uh(h[y][0],h[y][1],h[y+1][0],h[y+1][1],v),T=b.x,M=b.y,R=Hn.fF(Hn.Ue(),Hn.al(T-s,M-l,0),r?this.getWorldTransform():this.getLocalTransform());return new Sc(R[0],R[1])},t.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},t}(uc),Jg=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({type:Gr.RECT,style:Kr.enableCSSParsing?(0,ie.pi)({x:"",y:"",width:"",height:"",radius:""},r):(0,ie.pi)({},r)},i))||this}return t}(Fl),Vs=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({type:Gr.TEXT,style:Kr.enableCSSParsing?(0,ie.pi)({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):(0,ie.pi)({fill:"black"},r),initialParsedStyle:Kr.enableCSSParsing?{}:{x:0,y:0,fontSize:16,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",lineHeight:0,letterSpacing:0,textBaseline:"alphabetic",textAlign:"start",wordWrap:!1,wordWrapWidth:0,leading:0,dx:0,dy:0}},i))||this}return t.prototype.getComputedTextLength=function(){var n;return((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},t.prototype.getLineBoundingRects=function(){var n;return((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},t.prototype.isOverflowing=function(){return!!this.parsedStyle.isOverflowing},t}(Fl),C0=function(){function e(){this.registry={},this.define(Gr.CIRCLE,Tu),this.define(Gr.ELLIPSE,ul),this.define(Gr.RECT,Jg),this.define(Gr.IMAGE,I1),this.define(Gr.LINE,qa),this.define(Gr.GROUP,$l),this.define(Gr.PATH,gl),this.define(Gr.POLYGON,uc),this.define(Gr.POLYLINE,gu),this.define(Gr.TEXT,Vs),this.define(Gr.HTML,A0)}return e.prototype.define=function(t,n){this.registry[t]=n},e.prototype.get=function(t){return this.registry[t]},e}(),ey=function(e){(0,ie.ZT)(t,e);function t(){var n=e.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new Kr.AnimationTimeline(n)}catch(i){}var r={};return Cx.forEach(function(i){var s=i.n,l=i.inh,c=i.d;l&&c&&(r[s]=Wm(c)?c(Gr.GROUP):c)}),n.documentElement=new $l({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),t.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?Vs:$l);var s=new i(r);return s.ownerDocument=this,s},t.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},t.prototype.cloneNode=function(n){throw new Error(Ta)},t.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(n){}},t.prototype.elementsFromBBox=function(n,r,i,s){var l=this.defaultView.context.rBushRoot,c=l.search({minX:n,minY:r,maxX:i,maxY:s}),h=[];return c.forEach(function(p){var v=p.displayObject,y=v.parsedStyle.pointerEvents,b=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(y);(!b||b&&v.isVisible())&&!v.isCulled()&&v.isInteractive()&&h.push(v)}),h.sort(function(p,v){return v.sortable.renderOrder-p.sortable.renderOrder}),h},t.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height;if(s<0||l<0||s>h||l>p)return null;var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,T=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return T&&T[0]||this.documentElement},t.prototype.elementFromPoint=function(n,r){return(0,ie.mG)(this,void 0,void 0,function(){var i,s,l,c,h,p,v,y,b,T;return(0,ie.Jh)(this,function(M){switch(M.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height,s<0||l<0||s>h||l>p?[2,null]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return T=M.sent().picked,[2,T&&T[0]||this.documentElement]}})})},t.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height;if(s<0||l<0||s>h||l>p)return[];var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,T=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return T[T.length-1]!==this.documentElement&&T.push(this.documentElement),T},t.prototype.elementsFromPoint=function(n,r){return(0,ie.mG)(this,void 0,void 0,function(){var i,s,l,c,h,p,v,y,b,T;return(0,ie.Jh)(this,function(M){switch(M.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height,s<0||l<0||s>h||l>p?[2,[]]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return T=M.sent().picked,T[T.length-1]!==this.documentElement&&T.push(this.documentElement),[2,T]}})})},t.prototype.appendChild=function(n,r){throw new Error(Bv)},t.prototype.insertBefore=function(n,r){throw new Error(Bv)},t.prototype.removeChild=function(n,r){throw new Error(Bv)},t.prototype.replaceChild=function(n,r,i){throw new Error(Bv)},t.prototype.append=function(){throw new Error(Bv)},t.prototype.prepend=function(){throw new Error(Bv)},t.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},t.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},t.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},t.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},t.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},t.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},t.prototype.find=function(n){return this.documentElement.find(n)},t.prototype.findAll=function(n){return this.documentElement.findAll(n)},t}(Nc),L1=function(){function e(t){this.strategies=t}return e.prototype.apply=function(t){var n=t.camera,r=t.renderingService,i=t.renderingContext,s=this.strategies;r.hooks.cull.tap(e.tag,function(l){if(l){var c=l.cullable;return s.length===0?c.visible=i.unculledEntities.indexOf(l.entity)>-1:c.visible=s.every(function(h){return h.isVisible(n,l)}),!l.isCulled()&&l.isVisible()?l:(l.dispatchEvent(new Yl(Ga.CULLED)),null)}return l}),r.hooks.afterRender.tap(e.tag,function(l){l.cullable.visibilityPlaneMask=-1})},e.tag="Culling",e}(),li=function(){function e(){var t=this;this.autoPreventDefault=!1,this.rootPointerEvent=new Nx(null),this.rootWheelEvent=new Fx(null),this.onPointerMove=function(n){var r,i,s,l,c=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView;if(!(c.supportsTouchEvents&&n.pointerType==="touch")){var h=t.normalizeToPointerEvent(n,c);try{for(var p=(0,ie.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,c,n);t.context.eventService.mapEvent(b)}}catch(T){r={error:T}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(n){var r,i,s,l,c=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView,h=t.normalizeToPointerEvent(n,c);try{for(var p=(0,ie.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,c,n);t.context.eventService.mapEvent(b)}}catch(T){r={error:T}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}}return e.prototype.apply=function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(s){var l=n.context.renderingService.hooks.pickSync.call({position:s,picked:[],topmost:!0}).picked;return l[0]||null}),r.hooks.pointerWheel.tap(e.tag,function(s){var l=n.normalizeWheelEvent(s);n.context.eventService.mapEvent(l)}),r.hooks.pointerDown.tap(e.tag,function(s){var l,c;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.normalizeToPointerEvent(s,i);if(n.autoPreventDefault&&h[0].isNormalized){var p=s.cancelable||!("cancelable"in s);p&&s.preventDefault()}try{for(var v=(0,ie.XA)(h),y=v.next();!y.done;y=v.next()){var b=y.value,T=n.bootstrapEvent(n.rootPointerEvent,b,i,s);n.context.eventService.mapEvent(T)}}catch(M){l={error:M}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(e.tag,function(s){var l,c;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.context.contextService.getDomElement(),p=n.context.eventService.isNativeEventFromCanvas(h,s),v=p?"":"outside",y=n.normalizeToPointerEvent(s,i);try{for(var b=(0,ie.XA)(y),T=b.next();!T.done;T=b.next()){var M=T.value,R=n.bootstrapEvent(n.rootPointerEvent,M,i,s);R.type+=v,n.context.eventService.mapEvent(R)}}catch(L){l={error:L}}finally{try{T&&!T.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(s){var l,c,h=n.normalizeToPointerEvent(s,i);try{for(var p=(0,ie.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=n.bootstrapEvent(n.rootPointerEvent,y,i,s);n.context.eventService.mapEvent(b)}}catch(T){l={error:T}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)})},e.prototype.getViewportXY=function(t){var n,r,i=t.offsetX,s=t.offsetY,l=t.clientX,c=t.clientY;if(this.context.config.supportsCSSTransform&&!(0,Lo.Z)(i)&&!(0,Lo.Z)(s))n=i,r=s;else{var h=this.context.eventService.client2Viewport(new Sc(l,c));n=h.x,r=h.y}return{x:n,y:r}},e.prototype.bootstrapEvent=function(t,n,r,i){t.view=r,t.originalEvent=null,t.nativeEvent=i,t.pointerId=n.pointerId,t.width=n.width,t.height=n.height,t.isPrimary=n.isPrimary,t.pointerType=n.pointerType,t.pressure=n.pressure,t.tangentialPressure=n.tangentialPressure,t.tiltX=n.tiltX,t.tiltY=n.tiltY,t.twist=n.twist,this.transferMouseData(t,n);var s=this.getViewportXY(n),l=s.x,c=s.y;t.viewport.x=l,t.viewport.y=c;var h=this.context.eventService.viewport2Canvas(t.viewport),p=h.x,v=h.y;return t.canvas.x=p,t.canvas.y=v,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=fO[t.type]||t.type),t},e.prototype.normalizeWheelEvent=function(t){var n=this.rootWheelEvent;this.transferMouseData(n,t),n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ;var r=this.getViewportXY(t),i=r.x,s=r.y;n.viewport.x=i,n.viewport.y=s;var l=this.context.eventService.viewport2Canvas(n.viewport),c=l.x,h=l.y;return n.canvas.x=c,n.canvas.y=h,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=t,n.type=t.type,n},e.prototype.transferMouseData=function(t,n){t.isTrusted=n.isTrusted,t.srcElement=n.srcElement,t.timeStamp=Ix.now(),t.type=n.type,t.altKey=n.altKey,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.ctrlKey=n.ctrlKey,t.button=n.button,t.buttons=n.buttons,t.client.x=n.clientX,t.client.y=n.clientY,t.movement.x=n.movementX,t.movement.y=n.movementY,t.page.x=n.pageX,t.page.y=n.pageY,t.screen.x=n.screenX,t.screen.y=n.screenY,t.relatedTarget=null},e.prototype.setCursor=function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")},e.prototype.normalizeToPointerEvent=function(t,n){var r=[];if(n.isTouchEvent(t))for(var i=0;i<t.changedTouches.length;i++){var s=t.changedTouches[i];pa(s.button)&&(s.button=0),pa(s.buttons)&&(s.buttons=1),pa(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),pa(s.width)&&(s.width=s.radiusX||1),pa(s.height)&&(s.height=s.radiusY||1),pa(s.tiltX)&&(s.tiltX=0),pa(s.tiltY)&&(s.tiltY=0),pa(s.pointerType)&&(s.pointerType="touch"),pa(s.pointerId)&&(s.pointerId=s.identifier||0),pa(s.pressure)&&(s.pressure=s.force||.5),pa(s.twist)&&(s.twist=0),pa(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,s.type=t.type,r.push(s)}else if(n.isMouseEvent(t)){var l=t;pa(l.isPrimary)&&(l.isPrimary=!0),pa(l.width)&&(l.width=1),pa(l.height)&&(l.height=1),pa(l.tiltX)&&(l.tiltX=0),pa(l.tiltY)&&(l.tiltY=0),pa(l.pointerType)&&(l.pointerType="mouse"),pa(l.pointerId)&&(l.pointerId=cO),pa(l.pressure)&&(l.pressure=.5),pa(l.twist)&&(l.twist=0),pa(l.tangentialPressure)&&(l.tangentialPressure=0),l.isNormalized=!0,r.push(l)}else r.push(t);return r},e.tag="Event",e}(),No=[Gr.CIRCLE,Gr.ELLIPSE,Gr.IMAGE,Gr.RECT,Gr.LINE,Gr.POLYLINE,Gr.POLYGON,Gr.TEXT,Gr.PATH,Gr.HTML],OI=function(){function e(){}return e.prototype.isVisible=function(t,n){var r,i,s=n.cullable;if(!s.enable)return!0;var l=n.getRenderBounds();if(tu.isEmpty(l))return!1;var c=t.getFrustum(),h=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return s.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,l,h||hh.INDETERMINATE,c.planes),s.visible=s.visibilityPlaneMask!==hh.OUTSIDE,s.visible},e.prototype.computeVisibilityWithPlaneMask=function(t,n,r,i){if(r===hh.OUTSIDE||r===hh.INSIDE)return r;for(var s=hh.INSIDE,l=No.indexOf(t.nodeName)>-1,c=0,h=i.length;c<h;++c){var p=1<<c;if(r&p&&!(l&&(c===4||c===5))){var v=i[c],y=v.normal,b=v.distance;if(Hn.AK(y,n.getPositiveFarPoint(i[c]))+b<0)return hh.OUTSIDE;Hn.AK(y,n.getNegativeFarPoint(i[c]))+b<0&&(s|=p)}}return s},e}(),_o=function(){function e(){this.toSync=new Set}return e.prototype.apply=function(t){var n=this,r=t.renderingService,i=t.renderingContext,s=t.rBushRoot,l=i.root.ownerDocument.defaultView;this.rBush=s;var c=function(y){var b=y.target;b.renderable.dirty=!0,r.dirtify()},h=function(y){var b=y.detail.affectChildren,T=y.target;b&&T.forEach(function(R){n.toSync.add(R)});for(var M=T;M;)M.renderable&&n.toSync.add(M),M=M.parentElement;r.dirtify()},p=function(y){var b=y.target;Kr.enableSizeAttenuation&&Kr.styleValueRegistry.updateSizeAttenuation(b,l.getCamera().getZoom()),Kr.enableCSSParsing&&Kr.styleValueRegistry.recalc(b),Kr.sceneGraphService.dirtifyToRoot(b),r.dirtify()},v=function(y){var b=y.target,T=b.rBushNode;T.aabb&&n.rBush.remove(T.aabb),n.toSync.delete(b),Kr.sceneGraphService.dirtifyToRoot(b),r.dirtify()};r.hooks.init.tap(e.tag,function(){l.addEventListener(Ga.MOUNTED,p),l.addEventListener(Ga.UNMOUNTED,v),l.addEventListener(Ga.ATTR_MODIFIED,c),l.addEventListener(Ga.BOUNDS_CHANGED,h)}),r.hooks.destroy.tap(e.tag,function(){l.removeEventListener(Ga.MOUNTED,p),l.removeEventListener(Ga.UNMOUNTED,v),l.removeEventListener(Ga.ATTR_MODIFIED,c),l.removeEventListener(Ga.BOUNDS_CHANGED,h),n.toSync.clear()}),r.hooks.endFrame.tap(e.tag,function(){n.syncRTree()})},e.prototype.syncRTree=function(){var t=this,n=[];Array.from(this.toSync).filter(function(r){return r.isConnected}).forEach(function(r){var i=r.rBushNode;i&&i.aabb&&t.rBush.remove(i.aabb);var s=r.getRenderBounds();if(s){var l=(0,ie.CR)(s.getMin(),2),c=l[0],h=l[1],p=(0,ie.CR)(s.getMax(),2),v=p[0],y=p[1];i.aabb||(i.aabb={}),i.aabb.displayObject=r,i.aabb.minX=c,i.aabb.minY=h,i.aabb.maxX=v,i.aabb.maxY=y}i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY)&&n.push(i.aabb)}),this.rBush.load(n),n.length=0,this.toSync.clear()},e.tag="Prepare",e}();function la(e){return!!e.document}var nr;(function(e){e.READY="ready",e.BEFORE_RENDER="beforerender",e.RERENDER="rerender",e.AFTER_RENDER="afterrender",e.BEFORE_DESTROY="beforedestroy",e.AFTER_DESTROY="afterdestroy",e.RESIZE="resize",e.DIRTY_RECTANGLE="dirtyrectangle",e.RENDERER_CHANGED="rendererchanged"})(nr||(nr={}));var m_=500,O0=.1,ty=1e3,D1=new Yl(Ga.MOUNTED),N1=new Yl(Ga.UNMOUNTED),MI=new Yl(nr.BEFORE_RENDER),ZO=new Yl(nr.RERENDER),RI=new Yl(nr.AFTER_RENDER),XO=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this)||this;r.Element=Fl,r.inited=!1,r.context={},r.document=new ey,r.document.defaultView=r,r.customElements=new C0;var i=n.container,s=n.canvas,l=n.offscreenCanvas,c=n.width,h=n.height,p=n.devicePixelRatio,v=n.renderer,y=n.background,b=n.cursor,T=n.document,M=n.requestAnimationFrame,R=n.cancelAnimationFrame,L=n.createImage,N=n.supportsPointerEvents,z=n.supportsTouchEvents,H=n.supportsCSSTransform,X=n.supportsMutipleCanvasesInOneContainer,Y=n.useNativeClickEvent,ne=n.alwaysTriggerPointerEventOnCanvas,ve=n.isTouchEvent,Ee=n.isMouseEvent;X||iO(i,r);var Ie=c,Ye=h,$e=p;return s&&($e=p||d_&&window.devicePixelRatio||1,$e=$e>=1?Math.ceil($e):1,Ie=c||lO(s)||s.width/$e,Ye=h||uO(s)||s.height/$e),l&&(Kr.offscreenCanvas=l),r.devicePixelRatio=$e,r.requestAnimationFrame=M!=null?M:TS.bind(Kr.globalThis),r.cancelAnimationFrame=R!=null?R:AS.bind(Kr.globalThis),r.supportsTouchEvents=z!=null?z:"ontouchstart"in Kr.globalThis,r.supportsPointerEvents=N!=null?N:!!Kr.globalThis.PointerEvent,r.isTouchEvent=ve!=null?ve:function(St){return r.supportsTouchEvents&&St instanceof Kr.globalThis.TouchEvent},r.isMouseEvent=Ee!=null?Ee:function(St){return!Kr.globalThis.MouseEvent||St instanceof Kr.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(St instanceof Kr.globalThis.PointerEvent))},r.initRenderingContext({container:i,canvas:s,width:Ie,height:Ye,renderer:v,offscreenCanvas:l,devicePixelRatio:$e,cursor:b||"default",background:y||"transparent",createImage:L,document:T,supportsCSSTransform:H,useNativeClickEvent:Y,alwaysTriggerPointerEventOnCanvas:ne}),r.initDefaultCamera(Ie,Ye,v.clipSpaceNearZ),r.initRenderer(v,!0),r}return t.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},t.prototype.initDefaultCamera=function(n,r,i){var s=this,l=new Kr.CameraContribution;l.clipSpaceNearZ=i,l.setType(ol.EXPLORING,Gg.DEFAULT).setPosition(n/2,r/2,m_).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,O0,ty),l.canvas=this,l.eventEmitter.on(e_.UPDATED,function(){s.context.renderingContext.renderReasons.add(Wv.CAMERA_CHANGED),Kr.enableSizeAttenuation&&s.getConfig().renderer.getConfig().enableSizeAttenuation&&s.updateSizeAttenuation()}),this.context.camera=l},t.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){Kr.styleValueRegistry.updateSizeAttenuation(r,n)})},t.prototype.getConfig=function(){return this.context.config},t.prototype.getRoot=function(){return this.document.documentElement},t.prototype.getCamera=function(){return this.context.camera},t.prototype.getContextService=function(){return this.context.contextService},t.prototype.getEventService=function(){return this.context.eventService},t.prototype.getRenderingService=function(){return this.context.renderingService},t.prototype.getRenderingContext=function(){return this.context.renderingContext},t.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(t.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),t.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new Yl(nr.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var s=this.getRoot();this.unmountChildren(s),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new Yl(nr.AFTER_DESTROY))},t.prototype.changeSize=function(n,r){this.resize(n,r)},t.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(n/2,r/2,m_).setFocalPoint(n/2,r/2,0),l===Bh.ORTHOGRAPHIC?s.setOrthographic(n/-2,n/2,r/2,r/-2,s.getNear(),s.getFar()):s.setAspect(n/r),this.dispatchEvent(new Yl(nr.RESIZE,{width:n,height:r}))},t.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},t.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},t.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},t.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},t.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},t.prototype.render=function(){var n=this;this.dispatchEvent(MI);var r=this.getRenderingService();r.render(this.getConfig(),function(){n.dispatchEvent(ZO)}),this.dispatchEvent(RI)},t.prototype.run=function(){var n=this,r=function(){n.render(),n.frameId=n.requestAnimationFrame(r)};r()},t.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new jm,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new li,new _o,new L1([new OI])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService((0,ie.pi)((0,ie.pi)({},Kr),this.context)),this.context.renderingService=new AI(Kr,this.context),this.context.eventService=new IO(Kr,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},t.prototype.initRenderingService=function(n,r,i){var s=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){s.inited=!0,r?(i?s.requestAnimationFrame(function(){s.dispatchEvent(new Yl(nr.READY))}):s.dispatchEvent(new Yl(nr.READY)),s.readyPromise&&s.resolveReadyPromise()):s.dispatchEvent(new Yl(nr.RENDERER_CHANGED)),r||s.getRoot().forEach(function(l){var c=l.renderable;c&&(c.renderBoundsDirty=!0,c.boundsDirty=!0,c.dirty=!0)}),s.mountChildren(s.getRoot()),n.getConfig().enableAutoRendering&&s.run()})},t.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(s){s.context=r.context,s.init(Kr)})},t.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),(0,ie.ev)([],(0,ie.CR)(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(s){s.destroy(Kr)}),this.initRenderer(n)}},t.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},t.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent(N1):(N1.target=n,this.dispatchEvent(N1,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},t.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(D1):(D1.target=n,this.dispatchEvent(D1,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},t.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},t.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},t.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},t.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},t.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},t.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},t}(RS),zS=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.landmarks=[],n}return t.prototype.rotate=function(n,r,i){if(this.relElevation=sv(r),this.relAzimuth=sv(n),this.relRoll=sv(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===ol.EXPLORING){var s=$t(on(),[1,0,0],Al((this.rotateWorld?1:-1)*this.relElevation)),l=$t(on(),[0,1,0],Al((this.rotateWorld?1:-1)*this.relAzimuth)),c=$t(on(),[0,0,1],Al(this.relRoll)),h=Dr(on(),l,s);h=Dr(on(),h,c);var p=jr.fromQuat(jr.create(),h);jr.translate(this.matrix,this.matrix,[0,0,-this.distance]),jr.multiply(this.matrix,this.matrix,p),jr.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===ol.ORBITING||this.type===ol.EXPLORING?this._getPosition():this.type===ol.TRACKING&&this._getFocalPoint(),this._update(),this},t.prototype.pan=function(n,r){var i=sc(n,r,0),s=Hn.d9(this.position);return Hn.IH(s,s,Hn.bA(Hn.Ue(),this.right,i[0])),Hn.IH(s,s,Hn.bA(Hn.Ue(),this.up,i[1])),this._setPosition(s),this.triggerUpdate(),this},t.prototype.dolly=function(n){var r=this.forward,i=Hn.d9(this.position),s=n*this.dollyingStep,l=this.distance+n*this.dollyingStep;return s=Math.max(Math.min(l,this.maxDistance),this.minDistance)-this.distance,i[0]+=s*r[0],i[1]+=s*r[1],i[2]+=s*r[2],this._setPosition(i),this.type===ol.ORBITING||this.type===ol.EXPLORING?this._getDistance():this.type===ol.TRACKING&&Hn.IH(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},t.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},t.prototype.createLandmark=function(n,r){var i,s,l,c;r===void 0&&(r={});var h=r.position,p=h===void 0?this.position:h,v=r.focalPoint,y=v===void 0?this.focalPoint:v,b=r.roll,T=r.zoom,M=new Kr.CameraContribution;M.setType(this.type,void 0),M.setPosition(p[0],(i=p[1])!==null&&i!==void 0?i:this.position[1],(s=p[2])!==null&&s!==void 0?s:this.position[2]),M.setFocalPoint(y[0],(l=y[1])!==null&&l!==void 0?l:this.focalPoint[1],(c=y[2])!==null&&c!==void 0?c:this.focalPoint[2]),M.setRoll(b!=null?b:this.roll),M.setZoom(T!=null?T:this.zoom);var R={name:n,matrix:jr.clone(M.getWorldTransform()),right:Hn.d9(M.right),up:Hn.d9(M.up),forward:Hn.d9(M.forward),position:Hn.d9(M.getPosition()),focalPoint:Hn.d9(M.getFocalPoint()),distanceVector:Hn.d9(M.getDistanceVector()),distance:M.getDistance(),dollyingStep:M.getDollyingStep(),azimuth:M.getAzimuth(),elevation:M.getElevation(),roll:M.getRoll(),relAzimuth:M.relAzimuth,relElevation:M.relElevation,relRoll:M.relRoll,zoom:M.getZoom()};return this.landmarks.push(R),R},t.prototype.gotoLandmark=function(n,r){var i=this;r===void 0&&(r={});var s=Gl(n)?this.landmarks.find(function(Ye){return Ye.name===n}):n;if(s){var l=(0,$u.Z)(r)?{duration:r}:r,c=l.easing,h=c===void 0?"linear":c,p=l.duration,v=p===void 0?100:p,y=l.easingFunction,b=y===void 0?void 0:y,T=l.onfinish,M=T===void 0?void 0:T,R=l.onframe,L=R===void 0?void 0:R,N=.01;if(v===0){this.syncFromLandmark(s),M&&M();return}this.cancelLandmarkAnimation();var z=s.position,H=s.focalPoint,X=s.zoom,Y=s.roll,ne=b||Kr.EasingFunction(h),ve,Ee=function(){i.setFocalPoint(H),i.setPosition(z),i.setRoll(Y),i.setZoom(X),i.computeMatrix(),i.triggerUpdate(),M&&M()},Ie=function(Ye){ve===void 0&&(ve=Ye);var $e=Ye-ve;if($e>v){Ee();return}var St=ne($e/v),Qe=Hn.Ue(),lt=Hn.Ue(),ht=1,bt=0;Hn.t7(Qe,i.focalPoint,H,St),Hn.t7(lt,i.position,z,St),bt=i.roll*(1-St)+Y*St,ht=i.zoom*(1-St)+X*St,i.setFocalPoint(Qe),i.setPosition(lt),i.setRoll(bt),i.setZoom(ht);var Ht=Hn.TK(Qe,H)+Hn.TK(lt,z);if(Ht<=N&&X==null&&Y==null){Ee();return}i.computeMatrix(),i.triggerUpdate(),$e<v&&(L&&L(St),i.landmarkAnimationID=i.canvas.requestAnimationFrame(Ie))};this.canvas.requestAnimationFrame(Ie)}},t.prototype.syncFromLandmark=function(n){this.matrix=jr.copy(this.matrix,n.matrix),this.right=Hn.JG(this.right,n.right),this.up=Hn.JG(this.up,n.up),this.forward=Hn.JG(this.forward,n.forward),this.position=Hn.JG(this.position,n.position),this.focalPoint=Hn.JG(this.focalPoint,n.focalPoint),this.distanceVector=Hn.JG(this.distanceVector,n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance,this.zoom=n.zoom},t}(Zg);Kr.CameraContribution=zS;var Za=function(){function e(t,n){this.type=t,this.target=n,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return e.copy=function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n},e}(),qm=0,Km=new WeakMap,US=function(){function e(t,n,r){this.observer=t,this.target=n,this.options=r,this.transientObservedNodes=[]}return e.prototype.enqueue=function(t){var n=this.observer.records,r=n.length;if(n.length>0){var i=n[r-1],s=II(i,t);if(s){n[r-1]=s;return}}else DI(this.observer);n[r]=t},e.prototype.addListeners=function(){this.addListeners_(this.target)},e.prototype.addListeners_=function(t){var n=this.options;n.attributes&&t.addEventListener(Ga.ATTR_MODIFIED,this,!0),n.childList&&t.addEventListener(Ga.INSERTED,this,!0),(n.childList||n.subtree)&&t.addEventListener(Ga.REMOVED,this,!0)},e.prototype.removeListeners=function(){this.removeListeners_(this.target)},e.prototype.removeListeners_=function(t){var n=this.options;n.attributes&&t.removeEventListener(Ga.ATTR_MODIFIED,this,!0),n.childList&&t.removeEventListener(Ga.INSERTED,this,!0),(n.childList||n.subtree)&&t.removeEventListener(Ga.REMOVED,this,!0)},e.prototype.removeTransientObservers=function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(n){this.removeListeners_(n);for(var r=Km.get(n),i=0;i<r.length;i++)if(r[i]===this){r.splice(i,1);break}},this)},e.prototype.handleEvent=function(t){t.stopImmediatePropagation();var n,r;switch(t.type){case Ga.ATTR_MODIFIED:var i=t.attrName,s=t.relatedNode.namespaceURI;r=t.target,n=$O("attributes",r),n.attributeName=i,n.attributeNamespace=s;var l=t.attrChange===Gv.ADDITION?null:t.prevValue;jS(r,function(b){if(b.attributes&&!(b.attributeFilter&&b.attributeFilter.length&&b.attributeFilter.indexOf(i)===-1&&b.attributeFilter.indexOf(s)===-1))return b.attributeOldValue?qO(l):n});break;case Ga.REMOVED:case Ga.INSERTED:r=t.relatedNode;var c=t.target,h=void 0,p=void 0;t.type===Ga.INSERTED?(h=[c],p=[]):(h=[],p=[c]);var v=c.previousSibling,y=c.nextSibling;n=$O("childList",r),n.addedNodes=h,n.removedNodes=p,n.previousSibling=v,n.nextSibling=y,jS(r,function(b){if(b.childList)return n})}PI()},e}(),YO=function(){function e(t){this.callback=t,this.nodes=[],this.records=[],this.uid=qm++}return e.prototype.observe=function(t,n){if(!n.childList&&!n.attributes&&!n.characterData||n.attributeOldValue&&!n.attributes||n.attributeFilter&&n.attributeFilter.length&&!n.attributes||n.characterDataOldValue&&!n.characterData)throw new SyntaxError;var r=Km.get(t);r||Km.set(t,r=[]);for(var i,s=0;s<r.length;s++)if(r[s].observer===this){i=r[s],i.removeListeners(),i.options=n;break}i||(i=new US(this,t,n),r.push(i),this.nodes.push(t)),i.addListeners()},e.prototype.disconnect=function(){var t=this;this.nodes.forEach(function(n){for(var r=Km.get(n),i=0;i<r.length;i++){var s=r[i];if(s.observer===t){s.removeListeners(),r.splice(i,1);break}}},this),this.records=[]},e.prototype.takeRecords=function(){var t=this.records;return this.records=[],t},e}(),Zv,bp;function $O(e,t){return Zv=new Za(e,t)}function qO(e){return bp||(bp=Za.copy(Zv),bp.oldValue=e,bp)}function PI(){Zv=bp=void 0}function ny(e){return e===bp||e===Zv}function II(e,t){return e===t?e:bp&&ny(e)?bp:null}function LI(e){e.nodes.forEach(function(t){var n=Km.get(t);n&&n.forEach(function(r){r.observer===e&&r.removeTransientObservers()})})}function jS(e,t){for(var n=e;n;n=n.parentNode){var r=Km.get(n);if(r)for(var i=0;i<r.length;i++){var s=r[i],l=s.options;if(!(n!==e&&!l.subtree)){var c=t(l);c&&s.enqueue(c)}}}}var VS=!1,HS=[];function DI(e){HS.push(e),VS||(VS=!0,typeof Kr.globalThis!="undefined"?Kr.globalThis.setTimeout(ry):ry())}function ry(){VS=!1;var e=HS;HS=[],e.sort(function(n,r){return n.uid-r.uid});var t=!1;e.forEach(function(n){var r=n.takeRecords();LI(n),r.length&&(n.callback(r,n),t=!0)}),t&&ry()}var Xv=function(e){(0,ie.ZT)(t,e);function t(n,r,i,s){var l=e.call(this,n)||this;return l.currentTime=i,l.timelineTime=s,l.target=r,l.type="finish",l.bubbles=!1,l.currentTarget=r,l.defaultPrevented=!1,l.eventPhase=l.AT_TARGET,l.timeStamp=Date.now(),l.currentTime=i,l.timelineTime=s,l}return t}(Qg),KO=0,NI=function(){function e(t,n){var r;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=n,this.id="".concat(KO++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(e.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,r){t.resolveReadyPromise=function(){n(t)},t.rejectReadyPromise=function(){r(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,r){t.resolveFinishedPromise=function(){n(t)},t.rejectFinishedPromise=function(){r(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var n;t=Number(t),!isNaN(t)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),e.prototype.updatePromises=function(){var t=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==t&&(n==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):t==="pending"?this.resolveReadyPromise():n==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&n!==t&&(n==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n==="finished"?this.resolveFinishedPromise():t==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise},e.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},e.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},e.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.prototype.cancel=function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new Xv(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(n)})}},e.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()},e.prototype.updatePlaybackRate=function(t){this.playbackRate=t},e.prototype.targetAnimations=function(){var t,n=(t=this.effect)===null||t===void 0?void 0:t.target;return n.getAnimations()},e.prototype.markTarget=function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)},e.prototype.unmarkTarget=function(){var t=this.targetAnimations(),n=t.indexOf(this);n!==-1&&t.splice(n,1)},e.prototype.tick=function(t,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(t))},e.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},e.prototype.persist=function(){throw new Error(Ta)},e.prototype.addEventListener=function(t,n,r){throw new Error(Ta)},e.prototype.removeEventListener=function(t,n,r){throw new Error(Ta)},e.prototype.dispatchEvent=function(t){throw new Error(Ta)},e.prototype.commitStyles=function(){throw new Error(Ta)},e.prototype.ensureAlive=function(){var t,n;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((t=this.effect)===null||t===void 0)&&t.update(-1)):this._inEffect=!!(!((n=this.effect)===null||n===void 0)&&n.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},e.prototype.tickCurrentTime=function(t,n){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},e.prototype.fireEvents=function(t){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var r=new Xv(null,this,this.currentTime,t);setTimeout(function(){n.onfinish&&n.onfinish(r)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new Xv(null,this,this.currentTime,t);this.onframe(i)}this._finishedFlag=!1}},e}(),F1=4,FI=.001,QO=1e-7,BI=10,B1=11,k1=1/(B1-1),JO=typeof Float32Array=="function",WS=function(e,t){return 1-3*t+3*e},e3=function(e,t){return 3*t-6*e},kx=function(e){return 3*e},Qm=function(e,t,n){return((WS(t,n)*e+e3(t,n))*e+kx(t))*e},zx=function(e,t,n){return 3*WS(t,n)*e*e+2*e3(t,n)*e+kx(t)},Ux=function(e,t,n,r,i){var s,l,c=0;do l=t+(n-t)/2,s=Qm(l,r,i)-e,s>0?n=l:t=l;while(Math.abs(s)>QO&&++c<BI);return l},t3=function(e,t,n,r){for(var i=0;i<F1;++i){var s=zx(t,n,r);if(s===0)return t;var l=Qm(t,n,r)-e;t-=l/s}return t},Yv=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return function(c){return c};for(var i=JO?new Float32Array(B1):new Array(B1),s=0;s<B1;++s)i[s]=Qm(s*k1,e,n);var l=function(c){for(var h=0,p=1,v=B1-1;p!==v&&i[p]<=c;++p)h+=k1;--p;var y=(c-i[p])/(i[p+1]-i[p]),b=h+y*k1,T=zx(b,e,n);return T>=FI?t3(c,b,e,n):T===0?b:Ux(c,h,h+k1,e,n)};return function(c){return c===0||c===1?c:Qm(l(c),t,r)}},n3=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},g_=function(e){return Math.pow(e,2)},M0=function(e){return Math.pow(e,3)},z1=function(e){return Math.pow(e,4)},jx=function(e){return Math.pow(e,5)},Vx=function(e){return Math.pow(e,6)},y_=function(e){return 1-Math.cos(e*Math.PI/2)},Zp=function(e){return 1-Math.sqrt(1-e*e)},cv=function(e){return e*e*(3*e-2)},U1=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)},__=function(e,t){t===void 0&&(t=[]);var n=(0,ie.CR)(t,2),r=n[0],i=r===void 0?1:r,s=n[1],l=s===void 0?.5:s,c=(0,Zl.Z)(Number(i),1,10),h=(0,Zl.Z)(Number(l),.1,2);return e===0||e===1?e:-c*Math.pow(2,10*(e-1))*Math.sin((e-1-h/(Math.PI*2)*Math.asin(1/c))*(Math.PI*2)/h)},b_=function(e,t,n){t===void 0&&(t=[]);var r=(0,ie.CR)(t,4),i=r[0],s=i===void 0?1:i,l=r[1],c=l===void 0?100:l,h=r[2],p=h===void 0?10:h,v=r[3],y=v===void 0?0:v;s=(0,Zl.Z)(s,.1,1e3),c=(0,Zl.Z)(c,.1,1e3),p=(0,Zl.Z)(p,.1,1e3),y=(0,Zl.Z)(y,.1,1e3);var b=Math.sqrt(c/s),T=p/(2*Math.sqrt(c*s)),M=T<1?b*Math.sqrt(1-T*T):0,R=1,L=T<1?(T*b+-y)/M:-y+b,N=n?n*e/1e3:e;return T<1?N=Math.exp(-N*T*b)*(R*Math.cos(M*N)+L*Math.sin(M*N)):N=(R+L*N)*Math.exp(-N*b),e===0||e===1?e:1-N},Hx=function(e,t){t===void 0&&(t=[]);var n=(0,ie.CR)(t,2),r=n[0],i=r===void 0?10:r,s=n[1],l=s=="start"?Math.ceil:Math.floor;return l((0,Zl.Z)(e,0,1)*i)/i},Wx=function(e,t){t===void 0&&(t=[]);var n=(0,ie.CR)(t,4),r=n[0],i=n[1],s=n[2],l=n[3];return Yv(r,i,s,l)(e)},j1=Yv(.42,0,1,1),jh=function(e){return function(t,n,r){return n===void 0&&(n=[]),1-e(1-t,n,r)}},xp=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?e(t*2,n,r)/2:1-e(t*-2+2,n,r)/2}},$d=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?(1-e(1-t*2,n,r))/2:(e(t*2-1,n,r)+1)/2}},GS={steps:Hx,"step-start":function(e){return Hx(e,[1,"start"])},"step-end":function(e){return Hx(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":Wx,ease:function(e){return Wx(e,[.25,.1,.25,1])},in:j1,out:jh(j1),"in-out":xp(j1),"out-in":$d(j1),"in-quad":g_,"out-quad":jh(g_),"in-out-quad":xp(g_),"out-in-quad":$d(g_),"in-cubic":M0,"out-cubic":jh(M0),"in-out-cubic":xp(M0),"out-in-cubic":$d(M0),"in-quart":z1,"out-quart":jh(z1),"in-out-quart":xp(z1),"out-in-quart":$d(z1),"in-quint":jx,"out-quint":jh(jx),"in-out-quint":xp(jx),"out-in-quint":$d(jx),"in-expo":Vx,"out-expo":jh(Vx),"in-out-expo":xp(Vx),"out-in-expo":$d(Vx),"in-sine":y_,"out-sine":jh(y_),"in-out-sine":xp(y_),"out-in-sine":$d(y_),"in-circ":Zp,"out-circ":jh(Zp),"in-out-circ":xp(Zp),"out-in-circ":$d(Zp),"in-back":cv,"out-back":jh(cv),"in-out-back":xp(cv),"out-in-back":$d(cv),"in-bounce":U1,"out-bounce":jh(U1),"in-out-bounce":xp(U1),"out-in-bounce":$d(U1),"in-elastic":__,"out-elastic":jh(__),"in-out-elastic":xp(__),"out-in-elastic":$d(__),spring:b_,"spring-in":b_,"spring-out":jh(b_),"spring-in-out":xp(b_),"spring-out-in":$d(b_)},r3=function(e){return n3(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},i3=function(e){return GS[r3(e)]||GS.linear},o3=function(e){return e},a3=1,kI=.5,ZS=0;function Gx(e,t){return function(n){if(n>=1)return 1;var r=1/e;return n+=t*r,n-n%r}}var V1="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",s3=new RegExp("cubic-bezier\\("+V1+","+V1+","+V1+","+V1+"\\)"),l3=/steps\(\s*(\d+)\s*\)/,u3=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Zx(e){var t=s3.exec(e);if(t)return Yv.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t.slice(1).map(Number)),!1));var n=l3.exec(e);if(n)return Gx(Number(n[1]),ZS);var r=u3.exec(e);return r?Gx(Number(r[1]),{start:a3,middle:kI,end:ZS}[r[2]]):i3(e)}function c3(e){return Math.abs(_s(e)/(e.playbackRate||1))}function _s(e){var t;return e.duration===0||e.iterations===0?0:(e.duration==="auto"?0:Number(e.duration))*((t=e.iterations)!==null&&t!==void 0?t:1)}var XS=0,Xx=1,kf=2,Au=3;function ph(e,t,n){if(t===null)return XS;var r=n.endTime;return t<Math.min(n.delay,r)?Xx:t>=Math.min(n.delay+e+n.endDelay,r)?kf:Au}function fv(e,t,n,r,i){switch(r){case Xx:return t==="backwards"||t==="both"?0:null;case Au:return n-i;case kf:return t==="forwards"||t==="both"?e:null;case XS:return null}}function f3(e,t,n,r,i){var s=i;return e===0?t!==Xx&&(s+=n):s+=r/e,s}function h3(e,t,n,r,i,s){var l=e===1/0?t%1:e%1;return l===0&&n===kf&&r!==0&&(i!==0||s===0)&&(l=1),l}function p3(e,t,n,r){return e===kf&&t===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function YS(e,t,n){var r=e;if(e!=="normal"&&e!=="reverse"){var i=t;e==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function Yx(e,t,n){var r=ph(e,t,n),i=fv(e,n.fill,t,r,n.delay);if(i===null)return null;var s=n.duration==="auto"?0:n.duration,l=f3(s,r,n.iterations,i,n.iterationStart),c=h3(l,n.iterationStart,r,n.iterations,i,s),h=p3(r,n.iterations,c,l),p=YS(n.direction,h,c);return n.currentIteration=h,n.progress=p,n.easingFunction(p)}function qd(e,t,n){var r=H1(e,t),i=v3(r,n);return function(s,l){if(l!==null)i.filter(function(h){return l>=h.applyFrom&&l<h.applyTo}).forEach(function(h){var p=l-h.startOffset,v=h.endOffset-h.startOffset,y=v===0?0:h.easingFunction(p/v);s.setAttribute(h.property,h.interpolation(y),!1,!1)});else for(var c in r)hv(c)&&s.setAttribute(c,null)}}function hv(e){return e!=="offset"&&e!=="easing"&&e!=="composite"&&e!=="computedOffset"}function H1(e,t){for(var n={},r=0;r<e.length;r++)for(var i in e[r])if(hv(i)){var s={offset:e[r].offset,computedOffset:e[r].computedOffset,easing:e[r].easing,easingFunction:Zx(e[r].easing)||t.easingFunction,value:e[r][i]};n[i]=n[i]||[],n[i].push(s)}return n}function v3(e,t){var n=[];for(var r in e)for(var i=e[r],s=0;s<i.length-1;s++){var l=s,c=s+1,h=i[l].computedOffset,p=i[c].computedOffset,v=h,y=p;s===0&&(v=-1/0,p===0&&(c=l)),s===i.length-2&&(y=1/0,h===1&&(l=c)),n.push({applyFrom:v,applyTo:y,startOffset:i[l].computedOffset,endOffset:i[c].computedOffset,easingFunction:i[l].easingFunction,property:r,interpolation:m3(r,i[l].value,i[c].value,t)})}return n.sort(function(b,T){return b.startOffset-T.startOffset}),n}var $x=function(e,t,n){return function(r){var i=$S(e,t,r);return!Kr.enableCSSParsing&&(0,$u.Z)(i)?i:n(i)}};function m3(e,t,n,r){var i=Hv[e];if(i&&i.syntax&&i.int){var s=Kr.styleValueRegistry.getPropertySyntax(i.syntax);if(s){var l=void 0,c=void 0;if(Kr.enableCSSParsing){var h=Kr.styleValueRegistry.parseProperty(e,t,r,!1),p=Kr.styleValueRegistry.parseProperty(e,n,r,!1);l=Kr.styleValueRegistry.computeProperty(e,h,r,!1),c=Kr.styleValueRegistry.computeProperty(e,p,r,!1)}else{var v=s.parserWithCSSDisabled;l=v?v(t,r):t,c=v?v(n,r):n}var y=s.mixer(l,c,r);if(y){var b=$x.apply(void 0,(0,ie.ev)([],(0,ie.CR)(y),!1));return function(T){return T===0?t:T===1?n:b(T)}}}}return $x(!1,!0,function(T){return T?n:t})}function $S(e,t,n){if(typeof e=="number"&&typeof t=="number")return e*(1-n)+t*n;if(typeof e=="boolean"&&typeof t=="boolean"||typeof e=="string"&&typeof t=="string")return n<.5?e:t;if(Array.isArray(e)&&Array.isArray(t)){for(var r=e.length,i=t.length,s=Math.max(r,i),l=[],c=0;c<s;c++)l.push($S(e[c<r?c:r-1],t[c<i?c:i-1],n));return l}throw new Error("Mismatched interpolation arguments "+e+":"+t)}var x_=function(){function e(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=o3,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=Zx(t),this._easing=t},enumerable:!1,configurable:!0}),e}();function g3(e){var t=[];for(var n in e)if(!(n in["easing","offset","composite"])){var r=e[n];Array.isArray(r)||(r=[r]);for(var i=r.length,s=0;s<i;s++){if(!t[s]){var l={};"offset"in e&&(l.offset=Number(e.offset)),"easing"in e&&(l.easing=e.easing),"composite"in e&&(l.composite=e.composite),t[s]=l}r[s]!==void 0&&r[s]!==null&&(t[s][n]=r[s])}}return t.sort(function(c,h){return(c.computedOffset||0)-(h.computedOffset||0)}),t}function qS(e,t){if(e===null)return[];Array.isArray(e)||(e=g3(e));for(var n=e.map(function(h){var p={};t!=null&&t.composite&&(p.composite="auto");for(var v in h){var y=h[v];if(v==="offset"){if(y!==null){if(y=Number(y),!isFinite(y))throw new Error("Keyframe offsets must be numbers.");if(y<0||y>1)throw new Error("Keyframe offsets must be between 0 and 1.");p.computedOffset=y}}else if(v==="composite"&&["replace","add","accumulate","auto"].indexOf(y)===-1)throw new Error("".concat(y," compositing is not supported"));p[v]=y}return p.offset===void 0&&(p.offset=null),p.easing===void 0&&(p.easing=(t==null?void 0:t.easing)||"linear"),p.composite===void 0&&(p.composite="auto"),p}),r=!0,i=-1/0,s=0;s<n.length;s++){var l=n[s].offset;if((0,Lo.Z)(l))r=!1;else{if(l<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=l}}n=n.filter(function(h){return Number(h.offset)>=0&&Number(h.offset)<=1});function c(){var h,p,v=n.length;n[v-1].computedOffset=Number((h=n[v-1].offset)!==null&&h!==void 0?h:1),v>1&&(n[0].computedOffset=Number((p=n[0].offset)!==null&&p!==void 0?p:0));for(var y=0,b=Number(n[0].computedOffset),T=1;T<v;T++){var M=n[T].computedOffset;if(!(0,Lo.Z)(M)&&!(0,Lo.Z)(b)){for(var R=1;R<T-y;R++)n[y+R].computedOffset=b+(Number(M)-b)*R/(T-y);y=T,b=Number(M)}}}return r||c(),n}var zI="backwards|forwards|both|none".split("|"),KS="reverse|alternate|alternate-reverse".split("|");function QS(e,t){var n=new x_;return t&&(n.fill="both",n.duration="auto"),typeof e=="number"&&!isNaN(e)?n.duration=e:e!==void 0&&Object.keys(e).forEach(function(r){if(e[r]!==void 0&&e[r]!==null&&e[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof e[r]!="number"||isNaN(e[r]))||r==="fill"&&zI.indexOf(e[r])===-1||r==="direction"&&KS.indexOf(e[r])===-1)return;n[r]=e[r]}}),n}function $v(e,t){return e=UI(e!=null?e:{duration:"auto"}),QS(e,t)}function UI(e){return typeof e=="number"&&(isNaN(e)?e={duration:"auto"}:e={duration:e}),e}var Ep=function(){function e(t,n,r){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=$v(r,!1),this.timing.effect=this,this.timing.activeDuration=c3(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=qS(n,this.timing),this.interpolations=qd(this.normalizedKeyframes,this.timing,this.target);var s=Kr.globalThis.Proxy;this.computedTiming=s?new s(this.timing,{get:function(l,c){return c==="duration"?l.duration==="auto"?0:l.duration:c==="fill"?l.fill==="auto"?"none":l.fill:c==="localTime"?i.animation&&i.animation.currentTime||null:c==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:l.currentIteration||0:c==="progress"?!i.animation||i.animation.playState!=="running"?null:l.progress||0:l[c]},set:function(){return!0}}):this.timing}return e.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},e.prototype.update=function(t){return t===null?!1:(this.timeFraction=Yx(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)},e.prototype.getKeyframes=function(){return this.normalizedKeyframes},e.prototype.setKeyframes=function(t){this.normalizedKeyframes=qS(t)},e.prototype.getComputedTiming=function(){return this.computedTiming},e.prototype.getTiming=function(){return this.timing},e.prototype.updateTiming=function(t){var n=this;Object.keys(t||{}).forEach(function(r){n.timing[r]=t[r]})},e}();function JS(e,t){return Number(e.id)-Number(t.id)}var Zo=function(){function e(t){var n=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(JS),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(s){s[1](r)}),n.applyPendingEffects()}}return e.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},e.prototype.isTicking=function(){return this.inTick},e.prototype.play=function(t,n,r){var i=new Ep(t,n,r),s=new NI(i,this);return this.animations.push(s),this.restartWebAnimationsNextTick(),s.updatePromises(),s.play(),s.updatePromises(),s},e.prototype.applyDirtiedAnimation=function(t){var n=this;if(!this.inTick){t.markTarget();var r=t.targetAnimations();r.sort(JS);var i=this.tick(Number(this.currentTime),!1,r.slice())[1];i.forEach(function(s){var l=n.animations.indexOf(s);l!==-1&&n.animations.splice(l,1)}),this.applyPendingEffects()}},e.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},e.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},e.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]},e.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},e.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})},e.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},e.prototype.rAF=function(t){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,t]),n},e.prototype.requestAnimationFrame=function(t){var n=this;return this.rAF(function(r){n.updateAnimationsPromises(),t(r),n.updateAnimationsPromises()})},e.prototype.tick=function(t,n,r){var i,s,l=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var c=[],h=[],p=[],v=[];return r.forEach(function(y){y.tick(t,n),y._inEffect?(h.push(y.effect),y.markTarget()):(c.push(y.effect),y.unmarkTarget()),y._needsTick&&(l.ticking=!0);var b=y._inEffect||y._needsTick;y._inTimeline=b,b?p.push(y):v.push(y)}),(i=this.pendingEffects).push.apply(i,(0,ie.ev)([],(0,ie.CR)(c),!1)),(s=this.pendingEffects).push.apply(s,(0,ie.ev)([],(0,ie.CR)(h),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[p,v]},e}();Kr.EasingFunction=Zx,Kr.AnimationTimeline=Zo;const qx="main-layer",W1="label-layer",dv="element",G1="view",E_="plot",ew="component",Kx="label",tw="area",jI="mask",iy={};function S_(e,t){Object.assign(iy,{[e]:t})}function oy(e,t){var n=t.r;e.arc(n,n,n,0,Math.PI*2,!1)}function ay(e,t){var n=t.rx,r=t.ry,i=n,s=r;if(e.ellipse)e.ellipse(i,s,i,s,0,0,Math.PI*2,!1);else{var l=i>s?i:s,c=i>s?1:i/s,h=i>s?s/i:1;e.save(),e.scale(c,h),e.arc(l,l,l,0,Math.PI*2)}}function Qx(e,t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=t.defX,c=l===void 0?0:l,h=t.defY,p=h===void 0?0:h,v=t.markerStart,y=t.markerEnd,b=t.markerStartOffset,T=t.markerEndOffset,M=0,R=0,L=0,N=0,z=0,H,X;v&&Js(v)&&b&&(H=i-n,X=s-r,z=Math.atan2(X,H),M=Math.cos(z)*(b||0),R=Math.sin(z)*(b||0)),y&&Js(y)&&T&&(H=n-i,X=r-s,z=Math.atan2(X,H),L=Math.cos(z)*(T||0),N=Math.sin(z)*(T||0)),e.moveTo(n-c+M,r-p+R),e.lineTo(i-c+L,s-p+N)}function w_(e,t){var n=t.defX,r=n===void 0?0:n,i=t.defY,s=i===void 0?0:i,l=t.markerStart,c=t.markerEnd,h=t.markerStartOffset,p=t.markerEndOffset,v=t.path,y=v.absolutePath,b=v.segments,T=0,M=0,R=0,L=0,N=0,z,H;if(l&&Js(l)&&h){var X=(0,ie.CR)(l.parentNode.getStartTangent(),2),Y=X[0],ne=X[1];z=Y[0]-ne[0],H=Y[1]-ne[1],N=Math.atan2(H,z),T=Math.cos(N)*(h||0),M=Math.sin(N)*(h||0)}if(c&&Js(c)&&p){var ve=(0,ie.CR)(c.parentNode.getEndTangent(),2),Y=ve[0],ne=ve[1];z=Y[0]-ne[0],H=Y[1]-ne[1],N=Math.atan2(H,z),R=Math.cos(N)*(p||0),L=Math.sin(N)*(p||0)}for(var Ee=0;Ee<y.length;Ee++){var Ie=y[Ee],Ye=Ie[0],$e=y[Ee+1],St=Ee===0&&(T!==0||M!==0),Qe=(Ee===y.length-1||$e&&($e[0]==="M"||$e[0]==="Z"))&&R!==0&&L!==0;switch(Ye){case"M":St?(e.moveTo(Ie[1]-r+T,Ie[2]-s+M),e.lineTo(Ie[1]-r,Ie[2]-s)):e.moveTo(Ie[1]-r,Ie[2]-s);break;case"L":Qe?e.lineTo(Ie[1]-r+R,Ie[2]-s+L):e.lineTo(Ie[1]-r,Ie[2]-s);break;case"Q":e.quadraticCurveTo(Ie[1]-r,Ie[2]-s,Ie[3]-r,Ie[4]-s),Qe&&e.lineTo(Ie[3]-r+R,Ie[4]-s+L);break;case"C":e.bezierCurveTo(Ie[1]-r,Ie[2]-s,Ie[3]-r,Ie[4]-s,Ie[5]-r,Ie[6]-s),Qe&&e.lineTo(Ie[5]-r+R,Ie[6]-s+L);break;case"A":{var lt=b[Ee].arcParams,ht=lt.cx,bt=lt.cy,Ht=lt.rx,Ot=lt.ry,kt=lt.startAngle,Mn=lt.endAngle,Wn=lt.xRotation,cr=lt.sweepFlag;if(e.ellipse)e.ellipse(ht-r,bt-s,Ht,Ot,Wn,kt,Mn,!!(1-cr));else{var ar=Ht>Ot?Ht:Ot,Yr=Ht>Ot?1:Ht/Ot,Pi=Ht>Ot?Ot/Ht:1;e.translate(ht-r,bt-s),e.rotate(Wn),e.scale(Yr,Pi),e.arc(0,0,ar,kt,Mn,!!(1-cr)),e.scale(1/Yr,1/Pi),e.rotate(-Wn),e.translate(-(ht-r),-(bt-s))}Qe&&e.lineTo(Ie[6]-r+R,Ie[7]-s+L);break}case"Z":e.closePath();break}}}function nw(e,t){var n=t.defX,r=n===void 0?0:n,i=t.defY,s=i===void 0?0:i,l=t.markerStart,c=t.markerEnd,h=t.markerStartOffset,p=t.markerEndOffset,v=t.points.points,y=v.length,b=v[0][0]-r,T=v[0][1]-s,M=v[y-1][0]-r,R=v[y-1][1]-s,L=0,N=0,z=0,H=0,X=0,Y,ne;l&&Js(l)&&h&&(Y=v[1][0]-v[0][0],ne=v[1][1]-v[0][1],X=Math.atan2(ne,Y),L=Math.cos(X)*(h||0),N=Math.sin(X)*(h||0)),c&&Js(c)&&p&&(Y=v[y-1][0]-v[0][0],ne=v[y-1][1]-v[0][1],X=Math.atan2(ne,Y),z=Math.cos(X)*(p||0),H=Math.sin(X)*(p||0)),e.moveTo(b+(L||z),T+(N||H));for(var ve=1;ve<y-1;ve++){var Ee=v[ve];e.lineTo(Ee[0]-r,Ee[1]-s)}e.lineTo(M,R)}function qv(e,t){var n=t.defX,r=n===void 0?0:n,i=t.defY,s=i===void 0?0:i,l=t.markerStart,c=t.markerEnd,h=t.markerStartOffset,p=t.markerEndOffset,v=t.points.points,y=v.length,b=v[0][0]-r,T=v[0][1]-s,M=v[y-1][0]-r,R=v[y-1][1]-s,L=0,N=0,z=0,H=0,X=0,Y,ne;l&&Js(l)&&h&&(Y=v[1][0]-v[0][0],ne=v[1][1]-v[0][1],X=Math.atan2(ne,Y),L=Math.cos(X)*(h||0),N=Math.sin(X)*(h||0)),c&&Js(c)&&p&&(Y=v[y-2][0]-v[y-1][0],ne=v[y-2][1]-v[y-1][1],X=Math.atan2(ne,Y),z=Math.cos(X)*(p||0),H=Math.sin(X)*(p||0)),e.moveTo(b+L,T+N);for(var ve=1;ve<y-1;ve++){var Ee=v[ve];e.lineTo(Ee[0]-r,Ee[1]-s)}e.lineTo(M+z,R+H)}function y3(e,t){var n=t.radius,r=t.width,i=t.height,s=r,l=i,c=n&&n.some(function(L){return L!==0});if(!c)e.rect(0,0,s,l);else{var h=r>0?1:-1,p=i>0?1:-1,v=h+p===0,y=(0,ie.CR)(n.map(function(L){return(0,Zl.Z)(L,0,Math.min(Math.abs(s)/2,Math.abs(l)/2))}),4),b=y[0],T=y[1],M=y[2],R=y[3];e.moveTo(h*b,0),e.lineTo(s-h*T,0),T!==0&&e.arc(s-h*T,p*T,T,-p*Math.PI/2,h>0?0:Math.PI,v),e.lineTo(s,l-p*M),M!==0&&e.arc(s-h*M,l-p*M,M,h>0?0:Math.PI,p>0?Math.PI/2:1.5*Math.PI,v),e.lineTo(h*R,l),R!==0&&e.arc(h*R,l-p*R,R,p>0?Math.PI/2:-Math.PI/2,h>0?Math.PI:0,v),e.lineTo(0,p*b),b!==0&&e.arc(h*b,p*b,b,h>0?Math.PI:0,p>0?Math.PI*1.5:Math.PI/2,v)}}var _3=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="canvas-path-generator",n}return t.prototype.init=function(){var n,r=(n={},n[Gr.CIRCLE]=oy,n[Gr.ELLIPSE]=ay,n[Gr.RECT]=y3,n[Gr.LINE]=Qx,n[Gr.POLYLINE]=qv,n[Gr.POLYGON]=nw,n[Gr.PATH]=w_,n[Gr.TEXT]=void 0,n[Gr.GROUP]=void 0,n[Gr.IMAGE]=void 0,n[Gr.HTML]=void 0,n[Gr.MESH]=void 0,n);this.context.pathGeneratorFactory=r},t.prototype.destroy=function(){delete this.context.pathGeneratorFactory},t}(Hp),Jx=Hn.Ue(),b3=Hn.Ue(),x3=Hn.Ue(),e2=jr.create(),E3=function(){function e(){var t=this;this.isHit=function(n,r,i,s){var l=t.context.pointInPathPickerFactory[n.nodeName];if(l){var c=jr.invert(e2,i),h=Hn.fF(b3,Hn.t8(x3,r[0],r[1],0),c),p=n.getGeometryBounds().halfExtents,v=n.parsedStyle.anchor;if(h[0]+=(v&&v[0]||0)*p[0]*2,h[1]+=(v&&v[1]||0)*p[1]*2,l(n,new Sc(h[0],h[1]),s,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),s=t.context.pathGeneratorFactory[n.nodeName];return s&&(i.beginPath(),s(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return e.prototype.apply=function(t,n){var r=this,i,s=t.renderingService,l=t.renderingContext;this.context=t,this.runtime=n;var c=(i=l.root)===null||i===void 0?void 0:i.ownerDocument;s.hooks.pick.tapPromise(e.tag,function(h){return(0,ie.mG)(r,void 0,void 0,function(){return(0,ie.Jh)(this,function(p){return[2,this.pick(c,h)]})})}),s.hooks.pickSync.tap(e.tag,function(h){return r.pick(c,h)})},e.prototype.pick=function(t,n){var r,i,s=n.topmost,l=n.position,c=l.x,h=l.y,p=Hn.t8(Jx,c,h,0),v=t.elementsFromBBox(p[0],p[1],p[0],p[1]),y=[];try{for(var b=(0,ie.XA)(v),T=b.next();!T.done;T=b.next()){var M=T.value,R=M.getWorldTransform(),L=this.isHit(M,p,R,!1);if(L){var N=_S(M);if(N){var z=N.parsedStyle.clipPath,H=this.isHit(z,p,z.getWorldTransform(),!0);if(H){if(s)return n.picked=[M],n;y.push(M)}}else{if(s)return n.picked=[M],n;y.push(M)}}}}catch(X){r={error:X}}finally{try{T&&!T.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}}return n.picked=y,n},e.tag="CanvasPicker",e}();function hd(e,t,n){var r=e.parsedStyle,i=r.r,s=r.fill,l=r.stroke,c=r.lineWidth,h=r.increasedLineWidthForHitTesting,p=r.pointerEvents,v=((c||0)+(h||0))/2,y=Zs(i,i,t.x,t.y),b=(0,ie.CR)(Kg(p,s,l),2),T=b[0],M=b[1];return T&&M||n?y<=i+v:T?y<=i:M?y>=i-v&&y<=i+v:!1}function Z1(e,t,n,r){return e/(n*n)+t/(r*r)}function S3(e,t,n){var r=e.parsedStyle,i=r.rx,s=r.ry,l=r.fill,c=r.stroke,h=r.lineWidth,p=r.increasedLineWidthForHitTesting,v=r.pointerEvents,y=t.x,b=t.y,T=(0,ie.CR)(Kg(v,l,c),2),M=T[0],R=T[1],L=((h||0)+(p||0))/2,N=(y-i)*(y-i),z=(b-s)*(b-s);return M&&R||n?Z1(N,z,i+L,s+L)<=1:M?Z1(N,z,i,s)<=1:R?Z1(N,z,i-L,s-L)>=1&&Z1(N,z,i+L,s+L)<=1:!1}function Jm(e,t,n,r,i,s){return i>=e&&i<=e+n&&s>=t&&s<=t+r}function w3(e,t,n,r,i,s,l){var c=i/2;return Jm(e-c,t-c,n,i,s,l)||Jm(e+n-c,t-c,i,r,s,l)||Jm(e+c,t+r-c,n,i,s,l)||Jm(e-c,t+c,i,r,s,l)}function X1(e,t,n,r,i,s,l,c){var h=(Math.atan2(c-t,l-e)+Math.PI*2)%(Math.PI*2),p={x:e+n*Math.cos(h),y:t+n*Math.sin(h)};return Zs(p.x,p.y,l,c)<=s/2}function Kv(e,t,n,r,i,s,l){var c=Math.min(e,n),h=Math.max(e,n),p=Math.min(t,r),v=Math.max(t,r),y=i/2;return s>=c-y&&s<=h+y&&l>=p-y&&l<=v+y?Nh(e,t,n,r,s,l)<=i/2:!1}function rw(e,t,n,r,i){var s=e.length;if(s<2)return!1;for(var l=0;l<s-1;l++){var c=e[l][0],h=e[l][1],p=e[l+1][0],v=e[l+1][1];if(Kv(c,h,p,v,t,n,r))return!0}if(i){var y=e[0],b=e[s-1];if(Kv(y[0],y[1],b[0],b[1],t,n,r))return!0}return!1}var T3=1e-6;function t2(e){return Math.abs(e)<T3?0:e<0?-1:1}function iw(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function ow(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var s=0;s<i;s++){var l=e[s],c=e[(s+1)%i];if(iw(l,c,[t,n]))return!0;t2(l[1]-n)>0!=t2(c[1]-n)>0&&t2(t-(n-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(r=!r)}return r}function aw(e,t,n){for(var r=!1,i=0;i<e.length;i++){var s=e[i];if(r=ow(s,t,n),r)break}return r}function A3(e,t,n){var r=e.parsedStyle,i=r.x1,s=r.y1,l=r.x2,c=r.y2,h=r.lineWidth,p=r.increasedLineWidthForHitTesting,v=r.defX,y=v===void 0?0:v,b=r.defY,T=b===void 0?0:b,M=r.pointerEvents,R=r.fill,L=r.stroke,N=(0,ie.CR)(Kg(M,R,L),2),z=N[1];return!z&&!n||!h?!1:Kv(i,s,l,c,(h||0)+(p||0),t.x+y,t.y+T)}function Nu(e,t,n,r,i){for(var s=!1,l=t/2,c=0;c<e.length;c++){var h=e[c],p=h.currentPoint,v=h.params,y=h.prePoint,b=h.box;if(!(b&&!Jm(b.x-l,b.y-l,b.width+t,b.height+t,n,r)))switch(h.command){case"L":case"Z":if(s=Kv(y[0],y[1],p[0],p[1],t,n,r),s)return!0;break;case"Q":var T=Ug(y[0],y[1],v[1],v[2],v[3],v[4],n,r);if(s=T<=t/2,s)return!0;break;case"C":var M=Ng(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],n,r,i);if(s=M<=t/2,s)return!0;break;case"A":h.cubicParams||(h.cubicParams=Wa(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],v[7],void 0));for(var R=h.cubicParams,L=y,N=0;N<R.length;N+=6){var z=Ng(L[0],L[1],R[N],R[N+1],R[N+2],R[N+3],R[N+4],R[N+5],n,r,i);if(L=[R[N+4],R[N+5]],s=z<=t/2,s)return!0}break}}return s}function sw(e,t,n,r,i,s){var l=e.parsedStyle,c=l.lineWidth,h=l.increasedLineWidthForHitTesting,p=l.stroke,v=l.fill,y=l.defX,b=y===void 0?0:y,T=l.defY,M=T===void 0?0:T,R=l.path,L=l.pointerEvents,N=R.segments,z=R.hasArc,H=R.polylines,X=R.polygons,Y=(0,ie.CR)(Kg(L,(X==null?void 0:X.length)&&v,p),2),ne=Y[0],ve=Y[1],Ee=mx(e),Ie=!1;return ne||n?(z?Ie=r(e,t):Ie=aw(X,t.x+b,t.y+M)||aw(H,t.x+b,t.y+M),Ie):((ve||n)&&(Ie=Nu(N,(c||0)+(h||0),t.x+b,t.y+M,Ee)),Ie)}function T_(e,t,n){var r=e.parsedStyle,i=r.stroke,s=r.fill,l=r.lineWidth,c=r.increasedLineWidthForHitTesting,h=r.points,p=r.defX,v=p===void 0?0:p,y=r.defY,b=y===void 0?0:y,T=r.pointerEvents,M=(0,ie.CR)(Kg(T,s,i),2),R=M[0],L=M[1],N=!1;return(L||n)&&(N=rw(h.points,(l||0)+(c||0),t.x+v,t.y+b,!0)),!N&&(R||n)&&(N=ow(h.points,t.x+v,t.y+b)),N}function Y1(e,t,n){var r=e.parsedStyle,i=r.lineWidth,s=r.increasedLineWidthForHitTesting,l=r.points,c=r.defX,h=c===void 0?0:c,p=r.defY,v=p===void 0?0:p,y=r.pointerEvents,b=r.fill,T=r.stroke,M=(0,ie.CR)(Kg(y,b,T),2),R=M[1];return!R&&!n||!i?!1:rw(l.points,(i||0)+(s||0),t.x+h,t.y+v,!1)}function $1(e,t,n,r,i){var s=e.parsedStyle,l=s.radius,c=s.fill,h=s.stroke,p=s.lineWidth,v=s.increasedLineWidthForHitTesting,y=s.width,b=s.height,T=s.pointerEvents,M=(0,ie.CR)(Kg(T,c,h),2),R=M[0],L=M[1],N=l&&l.some(function(Y){return Y!==0}),z=(p||0)+(v||0);if(N){var X=!1;return(L||n)&&(X=pv(0,0,y,b,l.map(function(Y){return(0,Zl.Z)(Y,0,Math.min(Math.abs(y)/2,Math.abs(b)/2))}),z,t.x,t.y)),!X&&(R||n)&&(X=r(e,t)),X}else{var H=z/2;if(R&&L||n)return Jm(0-H,0-H,y+H,b+H,t.x,t.y);if(R)return Jm(0,0,y,b,t.x,t.y);if(L)return w3(0,0,y,b,z,t.x,t.y)}return!1}function pv(e,t,n,r,i,s,l,c){var h=(0,ie.CR)(i,4),p=h[0],v=h[1],y=h[2],b=h[3];return Kv(e+p,t,e+n-v,t,s,l,c)||Kv(e+n,t+v,e+n,t+r-y,s,l,c)||Kv(e+n-y,t+r,e+b,t+r,s,l,c)||Kv(e,t+r-b,e,t+p,s,l,c)||X1(e+n-v,t+v,v,1.5*Math.PI,2*Math.PI,s,l,c)||X1(e+n-y,t+r-y,y,0,.5*Math.PI,s,l,c)||X1(e+b,t+r-b,b,.5*Math.PI,Math.PI,s,l,c)||X1(e+p,t+p,p,Math.PI,1.5*Math.PI,s,l,c)}function A_(e,t,n,r,i,s){var l=e.parsedStyle,c=l.pointerEvents,h=l.width,p=l.height;if(c==="non-transparent-pixel"){var v=i.config.offscreenCanvas,y=s.offscreenCanvasCreator.getOrCreateCanvas(v),b=s.offscreenCanvasCreator.getOrCreateContext(v,{willReadFrequently:!0});y.width=h,y.height=p,i.defaultStyleRendererFactory[Gr.IMAGE].render(b,e.parsedStyle,e,void 0,void 0,void 0);var T=b.getImageData(t.x,t.y,1,1).data;return T.every(function(M){return M!==0})}return!0}var C3=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="canvas-picker",n}return t.prototype.init=function(){var n,r=function(){return!0},i=(n={},n[Gr.CIRCLE]=hd,n[Gr.ELLIPSE]=S3,n[Gr.RECT]=$1,n[Gr.LINE]=A3,n[Gr.POLYLINE]=Y1,n[Gr.POLYGON]=T_,n[Gr.PATH]=sw,n[Gr.TEXT]=r,n[Gr.GROUP]=null,n[Gr.IMAGE]=A_,n[Gr.HTML]=null,n[Gr.MESH]=null,n);this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new E3)},t.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},t}(Hp),q1=function(){function e(t){this.canvasRendererPluginOptions=t,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreen=!1,this.vpMatrix=jr.create(),this.dprMatrix=jr.create(),this.tmpMat4=jr.create(),this.vec3a=Hn.Ue(),this.vec3b=Hn.Ue(),this.vec3c=Hn.Ue(),this.vec3d=Hn.Ue()}return e.prototype.apply=function(t,n){var r=this;this.context=t;var i=t.config,s=t.camera,l=t.renderingService,c=t.renderingContext,h=t.rBushRoot,p=t.pathGeneratorFactory;this.rBush=h,this.pathGeneratorFactory=p;var v=t.contextService,y=c.root.ownerDocument.defaultView,b=function(R){var L=R.target,N=L.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)},T=function(R){var L=R.target,N=L.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)};l.hooks.init.tap(e.tag,function(){y.addEventListener(Ga.UNMOUNTED,b),y.addEventListener(Ga.CULLED,T);var R=v.getDPR(),L=i.width,N=i.height,z=v.getContext();r.clearRect(z,0,0,L*R,N*R,i.background)}),l.hooks.destroy.tap(e.tag,function(){y.removeEventListener(Ga.UNMOUNTED,b),y.removeEventListener(Ga.CULLED,T),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]}),l.hooks.beginFrame.tap(e.tag,function(){var R=v.getContext(),L=v.getDPR(),N=i.width,z=i.height,H=r.canvasRendererPluginOptions,X=H.dirtyObjectNumThreshold,Y=H.dirtyObjectRatioThreshold,ne=l.getStats(),ve=ne.total,Ee=ne.rendered,Ie=Ee/ve;r.clearFullScreen=l.disableDirtyRectangleRendering()||Ee>X&&Ie>Y,R&&(R.resetTransform?R.resetTransform():R.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(R,0,0,N*L,z*L,i.background))});var M=function(R,L){R.isVisible()&&!R.isCulled()&&(r.renderDisplayObject(R,L,r.context,r.restoreStack,n),r.saveDirtyAABB(R));var N=R.sortable.sorted||R.childNodes;N.forEach(function(z){M(z,L)})};l.hooks.endFrame.tap(e.tag,function(){var R=v.getContext(),L=v.getDPR();if(jr.fromScaling(r.dprMatrix,[L,L,1]),jr.multiply(r.vpMatrix,r.dprMatrix,s.getOrthoMatrix()),r.clearFullScreen)M(c.root,R);else{var N=r.safeMergeAABB.apply(r,(0,ie.ev)([r.mergeDirtyAABBs(r.renderQueue)],(0,ie.CR)(r.removedRBushNodeAABBs.map(function(Wn){var cr=Wn.minX,ar=Wn.minY,Yr=Wn.maxX,Pi=Wn.maxY,so=new tu;return so.setMinMax([cr,ar,0],[Yr,Pi,0]),so})),!1));if(r.removedRBushNodeAABBs=[],tu.isEmpty(N)){r.renderQueue=[];return}var z=r.convertAABB2Rect(N),H=z.x,X=z.y,Y=z.width,ne=z.height,ve=Hn.fF(r.vec3a,[H,X,0],r.vpMatrix),Ee=Hn.fF(r.vec3b,[H+Y,X,0],r.vpMatrix),Ie=Hn.fF(r.vec3c,[H,X+ne,0],r.vpMatrix),Ye=Hn.fF(r.vec3d,[H+Y,X+ne,0],r.vpMatrix),$e=Math.min(ve[0],Ee[0],Ye[0],Ie[0]),St=Math.min(ve[1],Ee[1],Ye[1],Ie[1]),Qe=Math.max(ve[0],Ee[0],Ye[0],Ie[0]),lt=Math.max(ve[1],Ee[1],Ye[1],Ie[1]),ht=Math.floor($e),bt=Math.floor(St),Ht=Math.ceil(Qe-$e),Ot=Math.ceil(lt-St);R.save(),r.clearRect(R,ht,bt,Ht,Ot,i.background),R.beginPath(),R.rect(ht,bt,Ht,Ot),R.clip(),R.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var kt=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;kt&&y.dispatchEvent(new Yl(nr.DIRTY_RECTANGLE,{dirtyRect:{x:ht,y:bt,width:Ht,height:Ot}}));var Mn=r.searchDirtyObjects(N);Mn.sort(function(Wn,cr){return Wn.sortable.renderOrder-cr.sortable.renderOrder}).forEach(function(Wn){Wn&&Wn.isVisible()&&!Wn.isCulled()&&r.renderDisplayObject(Wn,R,r.context,r.restoreStack,n)}),R.restore(),r.renderQueue.forEach(function(Wn){r.saveDirtyAABB(Wn)}),r.renderQueue=[]}r.restoreStack.forEach(function(){R.restore()}),r.restoreStack=[]}),l.hooks.render.tap(e.tag,function(R){r.clearFullScreen||r.renderQueue.push(R)})},e.prototype.clearRect=function(t,n,r,i,s,l){t.clearRect(n,r,i,s),l&&(t.fillStyle=l,t.fillRect(n,r,i,s))},e.prototype.renderDisplayObject=function(t,n,r,i,s){var l=t.nodeName,c=i[i.length-1];c&&!(t.compareDocumentPosition(c)&Nc.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),i.pop());var h=this.context.styleRendererFactory[l],p=this.pathGeneratorFactory[l],v=t.parsedStyle.clipPath;if(v){this.applyWorldTransform(n,v);var y=this.pathGeneratorFactory[v.nodeName];y&&(n.save(),i.push(t),n.beginPath(),y(n,v.parsedStyle),n.closePath(),n.clip())}h&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),p&&(n.beginPath(),p(n,t.parsedStyle),t.nodeName!==Gr.LINE&&t.nodeName!==Gr.PATH&&t.nodeName!==Gr.POLYLINE&&n.closePath()),h&&(h.render(n,t.parsedStyle,t,r,this,s),n.restore()),t.renderable.dirty=!1},e.prototype.convertAABB2Rect=function(t){var n=t.getMin(),r=t.getMax(),i=Math.floor(n[0]),s=Math.floor(n[1]),l=Math.ceil(r[0]),c=Math.ceil(r[1]),h=l-i,p=c-s;return{x:i,y:s,width:h,height:p}},e.prototype.mergeDirtyAABBs=function(t){var n=new tu;return t.forEach(function(r){var i=r.getRenderBounds();n.add(i);var s=r.renderable.dirtyRenderBounds;s&&n.add(s)}),n},e.prototype.searchDirtyObjects=function(t){var n=(0,ie.CR)(t.getMin(),2),r=n[0],i=n[1],s=(0,ie.CR)(t.getMax(),2),l=s[0],c=s[1],h=this.rBush.search({minX:r,minY:i,maxX:l,maxY:c});return h.map(function(p){var v=p.displayObject;return v})},e.prototype.saveDirtyAABB=function(t){var n=t.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new tu);var r=t.getRenderBounds();r&&n.dirtyRenderBounds.update(r.center,r.halfExtents)},e.prototype.applyAttributesToContext=function(t,n){var r=n.parsedStyle,i=r.stroke,s=r.fill,l=r.opacity,c=r.lineDash,h=r.lineDashOffset;c&&t.setLineDash(c),(0,Lo.Z)(h)||(t.lineDashOffset=h),(0,Lo.Z)(l)||(t.globalAlpha*=l),!(0,Lo.Z)(i)&&!Array.isArray(i)&&!i.isNone&&(t.strokeStyle=n.attributes.stroke),!(0,Lo.Z)(s)&&!Array.isArray(s)&&!s.isNone&&(t.fillStyle=n.attributes.fill)},e.prototype.applyWorldTransform=function(t,n,r){var i=0,s=0,l=(n.parsedStyle||{}).anchor,c=l&&l[0]||0,h=l&&l[1]||0;if(c!==0||h!==0){var p=n.geometry.contentBounds,v=p&&p.halfExtents[0]*2||0,y=p&&p.halfExtents[1]*2||0;i=-(c*v),s=-(h*y)}r?(jr.copy(this.tmpMat4,n.getLocalTransform()),this.vec3a[0]=i,this.vec3a[1]=s,this.vec3a[2]=0,jr.translate(this.tmpMat4,this.tmpMat4,this.vec3a),jr.multiply(this.tmpMat4,r,this.tmpMat4),jr.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(jr.copy(this.tmpMat4,n.getWorldTransform()),this.vec3a[0]=i,this.vec3a[1]=s,this.vec3a[2]=0,jr.translate(this.tmpMat4,this.tmpMat4,this.vec3a),jr.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},e.prototype.safeMergeAABB=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=new tu;return t.forEach(function(i){r.add(i)}),r},e.tag="CanvasRenderer",e}(),Qv=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,s,l){var c=n.fill,h=n.fillRule,p=n.opacity,v=n.fillOpacity,y=n.stroke,b=n.strokeOpacity,T=n.lineWidth,M=n.lineCap,R=n.lineJoin,L=n.shadowType,N=n.shadowColor,z=n.shadowBlur,H=n.filter,X=n.miterLimit,Y=!(0,Lo.Z)(c)&&!c.isNone,ne=!(0,Lo.Z)(y)&&!y.isNone&&T>0,ve=c.alpha===0,Ee=!!(H&&H.length),Ie=!(0,Lo.Z)(N)&&z>0,Ye=r.nodeName,$e=L==="inner",St=ne&&Ie&&(Ye===Gr.PATH||Ye===Gr.LINE||Ye===Gr.POLYLINE||ve||$e);Y&&(t.globalAlpha=p*v,St||K1(r,t,Ie),this.fill(t,r,c,h,i,s,l),St||this.clearShadowAndFilter(t,Ee,Ie)),ne&&(t.globalAlpha=p*b,t.lineWidth=T,(0,Lo.Z)(X)||(t.miterLimit=X),(0,Lo.Z)(M)||(t.lineCap=M),(0,Lo.Z)(R)||(t.lineJoin=R),St&&($e&&(t.globalCompositeOperation="source-atop"),K1(r,t,!0),$e&&(this.stroke(t,r,y,i,s,l),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,Ee,!0))),this.stroke(t,r,y,i,s,l))},e.prototype.clearShadowAndFilter=function(t,n,r){if(r&&(t.shadowColor="transparent",t.shadowBlur=0),n){var i=t.filter;!(0,Lo.Z)(i)&&i.indexOf("drop-shadow")>-1&&(t.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},e.prototype.fill=function(t,n,r,i,s,l,c){var h=this;Array.isArray(r)?r.forEach(function(p){t.fillStyle=h.getColor(p,n,t),i?t.fill(i):t.fill()}):($g(r)&&(t.fillStyle=this.getPattern(r,n,t,s,l,c)),i?t.fill(i):t.fill())},e.prototype.stroke=function(t,n,r,i,s,l){var c=this;Array.isArray(r)?r.forEach(function(h){t.strokeStyle=c.getColor(h,n,t),t.stroke()}):($g(r)&&(t.strokeStyle=this.getPattern(r,n,t,i,s,l)),t.stroke())},e.prototype.getPattern=function(t,n,r,i,s,l){var c,h;if(t.image.nodeName==="rect"){var p=t.image.parsedStyle,v=p.width,y=p.height;h=i.contextService.getDPR();var b=i.config.offscreenCanvas;c=l.offscreenCanvasCreator.getOrCreateCanvas(b),c.width=v*h,c.height=y*h;var T=l.offscreenCanvasCreator.getOrCreateContext(b),M=[];t.image.forEach(function(L){s.renderDisplayObject(L,T,i,M,l)}),M.forEach(function(){T.restore()})}var R=this.imagePool.getOrCreatePatternSync(t,r,c,h,function(){n.renderable.dirty=!0,i.renderingService.dirtify()});return R},e.prototype.getColor=function(t,n,r){var i;if(t.type===w0.LinearGradient||t.type===w0.RadialGradient){var s=n.getGeometryBounds(),l=s&&s.halfExtents[0]*2||1,c=s&&s.halfExtents[1]*2||1;i=this.imagePool.getOrCreateGradient((0,ie.pi)((0,ie.pi)({type:t.type},t.value),{width:l,height:c}),r)}return i},e}();function K1(e,t,n){var r=e.parsedStyle,i=r.filter,s=r.shadowColor,l=r.shadowBlur,c=r.shadowOffsetX,h=r.shadowOffsetY;i&&i.length&&(t.filter=e.style.filter),n&&(t.shadowColor=s.toString(),t.shadowBlur=l||0,t.shadowOffsetX=c||0,t.shadowOffsetY=h||0)}var sy=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r){var i=n.width,s=n.height,l=n.img,c=n.shadowColor,h=n.shadowBlur,p,v=i,y=s;if(Gl(l)?p=this.imagePool.getImageSync(l):(v||(v=l.width),y||(y=l.height),p=l),p){var b=!(0,Lo.Z)(c)&&h>0;K1(r,t,b);try{t.drawImage(p,0,0,v,y)}catch(T){}}},e}(),Q1=function(){function e(){}return e.prototype.render=function(t,n,r,i,s,l){var c=n,h=c.lineWidth,p=c.textAlign,v=c.textBaseline,y=c.lineJoin,b=c.miterLimit,T=c.letterSpacing,M=c.stroke,R=c.fill,L=c.fillOpacity,N=c.strokeOpacity,z=c.opacity,H=c.metrics,X=c.dx,Y=c.dy,ne=c.shadowColor,ve=c.shadowBlur,Ee=H.font,Ie=H.lines,Ye=H.height,$e=H.lineHeight,St=H.lineMetrics;t.font=Ee,t.lineWidth=h,t.textAlign=p==="middle"?"center":p;var Qe=v;!l.enableCSSParsing&&Qe==="alphabetic"&&(Qe="bottom"),t.lineJoin=y,(0,Lo.Z)(b)||(t.miterLimit=b);var lt=0;v==="middle"?lt=-Ye/2-$e/2:v==="bottom"||v==="alphabetic"||v==="ideographic"?lt=-Ye:(v==="top"||v==="hanging")&&(lt=-$e);var ht=X||0;lt+=Y||0,Ie.length===1&&(Qe==="bottom"?(Qe="middle",lt-=.5*Ye):Qe==="top"&&(Qe="middle",lt+=.5*Ye)),t.textBaseline=Qe;var bt=!(0,Lo.Z)(ne)&&ve>0;K1(r,t,bt);for(var Ht=0;Ht<Ie.length;Ht++){var Ot=h/2+ht;lt+=$e,!(0,Lo.Z)(M)&&!M.isNone&&h&&this.drawLetterSpacing(t,Ie[Ht],St[Ht],p,Ot,lt,T,L,N,z,!0),(0,Lo.Z)(R)||this.drawLetterSpacing(t,Ie[Ht],St[Ht],p,Ot,lt,T,L,N,z)}},e.prototype.drawLetterSpacing=function(t,n,r,i,s,l,c,h,p,v,y){if(y===void 0&&(y=!1),c===0){y?this.strokeText(t,n,s,l,p):this.fillText(t,n,s,l,h,v);return}var b=t.textAlign;t.textAlign="left";var T=s;i==="center"||i==="middle"?T=s-r.width/2:(i==="right"||i==="end")&&(T=s-r.width);for(var M=Array.from(n),R=t.measureText(n).width,L=0,N=0;N<M.length;++N){var z=M[N];y?this.strokeText(t,z,T,l,p):this.fillText(t,z,T,l,h,v),L=t.measureText(n.substring(N+1)).width,T+=R-L+c,R=L}t.textAlign=b},e.prototype.fillText=function(t,n,r,i,s,l){var c,h=!(0,Lo.Z)(s)&&s!==1;h&&(c=t.globalAlpha,t.globalAlpha=s*l),t.fillText(n,r,i),h&&(t.globalAlpha=c)},e.prototype.strokeText=function(t,n,r,i,s){var l,c=!(0,Lo.Z)(s)&&s!==1;c&&(l=t.globalAlpha,t.globalAlpha=s),t.strokeText(n,r,i),c&&(t.globalAlpha=l)},e}(),VI=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Qv),n2=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Qv),J1=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Qv),r2=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Qv),HI=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Qv),eb=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Qv),WI=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Qv),O3=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="canvas-renderer",r}return t.prototype.init=function(){var n,r=(0,ie.pi)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,s=new Qv(i),l=(n={},n[Gr.CIRCLE]=s,n[Gr.ELLIPSE]=s,n[Gr.RECT]=s,n[Gr.IMAGE]=new sy(i),n[Gr.TEXT]=new Q1,n[Gr.LINE]=s,n[Gr.POLYLINE]=s,n[Gr.POLYGON]=s,n[Gr.PATH]=s,n[Gr.GROUP]=void 0,n[Gr.HTML]=void 0,n[Gr.MESH]=void 0,n);this.context.defaultStyleRendererFactory=l,this.context.styleRendererFactory=l,this.addRenderingPlugin(new q1(r))},t.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},t}(Hp),M3=function(){function e(){}return e.prototype.apply=function(t,n){var r=this,i=t.renderingService,s=t.renderingContext,l=t.config;this.context=t;var c=s.root.ownerDocument.defaultView,h=function(ne){i.hooks.pointerMove.call(ne)},p=function(ne){i.hooks.pointerUp.call(ne)},v=function(ne){i.hooks.pointerDown.call(ne)},y=function(ne){i.hooks.pointerOver.call(ne)},b=function(ne){i.hooks.pointerOut.call(ne)},T=function(ne){i.hooks.pointerCancel.call(ne)},M=function(ne){i.hooks.pointerWheel.call(ne)},R=function(ne){i.hooks.click.call(ne)},L=function(ne){n.globalThis.document.addEventListener("pointermove",h,!0),ne.addEventListener("pointerdown",v,!0),ne.addEventListener("pointerleave",b,!0),ne.addEventListener("pointerover",y,!0),n.globalThis.addEventListener("pointerup",p,!0),n.globalThis.addEventListener("pointercancel",T,!0)},N=function(ne){ne.addEventListener("touchstart",v,!0),ne.addEventListener("touchend",p,!0),ne.addEventListener("touchmove",h,!0),ne.addEventListener("touchcancel",T,!0)},z=function(ne){n.globalThis.document.addEventListener("mousemove",h,!0),ne.addEventListener("mousedown",v,!0),ne.addEventListener("mouseout",b,!0),ne.addEventListener("mouseover",y,!0),n.globalThis.addEventListener("mouseup",p,!0)},H=function(ne){n.globalThis.document.removeEventListener("pointermove",h,!0),ne.removeEventListener("pointerdown",v,!0),ne.removeEventListener("pointerleave",b,!0),ne.removeEventListener("pointerover",y,!0),n.globalThis.removeEventListener("pointerup",p,!0)},X=function(ne){ne.removeEventListener("touchstart",v,!0),ne.removeEventListener("touchend",p,!0),ne.removeEventListener("touchmove",h,!0),ne.removeEventListener("touchcancel",T,!0)},Y=function(ne){n.globalThis.document.removeEventListener("mousemove",h,!0),ne.removeEventListener("mousedown",v,!0),ne.removeEventListener("mouseout",b,!0),ne.removeEventListener("mouseover",y,!0),n.globalThis.removeEventListener("mouseup",p,!0)};i.hooks.init.tap(e.tag,function(){var ne=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(ne.style.msContentZooming="none",ne.style.msTouchAction="none"):c.supportsPointerEvents&&(ne.style.touchAction="none"),c.supportsPointerEvents?L(ne):z(ne),c.supportsTouchEvents&&N(ne),l.useNativeClickEvent&&ne.addEventListener("click",R,!0),ne.addEventListener("wheel",M,{passive:!0,capture:!0})}),i.hooks.destroy.tap(e.tag,function(){var ne=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(ne.style.msContentZooming="",ne.style.msTouchAction=""):c.supportsPointerEvents&&(ne.style.touchAction=""),c.supportsPointerEvents?H(ne):Y(ne),c.supportsTouchEvents&&X(ne),l.useNativeClickEvent&&ne.removeEventListener("click",R,!0),ne.removeEventListener("wheel",M,!0)})},e.tag="DOMInteraction",e}(),lw=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="dom-interaction",n}return t.prototype.init=function(){this.addRenderingPlugin(new M3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Hp),ef="g-canvas-camera",i2=function(){function e(){this.displayObjectHTMLElementMap=new WeakMap}return e.prototype.joinTransformMatrix=function(t){return"matrix(".concat([t[0],t[1],t[4],t[5],t[12],t[13]].join(","),")")},e.prototype.apply=function(t,n){var r=this,i=t.camera,s=t.renderingContext,l=t.renderingService;this.context=t;var c=s.root.ownerDocument.defaultView,h=c.context.eventService.nativeHTMLMap,p=function(R,L){L.style.transform=r.joinTransformMatrix(R.getWorldTransform())},v=function(R){var L=R.target;if(L.nodeName===Gr.HTML){r.$camera||(r.$camera=r.createCamera(i));var N=r.getOrCreateEl(L);if(r.$camera.appendChild(N),n.enableCSSParsing){var z=L.ownerDocument.documentElement.attributes;Object.keys(z).forEach(function(H){N.style[H]=z[H]})}Object.keys(L.attributes).forEach(function(H){r.updateAttribute(H,L)}),p(L,N),h.set(N,L)}},y=function(R){var L=R.target;if(L.nodeName===Gr.HTML&&r.$camera){var N=r.getOrCreateEl(L);N&&(N.remove(),h.delete(N))}},b=function(R){var L=R.target;if(L.nodeName===Gr.HTML){var N=R.attrName;r.updateAttribute(N,L)}},T=function(R){var L=R.target;if(L.nodeName===Gr.HTML){var N=r.getOrCreateEl(L);p(L,N)}},M=function(){if(r.$camera){var R=r.context.config,L=R.width,N=R.height;r.$camera.style.width="".concat(L||0,"px"),r.$camera.style.height="".concat(N||0,"px")}};l.hooks.init.tap(e.tag,function(){c.addEventListener(nr.RESIZE,M),c.addEventListener(Ga.MOUNTED,v),c.addEventListener(Ga.UNMOUNTED,y),c.addEventListener(Ga.ATTR_MODIFIED,b),c.addEventListener(Ga.BOUNDS_CHANGED,T)}),l.hooks.endFrame.tap(e.tag,function(){r.$camera&&s.renderReasons.has(Wv.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),l.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),c.removeEventListener(nr.RESIZE,M),c.removeEventListener(Ga.MOUNTED,v),c.removeEventListener(Ga.UNMOUNTED,y),c.removeEventListener(Ga.ATTR_MODIFIED,b),c.removeEventListener(Ga.BOUNDS_CHANGED,T)})},e.prototype.createCamera=function(t){var n=this.context.config,r=n.document,i=n.width,s=n.height,l=this.context.contextService.getDomElement(),c=l.parentNode;if(c){var h=ef,p=c.querySelector("#"+h);if(!p){var v=(r||document).createElement("div");p=v,v.id=h,v.style.position="absolute",v.style.left="".concat(l.offsetLeft||0,"px"),v.style.top="".concat(l.offsetTop||0,"px"),v.style.transformOrigin="left top",v.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),v.style.overflow="hidden",v.style.pointerEvents="none",v.style.width="".concat(i||0,"px"),v.style.height="".concat(s||0,"px"),c.appendChild(v)}return p}return null},e.prototype.getOrCreateEl=function(t){var n=this.context.config.document,r=this.displayObjectHTMLElementMap.get(t);return r||(r=(n||document).createElement("div"),t.parsedStyle.$el=r,this.displayObjectHTMLElementMap.set(t,r),t.id&&(r.id=t.id),t.name&&r.setAttribute("name",t.name),t.className&&(r.className=t.className),r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style["will-change"]="transform",r.style.transform=this.joinTransformMatrix(t.getWorldTransform())),r},e.prototype.updateAttribute=function(t,n){var r=this.getOrCreateEl(n);switch(t){case"innerHTML":var i=n.parsedStyle.innerHTML;Gl(i)?r.innerHTML=i:(r.innerHTML="",r.appendChild(i));break;case"transformOrigin":var s=n.parsedStyle.transformOrigin;r.style["transform-origin"]="".concat(s[0].value," ").concat(s[1].value);break;case"width":if(this.context.enableCSSParsing){var l=n.computedStyleMap().get("width");r.style.width=l.toString()}else{var l=n.parsedStyle.width;r.style.width=(0,$u.Z)(l)?"".concat(l,"px"):l.toString()}break;case"height":if(this.context.enableCSSParsing){var c=n.computedStyleMap().get("height");r.style.height=c.toString()}else{var c=n.parsedStyle.height;r.style.height=(0,$u.Z)(c)?"".concat(c,"px"):c.toString()}break;case"zIndex":var h=n.parsedStyle.zIndex;r.style["z-index"]="".concat(h);break;case"visibility":var p=n.parsedStyle.visibility;r.style.visibility=p;break;case"pointerEvents":var v=n.parsedStyle.pointerEvents;r.style.pointerEvents=v;break;case"opacity":var y=n.parsedStyle.opacity;r.style.opacity="".concat(y);break;case"fill":var b=n.parsedStyle.fill,T="";$f(b)?b.isNone?T="transparent":T=n.getAttribute("fill"):Array.isArray(b)?T=n.getAttribute("fill"):$g(b),r.style.background=T;break;case"stroke":var M=n.parsedStyle.stroke,R="";$f(M)?M.isNone?R="transparent":R=n.getAttribute("stroke"):Array.isArray(M)?R=n.getAttribute("stroke"):$g(M),r.style["border-color"]=R,r.style["border-style"]="solid";break;case"lineWidth":var L=n.parsedStyle.lineWidth;r.style["border-width"]="".concat(L||0,"px");break;case"lineDash":r.style["border-style"]="dashed";break;case"filter":var N=n.style.filter;r.style.filter=N;break;default:t!=="x"&&t!=="y"&&!(0,Lo.Z)(n.style[t])&&n.style[t]!==""&&(r.style[t]=n.style[t])}},e.tag="HTMLRendering",e}(),R3=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="html-renderer",n}return t.prototype.init=function(){this.addRenderingPlugin(new i2)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Hp),o2=function(){function e(t){this.canvasConfig=t,this.imageCache={},this.gradientCache={},this.patternCache={}}return e.prototype.getImageSync=function(t,n){return this.imageCache[t]?n&&n(this.imageCache[t]):this.getOrCreateImage(t).then(function(r){n&&n(r)}),this.imageCache[t]},e.prototype.getOrCreateImage=function(t){var n=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var r=this.canvasConfig.createImage;return new Promise(function(i,s){var l;r?l=r(t):d_&&(l=new window.Image),l&&(l.onload=function(){n.imageCache[t]=l,i(l)},l.onerror=function(c){s(c)},l.crossOrigin="Anonymous",l.src=t)})},e.prototype.getOrCreatePatternSync=function(t,n,r,i,s){var l=this.generatePatternKey(t);if(l&&this.patternCache[l])return this.patternCache[l];var c=t.image,h=t.repetition,p=t.transform,v,y=!1;Gl(c)?v=this.getImageSync(c,s):r?(v=r,y=!0):v=c;var b=v&&n.createPattern(v,h);if(b){var T=void 0;p?T=Mx(xx(p),new Fl({})):T=jr.identity(jr.create()),y&&jr.scale(T,T,[1/i,1/i,1]),b.setTransform({a:T[0],b:T[1],c:T[4],d:T[5],e:T[12],f:T[13]})}return l&&b&&(this.patternCache[l]=b),b},e.prototype.getOrCreateGradient=function(t,n){var r=this.generateGradientKey(t),i=t.type,s=t.steps,l=t.width,c=t.height,h=t.angle,p=t.cx,v=t.cy,y=t.size;if(this.gradientCache[r])return this.gradientCache[r];var b=null;if(i===w0.LinearGradient){var T=cC(l,c,h),M=T.x1,R=T.y1,L=T.x2,N=T.y2;b=n.createLinearGradient(M,R,L,N)}else if(i===w0.RadialGradient){var z=bI(l,c,p,v,y),H=z.x,X=z.y,Y=z.r;b=n.createRadialGradient(H,X,0,H,X,Y)}return b&&(s.forEach(function(ne){var ve=ne.offset,Ee=ne.color;ve.unit===ao.kPercentage&&(b==null||b.addColorStop(ve.value/100,Ee.toString()))}),this.gradientCache[r]=b),this.gradientCache[r]},e.prototype.generateGradientKey=function(t){var n=t.type,r=t.width,i=t.height,s=t.steps,l=t.angle,c=t.cx,h=t.cy,p=t.size;return"gradient-".concat(n,"-").concat((l==null?void 0:l.toString())||0,"-").concat((c==null?void 0:c.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat(r,"-").concat(i,"-").concat(s.map(function(v){var y=v.offset,b=v.color;return"".concat(y).concat(b)}).join("-"))},e.prototype.generatePatternKey=function(t){var n=t.image,r=t.repetition;if(Gl(n))return"pattern-".concat(n,"-").concat(r);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(r)},e}(),P3=function(){function e(){}return e.prototype.apply=function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,s=r.root.ownerDocument.defaultView,l=function(p,v,y){var b=p.parsedStyle,T=b.width,M=b.height;T&&!M?p.setAttribute("height",y/v*T):!T&&M&&p.setAttribute("width",v/y*M)},c=function(p){var v=p.target,y=v.nodeName,b=v.attributes;if(y===Gr.IMAGE){var T=b.img,M=b.keepAspectRatio;Gl(T)&&i.getImageSync(T,function(R){var L=R.width,N=R.height;M&&l(v,L,N),v.renderable.dirty=!0,n.dirtify()})}},h=function(p){var v=p.target,y=p.attrName,b=p.newValue;v.nodeName===Gr.IMAGE&&y==="img"&&Gl(b)&&i.getOrCreateImage(b).then(function(T){var M=T.width,R=T.height;v.attributes.keepAspectRatio&&l(v,M,R),v.renderable.dirty=!0,n.dirtify()})};n.hooks.init.tap(e.tag,function(){s.addEventListener(Ga.MOUNTED,c),s.addEventListener(Ga.ATTR_MODIFIED,h)}),n.hooks.destroy.tap(e.tag,function(){s.removeEventListener(Ga.MOUNTED,c),s.removeEventListener(Ga.ATTR_MODIFIED,h)})},e.tag="LoadImage",e}(),I3=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="image-loader",n}return t.prototype.init=function(){this.context.imagePool=new o2(this.context.config),this.addRenderingPlugin(new P3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Hp),L3=function(){function e(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return e.prototype.init=function(){var t=this.canvasConfig,n=t.container,r=t.canvas;if(r)this.$canvas=r,n&&r.parentElement!==n&&n.appendChild(r),this.$container=r.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=Gl(n)?document.getElementById(n):n,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},e.prototype.getContext=function(){return this.context},e.prototype.getDomElement=function(){return this.$canvas},e.prototype.getDPR=function(){return this.dpr},e.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},e.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},e.prototype.resize=function(t,n){var r=this.canvasConfig.devicePixelRatio,i=r||d_&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*n,sO(this.$canvas,t,n)),this.renderingContext.renderReasons.add(Wv.CAMERA_CHANGED)},e.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},e.prototype.toDataURL=function(t){return t===void 0&&(t={}),(0,ie.mG)(this,void 0,void 0,function(){var n,r;return(0,ie.Jh)(this,function(i){return n=t.type,r=t.encoderOptions,[2,this.context.canvas.toDataURL(n,r)]})})},e}(),a2=function(e){(0,ie.ZT)(t,e);function t(){var n=e.apply(this,(0,ie.ev)([],(0,ie.CR)(arguments),!1))||this;return n.name="canvas-context-register",n}return t.prototype.init=function(){this.context.ContextService=L3},t.prototype.destroy=function(){delete this.context.ContextService},t}(Hp),s2=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n)||this;return r.registerPlugin(new a2),r.registerPlugin(new I3),r.registerPlugin(new _3),r.registerPlugin(new O3),r.registerPlugin(new lw),r.registerPlugin(new C3),r.registerPlugin(new R3),r}return t}(Yy),D3=function(){function e(t){this.dragndropPluginOptions=t}return e.prototype.apply=function(t){var n=this,r=t.renderingService,i=t.renderingContext,s=i.root.ownerDocument,l=s.defaultView,c=function(h){var p=h.target,v=p===s,y=v&&n.dragndropPluginOptions.isDocumentDraggable?s:p.closest&&p.closest("[draggable=true]");if(y){var b=!1,T=h.timeStamp,M=[h.clientX,h.clientY],R=null,L=[h.clientX,h.clientY],N=function(H){return(0,ie.mG)(n,void 0,void 0,function(){var X,Y,ne,ve,Ee,Ie;return(0,ie.Jh)(this,function(Ye){switch(Ye.label){case 0:if(!b){if(X=H.timeStamp-T,Y=js([H.clientX,H.clientY],M),X<=this.dragndropPluginOptions.dragstartTimeThreshold||Y<=this.dragndropPluginOptions.dragstartDistanceThreshold)return[2];H.type="dragstart",y.dispatchEvent(H),b=!0}return H.type="drag",H.dx=H.clientX-L[0],H.dy=H.clientY-L[1],y.dispatchEvent(H),L=[H.clientX,H.clientY],v?[3,2]:(ne=this.dragndropPluginOptions.overlap==="pointer"?[H.canvasX,H.canvasY]:p.getBounds().center,[4,s.elementsFromPoint(ne[0],ne[1])]);case 1:ve=Ye.sent(),Ee=ve[ve.indexOf(p)+1],Ie=(Ee==null?void 0:Ee.closest("[droppable=true]"))||(this.dragndropPluginOptions.isDocumentDroppable?s:null),R!==Ie&&(R&&(H.type="dragleave",H.target=R,R.dispatchEvent(H)),Ie&&(H.type="dragenter",H.target=Ie,Ie.dispatchEvent(H)),R=Ie,R&&(H.type="dragover",H.target=R,R.dispatchEvent(H))),Ye.label=2;case 2:return[2]}})})};l.addEventListener("pointermove",N);var z=function(H){if(b){H.detail={preventClick:!0};var X=H.clone();R&&(X.type="drop",X.target=R,R.dispatchEvent(X)),X.type="dragend",y.dispatchEvent(X),b=!1}l.removeEventListener("pointermove",N)};p.addEventListener("pointerup",z,{once:!0}),p.addEventListener("pointerupoutside",z,{once:!0})}};r.hooks.init.tap(e.tag,function(){l.addEventListener("pointerdown",c)}),r.hooks.destroy.tap(e.tag,function(){l.removeEventListener("pointerdown",c)})},e.tag="Dragndrop",e}(),eg=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="dragndrop",r}return t.prototype.init=function(){this.addRenderingPlugin(new D3((0,ie.pi)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t.prototype.setOptions=function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)},t}(Hp);function N3(e,t,n){var r;return function(){var i=this,s=arguments,l=function(){r=null,n||e.apply(i,s)},c=n&&!r;clearTimeout(r),r=setTimeout(l,t),c&&e.apply(i,s)}}var uw=N3,F3=function(e){return typeof e=="object"&&e!==null},l2=F3,B3=function(e){if(!l2(e)||!(0,Wd.Z)(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},vv=B3,k3=5;function cw(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}function fw(e,t,n,r){n=n||0,r=r||k3;for(var i in t)if(cw(t,i)){var s=t[i];s!==null&&vv(s)?(vv(e[i])||(e[i]={}),n<r?fw(e[i],s,n+1,r):e[i]=t[i]):Hr(s)?(e[i]=[],e[i]=e[i].concat(s)):s!==void 0&&(e[i]=s)}}var hw=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)fw(e,t[r]);return e},ui=hw;class z3 extends Map{constructor(t,n=dw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(u2(this,t))}has(t){return super.has(u2(this,t))}set(t,n){return super.set(C_(this,t),n)}delete(t){return super.delete(tg(this,t))}}class GI extends null{constructor(t,n=dw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(u2(this,t))}add(t){return super.add(C_(this,t))}delete(t){return super.delete(tg(this,t))}}function u2({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function C_({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function tg({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function dw(e){return e!==null&&typeof e=="object"?e.valueOf():e}function O_(e){return e}function Fu(e,...t){return ng(e,O_,O_,t)}function tb(e,...t){return ng(e,Array.from,O_,t)}function pw(e,t){for(let n=1,r=t.length;n<r;++n)e=e.flatMap(i=>i.pop().map(([s,l])=>[...i,s,l]));return e}function ZI(e,...t){return pw(tb(e,...t),t)}function U3(e,t,...n){return pw(nb(e,t,...n),n)}function c2(e,t,...n){return ng(e,O_,t,n)}function nb(e,t,...n){return ng(e,Array.from,t,n)}function R0(e,...t){return ng(e,identity,vw,t)}function XI(e,...t){return ng(e,Array.from,vw,t)}function vw(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function ng(e,t,n,r){return function i(s,l){if(l>=r.length)return n(s);const c=new z3,h=r[l++];let p=-1;for(const v of s){const y=h(v,++p,s),b=c.get(y);b?b.push(v):c.set(y,[v])}for(const[v,y]of c)c.set(v,i(y,l));return t(c)}(e,0)}var mw=function(e){return(0,Lo.Z)(e)?"":e.toString()},j3=function(e){var t=mw(e);return t.charAt(0).toLowerCase()+t.substring(1)},f2=j3,V3=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};function rg(e){return e}function rb(e){return e.reduce((t,n)=>(r,...i)=>n(t(r,...i),...i),rg)}function H3(e){return e.reduce((t,n)=>r=>V3(this,void 0,void 0,function*(){const i=yield t(r);return n(i)}),rg)}function h2(e){return e.replace(/( |^)[a-z]/g,t=>t.toUpperCase())}function mv(e=""){throw new Error(e)}function d2(e,t){const{attributes:n}=t,r=new Set(["id","className"]);for(const[i,s]of Object.entries(n))r.has(i)||(i==="transform"&&e.attr(i,""),e.attr(i,s))}function iu(e){return e!=null&&!Number.isNaN(e)}function YI(e,t){return e+(t-e)*Math.random()}function W3(e){const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}function G3(e,t){const{transform:n}=e.style,i=(s=>s==="none"||s===void 0)(n)?"":n;e.style.transform=`${i} ${t}`.trimStart()}function xo(e,t){return p2(e,t)||{}}function p2(e,t){const n=Object.entries(e||{}).filter(([r])=>r.startsWith(t)).map(([r,i])=>[f2(r.replace(t,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function $I(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${t}${upperFirst(n)}`,r]))}function Z3(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.find(r=>n.startsWith(r))))}function ib(e,...t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.every(r=>!n.startsWith(r))))}function ly(e,t){if(e===void 0)return null;if(typeof e=="number")return e;const n=+e.replace("%","");return Number.isNaN(n)?null:n/100*t}function M_(e){return typeof e=="object"&&!(e instanceof Date)&&e!==null&&!Array.isArray(e)}function gv(e){return e===null||e===!1}function gw(e,t,n=5,r=0){if(!(r>=n)){for(const i of Object.keys(t)){const s=t[i];!vv(s)||!vv(e[i])?e[i]=s:gw(e[i],s,n,r+1)}return e}}function Ua(e){return new Fc([e],null,e,e.ownerDocument)}class Fc{constructor(t=null,n=null,r=null,i=null,s=[null,null,null,null,null],l=[],c=[]){this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=s[0],this._update=s[1],this._exit=s[2],this._merge=s[3],this._split=s[4],this._transitions=l,this._facetElements=c}selectAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Fc(n,null,this._elements[0],this._document)}selectFacetAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Fc(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(t){const n=typeof t=="string"?this._parent.querySelectorAll(t)[0]||null:t;return new Fc([n],null,n,this._document)}append(t){const n=typeof t=="function"?t:()=>this.createElement(t),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const s=this._data[i],[l,c]=Array.isArray(s)?s:[s,null],h=n(l,i);h.__data__=l,c!==null&&(h.__fromElements__=c),this._parent.appendChild(h),r.push(h)}return new Fc(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const s=this._elements[i],l=s.__data__,c=n(l,i);s.appendChild(c),r.push(c)}return new Fc(r,null,r[0],this._document)}}maybeAppend(t,n,r){const i=this._elements[0],s=i.getElementById(t);if(s)return new Fc([s],null,this._parent,this._document);const l=typeof n=="string"?this.createElement(n):n();return l.id=t,r&&(l.className=r),i.appendChild(l),new Fc([l],null,this._parent,this._document)}data(t,n=i=>i,r=()=>null){const i=[],s=[],l=new Set(this._elements),c=[],h=new Set,p=new Map(this._elements.map((T,M)=>[n(T.__data__,M),T])),v=new Map(this._facetElements.map((T,M)=>[n(T.__data__,M),T])),y=Fu(this._elements,T=>r(T.__data__));for(let T=0;T<t.length;T++){const M=t[T],R=n(M,T),L=r(M,T);if(p.has(R)){const N=p.get(R);N.__data__=M,N.__facet__=!1,s.push(N),l.delete(N),p.delete(R)}else if(v.has(R)){const N=v.get(R);N.__data__=M,N.__facet__=!0,s.push(N),v.delete(R)}else if(y.has(R)){const N=y.get(R);c.push([M,N]);for(const z of N)l.delete(z);y.delete(R)}else if(p.has(L)){const N=p.get(L);N.__toData__?N.__toData__.push(M):N.__toData__=[M],h.add(N),l.delete(N)}else i.push(M)}const b=[new Fc([],i,this._parent,this._document),new Fc(s,null,this._parent,this._document),new Fc(l,null,this._parent,this._document),new Fc([],c,this._parent,this._document),new Fc(h,null,this._parent,this._document)];return new Fc(this._elements,null,this._parent,this._document,b)}merge(t){const n=[...this._elements,...t._elements],r=[...this._transitions,...t._transitions];return new Fc(n,null,this._parent,this._document,void 0,r)}createElement(t){if(this._document)return this._document.createElement(t,{});const n=Fc.registry[t];return n?new n:mv(`Unknown node type: ${t}`)}join(t=l=>l,n=l=>l,r=l=>l.remove(),i=l=>l,s=l=>l.remove()){const l=t(this._enter),c=n(this._update),h=r(this._exit),p=i(this._merge),v=s(this._split);return c.merge(l).merge(h).merge(p).merge(v)}remove(){for(let t=0;t<this._elements.length;t++){const n=this._transitions[t];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(i=>i.finished)).then(()=>{this._elements[t].remove()})}else this._elements[t].remove()}return new Fc([],null,this._parent,this._document,void 0,this._transitions)}each(t){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],i=r.__data__;t(i,n,r)}return this}attr(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l[t]=r(i,s,l))})}style(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l.style[t]=r(i,s,l))})}transition(t){const n=typeof t!="function"?()=>t:t,{_transitions:r}=this;return this.each(function(i,s,l){r[s]=n(i,s,l)})}on(t,n){return this.each(function(r,i,s){s.addEventListener(t,n)}),this}call(t,...n){return t(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}Fc.registry={g:$l,rect:Jg,circle:Tu,path:gl,text:Vs,ellipse:ul,image:I1,line:qa,polygon:uc,polyline:gu,html:A0};const cl={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};var X3=function(e){var t=mw(e);return t.charAt(0).toUpperCase()+t.substring(1)},Jv=X3;function ob(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ab(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Y3(e){return e=ab(Math.abs(e)),e?e[1]:NaN}function $3(e,t){return function(n,r){for(var i=n.length,s=[],l=0,c=e[0],h=0;i>0&&c>0&&(h+c+1>r&&(c=Math.max(1,r-h)),s.push(n.substring(i-=c,i+c)),!((h+=c+1)>r));)c=e[l=(l+1)%e.length];return s.reverse().join(t)}}function yw(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var q3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function v2(e){if(!(t=q3.exec(e)))throw new Error("invalid format: "+e);var t;return new sb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}v2.prototype=sb.prototype;function sb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}sb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lb(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ig;function K3(e,t){var n=ab(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ig=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ab(e,Math.max(0,t+s-1))[0]}function _w(e,t){var n=ab(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var R_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ob,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_w(e*100,t),r:_w,s:K3,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bw(e){return e}var xw=Array.prototype.map,el=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ew(e){var t=e.grouping===void 0||e.thousands===void 0?bw:$3(xw.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?bw:yw(xw.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"\u2212":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function p(y){y=v2(y);var b=y.fill,T=y.align,M=y.sign,R=y.symbol,L=y.zero,N=y.width,z=y.comma,H=y.precision,X=y.trim,Y=y.type;Y==="n"?(z=!0,Y="g"):R_[Y]||(H===void 0&&(H=12),X=!0,Y="g"),(L||b==="0"&&T==="=")&&(L=!0,b="0",T="=");var ne=R==="$"?n:R==="#"&&/[boxX]/.test(Y)?"0"+Y.toLowerCase():"",ve=R==="$"?r:/[%p]/.test(Y)?l:"",Ee=R_[Y],Ie=/[defgprs%]/.test(Y);H=H===void 0?6:/[gprs]/.test(Y)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H));function Ye($e){var St=ne,Qe=ve,lt,ht,bt;if(Y==="c")Qe=Ee($e)+Qe,$e="";else{$e=+$e;var Ht=$e<0||1/$e<0;if($e=isNaN($e)?h:Ee(Math.abs($e),H),X&&($e=lb($e)),Ht&&+$e==0&&M!=="+"&&(Ht=!1),St=(Ht?M==="("?M:c:M==="-"||M==="("?"":M)+St,Qe=(Y==="s"?el[8+ig/3]:"")+Qe+(Ht&&M==="("?")":""),Ie){for(lt=-1,ht=$e.length;++lt<ht;)if(bt=$e.charCodeAt(lt),48>bt||bt>57){Qe=(bt===46?i+$e.slice(lt+1):$e.slice(lt))+Qe,$e=$e.slice(0,lt);break}}}z&&!L&&($e=t($e,1/0));var Ot=St.length+$e.length+Qe.length,kt=Ot<N?new Array(N-Ot+1).join(b):"";switch(z&&L&&($e=t(kt+$e,kt.length?N-Qe.length:1/0),kt=""),T){case"<":$e=St+$e+Qe+kt;break;case"=":$e=St+kt+$e+Qe;break;case"^":$e=kt.slice(0,Ot=kt.length>>1)+St+$e+Qe+kt.slice(Ot);break;default:$e=kt+St+$e+Qe;break}return s($e)}return Ye.toString=function(){return y+""},Ye}function v(y,b){var T=p((y=v2(y),y.type="f",y)),M=Math.max(-8,Math.min(8,Math.floor(Y3(b)/3)))*3,R=Math.pow(10,-M),L=el[8+M/3];return function(N){return T(R*N)+L}}return{format:p,formatPrefix:v}}var P_,em,ub;Sw({thousands:",",grouping:[3],currency:["$",""]});function Sw(e){return P_=Ew(e),em=P_.format,ub=P_.formatPrefix,P_}function tm(e,t){return Object.entries(e).reduce((n,[r,i])=>(n[r]=t(i,r,e),n),{})}function og(e){return e.map((t,n)=>n)}function qI(e){const t=e.length,n=e[0].length,r=new Array(n).fill(0).map(()=>new Array(t));for(let i=0;i<n;i++)for(let s=0;s<t;s++)r[i][s]=e[s][i];return r}function Q3(e){return e[0]}function ww(e){return e[e.length-1]}function KI(e){return!e.some(Array.isArray)}function J3(e){return Array.from(new Set(e))}function Tw(e,t){const n=[[],[]];return e.forEach(r=>{n[t(r)?0:1].push(r)}),n}function Aw(e,t=e.length){if(t===1)return e.map(r=>[r]);const n=[];for(let r=0;r<e.length;r++){const i=e.slice(r+1);Aw(i,t-1).forEach(l=>{n.push([e[r],...l])})}return n}function Cw(e){if(e.length===1)return[e];const t=[];for(let n=1;n<=e.length;n++)t.push(...Aw(e,n));return t}var Ow=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},uy=Ow,m2=function(e,t){if(e===t)return!0;if(!e||!t||Gl(e)||Gl(t))return!1;if(uy(e)||uy(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=m2(e[r],t[r]),!!n);r++);return n}if(l2(e)||l2(t)){var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var n=!0,r=0;r<i.length&&(n=m2(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},Mw=m2;function Sp(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function yl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function QI(e){return e*Math.PI/180}function JI(e){return e*180/Math.PI}function Rw(e,t){return e=e%(2*Math.PI),t=t%(2*Math.PI),e<0&&(e=2*Math.PI+e),t<0&&(t=2*Math.PI+t),e>=t&&(t=t+2*Math.PI),{startAngle:e,endAngle:t}}const nm=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},t),e);return Object.assign(Object.assign({},n),Rw(n.startAngle,n.endAngle))},I_=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=nm(e);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",t,n,r,i]]};I_.props={};const Pw=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},g2=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Pw(e);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...I_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};g2.props={};function cb(e,t,n){return Math.max(t,Math.min(e,n))}function fb(e,t=10){return typeof e!="number"||Math.abs(e)<1e-15?e:parseFloat(e.toFixed(t))}const y2=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var L_=D(17816);function Cu(e){const{transformations:t}=e.getOptions();return t.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function Bl(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="polar")}function D_(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="reflect")&&t.some(([n])=>n.startsWith("transpose"))}function Iw(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="helix")}function N_(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="parallel")}function Lw(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="fisheye")}function Dw(e){return N_(e)&&Bl(e)}function cy(e){return Iw(e)||Bl(e)}function Nw(e){return Bl(e)&&Cu(e)}function eM(e){return Bl(e)||N_(e)||D_(e)||Nw(e)}function tM(e){if(cy(e)){const[t,n]=e.getSize(),r=e.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(t,n)/2*r[4]}return 0}function hb(e){const{transformations:t}=e.getOptions(),[,,,n,r]=t.find(i=>i[0]==="polar");return[+n,+r]}function ag(e,t=!0){const{transformations:n}=e.getOptions(),[,r,i]=n.find(s=>s[0]==="polar");return t?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function nM(e,t){const{transformations:n}=e.getOptions(),[,...r]=n.find(i=>i[0]===t);return r}function rM(e,t){t(e),e.children&&e.children.forEach(function(n){n&&rM(n,t)})}function a(e){f(e,!0)}function o(e){f(e,!1)}function f(e,t){var n=t?"visible":"hidden";rM(e,function(r){r.attr("visibility",n)})}function m(e){return typeof e=="boolean"?!1:"enter"in e&&"update"in e&&"exit"in e}function w(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],n=Object.fromEntries(Object.entries(e).filter(function(r){var i=(0,ie.CR)(r,1),s=i[0];return!t.includes(s)}));return Object.fromEntries(t.map(function(r){return m(e)?e[r]===!1?[r,!1]:[r,(0,ie.pi)((0,ie.pi)({},e[r]),n)]:[r,n]}))}function C(e,t){e?e.finished.then(t):t()}function I(e,t){e.length===0?t():Promise.all(e.map(function(n){return n==null?void 0:n.finished})).then(t)}function B(e,t){"update"in e?e.update(t):e.attr(t)}function V(e,t,n){if(t.length===0)return null;if(!n){var r=t.slice(-1)[0];return B(e,{style:r}),null}return e.animate(t,n)}function re(e,t){return!(e.nodeName!=="text"||t.nodeName!=="text"||e.attributes.text!==t.attributes.text)}function Ce(e,t,n,r){if(r===void 0&&(r="destroy"),re(e,t))return e.remove(),[null];var i=function(){r==="destroy"?e.destroy():r==="hide"&&o(e),t.isVisible()&&a(t)};if(!n)return i(),[null];var s=n.duration,l=s===void 0?0:s,c=n.delay,h=c===void 0?0:c,p=Math.ceil(+l/2),v=+l/4,y=function($e){if($e.nodeName==="circle"){var St=(0,ie.CR)($e.getLocalPosition(),2),Qe=St[0],lt=St[1],ht=$e.attr("r");return[Qe-ht,lt-ht]}return $e.getLocalPosition()},b=(0,ie.CR)(y(e),2),T=b[0],M=b[1],R=(0,ie.CR)(y(t),2),L=R[0],N=R[1],z=(0,ie.CR)([(T+L)/2-T,(M+N)/2-M],2),H=z[0],X=z[1],Y=e.style.opacity,ne=Y===void 0?1:Y,ve=t.style.opacity,Ee=ve===void 0?1:ve,Ie=e.animate([{opacity:ne,transform:"translate(0, 0)"},{opacity:0,transform:"translate(".concat(H,", ").concat(X,")")}],(0,ie.pi)((0,ie.pi)({fill:"both"},n),{duration:h+p+v})),Ye=t.animate([{opacity:0,transform:"translate(".concat(-H,", ").concat(-X,")"),offset:.01},{opacity:Ee,transform:"translate(0, 0)"}],(0,ie.pi)((0,ie.pi)({fill:"both"},n),{duration:p+v,delay:h+p-v}));return C(Ye,i),[Ie,Ye]}function Se(e,t,n){var r={},i={};return Object.entries(t).forEach(function(s){var l=(0,ie.CR)(s,2),c=l[0],h=l[1];if(!(0,Lo.Z)(h)){var p=e.style[c]||e.parsedStyle[c]||0;p!==h&&(r[c]=p,i[c]=h)}}),n?V(e,[r,i],(0,ie.pi)({fill:"both"},n)):(B(e,i),null)}var ze=5,Rt=function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=ze),Object.entries(t).forEach(function(i){var s=(0,ie.CR)(i,2),l=s[0],c=s[1],h=e;Object.prototype.hasOwnProperty.call(t,l)&&(c?vv(c)?(vv(e[l])||(h[l]={}),n<r?Rt(e[l],c,n+1,r):h[l]=t[l]):Hr(c)?(h[l]=[],h[l]=h[l].concat(c)):h[l]=c:h[l]=c)})},Jt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)Rt(e,t[r]);return e},Nn=function(e){(0,ie.ZT)(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,(0,ie.ev)([],(0,ie.CR)(n),!1))||this;return i.addEventListener(Ga.INSERTED,function(){o(i)}),i}return t}($l);function sr(e){var t=e.appendChild(new Nn({class:"offscreen"}));return o(t),t}function Ar(e){for(var t=e;t;){if(t.className==="offscreen")return!0;t=t.parent}return!1}function mr(){f(this,this.attributes.visibility!=="hidden")}var Vr=function(e){(0,ie.ZT)(t,e);function t(n,r){r===void 0&&(r={});var i=e.call(this,Jt({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=sr(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t.prototype.attributeChangedCallback=function(n){n==="visibility"&&mr.call(this)},t.prototype.update=function(n,r){var i;return this.attr(Jt({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(n,r){},t.prototype.getSubShapeStyle=function(n){var r=n.x,i=n.y,s=n.transform,l=n.transformOrigin,c=n.class,h=n.className,p=n.zIndex,v=(0,ie._T)(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return v},t}(Du);function ci(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(s){s.node().removeChildren()}),e?n(t):(r&&i(t),null)}function Io(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r}var to=function(e){(0,ie.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ie._T)(n,["style"]);return e.call(this,(0,ie.pi)({style:(0,ie.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=sr(this)),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t}(Vs);function Qr(e,t){var n=new Map;return e.forEach(function(r){var i=t(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function no(e){throw new Error(e)}var ja=function(){function e(i,s,l,c,h,p,v){i===void 0&&(i=null),s===void 0&&(s=null),l===void 0&&(l=null),c===void 0&&(c=null),h===void 0&&(h=[null,null,null,null,null]),p===void 0&&(p=[]),v===void 0&&(v=[]),t.add(this),this._elements=Array.from(i),this._data=s,this._parent=l,this._document=c,this._enter=h[0],this._update=h[1],this._exit=h[2],this._merge=h[3],this._split=h[4],this._transitions=p,this._facetElements=v}e.prototype.selectAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(s,null,this._elements[0],this._document)},e.prototype.selectFacetAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,s)},e.prototype.select=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([s],null,s,this._document)},e.prototype.append=function(i){var s=this,l=typeof i=="function"?i:function(){return s.createElement(i)},c=[];if(this._data!==null){for(var h=0;h<this._data.length;h++){var p=this._data[h],v=(0,ie.CR)(Array.isArray(p)?p:[p,null],2),y=v[0],b=v[1],T=l(y,h);T.__data__=y,b!==null&&(T.__fromElements__=b),this._parent.appendChild(T),c.push(T)}return new n(c,null,this._parent,this._document)}for(var h=0;h<this._elements.length;h++){var M=this._elements[h],y=M.__data__,T=l(y,h);M.appendChild(T),c.push(T)}return new n(c,null,c[0],this._document)},e.prototype.maybeAppend=function(i,s){var l=(0,ie.Q_)(this,t,"m",r).call(this,i[0]==="#"?i:"#".concat(i),s);return l.attr("id",i),l},e.prototype.maybeAppendByClassName=function(i,s){var l=i.toString(),c=(0,ie.Q_)(this,t,"m",r).call(this,l[0]==="."?l:".".concat(l),s);return c.attr("className",l),c},e.prototype.maybeAppendByName=function(i,s){var l=(0,ie.Q_)(this,t,"m",r).call(this,'[name="'.concat(i,'"]'),s);return l.attr("name",i),l},e.prototype.data=function(i,s,l){var c,h;s===void 0&&(s=function(Ye){return Ye}),l===void 0&&(l=function(){return null});for(var p=[],v=[],y=new Set(this._elements),b=[],T=new Set,M=new Map(this._elements.map(function(Ye,$e){return[s(Ye.__data__,$e),Ye]})),R=new Map(this._facetElements.map(function(Ye,$e){return[s(Ye.__data__,$e),Ye]})),L=Qr(this._elements,function(Ye){return l(Ye.__data__)}),N=0;N<i.length;N++){var z=i[N],H=s(z,N),X=l(z,N);if(M.has(H)){var Y=M.get(H);Y.__data__=z,Y.__facet__=!1,v.push(Y),y.delete(Y),M.delete(H)}else if(R.has(H)){var Y=R.get(H);Y.__data__=z,Y.__facet__=!0,v.push(Y),R.delete(H)}else if(L.has(H)){var ne=L.get(H);b.push([z,ne]);try{for(var ve=(c=void 0,(0,ie.XA)(ne)),Ee=ve.next();!Ee.done;Ee=ve.next()){var Y=Ee.value;y.delete(Y)}}catch(Ye){c={error:Ye}}finally{try{Ee&&!Ee.done&&(h=ve.return)&&h.call(ve)}finally{if(c)throw c.error}}L.delete(H)}else if(M.has(X)){var Y=M.get(X);Y.__toData__?Y.__toData__.push(z):Y.__toData__=[z],T.add(Y),y.delete(Y)}else p.push(z)}var Ie=[new n([],p,this._parent,this._document),new n(v,null,this._parent,this._document),new n(y,null,this._parent,this._document),new n([],b,this._parent,this._document),new n(T,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,Ie)},e.prototype.merge=function(i){var s=(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(this._elements),!1),(0,ie.CR)(i._elements),!1),l=(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(this._transitions),!1),(0,ie.CR)(i._transitions),!1);return new n(s,null,this._parent,this._document,void 0,l)},e.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var s=n.registry[i];return s?new s:no("Unknown node type: ".concat(i))},e.prototype.join=function(i,s,l,c,h){i===void 0&&(i=function(M){return M}),s===void 0&&(s=function(M){return M}),l===void 0&&(l=function(M){return M.remove()}),c===void 0&&(c=function(M){return M}),h===void 0&&(h=function(M){return M.remove()});var p=i(this._enter),v=s(this._update),y=l(this._exit),b=c(this._merge),T=h(this._split);return v.merge(p).merge(y).merge(b).merge(T)},e.prototype.remove=function(){for(var i=function(c){var h=s._elements[c],p=s._transitions[c];p?p.then(function(){return h.remove()}):h.remove()},s=this,l=0;l<this._elements.length;l++)i(l);return new n([],null,this._parent,this._document,void 0,this._transitions)},e.prototype.each=function(i){for(var s=0;s<this._elements.length;s++){var l=this._elements[s],c=l.__data__;i.call(l,c,s)}return this},e.prototype.attr=function(i,s){var l=typeof s!="function"?function(){return s}:s;return this.each(function(c,h){s!==void 0&&(this[i]=l.call(this,c,h))})},e.prototype.style=function(i,s,l){l===void 0&&(l=!0);var c=typeof s!="function"||!l?function(){return s}:s;return this.each(function(h,p){s!==void 0&&(this.style[i]=c.call(this,h,p))})},e.prototype.styles=function(i,s){return i===void 0&&(i={}),s===void 0&&(s=!0),this.each(function(l,c){var h=this;Object.entries(i).forEach(function(p){var v=(0,ie.CR)(p,2),y=v[0],b=v[1],T=typeof b!="function"||!s?function(){return b}:b;b!==void 0&&h.attr(y,T.call(h,l,c))})})},e.prototype.update=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(c,h){i&&this.update&&this.update(l.call(this,c,h))})},e.prototype.maybeUpdate=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(c,h){i&&this.update&&this.update(l.call(this,c,h))})},e.prototype.transition=function(i){var s=this._transitions;return this.each(function(l,c){s[c]=i.call(this,l,c)})},e.prototype.on=function(i,s){return this.each(function(){this.addEventListener(i,s)}),this},e.prototype.call=function(i){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return i.call.apply(i,(0,ie.ev)([this._parent,this],(0,ie.CR)(s),!1)),this},e.prototype.node=function(){return this._elements[0]},e.prototype.nodes=function(){return this._elements},e.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},e.prototype.parent=function(){return this._parent};var t,n,r;return n=e,t=new WeakSet,r=function(s,l){var c=this._elements[0],h=c.querySelector(s);if(h)return new n([h],null,this._parent,this._document);var p=typeof l=="string"?this.createElement(l):l();return c.appendChild(p),new n([p],null,this._parent,this._document)},e.registry={g:$l,rect:Jg,circle:Tu,path:gl,text:to,ellipse:ul,image:I1,line:qa,polygon:uc,polyline:gu,html:A0},e}();function Eo(e){return new ja([e],null,e,e.ownerDocument)}function ra(e,t,n){return e.querySelector(t)?Eo(e).select(t):Eo(e).append(n)}var Ia=function(e,t){var n=function(i){return"".concat(t,"-").concat(i)},r=Object.fromEntries(Object.entries(e).map(function(i){var s=(0,ie.CR)(i,2),l=s[0],c=s[1],h=n(c);return[l,{name:h,class:".".concat(h),id:"#".concat(h),toString:function(){return h}}]}));return Object.assign(r,{prefix:n}),r},Bs={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new gl({style:{path:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],anchor:"0.5 0.5",fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},dd=ui({},Bs,{style:{type:"arc"}}),Kd=ui({},Bs,{style:{}}),ms=Ia({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),wc=function(e){return typeof e=="function"};function vh(e,t){return[e[0]*t,e[1]*t]}function qf(e,t){return[e[0]+t[0],e[1]+t[1]]}function sg(e,t){return[e[0]-t[0],e[1]-t[1]]}function lg(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function ug(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function F_(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function Fw(e){if(e[0]===0&&e[1]===0)return[0,0];var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t]}function e4(e,t,n){var r=__read(e,2),i=r[0],s=r[1],l=__read(t,2),c=l[0],h=l[1],p=i-c,v=s-h,y=Math.sin(n),b=Math.cos(n);return[p*b-v*y+c,p*y+v*b+h]}function iM(e,t){return t?[e[1],-e[0]]:[-e[1],e[0]]}function fy(e){return e*Math.PI/180}function Bw(e){return Number((e*180/Math.PI).toPrecision(5))}function ca(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}function Xs(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1)}function _l(e,t){return"".concat(t).concat(ca(e))}function mo(e,t,n){var r;n===void 0&&(n=!0);var i=t||((r=e.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",s=e.replace(new RegExp("^(".concat(i,")")),"");return n?Xs(s):s}function pd(e,t){Object.entries(t).forEach(function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1];(0,ie.ev)([e],(0,ie.CR)(e.querySelectorAll(i)),!1).filter(function(l){return l.matches(i)}).forEach(function(l){if(l){var c=l;c.style.cssText+=Object.entries(s).reduce(function(h,p){return"".concat(h).concat(p.join(":"),";")},"")}})})}var ql=function(e,t){if(!(e!=null&&e.startsWith(t)))return!1;var n=e[t.length];return n>="A"&&n<="Z"};function Va(e,t,n){n===void 0&&(n=!1);var r={};return Object.entries(e).forEach(function(i){var s=(0,ie.CR)(i,2),l=s[0],c=s[1];if(!(l==="className"||l==="class")){if(ql(l,"show")&&ql(mo(l,"show"),t)!==n)l===_l(t,"show")?r[l]=c:r[l.replace(new RegExp(ca(t)),"")]=c;else if(!ql(l,"show")&&ql(l,t)!==n){var h=mo(l,t);h==="filter"&&typeof c=="function"||(r[h]=c)}}}),r}function Tc(e,t){return Object.entries(e).reduce(function(n,r){var i=(0,ie.CR)(r,2),s=i[0],l=i[1];return s.startsWith("show")?n["show".concat(t).concat(s.slice(4))]=l:n["".concat(t).concat(ca(s))]=l,n},{})}function Vh(e,t){t===void 0&&(t=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(e).forEach(function(s){var l=(0,ie.CR)(s,2),c=l[0],h=l[1];t.includes(c)||(n.indexOf(c)!==-1?i[c]=h:r[c]=h)}),[r,i]}function Qd(e,t){return wc(e)?e.apply(void 0,(0,ie.ev)([],(0,ie.CR)(t),!1)):e}function kw(e,t){return e.style.opacity||(e.style.opacity=1),Se(e,{opacity:0},t)}var sj=["$el","anchor","cx","cy","d","defX","defY","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function lj(e){return sj.includes(e)}function t4(e){var t={};for(var n in e)lj(n)&&(t[n]=e[n]);return t}var db=Ia({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function n4(e){return e.reduce(function(t,n,r){return t.push((0,ie.ev)([r===0?"M":"L"],(0,ie.CR)(n),!1)),t},[])}function uj(e,t,n){var r=t.connect,i=r===void 0?"line":r,s=t.center;if(i==="line")return n4(e);if(!s)return[];var l=F_(e[0],s),c=n?0:1;return e.reduce(function(h,p,v){return v===0?h.push((0,ie.ev)(["M"],(0,ie.CR)(p),!1)):h.push((0,ie.ev)(["A",l,l,0,0,c],(0,ie.CR)(p),!1)),h},[])}function oM(e,t,n){return t.type==="surround"?uj(e,t,n):n4(e)}function cj(e,t,n){var r=n.type,i=n.connect,s=n.center,l=n.closed,c=l?[["Z"]]:[],h=(0,ie.CR)([oM(e,n),oM(t.slice().reverse(),n,!0)],2),p=h[0],v=h[1],y=(0,ie.CR)([e[0],t.slice(-1)[0]],2),b=y[0],T=y[1],M=function(z,H){return[p,z,v,H,c].flat()};if(i==="line"||r==="surround")return M([(0,ie.ev)(["L"],(0,ie.CR)(T),!1)],[(0,ie.ev)(["L"],(0,ie.CR)(b),!1)]);if(!s)throw new Error("Arc grid need to specified center");var R=(0,ie.CR)([F_(T,s),F_(b,s)],2),L=R[0],N=R[1];return M([(0,ie.ev)(["A",L,L,0,0,1],(0,ie.CR)(T),!1),(0,ie.ev)(["L"],(0,ie.CR)(T),!1)],[(0,ie.ev)(["A",N,N,0,0,0],(0,ie.CR)(b),!1),(0,ie.ev)(["L"],(0,ie.CR)(b),!1)])}function fj(e,t,n,r){var i=n.animate,s=n.isBillboard,l=t.map(function(c,h){return{id:c.id||"grid-line-".concat(h),path:oM(c.points,n)}});return e.selectAll(db.line.class).data(l,function(c){return c.id}).join(function(c){return c.append("path").each(function(h,p){var v=Qd(t4((0,ie.pi)({path:h.path},r)),[h,p,l]);this.attr((0,ie.pi)({class:db.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:s},v))})},function(c){return c.transition(function(h,p){var v=Qd(t4((0,ie.pi)({path:h.path},r)),[h,p,l]);return Se(this,v,i.update)})},function(c){return c.transition(function(){var h=this,p=kw(this,i.exit);return C(p,function(){return h.remove()}),p})}).transitions()}function hj(e,t,n){var r=n.animate,i=n.connect,s=n.areaFill;if(t.length<2||!s||!i)return[];for(var l=Array.isArray(s)?s:[s,"transparent"],c=function(M){return l[M%l.length]},h=[],p=0;p<t.length-1;p++){var v=(0,ie.CR)([t[p].points,t[p+1].points],2),y=v[0],b=v[1],T=cj(y,b,n);h.push({path:T,fill:c(p)})}return e.selectAll(db.region.class).data(h,function(M,R){return R}).join(function(M){return M.append("path").each(function(R,L){var N=Qd(R,[R,L,h]);this.attr(N)}).attr("className",db.region.name)},function(M){return M.transition(function(R,L){var N=Qd(R,[R,L,h]);return Se(this,N,r.update)})},function(M){return M.transition(function(){var R=this,L=kw(this,r.exit);return C(L,function(){return R.remove()}),L})}).transitions()}function dj(e){var t=e.data,n=t===void 0?[]:t,r=e.closed;return r?n.map(function(i){var s=i.points,l=(0,ie.CR)(s,1),c=l[0];return(0,ie.pi)((0,ie.pi)({},i),{points:(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(s),!1),[c],!1)})}):n}var pj=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.type,s=n.center,l=n.areaFill,c=n.closed,h=(0,ie._T)(n,["type","center","areaFill","closed"]),p=dj(n),v=Eo(r).maybeAppendByClassName(db.lineGroup,"g"),y=Eo(r).maybeAppendByClassName(db.regionGroup,"g"),b=fj(v,p,n,h),T=hj(y,p,n);return(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(b),!1),(0,ie.CR)(T),!1)},t}(Vr),bl=function(e,t,n){for(var r=0,i=Gl(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e},vj=function(e,t){return function(n){return e*(1-n)+t*n}};function mj(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var s=new Array(r),l=new Array(n),c=0;for(c=0;c<r;++c)s[c]=aM(e[c],t[c]);for(;c<n;++c)l[c]=t[c];for(c=0;c<r;++c)l[c]=s[c](i);return l}}function gj(e,t){e===void 0&&(e={}),t===void 0&&(t={});var n={},r={};return Object.entries(t).forEach(function(i){var s=(0,ie.CR)(i,2),l=s[0],c=s[1];l in e?n[l]=aM(e[l],c):r[l]=c}),function(i){return Object.entries(n).forEach(function(s){var l=(0,ie.CR)(s,2),c=l[0],h=l[1];return r[c]=h(i)}),r}}function aM(e,t){return typeof e=="number"&&typeof t=="number"?vj(e,t):Array.isArray(e)&&Array.isArray(t)?mj(e,t):typeof e=="object"&&typeof t=="object"?gj(e,t):function(n){return e}}function yj(e,t,n,r){if(!r)return e.attr("__keyframe_data__",n),null;var i=r.duration,s=i===void 0?0:i,l=aM(t,n),c=Math.ceil(+s/16),h=new Array(c).fill(0).map(function(p,v,y){return{__keyframe_data__:l(v/(y.length-1))}});return e.animate(h,(0,ie.pi)({fill:"both"},r))}function B_(e){return typeof e=="function"?e():Gl(e)||(0,$u.Z)(e)?new to({style:{text:String(e)}}):e}function sM(e,t,n){n===void 0&&(n=!1);var r=e.getBBox(),i=r.width,s=r.height,l=t/Math.max(i,s);return n&&e.scale(l),l}function r4(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n}function i4(e,t){return Object.fromEntries(Object.entries(e).map(function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1];return[i,Qd(s,t)]}))}function vde(e){if(e.type==="linear"){var t=e.startPos,n=e.endPos;return __spreadArray(__spreadArray([],__read(t),!1),__read(n),!1)}var r=e.startAngle,i=e.endAngle,s=e.center,l=e.radius;return __spreadArray(__spreadArray([r,i],__read(s),!1),[l],!1)}function lM(e,t){return t&&wc(t)?e.filter(t):e}function o4(e,t){var n=t.startAngle,r=t.endAngle;return(r-n)*e+n}function zw(e,t){if(t.type==="linear"){var n=(0,ie.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,ie.CR)(t.endPos,2),l=s[0],c=s[1],h=(0,ie.CR)([l-r,c-i],2),p=h[0],v=h[1];return Fw([p,v])}var y=fy(o4(e,t));return[-Math.sin(y),Math.cos(y)]}function uM(e,t,n){var r=zw(e,n);return iM(r,t!=="positive")}function _2(e,t){return uM(e,t.labelDirection,t)}function _j(e,t){var n=(0,ie.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,ie.CR)(t.endPos,2),l=s[0],c=s[1],h=(0,ie.CR)([l-r,c-i],2),p=h[0],v=h[1];return[r+p*e,i+v*e]}function bj(e,t){var n=t.radius,r=(0,ie.CR)(t.center,2),i=r[0],s=r[1],l=fy(o4(e,t));return[i+n*Math.cos(l),s+n*Math.sin(l)]}function Uw(e,t){return t.type==="linear"?_j(e,t):bj(e,t)}function a4(e){return zw(0,e)[1]===0}function s4(e){return zw(0,e)[0]===0}function l4(e,t){return t-e===360}function u4(e,t,n,r,i){var s=t-e,l=(0,ie.CR)([i,i],2),c=l[0],h=l[1],p=(0,ie.CR)([fy(e),fy(t)],2),v=p[0],y=p[1],b=function(Ye){return[n+i*Math.cos(Ye),r+i*Math.sin(Ye)]},T=(0,ie.CR)(b(v),2),M=T[0],R=T[1],L=(0,ie.CR)(b(y),2),N=L[0],z=L[1];if(l4(e,t)){var H=(y+v)/2,X=(0,ie.CR)(b(H),2),Y=X[0],ne=X[1];return[["M",M,R],["A",c,h,0,1,0,Y,ne],["A",c,h,0,1,0,N,z]]}var ve=s>180?1:0,Ee=e>t?0:1,Ie=!1;return Ie?"M".concat(n,",").concat(r,",L").concat(M,",").concat(R,",A").concat(c,",").concat(h,",0,").concat(ve,",").concat(Ee,",").concat(N,",").concat(z,",L").concat(n,",").concat(r):"M".concat(M,",").concat(R,",A").concat(c,",").concat(h,",0,").concat(ve,",").concat(Ee,",").concat(N,",").concat(z)}function xj(e){var t=e.attributes,n=t.startAngle,r=t.endAngle,i=t.center,s=t.radius;return(0,ie.ev)((0,ie.ev)([n,r],(0,ie.CR)(i),!1),[s],!1)}function Ej(e,t,n,r){var i=t.startAngle,s=t.endAngle,l=t.center,c=t.radius;return e.selectAll(ms.line.class).data([{path:u4.apply(void 0,(0,ie.ev)((0,ie.ev)([i,s],(0,ie.CR)(l),!1),[c],!1))}],function(h,p){return p}).join(function(h){return h.append("path").attr("className",ms.line.name).styles(t).styles({path:function(p){return p.path}})},function(h){return h.transition(function(){var p=this,v=yj(this,xj(this),(0,ie.ev)((0,ie.ev)([i,s],(0,ie.CR)(l),!1),[c],!1),r.update);if(v){var y=function(){var b=bl(p.attributes,"__keyframe_data__");p.style.path=u4.apply(void 0,(0,ie.ev)([],(0,ie.CR)(b),!1))};v.onframe=y,v.onfinish=y}return v}).styles(t)},function(h){return h.remove()}).styles(n).transitions()}function Sj(e,t){var n=t.truncRange,r=t.truncShape,i=t.lineExtension}function wj(e,t,n){n===void 0&&(n=[0,0]);var r=(0,ie.CR)([e,t,n],3),i=(0,ie.CR)(r[0],2),s=i[0],l=i[1],c=(0,ie.CR)(r[1],2),h=c[0],p=c[1],v=(0,ie.CR)(r[2],2),y=v[0],b=v[1],T=(0,ie.CR)([h-s,p-l],2),M=T[0],R=T[1],L=Math.sqrt(Math.pow(M,2)+Math.pow(R,2)),N=(0,ie.CR)([-y/L,b/L],2),z=N[0],H=N[1];return[z*M,z*R,H*M,H*R]}function c4(e){var t=(0,ie.CR)(e,2),n=(0,ie.CR)(t[0],2),r=n[0],i=n[1],s=(0,ie.CR)(t[1],2),l=s[0],c=s[1];return{x1:r,y1:i,x2:l,y2:c}}function Tj(e,t,n,r){var i=t.showTrunc,s=t.startPos,l=t.endPos,c=t.truncRange,h=t.lineExtension,p=(0,ie.CR)([s,l],2),v=(0,ie.CR)(p[0],2),y=v[0],b=v[1],T=(0,ie.CR)(p[1],2),M=T[0],R=T[1],L=(0,ie.CR)(h?wj(s,l,h):new Array(4).fill(0),4),N=L[0],z=L[1],H=L[2],X=L[3],Y=function(Ot){return e.selectAll(ms.line.class).data(Ot,function(kt,Mn){return Mn}).join(function(kt){return kt.append("line").attr("className",function(Mn){return"".concat(ms.line.name," ").concat(Mn.className)}).styles(n).transition(function(Mn){return Se(this,c4(Mn.line),!1)})},function(kt){return kt.styles(n).transition(function(Mn){var Wn=Mn.line;return Se(this,c4(Wn),r.update)})},function(kt){return kt.remove()}).transitions()};if(!i||!c)return Y([{line:[[y+N,b+z],[M+H,R+X]],className:ms.line.name}]);var ne=(0,ie.CR)(c,2),ve=ne[0],Ee=ne[1],Ie=M-y,Ye=R-b,$e=(0,ie.CR)([y+Ie*ve,b+Ye*ve],2),St=$e[0],Qe=$e[1],lt=(0,ie.CR)([y+Ie*Ee,b+Ye*Ee],2),ht=lt[0],bt=lt[1],Ht=Y([{line:[[y+N,b+z],[St,Qe]],className:ms.lineFirst.name},{line:[[ht,bt],[M+H,R+X]],className:ms.lineSecond.name}]);return Sj(e,t),Ht}function Aj(e,t,n,r){var i=n.showArrow,s=n.showTrunc,l=n.lineArrow,c=n.lineArrowOffset,h=n.lineArrowSize,p;if(t==="arc"?p=e.select(ms.line.class):s?p=e.select(ms.lineSecond.class):p=e.select(ms.line.class),!i||!l||n.type==="arc"&&l4(n.startAngle,n.endAngle)){var v=p.node();v&&(v.style.markerEnd=void 0);return}var y=B_(l);y.attr(r),sM(y,h,!0),p.style("markerEnd",y).style("markerEndOffset",-c)}function Cj(e,t,n){var r=t.type,i,s=Va(t,"line");return r==="linear"?i=Tj(e,t,r4(s,"arrow"),n):i=Ej(e,t,r4(s,"arrow"),n),Aj(e,r,t,s),i}function Oj(e,t){return uM(e,t.gridDirection,t)}function f4(e){var t=e.type,n=e.gridCenter;return t==="linear"?n:n||e.center}function Mj(e,t){var n=t.gridLength;return e.map(function(r,i){var s=r.value,l=(0,ie.CR)(Uw(s,t),2),c=l[0],h=l[1],p=(0,ie.CR)(vh(Oj(s,t),n),2),v=p[0],y=p[1];return{id:i,points:[[c,h],[c+v,h+y]]}})}function Rj(e,t){var n=t.gridControlAngles,r=f4(t);if(!r)throw new Error("grid center is not provide");if(e.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=(0,ie.CR)(r,2),s=i[0],l=i[1];return e.map(function(c,h){var p=c.value,v=(0,ie.CR)(Uw(p,t),2),y=v[0],b=v[1],T=(0,ie.CR)([y-s,b-l],2),M=T[0],R=T[1],L=[];return n.forEach(function(N){var z=fy(N),H=(0,ie.CR)([Math.cos(z),Math.sin(z)],2),X=H[0],Y=H[1],ne=M*X-R*Y+s,ve=M*Y+R*X+l;L.push([ne,ve])}),{points:L,id:h}})}function Pj(e,t,n,r){var i=Va(n,"grid"),s=i.type,l=i.areaFill,c=f4(n),h=lM(t,n.gridFilter),p=s==="segment"?Mj(h,n):Rj(h,n),v=(0,ie.pi)((0,ie.pi)({},i),{center:c,areaFill:wc(l)?h.map(function(y,b){return Qd(l,[y,b,h])}):l,animate:r,data:p});return e.selectAll(ms.grid.class).data([1]).join(function(y){return y.append(function(){return new pj({style:v})}).attr("className",ms.grid.name)},function(y){return y.transition(function(){return this.update(v)})},function(y){return y.remove()}).transitions()}function Hh(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&e===t||i&&e===n?!0:e>t&&e<n}function Ij(e){var t,n,r,i=e||1;function s(c,h){++t>i&&(r=n,l(1),++t),n[c]=h}function l(c){t=0,n=Object.create(null),c||(r=Object.create(null))}return l(),{clear:l,has:function(c){return n[c]!==void 0||r[c]!==void 0},get:function(c){var h=n[c];if(h!==void 0)return h;if((h=r[c])!==void 0)return s(c,h),h},set:function(c,h){n[c]!==void 0?n[c]=h:s(c,h)}}}var Lj=function(e,t,n){if(n===void 0&&(n=128),!wc(e))throw new TypeError("Expected a function");var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var l=t?t.apply(this,i):i[0],c=r.cache;if(c.has(l))return c.get(l);var h=e.apply(this,i);return c.set(l,h),h};return r.cache=Ij(n),r},jw,cM;function mde(e){cM=e}var Dj=Lj(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,s=t.fontStyle,l=t.fontVariant;return cM?cM(e,n):(jw||(jw=Kr.offscreenCanvasCreator.getOrCreateContext(void 0)),jw.font=[s,l,i,"".concat(n,"px"),r].join(" "),jw.measureText(e).width)},function(e,t){return[e,Object.values(t||h4(e)).join()].join("")},4096),h4=function(e){var t=e.style.fontFamily||"sans-serif",n=e.style.fontWeight||"normal",r=e.style.fontStyle||"normal",i=e.style.fontVariant,s=e.style.fontSize;return s=typeof s=="object"?s.value:s,{fontSize:s,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i}};function d4(e){return e.nodeName==="text"?e:e.nodeName==="g"&&e.children.length===1&&e.children[0].nodeName==="text"?e.children[0]:null}function p4(e,t){var n=d4(e);n&&n.attr(t)}function fM(e,t,n){n===void 0&&(n="..."),p4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n})}function Nj(e,t,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),p4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:n,textBaseline:r})}function Fj(e,t,n){var r=e.getBBox(),i=r.width,s=r.height,l=(0,ie.CR)([t,n].map(function(p,v){var y;return p.includes("%")?parseFloat(((y=p.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||y===void 0?void 0:y[0])||"0")/100*(v===0?i:s):p}),2),c=l[0],h=l[1];return[c,h]}function Vw(e,t){if(t)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=t.replace(n,function(i,s,l){return"translate(".concat(Fj(e,s,l),")")});e.attr("transform",r)}catch(i){}}var v4=function(e){return e!==void 0&&e!=null&&!Number.isNaN(e)};function Wh(e){if((0,$u.Z)(e))return[e,e,e,e];if(Hr(e)){var t=e.length;if(t===1)return[e[0],e[0],e[0],e[0]];if(t===2)return[e[0],e[1],e[0],e[1]];if(t===3)return[e[0],e[1],e[2],e[1]];if(t===4)return e}return[0,0,0,0]}var hM=function(){function e(t,n,r,i){this.set(t,n,r,i)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(t,n,r){var i=this,s=i.x1,l=i.y1,c=i.x2,h=i.y2,p=Math.cos(t),v=Math.sin(t),y=n-n*p+r*v,b=r-n*v-r*p,T=[[p*s-v*h+y,v*s+p*h+b],[p*c-v*h+y,v*c+p*h+b],[p*s-v*l+y,v*s+p*l+b],[p*c-v*l+y,v*c+p*l+b]];return T},e.prototype.set=function(t,n,r,i){return r<t?(this.x2=t,this.x1=r):(this.x1=t,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},e.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},e}();function Hw(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var r=e.getLocalBounds(),i=(0,ie.CR)(r.min,2),s=i[0],l=i[1],c=(0,ie.CR)(r.max,2),h=c[0],p=c[1],v=dM(e),y=v.width,b=v.height,T=b,M=0,R=0,L=s,N=l,z=d4(e);if(z){T-=1.5;var H=z.style.textAlign,X=z.style.textBaseline;H==="center"?L=(s+h)/2:(H==="right"||H==="end")&&(L=h),X==="middle"?N=(l+p)/2:X==="bottom"&&(N=p)}var Y=(0,ie.CR)(Wh(t),4),ne=Y[0],ve=ne===void 0?0:ne,Ee=Y[1],Ie=Ee===void 0?0:Ee,Ye=Y[2],$e=Ye===void 0?ve:Ye,St=Y[3],Qe=St===void 0?Ie:St,lt=new hM((M+=s)-Qe,(R+=l)-ve,M+y+Ie,R+T+$e);return e.setEulerAngles(n),lt.rotatedPoints(fy(n),L,N)}function dM(e){return e.__bbox__?e.__bbox__:e.getBBox()}function b2(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1])}function x2(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return r===0?0:r<0?2:1}function Bj(e,t){var n=x2(e[0],e[1],t[0]),r=x2(e[0],e[1],t[1]),i=x2(t[0],t[1],e[0]),s=x2(t[0],t[1],e[1]);return!!(n!==r&&i!==s||n===0&&b2(e,t[0])||r===0&&b2(e,t[1])||i===0&&b2(t,e[0])||s===0&&b2(t,e[1]))}function kj(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],i=0,s=0;do{var l=[e[s],e[(s+1)%n]];if(Bj(l,r)){if(x2(l[0],t,l[1])===0)return b2(l,t);i++}s=(s+1)%n}while(s!==0);return!!(i&1)}function zj(e,t){return t.every(function(n){return kj(e,n)})}function Uj(e,t,n){var r=e.x1,i=e.x2,s=e.y1,l=e.y2,c=[[r,s],[i,s],[i,l],[r,l]],h=Hw(t,n);return zj(c,h)}function m4(e,t){var n=(0,ie.CR)(e,4),r=n[0],i=n[1],s=n[2],l=n[3],c=(0,ie.CR)(t,4),h=c[0],p=c[1],v=c[2],y=c[3],b=s-r,T=l-i,M=v-h,R=y-p,L=b*R-M*T;if(L===0)return!1;var N=L>0,z=r-h,H=i-p,X=b*H-T*z;if(X<0===N)return!1;var Y=M*H-R*z;return!(Y<0===N||X>L===N||Y>L===N)}function g4(e,t){var n=[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]];return n.some(function(r){return m4(t,r)})}var gde={lineToLine:m4,intersectBoxLine:g4,getBounds:Hw};function jj(e,t,n){var r,i,s=Hw(e,n).flat(1),l=Hw(t,n).flat(1),c=[[s[0],s[1],s[2],s[3]],[s[0],s[1],s[4],s[5]],[s[4],s[5],s[6],s[7]],[s[2],s[3],s[6],s[7]]];try{for(var h=(0,ie.XA)(c),p=h.next();!p.done;p=h.next()){var v=p.value;if(g4(l,v))return!0}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return!1}function Vj(e,t){var n=e.type,r=e.labelDirection,i=e.crossSize;if(!i)return!1;if(n==="arc"){var s=e.center,l=e.radius,c=(0,ie.CR)(s,2),h=c[0],p=c[1],v=r==="negative"?0:i,y=-l-v,b=l+v,T=(0,ie.CR)(Wh(t),4),M=T[0],R=T[1],L=T[2],N=T[3];return new hM(h+y-N,p+y-M,h+b+R,p+b+L)}var z=(0,ie.CR)(e.startPos,2),H=z[0],X=z[1],Y=(0,ie.CR)(e.endPos,2),ne=Y[0],ve=Y[1],Ee=(0,ie.CR)(s4(e)?[-t,0,t,0]:[0,t,0,-t],4),Ie=Ee[0],Ye=Ee[1],$e=Ee[2],St=Ee[3],Qe=_2(0,e),lt=vh(Qe,i),ht=new hM(H,X,ne,ve);return ht.x1+=St,ht.y1+=Ie,ht.x2+=Ye+lt[0],ht.y2+=$e+lt[1],ht}function Ww(e,t,n){var r,i,s=t.crossPadding,l=new Set,c=null,h=Vj(t,s),p=function(M){return h?Uj(h,M):!0},v=function(M,R){return M?!jj(M,R,Wh(n)):!0};try{for(var y=(0,ie.XA)(e),b=y.next();!b.done;b=y.next()){var T=b.value;p(T)?!c||v(c,T)?c=T:(l.add(c),l.add(T)):l.add(T)}}catch(M){r={error:M}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return Array.from(l)}function pM(e,t){return t===void 0&&(t={}),(0,Lo.Z)(e)?0:typeof e=="number"?e:Math.floor(Dj(e,t))}function Hj(e,t,n,r){if(!(e.length<=1)){var i=t.suffix,s=i===void 0?"...":i,l=t.minLength,c=t.maxLength,h=c===void 0?1/0:c,p=t.step,v=p===void 0?" ":p,y=t.margin,b=y===void 0?[0,0,0,0]:y,T=h4(r.getTextShape(e[0])),M=pM(v,T),R=l?pM(l,T):M,L=pM(h,T);((0,Lo.Z)(L)||L===1/0)&&(L=Math.max.apply(null,e.map(function(lt){return dM(lt).width})));for(var N=e.slice(),z=(0,ie.CR)(b,4),H=z[0],X=H===void 0?0:H,Y=z[1],ne=Y===void 0?0:Y,ve=z[2],Ee=ve===void 0?X:ve,Ie=z[3],Ye=Ie===void 0?ne:Ie,$e=function(lt){if(N.forEach(function(ht){r.ellipsis(r.getTextShape(ht),lt,s)}),N=Ww(e,n,b),N.length<1)return{value:void 0}},St=L;St>R+M;St-=M){var Qe=$e(St);if(typeof Qe=="object")return Qe.value}}}function yde(e){var t=e&&e.getRenderBounds();if(!t)return{width:0,height:0};var n=t.getMax(),r=t.getMin();return{width:n[0]-r[0],height:n[1]-r[1]}}function y4(e){var t=e.getLocalBounds(),n=t.min,r=t.max,i=(0,ie.CR)([n,r],2),s=(0,ie.CR)(i[0],2),l=s[0],c=s[1],h=(0,ie.CR)(i[1],2),p=h[0],v=h[1];return{x:l,y:c,width:p-l,height:v-c,left:l,bottom:v,top:c,right:p}}function _de(e,t){var n=select(e).append("text").node();return n.attr(__assign(__assign({},t),{visibility:"hidden"})),n}function Wj(e,t){var n=(0,ie.CR)(e,2),r=n[0],i=n[1],s=(0,ie.CR)(t,2),l=s[0],c=s[1];return r!==l&&i===c}function bde(e,t){var n=__read(e,2),r=n[0],i=n[1],s=__read(t,2),l=s[0],c=s[1];return r===l&&i!==c}function Gj(e,t){var n,r,i=t.attributes;try{for(var s=(0,ie.XA)(Object.entries(i)),l=s.next();!l.done;l=s.next()){var c=(0,ie.CR)(l.value,2),h=c[0],p=c[1];h!=="id"&&h!=="className"&&e.attr(h,p)}}catch(v){n={error:v}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var Zj={parity:function(e,t){var n=t.seq,r=n===void 0?2:n;return e.filter(function(i,s){return s%r?(o(i),!1):!0})}},Xj=function(e){return e.filter(v4)};function Yj(e,t,n,r){var i=e.length,s=t.keepHeader,l=t.keepTail;if(!(i<=1||i===2&&s&&l)){var c=Zj.parity,h=function(H){return H.forEach(r.show),H},p=2,v=e.slice(),y=e.slice(),b=Math.min.apply(Math,(0,ie.ev)([1],(0,ie.CR)(e.map(function(H){return dM(H).width})),!1));if(n.type==="linear"&&(a4(n)||s4(n))){var T=y4(e[0]).left,M=y4(e[i-1]).right,R=Math.abs(M-T)||1;p=Math.max(Math.floor(i*b/R),p)}var L,N;for(s&&(L=v.splice(0,1)[0]),l&&(N=v.splice(-1,1)[0],v.reverse()),h(v);p<e.length&&Ww(Xj(N?(0,ie.ev)((0,ie.ev)([N],(0,ie.CR)(y),!1),[L],!1):(0,ie.ev)([L],(0,ie.CR)(y),!1)),n,t==null?void 0:t.margin).length;){if(N&&!L&&p%2===0){var z=v.splice(0,1);z.forEach(r.hide)}else if(N&&L){var z=v.splice(0,1);z.forEach(r.hide)}y=c(h(v),{seq:p}),p++}}}function $j(e,t,n,r){var i,s,l=t.optionalAngles,c=l===void 0?[0,45,90]:l,h=t.margin,p=t.recoverWhenFailed,v=p===void 0?!0:p,y=e.map(function(N){return N.getLocalEulerAngles()}),b=function(){return Ww(e,n,h).length<1},T=function(N){return e.forEach(function(z,H){var X=Array.isArray(N)?N[H]:N;r.rotate(z,+X)})};try{for(var M=(0,ie.XA)(c),R=M.next();!R.done;R=M.next()){var L=R.value;if(T(L),b())return}}catch(N){i={error:N}}finally{try{R&&!R.done&&(s=M.return)&&s.call(M)}finally{if(i)throw i.error}}v&&T(y)}function qj(e){var t=e.type,n=e.labelDirection;return t==="linear"&&a4(e)?n==="negative"?"bottom":"top":"middle"}function Kj(e,t,n,r){var i=t.wordWrapWidth,s=i===void 0?50:i,l=t.maxLines,c=l===void 0?3:l,h=t.recoverWhenFailed,p=h===void 0?!0:h,v=t.margin,y=v===void 0?[0,0,0,0]:v,b=e.map(function(z){return z.attr("maxLines")||1}),T=Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(b),!1)),M=function(){return Ww(e,n,y).length<1},R=qj(n),L=function(z){return e.forEach(function(H,X){var Y=Array.isArray(z)?z[X]:z;r.wrap(H,s,Y,R)})};if(!(T>c)){for(var N=T;N<=c;N++)if(L(N),M())return;p&&L(b)}}var Qj=new Map([["hide",Yj],["rotate",$j],["ellipsis",Hj],["wrap",Kj]]);function Jj(e,t,n){return t.labelOverlap.length<1?!1:n==="hide"?!Ar(e[0]):n==="rotate"?!e.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?e.filter(function(r){return r.querySelector("text")}).length>1:!0}function eV(e,t,n){var r=t.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(s){var l=s.type,c=Qj.get(l);Jj(e,t,l)&&(c==null||c(e,s,t,n))})}function tV(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(r){return r==="positive"?-1:1};return e.reduce(function(r,i){return r*n(i)},1)}function _4(e){for(var t=e;t<0;)t+=360;return Math.round(t%360)}function vM(e,t){var n=(0,ie.CR)(e,2),r=n[0],i=n[1],s=(0,ie.CR)(t,2),l=s[0],c=s[1],h=(0,ie.CR)([r*l+i*c,r*c-i*l],2),p=h[0],v=h[1];return Math.atan2(v,p)}function nV(e){var t=(e+360)%180;return Hh(t,-90,90)||(t+=180),t}function rV(e,t,n){var r,i=n.labelAlign,s=(r=t.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(s)return t.getLocalEulerAngles();var l=0,c=_2(e.value,n),h=zw(e.value,n);return i==="horizontal"?0:(i==="perpendicular"?l=vM([1,0],c):l=vM([h[0]<0?-1:1,0],h),nV(Bw(l)))}function b4(e,t,n){var r=n.type,i=n.labelAlign,s=_2(e,n),l=_4(t),c=_4(Bw(vM([1,0],s))),h="center",p="middle";return r==="linear"?[90,270].includes(c)&&l===0?(h="center",p=s[1]===1?"top":"bottom"):!(c%180)&&[90,270].includes(l)?h="center":c===0?(Hh(l,0,90,!1,!0)||Hh(l,0,90)||Hh(l,270,360))&&(h="start"):c===90?Hh(l,0,90,!1,!0)?h="start":(Hh(l,90,180)||Hh(l,270,360))&&(h="end"):c===270?Hh(l,0,90,!1,!0)?h="end":(Hh(l,90,180)||Hh(l,270,360))&&(h="start"):c===180&&(l===90?h="start":(Hh(l,0,90)||Hh(l,270,360))&&(h="end")):i==="parallel"?Hh(c,0,180,!0)?p="top":p="bottom":i==="horizontal"?Hh(c,90,270,!1)?h="end":(Hh(c,270,360,!1)||Hh(c,0,90))&&(h="start"):i==="perpendicular"&&(Hh(c,90,270)?h="end":h="start"),{textAlign:h,textBaseline:p}}function iV(e,t,n){t.setLocalEulerAngles(e);var r=t.__data__.value,i=b4(r,e,n),s=t.querySelector(ms.labelItem.class);s&&E4(s,i)}function x4(e,t,n){var r=n.showTick,i=n.tickLength,s=n.tickDirection,l=n.labelDirection,c=n.labelSpacing,h=t.indexOf(e),p=Qd(c,[e,h,t]),v=(0,ie.CR)([_2(e.value,n),tV(l,s)],2),y=v[0],b=v[1],T=b===1?Qd(r?i:0,[e,h,t]):0,M=(0,ie.CR)(qf(vh(y,p+T),Uw(e.value,n)),2),R=M[0],L=M[1];return{x:R,y:L}}function oV(e,t,n,r){var i=r.labelFormatter,s=wc(i)?function(){return B_(Qd(i,[e,t,n,_2(e.value,r)]))}:function(){return B_(e.label||"")};return s}function E4(e,t){e.nodeName==="text"&&e.attr(t)}function S4(e){eV(this.node().childNodes,e,{hide:o,show:a,rotate:function(t,n){iV(+n,t,e)},ellipsis:function(t,n,r){t&&fM(t,n||1/0,r)},wrap:function(t,n,r){t&&Nj(t,n,r)},getTextShape:function(t){return t.querySelector("text")}})}function w4(e,t,n,r,i){var s=n.indexOf(t),l=Eo(e).append(oV(t,s,n,i)).attr("className",ms.labelItem.name).node(),c=(0,ie.CR)(Vh(i4(r,[t,s,n])),2),h=c[0],p=c[1],v=p.transform,y=(0,ie._T)(p,["transform"]);Vw(e,v);var b=rV(t,e,i);return e.setLocalEulerAngles(+b),E4(l,(0,ie.pi)((0,ie.pi)({},b4(t.value,b,i)),h)),Vw(e,v),e.attr(y),l}function aV(e,t,n,r){var i=lM(t,n.labelFilter),s=Va(n,"label");return e.selectAll(ms.label.class).data(i,function(l,c){return c}).join(function(l){return l.append("g").attr("className",ms.label.name).transition(function(c){return w4(this,c,t,s,n),this.attr(x4(c,t,n)),this.__bbox__=c.bbox,null}).call(function(){return S4.call(e,n)})},function(l){return l.transition(function(c){var h=this.querySelector(ms.labelItem.class),p=w4(this,c,t,s,n),v=Ce(h,p,r.update),y=Se(this,x4(c,t,n),r.update);return this.__bbox__=c.bbox,(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(v),!1),[y],!1)}).call(function(c){var h=bl(c,"_transitions").flat().filter(v4);I(h,function(){return S4.call(e,n)})})},function(l){return l.transition(function(){var c=this,h=kw(this.childNodes[0],r.exit);return C(h,function(){return Eo(c).remove()}),h})}).transitions()}function T4(e,t){return uM(e,t.tickDirection,t)}function sV(e,t){var n=(0,ie.CR)(e,2),r=n[0],i=n[1];return[[0,0],[r*t,i*t]]}function lV(e,t,n,r,i){var s=i.tickLength,l=(0,ie.CR)(sV(r,Qd(s,[e,t,n])),2),c=(0,ie.CR)(l[0],2),h=c[0],p=c[1],v=(0,ie.CR)(l[1],2),y=v[0],b=v[1];return{x1:h,x2:y,y1:p,y2:b}}function uV(e,t,n,r,i){var s=i.tickFormatter,l=T4(t.value,i),c="line";return wc(s)&&(c=function(){return Qd(s,[t,n,r,l])}),e.append(c).attr("className",ms.tickItem.name)}function cV(e,t,n,r,i,s,l){var c=T4(e.value,s),h=lV(e,t,n,c,s),p=h.x1,v=h.x2,y=h.y1,b=h.y2,T=(0,ie.CR)(Vh(i4(l,[e,t,n,c])),2),M=T[0],R=T[1];r.node().nodeName==="line"&&r.styles((0,ie.pi)({x1:p,x2:v,y1:y,y2:b},M)),i.attr(R),r.styles(M)}function A4(e,t,n,r,i,s){var l=uV(Eo(this),e,t,n,r);cV(e,t,n,l,this,r,i);var c=(0,ie.CR)(Uw(e.value,r),2),h=c[0],p=c[1];return Se(this,{x:h,y:p},s)}function fV(e,t,n,r){var i=lM(t,n.tickFilter),s=Va(n,"tick");return e.selectAll(ms.tick.class).data(i,function(l){return l.id||l.label}).join(function(l){return l.append("g").attr("className",ms.tick.name).transition(function(c,h){return A4.call(this,c,h,i,n,s,!1)})},function(l){return l.transition(function(c,h){return this.removeChildren(),A4.call(this,c,h,i,n,s,r.update)})},function(l){return l.transition(function(){var c=this,h=kw(this.childNodes[0],r.exit);return C(h,function(){return c.remove()}),h})}).transitions()}var Ku=function(){function e(t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=n,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},e.prototype.isPointIn=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e}();function xde(e){var t=e.getRenderBounds(),n=__read(t.min,2),r=n[0],i=n[1],s=__read(t.max,2),l=s[0],c=s[1],h=l-r,p=c-i;return new Ku(r,i,h,p)}var C4=Ia({text:"text"},"title");function Gw(e){return/\S+-\S+/g.test(e)?e.split("-").map(function(t){return t[0]}):e.length>2?[e[0]]:e.split("")}function hV(e,t){var n=e.attributes,r=n.position,i=n.spacing,s=n.inset,l=n.text,c=e.getBBox(),h=t.getBBox(),p=Gw(r),v=(0,ie.CR)(Wh(l?i:0),4),y=v[0],b=v[1],T=v[2],M=v[3],R=(0,ie.CR)(Wh(s),4),L=R[0],N=R[1],z=R[2],H=R[3],X=(0,ie.CR)([M+b,y+T],2),Y=X[0],ne=X[1],ve=(0,ie.CR)([H+N,L+z],2),Ee=ve[0],Ie=ve[1];if(p[0]==="l")return new Ku(c.x,c.y,h.width+c.width+Y+Ee,Math.max(h.height+Ie,c.height));if(p[0]==="t")return new Ku(c.x,c.y,Math.max(h.width+Ee,c.width),h.height+c.height+ne+Ie);var Ye=(0,ie.CR)([t.attributes.width||h.width,t.attributes.height||h.height],2),$e=Ye[0],St=Ye[1];return new Ku(h.x,h.y,$e+c.width+Y+Ee,St+c.height+ne+Ie)}function dV(e,t){var n=Object.entries(t).reduce(function(r,i){var s=(0,ie.CR)(i,2),l=s[0],c=s[1],h=e.node().attr(l);return h||(r[l]=c),r},{});e.styles(n)}function pV(e){var t,n,r,i,s=e,l=s.width,c=s.height,h=s.position,p=(0,ie.CR)([+l/2,+c/2],2),v=p[0],y=p[1],b=(0,ie.CR)([+v,+y,"center","middle"],4),T=b[0],M=b[1],R=b[2],L=b[3],N=Gw(h);return N.includes("l")&&(t=(0,ie.CR)([0,"start"],2),T=t[0],R=t[1]),N.includes("r")&&(n=(0,ie.CR)([+l,"end"],2),T=n[0],R=n[1]),N.includes("t")&&(r=(0,ie.CR)([0,"top"],2),M=r[0],L=r[1]),N.includes("b")&&(i=(0,ie.CR)([+c,"bottom"],2),M=i[0],L=i[1]),{x:T,y:M,textAlign:R,textBaseline:L}}var O4=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return t.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,s=r.height,l=r.position,c=r.spacing,h=r.inset,p=n.querySelector(C4.text.class);if(!p)return new Ku(0,0,+i,+s);var v=p.getBBox(),y=v.width,b=v.height,T=(0,ie.CR)(Wh(c),4),M=T[0],R=T[1],L=T[2],N=T[3],z=(0,ie.CR)([0,0,+i,+s],4),H=z[0],X=z[1],Y=z[2],ne=z[3],ve=Gw(l);if(ve.includes("i"))return new Ku(H,X,Y,ne);ve.forEach(function(bt,Ht){var Ot,kt,Mn,Wn;bt==="t"&&(Ot=(0,ie.CR)(Ht===0?[b+L,+s-b-L]:[0,+s],2),X=Ot[0],ne=Ot[1]),bt==="r"&&(kt=(0,ie.CR)([+i-y-N],1),Y=kt[0]),bt==="b"&&(Mn=(0,ie.CR)([+s-b-M],1),ne=Mn[0]),bt==="l"&&(Wn=(0,ie.CR)(Ht===0?[y+R,+i-y-R]:[0,+i],2),H=Wn[0],Y=Wn[1])});var Ee=(0,ie.CR)(Wh(h),4),Ie=Ee[0],Ye=Ee[1],$e=Ee[2],St=Ee[3],Qe=(0,ie.CR)([St+Ye,Ie+$e],2),lt=Qe[0],ht=Qe[1];return new Ku(H+St,X+Ie,Y-lt,ne-ht)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new Ku(0,0,0,0)},t.prototype.render=function(n,r){var i=this,s=n.width,l=n.height,c=n.position,h=n.spacing,p=(0,ie._T)(n,["width","height","position","spacing"]),v=(0,ie.CR)(Vh(p),1),y=v[0],b=pV(n),T=b.x,M=b.y,R=b.textAlign,L=b.textBaseline;ci(!!p.text,Eo(r),function(N){i.title=N.maybeAppendByClassName(C4.text,"text").styles(y).call(dV,{x:T,y:M,textAlign:R,textBaseline:L}).node()})},t}(Vr);function vV(e,t,n){var r=n.titlePosition,i=r===void 0?"lb":r,s=n.titleSpacing,l=Gw(i),c=e.node().getLocalBounds(),h=(0,ie.CR)(c.min,2),p=h[0],v=h[1],y=(0,ie.CR)(c.halfExtents,2),b=y[0],T=y[1],M=(0,ie.CR)(t.node().getLocalBounds().halfExtents,2),R=M[0],L=M[1],N=(0,ie.CR)([p+b,v+T],2),z=N[0],H=N[1],X=(0,ie.CR)(Wh(s),4),Y=X[0],ne=X[1],ve=X[2],Ee=X[3];if(["start","end"].includes(i)&&n.type==="linear"){var Ie=n.startPos,Ye=n.endPos,$e=(0,ie.CR)(i==="start"?[Ie,Ye]:[Ye,Ie],2),St=$e[0],Qe=$e[1],lt=Fw([-Qe[0]+St[0],-Qe[1]+St[1]]),ht=(0,ie.CR)(vh(lt,Y),2),bt=ht[0],Ht=ht[1];return{x:St[0]+bt,y:St[1]+Ht}}return l.includes("t")&&(H-=T+L+Y),l.includes("r")&&(z+=b+R+ne),l.includes("l")&&(z-=b+R*2+Ee),l.includes("b")&&(H+=T+L*2+ve),{x:z,y:H}}function mV(e,t,n){var r=e.cloneNode(!0);r.style.transform="scale(1, 1)",r.style.transform="none";var i=r.getBBox().height;if(t==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function M4(e,t,n,r,i){var s=Va(r,"title"),l=(0,ie.CR)(Vh(s),2),c=l[0],h=l[1],p=h.transform,v=(0,ie._T)(h,["transform"]);e.styles(c),t.styles(v);var y=p||mV(e.node(),c.direction,c.position);Vw(e.node(),y);var b=vV(Eo(n._offscreen||n.querySelector(ms.mainGroup.class)),t,r),T=b.x,M=b.y,R=Se(t.node(),{x:T,y:M},i);return Vw(e.node(),y),R}function gV(e,t,n,r){var i=n.titleText;return e.selectAll(ms.title.class).data([{title:i}].filter(function(s){return!!s.title}),function(s,l){return s.title}).join(function(s){return s.append(function(){return B_(i)}).attr("className",ms.title.name).transition(function(){return M4(Eo(this),e,t,n,r.enter)})},function(s){return s.transition(function(){return M4(Eo(this),e,t,n,r.update)})},function(s){return s.remove()}).transitions()}function R4(e,t,n,r){var i=e.showLine,s=e.showTick,l=e.showLabel,c=t.maybeAppendByClassName(ms.lineGroup,"g"),h=ci(i,c,function(T){return Cj(T,e,r)})||[],p=t.maybeAppendByClassName(ms.tickGroup,"g"),v=ci(s,p,function(T){return fV(T,n,e,r)})||[],y=t.maybeAppendByClassName(ms.labelGroup,"g"),b=ci(l,y,function(T){return aV(T,n,e,r)})||[];return(0,ie.ev)((0,ie.ev)((0,ie.ev)([],(0,ie.CR)(h),!1),(0,ie.CR)(v),!1),(0,ie.CR)(b),!1).filter(function(T){return!!T})}var mM=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,Bs)||this}return t.prototype.render=function(n,r,i){var s=this,l=n.titleText,c=n.data,h=n.animate,p=n.showTitle,v=n.showGrid,y=n.dataThreshold,b=n.truncRange,T=Io(c,y).filter(function(Y){var ne=Y.value;return!(b&&ne>b[0]&&ne<b[1])}),M=w(i===void 0?h:i),R=Eo(r).maybeAppendByClassName(ms.gridGroup,"g"),L=ci(v,R,function(Y){return Pj(Y,T,n,M)})||[],N=Eo(r).maybeAppendByClassName(ms.mainGroup,"g");l&&(!this.initialized&&M.enter||this.initialized&&M.update)&&R4(n,Eo(this.offscreenGroup),T,w(!1));var z=R4(n,Eo(N.node()),T,M),H=Eo(r).maybeAppendByClassName(ms.titleGroup,"g"),X=ci(p,H,function(Y){return gV(Y,s,n,M)})||[];return(0,ie.ev)((0,ie.ev)((0,ie.ev)([],(0,ie.CR)(L),!1),(0,ie.CR)(z),!1),(0,ie.CR)(X),!1).flat().filter(function(Y){return!!Y})},t}(Vr),yV={}.toString,_V=function(e,t){return yV.call(e)==="[object "+t+"]"},E2=_V,gM=function(e){return E2(e,"Function")},P4=function(e){return Array.isArray?Array.isArray(e):E2(e,"Array")},bV=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"};function xV(e,t){if(e){var n;if(P4(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(bV(e)){for(var s in e)if(e.hasOwnProperty(s)&&(n=t(e[s],s),n===!1))break}}}var I4=xV,Ede=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return I4(e,function(n,r){gM(e)&&r==="prototype"||t.push(r)}),t},Sde=null;function wde(e,t){var n=keys(t),r=n.length;if(isNil(e))return!r;for(var i=0;i<r;i+=1){var s=n[i];if(t[s]!==e[s]||!(s in e))return!1}return!0}var Tde=null,EV=function(e){return typeof e=="object"&&e!==null},SV=EV,wV=function(e){if(!SV(e)||!E2(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},L4=wV;function Ade(e,t){if(!isArray(e))return null;var n;if(isFunction(t)&&(n=t),isPlainObject(t)&&(n=function(i){return isMatch(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var Cde=null,Ode=function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r],s=i[t];if(!isNil(s)){isArray(s)?n=s[0]:n=s;break}}return n},Mde=null,Rde=function(e){if(!isArray(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},Pde=null,TV=function(e,t){if(t===void 0&&(t=[]),!isArray(e))t.push(e);else for(var n=0;n<e.length;n+=1)TV(e[n],t);return t},Ide=null,Lde=function(e){if(isArray(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},Dde=function(e){if(isArray(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},Nde=function(e){var t=e.filter(function(l){return!isNaN(l)});if(!t.length)return{min:0,max:0};if(isArray(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=getMax(t),s=getMin(t);return{min:s,max:i}},Fde=null,D4=Array.prototype,AV=D4.splice,CV=D4.indexOf,Bde=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],s=-1;(s=CV.call(e,i))>-1;)AV.call(e,s,1);return e},kde=null,OV=Array.prototype.splice,zde=function(t,n){if(!isArrayLike(t))return[];for(var r=t?n.length:0,i=r-1;r--;){var s=void 0,l=n[r];(r===i||l!==s)&&(s=l,OV.call(t,l,1))}return t},Ude=null,jde=function(e,t,n){if(!isArray(e)&&!isPlainObject(e))return e;var r=n;return each(e,function(i,s){r=t(r,i,s)}),r},Vde=null,Hde=function(e,t){var n=[];if(!isArrayLike(e))return n;for(var r=-1,i=[],s=e.length;++r<s;){var l=e[r];t(l,r,e)&&(n.push(l),i.push(r))}return pullAt(e,i),n},Wde=null,MV=function(e){return E2(e,"String")};function Gde(e,t){var n;if(isFunction(t))n=function(i,s){return t(i)-t(s)};else{var r=[];isString(t)?r.push(t):isArray(t)&&(r=t),n=function(i,s){for(var l=0;l<r.length;l+=1){var c=r[l];if(i[c]>s[c])return 1;if(i[c]<s[c])return-1}return 0}}return e.sort(n),e}var Zde=null,Xde=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var s=e[i],l=s[t];if(!isNil(l)){isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var h=l[c];r[h]||(n.push(h),r[h]=!0)}}}return n};function Yde(e,t){return isArray(e)||isString(e)?e[0]===t:!1}var $de=null;function qde(e,t){return isArray(e)||isString(e)?e[e.length-1]===t:!1}var Kde=null,RV=Object.prototype.hasOwnProperty;function Qde(e,t){if(!t||!isArray(e))return{};for(var n={},r=isFunction(t)?t:function(c){return c[t]},i,s=0;s<e.length;s++){var l=e[s];i=r(l),RV.call(n,i)?n[i].push(l):n[i]=[l]}return n}var Jde=null;function epe(e,t){if(!t)return{0:e};if(!isFunction(t)){var n=isArray(t)?t:t.replace(/\s+/g,"").split("*");t=function(r){for(var i="_",s=0,l=n.length;s<l;s++)i+=r[n[s]]&&r[n[s]].toString();return i}}return groupBy(e,t)}var tpe=function(e,t){if(!t)return[e];var n=groupToMap(e,t),r=[];for(var i in n)r.push(n[i]);return r},N4={};function npe(e){var t=N4[e];if(!t){for(var n=e.toString(16),r=n.length;r<6;r++)n="0"+n;t="#"+n,N4[e]=t}return t}var rpe=null;function ipe(e){var t=0,n=0,r=0,i=0;return isArray(e)?e.length===1?t=n=r=i=e[0]:e.length===2?(t=r=e[0],n=i=e[1]):e.length===3?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}var ope=null,PV=function(e){return E2(e,"Number")},pb=PV,ape=function(e){return isNumber(e)&&e%1!==0},spe=null,lpe=function(e){return isNumber(e)&&e%2===0},upe=null,cpe=Number.isInteger?Number.isInteger:function(e){return pb(e)&&e%1===0},fpe=null,hpe=function(e){return isNumber(e)&&e<0},dpe=null,ppe=function(e){return isNumber(e)&&e%2!==0},vpe=null,mpe=function(e){return isNumber(e)&&e>0},gpe=null,ype=function(e,t){if(isArray(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var s=e[i],l=isFunction(t)?t(s):s[t];l>r&&(n=s,r=l)}return n}},_pe=function(e,t){if(isArray(e)){for(var n,r=1/0,i=0;i<e.length;i++){var s=e[i],l=isFunction(t)?t(s):s[t];l<r&&(n=s,r=l)}return n}},IV=180/Math.PI,bpe=function(e){return IV*e},xpe=null,LV=Math.PI/180,Epe=function(e){return LV*e},Spe=null,wpe=null,DV=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return I4(e,function(n,r){gM(e)&&r==="prototype"||t.push(n)}),t},NV=DV,Tpe=function(e,t){return contains(values(e),t)},FV={}.toString,Ape=function(e){return FV.call(e).replace(/^\[object /,"").replace(/]$/,"")},Cpe=null,Ope=function(e){return isType(e,"Arguments")},Mpe=null,Rpe=function(e){return isType(e,"Boolean")},Ppe=null,Ipe=function(e){return isType(e,"Date")},Lpe=null,Dpe=function(e){return isType(e,"Error")},Npe=null;function Fpe(e){return isNumber(e)&&isFinite(e)}var BV=function(e){return e===null},kV=BV,zV=Object.prototype,Bpe=function(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||zV;return e===n},kpe=null,zpe=function(e){return isType(e,"RegExp")},Upe=null,UV=function(e){return e===void 0},jV=UV,jpe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=1;r<e.length;r++){var i=e[r];isFunction(i)&&(i=i.prototype),mix(n.prototype,i)}},Vpe=null,F4=function(e){if(typeof e!="object"||e===null)return e;var t;if(isArray(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=F4(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=F4(e[i]):t[i]=e[i]}return t},Hpe=null,VV=function(e,t){if(!gM(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=t?t.apply(this,r):r[0],l=n.cache;if(l.has(s))return l.get(s);var c=e.apply(this,r);return l.set(s,c),c};return n.cache=new Map,n},HV=5;function B4(e,t,n,r){n=n||0,r=r||HV;for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];s!==null&&L4(s)?(L4(e[i])||(e[i]={}),n<r?B4(e[i],s,n+1,r):e[i]=t[i]):P4(s)?(e[i]=[],e[i]=e[i].concat(s)):s!==void 0&&(e[i]=s)}}var WV=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)B4(e,t[r]);return e},k4=WV,Wpe=function(e,t,n,r){isFunction(t)||(n=t,t=e,e=function(){});var i=Object.create?function(l,c){return Object.create(l,{constructor:{value:c}})}:function(l,c){function h(){}h.prototype=l;var p=new h;return p.constructor=c,p},s=i(t.prototype,e);return e.prototype=mix(s,e.prototype),e.superclass=i(t.prototype,t),mix(s,n),mix(e,r),e},Gpe=null,GV=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},z4=GV,ZV=function(e,t){if(!z4(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},U4=ZV,XV=Object.prototype.hasOwnProperty;function Zpe(e){if(isNil(e))return!0;if(isArrayLike(e))return!e.length;var t=getType(e);if(t==="Map"||t==="Set")return!e.size;if(isPrototype(e))return!Object.keys(e).length;for(var n in e)if(XV.call(e,n))return!1;return!0}var Xpe=null,j4=function(e,t){if(e===t)return!0;if(!e||!t||isString(e)||isString(t))return!1;if(isArrayLike(e)||isArrayLike(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=j4(e[r],t[r]),!!n);r++);return n}if(isObjectLike(e)||isObjectLike(t)){var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var n=!0,r=0;r<i.length&&(n=j4(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},Ype=null,$pe=function(e,t,n){return isFunction(n)?!!n(e,t):isEqual(e,t)},qpe=function(e,t,n){for(var r=0,i=isString(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e},Kpe=function(e,t,n){var r=e,i=isString(t)?t.split("."):t;return i.forEach(function(s,l){l<i.length-1?(isObject(r[s])||(r[s]=isNumber(i[l+1])?[]:{}),r=r[s]):r[s]=n}),e},YV=Object.prototype.hasOwnProperty,Qpe=function(e,t){if(e===null||!isPlainObject(e))return{};var n={};return each(t,function(r){YV.call(e,r)&&(n[r]=e[r])}),n},Jpe=function(e,t){return reduce(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})},Zw={},e0e=function(e){return e=e||"g",Zw[e]?Zw[e]+=1:Zw[e]=1,e+Zw[e]},k_=function(e){return e},$V=function(e){return e==null},qV=$V;function V4(e){return qV(e)?0:z4(e)?e.length:Object.keys(e).length}var Xw,t0e=VV(function(e,t){t===void 0&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,s=t.fontStyle,l=t.fontVariant;return Xw||(Xw=document.createElement("canvas").getContext("2d")),Xw.font=[s,l,i,n+"px",r].join(" "),Xw.measureText(MV(e)?e:"").width},function(e,t){return t===void 0&&(t={}),(0,ie.pr)([e],NV(t)).join("")}),n0e=function(e,t,n,r){r===void 0&&(r="...");var i=16,s=measureTextWidth(r,n),l=isString(e)?e:toString(e),c=t,h=[],p,v;if(measureTextWidth(e,n)<=t)return e;for(;p=l.substr(0,i),v=measureTextWidth(p,n),!(v+s>c&&v>c);)if(h.push(p),c-=v,l=l.substr(i),!l)return h.join("");for(;p=l.substr(0,1),v=measureTextWidth(p,n),!(v+s>c);)if(h.push(p),c-=v,l=l.substr(1),!l)return h.join("");return""+h.join("")+r},r0e=function(){function e(){this.map={}}return e.prototype.has=function(t){return this.map[t]!==void 0},e.prototype.get=function(t,n){var r=this.map[t];return r===void 0?n:r},e.prototype.set=function(t,n){this.map[t]=n},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(t){delete this.map[t]},e.prototype.size=function(){return Object.keys(this.map).length},e}(),i0e=null;class S2{constructor(t){this.options=k4({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=k4({},this.options,t),this.rescale(t)}rescale(t){}}function Yw(e,t){return t-e?n=>(n-e)/(t-e):n=>.5}function vb(e,...t){return t.reduce((n,r)=>i=>n(r(i)),e)}function yM(e,t,n,r,i){let s=n||0,l=r||e.length;const c=i||(h=>h);for(;s<l;){const h=Math.floor((s+l)/2);c(e[h])>t?l=h:s=h+1}return s}var KV=D(19818),QV=D.n(KV);function _M(e,t,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function JV(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100,i=e[3];if(n===0)return[r*255,r*255,r*255,i];const s=r<.5?r*(1+n):r+n-r*n,l=2*r-s,c=_M(l,s,t+1/3),h=_M(l,s,t),p=_M(l,s,t-1/3);return[c*255,h*255,p*255,i]}function H4(e){const t=QV().get(e);if(!t)return null;const{model:n,value:r}=t;return n==="rgb"?r:n==="hsl"?JV(r):null}const mb=(e,t)=>n=>e*(1-n)+t*n,eH=(e,t)=>{const n=H4(e),r=H4(t);return n===null||r===null?n?()=>e:()=>t:i=>{const s=new Array(4);for(let v=0;v<4;v+=1){const y=n[v],b=r[v];s[v]=y*(1-i)+b*i}const[l,c,h,p]=s;return`rgba(${Math.round(l)}, ${Math.round(c)}, ${Math.round(h)}, ${p})`}},w2=(e,t)=>typeof e=="number"&&typeof t=="number"?mb(e,t):typeof e=="string"&&typeof t=="string"?eH(e,t):()=>e,tH=(e,t)=>{const n=mb(e,t);return r=>Math.round(n(r))};function $w(e){return!jV(e)&&!kV(e)&&!Number.isNaN(e)}const bM=Math.sqrt(50),xM=Math.sqrt(10),EM=Math.sqrt(2);function qw(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Ef(10,i);return i>=0?(s>=bM?10:s>=xM?5:s>=EM?2:1)*Ef(10,i):-Ef(10,-i)/(s>=bM?10:s>=xM?5:s>=EM?2:1)}function W4(e,t,n){const r=Math.abs(t-e)/Math.max(0,n);let i=Ef(10,Math.floor(Math.log(r)/Math.LN10));const s=r/i;return s>=bM?i*=10:s>=xM?i*=5:s>=EM&&(i*=2),t<e?-i:i}const G4=(e,t,n=5)=>{const r=[e,t];let i=0,s=r.length-1,l=r[i],c=r[s],h;return c<l&&([l,c]=[c,l],[i,s]=[s,i]),h=qw(l,c,n),h>0?(l=Math.floor(l/h)*h,c=Math.ceil(c/h)*h,h=qw(l,c,n)):h<0&&(l=Math.ceil(l*h)/h,c=Math.floor(c*h)/h,h=qw(l,c,n)),h>0?(r[i]=Math.floor(l/h)*h,r[s]=Math.ceil(c/h)*h):h<0&&(r[i]=Math.ceil(l*h)/h,r[s]=Math.floor(c*h)/h),r};function nH(e,t){const n=t<e?t:e,r=e>t?e:t;return i=>Math.min(Math.max(n,i),r)}const rH=(e,t,n)=>{const[r,i]=e,[s,l]=t;let c,h;return r<i?(c=Yw(r,i),h=n(s,l)):(c=Yw(i,r),h=n(l,s)),vb(h,c)},iH=(e,t,n)=>{const r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=e[0]>e[r],c=l?[...e].reverse():e,h=l?[...t].reverse():t;for(let p=0;p<r;p+=1)i[p]=Yw(c[p],c[p+1]),s[p]=n(h[p],h[p+1]);return p=>{const v=yM(e,p,1,r)-1,y=i[v],b=s[v];return vb(b,y)(p)}},Z4=(e,t,n,r)=>(Math.min(e.length,t.length)>2?iH:rH)(e,t,r?tH:n);class Kw extends S2{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:mb,tickCount:5}}map(t){return $w(t)?this.output(t):this.options.unknown}invert(t){return $w(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,n,r,...i)}getTicks(){const{tickMethod:t}=this.options,[n,r,i,...s]=this.getTickMethodOptions();return t(n,r,i,...s)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}chooseNice(){return G4}rescale(){this.nice();const[t,n]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}chooseClamp(t){const{clamp:n,range:r}=this.options,i=this.options.domain.map(t),s=Math.min(i.length,r.length);return n?nH(i[0],i[s-1]):k_}composeOutput(t,n){const{domain:r,range:i,round:s,interpolate:l}=this.options,c=Z4(r.map(t),i,l,s);this.output=vb(c,n,t)}composeInput(t,n,r){const{domain:i,range:s}=this.options,l=Z4(s,i.map(t),mb);this.input=vb(n,r,l)}}const z_=(e,t,n)=>{let r,i,s=e,l=t;if(s===l&&n>0)return[s];let c=qw(s,l,n);if(c===0||!Number.isFinite(c))return[];if(c>0){s=Math.ceil(s/c),l=Math.floor(l/c),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)*c}else{c=-c,s=Math.ceil(s*c),l=Math.floor(l*c),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)/c}return i};class vd extends Kw{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:w2,tickMethod:z_,tickCount:5}}chooseTransforms(){return[k_,k_]}clone(){return new vd(this.options)}}function oH(e,t){if(e){var n;if(Hr(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(za(e)){for(var s in e)if(e.hasOwnProperty(s)&&(n=t(e[s],s),n===!1))break}}}var SM=oH,aH=function(e,t,n){if(!Hr(e)&&!vv(e))return e;var r=n;return SM(e,function(i,s){r=t(r,i,s)}),r},X4=aH,wM=function(e,t){return X4(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})};function cg(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}function Y4(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,s=0;s<e.length;s++){var l=e[s],c=l.x,h=l.y,p=l.width,v=l.height,y=(0,ie.CR)([c+p,h+v],2),b=y[0],T=y[1];c<t&&(t=c),h<n&&(n=h),b>r&&(r=b),T>i&&(i=T)}return new Ku(t,n,r-t,i-n)}var sH=function(e,t,n){var r=e.width,i=e.height,s=n.flexDirection,l=s===void 0?"row":s,c=n.flexWrap,h=c===void 0?"nowrap":c,p=n.justifyContent,v=p===void 0?"flex-start":p,y=n.alignContent,b=y===void 0?"flex-start":y,T=n.alignItems,M=T===void 0?"flex-start":T,R=l==="row",L=l==="row"||l==="column",N=R?L?[1,0]:[-1,0]:L?[0,1]:[0,-1],z=(0,ie.CR)([0,0],2),H=z[0],X=z[1],Y=t.map(function(Qe){var lt,ht=Qe.width,bt=Qe.height,Ht=(0,ie.CR)([H,X],2),Ot=Ht[0],kt=Ht[1];return lt=(0,ie.CR)([H+ht*N[0],X+bt*N[1]],2),H=lt[0],X=lt[1],new Ku(Ot,kt,ht,bt)}),ne=Y4(Y),ve={"flex-start":0,"flex-end":R?r-ne.width:i-ne.height,center:R?(r-ne.width)/2:(i-ne.height)/2},Ee=Y.map(function(Qe){var lt=Qe.x,ht=Qe.y,bt=Ku.fromRect(Qe);return bt.x=R?lt+ve[v]:lt,bt.y=R?ht:ht+ve[v],bt}),Ie=Y4(Ee),Ye=function(Qe){var lt=(0,ie.CR)(R?["height",i]:["width",r],2),ht=lt[0],bt=lt[1];switch(M){case"flex-start":return 0;case"flex-end":return bt-Qe[ht];case"center":return bt/2-Qe[ht]/2;default:return 0}},$e=Ee.map(function(Qe){var lt=Qe.x,ht=Qe.y,bt=Ku.fromRect(Qe);return bt.x=R?lt:lt+Ye(bt),bt.y=R?ht+Ye(bt):ht,bt}),St=$e.map(function(Qe){var lt,ht,bt=Ku.fromRect(Qe);return bt.x+=(lt=e.x)!==null&&lt!==void 0?lt:0,bt.y+=(ht=e.y)!==null&&ht!==void 0?ht:0,bt});return St},lH=function(e,t,n){return[]},uH=function(e,t,n){if(t.length===0)return[];var r={flex:sH,grid:lH},i=n.display in r?r[n.display]:null;return(i==null?void 0:i.call(null,e,t,n))||[]},cH=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n)||this;r.layoutEvents=[Ga.BOUNDS_CHANGED,Ga.INSERTED,Ga.REMOVED],r.$margin=Wh(0),r.$padding=Wh(0);var i=n.style||{},s=i.margin,l=s===void 0?0:s,c=i.padding,h=c===void 0?0:c;return r.margin=l,r.padding=h,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(t.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=Wh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=Wh(n)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,s=n.y,l=s===void 0?0:s,c=n.width,h=n.height,p=(0,ie.CR)(this.$margin,4),v=p[0],y=p[1],b=p[2],T=p[3];return new Ku(i-T,l-v,c+T+y,h+v+b)},t.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,e.prototype.appendChild.call(this,n,r),n},t.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,s=(0,ie.CR)(this.$padding,4),l=s[0],c=s[1],h=s[2],p=s[3],v=(0,ie.CR)(this.$margin,4),y=v[0],b=v[3];return new Ku(p+b,l+y,r-p-c,i-l-h)},t.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(r){return!r.isConnected}))try{var n=uH(this.getAvailableSpace(),this.children.map(function(r){return r.getBBox()}),this.attributes);this.children.forEach(function(r,i){var s=n[i],l=s.x,c=s.y;r.attr({x:l,y:c})})}catch(r){}},t.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target.isMutationObserved=!0,n.layout()})})},t.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},t}($l),fH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function hH(e){return class extends Du{constructor(t){super(t),this.descriptor=e}connectedCallback(){var t,n;(n=(t=this.descriptor).render)===null||n===void 0||n.call(t,this.attributes,this)}update(t={}){var n,r;this.attr(ui({},this.attributes,t)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function $4(e,t,n){return e.querySelector(t)?Ua(e).select(t):Ua(e).append(n)}function Qw(e){return Array.isArray(e)?e.join(", "):`${e||""}`}function q4(e,t){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:s}=n;const l={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return e in l&&([r,i,s]=l[e]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:s},t)}class K4 extends cH{get child(){var t;return(t=this.children)===null||t===void 0?void 0:t[0]}update(t){var n;this.attr(t);const{subOptions:r}=t;(n=this.child)===null||n===void 0||n.update(r)}}class dH extends K4{update(t){var n;const{subOptions:r}=t;this.attr(t),(n=this.child)===null||n===void 0||n.update(r)}}function rm(e,t){var n;return(n=e.filter(r=>r.getOptions().name===t))===null||n===void 0?void 0:n[0]}function pH(e){return e==="horizontal"||e===0}function vH(e){return e==="vertical"||e===-Math.PI/2}function Q4(e,t,n){const{bbox:r}=e,{position:i="top",size:s,length:l}=t,c=["top","bottom","center"].includes(i),[h,p]=c?[r.height,r.width]:[r.width,r.height],{defaultSize:v,defaultLength:y}=n.props,b=s||v||h,T=l||y||p,M=c?"horizontal":"vertical",[R,L]=c?[T,b]:[b,T];return{orientation:M,width:R,height:L,size:b,length:T}}function mH(e){return e.find(t=>t.getOptions().domain.length>0).getOptions().domain}function Jw(e){const t=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=e,r=fH(e,["style"]),i={};return Object.entries(r).forEach(([s,l])=>{t.includes(s)?i[`show${Jv(s)}`]=l:i[s]=l}),Object.assign(Object.assign({},i),n)}var J4=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function eL(e,t){const{eulerAngles:n,origin:r}=t;r&&e.setOrigin(r),n&&e.rotate(n[0],n[1],n[2])}function tL(e){const{innerWidth:t,innerHeight:n,depth:r}=e.getOptions();return[t,n,r]}function gH(e,t){const{width:n,height:r}=t.getOptions();return i=>{if(!Lw(t))return i;const s=e==="bottom"?[i,1]:[0,i],l=t.map(s);if(e==="bottom"){const c=l[0];return new vd({domain:[0,n],range:[0,1]}).map(c)}else if(e==="left"){const c=l[1];return new vd({domain:[0,r],range:[0,1]}).map(c)}return i}}function yH(e,t,n){if(e.getTicks)return e.getTicks();if(!n)return t;const[r,i]=cg(t,l=>+l),{tickCount:s}=e.getOptions();return n(r,i,s)}function _H(e,t){if(Bl(t))return T=>T;const n=t.getOptions(),{innerWidth:r,innerHeight:i,insetTop:s,insetBottom:l,insetLeft:c,insetRight:h}=n,[p,v,y]=e==="left"||e==="right"?[s,l,i]:[c,h,r],b=new vd({domain:[0,1],range:[p/y,1-v/y]});return T=>b.map(T)}function nL(e,t,n,r,i,s,l,c){var h;(n!==void 0||s!==void 0)&&e.update(Object.assign(Object.assign({},n&&{tickCount:n}),s&&{tickMethod:s}));const p=yH(e,t,s),v=i?p.filter(i):p,y=N=>N instanceof Date?String(N):typeof N=="object"&&N?N:String(N),b=r||((h=e.getFormatter)===null||h===void 0?void 0:h.call(e))||y,T=_H(l,c),M=gH(l,c),R=N=>["top","bottom","center","outer"].includes(N),L=N=>["left","right"].includes(N);return Bl(c)||Cu(c)?v.map((N,z,H)=>{var X,Y;const ne=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,ve=T(e.map(N)+ne);return{value:D_(c)&&l==="center"||Cu(c)&&((Y=e.getTicks)===null||Y===void 0?void 0:Y.call(e))&&R(l)||Cu(c)&&L(l)?1-ve:ve,label:y(b(fb(N),z,H)),id:String(z)}}):v.map((N,z,H)=>{var X;const Y=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,ne=M(T(e.map(N)+Y));return{value:L(l)?1-ne:ne,label:y(b(fb(N),z,H)),id:String(z)}})}function bH(e,t,n="xy"){const[r,i,s]=tL(t);return n==="xy"?e.includes("bottom")||e.includes("top")?i:r:n==="xz"?e.includes("bottom")||e.includes("top")?s:r:e.includes("bottom")||e.includes("top")?i:s}function xH(e=[],t){if(e.length>0)return e;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:s}=t,l=[],c=(h,p)=>{p&&l.push(Object.assign(Object.assign({},h),p))};return c({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),c({type:"ellipsis",minLength:20},i),c({type:"hide"},r),c({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},s),l}function EH(e,t,n,r,i){const{x:s,y:l,width:c,height:h}=t,p=[s+c/2,l+h/2],v=Math.min(c,h)/2,[y,b]=ag(i),[T,M]=tL(i),R=Math.min(T,M)/2,L={center:p,radius:v,startAngle:y,endAngle:b,gridLength:(r-n)*R};if(e==="inner"){const{insetLeft:N,insetTop:z}=i.getOptions();return Object.assign(Object.assign({},L),{center:[p[0]-N,p[1]-z],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},L),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function SH(e,t,n){return Nw(t)||N_(t)?!1:e===void 0?!!n.getTicks:e}function wH(e){const{depth:t}=e.getOptions();return t?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function TH(e,t,n,r,i){const{x:s,y:l,width:c,height:h}=n;if(e==="bottom")return{startPos:[s,l],endPos:[s+c,l]};if(e==="left")return{startPos:[s+c,l+h],endPos:[s+c,l]};if(e==="right")return{startPos:[s,l+h],endPos:[s,l]};if(e==="top")return{startPos:[s,l+h],endPos:[s+c,l+h]};if(e==="center"){if(t==="vertical")return{startPos:[s,l],endPos:[s,l+h]};if(t==="horizontal")return{startPos:[s,l],endPos:[s+c,l]};if(typeof t=="number"){const[p,v]=r.getCenter(),[y,b]=hb(r),[T,M]=ag(r),R=Math.min(c,h)/2,{insetLeft:L,insetTop:N}=r.getOptions(),z=y*R,H=b*R,[X,Y]=[p+s-L,v+l-N],[ne,ve]=[Math.cos(t),Math.sin(t)],Ee=[X+H*ne,Y+H*ve],Ie=[X+z*ne,Y+z*ve],Ye=()=>{const{domain:St}=i.getOptions();return St.length},$e=Bl(r)&&i?Ye():3;return{startPos:Ee,endPos:Ie,gridClosed:Math.abs(M-T-360)<1e-6,gridCenter:[X,Y],gridControlAngles:new Array($e).fill(0).map((St,Qe,lt)=>(M-T)/$e*Qe)}}}return{}}const AH=e=>{const{order:t,size:n,position:r,orientation:i,labelFormatter:s,tickFilter:l,tickCount:c,tickMethod:h,important:p={},style:v={},indexBBox:y,title:b,grid:T=!1}=e,M=J4(e,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[R],value:L,coordinate:N,theme:z})=>{const{bbox:H}=L,{domain:X}=R.getOptions(),Y=nL(R,X,c,s,l,h,r,N),ne=y?Y.map((Qe,lt)=>{const ht=y.get(lt);return!ht||ht[0]!==Qe.label?Qe:Object.assign(Object.assign({},Qe),{bbox:ht[1]})}):Y,[ve,Ee]=hb(N),Ie=EH(r,H,ve,Ee,N),{axis:Ye,axisArc:$e={}}=z,St=Jw(ui({},Ye,$e,Ie,Object.assign(Object.assign({type:"arc",data:ne,titleText:Qw(b),grid:T},M),p)));return new mM({style:wM(St,["transform"])})}};function CH(e,t,n,r,i,s){const l=n.axis,c=["top","right","bottom","left"].includes(i)?n[`axis${h2(i)}`]:n.axisLinear,h=e.getOptions().name,p=n[`axis${Jv(h)}`]||{};return Object.assign({},l,c,p)}function OH(e,t,n,r,i,s){const l=CH(e,t,n,r,i,s);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},l),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:vH(s)?10:0,tick:r==="center"?!1:void 0}):l}const MH=e=>{const{direction:t="left",important:n={},labelFormatter:r,order:i,orientation:s,actualPosition:l,position:c,size:h,style:p={},title:v,tickCount:y,tickFilter:b,tickMethod:T,transform:M,indexBBox:R}=e,L=J4(e,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:N,value:z,coordinate:H,theme:X})=>{const{bbox:Y}=z,[ne]=N,{domain:ve,xScale:Ee}=ne.getOptions(),Ie=OH(ne,H,X,t,c,s),Ye=Object.assign(Object.assign(Object.assign({},Ie),p),L),$e=bH(l||c,H,e.plane),St=TH(c,s,Y,H,Ee),Qe=wH(H),lt=nL(ne,ve,y,r,b,T,c,H),ht=R?lt.map((Ot,kt)=>{const Mn=R.get(kt);return!Mn||Mn[0]!==Ot.label?Ot:Object.assign(Object.assign({},Ot),{bbox:Mn[1]})}):lt,bt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ye),{type:"linear",data:ht,crossSize:h,titleText:Qw(v),labelOverlap:xH(M,Ye),grid:SH(Ye.grid,H,ne),gridLength:$e,line:!0,indexBBox:R}),Ye.line?null:{lineOpacity:0}),St),Qe),n);return bt.labelOverlap.find(Ot=>Ot.type==="hide")&&(bt.crossSize=!1),new mM({className:"axis",style:Jw(bt)})}},rL=e=>t=>{const{labelFormatter:n,labelFilter:r=()=>!0}=t;return i=>{var s;const{scales:[l]}=i,c=((s=l.getTicks)===null||s===void 0?void 0:s.call(l))||l.getOptions().domain,h=typeof n=="string"?em(n):n,p=(y,b,T)=>r(c[b],b,c),v=Object.assign(Object.assign({},t),{labelFormatter:h,labelFilter:p,scale:l});return e(v)(i)}},hy=rL(MH),iL=rL(AH);hy.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},iL.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var RH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function PH(e){const t=e%(Math.PI*2);return t===Math.PI/2?{titleTransform:"translate(0, 50%)"}:t>-Math.PI/2&&t<Math.PI/2?{titleTransform:"translate(50%, 0)"}:t>Math.PI/2&&t<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function IH(e,t,n,r){const{radar:i}=e,[s]=r,l=s.getOptions().name,[c,h]=ag(n),{axisRadar:p={}}=t;return Object.assign(Object.assign({},p),{grid:l==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((v,y)=>(h-c)/i.count*y)})}const oL=e=>{const{important:t={}}=e,n=RH(e,["important"]);return r=>{const{theme:i,coordinate:s,scales:l}=r;return hy(Object.assign(Object.assign(Object.assign({},n),PH(e.orientation)),{important:Object.assign(Object.assign({},IH(e,i,s,l)),t)}))(r)}};oL.props=Object.assign(Object.assign({},hy.props),{defaultPosition:"center"});function eT(e,t){return+e.toPrecision(t)}function o0e(e){return e.toLocaleString()}function a0e(e){return e.toExponential()}function s0e(e,t){return t===void 0&&(t=0),Math.abs(e)<1e3?String(e):"".concat(eT(e/1e3,t).toLocaleString(),"K")}var l0e=function(e,t,n){return e<0&&Number.isFinite(e)?t:n},u0e=function(e,t,n){return e>0&&Number.isFinite(e)?t:n},c0e=function(e,t){return e*t},f0e=function(e,t){return e/2+(t||0)/2};function tT(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t){var s=t.x,l=t.y;return[s,l]}if(n){var c=n[0],h=c.clientX,p=c.clientY;return[h,p]}return r&&i?[r,i]:[0,0]}var LH={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(e){return e.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},TM=Ia({background:"background",labelGroup:"label-group",label:"label"},"indicator"),DH=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,LH)||this;return r.point=[0,0],r.group=r.appendChild(new $l({})),r.isMutationObserved=!0,r}return t.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,s=(0,ie.CR)(Wh(i),4),l=s[0],c=s[1],h=s[2],p=s[3],v=this.label.node().getLocalBounds(),y=v.min,b=v.max,T=new Ku(y[0]-p,y[1]-l,b[0]+c-y[0]+p,b[1]+h-y[1]+l),M=this.getPath(r,T),R=Va(this.attributes,"background");this.background=Eo(this.group).maybeAppendByClassName(TM.background,"path").styles((0,ie.pi)((0,ie.pi)({},R),{path:M})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,s=Va(this.attributes,"label"),l=(0,ie.CR)(Vh(s),2),c=l[0],h=l[1],p=c.text,v=(0,ie._T)(c,["text"]);if(this.label=Eo(this.group).maybeAppendByClassName(TM.labelGroup,"g").styles(h),!!i){var y=this.label.maybeAppendByClassName(TM.label,function(){return B_(r(i))}).style("text",r(i).toString());y.selectAll("text").styles(v)}},t.prototype.adjustLayout=function(){var n=(0,ie.CR)(this.point,2),r=n[0],i=n[1];this.group.attr("x",-r).attr("y",-i)},t.prototype.getPath=function(n,r){var i=this.attributes.radius,s=r.x,l=r.y,c=r.width,h=r.height,p=[["M",s+i,l],["L",s+c-i,l],["A",i,i,0,0,1,s+c,l+i],["L",s+c,l+h-i],["A",i,i,0,0,1,s+c-i,l+h],["L",s+i,l+h],["A",i,i,0,0,1,s,l+h-i],["L",s,l+i],["A",i,i,0,0,1,s+i,l],["Z"]],v={top:4,right:6,bottom:0,left:2},y=v[n],b=this.createCorner([p[y].slice(-2),p[y+1].slice(-2)]);return p.splice.apply(p,(0,ie.ev)([y+1,1],(0,ie.CR)(b),!1)),p[0][0]="M",p},t.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,s=Wj.apply(void 0,(0,ie.ev)([],(0,ie.CR)(n),!1)),l=(0,ie.CR)(n,2),c=(0,ie.CR)(l[0],2),h=c[0],p=c[1],v=(0,ie.CR)(l[1],2),y=v[0],b=v[1],T=(0,ie.CR)(s?[y-h,[h,y]]:[b-p,[p,b]],2),M=T[0],R=(0,ie.CR)(T[1],2),L=R[0],N=R[1],z=M/2,H=M/Math.abs(M),X=r*H,Y=X/2,ne=X*Math.sqrt(3)/2*i,ve=(0,ie.CR)([L,L+z-Y,L+z,L+z+Y,N],5),Ee=ve[0],Ie=ve[1],Ye=ve[2],$e=ve[3],St=ve[4];return s?(this.point=[Ye,p-ne],[["L",Ee,p],["L",Ie,p],["L",Ye,p-ne],["L",$e,p],["L",St,p]]):(this.point=[h+ne,Ye],[["L",h,Ee],["L",h,Ie],["L",h+ne,Ye],["L",h,$e],["L",h,St]])},t.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?o(this):a(this)},t.prototype.bindEvents=function(){this.label.on(Ga.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(Vr),aL={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},sL={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},lL={orientation:"horizontal",showLabel:!0,type:"start"},im=Ia({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),dy=Ia({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),NH=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.size,s=i===void 0?10:i,l=n.radius,c=l===void 0?s/4:l,h=n.orientation,p=(0,ie._T)(n,["size","radius","orientation"]),v=s,y=v*2.4,b=Eo(r).maybeAppendByClassName(dy.iconRect,"rect").styles((0,ie.pi)((0,ie.pi)({},p),{width:v,height:y,radius:c,x:-v/2,y:-y/2})),T=1/3*v,M=2/3*v,R=1/4*y,L=3/4*y;b.maybeAppendByClassName("".concat(dy.iconLine,"-1"),"line").styles((0,ie.pi)({x1:T,x2:T,y1:R,y2:L},p)),b.maybeAppendByClassName("".concat(dy.iconLine,"-2"),"line").styles((0,ie.pi)({x1:M,x2:M,y1:R,y2:L},p)),b.node().setOrigin(v/2,y/2),h==="vertical"?r.setLocalEulerAngles(90):r.setLocalEulerAngles(0)},t}(Vr),uL=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,lL)||this}return t.prototype.renderLabel=function(n){var r=this,i=this.attributes.showLabel,s=Va(this.attributes,"label"),l=s.transform,c=(0,ie._T)(s,["transform"]),h=(0,ie.CR)(Vh(c,[]),2),p=h[0],v=h[1],y=Eo(n).maybeAppendByClassName(dy.labelGroup,"g").styles(v),b=(0,ie.pi)((0,ie.pi)({},sL),p),T=b.text,M=(0,ie._T)(b,["text"]);ci(!!i,y,function(R){r.label=R.maybeAppendByClassName(dy.label,"text").styles((0,ie.pi)((0,ie.pi)({},M),{transform:l,text:"".concat(T)})),r.label.on("mousedown",function(L){L.stopPropagation()}),r.label.on("touchstart",function(L){L.stopPropagation()})})},t.prototype.renderIcon=function(n){var r=this.attributes,i=r.orientation,s=r.type,l=(0,ie.pi)((0,ie.pi)({orientation:i},aL),Va(this.attributes,"icon")),c=this.attributes.iconShape,h=c===void 0?function(){return new NH({style:l})}:c,p=Eo(n).maybeAppendByClassName(dy.iconGroup,"g");p.selectAll(dy.icon.class).data([h]).join(function(v){return v.append(typeof h=="string"?h:function(){return h(s)}).attr("className",dy.icon.name)},function(v){return v.update(l)},function(v){return v.remove()})},t.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},t}(Vr),cL=function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]]},FH=cL,BH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},kH=function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},zH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},UH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]},jH=function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},VH=function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},fL=function(e,t,n){return[["M",e,t+n],["L",e,t-n]]},HH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},WH=function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},GH=function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},ZH=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},hL=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},XH=hL,YH=function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},$H=function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},qH=function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},KH=function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]};function QH(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}var JH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t],["L",e-n,t+n],["Z"]]};function eW(e){var t="default";if(za(e)&&e instanceof Image)t="image";else if(wc(e))t="symbol";else if(Gl(e)){var n=new RegExp("data:(image|text)");e.match(n)?t="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?t="url":t="symbol"}return t}function tW(e){var t=eW(e);return["base64","url","image"].includes(t)?"image":e&&t==="symbol"?"path":null}var kl=function(e){(0,ie.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=this.getSubShapeStyle(n),s=i.symbol,l=i.size,c=l===void 0?16:l,h=(0,ie._T)(i,["symbol","size"]),p=tW(s);ci(!!p,Eo(r),function(v){v.maybeAppendByClassName("marker",p).attr("className","marker ".concat(p,"-marker")).call(function(y){if(p==="image"){var b=c*2;y.styles({img:s,width:b,height:b,x:-c,y:-c})}else{var b=c/2,T=wc(s)?s:t.getSymbol(s);y.styles((0,ie.pi)({path:T==null?void 0:T(0,0,b)},h))}})})},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(n,r){t.MARKER_SYMBOL_MAP.set(n,r)},t.getSymbol=function(n){return t.MARKER_SYMBOL_MAP.get(n)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(Vr);kl.registerSymbol("cross",HH),kl.registerSymbol("hyphen",ZH),kl.registerSymbol("line",fL),kl.registerSymbol("plus",GH),kl.registerSymbol("tick",WH),kl.registerSymbol("circle",cL),kl.registerSymbol("point",FH),kl.registerSymbol("bowtie",VH),kl.registerSymbol("hexagon",jH),kl.registerSymbol("square",BH),kl.registerSymbol("diamond",kH),kl.registerSymbol("triangle",zH),kl.registerSymbol("triangle-down",UH),kl.registerSymbol("line",fL),kl.registerSymbol("dot",hL),kl.registerSymbol("dash",XH),kl.registerSymbol("smooth",YH),kl.registerSymbol("hv",$H),kl.registerSymbol("vh",qH),kl.registerSymbol("hvh",KH),kl.registerSymbol("vhv",QH);function nW(e,t,n){var r=Math.round((e-n)/t);return n+r*t}function rW(e,t,n){var r=1.4,i=r*n;return[["M",e-n,t-i],["L",e+n,t-i],["L",e+n,t+i],["L",e-n,t+i],["Z"]]}var dL=1.4,pL=.4;function iW(e,t,n){var r=n,i=r*dL,s=r/2,l=r/6,c=e+i*pL;return[["M",e,t],["L",c,t+s],["L",e+i,t+s],["L",e+i,t-s],["L",c,t-s],["Z"],["M",c,t+l],["L",e+i-2,t+l],["M",c,t-l],["L",e+i-2,t-l]]}function oW(e,t,n){var r=n,i=r*dL,s=r/2,l=r/6,c=t+i*pL;return[["M",e,t],["L",e-s,c],["L",e-s,t+i],["L",e+s,t+i],["L",e+s,c],["Z"],["M",e-l,c],["L",e-l,t+i-2],["M",e+l,c],["L",e+l,t+i-2]]}kl.registerSymbol("hiddenHandle",rW),kl.registerSymbol("verticalHandle",iW),kl.registerSymbol("horizontalHandle",oW);var h0e=function(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n};function aW(e,t,n,r){var i;r===void 0&&(r=4);var s=(0,ie.CR)(e,2),l=s[0],c=s[1],h=(0,ie.CR)(t,2),p=h[0],v=h[1],y=(0,ie.CR)(n,2),b=y[0],T=y[1],M=(0,ie.CR)([p,v],2),R=M[0],L=M[1],N=L-R;return R>L&&(i=(0,ie.CR)([L,R],2),R=i[0],L=i[1]),N>c-l?[l,c]:R<l?b===l&&T===L?[l,L]:[l,N+l]:L>c?T===c&&b===R?[R,c]:[c-N,c]:[R,L]}function om(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n}var T2=Ia({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),vL={showLabel:!0,formatter:function(e){return e.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},sW=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,vL)||this}return t.prototype.render=function(n,r){var i=Eo(r).maybeAppendByClassName(T2.markerGroup,"g");this.renderMarker(i);var s=Eo(r).maybeAppendByClassName(T2.labelGroup,"g");this.renderLabel(s)},t.prototype.renderMarker=function(n){var r=this,i=this.attributes,s=i.orientation,l=i.markerSymbol,c=l===void 0?om(s,"horizontalHandle","verticalHandle"):l;ci(!!c,n,function(h){var p=Va(r.attributes,"marker"),v=(0,ie.pi)({symbol:c},p);r.marker=h.maybeAppendByClassName(T2.marker,function(){return new kl({style:v})}).update(v)})},t.prototype.renderLabel=function(n){var r=this,i=this.attributes,s=i.showLabel,l=i.orientation,c=i.spacing,h=c===void 0?0:c,p=i.formatter;ci(s,n,function(v){var y,b=Va(r.attributes,"label"),T=b.text,M=(0,ie._T)(b,["text"]),R=((y=v.select(T2.marker.class))===null||y===void 0?void 0:y.node().getBBox())||{},L=R.width,N=L===void 0?0:L,z=R.height,H=z===void 0?0:z,X=(0,ie.CR)(om(l,[0,H+h,"center","top"],[N+h,0,"start","middle"]),4),Y=X[0],ne=X[1],ve=X[2],Ee=X[3];v.maybeAppendByClassName(T2.label,"text").styles((0,ie.pi)((0,ie.pi)({},M),{x:Y,y:ne,text:p(T).toString(),textAlign:ve,textBaseline:Ee}))})},t}(Vr),mL={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},lW=Jt({},mL,{}),uW=Jt({},mL,Tc(vL,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),cW=.01,d0e=.5,mh=Ia({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function fW(e,t){for(var n=1;n<e.length;n+=1){var r=e[n-1],i=e[n];if(t>=r&&t<=i)return[r,i]}return[t,t]}function hW(e,t,n){var r=Array.from(t),i=e.length;return new Array(i).fill(0).reduce(function(s,l,c){var h=r[c%r.length];return s+=" ".concat(e[c],":").concat(h).concat(c<i-1?" ".concat(e[c+1],":").concat(h):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function gL(e,t){var n=(0,ie.CR)(fW(e,t),2),r=n[0],i=n[1];return{tick:t>(r+i)/2?i:r,range:[r,i]}}var A2=Ia({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function yL(e){var t=e.orientation,n=e.size,r=e.length;return om(t,[r,n],[n,r])}function _L(e){var t=e.type,n=(0,ie.CR)(yL(e),2),r=n[0],i=n[1];return t==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function dW(e){return _L(e)}function pW(e){var t=e.orientation,n=e.color,r=e.block,i=e.partition,s;if(wc(n)){var l=20;s=new Array(l).fill(0).map(function(p,v,y){return n(v/(y.length-1))})}else s=n;var c=s.length,h=s.map(function(p){return uv(p).toString()});return c?c===1?h[0]:r?hW(i,h,t):h.reduce(function(p,v,y){return p+=" ".concat(y/(c-1),":").concat(v)},"l(".concat(om(t,"0","270"),")")):""}function vW(e){var t=e.orientation,n=e.range;if(!n)return[];var r=(0,ie.CR)(yL(e),2),i=r[0],s=r[1],l=(0,ie.CR)(n,2),c=l[0],h=l[1],p=om(t,c*i,0),v=om(t,0,c*s),y=om(t,h*i,i),b=om(t,s,h*s);return[["M",p,v],["L",p,b],["L",y,b],["L",y,v],["Z"]]}function mW(e,t){var n=Va(t,"track");e.maybeAppendByClassName(A2.track,"path").styles((0,ie.pi)({path:_L(t)},n))}function gW(e,t){var n=Va(t,"selection"),r=pW(t),i=e.maybeAppendByClassName(A2.selection,"path").styles((0,ie.pi)({path:dW(t),fill:r},n)),s=i.maybeAppendByClassName(A2.clipPath,"path").styles({path:vW(t)}).node();i.style("clip-path",s)}var yW=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return t.prototype.render=function(n,r){var i=Eo(r).maybeAppendByClassName(A2.trackGroup,"g");mW(i,n);var s=Eo(r).maybeAppendByClassName(A2.selectionGroup,"g");gW(s,n)},t}(Vr);function _W(e){return{min:Math.min.apply(Math,(0,ie.ev)([],(0,ie.CR)(e.map(function(t){return t.value})),!1)),max:Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(e.map(function(t){return t.value})),!1))}}var bW=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,uW)||this;return r.eventToOffsetScale=new vd({}),r.innerRibbonScale=new vd({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var s=r.attributes,l=s.data,c=s.block;i.stopPropagation();var h=r.getValueByCanvasPoint(i);if(c){var p=gL(l.map(function(y){var b=y.value;return b}),h).range;r.showIndicator((p[0]+p[1])/2,"".concat(p[0],"-").concat(p[1])),r.dispatchIndicated(h,p)}else{var v=r.getTickValue(h);r.showIndicator(v),r.dispatchIndicated(v)}},r.onDragStart=function(i){return function(s){s.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(s)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var s=r.target;r.updateMouse();var l=(0,ie.CR)(r.selection,2),c=l[0],h=l[1],p=r.getTickValue(r.getValueByCanvasPoint(i)),v=p-r.prevValue;s==="start"?c!==p&&r.updateSelection(p,h):s==="end"?h!==p&&r.updateSelection(c,p):s==="ribbon"&&v!==0&&(r.prevValue=p,r.updateSelection(v,v,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(t.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new Ku(0,0,r,i)},t.prototype.render=function(n,r){var i=this,s=n.showLabel;this.renderTitle(Eo(r));var l=this.availableSpace,c=l.x,h=l.y,p=Eo(r).maybeAppendByClassName(mh.contentGroup,"g").styles({x:c,y:h}),v=p.maybeAppendByClassName(mh.labelGroup,"g").styles({zIndex:1});ci(!!s,v,function(b){i.renderLabel(b)});var y=p.maybeAppendByClassName(mh.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=p.maybeAppendByClassName(mh.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(y),this.renderIndicator(p),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(t.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:_W(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonRange",{get:function(){var n=(0,ie.CR)(this.selection,2),r=n[0],i=n[1],s=this.ribbonScale;return[s.map(r),s.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,s=this.attributes.defaultValue,l=s===void 0?[r,i]:s,c=(0,ie.CR)(l,2),h=c[0],p=c[1];return[h,p]},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){return om(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},t.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,s=r.titleText,l=r.width,c=r.height,h=Va(this.attributes,"title"),p=(0,ie.pi)((0,ie.pi)({},h),{width:l,height:c,text:s}),v=this;n.selectAll(mh.title.class).data(i?[s]:[]).join(function(y){return y.append(function(){return new O4({style:p})}).attr("className",mh.title.name).each(function(){v.title=this})},function(y){return y.update(p)},function(y){return y.each(function(){v.title=void 0}).remove()})},Object.defineProperty(t.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new Ku(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,s={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return s[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Ku(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(ms.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),s=i.width,l=i.height;return this.cacheLabelBBox=new Ku(0,0,s,l),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,s=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var l=this.labelBBox,c=l.width,h=l.height,p=this.ifHorizontal(h,c)+s+this.labelFixedSpacing,v=this.ifHorizontal(c,h);return{width:c,height:h,size:p,length:v}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,s=this.availableSpace,l=s.width,c=s.height,h=this.labelShape,p=h.size,v=h.length,y=(0,ie.CR)(this.ifHorizontal([c,l],[l,c]),2),b=y[0],T=y[1],M=r?this.handleShape:{size:0,length:0},R=M.size,L=M.length,N=this.handleOffsetRatio,z=0,H=this.labelPosition;i?z=i:["bottom","right"].includes(H)?z=Math.min(b-p,(b-R)/N):b*(1-N)>R?z=Math.max(b-p,0):z=Math.max((b-p-R)/N,0);var X=Math.max(L,v),Y=T-X,ne=(0,ie.CR)(this.ifHorizontal([Y,z],[z,Y]),2),ve=ne[0],Ee=ne[1],Ie=["top","left"].includes(H)?p:0,Ye=(0,ie.CR)(this.ifHorizontal([X/2,Ie],[Ie,X/2]),2),$e=Ye[0],St=Ye[1];return new Ku($e,St,ve,Ee)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),t.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,s=r.type,l=r.orientation,c=r.color,h=r.block,p=Va(this.attributes,"ribbon"),v=this.range,y=v.min,b=v.max,T=this.ribbonBBox,M=T.x,R=T.y,L=this.ribbonShape,N=L.length,z=L.size,H=Jt({x:M,y:R,length:N,size:z,type:s,orientation:l,color:c,block:h,partition:i.map(function(X){return(X.value-y)/(b-y)}),range:this.ribbonRange},p);this.ribbon=n.maybeAppendByClassName(mh.ribbon,function(){return new yW({style:H})}).update(H)},t.prototype.getHandleClassName=function(n){return"".concat(mh.prefix("".concat(n,"-handle")))},t.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,s=Va(this.attributes,"handle"),l=(0,ie.CR)(this.selection,2),c=l[0],h=l[1],p=(0,ie.pi)((0,ie.pi)({},s),{orientation:i}),v=s.shape,y=v===void 0?"slider":v,b=y==="basic"?sW:uL,T=this;this.handlesGroup.selectAll(mh.handle.class).data(r?[{value:c,type:"start"},{value:h,type:"end"}]:[],function(M){return M.type}).join(function(M){return M.append(function(){return new b({style:p})}).attr("className",function(R){var L=R.type;return"".concat(mh.handle," ").concat(T.getHandleClassName(L))}).each(function(R){var L=R.type,N=R.value;this.update({labelText:N});var z="".concat(L,"Handle");T[z]=this,this.addEventListener("pointerdown",T.onDragStart(L))})},function(M){return M.update(p).each(function(R){var L=R.value;this.update({labelText:L})})},function(M){return M.each(function(R){var L=R.type,N="".concat(L,"Handle");T[N]=void 0}).remove()})},t.prototype.adjustHandles=function(){var n=(0,ie.CR)(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},t.prototype.adjustTitle=function(){var n=this.attributes,r=n.titlePosition,i=n.orientation,s=(0,ie.CR)(this.getElementsByClassName(mh.title.name),1),l=s[0],c=this.handlesGroup.select(".".concat(this.getHandleClassName("start"))).node();if(!(!l||!c)&&!(r!=="top-left"||i!=="horizontal")){var h=(0,ie.CR)(c.getLocalBounds().min,1),p=h[0],v=(0,ie.CR)(l.getLocalBounds().min,1),y=v[0],b=p-y;l.style.x=+(this.style.x||0)+b}},Object.defineProperty(t.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Ku(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,s=this.endHandle.getBBox(),l=s.width,c=s.height,h=(0,ie.CR)([Math.max(r,l),Math.max(i,c)],2),p=h[0],v=h[1];return this.cacheHandleBBox=new Ku(0,0,p,v),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,s=(0,ie.CR)(this.ifHorizontal([i,r],[r,i]),2),l=s[0],c=s[1];return{width:r,height:i,size:l,length:c}},enumerable:!1,configurable:!0}),t.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,s=this.ribbonBBox,l=s.x,c=s.y,h=this.ribbonShape.size,p=this.getOffset(r),v=(0,ie.CR)(this.ifHorizontal([l+p,c+h*this.handleOffsetRatio],[l+h*this.handleOffsetRatio,c+p]),2),y=v[0],b=v[1],T=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();T==null||T.update({x:y,y:b,formatter:i})},t.prototype.renderIndicator=function(n){var r=Va(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(mh.indicator,function(){return new DH({})}).update(r)},Object.defineProperty(t.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,s,l,c){var h,p,v=(h=s==null?void 0:s.id)!==null&&h!==void 0?h:l.toString();if(i.push((0,ie.pi)((0,ie.pi)({},s),{id:v,index:l,type:"value",label:(p=s==null?void 0:s.label)!==null&&p!==void 0?p:s.value.toString(),value:n.ribbonScale.map(s.value)})),l<c.length-1){var y=c[l+1],b=(0,ie.CR)([s.value,y.value],2),T=b[0],M=b[1],R=(T+M)/2;i.push((0,ie.pi)((0,ie.pi)({},s),{id:v,index:l,type:"range",range:[T,M],label:[T,M].join("~"),value:n.ribbonScale.map(R)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{get:function(){var n=(0,ie.CR)(["center","middle"],2),r=n[0],i=n[1],s=this.labelPosition;return s==="top"?i="bottom":s==="bottom"?i="top":s==="left"?r="end":s==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,s=i===void 0?!1:i,l=r.labelFilter,c=r.labelFormatter,h=Va(this.attributes,"tick"),p=Va(this.attributes,"label"),v=p.align,y=Jt((0,ie.pi)({showLine:!1,showGrid:!1,showTick:s,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),Tc(h,"tick"),Tc(p,"label"),{data:this.labelData}),b={tickFilter:function(M,R,L){return(M==null?void 0:M.type)!=="value"?!1:l?l(M,M.index,L.filter(function(N){return N.type!=="value"})):!0},labelFilter:function(M,R,L){return(M==null?void 0:M.type)!==v?!1:l?l(M,M.index,L.filter(function(N){return N.type===v})):!0},labelFormatter:c},T=(0,ie.pi)((0,ie.pi)((0,ie.pi)({},y),b),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(mh.label,function(){return new mM({style:T})}).node(),this.label.update(T,!1)},Object.defineProperty(t.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,s=n.labelSpacing,l=n.tickLength,c=this.ribbonShape.size,h=this.labelPosition,p=this.labelFixedSpacing,v=(0,ie.CR)([0,0,0],3),y=v[0],b=v[1],T=v[2],M=l!=null?l:c;return r?(T=M,b=p,i==="positive"?h==="right"?(y=M,T=M):h==="bottom"&&(y=T):i==="negative"&&(h==="top"||h==="left")&&(y=c)):i==="positive"?h==="right"?b=M:h==="bottom"&&(y=c+p,b=s):i==="negative"&&(h==="left"||h==="top")&&(b=s),{offset:y,spacing:s,tickLength:T}},enumerable:!1,configurable:!0}),t.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,s=r.y,l=r.width,c=r.height,h=this.labelAxisStyle,p=h.offset,v=h.spacing,y=h.tickLength,b=(0,ie.CR)(this.ifHorizontal([[i,s+p],[i+l,s+p]],[[i+p,s+c],[i+p,s]]),2),T=b[0],M=b[1];this.label.update({startPos:T,endPos:M,tickLength:y,labelSpacing:v},!1)}},t.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},t.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var s=this.range,l=s.min,c=s.max,h=this.ribbonBBox,p=h.x,v=h.y,y=(0,Zl.Z)(n,l,c),b=this.getOffset(y),T=this.ifHorizontal([b+p,v],[p,b+v]);this.indicator.update({x:T[0],y:T[1],position:this.ifHorizontal("top","left"),labelText:r}),a(this.indicator.node())},t.prototype.hideIndicator=function(){o(this.indicator.node())},t.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},t.prototype.setSelection=function(n,r){this.updateSelection(n,r)},t.prototype.updateSelection=function(n,r,i){var s;i===void 0&&(i=!1);var l=(0,ie.CR)(this.selection,2),c=l[0],h=l[1],p=(0,ie.CR)([n,r],2),v=p[0],y=p[1];i&&(v+=c,y+=h);var b=this.range,T=b.min,M=b.max;s=(0,ie.CR)(aW([T,M],[v,y],this.selection),2),v=s[0],y=s[1],this.update({defaultValue:[v,y]}),this.dispatchSelection()},Object.defineProperty(t.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,s=i.min,l=i.max;return pa(r)?eT((l-s)*cW,0):r},enumerable:!1,configurable:!0}),t.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,s=r.block,l=this.range.min;return s?gL(i.map(function(c){var h=c.value;return h}),n).tick:nW(n,this.step,l)},t.prototype.getValueByCanvasPoint=function(n,r){r===void 0&&(r=!1);var i=this.range,s=i.min,l=i.max,c=(0,ie.CR)(this.ribbon.node().getPosition(),2),h=c[0],p=c[1],v=this.ifHorizontal(h,p),y=this.ifHorizontal.apply(this,(0,ie.ev)([],(0,ie.CR)(tT(n)),!1)),b=y-v,T=(0,Zl.Z)(this.getOffset(b,!0),s,l);return T},t.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,s=i.min,l=i.max,c=this.ribbonShape.length,h=this.eventToOffsetScale;return h.update({domain:[s,l],range:[0,c]}),r?h.invert(n):h.map(n)},t.prototype.dispatchSelection=function(){var n=new Yl("valuechange",{detail:{value:this.selection}});this.dispatchEvent(n)},t.prototype.dispatchIndicated=function(n,r){var i=new Yl("indicate",{detail:{value:n,range:r}});this.dispatchEvent(i)},t}(Vr);class C2 extends S2{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:z_}}map(t){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(t){const[n]=this.options.range;return t===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:t,domain:n,tickCount:r}=this.options,[i,s]=n;return!pb(i)||!pb(s)?[]:t(i,s,r)}clone(){return new C2(this.options)}}class gb extends S2{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!$w(t))return this.options.unknown;const n=yM(this.thresholds,t,0,this.n);return this.options.range[n]}invert(t){const{range:n}=this.options,r=n.indexOf(t),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new gb(this.options)}rescale(){const{domain:t,range:n}=this.options;this.n=Math.min(t.length,n.length-1),this.thresholds=t}}function O2(e){return Math.abs(e)<1e-14?e:parseFloat(e.toFixed(14))}const xW=[1,5,2,2.5,4,3],p0e=null,bL=Number.EPSILON*100;function EW(e,t){return(e%t+t)%t}function SW(e){return Math.round(e*1e12)/1e12}function wW(e,t,n,r,i,s){const l=V4(t),c=U4(t,e);let h=0;const p=EW(r,s);return(p<bL||s-p<bL)&&r<=0&&i>=0&&(h=1),1-c/(l-1)-n+h}function TW(e,t,n){const r=V4(t),i=U4(t,e),s=1;return 1-i/(r-1)-n+s}function AW(e,t,n,r,i,s){const l=(e-1)/(s-i),c=(t-1)/(Math.max(s,r)-Math.min(n,i));return 2-Math.max(l/c,c/l)}function CW(e,t){return e>=t?2-(e-1)/(t-1):1}function OW(e,t,n,r){const i=t-e;return 1-.5*(Ef(t-r,2)+Ef(e-n,2))/Ef(.1*i,2)}function MW(e,t,n){const r=t-e;if(n>r){const i=(n-r)/2;return 1-Ef(i,2)/Ef(.1*r,2)}return 1}function RW(){return 1}const AM=(e,t,n=5,r=!0,i=xW,s=[.25,.2,.5,.05])=>{const l=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||typeof e!="number"||typeof t!="number"||!l)return[];if(t-e<1e-15||l===1)return[e];const c={score:-2,lmin:0,lmax:0,lstep:0};let h=1;for(;h<1/0;){for(let M=0;M<i.length;M+=1){const R=i[M],L=TW(R,i,h);if(s[0]*L+s[1]+s[2]+s[3]<c.score){h=1/0;break}let N=2;for(;N<1/0;){const z=CW(N,l);if(s[0]*L+s[1]+s[2]*z+s[3]<c.score)break;const H=(t-e)/(N+1)/h/R;let X=Math.ceil(Math.log10(H));for(;X<1/0;){const Y=h*R*Ef(10,X),ne=MW(e,t,Y*(N-1));if(s[0]*L+s[1]*ne+s[2]*z+s[3]<c.score)break;const ve=Math.floor(t/Y)*h-(N-1)*h,Ee=Math.ceil(e/Y)*h;if(ve<=Ee){const Ie=Ee-ve;for(let Ye=0;Ye<=Ie;Ye+=1){const St=(ve+Ye)*(Y/h),Qe=St+Y*(N-1),lt=Y,ht=wW(R,i,h,St,Qe,lt),bt=OW(e,t,St,Qe),Ht=AW(N,l,e,t,St,Qe),Ot=RW(),kt=s[0]*ht+s[1]*bt+s[2]*Ht+s[3]*Ot;kt>c.score&&(!r||St<=e&&Qe>=t)&&(c.lmin=St,c.lmax=Qe,c.lstep=lt,c.score=kt)}}X+=1}N+=1}}h+=1}const p=O2(c.lmax),v=O2(c.lmin),y=O2(c.lstep),b=Math.floor(SW((p-v)/y))+1,T=new Array(b);T[0]=O2(v);for(let M=1;M<b;M+=1)T[M]=O2(T[M-1]+y);return T};class nT extends gb{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:AM}}constructor(t){super(t)}nice(){const{nice:t}=this.options;if(t){const[n,r,i]=this.getTickMethodOptions();this.options.domain=G4(n,r,i)}}getTicks(){const{tickMethod:t}=this.options,[n,r,i]=this.getTickMethodOptions();return t(n,r,i)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}rescale(){this.nice();const{range:t,domain:n}=this.options,[r,i]=n;this.n=t.length-1,this.thresholds=new Array(this.n);for(let s=0;s<this.n;s+=1)this.thresholds[s]=((s+1)*i-(s-this.n)*r)/(this.n+1)}invert(t){const[n,r]=super.invert(t),[i,s]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||s]}getThresholds(){return this.thresholds}clone(){return new nT(this.options)}}function PW(e,t){const n=e.length;if(!n)return;if(n<2)return e[n-1];const r=(n-1)*t,i=Math.floor(r),s=e[i],l=e[i+1];return s+(l-s)*(r-i)}function IW(e,t,n=!1){const r=e;n||r.sort((s,l)=>s-l);const i=[];for(let s=1;s<t;s+=1)i.push(PW(r,s/t));return i}class rT extends gb{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:AM}}constructor(t){super(t)}rescale(){const{domain:t,range:n}=this.options;this.n=n.length-1,this.thresholds=IW(t,this.n+1,!1)}invert(t){const[n,r]=super.invert(t),{domain:i}=this.options,s=i[0],l=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||s,r||l]}getThresholds(){return this.thresholds}clone(){return new rT(this.options)}getTicks(){const{tickCount:t,domain:n,tickMethod:r}=this.options,i=n.length-1,s=n[0],l=n[i];return r(s,l,t)}}var LW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function DW(e,t,n){return e.size=t,pH(n)?e.height=t:e.width=t,e}function NW(e,t,n){const{size:r}=t,i=Q4(e,t,n);return DW(i,r,i.orientation)}function FW(e){return t=>({value:t/e,label:String(t)})}function BW(e,t,n,r,i){const s=t.thresholds,l=FW(r);return Object.assign(Object.assign({},e),{color:i,data:[n,...s,r].map(l)})}function kW(e,t,n){const i=[-1/0,...t.thresholds,1/0].map((s,l)=>({value:l,label:s}));return Object.assign(Object.assign({},e),{data:i,color:n,labelFilter:(s,l)=>l>0&&l<i.length-1})}function CM(e){const{domain:t}=e.getOptions(),[n,r]=[t[0],ww(t)];return[n,r]}function zW(e,t){const n=e.getOptions(),r=e.clone();return r.update(Object.assign(Object.assign({},n),{range:[uv(t).toString()]})),r}function UW(e,t,n,r,i,s){const{length:l}=e,c=n||r,h=i.color?s.legendContinuous.ribbonFill||"black":s.color,p=t||zW(c,h),[v,y]=CM(p),[b,T]=CM([t,n,r].filter(M=>M!==void 0).find(M=>!(M instanceof C2)));return Object.assign(Object.assign({},e),{domain:[b,T],data:p.getTicks().map(M=>({value:M})),color:new Array(Math.floor(l)).fill(0).map((M,R)=>{const L=(y-v)/(l-1)*R+v,N=p.map(L)||h,z=r?r.map(L):1;return N.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(H,X,Y,ne)=>`rgba(${X}, ${Y}, ${ne}, ${z})`)})})}function jW(e,t,n,r,i,s){const l=rm(e,"color"),c=NW(n,r,i);if(l instanceof gb){const{range:v}=l.getOptions(),[y,b]=CM(l);return l instanceof nT||l instanceof rT?BW(c,l,y,b,v):kW(c,l,v)}const h=rm(e,"size"),p=rm(e,"opacity");return UW(c,l,h,p,t,s)}const py=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:c,style:h,crossPadding:p,padding:v}=e,y=LW(e,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:b,value:T,theme:M,scale:R})=>{const{bbox:L}=T,{x:N,y:z,width:H,height:X}=L,Y=q4(s,n),{legendContinuous:ne={}}=M,ve=Jw(Object.assign({},ne,Object.assign(Object.assign({titleText:Qw(c),labelAlign:"value",labelFormatter:typeof t=="string"?Ie=>em(t)(Ie.label):t},jW(b,R,T,e,py,M)),h),y)),Ee=new K4({style:Object.assign(Object.assign({x:N,y:z,width:H,height:X},Y),{subOptions:ve})});return Ee.appendChild(new bW({className:"legend-continuous",style:ve})),Ee}};py.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const xL=e=>(...t)=>py(Object.assign({},{block:!0},e))(...t);xL.props=Object.assign(Object.assign({},py.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const OM=e=>t=>{const{scales:n}=t,r=rm(n,"size");return py(Object.assign({},{type:"size",data:r.getTicks().map((i,s)=>({value:i,label:String(i)}))},e))(t)};OM.props=Object.assign(Object.assign({},py.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const EL=e=>OM(Object.assign({},{block:!0},e));EL.props=Object.assign(Object.assign({},py.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var VW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const SL=({static:e=!1}={})=>t=>{const{width:n,height:r,depth:i,paddingLeft:s,paddingRight:l,paddingTop:c,paddingBottom:h,padding:p,inset:v,insetLeft:y,insetTop:b,insetRight:T,insetBottom:M,margin:R,marginLeft:L,marginBottom:N,marginTop:z,marginRight:H,data:X,coordinate:Y,theme:ne,component:ve,interaction:Ee,x:Ie,y:Ye,z:$e,key:St,frame:Qe,labelTransform:lt,parentKey:ht,clip:bt,viewStyle:Ht,title:Ot}=t,kt=VW(t,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:Ie,y:Ye,z:$e,key:St,width:n,height:r,depth:i,padding:p,paddingLeft:s,paddingRight:l,paddingTop:c,inset:v,insetLeft:y,insetTop:b,insetRight:T,insetBottom:M,paddingBottom:h,theme:ne,coordinate:Y,component:ve,interaction:Ee,frame:Qe,labelTransform:lt,margin:R,marginLeft:L,marginBottom:N,marginTop:z,marginRight:H,parentKey:ht,clip:bt,style:Ht},!e&&{title:Ot}),{marks:[Object.assign(Object.assign(Object.assign({},kt),{key:`${St}-0`,data:X}),e&&{title:Ot})]})]};SL.props={};var HW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yb(e){return(t,...n)=>ui({},e(t,...n),t)}function _b(e){return(t,...n)=>ui({},t,e(t,...n))}function MM(e,t){if(!e)return t;if(Array.isArray(e))return e;const{value:n=t}=e,r=HW(e,["value"]);return Object.assign(Object.assign({},r),{value:n})}var RM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const wL=()=>e=>{const{children:t}=e,n=RM(e,["children"]);if(!Array.isArray(t))return[];const{data:r,scale:i={},axis:s={},legend:l={},encode:c={},transform:h=[]}=n,p=RM(n,["data","scale","axis","legend","encode","transform"]),v=t.map(y=>{var{data:b,scale:T={},axis:M={},legend:R={},encode:L={},transform:N=[]}=y,z=RM(y,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:MM(b,r),scale:ui({},i,T),encode:ui({},c,L),transform:[...h,...N],axis:M&&s?ui({},s,M):!1,legend:R&&l?ui({},l,R):!1},z)});return[Object.assign(Object.assign({},p),{marks:v,type:"standardView"})]};wL.props={};function Bc([e,t],[n,r]){return[e-n,t-r]}function iT([e,t],[n,r]){return[e+n,t+r]}function cc([e,t],[n,r]){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function P0([e,t]){return Math.atan2(t,e)}function bb([e,t]){return P0([e,t])+Math.PI/2}function TL(e,t){const n=P0(e),r=P0(t);return n<r?r-n:Math.PI*2-(n-r)}function PM(e){let t=1/0,n=-1/0,r=1/0,i=-1/0;for(const[c,h]of e)t=Math.min(c,t),n=Math.max(c,n),r=Math.min(h,r),i=Math.max(h,i);const s=n-t,l=i-r;return[t,r,s,l]}function AL([e,t],[n,r]){return[(e+n)/2,(t+r)/2]}function ma(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function WW(e,t){return t.forEach((n,r)=>r===0?e.moveTo(n[0],n[1]):e.lineTo(n[0],n[1])),e.closePath(),e}function GW(e,t,n){const{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*cc(e,t):r,s=Math.PI/6,l=Math.atan2(t[1]-e[1],t[0]-e[0]),c=Math.PI/2-l-s,h=[t[0]-i*Math.sin(c),t[1]-i*Math.cos(c)],p=l-s,v=[t[0]-i*Math.cos(p),t[1]-i*Math.sin(p)];return[h,v]}function M2(e,t,n,r,i){const s=P0(Bc(r,t))+Math.PI,l=P0(Bc(r,n))+Math.PI;return e.arc(r[0],r[1],i,s,l,l-s<0),e}function CL(e,t,n,r="y",i="between",s=!1){const l=(L,N)=>L==="y"||L===!0?N?180:90:N?90:0,c=r==="y"||r===!0?n:t,h=l(r,s),p=og(c),[v,y]=cg(p,L=>c[L]),b=new vd({domain:[v,y],range:[0,100]}),T=L=>(0,$u.Z)(c[L])&&!Number.isNaN(c[L])?b.map(c[L]):0,M={between:L=>`${e[L]} ${T(L)}%`,start:L=>L===0?`${e[L]} ${T(L)}%`:`${e[L-1]} ${T(L)}%, ${e[L]} ${T(L)}%`,end:L=>L===e.length-1?`${e[L]} ${T(L)}%`:`${e[L]} ${T(L)}%, ${e[L+1]} ${T(L)}%`},R=p.sort((L,N)=>T(L)-T(N)).map(M[i]||M.between).join(",");return`linear-gradient(${h}deg, ${R})`}function oT(e){const[t,n,r,i]=e;return[i,t,n,r]}function U_(e,t,n){const[r,i,,s]=Cu(e)?oT(t):t,[l,c]=n,h=e.getCenter(),p=bb(Bc(r,h)),v=bb(Bc(i,h)),y=v===p&&l!==c?v+Math.PI*2:v;return{startAngle:p,endAngle:y-p>=0?y:Math.PI*2+y,innerRadius:cc(s,h),outerRadius:cc(r,h)}}function v0e(e){const t="connect";return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(t)).map(([n,r])=>[lowerFirst(n.replace(t,"").trim()),r]).filter(([n])=>n!==void 0))}function OL(e){const{colorAttribute:t,opacityAttribute:n=t}=e;return`${n}Opacity`}function ML(e,t){if(!Bl(e))return"";const n=e.getCenter(),{transform:r}=t;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function RL(e){if(e.length===1)return e[0];const[[t,n,r=0],[i,s,l=0]]=e;return[(t+i)/2,(n+s)/2,(r+l)/2]}function PL(e){return e.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})}function ZW(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}var m0e=Array.prototype.slice;function IL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qu(e){return function(){return e}}function LL(e){this._context=e}LL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function R2(e){return new LL(e)}const IM=Math.PI,LM=2*IM,j_=1e-6,XW=LM-j_;function DL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function YW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return DL;const n=Ef(10,t);return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class aT{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?DL:YW(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,c=this._y1,h=r-t,p=i-n,v=l-t,y=c-n,b=v*v+y*y;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>j_)if(!(Math.abs(y*h-p*v)>j_)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let T=r-l,M=i-c,R=h*h+p*p,L=T*T+M*M,N=Math.sqrt(R),z=Math.sqrt(b),H=s*Math.tan((IM-Math.acos((R+b-L)/(2*N*z)))/2),X=H/z,Y=H/N;Math.abs(X-1)>j_&&this._append`L${t+X*v},${n+X*y}`,this._append`A${s},${s},0,0,${+(y*T>v*M)},${this._x1=t+Y*h},${this._y1=n+Y*p}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),h=r*Math.sin(i),p=t+c,v=n+h,y=1^l,b=l?i-s:s-i;this._x1===null?this._append`M${p},${v}`:(Math.abs(this._x1-p)>j_||Math.abs(this._y1-v)>j_)&&this._append`L${p},${v}`,r&&(b<0&&(b=b%LM+LM),b>XW?this._append`A${r},${r},0,1,${y},${t-c},${n-h}A${r},${r},0,1,${y},${this._x1=p},${this._y1=v}`:b>j_&&this._append`A${r},${r},0,${+(b>=IM)},${y},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function I0(){return new aT}I0.prototype=aT.prototype;function g0e(e=3){return new aT(+e)}function DM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new aT(t)}function NL(e){return e[0]}function FL(e){return e[1]}function vy(e,t){var n=Qu(!0),r=null,i=R2,s=null,l=DM(c);e=typeof e=="function"?e:e===void 0?NL:Qu(e),t=typeof t=="function"?t:t===void 0?FL:Qu(t);function c(h){var p,v=(h=IL(h)).length,y,b=!1,T;for(r==null&&(s=i(T=l())),p=0;p<=v;++p)!(p<v&&n(y=h[p],p,h))===b&&((b=!b)?s.lineStart():s.lineEnd()),b&&s.point(+e(y,p,h),+t(y,p,h));if(T)return s=null,T+""||null}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:Qu(+h),c):e},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:Qu(+h),c):t},c.defined=function(h){return arguments.length?(n=typeof h=="function"?h:Qu(!!h),c):n},c.curve=function(h){return arguments.length?(i=h,r!=null&&(s=i(r)),c):i},c.context=function(h){return arguments.length?(h==null?r=s=null:s=i(r=h),c):r},c}function xb(e){const t=typeof e=="function"?e:e.render;return class extends Du{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){t(this)}}}var NM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $W(e){const{min:[t,n],max:[r,i]}=e.getLocalBounds();let s=0,l=0;return t>0&&(s=t),r<0&&(s=r),n>0&&(l=n),i<0&&(l=i),[s,l]}function qW(e,t=[]){const[n=0,r=0,i=n,s=r]=t,l=e.parentNode,c=l.getEulerAngles();l.setEulerAngles(0);const{min:h,halfExtents:p}=e.getLocalBounds(),[v,y]=h,[b,T]=p;return l.setEulerAngles(c),{x:v-s,y:y-n,width:b*2+s+r,height:T*2+n+i}}const KW=(e,t,n)=>{const r=cc(e,t),i=cc(t,n),s=cc(n,e);return(Math.pow(r,2)+Math.pow(i,2)-Math.pow(s,2))/(2*r*i)};function QW(e,t,n,r){const[[i,s],[l,c]]=t,[h,p]=$W(e);if(i===l&&s===c)return vy()([[0,0],[h,p]]);const v=[[i-l,s-c]].concat(n.length?n:[[0,0]]),y=[r[0]-l,r[1]-c],[b,T]=v;if(KW(y,b,T)>0){const M=(()=>{const{min:R,max:L}=e.getLocalBounds(),N=b[0]+(b[1]-y[1])*(b[1]-0)/(b[0]-y[0]);return L[0]<y[0]?Math.min(L[0],N):Math.max(R[0],N)})();v.splice(1,1,[M,0])}return vy()(v)}const BL=xb(e=>{const t=e.attributes,{className:n,class:r,transform:i,rotate:s,labelTransform:l,labelTransformOrigin:c,x:h,y:p,x0:v=h,y0:y=p,text:b,background:T,connector:M,startMarker:R,endMarker:L,coordCenter:N,innerHTML:z}=t,H=NM(t,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if([h,p,v,y].some(bt=>!(0,$u.Z)(bt))){e.children.forEach(bt=>bt.remove());return}const X=xo(H,"background"),{padding:Y}=X,ne=NM(X,["padding"]),ve=xo(H,"connector"),{points:Ee=[]}=ve,Ie=NM(ve,["points"]),Ye=[[+v,+y],[+h,+p]];let $e;z?$e=Ua(e).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",z).call(ma,Object.assign({transform:l,transformOrigin:c},H)).node():$e=Ua(e).maybeAppend("text","text").style("zIndex",0).style("text",b).call(ma,Object.assign({textBaseline:"middle",transform:l,transformOrigin:c},H)).node();const St=Ua(e).maybeAppend("background","rect").style("zIndex",-1).call(ma,qW($e,Y)).call(ma,T?ne:{}).node(),Qe=QW(St,Ye,Ee,N),lt=R&&new kl({id:"startMarker",style:Object.assign({x:0,y:0},xo(H,"startMarker"))}),ht=L&&new kl({id:"endMarker",style:Object.assign({x:0,y:0},xo(H,"endMarker"))});Ua(e).maybeAppend("connector","path").style("zIndex",0).style("path",Qe).style("markerStart",lt).style("markerEnd",ht).call(ma,M?Ie:{})});function Eb(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function JW(e,t,n,r){const i=t.length/2,s=t.slice(0,i),l=t.slice(i);let c=Eb(s,(T,M)=>Math.abs(T[1]-l[M][1]));c=Math.max(Math.min(c,i-2),1);const h=T=>[s[T][0],(s[T][1]+l[T][1])/2],p=h(c),v=h(c-1),y=h(c+1),b=P0(Bc(y,v))/Math.PI*180;return{x:p[0],y:p[1],transform:`rotate(${b})`,textAlign:"center",textBaseline:"middle"}}function kL(e,t,n,r){const{bounds:i}=n,[[s,l],[c,h]]=i,p=c-s,v=h-l,y=b=>{const{x:T,y:M}=b,R=ly(n.x,p),L=ly(n.y,v);return Object.assign(Object.assign({},b),{x:(R||T)+s,y:(L||M)+l})};return y(e==="left"?{x:0,y:v/2,textAnchor:"start",textBaseline:"middle"}:e==="right"?{x:p,y:v/2,textAnchor:"end",textBaseline:"middle"}:e==="top"?{x:p/2,y:0,textAnchor:"center",textBaseline:"top"}:e==="bottom"?{x:p/2,y:v,textAnchor:"center",textBaseline:"bottom"}:e==="top-left"?{x:0,y:0,textAnchor:"start",textBaseline:"top"}:e==="top-right"?{x:p,y:0,textAnchor:"end",textBaseline:"top"}:e==="bottom-left"?{x:0,y:v,textAnchor:"start",textBaseline:"bottom"}:e==="bottom-right"?{x:p,y:v,textAnchor:"end",textBaseline:"bottom"}:{x:p/2,y:v/2,textAnchor:"center",textBaseline:"middle"})}function zL(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:c}=n,h=r.getCenter(),p=U_(r,t,[i,s]),{innerRadius:v,outerRadius:y,startAngle:b,endAngle:T}=p,M=e==="inside"?(b+T)/2:T,R=FM(M,l,c),L=(()=>{const[N,z]=t,H=v+(y-v)*.5,[X,Y]=e==="inside"?P2(h,M,H):AL(N,z);return{x:X,y:Y}})();return Object.assign(Object.assign({},L),{textAlign:e==="inside"?"center":"start",textBaseline:"middle",rotate:R})}function P2(e,t,n){return[e[0]+Math.sin(t)*n,e[1]-Math.cos(t)*n]}function FM(e,t,n){if(!t)return 0;const r=n?0:Math.sin(e)<0?90:-90;return e/Math.PI*180+r}function eG(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:c,radius:h=.5,offset:p=0}=n,v=U_(r,t,[i,s]),{startAngle:y,endAngle:b}=v,T=r.getCenter(),M=(y+b)/2,L={textAlign:"center",textBaseline:"middle",rotate:FM(M,l,c)},{innerRadius:N,outerRadius:z}=v,X=N+(z-N)*h+p,[Y,ne]=P2(T,M,X);return Object.assign({x:Y,y:ne},L)}function UL(e){return e===void 0?null:e}function jL(e,t,n,r){const{bounds:i}=n,[s]=i;return{x:UL(s[0]),y:UL(s[1])}}function fg(e,t,n,r){const{bounds:i}=n;return i.length===1?jL(e,t,n,r):(D_(r)?zL:cy(r)?eG:kL)(e,t,n,r)}function tG(e,t,n,r,i){const[s,l]=P2(e,t,n),[c,h]=P2(e,t,r),p=Math.sin(t)>0?1:-1;return[[s,l],[c,h],[c+p*i,h]]}function VL(e,t,n){const r=U_(n,e,[t.y,t.y1]),{innerRadius:i,outerRadius:s}=r;return i+(s-i)}function HL(e,t,n){const r=U_(n,e,[t.y,t.y1]),{startAngle:i,endAngle:s}=r;return(i+s)/2}function BM(e,t,n,r){const{autoRotate:i,rotateToAlignArc:s,offset:l=0,connector:c=!0,connectorLength:h=l,connectorLength2:p=0,connectorDistance:v=0}=n,y=r.getCenter(),b=HL(t,n,r),T=Math.sin(b)>0?1:-1,M=FM(b,i,s),R={textAlign:T>0||D_(r)?"start":"end",textBaseline:"middle",rotate:M},L=VL(t,n,r),N=L+(c?h:l),[[z,H],[X,Y],[ne,ve]]=tG(y,b,L,N,c?p:0),Ee=c?+v*T:0,Ie=ne+Ee,Ye=ve,$e={connector:c,connectorPoints:[[X-Ie,Y-Ye],[ne-Ie,ve-Ye]]};return Object.assign(Object.assign({x0:z,y0:H,x:ne+Ee,y:ve},R),$e)}function nG(e,t,n,r){const{bounds:i}=n;return i.length===1?jL(e,t,n,r):(D_(r)?zL:cy(r)?BM:kL)(e,t,n,r)}var rG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function iG(e,t,n,r){if(!cy(r))return{};const{connectorLength:i,connectorLength2:s,connectorDistance:l}=n,c=rG(BM("outside",t,n,r),[]),h=r.getCenter(),p=VL(t,n,r),v=HL(t,n,r),y=p+i+s,b=Math.sin(v)>0?1:-1,T=h[0]+(y+ +l)*b,{x:M}=c,R=T-M;return c.x+=R,c.connectorPoints[0][0]-=R,c}var oG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function aG(e,t,n,r){if(!cy(r))return{};const{connectorLength:i,connectorLength2:s,connectorDistance:l}=n,c=oG(BM("outside",t,n,r),[]),{x0:h,y0:p}=c,v=r.getCenter(),b=tM(r)+i,T=bb([h-v[0],p-v[1]]),M=Math.sin(T)>0?1:-1,[R,L]=P2(v,T,b);return c.x=R+(s+l)*M,c.y=L,c}var WL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function sG(e,t){return e!==void 0?e:cy(t)?"inside":Cu(t)?"right":"top"}function lG(e,t,n,r,i){const{position:s}=t,{render:l}=i,c=sG(s,n),p=r[l?"htmlLabel":c==="inside"?"innerLabel":"label"],v=Object.assign({},p,t),y=q[PL(c)];if(!y)throw new Error(`Unknown position: ${c}`);return Object.assign(Object.assign({},p),y(c,e,v,n,i))}const GL=(e,t)=>{const{coordinate:n,theme:r}=t,{render:i}=e;return(s,l)=>{const{text:c,x:h,y:p,transform:v="",transformOrigin:y,className:b=""}=l,T=WL(l,["text","x","y","transform","transformOrigin","className"]),M=lG(s,l,n,r,e),{rotate:R=0,transform:L=""}=M,N=WL(M,["rotate","transform"]);return Ua(new BL).call(ma,N).style("text",`${c}`).style("className",`${b} g2-label`).style("innerHTML",i?i(c,l.datum,l.index):void 0).style("labelTransform",`${L} rotate(${+R}) ${v}`.trim()).style("labelTransformOrigin",y).style("coordCenter",n.getCenter()).call(ma,T).node()}};GL.props={defaultMarker:"point"};function kc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uG(e,t){return Array.from(t,n=>e[n])}function hg(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const l of t){const c=I2(l[i],l[s]);if(c)return c}})):(n=e.map(n),r.sort((i,s)=>I2(n[i],n[s]))),uG(e,r)}return e.sort(ZL(n))}function ZL(e=kc){if(e===kc)return I2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function I2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var cG=function(e,t){if(!uy(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},XL=cG;function fG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sb(e){let t,n,r;e.length!==2?(t=kc,n=(c,h)=>kc(e(c),h),r=(c,h)=>e(c)-h):(t=e===kc||e===fG?e:hG,n=e,r=e);function i(c,h,p=0,v=c.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(c[y],h)<0?p=y+1:v=y}while(p<v)}return p}function s(c,h,p=0,v=c.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(c[y],h)<=0?p=y+1:v=y}while(p<v)}return p}function l(c,h,p=0,v=c.length){const y=i(c,h,p,v-1);return y>p&&r(c[y-1],h)>-r(c[y],h)?y-1:y}return{left:i,center:l,right:s}}function hG(){return 0}function kM(e){return e===null?NaN:+e}function*dG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const YL=Sb(kc),pG=YL.right,vG=YL.left,mG=Sb(kM).center;var gG=pG;function yG(e,t,n){return Math.min(n,Math.max(t,e))}function L2(e){return!!e.getBandWidth}function wb(e,t,n){if(!L2(e))return e.invert(t);const{adjustedRange:r}=e,{domain:i}=e.getOptions(),s=n?-1:0,l=e.getStep(),c=n?r:r.map(v=>v+l),h=vG(c,t),p=yG(h+s,0,i.length-1);return i[p]}function gy(e,t,n){if(!t)return e.getOptions().domain;if(!L2(e)){const h=hg(t);if(!n)return h;const[p]=h,{range:v}=e.getOptions(),[y,b]=v,T=y>b?-1:1,M=e.invert(e.map(p)+T*n);return[p,M]}const{domain:r}=e.getOptions(),i=t[0],s=r.indexOf(i);if(n){const h=s+Math.round(r.length*n);return r.slice(s,h)}const l=t[t.length-1],c=r.indexOf(l);return r.slice(s,c+1)}function sT(e,t,n,r,i,s){const{x:l,y:c}=i,h=(T,M)=>{const[R,L]=s.invert(T);return[wb(l,R,M),wb(c,L,M)]},p=h([e,t],!0),v=h([n,r],!1),y=gy(l,[p[0],v[0]]),b=gy(c,[p[1],v[1]]);return[y,b]}function lT(e,t){const[n,r]=e,i=s=>s.getStep?s.getStep():0;return[t.map(n),t.map(r)+i(t)]}function _G(e,t,n){const{x:r,y:i}=t,[s,l]=e,c=lT(s,r),h=lT(l,i),p=[c[0],h[0]],v=[c[1],h[1]],[y,b]=n.map(p),[T,M]=n.map(v);return[y,b,T,M]}const $L=Math.abs,md=Math.atan2,V_=Math.cos,bG=Math.max,zM=Math.min,am=Math.sin,Tb=Math.sqrt,gd=1e-12,D2=Math.PI,uT=D2/2,xG=2*D2;function EG(e){return e>1?0:e<-1?D2:Math.acos(e)}function qL(e){return e>=1?uT:e<=-1?-uT:Math.asin(e)}function SG(e){return e.innerRadius}function wG(e){return e.outerRadius}function TG(e){return e.startAngle}function AG(e){return e.endAngle}function CG(e){return e&&e.padAngle}function OG(e,t,n,r,i,s,l,c){var h=n-e,p=r-t,v=l-i,y=c-s,b=y*h-v*p;if(!(b*b<gd))return b=(v*(t-s)-y*(e-i))/b,[e+b*h,t+b*p]}function cT(e,t,n,r,i,s,l){var c=e-n,h=t-r,p=(l?s:-s)/Tb(c*c+h*h),v=p*h,y=-p*c,b=e+v,T=t+y,M=n+v,R=r+y,L=(b+M)/2,N=(T+R)/2,z=M-b,H=R-T,X=z*z+H*H,Y=i-s,ne=b*R-M*T,ve=(H<0?-1:1)*Tb(bG(0,Y*Y*X-ne*ne)),Ee=(ne*H-z*ve)/X,Ie=(-ne*z-H*ve)/X,Ye=(ne*H+z*ve)/X,$e=(-ne*z+H*ve)/X,St=Ee-L,Qe=Ie-N,lt=Ye-L,ht=$e-N;return St*St+Qe*Qe>lt*lt+ht*ht&&(Ee=Ye,Ie=$e),{cx:Ee,cy:Ie,x01:-v,y01:-y,x11:Ee*(i/Y-1),y11:Ie*(i/Y-1)}}function fT(){var e=SG,t=wG,n=Qu(0),r=null,i=TG,s=AG,l=CG,c=null,h=DM(p);function p(){var v,y,b=+e.apply(this,arguments),T=+t.apply(this,arguments),M=i.apply(this,arguments)-uT,R=s.apply(this,arguments)-uT,L=$L(R-M),N=R>M;if(c||(c=v=h()),T<b&&(y=T,T=b,b=y),!(T>gd))c.moveTo(0,0);else if(L>xG-gd)c.moveTo(T*V_(M),T*am(M)),c.arc(0,0,T,M,R,!N),b>gd&&(c.moveTo(b*V_(R),b*am(R)),c.arc(0,0,b,R,M,N));else{var z=M,H=R,X=M,Y=R,ne=L,ve=L,Ee=l.apply(this,arguments)/2,Ie=Ee>gd&&(r?+r.apply(this,arguments):Tb(b*b+T*T)),Ye=zM($L(T-b)/2,+n.apply(this,arguments)),$e=Ye,St=Ye,Qe,lt;if(Ie>gd){var ht=qL(Ie/b*am(Ee)),bt=qL(Ie/T*am(Ee));(ne-=ht*2)>gd?(ht*=N?1:-1,X+=ht,Y-=ht):(ne=0,X=Y=(M+R)/2),(ve-=bt*2)>gd?(bt*=N?1:-1,z+=bt,H-=bt):(ve=0,z=H=(M+R)/2)}var Ht=T*V_(z),Ot=T*am(z),kt=b*V_(Y),Mn=b*am(Y);if(Ye>gd){var Wn=T*V_(H),cr=T*am(H),ar=b*V_(X),Yr=b*am(X),Pi;if(L<D2)if(Pi=OG(Ht,Ot,ar,Yr,Wn,cr,kt,Mn)){var so=Ht-Pi[0],mi=Ot-Pi[1],ti=Wn-Pi[0],Do=cr-Pi[1],uo=1/am(EG((so*ti+mi*Do)/(Tb(so*so+mi*mi)*Tb(ti*ti+Do*Do)))/2),Ko=Tb(Pi[0]*Pi[0]+Pi[1]*Pi[1]);$e=zM(Ye,(b-Ko)/(uo-1)),St=zM(Ye,(T-Ko)/(uo+1))}else $e=St=0}ve>gd?St>gd?(Qe=cT(ar,Yr,Ht,Ot,T,St,N),lt=cT(Wn,cr,kt,Mn,T,St,N),c.moveTo(Qe.cx+Qe.x01,Qe.cy+Qe.y01),St<Ye?c.arc(Qe.cx,Qe.cy,St,md(Qe.y01,Qe.x01),md(lt.y01,lt.x01),!N):(c.arc(Qe.cx,Qe.cy,St,md(Qe.y01,Qe.x01),md(Qe.y11,Qe.x11),!N),c.arc(0,0,T,md(Qe.cy+Qe.y11,Qe.cx+Qe.x11),md(lt.cy+lt.y11,lt.cx+lt.x11),!N),c.arc(lt.cx,lt.cy,St,md(lt.y11,lt.x11),md(lt.y01,lt.x01),!N))):(c.moveTo(Ht,Ot),c.arc(0,0,T,z,H,!N)):c.moveTo(Ht,Ot),!(b>gd)||!(ne>gd)?c.lineTo(kt,Mn):$e>gd?(Qe=cT(kt,Mn,Wn,cr,b,-$e,N),lt=cT(Ht,Ot,ar,Yr,b,-$e,N),c.lineTo(Qe.cx+Qe.x01,Qe.cy+Qe.y01),$e<Ye?c.arc(Qe.cx,Qe.cy,$e,md(Qe.y01,Qe.x01),md(lt.y01,lt.x01),!N):(c.arc(Qe.cx,Qe.cy,$e,md(Qe.y01,Qe.x01),md(Qe.y11,Qe.x11),!N),c.arc(0,0,b,md(Qe.cy+Qe.y11,Qe.cx+Qe.x11),md(lt.cy+lt.y11,lt.cx+lt.x11),N),c.arc(lt.cx,lt.cy,$e,md(lt.y11,lt.x11),md(lt.y01,lt.x01),!N))):c.arc(0,0,b,Y,X,N)}if(c.closePath(),v)return c=null,v+""||null}return p.centroid=function(){var v=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,y=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-D2/2;return[V_(y)*v,am(y)*v]},p.innerRadius=function(v){return arguments.length?(e=typeof v=="function"?v:Qu(+v),p):e},p.outerRadius=function(v){return arguments.length?(t=typeof v=="function"?v:Qu(+v),p):t},p.cornerRadius=function(v){return arguments.length?(n=typeof v=="function"?v:Qu(+v),p):n},p.padRadius=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:Qu(+v),p):r},p.startAngle=function(v){return arguments.length?(i=typeof v=="function"?v:Qu(+v),p):i},p.endAngle=function(v){return arguments.length?(s=typeof v=="function"?v:Qu(+v),p):s},p.padAngle=function(v){return arguments.length?(l=typeof v=="function"?v:Qu(+v),p):l},p.context=function(v){return arguments.length?(c=v==null?null:v,p):c},p}var hT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function KL(e,t,n,r,i={}){const{inset:s=0,radius:l=0,insetLeft:c=s,insetTop:h=s,insetRight:p=s,insetBottom:v=s,radiusBottomLeft:y=l,radiusBottomRight:b=l,radiusTopLeft:T=l,radiusTopRight:M=l,minWidth:R=-1/0,maxWidth:L=1/0,minHeight:N=-1/0}=i,z=hT(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!Bl(r)&&!Iw(r)){const Ee=!!Cu(r),[Ie,,Ye]=Ee?oT(t):t,[$e,St]=Ie,[Qe,lt]=Bc(Ye,Ie),ht=Qe>0?$e:$e+Qe,bt=lt>0?St:St+lt,Ht=Math.abs(Qe),Ot=Math.abs(lt),kt=ht+c,Mn=bt+h,Wn=Ht-(c+p),cr=Ot-(h+v),ar=Ee?cb(Wn,N,1/0):cb(Wn,R,L),Yr=Ee?cb(cr,R,L):cb(cr,N,1/0),Pi=Ee?kt:kt-(ar-Wn)/2,so=Ee?Mn-(Yr-cr)/2:Mn-(Yr-cr);return Ua(e.createElement("rect",{})).style("x",Pi).style("y",so).style("width",ar).style("height",Yr).style("radius",[T,M,b,y]).call(ma,z).node()}const{y:H,y1:X}=n,Y=r.getCenter(),ne=U_(r,t,[H,X]),ve=fT().cornerRadius(l).padAngle(s*Math.PI/180);return Ua(e.createElement("path",{})).style("path",ve(ne)).style("transform",`translate(${Y[0]}, ${Y[1]})`).style("radius",l).style("inset",s).call(ma,z).node()}const N2=(e,t)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:s=!0}=e,l=hT(e,["colorAttribute","opacityAttribute","first","last"]),{coordinate:c,document:h}=t;return(p,v,y)=>{const{color:b,radius:T=0}=y,M=hT(y,["color","radius"]),R=M.lineWidth||1,{stroke:L,radius:N=T,radiusTopLeft:z=N,radiusTopRight:H=N,radiusBottomRight:X=N,radiusBottomLeft:Y=N,innerRadius:ne=0,innerRadiusTopLeft:ve=ne,innerRadiusTopRight:Ee=ne,innerRadiusBottomRight:Ie=ne,innerRadiusBottomLeft:Ye=ne,lineWidth:$e=n==="stroke"||L?R:0,inset:St=0,insetLeft:Qe=St,insetRight:lt=St,insetBottom:ht=St,insetTop:bt=St,minWidth:Ht,maxWidth:Ot,minHeight:kt}=l,Mn=hT(l,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:Wn=b,opacity:cr}=v,ar=[i?z:ve,i?H:Ee,s?X:Ie,s?Y:Ye],Yr=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Cu(c)&&Yr.push(Yr.shift());const Pi=Object.assign(Object.assign({radius:N},Object.fromEntries(Yr.map((so,mi)=>[so,ar[mi]]))),{inset:St,insetLeft:Qe,insetRight:lt,insetBottom:ht,insetTop:bt,minWidth:Ht,maxWidth:Ot,minHeight:kt});return Ua(KL(h,p,v,c,Pi)).call(ma,M).style("fill","transparent").style(n,Wn).style(OL(e),cr).style("lineWidth",$e).style("stroke",L===void 0?Wn:L).call(ma,Mn).node()}};N2.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const MG={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function RG(e,t){var n;return(n=e.style[t])!==null&&n!==void 0?n:MG[t]}function UM(e,t,n,r){e.style[t]=n,r&&e.children.forEach(i=>UM(i,t,n,r))}function jM(e){UM(e,"visibility","hidden",!0)}function VM(e){UM(e,"visibility","visible",!0)}var F2=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yy(e){return Ua(e).selectAll(`.${dv}`).nodes().filter(t=>!t.__removed__)}function QL(e,t){return HM(e,t).flatMap(({container:n})=>yy(n))}function HM(e,t){return t.filter(n=>n!==e&&n.options.parentKey===e.options.key)}function sm(e){return Ua(e).select(`.${E_}`).node()}function JL(e){if(e.tagName==="g")return e.getRenderBounds();const t=e.getGeometryBounds(),n=new tu;return n.setFromTransformedAABB(t,e.getWorldTransform()),n}function WM(e,t){const{offsetX:n,offsetY:r}=t,i=JL(e),{min:[s,l],max:[c,h]}=i,p=n<s||n>c,v=r<l||r>h;return p||v?null:[n-s,r-l]}function GM(e,t){const{offsetX:n,offsetY:r}=t,[i,s,l,c]=PG(e);return[Math.min(l,Math.max(i,n))-i,Math.min(c,Math.max(s,r))-s]}function PG(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return[n,r,i,s]}function eD(e){return t=>t.__data__.color}function ZM(e){return t=>t.__data__.x}function H_(e){const t=Array.isArray(e)?e:[e],n=new Map(t.flatMap(r=>Array.from(r.markState.keys()).map(s=>[dT(r.key,s.key),s.data])));return r=>{const{index:i,markKey:s,viewKey:l}=r.__data__;return n.get(dT(l,s))[i]}}function dg(e,t=(r,i)=>r,n=(r,i,s)=>r.setAttribute(i,s)){const r="__states__",i="__ordinal__",s=v=>{const{[r]:y=[],[i]:b={}}=v,T=y.reduce((M,R)=>Object.assign(Object.assign({},M),e[R]),b);if(Object.keys(T).length!==0){for(const[M,R]of Object.entries(T)){const L=RG(v,M),N=t(R,v);n(v,M,N),M in b||(b[M]=L)}v[i]=b}},l=v=>{v[r]||(v[r]=[])};return{setState:(v,...y)=>{l(v),v[r]=[...y],s(v)},removeState:(v,...y)=>{l(v);for(const b of y){const T=v[r].indexOf(b);T!==-1&&v[r].splice(T,1)}s(v)},hasState:(v,y)=>(l(v),v[r].indexOf(y)!==-1)}}function IG(e){return e===void 0?!0:typeof e!="object"?!1:Object.keys(e).length===0}function dT(e,t){return`${e},${t}`}function Ab(e,t){const r=(Array.isArray(e)?e:[e]).flatMap(s=>s.marks.map(l=>[dT(s.key,l.key),l.state])),i={};for(const s of t){const[l,c]=Array.isArray(s)?s:[s,{}];i[l]=r.reduce((h,p)=>{const[v,y={}]=p,b=IG(y[l])?c:y[l];for(const[T,M]of Object.entries(b)){const R=h[T],L=(N,z,H,X)=>{const Y=dT(X.__data__.viewKey,X.__data__.markKey);return v!==Y?R==null?void 0:R(N,z,H,X):typeof M!="function"?M:M(N,z,H,X)};h[T]=L}return h},{})}return i}function B2(e,t){const n=new Map(e.map((i,s)=>[i,s])),r=t?e.map(t):e;return(i,s)=>{if(typeof i!="function")return i;const l=n.get(s),c=t?t(s):s;return i(c,l,r,s)}}function tD(e){var{link:t=!1,valueof:n=(v,y)=>v,coordinate:r}=e,i=F2(e,["link","valueof","coordinate"]);const s="element-link";if(!t)return[()=>{},()=>{}];const l=v=>v.__data__.points,c=(v,y)=>{const[,b,T]=v,[M,,,R]=y;return[b,M,R,T]};return[v=>{var y;if(v.length<=1)return;const b=hg(v,(T,M)=>{const{x:R}=T.__data__,{x:L}=M.__data__;return R-L});for(let T=1;T<b.length;T++){const M=I0(),R=b[T-1],L=b[T],[N,z,H,X]=c(l(R),l(L));M.moveTo(...N),M.lineTo(...z),M.lineTo(...H),M.lineTo(...X),M.closePath();const Y=tm(i,Ie=>n(Ie,R)),{fill:ne=R.getAttribute("fill")}=Y,ve=F2(Y,["fill"]),Ee=new gl({className:s,style:Object.assign({d:M.toString(),fill:ne,zIndex:-2},ve)});(y=R.link)===null||y===void 0||y.remove(),R.parentNode.appendChild(Ee),R.link=Ee}},v=>{var y;(y=v.link)===null||y===void 0||y.remove(),v.link=null}]}function nD(e,t,n){const r=i=>{const{transform:s}=e.style;return s?`${s} ${i}`:i};if(Bl(n)){const{points:i}=e.__data__,[s,l]=Cu(n)?oT(i):i,c=n.getCenter(),h=Bc(s,c),p=Bc(l,c),v=P0(h),y=TL(h,p),b=v+y/2,T=t*Math.cos(b),M=t*Math.sin(b);return r(`translate(${T}, ${M})`)}return Cu(n)?r(`translate(${t}, 0)`):r(`translate(0, ${-t})`)}function rD(e){var{document:t,background:n,scale:r,coordinate:i,valueof:s}=e,l=F2(e,["document","background","scale","coordinate","valueof"]);const c="element-background";if(!n)return[()=>{},()=>{}];const h=(N,z,H)=>{const X=N.invert(z),Y=z+N.getBandWidth(X)/2,ne=N.getStep(X)/2,ve=ne*H;return[Y-ne+ve,Y+ne-ve]},p=(N,z)=>{const{x:H}=r;if(!L2(H))return[0,1];const{__data__:X}=N,{x:Y}=X,[ne,ve]=h(H,Y,z);return[ne,ve]},v=(N,z)=>{const{y:H}=r;if(!L2(H))return[0,1];const{__data__:X}=N,{y:Y}=X,[ne,ve]=h(H,Y,z);return[ne,ve]},y=(N,z)=>{const{padding:H}=z,[X,Y]=p(N,H),[ne,ve]=v(N,H),Ee=[[X,ne],[Y,ne],[Y,ve],[X,ve]].map(St=>i.map(St)),{__data__:Ie}=N,{y:Ye,y1:$e}=Ie;return KL(t,Ee,{y:Ye,y1:$e},i,z)},b=(N,z)=>{const{transform:H="scale(1.2, 1.2)",transformOrigin:X="center center",stroke:Y=""}=z,ne=F2(z,["transform","transformOrigin","stroke"]),ve=Object.assign({transform:H,transformOrigin:X,stroke:Y},ne),Ee=N.cloneNode(!0);for(const[Ie,Ye]of Object.entries(ve))Ee.style[Ie]=Ye;return Ee},T=()=>{const{x:N,y:z}=r;return[N,z].some(L2)};return[N=>{N.background&&N.background.remove();const z=tm(l,St=>s(St,N)),{fill:H="#CCD6EC",fillOpacity:X=.3,zIndex:Y=-2,padding:ne=.001,strokeWidth:ve=0}=z,Ee=F2(z,["fill","fillOpacity","zIndex","padding","strokeWidth"]),Ie=Object.assign(Object.assign({},Ee),{fill:H,fillOpacity:X,zIndex:Y,padding:ne,strokeWidth:ve}),$e=(T()?y:b)(N,Ie);$e.className=c,N.parentNode.parentNode.appendChild($e),N.background=$e},N=>{var z;(z=N.background)===null||z===void 0||z.remove(),N.background=null},N=>N.className===c]}function _y(e,t){const r=e.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(e.cursor=r.style.cursor,r.style.cursor=t)}function LG(e){_y(e,e.cursor)}function XM(e,t,n){return e.find(r=>Object.entries(t).every(([i,s])=>n(r)[i]===s))}function pT(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function k2(e,t=!1){const n=XL(e,r=>!!r).map((r,i)=>[i===0?"M":"L",...r]);return t&&n.push(["Z"]),n}function iD(e){return e.querySelectorAll(".element")}function DG(e,t,n=0){const r=[["M",...t[1]]],i=pT(e,t[1]),s=pT(e,t[0]);return i===0?r.push(["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]):r.push(["A",i,i,0,n,0,...t[2]],["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]),r}function vT(e,t){if(t(e))return e;let n=e.parent;for(;n&&!t(n);)n=n.parent;return n}function oD(e,t){const{__data__:n}=e,{markKey:r,index:i,seriesIndex:s}=n,{markState:l}=t,c=Array.from(l.keys()).find(h=>h.key===r);if(c)return s?s.map(h=>c.data[h]):c.data[i]}function NG(e){return vT(e,t=>t.className==="component")}function FG(e){return vT(e,t=>t.className==="element")}function BG(e){return vT(e,t=>t.className==="label")}function gh(e,t,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${e}`,i);const{target:s}=i;if(!s)return;const{className:l}=s;if(l==="plot")return;const c=FG(s),h=NG(s),p=BG(s),v=c||h||p;if(!v)return;const{className:y,markType:b}=v,T=Object.assign(Object.assign({},i),{nativeEvent:!0});y==="element"?(T.data={data:oD(v,t)},n.emit(`element:${e}`,T),n.emit(`${b}:${e}`,T)):y==="label"?(T.data={data:v.attributes.datum},n.emit(`label:${e}`,T),n.emit(`${l}:${e}`,T)):(n.emit(`component:${e}`,T),n.emit(`${l}:${e}`,T))}}function aD(){return(e,t,n)=>{const{container:r,view:i}=e,s=gh(cl.CLICK,i,n,ve=>ve.detail===1),l=gh(cl.DBLCLICK,i,n,ve=>ve.detail===2),c=gh(cl.POINTER_TAP,i,n),h=gh(cl.POINTER_DOWN,i,n),p=gh(cl.POINTER_UP,i,n),v=gh(cl.POINTER_OVER,i,n),y=gh(cl.POINTER_OUT,i,n),b=gh(cl.POINTER_MOVE,i,n),T=gh(cl.POINTER_ENTER,i,n),M=gh(cl.POINTER_LEAVE,i,n),R=gh(cl.POINTER_UPOUTSIDE,i,n),L=gh(cl.DRAG_START,i,n),N=gh(cl.DRAG,i,n),z=gh(cl.DRAG_END,i,n),H=gh(cl.DRAG_ENTER,i,n),X=gh(cl.DRAG_LEAVE,i,n),Y=gh(cl.DRAG_OVER,i,n),ne=gh(cl.DROP,i,n);return r.addEventListener("click",s),r.addEventListener("click",l),r.addEventListener("pointertap",c),r.addEventListener("pointerdown",h),r.addEventListener("pointerup",p),r.addEventListener("pointerover",v),r.addEventListener("pointerout",y),r.addEventListener("pointermove",b),r.addEventListener("pointerenter",T),r.addEventListener("pointerleave",M),r.addEventListener("pointerupoutside",R),r.addEventListener("dragstart",L),r.addEventListener("drag",N),r.addEventListener("dragend",z),r.addEventListener("dragenter",H),r.addEventListener("dragleave",X),r.addEventListener("dragover",Y),r.addEventListener("drop",ne),()=>{r.removeEventListener("click",s),r.removeEventListener("click",l),r.removeEventListener("pointertap",c),r.removeEventListener("pointerdown",h),r.removeEventListener("pointerup",p),r.removeEventListener("pointerover",v),r.removeEventListener("pointerout",y),r.removeEventListener("pointermove",b),r.removeEventListener("pointerenter",T),r.removeEventListener("pointerleave",M),r.removeEventListener("pointerupoutside",R),r.removeEventListener("dragstart",L),r.removeEventListener("drag",N),r.removeEventListener("dragend",z),r.removeEventListener("dragenter",H),r.removeEventListener("dragleave",X),r.removeEventListener("dragover",Y),r.removeEventListener("drop",ne)}}}aD.props={reapplyWhenUpdate:!0};function kG(){return{"component.axisRadar":oL,"component.axisLinear":hy,"component.axisArc":iL,"component.legendContinuousBlock":xL,"component.legendContinuousBlockSize":EL,"component.legendContinuousSize":OM,"interaction.event":aD,"composition.mark":SL,"composition.view":wL,"shape.label.label":GL}}var zG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Ju(e,t){const n=Object.assign(Object.assign({},kG()),t),r=s=>{if(typeof s!="string")return s;const l=`${e}.${s}`;return n[l]||mv(`Unknown Component: ${l}`)};return[(s,l)=>{const{type:c}=s,h=zG(s,["type"]);c||mv("Plot type is required!");const p=r(c);return p==null?void 0:p(h,l)},r]}function sD(e){const{canvas:t,group:n}=e;return(t==null?void 0:t.document)||(n==null?void 0:n.ownerDocument)||mv("Cannot find library document")}var lD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function UG(e,t,n){const[r]=Ju("coordinate",n),{innerHeight:i,innerWidth:s,insetLeft:l,insetTop:c,insetRight:h,insetBottom:p}=e,{coordinates:v=[]}=t,y=ZG(v),b=y[0].type==="cartesian3D",T=Object.assign(Object.assign({},e),{x:l,y:c,width:s-l-h,height:i-p-c,transformations:y.flatMap(r)});return b?new L_.Coordinate3D(T):new L_.Coordinate(T)}function uD(e,t){const{coordinate:n={}}=e,r=lD(e,["coordinate"]),{type:i,transform:s=[]}=n,l=lD(n,["type","transform"]);if(!i)return Object.assign(Object.assign({},r),{coordinates:s});const[,c]=Ju("coordinate",t),{transform:h=!1}=c(i).props||{};if(h)throw new Error(`Unknown coordinate: ${i}.`);return Object.assign(Object.assign({},r),{coordinates:[Object.assign({type:i},l),...s]})}function yv(e,t){return e.filter(n=>n.type===t)}function W_(e){return yv(e,"polar").length>0}function jG(e){return yv(e,"helix").length>0}function Cb(e){return yv(e,"transpose").length%2===1}function VG(e){return yv(e,"parallel").length>0}function cD(e){return yv(e,"theta").length>0}function HG(e){return yv(e,"reflect").length>0}function z2(e){return yv(e,"radial").length>0}function WG(e){return yv(e,"radar").length>0}function GG(e){return yv(e,"reflectY").length>0}function ZG(e){return e.find(t=>t.type==="cartesian"||t.type==="cartesian3D")?e:[...e,{type:"cartesian"}]}function Ms(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var XG=Ms("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),YG=Ms("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),$G=Ms("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),qG=Ms("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),KG=Ms("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),QG=Ms("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),JG=Ms("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),eZ=Ms("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),tZ=Ms("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),nZ=Ms("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),rZ=Ms("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function mT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function YM(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ob(){}var G_=.7,Mb=1/G_,Rb="\\s*([+-]?\\d+)\\s*",U2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iZ=/^#([0-9a-f]{3,8})$/,oZ=new RegExp("^rgb\\(".concat(Rb,",").concat(Rb,",").concat(Rb,"\\)$")),aZ=new RegExp("^rgb\\(".concat(lm,",").concat(lm,",").concat(lm,"\\)$")),sZ=new RegExp("^rgba\\(".concat(Rb,",").concat(Rb,",").concat(Rb,",").concat(U2,"\\)$")),lZ=new RegExp("^rgba\\(".concat(lm,",").concat(lm,",").concat(lm,",").concat(U2,"\\)$")),uZ=new RegExp("^hsl\\(".concat(U2,",").concat(lm,",").concat(lm,"\\)$")),cZ=new RegExp("^hsla\\(".concat(U2,",").concat(lm,",").concat(lm,",").concat(U2,"\\)$")),fD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mT(Ob,$M,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:hD,formatHex:hD,formatHex8:fZ,formatHsl:hZ,formatRgb:dD,toString:dD});function hD(){return this.rgb().formatHex()}function fZ(){return this.rgb().formatHex8()}function hZ(){return _D(this).formatHsl()}function dD(){return this.rgb().formatRgb()}function $M(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pD(t):n===3?new yd(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?gT(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?gT(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oZ.exec(e))?new yd(t[1],t[2],t[3],1):(t=aZ.exec(e))?new yd(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sZ.exec(e))?gT(t[1],t[2],t[3],t[4]):(t=lZ.exec(e))?gT(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uZ.exec(e))?yD(t[1],t[2]/100,t[3]/100,1):(t=cZ.exec(e))?yD(t[1],t[2]/100,t[3]/100,t[4]):fD.hasOwnProperty(e)?pD(fD[e]):e==="transparent"?new yd(NaN,NaN,NaN,0):null}function pD(e){return new yd(e>>16&255,e>>8&255,e&255,1)}function gT(e,t,n,r){return r<=0&&(e=t=n=NaN),new yd(e,t,n,r)}function vD(e){return e instanceof Ob||(e=$M(e)),e?(e=e.rgb(),new yd(e.r,e.g,e.b,e.opacity)):new yd}function j2(e,t,n,r){return arguments.length===1?vD(e):new yd(e,t,n,r==null?1:r)}function yd(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}mT(yd,j2,YM(Ob,{brighter:function(t){return t=t==null?Mb:Math.pow(Mb,t),new yd(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?G_:Math.pow(G_,t),new yd(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new yd(Z_(this.r),Z_(this.g),Z_(this.b),yT(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mD,formatHex:mD,formatHex8:dZ,formatRgb:gD,toString:gD}));function mD(){return"#".concat(X_(this.r)).concat(X_(this.g)).concat(X_(this.b))}function dZ(){return"#".concat(X_(this.r)).concat(X_(this.g)).concat(X_(this.b)).concat(X_((isNaN(this.opacity)?1:this.opacity)*255))}function gD(){var e=yT(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(Z_(this.r),", ").concat(Z_(this.g),", ").concat(Z_(this.b)).concat(e===1?")":", ".concat(e,")"))}function yT(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Z_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function X_(e){return e=Z_(e),(e<16?"0":"")+e.toString(16)}function yD(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _v(e,t,n,r)}function _D(e){if(e instanceof _v)return new _v(e.h,e.s,e.l,e.opacity);if(e instanceof Ob||(e=$M(e)),!e)return new _v;if(e instanceof _v)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,c=s-i,h=(s+i)/2;return c?(t===s?l=(n-r)/c+(n<r)*6:n===s?l=(r-t)/c+2:l=(t-n)/c+4,c/=h<.5?s+i:2-s-i,l*=60):c=h>0&&h<1?0:l,new _v(l,c,h,e.opacity)}function pZ(e,t,n,r){return arguments.length===1?_D(e):new _v(e,t,n,r==null?1:r)}function _v(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mT(_v,pZ,YM(Ob,{brighter:function(t){return t=t==null?Mb:Math.pow(Mb,t),new _v(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?G_:Math.pow(G_,t),new _v(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new yd(qM(t>=240?t-240:t+120,s,i),qM(t,s,i),qM(t<120?t+240:t-120,s,i),this.opacity)},clamp:function(){return new _v(bD(this.h),_T(this.s),_T(this.l),yT(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=yT(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(bD(this.h),", ").concat(_T(this.s)*100,"%, ").concat(_T(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function bD(e){return e=(e||0)%360,e<0?e+360:e}function _T(e){return Math.max(0,Math.min(1,e||0))}function qM(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function xD(e,t,n,r,i){var s=e*e,l=s*e;return((1-3*e+3*s-l)*t+(4-6*s+3*l)*n+(1+3*e+3*s-3*l)*r+l*i)/6}function vZ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],l=r>0?e[r-1]:2*i-s,c=r<t-1?e[r+2]:2*s-i;return xD((n-r/t)*t,l,i,s,c)}}function mZ(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],l=e[(r+1)%t],c=e[(r+2)%t];return xD((n-r/t)*t,i,s,l,c)}}var KM=function(e){return function(){return e}};function ED(e,t){return function(n){return e+n*t}}function gZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yZ(e,t){var n=t-e;return n?ED(e,n>180||n<-180?n-360*Math.round(n/360):n):KM(isNaN(e)?t:e)}function _Z(e){return(e=+e)==1?Pb:function(t,n){return n-t?gZ(t,n,e):KM(isNaN(t)?n:t)}}function Pb(e,t){var n=t-e;return n?ED(e,n):KM(isNaN(e)?t:e)}var y0e=function e(t){var n=_Z(t);function r(i,s){var l=n((i=j2(i)).r,(s=j2(s)).r),c=n(i.g,s.g),h=n(i.b,s.b),p=Pb(i.opacity,s.opacity);return function(v){return i.r=l(v),i.g=c(v),i.b=h(v),i.opacity=p(v),i+""}}return r.gamma=e,r}(1);function SD(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),l,c;for(l=0;l<n;++l)c=j2(t[l]),r[l]=c.r||0,i[l]=c.g||0,s[l]=c.b||0;return r=e(r),i=e(i),s=e(s),c.opacity=1,function(h){return c.r=r(h),c.g=i(h),c.b=s(h),c+""}}}var bZ=SD(vZ),_0e=SD(mZ),Bu=e=>bZ(e[e.length-1]),wD=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ms),xZ=Bu(wD),TD=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ms),EZ=Bu(TD),AD=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ms),SZ=Bu(AD),CD=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ms),wZ=Bu(CD),OD=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ms),TZ=Bu(OD),MD=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ms),AZ=Bu(MD),RD=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ms),CZ=Bu(RD),PD=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ms),OZ=Bu(PD),ID=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ms),MZ=Bu(ID),LD=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ms),RZ=Bu(LD),DD=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ms),PZ=Bu(DD),ND=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ms),IZ=Bu(ND),FD=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ms),LZ=Bu(FD),BD=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ms),DZ=Bu(BD),kD=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ms),NZ=Bu(kD),zD=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ms),FZ=Bu(zD),UD=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ms),BZ=Bu(UD),jD=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ms),kZ=Bu(jD),VD=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ms),zZ=Bu(VD),HD=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ms),UZ=Bu(HD),WD=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ms),jZ=Bu(WD),GD=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ms),VZ=Bu(GD),ZD=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ms),HZ=Bu(ZD),XD=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ms),WZ=Bu(XD),YD=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ms),GZ=Bu(YD),$D=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ms),ZZ=Bu($D),qD=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ms),XZ=Bu(qD);function YZ(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var $Z=Math.PI/180,qZ=180/Math.PI,KD=-.14861,QM=1.78277,JM=-.29227,bT=-.90649,V2=1.97294,QD=V2*bT,JD=V2*QM,e6=QM*JM-bT*KD;function KZ(e){if(e instanceof Y_)return new Y_(e.h,e.s,e.l,e.opacity);e instanceof yd||(e=vD(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(e6*r+QD*t-JD*n)/(e6+QD-JD),s=r-i,l=(V2*(n-i)-JM*s)/bT,c=Math.sqrt(l*l+s*s)/(V2*i*(1-i)),h=c?Math.atan2(l,s)*qZ-120:NaN;return new Y_(h<0?h+360:h,c,i,e.opacity)}function um(e,t,n,r){return arguments.length===1?KZ(e):new Y_(e,t,n,r==null?1:r)}function Y_(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mT(Y_,um,YM(Ob,{brighter:function(t){return t=t==null?Mb:Math.pow(Mb,t),new Y_(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?G_:Math.pow(G_,t),new Y_(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*$Z,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(t),s=Math.sin(t);return new yd(255*(n+r*(KD*i+QM*s)),255*(n+r*(JM*i+bT*s)),255*(n+r*(V2*i)),this.opacity)}}));function t6(e){return function t(n){n=+n;function r(i,s){var l=e((i=um(i)).h,(s=um(s)).h),c=Pb(i.s,s.s),h=Pb(i.l,s.l),p=Pb(i.opacity,s.opacity);return function(v){return i.h=l(v),i.s=c(v),i.l=h(Math.pow(v,n)),i.opacity=p(v),i+""}}return r.gamma=t,r}(1)}var b0e=t6(yZ),eR=t6(Pb),QZ=eR(um(300,.5,0),um(-240,.5,1)),JZ=eR(um(-100,.75,.35),um(80,1.5,.8)),eX=eR(um(260,.75,.35),um(80,1.5,.8)),xT=um();function tX(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return xT.h=360*e-100,xT.s=1.5-1.5*t,xT.l=.8-.9*t,xT+""}var ET=j2(),nX=Math.PI/3,rX=Math.PI*2/3;function iX(e){var t;return e=(.5-e)*Math.PI,ET.r=255*(t=Math.sin(e))*t,ET.g=255*(t=Math.sin(e+nX))*t,ET.b=255*(t=Math.sin(e+rX))*t,ET+""}function oX(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function ST(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var aX=ST(Ms("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),sX=ST(Ms("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),lX=ST(Ms("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),uX=ST(Ms("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function cX(e,t,n,r,i,s){const{guide:l={}}=n,c=_X(e,t,n);if(typeof c!="string")return n;const h=bX(c,e,t,n),p=mX(c,h,n);return Object.assign(Object.assign(Object.assign({},n),EX(c,e,t,n,r)),{domain:p,range:xX(c,e,t,n,p,i,s),expectedDomain:h,guide:l,name:e,type:c})}function fX(e,t){const n={};for(const r of e){const{values:i,name:s}=r,l=t[s];for(const c of i){const{name:h,value:p}=c;n[h]=p.map(v=>l.map(v))}}return n}function hX(e,t){var n;const{components:r=[]}=t,i=["scale","encode","axis","legend","data","transform"],s=Array.from(new Set(e.flatMap(c=>c.channels.map(h=>h.scale)))),l=new Map(s.map(c=>[c.name,c]));for(const c of r){const h=vX(c);for(const p of h){const v=l.get(p),y=((n=c.scale)===null||n===void 0?void 0:n[p])||{},{independent:b=!1}=y;if(v&&!b){const{guide:T}=v,M=typeof T=="boolean"?{}:T;v.guide=ui({},M,c),Object.assign(v,y)}else{const T=Object.assign(Object.assign({},y),{expectedDomain:y.domain,name:p,guide:wM(c,i)});s.push(T)}}}return s}function dX(e){if(!e||!Array.isArray(e))return[rg,rg];let t,n;return[s=>{var l;t=s.map.bind(s),n=(l=s.invert)===null||l===void 0?void 0:l.bind(s);const c=e.filter(([b])=>typeof b=="function"),h=e.filter(([b])=>typeof b!="function"),p=new Map(h);if(s.map=b=>{for(const[T,M]of c)if(T(b))return M;return p.has(b)?p.get(b):t(b)},!n)return s;const v=new Map(h.map(([b,T])=>[T,b])),y=new Map(c.map(([b,T])=>[T,b]));return s.invert=b=>y.has(b)?b:v.has(b)?v.get(b):n(b),s},s=>(t!==null&&(s.map=t),n!==null&&(s.invert=n),s)]}function n6(e,t){const n=Object.keys(e);for(const r of Object.values(t)){const{name:i}=r.getOptions();if(!(i in e))e[i]=r;else{const s=n.filter(h=>h.startsWith(i)).map(h=>+(h.replace(i,"")||0)),l=yl(s)+1,c=`${i}${l}`;e[c]=r,r.getOptions().key=c}}return e}function r6(e,t){const[n]=Ju("scale",t),{relations:r}=e,[i]=dX(r),s=n(e);return i(s)}function pX(e){const t=e.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));i6(t,"x"),i6(t,"y")}function vX(e){const{channels:t=[],type:n,scale:r={}}=e,i=["shape","color","opacity","size"];return t.length!==0?t:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(s=>i.includes(s)):[]}function i6(e,t){const n=e.filter(({name:s,facet:l=!0})=>l&&s===t),r=n.flatMap(s=>s.domain),i=n.every(o6)?cg(r):n.every(a6)?Array.from(new Set(r)):null;if(i!==null)for(const s of n)s.domain=i}function mX(e,t,n){const{ratio:r}=n;return r==null?t:o6({type:e})?gX(t,r,e):a6({type:e})?yX(t,r):t}function gX(e,t,n){const r=e.map(Number),i=new vd({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*t]});return n==="time"?e.map(s=>new Date(i.map(s))):e.map(s=>i.map(s))}function yX(e,t){const n=Math.round(e.length*t);return e.slice(0,n)}function o6(e){const{type:t}=e;return typeof t!="string"?!1:["linear","log","pow","time"].includes(t)}function a6(e){const{type:t}=e;return typeof t!="string"?!1:["band","point","ordinal"].includes(t)}function _X(e,t,n){const{type:r,domain:i,range:s,quantitative:l,ordinal:c}=n;return r!==void 0?r:DX(t)?"identity":typeof s=="string"?"linear":(i||s||[]).length>2?tR(e,c):i!==void 0?c6([i])?tR(e,c):f6(t)?"time":l6(e,s,l):c6(t)?tR(e,c):f6(t)?"time":l6(e,s,l)}function bX(e,t,n,r){const{domain:i}=r;if(i!==void 0)return i;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return u6(MX(n,r),r);case"band":case"ordinal":case"point":return RX(n);case"quantile":return PX(n);case"sequential":return u6(IX(n),r);default:return[]}}function xX(e,t,n,r,i,s,l){const{range:c}=r;if(typeof c=="string")return SX(c);if(c!==void 0)return c;const{rangeMin:h,rangeMax:p}=r;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":{const v=s6(n,r,i,s,l),[y,b]=LX(t,v);return[h!=null?h:y,p!=null?p:b]}case"band":case"point":{const v=t==="size"?5:0,y=t==="size"?10:1;return[h!=null?h:v,p!=null?p:y]}case"ordinal":return s6(n,r,i,s,l);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function EX(e,t,n,r,i){switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":return AX(i,r);case"band":case"point":return CX(e,t,i,r);case"sequential":return TX(r);default:return r}}function s6(e,t,n,r,i){const[s]=Ju("palette",i),{category10:l,category20:c}=r,h=J3(e.flat()).length<=l.length?l:c,{palette:p=h,offset:v}=t;if(Array.isArray(p))return p;try{return s({type:p})}catch(y){const b=wX(p,n,v);if(b)return b;throw new Error(`Unknown Component: ${p} `)}}function SX(e){return e.split("-")}function wX(e,t,n=r=>r){if(!e)return null;const r=Jv(e),i=G[`scheme${r}`],s=G[`interpolate${r}`];if(!i&&!s)return null;if(i){if(!i.some(Array.isArray))return i;const l=i[t.length];if(l)return l}return t.map((l,c)=>s(n(c/t.length)))}function TX(e){const{palette:t="ylGnBu",offset:n}=e,r=Jv(t),i=G[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?s=>i(n(s)):i}}function AX(e,t){const{interpolate:n=w2,nice:r=!1,tickCount:i=5}=t;return Object.assign(Object.assign({},t),{interpolate:n,nice:r,tickCount:i})}function CX(e,t,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=OX(e,t,n),{paddingInner:s=i,paddingOuter:l=i}=r;return Object.assign(Object.assign({},r),{paddingInner:s,paddingOuter:l,padding:i,unknown:NaN})}function OX(e,t,n){return t==="enterDelay"||t==="enterDuration"||t==="size"?0:e==="band"?cD(n)?0:.1:e==="point"?.5:0}function tR(e,t){return t||(NX(e)?"point":"ordinal")}function l6(e,t,n){return n||(e!=="color"||t?"linear":"sequential")}function u6(e,t){if(e.length===0)return e;const{domainMin:n,domainMax:r}=t,[i,s]=e;return[n!=null?n:i,r!=null?r:s]}function MX(e,t){const{zero:n=!1}=t;let r=1/0,i=-1/0;for(const s of e)for(const l of s)iu(l)&&(r=Math.min(r,+l),i=Math.max(i,+l));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function RX(e){return Array.from(new Set(e.flat()))}function PX(e){return e.flat().sort()}function IX(e){let t=1/0,n=-1/0;for(const r of e)for(const i of r)iu(i)&&(t=Math.min(t,+i),n=Math.max(n,+i));return t===1/0?[]:[t<0?-n:t,n]}function LX(e,t){return e==="enterDelay"?[0,1e3]:e=="enterDuration"?[300,1e3]:e.startsWith("y")||e.startsWith("position")?[1,0]:e==="color"?[Q3(t),ww(t)]:e==="opacity"?[0,1]:e==="size"?[1,10]:[0,1]}function c6(e){return nR(e,t=>{const n=typeof t;return n==="string"||n==="boolean"})}function f6(e){return nR(e,t=>t instanceof Date)}function DX(e){return nR(e,M_)}function nR(e,t){for(const n of e)if(n.some(t))return!0;return!1}function NX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e.startsWith("size")}function FX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e==="enterDelay"||e==="enterDuration"||e==="updateDelay"||e==="updateDuration"||e==="exitDelay"||e==="exitDuration"}function BX(e){if(!e||!e.type)return!1;if(typeof e.type=="function")return!0;const{type:t,domain:n,range:r,interpolator:i}=e,s=n&&n.length>0,l=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(t)&&s&&l||["sequential"].includes(t)&&s&&(l||i)||["constant","identity"].includes(t)&&l)}const kX={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},zX={threshold:"threshold",quantize:"quantize",quantile:"quantile"},UX={ordinal:"ordinal",band:"band",point:"point"},jX={constant:"constant"};var by=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function VX(e,t,n){const{coordinates:r=[],title:i}=t,[,s]=Ju("component",n),l=e.filter(({guide:v})=>v!==null),c=[],h=QX(t,e,n);if(c.push(...h),i){const{props:v}=s("title"),{defaultPosition:y,defaultOrientation:b,defaultOrder:T,defaultSize:M,defaultCrossPadding:R}=v,L=typeof i=="string"?{title:i}:i;c.push(Object.assign({type:"title",position:y,orientation:b,order:T,crossPadding:R[0],defaultSize:M},L))}return XX(l,r).forEach(([v,y])=>{const{props:b}=s(v),{defaultPosition:T,defaultPlane:M="xy",defaultOrientation:R,defaultSize:L,defaultOrder:N,defaultLength:z,defaultPadding:H=[0,0],defaultCrossPadding:X=[0,0]}=b,Y=ui({},...y),{guide:ne,field:ve}=Y,Ee=Array.isArray(ne)?ne:[ne];for(const Ie of Ee){const[Ye,$e]=qX(v,T,R,Ie,y,l,r);if(!Ye&&!$e)continue;const St=Ye==="left"||Ye==="right",Qe=St?H[1]:H[0],lt=St?X[1]:X[0],{size:ht,order:bt=N,length:Ht=z,padding:Ot=Qe,crossPadding:kt=lt}=Ie;c.push(Object.assign(Object.assign({title:ve},Ie),{defaultSize:L,length:Ht,position:Ye,plane:M,orientation:$e,padding:Ot,order:bt,crossPadding:kt,size:ht,type:v,scales:y}))}}),c}function h6(e,t,n,r,i){const[s]=Ju("component",r),{scaleInstances:l,scale:c,bbox:h}=e,p=by(e,["scaleInstances","scale","bbox"]),v={bbox:h,library:r};return s(p)({coordinate:t,library:r,markState:i,scales:l,theme:n,value:v,scale:c})}function HX(e){return e.map(t=>{const n=ui(t,t.style);return delete n.style,n})}function x0e(e){return e.flatMap(t=>t.type=="group"?t.children:t)}function d6(e,t){const n=["left","right","bottom","top"];return tb(e,({type:s,position:l,group:c})=>n.includes(l)?c===void 0?s.startsWith("legend")?`legend-${l}`:Symbol("independent"):c==="independent"?Symbol("independent"):c:Symbol("independent")).flatMap(([,s])=>{if(s.length===1)return s[0];if(t!==void 0){const v=s.filter(R=>R.length!==void 0).map(R=>R.length),y=Sp(v);if(y>t)return s.forEach(R=>R.group=Symbol("independent")),s;const b=t-y,T=s.length-v.length,M=b/T;s.forEach(R=>{R.length===void 0&&(R.length=M)})}const l=yl(s,v=>v.size),c=yl(s,v=>v.order),h=yl(s,v=>v.crossPadding),p=s[0].position;return{type:"group",size:l,order:c,position:p,children:s,crossPadding:h}})}function WX(e,t){const n=["shape","size","color","opacity"],r=(b,T)=>b==="constant"&&T==="size",i=e.filter(({type:b,name:T})=>typeof b=="string"&&n.includes(T)&&!r(b,T)),s=i.filter(({type:b})=>b==="constant"),l=i.filter(({type:b})=>b!=="constant"),h=tb(l,b=>b.field?b.field:Symbol("independent")).map(([b,T])=>[b,[...T,...s]]).filter(([,b])=>b.some(T=>T.type!=="constant")),p=new Map(h);if(p.size===0)return[];const v=b=>b.sort(([T],[M])=>T.localeCompare(M));return Array.from(p).map(([,b])=>{const M=Cw(b).sort((R,L)=>L.length-R.length).map(R=>({combination:R,option:R.map(L=>[L.name,GX(L)])}));for(const{option:R,combination:L}of M)if(!R.every(N=>N[1]==="constant")&&R.every(N=>N[1]==="discrete"||N[1]==="constant"))return["legendCategory",L];for(const[R,L]of y2)for(const{option:N,combination:z}of M)if(L.some(H=>Mw(v(H),v(N))))return[R,z];return null}).filter(iu)}function GX(e){const{type:t}=e;return typeof t!="string"?null:t in kX?"continuous":t in UX?"discrete":t in zX?"distribution":t in jX?"constant":null}function ZX(e,t){return e.map(n=>{const{name:r}=n;if(jG(t)||cD(t)||Cb(t)&&(W_(t)||z2(t)))return null;if(r.startsWith("x"))return W_(t)?["axisArc",[n]]:z2(t)?["axisLinear",[n]]:[Cb(t)?"axisY":"axisX",[n]];if(r.startsWith("y"))return W_(t)?["axisLinear",[n]]:z2(t)?["axisArc",[n]]:[Cb(t)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(WG(t))return["axisRadar",[n]];if(!W_(t))return["axisY",[n]]}return null}).filter(iu)}function XX(e,t){const n=e.filter(r=>BX(r));return[...WX(n,t),...ZX(n,t)]}function rR(e){const t=yv(e,"polar");if(t.length){const r=t[t.length-1],{startAngle:i,endAngle:s}=nm(r);return[i,s]}const n=yv(e,"radial");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:s}=Pw(r);return[i,s]}return[-Math.PI/2,Math.PI/2*3]}function YX(e){const t=/position(\d*)/g.exec(e);return t?+t[1]:null}function $X(e,t,n,r,i){const{name:s}=n[0];if(e==="axisRadar"){const l=r.filter(y=>y.name.startsWith("position")),c=YX(s);if(s===l.slice(-1)[0].name||c===null)return[null,null];const[h,p]=rR(i);return["center",(p-h)/(l.length-1)*c+h]}if(e==="axisY"&&VG(i))return Cb(i)?["center","horizontal"]:["center","vertical"];if(e==="axisLinear"){const[l]=rR(i);return["center",l]}return e==="axisArc"?t[0]==="inner"?["inner",null]:["outer",null]:W_(i)?["center",null]:z2(i)?["center",null]:e==="axisX"&&HG(i)||e==="axisX"&&GG(i)?["top",null]:t}function qX(e,t,n,r,i,s,l){const[c]=rR(l),h=[r.position||t,c!=null?c:n];return typeof e=="string"&&e.startsWith("axis")?$X(e,h,i,s,l):typeof e=="string"&&e.startsWith("legend")&&W_(l)&&r.position==="center"?["center","vertical"]:h}function KX(e,t,n=[]){return e==="x"?Cb(n)?`${t}Y`:`${t}X`:e==="y"?Cb(n)?`${t}X`:`${t}Y`:null}function QX(e,t,n){const[,r]=Ju("component",n),{coordinates:i}=e;function s(l,c,h,p){const v=KX(c,l,i);if(!p||!v)return;const{props:y}=r(v),{defaultPosition:b,defaultSize:T,defaultOrder:M,defaultCrossPadding:[R]}=y;return Object.assign(Object.assign({position:b,defaultSize:T,order:M,type:v,crossPadding:R},p),{scales:[h]})}return t.filter(l=>l.slider||l.scrollbar).flatMap(l=>{const{slider:c,scrollbar:h,name:p}=l;return[s("slider",p,l,c),s("scrollbar",p,l,h)]}).filter(l=>!!l)}function p6(e,t,n,r,i,s){const{type:l}=e;if(!["left","right","bottom","top"].includes(r)||typeof l!="string")return;const h=l;return(()=>h.startsWith("axis")?rY:h.startsWith("group")?JX:h.startsWith("legendContinuous")?iY:h==="legendCategory"?oY:h.startsWith("slider")?nY:h==="title"?tY:h.startsWith("scrollbar")?eY:()=>{})()(e,t,n,r,i,s)}function JX(e,t,n,r,i,s){const{children:l}=e,c=yl(l,p=>p.crossPadding);l.forEach(p=>p.crossPadding=c),l.forEach(p=>p6(p,t,n,r,i,s));const h=yl(l,p=>p.size);e.size=h,l.forEach(p=>p.size=h)}function eY(e,t,n,r,i,s){const{trackSize:l=6}=ui({},i.scrollbar,e);e.size=l}function tY(e,t,n,r,i,s){const l=ui({},i.title,e),{title:c,subtitle:h,spacing:p=0}=l,v=by(l,["title","subtitle","spacing"]);if(c){const y=xo(v,"title"),b=CT(c,y);e.size=b.height}if(h){const y=xo(v,"subtitle"),b=CT(h,y);e.size+=p+b.height}}function nY(e,t,n,r,i,s){const l=()=>{const{slider:v}=i;return ui({},v,e)},{trackSize:c,handleIconSize:h}=l(),p=Math.max(c,h*2.4);e.size=p}function rY(e,t,n,r,i,s){e.transform=e.transform||[{type:"hide"}];const l=r==="left"||r==="right",c=v6(e,r,i),{tickLength:h=0,labelSpacing:p=0,titleSpacing:v=0,labelAutoRotate:y}=c,b=by(c,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),T=wT(e,s),M=TT(b,T),R=h+p;if(M&&M.length){const N=yl(M,H=>H.width),z=yl(M,H=>H.height);if(l)e.size=N+R;else{const{tickFilter:H,labelTransform:X}=e;lY(T,M,t,n,H)&&!X&&y!==!1&&y!==null?(e.labelTransform="rotate(90)",e.size=N+R):e.size=z+R}}else e.size=h;const L=AT(b);L&&(l?e.size+=v+L.width:e.size+=v+L.height)}function iY(e,t,n,r,i,s){const c=(()=>{const{legendContinuous:X}=i;return ui({},X,e)})(),{labelSpacing:h=0,titleSpacing:p=0}=c,v=by(c,["labelSpacing","titleSpacing"]),y=r==="left"||r==="right",b=xo(v,"ribbon"),{size:T}=b,M=xo(v,"handleIcon"),{size:R}=M,L=Math.max(T,R*2.4);e.size=L;const N=wT(e,s),z=TT(v,N);if(z){const X=y?"width":"height",Y=yl(z,ne=>ne[X]);e.size+=Y+h}const H=AT(v);H&&(y?e.size=Math.max(e.size,H.width):e.size+=p+H.height)}function oY(e,t,n,r,i,s){const c=(()=>{const{legendCategory:lt}=i,{title:ht}=e,[bt,Ht]=Array.isArray(ht)?[ht,void 0]:[void 0,ht];return ui({title:bt},lt,Object.assign(Object.assign({},e),{title:Ht}))})(),{itemSpacing:h,itemMarkerSize:p,titleSpacing:v,rowPadding:y,colPadding:b,maxCols:T=1/0,maxRows:M=1/0}=c,R=by(c,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:L,length:N}=e,z=lt=>Math.min(lt,M),H=lt=>Math.min(lt,T),X=r==="left"||r==="right",Y=N===void 0?t+(X?0:n[0]+n[1]):N,ne=AT(R),ve=wT(e,s),Ee=TT(R,ve,"itemLabel"),Ie=Math.max(Ee[0].height,p)+y,Ye=(lt,ht=0)=>p+lt+h[0]+ht;X?(()=>{let lt=-1/0,ht=0,bt=1,Ht=0,Ot=-1/0,kt=-1/0;const Mn=ne?ne.height:0,Wn=Y-Mn;for(const{width:cr}of Ee){const ar=Ye(cr,b);lt=Math.max(lt,ar),ht+Ie>Wn?(bt++,Ot=Math.max(Ot,Ht),kt=Math.max(kt,ht),Ht=1,ht=Ie):(ht+=Ie,Ht++)}bt<=1&&(Ot=Ht,kt=ht),e.size=lt*H(bt),e.length=kt+Mn,ui(e,{cols:H(bt),gridRow:Ot})})():typeof L=="number"?(()=>{const lt=Math.ceil(Ee.length/L),ht=yl(Ee,bt=>Ye(bt.width))*L;e.size=Ie*z(lt)-y,e.length=Math.min(ht,Y)})():(()=>{let lt=1,ht=0,bt=-1/0;for(const{width:Ht}of Ee){const Ot=Ye(Ht,b);ht+Ot>Y?(bt=Math.max(bt,ht),ht=Ot,lt++):ht+=Ot}lt===1&&(bt=ht),e.size=Ie*z(lt)-y,e.length=bt})(),ne&&(X?e.size=Math.max(e.size,ne.width):e.size+=v+ne.height)}function wT(e,t){const[n]=Ju("scale",t),{scales:r,tickCount:i,tickMethod:s}=e,l=r.find(c=>c.type!=="constant"&&c.type!=="identity");return i!==void 0&&(l.tickCount=i),s!==void 0&&(l.tickMethod=s),n(l)}function TT(e,t,n="label"){const{labelFormatter:r,tickFilter:i,label:s=!0}=e,l=by(e,["labelFormatter","tickFilter","label"]);if(!s)return null;const c=aY(t,r,i),h=xo(l,n),p=c.map((b,T)=>Object.fromEntries(Object.entries(h).map(([M,R])=>[M,typeof R=="function"?R(b,T):R]))),v=c.map((b,T)=>{const M=p[T];return CT(b,M)});if(!p.some(b=>b.transform)){const b=c.map((T,M)=>M);e.indexBBox=new Map(b.map(T=>[T,[c[T],v[T]]]))}return v}function AT(e){const t=p=>p===!1||p===null,{title:n}=e,r=by(e,["title"]);if(t(n)||n===void 0)return null;const i=xo(r,"title"),{direction:s,transform:l}=i,c=Array.isArray(n)?n.join(","):n;return typeof c!="string"?null:CT(c,Object.assign(Object.assign({},i),{transform:l||(s==="vertical"?"rotate(-90)":"")}))}function v6(e,t,n){const{title:r}=e,[i,s]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:l,[`axis${h2(t)}`]:c}=n;return ui({title:i},l,c,Object.assign(Object.assign({},e),{title:s}))}function m6(e,t){const n=e.getTicks?e.getTicks():e.getOptions().domain;return t?n.filter(t):n}function aY(e,t,n){const i=m6(e,n).map(l=>typeof l=="number"?fb(l):l),s=t?typeof t=="string"?em(t):t:e.getFormatter?e.getFormatter():l=>`${l}`;return i.map(s)}function sY(e,t){return e.getBandWidth?e.getBandWidth(t)/2:0}function lY(e,t,n,r,i){if(Sp(t,T=>T.width)>n)return!0;const l=e.clone();l.update({range:[0,n]});const c=m6(e,i),h=c.map(T=>l.map(T)+sY(l,T)),p=c.map((T,M)=>M),v=-r[0],y=n+r[1],b=(T,M)=>{const{width:R}=M;return[T-R/2,T+R/2]};for(let T=0;T<p.length;T++){const M=h[T],[R,L]=b(M,t[T]);if(R<v||L>y)return!0;const N=h[T+1];if(N){const[z]=b(N,t[T+1]);if(L>z)return!0}}return!1}function CT(e,t){const n=uY(e),{filter:r}=t,i=by(t,["filter"]);return n.attr(Object.assign(Object.assign({},i),{visibility:"none"})),n.getBBox()}function uY(e){return e instanceof Fl?e:new Vs({style:{text:`${e}`}})}function Xp(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function cY(e){const t=e.find(({type:n})=>n==="axisZ");if(t){const n=e.find(({type:i})=>i==="axisX");n.plane="xy";const r=e.find(({type:i})=>i==="axisY");r.plane="xy",t.plane="yz",t.origin=[n.bbox.x,n.bbox.y,0],t.eulerAngles=[0,-90,0],t.bbox.x=n.bbox.x,t.bbox.y=n.bbox.y,e.push(Object.assign(Object.assign({},n),{plane:"xz",showLabel:!1,showTitle:!1,origin:[n.bbox.x,n.bbox.y,0],eulerAngles:[-90,0,0]})),e.push(Object.assign(Object.assign({},r),{plane:"yz",showLabel:!1,showTitle:!1,origin:[r.bbox.x+r.bbox.width,r.bbox.y,0],eulerAngles:[0,-90,0]})),e.push(Object.assign(Object.assign({},t),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]}))}}function fY(e,t,n,r){var i,s;const{width:l,height:c,depth:h,x:p=0,y:v=0,z:y=0,inset:b=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:T=b,insetTop:M=b,insetBottom:R=b,insetRight:L=b,margin:N=(s=n.margin)!==null&&s!==void 0?s:0,marginLeft:z=N,marginBottom:H=N,marginTop:X=N,marginRight:Y=N,padding:ne=n.padding,paddingBottom:ve=ne,paddingLeft:Ee=ne,paddingRight:Ie=ne,paddingTop:Ye=ne}=dY(e,t,n,r),$e=1/4,St=(uo,Ko,ga,Pa,Da)=>{const{marks:us}=t;if(us.length===0)return[Pa,Da];if(uo-Pa-Da-uo*$e>0)return[Pa,Da];const Ts=uo*(1-$e);return[Ko==="auto"?Ts*Pa/(Pa+Da):Pa,ga==="auto"?Ts*Da/(Pa+Da):Da]},Qe=uo=>uo==="auto"?20:uo!=null?uo:20,lt=Qe(Ye),ht=Qe(ve),bt=g6(e,c-lt-ht,[lt+X,ht+H],["left","right"],t,n,r),{paddingLeft:Ht,paddingRight:Ot}=bt,kt=l-z-Y,[Mn,Wn]=St(kt,Ee,Ie,Ht,Ot),cr=kt-Mn-Wn,ar=g6(e,cr,[Mn+z,Wn+Y],["bottom","top"],t,n,r),{paddingTop:Yr,paddingBottom:Pi}=ar,so=c-H-X,[mi,ti]=St(so,ve,Ye,Pi,Yr),Do=so-mi-ti;return{width:l,height:c,depth:h,insetLeft:T,insetTop:M,insetBottom:R,insetRight:L,innerWidth:cr,innerHeight:Do,paddingLeft:Mn,paddingRight:Wn,paddingTop:ti,paddingBottom:mi,marginLeft:z,marginBottom:H,marginTop:X,marginRight:Y,x:p,y:v,z:y}}function hY(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:c=r,margin:h=16,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:T=0,insetLeft:M=T,insetRight:R=T,insetTop:L=T,insetBottom:N=T}=e,z=Y=>Y==="auto"?20:Y,H=n-z(i)-z(s)-p-v-M-R,X=t-z(l)-z(c)-y-b-L-N;return{width:H,height:X}}function dY(e,t,n,r){const{coordinates:i}=t;if(!W_(i)&&!z2(i))return t;const s=e.filter(N=>typeof N.type=="string"&&N.type.startsWith("axis"));if(s.length===0)return t;const l=s.map(N=>{const z=N.type==="axisArc"?"arc":"linear";return v6(N,z,n)}),c=yl(l,N=>{var z;return(z=N.labelSpacing)!==null&&z!==void 0?z:0}),h=s.flatMap((N,z)=>{const H=l[z],X=wT(N,r);return TT(H,X)}).filter(iu),p=yl(h,N=>N.height)+c,v=s.flatMap((N,z)=>{const H=l[z];return AT(H)}).filter(N=>N!==null),y=v.length===0?0:yl(v,N=>N.height),{inset:b=p,insetLeft:T=b,insetBottom:M=b,insetTop:R=b+y,insetRight:L=b}=t;return Object.assign(Object.assign({},t),{insetLeft:T,insetBottom:M,insetTop:R,insetRight:L})}function g6(e,t,n,r,i,s,l){const c=Fu(e,M=>M.position),{padding:h=s.padding,paddingLeft:p=h,paddingRight:v=h,paddingBottom:y=h,paddingTop:b=h}=i,T={paddingBottom:y,paddingLeft:p,paddingTop:b,paddingRight:v};for(const M of r){const R=`padding${h2(PL(M))}`,L=c.get(M)||[],N=T[R],z=Ie=>{Ie.size===void 0&&(Ie.size=Ie.defaultSize)},H=Ie=>{Ie.type==="group"?(Ie.children.forEach(z),Ie.size=yl(Ie.children,Ye=>Ye.size)):Ie.size=Ie.defaultSize},X=Ie=>{Ie.size||(N!=="auto"?H(Ie):(p6(Ie,t,n,M,s,l),z(Ie)))},Y=Ie=>{Ie.type.startsWith("axis")&&Ie.labelAutoHide===void 0&&(Ie.labelAutoHide=!0)},ne=M==="bottom"||M==="top",ve=Xp(L,Ie=>Ie.order),Ee=L.filter(Ie=>Ie.type.startsWith("axis")&&Ie.order==ve);if(Ee.length&&(Ee[0].crossPadding=0),typeof N=="number")L.forEach(z),L.forEach(Y);else if(L.length===0)T[R]=0;else{const Ie=ne?t+n[0]+n[1]:t,Ye=d6(L,Ie);Ye.forEach(X);const $e=Ye.reduce((St,{size:Qe,crossPadding:lt=12})=>St+Qe+lt,0);T[R]=$e}}return T}function pY(e,t,n){const r=Fu(e,ne=>`${ne.plane||"xy"}-${ne.position}`),{paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:c,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:T,insetBottom:M,insetLeft:R,insetRight:L,insetTop:N,height:z,width:H,depth:X}=n,Y={xy:iR({width:H,height:z,paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:c,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:T,insetBottom:M,insetLeft:R,insetRight:L,insetTop:N}),yz:iR({width:X,height:z,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:X,innerHeight:z,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:iR({width:H,height:X,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:H,innerHeight:X,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[ne,ve]of r.entries()){const[Ee,Ie]=ne.split("-"),Ye=Y[Ee][Ie],[$e,St]=Tw(ve,Qe=>typeof Qe.type!="string"?!1:!!(Ie==="center"||Qe.type.startsWith("axis")&&["inner","outer"].includes(Ie)));$e.length&&vY($e,t,Ye,Ie),St.length&&wY(ve,t,Ye)}}function iR({width:e,height:t,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:h,marginRight:p,innerHeight:v,innerWidth:y,insetBottom:b,insetLeft:T,insetRight:M,insetTop:R}){const L=n+l,N=i+c,z=r+p,H=s+h,X=e-l-p,Y=[L+T,N+R,y-T-M,v-R-b,"center",null,null];return{top:[L,0,y,N,"vertical",!0,kc,l,X],right:[e-z,N,z,v,"horizontal",!1,kc],bottom:[L,t-H,y,H,"vertical",!1,kc,l,X],left:[0,N,L,v,"horizontal",!0,kc],"top-left":[L,0,y,N,"vertical",!0,kc],"top-right":[L,0,y,N,"vertical",!0,kc],"bottom-left":[L,t-H,y,H,"vertical",!1,kc],"bottom-right":[L,t-H,y,H,"vertical",!1,kc],center:Y,inner:Y,outer:Y}}function vY(e,t,n,r){const[i,s]=Tw(e,l=>!!(typeof l.type=="string"&&l.type.startsWith("axis")));mY(i,t,n,r),TY(s,t,n)}function mY(e,t,n,r){r==="center"?Dw(t)?SY(e,t,n,r):Bl(t)?_Y(e,t,n):N_(t)&&bY(e,t,n,e[0].orientation):r==="inner"?gY(e,t,n):r==="outer"&&yY(e,t,n)}function gY(e,t,n){const[r,i,,s]=n,[l,c]=t.getCenter(),[h]=hb(t),p=s/2,v=h*p,y=l-v,b=c-v;for(let T=0;T<e.length;T++){const M=e[T];M.bbox={x:r+y,y:i+b,width:v*2,height:v*2}}}function yY(e,t,n){const[r,i,s,l]=n;for(const c of e)c.bbox={x:r,y:i,width:s,height:l}}function _Y(e,t,n){const[r,i,s,l]=n;for(const c of e)c.bbox={x:r,y:i,width:s,height:l}}function bY(e,t,n,r){r==="horizontal"?EY(e,t,n):r==="vertical"&&xY(e,t,n)}function xY(e,t,n){const[r,i,,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===0).map(p=>p+r);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:y,y:i,width:b,height:s}}}function EY(e,t,n){const[r,i,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===1).map(p=>p+i);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:r,y,width:s,height:b}}}function SY(e,t,n,r){const[i,s,l,c]=n;for(const h of e)h.bbox={x:i,y:s,width:l,height:c},h.radar={index:e.indexOf(h),count:e.length}}function wY(e,t,n){const[r,i,s,l,c,h,p,v,y]=n,[b,T,M,R,L,N,z,H]=c==="vertical"?["y",i,"x",r,"height",l,"width",s]:["x",r,"y",i,"width",s,"height",l];e.sort((Ie,Ye)=>p==null?void 0:p(Ie.order,Ye.order));const X=Ie=>Ie==="title"||Ie==="group"||Ie.startsWith("legend"),Y=(Ie,Ye,$e)=>$e===void 0?Ye:X(Ie)?$e:Ye,ne=(Ie,Ye,$e)=>$e===void 0?Ye:X(Ie)?$e:Ye,ve=h?T+N:T;for(let Ie=0,Ye=ve;Ie<e.length;Ie++){const $e=e[Ie],{crossPadding:St=0,type:Qe}=$e,{size:lt}=$e;$e.bbox={[b]:h?Ye-lt-St:Ye+St,[M]:ne(Qe,R,v),[L]:lt,[z]:Y(Qe,H,y)},Ye+=(lt+St)*(h?-1:1)}const Ee=e.filter(Ie=>Ie.type==="group");for(const Ie of Ee){const{bbox:Ye,children:$e}=Ie,St=Ye[z],Qe=St/$e.length,lt=$e.reduce((kt,Mn)=>{var Wn;const cr=(Wn=Mn.layout)===null||Wn===void 0?void 0:Wn.justifyContent;return cr||kt},"flex-start"),ht=$e.map((kt,Mn)=>{const{length:Wn=Qe,padding:cr=0}=kt;return Wn+(Mn===$e.length-1?0:cr)}),bt=Sp(ht),Ht=St-bt,Ot=lt==="flex-start"?0:lt==="center"?Ht/2:Ht;for(let kt=0,Mn=Ye[M]+Ot;kt<$e.length;kt++){const Wn=$e[kt],{padding:cr=0}=Wn,ar=kt===$e.length-1?0:cr;Wn.bbox={[L]:Ye[L],[b]:Ye[b],[M]:Mn,[z]:ht[kt]-ar},ui(Wn,{layout:{justifyContent:lt}}),Mn+=ht[kt]}}}function TY(e,t,n){if(e.length===0)return;const[r,i,s,l]=n,[c]=hb(t),h=l/2*c/Math.sqrt(2),p=r+s/2,v=i+l/2;for(let y=0;y<e.length;y++){const b=e[y];b.bbox={x:p-h,y:v-h,width:h*2,height:h*2}}}function cm(e,t,n={},r=!1){if(gv(e)||Array.isArray(e)&&r)return e;const i=xo(e,t);return ui(n,i)}function OT(e,t={}){return gv(e)||Array.isArray(e)||!y6(e)?e:ui(t,e)}function y6(e){if(Object.keys(e).length===0)return!0;const{title:t,items:n}=e;return t!==void 0||n!==void 0}function fm(e,t){return typeof e=="object"?xo(e,t):e}var AY=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Ib=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function CY(e,t,n){const{encode:r={},scale:i={},transform:s=[]}=t,l=Ib(t,["encode","scale","transform"]);return[e,Object.assign(Object.assign({},l),{encode:r,scale:i,transform:s})]}function _6(e,t,n){return AY(this,void 0,void 0,function*(){const{library:r}=n,{data:i}=t,[s]=Ju("data",r),l=UY(i),{transform:c=[]}=l,v=[Ib(l,["transform"]),...c].map(s),y=yield H3(v)(i),b=i&&!Array.isArray(i)&&!Array.isArray(y)?{value:y}:y;return[Array.isArray(y)?og(y):[],Object.assign(Object.assign({},t),{data:b})]})}function OY(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i={};for(const[s,l]of Object.entries(r))if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=`${s}${c===0?"":c}`;i[h]=l[c]}else i[s]=l;return[e,Object.assign(Object.assign({},t),{encode:i})]}function MY(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const s=tm(r,l=>BY(l)?l:{type:kY(i,l),value:l});return[e,Object.assign(Object.assign({},t),{encode:s})]}function RY(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i=tm(r,(s,l)=>{const{type:c}=s;return c!=="constant"||FX(l)?s:Object.assign(Object.assign({},s),{constant:!0})});return[e,Object.assign(Object.assign({},t),{encode:i})]}function PY(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const{library:s}=n,l=HY(s),c=tm(r,h=>l(i,h));return[e,Object.assign(Object.assign({},t),{encode:c})]}function IY(e,t,n){const{tooltip:r={}}=t;return gv(r)?[e,t]:Array.isArray(r)?[e,Object.assign(Object.assign({},t),{tooltip:{items:r}})]:M_(r)&&y6(r)?[e,Object.assign(Object.assign({},t),{tooltip:r})]:[e,Object.assign(Object.assign({},t),{tooltip:{items:[r]}})]}function LY(e,t,n){const{data:r,encode:i,tooltip:s={}}=t;if(gv(s))return[e,t];const l=y=>{if(!y)return y;if(typeof y=="string")return e.map(b=>({name:y,value:r[b][y]}));if(M_(y)){const{field:b,channel:T,color:M,name:R=b,valueFormatter:L=ne=>ne}=y,N=typeof L=="string"?em(L):L,z=T&&i[T],H=z&&i[T].field,X=R||H||T,Y=[];for(const ne of e){const ve=b?r[ne][b]:z?i[T].value[ne]:null;Y[ne]={name:X,color:M,value:N(ve)}}return Y}if(typeof y=="function"){const b=[];for(const T of e){const M=y(r[T],T,r,i);M_(M)?b[T]=M:b[T]={value:M}}return b}return y},{title:c,items:h=[]}=s,p=Ib(s,["title","items"]),v=Object.assign({title:l(c),items:Array.isArray(h)?h.map(l):[]},p);return[e,Object.assign(Object.assign({},t),{tooltip:v})]}function DY(e,t,n){const{encode:r}=t,i=Ib(t,["encode"]);if(!r)return[e,t];const s=Object.entries(r),l=s.filter(([,h])=>{const{value:p}=h;return Array.isArray(p[0])}).flatMap(([h,p])=>{const v=[[h,new Array(e.length).fill(void 0)]],{value:y}=p,b=Ib(p,["value"]);for(let T=0;T<y.length;T++){const M=y[T];if(Array.isArray(M))for(let R=0;R<M.length;R++){const L=v[R]||[`${h}${R}`,new Array(e).fill(void 0)];L[1][T]=M[R],v[R]=L}}return v.map(([T,M])=>[T,Object.assign({type:"column",value:M},b)])}),c=Object.fromEntries([...s,...l]);return[e,Object.assign(Object.assign({},i),{encode:c})]}function NY(e,t,n){const{axis:r={},legend:i={},slider:s={},scrollbar:l={}}=t,c=(p,v)=>{if(typeof p=="boolean")return p?{}:null;const y=p[v];return y===void 0||y?y:null},h=typeof r=="object"?Array.from(new Set(["x","y",...Object.keys(r)])):["x","y"];return ui(t,{scale:Object.assign(Object.assign({},Object.fromEntries(h.map(p=>{const v=c(l,p);return[p,Object.assign({guide:c(r,p),slider:c(s,p),scrollbar:v},v&&{ratio:v.ratio===void 0?.5:v.ratio})]}))),{color:{guide:c(i,"color")},size:{guide:c(i,"size")},shape:{guide:c(i,"shape")},opacity:{guide:c(i,"opacity")}})}),[e,t]}function FY(e,t,n){const{animate:r}=t;return r||r===void 0?[e,t]:(ui(t,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[e,t])}function BY(e){if(typeof e!="object"||e instanceof Date||e===null)return!1;const{type:t}=e;return iu(t)}function kY(e,t){return typeof t=="function"?"transform":typeof t=="string"&&zY(e,t)?"field":"constant"}function zY(e,t){return Array.isArray(e)?e.some(n=>n[t]!==void 0):!1}function UY(e){if((0,$u.Z)(e))return{type:"inline",value:e};if(!e)return{type:"inline",value:null};if(Array.isArray(e))return{type:"inline",value:e};const{type:t="inline"}=e,n=Ib(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}var b6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},jY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function VY(e,t,n){return b6(this,void 0,void 0,function*(){const r={library:n},[i,s]=yield WY(e,t,r),{encode:l,scale:c,data:h,tooltip:p}=s;if(Array.isArray(h)===!1)return null;const{channels:v}=t,y=nb(Object.entries(l).filter(([,T])=>iu(T)),T=>T.map(([M,R])=>Object.assign({name:M},R)),([T])=>{var M;const R=(M=/([^\d]+)\d*$/.exec(T))===null||M===void 0?void 0:M[1],L=v.find(N=>N.name===R);return L!=null&&L.independent?T:R}),b=v.filter(T=>{const{name:M,required:R}=T;if(y.find(([L])=>L===M))return!0;if(R)throw new Error(`Missing encoding for channel: ${M}.`);return!1}).flatMap(T=>{const{name:M,scale:R,scaleKey:L,range:N,quantitative:z,ordinal:H}=T;return y.filter(([Y])=>Y.startsWith(M)).map(([Y,ne],ve)=>{const Ee=ne.some(Ht=>Ht.visual),Ie=ne.some(Ht=>Ht.constant),Ye=c[Y]||{},{independent:$e=!1,key:St=L||Y,type:Qe=Ie?"constant":Ee?"identity":R}=Ye,lt=jY(Ye,["independent","key","type"]),ht=Qe==="constant",bt=ht?void 0:N;return{name:Y,values:ne,scaleKey:$e||ht?Symbol("independent"):St,scale:Object.assign(Object.assign({type:Qe,range:bt},lt),{quantitative:z,ordinal:H})}})});return[s,Object.assign(Object.assign({},t),{index:i,channels:b,tooltip:p})]})}function HY(e){const[t]=Ju("encode",e);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:t(r)(n),field:GY(r)})}function WY(e,t,n){return b6(this,void 0,void 0,function*(){const{library:r}=n,[i]=Ju("transform",r),{preInference:s=[],postInference:l=[]}=t,{transform:c=[]}=e,h=[CY,_6,OY,MY,RY,PY,DY,FY,NY,IY,...s.map(i),...c.map(i),...l.map(i),LY];let p=[],v=e;for(const y of h)[p,v]=yield y(p,v,n);return[p,v]})}function GY(e){const{type:t,value:n}=e;return t==="field"&&typeof n=="string"?n:null}var pg=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},xy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function oR(e,t,n,r){var i;return pg(this,void 0,void 0,function*(){const[s]=Ju("composition",n),[l]=Ju("interaction",n),c=new Set(Object.keys(n).map(Qe=>{var lt;return(lt=/mark\.(.*)/.exec(Qe))===null||lt===void 0?void 0:lt[1]}).filter(iu)),h=new Set(Object.keys(n).map(Qe=>{var lt;return(lt=/component\.(.*)/.exec(Qe))===null||lt===void 0?void 0:lt[1]}).filter(iu)),p=Qe=>{const{type:lt}=Qe;if(typeof lt=="function"){const{props:ht={}}=lt,{composite:bt=!0}=ht;if(bt)return"mark"}return typeof lt!="string"?lt:c.has(lt)||h.has(lt)?"mark":lt},v=Qe=>p(Qe)==="mark",y=Qe=>p(Qe)==="standardView",b=Qe=>{const{type:lt}=Qe;return typeof lt!="string"?!1:!!h.has(lt)},T=Qe=>{if(y(Qe))return[Qe];const lt=p(Qe);return s({type:lt,static:b(Qe)})(Qe)},M=[],R=new Map,L=new Map,N=[e],z=[];for(;N.length;){const Qe=N.shift();if(y(Qe)){const lt=L.get(Qe),[ht,bt]=lt?w6(lt,Qe,n):yield E6(Qe,n);R.set(ht,Qe),M.push(ht);const Ht=bt.flatMap(T).map(Ot=>uD(Ot,n));if(N.push(...Ht),Ht.every(y)){const Ot=yield Promise.all(Ht.map(kt=>S6(kt,n)));pX(Ot);for(let kt=0;kt<Ht.length;kt++){const Mn=Ht[kt],Wn=Ot[kt];L.set(Mn,Wn)}}}else{const lt=v(Qe)?Qe:yield O6(Qe,n),ht=T(lt);Array.isArray(ht)?N.push(...ht):typeof ht=="function"&&z.push(ht())}}r.emitter.emit(cl.BEFORE_PAINT);const H=new Map,X=new Map,Y=[];t.selectAll(hm(G1)).data(M,Qe=>Qe.key).join(Qe=>Qe.append("g").attr("className",G1).attr("id",lt=>lt.key).call(x6).each(function(lt,ht,bt){sR(lt,Ua(bt),Y,n,r),H.set(lt,bt)}),Qe=>Qe.call(x6).each(function(lt,ht,bt){sR(lt,Ua(bt),Y,n,r),X.set(lt,bt)}),Qe=>Qe.each(function(lt,ht,bt){const Ht=bt.nameInteraction.values();for(const Ot of Ht)Ot.destroy()}).remove());const ne=(Qe,lt,ht)=>Array.from(Qe.entries()).map(([bt,Ht])=>{const Ot=ht||new Map,kt=(cr,ar=Yr=>Yr)=>Ot.set(cr,ar),Mn=R.get(bt),Wn=XY(Ua(Ht),Mn,n,r);return{view:bt,container:Ht,options:Mn,setState:kt,update:(cr,ar)=>pg(this,void 0,void 0,function*(){const Pi=rb(Array.from(Ot.values()))(Mn);return yield Wn(Pi,cr,()=>{Hr(ar)&&lt(Qe,ar,Ot)})})}}),ve=(Qe=X,lt,ht)=>{var bt;const Ht=ne(Qe,ve,ht);for(const Ot of Ht){const{options:kt,container:Mn}=Ot,Wn=Mn.nameInteraction;let cr=MT(kt);lt&&(cr=cr.filter(ar=>lt.includes(ar[0])));for(const ar of cr){const[Yr,Pi]=ar,so=Wn.get(Yr);if(so&&((bt=so.destroy)===null||bt===void 0||bt.call(so)),Pi){const ti=aR(Ot.view,Yr,Pi,l)(Ot,Ht,r.emitter);Wn.set(Yr,{destroy:ti})}}}},Ee=ne(H,ve);for(const Qe of Ee){const{options:lt}=Qe,ht=new Map;Qe.container.nameInteraction=ht;for(const bt of MT(lt)){const[Ht,Ot]=bt;if(Ot){const Mn=aR(Qe.view,Ht,Ot,l)(Qe,Ee,r.emitter);ht.set(Ht,{destroy:Mn})}}}ve();const{width:Ie,height:Ye}=e,$e=[];for(const Qe of z){const lt=new Promise(ht=>pg(this,void 0,void 0,function*(){for(const bt of Qe){const Ht=Object.assign({width:Ie,height:Ye},bt);yield oR(Ht,t,n,r)}ht()}));$e.push(lt)}r.views=M,(i=r.animations)===null||i===void 0||i.forEach(Qe=>Qe==null?void 0:Qe.cancel()),r.animations=Y,r.emitter.emit(cl.AFTER_PAINT);const St=Y.filter(iu).map(l$).map(Qe=>Qe.finished);return Promise.all([...St,...$e])})}function x6(e){e.style("transform",t=>`translate(${t.layout.x}, ${t.layout.y})`)}function ZY(e){const[,t]=Ju("interaction",e);return n=>{const[r,i]=n;try{return[r,t(r)]}catch(s){return[r,i.type]}}}function XY(e,t,n,r){const i=ZY(n),s=h=>h[1]&&h[1].props&&h[1].props.reapplyWhenUpdate,c=MT(t).map(i).filter(s).map(h=>h[0]);return(h,p,v)=>pg(this,void 0,void 0,function*(){const y=[],[b,T]=yield E6(h,n);sR(b,e,y,n,r);for(const M of c.filter(R=>R!==p))YY(M,e,h,b,n,r);for(const M of T)oR(M,e,n,r);return v(),{options:h,view:b}})}function YY(e,t,n,r,i,s){var l;const[c]=Ju("interaction",i),p=t.node().nameInteraction,v=MT(n).find(([R])=>R===e),y=p.get(e);if(!y||((l=y.destroy)===null||l===void 0||l.call(y),!v[1]))return;const b=aR(r,e,v[1],c),T={options:n,view:r,container:t.node(),update:R=>Promise.resolve(R)},M=b(T,[],s.emitter);p.set(e,{destroy:M})}function E6(e,t){return pg(this,void 0,void 0,function*(){const n=yield qY(e,t),r=$Y(n);e.interaction=r.interaction,e.coordinate=r.coordinate,e.marks=[...r.marks,...r.components];const i=uD(r,t),s=yield S6(i,t);return w6(s,i,t)})}function $Y(e){const{coordinate:t={},interaction:n={},style:r={},marks:i}=e,s=xy(e,["coordinate","interaction","style","marks"]),l=i.map(b=>b.coordinate||{}),c=i.map(b=>b.interaction||{}),h=i.map(b=>b.viewStyle||{}),p=[...l,t].reduceRight((b,T)=>ui(b,T),{}),v=[n,...c].reduce((b,T)=>ui(b,T),{}),y=[...h,r].reduce((b,T)=>ui(b,T),{});return Object.assign(Object.assign({},s),{marks:i,coordinate:p,interaction:v,style:y})}function qY(e,t){return pg(this,void 0,void 0,function*(){const[n,r]=Ju("mark",t),i=new Set(Object.keys(t).map(b=>{var T;return(T=/component\.(.*)/.exec(b))===null||T===void 0?void 0:T[1]}).filter(iu)),{marks:s}=e,l=[],c=[],h=[...s],{width:p,height:v}=hY(e),y={options:e,width:p,height:v};for(;h.length;){const[b]=h.splice(0,1),T=yield O6(b,t),{type:M=mv("G2Mark type is required."),key:R}=T;if(i.has(M))c.push(T);else{const{props:L={}}=r(M),{composite:N=!0}=L;if(!N)l.push(T);else{const{data:z}=T,H=Object.assign(Object.assign({},T),{data:z&&(Array.isArray(z)?z:z.value)}),X=yield n(H,y),Y=Array.isArray(X)?X:[X];h.unshift(...Y.map((ne,ve)=>Object.assign(Object.assign({},ne),{key:`${R}-${ve}`})))}}}return Object.assign(Object.assign({},e),{marks:l,components:c})})}function S6(e,t){return pg(this,void 0,void 0,function*(){const[n]=Ju("theme",t),[,r]=Ju("mark",t),{theme:i,marks:s,coordinates:l=[]}=e,c=n(C6(i)),h=new Map;for(const v of s){const{type:y}=v,{props:b={}}=r(y),T=yield VY(v,b,t);if(T){const[M,R]=T;h.set(M,R)}}const p=Fu(Array.from(h.values()).flatMap(v=>v.channels),({scaleKey:v})=>v);for(const v of p.values()){const y=v.reduce((H,{scale:X})=>ui(H,X),{}),{scaleKey:b}=v[0],{values:T}=v[0],M=Array.from(new Set(T.map(H=>H.field).filter(iu))),R=ui({guide:{title:M.length===0?void 0:M},field:M[0]},y),{name:L}=v[0],N=v.flatMap(({values:H})=>H.map(X=>X.value)),z=Object.assign(Object.assign({},cX(L,N,R,l,c,t)),{key:b});v.forEach(H=>H.scale=z)}return h})}function aR(e,t,n,r){const i=e.theme,s=typeof t=="string"?i[t]||{}:{};return r(ui(s,Object.assign({type:t},n)))}function w6(e,t,n){const[r]=Ju("mark",n),[i]=Ju("theme",n),[s]=Ju("labelTransform",n),{key:l,frame:c=!1,theme:h,clip:p,style:v={},labelTransform:y=[]}=t,b=i(C6(h)),T=Array.from(e.values()),M=hX(T,t),R=HX(VX(h$(Array.from(M),T,e),t,n)),L=fY(R,t,b,n),N=UG(L,t,n),z=c?ui({mainLineWidth:1,mainStroke:"#000"},v):v;pY(d6(R),N,L),cY(R);const H={};for(const ne of R){const{scales:ve=[]}=ne,Ee=[];for(const Ie of ve){const{name:Ye}=Ie,$e=r6(Ie,n);Ee.push($e),Ye==="y"&&$e.update(Object.assign(Object.assign({},$e.getOptions()),{xScale:H.x})),n6(H,{[Ye]:$e})}ne.scaleInstances=Ee}const X=[];for(const[ne,ve]of e.entries()){const{children:Ee,dataDomain:Ie,modifier:Ye,key:$e}=ne,{index:St,channels:Qe,tooltip:lt}=ve,ht=Object.fromEntries(Qe.map(({name:ti,scale:Do})=>[ti,Do])),bt=tm(ht,ti=>r6(ti,n));n6(H,bt);const Ht=fX(Qe,bt),Ot=r(ne),[kt,Mn,Wn]=JY(Ot(St,bt,Ht,N)),cr=Ie||kt.length,ar=Ye?Ye(Mn,cr,L):[],Yr=ti=>{var Do,uo;return(uo=(Do=lt.title)===null||Do===void 0?void 0:Do[ti])===null||uo===void 0?void 0:uo.value},Pi=ti=>lt.items.map(Do=>Do[ti]),so=kt.map((ti,Do)=>{const uo=Object.assign({points:Mn[Do],transform:ar[Do],index:ti,markKey:$e,viewKey:l},lt&&{title:Yr(ti),items:Pi(ti)});for(const[Ko,ga]of Object.entries(Ht))uo[Ko]=ga[ti],Wn&&(uo[`series${Jv(Ko)}`]=Wn[Do].map(Pa=>ga[Pa]));return Wn&&(uo.seriesIndex=Wn[Do]),Wn&&lt&&(uo.seriesItems=Wn[Do].map(Ko=>Pi(Ko)),uo.seriesTitle=Wn[Do].map(Ko=>Yr(Ko))),uo});ve.data=so,ve.index=kt;const mi=Ee==null?void 0:Ee(so,bt,L);X.push(...mi||[])}return[{layout:L,theme:b,coordinate:N,markState:e,key:l,clip:p,scale:H,style:z,components:R,labelTransform:rb(y.map(s))},X]}function sR(e,t,n,r,i){return pg(this,void 0,void 0,function*(){const{components:s,theme:l,layout:c,markState:h,coordinate:p,key:v,style:y,clip:b,scale:T}=e,{x:M,y:R,width:L,height:N}=c,z=xy(c,["x","y","width","height"]),H=["view","plot","main","content"],X=H.map((Ot,kt)=>kt),Y=["a","margin","padding","inset"],ne=H.map(Ot=>p2(Object.assign({},l.view,y),Ot)),ve=Y.map(Ot=>xo(z,Ot)),Ee=Ot=>Ot.style("x",kt=>Qe[kt].x).style("y",kt=>Qe[kt].y).style("width",kt=>Qe[kt].width).style("height",kt=>Qe[kt].height).each(function(kt,Mn,Wn){d$(Ua(Wn),ne[kt])});let Ie=0,Ye=0,$e=L,St=N;const Qe=X.map(Ot=>{const kt=ve[Ot],{left:Mn=0,top:Wn=0,bottom:cr=0,right:ar=0}=kt;return Ie+=Mn,Ye+=Wn,$e-=Mn+ar,St-=Wn+cr,{x:Ie,y:Ye,width:$e,height:St}});t.selectAll(hm(tw)).data(X.filter(Ot=>iu(ne[Ot])),Ot=>H[Ot]).join(Ot=>Ot.append("rect").attr("className",tw).style("zIndex",-2).call(Ee),Ot=>Ot.call(Ee),Ot=>Ot.remove());const lt=r$(h),ht=lt?{duration:lt[1]}:!1;for(const[,Ot]of tb(s,kt=>`${kt.type}-${kt.position}`))Ot.forEach((kt,Mn)=>kt.index=Mn);const bt=t.selectAll(hm(ew)).data(s,Ot=>`${Ot.type}-${Ot.position}-${Ot.index}`).join(Ot=>Ot.append("g").style("zIndex",({zIndex:kt})=>kt||-1).attr("className",ew).append(kt=>h6(ui({animate:ht,scale:T},kt),p,l,r,h)),Ot=>Ot.transition(function(kt,Mn,Wn){const{preserve:cr=!1}=kt;if(cr)return;const ar=h6(ui({animate:ht,scale:T},kt),p,l,r,h),{attributes:Yr}=ar,[Pi]=Wn.childNodes;return Pi.update(Yr,!1)})).transitions();n.push(...bt.flat().filter(iu));const Ht=t.selectAll(hm(E_)).data([c],()=>v).join(Ot=>Ot.append("rect").style("zIndex",0).style("fill","transparent").attr("className",E_).call(M6).call(P6,Array.from(h.keys())).call(I6,b),Ot=>Ot.call(P6,Array.from(h.keys())).call(kt=>lt?f$(kt,lt):M6(kt)).call(I6,b)).transitions();n.push(...Ht.flat());for(const[Ot,kt]of h.entries()){const{data:Mn}=kt,{key:Wn,class:cr,type:ar}=Ot,Yr=t.select(`#${Wn}`),Pi=a$(Ot,kt,e,r,i),so=s$(Ot,kt,e,r),mi=u$(Ot,kt,e,r),ti=c$(Ot,kt,e,r),Do=i$(t,Yr,cr,"element"),uo=Yr.selectAll(hm(dv)).selectFacetAll(Do).data(Mn,Ko=>Ko.key,Ko=>Ko.groupKey).join(Ko=>Ko.append(Pi).attr("className",dv).attr("markType",ar).transition(function(ga,Pa,Da){return so(ga,[Da])}),Ko=>Ko.call(ga=>{const Pa=ga.parent(),Da=W3(us=>{const[fl,is]=us.getBounds().min;return[fl,is]});ga.transition(function(us,fl,is){o$(is,Pa,Da);const Ts=Pi(us,fl),zu=mi(us,[is],[Ts]);return zu!==null||(is.nodeName===Ts.nodeName&&Ts.nodeName!=="g"?d2(is,Ts):(is.parentNode.replaceChild(Ts,is),Ts.className=dv,Ts.markType=ar,Ts.__data__=is.__data__)),zu}).attr("markType",ar).attr("className",dv)}),Ko=>Ko.each(function(ga,Pa,Da){Da.__removed__=!0}).transition(function(ga,Pa,Da){return ti(ga,[Da])}).remove(),Ko=>Ko.append(Pi).attr("className",dv).attr("markType",ar).transition(function(ga,Pa,Da){const{__fromElements__:us}=Da,fl=mi(ga,us,[Da]);return new Fc(us,null,Da.parentNode).transition(fl).remove(),fl}),Ko=>Ko.transition(function(ga,Pa,Da){const fl=new Fc([],Da.__toData__,Da.parentNode).append(Pi).attr("className",dv).attr("markType",ar).nodes();return mi(ga,[Da],fl)}).remove()).transitions();n.push(...uo.flat())}KY(e,t,n,r,i)})}function KY(e,t,n,r,i){const[s]=Ju("labelTransform",r),{markState:l,labelTransform:c}=e,h=t.select(hm(W1)).node(),p=new Map,v=new Map,y=Array.from(l.entries()).flatMap(([R,L])=>{const{labels:N=[],key:z}=R,H=n$(R,L,e,r,i),X=t.select(`#${z}`).selectAll(hm(dv)).nodes().filter(Y=>!Y.__removed__);return N.flatMap((Y,ne)=>{const{transform:ve=[]}=Y,Ee=xy(Y,["transform"]);return X.flatMap(Ie=>{const Ye=QY(Ee,ne,Ie);return Ye.forEach($e=>{p.set($e,H),v.set($e,Y)}),Ye})})}),b=Ua(h).selectAll(hm(Kx)).data(y,R=>R.key).join(R=>R.append(L=>p.get(L)(L)).attr("className",Kx),R=>R.each(function(L,N,z){const X=p.get(L)(L);d2(z,X)}),R=>R.remove()).nodes(),T=Fu(b,R=>v.get(R.__data__)),{coordinate:M}=e;for(const[R,L]of T){const{transform:N=[]}=R;rb(N.map(s))(L,M)}c&&c(b,M)}function QY(e,t,n){const{seriesIndex:r,seriesKey:i,points:s,key:l,index:c}=n.__data__,h=t$(n);if(!r)return[Object.assign(Object.assign({},e),{key:`${l}-${t}`,bounds:h,index:c,points:s,dependentElement:n})];const p=e$(e),v=r.map((y,b)=>Object.assign(Object.assign({},e),{key:`${i[b]}-${t}`,bounds:[s[b]],index:y,points:s,dependentElement:n}));return p?p(v):v}function JY([e,t,n]){if(n)return[e,t,n];const r=[],i=[];for(let s=0;s<e.length;s++){const l=e[s],c=t[s];c.every(([h,p])=>iu(h)&&iu(p))&&(r.push(l),i.push(c))}return[r,i]}function e$(e){const{selector:t}=e;if(!t)return null;if(typeof t=="function")return t;if(t==="first")return n=>[n[0]];if(t==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${t}`)}function t$(e){const t=e.cloneNode(),n=e.getAnimations();t.style.visibility="hidden",n.forEach(l=>{const c=l.effect.getKeyframes();t.attr(c[c.length-1])}),e.parentNode.appendChild(t);const r=t.getLocalBounds();t.destroy();const{min:i,max:s}=r;return[i,s]}function n$(e,t,n,r,i){const[s]=Ju("shape",r),{data:l}=e,{data:c,defaultLabelShape:h}=t,p=c.map(T=>T.points),{theme:v,coordinate:y}=n,b=Object.assign(Object.assign({},i),{document:sD(i),theme:v,coordinate:y});return T=>{const{index:M,points:R}=T,L=l[M],{formatter:N=ht=>`${ht}`,transform:z,style:H,render:X}=T,Y=xy(T,["formatter","transform","style","render"]),ne=tm(Object.assign(Object.assign({},Y),H),ht=>T6(ht,L,M,l)),{shape:ve=h,text:Ee}=ne,Ie=xy(ne,["shape","text"]),Ye=typeof N=="string"?em(N):N,$e=Object.assign(Object.assign({},Ie),{text:Ye(Ee,L,M,l),datum:L}),St=Object.assign({type:`label.${ve}`,render:X},Ie),Qe=s(St,b),lt=A6(v,"label",ve,"label");return Qe(R,$e,lt,p)}}function T6(e,t,n,r){return typeof e=="function"?e(t,n,r):typeof e!="string"?e:t[e]!==void 0?t[e]:e}function r$(e){let t=-1/0,n=1/0;for(const[r,i]of e){const{animate:s={}}=r,{data:l}=i,{enter:c={},update:h={},exit:p={}}=s,{type:v,duration:y=300,delay:b=0}=h,{type:T,duration:M=300,delay:R=0}=c,{type:L,duration:N=300,delay:z=0}=p;for(const H of l){const{updateType:X=v,updateDuration:Y=y,updateDelay:ne=b,enterType:ve=T,enterDuration:Ee=M,enterDelay:Ie=R,exitDuration:Ye=N,exitDelay:$e=z,exitType:St=L}=H;(X===void 0||X)&&(t=Math.max(t,Y+ne),n=Math.min(n,ne)),(St===void 0||St)&&(t=Math.max(t,Ye+$e),n=Math.min(n,$e)),(ve===void 0||ve)&&(t=Math.max(t,Ee+Ie),n=Math.min(n,Ie))}}return t===-1/0?null:[n,t-n]}function i$(e,t,n,r){return e.node().parentElement.findAll(s=>s.style.facet!==void 0&&s.style.facet===n&&s!==t.node()).flatMap(s=>s.getElementsByClassName(r))}function o$(e,t,n){if(!e.__facet__)return;const r=e.parentNode.parentNode,i=t.parentNode,[s,l]=n(r),[c,h]=n(i),p=`translate(${s-c}, ${l-h})`;G3(e,p),t.append(e)}function a$(e,t,n,r,i){const[s]=Ju("shape",r),{data:l}=e,{defaultShape:c,data:h,shape:p}=t,v=h.map(L=>L.points),{theme:y,coordinate:b}=n,{type:T,style:M={}}=e,R=Object.assign(Object.assign({},i),{document:sD(i),coordinate:b,theme:y});return L=>{const{shape:N=c}=M,{shape:z=N,points:H,seriesIndex:X,index:Y}=L,ne=xy(L,["shape","points","seriesIndex","index"]),ve=Object.assign(Object.assign({},ne),{index:Y}),Ee=X?X.map(Qe=>l[Qe]):l[Y],Ie=X||Y,Ye=tm(M,Qe=>T6(Qe,Ee,Ie,l)),$e=p[z]?p[z](Ye,R):s(Object.assign(Object.assign({},Ye),{type:R6(e,z)}),R),St=A6(y,T,z,c);return $e(H,ve,St,v)}}function A6(e,t,n,r){if(typeof t!="string")return;const{color:i}=e,s=e[t]||{},l=s[n]||s[r];return Object.assign({color:i},l)}function lR(e,t,n,r,i){var s,l;const[,c]=Ju("shape",i),[h]=Ju("animation",i),{defaultShape:p,shape:v}=n,{theme:y,coordinate:b}=r,M=`default${Jv(e)}Animation`,{[M]:R}=((s=v[p])===null||s===void 0?void 0:s.props)||c(R6(t,p)).props,{[e]:L={}}=y,N=((l=t.animate)===null||l===void 0?void 0:l[e])||{},z={coordinate:b};return(H,X,Y)=>{const{[`${e}Type`]:ne,[`${e}Delay`]:ve,[`${e}Duration`]:Ee,[`${e}Easing`]:Ie}=H,Ye=Object.assign({type:ne||R},N);if(!Ye.type)return null;const Qe=h(Ye,z)(X,Y,ui(L,{delay:ve,duration:Ee,easing:Ie}));return Array.isArray(Qe)?Qe:[Qe]}}function s$(e,t,n,r){return lR("enter",e,t,n,r)}function l$(e){return e.finished.then(()=>{e.cancel()}),e}function u$(e,t,n,r){return lR("update",e,t,n,r)}function c$(e,t,n,r){return lR("exit",e,t,n,r)}function C6(e={}){if(typeof e=="string")return{type:e};const{type:t="light"}=e,n=xy(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}function MT(e){const t={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=e;return Object.entries(ui(t,n)).reverse()}function O6(e,t){return pg(this,void 0,void 0,function*(){const n={library:t},{data:r}=e,i=xy(e,["data"]);if(r==null)return e;const[,{data:s}]=yield _6([],{data:r},n);return Object.assign({data:s},i)})}function M6(e){e.style("x",t=>t.paddingLeft+t.marginLeft).style("y",t=>t.paddingTop+t.marginTop).style("width",t=>t.innerWidth).style("height",t=>t.innerHeight)}function f$(e,t){const[n,r]=t;e.transition(function(i,s,l){const{x:c,y:h,width:p,height:v}=l.style,{paddingLeft:y,paddingTop:b,innerWidth:T,innerHeight:M,marginLeft:R,marginTop:L}=i,N=[{x:c,y:h,width:p,height:v},{x:y+R,y:b+L,width:T,height:M}];return l.animate(N,{delay:n,duration:r,fill:"both"})})}function R6(e,t){const{type:n}=e;return typeof t=="string"?`${n}.${t}`:t}function P6(e,t){const n=s=>s.class!==void 0?`${s.class}`:"";e.nodes().length===0||(e.selectAll(hm(qx)).data(t,s=>s.key).join(s=>s.append("g").attr("className",qx).attr("id",l=>l.key).style("facet",n).style("fill","transparent").style("zIndex",l=>{var c;return(c=l.zIndex)!==null&&c!==void 0?c:0}),s=>s.style("facet",n).style("fill","transparent").style("zIndex",l=>{var c;return(c=l.zIndex)!==null&&c!==void 0?c:0}),s=>s.remove()),e.select(hm(W1)).node())||e.append("g").attr("className",W1).style("zIndex",0)}function hm(...e){return e.map(t=>`.${t}`).join("")}function I6(e,t){e.node()&&e.style("clipPath",n=>{if(!t)return null;const{paddingTop:r,paddingLeft:i,marginLeft:s,marginTop:l,innerWidth:c,innerHeight:h}=n;return new Jg({style:{x:i+s,y:r+l,width:c,height:h}})})}function h$(e,t,n){var r;for(const[p]of n.entries())if(p.type==="cell")return e.filter(v=>v.name!=="shape");if(t.length!==1||e.some(p=>p.name==="shape"))return e;const{defaultShape:i}=t[0];if(!["point","line","rect","hollow"].includes(i))return e;const l={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},h={field:((r=e.find(p=>p.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[l[i]]};return[...e,h]}function d$(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function L6(e){const t=ui({},e),n=new Map([[t,null]]),r=new Map([[null,-1]]),i=[t];for(;i.length;){const s=i.shift();if(s.key===void 0){const c=n.get(s),h=r.get(s),p=c===null?"0":`${c.key}-${h}`;s.key=p}const{children:l=[]}=s;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=ui({},l[c]);l[c]=h,n.set(h,s),r.set(h,c),i.push(h)}}return t}function p$(e,t){const n=new s2;return n.registerPlugin(new eg),new XO({width:e,height:t,container:document.createElement("div"),renderer:n})}function v$(e,t={},n=()=>{},r=i=>{throw i}){const{width:i=640,height:s=480,depth:l=0}=e,c=L6(e),{canvas:h=p$(i,s),emitter:p=new zo,library:v}=t;t.canvas=h,t.emitter=p;const{width:y,height:b}=h.getConfig();(y!==i||b!==s)&&h.resize(i,s),p.emit(cl.BEFORE_RENDER);const T=Ua(h.document.documentElement);return h.ready.then(()=>oR(Object.assign(Object.assign({},c),{width:i,height:s,depth:l}),T,v,t)).then(()=>{if(l){const[M,R]=h.document.documentElement.getPosition();h.document.documentElement.setPosition(M,R,-l/2)}h.requestAnimationFrame(()=>{p.emit(cl.AFTER_RENDER),n==null||n()})}).catch(M=>{r==null||r(M)}),g$(h.getConfig().container)}function E0e(e,t={},n=()=>{},r=i=>{throw i}){var i;const{width:s=640,height:l=480}=e,c=L6(e),{group:h=new Group,emitter:p=new EventEmitter,library:v}=t;h!=null&&h.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const y=select(h);return t.group=h,t.emitter=p,t.canvas=t.canvas||((i=h==null?void 0:h.ownerDocument)===null||i===void 0?void 0:i.defaultView),p.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},c),{width:s,height:l}),y,v,t).then(()=>{var b;(b=t.canvas)===null||b===void 0||b.requestAnimationFrame(()=>{p.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(b=>{r==null||r(b)}),h}function D6(e,t={},n=!1){const{canvas:r,emitter:i}=t;r&&(m$(r),n?r.destroy():r.destroyChildren()),i.off()}function m$(e){const t=e.getRoot().querySelectorAll(`.${G1}`);t==null||t.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(i=>{i==null||i.destroy()})})}function g$(e){return typeof e=="string"?document.getElementById(e):e}const Lb=e=>e?parseInt(e):0;function y$(e){const t=getComputedStyle(e),n=e.clientWidth||Lb(t.width),r=e.clientHeight||Lb(t.height),i=Lb(t.paddingLeft)+Lb(t.paddingRight),s=Lb(t.paddingTop)+Lb(t.paddingBottom);return{width:n-i,height:r-s}}function S0e(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:c=r,margin:h=0,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:T=0,insetLeft:M=T,insetRight:R=T,insetTop:L=T,insetBottom:N=T}=e,z=Y=>Y==="auto"?20:Y,H=n-z(i)-z(s)-p-v-M-R,X=t-z(l)-z(c)-y-b-L-N;return{width:H,height:X}}function uR(e,t){const n=[e];for(;n.length;){const r=n.shift();t&&t(r);const i=r.children||[];for(const s of i)n.push(s)}}class cR{constructor(t={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=t}map(t=n=>n){const n=t(this.value);return this.value=n,this}attr(t,n){return arguments.length===1?this.value[t]:this.map(r=>(r[t]=n,r))}append(t){const n=new t({});return n.children=[],this.push(n),n}push(t){return t.parentNode=this,t.index=this.children.length,this.children.push(t),this}remove(){const t=this.parentNode;if(t){const{children:n}=t,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(t){let n=null;return uR(this,i=>{t===i.attr("key")&&(n=i)}),n}getNodesByType(t){const n=[];return uR(this,i=>{t===i.type&&n.push(i)}),n}getNodeByType(t){let n=null;return uR(this,r=>{n||t===r.type&&(n=r)}),n}call(t,...n){return t(this.map(),...n),this}getRoot(){let t=this;for(;t&&t.parentNode;)t=t.parentNode;return t}}var N6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const fR=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title"],F6="__remove__",B6="__callback__",k6=1,z6=1;function _$(e){if(e===void 0){const t=document.createElement("div");return t[F6]=!0,t}return typeof e=="string"?document.getElementById(e):e}function b$(e){const t=e.parentNode;t&&t.removeChild(e)}function x$(e){if(e.type!==null)return e;const t=e.children[e.children.length-1];for(const n of fR)t.attr(n,e.attr(n));return t}function U6(e){return Object.assign(Object.assign({},e.value),{type:e.type})}function hR(e,t){const{width:n,height:r,autoFit:i,depth:s=0}=e;let l=640,c=480;if(i){const{width:h,height:p}=y$(t);l=h||l,c=p||c}return l=n||l,c=r||c,{width:Math.max((0,$u.Z)(l)?l:k6,k6),height:Math.max((0,$u.Z)(c)?c:z6,z6),depth:s}}function E$(e){const t=x$(e),n=[t],r=new Map;for(r.set(t,U6(t));n.length;){const i=n.pop(),s=r.get(i),{children:l=[]}=i;for(const c of l)if(c.type===B6)s.children=c.value;else{const h=U6(c),{children:p=[]}=s;p.push(h),n.push(c),r.set(c,h),s.children=p}}return r.get(t)}function S$(e,t){return typeof e=="function"?!0:new Set(Object.keys(t)).has(e)}function w$(e,t){return typeof e!="function"&&new Set(Object.keys(t)).has(e)}function T$(e,t,n,r,i){const{type:s}=e,{type:l=n||s}=t;if(w$(l,i)){for(const c of fR)e.attr(c)!==void 0&&t[c]===void 0&&(t[c]=e.attr(c));return t}if(S$(l,r)){const c={type:"view"},h=Object.assign({},t);for(const p of fR)h[p]!==void 0&&(c[p]=h[p],delete h[p]);return Object.assign(Object.assign({},c),{children:[h]})}return t}function A$(e,t,n){if(typeof e=="function")return t.mark;const i=Object.assign(Object.assign({},t),n)[e];if(!i)throw new Error(`Unknown mark: ${e}.`);return i}function C$(e,t,n){if(typeof e=="function"){const h=new cR;return h.value=e,h.type=B6,h}const{type:r,children:i}=e,s=N6(e,["type","children"]),l=A$(r,t,n),c=new l;return c.value=s,c.type=r,c}function O$(e,t){const{type:n,children:r}=t,i=N6(t,["type","children"]);e.type===n||n===void 0?gw(e.value,i):typeof n=="string"&&(e.type=n,e.value=i)}function M$(e,t,n,r){if(!e)return;const i=[[e,t]];for(;i.length;){const[s,l]=i.shift(),c=C$(l,n,r);Array.isArray(s.children)&&s.push(c);const{children:h}=l;if(Array.isArray(h))for(const p of h)i.push([c,p]);else typeof h=="function"&&i.push([c,h])}}function R$(e,t,n,r,i){const s=T$(e,t,n,r,i),l=[[null,e,s]];for(;l.length;){const[c,h,p]=l.shift();if(!h)M$(c,p,r,i);else if(!p)h.remove();else{O$(h,p);const{children:v}=p,{children:y}=h;if(Array.isArray(v)&&Array.isArray(y)){const b=Math.max(v.length,y.length);for(let T=0;T<b;T++){const M=v[T],R=y[T];l.push([h,R,M])}}else typeof v=="function"&&l.push([h,null,v])}}}function P$(){let e,t;return[new Promise((r,i)=>{t=r,e=i}),t,e]}function I$(e,t,{key:n=t}){e.prototype[t]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function L$(e,t,{key:n=t}){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const i=[...this.attr(n)||[],r];return this.attr(n,i)}}function D$(e,t,{key:n=t}){e.prototype[t]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const s=this.attr(n)||{};return s[r]=arguments.length===1?!0:i,this.attr(n,s)}}function N$(e,t,n){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(t);if(Array.isArray(r))return this.attr(t,{items:r});if(M_(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(t,r);if(r===null||r===!1)return this.attr(t,r);const i=this.attr(t)||{},{items:s=[]}=i;return s.push(r),i.items=s,this.attr(t,i)}}function F$(e,t,{ctor:n}){e.prototype[t]=function(r){const i=this.append(n);return t==="mark"&&(i.type=r),i}}function B$(e,t,{ctor:n}){e.prototype[t]=function(){return this.type=null,this.append(n)}}function RT(e){return t=>{for(const[n,r]of Object.entries(e)){const{type:i}=r;i==="value"?I$(t,n,r):i==="array"?L$(t,n,r):i==="object"?D$(t,n,r):i==="node"?F$(t,n,r):i==="container"?B$(t,n,r):i==="mix"&&N$(t,n,r)}return t}}function j6(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{type:"node",ctor:n}]))}const V6={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},k$=Object.assign(Object.assign({},V6),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),z$=Object.assign(Object.assign({},V6),{labelTransform:{type:"array"}});var U$=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let PT=class extends cR{changeData(t){var n;const r=this.getRoot();if(r)return this.attr("data",t),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(i=>{i.attr("data",t)}),r==null?void 0:r.render()}getView(){const t=this.getRoot(),{views:n}=t.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var t;return(t=this.getView())===null||t===void 0?void 0:t.scale}getScaleByChannel(t){const n=this.getScale();if(n)return n[t]}getCoordinate(){var t;return(t=this.getView())===null||t===void 0?void 0:t.coordinate}getTheme(){var t;return(t=this.getView())===null||t===void 0?void 0:t.theme}getGroup(){const t=this._key;return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}show(){const t=this.getGroup();t&&!t.isVisible()&&VM(t)}hide(){const t=this.getGroup();t&&t.isVisible()&&jM(t)}};PT=U$([RT(z$)],PT);var j$=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let dR=class extends cR{changeData(t){const n=this.getRoot();if(n)return this.attr("data",t),n==null?void 0:n.render()}getMark(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(!n)return;const{markState:r}=n,i=Array.from(r.keys()).find(s=>s.key===this.attr("key"));return r.get(i)}getScale(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(t){var n,r;const i=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(i)return(r=i==null?void 0:i.scale)===null||r===void 0?void 0:r[t]}getGroup(){const t=this.attr("key");return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}};dR=j$([RT(k$)],dR);var V$=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},H$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const W$="G2_CHART_KEY";class G$ extends PT{constructor(t){const{container:n,canvas:r,renderer:i,plugins:s,lib:l}=t,c=H$(t,["container","canvas","renderer","plugins","lib"]);super(c,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=uw(()=>{this.forceFit()},300),this._renderer=i||new s2,this._plugins=s||[],this._container=_$(n),this._emitter=new zo,this._context={library:Object.assign(Object.assign({},l),iy),emitter:this._emitter,canvas:r},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._context.canvas.getConfig().supportsCSSTransform=!0,this._bindAutoFit(),this._rendering=!0;const t=new Promise((s,l)=>v$(this._computedOptions(),this._context,this._createResolve(s),this._createReject(l))),[n,r,i]=P$();return t.then(r).catch(i).then(()=>this._renderTrailing()),n}options(t){if(arguments.length===0)return E$(this);const{type:n}=t;return n&&(this._previousDefinedType=n),R$(this,t,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(t,n,r){return this._emitter.on(t,n,r),this}once(t,n){return this._emitter.once(t,n),this}emit(t,...n){return this._emitter.emit(t,...n),this}off(t,n){return this._emitter.off(t,n),this}clear(){const t=this.options();this.emit(cl.BEFORE_CLEAR),this._reset(),D6(t,this._context,!1),this.emit(cl.AFTER_CLEAR)}destroy(){const t=this.options();this.emit(cl.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),D6(t,this._context,!0),this._container[F6]&&b$(this._container),this.emit(cl.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:t,height:n}=hR(this.options(),this._container);if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(cl.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(cl.AFTER_CHANGE_SIZE)}),r}changeSize(t,n){if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(cl.BEFORE_CHANGE_SIZE),this.attr("width",t),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(cl.AFTER_CHANGE_SIZE)}),r}_create(){const{library:t}=this._context,n=s=>s.startsWith("mark.")||s==="component.axisX"||s==="component.axisY"||s==="component.legends",r=["mark.mark",...Object.keys(t).filter(n)];this._marks={};for(const s of r){const l=s.split(".").pop();class c extends dR{constructor(){super({},l)}}this._marks[l]=c,this[l]=function(h){const p=this.append(c);return l==="mark"&&(p.type=h),p}}const i=["composition.view",...Object.keys(t).filter(s=>s.startsWith("composition.")&&s!=="composition.mark")];this._compositions=Object.fromEntries(i.map(s=>{const l=s.split(".").pop();let c=class extends PT{constructor(){super({},l)}};return c=V$([RT(j6(this._marks))],c),[l,c]}));for(const s of Object.values(this._compositions))RT(j6(this._compositions))(s);for(const s of i){const l=s.split(".").pop();this[l]=function(){const c=this._compositions[l];return this.type=null,this.append(c)}}}_reset(){const t=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||t.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const t=this._trailingResolve.bind(this);this._trailingResolve=null,t(this)}).catch(t=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(t)}))}_createResolve(t){return()=>{this._rendering=!1,t(this)}}_createReject(t){return n=>{this._rendering=!1,t(n)}}_computedOptions(){const t=this.options(),{key:n=W$}=t,{width:r,height:i,depth:s}=hR(t,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},t),{width:r,height:i,depth:s})}_createCanvas(){const{width:t,height:n}=hR(this.options(),this._container);this._plugins.push(new eg),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new XO({container:this._container,width:t,height:n,renderer:this._renderer})}_addToTrailing(){var t;return(t=this._trailingResolve)===null||t===void 0||t.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const t=this.options(),{autoFit:n}=t;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function Z$(e,t){class n extends e{constructor(i){super(Object.assign(Object.assign({},i),{lib:t}))}}return n}Kr.enableCSSParsing=!1;var X$=Object.prototype.hasOwnProperty,pR=function(e,t){if(e===null||!vv(e))return{};var n={};return SM(t,function(r){X$.call(e,r)&&(n[r]=e[r])}),n};function H6(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function H2(e,t,n,r,i){for(var s=e.children,l,c=-1,h=s.length,p=e.value&&(r-t)/e.value;++c<h;)l=s[c],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*p}function Y$(){var e=1,t=1,n=0,r=!1;function i(l){var c=l.height+1;return l.x0=l.y0=n,l.x1=e,l.y1=t/c,l.eachBefore(s(t,c)),r&&l.eachBefore(H6),l}function s(l,c){return function(h){h.children&&H2(h,h.x0,l*(h.depth+1)/c,h.x1,l*(h.depth+2)/c);var p=h.x0,v=h.y0,y=h.x1-n,b=h.y1-n;y<p&&(p=y=(p+y)/2),b<v&&(v=b=(v+b)/2),h.x0=p,h.y0=v,h.x1=y,h.y1=b}}return i.round=function(l){return arguments.length?(r=!!l,i):r},i.size=function(l){return arguments.length?(e=+l[0],t=+l[1],i):[e,t]},i.padding=function(l){return arguments.length?(n=+l,i):n},i}var $$=D(9783);function q$(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function K$(){return this.eachAfter(q$)}var vR=D(64599);function Q$(e,t){var n=-1,r=vR(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;e.call(t,s,++n,this)}}catch(l){r.e(l)}finally{r.f()}return this}function J$(e,t){for(var n=this,r=[n],i,s,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function eq(e,t){for(var n=this,r=[n],i=[],s,l,c,h=-1;n=r.pop();)if(i.push(n),s=n.children)for(l=0,c=s.length;l<c;++l)r.push(s[l]);for(;n=i.pop();)e.call(t,n,++h,this);return this}function tq(e,t){var n=-1,r=vR(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;if(e.call(t,s,++n,this))return s}}catch(l){r.e(l)}finally{r.f()}}function nq(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function rq(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function iq(e){for(var t=this,n=oq(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function oq(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function aq(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function sq(){return Array.from(this)}function lq(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function uq(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}var W6=D(15009),cq=W6().mark(G6);function G6(){var e,t,n,r,i,s;return W6().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:e=this,n=[e];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){c.next=8;break}return c.next=5,e;case 5:if(r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);c.next=2;break;case 8:if(n.length){c.next=1;break}case 9:case"end":return c.stop()}},cq,this)}function Db(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=dq)):t===void 0&&(t=hq);for(var n=new Nb(e),r,i=[n],s,l,c,h;r=i.pop();)if((l=t(r.data))&&(h=(l=Array.from(l)).length))for(r.children=l,c=h-1;c>=0;--c)i.push(s=l[c]=new Nb(l[c])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Z6)}function fq(){return Db(this).eachBefore(pq)}function hq(e){return e.children}function dq(e){return Array.isArray(e)?e[1]:null}function pq(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Z6(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Nb(e){this.data=e,this.depth=this.height=0,this.parent=null}Nb.prototype=Db.prototype=$$({constructor:Nb,count:K$,each:Q$,eachAfter:eq,eachBefore:J$,find:tq,sum:nq,sort:rq,path:iq,ancestors:aq,descendants:sq,leaves:lq,links:uq,copy:fq},Symbol.iterator,G6);function mR(e,t){for(var n in t)t.hasOwnProperty(n)&&n!=="constructor"&&t[n]!==void 0&&(e[n]=t[n])}function vq(e,t,n,r){return t&&mR(e,t),n&&mR(e,n),r&&mR(e,r),e}function gR(e){return(0,Lo.Z)(e)?0:uy(e)?e.length:Object.keys(e).length}const mq={field:"value",size:[1,1],round:!1,padding:0,sort:(e,t)=>t.value-e.value,as:["x","y"],ignoreParentValue:!0},gq="nodeIndex",W2="childNodeCount",yq="nodeAncestor",yR="Invalid field: it must be a string!";function _q(e,t){const{field:n,fields:r}=e;if(Gl(n))return n;if(Hr(n))return console.warn(yR),n[0];if(console.warn(`${yR} will try to get fields instead.`),Gl(r))return r;if(Hr(r)&&r.length)return r[0];if(t)return t;throw new TypeError(yR)}function bq(e){const t=[];if(e&&e.each){let n,r;e.each(i=>{var s,l;i.parent!==n?(n=i.parent,r=0):r+=1;const c=XL((((s=i.ancestors)===null||s===void 0?void 0:s.call(i))||[]).map(h=>t.find(p=>p.name===h.name)||h),({depth:h})=>h>0&&h<i.depth);i[yq]=c,i[W2]=((l=i.children)===null||l===void 0?void 0:l.length)||0,i[gq]=r,t.push(i)})}else e&&e.eachNode&&e.eachNode(n=>{t.push(n)});return t}function xq(e,t){t=vq({},mq,t);const n=t.as;if(!Hr(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=_q(t)}catch(h){console.warn(h)}const s=(h=>Y$().size(t.size).round(t.round).padding(t.padding)(Db(h).sum(p=>gR(p.children)?t.ignoreParentValue?0:p[r]-X4(p.children,(v,y)=>v+y[r],0):p[r]).sort(t.sort)))(e),l=n[0],c=n[1];return s.each(h=>{var p,v;h[l]=[h.x0,h.x1,h.x1,h.x0],h[c]=[h.y1,h.y1,h.y0,h.y0],h.name=h.name||((p=h.data)===null||p===void 0?void 0:p.name)||((v=h.data)===null||v===void 0?void 0:v.label),h.data.name=h.name,["x0","x1","y0","y1"].forEach(y=>{n.indexOf(y)===-1&&delete h[y]})}),bq(s)}var Eq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Fb="sunburst",_R="markType",w0e="value",X6="path",IT="ancestor-node";function Sq(e){const{data:t,encode:n}=e,{color:r,value:i}=n,l=xq(t,{field:i,type:"hierarchy.partition",as:["x","y"]}),c=[];return l.forEach(h=>{var p,v,y,b;if(h.depth===0)return null;let T=h.data.name;const M=[T];let R=Object.assign({},h);for(;R.depth>1;)T=`${(p=R.parent.data)===null||p===void 0?void 0:p.name} / ${T}`,M.unshift((v=R.parent.data)===null||v===void 0?void 0:v.name),R=R.parent;const L=Object.assign(Object.assign(Object.assign({},pR(h.data,[i])),{[X6]:T,[IT]:R.data.name}),h);r&&r!==IT&&(L[r]=h.data[r]||((b=(y=h.parent)===null||y===void 0?void 0:y.data)===null||b===void 0?void 0:b[r])),c.push(L)}),c.map(h=>Object.assign(Object.assign({},h),{x:h.x.slice(0,2),y:[h.y[2],h.y[0]],fillOpacity:Math.pow(.85,h.depth)}))}const Y6={id:Fb,encode:{x:"x",y:"y",key:X6,color:IT,value:"value"},axis:{x:!1,y:!1},style:{[_R]:Fb,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[W2]:W2,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},$6=e=>{const{encode:t,data:n=[],legend:r}=e,i=Eq(e,["encode","data","legend"]),s=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(bl(i,["coordinate","innerRadius"],.2),1e-5)}),l=Object.assign(Object.assign({},Y6.encode),t),{value:c}=l,h=Sq({encode:l,data:n});return[ui({},Y6,Object.assign(Object.assign({type:"rect",data:h,encode:l,tooltip:{title:"path",items:[p=>({name:c,value:p[c]})]}},i),{coordinate:s}))]};$6.props={};var wq=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return SM(e,function(n,r){wc(e)&&r==="prototype"||t.push(r)}),t},bR=wq,Tq=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Aq=e=>e.querySelectorAll(".element").filter(t=>bl(t,["style",_R])===Fb);function Cq(e){return Ua(e).select(`.${E_}`).node()}const Oq={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function Mq(e={}){const{breadCrumb:t={},fixedColor:n=!0}=e,r=ui({},Oq,t);return i=>{const{update:s,setState:l,container:c,view:h,options:p}=i,v=Cq(c),y=p.marks.find(({id:z})=>z===Fb),{state:b}=y,T=new $l;v.appendChild(T);const M=(z,H)=>Tq(this,void 0,void 0,function*(){if(T.removeChildren(),z){const X=new Vs({style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});T.appendChild(X);let Y="";const ne=z==null?void 0:z.split(" / ");let ve=r.style.y,Ee=T.getBBox().width;const Ie=v.getBBox().width,Ye=ne.map(($e,St)=>{const Qe=new Vs({style:Object.assign(Object.assign({x:Ee,text:" / "},r.style),{y:ve})});T.appendChild(Qe),Ee+=Qe.getBBox().width,Y=`${Y}${$e} / `;const lt=new Vs({name:Y.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:$e,x:Ee,depth:St+1},r.style),{y:ve})});return T.appendChild(lt),Ee+=lt.getBBox().width,Ee>Ie&&(ve=T.getBBox().height,Ee=0,Qe.attr({x:Ee,y:ve}),Ee+=Qe.getBBox().width,lt.attr({x:Ee,y:ve}),Ee+=lt.getBBox().width),lt});[X,...Ye].forEach(($e,St)=>{if(St===Ye.length)return;const Qe=Object.assign({},$e.attributes);$e.attr("cursor","pointer"),$e.addEventListener("mouseenter",()=>{$e.attr(r.active)}),$e.addEventListener("mouseleave",()=>{$e.attr(Qe)}),$e.addEventListener("click",()=>{M($e.name,bl($e,["style","depth"]))})})}l("drillDown",X=>{const{marks:Y}=X,ne=Y.map(ve=>{if(ve.id!==Fb&&ve.type!=="rect")return ve;const{data:Ee}=ve,Ie=Object.fromEntries(["color"].map($e=>[$e,{domain:h.scale[$e].getOptions().domain}])),Ye=Ee.filter($e=>{const St=$e.path;return n&&($e[IT]=St.split(" / ")[H]),z?new RegExp(`^${z}.+`).test(St):!0});return ui({},ve,n?{data:Ye}:{data:Ye,scale:Ie})});return Object.assign(Object.assign({},X),{marks:ne})}),yield s()}),R=z=>{const H=z.target;if(bl(H,["style",_R])!==Fb||bl(H,["markType"])!=="rect"||!bl(H,["style",W2]))return;const X=bl(H,["__data__","key"]),Y=bl(H,["style","depth"]);H.style.cursor="pointer",M(X,Y)};v.addEventListener("click",R);const L=bR(Object.assign(Object.assign({},b.active),b.inactive)),N=()=>{Aq(v).forEach(H=>{const X=bl(H,["style",W2]);if(bl(H,["style","cursor"])!=="pointer"&&X){H.style.cursor="pointer";const ne=pR(H.attributes,L);H.addEventListener("mouseenter",()=>{H.attr(b.active)}),H.addEventListener("mouseleave",()=>{H.attr(ui(ne,b.inactive))})}})};return v.addEventListener("mousemove",N),()=>{T.remove(),v.removeEventListener("click",R),v.removeEventListener("mousemove",N)}}}Kr.enableCSSParsing=!1;function Rq(){return{"interaction.drillDown":Mq,"mark.sunburst":$6}}const q6=()=>[["cartesian"]];q6.props={};const xR=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];xR.props={transform:!0};const Pq=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},K6=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Pq(e);return[...xR(),...I_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};K6.props={};const ER=()=>[["parallel",0,1,0,1]];ER.props={};const Q6=({focusX:e=0,focusY:t=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",e,t,n,r,i]];Q6.props={transform:!0};const J6=e=>{const{startAngle:t=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=e;return[...ER(),...I_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};J6.props={};const eN=({value:e})=>t=>t.map(()=>e);eN.props={};const tN=({value:e})=>t=>t.map(n=>n[e]);tN.props={};const nN=({value:e})=>t=>t.map(e);nN.props={};const rN=({value:e})=>()=>e;rN.props={};function ku(e,t){if(e!==null)return{type:"column",value:e,field:t}}function LT(e,t){const n=ku(e,t);return Object.assign(Object.assign({},n),{inferred:!0})}function DT(e,t){if(e!==null)return{type:"column",value:e,field:t,visual:!0}}function Iq(e,t){const n=ku(e,t);return Object.assign(Object.assign({},n),{constant:!1})}function Ey(e,t){const n=[];for(const r of e)n[r]=t;return n}function tl(e,t){const n=e[t];if(!n)return[null,null];const{value:r,field:i=null}=n;return[r,i]}function G2(e,...t){for(const n of t)if(typeof n=="string"){const[r,i]=tl(e,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function Z2(e){return e instanceof Date?!1:typeof e=="object"}const X2=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;return r!==void 0?[e,t]:[e,ui({},t,{encode:{y1:LT(Ey(e,0))}})]};X2.props={};const $_=()=>(e,t)=>{const{encode:n}=t,{x:r}=n;return r!==void 0?[e,t]:[e,ui({},t,{encode:{x:LT(Ey(e,0))},scale:{x:{guide:null}}})]};$_.props={};const q_=(e,t)=>N2(Object.assign({colorAttribute:"fill"},e),t);q_.props=Object.assign(Object.assign({},N2.props),{defaultMarker:"square"});const NT=(e,t)=>N2(Object.assign({colorAttribute:"stroke"},e),t);NT.props=Object.assign(Object.assign({},N2.props),{defaultMarker:"hollowSquare"});function Bb(){}function iN(e){this._context=e}iN.prototype={areaStart:Bb,areaEnd:Bb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SR(e){return new iN(e)}var oN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Lq(e,t,n){const[r,i,s,l]=e;if(Cu(n)){const p=[t?t[0][0]:i[0],i[1]],v=[t?t[3][0]:s[0],s[1]];return[r,p,v,l]}const c=[i[0],t?t[0][1]:i[1]],h=[s[0],t?t[3][1]:s[1]];return[r,c,h,l]}const wR=(e,t)=>{const{adjustPoints:n=Lq}=e,r=oN(e,["adjustPoints"]),{coordinate:i,document:s}=t;return(l,c,h,p)=>{const{index:v}=c,{color:y}=h,b=oN(h,["color"]),T=p[v+1],M=n(l,T,i),R=!!Cu(i),[L,N,z,H]=R?oT(M):M,{color:X=y,opacity:Y}=c,ne=vy().curve(SR)([L,N,z,H]);return Ua(s.createElement("path",{})).call(ma,b).style("path",ne).style("fill",X).style("fillOpacity",Y).call(ma,r).node()}};wR.props={defaultMarker:"square"};function Dq(e,t,n){const[r,i,s,l]=e;if(Cu(n)){const p=[t?t[0][0]:(i[0]+s[0])/2,i[1]],v=[t?t[3][0]:(i[0]+s[0])/2,s[1]];return[r,p,v,l]}const c=[i[0],t?t[0][1]:(i[1]+s[1])/2],h=[s[0],t?t[3][1]:(i[1]+s[1])/2];return[r,c,h,l]}const aN=(e,t)=>wR(Object.assign({adjustPoints:Dq},e),t);aN.props={defaultMarker:"square"};function Y2(e){return Math.abs(e)>10?String(e):e.toString().padStart(2,"0")}function Nq(e){const t=e.getFullYear(),n=Y2(e.getMonth()+1),r=Y2(e.getDate()),i=`${t}-${n}-${r}`,s=e.getHours(),l=e.getMinutes(),c=e.getSeconds();return s||l||c?`${i} ${Y2(s)}:${Y2(l)}:${Y2(c)}`:i}const FT=(e={})=>{const{channel:t="x"}=e;return(n,r)=>{const{encode:i}=r,{tooltip:s}=r;if(gv(s))return[n,r];const{title:l}=s;if(l!==void 0)return[n,r];const c=Object.keys(i).filter(p=>p.startsWith(t)).filter(p=>!i[p].inferred).map(p=>tl(i,p)).filter(([p])=>p).map(p=>p[0]);if(c.length===0)return[n,r];const h=[];for(const p of n)h[p]={value:c.map(v=>v[p]instanceof Date?Nq(v[p]):v[p]).join(", ")};return[n,ui({},r,{tooltip:{title:h}})]}};FT.props={};const BT=e=>{const{channel:t}=e;return(n,r)=>{const{encode:i,tooltip:s}=r;if(gv(s))return[n,r];const{items:l=[]}=s;if(!l||l.length>0)return[n,r];const h=(Array.isArray(t)?t:[t]).flatMap(p=>Object.keys(i).filter(v=>v.startsWith(p)).map(v=>{const{field:y,value:b,inferred:T=!1,aggregate:M}=i[v];return T?null:M&&b?{channel:v}:y?{field:y}:b?{channel:v}:null}).filter(v=>v!==null));return[n,ui({},r,{tooltip:{items:h}})]}};BT.props={};var Fq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const sN=()=>(e,t)=>{const{encode:n}=t,{key:r}=n,i=Fq(n,["key"]);if(r!==void 0)return[e,t];const s=Object.values(i).map(({value:c})=>c),l=e.map(c=>s.filter(Array.isArray).map(h=>h[c]).join("-"));return[e,ui({},t,{encode:{key:ku(l)}})]};sN.props={};function lN(e={}){const{shapes:t}=e;return[{name:"color"},{name:"opacity"},{name:"shape",range:t},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function Jd(e={}){return[...lN(e),{name:"title",scale:"identity"}]}function T0e(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function Sy(){return[{type:FT,channel:"color"},{type:BT,channel:["x","y"]}]}function kb(){return[{type:FT,channel:"x"},{type:BT,channel:["y"]}]}function Bq(){return[{type:FT,channel:"color"},{type:BT,channel:["position"]}]}function zb(e={}){return lN(e)}function tf(){return[{type:sN}]}function xf(){return[]}function TR(e,t){return e.getBandWidth(e.invert(t))}function K_(e,t,n={}){const{x:r,y:i,series:s}=t,{x:l,y:c,series:h}=e,{style:{bandOffset:p=h?0:.5,bandOffsetX:v=p,bandOffsetY:y=p}={}}=n,b=!!(l!=null&&l.getBandWidth),T=!!(c!=null&&c.getBandWidth),M=!!(h!=null&&h.getBandWidth);return!b&&!T?R=>R:(R,L)=>{const N=b?TR(l,r[L]):0,z=T?TR(c,i[L]):0,X=M&&s?(()=>(TR(h,s[L])/2+ +s[L])*N)():0,[Y,ne]=R;return[Y+v*N+X,ne+y*z]}}function kT(e){return parseFloat(e)/100}function AR(e,t,n,r){const{x:i,y:s}=n,{innerWidth:l,innerHeight:c}=r.getOptions(),h=Array.from(e,p=>{const v=i[p],y=s[p],b=typeof v=="string"?kT(v)*l:+v,T=typeof y=="string"?kT(y)*c:+y;return[[b,T]]});return[e,h]}function dm(e){return typeof e=="function"?e:t=>t[e]}function CR(e,t){return Array.from(e,dm(t))}function OR(e,t){const{source:n=v=>v.source,target:r=v=>v.target,value:i=v=>v.value}=t,{links:s,nodes:l}=e,c=CR(s,n),h=CR(s,r),p=CR(s,i);return{links:s.map((v,y)=>({target:h[y],source:c[y],value:p[y]})),nodes:l||Array.from(new Set([...c,...h]),v=>({key:v}))}}function uN(e,t){return e.getBandWidth(e.invert(t))}const cN={rect:q_,hollow:NT,funnel:wR,pyramid:aN},fN=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,series:c,size:h}=n,p=t.x,v=t.series,[y]=r.getSize(),b=h?h.map(R=>+R/y):null,T=h?(R,L,N)=>{const z=R+L/2,H=b[N];return[z-H/2,z+H/2]}:(R,L,N)=>[R,R+L],M=Array.from(e,R=>{const L=uN(p,i[R]),N=v?uN(v,c==null?void 0:c[R]):1,z=L*N,H=(+(c==null?void 0:c[R])||0)*L,X=+i[R]+H,[Y,ne]=T(X,z,R),ve=+s[R],Ee=+l[R];return[[Y,ve],[ne,ve],[ne,Ee],[Y,Ee]].map(Qe=>r.map(Qe))});return[e,M]};fN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:cN,channels:[...Jd({shapes:Object.keys(cN)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...tf(),{type:X2},{type:$_}],postInference:[...xf(),...kb()],interaction:{shareTooltip:!0}};const hN={rect:q_,hollow:NT},dN=()=>(e,t,n,r)=>{const{x:i,x1:s,y:l,y1:c}=n,h=Array.from(e,p=>{const v=[+i[p],+l[p]],y=[+s[p],+l[p]],b=[+s[p],+c[p]],T=[+i[p],+c[p]];return[v,y,b,T].map(M=>r.map(M))});return[e,h]};dN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:hN,channels:[...Jd({shapes:Object.keys(hN)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...tf(),{type:X2}],postInference:[...xf(),...kb()],interaction:{shareTooltip:!0}};var pN=MR(R2);function vN(e){this._curve=e}vN.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function MR(e){function t(n){return new vN(e(n))}return t._curve=e,t}function $2(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(MR(n)):t()._curve},e}function kq(){return $2(vy().curve(pN))}var mN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const zq=xb(e=>{const{d1:t,d2:n,style1:r,style2:i}=e.attributes,s=e.ownerDocument;Ua(e).maybeAppend("line",()=>s.createElement("path",{})).style("d",t).call(ma,r),Ua(e).maybeAppend("line1",()=>s.createElement("path",{})).style("d",n).call(ma,i)});function Uq(e,t){const n=[],r=[];let i=!1,s=null;for(const l of e)!t(l[0])||!t(l[1])?i=!0:(n.push(l),i&&(i=!1,r.push([s,l])),s=l);return[n,r]}const L0=(e,t)=>{const{curve:n,gradient:r=!1,gradientColor:i="between",defined:s=v=>!Number.isNaN(v)&&v!==void 0&&v!==null,connect:l=!1}=e,c=mN(e,["curve","gradient","gradientColor","defined","connect"]),{coordinate:h,document:p}=t;return(v,y,b)=>{const{color:T,lineWidth:M}=b,R=mN(b,["color","lineWidth"]),{color:L=T,size:N=M,seriesColor:z,seriesX:H,seriesY:X}=y,Y=ML(h,y),ne=Cu(h),ve=r&&z?CL(z,H,X,r,i,ne):L,Ee=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},R),ve&&{stroke:ve}),N&&{lineWidth:N}),Y&&{transform:Y}),c);let Ie;if(Bl(h)){const ht=h.getCenter();Ie=bt=>kq().angle((Ht,Ot)=>bb(Bc(bt[Ot],ht))).radius((Ht,Ot)=>cc(bt[Ot],ht)).defined(([Ht,Ot])=>s(Ht)&&s(Ot)).curve(n)(bt)}else Ie=vy().x(ht=>ht[0]).y(ht=>ht[1]).defined(([ht,bt])=>s(ht)&&s(bt)).curve(n);const[Ye,$e]=Uq(v,s),St=xo(Ee,"connect"),Qe=!!$e.length;if(!Qe||l&&!Object.keys(St).length)return Ua(p.createElement("path",{})).style("d",Ie(Ye)||[]).call(ma,Ee).node();if(Qe&&!l)return Ua(p.createElement("path",{})).style("d",Ie(v)).call(ma,Ee).node();const lt=ht=>ht.map(Ie).join(",");return Ua(new zq).style("style1",Object.assign(Object.assign({},Ee),St)).style("style2",Ee).style("d1",lt($e)).style("d2",Ie(v)).node()}};L0.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const gN=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=Bl(n)?SR:R2;return L0(Object.assign({curve:i},e),t)(...r)}};gN.props=Object.assign(Object.assign({},L0.props),{defaultMarker:"line"});function RR(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function PR(e,t){this._context=e,this._k=(1-t)/6}PR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:RR(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:RR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var A0e=function e(t){function n(r){return new PR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function IR(e,t){this._context=e,this._k=(1-t)/6}IR.prototype={areaStart:Bb,areaEnd:Bb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:RR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var C0e=function e(t){function n(r){return new IR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function yN(e,t,n){var r=e._x1,i=e._y1,s=e._x2,l=e._y2;if(e._l01_a>gd){var c=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,h=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*c-e._x0*e._l12_2a+e._x2*e._l01_2a)/h,i=(i*c-e._y0*e._l12_2a+e._y2*e._l01_2a)/h}if(e._l23_a>gd){var p=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,v=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*p+e._x1*e._l23_2a-t*e._l12_2a)/v,l=(l*p+e._y1*e._l23_2a-n*e._l12_2a)/v}e._context.bezierCurveTo(r,i,s,l,e._x2,e._y2)}function _N(e,t){this._context=e,this._alpha=t}_N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:yN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var O0e=function e(t){function n(r){return t?new _N(r,t):new PR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function bN(e,t){this._context=e,this._alpha=t}bN.prototype={areaStart:Bb,areaEnd:Bb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:yN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var xN=function e(t){function n(r){return t?new bN(r,t):new IR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function EN(e){return e<0?-1:1}function SN(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),c=(s*i+l*r)/(r+i);return(EN(s)+EN(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(c))||0}function wN(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function LR(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,c=(s-r)/3;e._context.bezierCurveTo(r+c,i+c*t,s-c,l-c*n,s,l)}function zT(e){this._context=e}zT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:LR(this,this._t0,wN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,LR(this,wN(this,n=SN(this,e,t)),n);break;default:LR(this,this._t0,n=SN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function TN(e){this._context=new AN(e)}(TN.prototype=Object.create(zT.prototype)).point=function(e,t){zT.prototype.point.call(this,t,e)};function AN(e){this._context=e}AN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function CN(e){return new zT(e)}function ON(e){return new TN(e)}var jq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const MN=(e,t)=>{const n=jq(e,[]),{coordinate:r}=t;return(...i)=>{const s=Bl(r)?xN:Cu(r)?ON:CN;return L0(Object.assign({curve:s},n),t)(...i)}};MN.props=Object.assign(Object.assign({},L0.props),{defaultMarker:"smooth"});function UT(e,t){this._context=e,this._t=t}UT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function RN(e){return new UT(e,.5)}function PN(e){return new UT(e,0)}function IN(e){return new UT(e,1)}const LN=(e,t)=>L0(Object.assign({curve:IN},e),t);LN.props=Object.assign(Object.assign({},L0.props),{defaultMarker:"hv"});const DN=(e,t)=>L0(Object.assign({curve:PN},e),t);DN.props=Object.assign(Object.assign({},L0.props),{defaultMarker:"vh"});const NN=(e,t)=>L0(Object.assign({curve:RN},e),t);NN.props=Object.assign(Object.assign({},L0.props),{defaultMarker:"hvh"});var Vq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Hq(e,t,n,r,i){const s=Bc(n,t),l=P0(s),c=l+Math.PI/2,h=[r/2*Math.cos(c),r/2*Math.sin(c)],p=[i/2*Math.cos(c),i/2*Math.sin(c)],v=[i/2*Math.cos(l),i/2*Math.sin(l)],y=[r/2*Math.cos(l),r/2*Math.sin(l)],b=iT(t,h),T=iT(n,p),M=iT(T,v),R=iT(n,v),L=Bc(R,p),N=Bc(n,p),z=Bc(t,h),H=Bc(z,y),X=Bc(t,y),Y=Bc(b,y);e.moveTo(...b),e.lineTo(...T),e.arcTo(...M,...R,i/2),e.arcTo(...L,...N,i/2),e.lineTo(...z),e.arcTo(...H,...X,r/2),e.arcTo(...Y,...b,r/2),e.closePath()}const FN=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{seriesSize:l,color:c}=i,{color:h}=s,p=Vq(s,["color"]),v=I0();for(let y=0;y<r.length-1;y++){const b=r[y],T=r[y+1],M=l[y],R=l[y+1];[...b,...T].every(iu)&&Hq(v,b,T,M,R)}return Ua(n.createElement("path",{})).call(ma,p).style("fill",c||h).style("d",v.toString()).call(ma,e).node()}};FN.props=Object.assign(Object.assign({},L0.props),{defaultMarker:"line"});const BN=()=>(e,t)=>{const{style:n={},encode:r}=t,{series:i}=r,{gradient:s}=n;return!s||i?[e,t]:[e,ui({},t,{encode:{series:DT(Ey(e,void 0))}})]};BN.props={};const DR=()=>(e,t)=>{const{encode:n}=t,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[e,t];const[s,l]=tl(n,"color");return[e,ui({},t,{encode:{series:ku(s,l)}})]};DR.props={};const kN={line:gN,smooth:MN,hv:LN,vh:DN,hvh:NN,trail:FN},Wq=(e,t,n,r)=>{var i,s;const{series:l,x:c,y:h}=n,{x:p,y:v}=t;if(c===void 0||h===void 0)throw new Error("Missing encode for x or y channel.");const y=l?Array.from(Fu(e,L=>l[L]).values()):[e],b=y.map(L=>L[0]).filter(L=>L!==void 0),T=(((i=p==null?void 0:p.getBandWidth)===null||i===void 0?void 0:i.call(p))||0)/2,M=(((s=v==null?void 0:v.getBandWidth)===null||s===void 0?void 0:s.call(v))||0)/2,R=Array.from(y,L=>L.map(N=>r.map([+c[N]+T,+h[N]+M])));return[b,R,y]},Gq=(e,t,n,r)=>{const i=Object.entries(n).filter(([l])=>l.startsWith("position")).map(([,l])=>l);if(i.length===0)throw new Error("Missing encode for position channel.");const s=Array.from(e,l=>{const c=i.map(v=>+v[l]),h=r.map(c),p=[];for(let v=0;v<h.length;v+=2)p.push([h[v],h[v+1]]);return p});return[e,s]},zN=()=>(e,t,n,r)=>(N_(r)?Gq:Wq)(e,t,n,r);zN.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:kN,channels:[...Jd({shapes:Object.keys(kN)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...tf(),{type:BN},{type:DR}],postInference:[...xf(),...kb(),...Bq()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var Zq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const NR=(e,t,n)=>[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]];NR.style=["fill"];const UN=NR.bind(void 0);UN.style=["stroke","lineWidth"];const jT=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]];jT.style=["fill"];const jN=jT.bind(void 0);jN.style=["fill"];const VN=jT.bind(void 0);VN.style=["stroke","lineWidth"];const FR=(e,t,n)=>{const r=n*.618;return[["M",e-r,t],["L",e,t-n],["L",e+r,t],["L",e,t+n],["Z"]]};FR.style=["fill"];const HN=FR.bind(void 0);HN.style=["stroke","lineWidth"];const BR=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]};BR.style=["fill"];const WN=BR.bind(void 0);WN.style=["stroke","lineWidth"];const kR=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]};kR.style=["fill"];const GN=kR.bind(void 0);GN.style=["stroke","lineWidth"];const zR=(e,t,n)=>{const r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]};zR.style=["fill"];const ZN=zR.bind(void 0);ZN.style=["stroke","lineWidth"];const UR=(e,t,n)=>{const r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]};UR.style=["fill"];const XN=UR.bind(void 0);XN.style=["stroke","lineWidth"];const YN=(e,t,n)=>[["M",e,t+n],["L",e,t-n]];YN.style=["stroke","lineWidth"];const $N=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]];$N.style=["stroke","lineWidth"];const qN=(e,t,n)=>[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]];qN.style=["stroke","lineWidth"];const KN=(e,t,n)=>[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]];KN.style=["stroke","lineWidth"];const QN=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];QN.style=["stroke","lineWidth"];const jR=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];jR.style=["stroke","lineWidth"];const JN=jR.bind(void 0);JN.style=["stroke","lineWidth"];const eF=(e,t,n)=>[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]];eF.style=["stroke","lineWidth"];const tF=(e,t,n)=>[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]];tF.style=["stroke","lineWidth"];const nF=(e,t,n)=>[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]];nF.style=["stroke","lineWidth"];const rF=(e,t,n)=>[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]];rF.style=["stroke","lineWidth"];const iF=(e,t,n)=>[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]];iF.style=["stroke","lineWidth"];const Ub=new Map([["bowtie",UR],["cross",$N],["dash",JN],["diamond",FR],["dot",jR],["hexagon",zR],["hollowBowtie",XN],["hollowDiamond",HN],["hollowHexagon",ZN],["hollowPoint",UN],["hollowSquare",VN],["hollowTriangle",WN],["hollowTriangleDown",GN],["hv",tF],["hvh",rF],["hyphen",QN],["line",YN],["plus",KN],["point",NR],["rect",jN],["smooth",eF],["square",jT],["tick",qN],["triangleDown",kR],["triangle",BR],["vh",nF],["vhv",iF]]);function Xq(e,t){var{d:n,fill:r,strokeWidth:i,path:s,stroke:l,lineWidth:c,color:h}=t,p=Zq(t,["d","fill","strokeWidth","path","stroke","lineWidth","color"]);const v=Ub.get(e)||Ub.get("point");return(...y)=>new gl({style:Object.assign(Object.assign({},p),{path:v(...y),stroke:v.style.includes("stroke")?h||l:"",fill:v.style.includes("fill")?h||r:"",lineWidth:v.style.includes("lineWidth")?c||c||2:0})})}function M0e(e,t){Ub.set(e,t)}function R0e(e){Ub.delete(e)}var Yq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $q(e,t,n,r){if(t.length===1)return;const{size:i}=n;if(e==="fixed")return i;if(e==="normal"||Lw(r)){const[[s,l],[c,h]]=t,p=Math.abs((c-s)/2),v=Math.abs((h-l)/2);return Math.max(0,(p+v)/2)}return i}const Hs=(e,t)=>{const{colorAttribute:n,symbol:r,mode:i="auto"}=e,s=Yq(e,["colorAttribute","symbol","mode"]),l=Ub.get(r)||Ub.get("point"),{coordinate:c,document:h}=t;return(p,v,y)=>{const{lineWidth:b,color:T}=y,M=s.stroke?b||1:b,{color:R=T,transform:L,opacity:N}=v,[z,H]=RL(p),Y=$q(i,p,v,c)||s.r||y.r;return Ua(h.createElement("path",{})).call(ma,y).style("fill","transparent").style("d",l(z,H,Y)).style("lineWidth",M).style("transform",L).style("stroke",R).style(OL(e),N).style(n,R).call(ma,s).node()}};Hs.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const oF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"point"},e),t);oF.props=Object.assign({defaultMarker:"hollowPoint"},Hs.props);const aF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"diamond"},e),t);aF.props=Object.assign({defaultMarker:"hollowDiamond"},Hs.props);const sF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},e),t);sF.props=Object.assign({defaultMarker:"hollowHexagon"},Hs.props);const lF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"square"},e),t);lF.props=Object.assign({defaultMarker:"hollowSquare"},Hs.props);const uF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},e),t);uF.props=Object.assign({defaultMarker:"hollowTriangleDown"},Hs.props);const cF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"triangle"},e),t);cF.props=Object.assign({defaultMarker:"hollowTriangle"},Hs.props);const fF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},e),t);fF.props=Object.assign({defaultMarker:"hollowBowtie"},Hs.props);const hF=(e,t)=>Hs(Object.assign({colorAttribute:"fill",symbol:"point"},e),t);hF.props=Object.assign({defaultMarker:"point"},Hs.props);const dF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"plus"},e),t);dF.props=Object.assign({defaultMarker:"plus"},Hs.props);const pF=(e,t)=>Hs(Object.assign({colorAttribute:"fill",symbol:"diamond"},e),t);pF.props=Object.assign({defaultMarker:"diamond"},Hs.props);const vF=(e,t)=>Hs(Object.assign({colorAttribute:"fill",symbol:"square"},e),t);vF.props=Object.assign({defaultMarker:"square"},Hs.props);const mF=(e,t)=>Hs(Object.assign({colorAttribute:"fill",symbol:"triangle"},e),t);mF.props=Object.assign({defaultMarker:"triangle"},Hs.props);const gF=(e,t)=>Hs(Object.assign({colorAttribute:"fill",symbol:"hexagon"},e),t);gF.props=Object.assign({defaultMarker:"hexagon"},Hs.props);const yF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"cross"},e),t);yF.props=Object.assign({defaultMarker:"cross"},Hs.props);const _F=(e,t)=>Hs(Object.assign({colorAttribute:"fill",symbol:"bowtie"},e),t);_F.props=Object.assign({defaultMarker:"bowtie"},Hs.props);const bF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},e),t);bF.props=Object.assign({defaultMarker:"hyphen"},Hs.props);const xF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"line"},e),t);xF.props=Object.assign({defaultMarker:"line"},Hs.props);const EF=(e,t)=>Hs(Object.assign({colorAttribute:"stroke",symbol:"tick"},e),t);EF.props=Object.assign({defaultMarker:"tick"},Hs.props);const SF=(e,t)=>Hs(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},e),t);SF.props=Object.assign({defaultMarker:"triangleDown"},Hs.props);const VT=()=>(e,t)=>{const{encode:n}=t,{y:r}=n;return r!==void 0?[e,t]:[e,ui({},t,{encode:{y:LT(Ey(e,0))},scale:{y:{guide:null}}})]};VT.props={};const wF=()=>(e,t)=>{const{encode:n}=t,{size:r}=n;return r!==void 0?[e,t]:[e,ui({},t,{encode:{size:DT(Ey(e,3))}})]};wF.props={};const TF={hollow:oF,hollowDiamond:aF,hollowHexagon:sF,hollowSquare:lF,hollowTriangleDown:uF,hollowTriangle:cF,hollowBowtie:fF,point:hF,plus:dF,diamond:pF,square:vF,triangle:mF,hexagon:gF,cross:yF,bowtie:_F,hyphen:bF,line:xF,tick:EF,triangleDown:SF},AF=e=>(t,n,r,i)=>{const{x:s,y:l,x1:c,y1:h,size:p,dx:v,dy:y}=r,[b,T]=i.getSize(),M=K_(n,r,e),R=N=>{const z=+((v==null?void 0:v[N])||0),H=+((y==null?void 0:y[N])||0),X=c?(+s[N]+ +c[N])/2:+s[N],Y=h?(+l[N]+ +h[N])/2:+l[N],ne=X+z,ve=Y+H;return[ne,ve]},L=p?Array.from(t,N=>{const[z,H]=R(N),X=+p[N],Y=X/b,ne=X/T,ve=[z-Y,H-ne],Ee=[z+Y,H+ne];return[i.map(M(ve,N)),i.map(M(Ee,N))]}):Array.from(t,N=>[i.map(M(R(N),N))]);return[t,L]};AF.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:TF,channels:[...Jd({shapes:Object.keys(TF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...tf(),{type:$_},{type:VT}],postInference:[...xf(),{type:wF},...Sy()]};const CF=(e,t)=>{const{coordinate:n}=t;return(r,i,s)=>{const{color:l,text:c="",fontSize:h,rotate:p=0,transform:v=""}=i,y={text:String(c),stroke:l,fill:l,fontSize:h},[[b,T]]=r;return Ua(new BL).style("x",b).style("y",T).call(ma,s).style("transform",`${v}rotate(${+p})`).style("coordCenter",n.getCenter()).call(ma,y).call(ma,e).node()}};CF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var VR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function qq(e){const t=e/Math.sqrt(2),n=e*Math.sqrt(2),[r,i]=[-t,t-n],[s,l]=[0,0],[c,h]=[t,t-n];return[["M",r,i],["A",e,e,0,1,1,c,h],["L",s,l],["Z"]]}function Kq(e){const{min:t,max:n}=e.getLocalBounds();return[(t[0]+n[0])*.5,(t[1]+n[1])*.5]}const Qq=xb(e=>{const t=e.attributes,{class:n,x:r,y:i}=t,s=VR(t,["class","x","y"]),l=xo(s,"marker"),{size:c=24}=l,h=()=>qq(c/2),p=Ua(e).maybeAppend("marker",()=>new kl({})).call(b=>b.node().update(Object.assign({symbol:h},l))).node(),[v,y]=Kq(p);Ua(e).maybeAppend("text","text").style("x",v).style("y",y).call(ma,s)}),OF=(e,t)=>{const n=VR(e,[]);return(r,i,s)=>{const{color:l}=s,c=VR(s,["color"]),{color:h=l,text:p=""}=i,v={text:String(p),stroke:h,fill:h},[[y,b]]=r;return Ua(new Qq).call(ma,c).style("x",y).style("y",b).call(ma,v).call(ma,n).node()}};OF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const HT=()=>(e,t)=>{const{data:n}=t;if(!Array.isArray(n)||n.some(Z2))return[e,t];const r=Array.isArray(n[0])?n:[n],i=r.map(l=>l[0]),s=r.map(l=>l[1]);return[e,ui({},t,{encode:{x:ku(i),y:ku(s)}})]};HT.props={};var MF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const WT=()=>(e,t)=>{const{data:n,style:r={}}=t,i=MF(t,["data","style"]),{x:s,y:l}=r,c=MF(r,["x","y"]);if(s==null||l==null)return[e,t];const h=s||0,p=l||0;return[[0],ui({},i,{data:[0],cartesian:!0,encode:{x:ku([h]),y:ku([p])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:c})]};WT.props={};const RF={text:CF,badge:OF},PF=e=>{const{cartesian:t=!1}=e;return t?AR:(n,r,i,s)=>{const{x:l,y:c}=i,h=K_(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};PF.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:RF,channels:[...Jd({shapes:Object.keys(RF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize"},{name:"rotate"}],preInference:[...tf(),{type:HT},{type:WT}],postInference:[...xf(),...Sy()]};const HR=()=>(e,t)=>[e,ui({scale:{x:{padding:0},y:{padding:0}}},t)];HR.props={};const IF={cell:q_,hollow:NT},LF=()=>(e,t,n,r)=>{const{x:i,y:s}=n,l=t.x,c=t.y,h=Array.from(e,p=>{const v=l.getBandWidth(l.invert(+i[p])),y=c.getBandWidth(c.invert(+s[p])),b=+i[p],T=+s[p],M=[b,T],R=[b+v,T],L=[b+v,T+y],N=[b,T+y];return[M,R,L,N].map(z=>r.map(z))});return[e,h]};LF.props={defaultShape:"cell",defaultLabelShape:"label",shape:IF,composite:!1,channels:[...Jd({shapes:Object.keys(IF)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...tf(),{type:$_},{type:VT},{type:HR}],postInference:[...xf(),...Sy()]};function WR(e,t,n){var r=null,i=Qu(!0),s=null,l=R2,c=null,h=DM(p);e=typeof e=="function"?e:e===void 0?NL:Qu(+e),t=typeof t=="function"?t:Qu(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?FL:Qu(+n);function p(y){var b,T,M,R=(y=IL(y)).length,L,N=!1,z,H=new Array(R),X=new Array(R);for(s==null&&(c=l(z=h())),b=0;b<=R;++b){if(!(b<R&&i(L=y[b],b,y))===N)if(N=!N)T=b,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),M=b-1;M>=T;--M)c.point(H[M],X[M]);c.lineEnd(),c.areaEnd()}N&&(H[b]=+e(L,b,y),X[b]=+t(L,b,y),c.point(r?+r(L,b,y):H[b],n?+n(L,b,y):X[b]))}if(z)return c=null,z+""||null}function v(){return vy().defined(i).curve(l).context(s)}return p.x=function(y){return arguments.length?(e=typeof y=="function"?y:Qu(+y),r=null,p):e},p.x0=function(y){return arguments.length?(e=typeof y=="function"?y:Qu(+y),p):e},p.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:Qu(+y),p):r},p.y=function(y){return arguments.length?(t=typeof y=="function"?y:Qu(+y),n=null,p):t},p.y0=function(y){return arguments.length?(t=typeof y=="function"?y:Qu(+y),p):t},p.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Qu(+y),p):n},p.lineX0=p.lineY0=function(){return v().x(e).y(t)},p.lineY1=function(){return v().x(e).y(n)},p.lineX1=function(){return v().x(r).y(t)},p.defined=function(y){return arguments.length?(i=typeof y=="function"?y:Qu(!!y),p):i},p.curve=function(y){return arguments.length?(l=y,s!=null&&(c=l(s)),p):l},p.context=function(y){return arguments.length?(y==null?s=c=null:c=l(s=y),p):s},p}function Jq(){var e=WR().curve(pN),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,s=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return $2(n())},delete e.lineX0,e.lineEndAngle=function(){return $2(r())},delete e.lineX1,e.lineInnerRadius=function(){return $2(i())},delete e.lineY0,e.lineOuterRadius=function(){return $2(s())},delete e.lineY1,e.curve=function(l){return arguments.length?t(MR(l)):t()._curve},e}var eK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function tK(e,t){const n=[],r=[],i=[];let s=!1,l=null;const c=e.length/2;for(let h=0;h<c;h++){const p=e[h],v=e[h+c];if([...p,...v].some(y=>!t(y)))s=!0;else{if(n.push(p),r.push(v),s&&l){s=!1;const[y,b]=l;i.push([y,p,b,v])}l=[p,v]}}return[n.concat(r),i]}const DF=xb(e=>{const{areaPath:t,connectPath:n,areaStyle:r,connectStyle:i}=e.attributes,s=e.ownerDocument;Ua(e).maybeAppend("connect-path",()=>s.createElement("path",{})).style("d",n).call(ma,i),Ua(e).maybeAppend("area-path",()=>s.createElement("path",{})).style("d",t).call(ma,r)}),bv=(e,t)=>{const{curve:n,gradient:r=!1,defined:i=p=>!Number.isNaN(p)&&p!==void 0&&p!==null,connect:s=!1}=e,l=eK(e,["curve","gradient","defined","connect"]),{coordinate:c,document:h}=t;return(p,v,y)=>{const{color:b}=y,{color:T=b,seriesColor:M,seriesX:R,seriesY:L}=v,N=Cu(c),z=ML(c,v),H=r&&M?CL(M,R,L,r,void 0,N):T,X=Object.assign(Object.assign(Object.assign(Object.assign({},y),{stroke:H,fill:H}),z&&{transform:z}),l),[Y,ne]=tK(p,i),ve=xo(X,"connect"),Ee=!!ne.length,Ie=Ye=>Ua(h.createElement("path",{})).style("d",Ye||"").call(ma,X).node();if(Bl(c)){const Ye=$e=>{const St=c.getCenter(),Qe=$e.slice(0,$e.length/2),lt=$e.slice($e.length/2);return Jq().angle((ht,bt)=>bb(Bc(Qe[bt],St))).outerRadius((ht,bt)=>cc(Qe[bt],St)).innerRadius((ht,bt)=>cc(lt[bt],St)).defined((ht,bt)=>[...Qe[bt],...lt[bt]].every(i)).curve(n)(lt)};return!Ee||s&&!Object.keys(ve).length?Ie(Ye(Y)):Ee&&!s?Ie(Ye(p)):Ua(new DF).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},ve),l)).style("areaPath",Ye(p)).style("connectPath",ne.map(Ye).join("")).node()}else{const Ye=$e=>{const St=$e.slice(0,$e.length/2),Qe=$e.slice($e.length/2);return N?WR().y((lt,ht)=>St[ht][1]).x1((lt,ht)=>St[ht][0]).x0((lt,ht)=>Qe[ht][0]).defined((lt,ht)=>[...St[ht],...Qe[ht]].every(i)).curve(n)(St):WR().x((lt,ht)=>St[ht][0]).y1((lt,ht)=>St[ht][1]).y0((lt,ht)=>Qe[ht][1]).defined((lt,ht)=>[...St[ht],...Qe[ht]].every(i)).curve(n)(St)};return!Ee||s&&!Object.keys(ve).length?Ie(Ye(Y)):Ee&&!s?Ie(Ye(p)):Ua(new DF).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},ve),l)).style("areaPath",Ye(p)).style("connectPath",ne.map(Ye).join("")).node()}}};bv.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const NF=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=Bl(n)?SR:R2;return bv(Object.assign({curve:i},e),t)(...r)}};NF.props=Object.assign(Object.assign({},bv.props),{defaultMarker:"square"});var nK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const FF=(e,t)=>{const n=nK(e,[]),{coordinate:r}=t;return(...i)=>{const s=Bl(r)?xN:Cu(r)?ON:CN;return bv(Object.assign({curve:s},n),t)(...i)}};FF.props=Object.assign(Object.assign({},bv.props),{defaultMarker:"smooth"});const BF=(e,t)=>(...n)=>bv(Object.assign({curve:RN},e),t)(...n);BF.props=Object.assign(Object.assign({},bv.props),{defaultMarker:"hvh"});const kF=(e,t)=>(...n)=>bv(Object.assign({curve:PN},e),t)(...n);kF.props=Object.assign(Object.assign({},bv.props),{defaultMarker:"vh"});const zF=(e,t)=>(...n)=>bv(Object.assign({curve:IN},e),t)(...n);zF.props=Object.assign(Object.assign({},bv.props),{defaultMarker:"hv"});const UF={area:NF,smooth:FF,hvh:BF,vh:kF,hv:zF},jF=()=>(e,t,n,r)=>{var i,s;const{x:l,y:c,y1:h,series:p}=n,{x:v,y}=t,b=p?Array.from(Fu(e,N=>p[N]).values()):[e],T=b.map(N=>N[0]).filter(N=>N!==void 0),M=(((i=v==null?void 0:v.getBandWidth)===null||i===void 0?void 0:i.call(v))||0)/2,R=(((s=y==null?void 0:y.getBandWidth)===null||s===void 0?void 0:s.call(y))||0)/2,L=Array.from(b,N=>{const z=N.length,H=new Array(z*2);for(let X=0;X<N.length;X++){const Y=N[X];H[X]=r.map([+l[Y]+M,+c[Y]+R]),H[z+X]=r.map([+l[Y]+M,+h[Y]+R])}return H});return[T,L,b]};jF.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:UF,channels:[...Jd({shapes:Object.keys(UF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...tf(),{type:DR},{type:X2},{type:HR}],postInference:[...xf(),...kb()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const VF=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;if(r)return[e,t];const[i]=tl(n,"y");return[e,ui({},t,{encode:{y1:ku([...i])}})]};VF.props={};const HF=()=>(e,t)=>{const{encode:n}=t,{x1:r}=n;if(r)return[e,t];const[i]=tl(n,"x");return[e,ui({},t,{encode:{x1:ku([...i])}})]};HF.props={};var WF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const GR=(e,t)=>{const{arrow:n=!0,arrowSize:r="40%"}=e,i=WF(e,["arrow","arrowSize"]),{document:s}=t;return(l,c,h)=>{const{defaultColor:p}=h,v=WF(h,["defaultColor"]),{color:y=p,transform:b}=c,[T,M]=l,R=I0();if(R.moveTo(...T),R.lineTo(...M),n){const[L,N]=GW(T,M,{arrowSize:r});R.moveTo(...M),R.lineTo(...L),R.moveTo(...M),R.lineTo(...N)}return Ua(s.createElement("path",{})).call(ma,v).style("d",R.toString()).style("stroke",y).style("transform",b).call(ma,i).node()}};GR.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const GF=(e,t)=>{const{arrow:n=!1}=e;return(...r)=>GR(Object.assign(Object.assign({},e),{arrow:n}),t)(...r)};GF.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var ZF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const XF=(e,t)=>{const n=ZF(e,[]),{coordinate:r,document:i}=t;return(s,l,c)=>{const{color:h}=c,p=ZF(c,["color"]),{color:v=h,transform:y}=l,[b,T]=s,M=I0();if(M.moveTo(b[0],b[1]),Bl(r)){const R=r.getCenter();M.quadraticCurveTo(R[0],R[1],T[0],T[1])}else{const R=AL(b,T),L=cc(b,T)/2;M2(M,b,T,R,L)}return Ua(i.createElement("path",{})).call(ma,p).style("d",M.toString()).style("stroke",v).style("transform",y).call(ma,n).node()}};XF.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var YF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const $F=(e,t)=>{const n=YF(e,[]),{document:r}=t;return(i,s,l)=>{const{color:c}=l,h=YF(l,["color"]),{color:p=c,transform:v}=s,[y,b]=i,T=I0();return T.moveTo(y[0],y[1]),T.bezierCurveTo(y[0]/2+b[0]/2,y[1],y[0]/2+b[0]/2,b[1],b[0],b[1]),Ua(r.createElement("path",{})).call(ma,h).style("d",T.toString()).style("stroke",p).style("transform",v).call(ma,n).node()}};$F.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var qF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function rK(e,t,n,r){const i=I0();if(Bl(n)){const s=n.getCenter(),l=cc(e,s),h=(cc(t,s)-l)*r+l;return i.moveTo(e[0],e[1]),M2(i,e,t,s,h),i.lineTo(t[0],t[1]),i}return Cu(n)?(i.moveTo(e[0],e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,t[1]),i.lineTo(t[0],t[1]),i):(i.moveTo(e[0],e[1]),i.lineTo(e[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],t[1]),i)}const KF=(e,t)=>{const{cornerRatio:n=1/3}=e,r=qF(e,["cornerRatio"]),{coordinate:i,document:s}=t;return(l,c,h)=>{const{defaultColor:p}=h,v=qF(h,["defaultColor"]),{color:y=p,transform:b}=c,[T,M]=l,R=rK(T,M,i,n);return Ua(s.createElement("path",{})).call(ma,v).style("d",R.toString()).style("stroke",y).style("transform",b).call(ma,r).node()}};KF.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const QF={link:GF,arc:XF,smooth:$F,vhv:KF},ZR=e=>(t,n,r,i)=>{const{x:s,y:l,x1:c=s,y1:h=l}=r,p=K_(n,r,e),v=t.map(y=>[i.map(p([+s[y],+l[y]],y)),i.map(p([+c[y],+h[y]],y))]);return[t,v]};ZR.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:QF,channels:[...Jd({shapes:Object.keys(QF)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...tf(),{type:VF},{type:HF}],postInference:[...xf(),...Sy()]};var iK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const JF=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c}=l,h=iK(l,["color"]),{color:p=c,src:v="",size:y=32,transform:b=""}=s;let{width:T=y,height:M=y}=e;const[[R,L]]=i,[N,z]=n.getSize();T=typeof T=="string"?kT(T)*N:T,M=typeof M=="string"?kT(M)*z:M;const H=R-Number(T)/2,X=L-Number(M)/2;return Ua(r.createElement("image",{})).call(ma,h).style("x",H).style("y",X).style("img",v).style("stroke",p).style("transform",b).call(ma,e).style("width",T).style("height",M).node()}};JF.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const eB={image:JF},tB=e=>{const{cartesian:t}=e;return t?AR:(n,r,i,s)=>{const{x:l,y:c}=i,h=K_(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};tB.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:eB,channels:[...Jd({shapes:Object.keys(eB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...tf(),{type:HT},{type:WT}],postInference:[...xf(),...Sy()]};var oK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function aK(e,t){const n=I0();if(Bl(t)){const r=t.getCenter(),i=[...e,e[0]],s=i.map(l=>cc(l,r));return i.forEach((l,c)=>{if(c===0){n.moveTo(l[0],l[1]);return}const h=s[c],p=e[c-1],v=s[c-1];v!==void 0&&Math.abs(h-v)<1e-10?M2(n,p,l,r,h):n.lineTo(l[0],l[1])}),n.closePath(),n}return WW(n,e)}const nB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c}=l,h=oK(l,["color"]),{color:p=c,transform:v}=s,y=aK(i,n);return Ua(r.createElement("path",{})).call(ma,h).style("d",y.toString()).style("stroke",p).style("fill",p).style("transform",v).call(ma,e).node()}};nB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var rB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function sK(e,t){const[n,r,i,s]=e,l=I0();if(Bl(t)){const c=t.getCenter(),h=cc(c,n);return l.moveTo(n[0],n[1]),l.quadraticCurveTo(c[0],c[1],i[0],i[1]),M2(l,i,s,c,h),l.quadraticCurveTo(c[0],c[1],r[0],r[1]),M2(l,r,n,c,h),l.closePath(),l}return l.moveTo(n[0],n[1]),l.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),l.lineTo(s[0],s[1]),l.bezierCurveTo(s[0]/2+r[0]/2,s[1],s[0]/2+r[0]/2,r[1],r[0],r[1]),l.lineTo(n[0],n[1]),l.closePath(),l}const iB=(e,t)=>{const n=rB(e,[]),{coordinate:r,document:i}=t;return(s,l,c)=>{const{color:h}=c,p=rB(c,["color"]),{color:v=h,transform:y}=l,b=sK(s,r);return Ua(i.createElement("path",{})).call(ma,p).style("d",b.toString()).style("fill",v||h).style("stroke",v||h).style("transform",y).call(ma,n).node()}};iB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const oB={polygon:nB,ribbon:iB},aB=()=>(e,t,n,r)=>{const i=Object.entries(n).filter(([c])=>c.startsWith("x")).map(([,c])=>c),s=Object.entries(n).filter(([c])=>c.startsWith("y")).map(([,c])=>c),l=e.map(c=>{const h=[];for(let p=0;p<i.length;p++){const v=i[p][c];if(v===void 0)break;const y=s[p][c];h.push(r.map([+v,+y]))}return h});return[e,l]};aB.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:oB,channels:[...Jd({shapes:Object.keys(oB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...tf()],postInference:[...xf(),...Sy()]};var lK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function uK(e,t){const n=I0();if(!Bl(t))n.moveTo(...e[0]),n.lineTo(...e[1]),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.lineTo(...e[5]),n.lineTo(...e[6]),n.lineTo(...e[7]),n.closePath(),n.moveTo(...e[8]),n.lineTo(...e[9]),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.lineTo(...e[13]);else{const r=t.getCenter(),[i,s]=r,l=P0(Bc(e[0],r)),c=P0(Bc(e[1],r)),h=cc(r,e[2]),p=cc(r,e[3]),v=cc(r,e[8]),y=cc(r,e[10]),b=cc(r,e[11]);n.moveTo(...e[0]),n.arc(i,s,h,l,c),n.arc(i,s,h,c,l,!0),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.arc(i,s,p,l,c),n.lineTo(...e[6]),n.arc(i,s,y,c,l,!0),n.closePath(),n.moveTo(...e[8]),n.arc(i,s,v,l,c),n.arc(i,s,v,c,l,!0),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.arc(i,s,b,l,c),n.arc(i,s,b,c,l,!0)}return n}const sB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c,transform:h}=s,{color:p,fill:v=p,stroke:y=p}=l,b=lK(l,["color","fill","stroke"]),T=uK(i,n);return Ua(r.createElement("path",{})).call(ma,b).style("d",T.toString()).style("stroke",y).style("fill",c||v).style("transform",h).call(ma,e).node()}};sB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var cK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fK(e,t,n=4){const r=I0();if(!Bl(t))return r.moveTo(...e[2]),r.lineTo(...e[3]),r.lineTo(e[3][0]-n,e[3][1]),r.lineTo(e[10][0]-n,e[10][1]),r.lineTo(e[10][0]+n,e[10][1]),r.lineTo(e[3][0]+n,e[3][1]),r.lineTo(...e[3]),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]),r.moveTo(e[3][0]+n/2,e[8][1]),r.arc(e[3][0],e[8][1],n/2,0,Math.PI*2),r.closePath(),r;const i=t.getCenter(),[s,l]=i,c=cc(i,e[3]),h=cc(i,e[8]),p=cc(i,e[10]),v=P0(Bc(e[2],i)),y=Math.asin(n/h),b=v-y,T=v+y;r.moveTo(...e[2]),r.lineTo(...e[3]),r.moveTo(Math.cos(b)*c+s,Math.sin(b)*c+l),r.arc(s,l,c,b,T),r.lineTo(Math.cos(T)*p+s,Math.sin(T)*p+l),r.arc(s,l,p,T,b,!0),r.lineTo(Math.cos(b)*c+s,Math.sin(b)*c+l),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]);const M=(b+T)/2;return r.moveTo(Math.cos(M)*(h+n/2)+s,Math.sin(M)*(h+n/2)+l),r.arc(Math.cos(M)*h+s,Math.sin(M)*h+l,n/2,M,Math.PI*2+M),r.closePath(),r}const lB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c,transform:h}=s,p=4,{color:v,fill:y=v,stroke:b=v}=l,T=cK(l,["color","fill","stroke"]),M=fK(i,n,p);return Ua(r.createElement("path",{})).call(ma,T).style("d",M.toString()).style("stroke",b).style("fill",c||y).style("transform",h).call(ma,e).node()}};lB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const uB={box:sB,violin:lB},cB=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,y2:c,y3:h,y4:p,series:v}=n,y=t.x,b=t.series,T=Array.from(e,M=>{const R=y.getBandWidth(y.invert(+i[M])),L=b?b.getBandWidth(b.invert(+(v==null?void 0:v[M]))):1,N=R*L,z=(+(v==null?void 0:v[M])||0)*R,H=+i[M]+z+N/2,[X,Y,ne,ve,Ee]=[+s[M],+l[M],+c[M],+h[M],+p[M]];return[[H-N/2,Ee],[H+N/2,Ee],[H,Ee],[H,ve],[H-N/2,ve],[H+N/2,ve],[H+N/2,Y],[H-N/2,Y],[H-N/2,ne],[H+N/2,ne],[H,Y],[H,X],[H-N/2,X],[H+N/2,X]].map(Ye=>r.map(Ye))});return[e,T]};cB.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:uB,channels:[...Jd({shapes:Object.keys(uB)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...tf(),{type:$_}],postInference:[...xf(),...kb()],interaction:{shareTooltip:!0}};const fB={vector:GR},hB=()=>(e,t,n,r)=>{const{x:i,y:s,size:l,rotate:c}=n,[h,p]=r.getSize(),v=e.map(y=>{const b=+c[y]/180*Math.PI,T=+l[y],M=T/h,R=T/p,L=M*Math.cos(b),N=-R*Math.sin(b);return[r.map([+i[y]-L/2,+s[y]-N/2]),r.map([+i[y]+L/2,+s[y]+N/2])]});return[e,v]};hB.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:fB,channels:[...Jd({shapes:Object.keys(fB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...tf()],postInference:[...xf(),...Sy()]};var dB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function hK(e,t,n){return e.createElement("path",{style:Object.assign({path:`M ${t},${t} L -${t},0 L ${t},-${t} L 0,0 Z`,anchor:"0.5 0.5",transformOrigin:"center"},n)})}function dK(e,t){if(!Bl(t))return vy().x(r=>r[0]).y(r=>r[1])(e);const n=t.getCenter();return fT()({startAngle:0,endAngle:Math.PI*2,outerRadius:cc(e[0],n),innerRadius:cc(e[1],n)})}function pK(e,t){if(!Bl(e))return t;const[n,r]=e.getCenter();return`translate(${n}, ${r}) ${t||""}`}const XR=(e,t)=>{const{arrow:n,arrowSize:r=4}=e,i=dB(e,["arrow","arrowSize"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{color:v,lineWidth:y}=p,b=dB(p,["color","lineWidth"]),{color:T=v,size:M=y}=h,R=n?hK(l,r,Object.assign({fill:i.stroke||T,stroke:i.stroke||T},xo(i,"arrow"))):null,L=dK(c,s),N=pK(s,h.transform);return Ua(l.createElement("path",{})).call(ma,b).style("d",L).style("stroke",T).style("lineWidth",M).style("transform",N).style("markerEnd",R).call(ma,i).node()}};XR.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const pB=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(Z2)?[e,t]:[e,ui({},t,{encode:{x:ku(n)}})]};pB.props={};const vB={line:XR},mB=e=>(t,n,r,i)=>{const{x:s}=r,l=K_(n,r,ui({style:{bandOffset:0}},e)),c=Array.from(t,h=>{const p=[s[h],1],v=[s[h],0];return[p,v].map(y=>i.map(l(y,h)))});return[t,c]};mB.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:vB,channels:[...zb({shapes:Object.keys(vB)}),{name:"x",required:!0}],preInference:[...tf(),{type:pB}],postInference:[...xf()]};const gB=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(Z2)?[e,t]:[e,ui({},t,{encode:{y:ku(n)}})]};gB.props={};const yB={line:XR},_B=e=>(t,n,r,i)=>{const{y:s}=r,l=K_(n,r,ui({style:{bandOffset:0}},e)),c=Array.from(t,h=>{const p=[0,s[h]],v=[1,s[h]];return[p,v].map(y=>i.map(l(y,h)))});return[t,c]};_B.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:yB,channels:[...zb({shapes:Object.keys(yB)}),{name:"y",required:!0}],preInference:[...tf(),{type:gB}],postInference:[...xf()]};var bB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function vK(e,t,n){return[["M",e,t],["L",e+2*n,t-n],["L",e+2*n,t+n],["Z"]]}function mK(e){return vy().x(t=>t[0]).y(t=>t[1])(e)}function gK(e,t,n,r,i=0){const[[s,l],[c,h]]=t;if(Cu(e)){const b=s+n,T=c+r,M=b+i;return[[b,l],[M,l],[M,h],[T,h]]}const p=l-n,v=h-r,y=p-i;return[[s,p],[s,y],[c,y],[c,v]]}const xB=(e,t)=>{const{offset:n=0,offset1:r=n,offset2:i=n,connectLength1:s,endMarker:l=!0}=e,c=bB(e,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:h}=t;return(p,v,y)=>{const{color:b,connectLength1:T}=y,M=bB(y,["color","connectLength1"]),{color:R,transform:L}=v,N=gK(h,p,r,i,s!=null?s:T),z=xo(Object.assign(Object.assign({},c),y),"endMarker");return Ua(new gl).call(ma,M).style("path",mK(N)).style("stroke",R||b).style("transform",L).style("markerEnd",l?new kl({className:"marker",style:Object.assign(Object.assign({},z),{symbol:vK})}):null).call(ma,c).node()}};xB.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const EB={connector:xB},SB=(...e)=>ZR(...e);SB.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:EB,channels:[...zb({shapes:Object.keys(EB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...tf()],postInference:[...xf()]};function wB(e,t,n,r){if(t)return()=>[0,1];const{[e]:i,[`${e}1`]:s}=n;return l=>{var c;const h=((c=r.getBandWidth)===null||c===void 0?void 0:c.call(r,r.invert(+s[l])))||0;return[i[l],s[l]+h]}}function YR(e={}){const{extendX:t=!1,extendY:n=!1}=e;return(r,i,s,l)=>{const c=wB("x",t,s,i.x),h=wB("y",n,s,i.y),p=Array.from(r,v=>{const[y,b]=c(v),[T,M]=h(v);return[[y,T],[b,T],[b,M],[y,M]].map(H=>l.map(H))});return[r,p]}}const TB={range:q_},AB=()=>YR();AB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:TB,channels:[...zb({shapes:Object.keys(TB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...tf()],postInference:[...xf()]};const CB=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(Z2))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,ui({},t,{encode:{x:ku(r(n,0)),x1:ku(r(n,1))}})]}return[e,t]};CB.props={};const OB={range:q_},MB=()=>YR({extendY:!0});MB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:OB,channels:[...zb({shapes:Object.keys(OB)}),{name:"x",required:!0}],preInference:[...tf(),{type:CB}],postInference:[...xf()]};const RB=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(Z2))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,ui({},t,{encode:{y:ku(r(n,0)),y1:ku(r(n,1))}})]}return[e,t]};RB.props={};const PB={range:q_},IB=()=>YR({extendX:!0});IB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:PB,channels:[...zb({shapes:Object.keys(PB)}),{name:"y",required:!0}],preInference:[...tf(),{type:RB}],postInference:[...xf()]};var LB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const $R=(e,t)=>{const{arrow:n,colorAttribute:r}=e,i=LB(e,["arrow","colorAttribute"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{color:v,stroke:y}=p,b=LB(p,["color","stroke"]),{d:T,color:M=v}=h,[R,L]=s.getSize();return Ua(l.createElement("path",{})).call(ma,b).style("d",typeof T=="function"?T({width:R,height:L}):T).style(r,M).call(ma,i).node()}};$R.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const DB=(e,t)=>$R(Object.assign({colorAttribute:"fill"},e),t);DB.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const NB=(e,t)=>$R(Object.assign({fill:"none",colorAttribute:"stroke"},e),t);NB.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const FB={path:DB,hollow:NB},BB=e=>(t,n,r,i)=>[t,t.map(()=>[[0,0]])];BB.props={defaultShape:"path",defaultLabelShape:"label",shape:FB,composite:!1,channels:[...Jd({shapes:Object.keys(FB)}),{name:"d",scale:"identity"}],preInference:[...tf()],postInference:[...xf()]};var yK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const kB=(e,t)=>{const{render:n}=e,r=yK(e,["render"]);return i=>{const[[s,l]]=i;return n(Object.assign(Object.assign({},r),{x:s,y:l}),t)}};kB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const zB=()=>(e,t)=>{const{style:n={}}=t;return[e,ui({},t,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};zB.props={};const _K={shape:kB},UB=e=>{const{cartesian:t}=e;return t?AR:(n,r,i,s)=>{const{x:l,y:c}=i,h=K_(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};UB.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:_K,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...tf(),{type:HT},{type:WT},{type:zB}]};var bK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const jB=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{transform:l}=i,{color:c}=s,h=bK(s,["color"]),{color:p=c}=i,[v,...y]=r,b=I0();return b.moveTo(...v),y.forEach(([T,M])=>{b.lineTo(T,M)}),b.closePath(),Ua(n.createElement("path",{})).call(ma,h).style("d",b.toString()).style("stroke",p||c).style("fill",p||c).style("fillOpacity",.4).style("transform",l).call(ma,e).node()}};jB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const VB={density:jB},HB=()=>(e,t,n,r)=>{const{x:i,series:s}=n,l=Object.entries(n).filter(([y])=>y.startsWith("y")).map(([,y])=>y),c=Object.entries(n).filter(([y])=>y.startsWith("size")).map(([,y])=>y);if(i===void 0||l===void 0||c===void 0)throw new Error("Missing encode for x or y or size channel.");const h=t.x,p=t.series,v=Array.from(e,y=>{const b=h.getBandWidth(h.invert(+i[y])),T=p?p.getBandWidth(p.invert(+(s==null?void 0:s[y]))):1,M=b*T,R=(+(s==null?void 0:s[y])||0)*b,L=+i[y]+R+M/2;return[...l.map((z,H)=>[L+ +c[H][y]/e.length,+l[H][y]]),...l.map((z,H)=>[L-+c[H][y]/e.length,+l[H][y]]).reverse()].map(z=>r.map(z))});return[e,v]};HB.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:VB,channels:[...Jd({shapes:Object.keys(VB)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...tf(),{type:X2},{type:$_}],postInference:[...xf(),...kb()],interaction:{shareTooltip:!0}};function WB(e){var t,n,r,i=e||1;function s(c,h){++t>i&&(r=n,l(1),++t),n[c]=h}function l(c){t=0,n=Object.create(null),c||(r=Object.create(null))}return l(),{clear:l,has:function(c){return n[c]!==void 0||r[c]!==void 0},get:function(c){var h=n[c];if(h!==void 0)return h;if((h=r[c])!==void 0)return s(c,h),h},set:function(c,h){n[c]!==void 0?n[c]=h:s(c,h)}}}const P0e=WB(3);function xK(e,t=(...r)=>`${r[0]}`,n=16){const r=WB(n);return(...i)=>{const s=t(...i);let l=r.get(s);return r.has(s)?r.get(s):(l=e(...i),r.set(s,l),l)}}function EK(e){return typeof e=="string"?e.split(" ").map(t=>{const[n,r]=t.split(":");return[+n,r]}):e}function GT(e,t,n){const r=e?e():document.createElement("canvas");return r.width=t,r.height=n,r}const SK=xK((e,t,n)=>{const r=GT(n,e*2,e*2),i=r.getContext("2d"),s=e,l=e;if(t===1)i.beginPath(),i.arc(s,l,e,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const c=i.createRadialGradient(s,l,e*t,s,l,e);c.addColorStop(0,"rgba(0,0,0,1)"),c.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=c,i.fillRect(0,0,2*e,2*e)}return r},e=>`${e}`);function wK(e,t){const r=GT(t,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return EK(e).forEach(([s,l])=>{i.addColorStop(s,l)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function TK(e,t,n,r,i,s){const{blur:l}=i;let c=r.length;for(;c--;){const{x:h,y:p,value:v,radius:y}=r[c],b=Math.min(v,n),T=h-y,M=p-y,R=SK(y,1-l,s),L=(b-t)/(n-t);e.globalAlpha=Math.max(L,.001),e.drawImage(R,T,M)}return e}function AK(e,t,n,r,i){const{minOpacity:s,opacity:l,maxOpacity:c,useGradientOpacity:h}=i,p=0,v=0,y=t,b=n,T=e.getImageData(p,v,y,b),M=T.data,R=M.length;for(let L=3;L<R;L+=4){const N=M[L],z=N*4;if(!z)continue;const H=l||Math.max(0,Math.min(c,Math.max(s,N)));M[L-3]=r[z],M[L-2]=r[z+1],M[L-1]=r[z+2],M[L]=h?r[z+3]:H}return T}function CK(e,t,n,r,i,s,l){const c=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},s);c.minOpacity*=255,c.opacity*=255,c.maxOpacity*=255;const p=GT(l,e,t).getContext("2d"),v=wK(c.gradient,l);p.clearRect(0,0,e,t),TK(p,n,r,i,c,l);const y=AK(p,e,t,v,c),T=GT(l,e,t).getContext("2d");return T.putImageData(y,0,0),T}var OK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function MK(e,t){return Object.keys(e).reduce((n,r)=>{const i=e[r];return t(i,r)||(n[r]=i),n},{})}const GB=(e,t)=>{const{gradient:n,opacity:r,maxOpacity:i,minOpacity:s,blur:l,useGradientOpacity:c}=e,h=OK(e,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:p,createCanvas:v,document:y}=t;return(b,T,M)=>{const{transform:R}=T,[L,N]=p.getSize(),z=b.map(ve=>({x:ve[0],y:ve[1],value:ve[2],radius:ve[3]})),H=Xp(b,ve=>ve[2]),X=yl(b,ve=>ve[2]),ne=L&&N?CK(L,N,H,X,z,MK({gradient:n,opacity:r,minOpacity:s,maxOpacity:i,blur:l,useGradientOpacity:c},ve=>ve===void 0),v):{canvas:null};return Ua(y.createElement("image",{})).call(ma,M).style("x",0).style("y",0).style("width",L).style("height",N).style("src",ne.canvas).style("transform",R).call(ma,h).node()}};GB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const ZB={heatmap:GB},XB=e=>(t,n,r,i)=>{const{x:s,y:l,size:c,color:h}=r,p=Array.from(t,v=>{const y=c?+c[v]:40;return[...i.map([+s[v],+l[v]]),h[v],y]});return[[0],[p]]};XB.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:ZB,channels:[...Jd({shapes:Object.keys(ZB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...tf(),{type:$_},{type:VT}],postInference:[...xf(),...Sy()]};const YB=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];YB.props={};const $B=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];$B.props={};const qB=e=>new vd(e);qB.props={};const ZT=Symbol("defaultUnknown");function KB(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r)}function QB(e){const{value:t,from:n,to:r,mapper:i,notFoundReturn:s}=e;let l=i.get(t);if(l===void 0){if(s!==ZT)return s;l=n.push(t)-1,i.set(t,l)}return r[l%r.length]}function JB(e){return e instanceof Date?t=>`${t}`:typeof e=="object"?t=>JSON.stringify(t):t=>t}class XT extends S2{getDefaultOptions(){return{domain:[],range:[],unknown:ZT}}constructor(t){super(t)}map(t){return this.domainIndexMap.size===0&&KB(this.domainIndexMap,this.getDomain(),this.domainKey),QB({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return this.rangeIndexMap.size===0&&KB(this.rangeIndexMap,this.getRange(),this.rangeKey),QB({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=JB(n),this.rangeKey=JB(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new XT(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:n}=this.options;return this.sortedDomain=n?[...t].sort(n):t,this.sortedDomain}}const e8=e=>new XT(e);e8.props={};function t8({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):n}function RK({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function PK({map:e,initKey:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function IK(e){return typeof e=="object"?e.valueOf():e}class n8 extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=IK,t!==null)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(t8({map:this.map,initKey:this.initKey},t))}has(t){return super.has(t8({map:this.map,initKey:this.initKey},t))}set(t,n){return super.set(RK({map:this.map,initKey:this.initKey},t),n)}delete(t){return super.delete(PK({map:this.map,initKey:this.initKey},t))}}function LK(e){const t=Math.min(...e);return e.map(n=>n/t)}function DK(e,t){const n=e.length,r=t-n;return r>0?[...e,...new Array(r).fill(1)]:r<0?e.slice(0,t):e}function NK(e){return Math.round(e*1e12)/1e12}function FK(e){const{domain:t,range:n,paddingOuter:r,paddingInner:i,flex:s,round:l,align:c}=e,h=t.length,p=DK(s,h),[v,y]=n,b=y-v,T=2/h*r+1-1/h*i,M=b/T,R=M*i/h,L=M-h*R,N=LK(p),z=N.reduce((St,Qe)=>St+Qe),H=L/z,X=new n8(t.map((St,Qe)=>{const lt=N[Qe]*H;return[St,l?Math.floor(lt):lt]})),Y=new n8(t.map((St,Qe)=>{const ht=N[Qe]*H+R;return[St,l?Math.floor(ht):ht]})),ne=Array.from(Y.values()).reduce((St,Qe)=>St+Qe),Ee=(b-(ne-ne/h*i))*c,Ie=v+Ee;let Ye=l?Math.round(Ie):Ie;const $e=new Array(h);for(let St=0;St<h;St+=1){$e[St]=NK(Ye);const Qe=t[St];Ye+=Y.get(Qe)}return{valueBandWidth:X,valueStep:Y,adjustedRange:$e}}function BK(e){var t;const{domain:n}=e,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((t=e.flex)===null||t===void 0)&&t.length))return FK(e);const{range:s,paddingOuter:l,paddingInner:c,round:h,align:p}=e;let v,y,b=s[0];const M=s[1]-b,R=l*2,L=r-c;v=M/Math.max(1,R+L),h&&(v=Math.floor(v)),b+=(M-v*(r-c))*p,y=v*(1-c),h&&(b=Math.round(b),y=Math.round(y));const N=new Array(r).fill(0).map((z,H)=>b+H*v);return{valueStep:v,valueBandWidth:y,adjustedRange:N}}class wy extends XT{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:ZT,flex:[]}}constructor(t){super(t)}clone(){return new wy(this.options)}getStep(t){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:t===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:t===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:n}=this.options;return t>0?t:n}getPaddingOuter(){const{padding:t,paddingOuter:n}=this.options;return t>0?t:n}rescale(){super.rescale();const{align:t,domain:n,range:r,round:i,flex:s}=this.options,{adjustedRange:l,valueBandWidth:c,valueStep:h}=BK({align:t,range:r,round:i,flex:s,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=h,this.valueBandWidth=c,this.adjustedRange=l}}const r8=e=>new wy(e);r8.props={};class YT extends S2{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:AM}}map(t){return $w(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new YT(this.options)}getTicks(){const{domain:t,tickCount:n,tickMethod:r}=this.options,[i,s]=t;return!pb(i)||!pb(s)?[]:r(i,s,n)}}const i8=e=>new YT(e);i8.props={};class qR extends wy{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:ZT,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new qR(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const o8=e=>new qR(e);o8.props={};var a8=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Ty="\\d\\d?",Ay="\\d\\d",kK="\\d{3}",zK="\\d{4}",q2="[^\\s]+",s8=/\[([^]*?)\]/gm;function l8(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var u8=function(e){return function(t,n){var r=n[e].map(function(s){return s.toLowerCase()}),i=r.indexOf(t.toLowerCase());return i>-1?i:null}};function Q_(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];for(var l in s)e[l]=s[l]}return e}var c8=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f8=["January","February","March","April","May","June","July","August","September","October","November","December"],UK=l8(f8,3),jK=l8(c8,3),h8={dayNamesShort:jK,dayNames:c8,monthNamesShort:UK,monthNames:f8,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}},$T=Q_({},h8),VK=function(e){return $T=Q_($T,e)},d8=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},wp=function(e,t){for(t===void 0&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},HK={D:function(e){return String(e.getDate())},DD:function(e){return wp(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return wp(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return wp(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return wp(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return wp(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return wp(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return wp(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return wp(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return wp(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return wp(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return wp(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+wp(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+wp(Math.floor(Math.abs(t)/60),2)+":"+wp(Math.abs(t)%60,2)}},p8=function(e){return+e-1},v8=[null,Ty],m8=[null,q2],g8=["isPm",q2,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],y8=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?n:-n}return 0}],WK={D:["day",Ty],DD:["day",Ay],Do:["day",Ty+q2,function(e){return parseInt(e,10)}],M:["month",Ty,p8],MM:["month",Ay,p8],YY:["year",Ay,function(e){var t=new Date,n=+(""+t.getFullYear()).substr(0,2);return+(""+(+e>68?n-1:n)+e)}],h:["hour",Ty,void 0,"isPm"],hh:["hour",Ay,void 0,"isPm"],H:["hour",Ty],HH:["hour",Ay],m:["minute",Ty],mm:["minute",Ay],s:["second",Ty],ss:["second",Ay],YYYY:["year",zK],S:["millisecond","\\d",function(e){return+e*100}],SS:["millisecond",Ay,function(e){return+e*10}],SSS:["millisecond",kK],d:v8,dd:v8,ddd:m8,dddd:m8,MMM:["month",q2,u8("monthNamesShort")],MMMM:["month",q2,u8("monthNames")],a:g8,A:g8,ZZ:y8,Z:y8},qT={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},GK=function(e){return Q_(qT,e)},_8=function(e,t,n){if(t===void 0&&(t=qT.default),n===void 0&&(n={}),typeof e=="number"&&(e=new Date(e)),Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");t=qT[t]||t;var r=[];t=t.replace(s8,function(s,l){return r.push(l),"@@@"});var i=Q_(Q_({},$T),n);return t=t.replace(a8,function(s){return HK[s](e,i)}),t.replace(/@@@/g,function(){return r.shift()})};function ZK(e,t,n){if(n===void 0&&(n={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=qT[t]||t,e.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},s=[],l=[],c=t.replace(s8,function(X,Y){return l.push(d8(Y)),"@@@"}),h={},p={};c=d8(c).replace(a8,function(X){var Y=WK[X],ne=Y[0],ve=Y[1],Ee=Y[3];if(h[ne])throw new Error("Invalid format. "+ne+" specified twice in format");return h[ne]=!0,Ee&&(p[Ee]=!0),s.push(Y),"("+ve+")"}),Object.keys(p).forEach(function(X){if(!h[X])throw new Error("Invalid format. "+X+" is required in specified format")}),c=c.replace(/@@@/g,function(){return l.shift()});var v=e.match(new RegExp(c,"i"));if(!v)return null;for(var y=Q_(Q_({},$T),n),b=1;b<v.length;b++){var T=s[b-1],M=T[0],R=T[2],L=R?R(v[b],y):+v[b];if(L==null)return null;i[M]=L}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var N;if(i.timezoneOffset==null){N=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var z=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],b=0,H=z.length;b<H;b++)if(h[z[b][0]]&&i[z[b][0]]!==N[z[b][1]]())return null}else if(N=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return N}var I0e={format:_8,parse:ZK,defaultI18n:h8,setGlobalDateI18n:VK,setGlobalDateMasks:GK},L0e=null;const K2=1e3,Q2=K2*60,J2=Q2*60,J_=J2*24,eE=J_*7,b8=J_*30,x8=J_*365;function _d(e,t,n,r){const i=(p,v)=>{const y=T=>r(T)%v===0;let b=v;for(;b&&!y(p);)n(p,-1),b-=1;return p},s=(p,v)=>{v&&i(p,v),t(p)},l=(p,v)=>{const y=new Date(+p);return s(y,v),y},c=(p,v)=>{const y=new Date(+p-1);return s(y,v),n(y,v),s(y),y};return{ceil:c,floor:l,range:(p,v,y,b)=>{const T=[],M=Math.floor(y),R=b?c(p,y):c(p);for(let L=R;L<v;n(L,M),s(L))T.push(new Date(+L));return T},duration:e}}const XK=_d(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),YK=_d(K2,e=>{e.setMilliseconds(0)},(e,t=1)=>{e.setTime(+e+K2*t)},e=>e.getSeconds()),$K=_d(Q2,e=>{e.setSeconds(0,0)},(e,t=1)=>{e.setTime(+e+Q2*t)},e=>e.getMinutes()),qK=_d(J2,e=>{e.setMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+J2*t)},e=>e.getHours()),KK=_d(J_,e=>{e.setHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+J_*t)},e=>e.getDate()-1),E8=_d(b8,e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getMonth();e.setMonth(n+t)},e=>e.getMonth()),QK=_d(eE,e=>{e.setDate(e.getDate()-e.getDay()%7),e.setHours(0,0,0,0)},(e,t=1)=>{e.setDate(e.getDate()+7*t)},e=>{const t=E8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/eE)}),JK=_d(x8,e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getFullYear();e.setFullYear(n+t)},e=>e.getFullYear()),S8={millisecond:XK,second:YK,minute:$K,hour:qK,day:KK,week:QK,month:E8,year:JK},eQ=_d(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),tQ=_d(K2,e=>{e.setUTCMilliseconds(0)},(e,t=1)=>{e.setTime(+e+K2*t)},e=>e.getUTCSeconds()),nQ=_d(Q2,e=>{e.setUTCSeconds(0,0)},(e,t=1)=>{e.setTime(+e+Q2*t)},e=>e.getUTCMinutes()),rQ=_d(J2,e=>{e.setUTCMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+J2*t)},e=>e.getUTCHours()),iQ=_d(J_,e=>{e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+J_*t)},e=>e.getUTCDate()-1),w8=_d(b8,e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCMonth();e.setUTCMonth(n+t)},e=>e.getUTCMonth()),oQ=_d(eE,e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7)%7),e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+eE*t)},e=>{const t=w8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/eE)}),aQ=_d(x8,e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCFullYear();e.setUTCFullYear(n+t)},e=>e.getUTCFullYear()),T8={millisecond:eQ,second:tQ,minute:nQ,hour:rQ,day:iQ,week:oQ,month:w8,year:aQ};function sQ(e){const t=e?T8:S8,{year:n,month:r,week:i,day:s,hour:l,minute:c,second:h,millisecond:p}=t;return{tickIntervals:[[h,1],[h,5],[h,15],[h,30],[c,1],[c,5],[c,15],[c,30],[l,1],[l,3],[l,6],[l,12],[s,1],[s,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:p}}function A8(e,t,n,r,i){const s=+e,l=+t,{tickIntervals:c,year:h,millisecond:p}=sQ(i),v=([L,N])=>L.duration*N,y=r?(l-s)/r:n||5,b=r||(l-s)/y,T=c.length,M=yM(c,b,0,T,v);let R;if(M===T){const L=W4(s/h.duration,l/h.duration,y);R=[h,L]}else if(M){const L=b/v(c[M-1])<v(c[M])/b,[N,z]=L?c[M-1]:c[M],H=r?Math.ceil(r/N.duration):z;R=[N,H]}else{const L=Math.max(W4(s,l,y),1);R=[p,L]}return R}const lQ=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,c=s?e:t,[h,p]=A8(l,c,n,r,i),v=h.range(l,new Date(+c+1),p,!0);return s?v.reverse():v},uQ=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,c=s?e:t,[h,p]=A8(l,c,n,r,i),v=[h.floor(l,p),h.ceil(c,p)];return s?v.reverse():v};function cQ(e,t){const{second:n,minute:r,hour:i,day:s,week:l,month:c,year:h}=t;return n.floor(e)<e?".SSS":r.floor(e)<e?":ss":i.floor(e)<e?"hh:mm":s.floor(e)<e?"hh A":c.floor(e)<e?l.floor(e)<e?"MMM DD":"ddd DD":h.floor(e)<e?"MMMM":"YYYY"}function fQ(e){const t=e.getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()+t,n.getSeconds(),n.getMilliseconds()),n}class KR extends Kw{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:lQ,interpolate:mb,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return uQ}getTickMethodOptions(){const{domain:t,tickCount:n,tickInterval:r,utc:i}=this.options,s=t[0],l=t[t.length-1];return[s,l,n,r,i]}getFormatter(){const{mask:t,utc:n}=this.options,r=n?T8:S8,i=n?fQ:k_;return s=>_8(i(s),t||cQ(s,r))}clone(){return new KR(this.options)}}const C8=e=>new KR(e);C8.props={};const O8=e=>t=>-e(-t),QR=(e,t)=>{const n=Math.log(e),r=e===Math.E?Math.log:e===10?Math.log10:e===2?Math.log2:i=>Math.log(i)/n;return t?O8(r):r},JR=(e,t)=>{const n=e===Math.E?Math.exp:r=>Ef(e,r);return t?O8(n):n},hQ=(e,t,n,r=10)=>{const i=e<0,s=JR(r,i),l=QR(r,i),c=t<e,h=c?t:e,p=c?e:t;let v=l(h),y=l(p),b=[];if(!(r%1)&&y-v<n){if(v=Math.floor(v),y=Math.ceil(y),i)for(;v<=y;v+=1){const T=s(v);for(let M=r-1;M>=1;M-=1){const R=T*M;if(R>p)break;R>=h&&b.push(R)}}else for(;v<=y;v+=1){const T=s(v);for(let M=1;M<r;M+=1){const R=T*M;if(R>p)break;R>=h&&b.push(R)}}b.length*2<n&&(b=z_(h,p,n))}else{const T=n===-1?y-v:Math.min(y-v,n);b=z_(v,y,T).map(s)}return c?b.reverse():b},dQ=(e,t,n,r)=>{const i=e<0,s=QR(r,i),l=JR(r,i),c=e>t,h=c?t:e,p=c?e:t,v=[l(Math.floor(s(h))),l(Math.ceil(s(p)))];return c?v.reverse():v};class eP extends Kw{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:w2,tickMethod:hQ,tickCount:5}}chooseNice(){return dQ}getTickMethodOptions(){const{domain:t,tickCount:n,base:r}=this.options,i=t[0],s=t[t.length-1];return[i,s,n,r]}chooseTransforms(){const{base:t,domain:n}=this.options,r=n[0]<0;return[QR(t,r),JR(t,r)]}clone(){return new eP(this.options)}}const M8=e=>new eP(e);M8.props={};const pQ=e=>t=>t<0?-Ef(-t,e):Ef(t,e),vQ=e=>t=>t<0?-Ef(-t,1/e):Ef(t,1/e),mQ=e=>e<0?-Math.sqrt(-e):Math.sqrt(e);class KT extends Kw{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:w2,tickMethod:z_,tickCount:5}}constructor(t){super(t)}chooseTransforms(){const{exponent:t}=this.options;if(t===1)return[k_,k_];const n=t===.5?mQ:pQ(t),r=vQ(t);return[n,r]}clone(){return new KT(this.options)}}const R8=e=>new KT(e);R8.props={};class tP extends KT{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:w2,tickMethod:z_,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new tP(this.options)}}const P8=e=>new tP(e);P8.props={};const I8=e=>new gb(e);I8.props={};const L8=e=>new rT(e);L8.props={};const D8=e=>new nT(e);D8.props={};const gQ=e=>t=>{const n=e(t);return pb(n)?Math.round(n):n};function yQ(e,t){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=e(r)},n.prototype.composeOutput=function(r,i){const{domain:s,interpolator:l,round:c}=this.getOptions(),h=t(s.map(r)),p=c?gQ(l):l;this.output=vb(p,h,i,r)},n.prototype.invert=void 0}}var _Q=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},nP;function bQ(e){return[e(0),e(1)]}const xQ=e=>{const[t,n]=e;return vb(mb(0,1),Yw(t,n))};let rP=nP=class extends vd{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:k_,tickMethod:z_,tickCount:5}}constructor(t){super(t)}clone(){return new nP(this.options)}};rP=nP=_Q([yQ(bQ,xQ)],rP);const N8=e=>new rP(e);N8.props={};const F8=e=>new C2(e);F8.props={};function iP({colorDefault:e,colorBlack:t,colorWhite:n,colorStroke:r,colorBackground:i,padding1:s,padding2:l,padding3:c,alpha90:h,alpha65:p,alpha45:v,alpha25:y,alpha10:b,category10:T,category20:M,sizeDefault:R=1,padding:L="auto",margin:N=16}){return{padding:L,margin:N,size:R,color:e,category10:T,category20:M,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:t,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,strokeWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,strokeWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:t,gridStrokeOpacity:b,labelAlign:"horizontal",labelFill:t,labelOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:s,line:!1,lineLineWidth:.5,lineStroke:t,lineStrokeOpacity:v,tickLength:4,tickLineWidth:1,tickStroke:t,tickOpacity:v,titleFill:t,titleOpacity:h,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:t,itemLabelFillOpacity:h,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[s,s],itemValueFill:t,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:t,navButtonFillOpacity:.65,navPageNumFill:t,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:t,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:t,tickStrokeOpacity:.25,rowPadding:s,colPadding:l,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:t,handleLabelFillOpacity:v,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:t,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:t,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:t,labelFillOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:h,tickStroke:t,tickStrokeOpacity:v},label:{fill:t,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:t,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:t,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:e,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:t,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:t,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:t,titleFillOpacity:h,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:t,subtitleFillOpacity:p,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"}}}const EQ=iP({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),oP=e=>ui({},EQ,e);oP.props={};const B8=e=>ui({},oP(),{category10:"category10",category20:"category20"},e);B8.props={};const SQ=iP({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"#141414",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),k8=e=>ui({},SQ,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},e),z8=e=>Object.assign({},k8(),{category10:"category10",category20:"category20"},e);z8.props={};const wQ=iP({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),U8=e=>ui({},wQ,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(t,n)=>n!==0},axisRight:{gridFilter:(t,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},e);U8.props={};const j8=e=>(...t)=>{const n=hy(Object.assign({},{crossPadding:50},e))(...t);return eL(n,e),n};j8.props=Object.assign(Object.assign({},hy.props),{defaultPosition:"bottom"});function B0e(){}const V8=e=>(...t)=>{const n=hy(Object.assign({},{crossPadding:10},e))(...t);return eL(n,e),n};V8.props=Object.assign(Object.assign({},hy.props),{defaultPosition:"left"});var aP=function(){},TQ=function(e,t,n){var r=e,i=Gl(t)?t.split("."):t;return i.forEach(function(s,l){l<i.length-1?(za(r[s])||(r[s]=(0,$u.Z)(i[l+1])?[]:{}),r=r[s]):r[s]=n}),e};function AQ(e,t){return e.reduce(function(n,r){return(n[r[t]]=n[r[t]]||[]).push(r),n},{})}function CQ(e){var t;return((t=e[0])===null||t===void 0?void 0:t.map(function(n,r){return e.map(function(i){return i[r]})}))||[]}var D0=Ia({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),OQ=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,{animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonPath:JH(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,s){return"".concat(i,"/").concat(s)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new $l({class:D0.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new $l({class:D0.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(t.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return(0,Zl.Z)(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var n=this.pageViews,r=(0,ie.CR)(CQ(n.map(function(y){var b=y.getBBox(),T=b.width,M=b.height;return[T,M]})).map(function(y){return Math.max.apply(Math,(0,ie.ev)([],(0,ie.CR)(y),!1))}),2),i=r[0],s=r[1],l=this.attributes,c=l.pageWidth,h=c===void 0?i:c,p=l.pageHeight,v=p===void 0?s:p;return{pageWidth:h,pageHeight:v}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=e.prototype.getBBox.call(this),r=n.x,i=n.y,s=this.controllerShape,l=this.pageShape,c=l.pageWidth,h=l.pageHeight;return new Ku(r,i,c+s.width,h)},t.prototype.goTo=function(n){var r=this,i=this.attributes.animate,s=this,l=s.currPage,c=s.playState,h=s.playWindow,p=s.pageViews;if(c!=="idle"||n<0||p.length<=0||n>=p.length)return null;p[l].setLocalPosition(0,0),this.prepareFollowingPage(n);var v=(0,ie.CR)(this.getFollowingPageDiff(n),2),y=v[0],b=v[1];this.playState="running";var T=V(h,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-y,", ").concat(-b,")")}],i);return C(T,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),T},t.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var s=n?(i-1+r)%r:(0,Zl.Z)(i-1,0,r);return this.goTo(s)},t.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var s=n?(i+1)%r:(0,Zl.Z)(i+1,0,r);return this.goTo(s)},t.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,s=r.pageHeight;if(!i||!s){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(D0.clipPath,"rect").styles({width:i,height:s}),this.contentGroup.attr("clipPath",this.clipPath.node())},t.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?a(r):o(r)})},t.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,s=n.pageInfoGroup,l=this.attributes,c=l.orientation,h=l.controllerPadding,p=s.getBBox(),v=p.width,y=p.height,b=(0,ie.CR)(c==="horizontal"?[-180,0]:[-90,90],2),T=b[0],M=b[1];r.setLocalEulerAngles(T),i.setLocalEulerAngles(M);var R=r.getBBox(),L=R.width,N=R.height,z=i.getBBox(),H=z.width,X=z.height,Y=Math.max(L,v,H),ne=c==="horizontal"?{offset:[[0,0],[L/2+h,0],[L+v+h*2,0]],textAlign:"start"}:{offset:[[Y/2,-N-h],[Y/2,0],[Y/2,X+h]],textAlign:"center"},ve=(0,ie.CR)(ne.offset,3),Ee=(0,ie.CR)(ve[0],2),Ie=Ee[0],Ye=Ee[1],$e=(0,ie.CR)(ve[1],2),St=$e[0],Qe=$e[1],lt=(0,ie.CR)(ve[2],2),ht=lt[0],bt=lt[1],Ht=ne.textAlign,Ot=s.querySelector("text");Ot&&(Ot.style.textAlign=Ht),r.setLocalPosition(Ie,Ye),s.setLocalPosition(St,Qe),i.setLocalPosition(ht,bt)},t.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,s=r.pageViews,l=r.attributes.formatter;s.length<2||((n=this.pageInfoGroup.querySelector(D0.pageInfo.class))===null||n===void 0||n.attr("text",l(i+1,s.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,s=this.pageShape,l=s.pageWidth,c=s.pageHeight,h=n<r?-1:1;return i==="horizontal"?[h*l,0]:[0,h*c]},t.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,s=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var l=(0,ie.CR)(this.getFollowingPageDiff(n),2),c=l[0],h=l[1];s[n].setLocalPosition(c,h)}},t.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,s=this.pageShape,l=s.pageWidth,c=s.pageHeight,h=this.pageViews.length>=2,p=n.maybeAppendByClassName(D0.controller,"g");if(f(p.node(),h),!!h){var v=Va(this.attributes,"button"),y=Va(this.attributes,"pageNum"),b=(0,ie.CR)(Vh(v),2),T=b[0],M=b[1],R=T.size,L=(0,ie._T)(T,["size"]),N=!p.select(D0.prevBtnGroup.class).node(),z=p.maybeAppendByClassName(D0.prevBtnGroup,"g").styles(M);this.prevBtnGroup=z.node();var H=z.maybeAppendByClassName(D0.prevBtn,"path"),X=p.maybeAppendByClassName(D0.nextBtnGroup,"g").styles(M);this.nextBtnGroup=X.node();var Y=X.maybeAppendByClassName(D0.nextBtn,"path");[H,Y].forEach(function(ve){ve.styles((0,ie.pi)((0,ie.pi)({},L),{transformOrigin:"center"})),sM(ve.node(),R,!0)});var ne=p.maybeAppendByClassName(D0.pageInfoGroup,"g");this.pageInfoGroup=ne.node(),ne.maybeAppendByClassName(D0.pageInfo,"text").styles(y),this.updatePageInfo(),p.node().setLocalPosition(l+i,c/2),N&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},t.prototype.render=function(n,r){var i=Eo(r);this.renderClipPath(i),this.renderController(i),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var n=this,r=uw(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(Ga.INSERTED,r),this.playWindow.addEventListener(Ga.REMOVED,r)},t}(Vr),Yp=Ia({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function MQ(e){var t=e.querySelector(Yp.marker.class);return t?t.style:{}}var RQ=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,{span:[1,1],marker:function(){return new Tu({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(t.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,s=n.node().getBBox(),l=s.width,c=s.height,h=r.node().getBBox(),p=h.width,v=h.height;return{markerWidth:i,labelWidth:l,valueWidth:p,height:Math.max(i,c,v)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=(0,ie.CR)(Wh(n),2),i=r[0],s=r[1],l=this.showValue?s:0,c=i+l;return[i/c,l/c]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,s=r.width,l=this.actualSpace,c=l.markerWidth,h=l.height,p=this.actualSpace,v=p.labelWidth,y=p.valueWidth,b=(0,ie.CR)(this.spacing,2),T=b[0],M=b[1];if(s){var R=s-i-T-M,L=(0,ie.CR)(this.span,2),N=L[0],z=L[1];n=(0,ie.CR)([N*R,z*R],2),v=n[0],y=n[1]}var H=c+v+y+T+M;return{width:H,height:h,markerWidth:c,labelWidth:v,valueWidth:y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=(0,ie.CR)(Wh(n),2),i=r[0],s=r[1];return this.showValue?[i,s]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,s=n.valueWidth,l=n.width,c=n.height,h=(0,ie.CR)(this.spacing,2),p=h[0],v=h[1];return{height:c,width:l,markerWidth:r,labelWidth:i,valueWidth:s,position:[r/2,r+p,r+i+p+v]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var n=MQ(this.markerGroup.node()),r=this.attributes,i=r.markerSize,s=r.markerStrokeWidth,l=s===void 0?n.strokeWidth:s,c=r.markerLineWidth,h=c===void 0?n.lineWidth:c,p=r.markerStroke,v=p===void 0?n.stroke:p,y=+(l||h||(v?1:0))*Math.sqrt(2),b=this.markerGroup.node().getBBox(),T=b.width,M=b.height;return(1-y/Math.max(T,M))*i},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,s=Va(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(Yp.markerGroup,"g").style("zIndex",0),ci(!!i,this.markerGroup,function(){var l,c=r.markerGroup.node(),h=(l=c.childNodes)===null||l===void 0?void 0:l[0],p=typeof i=="string"?new kl({style:{symbol:i},className:Yp.marker.name}):i();h?p.nodeName===h.nodeName?h instanceof kl?h.update((0,ie.pi)((0,ie.pi)({},s),{symbol:i})):(Gj(h,p),Eo(h).styles(s)):(h.remove(),Eo(p).attr("className",Yp.marker.name).styles(s),c.appendChild(p)):(p instanceof kl||Eo(p).attr("className",Yp.marker.name).styles(s),c.appendChild(p)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]),sM(r.markerGroup.node(),r.scaleSize,!0)})},t.prototype.renderLabel=function(n){var r=Va(this.attributes,"label"),i=r.text,s=(0,ie._T)(r,["text"]);this.labelGroup=n.maybeAppendByClassName(Yp.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(Yp.label,function(){return B_(i)}).styles(s)},t.prototype.renderValue=function(n){var r=this,i=Va(this.attributes,"value"),s=i.text,l=(0,ie._T)(i,["text"]);this.valueGroup=n.maybeAppendByClassName(Yp.valueGroup,"g").style("zIndex",0),ci(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(Yp.value,function(){return B_(s)}).styles(l)})},t.prototype.renderBackground=function(n){var r=this.shape,i=r.width,s=r.height,l=Va(this.attributes,"background");this.background=n.maybeAppendByClassName(Yp.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(Yp.background,"rect").styles((0,ie.pi)({width:i,height:s},l))},t.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,s=n.height,l=(0,ie.CR)(n.position,3),c=l[0],h=l[1],p=l[2],v=s/2;this.markerGroup.styles({x:c,y:v}),this.labelGroup.styles({x:h,y:v}),fM(this.labelGroup.select(Yp.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({x:p,y:v}),fM(this.valueGroup.select(Yp.value.class).node(),Math.ceil(i)))},t.prototype.render=function(n,r){var i=Eo(r);this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},t}(Vr),e1=Ia({page:"item-page",navigator:"navigator",item:"item"},"items"),H8=function(e,t,n){return n===void 0&&(n=!0),e?t(e):n},PQ=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:aP,mouseenter:aP,mouseleave:aP})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,s=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,s.length]:[s.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,s=Va(this.attributes,"item"),l=r.map(function(c,h){var p=c.id,v=p===void 0?h:p,y=c.label,b=c.value;return{id:"".concat(v),index:h,style:(0,ie.pi)({layout:i,labelText:y,valueText:b},Object.fromEntries(Object.entries(s).map(function(T){var M=(0,ie.CR)(T,2),R=M[0],L=M[1];return[R,Qd(L,[c,h,r])]})))}});return l},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,s=r.width,l=r.rowPadding,c=r.colPadding,h=(0,ie.CR)(this.navigatorShape,1),p=h[0],v=(0,ie.CR)(this.grid,2),y=v[0],b=v[1],T=b*y,M=0;return this.pageViews.children.map(function(R,L){var N,z,H=Math.floor(L/T),X=L%T,Y=n.ifHorizontal(b,y),ne=[Math.floor(X/Y),X%Y];i==="vertical"&&ne.reverse();var ve=(0,ie.CR)(ne,2),Ee=ve[0],Ie=ve[1],Ye=(s-p-(b-1)*c)/b,$e=R.getBBox().height,St=(0,ie.CR)([0,0],2),Qe=St[0],lt=St[1];return i==="horizontal"?(N=(0,ie.CR)([M,Ee*($e+l)],2),Qe=N[0],lt=N[1],M=Ie===b-1?0:M+Ye+c):(z=(0,ie.CR)([Ie*(Ye+c),M],2),Qe=z[0],lt=z[1],M=Ee===y-1?0:M+$e+l),{page:H,index:L,row:Ee,col:Ie,pageIndex:X,width:Ye,height:$e,x:Qe,y:lt}})},t.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,s=n.rowPadding,l=n.colPadding,c=(0,ie.CR)(this.navigatorShape,1),h=c[0],p=(0,ie.CR)(this.grid,2),v=p[0],y=p[1],b=(0,ie.CR)([r-h,i],2),T=b[0],M=b[1],R=(0,ie.CR)([0,0,0,0,0,0,0,0],8),L=R[0],N=R[1],z=R[2],H=R[3],X=R[4],Y=R[5],ne=R[6],ve=R[7];return this.pageViews.children.map(function(Ee,Ie){var Ye,$e,St,Qe,lt=Ee.getBBox(),ht=lt.width,bt=lt.height,Ht=ne===0?0:l,Ot=ne+Ht+ht;if(Ot<=T&&H8(X,function(Mn){return Mn<y}))return Ye=(0,ie.CR)([ne+Ht,ve,Ot],3),L=Ye[0],N=Ye[1],ne=Ye[2],{width:ht,height:bt,x:L,y:N,page:z,index:Ie,pageIndex:H++,row:Y,col:X++};$e=(0,ie.CR)([Y+1,0,0,ve+bt+s],4),Y=$e[0],X=$e[1],ne=$e[2],ve=$e[3];var kt=ve+bt;return kt<=M&&H8(Y,function(Mn){return Mn<v})?(St=(0,ie.CR)([ne,ve,ht],3),L=St[0],N=St[1],ne=St[2],{width:ht,height:bt,x:L,y:N,page:z,index:Ie,pageIndex:H++,row:Y,col:X++}):(Qe=(0,ie.CR)([0,0,ht,0,z+1,0,0,0],8),L=Qe[0],N=Qe[1],ne=Qe[2],ve=Qe[3],z=Qe[4],H=Qe[5],Y=Qe[6],X=Qe[7],{width:ht,height:bt,x:L,y:N,page:z,index:Ie,pageIndex:H++,row:Y,col:X++})})},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return om(i,n,r)},t.prototype.flattenPage=function(n){n.querySelectorAll(e1.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(e1.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},t.prototype.renderItems=function(n){var r=this.attributes,i=r.click,s=r.mouseenter,l=r.mouseleave;this.flattenPage(n);var c=this.dispatchCustomEvent.bind(this);Eo(n).selectAll(e1.item.class).data(this.renderData,function(h){return h.id}).join(function(h){return h.append(function(p){var v=p.style;return new RQ({style:v})}).attr("className",e1.item.name).on("click",function(){i==null||i(this),c("itemClick",{item:this})}).on("pointerenter",function(){s==null||s(this),c("itemMouseenter",{item:this})}).on("pointerleave",function(){l==null||l(this),c("itemMouseleave",{item:this})})},function(h){return h.each(function(p){var v=p.style;this.update(v)})},function(h){return h.remove()})},t.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,s=r.width,l=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,c=(0,ie.CR)(this.navigatorShape,2),h=c[0],p=c[1];this.navigator.update(i==="grid"?{pageWidth:s-h,pageHeight:l-p}:{})},t.prototype.adjustLayout=function(){var n=this,r=Object.entries(AQ(this.itemsLayout,"page")).map(function(s){var l=(0,ie.CR)(s,2),c=l[0],h=l[1];return{page:c,layouts:h}}),i=(0,ie.ev)([],(0,ie.CR)(this.navigator.getContainer().children),!1);r.forEach(function(s){var l=s.layouts,c=n.pageViews.appendChild(new $l({className:e1.page.name}));l.forEach(function(h){var p=h.x,v=h.y,y=h.index,b=h.width,T=h.height,M=i[y];c.appendChild(M),TQ(M,"__layout__",h),M.update({x:p,y:v,width:b,height:T})})}),this.relayoutNavigator()},t.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=Va(this.attributes,"nav"),s=Jt({orientation:r},i),l=this;return n.selectAll(e1.navigator.class).data(["nav"]).join(function(c){return c.append(function(){return new OQ({style:s})}).attr("className",e1.navigator.name).each(function(){l.navigator=this})},function(c){return c.each(function(){this.update(s)})},function(c){return c.remove()}),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var s=this.renderNavigator(Eo(r));this.renderItems(s.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(n,r){var i=new Yl(n,{detail:r});this.dispatchEvent(i)},t}(Vr),IQ=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,lW)||this}return t.prototype.renderTitle=function(n,r,i){var s=this.attributes,l=s.showTitle,c=s.titleText,h=Va(this.attributes,"title"),p=(0,ie.CR)(Vh(h),2),v=p[0],y=p[1];this.titleGroup=n.maybeAppendByClassName(mh.titleGroup,"g").styles(y);var b=(0,ie.pi)((0,ie.pi)({width:r,height:i},v),{text:l?c:""});this.title=this.titleGroup.maybeAppendByClassName(mh.title,function(){return new O4({style:b})}).update(b)},t.prototype.renderItems=function(n,r){var i=r.x,s=r.y,l=r.width,c=r.height,h=Va(this.attributes,"title",!0),p=(0,ie.CR)(Vh(h),2),v=p[0],y=p[1],b=(0,ie.pi)((0,ie.pi)({},v),{width:l,height:c,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(mh.itemsGroup,"g").styles((0,ie.pi)({x:i,y:s},y));var T=this;this.itemsGroup.selectAll(mh.items.class).data(["items"]).join(function(M){return M.append(function(){return new PQ({style:b})}).attr("className",mh.items.name).each(function(){T.items=Eo(this)})},function(M){return M.update(b)},function(M){return M.remove()})},t.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,s=r.y;this.itemsGroup.node().setLocalPosition(i,s)}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,s=n.height;return r?this.title.node().getAvailableSpace():new Ku(0,0,i,s)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),s=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!s?e.prototype.getBBox.call(this):hV(i,s)},t.prototype.render=function(n,r){var i=n.width,s=n.height,l=Eo(r);this.renderTitle(l,i,s),this.renderItems(l,this.availableSpace),this.adjustLayout()},t}(Vr);function tE(e){if(uy(e)){var t=e;return t[t.length-1]}}var LQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function DQ(e,t){const n=rm(e,"shape"),r=rm(e,"color"),i=n?n.clone():null,s=[];for(const[c,h]of t){const p=c.type,y=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:h.data).map((b,T)=>{var M;return i?i.map(b||"point"):((M=c==null?void 0:c.style)===null||M===void 0?void 0:M.shape)||h.defaultShape||"point"});typeof p=="string"&&s.push([p,y])}if(s.length===0)return["point",["point"]];if(s.length===1||!n)return s[0];const{range:l}=n.getOptions();return s.map(([c,h])=>{let p=0;for(let v=0;v<s.length;v++){const y=l[v%l.length];h[v]===y&&p++}return[p/h.length,[c,h]]}).sort((c,h)=>h[0]-c[0])[0][1]}function NQ(e,t){const{scales:n,library:r,markState:i}=t,[s,l]=DQ(n,i),{itemMarker:c,itemMarkerSize:h}=e,p=(b,T)=>{var M,R,L;const N=((L=(R=(M=r[`mark.${s}`])===null||M===void 0?void 0:M.props)===null||R===void 0?void 0:R.shape[b])===null||L===void 0?void 0:L.props.defaultMarker)||tE(b.split(".")),z=typeof h=="function"?h(T):h;return()=>Xq(N,{color:T.color})(0,0,z)},v=b=>`${l[b]}`;return rm(n,"shape")&&!c?(b,T)=>p(v(T),b):typeof c=="function"?(b,T)=>{const M=c(b.id,T);return typeof M=="string"?p(M,b):M}:(b,T)=>p(c||v(T),b)}function FQ(e){const t=rm(e,"opacity");if(t){const{range:n}=t.getOptions();return(r,i)=>n[i]}}function BQ(e,t){const n=rm(e,"size");return n instanceof YT?n.map(NaN)*2:t}function kQ(e,t){const{labelFormatter:n=b=>`${b}`}=e,{scales:r,theme:i}=t,s=i.legendCategory.itemMarkerSize,l=BQ(r,s),c={itemMarker:NQ(Object.assign(Object.assign({},e),{itemMarkerSize:l}),t),itemMarkerSize:l,itemMarkerOpacity:FQ(r)},h=typeof n=="string"?em(n):n,p=rm(r,"color"),v=mH(r),y=p?b=>p.map(b):()=>t.theme.color;return Object.assign(Object.assign({},c),{data:v.map(b=>({id:b,label:h(b),color:y(b)}))})}function zQ(e,t,n){const{position:r}=t;if(r==="center"){const{bbox:l}=e,{width:c,height:h}=l;return{width:c,height:h}}const{width:i,height:s}=Q4(e,t,n);return{width:i,height:s}}const sP=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:c,cols:h,itemMarker:p}=e,v=LQ(e,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:y}=v;return b=>{const{value:T,theme:M}=b,{bbox:R}=T,{width:L,height:N}=zQ(T,e,sP),z=q4(s,n),H=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(s)?"vertical":"horizontal",width:L,height:N,layout:h!==void 0?"grid":"flex"},h!==void 0&&{gridCol:h}),y!==void 0&&{gridRow:y}),{titleText:Qw(c)}),kQ(e,b)),{legendCategory:X={}}=M,Y=Jw(Object.assign({},X,H,v)),ne=new dH({style:Object.assign(Object.assign({x:R.x,y:R.y,width:R.width,height:R.height},z),{subOptions:Y})});return ne.appendChild(new IQ({className:"legend-category",style:Y})),ne}};sP.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const W8=e=>()=>new $l;W8.props={};var UQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function G8(e,t,n,r){switch(r){case"center":return{x:e+n/2,y:t,textAlign:"middle"};case"right":return{x:e+n,y:t,textAlign:"right"};default:return{x:e,y:t,textAlign:"left"}}}const jQ=hH({render(e,t){const{width:n,title:r,subtitle:i,spacing:s=2,align:l="left"}=e,c=UQ(e,["width","title","subtitle","spacing","align"]),h=xo(c,"title"),p=xo(c,"subtitle"),y=$4(t,".title","text").attr("className","title").call(ma,Object.assign(Object.assign(Object.assign({},G8(0,0,n,l)),{fontSize:14,textBaseline:"top",text:r}),h)).node().getLocalBounds();$4(t,".sub-title","text").attr("className","sub-title").call(b=>{if(!i)return b.node().remove();b.node().attr(Object.assign(Object.assign(Object.assign({},G8(0,y.max[1]+s,n,l)),{fontSize:12,textBaseline:"top",text:i}),p))})}}),Z8=e=>({value:t,theme:n})=>{const{x:r,y:i,width:s,height:l}=t.bbox;return new jQ({style:ui({},n.title,Object.assign({x:r,y:i,width:s,height:l},e))})};Z8.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var lP=function(e){if(typeof e!="object"||e===null)return e;var t;if(Hr(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=lP(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=lP(e[i]):t[i]=e[i]}return t},uP=lP,VQ=function(e){(0,ie.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,ie._T)(n,["style"]);return r=e.call(this,ui({},{type:"column"},(0,ie.pi)({style:i},s)))||this,r.columnsGroup=new $l({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return t.prototype.render=function(){var n=this.attributes.columns;Eo(this.columnsGroup).selectAll(".column").data(n.flat()).join(function(r){return r.append("rect").attr("className","column").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},t.prototype.update=function(n){this.attr(Jt({},this.attributes,n)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(Fl),HQ=function(e){(0,ie.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,ie._T)(n,["style"]);return r=e.call(this,ui({},{type:"lines"},(0,ie.pi)({style:i},s)))||this,r.linesGroup=r.appendChild(new $l),r.areasGroup=r.appendChild(new $l),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas;r&&this.renderLines(r),i&&this.renderAreas(i)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(n){this.attr(Jt({},this.attributes,n)),this.render()},t.prototype.renderLines=function(n){Eo(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},t.prototype.renderAreas=function(n){Eo(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},t}(Fl);function WQ(e,t,n,r){var i,s=[],l=!!r,c,h,p=[1/0,1/0],v=[-1/0,-1/0],y,b,T;if(l){i=(0,ie.CR)(r,2),p=i[0],v=i[1];for(var M=0,R=e.length;M<R;M+=1){var L=e[M];p=lg(p,L),v=ug(v,L)}}for(var M=0,N=e.length;M<N;M+=1){var L=e[M];if(M===0&&!n)T=L;else if(M===N-1&&!n)b=L,s.push(T),s.push(b);else{var z=[M?M-1:N-1,M-1][n?0:1];c=e[z],h=e[n?(M+1)%N:M+1];var H=[0,0];H=sg(h,c),H=vh(H,t);var X=F_(L,c),Y=F_(L,h),ne=X+Y;ne!==0&&(X/=ne,Y/=ne);var ve=vh(H,-X),Ee=vh(H,Y);b=qf(L,ve),y=qf(L,Ee),y=lg(y,ug(h,L)),y=ug(y,lg(h,L)),ve=sg(y,L),ve=vh(ve,-X/Y),b=qf(L,ve),b=lg(b,ug(c,L)),b=ug(b,lg(c,L)),Ee=sg(L,b),Ee=vh(Ee,Y/X),y=qf(L,Ee),l&&(b=ug(b,p),b=lg(b,v),y=ug(y,p),y=lg(y,v)),s.push(T),s.push(b),T=y}}return n&&s.push(s.shift()),s}function GQ(e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var i=!!t,s=[],l=0,c=e.length;l<c;l+=2)s.push([e[l],e[l+1]]);for(var h=WQ(s,.4,i,n),p=s.length,v=[],y,b,T,l=0;l<p-1;l+=1)y=h[l*2],b=h[l*2+1],T=s[l+1],v.push(["C",y[0],y[1],b[0],b[1],T[0],T[1]]);return i&&(y=h[p],b=h[p+1],r=(0,ie.CR)(s,1),T=r[0],v.push(["C",y[0],y[1],b[0],b[1],T[0],T[1]])),v}function ZQ(e,t){var n,r=t.x,i=t.y,s=(0,ie.CR)(i.getOptions().range||[0,0],2),l=s[0],c=s[1];return c>l&&(n=(0,ie.CR)([l,c],2),c=n[0],l=n[1]),e.map(function(h){var p=h.map(function(v,y){return[r.map(y),(0,Zl.Z)(i.map(v),c,l)]});return p})}function nE(e,t){t===void 0&&(t=!1);var n=t?e.length-1:0,r=e.map(function(i,s){return(0,ie.ev)([s===n?"M":"L"],(0,ie.CR)(i),!1)});return t?r.reverse():r}function QT(e,t){if(t===void 0&&(t=!1),e.length<=2)return nE(e);for(var n=[],r=e.length,i=0;i<r;i+=1){var s=t?e[r-i-1]:e[i];Mw(s,n.slice(-2))||n.push.apply(n,(0,ie.ev)([],(0,ie.CR)(s),!1))}var l=GQ(n,!1);return t?l.unshift((0,ie.ev)(["M"],(0,ie.CR)(e[r-1]),!1)):l.unshift((0,ie.ev)(["M"],(0,ie.CR)(e[0]),!1)),l}function cP(e,t,n){var r=uP(e);return r.push(["L",t,n],["L",0,n],["Z"]),r}function XQ(e,t,n,r){return e.map(function(i){return cP(t?QT(i):nE(i),n,r)})}function YQ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=nE(s),c=void 0;if(i===0)c=cP(l,t,n);else{var h=e[i-1],p=nE(h,!0);p[0][0]="L",c=(0,ie.ev)((0,ie.ev)((0,ie.ev)([],(0,ie.CR)(l),!1),(0,ie.CR)(p),!1),[["Z"]],!1)}r.push(c)}return r}function $Q(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=QT(s),c=void 0;if(i===0)c=cP(l,t,n);else{var h=e[i-1],p=QT(h,!0),v=s[0];p[0][0]="L",c=(0,ie.ev)((0,ie.ev)((0,ie.ev)([],(0,ie.CR)(l),!1),(0,ie.CR)(p),!1),[(0,ie.ev)(["M"],(0,ie.CR)(v),!1),["Z"]],!1)}r.push(c)}return r}var qQ=function(e,t){if(Hr(e)){for(var n,r=1/0,i=0;i<e.length;i++){var s=e[i],l=wc(t)?t(s):s[t];l<r&&(n=s,r=l)}return n}},KQ=function(e,t){if(Hr(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var s=e[i],l=wc(t)?t(s):s[t];l>r&&(n=s,r=l)}return n}};function X8(e){return e.length===0?[0,0]:[Ni(qQ(e,function(t){return Ni(t)||0})),Xi(KQ(e,function(t){return Xi(t)||0}))]}function Y8(e){for(var t=uP(e),n=t[0].length,r=(0,ie.CR)([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],s=r[1],l=0;l<t.length;l+=1)for(var c=t[l],h=0;h<n;h+=1)c[h]>=0?(c[h]+=i[h],i[h]=c[h]):(c[h]+=s[h],s[h]=c[h]);return t}var QQ=function(e){(0,ie.ZT)(t,e);function t(n){return e.call(this,n,{type:"line",width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(t.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=uP(n);return(0,$u.Z)(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?Y8(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var n=this.scales.y,r=(0,ie.CR)(n.getOptions().domain||[0,0],2),i=r[0],s=r[1];return s<0?n.map(s):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,s=r.isStack,l=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var c=Va(this.attributes,"area"),h=Va(this.attributes,"line"),p=this.containerShape.width,v=this.data;if(v[0].length===0)return{lines:[],areas:[]};var y=this.scales,b=y.x,T=y.y,M=ZQ(v,{type:"line",x:b,y:T}),R=[];if(c){var L=this.baseline;s?R=l?$Q(M,p,L):YQ(M,p,L):R=XQ(M,l,p,L)}return{lines:M.map(function(N,z){return(0,ie.pi)({stroke:n.getColor(z),path:l?QT(N):nE(N)},h)}),areas:R.map(function(N,z){return(0,ie.pi)({path:N,fill:n.getColor(z)},c)})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var n=this,r=Va(this.attributes,"column"),i=this.attributes,s=i.isStack,l=i.type,c=i.scale;if(l!=="column")throw new Error("columnsStyle can only be used in column type");var h=this.containerShape.height,p=this.rawData;if(!p)return{columns:[]};s&&(p=Y8(p));var v=this.createScales(p),y=v.x,b=v.y,T=(0,ie.CR)(X8(p),2),M=T[0],R=T[1],L=new vd({domain:[0,R-(M>0?0:M)],range:[0,h*c]}),N=y.getBandWidth(),z=this.rawData;return{columns:p.map(function(H,X){return H.map(function(Y,ne){var ve=N/p.length,Ee=function(){return{x:y.map(ne)+ve*X,y:Y>=0?b.map(Y):b.map(0),width:ve,height:L.map(Math.abs(Y))}},Ie=function(){return{x:y.map(ne),y:b.map(Y),width:N,height:L.map(z[X][ne])}};return(0,ie.pi)((0,ie.pi)({fill:n.getColor(X)},r),s?Ie():Ee())})})}},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){ra(r,".container","rect").attr("className","container").node();var i=n.type,s="spark".concat(i),l=i==="line"?this.linesStyle:this.columnsStyle;Eo(r).selectAll(".spark").data([i]).join(function(c){return c.append(function(h){return h==="line"?new HQ({className:s,style:l}):new VQ({className:s,style:l})}).attr("className","spark ".concat(s))},function(c){return c.update(l)},function(c){return c.remove()})},t.prototype.getColor=function(n){var r=this.attributes.color;return Hr(r)?r[n%r.length]:wc(r)?r.call(null,n):r},t.prototype.createScales=function(n){var r,i,s=this.attributes,l=s.type,c=s.scale,h=s.range,p=h===void 0?[]:h,v=s.spacing,y=this.containerShape,b=y.width,T=y.height,M=(0,ie.CR)(X8(n),2),R=M[0],L=M[1],N=new vd({domain:[(r=p[0])!==null&&r!==void 0?r:R,(i=p[1])!==null&&i!==void 0?i:L],range:[T,T*(1-c)]});return l==="line"?{type:l,x:new vd({domain:[0,n[0].length-1],range:[0,b]}),y:N}:{type:l,x:new wy({domain:n[0].map(function(z,H){return H}),range:[0,b],paddingInner:v,paddingOuter:v/2,align:.5}),y:N}},t.tag="sparkline",t}(Vr),$8=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,(0,ie.pi)((0,ie.pi)((0,ie.pi)({animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},Tc(lL,"handle")),Tc(aL,"handleIcon")),Tc(sL,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(s){s.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(tT(s));var l=r.availableSpace,c=l.x,h=l.y,p=r.getBBox(),v=p.x,y=p.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([c,h])-r.getOrientVal([+v,+y])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var s=r.attributes,l=s.slidable,c=s.brushable,h=s.type;i.stopPropagation();var p=r.getOrientVal(tT(i)),v=p-r.prevPos;if(v){var y=r.getRatio(v);switch(r.target){case"start":l&&r.setValuesOffset(y);break;case"end":l&&r.setValuesOffset(0,y);break;case"selection":l&&r.setValuesOffset(y,y);break;case"track":if(!c)return;r.selectionWidth+=y,h==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=p}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var s=r.attributes,l=s.onChange,c=s.type,h=c==="range"?i:i[1],p=c==="range"?r.getValues():r.getValues()[1],v=new Yl("valuechange",{detail:{oldValue:h,value:p}});r.dispatchEvent(v),l==null||l(p)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=Va(this.attributes,"sparkline");return(0,ie.pi)((0,ie.pi)({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,s=(0,ie.CR)(this.getOrientVal([[r,i],[i,r]]),2),l=s[0],c=s[1];return{width:l,height:c}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes.padding,r=(0,ie.CR)(Wh(n),4),i=r[0],s=r[1],l=r[2],c=r[3],h=this.shape,p=h.width,v=h.height;return{x:c,y:i,width:p-(c+s),height:v-(i+l)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},t.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(im.selection.class).each(function(i,s){Se(this,r[s],n)})},t.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&Se(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&Se(this.endHandle,this.getHandleStyle("end"),n))},t.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,s=this.clampValues(n);this.attributes.values=s,this.setValues(s),r&&this.onValueChange(i)},t.prototype.renderTrack=function(n){var r=Va(this.attributes,"track");this.trackShape=Eo(n).maybeAppendByClassName(im.track,"rect").styles((0,ie.pi)((0,ie.pi)({},this.shape),r))},t.prototype.renderBrushArea=function(n){var r=this.attributes.brushable;this.brushArea=Eo(n).maybeAppendByClassName(im.brushArea,"rect").styles((0,ie.pi)({fill:"transparent",cursor:r?"crosshair":"default"},this.shape))},t.prototype.renderSparkline=function(n){var r=this,i=this.attributes.orientation,s=Eo(n).maybeAppendByClassName(im.sparklineGroup,"g");ci(i==="horizontal",s,function(l){var c=r.sparklineStyle;l.maybeAppendByClassName(im.sparkline,function(){return new QQ({style:c})}).update(c)})},t.prototype.renderHandles=function(){var n=this,r,i=this.attributes,s=i.showHandle,l=i.type,c=l==="range"?["start","end"]:["end"],h=s?c:[],p=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(im.handle.class).data(h.map(function(v){return{type:v}}),function(v){return v.type}).join(function(v){return v.append(function(y){var b=y.type;return new uL({style:n.getHandleStyle(b)})}).each(function(y){var b=y.type;this.attr("class","".concat(im.handle.name," ").concat(b,"-handle"));var T="".concat(b,"Handle");p[T]=this,this.addEventListener("pointerdown",p.onDragStart(b))})},function(v){return v.each(function(y){var b=y.type;this.update(p.getHandleStyle(b))})},function(v){return v.each(function(y){var b=y.type,T="".concat(b,"Handle");p[T]=void 0}).remove()})},t.prototype.renderSelection=function(n){var r=this.attributes,i=r.type,s=r.selectionType;this.foregroundGroup=Eo(n).maybeAppendByClassName(im.foreground,"g");var l=Va(this.attributes,"selection"),c=function(p){return p.style("visibility",function(v){return v.show?"visible":"hidden"}).style("cursor",function(v){return s==="select"?"grab":s==="invert"?"crosshair":"default"}).styles(l)},h=this;this.foregroundGroup.selectAll(im.selection.class).data(i==="value"?[]:this.calcSelectionArea().map(function(p,v){return{style:(0,ie.pi)({},p),index:v,show:s==="select"?v===1:v!==1}}),function(p){return p.index}).join(function(p){return p.append("rect").attr("className",im.selection.name).call(c).each(function(v,y){var b=this;y===1?(h.selectionShape=Eo(this),this.on("pointerdown",function(T){b.attr("cursor","grabbing"),h.onDragStart("selection")(T)}),h.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),h.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),h.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){b.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){b.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){b.attr("cursor","pointer")})):this.on("pointerdown",h.onDragStart("track"))})},function(p){return p.call(c)},function(p){return p.remove()}),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},t.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var s=(0,ie.CR)(this.range,2),l=s[0],c=s[1],h=(0,ie.CR)(this.getValues().map(function(L){return eT(L,r)}),2),p=h[0],v=h[1],y=Array.isArray(n)?n:[p,n!=null?n:v],b=(0,ie.CR)((y||[p,v]).map(function(L){return eT(L,r)}),2),T=b[0],M=b[1];if(this.attributes.type==="value")return[0,(0,Zl.Z)(M,l,c)];T>M&&(i=(0,ie.CR)([M,T],2),T=i[0],M=i[1]);var R=M-T;return R>c-l?[l,c]:T<l?p===l&&v===M?[l,M]:[l,R+l]:M>c?v===c&&p===T?[T,c]:[c-R,c]:[T,M]},t.prototype.calcSelectionArea=function(n){var r=(0,ie.CR)(this.clampValues(n),2),i=r[0],s=r[1],l=this.availableSpace,c=l.x,h=l.y,p=l.width,v=l.height;return this.getOrientVal([[{y:h,height:v,x:c,width:i*p},{y:h,height:v,x:i*p+c,width:(s-i)*p},{y:h,height:v,x:s*p,width:(1-s)*p}],[{x:c,width:p,y:h,height:i*v},{x:c,width:p,y:i*v+h,height:(s-i)*v},{x:c,width:p,y:s*v,height:(1-s)*v}]])},t.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,s=i.x,l=i.y,c=i.width,h=i.height,p=(0,ie.CR)(this.clampValues(),2),v=p[0],y=p[1],b=n==="start"?-r:r,T=(n==="start"?v:y)*this.getOrientVal([c,h])+b;return{x:s+this.getOrientVal([T,c/2]),y:l+this.getOrientVal([h/2,T])}},t.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transform:"rotate(90)",textAlign:"start"}:n==="end"?{transform:"rotate(90)",textAlign:"end"}:{}},t.prototype.calcHandleText=function(n){var r,i=this.attributes,s=i.type,l=i.orientation,c=i.formatter,h=i.autoFitLabel,p=Va(this.attributes,"handle"),v=Va(p,"label"),y=p.spacing,b=this.getHandleSize(),T=this.clampValues(),M=n==="start"?T[0]:T[1],R=c(M),L=new to({style:(0,ie.pi)((0,ie.pi)((0,ie.pi)({},v),this.inferTextStyle(n)),{text:R})}),N=L.getBBox(),z=N.width,H=N.height;if(L.destroy(),!h){if(s==="value")return{text:R,x:0,y:-H-y};var X=y+b+(l==="horizontal"?z/2:0);return r={text:R},r[l==="horizontal"?"x":"y"]=n==="start"?-X:X,r}var Y=0,ne=0,ve=this.availableSpace,Ee=ve.width,Ie=ve.height,Ye=this.calcSelectionArea()[1],$e=Ye.x,St=Ye.y,Qe=Ye.width,lt=Ye.height,ht=y+b;if(l==="horizontal"){var bt=ht+z/2;if(n==="start"){var Ht=$e-ht-z;Y=Ht>0?-bt:bt}else{var Ot=Ee-$e-Qe-ht>z;Y=Ot?bt:-bt}}else{var kt=ht,Mn=H+ht;n==="start"?ne=St-b>H?-Mn:kt:ne=Ie-(St+lt)-b>H?Mn:-kt}return{x:Y,y:ne,text:R}},t.prototype.getHandleLabelStyle=function(n){var r=Va(this.attributes,"handleLabel");return(0,ie.pi)((0,ie.pi)((0,ie.pi)({},r),this.calcHandleText(n)),this.inferTextStyle(n))},t.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=Va(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),s=this.getHandleSize();return(0,ie.pi)({cursor:i,shape:n,size:s},r)},t.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.showLabel,s=r.showLabelOnInteraction,l=r.orientation,c=this.calcHandlePosition(n),h=this.calcHandleText(n),p=i;return!i&&s&&(this.target?p=!0:p=!1),(0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)({},Tc(this.getHandleIconStyle(),"icon")),Tc((0,ie.pi)((0,ie.pi)({},this.getHandleLabelStyle(n)),h),"label")),c),{orientation:l,showLabel:p,type:n,zIndex:3})},t.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,s=n.height;return r||Math.floor((this.getOrientVal([+s,+i])+4)/2.4)},t.prototype.getOrientVal=function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1],l=this.attributes.orientation;return l==="horizontal"?i:s},t.prototype.setValuesOffset=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=this.attributes.type,l=(0,ie.CR)(this.getValues(),2),c=l[0],h=l[1],p=s==="range"?n:0,v=[c+p,h+r].sort();i?this.setValues(v):this.innerSetValues(v,!0)},t.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,s=r.height;return n/this.getOrientVal([i,s])},t.prototype.dispatchCustomEvent=function(n,r,i){var s=this;n.on(r,function(l){l.stopPropagation(),s.dispatchEvent(new Yl(i,{detail:l}))})},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},t.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,s=n.deltaY,l=s||i,c=this.getRatio(l);this.setValuesOffset(c,c,!0)}},t.tag="slider",t}(Vr),JQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function eJ(e,t,n){const{x:r,y:i,width:s,height:l}=e;if(t==="left")return[r+s-n,i];if(t==="right")return[r,i];if(t==="bottom")return[r,i];if(t==="top")return[r,i+l-n]}const rE=e=>{const{orientation:t,labelFormatter:n,size:r,style:i={},position:s}=e,l=JQ(e,["orientation","labelFormatter","size","style","position"]);return c=>{var h;const{scales:[p],value:v,theme:y,coordinate:b}=c,{bbox:T}=v,{width:M,height:R}=T,{slider:L={}}=y,N=((h=p.getFormatter)===null||h===void 0?void 0:h.call(p))||(Ee=>Ee+""),z=typeof n=="string"?em(n):n,H=t==="horizontal",X=Cu(b)&&H,{trackSize:Y=L.trackSize}=i,[ne,ve]=eJ(T,s,Y);return new $8({className:"slider",style:Object.assign({},L,Object.assign(Object.assign({x:ne,y:ve,trackLength:H?M:R,orientation:t,formatter:Ee=>{const Ie=z||N,Ye=X?1-Ee:Ee,$e=wb(p,Ye,!0);return Ie($e)},sparklineData:nJ(e,c)},i),l))})}};function tJ(e,t){const[n]=Array.from(e.entries()).filter(([i])=>i.type==="line"||i.type==="area").map(([i])=>{const{encode:s,slider:l}=i;if(l!=null&&l.x&&Object.keys(l.x).length===0){const c=h=>{const p=s[h];return[h,p?p.value:void 0]};return Object.fromEntries(t.map(c))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((i,s,l)=>(i[s]=i[s]||[],i[s].push(n.y[l]),i),{});return Object.values(r)}function nJ(e,t){const{markState:n}=t;return Hr(e.sparklineData)?e.sparklineData:tJ(n,["y","series"])}rE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const q8=e=>rE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));q8.props=Object.assign(Object.assign({},rE.props),{defaultPosition:"bottom"});const K8=e=>rE(Object.assign(Object.assign({},e),{orientation:"vertical"}));K8.props=Object.assign(Object.assign({},rE.props),{defaultPosition:"left"});var rJ=function(e){(0,ie.ZT)(t,e);function t(n){var r=e.call(this,n,{isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var s=r.attributes.value;if(i!==s){var l={detail:{oldValue:i,value:s}};r.dispatchEvent(new Yl("scroll",l)),r.dispatchEvent(new Yl("valuechange",l))}},r.onTrackClick=function(i){var s=r.attributes.slidable;if(s){var l=(0,ie.CR)(r.getLocalPosition(),2),c=l[0],h=l[1],p=(0,ie.CR)(r.padding,4),v=p[0],y=p[3],b=r.getOrientVal([c+y,h+v]),T=r.getOrientVal(tT(i)),M=(T-b)/r.trackLength;r.setValue(M,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new Yl("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new Yl("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new Yl("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new Yl("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(t.prototype,"padding",{get:function(){var n=this.attributes.padding;return Wh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,ie.CR)(this.range,2),i=r[0],s=r[1];return(0,Zl.Z)(n,i,s)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,s=i===void 0?r:i;return s},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=(0,ie.CR)(this.padding,4),s=i[0],l=i[1],c=i[2],h=i[3],p=(0,ie.CR)(this.getOrientVal([[r,n],[n,r]]),2),v=p[0],y=p[1];return{x:h,y:s,width:+v-(h+l),height:+y-(s+c)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var s=this.availableSpace,l=s.width,c=s.height;return i||this.getOrientVal([c,l])/2},enumerable:!1,configurable:!0}),t.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,s=r.contentLength,l=i/s,c=(0,ie.CR)(this.range,2),h=c[0],p=c[1],v=n*(p-h-l);return[v,v+l]},t.prototype.getValue=function(){return this.value},t.prototype.renderSlider=function(n){var r=this.attributes,i=r.orientation,s=r.trackSize,l=r.padding,c=r.slidable,h=Va(this.attributes,"track"),p=Va(this.attributes,"thumb"),v=(0,ie.pi)((0,ie.pi)({brushable:!1,orientation:i,padding:l,selectionRadius:this.thumbRadius,showHandle:!1,slidable:c,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:s,values:this.getValues()},Tc(h,"track")),Tc(p,"selection"));this.slider=Eo(n).maybeAppendByClassName("scrollbar",function(){return new $8({style:v})}).update(v).node()},t.prototype.render=function(n,r){this.renderSlider(r)},t.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,s=(0,ie.CR)(this.range,2),l=s[0],c=s[1];this.slider.setValues(this.getValues((0,Zl.Z)(n,l,c)),r),this.onValueChange(i)},t.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},t.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},t.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},t.tag="scrollbar",t}(Vr),iJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const iE=e=>{const{orientation:t,labelFormatter:n,style:r}=e,i=iJ(e,["orientation","labelFormatter","style"]);return({scales:[s],value:l,theme:c})=>{const{bbox:h}=l,{x:p,y:v,width:y,height:b}=h,{scrollbar:T={}}=c,{ratio:M,range:R}=s.getOptions(),L=t==="horizontal"?y:b,N=L/M,[z,H]=R,X=H>z?0:1;return new rJ({className:"g2-scrollbar",style:Object.assign({},T,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:p,y:v,trackLength:L,value:X}),i),{orientation:t,contentLength:N,viewportLength:L}))})}};iE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const Q8=e=>iE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));Q8.props=Object.assign(Object.assign({},iE.props),{defaultPosition:"bottom"});const J8=e=>iE(Object.assign(Object.assign({},e),{orientation:"vertical"}));J8.props=Object.assign(Object.assign({},iE.props),{defaultPosition:"left"});const fP=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,T]=Cu(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],M=[{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.01},{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y}];return c.animate(M,Object.assign(Object.assign({},l),e))}},oJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,T]=Cu(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],M=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return c.animate(M,Object.assign(Object.assign({},l),e))}},ek=(e,t)=>{const{coordinate:r}=t;return Lu.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:Po.NUMBER}),(i,s,l)=>{const[c]=i,h=v=>{const{__data__:y,style:b}=v,{radius:T=0,inset:M=0,fillOpacity:R=1,strokeOpacity:L=1,opacity:N=1}=b,{points:z,y:H,y1:X}=y,Y=U_(r,z,[H,X]),{innerRadius:ne,outerRadius:ve}=Y,Ee=fT().cornerRadius(T).padAngle(M*Math.PI/180),Ie=new gl({}),Ye=r.getCenter(),$e=lt=>{Ie.attr({d:Ee(lt),transform:`translate(${Ye[0]}, ${Ye[1]})`});const ht=_x(Ie);return Ie.style.transform="",ht},St=[{scaleInYRadius:ne+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:ne+1e-4,fillOpacity:R,strokeOpacity:L,opacity:N,offset:.01},{scaleInYRadius:ve,fillOpacity:R,strokeOpacity:L,opacity:N}],Qe=v.animate(St,Object.assign(Object.assign({},l),e));return Qe.onframe=function(){v.style.path=$e(Object.assign(Object.assign({},Y),{outerRadius:Number(v.style.scaleInYRadius)}))},Qe.onfinish=function(){v.style.path=$e(Object.assign(Object.assign({},Y),{outerRadius:ve}))},Qe},p=v=>{const{style:y}=v,{transform:b="",fillOpacity:T=1,strokeOpacity:M=1,opacity:R=1}=y,[L,N]=Cu(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],z=[{transform:`${b} ${N}`.trimStart(),transformOrigin:L,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${b} ${N}`.trimStart(),transformOrigin:L,fillOpacity:T,strokeOpacity:M,opacity:R,offset:.01},{transform:`${b} scale(1, 1)`.trimStart(),transformOrigin:L,fillOpacity:T,strokeOpacity:M,opacity:R}];return v.animate(z,Object.assign(Object.assign({},l),e))};return Bl(r)?h(c):p(c)}},aJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,T]=Cu(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],M=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return c.animate(M,Object.assign(Object.assign({},l),e))}},tk=(e,t)=>{Lu.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:Po.NUMBER});const{coordinate:r}=t;return(i,s,l)=>{const[c]=i;if(!Bl(r))return fP(e,t)(i,s,l);const h=r.getCenter(),{__data__:p,style:v}=c,{radius:y=0,inset:b=0,fillOpacity:T=1,strokeOpacity:M=1,opacity:R=1}=v,{points:L,y:N,y1:z}=p,H=fT().cornerRadius(y).padAngle(b*Math.PI/180),X=U_(r,L,[N,z]),{startAngle:Y,endAngle:ne}=X,ve=new gl({}),Ee=$e=>{ve.attr({d:H($e),transform:`translate(${h[0]}, ${h[1]})`});const St=_x(ve);return ve.style.transform="",St},Ie=[{waveInArcAngle:Y+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:Y+1e-4,fillOpacity:T,strokeOpacity:M,opacity:R,offset:.01},{waveInArcAngle:ne,fillOpacity:T,strokeOpacity:M,opacity:R}],Ye=c.animate(Ie,Object.assign(Object.assign({},l),e));return Ye.onframe=function(){c.style.path=Ee(Object.assign(Object.assign({},X),{endAngle:Number(c.style.waveInArcAngle)}))},Ye.onfinish=function(){c.style.path=Ee(Object.assign(Object.assign({},X),{endAngle:ne}))},Ye}};tk.props={};const nk=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:s,strokeOpacity:l,opacity:c}];return i.animate(h,Object.assign(Object.assign({},r),e))};nk.props={};const rk=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,h=[{fillOpacity:s,strokeOpacity:l,opacity:c},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(h,Object.assign(Object.assign({},r),e))};rk.props={};const sJ=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:c=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p,offset:.01},{transform:`${l} scale(1)`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p}];return s.animate(y,Object.assign(Object.assign({},i),e))},lJ=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:c=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(1)`.trimStart(),transformOrigin:v},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p,offset:.99},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(y,Object.assign(Object.assign({},i),e))},ik=e=>(t,n,r)=>{var i,s;const[l]=t,c=((s=(i=l).getTotalLength)===null||s===void 0?void 0:s.call(i))||0,h=[{lineDash:[0,c]},{lineDash:[c,0]}];return l.animate(h,Object.assign(Object.assign({},r),e))};ik.props={};function jb(e,t){const n={};for(const r of t){const i=e.style[r];i&&(n[r]=i)}return n}const Vb=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function hP(e){const{min:t,max:n}=e.getLocalBounds(),[r,i]=t,[s,l]=n,c=l-i,h=s-r;return[r,i,h,c]}function uJ(e){const[t,n,r,i]=e;return`
    M ${t} ${n}
    L ${t+r} ${n}
    L ${t+r} ${n+i}
    L ${t} ${n+i}
    Z
  `}function cJ(e,t){const[n,r,i,s]=hP(e),l=s/i,c=Math.ceil(Math.sqrt(t/l)),h=Math.ceil(t/c),p=[],v=s/h;let y=0,b=t;for(;b>0;){const T=Math.min(b,c),M=i/T;for(let R=0;R<T;R++){const L=n+R*M,N=r+y*v;p.push(uJ([L,N,M,v]))}b-=T,y+=1}return p}function fJ(e="pack"){return typeof e=="function"?e:cJ}function hJ(e,t,n){const[r,i,s,l]=hP(e),{transform:c}=e.style,{transform:h}=t.style;ok(t,e);const[p,v,y,b]=hP(t),T=r-p,M=i-v,R=s/y,L=l/b,N=[Object.assign({transform:`${c?c+" ":""}translate(${T}, ${M}) scale(${R}, ${L})`},jb(e,Vb)),Object.assign({transform:`${h?h+" ":""}translate(0, 0) scale(1, 1)`},jb(t,Vb))];return t.animate(N,n)}function ok(e,t){e.__data__=t.__data__,e.className=t.className,e.markType=t.markType,t.parentNode.replaceChild(e,t)}function dJ(e,t){const{nodeName:n}=e;if(n==="path")return e;const r=new gl({style:Object.assign(Object.assign({},jb(e,Vb)),{d:t})});return ok(r,e),r}function ak(e,t){const n=e.indexOf(t),r=e.lastIndexOf(t);return n===r}function pJ(e){return!ak(e,"m")||!ak(e,"M")}function sk(e){const t=_x(e);if(t&&!pJ(t))return t}function dP(e,t,n,r){const{nodeName:i}=t,{nodeName:s}=n,l=sk(t),c=sk(n);if(i===s&&i!=="path"||(l===void 0||c===void 0))return hJ(t,n,r);const v=dJ(e,l),y=[Object.assign({path:l},jb(t,Vb)),Object.assign({path:c},jb(n,Vb))],b=v.animate(y,r);return b.onfinish=()=>{v.style.transform="none",d2(v,n)},v.style.transform="none",b}function vJ(e,t,n,r){e.style.visibility="hidden";const i=r(e,t.length);return t.map((s,l)=>{const c=new gl({style:Object.assign({path:i[l]},jb(e,Vb))});return dP(s,c,s,n)})}function mJ(e,t,n,r){const i=r(t,e.length),{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=t.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:s,strokeOpacity:l,opacity:c}],p=t.animate(h,n);return[...e.map((y,b)=>{const T=new gl({style:{path:i[b],fill:t.style.fill}});return dP(y,y,T,n)}),p]}const lk=e=>(t,n,r)=>{const i=fJ(e.split),s=Object.assign(Object.assign({},r),e),{length:l}=t,{length:c}=n;if(l===1&&c===1||l>1&&c>1){const[h]=t,[p]=n;return dP(h,h,p,s)}if(l===1&&c>1){const[h]=t;return vJ(h,n,s,i)}if(l>1&&c===1){const[h]=n;return mJ(t,h,s,i)}return null};lk.props={};const uk=(e,t)=>(n,r,i)=>{const[s]=n,{height:l,width:c}=s.getBoundingClientRect(),h=new gl({style:{path:`M0,0L${c},0L${c},${l}L0,${l}Z`}});return s.appendChild(h),s.style.clipPath=h,fP(e,t)([h],r,i)};uk.props={};const ck=(e,t)=>(n,r,i)=>{const[s]=n,{height:l,width:c}=s.getBoundingClientRect(),h=new gl({style:{path:`M0,0L${c},0L${c},${l}L0,${l}Z`}});return s.appendChild(h),s.style.clipPath=h,ek(e,t)([h],r,i)};ck.props={};var gJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,background:s=!1,delay:l=60,scale:c,coordinate:h,emitter:p,state:v={}}){var y;const b=t(e),T=new Set(b),M=Fu(b,r),R=B2(b,n),[L,N]=tD(Object.assign({elements:b,valueof:R,link:i,coordinate:h},xo(v.active,"link"))),[z,H,X]=rD(Object.assign({document:e.ownerDocument,scale:c,coordinate:h,background:s,valueof:R},xo(v.active,"background"))),Y=ui(v,{active:Object.assign({},((y=v.active)===null||y===void 0?void 0:y.offset)&&{transform:(...Ht)=>{const Ot=v.active.offset(...Ht),[,kt]=Ht;return nD(b[kt],Ot,h)}})}),{setState:ne,removeState:ve,hasState:Ee}=dg(Y,R);let Ie;const Ye=Ht=>{const{target:Ot,nativeEvent:kt=!0}=Ht;if(!T.has(Ot))return;Ie&&clearTimeout(Ie);const Mn=r(Ot),Wn=M.get(Mn),cr=new Set(Wn);for(const ar of b)cr.has(ar)?Ee(ar,"active")||ne(ar,"active"):(ne(ar,"inactive"),N(ar)),ar!==Ot&&H(ar);z(Ot),L(Wn),kt&&p.emit("element:highlight",{nativeEvent:kt,data:{data:n(Ot),group:Wn.map(n)}})},$e=()=>{Ie&&clearTimeout(Ie),Ie=setTimeout(()=>{St(),Ie=null},l)},St=(Ht=!0)=>{for(const Ot of b)ve(Ot,"active","inactive"),H(Ot),N(Ot);Ht&&p.emit("element:unhighlight",{nativeEvent:Ht})},Qe=Ht=>{const{target:Ot}=Ht;s&&!X(Ot)||!s&&!T.has(Ot)||(l>0?$e():St())},lt=()=>{St()};e.addEventListener("pointerover",Ye),e.addEventListener("pointerout",Qe),e.addEventListener("pointerleave",lt);const ht=Ht=>{const{nativeEvent:Ot}=Ht;Ot||St(!1)},bt=Ht=>{const{nativeEvent:Ot}=Ht;if(Ot)return;const{data:kt}=Ht.data,Mn=XM(b,kt,n);Mn&&Ye({target:Mn,nativeEvent:!1})};return p.on("element:highlight",bt),p.on("element:unhighlight",ht),()=>{e.removeEventListener("pointerover",Ye),e.removeEventListener("pointerout",Qe),e.removeEventListener("pointerleave",lt),p.off("element:highlight",bt),p.off("element:unhighlight",ht);for(const Ht of b)H(Ht),N(Ht)}}function JT(e){var{delay:t,createGroup:n,background:r=!1,link:i=!1}=e,s=gJ(e,["delay","createGroup","background","link"]);return(l,c,h)=>{const{container:p,view:v,options:y}=l,{scale:b,coordinate:T}=v,M=sm(p);return yJ(M,Object.assign({elements:yy,datum:H_(v),groupKey:n?n(v):void 0,coordinate:T,scale:b,state:Ab(y,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:i,delay:t,emitter:h},s))}}JT.props={reapplyWhenUpdate:!0};function fk(e){return JT(Object.assign(Object.assign({},e),{createGroup:ZM}))}fk.props={reapplyWhenUpdate:!0};function hk(e){return JT(Object.assign(Object.assign({},e),{createGroup:eD}))}hk.props={reapplyWhenUpdate:!0};var _J=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function bJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,single:s=!1,coordinate:l,background:c=!1,scale:h,emitter:p,state:v={}}){var y;const b=t(e),T=new Set(b),M=Fu(b,r),R=B2(b,n),[L,N]=tD(Object.assign({link:i,elements:b,valueof:R,coordinate:l},xo(v.selected,"link"))),[z,H]=rD(Object.assign({document:e.ownerDocument,background:c,coordinate:l,scale:h,valueof:R},xo(v.selected,"background"))),X=ui(v,{selected:Object.assign({},((y=v.selected)===null||y===void 0?void 0:y.offset)&&{transform:(...lt)=>{const ht=v.selected.offset(...lt),[,bt]=lt;return nD(b[bt],ht,l)}})}),{setState:Y,removeState:ne,hasState:ve}=dg(X,R),Ee=(lt=!0)=>{for(const ht of b)ne(ht,"selected","unselected"),N(ht),H(ht);lt&&p.emit("element:unselect",{nativeEvent:!0})},Ie=(lt,ht,bt=!0)=>{if(ve(ht,"selected"))Ee();else{const Ht=r(ht),Ot=M.get(Ht),kt=new Set(Ot);for(const Mn of b)kt.has(Mn)?Y(Mn,"selected"):(Y(Mn,"unselected"),N(Mn)),Mn!==ht&&H(Mn);if(L(Ot),z(ht),!bt)return;p.emit("element:select",Object.assign(Object.assign({},lt),{nativeEvent:bt,data:{data:[n(ht),...Ot.map(n)]}}))}},Ye=(lt,ht,bt=!0)=>{const Ht=r(ht),Ot=M.get(Ht),kt=new Set(Ot);if(ve(ht,"selected")){if(!b.some(Wn=>!kt.has(Wn)&&ve(Wn,"selected")))return Ee();for(const Wn of Ot)Y(Wn,"unselected"),N(Wn),H(Wn)}else{const Mn=Ot.some(Wn=>ve(Wn,"selected"));for(const Wn of b)kt.has(Wn)?Y(Wn,"selected"):ve(Wn,"selected")||Y(Wn,"unselected");!Mn&&i&&L(Ot),z(ht)}bt&&p.emit("element:select",Object.assign(Object.assign({},lt),{nativeEvent:bt,data:{data:b.filter(Mn=>ve(Mn,"selected")).map(n)}}))},$e=lt=>{const{target:ht,nativeEvent:bt=!0}=lt;return T.has(ht)?s?Ie(lt,ht,bt):Ye(lt,ht,bt):Ee()};e.addEventListener("click",$e);const St=lt=>{const{nativeEvent:ht,data:bt}=lt;if(ht)return;const Ht=s?bt.data.slice(0,1):bt.data;for(const Ot of Ht){const kt=XM(b,Ot,n);$e({target:kt,nativeEvent:!1})}},Qe=()=>{Ee(!1)};return p.on("element:select",St),p.on("element:unselect",Qe),()=>{for(const lt of b)N(lt);e.removeEventListener("click",$e),p.off("element:select",St),p.off("element:unselect",Qe)}}function eA(e){var{createGroup:t,background:n=!1,link:r=!1}=e,i=_J(e,["createGroup","background","link"]);return(s,l,c)=>{const{container:h,view:p,options:v}=s,{coordinate:y,scale:b}=p,T=sm(h);return bJ(T,Object.assign({elements:yy,datum:H_(p),groupKey:t?t(p):void 0,coordinate:y,scale:b,state:Ab(v,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:r,emitter:c},i))}}eA.props={reapplyWhenUpdate:!0};function dk(e){return eA(Object.assign(Object.assign({},e),{createGroup:ZM}))}dk.props={reapplyWhenUpdate:!0};function pk(e){return eA(Object.assign(Object.assign({},e),{createGroup:eD}))}pk.props={reapplyWhenUpdate:!0};var t1=function(e,t,n){var r,i,s,l,c=0;n||(n={});var h=function(){c=n.leading===!1?0:Date.now(),r=null,l=e.apply(i,s),r||(i=s=null)},p=function(){var v=Date.now();!c&&n.leading===!1&&(c=v);var y=t-(v-c);return i=this,s=arguments,y<=0||y>t?(r&&(clearTimeout(r),r=null),c=v,l=e.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(h,y)),l};return p.cancel=function(){clearTimeout(r),c=0,r=i=s=null},p};function xJ(e){const{coordinate:t={}}=e,{transform:n=[]}=t,r=n.find(s=>s.type==="fisheye");if(r)return r;const i={type:"fisheye"};return n.push(i),t.transform=n,e.coordinate=t,i}function EJ({wait:e=30,leading:t,trailing:n=!1}){return r=>{const{options:i,update:s,setState:l,container:c}=r,h=sm(c),p=t1(v=>{const y=WM(h,v);if(!y){l("fisheye"),s();return}l("fisheye",b=>{const T=ui({},b,{interaction:{tooltip:{preserve:!0}}});for(const N of T.marks)N.animate=!1;const[M,R]=y,L=xJ(T);return L.focusX=M,L.focusY=R,L.visual=!0,T}),s()},e,{leading:t,trailing:n});return h.addEventListener("pointerenter",p),h.addEventListener("pointermove",p),h.addEventListener("pointerleave",p),()=>{h.removeEventListener("pointerenter",p),h.removeEventListener("pointermove",p),h.removeEventListener("pointerleave",p)}}}var SJ=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},wJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function TJ(e){const{transform:t=[]}=e,n=t.find(i=>i.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return t.push(r),e.transform=t,r}function AJ(e,t,n){const[r]=Array.from(e.entries()).filter(([i])=>i.type===t).map(([i])=>{const{encode:s}=i,l=c=>{const h=s[c];return[c,h?h.value:void 0]};return Object.fromEntries(n.map(l))});return r}function vk(e){var{wait:t=20,leading:n,trailing:r=!1,labelFormatter:i=l=>`${l}`}=e,s=wJ(e,["wait","leading","trailing","labelFormatter"]);return l=>{const{view:c,container:h,update:p,setState:v}=l,{markState:y,scale:b,coordinate:T}=c,M=AJ(y,"line",["x","y","series"]);if(!M)return;const{y:R,x:L,series:N=[]}=M,z=R.map((Ht,Ot)=>Ot),H=hg(z.map(Ht=>L[Ht])),X=sm(h),Y=h.getElementsByClassName(dv),ne=h.getElementsByClassName(Kx),Ee=Fu(ne,Ht=>Ht.__data__.key.split("-")[0]),Ie=new qa({style:Object.assign({x1:0,y1:0,x2:0,y2:X.getAttribute("height"),stroke:"black",lineWidth:1},xo(s,"rule"))}),Ye=new Vs({style:Object.assign({x:0,y:X.getAttribute("height"),text:"",fontSize:10},xo(s,"label"))});Ie.append(Ye),X.appendChild(Ie);const $e=(Ht,Ot,kt)=>{const[Mn]=Ht.invert(kt),Wn=Ot.invert(Mn);return H[mG(H,Wn)]},St=(Ht,Ot)=>{Ie.setAttribute("x1",Ht[0]),Ie.setAttribute("x2",Ht[0]),Ye.setAttribute("text",i(Ot))};let Qe;const lt=Ht=>SJ(this,void 0,void 0,function*(){const{x:Ot}=b,kt=$e(T,Ot,Ht);St(Ht,kt),v("chartIndex",Wn=>{const cr=ui({},Wn),ar=cr.marks.find(ti=>ti.type==="line"),Pi=yl(c2(z,ti=>yl(ti,Do=>+R[Do])/Xp(ti,Do=>+R[Do]),ti=>N[ti]).values()),so=[1/Pi,Pi];ui(ar,{scale:{y:{domain:so}}});const mi=TJ(ar);mi.groupBy="color",mi.basis=(ti,Do)=>{const uo=ti[Sb(Ko=>L[+Ko]).center(ti,kt)];return Do[uo]};for(const ti of cr.marks)ti.animate=!1;return cr}),Qe=(yield p("chartIndex")).view}),ht=Ht=>{const{scale:Ot,coordinate:kt}=Qe,{x:Mn,y:Wn}=Ot,cr=$e(kt,Mn,Ht);St(Ht,cr);for(const ar of Y){const{seriesIndex:Yr,key:Pi}=ar.__data__,so=Yr[Sb(Pa=>L[+Pa]).center(Yr,cr)],mi=[0,Wn.map(1)],ti=[0,Wn.map(R[so]/R[Yr[0]])],[,Do]=kt.map(mi),[,uo]=kt.map(ti),Ko=Do-uo;ar.setAttribute("transform",`translate(0, ${Ko})`);const ga=Ee.get(Pi)||[];for(const Pa of ga)Pa.setAttribute("dy",Ko)}},bt=t1(Ht=>{const Ot=WM(X,Ht);Ot&&ht(Ot)},t,{leading:n,trailing:r});return lt([0,0]),X.addEventListener("pointerenter",bt),X.addEventListener("pointermove",bt),X.addEventListener("pointerleave",bt),()=>{Ie.remove(),X.removeEventListener("pointerenter",bt),X.removeEventListener("pointermove",bt),X.removeEventListener("pointerleave",bt)}}}vk.props={reapplyWhenUpdate:!0};function oE(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function tA(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function mk(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function CJ(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):t[r]===void 0?"":t[r]})}var OJ=CJ;function pP(e){return e===void 0&&(e=""),{CONTAINER:"".concat(e,"tooltip"),TITLE:"".concat(e,"tooltip-title"),LIST:"".concat(e,"tooltip-list"),LIST_ITEM:"".concat(e,"tooltip-list-item"),NAME:"".concat(e,"tooltip-list-item-name"),MARKER:"".concat(e,"tooltip-list-item-marker"),NAME_LABEL:"".concat(e,"tooltip-list-item-name-label"),VALUE:"".concat(e,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(e,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(e,"tooltip-crosshair-y")}}var gk={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function MJ(e){var t;e===void 0&&(e="");var n=pP(e);return t={},t[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(n.NAME_LABEL)]=(0,ie.pi)({flex:1},gk),t[".".concat(n.VALUE)]=(0,ie.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},gk),t[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t}var RJ=function(e){(0,ie.ZT)(t,e);function t(n){var r=this,i,s,l=(s=(i=n.style)===null||i===void 0?void 0:i.template)===null||s===void 0?void 0:s.prefixCls,c=pP(l);return r=e.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(c.CONTAINER,'"></div>'),title:'<div class="'.concat(c.TITLE,'"></div>'),item:'<li class="'.concat(c.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(c.NAME,`">
          <span class="`).concat(c.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(c.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(c.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:MJ(l)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(s,l){var c=s.name,h=c===void 0?"":c,p=s.color,v=p===void 0?"black":p,y=s.index,b=(0,ie._T)(s,["name","color","index"]),T=(0,ie.pi)({name:h,color:v,index:y!=null?y:l},b);return mk(OJ(i.item,T))})},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),e.prototype.destroy.call(this)},t.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var s=this.element.style.visibility==="hidden",l=function(){i.attributes.x=n!=null?n:i.attributes.x,i.attributes.y=r!=null?r:i.attributes.y,i.updatePosition()};s?this.closeTransition(l):l()}this.element.style.visibility="visible"},t.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},t.prototype.initShape=function(){var n=this.attributes.template;this.element=mk(n.container),this.id&&this.element.setAttribute("id",this.id)},t.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:this.element.replaceChildren(n))}},t.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,s=i.template,l=i.title,c=i.enterable,h=i.style,p=i.content,v=pP(s.prefixCls),y=this.element;if(this.element.style.pointerEvents=c?"auto":"none",p)this.renderCustomContent();else{l?(y.innerHTML=s.title,y.getElementsByClassName(v.TITLE)[0].innerHTML=l):(r=(n=y.getElementsByClassName(v.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var b=this.HTMLTooltipItemsElements,T=document.createElement("ul");T.className=v.LIST,T.replaceChildren.apply(T,(0,ie.ev)([],(0,ie.CR)(b),!1));var M=this.element.querySelector(".".concat(v.LIST));M?M.replaceWith(T):y.appendChild(T)}pd(y,h)},t.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,s=r.offset,l=n||i,c=l.split("-"),h={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},p=this.elementSize,v=p.width,y=p.height,b=[-v/2,-y/2];return c.forEach(function(T){var M=(0,ie.CR)(b,2),R=M[0],L=M[1],N=(0,ie.CR)(h[T],2),z=N[0],H=N[1];b=[R+(v/2+s[0])*z,L+(y/2+s[1])*H]}),b},t.prototype.setOffsetPosition=function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1],l=this.attributes,c=l.x,h=c===void 0?0:c,p=l.y,v=p===void 0?0:p,y=l.container,b=y.x,T=y.y;this.element.style.left="".concat(+h+b+i,"px"),this.element.style.top="".concat(+v+T+s,"px")},t.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(n){var r=(0,ie.CR)(n,2),i=r[0],s=r[1],l=this.attributes,c=l.x,h=l.y,p=l.bounding,v=l.position;if(!p)return[i,s];var y=this.element,b=y.offsetWidth,T=y.offsetHeight,M=(0,ie.CR)([+c+i,+h+s],2),R=M[0],L=M[1],N={left:"right",right:"left",top:"bottom",bottom:"top"},z=p.x,H=p.y,X=p.width,Y=p.height,ne={left:R<z,right:R+b>z+X,top:L<H,bottom:L+T>H+Y},ve=[];v.split("-").forEach(function(Ie){ne[Ie]?ve.push(N[Ie]):ve.push(Ie)});var Ee=ve.join("-");return this.getRelativeOffsetFromCursor(Ee)},t.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),s=i.x,l=i.y,c=i.width,h=i.height;return new Ku(s,l,c,h).isPointIn(n,r)}return!1},t.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},t.tag="tooltip",t}(Vr),aE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function nA(e,t){return t?typeof t=="string"?document.querySelector(t):t:e.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function PJ(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return{x:n,y:r,width:i-n,height:s-r}}function IJ(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function LJ(e,t,n,r,i,s,l,c={}){const h={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},p=new RJ({className:"tooltip",style:{x:t,y:n,container:l,data:[],bounding:s,position:r,enterable:i,title:"",offset:[10,10],template:{prefixCls:"g2-"},style:ui(h,c)}});return e.appendChild(p.HTMLTooltipElement),p}function yk({root:e,data:t,x:n,y:r,render:i,event:s,single:l,position:c="right-bottom",enterable:h=!1,css:p,mount:v,bounding:y}){const b=nA(e,v),T=nA(e),M=l?T:e,R=y||PJ(e),L=IJ(T,b),{tooltipElement:N=LJ(b,n,r,c,h,R,L,p)}=M,{items:z,title:H=""}=t;N.update(Object.assign({x:n,y:r,data:z,title:H,position:c,enterable:h},i!==void 0&&{content:i(s,{items:z,title:H})})),M.tooltipElement=N}function Cy({root:e,single:t,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const s=nA(e),l=t?s:e,{tooltipElement:c}=l;c&&c.hide(i==null?void 0:i.clientX,i==null?void 0:i.clientY)}function vP({root:e,single:t}){const n=nA(e),r=t?n:e;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0)}function _k(e){const{value:t}=e;return Object.assign(Object.assign({},e),{value:t===void 0?"undefined":t})}function DJ(e){const{__data__:t}=e,{title:n,items:r=[]}=t,i=r.filter(iu).map(s=>{var{color:l=bk(e)}=s,c=aE(s,["color"]);return Object.assign(Object.assign({},c),{color:l})}).map(_k);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function NJ(e,t){const{color:n,series:r,facet:i=!1}=e,{color:s,series:l}=t,c=h=>h&&h.invert&&!(h instanceof wy)&&!(h instanceof C2);if(c(r))return r.clone().invert(l);if(l&&r instanceof wy&&r.invert(l)!==s&&!i)return r.invert(l);if(c(n)){const h=n.invert(s);return Array.isArray(h)?null:h}return null}function bk(e){const t=e.getAttribute("fill"),n=e.getAttribute("stroke"),{__data__:r}=e,{color:i=t&&t!=="transparent"?t:n}=r;return i}function xk(e,t=n=>n){const n=new Map(e.map(r=>[t(r),r]));return Array.from(n.values())}function Ek(e,t,n,r=e.map(s=>s.__data__),i={}){const s=h=>h instanceof Date?+h:h,l=xk(r.map(h=>h.title),s).filter(iu),c=r.flatMap((h,p)=>{const v=e[p],{items:y=[],title:b}=h,T=y.filter(iu),M=n!==void 0?n:y.length<=1;return T.map(R=>{var{color:L=bk(v)||i.color,name:N}=R,z=aE(R,["color","name"]);const H=NJ(t,h),X=M?H||N:N||H;return Object.assign(Object.assign({},z),{color:L,name:X||b})})}).map(_k);return Object.assign(Object.assign({},l.length>0&&{title:l.join(",")}),{items:xk(c,h=>`(${s(h.name)}, ${s(h.value)}, ${s(h.color)})`)})}function FJ(e,t,n){var{plotWidth:r,plotHeight:i,mainWidth:s,mainHeight:l,startX:c,startY:h,transposed:p,polar:v,insetLeft:y,insetTop:b}=n,T=aE(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const M=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},T),R=t.map(Ie=>Ie[1]),L=t.map(Ie=>Ie[0]),N=oE(R),z=oE(L),H=()=>{if(v){const Ie=Math.min(s,l)/2,Ye=c+y+s/2,$e=h+b+l/2,St=P0(Bc([z,N],[Ye,$e])),Qe=Ye+Ie*Math.cos(St),lt=$e+Ie*Math.sin(St);return[Ye,Qe,$e,lt]}return p?[c,c+r,N+h,N+h]:[z+c,z+c,h,h+i]},[X,Y,ne,ve]=H(),Ee=()=>{const Ie=new qa({style:Object.assign({x1:X,x2:Y,y1:ne,y2:ve},M)});return e.appendChild(Ie),Ie};if(L.length>0){const Ie=e.ruleY||Ee();Ie.style.x1=X,Ie.style.x2=Y,Ie.style.y1=ne,Ie.style.y2=ve,e.ruleY=Ie}}function Sk(e){e.ruleY&&(e.ruleY.remove(),e.ruleY=void 0)}function BJ(e,{data:t,style:n,theme:r}){e.markers&&e.markers.forEach(s=>s.remove());const i=t.filter(s=>{const[{x:l,y:c}]=s;return iu(l)&&iu(c)}).map(s=>{const[{color:l,element:c},h]=s,p=l||c.style.fill||c.style.stroke||r.color;return new Tu({style:Object.assign({cx:h[0],cy:h[1],fill:p,r:4,stroke:"#fff",strokeWidth:2},n)})});for(const s of i)e.appendChild(s);e.markers=i}function wk(e){e.markers&&(e.markers.forEach(t=>t.remove()),e.markers=[])}function Tk(e,t){return Array.from(e.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[t]})}function mP(e,t){return e===void 0?t:e}function Ak(e){const{title:t,items:n}=e;return n.length===0&&t===void 0}function kJ(e){return Array.from(e.values()).some(t=>{var n;return((n=t.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&t.tooltip})}function zJ(e){return vT(e,t=>t.classList?t.classList.includes("element"):!1)}function Ck(e,t){var{elements:n,sort:r,filter:i,scale:s,coordinate:l,crosshairs:c,render:h,groupName:p,emitter:v,wait:y=50,leading:b=!0,trailing:T=!1,startX:M=0,startY:R=0,body:L=!0,single:N=!0,position:z,enterable:H,mount:X,bounding:Y,theme:ne,disableNative:ve=!1,marker:Ee=!0,preserve:Ie=!1,style:Ye={},css:$e={}}=t,St=aE(t,["elements","sort","filter","scale","coordinate","crosshairs","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","disableNative","marker","preserve","style","css"]);const Qe=n(e),lt=Cu(l),ht=Bl(l),bt=ui(Ye,St),{innerWidth:Ht,innerHeight:Ot,width:kt,height:Mn,insetLeft:Wn,insetTop:cr}=l.getOptions(),ar=[],Yr=[];for(const as of Qe){const{__data__:Rs}=as,{seriesX:Ps,title:ss,items:Ol}=Rs;Ps?ar.push(as):(ss||Ol)&&Yr.push(as)}const so=!!(lt?s.y:s.x).getBandWidth&&Yr.length>0;ar.sort((as,Rs)=>{const Ps=lt?0:1,ss=Ol=>Ol.getBounds().min[Ps];return lt?ss(Rs)-ss(as):ss(as)-ss(Rs)});const mi=as=>{const Rs=lt?1:0,{min:Ps,max:ss}=as.getLocalBounds();return hg([Ps[Rs],ss[Rs]])};Yr.sort((as,Rs)=>{const[Ps,ss]=mi(as),[Ol,hl]=mi(Rs),nl=(Ps+ss)/2,ec=(Ol+hl)/2;return lt?ec-nl:nl-ec});const ti=new Map(ar.map(as=>{const{__data__:Rs}=as,{seriesX:Ps}=Rs,ss=Ps.map((hl,nl)=>nl),Ol=hg(ss,hl=>Ps[+hl]);return[as,[Ol,Ps]]})),{x:Do}=s,uo=Do!=null&&Do.getBandWidth?Do.getBandWidth()/2:0,Ko=as=>{const[Rs]=l.invert(as);return Rs-uo},ga=(as,Rs,Ps)=>{const ss=Ko(as),Ol=Ps.filter(iu),[hl,nl]=hg([Ol[0],Ol[Ol.length-1]]),ec=hl===nl;if(!so&&(ss<hl||ss>nl)&&!ec)return null;const fc=Sb(bg=>Ps[+bg]).center,xd=fc(Rs,ss);return Rs[xd]},Pa=(as,Rs)=>{const ss=as[lt?1:0],Ol=Rs.filter(ec=>{const[fc,xd]=mi(ec);return ss>=fc&&ss<=xd});if(!so||Ol.length>0)return Ol;const hl=Sb(ec=>{const[fc,xd]=mi(ec);return(fc+xd)/2}).center,nl=hl(Rs,ss);return[Rs[nl]].filter(iu)},Da=(as,Rs)=>{const{__data__:Ps}=as;return Object.fromEntries(Object.entries(Ps).filter(([ss])=>ss.startsWith("series")&&ss!=="series").map(([ss,Ol])=>{const hl=Ol[Rs];return[f2(ss.replace("series","")),hl]}))},us=t1(as=>{const Rs=WM(e,as);if(!Rs)return;const Ps=JL(e),ss=Ps.min[0],Ol=Ps.min[1],hl=[Rs[0]-M,Rs[1]-R];if(!hl)return;const nl=Pa(hl,Yr),ec=[],fc=[];for(const zf of ar){const[UE,vI]=ti.get(zf),oj=ga(hl,UE,vI);if(oj!==null){ec.push(zf);const aj=Da(zf,oj),{x:hde,y:dde}=aj,pde=l.map([(hde||0)+uo,dde||0]);fc.push([Object.assign(Object.assign({},aj),{element:zf}),pde])}}const xd=Array.from(new Set(fc.map(zf=>zf[0].x))),bg=xd[tA(xd,zf=>Math.abs(zf-Ko(hl)))],l1=fc.filter(zf=>zf[0].x===bg),iC=[...l1.map(zf=>zf[0]),...nl.map(zf=>zf.__data__)],oC=[...ec,...nl],u1=Ek(oC,s,p,iC,ne);if(r&&u1.items.sort((zf,UE)=>r(zf)-r(UE)),i&&(u1.items=u1.items.filter(i)),oC.length===0||Ak(u1)){fl(as);return}if(L&&yk({root:e,data:u1,x:Rs[0]+ss,y:Rs[1]+Ol,render:h,event:as,single:N,position:z,enterable:H,mount:X,bounding:Y,css:$e}),c){const zf=l1.map(vI=>vI[1]),UE=xo(bt,"crosshairs");FJ(e,zf,Object.assign(Object.assign({},UE),{plotWidth:Ht,plotHeight:Ot,mainWidth:kt,mainHeight:Mn,insetLeft:Wn,insetTop:cr,startX:M,startY:R,transposed:lt,polar:ht}))}if(Ee){const zf=xo(bt,"marker");BJ(e,{data:l1,style:zf,theme:ne})}v.emit("tooltip:show",Object.assign(Object.assign({},as),{nativeEvent:!0,data:{data:{x:wb(s.x,Ko(hl),!0)}}}))},y,{leading:b,trailing:T}),fl=as=>{Cy({root:e,single:N,emitter:v,event:as}),c&&Sk(e),Ee&&wk(e)},is=()=>{vP({root:e,single:N}),c&&Sk(e),Ee&&wk(e)},Ts=({nativeEvent:as,data:Rs})=>{if(as)return;const{x:Ps}=Rs.data,{x:ss}=s,Ol=ss.map(Ps),[hl,nl]=l.map([Ol,.5]),{min:[ec,fc]}=e.getRenderBounds();us({offsetX:hl+ec,offsetY:nl+fc})},zu=()=>{Cy({root:e,single:N,emitter:v,nativeEvent:!1})},rf=()=>{jc(),is()},Cp=()=>{Uu()},Uu=()=>{ve||(e.addEventListener("pointerenter",us),e.addEventListener("pointermove",us),e.addEventListener("pointerleave",fl))},jc=()=>{ve||(e.removeEventListener("pointerenter",us),e.removeEventListener("pointermove",us),e.removeEventListener("pointerleave",fl))};return Uu(),v.on("tooltip:show",Ts),v.on("tooltip:hide",zu),v.on("tooltip:disable",rf),v.on("tooltip:enable",Cp),()=>{jc(),v.off("tooltip:show",Ts),v.off("tooltip:hide",zu),v.off("tooltip:disable",rf),v.off("tooltip:enable",Cp),Ie?Cy({root:e,single:N,emitter:v,nativeEvent:!1}):is()}}function UJ(e,{elements:t,scale:n,render:r,groupName:i,sort:s,filter:l,emitter:c,wait:h=50,leading:p=!0,trailing:v=!1,groupKey:y=Ie=>Ie,single:b=!0,position:T,enterable:M,datum:R,view:L,mount:N,bounding:z,theme:H,shared:X=!1,body:Y=!0,disableNative:ne=!1,preserve:ve=!1,css:Ee={}}){const Ie=t(e),Ye=Fu(Ie,y),$e=t1(kt=>{const{target:Mn}=kt,Wn=zJ(Mn);if(!Wn){Cy({root:e,single:b,emitter:c,event:kt});return}const cr=y(Wn),ar=Ye.get(cr),Yr=ar.length===1&&!X?DJ(ar[0]):Ek(ar,n,i,void 0,H);if(s&&Yr.items.sort((mi,ti)=>s(mi)-s(ti)),l&&(Yr.items=Yr.items.filter(l)),Ak(Yr)){Cy({root:e,single:b,emitter:c,event:kt});return}const{offsetX:Pi,offsetY:so}=kt;Y&&yk({root:e,data:Yr,x:Pi,y:so,render:r,event:kt,single:b,position:T,enterable:M,mount:N,bounding:z,css:Ee}),c.emit("tooltip:show",Object.assign(Object.assign({},kt),{nativeEvent:!0,data:{data:oD(Wn,L)}}))},h,{leading:p,trailing:v}),St=kt=>{Cy({root:e,single:b,emitter:c,event:kt})},Qe=()=>{ne||(e.addEventListener("pointermove",$e),e.addEventListener("pointerleave",St))},lt=()=>{ne||(e.removeEventListener("pointermove",$e),e.removeEventListener("pointerleave",St))},ht=({nativeEvent:kt,data:Mn})=>{if(kt)return;const Wn=XM(Ie,Mn.data,R);if(!Wn)return;const cr=Wn.getBBox(),{x:ar,y:Yr,width:Pi,height:so}=cr;$e({target:Wn,offsetX:ar+Pi/2,offsetY:Yr+so/2})},bt=({nativeEvent:kt}={})=>{kt||Cy({root:e,single:b,emitter:c,nativeEvent:!1})},Ht=()=>{lt(),vP({root:e,single:b})},Ot=()=>{Qe()};return c.on("tooltip:show",ht),c.on("tooltip:hide",bt),c.on("tooltip:enable",Ot),c.on("tooltip:disable",Ht),Qe(),()=>{lt(),c.off("tooltip:show",ht),c.off("tooltip:hide",bt),ve?Cy({root:e,single:b,emitter:c,nativeEvent:!1}):vP({root:e,single:b})}}function Ok(e){const{shared:t,crosshairs:n,series:r,name:i,item:s=()=>({}),facet:l=!1}=e,c=aE(e,["shared","crosshairs","series","name","item","facet"]);return(h,p,v)=>{const{container:y,view:b}=h,{scale:T,markState:M,coordinate:R,theme:L}=b,N=Tk(M,"seriesTooltip"),z=Tk(M,"crosshairs"),H=sm(y),X=mP(r,N);if(X&&kJ(M)&&!l)return Ck(H,Object.assign(Object.assign({},c),{theme:L,elements:yy,scale:T,coordinate:R,crosshairs:mP(n,z),item:s,emitter:v}));if(X&&l){const Y=p.filter($e=>$e!==h&&$e.options.parentKey===h.options.key),ne=QL(h,p),ve=Y[0].view.scale,Ee=H.getBounds(),Ie=Ee.min[0],Ye=Ee.min[1];return Object.assign(ve,{facet:!0}),Ck(H.parentNode.parentNode,Object.assign(Object.assign({},c),{theme:L,elements:()=>ne,scale:ve,coordinate:R,crosshairs:mP(n,z),item:s,startX:Ie,startY:Ye,emitter:v}))}return UJ(H,Object.assign(Object.assign({},c),{datum:H_(b),elements:yy,scale:T,coordinate:R,groupKey:t?ZM(b):void 0,item:s,emitter:v,view:b,theme:L,shared:t}))}}Ok.props={reapplyWhenUpdate:!0};var rA=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Mk="legend-category",jJ="legend-continuous",VJ="items-item",HJ="legend-category-item-marker",WJ="legend-category-item-label";function Rk(e){return e.getElementsByClassName(HJ)[0]}function Pk(e){return e.getElementsByClassName(WJ)[0]}function Ik(e){return e.getElementsByClassName(VJ)}function gP(e){return e.getElementsByClassName(Mk)}function Lk(e){return e.getElementsByClassName(jJ)}function GJ(e,t){[...gP(e),...Lk(e)].forEach(r=>{t(r,i=>i)})}function yP(e){let t=e.parentNode;for(;t&&!t.__data__;)t=t.parentNode;return t.__data__}function k0e(e){let t=e;for(;t&&!t.attr("class").startsWith("legend");)t=t.children[0];return t.attributes}function ZJ(e,{legends:t,marker:n,label:r,datum:i,filter:s,emitter:l,channel:c,state:h={}}){const p=new Map,v=new Map,y=new Map,{unselected:b={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=h,T={unselected:xo(b,"marker")},M={unselected:xo(b,"label")},{setState:R,removeState:L}=dg(T,void 0),{setState:N,removeState:z}=dg(M,void 0),H=Array.from(t(e));let X=H.map(i);const Y=()=>{for(const Ee of H){const Ie=i(Ee),Ye=n(Ee),$e=r(Ee);X.includes(Ie)?(L(Ye,"unselected"),z($e,"unselected")):(R(Ye,"unselected"),N($e,"unselected"))}};for(const Ee of H){const Ie=()=>{_y(e,"pointer")},Ye=()=>{LG(e)},$e=St=>rA(this,void 0,void 0,function*(){const Qe=i(Ee),lt=X.indexOf(Qe);lt===-1?X.push(Qe):X.splice(lt,1),X.length===0&&X.push(...H.map(i)),yield s(X),Y();const{nativeEvent:ht=!0}=St;ht&&(X.length===H.length?l.emit("legend:reset",{nativeEvent:ht}):l.emit("legend:filter",Object.assign(Object.assign({},St),{nativeEvent:ht,data:{channel:c,values:X}})))});Ee.addEventListener("click",$e),Ee.addEventListener("pointerenter",Ie),Ee.addEventListener("pointerout",Ye),p.set(Ee,$e),v.set(Ee,Ie),y.set(Ee,Ye)}const ne=Ee=>rA(this,void 0,void 0,function*(){const{nativeEvent:Ie}=Ee;if(Ie)return;const{data:Ye}=Ee,{channel:$e,values:St}=Ye;$e===c&&(X=St,yield s(X),Y())}),ve=Ee=>rA(this,void 0,void 0,function*(){const{nativeEvent:Ie}=Ee;Ie||(X=H.map(i),yield s(X),Y())});return l.on("legend:filter",ne),l.on("legend:reset",ve),()=>{for(const Ee of H)Ee.removeEventListener("click",p.get(Ee)),Ee.removeEventListener("pointerenter",v.get(Ee)),Ee.removeEventListener("pointerout",y.get(Ee)),l.off("legend:filter",ne),l.off("legend:reset",ve)}}function XJ(e,{legend:t,filter:n,emitter:r,channel:i}){const s=({detail:{value:l}})=>{n(l),r.emit({nativeEvent:!0,data:{channel:i,values:l}})};return t.addEventListener("valuechange",s),()=>{t.removeEventListener("valuechange",s)}}function Dk(e,{legend:t,channel:n,value:r,ordinal:i,channels:s,allChannels:l,facet:c=!1}){return rA(this,void 0,void 0,function*(){const{view:h,update:p,setState:v}=e;v(t,y=>{const{marks:b}=y,T=b.map(M=>{if(M.type==="legends")return M;const{transform:R=[]}=M,L=R.findIndex(({type:H})=>H.startsWith("group")||H.startsWith("bin")),N=[...R];N.splice(L+1,0,{type:"filter",[n]:{value:r,ordinal:i}});const z=Object.fromEntries(s.map(H=>[H,{domain:h.scale[H].getOptions().domain}]));return ui({},M,Object.assign(Object.assign({transform:N,scale:z},!i&&{animate:!1}),{legend:c?!1:Object.fromEntries(l.map(H=>[H,{preserve:!0}]))}))});return Object.assign(Object.assign({},y),{marks:T})}),yield p()})}function YJ(e,t){for(const n of e)Dk(n,Object.assign(Object.assign({},t),{facet:!0}))}function $J(){return(e,t,n)=>{const{container:r}=e,i=t.filter(y=>y!==e),s=i.length>0,l=y=>yP(y).scales.map(b=>b.name),c=[...gP(r),...Lk(r)],h=c.flatMap(l),p=s?t1(YJ,50,{trailing:!0}):t1(Dk,50,{trailing:!0}),v=c.map(y=>{const{name:b,domain:T}=yP(y).scales[0],M=l(y),R={legend:y,channel:b,channels:M,allChannels:h};return y.className===Mk?ZJ(r,{legends:Ik,marker:Rk,label:Pk,datum:L=>{const{__data__:N}=L,{index:z}=N;return T[z]},filter:L=>{const N=Object.assign(Object.assign({},R),{value:L,ordinal:!0});p(s?i:e,N)},state:y.attributes.state,channel:b,emitter:n}):XJ(r,{legend:y,filter:L=>{const N=Object.assign(Object.assign({},R),{value:L,ordinal:!1});p(s?i:e,N)},emitter:n,channel:b})});return()=>{v.forEach(y=>y())}}}function qJ(){return(e,t,n)=>{const{container:r,view:i,options:s}=e,l=gP(r),c=yy(r),h=T=>yP(T).scales[0].name,p=T=>{const{scale:{[T]:M}}=i;return M},v=Ab(s,["active","inactive"]),y=B2(c,H_(i)),b=[];for(const T of l){const M=Mn=>{const{data:Wn}=T.attributes,{__data__:cr}=Mn,{index:ar}=cr;return Wn[ar].label},R=h(T),L=Ik(T),N=p(R),z=Fu(c,Mn=>N.invert(Mn.__data__[R])),{state:H={}}=T.attributes,{inactive:X={}}=H,{setState:Y,removeState:ne}=dg(v,y),ve={inactive:xo(X,"marker")},Ee={inactive:xo(X,"label")},{setState:Ie,removeState:Ye}=dg(ve),{setState:$e,removeState:St}=dg(Ee),Qe=Mn=>{for(const Wn of L){const cr=Rk(Wn),ar=Pk(Wn);Wn===Mn||Mn===null?(Ye(cr,"inactive"),St(ar,"inactive")):(Ie(cr,"inactive"),$e(ar,"inactive"))}},lt=(Mn,Wn)=>{const cr=M(Wn),ar=new Set(z.get(cr));for(const Pi of c)ar.has(Pi)?Y(Pi,"active"):Y(Pi,"inactive");Qe(Wn);const{nativeEvent:Yr=!0}=Mn;Yr&&n.emit("legend:highlight",Object.assign(Object.assign({},Mn),{nativeEvent:Yr,data:{channel:R,value:cr}}))},ht=new Map;for(const Mn of L){const Wn=cr=>{lt(cr,Mn)};Mn.addEventListener("pointerover",Wn),ht.set(Mn,Wn)}const bt=Mn=>{for(const cr of c)ne(cr,"inactive","active");Qe(null);const{nativeEvent:Wn=!0}=Mn;Wn&&n.emit("legend:unhighlight",{nativeEvent:Wn})},Ht=Mn=>{const{nativeEvent:Wn,data:cr}=Mn;if(Wn)return;const{channel:ar,value:Yr}=cr;if(ar!==R)return;const Pi=L.find(so=>M(so)===Yr);Pi&&lt({nativeEvent:!1},Pi)},Ot=Mn=>{const{nativeEvent:Wn}=Mn;Wn||bt({nativeEvent:!1})};T.addEventListener("pointerleave",bt),n.on("legend:highlight",Ht),n.on("legend:unhighlight",Ot);const kt=()=>{T.removeEventListener(bt),n.off("legend:highlight",Ht),n.off("legend:unhighlight",Ot);for(const[Mn,Wn]of ht)Mn.removeEventListener(Wn)};b.push(kt)}return()=>b.forEach(T=>T())}}var $p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function KJ(e,t){const[n,r,i,s]=e,[l,c,h,p]=t;return!(l>i||h<n||c>s||p<r)}function QJ(e,t,n,r,i){const[s,l,c,h]=i;return[Math.max(s,Math.min(e,n)),Math.max(l,Math.min(t,r)),Math.min(c,Math.max(e,n)),Math.min(h,Math.max(t,r))]}function JJ(e){const{width:t,height:n}=e.getBBox();return[0,0,t,n]}function vg(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}const Nk=xb(e=>{const t=e.attributes,{x:n,y:r,width:i,height:s,class:l,renders:c={},handleSize:h=10,document:p}=t,v=$p(t,["x","y","width","height","class","renders","handleSize","document"]);if(!p||i===void 0||s===void 0||n===void 0||r===void 0)return;const y=h/2,b=(Yr,Pi,so)=>{Yr.handle||(Yr.handle=so.createElement("rect"),Yr.append(Yr.handle));const{handle:mi}=Yr;return mi.attr(Pi),mi},T=xo(ib(v,"handleNW","handleNE"),"handleN"),{render:M=b}=T,R=$p(T,["render"]),L=xo(v,"handleE"),{render:N=b}=L,z=$p(L,["render"]),H=xo(ib(v,"handleSE","handleSW"),"handleS"),{render:X=b}=H,Y=$p(H,["render"]),ne=xo(v,"handleW"),{render:ve=b}=ne,Ee=$p(ne,["render"]),Ie=xo(v,"handleNW"),{render:Ye=b}=Ie,$e=$p(Ie,["render"]),St=xo(v,"handleNE"),{render:Qe=b}=St,lt=$p(St,["render"]),ht=xo(v,"handleSE"),{render:bt=b}=ht,Ht=$p(ht,["render"]),Ot=xo(v,"handleSW"),{render:kt=b}=Ot,Mn=$p(Ot,["render"]),Wn=(Yr,Pi)=>{const{id:so}=Yr,mi=Yr.attributes,{x:ti,y:Do}=mi,uo=$p(mi,["x","y"]),Ko=Pi(Yr,Object.assign({x:0,y:0},uo),p);Ko.id=so,Ko.style.draggable=!0},cr=Yr=>()=>{const Pi=xb(so=>Wn(so,Yr));return new Pi({})},ar=Ua(e).attr("className",l).style("x",n).style("y",r).style("draggable",!0);ar.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(vg,Object.assign({width:i,height:s},ib(v,"handle"))),ar.maybeAppend("handle-n",cr(M)).style("x",y).style("y",-y).style("width",i-h).style("height",h).style("fill","transparent").call(vg,R),ar.maybeAppend("handle-e",cr(N)).style("x",i-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(vg,z),ar.maybeAppend("handle-s",cr(X)).style("x",y).style("y",s-y).style("width",i-h).style("height",h).style("fill","transparent").call(vg,Y),ar.maybeAppend("handle-w",cr(ve)).style("x",-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(vg,Ee),ar.maybeAppend("handle-nw",cr(Ye)).style("x",-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(vg,$e),ar.maybeAppend("handle-ne",cr(Qe)).style("x",i-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(vg,lt),ar.maybeAppend("handle-se",cr(bt)).style("x",i-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(vg,Ht),ar.maybeAppend("handle-sw",cr(kt)).style("x",-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(vg,Mn)});function _P(e,t){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:s=()=>{},brushupdated:l=()=>{},extent:c=JJ(e),brushRegion:h=(mi,ti,Do,uo,Ko)=>[mi,ti,Do,uo],reverse:p=!1,fill:v="#777",fillOpacity:y="0.3",stroke:b="#fff",selectedHandles:T=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=t,M=$p(t,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let R=null,L=null,N=null,z=null,H=null,X=!1;const[Y,ne,ve,Ee]=c;_y(e,"crosshair"),e.style.draggable=!0;const Ie=(mi,ti,Do)=>{if(s(Do),z&&z.remove(),H&&H.remove(),R=[mi,ti],p)return Ye();$e()},Ye=()=>{H=new gl({style:Object.assign(Object.assign({},M),{fill:v,fillOpacity:y,stroke:b,pointerEvents:"none"})}),z=new Nk({style:{x:0,y:0,width:0,height:0,draggable:!0,document:e.ownerDocument},className:"mask"}),e.appendChild(H),e.appendChild(z)},$e=()=>{z=new Nk({style:Object.assign(Object.assign({document:e.ownerDocument,x:0,y:0},M),{fill:v,fillOpacity:y,stroke:b,draggable:!0}),className:"mask"}),e.appendChild(z)},St=(mi=!0)=>{z&&z.remove(),H&&H.remove(),R=null,L=null,N=null,X=!1,z=null,H=null,r(mi)},Qe=(mi,ti,Do=!0)=>{const[uo,Ko,ga,Pa]=QJ(mi[0],mi[1],ti[0],ti[1],c),[Da,us,fl,is]=h(uo,Ko,ga,Pa,c);return p?ht(Da,us,fl,is):lt(Da,us,fl,is),n(Da,us,fl,is,Do),[Da,us,fl,is]},lt=(mi,ti,Do,uo)=>{z.style.x=mi,z.style.y=ti,z.style.width=Do-mi,z.style.height=uo-ti},ht=(mi,ti,Do,uo)=>{H.style.d=`
      M${Y},${ne}L${ve},${ne}L${ve},${Ee}L${Y},${Ee}Z
      M${mi},${ti}L${mi},${uo}L${Do},${uo}L${Do},${ti}Z
    `,z.style.x=mi,z.style.y=ti,z.style.width=Do-mi,z.style.height=uo-ti},bt=mi=>{const ti=(us,fl,is,Ts,zu)=>us+fl<Ts?Ts-fl:us+is>zu?zu-is:us,Do=mi[0]-N[0],uo=mi[1]-N[1],Ko=ti(Do,R[0],L[0],Y,ve),ga=ti(uo,R[1],L[1],ne,Ee),Pa=[R[0]+Ko,R[1]+ga],Da=[L[0]+Ko,L[1]+ga];Qe(Pa,Da)},Ht={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},Ot=mi=>Mn(mi)||kt(mi),kt=mi=>{const{id:ti}=mi;return T.indexOf(ti)===-1?!1:new Set(Object.keys(Ht)).has(ti)},Mn=mi=>mi===z.getElementById("selection"),Wn=mi=>{const{target:ti}=mi,[Do,uo]=GM(e,mi);if(!z||!Ot(ti)){Ie(Do,uo,mi),X=!0;return}Ot(ti)&&(N=[Do,uo])},cr=mi=>{const{target:ti}=mi,Do=GM(e,mi);if(!R)return;if(!N)return Qe(R,Do);if(Mn(ti))return bt(Do);const[uo,Ko]=[Do[0]-N[0],Do[1]-N[1]],{id:ga}=ti;if(Ht[ga]){const[Pa,Da,us,fl]=Ht[ga].vector;return Qe([R[0]+uo*Pa,R[1]+Ko*Da],[L[0]+uo*us,L[1]+Ko*fl])}},ar=mi=>{if(N){N=null;const{x:ga,y:Pa,width:Da,height:us}=z.style;R=[ga,Pa],L=[ga+Da,Pa+us],l(ga,Pa,ga+Da,Pa+us,mi);return}L=GM(e,mi);const[ti,Do,uo,Ko]=Qe(R,L);X=!1,i(ti,Do,uo,Ko,mi)},Yr=mi=>{const{target:ti}=mi;z&&!Ot(ti)&&St()},Pi=mi=>{const{target:ti}=mi;!z||!Ot(ti)||X?_y(e,"crosshair"):Mn(ti)?_y(e,"move"):kt(ti)&&_y(e,Ht[ti.id].cursor)},so=()=>{_y(e,"default")};return e.addEventListener("dragstart",Wn),e.addEventListener("drag",cr),e.addEventListener("dragend",ar),e.addEventListener("click",Yr),e.addEventListener("pointermove",Pi),e.addEventListener("pointerleave",so),{mask:z,move(mi,ti,Do,uo,Ko=!0){z||Ie(mi,ti,{}),R=[mi,ti],L=[Do,uo],Qe([mi,ti],[Do,uo],Ko)},remove(mi=!0){z&&St(mi)},destroy(){z&&St(!1),_y(e,"default"),e.removeEventListener("dragstart",Wn),e.removeEventListener("drag",cr),e.removeEventListener("dragend",ar),e.removeEventListener("click",Yr),e.removeEventListener("pointermove",Pi),e.removeEventListener("pointerleave",so)}}}function bP(e,t,n){return t.filter(r=>{if(r===e)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(s=>s.brushKey===n)})}function eee(e,t,n){return bP(e,t,n).map(r=>sm(r.container))}function tee(e,t,n){return bP(e,t,n).map(r=>r.options)}function Fk(e,t){var{elements:n,selectedHandles:r,siblings:i=cr=>[],datum:s,brushRegion:l,extent:c,reverse:h,scale:p,coordinate:v,series:y=!1,key:b=cr=>cr,bboxOf:T=cr=>{const{x:ar,y:Yr,width:Pi,height:so}=cr.style;return{x:ar,y:Yr,width:Pi,height:so}},state:M={},emitter:R}=t,L=$p(t,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const N=n(e),z=i(e),H=z.flatMap(n),X=B2(N,s),Y=xo(L,"mask"),{setState:ne,removeState:ve}=dg(M,X),Ee=new Map,{width:Ie,height:Ye,x:$e=0,y:St=0}=T(e),Qe=c||[0,0,Ie,Ye],lt=()=>{for(const cr of[...N,...H])ve(cr,"active","inactive")},ht=(cr,ar,Yr,Pi)=>{var so;for(const ti of z)(so=ti.brush)===null||so===void 0||so.remove();const mi=new Set;for(const ti of N){const{min:Do,max:uo}=ti.getLocalBounds(),[Ko,ga]=Do,[Pa,Da]=uo;KJ([Ko,ga,Pa,Da],[cr,ar,Yr,Pi])?(ne(ti,"active"),mi.add(b(ti))):ne(ti,"inactive")}for(const ti of H)mi.has(b(ti))?ne(ti,"active"):ne(ti,"inactive")},bt=()=>{for(const cr of N)ve(cr,"inactive");for(const cr of Ee.values())cr.remove();Ee.clear()},Ht=(cr,ar,Yr,Pi)=>{const so=mi=>{const ti=mi.cloneNode();return ti.__data__=mi.__data__,mi.parentNode.appendChild(ti),Ee.set(mi,ti),ti};for(const mi of N){const ti=Ee.get(mi)||so(mi);ti.style.clipPath=new Jg({style:{x:cr+$e,y:ar+St,width:Yr-cr,height:Pi-ar}}),ne(mi,"inactive"),ne(ti,"active")}},Ot=_P(e,Object.assign(Object.assign({},Y),{extent:Qe,brushRegion:l,reverse:h,selectedHandles:r,brushended:cr=>{const ar=y?bt:lt;cr&&R.emit("brush:remove",{nativeEvent:!0}),ar()},brushed:(cr,ar,Yr,Pi,so)=>{const mi=sT(cr,ar,Yr,Pi,p,v);so&&R.emit("brush:highlight",{nativeEvent:!0,data:{selection:mi}}),(y?Ht:ht)(cr,ar,Yr,Pi)},brushcreated:(cr,ar,Yr,Pi,so)=>{const mi=sT(cr,ar,Yr,Pi,p,v);R.emit("brush:end",Object.assign(Object.assign({},so),{nativeEvent:!0,data:{selection:mi}}))},brushupdated:(cr,ar,Yr,Pi,so)=>{const mi=sT(cr,ar,Yr,Pi,p,v);R.emit("brush:end",Object.assign(Object.assign({},so),{nativeEvent:!0,data:{selection:mi}}))},brushstarted:cr=>{R.emit("brush:start",cr)}})),kt=({nativeEvent:cr,data:ar})=>{if(cr)return;const{selection:Yr}=ar,[Pi,so,mi,ti]=_G(Yr,p,v);Ot.move(Pi,so,mi,ti,!1)};R.on("brush:highlight",kt);const Mn=({nativeEvent:cr}={})=>{cr||Ot.remove(!1)};R.on("brush:remove",Mn);const Wn=Ot.destroy.bind(Ot);return Ot.destroy=()=>{R.off("brush:highlight",kt),R.off("brush:remove",Mn),Wn()},Ot}function xP(e){var{facet:t,brushKey:n}=e,r=$p(e,["facet","brushKey"]);return(i,s,l)=>{const{container:c,view:h,options:p}=i,v=sm(c),y={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},b=["active",["inactive",{opacity:.5}]],{scale:T,coordinate:M}=h;if(t){const L=v.getBounds(),N=L.min[0],z=L.min[1],H=L.max[0],X=L.max[1];return Fk(v.parentNode.parentNode,Object.assign(Object.assign({elements:()=>QL(i,s),datum:H_(HM(i,s).map(Y=>Y.view)),brushRegion:(Y,ne,ve,Ee)=>[Y,ne,ve,Ee],extent:[N,z,H,X],state:Ab(HM(i,s).map(Y=>Y.options),b),emitter:l,scale:T,coordinate:M,selectedHandles:void 0},y),r))}const R=Fk(v,Object.assign(Object.assign({elements:yy,key:L=>L.__data__.key,siblings:()=>eee(i,s,n),datum:H_([h,...bP(i,s,n).map(L=>L.view)]),brushRegion:(L,N,z,H)=>[L,N,z,H],extent:void 0,state:Ab([p,...tee(i,s,n)],b),emitter:l,scale:T,coordinate:M,selectedHandles:void 0},y),r));return v.brush=R,()=>R.destroy()}}function EP(e,t,n,r,i){const[,s,,l]=i;return[e,s,n,l]}function nee(e){return xP(Object.assign(Object.assign({},e),{brushRegion:EP,selectedHandles:["handle-e","handle-w"]}))}function SP(e,t,n,r,i){const[s,,l]=i;return[s,t,l,r]}function ree(e){return xP(Object.assign(Object.assign({},e),{brushRegion:SP,selectedHandles:["handle-n","handle-s"]}))}var wP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const iee="axis",oee="axis-line",aee="axis-main-group",Bk="axis-hot-area";function see(e){return e.getElementsByClassName(iee)}function kk(e){return e.getElementsByClassName(oee)[0]}function lee(e){return e.getElementsByClassName(aee)[0]}function zk(e){return lee(e).getLocalBounds()}function uee(e,t){var{cross:n,offsetX:r,offsetY:i}=t,s=wP(t,["cross","offsetX","offsetY"]);const l=zk(e),c=kk(e),[h]=c.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,T=(y-p)*2;return{brushRegion:SP,hotZone:new Jg({className:Bk,style:Object.assign({x:n?p:h-T/2,width:n?T/2:T,y:v,height:b-v},s)}),extent:n?(M,R,L,N)=>[-1/0,R,1/0,N]:(M,R,L,N)=>[Math.floor(p-r),R,Math.ceil(y-r),N]}}function cee(e,t){var{offsetY:n,offsetX:r,cross:i=!1}=t,s=wP(t,["offsetY","offsetX","cross"]);const l=zk(e),c=kk(e),[,h]=c.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,T=b-v;return{brushRegion:EP,hotZone:new Jg({className:Bk,style:Object.assign({x:p,width:y-p,y:i?v:h-T,height:i?T:T*2},s)}),extent:i?(M,R,L,N)=>[M,-1/0,L,1/0]:(M,R,L,N)=>[M,Math.floor(v-n),L,Math.ceil(b-n)]}}function fee(e,t){var{axes:n,elements:r,points:i,horizontal:s,datum:l,offsetY:c,offsetX:h,reverse:p=!1,state:v={},emitter:y,coordinate:b}=t,T=wP(t,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const M=r(e),R=n(e),L=B2(M,l),{setState:N,removeState:z}=dg(v,L),H=new Map,X=xo(T,"mask"),Y=kt=>Array.from(H.values()).every(([Mn,Wn,cr,ar])=>kt.some(([Yr,Pi])=>Yr>=Mn&&Yr<=cr&&Pi>=Wn&&Pi<=ar)),ne=R.map(kt=>kt.attributes.scale),ve=kt=>kt.length>2?[kt[0],kt[kt.length-1]]:kt,Ee=new Map,Ie=()=>{Ee.clear();for(let kt=0;kt<R.length;kt++){const Mn=ne[kt],{domain:Wn}=Mn.getOptions();Ee.set(kt,ve(Wn))}};Ie();const Ye=(kt,Mn)=>{const Wn=[];for(const ar of M){const Yr=i(ar);Y(Yr)?(N(ar,"active"),Wn.push(ar)):N(ar,"inactive")}if(Ee.set(kt,St(Wn,kt)),!Mn)return;const cr=()=>{if(!Qe)return Array.from(Ee.values());const ar=[];for(const[Yr,Pi]of Ee){const so=ne[Yr],{name:mi}=so.getOptions();mi==="x"?ar[0]=Pi:ar[1]=Pi}return ar};y.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:cr()}})},$e=kt=>{for(const Mn of M)z(Mn,"active","inactive");Ie(),kt&&y.emit("brushAxis:remove",{nativeEvent:!0})},St=(kt,Mn)=>{const Wn=ne[Mn],{name:cr}=Wn.getOptions(),ar=kt.map(Yr=>{const Pi=Yr.__data__;return Wn.invert(Pi[cr])});return ve(gy(Wn,ar))},Qe=R.some(s)&&R.some(kt=>!s(kt)),lt=[];for(let kt=0;kt<R.length;kt++){const Mn=R[kt],Wn=s(Mn)?cee:uee,{hotZone:cr,brushRegion:ar,extent:Yr}=Wn(Mn,{offsetY:c,offsetX:h,cross:Qe,zIndex:999,fill:"transparent"});Mn.parentNode.appendChild(cr);const Pi=_P(cr,Object.assign(Object.assign({},X),{reverse:p,brushRegion:ar,brushended(so){H.delete(Mn),Array.from(H.entries()).length===0?$e(so):Ye(kt,so)},brushed(so,mi,ti,Do,uo){H.set(Mn,Yr(so,mi,ti,Do)),Ye(kt,uo)}}));lt.push(Pi)}const ht=(kt={})=>{const{nativeEvent:Mn}=kt;Mn||lt.forEach(Wn=>Wn.remove(!1))},bt=(kt,Mn,Wn)=>{const[cr,ar]=kt,Yr=mi=>mi.getStep?mi.getStep():0,Pi=Ht(cr,Mn,Wn),so=Ht(ar,Mn,Wn)+Yr(Mn);return s(Wn)?[Pi,-1/0,so,1/0]:[-1/0,Pi,1/0,so]},Ht=(kt,Mn,Wn)=>{const{height:cr,width:ar}=b.getOptions(),Yr=Mn.clone();return s(Wn)?Yr.update({range:[0,ar]}):Yr.update({range:[cr,0]}),Yr.map(kt)},Ot=kt=>{const{nativeEvent:Mn}=kt;if(Mn)return;const{selection:Wn}=kt.data;for(let cr=0;cr<lt.length;cr++){const ar=Wn[cr],Yr=lt[cr],Pi=R[cr];if(ar){const so=ne[cr];Yr.move(...bt(ar,so,Pi),!1)}else Yr.remove(!1)}};return y.on("brushAxis:remove",ht),y.on("brushAxis:highlight",Ot),()=>{lt.forEach(kt=>kt.destroy()),y.off("brushAxis:remove",ht),y.off("brushAxis:highlight",Ot)}}function hee(e){return(t,n,r)=>{const{container:i,view:s,options:l}=t,c=sm(i),{x:h,y:p}=c.getBBox(),{coordinate:v}=s;return fee(i,Object.assign({elements:yy,axes:see,offsetY:p,offsetX:h,points:y=>y.__data__.points,horizontal:y=>{const{startPos:[b,T],endPos:[M,R]}=y.attributes;return b!==M&&T===R},datum:H_(s),state:Ab(l,["active",["inactive",{opacity:.5}]]),coordinate:v,emitter:r},e))}}var dee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Uk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function pee(e=300){let t=null;return n=>{const{timeStamp:r}=n;return t!==null&&r-t<e?(t=r,!0):(t=r,!1)}}function vee(e,t){var{filter:n,reset:r,brushRegion:i,extent:s,reverse:l,emitter:c,scale:h,coordinate:p,selection:v,series:y=!1}=t,b=Uk(t,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const T=xo(b,"mask"),{width:M,height:R}=e.getBBox(),L=s||[0,0,M,R],N=pee(),z=_P(e,Object.assign(Object.assign({},T),{extent:L,brushRegion:i,reverse:l,brushcreated:H}));e.addEventListener("click",X);function H(ne,ve,Ee,Ie,Ye){Ye.nativeEvent=!0,n(v(ne,ve,Ee,Ie),Ye),z.remove()}function X(ne){N(ne)&&(ne.nativeEvent=!0,r(ne))}const Y=({nativeEvent:ne,data:ve})=>{if(ne)return;const{selection:Ee}=ve;n(Ee,{nativeEvent:!1})};return c.on("brush:filter",Y),()=>{z.destroy(),c.off("brush:filter",Y),e.removeEventListener("click",X)}}function TP(e){var{hideX:t=!0,hideY:n=!0}=e,r=Uk(e,["hideX","hideY"]);return(i,s,l)=>{const{container:c,view:h,options:p,update:v,setState:y}=i,b=sm(c),T={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let M=!1,R=!1,L=h;const{scale:N,coordinate:z}=h;return vee(b,Object.assign(Object.assign({brushRegion:(H,X,Y,ne)=>[H,X,Y,ne],selection:(H,X,Y,ne)=>{const{scale:ve,coordinate:Ee}=L;return sT(H,X,Y,ne,ve,Ee)},filter:(H,X)=>dee(this,void 0,void 0,function*(){if(R)return;R=!0;const[Y,ne]=H;y("brushFilter",Ee=>{const{marks:Ie}=Ee,Ye=Ie.map($e=>ui({axis:Object.assign(Object.assign({},t&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},$e,{scale:{x:{domain:Y,nice:!1},y:{domain:ne,nice:!1}}}));return Object.assign(Object.assign({},p),{marks:Ye,clip:!0})}),l.emit("brush:filter",Object.assign(Object.assign({},X),{data:{selection:[Y,ne]}})),L=(yield v()).view,R=!1,M=!0}),reset:H=>{if(R||!M)return;const{scale:X}=h,{x:Y,y:ne}=X,ve=Y.getOptions().domain,Ee=ne.getOptions().domain;l.emit("brush:filter",Object.assign(Object.assign({},H),{data:{selection:[ve,Ee]}})),M=!1,L=h,y("brushFilter"),v()},extent:void 0,emitter:l,scale:N,coordinate:z},T),r))}}function mee(e){return TP(Object.assign(Object.assign({hideX:!0},e),{brushRegion:EP}))}function gee(e){return TP(Object.assign(Object.assign({hideY:!0},e),{brushRegion:SP}))}var yee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const _ee="slider";function bee(e,t,n,r=!1,i="x",s="y"){const{marks:l}=e,c=l.map(h=>{var p,v;return ui({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},h,{scale:t,[n]:Object.assign(Object.assign({},((p=h[n])===null||p===void 0?void 0:p[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((v=h[n])===null||v===void 0?void 0:v[s])&&{[s]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},e),{marks:c,clip:!0,animate:!1})}function xee(e,t,n){const[r,i]=e,s=n?h=>1-h:h=>h,l=wb(t,s(r),!0),c=wb(t,s(i),!1);return gy(t,[l,c])}function iA(e){return[e[0],e[e.length-1]]}function jk({initDomain:e={},className:t=_ee,prefix:n="slider",setValue:r=(p,v)=>p.setValues(v),hasState:i=!1,wait:s=50,leading:l=!0,trailing:c=!1,getInitValues:h=p=>{var v;const y=(v=p==null?void 0:p.attributes)===null||v===void 0?void 0:v.values;if(y[0]!==0||y[1]!==1)return y}}){return(p,v,y)=>{const{container:b,view:T,update:M,setState:R}=p,L=b.getElementsByClassName(t);if(!L.length)return()=>{};let N=!1;const{scale:z,coordinate:H,layout:X}=T,{paddingLeft:Y,paddingTop:ne,paddingBottom:ve,paddingRight:Ee}=X,{x:Ie,y:Ye}=z,$e=Cu(H),St=bt=>{const Ht=bt==="vertical"?"y":"x",Ot=bt==="vertical"?"x":"y";return $e?[Ot,Ht]:[Ht,Ot]},Qe=new Map,lt=new Set,ht={x:e.x||Ie.getOptions().domain,y:e.y||Ye.getOptions().domain};for(const bt of L){const{orientation:Ht}=bt.attributes,[Ot,kt]=St(Ht),Mn=`${n}${Jv(Ot)}:filter`,Wn=Ot==="x",{ratio:cr}=Ie.getOptions(),{ratio:ar}=Ye.getOptions(),Yr=ti=>{if(ti.data){const{selection:Pa}=ti.data,[Da=iA(ht.x),us=iA(ht.y)]=Pa;return Wn?[gy(Ie,Da,cr),gy(Ye,us,ar)]:[gy(Ye,us,ar),gy(Ie,Da,cr)]}const{value:Do}=ti.detail,uo=z[Ot],Ko=xee(Do,uo,$e&&Ht==="horizontal"),ga=ht[kt];return[Ko,ga]},Pi=t1(ti=>yee(this,void 0,void 0,function*(){const{initValue:Do=!1}=ti;if(N&&!Do)return;N=!0;const{nativeEvent:uo=!0}=ti,[Ko,ga]=Yr(ti);if(ht[Ot]=Ko,ht[kt]=ga,uo){const Pa=Wn?Ko:ga,Da=Wn?ga:Ko;y.emit(Mn,Object.assign(Object.assign({},ti),{nativeEvent:uo,data:{selection:[iA(Pa),iA(Da)]}}))}R(bt,Pa=>Object.assign(Object.assign({},bee(Pa,{[Ot]:{domain:Ko,nice:!1}},n,i,Ot,kt)),{paddingLeft:Y,paddingTop:ne,paddingBottom:ve,paddingRight:Ee})),yield M(),N=!1}),s,{leading:l,trailing:c}),so=ti=>{const{nativeEvent:Do}=ti;if(Do)return;const{data:uo}=ti,{selection:Ko}=uo,[ga,Pa]=Ko;bt.dispatchEvent(new Yl("valuechange",{data:uo,nativeEvent:!1}));const Da=Wn?lT(ga,Ie):lT(Pa,Ye);r(bt,Da)};y.on(Mn,so),bt.addEventListener("valuechange",Pi),Qe.set(bt,Pi),lt.add([Mn,so]);const mi=h(bt);mi&&bt.dispatchEvent(new Yl("valuechange",{detail:{value:mi},nativeEvent:!1,initValue:!0}))}return M(),()=>{for(const[bt,Ht]of Qe)bt.removeEventListener("valuechange",Ht);for(const[bt,Ht]of lt)y.off(bt,Ht)}}}const Vk="g2-scrollbar";function Eee(e={}){return(t,n,r)=>{const{view:i,container:s}=t;if(!s.getElementsByClassName(Vk).length)return()=>{};const{scale:c}=i,{x:h,y:p}=c,v={x:[...h.getOptions().domain],y:[...p.getOptions().domain]};return h.update({domain:h.getOptions().expectedDomain}),p.update({domain:p.getOptions().expectedDomain}),jk(Object.assign(Object.assign({},e),{initDomain:v,className:Vk,prefix:"scrollbar",hasState:!0,setValue:(b,T)=>b.setValue(T[0]),getInitValues:b=>{const T=b.slider.attributes.values;if(T[0]!==0)return T}}))(t,n,r)}}var See=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function wee(e,t,n){return`<${e} style="${Object.entries(n).map(([r,i])=>`${ZW(r)}:${i}`).join(";")}">${t}</${e}>`}const Tee={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function Hk(e){return e.nodeName!=="text"?!1:!!e.isOverflowing()}function Wk(e){var{offsetX:t=8,offsetY:n=8}=e,r=See(e,["offsetX","offsetY"]);return i=>{const{container:s}=i,[l,c]=s.getBounds().min,h=xo(r,"tip"),p=new Set,v=b=>{const{target:T}=b;if(!Hk(T)){b.stopPropagation();return}const{offsetX:M,offsetY:R}=b,L=M+t-l,N=R+n-c;if(T.tip){T.tip.style.x=L,T.tip.style.y=N;return}const{text:z}=T.style,H=new A0({className:"poptip",style:{innerHTML:wee("div",z,Object.assign(Object.assign({},Tee),h)),x:L,y:N}});s.appendChild(H),T.tip=H,p.add(H)},y=b=>{const{target:T}=b;if(!Hk(T)){b.stopPropagation();return}T.tip&&(T.tip.remove(),T.tip=null,p.delete(T.tip))};return s.addEventListener("pointerover",v),s.addEventListener("pointerout",y),()=>{s.removeEventListener("pointerover",v),s.removeEventListener("pointerout",y),p.forEach(b=>b.remove())}}}Wk.props={reapplyWhenUpdate:!0};function Aee(e,t){var n=bR(t),r=n.length;if((0,Lo.Z)(e))return!r;for(var i=0;i<r;i+=1){var s=n[i];if(t[s]!==e[s]||!(s in e))return!1}return!0}var Cee=Aee;function Oee(e,t){if(!Hr(e))return null;var n;if(wc(t)&&(n=t),vv(t)&&(n=function(i){return Cee(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var Hb=Oee;function oA(e){return e==null?null:Gk(e)}function Gk(e){if(typeof e!="function")throw new Error;return e}var Mee={depth:-1},Zk={},AP={};function Ree(e){return e.id}function Pee(e){return e.parentId}function CP(){var e=Ree,t=Pee,n;function r(i){var s=Array.from(i),l=e,c=t,h,p,v,y,b,T,M,R,L=new Map;if(n!=null){var N=s.map(function(Ee,Ie){return Iee(n(Ee,Ie,i))}),z=N.map(Xk),H=new Set(N).add(""),X=vR(z),Y;try{for(X.s();!(Y=X.n()).done;){var ne=Y.value;H.has(ne)||(H.add(ne),N.push(ne),z.push(Xk(ne)),s.push(AP))}}catch(Ee){X.e(Ee)}finally{X.f()}l=function(Ie,Ye){return N[Ye]},c=function(Ie,Ye){return z[Ye]}}for(v=0,h=s.length;v<h;++v)p=s[v],T=s[v]=new Nb(p),(M=l(p,v,i))!=null&&(M+="")&&(R=T.id=M,L.set(R,L.has(R)?Zk:T)),(M=c(p,v,i))!=null&&(M+="")&&(T.parent=M);for(v=0;v<h;++v)if(T=s[v],M=T.parent){if(b=L.get(M),!b)throw new Error("missing: "+M);if(b===Zk)throw new Error("ambiguous: "+M);b.children?b.children.push(T):b.children=[T],T.parent=b}else{if(y)throw new Error("multiple roots");y=T}if(!y)throw new Error("no root");if(n!=null){for(;y.data===AP&&y.children.length===1;)y=y.children[0],--h;for(var ve=s.length-1;ve>=0&&(T=s[ve],T.data===AP);--ve)T.data=null}if(y.parent=Mee,y.eachBefore(function(Ee){Ee.depth=Ee.parent.depth+1,--h}).eachBefore(Z6),y.parent=null,h>0)throw new Error("cycle");return y}return r.id=function(i){return arguments.length?(e=oA(i),r):e},r.parentId=function(i){return arguments.length?(t=oA(i),r):t},r.path=function(i){return arguments.length?(n=oA(i),r):n},r}function Iee(e){e="".concat(e);var t=e.length;return OP(e,t-1)&&!OP(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:"/".concat(e)}function Xk(e){var t=e.length;if(t<2)return"";for(;--t>1&&!OP(e,t););return e.slice(0,t)}function OP(e,t){if(e[t]==="/"){for(var n=0;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Lee(e,t,n,r,i){var s=e.children,l,c=s.length,h,p=new Array(c+1);for(p[0]=h=l=0;l<c;++l)p[l+1]=h+=s[l].value;v(0,c,e.value,t,n,r,i);function v(y,b,T,M,R,L,N){if(y>=b-1){var z=s[y];z.x0=M,z.y0=R,z.x1=L,z.y1=N;return}for(var H=p[y],X=T/2+H,Y=y+1,ne=b-1;Y<ne;){var ve=Y+ne>>>1;p[ve]<X?Y=ve+1:ne=ve}X-p[Y-1]<p[Y]-X&&y+1<Y&&--Y;var Ee=p[Y]-H,Ie=T-Ee;if(L-M>N-R){var Ye=T?(M*Ie+L*Ee)/T:L;v(y,Y,Ee,M,R,Ye,N),v(Y,b,Ie,Ye,R,L,N)}else{var $e=T?(R*Ie+N*Ee)/T:N;v(y,Y,Ee,M,R,L,$e),v(Y,b,Ie,M,$e,L,N)}}}function aA(e,t,n,r,i){for(var s=e.children,l,c=-1,h=s.length,p=e.value&&(i-n)/e.value;++c<h;)l=s[c],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*p}function Dee(e,t,n,r,i){(e.depth&1?aA:H2)(e,t,n,r,i)}var Yk=(1+Math.sqrt(5))/2;function $k(e,t,n,r,i,s){for(var l=[],c=t.children,h,p,v=0,y=0,b=c.length,T,M,R=t.value,L,N,z,H,X,Y,ne;v<b;){T=i-n,M=s-r;do L=c[y++].value;while(!L&&y<b);for(N=z=L,Y=Math.max(M/T,T/M)/(R*e),ne=L*L*Y,X=Math.max(z/ne,ne/N);y<b;++y){if(L+=p=c[y].value,p<N&&(N=p),p>z&&(z=p),ne=L*L*Y,H=Math.max(z/ne,ne/N),H>X){L-=p;break}X=H}l.push(h={value:L,dice:T<M,children:c.slice(v,y)}),h.dice?H2(h,n,r,i,R?r+=M*L/R:s):aA(h,n,r,R?n+=T*L/R:i,s),R-=L,v=y}return l}var qk=function e(t){function n(r,i,s,l,c){$k(t,r,i,s,l,c)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Yk),Nee=function e(t){function n(r,i,s,l,c){if((h=r._squarify)&&h.ratio===t)for(var h,p,v,y,b=-1,T,M=h.length,R=r.value;++b<M;){for(p=h[b],v=p.children,y=p.value=0,T=v.length;y<T;++y)p.value+=v[y].value;p.dice?H2(p,i,s,l,R?s+=(c-s)*p.value/R:c):aA(p,i,s,R?i+=(l-i)*p.value/R:l,c),R-=p.value}else r._squarify=h=$k(t,r,i,s,l,c),h.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Yk);function n1(){return 0}function Wb(e){return function(){return e}}function Fee(){var e=qk,t=!1,n=1,r=1,i=[0],s=n1,l=n1,c=n1,h=n1,p=n1;function v(b){return b.x0=b.y0=0,b.x1=n,b.y1=r,b.eachBefore(y),i=[0],t&&b.eachBefore(H6),b}function y(b){var T=i[b.depth],M=b.x0+T,R=b.y0+T,L=b.x1-T,N=b.y1-T;L<M&&(M=L=(M+L)/2),N<R&&(R=N=(R+N)/2),b.x0=M,b.y0=R,b.x1=L,b.y1=N,b.children&&(T=i[b.depth+1]=s(b)/2,M+=p(b)-T,R+=l(b)-T,L-=c(b)-T,N-=h(b)-T,L<M&&(M=L=(M+L)/2),N<R&&(R=N=(R+N)/2),e(b,M,R,L,N))}return v.round=function(b){return arguments.length?(t=!!b,v):t},v.size=function(b){return arguments.length?(n=+b[0],r=+b[1],v):[n,r]},v.tile=function(b){return arguments.length?(e=Gk(b),v):e},v.padding=function(b){return arguments.length?v.paddingInner(b).paddingOuter(b):v.paddingInner()},v.paddingInner=function(b){return arguments.length?(s=typeof b=="function"?b:Wb(+b),v):s},v.paddingOuter=function(b){return arguments.length?v.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):v.paddingTop()},v.paddingTop=function(b){return arguments.length?(l=typeof b=="function"?b:Wb(+b),v):l},v.paddingRight=function(b){return arguments.length?(c=typeof b=="function"?b:Wb(+b),v):c},v.paddingBottom=function(b){return arguments.length?(h=typeof b=="function"?b:Wb(+b),v):h},v.paddingLeft=function(b){return arguments.length?(p=typeof b=="function"?b:Wb(+b),v):p},v}function Bee(e,t){return Array.isArray(e)?typeof t=="function"?CP().path(t)(e):CP()(e):Db(e)}function Kk(e,t=[e.data.name]){e.id=e.id||e.data.name,e.path=t,e.children&&e.children.forEach(n=>{n.id=`${e.id}/${n.data.name}`,n.path=[...t,n.data.name],Kk(n,n.path)})}function Qk(e){const t=bl(e,["data","name"]);t.replaceAll&&(e.path=t.replaceAll(".","/").split("/")),e.children&&e.children.forEach(n=>{Qk(n)})}function kee(e,t){const n={treemapBinary:Lee,treemapDice:H2,treemapSlice:aA,treemapSliceDice:Dee,treemapSquarify:qk,treemapResquarify:Nee},r=e==="treemapSquarify"?n[e].ratio(t):n[e];if(!r)throw new TypeError("Invalid tile method!");return r}function Jk(e,t,n){const{value:r}=n,i=kee(t.tile,t.ratio),s=Bee(e,t.path);Hr(e)?Qk(s):Kk(s),r?s.sum(h=>t.ignoreParentValue&&h.children?0:dm(r)(h)).sort(t.sort):s.count(),Fee().tile(i).size(t.size).round(t.round).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(s);const l=s.descendants().map(h=>Object.assign(h,{id:h.id.replace(/^\//,""),x:[h.x0,h.x1],y:[h.y0,h.y1]}));return[l.filter(typeof t.layer=="function"?t.layer:h=>h.height===t.layer),l]}var zee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Uee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function jee(e){return Ua(e).select(`.${E_}`).node()}const Vee={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function Hee(e={}){const{originData:t=[],layout:n}=e,r=Uee(e,["originData","layout"]),i=ui({},Vee,r),s=xo(i,"breadCrumb"),l=xo(i,"active");return c=>{const{update:h,setState:p,container:v,options:y}=c,b=jee(v),T=y.marks[0],{state:M}=T,R=new $l;b.appendChild(R);const L=(X,Y)=>zee(this,void 0,void 0,function*(){if(R.removeChildren(),Y){let ne="",ve=s.y,Ee=0;const Ie=[],Ye=b.getBBox().width,$e=X.map((St,Qe)=>{ne=`${ne}${St}/`,Ie.push(St);const lt=new Vs({name:ne.replace(/\/$/,""),style:Object.assign(Object.assign({text:St,x:Ee,path:[...Ie],depth:Qe},s),{y:ve})});R.appendChild(lt),Ee+=lt.getBBox().width;const ht=new Vs({style:Object.assign(Object.assign({x:Ee,text:" / "},s),{y:ve})});return R.appendChild(ht),Ee+=ht.getBBox().width,Ee>Ye&&(ve=R.getBBox().height+s.y,Ee=0,lt.attr({x:Ee,y:ve}),Ee+=lt.getBBox().width,ht.attr({x:Ee,y:ve}),Ee+=ht.getBBox().width),Qe===gR(X)-1&&ht.remove(),lt});$e.forEach((St,Qe)=>{if(Qe===gR($e)-1)return;const lt=Object.assign({},St.attributes);St.attr("cursor","pointer"),St.addEventListener("mouseenter",()=>{St.attr(l)}),St.addEventListener("mouseleave",()=>{St.attr(lt)}),St.addEventListener("click",()=>{L(bl(St,["style","path"]),bl(St,["style","depth"]))})})}GJ(v,p),p("treemapDrillDown",ne=>{const{marks:ve}=ne,Ee=X.join("/"),Ie=ve.map(Ye=>{if(Ye.type!=="rect")return Ye;let $e=t;if(Y){const Qe=t.filter(Ot=>{const kt=bl(Ot,["id"]);return kt&&(kt.match(`${Ee}/`)||Ee.match(kt))}).map(Ot=>({value:Ot.height===0?bl(Ot,["value"]):void 0,name:bl(Ot,["id"])})),{paddingLeft:lt,paddingBottom:ht,paddingRight:bt}=n,Ht=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||R.getBBox().height+10)/(Y+1),paddingLeft:lt/(Y+1),paddingBottom:ht/(Y+1),paddingRight:bt/(Y+1),path:Ot=>Ot.name,layer:Ot=>Ot.depth===Y+1});$e=Jk(Qe,Ht,{value:"value"})[0]}else $e=t.filter(Qe=>Qe.depth===1);const St=[];return $e.forEach(({path:Qe})=>{St.push(tE(Qe))}),ui({},Ye,{data:$e,scale:{color:{domain:St}}})});return Object.assign(Object.assign({},ne),{marks:Ie})}),yield h(void 0,["legendFilter"])}),N=X=>{const Y=X.target;if(bl(Y,["markType"])!=="rect")return;const ne=bl(Y,["__data__","key"]),ve=Hb(t,Ee=>Ee.id===ne);bl(ve,"height")&&L(bl(ve,"path"),bl(ve,"depth"))};b.addEventListener("click",N);const z=bR(Object.assign(Object.assign({},M.active),M.inactive)),H=()=>{iD(b).forEach(Y=>{const ne=bl(Y,["style","cursor"]),ve=Hb(t,Ee=>Ee.id===bl(Y,["__data__","key"]));if(ne!=="pointer"&&(ve!=null&&ve.height)){Y.style.cursor="pointer";const Ee=pR(Y.attributes,z);Y.addEventListener("mouseenter",()=>{Y.attr(M.active)}),Y.addEventListener("mouseleave",()=>{Y.attr(ui(Ee,M.inactive))})}})};return H(),b.addEventListener("mousemove",H),()=>{R.remove(),b.removeEventListener("click",N),b.removeEventListener("mousemove",H)}}}var MP=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Wee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Gee={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},RP="movePoint",e7=e=>{const t=e.target,{markType:n}=t;n==="line"&&(t.attr("_lineWidth",t.attr("lineWidth")||1),t.attr("lineWidth",t.attr("_lineWidth")+3)),n==="interval"&&(t.attr("_opacity",t.attr("opacity")||1),t.attr("opacity",.7*t.attr("_opacity")))},t7=e=>{const t=e.target,{markType:n}=t;n==="line"&&t.attr("lineWidth",t.attr("_lineWidth")),n==="interval"&&t.attr("opacity",t.attr("_opacity"))},Zee=(e,t,n)=>t.map(r=>["x","color"].reduce((s,l)=>{const c=n[l];return c&&r[c]!==e[c]?!1:s},!0)?Object.assign(Object.assign({},r),e):r),Xee=e=>{const t=bl(e,["__data__","y"]),r=bl(e,["__data__","y1"])-t,{__data__:{data:i,encode:s,transform:l},childNodes:c}=e.parentNode,h=Hb(l,({type:y})=>y==="normalizeY"),p=bl(s,["y","field"]),v=i[c.indexOf(e)][p];return(y,b=!1)=>h||b?y/(1-y)/(r/(1-r))*v:y},Yee=(e,t)=>{const n=bl(e,["__data__","seriesItems",t,"0","value"]),r=bl(e,["__data__","seriesIndex",t]),{__data__:{data:i,encode:s,transform:l}}=e.parentNode,c=Hb(l,({type:v})=>v==="normalizeY"),h=bl(s,["y","field"]),p=i[r][h];return v=>c?n===1?v:v/(1-v)/(n/(1-n))*p:v},n7=(e,t,n)=>{e.forEach((r,i)=>{r.attr("stroke",t[1]===i?n.activeStroke:n.stroke)})},r7=(e,t,n,r)=>{const i=new gl({style:n}),s=new Vs({style:r});return t.appendChild(s),e.appendChild(i),[i,s]},i7=(e,t)=>{if(!bl(e,["options","range","indexOf"]))return;const r=e.options.range.indexOf(t);return e.sortedDomain[r]},PP=(e,t,n)=>{const r=pT(e,t),s=pT(e,n)/r,l=e[0]+(t[0]-e[0])*s,c=e[1]+(t[1]-e[1])*s;return[l,c]};function $ee(e={}){const{selection:t=[],precision:n=2}=e,r=Wee(e,["selection","precision"]),i=Object.assign(Object.assign({},Gee),r||{}),s=xo(i,"path"),l=xo(i,"label"),c=xo(i,"point");return(h,p,v)=>{const{update:y,setState:b,container:T,view:M,options:{marks:R,coordinate:L}}=h,N=sm(T);let z=iD(N),H,X=t;const{transform:Y=[],type:ne}=L,ve=!!Hb(Y,({type:Ot})=>Ot==="transpose"),Ee=ne==="polar",Ie=ne==="theta",Ye=!!Hb(z,({markType:Ot})=>Ot==="area");Ye&&(z=z.filter(({markType:Ot})=>Ot==="area"));const $e=new $l({style:{zIndex:2}});N.appendChild($e);const St=()=>{v.emit("element-point:select",{nativeEvent:!0,data:{selection:X}})},Qe=(Ot,kt)=>{v.emit("element-point:moved",{nativeEvent:!0,data:{changeData:Ot,data:kt}})},lt=Ot=>{const kt=Ot.target;X=[kt.parentNode.childNodes.indexOf(kt)],St(),bt(kt)},ht=Ot=>{const{data:{selection:kt},nativeEvent:Mn}=Ot;if(Mn)return;X=kt;const Wn=bl(z,[X==null?void 0:X[0]]);Wn&&bt(Wn)},bt=Ot=>{const{attributes:kt,markType:Mn,__data__:Wn}=Ot,{stroke:cr}=kt,{points:ar,seriesTitle:Yr,color:Pi,title:so,seriesX:mi,y1:ti}=Wn;if(ve&&Mn!=="interval")return;const{scale:Do,coordinate:uo}=(H==null?void 0:H.view)||M,{color:Ko,y:ga,x:Pa}=Do,Da=uo.getCenter();$e.removeChildren();let us;const fl=(is,Ts,zu,rf)=>MP(this,void 0,void 0,function*(){return b("elementPointMove",Cp=>{var Uu;const jc=(((Uu=H==null?void 0:H.options)===null||Uu===void 0?void 0:Uu.marks)||R).map(as=>{if(!rf.includes(as.type))return as;const{data:Rs,encode:Ps}=as,Ol=Object.keys(Ps).reduce((nl,ec)=>{const fc=Ps[ec];return ec==="x"&&(nl[fc]=is),ec==="y"&&(nl[fc]=Ts),ec==="color"&&(nl[fc]=zu),nl},{}),hl=Zee(Ol,Rs,Ps);return Qe(Ol,hl),ui({},as,{data:hl,animate:!1})});return Object.assign(Object.assign({},Cp),{marks:jc})}),yield y("elementPointMove")});if(["line","area"].includes(Mn))ar.forEach((is,Ts)=>{const zu=Pa.invert(mi[Ts]);if(!zu)return;const rf=new Tu({name:RP,style:Object.assign({cx:is[0],cy:is[1],fill:cr},c)}),Cp=Yee(Ot,Ts);rf.addEventListener("mousedown",Uu=>{const jc=uo.output([mi[Ts],0]),as=Yr==null?void 0:Yr.length;T.attr("cursor","move"),X[1]!==Ts&&(X[1]=Ts,St()),n7($e.childNodes,X,c);const[Rs,Ps]=r7($e,rf,s,l),ss=hl=>{const nl=is[1]+hl.clientY-us[1];if(Ye)if(Ee){const ec=is[0]+hl.clientX-us[0],[fc,xd]=PP(Da,jc,[ec,nl]),[,bg]=uo.output([1,ga.output(0)]),[,l1]=uo.invert([fc,bg-(ar[Ts+as][1]-xd)]),iC=(Ts+1)%as,oC=(Ts-1+as)%as,u1=k2([ar[oC],[fc,xd],Yr[iC]&&ar[iC]]);Ps.attr("text",Cp(ga.invert(l1)).toFixed(n)),Rs.attr("path",u1),rf.attr("cx",fc),rf.attr("cy",xd)}else{const[,ec]=uo.output([1,ga.output(0)]),[,fc]=uo.invert([is[0],ec-(ar[Ts+as][1]-nl)]),xd=k2([ar[Ts-1],[is[0],nl],Yr[Ts+1]&&ar[Ts+1]]);Ps.attr("text",Cp(ga.invert(fc)).toFixed(n)),Rs.attr("path",xd),rf.attr("cy",nl)}else{const[,ec]=uo.invert([is[0],nl]),fc=k2([ar[Ts-1],[is[0],nl],ar[Ts+1]]);Ps.attr("text",ga.invert(ec).toFixed(n)),Rs.attr("path",fc),rf.attr("cy",nl)}};us=[Uu.clientX,Uu.clientY],window.addEventListener("mousemove",ss);const Ol=()=>MP(this,void 0,void 0,function*(){if(T.attr("cursor","default"),window.removeEventListener("mousemove",ss),T.removeEventListener("mouseup",Ol),pa(Ps.attr("text")))return;const hl=Number(Ps.attr("text")),nl=i7(Ko,Pi);H=yield fl(zu,hl,nl,["line","area"]),Ps.remove(),Rs.remove(),bt(Ot)});T.addEventListener("mouseup",Ol)}),$e.appendChild(rf)}),n7($e.childNodes,X,c);else if(Mn==="interval"){let is=[(ar[0][0]+ar[1][0])/2,ar[0][1]];ve?is=[ar[0][0],(ar[0][1]+ar[1][1])/2]:Ie&&(is=ar[0]);const Ts=Xee(Ot),zu=new Tu({name:RP,style:Object.assign(Object.assign({cx:is[0],cy:is[1],fill:cr},c),{stroke:c.activeStroke})});zu.addEventListener("mousedown",rf=>{T.attr("cursor","move");const Cp=i7(Ko,Pi),[Uu,jc]=r7($e,zu,s,l),as=Ps=>{if(ve){const ss=is[0]+Ps.clientX-us[0],[Ol]=uo.output([ga.output(0),ga.output(0)]),[,hl]=uo.invert([Ol+(ss-ar[2][0]),is[1]]),nl=k2([[ss,ar[0][1]],[ss,ar[1][1]],ar[2],ar[3]],!0);jc.attr("text",Ts(ga.invert(hl)).toFixed(n)),Uu.attr("path",nl),zu.attr("cx",ss)}else if(Ie){const ss=is[1]+Ps.clientY-us[1],Ol=is[0]+Ps.clientX-us[0],[hl,nl]=PP(Da,[Ol,ss],is),[ec,fc]=PP(Da,[Ol,ss],ar[1]),xd=uo.invert([hl,nl])[1],bg=ti-xd;if(bg<0)return;const l1=DG(Da,[[hl,nl],[ec,fc],ar[2],ar[3]],bg>.5?1:0);jc.attr("text",Ts(bg,!0).toFixed(n)),Uu.attr("path",l1),zu.attr("cx",hl),zu.attr("cy",nl)}else{const ss=is[1]+Ps.clientY-us[1],[,Ol]=uo.output([1,ga.output(0)]),[,hl]=uo.invert([is[0],Ol-(ar[2][1]-ss)]),nl=k2([[ar[0][0],ss],[ar[1][0],ss],ar[2],ar[3]],!0);jc.attr("text",Ts(ga.invert(hl)).toFixed(n)),Uu.attr("path",nl),zu.attr("cy",ss)}};us=[rf.clientX,rf.clientY],window.addEventListener("mousemove",as);const Rs=()=>MP(this,void 0,void 0,function*(){if(T.attr("cursor","default"),T.removeEventListener("mouseup",Rs),window.removeEventListener("mousemove",as),pa(jc.attr("text")))return;const Ps=Number(jc.attr("text"));H=yield fl(so,Ps,Cp,[Mn]),jc.remove(),Uu.remove(),bt(Ot)});T.addEventListener("mouseup",Rs)}),$e.appendChild(zu)}};z.forEach((Ot,kt)=>{X[0]===kt&&bt(Ot),Ot.addEventListener("click",lt),Ot.addEventListener("mouseenter",e7),Ot.addEventListener("mouseleave",t7)});const Ht=Ot=>{const kt=Ot==null?void 0:Ot.target;(!kt||kt.name!==RP&&!z.includes(kt))&&(X=[],St(),$e.removeChildren())};return v.on("element-point:select",ht),v.on("element-point:unselect",Ht),T.addEventListener("mousedown",Ht),()=>{$e.remove(),v.off("element-point:select",ht),v.off("element-point:unselect",Ht),T.removeEventListener("mousedown",Ht),z.forEach(Ot=>{Ot.removeEventListener("click",lt),Ot.removeEventListener("mouseenter",e7),Ot.removeEventListener("mouseleave",t7)})}}}var qee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const o7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{x:n=0,y:r=0,width:i,height:s,data:l}=e;return t.map(c=>{var{data:h,x:p,y:v,width:y,height:b}=c,T=qee(c,["data","x","y","width","height"]);return Object.assign(Object.assign({},T),{data:MM(h,l),x:p!=null?p:n,y:v!=null?v:r,width:y!=null?y:i,height:b!=null?b:s})})};o7.props={};var Kee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const a7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{direction:n="row",ratio:r=t.map(()=>1),padding:i=0,data:s}=e,[l,c,h,p]=n==="col"?["y","height","width","x"]:["x","width","height","y"],v=r.reduce((R,L)=>R+L),y=e[c]-i*(t.length-1),b=r.map(R=>y*(R/v)),T=[];let M=e[l]||0;for(let R=0;R<b.length;R+=1){const L=t[R],{data:N}=L,z=Kee(L,["data"]),H=MM(N,s);T.push(Object.assign({[l]:M,[c]:b[R],[p]:e[p]||0,[h]:e[h],data:H},z)),M+=b[R]+i}return T};a7.props={};class sE{constructor(t){this.$value=t}static of(t){return new sE(t)}call(t,...n){return this.$value=t(this.$value,...n),this}value(){return this.$value}}var Qee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Jee=yb(e=>{const{encode:t,data:n,scale:r,shareSize:i=!1}=e,{x:s,y:l}=t,c=(h,p)=>{var v;if(h===void 0||!i)return{};const y=Fu(n,M=>M[h]),b=((v=r==null?void 0:r[p])===null||v===void 0?void 0:v.domain)||Array.from(y.keys()),T=b.map(M=>y.has(M)?y.get(M).length:1);return{domain:b,flex:T}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:s===void 0?null:{position:"top"}},s===void 0&&{paddingInner:0}),c(s,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:l===void 0?null:{position:"right"}},l===void 0&&{paddingInner:0}),c(l,"y"))}}}),IP=yb(e=>{const{data:t,scale:n}=e,r=[e];let i,s,l;for(;r.length;){const y=r.shift(),{children:b,encode:T={},scale:M={},legend:R={}}=y,{color:L}=T,{color:N}=M,{color:z}=R;L!==void 0&&(i=L),N!==void 0&&(s=N),z!==void 0&&(l=z),Array.isArray(b)&&r.push(...b)}const c=()=>{var y;const b=(y=n==null?void 0:n.color)===null||y===void 0?void 0:y.domain;if(b!==void 0)return[b];if(i===void 0)return[void 0];const T=typeof i=="function"?i:R=>R[i],M=t.map(T);return M.some(R=>typeof R=="number")?[cg(M)]:[Array.from(new Set(M)),"ordinal"]},h=typeof i=="string"?i:"",[p,v]=c();return{encode:{color:i},scale:{color:ui({},s,{domain:p,type:v})},legend:{color:ui({title:h},l)}}}),LP=yb(()=>({animate:{enterType:"fadeIn"}})),DP=_b(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),NP=_b(()=>({type:"cell"})),s7=_b(e=>{const{data:t}=e;return{data:{type:"inline",value:t,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=e,{x:s,y:l}=i,c=s?Array.from(new Set(r.map(v=>v[s]))):[],h=l?Array.from(new Set(r.map(v=>v[l]))):[];return(()=>{if(c.length&&h.length){const v=[];for(const y of c)for(const b of h)v.push({[s]:y,[l]:b});return v}if(c.length)return c.map(v=>({[s]:v}));if(h.length)return h.map(v=>({[l]:v}))})()}}]}}}),l7=_b((e,t=ete,n=tte,r=nte,i={})=>{const{data:s,encode:l,children:c,scale:h,x:p=0,y:v=0,shareData:y=!1,key:b}=e,{value:T}=s,{x:M,y:R}=l,{color:L}=h,{domain:N}=L;return{children:(H,X,Y)=>{const{x:ne,y:ve}=X,{paddingLeft:Ee,paddingTop:Ie,marginLeft:Ye,marginTop:$e}=Y,{domain:St}=ne.getOptions(),{domain:Qe}=ve.getOptions(),lt=og(H),ht=H.map(t),bt=H.map(({x:cr,y:ar})=>[ne.invert(cr),ve.invert(ar)]),Ot=bt.map(([cr,ar])=>Yr=>{const{[M]:Pi,[R]:so}=Yr;return(M!==void 0?Pi===cr:!0)&&(R!==void 0?so===ar:!0)}).map(cr=>T.filter(cr)),kt=y?yl(Ot,cr=>cr.length):void 0,Mn=bt.map(([cr,ar])=>({columnField:M,columnIndex:St.indexOf(cr),columnValue:cr,columnValuesLength:St.length,rowField:R,rowIndex:Qe.indexOf(ar),rowValue:ar,rowValuesLength:Qe.length})),Wn=Mn.map(cr=>Array.isArray(c)?c:[c(cr)].flat(1));return lt.flatMap(cr=>{const[ar,Yr,Pi,so]=ht[cr],mi=Mn[cr],ti=Ot[cr];return Wn[cr].map(uo=>{var Ko,ga,{scale:Pa,key:Da,facet:us=!0,axis:fl={},legend:is={}}=uo,Ts=Qee(uo,["scale","key","facet","axis","legend"]);const zu=((Ko=Pa==null?void 0:Pa.y)===null||Ko===void 0?void 0:Ko.guide)||fl.y,rf=((ga=Pa==null?void 0:Pa.x)===null||ga===void 0?void 0:ga.guide)||fl.x,Cp={x:{tickCount:M?5:void 0},y:{tickCount:R?5:void 0}},Uu=us?ti:ti.length===0?[]:T,jc={color:{domain:N}},as={x:u7(rf,n)(mi,Uu),y:u7(zu,r)(mi,Uu)};return Object.assign(Object.assign({key:`${Da}-${cr}`,data:Uu,margin:0,x:ar+Ee+p+Ye,y:Yr+Ie+v+$e,parentKey:b,width:Pi,height:so,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!Uu.length,dataDomain:kt,scale:ui(Cp,Pa,jc),axis:ui({},fl,as),legend:!1},Ts),i)})})}}});function ete(e){const{points:t}=e;return PM(t)}function sA(e,t){return t.length?ui({title:!1,tick:null,label:null},e):ui({title:!1,tick:null,label:null,grid:null},e)}function tte(e){return(t,n)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:s,columnValuesLength:l}=t;if(r!==i-1)return sA(e,n);const c=s!==l-1?!1:void 0,h=n.length?void 0:null;return ui({title:c,grid:h},e)}}function nte(e){return(t,n)=>{const{rowIndex:r,columnIndex:i}=t;if(i!==0)return sA(e,n);const s=r!==0?!1:void 0,l=n.length?void 0:null;return ui({title:s,grid:l},e)}}function u7(e,t){return typeof e=="function"?e:e===null||e===!1?()=>null:t(e)}const c7=()=>e=>[sE.of(e).call(NP).call(IP).call(LP).call(Jee).call(DP).call(s7).call(l7).value()];c7.props={};var FP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const rte=yb(e=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),ite=_b(e=>{const{data:t,children:n,x:r=0,y:i=0,key:s}=e;return{children:(c,h,p)=>{const{x:v,y}=h,{paddingLeft:b,paddingTop:T,marginLeft:M,marginTop:R}=p,{domain:L}=v.getOptions(),{domain:N}=y.getOptions(),z=og(c),H=c.map(({points:ve})=>PM(ve)),X=c.map(({x:ve,y:Ee})=>[v.invert(ve),y.invert(Ee)]),Y=X.map(([ve,Ee])=>({columnField:ve,columnIndex:L.indexOf(ve),columnValue:ve,columnValuesLength:L.length,rowField:Ee,rowIndex:N.indexOf(Ee),rowValue:Ee,rowValuesLength:N.length})),ne=Y.map(ve=>Array.isArray(n)?n:[n(ve)].flat(1));return z.flatMap(ve=>{const[Ee,Ie,Ye,$e]=H[ve],[St,Qe]=X[ve],lt=Y[ve];return ne[ve].map(bt=>{var Ht,Ot;const{scale:kt,key:Mn,encode:Wn,axis:cr,interaction:ar}=bt,Yr=FP(bt,["scale","key","encode","axis","interaction"]),Pi=(Ht=kt==null?void 0:kt.y)===null||Ht===void 0?void 0:Ht.guide,so=(Ot=kt==null?void 0:kt.x)===null||Ot===void 0?void 0:Ot.guide,mi={x:{facet:!1},y:{facet:!1}},ti={x:ate(so)(lt,t),y:ste(Pi)(lt,t)},Do={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:t,parentKey:s,key:`${Mn}-${ve}`,x:Ee+b+r+M,y:Ie+T+i+R,width:Ye,height:$e,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:ui(mi,kt),axis:ui(Do,cr,ti),legend:!1,encode:ui({},Wn,{x:St,y:Qe}),interaction:ui({},ar,{legendFilter:!1})},Yr)})})}}}),ote=_b(e=>{const{encode:t}=e,n=FP(e,["encode"]),{position:r=[],x:i=r,y:s=[...r].reverse()}=t,l=FP(t,["position","x","y"]),c=[];for(const h of[i].flat(1))for(const p of[s].flat(1))c.push({$x:h,$y:p});return Object.assign(Object.assign({},n),{data:c,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[s].flat(1).length===1&&{y:{paddingInner:0}})})});function ate(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{rowIndex:r,rowValuesLength:i}=t;if(r!==i-1)return sA(e,n)}}function ste(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{columnIndex:r}=t;if(r!==0)return sA(e,n)}}const lte=()=>e=>[sE.of(e).call(NP).call(IP).call(ite).call(ote).call(LP).call(DP).call(rte).value()];var ute=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const cte=yb(e=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),fte=yb(e=>({coordinate:{type:"polar"}})),hte=e=>{const{encode:t}=e,n=ute(e,["encode"]),{position:r}=t;return Object.assign(Object.assign({},n),{encode:{x:r}})};function f7(e){return t=>null}function dte(e){const{points:t}=e,[n,r,i,s]=t,l=cc(n,s),c=Bc(n,s),h=Bc(r,i),p=TL(c,h),v=1/Math.sin(p/2),y=l/(1+v),b=y*Math.sqrt(2),[T,M]=i,L=bb(c)+p/2,N=y*v,z=T+N*Math.sin(L),H=M-N*Math.cos(L);return[z-b/2,H-b/2,b,b]}const pte=()=>e=>[sE.of(e).call(NP).call(hte).call(IP).call(fte).call(s7).call(l7,dte,f7,f7,{frame:!1}).call(LP).call(DP).call(cte).value()];function vte(e,t,n){const i=n,s=[0,i],l=[-i+1,-0+1];if(e==="normal")return s;if(e==="reverse")return l;if(e==="alternate")return t%2===0?s:l;if(e==="reverse-alternate")return t%2===0?l:s}function mte(e,t,n){const r=[e];for(;r.length;){const i=r.pop();i.animate=ui({enter:{duration:t},update:{duration:t,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:t}},i.animate||{});const{children:s}=i;Array.isArray(s)&&r.push(...s)}return e}const h7=()=>e=>{const{children:t=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:s="ease-in-out-sine"}=e,l=t.length;if(!Array.isArray(t)||l===0)return[];const{key:c}=t[0],h=t.map(p=>Object.assign(Object.assign({},p),{key:c})).map(p=>mte(p,n,s));return function*(){let p=0,v;for(;r==="infinite"||p<r;){const[y,b]=vte(i,p,l);for(let T=y;T<b;T+=1){const M=Math.abs(T);v!==M&&(yield h[M]),v=M}p++}}};h7.props={};function Oy(e,t,n){const{encode:r}=n;if(e===null)return[t];const i=gte(e).map(l=>{var c;return[l,(c=tl(r,l))===null||c===void 0?void 0:c[0]]}).filter(([,l])=>iu(l)),s=l=>i.map(([,c])=>c[l]).join("-");return Array.from(Fu(t,s).values())}function d7(e){return Array.isArray(e)?bte(e):typeof e=="function"?_te(e):e==="series"?yte:e==="value"?xte:e==="sum"?Ete:e==="maxIndex"?Ste:()=>null}function p7(e,t){for(const n of e)n.sort(t)}function v7(e,t){return(t==null?void 0:t.domain)||Array.from(new Set(e))}function gte(e){return Array.isArray(e)?e:[e]}function yte(e,t,n){return lE(r=>n[r])}function _te(e){return(t,n,r)=>lE(i=>e(t[i]))}function bte(e){return(t,n,r)=>(i,s)=>e.reduce((l,c)=>l!==0?l:kc(t[i][c],t[s][c]),0)}function xte(e,t,n){return lE(r=>t[r])}function Ete(e,t,n){const r=og(e),i=Array.from(Fu(r,l=>n[+l]).entries()),s=new Map(i.map(([l,c])=>[l,c.reduce((h,p)=>h+ +t[p])]));return lE(l=>s.get(n[l]))}function Ste(e,t,n){const r=og(e),i=Array.from(Fu(r,l=>n[+l]).entries()),s=new Map(i.map(([l,c])=>[l,Eb(c,h=>t[h])]));return lE(l=>s.get(n[l]))}function lE(e){return(t,n)=>kc(e(t),e(n))}const m7=(e={})=>{const{groupBy:t="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:s="y1",series:l=!0}=e;return(c,h)=>{const{data:p,encode:v,style:y={}}=h,[b,T]=tl(v,"y"),[M,R]=tl(v,"y1"),[L]=l?G2(v,"series","color"):tl(v,"color"),N=Oy(t,c,h),H=d7(n)(p,b,L);H&&p7(N,H);const X=new Array(c.length),Y=new Array(c.length),ne=new Array(c.length),ve=[],Ee=[];for(const Qe of N){r&&Qe.reverse();const lt=M?+M[Qe[0]]:0,ht=[],bt=[];for(const ar of Qe){const Yr=ne[ar]=+b[ar]-lt;Yr<0?bt.push(ar):Yr>=0&&ht.push(ar)}const Ht=ht.length>0?ht:bt,Ot=bt.length>0?bt:ht;let kt=ht.length-1,Mn=0;for(;kt>0&&b[Ht[kt]]===0;)kt--;for(;Mn<Ot.length-1&&b[Ot[Mn]]===0;)Mn++;ve.push(Ht[kt]),Ee.push(Ot[Mn]);let Wn=lt;for(const ar of bt.reverse()){const Yr=ne[ar];Wn=X[ar]=(Y[ar]=Wn)+Yr}let cr=lt;for(const ar of ht){const Yr=ne[ar];Yr>0?cr=X[ar]=(Y[ar]=cr)+Yr:X[ar]=Y[ar]=cr}}const Ie=new Set(ve),Ye=new Set(Ee),$e=i==="y"?X:Y,St=s==="y"?X:Y;return[c,ui({},h,{encode:{y0:LT(b,T),y:ku($e,T),y1:ku(St,R)},style:Object.assign({first:(Qe,lt)=>Ie.has(lt),last:(Qe,lt)=>Ye.has(lt)},y)})]}};m7.props={};function g7(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function wte(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,s+=r*(l-i));else{let l=-1;for(let c of e)(c=t(c,++l,e))!=null&&(c=+c)>=c&&(r=c-i,i+=r/++n,s+=r*(c-i))}if(n>1)return s/(n-1)}function y7(e,t){const n=wte(e,t);return n&&Math.sqrt(n)}function Tte(e,t,n){const r=g7(e),i=y7(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}var _7=Array.prototype,Ate=_7.slice,z0e=_7.map;function BP(e){return()=>e}const Cte=Math.sqrt(50),Ote=Math.sqrt(10),Mte=Math.sqrt(2);function lA(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=Cte?10:s>=Ote?5:s>=Mte?2:1;let c,h,p;return i<0?(p=Math.pow(10,-i)/l,c=Math.round(e*p),h=Math.round(t*p),c/p<e&&++c,h/p>t&&--h,p=-p):(p=Math.pow(10,i)*l,c=Math.round(e/p),h=Math.round(t/p),c*p<e&&++c,h*p>t&&--h),h<c&&.5<=n&&n<2?lA(e,t,n*2):[c,h,p]}function Rte(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?lA(t,e,n):lA(e,t,n);if(!(s>=i))return[];const c=s-i+1,h=new Array(c);if(r)if(l<0)for(let p=0;p<c;++p)h[p]=(s-p)/-l;else for(let p=0;p<c;++p)h[p]=(s-p)*l;else if(l<0)for(let p=0;p<c;++p)h[p]=(i+p)/-l;else for(let p=0;p<c;++p)h[p]=(i+p)*l;return h}function uE(e,t,n){return t=+t,e=+e,n=+n,lA(e,t,n)[2]}function U0e(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?uE(t,e,n):uE(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Pte(e,t,n){let r;for(;;){const i=uE(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function Ite(e){return Math.max(1,Math.ceil(Math.log(g7(e))/Math.LN2)+1)}function Lte(){var e=O_,t=cg,n=Ite;function r(i){Array.isArray(i)||(i=Array.from(i));var s,l=i.length,c,h,p=new Array(l);for(s=0;s<l;++s)p[s]=e(i[s],s,i);var v=t(p),y=v[0],b=v[1],T=n(p,y,b);if(!Array.isArray(T)){const H=b,X=+T;if(t===cg&&([y,b]=Pte(y,b,X)),T=Rte(y,b,X),T[0]<=y&&(h=uE(y,b,X)),T[T.length-1]>=b)if(H>=b&&t===cg){const Y=uE(y,b,X);isFinite(Y)&&(Y>0?b=(Math.floor(b/Y)+1)*Y:Y<0&&(b=(Math.ceil(b*-Y)+1)/-Y))}else T.pop()}for(var M=T.length,R=0,L=M;T[R]<=y;)++R;for(;T[L-1]>b;)--L;(R||L<M)&&(T=T.slice(R,L),M=L-R);var N=new Array(M+1),z;for(s=0;s<=M;++s)z=N[s]=[],z.x0=s>0?T[s-1]:y,z.x1=s<M?T[s]:b;if(isFinite(h)){if(h>0)for(s=0;s<l;++s)(c=p[s])!=null&&y<=c&&c<=b&&N[Math.min(M,Math.floor((c-y)/h))].push(i[s]);else if(h<0){for(s=0;s<l;++s)if((c=p[s])!=null&&y<=c&&c<=b){const H=Math.floor((y-c)*h);N[Math.min(M,H+(T[H]<=c))].push(i[s])}}}else for(s=0;s<l;++s)(c=p[s])!=null&&y<=c&&c<=b&&N[gG(T,c,0,M)].push(i[s]);return N}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:BP(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:BP([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:BP(Array.isArray(i)?Ate.call(i):i),r):n},r}function kP(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?I2:ZL(i);r>n;){if(r-n>600){const h=r-n+1,p=t-n+1,v=Math.log(h),y=.5*Math.exp(2*v/3),b=.5*Math.sqrt(v*y*(h-y)/h)*(p-h/2<0?-1:1),T=Math.max(n,Math.floor(t-p*y/h+b)),M=Math.min(r,Math.floor(t+(h-p)*y/h+b));kP(e,t,T,M,i)}const s=e[t];let l=n,c=r;for(cE(e,n,t),i(e[r],s)>0&&cE(e,n,r);l<c;){for(cE(e,l,c),++l,--c;i(e[l],s)<0;)++l;for(;i(e[c],s)>0;)--c}i(e[n],s)===0?cE(e,n,c):(++c,cE(e,c,r)),c<=t&&(n=c+1),t<=c&&(r=c-1)}return e}function cE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Dte(e,t=kc){let n,r=!1;if(t.length===1){let i;for(const s of e){const l=t(s);(r?kc(l,i)>0:kc(l,l)===0)&&(n=s,i=l,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function uA(e,t,n){if(e=Float64Array.from(dG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Xp(e);if(t>=1)return yl(e);var r,i=(r-1)*t,s=Math.floor(i),l=yl(kP(e,s).subarray(0,s+1)),c=Xp(e.subarray(s+1));return l+(c-l)*(i-s)}}function j0e(e,t,n=number){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),c=+n(e[s+1],s+1,e);return l+(c-l)*(i-s)}}function Nte(e,t,n=kM){if(!isNaN(t=+t)){if(r=Float64Array.from(e,(c,h)=>kM(n(e[h],h,e))),t<=0)return tA(r);if(t>=1)return Eb(r);var r,i=Uint32Array.from(e,(c,h)=>h),s=r.length-1,l=Math.floor(s*t);return kP(i,l,0,s,(c,h)=>I2(r[c],r[h])),l=Dte(i.subarray(0,l+1),c=>r[c]),l>=0?l:-1}}function zP(e,t){return uA(e,.5,t)}function Fte(e,t){return Nte(e,.5,t)}var Bte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function My(e){return t=>t===null?e:`${e} of ${t}`}function kte(e){if(typeof e=="function")return[e,null];const n={mean:zte,max:jte,count:Hte,first:Gte,last:Zte,sum:Wte,min:Vte,median:Ute}[e];if(!n)throw new Error(`Unknown reducer: ${e}.`);return n()}function zte(){const e=(n,r)=>oE(n,i=>+r[i]),t=My("mean");return[e,t]}function Ute(){const e=(n,r)=>zP(n,i=>+r[i]),t=My("median");return[e,t]}function jte(){const e=(n,r)=>yl(n,i=>+r[i]),t=My("max");return[e,t]}function Vte(){const e=(n,r)=>Xp(n,i=>+r[i]),t=My("min");return[e,t]}function Hte(){const e=(n,r)=>n.length,t=My("count");return[e,t]}function Wte(){const e=(n,r)=>Sp(n,i=>+r[i]),t=My("sum");return[e,t]}function Gte(){const e=(n,r)=>r[n[0]],t=My("first");return[e,t]}function Zte(){const e=(n,r)=>r[n[n.length-1]],t=My("last");return[e,t]}const UP=(e={})=>{const{groupBy:t}=e,n=Bte(e,["groupBy"]);return(r,i)=>{const{data:s,encode:l}=i,c=t(r,i);if(!c)return[r,i];const h=(T,M)=>{if(T)return T;const{from:R}=M;if(!R)return T;const[,L]=tl(l,R);return L},p=Object.entries(n).map(([T,M])=>{const[R,L]=kte(M),[N,z]=tl(l,T),H=h(z,M),X=c.map(Y=>R(Y,N!=null?N:s));return[T,Object.assign(Object.assign({},Iq(X,(L==null?void 0:L(H))||H)),{aggregate:!0})]}),v=Object.keys(l).map(T=>{const[M,R]=tl(l,T),L=c.map(N=>M[N[0]]);return[T,ku(L,R)]}),y=c.map(T=>s[T[0]]);return[og(c),ui({},i,{data:y,encode:Object.fromEntries([...v,...p])})]}};UP.props={};var Xte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const b7="thresholds";function Yte(e){const[t,n]=cg(e);return Math.min(200,Tte(e,t,n))}const jP=(e={})=>{const{groupChannels:t=["color"],binChannels:n=["x","y"]}=e,r=Xte(e,["groupChannels","binChannels"]),i={},s=(l,c)=>{const{encode:h}=c,p=n.map(M=>{const[R]=tl(h,M);return R}),v=xo(r,b7),y=l.filter(M=>p.every(R=>iu(R[M]))),b=[...t.map(M=>{const[R]=tl(h,M);return R}).filter(iu).map(M=>R=>M[R]),...n.map((M,R)=>{const L=p[R],N=v[M]||Yte(L),z=Lte().thresholds(N).value(X=>+L[X])(y),H=new Map(z.flatMap(X=>{const{x0:Y,x1:ne}=X,ve=`${Y},${ne}`;return X.map(Ee=>[Ee,ve])}));return i[M]=H,X=>H.get(X)})],T=M=>b.map(R=>R(M)).join("-");return Array.from(Fu(y,T).values())};return UP(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([l])=>!l.startsWith(b7)))),Object.fromEntries(n.flatMap(l=>{const c=([p])=>+i[l].get(p).split(",")[0],h=([p])=>+i[l].get(p).split(",")[1];return h.from=l,[[l,c],[`${l}1`,h]]}))),{groupBy:s}))};jP.props={};const x7=(e={})=>{const{thresholds:t}=e;return jP(Object.assign(Object.assign({},e),{thresholdsX:t,groupChannels:["color"],binChannels:["x"]}))};x7.props={};var $te=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const E7=(e={})=>{const{groupBy:t="x",reverse:n=!1,orderBy:r,padding:i}=e,s=$te(e,["groupBy","reverse","orderBy","padding"]);return(l,c)=>{const{data:h,encode:p,scale:v}=c,{series:y}=v,[b]=tl(p,"y"),[T]=G2(p,"series","color"),M=v7(T,y),R=Oy(t,l,c),N=d7(r)(h,b,T);N&&p7(R,N);const z=new Array(l.length);for(const H of R){n&&H.reverse();for(let X=0;X<H.length;X++)z[H[X]]=M[X]}return[l,ui({},c,{scale:{series:{domain:M,paddingInner:i}},encode:{series:ku(z)}})]}};E7.props={};function cA(e,t,n){if(e===null)return[-.5,.5];const r=v7(e,t),s=new wy({domain:r,range:[0,1],padding:n}).getBandWidth();return[-s/2,s/2]}function fA(e,t,n){return t*(1-e)+n*e}const S7=(e={})=>{const{padding:t=0,paddingX:n=t,paddingY:r=t,random:i=Math.random}=e;return(s,l)=>{const{encode:c,scale:h}=l,{x:p,y:v}=h,[y]=tl(c,"x"),[b]=tl(c,"y"),T=cA(y,p,n),M=cA(b,v,r),R=s.map(()=>fA(i(),...M)),L=s.map(()=>fA(i(),...T));return[s,ui({scale:{x:{padding:.5},y:{padding:.5}}},l,{encode:{dy:ku(R),dx:ku(L)}})]}};S7.props={};const w7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{x:c}=l,[h]=tl(s,"x"),p=cA(h,c,t),v=r.map(()=>fA(n(),...p));return[r,ui({scale:{x:{padding:.5}}},i,{encode:{dx:ku(v)}})]}};w7.props={};const T7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{y:c}=l,[h]=tl(s,"y"),p=cA(h,c,t),v=r.map(()=>fA(n(),...p));return[r,ui({scale:{y:{padding:.5}}},i,{encode:{dy:ku(v)}})]}};T7.props={};var qte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const A7=(e={})=>{const{groupBy:t="x"}=e;return(n,r)=>{const{encode:i}=r,{x:s}=i,l=qte(i,["x"]),c=Object.entries(l).filter(([b])=>b.startsWith("y")).map(([b])=>[b,tl(i,b)[0]]),h=c.map(([b])=>[b,new Array(n.length)]),p=Oy(t,n,r),v=new Array(p.length);for(let b=0;b<p.length;b++){const M=p[b].flatMap(N=>c.map(([,z])=>+z[N])),[R,L]=cg(M);v[b]=(R+L)/2}const y=Math.max(...v);for(let b=0;b<p.length;b++){const T=y-v[b],M=p[b];for(const R of M)for(let L=0;L<c.length;L++){const[,N]=c[L],[,z]=h[L];z[R]=+N[R]+T}}return[n,ui({},r,{encode:Object.fromEntries(h.map(([b,T])=>[b,ku(T,tl(i,b)[1])]))})]}};A7.props={};const C7=(e={})=>{const{groupBy:t="x",series:n=!0}=e;return(r,i)=>{const{encode:s}=i,[l]=tl(s,"y"),[c,h]=tl(s,"y1"),[p]=n?G2(s,"series","color"):tl(s,"color"),v=Oy(t,r,i),y=new Array(r.length);for(const b of v){const T=b.map(M=>+l[M]);for(let M=0;M<b.length;M++){const R=b[M],L=Math.max(...T.filter((N,z)=>z!==M));y[R]=l[R]>L?L:l[R]}}return[r,ui({},i,{encode:{y1:ku(y,h)}})]}};C7.props={};const O7=e=>{const{groupBy:t=["x"],reducer:n=(l,c)=>c[l[0]],orderBy:r=null,reverse:i=!1,duration:s}=e;return(l,c)=>{const{encode:h}=c,v=(Array.isArray(t)?t:[t]).map(L=>[L,tl(h,L)[0]]);if(v.length===0)return[l,c];let y=[l];for(const[,L]of v){const N=[];for(const z of y){const H=Array.from(Fu(z,X=>L[X]).values());N.push(...H)}y=N}if(r){const[L]=tl(h,r);L&&y.sort((N,z)=>n(N,L)-n(z,L)),i&&y.reverse()}const b=(s||3e3)/y.length,[T]=s?[Ey(l,b)]:G2(h,"enterDuration",Ey(l,b)),[M]=G2(h,"enterDelay",Ey(l,0)),R=new Array(l.length);for(let L=0,N=0;L<y.length;L++){const z=y[L],H=yl(z,X=>+T[X]);for(const X of z)R[X]=+M[X]+N;N+=H}return[l,ui({},c,{encode:{enterDuration:DT(T),enterDelay:DT(R)}})]}};O7.props={};var Kte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Qte(e){return typeof e=="function"?e:{min:(n,r)=>Xp(n,i=>r[+i]),max:(n,r)=>yl(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>oE(n,i=>r[+i]),median:(n,r)=>zP(n,i=>r[+i]),sum:(n,r)=>Sp(n,i=>r[+i]),deviation:(n,r)=>y7(n,i=>r[+i])}[e]||yl}const M7=(e={})=>{const{groupBy:t="x",basis:n="max"}=e;return(r,i)=>{const{encode:s,tooltip:l}=i,{x:c}=s,h=Kte(s,["x"]),p=Object.entries(h).filter(([R])=>R.startsWith("y")).map(([R])=>[R,tl(s,R)[0]]),[,v]=p.find(([R])=>R==="y"),y=p.map(([R])=>[R,new Array(r.length)]),b=Oy(t,r,i),T=Qte(n);for(const R of b){const L=T(R,v);for(const N of R)for(let z=0;z<p.length;z++){const[,H]=p[z],[,X]=y[z];X[N]=+H[N]/L}}const M=gv(l)||(l==null?void 0:l.items)&&(l==null?void 0:l.items.length)!==0;return[r,ui({},i,Object.assign({encode:Object.fromEntries(y.map(([R,L])=>[R,ku(L,tl(s,R)[1])]))},!M&&s.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};M7.props={};function R7(e,t){return[e[0]]}function Jte(e,t){const n=e.length-1;return[e[n]]}function ene(e,t){const n=Eb(e,r=>t[r]);return[e[n]]}function tne(e,t){const n=tA(e,r=>t[r]);return[e[n]]}function nne(e){return typeof e=="function"?e:{first:R7,last:Jte,max:ene,min:tne}[e]||R7}const hA=(e={})=>{const{groupBy:t="series",channel:n,selector:r}=e;return(i,s)=>{const{encode:l}=s,c=Oy(t,i,s),[h]=tl(l,n),p=nne(r);return[c.flatMap(v=>p(v,h)),s]}};hA.props={};var rne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const P7=(e={})=>{const{selector:t}=e,n=rne(e,["selector"]);return hA(Object.assign({channel:"x",selector:t},n))};P7.props={};var ine=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const I7=(e={})=>{const{selector:t}=e,n=ine(e,["selector"]);return hA(Object.assign({channel:"y",selector:t},n))};I7.props={};var one=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const fE=(e={})=>{const{channels:t=["x","y"]}=e,n=one(e,["channels"]),r=(i,s)=>Oy(t,i,s);return UP(Object.assign(Object.assign({},n),{groupBy:r}))};fE.props={};const L7=(e={})=>fE(Object.assign(Object.assign({},e),{channels:["x","color","series"]}));L7.props={};const D7=(e={})=>fE(Object.assign(Object.assign({},e),{channels:["y","color","series"]}));D7.props={};const N7=(e={})=>fE(Object.assign(Object.assign({},e),{channels:["color"]}));N7.props={};function ane(e,t,n){return(t.length!==2?hg(c2(e,t,n),([r,i],[s,l])=>kc(i,l)||kc(r,s)):hg(Fu(e,n),([r,i],[s,l])=>t(i,l)||kc(r,s))).map(([r])=>r)}var F7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function sne(e,t,n){const{by:r=e,reducer:i="max"}=t,[s]=tl(n,r);if(typeof i=="function")return l=>i(l,s);if(i==="max")return l=>yl(l,c=>+s[c]);if(i==="min")return l=>Xp(l,c=>+s[c]);if(i==="sum")return l=>Sp(l,c=>+s[c]);if(i==="median")return l=>zP(l,c=>+s[c]);if(i==="mean")return l=>oE(l,c=>+s[c]);if(i==="first")return l=>s[l[0]];if(i==="last")return l=>s[l[l.length-1]];throw new Error(`Unknown reducer: ${i}`)}function lne(e,t,n){const{reverse:r,channel:i}=n,{encode:s}=t,[l]=tl(s,i),c=hg(e,h=>l[h]);return r&&c.reverse(),[c,t]}function une(e,t,n){if(!Array.isArray(n))return e;const r=new Set(n);return e.filter(i=>r.has(t[i]))}function cne(e,t,n){var r;const{reverse:i,slice:s,channel:l}=n,c=F7(n,["reverse","slice","channel"]),{encode:h,scale:p={}}=t,v=(r=p[l])===null||r===void 0?void 0:r.domain,[y]=tl(h,l),b=sne(l,c,h),T=une(e,y,v),M=ane(T,b,N=>y[N]);i&&M.reverse();const R=typeof s=="number"?[0,s]:s,L=s?M.slice(...R):M;return[e,ui(t,{scale:{[l]:{domain:L}}})]}const dA=(e={})=>{const{reverse:t=!1,slice:n,channel:r,ordinal:i=!0}=e,s=F7(e,["reverse","slice","channel","ordinal"]);return(l,c)=>i?cne(l,c,Object.assign({reverse:t,slice:n,channel:r},s)):lne(l,c,Object.assign({reverse:t,slice:n,channel:r},s))};dA.props={};const B7=(e={})=>dA(Object.assign(Object.assign({},e),{channel:"x"}));B7.props={};const k7=(e={})=>dA(Object.assign(Object.assign({},e),{channel:"y"}));k7.props={};const z7=(e={})=>dA(Object.assign(Object.assign({},e),{channel:"color"}));z7.props={};function fne(e,t){return typeof t=="string"?e.map(n=>n[t]):e.map(t)}function hne(e,t){if(typeof e=="function")return n=>e(n,t);if(e==="sum")return n=>Sp(n,r=>+t[r]);throw new Error(`Unknown reducer: ${e}`)}const U7=(e={})=>{const{field:t,channel:n="y",reducer:r="sum"}=e;return(i,s)=>{const{data:l,encode:c}=s,[h]=tl(c,"x"),p=t?fne(l,t):tl(c,n)[0],v=hne(r,p),y=nb(i,v,b=>h[b]).map(b=>b[1]);return[i,ui({},s,{scale:{x:{flex:y}}})]}};U7.props={};function dne(e){const{padding:t=0,direction:n="col"}=e;return(r,i,s)=>{const l=r.length;if(l===0)return[];const{innerWidth:c,innerHeight:h}=s,p=h/c;let v=Math.ceil(Math.sqrt(i/p)),y=c/v,b=Math.ceil(i/v),T=b*y;for(;T>h;)v=v+1,y=c/v,b=Math.ceil(i/v),T=b*y;const M=h-b*y,R=b<=1?0:M/(b-1),[L,N]=b<=1?[(c-l*y)/(l-1),(h-y)/2]:[0,0];return r.map((z,H)=>{const[X,Y,ne,ve]=PM(z),Ee=n==="col"?H%v:Math.floor(H/b),Ie=n==="col"?Math.floor(H/v):H%b,Ye=Ee*y,$e=(b-Ie-1)*y+M,St=(y-t)/ne,Qe=(y-t)/ve,lt=Ye-X+L*Ee+1/2*t,ht=$e-Y-R*Ie-N+1/2*t;return`translate(${lt}, ${ht}) scale(${St}, ${Qe})`})}}const j7=e=>(t,n)=>[t,ui({},n,{modifier:dne(e),axis:!1})];j7.props={};function pne(e,t,n,r){const i=e.length;if(r>=i||r===0)return e;const s=T=>t[e[T]]*1,l=T=>n[e[T]]*1,c=[],h=(i-2)/(r-2);let p=0,v,y,b;c.push(p);for(let T=0;T<r-2;T++){let M=0,R=0,L=Math.floor((T+1)*h)+1,N=Math.floor((T+2)*h)+1;N=Math.min(N,i);const z=N-L;for(;L<N;L++)M+=s(L),R+=l(L);M/=z,R/=z;let H=Math.floor((T+0)*h)+1;const X=Math.floor((T+1)*h)+1,Y=[s(p),l(p)];for(v=y=-1;H<X;H++)y=Math.abs((Y[0]-M)*(s(H)-Y[1])-(Y[0]-l(H))*(R-Y[0]))*.5,y>v&&(v=y,b=H);c.push(b),p=b}return c.push(i-1),c.map(T=>e[T])}function vne(e){if(typeof e=="function")return e;if(e==="lttb")return pne;const t={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,s)=>[r[tA(r,l=>s[l])]],max:(r,i,s)=>[r[Eb(r,l=>s[l])]],median:(r,i,s)=>[r[Fte(r,l=>s[l])]]},n=t[e]||t.median;return(r,i,s,l)=>{const c=Math.max(1,Math.floor(r.length/l));return mne(r,c).flatMap(p=>n(p,i,s))}}function mne(e,t){const n=e.length,r=[];let i=0;for(;i<n;)r.push(e.slice(i,i+=t));return r}const V7=(e={})=>{const{strategy:t="median",thresholds:n=2e3,groupBy:r=["series","color"]}=e,i=vne(t);return(s,l)=>{const{encode:c}=l,h=Oy(r,s,l),[p]=tl(c,"x"),[v]=tl(c,"y");return[h.flatMap(y=>i(y,p,v,n)),l]}};V7.props={};function gne(e){return typeof e=="object"?[e.value,e.ordinal]:[e,!0]}const H7=(e={})=>(t,n)=>{const{encode:r,data:i}=n,s=Object.entries(e).map(([v,y])=>{const[b]=tl(r,v);if(!b)return null;const[T,M=!0]=gne(y);if(typeof T=="function")return R=>T(b[R]);if(M){const R=Array.isArray(T)?T:[T];return R.length===0?null:L=>R.includes(b[L])}else{const[R,L]=T;return N=>b[N]>=R&&b[N]<=L}}).filter(iu);if(s.length===0)return[t,n];const l=v=>s.every(y=>y(v)),c=t.filter(l),h=c.map((v,y)=>y),p=Object.entries(r).map(([v,y])=>[v,Object.assign(Object.assign({},y),{value:h.map(b=>y.value[c[b]]).filter(b=>b!==void 0)})]);return[h,ui({},n,{encode:Object.fromEntries(p),data:c.map(v=>i[v])})]};H7.props={};var W7={},VP={},HP=34,hE=10,WP=13;function G7(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function yne(e,t){var n=G7(e);return function(r,i){return t(n(r),i,e)}}function Z7(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Tp(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function _ne(e){return e<0?"-"+Tp(-e,6):e>9999?"+"+Tp(e,6):Tp(e,4)}function bne(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":_ne(e.getUTCFullYear(),4)+"-"+Tp(e.getUTCMonth()+1,2)+"-"+Tp(e.getUTCDate(),2)+(i?"T"+Tp(t,2)+":"+Tp(n,2)+":"+Tp(r,2)+"."+Tp(i,3)+"Z":r?"T"+Tp(t,2)+":"+Tp(n,2)+":"+Tp(r,2)+"Z":n||t?"T"+Tp(t,2)+":"+Tp(n,2)+"Z":"")}function xne(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(y,b){var T,M,R=i(y,function(L,N){if(T)return T(L,N-1);M=L,T=b?yne(L,b):G7(L)});return R.columns=M||[],R}function i(y,b){var T=[],M=y.length,R=0,L=0,N,z=M<=0,H=!1;y.charCodeAt(M-1)===hE&&--M,y.charCodeAt(M-1)===WP&&--M;function X(){if(z)return VP;if(H)return H=!1,W7;var ne,ve=R,Ee;if(y.charCodeAt(ve)===HP){for(;R++<M&&y.charCodeAt(R)!==HP||y.charCodeAt(++R)===HP;);return(ne=R)>=M?z=!0:(Ee=y.charCodeAt(R++))===hE?H=!0:Ee===WP&&(H=!0,y.charCodeAt(R)===hE&&++R),y.slice(ve+1,ne-1).replace(/""/g,'"')}for(;R<M;){if((Ee=y.charCodeAt(ne=R++))===hE)H=!0;else if(Ee===WP)H=!0,y.charCodeAt(R)===hE&&++R;else if(Ee!==n)continue;return y.slice(ve,ne)}return z=!0,y.slice(ve,M)}for(;(N=X())!==VP;){for(var Y=[];N!==W7&&N!==VP;)Y.push(N),N=X();b&&(Y=b(Y,L++))==null||T.push(Y)}return T}function s(y,b){return y.map(function(T){return b.map(function(M){return v(T[M])}).join(e)})}function l(y,b){return b==null&&(b=Z7(y)),[b.map(v).join(e)].concat(s(y,b)).join(`
`)}function c(y,b){return b==null&&(b=Z7(y)),s(y,b).join(`
`)}function h(y){return y.map(p).join(`
`)}function p(y){return y.map(v).join(e)}function v(y){return y==null?"":y instanceof Date?bne(y):t.test(y+="")?'"'+y.replace(/"/g,'""')+'"':y}return{parse:r,parseRows:i,format:l,formatBody:c,formatRows:h,formatRow:p,formatValue:v}}function Ene(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Sne&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const Sne=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var wne=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const X7=e=>{const{value:t,format:n=t.split(".").pop(),delimiter:r=",",autoType:i=!0}=e;return()=>wne(void 0,void 0,void 0,function*(){const s=yield fetch(t);if(n==="csv"){const l=yield s.text();return xne(r).parse(l,i?Ene:rg)}else if(n==="json")return yield s.json();throw new Error(`Unknown format: ${n}.`)})};X7.props={};const Y7=e=>{const{value:t}=e;return()=>t};Y7.props={};function Tne(e,t){return e.map(n=>{if(Array.isArray(n)){const[r,i=t]=n;return[r,i]}return[n,t]})}const $7=e=>{const{fields:t=[]}=e,n=Tne(t,!0);return r=>{const i=(s,l)=>n.reduce((c,[h,p=!0])=>c!==0?c:p?s[h]<l[h]?-1:+(s[h]!==l[h]):s[h]>l[h]?-1:+(s[h]!==l[h]),0);return[...r].sort(i)}};$7.props={};function V0e(e){return e!=null&&!Number.isNaN(e)}const q7=e=>{const{callback:t}=e;return n=>Array.isArray(n)?[...n].sort(t):n};q7.props={};function Ane(e){return e!=null&&!Number.isNaN(e)}const K7=e=>{const{callback:t=Ane}=e;return n=>n.filter(t)};K7.props={};function Cne(e,t=[]){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}const Q7=e=>{const{fields:t}=e;return n=>n.map(r=>Cne(r,t))};Q7.props={};function One(e){return Object.keys(e).length===0}const J7=e=>t=>{if(!e||One(e))return t;const n=r=>Object.entries(r).reduce((i,[s,l])=>(i[e[s]||s]=l,i),{});return t.map(n)};J7.props={};function Mne(e){return!e||Object.keys(e).length===0}const e9=e=>{const{fields:t,key:n="key",value:r="value"}=e;return i=>Mne(t)?i:i.flatMap(s=>t.map(l=>Object.assign(Object.assign({},s),{[n]:l,[r]:s[l]})))};e9.props={};const t9=e=>{const{start:t,end:n}=e;return r=>r.slice(t,n)};t9.props={};const n9=e=>{const{callback:t=rg}=e;return n=>t(n)};n9.props={};const r9=e=>{const{callback:t=rg}=e;return n=>Array.isArray(n)?n.map(t):n};r9.props={};function i9(e){return typeof e=="string"?t=>t[e]:e}const o9=e=>{const{join:t,on:n,select:r=[],as:i=r,unknown:s=NaN}=e,[l,c]=n,h=i9(c),p=i9(l),v=c2(t,([y])=>y,y=>h(y));return y=>y.map(b=>{const T=v.get(p(b));return Object.assign(Object.assign({},b),r.reduce((M,R,L)=>(M[i[L]]=T?T[R]:s,M),{}))})};o9.props={};var Rne=D(53843),Pne=D.n(Rne);function H0e(e){return e!=null&&!Number.isNaN(e)}const a9=e=>{const{field:t,groupBy:n,as:r=["y","size"],min:i,max:s,size:l=10,width:c}=e,[h,p]=r;return v=>Array.from(Fu(v,b=>n.map(T=>b[T]).join("-")).values()).map(b=>{const T=Pne().create(b.map(L=>L[t]),{min:i,max:s,size:l,width:c}),M=T.map(L=>L.x),R=T.map(L=>L.y);return Object.assign(Object.assign({},b[0]),{[h]:M,[p]:R})})};a9.props={};const s9=()=>e=>(console.log("G2 data section:",e),e);s9.props={};function GP(e){const{min:t,max:n}=e;return[[t[0],t[1]],[n[0],n[1]]]}function l9(e,t){const[n,r]=e,[i,s]=t;return n>=i[0]&&n<=s[0]&&r>=i[1]&&r<=s[1]}function Ine(e,t){const[n,r]=e;return!(l9(n,t)&&l9(r,t))}function Lne(e,t){const[n,r]=e,[i,s]=t;return n[0]<s[0]&&r[0]>i[0]&&n[1]<s[1]&&r[1]>i[1]}const Dne=e=>{const{priority:t}=e;return n=>{const r=[];return t&&n.sort(t),n.forEach(i=>{VM(i);const s=i.getLocalBounds();r.some(c=>Lne(GP(s),GP(c.getLocalBounds())))?jM(i):r.push(i)}),n}};function Nne([e,t],[n,r]){return r>e&&t>n}function pA(){const e=new Map;return[r=>e.get(r),(r,i)=>e.set(r,i)]}function Fne(e){const t=e.cloneNode(!0),n=t.getElementById("connector");n&&t.removeChild(n);const{min:r,max:i}=t.getRenderBounds();return t.destroy(),{min:r,max:i}}const Bne=e=>{const{maxIterations:t=10,maxError:n=.1,padding:r=1}=e;return i=>{const s=i.length;if(s<=1)return i;const[l,c]=pA(),[h,p]=pA(),[v,y]=pA(),[b,T]=pA();for(const M of i){const{min:R,max:L}=Fne(M),[N,z]=R,[H,X]=L;c(M,z),p(M,z),y(M,X-z),T(M,[N,H])}for(let M=0;M<t;M++){i.sort((L,N)=>kc(h(L),h(N)));let R=0;for(let L=0;L<s-1;L++){const N=i[L];let z=L+1,H;for(;(H=i[z])&&!Nne(b(N),b(H));)z+=1;if(H){const X=h(N),Y=v(N),ne=h(H),ve=ne-(X+Y);if(ve<r){const Ee=(r-ve)/2;R=Math.max(R,Ee),p(N,X-Ee),p(H,ne+Ee)}}}if(R<n)break}for(const M of i)M.style.y+=h(M)-l(M);return i}},kne=()=>e=>(e.forEach(t=>{VM(t);const n=t.attr("bounds"),r=t.getLocalBounds();Ine(GP(r),n)&&jM(t)}),e);function zne(e){return typeof e=="object"?e:uv(e)}function ZP(e){let t=e/255;return t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),t}function u9(e,t,n){return .2126*ZP(e)+.7152*ZP(t)+.0722*ZP(n)}function c9(e,t){const{r:n,g:r,b:i}=e,{r:s,g:l,b:c}=t,h=u9(n,r,i),p=u9(s,l,c);return(Math.max(h,p)+.05)/(Math.min(h,p)+.05)}function Une(e,t){const n=Eb(t,r=>c9(e,zne(r)));return t[n]}const jne=e=>{const{threshold:t=4.5,palette:n=["#000","#fff"]}=e;return r=>(r.forEach(i=>{const s=i.attr("dependentElement").parsedStyle.fill,l=i.parsedStyle.fill;c9(l,s)<t&&i.attr("fill",Une(s,n))}),r)};function Vne(){return{"data.fetch":X7,"data.inline":Y7,"data.sortBy":$7,"data.sort":q7,"data.filter":K7,"data.pick":Q7,"data.rename":J7,"data.fold":e9,"data.slice":t9,"data.custom":n9,"data.map":r9,"data.join":o9,"data.kde":a9,"data.log":s9,"transform.stackY":m7,"transform.binX":x7,"transform.bin":jP,"transform.dodgeX":E7,"transform.jitter":S7,"transform.jitterX":w7,"transform.jitterY":T7,"transform.symmetryY":A7,"transform.diffY":C7,"transform.stackEnter":O7,"transform.normalizeY":M7,"transform.select":hA,"transform.selectX":P7,"transform.selectY":I7,"transform.groupX":L7,"transform.groupY":D7,"transform.groupColor":N7,"transform.group":fE,"transform.sortX":B7,"transform.sortY":k7,"transform.sortColor":z7,"transform.flexX":U7,"transform.pack":j7,"transform.sample":V7,"transform.filter":H7,"coordinate.cartesian":q6,"coordinate.polar":I_,"coordinate.transpose":xR,"coordinate.theta":K6,"coordinate.parallel":ER,"coordinate.fisheye":Q6,"coordinate.radial":g2,"coordinate.radar":J6,"encode.constant":eN,"encode.field":tN,"encode.transform":nN,"encode.column":rN,"mark.interval":fN,"mark.rect":dN,"mark.line":zN,"mark.point":AF,"mark.text":PF,"mark.cell":LF,"mark.area":jF,"mark.link":ZR,"mark.image":tB,"mark.polygon":aB,"mark.box":cB,"mark.vector":hB,"mark.lineX":mB,"mark.lineY":_B,"mark.connector":SB,"mark.range":AB,"mark.rangeX":MB,"mark.rangeY":IB,"mark.path":BB,"mark.shape":UB,"mark.density":HB,"mark.heatmap":XB,"palette.category10":YB,"palette.category20":$B,"scale.linear":qB,"scale.ordinal":e8,"scale.band":r8,"scale.identity":i8,"scale.point":o8,"scale.time":C8,"scale.log":M8,"scale.pow":R8,"scale.sqrt":P8,"scale.threshold":I8,"scale.quantile":L8,"scale.quantize":D8,"scale.sequential":N8,"scale.constant":F8,"theme.classic":B8,"theme.classicDark":z8,"theme.academy":U8,"theme.light":oP,"theme.dark":k8,"component.axisX":j8,"component.axisY":V8,"component.legendCategory":sP,"component.legendContinuous":py,"component.legends":W8,"component.title":Z8,"component.sliderX":q8,"component.sliderY":K8,"component.scrollbarX":Q8,"component.scrollbarY":J8,"animation.scaleInX":fP,"animation.scaleOutX":oJ,"animation.scaleInY":ek,"animation.scaleOutY":aJ,"animation.waveIn":tk,"animation.fadeIn":nk,"animation.fadeOut":rk,"animation.zoomIn":sJ,"animation.zoomOut":lJ,"animation.pathIn":ik,"animation.morphing":lk,"animation.growInX":uk,"animation.growInY":ck,"interaction.elementHighlight":JT,"interaction.elementHighlightByX":fk,"interaction.elementHighlightByColor":hk,"interaction.elementSelect":eA,"interaction.elementSelectByX":dk,"interaction.elementSelectByColor":pk,"interaction.fisheye":EJ,"interaction.chartIndex":vk,"interaction.tooltip":Ok,"interaction.legendFilter":$J,"interaction.legendHighlight":qJ,"interaction.brushHighlight":xP,"interaction.brushXHighlight":nee,"interaction.brushYHighlight":ree,"interaction.brushAxisHighlight":hee,"interaction.brushFilter":TP,"interaction.brushXFilter":mee,"interaction.brushYFilter":gee,"interaction.sliderFilter":jk,"interaction.scrollbarFilter":Eee,"interaction.poptip":Wk,"interaction.treemapDrillDown":Hee,"interaction.elementPointMove":$ee,"composition.spaceLayer":o7,"composition.spaceFlex":a7,"composition.facetRect":c7,"composition.repeatMatrix":lte,"composition.facetCircle":pte,"composition.timingKeyframe":h7,"labelTransform.overlapHide":Dne,"labelTransform.overlapDodgeY":Bne,"labelTransform.overflowHide":kne,"labelTransform.contrastReverse":jne}}var dE=e=>e;function vA(e,t){e&&h9.hasOwnProperty(e.type)&&h9[e.type](e,t)}var f9={Feature:function(e,t){vA(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)vA(n[r].geometry,t)}},h9={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){XP(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)XP(n[r],t,0)},Polygon:function(e,t){d9(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)d9(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)vA(n[r],t)}};function XP(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function d9(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)XP(e[n],t,1);t.polygonEnd()}function Gb(e,t){e&&f9.hasOwnProperty(e.type)?f9[e.type](e,t):vA(e,t)}class mg{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],l=t+s,c=Math.abs(t)<Math.abs(s)?t-(l-s):s-(l-t);c&&(n[r++]=c),t=l}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,l=0;if(n>0){for(l=t[--n];n>0&&(r=l,i=t[--n],l=r+i,s=i-(l-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=l+i,i==r-l&&(l=r))}return l}}function W0e(e,t){const n=new mg;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function G0e(e,t){const n=new mg;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}var ns=1e-6,p9=1e-12,Ys=Math.PI,nf=Ys/2,v9=Ys/4,qp=Ys*2,bd=180/Ys,zc=Ys/180,zl=Math.abs,Zb=Math.atan,gg=Math.atan2,ks=Math.cos,mA=Math.ceil,m9=Math.exp,Z0e=Math.floor,X0e=Math.hypot,gA=Math.log,YP=Math.pow,bs=Math.sin,N0=Math.sign||function(e){return e>0?1:e<0?-1:0},Ap=Math.sqrt,$P=Math.tan;function g9(e){return e>1?0:e<-1?Ys:Math.acos(e)}function F0(e){return e>1?nf:e<-1?-nf:Math.asin(e)}function Y0e(e){return(e=bs(e/2))*e}function B0(){}var qP=new mg,KP=new mg,y9,_9,QP,JP,Ry={point:B0,lineStart:B0,lineEnd:B0,polygonStart:function(){Ry.lineStart=Hne,Ry.lineEnd=Gne},polygonEnd:function(){Ry.lineStart=Ry.lineEnd=Ry.point=B0,qP.add(zl(KP)),KP=new mg},result:function(){var e=qP/2;return qP=new mg,e}};function Hne(){Ry.point=Wne}function Wne(e,t){Ry.point=b9,y9=QP=e,_9=JP=t}function b9(e,t){KP.add(JP*e-QP*t),QP=e,JP=t}function Gne(){b9(y9,_9)}var x9=Ry,Xb=1/0,yA=Xb,pE=-Xb,_A=pE,Zne={point:Xne,lineStart:B0,lineEnd:B0,polygonStart:B0,polygonEnd:B0,result:function(){var e=[[Xb,yA],[pE,_A]];return pE=_A=-(yA=Xb=1/0),e}};function Xne(e,t){e<Xb&&(Xb=e),e>pE&&(pE=e),t<yA&&(yA=t),t>_A&&(_A=t)}var bA=Zne,e5=0,t5=0,vE=0,xA=0,EA=0,Yb=0,n5=0,r5=0,mE=0,E9,S9,pm,vm,xv={point:r1,lineStart:w9,lineEnd:T9,polygonStart:function(){xv.lineStart=qne,xv.lineEnd=Kne},polygonEnd:function(){xv.point=r1,xv.lineStart=w9,xv.lineEnd=T9},result:function(){var e=mE?[n5/mE,r5/mE]:Yb?[xA/Yb,EA/Yb]:vE?[e5/vE,t5/vE]:[NaN,NaN];return e5=t5=vE=xA=EA=Yb=n5=r5=mE=0,e}};function r1(e,t){e5+=e,t5+=t,++vE}function w9(){xv.point=Yne}function Yne(e,t){xv.point=$ne,r1(pm=e,vm=t)}function $ne(e,t){var n=e-pm,r=t-vm,i=Ap(n*n+r*r);xA+=i*(pm+e)/2,EA+=i*(vm+t)/2,Yb+=i,r1(pm=e,vm=t)}function T9(){xv.point=r1}function qne(){xv.point=Qne}function Kne(){A9(E9,S9)}function Qne(e,t){xv.point=A9,r1(E9=pm=e,S9=vm=t)}function A9(e,t){var n=e-pm,r=t-vm,i=Ap(n*n+r*r);xA+=i*(pm+e)/2,EA+=i*(vm+t)/2,Yb+=i,i=vm*e-pm*t,n5+=i*(pm+e),r5+=i*(vm+t),mE+=i*3,r1(pm=e,vm=t)}var C9=xv;function O9(e){this._context=e}O9.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,qp);break}}},result:B0};var i5=new mg,o5,M9,R9,gE,yE,SA={point:B0,lineStart:function(){SA.point=Jne},lineEnd:function(){o5&&P9(M9,R9),SA.point=B0},polygonStart:function(){o5=!0},polygonEnd:function(){o5=null},result:function(){var e=+i5;return i5=new mg,e}};function Jne(e,t){SA.point=P9,M9=gE=e,R9=yE=t}function P9(e,t){gE-=e,yE-=t,i5.add(Ap(gE*gE+yE*yE)),gE=e,yE=t}var I9=SA;let L9,wA,D9,N9;class F9{constructor(t){this._append=t==null?B9:ere(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==D9||this._append!==wA){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,D9=r,wA=this._append,N9=this._,this._=i}this._+=N9;break}}}result(){const t=this._;return this._="",t.length?t:null}}function B9(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ere(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return B9;if(t!==L9){const n=Ef(10,t);L9=t,wA=function(i){let s=1;this._+=i[0];for(const l=i.length;s<l;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return wA}function k9(e,t){let n=3,r=4.5,i,s;function l(c){return c&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Gb(c,i(s))),s.result()}return l.area=function(c){return Gb(c,i(x9)),x9.result()},l.measure=function(c){return Gb(c,i(I9)),I9.result()},l.bounds=function(c){return Gb(c,i(bA)),bA.result()},l.centroid=function(c){return Gb(c,i(C9)),C9.result()},l.projection=function(c){return arguments.length?(i=c==null?(e=null,dE):(e=c).stream,l):e},l.context=function(c){return arguments.length?(s=c==null?(t=null,new F9(n)):new O9(t=c),typeof r!="function"&&s.pointRadius(r),l):t},l.pointRadius=function(c){return arguments.length?(r=typeof c=="function"?c:(s.pointRadius(+c),+c),l):r},l.digits=function(c){if(!arguments.length)return n;if(c==null)n=null;else{const h=Math.floor(c);if(!(h>=0))throw new RangeError(`invalid digits: ${c}`);n=h}return t===null&&(s=new F9(n)),l},l.projection(e).digits(n).context(t)}function $b(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function z9(e,t,n){var r=$b(e,t-ns,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function U9(e,t,n){var r=$b(e,t-ns,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function tre(){var e,t,n,r,i,s,l,c,h=10,p=h,v=90,y=360,b,T,M,R,L=2.5;function N(){return{type:"MultiLineString",coordinates:z()}}function z(){return $b(mA(r/v)*v,n,v).map(M).concat($b(mA(c/y)*y,l,y).map(R)).concat($b(mA(t/h)*h,e,h).filter(function(H){return zl(H%v)>ns}).map(b)).concat($b(mA(s/p)*p,i,p).filter(function(H){return zl(H%y)>ns}).map(T))}return N.lines=function(){return z().map(function(H){return{type:"LineString",coordinates:H}})},N.outline=function(){return{type:"Polygon",coordinates:[M(r).concat(R(l).slice(1),M(n).reverse().slice(1),R(c).reverse().slice(1))]}},N.extent=function(H){return arguments.length?N.extentMajor(H).extentMinor(H):N.extentMinor()},N.extentMajor=function(H){return arguments.length?(r=+H[0][0],n=+H[1][0],c=+H[0][1],l=+H[1][1],r>n&&(H=r,r=n,n=H),c>l&&(H=c,c=l,l=H),N.precision(L)):[[r,c],[n,l]]},N.extentMinor=function(H){return arguments.length?(t=+H[0][0],e=+H[1][0],s=+H[0][1],i=+H[1][1],t>e&&(H=t,t=e,e=H),s>i&&(H=s,s=i,i=H),N.precision(L)):[[t,s],[e,i]]},N.step=function(H){return arguments.length?N.stepMajor(H).stepMinor(H):N.stepMinor()},N.stepMajor=function(H){return arguments.length?(v=+H[0],y=+H[1],N):[v,y]},N.stepMinor=function(H){return arguments.length?(h=+H[0],p=+H[1],N):[h,p]},N.precision=function(H){return arguments.length?(L=+H,b=z9(s,i,90),T=U9(t,e,L),M=z9(c,l,90),R=U9(r,n,L),N):L},N.extentMajor([[-180,-90+ns],[180,90-ns]]).extentMinor([[-180,-80-ns],[180,80+ns]])}function nre(){return tre()()}function j9(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:B0,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function TA(e,t){return zl(e[0]-t[0])<ns&&zl(e[1]-t[1])<ns}function AA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function V9(e,t,n,r,i){var s=[],l=[],c,h;if(e.forEach(function(M){if(!((R=M.length-1)<=0)){var R,L=M[0],N=M[R],z;if(TA(L,N)){if(!L[2]&&!N[2]){for(i.lineStart(),c=0;c<R;++c)i.point((L=M[c])[0],L[1]);i.lineEnd();return}N[0]+=2*ns}s.push(z=new AA(L,M,null,!0)),l.push(z.o=new AA(L,null,z,!1)),s.push(z=new AA(N,M,null,!1)),l.push(z.o=new AA(N,null,z,!0))}}),!!s.length){for(l.sort(t),H9(s),H9(l),c=0,h=l.length;c<h;++c)l[c].e=n=!n;for(var p=s[0],v,y;;){for(var b=p,T=!0;b.v;)if((b=b.n)===p)return;v=b.z,i.lineStart();do{if(b.v=b.o.v=!0,b.e){if(T)for(c=0,h=v.length;c<h;++c)i.point((y=v[c])[0],y[1]);else r(b.x,b.n.x,1,i);b=b.n}else{if(T)for(v=b.p.z,c=v.length-1;c>=0;--c)i.point((y=v[c])[0],y[1]);else r(b.x,b.p.x,-1,i);b=b.p}b=b.o,v=b.z,T=!T}while(!b.v);i.lineEnd()}}}function H9(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function a5(e){return[gg(e[1],e[0]),F0(e[2])]}function qb(e){var t=e[0],n=e[1],r=ks(n);return[r*ks(t),r*bs(t),bs(n)]}function CA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function OA(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function s5(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function MA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function l5(e){var t=Ap(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function u5(e){return zl(e[0])<=Ys?e[0]:N0(e[0])*((zl(e[0])+Ys)%qp-Ys)}function rre(e,t){var n=u5(t),r=t[1],i=bs(r),s=[bs(n),-ks(n),0],l=0,c=0,h=new mg;i===1?r=nf+ns:i===-1&&(r=-nf-ns);for(var p=0,v=e.length;p<v;++p)if(b=(y=e[p]).length)for(var y,b,T=y[b-1],M=u5(T),R=T[1]/2+v9,L=bs(R),N=ks(R),z=0;z<b;++z,M=X,L=ne,N=ve,T=H){var H=y[z],X=u5(H),Y=H[1]/2+v9,ne=bs(Y),ve=ks(Y),Ee=X-M,Ie=Ee>=0?1:-1,Ye=Ie*Ee,$e=Ye>Ys,St=L*ne;if(h.add(gg(St*Ie*bs(Ye),N*ve+St*ks(Ye))),l+=$e?Ee+Ie*qp:Ee,$e^M>=n^X>=n){var Qe=OA(qb(T),qb(H));l5(Qe);var lt=OA(s,Qe);l5(lt);var ht=($e^Ee>=0?-1:1)*F0(lt[2]);(r>ht||r===ht&&(Qe[0]||Qe[1]))&&(c+=$e^Ee>=0?1:-1)}}return(l<-ns||l<ns&&h<-p9)^c&1}function*ire(e){for(const t of e)yield*t}function W9(e){return Array.from(ire(e))}function G9(e,t,n,r){return function(i){var s=t(i),l=j9(),c=t(l),h=!1,p,v,y,b={point:T,lineStart:R,lineEnd:L,polygonStart:function(){b.point=N,b.lineStart=z,b.lineEnd=H,v=[],p=[]},polygonEnd:function(){b.point=T,b.lineStart=R,b.lineEnd=L,v=W9(v);var X=rre(p,r);v.length?(h||(i.polygonStart(),h=!0),V9(v,are,X,n,i)):X&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),v=p=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function T(X,Y){e(X,Y)&&i.point(X,Y)}function M(X,Y){s.point(X,Y)}function R(){b.point=M,s.lineStart()}function L(){b.point=T,s.lineEnd()}function N(X,Y){y.push([X,Y]),c.point(X,Y)}function z(){c.lineStart(),y=[]}function H(){N(y[0][0],y[0][1]),c.lineEnd();var X=c.clean(),Y=l.result(),ne,ve=Y.length,Ee,Ie,Ye;if(y.pop(),p.push(y),y=null,!!ve){if(X&1){if(Ie=Y[0],(Ee=Ie.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),ne=0;ne<Ee;++ne)i.point((Ye=Ie[ne])[0],Ye[1]);i.lineEnd()}return}ve>1&&X&2&&Y.push(Y.pop().concat(Y.shift())),v.push(Y.filter(ore))}}return b}}function ore(e){return e.length>1}function are(e,t){return((e=e.x)[0]<0?e[1]-nf-ns:nf-e[1])-((t=t.x)[0]<0?t[1]-nf-ns:nf-t[1])}var Z9=G9(function(){return!0},sre,ure,[-Ys,-nf]);function sre(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,l){var c=s>0?Ys:-Ys,h=zl(s-t);zl(h-Ys)<ns?(e.point(t,n=(n+l)/2>0?nf:-nf),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),e.point(s,n),i=0):r!==c&&h>=Ys&&(zl(t-r)<ns&&(t-=r*ns),zl(s-c)<ns&&(s-=c*ns),n=lre(t,n,s,l),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),i=0),e.point(t=s,n=l),r=c},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function lre(e,t,n,r){var i,s,l=bs(e-n);return zl(l)>ns?Zb((bs(t)*(s=ks(r))*bs(n)-bs(r)*(i=ks(t))*bs(e))/(i*s*l)):(t+r)/2}function ure(e,t,n,r){var i;if(e==null)i=n*nf,r.point(-Ys,i),r.point(0,i),r.point(Ys,i),r.point(Ys,0),r.point(Ys,-i),r.point(0,-i),r.point(-Ys,-i),r.point(-Ys,0),r.point(-Ys,i);else if(zl(e[0]-t[0])>ns){var s=e[0]<t[0]?Ys:-Ys;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function X9(e,t,n,r,i,s){if(n){var l=ks(t),c=bs(t),h=r*n;i==null?(i=t+r*qp,s=t-h/2):(i=Y9(l,i),s=Y9(l,s),(r>0?i<s:i>s)&&(i+=r*qp));for(var p,v=i;r>0?v>s:v<s;v-=h)p=a5([l,-c*ks(v),-c*bs(v)]),e.point(p[0],p[1])}}function Y9(e,t){t=qb(t),t[0]-=e,l5(t);var n=g9(-t[1]);return((-t[2]<0?-n:n)+qp-ns)%qp}function $0e(){var e=constant([0,0]),t=constant(90),n=constant(2),r,i,s={point:l};function l(h,p){r.push(h=i(h,p)),h[0]*=degrees,h[1]*=degrees}function c(){var h=e.apply(this,arguments),p=t.apply(this,arguments)*radians,v=n.apply(this,arguments)*radians;return r=[],i=rotateRadians(-h[0]*radians,-h[1]*radians,0).invert,X9(s,p,v,1),h={type:"Polygon",coordinates:[r]},r=i=null,h}return c.center=function(h){return arguments.length?(e=typeof h=="function"?h:constant([+h[0],+h[1]]),c):e},c.radius=function(h){return arguments.length?(t=typeof h=="function"?h:constant(+h),c):t},c.precision=function(h){return arguments.length?(n=typeof h=="function"?h:constant(+h),c):n},c}function cre(e){var t=ks(e),n=2*zc,r=t>0,i=zl(t)>ns;function s(v,y,b,T){X9(T,e,n,b,v,y)}function l(v,y){return ks(v)*ks(y)>t}function c(v){var y,b,T,M,R;return{lineStart:function(){M=T=!1,R=1},point:function(L,N){var z=[L,N],H,X=l(L,N),Y=r?X?0:p(L,N):X?p(L+(L<0?Ys:-Ys),N):0;if(!y&&(M=T=X)&&v.lineStart(),X!==T&&(H=h(y,z),(!H||TA(y,H)||TA(z,H))&&(z[2]=1)),X!==T)R=0,X?(v.lineStart(),H=h(z,y),v.point(H[0],H[1])):(H=h(y,z),v.point(H[0],H[1],2),v.lineEnd()),y=H;else if(i&&y&&r^X){var ne;!(Y&b)&&(ne=h(z,y,!0))&&(R=0,r?(v.lineStart(),v.point(ne[0][0],ne[0][1]),v.point(ne[1][0],ne[1][1]),v.lineEnd()):(v.point(ne[1][0],ne[1][1]),v.lineEnd(),v.lineStart(),v.point(ne[0][0],ne[0][1],3)))}X&&(!y||!TA(y,z))&&v.point(z[0],z[1]),y=z,T=X,b=Y},lineEnd:function(){T&&v.lineEnd(),y=null},clean:function(){return R|(M&&T)<<1}}}function h(v,y,b){var T=qb(v),M=qb(y),R=[1,0,0],L=OA(T,M),N=CA(L,L),z=L[0],H=N-z*z;if(!H)return!b&&v;var X=t*N/H,Y=-t*z/H,ne=OA(R,L),ve=MA(R,X),Ee=MA(L,Y);s5(ve,Ee);var Ie=ne,Ye=CA(ve,Ie),$e=CA(Ie,Ie),St=Ye*Ye-$e*(CA(ve,ve)-1);if(!(St<0)){var Qe=Ap(St),lt=MA(Ie,(-Ye-Qe)/$e);if(s5(lt,ve),lt=a5(lt),!b)return lt;var ht=v[0],bt=y[0],Ht=v[1],Ot=y[1],kt;bt<ht&&(kt=ht,ht=bt,bt=kt);var Mn=bt-ht,Wn=zl(Mn-Ys)<ns,cr=Wn||Mn<ns;if(!Wn&&Ot<Ht&&(kt=Ht,Ht=Ot,Ot=kt),cr?Wn?Ht+Ot>0^lt[1]<(zl(lt[0]-ht)<ns?Ht:Ot):Ht<=lt[1]&&lt[1]<=Ot:Mn>Ys^(ht<=lt[0]&&lt[0]<=bt)){var ar=MA(Ie,(-Ye+Qe)/$e);return s5(ar,ve),[lt,a5(ar)]}}}function p(v,y){var b=r?e:Ys-e,T=0;return v<-b?T|=1:v>b&&(T|=2),y<-b?T|=4:y>b&&(T|=8),T}return G9(l,c,s,r?[0,-e]:[-Ys,e-Ys])}function fre(e,t,n,r,i,s){var l=e[0],c=e[1],h=t[0],p=t[1],v=0,y=1,b=h-l,T=p-c,M;if(M=n-l,!(!b&&M>0)){if(M/=b,b<0){if(M<v)return;M<y&&(y=M)}else if(b>0){if(M>y)return;M>v&&(v=M)}if(M=i-l,!(!b&&M<0)){if(M/=b,b<0){if(M>y)return;M>v&&(v=M)}else if(b>0){if(M<v)return;M<y&&(y=M)}if(M=r-c,!(!T&&M>0)){if(M/=T,T<0){if(M<v)return;M<y&&(y=M)}else if(T>0){if(M>y)return;M>v&&(v=M)}if(M=s-c,!(!T&&M<0)){if(M/=T,T<0){if(M>y)return;M>v&&(v=M)}else if(T>0){if(M<v)return;M<y&&(y=M)}return v>0&&(e[0]=l+v*b,e[1]=c+v*T),y<1&&(t[0]=l+y*b,t[1]=c+y*T),!0}}}}}var _E=1e9,RA=-_E;function $9(e,t,n,r){function i(p,v){return e<=p&&p<=n&&t<=v&&v<=r}function s(p,v,y,b){var T=0,M=0;if(p==null||(T=l(p,y))!==(M=l(v,y))||h(p,v)<0^y>0)do b.point(T===0||T===3?e:n,T>1?r:t);while((T=(T+y+4)%4)!==M);else b.point(v[0],v[1])}function l(p,v){return zl(p[0]-e)<ns?v>0?0:3:zl(p[0]-n)<ns?v>0?2:1:zl(p[1]-t)<ns?v>0?1:0:v>0?3:2}function c(p,v){return h(p.x,v.x)}function h(p,v){var y=l(p,1),b=l(v,1);return y!==b?y-b:y===0?v[1]-p[1]:y===1?p[0]-v[0]:y===2?p[1]-v[1]:v[0]-p[0]}return function(p){var v=p,y=j9(),b,T,M,R,L,N,z,H,X,Y,ne,ve={point:Ee,lineStart:St,lineEnd:Qe,polygonStart:Ye,polygonEnd:$e};function Ee(ht,bt){i(ht,bt)&&v.point(ht,bt)}function Ie(){for(var ht=0,bt=0,Ht=T.length;bt<Ht;++bt)for(var Ot=T[bt],kt=1,Mn=Ot.length,Wn=Ot[0],cr,ar,Yr=Wn[0],Pi=Wn[1];kt<Mn;++kt)cr=Yr,ar=Pi,Wn=Ot[kt],Yr=Wn[0],Pi=Wn[1],ar<=r?Pi>r&&(Yr-cr)*(r-ar)>(Pi-ar)*(e-cr)&&++ht:Pi<=r&&(Yr-cr)*(r-ar)<(Pi-ar)*(e-cr)&&--ht;return ht}function Ye(){v=y,b=[],T=[],ne=!0}function $e(){var ht=Ie(),bt=ne&&ht,Ht=(b=W9(b)).length;(bt||Ht)&&(p.polygonStart(),bt&&(p.lineStart(),s(null,null,1,p),p.lineEnd()),Ht&&V9(b,c,ht,s,p),p.polygonEnd()),v=p,b=T=M=null}function St(){ve.point=lt,T&&T.push(M=[]),Y=!0,X=!1,z=H=NaN}function Qe(){b&&(lt(R,L),N&&X&&y.rejoin(),b.push(y.result())),ve.point=Ee,X&&v.lineEnd()}function lt(ht,bt){var Ht=i(ht,bt);if(T&&M.push([ht,bt]),Y)R=ht,L=bt,N=Ht,Y=!1,Ht&&(v.lineStart(),v.point(ht,bt));else if(Ht&&X)v.point(ht,bt);else{var Ot=[z=Math.max(RA,Math.min(_E,z)),H=Math.max(RA,Math.min(_E,H))],kt=[ht=Math.max(RA,Math.min(_E,ht)),bt=Math.max(RA,Math.min(_E,bt))];fre(Ot,kt,e,t,n,r)?(X||(v.lineStart(),v.point(Ot[0],Ot[1])),v.point(kt[0],kt[1]),Ht||v.lineEnd(),ne=!1):Ht&&(v.lineStart(),v.point(ht,bt),ne=!1)}z=ht,H=bt,X=Ht}return ve}}function c5(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function f5(e,t){return zl(e)>Ys&&(e-=Math.round(e/qp)*qp),[e,t]}f5.invert=f5;function q9(e,t,n){return(e%=qp)?t||n?c5(Q9(e),J9(t,n)):Q9(e):t||n?J9(t,n):f5}function K9(e){return function(t,n){return t+=e,zl(t)>Ys&&(t-=Math.round(t/qp)*qp),[t,n]}}function Q9(e){var t=K9(e);return t.invert=K9(-e),t}function J9(e,t){var n=ks(e),r=bs(e),i=ks(t),s=bs(t);function l(c,h){var p=ks(h),v=ks(c)*p,y=bs(c)*p,b=bs(h),T=b*n+v*r;return[gg(y*i-T*s,v*n-b*r),F0(T*i+y*s)]}return l.invert=function(c,h){var p=ks(h),v=ks(c)*p,y=bs(c)*p,b=bs(h),T=b*i-y*s;return[gg(y*i+b*s,v*n+T*r),F0(T*n-v*r)]},l}function hre(e){e=q9(e[0]*zc,e[1]*zc,e.length>2?e[2]*zc:0);function t(n){return n=e(n[0]*zc,n[1]*zc),n[0]*=bd,n[1]*=bd,n}return t.invert=function(n){return n=e.invert(n[0]*zc,n[1]*zc),n[0]*=bd,n[1]*=bd,n},t}function q0e(e){return{stream:bE(e)}}function bE(e){return function(t){var n=new h5;for(var r in e)n[r]=e[r];return n.stream=t,n}}function h5(){}h5.prototype={constructor:h5,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function d5(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Gb(n,e.stream(bA)),t(bA.result()),r!=null&&e.clipExtent(r),e}function PA(e,t,n){return d5(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],l=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),c=+t[0][0]+(i-l*(r[1][0]+r[0][0]))/2,h=+t[0][1]+(s-l*(r[1][1]+r[0][1]))/2;e.scale(150*l).translate([c,h])},n)}function p5(e,t,n){return PA(e,[[0,0],t],n)}function v5(e,t,n){return d5(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),l=(i-s*(r[1][0]+r[0][0]))/2,c=-s*r[0][1];e.scale(150*s).translate([l,c])},n)}function m5(e,t,n){return d5(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),l=-s*r[0][0],c=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([l,c])},n)}var ez=16,dre=ks(30*zc);function tz(e,t){return+t?vre(e,t):pre(e)}function pre(e){return bE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function vre(e,t){function n(r,i,s,l,c,h,p,v,y,b,T,M,R,L){var N=p-r,z=v-i,H=N*N+z*z;if(H>4*t&&R--){var X=l+b,Y=c+T,ne=h+M,ve=Ap(X*X+Y*Y+ne*ne),Ee=F0(ne/=ve),Ie=zl(zl(ne)-1)<ns||zl(s-y)<ns?(s+y)/2:gg(Y,X),Ye=e(Ie,Ee),$e=Ye[0],St=Ye[1],Qe=$e-r,lt=St-i,ht=z*Qe-N*lt;(ht*ht/H>t||zl((N*Qe+z*lt)/H-.5)>.3||l*b+c*T+h*M<dre)&&(n(r,i,s,l,c,h,$e,St,Ie,X/=ve,Y/=ve,ne,R,L),L.point($e,St),n($e,St,Ie,X,Y,ne,p,v,y,b,T,M,R,L))}}return function(r){var i,s,l,c,h,p,v,y,b,T,M,R,L={point:N,lineStart:z,lineEnd:X,polygonStart:function(){r.polygonStart(),L.lineStart=Y},polygonEnd:function(){r.polygonEnd(),L.lineStart=z}};function N(Ee,Ie){Ee=e(Ee,Ie),r.point(Ee[0],Ee[1])}function z(){y=NaN,L.point=H,r.lineStart()}function H(Ee,Ie){var Ye=qb([Ee,Ie]),$e=e(Ee,Ie);n(y,b,v,T,M,R,y=$e[0],b=$e[1],v=Ee,T=Ye[0],M=Ye[1],R=Ye[2],ez,r),r.point(y,b)}function X(){L.point=N,r.lineEnd()}function Y(){z(),L.point=ne,L.lineEnd=ve}function ne(Ee,Ie){H(i=Ee,Ie),s=y,l=b,c=T,h=M,p=R,L.point=H}function ve(){n(y,b,v,T,M,R,s,l,i,c,h,p,ez,r),L.lineEnd=X,X()}return L}}var mre=bE({point:function(e,t){this.stream.point(e*zc,t*zc)}});function gre(e){return bE({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function yre(e,t,n,r,i){function s(l,c){return l*=r,c*=i,[t+e*l,n-e*c]}return s.invert=function(l,c){return[(l-t)/e*r,(n-c)/e*i]},s}function nz(e,t,n,r,i,s){if(!s)return yre(e,t,n,r,i);var l=ks(s),c=bs(s),h=l*e,p=c*e,v=l/e,y=c/e,b=(c*n-l*t)/e,T=(c*t+l*n)/e;function M(R,L){return R*=r,L*=i,[h*R-p*L+t,n-p*R-h*L]}return M.invert=function(R,L){return[r*(v*R-y*L+b),i*(T-y*R-v*L)]},M}function mm(e){return g5(function(){return e})()}function g5(e){var t,n=150,r=480,i=250,s=0,l=0,c=0,h=0,p=0,v,y=0,b=1,T=1,M=null,R=Z9,L=null,N,z,H,X=dE,Y=.5,ne,ve,Ee,Ie,Ye;function $e(ht){return Ee(ht[0]*zc,ht[1]*zc)}function St(ht){return ht=Ee.invert(ht[0],ht[1]),ht&&[ht[0]*bd,ht[1]*bd]}$e.stream=function(ht){return Ie&&Ye===ht?Ie:Ie=mre(gre(v)(R(ne(X(Ye=ht)))))},$e.preclip=function(ht){return arguments.length?(R=ht,M=void 0,lt()):R},$e.postclip=function(ht){return arguments.length?(X=ht,L=N=z=H=null,lt()):X},$e.clipAngle=function(ht){return arguments.length?(R=+ht?cre(M=ht*zc):(M=null,Z9),lt()):M*bd},$e.clipExtent=function(ht){return arguments.length?(X=ht==null?(L=N=z=H=null,dE):$9(L=+ht[0][0],N=+ht[0][1],z=+ht[1][0],H=+ht[1][1]),lt()):L==null?null:[[L,N],[z,H]]},$e.scale=function(ht){return arguments.length?(n=+ht,Qe()):n},$e.translate=function(ht){return arguments.length?(r=+ht[0],i=+ht[1],Qe()):[r,i]},$e.center=function(ht){return arguments.length?(s=ht[0]%360*zc,l=ht[1]%360*zc,Qe()):[s*bd,l*bd]},$e.rotate=function(ht){return arguments.length?(c=ht[0]%360*zc,h=ht[1]%360*zc,p=ht.length>2?ht[2]%360*zc:0,Qe()):[c*bd,h*bd,p*bd]},$e.angle=function(ht){return arguments.length?(y=ht%360*zc,Qe()):y*bd},$e.reflectX=function(ht){return arguments.length?(b=ht?-1:1,Qe()):b<0},$e.reflectY=function(ht){return arguments.length?(T=ht?-1:1,Qe()):T<0},$e.precision=function(ht){return arguments.length?(ne=tz(ve,Y=ht*ht),lt()):Ap(Y)},$e.fitExtent=function(ht,bt){return PA($e,ht,bt)},$e.fitSize=function(ht,bt){return p5($e,ht,bt)},$e.fitWidth=function(ht,bt){return v5($e,ht,bt)},$e.fitHeight=function(ht,bt){return m5($e,ht,bt)};function Qe(){var ht=nz(n,0,0,b,T,y).apply(null,t(s,l)),bt=nz(n,r-ht[0],i-ht[1],b,T,y);return v=q9(c,h,p),ve=c5(t,bt),Ee=c5(v,ve),ne=tz(ve,Y),lt()}function lt(){return Ie=Ye=null,$e}return function(){return t=e.apply(this,arguments),$e.invert=t.invert&&St,Qe()}}function y5(e){var t=0,n=Ys/3,r=g5(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*zc,n=s[1]*zc):[t*bd,n*bd]},i}function _re(e){var t=ks(e);function n(r,i){return[r*t,bs(i)/t]}return n.invert=function(r,i){return[r/t,F0(i*t)]},n}function rz(e,t){var n=bs(e),r=(n+bs(t))/2;if(zl(r)<ns)return _re(e);var i=1+n*(2*r-n),s=Ap(i)/r;function l(c,h){var p=Ap(i-2*r*bs(h))/r;return[p*bs(c*=r),s-p*ks(c)]}return l.invert=function(c,h){var p=s-h,v=gg(c,zl(p))*N0(p);return p*r<0&&(v-=Ys*N0(c)*N0(p)),[v/r,F0((i-(c*c+p*p)*r*r)/(2*r))]},l}function IA(){return y5(rz).scale(155.424).center([0,33.6442])}function iz(){return IA().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function bre(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function xre(){var e,t,n=iz(),r,i=IA().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,l=IA().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,h,p={point:function(b,T){h=[b,T]}};function v(b){var T=b[0],M=b[1];return h=null,r.point(T,M),h||(s.point(T,M),h)||(c.point(T,M),h)}v.invert=function(b){var T=n.scale(),M=n.translate(),R=(b[0]-M[0])/T,L=(b[1]-M[1])/T;return(L>=.12&&L<.234&&R>=-.425&&R<-.214?i:L>=.166&&L<.234&&R>=-.214&&R<-.115?l:n).invert(b)},v.stream=function(b){return e&&t===b?e:e=bre([n.stream(t=b),i.stream(b),l.stream(b)])},v.precision=function(b){return arguments.length?(n.precision(b),i.precision(b),l.precision(b),y()):n.precision()},v.scale=function(b){return arguments.length?(n.scale(b),i.scale(b*.35),l.scale(b),v.translate(n.translate())):n.scale()},v.translate=function(b){if(!arguments.length)return n.translate();var T=n.scale(),M=+b[0],R=+b[1];return r=n.translate(b).clipExtent([[M-.455*T,R-.238*T],[M+.455*T,R+.238*T]]).stream(p),s=i.translate([M-.307*T,R+.201*T]).clipExtent([[M-.425*T+ns,R+.12*T+ns],[M-.214*T-ns,R+.234*T-ns]]).stream(p),c=l.translate([M-.205*T,R+.212*T]).clipExtent([[M-.214*T+ns,R+.166*T+ns],[M-.115*T-ns,R+.234*T-ns]]).stream(p),y()},v.fitExtent=function(b,T){return PA(v,b,T)},v.fitSize=function(b,T){return p5(v,b,T)},v.fitWidth=function(b,T){return v5(v,b,T)},v.fitHeight=function(b,T){return m5(v,b,T)};function y(){return e=t=null,v}return v.scale(1070)}function oz(e){return function(t,n){var r=ks(t),i=ks(n),s=e(r*i);return s===1/0?[2,0]:[s*i*bs(t),s*bs(n)]}}function xE(e){return function(t,n){var r=Ap(t*t+n*n),i=e(r),s=bs(i),l=ks(i);return[gg(t*s,r*l),F0(r&&n*s/r)]}}var _5=oz(function(e){return Ap(2/(1+e))});_5.invert=xE(function(e){return 2*F0(e/2)});function Ere(){return mm(_5).scale(124.75).clipAngle(180-.001)}var b5=oz(function(e){return(e=g9(e))&&e/bs(e)});b5.invert=xE(function(e){return e});function Sre(){return mm(b5).scale(79.4188).clipAngle(180-.001)}function EE(e,t){return[e,gA($P((nf+t)/2))]}EE.invert=function(e,t){return[e,2*Zb(m9(t))-nf]};function wre(){return az(EE).scale(961/qp)}function az(e){var t=mm(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,l=null,c,h,p;t.scale=function(y){return arguments.length?(r(y),v()):r()},t.translate=function(y){return arguments.length?(i(y),v()):i()},t.center=function(y){return arguments.length?(n(y),v()):n()},t.clipExtent=function(y){return arguments.length?(y==null?l=c=h=p=null:(l=+y[0][0],c=+y[0][1],h=+y[1][0],p=+y[1][1]),v()):l==null?null:[[l,c],[h,p]]};function v(){var y=Ys*r(),b=t(hre(t.rotate()).invert([0,0]));return s(l==null?[[b[0]-y,b[1]-y],[b[0]+y,b[1]+y]]:e===EE?[[Math.max(b[0]-y,l),c],[Math.min(b[0]+y,h),p]]:[[l,Math.max(b[1]-y,c)],[h,Math.min(b[1]+y,p)]])}return v()}function LA(e){return $P((nf+e)/2)}function sz(e,t){var n=ks(e),r=e===t?bs(e):gA(n/ks(t))/gA(LA(t)/LA(e)),i=n*YP(LA(e),r)/r;if(!r)return EE;function s(l,c){i>0?c<-nf+ns&&(c=-nf+ns):c>nf-ns&&(c=nf-ns);var h=i/YP(LA(c),r);return[h*bs(r*l),i-h*ks(r*l)]}return s.invert=function(l,c){var h=i-c,p=N0(r)*Ap(l*l+h*h),v=gg(l,zl(h))*N0(h);return h*r<0&&(v-=Ys*N0(l)*N0(h)),[v/r,2*Zb(YP(i/p,1/r))-nf]},s}function Tre(){return y5(sz).scale(109.5).parallels([30,30])}function SE(e,t){return[e,t]}SE.invert=SE;function Are(){return mm(SE).scale(152.63)}function lz(e,t){var n=ks(e),r=e===t?bs(e):(n-ks(t))/(t-e),i=n/r+e;if(zl(r)<ns)return SE;function s(l,c){var h=i-c,p=r*l;return[h*bs(p),i-h*ks(p)]}return s.invert=function(l,c){var h=i-c,p=gg(l,zl(h))*N0(h);return h*r<0&&(p-=Ys*N0(l)*N0(h)),[p/r,i-N0(r)*Ap(l*l+h*h)]},s}function Cre(){return y5(lz).scale(131.154).center([0,13.9389])}var wE=1.340264,TE=-.081106,AE=893e-6,CE=.003796,DA=Ap(3)/2,Ore=12;function x5(e,t){var n=F0(DA*bs(t)),r=n*n,i=r*r*r;return[e*ks(n)/(DA*(wE+3*TE*r+i*(7*AE+9*CE*r))),n*(wE+TE*r+i*(AE+CE*r))]}x5.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,l,c,h;s<Ore&&(c=n*(wE+TE*r+i*(AE+CE*r))-t,h=wE+3*TE*r+i*(7*AE+9*CE*r),n-=l=c/h,r=n*n,i=r*r*r,!(zl(l)<p9));++s);return[DA*e*(wE+3*TE*r+i*(7*AE+9*CE*r))/ks(n),F0(bs(n)/DA)]};function Mre(){return mm(x5).scale(177.158)}function E5(e,t){var n=ks(t),r=ks(e)*n;return[n*bs(e)/r,bs(t)/r]}E5.invert=xE(Zb);function Rre(){return mm(E5).scale(144.049).clipAngle(60)}function Pre(){var e=1,t=0,n=0,r=1,i=1,s=0,l,c,h=null,p,v,y,b=1,T=1,M=bE({point:function(X,Y){var ne=H([X,Y]);this.stream.point(ne[0],ne[1])}}),R=dE,L,N;function z(){return b=e*r,T=e*i,L=N=null,H}function H(X){var Y=X[0]*b,ne=X[1]*T;if(s){var ve=ne*l-Y*c;Y=Y*l+ne*c,ne=ve}return[Y+t,ne+n]}return H.invert=function(X){var Y=X[0]-t,ne=X[1]-n;if(s){var ve=ne*l+Y*c;Y=Y*l-ne*c,ne=ve}return[Y/b,ne/T]},H.stream=function(X){return L&&N===X?L:L=M(R(N=X))},H.postclip=function(X){return arguments.length?(R=X,h=p=v=y=null,z()):R},H.clipExtent=function(X){return arguments.length?(R=X==null?(h=p=v=y=null,dE):$9(h=+X[0][0],p=+X[0][1],v=+X[1][0],y=+X[1][1]),z()):h==null?null:[[h,p],[v,y]]},H.scale=function(X){return arguments.length?(e=+X,z()):e},H.translate=function(X){return arguments.length?(t=+X[0],n=+X[1],z()):[t,n]},H.angle=function(X){return arguments.length?(s=X%360*zc,c=bs(s),l=ks(s),z()):s*bd},H.reflectX=function(X){return arguments.length?(r=X?-1:1,z()):r<0},H.reflectY=function(X){return arguments.length?(i=X?-1:1,z()):i<0},H.fitExtent=function(X,Y){return PA(H,X,Y)},H.fitSize=function(X,Y){return p5(H,X,Y)},H.fitWidth=function(X,Y){return v5(H,X,Y)},H.fitHeight=function(X,Y){return m5(H,X,Y)},H}function S5(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}S5.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,l=s*s;n-=i=(n*(1.007226+s*(.015085+l*(-.044475+.028874*s-.005916*l)))-t)/(1.007226+s*(.015085*3+l*(-.044475*7+.028874*9*s-.005916*11*l)))}while(zl(i)>ns&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Ire(){return mm(S5).scale(175.295)}function w5(e,t){return[ks(t)*bs(e),bs(t)]}w5.invert=xE(F0);function Lre(){return mm(w5).scale(249.5).clipAngle(90+ns)}function T5(e,t){var n=ks(t),r=1+ks(e)*n;return[n*bs(e)/r,bs(t)/r]}T5.invert=xE(function(e){return 2*Zb(e)});function Dre(){return mm(T5).scale(250).clipAngle(142)}function A5(e,t){return[gA($P((nf+t)/2)),-e]}A5.invert=function(e,t){return[-t,2*Zb(m9(e))-nf]};function Nre(){var e=az(A5),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Fre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Bre(e){if(typeof e=="function")return e;const t=`geo${Jv(e)}`,n=E[t];if(!n)throw new Error(`Unknown coordinate: ${e}`);return n}function kre(e){return{type:"FeatureCollection",features:e.flatMap(t=>zre(t).features)}}function zre(e){const t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!e||!e.type)return null;const n=t[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featureCollection")return e}function Ure(e,t){var n;for(const[r,i]of Object.entries(t))(n=e[r])===null||n===void 0||n.call(e,i)}function jre(e,t,n,r){const i=()=>{const c=t.filter(uz);return c.find(p=>p.sphere)?{type:"Sphere"}:kre(c.filter(p=>!p.sphere).flatMap(p=>p.data.value))},{outline:s=i()}=r,{size:l="fitExtent"}=r;if(l==="fitExtent")return Vre(e,s,n);if(l==="fitWidth")return Hre(e,s,n)}function Vre(e,t,n){const{x:r,y:i,width:s,height:l}=n;e.fitExtent([[r,i],[s,l]],t)}function Hre(e,t,n){const{width:r,height:i}=n,[[s,l],[c,h]]=k9(e.fitWidth(r,t)).bounds(t),p=Math.ceil(h-l),v=Math.min(Math.ceil(c-s),p),y=e.scale()*(v-1)/v,[b,T]=e.translate(),M=T+(i-p)/2;e.scale(y).translate([b,M]).precision(.2)}function Wre(e){const{data:t}=e;if(Array.isArray(t))return Object.assign(Object.assign({},e),{data:{value:t}});const{type:n}=t;return n==="graticule10"?Object.assign(Object.assign({},e),{data:{value:[nre()]}}):n==="sphere"?Object.assign(Object.assign({},e),{sphere:!0,data:{value:[{type:"Sphere"}]}}):e}function uz(e){return e.type==="geoPath"}const cz=()=>e=>{const{children:t,coordinate:n={}}=e;if(!Array.isArray(t))return[];const{type:r="equalEarth"}=n,i=Fre(n,["type"]),s=Bre(r),l=t.map(Wre);let c;function h(){return[["custom",(y,b,T,M)=>{const R=s();jre(R,l,{x:y,y:b,width:T,height:M},i),Ure(R,i),c=k9(R);const N=new vd({domain:[y,y+T]}),z=new vd({domain:[b,b+M]}),H=Y=>{const ne=R(Y);if(!ne)return[null,null];const[ve,Ee]=ne;return[N.map(ve),z.map(Ee)]},X=Y=>{if(!Y)return null;const[ne,ve]=Y,Ee=[N.invert(ne),z.invert(ve)];return R.invert(Ee)};return{transform:Y=>H(Y),untransform:Y=>X(Y)}}]]}function p(y){const{style:b,tooltip:T={}}=y;return Object.assign(Object.assign({},y),{type:"path",tooltip:OT(T,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},b),{d:M=>c(M)||[]})})}const v=y=>uz(y)?p(y):y;return[Object.assign(Object.assign({},e),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:h},children:l.flatMap(v)})]};cz.props={};var Gre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const fz=()=>e=>{const{type:t,data:n,scale:r,encode:i,style:s,animate:l,key:c,state:h}=e,p=Gre(e,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},p),{children:[{type:"geoPath",key:`${c}-0`,data:{value:n},scale:r,encode:i,style:s,animate:l,state:h}]})]};fz.props={};function Zre(){return{"composition.geoView":cz,"composition.geoPath":fz}}function Xre(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return hz(this.cover(t,n),t,n,e)}function hz(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,l={data:r},c=e._x0,h=e._y0,p=e._x1,v=e._y1,y,b,T,M,R,L,N,z;if(!s)return e._root=l,e;for(;s.length;)if((R=t>=(y=(c+p)/2))?c=y:p=y,(L=n>=(b=(h+v)/2))?h=b:v=b,i=s,!(s=s[N=L<<1|R]))return i[N]=l,e;if(T=+e._x.call(null,s.data),M=+e._y.call(null,s.data),t===T&&n===M)return l.next=s,i?i[N]=l:e._root=l,e;do i=i?i[N]=new Array(4):e._root=new Array(4),(R=t>=(y=(c+p)/2))?c=y:p=y,(L=n>=(b=(h+v)/2))?h=b:v=b;while((N=L<<1|R)===(z=(M>=b)<<1|T>=y));return i[z]=s,i[N]=l,e}function Yre(e){var t,n,r=e.length,i,s,l=new Array(r),c=new Array(r),h=1/0,p=1/0,v=-1/0,y=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(l[n]=i,c[n]=s,i<h&&(h=i),i>v&&(v=i),s<p&&(p=s),s>y&&(y=s));if(h>v||p>y)return this;for(this.cover(h,p).cover(v,y),n=0;n<r;++n)hz(this,l[n],c[n],e[n]);return this}function $re(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var l=i-n||1,c=this._root,h,p;n>e||e>=i||r>t||t>=s;)switch(p=(t<r)<<1|e<n,h=new Array(4),h[p]=c,c=h,l*=2,p){case 0:i=n+l,s=r+l;break;case 1:n=i-l,s=r+l;break;case 2:i=n+l,r=s-l;break;case 3:n=i-l,r=s-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function qre(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Kre(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ep(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Qre(e,t,n){var r,i=this._x0,s=this._y0,l,c,h,p,v=this._x1,y=this._y1,b=[],T=this._root,M,R;for(T&&b.push(new ep(T,i,s,v,y)),n==null?n=1/0:(i=e-n,s=t-n,v=e+n,y=t+n,n*=n);M=b.pop();)if(!(!(T=M.node)||(l=M.x0)>v||(c=M.y0)>y||(h=M.x1)<i||(p=M.y1)<s))if(T.length){var L=(l+h)/2,N=(c+p)/2;b.push(new ep(T[3],L,N,h,p),new ep(T[2],l,N,L,p),new ep(T[1],L,c,h,N),new ep(T[0],l,c,L,N)),(R=(t>=N)<<1|e>=L)&&(M=b[b.length-1],b[b.length-1]=b[b.length-1-R],b[b.length-1-R]=M)}else{var z=e-+this._x.call(null,T.data),H=t-+this._y.call(null,T.data),X=z*z+H*H;if(X<n){var Y=Math.sqrt(n=X);i=e-Y,s=t-Y,v=e+Y,y=t+Y,r=T.data}}return r}function Jre(e){if(isNaN(v=+this._x.call(null,e))||isNaN(y=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,l=this._x0,c=this._y0,h=this._x1,p=this._y1,v,y,b,T,M,R,L,N;if(!n)return this;if(n.length)for(;;){if((M=v>=(b=(l+h)/2))?l=b:h=b,(R=y>=(T=(c+p)/2))?c=T:p=T,t=n,!(n=n[L=R<<1|M]))return this;if(!n.length)break;(t[L+1&3]||t[L+2&3]||t[L+3&3])&&(r=t,N=L)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[L]=s:delete t[L],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[N]=n:this._root=n),this):(this._root=s,this)}function eie(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tie(){return this._root}function nie(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function rie(e){var t=[],n,r=this._root,i,s,l,c,h;for(r&&t.push(new ep(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,l=n.y0,c=n.x1,h=n.y1)&&r.length){var p=(s+c)/2,v=(l+h)/2;(i=r[3])&&t.push(new ep(i,p,v,c,h)),(i=r[2])&&t.push(new ep(i,s,v,p,h)),(i=r[1])&&t.push(new ep(i,p,l,c,v)),(i=r[0])&&t.push(new ep(i,s,l,p,v))}return this}function iie(e){var t=[],n=[],r;for(this._root&&t.push(new ep(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,l=r.x0,c=r.y0,h=r.x1,p=r.y1,v=(l+h)/2,y=(c+p)/2;(s=i[0])&&t.push(new ep(s,l,c,v,y)),(s=i[1])&&t.push(new ep(s,v,c,h,y)),(s=i[2])&&t.push(new ep(s,l,y,v,p)),(s=i[3])&&t.push(new ep(s,v,y,h,p))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function oie(e){return e[0]}function aie(e){return arguments.length?(this._x=e,this):this._x}function sie(e){return e[1]}function lie(e){return arguments.length?(this._y=e,this):this._y}function dz(e,t,n){var r=new C5(t==null?oie:t,n==null?sie:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function C5(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function pz(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var tp=dz.prototype=C5.prototype;tp.copy=function(){var e=new C5(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=pz(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=pz(r));return e},tp.add=Xre,tp.addAll=Yre,tp.cover=$re,tp.data=qre,tp.extent=Kre,tp.find=Qre,tp.remove=Jre,tp.removeAll=eie,tp.root=tie,tp.size=nie,tp.visit=rie,tp.visitAfter=iie,tp.x=aie,tp.y=lie;function Kp(e){return function(){return e}}function Kb(e){return(e()-.5)*1e-6}var uie={value:function(){}};function vz(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new NA(n)}function NA(e){this._=e}function cie(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}NA.prototype=vz.prototype={constructor:NA,on:function(t,n){var r=this._,i=cie(t+"",r),s,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((s=(t=i[l]).type)&&(s=fie(r[s],t.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++l<c;)if(s=(t=i[l]).type)r[s]=mz(r[s],t.name,n);else if(n==null)for(s in r)r[s]=mz(r[s],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new NA(t)},call:function(t,n){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,l;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,s=l.length;i<s;++i)l[i].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,l=i.length;s<l;++s)i[s].value.apply(n,r)}};function fie(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function mz(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=uie,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var hie=vz,Qb=0,OE=0,ME=0,gz=1e3,FA,RE,BA=0,i1=0,kA=0,PE=typeof performance=="object"&&performance.now?performance:Date,yz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _z(){return i1||(yz(die),i1=PE.now()+kA)}function die(){i1=0}function O5(){this._call=this._time=this._next=null}O5.prototype=bz.prototype={constructor:O5,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?_z():+n)+(t==null?0:+t),!this._next&&RE!==this&&(RE?RE._next=this:FA=this,RE=this),this._call=e,this._time=n,M5()},stop:function(){this._call&&(this._call=null,this._time=1/0,M5())}};function bz(e,t,n){var r=new O5;return r.restart(e,t,n),r}function pie(){_z(),++Qb;for(var e=FA,t;e;)(t=i1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qb}function xz(){i1=(BA=PE.now())+kA,Qb=OE=0;try{pie()}finally{Qb=0,mie(),i1=0}}function vie(){var e=PE.now(),t=e-BA;t>gz&&(kA-=t,BA=e)}function mie(){for(var e,t=FA,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:FA=n);RE=e,M5(r)}function M5(e){if(!Qb){OE&&(OE=clearTimeout(OE));var t=e-i1;t>24?(e<1/0&&(OE=setTimeout(xz,e-PE.now()-kA)),ME&&(ME=clearInterval(ME))):(ME||(BA=PE.now(),ME=setInterval(vie,gz)),Qb=1,yz(xz))}}const gie=1664525,yie=1013904223,Ez=4294967296;function _ie(){let e=1;return()=>(e=(gie*e+yie)%Ez)/Ez}function bie(e){return e.x}function xie(e){return e.y}var Eie=10,Sie=Math.PI*(3-Math.sqrt(5));function wie(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,l=.6,c=new Map,h=bz(y),p=hie("tick","end"),v=_ie();e==null&&(e=[]);function y(){b(),p.call("tick",t),n<r&&(h.stop(),p.call("end",t))}function b(R){var L,N=e.length,z;R===void 0&&(R=1);for(var H=0;H<R;++H)for(n+=(s-n)*i,c.forEach(function(X){X(n)}),L=0;L<N;++L)z=e[L],z.fx==null?z.x+=z.vx*=l:(z.x=z.fx,z.vx=0),z.fy==null?z.y+=z.vy*=l:(z.y=z.fy,z.vy=0);return t}function T(){for(var R=0,L=e.length,N;R<L;++R){if(N=e[R],N.index=R,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),isNaN(N.x)||isNaN(N.y)){var z=Eie*Math.sqrt(.5+R),H=R*Sie;N.x=z*Math.cos(H),N.y=z*Math.sin(H)}(isNaN(N.vx)||isNaN(N.vy))&&(N.vx=N.vy=0)}}function M(R){return R.initialize&&R.initialize(e,v),R}return T(),t={tick:b,restart:function(){return h.restart(y),t},stop:function(){return h.stop(),t},nodes:function(R){return arguments.length?(e=R,T(),c.forEach(M),t):e},alpha:function(R){return arguments.length?(n=+R,t):n},alphaMin:function(R){return arguments.length?(r=+R,t):r},alphaDecay:function(R){return arguments.length?(i=+R,t):+i},alphaTarget:function(R){return arguments.length?(s=+R,t):s},velocityDecay:function(R){return arguments.length?(l=1-R,t):1-l},randomSource:function(R){return arguments.length?(v=R,c.forEach(M),t):v},force:function(R,L){return arguments.length>1?(L==null?c.delete(R):c.set(R,M(L)),t):c.get(R)},find:function(R,L,N){var z=0,H=e.length,X,Y,ne,ve,Ee;for(N==null?N=1/0:N*=N,z=0;z<H;++z)ve=e[z],X=R-ve.x,Y=L-ve.y,ne=X*X+Y*Y,ne<N&&(Ee=ve,N=ne);return Ee},on:function(R,L){return arguments.length>1?(p.on(R,L),t):p.on(R)}}}function Tie(){var e,t,n,r,i=Kp(-30),s,l=1,c=1/0,h=.81;function p(T){var M,R=e.length,L=dz(e,bie,xie).visitAfter(y);for(r=T,M=0;M<R;++M)t=e[M],L.visit(b)}function v(){if(e){var T,M=e.length,R;for(s=new Array(M),T=0;T<M;++T)R=e[T],s[R.index]=+i(R,T,e)}}function y(T){var M=0,R,L,N=0,z,H,X;if(T.length){for(z=H=X=0;X<4;++X)(R=T[X])&&(L=Math.abs(R.value))&&(M+=R.value,N+=L,z+=L*R.x,H+=L*R.y);T.x=z/N,T.y=H/N}else{R=T,R.x=R.data.x,R.y=R.data.y;do M+=s[R.data.index];while(R=R.next)}T.value=M}function b(T,M,R,L){if(!T.value)return!0;var N=T.x-t.x,z=T.y-t.y,H=L-M,X=N*N+z*z;if(H*H/h<X)return X<c&&(N===0&&(N=Kb(n),X+=N*N),z===0&&(z=Kb(n),X+=z*z),X<l&&(X=Math.sqrt(l*X)),t.vx+=N*T.value*r/X,t.vy+=z*T.value*r/X),!0;if(T.length||X>=c)return;(T.data!==t||T.next)&&(N===0&&(N=Kb(n),X+=N*N),z===0&&(z=Kb(n),X+=z*z),X<l&&(X=Math.sqrt(l*X)));do T.data!==t&&(H=s[T.data.index]*r/X,t.vx+=N*H,t.vy+=z*H);while(T=T.next)}return p.initialize=function(T,M){e=T,n=M,v()},p.strength=function(T){return arguments.length?(i=typeof T=="function"?T:Kp(+T),v(),p):i},p.distanceMin=function(T){return arguments.length?(l=T*T,p):Math.sqrt(l)},p.distanceMax=function(T){return arguments.length?(c=T*T,p):Math.sqrt(c)},p.theta=function(T){return arguments.length?(h=T*T,p):Math.sqrt(h)},p}function Aie(e){return e.index}function Sz(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Cie(e){var t=Aie,n=y,r,i=Kp(30),s,l,c,h,p,v=1;e==null&&(e=[]);function y(L){return 1/Math.min(c[L.source.index],c[L.target.index])}function b(L){for(var N=0,z=e.length;N<v;++N)for(var H=0,X,Y,ne,ve,Ee,Ie,Ye;H<z;++H)X=e[H],Y=X.source,ne=X.target,ve=ne.x+ne.vx-Y.x-Y.vx||Kb(p),Ee=ne.y+ne.vy-Y.y-Y.vy||Kb(p),Ie=Math.sqrt(ve*ve+Ee*Ee),Ie=(Ie-s[H])/Ie*L*r[H],ve*=Ie,Ee*=Ie,ne.vx-=ve*(Ye=h[H]),ne.vy-=Ee*Ye,Y.vx+=ve*(Ye=1-Ye),Y.vy+=Ee*Ye}function T(){if(l){var L,N=l.length,z=e.length,H=new Map(l.map((Y,ne)=>[t(Y,ne,l),Y])),X;for(L=0,c=new Array(N);L<z;++L)X=e[L],X.index=L,typeof X.source!="object"&&(X.source=Sz(H,X.source)),typeof X.target!="object"&&(X.target=Sz(H,X.target)),c[X.source.index]=(c[X.source.index]||0)+1,c[X.target.index]=(c[X.target.index]||0)+1;for(L=0,h=new Array(z);L<z;++L)X=e[L],h[L]=c[X.source.index]/(c[X.source.index]+c[X.target.index]);r=new Array(z),M(),s=new Array(z),R()}}function M(){if(l)for(var L=0,N=e.length;L<N;++L)r[L]=+n(e[L],L,e)}function R(){if(l)for(var L=0,N=e.length;L<N;++L)s[L]=+i(e[L],L,e)}return b.initialize=function(L,N){l=L,p=N,T()},b.links=function(L){return arguments.length?(e=L,T(),b):e},b.id=function(L){return arguments.length?(t=L,b):t},b.iterations=function(L){return arguments.length?(v=+L,b):v},b.strength=function(L){return arguments.length?(n=typeof L=="function"?L:Kp(+L),M(),b):n},b.distance=function(L){return arguments.length?(i=typeof L=="function"?L:Kp(+L),R(),b):i},b}function Oie(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,l=n.length,c,h=0,p=0;for(s=0;s<l;++s)c=n[s],h+=c.x,p+=c.y;for(h=(h/l-e)*r,p=(p/l-t)*r,s=0;s<l;++s)c=n[s],c.x-=h,c.y-=p}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Mie(e){var t=Kp(.1),n,r,i;typeof e!="function"&&(e=Kp(e==null?0:+e));function s(c){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vx+=(i[h]-v.x)*r[h]*c}function l(){if(n){var c,h=n.length;for(r=new Array(h),i=new Array(h),c=0;c<h;++c)r[c]=isNaN(i[c]=+e(n[c],c,n))?0:+t(n[c],c,n)}}return s.initialize=function(c){n=c,l()},s.strength=function(c){return arguments.length?(t=typeof c=="function"?c:Kp(+c),l(),s):t},s.x=function(c){return arguments.length?(e=typeof c=="function"?c:Kp(+c),l(),s):e},s}function Rie(e){var t=Kp(.1),n,r,i;typeof e!="function"&&(e=Kp(e==null?0:+e));function s(c){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vy+=(i[h]-v.y)*r[h]*c}function l(){if(n){var c,h=n.length;for(r=new Array(h),i=new Array(h),c=0;c<h;++c)r[c]=isNaN(i[c]=+e(n[c],c,n))?0:+t(n[c],c,n)}}return s.initialize=function(c){n=c,l()},s.strength=function(c){return arguments.length?(t=typeof c=="function"?c:Kp(+c),l(),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Kp(+c),l(),s):e},s}var Pie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Iie={joint:!0},Lie={type:"link",axis:!1,legend:!1,encode:{x:[e=>e.source.x,e=>e.target.x],y:[e=>e.source.y,e=>e.target.y]},style:{stroke:"#999",strokeOpacity:.6}},Die={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},Nie={text:""};function Fie(e,t,n){const{nodes:r,links:i}=e,{joint:s,nodeStrength:l,linkStrength:c}=t,{nodeKey:h=M=>M.id,linkKey:p=M=>M.id}=n,v=Tie(),y=Cie(i).id(dm(p));typeof l=="function"&&v.strength(l),typeof c=="function"&&y.strength(c);const b=wie(r).force("link",y).force("charge",v);s?b.force("center",Oie()):b.force("x",Mie()).force("y",Rie()),b.stop();const T=Math.ceil(Math.log(b.alphaMin())/Math.log(1-b.alphaDecay()));for(let M=0;M<T;M++)b.tick();return{nodesData:r,linksData:i}}const wz=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,{nodeKey:v=ne=>ne.id,linkKey:y=ne=>ne.id}=n,b=Pie(n,["nodeKey","linkKey"]),T=Object.assign({nodeKey:v,linkKey:y},b),M=xo(T,"node"),R=xo(T,"link"),{links:L,nodes:N}=OR(t,T),{nodesData:z,linksData:H}=Fie({links:L,nodes:N},ui({},Iie,s),T),X=cm(p,"link",{items:[ne=>({name:"source",value:dm(y)(ne.source)}),ne=>({name:"target",value:dm(y)(ne.target)})]}),Y=cm(p,"node",{items:[ne=>({name:"key",value:dm(v)(ne)})]},!0);return[ui({},Lie,{data:H,encode:R,labels:c,style:xo(i,"link"),tooltip:X,animate:fm(h,"link")}),ui({},Die,{data:z,encode:Object.assign({},M),scale:r,style:xo(i,"node"),tooltip:Y,labels:[Object.assign(Object.assign({},Nie),xo(i,"label")),...l],animate:fm(h,"link")})]};wz.props={};function Bie(e,t){return e.parent===t.parent?1:2}function R5(e){var t=e.children;return t?t[0]:e.t}function P5(e){var t=e.children;return t?t[t.length-1]:e.t}function kie(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function zie(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Uie(e,t,n){return e.a.parent===t.parent?e.a:n}function zA(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}zA.prototype=Object.create(Nb.prototype);function jie(e){for(var t=new zA(e,0),n,r=[t],i,s,l,c;n=r.pop();)if(s=n._.children)for(n.children=new Array(c=s.length),l=c-1;l>=0;--l)r.push(i=n.children[l]=new zA(s[l],l)),i.parent=n;return(t.parent=new zA(null,0)).children=[t],t}function Vie(){var e=Bie,t=1,n=1,r=null;function i(p){var v=jie(p);if(v.eachAfter(s),v.parent.m=-v.z,v.eachBefore(l),r)p.eachBefore(h);else{var y=p,b=p,T=p;p.eachBefore(function(z){z.x<y.x&&(y=z),z.x>b.x&&(b=z),z.depth>T.depth&&(T=z)});var M=y===b?1:e(y,b)/2,R=M-y.x,L=t/(b.x+M+R),N=n/(T.depth||1);p.eachBefore(function(z){z.x=(z.x+R)*L,z.y=z.depth*N})}return p}function s(p){var v=p.children,y=p.parent.children,b=p.i?y[p.i-1]:null;if(v){zie(p);var T=(v[0].z+v[v.length-1].z)/2;b?(p.z=b.z+e(p._,b._),p.m=p.z-T):p.z=T}else b&&(p.z=b.z+e(p._,b._));p.parent.A=c(p,b,p.parent.A||y[0])}function l(p){p._.x=p.z+p.parent.m,p.m+=p.parent.m}function c(p,v,y){if(v){for(var b=p,T=p,M=v,R=b.parent.children[0],L=b.m,N=T.m,z=M.m,H=R.m,X;M=P5(M),b=R5(b),M&&b;)R=R5(R),T=P5(T),T.a=p,X=M.z+z-b.z-L+e(M._,b._),X>0&&(kie(Uie(M,p,y),p,X),L+=X,N+=X),z+=M.m,L+=b.m,H+=R.m,N+=T.m;M&&!P5(T)&&(T.t=M,T.m+=z-N),b&&!R5(R)&&(R.t=b,R.m+=L-H,y=p)}return y}function h(p){p.x*=t,p.y=p.depth*n}return i.separation=function(p){return arguments.length?(e=p,i):e},i.size=function(p){return arguments.length?(r=!1,t=+p[0],n=+p[1],i):r?null:[t,n]},i.nodeSize=function(p){return arguments.length?(r=!0,t=+p[0],n=+p[1],i):r?[t,n]:null},i}function Hie(e,t){return e.parent===t.parent?1:2}function Wie(e){return e.reduce(Gie,0)/e.length}function Gie(e,t){return e+t.x}function Zie(e){return 1+e.reduce(Xie,0)}function Xie(e,t){return Math.max(e,t.y)}function Yie(e){for(var t;t=e.children;)e=t[0];return e}function $ie(e){for(var t;t=e.children;)e=t[t.length-1];return e}function qie(){var e=Hie,t=1,n=1,r=!1;function i(s){var l,c=0;s.eachAfter(function(b){var T=b.children;T?(b.x=Wie(T),b.y=Zie(T)):(b.x=l?c+=e(b,l):0,b.y=0,l=b)});var h=Yie(s),p=$ie(s),v=h.x-e(h,p)/2,y=p.x+e(p,h)/2;return s.eachAfter(r?function(b){b.x=(b.x-s.x)*t,b.y=(s.y-b.y)*n}:function(b){b.x=(b.x-v)/(y-v)*t,b.y=(1-(s.y?b.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}const Tz=e=>t=>n=>{const{field:r="value",nodeSize:i,separation:s,sortBy:l,as:c=["x","y"]}=t,[h,p]=c,v=Db(n,M=>M.children).sum(M=>M[r]).sort(l),y=e();y.size([1,1]),i&&y.nodeSize(i),s&&y.separation(s),y(v);const b=[];v.each(M=>{M[h]=M.x,M[p]=M.y,M.name=M.data.name,b.push(M)});const T=v.links();return T.forEach(M=>{M[h]=[M.source[h],M.target[h]],M[p]=[M.source[p],M.target[p]]}),{nodes:b,edges:T}},Az=e=>Tz(qie)(e);Az.props={};const Cz=e=>Tz(Vie)(e);Cz.props={};const Kie={sortBy:(e,t)=>t.value-e.value},Qie={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},Jie={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},eoe={text:"",fontSize:10},Oz=e=>{const{data:t,encode:n={},scale:r={},style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,v=n==null?void 0:n.value,{nodes:y,edges:b}=Cz(Object.assign(Object.assign(Object.assign({},Kie),s),{field:v}))(t),T=cm(p,"node",{title:"name",items:["value"]},!0),M=cm(p,"link",{title:"",items:[R=>({name:"source",value:R.source.name}),R=>({name:"target",value:R.target.name})]});return[ui({},Jie,{data:b,encode:xo(n,"link"),scale:xo(r,"link"),labels:c,style:Object.assign({stroke:"#999"},xo(i,"link")),tooltip:M,animate:fm(h,"link")}),ui({},Qie,{data:y,scale:xo(r,"node"),encode:xo(n,"node"),labels:[Object.assign(Object.assign({},eoe),xo(i,"label")),...l],style:Object.assign({},xo(i,"node")),tooltip:T,animate:fm(h,"node")})]};Oz.props={};var toe=1664525,noe=1013904223,Mz=4294967296;function roe(){var e=1;return function(){return(e=(toe*e+noe)%Mz)/Mz}}var ioe=D(52677);function ooe(e){return ioe(e)==="object"&&"length"in e?e:Array.from(e)}function aoe(e,t){for(var n=e.length,r,i;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function K0e(e){return Rz(e,lcg())}function Rz(e,t){for(var n=0,r=(e=aoe(Array.from(e),t)).length,i=[],s,l;n<r;)s=e[n],l&&Pz(l,s)?++n:(l=loe(i=soe(i,s)),n=0);return l}function soe(e,t){var n,r;if(I5(t,e))return[t];for(n=0;n<e.length;++n)if(UA(t,e[n])&&I5(IE(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(UA(IE(e[n],e[r]),t)&&UA(IE(e[n],t),e[r])&&UA(IE(e[r],t),e[n])&&I5(Iz(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function UA(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Pz(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function I5(e,t){for(var n=0;n<t.length;++n)if(!Pz(e,t[n]))return!1;return!0}function loe(e){switch(e.length){case 1:return uoe(e[0]);case 2:return IE(e[0],e[1]);case 3:return Iz(e[0],e[1],e[2])}}function uoe(e){return{x:e.x,y:e.y,r:e.r}}function IE(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,l=t.y,c=t.r,h=s-n,p=l-r,v=c-i,y=Math.sqrt(h*h+p*p);return{x:(n+s+h/y*v)/2,y:(r+l+p/y*v)/2,r:(y+i+c)/2}}function Iz(e,t,n){var r=e.x,i=e.y,s=e.r,l=t.x,c=t.y,h=t.r,p=n.x,v=n.y,y=n.r,b=r-l,T=r-p,M=i-c,R=i-v,L=h-s,N=y-s,z=r*r+i*i-s*s,H=z-l*l-c*c+h*h,X=z-p*p-v*v+y*y,Y=T*M-b*R,ne=(M*X-R*H)/(Y*2)-r,ve=(R*L-M*N)/Y,Ee=(T*H-b*X)/(Y*2)-i,Ie=(b*N-T*L)/Y,Ye=ve*ve+Ie*Ie-1,$e=2*(s+ne*ve+Ee*Ie),St=ne*ne+Ee*Ee-s*s,Qe=-(Math.abs(Ye)>1e-6?($e+Math.sqrt($e*$e-4*Ye*St))/(2*Ye):St/$e);return{x:r+ne+ve*Qe,y:i+Ee+Ie*Qe,r:Qe}}function Lz(e,t,n){var r=e.x-t.x,i,s,l=e.y-t.y,c,h,p=r*r+l*l;p?(s=t.r+n.r,s*=s,h=e.r+n.r,h*=h,s>h?(i=(p+h-s)/(2*p),c=Math.sqrt(Math.max(0,h/p-i*i)),n.x=e.x-i*r-c*l,n.y=e.y-i*l+c*r):(i=(p+s-h)/(2*p),c=Math.sqrt(Math.max(0,s/p-i*i)),n.x=t.x+i*r-c*l,n.y=t.y+i*l+c*r)):(n.x=t.x+n.r,n.y=t.y)}function Dz(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Nz(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function jA(e){this._=e,this.next=null,this.previous=null}function Fz(e,t){if(!(s=(e=ooe(e)).length))return 0;var n,r,i,s,l,c,h,p,v,y,b;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Lz(r,n,i=e[2]),n=new jA(n),r=new jA(r),i=new jA(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(h=3;h<s;++h){Lz(n._,r._,i=e[h]),i=new jA(i),p=r.next,v=n.previous,y=r._.r,b=n._.r;do if(y<=b){if(Dz(p._,i._)){r=p,n.next=r,r.previous=n,--h;continue e}y+=p._.r,p=p.next}else{if(Dz(v._,i._)){n=v,n.next=r,r.previous=n,--h;continue e}b+=v._.r,v=v.previous}while(p!==v.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,l=Nz(n);(i=i.next)!==r;)(c=Nz(i))<l&&(n=i,l=c);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Rz(n,t),h=0;h<s;++h)n=e[h],n.x-=i.x,n.y-=i.y;return i.r}function Q0e(e){return Fz(e,lcg()),e}function coe(e){return Math.sqrt(e.value)}function foe(){var e=null,t=1,n=1,r=n1;function i(s){var l=roe();return s.x=t/2,s.y=n/2,e?s.eachBefore(Bz(e)).eachAfter(L5(r,.5,l)).eachBefore(kz(1)):s.eachBefore(Bz(coe)).eachAfter(L5(n1,1,l)).eachAfter(L5(r,s.r/Math.min(t,n),l)).eachBefore(kz(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=oA(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Wb(+s),i):r},i}function Bz(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function L5(e,t,n){return function(r){if(i=r.children){var i,s,l=i.length,c=e(r)*t||0,h;if(c)for(s=0;s<l;++s)i[s].r+=c;if(h=Fz(i,n),c)for(s=0;s<l;++s)i[s].r-=c;r.r=h+c}}}function kz(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var hoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const doe=(e,t)=>({size:[e,t],padding:0,sort:(n,r)=>r.value-n.value}),poe=(e,t,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,e]},y:{domain:[0,t]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),voe={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.r*2},moe={title:e=>e.data.name,items:[{field:"value"}]},goe=(e,t,n)=>{const{value:r}=n,i=Hr(e)?CP().path(t.path)(e):Db(e);return r?i.sum(s=>dm(r)(s)).sort(t.sort):i.count(),foe().size(t.size).padding(t.padding)(i),i.descendants()},zz=(e,t)=>{const{width:n,height:r}=t,{data:i,encode:s={},scale:l={},style:c={},layout:h={},labels:p=[],tooltip:v={}}=e,y=hoe(e,["data","encode","scale","style","layout","labels","tooltip"]),b=poe(n,r,s),T=goe(i,ui({},doe(n,r),h),ui({},b.encode,s)),M=xo(c,"label");return ui({},b,Object.assign(Object.assign({data:T,encode:s,scale:l,style:c,labels:[Object.assign(Object.assign({},voe),M),...p]},y),{tooltip:OT(v,moe),axis:!1}))};zz.props={};function yoe(e){return e.target.depth}function _oe(e){return e.depth}function boe(e,t){return t-1-e.height}function VA(e,t){return e.sourceLinks.length?e.depth:t-1}function xoe(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?Xp(e.sourceLinks,yoe)-1:0}function HA(e){return function(){return e}}function Uz(e,t){return WA(e.source,t.source)||e.index-t.index}function jz(e,t){return WA(e.target,t.target)||e.index-t.index}function WA(e,t){return e.y0-t.y0}function D5(e){return e.value}function Eoe(e){return e.index}function Soe(e){return e.nodes}function woe(e){return e.links}function Vz(e,t){const n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Hz({nodes:e}){for(const t of e){let n=t.y0,r=n;for(const i of t.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of t.targetLinks)i.y1=r+i.width/2,r+=i.width}}function Toe(){let e=0,t=0,n=1,r=1,i=24,s=8,l,c=Eoe,h=VA,p,v,y,b=Soe,T=woe,M=6;function R(bt){const Ht={nodes:b(bt),links:T(bt)};return L(Ht),N(Ht),z(Ht),H(Ht),ne(Ht),Hz(Ht),Ht}R.update=function(bt){return Hz(bt),bt},R.nodeId=function(bt){return arguments.length?(c=typeof bt=="function"?bt:HA(bt),R):c},R.nodeAlign=function(bt){return arguments.length?(h=typeof bt=="function"?bt:HA(bt),R):h},R.nodeDepth=function(bt){return arguments.length?(p=bt,R):p},R.nodeSort=function(bt){return arguments.length?(v=bt,R):v},R.nodeWidth=function(bt){return arguments.length?(i=+bt,R):i},R.nodePadding=function(bt){return arguments.length?(s=l=+bt,R):s},R.nodes=function(bt){return arguments.length?(b=typeof bt=="function"?bt:HA(bt),R):b},R.links=function(bt){return arguments.length?(T=typeof bt=="function"?bt:HA(bt),R):T},R.linkSort=function(bt){return arguments.length?(y=bt,R):y},R.size=function(bt){return arguments.length?(e=t=0,n=+bt[0],r=+bt[1],R):[n-e,r-t]},R.extent=function(bt){return arguments.length?(e=+bt[0][0],n=+bt[1][0],t=+bt[0][1],r=+bt[1][1],R):[[e,t],[n,r]]},R.iterations=function(bt){return arguments.length?(M=+bt,R):M};function L({nodes:bt,links:Ht}){bt.forEach((kt,Mn)=>{kt.index=Mn,kt.sourceLinks=[],kt.targetLinks=[]});const Ot=new Map(bt.map(kt=>[c(kt),kt]));if(Ht.forEach((kt,Mn)=>{kt.index=Mn;let{source:Wn,target:cr}=kt;typeof Wn!="object"&&(Wn=kt.source=Vz(Ot,Wn)),typeof cr!="object"&&(cr=kt.target=Vz(Ot,cr)),Wn.sourceLinks.push(kt),cr.targetLinks.push(kt)}),y!=null)for(const{sourceLinks:kt,targetLinks:Mn}of bt)kt.sort(y),Mn.sort(y)}function N({nodes:bt}){for(const Ht of bt)Ht.value=Ht.fixedValue===void 0?Math.max(Sp(Ht.sourceLinks,D5),Sp(Ht.targetLinks,D5)):Ht.fixedValue}function z({nodes:bt}){const Ht=bt.length;let Ot=new Set(bt),kt=new Set,Mn=0;for(;Ot.size;){if(Ot.forEach(Wn=>{Wn.depth=Mn;for(const{target:cr}of Wn.sourceLinks)kt.add(cr)}),++Mn>Ht)throw new Error("circular link");Ot=kt,kt=new Set}if(p){const Wn=Math.max(yl(bt,ar=>ar.depth)+1,0);let cr;for(let ar=0;ar<bt.length;ar++)cr=bt[ar],cr.depth=p.call(null,cr,Wn)}}function H({nodes:bt}){const Ht=bt.length;let Ot=new Set(bt),kt=new Set,Mn=0;for(;Ot.size;){if(Ot.forEach(Wn=>{Wn.height=Mn;for(const{source:cr}of Wn.targetLinks)kt.add(cr)}),++Mn>Ht)throw new Error("circular link");Ot=kt,kt=new Set}}function X({nodes:bt}){const Ht=Math.max(yl(bt,Mn=>Mn.depth)+1,0),Ot=(n-e-i)/(Ht-1),kt=new Array(Ht).fill(0).map(()=>[]);for(const Mn of bt){const Wn=Math.max(0,Math.min(Ht-1,Math.floor(h.call(null,Mn,Ht))));Mn.layer=Wn,Mn.x0=e+Wn*Ot,Mn.x1=Mn.x0+i,kt[Wn]?kt[Wn].push(Mn):kt[Wn]=[Mn]}if(v)for(const Mn of kt)Mn.sort(v);return kt}function Y(bt){const Ht=Xp(bt,Ot=>(r-t-(Ot.length-1)*l)/Sp(Ot,D5));for(const Ot of bt){let kt=t;for(const Mn of Ot){Mn.y0=kt,Mn.y1=kt+Mn.value*Ht,kt=Mn.y1+l;for(const Wn of Mn.sourceLinks)Wn.width=Wn.value*Ht}kt=(r-kt+l)/(Ot.length+1);for(let Mn=0;Mn<Ot.length;++Mn){const Wn=Ot[Mn];Wn.y0+=kt*(Mn+1),Wn.y1+=kt*(Mn+1)}Qe(Ot)}}function ne(bt){const Ht=X(bt);l=Math.min(s,(r-t)/(yl(Ht,Ot=>Ot.length)-1)),Y(Ht);for(let Ot=0;Ot<M;++Ot){const kt=Math.pow(.99,Ot),Mn=Math.max(1-kt,(Ot+1)/M);Ee(Ht,kt,Mn),ve(Ht,kt,Mn)}}function ve(bt,Ht,Ot){for(let kt=1,Mn=bt.length;kt<Mn;++kt){const Wn=bt[kt];for(const cr of Wn){let ar=0,Yr=0;for(const{source:so,value:mi}of cr.targetLinks){const ti=mi*(cr.layer-so.layer);ar+=lt(so,cr)*ti,Yr+=ti}if(!(Yr>0))continue;const Pi=(ar/Yr-cr.y0)*Ht;cr.y0+=Pi,cr.y1+=Pi,St(cr)}v===void 0&&Wn.sort(WA),Wn.length&&Ie(Wn,Ot)}}function Ee(bt,Ht,Ot){for(let kt=bt.length,Mn=kt-2;Mn>=0;--Mn){const Wn=bt[Mn];for(const cr of Wn){let ar=0,Yr=0;for(const{target:so,value:mi}of cr.sourceLinks){const ti=mi*(so.layer-cr.layer);ar+=ht(cr,so)*ti,Yr+=ti}if(!(Yr>0))continue;const Pi=(ar/Yr-cr.y0)*Ht;cr.y0+=Pi,cr.y1+=Pi,St(cr)}v===void 0&&Wn.sort(WA),Wn.length&&Ie(Wn,Ot)}}function Ie(bt,Ht){const Ot=bt.length>>1,kt=bt[Ot];$e(bt,kt.y0-l,Ot-1,Ht),Ye(bt,kt.y1+l,Ot+1,Ht),$e(bt,r,bt.length-1,Ht),Ye(bt,t,0,Ht)}function Ye(bt,Ht,Ot,kt){for(;Ot<bt.length;++Ot){const Mn=bt[Ot],Wn=(Ht-Mn.y0)*kt;Wn>1e-6&&(Mn.y0+=Wn,Mn.y1+=Wn),Ht=Mn.y1+l}}function $e(bt,Ht,Ot,kt){for(;Ot>=0;--Ot){const Mn=bt[Ot],Wn=(Mn.y1-Ht)*kt;Wn>1e-6&&(Mn.y0-=Wn,Mn.y1-=Wn),Ht=Mn.y0-l}}function St({sourceLinks:bt,targetLinks:Ht}){if(y===void 0){for(const{source:{sourceLinks:Ot}}of Ht)Ot.sort(jz);for(const{target:{targetLinks:Ot}}of bt)Ot.sort(Uz)}}function Qe(bt){if(y===void 0)for(const{sourceLinks:Ht,targetLinks:Ot}of bt)Ht.sort(jz),Ot.sort(Uz)}function lt(bt,Ht){let Ot=bt.y0-(bt.sourceLinks.length-1)*l/2;for(const{target:kt,width:Mn}of bt.sourceLinks){if(kt===Ht)break;Ot+=Mn+l}for(const{source:kt,width:Mn}of Ht.targetLinks){if(kt===bt)break;Ot-=Mn}return Ot}function ht(bt,Ht){let Ot=Ht.y0-(Ht.targetLinks.length-1)*l/2;for(const{source:kt,width:Mn}of Ht.targetLinks){if(kt===bt)break;Ot+=Mn+l}for(const{target:kt,width:Mn}of bt.sourceLinks){if(kt===Ht)break;Ot-=Mn}return Ot}return R}const Aoe={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:e=>e.nodes,links:e=>e.links,nodeSort:void 0,linkSort:void 0,iterations:6},Coe={left:_oe,right:boe,center:xoe,justify:VA};function Ooe(e){const t=typeof e;return t==="string"?Coe[e]||VA:t==="function"?e:VA}const Wz=e=>t=>{const{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:s,nodePadding:l,nodeDepth:c,nodes:h,links:p,linkSort:v,iterations:y}=Object.assign({},Aoe,e),b=Toe().nodeSort(r).linkSort(v).links(p).nodes(h).nodeWidth(s).nodePadding(l).nodeDepth(c).nodeAlign(Ooe(i)).iterations(y).extent([[0,0],[1,1]]);typeof n=="function"&&b.nodeId(n);const T=b(t),{nodes:M,links:R}=T,L=M.map(z=>{const{x0:H,x1:X,y0:Y,y1:ne}=z;return Object.assign(Object.assign({},z),{x:[H,X,X,H],y:[Y,Y,ne,ne]})}),N=R.map(z=>{const{source:H,target:X}=z,Y=H.x1,ne=X.x0,ve=z.width/2;return Object.assign(Object.assign({},z),{x:[Y,Y,ne,ne],y:[z.y0+ve,z.y0-ve,z.y1+ve,z.y1-ve]})});return{nodes:L,links:N}};Wz.props={};var Moe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Roe={nodeId:e=>e.key,nodeWidth:.02,nodePadding:.02},Poe={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},Ioe={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},Loe={textAlign:e=>e.x[0]<.5?"start":"end",position:e=>e.x[0]<.5?"right":"left",fontSize:10},Gz=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,{links:v,nodes:y}=OR(t,n),b=xo(n,"node"),T=xo(n,"link"),{key:M=Ie=>Ie.key,color:R=M}=b,{links:L,nodes:N}=Wz(Object.assign(Object.assign(Object.assign({},Roe),{nodeId:dm(M)}),s))({links:v,nodes:y}),z=xo(i,"label"),{text:H=M,spacing:X=5}=z,Y=Moe(z,["text","spacing"]),ne=dm(M),ve=cm(p,"node",{title:ne,items:[{field:"value"}]},!0),Ee=cm(p,"link",{title:"",items:[Ie=>({name:"source",value:ne(Ie.source)}),Ie=>({name:"target",value:ne(Ie.target)})]});return[ui({},Poe,{data:N,encode:Object.assign(Object.assign({},b),{color:R}),scale:r,style:xo(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},Loe),{text:H,dx:Ie=>Ie.x[0]<.5?X:-X}),Y),...l],tooltip:ve,animate:fm(h,"node"),axis:!1}),ui({},Ioe,{data:L,encode:T,labels:c,style:Object.assign({fill:T.color?void 0:"#aaa",strokeWidth:0},xo(i,"link")),tooltip:Ee,animate:fm(h,"link")})]};Gz.props={};function Doe(e,t){return t.value-e.value}function Noe(e,t){return t.frequency-e.frequency}function Foe(e,t){return`${e.id}`.localeCompare(`${t.id}`)}function Boe(e,t){return`${e.name}`.localeCompare(`${t.name}`)}const koe={y:0,thickness:.05,weight:!1,marginRatio:.1,id:e=>e.id,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null};function zoe(e){const{y:t,thickness:n,weight:r,marginRatio:i,id:s,source:l,target:c,sourceWeight:h,targetWeight:p,sortBy:v}=Object.assign(Object.assign({},koe),e);function y(L){const N=L.nodes.map(H=>Object.assign({},H)),z=L.edges.map(H=>Object.assign({},H));return b(N,z),T(N,z),M(N,z),R(N,z),{nodes:N,edges:z}}function b(L,N){N.forEach(X=>{X.source=l(X),X.target=c(X),X.sourceWeight=h(X),X.targetWeight=p(X)});const z=Fu(N,X=>X.source),H=Fu(N,X=>X.target);return L.forEach(X=>{X.id=s(X);const Y=z.has(X.id)?z.get(X.id):[],ne=H.has(X.id)?H.get(X.id):[];X.frequency=Y.length+ne.length,X.value=Sp(Y,ve=>ve.sourceWeight)+Sp(ne,ve=>ve.targetWeight)}),{nodes:L,edges:N}}function T(L,N){const z=typeof v=="function"?v:fe[v];z&&L.sort(z)}function M(L,N){const z=L.length;if(!z)throw mv("Invalid nodes: it's empty!");if(!r){const Y=1/z;return L.forEach((ne,ve)=>{ne.x=(ve+.5)*Y,ne.y=t}),{nodes:L,edges:N}}const H=i/(2*z),X=L.reduce((Y,ne)=>Y+=ne.value,0);return L.reduce((Y,ne)=>{ne.weight=ne.value/X,ne.width=ne.weight*(1-i),ne.height=n;const ve=H+Y,Ee=ve+ne.width,Ie=t-n/2,Ye=Ie+n;return ne.x=[ve,Ee,Ee,ve],ne.y=[Ie,Ie,Ye,Ye],Y+ne.width+2*H},0),{nodes:L,edges:N}}function R(L,N){const z=new Map(L.map(Y=>[Y.id,Y]));if(!r)return N.forEach(Y=>{const ne=l(Y),ve=c(Y),Ee=z.get(ne),Ie=z.get(ve);Ee&&Ie&&(Y.x=[Ee.x,Ie.x],Y.y=[Ee.y,Ie.y])}),{nodes:L,edges:N};N.forEach(Y=>{Y.x=[0,0,0,0],Y.y=[t,t,t,t]});const H=Fu(N,Y=>Y.source),X=Fu(N,Y=>Y.target);L.forEach(Y=>{const{edges:ne,width:ve,x:Ee,y:Ie,value:Ye,id:$e}=Y,St=H.get($e)||[],Qe=X.get($e)||[];let lt=0;St.map(ht=>{const bt=ht.sourceWeight/Ye*ve;ht.x[0]=Ee[0]+lt,ht.x[1]=Ee[0]+lt+bt,lt+=bt}),Qe.forEach(ht=>{const bt=ht.targetWeight/Ye*ve;ht.x[3]=Ee[0]+lt,ht.x[2]=Ee[0]+lt+bt,lt+=bt})})}return y}const N5=e=>t=>zoe(e)(t);N5.props={};var Zz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const F5={y:0,thickness:.05,marginRatio:.1,id:e=>e.key,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null},Uoe={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},joe={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1,strokeWidth:1}},Voe={position:"outside",fontSize:10},Xz=(e,t)=>{const{data:n,encode:r={},scale:i,style:s={},layout:l={},nodeLabels:c=[],linkLabels:h=[],animate:p={},tooltip:v={}}=e,{nodes:y,links:b}=OR(n,r),T=xo(r,"node"),M=xo(r,"link"),{key:R=ht=>ht.key,color:L=R}=T,{linkEncodeColor:N=ht=>ht.source}=M,{nodeWidthRatio:z=F5.thickness,nodePaddingRatio:H=F5.marginRatio}=l,X=Zz(l,["nodeWidthRatio","nodePaddingRatio"]),{nodes:Y,edges:ne}=N5(Object.assign(Object.assign(Object.assign(Object.assign({},F5),{id:dm(R),thickness:z,marginRatio:H}),X),{weight:!0}))({nodes:y,edges:b}),ve=xo(s,"label"),{text:Ee=R}=ve,Ie=Zz(ve,["text"]),Ye=cm(v,"node",{title:"",items:[ht=>({name:ht.key,value:ht.value})]},!0),$e=cm(v,"link",{title:"",items:[ht=>({name:`${ht.source} -> ${ht.target}`,value:ht.value})]}),{height:St,width:Qe}=t,lt=Math.min(St,Qe);return[ui({},joe,{data:ne,encode:Object.assign(Object.assign({},M),{color:N}),labels:h,style:Object.assign({fill:N?void 0:"#aaa"},xo(s,"link")),tooltip:$e,animate:fm(p,"link")}),ui({},Uoe,{data:Y,encode:Object.assign(Object.assign({},T),{color:L}),scale:i,style:xo(s,"node"),coordinate:{type:"polar",outerRadius:(lt-20)/lt,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},Voe),{text:Ee}),Ie),...c],tooltip:Ye,animate:fm(p,"node"),axis:!1})]};Xz.props={};var Hoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Woe=(e,t)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[e,t],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),Goe=(e,t)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,e],range:[0,1]},y:{domain:[0,t],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),Zoe={fontSize:10,text:e=>tE(e.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.x1-e.x0},Xoe={title:e=>{var t,n;return(n=(t=e.path)===null||t===void 0?void 0:t.join)===null||n===void 0?void 0:n.call(t,".")},items:[{field:"value"}]},Yoe={title:e=>tE(e.path),items:[{field:"value"}]},Yz=(e,t)=>{const{width:n,height:r,options:i}=t,{data:s,encode:l={},scale:c,style:h={},layout:p={},labels:v=[],tooltip:y={}}=e,b=Hoe(e,["data","encode","scale","style","layout","labels","tooltip"]),T=bl(i,["interaction","treemapDrillDown"]),M=ui({},Woe(n,r),p,{layer:T?z=>z.depth===1:p.layer}),[R,L]=Jk(s,M,l),N=xo(h,"label");return ui({},Goe(n,r),Object.assign(Object.assign({data:R,scale:c,style:h,labels:[Object.assign(Object.assign({},Zoe),N),...v]},b),{encode:l,tooltip:OT(y,Xoe),axis:!1}),T?{interaction:Object.assign(Object.assign({},b.interaction),{treemapDrillDown:T?Object.assign(Object.assign({},T),{originData:L,layout:M}):void 0}),encode:Object.assign({color:z=>tE(z.path)},l),tooltip:OT(y,Yoe)}:{})};Yz.props={};function $oe(){return{"data.arc":N5,"data.cluster":Az,"mark.forceGraph":wz,"mark.tree":Oz,"mark.pack":zz,"mark.sankey":Gz,"mark.chord":Xz,"mark.treemap":Yz}}var $z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function qoe(e,t){return Xp(e,n=>t[n])}function Koe(e,t){return yl(e,n=>t[n])}function qz(e,t){const n=B5(e,t)*2.5-k5(e,t)*1.5;return Xp(e,r=>t[r]>=n?t[r]:NaN)}function B5(e,t){return uA(e,.25,n=>t[n])}function Qoe(e,t){return uA(e,.5,n=>t[n])}function k5(e,t){return uA(e,.75,n=>t[n])}function Kz(e,t){const n=k5(e,t)*2.5-B5(e,t)*1.5;return yl(e,r=>t[r]<=n?t[r]:NaN)}function Joe(){return(e,t)=>{const{encode:n}=t,{y:r,x:i}=n,{value:s}=r,{value:l}=i;return[Array.from(Fu(e,p=>l[+p]).values()).flatMap(p=>{const v=qz(p,s),y=Kz(p,s);return p.filter(b=>s[b]<v||s[b]>y)}),t]}}const Qz=e=>{const{data:t,encode:n,style:r={},tooltip:i={},transform:s,animate:l}=e,c=$z(e,["data","encode","style","tooltip","transform","animate"]),{point:h=!0}=r,p=$z(r,["point"]),{y:v}=n,y={y:v,y1:v,y2:v,y3:v,y4:v},b={y1:B5,y2:Qoe,y3:k5},T=cm(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),M=cm(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!h)return Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:qoe},b),{y4:Koe})],encode:Object.assign(Object.assign({},n),y),style:p,tooltip:T},c);const R=xo(p,"box"),L=xo(p,"point");return[Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:qz},b),{y4:Kz})],encode:Object.assign(Object.assign({},n),y),style:R,tooltip:T,animate:fm(l,"box")},c),{type:"point",data:t,transform:[{type:Joe}],encode:n,style:Object.assign({},L),tooltip:M,animate:fm(l,"point")}]};Qz.props={};const Jz=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))/2,eae=(e,t)=>{if(!t)return;const{coordinate:n}=t;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(i,s,l)=>{const{document:c}=t.canvas,{color:h,index:p}=s,v=c.createElement("g",{}),y=Jz(i[0],i[1]),b=Jz(i[0],r)*2,T=c.createElement("path",{style:Object.assign(Object.assign(Object.assign({path:[["M",...i[0]],["A",y,y,0,1,0,...i[1]],["A",b+y*2,b+y*2,0,0,0,...i[2]],["A",y,y,0,1,p===0?0:1,...i[3]],["A",b,b,0,0,1,...i[0]],["Z"]]},l),wM(e,["shape","last","first"])),{fill:h||l.color})});return v.appendChild(T),v}};var GA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const tae=(e,t)=>{const{shape:n,radius:r}=e,i=GA(e,["shape","radius"]),s=xo(i,"pointer"),l=xo(i,"pin"),{shape:c}=s,h=GA(s,["shape"]),{shape:p}=l,v=GA(l,["shape"]),{coordinate:y,theme:b}=t;return(T,M)=>{const R=T.map(lt=>y.invert(lt)),[L,N,z]=nM(y,"polar"),H=y.clone(),{color:X}=M,Y=g2({startAngle:L,endAngle:N,innerRadius:z,outerRadius:r});Y.push(["cartesian"]),H.update({transformations:Y});const ne=R.map(lt=>H.map(lt)),[ve,Ee]=RL(ne),[Ie,Ye]=y.getCenter(),$e=Object.assign(Object.assign({x1:ve,y1:Ee,x2:Ie,y2:Ye,stroke:X},h),i),St=Object.assign(Object.assign({cx:Ie,cy:Ye,stroke:X},v),i),Qe=Ua(new $l);return gv(c)||(typeof c=="function"?Qe.append(()=>c(ne,M,H,b)):Qe.append("line").call(ma,$e).node()),gv(p)||(typeof p=="function"?Qe.append(()=>p(ne,M,H,b)):Qe.append("circle").call(ma,St).node()),Qe.node()}},eU={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},nae={style:{shape:tae,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},rae={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"}};function iae(e){if((0,$u.Z)(e)){const t=Math.max(0,Math.min(e,1));return{percent:t,target:t,total:1}}return e}function oae(e,t){const{name:n="score",target:r,total:i,percent:s,thresholds:l=[]}=iae(e),c=s||r,h=s?1:i,p=Object.assign({y:{domain:[0,h]}},t);return l.length?{targetData:[{x:n,y:c,color:"target"}],totalData:l.map((v,y)=>({x:n,y:y>=1?v-l[y-1]:v,color:y})),target:c,total:h,scale:p}:{targetData:[{x:n,y:c,color:"target"}],totalData:[{x:n,y:c,color:"target"},{x:n,y:h-c,color:"total"}],target:c,total:h,scale:p}}function aae(e,{target:t,total:n}){const{content:r}=e;return r?r(t,n):t.toString()}const tU=e=>{const{data:t={},scale:n={},style:r={},animate:i={},transform:s=[]}=e,l=GA(e,["data","scale","style","animate","transform"]),{targetData:c,totalData:h,target:p,total:v,scale:y}=oae(t,n),b=xo(r,"text"),T=Z3(r,["pointer","pin"]),M=xo(r,"arc"),R=M.shape;return[ui({},eU,Object.assign({type:"interval",transform:[{type:"stackY"}],data:h,scale:y,style:R==="round"?Object.assign(Object.assign({},M),{shape:eae}):M,animate:typeof i=="object"?xo(i,"arc"):i},l)),ui({},eU,nae,Object.assign({type:"point",data:c,scale:y,style:T,animate:typeof i=="object"?xo(i,"indicator"):i},l)),ui({},rae,{style:Object.assign({text:aae(b,{target:p,total:v})},b),animate:typeof i=="object"?xo(i,"text"):i})]};tU.props={};const z5=Math.PI/180,LE=64,ZA=2048;function sae(e){return e.text}function lae(){return"serif"}function nU(){return"normal"}function uae(e){return e.value}function cae(){return~~(Math.random()*2)*90}function fae(){return 1}function hae(){}function dae(e,t,n,r){if(t.sprite)return;const i=e.context,s=e.ratio;i.clearRect(0,0,(LE<<5)/s,ZA/s);let l=0,c=0,h=0;const p=n.length;for(--r;++r<p;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font;let b=i.measureText(t.text+"m").width*s,T=t.size<<1;if(t.rotate){const M=Math.sin(t.rotate*z5),R=Math.cos(t.rotate*z5),L=b*R,N=b*M,z=T*R,H=T*M;b=Math.max(Math.abs(L+H),Math.abs(L-H))+31>>5<<5,T=~~Math.max(Math.abs(N+z),Math.abs(N-z))}else b=b+31>>5<<5;if(T>h&&(h=T),l+b>=LE<<5&&(l=0,c+=h,h=0),c+T>=ZA)break;i.translate((l+(b>>1))/s,(c+(T>>1))/s),t.rotate&&i.rotate(t.rotate*z5),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=b,t.height=T,t.xoff=l,t.yoff=c,t.x1=b>>1,t.y1=T>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=b}const v=i.getImageData(0,0,(LE<<5)/s,ZA/s).data,y=[];for(;--r>=0;){if(t=n[r],!t.hasText)continue;const b=t.width,T=b>>5;let M=t.y1-t.y0;for(let N=0;N<M*T;N++)y[N]=0;if(l=t.xoff,l==null)return;c=t.yoff;let R=0,L=-1;for(let N=0;N<M;N++){for(let z=0;z<b;z++){const H=T*N+(z>>5),X=v[(c+N)*(LE<<5)+(l+z)<<2]?1<<31-z%32:0;y[H]|=X,R|=X}R?L=N:(t.y0++,M--,N--,c++)}t.y1=t.y0+L,t.sprite=y.slice(0,(t.y1-t.y0)*T)}}function pae(e,t,n){n>>=5;const r=e.sprite,i=e.width>>5,s=e.x-(i<<4),l=s&127,c=32-l,h=e.y1-e.y0;let p=(e.y+e.y0)*n+(s>>5),v;for(let y=0;y<h;y++){v=0;for(let b=0;b<=i;b++)if((v<<c|(b<i?(v=r[y*i+b])>>>l:0))&t[p+b])return!0;p+=n}return!1}function vae(e,t){const n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function mae(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function rU(e){const t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function gae(e){const n=4*e[0]/e[1];let r=0,i=0;return function(s){const l=s<0?-1:1;switch(Math.sqrt(1+4*l*s)-l&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function iU(e){const t=[];let n=-1;for(;++n<e;)t[n]=0;return t}function yae(){return document.createElement("canvas")}function Py(e){return typeof e=="function"?e:function(){return e}}const _ae={archimedean:rU,rectangular:gae};function bae(){let e=[256,256],t=sae,n=lae,r=uae,i=nU,s=cae,l=fae,c=rU,h=Math.random,p=hae,v=[],y=null,b=1/0;const T=nU,M=yae,R={};R.start=function(){const[z,H]=e,X=L(M()),Y=R.board?R.board:iU((e[0]>>5)*e[1]),ne=v.length,ve=[],Ee=v.map(function(St,Qe,lt){return St.text=t.call(this,St,Qe,lt),St.font=n.call(this,St,Qe,lt),St.style=T.call(this,St,Qe,lt),St.weight=i.call(this,St,Qe,lt),St.rotate=s.call(this,St,Qe,lt),St.size=~~r.call(this,St,Qe,lt),St.padding=l.call(this,St,Qe,lt),St}).sort(function(St,Qe){return Qe.size-St.size});let Ie=-1,Ye=R.board?[{x:0,y:0},{x:z,y:H}]:void 0;y&&clearInterval(y),y=setInterval($e,0),$e();function $e(){const St=Date.now();for(;Date.now()-St<b&&++Ie<ne;){const Qe=Ee[Ie];Qe.x=z*(h()+.5)>>1,Qe.y=H*(h()+.5)>>1,dae(X,Qe,Ee,Ie),Qe.hasText&&N(Y,Qe,Ye)&&(p.call(null,"word",{cloud:R,word:Qe}),ve.push(Qe),Ye?R.hasImage||vae(Ye,Qe):Ye=[{x:Qe.x+Qe.x0,y:Qe.y+Qe.y0},{x:Qe.x+Qe.x1,y:Qe.y+Qe.y1}],Qe.x-=e[0]>>1,Qe.y-=e[1]>>1)}R._tags=ve,R._bounds=Ye,Ie>=ne&&(R.stop(),p.call(null,"end",{cloud:R,words:ve,bounds:Ye}))}return R},R.stop=function(){return y&&(clearInterval(y),y=null),R};function L(z){z.width=z.height=1;const H=Math.sqrt(z.getContext("2d").getImageData(0,0,1,1).data.length>>2);z.width=(LE<<5)/H,z.height=ZA/H;const X=z.getContext("2d");return X.fillStyle=X.strokeStyle="red",X.textAlign="center",{context:X,ratio:H}}function N(z,H,X){const Y=H.x,ne=H.y,ve=Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ee=c(e),Ie=h()<.5?1:-1;let Ye,$e=-Ie,St,Qe;for(;(Ye=Ee($e+=Ie))&&(St=~~Ye[0],Qe=~~Ye[1],!(Math.min(Math.abs(St),Math.abs(Qe))>=ve));)if(H.x=Y+St,H.y=ne+Qe,!(H.x+H.x0<0||H.y+H.y0<0||H.x+H.x1>e[0]||H.y+H.y1>e[1])&&(!X||!pae(H,z,e[0]))&&(!X||mae(H,X))){const lt=H.sprite,ht=H.width>>5,bt=e[0]>>5,Ht=H.x-(ht<<4),Ot=Ht&127,kt=32-Ot,Mn=H.y1-H.y0;let Wn,cr=(H.y+H.y0)*bt+(Ht>>5);for(let ar=0;ar<Mn;ar++){Wn=0;for(let Yr=0;Yr<=ht;Yr++)z[cr+Yr]|=Wn<<kt|(Yr<ht?(Wn=lt[ar*ht+Yr])>>>Ot:0);cr+=bt}return delete H.sprite,!0}return!1}return R.createMask=z=>{const H=document.createElement("canvas"),[X,Y]=e;if(!X||!Y)return;const ne=X>>5,ve=iU((X>>5)*Y);H.width=X,H.height=Y;const Ee=H.getContext("2d");Ee.drawImage(z,0,0,z.width,z.height,0,0,X,Y);const Ie=Ee.getImageData(0,0,X,Y).data;for(let Ye=0;Ye<Y;Ye++)for(let $e=0;$e<X;$e++){const St=ne*Ye+($e>>5),Qe=Ye*X+$e<<2,ht=Ie[Qe]>=250&&Ie[Qe+1]>=250&&Ie[Qe+2]>=250?1<<31-$e%32:0;ve[St]|=ht}R.board=ve,R.hasImage=!0},R.timeInterval=function(z){b=z==null?1/0:z},R.words=function(z){v=z},R.size=function(z=[]){e=[+z[0],+z[1]]},R.text=function(z){t=Py(z)},R.font=function(z){n=Py(z)},R.fontWeight=function(z){i=Py(z)},R.rotate=function(z){s=Py(z)},R.spiral=function(z){c=_ae[z]||z},R.fontSize=function(z){r=Py(z)},R.padding=function(z){l=Py(z)},R.random=function(z){h=Py(z)},R.on=function(z){p=Py(z)},R}var xae=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};function Eae(e,t){return{set(n,r,i){if(t[n]===void 0)return this;const s=r?r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this},setAsync(n,r,i){return xae(this,void 0,void 0,function*(){if(t[n]===void 0)return this;const s=r?yield r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this})}}}var Sae=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},wae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Tae={size:[500,500],fontSize:[14,28]};function Aae(e){return new Promise((t,n)=>{if(e instanceof HTMLImageElement){t(e);return}if(typeof e=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=()=>t(r),r.onerror=()=>{console.error(`'image ${e} load failed !!!'`),n()};return}n()})}function Cae(e,t){if(typeof e=="function")return e;if(Array.isArray(e)){const[n,r]=e;if(!t)return()=>(r+n)/2;const[i,s]=t;return s===i?()=>(r+n)/2:({value:l})=>(r-n)/(s-i)*(l-i)+n}return()=>e}const oU=e=>t=>Sae(void 0,void 0,void 0,function*(){const n=Object.assign({},Tae,e),r=bae();yield Eae(r,n).set("fontSize",N=>{const z=t.map(H=>H.value);return Cae(N,[Xp(z),yl(z)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").setAsync("imageMask",Aae,r.createMask),r.words([...t]);const i=r.start(),[s,l]=n.size,c=[{x:0,y:0},{x:s,y:l}],{_bounds:h=c,_tags:p,hasImage:v}=i,y=p.map(N=>{var{x:z,y:H}=N,X=wae(N,["x","y"]);return Object.assign(Object.assign({},X),{x:z+s/2,y:H+l/2})}),[{x:b,y:T},{x:M,y:R}]=h,L={text:"",value:0,opacity:0,fontSize:0};return y.push(Object.assign(Object.assign({},L),{x:v?0:b,y:v?0:T}),Object.assign(Object.assign({},L),{x:v?s:M,y:v?l:R})),y});oU.props={};var Oae=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Mae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Rae(e,t){const{text:n="text",value:r="value"}=t;return e.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}const Pae=(e,t)=>({size:[e,t]}),Iae=(e,t)=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size"},scale:{x:{domain:[0,e],range:[0,1]},y:{domain:[0,t],range:[0,1]},fontSize:{type:"identity"},rotate:{type:"identity"}},style:{textAlign:"center"}}),aU=(e,t)=>Oae(void 0,void 0,void 0,function*(){const{width:n,height:r}=t,{data:i,encode:s={},scale:l,style:c={},layout:h={}}=e,p=Mae(e,["data","encode","scale","style","layout"]),v=Rae(i,s),y=yield oU(Object.assign(Object.assign({},Pae(n,r)),h))(v);return ui({},Iae(n,r),Object.assign(Object.assign({data:y,encode:s,scale:l,style:c},p),{axis:!1}))});aU.props={};const sU=5e3;function lU(e,t,n){return e+(t-e)*n}function Lae(e,t,n,r){return t===0?[[e+1/2*n/Math.PI/2,r/2],[e+1/2*n/Math.PI,r],[e+n/4,r]]:t===1?[[e+1/2*n/Math.PI/2*(Math.PI-2),r],[e+1/2*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:t===2?[[e+1/2*n/Math.PI/2,-r/2],[e+1/2*n/Math.PI,-r],[e+n/4,-r]]:[[e+1/2*n/Math.PI/2*(Math.PI-2),-r],[e+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function Dae(e,t,n,r,i,s,l){const c=Math.ceil(2*e/n*4)*4,h=[];let p=r;for(;p<-Math.PI*2;)p+=Math.PI*2;for(;p>0;)p-=Math.PI*2;p=p/Math.PI/2*n;const v=s-e+p-e*2;h.push(["M",v,t]);let y=0;for(let b=0;b<c;++b){const T=b%4,M=Lae(b*n/4,T,n,i);h.push(["C",M[0][0]+v,-M[0][1]+t,M[1][0]+v,-M[1][1]+t,M[2][0]+v,-M[2][1]+t]),b===c-1&&(y=M[2][0])}return h.push(["L",y+v,l+e]),h.push(["L",v,l+e]),h.push(["Z"]),h}function Nae(e,t,n,r,i,s,l,c,h,p,v){const{fill:y,fillOpacity:b,opacity:T}=i;for(let M=0;M<r;M++){const R=r<=1?1:M/(r-1),L=Dae(c,l+c*n,h,0,c/40,e,t),N=v.createElement("path",{style:{path:L,fill:y,opacity:lU(.2,.9,R)*Number(T||b)}});s.appendChild(N);try{if(p===!1)return;const z=[{transform:"translate(0, 0)"},{transform:`translate(${h*2}px, 0)`}];N.animate(z,{duration:lU(.5*sU,sU,R)*2,iterations:1/0})}catch(z){console.warn("off-screen group animate error!")}}}function Fae(e,t,n){return`
      M ${e} ${t-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function Bae(e,t,n){const i=n*.618;return`
      M ${e-i} ${t-n}
      L ${e+i} ${t-n}
      L ${e+i} ${t+n}
      L ${e-i} ${t+n}
      Z
    `}function kae(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t}
      L ${e} ${t+n}
      L ${e-n} ${t}
      Z
    `}function zae(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t+n}
      L ${e-n} ${t+n}
      Z
    `}function Uae(e,t,n){const r=n*4/3,i=Math.max(r,n*2),s=r/2,l=e,c=s+t-i/2,h=Math.asin(s/((i-s)*.85)),p=Math.sin(h)*s,v=Math.cos(h)*s,y=l-v,b=c+p,T=e,M=c+s/Math.sin(h);return`
      M ${y} ${b}
      A ${s} ${s} 0 1 1 ${y+v*2} ${b}
      Q ${T} ${M} ${e} ${t+i/2}
      Q ${T} ${M} ${y} ${b}
      Z 
    `}const uU={pin:Uae,rect:Bae,circle:Fae,diamond:kae,triangle:zae};var cU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const jae=(e="circle")=>uU[e]||uU.circle,fU=(e,t)=>{if(!t)return;const{coordinate:n}=t,{liquidOptions:r,styleOptions:i}=e,{liquidShape:s,percent:l}=r,{background:c,outline:h={},wave:p={}}=i,v=cU(i,["background","outline","wave"]),{border:y=2,distance:b=0}=h,T=cU(h,["border","distance"]),{length:M=192,count:R=3}=p;return(L,N,z)=>{const{document:H}=t.canvas,{color:X,fillOpacity:Y}=z,ne=Object.assign(Object.assign({fill:X},z),v),ve=H.createElement("g",{}),[Ee,Ie]=n.getCenter(),Ye=n.getSize(),$e=Math.min(...Ye)/2,Qe=(wc(s)?s:jae(s))(Ee,Ie,$e,...Ye);if(Object.keys(c).length){const bt=H.createElement("path",{style:Object.assign({path:Qe,fill:"#fff"},c)});ve.appendChild(bt)}if(l>0){const bt=H.createElement("path",{style:{path:Qe}});ve.appendChild(bt),ve.style.clipPath=bt,Nae(Ee,Ie,1-l,R,ne,ve,bt.getBBox().y,$e*2,M,!0,H)}const lt=H.createElement("path",{style:{path:Qe,fill:"transparent",lineWidth:y+2*b,stroke:"#fff"}}),ht=H.createElement("path",{style:Object.assign(Object.assign(Object.assign({path:Qe,stroke:X,strokeOpacity:Y,lineWidth:y},ne),T),{fill:"transparent"})});return ve.appendChild(lt),ve.appendChild(ht),ve}};fU.props={};var Vae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Hae={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:fU},animate:{enter:{type:"fadeIn"}}},Wae={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},hU=e=>{const{data:t={},style:n={},animate:r}=e,i=Vae(e,["data","style","animate"]),s=Math.max(0,(0,$u.Z)(t)?t:t==null?void 0:t.percent),l=[{percent:s,type:"liquid"}],c=Object.assign(Object.assign({},xo(n,"text")),xo(n,"content")),h=xo(n,"outline"),p=xo(n,"wave"),v=xo(n,"background");return[ui({},Hae,Object.assign({type:"interval",data:l,style:{liquidOptions:{percent:s,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:h,wave:p,background:v})},animate:r},i)),ui({},Wae,{style:Object.assign({text:`${fb(s*100)} %`},c),animate:r})]};hU.props={};var yg=D(69916);const dU=1e-10;function pU(e,t){const n=Zae(e),r=n.filter(function(h){return Gae(h,e)});let i=0,s=0,l;const c=[];if(r.length>1){const h=Xae(r);for(l=0;l<r.length;++l){const v=r[l];v.angle=Math.atan2(v.x-h.x,v.y-h.y)}r.sort(function(v,y){return y.angle-v.angle});let p=r[r.length-1];for(l=0;l<r.length;++l){const v=r[l];s+=(p.x+v.x)*(v.y-p.y);const y={x:(v.x+p.x)/2,y:(v.y+p.y)/2};let b=null;for(let T=0;T<v.parentIndex.length;++T)if(p.parentIndex.indexOf(v.parentIndex[T])>-1){const M=e[v.parentIndex[T]],R=Math.atan2(v.x-M.x,v.y-M.y),L=Math.atan2(p.x-M.x,p.y-M.y);let N=L-R;N<0&&(N+=2*Math.PI);const z=L-N/2;let H=DE(y,{x:M.x+M.radius*Math.sin(z),y:M.y+M.radius*Math.cos(z)});H>M.radius*2&&(H=M.radius*2),(b===null||b.width>H)&&(b={circle:M,width:H,p1:v,p2:p})}b!==null&&(c.push(b),i+=U5(b.circle.radius,b.width),p=v)}}else{let h=e[0];for(l=1;l<e.length;++l)e[l].radius<h.radius&&(h=e[l]);let p=!1;for(l=0;l<e.length;++l)if(DE(e[l],h)>Math.abs(h.radius-e[l].radius)){p=!0;break}p?i=s=0:(i=h.radius*h.radius*Math.PI,c.push({circle:h,p1:{x:h.x,y:h.y+h.radius},p2:{x:h.x-dU,y:h.y+h.radius},width:h.radius*2}))}return s/=2,t&&(t.area=i+s,t.arcArea=i,t.polygonArea=s,t.arcs=c,t.innerPoints=r,t.intersectionPoints=n),i+s}function Gae(e,t){for(let n=0;n<t.length;++n)if(DE(e,t[n])>t[n].radius+dU)return!1;return!0}function Zae(e){const t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){const i=mU(e[n],e[r]);for(let s=0;s<i.length;++s){const l=i[s];l.parentIndex=[n,r],t.push(l)}}return t}function U5(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function DE(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function vU(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);const r=e-(n*n-t*t+e*e)/(2*n),i=t-(n*n-e*e+t*t)/(2*n);return U5(e,r)+U5(t,i)}function mU(e,t){const n=DE(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const s=(r*r-i*i+n*n)/(2*n),l=Math.sqrt(r*r-s*s),c=e.x+s*(t.x-e.x)/n,h=e.y+s*(t.y-e.y)/n,p=-(t.y-e.y)*(l/n),v=-(t.x-e.x)*(l/n);return[{x:c+p,y:h-v},{x:c-p,y:h+v}]}function Xae(e){const t={x:0,y:0};for(let n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function Yae(e,t){t=t||{},t.maxIterations=t.maxIterations||500;const n=t.initialLayout||Qae,r=t.lossFunction||V5;e=$ae(e);const i=n(e,t),s=[],l=[];let c;for(c in i)i.hasOwnProperty(c)&&(s.push(i[c].x),s.push(i[c].y),l.push(c));const p=(0,yg.nelderMead)(function(v){const y={};for(let b=0;b<l.length;++b){const T=l[b];y[T]={x:v[2*b],y:v[2*b+1],radius:i[T].radius}}return r(y,e)},s,t).x;for(let v=0;v<l.length;++v)c=l[v],i[c].x=p[2*v],i[c].y=p[2*v+1];return i}const gU=1e-10;function j5(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+gU?Math.abs(e-t):(0,yg.bisect)(function(r){return vU(e,t,r)-n},0,e+t)}function $ae(e){e=e.slice();const t=[],n={};let r,i,s,l;for(r=0;r<e.length;++r){const c=e[r];c.sets.length==1?t.push(c.sets[0]):c.sets.length==2&&(s=c.sets[0],l=c.sets[1],n[[s,l]]=!0,n[[l,s]]=!0)}for(t.sort((c,h)=>c>h?1:-1),r=0;r<t.length;++r)for(s=t[r],i=r+1;i<t.length;++i)l=t[i],[s,l]in n||e.push({sets:[s,l],size:0});return e}function qae(e,t,n){const r=(0,yg.zerosM)(t.length,t.length),i=(0,yg.zerosM)(t.length,t.length);return e.filter(function(s){return s.sets.length==2}).map(function(s){const l=n[s.sets[0]],c=n[s.sets[1]],h=Math.sqrt(t[l].size/Math.PI),p=Math.sqrt(t[c].size/Math.PI),v=j5(h,p,s.size);r[l][c]=r[c][l]=v;let y=0;s.size+1e-10>=Math.min(t[l].size,t[c].size)?y=1:s.size<=1e-10&&(y=-1),i[l][c]=i[c][l]=y}),{distances:r,constraints:i}}function Kae(e,t,n,r){let i=0,s;for(s=0;s<t.length;++s)t[s]=0;for(s=0;s<n.length;++s){const l=e[2*s],c=e[2*s+1];for(let h=s+1;h<n.length;++h){const p=e[2*h],v=e[2*h+1],y=n[s][h],b=r[s][h],T=(p-l)*(p-l)+(v-c)*(v-c),M=Math.sqrt(T),R=T-y*y;b>0&&M<=y||b<0&&M>=y||(i+=2*R*R,t[2*s]+=4*R*(l-p),t[2*s+1]+=4*R*(c-v),t[2*h]+=4*R*(p-l),t[2*h+1]+=4*R*(v-c))}}return i}function Qae(e,t){let n=ese(e,t);const r=t.lossFunction||V5;if(e.length>=8){const i=Jae(e,t),s=r(i,e),l=r(n,e);s+1e-8<l&&(n=i)}return n}function Jae(e,t){t=t||{};const n=t.restarts||10,r=[],i={};let s;for(s=0;s<e.length;++s){const R=e[s];R.sets.length==1&&(i[R.sets[0]]=r.length,r.push(R))}const l=qae(e,r,i);let c=l.distances;const h=l.constraints,p=(0,yg.norm2)(c.map(yg.norm2))/c.length;c=c.map(function(R){return R.map(function(L){return L/p})});const v=function(R,L){return Kae(R,L,c,h)};let y,b;for(s=0;s<n;++s){const R=(0,yg.zeros)(c.length*2).map(Math.random);b=(0,yg.conjugateGradient)(v,R,t),(!y||b.fx<y.fx)&&(y=b)}const T=y.x,M={};for(s=0;s<r.length;++s){const R=r[s];M[R.sets[0]]={x:T[2*s]*p,y:T[2*s+1]*p,radius:Math.sqrt(R.size/Math.PI)}}if(t.history)for(s=0;s<t.history.length;++s)(0,yg.scale)(t.history[s].x,p);return M}function ese(e,t){const n=t&&t.lossFunction?t.lossFunction:V5,r={},i={};let s;for(let y=0;y<e.length;++y){const b=e[y];b.sets.length==1&&(s=b.sets[0],r[s]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:b.size,radius:Math.sqrt(b.size/Math.PI)},i[s]=[])}e=e.filter(function(y){return y.sets.length==2});for(let y=0;y<e.length;++y){const b=e[y];let T=b.hasOwnProperty("weight")?b.weight:1;const M=b.sets[0],R=b.sets[1];b.size+gU>=Math.min(r[M].size,r[R].size)&&(T=0),i[M].push({set:R,size:b.size,weight:T}),i[R].push({set:M,size:b.size,weight:T})}const l=[];for(s in i)if(i.hasOwnProperty(s)){let y=0;for(let b=0;b<i[s].length;++b)y+=i[s][b].size*i[s][b].weight;l.push({set:s,size:y})}function c(y,b){return b.size-y.size}l.sort(c);const h={};function p(y){return y.set in h}function v(y,b){r[b].x=y.x,r[b].y=y.y,h[b]=!0}v({x:0,y:0},l[0].set);for(let y=1;y<l.length;++y){const b=l[y].set,T=i[b].filter(p);if(s=r[b],T.sort(c),T.length===0)throw"ERROR: missing pairwise overlap information";const M=[];for(let N=0;N<T.length;++N){const z=r[T[N].set],H=j5(s.radius,z.radius,T[N].size);M.push({x:z.x+H,y:z.y}),M.push({x:z.x-H,y:z.y}),M.push({y:z.y+H,x:z.x}),M.push({y:z.y-H,x:z.x});for(let X=N+1;X<T.length;++X){const Y=r[T[X].set],ne=j5(s.radius,Y.radius,T[X].size),ve=mU({x:z.x,y:z.y,radius:H},{x:Y.x,y:Y.y,radius:ne});for(let Ee=0;Ee<ve.length;++Ee)M.push(ve[Ee])}}let R=1e50,L=M[0];for(let N=0;N<M.length;++N){r[b].x=M[N].x,r[b].y=M[N].y;const z=n(r,e);z<R&&(R=z,L=M[N])}v(L,b)}return r}function V5(e,t){let n=0;function r(i){return i.map(function(s){return e[s]})}for(let i=0;i<t.length;++i){const s=t[i];let l;if(s.sets.length==1)continue;if(s.sets.length==2){const h=e[s.sets[0]],p=e[s.sets[1]];l=vU(h.radius,p.radius,DE(h,p))}else l=pU(r(s.sets));const c=s.hasOwnProperty("weight")?s.weight:1;n+=c*(l-s.size)*(l-s.size)}return n}function tse(e,t,n){n===null?e.sort(function(i,s){return s.radius-i.radius}):e.sort(n);let r;if(e.length>0){const i=e[0].x,s=e[0].y;for(r=0;r<e.length;++r)e[r].x-=i,e[r].y-=s}if(e.length==2&&distance(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){const i=Math.atan2(e[1].x,e[1].y)-t;let s,l;const c=Math.cos(i),h=Math.sin(i);for(r=0;r<e.length;++r)s=e[r].x,l=e[r].y,e[r].x=c*s-h*l,e[r].y=h*s+c*l}if(e.length>2){let i=Math.atan2(e[2].x,e[2].y)-t;for(;i<0;)i+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI;if(i>Math.PI){const s=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){const l=(e[r].x+s*e[r].y)/(1+s*s);e[r].x=2*l-e[r].x,e[r].y=2*l*s-e[r].y}}}}function nse(e){e.map(function(l){l.parent=l});function t(l){return l.parent!==l&&(l.parent=t(l.parent)),l.parent}function n(l,c){const h=t(l),p=t(c);h.parent=p}for(let l=0;l<e.length;++l)for(let c=l+1;c<e.length;++c){const h=e[l].radius+e[c].radius;distance(e[l],e[c])+1e-10<h&&n(e[c],e[l])}const r={};let i;for(let l=0;l<e.length;++l)i=t(e[l]).parent.setid,i in r||(r[i]=[]),r[i].push(e[l]);e.map(function(l){delete l.parent});const s=[];for(i in r)r.hasOwnProperty(i)&&s.push(r[i]);return s}function H5(e){const t=function(n){const r=Math.max.apply(null,e.map(function(s){return s[n]+s.radius})),i=Math.min.apply(null,e.map(function(s){return s[n]-s.radius}));return{max:r,min:i}};return{xRange:t("x"),yRange:t("y")}}function J0e(e,t,n){t===null&&(t=Math.PI/2);let r=[],i,s;for(s in e)if(e.hasOwnProperty(s)){const b=e[s];r.push({x:b.x,y:b.y,radius:b.radius,setid:s})}const l=nse(r);for(i=0;i<l.length;++i){tse(l[i],t,n);const b=H5(l[i]);l[i].size=(b.xRange.max-b.xRange.min)*(b.yRange.max-b.yRange.min),l[i].bounds=b}l.sort(function(b,T){return T.size-b.size}),r=l[0];let c=r.bounds;const h=(c.xRange.max-c.xRange.min)/50;function p(b,T,M){if(!b)return;const R=b.bounds;let L,N,z;T?L=c.xRange.max-R.xRange.min+h:(L=c.xRange.max-R.xRange.max,z=(R.xRange.max-R.xRange.min)/2-(c.xRange.max-c.xRange.min)/2,z<0&&(L+=z)),M?N=c.yRange.max-R.yRange.min+h:(N=c.yRange.max-R.yRange.max,z=(R.yRange.max-R.yRange.min)/2-(c.yRange.max-c.yRange.min)/2,z<0&&(N+=z));for(let H=0;H<b.length;++H)b[H].x+=L,b[H].y+=N,r.push(b[H])}let v=1;for(;v<l.length;)p(l[v],!0,!1),p(l[v+1],!1,!0),p(l[v+2],!0,!0),v+=3,c=H5(r);const y={};for(i=0;i<r.length;++i)y[r[i].setid]=r[i];return y}function rse(e,t,n,r){const i=[],s=[];for(const R in e)e.hasOwnProperty(R)&&(s.push(R),i.push(e[R]));t-=2*r,n-=2*r;const l=H5(i),c=l.xRange,h=l.yRange;if(c.max==c.min||h.max==h.min)return console.log("not scaling solution: zero size detected"),e;const p=t/(c.max-c.min),v=n/(h.max-h.min),y=Math.min(v,p),b=(t-(c.max-c.min)*y)/2,T=(n-(h.max-h.min)*y)/2,M={};for(let R=0;R<i.length;++R){const L=i[R];M[s[R]]={radius:y*L.radius,x:r+b+(L.x-c.min)*y,y:r+T+(L.y-h.min)*y}}return M}function ise(e,t,n){const r=[],i=e-n,s=t;return r.push("M",i,s),r.push("A",n,n,0,1,0,i+2*n,s),r.push("A",n,n,0,1,0,i,s),r.join(" ")}function ose(e){const t={};pU(e,t);const n=t.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return ise(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){const s=n[i],l=s.circle.radius,c=s.width>l;r.push(`
A`,l,l,0,c?1:0,1,s.p1.x,s.p1.y)}return r.join(" ")}}const yU=e=>{const{sets:t="sets",size:n="size",as:r=["key","path"],padding:i=0}=e,[s,l]=r;return c=>{const h=c.map(y=>Object.assign(Object.assign({},y),{sets:y[t],size:y[n],[s]:y.sets.join("&")}));h.sort((y,b)=>y.sets.length-b.sets.length);const p=Yae(h);let v;return h.map(y=>{const b=y[t],T=({width:M,height:R})=>{v=v||rse(p,M,R,i);const L=b.map(z=>v[z]);let N=ose(L);return/[zZ]$/.test(N)||(N+=" Z"),N};return Object.assign(Object.assign({},y),{[l]:T})})}};yU.props={};function ase(){return{"data.venn":yU,"mark.boxplot":Qz,"mark.gauge":tU,"mark.wordCloud":aU,"mark.liquid":hU}}function sse(){return Object.assign(Object.assign(Object.assign(Object.assign({},Zre()),$oe()),ase()),Vne())}var XA=function(){return XA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},XA.apply(this,arguments)},lse=Z$(G$,XA(XA({},sse()),Rq())),use="[object Boolean]";function cse(e){return e===!0||e===!1||Ca(e)&&he(e)==use}var W5=cse,NE=function(){return NE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},NE.apply(this,arguments)},fse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},hse=["renderer"],_U=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],G5="__transform__",dse="__skipDelCustomKeys__",o1=function(e,t){return W5(t)?{type:e,available:t}:NE({type:e},t)},Z5={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(e){return o1("stackY",e)}},normalize:{target:"transform",value:function(e){return o1("normalizeY",e)}},percent:{target:"transform",value:function(e){return o1("normalizeY",e)}},group:{target:"transform",value:function(e){return o1("dodgeX",e)}},sort:{target:"transform",value:function(e){return o1("sortX",e)}},symmetry:{target:"transform",value:function(e){return o1("symmetryY",e)}},diff:{target:"transform",value:function(e){return o1("diffY",e)}},meta:{target:"scale",value:function(e){return e}},label:{target:"labels",value:function(e){return e}},shape:"style.shape",connectNulls:{target:"style",value:function(e){return W5(e)?{connect:e}:e}}},X5=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],YA=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:X5},{key:"point",type:"point",extend_keys:X5},{key:"area",type:"area",extend_keys:X5}],pse=[{key:"transform",callback:function(e,t,n){var r;e[t]=e[t]||[];var i=n.available,s=i===void 0?!0:i,l=fse(n,["available"]);if(s)e[t].push(NE((r={},r[G5]=!0,r),l));else{var c=e[t].indexOf(function(h){return h.type===n.type});c!==-1&&e[t].splice(c,1)}}},{key:"labels",callback:function(e,t,n){var r;if(!n||Nt(n)){e[t]=n||[];return}n.text||(n.text=e.yField),e[t]=e[t]||[],e[t].push(NE((r={},r[G5]=!0,r),n))}}],Y5=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],vse=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$A=function(){return $A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$A.apply(this,arguments)},mse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},gse=function(e){vse(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=mse(n,["style"]);return e.call(this,$A({style:$A({fill:"#eee"},r)},i))||this}return t}(uc),yse=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qA=function(){return qA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qA.apply(this,arguments)},_se=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},bU=function(e){yse(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=_se(n,["style"]);return e.call(this,qA({style:qA({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},i))||this}return t}(Vs);function bse(e,t,n){(n!==void 0&&!pt(e[t],n)||n===void 0&&!(t in e))&&un(e,t,n)}var $5=bse;function xse(e){return function(t,n,r){for(var i=-1,s=Object(t),l=r(t),c=l.length;c--;){var h=l[e?c:++i];if(n(s[h],h,s)===!1)break}return t}}var Ese=xse,Sse=Ese(),xU=Sse;function wse(e){return Ca(e)&&Ql(e)}var Tse=wse,Ase="[object Object]",Cse=Function.prototype,Ose=Object.prototype,EU=Cse.toString,Mse=Ose.hasOwnProperty,Rse=EU.call(Object);function Pse(e){if(!Ca(e)||he(e)!=Ase)return!1;var t=Zf(e);if(t===null)return!0;var n=Mse.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&EU.call(n)==Rse}var q5=Pse;function Ise(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var K5=Ise;function Lse(e){return zr(e,Qo(e))}var Dse=Lse;function Nse(e,t,n,r,i,s,l){var c=K5(e,n),h=K5(t,n),p=l.get(h);if(p){$5(e,n,p);return}var v=s?s(c,h,n+"",e,t,l):void 0,y=v===void 0;if(y){var b=Nt(h),T=!b&&Af(h),M=!b&&!T&&Rd(h);v=h,b||T||M?Nt(c)?v=c:Tse(c)?v=ll(c):T?(y=!1,v=lu(h,!0)):M?(y=!1,v=oh(h,!0)):v=[]:q5(h)||ff(h)?(v=c,ff(c)?v=Dse(c):(!de(c)||Kn(c))&&(v=wv(h))):y=!1}y&&(l.set(h,v),i(v,h,r,s,l),l.delete(h)),$5(e,n,v)}var Fse=Nse;function SU(e,t,n,r,i){e!==t&&xU(t,function(s,l){if(i||(i=new tc),de(s))Fse(e,t,l,n,SU,r,i);else{var c=r?r(K5(e,l),s,l+"",e,t,i):void 0;c===void 0&&(c=s),$5(e,l,c)}},Qo)}var Bse=SU;function kse(e){return e}var Q5=kse;function zse(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Use=zse,wU=Math.max;function jse(e,t,n){return t=wU(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=wU(r.length-t,0),l=Array(s);++i<s;)l[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(l),Use(e,this,c)}}var TU=jse;function Vse(e){return function(){return e}}var Hse=Vse,Wse=gn?function(e,t){return gn(e,"toString",{configurable:!0,enumerable:!1,value:Hse(t),writable:!0})}:Q5,Gse=Wse,Zse=800,Xse=16,Yse=Date.now;function $se(e){var t=0,n=0;return function(){var r=Yse(),i=Xse-(r-n);if(n=r,i>0){if(++t>=Zse)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var qse=$se,Kse=qse(Gse),AU=Kse;function Qse(e,t){return AU(TU(e,t,Q5),e+"")}var Jse=Qse;function ele(e,t,n){if(!de(n))return!1;var r=typeof t;return(r=="number"?Ql(n)&&eh(t,n.length):r=="string"&&t in n)?pt(n[t],e):!1}var tle=ele;function nle(e){return Jse(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,l&&tle(n[0],n[1],l)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,s)}return t})}var CU=nle,rle=CU(function(e,t,n,r){Bse(e,t,n,r)}),ile=rle,OU=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},ole=function(e,t){if(Nt(t))return t},Iy=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ile.apply(void 0,OU(OU([],e,!1),[ole],!1))},ale=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),MU=function(e){ale(t,e);function t(n,r,i){var s=e.call(this,{style:Iy(i,r)})||this;return s.chart=n,s}return t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},t.prototype.disconnectedCallback=function(){},t.prototype.attributeChangedCallback=function(n){},t.prototype.update=function(n,r){var i;return this.attr(Iy({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),i=[];return r.forEach(function(s){var l=s.getBBox(),c=l.x,h=l.y,p=l.width,v=l.height,y=s.__data__;i.push({bbox:l,x:c,y:h,width:p,height:v,key:y.key,data:y})}),i},t.prototype.bindEvents=function(n,r){},t}(Du),sle=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),KA=function(){return KA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},KA.apply(this,arguments)},lle=function(e){sle(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=this.getElementsLayout(),i=r[0],s=i.x,l=i.y,c=i.height,h=i.width,p=i.data,v=["items",0,"value"],y=vi(p,v),b=n?r[1].y-l-c:r[1].x-s-h,T=[],M=this.attributes,R=M.size,L=R===void 0?40:R,N=M.arrowSize,z=N===void 0?20:N,H=M.spacing,X=H===void 0?4:H;return r.forEach(function(Y,ne){if(ne>0){var ve=Y.x,Ee=Y.y,Ie=Y.height,Ye=Y.width,$e=Y.data,St=Y.key,Qe=vi($e,v),lt=L/2;if(n){var ht=ve+Ye/2,bt=Ee;T.push({points:[[ht+lt,bt-b+X],[ht+lt,bt-z-X],[ht,bt-X],[ht-lt,bt-z-X],[ht-lt,bt-b+X]],center:[ht,bt-b/2-X],width:b,value:[y,Qe],key:St})}else{var ht=ve,bt=Ee+Ie/2;T.push({points:[[ve-b+X,bt-lt],[ve-z-X,bt-lt],[ht-X,bt],[ve-z-X,bt+lt],[ve-b+X,bt+lt]],center:[ht-b/2-X,bt],width:b,value:[y,Qe],key:St})}y=Qe}}),T},t.prototype.render=function(){this.setDirection(),this.drawConversionTag()},t.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=vi(n,"options.transformations"),i="horizontal";r.forEach(function(s){s.includes("transpose")&&(i="vertical")}),this.direction=i},t.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),i=this.attributes,s=i.style,l=i.text,c=l.style,h=l.formatter;r.forEach(function(p){var v=p.points,y=p.center,b=p.value,T=p.key,M=b[0],R=b[1],L=y[0],N=y[1],z=new gse({style:KA({points:v,fill:"#eee"},s),id:"polygon-".concat(T)}),H=new bU({style:KA({x:L,y:N,text:Kn(h)?h(M,R):(R/M*100).toFixed(2)+"%"},c),id:"text-".concat(T)});n.appendChild(z),n.appendChild(H)})},t.prototype.update=function(){var n=this,r=this.getConversionTagLayout();r.forEach(function(i){var s=i.points,l=i.center,c=i.key,h=l[0],p=l[1],v=n.getElementById("polygon-".concat(c)),y=n.getElementById("text-".concat(c));v.setAttribute("points",s),y.setAttribute("x",h),y.setAttribute("y",p)})},t.tag="ConversionTag",t}(MU),ule=1,cle=2;function fle(e,t,n,r){var i=n.length,s=i,l=!r;if(e==null)return!s;for(e=Object(e);i--;){var c=n[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){c=n[i];var h=c[0],p=e[h],v=c[1];if(l&&c[2]){if(p===void 0&&!(h in e))return!1}else{var y=new tc;if(r)var b=r(p,v,h,e,t,y);if(!(b===void 0?Ve(v,p,ule|cle,r,y):b))return!1}}return!0}var hle=fle;function dle(e){return e===e&&!de(e)}var RU=dle;function ple(e){for(var t=Vu(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,RU(i)]}return t}var vle=ple;function mle(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var PU=mle;function gle(e){var t=vle(e);return t.length==1&&t[0][2]?PU(t[0][0],t[0][1]):function(n){return n===e||hle(n,e,t)}}var yle=gle;function _le(e,t){return e!=null&&t in Object(e)}var ble=_le;function xle(e,t,n){t=xi(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var l=eo(t[r]);if(!(s=e!=null&&n(e,l)))break;e=e[l]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&Od(i)&&eh(l,i)&&(Nt(e)||ff(e)))}var Ele=xle;function Sle(e,t){return e!=null&&Ele(e,t,ble)}var IU=Sle,wle=1,Tle=2;function Ale(e,t){return bc(e)&&RU(t)?PU(eo(e),t):function(n){var r=vi(n,e);return r===void 0&&r===t?IU(n,e):Ve(t,r,wle|Tle)}}var Cle=Ale;function Ole(e){return function(t){return t==null?void 0:t[e]}}var Mle=Ole;function Rle(e){return function(t){return qi(t,e)}}var Ple=Rle;function Ile(e){return bc(e)?Mle(eo(e)):Ple(e)}var Lle=Ile;function Dle(e){return typeof e=="function"?e:e==null?Q5:typeof e=="object"?Nt(e)?Cle(e[0],e[1]):yle(e):Lle(e)}var J5=Dle;function Nle(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var Fle=Nle;function Ble(e){return e!==e}var kle=Ble;function zle(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var Ule=zle;function jle(e,t,n){return t===t?Ule(e,t,n):Fle(e,kle,n)}var LU=jle;function Vle(e,t){var n=e==null?0:e.length;return!!n&&LU(e,t,0)>-1}var Hle=Vle;function Wle(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var Gle=Wle;function Zle(){}var DU=Zle,Xle=1/0,Yle=yc&&1/Ml(new yc([,-0]))[1]==Xle?function(e){return new yc(e)}:DU,$le=Yle,qle=200;function Kle(e,t,n){var r=-1,i=Hle,s=e.length,l=!0,c=[],h=c;if(n)l=!1,i=Gle;else if(s>=qle){var p=t?null:$le(e);if(p)return Ml(p);l=!1,i=lf,h=new Zh}else h=t?[]:c;e:for(;++r<s;){var v=e[r],y=t?t(v):v;if(v=n||v!==0?v:0,l&&y===y){for(var b=h.length;b--;)if(h[b]===y)continue e;t&&h.push(y),c.push(v)}else i(h,y,n)||(h!==c&&h.push(y),c.push(v))}return c}var Qle=Kle;function Jle(e,t){return e&&e.length?Qle(e,J5(t,2)):[]}var eI=Jle;function eue(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;){var l=e[i];t(r,l,n(l),e)}return r}var tue=eue;function nue(e,t){return e&&xU(e,t,Vu)}var rue=nue;function iue(e,t){return function(n,r){if(n==null)return n;if(!Ql(n))return e(n,r);for(var i=n.length,s=t?i:-1,l=Object(n);(t?s--:++s<i)&&r(l[s],s,l)!==!1;);return n}}var oue=iue,aue=oue(rue),NU=aue;function sue(e,t,n,r){return NU(e,function(i,s,l){t(r,i,n(i),l)}),r}var lue=sue;function uue(e,t){return function(n,r){var i=Nt(n)?tue:lue,s=t?t():{};return i(n,e,J5(r,2),s)}}var cue=uue,fue=Object.prototype,hue=fue.hasOwnProperty,due=cue(function(e,t,n){hue.call(e,n)?e[n].push(t):un(e,n,[t])}),FU=due,tI=32,BU=16,kU=48,pue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FE=function(){return FE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},FE.apply(this,arguments)},vue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},mue=function(e){pue(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.render=function(){this.drawText()},t.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",i=this.getElementsLayout(),s=r?eI(i,"x"):eI(i,"y"),l=["title"],c=[],h=this.chart.getContext().views,p=vi(h,[0,"layout"]),v=p.width,y=p.height;return s.forEach(function(b){var T=b.x,M=b.y,R=b.height,L=b.width,N=b.data,z=b.key,H=vi(N,l);r?c.push({x:T+L/2,y,text:H,key:z}):c.push({x:v,y:M+R/2,text:H,key:z})}),eI(c,"text").length!==c.length&&(c=Object.values(FU(c,"text")).map(function(b){var T,M=b.reduce(function(R,L){return R+(r?L.x:L.y)},0);return FE(FE({},b[0]),(T={},T[r?"x":"y"]=M/b.length,T))})),c},t.prototype.transformLabelStyle=function(n){var r={},i=/^label[A-Z]/;return Object.keys(n).forEach(function(s){i.test(s)&&(r[s.replace("label","").replace(/^[A-Z]/,function(l){return l.toLowerCase()})]=n[s])}),r},t.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,s=i.layout,l=i.labelFormatter,c=vue(i,["layout","labelFormatter"]);r.forEach(function(h){var p=h.x,v=h.y,y=h.text,b=h.key,T=new bU({style:FE({x:p,y:v,text:Kn(l)?l(y):y,wordWrap:!0,wordWrapWidth:s==="horizontal"?tI*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(c)),id:"text-".concat(b)});n.appendChild(T)})},t.prototype.update=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout();r.forEach(function(i){var s=i.x,l=i.y,c=i.key,h=n.getElementById("text-".concat(c));h.setAttribute("x",s),h.setAttribute("y",l)})},t.tag="BidirectionalBarAxisText",t}(MU),gue={ConversionTag:lle,BidirectionalBarAxisText:mue},yue=function(){function e(t,n){this.container=new Map,this.chart=t,this.config=n,this.init()}return e.prototype.init=function(){var t=this;Y5.forEach(function(n){var r,i=n.key,s=n.shape,l=t.config[i];if(l){var c=new gue[s](t.chart,l),h=t.chart.getContext().canvas;h.appendChild(c),t.container.set(i,c)}else(r=t.container.get(i))===null||r===void 0||r.clear()})},e.prototype.update=function(){var t=this;this.container.size&&Y5.forEach(function(n){var r=n.key,i=t.container.get(r);i==null||i.update()})},e}();function _ue(e,t,n,r){if(!de(e))return e;t=xi(t,e);for(var i=-1,s=t.length,l=s-1,c=e;c!=null&&++i<s;){var h=eo(t[i]),p=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(i!=l){var v=c[h];p=r?r(v,h,c):void 0,p===void 0&&(p=de(v)?v:eh(t[i+1])?[]:{})}Ir(c,h,p),c=c[h]}return e}var zU=_ue;function bue(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var l=t[r],c=qi(e,l);n(c,l)&&zU(s,xi(l,e),c)}return s}var xue=bue;function Eue(e,t){return xue(e,t,function(n,r){return IU(e,r)})}var Sue=Eue,UU=yn?yn.isConcatSpreadable:void 0;function wue(e){return Nt(e)||ff(e)||!!(UU&&e&&e[UU])}var Tue=wue;function jU(e,t,n,r,i){var s=-1,l=e.length;for(n||(n=Tue),i||(i=[]);++s<l;){var c=e[s];t>0&&n(c)?t>1?jU(c,t-1,n,r,i):Je(i,c):r||(i[i.length]=c)}return i}var Aue=jU;function Cue(e){var t=e==null?0:e.length;return t?Aue(e,1):[]}var Oue=Cue;function Mue(e){return AU(TU(e,void 0,Oue),e+"")}var nI=Mue,Rue=nI(function(e,t){return e==null?{}:Sue(e,t)}),VU=Rue,Pue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jb=function(){return Jb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Jb.apply(this,arguments)},HU="data-chart-source-type",Cl=function(e){Pue(t,e);function t(n,r){var i=e.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=i.mergeOption(r),i.createG2(),i.bindEvents(),i}return t.prototype.getChartOptions=function(){return Jb(Jb({},VU(this.options,hse)),{container:this.container})},t.prototype.getSpecOptions=function(){return this.type==="base"||this[dse]?Jb(Jb({},this.options),this.getChartOptions()):this.options},t.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new lse(this.getChartOptions()),this.container.setAttribute(HU,"Ant Design Charts")},t.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},t.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},t.prototype.getDefaultOptions=function(){},t.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new yue(n.chart,n.options)}),this.bindSizeSensor()},t.prototype.update=function(n){this.options=this.mergeOption(n)},t.prototype.mergeOption=function(n){return Iy({},this.getBaseOptions(),this.getDefaultOptions(),n)},t.prototype.changeData=function(n){this.chart.changeData(n)},t.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},t.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(HU)},t.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit,i=r===void 0?!0:r;i&&this.chart.on(cl.AFTER_CHANGE_SIZE,function(){n.annotation.update()})},t}(zo),Iue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lue=function(e){Iue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="base",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return function(n){return n}},t}(Cl);function Due(){}var rI=Due;function QA(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}QA.prototype=Bp(rI.prototype),QA.prototype.constructor=QA;var BE=QA,Nue=Hf&&new Hf,WU=Nue,Fue=WU?function(e){return WU.get(e)}:DU,GU=Fue,Bue={},ZU=Bue,kue=Object.prototype,zue=kue.hasOwnProperty;function Uue(e){for(var t=e.name+"",n=ZU[t],r=zue.call(ZU,t)?n.length:0;r--;){var i=n[r],s=i.func;if(s==null||s==e)return i.name}return t}var JA=Uue,jue=4294967295;function eC(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jue,this.__views__=[]}eC.prototype=Bp(rI.prototype),eC.prototype.constructor=eC;var iI=eC;function Vue(e){if(e instanceof iI)return e.clone();var t=new BE(e.__wrapped__,e.__chain__);return t.__actions__=ll(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Hue=Vue,Wue=Object.prototype,Gue=Wue.hasOwnProperty;function tC(e){if(Ca(e)&&!Nt(e)&&!(e instanceof iI)){if(e instanceof BE)return e;if(Gue.call(e,"__wrapped__"))return Hue(e)}return new BE(e)}tC.prototype=rI.prototype,tC.prototype.constructor=tC;var Zue=tC;function Xue(e){var t=JA(e),n=Zue[t];if(typeof n!="function"||!(t in iI.prototype))return!1;if(e===n)return!0;var r=GU(n);return!!r&&e===r[0]}var XU=Xue,Yue="Expected a function",$ue=8,que=32,Kue=128,Que=256;function Jue(e){return nI(function(t){var n=t.length,r=n,i=BE.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if(typeof s!="function")throw new TypeError(Yue);if(i&&!l&&JA(s)=="wrapper")var l=new BE([],!0)}for(r=l?r:n;++r<n;){s=t[r];var c=JA(s),h=c=="wrapper"?GU(s):void 0;h&&XU(h[0])&&h[1]==(Kue|$ue|que|Que)&&!h[4].length&&h[9]==1?l=l[JA(h[0])].apply(l,h[3]):l=s.length==1&&XU(s)?l[c]():l.thru(s)}return function(){var p=arguments,v=p[0];if(l&&p.length==1&&Nt(v))return l.plant(v).value();for(var y=0,b=n?t[y].apply(this,p):v;++y<n;)b=t[y].call(this,b);return b}})}var ece=Jue,tce=ece(),Ul=tce,nce=function(e){var t=e.options,n=t.children,r=n===void 0?[]:n;return r.forEach(function(i){Object.keys(i).forEach(function(s){Nt(i[s])&&s!=="data"&&(i[s]=i[s].filter(function(l){return!l[G5]}))})}),t};function rce(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var ice=rce;function oce(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var ace=oce;function sce(e,t){return t.length<2?e:qi(e,ace(t,0,-1))}var lce=sce;function uce(e,t){return t=xi(t,e),e=lce(e,t),e==null||delete e[eo(ice(t))]}var cce=uce;function fce(e){return q5(e)?void 0:e}var hce=fce,dce=1,pce=2,vce=4,mce=nI(function(e,t){var n={};if(e==null)return n;var r=!1;t=hi(t,function(s){return s=xi(s,e),r||(r=s.length>1),s}),zr(e,Mi(e),n),r&&(n=Tv(n,dce|pce|vce,hce));for(var i=t.length;i--;)cce(n,t[i]);return n}),oI=mce;function gce(e){return e===void 0}var yce=gce;function _ce(e,t,n){return e==null?e:zU(e,t,n)}var La=_ce,YU=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},bce=function(e){var t=e.children,n=t===void 0?[]:t,r=Object.keys(Z5).concat(YA.map(function(i){return i.key}));return r.forEach(function(i){delete e[i]}),n.forEach(function(i){Object.keys(i).forEach(function(s){r.includes(s)&&delete i[s]})}),Object.keys(e).forEach(function(i){YU(YU([],_U,!0),Y5.map(function(s){return s.key}),!0).includes(i)||delete e[i]}),e},Kl=function(e){var t=nce(e),n=t.children,r=n===void 0?[]:n,i=oI(t,[].concat(_U,YA.map(function(p){return p.key}))),s=function(p){var v;return(v=pse.find(function(y){return y.key===p}))===null||v===void 0?void 0:v.callback},l=function(p,v,y){var b=s(v);b?b(p,v,y):p[v]=Iy({},p[v],y)},c=function(p){Object.keys(p).forEach(function(v){if(p[v]){var y=YA.find(function(M){return M.key===v});if(y){var b=y.type,T=y.extend_keys;b?r.push(h(Iy({},VU(p,T),{type:b},p[v]))):Nt(p[v])&&p[v].forEach(function(M){r.push(h(M))})}}})},h=function(p){return c(p),Object.keys(Z5).forEach(function(v){var y=Z5[v];if(!yce(p[v]))if(de(y)){var b=y.value,T=y.target,M=b(p[v]);l(p,T,M)}else La(p,y,p[v])}),p};return r.forEach(function(p){var v=Iy({},i,p);h(Iy(p,v))}),c(t),bce(t),e},aI=function(){return aI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},aI.apply(this,arguments)};function xce(e){var t=e.options,n=t.stack,r=t.tooltip,i=t.xField;if(!n)return e;var s=YA.map(function(c){return c.type}).filter(function(c){return!!c}),l=!1;return s.forEach(function(c){t[c]&&(l=!0,La(t,[c,"stack"],aI({y1:"y"},typeof n=="object"?n:{})))}),l&&!W5(r)&&!r&&La(t,"tooltip",{title:i,items:[{channel:"y"}]}),e}function Uc(e){return Ul(xce)(e)}function Ece(e){return Ul(Uc,Kl)(e)}var Sce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wce=function(e){Sce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="area",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ece},t}(Cl),ex=function(){return ex=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ex.apply(this,arguments)};function $U(e){var t=function(n){var r=n.options;vi(r,"children.length")>1&&La(r,"children",[{type:"interval"}]);var i=r.scale,s=r.markBackground,l=r.data,c=r.children,h=r.yField,p=vi(i,"y.domain",[]);if(s&&p.length&&Nt(l)){var v="domainMax",y=l.map(function(b){var T;return ex(ex({originData:ex({},b)},oI(b,h)),(T={},T[v]=p[p.length-1],T))});c.unshift(ex({type:"interval",data:y,yField:v,tooltip:!1,style:{fill:"#eee"},label:!1},s))}return n};return Ul(t,Uc,Kl)(e)}var Tce=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,c=t.fillOpacity,h=c===void 0?1:c,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,T=r[0],M=r[1],R=r[2],L=r[3],N=(M[1]-T[1])/2,z=n.document,H=z.createElement("g",{}),X=z.createElement("polygon",{style:{points:[T,[T[0]-b,T[1]+N],[R[0]-b,T[1]+N],L],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),Y=z.createElement("polygon",{style:{points:[[T[0]-b,T[1]+N],M,R,[R[0]-b,T[1]+N]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),ne=z.createElement("polygon",{style:{points:[T,[T[0]-b,T[1]+N],M,[T[0]+b,T[1]+N]],fill:s,fillOpacity:h-.2}});return H.appendChild(X),H.appendChild(Y),H.appendChild(ne),H}};S_("shape.interval.bar25D",e)},Ace=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Tce();var Cce=function(e){Ace(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Bar",n}return t.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return $U},t}(Cl),Oce=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,c=t.fillOpacity,h=c===void 0?1:c,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,T=r[1][0]-r[0][0],M=T/2+r[0][0],R=n.document,L=R.createElement("g",{}),N=R.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[M,r[1][1]+b],[M,r[3][1]+b],[r[3][0],r[3][1]]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),z=R.createElement("polygon",{style:{points:[[M,r[1][1]+b],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[M,r[2][1]+b]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),H=R.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[M,r[1][1]-b],[r[1][0],r[1][1]],[M,r[1][1]+b]],fill:s,fillOpacity:h-.2}});return L.appendChild(z),L.appendChild(N),L.appendChild(H),L}};S_("shape.interval.column25D",e)},Mce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Oce();var Rce=function(e){Mce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return $U},t}(Cl);function Pce(e){var t=function(r){var i=r.options,s=i.children,l=s===void 0?[]:s,c=i.legend;return c&&l.forEach(function(h){if(!vi(h,"colorField")){var p=vi(h,"yField");La(h,"colorField",function(){return p})}}),r},n=function(r){var i=r.options,s=i.annotations,l=s===void 0?[]:s,c=i.children,h=c===void 0?[]:c,p=i.scale,v=!1;return vi(p,"y.key")||h.forEach(function(y,b){if(!vi(y,"scale.y.key")){var T="child".concat(b,"Scale");La(y,"scale.y.key",T);var M=y.annotations,R=M===void 0?[]:M;R.length>0&&(La(y,"scale.y.independent",!1),R.forEach(function(L){La(L,"scale.y.key",T)})),!v&&l.length>0&&vi(y,"scale.y.independent")===void 0&&(v=!0,La(y,"scale.y.independent",!1),l.forEach(function(L){La(L,"scale.y.key",T)}))}}),r};return Ul(t,n,Uc,Kl)(e)}var Ice=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qU=function(e){Ice(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="DualAxes",n}return t.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Pce},t}(Cl);function Lce(e){var t=function(s){var l=s.options,c=l.xField,h=l.colorField;return h||La(l,"colorField",c),s},n=function(s){var l=s.options,c=l.compareField,h=l.transform,p=l.isTransposed,v=p===void 0?!0:p,y=l.coordinate;return h||(c?La(l,"transform",[]):La(l,"transform",[{type:"symmetryY"}])),!y&&v&&La(l,"coordinate",{transform:[{type:"transpose"}]}),s},r=function(s){var l=s.options,c=l.compareField,h=l.seriesField,p=l.data,v=l.children,y=l.yField,b=l.isTransposed,T=b===void 0?!0:b;if(c||h){var M=Object.values(FU(p,function(R){return R[c||h]}));v[0].data=M[0],v.push({type:"interval",data:M[1],yField:function(R){return-R[y]}}),delete l.compareField,delete l.data}return h&&(La(l,"type","spaceFlex"),La(l,"ratio",[1,1]),La(l,"direction",T?"row":"col"),delete l.seriesField),s},i=function(s){var l=s.options,c=l.tooltip,h=l.xField,p=l.yField;return c||La(l,"tooltip",{title:!1,items:[function(v){return{name:v[h],value:v[p]}}]}),s};return Ul(t,n,r,i,Uc,Kl)(e)}var Dce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nce=function(e){Dce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Lce},t}(Cl);function Fce(e){return Ul(Uc,Kl)(e)}var Bce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kce=function(e){Bce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="line",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Fce},t}(Cl);function kE(e){switch(typeof e){case"function":return e;case"string":return function(t){return vi(t,[e])};default:return function(){return e}}}var Ly=function(){return Ly=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ly.apply(this,arguments)};function zce(e){var t=function(n){var r=n.options,i=r.angleField,s=r.data,l=r.label,c=r.tooltip,h=r.colorField,p=kE(h);if(Nt(s)){var v=s.reduce(function(b,T){return b+T[i]},0);if(v===0){var y=s.map(function(b){var T;return Ly(Ly({},b),(T={},T[i]=1,T))});La(r,"data",y),l&&La(r,"label",Ly(Ly({},l),{formatter:function(){return 0}})),c!==!1&&La(r,"tooltip",Ly(Ly({},c),{items:[function(b,T,M){return{name:p(b,T,M),value:0}}]}))}}return n};return Ul(t,Kl)(e)}var Uce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jce=function(e){Uce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="pie",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return zce},t}(Cl);function Vce(e){return Ul(Uc,Kl)(e)}var Hce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wce=function(e){Hce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="scatter",n}return t.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Vce},t}(Cl);function Gce(e){var t=function(n){return La(n,"options.coordinate",{type:vi(n,"options.coordinateType","polar")}),n};return Ul(t,Kl)(e)}var Zce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xce=function(e){Zce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radar",n}return t.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Gce},t}(Cl);function Yce(e,t){var n=-1,r=Ql(e)?Array(e.length):[];return NU(e,function(i,s,l){r[++n]=t(i,s,l)}),r}var $ce=Yce;function qce(e,t){var n=Nt(e)?hi:$ce;return n(e,J5(t,3))}var tx=qce,_g=function(){return _g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_g.apply(this,arguments)},Kce="__stock-range__",Qce="trend",Jce="up",efe="down";function tfe(e){var t=function(r){var i=r.options,s=i.data,l=i.yField;return r.options.data=tx(s,function(c){var h=c&&_g({},c);if(Array.isArray(l)&&h){var p=l[0],v=l[1],y=l[2],b=l[3];h[Qce]=h[p]<=h[v]?Jce:efe,h[Kce]=[h[p],h[v],h[y],h[b]]}return h}),r},n=function(r){var i=r.options,s=i.xField,l=i.yField,c=i.fallingFill,h=i.risingFill,p=l[0],v=l[1],y=l[2],b=l[3],T=kE(s);return r.options.children=tx(r.options.children,function(M,R){var L=R===0;return _g(_g({},M),{tooltip:{title:function(N,z,H){var X=T(N,z,H);return X instanceof Date?X.toLocaleString():X},items:[{field:y},{field:b},{field:p},{field:v}]},encode:_g(_g({},M.encode||{}),{y:L?[y,b]:[p,v],color:function(N){return Math.sign(N[v]-N[p])}}),style:_g(_g({},M.style||{}),{lineWidth:L?1:10})})}),delete i.yField,r.options.legend={color:!1},c&&La(r,"options.scale.color.range[0]",c),h&&La(r,"options.scale.color.range[2]",h),r};return Ul(t,n,Kl)(e)}var nfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rfe=["#26a69a","#999999","#ef5350"],ife=function(e){nfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="stock",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:rfe},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return tfe},t}(Cl);function ofe(e){return Ul(Uc,Kl)(e)}var afe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sfe=function(e){afe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyLine",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],autoFit:!1,animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ofe},t}(Cl);function lfe(e){return Ul(Uc,Kl)(e)}var ufe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cfe=function(e){ufe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyArea",n}return t.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],autoFit:!1,padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return lfe},t}(Cl);function ffe(e){return Ul(Uc,Kl)(e)}var hfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dfe=function(e){hfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyColumn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],autoFit:!1,padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ffe},t}(Cl),sI=function(){return sI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sI.apply(this,arguments)};function pfe(e){var t=function(n){var r=n.options,i=r.percent,s=r.color,l=s===void 0?[]:s;if(!i)return n;var c={scale:{color:{range:l.length?l:[]}},data:[1,i]};return Object.assign(r,sI({},c)),n};return Ul(t,Uc,Kl)(e)}var vfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mfe=function(e){vfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyProgress",n}return t.getDefaultOptions=function(){return{type:"view",data:[],autoFit:!1,margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return pfe},t}(Cl),lI=function(){return lI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},lI.apply(this,arguments)};function gfe(e){var t=function(r){var i=r.options,s=i.radius,l=s===void 0?.8:s;return La(r,"options.coordinate.innerRadius",l),r},n=function(r){var i=r.options,s=i.percent,l=i.color,c=l===void 0?[]:l;if(!s)return r;var h={scale:{color:{range:c.length?c:[]}},data:[1,s]};return Object.assign(i,lI({},h)),r};return Ul(t,n,Uc,Kl)(e)}var yfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_fe=function(e){yfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyRing",n}return t.getDefaultOptions=function(){return{type:"view",data:[],autoFit:!1,margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return gfe},t}(Cl);function bfe(e){return Ul(Kl)(e)}var xfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Efe=function(e){xfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="rose",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return bfe},t}(Cl),uI="__start__",nx="__end__",cI="__waterfall_value__",fI=function(){return fI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},fI.apply(this,arguments)},Sfe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function wfe(e){var t=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,c=i.yField;return l.length&&(l.reduce(function(h,p,v){var y,b=kE(c),T=b(p,v,l);if(v===0||p.isTotal)p[uI]=0,p[nx]=T,p[cI]=T;else{var M=(y=h[nx])!==null&&y!==void 0?y:b(h,v,l);p[uI]=M,p[nx]=M+T,p[cI]=h[nx]}return p},[]),Object.assign(i,{yField:[uI,nx]})),r},n=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,c=i.xField,h=i.children,p=i.linkStyle,v=Sfe([],l,!0);return v.reduce(function(y,b,T){return T>0&&(b.x1=y[c],b.x2=b[c],b.y1=y[nx]),b},[]),v.shift(),h.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:v,style:fI({stroke:"#697474"},p),label:!1,tooltip:!1}),r};return Ul(t,n,Uc,Kl)(e)}var Tfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Afe=function(e){Tfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="waterfall",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:cI,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return wfe},t}(Cl),Cfe="[object Number]";function Ofe(e){return typeof e=="number"||Ca(e)&&he(e)==Cfe}var rx=Ofe,Mfe=Object.prototype,Rfe=Mfe.hasOwnProperty,Pfe=CU(function(e,t){if(gc(t)||Ql(t)){zr(t,Vu(t),e);return}for(var n in t)Rfe.call(t,n)&&Ir(e,n,t[n])}),KU=Pfe,Ife=/\s/;function Lfe(e){for(var t=e.length;t--&&Ife.test(e.charAt(t)););return t}var Dfe=Lfe,Nfe=/^\s+/;function Ffe(e){return e&&e.slice(0,Dfe(e)+1).replace(Nfe,"")}var Bfe=Ffe,QU=0/0,kfe=/^[-+]0x[0-9a-f]+$/i,zfe=/^0b[01]+$/i,Ufe=/^0o[0-7]+$/i,jfe=parseInt;function Vfe(e){if(typeof e=="number")return e;if(h0(e))return QU;if(de(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=de(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Bfe(e);var n=zfe.test(e);return n||Ufe.test(e)?jfe(e.slice(2),n?2:8):kfe.test(e)?QU:+e}var JU=Vfe,ej=1/0,Hfe=17976931348623157e292;function Wfe(e){if(!e)return e===0?e:0;if(e=JU(e),e===ej||e===-ej){var t=e<0?-1:1;return t*Hfe}return e===e?e:0}var Gfe=Wfe;function Zfe(e){var t=Gfe(e),n=t%1;return t===t?n?t-n:t:0}var tj=Zfe,Xfe=Le.isFinite,Yfe=Math.min;function $fe(e){var t=Math[e];return function(n,r){if(n=JU(n),r=r==null?0:Yfe(tj(r),292),r&&Xfe(n)){var i=(dr(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(dr(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var qfe=$fe,Kfe=qfe("ceil"),Qfe=Kfe,Jfe=0/0;function ehe(e){return typeof e=="number"?e:h0(e)?Jfe:+e}var nj=ehe;function the(e,t){return function(n,r){var i;if(n===void 0&&r===void 0)return t;if(n!==void 0&&(i=n),r!==void 0){if(i===void 0)return r;typeof n=="string"||typeof r=="string"?(n=bi(n),r=bi(r)):(n=nj(n),r=nj(r)),i=e(n,r)}return i}}var nhe=the,rhe=nhe(function(e,t){return e/t},1),ihe=rhe;function ohe(e){var t=function(n){var r=n.options,i=r.data,s=r.binNumber,l=r.binWidth,c=r.children,h=r.channel,p=h===void 0?"count":h,v=vi(c,"[0].transform[0]",{});return rx(l)?(KU(v,{thresholds:Qfe(ihe(i.length,l)),y:p}),n):(rx(s)&&KU(v,{thresholds:s,y:p}),n)};return Ul(t,Uc,Kl)(e)}var ahe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),she=function(e){ahe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Histogram",n}return t.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ohe},t}(Cl);function lhe(e){var t=function(r){var i=r.options,s=i.tooltip,l=s===void 0?{}:s,c=i.colorField,h=i.sizeField;return l&&!l.field&&(l.field=c||h),r},n=function(r){var i=r.options,s=i.mark,l=i.children;return s&&(l[0].type=s),r};return Ul(t,n,Uc,Kl)(e)}var uhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),che=function(e){uhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="heatmap",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return lhe},t}(Cl);function fhe(e){var t=function(n){var r=n.options.boxType,i=r===void 0?"box":r;return n.options.children[0].type=i,n};return Ul(t,Uc,Kl)(e)}var hhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dhe=function(e){hhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="box",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return fhe},t}(Cl);function phe(e){var t=function(n){var r=n.options,i=r.data,s=[{type:"custom",callback:function(c){return{links:c}}}];if(Nt(i))i.length>0?La(r,"data",{value:i,transform:s}):delete r.children;else if(vi(i,"type")==="fetch"&&vi(i,"value")){var l=vi(i,"transform");Nt(l)?La(i,"transform",l.concat(s)):La(i,"transform",s)}return n};return Ul(t,Uc,Kl)(e)}var vhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mhe=function(e){vhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="sankey",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return phe},t}(Cl);function ghe(e){var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],e}function yhe(e){ghe(e);var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.children.forEach(function(r){var i;!((i=r==null?void 0:r.coordinate)===null||i===void 0)&&i.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),e}function _he(e){return e==null}var bhe=_he,xhe="[object String]";function Ehe(e){return typeof e=="string"||!Nt(e)&&Ca(e)&&he(e)==xhe}var rj=Ehe;function She(e,t){return hi(t,function(n){return e[n]})}var whe=She;function The(e){return e==null?[]:whe(e,Vu(e))}var Ahe=The,Che=Math.max;function Ohe(e,t,n,r){e=Ql(e)?e:Ahe(e),n=n&&!r?tj(n):0;var i=e.length;return n<0&&(n=Che(i+n,0)),rj(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&LU(e,t,n)>-1}var Mhe=Ohe,Ev=function(){return Ev=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ev.apply(this,arguments)},nC=["#f0efff","#5B8FF9","#3D76DD"];function hI(e,t,n,r){r===void 0&&(r=!0);var i=0,s=!1,l=tx(e,function(c){var h,p,v=vi(c,[t]);if(bhe(v))return[];if(rj(v)){var y=Number(v);return isNaN(y)?[]:(h={},h[n]=c[n],h[t]=y,h)}return Nt(v)?(s=!0,i=Math.max(i,v.length),tx(r?v.sort(function(b,T){return T-b}):v,function(b,T){var M;return M={},M[n]=c[n],M[t]=b,M.index=T,M})):(i=Math.max(1,i),p={},p[n]=c[n],p[t]=v,p)}).flat();return s?[l.map(function(c){return Ev({index:0},c)}),i]:[l,i]}function dI(e,t){return new Array(e).fill("").map(function(n,r){return Nt(t)?t[r%t.length]:t})}function Rhe(e){var t=function(i){var s=i.options,l=s.color,c=s.rangeField,h=c===void 0?"ranges":c,p=s.measureField,v=p===void 0?"measures":p,y=s.targetField,b=y===void 0?"targets":y,T=s.xField,M=T===void 0?"title":T,R=s.mapField,L=s.data,N=hI(L,h,M),z=N[0],H=N[1],X=hI(L,v,M,!1),Y=X[0],ne=X[1],ve=hI(L,b,M,!1),Ee=ve[0],Ie=ve[1],Ye=vi(l,[h],nC[0]),$e=vi(l,[v],nC[1]),St=vi(l,[b],nC[2]),Qe=[dI(H,Ye),dI(ne,$e),dI(Ie,St)].flat();return i.options.children=tx(i.options.children,function(lt,ht){var bt=[z,Y,Ee][ht],Ht=[h,v,b][ht];return Ev(Ev({},lt),{data:bt,encode:Ev(Ev({},lt.encode||{}),{x:M,y:Ht,color:function(Ot){var kt=Ot.index,Mn=rx(kt)?"".concat(Ht,"_").concat(kt):Ht;return R?vi(R,[Ht,kt],Mn):Mn}}),style:Ev(Ev({},lt.style||{}),{zIndex:function(Ot){return-Ot[Ht]}}),labels:ht!==0?tx(lt.labels,function(Ot){return Ev(Ev({},Ot),{text:Ht})}):void 0})}),i.options.scale.color.range=Qe,i.options.legend.color.itemMarker=function(lt){return R&&Mhe(R==null?void 0:R[b],lt)||(lt==null?void 0:lt.replace(/\_\d$/,""))===b?"line":"square"},i},n=function(i){var s=i.options.layout,l=s===void 0?"horizontal":s;return l!=="horizontal"&&La(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var s=i.options,l=s.range,c=l===void 0?{}:l,h=s.measure,p=h===void 0?{}:h,v=s.target,y=v===void 0?{}:v,b=s.children;return i.options.children=[c,p,y].map(function(T,M){return Iy(b[M],T)}),i};return Ul(t,n,r,yhe,Kl)(e)}var Phe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ihe=function(e){Phe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="bullet",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{range:nC}},legend:{color:{itemMarker:function(n){return n==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Rhe},t}(Cl);function Lhe(e){var t=function(n){var r=n.options.data;return n.options.data={value:r},n};return Ul(t,Uc,Kl)(e)}var Dhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nhe=function(e){Dhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Gauge",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Lhe},t}(Cl);function Fhe(e){var t=function(n){var r=n.options.percent;return rx(r)&&La(n,"options.data",r),n};return Ul(t,Uc,Kl)(e)}var Bhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),khe=function(e){Bhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Liquid",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Fhe},t}(Cl);function zhe(e){return Ul(Uc,Kl)(e)}var Uhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jhe=function(e){Uhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="WordCloud",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return zhe},t}(Cl);function Vhe(e){var t=function(n){var r=n.options,i=r.data;return i&&La(r,"data",{value:i}),n};return Ul(t,Uc,Kl)(e)}var Hhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Whe=function(e){Hhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="treemap",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Vhe},t}(Cl),a1=function(){return a1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a1.apply(this,arguments)};function Ghe(e){var t=function(i){var s=i.options,l=s.startAngle,c=s.maxAngle,h=s.coordinate,p=rx(l)?l/(2*Math.PI)*360:-90,v=rx(c)?(Number(c)+p)/180*Math.PI:Math.PI;return La(i,["options","coordinate"],a1(a1({},h),{endAngle:v,startAngle:l!=null?l:-Math.PI/2})),i},n=function(i){var s=i.options,l=s.tooltip,c=s.xField,h=s.yField,p=kE(c),v=kE(h);return l||La(s,"tooltip",{title:!1,items:[function(y,b,T){return{name:p(y,b,T),value:v(y,b,T)}}]}),i},r=function(i){var s=i.options,l=s.markBackground,c=s.children,h=s.scale,p=s.coordinate,v=s.xField,y=vi(h,"y.domain",[]);return l&&c.unshift(a1({type:"interval",xField:v,yField:y[y.length-1],colorField:l.color,scale:{color:{type:"identity"}},style:{fillOpacity:l.opacity,fill:l.color?void 0:"#e0e4ee"},coordinate:a1(a1({},p),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},l)),i};return Ul(t,n,r,Uc,Kl)(e)}var Zhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xhe=function(e){Zhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radial",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ghe},t}(Cl);function Yhe(e){return Ul(Kl)(e)}var $he=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qhe=function(e){$he(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="CirclePacking",n}return t.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Yhe},t}(Cl),rC=function(){return rC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},rC.apply(this,arguments)};function Khe(e){var t=function(n){var r=n.options,i=r.xField,s=r.yField,l=r.seriesField,c=r.children,h=c==null?void 0:c.map(function(p){return rC(rC({},p),{xField:i,yField:s,seriesField:l,colorField:l,data:p.type==="density"?{transform:[{type:"kde",field:s,groupBy:[i,l]}]}:p.data})}).filter(function(p){return r.violinType!=="density"||p.type==="density"});return La(r,"children",h),r.violinType==="polar"&&La(r,"coordinate",{type:"polar"}),La(r,"violinType",void 0),n};return Ul(t,Uc,Kl)(e)}var Qhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jhe=function(e){Qhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="violin",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Khe},t}(Cl),zE=function(){return zE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zE.apply(this,arguments)},ede=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function tde(e){var t=function(s){var l=s.options,c=l.yField,h=l.children;return h.forEach(function(p,v){La(p,"yField",c[v])}),s},n=function(s){var l=s.options,c=l.yField,h=l.children,p=l.data;if(q5(p))return s;var v=Nt(vi(p,[0]))?p:[p,p];return h.forEach(function(y,b){La(y,"data",ede([],v[b].map(function(T){return zE({groupKey:c[b]},T)}),!0))}),s},r=function(s){var l=s.options,c=l.yField,h=c[0],p=c[1],v=l.tooltip;return v||La(l,"tooltip",{items:[{field:h,value:h},{field:p,value:p}]}),s},i=function(s){var l=s.options,c=l.children,h=l.layout,p=l.coordinate.transform,v=l.paddingBottom,y=v===void 0?kU:v,b=l.paddingLeft,T=b===void 0?kU:b,M=l.axis;La(l,"axisText",zE(zE({},(M==null?void 0:M.x)||{}),{layout:h}));var R=c[0],L=c[1];if(h==="vertical")La(l,"direction","col"),La(l,"paddingLeft",T),La(l,"coordinate.transform",p.filter(function(Y){return Y.type!=="transpose"})),La(R,"paddingBottom",BU),La(L,"paddingTop",BU),La(L,"axis",{x:{position:"top"}}),La(L,"scale",{y:{range:[0,1]}});else{La(l,"paddingBottom",y),La(R,"scale",{y:{range:[0,1]}});var N=R.paddingRight,z=N===void 0?tI:N,H=L.paddingLeft,X=H===void 0?tI:H;La(R,"paddingRight",z),La(R,"axis",{x:{position:"right"}}),La(L,"paddingLeft",X)}return s};return Ul(t,n,r,i,Uc,Kl)(e)}var nde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rde=function(e){nde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return t.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return tde},t}(Cl),s1;(function(e){e.color="key",e.d="path"})(s1||(s1={}));function ide(e){var t=function(n){var r=n.options,i=r.data,s=r.setsField,l=r.sizeField;return Nt(i)&&(La(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:s,size:l,as:[s1.color,s1.d]}]}),La(r,"colorField",s),La(r,["children","0","encode","d"],s1.d)),La(n,"options",oI(r,["sizeField","setsField"])),n};return Ul(t,Kl)(e)}var ode=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ade=function(e){ode(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="venn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:s1.color,d:s1.d}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ide},t}(Cl);function sde(e){var t=function(n){return n};return Ul(t,Kl)(e)}var lde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ude=function(e){lde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Sunburst",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return sde},t}(Cl),cde={Base:Lue,Line:kce,Column:Rce,Pie:jce,Area:wce,Bar:Cce,DualAxes:qU,Funnel:Nce,Scatter:Wce,Radar:Xce,Rose:Efe,Stock:ife,TinyLine:sfe,TinyArea:cfe,TinyColumn:dfe,TinyProgress:mfe,TinyRing:_fe,Waterfall:Afe,Histogram:she,Heatmap:che,Box:dhe,Sankey:mhe,Bullet:Ihe,Gauge:Nhe,Liquid:khe,WordCloud:jhe,Treemap:Whe,RadialBar:Xhe,CirclePacking:qhe,Violin:Jhe,BidirectionalBar:rde,Venn:ade,Mix:qU,Sunburst:ude},pI=function(){return pI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pI.apply(this,arguments)},ij=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},fde=(0,$.forwardRef)(function(e,t){var n=e.chartType,r=n===void 0?"Base":n,i=ij(e,["chartType"]),s=i.containerStyle,l=s===void 0?{height:"inherit"}:s,c=i.containerAttributes,h=c===void 0?{}:c,p=i.className,v=i.loading,y=i.loadingTemplate,b=i.errorTemplate,T=ij(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),M=Ki(cde[r],T),R=M.chart,L=M.container;return(0,$.useImperativeHandle)(t,function(){return R.current}),$.createElement(nt,{errorTemplate:b},v&&$.createElement(mt,{loadingTemplate:y}),$.createElement("div",pI({className:p,style:l,ref:L},h)))})},78677:function(_t,W,D){"use strict";var q=D(67294),G=D(16002),E=function(){return E=Object.assign||function($){for(var se,ce=1,ye=arguments.length;ce<ye;ce++){se=arguments[ce];for(var ae in se)Object.prototype.hasOwnProperty.call(se,ae)&&($[ae]=se[ae])}return $},E.apply(this,arguments)},fe=function($){return q.createElement(G.P,E({},$,{chartType:"Column"}))};W.Z=fe},80652:function(_t,W,D){"use strict";var q=D(67294),G=D(16002),E=function(){return E=Object.assign||function($){for(var se,ce=1,ye=arguments.length;ce<ye;ce++){se=arguments[ce];for(var ae in se)Object.prototype.hasOwnProperty.call(se,ae)&&($[ae]=se[ae])}return $},E.apply(this,arguments)},fe=function($){return q.createElement(G.P,E({},$,{chartType:"Line"}))};W.Z=fe},63430:function(_t,W,D){"use strict";var q=D(67294),G=D(16002),E=function(){return E=Object.assign||function($){for(var se,ce=1,ye=arguments.length;ce<ye;ce++){se=arguments[ce];for(var ae in se)Object.prototype.hasOwnProperty.call(se,ae)&&($[ae]=se[ae])}return $},E.apply(this,arguments)},fe=function($){return q.createElement(G.P,E({},$,{chartType:"Pie"}))};W.Z=fe},6466:function(_t,W,D){"use strict";D.d(W,{Z:function(){return ft}});var q=D(4942),G=D(1413),E=D(45987),fe=D(28459),$=D(93967),se=D.n($),ce=D(67294),ye=D(72120),ae=D(44962),He=D(98082),J=function(Ae){return(0,q.Z)({},Ae.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:Ae.marginLG,marginInline:0,color:Ae.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function me(Pe){return(0,He.Xj)("ProCardOperation",function(Ae){var Be=(0,G.Z)((0,G.Z)({},Ae),{},{componentCls:".".concat(Pe)});return[J(Be)]})}var Oe=D(85893),Q=function(Ae){var Be=Ae.className,Ze=Ae.style,ut=Ze===void 0?{}:Ze,tn=Ae.children,De=(0,ce.useContext)(fe.ZP.ConfigContext),mt=De.getPrefixCls,Re=mt("pro-card-operation"),nt=me(Re),qe=nt.wrapSSR,Ge=nt.hashId,Dt=se()(Re,Be,Ge);return qe((0,Oe.jsx)("div",{className:Dt,style:ut,children:tn}))},le=Q,ee=D(96604),be=function(Ae){return(0,q.Z)({},Ae.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,q.Z)({flexDirection:"row"},"".concat(Ae.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(Ae.colorBorder)}})};function et(Pe){return(0,He.Xj)("StatisticCard",function(Ae){var Be=(0,G.Z)((0,G.Z)({},Ae),{},{componentCls:".".concat(Pe)});return[be(Be)]})}var tt=["children","statistic","className","chart","chartPlacement","footer"],wt=function(Ae){var Be=Ae.children,Ze=Ae.statistic,ut=Ae.className,tn=Ae.chart,De=Ae.chartPlacement,mt=Ae.footer,Re=(0,E.Z)(Ae,tt),nt=(0,ce.useContext)(fe.ZP.ConfigContext),qe=nt.getPrefixCls,Ge=qe("pro-statistic-card"),Dt=et(Ge),yt=Dt.wrapSSR,Le=Dt.hashId,Zt=se()(Ge,ut,Le),yn=Ze&&(0,Oe.jsx)(ee.Z,(0,G.Z)({layout:"vertical"},Ze)),Tn=se()("".concat(Ge,"-chart"),Le,(0,q.Z)((0,q.Z)({},"".concat(Ge,"-chart-left"),De==="left"&&tn&&Ze),"".concat(Ge,"-chart-right"),De==="right"&&tn&&Ze)),lr=tn&&(0,Oe.jsx)("div",{className:Tn,children:tn}),or=se()("".concat(Ge,"-content "),Le,(0,q.Z)({},"".concat(Ge,"-content-horizontal"),De==="left"||De==="right")),Lt=(lr||yn)&&(De==="left"?(0,Oe.jsxs)("div",{className:or,children:[lr,yn]}):(0,Oe.jsxs)("div",{className:or,children:[yn,lr]})),en=mt&&(0,Oe.jsx)("div",{className:"".concat(Ge,"-footer ").concat(Le).trim(),children:mt});return yt((0,Oe.jsxs)(ye.Z,(0,G.Z)((0,G.Z)({className:Zt},Re),{},{children:[Lt,Be,en]})))},gt=function(Ae){return(0,Oe.jsx)(wt,(0,G.Z)({bodyStyle:{padding:0}},Ae))};wt.Statistic=ee.Z,wt.Divider=ae.Z,wt.Operation=le,wt.isProCard=!0,wt.Group=gt;var ft=wt},96604:function(_t,W,D){"use strict";D.d(W,{Z:function(){return an}});var q=D(1413),G=D(4942),E=D(45987),fe=D(87462),$=D(67294),se=D(36688),ce=D(5627),ye=function(zt,je){return $.createElement(ce.Z,(0,fe.Z)({},zt,{ref:je,icon:se.Z}))},ae=$.forwardRef(ye),He=ae,J=D(28459),me=D(83062),Oe=D(40411),Q=D(57838),le=D(96159),ee=D(93967),be=D.n(ee),et=D(64217),tt=D(53124),wt=D(87564),ft=Pt=>{const{value:zt,formatter:je,precision:rt,decimalSeparator:Ut,groupSeparator:U="",prefixCls:he}=Pt;let ot;if(typeof je=="function")ot=je(zt);else{const de=String(zt),qt=de.match(/^(-?)(\d*)(\.(\d+))?$/);if(!qt||de==="-")ot=de;else{const ln=qt[1];let mn=qt[2]||"0",Dn=qt[4]||"";mn=mn.replace(/\B(?=(\d{3})+(?!\d))/g,U),typeof rt=="number"&&(Dn=Dn.padEnd(rt,"0").slice(0,rt>0?rt:0)),Dn&&(Dn=`${Ut}${Dn}`),ot=[$.createElement("span",{key:"int",className:`${he}-content-value-int`},ln,mn),Dn&&$.createElement("span",{key:"decimal",className:`${he}-content-value-decimal`},Dn)]}}return $.createElement("span",{className:`${he}-content-value`},ot)},Pe=D(14747),Ae=D(91945),Be=D(45503);const Ze=Pt=>{const{componentCls:zt,marginXXS:je,padding:rt,colorTextDescription:Ut,titleFontSize:U,colorTextHeading:he,contentFontSize:ot,fontFamily:de}=Pt;return{[`${zt}`]:Object.assign(Object.assign({},(0,Pe.Wf)(Pt)),{[`${zt}-title`]:{marginBottom:je,color:Ut,fontSize:U},[`${zt}-skeleton`]:{paddingTop:rt},[`${zt}-content`]:{color:he,fontSize:ot,fontFamily:de,[`${zt}-content-value`]:{display:"inline-block",direction:"ltr"},[`${zt}-content-prefix, ${zt}-content-suffix`]:{display:"inline-block"},[`${zt}-content-prefix`]:{marginInlineEnd:je},[`${zt}-content-suffix`]:{marginInlineStart:je}}})}},ut=Pt=>{const{fontSizeHeading3:zt,fontSize:je}=Pt;return{titleFontSize:je,contentFontSize:zt}};var tn=(0,Ae.I$)("Statistic",Pt=>{const zt=(0,Be.TS)(Pt,{});return[Ze(zt)]},ut),De=function(Pt,zt){var je={};for(var rt in Pt)Object.prototype.hasOwnProperty.call(Pt,rt)&&zt.indexOf(rt)<0&&(je[rt]=Pt[rt]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,rt=Object.getOwnPropertySymbols(Pt);Ut<rt.length;Ut++)zt.indexOf(rt[Ut])<0&&Object.prototype.propertyIsEnumerable.call(Pt,rt[Ut])&&(je[rt[Ut]]=Pt[rt[Ut]]);return je},Re=Pt=>{const{prefixCls:zt,className:je,rootClassName:rt,style:Ut,valueStyle:U,value:he=0,title:ot,valueRender:de,prefix:qt,suffix:ln,loading:mn=!1,formatter:Dn,precision:Yn,decimalSeparator:Kn=".",groupSeparator:pn=",",onMouseEnter:vt,onMouseLeave:Nt}=Pt,An=De(Pt,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:In,direction:$n,statistic:pt}=$.useContext(tt.E_),xe=In("statistic",zt),[Fe,st,It]=tn(xe),Mt=$.createElement(ft,{decimalSeparator:Kn,groupSeparator:pn,prefixCls:xe,formatter:Dn,precision:Yn,value:he}),wn=be()(xe,{[`${xe}-rtl`]:$n==="rtl"},pt==null?void 0:pt.className,je,rt,st,It),rr=(0,et.Z)(An,{aria:!0,data:!0});return Fe($.createElement("div",Object.assign({},rr,{className:wn,style:Object.assign(Object.assign({},pt==null?void 0:pt.style),Ut),onMouseEnter:vt,onMouseLeave:Nt}),ot&&$.createElement("div",{className:`${xe}-title`},ot),$.createElement(wt.Z,{paragraph:!1,loading:mn,className:`${xe}-skeleton`},$.createElement("div",{style:U,className:`${xe}-content`},qt&&$.createElement("span",{className:`${xe}-content-prefix`},qt),de?de(Mt):Mt,ln&&$.createElement("span",{className:`${xe}-content-suffix`},ln)))))};const nt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function qe(Pt,zt){let je=Pt;const rt=/\[[^\]]*]/g,Ut=(zt.match(rt)||[]).map(de=>de.slice(1,-1)),U=zt.replace(rt,"[]"),he=nt.reduce((de,qt)=>{let[ln,mn]=qt;if(de.includes(ln)){const Dn=Math.floor(je/mn);return je-=Dn*mn,de.replace(new RegExp(`${ln}+`,"g"),Yn=>{const Kn=Yn.length;return Dn.toString().padStart(Kn,"0")})}return de},U);let ot=0;return he.replace(rt,()=>{const de=Ut[ot];return ot+=1,de})}function Ge(Pt,zt){const{format:je=""}=zt,rt=new Date(Pt).getTime(),Ut=Date.now(),U=Math.max(rt-Ut,0);return qe(U,je)}var Dt=function(Pt,zt){var je={};for(var rt in Pt)Object.prototype.hasOwnProperty.call(Pt,rt)&&zt.indexOf(rt)<0&&(je[rt]=Pt[rt]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,rt=Object.getOwnPropertySymbols(Pt);Ut<rt.length;Ut++)zt.indexOf(rt[Ut])<0&&Object.prototype.propertyIsEnumerable.call(Pt,rt[Ut])&&(je[rt[Ut]]=Pt[rt[Ut]]);return je};const yt=1e3/30;function Le(Pt){return new Date(Pt).getTime()}const Zt=Pt=>{const{value:zt,format:je="HH:mm:ss",onChange:rt,onFinish:Ut}=Pt,U=Dt(Pt,["value","format","onChange","onFinish"]),he=(0,Q.Z)(),ot=$.useRef(null),de=()=>{Ut==null||Ut(),ot.current&&(clearInterval(ot.current),ot.current=null)},qt=()=>{const Dn=Le(zt);Dn>=Date.now()&&(ot.current=setInterval(()=>{he(),rt==null||rt(Dn-Date.now()),Dn<Date.now()&&de()},yt))};$.useEffect(()=>(qt(),()=>{ot.current&&(clearInterval(ot.current),ot.current=null)}),[zt]);const ln=(Dn,Yn)=>Ge(Dn,Object.assign(Object.assign({},Yn),{format:je})),mn=Dn=>(0,le.Tm)(Dn,{title:void 0});return $.createElement(Re,Object.assign({},U,{value:zt,valueRender:mn,formatter:ln}))};var yn=$.memo(Zt);Re.Countdown=yn;var Tn=Re,lr=D(98082),or=function(zt){return(0,G.Z)({},zt.componentCls,(0,G.Z)((0,G.Z)((0,G.Z)((0,G.Z)((0,G.Z)({display:"flex",fontSize:zt.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,G.Z)({display:"flex",width:"100%"},"".concat(zt.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,G.Z)({width:"100%"},"".concat(zt.antCls,"-statistic-content"),{"&-value-int":{fontSize:zt.fontSizeHeading3}}),"&-description":{width:"100%"}},"".concat(zt.antCls,"-statistic-title"),{color:zt.colorText}),"&-trend-up",(0,G.Z)({},"".concat(zt.antCls,"-statistic-content"),(0,G.Z)({color:"#f5222d"},"".concat(zt.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),"&-trend-down",(0,G.Z)({},"".concat(zt.antCls,"-statistic-content"),(0,G.Z)({color:"#389e0d"},"".concat(zt.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),"& &-layout-horizontal",(0,G.Z)((0,G.Z)((0,G.Z)({display:"flex",justifyContent:"space-between"},"".concat(zt.antCls,"-statistic-title"),{marginBlockEnd:0}),"".concat(zt.antCls,"-statistic-content-value"),{fontWeight:500}),"".concat(zt.antCls,"-statistic-title,").concat(zt.antCls,"-statistic-content,").concat(zt.antCls,"-statistic-content-suffix,").concat(zt.antCls,"-statistic-content-prefix,").concat(zt.antCls,"-statistic-content-value-decimal"),{fontSize:zt.fontSize})),"& &-layout-inline",(0,G.Z)((0,G.Z)((0,G.Z)({display:"inline-flex",color:zt.colorTextSecondary},"".concat(zt.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),"".concat(zt.antCls,"-statistic-content"),{color:zt.colorTextSecondary}),"".concat(zt.antCls,"-statistic-title,").concat(zt.antCls,"-statistic-content,").concat(zt.antCls,"-statistic-content-suffix,").concat(zt.antCls,"-statistic-content-prefix,").concat(zt.antCls,"-statistic-content-value-decimal"),{fontSize:zt.fontSizeSM})))};function Lt(Pt){return(0,lr.Xj)("Statistic",function(zt){var je=(0,q.Z)((0,q.Z)({},zt),{},{componentCls:".".concat(Pt)});return[or(je)]})}var en=D(85893),hn=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],Xn=function(zt){var je=zt.className,rt=zt.layout,Ut=rt===void 0?"inline":rt,U=zt.style,he=zt.description,ot=zt.children,de=zt.title,qt=zt.tip,ln=zt.status,mn=zt.trend,Dn=zt.prefix,Yn=zt.icon,Kn=(0,E.Z)(zt,hn),pn=(0,$.useContext)(J.ZP.ConfigContext),vt=pn.getPrefixCls,Nt=vt("pro-card-statistic"),An=Lt(Nt),In=An.wrapSSR,$n=An.hashId,pt=be()(Nt,je,$n),xe=be()("".concat(Nt,"-status"),$n),Fe=be()("".concat(Nt,"-icon"),$n),st=be()("".concat(Nt,"-wrapper"),$n),It=be()("".concat(Nt,"-content"),$n),Mt=be()($n,(0,G.Z)((0,G.Z)({},"".concat(Nt,"-layout-").concat(Ut),Ut),"".concat(Nt,"-trend-").concat(mn),mn)),wn=qt&&(0,en.jsx)(me.Z,{title:qt,children:(0,en.jsx)(He,{className:"".concat(Nt,"-tip ").concat($n).trim()})}),rr=be()("".concat(Nt,"-trend-icon"),$n,(0,G.Z)({},"".concat(Nt,"-trend-icon-").concat(mn),mn)),Er=mn&&(0,en.jsx)("div",{className:rr}),qn=ln&&(0,en.jsx)("div",{className:xe,children:(0,en.jsx)(Oe.Z,{status:ln,text:null})}),Me=Yn&&(0,en.jsx)("div",{className:Fe,children:Yn});return In((0,en.jsxs)("div",{className:pt,style:U,children:[Me,(0,en.jsxs)("div",{className:st,children:[qn,(0,en.jsxs)("div",{className:It,children:[(0,en.jsx)(Tn,(0,q.Z)({title:(de||wn)&&(0,en.jsxs)(en.Fragment,{children:[de,wn]}),prefix:(Er||Dn)&&(0,en.jsxs)(en.Fragment,{children:[Er,Dn]}),className:Mt},Kn)),he&&(0,en.jsx)("div",{className:"".concat(Nt,"-description ").concat($n).trim(),children:he})]})]})]}))},an=Xn},46343:function(_t,W,D){"use strict";D.d(W,{S$:function(){return Pt},bf:function(){return zt},ni:function(){return Zt},oI:function(){return Xn},sX:function(){return an}});var q=D(34155);function G(je,rt,Ut,U){function he(ot){return ot instanceof Ut?ot:new Ut(function(de){de(ot)})}return new(Ut||(Ut=Promise))(function(ot,de){function qt(Dn){try{mn(U.next(Dn))}catch(Yn){de(Yn)}}function ln(Dn){try{mn(U.throw(Dn))}catch(Yn){de(Yn)}}function mn(Dn){Dn.done?ot(Dn.value):he(Dn.value).then(qt,ln)}mn((U=U.apply(je,rt||[])).next())})}function E(je,rt){var Ut={label:0,sent:function(){if(ot[0]&1)throw ot[1];return ot[1]},trys:[],ops:[]},U,he,ot,de;return de={next:qt(0),throw:qt(1),return:qt(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function qt(mn){return function(Dn){return ln([mn,Dn])}}function ln(mn){if(U)throw new TypeError("Generator is already executing.");for(;Ut;)try{if(U=1,he&&(ot=mn[0]&2?he.return:mn[0]?he.throw||((ot=he.return)&&ot.call(he),0):he.next)&&!(ot=ot.call(he,mn[1])).done)return ot;switch(he=0,ot&&(mn=[mn[0]&2,ot.value]),mn[0]){case 0:case 1:ot=mn;break;case 4:return Ut.label++,{value:mn[1],done:!1};case 5:Ut.label++,he=mn[1],mn=[0];continue;case 7:mn=Ut.ops.pop(),Ut.trys.pop();continue;default:if(ot=Ut.trys,!(ot=ot.length>0&&ot[ot.length-1])&&(mn[0]===6||mn[0]===2)){Ut=0;continue}if(mn[0]===3&&(!ot||mn[1]>ot[0]&&mn[1]<ot[3])){Ut.label=mn[1];break}if(mn[0]===6&&Ut.label<ot[1]){Ut.label=ot[1],ot=mn;break}if(ot&&Ut.label<ot[2]){Ut.label=ot[2],Ut.ops.push(mn);break}ot[2]&&Ut.ops.pop(),Ut.trys.pop();continue}mn=rt.call(je,Ut)}catch(Dn){mn=[6,Dn],he=0}finally{U=ot=0}if(mn[0]&5)throw mn[1];return{value:mn[0]?mn[1]:void 0,done:!0}}}function fe(je,rt){var Ut=typeof Symbol=="function"&&je[Symbol.iterator];if(!Ut)return je;var U=Ut.call(je),he,ot=[],de;try{for(;(rt===void 0||rt-- >0)&&!(he=U.next()).done;)ot.push(he.value)}catch(qt){de={error:qt}}finally{try{he&&!he.done&&(Ut=U.return)&&Ut.call(U)}finally{if(de)throw de.error}}return ot}function $(je,rt,Ut){if(Ut||arguments.length===2)for(var U=0,he=rt.length,ot;U<he;U++)(ot||!(U in rt))&&(ot||(ot=Array.prototype.slice.call(rt,0,U)),ot[U]=rt[U]);return je.concat(ot||Array.prototype.slice.call(rt))}function se(je){return je&&je.__esModule&&Object.prototype.hasOwnProperty.call(je,"default")?je.default:je}var ce={exports:{}},ye={exports:{}},ae={exports:{}};(function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=Ut;function Ut(U){return U&&typeof U.length=="number"&&U.length>=0&&U.length%1===0}je.exports=rt.default})(ae,ae.exports);var He={},J={exports:{}},me={exports:{}};(function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=function(Ut){return function(){for(var U=[],he=arguments.length;he--;)U[he]=arguments[he];var ot=U.pop();return Ut.call(this,U,ot)}},je.exports=rt.default})(me,me.exports);var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.fallback=be,Oe.wrap=et;var Q=Oe.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,le=Oe.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,ee=Oe.hasNextTick=typeof q=="object"&&typeof q.nextTick=="function";function be(je){setTimeout(je,0)}function et(je){return function(rt){for(var Ut=[],U=arguments.length-1;U-- >0;)Ut[U]=arguments[U+1];return je(function(){return rt.apply(void 0,Ut)})}}var tt;Q?tt=queueMicrotask:le?tt=setImmediate:ee?tt=q.nextTick:tt=be,Oe.default=et(tt),function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=ln;var Ut=me.exports,U=qt(Ut),he=Oe,ot=qt(he),de=He;function qt(Yn){return Yn&&Yn.__esModule?Yn:{default:Yn}}function ln(Yn){return(0,de.isAsync)(Yn)?function(){for(var Kn=[],pn=arguments.length;pn--;)Kn[pn]=arguments[pn];var vt=Kn.pop(),Nt=Yn.apply(this,Kn);return mn(Nt,vt)}:(0,U.default)(function(Kn,pn){var vt;try{vt=Yn.apply(this,Kn)}catch(Nt){return pn(Nt)}if(vt&&typeof vt.then=="function")return mn(vt,pn);pn(null,vt)})}function mn(Yn,Kn){return Yn.then(function(pn){Dn(Kn,null,pn)},function(pn){Dn(Kn,pn&&pn.message?pn:new Error(pn))})}function Dn(Yn,Kn,pn){try{Yn(Kn,pn)}catch(vt){(0,ot.default)(function(Nt){throw Nt},vt)}}je.exports=rt.default}(J,J.exports),Object.defineProperty(He,"__esModule",{value:!0}),He.isAsyncIterable=He.isAsyncGenerator=He.isAsync=void 0;var wt=J.exports,gt=ft(wt);function ft(je){return je&&je.__esModule?je:{default:je}}function Pe(je){return je[Symbol.toStringTag]==="AsyncFunction"}function Ae(je){return je[Symbol.toStringTag]==="AsyncGenerator"}function Be(je){return typeof je[Symbol.asyncIterator]=="function"}function Ze(je){if(typeof je!="function")throw new Error("expected a function");return Pe(je)?(0,gt.default)(je):je}He.default=Ze,He.isAsync=Pe,He.isAsyncGenerator=Ae,He.isAsyncIterable=Be;var ut={exports:{}};(function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=Ut;function Ut(U,he){if(he===void 0&&(he=U.length),!he)throw new Error("arity is undefined");function ot(){for(var de=this,qt=[],ln=arguments.length;ln--;)qt[ln]=arguments[ln];return typeof qt[he-1]=="function"?U.apply(this,qt):new Promise(function(mn,Dn){qt[he-1]=function(Yn){for(var Kn=[],pn=arguments.length-1;pn-- >0;)Kn[pn]=arguments[pn+1];if(Yn)return Dn(Yn);mn(Kn.length>1?Kn:Kn[0])},U.apply(de,qt)})}return ot}je.exports=rt.default})(ut,ut.exports),function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0});var Ut=ae.exports,U=ln(Ut),he=He,ot=ln(he),de=ut.exports,qt=ln(de);function ln(mn){return mn&&mn.__esModule?mn:{default:mn}}rt.default=(0,qt.default)(function(mn,Dn,Yn){var Kn=(0,U.default)(Dn)?[]:{};mn(Dn,function(pn,vt,Nt){(0,ot.default)(pn)(function(An){for(var In,$n=[],pt=arguments.length-1;pt-- >0;)$n[pt]=arguments[pt+1];$n.length<2&&(In=$n,$n=In[0]),Kn[vt]=$n,Nt(An)})},function(pn){return Yn(pn,Kn)})},3),je.exports=rt.default}(ye,ye.exports);var tn={exports:{}},De={exports:{}},mt={exports:{}},Re={exports:{}};(function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=Ut;function Ut(U){function he(){for(var ot=[],de=arguments.length;de--;)ot[de]=arguments[de];if(U!==null){var qt=U;U=null,qt.apply(this,ot)}}return Object.assign(he,U),he}je.exports=rt.default})(Re,Re.exports);var nt={exports:{}},qe={exports:{}};(function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=function(Ut){return Ut[Symbol.iterator]&&Ut[Symbol.iterator]()},je.exports=rt.default})(qe,qe.exports),function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=Dn;var Ut=ae.exports,U=de(Ut),he=qe.exports,ot=de(he);function de(Yn){return Yn&&Yn.__esModule?Yn:{default:Yn}}function qt(Yn){var Kn=-1,pn=Yn.length;return function(){return++Kn<pn?{value:Yn[Kn],key:Kn}:null}}function ln(Yn){var Kn=-1;return function(){var vt=Yn.next();return vt.done?null:(Kn++,{value:vt.value,key:Kn})}}function mn(Yn){var Kn=Yn?Object.keys(Yn):[],pn=-1,vt=Kn.length;return function Nt(){var An=Kn[++pn];return An==="__proto__"?Nt():pn<vt?{value:Yn[An],key:An}:null}}function Dn(Yn){if((0,U.default)(Yn))return qt(Yn);var Kn=(0,ot.default)(Yn);return Kn?ln(Kn):mn(Yn)}je.exports=rt.default}(nt,nt.exports);var Ge={exports:{}};(function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=Ut;function Ut(U){return function(){for(var he=[],ot=arguments.length;ot--;)he[ot]=arguments[ot];if(U===null)throw new Error("Callback was already called.");var de=U;U=null,de.apply(this,he)}}je.exports=rt.default})(Ge,Ge.exports);var Dt={exports:{}},yt={exports:{}};(function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0});var Ut={};rt.default=Ut,je.exports=rt.default})(yt,yt.exports),function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=ot;var Ut=yt.exports,U=he(Ut);function he(de){return de&&de.__esModule?de:{default:de}}function ot(de,qt,ln,mn){var Dn=!1,Yn=!1,Kn=!1,pn=0,vt=0;function Nt(){pn>=qt||Kn||Dn||(Kn=!0,de.next().then(function($n){var pt=$n.value,xe=$n.done;if(!(Yn||Dn)){if(Kn=!1,xe){Dn=!0,pn<=0&&mn(null);return}pn++,ln(pt,vt,An),vt++,Nt()}}).catch(In))}function An($n,pt){if(pn-=1,!Yn){if($n)return In($n);if($n===!1){Dn=!0,Yn=!0;return}if(pt===U.default||Dn&&pn<=0)return Dn=!0,mn(null);Nt()}}function In($n){Yn||(Kn=!1,Dn=!0,mn($n))}Nt()}je.exports=rt.default}(Dt,Dt.exports),function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0});var Ut=Re.exports,U=pn(Ut),he=nt.exports,ot=pn(he),de=Ge.exports,qt=pn(de),ln=He,mn=Dt.exports,Dn=pn(mn),Yn=yt.exports,Kn=pn(Yn);function pn(vt){return vt&&vt.__esModule?vt:{default:vt}}rt.default=function(vt){return function(Nt,An,In){if(In=(0,U.default)(In),vt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!Nt)return In(null);if((0,ln.isAsyncGenerator)(Nt))return(0,Dn.default)(Nt,vt,An,In);if((0,ln.isAsyncIterable)(Nt))return(0,Dn.default)(Nt[Symbol.asyncIterator](),vt,An,In);var $n=(0,ot.default)(Nt),pt=!1,xe=!1,Fe=0,st=!1;function It(wn,rr){if(!xe)if(Fe-=1,wn)pt=!0,In(wn);else if(wn===!1)pt=!0,xe=!0;else{if(rr===Kn.default||pt&&Fe<=0)return pt=!0,In(null);st||Mt()}}function Mt(){for(st=!0;Fe<vt&&!pt;){var wn=$n();if(wn===null){pt=!0,Fe<=0&&In(null);return}Fe+=1,An(wn.value,wn.key,(0,qt.default)(It))}st=!1}Mt()}},je.exports=rt.default}(mt,mt.exports),function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0});var Ut=mt.exports,U=ln(Ut),he=He,ot=ln(he),de=ut.exports,qt=ln(de);function ln(Dn){return Dn&&Dn.__esModule?Dn:{default:Dn}}function mn(Dn,Yn,Kn,pn){return(0,U.default)(Yn)(Dn,(0,ot.default)(Kn),pn)}rt.default=(0,qt.default)(mn,4),je.exports=rt.default}(De,De.exports),function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0});var Ut=De.exports,U=de(Ut),he=ut.exports,ot=de(he);function de(ln){return ln&&ln.__esModule?ln:{default:ln}}function qt(ln,mn,Dn){return(0,U.default)(ln,1,mn,Dn)}rt.default=(0,ot.default)(qt,3),je.exports=rt.default}(tn,tn.exports),function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=qt;var Ut=ye.exports,U=de(Ut),he=tn.exports,ot=de(he);function de(ln){return ln&&ln.__esModule?ln:{default:ln}}function qt(ln,mn){return(0,U.default)(ot.default,ln,mn)}je.exports=rt.default}(ce,ce.exports);var Le=se(ce.exports),Zt=function(){function je(){this.args=[],this.tasks=[]}return je.prototype.call=function(){for(var rt=arguments,Ut=[],U=0;U<arguments.length;U++)Ut[U]=rt[U];return this.args=Ut,Le(this.tasks)},je.prototype.tap=function(rt,Ut){var U=this;this.tasks.push(function(he){Ut.apply(void 0,$([],fe(U.args),!1)),he(null,rt)})},je}(),yn={exports:{}},Tn={exports:{}};(function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0});var Ut=ae.exports,U=An(Ut),he=yt.exports,ot=An(he),de=De.exports,qt=An(de),ln=Re.exports,mn=An(ln),Dn=Ge.exports,Yn=An(Dn),Kn=He,pn=An(Kn),vt=ut.exports,Nt=An(vt);function An(xe){return xe&&xe.__esModule?xe:{default:xe}}function In(xe,Fe,st){st=(0,mn.default)(st);var It=0,Mt=0,wn=xe.length,rr=!1;wn===0&&st(null);function Er(qn,Me){qn===!1&&(rr=!0),rr!==!0&&(qn?st(qn):(++Mt===wn||Me===ot.default)&&st(null))}for(;It<wn;It++)Fe(xe[It],It,(0,Yn.default)(Er))}function $n(xe,Fe,st){return(0,qt.default)(xe,1/0,Fe,st)}function pt(xe,Fe,st){var It=(0,U.default)(xe)?In:$n;return It(xe,(0,pn.default)(Fe),st)}rt.default=(0,Nt.default)(pt,3),je.exports=rt.default})(Tn,Tn.exports),function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=qt;var Ut=Tn.exports,U=de(Ut),he=ye.exports,ot=de(he);function de(ln){return ln&&ln.__esModule?ln:{default:ln}}function qt(ln,mn){return(0,ot.default)(U.default,ln,mn)}je.exports=rt.default}(yn,yn.exports);var lr=se(yn.exports),or=function(){function je(){this.tasks=[]}return je.prototype.promise=function(){return lr(this.tasks)},je.prototype.tapPromise=function(rt,Ut){var U=this;this.tasks.push(function(he){return G(U,void 0,void 0,function(){return E(this,function(ot){switch(ot.label){case 0:return[4,Ut()];case 1:return ot.sent(),he(null,rt),[2]}})})})},je}(),Lt={exports:{}};(function(je,rt){Object.defineProperty(rt,"__esModule",{value:!0});var Ut=Re.exports,U=Dn(Ut),he=Ge.exports,ot=Dn(he),de=He,qt=Dn(de),ln=ut.exports,mn=Dn(ln);function Dn(Kn){return Kn&&Kn.__esModule?Kn:{default:Kn}}function Yn(Kn,pn){if(pn=(0,U.default)(pn),!Array.isArray(Kn))return pn(new Error("First argument to waterfall must be an array of functions"));if(!Kn.length)return pn();var vt=0;function Nt(In){var $n=(0,qt.default)(Kn[vt++]);$n.apply(void 0,In.concat([(0,ot.default)(An)]))}function An(In){for(var $n=[],pt=arguments.length-1;pt-- >0;)$n[pt]=arguments[pt+1];if(In!==!1){if(In||vt===Kn.length)return pn.apply(void 0,[In].concat($n));Nt($n)}}Nt([])}rt.default=(0,mn.default)(Yn),je.exports=rt.default})(Lt,Lt.exports);var en=se(Lt.exports),hn=function(){function je(){this.tasks=[]}return je.prototype.call=function(){return en(this.tasks)},je.prototype.tap=function(rt,Ut){this.tasks.length===0?this.tasks.push(function(U){var he=Ut();U(he?null:!1,he)}):this.tasks.push(function(U,he){var ot=Ut.apply(void 0,$([],fe(U),!1));he(ot?null:!1,rt)})},je}(),Xn=function(){function je(){this.tasks=[]}return je.prototype.call=function(){return Le(this.tasks)},je.prototype.tap=function(rt,Ut){this.tasks.push(function(U){var he=Ut();U(he,rt)})},je}(),an=function(){function je(){this.args=[],this.tasks=[]}return je.prototype.promise=function(){for(var rt=arguments,Ut=[],U=0;U<arguments.length;U++)Ut[U]=rt[U];return this.args=Ut,Le(this.tasks)},je.prototype.tapPromise=function(rt,Ut){var U=this;this.tasks.push(function(he){return G(U,void 0,void 0,function(){return E(this,function(ot){switch(ot.label){case 0:return[4,Ut.apply(void 0,$([],fe(this.args),!1))];case 1:return ot.sent(),he(null,rt),[2]}})})})},je}(),Pt=function(){function je(){this.args=[],this.tasks=[]}return je.prototype.promise=function(){for(var rt=arguments,Ut=[],U=0;U<arguments.length;U++)Ut[U]=rt[U];return this.args=Ut,Le(this.tasks)},je.prototype.tapPromise=function(rt,Ut){var U=this;this.tasks.push(function(he){return G(U,void 0,void 0,function(){var ot;return E(this,function(de){switch(de.label){case 0:return[4,Ut.apply(void 0,$([],fe(this.args),!1))];case 1:return ot=de.sent(),he(ot,rt),[2]}})})})},je}(),zt=function(){function je(){this.tasks=[]}return je.prototype.promise=function(){return en(this.tasks)},je.prototype.tapPromise=function(rt,Ut){this.tasks.length===0?this.tasks.push(function(U){Ut().then(function(he){U(null,he)})}):this.tasks.push(function(U,he){Ut(U).then(function(ot){he(null,ot)})})},je}()},17816:function(_t,W){(function(D,q){q(W)})(this,function(D){"use strict";function q(Ke){var dt=typeof Symbol=="function"&&Symbol.iterator,Wt=dt&&Ke[dt],dn=0;if(Wt)return Wt.call(Ke);if(Ke&&typeof Ke.length=="number")return{next:function(){return{value:(Ke=Ke&&dn>=Ke.length?void 0:Ke)&&Ke[dn++],done:!Ke}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(Ke,dt){var Wt=typeof Symbol=="function"&&Ke[Symbol.iterator];if(!Wt)return Ke;var dn,Fn,Bn=Wt.call(Ke),_n=[];try{for(;(dt===void 0||0<dt--)&&!(dn=Bn.next()).done;)_n.push(dn.value)}catch(Cn){Fn={error:Cn}}finally{try{dn&&!dn.done&&(Wt=Bn.return)&&Wt.call(Bn)}finally{if(Fn)throw Fn.error}}return _n}function E(Ke,dt,Wt){if(Wt||arguments.length===2)for(var dn,Fn=0,Bn=dt.length;Fn<Bn;Fn++)!dn&&Fn in dt||((dn=dn||Array.prototype.slice.call(dt,0,Fn))[Fn]=dt[Fn]);return Ke.concat(dn||Array.prototype.slice.call(dt))}function fe(Ke){return se(Ke,"Function")}var $={}.toString,se=function(Ke,dt){return $.call(Ke)==="[object "+dt+"]"},ce=function(Ke){return Array.isArray?Array.isArray(Ke):se(Ke,"Array")},ye=function(Ke){if(typeof(dt=Ke)!="object"||dt===null||!se(Ke,"Object"))return!1;var dt;if(Object.getPrototypeOf(Ke)===null)return!0;for(var Wt=Ke;Object.getPrototypeOf(Wt)!==null;)Wt=Object.getPrototypeOf(Wt);return Object.getPrototypeOf(Ke)===Wt},ae=function(Ke){return se(Ke,"Number")},He=Object.values?function(Ke){return Object.values(Ke)}:function(Ke){var dt,Wt=[],dn=Ke,Fn=function(pr,hr){fe(Ke)&&hr==="prototype"||Wt.push(pr)};if(dn){if(ce(dn))for(var Bn=0,_n=dn.length;Bn<_n&&Fn(dn[Bn],Bn)!==!1;Bn++);else if(dt=typeof dn,dn!==null&&dt=="object"||dt=="function"){for(var Cn in dn)if(dn.hasOwnProperty(Cn)&&Fn(dn[Cn],Cn)===!1)break}}return Wt},J=5;function me(Ke){for(var dt=[],Wt=1;Wt<arguments.length;Wt++)dt[Wt-1]=arguments[Wt];for(var dn=0;dn<dt.length;dn+=1)(function Fn(Bn,_n,Cn,pr){for(var hr in Cn=Cn||0,pr=pr||J,_n){var ni;_n.hasOwnProperty(hr)&&((ni=_n[hr])!==null&&ye(ni)?(ye(Bn[hr])||(Bn[hr]={}),Cn<pr?Fn(Bn[hr],ni,Cn+1,pr):Bn[hr]=_n[hr]):ce(ni)?(Bn[hr]=[],Bn[hr]=Bn[hr].concat(ni)):ni!==void 0&&(Bn[hr]=ni))}})(Ke,dt[dn]);return Ke}function Oe(Ke){return Ke}(function(Ke,dt){var Wt;if(fe(Ke))return(Wt=function(){for(var dn=[],Fn=0;Fn<arguments.length;Fn++)dn[Fn]=arguments[Fn];var Bn,_n=dt?dt.apply(this,dn):dn[0],Cn=Wt.cache;return Cn.has(_n)?Cn.get(_n):(Bn=Ke.apply(this,dn),Cn.set(_n,Bn),Bn)}).cache=new Map;throw new TypeError("Expected a function")})(function(Ke,_n){var Wt=(_n=_n===void 0?{}:_n).fontSize,dn=_n.fontFamily,Fn=_n.fontWeight,Bn=_n.fontStyle,_n=_n.fontVariant;return(Q=Q||document.createElement("canvas").getContext("2d")).font=[Bn,_n,Fn,Wt+"px",dn].join(" "),Q.measureText(se(Ke,"String")?Ke:"").width},function(Ke,dt){return function(){for(var Wt=0,dn=0,Fn=arguments.length;dn<Fn;dn++)Wt+=arguments[dn].length;for(var Bn=Array(Wt),_n=0,dn=0;dn<Fn;dn++)for(var Cn=arguments[dn],pr=0,hr=Cn.length;pr<hr;pr++,_n++)Bn[_n]=Cn[pr];return Bn}([Ke],He(dt=dt===void 0?{}:dt)).join("")});var Q,le=typeof Float32Array!="undefined"?Float32Array:Array;function ee(){var Ke=new le(9);return le!=Float32Array&&(Ke[1]=0,Ke[2]=0,Ke[3]=0,Ke[5]=0,Ke[6]=0,Ke[7]=0),Ke[0]=1,Ke[4]=1,Ke[8]=1,Ke}Math.hypot||(Math.hypot=function(){for(var Ke=0,dt=arguments.length;dt--;)Ke+=arguments[dt]*arguments[dt];return Math.sqrt(Ke)});var be=function(Ke,Wi,Zi){var dn=Wi[0],Fn=Wi[1],Bn=Wi[2],_n=Wi[3],Cn=Wi[4],pr=Wi[5],hr=Wi[6],ni=Wi[7],Wi=Wi[8],Qi=Zi[0],ri=Zi[1],Gi=Zi[2],zi=Zi[3],qr=Zi[4],To=Zi[5],di=Zi[6],So=Zi[7],Zi=Zi[8];return Ke[0]=Qi*dn+ri*_n+Gi*hr,Ke[1]=Qi*Fn+ri*Cn+Gi*ni,Ke[2]=Qi*Bn+ri*pr+Gi*Wi,Ke[3]=zi*dn+qr*_n+To*hr,Ke[4]=zi*Fn+qr*Cn+To*ni,Ke[5]=zi*Bn+qr*pr+To*Wi,Ke[6]=di*dn+So*_n+Zi*hr,Ke[7]=di*Fn+So*Cn+Zi*ni,Ke[8]=di*Bn+So*pr+Zi*Wi,Ke};function et(){var Ke=new le(16);return le!=Float32Array&&(Ke[1]=0,Ke[2]=0,Ke[3]=0,Ke[4]=0,Ke[6]=0,Ke[7]=0,Ke[8]=0,Ke[9]=0,Ke[11]=0,Ke[12]=0,Ke[13]=0,Ke[14]=0),Ke[0]=1,Ke[5]=1,Ke[10]=1,Ke[15]=1,Ke}var tt=function(Ke,di,Wt){var dn=di[0],Fn=di[1],Bn=di[2],_n=di[3],Cn=di[4],pr=di[5],hr=di[6],ni=di[7],Wi=di[8],Qi=di[9],ri=di[10],Gi=di[11],zi=di[12],qr=di[13],To=di[14],di=di[15],So=Wt[0],Zi=Wt[1],io=Wt[2],Mo=Wt[3];return Ke[0]=So*dn+Zi*Cn+io*Wi+Mo*zi,Ke[1]=So*Fn+Zi*pr+io*Qi+Mo*qr,Ke[2]=So*Bn+Zi*hr+io*ri+Mo*To,Ke[3]=So*_n+Zi*ni+io*Gi+Mo*di,So=Wt[4],Zi=Wt[5],io=Wt[6],Mo=Wt[7],Ke[4]=So*dn+Zi*Cn+io*Wi+Mo*zi,Ke[5]=So*Fn+Zi*pr+io*Qi+Mo*qr,Ke[6]=So*Bn+Zi*hr+io*ri+Mo*To,Ke[7]=So*_n+Zi*ni+io*Gi+Mo*di,So=Wt[8],Zi=Wt[9],io=Wt[10],Mo=Wt[11],Ke[8]=So*dn+Zi*Cn+io*Wi+Mo*zi,Ke[9]=So*Fn+Zi*pr+io*Qi+Mo*qr,Ke[10]=So*Bn+Zi*hr+io*ri+Mo*To,Ke[11]=So*_n+Zi*ni+io*Gi+Mo*di,So=Wt[12],Zi=Wt[13],io=Wt[14],Mo=Wt[15],Ke[12]=So*dn+Zi*Cn+io*Wi+Mo*zi,Ke[13]=So*Fn+Zi*pr+io*Qi+Mo*qr,Ke[14]=So*Bn+Zi*hr+io*ri+Mo*To,Ke[15]=So*_n+Zi*ni+io*Gi+Mo*di,Ke};function wt(Ke){for(var dt=[],Wt=1;Wt<arguments.length;Wt++)dt[Wt-1]=arguments[Wt];return Ke?dt.reduce(function(dn,Fn){return function(Bn){return Fn(dn(Bn))}},Ke):Oe}function gt(Ke){return Ke instanceof Float32Array||Ke instanceof Array}function ft(Ke,dt,Wt){for(;Ke<dt;)Ke+=2*Math.PI;for(;Wt<Ke;)Ke-=2*Math.PI;return Ke}st=new le(3),le!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0),st=new le(4),le!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0,st[3]=0);function Pe(_n,dt,Wt,dn,Fn){var Bn=(_n=G(_n,2))[0],_n=_n[1],Cn=ee();return Bn=[Bn,_n],(_n=Cn)[0]=1,_n[1]=0,_n[2]=0,_n[3]=0,_n[4]=1,_n[5]=0,_n[6]=Bn[0],_n[7]=Bn[1],_n[8]=1,_n}function Ae(Ke,...dt){return dt.reduce((Wt,dn)=>Fn=>Wt(dn(Fn)),Ke)}function Be(Ke,dt){return dt-Ke?Wt=>(Wt-Ke)/(dt-Ke):Wt=>.5}const Ze=Math.sqrt(50),ut=Math.sqrt(10),tn=Math.sqrt(2);function De(Ke,dt,Wt){return dt=(dt-Ke)/Math.max(0,Wt),Ke=Math.floor(Math.log(dt)/Math.LN10),Wt=dt/Ef(10,Ke),0<=Ke?(Wt>=Ze?10:Wt>=ut?5:Wt>=tn?2:1)*Ef(10,Ke):-Ef(10,-Ke)/(Wt>=Ze?10:Wt>=ut?5:Wt>=tn?2:1)}const mt=(Ke,dt,Wt=5)=>{Ke=[Ke,dt];let dn=0,Fn=Ke.length-1,Bn=Ke[dn],_n=Ke[Fn],Cn;return _n<Bn&&([Bn,_n]=[_n,Bn],[dn,Fn]=[Fn,dn]),0<(Cn=De(Bn,_n,Wt))?(Bn=Math.floor(Bn/Cn)*Cn,_n=Math.ceil(_n/Cn)*Cn,Cn=De(Bn,_n,Wt)):Cn<0&&(Bn=Math.ceil(Bn*Cn)/Cn,_n=Math.floor(_n*Cn)/Cn,Cn=De(Bn,_n,Wt)),0<Cn?(Ke[dn]=Math.floor(Bn/Cn)*Cn,Ke[Fn]=Math.ceil(_n/Cn)*Cn):Cn<0&&(Ke[dn]=Math.ceil(Bn*Cn)/Cn,Ke[Fn]=Math.floor(_n*Cn)/Cn),Ke};function Re(Ke){return Ke!=null&&!Number.isNaN(Ke)}function nt(Ke,dt){return Wt=>{Wt.prototype.rescale=function(){this.initRange(),this.nice();var[dn]=this.chooseTransforms();this.composeOutput(dn,this.chooseClamp(dn))},Wt.prototype.initRange=function(){var dn=this.options.interpolator;this.options.range=Ke(dn)},Wt.prototype.composeOutput=function(dn,Fn){var Bn,{domain:Cn,interpolator:_n,round:pr}=this.getOptions(),Cn=dt(Cn.map(dn)),pr=pr?(Bn=_n,hr=>(hr=Bn(hr),ae(hr)?Math.round(hr):hr)):_n;this.output=Ae(pr,Cn,Fn,dn)},Wt.prototype.invert=void 0}}var qe,st={exports:{}},Fe={exports:{}},Ge=function(Ke){return!(!Ke||typeof Ke=="string")&&(Ke instanceof Array||Array.isArray(Ke)||0<=Ke.length&&(Ke.splice instanceof Function||Object.getOwnPropertyDescriptor(Ke,Ke.length-1)&&Ke.constructor.name!=="String"))},Dt=Array.prototype.concat,yt=Array.prototype.slice,Le=Fe.exports=function(Ke){for(var dt=[],Wt=0,dn=Ke.length;Wt<dn;Wt++){var Fn=Ke[Wt];Ge(Fn)?dt=Dt.call(dt,yt.call(Fn)):dt.push(Fn)}return dt},Zt=(Le.wrap=function(Ke){return function(){return Ke(Le(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),yn=Fe.exports,Tn=Object.hasOwnProperty,lr=Object.create(null);for(qe in Zt)Tn.call(Zt,qe)&&(lr[Zt[qe]]=qe);var or=st.exports={to:{},get:{}};function Lt(Ke,dt,Wt){return Math.min(Math.max(dt,Ke),Wt)}function en(Ke){return Ke=Math.round(Ke).toString(16).toUpperCase(),Ke.length<2?"0"+Ke:Ke}or.get=function(Ke){var dt,Wt;switch(Ke.substring(0,3).toLowerCase()){case"hsl":dt=or.get.hsl(Ke),Wt="hsl";break;case"hwb":dt=or.get.hwb(Ke),Wt="hwb";break;default:dt=or.get.rgb(Ke),Wt="rgb"}return dt?{model:Wt,value:dt}:null},or.get.rgb=function(Ke){if(!Ke)return null;var dt,Wt,dn,Fn=[0,0,0,1];if(dt=Ke.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(dn=dt[2],dt=dt[1],Wt=0;Wt<3;Wt++){var Bn=2*Wt;Fn[Wt]=parseInt(dt.slice(Bn,2+Bn),16)}dn&&(Fn[3]=parseInt(dn,16)/255)}else if(dt=Ke.match(/^#([a-f0-9]{3,4})$/i)){for(dn=(dt=dt[1])[3],Wt=0;Wt<3;Wt++)Fn[Wt]=parseInt(dt[Wt]+dt[Wt],16);dn&&(Fn[3]=parseInt(dn+dn,16)/255)}else{if(dt=Ke.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(Wt=0;Wt<3;Wt++)Fn[Wt]=parseInt(dt[Wt+1],0);else{if(!(dt=Ke.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(dt=Ke.match(/^(\w+)$/))?dt[1]==="transparent"?[0,0,0,0]:Tn.call(Zt,dt[1])?((Fn=Zt[dt[1]])[3]=1,Fn):null:null;for(Wt=0;Wt<3;Wt++)Fn[Wt]=Math.round(2.55*parseFloat(dt[Wt+1]))}dt[4]&&(dt[5]?Fn[3]=.01*parseFloat(dt[4]):Fn[3]=parseFloat(dt[4]))}for(Wt=0;Wt<3;Wt++)Fn[Wt]=Lt(Fn[Wt],0,255);return Fn[3]=Lt(Fn[3],0,1),Fn},or.get.hsl=function(Ke){var dt;return(Ke=Ke&&Ke.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(dt=parseFloat(Ke[4]),[(parseFloat(Ke[1])%360+360)%360,Lt(parseFloat(Ke[2]),0,100),Lt(parseFloat(Ke[3]),0,100),Lt(isNaN(dt)?1:dt,0,1)]):null},or.get.hwb=function(Ke){var dt;return(Ke=Ke&&Ke.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(dt=parseFloat(Ke[4]),[(parseFloat(Ke[1])%360+360)%360,Lt(parseFloat(Ke[2]),0,100),Lt(parseFloat(Ke[3]),0,100),Lt(isNaN(dt)?1:dt,0,1)]):null},or.to.hex=function(){var Ke=yn(arguments);return"#"+en(Ke[0])+en(Ke[1])+en(Ke[2])+(Ke[3]<1?en(Math.round(255*Ke[3])):"")},or.to.rgb=function(){var Ke=yn(arguments);return Ke.length<4||Ke[3]===1?"rgb("+Math.round(Ke[0])+", "+Math.round(Ke[1])+", "+Math.round(Ke[2])+")":"rgba("+Math.round(Ke[0])+", "+Math.round(Ke[1])+", "+Math.round(Ke[2])+", "+Ke[3]+")"},or.to.rgb.percent=function(){var Ke=yn(arguments),dt=Math.round(Ke[0]/255*100),Wt=Math.round(Ke[1]/255*100),dn=Math.round(Ke[2]/255*100);return Ke.length<4||Ke[3]===1?"rgb("+dt+"%, "+Wt+"%, "+dn+"%)":"rgba("+dt+"%, "+Wt+"%, "+dn+"%, "+Ke[3]+")"},or.to.hsl=function(){var Ke=yn(arguments);return Ke.length<4||Ke[3]===1?"hsl("+Ke[0]+", "+Ke[1]+"%, "+Ke[2]+"%)":"hsla("+Ke[0]+", "+Ke[1]+"%, "+Ke[2]+"%, "+Ke[3]+")"},or.to.hwb=function(){var Ke=yn(arguments),dt="";return 4<=Ke.length&&Ke[3]!==1&&(dt=", "+Ke[3]),"hwb("+Ke[0]+", "+Ke[1]+"%, "+Ke[2]+"%"+dt+")"},or.to.keyword=function(Ke){return lr[Ke.slice(0,3)]};var hn=st.exports;function Xn(Ke,dt,Wt){let dn=Wt;return dn<0&&(dn+=1),1<dn&&--dn,dn<1/6?Ke+6*(dt-Ke)*dn:dn<.5?dt:dn<2/3?Ke+(dt-Ke)*(2/3-dn)*6:Ke}function an(Fn){var dt,Wt,dn,Fn=hn.get(Fn);return Fn?({model:Fn,value:dt}=Fn,Fn==="rgb"?dt:Fn==="hsl"?(dt=(Fn=dt)[0]/360,Wt=Fn[1]/100,dn=Fn[2]/100,Fn=Fn[3],Wt==0?[255*dn,255*dn,255*dn,Fn]:[255*Xn(Wt=2*dn-(dn=dn<.5?dn*(1+Wt):dn+Wt-dn*Wt),dn,dt+1/3),255*Xn(Wt,dn,dt),255*Xn(Wt,dn,dt-1/3),Fn]):null):null}const Pt=(Ke,dt)=>Wt=>Ke*(1-Wt)+dt*Wt,zt=(Ke,dt)=>{if(typeof Ke=="number"&&typeof dt=="number")return Pt(Ke,dt);if(typeof Ke!="string"||typeof dt!="string")return()=>Ke;{var Wt=Ke,dn=dt;const Fn=an(Wt),Bn=an(dn);return Fn===null||Bn===null?Fn?()=>Wt:()=>dn:_n=>{var Cn=new Array(4);for(let Gi=0;Gi<4;Gi+=1){var pr=Fn[Gi],hr=Bn[Gi];Cn[Gi]=pr*(1-_n)+hr*_n}var[ni,Wi,Qi,ri]=Cn;return`rgba(${Math.round(ni)}, ${Math.round(Wi)}, ${Math.round(Qi)}, ${ri})`}}},je=(Ke,dt)=>{const Wt=Pt(Ke,dt);return dn=>Math.round(Wt(dn))};function rt({map:Ke,initKey:dt},Wt){return dt=dt(Wt),Ke.has(dt)?Ke.get(dt):Wt}function Ut(Ke){return typeof Ke=="object"?Ke.valueOf():Ke}class U extends Map{constructor(dt){if(super(),this.map=new Map,this.initKey=Ut,dt!==null)for(var[Wt,dn]of dt)this.set(Wt,dn)}get(dt){return super.get(rt({map:this.map,initKey:this.initKey},dt))}has(dt){return super.has(rt({map:this.map,initKey:this.initKey},dt))}set(dt,Wt){return super.set(([{map:dt,initKey:dn},Fn]=[{map:this.map,initKey:this.initKey},dt],dn=dn(Fn),dt.has(dn)?dt.get(dn):(dt.set(dn,Fn),Fn)),Wt);var dn,Fn}delete(dt){return super.delete(([{map:dt,initKey:Wt},dn]=[{map:this.map,initKey:this.initKey},dt],Wt=Wt(dn),dt.has(Wt)&&(dn=dt.get(Wt),dt.delete(Wt)),dn));var Wt,dn}}class he{constructor(dt){this.options=me({},this.getDefaultOptions()),this.update(dt)}getOptions(){return this.options}update(dt={}){this.options=me({},this.options,dt),this.rescale(dt)}rescale(dt){}}const ot=Symbol("defaultUnknown");function de(Ke,dt,Wt){for(let dn=0;dn<dt.length;dn+=1)Ke.has(dt[dn])||Ke.set(Wt(dt[dn]),dn)}function qt(dt){var{value:dt,from:Wt,to:dn,mapper:Fn,notFoundReturn:Bn}=dt;let _n=Fn.get(dt);if(_n===void 0){if(Bn!==ot)return Bn;_n=Wt.push(dt)-1,Fn.set(dt,_n)}return dn[_n%dn.length]}function ln(Ke){return Ke instanceof Date?dt=>""+dt:typeof Ke=="object"?dt=>JSON.stringify(dt):dt=>dt}class mn extends he{getDefaultOptions(){return{domain:[],range:[],unknown:ot}}constructor(dt){super(dt)}map(dt){return this.domainIndexMap.size===0&&de(this.domainIndexMap,this.getDomain(),this.domainKey),qt({value:this.domainKey(dt),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(dt){return this.rangeIndexMap.size===0&&de(this.rangeIndexMap,this.getRange(),this.rangeKey),qt({value:this.rangeKey(dt),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(dt){var[Wt]=this.options.domain,[dn]=this.options.range;this.domainKey=ln(Wt),this.rangeKey=ln(dn),this.rangeIndexMap?(dt&&!dt.range||this.rangeIndexMap.clear(),dt&&!dt.domain&&!dt.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new mn(this.options)}getRange(){return this.options.range}getDomain(){var dt,Wt;return this.sortedDomain||({domain:dt,compare:Wt}=this.options,this.sortedDomain=Wt?[...dt].sort(Wt):dt),this.sortedDomain}}function Dn(qr){const{domain:dt,range:Wt,paddingOuter:dn,paddingInner:Fn,flex:Bn,round:_n,align:Cn}=qr;var pr=dt.length,ri=0<(ri=(qr=pr)-(hr=Bn).length)?[...hr,...new Array(ri).fill(1)]:ri<0?hr.slice(0,qr):hr,[qr,hr]=Wt,hr=hr-qr,zi=hr/(2/pr*dn+1-1/pr*Fn);const ni=zi*Fn/pr;zi-=pr*ni;const Wi=function(Zi){const io=Math.min(...Zi);return Zi.map(Mo=>Mo/io)}(ri),Qi=zi/Wi.reduce((Zi,io)=>Zi+io);var ri=new U(dt.map((Zi,io)=>(io=Wi[io]*Qi,[Zi,_n?Math.floor(io):io]))),Gi=new U(dt.map((Zi,io)=>(io=Wi[io]*Qi+ni,[Zi,_n?Math.floor(io):io]))),zi=Array.from(Gi.values()).reduce((Zi,io)=>Zi+io),qr=qr+(hr-(zi-zi/pr*Fn))*Cn;let To=_n?Math.round(qr):qr;var di=new Array(pr);for(let Zi=0;Zi<pr;Zi+=1){di[Zi]=(So=To,Math.round(1e12*So)/1e12);var So=dt[Zi];To+=Gi.get(So)}return{valueBandWidth:ri,valueStep:Gi,adjustedRange:di}}class Yn extends mn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:ot,flex:[]}}constructor(dt){super(dt)}clone(){return new Yn(this.options)}getStep(dt){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:dt===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(dt)}getBandWidth(dt){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:dt===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(dt)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:dt,paddingInner:Wt}=this.options;return 0<dt?dt:Wt}getPaddingOuter(){var{padding:dt,paddingOuter:Wt}=this.options;return 0<dt?dt:Wt}rescale(){super.rescale();var{align:dn,domain:dt,range:Fn,round:Bn,flex:Wt}=this.options,{adjustedRange:dn,valueBandWidth:Fn,valueStep:Bn}=function(hr){var Cn=hr.domain;if((Cn=Cn.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((pr=hr.flex)==null||!pr.length))return Dn(hr);var{range:pr,paddingOuter:hr,paddingInner:ni,round:Wi,align:Qi}=hr;let ri,Gi,zi=pr[0];return pr=pr[1]-zi,ri=pr/Math.max(1,2*hr+(Cn-ni)),Wi&&(ri=Math.floor(ri)),zi+=(pr-ri*(Cn-ni))*Qi,Gi=ri*(1-ni),Wi&&(zi=Math.round(zi),Gi=Math.round(Gi)),hr=new Array(Cn).fill(0).map((qr,To)=>zi+To*ri),{valueStep:ri,valueBandWidth:Gi,adjustedRange:hr}}({align:dn,range:Fn,round:Bn,flex:Wt,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:dt});this.valueStep=Bn,this.valueBandWidth=Fn,this.adjustedRange=dn}}const Kn=(Ke,dt,Wt)=>{let dn,Fn,Bn=Ke,_n=dt;if(Bn===_n&&0<Wt)return[Bn];let Cn=De(Bn,_n,Wt);if(Cn===0||!Number.isFinite(Cn))return[];if(0<Cn){Bn=Math.ceil(Bn/Cn),_n=Math.floor(_n/Cn),Fn=new Array(dn=Math.ceil(_n-Bn+1));for(let pr=0;pr<dn;pr+=1)Fn[pr]=(Bn+pr)*Cn}else{Cn=-Cn,Bn=Math.ceil(Bn*Cn),_n=Math.floor(_n*Cn),Fn=new Array(dn=Math.ceil(_n-Bn+1));for(let pr=0;pr<dn;pr+=1)Fn[pr]=(Bn+pr)/Cn}return Fn},pn=(dn,Bn,Wt)=>{var[dn,Fn]=dn,[Bn,_n]=Bn;let Cn,pr;return Ae(pr=dn<Fn?(Cn=Be(dn,Fn),Wt(Bn,_n)):(Cn=Be(Fn,dn),Wt(_n,Bn)),Cn)},vt=(Ke,dt,Wt)=>{const dn=Math.min(Ke.length,dt.length)-1,Fn=new Array(dn),Bn=new Array(dn);var _n=Ke[0]>Ke[dn],Cn=_n?[...Ke].reverse():Ke,pr=_n?[...dt].reverse():dt;for(let hr=0;hr<dn;hr+=1)Fn[hr]=Be(Cn[hr],Cn[hr+1]),Bn[hr]=Wt(pr[hr],pr[hr+1]);return hr=>{var ni=function(Qi,ri,Gi,zi,qr){let To=Gi||0,di=zi||Qi.length;for(var So=qr||(io=>io);To<di;){var Zi=Math.floor((To+di)/2);So(Qi[Zi])>ri?di=Zi:To=Zi+1}return To}(Ke,hr,1,dn)-1,Wi=Fn[ni];return Ae(Bn[ni],Wi)(hr)}},Nt=(Ke,dt,Wt,dn)=>(2<Math.min(Ke.length,dt.length)?vt:pn)(Ke,dt,dn?je:Wt);class An extends he{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Pt,tickCount:5}}map(dt){return Re(dt)?this.output(dt):this.options.unknown}invert(dt){return Re(dt)?this.input(dt):this.options.unknown}nice(){var dt,Wt,dn,Fn;this.options.nice&&([dt,Wt,dn,...Fn]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(dt,Wt,dn,...Fn))}getTicks(){var dt=this.options.tickMethod,[Wt,dn,Fn,...Bn]=this.getTickMethodOptions();return dt(Wt,dn,Fn,...Bn)}getTickMethodOptions(){var{domain:dt,tickCount:Wt}=this.options;return[dt[0],dt[dt.length-1],Wt]}chooseNice(){return mt}rescale(){this.nice();var[dt,Wt]=this.chooseTransforms();this.composeOutput(dt,this.chooseClamp(dt)),this.composeInput(dt,Wt,this.chooseClamp(Wt))}chooseClamp(dn){var{clamp:Wt,range:Fn}=this.options,dn=this.options.domain.map(dn),Fn=Math.min(dn.length,Fn.length);if(Wt){Wt=dn[0],dn=dn[Fn-1];const Bn=dn<Wt?dn:Wt,_n=dn<Wt?Wt:dn;return Cn=>Math.min(Math.max(Bn,Cn),_n)}return Oe}composeOutput(dt,Wt){var{domain:_n,range:dn,round:Fn,interpolate:Bn}=this.options,_n=Nt(_n.map(dt),dn,Bn,Fn);this.output=Ae(_n,Wt,dt)}composeInput(dt,Wt,dn){var{domain:Fn,range:Bn}=this.options,Bn=Nt(Bn,Fn.map(dt),Pt);this.input=Ae(Wt,dn,Bn)}}class In extends An{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:zt,tickMethod:Kn,tickCount:5}}chooseTransforms(){return[Oe,Oe]}clone(){return new In(this.options)}}class $n extends Yn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:ot,paddingInner:1,paddingOuter:0}}constructor(dt){super(dt)}getPaddingInner(){return 1}clone(){return new $n(this.options)}update(dt){super.update(dt)}getPaddingOuter(){return this.options.padding}}function pt(Ke,dt){for(var Wt=[],dn=0,Fn=Ke.length;dn<Fn;dn++)Wt.push(Ke[dn].substr(0,dt));return Wt}var xe,Fe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],st=["January","February","March","April","May","June","July","August","September","October","November","December"],It=pt(st,3);(function(Ke){for(var dt=[],Wt=1;Wt<arguments.length;Wt++)dt[Wt-1]=arguments[Wt];for(var dn=0,Fn=dt;dn<Fn.length;dn++){var Bn,_n=Fn[dn];for(Bn in _n)Ke[Bn]=_n[Bn]}})({},{dayNamesShort:pt(Fe,3),dayNames:Fe,monthNamesShort:It,monthNames:st,amPm:["am","pm"],DoFn:function(Ke){return Ke+["th","st","nd","rd"][3<Ke%10?0:(Ke-Ke%10!=10?1:0)*Ke%10]}});var Mt;let wn=xe=class extends In{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Oe,tickMethod:Kn,tickCount:5}}constructor(Ke){super(Ke)}clone(){return new xe(this.options)}};wn=xe=function(Ke,dt,Wt,dn){var Fn,Bn=arguments.length,_n=Bn<3?dt:dn===null?dn=Object.getOwnPropertyDescriptor(dt,Wt):dn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_n=Reflect.decorate(Ke,dt,Wt,dn);else for(var Cn=Ke.length-1;0<=Cn;Cn--)(Fn=Ke[Cn])&&(_n=(Bn<3?Fn(_n):3<Bn?Fn(dt,Wt,_n):Fn(dt,Wt))||_n);return 3<Bn&&_n&&Object.defineProperty(dt,Wt,_n),_n}([nt(function(Ke){return[Ke(0),Ke(1)]},dt=>{var[dt,Wt]=dt;return Ae(Pt(0,1),Be(dt,Wt))})],wn);let rr=Mt=class extends In{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Oe,tickMethod:Kn,tickCount:5}}constructor(Ke){super(Ke)}clone(){return new Mt(this.options)}};rr=Mt=function(Ke,dt,Wt,dn){var Fn,Bn=arguments.length,_n=Bn<3?dt:dn===null?dn=Object.getOwnPropertyDescriptor(dt,Wt):dn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_n=Reflect.decorate(Ke,dt,Wt,dn);else for(var Cn=Ke.length-1;0<=Cn;Cn--)(Fn=Ke[Cn])&&(_n=(Bn<3?Fn(_n):3<Bn?Fn(dt,Wt,_n):Fn(dt,Wt))||_n);return 3<Bn&&_n&&Object.defineProperty(dt,Wt,_n),_n}([nt(function(Ke){return[Ke(0),Ke(.5),Ke(1)]},Ke=>{const[dt,Wt,dn]=Ke,Fn=Ae(Pt(0,.5),Be(dt,Wt)),Bn=Ae(Pt(.5,1),Be(Wt,dn));return _n=>(dt>dn?_n<Wt?Bn:Fn:_n<Wt?Fn:Bn)(_n)})],rr);function Er(Ke,dt,Wt,dn,Fn){var Bn=new In({range:[dt,dt+dn]}),_n=new In({range:[Wt,Wt+Fn]});return{transform:function(hr){var hr=G(hr,2),pr=hr[0],hr=hr[1];return[Bn.map(pr),_n.map(hr)]},untransform:function(hr){var hr=G(hr,2),pr=hr[0],hr=hr[1];return[Bn.invert(pr),_n.invert(hr)]}}}function qn(Ke,dt,Wt,dn,Fn){return(0,G(Ke,1)[0])(dt,Wt,dn,Fn)}function Me(Ke,dt,Wt,dn,Fn){return G(Ke,1)[0]}function Te(pr,dt,Wt,dn,Fn){var Bn=(pr=G(pr,4))[0],_n=pr[1],Cn=pr[2],pr=pr[3],hr=new In({range:[Cn,pr]}),ni=new In({range:[Bn,_n]}),Wi=1<(Cn=Fn/dn)?1:Cn,Qi=1<Cn?1/Cn:1;return{transform:function(zi){var zi=G(zi,2),Gi=zi[0],zi=zi[1],Gi=ni.map(Gi),zi=hr.map(zi);return[.5*(zi*Math.cos(Gi)*Wi)+.5,.5*(zi*Math.sin(Gi)*Qi)+.5]},untransform:function(qr){var qr=G(qr,2),Gi=qr[0],qr=qr[1],Gi=2*(Gi-.5)/Wi,qr=2*(qr-.5)/Qi,zi=Math.sqrt(Math.pow(Gi,2)+Math.pow(qr,2)),qr=ft(Math.atan2(qr,Gi),Bn,_n);return[ni.invert(qr),hr.invert(zi)]}}}function ke(Ke,dt,Wt,dn,Fn){return{transform:function(_n){var _n=G(_n,2),Cn=_n[0];return[_n[1],Cn]},untransform:function(_n){var _n=G(_n,2),Cn=_n[0];return[_n[1],Cn]}}}function at(Ke){for(var dt=[],Wt=1;Wt<arguments.length;Wt++)dt[Wt-1]=arguments[Wt];return Qn.apply(void 0,E([[-1,-1]],G(dt),!1))}function At(Ke){for(var dt=[],Wt=1;Wt<arguments.length;Wt++)dt[Wt-1]=arguments[Wt];return Qn.apply(void 0,E([[-1,1]],G(dt),!1))}function nn(Ke){for(var dt=[],Wt=1;Wt<arguments.length;Wt++)dt[Wt-1]=arguments[Wt];return Qn.apply(void 0,E([[1,-1]],G(dt),!1))}function cn(_n,dt,Wt,dn,Fn){var Bn,_n=G(_n,1)[0],Cn=ee();return Cn=Cn,_n=_n,Bn=Math.sin(_n),_n=Math.cos(_n),Cn[0]=_n,Cn[1]=Bn,Cn[2]=0,Cn[3]=-Bn,Cn[4]=_n,Cn[5]=0,Cn[6]=0,Cn[7]=0,Cn[8]=1,Cn}function Et(Ke,dt,Wt,dn,Fn){var Bn=(Ke=G(Ke,4))[0],_n=Ke[1],Cn=Ke[2],pr=(Ke[3]-Cn)/(+_n/(2*Math.PI)+1),hr=pr/(2*Math.PI),ni=new In({range:[Cn,Cn+.99*pr]}),Wi=new In({range:[Bn,_n]}),Qi=1<(Ke=Fn/dn)?1:Ke,ri=1<Ke?1/Ke:1;return{transform:function(qr){var qr=G(qr,2),zi=qr[0],qr=qr[1],zi=Wi.map(zi),qr=ni.map(qr);return[.5*(Math.cos(zi)*(hr*zi+qr)*Qi)+.5,.5*(Math.sin(zi)*(hr*zi+qr)*ri)+.5]},untransform:function(qr){var qr=G(qr,2),To=qr[0],qr=qr[1],To=2*(To-.5)/Qi,qr=2*(qr-.5)/ri,zi=Math.sqrt(Math.pow(To,2)+Math.pow(qr,2)),qr=ft(Math.atan2(qr,To)+Math.floor(zi/pr)*Math.PI*2,Bn,_n),To=zi-hr*qr;return[Wi.invert(qr),ni.invert(To)]}}}function Qt(pr,dt,Wt,dn,Fn){var Bn=(pr=G(pr,4))[0],_n=pr[1],Cn=pr[2],pr=pr[3],hr=new In({range:[Cn,pr]});return{transform:function(ni){for(var Wi=[],Qi=ni.length,ri=new $n({domain:new Array(Qi).fill(0).map(function(To,di){return di}),range:[Bn,_n]}),Gi=0;Gi<Qi;Gi++){var qr=ni[Gi],zi=ri.map(Gi),qr=hr.map(qr);Wi.push(zi,qr)}return Wi},untransform:function(ni){for(var Wi=[],Qi=0;Qi<ni.length;Qi+=2){var ri=ni[Qi+1];Wi.push(hr.invert(ri))}return Wi}}}var Qn=function(_n,dt,Wt,dn,Fn){var _n=G(_n,2),Bn=_n[0],_n=_n[1],Cn=ee();return Bn=[Bn,_n],(_n=Cn)[0]=Bn[0],_n[1]=0,_n[2]=0,_n[3]=0,_n[4]=Bn[1],_n[5]=0,_n[6]=0,_n[7]=0,_n[8]=1,_n};function Sr(Ke){return 1/Math.tan(Ke)}function Zr(Ke,dt,Wt,dn,Fn){var Bn=Sr(G(Ke,1)[0]);return{transform:function(pr){var pr=G(pr,2),Cn=pr[0],pr=pr[1];return[Cn+pr*Bn,pr]},untransform:function(pr){var pr=G(pr,2),Cn=pr[0],pr=pr[1];return[Cn-pr*Bn,pr]}}}function yr(Ke,dt,Wt,dn,Fn){var Bn=Sr(G(Ke,1)[0]);return{transform:function(Cn){var Cn=G(Cn,2),pr=Cn[0];return[pr,Cn[1]+pr*Bn]},untransform:function(Cn){var Cn=G(Cn,2),pr=Cn[0];return[pr,Cn[1]-pr*Bn]}}}function Wr(Ke,dt,Wt,Cn,_n){var Bn=Ke<dt,_n=(Bn?dt-Cn:_n-dt)||_n-Cn,Cn=Bn?-1:1;return Cn*_n*(Wt+1)/(Wt+_n/((Ke-dt)*Cn))+dt}function Ei(Ke,dt,Wt,dn,_n){var Bn=Ke<dt,_n=(Bn?dt-dn:_n-dt)||_n-dn;return _n/(_n*(Wt+1)/(Ke-dt)-Wt*(Bn?-1:1))+dt}function yi(Ke,dt,Wt){return Wt?new In({range:[0,1],domain:[0,dt]}).map(Ke):Ke}function wr(Cn,dt,Wt,dn,Fn){var Bn=(Cn=G(Cn,3))[0],_n=Cn[1],Cn=Cn[2],pr=yi(Bn,dn,Cn!==void 0&&Cn);return{transform:function(Wi){var Wi=G(Wi,2),ni=Wi[0],Wi=Wi[1];return[Wr(ni,pr,_n,0,1),Wi]},untransform:function(Wi){var Wi=G(Wi,2),ni=Wi[0],Wi=Wi[1];return[Ei(ni,pr,_n,0,1),Wi]}}}function Ai(Cn,dt,Wt,dn,Fn){var Bn=(Cn=G(Cn,3))[0],_n=Cn[1],Cn=Cn[2],pr=yi(Bn,Fn,Cn!==void 0&&Cn);return{transform:function(hr){return hr=G(hr,2),[hr[0],Wr(hr[1],pr,_n,0,1)]},untransform:function(hr){return hr=G(hr,2),[hr[0],Ei(hr[1],pr,_n,0,1)]}}}function pi(hr,dt,Wt,dn,Fn){var Bn=(hr=G(hr,5))[0],_n=hr[1],Cn=hr[2],pr=hr[3],hr=hr[4],ni=yi(Bn,dn,hr=hr!==void 0&&hr),Wi=yi(_n,Fn,hr);return{transform:function(Gi){var Gi=G(Gi,2),ri=Gi[0],Gi=Gi[1];return[Wr(ri,ni,Cn,0,1),Wr(Gi,Wi,pr,0,1)]},untransform:function(Gi){var Gi=G(Gi,2),ri=Gi[0],Gi=Gi[1];return[Ei(ri,ni,Cn,0,1),Ei(Gi,Wi,pr,0,1)]}}}function _i(hr,dt,Wt,dn,Fn){var Bn=(hr=G(hr,5))[0],_n=hr[1],Cn=hr[2],pr=hr[3],hr=(hr=hr[4])!==void 0&&hr,ni=new In({range:[0,dn]}),Wi=new In({range:[0,Fn]}),Qi=hr?Bn:ni.map(Bn),ri=hr?_n:Wi.map(_n);return{transform:function(qr){var qr=G(qr,2),zi=qr[0],qr=qr[1],To=ni.map(zi)-Qi,di=Wi.map(qr)-ri,So=Math.sqrt(To*To+di*di);return Cn<So?[zi,qr]:(zi=Wr(So,0,pr,0,Cn),qr=Math.atan2(di,To),So=Qi+zi*Math.cos(qr),di=ri+zi*Math.sin(qr),[ni.invert(So),Wi.invert(di)])},untransform:function(qr){var qr=G(qr,2),zi=qr[0],qr=qr[1],To=ni.map(zi)-Qi,di=Wi.map(qr)-ri,So=Math.sqrt(To*To+di*di);return Cn<So?[zi,qr]:(zi=Ei(So,0,pr,0,Cn),qr=Math.atan2(di,To),So=Qi+zi*Math.cos(qr),di=ri+zi*Math.sin(qr),[ni.invert(So),Wi.invert(di)])}}}function Bo(Ke,dt,Wt,dn,Fn,Bn,_n){var Cn=new In({range:[dt,dt+Fn]}),pr=new In({range:[Wt,Wt+Bn]}),hr=new In({range:[dn,dn+_n]});return{transform:function(ri){var ri=G(ri,3),Wi=ri[0],Qi=ri[1],ri=ri[2];return[Cn.map(Wi),pr.map(Qi),hr.map(ri)]},untransform:function(ri){var ri=G(ri,3),Wi=ri[0],Qi=ri[1],ri=ri[2];return[Cn.invert(Wi),pr.invert(Qi),hr.invert(ri)]}}}function Si(ni,dt,Wt,dn,Fn,Bn,_n){var Cn,pr=(ni=G(ni,3))[0],hr=ni[1],ni=ni[2];return Cn=et(),pr=[pr,hr,ni],Cn[0]=1,Cn[1]=0,Cn[2]=0,Cn[3]=0,Cn[4]=0,Cn[5]=1,Cn[6]=0,Cn[7]=0,Cn[8]=0,Cn[9]=0,Cn[10]=1,Cn[11]=0,Cn[12]=pr[0],Cn[13]=pr[1],Cn[14]=pr[2],Cn[15]=1,Cn}function Ci(Ke,dt,Wt,dn,Fn,Bn,_n){return{transform:function(pr){var pr=G(pr,3),hr=pr[0];return[pr[1],hr,pr[2]]},untransform:function(pr){var pr=G(pr,3),hr=pr[0];return[pr[1],hr,pr[2]]}}}function ho(ni,dt,Wt,dn,Fn,Bn,_n){var Cn,pr=(ni=G(ni,3))[0],hr=ni[1],ni=ni[2];return Cn=et(),pr=[pr,hr,ni],Cn[0]=pr[0],Cn[1]=0,Cn[2]=0,Cn[3]=0,Cn[4]=0,Cn[5]=pr[1],Cn[6]=0,Cn[7]=0,Cn[8]=0,Cn[9]=0,Cn[10]=pr[2],Cn[11]=0,Cn[12]=0,Cn[13]=0,Cn[14]=0,Cn[15]=1,Cn}go.prototype.update=function(Ke){this.options=me({},this.options,Ke),this.recoordinate()},go.prototype.clone=function(){return new go(this.options)},go.prototype.getOptions=function(){return this.options},go.prototype.clear=function(){this.update({transformations:[]})},go.prototype.getSize=function(){var Ke=this.options;return[Ke.width,Ke.height]},go.prototype.getCenter=function(){var Ke=this.options,dt=Ke.x,Wt=Ke.y;return[(2*dt+Ke.width)/2,(2*Wt+Ke.height)/2]},go.prototype.transform=function(){for(var Ke=[],dt=0;dt<arguments.length;dt++)Ke[dt]=arguments[dt];var Wt=this.options.transformations;return this.update({transformations:E(E([],G(Wt),!1),[E([],G(Ke),!1)],!1)}),this},go.prototype.map=function(Ke){return this.output(Ke)},go.prototype.invert=function(Ke){return this.input(Ke)},go.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},go.prototype.compose=function(Ke){function dt(Zi,io){var Mo;Cn.push((io=io===void 0?!0:io)?(Mo=Zi,function(gs){for(var ya=[],ia=0;ia<gs.length-1;ia+=2){var ps=[gs[ia],gs[ia+1]],ps=Mo(ps);ya.push.apply(ya,E([],G(ps),!1))}return ya}):Zi)}var Wt,dn,Fn=(Ke=Ke===void 0?!1:Ke)?E([],G(this.options.transformations),!1).reverse():this.options.transformations,Bn=Ke?function(Zi){return Zi.untransform}:function(Zi){return Zi.transform},_n=[],Cn=[];try{for(var pr=q(Fn),hr=pr.next();!hr.done;hr=pr.next()){var ni,Wi,Qi,ri,Gi,zi,qr=G(hr.value),To=qr[0],di=qr.slice(1),So=this.transformers[To];So&&(Wi=(ni=this.options).x,Qi=ni.y,ri=ni.width,Gi=ni.height,gt(zi=So(E([],G(di),!1),Wi,Qi,ri,Gi))?_n.push(zi):(_n.length&&(dt(this.createMatrixTransform(_n,Ke)),_n.splice(0,_n.length)),dt(Bn(zi)||Oe,To!=="parallel")))}}catch(Zi){Wt={error:Zi}}finally{try{hr&&!hr.done&&(dn=pr.return)&&dn.call(pr)}finally{if(Wt)throw Wt.error}}return _n.length&&dt(this.createMatrixTransform(_n,Ke)),wt.apply(void 0,E([],G(Cn),!1))},go.prototype.createMatrixTransform=function(Ke,dt){var Wt,dn,Fn,Bn,_n,Cn,pr,hr,ni,Wi,Qi,ri,Gi=ee();return dt&&Ke.reverse(),Ke.forEach(function(zi){return be(Gi,Gi,zi)}),dt&&(dt=Ke=Gi,(ri=new le(9))[0]=dt[0],ri[1]=dt[1],ri[2]=dt[2],ri[3]=dt[3],ri[4]=dt[4],ri[5]=dt[5],ri[6]=dt[6],ri[7]=dt[7],ri[8]=dt[8],ri=(dt=ri)[0],Wt=dt[1],dn=dt[2],Fn=dt[3],Bn=dt[4],_n=dt[5],Cn=dt[6],pr=dt[7],hr=(dt=dt[8])*Bn-_n*pr,Qi=ri*hr+Wt*(ni=-dt*Fn+_n*Cn)+dn*(Wi=pr*Fn-Bn*Cn))&&(Ke[0]=hr*(Qi=1/Qi),Ke[1]=(-dt*Wt+dn*pr)*Qi,Ke[2]=(_n*Wt-dn*Bn)*Qi,Ke[3]=ni*Qi,Ke[4]=(dt*ri-dn*Cn)*Qi,Ke[5]=(-_n*ri+dn*Fn)*Qi,Ke[6]=Wi*Qi,Ke[7]=(-pr*ri+Wt*Cn)*Qi,Ke[8]=(Bn*ri-Wt*Fn)*Qi),function(io){var qr,To,di,So,Zi,io=[io[0],io[1],1];return di=Gi,So=(To=qr=io)[0],Zi=To[1],To=To[2],qr[0]=So*di[0]+Zi*di[3]+To*di[6],qr[1]=So*di[1]+Zi*di[4]+To*di[7],qr[2]=So*di[2]+Zi*di[5]+To*di[8],[io[0],io[1]]}},Fe=go;function go(Ke){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:Er,translate:Pe,custom:qn,matrix:Me,polar:Te,transpose:ke,scale:Qn,"shear.x":Zr,"shear.y":yr,reflect:at,"reflect.x":At,"reflect.y":nn,rotate:cn,helix:Et,parallel:Qt,fisheye:pi,"fisheye.x":wr,"fisheye.y":Ai,"fisheye.circular":_i},this.update(Ke)}jo.prototype.update=function(Ke){this.options=me({},this.options,Ke),this.recoordinate()},jo.prototype.clone=function(){return new jo(this.options)},jo.prototype.getOptions=function(){return this.options},jo.prototype.clear=function(){this.update({transformations:[]})},jo.prototype.getSize=function(){var Ke=this.options;return[Ke.width,Ke.height,Ke.depth]},jo.prototype.getCenter=function(){var Ke=this.options,dt=Ke.x,Wt=Ke.y,dn=Ke.z;return[(2*dt+Ke.width)/2,(2*Wt+Ke.height)/2,(2*dn+Ke.depth)/2]},jo.prototype.transform=function(){for(var Ke=[],dt=0;dt<arguments.length;dt++)Ke[dt]=arguments[dt];var Wt=this.options.transformations;return this.update({transformations:E(E([],G(Wt),!1),[E([],G(Ke),!1)],!1)}),this},jo.prototype.map=function(Ke){return this.output(Ke)},jo.prototype.invert=function(Ke){return this.input(Ke)},jo.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},jo.prototype.compose=function(Ke){function dt(Mo,gs){var ya;Cn.push((gs=gs===void 0?!0:gs)?(ya=Mo,function(ia){for(var ps=[],os=0;os<ia.length-1;os+=3){var Ct=[ia[os],ia[os+1],ia[os+2]],Ct=ya(Ct);ps.push.apply(ps,E([],G(Ct),!1))}return ps}):Mo)}var Wt,dn,Fn=(Ke=Ke===void 0?!1:Ke)?E([],G(this.options.transformations),!1).reverse():this.options.transformations,Bn=Ke?function(Mo){return Mo.untransform}:function(Mo){return Mo.transform},_n=[],Cn=[];try{for(var pr=q(Fn),hr=pr.next();!hr.done;hr=pr.next()){var ni,Wi,Qi,ri,Gi,zi,qr,To,di=G(hr.value),So=di[0],Zi=di.slice(1),io=this.transformers[So];io&&(Wi=(ni=this.options).x,Qi=ni.y,ri=ni.z,Gi=ni.width,zi=ni.height,qr=ni.depth,gt(To=io(E([],G(Zi),!1),Wi,Qi,ri,Gi,zi,qr))?_n.push(To):(_n.length&&(dt(this.createMatrixTransform(_n,Ke)),_n.splice(0,_n.length)),dt(Bn(To)||Oe,!0)))}}catch(Mo){Wt={error:Mo}}finally{try{hr&&!hr.done&&(dn=pr.return)&&dn.call(pr)}finally{if(Wt)throw Wt.error}}return _n.length&&dt(this.createMatrixTransform(_n,Ke)),wt.apply(void 0,E([],G(Cn),!1))},jo.prototype.createMatrixTransform=function(Ke,dt){var Wt,dn,Fn,Bn,_n,Cn,pr,hr,ni,Wi,Qi,ri,Gi,zi,qr,To,di,So,Zi,io,Mo,gs,ya,ia,ps,os,Ct,Gt,Un=et();return dt&&Ke.reverse(),Ke.forEach(function(Fr){return tt(Un,Un,Fr)}),dt&&(dt=Ke=Un,(Gt=new le(16))[0]=dt[0],Gt[1]=dt[1],Gt[2]=dt[2],Gt[3]=dt[3],Gt[4]=dt[4],Gt[5]=dt[5],Gt[6]=dt[6],Gt[7]=dt[7],Gt[8]=dt[8],Gt[9]=dt[9],Gt[10]=dt[10],Gt[11]=dt[11],Gt[12]=dt[12],Gt[13]=dt[13],Gt[14]=dt[14],Gt[15]=dt[15],Gt=(dt=Gt)[0],Wt=dt[1],dn=dt[2],Fn=dt[3],Bn=dt[4],_n=dt[5],Cn=dt[6],pr=dt[7],hr=dt[8],ni=dt[9],Wi=dt[10],Qi=dt[11],ri=dt[12],Gi=dt[13],zi=dt[14],dt=dt[15],Ct=(qr=Gt*_n-Wt*Bn)*(os=Wi*dt-Qi*zi)-(To=Gt*Cn-dn*Bn)*(ps=ni*dt-Qi*Gi)+(di=Gt*pr-Fn*Bn)*(ia=ni*zi-Wi*Gi)+(So=Wt*Cn-dn*_n)*(ya=hr*dt-Qi*ri)-(Zi=Wt*pr-Fn*_n)*(gs=hr*zi-Wi*ri)+(io=dn*pr-Fn*Cn)*(Mo=hr*Gi-ni*ri))&&(Ke[0]=(_n*os-Cn*ps+pr*ia)*(Ct=1/Ct),Ke[1]=(dn*ps-Wt*os-Fn*ia)*Ct,Ke[2]=(Gi*io-zi*Zi+dt*So)*Ct,Ke[3]=(Wi*Zi-ni*io-Qi*So)*Ct,Ke[4]=(Cn*ya-Bn*os-pr*gs)*Ct,Ke[5]=(Gt*os-dn*ya+Fn*gs)*Ct,Ke[6]=(zi*di-ri*io-dt*To)*Ct,Ke[7]=(hr*io-Wi*di+Qi*To)*Ct,Ke[8]=(Bn*ps-_n*ya+pr*Mo)*Ct,Ke[9]=(Wt*ya-Gt*ps-Fn*Mo)*Ct,Ke[10]=(ri*Zi-Gi*di+dt*qr)*Ct,Ke[11]=(ni*di-hr*Zi-Qi*qr)*Ct,Ke[12]=(_n*gs-Bn*ia-Cn*Mo)*Ct,Ke[13]=(Gt*ia-Wt*gs+dn*Mo)*Ct,Ke[14]=(Gi*To-ri*So-zi*qr)*Ct,Ke[15]=(hr*So-ni*To+Wi*qr)*Ct),function(al){var Oi,Yi,ea,Ns,As,Is,al=[al[0],al[1],al[2],1];return ea=Un,Ns=(Yi=Oi=al)[0],As=Yi[1],Is=Yi[2],Yi=Yi[3],Oi[0]=ea[0]*Ns+ea[4]*As+ea[8]*Is+ea[12]*Yi,Oi[1]=ea[1]*Ns+ea[5]*As+ea[9]*Is+ea[13]*Yi,Oi[2]=ea[2]*Ns+ea[6]*As+ea[10]*Is+ea[14]*Yi,Oi[3]=ea[3]*Ns+ea[7]*As+ea[11]*Is+ea[15]*Yi,[al[0],al[1],al[2]]}},It=jo;function jo(Ke){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:Bo,translate3D:Si,scale3D:ho,transpose3D:Ci},this.update(Ke)}D.Coordinate=Fe,D.Coordinate3D=It,Object.defineProperty(D,"__esModule",{value:!0})})},90857:function(_t){"use strict";var W=Object.prototype.hasOwnProperty,D="~";function q(){}Object.create&&(q.prototype=Object.create(null),new q().__proto__||(D=!1));function G(se,ce,ye){this.fn=se,this.context=ce,this.once=ye||!1}function E(se,ce,ye,ae,He){if(typeof ye!="function")throw new TypeError("The listener must be a function");var J=new G(ye,ae||se,He),me=D?D+ce:ce;return se._events[me]?se._events[me].fn?se._events[me]=[se._events[me],J]:se._events[me].push(J):(se._events[me]=J,se._eventsCount++),se}function fe(se,ce){--se._eventsCount===0?se._events=new q:delete se._events[ce]}function $(){this._events=new q,this._eventsCount=0}$.prototype.eventNames=function(){var ce=[],ye,ae;if(this._eventsCount===0)return ce;for(ae in ye=this._events)W.call(ye,ae)&&ce.push(D?ae.slice(1):ae);return Object.getOwnPropertySymbols?ce.concat(Object.getOwnPropertySymbols(ye)):ce},$.prototype.listeners=function(ce){var ye=D?D+ce:ce,ae=this._events[ye];if(!ae)return[];if(ae.fn)return[ae.fn];for(var He=0,J=ae.length,me=new Array(J);He<J;He++)me[He]=ae[He].fn;return me},$.prototype.listenerCount=function(ce){var ye=D?D+ce:ce,ae=this._events[ye];return ae?ae.fn?1:ae.length:0},$.prototype.emit=function(ce,ye,ae,He,J,me){var Oe=D?D+ce:ce;if(!this._events[Oe])return!1;var Q=this._events[Oe],le=arguments.length,ee,be;if(Q.fn){switch(Q.once&&this.removeListener(ce,Q.fn,void 0,!0),le){case 1:return Q.fn.call(Q.context),!0;case 2:return Q.fn.call(Q.context,ye),!0;case 3:return Q.fn.call(Q.context,ye,ae),!0;case 4:return Q.fn.call(Q.context,ye,ae,He),!0;case 5:return Q.fn.call(Q.context,ye,ae,He,J),!0;case 6:return Q.fn.call(Q.context,ye,ae,He,J,me),!0}for(be=1,ee=new Array(le-1);be<le;be++)ee[be-1]=arguments[be];Q.fn.apply(Q.context,ee)}else{var et=Q.length,tt;for(be=0;be<et;be++)switch(Q[be].once&&this.removeListener(ce,Q[be].fn,void 0,!0),le){case 1:Q[be].fn.call(Q[be].context);break;case 2:Q[be].fn.call(Q[be].context,ye);break;case 3:Q[be].fn.call(Q[be].context,ye,ae);break;case 4:Q[be].fn.call(Q[be].context,ye,ae,He);break;default:if(!ee)for(tt=1,ee=new Array(le-1);tt<le;tt++)ee[tt-1]=arguments[tt];Q[be].fn.apply(Q[be].context,ee)}}return!0},$.prototype.on=function(ce,ye,ae){return E(this,ce,ye,ae,!1)},$.prototype.once=function(ce,ye,ae){return E(this,ce,ye,ae,!0)},$.prototype.removeListener=function(ce,ye,ae,He){var J=D?D+ce:ce;if(!this._events[J])return this;if(!ye)return fe(this,J),this;var me=this._events[J];if(me.fn)me.fn===ye&&(!He||me.once)&&(!ae||me.context===ae)&&fe(this,J);else{for(var Oe=0,Q=[],le=me.length;Oe<le;Oe++)(me[Oe].fn!==ye||He&&!me[Oe].once||ae&&me[Oe].context!==ae)&&Q.push(me[Oe]);Q.length?this._events[J]=Q.length===1?Q[0]:Q:fe(this,J)}return this},$.prototype.removeAllListeners=function(ce){var ye;return ce?(ye=D?D+ce:ce,this._events[ye]&&fe(this,ye)):(this._events=new q,this._eventsCount=0),this},$.prototype.off=$.prototype.removeListener,$.prototype.addListener=$.prototype.on,$.prefixed=D,$.EventEmitter=$,_t.exports=$},38554:function(_t){"use strict";var W=Object.prototype.hasOwnProperty,D="~";function q(){}Object.create&&(q.prototype=Object.create(null),new q().__proto__||(D=!1));function G(se,ce,ye){this.fn=se,this.context=ce,this.once=ye||!1}function E(se,ce,ye,ae,He){if(typeof ye!="function")throw new TypeError("The listener must be a function");var J=new G(ye,ae||se,He),me=D?D+ce:ce;return se._events[me]?se._events[me].fn?se._events[me]=[se._events[me],J]:se._events[me].push(J):(se._events[me]=J,se._eventsCount++),se}function fe(se,ce){--se._eventsCount===0?se._events=new q:delete se._events[ce]}function $(){this._events=new q,this._eventsCount=0}$.prototype.eventNames=function(){var ce=[],ye,ae;if(this._eventsCount===0)return ce;for(ae in ye=this._events)W.call(ye,ae)&&ce.push(D?ae.slice(1):ae);return Object.getOwnPropertySymbols?ce.concat(Object.getOwnPropertySymbols(ye)):ce},$.prototype.listeners=function(ce){var ye=D?D+ce:ce,ae=this._events[ye];if(!ae)return[];if(ae.fn)return[ae.fn];for(var He=0,J=ae.length,me=new Array(J);He<J;He++)me[He]=ae[He].fn;return me},$.prototype.listenerCount=function(ce){var ye=D?D+ce:ce,ae=this._events[ye];return ae?ae.fn?1:ae.length:0},$.prototype.emit=function(ce,ye,ae,He,J,me){var Oe=D?D+ce:ce;if(!this._events[Oe])return!1;var Q=this._events[Oe],le=arguments.length,ee,be;if(Q.fn){switch(Q.once&&this.removeListener(ce,Q.fn,void 0,!0),le){case 1:return Q.fn.call(Q.context),!0;case 2:return Q.fn.call(Q.context,ye),!0;case 3:return Q.fn.call(Q.context,ye,ae),!0;case 4:return Q.fn.call(Q.context,ye,ae,He),!0;case 5:return Q.fn.call(Q.context,ye,ae,He,J),!0;case 6:return Q.fn.call(Q.context,ye,ae,He,J,me),!0}for(be=1,ee=new Array(le-1);be<le;be++)ee[be-1]=arguments[be];Q.fn.apply(Q.context,ee)}else{var et=Q.length,tt;for(be=0;be<et;be++)switch(Q[be].once&&this.removeListener(ce,Q[be].fn,void 0,!0),le){case 1:Q[be].fn.call(Q[be].context);break;case 2:Q[be].fn.call(Q[be].context,ye);break;case 3:Q[be].fn.call(Q[be].context,ye,ae);break;case 4:Q[be].fn.call(Q[be].context,ye,ae,He);break;default:if(!ee)for(tt=1,ee=new Array(le-1);tt<le;tt++)ee[tt-1]=arguments[tt];Q[be].fn.apply(Q[be].context,ee)}}return!0},$.prototype.on=function(ce,ye,ae){return E(this,ce,ye,ae,!1)},$.prototype.once=function(ce,ye,ae){return E(this,ce,ye,ae,!0)},$.prototype.removeListener=function(ce,ye,ae,He){var J=D?D+ce:ce;if(!this._events[J])return this;if(!ye)return fe(this,J),this;var me=this._events[J];if(me.fn)me.fn===ye&&(!He||me.once)&&(!ae||me.context===ae)&&fe(this,J);else{for(var Oe=0,Q=[],le=me.length;Oe<le;Oe++)(me[Oe].fn!==ye||He&&!me[Oe].once||ae&&me[Oe].context!==ae)&&Q.push(me[Oe]);Q.length?this._events[J]=Q.length===1?Q[0]:Q:fe(this,J)}return this},$.prototype.removeAllListeners=function(ce){var ye;return ce?(ye=D?D+ce:ce,this._events[ye]&&fe(this,ye)):(this._events=new q,this._eventsCount=0),this},$.prototype.off=$.prototype.removeListener,$.prototype.addListener=$.prototype.on,$.prefixed=D,$.EventEmitter=$,_t.exports=$},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(_t){try{let ae=function(){$||($=!0,E())},He=function(){try{fe.documentElement.doScroll("left")}catch(J){return void setTimeout(He,50)}ae()};var ce=ae,ye=He,D=(D=document.getElementsByTagName("script"))[D.length-1],W=D.getAttribute("data-injectcss"),D=D.getAttribute("data-disable-injectsvg");if(!D){var q,G,E,fe,$,se=function(J,me){me.parentNode.insertBefore(J,me)};if(W&&!_t.__iconfont__svg__cssinject__){_t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(J){console&&console.log(J)}}q=function(){var J,me=document.createElement("div");me.innerHTML=_t._iconfont_svg_string_3580659,(me=me.getElementsByTagName("svg")[0])&&(me.setAttribute("aria-hidden","true"),me.style.position="absolute",me.style.width=0,me.style.height=0,me.style.overflow="hidden",me=me,(J=document.body).firstChild?se(me,J.firstChild):J.appendChild(me))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(q,0):(G=function(){document.removeEventListener("DOMContentLoaded",G,!1),q()},document.addEventListener("DOMContentLoaded",G,!1)):document.attachEvent&&(E=q,fe=_t.document,$=!1,He(),fe.onreadystatechange=function(){fe.readyState=="complete"&&(fe.onreadystatechange=null,ae())})}}catch(ae){}}(window)},88120:function(_t,W,D){"use strict";D.d(W,{GC:function(){return U},h0:function(){return an},lv:function(){return lr},lo:function(){return Lt},kw:function(){return en},Or:function(){return hn},KD:function(){return je},I9:function(){return he},lE:function(){return zt},d:function(){return or},n3:function(){return we},vY:function(){return rt},P7:function(){return Cc},yn:function(){return Pt},ee:function(){return Ut},v2:function(){return Cn},e7:function(){return Mu},Hp:function(){return Wc},gl:function(){return $},cO:function(){return _h},Vb:function(){return le}});var q=D(1413),G=D(4942),E=D(66366);let fe=function(oe){return oe.Normal="normal",oe.PostProcessing="post-processing",oe}({}),$=function(oe){return oe[oe.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",oe[oe.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",oe[oe.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",oe[oe.POINTS=0]="POINTS",oe[oe.LINES=1]="LINES",oe[oe.LINE_LOOP=2]="LINE_LOOP",oe[oe.LINE_STRIP=3]="LINE_STRIP",oe[oe.TRIANGLES=4]="TRIANGLES",oe[oe.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",oe[oe.TRIANGLE_FAN=6]="TRIANGLE_FAN",oe[oe.ZERO=0]="ZERO",oe[oe.ONE=1]="ONE",oe[oe.SRC_COLOR=768]="SRC_COLOR",oe[oe.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",oe[oe.SRC_ALPHA=770]="SRC_ALPHA",oe[oe.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",oe[oe.DST_ALPHA=772]="DST_ALPHA",oe[oe.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",oe[oe.DST_COLOR=774]="DST_COLOR",oe[oe.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",oe[oe.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",oe[oe.FUNC_ADD=32774]="FUNC_ADD",oe[oe.BLEND_EQUATION=32777]="BLEND_EQUATION",oe[oe.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",oe[oe.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",oe[oe.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",oe[oe.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",oe[oe.MAX_EXT=32776]="MAX_EXT",oe[oe.MIN_EXT=32775]="MIN_EXT",oe[oe.BLEND_DST_RGB=32968]="BLEND_DST_RGB",oe[oe.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",oe[oe.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",oe[oe.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",oe[oe.CONSTANT_COLOR=32769]="CONSTANT_COLOR",oe[oe.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",oe[oe.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",oe[oe.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",oe[oe.BLEND_COLOR=32773]="BLEND_COLOR",oe[oe.ARRAY_BUFFER=34962]="ARRAY_BUFFER",oe[oe.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",oe[oe.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",oe[oe.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",oe[oe.STREAM_DRAW=35040]="STREAM_DRAW",oe[oe.STATIC_DRAW=35044]="STATIC_DRAW",oe[oe.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",oe[oe.BUFFER_SIZE=34660]="BUFFER_SIZE",oe[oe.BUFFER_USAGE=34661]="BUFFER_USAGE",oe[oe.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",oe[oe.FRONT=1028]="FRONT",oe[oe.BACK=1029]="BACK",oe[oe.FRONT_AND_BACK=1032]="FRONT_AND_BACK",oe[oe.CULL_FACE=2884]="CULL_FACE",oe[oe.BLEND=3042]="BLEND",oe[oe.DITHER=3024]="DITHER",oe[oe.STENCIL_TEST=2960]="STENCIL_TEST",oe[oe.DEPTH_TEST=2929]="DEPTH_TEST",oe[oe.SCISSOR_TEST=3089]="SCISSOR_TEST",oe[oe.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",oe[oe.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",oe[oe.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",oe[oe.NO_ERROR=0]="NO_ERROR",oe[oe.INVALID_ENUM=1280]="INVALID_ENUM",oe[oe.INVALID_VALUE=1281]="INVALID_VALUE",oe[oe.INVALID_OPERATION=1282]="INVALID_OPERATION",oe[oe.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",oe[oe.CW=2304]="CW",oe[oe.CCW=2305]="CCW",oe[oe.LINE_WIDTH=2849]="LINE_WIDTH",oe[oe.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",oe[oe.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",oe[oe.CULL_FACE_MODE=2885]="CULL_FACE_MODE",oe[oe.FRONT_FACE=2886]="FRONT_FACE",oe[oe.DEPTH_RANGE=2928]="DEPTH_RANGE",oe[oe.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",oe[oe.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",oe[oe.DEPTH_FUNC=2932]="DEPTH_FUNC",oe[oe.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",oe[oe.STENCIL_FUNC=2962]="STENCIL_FUNC",oe[oe.STENCIL_FAIL=2964]="STENCIL_FAIL",oe[oe.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",oe[oe.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",oe[oe.STENCIL_REF=2967]="STENCIL_REF",oe[oe.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",oe[oe.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",oe[oe.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",oe[oe.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",oe[oe.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",oe[oe.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",oe[oe.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",oe[oe.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",oe[oe.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",oe[oe.VIEWPORT=2978]="VIEWPORT",oe[oe.SCISSOR_BOX=3088]="SCISSOR_BOX",oe[oe.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",oe[oe.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",oe[oe.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",oe[oe.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",oe[oe.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",oe[oe.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",oe[oe.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",oe[oe.RED_BITS=3410]="RED_BITS",oe[oe.GREEN_BITS=3411]="GREEN_BITS",oe[oe.BLUE_BITS=3412]="BLUE_BITS",oe[oe.ALPHA_BITS=3413]="ALPHA_BITS",oe[oe.DEPTH_BITS=3414]="DEPTH_BITS",oe[oe.STENCIL_BITS=3415]="STENCIL_BITS",oe[oe.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",oe[oe.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",oe[oe.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",oe[oe.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",oe[oe.SAMPLES=32937]="SAMPLES",oe[oe.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",oe[oe.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",oe[oe.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",oe[oe.DONT_CARE=4352]="DONT_CARE",oe[oe.FASTEST=4353]="FASTEST",oe[oe.NICEST=4354]="NICEST",oe[oe.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",oe[oe.BYTE=5120]="BYTE",oe[oe.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",oe[oe.SHORT=5122]="SHORT",oe[oe.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",oe[oe.INT=5124]="INT",oe[oe.UNSIGNED_INT=5125]="UNSIGNED_INT",oe[oe.FLOAT=5126]="FLOAT",oe[oe.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",oe[oe.ALPHA=6406]="ALPHA",oe[oe.RGB=6407]="RGB",oe[oe.RGBA=6408]="RGBA",oe[oe.LUMINANCE=6409]="LUMINANCE",oe[oe.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",oe[oe.RED=6403]="RED",oe[oe.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",oe[oe.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",oe[oe.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",oe[oe.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",oe[oe.VERTEX_SHADER=35633]="VERTEX_SHADER",oe[oe.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",oe[oe.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",oe[oe.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",oe[oe.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",oe[oe.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",oe[oe.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",oe[oe.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",oe[oe.SHADER_TYPE=35663]="SHADER_TYPE",oe[oe.DELETE_STATUS=35712]="DELETE_STATUS",oe[oe.LINK_STATUS=35714]="LINK_STATUS",oe[oe.VALIDATE_STATUS=35715]="VALIDATE_STATUS",oe[oe.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",oe[oe.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",oe[oe.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",oe[oe.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",oe[oe.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",oe[oe.NEVER=512]="NEVER",oe[oe.LESS=513]="LESS",oe[oe.EQUAL=514]="EQUAL",oe[oe.LEQUAL=515]="LEQUAL",oe[oe.GREATER=516]="GREATER",oe[oe.NOTEQUAL=517]="NOTEQUAL",oe[oe.GEQUAL=518]="GEQUAL",oe[oe.ALWAYS=519]="ALWAYS",oe[oe.KEEP=7680]="KEEP",oe[oe.REPLACE=7681]="REPLACE",oe[oe.INCR=7682]="INCR",oe[oe.DECR=7683]="DECR",oe[oe.INVERT=5386]="INVERT",oe[oe.INCR_WRAP=34055]="INCR_WRAP",oe[oe.DECR_WRAP=34056]="DECR_WRAP",oe[oe.VENDOR=7936]="VENDOR",oe[oe.RENDERER=7937]="RENDERER",oe[oe.VERSION=7938]="VERSION",oe[oe.NEAREST=9728]="NEAREST",oe[oe.LINEAR=9729]="LINEAR",oe[oe.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",oe[oe.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",oe[oe.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",oe[oe.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",oe[oe.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",oe[oe.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",oe[oe.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",oe[oe.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",oe[oe.TEXTURE_2D=3553]="TEXTURE_2D",oe[oe.TEXTURE=5890]="TEXTURE",oe[oe.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",oe[oe.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",oe[oe.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",oe[oe.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",oe[oe.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",oe[oe.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",oe[oe.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",oe[oe.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",oe[oe.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",oe[oe.TEXTURE0=33984]="TEXTURE0",oe[oe.TEXTURE1=33985]="TEXTURE1",oe[oe.TEXTURE2=33986]="TEXTURE2",oe[oe.TEXTURE3=33987]="TEXTURE3",oe[oe.TEXTURE4=33988]="TEXTURE4",oe[oe.TEXTURE5=33989]="TEXTURE5",oe[oe.TEXTURE6=33990]="TEXTURE6",oe[oe.TEXTURE7=33991]="TEXTURE7",oe[oe.TEXTURE8=33992]="TEXTURE8",oe[oe.TEXTURE9=33993]="TEXTURE9",oe[oe.TEXTURE10=33994]="TEXTURE10",oe[oe.TEXTURE11=33995]="TEXTURE11",oe[oe.TEXTURE12=33996]="TEXTURE12",oe[oe.TEXTURE13=33997]="TEXTURE13",oe[oe.TEXTURE14=33998]="TEXTURE14",oe[oe.TEXTURE15=33999]="TEXTURE15",oe[oe.TEXTURE16=34e3]="TEXTURE16",oe[oe.TEXTURE17=34001]="TEXTURE17",oe[oe.TEXTURE18=34002]="TEXTURE18",oe[oe.TEXTURE19=34003]="TEXTURE19",oe[oe.TEXTURE20=34004]="TEXTURE20",oe[oe.TEXTURE21=34005]="TEXTURE21",oe[oe.TEXTURE22=34006]="TEXTURE22",oe[oe.TEXTURE23=34007]="TEXTURE23",oe[oe.TEXTURE24=34008]="TEXTURE24",oe[oe.TEXTURE25=34009]="TEXTURE25",oe[oe.TEXTURE26=34010]="TEXTURE26",oe[oe.TEXTURE27=34011]="TEXTURE27",oe[oe.TEXTURE28=34012]="TEXTURE28",oe[oe.TEXTURE29=34013]="TEXTURE29",oe[oe.TEXTURE30=34014]="TEXTURE30",oe[oe.TEXTURE31=34015]="TEXTURE31",oe[oe.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",oe[oe.REPEAT=10497]="REPEAT",oe[oe.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",oe[oe.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",oe[oe.FLOAT_VEC2=35664]="FLOAT_VEC2",oe[oe.FLOAT_VEC3=35665]="FLOAT_VEC3",oe[oe.FLOAT_VEC4=35666]="FLOAT_VEC4",oe[oe.INT_VEC2=35667]="INT_VEC2",oe[oe.INT_VEC3=35668]="INT_VEC3",oe[oe.INT_VEC4=35669]="INT_VEC4",oe[oe.BOOL=35670]="BOOL",oe[oe.BOOL_VEC2=35671]="BOOL_VEC2",oe[oe.BOOL_VEC3=35672]="BOOL_VEC3",oe[oe.BOOL_VEC4=35673]="BOOL_VEC4",oe[oe.FLOAT_MAT2=35674]="FLOAT_MAT2",oe[oe.FLOAT_MAT3=35675]="FLOAT_MAT3",oe[oe.FLOAT_MAT4=35676]="FLOAT_MAT4",oe[oe.SAMPLER_2D=35678]="SAMPLER_2D",oe[oe.SAMPLER_CUBE=35680]="SAMPLER_CUBE",oe[oe.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",oe[oe.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",oe[oe.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",oe[oe.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",oe[oe.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",oe[oe.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",oe[oe.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",oe[oe.COMPILE_STATUS=35713]="COMPILE_STATUS",oe[oe.LOW_FLOAT=36336]="LOW_FLOAT",oe[oe.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",oe[oe.HIGH_FLOAT=36338]="HIGH_FLOAT",oe[oe.LOW_INT=36339]="LOW_INT",oe[oe.MEDIUM_INT=36340]="MEDIUM_INT",oe[oe.HIGH_INT=36341]="HIGH_INT",oe[oe.FRAMEBUFFER=36160]="FRAMEBUFFER",oe[oe.RENDERBUFFER=36161]="RENDERBUFFER",oe[oe.RGBA4=32854]="RGBA4",oe[oe.RGB5_A1=32855]="RGB5_A1",oe[oe.RGB565=36194]="RGB565",oe[oe.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",oe[oe.STENCIL_INDEX=6401]="STENCIL_INDEX",oe[oe.STENCIL_INDEX8=36168]="STENCIL_INDEX8",oe[oe.DEPTH_STENCIL=34041]="DEPTH_STENCIL",oe[oe.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",oe[oe.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",oe[oe.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",oe[oe.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",oe[oe.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",oe[oe.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",oe[oe.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",oe[oe.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",oe[oe.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",oe[oe.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",oe[oe.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",oe[oe.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",oe[oe.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",oe[oe.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",oe[oe.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",oe[oe.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",oe[oe.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",oe[oe.NONE=0]="NONE",oe[oe.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",oe[oe.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",oe[oe.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",oe[oe.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",oe[oe.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",oe[oe.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",oe[oe.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",oe[oe.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",oe[oe.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",oe[oe.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",oe[oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",oe[oe.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",oe[oe.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",oe[oe.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",oe}({});const se=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{camelCase:ce,isNil:ye,upperFirst:ae}=E.lodashUtil;class He{constructor(){(0,G.Z)(this,"shaderModuleService",void 0),(0,G.Z)(this,"rendererService",void 0),(0,G.Z)(this,"config",void 0),(0,G.Z)(this,"quad",se),(0,G.Z)(this,"enabled",!0),(0,G.Z)(this,"renderToScreen",!1),(0,G.Z)(this,"model",void 0),(0,G.Z)(this,"name",void 0),(0,G.Z)(this,"optionsToUpdate",{})}getName(){return this.name}setName(pe){this.name=pe}getType(){return fe.PostProcessing}init(pe,Je){this.config=Je,this.rendererService=pe.getContainer().rendererService,this.shaderModuleService=pe.getContainer().shaderModuleService;const{createAttribute:sn,createBuffer:fn,createModel:ir}=this.rendererService,{vs:Cr,fs:Xr,uniforms:Bi}=this.setupShaders();this.model=ir({vs:Cr,fs:Xr,attributes:{a_Position:sn({buffer:fn({data:[-4,-4,4,-4,0,4],type:$.FLOAT}),size:2})},uniforms:(0,q.Z)((0,q.Z)({u_Texture:null},Bi),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(pe,Je){const sn=pe.multiPassRenderer.getPostProcessor(),{useFramebuffer:fn,getViewportSize:ir,clear:Cr}=this.rendererService,{width:Xr,height:Bi}=ir();fn(this.renderToScreen?null:sn.getWriteFBO(),()=>{Cr({framebuffer:sn.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const bo=(0,q.Z)({u_BloomFinal:0,u_Texture:sn.getReadFBO(),u_ViewportSize:[Xr,Bi]},this.convertOptionsToUniforms(this.optionsToUpdate));Je&&(bo.u_BloomFinal=1,bo.u_Texture2=Je),this.model.draw({uniforms:bo})})}isEnabled(){return this.enabled}setEnabled(pe){this.enabled=pe}setRenderToScreen(pe){this.renderToScreen=pe}updateOptions(pe){this.optionsToUpdate=(0,q.Z)((0,q.Z)({},this.optionsToUpdate),pe)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(pe){const Je={};return Object.keys(pe).forEach(sn=>{ye(pe[sn])||(Je[`u_${ae(ce(sn))}`]=pe[sn])}),Je}}function J(oe){let pe=0;switch(oe){case"vec2":case"ivec2":pe=2;break;case"vec3":case"ivec3":pe=3;break;case"vec4":case"ivec4":case"mat2":pe=4;break;case"mat3":pe=9;break;case"mat4":pe=16;break;default:}return pe}const me=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Oe(oe,pe=!1){const Je={};return oe=oe.replace(me,(sn,fn,ir)=>{const Cr=ir.split(":"),Xr=Cr[0].trim();let Bi="";switch(Cr.length>1&&(Bi=Cr[1].trim()),fn){case"bool":Bi=Bi==="true";break;case"float":case"int":Bi=Number(Bi);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":Bi?Bi=Bi.replace("[","").replace("]","").split(",").reduce((bo,vo)=>(bo.push(Number(vo.trim())),bo),[]):Bi=new Array(J(fn)).fill(0);break;default:}return Je[Xr]=Bi,`${pe?"uniform ":""}${fn} ${Xr};
`}),{content:oe,uniforms:Je}}function Q(oe){let{content:pe,uniforms:Je}=Oe(oe,!0);return pe=pe.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(sn,fn,ir)=>{ir=ir.trim().replace(/^.*$/gm,Bi=>`uniform ${Bi}`);const{content:Cr,uniforms:Xr}=Oe(ir);return Object.assign(Je,Xr),`${fn}{
${Cr}
};`}),{content:pe,uniforms:Je}}function le(oe){const pe={};return oe.replace(me,(Je,sn,fn)=>{const ir=fn.trim();return pe[ir]?"":(pe[ir]=!0,`uniform ${sn} ${ir};
`)})}const ee=null;function be(oe){return ee.indexOf(oe)}const{clamp:et}=E.lodashUtil,tt=2,wt=4,gt=64,ft=128,Pe=256,Ae=512,Be=8192,Ze=16384,ut=32768,tn=null,De=131072,mt=262144,Re=524288,nt=1048576,qe=2097152,Ge=4194304,Dt=8388608,yt=16777216,Le=null;function Zt(oe,pe){return oe=et(Math.floor(oe),0,255),pe=et(Math.floor(pe),0,255),256*oe+pe}function yn(oe){const{color:pe,radius:Je,tileX:sn,tileY:fn,shape:ir,opacity:Cr,stroke:Xr,strokeWidth:Bi,strokeOpacity:bo}=oe,vo=[],Na=[],Fa=[],Ea=[Zt(pe[0],pe[1]),Zt(pe[2],pe[3])],Aa=[Zt(Xr[0],Xr[1]),Zt(Xr[2],Xr[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(([_a,Ba])=>{vo.push([...Ea,(_a+1)*Dt+(Ba+1)*qe+getShapeIndex(ir)*De+Je,(sn+512)*Re+(fn+512)*gt]),Na.push([...Aa,Bi,bo]),Fa.push([Cr,0,0,0])}),{packedBuffer:vo,packedBuffer2:Na,packedBuffer3:Fa}}function Tn(oe,pe){if(oe===0&&!pe)return 0;if(oe===1&&pe)return 4294967295;const Je=pe?1:0,sn=Math.floor(oe*127);return sn*Le+Je*yt+sn*De+Je*tn+sn*Ae+Je*Pe+sn*tt+Je}const lr={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let or=function(oe){return oe.TOPRIGHT="topright",oe.TOPLEFT="topleft",oe.BOTTOMRIGHT="bottomright",oe.BOTTOMLEFT="bottomleft",oe.TOPCENTER="topcenter",oe.BOTTOMCENTER="bottomcenter",oe.LEFTCENTER="leftcenter",oe.RIGHTCENTER="rightcenter",oe.LEFTTOP="lefttop",oe.RIGHTTOP="righttop",oe.LEFTBOTTOM="leftbottom",oe.RIGHTBOTTOM="rightbottom",oe}({}),Lt=function(oe){return oe[oe.LNGLAT=1]="LNGLAT",oe[oe.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",oe[oe.VECTOR_TILE=3]="VECTOR_TILE",oe[oe.IDENTITY=4]="IDENTITY",oe[oe.P20=5]="P20",oe[oe.P20_OFFSET=6]="P20_OFFSET",oe[oe.METER_OFFSET=7]="METER_OFFSET",oe[oe.P20_2=8]="P20_2",oe}({});const en={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"};var hn={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let Xn=function(oe){return oe.Hover="hover",oe.Click="click",oe.Select="select",oe.Active="active",oe.Drag="drag",oe}({}),an=function(oe){return oe.normal="normal",oe.additive="additive",oe.subtractive="subtractive",oe.min="min",oe.max="max",oe.none="none",oe}({}),Pt=function(oe){return oe.MULTIPLE="MULTIPLE",oe.SINGLE="SINGLE",oe}({}),zt=function(oe){return oe.AND="and",oe.OR="or",oe}({}),je=function(oe){return oe.INIT="init",oe.UPDATE="update",oe}({}),rt=function(oe){return oe.LINEAR="linear",oe.SEQUENTIAL="sequential",oe.POWER="power",oe.LOG="log",oe.IDENTITY="identity",oe.TIME="time",oe.QUANTILE="quantile",oe.QUANTIZE="quantize",oe.THRESHOLD="threshold",oe.CAT="cat",oe.DIVERGING="diverging",oe.CUSTOM="threshold",oe}({}),Ut=function(oe){return oe.CONSTANT="constant",oe.VARIABLE="variable",oe}({}),U=function(oe){return oe[oe.Attribute=0]="Attribute",oe[oe.InstancedAttribute=1]="InstancedAttribute",oe[oe.Uniform=2]="Uniform",oe}({});const he=["mapload","mapchange","mapAfterFrameChange"];var ot=D(49296),de=D.n(ot),qt=D(26729),ln=D.n(qt);const mn=30;function Dn({characterSet:oe,getFontWidth:pe,fontHeight:Je,buffer:sn,maxCanvasWidth:fn,mapping:ir={},xOffset:Cr=0,yOffset:Xr=0}){let Bi=0,bo=Cr;Array.from(oe).forEach((Na,Fa)=>{if(!ir[Na]){const Ea=pe(Na,Fa);bo+mn>fn&&(bo=0,Bi++),ir[Na]={x:bo,y:Xr+Bi*mn,width:mn,height:mn,advance:Ea},bo+=mn}});const vo=Je+sn*2;return{mapping:ir,xOffset:bo,yOffset:Xr+Bi*vo,canvasHeight:pn(Xr+(Bi+1)*vo)}}function Yn(oe,pe,Je){let sn=0,fn=0,ir=0,Cr=[];const Xr={};for(const bo of oe)if(!Xr[bo.id]){const{size:vo}=bo;sn+vo+pe>Je&&(Kn(Xr,Cr,fn),sn=0,fn=ir+fn+pe,ir=0,Cr=[]),Cr.push({icon:bo,xOffset:sn}),sn=sn+vo+pe,ir=Math.max(ir,vo)}Cr.length>0&&Kn(Xr,Cr,fn);const Bi=pn(ir+fn+pe);return{mapping:Xr,canvasHeight:Bi}}function Kn(oe,pe,Je){for(const sn of pe){const{icon:fn,xOffset:ir}=sn;oe[fn.id]=(0,q.Z)((0,q.Z)({},fn),{},{x:ir,y:Je,image:fn.image,width:fn.width,height:fn.height})}}function pn(oe){return Math.pow(2,Math.ceil(Math.log2(oe)))}const vt=rr(),Nt="sans-serif",An="normal",In=24,$n=3,pt=.25,xe=8,Fe=1024,st=1,It=1,Mt=3,wn=null;function rr(){const oe=[];for(let pe=32;pe<128;pe++)oe.push(String.fromCharCode(pe));return oe}function Er(oe,pe,Je,sn){oe.font=`${sn} ${Je}px ${pe}`,oe.fillStyle="black",oe.textBaseline="middle"}function qn(oe,pe){for(let Je=0;Je<oe.length;Je++)pe.data[4*Je+3]=oe[Je]}class Me extends qt.EventEmitter{constructor(...pe){super(...pe),(0,G.Z)(this,"fontAtlas",void 0),(0,G.Z)(this,"iconFontMap",void 0),(0,G.Z)(this,"iconFontGlyphs",{}),(0,G.Z)(this,"fontOptions",void 0),(0,G.Z)(this,"key",void 0),(0,G.Z)(this,"cache",new E.z6(Mt))}get scale(){return It}get canvas(){const pe=this.cache.get(this.key);return pe&&pe.data}get mapping(){const pe=this.cache.get(this.key);return pe&&pe.mapping||{}}getCanvasByKey(pe){const Je=this.cache.get(pe);return Je&&Je.data}getMappingByKey(pe){const Je=this.cache.get(pe);return Je&&Je.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:Nt,fontWeight:An,characterSet:vt,fontSize:In,buffer:$n,sdf:!0,cutoff:pt,radius:xe,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(pe){pe.forEach(Je=>{this.iconFontGlyphs[Je.name]=Je.unicode})}addIconFont(pe,Je){this.iconFontMap.set(pe,Je)}getIconFontKey(pe){return this.iconFontMap.get(pe)||pe}getGlyph(pe){return this.iconFontGlyphs[pe]?String.fromCharCode(parseInt(this.iconFontGlyphs[pe],16)):""}setFontOptions(pe){this.fontOptions=(0,q.Z)((0,q.Z)({},this.fontOptions),pe),this.key=this.getKey();const Je=this.getNewChars(this.key,this.fontOptions.characterSet),sn=this.cache.get(this.key);if(sn&&Je.length===0)return;const fn=this.generateFontAtlas(this.key,Je,sn);this.fontAtlas=fn,this.cache.set(this.key,fn)}addFontFace(pe,Je){const sn=document.createElement("style");sn.type="text/css",sn.innerText=`
        @font-face{
            font-family: '${pe}';
            src: url('${Je}') format('woff2'),
            url('${Je}') format('woff'),
            url('${Je}') format('truetype');
        }`,sn.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${pe}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:pe})})}catch(fn){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(fn)}},document.getElementsByTagName("head")[0].appendChild(sn)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(pe,Je,sn){const{fontFamily:fn,fontWeight:ir,fontSize:Cr,buffer:Xr,sdf:Bi,radius:bo,cutoff:vo,iconfont:Na}=this.fontOptions;let Fa=sn&&sn.data;Fa||(Fa=window.document.createElement("canvas"),Fa.width=Fe);const Ea=Fa.getContext("2d",{willReadFrequently:!0});Er(Ea,fn,Cr,ir);const{mapping:Aa,canvasHeight:_a,xOffset:Ba,yOffset:Ca}=Dn((0,q.Z)({getFontWidth:ba=>Ea.measureText(ba).width,fontHeight:Cr*It,buffer:Xr,characterSet:Je,maxCanvasWidth:Fe},sn&&{mapping:sn.mapping,xOffset:sn.xOffset,yOffset:sn.yOffset})),Xa=Ea.getImageData(0,0,Fa.width,Fa.height);if(Fa.height=_a,Ea.putImageData(Xa,0,0),Er(Ea,fn,Cr,ir),Bi){const ba=new(de())(Cr,Xr,bo,vo,fn,ir),cs=Ea.getImageData(0,0,ba.size,ba.size);for(const Ws of Je){if(Na){const zs=String.fromCharCode(parseInt(Ws.replace("&#x","").replace(";",""),16)),dc=ba.draw(zs);qn(dc,cs)}else qn(ba.draw(Ws),cs);Ea.putImageData(cs,Aa[Ws].x,Aa[Ws].y)}}else for(const ba of Je)Ea.fillText(ba,Aa[ba].x,Aa[ba].y+Cr*st);return{xOffset:Ba,yOffset:Ca,mapping:Aa,data:Fa,width:Fa.width,height:Fa.height}}getKey(){const{fontFamily:pe,fontWeight:Je}=this.fontOptions;return`${pe}_${Je}`}getNewChars(pe,Je){const sn=this.cache.get(pe);if(!sn)return Je;const fn=[],ir=sn.mapping,Cr=new Set(Object.keys(ir));return new Set(Je).forEach(Bi=>{Cr.has(Bi)||fn.push(Bi)}),fn}}var Te=D(15861);const ke=3,at=1024,At=64;class nn extends qt.EventEmitter{constructor(...pe){super(...pe),(0,G.Z)(this,"canvasHeight",128),(0,G.Z)(this,"texture",void 0),(0,G.Z)(this,"canvas",void 0),(0,G.Z)(this,"iconData",void 0),(0,G.Z)(this,"iconMap",void 0),(0,G.Z)(this,"ctx",void 0),(0,G.Z)(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(pe,Je){var sn=this;return(0,Te.Z)(function*(){let fn=new Image;sn.loadingImageCount++,sn.hasImage(pe)?console.warn("Image Id already exists"):sn.iconData.push({id:pe,size:At}),sn.updateIconMap(),fn=yield sn.loadImage(Je);const ir=sn.iconData.find(Cr=>Cr.id===pe);ir&&(ir.image=fn,ir.width=fn.width,ir.height=fn.height),sn.update()})()}addImageMini(pe,Je,sn){const fn=sn.getSceneConfig().canvas;let ir=fn.createImage();if(this.loadingImageCount++,this.hasImage(pe))throw new Error("Image Id already exists");this.iconData.push({id:pe,size:At}),this.updateIconMap(),this.loadImageMini(Je,fn).then(Cr=>{ir=Cr;const Xr=this.iconData.find(Bi=>Bi.id===pe);Xr&&(Xr.image=ir,Xr.width=ir.width,Xr.height=ir.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(pe){return this.iconMap.hasOwnProperty(pe)}removeImage(pe){this.hasImage(pe)&&(this.iconData=this.iconData.filter(Je=>Je.id!==pe),delete this.iconMap[pe],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(pe){return new Promise((Je,sn)=>{if(pe instanceof HTMLImageElement){Je(pe);return}const fn=new Image;fn.crossOrigin="anonymous",fn.onload=()=>{Je(fn)},fn.onerror=()=>{sn(new Error("Could not load image at "+pe))},fn.src=pe instanceof File?URL.createObjectURL(pe):pe})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=at,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(pe=>{const{x:Je,y:sn,image:fn,width:ir=64,height:Cr=64}=this.iconMap[pe],Bi=Math.max(ir,Cr)/At,bo=Cr/Bi,vo=ir/Bi;fn&&this.ctx.drawImage(fn,Je+(At-vo)/2,sn+(At-bo)/2,vo,bo)})}updateIconMap(){const{mapping:pe,canvasHeight:Je}=Yn(this.iconData,ke,at);this.iconMap=pe,this.canvasHeight=Je}loadImageMini(pe,Je){return new Promise((sn,fn)=>{const ir=Je.createImage();ir.crossOrigin="anonymous",ir.onload=()=>{sn(ir)},ir.onerror=()=>{fn(new Error("Could not load image at "+pe))},ir.src=pe})}}var cn=D(85975);class Et{constructor(){(0,G.Z)(this,"viewport",void 0),(0,G.Z)(this,"overridedViewProjectionMatrix",void 0),(0,G.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,G.Z)(this,"jitteredProjectionMatrix",void 0),(0,G.Z)(this,"viewMatrixInverse",void 0),(0,G.Z)(this,"cameraPosition",void 0)}init(){}update(pe){this.viewport=pe,this.viewMatrixInverse=cn.create(),cn.invert(this.viewMatrixInverse,pe.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[pe,Je]=this.viewport.getCenter();return[pe,Je]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(pe,Je){return this.viewport.projectFlat(pe,Je)}setViewProjectionMatrix(pe){this.overridedViewProjectionMatrix=pe}jitterProjectionMatrix(pe,Je){const sn=cn.fromTranslation(cn.create(),[pe,Je,0]);this.jitteredProjectionMatrix=cn.multiply(cn.create(),sn,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=cn.multiply(cn.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}clearJitterProjectionMatrix(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}const Qt={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class Qn{constructor(){(0,G.Z)(this,"container",void 0),(0,G.Z)(this,"controlCorners",void 0),(0,G.Z)(this,"controlContainer",void 0),(0,G.Z)(this,"scene",void 0),(0,G.Z)(this,"mapsService",void 0),(0,G.Z)(this,"controls",[]),(0,G.Z)(this,"unAddControls",[])}init(pe,Je){this.container=pe.container,this.scene=Je,this.mapsService=Je.mapService,this.initControlPos()}addControl(pe,Je){Je.mapService.map?(pe.addTo(this.scene),this.controls.push(pe)):this.unAddControls.push(pe)}getControlByName(pe){return this.controls.find(Je=>Je.controlOption.name===pe)}removeControl(pe){const Je=this.controls.indexOf(pe);return Je>-1&&this.controls.splice(Je,1),pe.remove(),this}addControls(){this.unAddControls.forEach(pe=>{pe.addTo(this.scene),this.controls.push(pe)}),this.unAddControls=[]}destroy(){for(const pe of this.controls)pe.remove();this.controls=[],this.clearControlPos()}initControlPos(){const pe=this.controlCorners={},Je="l7-",sn=this.controlContainer=E.SO.create("div",Je+"control-container",this.container);function fn(Cr=[]){const Xr=Cr.map(Bi=>Je+Bi).join(" ");pe[Cr.filter(Bi=>!["row","column"].includes(Bi)).join("")]=E.SO.create("div",Xr,sn)}function ir(Cr){return[...Cr.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),Qt[Cr]]}Object.values(or).forEach(Cr=>{fn(ir(Cr))}),this.checkCornerOverlap()}clearControlPos(){for(const pe in this.controlCorners)this.controlCorners[pe]&&E.SO.remove(this.controlCorners[pe]);this.controlContainer&&E.SO.remove(this.controlContainer)}checkCornerOverlap(){const pe=window.MutationObserver;if(pe)for(const Je of Object.keys(this.controlCorners)){const sn=Je.match(/^(top|bottom)(left|right)$/);if(sn){const[,fn,ir]=sn,Cr=this.controlCorners[`${fn}${ir}`];new pe(([{target:Bi}])=>{Cr&&(Cr.style[fn]=Bi.clientHeight+"px")}).observe(this.controlCorners[`${ir}${fn}`],{childList:!0,attributes:!0})}}}}class Sr{constructor(){(0,G.Z)(this,"container",void 0),(0,G.Z)(this,"scene",void 0),(0,G.Z)(this,"mapsService",void 0),(0,G.Z)(this,"markers",[]),(0,G.Z)(this,"markerLayers",[]),(0,G.Z)(this,"unAddMarkers",[]),(0,G.Z)(this,"unAddMarkerLayers",[])}addMarkerLayer(pe){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(pe),pe.addTo(this.scene)):this.unAddMarkerLayers.push(pe)}removeMarkerLayer(pe){pe.destroy(),this.markerLayers.indexOf(pe);const Je=this.markerLayers.indexOf(pe);Je>-1&&this.markerLayers.splice(Je,1)}addMarker(pe){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(pe),pe.addTo(this.scene)):this.unAddMarkers.push(pe)}addMarkers(){this.unAddMarkers.forEach(pe=>{pe.addTo(this.scene),this.markers.push(pe)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(pe=>{this.markerLayers.push(pe),pe.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(pe){pe.remove(),this.markers.indexOf(pe);const Je=this.markers.indexOf(pe);Je>-1&&this.markers.splice(Je,1)}removeAllMarkers(){this.destroy()}init(pe){this.scene=pe,this.mapsService=pe.mapService}destroy(){this.markers.forEach(pe=>{pe.remove()}),this.markers=[],this.markerLayers.forEach(pe=>{pe.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(pe){pe.destroy()}}class Zr{constructor(){(0,G.Z)(this,"scene",void 0),(0,G.Z)(this,"mapsService",void 0),(0,G.Z)(this,"popups",[]),(0,G.Z)(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(pe){pe!=null&&pe.isOpen()&&pe.remove();const Je=this.popups.indexOf(pe);Je>-1&&this.popups.splice(Je,1);const sn=this.unAddPopups.indexOf(pe);sn>-1&&this.unAddPopups.splice(sn,1)}destroy(){this.popups.forEach(pe=>pe.remove())}addPopup(pe){pe&&pe.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(Je=>{Je.getOptions().autoClose&&this.removePopup(Je)}),this.isMarkerReady?(pe.addTo(this.scene),this.popups.push(pe)):this.unAddPopups.push(pe),pe.on("close",()=>{this.removePopup(pe)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(pe=>{this.addPopup(pe),this.unAddPopups=[]})}init(pe){this.scene=pe,this.mapsService=pe.mapService}}var Wr={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"};const{merge:Ei}=E.lodashUtil,yi={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},wr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:zt.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class Ai{constructor(){(0,G.Z)(this,"sceneConfigCache",{}),(0,G.Z)(this,"layerConfigCache",{}),(0,G.Z)(this,"layerAttributeConfigCache",{})}getSceneConfig(pe){return this.sceneConfigCache[pe]}getSceneWarninfo(pe){return Wr[pe]}setSceneConfig(pe,Je){this.sceneConfigCache[pe]=(0,q.Z)((0,q.Z)({},yi),Je)}getLayerConfig(pe){return this.layerConfigCache[pe]}setLayerConfig(pe,Je,sn){this.layerConfigCache[Je]=(0,q.Z)({},Ei({},this.sceneConfigCache[pe],wr,sn))}getAttributeConfig(pe){return this.layerAttributeConfigCache[pe]}setAttributeConfig(pe,Je){this.layerAttributeConfigCache[pe]=(0,q.Z)((0,q.Z)({},this.layerAttributeConfigCache[pe]),Je)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}var pi=D(98333);const _i=Math.PI/180,Bo=512,Si=4003e4;function Ci({latitude:oe=0,zoom:pe=0,scale:Je,highPrecision:sn=!1,flipY:fn=!1}){Je=Je!==void 0?Je:Math.pow(2,pe);const ir={},Cr=Bo*Je,Xr=Math.cos(oe*_i),Bi=Cr/360,bo=Bi/Xr,vo=Cr/Si/Xr;if(ir.pixelsPerMeter=[vo,-vo,vo],ir.metersPerPixel=[1/vo,-1/vo,1/vo],ir.pixelsPerDegree=[Bi,-bo,vo],ir.degreesPerPixel=[1/Bi,-1/bo,1/vo],sn){const Na=_i*Math.tan(oe*_i)/Xr,Fa=Bi*Na/2,Ea=Cr/Si*Na,Aa=Ea/bo*vo;ir.pixelsPerDegree2=[0,-Fa,Ea],ir.pixelsPerMeter2=[Aa,0,Aa],fn&&(ir.pixelsPerDegree2[1]=-ir.pixelsPerDegree2[1],ir.pixelsPerMeter2[1]=-ir.pixelsPerMeter2[1])}return fn&&(ir.pixelsPerMeter[1]=-ir.pixelsPerMeter[1],ir.metersPerPixel[1]=-ir.metersPerPixel[1],ir.pixelsPerDegree[1]=-ir.pixelsPerDegree[1],ir.degreesPerPixel[1]=-ir.degreesPerPixel[1]),ir}const ho=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class go{constructor(pe){(0,G.Z)(this,"needRefresh",!0),(0,G.Z)(this,"coordinateSystem",void 0),(0,G.Z)(this,"viewportCenter",void 0),(0,G.Z)(this,"viewportCenterProjection",void 0),(0,G.Z)(this,"pixelsPerDegree",void 0),(0,G.Z)(this,"pixelsPerDegree2",void 0),(0,G.Z)(this,"pixelsPerMeter",void 0),this.cameraService=pe}refresh(pe){const Je=this.cameraService.getZoom(),sn=this.cameraService.getZoomScale(),fn=pe||this.cameraService.getCenter(),{pixelsPerMeter:ir,pixelsPerDegree:Cr}=Ci({latitude:fn[1],zoom:Je});this.viewportCenter=fn,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=ir,this.pixelsPerDegree=Cr,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Lt.LNGLAT||this.coordinateSystem===Lt.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Lt.LNGLAT_OFFSET?this.calculateLnglatOffset(fn,Je):this.coordinateSystem===Lt.P20_OFFSET&&this.calculateLnglatOffset(fn,Je,sn,!0),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(pe){this.coordinateSystem=pe}getViewportCenter(){return this.viewportCenter}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(pe,Je,sn,fn){const{pixelsPerMeter:ir,pixelsPerDegree:Cr,pixelsPerDegree2:Xr}=Ci({latitude:pe[1],zoom:Je,scale:sn,flipY:fn,highPrecision:!0});let Bi=this.cameraService.getViewMatrix();const bo=this.cameraService.getProjectionMatrix();let vo=cn.multiply([],bo,Bi);const Na=this.cameraService.projectFlat([Math.fround(pe[0]),Math.fround(pe[1])],Math.pow(2,Je));this.viewportCenterProjection=pi.fF([],[Na[0],Na[1],0,1],vo),Bi=this.cameraService.getViewMatrixUncentered()||Bi,vo=cn.multiply([],bo,Bi),vo=cn.multiply([],vo,ho),this.cameraService.setViewProjectionMatrix(vo),this.pixelsPerMeter=ir,this.pixelsPerDegree=Cr,this.pixelsPerDegree2=Xr}}class jo extends qt.EventEmitter{constructor(...pe){super(...pe),(0,G.Z)(this,"renderMap",new Map),(0,G.Z)(this,"enable",!1),(0,G.Z)(this,"renderEnable",!1),(0,G.Z)(this,"cacheLogs",{})}setEnable(pe){this.enable=!!pe}log(pe,Je){if(!this.enable)return;const sn=pe.split(".");let fn=null;sn.forEach((ir,Cr)=>{fn!==null?(fn[ir]||(fn[ir]={}),Cr!==sn.length-1&&(fn=fn[ir])):(this.cacheLogs[ir]||(this.cacheLogs[ir]={}),Cr!==sn.length-1&&(fn=this.cacheLogs[ir])),Cr===sn.length-1&&(fn[ir]=(0,q.Z)((0,q.Z)({time:Date.now()},fn[ir]),Je))})}getLog(pe){switch(typeof pe){case"string":return this.cacheLogs[pe];case"object":return pe.map(Je=>this.cacheLogs[Je]).filter(Je=>Je!==void 0);case"undefined":return this.cacheLogs}}removeLog(pe){delete this.cacheLogs[pe]}generateRenderUid(){return this.renderEnable?(0,E.M8)():""}renderDebug(pe){this.renderEnable=pe}renderStart(pe){if(!this.renderEnable||!this.enable)return;const Je=this.renderMap.get(pe)||{};this.renderMap.set(pe,(0,q.Z)((0,q.Z)({},Je),{},{renderUid:pe,renderStart:Date.now()}))}renderEnd(pe){if(!this.renderEnable||!this.enable)return;const Je=this.renderMap.get(pe);if(Je){const sn=Je.renderStart,fn=Date.now();this.emit("renderEnd",(0,q.Z)((0,q.Z)({},Je),{},{renderEnd:fn,renderDuration:fn-sn})),this.renderMap.delete(pe)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var Ke=D(50840),dt=D.n(Ke);const Wt={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class dn extends ln(){get mapService(){return this.container.mapService}constructor(pe){super(),(0,G.Z)(this,"indragging",!1),(0,G.Z)(this,"hammertime",void 0),(0,G.Z)(this,"lastClickTime",0),(0,G.Z)(this,"lastClickXY",[-1,-1]),(0,G.Z)(this,"clickTimer",void 0),(0,G.Z)(this,"$containter",void 0),(0,G.Z)(this,"onDrag",Je=>{const sn=this.interactionEvent(Je);sn.type=Wt[sn.type],sn.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(Xn.Drag,sn)}),(0,G.Z)(this,"onHammer",Je=>{Je.srcEvent.stopPropagation();const sn=this.interactionEvent(Je);this.emit(Xn.Hover,sn)}),(0,G.Z)(this,"onTouch",Je=>{const sn=Je.touches[0];this.onHover({clientX:sn.clientX,clientY:sn.clientY,type:"touchstart"})}),(0,G.Z)(this,"onTouchEnd",Je=>{if(Je.changedTouches.length>0){const sn=Je.changedTouches[0];this.onHover({clientX:sn.clientX,clientY:sn.clientY,type:"touchend"})}}),(0,G.Z)(this,"onTouchMove",Je=>{const sn=Je.changedTouches[0];this.onHover({clientX:sn.clientX,clientY:sn.clientY,type:"touchmove"})}),(0,G.Z)(this,"onHover",Je=>{const{clientX:sn,clientY:fn}=Je;let ir=sn,Cr=fn;const Xr=Je.type,Bi=this.mapService.getMapContainer();if(Bi){const{top:vo,left:Na}=Bi.getBoundingClientRect();ir=ir-Na-Bi.clientLeft,Cr=Cr-vo-Bi.clientTop}const bo=this.mapService.containerToLngLat([ir,Cr]);if(Xr==="click"){this.isDoubleTap(ir,Cr,bo);return}if(Xr==="touch"){this.isDoubleTap(ir,Cr,bo);return}Xr!=="click"&&Xr!=="dblclick"&&this.emit(Xn.Hover,{x:ir,y:Cr,lngLat:bo,type:Xr,target:Je})}),this.container=pe}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Xn.Hover)}triggerHover({x:pe,y:Je}){this.emit(Xn.Hover,{x:pe,y:Je})}triggerSelect(pe){this.emit(Xn.Select,{featureId:pe})}triggerActive(pe){this.emit(Xn.Active,{featureId:pe})}addEventListenerOnMap(){const pe=this.mapService.getMapContainer();if(pe){const Je=new(dt()).Manager(pe);Je.add(new(dt()).Tap({event:"dblclick",taps:2})),Je.add(new(dt()).Tap({event:"click"})),Je.add(new(dt()).Pan({threshold:0,pointers:0})),Je.add(new(dt()).Press({})),Je.on("dblclick click",this.onHammer),Je.on("panstart panmove panend pancancel",this.onDrag),pe.addEventListener("touchstart",this.onTouch),pe.addEventListener("touchend",this.onTouchEnd),pe.addEventListener("mousemove",this.onHover),pe.addEventListener("touchmove",this.onTouchMove),pe.addEventListener("mousedown",this.onHover,!0),pe.addEventListener("mouseup",this.onHover),pe.addEventListener("contextmenu",this.onHover),this.hammertime=Je}}removeEventListenerOnMap(){const pe=this.mapService.getMapContainer();pe&&(pe.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),pe.removeEventListener("touchstart",this.onTouch),pe.removeEventListener("touchend",this.onTouchEnd),pe.removeEventListener("mousedown",this.onHover),pe.removeEventListener("mouseup",this.onHover),pe.removeEventListener("contextmenu",this.onHover))}interactionEvent(pe){const{type:Je,pointerType:sn}=pe;let fn,ir;sn==="touch"?(ir=Math.floor(pe.pointers[0].clientY),fn=Math.floor(pe.pointers[0].clientX)):(ir=Math.floor(pe.srcEvent.y),fn=Math.floor(pe.srcEvent.x));const Cr=this.mapService.getMapContainer();if(Cr){const{top:Bi,left:bo}=Cr.getBoundingClientRect();fn-=bo,ir-=Bi}const Xr=this.mapService.containerToLngLat([fn,ir]);return{x:fn,y:ir,lngLat:Xr,type:Je,target:pe.srcEvent}}isDoubleTap(pe,Je,sn){const fn=new Date().getTime();let ir="click";fn-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-pe)<10&&Math.abs(this.lastClickXY[1]-Je)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),ir="dblclick",this.emit(Xn.Hover,{x:pe,y:Je,lngLat:sn,type:ir})):(this.lastClickTime=fn,this.lastClickXY=[pe,Je],this.clickTimer=setTimeout(()=>{ir="click",this.emit(Xn.Hover,{x:pe,y:Je,lngLat:sn,type:ir})},400))}}let Fn=0;function Bn(oe){let pe=oe;if(typeof oe=="string"&&(pe=document.getElementById(oe)),pe){const Je=document.createElement("div");return Je.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,Je.id=`l7-scene-${Fn++}`,Je.classList.add("l7-scene"),pe.appendChild(Je),Je}return null}function _n(oe){var pe;let Je=!0;if((oe==null||(pe=oe.target)===null||pe===void 0?void 0:pe.target)instanceof HTMLElement){var sn;let ir=oe==null||(sn=oe.target)===null||sn===void 0?void 0:sn.target;for(;ir;){var fn;const Cr=Array.from(ir.classList);if(Cr.includes("l7-marker")||Cr.includes("l7-popup")){Je=!1;break}ir=(fn=ir)===null||fn===void 0?void 0:fn.parentElement}}return Je}let Cn=function(oe){return oe[oe.SAMPLED=0]="SAMPLED",oe[oe.RENDER_TARGET=1]="RENDER_TARGET",oe}({});class pr{constructor(pe){var Je=this;(0,G.Z)(this,"pickedColors",void 0),(0,G.Z)(this,"pickedTileLayers",[]),(0,G.Z)(this,"pickingFBO",void 0),(0,G.Z)(this,"width",0),(0,G.Z)(this,"height",0),(0,G.Z)(this,"alreadyInPicking",!1),(0,G.Z)(this,"pickBufferScale",1),(0,G.Z)(this,"pickFromPickingFBO",function(){var sn=(0,Te.Z)(function*(fn,{x:ir,y:Cr,lngLat:Xr,type:Bi,target:bo}){let vo=!1;const{readPixelsAsync:Na,getViewportSize:Fa}=Je.rendererService,{width:Ea,height:Aa}=Fa(),{enableHighlight:_a,enableSelect:Ba}=fn.getLayerConfig(),Ca=ir*E.SO.DPR,Xa=Cr*E.SO.DPR;if(Ca>Ea-1*E.SO.DPR||Ca<0||Xa>Aa-1*E.SO.DPR||Xa<0)return!1;const ba=yield Na({x:Math.floor(Ca/Je.pickBufferScale),y:Math.floor((Aa-(Cr+1)*E.SO.DPR)/Je.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Je.pickingFBO});if(Je.pickedColors=ba,ba[0]!==0||ba[1]!==0||ba[2]!==0){const cs=(0,E.W0)(ba),Ws=fn.layerPickService.getFeatureById(cs);cs!==fn.getCurrentPickId()&&Bi==="mousemove"&&(Bi="mouseenter");const zs={x:ir,y:Cr,type:Bi,lngLat:Xr,featureId:cs,feature:Ws,target:bo};Ws&&(vo=!0,fn.setCurrentPickId(cs),Je.triggerHoverOnLayer(fn,zs))}else{const cs={x:ir,y:Cr,lngLat:Xr,type:fn.getCurrentPickId()!==null&&Bi==="mousemove"?"mouseout":"un"+Bi,featureId:null,target:bo,feature:null};Je.triggerHoverOnLayer(fn,(0,q.Z)((0,q.Z)({},cs),{},{type:"unpick"})),Je.triggerHoverOnLayer(fn,cs),fn.setCurrentPickId(null)}if(_a&&fn.layerPickService.highlightPickedFeature(ba),Ba&&Bi==="click"&&(ba==null?void 0:ba.toString())!==[0,0,0,0].toString()){const cs=(0,E.W0)(ba);fn.getCurrentSelectedId()===null||cs!==fn.getCurrentSelectedId()?(fn.layerPickService.selectFeature(ba),fn.setCurrentSelectedId(cs)):(fn.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),fn.setCurrentSelectedId(null))}return vo});return function(fn,ir){return sn.apply(this,arguments)}}()),this.container=pe}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(pe){const{createTexture2D:Je,createFramebuffer:sn,getViewportSize:fn}=this.rendererService;let{width:ir,height:Cr}=fn();this.pickBufferScale=this.configService.getSceneConfig(pe).pickBufferScale||1,ir=Math.round(ir/this.pickBufferScale),Cr=Math.round(Cr/this.pickBufferScale);const Xr=Je({width:ir,height:Cr,usage:Cn.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=sn({color:Xr,depth:!0,width:ir,height:Cr}),this.interactionService.on(Xn.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(pe,Je,sn){var fn=this;return(0,Te.Z)(function*(){const{useFramebufferAsync:ir,clear:Cr}=fn.rendererService;fn.resizePickingFBO(),pe.hooks.beforePickingEncode.call(),yield ir(fn.pickingFBO,(0,Te.Z)(function*(){Cr({framebuffer:fn.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),pe.renderModels({ispick:!0})})),pe.hooks.afterPickingEncode.call();const Xr=yield fn.pickBox(pe,Je);sn(Xr)})()}pickBox(pe,Je){var sn=this;return(0,Te.Z)(function*(){const[fn,ir,Cr,Xr]=Je.map(Ca=>{const Xa=Ca<0?0:Ca;return Math.floor(Xa*E.SO.DPR/sn.pickBufferScale)}),{readPixelsAsync:Bi,getViewportSize:bo}=sn.rendererService,{width:vo,height:Na}=bo();if(fn>(vo-1)*E.SO.DPR/sn.pickBufferScale||Cr<0||ir>(Na-1)*E.SO.DPR/sn.pickBufferScale||Xr<0)return[];const Fa=Math.min(vo/sn.pickBufferScale,Cr)-fn,Ea=Math.min(Na/sn.pickBufferScale,Xr)-ir,Aa=yield Bi({x:fn,y:Math.floor(Na/sn.pickBufferScale-(Xr+1)),width:Fa,height:Ea,data:new Uint8Array(Fa*Ea*4),framebuffer:sn.pickingFBO}),_a=[],Ba={};for(let Ca=0;Ca<Aa.length/4;Ca=Ca+1){const Xa=Aa.slice(Ca*4,Ca*4+4),ba=(0,E.W0)(Xa);if(ba!==-1&&!Ba[ba]){const cs=pe.layerPickService.getFeatureById(ba);_a.push((0,q.Z)((0,q.Z)({},cs),{},{pickedFeatureIdx:ba})),Ba[ba]=!0}}return _a})()}handleCursor(pe,Je){const{cursor:sn="",cursorEnabled:fn}=pe.getLayerConfig();if(fn){const Cr=this.mapService.version==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),Xr=Cr==null?void 0:Cr.style.getPropertyValue("cursor");Je==="unmousemove"&&Xr!==""?Cr==null||Cr.style.setProperty("cursor",""):Je==="mousemove"&&(Cr==null||Cr.style.setProperty("cursor",sn))}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(pe){var Je=this;return(0,Te.Z)(function*(){!Je.layerService.needPick(pe.type)||!Je.isPickingAllLayer()||(Je.alreadyInPicking=!0,yield Je.pickingLayers(pe),Je.layerService.renderLayers(),Je.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:pe}=this.rendererService,{width:Je,height:sn}=pe();(this.width!==Je||this.height!==sn)&&(this.pickingFBO.resize({width:Math.round(Je/this.pickBufferScale),height:Math.round(sn/this.pickBufferScale)}),this.width=Je,this.height=sn)}pickingLayers(pe){var Je=this;return(0,Te.Z)(function*(){const{clear:sn,useFramebufferAsync:fn}=Je.rendererService;Je.resizePickingFBO();const ir=Je.layerService.getRenderList();for(const Cr of ir.filter(Xr=>Xr.needPick(pe.type)).reverse()){yield fn(Je.pickingFBO,(0,Te.Z)(function*(){sn({framebuffer:Je.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Cr.layerPickService.pickRender(pe)}));const Xr=yield Je.pickFromPickingFBO(Cr,pe);if(Je.layerService.pickedLayerId=Xr?+Cr.id:-1,Xr&&!Cr.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(pe,Je){_n(Je)&&(this.handleCursor(pe,Je.type),pe.emit(Je.type,Je))}}class hr{constructor(pe=!0){(0,G.Z)(this,"autoStart",void 0),(0,G.Z)(this,"startTime",0),(0,G.Z)(this,"oldTime",0),(0,G.Z)(this,"running",!1),(0,G.Z)(this,"elapsedTime",0),this.autoStart=pe}start(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let pe=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const Je=(typeof performance=="undefined"?Date:performance).now();pe=(Je-this.oldTime)/1e3,this.oldTime=Je,this.elapsedTime+=pe}return pe}}const{throttle:ni}=E.lodashUtil;class Wi extends qt.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(pe){super(),(0,G.Z)(this,"pickedLayerId",-1),(0,G.Z)(this,"clock",new hr),(0,G.Z)(this,"alreadyInRendering",!1),(0,G.Z)(this,"layers",[]),(0,G.Z)(this,"layerList",[]),(0,G.Z)(this,"layerRenderID",void 0),(0,G.Z)(this,"sceneInited",!1),(0,G.Z)(this,"animateInstanceCount",0),(0,G.Z)(this,"shaderPicking",!0),(0,G.Z)(this,"enableRender",!0),(0,G.Z)(this,"reRender",ni(()=>{this.renderLayers()},32)),(0,G.Z)(this,"throttleRenderLayers",ni(()=>{this.renderLayers()},16)),this.container=pe}needPick(pe){return this.updateLayerRenderList(),this.layerList.some(Je=>Je.needPick(pe))}add(pe){this.layers.push(pe),this.sceneInited&&pe.init().then(()=>{this.renderLayers()})}addMask(pe){this.sceneInited&&pe.init().then(()=>{this.renderLayers()})}initLayers(){var pe=this;return(0,Te.Z)(function*(){pe.sceneInited=!0,pe.layers.forEach(function(){var Je=(0,Te.Z)(function*(sn){sn.startInit||(yield sn.init(),pe.updateLayerRenderList())});return function(sn){return Je.apply(this,arguments)}}())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(pe){return this.layers.find(Je=>Je.id===pe)}getLayerByName(pe){return this.layers.find(Je=>Je.name===pe)}remove(pe,Je){var sn=this;return(0,Te.Z)(function*(){Je?Je.layerChildren=Je.layerChildren.filter(fn=>fn!==pe):sn.layers=sn.layers.filter(fn=>fn!==pe),pe.destroy(),sn.reRender(),sn.emit("layerChange",sn.layers)})()}removeAllLayers(){var pe=this;return(0,Te.Z)(function*(){pe.destroy(),pe.reRender()})()}setEnableRender(pe){this.enableRender=pe}renderLayers(){var pe=this;return(0,Te.Z)(function*(){if(pe.alreadyInRendering||!pe.enableRender)return;pe.updateLayerRenderList();const Je=pe.debugService.generateRenderUid();pe.debugService.renderStart(Je),pe.alreadyInRendering=!0,pe.clear();for(const sn of pe.layerList)sn.prerender();pe.renderService.beginFrame();for(const sn of pe.layerList){const{enableMask:fn}=sn.getLayerConfig();sn.masks.filter(ir=>ir.inited).length>0&&fn&&pe.renderMask(sn.masks),sn.getLayerConfig().enableMultiPassRenderer?yield sn.renderMultiPass():sn.render()}pe.renderService.endFrame(),pe.debugService.renderEnd(Je),pe.alreadyInRendering=!1})()}renderMask(pe){let Je=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const sn=pe.length>1?Pt.MULTIPLE:Pt.SINGLE;for(const fn of pe)fn.render({isStencil:!0,stencilType:sn,stencilIndex:Je++})}beforeRenderData(pe){var Je=this;return(0,Te.Z)(function*(){(yield pe.hooks.beforeRenderData.promise())&&Je.renderLayers()})()}renderTileLayerMask(pe){let Je=0;const{enableMask:sn=!0}=pe.getLayerConfig();let fn=pe.tileMask?1:0;const ir=pe.masks.filter(Xr=>Xr.inited);fn=fn+(sn?ir.length:1);const Cr=fn>1?Pt.MULTIPLE:Pt.SINGLE;if((pe.tileMask||ir.length&&sn)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),ir.length&&sn)for(const Xr of ir)Xr.render({isStencil:!0,stencilType:Cr,stencilIndex:Je++});pe.tileMask&&pe.tileMask.render({isStencil:!0,stencilType:Cr,stencilIndex:Je++,stencilOperation:zt.OR})}renderTileLayer(pe){var Je=this;return(0,Te.Z)(function*(){Je.renderTileLayerMask(pe),pe.getLayerConfig().enableMultiPassRenderer?yield pe.renderMultiPass():yield pe.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(pe=>pe.inited).filter(pe=>pe.isVisible()).sort((pe,Je)=>pe.zIndex-Je.zIndex).forEach(pe=>{this.layerList.push(pe)})}destroy(){this.layers.forEach(pe=>{pe.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const pe=(0,E.CI)(this.mapService.bgColor);this.renderService.clear({color:pe,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}var Qi=D(45987);const{isNil:ri}=E.lodashUtil;class Gi{constructor(pe){(0,G.Z)(this,"name",void 0),(0,G.Z)(this,"type",void 0),(0,G.Z)(this,"scale",void 0),(0,G.Z)(this,"descriptor",void 0),(0,G.Z)(this,"featureBufferLayout",[]),(0,G.Z)(this,"needRescale",!1),(0,G.Z)(this,"needRemapping",!1),(0,G.Z)(this,"needRegenerateVertices",!1),(0,G.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,G.Z)(this,"vertexAttribute",void 0),(0,G.Z)(this,"defaultCallback",Je=>{if(Je.length===0){var sn;return((sn=this.scale)===null||sn===void 0?void 0:sn.defaultValues)||[]}return Je.map((fn,ir)=>{var Cr;return((Cr=this.scale)===null||Cr===void 0?void 0:Cr.scalers[ir].func)(fn)})}),this.setProps(pe)}setProps(pe){Object.assign(this,pe)}mapping(pe){var Je;if((Je=this.scale)!==null&&Je!==void 0&&Je.callback){var sn;const fn=(sn=this.scale)===null||sn===void 0?void 0:sn.callback(...pe);if(!ri(fn))return[fn]}return this.defaultCallback(pe)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const zi=["buffer","update","name"],qr=["buffer","update","name"],To={[$.FLOAT]:4,[$.UNSIGNED_BYTE]:1,[$.UNSIGNED_SHORT]:2};class di{constructor(pe){(0,G.Z)(this,"attributesAndIndices",void 0),(0,G.Z)(this,"attributes",[]),(0,G.Z)(this,"triangulation",void 0),(0,G.Z)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=pe}registerStyleAttribute(pe){let Je=this.getLayerStyleAttribute(pe.name||"");return Je?Je.setProps(pe):(Je=new Gi(pe),this.attributes.push(Je)),Je}unRegisterStyleAttribute(pe){const Je=this.attributes.findIndex(sn=>sn.name===pe);Je>-1&&this.attributes.splice(Je,1)}updateScaleAttribute(pe){this.attributes.forEach(Je=>{var sn;const fn=Je.name,ir=(sn=Je.scale)===null||sn===void 0?void 0:sn.field;(pe[fn]||ir&&pe[ir])&&(Je.needRescale=!0,Je.needRemapping=!0,Je.needRegenerateVertices=!0)})}updateStyleAttribute(pe,Je,sn){let fn=this.getLayerStyleAttribute(pe);fn||(fn=this.registerStyleAttribute((0,q.Z)((0,q.Z)({},Je),{},{name:pe})));const{scale:ir}=Je;ir&&fn&&(fn.scale=ir,fn.needRescale=!0,fn.needRemapping=!0,fn.needRegenerateVertices=!0,sn&&sn.featureRange&&(fn.featureRange=sn.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(pe){return this.attributes.find(Je=>Je.name===pe)}getLayerAttributeScale(pe){var Je;const sn=this.getLayerStyleAttribute(pe),fn=sn==null||(Je=sn.scale)===null||Je===void 0?void 0:Je.scalers;return fn&&fn[0]?fn[0].func:null}updateAttributeByFeatureRange(pe,Je,sn=0,fn,ir){const Cr=this.attributes.find(Xr=>Xr.name===pe);if(Cr&&Cr.descriptor){const{descriptor:Xr}=Cr,{update:Bi,buffer:bo,size:vo=0}=Xr,Na=To[bo.type||$.FLOAT];if(Bi){const{elements:Fa,sizePerElement:Ea}=this.featureLayout,Aa=Fa.slice(sn,fn);if(!Aa.length)return;const{offset:_a}=Aa[0],Ba=_a*vo*Na,Ca=Aa.map(({featureIdx:Xa,vertices:ba,normals:cs},Ws)=>{const zs=ba.length/Ea,dc=[];for(let dl=0;dl<zs;dl++){const ff=cs?cs.slice(dl*3,dl*3+3):[];dc.push(...Bi(Je[Xa],Xa,ba.slice(dl*Ea,dl*Ea+Ea),Ws,ff))}return dc}).flat();Cr.vertexAttribute.updateBuffer({data:Ca,offset:Ba}),ir==null||ir.emit(`legend:${pe}`,ir.getLegend(pe))}}}createAttributesAndIndices(pe,Je,sn,fn){this.featureLayout={sizePerElement:0,elements:[]},Je&&(this.triangulation=Je);const ir=this.attributes.map(_a=>(_a.resetDescriptor(),_a.descriptor));let Cr=0,Xr=0;const Bi=[];let bo=3;pe.forEach((_a,Ba)=>{const{indices:Ca,vertices:Xa,normals:ba,size:cs,indexes:Ws,count:zs}=this.triangulation(_a,sn);typeof zs=="number"&&(Xr+=zs),Ca.forEach(dl=>{Bi.push(dl+Cr)}),bo=cs;const dc=Xa.length/cs;this.featureLayout.sizePerElement=bo,this.featureLayout.elements.push({featureIdx:Ba,vertices:Xa,normals:ba,offset:Cr}),Cr+=dc;for(let dl=0;dl<dc;dl++){const ff=(ba==null?void 0:ba.slice(dl*3,dl*3+3))||[],hf=Xa.slice(dl*cs,dl*cs+cs);let pc=0;Ws&&Ws[dl]!==void 0&&(pc=Ws[dl]),ir.forEach((Gc,bh)=>{Gc&&Gc.update&&Gc.buffer.data.push(...Gc.update(_a,Ba,hf,dl,ff,pc))})}});const{createAttribute:vo,createBuffer:Na,createElements:Fa}=this.rendererService,Ea={};ir.forEach((_a,Ba)=>{if(_a){const{buffer:Ca,update:Xa,name:ba}=_a,cs=(0,Qi.Z)(_a,zi),Ws=vo((0,q.Z)({buffer:Na(Ca)},cs));Ea[_a.name||""]=Ws,this.attributes[Ba].vertexAttribute=Ws}});const Aa=Fa({data:Bi,type:$.UNSIGNED_INT,count:Bi.length});return this.attributesAndIndices={attributes:Ea,elements:Aa,count:Xr},Object.values(this.attributes).filter(_a=>_a.scale).forEach(_a=>{const Ba=_a.name;fn==null||fn.emit(`legend:${Ba}`,fn.getLegend(Ba))}),this.attributesAndIndices}createAttributes(pe,Je){this.featureLayout={sizePerElement:0,elements:[]},Je&&(this.triangulation=Je);const sn=this.attributes.map(vo=>(vo.resetDescriptor(),vo.descriptor));let fn=0;const ir=[];let Cr=3;pe.forEach((vo,Na)=>{const{indices:Fa,vertices:Ea,normals:Aa,size:_a,indexes:Ba}=this.triangulation(vo);Fa.forEach(Xa=>{ir.push(Xa+fn)}),Cr=_a;const Ca=Ea.length/_a;this.featureLayout.sizePerElement=Cr,this.featureLayout.elements.push({featureIdx:Na,vertices:Ea,normals:Aa,offset:fn}),fn+=Ca;for(let Xa=0;Xa<Ca;Xa++){const ba=(Aa==null?void 0:Aa.slice(Xa*3,Xa*3+3))||[],cs=Ea.slice(Xa*_a,Xa*_a+_a);let Ws=0;Ba&&Ba[Xa]!==void 0&&(Ws=Ba[Xa]),sn.forEach((zs,dc)=>{zs&&zs.update&&zs.buffer.data.push(...zs.update(vo,Na,cs,Xa,ba,Ws))})}});const{createAttribute:Xr,createBuffer:Bi}=this.rendererService,bo={};return sn.forEach((vo,Na)=>{if(vo){const{buffer:Fa,update:Ea,name:Aa}=vo,_a=(0,Qi.Z)(vo,qr),Ba=Xr((0,q.Z)({buffer:Bi(Fa)},_a));bo[vo.name||""]=Ba,this.attributes[Na].vertexAttribute=Ba}}),{attributes:bo}}clearAllAttributes(){var pe;this.attributes.forEach(Je=>{Je.vertexAttribute&&Je.vertexAttribute.destroy()}),(pe=this.attributesAndIndices)===null||pe===void 0||pe.elements.destroy(),this.attributes=[]}}var So=D(46343),Zi=D(63844),io=D.n(Zi);class Mo extends qt.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(pe){super(),(0,G.Z)(this,"destroyed",!1),(0,G.Z)(this,"loaded",!1),(0,G.Z)(this,"id",void 0),(0,G.Z)(this,"inited",!1),(0,G.Z)(this,"rendering",!1),(0,G.Z)(this,"$container",void 0),(0,G.Z)(this,"canvas",void 0),(0,G.Z)(this,"markerContainer",void 0),(0,G.Z)(this,"resizeDetector",void 0),(0,G.Z)(this,"hooks",void 0),(0,G.Z)(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),(0,G.Z)(this,"handleMapCameraChanged",Je=>{this.cameraService.update(Je),this.render()}),this.container=pe,this.hooks={init:new So.sX},this.id=pe.id}init(pe){var Je=this;this.configService.setSceneConfig(this.id,pe),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Te.Z)(function*(){Je.debugService.log("map.mapInitStart",{type:Je.map.version}),yield new Promise(sn=>{Je.map.onCameraChanged(fn=>{Je.cameraService.init(),Je.cameraService.update(fn),sn()}),Je.map.init()}),Je.map.onCameraChanged(Je.handleMapCameraChanged),Je.map.addMarkerContainer(),Je.markerService.addMarkers(),Je.markerService.addMarkerLayers(),Je.popupService.initPopup(),Je.interactionService.init(),Je.interactionService.on(Xn.Drag,Je.addSceneEvent.bind(Je))})),this.hooks.init.tapPromise("initRenderer",(0,Te.Z)(function*(){var sn;const fn=((sn=Je.map)===null||sn===void 0?void 0:sn.getOverlayContainer())||void 0;if(fn?Je.$container=fn:Je.$container=Bn(Je.configService.getSceneConfig(Je.id).id||""),Je.$container){if(Je.canvas=E.SO.create("canvas","",Je.$container),Je.setCanvas(),yield Je.rendererService.init(Je.canvas,Je.configService.getSceneConfig(Je.id),pe.gl),Je.registerContextLost(),Je.initContainer(),Je.resizeDetector=io()({strategy:"scroll"}),Je.resizeDetector.listenTo(Je.$container,Je.handleWindowResized),window.matchMedia){var ir;(ir=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||ir===void 0||ir.addListener(Je.handleWindowResized.bind("screen"))}}else console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");Je.pickingService.init(Je.id)})),this.render()}registerContextLost(){const pe=this.rendererService.getCanvas();pe&&pe.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(pe){this.layerService.sceneService=this,this.layerService.add(pe)}addMask(pe){this.layerService.sceneService=this,this.layerService.addMask(pe)}render(){var pe=this;return(0,Te.Z)(function*(){pe.rendering||pe.destroyed||(pe.rendering=!0,pe.inited?(yield pe.layerService.initLayers(),yield pe.layerService.renderLayers()):(yield pe.hooks.init.promise(),pe.destroyed&&pe.destroy(),yield pe.layerService.initLayers(),pe.layerService.renderLayers(),pe.controlService.addControls(),pe.loaded=!0,pe.emit("loaded"),pe.inited=!0),pe.rendering=!1)})()}addFontFace(pe,Je){this.fontService.addFontFace(pe,Je)}getSceneContainer(){return this.$container}exportPng(pe){var Je=this;return(0,Te.Z)(function*(){var sn;const fn=(sn=Je.$container)===null||sn===void 0?void 0:sn.getElementsByTagName("canvas")[0];return yield Je.render(),pe==="jpg"?fn==null?void 0:fn.toDataURL("image/jpeg"):fn==null?void 0:fn.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const pe=this.$container.parentElement;pe!==null&&(this.markerContainer=E.SO.create("div","l7-marker-container",pe))}getMarkerContainer(){return this.markerContainer}destroy(){var pe;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var Je;(Je=this.$container)===null||Je===void 0||Je.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(pe=this.$container)===null||pe===void 0||(pe=pe.parentNode)===null||pe===void 0||pe.removeChild(this.$container),this.emit("destroy")}initContainer(){var pe,Je;const sn=E.SO.DPR,fn=((pe=this.$container)===null||pe===void 0?void 0:pe.clientWidth)||400,ir=((Je=this.$container)===null||Je===void 0?void 0:Je.clientHeight)||300,Cr=this.canvas;Cr&&(Cr.width=fn*sn,Cr.height=ir*sn),this.rendererService.viewport({x:0,y:0,width:sn*fn,height:sn*ir})}setCanvas(){var pe,Je;const sn=E.SO.DPR,fn=((pe=this.$container)===null||pe===void 0?void 0:pe.clientWidth)||400,ir=((Je=this.$container)===null||Je===void 0?void 0:Je.clientHeight)||300,Cr=this.canvas;Cr.width=fn*sn,Cr.height=ir*sn,Cr.style.width="100%",Cr.style.height="100%"}addSceneEvent(pe){this.emit(pe.type,pe)}}const{uniq:gs}=E.lodashUtil,ya="#define PI 3.14159265359",ia=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,ps=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,os=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,Ct=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Gt=`layout(location = 3) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,Un=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,Fr=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Oi=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)
#define EARTH_CIRCUMFERENCE 40.03e6

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
#pragma include "scene_uniforms"


// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
   if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return lnglat;
  }
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  // if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
 

  //    return vec4(
  //     position.xy,
  //     project_scale(position.z),
  //     position.w);
  // }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}



float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }

  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
   return meter;
  } else  {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

// \u652F\u6301 GaodeV2\u3001Mapbox
vec4 project_common_position_to_clipspace_v2(vec4 position) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    return u_Mvp * position;
  } else {
    return project_common_position_to_clipspace(position);
  }
}
`,Yi=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,ea=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};

layout(std140) uniform LayerUniforms {
  mat4 u_Mvp;
  vec2 u_sceneCenterMercator;
};
`,Ns=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,As=/precision\s+(high|low|medium)p\s+float/,Is=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,al=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,Gh=/void\s+main\s*\([^)]*\)\s*\{\n?/;class Op{constructor(){(0,G.Z)(this,"moduleCache",{}),(0,G.Z)(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:ya,fs:ya}),this.registerModule("decode",{vs:ps,fs:""}),this.registerModule("scene_uniforms",{vs:ea,fs:ea}),this.registerModule("picking_uniforms",{vs:Un,fs:Un}),this.registerModule("projection",{vs:Oi,fs:Oi}),this.registerModule("project",{vs:Fr,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Ns}),this.registerModule("lighting",{vs:os,fs:""}),this.registerModule("light",{vs:ia,fs:""}),this.registerModule("picking",{vs:Gt,fs:Ct}),this.registerModule("rotation_2d",{vs:Yi,fs:""})}registerModule(pe,Je){Je.vs=Je.vs.replace(/\r\n/g,`
`),Je.fs=Je.fs.replace(/\r\n/g,`
`);const{vs:sn,fs:fn,uniforms:ir,inject:Cr}=Je,{content:Xr,uniforms:Bi}=Q(sn),{content:bo,uniforms:vo}=Q(fn);this.rawContentCache[pe]={fs:bo,inject:Cr,uniforms:(0,q.Z)((0,q.Z)((0,q.Z)({},Bi),vo),ir),vs:Xr}}destroy(){this.moduleCache={},this.rawContentCache={}}getModule(pe){let Je=this.rawContentCache[pe].vs,sn=this.rawContentCache[pe].fs;const fn=this.rawContentCache[pe].inject;let ir={};fn!=null&&fn["vs:#decl"]&&(Je=(fn==null?void 0:fn["vs:#decl"])+Je,ir=Q(fn==null?void 0:fn["vs:#decl"]).uniforms),fn!=null&&fn["vs:#main-start"]&&(Je=Je.replace(Gh,Ea=>Ea+(fn==null?void 0:fn["vs:#main-start"]))),fn!=null&&fn["fs:#decl"]&&(sn=(fn==null?void 0:fn["fs:#decl"])+sn);const{content:Cr,includeList:Xr}=this.processModule(Je,[],"vs"),{content:Bi,includeList:bo}=this.processModule(sn,[],"fs");let vo="";const Na=gs(Xr.concat(bo).concat(pe)).reduce((Ea,Aa)=>(0,q.Z)((0,q.Z)({},Ea),this.rawContentCache[Aa].uniforms),(0,q.Z)({},ir));As.test(Bi)||(vo=vo+Is),vo=vo+Bi;let Fa="";return As.test(Cr)||(Fa=Fa+Is),Fa=Fa+Cr,this.moduleCache[pe]={fs:vo.trim(),uniforms:Na,vs:Fa.trim()},this.moduleCache[pe]}processModule(pe,Je,sn){return{content:pe.replace(al,(ir,Cr)=>{const Bi=Cr.split(" ")[0].replace(/"/g,"");if(Je.indexOf(Bi)>-1)return"";const bo=this.rawContentCache[Bi][sn];Je.push(Bi);const{content:vo}=this.processModule(bo,Je,sn);return vo}),includeList:Je}}injectDefines(pe){return Object.keys(pe).reduce((sn,fn)=>sn+`#define ${fn.toUpperCase()} ${pe[fn]};
`,`
`)}}class Kf{constructor(){(0,G.Z)(this,"shaderModuleService",void 0),(0,G.Z)(this,"rendererService",void 0),(0,G.Z)(this,"cameraService",void 0),(0,G.Z)(this,"mapService",void 0),(0,G.Z)(this,"interactionService",void 0),(0,G.Z)(this,"layerService",void 0),(0,G.Z)(this,"config",void 0)}getName(){return""}getType(){return fe.Normal}init(pe,Je){this.config=Je,this.rendererService=pe.getContainer().rendererService,this.cameraService=pe.getContainer().cameraService,this.mapService=pe.getContainer().mapService,this.interactionService=pe.getContainer().interactionService,this.layerService=pe.getContainer().layerService,this.shaderModuleService=pe.getContainer().shaderModuleService}render(pe){}}class ou extends Kf{getName(){return"clear"}init(pe,Je){super.init(pe,Je)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class Uf{constructor(pe){(0,G.Z)(this,"passes",[]),(0,G.Z)(this,"layer",void 0),(0,G.Z)(this,"renderFlag",void 0),(0,G.Z)(this,"width",0),(0,G.Z)(this,"height",0),this.postProcessor=pe}setLayer(pe){this.layer=pe}setRenderFlag(pe){this.renderFlag=pe}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var pe=this;return(0,Te.Z)(function*(){for(const Je of pe.passes)yield Je.render(pe.layer);yield pe.postProcessor.render(pe.layer)})()}resize(pe,Je){(this.width!==pe||this.height!==Je)&&(this.postProcessor.resize(pe,Je),this.width=pe,this.height=Je)}add(pe,Je){pe.getType()===fe.PostProcessing?this.postProcessor.add(pe,this.layer,Je):(pe.init(this.layer,Je),this.passes.push(pe))}insert(pe,Je,sn){pe.init(this.layer,Je),this.passes.splice(sn,0,pe)}destroy(){this.passes.length=0}}class of extends Kf{constructor(...pe){var Je;super(...pe),Je=this,(0,G.Z)(this,"pickingFBO",void 0),(0,G.Z)(this,"layer",void 0),(0,G.Z)(this,"width",0),(0,G.Z)(this,"height",0),(0,G.Z)(this,"alreadyInRendering",!1),(0,G.Z)(this,"pickFromPickingFBO",({x:sn,y:fn,lngLat:ir,type:Cr})=>{if(!this.layer.isVisible()||!this.layer.needPick(Cr))return;const{getViewportSize:Xr,readPixelsAsync:Bi,useFramebuffer:bo}=this.rendererService,{width:vo,height:Na}=Xr(),{enableHighlight:Fa,enableSelect:Ea}=this.layer.getLayerConfig(),Aa=sn*E.SO.DPR,_a=fn*E.SO.DPR;if(Aa>vo||Aa<0||_a>Na||_a<0)return;let Ba;bo(this.pickingFBO,(0,Te.Z)(function*(){var Ca;if(Ba=yield Bi({x:Math.round(Aa),y:Math.round(Na-(fn+1)*E.SO.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Je.pickingFBO}),Ba[0]!==0||Ba[1]!==0||Ba[2]!==0){const Xa=(0,E.W0)(Ba),ba=Je.layer.getSource().getFeatureById(Xa),cs={x:sn,y:fn,type:Cr,lngLat:ir,featureId:Xa,feature:ba};ba&&(Je.layer.setCurrentPickId(Xa),Je.triggerHoverOnLayer(cs))}else{const Xa={x:sn,y:fn,lngLat:ir,type:Je.layer.getCurrentPickId()===null?"un"+Cr:"mouseout",featureId:null,feature:null};Je.triggerHoverOnLayer((0,q.Z)((0,q.Z)({},Xa),{},{type:"unpick"})),Je.triggerHoverOnLayer(Xa),Je.layer.setCurrentPickId(null)}Fa&&Je.highlightPickedFeature(Ba),Ea&&Cr==="click"&&((Ca=Ba)===null||Ca===void 0?void 0:Ca.toString())!==[0,0,0,0].toString()&&Je.selectFeature(Ba)}))})}getType(){return fe.Normal}getName(){return"pixelPicking"}init(pe,Je){super.init(pe,Je),this.layer=pe;const{createTexture2D:sn,createFramebuffer:fn,getViewportSize:ir}=this.rendererService,{width:Cr,height:Xr}=ir(),Bi=sn({width:Cr,height:Xr,wrapS:$.CLAMP_TO_EDGE,wrapT:$.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=fn({color:Bi}),this.interactionService.on(Xn.Hover,this.pickFromPickingFBO),this.interactionService.on(Xn.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Xn.Active,this.highlightFeatureHandle.bind(this))}render(pe){if(this.alreadyInRendering)return;const{getViewportSize:Je,useFramebuffer:sn,clear:fn}=this.rendererService,{width:ir,height:Cr}=Je();this.alreadyInRendering=!0,(this.width!==ir||this.height!==Cr)&&(this.pickingFBO.resize({width:ir,height:Cr}),this.width=ir,this.height=Cr),sn(this.pickingFBO,()=>{fn({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const Xr=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),pe.hooks.beforePickingEncode.call(),pe.render(),pe.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(Xr),this.alreadyInRendering=!1})}triggerHoverOnLayer(pe){this.layer.emit(pe.type,pe)}highlightPickedFeature(pe){const[Je,sn,fn]=pe;this.layer.hooks.beforeHighlight.call([Je,sn,fn]),this.layerService.renderLayers()}selectFeature(pe){const[Je,sn,fn]=pe;this.layer.hooks.beforeSelect.call([Je,sn,fn]),this.layerService.renderLayers()}selectFeatureHandle({featureId:pe}){const Je=(0,E.Z6)(pe);this.selectFeature(new Uint8Array(Je))}highlightFeatureHandle({featureId:pe}){const Je=(0,E.Z6)(pe);this.highlightPickedFeature(new Uint8Array(Je))}}class au{constructor(pe){(0,G.Z)(this,"passes",[]),(0,G.Z)(this,"readFBO",void 0),(0,G.Z)(this,"writeFBO",void 0),this.rendererService=pe,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:pe,createTexture2D:Je}=this.rendererService,{width:sn,height:fn}=pe();return Je({x:0,y:0,width:sn,height:fn,copy:!0})}getReadFBOTex(){var pe=this;const{useFramebuffer:Je}=this.rendererService;return new Promise(sn=>{Je(this.readFBO,(0,Te.Z)(function*(){sn(pe.getCurrentFBOTex())}))})}renderBloomPass(pe,Je){var sn=this;return(0,Te.Z)(function*(){const fn=yield sn.getReadFBOTex();let ir=0;for(;ir<4;)yield Je.render(pe,fn),sn.swap(),ir++})()}render(pe){var Je=this;return(0,Te.Z)(function*(){for(let sn=0;sn<Je.passes.length;sn++){const fn=Je.passes[sn];fn.setRenderToScreen(Je.isLastEnabledPass(sn)),fn.getName()==="bloom"?yield Je.renderBloomPass(pe,fn):(yield fn.render(pe),sn!==Je.passes.length-1&&Je.swap())}})()}resize(pe,Je){this.readFBO.resize({width:pe,height:Je}),this.writeFBO.resize({width:pe,height:Je})}add(pe,Je,sn){pe.init(Je,sn),this.passes.push(pe)}insert(pe,Je,sn,fn){pe.init(sn,fn),this.passes.splice(Je,0,pe)}getPostProcessingPassByName(pe){return this.passes.find(Je=>Je.getName()===pe)}init(){const{createFramebuffer:pe,createTexture2D:Je}=this.rendererService;this.readFBO=pe({color:Je({width:1,height:1,wrapS:$.CLAMP_TO_EDGE,wrapT:$.CLAMP_TO_EDGE})}),this.writeFBO=pe({color:Je({width:1,height:1,wrapS:$.CLAMP_TO_EDGE,wrapT:$.CLAMP_TO_EDGE})})}isLastEnabledPass(pe){for(let Je=pe+1;Je<this.passes.length;Je++)if(this.passes[Je].isEnabled())return!1;return!0}swap(){const pe=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=pe}}class yu extends Kf{getType(){return fe.Normal}getName(){return"render"}init(pe,Je){super.init(pe,Je)}render(pe){const{useFramebuffer:Je,clear:sn}=this.rendererService,fn=pe.multiPassRenderer.getPostProcessor().getReadFBO();Je(fn,()=>{sn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:fn}),pe.multiPassRenderer.setRenderFlag(!1),pe.models.forEach(ir=>{ir.draw({uniforms:pe.layerModel.getUninforms()})}),pe.multiPassRenderer.setRenderFlag(!0)})}}const af=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,Sf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Ou=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function xs(oe,pe){let Je=0,sn=1/pe,fn=oe;for(;fn>0;)Je=Je+sn*(fn%pe),fn=Math.floor(fn/pe),sn=sn/pe;return Je}let tc=1;class sf extends Kf{constructor(pe){super(),(0,G.Z)(this,"haltonSequence",[]),(0,G.Z)(this,"accumulatingId",0),(0,G.Z)(this,"frame",0),(0,G.Z)(this,"timer",void 0),(0,G.Z)(this,"sampleRenderTarget",void 0),(0,G.Z)(this,"prevRenderTarget",void 0),(0,G.Z)(this,"outputRenderTarget",void 0),(0,G.Z)(this,"copyRenderTarget",void 0),(0,G.Z)(this,"blendModel",void 0),(0,G.Z)(this,"outputModel",void 0),(0,G.Z)(this,"copyModel",void 0),this.shaderModuleService=pe}getType(){return fe.Normal}getName(){return"taa"}init(pe,Je){super.init(pe,Je);const{createFramebuffer:sn,createTexture2D:fn}=this.rendererService;this.sampleRenderTarget=sn({color:fn({width:1,height:1,wrapS:$.CLAMP_TO_EDGE,wrapT:$.CLAMP_TO_EDGE})}),this.prevRenderTarget=sn({color:fn({width:1,height:1,wrapS:$.CLAMP_TO_EDGE,wrapT:$.CLAMP_TO_EDGE})}),this.outputRenderTarget=sn({color:fn({width:1,height:1,wrapS:$.CLAMP_TO_EDGE,wrapT:$.CLAMP_TO_EDGE})}),this.copyRenderTarget=sn({color:fn({width:1,height:1,wrapS:$.CLAMP_TO_EDGE,wrapT:$.CLAMP_TO_EDGE})});for(let ir=0;ir<30;ir++)this.haltonSequence.push([xs(ir,2),xs(ir,3)]);this.blendModel=this.createTriangleModel("blend-pass",af),this.outputModel=this.createTriangleModel("copy-pass",Sf,{blend:{enable:!0,func:{srcRGB:$.ONE,dstRGB:$.ONE_MINUS_SRC_ALPHA,srcAlpha:$.ONE,dstAlpha:$.ONE_MINUS_SRC_ALPHA},equation:{rgb:$.FUNC_ADD,alpha:$.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",Sf)}render(pe){const{clear:Je,getViewportSize:sn,useFramebuffer:fn}=this.rendererService,{width:ir,height:Cr}=sn();this.sampleRenderTarget.resize({width:ir,height:Cr}),this.prevRenderTarget.resize({width:ir,height:Cr}),this.outputRenderTarget.resize({width:ir,height:Cr}),this.copyRenderTarget.resize({width:ir,height:Cr}),this.resetFrame(),this.stopAccumulating();const Xr=pe.multiPassRenderer.getPostProcessor().getReadFBO();fn(Xr,()=>{Je({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Xr}),pe.multiPassRenderer.setRenderFlag(!1),pe.render(),pe.multiPassRenderer.setRenderFlag(!0)});const Bi=bo=>{!this.accumulatingId||bo!==this.accumulatingId||this.isFinished()||(this.doRender(pe),window.requestAnimationFrame(()=>{Bi(bo)}))};this.accumulatingId=tc++,this.timer=window.setTimeout(()=>{Bi(this.accumulatingId)},50)}doRender(pe){const{clear:Je,getViewportSize:sn,useFramebuffer:fn}=this.rendererService,{width:ir,height:Cr}=sn(),{jitterScale:Xr=1}=pe.getLayerConfig(),Bi=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Bi[0]*2-1)/ir*Xr,(Bi[1]*2-1)/Cr*Xr),pe.multiPassRenderer.setRenderFlag(!1),pe.hooks.beforeRender.call(),fn(this.sampleRenderTarget,()=>{Je({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.sampleRenderTarget}),pe.render()}),pe.hooks.afterRender.call(),pe.multiPassRenderer.setRenderFlag(!0);const bo=pe.getLayerConfig();fn(this.outputRenderTarget,()=>{this.blendModel.draw({uniforms:{u_opacity:bo.opacity||1,u_MixRatio:this.frame===0?1:.9,u_Diffuse1:this.sampleRenderTarget,u_Diffuse2:this.frame===0?pe.multiPassRenderer.getPostProcessor().getReadFBO():this.prevRenderTarget}})}),this.frame===0&&Je({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(fn(this.copyRenderTarget,()=>{this.outputModel.draw({uniforms:{u_Texture:this.outputRenderTarget}})}),fn(pe.multiPassRenderer.getPostProcessor().getReadFBO(),()=>{this.copyModel.draw({uniforms:{u_Texture:this.copyRenderTarget}})}),pe.multiPassRenderer.getPostProcessor().render(pe));const vo=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=vo,this.frame++,this.cameraService.clearJitterProjectionMatrix()}isFinished(){return this.frame>=this.haltonSequence.length}resetFrame(){this.frame=0}stopAccumulating(){this.accumulatingId=0,window.clearTimeout(this.timer)}createTriangleModel(pe,Je,sn){this.shaderModuleService.registerModule(pe,{vs:Ou,fs:Je});const{vs:fn,fs:ir,uniforms:Cr}=this.shaderModuleService.getModule(pe),{createAttribute:Xr,createBuffer:Bi,createModel:bo}=this.rendererService;return bo((0,q.Z)({vs:fn,fs:ir,attributes:{a_Position:Xr({buffer:Bi({data:[-4,-4,4,-4,0,4],type:$.FLOAT}),size:2})},uniforms:(0,q.Z)({},Cr),depth:{enable:!1},count:3},sn))}}const Ed=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,np=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:jf}=E.lodashUtil;class Sd extends He{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:np,fs:Ed});const{vs:pe,fs:Je,uniforms:sn}=this.shaderModuleService.getModule("blur-pass"),{width:fn,height:ir}=this.rendererService.getViewportSize();return{vs:pe,fs:Je,uniforms:(0,q.Z)((0,q.Z)({},sn),{},{u_ViewportSize:[fn,ir]})}}convertOptionsToUniforms(pe){const Je={};return jf(pe.bloomRadius)||(Je.u_radius=pe.bloomRadius),jf(pe.bloomIntensity)||(Je.u_intensity=pe.bloomIntensity),jf(pe.bloomBaseRadio)||(Je.u_baseRadio=pe.bloomBaseRadio),Je}}const yh=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Zh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Xh}=E.lodashUtil;class wd extends He{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Zh,fs:yh});const{vs:pe,fs:Je,uniforms:sn}=this.shaderModuleService.getModule("blur-pass"),{width:fn,height:ir}=this.rendererService.getViewportSize();return{vs:pe,fs:Je,uniforms:(0,q.Z)((0,q.Z)({},sn),{},{u_ViewportSize:[fn,ir]})}}convertOptionsToUniforms(pe){const Je={};return Xh(pe.blurRadius)||(Je.u_BlurDir=[pe.blurRadius,0]),Je}}const Qp=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,lf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Vc}=E.lodashUtil;class Td extends He{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:lf,fs:Qp});const{vs:pe,fs:Je,uniforms:sn}=this.shaderModuleService.getModule("blur-pass"),{width:fn,height:ir}=this.rendererService.getViewportSize();return{vs:pe,fs:Je,uniforms:(0,q.Z)((0,q.Z)({},sn),{},{u_ViewportSize:[fn,ir]})}}convertOptionsToUniforms(pe){const Je={};return Vc(pe.blurRadius)||(Je.u_BlurDir=[0,pe.blurRadius]),Je}}const jl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Ac=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class uf extends He{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Ac,fs:jl});const{vs:pe,fs:Je,uniforms:sn}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:fn,height:ir}=this.rendererService.getViewportSize();return{vs:pe,fs:Je,uniforms:(0,q.Z)((0,q.Z)({},sn),{},{u_ViewportSize:[fn,ir]})}}}const su=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Hc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class hc extends He{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:Hc,fs:su}),this.shaderModuleService.getModule("copy-pass")}}const wf=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Ml=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class cf extends He{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Ml,fs:wf});const{vs:pe,fs:Je,uniforms:sn}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:fn,height:ir}=this.rendererService.getViewportSize();return{vs:pe,fs:Je,uniforms:(0,q.Z)((0,q.Z)({},sn),{},{u_ViewportSize:[fn,ir]})}}}const Tf=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Ad=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Cd extends He{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:Ad,fs:Tf});const{vs:pe,fs:Je,uniforms:sn}=this.shaderModuleService.getModule("ink-pass"),{width:fn,height:ir}=this.rendererService.getViewportSize();return{vs:pe,fs:Je,uniforms:(0,q.Z)((0,q.Z)({},sn),{},{u_ViewportSize:[fn,ir]})}}}const ys=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,rp=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Qf extends He{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:rp,fs:ys}),this.shaderModuleService.getModule("noise-pass")}}const Yh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,sl=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class $h extends He{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Yh,fs:sl}),this.shaderModuleService.getModule("sepia-pass")}}const _h=new Ai;let _u=0;function Wc(){const oe=new Op,pe=new jo,Je=new Et,sn=new go(Je),fn=new Me,ir=new nn,Cr=new Sr,Xr=new Zr,Bi=new Qn,bo={id:`${_u++}`,globalConfigService:_h,shaderModuleService:oe,debugService:pe,cameraService:Je,coordinateSystemService:sn,fontService:fn,iconService:ir,markerService:Cr,popupService:Xr,controlService:Bi,customRenderService:{}},vo=new Wi(bo);bo.layerService=vo;const Na=new Mo(bo);bo.sceneService=Na;const Fa=new dn(bo);bo.interactionService=Fa;const Ea=new pr(bo);bo.pickingService=Ea;const Aa={clear:new ou,pixelPicking:new of,render:new yu,taa:new sf(oe)};bo.normalPassFactory=Ba=>Aa[Ba];const _a={copy:new hc,bloom:new Sd,blurH:new wd,blurV:new Td,noise:new Qf,sepia:new $h,colorHalftone:new uf,hexagonalPixelate:new cf,ink:new Cd};return bo.postProcessingPass=_a,bo.postProcessingPassFactory=Ba=>_a[Ba],bo}function Mu(oe){const pe=(0,q.Z)({},oe);return pe.postProcessor=new au(pe.rendererService),pe.multiPassRenderer=new Uf(pe.postProcessor),pe.styleAttributeService=new di(pe.rendererService),pe}const Cc=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let we=function(oe){return oe.IMAGE="image",oe.CUSTOMIMAGE="customImage",oe.ARRAYBUFFER="arraybuffer",oe.RGB="rgb",oe.TERRAINRGB="terrainRGB",oe.CUSTOMRGB="customRGB",oe.CUSTOMARRAYBUFFER="customArrayBuffer",oe.CUSTOMTERRAINRGB="customTerrainRGB",oe}({})},83366:function(_t,W,D){"use strict";D.d(W,{Z:function(){return Kn}});var q=D(1413),G=D(4942);class E{constructor(vt){(0,G.Z)(this,"configService",void 0),(0,G.Z)(this,"config",void 0),this.config=vt}setContainer(vt,Nt,An){this.configService=vt.globalConfigService,vt.mapConfig=(0,q.Z)((0,q.Z)({},this.config),{},{id:Nt,canvas:An}),vt.mapService=new(this.getServiceConstructor())(vt)}getServiceConstructor(){throw new Error("Method not implemented.")}}var fe=D(45987),$=D(15861),se=D(85975),ce=D(77160),ye=D(6158),ae=D.n(ye),He=D(88120),J=D(66366),me=D(26729);class Oe{constructor(vt){(0,G.Z)(this,"size",1e4),this.size=vt||1e4}setSize(vt){this.size=vt}getSize(){return[this.size,this.size]}mercatorXfromLng(vt){return(180+vt)/360*this.size}mercatorYfromLat(vt){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+vt*Math.PI/360)))/360)*this.size}lngFromMercatorX(vt){return vt/this.size*360-180}latFromMercatorY(vt){const Nt=180-(1-vt/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(Nt*Math.PI/180))-90}project(vt){const Nt=this.mercatorXfromLng(vt[0]),An=this.mercatorYfromLat(vt[1]);return[Nt,An]}unproject(vt){const Nt=this.lngFromMercatorX(vt[0]),An=this.latFromMercatorY(vt[1]);return[Nt,An]}}const Q={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},le={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},ee=12;class be{constructor(vt){(0,G.Z)(this,"version","DEFAUlTMAP"),(0,G.Z)(this,"map",void 0),(0,G.Z)(this,"simpleMapCoord",new Oe),(0,G.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,G.Z)(this,"config",void 0),(0,G.Z)(this,"configService",void 0),(0,G.Z)(this,"coordinateSystemService",void 0),(0,G.Z)(this,"eventEmitter",void 0),(0,G.Z)(this,"markerContainer",void 0),(0,G.Z)(this,"cameraChangedCallback",void 0),(0,G.Z)(this,"$mapContainer",void 0),(0,G.Z)(this,"handleCameraChanged",Nt=>{const{lat:An,lng:In}=this.map.getCenter();this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:this.map.getBearing(),center:[In,An],viewportHeight:this.map.transform.height,pitch:this.map.getPitch(),viewportWidth:this.map.transform.width,zoom:this.map.getZoom(),cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}),this.config=vt.mapConfig,this.configService=vt.globalConfigService,this.coordinateSystemService=vt.coordinateSystemService,this.eventEmitter=new me.EventEmitter}setBgColor(vt){this.bgColor=vt}addMarkerContainer(){const vt=this.map.getCanvasContainer();this.markerContainer=J.SO.create("div","l7-marker-container",vt),this.markerContainer.setAttribute("tabindex","-1")}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}on(vt,Nt){He.I9.indexOf(vt)!==-1?this.eventEmitter.on(vt,Nt):this.map.on(le[vt]||vt,Nt)}off(vt,Nt){this.map.off(le[vt]||vt,Nt),this.eventEmitter.off(vt,Nt)}getContainer(){return this.map.getContainer()}getMapCanvasContainer(){return this.map.getCanvasContainer()}getSize(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();const vt=this.map.transform;return[vt.width,vt.height]}getType(){return"default"}getZoom(){return this.map.getZoom()}setZoom(vt){return this.map.setZoom(vt)}getCenter(){return this.map.getCenter()}setCenter(vt){this.map.setCenter(vt)}getPitch(){return this.map.getPitch()}getRotation(){return this.map.getBearing()}getBounds(){return this.map.getBounds().toArray()}getMinZoom(){return this.map.getMinZoom()}getMaxZoom(){return this.map.getMaxZoom()}setRotation(vt){this.map.setBearing(vt)}zoomIn(vt,Nt){this.map.zoomIn(vt,Nt)}zoomOut(vt,Nt){this.map.zoomOut(vt,Nt)}setPitch(vt){return this.map.setPitch(vt)}panTo(vt){this.map.panTo(vt)}panBy(vt=0,Nt=0){this.map.panBy([vt,Nt])}fitBounds(vt,Nt){this.map.fitBounds(vt,Nt)}setMaxZoom(vt){this.map.setMaxZoom(vt)}setMinZoom(vt){this.map.setMinZoom(vt)}setMapStatus(vt){vt.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),vt.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),vt.dragEnable===!1&&this.map.dragPan.disable(),vt.dragEnable===!0&&this.map.dragPan.enable(),vt.rotateEnable===!1&&this.map.dragRotate.disable(),vt.dragEnable===!0&&this.map.dragRotate.enable(),vt.keyboardEnable===!1&&this.map.keyboard.disable(),vt.keyboardEnable===!0&&this.map.keyboard.enable(),vt.zoomEnable===!1&&this.map.scrollZoom.disable(),vt.zoomEnable===!0&&this.map.scrollZoom.enable()}setZoomAndCenter(vt,Nt){this.map.flyTo({zoom:vt,center:Nt})}setMapStyle(vt){this.map.setStyle(this.getMapStyleValue(vt))}meterToCoord(vt,Nt){return 1}pixelToLngLat(vt){return this.map.unproject(vt)}lngLatToPixel(vt){return this.map.project(vt)}containerToLngLat(vt){return this.map.unproject(vt)}lngLatToContainer(vt){return this.map.project(vt)}getMapStyle(){try{var vt;const Nt=(vt=this.map.getStyle().sprite)!==null&&vt!==void 0?vt:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(Nt)?Nt==null?void 0:Nt.replace(/\/\w+$/,"").replace(/sprites/,"styles"):Nt}catch(Nt){return""}}getMapStyleConfig(){return Q}getMapStyleValue(vt){var Nt;return(Nt=this.getMapStyleConfig()[vt])!==null&&Nt!==void 0?Nt:vt}destroy(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(vt,...Nt){this.eventEmitter.emit(vt,...Nt)}once(vt,...Nt){this.eventEmitter.once(vt,...Nt)}getMapContainer(){return this.$mapContainer}exportMap(vt){const Nt=this.map.getCanvas();return vt==="jpg"?Nt==null?void 0:Nt.toDataURL("image/jpeg"):Nt==null?void 0:Nt.toDataURL("image/png")}onCameraChanged(vt){this.cameraChangedCallback=vt}creatMapContainer(vt){let Nt=vt;return typeof vt=="string"&&(Nt=document.getElementById(vt)),Nt}updateView(vt){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:vt.bearing,center:vt.center,viewportHeight:vt.viewportHeight,pitch:vt.pitch,viewportWidth:vt.viewportWidth,zoom:vt.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:vt=!0}=this.config;this.viewport.getZoom()>ee&&vt?this.coordinateSystemService.setCoordinateSystem(He.lo.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(He.lo.LNGLAT)}}var et=D(15671),tt=D(43144),wt=D(82963),gt=D(61120),ft=D(32531),Pe=D(97326),Ae=D(97685),Be=D(98333);function Ze(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ut(pn,vt){var Nt=Be.fF([],vt,pn);return Be.bA(Nt,Nt,1/Nt[3]),Nt}function tn(pn,vt){var Nt=pn%vt;return Nt<0?vt+Nt:Nt}function De(pn,vt,Nt){return Nt*vt+(1-Nt)*pn}var mt=D(31437);function Re(pn,vt){if(!pn)throw new Error(vt||"viewport-mercator-project: assertion failed.")}var nt=Math.PI,qe=nt/4,Ge=nt/180,Dt=180/nt,yt=512,Le=4003e4,Zt=1.5;function yn(pn){return Math.pow(2,pn)}function Tn(pn){return Math.log2(pn)}function lr(pn,vt){var Nt=(0,Ae.Z)(pn,2),An=Nt[0],In=Nt[1];Re(Number.isFinite(An)&&Number.isFinite(vt)),Re(Number.isFinite(In)&&In>=-90&&In<=90,"invalid latitude"),vt*=yt;var $n=An*Ge,pt=In*Ge,xe=vt*($n+nt)/(2*nt),Fe=vt*(nt-Math.log(Math.tan(qe+pt*.5)))/(2*nt);return[xe,Fe]}function or(pn,vt){var Nt=(0,Ae.Z)(pn,2),An=Nt[0],In=Nt[1];vt*=yt;var $n=An/vt*(2*nt)-nt,pt=2*(Math.atan(Math.exp(nt-In/vt*(2*nt)))-qe);return[$n*Dt,pt*Dt]}function Lt(pn){var vt=pn.latitude;assert(Number.isFinite(vt));var Nt=Math.cos(vt*Ge);return Tn(Le*Nt)-9}function en(pn){var vt=pn.latitude,Nt=pn.longitude,An=pn.zoom,In=pn.scale,$n=pn.highPrecision,pt=$n===void 0?!1:$n;In=In!==void 0?In:yn(An),Re(Number.isFinite(vt)&&Number.isFinite(Nt)&&Number.isFinite(In));var xe={},Fe=yt*In,st=Math.cos(vt*Ge),It=Fe/360,Mt=It/st,wn=Fe/Le/st;if(xe.pixelsPerMeter=[wn,-wn,wn],xe.metersPerPixel=[1/wn,-1/wn,1/wn],xe.pixelsPerDegree=[It,-Mt,wn],xe.degreesPerPixel=[1/It,-1/Mt,1/wn],pt){var rr=Ge*Math.tan(vt*Ge)/st,Er=It*rr/2,qn=Fe/Le*rr,Me=qn/Mt*wn;xe.pixelsPerDegree2=[0,-Er,qn],xe.pixelsPerMeter2=[Me,0,Me]}return xe}function hn(pn,vt){var Nt=_slicedToArray(pn,3),An=Nt[0],In=Nt[1],$n=Nt[2],pt=_slicedToArray(vt,3),xe=pt[0],Fe=pt[1],st=pt[2],It=1,Mt=en({longitude:An,latitude:In,scale:It,highPrecision:!0}),wn=Mt.pixelsPerMeter,rr=Mt.pixelsPerMeter2,Er=lr(pn,It);Er[0]+=xe*(wn[0]+rr[0]*Fe),Er[1]+=Fe*(wn[1]+rr[1]*Fe);var qn=or(Er,It),Me=($n||0)+(st||0);return Number.isFinite($n)||Number.isFinite(st)?[qn[0],qn[1],Me]:qn}function Xn(pn){var vt=pn.height,Nt=pn.pitch,An=pn.bearing,In=pn.altitude,$n=pn.center,pt=$n===void 0?null:$n,xe=pn.flipY,Fe=xe===void 0?!1:xe,st=Ze();return se.translate(st,st,[0,0,-In]),se.scale(st,st,[1,1,1/vt]),se.rotateX(st,st,-Nt*Ge),se.rotateZ(st,st,An*Ge),Fe&&se.scale(st,st,[1,-1,1]),pt&&se.translate(st,st,ce.tk([],pt)),st}function an(pn){var vt=pn.width,Nt=pn.height,An=pn.altitude,In=An===void 0?Zt:An,$n=pn.pitch,pt=$n===void 0?0:$n,xe=pn.nearZMultiplier,Fe=xe===void 0?1:xe,st=pn.farZMultiplier,It=st===void 0?1:st,Mt=pt*Ge,wn=Math.atan(.5/In),rr=Math.sin(wn)*In/Math.sin(Math.PI/2-Mt-wn),Er=Math.cos(Math.PI/2-Mt)*rr+In;return{fov:2*Math.atan(Nt/2/In),aspect:vt/Nt,focalDistance:In,near:Fe,far:Er*It}}function Pt(pn){var vt=pn.width,Nt=pn.height,An=pn.pitch,In=pn.altitude,$n=pn.nearZMultiplier,pt=pn.farZMultiplier,xe=an({width:vt,height:Nt,altitude:In,pitch:An,nearZMultiplier:$n,farZMultiplier:pt}),Fe=xe.fov,st=xe.aspect,It=xe.near,Mt=xe.far,wn=se.perspective([],Fe,st,It,Mt);return wn}function zt(pn,vt){var Nt=(0,Ae.Z)(pn,3),An=Nt[0],In=Nt[1],$n=Nt[2],pt=$n===void 0?0:$n;return Re(Number.isFinite(An)&&Number.isFinite(In)&&Number.isFinite(pt)),ut(vt,[An,In,pt,1])}function je(pn,vt){var Nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,An=(0,Ae.Z)(pn,3),In=An[0],$n=An[1],pt=An[2];if(Re(Number.isFinite(In)&&Number.isFinite($n),"invalid pixel coordinate"),Number.isFinite(pt)){var xe=ut(vt,[In,$n,pt,1]);return xe}var Fe=ut(vt,[In,$n,0,1]),st=ut(vt,[In,$n,1,1]),It=Fe[2],Mt=st[2],wn=It===Mt?0:((Nt||0)-It)/(Mt-It);return mt.t7([],Fe,st,wn)}var rt=Ze(),Ut=function(){function pn(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Nt=vt.width,An=vt.height,In=vt.viewMatrix,$n=In===void 0?rt:In,pt=vt.projectionMatrix,xe=pt===void 0?rt:pt;(0,et.Z)(this,pn),this.width=Nt||1,this.height=An||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=$n,this.projectionMatrix=xe;var Fe=Ze();se.multiply(Fe,Fe,this.projectionMatrix),se.multiply(Fe,Fe,this.viewMatrix),this.viewProjectionMatrix=Fe;var st=Ze();se.scale(st,st,[this.width/2,-this.height/2,1]),se.translate(st,st,[1,-1,0]),se.multiply(st,st,this.viewProjectionMatrix);var It=se.invert(Ze(),st);if(!It)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=st,this.pixelUnprojectionMatrix=It,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,tt.Z)(pn,[{key:"equals",value:function(Nt){return Nt instanceof pn?Nt.width===this.width&&Nt.height===this.height&&se.equals(Nt.projectionMatrix,this.projectionMatrix)&&se.equals(Nt.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(Nt){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},In=An.topLeft,$n=In===void 0?!0:In,pt=this.projectPosition(Nt),xe=zt(pt,this.pixelProjectionMatrix),Fe=(0,Ae.Z)(xe,2),st=Fe[0],It=Fe[1],Mt=$n?It:this.height-It;return Nt.length===2?[st,Mt]:[st,Mt,xe[2]]}},{key:"unproject",value:function(Nt){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},In=An.topLeft,$n=In===void 0?!0:In,pt=An.targetZ,xe=(0,Ae.Z)(Nt,3),Fe=xe[0],st=xe[1],It=xe[2],Mt=$n?st:this.height-st,wn=pt&&pt*this.pixelsPerMeter,rr=je([Fe,Mt,It],this.pixelUnprojectionMatrix,wn),Er=this.unprojectPosition(rr),qn=(0,Ae.Z)(Er,3),Me=qn[0],Te=qn[1],ke=qn[2];return Number.isFinite(It)?[Me,Te,ke]:Number.isFinite(pt)?[Me,Te,pt]:[Me,Te]}},{key:"projectPosition",value:function(Nt){var An=this.projectFlat(Nt),In=(0,Ae.Z)(An,2),$n=In[0],pt=In[1],xe=(Nt[2]||0)*this.pixelsPerMeter;return[$n,pt,xe]}},{key:"unprojectPosition",value:function(Nt){var An=this.unprojectFlat(Nt),In=(0,Ae.Z)(An,2),$n=In[0],pt=In[1],xe=(Nt[2]||0)/this.pixelsPerMeter;return[$n,pt,xe]}},{key:"projectFlat",value:function(Nt){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Nt}},{key:"unprojectFlat",value:function(Nt){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Nt}}]),pn}();function U(pn){var vt=pn.width,Nt=pn.height,An=pn.bounds,In=pn.minExtent,$n=In===void 0?0:In,pt=pn.maxZoom,xe=pt===void 0?24:pt,Fe=pn.padding,st=Fe===void 0?0:Fe,It=pn.offset,Mt=It===void 0?[0,0]:It,wn=(0,Ae.Z)(An,2),rr=(0,Ae.Z)(wn[0],2),Er=rr[0],qn=rr[1],Me=(0,Ae.Z)(wn[1],2),Te=Me[0],ke=Me[1];if(Number.isFinite(st)){var at=st;st={top:at,bottom:at,left:at,right:at}}else Re(Number.isFinite(st.top)&&Number.isFinite(st.bottom)&&Number.isFinite(st.left)&&Number.isFinite(st.right));var At=new he({width:vt,height:Nt,longitude:0,latitude:0,zoom:0}),nn=At.project([Er,ke]),cn=At.project([Te,qn]),Et=[Math.max(Math.abs(cn[0]-nn[0]),$n),Math.max(Math.abs(cn[1]-nn[1]),$n)],Qt=[vt-st.left-st.right-Math.abs(Mt[0])*2,Nt-st.top-st.bottom-Math.abs(Mt[1])*2];Re(Qt[0]>0&&Qt[1]>0);var Qn=Qt[0]/Et[0],Sr=Qt[1]/Et[1],Zr=(st.right-st.left)/2/Qn,yr=(st.bottom-st.top)/2/Sr,Wr=[(cn[0]+nn[0])/2+Zr,(cn[1]+nn[1])/2+yr],Ei=At.unproject(Wr),yi=At.zoom+Math.log2(Math.abs(Math.min(Qn,Sr)));return{longitude:Ei[0],latitude:Ei[1],zoom:Math.min(yi,xe)}}var he=function(pn){(0,ft.Z)(vt,pn);function vt(){var Nt,An=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},In=An.width,$n=An.height,pt=An.latitude,xe=pt===void 0?0:pt,Fe=An.longitude,st=Fe===void 0?0:Fe,It=An.zoom,Mt=It===void 0?0:It,wn=An.pitch,rr=wn===void 0?0:wn,Er=An.bearing,qn=Er===void 0?0:Er,Me=An.altitude,Te=Me===void 0?1.5:Me,ke=An.nearZMultiplier,at=An.farZMultiplier;(0,et.Z)(this,vt),In=In||1,$n=$n||1;var At=yn(Mt);Te=Math.max(.75,Te);var nn=lr([st,xe],At);nn[2]=0;var cn=Pt({width:In,height:$n,pitch:rr,bearing:qn,altitude:Te,nearZMultiplier:ke||1/$n,farZMultiplier:at||1.01}),Et=Xn({height:$n,center:nn,pitch:rr,bearing:qn,altitude:Te,flipY:!0});return Nt=(0,wt.Z)(this,(0,gt.Z)(vt).call(this,{width:In,height:$n,viewMatrix:Et,projectionMatrix:cn})),Nt.latitude=xe,Nt.longitude=st,Nt.zoom=Mt,Nt.pitch=rr,Nt.bearing=qn,Nt.altitude=Te,Nt.scale=At,Nt.center=nn,Nt.pixelsPerMeter=en((0,Pe.Z)((0,Pe.Z)(Nt))).pixelsPerMeter[2],Object.freeze((0,Pe.Z)((0,Pe.Z)(Nt))),Nt}return(0,tt.Z)(vt,[{key:"projectFlat",value:function(An){var In=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return lr(An,In)}},{key:"unprojectFlat",value:function(An){var In=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return or(An,In)}},{key:"getMapCenterByLngLatPosition",value:function(An){var In=An.lngLat,$n=An.pos,pt=je($n,this.pixelUnprojectionMatrix),xe=lr(In,this.scale),Fe=mt.IH([],xe,mt.tk([],pt)),st=mt.IH([],this.center,Fe);return or(st,this.scale)}},{key:"getLocationAtPoint",value:function(An){var In=An.lngLat,$n=An.pos;return this.getMapCenterByLngLatPosition({lngLat:In,pos:$n})}},{key:"fitBounds",value:function(An){var In=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$n=this.width,pt=this.height,xe=U(Object.assign({width:$n,height:pt,bounds:An},In)),Fe=xe.longitude,st=xe.latitude,It=xe.zoom;return new vt({width:$n,height:pt,longitude:Fe,latitude:st,zoom:It})}}]),vt}(Ut);class ot{constructor(){(0,G.Z)(this,"viewport",void 0)}syncWithMapCamera(vt){const{center:Nt,zoom:An,pitch:In,bearing:$n,viewportHeight:pt,viewportWidth:xe}=vt;this.viewport=new he({width:xe,height:pt,longitude:Nt&&Nt[0],latitude:Nt&&Nt[1],zoom:An,pitch:In,bearing:$n})}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(vt,Nt){return this.viewport.projectFlat(vt,Nt)}}const de=["id","attributionControl","style","token","rotation","mapInstance"];function qt(pn,vt){var Nt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,An=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Nt||An)&&(vt||(vt=document),!!vt)){var In=vt.head||vt.getElementsByTagName("head")[0];if(!In){In=vt.createElement("head");var $n=vt.body||vt.getElementsByTagName("body")[0];$n?$n.parentNode.insertBefore(In,$n):vt.documentElement.appendChild(In)}var pt=vt.createElement("style");return pt.type="text/css",pt.styleSheet?pt.styleSheet.cssText=pn:pt.appendChild(vt.createTextNode(pn)),In.appendChild(pt),pt}}qt(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=ae();let ln=0;const mn="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";class Dn extends be{constructor(...vt){super(...vt),(0,G.Z)(this,"version","MAPBOX"),(0,G.Z)(this,"viewport",void 0)}getType(){return"mapbox"}lngLatToCoord(vt,Nt={x:0,y:0,z:0}){const{x:An,y:In}=this.lngLatToMercator(vt,0);return[An-Nt.x,In-Nt.y]}lngLatToMercator(vt,Nt){const{x:An=0,y:In=0,z:$n=0}=window.mapboxgl.MercatorCoordinate.fromLngLat(vt,Nt);return{x:An,y:In,z:$n}}getModelMatrix(vt,Nt,An,In=[1,1,1],$n={x:0,y:0,z:0}){const pt=window.mapboxgl.MercatorCoordinate.fromLngLat(vt,Nt),xe=pt.meterInMercatorCoordinateUnits(),Fe=se.create();return se.translate(Fe,Fe,ce.al(pt.x-$n.x,pt.y-$n.y,pt.z||0-$n.z)),se.scale(Fe,Fe,ce.al(xe*In[0],-xe*In[1],xe*In[2])),se.rotateX(Fe,Fe,An[0]),se.rotateY(Fe,Fe,An[1]),se.rotateZ(Fe,Fe,An[2]),Fe}init(){var vt=this;return(0,$.Z)(function*(){const Nt=vt.config,{id:An="map",attributionControl:In=!1,style:$n="light",token:pt=mn,rotation:xe=0,mapInstance:Fe}=Nt,st=(0,fe.Z)(Nt,de);vt.viewport=new ot,!Fe&&!window.mapboxgl&&console.error(vt.configService.getSceneWarninfo("SDK")),pt===mn&&$n!=="blank"&&!window.mapboxgl.accessToken&&!Fe&&console.warn(vt.configService.getSceneWarninfo("MapToken")),!Fe&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=pt),Fe?(vt.map=Fe,vt.$mapContainer=vt.map.getContainer()):(vt.$mapContainer=vt.creatMapContainer(An),vt.map=new window.mapboxgl.Map((0,q.Z)({container:vt.$mapContainer,style:vt.getMapStyleValue($n),attributionControl:In,bearing:xe},st))),vt.map.on("load",()=>{vt.handleCameraChanged()}),vt.map.on("move",vt.handleCameraChanged),vt.handleCameraChanged()})()}destroy(){var vt;(vt=this.$mapContainer)===null||vt===void 0||(vt=vt.parentNode)===null||vt===void 0||vt.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(vt,...Nt){this.eventEmitter.emit(vt,...Nt)}once(vt,...Nt){this.eventEmitter.once(vt,...Nt)}getMapContainer(){return this.$mapContainer}getCanvasOverlays(){var vt;return(vt=this.getMapContainer())===null||vt===void 0?void 0:vt.querySelector(".mapboxgl-canvas-container")}meterToCoord(vt,Nt){const An=new(ae()).LngLat(vt[0],vt[1]),In=new(ae()).LngLat(Nt[0],Nt[1]),$n=An.distanceTo(In),pt=ae().MercatorCoordinate.fromLngLat({lng:vt[0],lat:vt[1]}),xe=ae().MercatorCoordinate.fromLngLat({lng:Nt[0],lat:Nt[1]}),{x:Fe,y:st}=pt,{x:It,y:Mt}=xe;return Math.sqrt(Math.pow(Fe-It,2)+Math.pow(st-Mt,2))*4194304*2/$n}exportMap(vt){const Nt=this.map.getCanvas();return vt==="jpg"?Nt==null?void 0:Nt.toDataURL("image/jpeg"):Nt==null?void 0:Nt.toDataURL("image/png")}creatMapContainer(vt){let Nt=vt;typeof vt=="string"&&(Nt=document.getElementById(vt));const An=document.createElement("div");return An.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,An.id="l7_mapbox_div"+ln++,Nt.appendChild(An),An}}function Yn(pn,vt){var Nt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,An=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Nt||An)&&(vt||(vt=document),!!vt)){var In=vt.head||vt.getElementsByTagName("head")[0];if(!In){In=vt.createElement("head");var $n=vt.body||vt.getElementsByTagName("body")[0];$n?$n.parentNode.insertBefore(In,$n):vt.documentElement.appendChild(In)}var pt=vt.createElement("style");return pt.type="text/css",pt.styleSheet?pt.styleSheet.cssText=pn:pt.appendChild(vt.createTextNode(pn)),In.appendChild(pt),pt}}Yn(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);class Kn extends E{getServiceConstructor(){return Dn}}},4771:function(){},66366:function(_t,W,D){"use strict";D.d(W,{SO:function(){return q},z6:function(){return _h},a5:function(){return G},SA:function(){return E},nx:function(){return th},Z:function(){return al},rQ:function(){return De},bV:function(){return tn},zi:function(){return mt},ds:function(){return yu},oO:function(){return au},SI:function(){return np},Rx:function(){return jf},W0:function(){return Ge},LS:function(){return $a},Z6:function(){return Dt},We:function(){return Gt},Co:function(){return ut},hj:function(){return Zt},Cl:function(){return yt},Oc:function(){return Tn},M4:function(){return Le},NJ:function(){return yn},ks:function(){return tt},Ol:function(){return Sd},fj:function(){return en},Yu:function(){return gt},ZB:function(){return or},gJ:function(){return Ze},z0:function(){return df},jG:function(){return Vf},M8:function(){return Xh},fg:function(){return ri},if:function(){return Ct},vP:function(){return Yi},lodashUtil:function(){return Qt},LF:function(){return ee},Fv:function(){return af},yA:function(){return of},CI:function(){return qe}});var q={};D.r(q),D.d(q,{DPR:function(){return Wt},addClass:function(){return wr},addStyle:function(){return dn},appendElementType:function(){return Wi},clearChildren:function(){return hr},create:function(){return Ei},css2Style:function(){return _n},empty:function(){return Ci},findParentElement:function(){return Qi},getClass:function(){return Si},getContainer:function(){return Sr},getDiffRect:function(){return Cn},getStyleList:function(){return Fn},getViewPortScale:function(){return dt},hasClass:function(){return pi},printCanvas:function(){return Ke},remove:function(){return yi},removeClass:function(){return Ai},removeStyle:function(){return Bn},setChecked:function(){return pr},setClass:function(){return _i},setTransform:function(){return go},setUnDraggable:function(){return ni},splitWords:function(){return yr},toggleClass:function(){return Bo},triggerResize:function(){return jo},trim:function(){return Zr}});var G={};D.r(G),D.d(G,{getColumn:function(){return pe},getSatByColumn:function(){return Je},max:function(){return _u},mean:function(){return Cc},min:function(){return Wc},mode:function(){return we},statMap:function(){return oe},sum:function(){return Mu}});var E={REGISTERED_PROTOCOLS:{}},fe=Object.defineProperty,$=Object.defineProperties,se=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,He=(ue,We,xt)=>We in ue?fe(ue,We,{enumerable:!0,configurable:!0,writable:!0,value:xt}):ue[We]=xt,J=(ue,We)=>{for(var xt in We||(We={}))ye.call(We,xt)&&He(ue,xt,We[xt]);if(ce)for(var xt of ce(We))ae.call(We,xt)&&He(ue,xt,We[xt]);return ue},me=(ue,We)=>$(ue,se(We)),Oe=ue=>E.REGISTERED_PROTOCOLS[ue.substring(0,ue.indexOf("://"))],Q=class extends Error{constructor(ue,We,xt,Pn){super(`AJAXError: ${We} (${ue}): ${xt}`),this.status=ue,this.statusText=We,this.url=xt,this.body=Pn}};function le(ue,We){const xt=new XMLHttpRequest,Pn=Array.isArray(ue.url)?ue.url[0]:ue.url;xt.open(ue.method||"GET",Pn,!0),ue.type==="arrayBuffer"&&(xt.responseType="arraybuffer");for(const ur in ue.headers)ue.headers.hasOwnProperty(ur)&&xt.setRequestHeader(ur,ue.headers[ur]);return ue.type==="json"&&(xt.responseType="text",xt.setRequestHeader("Accept","application/json")),xt.withCredentials=ue.credentials==="include",xt.onerror=()=>{We(new Error(xt.statusText))},xt.onload=()=>{if((xt.status>=200&&xt.status<300||xt.status===0)&&xt.response!==null){let ur=xt.response;if(ue.type==="json")try{ur=JSON.parse(xt.response)}catch(Br){return We(Br)}We(null,ur,xt.getResponseHeader("Cache-Control"),xt.getResponseHeader("Expires"),xt)}else{const ur=new Blob([xt.response],{type:xt.getResponseHeader("Content-Type")});We(new Q(xt.status,xt.statusText,Pn.toString(),ur))}},xt.cancel=xt.abort,xt.send(ue.body),xt}function ee(ue){return new Promise((We,xt)=>{le(ue,(Pn,ur,Br,fi,Ii)=>{Pn?xt({err:Pn,data:null,xhr:Ii}):We({err:null,data:ur,cacheControl:Br,expires:fi,xhr:Ii})})})}function be(ue,We){return le(ue,We)}var et=(ue,We)=>(Oe(ue.url)||be)(me(J({},ue),{type:"json"}),We),tt=(ue,We)=>(Oe(ue.url)||be)(me(J({},ue),{type:"arrayBuffer"}),We),wt=(ue,We)=>be(me(J({},ue),{method:"POST"}),We),gt=(ue,We)=>be(me(J({},ue),{method:"GET"}),We);function ft(ue){const We=window.document.createElement("a");return We.href=ue,We.protocol===window.document.location.protocol&&We.host===window.document.location.host}var Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ae(ue,We){const xt=new window.Image,Pn=window.URL||window.webkitURL;xt.crossOrigin="anonymous",xt.onload=()=>{We(null,xt),Pn.revokeObjectURL(xt.src),xt.onload=null,window.requestAnimationFrame(()=>{xt.src=Pe})},xt.onerror=()=>We(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ur=new Blob([new Uint8Array(ue)],{type:"image/png"});xt.src=ue.byteLength?Pn.createObjectURL(ur):Pe}function Be(ue,We){const xt=new Blob([new Uint8Array(ue)],{type:"image/png"});createImageBitmap(xt).then(Pn=>{We(null,Pn)}).catch(Pn=>{We(new Error(`Could not load image because of ${Pn.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var Ze=(ue,We,xt)=>{const Pn=(ur,Br)=>{if(ur)We(ur);else if(Br){const fi=typeof createImageBitmap=="function",Ii=xt?xt(Br):Br;fi?Be(Ii,We):Ae(Ii,We)}};return ue.type==="json"?et(ue,Pn):tt(ue,Pn)},ut=(ue,We)=>{typeof createImageBitmap=="function"?Be(ue,We):Ae(ue,We)},tn=(ue=>(ue.CENTER="center",ue.TOP="top",ue["TOP-LEFT"]="top-left",ue["TOP-RIGHT"]="top-right",ue.BOTTOM="bottom",ue["BOTTOM-LEFT"]="bottom-left",ue["BOTTOM-RIGHT"]="bottom-right",ue.LEFT="left",ue.RIGHT="right",ue))(tn||{}),De={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function mt(ue,We,xt){const Pn=ue.classList;for(const ur in De)De.hasOwnProperty(ur)&&Pn.remove(`l7-${xt}-anchor-${ur}`);Pn.add(`l7-${xt}-anchor-${We}`)}var Re=D(37620);function nt(ue){return typeof ue=="string"?!!d3.color(ue):!1}function qe(ue){const We=Re.ZP(ue),xt=[0,0,0,0];return We!=null&&(xt[0]=We.r/255,xt[1]=We.g/255,xt[2]=We.b/255,xt[3]=We.opacity),xt}function Ge(ue){const We=ue&&ue[0],xt=ue&&ue[1],Pn=ue&&ue[2];return We+xt*256+Pn*65536-1}function Dt(ue){return[ue+1&255,ue+1>>8&255,ue+1>>8>>8&255]}function yt(ue){let We=window.document.createElement("canvas"),xt=We.getContext("2d");We.width=256,We.height=1;let Pn=null;const ur=xt.createLinearGradient(0,0,256,1),Br=ue.positions[0],fi=ue.positions[ue.positions.length-1];for(let Ii=0;Ii<ue.colors.length;++Ii){const Xo=(ue.positions[Ii]-Br)/(fi-Br);ur.addColorStop(Xo,ue.colors[Ii])}return xt.fillStyle=ur,xt.fillRect(0,0,256,1),Pn=new Uint8ClampedArray(xt.getImageData(0,0,256,1).data),We=null,xt=null,{data:Pn,width:256,height:1}}function Le(ue,We){let xt=window.document.createElement("canvas"),Pn=xt.getContext("2d");xt.width=256,xt.height=1;const ur=Pn.createLinearGradient(0,0,256,1),Br=We[1]-We[0];for(let Xo=0;Xo<ue.colors.length;++Xo){const Wo=Math.max((ue.positions[Xo]-We[0])/Br,0);ur.addColorStop(Wo,ue.colors[Xo])}Pn.fillStyle=ur,Pn.fillRect(0,0,256,1);const fi=Pn.getImageData(0,0,256,1).data,Ii=lr(Pn,fi);return xt=null,Pn=null,Ii}function Zt(ue){let We=window.document.createElement("canvas"),xt=We.getContext("2d");We.width=256,We.height=1;const Pn=xt.createImageData(256,1);return Pn.data.fill(0),ue.positions.forEach((ur,Br)=>{const fi=qe(ue.colors[Br]);Pn.data[ur*4+0]=fi[0]*255,Pn.data[ur*4+1]=fi[1]*255,Pn.data[ur*4+2]=fi[2]*255,Pn.data[ur*4+3]=fi[3]*255}),We=null,xt=null,Pn}function yn(ue){let We=window.document.createElement("canvas"),xt=We.getContext("2d");xt.globalAlpha=1,We.width=256,We.height=1;const Pn=256/ue.colors.length;for(let fi=0;fi<ue.colors.length;fi++)xt.beginPath(),xt.lineWidth=2,xt.strokeStyle=ue.colors[fi],xt.moveTo(fi*Pn,0),xt.lineTo((fi+1)*Pn,0),xt.stroke();const ur=xt.getImageData(0,0,256,1).data,Br=lr(xt,ur);return We=null,xt=null,Br}function Tn(ue,We){let xt=window.document.createElement("canvas"),Pn=xt.getContext("2d");Pn.globalAlpha=1,xt.width=256,xt.height=1;const ur=We[1]-We[0];ue.positions.length-ue.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(let Ii=0;Ii<ue.colors.length;Ii++)Pn.beginPath(),Pn.lineWidth=2,Pn.strokeStyle=ue.colors[Ii],Pn.moveTo((ue.positions[Ii]-We[0])/ur*255,0),Pn.lineTo((ue.positions[Ii+1]-We[0])/ur*255,0),Pn.stroke();const Br=Pn.getImageData(0,0,256,1).data,fi=lr(Pn,Br);return xt=null,Pn=null,fi}function lr(ue,We){const xt=ue.createImageData(256,1);for(let Pn=0;Pn<xt.data.length;Pn+=4)xt.data[Pn+0]=We[Pn+0],xt.data[Pn+1]=We[Pn+1],xt.data[Pn+2]=We[Pn+2],xt.data[Pn+3]=We[Pn+3];return xt}function or(ue){switch(ue==null?void 0:ue.type){case"cat":return[0,255];default:return[0,1]}}var Lt={BACK:1029,FRONT:1028};function en(ue){switch(ue){case"GAODE1.x":return Lt.BACK;case"GAODE2.x":return Lt.BACK;case"MAPBOX":return Lt.FRONT;case"SIMPLE":return Lt.FRONT;case"GLOBEL":return Lt.BACK;case"DEBAULT":return Lt.FRONT;default:return Lt.FRONT}}var hn=D(74691),Xn=D.n(hn),an=D(50361),Pt=D.n(an),zt=D(23279),je=D.n(zt),rt=D(27361),Ut=D.n(rt),U=D(51584),he=D.n(U),ot=D(18446),de=D.n(ot),qt=D(14293),ln=D.n(qt),mn=D(81763),Dn=D.n(mn),Yn=D(68630),Kn=D.n(Yn),pn=D(47037),vt=D.n(pn),Nt=D(36719),An=D.n(Nt),In=D(82492),$n=D.n(In),pt=D(30236),xe=D.n(pt),Fe=D(97019),st=D.n(Fe),It=D(23493),Mt=D.n(It),wn=D(44908),rr=D.n(wn),Er=D(11700),qn=D.n(Er),Me=D(23560),Te=D.n(Me),ke=D(13218),at=D.n(ke),At=D(52353),nn=D.n(At),cn=D(68929),Et=D.n(cn),Qt={isNil:ln(),merge:$n(),throttle:Mt(),isString:vt(),debounce:je(),pull:st(),isTypedArray:An(),isPlainObject:Kn(),isNumber:Dn(),isBoolean:he(),isEqual:de(),cloneDeep:Pt(),uniq:rr(),clamp:Xn(),upperFirst:qn(),get:Ut(),mergeWith:xe(),isFunction:Te(),isObject:at(),isUndefined:nn(),camelCase:Et()},{pull:Qn}=Qt;function Sr(ue){let We=ue;return typeof ue=="string"&&(We=window.document.getElementById(ue)),We}function Zr(ue){return ue.trim?ue.trim():ue.replace(/^\s+|\s+$/g,"")}function yr(ue){return Zr(ue).split(/\s+/)}function Wr(ue){var We;const xt=(We=document==null?void 0:document.documentElement)==null?void 0:We.style;if(!xt)return ue[0];for(const Pn in ue)if(ue[Pn]&&ue[Pn]in xt)return ue[Pn];return ue[0]}function Ei(ue,We,xt){const Pn=window.document.createElement(ue);return We&&(Pn.className=We||""),xt&&xt.appendChild(Pn),Pn}function yi(ue){const We=ue.parentNode;We&&We.removeChild(ue)}function wr(ue,We){if(ue.classList!==void 0){const xt=yr(We);for(let Pn=0,ur=xt.length;Pn<ur;Pn++)ue.classList.add(xt[Pn])}else if(!pi(ue,We)){const xt=Si(ue);_i(ue,(xt?xt+" ":"")+We)}}function Ai(ue,We){ue.classList!==void 0?yr(We).forEach(Pn=>{ue.classList.remove(Pn)}):_i(ue,Zr((" "+Si(ue)+" ").replace(" "+We+" "," ")))}function pi(ue,We){if(ue.classList!==void 0)return ue.classList.contains(We);const xt=Si(ue);return xt.length>0&&new RegExp("(^|\\s)"+We+"(\\s|$)").test(xt)}function _i(ue,We){ue instanceof HTMLElement?ue.className=We:ue.className.baseVal=We}function Bo(ue,We,xt){xt===void 0?pi(ue,We)?Ai(ue,We):wr(ue,We):xt?wr(ue,We):Ai(ue,We)}function Si(ue){return ue instanceof SVGElement&&(ue=ue.correspondingElement),ue.className.baseVal===void 0?ue.className:ue.className.baseVal}function Ci(ue){for(;ue&&ue.firstChild;)ue.removeChild(ue.firstChild)}var ho=Wr(["transform","WebkitTransform"]);function go(ue,We){ue.style[ho]=We}function jo(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{const ue=window.document.createEvent("UIEvents");ue.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(ue)}}function Ke(ue){const We=["padding: "+(ue.height/2-8)+"px "+ue.width/2+"px;","line-height: "+ue.height+"px;","background-image: url("+ue.toDataURL()+");"];console.log(`%c
`,We.join(""))}function dt(){var ue;const We=window.document.querySelector('meta[name="viewport"]');if(!We)return 1;const Pn=((ue=We.content)==null?void 0:ue.split(",")).find(ur=>{const[Br]=ur.split("=");return Br==="initial-scale"});return Pn?Pn.split("=")[1]*1:1}var Wt=dt()<1?1:window.devicePixelRatio;function dn(ue,We){ue.setAttribute("style",`${ue.style.cssText}${We}`)}function Fn(ue){return ue.split(";").map(We=>We.trim()).filter(We=>We)}function Bn(ue,We){var xt;const Pn=Fn((xt=ue.getAttribute("style"))!=null?xt:""),ur=Fn(We),Br=Qn(Pn,...ur);ue.setAttribute("style",Br.join(";"))}function _n(ue){return Object.entries(ue).map(([We,xt])=>`${We}: ${xt}`).join(";")}function Cn(ue,We){return{left:ue.left-We.left,top:ue.top-We.top,right:We.left+We.width-ue.left-ue.width,bottom:We.top+We.height-ue.top-ue.height}}function pr(ue,We){ue.checked=We,We?ue.setAttribute("checked","true"):ue.removeAttribute("checked")}function hr(ue){ue.innerHTML=""}function ni(ue){ue.setAttribute("draggable","false")}function Wi(ue,We){if(typeof We=="string"){const xt=document.createElement("div");for(xt.innerHTML=We;xt.firstChild;)ue.append(xt.firstChild)}else Array.isArray(We)?ue.append(...We):ue.append(We)}function Qi(ue,We){var xt;const Pn=Array.isArray(We)?We:[We];let ur=ue;for(;ur instanceof Element&&ur!==window.document.body;){if(Pn.find(Br=>ur==null?void 0:ur.matches(Br)))return ur;ur=(xt=ur==null?void 0:ur.parentElement)!=null?xt:null}}function ri(ue){return typeof ImageBitmap!="undefined"&&ue instanceof ImageBitmap}function Gi(){return typeof importScripts=="function"}var zi=Gi()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,qr=navigator==null?void 0:navigator.userAgent,To=!!qr.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),di=qr.indexOf("Android")>-1||qr.indexOf("Adr")>-1;function So(){const ue=qr,We=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let xt=!0;for(const Pn of We)if(ue.indexOf(Pn)>0){xt=!1;break}return xt}function Zi(ue,We){ue.forEach(xt=>{We[xt]&&(We[xt]=We[xt].bind(We))})}var io=class{constructor(ue=16){this.duration=16,this.timestamp=new Date().getTime(),this.duration=ue}run(ue){const We=new Date().getTime(),xt=We-this.timestamp;this.timestamp=We,xt>=this.duration&&ue()}},Mo=D(39034);function gs(ue){var We=[1/0,1/0,-1/0,-1/0];return(0,Mo.pZ)(ue,function(xt){We[0]>xt[0]&&(We[0]=xt[0]),We[1]>xt[1]&&(We[1]=xt[1]),We[2]<xt[0]&&(We[2]=xt[0]),We[3]<xt[1]&&(We[3]=xt[1])}),We}gs.default=gs;var ya=gs,ia=D(1449);function ps(ue){return typeof ue=="number"}var os=2*Math.PI*6378137/2;function Ct(ue,We){const[xt,Pn,ur,Br]=We;return ue.lng>xt&&ue.lng<=ur&&ue.lat>Pn&&ue.lat<=Br}function Gt(ue){const We=[1/0,1/0,-1/0,-1/0];return ue.forEach(xt=>{const{coordinates:Pn}=xt;Un(We,Pn)}),We}function Un(ue,We){return Array.isArray(We[0])?We.forEach(xt=>{Un(ue,xt)}):(ue[0]>We[0]&&(ue[0]=We[0]),ue[1]>We[1]&&(ue[1]=We[1]),ue[2]<We[0]&&(ue[2]=We[0]),ue[3]<We[1]&&(ue[3]=We[1])),ue}function Fr(ue,We){return Oi(ue,We)}function Oi(ue,We){return Array.isArray(ue[0])?ue.map(xt=>Oi(xt,We)):We(ue)}function Yi(ue,We=!0,xt={enable:!0,decimal:1}){ue=Is(ue,We);const Pn=ue[0],ur=ue[1];let Br=Pn*os/180,fi=Math.log(Math.tan((90+ur)*Math.PI/360))/(Math.PI/180);return fi=fi*os/180,xt.enable&&(Br=Number(Br.toFixed(xt.decimal)),fi=Number(fi.toFixed(xt.decimal))),ue.length===3?[Br,fi,ue[2]]:[Br,fi]}function ea(ue,We=6){const xt=ue[0],Pn=ue[1];let ur=xt/os*180,Br=Pn/os*180;return Br=180/Math.PI*(2*Math.atan(Math.exp(Br*Math.PI/180))-Math.PI/2),We!=null&&(ur=Number(ur.toFixed(We)),Br=Number(Br.toFixed(We))),ue.length===3?[ur,Br,ue[2]]:[ur,Br]}function Ns(ue){if(ue==null)throw new Error("lng is required");return(ue>180||ue<-180)&&(ue=ue%360,ue>180&&(ue=-360+ue),ue<-180&&(ue=360+ue),ue===0&&(ue=0)),ue}function As(ue){if(ue==null)throw new Error("lat is required");return(ue>90||ue<-90)&&(ue=ue%180,ue>90&&(ue=-180+ue),ue<-90&&(ue=180+ue),ue===0&&(ue=0)),ue}function Is(ue,We){if(We===!1)return ue;const xt=Ns(ue[0]);let Pn=As(ue[1]);return Pn>85&&(Pn=85),Pn<-85&&(Pn=-85),ue.length===3?[xt,Pn,ue[2]]:[xt,Pn]}function al(ue){const We=85.0511287798,xt=Math.max(Math.min(We,ue[1]),-We),Pn=256<<20;let ur=Math.PI/180,Br=ue[0]*ur,fi=xt*ur;fi=Math.log(Math.tan(Math.PI/4+fi/2));const Ii=.5/Math.PI,Xo=.5,Wo=-.5/Math.PI;return ur=.5,Br=Pn*(Ii*Br+Xo),fi=Pn*(Wo*fi+ur),[Math.floor(Br),Math.floor(fi)]}function Gh(ue){const We=.5/Math.PI,xt=.5,Pn=-.5/Math.PI;let ur=.5;const Br=256<<20;let[fi,Ii]=ue;fi=(fi/Br-xt)/We,Ii=(Ii/Br-ur)/Pn,Ii=(Math.atan(Math.pow(Math.E,Ii))-Math.PI/4)*2,ur=Math.PI/180;const Xo=Ii/ur;return[fi/ur,Xo]}function Op(ue,We){const xt=85.0511287798,Pn=Math.PI/180,ur=6378137;return We=Math.max(Math.min(xt,We),-xt),ue*=Pn,We*=Pn,We=Math.log(Math.tan(Math.PI/4+We/2)),[ue*ur,We*ur]}function Kf(ue,We){const xt=Math.PI/180,Pn=6378137,ur=ue/Pn/xt,Br=2*(Math.atan(Math.exp(We/Pn))-Math.PI/4)/xt;return[ur,Br]}function ou(ue,We,xt){const Pn=degreesToRadians(We[1]-ue[1]),ur=degreesToRadians(We[0]-ue[0]),Br=degreesToRadians(ue[1]),fi=degreesToRadians(We[1]),Ii=Math.pow(Math.sin(Pn/2),2)+Math.pow(Math.sin(ur/2),2)*Math.cos(Br)*Math.cos(fi);return radiansToLength(2*Math.atan2(Math.sqrt(Ii),Math.sqrt(1-Ii)),xt="meters")}function Uf(ue){const We=Math.PI/180,xt=85.0511287798,Pn=6378137,ur=Math.max(Math.min(xt,ue[1]),-xt),Br=Math.sin(ur*We),fi=Pn*ue[0]*We,Ii=Pn*Math.log((1+Br)/(1-Br))/2;return[fi,Ii]}function of(ue,We){const xt=Math.abs(ue[1][1]-ue[0][1])*We,Pn=Math.abs(ue[1][0]-ue[0][0])*We;return[[ue[0][0]-Pn,ue[0][1]-xt],[ue[1][0]+Pn,ue[1][1]+xt]]}function au(ue,We){return ue[0][0]<=We[0][0]&&ue[0][1]<=We[0][1]&&ue[1][0]>=We[1][0]&&ue[1][1]>=We[1][1]}function yu(ue){return[[ue[0],ue[1]],[ue[2],ue[3]]]}function af(ue){const We=Sf(ue,[0,0]);return[ue[0]/We,ue[1]/We]}function Sf(ue,We){return Math.sqrt(Math.pow(ue[0]-We[0],2)+Math.pow(ue[1]-We[1],2))}function Ou(ue,We){return ue[0]*We[0]+ue[1]*We[1]}function xs(ue){return Math.sqrt(ue[0]*ue[0]+ue[1]*ue[1])}function tc(ue,We){return Math.acos(Ou(ue,We)/(xs(ue)*xs(We)))*180/Math.PI}function sf(ue,We){return We[0]>0?We[1]>0?90-Math.atan(We[1]/We[0])*180/Math.PI:90+Math.atan(-We[1]/We[0])*180/Math.PI:We[1]<0?180+(90-Math.atan(We[1]/We[0])*180/Math.PI):270+Math.atan(We[1]/-We[0])*180/Math.PI}function Ed(ue,We=100){if(!ue||ue.length<2)return;const xt=[0,1];let Pn=0;const ur=[];for(let Br=0;Br<ue.length-1;Br++){const fi=ue[Br],Ii=ue[Br+1],Xo=Sf(fi,Ii);Pn+=Xo;const Wo=[fi[0]-Ii[0],fi[1]-Ii[1]];let da=sf(xt,Wo);if(Br>0){const $s=ur[Br-1].rotation;$s-da>360-$s+da&&(da=da+360)}ur.push({start:fi,end:Ii,dis:Xo,rotation:da,duration:0})}return ur.map(Br=>{Br.duration=We*(Br.dis/Pn)}),ur}function np(ue){if(ps(ue[0]))return ue;if(ps(ue[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(ps(ue[0][0][0])){const We=ue;let xt=0,Pn=0,ur=0;return We.forEach(Br=>{Br.forEach(fi=>{xt+=fi[0],Pn+=fi[1],ur++})}),[xt/ur,Pn/ur,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function jf(ue){let We=ue[0],xt=ue[1],Pn=ue[0],ur=ue[1],Br=0,fi=0,Ii=0;for(let Xo=0;Xo<ue.length;Xo+=2){const Wo=ue[Xo],da=ue[Xo+1];Wo&&da&&(We=Math.max(Wo,We),xt=Math.max(da,xt),Pn=Math.min(Wo,Pn),ur=Math.min(da,ur),Br+=Wo,fi+=da,Ii++)}return{center:[Br/Ii,fi/Ii],radius:Math.sqrt(Math.pow(We-Pn,2)+Math.pow(xt-ur,2))/2}}function Sd(ue){return ya((0,ia.uf)([(0,ia.Tu)(ue)]))}function yh(ue){let Pn=0;ue+="x";const ur=Math.floor(9007199254740991/137);for(let Br=0;Br<ue.length;Br++)Pn>ur&&(Pn=Math.floor(Pn/137)),Pn=Pn*131+ue.charCodeAt(Br);return Pn}function Zh(ue){ue=ue.toString();let We=5381,xt=ue.length;for(;xt;)We=We*33^ue.charCodeAt(--xt);return We>>>0}function Xh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,ue=>{const We=Math.random()*16|0;return(ue==="x"?We:We&3|8).toString(16)})}var wd=(ue=>(ue["GAODE1.x"]="GAODE1.x",ue["GAODE2.x"]="GAODE2.x",ue.MAPBOX="MAPBOX",ue.DEFAULT="DEFAUlTMAP",ue.SIMPLE="SIMPLE",ue.GLOBEL="GLOBEL",ue))(wd||{});function Qp(ue,We,xt,Pn,ur,Br=30,fi){let Ii=xt;return fi&&(Ii=Math.round(xt*(Br-1))/(Br-1)),Pn?jl(ue,We,Ii,Pn,ur):jl(ue,We,Ii,.314,ur)}function lf(ue,We){const xt=1-We;return(ue[0]*xt+ue[1]*We)*xt+(ue[1]*xt+ue[2]*We)*We}function Vc(ue,We){return Math.sqrt(Math.pow(ue[0]-We[0],2)+Math.pow(ue[1]-We[1],2))}function Td(ue,We,xt){const Pn=[We[0]-ue[0],We[1]-ue[1]],ur=Vc(Pn,[0,0]),Br=Math.atan2(Pn[1],Pn[0]),fi=ur/2/Math.cos(xt),Ii=Br+xt;return[fi*Math.cos(Ii)+ue[0],fi*Math.sin(Ii)+ue[1]]}function jl(ue,We,xt,Pn,ur){if(ur===MapType["GAODE2.x"]){const Br=amap2Project(ue[0],ue[1]),fi=amap2Project(We[0],We[1]),Ii=Td(Br,fi,Pn),Xo=[Br[0],Ii[0],fi[0]],Wo=[Br[1],Ii[1],fi[1]];return[...amap2UnProject(lf(Xo,xt),lf(Wo,xt)),0]}else{const Br=Td(ue,We,Pn),fi=[ue[0],Br[0],We[0]],Ii=[ue[1],Br[1],We[1]];return[lf(fi,xt),lf(Ii,xt),0]}}function Ac(ue,We,xt,Pn,ur,Br=30,fi){let Ii=xt;return fi&&(Ii=Math.round(xt*29)/29),hc(ue,We,Ii,ur)}function uf(ue,We){const xt=[We[0]-ue[0],We[1]-ue[1]],Pn=calDistance(xt,[0,0]),ur=Math.atan2(xt[1],xt[0]),Br=.314,fi=Pn/2/Math.cos(Br),Ii=ur+Br;return[fi*Math.cos(Ii)+ue[0],fi*Math.sin(Ii)+ue[1]]}function su(ue,We){const xt=1-We;return(ue[0]*xt+ue[1]*We)*xt+(ue[1]*xt+ue[2]*We)*We}function Hc(ue,We){const xt=[ue[0]-We[0],ue[1]-We[1]],Pn=[Math.sin(xt[0]/2),Math.sin(xt[1]/2)],ur=Pn[1]*Pn[1]+Math.cos(ue[1])*Math.cos(We[1])*Pn[0]*Pn[0];return 2*Math.atan2(Math.sqrt(ur),Math.sqrt(1-ur))}function hc(ue,We,xt,Pn){const ur=[degreesToRadians(ue[0]),degreesToRadians(ue[1])],Br=[degreesToRadians(We[0]),degreesToRadians(We[1])];if(Pn==="GAODE2.x"){const fi=uf(ur,Br),Ii=[ur[0],fi[0],Br[0]],Xo=[ur[1],fi[1],Br[1]];return[su(Ii,xt),su(Xo,xt),0]}else{const fi=Hc(ur,Br);if(Math.abs(fi-Math.PI)<.001)return[(1-xt)*ur[0]+xt*Br[0],(1-xt)*ur[1]+xt*Br[1]];const Ii=Math.sin((1-xt)*fi)/Math.sin(fi),Xo=Math.sin(xt*fi)/Math.sin(fi),Wo=[Math.sin(ur[0]),Math.sin(ur[1])],da=[Math.cos(ur[0]),Math.cos(ur[1])],$s=[Math.sin(Br[0]),Math.sin(Br[1])],Rl=[Math.cos(Br[0]),Math.cos(Br[1])],Es=Ii*da[1]*da[0]+Xo*Rl[1]*Rl[0],Ji=Ii*da[1]*Wo[0]+Xo*Rl[1]*$s[0],Pl=Ii*Wo[1]+Xo*$s[1];return[radiansToDegrees(Math.atan2(Ji,Es)),radiansToDegrees(Math.atan2(Pl,Math.sqrt(Es*Es+Ji*Ji)))]}}function wf(ue,We){let xt=0;const Pn=[];for(let Ii=0;Ii<ue.length-1;Ii++){const Xo=ue[Ii],Wo=ue[Ii+1],da=cf(Xo,Wo),$s=xt;xt+=da,Pn.push({p1:Xo,p2:Wo,totalDistance:xt,distance:da,lastTotalDistance:$s})}const ur=xt*We;let Br,fi;for(const Ii of Pn)if(Ii.totalDistance>ur){const Wo=Ii.p1,da=Ii.p2,$s=(ur-Ii.lastTotalDistance)/Ii.distance,Rl=Ml(da,Wo,$s);Br=Rl[0],fi=Rl[1];break}return{lng:Br,lat:fi,height:0}}function Ml(ue,We,xt){return[ue[0]*xt+We[0]*(1-xt),ue[1]*xt+We[1]*(1-xt)]}function cf(ue,We){return Math.sqrt(Math.pow(ue[0]-We[0],2)+Math.pow(ue[1]-We[1],2))}var Tf=Object.defineProperty,Ad=Object.getOwnPropertySymbols,Cd=Object.prototype.hasOwnProperty,ys=Object.prototype.propertyIsEnumerable,rp=(ue,We,xt)=>We in ue?Tf(ue,We,{enumerable:!0,configurable:!0,writable:!0,value:xt}):ue[We]=xt,Qf=(ue,We)=>{for(var xt in We||(We={}))Cd.call(We,xt)&&rp(ue,xt,We[xt]);if(Ad)for(var xt of Ad(We))ys.call(We,xt)&&rp(ue,xt,We[xt]);return ue};function Yh(ue,We){const{featureId:xt}=We;let Pn=ue.data.dataArray;return typeof xt=="number"&&(Pn=Pn.filter(({id:ur})=>ur===xt)),Pn.map(ur=>{const Br=$h(ur,We);return Qf(Qf({},ur),Br)})}function sl(ue,We){return new Promise(xt=>{ue.inited?xt(Yh(ue,We)):ue.once("update",()=>{xt(Yh(ue,We))})})}function $h(ue,We){const{offset:xt,shape:Pn,thetaOffset:ur,mapVersion:Br,segmentNumber:fi=30,autoFit:Ii=!0}=We,{coordinates:Xo}=ue;if(Pn==="line")return pathLineAtOffset(Xo,xt);const Wo=Xo[0],da=Xo[1],$s=typeof ur=="string"?ue[ur]||0:ur;let Rl;switch(Pn){case"arc":Rl=arcLineAtOffset;break;case"greatcircle":Rl=greatCircleLineAtOffset;break;default:Rl=arcLineAtOffset}const[Es,Ji,Pl]=Rl(Wo,da,xt,$s,Br,fi,Ii);return{lng:Es,lat:Ji,height:Pl}}var _h=class{constructor(ue=50,We){this.limit=ue,this.destroy=We||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(ue=>{this.delete(ue)}),this.cache={},this.order=[]}get(ue){const We=this.cache[ue];return We&&(this.deleteOrder(ue),this.appendOrder(ue)),We}set(ue,We){this.cache[ue]?(this.delete(ue),this.cache[ue]=We,this.appendOrder(ue)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[ue]=We,this.appendOrder(ue))}delete(ue){const We=this.cache[ue];We&&(this.deleteCache(ue),this.deleteOrder(ue),this.destroy(We,ue))}deleteCache(ue){delete this.cache[ue]}deleteOrder(ue){const We=this.order.findIndex(xt=>xt===ue);We>=0&&this.order.splice(We,1)}appendOrder(ue){this.order.push(ue)}defaultDestroy(ue,We){return null}};function _u(ue){if(ue.length===0)throw new Error("max requires at least one data point");let We=ue[0];for(let xt=1;xt<ue.length;xt++)ue[xt]>We&&(We=ue[xt]);return We*1}function Wc(ue){if(ue.length===0)throw new Error("min requires at least one data point");let We=ue[0];for(let xt=1;xt<ue.length;xt++)ue[xt]<We&&(We=ue[xt]);return We*1}function Mu(ue){if(ue.length===0)return 0;let We=ue[0]*1;for(let xt=1;xt<ue.length;xt++)We+=ue[xt]*1;return We}function Cc(ue){if(ue.length===0)throw new Error("mean requires at least one data point");return Mu(ue)/ue.length}function we(ue){if(ue.length===0)throw new Error("mean requires at least one data point");if(ue.length<3)return ue[0];ue.sort();let We=ue[0],xt=NaN,Pn=0,ur=1;for(let Br=1;Br<ue.length+1;Br++)ue[Br]!==We?(ur>Pn&&(Pn=ur,xt=We),ur=1,We=ue[Br]):ur++;return xt*1}var oe={min:Wc,max:_u,mean:Cc,sum:Mu,mode:we};function pe(ue,We){return ue.map(xt=>xt[We])}function Je(ue,We){return oe[ue](We)}function sn(ue,We){We===void 0&&(We={});var xt=Number(ue[0]),Pn=Number(ue[1]),ur=Number(ue[2]),Br=Number(ue[3]);if(ue.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var fi=[xt,Pn],Ii=[xt,Br],Xo=[ur,Br],Wo=[ur,Pn];return(0,ia.yu)([[fi,Wo,Xo,Ii,fi]],We.properties,{bbox:ue,id:We.id})}var fn=D(26729),ir=D.n(fn),Cr=(ue=>(ue.Realtime="realtime",ue.Overlap="overlap",ue.Replace="replace",ue))(Cr||{}),Xr=(ue=>(ue.Loading="Loading",ue.Loaded="Loaded",ue.Failure="Failure",ue.Cancelled="Cancelled",ue))(Xr||{}),Bi=0,bo=1,vo=2;function Na(ue){ue.forEach(We=>{We.isCurrent&&(We.isVisible=We.isLoaded)})}function Fa(ue){ue.forEach(We=>{We.properties.state=Bi}),ue.forEach(We=>{We.isCurrent&&!Aa(We)&&_a(We)}),ue.forEach(We=>{We.isVisible=!!(We.properties.state&vo)})}function Ea(ue){ue.forEach(xt=>{xt.properties.state=Bi}),ue.forEach(xt=>{xt.isCurrent&&Aa(xt)}),ue.slice().sort((xt,Pn)=>xt.z-Pn.z).forEach(xt=>{xt.isVisible=!!(xt.properties.state&vo),xt.children.length&&(xt.isVisible||xt.properties.state&bo)?xt.children.forEach(Pn=>{Pn.properties.state=bo}):xt.isCurrent&&_a(xt)})}function Aa(ue){for(;ue;){if(ue.isLoaded)return ue.properties.state|=vo,!0;ue=ue.parent}return!1}function _a(ue){ue.children.forEach(We=>{We.isLoaded?We.properties.state|=vo:_a(We)})}var Ba=256,Ca=[-1/0,-1/0,1/0,1/0],Xa=.2,ba=5,cs={[Cr.Realtime]:Na,[Cr.Overlap]:Fa,[Cr.Replace]:Ea},Ws=()=>{};function zs(ue,We,xt){const Pn=Math.floor((ue+180)/360*Math.pow(2,xt)),ur=Math.floor((1-Math.log(Math.tan(We*Math.PI/180)+1/Math.cos(We*Math.PI/180))/Math.PI)/2*Math.pow(2,xt));return[Pn,ur]}function dc(ue,We,xt){const Pn=ue/Math.pow(2,xt)*360-180,ur=Math.PI-2*Math.PI*We/Math.pow(2,xt),Br=180/Math.PI*Math.atan(.5*(Math.exp(ur)-Math.exp(-ur)));return[Pn,Br]}var dl=(ue,We,xt)=>{const[Pn,ur]=dc(ue,We,xt),[Br,fi]=dc(ue+1,We+1,xt);return[Pn,fi,Br,ur]};function ff({zoom:ue,latLonBounds:We,maxZoom:xt=1/0,minZoom:Pn=0,zoomOffset:ur=0,extent:Br=Ca}){let fi=Math.ceil(ue)+ur;if(Number.isFinite(Pn)&&fi<Pn)return[];Number.isFinite(xt)&&fi>xt&&(fi=xt);const[Ii,Xo,Wo,da]=We,$s=[Math.max(Ii,Br[0]),Math.max(Xo,Br[1]),Math.min(Wo,Br[2]),Math.min(da,Br[3])],Rl=[],[Es,Ji]=zs($s[0],$s[1],fi),[Pl,Eh]=zs($s[2],$s[3],fi);for(let vc=Es;vc<=Pl;vc++)for(let Ui=Eh;Ui<=Ji;Ui++)Rl.push({x:vc,y:Ui,z:fi});const qh=(Pl+Es)/2,Ka=(Ji+Eh)/2,Cs=(vc,Ui)=>Math.abs(vc-qh)+Math.abs(Ui-Ka);return Rl.sort((vc,Ui)=>Cs(vc.x,vc.y)-Cs(Ui.x,Ui.y)),Rl}var hf=(ue,We,xt,Pn=!0)=>{const ur=Math.pow(2,xt),Br=ur-1,fi=ur;let Ii=ue;const Xo=We;return Pn&&(Ii<0?Ii=Ii+fi:Ii>Br&&(Ii=Ii%fi)),{warpX:Ii,warpY:Xo}},pc=(ue,We,xt)=>new Promise((Pn,ur)=>{var Br=Xo=>{try{Ii(xt.next(Xo))}catch(Wo){ur(Wo)}},fi=Xo=>{try{Ii(xt.throw(Xo))}catch(Wo){ur(Wo)}},Ii=Xo=>Xo.done?Pn(Xo.value):Promise.resolve(Xo.value).then(Br,fi);Ii((xt=xt.apply(ue,We)).next())}),Gc=class extends fn.EventEmitter{constructor(ue){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:We,y:xt,z:Pn,tileSize:ur,warp:Br=!0}=ue;this.x=We,this.y=xt,this.z=Pn,this.warp=Br||!0,this.tileSize=ur}get isLoading(){return this.loadStatus===Xr.Loading}get isLoaded(){return this.loadStatus===Xr.Loaded}get isFailure(){return this.loadStatus===Xr.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===Xr.Cancelled}get isDone(){return[Xr.Loaded,Xr.Cancelled,Xr.Failure].includes(this.loadStatus)}get bounds(){return dl(this.x,this.y,this.z)}get bboxPolygon(){const[ue,We,xt,Pn]=this.bounds,ur=[(xt-ue)/2,(Pn-We)/2];return sn(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:ur,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(ue){return pc(this,arguments,function*({getData:We,onLoad:xt,onError:Pn}){this.loadDataId++;const ur=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Xr.Loading;let Br=null,fi;try{const{x:Ii,y:Xo,z:Wo,bounds:da,tileSize:$s,warp:Rl}=this,{warpX:Es,warpY:Ji}=hf(Ii,Xo,Wo,Rl),{signal:Pl}=this.abortController;Br=yield We({x:Es,y:Ji,z:Wo,bounds:da,tileSize:$s,signal:Pl,warp:Rl},this)}catch(Ii){fi=Ii}if(ur===this.loadDataId&&!(this.isCancelled&&!Br)){if(fi||!Br){this.loadStatus=Xr.Failure,Pn(fi,this);return}this.loadStatus=Xr.Loaded,this.data=Br,xt(this)}})}reloadData(ue){this.isLoading&&this.abortLoad(),this.loadData(ue)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=Xr.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},bh=(ue,We)=>{const xt=yu(ue),Pn=of(xt,We),ur=360*3-180,Br=85.0511287798065;return[Math.max(Pn[0][0],-ur),Math.max(Pn[0][1],-Br),Math.min(Pn[1][0],ur),Math.min(Pn[1][1],Br)]},Jf=(ue,We)=>{const xt=yu(ue),Pn=yu(We);return au(xt,Pn)},Mp=Object.defineProperty,ip=Object.defineProperties,Rp=Object.getOwnPropertyDescriptors,Af=Object.getOwnPropertySymbols,Pp=Object.prototype.hasOwnProperty,op=Object.prototype.propertyIsEnumerable,ap=(ue,We,xt)=>We in ue?Mp(ue,We,{enumerable:!0,configurable:!0,writable:!0,value:xt}):ue[We]=xt,eh=(ue,We)=>{for(var xt in We||(We={}))Pp.call(We,xt)&&ap(ue,xt,We[xt]);if(Af)for(var xt of Af(We))op.call(We,xt)&&ap(ue,xt,We[xt]);return ue},Ip=(ue,We)=>ip(ue,Rp(We)),{throttle:xh}=Qt,Od=(ue=>(ue.TilesLoadStart="tiles-load-start",ue.TileLoaded="tile-loaded",ue.TileError="tile-error",ue.TileUnload="tile-unload",ue.TileUpdate="tile-update",ue.TilesLoadFinished="tiles-load-finished",ue))(Od||{}),th=class extends ir(){constructor(ue){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=xh((We,xt)=>{this.update(We,xt)},16),this.onTileLoad=We=>{this.emit("tile-loaded",We),this.updateTileVisible(),this.loadFinished()},this.onTileError=(We,xt)=>{this.emit("tile-error",{error:We,tile:xt}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=We=>{this.emit("tile-unload",We),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Ca,getTileData:Ws,warp:!0,updateStrategy:Cr.Replace},this.updateOptions(ue)}get isLoaded(){return this.currentTiles.every(ue=>ue.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((We,xt)=>We.z-xt.z)}updateOptions(ue){const We=ue.minZoom===void 0?this.options.minZoom:Math.ceil(ue.minZoom),xt=ue.maxZoom===void 0?this.options.maxZoom:Math.floor(ue.maxZoom);this.options=Ip(eh(eh({},this.options),ue),{minZoom:We,maxZoom:xt})}update(ue,We){const xt=Math.max(0,Math.ceil(ue));if(this.lastViewStates&&this.lastViewStates.zoom===xt&&Jf(this.lastViewStates.latLonBoundsBuffer,We))return;const Pn=bh(We,Xa);this.lastViewStates={zoom:xt,latLonBounds:We,latLonBoundsBuffer:Pn},this.currentZoom=xt;let ur=!1;const Br=this.getTileIndices(xt,Pn).filter(fi=>this.options.warp||fi.x>=0&&fi.x<Math.pow(2,xt));this.emit("tiles-load-start"),this.currentTiles=Br.map(({x:fi,y:Ii,z:Xo})=>{let Wo=this.getTile(fi,Ii,Xo);return Wo?(((Wo==null?void 0:Wo.isFailure)||(Wo==null?void 0:Wo.isCancelled))&&Wo.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),Wo):(Wo=this.createTile(fi,Ii,Xo),ur=!0,Wo)}),ur&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[ue,We]of this.cacheTiles){if(!this.currentTiles.includes(We)){this.cacheTiles.delete(ue),this.onTileUnload(We);return}this.onTileUnload(We),We.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(ue,We,xt){const Pn=this.cacheTiles.get(`${We},${xt},${ue}`);Pn&&(this.onTileUnload(Pn),Pn.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(ue,We,xt){const Pn=this.getTileByLngLat(ue,We,xt);Pn&&this.reloadTileById(Pn.z,Pn.x,Pn.y)}reloadTileByExtent(ue,We){this.getTileIndices(We,ue).forEach(Pn=>{this.reloadTileById(Pn.z,Pn.x,Pn.y)})}pruneRequests(){const ue=[];for(const We of this.cacheTiles.values())We.isLoading&&!We.isCurrent&&!We.isVisible&&ue.push(We);for(;ue.length>0;)ue.shift().abortLoad()}getTileByLngLat(ue,We,xt){const{zoomOffset:Pn}=this.options,ur=Math.ceil(xt)+Pn,Br=zs(ue,We,ur);return this.tiles.filter(Ii=>Ii.key===`${Br[0]}_${Br[1]}_${ur}`)[0]}getTileExtent(ue,We){return this.getTileIndices(We,ue)}getTileByZXY(ue,We,xt){return this.tiles.filter(ur=>ur.key===`${We}_${xt}_${ue}`)[0]}clear(){for(const ue of this.cacheTiles.values())ue.isLoading?ue.abortLoad():this.onTileUnload(ue);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const ue=this.options.updateStrategy,We=new Map;for(const ur of this.cacheTiles.values())We.set(ur.key,ur.isVisible),ur.isCurrent=!1,ur.isVisible=!1;for(const ur of this.currentTiles)ur.isCurrent=!0,ur.isVisible=!0;const xt=Array.from(this.cacheTiles.values());typeof ue=="function"?ue(xt):cs[ue](xt);let Pn=!1;Array.from(this.cacheTiles.values()).forEach(ur=>{ur.isVisible!==We.get(ur.key)?(ur.isVisibleChange=!0,Pn=!0):ur.isVisibleChange=!1}),Pn&&this.emit("tile-update")}getTileIndices(ue,We){const{tileSize:xt,extent:Pn,zoomOffset:ur}=this.options,Br=Math.floor(this.options.maxZoom),fi=Math.ceil(this.options.minZoom);return ff({maxZoom:Br,minZoom:fi,zoomOffset:ur,tileSize:xt,zoom:ue,latLonBounds:We,extent:Pn})}getTileId(ue,We,xt){return`${ue},${We},${xt}`}loadFinished(){const ue=!this.currentTiles.some(We=>!We.isDone);return ue&&this.emit("tiles-load-finished"),ue}getTile(ue,We,xt){const Pn=this.getTileId(ue,We,xt);return this.cacheTiles.get(Pn)}createTile(ue,We,xt){const Pn=this.getTileId(ue,We,xt),ur=new Gc({x:ue,y:We,z:xt,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(Pn,ur),ur.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),ur}resizeCacheTiles(){const ue=ba*this.currentTiles.length;if(this.cacheTiles.size>ue){for(const[xt,Pn]of this.cacheTiles)if(!Pn.isVisible&&!this.currentTiles.includes(Pn)&&(this.cacheTiles.delete(xt),this.onTileUnload(Pn)),this.cacheTiles.size<=ue)break}this.rebuildTileTree()}rebuildTileTree(){for(const ue of this.cacheTiles.values())ue.parent=null,ue.children.length=0;for(const ue of this.cacheTiles.values()){const We=this.getNearestAncestor(ue.x,ue.y,ue.z);ue.parent=We,We!=null&&We.children&&We.children.push(ue)}}getNearestAncestor(ue,We,xt){for(;xt>this.options.minZoom;){ue=Math.floor(ue/2),We=Math.floor(We/2),xt=xt-1;const Pn=this.getTile(ue,We,xt);if(Pn)return Pn}return null}};function Gs(ue){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(ue)}function nh(ue){const We=[];let xt=/\{([a-z])-([a-z])\}/.exec(ue);if(xt){const Pn=xt[1].charCodeAt(0),ur=xt[2].charCodeAt(0);let Br;for(Br=Pn;Br<=ur;++Br)We.push(ue.replace(xt[0],String.fromCharCode(Br)));return We}if(xt=/\{(\d+)-(\d+)\}/.exec(ue),xt){const Pn=parseInt(xt[2],10);for(let ur=parseInt(xt[1],10);ur<=Pn;ur++)We.push(ue.replace(xt[0],ur.toString()));return We}return We.push(ue),We}function df(ue,We){if(!ue||!ue.length)throw new Error("url is not allowed to be empty");const{x:xt,y:Pn,z:ur}=We,Br=nh(ue),fi=Math.abs(xt+Pn)%Br.length;return(Oe(Br[fi])?`${Br[fi]}/{z}/{x}/{y}`:Br[fi]).replace(/\{x\}/g,xt.toString()).replace(/\{y\}/g,Pn.toString()).replace(/\{z\}/g,ur.toString()).replace(/\{bbox\}/g,dl(xt,Pn,ur).join(",")).replace(/\{-y\}/g,(Math.pow(2,ur)-Pn-1).toString())}function Vf(ue,We){const{x:xt,y:Pn,z:ur,layer:Br,version:fi="1.0.0",style:Ii="default",format:Xo,service:Wo="WMTS",tileMatrixset:da}=We,$s=nh(ue),Rl=Math.abs(xt+Pn)%$s.length;return`${$s[Rl]}&SERVICE=${Wo}&REQUEST=GetTile&VERSION=${fi}&LAYER=${Br}&STYLE=${Ii}&TILEMATRIXSET=${da}&FORMAT=${Xo}&TILECOL=${xt}&TILEROW=${Pn}&TILEMATRIX=${ur}`}function $a(ue,We){return ue==null?We:ue}},13690:function(_t,W,D){"use strict";D.d(W,{oT:function(){return Ya},Ie:function(){return T1},dW:function(){return Rx},GI:function(){return DO},xs:function(){return nM}});var q={},G={},E=a=>G[a],fe=(a,o)=>{G[a]=o},$=a=>q[a],se=(a,o)=>{q[a]=o},ce={},ye={},ae=34,He=10,J=13;function me(a){return new Function("d","return {"+a.map(function(o,f){return JSON.stringify(o)+": d["+f+'] || ""'}).join(",")+"}")}function Oe(a,o){var f=me(a);return function(m,w){return o(f(m),w,a)}}function Q(a){var o=Object.create(null),f=[];return a.forEach(function(m){for(var w in m)w in o||f.push(o[w]=w)}),f}function le(a,o){var f=a+"",m=f.length;return m<o?new Array(o-m+1).join(0)+f:f}function ee(a){return a<0?"-"+le(-a,6):a>9999?"+"+le(a,6):le(a,4)}function be(a){var o=a.getUTCHours(),f=a.getUTCMinutes(),m=a.getUTCSeconds(),w=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":ee(a.getUTCFullYear(),4)+"-"+le(a.getUTCMonth()+1,2)+"-"+le(a.getUTCDate(),2)+(w?"T"+le(o,2)+":"+le(f,2)+":"+le(m,2)+"."+le(w,3)+"Z":m?"T"+le(o,2)+":"+le(f,2)+":"+le(m,2)+"Z":f||o?"T"+le(o,2)+":"+le(f,2)+"Z":"")}function et(a){var o=new RegExp('["'+a+`
\r]`),f=a.charCodeAt(0);function m(Se,ze){var Rt,Jt,Nn=w(Se,function(sr,Ar){if(Rt)return Rt(sr,Ar-1);Jt=sr,Rt=ze?Oe(sr,ze):me(sr)});return Nn.columns=Jt||[],Nn}function w(Se,ze){var Rt=[],Jt=Se.length,Nn=0,sr=0,Ar,mr=Jt<=0,Vr=!1;Se.charCodeAt(Jt-1)===He&&--Jt,Se.charCodeAt(Jt-1)===J&&--Jt;function ci(){if(mr)return ye;if(Vr)return Vr=!1,ce;var to,Qr=Nn,no;if(Se.charCodeAt(Qr)===ae){for(;Nn++<Jt&&Se.charCodeAt(Nn)!==ae||Se.charCodeAt(++Nn)===ae;);return(to=Nn)>=Jt?mr=!0:(no=Se.charCodeAt(Nn++))===He?Vr=!0:no===J&&(Vr=!0,Se.charCodeAt(Nn)===He&&++Nn),Se.slice(Qr+1,to-1).replace(/""/g,'"')}for(;Nn<Jt;){if((no=Se.charCodeAt(to=Nn++))===He)Vr=!0;else if(no===J)Vr=!0,Se.charCodeAt(Nn)===He&&++Nn;else if(no!==f)continue;return Se.slice(Qr,to)}return mr=!0,Se.slice(Qr,Jt)}for(;(Ar=ci())!==ye;){for(var Io=[];Ar!==ce&&Ar!==ye;)Io.push(Ar),Ar=ci();ze&&(Io=ze(Io,sr++))==null||Rt.push(Io)}return Rt}function C(Se,ze){return Se.map(function(Rt){return ze.map(function(Jt){return Ce(Rt[Jt])}).join(a)})}function I(Se,ze){return ze==null&&(ze=Q(Se)),[ze.map(Ce).join(a)].concat(C(Se,ze)).join(`
`)}function B(Se,ze){return ze==null&&(ze=Q(Se)),C(Se,ze).join(`
`)}function V(Se){return Se.map(re).join(`
`)}function re(Se){return Se.map(Ce).join(a)}function Ce(Se){return Se==null?"":Se instanceof Date?be(Se):o.test(Se+="")?'"'+Se.replace(/"/g,'""')+'"':Se}return{parse:m,parseRows:w,format:I,formatBody:B,formatRows:V,formatRow:re,formatValue:Ce}}var tt=et(","),wt=tt.parse,gt=tt.parseRows,ft=tt.format,Pe=tt.formatBody,Ae=tt.formatRows,Be=tt.formatRow,Ze=tt.formatValue,ut=D(1449);function tn(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function De(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function mt(a){if(a.length>1&&isNumber(a[0])&&isNumber(a[1]))return!0;if(Array.isArray(a[0])&&a[0].length)return mt(a[0]);throw new Error("coordinates must only contain numbers")}function Re(a,o,f){if(!o||!f)throw new Error("type and name required");if(!a||a.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.type)}function nt(a,o,f){if(!a)throw new Error("No feature passed");if(!f)throw new Error(".featureOf() requires a name");if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!a.geometry||a.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.geometry.type)}function qe(a,o,f){if(!a)throw new Error("No featureCollection passed");if(!f)throw new Error(".collectionOf() requires a name");if(!a||a.type!=="FeatureCollection")throw new Error("Invalid input to "+f+", FeatureCollection required");for(var m=0,w=a.features;m<w.length;m++){var C=w[m];if(!C||C.type!=="Feature"||!C.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!C.geometry||C.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+C.geometry.type)}}function Ge(a){return a.type==="Feature"?a.geometry:a}function Dt(a,o){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}var yt=D(39034),Le=D(66366),Zt=D(38163),yn=D.n(Zt);function Tn(a,o){return a.map(f=>f[o]*1)}function lr(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function or(a){return Array.isArray(a)?a.length===0?!1:!!lr(a[0]):!1}function Lt(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function en(a){const o=Object.isFrozen(a)?Le.lodashUtil.cloneDeep(a):a;return yn()(o,!0),o}function hn(a,o){return a||[[o[0],o[3]],[o[2],o[3]],[o[2],o[1]],[o[0],o[1]]]}var Xn=Object.defineProperty,an=Object.defineProperties,Pt=Object.getOwnPropertyDescriptors,zt=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,Ut=(a,o,f)=>o in a?Xn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,U=(a,o)=>{for(var f in o||(o={}))je.call(o,f)&&Ut(a,f,o[f]);if(zt)for(var f of zt(o))rt.call(o,f)&&Ut(a,f,o[f]);return a},he=(a,o)=>an(a,Pt(o));function ot(a,o){const{x:f,y:m,x1:w,y1:C,coordinates:I,geometry:B}=o,V=[];if(!Array.isArray(a))return{dataArray:[]};if(B)return a.filter(re=>re[B]&&re[B].type&&re[B].coordinates&&re[B].coordinates.length>0).forEach((re,Ce)=>{const Se=en(re[B]);(0,yt.nG)(Se,ze=>{const Rt=De(ze),Jt=he(U({},re),{_id:Ce,coordinates:Rt});V.push(Jt)})}),{dataArray:V};for(let re=0;re<a.length;re++){const Ce=a[re];let Se=[];if(I){let Rt="Polygon";Array.isArray(I[0])||(Rt="Point"),Array.isArray(I[0])&&!Array.isArray(I[0][0])&&(Rt="LineString"),Se=en({type:Rt,coordinates:Ce[I]}).coordinates}else if(f&&m&&w&&C){const Rt=[parseFloat(Ce[f]),parseFloat(Ce[m])],Jt=[parseFloat(Ce[w]),parseFloat(Ce[C])];Se=[Rt,Jt]}else f&&m&&(Se=[parseFloat(Ce[f]),parseFloat(Ce[m])]);const ze=he(U({},Ce),{_id:re,coordinates:Se});V.push(ze)}return{dataArray:V}}function de(a,o){const f=wt(a);return ot(f,o)}var qt=Object.defineProperty,ln=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertySymbols,Yn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,pn=(a,o,f)=>o in a?qt(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,vt=(a,o)=>{for(var f in o||(o={}))Yn.call(o,f)&&pn(a,f,o[f]);if(Dn)for(var f of Dn(o))Kn.call(o,f)&&pn(a,f,o[f]);return a},Nt=(a,o)=>ln(a,mn(o));function An(a){const o=a.toString();let f=5381,m=o.length;for(;m;)f=f*33^o.charCodeAt(--m);return f>>>0}function In(a,o){return o===void 0?null:typeof(a.properties[o]*1)=="number"?a.properties[o]*1:a.properties&&a.properties[o]?An(a.properties[o]+"")%1000019:null}function $n(a,o){const f=[],m={};return a.features?(a.features=a.features.filter(w=>{const C=w.geometry;return w!=null&&C&&C.type&&C.coordinates&&C.coordinates.length>0}),a=en(a),a.features.length===0?{dataArray:[],featureKeys:m}:((0,yt.nG)(a,(w,C)=>{let I=In(w,o==null?void 0:o.featureId);I===null&&(I=C);const B=I,V=De(w),re=Nt(vt({},w.properties),{coordinates:V,_id:B});f.push(re)}),{dataArray:f,featureKeys:m})):(a.features=[],{dataArray:[]})}function pt(a,o,f,m){for(var w=m,C=f-o>>1,I=f-o,B,V=a[o],re=a[o+1],Ce=a[f],Se=a[f+1],ze=o+3;ze<f;ze+=3){var Rt=xe(a[ze],a[ze+1],V,re,Ce,Se);if(Rt>w)B=ze,w=Rt;else if(Rt===w){var Jt=Math.abs(ze-C);Jt<I&&(B=ze,I=Jt)}}w>m&&(B-o>3&&pt(a,o,B,m),a[B+2]=w,f-B>3&&pt(a,B,f,m))}function xe(a,o,f,m,w,C){var I=w-f,B=C-m;if(I!==0||B!==0){var V=((a-f)*I+(o-m)*B)/(I*I+B*B);V>1?(f=w,m=C):V>0&&(f+=I*V,m+=B*V)}return I=a-f,B=o-m,I*I+B*B}function Fe(a,o,f,m){var w={id:typeof a=="undefined"?null:a,type:o,geometry:f,tags:m,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return st(w),w}function st(a){var o=a.geometry,f=a.type;if(f==="Point"||f==="MultiPoint"||f==="LineString")It(a,o);else if(f==="Polygon"||f==="MultiLineString")for(var m=0;m<o.length;m++)It(a,o[m]);else if(f==="MultiPolygon")for(m=0;m<o.length;m++)for(var w=0;w<o[m].length;w++)It(a,o[m][w])}function It(a,o){for(var f=0;f<o.length;f+=3)a.minX=Math.min(a.minX,o[f]),a.minY=Math.min(a.minY,o[f+1]),a.maxX=Math.max(a.maxX,o[f]),a.maxY=Math.max(a.maxY,o[f+1])}function Mt(a,o){var f=[];if(a.type==="FeatureCollection")for(var m=0;m<a.features.length;m++)wn(f,a.features[m],o,m);else a.type==="Feature"?wn(f,a,o):wn(f,{geometry:a},o);return f}function wn(a,o,f,m){if(o.geometry){var w=o.geometry.coordinates,C=o.geometry.type,I=Math.pow(f.tolerance/((1<<f.maxZoom)*f.extent),2),B=[],V=o.id;if(f.promoteId?V=o.properties[f.promoteId]:f.generateId&&(V=m||0),C==="Point")rr(w,B);else if(C==="MultiPoint")for(var re=0;re<w.length;re++)rr(w[re],B);else if(C==="LineString")Er(w,B,I,!1);else if(C==="MultiLineString")if(f.lineMetrics){for(re=0;re<w.length;re++)B=[],Er(w[re],B,I,!1),a.push(Fe(V,"LineString",B,o.properties));return}else qn(w,B,I,!1);else if(C==="Polygon")qn(w,B,I,!0);else if(C==="MultiPolygon")for(re=0;re<w.length;re++){var Ce=[];qn(w[re],Ce,I,!0),B.push(Ce)}else if(C==="GeometryCollection"){for(re=0;re<o.geometry.geometries.length;re++)wn(a,{id:V,geometry:o.geometry.geometries[re],properties:o.properties},f,m);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(Fe(V,C,B,o.properties))}}function rr(a,o){o.push(Me(a[0])),o.push(Te(a[1])),o.push(0)}function Er(a,o,f,m){for(var w,C,I=0,B=0;B<a.length;B++){var V=Me(a[B][0]),re=Te(a[B][1]);o.push(V),o.push(re),o.push(0),B>0&&(m?I+=(w*re-V*C)/2:I+=Math.sqrt(Math.pow(V-w,2)+Math.pow(re-C,2))),w=V,C=re}var Ce=o.length-3;o[2]=1,pt(o,0,Ce,f),o[Ce+2]=1,o.size=Math.abs(I),o.start=0,o.end=o.size}function qn(a,o,f,m){for(var w=0;w<a.length;w++){var C=[];Er(a[w],C,f,m),o.push(C)}}function Me(a){return a/360+.5}function Te(a){var o=Math.sin(a*Math.PI/180),f=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return f<0?0:f>1?1:f}function ke(a,o,f,m,w,C,I,B){if(f/=o,m/=o,C>=f&&I<m)return a;if(I<f||C>=m)return null;for(var V=[],re=0;re<a.length;re++){var Ce=a[re],Se=Ce.geometry,ze=Ce.type,Rt=w===0?Ce.minX:Ce.minY,Jt=w===0?Ce.maxX:Ce.maxY;if(Rt>=f&&Jt<m){V.push(Ce);continue}else if(Jt<f||Rt>=m)continue;var Nn=[];if(ze==="Point"||ze==="MultiPoint")at(Se,Nn,f,m,w);else if(ze==="LineString")At(Se,Nn,f,m,w,!1,B.lineMetrics);else if(ze==="MultiLineString")cn(Se,Nn,f,m,w,!1);else if(ze==="Polygon")cn(Se,Nn,f,m,w,!0);else if(ze==="MultiPolygon")for(var sr=0;sr<Se.length;sr++){var Ar=[];cn(Se[sr],Ar,f,m,w,!0),Ar.length&&Nn.push(Ar)}if(Nn.length){if(B.lineMetrics&&ze==="LineString"){for(sr=0;sr<Nn.length;sr++)V.push(Fe(Ce.id,ze,Nn[sr],Ce.tags));continue}(ze==="LineString"||ze==="MultiLineString")&&(Nn.length===1?(ze="LineString",Nn=Nn[0]):ze="MultiLineString"),(ze==="Point"||ze==="MultiPoint")&&(ze=Nn.length===3?"Point":"MultiPoint"),V.push(Fe(Ce.id,ze,Nn,Ce.tags))}}return V.length?V:null}function at(a,o,f,m,w){for(var C=0;C<a.length;C+=3){var I=a[C+w];I>=f&&I<=m&&(o.push(a[C]),o.push(a[C+1]),o.push(a[C+2]))}}function At(a,o,f,m,w,C,I){for(var B=nn(a),V=w===0?Qt:Qn,re=a.start,Ce,Se,ze=0;ze<a.length-3;ze+=3){var Rt=a[ze],Jt=a[ze+1],Nn=a[ze+2],sr=a[ze+3],Ar=a[ze+4],mr=w===0?Rt:Jt,Vr=w===0?sr:Ar,ci=!1;I&&(Ce=Math.sqrt(Math.pow(Rt-sr,2)+Math.pow(Jt-Ar,2))),mr<f?Vr>f&&(Se=V(B,Rt,Jt,sr,Ar,f),I&&(B.start=re+Ce*Se)):mr>m?Vr<m&&(Se=V(B,Rt,Jt,sr,Ar,m),I&&(B.start=re+Ce*Se)):Et(B,Rt,Jt,Nn),Vr<f&&mr>=f&&(Se=V(B,Rt,Jt,sr,Ar,f),ci=!0),Vr>m&&mr<=m&&(Se=V(B,Rt,Jt,sr,Ar,m),ci=!0),!C&&ci&&(I&&(B.end=re+Ce*Se),o.push(B),B=nn(a)),I&&(re+=Ce)}var Io=a.length-3;Rt=a[Io],Jt=a[Io+1],Nn=a[Io+2],mr=w===0?Rt:Jt,mr>=f&&mr<=m&&Et(B,Rt,Jt,Nn),Io=B.length-3,C&&Io>=3&&(B[Io]!==B[0]||B[Io+1]!==B[1])&&Et(B,B[0],B[1],B[2]),B.length&&o.push(B)}function nn(a){var o=[];return o.size=a.size,o.start=a.start,o.end=a.end,o}function cn(a,o,f,m,w,C){for(var I=0;I<a.length;I++)At(a[I],o,f,m,w,C,!1)}function Et(a,o,f,m){a.push(o),a.push(f),a.push(m)}function Qt(a,o,f,m,w,C){var I=(C-o)/(m-o);return a.push(C),a.push(f+(w-f)*I),a.push(1),I}function Qn(a,o,f,m,w,C){var I=(C-f)/(w-f);return a.push(o+(m-o)*I),a.push(C),a.push(1),I}function Sr(a,o){var f=o.buffer/o.extent,m=a,w=ke(a,1,-1-f,f,0,-1,2,o),C=ke(a,1,1-f,2+f,0,-1,2,o);return(w||C)&&(m=ke(a,1,-f,1+f,0,-1,2,o)||[],w&&(m=Zr(w,1).concat(m)),C&&(m=m.concat(Zr(C,-1)))),m}function Zr(a,o){for(var f=[],m=0;m<a.length;m++){var w=a[m],C=w.type,I;if(C==="Point"||C==="MultiPoint"||C==="LineString")I=yr(w.geometry,o);else if(C==="MultiLineString"||C==="Polygon"){I=[];for(var B=0;B<w.geometry.length;B++)I.push(yr(w.geometry[B],o))}else if(C==="MultiPolygon")for(I=[],B=0;B<w.geometry.length;B++){for(var V=[],re=0;re<w.geometry[B].length;re++)V.push(yr(w.geometry[B][re],o));I.push(V)}f.push(Fe(w.id,C,I,w.tags))}return f}function yr(a,o){var f=[];f.size=a.size,a.start!==void 0&&(f.start=a.start,f.end=a.end);for(var m=0;m<a.length;m+=3)f.push(a[m]+o,a[m+1],a[m+2]);return f}function Wr(a,o){if(a.transformed)return a;var f=1<<a.z,m=a.x,w=a.y,C,I,B;for(C=0;C<a.features.length;C++){var V=a.features[C],re=V.geometry,Ce=V.type;if(V.geometry=[],Ce===1)for(I=0;I<re.length;I+=2)V.geometry.push(Ei(re[I],re[I+1],o,f,m,w));else for(I=0;I<re.length;I++){var Se=[];for(B=0;B<re[I].length;B+=2)Se.push(Ei(re[I][B],re[I][B+1],o,f,m,w));V.geometry.push(Se)}}return a.transformed=!0,a}function Ei(a,o,f,m,w,C){return[Math.round(f*(a*m-w)),Math.round(f*(o*m-C))]}function yi(a,o,f,m,w){for(var C=o===w.maxZoom?0:w.tolerance/((1<<o)*w.extent),I={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:f,y:m,z:o,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},B=0;B<a.length;B++){I.numFeatures++,wr(I,a[B],C,w);var V=a[B].minX,re=a[B].minY,Ce=a[B].maxX,Se=a[B].maxY;V<I.minX&&(I.minX=V),re<I.minY&&(I.minY=re),Ce>I.maxX&&(I.maxX=Ce),Se>I.maxY&&(I.maxY=Se)}return I}function wr(a,o,f,m){var w=o.geometry,C=o.type,I=[];if(C==="Point"||C==="MultiPoint")for(var B=0;B<w.length;B+=3)I.push(w[B]),I.push(w[B+1]),a.numPoints++,a.numSimplified++;else if(C==="LineString")Ai(I,w,a,f,!1,!1);else if(C==="MultiLineString"||C==="Polygon")for(B=0;B<w.length;B++)Ai(I,w[B],a,f,C==="Polygon",B===0);else if(C==="MultiPolygon")for(var V=0;V<w.length;V++){var re=w[V];for(B=0;B<re.length;B++)Ai(I,re[B],a,f,!0,B===0)}if(I.length){var Ce=o.tags||null;if(C==="LineString"&&m.lineMetrics){Ce={};for(var Se in o.tags)Ce[Se]=o.tags[Se];Ce.mapbox_clip_start=w.start/w.size,Ce.mapbox_clip_end=w.end/w.size}var ze={geometry:I,type:C==="Polygon"||C==="MultiPolygon"?3:C==="LineString"||C==="MultiLineString"?2:1,tags:Ce};o.id!==null&&(ze.id=o.id),a.features.push(ze)}}function Ai(a,o,f,m,w,C){var I=m*m;if(m>0&&o.size<(w?I:m)){f.numPoints+=o.length/3;return}for(var B=[],V=0;V<o.length;V+=3)(m===0||o[V+2]>I)&&(f.numSimplified++,B.push(o[V]),B.push(o[V+1])),f.numPoints++;w&&pi(B,C),a.push(B)}function pi(a,o){for(var f=0,m=0,w=a.length,C=w-2;m<w;C=m,m+=2)f+=(a[m]-a[C])*(a[m+1]+a[C+1]);if(f>0===o)for(m=0,w=a.length;m<w/2;m+=2){var I=a[m],B=a[m+1];a[m]=a[w-2-m],a[m+1]=a[w-1-m],a[w-2-m]=I,a[w-1-m]=B}}function _i(a,o){return new Bo(a,o)}function Bo(a,o){o=this.options=Ci(Object.create(this.options),o);var f=o.debug;if(f&&console.time("preprocess data"),o.maxZoom<0||o.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(o.promoteId&&o.generateId)throw new Error("promoteId and generateId cannot be used together.");var m=Mt(a,o);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",o.indexMaxZoom,o.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),m=Sr(m,o),m.length&&this.splitTile(m,0,0,0),f&&(m.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Bo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Bo.prototype.splitTile=function(a,o,f,m,w,C,I){for(var B=[a,o,f,m],V=this.options,re=V.debug;B.length;){m=B.pop(),f=B.pop(),o=B.pop(),a=B.pop();var Ce=1<<o,Se=Si(o,f,m),ze=this.tiles[Se];if(!ze&&(re>1&&console.time("creation"),ze=this.tiles[Se]=yi(a,o,f,m,V),this.tileCoords.push({z:o,x:f,y:m}),re)){re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",o,f,m,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));var Rt="z"+o;this.stats[Rt]=(this.stats[Rt]||0)+1,this.total++}if(ze.source=a,w){if(o===V.maxZoom||o===w)continue;var Jt=1<<w-o;if(f!==Math.floor(C/Jt)||m!==Math.floor(I/Jt))continue}else if(o===V.indexMaxZoom||ze.numPoints<=V.indexMaxPoints)continue;if(ze.source=null,a.length!==0){re>1&&console.time("clipping");var Nn=.5*V.buffer/V.extent,sr=.5-Nn,Ar=.5+Nn,mr=1+Nn,Vr,ci,Io,to,Qr,no;Vr=ci=Io=to=null,Qr=ke(a,Ce,f-Nn,f+Ar,0,ze.minX,ze.maxX,V),no=ke(a,Ce,f+sr,f+mr,0,ze.minX,ze.maxX,V),a=null,Qr&&(Vr=ke(Qr,Ce,m-Nn,m+Ar,1,ze.minY,ze.maxY,V),ci=ke(Qr,Ce,m+sr,m+mr,1,ze.minY,ze.maxY,V),Qr=null),no&&(Io=ke(no,Ce,m-Nn,m+Ar,1,ze.minY,ze.maxY,V),to=ke(no,Ce,m+sr,m+mr,1,ze.minY,ze.maxY,V),no=null),re>1&&console.timeEnd("clipping"),B.push(Vr||[],o+1,f*2,m*2),B.push(ci||[],o+1,f*2,m*2+1),B.push(Io||[],o+1,f*2+1,m*2),B.push(to||[],o+1,f*2+1,m*2+1)}}},Bo.prototype.getTile=function(a,o,f){var m=this.options,w=m.extent,C=m.debug;if(a<0||a>24)return null;var I=1<<a;o=(o%I+I)%I;var B=Si(a,o,f);if(this.tiles[B])return Wr(this.tiles[B],w);C>1&&console.log("drilling down to z%d-%d-%d",a,o,f);for(var V=a,re=o,Ce=f,Se;!Se&&V>0;)V--,re=Math.floor(re/2),Ce=Math.floor(Ce/2),Se=this.tiles[Si(V,re,Ce)];return!Se||!Se.source?null:(C>1&&console.log("found parent tile z%d-%d-%d",V,re,Ce),C>1&&console.time("drilling down"),this.splitTile(Se.source,V,re,Ce,a,o,f),C>1&&console.timeEnd("drilling down"),this.tiles[B]?Wr(this.tiles[B],w):null)};function Si(a,o,f){return((1<<a)*f+o)*32+a}function Ci(a,o){for(var f in o)a[f]=o[f];return a}var ho=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=a}getTileData(a){return!a||!this.vectorTile.layers[a]?[]:this.vectorLayerCache[a]?this.vectorLayerCache[a]:this.vectorTile.layers[a].features}getFeatureById(){throw new Error("Method not implemented.")}},go=Object.defineProperty,jo=Object.defineProperties,Ke=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,dn=Object.prototype.propertyIsEnumerable,Fn=(a,o,f)=>o in a?go(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Bn=(a,o)=>{for(var f in o||(o={}))Wt.call(o,f)&&Fn(a,f,o[f]);if(dt)for(var f of dt(o))dn.call(o,f)&&Fn(a,f,o[f]);return a},_n=(a,o)=>jo(a,Ke(o)),Cn=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),pr={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function hr(a){let o=0;for(let f=0,m=a.length,w=m-1,C,I;f<m;w=f++)C=a[f],I=a[w],o+=(I.x-C.x)*(C.y+I.y);return o}function ni(a){const o=a.length;if(o<=1)return[a];const f=[];let m,w;for(let C=0;C<o;C++){const I=hr(a[C]);I!==0&&(w===void 0&&(w=I<0),w===I<0?(m&&f.push(m),m=[a[C]]):m.push(a[C]))}return m&&f.push(m),f}var Wi=["Unknown","Point","LineString","Polygon"];function Qi(a,o,f,m,w){let C=w.geometry;const I=w.type,B=w.tags,V=w.id,re=a*Math.pow(2,m),Ce=a*o,Se=a*f;let ze=Wi[I],Rt,Jt;function Nn(Ar){for(let mr=0;mr<Ar.length;mr++){const Vr=Ar[mr];if(Vr[3])break;const ci=180-(Vr[1]+Se)*360/re,Io=(Vr[0]+Ce)*360/re-180,to=360/Math.PI*Math.atan(Math.exp(ci*Math.PI/180))-90;Ar[mr]=[Io,to,0,1]}}switch(I){case 1:const Ar=[];for(Rt=0;Rt<C.length;Rt++)Ar[Rt]=C[Rt][0];C=Ar,Nn(C);break;case 2:for(Rt=0;Rt<C.length;Rt++)Nn(C[Rt]);break;case 3:for(C=ni(C),Rt=0;Rt<C.length;Rt++)for(Jt=0;Jt<C[Rt].length;Jt++)Nn(C[Rt][Jt]);break}return C.length===1?C=C[0]:ze="Multi"+ze,{type:"Feature",geometry:{type:ze,coordinates:C},properties:B,id:V,tileOrigin:[0,0],coord:""}}var ri=(a,o,f,m)=>Cn(void 0,null,function*(){return new Promise(w=>{const C=o.getTile(a.z,a.x,a.y),B={layers:{defaultLayer:{features:C?C.features.map(re=>Qi(m,f.x,f.y,f.z,re)):[]}}},V=new ho(B,a.x,a.y,a.z);w(V)})});function Gi(a){const o={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?o:Bn(Bn({},o),a.geojsonvtOptions)}function zi(a,o){const f=Gi(o),m=f.extent||4096,w=_i(a,f),C=(B,V)=>ri(V,w,B,m),I=_n(Bn(Bn({},pr),o),{getTileData:C});return{data:a,dataArray:[],tilesetOptions:I,isTile:!0}}var qr=Object.defineProperty,To=Object.defineProperties,di=Object.getOwnPropertyDescriptors,So=Object.getOwnPropertySymbols,Zi=Object.prototype.hasOwnProperty,io=Object.prototype.propertyIsEnumerable,Mo=(a,o,f)=>o in a?qr(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,gs=(a,o)=>{for(var f in o||(o={}))Zi.call(o,f)&&Mo(a,f,o[f]);if(So)for(var f of So(o))io.call(o,f)&&Mo(a,f,o[f]);return a},ya=(a,o)=>To(a,di(o));function ia(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,requestParameters:w={}}=o,C=new Promise(V=>{a instanceof HTMLImageElement||(0,Le.fg)(a)?V([a]):ps(a,w,re=>{V(re)})}),I=hn(m,f);return{originData:a,images:C,_id:1,dataArray:[{_id:0,coordinates:I}]}}function ps(a,o,f){const m=[];if(typeof a=="string")(0,Le.gJ)(ya(gs({},o),{url:a}),(w,C)=>{C&&(m.push(C),f(m))});else{const w=a.length;let C=0;a.forEach(I=>{(0,Le.gJ)(ya(gs({},o),{url:I}),(B,V)=>{C++,V&&m.push(V),C===w&&f(m)})})}return ia}var os=Object.defineProperty,Ct=Object.defineProperties,Gt=Object.getOwnPropertyDescriptors,Un=Object.getOwnPropertySymbols,Fr=Object.prototype.hasOwnProperty,Oi=Object.prototype.propertyIsEnumerable,Yi=(a,o,f)=>o in a?os(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,ea=(a,o)=>{for(var f in o||(o={}))Fr.call(o,f)&&Yi(a,f,o[f]);if(Un)for(var f of Un(o))Oi.call(o,f)&&Yi(a,f,o[f]);return a},Ns=(a,o)=>Ct(a,Gt(o)),As=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),Is=(a,o,f,m)=>As(void 0,null,function*(){const w={x:o.x,y:o.y,z:o.z},C=(0,Le.z0)(a,w);return new Promise(I=>{m?m(w,(B,V)=>{if(B||!V){const re={layers:{defaultLayer:{features:[]}}},Ce=new ho(re,o.x,o.y,o.z);I(Ce)}else{const re={layers:{defaultLayer:{features:V.features}}},Ce=new ho(re,o.x,o.y,o.z);I(Ce)}}):(0,Le.Yu)(Ns(ea({},f),{url:C}),(B,V)=>{if(B||!V){const re={layers:{defaultLayer:{features:[]}}},Ce=new ho(re,o.x,o.y,o.z);I(Ce)}else{const Ce={layers:{defaultLayer:{features:JSON.parse(V)}}},Se=new ho(Ce,o.x,o.y,o.z);I(Se)}})})});function al(a,o){const f=(w,C)=>Is(a,C,o==null?void 0:o.requestParameters,o.getCustomData),m=Ns(ea({},o),{getTileData:f});return{dataArray:[],tilesetOptions:m,isTile:!0}}var Gh=D(38929),Op=D(3614),Kf=D.n(Op),ou=Object.defineProperty,Uf=Object.defineProperties,of=Object.getOwnPropertyDescriptors,au=Object.getOwnPropertySymbols,yu=Object.prototype.hasOwnProperty,af=Object.prototype.propertyIsEnumerable,Sf=(a,o,f)=>o in a?ou(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ou=(a,o)=>{for(var f in o||(o={}))yu.call(o,f)&&Sf(a,f,o[f]);if(au)for(var f of au(o))af.call(o,f)&&Sf(a,f,o[f]);return a},xs=(a,o)=>Uf(a,of(o)),tc=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=new Gh.VectorTile(new(Kf())(a))}getTileData(a){if(!a||!this.vectorTile.layers[a])return[];if(this.vectorLayerCache[a])return this.vectorLayerCache[a];const o=this.vectorTile.layers[a];if(Array.isArray(o.features))return this.vectorLayerCache[a]=o.features,o.features;const f=[];for(let m=0;m<o.length;m++){const C=o.feature(m).toGeoJSON(this.x,this.y,this.z);f.push(xs(Ou({},C),{properties:Ou({id:C.id},C.properties)}))}return this.vectorLayerCache[a]=f,f}getFeatureById(){throw new Error("Method not implemented.")}},sf=Object.defineProperty,Ed=Object.defineProperties,np=Object.getOwnPropertyDescriptors,jf=Object.getOwnPropertySymbols,Sd=Object.prototype.hasOwnProperty,yh=Object.prototype.propertyIsEnumerable,Zh=(a,o,f)=>o in a?sf(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Xh=(a,o)=>{for(var f in o||(o={}))Sd.call(o,f)&&Zh(a,f,o[f]);if(jf)for(var f of jf(o))yh.call(o,f)&&Zh(a,f,o[f]);return a},wd=(a,o)=>Ed(a,np(o)),Qp=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),lf={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Vc=(a,o,f,m,w)=>Qp(void 0,null,function*(){const C=(0,Le.z0)(a,o);return new Promise(I=>{if(w)w({x:f.x,y:f.y,z:f.z},(B,V)=>{if(B||!V)I(void 0);else{const re=new tc(V,f.x,f.y,f.z);I(re)}});else{const B=(0,Le.ks)(wd(Xh({},m),{url:C}),(V,re)=>{if(V||!re)I(void 0);else{const Ce=new tc(re,f.x,f.y,f.z);I(Ce)}});f.xhrCancel=()=>B.cancel()}})});function Td(a,o){const f=Array.isArray(a)?a[0]:a,m=(C,I)=>Vc(f,C,I,o==null?void 0:o.requestParameters,o==null?void 0:o.getCustomData),w=wd(Xh(Xh({},lf),o),{getTileData:m});return{data:f,dataArray:[],tilesetOptions:w,isTile:!0}}function jl(a,o,f){switch(a){case"+":return o+f;case"-":return o-f;case"*":return o*f;case"/":return o/f;case"%":return o%f;case"^":return Math.pow(o,f);case"abs":return Math.abs(o);case"floor":return Math.floor(o);case"round":return Math.round(o);case"ceil":return Math.ceil(o);case"sin":return Math.sin(o);case"cos":return Math.cos(o);case"atan":return f===-1?Math.atan(o):Math.atan2(o,f);case"min":return Math.min(o,f);case"max":return Math.max(o,f);case"log10":return Math.log(o);case"log2":return Math.log2(o);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Ac(a,o){const{width:f,height:m}=o[0],w=o.map(V=>V.rasterData),C=f*m,I=[],B=JSON.stringify(a);for(let V=0;V<C;V++){const re=JSON.parse(B),Ce=uf(re,w,V);if(typeof Ce=="number")I.push(Ce);else{const Se=Hc(re);I.push(Se)}}return I}function uf(a,o,f){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return o[a[1]][f]}catch(m){return console.warn("Raster Data err!"),0}a.map((m,w)=>{if(Array.isArray(m)&&m.length>0)switch(m[0]){case"band":try{a[w]=o[m[1]][f]}catch(C){console.warn("Raster Data err!"),a[w]=0}break;default:uf(m,o,f)}})}function su(a){const[o,f=-1,m=-1]=a;return o===void 0?(console.warn("Express err!"),["+",0,0]):[o.replace(/\s+/g,""),f,m]}function Hc(a){const o=su(a),f=o[0];let m=o[1],w=o[2];return Array.isArray(m)&&(m=Hc(a[1])),Array.isArray(w)&&(w=Hc(a[2])),jl(f,m,w)}var hc={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:wf}};function wf(a,o){const f=a[0].rasterData,m=a[1].rasterData,w=a[2].rasterData,C=[],[I,B]=(o==null?void 0:o.countCut)||[2,98],V=(o==null?void 0:o.RMinMax)||Ml(f,I,B),re=(o==null?void 0:o.GMinMax)||Ml(m,I,B),Ce=(o==null?void 0:o.BMinMax)||Ml(w,I,B);for(let Se=0;Se<f.length;Se++)C.push(Math.max(0,f[Se]-V[0])),C.push(Math.max(0,m[Se]-re[0])),C.push(Math.max(0,w[Se]-Ce[0]));return{rasterData:C,rMinMax:V,gMinMax:re,bMinMax:Ce}}function Ml(a,o,f){const m=a.slice().sort((B,V)=>B-V),w=m.length,C=m[Math.ceil(w*o/100)],I=m[Math.ceil(w*f/100)];return[C,I]}var cf=Object.defineProperty,Tf=Object.defineProperties,Ad=Object.getOwnPropertyDescriptors,Cd=Object.getOwnPropertySymbols,ys=Object.prototype.hasOwnProperty,rp=Object.prototype.propertyIsEnumerable,Qf=(a,o,f)=>o in a?cf(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Yh=(a,o)=>{for(var f in o||(o={}))ys.call(o,f)&&Qf(a,f,o[f]);if(Cd)for(var f of Cd(o))rp.call(o,f)&&Qf(a,f,o[f]);return a},sl=(a,o)=>Tf(a,Ad(o)),$h=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())});function _h(a,o,f){return $h(this,null,function*(){if(a.length===0)return{rasterData:[0],width:1,heigh:1};const m=yield Promise.all(a.map(({data:V,bands:re=[0]})=>o(V,re))),w=[];m.forEach(V=>{Array.isArray(V)?w.push(...V):w.push(V)});const{width:C,height:I}=w[0];let B;switch(typeof f){case"function":B=f(w);break;case"object":Array.isArray(f)?B={rasterData:Ac(f,w)}:B=_u(f,w);break;default:B={rasterData:w[0].rasterData}}return sl(Yh({},B),{width:C,height:I})})}function _u(a,o){const f=hc[a.type];if(f.type==="function")return f.method(o,a==null?void 0:a.options);if(f.type==="operation")return a.type==="rgb"?Wc(f.expression,o):{rasterData:Ac(f.expression,o)}}function Wc(a,o){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const f=Ac(a.r||["band",0],o),m=Ac(a.g||["band",0],o),w=Ac(a.b||["band",0],o);return[f,m,w]}function Mu(a,o,f,m){return $h(this,null,function*(){const w=yield _h(a,o,f);m(null,{data:w})})}function Cc(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,width:w,height:C,min:I,max:B,format:V,operation:re}=o;let Ce,Se,ze;if(V===void 0||Lt(a))Ce=Array.from(a),Se=w,ze=C;else{const Nn=Array.isArray(a)?a:[a];Ce=_h(Nn,V,re)}const Rt=hn(m,f);return{_id:1,dataArray:[{_id:1,data:Ce,width:Se,height:ze,min:I,max:B,coordinates:Rt}]}}var we=D(88120),oe=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),pe=(a,o,f,m)=>oe(void 0,null,function*(){return new Promise((w,C)=>{o({x:a.x,y:a.y,z:a.z},(I,B)=>{if(I||B.length===0){C(I);return}B&&Mu([{data:B,bands:[0]}],f,m,(V,re)=>{V?C(V):re&&w(re)})})})}),Je=(a,o)=>oe(void 0,null,function*(){return new Promise((f,m)=>{o({x:a.x,y:a.y,z:a.z},(w,C)=>{if(w||!C){m(w);return}C instanceof ArrayBuffer?(0,Le.Co)(C,(I,B)=>{I&&m(I),f(B)}):C instanceof HTMLImageElement?f(C):m(w)})})});function sn(a,o){return Array.isArray(a)?typeof a[0]=="string"?a.map(f=>(0,Le.z0)(f,o)):a.map(f=>({url:(0,Le.z0)(f.url,o),bands:f.bands||[0]})):(0,Le.z0)(a,o)}function fn(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(o=>({url:o,bands:[0]})):a}function ir(a,o){a.xhrCancel=()=>{o.map(f=>{f.abort()})}}var Cr=Object.defineProperty,Xr=Object.defineProperties,Bi=Object.getOwnPropertyDescriptors,bo=Object.getOwnPropertySymbols,vo=Object.prototype.hasOwnProperty,Na=Object.prototype.propertyIsEnumerable,Fa=(a,o,f)=>o in a?Cr(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ea=(a,o)=>{for(var f in o||(o={}))vo.call(o,f)&&Fa(a,f,o[f]);if(bo)for(var f of bo(o))Na.call(o,f)&&Fa(a,f,o[f]);return a},Aa=(a,o)=>Xr(a,Bi(o)),_a=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),Ba=(a,o,f,m,w)=>_a(void 0,null,function*(){const C=fn(o.url);if(C.length>1){const{rasterFiles:I,xhrList:B,errList:V}=yield Ca(C,o);if(ir(a,B),V.length>0){f(V,null);return}Mu(I,m,w,f)}else{const I=(0,Le.ks)(o,(B,V)=>{if(B)f(B);else if(V){const re=[{data:V,bands:C[0].bands}];Mu(re,m,w,f)}});ir(a,[I])}});function Ca(a,o){return _a(this,null,function*(){const f=[],m=[],w=[];for(let C=0;C<a.length;C++){const I=a[C],B=Aa(Ea({},o),{url:I.url}),V=I.bands,{err:re,data:Ce,xhr:Se}=yield(0,Le.LF)(Aa(Ea({},B),{type:"arrayBuffer"}));re&&w.push(re),m.push(Se),f.push({data:Ce,bands:V})}return{rasterFiles:f,xhrList:m,errList:w}})}var Xa=Object.defineProperty,ba=Object.getOwnPropertySymbols,cs=Object.prototype.hasOwnProperty,Ws=Object.prototype.propertyIsEnumerable,zs=(a,o,f)=>o in a?Xa(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,dc=(a,o)=>{for(var f in o||(o={}))cs.call(o,f)&&zs(a,f,o[f]);if(ba)for(var f of ba(o))Ws.call(o,f)&&zs(a,f,o[f]);return a},dl=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),ff=(a,o,f,m,w)=>dl(void 0,null,function*(){const C={url:sn(a,o)};return new Promise((I,B)=>{Ba(f,C,(V,re)=>{V?B(V):re&&I(re)},m,w)})}),hf=(a,o,f,m)=>dl(void 0,null,function*(){let w;const C=Array.isArray(a)?a[0]:a;return m.wmtsOptions?w=((m==null?void 0:m.getURLFromTemplate)||Le.jG)(C,dc(dc({},o),m.wmtsOptions)):w=((m==null?void 0:m.getURLFromTemplate)||Le.z0)(C,o),new Promise((I,B)=>{var V;const re=(0,Le.gJ)({url:w,type:((V=m==null?void 0:m.requestParameters)==null?void 0:V.type)||"arrayBuffer"},(Ce,Se)=>{Ce?B(Ce):Se&&I(Se)},m.transformResponse);f.xhrCancel=()=>re.cancel()})}),pc=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),Gc=Object.defineProperty,bh=Object.defineProperties,Jf=Object.getOwnPropertyDescriptors,Mp=Object.getOwnPropertySymbols,ip=Object.prototype.hasOwnProperty,Rp=Object.prototype.propertyIsEnumerable,Af=(a,o,f)=>o in a?Gc(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Pp=(a,o)=>{for(var f in o||(o={}))ip.call(o,f)&&Af(a,f,o[f]);if(Mp)for(var f of Mp(o))Rp.call(o,f)&&Af(a,f,o[f]);return a},op=(a,o)=>bh(a,Jf(o)),ap={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},eh=[we.n3.ARRAYBUFFER,we.n3.RGB];function Ip(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function xh(a,o={}){if(Ip(a))throw new Error("tile server url is error");let f=(o==null?void 0:o.dataType)||we.n3.IMAGE;f===we.n3.RGB&&(f=we.n3.ARRAYBUFFER);const m=(C,I)=>{switch(f){case we.n3.IMAGE:return hf(a,C,I,o);case we.n3.CUSTOMIMAGE:case we.n3.CUSTOMTERRAINRGB:return Je(I,o==null?void 0:o.getCustomData);case we.n3.ARRAYBUFFER:return ff(a,C,I,(o==null?void 0:o.format)||pc,o==null?void 0:o.operation);case we.n3.CUSTOMARRAYBUFFER:case we.n3.CUSTOMRGB:return pe(I,o==null?void 0:o.getCustomData,(o==null?void 0:o.format)||pc,o==null?void 0:o.operation);default:return hf(a,C,I,o)}},w=op(Pp(Pp({},ap),o),{getTileData:m});return{data:a,dataArray:[],tilesetOptions:w,isTile:!0}}var Od=Object.defineProperty,th=Object.defineProperties,Gs=Object.getOwnPropertyDescriptors,nh=Object.getOwnPropertySymbols,df=Object.prototype.hasOwnProperty,Vf=Object.prototype.propertyIsEnumerable,$a=(a,o,f)=>o in a?Od(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,ue=(a,o)=>{for(var f in o||(o={}))df.call(o,f)&&$a(a,f,o[f]);if(nh)for(var f of nh(o))Vf.call(o,f)&&$a(a,f,o[f]);return a},We=(a,o)=>th(a,Gs(o)),xt=(a,o)=>{var f={};for(var m in a)df.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&nh)for(var m of nh(a))o.indexOf(m)<0&&Vf.call(a,m)&&(f[m]=a[m]);return f};function Pn(a,o){const f=o,{extent:m,coordinates:w,min:C,max:I,width:B,height:V,format:re,operation:Ce}=f,Se=xt(f,["extent","coordinates","min","max","width","height","format","operation"]);let ze;if(re===void 0||Lt(a))ze=Array.from(a);else{const Nn=Array.isArray(a)?a:[a];ze=_h(Nn,re,Ce)}const Rt=hn(w,m);return{_id:1,dataArray:[We(ue({_id:1,data:ze,width:B,height:V},Se),{min:C,max:I,coordinates:Rt})]}}var ur=Object.defineProperty,Br=Object.defineProperties,fi=Object.getOwnPropertyDescriptors,Ii=Object.getOwnPropertySymbols,Xo=Object.prototype.hasOwnProperty,Wo=Object.prototype.propertyIsEnumerable,da=(a,o,f)=>o in a?ur(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,$s=(a,o)=>{for(var f in o||(o={}))Xo.call(o,f)&&da(a,f,o[f]);if(Ii)for(var f of Ii(o))Wo.call(o,f)&&da(a,f,o[f]);return a},Rl=(a,o)=>Br(a,fi(o)),Es=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),Ji={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},Pl=a=>Es(void 0,null,function*(){return new Promise(o=>{const[f,m,w,C]=a.bounds,I={layers:{testTile:{features:[{type:"Feature",properties:{key:a.x+"/"+a.y+"/"+a.z,x:(f+w)/2,y:(m+C)/2},geometry:{type:"LineString",coordinates:[[w,C],[w,m],[f,m],[f,m]]}}]}}};o(I)})});function Eh(a,o){const f=w=>Pl(w),m=Rl($s($s({},Ji),o),{getTileData:f});return{data:a,dataArray:[],tilesetOptions:m,isTile:!0}}var qh=Object.defineProperty,Ka=Object.defineProperties,Cs=Object.getOwnPropertyDescriptors,vc=Object.getOwnPropertySymbols,Ui=Object.prototype.hasOwnProperty,Cf=Object.prototype.propertyIsEnumerable,Md=(a,o,f)=>o in a?qh(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Kh=(a,o)=>{for(var f in o||(o={}))Ui.call(o,f)&&Md(a,f,o[f]);if(vc)for(var f of vc(o))Cf.call(o,f)&&Md(a,f,o[f]);return a},Of=(a,o)=>Ka(a,Cs(o)),mc=(a,o)=>{var f={};for(var m in a)Ui.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&vc)for(var m of vc(a))o.indexOf(m)<0&&Cf.call(a,m)&&(f[m]=a[m]);return f};function Jp(a,o){const f=o,{extent:m,coordinates:w,width:C,height:I}=f,B=mc(f,["extent","coordinates","width","height"]);a.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,re,Ce]=B.bands||[0,1,2],Se=[a[V],a[re],a[Ce]],ze=[],[Rt,Jt]=(B==null?void 0:B.countCut)||[2,98],Nn=(B==null?void 0:B.RMinMax)||Ml(Se[0],Rt,Jt),sr=(B==null?void 0:B.GMinMax)||Ml(Se[1],Rt,Jt),Ar=(B==null?void 0:B.BMinMax)||Ml(Se[2],Rt,Jt);for(let ci=0;ci<Se[0].length;ci++)ze.push(Math.max(0,Se[0][ci]-Nn[0])),ze.push(Math.max(0,Se[1][ci]-sr[0])),ze.push(Math.max(0,Se[2][ci]-Ar[0]));const mr=hn(w,m);return{_id:1,dataArray:[Of(Kh({_id:1,data:ze,width:C,height:I,rMinMax:Nn,gMinMax:sr,bMinMax:Ar},B),{coordinates:mr})]}}var Sh=Object.defineProperty,nc=Object.defineProperties,rh=Object.getOwnPropertyDescriptors,Rd=Object.getOwnPropertySymbols,Pd=Object.prototype.hasOwnProperty,Lp=Object.prototype.propertyIsEnumerable,e0=(a,o,f)=>o in a?Sh(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Oc=(a,o)=>{for(var f in o||(o={}))Pd.call(o,f)&&e0(a,f,o[f]);if(Rd)for(var f of Rd(o))Lp.call(o,f)&&e0(a,f,o[f]);return a},pf=(a,o)=>nc(a,rh(o)),Sa=(a,o)=>{var f={};for(var m in a)Pd.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&Rd)for(var m of Rd(a))o.indexOf(m)<0&&Lp.call(a,m)&&(f[m]=a[m]);return f};function gc(a,o){const f=o,{extent:m=[121.168,30.2828,121.384,30.4219],coordinates:w,width:C,height:I}=f,B=Sa(f,["extent","coordinates","width","height"]);a.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,re]=B.bands||[0,1],Ce=[a[V],a[re]],Se=[];for(let Jt=0;Jt<Ce[0].length;Jt++)Se.push((Ce[1][Jt]-Ce[0][Jt])/(Ce[1][Jt]+Ce[0][Jt]));const ze=hn(w,m);return{_id:1,dataArray:[pf(Oc({_id:1,data:Se,width:C,height:I},B),{coordinates:ze})]}}var pl=D(46343),vl=D(26729),Qh=D.n(vl),wh=D(69848),Mf=D.n(wh),rc=Object.defineProperty,Id=Object.getOwnPropertySymbols,ko=Object.prototype.hasOwnProperty,Ao=Object.prototype.propertyIsEnumerable,Ql=(a,o,f)=>o in a?rc(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,ju=(a,o)=>{for(var f in o||(o={}))ko.call(o,f)&&Ql(a,f,o[f]);if(Id)for(var f of Id(o))Ao.call(o,f)&&Ql(a,f,o[f]);return a};function Vu(a,o){const{radius:f=40,maxZoom:m=18,minZoom:w=0,zoom:C=2}=o;if(a.pointIndex){const V=a.pointIndex.getClusters(a.extent,Math.floor(C));return a.dataArray=ml(V),a}const I=new(Mf())({radius:f,minZoom:w,maxZoom:m}),B={type:"FeatureCollection",features:[]};return B.features=a.dataArray.map(V=>({type:"Feature",geometry:{type:"Point",coordinates:V.coordinates},properties:ju({},V)})),I.load(B.features),I}function ml(a){return a.map((o,f)=>ju({coordinates:o.geometry.coordinates,_id:f+1},o.properties))}function Zc(a){if(a.length===0)throw new Error("max requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]>o&&(o=a[f]);return o}function Th(a){if(a.length===0)throw new Error("min requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]<o&&(o=a[f]);return o}function Jh(a){if(a.length===0)return 0;let o=a[0],f=0,m;for(let w=1;w<a.length;w++)m=o+a[w]*1,Math.abs(o)>=Math.abs(a[w])?f+=o-m+a[w]:f+=a[w]-m+o,o=m;return o+f*1}function Ss(a){if(a.length===0)throw new Error("mean requires at least one data point");return Jh(a)/a.length}var bu={min:Th,max:Zc,mean:Ss,sum:Jh},k0=Object.defineProperty,Ah=Object.getOwnPropertySymbols,sp=Object.prototype.hasOwnProperty,Ch=Object.prototype.propertyIsEnumerable,ic=(a,o,f)=>o in a?k0(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,ih=(a,o)=>{for(var f in o||(o={}))sp.call(o,f)&&ic(a,f,o[f]);if(Ah)for(var f of Ah(o))Ch.call(o,f)&&ic(a,f,o[f]);return a},yc=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),{cloneDeep:t0,isFunction:Hf,isString:lp,mergeWith:n0}=Le.lodashUtil;function ed(a,o){if(Array.isArray(o))return o}var td=class extends vl.EventEmitter{constructor(a,o){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new pl.ni},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=a,this.initCfg(o),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(a){return this.clusterIndex.getClusters(this.caculClusterExtent(2),a)}getClustersLeaves(a){return this.clusterIndex.getLeaves(a,1/0)}getParserType(){return this.parser.type}updateClusterData(a){const{method:o="sum",field:f}=this.clusterOptions;let m=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(a));this.clusterOptions.zoom=a,m.forEach(w=>{w.id||(w.properties.point_count=1)}),(f||Hf(o))&&(m=m.map(w=>{const C=w.id;if(C){const B=this.clusterIndex.getLeaves(C,1/0).map(re=>re.properties);let V;if(lp(o)&&f){const re=Tn(B,f);V=bu[o](re)}Hf(o)&&(V=o(B)),w.properties.stat=V}else w.properties.point_count=1;return w})),this.data=E("geojson")({type:"FeatureCollection",features:m}),this.executeTrans()}getFeatureById(a){const{type:o="geojson",geometry:f}=this.parser;if(o==="geojson"&&!this.cluster){const m=a<this.originData.features.length?this.originData.features[a]:"null",w=t0(m);if(w!=null&&w.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const C=this.data.dataArray.find(I=>I._id===a);w.properties=C}return w}else return o==="json"&&f?this.data.dataArray.find(m=>m._id===a):a<this.data.dataArray.length?this.data.dataArray[a]:"null"}updateFeaturePropertiesById(a,o){this.data.dataArray=this.data.dataArray.map(f=>f._id===a?ih(ih({},f),o):f),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(a,o){const f=this.data.dataArray.find(m=>m[a]===o);return f==null?void 0:f._id}setData(a,o){this.originData=a,this.dataArrayChanged=!1,this.initCfg(o),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var a;(a=this.tileset)==null||a.reloadAll()}reloadTilebyId(a,o,f){var m;(m=this.tileset)==null||m.reloadTileById(a,o,f)}reloadTileByLnglat(a,o,f){var m;(m=this.tileset)==null||m.reloadTileByLnglat(a,o,f)}getTileExtent(a,o){var f;return(f=this.tileset)==null?void 0:f.getTileExtent(a,o)}getTileByZXY(a,o,f){var m;return(m=this.tileset)==null?void 0:m.getTileByZXY(a,o,f)}reloadTileByExtent(a,o){var f;(f=this.tileset)==null||f.reloadTileByExtent(a,o)}destroy(){var a;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(a=this.tileset)==null||a.destroy()}processData(){return yc(this,null,function*(){return new Promise((a,o)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),a({})}catch(f){o(f)}})})}initCfg(a){this.cfg=n0(this.cfg,a,ed);const o=this.cfg;o&&(o.parser&&(this.parser=o.parser),o.transforms&&(this.transforms=o.transforms),this.cluster=o.cluster||!1,o.clusterOptions&&(this.cluster=!0,this.clusterOptions=ih(ih({},this.clusterOptions),o.clusterOptions)))}init(){return yc(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const a=this.parser,o=a.type||"geojson",f=E(o);this.data=f(this.originData,a),this.tileset=this.initTileset(),!a.cancelExtent&&(this.extent=(0,Le.We)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(a){this.center=[(a[0]+a[2])/2,(a[1]+a[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:a}=this.data;return a?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(a),this.tileset):new Le.nx(ih({},a))):void 0}executeTrans(){this.transforms.forEach(o=>{const{type:f}=o,m=$(f)(this.data,o);Object.assign(this.data,m)})}initCluster(){if(!this.cluster)return;const a=this.clusterOptions||{};this.clusterIndex=Vu(this.data,a)}caculClusterExtent(a){let o=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(o=(0,Le.yA)((0,Le.ds)(this.extent),a)),o[0].concat(o[1])}};function r0(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.filter(f)),a}var vf=6378e3;function Wf(a,o){const f=a.dataArray,{size:m=10}=o,w=m/(2*Math.PI*vf)*(256<<20)/2,{gridHash:C,gridOffset:I}=i0(f,m),B=Gf(C,I,o);return{yOffset:w,xOffset:w,radius:w,type:"grid",dataArray:B}}function i0(a,o){let f=1/0,m=-1/0,w;for(const V of a)w=V.coordinates[1],Number.isFinite(w)&&(f=w<f?w:f,m=w>m?w:m);const C=(f+m)/2,I=nd(o,C);if(I.xOffset<=0||I.yOffset<=0)return{gridHash:{},gridOffset:I};const B={};for(const V of a){const re=V.coordinates[1],Ce=V.coordinates[0];if(Number.isFinite(re)&&Number.isFinite(Ce)){const Se=Math.floor((re+90)/I.yOffset),ze=Math.floor((Ce+180)/I.xOffset),Rt=`${Se}-${ze}`;B[Rt]=B[Rt]||{count:0,points:[]},B[Rt].count+=1,B[Rt].points.push(V)}}return{gridHash:B,gridOffset:I}}function nd(a,o){const f=Rf(a),m=z0(o,a);return{yOffset:f,xOffset:m}}function Rf(a){return a/vf*(180/Math.PI)}function z0(a,o){return o/vf*(180/Math.PI)/Math.cos(a*Math.PI/180)}function Gf(a,o,f){return Object.keys(a).reduce((m,w,C)=>{const I=w.split("-"),B=parseInt(I[0],10),V=parseInt(I[1],10),re={};if(f.field&&f.method){const Ce=Le.a5.getColumn(a[w].points,f.field);re[f.method]=Le.a5.statMap[f.method](Ce)}return Object.assign(re,{_id:C,coordinates:(0,Le.Z)([-180+o.xOffset*(V+.5),-90+o.yOffset*(B+.5)]),rawData:a[w].points,count:a[w].count}),m.push(re),m},[])}var mf=Math.PI/3,o0=[0,mf,2*mf,3*mf,4*mf,5*mf];function _(a){return a[0]}function S(a){return a[1]}function x(){var a=0,o=0,f=1,m=1,w=_,C=S,I,B,V;function re(Se){var ze={},Rt=[],Jt,Nn=Se.length;for(Jt=0;Jt<Nn;++Jt)if(!(isNaN(Ar=+w.call(null,sr=Se[Jt],Jt,Se))||isNaN(mr=+C.call(null,sr,Jt,Se)))){var sr,Ar,mr,Vr=Math.round(mr=mr/V),ci=Math.round(Ar=Ar/B-(Vr&1)/2),Io=mr-Vr;if(Math.abs(Io)*3>1){var to=Ar-ci,Qr=ci+(Ar<ci?-1:1)/2,no=Vr+(mr<Vr?-1:1),ja=Ar-Qr,Eo=mr-no;to*to+Io*Io>ja*ja+Eo*Eo&&(ci=Qr+(Vr&1?1:-1)/2,Vr=no)}var ra=ci+"-"+Vr,Ia=ze[ra];Ia?Ia.push(sr):(Rt.push(Ia=ze[ra]=[sr]),Ia.x=(ci+(Vr&1)/2)*B,Ia.y=Vr*V)}return Rt}function Ce(Se){var ze=0,Rt=0;return o0.map(function(Jt){var Nn=Math.sin(Jt)*Se,sr=-Math.cos(Jt)*Se,Ar=Nn-ze,mr=sr-Rt;return ze=Nn,Rt=sr,[Ar,mr]})}return re.hexagon=function(Se){return"m"+Ce(Se==null?I:+Se).join("l")+"z"},re.centers=function(){for(var Se=[],ze=Math.round(o/V),Rt=Math.round(a/B),Jt=ze*V;Jt<m+I;Jt+=V,++ze)for(var Nn=Rt*B+(ze&1)*B/2;Nn<f+B/2;Nn+=B)Se.push([Nn,Jt]);return Se},re.mesh=function(){var Se=Ce(I).slice(0,4).join("l");return re.centers().map(function(ze){return"M"+ze+"m"+Se}).join("")},re.x=function(Se){return arguments.length?(w=Se,re):w},re.y=function(Se){return arguments.length?(C=Se,re):C},re.radius=function(Se){return arguments.length?(I=+Se,B=I*2*Math.sin(mf),V=I*1.5,re):I},re.size=function(Se){return arguments.length?(a=o=0,f=+Se[0],m=+Se[1],re):[f-a,m-o]},re.extent=function(Se){return arguments.length?(a=+Se[0][0],o=+Se[0][1],f=+Se[1][0],m=+Se[1][1],re):[[a,o],[f,m]]},re.radius(1)}var O=Object.defineProperty,k=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,ct=(a,o,f)=>o in a?O(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,jt=(a,o)=>{for(var f in o||(o={}))ge.call(o,f)&&ct(a,f,o[f]);if(K)for(var f of K(o))Ve.call(o,f)&&ct(a,f,o[f]);return a},Vt=(a,o)=>k(a,Z(o)),Xt=6378e3;function En(a,o){const f=a.dataArray,{size:m=10,method:w="sum"}=o,C=m/(2*Math.PI*Xt)*(256<<20)/2,I=f.map(Ce=>{const[Se,ze]=(0,Le.Z)(Ce.coordinates);return Vt(jt({},Ce),{coordinates:[Se,ze]})});return{dataArray:x().radius(C).x(Ce=>Ce.coordinates[0]).y(Ce=>Ce.coordinates[1])(I).map((Ce,Se)=>{if(o.field&&w){const ze=Le.a5.getColumn(Ce,o.field);Ce[w]=Le.a5.statMap[w](ze)}return{[o.method]:Ce[w],count:Ce.length,rawData:Ce,coordinates:[Ce.x,Ce.y],_id:Se}}),radius:C,xOffset:C,yOffset:C,type:"hexagon"}}var gn=Object.defineProperty,kn=Object.getOwnPropertySymbols,un=Object.prototype.hasOwnProperty,zn=Object.prototype.propertyIsEnumerable,tr=(a,o,f)=>o in a?gn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,gr=(a,o)=>{for(var f in o||(o={}))un.call(o,f)&&tr(a,f,o[f]);if(kn)for(var f of kn(o))zn.call(o,f)&&tr(a,f,o[f]);return a};function Ir(a,o){const{sourceField:f,targetField:m,data:w}=o,C={};return w.forEach(I=>{C[I[f]]=I}),a.dataArray=a.dataArray.map(I=>{const B=I[m];return gr(gr({},I),C[B])}),a}function Or(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.map(f)),a}var zr=D(4771);fe("rasterTile",xh),fe("mvt",Td),fe("geojsonvt",zi),fe("testTile",Eh),fe("geojson",$n),fe("jsonTile",al),fe("image",ia),fe("csv",de),fe("json",ot),fe("raster",Cc),fe("rasterRgb",Pn),fe("rgb",Jp),fe("ndi",gc),se("cluster",Vu),se("filter",r0),se("join",Ir),se("map",Or),se("grid",Wf),se("hexagon",En);var ii=td;class Hi extends null{getMarkerLayerContainerSize(){}constructor(o){super(),_defineProperty(this,"markerOption",void 0),_defineProperty(this,"popup",void 0),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"lngLat",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"added",!1),_defineProperty(this,"preLngLat",{lng:0,lat:0}),_defineProperty(this,"onMarkerDragStart",f=>{const m=this.mapsService.getContainer();if(!m)return;this.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});const{left:w,top:C}=m.getClientRects()[0],{x:I,y:B}=f;this.preLngLat=this.mapsService.containerToLngLat([I-w,B-C]),this.mapsService.on("mousemove",this.onMarkerDragMove),document.addEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragstart",this.lngLat)}),_defineProperty(this,"onMarkerDragMove",f=>{const{lng:m,lat:w}=this.preLngLat,{lng:C,lat:I}=f.lnglat,B={lng:this.lngLat.lng+C-m,lat:this.lngLat.lat+I-w};this.setLnglat(B),this.preLngLat=f.lnglat,this.emit("dragging",B)}),_defineProperty(this,"onMarkerDragEnd",()=>{this.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragend",this.lngLat)}),_defineProperty(this,"eventHandle",f=>{this.polyfillEvent(f),this.emit(f.type,{target:f,data:this.markerOption.extData,lngLat:this.lngLat})}),_defineProperty(this,"touchStartTime",void 0),this.markerOption=_objectSpread(_objectSpread({},this.getDefault()),o),bindAll(["update","onMove","onMapClick","updatePositionWhenZoom"],this),this.init()}getDefault(){return{element:void 0,anchor:anchorType.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}addTo(o){this.scene=o,this.mapsService=o.mapService;const{element:f}=this.markerOption;return this.mapsService.getMarkerContainer().appendChild(f),this.registerMarkerEvent(f),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}remove(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();const{element:o}=this.markerOption;return o&&DOM.remove(o),this.popup&&this.popup.remove(),this}setLnglat(o){return this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}getLnglat(){return this.lngLat}getElement(){return this.markerOption.element}setElement(o){if(!this.added)return this.once("added",()=>{this.setElement(o)}),this;const{element:f}=this.markerOption;return f&&DOM.remove(f),this.markerOption.element=o,this.init(),this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.updateDraggable(),this.update(),this}openPopup(){if(!this.added)return this.once("added",()=>{this.openPopup()}),this;const o=this.popup;return o?(o.isOpen()||o.addTo(this.scene),this):this}closePopup(){this.added||this.once("added",()=>{this.closePopup()});const o=this.popup;return o&&o.remove(),this}setPopup(o){return this.popup=o,this.lngLat&&this.popup.setLnglat(this.lngLat),this}togglePopup(){const o=this.popup;if(o)o.isOpen()?o.remove():o.addTo(this.scene);else return this;return this}getPopup(){return this.popup}getOffset(){return this.markerOption.offsets}setDraggable(o){this.markerOption.draggable=o,this.updateDraggable()}getDraggable(){return this.markerOption.draggable}getExtData(){return this.markerOption.extData}setExtData(o){this.markerOption.extData=o}update(){if(!this.mapsService)return;const{element:o,anchor:f}=this.markerOption;this.updatePosition(),DOM.setTransform(o,`${anchorTranslate[f]}`)}updatePositionWhenZoom(o){if(!this.mapsService)return;const{element:f,offsets:m}=this.markerOption,{lng:w,lat:C}=this.lngLat;if(f){f.style.display="block",f.style.whiteSpace="nowrap";const{containerHeight:I,containerWidth:B,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;const re=o.map,Ce=o.center,Se=o.zoom,ze=re.DE(this.lngLat,Se,Ce);if(ze.x=Math.round(ze.x+m[0]),ze.y=Math.round(ze.y-m[1]),Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if(ze.x>B){const Rt=this.mapsService.lngLatToContainer([w-360,C]);ze.x=Rt.x}if(ze.x<0){const Rt=this.mapsService.lngLatToContainer([w+360,C]);ze.x=Rt.x}}(ze.x>B||ze.x<0||ze.y>I||ze.y<0)&&(f.style.display="none"),f.style.left=ze.x+"px",f.style.top=ze.y+"px",f.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}onMapClick(o){const{element:f}=this.markerOption;this.popup&&f&&this.togglePopup()}getCurrentContainerSize(){const o=this.mapsService.getContainer();return{containerHeight:(o==null?void 0:o.scrollHeight)||0,containerWidth:(o==null?void 0:o.scrollWidth)||0,bounds:this.mapsService.getBounds()}}updateDraggable(){const{element:o}=this.markerOption;o==null||o.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(o==null||o.addEventListener("mousedown",this.onMarkerDragStart))}updatePosition(){if(!this.mapsService)return;const{element:o,offsets:f}=this.markerOption,{lng:m,lat:w}=this.lngLat,C=this.mapsService.lngLatToContainer([m,w]);if(o){o.style.display="block",o.style.whiteSpace="nowrap";const{containerHeight:I,containerWidth:B,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;if(Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if(C.x>B){const re=this.mapsService.lngLatToContainer([m-360,w]);C.x=re.x}if(C.x<0){const re=this.mapsService.lngLatToContainer([m+360,w]);C.x=re.x}}(C.x>B||C.x<0||C.y>I||C.y<0)&&(o.style.display="none"),o.style.left=C.x+f[0]+"px",o.style.top=C.y-f[1]+"px"}}init(){let{element:o}=this.markerOption;const{color:f,anchor:m}=this.markerOption;if(!o){o=DOM.create("div"),this.markerOption.element=o;const w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height","48px"),w.setAttributeNS(null,"width","48px"),w.setAttributeNS(null,"viewBox","0 0 1024 1024");const C=document.createElementNS("http://www.w3.org/2000/svg","path");C.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),C.setAttributeNS(null,"fill",f),w.appendChild(C),o.appendChild(w)}DOM.addClass(o,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(w=>{var C,I;const B=((C=this.markerOption)===null||C===void 0?void 0:C.style)&&((I=this.markerOption)===null||I===void 0?void 0:I.style[w]);o&&(o.style[w]=B)}),applyAnchorClass(o,m,"marker")}registerMarkerEvent(o){o.addEventListener("click",this.onMapClick),o.addEventListener("mousemove",this.eventHandle),o.addEventListener("click",this.eventHandle),o.addEventListener("mousedown",this.eventHandle),o.addEventListener("mouseup",this.eventHandle),o.addEventListener("dblclick",this.eventHandle),o.addEventListener("contextmenu",this.eventHandle),o.addEventListener("mouseover",this.eventHandle),o.addEventListener("mouseout",this.eventHandle),o.addEventListener("touchstart",this.eventHandle),o.addEventListener("touchend",this.eventHandle)}unRegisterMarkerEvent(){const o=this.getElement();o.removeEventListener("click",this.onMapClick),o.removeEventListener("mousemove",this.eventHandle),o.removeEventListener("click",this.eventHandle),o.removeEventListener("mousedown",this.eventHandle),o.removeEventListener("mouseup",this.eventHandle),o.removeEventListener("dblclick",this.eventHandle),o.removeEventListener("contextmenu",this.eventHandle),o.removeEventListener("mouseover",this.eventHandle),o.removeEventListener("mouseout",this.eventHandle),o.removeEventListener("touchstart",this.eventHandle),o.removeEventListener("touchend",this.eventHandle)}polyfillEvent(o){!this.mapsService||this.mapsService.version!=="GAODE2.x"||isPC()||(o.type==="touchstart"&&(this.touchStartTime=Date.now()),o.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:o,data:this.markerOption.extData,lngLat:this.lngLat}))}addDragHandler(o){return null}onUp(o){throw new Error("Method not implemented.")}}const{merge:Fi}=Le.lodashUtil;class po extends null{constructor(o){var f;super(),_defineProperty(this,"markers",[]),_defineProperty(this,"markerLayerOption",void 0),_defineProperty(this,"clusterIndex",void 0),_defineProperty(this,"points",[]),_defineProperty(this,"clusterMarkers",[]),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"zoom",void 0),_defineProperty(this,"bbox",void 0),_defineProperty(this,"inited",void 0),_defineProperty(this,"containerSize",void 0),this.markerLayerOption=Fi(this.getDefault(),o),bindAll(["update"],this),this.zoom=((f=this.markerLayerOption.clusterOption)===null||f===void 0?void 0:f.zoom)||-99}getDefault(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}addTo(o){return this.scene=o,this.mapsService=o.mapService,this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}setContainerSize(){if(!this.mapsService)return;const o=this.mapsService.getContainer();this.containerSize={containerWidth:(o==null?void 0:o.scrollWidth)||0,containerHeight:(o==null?void 0:o.scrollHeight)||0,bounds:this.mapsService.getBounds()}}getContainerSize(){return this.containerSize}addMarker(o){const f=this.markerLayerOption.cluster;if(o.getMarkerLayerContainerSize=this.getContainerSize.bind(this),f&&(this.addPoint(o,this.markers.length),this.mapsService)){const m=this.mapsService.getZoom(),w=this.mapsService.getBounds();this.bbox=padBounds(w,.5),this.zoom=Math.floor(m),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(o)}removeMarker(o){this.markers.indexOf(o);const f=this.markers.indexOf(o);f>-1&&(this.markers.splice(f,1),this.markerLayerOption.cluster&&(this.removePoint(f),this.mapsService&&this.getClusterMarker(this.bbox,this.zoom)))}hide(){this.markers.map(o=>{o.getElement().style.opacity="0"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="0"})}show(){this.markers.map(o=>{o.getElement().style.opacity="1"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="1"})}getMarkers(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}getOriginMarkers(){return this.markers}addMarkers(){this.getMarkers().forEach(o=>{o.addTo(this.scene)})}clear(){this.markers.forEach(o=>{o.remove()}),this.clusterMarkers.forEach(o=>{o.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}destroy(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}addPoint(o,f){const{lng:m,lat:w}=o.getLnglat(),C={geometry:{type:"Point",coordinates:[m,w]},properties:_objectSpread(_objectSpread({},o.getExtData()),{},{marker_id:f})};this.points.push(C),this.clusterIndex&&this.clusterIndex.load(this.points)}removePoint(o){const f=this.points.findIndex(m=>m.properties.marker_id===o);f>-1&&this.points.splice(f,1),this.clusterIndex&&this.clusterIndex.load(this.points)}initCluster(){if(!this.markerLayerOption.cluster)return;const{radius:o,minZoom:f=0,maxZoom:m}=this.markerLayerOption.clusterOption;this.clusterIndex=new Supercluster({radius:o,minZoom:f,maxZoom:m}),this.clusterIndex.load(this.points)}getClusterMarker(o,f){const m=o[0].concat(o[1]),w=this.clusterIndex.getClusters(m,f);this.clusterMarkers.forEach(C=>{C.remove()}),this.clusterMarkers=[],w.forEach(C=>{var I;const{field:B,method:V}=this.markerLayerOption.clusterOption;if((I=C.properties)!==null&&I!==void 0&&I.cluster_id){var re;const Se=this.getLeaves((re=C.properties)===null||re===void 0?void 0:re.cluster_id);if(C.properties.clusterData=Se,B&&V){const ze=Se==null?void 0:Se.map(sr=>({[B]:sr.properties[B]})),Rt=Satistics.getColumn(ze,B),Jt=Satistics.getSatByColumn(V,Rt),Nn="point_"+V;C.properties[Nn]=Jt.toFixed(2)}}const Ce=this.clusterMarker(C);this.clusterMarkers.push(Ce),Ce.addTo(this.scene)})}getLeaves(o,f=1/0,m=0){return o?this.clusterIndex.getLeaves(o,f,m):null}clusterMarker(o){const f=this.markerLayerOption.clusterOption,{element:m=this.generateElement.bind(this)}=f;return new Marker({element:m(o)}).setLnglat({lng:o.geometry.coordinates[0],lat:o.geometry.coordinates[1]})}normalMarker(o){const f=o.properties.marker_id;return this.markers[f]}update(){if(!this.mapsService||this.markers.length===0)return;const o=this.mapsService.getZoom(),f=this.mapsService.getBounds();(!this.bbox||Math.abs(o-this.zoom)>=1||!boundsContains(this.bbox,f))&&(this.bbox=padBounds(f,.5),this.zoom=Math.floor(o),this.getClusterMarker(this.bbox,this.zoom))}generateElement(o){const f=DOM.create("div","l7-marker-cluster"),m=DOM.create("div","",f),w=DOM.create("span","",m),{field:C,method:I}=this.markerLayerOption.clusterOption;o.properties.point_count=o.properties.point_count||1;const B=C&&I?o.properties["point_"+I]||o.properties[C]:o.properties.point_count;return w.textContent=B,f}}var Vo=D(4157),$r=D(1413),Kt=D(4942);class Ya extends Qh(){constructor(o){super(),(0,Kt.Z)(this,"controlOption",void 0),(0,Kt.Z)(this,"container",void 0),(0,Kt.Z)(this,"isShow",void 0),(0,Kt.Z)(this,"sceneContainer",void 0),(0,Kt.Z)(this,"scene",void 0),(0,Kt.Z)(this,"mapsService",void 0),(0,Kt.Z)(this,"renderService",void 0),(0,Kt.Z)(this,"layerService",void 0),(0,Kt.Z)(this,"controlService",void 0),(0,Kt.Z)(this,"configService",void 0),Ya.controlCount++,this.controlOption=(0,$r.Z)((0,$r.Z)({},this.getDefault(o)),o||{})}getOptions(){return this.controlOption}setOptions(o){const f=this.getDefault(o);Object.entries(o).forEach(([m,w])=>{w===void 0&&(o[m]=f[m])}),"position"in o&&this.setPosition(o.position),"className"in o&&this.setClassName(o.className),"style"in o&&this.setStyle(o.style),this.controlOption=(0,$r.Z)((0,$r.Z)({},this.controlOption),o)}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd(),Le.SO.addClass(this.container,"l7-control");const{className:f,style:m}=this.controlOption;return f&&this.setClassName(f),m&&this.setStyle(m),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;Le.SO.remove(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return Le.SO.create("div")}onRemove(){}show(){const o=this.container;Le.SO.removeClass(o,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const o=this.container;Le.SO.addClass(o,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(o){return{position:we.d.TOPRIGHT,name:`${Ya.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(o){if(this.mapsService&&o&&o.screenX>0&&o.screenY>0){const f=this.mapsService.getContainer();f!==null&&f.focus()}}setPosition(o=we.d.TOPLEFT){const f=this.controlService;return f&&f.removeControl(this),this.controlOption.position=o,f&&f.addControl(this,this.sceneContainer),this}setClassName(o){const f=this.container,{className:m}=this.controlOption;m&&Le.SO.removeClass(f,m),o&&Le.SO.addClass(f,o)}setStyle(o){const f=this.container;o?f.setAttribute("style",o):f.removeAttribute("style")}insertContainer(){const o=this.controlOption.position,f=this.container;if(o instanceof Element)o.appendChild(f);else{const m=this.controlService.controlCorners[o];["bottomleft","bottomright","righttop","rightbottom"].includes(o)?m.insertBefore(f,m.firstChild):m.appendChild(f)}}checkUpdateOption(o,f){return f.some(m=>m in o)}}(0,Kt.Z)(Ya,"controlCount",0);class yo extends null{constructor(...o){super(...o),_defineProperty(this,"isDisable",!1),_defineProperty(this,"button",void 0),_defineProperty(this,"buttonText",void 0),_defineProperty(this,"buttonIcon",void 0)}setIsDisable(o){if(this.isDisable=o,o){var f;(f=this.button)===null||f===void 0||f.setAttribute("disabled","true")}else{var m;(m=this.button)===null||m===void 0||m.removeAttribute("disabled")}}createButton(o=""){return DOM.create("button",`l7-button-control ${o}`)}onAdd(){this.button=this.createButton(),this.isDisable=!1;const{title:o,btnText:f,btnIcon:m}=this.controlOption;return this.setBtnTitle(o),this.setBtnText(f),this.setBtnIcon(m),this.button}onRemove(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}setOptions(o){const{title:f,btnText:m,btnIcon:w}=o;this.checkUpdateOption(o,["title"])&&this.setBtnTitle(f),this.checkUpdateOption(o,["btnIcon"])&&this.setBtnIcon(w),this.checkUpdateOption(o,["btnText"])&&this.setBtnText(m),super.setOptions(o)}setBtnTitle(o){var f;(f=this.button)===null||f===void 0||f.setAttribute("title",o!=null?o:"")}setBtnIcon(o){if(this.buttonIcon&&DOM.remove(this.buttonIcon),o){var f;const C=(f=this.button)===null||f===void 0?void 0:f.firstChild;if(C){var m;(m=this.button)===null||m===void 0||m.insertBefore(o,C)}else{var w;(w=this.button)===null||w===void 0||w.appendChild(o)}this.buttonIcon=o}}setBtnText(o){if(this.button)if(DOM.removeClass(this.button,"l7-button-control--row"),DOM.removeClass(this.button,"l7-button-control--column"),o){let m=this.buttonText;if(!m){var f;m=DOM.create("div","l7-button-control__text"),(f=this.button)===null||f===void 0||f.appendChild(m),this.buttonText=m}m.innerText=o,DOM.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!o&&this.buttonText&&(DOM.remove(this.buttonText),this.buttonText=void 0)}}class Qo extends vl.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(o,f){super(),(0,Kt.Z)(this,"popperDOM",void 0),(0,Kt.Z)(this,"contentDOM",void 0),(0,Kt.Z)(this,"button",void 0),(0,Kt.Z)(this,"option",void 0),(0,Kt.Z)(this,"isShow",!1),(0,Kt.Z)(this,"content",void 0),(0,Kt.Z)(this,"timeout",null),(0,Kt.Z)(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),Le.SO.removeClass(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&Qo.conflictPopperList.forEach(m=>{m!==this&&m.isShow&&m.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),(0,Kt.Z)(this,"hide",()=>this.isShow?(Le.SO.addClass(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),(0,Kt.Z)(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),(0,Kt.Z)(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),(0,Kt.Z)(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),(0,Kt.Z)(this,"onPopperUnClick",m=>{Le.SO.findParentElement(m.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),(0,Kt.Z)(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),(0,Kt.Z)(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=o,this.option=f,this.init(),f.unique&&Qo.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(o){typeof o=="string"?this.contentDOM.innerHTML=o:o instanceof HTMLElement&&(Le.SO.clearChildren(this.contentDOM),this.contentDOM.appendChild(o)),this.content=o}init(){const{trigger:o}=this.option;this.popperDOM=this.createPopper(),o==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Le.SO.remove(this.popperDOM)}resetPopperPosition(){const o={},{container:f,offset:m=[0,0],placement:w}=this.option,[C,I]=m,B=this.button.getBoundingClientRect(),V=f.getBoundingClientRect(),{left:re,right:Ce,top:Se,bottom:ze}=Le.SO.getDiffRect(B,V);let Rt=!1,Jt=!1;/^(left|right)/.test(w)?(w.includes("left")?o.right=`${B.width+Ce}px`:w.includes("right")&&(o.left=`${B.width+re}px`),w.includes("start")?o.top=`${Se}px`:w.includes("end")?o.bottom=`${ze}px`:(o.top=`${Se+B.height/2}px`,Jt=!0,o.transform=`translate(${C}px, calc(${I}px - 50%))`)):/^(top|bottom)/.test(w)&&(w.includes("top")?o.bottom=`${B.height+ze}px`:w.includes("bottom")&&(o.top=`${B.height+Se}px`),w.includes("start")?o.left=`${re}px`:w.includes("end")?o.right=`${Ce}px`:(o.left=`${re+B.width/2}px`,Rt=!0,o.transform=`translate(calc(${C}px - 50%), ${I}px)`)),o.transform=`translate(calc(${C}px - ${Rt?"50%":"0%"}), calc(${I}px - ${Jt?"50%":"0%"})`;const Nn=w.split("-");Nn.length&&Le.SO.addClass(this.popperDOM,Nn.map(sr=>`l7-popper-${sr}`).join(" ")),Le.SO.addStyle(this.popperDOM,Le.SO.css2Style(o))}createPopper(){const{container:o,className:f="",content:m}=this.option,w=Le.SO.create("div",`l7-popper l7-popper-hide ${f}`),C=Le.SO.create("div","l7-popper-content"),I=Le.SO.create("div","l7-popper-arrow");return w.appendChild(C),w.appendChild(I),o.appendChild(w),this.popperDOM=w,this.contentDOM=C,m&&this.setContent(m),w}}(0,Kt.Z)(Qo,"conflictPopperList",[]);const Oa={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"};class fa extends null{constructor(...o){super(...o),_defineProperty(this,"popper",void 0)}getPopper(){return this.popper}hide(){this.popper.hide(),super.hide()}getDefault(o){var f;const m=super.getDefault(o),w=(f=o==null?void 0:o.position)!==null&&f!==void 0?f:m.position;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{popperPlacement:w instanceof Element?"bottom":Oa[w],popperTrigger:"click"})}onAdd(){const o=super.onAdd();return this.initPopper(),o}onRemove(){this.popper.destroy()}initPopper(){const{popperClassName:o,popperPlacement:f,popperTrigger:m}=this.controlOption,w=this.mapsService.getMapContainer();return this.popper=new Popper(this.button,{className:o,placement:f,trigger:m,container:w,unique:!0}),this.popper.on("show",()=>{this.emit("popperShow",this)}).on("hide",()=>{this.emit("popperHide",this)}),this.popper}setOptions(o){if(super.setOptions(o),this.checkUpdateOption(o,["popperPlacement","popperTrigger","popperClassName"])){const f=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(f)}}}var Go=function(a){return a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index",a}(Go||{});class xa extends null{constructor(...o){super(...o),_defineProperty(this,"selectValue",[]),_defineProperty(this,"optionDOMList",void 0),_defineProperty(this,"createNormalOption",f=>{const m=this.selectValue.includes(f.value),w=DOM.create("div",`l7-select-control-item ${m?Go.ActiveOptionClassName:""}`);this.getIsMultiple()?w.appendChild(this.createCheckbox(m)):w.appendChild(this.createRadio(m)),f.icon&&w.appendChild(f.icon);const C=DOM.create("span");return C.innerText=f.text,w.appendChild(C),w}),_defineProperty(this,"onItemClick",f=>{if(this.getIsMultiple()){const m=this.selectValue.findIndex(w=>w===f.value);m>-1?this.selectValue.splice(m,1):this.selectValue=[...this.selectValue,f.value]}else this.selectValue=[f.value];this.setSelectValue(this.selectValue)})}setOptions(o){super.setOptions(o);const{options:f}=o;f&&this.popper.setContent(this.getPopperContent(f))}onAdd(){const o=super.onAdd(),{defaultValue:f}=this.controlOption;return f&&(this.selectValue=this.transSelectValue(f)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),o}getSelectValue(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}setSelectValue(o,f=!0){const m=this.transSelectValue(o);this.optionDOMList.forEach(w=>{const C=w.getAttribute(Go.OptionValueAttrKey),I=w.querySelector("input[type=checkbox]"),B=w.querySelector("input[type=radio]"),V=m.includes(C),re=(Ce,Se)=>{DOM.toggleClass(w,Go.ActiveOptionClassName,Se),Ce&&DOM.setChecked(Ce,Se)};re(I,V),re(B,V)}),this.selectValue=m,f&&this.emit("selectChange",this.getIsMultiple()?m:m[0])}getIsMultiple(){return!1}getPopperContent(o){const f=this.isImageOptions(),m=DOM.create("div",f?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&DOM.addClass(m,"l7-select-control--multiple");const w=o.map((C,I)=>{const B=f?this.createImageOption(C):this.createNormalOption(C);return B.setAttribute(Go.OptionValueAttrKey,C.value),B.setAttribute(Go.OptionIndexAttrKey,window.String(I)),B.addEventListener("click",this.onItemClick.bind(this,C)),B});return m.append(...w),this.optionDOMList=w,m}createImageOption(o){const f=this.selectValue.includes(o.value),m=DOM.create("div",`l7-select-control-item ${f?Go.ActiveOptionClassName:""}`),w=DOM.create("img");w.setAttribute("src",o.img),DOM.setUnDraggable(w),m.appendChild(w);const C=DOM.create("div","l7-select-control-item-row");this.getIsMultiple()&&m.appendChild(this.createCheckbox(f));const I=DOM.create("span");return I.innerText=o.text,C.appendChild(I),m.appendChild(C),m}createCheckbox(o){const f=DOM.create("input");return f.setAttribute("type","checkbox"),o&&DOM.setChecked(f,!0),f}createRadio(o){const f=DOM.create("input");return f.setAttribute("type","radio"),o&&DOM.setChecked(f,!0),f}isImageOptions(){return!!this.controlOption.options.find(o=>o.img)}transSelectValue(o){return Array.isArray(o)?o:[o]}}const aa=a=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("l7-iconfont"),o.setAttribute("aria-hidden","true");const f=document.createElementNS("http://www.w3.org/2000/svg","use");return f.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${a}`),o.appendChild(f),o};class ta extends null{constructor(...o){var f;super(...o),f=this,_defineProperty(this,"onClick",_asyncToGenerator(function*(){const{onExport:m}=f.controlOption;m==null||m(yield f.getImage())})),_defineProperty(this,"mergeImage",_asyncToGenerator(function*(...m){var w,C;const{imageType:I}=f.controlOption,{width:B=0,height:V=0}=(w=(C=f.mapsService.getContainer())===null||C===void 0?void 0:C.getBoundingClientRect())!==null&&w!==void 0?w:{},re=document.createElement("canvas");re.width=B,re.height=V;const Ce=re.getContext("2d");return(yield Promise.all(m.map(ze=>new Promise(Rt=>{const Jt=new Image;Jt.onload=()=>{Rt(Jt)},Jt.src=ze})))).forEach(ze=>{Ce==null||Ce.drawImage(ze,0,0,B,V)}),re.toDataURL(`image/${I}`)}))}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:createL7Icon("l7-icon-export-picture"),imageType:"png"})}getImage(){var o=this;return _asyncToGenerator(function*(){const f=yield o.mapsService.exportMap("png"),m=yield o.scene.exportPng("png");return o.mergeImage(...[f,m].filter(w=>w))})()}}const Vl=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ls=(()=>{if(typeof document=="undefined")return!1;const a=Vl[0],o={};for(const f of Vl)if((f==null?void 0:f[1])in document){for(const[w,C]of f.entries())o[a[w]]=C;return o}return!1})(),lu={change:Ls.fullscreenchange,error:Ls.fullscreenerror};let Us={request(a=document.documentElement,o){return new Promise((f,m)=>{const w=()=>{Us.off("change",w),f()};Us.on("change",w);const C=a[Ls.requestFullscreen](o);C instanceof Promise&&C.then(w).catch(m)})},exit(){return new Promise((a,o)=>{if(!Us.isFullscreen){a();return}const f=()=>{Us.off("change",f),a()};Us.on("change",f);const m=document[Ls.exitFullscreen]();m instanceof Promise&&m.then(f).catch(o)})},toggle(a,o){return Us.isFullscreen?Us.exit():Us.request(a,o)},onchange(a){Us.on("change",a)},onerror(a){Us.on("error",a)},on(a,o){const f=lu[a];f&&document.addEventListener(f,o,!1)},off(a,o){const f=lu[a];f&&document.removeEventListener(f,o,!1)},raw:Ls};Object.defineProperties(Us,{isFullscreen:{get:()=>!!document[Ls.fullscreenElement]},element:{enumerable:!0,get:()=>{var a;return(a=document[Ls.fullscreenElement])!==null&&a!==void 0?a:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[Ls.fullscreenEnabled]}}),Ls||(Us={isEnabled:!1});var ll=null;class Il extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"isFullscreen",!1),_defineProperty(this,"mapContainer",void 0),_defineProperty(this,"toggleFullscreen",_asyncToGenerator(function*(){ScreenFull.isEnabled&&(yield ScreenFull.toggle(f.mapContainer))})),_defineProperty(this,"onClick",()=>{this.toggleFullscreen()}),_defineProperty(this,"onFullscreenChange",()=>{this.isFullscreen=!!document.fullscreenElement;const{btnText:m,btnIcon:w,title:C,exitBtnText:I,exitBtnIcon:B,exitTitle:V}=this.controlOption;this.isFullscreen?(this.setBtnTitle(V),this.setBtnText(I),this.setBtnIcon(B)):(this.setBtnTitle(C),this.setBtnText(m),this.setBtnIcon(w)),this.emit("fullscreenChange",this.isFullscreen)}),ScreenFull.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316")}setOptions(o){const{exitBtnText:f,exitBtnIcon:m,exitTitle:w}=o;this.isFullscreen&&(this.checkUpdateOption(o,["exitBtnIcon"])&&this.setBtnIcon(m),this.checkUpdateOption(o,["exitBtnText"])&&this.setBtnText(f),this.checkUpdateOption(o,["exitTitle"])&&this.setBtnTitle(w)),super.setOptions(o)}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),this.mapContainer=DOM.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),o}onRemove(){super.onRemove(),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5168\u5C4F",btnIcon:createL7Icon("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:createL7Icon("l7-icon-exit-fullscreen")})}}class Mc extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"getGeoLocation",()=>new Promise((m,w)=>{window.navigator.geolocation.getCurrentPosition(({coords:C})=>{const{longitude:I,latitude:B}=C!=null?C:{};!isNaN(I)&&!isNaN(B)?m([I,B]):w()},C=>{w(C)})})),_defineProperty(this,"onClick",_asyncToGenerator(function*(){if(!window.navigator.geolocation)return;const{transform:m}=f.controlOption,w=yield f.getGeoLocation(),C=f.mapsService.getZoom();f.mapsService.setZoomAndCenter(C>15?C:15,m?yield m(w):w)})),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D")}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5B9A\u4F4D",btnIcon:createL7Icon("l7-icon-reposition")})}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}}function Hu(a){return Object.keys(a!=null?a:{}).every(o=>["layer","name","img"].includes(o))}class Zf extends null{constructor(...o){super(...o),_defineProperty(this,"onLayerChange",()=>{var f;(f=this.controlOption.layers)!==null&&f!==void 0&&f.length||(this.selectValue=this.getLayerVisible(),this.setOptions({options:this.getLayerOptions()}))}),_defineProperty(this,"onLayerVisibleChane",()=>{this.setSelectValue(this.getLayerVisible())}),_defineProperty(this,"onSelectChange",()=>{this.layers.forEach(f=>{const m=this.selectValue.includes(f.name),w=f.isVisible();m&&!w&&f.show(),!m&&w&&f.hide()})})}get layers(){const o=this.layerService,{layers:f}=this.controlOption;if(Array.isArray(f)&&f.length){const m=[];return f.forEach(w=>{if(w instanceof Object&&(Hu(w)?m.push(w.layer):m.push(w)),typeof w=="string"){const C=o.getLayer(w)||o.getLayerByName(w);C&&m.push(C)}}),m}return o.getLayers()||[]}getDefault(o){var f;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:createL7Icon("l7-icon-layer"),options:[],multiple:(f=o==null?void 0:o.multiple)!==null&&f!==void 0?f:!0})}getLayerVisible(){return this.layers.filter(o=>o.isVisible()).map(o=>o.name)}getLayerOptions(){const{layers:o}=this.controlOption,f=o==null?void 0:o.every(m=>m.img);return o?o==null?void 0:o.map(m=>{if(Hu(m))return{text:m.name||m.layer.name,value:m.layer.name,img:f?m.img:void 0};if(typeof m=="string"){const w=this.layerService.getLayer(m)||this.layerService.getLayerByName(m);return{text:w==null?void 0:w.name,value:w==null?void 0:w.name}}return{text:m.name,value:m.name}}):this.layers.map(m=>({text:m.name,value:m.name}))}setOptions(o){const f=this.checkUpdateOption(o,["layers","multiple"]);super.setOptions(o),f&&(this.controlOption.multiple===!1&&this.handleSingleSelection(),this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}handleSingleSelection(){this.layers.forEach((o,f)=>{f===0?o.show():o.hide()})}onAdd(){var o;return this.controlOption.multiple===!1&&this.handleSingleSelection(),(o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),super.onAdd()}onRemove(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}getIsMultiple(){return this.controlOption.multiple}}class _c extends Ya{getDefault(){return{position:we.d.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const o=Le.SO.create("div","l7-control-logo");return this.setLogoContent(o),o}onRemove(){return null}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["img","href"])&&(Le.SO.clearChildren(this.container),this.setLogoContent(this.container))}setLogoContent(o){const{href:f,img:m}=this.controlOption,w=Le.SO.create("img");if(w.setAttribute("src",m),w.setAttribute("aria-label","AntV logo"),Le.SO.setUnDraggable(w),f){const C=Le.SO.create("a","l7-control-logo-link");C.target="_blank",C.href=f,C.rel="noopener nofollow",C.setAttribute("rel","noopener nofollow"),C.appendChild(w),o.appendChild(C)}else o.appendChild(w)}}const Xf={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},Xc={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};class Dp extends null{constructor(...o){super(...o),_defineProperty(this,"onMapThemeChange",()=>{this.mapsService.setMapStyle(this.selectValue[0])})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:createL7Icon("l7-icon-color"),options:[]})}getStyleOptions(){const o=this.mapsService.getType()==="mapbox"?MapboxMapStyleConfig:GaodeMapStyleConfig;return Object.entries(this.mapsService.getMapStyleConfig()).filter(([f,m])=>typeof m=="string"&&f!=="blank").map(([f,m])=>{var w;const{text:C,img:I}=(w=o[f])!==null&&w!==void 0?w:{};return{text:C!=null?C:f,value:m,img:I,key:f}})}getMapStyle(){return this.mapsService.getMapStyle()}onAdd(){var o;if((o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var f,m;const w=this.controlOption.defaultValue;this.controlOption.defaultValue=(f=(m=this.controlOption.options.find(C=>C.key===w))===null||m===void 0?void 0:m.value)!==null&&f!==void 0?f:w}else{const w=this.getMapStyle();w?this.controlOption.defaultValue=w:this.mapsService.map.once("styledata",()=>{const C=this.mapsService.getMapStyle();this.controlOption.defaultValue=C,this.setSelectValue(C,!1)})}return this.on("selectChange",this.onMapThemeChange),super.onAdd()}getIsMultiple(){return!1}}class up extends null{constructor(...o){super(...o),_defineProperty(this,"location",[0,0]),_defineProperty(this,"onMouseMove",f=>{let m=this.location;const w=f.lngLat||f.lnglat,{transform:C}=this.controlOption;w&&(m=[w.lng,w.lat]),this.location=m,C&&(m=C(m)),this.insertLocation2HTML(m),this.emit("locationChange",m)})}getLocation(){return this.location}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMLEFT,transform:([f,m])=>[+(+f).toFixed(6),+(+m).toFixed(6)]})}onAdd(){const o=DOM.create("div","l7-control-mouse-location");return o.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),o}onRemove(){this.mapsService.off("mousemove",this.onMouseMove)}insertLocation2HTML(o){this.container.innerText=o.join(", ")}}class Oh extends null{constructor(...o){super(...o),_defineProperty(this,"mScale",void 0),_defineProperty(this,"iScale",void 0),_defineProperty(this,"update",()=>{const f=this.mapsService,{maxWidth:m}=this.controlOption,w=f.getSize()[1]/2,C=f.containerToLngLat([0,w]),I=f.containerToLngLat([m,w]),B=lnglatDistance([C.lng,C.lat],[I.lng,I.lat]);this.updateScales(B)})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{name:"scale",position:PositionType.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}onAdd(){const o="l7-control-scale",f=DOM.create("div",o);this.resetScaleLines(f);const{updateWhenIdle:m}=this.controlOption;return this.mapsService.on(m?"moveend":"mapmove",this.update),this.mapsService.on(m?"zoomend":"zoomchange",this.update),f}onRemove(){const{updateWhenIdle:o}=this.controlOption;this.mapsService.off(o?"zoomend":"zoomchange",this.update),this.mapsService.off(o?"moveend":"mapmove",this.update)}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}updateScales(o){const{metric:f,imperial:m}=this.controlOption;f&&o&&this.updateMetric(o),m&&o&&this.updateImperial(o)}resetScaleLines(o){DOM.clearChildren(o);const{metric:f,imperial:m,maxWidth:w,lockWidth:C}=this.controlOption;C&&DOM.addStyle(o,`width: ${w}px`),f&&(this.mScale=DOM.create("div","l7-control-scale-line",o)),m&&(this.iScale=DOM.create("div","l7-control-scale-line",o)),this.update()}updateScale(o,f,m){const{maxWidth:w}=this.controlOption;o.style.width=Math.round(w*m)+"px",o.innerHTML=f}getRoundNum(o){const f=Math.pow(10,(Math.floor(o)+"").length-1);let m=o/f;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,f*m}updateMetric(o){const f=this.getRoundNum(o),m=f<1e3?f+" m":f/1e3+" km";this.updateScale(this.mScale,m,f/o)}updateImperial(o){const f=o*3.2808399;let m,w,C;f>5280?(m=f/5280,w=this.getRoundNum(m),this.updateScale(this.iScale,w+" mi",w/m)):(C=this.getRoundNum(f),this.updateScale(this.iScale,C+" ft",C/f))}}var Mi=D(15861),Rc=D(45987);const{cloneDeep:Yf}=Le.lodashUtil;class rd{constructor(){(0,Kt.Z)(this,"mapService",void 0),(0,Kt.Z)(this,"fontService",void 0)}apply(o,{styleAttributeService:f,mapService:m,fontService:w}){var C=this;this.mapService=m,this.fontService=w,o.hooks.init.tapPromise("DataMappingPlugin",(0,Mi.Z)(function*(){o.log(we.Or.MappingStart,we.KD.INIT),C.generateMaping(o,{styleAttributeService:f}),o.log(we.Or.MappingEnd,we.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var I=(0,Mi.Z)(function*(B){if(!B)return B;o.dataState.dataMappingNeedUpdate=!1,o.log(we.Or.MappingStart,we.KD.UPDATE);const V=C.generateMaping(o,{styleAttributeService:f});return o.log(we.Or.MappingEnd,we.KD.UPDATE),V});return function(B){return I.apply(this,arguments)}}()),o.hooks.beforeRender.tap("DataMappingPlugin",()=>{const I=o.getSource();if(o.layerModelNeedUpdate||!I||!I.inited)return;const B=f.getLayerStyleAttributes()||[],V=f.getLayerStyleAttribute("filter"),{dataArray:re}=I.data;if(Array.isArray(re)&&re.length===0)return;const Ce=B.filter(ze=>ze.needRemapping);let Se=re;if(V!=null&&V.needRemapping&&V!==null&&V!==void 0&&V.scale&&(Se=re.filter(ze=>this.applyAttributeMapping(V,ze)[0])),Ce.length){const ze=this.mapping(o,Ce,Se,o.getEncodedData());o.setEncodedData(ze)}})}generateMaping(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],w=f.getLayerStyleAttribute("filter"),{dataArray:C}=o.getSource().data;let I=C;w!=null&&w.scale&&(I=C.filter(V=>this.applyAttributeMapping(w,V)[0])),I=o.processData(I);const B=this.mapping(o,m,I,void 0);return o.setEncodedData(B),o.emit("dataUpdate",null),!0}mapping(o,f,m,w){const C=f.filter(B=>B.scale!==void 0).filter(B=>B.name!=="filter"),I=m.map((B,V)=>{const re=w?w[V]:{},Ce=(0,$r.Z)({id:B._id,coordinates:B.coordinates},re);return C.forEach(Se=>{let ze=this.applyAttributeMapping(Se,B);(Se.name==="color"||Se.name==="stroke")&&(ze=ze.map(Rt=>(0,Le.CI)(Rt))),Ce[Se.name]=Array.isArray(ze)&&ze.length===1?ze[0]:ze,Se.name==="shape"&&(Ce.shape=this.fontService.getIconFontKey(Ce[Se.name]))}),Ce});return f.forEach(B=>{B.needRemapping=!1}),this.adjustData2Amap2Coordinates(I,o),this.adjustData2SimpleCoordinates(I),I}adjustData2Amap2Coordinates(o,f){if(o.length>0&&this.mapService.version==="GAODE2.x"){const m=f.coordCenter||f.getSource().center;o.filter(w=>!w.originCoordinates).map(w=>{w.version="GAODE2.x",w.originCoordinates=Yf(w.coordinates),w.coordinates=this.mapService.coordToAMap2RelativeCoordinates(w.coordinates,m)})}}adjustData2SimpleCoordinates(o){o.length>0&&this.mapService.version==="SIMPLE"&&o.map(f=>{f.simpleCoordinate||(f.coordinates=this.unProjectCoordinates(f.coordinates),f.simpleCoordinate=!0)})}unProjectCoordinates(o){if(typeof o[0]=="number")return this.mapService.simpleMapCoord.unproject(o);if(o[0]&&o[0][0]instanceof Array){const f=[];return o.map(m=>{const w=[];m.map(C=>{w.push(this.mapService.simpleMapCoord.unproject(C))}),f.push(w)}),f}else{const f=[];return o.map(m=>{f.push(this.mapService.simpleMapCoord.unproject(m))}),f}}applyAttributeMapping(o,f){var m;if(!o.scale)return[];const w=(o==null||(m=o.scale)===null||m===void 0?void 0:m.scalers)||[],C=[];return w.forEach(({field:B})=>{var V;(f.hasOwnProperty(B)||((V=o.scale)===null||V===void 0?void 0:V.type)==="variable")&&C.push(f[B])}),o.mapping?o.mapping(C):[]}getArrowPoints(o,f){const m=[f[0]-o[0],f[1]-o[1]],w=(0,Le.Fv)(m);return[o[0]+w[0]*1e-4,o[1]+w[1]*1e-4]}}class Wu{constructor(){(0,Kt.Z)(this,"mapService",void 0)}apply(o){var f=this;this.mapService=o.getContainer().mapService,o.hooks.init.tapPromise("DataSourcePlugin",(0,Mi.Z)(function*(){o.log(we.Or.SourceInitStart,we.KD.INIT);let m=o.getSource();if(!m){const{data:w,options:C}=o.sourceOption||o.defaultSourceConfig;m=new ii(w,C),o.setSource(m)}m.inited?(f.updateClusterData(o),o.log(we.Or.SourceInitEnd,we.KD.INIT)):yield new Promise(w=>{m.on("update",C=>{C.type==="inited"&&(f.updateClusterData(o),o.log(we.Or.SourceInitEnd,we.KD.INIT)),w(null)})})})),o.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,Mi.Z)(function*(){const m=f.updateClusterData(o),w=o.dataState.dataSourceNeedUpdate;return o.dataState.dataSourceNeedUpdate=!1,m||w}))}updateClusterData(o){if(o.isTileLayer||o.tileLayer||!o.getSource())return!1;const f=o.getSource(),m=f.cluster,{zoom:w=0}=f.clusterOptions,C=this.mapService.getZoom()-1,I=o.dataState.dataSourceNeedUpdate;return m&&I&&f.updateClusterData(Math.floor(C)),m&&Math.abs(o.clusterZoom-C)>=1?(w!==Math.floor(C)&&f.updateClusterData(Math.floor(C)),o.clusterZoom=C,!0):!1}}function xl(a,o){return a<o?-1:a>o?1:a>=o?0:NaN}function oc(a){return a.length===1&&(a=Pf(a)),{left:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)<0?m=C+1:w=C}return m},right:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)>0?w=C:m=C+1}return m}}}function Pf(a){return function(o,f){return xl(a(o),f)}}var If=oc(xl),rs=If.right,Gu=If.left,xu=null;function Lf(a,o){var f=a.length,m=-1,w,C,I;if(o==null){for(;++m<f;)if((w=a[m])!=null&&w>=w)for(C=I=w;++m<f;)(w=a[m])!=null&&(C>w&&(C=w),I<w&&(I=w))}else for(;++m<f;)if((w=o(a[m],m,a))!=null&&w>=w)for(C=I=w;++m<f;)(w=o(a[m],m,a))!=null&&(C>w&&(C=w),I<w&&(I=w));return[C,I]}var cp=Array.prototype,Ld=cp.slice,Sv=cp.map,Mh=Math.sqrt(50),oh=Math.sqrt(10),gf=Math.sqrt(2);function U0(a,o,f){var m,w=-1,C,I,B;if(o=+o,a=+a,f=+f,a===o&&f>0)return[a];if((m=o<a)&&(C=a,a=o,o=C),(B=gm(a,o,f))===0||!isFinite(B))return[];if(B>0)for(a=Math.ceil(a/B),o=Math.floor(o/B),I=new Array(C=Math.ceil(o-a+1));++w<C;)I[w]=(a+w)*B;else for(a=Math.floor(a*B),o=Math.ceil(o*B),I=new Array(C=Math.ceil(a-o+1));++w<C;)I[w]=(a-w)/B;return m&&I.reverse(),I}function gm(a,o,f){var m=(o-a)/Math.max(0,f),w=Math.floor(Math.log(m)/Math.LN10),C=m/Math.pow(10,w);return w>=0?(C>=Mh?10:C>=oh?5:C>=gf?2:1)*Math.pow(10,w):-Math.pow(10,-w)/(C>=Mh?10:C>=oh?5:C>=gf?2:1)}function Np(a,o,f){var m=Math.abs(o-a)/Math.max(0,f),w=Math.pow(10,Math.floor(Math.log(m)/Math.LN10)),C=m/w;return C>=Mh?w*=10:C>=oh?w*=5:C>=gf&&(w*=2),o<a?-w:w}function Yc(){var a=identity,o=extent,f=sturges;function m(w){var C,I=w.length,B,V=new Array(I);for(C=0;C<I;++C)V[C]=a(w[C],C,w);var re=o(V),Ce=re[0],Se=re[1],ze=f(V,Ce,Se);Array.isArray(ze)||(ze=tickStep(Ce,Se,ze),ze=range(Math.ceil(Ce/ze)*ze,Se,ze));for(var Rt=ze.length;ze[0]<=Ce;)ze.shift(),--Rt;for(;ze[Rt-1]>Se;)ze.pop(),--Rt;var Jt=new Array(Rt+1),Nn;for(C=0;C<=Rt;++C)Nn=Jt[C]=[],Nn.x0=C>0?ze[C-1]:Ce,Nn.x1=C<Rt?ze[C]:Se;for(C=0;C<I;++C)B=V[C],Ce<=B&&B<=Se&&Jt[bisect(ze,B,0,Rt)].push(w[C]);return Jt}return m.value=function(w){return arguments.length?(a=typeof w=="function"?w:constant(w),m):a},m.domain=function(w){return arguments.length?(o=typeof w=="function"?w:constant([w[0],w[1]]),m):o},m.thresholds=function(w){return arguments.length?(f=typeof w=="function"?w:Array.isArray(w)?constant(slice.call(w)):constant(w),m):f},m}function Dy(a,o,f){return a=map.call(a,number).sort(ascending),Math.ceil((f-o)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}var a0=D(37620);function Fp(a,o,f,m,w){var C=a*a,I=C*a;return((1-3*a+3*C-I)*o+(4-6*C+3*I)*f+(1+3*a+3*C-3*I)*m+I*w)/6}function Ny(a){var o=a.length-1;return function(f){var m=f<=0?f=0:f>=1?(f=1,o-1):Math.floor(f*o),w=a[m],C=a[m+1],I=m>0?a[m-1]:2*w-C,B=m<o-1?a[m+2]:2*C-w;return Fp((f-m/o)*o,I,w,C,B)}}function Fy(a){var o=a.length;return function(f){var m=Math.floor(((f%=1)<0?++f:f)*o),w=a[(m+o-1)%o],C=a[m%o],I=a[(m+1)%o],B=a[(m+2)%o];return Fp((f-m/o)*o,w,C,I,B)}}function ym(a){return function(){return a}}function j0(a,o){return function(f){return a+f*o}}function By(a,o,f){return a=Math.pow(a,f),o=Math.pow(o,f)-a,f=1/f,function(m){return Math.pow(a+m*o,f)}}function _m(a,o){var f=o-a;return f?j0(a,f>180||f<-180?f-360*Math.round(f/360):f):constant(isNaN(a)?o:a)}function xg(a){return(a=+a)==1?Dd:function(o,f){return f-o?By(o,f,a):ym(isNaN(o)?f:o)}}function Dd(a,o){var f=o-a;return f?j0(a,f):ym(isNaN(a)?o:a)}var s0=function a(o){var f=xg(o);function m(w,C){var I=f((w=(0,a0.B8)(w)).r,(C=(0,a0.B8)(C)).r),B=f(w.g,C.g),V=f(w.b,C.b),re=Dd(w.opacity,C.opacity);return function(Ce){return w.r=I(Ce),w.g=B(Ce),w.b=V(Ce),w.opacity=re(Ce),w+""}}return m.gamma=a,m}(1);function Eg(a){return function(o){var f=o.length,m=new Array(f),w=new Array(f),C=new Array(f),I,B;for(I=0;I<f;++I)B=(0,a0.B8)(o[I]),m[I]=B.r||0,w[I]=B.g||0,C[I]=B.b||0;return m=a(m),w=a(w),C=a(C),B.opacity=1,function(V){return B.r=m(V),B.g=w(V),B.b=C(V),B+""}}}var ky=Eg(Ny),c1=Eg(Fy);function bm(a,o){return a<o?-1:a>o?1:a>=o?0:NaN}function xm(a){return a.length===1&&(a=Em(a)),{left:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)<0?m=C+1:w=C}return m},right:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)>0?w=C:m=C+1}return m}}}function Em(a){return function(o,f){return bm(a(o),f)}}var Bp=xm(bm),l0=Bp.right,wv=Bp.left,Rh=l0,V0=Array.prototype,Hl=V0.slice,kp=V0.map,u0=Math.sqrt(50),Nd=Math.sqrt(10),Fd=Math.sqrt(2);function Bd(a,o,f){var m,w=-1,C,I,B;if(o=+o,a=+a,f=+f,a===o&&f>0)return[a];if((m=o<a)&&(C=a,a=o,o=C),(B=kd(a,o,f))===0||!isFinite(B))return[];if(B>0)for(a=Math.ceil(a/B),o=Math.floor(o/B),I=new Array(C=Math.ceil(o-a+1));++w<C;)I[w]=(a+w)*B;else for(a=Math.floor(a*B),o=Math.ceil(o*B),I=new Array(C=Math.ceil(a-o+1));++w<C;)I[w]=(a-w)/B;return m&&I.reverse(),I}function kd(a,o,f){var m=(o-a)/Math.max(0,f),w=Math.floor(Math.log(m)/Math.LN10),C=m/Math.pow(10,w);return w>=0?(C>=u0?10:C>=Nd?5:C>=Fd?2:1)*Math.pow(10,w):-Math.pow(10,-w)/(C>=u0?10:C>=Nd?5:C>=Fd?2:1)}function zd(a,o,f){var m=Math.abs(o-a)/Math.max(0,f),w=Math.pow(10,Math.floor(Math.log(m)/Math.LN10)),C=m/w;return C>=u0?w*=10:C>=Nd?w*=5:C>=Fd&&(w*=2),o<a?-w:w}function fp(){var a=identity,o=extent,f=sturges;function m(w){var C,I=w.length,B,V=new Array(I);for(C=0;C<I;++C)V[C]=a(w[C],C,w);var re=o(V),Ce=re[0],Se=re[1],ze=f(V,Ce,Se);Array.isArray(ze)||(ze=tickStep(Ce,Se,ze),ze=range(Math.ceil(Ce/ze)*ze,Se,ze));for(var Rt=ze.length;ze[0]<=Ce;)ze.shift(),--Rt;for(;ze[Rt-1]>Se;)ze.pop(),--Rt;var Jt=new Array(Rt+1),Nn;for(C=0;C<=Rt;++C)Nn=Jt[C]=[],Nn.x0=C>0?ze[C-1]:Ce,Nn.x1=C<Rt?ze[C]:Se;for(C=0;C<I;++C)B=V[C],Ce<=B&&B<=Se&&Jt[bisect(ze,B,0,Rt)].push(w[C]);return Jt}return m.value=function(w){return arguments.length?(a=typeof w=="function"?w:constant(w),m):a},m.domain=function(w){return arguments.length?(o=typeof w=="function"?w:constant([w[0],w[1]]),m):o},m.thresholds=function(w){return arguments.length?(f=typeof w=="function"?w:Array.isArray(w)?constant(slice.call(w)):constant(w),m):f},m}function c0(a,o,f){return a=map.call(a,number).sort(ascending),Math.ceil((f-o)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function zp(a){return a===null?NaN:+a}function Sg(a,o,f){if(f==null&&(f=zp),!!(m=a.length)){if((o=+o)<=0||m<2)return+f(a[0],0,a);if(o>=1)return+f(a[m-1],m-1,a);var m,w=(m-1)*o,C=Math.floor(w),I=+f(a[C],C,a),B=+f(a[C+1],C+1,a);return I+(B-I)*(w-C)}}var Zu="$";function Ph(){}Ph.prototype=H0.prototype={constructor:Ph,has:function(a){return Zu+a in this},get:function(a){return this[Zu+a]},set:function(a,o){return this[Zu+a]=o,this},remove:function(a){var o=Zu+a;return o in this&&delete this[o]},clear:function(){for(var a in this)a[0]===Zu&&delete this[a]},keys:function(){var a=[];for(var o in this)o[0]===Zu&&a.push(o.slice(1));return a},values:function(){var a=[];for(var o in this)o[0]===Zu&&a.push(this[o]);return a},entries:function(){var a=[];for(var o in this)o[0]===Zu&&a.push({key:o.slice(1),value:this[o]});return a},size:function(){var a=0;for(var o in this)o[0]===Zu&&++a;return a},empty:function(){for(var a in this)if(a[0]===Zu)return!1;return!0},each:function(a){for(var o in this)o[0]===Zu&&a(this[o],o.slice(1),this)}};function H0(a,o){var f=new Ph;if(a instanceof Ph)a.each(function(B,V){f.set(V,B)});else if(Array.isArray(a)){var m=-1,w=a.length,C;if(o==null)for(;++m<w;)f.set(m,a[m]);else for(;++m<w;)f.set(o(C=a[m],m,a),C)}else if(a)for(var I in a)f.set(I,a[I]);return f}var W0=H0;function wg(){var a=[],o=[],f,m,w;function C(B,V,re,Ce){if(V>=a.length)return f!=null&&B.sort(f),m!=null?m(B):B;for(var Se=-1,ze=B.length,Rt=a[V++],Jt,Nn,sr=map(),Ar,mr=re();++Se<ze;)(Ar=sr.get(Jt=Rt(Nn=B[Se])+""))?Ar.push(Nn):sr.set(Jt,[Nn]);return sr.each(function(Vr,ci){Ce(mr,ci,C(Vr,V,re,Ce))}),mr}function I(B,V){if(++V>a.length)return B;var re,Ce=o[V-1];return m!=null&&V>=a.length?re=B.entries():(re=[],B.each(function(Se,ze){re.push({key:ze,values:I(Se,V)})})),Ce!=null?re.sort(function(Se,ze){return Ce(Se.key,ze.key)}):re}return w={object:function(B){return C(B,0,Sm,ah)},map:function(B){return C(B,0,Ud,wm)},entries:function(B){return I(C(B,0,Ud,wm),0)},key:function(B){return a.push(B),w},sortKeys:function(B){return o[a.length-1]=B,w},sortValues:function(B){return f=B,w},rollup:function(B){return m=B,w}}}function Sm(){return{}}function ah(a,o,f){a[o]=f}function Ud(){return map()}function wm(a,o,f){a.set(o,f)}function G0(){}var jd=W0.prototype;G0.prototype=Tg.prototype={constructor:G0,has:jd.has,add:function(a){return a+="",this[Zu+a]=a,this},remove:jd.remove,clear:jd.clear,values:jd.keys,size:jd.size,empty:jd.empty,each:jd.each};function Tg(a,o){var f=new G0;if(a instanceof G0)a.each(function(C){f.add(C)});else if(a){var m=-1,w=a.length;if(o==null)for(;++m<w;)f.add(a[m]);else for(;++m<w;)f.add(o(a[m],m,a))}return f}var f0=null,Ag=Array.prototype,Ih=Ag.map,Vd=Ag.slice;function Df(a,o){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(o).domain(a);break}return this}function Hd(a,o){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(o).domain(a);break}return this}var Tm={name:"implicit"};function Lh(){var a=W0(),o=[],f=[],m=Tm;function w(C){var I=C+"",B=a.get(I);if(!B){if(m!==Tm)return m;a.set(I,B=o.push(C))}return f[(B-1)%f.length]}return w.domain=function(C){if(!arguments.length)return o.slice();o=[],a=W0();for(var I=-1,B=C.length,V,re;++I<B;)a.has(re=(V=C[I])+"")||a.set(re,o.push(V));return w},w.range=function(C){return arguments.length?(f=Vd.call(C),w):f.slice()},w.unknown=function(C){return arguments.length?(m=C,w):m},w.copy=function(){return Lh(o,f).unknown(m)},Df.apply(w,arguments),w}function Z0(){var a=ordinal().unknown(void 0),o=a.domain,f=a.range,m=[0,1],w,C,I=!1,B=0,V=0,re=.5;delete a.unknown;function Ce(){var Se=o().length,ze=m[1]<m[0],Rt=m[ze-0],Jt=m[1-ze];w=(Jt-Rt)/Math.max(1,Se-B+V*2),I&&(w=Math.floor(w)),Rt+=(Jt-Rt-w*(Se-B))*re,C=w*(1-B),I&&(Rt=Math.round(Rt),C=Math.round(C));var Nn=sequence(Se).map(function(sr){return Rt+w*sr});return f(ze?Nn.reverse():Nn)}return a.domain=function(Se){return arguments.length?(o(Se),Ce()):o()},a.range=function(Se){return arguments.length?(m=[+Se[0],+Se[1]],Ce()):m.slice()},a.rangeRound=function(Se){return m=[+Se[0],+Se[1]],I=!0,Ce()},a.bandwidth=function(){return C},a.step=function(){return w},a.round=function(Se){return arguments.length?(I=!!Se,Ce()):I},a.padding=function(Se){return arguments.length?(B=Math.min(1,V=+Se),Ce()):B},a.paddingInner=function(Se){return arguments.length?(B=Math.min(1,Se),Ce()):B},a.paddingOuter=function(Se){return arguments.length?(V=+Se,Ce()):V},a.align=function(Se){return arguments.length?(re=Math.max(0,Math.min(1,Se)),Ce()):re},a.copy=function(){return Z0(o(),m).round(I).paddingInner(B).paddingOuter(V).align(re)},initRange.apply(Ce(),arguments)}function X0(a){var o=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return X0(o())},a}function $c(){return X0(Z0.apply(null,arguments).paddingInner(1))}function Pc(a,o){return(isNumberArray(o)?numberArray:uu)(a,o)}function uu(a,o){var f=o?o.length:0,m=a?Math.min(f,a.length):0,w=new Array(m),C=new Array(f),I;for(I=0;I<m;++I)w[I]=Cm(a[I],o[I]);for(;I<f;++I)C[I]=o[I];return function(B){for(I=0;I<m;++I)C[I]=w[I](B);return C}}function Nf(a,o){var f=new Date;return a=+a,o=+o,function(m){return f.setTime(a*(1-m)+o*m),f}}function Y0(a,o){return a=+a,o=+o,function(f){return a*(1-f)+o*f}}function rl(a,o){var f={},m={},w;(a===null||typeof a!="object")&&(a={}),(o===null||typeof o!="object")&&(o={});for(w in o)w in a?f[w]=Cm(a[w],o[w]):m[w]=o[w];return function(C){for(w in f)m[w]=f[w](C);return m}}var Up=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tv=new RegExp(Up.source,"g");function zy(a){return function(){return a}}function Cg(a){return function(o){return a(o)+""}}function Uy(a,o){var f=Up.lastIndex=Tv.lastIndex=0,m,w,C,I=-1,B=[],V=[];for(a=a+"",o=o+"";(m=Up.exec(a))&&(w=Tv.exec(o));)(C=w.index)>f&&(C=o.slice(f,C),B[I]?B[I]+=C:B[++I]=C),(m=m[0])===(w=w[0])?B[I]?B[I]+=w:B[++I]=w:(B[++I]=null,V.push({i:I,x:Y0(m,w)})),f=Tv.lastIndex;return f<o.length&&(C=o.slice(f),B[I]?B[I]+=C:B[++I]=C),B.length<2?V[0]?Cg(V[0].x):zy(o):(o=V.length,function(re){for(var Ce=0,Se;Ce<o;++Ce)B[(Se=V[Ce]).i]=Se.x(re);return B.join("")})}function Am(a,o){o||(o=[]);var f=a?Math.min(o.length,a.length):0,m=o.slice(),w;return function(C){for(w=0;w<f;++w)m[w]=a[w]*(1-C)+o[w]*C;return m}}function Ic(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Cm(a,o){var f=typeof o,m;return o==null||f==="boolean"?ym(o):(f==="number"?Y0:f==="string"?(m=(0,a0.ZP)(o))?(o=m,s0):Uy:o instanceof a0.ZP?s0:o instanceof Date?Nf:Ic(o)?Am:Array.isArray(o)?uu:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?rl:Y0)(a,o)}function h0(a,o){return a=+a,o=+o,function(f){return Math.round(a*(1-f)+o*f)}}function Om(a){return function(){return a}}function Og(a){return+a}var Av=[0,1];function bc(a){return a}function Mm(a,o){return(o-=a=+a)?function(f){return(f-a)/o}:Om(isNaN(o)?NaN:.5)}function $0(a){var o=a[0],f=a[a.length-1],m;return o>f&&(m=o,o=f,f=m),function(w){return Math.max(o,Math.min(f,w))}}function Mg(a,o,f){var m=a[0],w=a[1],C=o[0],I=o[1];return w<m?(m=Mm(w,m),C=f(I,C)):(m=Mm(m,w),C=f(C,I)),function(B){return C(m(B))}}function Ue(a,o,f){var m=Math.min(a.length,o.length)-1,w=new Array(m),C=new Array(m),I=-1;for(a[m]<a[0]&&(a=a.slice().reverse(),o=o.slice().reverse());++I<m;)w[I]=Mm(a[I],a[I+1]),C[I]=f(o[I],o[I+1]);return function(B){var V=Rh(a,B,1,m)-1;return C[V](w[V](B))}}function Yt(a,o){return o.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function On(){var a=Av,o=Av,f=Cm,m,w,C,I=bc,B,V,re;function Ce(){return B=Math.min(a.length,o.length)>2?Ue:Mg,V=re=null,Se}function Se(ze){return isNaN(ze=+ze)?C:(V||(V=B(a.map(m),o,f)))(m(I(ze)))}return Se.invert=function(ze){return I(w((re||(re=B(o,a.map(m),Y0)))(ze)))},Se.domain=function(ze){return arguments.length?(a=Ih.call(ze,Og),I===bc||(I=$0(a)),Ce()):a.slice()},Se.range=function(ze){return arguments.length?(o=Vd.call(ze),Ce()):o.slice()},Se.rangeRound=function(ze){return o=Vd.call(ze),f=h0,Ce()},Se.clamp=function(ze){return arguments.length?(I=ze?$0(a):bc,Se):I!==bc},Se.interpolate=function(ze){return arguments.length?(f=ze,Ce()):f},Se.unknown=function(ze){return arguments.length?(C=ze,Se):C},function(ze,Rt){return m=ze,w=Rt,Ce()}}function Mr(a,o){return On()(a,o)}var ei=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rr(a){if(!(o=ei.exec(a)))throw new Error("invalid format: "+a);var o;return new br({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}Rr.prototype=br.prototype;function br(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}br.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Li(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function hi(a,o){if((f=(a=o?a.toExponential(o-1):a.toExponential()).indexOf("e"))<0)return null;var f,m=a.slice(0,f);return[m.length>1?m[0]+m.slice(2):m,+a.slice(f+1)]}function ki(a){return a=hi(Math.abs(a)),a?a[1]:NaN}function Di(a,o){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ki(o)/3)))*3-ki(Math.abs(a)))}function ji(a,o){return function(f,m){for(var w=f.length,C=[],I=0,B=a[0],V=0;w>0&&B>0&&(V+B+1>m&&(B=Math.max(1,m-V)),C.push(f.substring(w-=B,w+B)),!((V+=B+1)>m));)B=a[I=(I+1)%a.length];return C.reverse().join(o)}}function $i(a){return function(o){return o.replace(/[0-9]/g,function(f){return a[+f]})}}function bi(a){e:for(var o=a.length,f=1,m=-1,w;f<o;++f)switch(a[f]){case".":m=w=f;break;case"0":m===0&&(m=f),w=f;break;default:if(!+a[f])break e;m>0&&(m=0);break}return m>0?a.slice(0,m)+a.slice(w+1):a}var Vi;function dr(a,o){var f=hi(a,o);if(!f)return a+"";var m=f[0],w=f[1],C=w-(Vi=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,I=m.length;return C===I?m:C>I?m+new Array(C-I+1).join("0"):C>0?m.slice(0,C)+"."+m.slice(C):"0."+new Array(1-C).join("0")+hi(a,Math.max(0,o+C-1))[0]}function Ur(a,o){var f=hi(a,o);if(!f)return a+"";var m=f[0],w=f[1];return w<0?"0."+new Array(-w).join("0")+m:m.length>w+1?m.slice(0,w+1)+"."+m.slice(w+1):m+new Array(w-m.length+2).join("0")}var xi={"%":function(a,o){return(a*100).toFixed(o)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:Li,e:function(a,o){return a.toExponential(o)},f:function(a,o){return a.toFixed(o)},g:function(a,o){return a.toPrecision(o)},o:function(a){return Math.round(a).toString(8)},p:function(a,o){return Ur(a*100,o)},r:Ur,s:dr,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function ro(a){return a}var ai=Array.prototype.map,eo=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function wi(a){var o=a.grouping===void 0||a.thousands===void 0?ro:ji(ai.call(a.grouping,Number),a.thousands+""),f=a.currency===void 0?"":a.currency[0]+"",m=a.currency===void 0?"":a.currency[1]+"",w=a.decimal===void 0?".":a.decimal+"",C=a.numerals===void 0?ro:$i(ai.call(a.numerals,String)),I=a.percent===void 0?"%":a.percent+"",B=a.minus===void 0?"-":a.minus+"",V=a.nan===void 0?"NaN":a.nan+"";function re(Se){Se=Rr(Se);var ze=Se.fill,Rt=Se.align,Jt=Se.sign,Nn=Se.symbol,sr=Se.zero,Ar=Se.width,mr=Se.comma,Vr=Se.precision,ci=Se.trim,Io=Se.type;Io==="n"?(mr=!0,Io="g"):xi[Io]||(Vr===void 0&&(Vr=12),ci=!0,Io="g"),(sr||ze==="0"&&Rt==="=")&&(sr=!0,ze="0",Rt="=");var to=Nn==="$"?f:Nn==="#"&&/[boxX]/.test(Io)?"0"+Io.toLowerCase():"",Qr=Nn==="$"?m:/[%p]/.test(Io)?I:"",no=xi[Io],ja=/[defgprs%]/.test(Io);Vr=Vr===void 0?6:/[gprs]/.test(Io)?Math.max(1,Math.min(21,Vr)):Math.max(0,Math.min(20,Vr));function Eo(ra){var Ia=to,Bs=Qr,dd,Kd,ms;if(Io==="c")Bs=no(ra)+Bs,ra="";else{ra=+ra;var wc=ra<0||1/ra<0;if(ra=isNaN(ra)?V:no(Math.abs(ra),Vr),ci&&(ra=bi(ra)),wc&&+ra==0&&Jt!=="+"&&(wc=!1),Ia=(wc?Jt==="("?Jt:B:Jt==="-"||Jt==="("?"":Jt)+Ia,Bs=(Io==="s"?eo[8+Vi/3]:"")+Bs+(wc&&Jt==="("?")":""),ja){for(dd=-1,Kd=ra.length;++dd<Kd;)if(ms=ra.charCodeAt(dd),48>ms||ms>57){Bs=(ms===46?w+ra.slice(dd+1):ra.slice(dd))+Bs,ra=ra.slice(0,dd);break}}}mr&&!sr&&(ra=o(ra,1/0));var vh=Ia.length+ra.length+Bs.length,qf=vh<Ar?new Array(Ar-vh+1).join(ze):"";switch(mr&&sr&&(ra=o(qf+ra,qf.length?Ar-Bs.length:1/0),qf=""),Rt){case"<":ra=Ia+ra+Bs+qf;break;case"=":ra=Ia+qf+ra+Bs;break;case"^":ra=qf.slice(0,vh=qf.length>>1)+Ia+ra+Bs+qf.slice(vh);break;default:ra=qf+Ia+ra+Bs;break}return C(ra)}return Eo.toString=function(){return Se+""},Eo}function Ce(Se,ze){var Rt=re((Se=Rr(Se),Se.type="f",Se)),Jt=Math.max(-8,Math.min(8,Math.floor(ki(ze)/3)))*3,Nn=Math.pow(10,-Jt),sr=eo[8+Jt/3];return function(Ar){return Rt(Nn*Ar)+sr}}return{format:re,formatPrefix:Ce}}var qi,si,vi;Ho({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Ho(a){return qi=wi(a),si=qi.format,vi=qi.formatPrefix,qi}function va(a,o){return a=Math.abs(a),o=Math.abs(o)-a,Math.max(0,ki(o)-ki(a))+1}function Ki(a){return Math.max(0,-ki(Math.abs(a)))}function Ri(a,o,f,m){var w=zd(a,o,f),C;switch(m=Rr(m==null?",f":m),m.type){case"s":{var I=Math.max(Math.abs(a),Math.abs(o));return m.precision==null&&!isNaN(C=Di(w,I))&&(m.precision=C),vi(m,I)}case"":case"e":case"g":case"p":case"r":{m.precision==null&&!isNaN(C=va(w,Math.max(Math.abs(a),Math.abs(o))))&&(m.precision=C-(m.type==="e"));break}case"f":case"%":{m.precision==null&&!isNaN(C=Ki(w))&&(m.precision=C-(m.type==="%")*2);break}}return si(m)}function Jr(a){var o=a.domain;return a.ticks=function(f){var m=o();return Bd(m[0],m[m.length-1],f==null?10:f)},a.tickFormat=function(f,m){var w=o();return Ri(w[0],w[w.length-1],f==null?10:f,m)},a.nice=function(f){f==null&&(f=10);var m=o(),w=0,C=m.length-1,I=m[w],B=m[C],V;return B<I&&(V=I,I=B,B=V,V=w,w=C,C=V),V=kd(I,B,f),V>0?(I=Math.floor(I/V)*V,B=Math.ceil(B/V)*V,V=kd(I,B,f)):V<0&&(I=Math.ceil(I*V)/V,B=Math.floor(B*V)/V,V=kd(I,B,f)),V>0?(m[w]=Math.floor(I/V)*V,m[C]=Math.ceil(B/V)*V,o(m)):V<0&&(m[w]=Math.ceil(I*V)/V,m[C]=Math.floor(B*V)/V,o(m)),a},a}function zo(){var a=Mr(bc,bc);return a.copy=function(){return Yt(a,zo())},Df.apply(a,arguments),Jr(a)}function ie(a){var o;function f(m){return isNaN(m=+m)?o:m}return f.invert=f,f.domain=f.range=function(m){return arguments.length?(a=map.call(m,number),f):a.slice()},f.unknown=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return ie(a).unknown(o)},a=arguments.length?map.call(a,number):[0,1],linearish(f)}function lo(a,o){a=a.slice();var f=0,m=a.length-1,w=a[f],C=a[m],I;return C<w&&(I=f,f=m,m=I,I=w,w=C,C=I),a[f]=o.floor(w),a[m]=o.ceil(C),a}function Ma(a){return Math.log(a)}function Hn(a){return Math.exp(a)}function jr(a){return-Math.log(-a)}function Qa(a){return-Math.exp(-a)}function Jl(a){return isFinite(a)?+("1e"+a):a<0?0:a}function Xu(a){return a===10?Jl:a===Math.E?Math.exp:function(o){return Math.pow(a,o)}}function Ja(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(o){return Math.log(o)/a})}function cu(a){return function(o){return-a(-o)}}function il(a){var o=a(Ma,Hn),f=o.domain,m=10,w,C;function I(){return w=Ja(m),C=Xu(m),f()[0]<0?(w=cu(w),C=cu(C),a(jr,Qa)):a(Ma,Hn),o}return o.base=function(B){return arguments.length?(m=+B,I()):m},o.domain=function(B){return arguments.length?(f(B),I()):f()},o.ticks=function(B){var V=f(),re=V[0],Ce=V[V.length-1],Se;(Se=Ce<re)&&(ze=re,re=Ce,Ce=ze);var ze=w(re),Rt=w(Ce),Jt,Nn,sr,Ar=B==null?10:+B,mr=[];if(!(m%1)&&Rt-ze<Ar){if(ze=Math.round(ze)-1,Rt=Math.round(Rt)+1,re>0){for(;ze<Rt;++ze)for(Nn=1,Jt=C(ze);Nn<m;++Nn)if(sr=Jt*Nn,!(sr<re)){if(sr>Ce)break;mr.push(sr)}}else for(;ze<Rt;++ze)for(Nn=m-1,Jt=C(ze);Nn>=1;--Nn)if(sr=Jt*Nn,!(sr<re)){if(sr>Ce)break;mr.push(sr)}}else mr=Bd(ze,Rt,Math.min(Rt-ze,Ar)).map(C);return Se?mr.reverse():mr},o.tickFormat=function(B,V){if(V==null&&(V=m===10?".0e":","),typeof V!="function"&&(V=si(V)),B===1/0)return V;B==null&&(B=10);var re=Math.max(1,m*B/o.ticks().length);return function(Ce){var Se=Ce/C(Math.round(w(Ce)));return Se*m<m-.5&&(Se*=m),Se<=re?V(Ce):""}},o.nice=function(){return f(lo(f(),{floor:function(B){return C(Math.floor(w(B)))},ceil:function(B){return C(Math.ceil(w(B)))}}))},o}function Eu(){var a=il(On()).domain([1,10]);return a.copy=function(){return Yt(a,Eu()).base(a.base())},Df.apply(a,arguments),a}function Su(a){return function(o){return Math.sign(o)*Math.log1p(Math.abs(o/a))}}function Ll(a){return function(o){return Math.sign(o)*Math.expm1(Math.abs(o))*a}}function Yu(a){var o=1,f=a(Su(o),Ll(o));return f.constant=function(m){return arguments.length?a(Su(o=+m),Ll(o)):o},linearish(f)}function Lc(){var a=Yu(transformer());return a.copy=function(){return copy(a,Lc()).constant(a.constant())},initRange.apply(a,arguments)}function wu(a){return function(o){return o<0?-Math.pow(-o,a):Math.pow(o,a)}}function ka(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function xc(a){return a<0?-a*a:a*a}function Os(a){var o=a(bc,bc),f=1;function m(){return f===1?a(bc,bc):f===.5?a(ka,xc):a(wu(f),wu(1/f))}return o.exponent=function(w){return arguments.length?(f=+w,m()):f},Jr(o)}function Jo(){var a=Os(On());return a.copy=function(){return Yt(a,Jo()).exponent(a.exponent())},Df.apply(a,arguments),a}function es(){return Jo.apply(null,arguments).exponent(.5)}function fs(){var a=[],o=[],f=[],m;function w(){var I=0,B=Math.max(1,o.length);for(f=new Array(B-1);++I<B;)f[I-1]=Sg(a,I/B);return C}function C(I){return isNaN(I=+I)?m:o[Rh(f,I)]}return C.invertExtent=function(I){var B=o.indexOf(I);return B<0?[NaN,NaN]:[B>0?f[B-1]:a[0],B<f.length?f[B]:a[a.length-1]]},C.domain=function(I){if(!arguments.length)return a.slice();a=[];for(var B=0,V=I.length,re;B<V;++B)re=I[B],re!=null&&!isNaN(re=+re)&&a.push(re);return a.sort(bm),w()},C.range=function(I){return arguments.length?(o=Vd.call(I),w()):o.slice()},C.unknown=function(I){return arguments.length?(m=I,C):m},C.quantiles=function(){return f.slice()},C.copy=function(){return fs().domain(a).range(o).unknown(m)},Df.apply(C,arguments)}function fu(){var a=0,o=1,f=1,m=[.5],w=[0,1],C;function I(V){return V<=V?w[Rh(m,V,0,f)]:C}function B(){var V=-1;for(m=new Array(f);++V<f;)m[V]=((V+1)*o-(V-f)*a)/(f+1);return I}return I.domain=function(V){return arguments.length?(a=+V[0],o=+V[1],B()):[a,o]},I.range=function(V){return arguments.length?(f=(w=Vd.call(V)).length-1,B()):w.slice()},I.invertExtent=function(V){var re=w.indexOf(V);return re<0?[NaN,NaN]:re<1?[a,m[0]]:re>=f?[m[f-1],o]:[m[re-1],m[re]]},I.unknown=function(V){return arguments.length&&(C=V),I},I.thresholds=function(){return m.slice()},I.copy=function(){return fu().domain([a,o]).range(w).unknown(C)},Df.apply(Jr(I),arguments)}function Dh(){var a=[.5],o=[0,1],f,m=1;function w(C){return C<=C?o[Rh(a,C,0,m)]:f}return w.domain=function(C){return arguments.length?(a=Vd.call(C),m=Math.min(a.length,o.length-1),w):a.slice()},w.range=function(C){return arguments.length?(o=Vd.call(C),m=Math.min(a.length,o.length-1),w):o.slice()},w.invertExtent=function(C){var I=o.indexOf(C);return[a[I-1],a[I]]},w.unknown=function(C){return arguments.length?(f=C,w):f},w.copy=function(){return Dh().domain(a).range(o).unknown(f)},Df.apply(w,arguments)}var bn=new Date,Lr=new Date;function vr(a,o,f,m){function w(C){return a(C=arguments.length===0?new Date:new Date(+C)),C}return w.floor=function(C){return a(C=new Date(+C)),C},w.ceil=function(C){return a(C=new Date(C-1)),o(C,1),a(C),C},w.round=function(C){var I=w(C),B=w.ceil(C);return C-I<B-C?I:B},w.offset=function(C,I){return o(C=new Date(+C),I==null?1:Math.floor(I)),C},w.range=function(C,I,B){var V=[],re;if(C=w.ceil(C),B=B==null?1:Math.floor(B),!(C<I)||!(B>0))return V;do V.push(re=new Date(+C)),o(C,B),a(C);while(re<C&&C<I);return V},w.filter=function(C){return vr(function(I){if(I>=I)for(;a(I),!C(I);)I.setTime(I-1)},function(I,B){if(I>=I)if(B<0)for(;++B<=0;)for(;o(I,-1),!C(I););else for(;--B>=0;)for(;o(I,1),!C(I););})},f&&(w.count=function(C,I){return bn.setTime(+C),Lr.setTime(+I),a(bn),a(Lr),Math.floor(f(bn,Lr))},w.every=function(C){return C=Math.floor(C),!isFinite(C)||!(C>0)?null:C>1?w.filter(m?function(I){return m(I)%C===0}:function(I){return w.count(0,I)%C===0}):w}),w}var co=vr(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,o){a.setFullYear(a.getFullYear()+o)},function(a,o){return o.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});co.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:vr(function(o){o.setFullYear(Math.floor(o.getFullYear()/a)*a),o.setMonth(0,1),o.setHours(0,0,0,0)},function(o,f){o.setFullYear(o.getFullYear()+f*a)})};var wa=co,qs=co.range,Ft=vr(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,o){a.setMonth(a.getMonth()+o)},function(a,o){return o.getMonth()-a.getMonth()+(o.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),rn=Ft,Rn=Ft.range,Tr=1e3,_r=6e4,jn=36e5,Jn=864e5,Vn=6048e5;function on(a){return vr(function(o){o.setDate(o.getDate()-(o.getDay()+7-a)%7),o.setHours(0,0,0,0)},function(o,f){o.setDate(o.getDate()+f*7)},function(o,f){return(f-o-(f.getTimezoneOffset()-o.getTimezoneOffset())*_r)/Vn})}var Gn=on(0),$t=on(1),er=on(2),Nr=on(3),Dr=on(4),gi=on(5),oi=on(6),Ti=Gn.range,Fo=$t.range,wo=er.range,Ro=Nr.range,sa=Dr.range,ha=gi.range,Ds=oi.range,Wl=vr(function(a){a.setHours(0,0,0,0)},function(a,o){a.setDate(a.getDate()+o)},function(a,o){return(o-a-(o.getTimezoneOffset()-a.getTimezoneOffset())*_r)/Jn},function(a){return a.getDate()-1}),sh=Wl,Rg=Wl.range,qc=vr(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Tr-a.getMinutes()*_r)},function(a,o){a.setTime(+a+o*jn)},function(a,o){return(o-a)/jn},function(a){return a.getHours()}),jy=qc,jp=qc.range,d0=vr(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Tr)},function(a,o){a.setTime(+a+o*_r)},function(a,o){return(o-a)/_r},function(a){return a.getMinutes()}),Rm=d0,jE=d0.range,f1=vr(function(a){a.setTime(a-a.getMilliseconds())},function(a,o){a.setTime(+a+o*Tr)},function(a,o){return(o-a)/Tr},function(a){return a.getUTCSeconds()}),Pm=f1,Cv=f1.range,Ov=vr(function(){},function(a,o){a.setTime(+a+o)},function(a,o){return o-a});Ov.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?vr(function(o){o.setTime(Math.floor(o/a)*a)},function(o,f){o.setTime(+o+f*a)},function(o,f){return(f-o)/a}):Ov};var Im=Ov,VE=Ov.range;function Dl(a){return vr(function(o){o.setUTCDate(o.getUTCDate()-(o.getUTCDay()+7-a)%7),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCDate(o.getUTCDate()+f*7)},function(o,f){return(f-o)/Vn})}var El=Dl(0),Pg=Dl(1),Lm=Dl(2),ix=Dl(3),Mv=Dl(4),ox=Dl(5),h1=Dl(6),Dm=El.range,hp=Pg.range,$u=Lm.range,js=ix.range,Lo=Mv.range,Wd=ox.range,Gl=h1.range,Zl=vr(function(a){a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCDate(a.getUTCDate()+o)},function(a,o){return(o-a)/Jn},function(a){return a.getUTCDate()-1}),p0=Zl,Rv=Zl.range,id=vr(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCFullYear(a.getUTCFullYear()+o)},function(a,o){return o.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});id.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:vr(function(o){o.setUTCFullYear(Math.floor(o.getUTCFullYear()/a)*a),o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCFullYear(o.getUTCFullYear()+f*a)})};var q0=id,d1=id.range;function Ig(a){if(0<=a.y&&a.y<100){var o=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return o.setFullYear(a.y),o}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Ru(a){if(0<=a.y&&a.y<100){var o=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return o.setUTCFullYear(a.y),o}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function od(a,o,f){return{y:a,m:o,d:f,H:0,M:0,S:0,L:0}}function K0(a){var o=a.dateTime,f=a.date,m=a.time,w=a.periods,C=a.days,I=a.shortDays,B=a.months,V=a.shortMonths,re=j(w),Ce=te(w),Se=j(C),ze=te(C),Rt=j(I),Jt=te(I),Nn=j(B),sr=te(B),Ar=j(V),mr=te(V),Vr={a:wc,A:vh,b:qf,B:sg,c:null,d:fo,e:fo,f:Ra,g:Kc,G:Qc,H:Ha,I:ua,j:Co,L:Wa,m:ls,M:qo,p:lg,q:ug,Q:Iv,s:Lg,S:vs,u:Sl,U:Xl,V:Tl,w:eu,W:Pu,x:null,X:null,y:qu,Y:ac,Z:hu,"%":vp},ci={a:F_,A:Fw,b:e4,B:iM,c:null,d:Iu,e:Iu,f:yf,g:ad,G:v0,H:za,I:Ks,j:pa,L:hs,m:Zs,M:Qs,p:fy,q:Bw,Q:Iv,s:Lg,S:du,u:Ec,U:ws,V:lh,w:dp,W:pu,x:null,X:null,y:pp,Y:Pv,Z:Q0,"%":vp},Io={a:Eo,A:ra,b:Ia,B:Bs,c:dd,d:fr,e:fr,f:Xi,g:vn,G:Bt,H:Pr,I:Pr,j:xr,L:Ni,m:Ln,M:kr,p:ja,q:Zn,Q:oo,s:Yo,S:Hr,u:Ne,U:Xe,V:it,w:_e,W:Tt,x:Kd,X:ms,y:vn,Y:Bt,Z:xn,"%":Uo};Vr.x=to(f,Vr),Vr.X=to(m,Vr),Vr.c=to(o,Vr),ci.x=to(f,ci),ci.X=to(m,ci),ci.c=to(o,ci);function to(ca,Xs){return function(_l){var mo=[],pd=-1,ql=0,Va=ca.length,Tc,Vh,Qd;for(_l instanceof Date||(_l=new Date(+_l));++pd<Va;)ca.charCodeAt(pd)===37&&(mo.push(ca.slice(ql,pd)),(Vh=u[Tc=ca.charAt(++pd)])!=null?Tc=ca.charAt(++pd):Vh=Tc==="e"?" ":"0",(Qd=Xs[Tc])&&(Tc=Qd(_l,Vh)),mo.push(Tc),ql=pd+1);return mo.push(ca.slice(ql,pd)),mo.join("")}}function Qr(ca,Xs){return function(_l){var mo=od(1900,void 0,1),pd=no(mo,ca,_l+="",0),ql,Va;if(pd!=_l.length)return null;if("Q"in mo)return new Date(mo.Q);if("s"in mo)return new Date(mo.s*1e3+("L"in mo?mo.L:0));if(Xs&&!("Z"in mo)&&(mo.Z=0),"p"in mo&&(mo.H=mo.H%12+mo.p*12),mo.m===void 0&&(mo.m="q"in mo?mo.q:0),"V"in mo){if(mo.V<1||mo.V>53)return null;"w"in mo||(mo.w=1),"Z"in mo?(ql=Ru(od(mo.y,0,1)),Va=ql.getUTCDay(),ql=Va>4||Va===0?Pg.ceil(ql):Pg(ql),ql=p0.offset(ql,(mo.V-1)*7),mo.y=ql.getUTCFullYear(),mo.m=ql.getUTCMonth(),mo.d=ql.getUTCDate()+(mo.w+6)%7):(ql=Ig(od(mo.y,0,1)),Va=ql.getDay(),ql=Va>4||Va===0?$t.ceil(ql):$t(ql),ql=sh.offset(ql,(mo.V-1)*7),mo.y=ql.getFullYear(),mo.m=ql.getMonth(),mo.d=ql.getDate()+(mo.w+6)%7)}else("W"in mo||"U"in mo)&&("w"in mo||(mo.w="u"in mo?mo.u%7:"W"in mo?1:0),Va="Z"in mo?Ru(od(mo.y,0,1)).getUTCDay():Ig(od(mo.y,0,1)).getDay(),mo.m=0,mo.d="W"in mo?(mo.w+6)%7+mo.W*7-(Va+5)%7:mo.w+mo.U*7-(Va+6)%7);return"Z"in mo?(mo.H+=mo.Z/100|0,mo.M+=mo.Z%100,Ru(mo)):Ig(mo)}}function no(ca,Xs,_l,mo){for(var pd=0,ql=Xs.length,Va=_l.length,Tc,Vh;pd<ql;){if(mo>=Va)return-1;if(Tc=Xs.charCodeAt(pd++),Tc===37){if(Tc=Xs.charAt(pd++),Vh=Io[Tc in u?Xs.charAt(pd++):Tc],!Vh||(mo=Vh(ca,_l,mo))<0)return-1}else if(Tc!=_l.charCodeAt(mo++))return-1}return mo}function ja(ca,Xs,_l){var mo=re.exec(Xs.slice(_l));return mo?(ca.p=Ce[mo[0].toLowerCase()],_l+mo[0].length):-1}function Eo(ca,Xs,_l){var mo=Rt.exec(Xs.slice(_l));return mo?(ca.w=Jt[mo[0].toLowerCase()],_l+mo[0].length):-1}function ra(ca,Xs,_l){var mo=Se.exec(Xs.slice(_l));return mo?(ca.w=ze[mo[0].toLowerCase()],_l+mo[0].length):-1}function Ia(ca,Xs,_l){var mo=Ar.exec(Xs.slice(_l));return mo?(ca.m=mr[mo[0].toLowerCase()],_l+mo[0].length):-1}function Bs(ca,Xs,_l){var mo=Nn.exec(Xs.slice(_l));return mo?(ca.m=sr[mo[0].toLowerCase()],_l+mo[0].length):-1}function dd(ca,Xs,_l){return no(ca,o,Xs,_l)}function Kd(ca,Xs,_l){return no(ca,f,Xs,_l)}function ms(ca,Xs,_l){return no(ca,m,Xs,_l)}function wc(ca){return I[ca.getDay()]}function vh(ca){return C[ca.getDay()]}function qf(ca){return V[ca.getMonth()]}function sg(ca){return B[ca.getMonth()]}function lg(ca){return w[+(ca.getHours()>=12)]}function ug(ca){return 1+~~(ca.getMonth()/3)}function F_(ca){return I[ca.getUTCDay()]}function Fw(ca){return C[ca.getUTCDay()]}function e4(ca){return V[ca.getUTCMonth()]}function iM(ca){return B[ca.getUTCMonth()]}function fy(ca){return w[+(ca.getUTCHours()>=12)]}function Bw(ca){return 1+~~(ca.getUTCMonth()/3)}return{format:function(ca){var Xs=to(ca+="",Vr);return Xs.toString=function(){return ca},Xs},parse:function(ca){var Xs=Qr(ca+="",!1);return Xs.toString=function(){return ca},Xs},utcFormat:function(ca){var Xs=to(ca+="",ci);return Xs.toString=function(){return ca},Xs},utcParse:function(ca){var Xs=Qr(ca+="",!0);return Xs.toString=function(){return ca},Xs}}}var u={"-":"",_:" ",0:"0"},d=/^\s*\d+/,g=/^%/,A=/[\\^$*+?|[\]().{}]/g;function P(a,o,f){var m=a<0?"-":"",w=(m?-a:a)+"",C=w.length;return m+(C<f?new Array(f-C+1).join(o)+w:w)}function F(a){return a.replace(A,"\\$&")}function j(a){return new RegExp("^(?:"+a.map(F).join("|")+")","i")}function te(a){for(var o={},f=-1,m=a.length;++f<m;)o[a[f].toLowerCase()]=f;return o}function _e(a,o,f){var m=d.exec(o.slice(f,f+1));return m?(a.w=+m[0],f+m[0].length):-1}function Ne(a,o,f){var m=d.exec(o.slice(f,f+1));return m?(a.u=+m[0],f+m[0].length):-1}function Xe(a,o,f){var m=d.exec(o.slice(f,f+2));return m?(a.U=+m[0],f+m[0].length):-1}function it(a,o,f){var m=d.exec(o.slice(f,f+2));return m?(a.V=+m[0],f+m[0].length):-1}function Tt(a,o,f){var m=d.exec(o.slice(f,f+2));return m?(a.W=+m[0],f+m[0].length):-1}function Bt(a,o,f){var m=d.exec(o.slice(f,f+4));return m?(a.y=+m[0],f+m[0].length):-1}function vn(a,o,f){var m=d.exec(o.slice(f,f+2));return m?(a.y=+m[0]+(+m[0]>68?1900:2e3),f+m[0].length):-1}function xn(a,o,f){var m=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(o.slice(f,f+6));return m?(a.Z=m[1]?0:-(m[2]+(m[3]||"00")),f+m[0].length):-1}function Zn(a,o,f){var m=d.exec(o.slice(f,f+1));return m?(a.q=m[0]*3-3,f+m[0].length):-1}function Ln(a,o,f){var m=d.exec(o.slice(f,f+2));return m?(a.m=m[0]-1,f+m[0].length):-1}function fr(a,o,f){var m=d.exec(o.slice(f,f+2));return m?(a.d=+m[0],f+m[0].length):-1}function xr(a,o,f){var m=d.exec(o.slice(f,f+3));return m?(a.m=0,a.d=+m[0],f+m[0].length):-1}function Pr(a,o,f){var m=d.exec(o.slice(f,f+2));return m?(a.H=+m[0],f+m[0].length):-1}function kr(a,o,f){var m=d.exec(o.slice(f,f+2));return m?(a.M=+m[0],f+m[0].length):-1}function Hr(a,o,f){var m=d.exec(o.slice(f,f+2));return m?(a.S=+m[0],f+m[0].length):-1}function Ni(a,o,f){var m=d.exec(o.slice(f,f+3));return m?(a.L=+m[0],f+m[0].length):-1}function Xi(a,o,f){var m=d.exec(o.slice(f,f+6));return m?(a.L=Math.floor(m[0]/1e3),f+m[0].length):-1}function Uo(a,o,f){var m=g.exec(o.slice(f,f+1));return m?f+m[0].length:-1}function oo(a,o,f){var m=d.exec(o.slice(f));return m?(a.Q=+m[0],f+m[0].length):-1}function Yo(a,o,f){var m=d.exec(o.slice(f));return m?(a.s=+m[0],f+m[0].length):-1}function fo(a,o){return P(a.getDate(),o,2)}function Ha(a,o){return P(a.getHours(),o,2)}function ua(a,o){return P(a.getHours()%12||12,o,2)}function Co(a,o){return P(1+sh.count(wa(a),a),o,3)}function Wa(a,o){return P(a.getMilliseconds(),o,3)}function Ra(a,o){return Wa(a,o)+"000"}function ls(a,o){return P(a.getMonth()+1,o,2)}function qo(a,o){return P(a.getMinutes(),o,2)}function vs(a,o){return P(a.getSeconds(),o,2)}function Sl(a){var o=a.getDay();return o===0?7:o}function Xl(a,o){return P(Gn.count(wa(a)-1,a),o,2)}function wl(a){var o=a.getDay();return o>=4||o===0?Dr(a):Dr.ceil(a)}function Tl(a,o){return a=wl(a),P(Dr.count(wa(a),a)+(wa(a).getDay()===4),o,2)}function eu(a){return a.getDay()}function Pu(a,o){return P($t.count(wa(a)-1,a),o,2)}function qu(a,o){return P(a.getFullYear()%100,o,2)}function Kc(a,o){return a=wl(a),P(a.getFullYear()%100,o,2)}function ac(a,o){return P(a.getFullYear()%1e4,o,4)}function Qc(a,o){var f=a.getDay();return a=f>=4||f===0?Dr(a):Dr.ceil(a),P(a.getFullYear()%1e4,o,4)}function hu(a){var o=a.getTimezoneOffset();return(o>0?"-":(o*=-1,"+"))+P(o/60|0,"0",2)+P(o%60,"0",2)}function Iu(a,o){return P(a.getUTCDate(),o,2)}function za(a,o){return P(a.getUTCHours(),o,2)}function Ks(a,o){return P(a.getUTCHours()%12||12,o,2)}function pa(a,o){return P(1+p0.count(q0(a),a),o,3)}function hs(a,o){return P(a.getUTCMilliseconds(),o,3)}function yf(a,o){return hs(a,o)+"000"}function Zs(a,o){return P(a.getUTCMonth()+1,o,2)}function Qs(a,o){return P(a.getUTCMinutes(),o,2)}function du(a,o){return P(a.getUTCSeconds(),o,2)}function Ec(a){var o=a.getUTCDay();return o===0?7:o}function ws(a,o){return P(El.count(q0(a)-1,a),o,2)}function Gd(a){var o=a.getUTCDay();return o>=4||o===0?Mv(a):Mv.ceil(a)}function lh(a,o){return a=Gd(a),P(Mv.count(q0(a),a)+(q0(a).getUTCDay()===4),o,2)}function dp(a){return a.getUTCDay()}function pu(a,o){return P(Pg.count(q0(a)-1,a),o,2)}function pp(a,o){return P(a.getUTCFullYear()%100,o,2)}function ad(a,o){return a=Gd(a),P(a.getUTCFullYear()%100,o,2)}function Pv(a,o){return P(a.getUTCFullYear()%1e4,o,4)}function v0(a,o){var f=a.getUTCDay();return a=f>=4||f===0?Mv(a):Mv.ceil(a),P(a.getUTCFullYear()%1e4,o,4)}function Q0(){return"+0000"}function vp(){return"%"}function Iv(a){return+a}function Lg(a){return Math.floor(+a/1e3)}var Zd,J0,Dg,Vy,mp;uh({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uh(a){return Zd=K0(a),J0=Zd.format,Dg=Zd.parse,Vy=Zd.utcFormat,mp=Zd.utcParse,Zd}var gp=1e3,Nh=gp*60,Vp=Nh*60,ch=Vp*24,Nm=ch*7,ev=ch*30,tv=ch*365;function Lv(a){return new Date(a)}function Fm(a){return a instanceof Date?+a:+new Date(+a)}function Bm(a,o,f,m,w,C,I,B,V){var re=Mr(bc,bc),Ce=re.invert,Se=re.domain,ze=V(".%L"),Rt=V(":%S"),Jt=V("%I:%M"),Nn=V("%I %p"),sr=V("%a %d"),Ar=V("%b %d"),mr=V("%B"),Vr=V("%Y"),ci=[[I,1,gp],[I,5,5*gp],[I,15,15*gp],[I,30,30*gp],[C,1,Nh],[C,5,5*Nh],[C,15,15*Nh],[C,30,30*Nh],[w,1,Vp],[w,3,3*Vp],[w,6,6*Vp],[w,12,12*Vp],[m,1,ch],[m,2,2*ch],[f,1,Nm],[o,1,ev],[o,3,3*ev],[a,1,tv]];function Io(Qr){return(I(Qr)<Qr?ze:C(Qr)<Qr?Rt:w(Qr)<Qr?Jt:m(Qr)<Qr?Nn:o(Qr)<Qr?f(Qr)<Qr?sr:Ar:a(Qr)<Qr?mr:Vr)(Qr)}function to(Qr,no,ja,Eo){if(Qr==null&&(Qr=10),typeof Qr=="number"){var ra=Math.abs(ja-no)/Qr,Ia=xm(function(Bs){return Bs[2]}).right(ci,ra);Ia===ci.length?(Eo=zd(no/tv,ja/tv,Qr),Qr=a):Ia?(Ia=ci[ra/ci[Ia-1][2]<ci[Ia][2]/ra?Ia-1:Ia],Eo=Ia[1],Qr=Ia[0]):(Eo=Math.max(zd(no,ja,Qr),1),Qr=B)}return Eo==null?Qr:Qr.every(Eo)}return re.invert=function(Qr){return new Date(Ce(Qr))},re.domain=function(Qr){return arguments.length?Se(Ih.call(Qr,Fm)):Se().map(Lv)},re.ticks=function(Qr,no){var ja=Se(),Eo=ja[0],ra=ja[ja.length-1],Ia=ra<Eo,Bs;return Ia&&(Bs=Eo,Eo=ra,ra=Bs),Bs=to(Qr,Eo,ra,no),Bs=Bs?Bs.range(Eo,ra+1):[],Ia?Bs.reverse():Bs},re.tickFormat=function(Qr,no){return no==null?Io:V(no)},re.nice=function(Qr,no){var ja=Se();return(Qr=to(Qr,ja[0],ja[ja.length-1],no))?Se(lo(ja,Qr)):re},re.copy=function(){return Yt(re,Bm(a,o,f,m,w,C,I,B,V))},re}function km(){return Df.apply(Bm(wa,rn,Gn,sh,jy,Rm,Pm,Im,J0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ng(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function m0(){var a=0,o=1,f,m,w,C,I=bc,B=!1,V;function re(Ce){return isNaN(Ce=+Ce)?V:I(w===0?.5:(Ce=(C(Ce)-f)*w,B?Math.max(0,Math.min(1,Ce)):Ce))}return re.domain=function(Ce){return arguments.length?(f=C(a=+Ce[0]),m=C(o=+Ce[1]),w=f===m?0:1/(m-f),re):[a,o]},re.clamp=function(Ce){return arguments.length?(B=!!Ce,re):B},re.interpolator=function(Ce){return arguments.length?(I=Ce,re):I},re.unknown=function(Ce){return arguments.length?(V=Ce,re):V},function(Ce){return C=Ce,f=Ce(a),m=Ce(o),w=f===m?0:1/(m-f),re}}function nv(a,o){return o.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function g0(){var a=Jr(m0()(bc));return a.copy=function(){return nv(a,g0())},Hd.apply(a,arguments)}function Dv(){var a=loggish(m0()).domain([1,10]);return a.copy=function(){return nv(a,Dv()).base(a.base())},initInterpolator.apply(a,arguments)}function y0(){var a=symlogish(m0());return a.copy=function(){return nv(a,y0()).constant(a.constant())},initInterpolator.apply(a,arguments)}function rv(){var a=powish(m0());return a.copy=function(){return nv(a,rv()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function Nv(){return rv.apply(null,arguments).exponent(.5)}function Hy(){var a=[],o=identity;function f(m){if(!isNaN(m=+m))return o((bisect(a,m)-1)/(a.length-1))}return f.domain=function(m){if(!arguments.length)return a.slice();a=[];for(var w=0,C=m.length,I;w<C;++w)I=m[w],I!=null&&!isNaN(I=+I)&&a.push(I);return a.sort(ascending),f},f.interpolator=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return Hy(o).domain(a)},initInterpolator.apply(f,arguments)}function zm(){var a=0,o=.5,f=1,m,w,C,I,B,V=bc,re,Ce=!1,Se;function ze(Rt){return isNaN(Rt=+Rt)?Se:(Rt=.5+((Rt=+re(Rt))-w)*(Rt<w?I:B),V(Ce?Math.max(0,Math.min(1,Rt)):Rt))}return ze.domain=function(Rt){return arguments.length?(m=re(a=+Rt[0]),w=re(o=+Rt[1]),C=re(f=+Rt[2]),I=m===w?0:.5/(w-m),B=w===C?0:.5/(C-w),ze):[a,o,f]},ze.clamp=function(Rt){return arguments.length?(Ce=!!Rt,ze):Ce},ze.interpolator=function(Rt){return arguments.length?(V=Rt,ze):V},ze.unknown=function(Rt){return arguments.length?(Se=Rt,ze):Se},function(Rt){return re=Rt,m=Rt(a),w=Rt(o),C=Rt(f),I=m===w?0:.5/(w-m),B=w===C?0:.5/(C-w),ze}}function Wy(){var a=Jr(zm()(bc));return a.copy=function(){return nv(a,Wy())},Hd.apply(a,arguments)}function ax(){var a=loggish(zm()).domain([.1,1,10]);return a.copy=function(){return copy(a,ax()).base(a.base())},initInterpolator.apply(a,arguments)}function p1(){var a=symlogish(zm());return a.copy=function(){return copy(a,p1()).constant(a.constant())},initInterpolator.apply(a,arguments)}function Um(){var a=powish(zm());return a.copy=function(){return copy(a,Um()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function Gy(){return Um.apply(null,arguments).exponent(.5)}function vu(a){let o,f=[];function m(w){return w==null?o:w}return m.invert=m,m.domain=m.range=w=>w?(f=w,w):f,m.unknown=w=>w?(o=w,w):o,m.copy=()=>vu(a).unknown(o),m}const{isNil:sd,isString:HE,uniq:iv}=Le.lodashUtil,ov=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Zy={[we.vY.LINEAR]:zo,[we.vY.POWER]:Jo,[we.vY.LOG]:Eu,[we.vY.IDENTITY]:vu,[we.vY.SEQUENTIAL]:g0,[we.vY.TIME]:km,[we.vY.QUANTILE]:fs,[we.vY.QUANTIZE]:fu,[we.vY.THRESHOLD]:Dh,[we.vY.CAT]:Lh,[we.vY.DIVERGING]:Wy};class Fg{constructor(){(0,Kt.Z)(this,"scaleOptions",{})}apply(o,{styleAttributeService:f}){var m=this;o.hooks.init.tapPromise("FeatureScalePlugin",(0,Mi.Z)(function*(){var w;o.log(we.Or.ScaleInitStart,we.KD.INIT),m.scaleOptions=o.getScaleOptions();const C=f.getLayerStyleAttributes(),I=(w=o.getSource())===null||w===void 0?void 0:w.data.dataArray;Array.isArray(I)&&I.length===0||(m.caculateScalesForAttributes(C||[],I),o.log(we.Or.ScaleInitEnd,we.KD.INIT))})),o.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var w=(0,Mi.Z)(function*(C){if(!C)return C;o.log(we.Or.ScaleInitStart,we.KD.UPDATE),m.scaleOptions=o.getScaleOptions();const I=f.getLayerStyleAttributes(),B=o.getSource().data.dataArray;return Array.isArray(B)&&B.length===0||(m.caculateScalesForAttributes(I||[],B),o.log(we.Or.ScaleInitEnd,we.KD.UPDATE),o.layerModelNeedUpdate=!0),!0});return function(C){return w.apply(this,arguments)}}()),o.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(o.layerModelNeedUpdate)return;this.scaleOptions=o.getScaleOptions();const w=f.getLayerStyleAttributes(),C=o.getSource().data.dataArray;if(!(Array.isArray(C)&&C.length===0)&&w){const I=w.filter(B=>B.needRescale);I.length&&this.caculateScalesForAttributes(I,C)}})}isNumber(o){return!isNaN(parseFloat(o))&&isFinite(o)}caculateScalesForAttributes(o,f){o.forEach(m=>{if(m.scale){const w=m.scale,C=m.scale.field;w.names=this.parseFields(sd(C)?[]:C);const I=[];w.names.forEach(B=>{var V;I.push(this.createScale(B,m.name,(V=m.scale)===null||V===void 0?void 0:V.values,f))}),I.some(B=>B.type===we.ee.VARIABLE)?(w.type=we.ee.VARIABLE,I.forEach(B=>{if(!w.callback&&w.values!=="text"){var V;switch((V=B.option)===null||V===void 0?void 0:V.type){case we.vY.LOG:case we.vY.LINEAR:case we.vY.POWER:if(w.values&&w.values.length>2){const Ce=B.scale.ticks(w.values.length);B.scale.domain(Ce)}w.values?B.scale.range(w.values):B.scale.range(B.option.domain);break;case we.vY.QUANTILE:case we.vY.QUANTIZE:case we.vY.THRESHOLD:B.scale.range(w.values);break;case we.vY.IDENTITY:break;case we.vY.CAT:w.values?B.scale.range(w.values):B.scale.range(B.option.domain);break;case we.vY.DIVERGING:case we.vY.SEQUENTIAL:B.scale.interpolator(ky(w.values));break}}if(w.values==="text"){var re;B.scale.range((re=B.option)===null||re===void 0?void 0:re.domain)}})):(w.type=we.ee.CONSTANT,w.defaultValues=I.map((B,V)=>B.scale(w.names[V]))),w.scalers=I.map(B=>({field:B.field,func:B.scale,option:B.option})),m.needRescale=!1}})}parseFields(o){return Array.isArray(o)?o:HE(o)?o.split("*"):[o]}createScale(o,f,m,w){var C,I;const B=this.scaleOptions[f]&&((C=this.scaleOptions[f])===null||C===void 0?void 0:C.field)===o?this.scaleOptions[f]:this.scaleOptions[o],V={field:o,scale:void 0,type:we.ee.VARIABLE,option:B};if(!w||!w.length)return B&&B.type?V.scale=this.createDefaultScale(B):(V.scale=Lh([o]),V.type=we.ee.CONSTANT),V;const re=(I=w.find(Ce=>!sd(Ce[o])))===null||I===void 0?void 0:I[o];if(this.isNumber(o)||sd(re)&&!B)V.scale=Lh([o]),V.type=we.ee.CONSTANT;else{let Ce=B&&B.type||this.getDefaultType(re);m==="text"&&(Ce=we.vY.CAT),m===void 0&&(Ce=we.vY.IDENTITY);const Se=this.createScaleConfig(Ce,o,B,w);V.scale=this.createDefaultScale(Se),V.option=Se}return V}getDefaultType(o){let f=we.vY.LINEAR;return typeof o=="string"&&(f=ov.test(o)?we.vY.TIME:we.vY.CAT),f}createScaleConfig(o,f,m,w){const C={type:o};let I=[];if(o===we.vY.QUANTILE){const B=new Map;w==null||w.forEach(V=>{B.set(V._id,V[f])}),I=Array.from(B.values())}else I=(w==null?void 0:w.map(B=>B[f]))||[];if(m!=null&&m.domain)C.domain=m==null?void 0:m.domain;else if(o===we.vY.CAT||o===we.vY.IDENTITY)C.domain=iv(I);else if(o===we.vY.QUANTILE)C.domain=I;else if(o===we.vY.DIVERGING){const B=Lf(I),V=(m==null?void 0:m.neutral)!==void 0?m==null?void 0:m.neutral:(B[0]+B[1])/2;C.domain=[B[0],V,B[1]]}else C.domain=Lf(I);return(0,$r.Z)((0,$r.Z)({},C),m)}createDefaultScale({type:o,domain:f,unknown:m,clamp:w,nice:C}){const I=Zy[o]();return f&&I.domain&&I.domain(f),m&&I.unknown(m),w!==void 0&&I.clamp&&I.clamp(w),C!==void 0&&I.nice&&I.nice(C),I}}class ld{apply(o){o.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{o.animateStatus&&o.models.forEach(m=>{m.addUniforms((0,$r.Z)({},o.layerModel.getAnimateUniforms()))})})}}class Bg{apply(o){o.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:f,enableMask:m}=o.getLayerConfig();!o.tileLayer&&f&&f.length>0&&o.updateLayerConfig({mask:m})})}}class kg{build(o){return(0,Mi.Z)(function*(){o.prepareBuildModel(),yield o.buildModels()})()}initLayerModel(o){var f=this;return(0,Mi.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}prepareLayerModel(o){var f=this;return(0,Mi.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}apply(o){var f=this;o.hooks.init.tapPromise("LayerModelPlugin",(0,Mi.Z)(function*(){if(o.getSource().isTile){o.prepareBuildModel();return}o.log(we.Or.BuildModelStart,we.KD.INIT),yield f.initLayerModel(o),o.log(we.Or.BuildModelEnd,we.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var m=(0,Mi.Z)(function*(w){return!w||o.getSource().isTile?!1:(o.log(we.Or.BuildModelStart,we.KD.UPDATE),yield f.prepareLayerModel(o),o.log(we.Or.BuildModelEnd,we.KD.UPDATE),!0)});return function(w){return m.apply(this,arguments)}}())}}class zg{apply(o){o.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:f,fitBoundsOptions:m}=o.getLayerConfig();f&&o.fitBounds(m),o.styleNeedUpdate=!1})}}const Ug=["type"],jg={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Xy={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},jm={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Gr={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function av(a){const o={u_DirectionalLights:new Array(3).fill((0,$r.Z)({},jm)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,$r.Z)({},Gr)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[Xy]),a.forEach(f=>{let{type:m="directional"}=f,w=(0,Rc.Z)(f,Ug);const C=jg[m].lights,I=jg[m].num,B=o[I];o[C][B]=(0,$r.Z)((0,$r.Z)({},o[C][B]),w),o[I]++}),o}class Hp{apply(o){o.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:f}=o.getLayerConfig();f&&o.models.forEach(m=>m.addUniforms((0,$r.Z)({},av())))})}}function Yy(a){return a.map(o=>(typeof o=="string"&&(o=[o,{}]),o))}function _0(a,o,f,m){const w=a.multiPassRenderer,{enableTAA:C}=a.getLayerConfig();return C?w.add(m("taa")):w.add(m("render")),Yy(o).forEach(I=>{const[B,V]=I;w.add(f(B),V)}),w.add(f("copy")),w}class Ff{constructor(){(0,Kt.Z)(this,"enabled",void 0)}apply(o,{rendererService:f,postProcessingPassFactory:m,normalPassFactory:w}){o.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:C,passes:I=[]}=o.getLayerConfig();this.enabled=!!C&&o.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(o.multiPassRenderer=_0(o,I,m,w),o.multiPassRenderer.setRenderFlag(!0))}),o.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:C,height:I}=f.getViewportSize();o.multiPassRenderer.resize(C,I)}})}}let oa=function(a){return a[a.POSITION=0]="POSITION",a[a.COLOR=1]="COLOR",a[a.VERTEX_ID=2]="VERTEX_ID",a[a.PICKING_COLOR=3]="PICKING_COLOR",a[a.STROKE=4]="STROKE",a[a.OPACITY=5]="OPACITY",a[a.OFFSETS=6]="OFFSETS",a[a.ROTATION=7]="ROTATION",a[a.EXTRUSION_BASE=8]="EXTRUSION_BASE",a[a.SIZE=9]="SIZE",a[a.SHAPE=10]="SHAPE",a[a.EXTRUDE=11]="EXTRUDE",a[a.MAX=12]="MAX",a[a.NORMAL=13]="NORMAL",a[a.UV=14]="UV",a[a.LINEAR=15]="LINEAR",a}({});function $y(a){switch(a){case"rotation":return{name:"Rotation",type:we.GC.Attribute,descriptor:{name:"a_Rotation",shaderLocation:oa.ROTATION,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{rotation:f=0}=o;return Array.isArray(f)?[f[0]]:[f]}}};case"stroke":return{name:"stroke",type:we.GC.Attribute,descriptor:{name:"a_Stroke",shaderLocation:oa.STROKE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:4,update:o=>{const{stroke:f=[1,1,1,1]}=o;return f}}};case"opacity":return{name:"opacity",type:we.GC.Attribute,descriptor:{name:"a_Opacity",shaderLocation:oa.OPACITY,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{opacity:f=1}=o;return[f]}}};case"extrusionBase":return{name:"extrusionBase",type:we.GC.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:oa.EXTRUSION_BASE,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{extrusionBase:f=0}=o;return[f]}}};case"offsets":return{name:"offsets",type:we.GC.Attribute,descriptor:{name:"a_Offsets",shaderLocation:oa.OFFSETS,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const{offsets:f}=o;return f}}};case"thetaOffset":return{name:"thetaOffset",type:we.GC.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:15,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{thetaOffset:f=1}=o;return[f]}}};default:return}}const{isNumber:yp}=Le.lodashUtil,Fv={NONE:0,ENCODE:1,HIGHLIGHT:2};class sv{constructor(){(0,Kt.Z)(this,"pickingUniformMap",void 0)}pickOption2Array(){const o=[];return this.pickingUniformMap.forEach(f=>{yp(f)?o.push(f):o.push(...f)}),o}updatePickOption(o,f){Object.keys(o).forEach(I=>{this.pickingUniformMap.set(I,o[I])});const m=f.getLayerConfig().pickingBuffer||0,w=Number(f.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",m),this.pickingUniformMap.set("u_shaderPick",w),f.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(o,{styleAttributeService:f}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),o.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();f.registerStyleAttribute({name:"pickingColor",type:we.GC.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:oa.PICKING_COLOR,buffer:{data:[],type:we.gl.FLOAT},size:3,update:w=>{const{id:C}=w;return m?(0,Le.Z6)(C):[0,0,0]}}})}),o.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:Fv.ENCODE},o),o.models.forEach(w=>w.addUniforms({u_PickingStage:Fv.ENCODE})))}),o.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:Fv.HIGHLIGHT},o),o.models.forEach(w=>w.addUniforms({u_PickingStage:Fv.HIGHLIGHT})))}),o.hooks.beforeHighlight.tap("PixelPickingPlugin",m=>{const{highlightColor:w,activeMix:C=0}=o.getLayerConfig(),I=typeof w=="string"?(0,Le.CI)(w):w||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Le.W0)(new Uint8Array(m))});const B={u_PickingStage:Fv.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:I.map(V=>V*255),u_activeMix:C};this.updatePickOption(B,o),o.models.forEach(V=>V.addUniforms(B))}),o.hooks.beforeSelect.tap("PixelPickingPlugin",m=>{const{selectColor:w,selectMix:C=0}=o.getLayerConfig(),I=typeof w=="string"?(0,Le.CI)(w):w||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Le.W0)(new Uint8Array(m))});const B={u_PickingStage:Fv.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:I.map(V=>V*255),u_activeMix:C,u_CurrentSelectedId:m,u_SelectColor:I.map(V=>V*255)};this.updatePickOption(B,o),o.models.forEach(V=>V.addUniforms(B))})}}const sc=["mvt","geojsonvt","testTile"];function Al(a){const o=a.getSource();return sc.includes(o.parser.type)}class _f{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{Al(o)||this.registerBuiltinAttributes(f,o)})}registerBuiltinAttributes(o,f){if(f.type==="MaskLayer"){this.registerPositionAttribute(o);return}this.registerPositionAttribute(o),this.registerColorAttribute(o),this.registerVertexIdAttribute(o)}registerPositionAttribute(o){o.registerStyleAttribute({name:"position",type:we.GC.Attribute,descriptor:{name:"a_Position",shaderLocation:oa.POSITION,buffer:{data:[],type:we.gl.FLOAT},size:3,update:(f,m,w)=>w.length===2?[w[0],w[1],0]:[w[0],w[1],w[2]]}})}registerColorAttribute(o){o.registerStyleAttribute({name:"color",type:we.GC.Attribute,descriptor:{name:"a_Color",shaderLocation:oa.COLOR,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:4,update:f=>{const{color:m}=f;return!m||!m.length?[1,1,1,1]:m}}})}registerVertexIdAttribute(o){o.registerStyleAttribute({name:"vertexId",type:we.GC.Attribute,descriptor:{name:"a_vertexId",shaderLocation:oa.VERTEX_ID,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:(f,m)=>[m]}})}}class Vm{constructor(){(0,Kt.Z)(this,"cameraService",void 0),(0,Kt.Z)(this,"coordinateSystemService",void 0),(0,Kt.Z)(this,"rendererService",void 0),(0,Kt.Z)(this,"mapService",void 0),(0,Kt.Z)(this,"layerService",void 0)}apply(o,{rendererService:f,mapService:m,layerService:w,coordinateSystemService:C,cameraService:I}){this.rendererService=f,this.mapService=m,this.layerService=w,this.coordinateSystemService=C,this.cameraService=I;const B=this.mapService.version;let V=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],re=[0,0],Ce;this.rendererService.uniformBuffers[0]||(Ce=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0}),this.rendererService.uniformBuffers[0]=Ce),o.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const Se=o.getLayerConfig().tileOrigin;this.coordinateSystemService.refresh(Se),B==="GAODE2.x"&&(this.setLayerCenter(o),V=this.mapService.map.customCoords.getMVPMatrix(),re=this.mapService.getCustomCoordCenter(),o.getLayerUniformBuffer().subData({offset:0,data:new Uint8Array(new Float32Array([...V,...re]).buffer)}));const{width:ze,height:Rt}=this.rendererService.getViewportSize(),{data:Jt,uniforms:Nn}=this.generateUBO(V,re,ze,Rt);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:Jt}),this.rendererService.queryVerdorInfo()==="WebGL1"&&o.models.forEach(Ar=>{Ar.addUniforms((0,$r.Z)((0,$r.Z)({},Nn),{},{u_PickingBuffer:o.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(o.getShaderPickStat())}))})})}setLayerCenter(o){o.coordCenter===void 0&&(o.coordCenter=o.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(o.coordCenter)}generateUBO(o,f,m,w){const C=this.cameraService.getProjectionMatrix(),I=this.cameraService.getViewMatrix(),B=this.cameraService.getViewProjectionMatrix(),V=this.cameraService.getModelMatrix(),re=this.coordinateSystemService.getViewportCenterProjection(),Ce=this.coordinateSystemService.getPixelsPerDegree(),Se=this.cameraService.getZoom(),ze=this.coordinateSystemService.getPixelsPerDegree2(),Rt=this.cameraService.getZoomScale(),Jt=this.coordinateSystemService.getPixelsPerMeter(),Nn=this.coordinateSystemService.getCoordinateSystem(),sr=this.cameraService.getCameraPosition(),Ar=window.devicePixelRatio,mr=this.coordinateSystemService.getViewportCenter(),Vr=[m,w],ci=this.cameraService.getFocalDistance();return{data:[...I,...C,...B,...V,...re,...Ce,Se,...ze,Rt,...Jt,Nn,...sr,Ar,...mr,...Vr,ci,0,0,0],uniforms:{[we.lv.ProjectionMatrix]:C,[we.lv.ViewMatrix]:I,[we.lv.ViewProjectionMatrix]:B,[we.lv.Zoom]:Se,[we.lv.ZoomScale]:Rt,[we.lv.FocalDistance]:ci,[we.lv.CameraPosition]:sr,[we.kw.CoordinateSystem]:Nn,[we.kw.ViewportCenter]:mr,[we.kw.ViewportCenterProjection]:re,[we.kw.PixelsPerDegree]:Ce,[we.kw.PixelsPerDegree2]:ze,[we.kw.PixelsPerMeter]:Jt,[we.kw.Mvp]:o,u_sceneCenterMercator:f,u_ViewportSize:Vr,u_ModelMatrix:V,u_DevicePixelRatio:Ar}}}}class Hm{apply(o){o.hooks.beforeRender.tap("UpdateModelPlugin",()=>{o.layerModel&&o.layerModel.needUpdate().then(f=>{f&&o.renderLayers()})}),o.hooks.afterRender.tap("UpdateModelPlugin",()=>{o.layerModelNeedUpdate=!1})}}class v1{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(o,{styleAttributeService:f})}),o.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{o.layerModelNeedUpdate||o.inited&&this.updateStyleAttribute(o,{styleAttributeService:f})})}updateStyleAttribute(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],w=f.getLayerStyleAttribute("filter");if(w&&w.needRegenerateVertices){o.layerModelNeedUpdate=!0,m.forEach(C=>C.needRegenerateVertices=!1);return}m.filter(C=>C.needRegenerateVertices).forEach(C=>{f.updateAttributeByFeatureRange(C.name,o.getEncodedData(),C.featureRange.startIndex,C.featureRange.endIndex,o),C.needRegenerateVertices=!1})}initStyleAttribute(o,{styleAttributeService:f}){(f.getLayerStyleAttributes()||[]).filter(w=>w.needRegenerateVertices).forEach(w=>{f.updateAttributeByFeatureRange(w.name,o.getEncodedData(),w.featureRange.startIndex,w.featureRange.endIndex),w.needRegenerateVertices=!1})}}function m1(){return[new Wu,new _f,new Fg,new rd,new zg,new Bg,new v1,new Hm,new Ff,new Vm,new ld,new Hp,new sv,new kg]}const qy={[we.h0.additive]:{enable:!0,func:{srcRGB:we.gl.ONE,dstRGB:we.gl.ONE,srcAlpha:1,dstAlpha:1}},[we.h0.none]:{enable:!1},[we.h0.normal]:{enable:!0,func:{srcRGB:we.gl.SRC_ALPHA,dstRGB:we.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[we.h0.subtractive]:{enable:!0,func:{srcRGB:we.gl.ONE,dstRGB:we.gl.ONE,srcAlpha:we.gl.ZERO,dstAlpha:we.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:we.gl.FUNC_SUBTRACT,alpha:we.gl.FUNC_SUBTRACT}},[we.h0.max]:{enable:!0,func:{srcRGB:we.gl.ONE,dstRGB:we.gl.ONE},equation:{rgb:we.gl.MAX_EXT}},[we.h0.min]:{enable:!0,func:{srcRGB:we.gl.ONE,dstRGB:we.gl.ONE},equation:{rgb:we.gl.MIN_EXT}}};class Vg{constructor(o){(0,Kt.Z)(this,"layer",void 0),this.layer=o}pickRender(o){const m=this.layer.getContainer().layerService,w=this.layer;if(w.tileLayer)return w.tileLayer.pickRender(o);w.hooks.beforePickingEncode.call(),m.renderTileLayerMask(w),w.renderModels({ispick:!0}),w.hooks.afterPickingEncode.call()}pick(o,f){var m=this;return(0,Mi.Z)(function*(){const C=m.layer.getContainer().pickingService;return o.type==="RasterLayer"?m.pickRasterLayer(o,f):(m.pickRender(f),C.pickFromPickingFBO(o,f))})()}pickRasterLayer(o,f,m){const w=this.layer.getContainer(),C=w.pickingService,I=w.mapService,B=this.layer.getSource().extent,V=(0,Le.if)(f.lngLat,B),re={x:f.x,y:f.y,type:f.type,lngLat:f.lngLat,target:f,rasterValue:null},Ce=m||o;if(V){const Se=this.readRasterValue(o,B,I,f.x,f.y);return re.rasterValue=Se,C.triggerHoverOnLayer(Ce,re),!0}else return re.type=f.type==="mousemove"?"mouseout":"un"+f.type,C.triggerHoverOnLayer(Ce,(0,$r.Z)((0,$r.Z)({},re),{},{type:"unpick"})),C.triggerHoverOnLayer(Ce,re),!1}readRasterValue(o,f,m,w,C){const I=o.getSource().data.dataArray[0],[B=0,V=0,re=10,Ce=-10]=f,Se=m.lngLatToContainer([B,V]),ze=m.lngLatToContainer([re,Ce]),Rt=ze.x-Se.x,Jt=Se.y-ze.y,Nn=[(w-Se.x)/Rt,(C-ze.y)/Jt],sr=I.width||1,Ar=I.height||1,mr=Math.floor(Nn[0]*sr),Vr=Math.floor(Nn[1]*Ar),ci=Math.max(0,Vr-1)*sr+mr;return I.data[ci]}selectFeature(o){const f=this.layer,[m,w,C]=o;f.hooks.beforeSelect.call([m,w,C])}highlightPickedFeature(o){const[f,m,w]=o;this.layer.hooks.beforeHighlight.call([f,m,w])}getFeatureById(o){return this.layer.getSource().getFeatureById(o)}}class Ky{constructor(o){(0,Kt.Z)(this,"layer",void 0),(0,Kt.Z)(this,"rendererService",void 0),(0,Kt.Z)(this,"colorTexture",void 0),(0,Kt.Z)(this,"key",void 0),this.layer=o;const f=this.layer.getContainer();this.rendererService=f.rendererService}getColorTexture(o,f){const m=this.getTextureKey(o,f);return this.key===m?this.colorTexture:(this.createColorTexture(o,f),this.key=m,this.colorTexture)}createColorTexture(o,f){const{createTexture2D:m}=this.rendererService,w=this.getColorRampBar(o,f),C=m({data:new Uint8Array(w.data),width:w.width,height:w.height,flipY:!1,unorm:!0});return this.colorTexture=C,C}setColorTexture(o,f,m){this.key=this.getTextureKey(f,m),this.colorTexture=o}destroy(){var o;(o=this.colorTexture)===null||o===void 0||o.destroy()}getColorRampBar(o,f){switch(o.type){case"cat":return(0,Le.hj)(o);case"quantize":return(0,Le.NJ)(o);case"custom":return(0,Le.Oc)(o,f);case"linear":return(0,Le.M4)(o,f);default:return(0,Le.Cl)(o)}}getTextureKey(o,f){var m;return`${o.colors.join("_")}_${o==null||(m=o.positions)===null||m===void 0?void 0:m.join("_")}_${o.type}_${f==null?void 0:f.join("_")}`}}const Qy=["passes"],_p=["moduleName","vertexShader","fragmentShader","inject","triangulation","styleOption","pickingEnabled"],{isEqual:Fh,isFunction:fh,isNumber:b0,isObject:na,isPlainObject:Hg,isUndefined:g1}=Le.lodashUtil;let Jy=0;class x0 extends vl.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){return this.container.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(o={}){super(),(0,Kt.Z)(this,"id",`${Jy++}`),(0,Kt.Z)(this,"name",`${Jy}`),(0,Kt.Z)(this,"parent",void 0),(0,Kt.Z)(this,"coordCenter",void 0),(0,Kt.Z)(this,"type",void 0),(0,Kt.Z)(this,"visible",!0),(0,Kt.Z)(this,"zIndex",0),(0,Kt.Z)(this,"minZoom",void 0),(0,Kt.Z)(this,"maxZoom",void 0),(0,Kt.Z)(this,"inited",!1),(0,Kt.Z)(this,"layerModelNeedUpdate",!1),(0,Kt.Z)(this,"pickedFeatureID",null),(0,Kt.Z)(this,"selectedFeatureID",null),(0,Kt.Z)(this,"styleNeedUpdate",!1),(0,Kt.Z)(this,"rendering",void 0),(0,Kt.Z)(this,"forceRender",!1),(0,Kt.Z)(this,"clusterZoom",0),(0,Kt.Z)(this,"layerType",void 0),(0,Kt.Z)(this,"triangulation",void 0),(0,Kt.Z)(this,"layerPickService",void 0),(0,Kt.Z)(this,"textureService",void 0),(0,Kt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,Kt.Z)(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,Kt.Z)(this,"hooks",{init:new pl.S$,afterInit:new pl.oI,beforeRender:new pl.oI,beforeRenderData:new pl.bf,afterRender:new pl.ni,beforePickingEncode:new pl.ni,afterPickingEncode:new pl.ni,beforeHighlight:new pl.ni(["pickedColor"]),afterHighlight:new pl.ni,beforeSelect:new pl.ni(["pickedColor"]),afterSelect:new pl.ni,beforeDestroy:new pl.ni,afterDestroy:new pl.ni}),(0,Kt.Z)(this,"models",[]),(0,Kt.Z)(this,"multiPassRenderer",void 0),(0,Kt.Z)(this,"plugins",void 0),(0,Kt.Z)(this,"startInit",!1),(0,Kt.Z)(this,"sourceOption",void 0),(0,Kt.Z)(this,"layerModel",void 0),(0,Kt.Z)(this,"shapeOption",void 0),(0,Kt.Z)(this,"tileLayer",void 0),(0,Kt.Z)(this,"layerChildren",[]),(0,Kt.Z)(this,"masks",[]),(0,Kt.Z)(this,"configService",we.cO),(0,Kt.Z)(this,"styleAttributeService",void 0),(0,Kt.Z)(this,"layerSource",void 0),(0,Kt.Z)(this,"postProcessingPassFactory",void 0),(0,Kt.Z)(this,"animateOptions",{enable:!1}),(0,Kt.Z)(this,"container",void 0),(0,Kt.Z)(this,"encodedData",void 0),(0,Kt.Z)(this,"currentPickId",null),(0,Kt.Z)(this,"rawConfig",void 0),(0,Kt.Z)(this,"needUpdateConfig",void 0),(0,Kt.Z)(this,"encodeStyleAttribute",{}),(0,Kt.Z)(this,"enableShaderEncodeStyles",[]),(0,Kt.Z)(this,"enableDataEncodeStyles",[]),(0,Kt.Z)(this,"pendingStyleAttributes",[]),(0,Kt.Z)(this,"scaleOptions",{}),(0,Kt.Z)(this,"animateStartTime",void 0),(0,Kt.Z)(this,"animateStatus",!1),(0,Kt.Z)(this,"isDestroyed",!1),(0,Kt.Z)(this,"uniformBuffers",[]),(0,Kt.Z)(this,"encodeDataLength",0),(0,Kt.Z)(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0;const f=this.getLayerConfig();f&&f.autoFit&&this.fitBounds(f.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=o.name||this.id,this.zIndex=o.zIndex||0,this.rawConfig=o,this.masks=o.maskLayers||[]}addMask(o){this.masks.push(o),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(o){this.masks.push(o)}removeMaskLayer(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),o.destroy()}getAttribute(o){return this.styleAttributeService.getLayerStyleAttribute(o)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(o){if(Object.keys(o).map(f=>{f in this.rawConfig&&(this.rawConfig[f]=o[f])}),!this.startInit)this.needUpdateConfig=(0,$r.Z)((0,$r.Z)({},this.needUpdateConfig),o);else{const f=this.container.id;this.configService.setLayerConfig(f,this.id,(0,$r.Z)((0,$r.Z)((0,$r.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),o)),this.needUpdateConfig={}}}setContainer(o){this.container=o}getContainer(){return this.container}addPlugin(o){return this.plugins.push(o),this}init(){var o=this;return(0,Mi.Z)(function*(){const f=o.container.id;o.startInit=!0,o.configService.setLayerConfig(f,o.id,o.rawConfig),o.layerType=o.rawConfig.layerType;const{enableMultiPassRenderer:m,passes:w}=o.getLayerConfig();m&&w!==null&&w!==void 0&&w.length&&w.length>0&&o.mapService.on("mapAfterFrameChange",()=>{o.renderLayers()}),o.postProcessingPassFactory=o.container.postProcessingPassFactory,o.styleAttributeService=o.container.styleAttributeService,m&&(o.multiPassRenderer=o.container.multiPassRenderer,o.multiPassRenderer.setLayer(o)),o.pendingStyleAttributes.forEach(({attributeName:C,attributeField:I,attributeValues:B,updateOptions:V})=>{o.styleAttributeService.updateStyleAttribute(C,{scale:(0,$r.Z)({field:I},o.splitValuesAndCallbackInAttribute(B,I?void 0:o.getLayerConfig()[C]))},V)}),o.pendingStyleAttributes=[],o.plugins=m1();for(const C of o.plugins)C.apply(o,o.container);o.layerPickService=new Vg(o),o.textureService=new Ky(o),o.log(we.Or.LayerInitStart),yield o.hooks.init.promise(),o.log(we.Or.LayerInitEnd),o.inited=!0,o.emit("inited",{target:o,type:"inited"}),o.emit("add",{target:o,type:"add"}),o.hooks.afterInit.call()})()}log(o,f="init"){var m;if(this.tileLayer||this.isTileLayer)return;const w=`${this.id}.${f}.${o}`,C={id:this.id,type:this.type};(m=this.debugService)===null||m===void 0||m.log(w,C)}updateModelData(o){o.attributes&&o.elements?this.models.map(f=>{f.updateAttributesAndElements(o.attributes,o.elements)}):console.warn("data error")}setLayerPickService(o){this.layerPickService=o}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:o}=this.getLayerConfig();o!=null&&o.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(o,f,m){return this.updateStyleAttribute("color",o,f,m),this}texture(o,f,m){return this.updateStyleAttribute("texture",o,f,m),this}rotate(o,f,m){return this.updateStyleAttribute("rotate",o,f,m),this}size(o,f,m){return this.updateStyleAttribute("size",o,f,m),this}filter(o,f,m){const w=this.updateStyleAttribute("filter",o,f,m);return this.dataState.dataSourceNeedUpdate=w&&this.inited,this}shape(o,f,m){this.shapeOption={field:o,values:f};const w=this.updateStyleAttribute("shape",o,f,m);return this.dataState.dataSourceNeedUpdate=w&&this.inited,this}label(o,f,m){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:o,attributeValues:f,updateOptions:m}),this}animate(o){let f={};return na(o)?(f.enable=!0,f=(0,$r.Z)((0,$r.Z)({},f),o)):f.enable=o,this.updateLayerConfig({animateOption:f}),this}source(o,f){return(o==null?void 0:o.type)==="source"?(this.setSource(o),this):(this.sourceOption={data:o,options:f},this.clusterZoom=0,this)}setData(o,f){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(o,f)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(o,f)}),this}dataUpdatelog(){this.log(we.Or.SourceInitStart,we.KD.UPDATE),this.layerSource.once("update",()=>{this.log(we.Or.SourceInitEnd,we.KD.UPDATE)})}style(o){const{passes:f}=o,m=(0,Rc.Z)(o,Qy);f&&Yy(f).forEach(C=>{const I=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(C[0]);I&&I.updateOptions(C[1])}),m.borderColor&&(m.stroke=m.borderColor),m.borderWidth&&(m.strokeWidth=m.borderWidth);const w=m;return Object.keys(m).forEach(C=>{const I=m[C];Array.isArray(I)&&I.length===2&&!b0(I[0])&&!b0(I[1])&&(w[C]={field:I[0],value:I[1]})}),this.encodeStyle(w),this.updateLayerConfig(w),this}encodeStyle(o){Object.keys(o).forEach(f=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(f)&&Hg(o[f])&&(o[f].field||o[f].value)&&!Fh(this.encodeStyleAttribute[f],o[f])?(this.encodeStyleAttribute[f]=o[f],this.updateStyleAttribute(f,o[f].field,o[f].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[f]&&(delete this.encodeStyleAttribute[f],this.dataState.dataSourceNeedUpdate=!0)})}scale(o,f){const m=(0,$r.Z)({},this.scaleOptions);if(na(o)?this.scaleOptions=(0,$r.Z)((0,$r.Z)({},this.scaleOptions),o):this.scaleOptions[o]=f,this.styleAttributeService&&!Fh(m,this.scaleOptions)){const w=na(o)?o:{[o]:f};this.styleAttributeService.updateScaleAttribute(w)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(o={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(o),this))}renderMultiPass(){var o=this;return(0,Mi.Z)(function*(){o.encodeDataLength<=0&&!o.forceRender||(o.multiPassRenderer&&o.multiPassRenderer.getRenderFlag()?yield o.multiPassRenderer.render():(o.multiPassRenderer,o.renderModels()))})()}active(o){const f={};return f.enableHighlight=na(o)?!0:o,na(o)?(f.enableHighlight=!0,o.color&&(f.highlightColor=o.color),o.mix&&(f.activeMix=o.mix)):f.enableHighlight=!!o,this.updateLayerConfig(f),this}setActive(o,f){if(na(o)){const{x:m=0,y:w=0}=o;this.updateLayerConfig({highlightColor:na(f)?f.color:this.getLayerConfig().highlightColor,activeMix:na(f)?f.mix:this.getLayerConfig().activeMix}),this.pick({x:m,y:w})}else this.updateLayerConfig({pickedFeatureID:o,highlightColor:na(f)?f.color:this.getLayerConfig().highlightColor,activeMix:na(f)?f.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call((0,Le.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(o){const f={};return f.enableSelect=na(o)?!0:o,na(o)?(f.enableSelect=!0,o.color&&(f.selectColor=o.color),o.mix&&(f.selectMix=o.mix)):f.enableSelect=!!o,this.updateLayerConfig(f),this}setSelect(o,f){if(na(o)){const{x:m=0,y:w=0}=o;this.updateLayerConfig({selectColor:na(f)?f.color:this.getLayerConfig().selectColor,selectMix:na(f)?f.mix:this.getLayerConfig().selectMix}),this.pick({x:m,y:w})}else this.updateLayerConfig({pickedFeatureID:o,selectColor:na(f)?f.color:this.getLayerConfig().selectColor,selectMix:na(f)?f.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,Le.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(o){return this.updateLayerConfig({blend:o}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(o){return this.zIndex=o,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(o){this.currentPickId=o}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(o){this.selectedFeatureID=o}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const o=this.mapService.getZoom(),{visible:f,minZoom:m=-1/0,maxZoom:w=1/0}=this.getLayerConfig();return!!f&&o>=m&&o<w}setMultiPass(o,f){if(this.updateLayerConfig({enableMultiPassRenderer:o}),f&&this.updateLayerConfig({passes:f}),o){const{passes:m=[]}=this.getLayerConfig();this.multiPassRenderer=_0(this,m,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:w,height:C}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(w,C)}return this}setMinZoom(o){return this.updateLayerConfig({minZoom:o}),this}getMinZoom(){const{minZoom:o}=this.getLayerConfig();return o}getMaxZoom(){const{maxZoom:o}=this.getLayerConfig();return o}get(o){return this.getLayerConfig()[o]}setMaxZoom(o){return this.updateLayerConfig({maxZoom:o}),this}setAutoFit(o){return this.updateLayerConfig({autoFit:o}),this}fitBounds(o){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const m=this.getSource().extent;return m.some(C=>Math.abs(C)===1/0)?this:(this.mapService.fitBounds([[m[0],m[1]],[m[2],m[3]]],o),this)}destroy(o=!0){var f,m,w,C,I;if(this.isDestroyed)return;(f=this.layerModel)===null||f===void 0||f.uniformBuffers.forEach(V=>{V.destroy()}),this.layerChildren.map(V=>V.destroy(!1)),this.layerChildren=[];const{maskfence:B}=this.getLayerConfig();B&&(this.masks.map(V=>V.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(m=this.multiPassRenderer)===null||m===void 0||m.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(w=this.layerModel)===null||w===void 0||w.clearModels(o),(C=this.tileLayer)===null||C===void 0||C.destroy(),this.models=[],(I=this.debugService)===null||I===void 0||I.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var o;this.models.forEach(f=>f.destroy()),(o=this.layerModel)===null||o===void 0||o.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(o=>o.needRescale||o.needRemapping||o.needRegenerateVertices).length}setSource(o){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=o,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const f=this.mapService.getZoom();this.layerSource.updateClusterData(f)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:f})=>{if(this.coordCenter===void 0){var m;const w=this.layerSource.center;this.coordCenter=w,(m=this.mapService)!==null&&m!==void 0&&m.setCoordCenter&&this.mapService.setCoordCenter(w)}if(f==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(o){this.encodedData=o,this.encodeDataLength=o.length}getEncodedData(){return this.encodedData}getScale(o){return this.styleAttributeService.getLayerAttributeScale(o)}getLegend(o){var f,m,w;const C=this.styleAttributeService.getLayerStyleAttribute(o);return{type:(m=((C==null||(f=C.scale)===null||f===void 0?void 0:f.scalers)||[])[0])===null||m===void 0||(m=m.option)===null||m===void 0?void 0:m.type,field:C==null||(w=C.scale)===null||w===void 0?void 0:w.field,items:this.getLegendItems(o)}}getLegendItems(o){const f=this.styleAttributeService.getLayerAttributeScale(o);return f?f.invertExtent?f.range().map(w=>({value:f.invertExtent(w),[o]:w})):f.ticks?f.ticks().map(w=>({value:w,[o]:f(w)})):f!=null&&f.domain?f.domain().filter(w=>!g1(w)).map(w=>({value:w,[o]:f(w)})):[]:[]}pick({x:o,y:f}){this.interactionService.triggerHover({x:o,y:f})}boxSelect(o,f){this.pickingService.boxPickLayer(this,o,f)}buildLayerModel(o){var f=this;return(0,Mi.Z)(function*(){const{moduleName:m,vertexShader:w,fragmentShader:C,inject:I,triangulation:B,styleOption:V,pickingEnabled:re=!0}=o,Ce=(0,Rc.Z)(o,_p);f.shaderModuleService.registerModule(m,{vs:w,fs:C,inject:I});const{vs:Se,fs:ze,uniforms:Rt}=f.shaderModuleService.getModule(m),{createModel:Jt}=f.rendererService;return new Promise(Nn=>{const{attributes:sr,elements:Ar,count:mr}=f.styleAttributeService.createAttributesAndIndices(f.encodedData,B,V,f),Vr=[...f.layerModel.uniformBuffers,...f.rendererService.uniformBuffers,f.getLayerUniformBuffer()];re&&Vr.push(f.getPickingUniformBuffer());const ci=(0,$r.Z)({attributes:sr,uniforms:Rt,fs:ze,vs:Se,elements:Ar,blend:qy[we.h0.normal],uniformBuffers:Vr,textures:f.layerModel.textures},Ce);mr&&(ci.count=mr);const Io=Jt(ci);Nn(Io)})})()}createAttributes(o){const{triangulation:f}=o,{attributes:m}=this.styleAttributeService.createAttributes(this.encodedData,f);return m}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(o){const{enableHighlight:f=!0,enableSelect:m=!0}=this.getLayerConfig();let w=this.eventNames().indexOf(o)!==-1||this.eventNames().indexOf("un"+o)!==-1;return(o==="click"||o==="dblclick")&&m&&(w=!0),o==="mousemove"&&(f||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(w=!0),this.isVisible()&&w}buildModels(){return(0,Mi.Z)(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var o=this;return(0,Mi.Z)(function*(){yield o.buildModels()})()}renderMulPass(o){return(0,Mi.Z)(function*(){yield o.render()})()}renderModels(o={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(f=>{f.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(o),textures:this.layerModel.textures},(o==null?void 0:o.ispick)||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(o,f,m,w){const C=this.configService.getAttributeConfig(this.id)||{};return Fh(C[o],{field:f,values:m})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(o)!==-1&&this.configService.setAttributeConfig(this.id,{[o]:{field:f,values:m}}),this.startInit?this.styleAttributeService.updateStyleAttribute(o,{scale:(0,$r.Z)({field:f},this.splitValuesAndCallbackInAttribute(m,this.getLayerConfig()[f]))},w):this.pendingStyleAttributes.push({attributeName:o,attributeField:f,attributeValues:m,updateOptions:w}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(o){console.warn("empty fn")}processData(o){return o}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}initLayerModels(){var o=this;return(0,Mi.Z)(function*(){o.models.forEach(w=>w.destroy()),o.models=[],o.uniformBuffers.forEach(w=>{w.destroy()}),o.uniformBuffers=[];const f=o.rendererService.createBuffer({data:new Float32Array(16+4).fill(0),isUBO:!0});o.uniformBuffers.push(f);const m=o.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0});o.uniformBuffers.push(m),o.models=yield o.layerModel.initModels()})()}getLayerUniformBuffer(){return this.uniformBuffers[0]}getPickingUniformBuffer(){return this.uniformBuffers[1]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(o){return{values:fh(o)?void 0:o,callback:fh(o)?o:void 0}}}function Wg(a,o){return{enable:a,mask:255,func:{cmp:we.gl.EQUAL,ref:o?1:0,mask:1}}}function tu(a){return a.maskOperation===we.lE.OR?{enable:!0,mask:255,func:{cmp:we.gl.ALWAYS,ref:1,mask:255},opFront:{fail:we.gl.KEEP,zfail:we.gl.REPLACE,zpass:we.gl.REPLACE}}:{enable:!0,mask:255,func:{cmp:a.stencilType===we.yn.SINGLE||a.stencilIndex===0?we.gl.ALWAYS:we.gl.LESS,ref:a.stencilType===we.yn.SINGLE?1:a.stencilIndex===0?2:1,mask:255},opFront:{fail:we.gl.KEEP,zfail:we.gl.REPLACE,zpass:we.gl.REPLACE}}}const y1={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},hh={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};function WE(a){let o="";return Object.keys(a).forEach(f=>{const m=a[f];Array.isArray(m)?o+=`vec${m.length} ${f};
`:o+=`flot ${f};
`}),o}function Sc(a){return Math.max(Math.ceil(a/4)*4,4)}const Wp={opacity:oa.OPACITY,stroke:oa.STROKE,offsets:oa.OFFSETS,rotation:oa.ROTATION,extrusionBase:oa.EXTRUSION_BASE,thetaOffset:15};class Ta{constructor(o){(0,Kt.Z)(this,"triangulation",void 0),(0,Kt.Z)(this,"uniformBuffers",[]),(0,Kt.Z)(this,"textures",[]),(0,Kt.Z)(this,"createTexture2D",void 0),(0,Kt.Z)(this,"preStyleAttribute",{}),(0,Kt.Z)(this,"encodeStyleAttribute",{}),(0,Kt.Z)(this,"layer",void 0),(0,Kt.Z)(this,"dataTexture",void 0),(0,Kt.Z)(this,"DATA_TEXTURE_WIDTH",void 0),(0,Kt.Z)(this,"dataTextureTest",void 0),(0,Kt.Z)(this,"configService",void 0),(0,Kt.Z)(this,"shaderModuleService",void 0),(0,Kt.Z)(this,"rendererService",void 0),(0,Kt.Z)(this,"iconService",void 0),(0,Kt.Z)(this,"fontService",void 0),(0,Kt.Z)(this,"styleAttributeService",void 0),(0,Kt.Z)(this,"mapService",void 0),(0,Kt.Z)(this,"cameraService",void 0),(0,Kt.Z)(this,"layerService",void 0),(0,Kt.Z)(this,"pickingService",void 0),(0,Kt.Z)(this,"attributeUnifoms",void 0),(0,Kt.Z)(this,"commonUnifoms",void 0),this.layer=o,this.configService=o.getContainer().globalConfigService,this.rendererService=o.getContainer().rendererService,this.pickingService=o.getContainer().pickingService,this.shaderModuleService=o.getContainer().shaderModuleService,this.styleAttributeService=o.getContainer().styleAttributeService,this.mapService=o.getContainer().mapService,this.iconService=o.getContainer().iconService,this.fontService=o.getContainer().fontService,this.cameraService=o.getContainer().cameraService,this.layerService=o.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:f}=this.rendererService;this.createTexture2D=f}getBlend(){const{blend:o="normal"}=this.layer.getLayerConfig();return qy[we.h0[o]]}getStencil(o){const{mask:f=!1,maskInside:m=!0,enableMask:w,maskOperation:C=we.lE.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return tu({isStencil:!0,stencilType:we.yn.SINGLE});if(o.isStencil)return tu((0,$r.Z)((0,$r.Z)({},o),{},{maskOperation:C}));const I=f||w&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return Wg(I,m)}getDefaultStyle(){return{}}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const m=(0,$r.Z)((0,$r.Z)({},f.uniformsOption),o.uniformsOption);return!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(m.u_texture=this.textures[0]),m}getAnimateUniforms(){return{}}needUpdate(){return(0,Mi.Z)(function*(){return!1})()}buildModels(){return(0,Mi.Z)(function*(){throw new Error("Method not implemented.")})()}initModels(){return(0,Mi.Z)(function*(){throw new Error("Method not implemented.")})()}clearModels(o=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(o){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(o){return[o.enable?0:1,o.duration||4,o.interval||.2,o.trailLength||.1]}startModelAnimate(){const{animateOption:o}=this.layer.getLayerConfig();o.enable&&this.layer.setAnimateStartTime()}getInject(){const o=this.layer.encodeStyleAttribute;let f="";const m=[];this.layer.enableShaderEncodeStyles.forEach(I=>{o[I]?f+=`#define USE_ATTRIBUTE_${I.toUpperCase()} 0.0; 

`:m.push(`  ${hh[I]} u_${I};`);let B=Wp[I];!B&&I==="THETA_OFFSET"&&(B=15),f+=`
          #ifdef USE_ATTRIBUTE_${I.toUpperCase()}
          layout(location = ${Wp[I]}) in ${hh[I]} a_${I.charAt(0).toUpperCase()+I.slice(1)};
        #endif

        `});const w=m.length?`
layout(std140) uniform AttributeUniforms {
${m.join(`
`)}
};
    `:"";f+=w;let C="";return this.layer.enableShaderEncodeStyles.forEach(I=>{C+=`

    #ifdef USE_ATTRIBUTE_${I.toUpperCase()}
      ${hh[I]} ${I}  = a_${I.charAt(0).toUpperCase()+I.slice(1)};
    #else
      ${hh[I]} ${I} = u_${I};
    #endif

    `}),{"vs:#decl":f,"fs:#decl":w,"vs:#main-start":C}}getStyleAttribute(){const o={};return this.layer.enableShaderEncodeStyles.forEach(f=>{if(!this.layer.encodeStyleAttribute[f]){const m=this.layer.getLayerConfig()[f];let w=typeof m=="undefined"?y1[f]:m;f==="stroke"&&(w=(0,Le.CI)(w)),o["u_"+f]=w}}),o}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(o=>{const f=$y(o);f&&(this.styleAttributeService.registerStyleAttribute(f),f.descriptor&&(f.descriptor.shaderLocation=Wp[o]))})}updateEncodeAttribute(o,f){this.encodeStyleAttribute[o]=f}initUniformsBuffer(){const o=this.getUniformsBufferInfo(this.getStyleAttribute()),f=this.getCommonUniformsInfo();o.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(Sc(o.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.attributeUnifoms)),f.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(Sc(f.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(o){let f=0;const m=[];return Object.values(o).forEach(w=>{Array.isArray(w)?(m.push(...w),f+=w.length):typeof w=="number"?(m.push(w),f+=1):typeof w=="boolean"&&(m.push(Number(w)),f+=1)}),{uniformsOption:o,uniformsLength:f,uniformsArray:m}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var o,f;const{uniformsArray:m}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:w}=this.getCommonUniformsInfo();(o=this.attributeUnifoms)===null||o===void 0||o.subData({offset:0,data:new Uint8Array(new Float32Array(m).buffer)}),(f=this.commonUnifoms)===null||f===void 0||f.subData({offset:0,data:new Uint8Array(new Float32Array(w).buffer)})}}var Bv=D(9187),E0=D.n(Bv);const ol=100,Gg=36,Bh=40;function e_(a){return a/180*Math.acos(-1)}function ud(a){const o=e_(a[0])+Math.PI/2,f=e_(a[1]),m=ol+Math.random()*.4,w=m*Math.cos(f)*Math.cos(o),C=m*Math.cos(f)*Math.sin(o),I=m*Math.sin(f);return[C,I,w]}function Zg(a,o){const f=mat4.create(),m=mat4.create(),w=vec3.fromValues(0,1,0),C=vec3.fromValues(0,0,0);o=o||{},a=typeof a!="undefined"?a:1;const B=2+(typeof o.segments!="undefined"?o.segments:32),V=2*B,re=[],Ce=[],Se=[],ze=[],Rt=[],Jt=[];for(let Nn=0;Nn<=B;Nn++){const sr=Nn/B,Ar=sr*Math.PI;for(let mr=0;mr<=V;mr++){const Vr=mr/V,ci=Vr*Math.PI*2;mat4.identity(m),mat4.rotateZ(m,m,-Ar),mat4.identity(f),mat4.rotateY(f,f,ci),vec3.transformMat4(C,w,m),vec3.transformMat4(C,C,f),vec3.scale(C,C,-a),Se.push(C.slice()),ze.push(...C.slice()),vec3.normalize(C,C),Rt.push(...C.slice()),Jt.push([Vr,1-sr]),ze.push(Vr,1-sr)}if(Nn>0){const mr=Se.length;let Vr=mr-2*(V+1);for(;Vr+V+2<mr;Vr++)re.push([Vr,Vr+1,Vr+V+1]),Ce.push(Vr,Vr+1,Vr+V+1),re.push([Vr+V+1,Vr+1,Vr+V+2]),Ce.push(Vr+V+1,Vr+1,Vr+V+2)}}return{cells:re,positions:Se,uvs:Jt,positionsArr:ze,indicesArr:Ce,normalArr:Rt}}var $o=D(31437);const ao=$o.Ue(),kh=$o.Ue(),Dc=$o.Ue(),S0=$o.Ue(),kv=$o.Ue();function sx(a,o,f,m,w){$o.IH(a,f,m),$o.Fv(a,a),o=$o.al(-a[1],a[0]);const C=$o.al(-f[1],f[0]);return[w/$o.AK(o,C),o]}function zh(a,o){return $o.t8(a,-o[1],o[0])}function Xg(a,o,f){return $o.lu(a,o,f),$o.Fv(a,a),a}function lx(a,o){return a[0]===o[0]&&a[1]===o[1]}function gI(a){const o=new Map;for(let f=0;f<a.length;f++){const m=a[0].toString()+"-"+a[1].toString();o.get(m)?(a.splice(f,1),f++):o.set(m,m)}return a}class aC{constructor(o={}){(0,Kt.Z)(this,"complex",void 0),(0,Kt.Z)(this,"join",void 0),(0,Kt.Z)(this,"cap",void 0),(0,Kt.Z)(this,"miterLimit",void 0),(0,Kt.Z)(this,"thickness",void 0),(0,Kt.Z)(this,"normal",void 0),(0,Kt.Z)(this,"lastFlip",-1),(0,Kt.Z)(this,"miter",$o.al(0,0)),(0,Kt.Z)(this,"started",!1),(0,Kt.Z)(this,"dash",!1),(0,Kt.Z)(this,"totalDistance",0),(0,Kt.Z)(this,"currentIndex",0),this.join=o.join||"miter",this.cap=o.cap||"butt",this.miterLimit=o.miterLimit||10,this.thickness=o.thickness||1,this.dash=o.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let w=f.startIndex;for(let C=1;C<m;C++){const I=o[C-1],B=o[C],V=C<o.length-1?o[C+1]:null,re=this.simpleSegment(f,w,I,B,V);w+=re}if(this.dash)for(let C=0;C<f.positions.length/6;C++)f.positions[C*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}simpleExtrude_gaode2(o,f){const m=this.complex;if(o.length<=1)return m;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const w=o.length;let C=m.startIndex;for(let re=1;re<w;re++){var I,B,V;const Ce=o[re-1];Ce.push((I=f[re-1][2])!==null&&I!==void 0?I:0);const Se=f[re-1],ze=o[re];ze.push((B=f[re][2])!==null&&B!==void 0?B:0);const Rt=f[re],Jt=re<o.length-1?[...o[re+1],(V=f[re+1][2])!==null&&V!==void 0?V:0]:null,Nn=re<f.length-1?f[re+1]:null,sr=this.simpleSegment(m,C,Ce,ze,Jt,Se,Rt,Nn);C+=sr}if(this.dash)for(let re=0;re<m.positions.length/6;re++)m.positions[re*6+5]=this.totalDistance;return m.startIndex=m.positions.length/6,m}extrude_gaode2(o,f){const m=this.complex;if(o.length<=1)return m;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const w=o.length;let C=m.startIndex;for(let re=1;re<w;re++){var I,B,V;const Ce=o[re-1];Ce.push((I=f[re-1][2])!==null&&I!==void 0?I:0);const Se=f[re-1],ze=o[re];ze.push((B=f[re][2])!==null&&B!==void 0?B:0);const Rt=f[re],Jt=re<o.length-1?[...o[re+1],(V=f[re+1][2])!==null&&V!==void 0?V:0]:null,Nn=re<f.length-1?f[re+1]:null,sr=this.segment_gaode2(m,C,Ce,ze,Jt,Se,Rt,Nn);C+=sr}if(this.dash)for(let re=0;re<m.positions.length/6;re++)m.positions[re*6+5]=this.totalDistance;return m.startIndex=m.positions.length/6,m}extrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let w=f.startIndex;for(let C=1;C<m;C++){const I=o[C-1],B=o[C],V=C<o.length-1?o[C+1]:null,re=this.segment(f,w,I,B,V);w+=re}if(this.dash)for(let C=0;C<f.positions.length/6;C++)f.positions[C*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}simpleSegment(o,f,m,w,C){let I=0;const B=o.indices,V=o.positions,re=o.normals,Ce=(0,Le.Z)([w[0],w[1]]),Se=(0,Le.Z)([m[0],m[1]]);Xg(Dc,Ce,Se);let ze=0;if(this.dash&&(ze=this.lineSegmentDistance(Ce,Se),this.totalDistance+=ze),this.normal||(this.normal=$o.Ue(),zh(this.normal,Dc)),this.started||(this.started=!0,this.extrusions(V,re,m,this.normal,this.thickness,this.totalDistance-ze)),B.push(f+0,f+1,f+2),!C)zh(this.normal,Dc),this.extrusions(V,re,w,this.normal,this.thickness,this.totalDistance),B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),I+=2;else{const Rt=(0,Le.Z)([C[0],C[1]]);lx(Ce,Rt)&&$o.IH(Rt,Ce,$o.Fv(Rt,$o.$X(Rt,Ce,Se))),Xg(S0,Rt,Ce);const[Jt,Nn]=sx(kv,$o.Ue(),Dc,S0,this.thickness);let sr=$o.AK(kv,this.normal)<0?-1:1;this.extrusions(V,re,w,Nn,Jt,this.totalDistance),B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),sr=-1,$o.JG(this.normal,Nn),I+=2,this.lastFlip=sr}return I}segment_gaode2(o,f,m,w,C,I,B,V){let re=0;const Ce=o.indices,Se=o.positions,ze=o.normals,Rt=this.cap==="square",Jt=this.join==="bevel",Nn=(0,Le.Z)([B[0],B[1]]),sr=(0,Le.Z)([I[0],I[1]]);Xg(Dc,w,m);let Ar=0;if(this.dash&&(Ar=this.lineSegmentDistance(Nn,sr),this.totalDistance+=Ar),this.normal||(this.normal=$o.Ue(),zh(this.normal,Dc)),!this.started)if(this.started=!0,Rt){const mr=$o.Ue(),Vr=$o.Ue();$o.IH(mr,this.normal,Dc),$o.IH(Vr,this.normal,Dc),ze.push(Vr[0],Vr[1],0),ze.push(mr[0],mr[1],0),Se.push(m[0],m[1],m[2]|0,this.totalDistance-Ar,-this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),Se.push(m[0],m[1],m[2]|0,this.totalDistance-Ar,this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Se,ze,m,this.normal,this.thickness,this.totalDistance-Ar);if(Ce.push(f+0,f+1,f+2),C){lx(w,C)&&$o.IH(C,w,$o.Fv(C,$o.$X(C,w,m))),Xg(S0,C,w);const[mr,Vr]=sx(kv,$o.Ue(),Dc,S0,this.thickness);let ci=$o.AK(kv,this.normal)<0?-1:1,Io=Jt;!Io&&this.join==="miter"&&mr>this.miterLimit&&(Io=!0),Io?(ze.push(this.normal[0],this.normal[1],0),ze.push(Vr[0],Vr[1],0),Se.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*ci,w[2]|0),this.complex.indexes.push(this.currentIndex),Se.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness*ci,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,Ce.push(...this.lastFlip!==-ci?[f,f+2,f+3]:[f+2,f+1,f+3]),Ce.push(f+2,f+3,f+4),zh(ao,S0),$o.JG(this.normal,ao),ze.push(this.normal[0],this.normal[1],0),Se.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*ci,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,re+=3):(this.extrusions(Se,ze,w,Vr,mr,this.totalDistance),Ce.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),ci=-1,$o.JG(this.normal,Vr),re+=2),this.lastFlip=ci}else{if(zh(this.normal,Dc),Rt){const mr=$o.Ue(),Vr=$o.Ue();$o.lu(Vr,Dc,this.normal),$o.IH(mr,Dc,this.normal),ze.push(Vr[0],Vr[1],0),ze.push(mr[0],mr[1],0),Se.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),Se.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Se,ze,w,this.normal,this.thickness,this.totalDistance);Ce.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),re+=2}return re}segment(o,f,m,w,C){let I=0;const B=o.indices,V=o.positions,re=o.normals,Ce=this.cap==="square",Se=this.join==="bevel",ze=(0,Le.Z)([w[0],w[1]]),Rt=(0,Le.Z)([m[0],m[1]]);Xg(Dc,ze,Rt);let Jt=0;if(this.dash&&(Jt=this.lineSegmentDistance(ze,Rt),this.totalDistance+=Jt),this.normal||(this.normal=$o.Ue(),zh(this.normal,Dc)),!this.started)if(this.started=!0,Ce){const Nn=$o.Ue(),sr=$o.Ue();$o.IH(Nn,this.normal,Dc),$o.IH(sr,this.normal,Dc),re.push(sr[0],sr[1],0),re.push(Nn[0],Nn[1],0),V.push(m[0],m[1],m[2]|0,this.totalDistance-Jt,-this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),V.push(m[0],m[1],m[2]|0,this.totalDistance-Jt,this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,re,m,this.normal,this.thickness,this.totalDistance-Jt);if(B.push(f+0,f+1,f+2),C){const Nn=(0,Le.Z)([C[0],C[1]]);lx(ze,Nn)&&$o.IH(Nn,ze,$o.Fv(Nn,$o.$X(Nn,ze,Rt))),Xg(S0,Nn,ze);const[sr,Ar]=sx(kv,$o.Ue(),Dc,S0,this.thickness);let mr=$o.AK(kv,this.normal)<0?-1:1,Vr=Se;!Vr&&this.join==="miter"&&sr>this.miterLimit&&(Vr=!0),Vr?(re.push(this.normal[0],this.normal[1],0),re.push(Ar[0],Ar[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*mr,w[2]|0),this.complex.indexes.push(this.currentIndex),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness*mr,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,B.push(...this.lastFlip!==-mr?[f,f+2,f+3]:[f+2,f+1,f+3]),B.push(f+2,f+3,f+4),zh(ao,S0),$o.JG(this.normal,ao),re.push(this.normal[0],this.normal[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*mr,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,I+=3):(this.extrusions(V,re,w,Ar,sr,this.totalDistance),B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),mr=-1,$o.JG(this.normal,Ar),I+=2),this.lastFlip=mr}else{if(zh(this.normal,Dc),Ce){const Nn=$o.Ue(),sr=$o.Ue();$o.lu(sr,Dc,this.normal),$o.IH(Nn,Dc,this.normal),re.push(sr[0],sr[1],0),re.push(Nn[0],Nn[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,re,w,this.normal,this.thickness,this.totalDistance);B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),I+=2}return I}extrusions(o,f,m,w,C,I){f.push(w[0],w[1],0),f.push(w[0],w[1],0),o.push(m[0],m[1],m[2]|0,I,-C,m[2]|0),this.complex.indexes.push(this.currentIndex),o.push(m[0],m[1],m[2]|0,I,C,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(o,f){const m=f[0]-o[0],w=f[1]-o[1];return Math.sqrt(m*m+w*w)}}var nu=D(77160);function GE(a){const o=a[0][0],f=a[0][a[0].length-1];o[0]===f[0]&&o[1]===f[1]&&(a[0]=a[0].slice(0,a[0].length-1));const m=a[0].length,w=earcut.flatten(a),{vertices:C,dimensions:I}=w,B=[],V=[];for(let Ce=0;Ce<C.length/I;Ce++)I===2?B.push(C[Ce*2],C[Ce*2+1],1):B.push(C[Ce*3],C[Ce*3+1],1);const re=earcut(w.vertices,w.holes,w.dimensions);V.push(...re);for(let Ce=0;Ce<m;Ce++){const Se=w.vertices.slice(Ce*I,(Ce+1)*I);let ze=w.vertices.slice((Ce+1)*I,(Ce+2)*I);ze.length===0&&(ze=w.vertices.slice(0,I));const Rt=B.length/3;B.push(Se[0],Se[1],1,ze[0],ze[1],1,Se[0],Se[1],0,ze[0],ze[1],0),V.push(...[0,2,1,2,3,1].map(Jt=>Jt+Rt))}return{positions:B,index:V}}function ux(a){const o=earcut.flatten(a),f=earcut(o.vertices,o.holes,o.dimensions);return{positions:o.vertices,index:f}}function ZE(a,o=!1){const f=a[0][0],m=a[0][a[0].length-1];f[0]===m[0]&&f[1]===m[1]&&(a[0]=a[0].slice(0,a[0].length-1));const w=a[0].length,C=E0().flatten(a),{vertices:I,dimensions:B}=C,V=[],re=[],Ce=[];for(let ze=0;ze<I.length/B;ze++)V.push(I[ze*B],I[ze*B+1],1,-1,-1),Ce.push(0,0,1);const Se=E0()(C.vertices,C.holes,C.dimensions);re.push(...Se);for(let ze=0;ze<w;ze++){const Rt=C.vertices.slice(ze*B,(ze+1)*B);let Jt=C.vertices.slice((ze+1)*B,(ze+2)*B);Jt.length===0&&(Jt=C.vertices.slice(0,B));const Nn=V.length/5;V.push(Rt[0],Rt[1],1,0,0,Jt[0],Jt[1],1,.1,0,Rt[0],Rt[1],0,0,.8,Jt[0],Jt[1],0,.1,.8);const sr=w0([Jt[0],Jt[1],1],[Rt[0],Rt[1],0],[Rt[0],Rt[1],1],o);Ce.push(...sr,...sr,...sr,...sr),re.push(...[1,2,0,3,2,1].map(Ar=>Ar+Nn))}return{positions:V,index:re,normals:Ce}}function w0(a,o,f,m=!1){const w=nu.Ue(),C=nu.Ue(),I=nu.Ue();m&&(a=(0,Le.vP)(a),o=(0,Le.vP)(o),f=(0,Le.vP)(f));const B=nu.al(...a),V=nu.al(...o),re=nu.al(...f);nu.lu(w,re,V),nu.lu(C,B,V),nu.kC(I,w,C);const Ce=nu.Ue();return nu.Fv(Ce,I),Ce}let zv=function(a){return a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn",a}({}),Bf=function(a){return a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon",a}({});function t_(a,o=0){const f=Math.PI*2/a,m=[];for(let C=0;C<a;C++)m.push(f*C+o*Math.PI/12);return m.map(C=>{const I=Math.sin(C+Math.PI/4),B=Math.cos(C+Math.PI/4);return[I,B,0]})}function _1(){return t_(30)}function XE(){return t_(4)}function Wm(){return t_(3)}function YE(){return t_(6,1)}function sC(){return t_(5)}const cx={[Bf.CIRCLE]:_1,[Bf.HEXAGON]:YE,[Bf.TRIANGLE]:Wm,[Bf.SQUARE]:XE,[Bf.PENTAGON]:sC,[zv.CYLINDER]:_1,[zv.HEXAGONCOLUMN]:YE,[zv.TRIANGLECOLUMN]:Wm,[zv.SQUARECOLUMN]:XE,[zv.PENTAGONCOLUMN]:sC},Yg={};function Gm(a){const o=(0,Le.SI)(a.coordinates);return{vertices:[...o,...o,...o,...o],indices:[0,1,2,2,3,0],size:o.length}}function b1(a){const o=(0,Le.SI)(a.coordinates),f=ud(o);return{vertices:[...f,...f,...f,...f],indices:[0,1,2,2,3,0],size:f.length}}function Nl(a){const{shape:o}=a,{positions:f,index:m,normals:w}=uC(o,!1);return{vertices:f,indices:m,normals:w,size:5}}function bf(a){const o=(0,Le.SI)(a.coordinates);return{vertices:[...o],indices:[0],size:o.length}}function Xd(a){const{coordinates:o,originCoordinates:f,version:m}=a,w=new aC({dash:!0,join:"bevel"});if(m==="GAODE2.x"){let I=o;Array.isArray(I[0][0])||(I=[o]);let B=f;Array.isArray(B[0][0])||(B=[f]);for(let V=0;V<I.length;V++){const re=I[V],Ce=B[V];w.extrude_gaode2(re,Ce)}}else{let I=o;I[0]&&!Array.isArray(I[0][0])&&(I=[o]),I.forEach(B=>{w.extrude(B)})}const C=w.complex;return{vertices:C.positions,indices:C.indices,normals:C.normals,indexes:C.indexes,size:6}}function $E(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function mu(a){const{coordinates:o,originCoordinates:f}=a,m=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:w,totalDistance:C}=fx(o,f);return w.map(I=>{m.push(I[0],I[1],I[2],I[3],0,C)}),{vertices:m,indices:[],normals:[],size:6,count:w.length}}function yI(a){const{coordinates:o}=a,f=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],size:4,count:0};const{results:m}=hx(o);return m.map(w=>{f.push(w[0],w[1],w[2],w[3])}),{vertices:f,indices:[],size:4,count:m.length}}function qE(a,o){const f=o[0]-a[0],m=o[1]-a[1];return Math.sqrt(f*f+m*m)}function Uv(a,o){return a.length<3&&a.push(0),o!==void 0&&a.push(o),a}function fx(a,o){let f=a,m=o||a;Array.isArray(f)&&Array.isArray(f[0])&&Array.isArray(f[0][0])&&(f=o.flat(),m=o.flat());let w=0;if(f.length<2)return{results:f,totalDistance:0};{const C=[],I=Uv(f[0],w);C.push(I);for(let V=1;V<f.length-1;V++){const re=qE((0,Le.Z)(m[V-1]),(0,Le.Z)(m[V]));w+=re;const Ce=Uv(f[V],w);C.push(Ce),C.push(Ce)}const B=qE((0,Le.Z)(m[m.length-2]),(0,Le.Z)(m[m.length-1]));return w+=B,C.push(Uv(f[f.length-1],w)),{results:C,totalDistance:w}}}function hx(a){if(a.length<2)return{results:a};{const o=[],f=Uv(a[0]);o.push(f);for(let m=1;m<a.length-1;m++){const w=Uv(a[m]);o.push(w),o.push(w)}return o.push(Uv(a[a.length-1])),{results:o}}}function n_(a){const{coordinates:o}=a,f=E0().flatten(o),{vertices:m,dimensions:w,holes:C}=f;return{indices:E0()(m,C,w),vertices:m,size:w}}function lC(a){const{coordinates:o}=a,f=E0().flatten(o),{vertices:m,dimensions:w,holes:C}=f;return{indices:E0()(m,C,w),vertices:ru(m),size:w+4}}function ru(a){const o=[],{center:f,radius:m}=(0,Le.Rx)(a);for(let w=0;w<a.length;w+=2){const C=a[w],I=a[w+1];o.push(C,I,0,...f,m)}return o}function r_(a){const o=a.coordinates,{positions:f,index:m,normals:w}=ZE(o,!0);return{vertices:f,indices:m,normals:w,size:5}}function KE(a){const{shape:o}=a,{positions:f,index:m}=fC(o);return{vertices:f,indices:m,size:3}}function lv(a){const o=a.coordinates;return{vertices:[...o[0],0,0,0,...o[1],0,1,0,...o[2],0,1,1,...o[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function x1(a,o){const{segmentNumber:f=30}=o,m=a.coordinates,w=[],C=[];for(let I=0;I<f;I++)w.push(I,1,I,m[0][0],m[0][1],m[1][0],m[1][1],I,-1,I,m[0][0],m[0][1],m[1][0],m[1][1]),I!==f-1&&C.push(...[0,1,2,1,3,2].map(B=>I*2+B));return{vertices:w,indices:C,size:7}}function Po(a){const o=a.coordinates;o.length===2&&o.push(0);const f=E1(-1,1),m=E1(1,1),w=E1(-1,-1),C=E1(1,-1);return{vertices:[...o,...f,...o,...w,...o,...C,...o,...m],indices:[0,1,2,3,0,2],size:5}}function uC(a,o=!1){if(Yg&&Yg[a])return Yg[a];const f=cx[a]?cx[a]():cx.cylinder(),m=ZE([f],o);return Yg[a]=m,m}function _I(a,o,f=3,m=!1){const w=new Float32Array(a.length/f*3);let C,I,B;const V=vec3.create(),re=vec3.create(),Ce=vec3.create();for(let Se=0,ze=o.length;Se<ze;Se+=3){C=o[Se+0]*3,I=o[Se+1]*3,B=o[Se+2]*3;let Rt=[a[C],a[C+1]],Jt=[a[I],a[I+1]],Nn=[a[B],a[B+1]];m&&(Rt=lngLatToMeters(Rt),Jt=lngLatToMeters(Jt),Nn=lngLatToMeters(Nn));const[sr,Ar]=Rt,mr=vec3.fromValues(sr,Ar,a[C+2]),[Vr,ci]=Jt,Io=vec3.fromValues(Vr,ci,a[I+2]),[to,Qr]=Nn,no=vec3.fromValues(to,Qr,a[B+2]);vec3.sub(V,no,Io),vec3.sub(re,mr,Io),vec3.cross(Ce,V,re),w[C]+=V[0],w[C+1]+=V[1],w[C+2]+=V[2],w[I]+=V[0],w[I+1]+=V[1],w[I+2]+=V[2],w[B]+=V[0],w[B+1]+=V[1],w[B+2]+=V[2]}return cC(w),w}function cC(a){for(let o=0,f=a.length;o<f;o+=3){const m=vec3.fromValues(a[o],a[o+1],a[o+2]),w=vec3.create();vec3.normalize(w,m),a.set(w,o)}}function bI(a){const o=a[0][0],f=a[0][a[0].length-1];return o[0]===f[0]&&o[1]===f[1]}function fC(a){const o=["cylinder","triangleColumn","hexagonColumn","squareColumn"],f=geometryShape[a]?geometryShape[a]():geometryShape.circle();return o.indexOf(a)===-1?fillPolygon([f]):extrudePolygon([f])}function E1(a,o){const f=(a+1)/2,m=(o+1)/2;return[f,m]}function xI(){const a=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}function hC(){const a=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}const dC=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,pC=`#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9



  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  //\u8BA1\u7B97dashArray\u548CdistanceRatio \u8F93\u51FA\u5230\u7247\u5143
  vec2 s = source;
  vec2 t = target;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));

  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,vC={solid:0,dash:1};class mC extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0),(0,Kt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:we.gl.NEAREST,min:we.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5],forward:I=!0,lineTexture:B=!1,iconStep:V=100,segmentNumber:re=30}=this.layer.getLayerConfig(),{animateOption:Ce}=this.layer.getLayerConfig();let Se=C;w!=="dash"&&(Se=[0,0]),Se.length===2&&Se.push(0,0);let ze=0,Rt=[0,0,0,0],Jt=[0,0,0,0];if(o&&f&&(Rt=(0,Le.CI)(o),Jt=(0,Le.CI)(f),ze=1),this.rendererService.getDirty()){var Nn;(Nn=this.texture)===null||Nn===void 0||Nn.bind()}const sr={u_animate:this.animateOption2Array(Ce),u_dash_array:Se,u_sourceColor:Rt,u_targetColor:Jt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:re,u_lineDir:I?1:-1,u_icon_step:V,u_line_texture:B?1:0,u_textureBlend:m==="normal"?0:1,u_blur:.9,u_line_type:vC[w||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:ze};return this.getUniformsBufferInfo(sr)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:dC,vert:pC,type:""}}buildModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:w,type:C}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc2d"+C,vertexShader:w,fragmentShader:m,inject:o.getInject(),triangulation:x1,depth:{enable:!1},styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:we.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}const gC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

// varying vec2 v_normal;
in vec4 v_dash_array;
in vec4 v_color;
in vec4 v_line_data;
in float v_segmentIndex;
in vec2 v_iconMapUV;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,yC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,_C={solid:0,dash:1};class bC extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0),(0,Kt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:we.gl.NEAREST,min:we.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5],lineTexture:I=!1,iconStep:B=100,segmentNumber:V=30,globalArcHeight:re=10}=this.layer.getLayerConfig(),{animateOption:Ce}=this.layer.getLayerConfig();C.length===2&&C.push(0,0);let Se=0,ze=[0,0,0,0],Rt=[0,0,0,0];if(o&&f&&(ze=(0,Le.CI)(o),Rt=(0,Le.CI)(f),Se=1),this.rendererService.getDirty()){var Jt;(Jt=this.texture)===null||Jt===void 0||Jt.bind()}const Nn={u_animate:this.animateOption2Array(Ce),u_dash_array:C,u_sourceColor:ze,u_targetColor:Rt,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:ol,u_global_height:re,segmentNumber:V,u_line_type:_C[w]||0,u_icon_step:B,u_line_texture:I?1:0,u_textureBlend:m==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Se};return this.getUniformsBufferInfo(Nn)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:gC,vert:yC,type:""}}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:w,type:C}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc3d"+C,vertexShader:w,fragmentShader:m,inject:o.getInject(),triangulation:x1,styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:we.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}const $g={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},$f=1/2;function uv(a,o){const{width:f=2,height:m=1}=o;return{vertices:[0,$f*a,1*a*f,-(m+$f)*a,1*a*f,(m-$f)*a,0,$f*a,1*a*f,-(m+$f)*a,1*a*f,(m-$f)*a],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*a,-2*a,1,-2*a,1.5*a,1,1*a,1.5*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function xC(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*a*f,1*m,1*a*f,-1*m,0,0,1*a*f,1*m,1*a*f,-1*m],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*a,1,2,1*a,1,-2,1*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function i_(a,o){const{width:f=2,height:m=2}=o;return{vertices:[0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2,0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function QE(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m,0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function EC(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m,0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function SC(a,o){const{width:f=2,height:m=2}=o,w=_1(),C=E0().flatten([w]),I=E0()(C.vertices,C.holes,C.dimensions),B=w.map(V=>[V[0]*f*a,V[1]*m]).flat();return{vertices:[...B,...B],dimensions:2,indices:I.map(V=>V+w.length),outLineIndices:I,normals:[...w.map(V=>[V[1]*m,V[0]*f*a,1]).flat(),...new Array(w.length*3).fill(0)]}}function o_(a,o=0,f){const m=typeof f.source=="object"?f.source.type:f.source,w=typeof f.target=="object"?f.target.type:f.target,{width:C=m?$g[m]:0}=typeof f.source=="object"?f.source:{},{width:I=w?$g[w]:0}=typeof f.target=="object"?f.target:{};return{vertices:[0,$f,1*C,...a,1,$f,-1*I,...a,1,-$f,-1*I,...a,0,-$f,1*C,...a,0,$f,1*C,...a,1,$f,-1*I,...a,1,-$f,-1*I,...a,0,-$f,1*C,...a],outLineIndices:[0,1,2,0,2,3].map(B=>B+o),indices:[4,5,6,4,6,7].map(B=>B+o),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function Zm(a,o){const f=typeof a=="object"?a.type:a,m=o==="source"?1:-1,w=typeof a=="object"?a:{};switch(f){case"circle":return SC(m,w);case"triangle":return xC(m,w);case"diamond":return QE(m,w);case"rect":return i_(m,w);case"classic":return EC(m,w);case"halfTriangle":return uv(m,w);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function dx(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function JE(a,o){return o?wC(a,o):dx(a)}function wC(a,o){const f=a.coordinates.flat(),{target:m="classic",source:w="circle"}=o,C=cd(Zm(w,"source"),f,0,0),I=o_(f,C.vertices.length/7,o),B=cd(Zm(m,"target"),f,1,C.vertices.length/7+I.vertices.length/7);return{vertices:[...C.vertices,...I.vertices,...B.vertices],indices:[...C.outLineIndices,...I.outLineIndices,...B.outLineIndices,...C.indices,...I.indices,...B.indices],normals:[...C.normals,...I.normals,...B.normals],size:7}}function cd(a,o,f=1,m=0){const w=[],{vertices:C,indices:I,dimensions:B,outLineIndices:V}=a;for(let re=0;re<C.length;re+=B)w.push(f,C[re+1],C[re],...o);return(0,$r.Z)((0,$r.Z)({},a),{},{vertices:w,indices:I.map(re=>re+m),outLineIndices:V.map(re=>re+m)})}const px=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,eS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {

   vec2 data = project_pixel(offsets);
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return data;
  }

  return vec2(data.x, -data.y);;
}

vec2 line_dir(vec2 target, vec2 source) {

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return normalize(target - source);
  }
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}

float flag_gap() {
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return 1.;
  }
  return -1.;

}


void main() {

// \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target,source);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x); // mapbox || \u9AD8\u5FB7
   
  vec2 position = mix(source, target, a_Position.x);
  
  float lengthCommon = length(project_position(vec4(target,0,1)) - project_position(vec4(source,0,1)));  //    
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(   
   offsetDistances,
   project_pixel(-lengthCommon*.2), project_pixel(lengthCommon*.2)
  );


  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    a_Position.x
  );

  vec2 normalsCommon =  u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y)); // mapbox || \u9AD8\u5FB7

  float gapCommon = flag_gap() * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir *  (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0));

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));



  setPickingColor(a_PickingColor);
}
`;class Yd extends Ta{getCommonUniformsInfo(){const{gapWidth:o=2,strokeWidth:f=1,strokeOpacity:m=1}=this.layer.getLayerConfig(),w={u_gap_width:o,u_stroke_width:f,u_stroke_opacity:m};return this.getUniformsBufferInfo(w)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"flow_line",vertexShader:eS,fragmentShader:px,inject:o.getInject(),triangulation:JE,styleOption:o.layer.getLayerConfig().symbol,primitive:we.gl.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:we.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:we.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:oa.NORMAL,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}})}}const TC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_line_data;
in vec2 v_iconMapUV;
in vec4 v_dash_array;
in float v_distance_ratio;
in vec4 v_color;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,AC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
  mix(source, target, segmentRatio),
  sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }
  else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    v_line_data.b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,tS={solid:0,dash:1};class nS extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0),(0,Kt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:we.gl.NEAREST,min:we.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5],lineTexture:I=!1,iconStep:B=100,segmentNumber:V=30}=this.layer.getLayerConfig(),{animateOption:re}=this.layer.getLayerConfig();if(C.length===2&&C.push(0,0),this.rendererService.getDirty()){var Ce;(Ce=this.texture)===null||Ce===void 0||Ce.bind()}let Se=0,ze=[0,0,0,0],Rt=[0,0,0,0];o&&f&&(ze=(0,Le.CI)(o),Rt=(0,Le.CI)(f),Se=1);let Jt=this.layer.getLayerAnimateTime();isNaN(Jt)&&(Jt=0);const Nn={u_animate:this.animateOption2Array(re),u_dash_array:C,u_sourceColor:ze,u_targetColor:Rt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:V,u_line_type:tS[w]||0,u_icon_step:B,u_line_texture:I?1:0,u_textureBlend:m==="normal"?0:1,u_time:Jt,u_linearColor:Se};return this.getUniformsBufferInfo(Nn)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig();return[yield o.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:AC,fragmentShader:TC,triangulation:x1,styleOption:{segmentNumber:f},inject:o.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:we.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}let a_=function(a){return a[a.solid=0]="solid",a[a.dash=1]="dash",a}({}),jv=function(a){return a.VERTICAL="vertical",a.HORIZONTAL="horizontal",a}({}),vx=function(a){return a.NORMAL="normal",a.REPLACE="replace",a}({}),s_=function(a){return a[a.pixel=0]="pixel",a[a.meter=1]="meter",a}({}),CC=function(a){return a.ALWAYS="always",a.DRAGEND="dragend",a}({});const mx=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,OC=`
#define Animate 0.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in vec3 a_DistanceAndIndexAndMiter;
layout(location = 13) in vec4 a_Normal_Total_Distance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};


out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  
  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`;class rS extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"textureEventFlag",!1),(0,Kt.Z)(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,Kt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:we.gl.NEAREST,min:we.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5,0,0],lineTexture:I=!1,iconStep:B=100,vertexHeightScale:V=20,strokeWidth:re=0,raisingHeight:Ce=0,heightfixed:Se=!1,linearDir:ze=jv.VERTICAL,blur:Rt=[1,1,1,0]}=this.layer.getLayerConfig();let Jt=C;if(w!=="dash"&&(Jt=[0,0,0,0]),Jt.length===2&&Jt.push(0,0),this.rendererService.getDirty()&&this.texture){var Nn;(Nn=this.texture)===null||Nn===void 0||Nn.bind()}const{animateOption:sr}=this.layer.getLayerConfig();let Ar=0,mr=[0,0,0,0],Vr=[0,0,0,0];o&&f&&(mr=(0,Le.CI)(o),Vr=(0,Le.CI)(f),Ar=1);const ci={u_animate:this.animateOption2Array(sr),u_dash_array:Jt,u_blur:Rt,u_sourceColor:mr,u_targetColor:Vr,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:B,u_heightfixed:Number(Se),u_vertexScale:V,u_raisingHeight:Number(Ce),u_strokeWidth:re,u_textureBlend:m===vx.NORMAL?0:1,u_line_texture:I?1:0,u_linearDir:ze===jv.VERTICAL?1:0,u_linearColor:Ar,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(ci)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.textureEventFlag||(o.textureEventFlag=!0,o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture)),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{depth:f=!1}=o.layer.getLayerConfig(),{frag:m,vert:w,type:C}=o.getShaders();return o.layer.triangulation=Xd,[yield o.layer.buildLayerModel({moduleName:"line"+C,vertexShader:w,fragmentShader:m,triangulation:Xd,inject:o.getInject(),depth:{enable:f}})]})()}getShaders(){return{frag:mx,vert:OC,type:""}}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:we.GC.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:10,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(o,f,m,w,C,I)=>I===void 0?[m[3],10,m[4]]:[m[3],I,m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:we.GC.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:oa.NORMAL,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:4,update:(o,f,m,w,C)=>[...C,m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:oa.UV,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}const MC=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,S1=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color; 
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_SizeDistanceAndTotalDistance.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_SizeDistanceAndTotalDistance.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`;class RC extends Ta{getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,lineType:m="solid",dashArray:w=[10,5,0,0],vertexHeightScale:C=20}=this.layer.getLayerConfig();let I=w;m!=="dash"&&(I=[0,0,0,0]),I.length===2&&I.push(0,0);let B=0,V=[0,0,0,0],re=[0,0,0,0];o&&f&&(V=(0,Le.CI)(o),re=(0,Le.CI)(f),B=1);const Ce={u_sourceColor:V,u_targetColor:re,u_dash_array:I,u_vertexScale:C,u_linearColor:B};return this.getUniformsBufferInfo(Ce)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}getShaders(){return{frag:MC,vert:S1,type:"lineSimpleNormal"}}buildModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const{frag:f,vert:m,type:w}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,triangulation:mu,inject:o.getInject(),primitive:we.gl.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:we.GC.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:oa.SIZE,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:4,update:(o,f,m)=>{const{size:w=1}=o,C=Array.isArray(w)?[w[0],w[1]]:[w,0];return[C[0],C[1],m[3],m[5]]}}})}}const w1=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
in vec2 v_iconMapUV;
in float v_blur;
in float v_radio;
in vec4 v_color;
in vec4 v_dataset;

out vec4 outputColor;
#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,iS=`#define Animate 0.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in float a_Miter;
layout(location = 11) in float a_Total_Distance;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec2 a_iconMapUV;
layout(location = 15) in float a_Distance;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out float v_radio;
out vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {    
     originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }


  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
// \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      if(u_heightfixed > 0.0) {
        wallHeight *= mapboxZoomScale;
      }
      
    } else {
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        wallHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`;class oS extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0),(0,Kt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:we.gl.NEAREST,min:we.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",heightfixed:w=!1,lineTexture:C=!1,iconStep:I=100,iconStepCount:B=1}=this.layer.getLayerConfig(),{animateOption:V}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var re;(re=this.texture)===null||re===void 0||re.bind()}let Ce=0,Se=[0,0,0,0],ze=[0,0,0,0];o&&f&&(Se=(0,Le.CI)(o),ze=(0,Le.CI)(f),Ce=1);const Rt={u_animate:this.animateOption2Array(V),u_sourceColor:Se,u_targetColor:ze,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:I,u_heightfixed:Number(w),u_linearColor:Ce,u_line_texture:C?1:0,u_textureBlend:m==="normal"?0:1,u_iconStepCount:B,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(Rt)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Mi.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"lineWall",vertexShader:iS,fragmentShader:w1,triangulation:Xd,inject:o.getInject(),depth:{enable:!1},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:we.GC.Attribute,descriptor:{name:"a_Distance",shaderLocation:15,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:(o,f,m)=>[m[3]]}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:we.GC.Attribute,descriptor:{name:"a_Total_Distance",shaderLocation:11,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:(o,f,m)=>[m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:we.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:oa.NORMAL,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:we.GC.Attribute,descriptor:{name:"a_Miter",shaderLocation:10,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:(o,f,m)=>[m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}var IC={arc:mC,arc3d:bC,greatcircle:nS,wall:oS,line:rS,simple:RC,flowline:Yd,earthArc3d:bC};class T1 extends x0{constructor(...o){super(...o),(0,Kt.Z)(this,"type","LineLayer"),(0,Kt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,Kt.Z)(this,"arrowInsertCount",0),(0,Kt.Z)(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new IC[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[o]}getModelType(){var o;if(this.layerType)return this.layerType;const f=this.styleAttributeService.getLayerStyleAttribute("shape");return(f==null||(o=f.scale)===null||o===void 0?void 0:o.field)||"line"}processData(o){if(this.getModelType()!=="simple")return o;const f=[];return o.map(m=>{if(Array.isArray(m.coordinates)&&Array.isArray(m.coordinates[0])&&Array.isArray(m.coordinates[0][0])){const w=(0,$r.Z)({},m);m.coordinates.map(C=>{f.push((0,$r.Z)((0,$r.Z)({},w),{},{coordinates:C}))})}else f.push(m)}),f}}const A1=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,gx=`#define pi 3.1415926535

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {


  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Extrude.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

    // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a =  v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

    if(u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? (1.0 - a_Position.z): a_Position.z;
  }


  gl_Position = project_common_position_to_clipspace_v2(pos);

  setPickingColor(a_PickingColor);
}
`;class yx extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"raiseCount",0),(0,Kt.Z)(this,"raiseRepeat",0)}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},sourceColor:f,targetColor:m,pickLight:w=!1,heightfixed:C=!1,opacityLinear:I={enable:!1,dir:"up"},lightEnable:B=!0}=this.layer.getLayerConfig();let V=0,re=[0,0,0,0],Ce=[0,0,0,0];if(f&&m&&(re=(0,Le.CI)(f),Ce=(0,Le.CI)(m),V=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:Rt=.01}=o;this.raiseCount+=Rt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const Se={u_pickLight:Number(w),u_heightfixed:Number(C),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:V,u_sourceColor:re,u_targetColor:Ce,u_opacitylinear:Number(I.enable),u_opacitylinear_dir:I.dir==="up"?1:0,u_lightEnable:Number(B)};return this.getUniformsBufferInfo(Se)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{depth:f=!0,animateOption:{repeat:m=1}}=o.layer.getLayerConfig();return o.raiseRepeat=m,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:gx,fragmentShader:A1,triangulation:Nl,inject:o.getInject(),cull:{enable:!0,face:(0,Le.fj)(o.mapService.version)},depth:{enable:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:we.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:oa.NORMAL,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:we.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:oa.EXTRUDE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:o=>{const f=(0,Le.SI)(o.coordinates);return[f[0],f[1],0]}}})}}const LC=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,DC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;   
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;  
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }
  
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class aS extends Ta{getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:w=0,raisingHeight:C=0,heightfixed:I=!1,unit:B="pixel"}=this.layer.getLayerConfig();let V=this.getAnimateUniforms().u_time;isNaN(V)&&(V=-1);const re={u_blur_height_fixed:[w,Number(C),Number(I)],u_stroke_width:f,u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_size_unit:s_[B],u_time:V,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(re)}getAnimateUniforms(){const{animateOption:o={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Gm)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.layer.triangulation=Gm,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,inject:o.getInject(),triangulation:Gm,depth:{enable:!1}})]})()}getShaders(){return{frag:LC,vert:DC,type:"pointFill"}}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){const o=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:we.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:oa.EXTRUDE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(f,m,w,C)=>{const I=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],B=C%4*3;return[I[B],I[B+1],I[B+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:f=>{const{size:m=5}=f;return Array.isArray(m)?[m[0]]:[m]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:we.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:oa.SHAPE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:f=>{const{shape:m=2}=f;return[o.indexOf(m)]}}})}}const sS=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,NC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class lS extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0),(0,Kt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=f({data:this.iconService.getCanvas(),mag:we.gl.LINEAR,min:we.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}getUninforms(){if(this.rendererService.getDirty()){var o;(o=this.texture)===null||o===void 0||o.bind()}const f=this.getCommonUniformsInfo(),m=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)({},f.uniformsOption),m.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1}=this.layer.getLayerConfig(),m={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(o),u_heightfixed:Number(f),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointImage",vertexShader:NC,fragmentShader:sS,triangulation:bf,inject:o.getInject(),depth:{enable:!1},primitive:we.gl.POINTS})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:oa.UV,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:w,y:C}=f[m]||{x:-64,y:-64};return[w,C]}}})}}const _x=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,EI=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2., -a_Size /2., 0., 0.);
    gl_Position = project_common_position_to_clipspace(project_pos);
  }

  gl_PointSize = a_Size * u_size_scale *  2.0  * u_DevicePixelRatio;
}
`;function bx(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class uS extends Ta{getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const o={u_size_scale:.5};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.layer.triangulation=bx,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:EI,fragmentShader:_x,triangulation:bx,inject:o.getInject(),depth:{enable:!1},primitive:we.gl.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var l_=D(98333),C1=D(85975);class cS{constructor(o,f,m){(0,Kt.Z)(this,"boxCells",[]),(0,Kt.Z)(this,"xCellCount",void 0),(0,Kt.Z)(this,"yCellCount",void 0),(0,Kt.Z)(this,"boxKeys",void 0),(0,Kt.Z)(this,"bboxes",void 0),(0,Kt.Z)(this,"width",void 0),(0,Kt.Z)(this,"height",void 0),(0,Kt.Z)(this,"xScale",void 0),(0,Kt.Z)(this,"yScale",void 0),(0,Kt.Z)(this,"boxUid",void 0);const w=this.boxCells;this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(f/m);for(let C=0;C<this.xCellCount*this.yCellCount;C++)w.push([]);this.boxKeys=[],this.bboxes=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0}insert(o,f,m,w,C){this.forEachCell(f,m,w,C,this.insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(w),this.bboxes.push(C)}query(o,f,m,w,C){return this.queryHitTest(o,f,m,w,!1,C)}hitTest(o,f,m,w,C){return this.queryHitTest(o,f,m,w,!0,C)}insertBoxCell(o,f,m,w,C,I){this.boxCells[C].push(I)}queryHitTest(o,f,m,w,C,I){if(m<0||o>this.width||w<0||f>this.height)return C?!1:[];const B=[];if(o<=0&&f<=0&&this.width<=m&&this.height<=w){if(C)return!0;for(let re=0;re<this.boxKeys.length;re++)B.push({key:this.boxKeys[re],x1:this.bboxes[re*4],y1:this.bboxes[re*4+1],x2:this.bboxes[re*4+2],y2:this.bboxes[re*4+3]});return I?B.filter(I):B}const V={hitTest:C,seenUids:{box:{},circle:{}}};return this.forEachCell(o,f,m,w,this.queryCell,B,V,I),C?B.length>0:B}queryCell(o,f,m,w,C,I,B,V){const re=B.seenUids,Ce=this.boxCells[C];if(Ce!==null){const Se=this.bboxes;for(const ze of Ce)if(!re.box[ze]){re.box[ze]=!0;const Rt=ze*4;if(o<=Se[Rt+2]&&f<=Se[Rt+3]&&m>=Se[Rt+0]&&w>=Se[Rt+1]&&(!V||V(this.boxKeys[ze]))){if(B.hitTest)return I.push(!0),!0;I.push({key:this.boxKeys[ze],x1:Se[Rt],y1:Se[Rt+1],x2:Se[Rt+2],y2:Se[Rt+3]})}}}return!1}forEachCell(o,f,m,w,C,I,B,V){const re=this.convertToXCellCoord(o),Ce=this.convertToYCellCoord(f),Se=this.convertToXCellCoord(m),ze=this.convertToYCellCoord(w);for(let Rt=re;Rt<=Se;Rt++)for(let Jt=Ce;Jt<=ze;Jt++){const Nn=this.xCellCount*Jt+Rt;if(C.call(this,o,f,m,w,Nn,I,B,V))return}}convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}}var FC=cS;class lc{constructor(o,f){(0,Kt.Z)(this,"width",void 0),(0,Kt.Z)(this,"height",void 0),(0,Kt.Z)(this,"grid",void 0),(0,Kt.Z)(this,"viewportPadding",100),(0,Kt.Z)(this,"screenRightBoundary",void 0),(0,Kt.Z)(this,"screenBottomBoundary",void 0),(0,Kt.Z)(this,"gridRightBoundary",void 0),(0,Kt.Z)(this,"gridBottomBoundary",void 0),this.width=o,this.height=f,this.viewportPadding=Math.max(o,f),this.grid=new FC(o+this.viewportPadding,f+this.viewportPadding,25),this.screenRightBoundary=o+this.viewportPadding,this.screenBottomBoundary=f+this.viewportPadding,this.gridRightBoundary=o+2*this.viewportPadding,this.gridBottomBoundary=f+2*this.viewportPadding}placeCollisionBox(o){const f=o.x1+o.anchorPointX+this.viewportPadding,m=o.y1+o.anchorPointY+this.viewportPadding,w=o.x2+o.anchorPointX+this.viewportPadding,C=o.y2+o.anchorPointY+this.viewportPadding;return!this.isInsideGrid(f,m,w,C)||this.grid.hitTest(f,m,w,C)?{box:[]}:{box:[f,m,w,C]}}insertCollisionBox(o,f){const m={featureIndex:f};this.grid.insert(m,o[0],o[1],o[2],o[3])}project(o,f,m){const w=l_.al(f,m,0,1),C=l_.Ue(),I=C1.fromValues(...o);return l_.fF(C,w,I),{x:(C[0]/C[3]+1)/2*this.width+this.viewportPadding,y:(-C[1]/C[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(o,f,m,w){return m>=0&&o<this.gridRightBoundary&&w>=0&&f<this.gridBottomBoundary}}function Uh(a){let o=.5,f=.5;switch(a){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0;break;default:o=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;break;default:f=.5}return{horizontalAlign:o,verticalAlign:f}}function Vv(a,o,f,m,w){if(!w)return;const C=a[m],I=C.glyph;if(I){const B=o[I].advance*C.scale,V=(a[m].x+B)*w;for(let re=f;re<=m;re++)a[re].x-=V}}function u_(a,o,f,m,w,C,I){const B=(o-f)*w,V=(-m*I+.5)*C;for(const re of a)re.x+=B,re.y+=V}function xx(a,o,f,m,w,C,I){let V=0,re=-8,Ce=0;const Se=a.positionedGlyphs,ze=C==="right"?1:C==="left"?0:.5,Rt=Se.length;f.forEach(Ar=>{if(Ar.split("").forEach(mr=>{const Vr=o[mr],ci=0;Vr&&(Se.push({glyph:mr,x:V,y:re+ci,vertical:!1,scale:1,metrics:Vr}),V+=Vr.advance+I)}),Se.length!==Rt){const mr=V-I;Ce=Math.max(mr,Ce),Vv(Se,o,Rt,Se.length-1,ze)}V=0,re-=m+5});const{horizontalAlign:Jt,verticalAlign:Nn}=Uh(w);u_(Se,ze,Jt,Nn,Ce,m,f.length);const sr=re- -8;a.top+=-Nn*sr,a.bottom=a.top-sr,a.left+=-Jt*Ce,a.right=a.left+Ce}function fS(a,o,f,m,w,C,I){let V=0,re=-8,Ce=0;const Se=a.positionedGlyphs,ze=C==="right"?1:C==="left"?0:.5,Rt=Se.length;f.forEach(Ar=>{const mr=o[Ar],Vr=0;if(mr&&(Se.push({glyph:Ar,x:mr.advance/2,y:re+Vr,vertical:!1,scale:1,metrics:mr}),V+=mr.advance+I),Se.length!==Rt){const ci=V-I;Ce=Math.max(ci,Ce),Vv(Se,o,Rt,Se.length-1,ze)}V=0,re-=m+5});const{horizontalAlign:Jt,verticalAlign:Nn}=Uh(w);u_(Se,ze,Jt,Nn,Ce,m,f.length);const sr=re- -8;a.top+=-Nn*sr,a.bottom=a.top-sr,a.left+=-Jt*Ce,a.right=a.left+Ce}function BC(a,o,f,m,w,C,I=[0,0],B){const V=a.split(`
`),re=[],Ce={positionedGlyphs:re,top:I[1],bottom:I[1],left:I[0],right:I[0],lineCount:V.length,text:a};return B?fS(Ce,o,V,f,m,w,C):xx(Ce,o,V,f,m,w,C),re.length?Ce:!1}function kC(a,o=[0,0],f){const{positionedGlyphs:m=[]}=a,w=[];for(const C of m){const I=C.metrics,B=4,V=I.advance*C.scale/2,re=f?[C.x+V,C.y]:[0,0],Ce=f?[0,0]:[C.x+V+o[0],C.y+o[1]],Se=(0-B)*C.scale-V+Ce[0],ze=(0-B)*C.scale+Ce[1],Rt=Se+I.width*C.scale,Jt=ze+I.height*C.scale,Nn={x:Se,y:ze},sr={x:Rt,y:ze},Ar={x:Se,y:Jt},mr={x:Rt,y:Jt};w.push({tl:Nn,tr:sr,bl:Ar,br:mr,tex:I,glyphOffset:re})}return w}const hS=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,Ex=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in vec2 a_textOffsets;
layout(location = 14) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  
  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:c_}=Le.lodashUtil;function dS(a){const o=this,f=a.id,m=[],w=[];if(!o.glyphInfoMap||!o.glyphInfoMap[f])return{vertices:[],indices:[],size:7};const C=o.glyphInfoMap[f].centroid,I=C.length===2?[C[0],C[1],0]:C;return o.glyphInfoMap[f].glyphQuads.forEach((B,V)=>{m.push(...I,B.tex.x,B.tex.y+B.tex.height,B.tl.x,B.tl.y,...I,B.tex.x+B.tex.width,B.tex.y+B.tex.height,B.tr.x,B.tr.y,...I,B.tex.x+B.tex.width,B.tex.y,B.br.x,B.br.y,...I,B.tex.x,B.tex.y,B.bl.x,B.bl.y),w.push(0+V*4,1+V*4,2+V*4,2+V*4,3+V*4,0+V*4)}),{vertices:m,indices:w,size:7}}class O1 extends Ta{constructor(...o){var f;super(...o),f=this,(0,Kt.Z)(this,"glyphInfo",void 0),(0,Kt.Z)(this,"glyphInfoMap",{}),(0,Kt.Z)(this,"rawEncodeData",void 0),(0,Kt.Z)(this,"texture",void 0),(0,Kt.Z)(this,"currentZoom",-1),(0,Kt.Z)(this,"extent",void 0),(0,Kt.Z)(this,"textureHeight",0),(0,Kt.Z)(this,"textCount",0),(0,Kt.Z)(this,"preTextStyle",{}),(0,Kt.Z)(this,"mapping",(0,Mi.Z)(function*(){f.initGlyph(),f.updateTexture(),yield f.reBuildModel()}))}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)((0,$r.Z)({},o.uniformsOption),f.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:o="#fff",strokeWidth:f=0,halo:m=.5,gamma:w=2,raisingHeight:C=0}=this.layer.getLayerConfig(),I=this.getFontServiceMapping(),B=this.getFontServiceCanvas();I&&Object.keys(I).length!==this.textCount&&B&&(this.updateTexture(),this.textCount=Object.keys(I).length),this.preTextStyle=this.getTextStyle();const V={u_stroke_color:(0,Le.CI)(o),u_sdf_map_size:[(B==null?void 0:B.width)||1,(B==null?void 0:B.height)||1],u_raisingHeight:Number(C),u_stroke_width:f,u_gamma_scale:w,u_halo_blur:m};return this.getUniformsBufferInfo(V)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.bindEvent(),o.extent=o.textExtent(),o.rawEncodeData=o.layer.getEncodedData(),o.preTextStyle=o.getTextStyle(),o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{textAllowOverlap:f=!1}=o.layer.getLayerConfig();return o.initGlyph(),o.updateTexture(),f||o.filterGlyphs(),[yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:Ex,fragmentShader:hS,inject:o.getInject(),triangulation:dS.bind(o),depth:{enable:!1}})]})()}needUpdate(){var o=this;return(0,Mi.Z)(function*(){const{textAllowOverlap:f=!1,textAnchor:m="center",textOffset:w,padding:C,fontFamily:I,fontWeight:B}=o.getTextStyle();if(!c_(C,o.preTextStyle.padding)||!c_(w,o.preTextStyle.textOffset)||!c_(m,o.preTextStyle.textAnchor)||!c_(I,o.preTextStyle.fontFamily)||!c_(B,o.preTextStyle.fontWeight))return yield o.mapping(),!0;if(f)return!1;const V=o.mapService.getZoom(),re=o.mapService.getBounds(),Ce=(0,Le.oO)(o.extent,re);return Math.abs(o.currentZoom-V)>.5||!Ce||f!==o.preTextStyle.textAllowOverlap?(yield o.reBuildModel(),!0):!1})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:we.GC.Attribute,descriptor:{shaderLocation:10,name:"a_textOffsets",buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:(o,f,m)=>[m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:we.GC.Attribute,descriptor:{name:"a_tex",shaderLocation:oa.UV,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=12}=o;return Array.isArray(f)?[f[0]]:[f]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const o=this.mapService.getBounds();return(0,Le.yA)(o,.5)}initTextFont(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,w=[];m.forEach(C=>{let{shape:I=""}=C;I=I.toString();for(const B of I)w.indexOf(B)===-1&&w.push(B)}),this.fontService.setFontOptions({characterSet:w,fontWeight:o,fontFamily:f,iconfont:!1})}initIconFontTex(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,w=[];m.forEach(C=>{let{shape:I=""}=C;I=`${I}`,w.indexOf(I)===-1&&w.push(I)}),this.fontService.setFontOptions({characterSet:w,fontWeight:o,fontFamily:f,iconfont:!0})}getTextStyle(){const{fontWeight:o="400",fontFamily:f="sans-serif",textAllowOverlap:m=!1,padding:w=[0,0],textAnchor:C="center",textOffset:I=[0,0],opacity:B=1,strokeOpacity:V=1,strokeWidth:re=0,stroke:Ce="#000"}=this.layer.getLayerConfig();return{fontWeight:o,fontFamily:f,textAllowOverlap:m,padding:w,textAnchor:C,textOffset:I,opacity:B,strokeOpacity:V,strokeWidth:re,stroke:Ce}}generateGlyphLayout(o){const f=this.getFontServiceMapping(),{spacing:m=2,textAnchor:w="center",textOffset:C}=this.layer.getLayerConfig(),I=this.rawEncodeData;this.glyphInfo=I.map(B=>{const{shape:V="",id:re,size:Ce=1}=B,Se=B.textOffset?B.textOffset:C||[0,0],ze=B.textAnchor?B.textAnchor:w||"center",Rt=BC(V.toString(),f,Ce,ze,"left",m,Se,o),Jt=kC(Rt,Se,!1);return B.shaping=Rt,B.glyphQuads=Jt,B.centroid=(0,Le.SI)(B.coordinates),B.originCentroid=B.version==="GAODE2.x"?(0,Le.SI)(B.originCoordinates):B.originCentroid=B.centroid,this.glyphInfoMap[re]={shaping:Rt,glyphQuads:Jt,centroid:(0,Le.SI)(B.coordinates)},B})}getFontServiceMapping(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${f}_${o}`)}getFontServiceCanvas(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${f}_${o}`)}filterGlyphs(){const{padding:o=[0,0],textAllowOverlap:f=!1}=this.layer.getLayerConfig();if(f)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:m,height:w}=this.rendererService.getViewportSize(),C=new lc(m,w);this.glyphInfo.filter(B=>{const{shaping:V,id:re=0}=B,Ce=B.version==="GAODE2.x"?B.originCentroid:B.centroid,ze=B.size/16,Rt=this.mapService.lngLatToContainer(Ce),{box:Jt}=C.placeCollisionBox({x1:V.left*ze-o[0],x2:V.right*ze+o[0],y1:V.top*ze-o[1],y2:V.bottom*ze+o[1],anchorPointX:Rt.x,anchorPointY:Rt.y});return Jt&&Jt.length?(C.insertCollisionBox(Jt,re),!0):!1}).forEach(B=>{this.glyphInfoMap[B.id]=B})}initGlyph(){const{iconfont:o=!1}=this.layer.getLayerConfig();o?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(o)}updateTexture(){const{createTexture2D:o}=this.rendererService,f=this.getFontServiceCanvas();this.textureHeight=f.height,this.texture&&this.texture.destroy(),this.texture=o({data:f,mag:we.gl.LINEAR,min:we.gl.LINEAR,width:f.width,height:f.height}),this.textures=[this.texture]}reBuildModel(){var o=this;return(0,Mi.Z)(function*(){o.filterGlyphs();const f=yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:Ex,fragmentShader:hS,triangulation:dS.bind(o),inject:o.getInject(),depth:{enable:!1}});o.layer.models=[f]})()}}function zC(a){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,Mi.Z)(function*(a){if(window.createImageBitmap){const o=yield fetch(a);return yield createImageBitmap(yield o.blob())}else{const o=new window.Image;return new Promise(f=>{o.onload=()=>f(o),o.src=a,o.crossOrigin="Anonymous"})}}),Sx.apply(this,arguments)}const Tx=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,Ax=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
float isSide = a_Position.z;
 float topU = a_uvs[0];
 float topV = 1.0 - a_uvs[1];
 float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);

  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


 gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);


  setPickingColor(a_PickingColor);
}
`,UC=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,jC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);
  vec4 project_pos = project_position(pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;
   
  v_texture_data = vec2(a_Position.z, lightWeight);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));



  setPickingColor(a_PickingColor);
}
`,pS=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,VC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {


  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(pos);
  v_texture_data = vec2(a_Position.z,lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`;class M1 extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:o,heightfixed:f=!1,raisingHeight:m=0,topsurface:w=!0,sidesurface:C=!0,sourceColor:I,targetColor:B}=this.layer.getLayerConfig();let V=0,re=[1,1,1,1],Ce=[1,1,1,1];I&&B&&(re=(0,Le.CI)(I),Ce=(0,Le.CI)(B),V=1);const Se={u_sourceColor:re,u_targetColor:Ce,u_linearColor:V,u_topsurface:Number(w),u_sidesurface:Number(C),u_heightfixed:Number(f),u_raisingHeight:Number(m)};return o&&this.texture&&(Se.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(Se)}initModels(){var o=this;return(0,Mi.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,depth:{enable:!0},inject:o.getInject(),triangulation:r_})]})()}getShaders(){const{pickLight:o,mapTexture:f}=this.layer.getLayerConfig();return f?{frag:UC,vert:jC,type:"polygonExtrudeTexture"}:o?{frag:pS,vert:VC,type:"polygonExtrudePickLight"}:{frag:Tx,vert:Ax,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.textures=[]}registerBuiltinAttributes(){const o=this.layer.getSource().extent;let f=o;const m=this.layer.coordCenter||this.layer.getSource().center;let w=f[2]-f[0],C=f[3]-f[1];if(this.mapService.version==="GAODE2.x"){const[I,B]=this.mapService.coordToAMap2RelativeCoordinates([o[0],o[1]],m),[V,re]=this.mapService.coordToAMap2RelativeCoordinates([o[2],o[3]],m);w=V-I,C=re-B,f=[I,B,V,re]}this.styleAttributeService.registerStyleAttribute({name:"uvs",type:we.GC.Attribute,descriptor:{name:"a_uvs",shaderLocation:oa.UV,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(I,B,V)=>{const re=V[0],Ce=V[1];return[(re-f[0])/w,(Ce-f[1])/C,V[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:we.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:oa.NORMAL,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(I,B,V,re,Ce)=>Ce}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:I=>{const{size:B=10}=I;return Array.isArray(B)?[B[0]]:[B]}}})}loadTexture(){var o=this;return(0,Mi.Z)(function*(){const{mapTexture:f}=o.layer.getLayerConfig(),{createTexture2D:m}=o.rendererService;if(o.texture=m({height:1,width:1}),f){const w=yield zC(f);o.texture=m({data:w,width:w.width,height:w.height,wrapS:we.gl.CLAMP_TO_EDGE,wrapT:we.gl.CLAMP_TO_EDGE,min:we.gl.LINEAR,mag:we.gl.LINEAR})}})()}}const Cx=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,vS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos);
   float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Hv extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const o={};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,inject:o.getInject(),triangulation:r_,depth:{enable:!0}})]})()}getShaders(){return{frag:Cx,vert:vS,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:we.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:oa.NORMAL,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=10}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const qg=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,HC=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,WC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 15) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}`,GC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};


out vec4 v_color;


#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

 
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class ZC extends Ta{getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,opacityLinear:f={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),m={u_raisingHeight:Number(o),u_opacitylinear:Number(f.enable),u_dir:f.dir==="in"?1:0};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{frag:f,vert:m,triangulation:w,type:C}=o.getModelParams();return o.initUniformsBuffer(),o.layer.triangulation=w,[yield o.layer.buildLayerModel({moduleName:C,vertexShader:m,fragmentShader:f,inject:o.getInject(),triangulation:w,primitive:we.gl.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){const{opacityLinear:o={enable:!1,dir:"in"}}=this.layer.getLayerConfig();o.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:we.GC.Attribute,descriptor:{name:"a_linear",shaderLocation:oa.LINEAR,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(f,m,w)=>[w[3],w[4],w[5]]}})}getModelParams(){const{opacityLinear:o={enable:!1}}=this.layer.getLayerConfig();return o.enable?{frag:HC,vert:WC,type:"polygonLinear",triangulation:lC}:{frag:qg,vert:GC,type:"polygonFill",triangulation:n_}}}const XC=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,YC=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};


out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`;class mS extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture1",void 0),(0,Kt.Z)(this,"texture2",void 0),(0,Kt.Z)(this,"texture3",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{watercolor:o="#6D99A8",watercolor2:f="#0F121C"}=this.layer.getLayerConfig(),m={u_watercolor:(0,Le.CI)(o),u_watercolor2:(0,Le.CI)(f),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(m)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:YC,fragmentShader:XC,inject:o.getInject(),triangulation:n_,primitive:we.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o,f,m;(o=this.texture1)===null||o===void 0||o.destroy(),(f=this.texture2)===null||f===void 0||f.destroy(),(m=this.texture3)===null||m===void 0||m.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,w,C]=o,I=w-f,B=C-m;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:we.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:oa.UV,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:(V,re,Ce,Se)=>{const ze=V.version==="GAODE2.x"?V.originCoordinates[0][Se]:Ce,[Rt,Jt]=ze;return[(Rt-f)/I,(Jt-m)/B]}}})}loadTexture(){const{createTexture2D:o}=this.rendererService,f={height:0,width:0};this.texture1=o(f),this.texture2=o(f),this.texture3=o(f),m(C=>{this.texture1=w(C[0]),this.texture2=w(C[1]),this.texture3=w(C[2]),this.layerService.reRender()});function m(C){let I=0;const B=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(re=>{const Ce=new Image;Ce.crossOrigin="",Ce.src=re,B.push(Ce),Ce.onload=()=>{I++,I===3&&C(B)}})}function w(C){return o({data:C,width:C.width,height:C.height,wrapS:we.gl.MIRRORED_REPEAT,wrapT:we.gl.MIRRORED_REPEAT,min:we.gl.LINEAR,mag:we.gl.LINEAR})}}}const Ox=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,$C=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 14) in vec2 a_uv;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;


#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`;class qC extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{speed:o=.5}=this.layer.getLayerConfig(),f={u_speed:o,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(f)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:$C,fragmentShader:Ox,triangulation:n_,inject:o.getInject(),primitive:we.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,w,C]=o,I=w-f,B=C-m;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:we.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:oa.UV,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:(V,re,Ce,Se)=>{const ze=V.version==="GAODE2.x"?V.originCoordinates[0][Se]:Ce,[Rt,Jt]=ze;return[(Rt-f)/I,(Jt-m)/B]}}})}loadTexture(){const{waterTexture:o}=this.layer.getLayerConfig(),{createTexture2D:f}=this.rendererService;this.texture=f({height:1,width:1});const m=new Image;m.crossOrigin="",o?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),m.src=o):m.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",m.onload=()=>{this.texture=f({data:m,width:m.width,height:m.height,wrapS:we.gl.MIRRORED_REPEAT,wrapT:we.gl.MIRRORED_REPEAT,min:we.gl.LINEAR,mag:we.gl.LINEAR}),this.layerService.reRender()}}}var Mx={fill:ZC,line:rS,extrude:M1,text:O1,point_fill:aS,point_image:lS,point_normal:uS,point_extrude:yx,water:qC,ocean:mS,extrusion:Hv};class Rx extends x0{constructor(...o){super(...o),(0,Kt.Z)(this,"type","PolygonLayer"),(0,Kt.Z)(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new Mx[f](o),yield o.initLayerModels()})()}getModelType(){var o;const f=this.styleAttributeService.getLayerStyleAttribute("shape"),m=f==null||(o=f.scale)===null||o===void 0?void 0:o.field;return m==="fill"||!m?"fill":m==="extrude"?"extrude":m==="extrusion"?"extrusion":m==="water"?"water":m==="ocean"?"ocean":m==="line"?"line":this.getPointModelType()}getPointModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m}=this.getLayerConfig(),w=this.iconService.getIconMap(),C=o.find(I=>I.hasOwnProperty("shape"));if(C){const I=C.shape;return I==="dot"?"point_normal":(f==null?void 0:f.indexOf(I))!==-1?"point_fill":(m==null?void 0:m.indexOf(I))!==-1?"point_extrude":w.hasOwnProperty(I)?"point_image":"text"}else return"fill"}}class KC{constructor({rendererService:o,layerService:f,parent:m}){(0,Kt.Z)(this,"tileResource",new Map),(0,Kt.Z)(this,"rendererService",void 0),(0,Kt.Z)(this,"layerService",void 0),(0,Kt.Z)(this,"parent",void 0),(0,Kt.Z)(this,"layerTiles",[]),this.rendererService=o,this.layerService=f,this.parent=m}get tiles(){return this.layerTiles}hasTile(o){return this.layerTiles.some(f=>f.key===o)}addTile(o){this.layerTiles.push(o)}getTile(o){return this.layerTiles.find(f=>f.key===o)}getVisibleTileBylngLat(o){return this.layerTiles.find(f=>f.isLoaded&&f.visible&&f.lnglatInBounds(o))}removeTile(o){const f=this.layerTiles.findIndex(w=>w.key===o),m=this.layerTiles.splice(f,1);m[0]&&m[0].destroy()}updateTileVisible(o){const f=this.getTile(o.key);if(o.isVisible)if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(m)}else f==null||f.updateVisible(!0);else if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(!m)}else f==null||f.updateVisible(!1)}isParentLoaded(o){const f=o.parent;if(!f)return!0;const m=this.getTile(f==null?void 0:f.key);return!!(m!=null&&m.isLoaded)}isChildrenLoaded(o){const f=o==null?void 0:o.children;return f.length===0?!0:f.every(m=>{const w=this.getTile(m==null?void 0:m.key);return w?(w==null?void 0:w.isLoaded)===!0:!0})}render(){var o=this;return(0,Mi.Z)(function*(){const m=o.getRenderLayers().map(function(){var w=(0,Mi.Z)(function*(C){yield o.layerService.renderTileLayer(C)});return function(C){return w.apply(this,arguments)}}());yield Promise.all(m)})()}getRenderLayers(){const o=this.layerTiles.filter(m=>m.visible&&m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getLayers(){const o=this.layerTiles.filter(m=>m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(o=>o.destroy()),this.tileResource.clear()}}var QC=D(32676);function JC(a,o,f){f===void 0&&(f={});var m=Ge(a),w=Ge(o),C=QC.union(m.coordinates,w.coordinates);return C.length===0?null:C.length===1?(0,ut.yu)(C[0],f.properties):(0,ut.tw)(C,f.properties)}var eO=JC;class tO{getCombineFeature(o){let f=null;const m=o[0];return o.map(w=>{const C=ut.yu(w.coordinates);f===null?f=C:f=eO(f,C)}),m&&(f.properties=(0,$r.Z)({},m)),f}}const f_="select",h_="active";class nO{constructor({layerService:o,tileLayerService:f,parent:m}){(0,Kt.Z)(this,"layerService",void 0),(0,Kt.Z)(this,"tileLayerService",void 0),(0,Kt.Z)(this,"tileSourceService",void 0),(0,Kt.Z)(this,"parent",void 0),(0,Kt.Z)(this,"tilePickID",new Map),this.layerService=o,this.tileLayerService=f,this.parent=m,this.tileSourceService=new tO}pickRender(o){const f=this.tileLayerService.getVisibleTileBylngLat(o.lngLat);if(f){const m=f.getMainLayer();m==null||m.layerPickService.pickRender(o)}}pick(o,f){var m=this;return(0,Mi.Z)(function*(){const C=m.parent.getContainer().pickingService;if(o.type==="RasterLayer"){const I=m.tileLayerService.getVisibleTileBylngLat(f.lngLat);if(I&&I.getMainLayer()!==void 0){const B=I.getMainLayer();return B.layerPickService.pickRasterLayer(B,f,m.parent)}return!1}return m.pickRender(f),C.pickFromPickingFBO(o,f)})()}selectFeature(o){const[f,m,w]=o,C=this.color2PickId(f,m,w);this.tilePickID.set(f_,C),this.updateHighLight(f,m,w,f_)}highlightPickedFeature(o){const[f,m,w]=o,C=this.color2PickId(f,m,w);this.tilePickID.set(h_,C),this.updateHighLight(f,m,w,h_)}updateHighLight(o,f,m,w){this.tileLayerService.tiles.map(C=>{const I=C.getMainLayer();switch(w){case f_:I==null||I.hooks.beforeSelect.call([o,f,m]);break;case h_:I==null||I.hooks.beforeHighlight.call([o,f,m]);break}})}setPickState(){const o=this.tilePickID.get(f_),f=this.tilePickID.get(h_);if(o){const[m,w,C]=this.pickId2Color(o);this.updateHighLight(m,w,C,f_);return}if(f){const[m,w,C]=this.pickId2Color(f);this.updateHighLight(m,w,C,h_);return}}color2PickId(o,f,m){return(0,Le.W0)(new Uint8Array([o,f,m]))}pickId2Color(o){return(0,Le.Z6)(o)}getFeatureById(o){const f=this.tileLayerService.getTiles().filter(w=>w.visible),m=[];return f.forEach(w=>{m.push(...w.getFeatureById(o))}),m}pickRasterLayer(){return!1}}const rO=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,Px=`
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);
  
  vec2 offset = project_pixel(u_offsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }
  
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function gS(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class iO extends Ta{getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:o,strokeOpacity:f=1,strokeWidth:m=0,stroke:w="#fff"}=this.layer.getLayerConfig(),C={u_stroke_color:(0,Le.CI)(w),u_additive:o==="additive"?1:0,u_stroke_opacity:f,u_stroke_width:m};return this.getUniformsBufferInfo(C)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.layer.triangulation=gS,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:Px,fragmentShader:rO,inject:o.getInject(),triangulation:gS,depth:{enable:!1},primitive:we.gl.POINTS})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const d_=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,oO=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Pos;
layout(location = 13) in vec3 a_Normal;


layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;

    
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,{isNumber:aO}=Le.lodashUtil;class yS extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"raiseCount",0),(0,Kt.Z)(this,"raiseRepeat",0)}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},opacity:f=1,sourceColor:m,targetColor:w,pickLight:C=!1,heightfixed:I=!0,opacityLinear:B={enable:!1,dir:"up"},lightEnable:V=!0}=this.layer.getLayerConfig();let re=0,Ce=[0,0,0,0],Se=[0,0,0,0];if(m&&w&&(Ce=(0,Le.CI)(m),Se=(0,Le.CI)(w),re=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:Jt=.01}=o;this.raiseCount+=Jt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const ze={u_sourceColor:Ce,u_targetColor:Se,u_linearColor:re,u_pickLight:Number(C),u_heightfixed:Number(I),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:aO(f)?f:1,u_opacitylinear:Number(B.enable),u_opacitylinear_dir:B.dir==="up"?1:0,u_lightEnable:Number(V)};return this.getUniformsBufferInfo(ze)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{animateOption:{repeat:f=1}}=o.layer.getLayerConfig();return o.raiseRepeat=f,[yield o.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:oO,fragmentShader:d_,triangulation:Nl,depth:{enable:!0},inject:o.getInject(),cull:{enable:!0,face:(0,Le.fj)(o.mapService.version)},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:we.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:oa.NORMAL,buffer:{usage:we.gl.STATIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:we.GC.Attribute,descriptor:{name:"a_Pos",shaderLocation:15,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:o=>{const f=(0,Le.SI)(o.coordinates);return ud([f[0],f[1]])}}})}}const _S=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,bS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}`;class sO extends Ta{getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:w=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const C={u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_stroke_width:f,u_blur:w};return this.getUniformsBufferInfo(C)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.layer.triangulation=b1,[yield o.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:bS,fragmentShader:_S,triangulation:b1,inject:o.getInject(),depth:{enable:!0},blend:o.getBlend()})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:we.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:oa.EXTRUDE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(o,f,m,w)=>{const[C,I,B]=m,V=nu.al(0,0,1),re=nu.al(C,0,B),Ce=C>=0?nu.EU(V,re):Math.PI*2-nu.EU(V,re),Se=Math.PI*2-Math.asin(I/100),ze=C1.create();C1.rotateY(ze,ze,Ce),C1.rotateX(ze,ze,Se);const Rt=nu.al(1,1,0);nu.fF(Rt,Rt,ze),nu.Fv(Rt,Rt);const Jt=nu.al(-1,1,0);nu.fF(Jt,Jt,ze),nu.Fv(Jt,Jt);const Nn=nu.al(-1,-1,0);nu.fF(Nn,Nn,ze),nu.Fv(Nn,Nn);const sr=nu.al(1,-1,0);nu.fF(sr,sr,ze),nu.Fv(sr,sr);const Ar=[...Rt,...Jt,...Nn,...sr],mr=w%4*3;return[Ar[mr],Ar[mr+1],Ar[mr+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:we.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:oa.SHAPE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{shape:f=2}=o;return[this.layer.getLayerConfig().shape2d.indexOf(f)]}}})}}const xS=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,lO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;


#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  
  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (extrude.xy * (newSize) + offsets);

  offset = rotate_matrix(offset,rotation);

  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class uO extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"meter2coord",1),(0,Kt.Z)(this,"texture",void 0),(0,Kt.Z)(this,"isMeter",!1),(0,Kt.Z)(this,"radian",0),(0,Kt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=f({data:this.iconService.getCanvas(),mag:we.gl.LINEAR,min:we.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1,unit:m="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var w;(w=this.texture)===null||w===void 0||w.bind()}const C={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(f),u_raisingHeight:Number(o),u_size_unit:s_[m]};return this.getUniformsBufferInfo(C)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Gm)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:lO,fragmentShader:xS,triangulation:Gm,depth:{enable:!1},inject:o.getInject(),cull:{enable:!0,face:(0,Le.fj)(o.mapService.version)}})]})()}clearModels(){var o;this.iconService.off("imageUpdate",this.updateTexture),(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:oa.UV,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:w,y:C}=f[m]||{x:-64,y:-64};return[w,C]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:we.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:oa.EXTRUDE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(o,f,m,w)=>{const C=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],I=w%4*3;return[C[I],C[I+1],C[I+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:oa.SIZE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const cO=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,fO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
  offset = project_pixel(offset);
  
  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class Ix extends Ta{getCommonUniformsInfo(){const{blend:o,speed:f=1,unit:m="pixel"}=this.layer.getLayerConfig(),w={u_additive:o==="additive"?1:0,u_size_unit:s_[m],u_speed:f,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(w)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Gm)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:fO,fragmentShader:cO,triangulation:Gm,inject:o.getInject(),depth:{enable:!1}})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:we.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:oa.EXTRUDE,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:3,update:(o,f,m,w)=>{const C=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],I=w%4*3;return[C[I],C[I+1],C[I+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:we.GC.Attribute,descriptor:{shaderLocation:oa.SIZE,name:"a_Size",buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var hO={fillImage:uO,fill:aS,radar:Ix,image:lS,normal:uS,simplePoint:iO,extrude:yx,text:O1,earthFill:sO,earthExtrude:yS};class Lx extends x0{constructor(...o){super(...o),(0,Kt.Z)(this,"type","PointLayer"),(0,Kt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,Kt.Z)(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,Kt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel&&o.layerModel.clearModels(),o.layerModel=new hO[f](o),yield o.initLayerModels()})()}rebuildModels(){var o=this;return(0,Mi.Z)(function*(){yield o.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:o,values:f}=this.shapeOption,{shape2d:m}=this.getLayerConfig(),w=this.iconService.getIconMap();if(o&&(m==null?void 0:m.indexOf(o))!==-1)return"fill";if(f==="text")return"text";if(f&&f instanceof Array){for(const C of f)if(typeof C=="string"&&w.hasOwnProperty(C))return"image"}}return"normal"}getDefaultConfig(){const o=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[o]}getModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m,billboard:w=!0}=this.getLayerConfig(),C=this.iconService.getIconMap(),I=o.find(B=>B.hasOwnProperty("shape"));if(I){const B=I.shape;return B==="dot"?"normal":B==="simple"?"simplePoint":B==="radar"?"radar":this.layerType==="fillImage"||w===!1?"fillImage":(f==null?void 0:f.indexOf(B))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(m==null?void 0:m.indexOf(B))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":C.hasOwnProperty(B)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function T0(a){return a==="PolygonLayer"?Rx:a==="LineLayer"?T1:Lx}function dO(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}class Xm extends vl.EventEmitter{constructor(o,f){super(),(0,Kt.Z)(this,"x",void 0),(0,Kt.Z)(this,"y",void 0),(0,Kt.Z)(this,"z",void 0),(0,Kt.Z)(this,"key",void 0),(0,Kt.Z)(this,"parent",void 0),(0,Kt.Z)(this,"sourceTile",void 0),(0,Kt.Z)(this,"visible",!0),(0,Kt.Z)(this,"layers",[]),(0,Kt.Z)(this,"isLoaded",!1),(0,Kt.Z)(this,"tileMaskLayers",[]),(0,Kt.Z)(this,"tileMask",void 0),this.parent=f,this.sourceTile=o,this.x=o.x,this.y=o.y,this.z=o.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...o){}lnglatInBounds(o){const[f,m,w,C]=this.sourceTile.bounds,{lng:I,lat:B}=o;return I>=f&&I<=w&&B>=m&&B<=C}getLayerOptions(){var o;const f=this.parent.getLayerConfig();return(0,$r.Z)((0,$r.Z)({},f),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:dO(this.parent.type),mask:f.mask||((o=f.maskLayers)===null||o===void 0?void 0:o.length)!==0&&f.enableMask})}getMaskLayer(){const{maskLayers:o}=this.parent.getLayerConfig(),f=[];return o==null||o.forEach(m=>{if(!m.tileLayer)return f.push(m),m;const C=m.tileLayer.getTile(this.sourceTile.key),I=C==null?void 0:C.getLayers()[0];I&&f.push(I)}),f}addTileMask(){var o=this;return(0,Mi.Z)(function*(){const f=new Rx({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[o.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),m=(0,we.e7)(o.parent.container);f.setContainer(m),yield f.init(),o.tileMask=f;const w=o.getMainLayer();return w!==void 0&&(w.tileMask=f),f})()}addMask(o,f){var m=this;return(0,Mi.Z)(function*(){const w=(0,we.e7)(m.parent.container);f.setContainer(w),yield f.init(),o.addMask(f),m.tileMaskLayers.push(f)})()}addLayer(o){var f=this;return(0,Mi.Z)(function*(){o.isTileLayer=!0;const m=(0,we.e7)(f.parent.container);o.setContainer(m),f.layers.push(o),yield o.init()})()}updateVisible(o){this.visible=o,this.updateOptions("visible",o)}updateOptions(o,f){this.layers.forEach(m=>{m.updateLayerConfig({[o]:f})})}getMainLayer(){return this.layers[0]}getFeatures(o){return[]}getFeatureById(o){return[]}destroy(){var o;(o=this.tileMask)===null||o===void 0||o.destroy(),this.layers.forEach(f=>f.destroy())}}class p_ extends Xm{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.getSourceOption(),m=f.data.features[0].properties,w=new T1().source(f.data,f.options).size(1).shape("line").color("red"),C=new Lx({minZoom:o.z-1,maxZoom:o.z+1,textAllowOverlap:!0}).source([m],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(o.key).style({stroke:"#fff",strokeWidth:2});yield o.addLayer(w),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:o.transforms}}}}const ES=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,pO=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
 
}
`;class vO extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0)}getCommonUniformsInfo(){const{opacity:o,brightness:f,contrast:m,saturation:w,gamma:C}=this.layer.getLayerConfig(),I={u_opacity:(0,Le.LS)(o,1),u_brightness:(0,Le.LS)(f,1),u_contrast:(0,Le.LS)(m,1),u_saturation:(0,Le.LS)(w,1),u_gamma:(0,Le.LS)(C,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(I)}initModels(){var o=this;return(0,Mi.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}loadTexture(){var o=this;return(0,Mi.Z)(function*(){const{createTexture2D:f}=o.rendererService;o.texture=f({height:1,width:1});const w=yield o.layer.getSource().data.images;o.texture=f({data:w[0],width:w[0].width,height:w[0].height,mag:we.gl.LINEAR,min:we.gl.LINEAR})})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:pO,fragmentShader:ES,triangulation:lv,primitive:we.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:oa.UV,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var SS={image:vO};class mO extends x0{constructor(...o){super(...o),(0,Kt.Z)(this,"type","ImageLayer")}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new SS[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{image:{}}[o]}getModelType(){return"image"}}class gO extends Xm{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new mO((0,$r.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(I=>{var B,V;const re=I;C[re]((B=f[re])===null||B===void 0?void 0:B.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const wS=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,TS=`layout(location = 0) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`;class AS extends Ta{getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,color:f="#000"}=this.layer.getLayerConfig(),m={u_color:(0,Le.CI)(f),u_opacity:o||1};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"mask",vertexShader:TS,fragmentShader:wS,triangulation:n_,depth:{enable:!1},pick:!1})]})()}clearModels(o=!0){o&&this.layerService.clear()}registerBuiltinAttributes(){return""}}var yO={fill:AS};class dh extends x0{constructor(...o){super(...o),(0,Kt.Z)(this,"type","MaskLayer")}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new yO[f](o),yield o.initLayerModels()})()}getModelType(){return"fill"}}class Dx extends Xm{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new dh((0,$r.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(I=>{var B,V;const re=I;C[re]((B=f[re])===null||B===void 0?void 0:B.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getFeatures(o){return o?this.sourceTile.data.getTileData(o):[]}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f,featureId:m}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}}const _O=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,bO=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`;class CS extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0),(0,Kt.Z)(this,"colorTexture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,clampLow:f=!0,clampHigh:m=!0,noDataValue:w=-9999999,domain:C,rampColors:I}=this.layer.getLayerConfig(),B=C||(0,Le.ZB)(I);this.colorTexture=this.layer.textureService.getColorTexture(I,B);const V={u_domain:B,u_opacity:o||1,u_noDataValue:w,u_clampLow:f?1:0,u_clampHigh:(typeof m!="undefined"?m:f)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(V)}getRasterData(o){return(0,Mi.Z)(function*(){if(Array.isArray(o.data))return{data:o.data,width:o.width,height:o.height};{const{rasterData:f,width:m,height:w}=yield o.data;return{data:Array.from(f),width:m,height:w}}})()}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m,queryVerdorInfo:w}=o.rendererService,C=f.data.dataArray[0],{data:I,width:B,height:V}=yield o.getRasterData(C);return o.texture=m({data:new Float32Array(I),width:B,height:V,format:w()==="WebGL1"?we.gl.LUMINANCE:we.gl.RED,type:we.gl.FLOAT,alignment:1}),[yield o.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:bO,fragmentShader:_O,triangulation:lv,primitive:we.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var o,f;(o=this.texture)===null||o===void 0||o.destroy(),(f=this.colorTexture)===null||f===void 0||f.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{shaderLocation:oa.UV,name:"a_Uv",buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const xO=["data"],EO=["rasterData"],SO=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,wO=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`;class TO extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0),(0,Kt.Z)(this,"dataOption",{})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,$r.Z)((0,$r.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,noDataValue:f=0}=this.layer.getLayerConfig(),{rMinMax:m=[0,255],gMinMax:w=[0,255],bMinMax:C=[0,255]}=this.dataOption,I={u_rminmax:m,u_gminmax:w,u_bminmax:C,u_opacity:o||1,u_noDataValue:f,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(I)}getRasterData(o){var f=this;return(0,Mi.Z)(function*(){if(Array.isArray(o.data)){const{data:I}=o,B=(0,Rc.Z)(o,xO);return f.dataOption=B,(0,$r.Z)({data:I},B)}const m=yield o.data,{rasterData:w}=m,C=(0,Rc.Z)(m,EO);return f.dataOption=C,Array.isArray(w)?(0,$r.Z)({data:w},C):(0,$r.Z)({data:Array.from(w)},C)})()}initModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,w=f.data.dataArray[0],{data:C,width:I,height:B}=yield o.getRasterData(w);return o.texture=m({data:new Float32Array(C),width:I,height:B,format:we.gl.RGB,type:we.gl.FLOAT}),[yield o.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:wO,fragmentShader:SO,triangulation:lv,primitive:we.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:oa.UV,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const AO=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,CO=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
   vec4 u_unpack;
   vec2 u_domain;
   float u_opacity;
   float u_noDataValue;
   float u_clampLow;
   float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`;class OO extends Ta{constructor(...o){super(...o),(0,Kt.Z)(this,"texture",void 0)}getCommonUniformsInfo(){const{opacity:o,clampLow:f=!0,clampHigh:m=!0,noDataValue:w=-9999999,domain:C,rampColors:I,colorTexture:B,rScaler:V=6553.6,gScaler:re=25.6,bScaler:Ce=.1,offset:Se=1e4}=this.layer.getLayerConfig(),ze=C||(0,Le.ZB)(I);let Rt=B;B?this.layer.textureService.setColorTexture(B,I,ze):Rt=this.layer.textureService.getColorTexture(I,ze);const Jt={u_unpack:[V,re,Ce,Se],u_domain:ze,u_opacity:o||1,u_noDataValue:w,u_clampLow:f,u_clampHigh:typeof m!="undefined"?m:f,u_texture:this.texture,u_colorTexture:Rt};return this.textures=[this.texture,Rt],this.getUniformsBufferInfo(Jt)}initModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,w=yield f.data.images;return o.texture=m({data:w[0],width:w[0].width,height:w[0].height,min:we.gl.LINEAR,mag:we.gl.LINEAR}),[yield o.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:CO,fragmentShader:AO,triangulation:lv,primitive:we.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initModels()})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:we.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:oa.UV,buffer:{usage:we.gl.DYNAMIC_DRAW,data:[],type:we.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var MO={raster:CS,rasterRgb:TO,raster3d:CS,rasterTerrainRgb:OO};function RO(a,o){return{type:a.type,field:"value",items:a.positions.map((f,m)=>({[o]:m>=a.colors.length?null:a.colors[m],value:f}))}}class Qg extends x0{constructor(...o){super(...o),(0,Kt.Z)(this,"type","RasterLayer")}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new MO[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[o]}getModelType(){switch(this.layerSource.getParserType()){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(o){if(o!=="color")return{type:void 0,field:void 0,items:[]};const f=this.getLayerConfig().rampColors;return RO(f,o)}}const OS=["rasterData"];class Nx extends Xm{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new Qg((0,$r.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(I=>{var B,V;const re=I;C[re]((B=f[re])===null||B===void 0?void 0:B.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,w=(0,Rc.Z)(f,OS);return{data:m,options:{parser:(0,$r.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},w),transforms:o.transforms}}}}class Fx extends Xm{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new Qg((0,$r.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(I=>{var B,V;const re=I;C[re]((B=f[re])===null||B===void 0?void 0:B.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const Yl=["rasterData"],MS={positions:[0,1],colors:["#000","#fff"]};class RS extends Xm{constructor(...o){super(...o),(0,Kt.Z)(this,"colorTexture",void 0)}initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),{rampColors:C,domain:I}=o.getLayerOptions();o.colorTexture=o.parent.textureService.getColorTexture(C,I);const B=new Qg((0,$r.Z)((0,$r.Z)({},m),{},{colorTexture:o.colorTexture})).source(w.data,w.options);f&&Object.keys(f).forEach(V=>{var re,Ce;const Se=V;B[Se]((re=f[Se])===null||re===void 0?void 0:re.field,(Ce=f[Se])===null||Ce===void 0?void 0:Ce.values)}),yield o.addLayer(B),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,w=(0,Rc.Z)(f,Yl);return{data:m,options:{parser:(0,$r.Z)({type:"raster",extent:this.sourceTile.bounds},w),transforms:o.transforms}}}styleUpdate(...o){const{rampColors:f=MS,domain:m}=o;this.colorTexture=this.parent.textureService.getColorTexture(f,m||(0,Le.ZB)(f)),this.layers.forEach(w=>w.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(o=>o.destroy())}}class Nc extends Xm{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=T0(o.parent.type),C=o.getSourceOption();if(!C){o.isLoaded=!0,o.emit("loaded");return}const I=new w((0,$r.Z)({},m)).source(C.data,C.options);Object.keys(f).forEach(B=>{var V,re;const Ce=B;I[Ce]((V=f[Ce])===null||V===void 0?void 0:V.field,(re=f[Ce])===null||re===void 0?void 0:re.values)}),yield o.addLayer(I),m.tileMask&&(yield o.addTileMask()),o.setLayerMinMaxZoom(I),o.isLoaded=!0,o.emit("loaded")})()}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f="defaultLayer",featureId:m="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}setLayerMinMaxZoom(o){o.getModelType()==="text"&&o.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(o){return this.sourceTile.data.getTileData(o)}getFeatureById(o){const f=this.getMainLayer();return f?f.getSource().data.dataArray.filter(w=>w._id===o):[]}}function PO(a){switch(a.type){case"PolygonLayer":return Nc;case"LineLayer":return Nc;case"PointLayer":return Nc;case"TileDebugLayer":return p_;case"MaskLayer":return Dx;case"RasterLayer":const{dataType:f}=a.getSource().parser;switch(f){case we.n3.RGB:case we.n3.CUSTOMRGB:return Nx;case we.n3.ARRAYBUFFER:case we.n3.CUSTOMARRAYBUFFER:return RS;case we.n3.TERRAINRGB:case we.n3.CUSTOMTERRAINRGB:return Fx;default:return gO}default:return Nc}}const IO=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:LO}=Le.lodashUtil;class Wv{constructor(o){(0,Kt.Z)(this,"parent",void 0),(0,Kt.Z)(this,"tileLayerService",void 0),(0,Kt.Z)(this,"mapService",void 0),(0,Kt.Z)(this,"layerService",void 0),(0,Kt.Z)(this,"rendererService",void 0),(0,Kt.Z)(this,"pickingService",void 0),(0,Kt.Z)(this,"tilePickService",void 0),(0,Kt.Z)(this,"tilesetManager",void 0),(0,Kt.Z)(this,"initedTileset",!1),(0,Kt.Z)(this,"lastViewStates",void 0),(0,Kt.Z)(this,"mapchange",()=>{var m;if(this.parent.isVisible()===!1)return;const{latLonBounds:w,zoom:C}=this.getCurrentView();if(this.mapService.version==="GAODE1.x"){const{visible:I}=this.parent.getLayerConfig();C<2&&I?(this.parent.updateLayerConfig({visible:!1}),this.layerService.reRender()):C>=2&&!I&&(this.parent.updateLayerConfig({visible:!0}),this.layerService.reRender())}this.lastViewStates&&this.lastViewStates.zoom===C&&this.lastViewStates.latLonBounds.toString()===w.toString()||(this.lastViewStates={zoom:C,latLonBounds:w},(m=this.tilesetManager)===null||m===void 0||m.throttleUpdate(C,w))}),(0,Kt.Z)(this,"viewchange",LO(this.mapchange,24)),this.parent=o;const f=this.parent.getContainer();this.rendererService=f.rendererService,this.layerService=f.layerService,this.mapService=f.mapService,this.pickingService=f.pickingService,this.tileLayerService=new KC({rendererService:this.rendererService,layerService:this.layerService,parent:o}),this.tilePickService=new nO({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:o}),this.parent.setLayerPickService(this.tilePickService),this.proxy(o),this.initTileSetManager()}initTileSetManager(){var o;const f=this.parent.getSource();if(this.tilesetManager=f.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:m,zoom:w}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(w,m)}getCurrentView(){const o=this.mapService.getBounds(),f=[o[0][0],o[0][1],o[1][0],o[1][1]],m=this.mapService.getZoom();return{latLonBounds:f,zoom:m}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",o=>{}),this.tilesetManager.on("tile-unload",o=>{this.tileUnLoad(o)}),this.tilesetManager.on("tile-error",(o,f)=>{this.tileError(o)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(o){return this.tileLayerService.getTile(o)}tileLoaded(o){}tileError(o){console.warn("error:",o)}destroy(){var o;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(o=this.tilesetManager)===null||o===void 0||o.destroy(),this.tileLayerService.destroy()}reload(){var o;this.tilesetManager.clear();const{latLonBounds:f,zoom:m}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(m,f)}tileUnLoad(o){this.tileLayerService.removeTile(o.key)}tileUpdate(){var o=this;return(0,Mi.Z)(function*(){if(!o.tilesetManager)return;const f=o.parent.getMinZoom(),m=o.parent.getMaxZoom(),w=o.tilesetManager.tiles.filter(C=>C.isLoaded).filter(C=>C.isVisibleChange).filter(C=>C.data).filter(C=>C.z>=f&&C.z<m);yield Promise.all(w.map(function(){var C=(0,Mi.Z)(function*(I){if(o.tileLayerService.hasTile(I.key))o.tileLayerService.updateTileVisible(I),o.tilePickService.setPickState(),o.layerService.reRender();else{const B=PO(o.parent),V=new B(I,o.parent);yield V.initTileLayer(),o.tilePickService.setPickState(),V.getLayers().length!==0&&(o.tileLayerService.addTile(V),o.tileLayerService.updateTileVisible(I),o.layerService.reRender())}});return function(I){return C.apply(this,arguments)}}())),o.tilesetManager.isLoaded&&o.parent.emit("tiles-loaded",o.tilesetManager.currentTiles)})()}setPickState(o){}pickRender(o){this.tilePickService.pickRender(o)}selectFeature(o){this.tilePickService.selectFeature(o)}highlightPickedFeature(o){this.tilePickService.highlightPickedFeature(o)}proxy(o){IO.forEach(f=>{const m=o[f].bind(o);o[f]=(...w)=>(m(...w),this.getLayers().map(C=>{C[f](...w)}),f==="style"&&this.getTiles().forEach(C=>C.styleUpdate(...w)),o)})}}class AI extends null{constructor(...o){super(...o),_defineProperty(this,"isMoving",!1),_defineProperty(this,"maskLayer",void 0),_defineProperty(this,"move",f=>{switch(f.stopPropagation(),f.type){case"touchcancel":case"touchend":case"mouseup":{var m;this.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(w=>{document.removeEventListener(w,this.move)}),(m=this.scene)===null||m===void 0||m.render();break}case"mousedown":case"touchstart":this.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(w=>{document.addEventListener(w,this.move)});case"mousemove":case"touchmove":{if(this.isMoving)if(this.controlOption.orientation==="vertical"){let w;if("pageX"in f?w=f.pageX:f.touches&&f.touches.length&&f.touches[0].pageX?w=f.touches[0].pageX:f.changedTouches&&f.changedTouches.length&&(w=f.changedTouches[0].pageX),!w)break;const C=this.getContainerDOMRect(),I=this.getContainerSize(),B=I[0],V=(C==null?void 0:C.left)||0,re=w-V+window.scrollX-document.documentElement.clientLeft,Ce=B-Math.min(Math.max(0,B-re),B),Se=Ce/B;this.setOptions({ratio:Se}),this.emit("moving",{size:[Ce,I[1]],ratio:[Se,0]})}else{let w;if("pageY"in f?w=f.pageY:f.touches&&f.touches.length&&f.touches[0].pageY?w=f.touches[0].pageY:f.changedTouches&&f.changedTouches.length&&(w=f.changedTouches[0].pageY),!w)break;const C=this.getContainerDOMRect(),I=this.getContainerSize(),B=I[1],V=(C==null?void 0:C.top)||0,re=w-V+window.scrollY-document.documentElement.clientTop,Ce=B-Math.min(Math.max(0,B-re),B),Se=Ce/B;this.setOptions({ratio:Se}),this.emit("moving",{size:[I[0],Ce],ratio:[0,Se]})}break}default:break}}),_defineProperty(this,"getMaskLayer",()=>(console.log(this.getMaskGeoData()),new PolygonLayer({visible:!1}).source(this.getMaskGeoData()).shape("fill").color("red").style({opacity:.1}))),_defineProperty(this,"updateMask",()=>{var f;if(!this.mapsService)return;const m=this.getMaskGeoData();(f=this.maskLayer)===null||f===void 0||f.setData(m)})}getDefault(){return _objectSpread(_objectSpread({},super.getDefault()),{},{layers:[],rightLayers:[],ratio:.5,orientation:"vertical"})}onAdd(){const o=DOM.create("div","l7-control-swipe");DOM.create("button","l7-control-swipe__button",o);const{orientation:f="vertical",ratio:m=.5}=this.controlOption;return f==="horizontal"?(o.style.top=m*100+"%",o.style.left=""):(o.style.left=m*100+"%",o.style.top=""),o.classList.add(f),o}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd();const{className:f,style:m,layers:w,rightLayers:C}=this.controlOption;f&&this.setClassName(f),m&&this.setStyle(m),this.mapsService.getMarkerContainer().appendChild(this.container),this.maskLayer=this.getMaskLayer(),this.registerEvent();const I=createLayerContainer(o);return this.maskLayer.setContainer(I),this.scene.addLayer(this.maskLayer),this.addMaskToLayers(w,!1),this.addMaskToLayers(C,!0),this.emit("add",this),this}onRemove(){if(this.maskLayer){var o;const{layers:f,rightLayers:m}=this.controlOption;this.removeMaskFromLayers(f),this.removeMaskFromLayers(m),(o=this.layerService)===null||o===void 0||o.remove(this.maskLayer)}this.unRegisterEvent(),this.removeAllListeners()}show(){var o;const f=this.container;DOM.removeClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:w}=this.controlOption;m.forEach(C=>C.enableMask()),w.forEach(C=>C.enableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!0,this.emit("show",this)}hide(){var o;const f=this.container;DOM.addClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:w}=this.controlOption;m.forEach(C=>C.disableMask()),w.forEach(C=>C.disableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!1,this.emit("hide",this)}setOptions(o){const f=_objectSpread(_objectSpread({},this.controlOption),o);if(o.className&&this.setClassName(o.className),o.style&&this.setStyle(o.style),(o.orientation||o.ratio!==void 0)&&this.setOrientationAndRatio(f.orientation,f.ratio),o.layers){const m=o.layers,w=this.controlOption.layers;this.setLayers(m,w,!1)}if(o.rightLayers){const m=o.rightLayers,w=this.controlOption.rightLayers;this.setLayers(m,w,!0)}this.controlOption=f,this.updateMask()}registerEvent(){this.container.addEventListener("mousedown",this.move),this.container.addEventListener("touchstart",this.move),this.mapsService.on("camerachange",this.updateMask)}unRegisterEvent(){var o;this.container.removeEventListener("mousedown",this.move),this.container.removeEventListener("touchstart",this.move),(o=this.mapsService)===null||o===void 0||o.off("camerachange",this.updateMask)}setOrientationAndRatio(o="vertical",f=.5){this.container.classList.remove("horizontal","vertical"),this.container.classList.add(o),o==="horizontal"?(this.container.style.top=f*100+"%",this.container.style.left=""):(this.container.style.left=f*100+"%",this.container.style.top="")}setLayers(o,f,m=!1){const w=o.filter(I=>f.includes(I)===!1),C=f.filter(I=>o.includes(I)===!1);this.addMaskToLayers(w,m),this.removeMaskFromLayers(C)}addMaskToLayers(o,f){o.forEach(m=>{m.updateLayerConfig({maskInside:!f}),m.addMask(this.maskLayer)})}removeMaskFromLayers(o){o.forEach(f=>{f.updateLayerConfig({maskInside:!0}),f.removeMask(this.maskLayer)})}getMaskGeoData(){const{ratio:o=.5,orientation:f="vertical"}=this.controlOption,m=f==="vertical",[w,C]=this.getBounds(),[I,B]=w,[V,re]=C;let Ce;if(m){const ze=I+(V-I)*o;Ce=[[I,re],[ze,re],[ze,B],w,[I,re]]}else{const ze=this.getContainerSize(),Jt=this.mapsService.containerToLngLat([ze[0],ze[1]*o]).lat;Ce=[[I,re],C,[V,Jt],[I,Jt],[I,re]]}return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[Ce]}}]}}getContainerDOMRect(){var o;return(o=this.mapsService.getContainer())===null||o===void 0?void 0:o.getBoundingClientRect()}getContainerSize(){return this.mapsService.getSize()}getBounds(){return this.mapsService.getBounds()}addLayer(o,f=!1){const m=Array.isArray(o)?o:[o];if(f){const w=this.controlOption.rightLayers.concat(...m);this.setOptions({rightLayers:w})}else{const w=this.controlOption.layers.concat(...m);this.setOptions({layers:w})}}removeLayer(o){const f=Array.isArray(o)?o:[o],m=this.controlOption.layers.filter(C=>f.includes(C)),w=this.controlOption.rightLayers.filter(C=>f.includes(C));this.setOptions({layers:m,rightLayers:w})}removeLayers(){this.setOptions({layers:[],rightLayers:[]})}}class CI extends null{constructor(...o){super(...o),_defineProperty(this,"disabled",void 0),_defineProperty(this,"zoomInButton",void 0),_defineProperty(this,"zoomOutButton",void 0),_defineProperty(this,"zoomNumDiv",void 0),_defineProperty(this,"zoomIn",()=>{!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}),_defineProperty(this,"zoomOut",()=>{!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}),_defineProperty(this,"updateDisabled",()=>{const f=this.mapsService;this.zoomInButton.removeAttribute("disabled"),this.zoomOutButton.removeAttribute("disabled"),(this.disabled||f.getZoom()<=f.getMinZoom())&&this.zoomOutButton.setAttribute("disabled","true"),this.controlOption.showZoom&&this.zoomNumDiv&&(this.zoomNumDiv.innerText=String(Math.floor(f.getZoom()))),(this.disabled||f.getZoom()>=f.getMaxZoom())&&this.zoomInButton.setAttribute("disabled","true")})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMRIGHT,name:"zoom",zoomInText:createL7Icon("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:createL7Icon("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}onAdd(){const o=DOM.create("div","l7-control-zoom");return this.resetButtonGroup(o),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),o}onRemove(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}disable(){return this.disabled=!0,this.updateDisabled(),this}enable(){return this.disabled=!1,this.updateDisabled(),this}resetButtonGroup(o){DOM.clearChildren(o),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",o,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",o)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",o,this.zoomOut),this.updateDisabled()}createButton(o,f,m,w,C){const I=DOM.create("button",m,w);return typeof o=="string"?I.innerHTML=o:I.append(o),I.title=f,C&&I.addEventListener("click",C),I}}class DO extends vl.EventEmitter{get lngLat(){var o;return(o=this.popupOption.lngLat)!==null&&o!==void 0?o:{lng:0,lat:0}}set lngLat(o){this.popupOption.lngLat=o}constructor(o){super(),(0,Kt.Z)(this,"popupOption",void 0),(0,Kt.Z)(this,"mapsService",void 0),(0,Kt.Z)(this,"sceneService",void 0),(0,Kt.Z)(this,"layerService",void 0),(0,Kt.Z)(this,"scene",void 0),(0,Kt.Z)(this,"closeButton",void 0),(0,Kt.Z)(this,"container",void 0),(0,Kt.Z)(this,"content",void 0),(0,Kt.Z)(this,"contentTitle",void 0),(0,Kt.Z)(this,"contentPanel",void 0),(0,Kt.Z)(this,"tip",void 0),(0,Kt.Z)(this,"isShow",!0),(0,Kt.Z)(this,"onMouseMove",m=>{var w;const C=this.mapsService.getMapContainer(),{left:I=0,top:B=0}=(w=C==null?void 0:C.getBoundingClientRect())!==null&&w!==void 0?w:{};this.setPopupPosition(m.clientX-I,m.clientY-B)}),(0,Kt.Z)(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:m,lat:w}=this.lngLat,{x:C,y:I}=this.mapsService.lngLatToContainer([m,w]);this.setPopupPosition(C,I)}),(0,Kt.Z)(this,"updateLngLatPositionWhenZoom",m=>{if(!this.mapsService||this.popupOption.followCursor)return;const w=m.map,C=w.getSize();C.x=C.x/2,C.y=C.y/2;const I=m.center,B=m.zoom,V=w.DE(this.lngLat,B,I);V.x=Math.round(V.x),V.y=Math.round(V.y),this.setPopupPosition(V.x,V.y,!0)}),(0,Kt.Z)(this,"onKeyDown",m=>{m.keyCode===27&&this.remove()}),(0,Kt.Z)(this,"onCloseButtonClick",m=>{m.stopPropagation&&m.stopPropagation(),this.hide()}),(0,Kt.Z)(this,"updatePosition",(m,w=!0)=>{const C=!!this.lngLat,{className:I,style:B,maxWidth:V,anchor:re,stopPropagation:Ce}=this.popupOption;if(!this.mapsService||!C||!this.content)return;const Se=this.mapsService.getMarkerContainer();if(!this.container&&Se&&(this.container=Le.SO.create("div",`l7-popup ${I!=null?I:""} ${this.isShow?"":"l7-popup-hide"}`,Se),B&&this.container.setAttribute("style",B),this.tip=Le.SO.create("div","l7-popup-tip",this.container),this.container.appendChild(this.content),Ce&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(ze=>{this.container.addEventListener(ze,Rt=>{Rt.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),w?this.updateLngLatPositionWhenZoom(m):this.updateLngLatPosition(),Le.SO.setTransform(this.container,`${Le.rQ[re]}`),(0,Le.zi)(this.container,re,"popup"),V){const{width:ze}=this.container.getBoundingClientRect();ze>parseFloat(V)&&(this.container.style.width=V)}else this.container.style.removeProperty("width")}),(0,Kt.Z)(this,"updateWhenZoom",m=>{this.updatePosition(m,!0)}),(0,Kt.Z)(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=(0,$r.Z)((0,$r.Z)({},this.getDefault(o!=null?o:{})),o);const{lngLat:f}=this.popupOption;f&&(this.lngLat=f)}getIsShow(){return this.isShow}addTo(o){this.mapsService=o.mapService,this.sceneService=o.sceneService,this.layerService=o.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=o,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:f,text:m,title:w}=this.popupOption;return f?this.setHTML(f):m&&this.setText(m),w&&this.setTitle(w),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Le.SO.remove(this.content),this.container&&(Le.SO.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(o){return this.show(),this.popupOption=(0,$r.Z)((0,$r.Z)({},this.popupOption),o),this.checkUpdateOption(o,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","className","style","lngLat","offsets"])&&(this.container&&(Le.SO.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(o,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(o,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(o,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(o,["html"])&&o.html?this.setHTML(o.html):this.checkUpdateOption(o,["text"])&&o.text&&this.setText(o.text),this.checkUpdateOption(o,["lngLat"])&&o.lngLat&&this.setLnglat(o.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&Le.SO.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&Le.SO.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(o){return this.popupOption.html=o,this.setDOMContent(o)}setText(o){return this.popupOption.text=o,this.setDOMContent(window.document.createTextNode(o))}setTitle(o){this.show(),this.popupOption.title=o,o?(this.contentTitle||(this.contentTitle=Le.SO.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),Le.SO.clearChildren(this.contentTitle),Le.SO.appendElementType(this.contentTitle,o)):this.contentTitle&&(Le.SO.remove(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:o,lat:f}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([o,f]),this}setLngLat(o){return this.setLnglat(o)}setLnglat(o){return this.show(),this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(o){return this.popupOption.maxWidth=o,this.update(),this}isOpen(){return!!this.mapsService}getDefault(o){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:Le.bV.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(o){return this.show(),this.createContent(),Le.SO.appendElementType(this.contentPanel,o),this.update(),this}updateCloseOnClick(o){const f=this.mapsService;f&&(f==null||f.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!o&&requestAnimationFrame(()=>{f==null||f.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(o){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!o&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(o){var f;const m=(f=this.mapsService)===null||f===void 0?void 0:f.getContainer();m&&(m==null||m.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!o&&(m==null||m.addEventListener("mousemove",this.onMouseMove)))}createContent(){if(this.content&&Le.SO.remove(this.content),this.contentTitle=void 0,this.content=Le.SO.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const o=aa("l7-icon-guanbi");Le.SO.addClass(o,"l7-popup-close-button"),this.content.appendChild(o),this.popupOption.closeButtonOffsets&&(o.style.right=this.popupOption.closeButtonOffsets[0]+"px",o.style.top=this.popupOption.closeButtonOffsets[1]+"px"),o.setAttribute("aria-label","Close popup"),o.addEventListener("click",()=>{this.hide()}),o.addEventListener("pointerup",f=>{f.stopPropagation()}),o.addEventListener("pointerdown",f=>{f.stopPropagation()}),this.closeButton=o}else this.closeButton=void 0;this.contentPanel=Le.SO.create("div","l7-popup-content__panel",this.content)}setPopupPosition(o,f,m=!1){if(this.container){const{offsets:w}=this.popupOption;this.container.style.left=o+w[0]+"px",this.container.style.top=f-w[1]+"px",m?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(o,f){return f.some(m=>m in o)}}const{get:Gv}=Le.lodashUtil;class Ga extends null{constructor(...o){super(...o),_defineProperty(this,"layerClickCountByFrame",0),_defineProperty(this,"layerConfigMap",new WeakMap),_defineProperty(this,"displayFeatureInfo",void 0),_defineProperty(this,"onLayerClick",(f,m)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(f,m.featureId))this.hide();else{const{title:w,content:C}=this.getLayerInfoFrag(f,m);this.setDOMContent(C),this.setLnglat(m.lngLat),this.setTitle(w),this.setDisplayFeatureInfo({layer:f,featureId:m.featureId}),this.show()}})}),_defineProperty(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),_defineProperty(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),_defineProperty(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var o;const{config:f,items:m}=this.popupOption;return(o=f!=null?f:m)!==null&&o!==void 0?o:[]}addTo(o){return super.addTo(o),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(o){this.unbindLayerEvent();const f=_objectSpread({},o),m=f.trigger||this.popupOption.trigger,w=f.items||this.popupOption.items,C=(w==null?void 0:w.length)===0;f.followCursor=m==="hover"&&!C;const I=this.isShow;return super.setOptions(f),this.bindLayerEvent(),(C||!I)&&this.hide(),this}getDefault(o){const f=o.trigger==="hover";return _objectSpread(_objectSpread({},super.getDefault(o)),{},{trigger:"hover",followCursor:f,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:o,closeOnClick:f}=this.popupOption;this.layerConfigItems.forEach(m=>{var w;const C=this.getLayerByConfig(m);if(!C)return;const I=_objectSpread({},m);if(o==="hover"){const Ce=this.onLayerMouseMove.bind(this,C),Se=this.onLayerMouseOut.bind(this,C);I.onMouseMove=Ce,I.onMouseOut=Se,C==null||C.on("mousemove",Ce),C==null||C.on("mouseout",Se)}else{var B;const Ce=this.onLayerClick.bind(this,C);I.onClick=Ce,C==null||C.on("click",Ce);const Se=(B=this.mapsService)===null||B===void 0?void 0:B.getMapContainer();Se&&f&&Se.addEventListener("click",this.onSceneClick)}const V=C==null||(w=C.getSource)===null||w===void 0?void 0:w.call(C),re=this.onSourceUpdate.bind(this);V==null||V.on("update",re),I.onSourceUpdate=re,this.layerConfigMap.set(C,I)})}unbindLayerEvent(){this.layerConfigItems.forEach(o=>{var f;const m=this.getLayerByConfig(o),w=m&&this.layerConfigMap.get(m);if(!w)return;const{onMouseMove:C,onMouseOut:I,onClick:B,onSourceUpdate:V}=w;if(C&&m.off("mousemove",C),I&&m.off("mouseout",I),B&&m.off("click",B),V){var re;m==null||(re=m.getSource())===null||re===void 0||re.off("update",V)}const Ce=(f=this.mapsService)===null||f===void 0?void 0:f.getMapContainer();Ce&&Ce.removeEventListener("click",this.onSceneClick)})}onLayerMouseMove(o,f){if(!this.isSameFeature(o,f.featureId)){const{title:m,content:w}=this.getLayerInfoFrag(o,f);this.setDOMContent(w),this.setTitle(m),this.setDisplayFeatureInfo({layer:o,featureId:f.featureId}),this.show()}}onLayerMouseOut(o,f){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(o,f){const m=this.layerConfigMap.get(o);let w;const C=document.createDocumentFragment();if(m){let I=f.feature;I.type==="Feature"&&"properties"in I&&"geometry"in I&&(I=I.properties);const{title:B,fields:V,customContent:re}=m;if(B){w=document.createDocumentFragment();const Ce=B instanceof Function?B(I):B;DOM.appendElementType(w,Ce)}if(re){const Ce=re instanceof Function?re(I):re;DOM.appendElementType(C,Ce)}else V!=null&&V.length&&(V==null||V.forEach(Ce=>{var Se,ze;const{field:Rt,formatField:Jt,formatValue:Nn,getValue:sr}=typeof Ce=="string"?{field:Ce}:Ce,Ar=DOM.create("div","l7-layer-popup__row"),mr=sr?sr(f.feature):Gv(I,Rt),Vr=(Se=Jt instanceof Function?Jt(Rt,I):Jt)!==null&&Se!==void 0?Se:Rt;let ci=(ze=Nn instanceof Function?Nn(mr,I):Nn)!==null&&ze!==void 0?ze:mr;const Io=DOM.create("span","l7-layer-popup__key",Ar);DOM.appendElementType(Io,Vr),DOM.appendElementType(Io,document.createTextNode("\uFF1A"));const to=DOM.create("span","l7-layer-popup__value",Ar);Array.isArray(ci)&&ci.every(Qr=>!(Qr instanceof Object))&&(ci=ci.map(Qr=>String(Qr)).join(",")),DOM.appendElementType(to,ci),C.appendChild(Ar)}))}return{title:w,content:C}}getLayerByConfig(o){const f=o.layer;if(f instanceof Object)return f;if(typeof f=="string")return this.layerService.getLayer(f)||this.layerService.getLayerByName(f)}isSameFeature(o,f){const m=this.displayFeatureInfo;return m&&o===m.layer&&f===m.featureId}setDisplayFeatureInfo(o){const f=this.displayFeatureInfo;f&&f.layer.off("hide",this.onLayerHide),o&&o.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=o}}function PS(a,o){var f=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(f||m)&&(o||(o=document),!!o)){var w=o.head||o.getElementsByTagName("head")[0];if(!w){w=o.createElement("head");var C=o.body||o.getElementsByTagName("body")[0];C?C.parentNode.insertBefore(w,C):o.documentElement.appendChild(w)}var I=o.createElement("style");return I.type="text/css",I.styleSheet?I.styleSheet.cssText=a:I.appendChild(o.createTextNode(a)),w.appendChild(I),I}}PS(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var NO=D(81550),FO=D.n(NO),Ym=class{constructor(a,o){const{buffer:f,offset:m,stride:w,normalized:C,size:I,divisor:B}=o;this.buffer=f,this.attribute={buffer:f.get(),offset:m||0,stride:w||0,normalized:C||!1,divisor:B||0},I&&(this.attribute.size=I)}get(){return this.attribute}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},IS={[we.gl.POINTS]:"points",[we.gl.LINES]:"lines",[we.gl.LINE_LOOP]:"line loop",[we.gl.LINE_STRIP]:"line strip",[we.gl.TRIANGLES]:"triangles",[we.gl.TRIANGLE_FAN]:"triangle fan",[we.gl.TRIANGLE_STRIP]:"triangle strip"},LS={[we.gl.STATIC_DRAW]:"static",[we.gl.DYNAMIC_DRAW]:"dynamic",[we.gl.STREAM_DRAW]:"stream"},Bx={[we.gl.BYTE]:"int8",[we.gl.INT]:"int32",[we.gl.UNSIGNED_BYTE]:"uint8",[we.gl.UNSIGNED_SHORT]:"uint16",[we.gl.UNSIGNED_INT]:"uint32",[we.gl.FLOAT]:"float"},BO={[we.gl.ALPHA]:"alpha",[we.gl.LUMINANCE]:"luminance",[we.gl.LUMINANCE_ALPHA]:"luminance alpha",[we.gl.RGB]:"rgb",[we.gl.RGBA]:"rgba",[we.gl.RGBA4]:"rgba4",[we.gl.RGB5_A1]:"rgb5 a1",[we.gl.RGB565]:"rgb565",[we.gl.DEPTH_COMPONENT]:"depth",[we.gl.DEPTH_STENCIL]:"depth stencil"},kO={[we.gl.DONT_CARE]:"dont care",[we.gl.NICEST]:"nice",[we.gl.FASTEST]:"fast"},DS={[we.gl.NEAREST]:"nearest",[we.gl.LINEAR]:"linear",[we.gl.LINEAR_MIPMAP_LINEAR]:"mipmap",[we.gl.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[we.gl.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[we.gl.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},NS={[we.gl.REPEAT]:"repeat",[we.gl.CLAMP_TO_EDGE]:"clamp",[we.gl.MIRRORED_REPEAT]:"mirror"},zO={[we.gl.NONE]:"none",[we.gl.BROWSER_DEFAULT_WEBGL]:"browser"},UO={[we.gl.NEVER]:"never",[we.gl.ALWAYS]:"always",[we.gl.LESS]:"less",[we.gl.LEQUAL]:"lequal",[we.gl.GREATER]:"greater",[we.gl.GEQUAL]:"gequal",[we.gl.EQUAL]:"equal",[we.gl.NOTEQUAL]:"notequal"},FS={[we.gl.FUNC_ADD]:"add",[we.gl.MIN_EXT]:"min",[we.gl.MAX_EXT]:"max",[we.gl.FUNC_SUBTRACT]:"subtract",[we.gl.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},P1={[we.gl.ZERO]:"zero",[we.gl.ONE]:"one",[we.gl.SRC_COLOR]:"src color",[we.gl.ONE_MINUS_SRC_COLOR]:"one minus src color",[we.gl.SRC_ALPHA]:"src alpha",[we.gl.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[we.gl.DST_COLOR]:"dst color",[we.gl.ONE_MINUS_DST_COLOR]:"one minus dst color",[we.gl.DST_ALPHA]:"dst alpha",[we.gl.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[we.gl.CONSTANT_COLOR]:"constant color",[we.gl.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[we.gl.CONSTANT_ALPHA]:"constant alpha",[we.gl.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[we.gl.SRC_ALPHA_SATURATE]:"src alpha saturate"},jO={[we.gl.NEVER]:"never",[we.gl.ALWAYS]:"always",[we.gl.LESS]:"less",[we.gl.LEQUAL]:"lequal",[we.gl.GREATER]:"greater",[we.gl.GEQUAL]:"gequal",[we.gl.EQUAL]:"equal",[we.gl.NOTEQUAL]:"notequal"},Kr={[we.gl.ZERO]:"zero",[we.gl.KEEP]:"keep",[we.gl.REPLACE]:"replace",[we.gl.INVERT]:"invert",[we.gl.INCR]:"increment",[we.gl.DECR]:"decrement",[we.gl.INCR_WRAP]:"increment wrap",[we.gl.DECR_WRAP]:"decrement wrap"},VO={[we.gl.FRONT]:"front",[we.gl.BACK]:"back"},HO=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:w}=o;this.buffer=a.buffer({data:f,usage:LS[m||we.gl.STATIC_DRAW],type:Bx[w||we.gl.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){this.buffer.subdata(a,o)}},WO=class{constructor(a,o){const{data:f,usage:m,type:w,count:C}=o;this.elements=a.elements({data:f,usage:LS[m||we.gl.STATIC_DRAW],type:Bx[w||we.gl.UNSIGNED_BYTE],count:C})}get(){return this.elements}subData({data:a}){this.elements.subdata(a)}destroy(){}},BS=class{constructor(a,o){const{width:f,height:m,color:w,colors:C}=o,I={width:f,height:m};Array.isArray(C)&&(I.colors=C.map(B=>B.get())),w&&typeof w!="boolean"&&(I.color=w.get()),this.framebuffer=a.framebuffer(I)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:a,height:o}){this.framebuffer.resize(a,o)}},Gp=D(95147),$m=D(25897),kS=D(81957),Oo=D(97582),GO=D(90857),Js=GO,Sn;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN",a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR",a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",a[a.FUNC_ADD=32774]="FUNC_ADD",a[a.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",a[a.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",a[a.BLEND_EQUATION=32777]="BLEND_EQUATION",a[a.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",a[a.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",a[a.BLEND_DST_RGB=32968]="BLEND_DST_RGB",a[a.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",a[a.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",a[a.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",a[a.BLEND_COLOR=32773]="BLEND_COLOR",a[a.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",a[a.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",a[a.LINE_WIDTH=2849]="LINE_WIDTH",a[a.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",a[a.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",a[a.CULL_FACE_MODE=2885]="CULL_FACE_MODE",a[a.FRONT_FACE=2886]="FRONT_FACE",a[a.DEPTH_RANGE=2928]="DEPTH_RANGE",a[a.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",a[a.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",a[a.DEPTH_FUNC=2932]="DEPTH_FUNC",a[a.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",a[a.STENCIL_FUNC=2962]="STENCIL_FUNC",a[a.STENCIL_FAIL=2964]="STENCIL_FAIL",a[a.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",a[a.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",a[a.STENCIL_REF=2967]="STENCIL_REF",a[a.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",a[a.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",a[a.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",a[a.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",a[a.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",a[a.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",a[a.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",a[a.VIEWPORT=2978]="VIEWPORT",a[a.SCISSOR_BOX=3088]="SCISSOR_BOX",a[a.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",a[a.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",a[a.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",a[a.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",a[a.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",a[a.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",a[a.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",a[a.RED_BITS=3410]="RED_BITS",a[a.GREEN_BITS=3411]="GREEN_BITS",a[a.BLUE_BITS=3412]="BLUE_BITS",a[a.ALPHA_BITS=3413]="ALPHA_BITS",a[a.DEPTH_BITS=3414]="DEPTH_BITS",a[a.STENCIL_BITS=3415]="STENCIL_BITS",a[a.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",a[a.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",a[a.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",a[a.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",a[a.SAMPLES=32937]="SAMPLES",a[a.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",a[a.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",a[a.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",a[a.VENDOR=7936]="VENDOR",a[a.RENDERER=7937]="RENDERER",a[a.VERSION=7938]="VERSION",a[a.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",a[a.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",a[a.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.BUFFER_SIZE=34660]="BUFFER_SIZE",a[a.BUFFER_USAGE=34661]="BUFFER_USAGE",a[a.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",a[a.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",a[a.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",a[a.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",a[a.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",a[a.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",a[a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",a[a.CULL_FACE=2884]="CULL_FACE",a[a.FRONT=1028]="FRONT",a[a.BACK=1029]="BACK",a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK",a[a.BLEND=3042]="BLEND",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.DITHER=3024]="DITHER",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.NO_ERROR=0]="NO_ERROR",a[a.INVALID_ENUM=1280]="INVALID_ENUM",a[a.INVALID_VALUE=1281]="INVALID_VALUE",a[a.INVALID_OPERATION=1282]="INVALID_OPERATION",a[a.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",a[a.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",a[a.CW=2304]="CW",a[a.CCW=2305]="CCW",a[a.DONT_CARE=4352]="DONT_CARE",a[a.FASTEST=4353]="FASTEST",a[a.NICEST=4354]="NICEST",a[a.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT",a[a.DOUBLE=5130]="DOUBLE",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",a[a.VERTEX_SHADER=35633]="VERTEX_SHADER",a[a.COMPILE_STATUS=35713]="COMPILE_STATUS",a[a.DELETE_STATUS=35712]="DELETE_STATUS",a[a.LINK_STATUS=35714]="LINK_STATUS",a[a.VALIDATE_STATUS=35715]="VALIDATE_STATUS",a[a.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",a[a.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",a[a.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",a[a.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",a[a.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",a[a.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",a[a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",a[a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",a[a.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",a[a.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",a[a.SHADER_TYPE=35663]="SHADER_TYPE",a[a.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",a[a.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",a[a.NEVER=512]="NEVER",a[a.ALWAYS=519]="ALWAYS",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.GEQUAL=518]="GEQUAL",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.KEEP=7680]="KEEP",a[a.REPLACE=7681]="REPLACE",a[a.INCR=7682]="INCR",a[a.DECR=7683]="DECR",a[a.INVERT=5386]="INVERT",a[a.INCR_WRAP=34055]="INCR_WRAP",a[a.DECR_WRAP=34056]="DECR_WRAP",a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR",a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",a[a.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",a[a.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",a[a.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",a[a.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE=5890]="TEXTURE",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a[a.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",a[a.TEXTURE0=33984]="TEXTURE0",a[a.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",a[a.REPEAT=10497]="REPEAT",a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a[a.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",a[a.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",a[a.FLOAT_VEC2=35664]="FLOAT_VEC2",a[a.FLOAT_VEC3=35665]="FLOAT_VEC3",a[a.FLOAT_VEC4=35666]="FLOAT_VEC4",a[a.INT_VEC2=35667]="INT_VEC2",a[a.INT_VEC3=35668]="INT_VEC3",a[a.INT_VEC4=35669]="INT_VEC4",a[a.BOOL=35670]="BOOL",a[a.BOOL_VEC2=35671]="BOOL_VEC2",a[a.BOOL_VEC3=35672]="BOOL_VEC3",a[a.BOOL_VEC4=35673]="BOOL_VEC4",a[a.FLOAT_MAT2=35674]="FLOAT_MAT2",a[a.FLOAT_MAT3=35675]="FLOAT_MAT3",a[a.FLOAT_MAT4=35676]="FLOAT_MAT4",a[a.SAMPLER_2D=35678]="SAMPLER_2D",a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE",a[a.LOW_FLOAT=36336]="LOW_FLOAT",a[a.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",a[a.HIGH_FLOAT=36338]="HIGH_FLOAT",a[a.LOW_INT=36339]="LOW_INT",a[a.MEDIUM_INT=36340]="MEDIUM_INT",a[a.HIGH_INT=36341]="HIGH_INT",a[a.FRAMEBUFFER=36160]="FRAMEBUFFER",a[a.RENDERBUFFER=36161]="RENDERBUFFER",a[a.RGBA4=32854]="RGBA4",a[a.RGB5_A1=32855]="RGB5_A1",a[a.RGB565=36194]="RGB565",a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",a[a.STENCIL_INDEX=6401]="STENCIL_INDEX",a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a[a.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",a[a.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",a[a.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",a[a.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",a[a.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",a[a.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",a[a.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",a[a.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",a[a.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",a[a.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",a[a.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",a[a.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",a[a.NONE=0]="NONE",a[a.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",a[a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",a[a.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",a[a.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",a[a.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",a[a.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",a[a.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",a[a.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",a[a.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",a[a.READ_BUFFER=3074]="READ_BUFFER",a[a.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",a[a.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",a[a.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",a[a.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",a[a.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",a[a.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",a[a.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",a[a.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",a[a.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",a[a.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",a[a.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",a[a.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",a[a.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",a[a.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",a[a.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",a[a.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",a[a.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",a[a.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",a[a.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",a[a.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",a[a.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",a[a.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",a[a.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",a[a.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",a[a.RED=6403]="RED",a[a.RGB8=32849]="RGB8",a[a.RGBA8=32856]="RGBA8",a[a.RGB10_A2=32857]="RGB10_A2",a[a.TEXTURE_3D=32879]="TEXTURE_3D",a[a.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",a[a.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",a[a.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",a[a.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",a[a.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",a[a.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",a[a.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",a[a.SRGB=35904]="SRGB",a[a.SRGB8=35905]="SRGB8",a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",a[a.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",a[a.RGBA32F=34836]="RGBA32F",a[a.RGB32F=34837]="RGB32F",a[a.RGBA16F=34842]="RGBA16F",a[a.RGB16F=34843]="RGB16F",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F",a[a.RGB9_E5=35901]="RGB9_E5",a[a.RGBA32UI=36208]="RGBA32UI",a[a.RGB32UI=36209]="RGB32UI",a[a.RGBA16UI=36214]="RGBA16UI",a[a.RGB16UI=36215]="RGB16UI",a[a.RGBA8UI=36220]="RGBA8UI",a[a.RGB8UI=36221]="RGB8UI",a[a.RGBA32I=36226]="RGBA32I",a[a.RGB32I=36227]="RGB32I",a[a.RGBA16I=36232]="RGBA16I",a[a.RGB16I=36233]="RGB16I",a[a.RGBA8I=36238]="RGBA8I",a[a.RGB8I=36239]="RGB8I",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.R8=33321]="R8",a[a.RG8=33323]="RG8",a[a.R16F=33325]="R16F",a[a.R32F=33326]="R32F",a[a.RG16F=33327]="RG16F",a[a.RG32F=33328]="RG32F",a[a.R8I=33329]="R8I",a[a.R8UI=33330]="R8UI",a[a.R16I=33331]="R16I",a[a.R16UI=33332]="R16UI",a[a.R32I=33333]="R32I",a[a.R32UI=33334]="R32UI",a[a.RG8I=33335]="RG8I",a[a.RG8UI=33336]="RG8UI",a[a.RG16I=33337]="RG16I",a[a.RG16UI=33338]="RG16UI",a[a.RG32I=33339]="RG32I",a[a.RG32UI=33340]="RG32UI",a[a.R8_SNORM=36756]="R8_SNORM",a[a.RG8_SNORM=36757]="RG8_SNORM",a[a.RGB8_SNORM=36758]="RGB8_SNORM",a[a.RGBA8_SNORM=36759]="RGBA8_SNORM",a[a.RGB10_A2UI=36975]="RGB10_A2UI",a[a.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",a[a.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.HALF_FLOAT=5131]="HALF_FLOAT",a[a.RG=33319]="RG",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",a[a.CURRENT_QUERY=34917]="CURRENT_QUERY",a[a.QUERY_RESULT=34918]="QUERY_RESULT",a[a.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",a[a.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",a[a.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",a[a.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",a[a.DRAW_BUFFER0=34853]="DRAW_BUFFER0",a[a.DRAW_BUFFER1=34854]="DRAW_BUFFER1",a[a.DRAW_BUFFER2=34855]="DRAW_BUFFER2",a[a.DRAW_BUFFER3=34856]="DRAW_BUFFER3",a[a.DRAW_BUFFER4=34857]="DRAW_BUFFER4",a[a.DRAW_BUFFER5=34858]="DRAW_BUFFER5",a[a.DRAW_BUFFER6=34859]="DRAW_BUFFER6",a[a.DRAW_BUFFER7=34860]="DRAW_BUFFER7",a[a.DRAW_BUFFER8=34861]="DRAW_BUFFER8",a[a.DRAW_BUFFER9=34862]="DRAW_BUFFER9",a[a.DRAW_BUFFER10=34863]="DRAW_BUFFER10",a[a.DRAW_BUFFER11=34864]="DRAW_BUFFER11",a[a.DRAW_BUFFER12=34865]="DRAW_BUFFER12",a[a.DRAW_BUFFER13=34866]="DRAW_BUFFER13",a[a.DRAW_BUFFER14=34867]="DRAW_BUFFER14",a[a.DRAW_BUFFER15=34868]="DRAW_BUFFER15",a[a.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",a[a.SAMPLER_3D=35679]="SAMPLER_3D",a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",a[a.MAX_SAMPLES=36183]="MAX_SAMPLES",a[a.SAMPLER_BINDING=35097]="SAMPLER_BINDING",a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",a[a.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",a[a.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",a[a.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",a[a.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",a[a.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",a[a.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",a[a.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",a[a.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",a[a.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",a[a.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",a[a.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",a[a.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",a[a.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",a[a.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",a[a.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",a[a.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",a[a.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",a[a.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",a[a.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",a[a.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",a[a.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",a[a.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",a[a.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",a[a.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",a[a.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",a[a.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",a[a.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",a[a.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",a[a.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",a[a.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",a[a.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",a[a.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",a[a.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",a[a.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",a[a.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",a[a.UNIFORM_TYPE=35383]="UNIFORM_TYPE",a[a.UNIFORM_SIZE=35384]="UNIFORM_SIZE",a[a.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",a[a.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",a[a.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",a[a.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",a[a.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",a[a.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",a[a.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",a[a.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",a[a.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",a[a.OBJECT_TYPE=37138]="OBJECT_TYPE",a[a.SYNC_CONDITION=37139]="SYNC_CONDITION",a[a.SYNC_STATUS=37140]="SYNC_STATUS",a[a.SYNC_FLAGS=37141]="SYNC_FLAGS",a[a.SYNC_FENCE=37142]="SYNC_FENCE",a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",a[a.UNSIGNALED=37144]="UNSIGNALED",a[a.SIGNALED=37145]="SIGNALED",a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",a[a.WAIT_FAILED=37149]="WAIT_FAILED",a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",a[a.COLOR=6144]="COLOR",a[a.DEPTH=6145]="DEPTH",a[a.STENCIL=6146]="STENCIL",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX",a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",a[a.STREAM_READ=35041]="STREAM_READ",a[a.STREAM_COPY=35042]="STREAM_COPY",a[a.STATIC_READ=35045]="STATIC_READ",a[a.STATIC_COPY=35046]="STATIC_COPY",a[a.DYNAMIC_READ=35049]="DYNAMIC_READ",a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY",a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",a[a.INVALID_INDEX=4294967295]="INVALID_INDEX",a[a.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",a[a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",a[a.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",a[a.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",a[a.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",a[a.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",a[a.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",a[a.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",a[a.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",a[a.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",a[a.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",a[a.RGBA32F_EXT=34836]="RGBA32F_EXT",a[a.RGB32F_EXT=34837]="RGB32F_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",a[a.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",a[a.MIN_EXT=32775]="MIN_EXT",a[a.MAX_EXT=32776]="MAX_EXT",a[a.SRGB_EXT=35904]="SRGB_EXT",a[a.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",a[a.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",a[a.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",a[a.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",a[a.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",a[a.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",a[a.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",a[a.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",a[a.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",a[a.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",a[a.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",a[a.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",a[a.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",a[a.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",a[a.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",a[a.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",a[a.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",a[a.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",a[a.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",a[a.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",a[a.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",a[a.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",a[a.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",a[a.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",a[a.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",a[a.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",a[a.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",a[a.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",a[a.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",a[a.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",a[a.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",a[a.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",a[a.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",a[a.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",a[a.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",a[a.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",a[a.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",a[a.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",a[a.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",a[a.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",a[a.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",a[a.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",a[a.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",a[a.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(Sn||(Sn={}));var Fs;(function(a){a[a.Buffer=0]="Buffer",a[a.Texture=1]="Texture",a[a.RenderTarget=2]="RenderTarget",a[a.Sampler=3]="Sampler",a[a.Program=4]="Program",a[a.Bindings=5]="Bindings",a[a.InputLayout=6]="InputLayout",a[a.RenderPipeline=7]="RenderPipeline",a[a.ComputePipeline=8]="ComputePipeline",a[a.Readback=9]="Readback",a[a.QueryPool=10]="QueryPool",a[a.RenderBundle=11]="RenderBundle"})(Fs||(Fs={}));var ts;(function(a){a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS"})(ts||(ts={}));var v_;(function(a){a[a.CCW=2305]="CCW",a[a.CW=2304]="CW"})(v_||(v_={}));var fd;(function(a){a[a.NONE=0]="NONE",a[a.FRONT=1]="FRONT",a[a.BACK=2]="BACK",a[a.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(fd||(fd={}));var ds;(function(a){a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC=768]="SRC",a[a.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",a[a.DST=774]="DST",a[a.ONE_MINUS_DST=775]="ONE_MINUS_DST",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.CONST=32769]="CONST",a[a.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(ds||(ds={}));var Jc;(function(a){a[a.ADD=32774]="ADD",a[a.SUBSTRACT=32778]="SUBSTRACT",a[a.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX"})(Jc||(Jc={}));var Fl;(function(a){a[a.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",a[a.REPEAT=1]="REPEAT",a[a.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(Fl||(Fl={}));var Lu;(function(a){a[a.POINT=0]="POINT",a[a.BILINEAR=1]="BILINEAR"})(Lu||(Lu={}));var Tu;(function(a){a[a.NO_MIP=0]="NO_MIP",a[a.NEAREST=1]="NEAREST",a[a.LINEAR=2]="LINEAR"})(Tu||(Tu={}));var Du;(function(a){a[a.POINTS=0]="POINTS",a[a.TRIANGLES=1]="TRIANGLES",a[a.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",a[a.LINES=3]="LINES",a[a.LINE_STRIP=4]="LINE_STRIP"})(Du||(Du={}));var ul;(function(a){a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(ul||(ul={}));var $l;(function(a){a[a.STATIC=1]="STATIC",a[a.DYNAMIC=2]="DYNAMIC"})($l||($l={}));var A0;(function(a){a[a.VERTEX=1]="VERTEX",a[a.INSTANCE=2]="INSTANCE"})(A0||(A0={}));var I1;(function(a){a.LOADED="loaded"})(I1||(I1={}));var qa;(function(a){a[a.TEXTURE_2D=0]="TEXTURE_2D",a[a.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",a[a.TEXTURE_3D=2]="TEXTURE_3D",a[a.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(qa||(qa={}));var gl;(function(a){a[a.SAMPLED=1]="SAMPLED",a[a.RENDER_TARGET=2]="RENDER_TARGET",a[a.STORAGE=4]="STORAGE"})(gl||(gl={}));var uc;(function(a){a[a.NONE=0]="NONE",a[a.RED=1]="RED",a[a.GREEN=2]="GREEN",a[a.BLUE=4]="BLUE",a[a.ALPHA=8]="ALPHA",a[a.RGB=7]="RGB",a[a.ALL=15]="ALL"})(uc||(uc={}));var gu;(function(a){a[a.KEEP=7680]="KEEP",a[a.ZERO=0]="ZERO",a[a.REPLACE=7681]="REPLACE",a[a.INVERT=5386]="INVERT",a[a.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",a[a.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",a[a.INCREMENT_WRAP=34055]="INCREMENT_WRAP",a[a.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(gu||(gu={}));function Jg(a,o,f,m){var w=qa.TEXTURE_2D,C=1,I=gl.SAMPLED;return{dimension:w,format:a,width:o,height:f,depthOrArrayLayers:C,mipLevelCount:m,usage:I}}var Vs;(function(a){a[a.Float=0]="Float",a[a.UnfilterableFloat=1]="UnfilterableFloat",a[a.Uint=2]="Uint",a[a.Sint=3]="Sint",a[a.Depth=4]="Depth"})(Vs||(Vs={}));var C0;(function(a){a[a.LOWER_LEFT=0]="LOWER_LEFT",a[a.UPPER_LEFT=1]="UPPER_LEFT"})(C0||(C0={}));var ey;(function(a){a[a.NEGATIVE_ONE=0]="NEGATIVE_ONE",a[a.ZERO=1]="ZERO"})(ey||(ey={}));var L1;(function(a){a[a.OcclusionConservative=0]="OcclusionConservative"})(L1||(L1={}));var li;(function(a){a[a.U8=1]="U8",a[a.U16=2]="U16",a[a.U32=3]="U32",a[a.S8=4]="S8",a[a.S16=5]="S16",a[a.S32=6]="S32",a[a.F16=7]="F16",a[a.F32=8]="F32",a[a.BC1=65]="BC1",a[a.BC2=66]="BC2",a[a.BC3=67]="BC3",a[a.BC4_UNORM=68]="BC4_UNORM",a[a.BC4_SNORM=69]="BC4_SNORM",a[a.BC5_UNORM=70]="BC5_UNORM",a[a.BC5_SNORM=71]="BC5_SNORM",a[a.U16_PACKED_5551=97]="U16_PACKED_5551",a[a.U16_PACKED_565=98]="U16_PACKED_565",a[a.D24=129]="D24",a[a.D32F=130]="D32F",a[a.D24S8=131]="D24S8",a[a.D32FS8=132]="D32FS8"})(li||(li={}));var No;(function(a){a[a.R=1]="R",a[a.RG=2]="RG",a[a.RGB=3]="RGB",a[a.RGBA=4]="RGBA",a[a.A=5]="A"})(No||(No={}));function OI(a){return a}var _o;(function(a){a[a.None=0]="None",a[a.Normalized=1]="Normalized",a[a.sRGB=2]="sRGB",a[a.Depth=4]="Depth",a[a.Stencil=8]="Stencil",a[a.RenderTarget=16]="RenderTarget",a[a.Luminance=32]="Luminance"})(_o||(_o={}));function la(a,o,f){return a<<16|o<<8|f}var nr;(function(a){a[a.ALPHA=la(li.U8,No.A,_o.None)]="ALPHA",a[a.U8_LUMINANCE=la(li.U8,No.A,_o.Luminance)]="U8_LUMINANCE",a[a.F16_LUMINANCE=la(li.F16,No.A,_o.Luminance)]="F16_LUMINANCE",a[a.F32_LUMINANCE=la(li.F32,No.A,_o.Luminance)]="F32_LUMINANCE",a[a.F16_R=la(li.F16,No.R,_o.None)]="F16_R",a[a.F16_RG=la(li.F16,No.RG,_o.None)]="F16_RG",a[a.F16_RGB=la(li.F16,No.RGB,_o.None)]="F16_RGB",a[a.F16_RGBA=la(li.F16,No.RGBA,_o.None)]="F16_RGBA",a[a.F32_R=la(li.F32,No.R,_o.None)]="F32_R",a[a.F32_RG=la(li.F32,No.RG,_o.None)]="F32_RG",a[a.F32_RGB=la(li.F32,No.RGB,_o.None)]="F32_RGB",a[a.F32_RGBA=la(li.F32,No.RGBA,_o.None)]="F32_RGBA",a[a.U8_R=la(li.U8,No.R,_o.None)]="U8_R",a[a.U8_R_NORM=la(li.U8,No.R,_o.Normalized)]="U8_R_NORM",a[a.U8_RG=la(li.U8,No.RG,_o.None)]="U8_RG",a[a.U8_RG_NORM=la(li.U8,No.RG,_o.Normalized)]="U8_RG_NORM",a[a.U8_RGB=la(li.U8,No.RGB,_o.None)]="U8_RGB",a[a.U8_RGB_NORM=la(li.U8,No.RGB,_o.Normalized)]="U8_RGB_NORM",a[a.U8_RGB_SRGB=la(li.U8,No.RGB,_o.sRGB|_o.Normalized)]="U8_RGB_SRGB",a[a.U8_RGBA=la(li.U8,No.RGBA,_o.None)]="U8_RGBA",a[a.U8_RGBA_NORM=la(li.U8,No.RGBA,_o.Normalized)]="U8_RGBA_NORM",a[a.U8_RGBA_SRGB=la(li.U8,No.RGBA,_o.sRGB|_o.Normalized)]="U8_RGBA_SRGB",a[a.U16_R=la(li.U16,No.R,_o.None)]="U16_R",a[a.U16_R_NORM=la(li.U16,No.R,_o.Normalized)]="U16_R_NORM",a[a.U16_RG_NORM=la(li.U16,No.RG,_o.Normalized)]="U16_RG_NORM",a[a.U16_RGBA_NORM=la(li.U16,No.RGBA,_o.Normalized)]="U16_RGBA_NORM",a[a.U16_RGBA=la(li.U16,No.RGBA,_o.None)]="U16_RGBA",a[a.U16_RGB=la(li.U16,No.RGB,_o.None)]="U16_RGB",a[a.U16_RG=la(li.U16,No.RG,_o.None)]="U16_RG",a[a.U32_R=la(li.U32,No.R,_o.None)]="U32_R",a[a.U32_RG=la(li.U32,No.RG,_o.None)]="U32_RG",a[a.U32_RGB=la(li.U32,No.RGB,_o.None)]="U32_RGB",a[a.U32_RGBA=la(li.U32,No.RGBA,_o.None)]="U32_RGBA",a[a.S8_R=la(li.S8,No.R,_o.None)]="S8_R",a[a.S8_R_NORM=la(li.S8,No.R,_o.Normalized)]="S8_R_NORM",a[a.S8_RG_NORM=la(li.S8,No.RG,_o.Normalized)]="S8_RG_NORM",a[a.S8_RGB_NORM=la(li.S8,No.RGB,_o.Normalized)]="S8_RGB_NORM",a[a.S8_RGBA_NORM=la(li.S8,No.RGBA,_o.Normalized)]="S8_RGBA_NORM",a[a.S16_R=la(li.S16,No.R,_o.None)]="S16_R",a[a.S16_RG=la(li.S16,No.RG,_o.None)]="S16_RG",a[a.S16_RG_NORM=la(li.S16,No.RG,_o.Normalized)]="S16_RG_NORM",a[a.S16_RGB_NORM=la(li.S16,No.RGB,_o.Normalized)]="S16_RGB_NORM",a[a.S16_RGBA=la(li.S16,No.RGBA,_o.None)]="S16_RGBA",a[a.S16_RGBA_NORM=la(li.S16,No.RGBA,_o.Normalized)]="S16_RGBA_NORM",a[a.S32_R=la(li.S32,No.R,_o.None)]="S32_R",a[a.S32_RG=la(li.S32,No.RG,_o.None)]="S32_RG",a[a.S32_RGB=la(li.S32,No.RGB,_o.None)]="S32_RGB",a[a.S32_RGBA=la(li.S32,No.RGBA,_o.None)]="S32_RGBA",a[a.U16_RGBA_5551=la(li.U16_PACKED_5551,No.RGBA,_o.Normalized)]="U16_RGBA_5551",a[a.U16_RGB_565=la(li.U16_PACKED_565,No.RGB,_o.Normalized)]="U16_RGB_565",a[a.BC1=la(li.BC1,No.RGBA,_o.Normalized)]="BC1",a[a.BC1_SRGB=la(li.BC1,No.RGBA,_o.Normalized|_o.sRGB)]="BC1_SRGB",a[a.BC2=la(li.BC2,No.RGBA,_o.Normalized)]="BC2",a[a.BC2_SRGB=la(li.BC2,No.RGBA,_o.Normalized|_o.sRGB)]="BC2_SRGB",a[a.BC3=la(li.BC3,No.RGBA,_o.Normalized)]="BC3",a[a.BC3_SRGB=la(li.BC3,No.RGBA,_o.Normalized|_o.sRGB)]="BC3_SRGB",a[a.BC4_UNORM=la(li.BC4_UNORM,No.R,_o.Normalized)]="BC4_UNORM",a[a.BC4_SNORM=la(li.BC4_SNORM,No.R,_o.Normalized)]="BC4_SNORM",a[a.BC5_UNORM=la(li.BC5_UNORM,No.RG,_o.Normalized)]="BC5_UNORM",a[a.BC5_SNORM=la(li.BC5_SNORM,No.RG,_o.Normalized)]="BC5_SNORM",a[a.D24=la(li.D24,No.R,_o.Depth)]="D24",a[a.D24_S8=la(li.D24S8,No.RG,_o.Depth|_o.Stencil)]="D24_S8",a[a.D32F=la(li.D32F,No.R,_o.Depth)]="D32F",a[a.D32F_S8=la(li.D32FS8,No.RG,_o.Depth|_o.Stencil)]="D32F_S8",a[a.U8_RGB_RT=la(li.U8,No.RGB,_o.RenderTarget|_o.Normalized)]="U8_RGB_RT",a[a.U8_RGBA_RT=la(li.U8,No.RGBA,_o.RenderTarget|_o.Normalized)]="U8_RGBA_RT",a[a.U8_RGBA_RT_SRGB=la(li.U8,No.RGBA,_o.RenderTarget|_o.Normalized|_o.sRGB)]="U8_RGBA_RT_SRGB"})(nr||(nr={}));function m_(a){return a>>>8&255}function O0(a){return a>>>16&255}function ty(a){return a&255}function D1(a){switch(a){case li.F32:case li.U32:case li.S32:return 4;case li.U16:case li.S16:case li.F16:return 2;case li.U8:case li.S8:return 1;default:throw new Error("whoops")}}function N1(a){return D1(O0(a))}function MI(a){return m_(a)}function ZO(a){var o=D1(O0(a)),f=m_(a);return o*f}function RI(a,o){return a&4294967040|o}function XO(a,o){return a&4294902015|o<<8}function zS(a){var o=ty(a);if(o&_o.Depth)return Vs.Depth;if(o&_o.Normalized)return Vs.Float;var f=O0(a);if(f===li.F16||f===li.F32)return Vs.Float;if(f===li.U8||f===li.U16||f===li.U32)return Vs.Uint;if(f===li.S8||f===li.S16||f===li.S32)return Vs.Sint;throw new Error("whoops")}function Za(a,o){if(o===void 0&&(o=""),!a)throw new Error("Assert fail: ".concat(o))}function qm(a){if(a!=null)return a;throw new Error("Missing object")}function Km(a,o){return a.r===o.r&&a.g===o.g&&a.b===o.b&&a.a===o.a}function US(a,o){a.r=o.r,a.g=o.g,a.b=o.b,a.a=o.a}function YO(a){var o=a.r,f=a.g,m=a.b,w=a.a;return{r:o,g:f,b:m,a:w}}function Zv(a,o,f,m){return m===void 0&&(m=1),{r:a,g:o,b:f,a:m}}var bp=Zv(0,0,0,0),$O=Zv(0,0,0,1),qO=Zv(1,1,1,0),PI=Zv(1,1,1,1),ny=!0;function II(a,o){o===void 0&&(o=ny),o&&(a[10]=-a[10],a[14]=-a[14])}function LI(a,o){o===void 0&&(o=ny),o&&(a[10]=-a[10],a[14]=-a[14]+1)}function jS(a,o){if(o===void 0&&(o=ny),o)switch(a){case ts.LESS:return ts.GREATER;case ts.LEQUAL:return ts.GEQUAL;case ts.GEQUAL:return ts.LEQUAL;case ts.GREATER:return ts.LESS;default:return a}else return a}function VS(a,o){return o===void 0&&(o=ny),o?1-a:a}function HS(a,o){return o===void 0&&(o=ny),o?-a:a}function DI(a,o,f,m){if(m===void 0&&(m=ny),f=jS(f,m),f===ts.LESS)return a<o;if(f===ts.LEQUAL)return a<=o;if(f===ts.GREATER)return a>o;if(f===ts.GEQUAL)return a>=o;throw new Error("whoops")}function ry(a){return!!(a&&!(a&a-1))}function Xv(a,o){return a!=null?a:o}function KO(a){return a===void 0?null:a}function NI(a,o,f){a.length=o,a.fill(f)}function F1(a,o){var f=o-1;return a+f&~f}function FI(a,o){return((a+o-1)/o|0)*o}function QO(a,o,f){for(var m=0,w=a.length;m<w;){var C=m+(w-m>>>1),I=f(o,a[C]);I<0?w=C:m=C+1}return m}function BI(a,o,f){var m=QO(a,o,f);a.splice(m,0,o)}function B1(a,o,f){return f?a|=o:a&=~o,a}function k1(a,o){for(var f=new Array(a),m=0;m<a;m++)f[m]=o();return f}function JO(a,o){o===void 0&&(o=1);var f=a.split(`
`);return f.map(function(m,w){return"".concat(WS(""+(o+w),4," "),"  ").concat(m)}).join(`
`)}function WS(a,o,f){for(f===void 0&&(f="0");a.length<o;)a="".concat(f).concat(a);return a}function e3(a,o){for(var f=[],m=a;m<a+o;m++)f.push(m);return f}function kx(a,o){a.blendDstFactor=o.blendDstFactor,a.blendSrcFactor=o.blendSrcFactor,a.blendMode=o.blendMode}function Qm(a,o){return a===void 0&&(a={}),a.compare=o.compare,a.depthFailOp=o.depthFailOp,a.passOp=o.passOp,a.failOp=o.failOp,a.mask=o.mask,a}function zx(a,o){return a===void 0&&(a={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),kx(a.rgbBlendState,o.rgbBlendState),kx(a.alphaBlendState,o.alphaBlendState),a.channelWriteMask=o.channelWriteMask,a}function Ux(a,o){a.length!==o.length&&(a.length=o.length);for(var f=0;f<o.length;f++)a[f]=zx(a[f],o[f])}function t3(a,o){o.attachmentsState!==void 0&&Ux(a.attachmentsState,o.attachmentsState),a.blendConstant&&o.blendConstant&&US(a.blendConstant,o.blendConstant),a.depthCompare=Xv(o.depthCompare,a.depthCompare),a.depthWrite=Xv(o.depthWrite,a.depthWrite),a.stencilWrite=Xv(o.stencilWrite,a.stencilWrite),a.stencilFront&&o.stencilFront&&Qm(a.stencilFront,o.stencilFront),a.stencilBack&&o.stencilBack&&Qm(a.stencilBack,o.stencilBack),a.cullMode=Xv(o.cullMode,a.cullMode),a.frontFace=Xv(o.frontFace,a.frontFace),a.polygonOffset=Xv(o.polygonOffset,a.polygonOffset)}function Yv(a){var o=Object.assign({},a);return o.attachmentsState=[],Ux(o.attachmentsState,a.attachmentsState),o.blendConstant=o.blendConstant&&YO(o.blendConstant),o.stencilFront=Qm(void 0,a.stencilFront),o.stencilBack=Qm(void 0,a.stencilBack),o}function n3(a,o){o.channelWriteMask!==void 0&&(a.channelWriteMask=o.channelWriteMask),o.rgbBlendMode!==void 0&&(a.rgbBlendState.blendMode=o.rgbBlendMode),o.alphaBlendMode!==void 0&&(a.alphaBlendState.blendMode=o.alphaBlendMode),o.rgbBlendSrcFactor!==void 0&&(a.rgbBlendState.blendSrcFactor=o.rgbBlendSrcFactor),o.alphaBlendSrcFactor!==void 0&&(a.alphaBlendState.blendSrcFactor=o.alphaBlendSrcFactor),o.rgbBlendDstFactor!==void 0&&(a.rgbBlendState.blendDstFactor=o.rgbBlendDstFactor),o.alphaBlendDstFactor!==void 0&&(a.alphaBlendState.blendDstFactor=o.alphaBlendDstFactor)}var g_={blendMode:Jc.ADD,blendSrcFactor:ds.ONE,blendDstFactor:ds.ZERO},M0={attachmentsState:[{channelWriteMask:uc.ALL,rgbBlendState:g_,alphaBlendState:g_}],blendConstant:YO(bp),depthWrite:!0,depthCompare:ts.LEQUAL,stencilWrite:!1,stencilFront:{compare:ts.ALWAYS,passOp:gu.KEEP,depthFailOp:gu.KEEP,failOp:gu.KEEP},stencilBack:{compare:ts.ALWAYS,passOp:gu.KEEP,depthFailOp:gu.KEEP,failOp:gu.KEEP},cullMode:fd.NONE,frontFace:v_.CCW,polygonOffset:!1};function z1(a,o){a===void 0&&(a=null),o===void 0&&(o=M0);var f=Yv(o);return a!==null&&t3(f,a),f}var jx=z1({depthCompare:ts.ALWAYS,depthWrite:!1},M0);function Vx(a,o){return a.attachmentsState===void 0&&(a.attachmentsState=[],Ux(a.attachmentsState,M0.attachmentsState)),n3(a.attachmentsState[0],o),a}var y_={texture:null,sampler:null,formatKind:Vs.Float,dimension:qa.TEXTURE_2D};function Zp(a,o,f){if(a.length!==o.length)return!1;for(var m=0;m<a.length;m++)if(!f(a[m],o[m]))return!1;return!0}function cv(a,o){for(var f=Array(a.length),m=0;m<a.length;m++)f[m]=o(a[m]);return f}function U1(a,o){return a.texture===o.texture&&a.binding===o.binding}function __(a,o){return a.buffer===o.buffer&&a.size===o.size&&a.binding===o.binding&&a.offset===o.offset}function b_(a,o){return a===null?o===null:o===null?!1:a.sampler===o.sampler&&a.texture===o.texture&&a.dimension===o.dimension&&a.formatKind===o.formatKind&&a.comparison===o.comparison}function Hx(a,o){return a.samplerBindings=a.samplerBindings||[],a.uniformBufferBindings=a.uniformBufferBindings||[],a.storageBufferBindings=a.storageBufferBindings||[],a.storageTextureBindings=a.storageTextureBindings||[],o.samplerBindings=o.samplerBindings||[],o.uniformBufferBindings=o.uniformBufferBindings||[],o.storageBufferBindings=o.storageBufferBindings||[],o.storageTextureBindings=o.storageTextureBindings||[],!(a.samplerBindings.length!==o.samplerBindings.length||!Zp(a.samplerBindings,o.samplerBindings,b_)||!Zp(a.uniformBufferBindings,o.uniformBufferBindings,__)||!Zp(a.storageBufferBindings,o.storageBufferBindings,__)||!Zp(a.storageTextureBindings,o.storageTextureBindings,U1))}function Wx(a,o){return a.blendMode==o.blendMode&&a.blendSrcFactor===o.blendSrcFactor&&a.blendDstFactor===o.blendDstFactor}function j1(a,o){return!(!Wx(a.rgbBlendState,o.rgbBlendState)||!Wx(a.alphaBlendState,o.alphaBlendState)||a.channelWriteMask!==o.channelWriteMask)}function jh(a,o){return a.compare==o.compare&&a.depthFailOp===o.depthFailOp&&a.failOp===o.failOp&&a.passOp===o.passOp&&a.mask===o.mask}function xp(a,o){return!Zp(a.attachmentsState,o.attachmentsState,j1)||a.blendConstant&&o.blendConstant&&!Km(a.blendConstant,o.blendConstant)||a.stencilFront&&o.stencilFront&&!jh(a.stencilFront,o.stencilFront)||a.stencilBack&&o.stencilBack&&!jh(a.stencilBack,o.stencilBack)?!1:a.depthCompare===o.depthCompare&&a.depthWrite===o.depthWrite&&a.stencilWrite===o.stencilWrite&&a.cullMode===o.cullMode&&a.frontFace===o.frontFace&&a.polygonOffset===o.polygonOffset}function $d(a,o){return a.id===o.id}function GS(a,o){return a===o}function r3(a,o){return!(a.topology!==o.topology||a.inputLayout!==o.inputLayout||a.sampleCount!==o.sampleCount||a.megaStateDescriptor&&o.megaStateDescriptor&&!xp(a.megaStateDescriptor,o.megaStateDescriptor)||!$d(a.program,o.program)||!Zp(a.colorAttachmentFormats,o.colorAttachmentFormats,GS)||a.depthStencilAttachmentFormat!==o.depthStencilAttachmentFormat)}function i3(a,o){return a.offset===o.offset&&a.shaderLocation===o.shaderLocation&&a.format===o.format&&a.divisor===o.divisor}function o3(a,o){return(0,Gp.Z)(a)?(0,Gp.Z)(o):(0,Gp.Z)(o)?!1:a.arrayStride===o.arrayStride&&a.stepMode===o.stepMode&&Zp(a.attributes,o.attributes,i3)}function a3(a,o){return!(a.indexBufferFormat!==o.indexBufferFormat||!Zp(a.vertexBufferDescriptors,o.vertexBufferDescriptors,o3)||!$d(a.program,o.program))}function kI(a,o){return a.addressModeU===o.addressModeU&&a.addressModeV===o.addressModeV&&a.minFilter===o.minFilter&&a.magFilter===o.magFilter&&a.mipmapFilter===o.mipmapFilter&&a.lodMinClamp===o.lodMinClamp&&a.lodMaxClamp===o.lodMaxClamp&&a.maxAnisotropy===o.maxAnisotropy&&a.compareFunction===o.compareFunction}function ZS(a){var o=a.sampler,f=a.texture,m=a.dimension,w=a.formatKind,C=a.comparison;return{sampler:o,texture:f,dimension:m,formatKind:w,comparison:C}}function Gx(a){var o=a.buffer,f=a.size,m=a.binding,w=a.offset;return{binding:m,buffer:o,offset:w,size:f}}function V1(a){var o=a.binding,f=a.texture;return{binding:o,texture:f}}function s3(a){var o=a.samplerBindings&&cv(a.samplerBindings,ZS),f=a.uniformBufferBindings&&cv(a.uniformBufferBindings,Gx),m=a.storageBufferBindings&&cv(a.storageBufferBindings,Gx),w=a.storageTextureBindings&&cv(a.storageTextureBindings,V1);return{samplerBindings:o,uniformBufferBindings:f,storageBufferBindings:m,storageTextureBindings:w,pipeline:a.pipeline}}function l3(a){var o=a.inputLayout,f=a.program,m=a.topology,w=a.megaStateDescriptor&&Yv(a.megaStateDescriptor),C=a.colorAttachmentFormats.slice(),I=a.depthStencilAttachmentFormat,B=a.sampleCount;return{inputLayout:o,megaStateDescriptor:w,program:f,topology:m,colorAttachmentFormats:C,depthStencilAttachmentFormat:I,sampleCount:B}}function u3(a){var o=a.shaderLocation,f=a.format,m=a.offset,w=a.divisor;return{shaderLocation:o,format:f,offset:m,divisor:w}}function Zx(a){if((0,Gp.Z)(a))return a;var o=a.arrayStride,f=a.stepMode,m=cv(a.attributes,u3);return{arrayStride:o,stepMode:f,attributes:m}}function c3(a){var o=cv(a.vertexBufferDescriptors,Zx),f=a.indexBufferFormat,m=a.program;return{vertexBufferDescriptors:o,indexBufferFormat:f,program:m}}var _s,XS=/([^[]*)(\[[0-9]+\])?/;function Xx(a){if(a[a.length-1]!=="]")return{name:a,length:1,isArray:!1};var o=a.match(XS);if(!o||o.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(a));return{name:o[1],length:Number(o[2])||1,isArray:!!o[2]}}function kf(){var a=null;return function(o,f,m){var w=a!==m;return w&&(o.uniform1i(f,m),a=m),w}}function Au(a,o,f,m){var w=null,C=null;return function(I,B,V){var re=o(V,f),Ce=re.length,Se=!1;if(w===null)w=new Float32Array(Ce),C=Ce,Se=!0;else{Za(C===Ce,"Uniform length cannot change.");for(var ze=0;ze<Ce;++ze)if(re[ze]!==w[ze]){Se=!0;break}}return Se&&(m(I,a,B,re),w.set(re)),Se}}function ph(a,o,f,m){a[o](f,m)}function fv(a,o,f,m){a[o](f,!1,m)}var f3={},h3={},p3={},YS=[0];function Yx(a,o,f,m){o===1&&typeof a=="boolean"&&(a=a?1:0),Number.isFinite(a)&&(YS[0]=a,a=YS);var w=a.length;if(a instanceof f)return a;var C=m[w];C||(C=new f(w),m[w]=C);for(var I=0;I<w;I++)C[I]=a[I];return C}function qd(a,o){return Yx(a,o,Float32Array,f3)}function hv(a,o){return Yx(a,o,Int32Array,h3)}function H1(a,o){return Yx(a,o,Uint32Array,p3)}var v3=(_s={},_s[Sn.FLOAT]=Au.bind(null,"uniform1fv",qd,1,ph),_s[Sn.FLOAT_VEC2]=Au.bind(null,"uniform2fv",qd,2,ph),_s[Sn.FLOAT_VEC3]=Au.bind(null,"uniform3fv",qd,3,ph),_s[Sn.FLOAT_VEC4]=Au.bind(null,"uniform4fv",qd,4,ph),_s[Sn.INT]=Au.bind(null,"uniform1iv",hv,1,ph),_s[Sn.INT_VEC2]=Au.bind(null,"uniform2iv",hv,2,ph),_s[Sn.INT_VEC3]=Au.bind(null,"uniform3iv",hv,3,ph),_s[Sn.INT_VEC4]=Au.bind(null,"uniform4iv",hv,4,ph),_s[Sn.BOOL]=Au.bind(null,"uniform1iv",hv,1,ph),_s[Sn.BOOL_VEC2]=Au.bind(null,"uniform2iv",hv,2,ph),_s[Sn.BOOL_VEC3]=Au.bind(null,"uniform3iv",hv,3,ph),_s[Sn.BOOL_VEC4]=Au.bind(null,"uniform4iv",hv,4,ph),_s[Sn.FLOAT_MAT2]=Au.bind(null,"uniformMatrix2fv",qd,4,fv),_s[Sn.FLOAT_MAT3]=Au.bind(null,"uniformMatrix3fv",qd,9,fv),_s[Sn.FLOAT_MAT4]=Au.bind(null,"uniformMatrix4fv",qd,16,fv),_s[Sn.UNSIGNED_INT]=Au.bind(null,"uniform1uiv",H1,1,ph),_s[Sn.UNSIGNED_INT_VEC2]=Au.bind(null,"uniform2uiv",H1,2,ph),_s[Sn.UNSIGNED_INT_VEC3]=Au.bind(null,"uniform3uiv",H1,3,ph),_s[Sn.UNSIGNED_INT_VEC4]=Au.bind(null,"uniform4uiv",H1,4,ph),_s[Sn.FLOAT_MAT2x3]=Au.bind(null,"uniformMatrix2x3fv",qd,6,fv),_s[Sn.FLOAT_MAT2x4]=Au.bind(null,"uniformMatrix2x4fv",qd,8,fv),_s[Sn.FLOAT_MAT3x2]=Au.bind(null,"uniformMatrix3x2fv",qd,6,fv),_s[Sn.FLOAT_MAT3x4]=Au.bind(null,"uniformMatrix3x4fv",qd,12,fv),_s[Sn.FLOAT_MAT4x2]=Au.bind(null,"uniformMatrix4x2fv",qd,8,fv),_s[Sn.FLOAT_MAT4x3]=Au.bind(null,"uniformMatrix4x3fv",qd,12,fv),_s[Sn.SAMPLER_2D]=kf,_s[Sn.SAMPLER_CUBE]=kf,_s[Sn.SAMPLER_3D]=kf,_s[Sn.SAMPLER_2D_SHADOW]=kf,_s[Sn.SAMPLER_2D_ARRAY]=kf,_s[Sn.SAMPLER_2D_ARRAY_SHADOW]=kf,_s[Sn.SAMPLER_CUBE_SHADOW]=kf,_s[Sn.INT_SAMPLER_2D]=kf,_s[Sn.INT_SAMPLER_3D]=kf,_s[Sn.INT_SAMPLER_CUBE]=kf,_s[Sn.INT_SAMPLER_2D_ARRAY]=kf,_s[Sn.UNSIGNED_INT_SAMPLER_2D]=kf,_s[Sn.UNSIGNED_INT_SAMPLER_3D]=kf,_s[Sn.UNSIGNED_INT_SAMPLER_CUBE]=kf,_s[Sn.UNSIGNED_INT_SAMPLER_2D_ARRAY]=kf,_s);function $x(a,o,f){var m=v3[f.type];if(!m)throw new Error("Unknown GLSL uniform type ".concat(f.type));return m().bind(null,a,o)}var m3={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function $S(a){return Object.prototype.toString.call(a)in m3}function x_(a,o){return"#define ".concat(a," ").concat(o)}function g3(a){var o={};return a.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(f,m,w){var C=Number(w);return o[m]=isNaN(C)?w:C,""}),o}function qS(a,o){var f=[];return a.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(m,w,C){var I=Number(w);return f.push({location:isNaN(I)?o[w]:I,name:C}),""}),f}function zI(a){var o=[],f=[];return a.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(m,w,C){var I=[];return C.trim().replace(`\r
`,`
`).split(`
`).forEach(function(B){var V=__read(B.trim().split(/\s+/),2),re=V[0],Ce=V[1];I.push({type:re.trim(),name:Ce.replace(";","").trim()})}),f.push({type:w.trim(),uniforms:I}),""}),a.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(m,w){return w.trim().replace(`\r
`,`
`).split(`
`).forEach(function(C){var I=C.trim().split(" "),B=I[0]||"",V=I[1]||"",re=V.indexOf("[")>-1;if(V=V.replace(";","").replace("[","").trim(),!B.startsWith("#")){if(B){var Ce=f.find(function(Rt){return B===Rt.type});if(Ce)if(re)for(var Se=function(Rt){Ce.uniforms.forEach(function(Jt){o.push("".concat(V,"[").concat(Rt,"].").concat(Jt.name))})},ze=0;ze<5;ze++)Se(ze);else Ce.uniforms.forEach(function(Rt){o.push("".concat(V,".").concat(Rt.name))})}V&&o.push(V)}}),""}),o}function KS(a){if(a===void 0)return null;var o=/binding\s*=\s*(\d+)/.exec(a);if(o!==null){var f=parseInt(o[1],10);if(!Number.isNaN(f))return f}return null}function QS(a){var o="",f=a;return[f,o]}function $v(a,o,f,m,w){var C;m===void 0&&(m=null),w===void 0&&(w=!0);var I=a.glslVersion==="#version 100",B=o==="frag"&&((C=f.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||C===void 0?void 0:C.length)>1,V=f.replace(`\r
`,`
`).split(`
`).map(function(to){return to.replace(/[/][/].*$/,"")}).filter(function(to){var Qr=!to||/^\s+$/.test(to);return!Qr}),re="";m!==null&&(re=Object.keys(m).map(function(to){return x_(to,m[to])}).join(`
`));var Ce=V.find(function(to){return to.startsWith("precision")})||"precision mediump float;",Se=w?V.filter(function(to){return!to.startsWith("precision")}).join(`
`):V.join(`
`),ze="";if(a.viewportOrigin===C0.UPPER_LEFT&&(ze+="".concat(x_("VIEWPORT_ORIGIN_TL","1"),`
`)),a.clipSpaceNearZ===ey.ZERO&&(ze+="".concat(x_("CLIPSPACE_NEAR_ZERO","1"),`
`)),a.explicitBindingLocations){var Rt=0,Jt=0,Nn=0;Se=Se.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(to,Qr,no,ja){var Eo=no?"".concat(no,", "):"";return"layout(".concat(Eo,"set = ").concat(Rt,", binding = ").concat(Jt++,") uniform ").concat(ja)}),Rt++,Jt=0,Za(a.separateSamplerTextures),Se=Se.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(to,Qr,no,ja,Eo){var ra=KS(no);ra===null&&(ra=Jt++);var Ia=(0,Oo.CR)(QS(ja),2),Bs=Ia[0],dd=Ia[1];return o==="frag"?`
layout(set = `.concat(Rt,", binding = ").concat(ra*2+0,") uniform texture").concat(Bs," T_").concat(Eo,`;
layout(set = `).concat(Rt,", binding = ").concat(ra*2+1,") uniform sampler").concat(dd," S_").concat(Eo,";").trim():""}),Se=Se.replace(o==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(to,Qr){return"layout(location = ".concat(Nn++,") ").concat(Qr)}),ze+="".concat(x_("gl_VertexID","gl_VertexIndex"),`
`),ze+="".concat(x_("gl_InstanceID","gl_InstanceIndex"),`
`),Ce=Ce.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var sr=0;Se=Se.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(to,Qr,no,ja,Eo){var ra=KS(no);return ra===null&&(ra=sr++),"uniform sampler".concat(ja," ").concat(Eo,"; // BINDING=").concat(ra)})}if(Se=Se.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(to,Qr,no){return"SAMPLER_".concat(Qr,"(P_").concat(no,")")}),Se=Se.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(to,Qr,no){return"PP_SAMPLER_".concat(Qr,"(P_").concat(no,")")}),Se=Se.replace(/\bPU_TEXTURE\((.*?)\)/g,function(to,Qr){return"TEXTURE(P_".concat(Qr,")")}),a.separateSamplerTextures)Se=Se.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(to,Qr,no){var ja=(0,Oo.CR)(QS(Qr),2),Eo=ja[0],ra=ja[1];return"texture".concat(Eo," T_P_").concat(no,", sampler").concat(ra," S_P_").concat(no)}),Se=Se.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(to,Qr,no){return"T_".concat(no,", S_").concat(no)}),Se=Se.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(to,Qr,no){return"sampler".concat(Qr,"(T_").concat(no,", S_").concat(no,")")}),Se=Se.replace(/\bTEXTURE\((.*?)\)/g,function(to,Qr){return"T_".concat(Qr)});else{var Ar=[];Se=Se.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(to,Qr,no){return"sampler".concat(Qr," P_").concat(no)}),Se=Se.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(to,Qr,no){return no}),Se=Se.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(to,Qr,no){return Ar.push([no,Qr]),no}),I&&Ar.forEach(function(to){var Qr=(0,Oo.CR)(to,2),no=Qr[0],ja=Qr[1];Se=Se.replace(new RegExp("texture\\(".concat(no),"g"),function(){return"texture".concat(ja,"(").concat(no)})}),Se=Se.replace(/\bTEXTURE\((.*?)\)/g,function(to,Qr){return Qr})}var mr="".concat(I?"":a.glslVersion,`
`).concat(I&&B?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(I&&o==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(w?Ce:"",`
`).concat(ze||"").concat(re?re+`
`:"",`
`).concat(Se,`
`).trim();if(a.explicitBindingLocations&&o==="frag"&&(mr=mr.replace(/^\b(out)\b/g,function(to,Qr){return"layout(location = 0) ".concat(Qr)})),I){if(o==="frag"&&(mr=mr.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(to,Qr,no){return"varying ".concat(Qr," ").concat(no,`;
`)})),o==="vert"&&(mr=mr.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(to,Qr,no){return"varying ".concat(Qr," ").concat(no,`;
`)}),mr=mr.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(to,Qr,no){return"attribute ".concat(Qr," ").concat(no,`;
`)})),mr=mr.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(to,Qr){return Qr.trim().replace(/^.*$/gm,function(no){var ja=no.trim();return ja.startsWith("#")?ja:no?"uniform ".concat(ja):""})}),o==="frag")if(B){var Vr=[];mr=mr.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(to,Qr){return Vr.push(Qr),"vec4 ".concat(Qr,`;
`)});var ci=mr.lastIndexOf("}");mr=mr.substring(0,ci)+`
    `.concat(Vr.map(function(to,Qr){return"gl_FragData[".concat(Qr,"] = ").concat(to,`;
    `)}).join(`
`))+mr.substring(ci)}else{var Io;if(mr=mr.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(to,Qr,no){return Io=no,"".concat(Qr," ").concat(no,`;
`)}),Io){var ci=mr.lastIndexOf("}");mr=mr.substring(0,ci)+`
  gl_FragColor = vec4(`.concat(Io,`);
`)+mr.substring(ci)}}mr=mr.replace(/^\s*layout\((.*)\)/gm,"")}return mr}function UI(a,o,f,m){m===void 0&&(m=null);var w=$v(a,"vert",o,m),C=$v(a,"frag",f,m);return{vert:o,frag:f,preprocessedVert:w,preprocessedFrag:C}}var Ep=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this)||this;return C.id=m,C.device=w,C.device.resourceCreationTracker!==null&&C.device.resourceCreationTracker.trackResourceCreated(C),C}return o.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},o}(Js),JS=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;I.type=Fs.Bindings;var B=C.uniformBufferBindings,V=C.samplerBindings;return I.uniformBufferBindings=B||[],I.samplerBindings=V||[],I.bindingLayouts=I.createBindingLayouts(),I}return o.prototype.createBindingLayouts=function(){var f=0,m=0,w=[],C=this.uniformBufferBindings.length,I=this.samplerBindings.length;return w.push({firstUniformBuffer:f,numUniformBuffers:C,firstSampler:m,numSamplers:I}),f+=C,m+=I,{numUniformBuffers:f,numSamplers:m,bindingLayoutTables:w}},o}(Ep);function Zo(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}function qx(a){var o=O0(a);switch(o){case li.BC1:case li.BC2:case li.BC3:case li.BC4_UNORM:case li.BC4_SNORM:case li.BC5_UNORM:case li.BC5_SNORM:return!0;default:return!1}}function W1(a){var o=ty(a);if(o&_o.Normalized)return!1;var f=O0(a);return f===li.S8||f===li.S16||f===li.S32||f===li.U8||f===li.U16||f===li.U32}function dv(a){switch(a){case $l.STATIC:return Sn.STATIC_DRAW;case $l.DYNAMIC:return Sn.DYNAMIC_DRAW}}function G1(a){if(a&ul.INDEX)return Sn.ELEMENT_ARRAY_BUFFER;if(a&ul.VERTEX)return Sn.ARRAY_BUFFER;if(a&ul.UNIFORM)return Sn.UNIFORM_BUFFER}function E_(a){switch(a){case Du.TRIANGLES:return Sn.TRIANGLES;case Du.POINTS:return Sn.POINTS;case Du.TRIANGLE_STRIP:return Sn.TRIANGLE_STRIP;case Du.LINES:return Sn.LINES;case Du.LINE_STRIP:return Sn.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function ew(a){switch(a){case li.U8:return Sn.UNSIGNED_BYTE;case li.U16:return Sn.UNSIGNED_SHORT;case li.U32:return Sn.UNSIGNED_INT;case li.S8:return Sn.BYTE;case li.S16:return Sn.SHORT;case li.S32:return Sn.INT;case li.F16:return Sn.HALF_FLOAT;case li.F32:return Sn.FLOAT;default:throw new Error("whoops")}}function Kx(a){switch(a){case No.R:return 1;case No.RG:return 2;case No.RGB:return 3;case No.RGBA:return 4;default:return 1}}function tw(a){var o=O0(a),f=m_(a),m=ty(a),w=ew(o),C=Kx(f),I=!!(m&_o.Normalized);return{size:C,type:w,normalized:I}}function jI(a){switch(a){case nr.U8_R:return Sn.UNSIGNED_BYTE;case nr.U16_R:return Sn.UNSIGNED_SHORT;case nr.U32_R:return Sn.UNSIGNED_INT;default:throw new Error("whoops")}}function iy(a){switch(a){case Fl.CLAMP_TO_EDGE:return Sn.CLAMP_TO_EDGE;case Fl.REPEAT:return Sn.REPEAT;case Fl.MIRRORED_REPEAT:return Sn.MIRRORED_REPEAT;default:throw new Error("whoops")}}function S_(a,o){if(o===Tu.LINEAR&&a===Lu.BILINEAR)return Sn.LINEAR_MIPMAP_LINEAR;if(o===Tu.LINEAR&&a===Lu.POINT)return Sn.NEAREST_MIPMAP_LINEAR;if(o===Tu.NEAREST&&a===Lu.BILINEAR)return Sn.LINEAR_MIPMAP_NEAREST;if(o===Tu.NEAREST&&a===Lu.POINT)return Sn.NEAREST_MIPMAP_NEAREST;if(o===Tu.NO_MIP&&a===Lu.BILINEAR)return Sn.LINEAR;if(o===Tu.NO_MIP&&a===Lu.POINT)return Sn.NEAREST;throw new Error("Unknown texture filter mode")}function oy(a,o){o===void 0&&(o=0);var f=a;return f.gl_buffer_pages[o/f.pageByteSize|0]}function ay(a){var o=a;return o.gl_texture}function Qx(a){var o=a;return o.gl_sampler}function w_(a,o){a.name=o,a.__SPECTOR_Metadata={name:o}}function nw(a,o){for(var f=[];;){var m=o.exec(a);if(!m)break;f.push(m)}return f}function qv(a){return a.blendMode==Jc.ADD&&a.blendSrcFactor==ds.ONE&&a.blendDstFactor===ds.ZERO}function y3(a){switch(a){case L1.OcclusionConservative:return Sn.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function _3(a){if(a===qa.TEXTURE_2D)return Sn.TEXTURE_2D;if(a===qa.TEXTURE_2D_ARRAY)return Sn.TEXTURE_2D_ARRAY;if(a===qa.TEXTURE_CUBE_MAP)return Sn.TEXTURE_CUBE_MAP;if(a===qa.TEXTURE_3D)return Sn.TEXTURE_3D;throw new Error("whoops")}function Jx(a,o,f,m){return!(a%f!==0||o%m!==0)}var b3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;I.type=Fs.Buffer;var B=C.viewOrSize,V=C.usage,re=C.hint,Ce=re===void 0?$l.STATIC:re,Se=w.uniformBufferMaxPageByteSize,ze=w.gl,Rt=V&ul.UNIFORM;Rt||(Zo(ze)?ze.bindVertexArray(null):w.OES_vertex_array_object.bindVertexArrayOES(null));var Jt=(0,$m.Z)(B)?F1(B,4):F1(B.byteLength,4);I.gl_buffer_pages=[];var Nn;if(Rt){for(var sr=Jt;sr>0;)I.gl_buffer_pages.push(I.createBufferPage(Math.min(sr,Se),V,Ce)),sr-=Se;Nn=Se}else I.gl_buffer_pages.push(I.createBufferPage(Jt,V,Ce)),Nn=Jt;return I.pageByteSize=Nn,I.byteSize=Jt,I.usage=V,I.gl_target=G1(V),(0,$m.Z)(B)||I.setSubData(0,new Uint8Array(B.buffer)),Rt||(Zo(ze)?ze.bindVertexArray(I.device.currentBoundVAO):w.OES_vertex_array_object.bindVertexArrayOES(I.device.currentBoundVAO)),I}return o.prototype.setSubData=function(f,m,w,C){w===void 0&&(w=0),C===void 0&&(C=m.byteLength-w);for(var I=this.device.gl,B=this.pageByteSize,V=f+C,re=f,Ce=f%B;re<V;){var Se=Zo(I)?I.COPY_WRITE_BUFFER:this.gl_target,ze=oy(this,re);if(ze.ubo)return;I.bindBuffer(Se,ze),Zo(I)?I.bufferSubData(Se,Ce,m,w,Math.min(V-re,B)):I.bufferSubData(Se,Ce,m),re+=B,Ce=0,w+=B,this.device.debugGroupStatisticsBufferUpload()}},o.prototype.destroy=function(){a.prototype.destroy.call(this);for(var f=0;f<this.gl_buffer_pages.length;f++)this.gl_buffer_pages[f].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[f]);this.gl_buffer_pages=[]},o.prototype.createBufferPage=function(f,m,w){var C=this.device.gl,I=m&ul.UNIFORM;if(!Zo(C)&&I)return{ubo:!0};var B=this.device.ensureResourceExists(C.createBuffer()),V=G1(m),re=dv(w);return C.bindBuffer(V,B),C.bufferData(V,f,re),B},o}(Ep),x3=function(a){(0,Oo.ZT)(o,a);function o(f){var m,w,C,I,B=f.id,V=f.device,re=f.descriptor,Ce,Se=a.call(this,{id:B,device:V})||this;Se.type=Fs.InputLayout;var ze=re.vertexBufferDescriptors,Rt=re.indexBufferFormat,Jt=re.program;Za(Rt===nr.U16_R||Rt===nr.U32_R||Rt===null);var Nn=Rt!==null?jI(Rt):null,sr=Rt!==null?N1(Rt):null,Ar=Se.device.gl,mr=Se.device.ensureResourceExists(Zo(Ar)?Ar.createVertexArray():V.OES_vertex_array_object.createVertexArrayOES());Zo(Ar)?Ar.bindVertexArray(mr):V.OES_vertex_array_object.bindVertexArrayOES(mr),Ar.bindBuffer(Ar.ARRAY_BUFFER,oy(Se.device.fallbackVertexBuffer));try{for(var Vr=(0,Oo.XA)(re.vertexBufferDescriptors),ci=Vr.next();!ci.done;ci=Vr.next()){var Io=ci.value,to=Io.stepMode,Qr=Io.attributes;try{for(var no=(C=void 0,(0,Oo.XA)(Qr)),ja=no.next();!ja.done;ja=no.next()){var Eo=ja.value,ra=Eo.shaderLocation,Ia=Eo.format,Bs=Eo.divisor,dd=Bs===void 0?1:Bs,Kd=Zo(Ar)?ra:(Ce=Jt.attributes[ra])===null||Ce===void 0?void 0:Ce.location,ms=tw(Ia);if(Eo.vertexFormat=ms,!(0,Gp.Z)(Kd)){W1(Ia);var wc=ms.size,vh=ms.type,qf=ms.normalized;Ar.vertexAttribPointer(Kd,wc,vh,qf,0,0),to===A0.INSTANCE&&(Zo(Ar)?Ar.vertexAttribDivisor(Kd,dd):V.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(Kd,dd)),Ar.enableVertexAttribArray(Kd)}}}catch(sg){C={error:sg}}finally{try{ja&&!ja.done&&(I=no.return)&&I.call(no)}finally{if(C)throw C.error}}}}catch(sg){m={error:sg}}finally{try{ci&&!ci.done&&(w=Vr.return)&&w.call(Vr)}finally{if(m)throw m.error}}return Zo(Ar)?Ar.bindVertexArray(null):V.OES_vertex_array_object.bindVertexArrayOES(null),Se.vertexBufferDescriptors=ze,Se.vao=mr,Se.indexBufferFormat=Rt,Se.indexBufferType=Nn,Se.indexBufferCompByteSize=sr,Se.program=Jt,Se}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(Zo(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},o}(Ep),e2=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=f.fake,B=a.call(this,{id:m,device:w})||this;B.type=Fs.Texture,C=(0,Oo.pi)({dimension:qa.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},C);var V=B.device.gl,re,Ce,Se=B.clampmipLevelCount(C);if(B.immutable=C.usage===gl.RENDER_TARGET,B.pixelStore=C.pixelStore,B.format=C.format,B.dimension=C.dimension,B.formatKind=zS(C.format),B.width=C.width,B.height=C.height,B.depthOrArrayLayers=C.depthOrArrayLayers,B.mipmaps=Se>=1,!I){Ce=B.device.ensureResourceExists(V.createTexture());var ze=B.device.translateTextureType(C.format),Rt=B.device.translateTextureInternalFormat(C.format);if(B.device.setActiveTexture(V.TEXTURE0),B.device.currentTextures[0]=null,B.preprocessImage(),C.dimension===qa.TEXTURE_2D){if(re=Sn.TEXTURE_2D,V.bindTexture(re,Ce),B.immutable)if(Zo(V))V.texStorage2D(re,Se,Rt,C.width,C.height);else{var Jt=(Rt===Sn.DEPTH_COMPONENT||B.isNPOT(),0);(B.format===nr.D32F||B.format===nr.D24_S8)&&!Zo(V)&&!w.WEBGL_depth_texture||(V.texImage2D(re,Jt,Rt,C.width,C.height,0,Rt,ze,null),B.mipmaps&&(B.mipmaps=!1,V.texParameteri(Sn.TEXTURE_2D,Sn.TEXTURE_MIN_FILTER,Sn.LINEAR),V.texParameteri(Sn.TEXTURE_2D,Sn.TEXTURE_WRAP_S,Sn.CLAMP_TO_EDGE),V.texParameteri(Sn.TEXTURE_2D,Sn.TEXTURE_WRAP_T,Sn.CLAMP_TO_EDGE)))}Za(C.depthOrArrayLayers===1)}else if(C.dimension===qa.TEXTURE_2D_ARRAY)re=Sn.TEXTURE_2D_ARRAY,V.bindTexture(re,Ce),B.immutable&&Zo(V)&&V.texStorage3D(re,Se,Rt,C.width,C.height,C.depthOrArrayLayers);else if(C.dimension===qa.TEXTURE_3D)re=Sn.TEXTURE_3D,V.bindTexture(re,Ce),B.immutable&&Zo(V)&&V.texStorage3D(re,Se,Rt,C.width,C.height,C.depthOrArrayLayers);else if(C.dimension===qa.TEXTURE_CUBE_MAP)re=Sn.TEXTURE_CUBE_MAP,V.bindTexture(re,Ce),B.immutable&&Zo(V)&&V.texStorage2D(re,Se,Rt,C.width,C.height),Za(C.depthOrArrayLayers===6);else throw new Error("whoops")}return B.gl_texture=Ce,B.gl_target=re,B.mipLevelCount=Se,B}return o.prototype.setImageData=function(f,m){m===void 0&&(m=0);var w=this.device.gl;qx(this.format);var C=this.gl_target===Sn.TEXTURE_3D||this.gl_target===Sn.TEXTURE_2D_ARRAY,I=this.gl_target===Sn.TEXTURE_CUBE_MAP,B=$S(f[0]);this.device.setActiveTexture(w.TEXTURE0),this.device.currentTextures[0]=null;var V=f[0],re,Ce;B?(re=this.width,Ce=this.height):(re=V.width,Ce=V.height,this.width=re,this.height=Ce),w.bindTexture(this.gl_target,this.gl_texture);var Se=this.device.translateTextureFormat(this.format),ze=Zo(w)?this.device.translateInternalTextureFormat(this.format):Se,Rt=this.device.translateTextureType(this.format);this.preprocessImage();for(var Jt=0;Jt<this.depthOrArrayLayers;Jt++){var Nn=f[Jt],sr=this.gl_target;I&&(sr=Sn.TEXTURE_CUBE_MAP_POSITIVE_X+Jt%6),this.immutable?w.texSubImage2D(sr,m,0,0,re,Ce,Se,Rt,Nn):Zo(w)?C?w.texImage3D(sr,m,ze,re,Ce,this.depthOrArrayLayers,0,Se,Rt,Nn):w.texImage2D(sr,m,ze,re,Ce,0,Se,Rt,Nn):B?w.texImage2D(sr,m,Se,re,Ce,0,Se,Rt,Nn):w.texImage2D(sr,m,Se,Se,Rt,Nn)}this.mipmaps&&this.generateMipmap(C)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteTexture(ay(this))},o.prototype.clampmipLevelCount=function(f){if(f.dimension===qa.TEXTURE_2D_ARRAY&&f.depthOrArrayLayers>1){var m=O0(f.format);if(m===li.BC1)for(var w=f.width,C=f.height,I=0;I<f.mipLevelCount;I++){if(w<=2||C<=2)return I-1;w=Math.max(w/2|0,1),C=Math.max(C/2|0,1)}}return f.mipLevelCount},o.prototype.preprocessImage=function(){var f=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&f.pixelStorei(Sn.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&f.pixelStorei(Sn.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&f.pixelStorei(Sn.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},o.prototype.generateMipmap=function(f){f===void 0&&(f=!1);var m=this.device.gl;return!Zo(m)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(m.bindTexture(this.gl_target,this.gl_texture),f?(m.texParameteri(this.gl_target,Sn.TEXTURE_BASE_LEVEL,0),m.texParameteri(this.gl_target,Sn.TEXTURE_MAX_LEVEL,Math.log2(this.width)),m.texParameteri(this.gl_target,Sn.TEXTURE_MIN_FILTER,Sn.LINEAR_MIPMAP_LINEAR),m.texParameteri(this.gl_target,Sn.TEXTURE_MAG_FILTER,Sn.LINEAR)):m.texParameteri(Sn.TEXTURE_2D,Sn.TEXTURE_MIN_FILTER,Sn.NEAREST_MIPMAP_LINEAR),m.generateMipmap(this.gl_target),m.bindTexture(this.gl_target,null)),this)},o.prototype.isNPOT=function(){var f=this.device.gl;return Zo(f)?!1:!ry(this.width)||!ry(this.height)},o}(Ep),E3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;I.type=Fs.RenderTarget,I.gl_renderbuffer=null,I.texture=null;var B=I.device.gl,V=C.format,re=C.width,Ce=C.height,Se=C.sampleCount,ze=Se===void 0?1:Se,Rt=C.texture,Jt=!1;if((V===nr.D32F||V===nr.D24_S8)&&Rt&&!Zo(B)&&!w.WEBGL_depth_texture&&(Rt.destroy(),I.texture=null,Jt=!0),!Jt&&Rt)I.texture=Rt;else{I.gl_renderbuffer=I.device.ensureResourceExists(B.createRenderbuffer()),B.bindRenderbuffer(B.RENDERBUFFER,I.gl_renderbuffer);var Nn=I.device.translateTextureInternalFormat(V,!0);Zo(B)&&ze>1?B.renderbufferStorageMultisample(Sn.RENDERBUFFER,ze,Nn,re,Ce):B.renderbufferStorage(Sn.RENDERBUFFER,Nn,re,Ce)}return I.format=V,I.width=re,I.height=Ce,I.sampleCount=ze,I}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},o}(Ep),hd;(function(a){a[a.NeedsCompile=0]="NeedsCompile",a[a.Compiling=1]="Compiling",a[a.NeedsBind=2]="NeedsBind",a[a.ReadyToUse=3]="ReadyToUse"})(hd||(hd={}));var Z1=function(a){(0,Oo.ZT)(o,a);function o(f,m){var w=f.id,C=f.device,I=f.descriptor,B=a.call(this,{id:w,device:C})||this;B.rawVertexGLSL=m,B.type=Fs.Program,B.uniformSetters={},B.attributes=[];var V=B.device.gl;return B.descriptor=I,B.gl_program=B.device.ensureResourceExists(V.createProgram()),B.gl_shader_vert=null,B.gl_shader_frag=null,B.compileState=hd.NeedsCompile,B.tryCompileProgram(),B}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},o.prototype.tryCompileProgram=function(){Za(this.compileState===hd.NeedsCompile);var f=this.descriptor,m=f.vertex,w=f.fragment,C=this.device.gl;m!=null&&m.glsl&&(w!=null&&w.glsl)&&(this.gl_shader_vert=this.compileShader(m.postprocess?m.postprocess(m.glsl):m.glsl,C.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(w.postprocess?w.postprocess(w.glsl):w.glsl,C.FRAGMENT_SHADER),C.attachShader(this.gl_program,this.gl_shader_vert),C.attachShader(this.gl_program,this.gl_shader_frag),C.linkProgram(this.gl_program),this.compileState=hd.Compiling,Zo(C)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},o.prototype.readAttributesFromLinkedProgram=function(){for(var f,m=this.device.gl,w=m.getProgramParameter(this.gl_program,m.ACTIVE_ATTRIBUTES),C=g3(this.descriptor.vertex.glsl),I=qS(this.rawVertexGLSL,C),B=function(Ce){var Se=m.getActiveAttrib(V.gl_program,Ce),ze=Se.name,Rt=Se.type,Jt=Se.size,Nn=m.getAttribLocation(V.gl_program,ze),sr=(f=I.find(function(Ar){return Ar.name===ze}))===null||f===void 0?void 0:f.location;Nn>=0&&!(0,Gp.Z)(sr)&&(V.attributes[sr]={name:ze,location:Nn,type:Rt,size:Jt})},V=this,re=0;re<w;re++)B(re)},o.prototype.readUniformLocationsFromLinkedProgram=function(){for(var f=this.device.gl,m=f.getProgramParameter(this.gl_program,f.ACTIVE_UNIFORMS),w=0;w<m;w++){var C=f.getActiveUniform(this.gl_program,w),I=Xx(C.name).name,B=f.getUniformLocation(this.gl_program,I);if(this.uniformSetters[I]=$x(f,B,C),C&&C.size>1)for(var V=0;V<C.size;V++)B=f.getUniformLocation(this.gl_program,"".concat(I,"[").concat(V,"]")),this.uniformSetters["".concat(I,"[").concat(V,"]")]=$x(f,B,C)}},o.prototype.compileShader=function(f,m){var w=this.device.gl,C=this.device.ensureResourceExists(w.createShader(m));return w.shaderSource(C,f),w.compileShader(C),C},o.prototype.setUniformsLegacy=function(f){f===void 0&&(f={});var m=this.device.gl;if(!Zo(m)){var w=!1;for(var C in f){w||(m.useProgram(this.gl_program),w=!0);var I=f[C],B=this.uniformSetters[C];if(B){var V=I;V instanceof e2&&(V=V.textureIndex),B(V)}}}return this},o}(Ep),S3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;I.type=Fs.QueryPool;var B=I.device.gl;if(Zo(B)){var V=C.elemCount,re=C.type;I.gl_query=k1(V,function(){return I.device.ensureResourceExists(B.createQuery())}),I.gl_query_type=y3(re)}return I}return o.prototype.queryResultOcclusion=function(f){var m=this.device.gl;if(Zo(m)){var w=this.gl_query[f];return m.getQueryParameter(w,m.QUERY_RESULT_AVAILABLE)?!!m.getQueryParameter(w,m.QUERY_RESULT):null}return null},o.prototype.destroy=function(){a.prototype.destroy.call(this);var f=this.device.gl;if(Zo(f))for(var m=0;m<this.gl_query.length;m++)f.deleteQuery(this.gl_query[m])},o}(Ep),Jm=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this,{id:m,device:w})||this;return C.type=Fs.Readback,C.gl_pbo=null,C.gl_sync=null,C}return o.prototype.clientWaitAsync=function(f,m,w){m===void 0&&(m=0),w===void 0&&(w=10);var C=this.device.gl;return new Promise(function(I,B){function V(){var re=C.clientWaitSync(f,m,0);if(re==C.WAIT_FAILED){B();return}if(re==C.TIMEOUT_EXPIRED){setTimeout(V,(0,kS.Z)(w,0,C.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}I()}V()})},o.prototype.getBufferSubDataAsync=function(f,m,w,C,I,B){return(0,Oo.mG)(this,void 0,void 0,function(){var V;return(0,Oo.Jh)(this,function(re){switch(re.label){case 0:return V=this.device.gl,Zo(V)?(this.gl_sync=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0),V.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return re.sent(),V.bindBuffer(f,m),V.getBufferSubData(f,w,C,I,B),V.bindBuffer(f,null),[2,C];case 2:return[2]}})})},o.prototype.readTexture=function(f,m,w,C,I,B,V,re){return V===void 0&&(V=0),re===void 0&&(re=B.byteLength||0),(0,Oo.mG)(this,void 0,void 0,function(){var Ce,Se,ze,Rt,Jt;return(0,Oo.Jh)(this,function(Nn){return Ce=this.device.gl,Se=f,ze=this.device.translateTextureFormat(Se.format),Rt=this.device.translateTextureType(Se.format),Jt=ZO(Se.format),Zo(Ce)?(this.gl_pbo=this.device.ensureResourceExists(Ce.createBuffer()),Ce.bindBuffer(Ce.PIXEL_PACK_BUFFER,this.gl_pbo),Ce.bufferData(Ce.PIXEL_PACK_BUFFER,re,Ce.STREAM_READ),Ce.bindBuffer(Ce.PIXEL_PACK_BUFFER,null),Ce.bindFramebuffer(Sn.READ_FRAMEBUFFER,this.device.readbackFramebuffer),Ce.framebufferTexture2D(Sn.READ_FRAMEBUFFER,Sn.COLOR_ATTACHMENT0,Sn.TEXTURE_2D,Se.gl_texture,0),Ce.bindBuffer(Ce.PIXEL_PACK_BUFFER,this.gl_pbo),Ce.readPixels(m,w,C,I,ze,Rt,V*Jt),Ce.bindBuffer(Ce.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(Ce.PIXEL_PACK_BUFFER,this.gl_pbo,0,B,V,0)]):[2,this.readTextureSync(f,m,w,C,I,B,V,re)]})})},o.prototype.readTextureSync=function(f,m,w,C,I,B,V,re){re===void 0&&(re=B.byteLength||0);var Ce=this.device.gl,Se=f,ze=this.device.translateTextureType(Se.format);return Ce.bindFramebuffer(Sn.FRAMEBUFFER,this.device.readbackFramebuffer),Ce.framebufferTexture2D(Sn.FRAMEBUFFER,Sn.COLOR_ATTACHMENT0,Sn.TEXTURE_2D,Se.gl_texture,0),Ce.pixelStorei(Ce.PACK_ALIGNMENT,4),Ce.readPixels(m,w,C,I,Ce.RGBA,ze,B),B},o.prototype.readBuffer=function(f,m,w,C,I){return(0,Oo.mG)(this,void 0,void 0,function(){var B;return(0,Oo.Jh)(this,function(V){return B=this.device.gl,Zo(B)?[2,this.getBufferSubDataAsync(B.ARRAY_BUFFER,oy(f,m),m,w,C,I)]:[2,Promise.reject()]})})},o.prototype.destroy=function(){a.prototype.destroy.call(this),Zo(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},o}(Ep),w3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I,B,V=a.call(this,{id:m,device:w})||this;return V.type=Fs.RenderPipeline,V.drawMode=E_((I=C.topology)!==null&&I!==void 0?I:Du.TRIANGLES),V.program=C.program,V.inputLayout=C.inputLayout,V.megaState=(0,Oo.pi)((0,Oo.pi)({},Yv(M0)),C.megaStateDescriptor),V.colorAttachmentFormats=C.colorAttachmentFormats.slice(),V.depthStencilAttachmentFormat=C.depthStencilAttachmentFormat,V.sampleCount=(B=C.sampleCount)!==null&&B!==void 0?B:1,V}return o}(Ep),X1=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;return I.type=Fs.ComputePipeline,I.descriptor=C,I}return o}(Ep),Kv=function(){function a(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return a.prototype.trackResourceCreated=function(o){this.creationStacks.set(o,new Error().stack),this.liveObjects.add(o)},a.prototype.trackResourceDestroyed=function(o){this.deletionStacks.has(o)&&console.warn("Object double freed:",o,`

Creation stack: `,this.creationStacks.get(o),`

Deletion stack: `,this.deletionStacks.get(o),`

This stack: `,new Error().stack),this.deletionStacks.set(o,new Error().stack),this.liveObjects.delete(o)},a.prototype.checkForLeaks=function(){var o,f;try{for(var m=(0,Oo.XA)(this.liveObjects.values()),w=m.next();!w.done;w=m.next()){var C=w.value;console.warn("Object leaked:",C,"Creation stack:",this.creationStacks.get(C))}}catch(I){o={error:I}}finally{try{w&&!w.done&&(f=m.return)&&f.call(m)}finally{if(o)throw o.error}}},a.prototype.setResourceLeakCheck=function(o,f){f?this.liveObjects.add(o):this.liveObjects.delete(o)},a}(),rw=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I,B,V=a.call(this,{id:m,device:w})||this;V.type=Fs.Sampler;var re=V.device.gl;if(Zo(re)){var Ce=V.device.ensureResourceExists(re.createSampler());re.samplerParameteri(Ce,Sn.TEXTURE_WRAP_S,iy(C.addressModeU)),re.samplerParameteri(Ce,Sn.TEXTURE_WRAP_T,iy(C.addressModeV)),re.samplerParameteri(Ce,Sn.TEXTURE_WRAP_R,iy((I=C.addressModeW)!==null&&I!==void 0?I:C.addressModeU)),re.samplerParameteri(Ce,Sn.TEXTURE_MIN_FILTER,S_(C.minFilter,C.mipmapFilter)),re.samplerParameteri(Ce,Sn.TEXTURE_MAG_FILTER,S_(C.magFilter,Tu.NO_MIP)),C.lodMinClamp!==void 0&&re.samplerParameterf(Ce,Sn.TEXTURE_MIN_LOD,C.lodMinClamp),C.lodMaxClamp!==void 0&&re.samplerParameterf(Ce,Sn.TEXTURE_MAX_LOD,C.lodMaxClamp),C.compareFunction!==void 0&&(re.samplerParameteri(Ce,re.TEXTURE_COMPARE_MODE,re.COMPARE_REF_TO_TEXTURE),re.samplerParameteri(Ce,re.TEXTURE_COMPARE_FUNC,C.compareFunction));var Se=(B=C.maxAnisotropy)!==null&&B!==void 0?B:1;Se>1&&V.device.EXT_texture_filter_anisotropic!==null&&(Za(C.minFilter===Lu.BILINEAR&&C.magFilter===Lu.BILINEAR&&C.mipmapFilter===Tu.LINEAR),re.samplerParameterf(Ce,V.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Se)),V.gl_sampler=Ce}else V.descriptor=C;return V}return o.prototype.setTextureParameters=function(f,m,w){var C,I=this.device.gl,B=this.descriptor;this.isNPOT(m,w)?I.texParameteri(Sn.TEXTURE_2D,Sn.TEXTURE_MIN_FILTER,Sn.LINEAR):I.texParameteri(f,Sn.TEXTURE_MIN_FILTER,S_(B.minFilter,B.mipmapFilter)),I.texParameteri(Sn.TEXTURE_2D,Sn.TEXTURE_WRAP_S,iy(B.addressModeU)),I.texParameteri(Sn.TEXTURE_2D,Sn.TEXTURE_WRAP_T,iy(B.addressModeV)),I.texParameteri(f,Sn.TEXTURE_MAG_FILTER,S_(B.magFilter,Tu.NO_MIP));var V=(C=B.maxAnisotropy)!==null&&C!==void 0?C:1;V>1&&this.device.EXT_texture_filter_anisotropic!==null&&(Za(B.minFilter===Lu.BILINEAR&&B.magFilter===Lu.BILINEAR&&B.mipmapFilter===Tu.LINEAR),I.texParameteri(f,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V))},o.prototype.destroy=function(){a.prototype.destroy.call(this),Zo(this.device.gl)&&this.device.gl.deleteSampler(Qx(this))},o.prototype.isNPOT=function(f,m){return!ry(f)||!ry(m)},o}(Ep),T3=function(){function a(){}return a.prototype.dispatchWorkgroups=function(o,f,m){},a.prototype.dispatchWorkgroupsIndirect=function(o,f){},a.prototype.setPipeline=function(o){},a.prototype.setBindings=function(o){},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a}(),t2=function(a){(0,Oo.ZT)(o,a);function o(){var f=a!==null&&a.apply(this,arguments)||this;return f.type=Fs.RenderBundle,f.commands=[],f}return o.prototype.push=function(f){this.commands.push(f)},o.prototype.replay=function(){this.commands.forEach(function(f){return f()})},o}(Ep),iw=65536,ow=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,aw=function(){function a(o,f){f===void 0&&(f={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=Yv(M0),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=C0.LOWER_LEFT,this.clipSpaceNearZ=ey.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=o,this.contextAttributes=qm(o.getContextAttributes()),Zo(o)?(this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=o.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=o.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=o.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=o.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=o.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=o.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=o.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=o.getExtension("EXT_color_buffer_half_float"),o.getExtension("EXT_frag_depth"),o.getExtension("OES_element_index_uint"),o.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=o.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=o.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=o.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=o.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=o.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=o.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=o.getExtension("KHR_parallel_shader_compile"),Zo(o)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new e2({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:qa.TEXTURE_2D,mipLevelCount:1,usage:gl.RENDER_TARGET,format:this.contextAttributes.alpha===!1?nr.U8_RGB_RT:nr.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=Vs.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(qa.TEXTURE_2D,Vs.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(qa.TEXTURE_2D,Vs.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:ul.VERTEX,hint:$l.STATIC}),Zo(o)&&(this.fallbackTexture2DArray=this.createFallbackTexture(qa.TEXTURE_2D_ARRAY,Vs.Float),this.fallbackTexture3D=this.createFallbackTexture(qa.TEXTURE_3D,Vs.Float),this.fallbackTextureCube=this.createFallbackTexture(qa.TEXTURE_CUBE_MAP,Vs.Float)),this.currentMegaState.depthCompare=ts.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=uc.ALL,o.enable(o.DEPTH_TEST),o.enable(o.STENCIL_TEST),this.checkLimits(),f.shaderDebug&&(this.shaderDebug=!0),f.trackResources&&(this.resourceCreationTracker=new Kv)}return a.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},a.prototype.createFallbackTexture=function(o,f){var m=o===qa.TEXTURE_CUBE_MAP?6:1,w=f===Vs.Depth?nr.D32F:nr.U8_RGBA_NORM,C=this.createTexture({dimension:o,format:w,usage:gl.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1});return f===Vs.Float&&C.setImageData([new Uint8Array(4*m)]),ay(C)},a.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},a.prototype.checkLimits=function(){var o=this.gl;if(this.maxVertexAttribs=o.getParameter(Sn.MAX_VERTEX_ATTRIBS),Zo(o)){this.uniformBufferMaxPageByteSize=Math.min(o.getParameter(Sn.MAX_UNIFORM_BLOCK_SIZE),iw),this.uniformBufferWordAlignment=o.getParameter(o.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var f=o.getInternalformatParameter(o.RENDERBUFFER,o.DEPTH32F_STENCIL8,o.SAMPLES);this.supportedSampleCounts=f?(0,Oo.ev)([],(0,Oo.CR)(f),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=iw;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(m,w){return m-w})},a.prototype.configureSwapChain=function(o,f,m){var w=this.scTexture;w.width=o,w.height=f,this.scPlatformFramebuffer=KO(m)},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.gl.canvas},a.prototype.getOnscreenTexture=function(){return this.scTexture},a.prototype.beginFrame=function(){},a.prototype.endFrame=function(){},a.prototype.translateTextureInternalFormat=function(o,f){switch(f===void 0&&(f=!1),o){case nr.ALPHA:return Sn.ALPHA;case nr.U8_LUMINANCE:case nr.F16_LUMINANCE:case nr.F32_LUMINANCE:return Sn.LUMINANCE;case nr.F16_R:return Sn.R16F;case nr.F16_RG:return Sn.RG16F;case nr.F16_RGB:return Sn.RGB16F;case nr.F16_RGBA:return Sn.RGBA16F;case nr.F32_R:return Sn.R32F;case nr.F32_RG:return Sn.RG32F;case nr.F32_RGB:return Sn.RGB32F;case nr.F32_RGBA:return Zo(this.gl)?Sn.RGBA32F:f?this.WEBGL_color_buffer_float.RGBA32F_EXT:Sn.RGBA;case nr.U8_R_NORM:return Sn.R8;case nr.U8_RG_NORM:return Sn.RG8;case nr.U8_RGB_NORM:case nr.U8_RGB_RT:return Sn.RGB8;case nr.U8_RGB_SRGB:return Sn.SRGB8;case nr.U8_RGBA_NORM:case nr.U8_RGBA_RT:return Zo(this.gl)?Sn.RGBA8:f?Sn.RGBA4:Sn.RGBA;case nr.U8_RGBA:return Sn.RGBA;case nr.U8_RGBA_SRGB:case nr.U8_RGBA_RT_SRGB:return Sn.SRGB8_ALPHA8;case nr.U16_R:return Sn.R16UI;case nr.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case nr.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case nr.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case nr.U16_RGBA_5551:return Sn.RGB5_A1;case nr.U16_RGB_565:return Sn.RGB565;case nr.U32_R:return Sn.R32UI;case nr.S8_RGBA_NORM:return Sn.RGBA8_SNORM;case nr.S8_RG_NORM:return Sn.RG8_SNORM;case nr.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case nr.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case nr.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case nr.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case nr.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case nr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case nr.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case nr.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case nr.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case nr.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case nr.D32F_S8:return Zo(this.gl)?Sn.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?Sn.DEPTH_STENCIL:Sn.DEPTH_COMPONENT16;case nr.D24_S8:return Zo(this.gl)?Sn.DEPTH24_STENCIL8:this.WEBGL_depth_texture?Sn.DEPTH_STENCIL:Sn.DEPTH_COMPONENT16;case nr.D32F:return Zo(this.gl)?Sn.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?Sn.DEPTH_COMPONENT:Sn.DEPTH_COMPONENT16;case nr.D24:return Zo(this.gl)?Sn.DEPTH_COMPONENT24:this.WEBGL_depth_texture?Sn.DEPTH_COMPONENT:Sn.DEPTH_COMPONENT16;default:throw new Error("whoops")}},a.prototype.translateTextureType=function(o){var f=O0(o);switch(f){case li.U8:return Sn.UNSIGNED_BYTE;case li.U16:return Sn.UNSIGNED_SHORT;case li.U32:return Sn.UNSIGNED_INT;case li.S8:return Sn.BYTE;case li.F16:return Sn.HALF_FLOAT;case li.F32:return Sn.FLOAT;case li.U16_PACKED_5551:return Sn.UNSIGNED_SHORT_5_5_5_1;case li.D32F:return Zo(this.gl)?Sn.FLOAT:this.WEBGL_depth_texture?Sn.UNSIGNED_INT:Sn.UNSIGNED_BYTE;case li.D24:return Zo(this.gl)?Sn.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Sn.UNSIGNED_SHORT:Sn.UNSIGNED_BYTE;case li.D24S8:return Zo(this.gl)?Sn.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Sn.UNSIGNED_INT_24_8_WEBGL:Sn.UNSIGNED_BYTE;case li.D32FS8:return Sn.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},a.prototype.translateInternalTextureFormat=function(o){switch(o){case nr.F32_R:return Sn.R32F;case nr.F32_RG:return Sn.RG32F;case nr.F32_RGB:return Sn.RGB32F;case nr.F32_RGBA:return Sn.RGBA32F;case nr.F16_R:return Sn.R16F;case nr.F16_RG:return Sn.RG16F;case nr.F16_RGB:return Sn.RGB16F;case nr.F16_RGBA:return Sn.RGBA16F}return this.translateTextureFormat(o)},a.prototype.translateTextureFormat=function(o){if(qx(o)||o===nr.F32_LUMINANCE||o===nr.U8_LUMINANCE)return this.translateTextureInternalFormat(o);var f=Zo(this.gl)||!Zo(this.gl)&&!!this.WEBGL_depth_texture;switch(o){case nr.D24_S8:case nr.D32F_S8:return f?Sn.DEPTH_STENCIL:Sn.RGBA;case nr.D24:case nr.D32F:return f?Sn.DEPTH_COMPONENT:Sn.RGBA}var m=W1(o),w=m_(o);switch(w){case No.A:return Sn.ALPHA;case No.R:return m?Sn.RED_INTEGER:Sn.RED;case No.RG:return m?Sn.RG_INTEGER:Sn.RG;case No.RGB:return m?Sn.RGB_INTEGER:Sn.RGB;case No.RGBA:return Sn.RGBA}},a.prototype.setActiveTexture=function(o){this.currentActiveTexture!==o&&(this.gl.activeTexture(o),this.currentActiveTexture=o)},a.prototype.bindVAO=function(o){this.currentBoundVAO!==o&&(Zo(this.gl)?this.gl.bindVertexArray(o):this.OES_vertex_array_object.bindVertexArrayOES(o),this.currentBoundVAO=o)},a.prototype.programCompiled=function(o){Za(o.compileState!==hd.NeedsCompile),o.compileState===hd.Compiling&&(o.compileState=hd.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(o))},a.prototype.useProgram=function(o){this.currentProgram!==o&&(this.programCompiled(o),this.gl.useProgram(o.gl_program),this.currentProgram=o)},a.prototype.ensureResourceExists=function(o){if(o===null){var f=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(f))}else return o},a.prototype.createBuffer=function(o){return new b3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new e2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new rw({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){return new E3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,w=f.width,C=f.height,I=f.mipLevelCount;return Za(I===1),this.createRenderTarget({format:m,width:w,height:C,sampleCount:1,texture:o})},a.prototype.createProgram=function(o){var f,m,w,C=(f=o.vertex)===null||f===void 0?void 0:f.glsl;return!((m=o.vertex)===null||m===void 0)&&m.glsl&&(o.vertex.glsl=$v(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((w=o.fragment)===null||w===void 0)&&w.glsl&&(o.fragment.glsl=$v(this.queryVendorInfo(),"frag",o.fragment.glsl)),this.createProgramSimple(o,C)},a.prototype.createProgramSimple=function(o,f){var m=new Z1({id:this.getNextUniqueId(),device:this,descriptor:o},f);return m},a.prototype.createBindings=function(o){return new JS({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new x3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new w3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePass=function(){return new T3},a.prototype.createComputePipeline=function(o){return new X1({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createReadback=function(){return new Jm({id:this.getNextUniqueId(),device:this})},a.prototype.createQueryPool=function(o,f){return new S3({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.formatRenderPassDescriptor=function(o){var f,m,w,C,I,B,V=o.colorAttachment;o.depthClearValue=(f=o.depthClearValue)!==null&&f!==void 0?f:"load",o.stencilClearValue=(m=o.stencilClearValue)!==null&&m!==void 0?m:"load";for(var re=0;re<V.length;re++)o.colorAttachmentLevel||(o.colorAttachmentLevel=[]),o.colorAttachmentLevel[re]=(w=o.colorAttachmentLevel[re])!==null&&w!==void 0?w:0,o.colorResolveToLevel||(o.colorResolveToLevel=[]),o.colorResolveToLevel[re]=(C=o.colorResolveToLevel[re])!==null&&C!==void 0?C:0,o.colorClearColor||(o.colorClearColor=[]),o.colorClearColor[re]=(I=o.colorClearColor[re])!==null&&I!==void 0?I:"load",o.colorStore||(o.colorStore=[]),o.colorStore[re]=(B=o.colorStore[re])!==null&&B!==void 0?B:!1},a.prototype.createRenderBundle=function(){return new t2({id:this.getNextUniqueId(),device:this})},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle=void 0},a.prototype.executeBundles=function(o){o.forEach(function(f){f.replay()})},a.prototype.createRenderPass=function(o){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=o,this.formatRenderPassDescriptor(o);var f=o.colorAttachment,m=o.colorAttachmentLevel,w=o.colorClearColor,C=o.colorResolveTo,I=o.colorResolveToLevel,B=o.depthStencilAttachment,V=o.depthClearValue,re=o.stencilClearValue,Ce=o.depthStencilResolveTo;this.setRenderPassParametersBegin(f.length);for(var Se=0;Se<f.length;Se++)this.setRenderPassParametersColor(Se,f[Se],m[Se],C[Se],I[Se]);this.setRenderPassParametersDepthStencil(B,Ce),this.validateCurrentAttachments();for(var Se=0;Se<f.length;Se++){var ze=w[Se];ze!=="load"&&this.setRenderPassParametersClearColor(Se,ze.r,ze.g,ze.b,ze.a)}return this.setRenderPassParametersClearDepthStencil(V,re),this},a.prototype.submitPass=function(o){Za(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},a.prototype.copySubTexture2D=function(o,f,m,w,C,I){var B=this.gl,V=o,re=w;if(Za(re.mipLevelCount===1),Za(V.mipLevelCount===1),Zo(B))V===this.scTexture?B.bindFramebuffer(B.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(B.bindFramebuffer(B.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,V,0)),B.bindFramebuffer(B.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,re,0),B.blitFramebuffer(C,I,C+re.width,I+re.height,f,m,f+re.width,m+re.height,B.COLOR_BUFFER_BIT,B.LINEAR),B.bindFramebuffer(B.READ_FRAMEBUFFER,null),B.bindFramebuffer(B.DRAW_FRAMEBUFFER,null);else if(V===this.scTexture){var Ce=this.createRenderTargetFromTexture(w);this.submitBlitRenderPass(Ce,V)}},a.prototype.queryLimits=function(){return this},a.prototype.queryTextureFormatSupported=function(o,f,m){switch(o){case nr.BC1_SRGB:case nr.BC2_SRGB:case nr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?Jx(f,m,4,4):!1;case nr.BC1:case nr.BC2:case nr.BC3:return this.WEBGL_compressed_texture_s3tc!==null?Jx(f,m,4,4):!1;case nr.BC4_UNORM:case nr.BC4_SNORM:case nr.BC5_UNORM:case nr.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?Jx(f,m,4,4):!1;case nr.U16_R_NORM:case nr.U16_RG_NORM:case nr.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case nr.F32_R:case nr.F32_RG:case nr.F32_RGB:case nr.F32_RGBA:return this.OES_texture_float_linear!==null;case nr.F16_R:case nr.F16_RG:case nr.F16_RGB:case nr.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},a.prototype.queryProgramReady=function(o){var f=this.gl;if(o.compileState===hd.NeedsCompile)throw new Error("whoops");if(o.compileState===hd.Compiling){var m=void 0;return this.KHR_parallel_shader_compile!==null?m=f.getProgramParameter(o.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):m=!0,m&&this.programCompiled(o),m}return o.compileState===hd.NeedsBind||o.compileState===hd.ReadyToUse},a.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){return this.currentRenderPassDescriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Fs.Buffer)for(var m=o.gl_buffer_pages,w=0;w<m.length;w++)w_(m[w],"".concat(f," Page ").concat(w));else if(o.type===Fs.Texture)w_(ay(o),f);else if(o.type===Fs.Sampler)w_(Qx(o),f);else if(o.type===Fs.RenderTarget){var C=o.gl_renderbuffer;C!==null&&w_(C,f)}else o.type===Fs.InputLayout&&w_(o.vao,f)},a.prototype.setResourceLeakCheck=function(o,f){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(o,f)},a.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a.prototype.programPatched=function(o,f){Za(this.shaderDebug)},a.prototype.getBufferData=function(o,f,m){m===void 0&&(m=0);var w=this.gl;Zo(w)&&(w.bindBuffer(w.COPY_READ_BUFFER,oy(o,m*4)),w.getBufferSubData(w.COPY_READ_BUFFER,m*4,f))},a.prototype.debugGroupStatisticsDrawCall=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].drawCallCount+=o},a.prototype.debugGroupStatisticsBufferUpload=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].bufferUploadCount+=o},a.prototype.debugGroupStatisticsTextureBind=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].textureBindCount+=o},a.prototype.debugGroupStatisticsTriangles=function(o){for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].triangleCount+=o},a.prototype.reportShaderError=function(o,f){var m=this.gl,w=m.getShaderParameter(o,m.COMPILE_STATUS);if(!w){console.error(JO(f));var C=m.getExtension("WEBGL_debug_shaders");C&&console.error(C.getTranslatedShaderSource(o)),console.error(m.getShaderInfoLog(o))}return w},a.prototype.checkProgramCompilationForErrors=function(o){var f=this.gl,m=o.gl_program;if(!f.getProgramParameter(m,f.LINK_STATUS)){var w=o.descriptor;if(!this.reportShaderError(o.gl_shader_vert,w.vertex.glsl)||!this.reportShaderError(o.gl_shader_frag,w.fragment.glsl))return;console.error(f.getProgramInfoLog(o.gl_program))}},a.prototype.bindFramebufferAttachment=function(o,f,m,w){var C=this.gl;if((0,Gp.Z)(m))C.framebufferRenderbuffer(o,f,C.RENDERBUFFER,null);else if(m.type===Fs.RenderTarget)m.gl_renderbuffer!==null?C.framebufferRenderbuffer(o,f,C.RENDERBUFFER,m.gl_renderbuffer):m.texture!==null&&C.framebufferTexture2D(o,f,Sn.TEXTURE_2D,ay(m.texture),w);else if(m.type===Fs.Texture){var I=ay(m);m.dimension===qa.TEXTURE_2D?C.framebufferTexture2D(o,f,Sn.TEXTURE_2D,I,w):Zo(C)&&(m.dimension,qa.TEXTURE_2D_ARRAY)}},a.prototype.bindFramebufferDepthStencilAttachment=function(o,f){var m=this.gl,w=(0,Gp.Z)(f)?_o.Depth|_o.Stencil:ty(f.format),C=!!(w&_o.Depth),I=!!(w&_o.Stencil);if(C&&I){var B=Zo(this.gl)||!Zo(this.gl)&&!!this.WEBGL_depth_texture;B?this.bindFramebufferAttachment(o,m.DEPTH_STENCIL_ATTACHMENT,f,0):this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0)}else C?(this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,null,0)):I&&(this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,null,0))},a.prototype.validateCurrentAttachments=function(){for(var o=-1,f=-1,m=-1,w=0;w<this.currentColorAttachments.length;w++){var C=this.currentColorAttachments[w];C!==null&&(o===-1?(o=C.sampleCount,f=C.width,m=C.height):(Za(o===C.sampleCount),Za(f===C.width),Za(m===C.height)))}this.currentDepthStencilAttachment&&(o===-1?o=this.currentDepthStencilAttachment.sampleCount:(Za(o===this.currentDepthStencilAttachment.sampleCount),Za(f===this.currentDepthStencilAttachment.width),Za(m===this.currentDepthStencilAttachment.height))),this.currentSampleCount=o},a.prototype.setRenderPassParametersBegin=function(o){var f=this.gl;if(Zo(f)?f.bindFramebuffer(Sn.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||f.bindFramebuffer(Sn.FRAMEBUFFER,this.renderPassDrawFramebuffer),Zo(f)?f.drawBuffers([Sn.COLOR_ATTACHMENT0,Sn.COLOR_ATTACHMENT1,Sn.COLOR_ATTACHMENT2,Sn.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([Sn.COLOR_ATTACHMENT0_WEBGL,Sn.COLOR_ATTACHMENT1_WEBGL,Sn.COLOR_ATTACHMENT2_WEBGL,Sn.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var m=o;m<this.currentColorAttachments.length;m++){var w=Zo(f)?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,C=Zo(f)?Sn.COLOR_ATTACHMENT0:Sn.COLOR_ATTACHMENT0_WEBGL;f.framebufferRenderbuffer(w,C+m,Sn.RENDERBUFFER,null),f.framebufferTexture2D(w,C+m,Sn.TEXTURE_2D,null,0)}this.currentColorAttachments.length=o},a.prototype.setRenderPassParametersColor=function(o,f,m,w,C){var I=this.gl,B=Zo(I);(this.currentColorAttachments[o]!==f||this.currentColorAttachmentLevels[o]!==m)&&(this.currentColorAttachments[o]=f,this.currentColorAttachmentLevels[o]=m,(B||!B&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(B?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,(B?Sn.COLOR_ATTACHMENT0:Sn.COLOR_ATTACHMENT0_WEBGL)+o,f,m),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[o]!==w||this.currentColorResolveToLevels[o]!==C)&&(this.currentColorResolveTos[o]=w,this.currentColorResolveToLevels[o]=C,w!==null&&(this.resolveColorAttachmentsChanged=!0))},a.prototype.setRenderPassParametersDepthStencil=function(o,f){var m=this.gl;this.currentDepthStencilAttachment!==o&&(this.currentDepthStencilAttachment=o,this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(Zo(m)?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==f&&(this.currentDepthStencilResolveTo=f,f&&(this.resolveDepthStencilAttachmentsChanged=!0))},a.prototype.setRenderPassParametersClearColor=function(o,f,m,w,C){var I=this.gl;if(this.OES_draw_buffers_indexed!==null){var B=this.currentMegaState.attachmentsState[o];B&&B.channelWriteMask!==uc.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(o,!0,!0,!0,!0),B.channelWriteMask=uc.ALL)}else{var B=this.currentMegaState.attachmentsState[0];B&&B.channelWriteMask!==uc.ALL&&(I.colorMask(!0,!0,!0,!0),B.channelWriteMask=uc.ALL)}this.setScissorRectEnabled(!1),Zo(I)?I.clearBufferfv(I.COLOR,o,[f,m,w,C]):(I.clearColor(f,m,w,C),I.clear(I.COLOR_BUFFER_BIT))},a.prototype.setRenderPassParametersClearDepthStencil=function(o,f){o===void 0&&(o="load"),f===void 0&&(f="load");var m=this.gl;o!=="load"&&(Za(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(m.depthMask(!0),this.currentMegaState.depthWrite=!0),Zo(m)?m.clearBufferfv(m.DEPTH,0,[o]):(m.clearDepth(o),m.clear(m.DEPTH_BUFFER_BIT))),f!=="load"&&(Za(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(m.enable(m.STENCIL_TEST),m.stencilMask(255),this.currentMegaState.stencilWrite=!0),Zo(m)?m.clearBufferiv(m.STENCIL,0,[f]):(m.clearStencil(f),m.clear(m.STENCIL_BUFFER_BIT)))},a.prototype.setBindings=function(o){var f=this,m;if(this.renderBundle){this.renderBundle.push(function(){return f.setBindings(o)});return}var w=this.gl,C=o,I=C.uniformBufferBindings,B=C.samplerBindings,V=C.bindingLayouts;Za(0<V.bindingLayoutTables.length);var re=V.bindingLayoutTables[0];Za(I.length>=re.numUniformBuffers),Za(B.length>=re.numSamplers);for(var Ce=0;Ce<I.length;Ce++){var Se=I[Ce];if(Se.size!==0){var ze=re.firstUniformBuffer+Ce,Rt=Se.buffer,Jt=Se.offset||0,Nn=Se.size||Rt.byteSize;if(Rt!==this.currentUniformBuffers[ze]||Jt!==this.currentUniformBufferByteOffsets[ze]||Nn!==this.currentUniformBufferByteSizes[ze]){var sr=Jt%Rt.pageByteSize,Ar=Rt.gl_buffer_pages[Jt/Rt.pageByteSize|0];Za(sr+Nn<=Rt.pageByteSize),Zo(w)&&w.bindBufferRange(w.UNIFORM_BUFFER,ze,Ar,sr,Nn),this.currentUniformBuffers[ze]=Rt,this.currentUniformBufferByteOffsets[ze]=Jt,this.currentUniformBufferByteSizes[ze]=Nn}}}for(var Ce=0;Ce<re.numSamplers;Ce++){var Se=B[Ce],mr=re.firstSampler+Ce,Vr=Se!==null&&Se.sampler!==null?Qx(Se.sampler):null,ci=Se!==null&&Se.texture!==null?ay(Se.texture):null;if(this.currentSamplers[mr]!==Vr&&(Zo(w)&&w.bindSampler(mr,Vr),this.currentSamplers[mr]=Vr),this.currentTextures[mr]!==ci){if(this.setActiveTexture(w.TEXTURE0+mr),ci!==null){var Io=qm(Se).texture,to=Io.gl_target,Qr=Io.width,no=Io.height;Se.texture.textureIndex=mr,w.bindTexture(to,ci),Zo(w)||(m=Se.sampler)===null||m===void 0||m.setTextureParameters(to,Qr,no),this.debugGroupStatisticsTextureBind()}else{var ja=(0,Oo.pi)((0,Oo.pi)({},Se),y_),Eo=ja.dimension,ra=ja.formatKind,to=_3(Eo);w.bindTexture(to,this.getFallbackTexture((0,Oo.pi)({gl_target:to,formatKind:ra},ja)))}this.currentTextures[mr]=ci}}},a.prototype.setViewport=function(o,f,m,w){var C=this.gl;C.viewport(o,f,m,w)},a.prototype.setScissorRect=function(o,f,m,w){var C=this.gl;this.setScissorRectEnabled(!0),C.scissor(o,f,m,w)},a.prototype.applyAttachmentStateIndexed=function(o,f,m){var w=this.gl,C=this.OES_draw_buffers_indexed;f.channelWriteMask!==m.channelWriteMask&&(C.colorMaskiOES(o,!!(m.channelWriteMask&uc.RED),!!(m.channelWriteMask&uc.GREEN),!!(m.channelWriteMask&uc.BLUE),!!(m.channelWriteMask&uc.ALPHA)),f.channelWriteMask=m.channelWriteMask);var I=f.rgbBlendState.blendMode!==m.rgbBlendState.blendMode||f.alphaBlendState.blendMode!==m.alphaBlendState.blendMode,B=f.rgbBlendState.blendSrcFactor!==m.rgbBlendState.blendSrcFactor||f.alphaBlendState.blendSrcFactor!==m.alphaBlendState.blendSrcFactor||f.rgbBlendState.blendDstFactor!==m.rgbBlendState.blendDstFactor||f.alphaBlendState.blendDstFactor!==m.alphaBlendState.blendDstFactor;(B||I)&&(qv(f.rgbBlendState)&&qv(f.alphaBlendState)?C.enableiOES(o,w.BLEND):qv(m.rgbBlendState)&&qv(m.alphaBlendState)&&C.disableiOES(o,w.BLEND)),I&&(C.blendEquationSeparateiOES(o,m.rgbBlendState.blendMode,m.alphaBlendState.blendMode),f.rgbBlendState.blendMode=m.rgbBlendState.blendMode,f.alphaBlendState.blendMode=m.alphaBlendState.blendMode),B&&(C.blendFuncSeparateiOES(o,m.rgbBlendState.blendSrcFactor,m.rgbBlendState.blendDstFactor,m.alphaBlendState.blendSrcFactor,m.alphaBlendState.blendDstFactor),f.rgbBlendState.blendSrcFactor=m.rgbBlendState.blendSrcFactor,f.alphaBlendState.blendSrcFactor=m.alphaBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor=m.rgbBlendState.blendDstFactor,f.alphaBlendState.blendDstFactor=m.alphaBlendState.blendDstFactor)},a.prototype.applyAttachmentState=function(o,f){var m=this.gl;o.channelWriteMask!==f.channelWriteMask&&(m.colorMask(!!(f.channelWriteMask&uc.RED),!!(f.channelWriteMask&uc.GREEN),!!(f.channelWriteMask&uc.BLUE),!!(f.channelWriteMask&uc.ALPHA)),o.channelWriteMask=f.channelWriteMask);var w=o.rgbBlendState.blendMode!==f.rgbBlendState.blendMode||o.alphaBlendState.blendMode!==f.alphaBlendState.blendMode,C=o.rgbBlendState.blendSrcFactor!==f.rgbBlendState.blendSrcFactor||o.alphaBlendState.blendSrcFactor!==f.alphaBlendState.blendSrcFactor||o.rgbBlendState.blendDstFactor!==f.rgbBlendState.blendDstFactor||o.alphaBlendState.blendDstFactor!==f.alphaBlendState.blendDstFactor;(C||w)&&(qv(o.rgbBlendState)&&qv(o.alphaBlendState)?m.enable(m.BLEND):qv(f.rgbBlendState)&&qv(f.alphaBlendState)&&m.disable(m.BLEND)),w&&(m.blendEquationSeparate(f.rgbBlendState.blendMode,f.alphaBlendState.blendMode),o.rgbBlendState.blendMode=f.rgbBlendState.blendMode,o.alphaBlendState.blendMode=f.alphaBlendState.blendMode),C&&(m.blendFuncSeparate(f.rgbBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor,f.alphaBlendState.blendSrcFactor,f.alphaBlendState.blendDstFactor),o.rgbBlendState.blendSrcFactor=f.rgbBlendState.blendSrcFactor,o.alphaBlendState.blendSrcFactor=f.alphaBlendState.blendSrcFactor,o.rgbBlendState.blendDstFactor=f.rgbBlendState.blendDstFactor,o.alphaBlendState.blendDstFactor=f.alphaBlendState.blendDstFactor)},a.prototype.setMegaState=function(o){var f=this.gl,m=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var w=0;w<o.attachmentsState.length;w++)this.applyAttachmentStateIndexed(w,m.attachmentsState[0],o.attachmentsState[0]);else Za(o.attachmentsState.length===1),this.applyAttachmentState(m.attachmentsState[0],o.attachmentsState[0]);if(Km(m.blendConstant,o.blendConstant)||(f.blendColor(o.blendConstant.r,o.blendConstant.g,o.blendConstant.b,o.blendConstant.a),US(m.blendConstant,o.blendConstant)),m.depthCompare!==o.depthCompare&&(f.depthFunc(o.depthCompare),m.depthCompare=o.depthCompare),!!m.depthWrite!=!!o.depthWrite&&(f.depthMask(o.depthWrite),m.depthWrite=o.depthWrite),!!m.stencilWrite!=!!o.stencilWrite&&(f.stencilMask(o.stencilWrite?255:0),m.stencilWrite=o.stencilWrite),!jh(m.stencilFront,o.stencilFront)){var C=o.stencilFront,I=C.passOp,B=C.failOp,V=C.depthFailOp,re=C.compare;(m.stencilFront.passOp!==I||m.stencilFront.failOp!==B||m.stencilFront.depthFailOp!==V)&&(f.stencilOpSeparate(f.FRONT,B,V,I),m.stencilFront.passOp=I,m.stencilFront.failOp=B,m.stencilFront.depthFailOp=V),m.stencilFront.compare!==re&&(this.setStencilReference(0),m.stencilFront.compare=re)}if(!jh(m.stencilBack,o.stencilBack)){var Ce=o.stencilBack,I=Ce.passOp,B=Ce.failOp,V=Ce.depthFailOp,re=Ce.compare;(m.stencilBack.passOp!==I||m.stencilBack.failOp!==B||m.stencilBack.depthFailOp!==V)&&(f.stencilOpSeparate(f.BACK,B,V,I),m.stencilBack.passOp=I,m.stencilBack.failOp=B,m.stencilBack.depthFailOp=V),m.stencilBack.compare!==re&&(this.setStencilReference(0),m.stencilBack.compare=re)}(m.stencilFront.mask!==o.stencilFront.mask||m.stencilBack.mask!==o.stencilBack.mask)&&(m.stencilFront.mask=o.stencilFront.mask,m.stencilBack.mask=o.stencilBack.mask,this.applyStencil()),m.cullMode!==o.cullMode&&(m.cullMode===fd.NONE?f.enable(f.CULL_FACE):o.cullMode===fd.NONE&&f.disable(f.CULL_FACE),o.cullMode===fd.BACK?f.cullFace(f.BACK):o.cullMode===fd.FRONT?f.cullFace(f.FRONT):o.cullMode===fd.FRONT_AND_BACK&&f.cullFace(f.FRONT_AND_BACK),m.cullMode=o.cullMode),m.frontFace!==o.frontFace&&(f.frontFace(o.frontFace),m.frontFace=o.frontFace),m.polygonOffset!==o.polygonOffset&&(o.polygonOffset?(f.polygonOffset(1,1),f.enable(f.POLYGON_OFFSET_FILL)):f.disable(f.POLYGON_OFFSET_FILL),m.polygonOffset=o.polygonOffset)},a.prototype.validatePipelineFormats=function(o){for(var f=0;f<this.currentColorAttachments.length;f++)var m=this.currentColorAttachments[f];this.currentDepthStencilAttachment&&Za(this.currentDepthStencilAttachment.format===o.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&Za(this.currentSampleCount===o.sampleCount)},a.prototype.setPipeline=function(o){var f=this;if(this.renderBundle){this.renderBundle.push(function(){return f.setPipeline(o)});return}this.currentPipeline=o,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var m=this.currentPipeline.program;if(this.useProgram(m),m.compileState===hd.NeedsBind){var w=this.gl,C=m.gl_program,I=m.descriptor,B=nw(I.vertex.glsl,ow);if(Zo(w))for(var V=0;V<B.length;V++){var re=(0,Oo.CR)(B[V],2),Ce=re[1],Se=w.getUniformBlockIndex(C,Ce);Se!==-1&&Se!==4294967295&&w.uniformBlockBinding(C,Se,V)}for(var ze=nw(I.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),V=0;V<ze.length;V++){var Rt=(0,Oo.CR)(ze[V],3),Jt=Rt[1],Nn=Rt[2],sr=w.getUniformLocation(C,Jt);w.uniform1i(sr,parseInt(Nn))}m.compileState=hd.ReadyToUse}},a.prototype.setVertexInput=function(o,f,m){var w,C,I=this,B;if(this.renderBundle){this.renderBundle.push(function(){return I.setVertexInput(o,f,m)});return}if(o!==null){Za(this.currentPipeline.inputLayout===o);var V=o;this.bindVAO(V.vao);for(var re=this.gl,Ce=0;Ce<V.vertexBufferDescriptors.length;Ce++){var Se=V.vertexBufferDescriptors[Ce],ze=Se.arrayStride,Rt=Se.attributes;try{for(var Jt=(w=void 0,(0,Oo.XA)(Rt)),Nn=Jt.next();!Nn.done;Nn=Jt.next()){var sr=Nn.value,Ar=sr.shaderLocation,mr=sr.offset,Vr=Zo(re)?Ar:(B=V.program.attributes[Ar])===null||B===void 0?void 0:B.location;if(!(0,Gp.Z)(Vr)){var ci=f[Ce];if(ci===null)continue;var Io=sr.vertexFormat;re.bindBuffer(re.ARRAY_BUFFER,oy(ci.buffer));var to=(ci.offset||0)+mr;re.vertexAttribPointer(Vr,Io.size,Io.type,Io.normalized,ze,to)}}}catch(no){w={error:no}}finally{try{Nn&&!Nn.done&&(C=Jt.return)&&C.call(Jt)}finally{if(w)throw w.error}}}if(Za(m!==null==(V.indexBufferFormat!==null)),m!==null){var Qr=m.buffer;Za(Qr.usage===ul.INDEX),re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,oy(Qr)),this.currentIndexBufferByteOffset=m.offset||0}else this.currentIndexBufferByteOffset=null}else Za(this.currentPipeline.inputLayout===null),Za(m===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},a.prototype.setStencilReference=function(o){this.currentStencilRef!==o&&(this.currentStencilRef=o,this.applyStencil())},a.prototype.draw=function(o,f,m,w){var C,I=this;if(this.renderBundle){this.renderBundle.push(function(){return I.draw(o,f,m,w)});return}var B=this.gl,V=this.currentPipeline;if(f){var re=[V.drawMode,m||0,o,f];Zo(B)?B.drawArraysInstanced.apply(B,(0,Oo.ev)([],(0,Oo.CR)(re),!1)):(C=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(C,(0,Oo.ev)([],(0,Oo.CR)(re),!1))}else B.drawArrays(V.drawMode,m,o);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndexed=function(o,f,m,w,C){var I,B=this;if(this.renderBundle){this.renderBundle.push(function(){return B.drawIndexed(o,f,m,w,C)});return}var V=this.gl,re=this.currentPipeline,Ce=qm(re.inputLayout),Se=qm(this.currentIndexBufferByteOffset)+m*Ce.indexBufferCompByteSize;if(f){var ze=[re.drawMode,o,Ce.indexBufferType,Se,f];Zo(V)?V.drawElementsInstanced.apply(V,(0,Oo.ev)([],(0,Oo.CR)(ze),!1)):(I=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(I,(0,Oo.ev)([],(0,Oo.CR)(ze),!1))}else V.drawElements(re.drawMode,o,Ce.indexBufferType,Se);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndirect=function(o,f){},a.prototype.drawIndexedIndirect=function(o,f){},a.prototype.beginOcclusionQuery=function(o){var f=this.gl;if(Zo(f)){var m=this.currentRenderPassDescriptor.occlusionQueryPool;f.beginQuery(m.gl_query_type,m.gl_query[o])}},a.prototype.endOcclusionQuery=function(){var o=this.gl;if(Zo(o)){var f=this.currentRenderPassDescriptor.occlusionQueryPool;o.endQuery(f.gl_query_type)}},a.prototype.pipelineQueryReady=function(o){var f=o;return this.queryProgramReady(f.program)},a.prototype.pipelineForceReady=function(o){},a.prototype.endPass=function(){for(var o=this.gl,f=Zo(o),m=!1,w=0;w<this.currentColorAttachments.length;w++){var C=this.currentColorAttachments[w];if(C!==null){var I=this.currentColorResolveTos[w],B=!1;I!==null&&(Za(C.width===I.width&&C.height===I.height),this.setScissorRectEnabled(!1),f&&o.bindFramebuffer(o.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&f&&this.bindFramebufferAttachment(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,C,this.currentColorAttachmentLevels[w]),B=!0,I===this.scTexture?o.bindFramebuffer(f?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,this.scPlatformFramebuffer):(o.bindFramebuffer(f?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&o.framebufferTexture2D(f?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,I.gl_texture,this.currentColorResolveToLevels[w])),f?(o.blitFramebuffer(0,0,C.width,C.height,0,0,I.width,I.height,o.COLOR_BUFFER_BIT,o.LINEAR),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(C,I),m=!0),this.currentRenderPassDescriptor.colorStore[w]||B||(o.bindFramebuffer(f?Sn.READ_FRAMEBUFFER:Sn.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(f?Sn.READ_FRAMEBUFFER:Sn.FRAMEBUFFER,o.COLOR_ATTACHMENT0,C,this.currentColorAttachmentLevels[w])),o.bindFramebuffer(f?Sn.READ_FRAMEBUFFER:Sn.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var V=this.currentDepthStencilAttachment;if(V){var re=this.currentDepthStencilResolveTo,B=!1;re&&(Za(V.width===re.width&&V.height===re.height),this.setScissorRectEnabled(!1),o.bindFramebuffer(f?Sn.READ_FRAMEBUFFER:Sn.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),o.bindFramebuffer(f?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(f?Sn.READ_FRAMEBUFFER:Sn.FRAMEBUFFER,V),this.bindFramebufferDepthStencilAttachment(f?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,re)),B=!0,f&&o.blitFramebuffer(0,0,V.width,V.height,0,0,re.width,re.height,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(f?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,null),m=!0),this.currentRenderPassDescriptor.depthStencilStore||(B||(o.bindFramebuffer(f?Sn.READ_FRAMEBUFFER:Sn.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(f?Sn.READ_FRAMEBUFFER:Sn.FRAMEBUFFER,V),B=!0),f&&o.invalidateFramebuffer(o.READ_FRAMEBUFFER,[o.DEPTH_STENCIL_ATTACHMENT])),B&&o.bindFramebuffer(f?Sn.READ_FRAMEBUFFER:Sn.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}m||o.bindFramebuffer(f?Sn.DRAW_FRAMEBUFFER:Sn.FRAMEBUFFER,null)},a.prototype.setScissorRectEnabled=function(o){if(this.currentScissorEnabled!==o){var f=this.gl;o?f.enable(f.SCISSOR_TEST):f.disable(f.SCISSOR_TEST),this.currentScissorEnabled=o}},a.prototype.applyStencil=function(){(0,Gp.Z)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(Sn.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(Sn.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},a.prototype.getFallbackTexture=function(o){var f=o.gl_target,m=o.formatKind;if(f===Sn.TEXTURE_2D)return m===Vs.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===Sn.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===Sn.TEXTURE_3D)return this.fallbackTexture3D;if(f===Sn.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.submitBlitRenderPass=function(o,f){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:ul.VERTEX|ul.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:A0.VERTEX,attributes:[{format:nr.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:Du.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[nr.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:Yv(M0)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:o.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:o}));var m=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var w=this.createRenderPass({colorAttachment:[o],colorResolveTo:[f],colorClearColor:[qO]}),C=this.getCanvas(),I=C.width,B=C.height;w.setPipeline(this.blitRenderPipeline),w.setBindings(this.blitBindings),w.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),w.setViewport(0,0,I,B),this.gl.disable(this.gl.BLEND),w.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=m,this.inBlitRenderPass=!1},a}(),A3=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,Oo.mG)(this,void 0,void 0,function(){var f,m,w,C,I,B,V,re,Ce,Se,ze,Rt,Jt;return(0,Oo.Jh)(this,function(Nn){return f=this.pluginOptions,m=f.targets,w=f.xrCompatible,C=f.antialias,I=C===void 0?!1:C,B=f.preserveDrawingBuffer,V=B===void 0?!1:B,re=f.premultipliedAlpha,Ce=re===void 0?!0:re,Se=f.shaderDebug,ze=f.trackResources,Rt={antialias:I,preserveDrawingBuffer:V,stencil:!0,premultipliedAlpha:Ce,xrCompatible:w},this.handleContextEvents(o),m.includes("webgl2")&&(Jt=o.getContext("webgl2",Rt)||o.getContext("experimental-webgl2",Rt)),!Jt&&m.includes("webgl1")&&(Jt=o.getContext("webgl",Rt)||o.getContext("experimental-webgl",Rt)),[2,new aw(Jt,{shaderDebug:Se,trackResources:ze})]})})},a.prototype.handleContextEvents=function(o){var f=this.pluginOptions,m=f.onContextLost,w=f.onContextRestored,C=f.onContextCreationError;C&&o.addEventListener("webglcontextcreationerror",C,!1),m&&o.addEventListener("webglcontextlost",m,!1),w&&o.addEventListener("webglcontextrestored",w,!1)},a}();let Nu;const sw=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&sw.decode();let T_=null;function Y1(){return(T_===null||T_.byteLength===0)&&(T_=new Uint8Array(Nu.memory.buffer)),T_}function $1(a,o){return a=a>>>0,sw.decode(Y1().subarray(a,a+o))}const pv=new Array(128).fill(void 0);pv.push(void 0,null,!0,!1);let A_=pv.length;function C3(a){A_===pv.length&&pv.push(pv.length+1);const o=A_;return A_=pv[o],pv[o]=a,o}function q1(a){return pv[a]}function Qv(a){a<132||(pv[a]=A_,A_=a)}function K1(a){const o=q1(a);return Qv(a),o}let sy=0;const Q1=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},VI=typeof Q1.encodeInto=="function"?function(a,o){return Q1.encodeInto(a,o)}:function(a,o){const f=Q1.encode(a);return o.set(f),{read:a.length,written:f.length}};function n2(a,o,f){if(f===void 0){const B=Q1.encode(a),V=o(B.length,1)>>>0;return Y1().subarray(V,V+B.length).set(B),sy=B.length,V}let m=a.length,w=o(m,1)>>>0;const C=Y1();let I=0;for(;I<m;I++){const B=a.charCodeAt(I);if(B>127)break;C[w+I]=B}if(I!==m){I!==0&&(a=a.slice(I)),w=f(w,m,m=I+a.length*3,1)>>>0;const B=Y1().subarray(w+I,w+m),V=VI(a,B);I+=V.written}return sy=I,w}let J1=null;function r2(){return(J1===null||J1.byteLength===0)&&(J1=new Int32Array(Nu.memory.buffer)),J1}function HI(a,o,f){let m,w;try{const B=Nu.__wbindgen_add_to_stack_pointer(-16),V=n2(a,Nu.__wbindgen_malloc,Nu.__wbindgen_realloc),re=sy,Ce=n2(o,Nu.__wbindgen_malloc,Nu.__wbindgen_realloc),Se=sy;Nu.glsl_compile(B,V,re,Ce,Se,f);var C=r2()[B/4+0],I=r2()[B/4+1];return m=C,w=I,$1(C,I)}finally{Nu.__wbindgen_add_to_stack_pointer(16),Nu.__wbindgen_free(m,w,1)}}class eb{static __wrap(o){o=o>>>0;const f=Object.create(eb.prototype);return f.__wbg_ptr=o,f}__destroy_into_raw(){const o=this.__wbg_ptr;return this.__wbg_ptr=0,o}free(){const o=this.__destroy_into_raw();Nu.__wbg_wgslcomposer_free(o)}constructor(){const o=Nu.wgslcomposer_new();return eb.__wrap(o)}load_composable(o){const f=n2(o,Nu.__wbindgen_malloc,Nu.__wbindgen_realloc),m=sy;Nu.wgslcomposer_load_composable(this.__wbg_ptr,f,m)}wgsl_compile(o){let f,m;try{const I=Nu.__wbindgen_add_to_stack_pointer(-16),B=n2(o,Nu.__wbindgen_malloc,Nu.__wbindgen_realloc),V=sy;Nu.wgslcomposer_wgsl_compile(I,this.__wbg_ptr,B,V);var w=r2()[I/4+0],C=r2()[I/4+1];return f=w,m=C,$1(w,C)}finally{Nu.__wbindgen_add_to_stack_pointer(16),Nu.__wbindgen_free(f,m,1)}}}function WI(a,o){return mI(this,null,function*(){if(typeof Response=="function"&&a instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(a,o)}catch(m){if(a.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",m);else throw m}const f=yield a.arrayBuffer();return yield WebAssembly.instantiate(f,o)}else{const f=yield WebAssembly.instantiate(a,o);return f instanceof WebAssembly.Instance?{instance:f,module:a}:f}})}function O3(){const a={};return a.wbg={},a.wbg.__wbindgen_string_new=function(o,f){const m=$1(o,f);return C3(m)},a.wbg.__wbindgen_object_drop_ref=function(o){K1(o)},a.wbg.__wbg_log_1d3ae0273d8f4f8a=function(o){console.log(q1(o))},a.wbg.__wbg_log_576ca876af0d4a77=function(o,f){console.log(q1(o),q1(f))},a.wbg.__wbindgen_throw=function(o,f){throw new Error($1(o,f))},a}function M3(a,o){return Nu=a.exports,lw.__wbindgen_wasm_module=o,J1=null,T_=null,Nu}function lw(a){return mI(this,null,function*(){if(Nu!==void 0)return Nu;const o=O3();(typeof a=="string"||typeof Request=="function"&&a instanceof Request||typeof URL=="function"&&a instanceof URL)&&(a=fetch(a));const{instance:f,module:m}=yield WI(yield a,o);return M3(f,m)})}var ef;(function(a){a[a.COPY_SRC=1]="COPY_SRC",a[a.COPY_DST=2]="COPY_DST",a[a.TEXTURE_BINDING=4]="TEXTURE_BINDING",a[a.STORAGE_BINDING=8]="STORAGE_BINDING",a[a.STORAGE=8]="STORAGE",a[a.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(ef||(ef={}));var i2;(function(a){a[a.READ=1]="READ",a[a.WRITE=2]="WRITE"})(i2||(i2={}));function R3(a){var o=0;return a&gl.SAMPLED&&(o|=ef.TEXTURE_BINDING|ef.COPY_DST|ef.COPY_SRC),a&gl.STORAGE&&(o|=ef.TEXTURE_BINDING|ef.STORAGE_BINDING|ef.COPY_SRC|ef.COPY_DST),a&gl.RENDER_TARGET&&(o|=ef.RENDER_ATTACHMENT|ef.TEXTURE_BINDING|ef.COPY_SRC|ef.COPY_DST),o}function o2(a){if(a===nr.U8_R_NORM)return"r8unorm";if(a===nr.S8_R_NORM)return"r8snorm";if(a===nr.U8_RG_NORM)return"rg8unorm";if(a===nr.S8_RG_NORM)return"rg8snorm";if(a===nr.U32_R)return"r32uint";if(a===nr.S32_R)return"r32sint";if(a===nr.F32_R)return"r32float";if(a===nr.U16_RG)return"rg16uint";if(a===nr.S16_RG)return"rg16sint";if(a===nr.F16_RG)return"rg16float";if(a===nr.U8_RGBA_RT)return"bgra8unorm";if(a===nr.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(a===nr.U8_RGBA_NORM)return"rgba8unorm";if(a===nr.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(a===nr.S8_RGBA_NORM)return"rgba8snorm";if(a===nr.U32_RG)return"rg32uint";if(a===nr.S32_RG)return"rg32sint";if(a===nr.F32_RG)return"rg32float";if(a===nr.U16_RGBA)return"rgba16uint";if(a===nr.S16_RGBA)return"rgba16sint";if(a===nr.F16_RGBA)return"rgba16float";if(a===nr.F32_RGBA)return"rgba32float";if(a===nr.U32_RGBA)return"rgba32uint";if(a===nr.S32_RGBA)return"rgba32sint";if(a===nr.D24)return"depth24plus";if(a===nr.D24_S8)return"depth24plus-stencil8";if(a===nr.D32F)return"depth32float";if(a===nr.D32F_S8)return"depth32float-stencil8";if(a===nr.BC1)return"bc1-rgba-unorm";if(a===nr.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(a===nr.BC2)return"bc2-rgba-unorm";if(a===nr.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(a===nr.BC3)return"bc3-rgba-unorm";if(a===nr.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(a===nr.BC4_SNORM)return"bc4-r-snorm";if(a===nr.BC4_UNORM)return"bc4-r-unorm";if(a===nr.BC5_SNORM)return"bc5-rg-snorm";if(a===nr.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function P3(a){if(a===qa.TEXTURE_2D)return"2d";if(a===qa.TEXTURE_CUBE_MAP)return"2d";if(a===qa.TEXTURE_2D_ARRAY)return"2d";if(a===qa.TEXTURE_3D)return"3d";throw new Error("whoops")}function I3(a){if(a===qa.TEXTURE_2D)return"2d";if(a===qa.TEXTURE_CUBE_MAP)return"cube";if(a===qa.TEXTURE_2D_ARRAY)return"2d-array";if(a===qa.TEXTURE_3D)return"3d";throw new Error("whoops")}function L3(a){var o=0;return a&ul.INDEX&&(o|=GPUBufferUsage.INDEX),a&ul.VERTEX&&(o|=GPUBufferUsage.VERTEX),a&ul.UNIFORM&&(o|=GPUBufferUsage.UNIFORM),a&ul.STORAGE&&(o|=GPUBufferUsage.STORAGE),a&ul.COPY_SRC&&(o|=GPUBufferUsage.COPY_SRC),a&ul.INDIRECT&&(o|=GPUBufferUsage.INDIRECT),o|=GPUBufferUsage.COPY_DST,o}function a2(a){if(a===Fl.CLAMP_TO_EDGE)return"clamp-to-edge";if(a===Fl.REPEAT)return"repeat";if(a===Fl.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function s2(a){if(a===Lu.BILINEAR)return"linear";if(a===Lu.POINT)return"nearest";throw new Error("whoops")}function D3(a){if(a===Tu.LINEAR)return"linear";if(a===Tu.NEAREST)return"nearest";if(a===Tu.NO_MIP)return"nearest";throw new Error("whoops")}function eg(a){var o=a;return o.gpuBuffer}function N3(a){var o=a;return o.gpuSampler}function uw(a){var o=a;return o.querySet}function F3(a){if(a===L1.OcclusionConservative)return"occlusion";throw new Error("whoops")}function l2(a){switch(a){case Du.TRIANGLES:return"triangle-list";case Du.POINTS:return"point-list";case Du.TRIANGLE_STRIP:return"triangle-strip";case Du.LINES:return"line-list";case Du.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function B3(a){if(a===fd.NONE)return"none";if(a===fd.FRONT)return"front";if(a===fd.BACK)return"back";throw new Error("whoops")}function vv(a){if(a===v_.CCW)return"ccw";if(a===v_.CW)return"cw";throw new Error("whoops")}function k3(a,o){return{topology:l2(a),cullMode:B3(o.cullMode),frontFace:vv(o.frontFace)}}function cw(a){if(a===ds.ZERO)return"zero";if(a===ds.ONE)return"one";if(a===ds.SRC)return"src";if(a===ds.ONE_MINUS_SRC)return"one-minus-src";if(a===ds.DST)return"dst";if(a===ds.ONE_MINUS_DST)return"one-minus-dst";if(a===ds.SRC_ALPHA)return"src-alpha";if(a===ds.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(a===ds.DST_ALPHA)return"dst-alpha";if(a===ds.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(a===ds.CONST)return"constant";if(a===ds.ONE_MINUS_CONSTANT)return"one-minus-constant";if(a===ds.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function fw(a){if(a===Jc.ADD)return"add";if(a===Jc.SUBSTRACT)return"subtract";if(a===Jc.REVERSE_SUBSTRACT)return"reverse-subtract";if(a===Jc.MIN)return"min";if(a===Jc.MAX)return"max";throw new Error("whoops")}function hw(a){return{operation:fw(a.blendMode),srcFactor:cw(a.blendSrcFactor),dstFactor:cw(a.blendDstFactor)}}function ui(a){return a.blendMode===Jc.ADD&&a.blendSrcFactor===ds.ONE&&a.blendDstFactor===ds.ZERO}function z3(a){if(!(ui(a.rgbBlendState)&&ui(a.alphaBlendState)))return{color:hw(a.rgbBlendState),alpha:hw(a.alphaBlendState)}}function GI(a,o){return{format:o2(o),blend:z3(a),writeMask:a.channelWriteMask}}function u2(a,o){return o.attachmentsState.map(function(f,m){return GI(f,a[m])})}function C_(a){if(a===ts.NEVER)return"never";if(a===ts.LESS)return"less";if(a===ts.EQUAL)return"equal";if(a===ts.LEQUAL)return"less-equal";if(a===ts.GREATER)return"greater";if(a===ts.NOTEQUAL)return"not-equal";if(a===ts.GEQUAL)return"greater-equal";if(a===ts.ALWAYS)return"always";throw new Error("whoops")}function tg(a){if(a===gu.KEEP)return"keep";if(a===gu.REPLACE)return"replace";if(a===gu.ZERO)return"zero";if(a===gu.DECREMENT_CLAMP)return"decrement-clamp";if(a===gu.DECREMENT_WRAP)return"decrement-wrap";if(a===gu.INCREMENT_CLAMP)return"increment-clamp";if(a===gu.INCREMENT_WRAP)return"increment-wrap";if(a===gu.INVERT)return"invert";throw new Error("whoops")}function dw(a,o){if(!(0,Gp.Z)(a))return{format:o2(a),depthWriteEnabled:!!o.depthWrite,depthCompare:C_(o.depthCompare),depthBias:o.polygonOffset?1:0,depthBiasSlopeScale:o.polygonOffset?1:0,stencilFront:{compare:C_(o.stencilFront.compare),passOp:tg(o.stencilFront.passOp),failOp:tg(o.stencilFront.failOp),depthFailOp:tg(o.stencilFront.depthFailOp)},stencilBack:{compare:C_(o.stencilBack.compare),passOp:tg(o.stencilBack.passOp),failOp:tg(o.stencilBack.failOp),depthFailOp:tg(o.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function O_(a){if(a!==null){if(a===nr.U16_R)return"uint16";if(a===nr.U32_R)return"uint32";throw new Error("whoops")}}function Fu(a){if(a===A0.VERTEX)return"vertex";if(a===A0.INSTANCE)return"instance";throw new Error("whoops")}function tb(a){if(a===nr.U8_R)return"uint8x2";if(a===nr.U8_RG)return"uint8x2";if(a===nr.U8_RGB)return"uint8x4";if(a===nr.U8_RGBA)return"uint8x4";if(a===nr.U8_RG_NORM)return"unorm8x2";if(a===nr.U8_RGBA_NORM)return"unorm8x4";if(a===nr.S8_RGB_NORM)return"snorm8x4";if(a===nr.S8_RGBA_NORM)return"snorm8x4";if(a===nr.U16_RG_NORM)return"unorm16x2";if(a===nr.U16_RGBA_NORM)return"unorm16x4";if(a===nr.S16_RG_NORM)return"snorm16x2";if(a===nr.S16_RGBA_NORM)return"snorm16x4";if(a===nr.S16_RG)return"uint16x2";if(a===nr.F16_RG)return"float16x2";if(a===nr.F16_RGBA)return"float16x4";if(a===nr.F32_R)return"float32";if(a===nr.F32_RG)return"float32x2";if(a===nr.F32_RGB)return"float32x3";if(a===nr.F32_RGBA)return"float32x4";throw"whoops"}function pw(a){var o=O0(a);switch(o){case li.BC1:case li.BC2:case li.BC3:case li.BC4_SNORM:case li.BC4_UNORM:case li.BC5_SNORM:case li.BC5_UNORM:return!0;default:return!1}}function ZI(a){var o=O0(a);switch(o){case li.BC1:case li.BC2:case li.BC3:case li.BC4_SNORM:case li.BC4_UNORM:case li.BC5_SNORM:case li.BC5_UNORM:return 4;default:return 1}}function U3(a,o,f,m){switch(f===void 0&&(f=!1),a){case nr.S8_R:case nr.S8_R_NORM:case nr.S8_RG_NORM:case nr.S8_RGB_NORM:case nr.S8_RGBA_NORM:{var w=o instanceof ArrayBuffer?new Int8Array(o):new Int8Array(o);return m&&w.set(new Int8Array(m)),w}case nr.U8_R:case nr.U8_R_NORM:case nr.U8_RG:case nr.U8_RG_NORM:case nr.U8_RGB:case nr.U8_RGB_NORM:case nr.U8_RGB_SRGB:case nr.U8_RGBA:case nr.U8_RGBA_NORM:case nr.U8_RGBA_SRGB:{var C=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&C.set(new Uint8Array(m)),C}case nr.S16_R:case nr.S16_RG:case nr.S16_RG_NORM:case nr.S16_RGB_NORM:case nr.S16_RGBA:case nr.S16_RGBA_NORM:{var I=o instanceof ArrayBuffer?new Int16Array(o):new Int16Array(f?o/2:o);return m&&I.set(new Int16Array(m)),I}case nr.U16_R:case nr.U16_RGB:case nr.U16_RGBA_5551:case nr.U16_RGBA_NORM:case nr.U16_RG_NORM:case nr.U16_R_NORM:{var B=o instanceof ArrayBuffer?new Uint16Array(o):new Uint16Array(f?o/2:o);return m&&B.set(new Uint16Array(m)),B}case nr.S32_R:{var V=o instanceof ArrayBuffer?new Int32Array(o):new Int32Array(f?o/4:o);return m&&V.set(new Int32Array(m)),V}case nr.U32_R:case nr.U32_RG:{var re=o instanceof ArrayBuffer?new Uint32Array(o):new Uint32Array(f?o/4:o);return m&&re.set(new Uint32Array(m)),re}case nr.F32_R:case nr.F32_RG:case nr.F32_RGB:case nr.F32_RGBA:{var Ce=o instanceof ArrayBuffer?new Float32Array(o):new Float32Array(f?o/4:o);return m&&Ce.set(new Float32Array(m)),Ce}}var Se=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&Se.set(new Uint8Array(m)),Se}function c2(a){var o=(a&32768)>>15,f=(a&31744)>>10,m=a&1023;return f===0?(o?-1:1)*Math.pow(2,-14)*(m/Math.pow(2,10)):f==31?m?NaN:(o?-1:1)*(1/0):(o?-1:1)*Math.pow(2,f-15)*(1+m/Math.pow(2,10))}function nb(a){switch(a){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var R0=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this)||this;return C.id=m,C.device=w,C}return o.prototype.destroy=function(){},o}(Js),XI=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I,B,V=a.call(this,{id:m,device:w})||this;V.type=Fs.Bindings;var re=C.pipeline;Za(!!re);var Ce=C.uniformBufferBindings,Se=C.storageBufferBindings,ze=C.samplerBindings,Rt=C.storageTextureBindings;V.numUniformBuffers=(Ce==null?void 0:Ce.length)||0;var Jt=[[],[],[],[]],Nn=0;if(Ce&&Ce.length)for(var sr=0;sr<Ce.length;sr++){var Ar=C.uniformBufferBindings[sr],mr=Ar.binding,Vr=Ar.size,ci=Ar.offset,Io=Ar.buffer,to={buffer:eg(Io),offset:ci!=null?ci:0,size:Vr};Jt[0].push({binding:mr!=null?mr:Nn++,resource:to})}if(ze&&ze.length){Nn=0;for(var sr=0;sr<ze.length;sr++){var Qr=(0,Oo.pi)((0,Oo.pi)({},ze[sr]),y_),mr=C.samplerBindings[sr],no=mr.texture!==null?mr.texture:V.device.getFallbackTexture(Qr);Qr.dimension=no.dimension,Qr.formatKind=zS(no.format);var ja=no.gpuTextureView;if(Jt[1].push({binding:(I=mr.textureBinding)!==null&&I!==void 0?I:Nn++,resource:ja}),mr.samplerBinding!==-1){var Eo=mr.sampler!==null?mr.sampler:V.device.getFallbackSampler(Qr),ra=N3(Eo);Jt[1].push({binding:(B=mr.samplerBinding)!==null&&B!==void 0?B:Nn++,resource:ra})}}}if(Se&&Se.length){Nn=0;for(var sr=0;sr<Se.length;sr++){var Ia=C.storageBufferBindings[sr],mr=Ia.binding,Vr=Ia.size,ci=Ia.offset,Io=Ia.buffer,to={buffer:eg(Io),offset:ci!=null?ci:0,size:Vr};Jt[2].push({binding:mr!=null?mr:Nn++,resource:to})}}if(Rt&&Rt.length){Nn=0;for(var sr=0;sr<Rt.length;sr++){var Bs=C.storageTextureBindings[sr],mr=Bs.binding,no=Bs.texture,ja=no.gpuTextureView;Jt[3].push({binding:mr!=null?mr:Nn++,resource:ja})}}var dd=Jt.findLastIndex(function(Kd){return!!Kd.length});return V.gpuBindGroup=Jt.map(function(Kd,ms){return ms<=dd&&V.device.device.createBindGroup({layout:re.getBindGroupLayout(ms),entries:Kd})}),V}return o}(R0),vw=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;I.type=Fs.Buffer;var B=C.usage,V=C.viewOrSize,re=!!(B&ul.MAP_READ);I.usage=L3(B),re&&(I.usage=ul.MAP_READ|ul.COPY_DST);var Ce=!(0,$m.Z)(V);if(I.view=(0,$m.Z)(V)?null:V,I.size=(0,$m.Z)(V)?F1(V,4):F1(V.byteLength,4),(0,$m.Z)(V))I.gpuBuffer=I.device.device.createBuffer({usage:I.usage,size:I.size,mappedAtCreation:re?Ce:!1});else{I.gpuBuffer=I.device.device.createBuffer({usage:I.usage,size:I.size,mappedAtCreation:!0});var Se=V&&V.constructor||Float32Array;new Se(I.gpuBuffer.getMappedRange()).set(V),I.gpuBuffer.unmap()}return I}return o.prototype.setSubData=function(f,m,w,C){w===void 0&&(w=0),C===void 0&&(C=0);var I=this.gpuBuffer;C=C||m.byteLength,C=Math.min(C,this.size-f);var B=m.byteOffset+w,V=B+C,re=C+3&-4;if(re!==C){var Ce=new Uint8Array(m.buffer.slice(B,V));m=new Uint8Array(re),m.set(Ce),w=0,B=0,V=re,C=re}for(var Se=1024*1024*15,ze=0;V-(B+ze)>Se;)this.device.device.queue.writeBuffer(I,f+ze,m.buffer,B+ze,Se),ze+=Se;this.device.device.queue.writeBuffer(I,f+ze,m.buffer,B+ze,C-ze)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuBuffer.destroy()},o}(R0),ng=function(){function a(){this.gpuComputePassEncoder=null}return a.prototype.dispatchWorkgroups=function(o,f,m){this.gpuComputePassEncoder.dispatchWorkgroups(o,f,m)},a.prototype.dispatchWorkgroupsIndirect=function(o,f){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(o.gpuBuffer,f)},a.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},a.prototype.beginComputePass=function(o){Za(this.gpuComputePassEncoder===null),this.frameCommandEncoder=o,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},a.prototype.setPipeline=function(o){var f=o,m=qm(f.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(m)},a.prototype.setBindings=function(o){var f=this,m=o;m.gpuBindGroup.forEach(function(w,C){w&&f.gpuComputePassEncoder.setBindGroup(C,m.gpuBindGroup[C])})},a.prototype.pushDebugGroup=function(o){this.gpuComputePassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuComputePassEncoder.insertDebugMarker(o)},a}(),mw=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;I.type=Fs.ComputePipeline,I.gpuComputePipeline=null,I.descriptor=C;var B=C.program,V=B.computeStage;if(V===null)return I;var re={layout:"auto",compute:(0,Oo.pi)({},V)};return I.gpuComputePipeline=I.device.device.createComputePipeline(re),I.name!==void 0&&(I.gpuComputePipeline.label=I.name),I}return o.prototype.getBindGroupLayout=function(f){return this.gpuComputePipeline.getBindGroupLayout(f)},o}(R0),j3=function(a){(0,Oo.ZT)(o,a);function o(f){var m,w,C,I,B=f.id,V=f.device,re=f.descriptor,Ce=a.call(this,{id:B,device:V})||this;Ce.type=Fs.InputLayout;var Se=[];try{for(var ze=(0,Oo.XA)(re.vertexBufferDescriptors),Rt=ze.next();!Rt.done;Rt=ze.next()){var Jt=Rt.value,Nn=Jt.arrayStride,sr=Jt.stepMode,Ar=Jt.attributes;Se.push({arrayStride:Nn,stepMode:Fu(sr),attributes:[]});try{for(var mr=(C=void 0,(0,Oo.XA)(Ar)),Vr=mr.next();!Vr.done;Vr=mr.next()){var ci=Vr.value,Io=ci.shaderLocation,to=ci.format,Qr=ci.offset;Se[Se.length-1].attributes.push({shaderLocation:Io,format:tb(to),offset:Qr})}}catch(no){C={error:no}}finally{try{Vr&&!Vr.done&&(I=mr.return)&&I.call(mr)}finally{if(C)throw C.error}}}}catch(no){m={error:no}}finally{try{Rt&&!Rt.done&&(w=ze.return)&&w.call(ze)}finally{if(m)throw m.error}}return Ce.indexFormat=O_(re.indexBufferFormat),Ce.buffers=Se,Ce}return o}(R0),f2=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;return I.type=Fs.Program,I.vertexStage=null,I.fragmentStage=null,I.computeStage=null,I.descriptor=C,C.vertex&&(I.vertexStage=I.createShaderStage(C.vertex,"vertex")),C.fragment&&(I.fragmentStage=I.createShaderStage(C.fragment,"fragment")),C.compute&&(I.computeStage=I.createShaderStage(C.compute,"compute")),I}return o.prototype.setUniformsLegacy=function(f){},o.prototype.createShaderStage=function(f,m){var w,C,I=f.glsl,B=f.wgsl,V=f.entryPoint,re=f.postprocess,Ce=!1,Se=B;if(!Se)try{Se=this.device.glsl_compile(I,m,Ce)}catch(Ar){throw console.error(Ar,I),new Error("whoops")}var ze=function(Ar){if(!Se.includes(Ar))return"continue";Se=Se.replace("var T_".concat(Ar,": texture_2d<f32>;"),"var T_".concat(Ar,": texture_depth_2d;")),Se=Se.replace(new RegExp("textureSample\\(T_".concat(Ar,"(.*)\\);$"),"gm"),function(mr,Vr){return"vec4<f32>(textureSample(T_".concat(Ar).concat(Vr,"), 0.0, 0.0, 0.0);")})};try{for(var Rt=(0,Oo.XA)(["u_TextureFramebufferDepth"]),Jt=Rt.next();!Jt.done;Jt=Rt.next()){var Nn=Jt.value;ze(Nn)}}catch(Ar){w={error:Ar}}finally{try{Jt&&!Jt.done&&(C=Rt.return)&&C.call(Rt)}finally{if(w)throw w.error}}re&&(Se=re(Se));var sr=this.device.device.createShaderModule({code:Se});return{module:sr,entryPoint:V||"main"}},o}(R0),V3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;I.type=Fs.QueryPool;var B=C.elemCount,V=C.type;return I.querySet=I.device.device.createQuerySet({type:F3(V),count:B}),I.resolveBuffer=I.device.device.createBuffer({size:B*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),I.cpuBuffer=I.device.device.createBuffer({size:B*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),I.results=null,I}return o.prototype.queryResultOcclusion=function(f){return this.results===null?null:this.results[f]!==BigInt(0)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},o}(R0),rg=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this,{id:m,device:w})||this;return C.type=Fs.Readback,C}return o.prototype.readTexture=function(f,m,w,C,I,B,V,re){return V===void 0&&(V=0),(0,Oo.mG)(this,void 0,void 0,function(){var Ce,Se,ze,Rt,Jt,Nn,sr,Ar;return(0,Oo.Jh)(this,function(mr){return Ce=f,Se=0,ze=nb(Ce.gpuTextureformat),Rt=Math.ceil(C/ze.width)*ze.length,Jt=Math.ceil(Rt/256)*256,Nn=Jt*I,sr=this.device.createBuffer({usage:ul.STORAGE|ul.MAP_READ|ul.COPY_DST,hint:$l.STATIC,viewOrSize:Nn}),Ar=this.device.device.createCommandEncoder(),Ar.copyTextureToBuffer({texture:Ce.gpuTexture,mipLevel:0,origin:{x:m,y:w,z:Math.max(Se,0)}},{buffer:sr.gpuBuffer,offset:0,bytesPerRow:Jt},{width:C,height:I,depthOrArrayLayers:1}),this.device.device.queue.submit([Ar.finish()]),[2,this.readBuffer(sr,0,B.byteLength===Nn?B:null,V,Nn,Ce.format,!0,!1,Rt,Jt,I)]})})},o.prototype.readTextureSync=function(f,m,w,C,I,B,V,re){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},o.prototype.readBuffer=function(f,m,w,C,I,B,V,re,Ce,Se,ze){var Rt=this;m===void 0&&(m=0),w===void 0&&(w=null),I===void 0&&(I=0),B===void 0&&(B=nr.U8_RGB),V===void 0&&(V=!1),Ce===void 0&&(Ce=0),Se===void 0&&(Se=0),ze===void 0&&(ze=0);var Jt=f,Nn=I||Jt.size,sr=w||Jt.view,Ar=sr&&sr.constructor&&sr.constructor.BYTES_PER_ELEMENT||N1(B),mr=Jt;if(!(Jt.usage&ul.MAP_READ&&Jt.usage&ul.COPY_DST)){var Vr=this.device.device.createCommandEncoder();mr=this.device.createBuffer({usage:ul.STORAGE|ul.MAP_READ|ul.COPY_DST,hint:$l.STATIC,viewOrSize:Nn}),Vr.copyBufferToBuffer(Jt.gpuBuffer,m,mr.gpuBuffer,0,Nn),this.device.device.queue.submit([Vr.finish()])}return new Promise(function(ci,Io){mr.gpuBuffer.mapAsync(i2.READ,m,Nn).then(function(){var to=mr.gpuBuffer.getMappedRange(m,Nn),Qr=sr;if(V)Qr===null?Qr=U3(B,Nn,!0,to):Qr=U3(B,Qr.buffer,void 0,to);else if(Qr===null)switch(Ar){case 1:Qr=new Uint8Array(Nn),Qr.set(new Uint8Array(to));break;case 2:Qr=Rt.getHalfFloatAsFloatRGBAArrayBuffer(Nn/2,to);break;case 4:Qr=new Float32Array(Nn/4),Qr.set(new Float32Array(to));break}else switch(Ar){case 1:Qr=new Uint8Array(Qr.buffer),Qr.set(new Uint8Array(to));break;case 2:Qr=Rt.getHalfFloatAsFloatRGBAArrayBuffer(Nn/2,to,sr);break;case 4:var no=sr&&sr.constructor||Float32Array;Qr=new no(Qr.buffer),Qr.set(new no(to));break}if(Ce!==Se){Ar===1&&!V&&(Ce*=2,Se*=2);for(var ja=new Uint8Array(Qr.buffer),Eo=Ce,ra=0,Ia=1;Ia<ze;++Ia){ra=Ia*Se;for(var Bs=0;Bs<Ce;++Bs)ja[Eo++]=ja[ra++]}Ar!==0&&!V?Qr=new Float32Array(ja.buffer,0,Eo/4):Qr=new Uint8Array(ja.buffer,0,Eo)}mr.gpuBuffer.unmap(),ci(Qr)},function(to){return Io(to)})})},o.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(f,m,w){w||(w=new Float32Array(f));for(var C=new Uint16Array(m);f--;)w[f]=c2(C[f]);return w},o}(R0),rb=function(){function a(o){this.device=o,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return a.prototype.getEncoder=function(){var o;return((o=this.renderBundle)===null||o===void 0?void 0:o.renderBundleEncoder)||this.gpuRenderPassEncoder},a.prototype.getTextureView=function(o,f){return Za(f<o.mipLevelCount),o.mipLevelCount===1?o.gpuTextureView:o.gpuTexture.createView({baseMipLevel:f,mipLevelCount:1})},a.prototype.setRenderPassDescriptor=function(o){var f,m,w,C,I,B;this.descriptor=o,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var V=o.colorAttachment.length;this.gfxColorAttachment.length=V,this.gfxColorResolveTo.length=V;for(var re=0;re<o.colorAttachment.length;re++){var Ce=o.colorAttachment[re],Se=o.colorResolveTo[re];if(Ce===null&&Se!==null&&(Ce=Se,Se=null),this.gfxColorAttachment[re]=Ce,this.gfxColorResolveTo[re]=Se,this.gfxColorAttachmentLevel[re]=((f=o.colorAttachmentLevel)===null||f===void 0?void 0:f[re])||0,this.gfxColorResolveToLevel[re]=((m=o.colorResolveToLevel)===null||m===void 0?void 0:m[re])||0,Ce!==null){this.gpuColorAttachments[re]===void 0&&(this.gpuColorAttachments[re]={});var ze=this.gpuColorAttachments[re];ze.view=this.getTextureView(Ce,((w=this.gfxColorAttachmentLevel)===null||w===void 0?void 0:w[re])||0);var Rt=(I=(C=o.colorClearColor)===null||C===void 0?void 0:C[re])!==null&&I!==void 0?I:"load";Rt==="load"?ze.loadOp="load":(ze.loadOp="clear",ze.clearValue=Rt),ze.storeOp=!((B=o.colorStore)===null||B===void 0)&&B[re]?"store":"discard",ze.resolveTarget=void 0,Se!==null&&(Ce.sampleCount>1?ze.resolveTarget=this.getTextureView(Se,this.gfxColorResolveToLevel[re]):ze.storeOp="store")}else{this.gpuColorAttachments.length=re,this.gfxColorAttachment.length=re,this.gfxColorResolveTo.length=re;break}}if(this.gfxDepthStencilAttachment=o.depthStencilAttachment,this.gfxDepthStencilResolveTo=o.depthStencilResolveTo,o.depthStencilAttachment){var Jt=o.depthStencilAttachment,ze=this.gpuDepthStencilAttachment;ze.view=Jt.gpuTextureView;var Nn=!!(ty(Jt.format)&_o.Depth);Nn?(o.depthClearValue==="load"?ze.depthLoadOp="load":(ze.depthLoadOp="clear",ze.depthClearValue=o.depthClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?ze.depthStoreOp="store":ze.depthStoreOp="discard"):(ze.depthLoadOp=void 0,ze.depthStoreOp=void 0);var sr=!!(ty(Jt.format)&_o.Stencil);sr?(o.stencilClearValue==="load"?ze.stencilLoadOp="load":(ze.stencilLoadOp="clear",ze.stencilClearValue=o.stencilClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?ze.stencilStoreOp="store":ze.stencilStoreOp="discard"):(ze.stencilLoadOp=void 0,ze.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,Gp.Z)(o.occlusionQueryPool)?void 0:uw(o.occlusionQueryPool)},a.prototype.beginRenderPass=function(o,f){Za(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(f),this.frameCommandEncoder=o,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},a.prototype.flipY=function(o,f){var m=this.device.swapChainHeight;return m-o-f},a.prototype.setViewport=function(o,f,m,w,C,I){C===void 0&&(C=0),I===void 0&&(I=1),this.gpuRenderPassEncoder.setViewport(o,this.flipY(f,w),m,w,C,I)},a.prototype.setScissorRect=function(o,f,m,w){this.gpuRenderPassEncoder.setScissorRect(o,this.flipY(f,w),m,w)},a.prototype.setPipeline=function(o){var f=o,m=qm(f.gpuRenderPipeline);this.getEncoder().setPipeline(m)},a.prototype.setVertexInput=function(o,f,m){if(o!==null){var w=this.getEncoder(),C=o;m!==null&&w.setIndexBuffer(eg(m.buffer),qm(C.indexFormat),m.offset);for(var I=0;I<f.length;I++){var B=f[I];B!==null&&w.setVertexBuffer(I,eg(B.buffer),B.offset)}}},a.prototype.setBindings=function(o){var f=o,m=this.getEncoder();f.gpuBindGroup.forEach(function(w,C){w&&m.setBindGroup(C,f.gpuBindGroup[C])})},a.prototype.setStencilReference=function(o){this.gpuRenderPassEncoder.setStencilReference(o)},a.prototype.draw=function(o,f,m,w){this.getEncoder().draw(o,f,m,w)},a.prototype.drawIndexed=function(o,f,m,w,C){this.getEncoder().drawIndexed(o,f,m,w,C)},a.prototype.drawIndirect=function(o,f){this.getEncoder().drawIndirect(eg(o),f)},a.prototype.drawIndexedIndirect=function(o,f){this.getEncoder().drawIndexedIndirect(eg(o),f)},a.prototype.beginOcclusionQuery=function(o){this.gpuRenderPassEncoder.beginOcclusionQuery(o)},a.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},a.prototype.pushDebugGroup=function(o){this.gpuRenderPassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuRenderPassEncoder.insertDebugMarker(o)},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle.finish()},a.prototype.executeBundles=function(o){this.gpuRenderPassEncoder.executeBundles(o.map(function(f){return f.renderBundle}))},a.prototype.finish=function(){var o;(o=this.gpuRenderPassEncoder)===null||o===void 0||o.end(),this.gpuRenderPassEncoder=null;for(var f=0;f<this.gfxColorAttachment.length;f++){var m=this.gfxColorAttachment[f],w=this.gfxColorResolveTo[f];m!==null&&w!==null&&m.sampleCount===1&&this.copyAttachment(w,this.gfxColorAttachmentLevel[f],m,this.gfxColorResolveToLevel[f])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},a.prototype.copyAttachment=function(o,f,m,w){Za(m.sampleCount===1);var C={texture:m.gpuTexture,mipLevel:w},I={texture:o.gpuTexture,mipLevel:f};Za(m.width>>>w===o.width>>>f),Za(m.height>>>w===o.height>>>f),Za(!!(m.usage&ef.COPY_SRC)),Za(!!(o.usage&ef.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(C,I,[o.width,o.height,1])},a}(),H3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=a.call(this,{id:m,device:w})||this;return I.type=Fs.RenderPipeline,I.isCreatingAsync=!1,I.gpuRenderPipeline=null,I.descriptor=C,I.device.createRenderPipelineInternal(I,!1),I}return o.prototype.getBindGroupLayout=function(f){return this.gpuRenderPipeline.getBindGroupLayout(f)},o}(R0),h2=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I,B,V=a.call(this,{id:m,device:w})||this;V.type=Fs.Sampler;var re=C.lodMinClamp,Ce=C.mipmapFilter===Tu.NO_MIP?C.lodMinClamp:C.lodMaxClamp,Se=(I=C.maxAnisotropy)!==null&&I!==void 0?I:1;return Se>1&&Za(C.minFilter===Lu.BILINEAR&&C.magFilter===Lu.BILINEAR&&C.mipmapFilter===Tu.LINEAR),V.gpuSampler=V.device.device.createSampler({addressModeU:a2(C.addressModeU),addressModeV:a2(C.addressModeV),addressModeW:a2((B=C.addressModeW)!==null&&B!==void 0?B:C.addressModeU),lodMinClamp:re,lodMaxClamp:Ce,minFilter:s2(C.minFilter),magFilter:s2(C.magFilter),mipmapFilter:D3(C.mipmapFilter),compare:C.compareFunction!==void 0?C_(C.compareFunction):void 0,maxAnisotropy:Se}),V}return o}(R0),mv=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,I=f.skipCreate,B=f.sampleCount,V=a.call(this,{id:m,device:w})||this;V.type=Fs.Texture,V.flipY=!1;var re=C.format,Ce=C.dimension,Se=C.width,ze=C.height,Rt=C.depthOrArrayLayers,Jt=C.mipLevelCount,Nn=C.usage,sr=C.pixelStore;return V.flipY=!!(sr!=null&&sr.unpackFlipY),V.device.createTextureShared({format:re,dimension:Ce!=null?Ce:qa.TEXTURE_2D,width:Se,height:ze,depthOrArrayLayers:Rt!=null?Rt:1,mipLevelCount:Jt!=null?Jt:1,usage:Nn,sampleCount:B!=null?B:1},V,I),V}return o.prototype.textureFromImageBitmapOrCanvas=function(f,m,w){for(var C=m[0].width,I=m[0].height,B={size:{width:C,height:I,depthOrArrayLayers:w},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},V=f.createTexture(B),re=0;re<m.length;re++)f.queue.copyExternalImageToTexture({source:m[re],flipY:this.flipY},{texture:V,origin:[0,0,re]},[C,I]);return[V,C,I]},o.prototype.isImageBitmapOrCanvases=function(f){var m=f[0];return m instanceof ImageBitmap||m instanceof HTMLCanvasElement||m instanceof OffscreenCanvas},o.prototype.isVideo=function(f){var m=f[0];return m instanceof HTMLVideoElement},o.prototype.setImageData=function(f,m){var w,C=this,I=this.device.device,B,V,re;if(this.isImageBitmapOrCanvases(f))w=(0,Oo.CR)(this.textureFromImageBitmapOrCanvas(I,f,this.depthOrArrayLayers),3),B=w[0],V=w[1],re=w[2];else if(this.isVideo(f))B=I.importExternalTexture({source:f[0]});else{var Ce=nb(this.gpuTextureformat),Se=Math.ceil(this.width/Ce.width)*Ce.length;f.forEach(function(ze){I.queue.writeTexture({texture:C.gpuTexture},ze,{bytesPerRow:Se},{width:C.width,height:C.height})})}this.width=V,this.height=re,B&&(this.gpuTexture=B),this.gpuTextureView=this.gpuTexture.createView({dimension:I3(this.dimension)})},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuTexture.destroy()},o}(R0),d2=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this,{id:m,device:w})||this;return C.type=Fs.RenderBundle,C.renderBundleEncoder=C.device.device.createRenderBundleEncoder({colorFormats:[C.device.swapChainFormat]}),C}return o.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},o}(R0),iu=function(){function a(o,f,m,w,C,I){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=ef.RENDER_ATTACHMENT|ef.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=C0.UPPER_LEFT,this.clipSpaceNearZ=ey.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=f,this.canvas=m,this.canvasContext=w,this.glsl_compile=C,this.WGSLComposer=I,this.fallbackTexture2D=this.createFallbackTexture(qa.TEXTURE_2D,Vs.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(qa.TEXTURE_2D,Vs.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(qa.TEXTURE_2D_ARRAY,Vs.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(qa.TEXTURE_3D,Vs.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(qa.TEXTURE_CUBE_MAP,Vs.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:Fl.REPEAT,addressModeV:Fl.REPEAT,minFilter:Lu.POINT,magFilter:Lu.POINT,mipmapFilter:Tu.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:Fl.REPEAT,addressModeV:Fl.REPEAT,minFilter:Lu.POINT,magFilter:Lu.POINT,mipmapFilter:Tu.NEAREST,compareFunction:ts.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(B){console.error(B.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return a.prototype.destroy=function(){},a.prototype.configureSwapChain=function(o,f){this.swapChainWidth===o&&this.swapChainHeight===f||(this.swapChainWidth=o,this.swapChainHeight=f)},a.prototype.getOnscreenTexture=function(){var o=this.canvasContext.getCurrentTexture(),f=o.createView(),m=new mv({id:0,device:this,descriptor:{format:nr.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:qa.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return m.depthOrArrayLayers=1,m.sampleCount=1,m.gpuTexture=o,m.gpuTextureView=f,m.name="Onscreen",this.setResourceName(m,"Onscreen Texture"),m},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.canvas},a.prototype.beginFrame=function(){Za(this.frameCommandEncoderPool.length===0)},a.prototype.endFrame=function(){Za(this.frameCommandEncoderPool.every(function(o){return o!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(o){return o.finish()})),this.frameCommandEncoderPool=[]},a.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},a.prototype.createBuffer=function(o){return new vw({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new mv({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new h2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){var f=new mv({id:this.getNextUniqueId(),device:this,descriptor:(0,Oo.pi)((0,Oo.pi)({},o),{dimension:qa.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:gl.RENDER_TARGET}),sampleCount:o.sampleCount});return f.depthOrArrayLayers=1,f.type=Fs.RenderTarget,f},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,w=f.width,C=f.height,I=f.depthOrArrayLayers,B=f.sampleCount,V=f.mipLevelCount,re=f.gpuTexture,Ce=f.gpuTextureView,Se=f.usage;Za(!!(Se&ef.RENDER_ATTACHMENT));var ze=new mv({id:this.getNextUniqueId(),device:this,descriptor:{format:m,width:w,height:C,depthOrArrayLayers:I,dimension:qa.TEXTURE_2D,mipLevelCount:V,usage:Se},skipCreate:!0});return ze.depthOrArrayLayers=I,ze.sampleCount=B,ze.gpuTexture=re,ze.gpuTextureView=Ce,ze},a.prototype.createProgram=function(o){var f,m;return!((f=o.vertex)===null||f===void 0)&&f.glsl&&(o.vertex.glsl=$v(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((m=o.fragment)===null||m===void 0)&&m.glsl&&(o.fragment.glsl=$v(this.queryVendorInfo(),"frag",o.fragment.glsl)),new f2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createProgramSimple=function(o){return new f2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTextureShared=function(o,f,m){var w={width:o.width,height:o.height,depthOrArrayLayers:o.depthOrArrayLayers},C=o.mipLevelCount,I=o2(o.format),B=P3(o.dimension),V=R3(o.usage);if(f.gpuTextureformat=I,f.dimension=o.dimension,f.format=o.format,f.width=o.width,f.height=o.height,f.depthOrArrayLayers=o.depthOrArrayLayers,f.mipLevelCount=C,f.usage=V,f.sampleCount=o.sampleCount,!m){var re=this.device.createTexture({size:w,mipLevelCount:C,format:I,dimension:B,sampleCount:o.sampleCount,usage:V}),Ce=re.createView();f.gpuTexture=re,f.gpuTextureView=Ce}},a.prototype.getFallbackSampler=function(o){var f=o.formatKind;return f===Vs.Depth&&o.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},a.prototype.getFallbackTexture=function(o){var f=o.dimension,m=o.formatKind;if(f===qa.TEXTURE_2D)return m===Vs.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===qa.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===qa.TEXTURE_3D)return this.fallbackTexture3D;if(f===qa.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.createFallbackTexture=function(o,f){var m=o===qa.TEXTURE_CUBE_MAP?6:1,w=f===Vs.Float?nr.U8_RGBA_NORM:nr.D24;return this.createTexture({dimension:o,format:w,usage:gl.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1})},a.prototype.createBindings=function(o){return new XI({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new j3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePipeline=function(o){return new mw({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new H3({id:this.getNextUniqueId(),device:this,descriptor:(0,Oo.pi)({},o)})},a.prototype.createQueryPool=function(o,f){return new V3({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.createRenderPipelineInternal=function(o,f){var m;if(o.gpuRenderPipeline===null){var w=o.descriptor,C=w.program,I=C.vertexStage,B=C.fragmentStage;if(!(I===null||B===null)){var V=w.megaStateDescriptor||{},re=V.stencilBack,Ce=V.stencilFront,Se=(0,Oo._T)(V,["stencilBack","stencilFront"]),ze=Yv(M0);w.megaStateDescriptor=(0,Oo.pi)((0,Oo.pi)((0,Oo.pi)({},ze),{stencilBack:(0,Oo.pi)((0,Oo.pi)({},ze.stencilBack),re),stencilFront:(0,Oo.pi)((0,Oo.pi)({},ze.stencilFront),Ce)}),Se);var Rt=w.megaStateDescriptor.attachmentsState[0];w.colorAttachmentFormats.forEach(function(ci,Io){w.megaStateDescriptor.attachmentsState[Io]||(w.megaStateDescriptor.attachmentsState[Io]=zx(void 0,Rt))});var Jt=k3((m=w.topology)!==null&&m!==void 0?m:Du.TRIANGLES,w.megaStateDescriptor),Nn=u2(w.colorAttachmentFormats,w.megaStateDescriptor),sr=dw(w.depthStencilAttachmentFormat,w.megaStateDescriptor),Ar=void 0;w.inputLayout!==null&&(Ar=w.inputLayout.buffers);var mr=w.sampleCount,Vr={layout:"auto",vertex:(0,Oo.pi)((0,Oo.pi)({},I),{buffers:Ar}),primitive:Jt,depthStencil:sr,multisample:{count:mr},fragment:(0,Oo.pi)((0,Oo.pi)({},B),{targets:Nn})};o.gpuRenderPipeline=this.device.createRenderPipeline(Vr)}}},a.prototype.createReadback=function(){return new rg({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderBundle=function(){return new d2({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderPass=function(o){var f=this.renderPassPool.pop();f===void 0&&(f=new rb(this));var m=this.frameCommandEncoderPool.pop();return m===void 0&&(m=this.device.createCommandEncoder()),f.beginRenderPass(m,o),f},a.prototype.createComputePass=function(){var o=this.computePassPool.pop();o===void 0&&(o=new ng);var f=this.frameCommandEncoderPool.pop();return f===void 0&&(f=this.device.createCommandEncoder()),o.beginComputePass(f),o},a.prototype.submitPass=function(o){var f=o;f instanceof rb?(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.renderPassPool.push(f)):f instanceof ng&&(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.computePassPool.push(f))},a.prototype.copySubTexture2D=function(o,f,m,w,C,I,B){var V=this.device.createCommandEncoder(),re=o,Ce=w,Se={texture:Ce.gpuTexture,origin:[C,I,0],mipLevel:0,aspect:"all"},ze={texture:re.gpuTexture,origin:[f,m,0],mipLevel:0,aspect:"all"};Za(!!(Ce.usage&ef.COPY_SRC)),Za(!!(re.usage&ef.COPY_DST)),V.copyTextureToTexture(Se,ze,[Ce.width,Ce.height,B||1]),this.device.queue.submit([V.finish()])},a.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},a.prototype.queryTextureFormatSupported=function(o,f,m){if(pw(o)){if(!this.featureTextureCompressionBC)return!1;var w=ZI(o);return f%w!==0||m%w!==0?!1:this.featureTextureCompressionBC}switch(o){case nr.U16_RGBA_NORM:return!1;case nr.F32_RGBA:return!1}return!0},a.prototype.queryPlatformAvailable=function(){return!0},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){var f=o;return f.descriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Fs.Buffer){var m=o;m.gpuBuffer.label=f}else if(o.type===Fs.Texture){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Fs.RenderTarget){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Fs.Sampler){var m=o;m.gpuSampler.label=f}else if(o.type===Fs.RenderPipeline){var m=o;m.gpuRenderPipeline!==null&&(m.gpuRenderPipeline.label=f)}},a.prototype.setResourceLeakCheck=function(o,f){},a.prototype.checkForLeaks=function(){},a.prototype.programPatched=function(o){},a.prototype.pipelineQueryReady=function(o){var f=o;return f.gpuRenderPipeline!==null},a.prototype.pipelineForceReady=function(o){var f=o;this.createRenderPipelineInternal(f,!1)},a}(),YI=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,Oo.mG)(this,void 0,void 0,function(){var f,m,w,C,I,B,V,re;return(0,Oo.Jh)(this,function(Ce){switch(Ce.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];f=null,Ce.label=1;case 1:return Ce.trys.push([1,3,,4]),m=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:m})];case 2:return f=Ce.sent(),[3,4];case 3:return w=Ce.sent(),console.log(w),[3,4];case 4:return f===null?[2,null]:(C=["depth32float-stencil8","texture-compression-bc","float32-filterable"],I=C.filter(function(Se){return f.features.has(Se)}),[4,f.requestDevice({requiredFeatures:I})]);case 5:if(B=Ce.sent(),B&&(V=this.pluginOptions.onContextLost,B.lost.then(function(){V&&V()})),B===null)return[2,null];if(re=o.getContext("webgpu"),!re)return[2,null];Ce.label=6;case 6:return Ce.trys.push([6,8,,9]),[4,lw(this.pluginOptions.shaderCompilerPath)];case 7:return Ce.sent(),[3,9];case 8:return Ce.sent(),[3,9];case 9:return[2,new iu(f,B,o,re,HI,eb&&new eb)]}})})},a}(),W3=Object.defineProperty,G3=Object.defineProperties,xo=Object.getOwnPropertyDescriptors,p2=Object.getOwnPropertySymbols,$I=Object.prototype.hasOwnProperty,Z3=Object.prototype.propertyIsEnumerable,ib=(a,o,f)=>o in a?W3(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,ly=(a,o)=>{for(var f in o||(o={}))$I.call(o,f)&&ib(a,f,o[f]);if(p2)for(var f of p2(o))Z3.call(o,f)&&ib(a,f,o[f]);return a},M_=(a,o)=>G3(a,xo(o)),{isPlainObject:gv,isTypedArray:gw}=Le.lodashUtil,Ua=class{constructor(a,o){this.destroyed=!1,this.uniforms={},this.reGl=a;const{vs:f,fs:m,attributes:w,uniforms:C,primitive:I,count:B,elements:V,depth:re,cull:Ce,instances:Se}=o,ze={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:C0.LOWER_LEFT,clipSpaceNearZ:ey.NEGATIVE_ONE,supportMRT:!1},Rt={};this.options=o,C&&(this.uniforms=this.extractUniforms(C),Object.keys(C).forEach(mr=>{Rt[mr]=a.prop(mr)}));const Jt={};Object.keys(w).forEach(mr=>{Jt[mr]=w[mr].get()});const Nn=(0,we.Vb)($v(ze,"frag",m,null,!1)),sr=(0,we.Vb)($v(ze,"vert",f,null,!1)),Ar={attributes:Jt,frag:Nn,uniforms:Rt,vert:sr,colorMask:a.prop("colorMask"),lineWidth:1,blend:{enable:a.prop("blend.enable"),func:a.prop("blend.func"),equation:a.prop("blend.equation"),color:a.prop("blend.color")},stencil:{enable:a.prop("stencil.enable"),mask:a.prop("stencil.mask"),func:a.prop("stencil.func"),opFront:a.prop("stencil.opFront"),opBack:a.prop("stencil.opBack")},primitive:IS[I===void 0?we.gl.TRIANGLES:I]};Se&&(Ar.instances=Se),B?Ar.count=B:V&&(Ar.elements=V.get()),this.initDepthDrawParams({depth:re},Ar),this.initCullDrawParams({cull:Ce},Ar),this.drawCommand=a(Ar),this.drawParams=Ar}updateAttributesAndElements(a,o){const f={};Object.keys(a).forEach(m=>{f[m]=a[m].get()}),this.drawParams.attributes=f,this.drawParams.elements=o.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(a){const o={};Object.keys(a).forEach(f=>{o[f]=a[f].get()}),this.drawParams.attributes=o,this.drawCommand=this.reGl(this.drawParams)}addUniforms(a){this.uniforms=ly(ly({},this.uniforms),this.extractUniforms(a))}draw(a,o){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const f=ly(ly({},this.uniforms),this.extractUniforms(a.uniforms||{})),m={};Object.keys(f).forEach(w=>{const C=typeof f[w];C==="boolean"||C==="number"||Array.isArray(f[w])||f[w].BYTES_PER_ELEMENT?m[w]=f[w]:m[w]=f[w].get()}),m.blend=o?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(a),m.stencil=this.getStencilDrawParams(a),m.colorMask=this.getColorMaskDrawParams(a,o),this.drawCommand(m)}destroy(){var a,o;(o=(a=this.drawParams)==null?void 0:a.elements)==null||o.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(f=>{f==null||f.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:a},o){a&&(o.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:UO[a.func||we.gl.LESS],range:a.range||[0,1]})}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:w=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:P1[f&&f.srcRGB||we.gl.SRC_ALPHA],srcAlpha:P1[f&&f.srcAlpha||we.gl.SRC_ALPHA],dstRGB:P1[f&&f.dstRGB||we.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:P1[f&&f.dstAlpha||we.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:FS[m&&m.rgb||we.gl.FUNC_ADD],alpha:FS[m&&m.alpha||we.gl.FUNC_ADD]},color:w}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=-1,func:m={cmp:we.gl.ALWAYS,ref:0,mask:-1},opFront:w={fail:we.gl.KEEP,zfail:we.gl.KEEP,zpass:we.gl.KEEP},opBack:C={fail:we.gl.KEEP,zfail:we.gl.KEEP,zpass:we.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:M_(ly({},m),{cmp:jO[m.cmp]}),opFront:{fail:Kr[w.fail],zfail:Kr[w.zfail],zpass:Kr[w.zpass]},opBack:{fail:Kr[C.fail],zfail:Kr[C.zfail],zpass:Kr[C.zpass]}}}getColorMaskDrawParams({stencil:a},o){return a!=null&&a.enable&&a.opFront&&!o?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:a},o){if(a){const{enable:f,face:m=we.gl.BACK}=a;o.cull={enable:!!f,face:VO[m]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||gw(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}gv(o)&&Object.keys(o).forEach(w=>{this.extractUniformsRecursively(w,o[w],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((w,C)=>{Object.keys(w).forEach(I=>{this.extractUniformsRecursively(I,w[I],f,`${m&&m+"."}${a}[${C}]`)})})}},Fc=class{constructor(a,o){this.isDestroy=!1;const{data:f,type:m=we.gl.UNSIGNED_BYTE,width:w,height:C,flipY:I=!1,format:B=we.gl.RGBA,mipmap:V=!1,wrapS:re=we.gl.CLAMP_TO_EDGE,wrapT:Ce=we.gl.CLAMP_TO_EDGE,aniso:Se=0,alignment:ze=1,premultiplyAlpha:Rt=!1,mag:Jt=we.gl.NEAREST,min:Nn=we.gl.NEAREST,colorSpace:sr=we.gl.BROWSER_DEFAULT_WEBGL,x:Ar=0,y:mr=0,copy:Vr=!1}=o;this.width=w,this.height=C;const ci={width:w,height:C,type:Bx[m],format:BO[B],wrapS:NS[re],wrapT:NS[Ce],mag:DS[Jt],min:DS[Nn],alignment:ze,flipY:I,colorSpace:zO[sr],premultiplyAlpha:Rt,aniso:Se,x:Ar,y:mr,copy:Vr};f&&(ci.data=f),typeof V=="number"?ci.mipmap=kO[V]:typeof V=="boolean"&&(ci.mipmap=V),this.texture=a.texture(ci)}get(){return this.texture}update(a={}){this.texture(a)}bind(){this.texture._texture.bind()}resize({width:a,height:o}){this.texture.resize(a,o),this.width=a,this.height=o}getSize(){return[this.width,this.height]}destroy(){var a;this.isDestroy||(a=this.texture)==null||a.destroy(),this.isDestroy=!0}},cl=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),X3=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=a=>new Ua(this.gl,a),this.createAttribute=a=>new Ym(this.gl,a),this.createBuffer=a=>new HO(this.gl,a),this.createElements=a=>new WO(this.gl,a),this.createTexture2D=a=>new Fc(this.gl,a),this.createFramebuffer=a=>new BS(this.gl,a),this.useFramebuffer=(a,o)=>{this.gl({framebuffer:a?a.get():null})(o)},this.useFramebufferAsync=(a,o)=>cl(this,null,function*(){this.gl({framebuffer:a?a.get():null})(o)}),this.clear=a=>{var o;const{color:f,depth:m,stencil:w,framebuffer:C=null}=a,I={color:f,depth:m,stencil:w};I.framebuffer=C===null?C:C.get(),(o=this.gl)==null||o.clear(I)},this.viewport=({x:a,y:o,width:f,height:m})=>{this.gl._gl.viewport(a,o,f,m),this.width=f,this.height=m,this.gl._refresh()},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:w,height:C}=a,I={x:f,y:m,width:w,height:C};return o&&(I.framebuffer=o.get()),this.gl.read(I)},this.readPixelsAsync=a=>cl(this,null,function*(){return this.readPixels(a)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var a,o,f;this.canvas=null,(f=(o=(a=this.gl)==null?void 0:a._gl)==null?void 0:o.getExtension("WEBGL_lose_context"))==null||f.loseContext(),this.gl.destroy(),this.gl=null}}init(a,o,f){return cl(this,null,function*(){this.canvas=a,f?this.gl=f:this.gl=yield new Promise((m,w)=>{FO()({canvas:this.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,stencil:o.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(C,I)=>{(C||!I)&&w(C),m(I)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const a=this.getGLContext();a.disable(a.CULL_FACE)}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},Jv=class{constructor(a,o){const{buffer:f,offset:m,stride:w,normalized:C,size:I,divisor:B,shaderLocation:V}=o;this.buffer=f,this.attribute={shaderLocation:V,buffer:f.get(),offset:m||0,stride:w||0,normalized:C||!1,divisor:B||0},I&&(this.attribute.size=I)}get(){return this.buffer}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},ob={[we.gl.FLOAT]:Float32Array,[we.gl.UNSIGNED_BYTE]:Uint8Array,[we.gl.SHORT]:Int16Array,[we.gl.UNSIGNED_SHORT]:Uint16Array,[we.gl.INT]:Int32Array,[we.gl.UNSIGNED_INT]:Uint32Array},ab={[we.gl.POINTS]:Du.POINTS,[we.gl.LINES]:Du.LINES,[we.gl.LINE_LOOP]:Du.LINES,[we.gl.LINE_STRIP]:Du.LINE_STRIP,[we.gl.TRIANGLES]:Du.TRIANGLES,[we.gl.TRIANGLE_FAN]:Du.TRIANGLES,[we.gl.TRIANGLE_STRIP]:Du.TRIANGLE_STRIP},Y3={[1]:nr.F32_R,[2]:nr.F32_RG,[3]:nr.F32_RGB,[4]:nr.F32_RGBA},$3={[we.gl.STATIC_DRAW]:$l.STATIC,[we.gl.DYNAMIC_DRAW]:$l.DYNAMIC,[we.gl.STREAM_DRAW]:$l.DYNAMIC},yw={[we.gl.REPEAT]:Fl.REPEAT,[we.gl.CLAMP_TO_EDGE]:Fl.CLAMP_TO_EDGE,[we.gl.MIRRORED_REPEAT]:Fl.MIRRORED_REPEAT},q3={[we.gl.NEVER]:ts.NEVER,[we.gl.ALWAYS]:ts.ALWAYS,[we.gl.LESS]:ts.LESS,[we.gl.LEQUAL]:ts.LEQUAL,[we.gl.GREATER]:ts.GREATER,[we.gl.GEQUAL]:ts.GEQUAL,[we.gl.EQUAL]:ts.EQUAL,[we.gl.NOTEQUAL]:ts.NOTEQUAL},v2={[we.gl.FRONT]:fd.FRONT,[we.gl.BACK]:fd.BACK},sb={[we.gl.FUNC_ADD]:Jc.ADD,[we.gl.MIN_EXT]:Jc.MIN,[we.gl.MAX_EXT]:Jc.MAX,[we.gl.FUNC_SUBTRACT]:Jc.SUBSTRACT,[we.gl.FUNC_REVERSE_SUBTRACT]:Jc.REVERSE_SUBSTRACT},lb={[we.gl.ZERO]:ds.ZERO,[we.gl.ONE]:ds.ONE,[we.gl.SRC_COLOR]:ds.SRC,[we.gl.ONE_MINUS_SRC_COLOR]:ds.ONE_MINUS_SRC,[we.gl.SRC_ALPHA]:ds.SRC_ALPHA,[we.gl.ONE_MINUS_SRC_ALPHA]:ds.ONE_MINUS_SRC_ALPHA,[we.gl.DST_COLOR]:ds.DST,[we.gl.ONE_MINUS_DST_COLOR]:ds.ONE_MINUS_DST,[we.gl.DST_ALPHA]:ds.DST_ALPHA,[we.gl.ONE_MINUS_DST_ALPHA]:ds.ONE_MINUS_DST_ALPHA,[we.gl.CONSTANT_COLOR]:ds.CONST,[we.gl.ONE_MINUS_CONSTANT_COLOR]:ds.ONE_MINUS_CONSTANT,[we.gl.CONSTANT_ALPHA]:ds.CONST,[we.gl.ONE_MINUS_CONSTANT_ALPHA]:ds.ONE_MINUS_CONSTANT,[we.gl.SRC_ALPHA_SATURATE]:ds.SRC_ALPHA_SATURATE},ig={[we.gl.REPLACE]:gu.REPLACE,[we.gl.KEEP]:gu.KEEP,[we.gl.ZERO]:gu.ZERO,[we.gl.INVERT]:gu.INVERT,[we.gl.INCR]:gu.INCREMENT_CLAMP,[we.gl.DECR]:gu.DECREMENT_CLAMP,[we.gl.INCR_WRAP]:gu.INCREMENT_WRAP,[we.gl.DECR_WRAP]:gu.DECREMENT_WRAP},K3={[we.gl.ALWAYS]:ts.ALWAYS,[we.gl.EQUAL]:ts.EQUAL,[we.gl.GEQUAL]:ts.GEQUAL,[we.gl.GREATER]:ts.GREATER,[we.gl.LEQUAL]:ts.LEQUAL,[we.gl.LESS]:ts.LESS,[we.gl.NEVER]:ts.NEVER,[we.gl.NOTEQUAL]:ts.NOTEQUAL},_w={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function R_(a){return Object.prototype.toString.call(a)in _w}function bw(a,o){const f=a.length,m=Math.ceil(f/3),w=f+m,C=new Float32Array(w);for(let I=0;I<w;I+=4)C[I]=a[I/4*3],C[I+1]=a[I/4*3+1],C[I+2]=a[I/4*3+2],C[I+3]=o;return C}var xw=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:w,isUBO:C,label:I}=o;let B;R_(f)?B=f:B=new ob[this.type||we.gl.FLOAT](f),this.type=w,this.size=B.byteLength,this.buffer=a.createBuffer({viewOrSize:B,usage:C?ul.UNIFORM:ul.VERTEX,hint:$3[m||we.gl.STATIC_DRAW]}),I&&a.setResourceName(this.buffer,I)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){let f;R_(a)?f=a:f=new ob[this.type||we.gl.FLOAT](a),this.buffer.setSubData(o,new Uint8Array(f.buffer))}};function el(a,o=0){return a+=o,a+=a<<10,a+=a>>>6,a>>>0}function Ew(a){return a+=a<<3,a^=a>>>11,a+=a<<15,a>>>0}function P_(){return 0}var em=class{constructor(){this.keys=[],this.values=[]}},ub=class{constructor(a,o){this.keyEqualFunc=a,this.keyHashFunc=o,this.buckets=new Map}findBucketIndex(a,o){for(let f=0;f<a.keys.length;f++)if(this.keyEqualFunc(o,a.keys[f]))return f;return-1}findBucket(a){const o=this.keyHashFunc(a);return this.buckets.get(o)}get(a){const o=this.findBucket(a);if(o===void 0)return null;const f=this.findBucketIndex(o,a);return f<0?null:o.values[f]}add(a,o){const f=this.keyHashFunc(a);this.buckets.get(f)===void 0&&this.buckets.set(f,new em);const m=this.buckets.get(f);m.keys.push(a),m.values.push(o)}delete(a){const o=this.findBucket(a);if(o===void 0)return;const f=this.findBucketIndex(o,a);f!==-1&&(o.keys.splice(f,1),o.values.splice(f,1))}clear(){this.buckets.clear()}size(){let a=0;for(const o of this.buckets.values())a+=o.values.length;return a}*values(){for(const a of this.buckets.values())for(let o=a.values.length-1;o>=0;o--)yield a.values[o]}};function Sw(a,o){return a=el(a,o.blendMode),a=el(a,o.blendSrcFactor),a=el(a,o.blendDstFactor),a}function tm(a,o){return a=Sw(a,o.rgbBlendState),a=Sw(a,o.alphaBlendState),a=el(a,o.channelWriteMask),a}function og(a,o){return a=el(a,o.r<<24|o.g<<16|o.b<<8|o.a),a}function qI(a,o){var f,m,w,C,I,B,V,re;for(let Ce=0;Ce<o.attachmentsState.length;Ce++)a=tm(a,o.attachmentsState[Ce]);return a=og(a,o.blendConstant||bp),a=el(a,o.depthCompare),a=el(a,o.depthWrite?1:0),a=el(a,(f=o.stencilFront)==null?void 0:f.compare),a=el(a,(m=o.stencilFront)==null?void 0:m.passOp),a=el(a,(w=o.stencilFront)==null?void 0:w.failOp),a=el(a,(C=o.stencilFront)==null?void 0:C.depthFailOp),a=el(a,(I=o.stencilBack)==null?void 0:I.compare),a=el(a,(B=o.stencilBack)==null?void 0:B.passOp),a=el(a,(V=o.stencilBack)==null?void 0:V.failOp),a=el(a,(re=o.stencilBack)==null?void 0:re.depthFailOp),a=el(a,o.stencilWrite?1:0),a=el(a,o.cullMode),a=el(a,o.frontFace?1:0),a=el(a,o.polygonOffset?1:0),a}function Q3(a){let o=0;o=el(o,a.program.id),a.inputLayout!==null&&(o=el(o,a.inputLayout.id)),o=qI(o,a.megaStateDescriptor);for(let f=0;f<a.colorAttachmentFormats.length;f++)o=el(o,a.colorAttachmentFormats[f]||0);return o=el(o,a.depthStencilAttachmentFormat||0),Ew(o)}function ww(a){let o=0;if(a.samplerBindings)for(let f=0;f<a.samplerBindings.length;f++){const m=a.samplerBindings[f];m!==null&&m.texture!==null&&(o=el(o,m.texture.id))}if(a.uniformBufferBindings)for(let f=0;f<a.uniformBufferBindings.length;f++){const m=a.uniformBufferBindings[f];m!==null&&m.buffer!==null&&(o=el(o,m.buffer.id),o=el(o,m.binding),o=el(o,m.offset),o=el(o,m.size))}if(a.storageBufferBindings)for(let f=0;f<a.storageBufferBindings.length;f++){const m=a.storageBufferBindings[f];m!==null&&m.buffer!==null&&(o=el(o,m.buffer.id),o=el(o,m.binding),o=el(o,m.offset),o=el(o,m.size))}if(a.storageTextureBindings)for(let f=0;f<a.storageTextureBindings.length;f++){const m=a.storageTextureBindings[f];m!==null&&m.texture!==null&&(o=el(o,m.texture.id),o=el(o,m.binding))}return Ew(o)}function KI(a,o){var f,m,w,C;return((f=a.vertex)==null?void 0:f.glsl)===((m=o.vertex)==null?void 0:m.glsl)&&((w=a.fragment)==null?void 0:w.glsl)===((C=o.fragment)==null?void 0:C.glsl)}function J3(a){var o,f;return{vertex:{glsl:(o=a.vertex)==null?void 0:o.glsl},fragment:{glsl:(f=a.fragment)==null?void 0:f.glsl}}}var Tw=class{constructor(a){this.device=a,this.bindingsCache=new ub(Hx,ww),this.renderPipelinesCache=new ub(r3,Q3),this.inputLayoutsCache=new ub(a3,P_),this.programCache=new ub(KI,P_)}createBindings(a){var o;let f=this.bindingsCache.get(a);if(f===null){const m=s3(a);m.uniformBufferBindings=(o=m.uniformBufferBindings)==null?void 0:o.filter(({size:w})=>w&&w>0),f=this.device.createBindings(m),this.bindingsCache.add(m,f)}return f}createRenderPipeline(a){let o=this.renderPipelinesCache.get(a);if(o===null){const f=l3(a);f.colorAttachmentFormats=f.colorAttachmentFormats.filter(m=>m),o=this.device.createRenderPipeline(f),this.renderPipelinesCache.add(f,o)}return o}createInputLayout(a){a.vertexBufferDescriptors=a.vertexBufferDescriptors.filter(f=>!!f);let o=this.inputLayoutsCache.get(a);if(o===null){const f=c3(a);o=this.device.createInputLayout(f),this.inputLayoutsCache.add(f,o)}return o}createProgram(a){let o=this.programCache.get(a);if(o===null){const f=J3(a);o=this.device.createProgram(a),this.programCache.add(f,o)}return o}destroy(){for(const a of this.bindingsCache.values())a.destroy();for(const a of this.renderPipelinesCache.values())a.destroy();for(const a of this.inputLayoutsCache.values())a.destroy();for(const a of this.programCache.values())a.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},Aw=class{constructor(a,o){const{data:f,type:m,count:w=0}=o;let C;R_(f)?C=f:C=new ob[this.type||we.gl.UNSIGNED_INT](f),this.type=m,this.count=w,this.indexBuffer=a.createBuffer({viewOrSize:C,usage:ul.INDEX})}get(){return this.indexBuffer}subData({data:a}){let o;R_(a)?o=a:o=new ob[this.type||we.gl.UNSIGNED_INT](a),this.indexBuffer.setSubData(0,new Uint8Array(o.buffer))}destroy(){this.indexBuffer.destroy()}};function Cw(a){return!!(a&&a.texture)}var Ow=class{constructor(a,o){this.device=a,this.options=o,this.isDestroy=!1;const{wrapS:f=we.gl.CLAMP_TO_EDGE,wrapT:m=we.gl.CLAMP_TO_EDGE,aniso:w,mag:C=we.gl.NEAREST,min:I=we.gl.NEAREST}=o;this.createTexture(o),this.sampler=a.createSampler({addressModeU:yw[f],addressModeV:yw[m],minFilter:I===we.gl.NEAREST?Lu.POINT:Lu.BILINEAR,magFilter:C===we.gl.NEAREST?Lu.POINT:Lu.BILINEAR,mipmapFilter:Tu.NO_MIP,maxAnisotropy:w})}createTexture(a){const{type:o=we.gl.UNSIGNED_BYTE,width:f,height:m,flipY:w=!1,format:C=we.gl.RGBA,alignment:I=1,usage:B=we.v2.SAMPLED,unorm:V=!1,label:re}=a;let{data:Ce}=a;this.width=f,this.height=m;let Se=nr.U8_RGBA_RT;if(o===we.gl.UNSIGNED_BYTE&&C===we.gl.RGBA)Se=V?nr.U8_RGBA_NORM:nr.U8_RGBA_RT;else if(o===we.gl.UNSIGNED_BYTE&&C===we.gl.LUMINANCE)Se=nr.U8_LUMINANCE;else if(o===we.gl.FLOAT&&C===we.gl.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(Ce&&(Ce=bw(Ce,0)),Se=nr.F32_RGBA):Se=nr.F32_RGB;else if(o===we.gl.FLOAT&&C===we.gl.RGBA)Se=nr.F32_RGBA;else if(o===we.gl.FLOAT&&C===we.gl.RED)Se=nr.F32_R;else throw new Error(`create texture error, type: ${o}, format: ${C}`);this.texture=this.device.createTexture({format:Se,width:f,height:m,usage:B===we.v2.SAMPLED?gl.SAMPLED:gl.RENDER_TARGET,pixelStore:{unpackFlipY:w,packAlignment:I},mipLevelCount:1}),re&&this.device.setResourceName(this.texture,re),Ce&&this.texture.setImageData([Ce])}get(){return this.texture}update(a){const{data:o}=a;this.texture.setImageData([o])}bind(){}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&this.destroy(),this.options.width=a,this.options.height=o,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var a;!this.isDestroy&&!this.texture.destroyed&&((a=this.texture)==null||a.destroy()),this.isDestroy=!0}},uy=class{constructor(a,o){this.device=a,this.options=o,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(a=!1){const{width:o,height:f,color:m}=this.options;m&&(Cw(m)?(a&&m.resize({width:o,height:f}),this.colorTexture=m.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=m.width,this.height=m.height):o&&f&&(this.colorTexture=this.device.createTexture({format:nr.U8_RGBA_RT,usage:gl.RENDER_TARGET,width:o,height:f}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=o,this.height=f))}createDepthRenderTarget(a=!1){const{width:o,height:f,depth:m}=this.options;m&&(Cw(m)?(a&&m.resize({width:o,height:f}),this.depthTexture=m.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=m.width,this.height=m.height):o&&f&&(this.depthTexture=this.device.createTexture({format:nr.D24_S8,usage:gl.RENDER_TARGET,width:o,height:f}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=o,this.height=f))}get(){return this.colorRenderTarget}destroy(){var a,o;(a=this.colorRenderTarget)==null||a.destroy(),(o=this.depthRenderTarget)==null||o.destroy()}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=a,this.options.height=o,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},m2=Object.defineProperty,Mw=Object.defineProperties,Sp=Object.getOwnPropertyDescriptors,yl=Object.getOwnPropertySymbols,QI=Object.prototype.hasOwnProperty,JI=Object.prototype.propertyIsEnumerable,Rw=(a,o,f)=>o in a?m2(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,nm=(a,o)=>{for(var f in o||(o={}))QI.call(o,f)&&Rw(a,f,o[f]);if(yl)for(var f of yl(o))JI.call(o,f)&&Rw(a,f,o[f]);return a},I_=(a,o)=>Mw(a,Sp(o)),{isPlainObject:Pw,isTypedArray:g2}=Le.lodashUtil,cb=class{constructor(a,o,f){this.device=a,this.options=o,this.service=f,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:m,fs:w,attributes:C,uniforms:I,count:B,elements:V,diagnosticDerivativeUniformityEnabled:re}=o;this.options=o;const Ce=re?"":this.service.viewportOrigin===C0.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=f.renderCache.createProgram({vertex:{glsl:m},fragment:{glsl:w,postprocess:Jt=>Ce+Jt}}),I&&(this.uniforms=this.extractUniforms(I));const Se=[];let ze=0;Object.keys(C).forEach(Jt=>{const Nn=C[Jt],sr=Nn.get();this.vertexBuffers.push(sr.get());const{offset:Ar=0,stride:mr=0,size:Vr=1,divisor:ci=0,shaderLocation:Io=0}=Nn.attribute;Se.push({arrayStride:mr||Vr*4,stepMode:A0.VERTEX,attributes:[{format:Y3[Vr],shaderLocation:Io,offset:Ar,divisor:ci}]}),ze=sr.size/Vr}),B||(this.options.count=ze),V&&(this.indexBuffer=V.get());const Rt=f.renderCache.createInputLayout({vertexBufferDescriptors:Se,indexBufferFormat:V?nr.U32_R:null,program:this.program});this.inputLayout=Rt,this.pipeline=this.createPipeline(o)}createPipeline(a,o){const{primitive:f=we.gl.TRIANGLES,depth:m,cull:w,blend:C,stencil:I}=a,B=this.initDepthDrawParams({depth:m}),V=!!(B&&B.enable),re=this.initCullDrawParams({cull:w}),Ce=!!(re&&re.enable),Se=this.getBlendDrawParams({blend:C}),ze=!!(Se&&Se.enable),Rt=this.getStencilDrawParams({stencil:I}),Jt=!!(Rt&&Rt.enable);return this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:ab[f],colorAttachmentFormats:[nr.U8_RGBA_RT],depthStencilAttachmentFormat:nr.D24_S8,megaStateDescriptor:{attachmentsState:[o?{channelWriteMask:uc.ALL,rgbBlendState:{blendMode:Jc.ADD,blendSrcFactor:ds.ONE,blendDstFactor:ds.ZERO},alphaBlendState:{blendMode:Jc.ADD,blendSrcFactor:ds.ONE,blendDstFactor:ds.ZERO}}:{channelWriteMask:Jt&&Rt.opFront.zpass===gu.REPLACE?uc.NONE:uc.ALL,rgbBlendState:{blendMode:ze&&Se.equation.rgb||Jc.ADD,blendSrcFactor:ze&&Se.func.srcRGB||ds.SRC_ALPHA,blendDstFactor:ze&&Se.func.dstRGB||ds.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:ze&&Se.equation.alpha||Jc.ADD,blendSrcFactor:ze&&Se.func.srcAlpha||ds.ONE,blendDstFactor:ze&&Se.func.dstAlpha||ds.ONE}}],blendConstant:ze?bp:void 0,depthWrite:V,depthCompare:V&&B.func||ts.LESS,cullMode:Ce&&re.face||fd.NONE,stencilWrite:Jt,stencilFront:{compare:Jt?Rt.func.cmp:ts.ALWAYS,passOp:Rt.opFront.zpass,failOp:Rt.opFront.fail,depthFailOp:Rt.opFront.zfail,mask:Rt.opFront.mask},stencilBack:{compare:Jt?Rt.func.cmp:ts.ALWAYS,passOp:Rt.opBack.zpass,failOp:Rt.opBack.fail,depthFailOp:Rt.opBack.zfail,mask:Rt.opBack.mask}}})}updateAttributesAndElements(){}updateAttributes(){}addUniforms(a){this.uniforms=nm(nm({},this.uniforms),this.extractUniforms(a))}draw(a,o){const f=nm(nm({},this.options),a),{count:m=0,instances:w,elements:C,uniforms:I={},uniformBuffers:B,textures:V}=f;this.uniforms=nm(nm({},this.uniforms),this.extractUniforms(I));const{renderPass:re,currentFramebuffer:Ce,width:Se,height:ze,renderCache:Rt}=this.service;this.pipeline=this.createPipeline(f,o);const Jt=this.service.device,Nn=Jt.swapChainHeight;if(Jt.swapChainHeight=(Ce==null?void 0:Ce.height)||ze,re.setViewport(0,0,(Ce==null?void 0:Ce.width)||Se,(Ce==null?void 0:Ce.height)||ze),Jt.swapChainHeight=Nn,re.setPipeline(this.pipeline),re.setStencilReference(1),re.setVertexInput(this.inputLayout,this.vertexBuffers.map(sr=>({buffer:sr})),C?{buffer:this.indexBuffer,offset:0}:null),B&&(this.bindings=Rt.createBindings({pipeline:this.pipeline,uniformBufferBindings:B.map((sr,Ar)=>{const mr=sr;return{binding:Ar,buffer:mr.get(),size:mr.size}}),samplerBindings:V==null?void 0:V.map(sr=>({texture:sr.texture,sampler:sr.sampler}))})),this.bindings&&(re.setBindings(this.bindings),Object.keys(this.uniforms).forEach(sr=>{const Ar=this.uniforms[sr];Ar instanceof Ow?this.uniforms[sr]=Ar.get():Ar instanceof uy&&(this.uniforms[sr]=Ar.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),C){const sr=C.count;sr===0?re.draw(m,w):re.drawIndexed(sr,w)}else re.draw(m,w)}destroy(){var a,o,f;this.program.destroy(),(a=this.vertexBuffers)==null||a.forEach(m=>m.destroy()),(o=this.indexBuffer)==null||o.destroy(),(f=this.bindings)==null||f.destroy(),this.inputLayout.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:a}){if(a)return{enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:q3[a.func||we.gl.LESS],range:a.range||[0,1]}}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:w=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:lb[f&&f.srcRGB||we.gl.SRC_ALPHA],srcAlpha:lb[f&&f.srcAlpha||we.gl.SRC_ALPHA],dstRGB:lb[f&&f.dstRGB||we.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:lb[f&&f.dstAlpha||we.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:sb[m&&m.rgb||we.gl.FUNC_ADD],alpha:sb[m&&m.alpha||we.gl.FUNC_ADD]},color:w}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=4294967295,func:m={cmp:we.gl.ALWAYS,ref:0,mask:4294967295},opFront:w={fail:we.gl.KEEP,zfail:we.gl.KEEP,zpass:we.gl.KEEP},opBack:C={fail:we.gl.KEEP,zfail:we.gl.KEEP,zpass:we.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:I_(nm({},m),{cmp:K3[m.cmp]}),opFront:{fail:ig[w.fail],zfail:ig[w.zfail],zpass:ig[w.zpass],mask:m.mask},opBack:{fail:ig[C.fail],zfail:ig[C.zfail],zpass:ig[C.zpass],mask:m.mask}}}initCullDrawParams({cull:a}){if(a){const{enable:o,face:f=we.gl.BACK}=a;return{enable:!!o,face:v2[f]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||g2(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}Pw(o)&&Object.keys(o).forEach(w=>{this.extractUniformsRecursively(w,o[w],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((w,C)=>{Object.keys(w).forEach(I=>{this.extractUniformsRecursively(I,w[I],f,`${m&&m+"."}${a}[${C}]`)})})}};function fb(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}var y2=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),{isUndefined:L_}=Le.lodashUtil,Cu=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=a=>new cb(this.device,a,this),this.createAttribute=a=>new Jv(this.device,a),this.createBuffer=a=>new xw(this.device,a),this.createElements=a=>new Aw(this.device,a),this.createTexture2D=a=>new Ow(this.device,a),this.createFramebuffer=a=>new uy(this.device,a),this.useFramebuffer=(a,o)=>{this.currentFramebuffer=a,this.beginFrame(),o(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(a,o)=>y2(this,null,function*(){this.currentFramebuffer=a,this.preRenderPass=this.renderPass,this.beginFrame(),yield o(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=a=>{const{color:o,depth:f,stencil:m,framebuffer:w=null}=a;if(w)w.clearOptions={color:o,depth:f,stencil:m};else{const C=this.queryVerdorInfo();if(C==="WebGL1"){const I=this.getGLContext();L_(m)?L_(f)||(I.clearDepth(f),I.clear(I.DEPTH_BUFFER_BIT)):(I.clearStencil(m),I.clear(I.STENCIL_BUFFER_BIT))}else if(C==="WebGL2"){const I=this.getGLContext();L_(m)?L_(f)||I.clearBufferfv(I.DEPTH,0,[f]):I.clearBufferiv(I.STENCIL,0,[m])}}},this.viewport=({width:a,height:o})=>{this.swapChain.configureSwapChain(a,o),this.createMainColorDepthRT(a,o),this.width=a,this.height=o},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:w,height:C}=a,I=this.device.createReadback(),B=o.colorTexture,V=I.readTextureSync(B,f,this.viewportOrigin===C0.LOWER_LEFT?m:this.height-m,w,C,new Uint8Array(w*C*4));return I.destroy(),V},this.readPixelsAsync=a=>y2(this,null,function*(){const{framebuffer:o,x:f,y:m,width:w,height:C}=a,I=this.device.createReadback(),B=o.colorTexture,V=yield I.readTexture(B,f,this.viewportOrigin===C0.LOWER_LEFT?m:this.height-m,w,C,new Uint8Array(w*C*4));if(this.viewportOrigin!==C0.LOWER_LEFT)for(let re=0;re<V.length;re+=4){const Ce=V[re];V[re]=V[re+2],V[re+2]=Ce}return I.destroy(),V}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var a;this.canvas=null,(a=this.uniformBuffers)==null||a.forEach(o=>{o.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(a,o){return y2(this,null,function*(){const{enableWebGPU:f,shaderCompilerPath:m}=o;this.canvas=a;const C=yield(f?new YI({shaderCompilerPath:m}):new A3({targets:["webgl2","webgl1"],onContextLost(B){console.warn("context lost",B)},onContextCreationError(B){console.warn("context creation error",B)},onContextRestored(B){console.warn("context restored",B)}})).createSwapChain(a);C.configureSwapChain(a.width,a.height),this.device=C.getDevice(),this.swapChain=C,this.renderCache=new Tw(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const I=this.device.gl;this.extensionObject={OES_texture_float:!fb(I)&&this.device.OES_texture_float},this.createMainColorDepthRT(a.width,a.height)})}createMainColorDepthRT(a,o){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:nr.U8_RGBA_RT,width:a,height:o,usage:gl.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:nr.D24_S8,width:a,height:o,usage:gl.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:a,swapChain:o,mainColorRT:f,mainDepthRT:m}=this,w=a?a.colorRenderTarget:f,C=a?null:o.getOnscreenTexture(),I=a?a.depthRenderTarget:m,{color:B=[0,0,0,0],depth:V=1,stencil:re=0}=(a==null?void 0:a.clearOptions)||{},Ce=w?Zv(B[0]*255,B[1]*255,B[2]*255,B[3]):bp,Se=I?V:void 0,ze=I?re:void 0,Rt=this.device.createRenderPass({colorAttachment:[w],colorResolveTo:[C],colorClearColor:[Ce],colorStore:[!0],depthStencilAttachment:I,depthClearValue:Se,stencilClearValue:ze});this.renderPass=Rt}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const a=this.device.gl;return a.getParameter(a.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}},Bl=["selectstart","selecting","selectend"],D_=class extends vl.EventEmitter{constructor(a,o={}){super(),this.isEnable=!1,this.onDragStart=f=>{this.box.style.display="block",this.startEvent=this.endEvent=f,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=f=>{this.endEvent=f,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=f=>{this.endEvent=f,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=a,this.options=o}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:a}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const o=Le.SO.create("div",void 0,this.container);o.classList.add("l7-select-box"),a&&o.classList.add(a),o.style.display="none",this.box=o}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:a,y:o}=this.startEvent,{x:f,y:m}=this.endEvent,w=Math.min(a,f),C=Math.min(o,m),I=Math.abs(a-f),B=Math.abs(o-m);this.box.style.top=`${C}px`,this.box.style.left=`${w}px`,this.box.style.width=`${I}px`,this.box.style.height=`${B}px`}getLngLatBox(){const{lngLat:{lng:a,lat:o}}=this.startEvent,{lngLat:{lng:f,lat:m}}=this.endEvent;return(0,Le.Ol)([[a,o],[f,m]])}},Iw=Object.defineProperty,N_=Object.defineProperties,Lw=Object.getOwnPropertyDescriptors,Dw=Object.getOwnPropertySymbols,cy=Object.prototype.hasOwnProperty,Nw=Object.prototype.propertyIsEnumerable,eM=(a,o,f)=>o in a?Iw(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,tM=(a,o)=>{for(var f in o||(o={}))cy.call(o,f)&&eM(a,f,o[f]);if(Dw)for(var f of Dw(o))Nw.call(o,f)&&eM(a,f,o[f]);return a},hb=(a,o)=>N_(a,Lw(o)),ag=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},I=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,I);B((f=f.apply(a,o)).next())}),nM=class{constructor(a){const{id:o,map:f,canvas:m,renderer:w="regl"}=a,C=(0,we.Hp)();this.container=C,f.setContainer(C,o,m),w==="regl"?C.rendererService=new X3:C.rendererService=new Cu,this.sceneService=C.sceneService,this.mapService=C.mapService,this.iconService=C.iconService,this.fontService=C.fontService,this.controlService=C.controlService,this.layerService=C.layerService,this.debugService=C.debugService,this.debugService.setEnable(a.debug),this.markerService=C.markerService,this.interactionService=C.interactionService,this.popupService=C.popupService,this.boxSelect=new D_(this,{}),this.initComponent(o),this.sceneService.init(a),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(a){return ag(this,null,function*(){return this.sceneService.exportPng(a)})}exportMap(a){return ag(this,null,function*(){return this.sceneService.exportPng(a)})}registerRenderService(a){this.sceneService.loaded?new a(this).init():this.on("loaded",()=>{new a(this).init()})}setBgColor(a){this.mapService.setBgColor(a)}addLayer(a){this.loaded?this.preAddLayer(a):this.once("loaded",()=>{this.preAddLayer(a)})}preAddLayer(a){const o=(0,we.e7)(this.container);if(a.setContainer(o),this.sceneService.addLayer(a),a.inited){this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)}else a.on("inited",()=>{this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)})}initMask(a){const{mask:o,maskfence:f,maskColor:m="#000",maskOpacity:w=0}=a.getLayerConfig();return!o||!f?void 0:new dh().source(f).shape("fill").style({color:m,opacity:w})}addMask(a,o){if(!a)return;const f=this.getLayer(o);if(f){const m=(0,we.e7)(this.container);a.setContainer(m),f.addMaskLayer(a),this.sceneService.addMask(a)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(a){return this.layerService.getLayer(a)}getLayerByName(a){return this.layerService.getLayerByName(a)}removeLayer(a,o){return ag(this,null,function*(){yield this.layerService.remove(a,o)})}removeAllLayer(){return ag(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(a){this.layerService.setEnableRender(a)}addIconFont(a,o){this.fontService.addIconFont(a,o)}addIconFonts(a){a.forEach(([o,f])=>{this.fontService.addIconFont(o,f)})}addFontFace(a,o){this.fontService.once("fontloaded",f=>{this.emit("fontloaded",f)}),this.fontService.addFontFace(a,o)}addImage(a,o){return ag(this,null,function*(){yield this.iconService.addImage(a,o)})}hasImage(a){return this.iconService.hasImage(a)}removeImage(a){this.iconService.removeImage(a)}addIconFontGlyphs(a,o){this.fontService.addIconGlyphs(o)}addControl(a){this.controlService.addControl(a,this.container)}removeControl(a){this.controlService.removeControl(a)}getControlByName(a){return this.controlService.getControlByName(a)}addMarker(a){this.markerService.addMarker(a)}addMarkerLayer(a){this.markerService.addMarkerLayer(a)}removeMarkerLayer(a){this.markerService.removeMarkerLayer(a)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(a){this.popupService.addPopup(a)}removePopup(a){this.popupService.removePopup(a)}on(a,o){var f;Bl.includes(a)?(f=this.boxSelect)==null||f.on(a,o):we.P7.includes(a)?this.sceneService.on(a,o):this.mapService.on(a,o)}once(a,o){var f;Bl.includes(a)?(f=this.boxSelect)==null||f.once(a,o):we.P7.includes(a)?this.sceneService.once(a,o):this.mapService.once(a,o)}emit(a,o){we.P7.indexOf(a)===-1?this.mapService.on(a,o):this.sceneService.emit(a,o)}off(a,o){var f;Bl.includes(a)?(f=this.boxSelect)==null||f.off(a,o):we.P7.includes(a)?this.sceneService.off(a,o):this.mapService.off(a,o)}getZoom(){return this.mapService.getZoom()}getCenter(a){return this.mapService.getCenter(a)}setCenter(a,o){return this.mapService.setCenter(a,o)}getPitch(){return this.mapService.getPitch()}setPitch(a){return this.mapService.setPitch(a)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(a){this.mapService.setRotation(a)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(a){this.mapService.panTo(a)}panBy(a,o){this.mapService.panBy(a,o)}getContainer(){return this.mapService.getContainer()}setZoom(a){this.mapService.setZoom(a)}fitBounds(a,o){const{fitBoundsOptions:f,animate:m}=this.sceneService.getSceneConfig();this.mapService.fitBounds(a,o||hb(tM({},f),{animate:m}))}setZoomAndCenter(a,o){this.mapService.setZoomAndCenter(a,o)}setMapStyle(a){this.mapService.setMapStyle(a)}setMapStatus(a){this.mapService.setMapStatus(a)}pixelToLngLat(a){return this.mapService.pixelToLngLat(a)}lngLatToPixel(a){return this.mapService.lngLatToPixel(a)}containerToLngLat(a){return this.mapService.containerToLngLat(a)}lngLatToContainer(a){return this.mapService.lngLatToContainer(a)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(a){this.container.postProcessingPass.name=new a}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(a=!0){this.boxSelect.enable(),a&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(a,o){Le.SA.REGISTERED_PROTOCOLS[a]=o}static removeProtocol(a){delete Le.SA.REGISTERED_PROTOCOLS[a]}getProtocol(a){return Le.SA.REGISTERED_PROTOCOLS[a]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(a){this.controlService.init({container:Le.SO.getContainer(a)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:a,logoPosition:o}=this.sceneService.getSceneConfig();a&&this.addControl(new _c({position:o}))}initTileLayer(a){a.getSource().isTile&&(a.tileLayer=new Wv(a))}},rM="2.21.3"},81957:function(_t,W){"use strict";var D=function(q,G,E){return q<G?G:q>E?E:q};W.Z=D},95147:function(_t,W){"use strict";var D=function(q){return q==null};W.Z=D},25897:function(_t,W,D){"use strict";var q=D(95456),G=function(E){return(0,q.Z)(E,"Number")};W.Z=G},95456:function(_t,W){"use strict";var D={}.toString,q=function(G,E){return D.call(G)==="[object "+E+"]"};W.Z=q},131:function(_t,W,D){"use strict";D.r(W),D.d(W,{TinyColor:function(){return q.C},bounds:function(){return gt},convertDecimalToHex:function(){return se.Wl},convertHexToDecimal:function(){return se.T6},default:function(){return ft},fromRatio:function(){return ae},hslToRgb:function(){return se.ve},hsvToRgb:function(){return se.WE},inputToRGB:function(){return J.uA},isReadable:function(){return fe},isValidCSSUnit:function(){return J.ky},legacyRandom:function(){return He},mostReadable:function(){return $},names:function(){return G.R},numberInputToObject:function(){return se.Yt},parseIntFromHex:function(){return se.VD},random:function(){return me},readability:function(){return E},rgbToHex:function(){return se.vq},rgbToHsl:function(){return se.lC},rgbToHsv:function(){return se.py},rgbToRgb:function(){return se.rW},rgbaToArgbHex:function(){return se.GC},rgbaToHex:function(){return se.s},stringInputToObject:function(){return J.uz},tinycolor:function(){return q.H},toMsFilter:function(){return ce}});var q=D(10274),G=D(48701);function E(Pe,Ae){var Be=new q.C(Pe),Ze=new q.C(Ae);return(Math.max(Be.getLuminance(),Ze.getLuminance())+.05)/(Math.min(Be.getLuminance(),Ze.getLuminance())+.05)}function fe(Pe,Ae,Be){var Ze,ut;Be===void 0&&(Be={level:"AA",size:"small"});var tn=E(Pe,Ae);switch(((Ze=Be.level)!==null&&Ze!==void 0?Ze:"AA")+((ut=Be.size)!==null&&ut!==void 0?ut:"small")){case"AAsmall":case"AAAlarge":return tn>=4.5;case"AAlarge":return tn>=3;case"AAAsmall":return tn>=7;default:return!1}}function $(Pe,Ae,Be){Be===void 0&&(Be={includeFallbackColors:!1,level:"AA",size:"small"});for(var Ze=null,ut=0,tn=Be.includeFallbackColors,De=Be.level,mt=Be.size,Re=0,nt=Ae;Re<nt.length;Re++){var qe=nt[Re],Ge=E(Pe,qe);Ge>ut&&(ut=Ge,Ze=new q.C(qe))}return fe(Pe,Ze,{level:De,size:mt})||!tn?Ze:(Be.includeFallbackColors=!1,$(Pe,["#fff","#000"],Be))}var se=D(86500);function ce(Pe,Ae){var Be=new q.C(Pe),Ze="#"+(0,se.GC)(Be.r,Be.g,Be.b,Be.a),ut=Ze,tn=Be.gradientType?"GradientType = 1, ":"";if(Ae){var De=new q.C(Ae);ut="#"+(0,se.GC)(De.r,De.g,De.b,De.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(tn,"startColorstr=").concat(Ze,",endColorstr=").concat(ut,")")}var ye=D(90279);function ae(Pe,Ae){var Be={r:(0,ye.JX)(Pe.r),g:(0,ye.JX)(Pe.g),b:(0,ye.JX)(Pe.b)};return Pe.a!==void 0&&(Be.a=Number(Pe.a)),new q.C(Be,Ae)}function He(){return new q.C({r:Math.random(),g:Math.random(),b:Math.random()})}var J=D(1350);function me(Pe){if(Pe===void 0&&(Pe={}),Pe.count!==void 0&&Pe.count!==null){var Ae=Pe.count,Be=[];for(Pe.count=void 0;Ae>Be.length;)Pe.count=null,Pe.seed&&(Pe.seed+=1),Be.push(me(Pe));return Pe.count=Ae,Be}var Ze=Oe(Pe.hue,Pe.seed),ut=Q(Ze,Pe),tn=le(Ze,ut,Pe),De={h:Ze,s:ut,v:tn};return Pe.alpha!==void 0&&(De.a=Pe.alpha),new q.C(De)}function Oe(Pe,Ae){var Be=be(Pe),Ze=tt(Be,Ae);return Ze<0&&(Ze=360+Ze),Ze}function Q(Pe,Ae){if(Ae.hue==="monochrome")return 0;if(Ae.luminosity==="random")return tt([0,100],Ae.seed);var Be=et(Pe).saturationRange,Ze=Be[0],ut=Be[1];switch(Ae.luminosity){case"bright":Ze=55;break;case"dark":Ze=ut-10;break;case"light":ut=55;break;default:break}return tt([Ze,ut],Ae.seed)}function le(Pe,Ae,Be){var Ze=ee(Pe,Ae),ut=100;switch(Be.luminosity){case"dark":ut=Ze+20;break;case"light":Ze=(ut+Ze)/2;break;case"random":Ze=0,ut=100;break;default:break}return tt([Ze,ut],Be.seed)}function ee(Pe,Ae){for(var Be=et(Pe).lowerBounds,Ze=0;Ze<Be.length-1;Ze++){var ut=Be[Ze][0],tn=Be[Ze][1],De=Be[Ze+1][0],mt=Be[Ze+1][1];if(Ae>=ut&&Ae<=De){var Re=(mt-tn)/(De-ut),nt=tn-Re*ut;return Re*Ae+nt}}return 0}function be(Pe){var Ae=parseInt(Pe,10);if(!Number.isNaN(Ae)&&Ae<360&&Ae>0)return[Ae,Ae];if(typeof Pe=="string"){var Be=gt.find(function(De){return De.name===Pe});if(Be){var Ze=wt(Be);if(Ze.hueRange)return Ze.hueRange}var ut=new q.C(Pe);if(ut.isValid){var tn=ut.toHsv().h;return[tn,tn]}}return[0,360]}function et(Pe){Pe>=334&&Pe<=360&&(Pe-=360);for(var Ae=0,Be=gt;Ae<Be.length;Ae++){var Ze=Be[Ae],ut=wt(Ze);if(ut.hueRange&&Pe>=ut.hueRange[0]&&Pe<=ut.hueRange[1])return ut}throw Error("Color not found")}function tt(Pe,Ae){if(Ae===void 0)return Math.floor(Pe[0]+Math.random()*(Pe[1]+1-Pe[0]));var Be=Pe[1]||1,Ze=Pe[0]||0;Ae=(Ae*9301+49297)%233280;var ut=Ae/233280;return Math.floor(Ze+ut*(Be-Ze))}function wt(Pe){var Ae=Pe.lowerBounds[0][0],Be=Pe.lowerBounds[Pe.lowerBounds.length-1][0],Ze=Pe.lowerBounds[Pe.lowerBounds.length-1][1],ut=Pe.lowerBounds[0][1];return{name:Pe.name,hueRange:Pe.hueRange,lowerBounds:Pe.lowerBounds,saturationRange:[Ae,Be],brightnessRange:[Ze,ut]}}var gt=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],ft=q.H},38163:function(_t){_t.exports=W;function W(G,E){var fe=G&&G.type,$;if(fe==="FeatureCollection")for($=0;$<G.features.length;$++)W(G.features[$],E);else if(fe==="GeometryCollection")for($=0;$<G.geometries.length;$++)W(G.geometries[$],E);else if(fe==="Feature")W(G.geometry,E);else if(fe==="Polygon")D(G.coordinates,E);else if(fe==="MultiPolygon")for($=0;$<G.coordinates.length;$++)D(G.coordinates[$],E);return G}function D(G,E){if(G.length!==0){q(G[0],E);for(var fe=1;fe<G.length;fe++)q(G[fe],!E)}}function q(G,E){for(var fe=0,$=0,se=0,ce=G.length,ye=ce-1;se<ce;ye=se++){var ae=(G[se][0]-G[ye][0])*(G[ye][1]+G[se][1]),He=fe+ae;$+=Math.abs(fe)>=Math.abs(ae)?fe-He+ae:ae-He+fe,fe=He}fe+$>=0!=!!E&&G.reverse()}},75550:function(_t){"use strict";_t.exports=W;function W(D,q){this.x=D,this.y=q}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(D){return this.clone()._add(D)},sub:function(D){return this.clone()._sub(D)},multByPoint:function(D){return this.clone()._multByPoint(D)},divByPoint:function(D){return this.clone()._divByPoint(D)},mult:function(D){return this.clone()._mult(D)},div:function(D){return this.clone()._div(D)},rotate:function(D){return this.clone()._rotate(D)},rotateAround:function(D,q){return this.clone()._rotateAround(D,q)},matMult:function(D){return this.clone()._matMult(D)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(D){return this.x===D.x&&this.y===D.y},dist:function(D){return Math.sqrt(this.distSqr(D))},distSqr:function(D){var q=D.x-this.x,G=D.y-this.y;return q*q+G*G},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(D){return Math.atan2(this.y-D.y,this.x-D.x)},angleWith:function(D){return this.angleWithSep(D.x,D.y)},angleWithSep:function(D,q){return Math.atan2(this.x*q-this.y*D,this.x*D+this.y*q)},_matMult:function(D){var q=D[0]*this.x+D[1]*this.y,G=D[2]*this.x+D[3]*this.y;return this.x=q,this.y=G,this},_add:function(D){return this.x+=D.x,this.y+=D.y,this},_sub:function(D){return this.x-=D.x,this.y-=D.y,this},_mult:function(D){return this.x*=D,this.y*=D,this},_div:function(D){return this.x/=D,this.y/=D,this},_multByPoint:function(D){return this.x*=D.x,this.y*=D.y,this},_divByPoint:function(D){return this.x/=D.x,this.y/=D.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var D=this.y;return this.y=this.x,this.x=-D,this},_rotate:function(D){var q=Math.cos(D),G=Math.sin(D),E=q*this.x-G*this.y,fe=G*this.x+q*this.y;return this.x=E,this.y=fe,this},_rotateAround:function(D,q){var G=Math.cos(D),E=Math.sin(D),fe=q.x+G*(this.x-q.x)-E*(this.y-q.y),$=q.y+E*(this.x-q.x)+G*(this.y-q.y);return this.x=fe,this.y=$,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(D){return D instanceof W?D:Array.isArray(D)?new W(D[0],D[1]):D}},49296:function(_t){"use strict";_t.exports=D,_t.exports.default=D;var W=1e20;function D($,se,ce,ye,ae,He){this.fontSize=$||24,this.buffer=se===void 0?3:se,this.cutoff=ye||.25,this.fontFamily=ae||"sans-serif",this.fontWeight=He||"normal",this.radius=ce||8;var J=this.size=this.fontSize+this.buffer*2,me=J+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=J,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(me*me),this.gridInner=new Float64Array(me*me),this.f=new Float64Array(me),this.z=new Float64Array(me+1),this.v=new Uint16Array(me),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(J/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function q($,se,ce,ye,ae,He,J){He.fill(W,0,se*ce),J.fill(0,0,se*ce);for(var me=(se-ye)/2,Oe=0;Oe<ae;Oe++)for(var Q=0;Q<ye;Q++){var le=(Oe+me)*se+Q+me,ee=$.data[4*(Oe*ye+Q)+3]/255;if(ee===1)He[le]=0,J[le]=W;else if(ee===0)He[le]=W,J[le]=0;else{var be=Math.max(0,.5-ee),et=Math.max(0,ee-.5);He[le]=be*be,J[le]=et*et}}}function G($,se,ce,ye,ae,He,J){for(var me=0;me<se*ce;me++){var Oe=Math.sqrt(ye[me])-Math.sqrt(ae[me]);$[me]=Math.round(255-255*(Oe/He+J))}}D.prototype._draw=function($,se){var ce=this.ctx.measureText($),ye=ce.width,ae=2*this.buffer,He,J,me,Oe,Q,le,ee,be;se&&this.useMetrics?(Q=Math.floor(ce.actualBoundingBoxAscent),be=this.buffer+Math.ceil(ce.actualBoundingBoxAscent),le=this.buffer,ee=this.buffer,J=Math.min(this.size,Math.ceil(ce.actualBoundingBoxRight-ce.actualBoundingBoxLeft)),Oe=Math.min(this.size-le,Math.ceil(ce.actualBoundingBoxAscent+ce.actualBoundingBoxDescent)),He=J+ae,me=Oe+ae,this.ctx.textBaseline="alphabetic"):(He=J=this.size,me=Oe=this.size,Q=19*this.fontSize/24,le=ee=0,be=this.middle,this.ctx.textBaseline="middle");var et;J&&Oe&&(this.ctx.clearRect(ee,le,J,Oe),this.ctx.fillText($,this.buffer,be),et=this.ctx.getImageData(ee,le,J,Oe));var tt=new Uint8ClampedArray(He*me);return q(et,He,me,J,Oe,this.gridOuter,this.gridInner),E(this.gridOuter,He,me,this.f,this.v,this.z),E(this.gridInner,He,me,this.f,this.v,this.z),G(tt,He,me,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:tt,metrics:{width:J,height:Oe,sdfWidth:He,sdfHeight:me,top:Q,left:0,advance:ye}}},D.prototype.draw=function($){return this._draw($,!1).data},D.prototype.drawWithMetrics=function($){return this._draw($,!0)};function E($,se,ce,ye,ae,He){for(var J=0;J<se;J++)fe($,J,se,ce,ye,ae,He);for(var me=0;me<ce;me++)fe($,me*se,1,se,ye,ae,He)}function fe($,se,ce,ye,ae,He,J){var me,Oe,Q,le;for(He[0]=0,J[0]=-W,J[1]=W,me=0;me<ye;me++)ae[me]=$[se+me*ce];for(me=1,Oe=0,Q=0;me<ye;me++){do le=He[Oe],Q=(ae[me]-ae[le]+me*me-le*le)/(me-le)/2;while(Q<=J[Oe]&&--Oe>-1);Oe++,He[Oe]=me,J[Oe]=Q,J[Oe+1]=W}for(me=0,Oe=0;me<ye;me++){for(;J[Oe+1]<me;)Oe++;le=He[Oe],$[se+me*ce]=ae[le]+(me-le)*(me-le)}}},38929:function(_t,W,D){_t.exports.VectorTile=D(22779),D(66024),D(59701)},22779:function(_t,W,D){"use strict";var q=D(59701);_t.exports=G;function G(fe,$){this.layers=fe.readFields(E,{},$)}function E(fe,$,se){if(fe===3){var ce=new q(se,se.readVarint()+se.pos);ce.length&&($[ce.name]=ce)}}},66024:function(_t,W,D){"use strict";var q=D(75550);_t.exports=G;function G(ce,ye,ae,He,J){this.properties={},this.extent=ae,this.type=0,this._pbf=ce,this._geometry=-1,this._keys=He,this._values=J,ce.readFields(E,this,ye)}function E(ce,ye,ae){ce==1?ye.id=ae.readVarint():ce==2?fe(ae,ye):ce==3?ye.type=ae.readVarint():ce==4&&(ye._geometry=ae.pos)}function fe(ce,ye){for(var ae=ce.readVarint()+ce.pos;ce.pos<ae;){var He=ye._keys[ce.readVarint()],J=ye._values[ce.readVarint()];ye.properties[He]=J}}G.types=["Unknown","Point","LineString","Polygon"],G.prototype.loadGeometry=function(){var ce=this._pbf;ce.pos=this._geometry;for(var ye=ce.readVarint()+ce.pos,ae=1,He=0,J=0,me=0,Oe=[],Q;ce.pos<ye;){if(He<=0){var le=ce.readVarint();ae=le&7,He=le>>3}if(He--,ae===1||ae===2)J+=ce.readSVarint(),me+=ce.readSVarint(),ae===1&&(Q&&Oe.push(Q),Q=[]),Q.push(new q(J,me));else if(ae===7)Q&&Q.push(Q[0].clone());else throw new Error("unknown command "+ae)}return Q&&Oe.push(Q),Oe},G.prototype.bbox=function(){var ce=this._pbf;ce.pos=this._geometry;for(var ye=ce.readVarint()+ce.pos,ae=1,He=0,J=0,me=0,Oe=1/0,Q=-1/0,le=1/0,ee=-1/0;ce.pos<ye;){if(He<=0){var be=ce.readVarint();ae=be&7,He=be>>3}if(He--,ae===1||ae===2)J+=ce.readSVarint(),me+=ce.readSVarint(),J<Oe&&(Oe=J),J>Q&&(Q=J),me<le&&(le=me),me>ee&&(ee=me);else if(ae!==7)throw new Error("unknown command "+ae)}return[Oe,le,Q,ee]},G.prototype.toGeoJSON=function(ce,ye,ae){var He=this.extent*Math.pow(2,ae),J=this.extent*ce,me=this.extent*ye,Oe=this.loadGeometry(),Q=G.types[this.type],le,ee;function be(wt){for(var gt=0;gt<wt.length;gt++){var ft=wt[gt],Pe=180-(ft.y+me)*360/He;wt[gt]=[(ft.x+J)*360/He-180,360/Math.PI*Math.atan(Math.exp(Pe*Math.PI/180))-90]}}switch(this.type){case 1:var et=[];for(le=0;le<Oe.length;le++)et[le]=Oe[le][0];Oe=et,be(Oe);break;case 2:for(le=0;le<Oe.length;le++)be(Oe[le]);break;case 3:for(Oe=$(Oe),le=0;le<Oe.length;le++)for(ee=0;ee<Oe[le].length;ee++)be(Oe[le][ee]);break}Oe.length===1?Oe=Oe[0]:Q="Multi"+Q;var tt={type:"Feature",geometry:{type:Q,coordinates:Oe},properties:this.properties};return"id"in this&&(tt.id=this.id),tt};function $(ce){var ye=ce.length;if(ye<=1)return[ce];for(var ae=[],He,J,me=0;me<ye;me++){var Oe=se(ce[me]);Oe!==0&&(J===void 0&&(J=Oe<0),J===Oe<0?(He&&ae.push(He),He=[ce[me]]):He.push(ce[me]))}return He&&ae.push(He),ae}function se(ce){for(var ye=0,ae=0,He=ce.length,J=He-1,me,Oe;ae<He;J=ae++)me=ce[ae],Oe=ce[J],ye+=(Oe.x-me.x)*(me.y+Oe.y);return ye}},59701:function(_t,W,D){"use strict";var q=D(66024);_t.exports=G;function G($,se){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=$,this._keys=[],this._values=[],this._features=[],$.readFields(E,this,se),this.length=this._features.length}function E($,se,ce){$===15?se.version=ce.readVarint():$===1?se.name=ce.readString():$===5?se.extent=ce.readVarint():$===2?se._features.push(ce.pos):$===3?se._keys.push(ce.readString()):$===4&&se._values.push(fe(ce))}function fe($){for(var se=null,ce=$.readVarint()+$.pos;$.pos<ce;){var ye=$.readVarint()>>3;se=ye===1?$.readString():ye===2?$.readFloat():ye===3?$.readDouble():ye===4?$.readVarint64():ye===5?$.readVarint():ye===6?$.readSVarint():ye===7?$.readBoolean():null}return se}G.prototype.feature=function($){if($<0||$>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[$];var se=this._pbf.readVarint()+this._pbf.pos;return new q(this._pbf,se,this.extent,this._keys,this._values)}},45471:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.PresetStatusColorTypes=void 0,W.isPresetColor=se,W.isPresetStatusColor=ce;var G=q(D(861)),E=D(36496);const fe=E.PresetColors.map(ye=>`${ye}-inverse`),$=W.PresetStatusColorTypes=["success","processing","error","default","warning"];function se(ye){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,G.default)(fe),(0,G.default)(E.PresetColors)).includes(ye):E.PresetColors.includes(ye)}function ce(ye){return $.includes(ye)}},49314:function(_t,W,D){"use strict";"use client";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294)),E=q(D(43273));const fe=se=>{let ce;return typeof se=="object"&&(se!=null&&se.clearIcon)?ce=se:se&&(ce={clearIcon:G.default.createElement(E.default,null)}),ce};var $=W.default=fe},56333:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.containerBaseZIndexOffset=W.consumerBaseZIndexOffset=W.CONTAINER_MAX_OFFSET=void 0,W.useZIndex=J;var G=q(D(67294)),E=q(D(41401)),fe=q(D(96877));const $=100,se=10,ce=W.CONTAINER_MAX_OFFSET=$*se,ye=W.containerBaseZIndexOffset={Modal:$,Drawer:$,Popover:$,Popconfirm:$,Tooltip:$,Tour:$},ae=W.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function He(me){return me in ye}function J(me,Oe){const[,Q]=(0,E.default)(),le=G.default.useContext(fe.default),ee=He(me);if(Oe!==void 0)return[Oe,Oe];let be=le!=null?le:0;return ee?(be+=(le?0:Q.zIndexPopupBase)+ye[me],be=Math.min(be,Q.zIndexPopupBase+ce)):be+=ae[me],[le===void 0?Oe:be,be]}},53683:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getTransitionName=W.default=void 0;const D=()=>({height:0,opacity:0}),q=ye=>{const{scrollHeight:ae}=ye;return{height:ae,opacity:1}},G=ye=>({height:ye?ye.offsetHeight:0}),E=(ye,ae)=>(ae==null?void 0:ae.deadline)===!0||ae.propertyName==="height",fe=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:D,onEnterStart:D,onAppearActive:q,onEnterActive:q,onLeaveStart:G,onLeaveActive:D,onAppearEnd:E,onEnterEnd:E,onLeaveEnd:E,motionDeadline:500}},$=null,se=(ye,ae,He)=>He!==void 0?He:`${ye}-${ae}`;W.getTransitionName=se;var ce=W.default=fe},74132:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=se,W.getOverflowOptions=G;var q=D(9064);function G(ce,ye,ae,He){if(He===!1)return{adjustX:!1,adjustY:!1};const J=He&&typeof He=="object"?He:{},me={};switch(ce){case"top":case"bottom":me.shiftX=ye.arrowOffsetHorizontal*2+ae,me.shiftY=!0,me.adjustY=!0;break;case"left":case"right":me.shiftY=ye.arrowOffsetVertical*2+ae,me.shiftX=!0,me.adjustX=!0;break}const Oe=Object.assign(Object.assign({},me),J);return Oe.shiftX||(Oe.adjustX=!0),Oe.shiftY||(Oe.adjustY=!0),Oe}const E={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},fe={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},$=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function se(ce){const{arrowWidth:ye,autoAdjustOverflow:ae,arrowPointAtCenter:He,offset:J,borderRadius:me,visibleFirst:Oe}=ce,Q=ye/2,le={};return Object.keys(E).forEach(ee=>{const be=He&&fe[ee]||E[ee],et=Object.assign(Object.assign({},be),{offset:[0,0],dynamicInset:!0});switch(le[ee]=et,$.has(ee)&&(et.autoArrow=!1),ee){case"top":case"topLeft":case"topRight":et.offset[1]=-Q-J;break;case"bottom":case"bottomLeft":case"bottomRight":et.offset[1]=Q+J;break;case"left":case"leftTop":case"leftBottom":et.offset[0]=-Q-J;break;case"right":case"rightTop":case"rightBottom":et.offset[0]=Q+J;break}const tt=(0,q.getArrowOffsetToken)({contentRadius:me,limitVerticalRadius:!0});if(He)switch(ee){case"topLeft":case"bottomLeft":et.offset[0]=-tt.arrowOffsetHorizontal-Q;break;case"topRight":case"bottomRight":et.offset[0]=tt.arrowOffsetHorizontal+Q;break;case"leftTop":case"rightTop":et.offset[1]=-tt.arrowOffsetHorizontal-Q;break;case"leftBottom":case"rightBottom":et.offset[1]=tt.arrowOffsetHorizontal+Q;break}et.overflow=G(ee,tt,ye,ae),Oe&&(et.htmlRegion="visibleFirst")}),le}},47419:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.cloneElement=$,W.isFragment=E,W.replaceElement=void 0;var G=q(D(67294));function E(se){return se&&G.default.isValidElement(se)&&se.type===G.default.Fragment}const fe=(se,ce,ye)=>G.default.isValidElement(se)?G.default.cloneElement(se,typeof ye=="function"?ye(se.props||{}):ye):ce;W.replaceElement=fe;function $(se,ce){return fe(se,se,ce)}},71434:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.getMergedStatus=void 0,W.getStatusClassNames=fe;var G=q(D(93967));const E=null;function fe(se,ce,ye){return(0,G.default)({[`${se}-status-success`]:ce==="success",[`${se}-status-warning`]:ce==="warning",[`${se}-status-error`]:ce==="error",[`${se}-status-validating`]:ce==="validating",[`${se}-has-feedback`]:ye})}const $=(se,ce)=>ce||se;W.getMergedStatus=$},38882:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.canUseDocElement=void 0,Object.defineProperty(W,"isStyleSupport",{enumerable:!0,get:function(){return E.isStyleSupport}});var G=q(D(19158)),E=D(3481);const fe=()=>(0,G.default)()&&window.document.documentElement;W.canUseDocElement=fe},60938:function(_t,W,D){"use strict";"use client";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(27712)),fe=q(D(67294)),$=function(ae,He){var J={};for(var me in ae)Object.prototype.hasOwnProperty.call(ae,me)&&He.indexOf(me)<0&&(J[me]=ae[me]);if(ae!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Oe=0,me=Object.getOwnPropertySymbols(ae);Oe<me.length;Oe++)He.indexOf(me[Oe])<0&&Object.prototype.propertyIsEnumerable.call(ae,me[Oe])&&(J[me[Oe]]=ae[me[Oe]]);return J};const se={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},ce=fe.forwardRef((ae,He)=>{const J=et=>{const{keyCode:tt}=et;tt===E.default.ENTER&&et.preventDefault()},me=et=>{const{keyCode:tt}=et,{onClick:wt}=ae;tt===E.default.ENTER&&wt&&wt()},{style:Oe,noStyle:Q,disabled:le}=ae,ee=$(ae,["style","noStyle","disabled"]);let be={};return Q||(be=Object.assign({},se)),le&&(be.pointerEvents="none"),be=Object.assign(Object.assign({},be),Oe),fe.createElement("div",Object.assign({role:"button",tabIndex:0,ref:He},ee,{onKeyDown:J,onKeyUp:me,style:be}))});var ye=W.default=ce},13594:function(_t,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.devUseWarning=W.default=W.WarningContext=void 0,W.noop=fe,W.resetWarned=se;var G=q(D(67294)),E=q(D(45520));function fe(){}let $=null;function se(){$=null,(0,E.resetWarned)()}let ce=fe;const ye=W.WarningContext=G.createContext({}),ae=W.devUseWarning=()=>{const J=()=>{};return J.deprecated=fe,J};var He=W.default=ce},96877:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294));const E=G.default.createContext(void 0);var fe=W.default=E},1028:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(25633)),E=W.default=G.default},93319:function(_t,W,D){"use strict";"use client";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.DisabledContextProvider=void 0;var G=q(D(67294));const E=G.createContext(!1),fe=se=>{let{children:ce,disabled:ye}=se;const ae=G.useContext(E);return G.createElement(E.Provider,{value:ye!=null?ye:ae},ce)};W.DisabledContextProvider=fe;var $=W.default=E},16722:function(_t,W,D){"use strict";"use client";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=$;var G=D(82225),E=q(D(67294)),fe=D(3184);function $(se){const{children:ce}=se,[,ye]=(0,fe.useToken)(),{motion:ae}=ye,He=E.useRef(!1);return He.current=He.current||ae===!1,He.current?E.createElement(G.Provider,{motion:ae},ce):ce}},11380:function(_t,W,D){"use strict";"use client";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294)),E=D(13594);const fe=null;var $=W.default=()=>null},3236:function(_t,W,D){"use strict";"use client";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.SizeContextProvider=void 0;var G=q(D(67294));const E=G.createContext(void 0),fe=se=>{let{children:ce,size:ye}=se;const ae=G.useContext(E);return G.createElement(E.Provider,{value:ye||ae},ce)};W.SizeContextProvider=fe;var $=W.default=E},7177:function(_t,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.defaultIconPrefixCls=W.ConfigContext=W.ConfigConsumer=void 0;var G=q(D(67294));const E=W.defaultIconPrefixCls="anticon",fe=(ce,ye)=>ye||(ce?`ant-${ce}`:"ant"),$=W.ConfigContext=G.createContext({getPrefixCls:fe,iconPrefixCls:E}),{Consumer:se}=$;W.ConfigConsumer=se},56301:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.getStyle=ye,W.registerTheme=ae;var G=D(78589),E=D(131),fe=q(D(19158)),$=D(93399),se=q(D(13594));const ce=`-ant-${Date.now()}-${Math.random()}`;function ye(He,J){const me={},Oe=(ee,be)=>{let et=ee.clone();return et=(be==null?void 0:be(et))||et,et.toRgbString()},Q=(ee,be)=>{const et=new E.TinyColor(ee),tt=(0,G.generate)(et.toRgbString());me[`${be}-color`]=Oe(et),me[`${be}-color-disabled`]=tt[1],me[`${be}-color-hover`]=tt[4],me[`${be}-color-active`]=tt[6],me[`${be}-color-outline`]=et.clone().setAlpha(.2).toRgbString(),me[`${be}-color-deprecated-bg`]=tt[0],me[`${be}-color-deprecated-border`]=tt[2]};if(J.primaryColor){Q(J.primaryColor,"primary");const ee=new E.TinyColor(J.primaryColor),be=(0,G.generate)(ee.toRgbString());be.forEach((tt,wt)=>{me[`primary-${wt+1}`]=tt}),me["primary-color-deprecated-l-35"]=Oe(ee,tt=>tt.lighten(35)),me["primary-color-deprecated-l-20"]=Oe(ee,tt=>tt.lighten(20)),me["primary-color-deprecated-t-20"]=Oe(ee,tt=>tt.tint(20)),me["primary-color-deprecated-t-50"]=Oe(ee,tt=>tt.tint(50)),me["primary-color-deprecated-f-12"]=Oe(ee,tt=>tt.setAlpha(tt.getAlpha()*.12));const et=new E.TinyColor(be[0]);me["primary-color-active-deprecated-f-30"]=Oe(et,tt=>tt.setAlpha(tt.getAlpha()*.3)),me["primary-color-active-deprecated-d-02"]=Oe(et,tt=>tt.darken(2))}return J.successColor&&Q(J.successColor,"success"),J.warningColor&&Q(J.warningColor,"warning"),J.errorColor&&Q(J.errorColor,"error"),J.infoColor&&Q(J.infoColor,"info"),`
  :root {
    ${Object.keys(me).map(ee=>`--${He}-${ee}: ${me[ee]};`).join(`
`)}
  }
  `.trim()}function ae(He,J){const me=ye(He,J);(0,fe.default)()&&(0,$.updateCSS)(me,`${ce}-dynamic-theme`)}},14893:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var q=D(3184);const G=fe=>{const[,,,,$]=(0,q.useToken)();return $?`${fe}-css-var`:""};var E=W.default=G},5819:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=D(67294),E=q(D(93319)),fe=q(D(3236));function $(){const ce=(0,G.useContext)(E.default),ye=(0,G.useContext)(fe.default);return{componentDisabled:ce,componentSize:ye}}var se=W.default=$},65693:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294)),E=q(D(3236));const fe=se=>{const ce=G.default.useContext(E.default);return G.default.useMemo(()=>se?typeof se=="string"?se!=null?se:ce:se instanceof Function?se(ce):ce:ce,[se,ce])};var $=W.default=fe},25494:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ce;var G=q(D(67265)),E=q(D(11102)),fe=D(3184),$=q(D(78459)),se=D(13594);function ce(ye,ae,He){var J,me;const Oe=(0,se.devUseWarning)("ConfigProvider"),Q=ye||{},le=Q.inherit===!1||!ae?Object.assign(Object.assign({},fe.defaultConfig),{hashed:(J=ae==null?void 0:ae.hashed)!==null&&J!==void 0?J:fe.defaultConfig.hashed,cssVar:ae==null?void 0:ae.cssVar}):ae,ee=(0,$.default)();return(0,G.default)(()=>{var be,et;if(!ye)return ae;const tt=Object.assign({},le.components);Object.keys(ye.components||{}).forEach(ft=>{tt[ft]=Object.assign(Object.assign({},tt[ft]),ye.components[ft])});const wt=`css-var-${ee.replace(/:/g,"")}`,gt=((be=Q.cssVar)!==null&&be!==void 0?be:le.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:He==null?void 0:He.prefixCls},typeof le.cssVar=="object"?le.cssVar:{}),typeof Q.cssVar=="object"?Q.cssVar:{}),{key:typeof Q.cssVar=="object"&&((et=Q.cssVar)===null||et===void 0?void 0:et.key)||wt});return Object.assign(Object.assign(Object.assign({},le),Q),{token:Object.assign(Object.assign({},le.token),Q.token),components:tt,cssVar:gt})},[Q,le],(be,et)=>be.some((tt,wt)=>{const gt=et[wt];return!(0,E.default)(tt,gt,!0)}))}},78459:function(_t,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294));const E=Object.assign({},G),{useId:fe}=E,se=typeof fe=="undefined"?()=>"":fe;var ce=W.default=se},31929:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"ConfigConsumer",{enumerable:!0,get:function(){return le.ConfigConsumer}}),Object.defineProperty(W,"ConfigContext",{enumerable:!0,get:function(){return le.ConfigContext}}),W.default=W.configConsumerProps=void 0,Object.defineProperty(W,"defaultIconPrefixCls",{enumerable:!0,get:function(){return le.defaultIconPrefixCls}}),W.warnContext=W.globalConfig=W.defaultPrefixCls=void 0;var E=G(D(67294)),fe=D(6731),$=q(D(13357)),se=q(D(67265)),ce=D(20059),ye=G(D(13594)),ae=q(D(2197)),He=G(D(24522)),J=q(D(44805)),me=q(D(18253)),Oe=D(89329),Q=q(D(98411)),le=D(7177),ee=D(56301),be=D(93319),et=q(D(5819)),tt=q(D(25494)),wt=q(D(16722)),gt=q(D(11380)),ft=G(D(3236)),Pe=q(D(82932)),Ae=function(or,Lt){var en={};for(var hn in or)Object.prototype.hasOwnProperty.call(or,hn)&&Lt.indexOf(hn)<0&&(en[hn]=or[hn]);if(or!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Xn=0,hn=Object.getOwnPropertySymbols(or);Xn<hn.length;Xn++)Lt.indexOf(hn[Xn])<0&&Object.prototype.propertyIsEnumerable.call(or,hn[Xn])&&(en[hn[Xn]]=or[hn[Xn]]);return en};let Be=!1;const Ze=W.warnContext=null,ut=W.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale"],tn=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],De=W.defaultPrefixCls="ant";let mt,Re,nt,qe;function Ge(){return mt||De}function Dt(){return Re||le.defaultIconPrefixCls}function yt(or){return Object.keys(or).some(Lt=>Lt.endsWith("Color"))}const Le=or=>{const{prefixCls:Lt,iconPrefixCls:en,theme:hn,holderRender:Xn}=or;Lt!==void 0&&(mt=Lt),en!==void 0&&(Re=en),"holderRender"in or&&(qe=Xn),hn&&(yt(hn)?(0,ee.registerTheme)(Ge(),hn):nt=hn)},Zt=()=>({getPrefixCls:(or,Lt)=>Lt||(or?`${Ge()}-${or}`:Ge()),getIconPrefixCls:Dt,getRootPrefixCls:()=>mt||Ge(),getTheme:()=>nt,holderRender:qe});W.globalConfig=Zt;const yn=or=>{const{children:Lt,csp:en,autoInsertSpaceInButton:hn,alert:Xn,anchor:an,form:Pt,locale:zt,componentSize:je,direction:rt,space:Ut,virtual:U,dropdownMatchSelectWidth:he,popupMatchSelectWidth:ot,popupOverflow:de,legacyLocale:qt,parentContext:ln,iconPrefixCls:mn,theme:Dn,componentDisabled:Yn,segmented:Kn,statistic:pn,spin:vt,calendar:Nt,carousel:An,cascader:In,collapse:$n,typography:pt,checkbox:xe,descriptions:Fe,divider:st,drawer:It,skeleton:Mt,steps:wn,image:rr,layout:Er,list:qn,mentions:Me,modal:Te,progress:ke,result:at,slider:At,breadcrumb:nn,menu:cn,pagination:Et,input:Qt,textArea:Qn,empty:Sr,badge:Zr,radio:yr,rate:Wr,switch:Ei,transfer:yi,avatar:wr,message:Ai,tag:pi,table:_i,card:Bo,tabs:Si,timeline:Ci,timePicker:ho,upload:go,notification:jo,tree:Ke,colorPicker:dt,datePicker:Wt,rangePicker:dn,flex:Fn,wave:Bn,dropdown:_n,warning:Cn,tour:pr,floatButtonGroup:hr}=or,ni=E.useCallback((io,Mo)=>{const{prefixCls:gs}=or;if(Mo)return Mo;const ya=gs||ln.getPrefixCls("");return io?`${ya}-${io}`:ya},[ln.getPrefixCls,or.prefixCls]),Wi=mn||ln.iconPrefixCls||le.defaultIconPrefixCls,Qi=en||ln.csp;(0,Pe.default)(Wi,Qi);const ri=(0,tt.default)(Dn,ln.theme,{prefixCls:ni("")}),Gi={csp:Qi,autoInsertSpaceInButton:hn,alert:Xn,anchor:an,locale:zt||qt,direction:rt,space:Ut,virtual:U,popupMatchSelectWidth:ot!=null?ot:he,popupOverflow:de,getPrefixCls:ni,iconPrefixCls:Wi,theme:ri,segmented:Kn,statistic:pn,spin:vt,calendar:Nt,carousel:An,cascader:In,collapse:$n,typography:pt,checkbox:xe,descriptions:Fe,divider:st,drawer:It,skeleton:Mt,steps:wn,image:rr,input:Qt,textArea:Qn,layout:Er,list:qn,mentions:Me,modal:Te,progress:ke,result:at,slider:At,breadcrumb:nn,menu:cn,pagination:Et,empty:Sr,badge:Zr,radio:yr,rate:Wr,switch:Ei,transfer:yi,avatar:wr,message:Ai,tag:pi,table:_i,card:Bo,tabs:Si,timeline:Ci,timePicker:ho,upload:go,notification:jo,tree:Ke,colorPicker:dt,datePicker:Wt,rangePicker:dn,flex:Fn,wave:Bn,dropdown:_n,warning:Cn,tour:pr,floatButtonGroup:hr},zi=Object.assign({},ln);Object.keys(Gi).forEach(io=>{Gi[io]!==void 0&&(zi[io]=Gi[io])}),tn.forEach(io=>{const Mo=or[io];Mo&&(zi[io]=Mo)});const qr=(0,se.default)(()=>zi,zi,(io,Mo)=>{const gs=Object.keys(io),ya=Object.keys(Mo);return gs.length!==ya.length||gs.some(ia=>io[ia]!==Mo[ia])}),To=E.useMemo(()=>({prefixCls:Wi,csp:Qi}),[Wi,Qi]);let di=E.createElement(E.Fragment,null,E.createElement(gt.default,{dropdownMatchSelectWidth:he}),Lt);const So=E.useMemo(()=>{var io,Mo,gs,ya;return(0,ce.merge)(((io=me.default.Form)===null||io===void 0?void 0:io.defaultValidateMessages)||{},((gs=(Mo=qr.locale)===null||Mo===void 0?void 0:Mo.Form)===null||gs===void 0?void 0:gs.defaultValidateMessages)||{},((ya=qr.form)===null||ya===void 0?void 0:ya.validateMessages)||{},(Pt==null?void 0:Pt.validateMessages)||{})},[qr,Pt==null?void 0:Pt.validateMessages]);Object.keys(So).length>0&&(di=E.createElement(ae.default.Provider,{value:So},di)),zt&&(di=E.createElement(He.default,{locale:zt,_ANT_MARK__:He.ANT_MARK},di)),(Wi||Qi)&&(di=E.createElement($.default.Provider,{value:To},di)),je&&(di=E.createElement(ft.SizeContextProvider,{size:je},di)),di=E.createElement(wt.default,null,di);const Zi=E.useMemo(()=>{const io=ri||{},{algorithm:Mo,token:gs,components:ya,cssVar:ia}=io,ps=Ae(io,["algorithm","token","components","cssVar"]),os=Mo&&(!Array.isArray(Mo)||Mo.length>0)?(0,fe.createTheme)(Mo):Oe.defaultTheme,Ct={};Object.entries(ya||{}).forEach(Un=>{let[Fr,Oi]=Un;const Yi=Object.assign({},Oi);"algorithm"in Yi&&(Yi.algorithm===!0?Yi.theme=os:(Array.isArray(Yi.algorithm)||typeof Yi.algorithm=="function")&&(Yi.theme=(0,fe.createTheme)(Yi.algorithm)),delete Yi.algorithm),Ct[Fr]=Yi});const Gt=Object.assign(Object.assign({},Q.default),gs);return Object.assign(Object.assign({},ps),{theme:os,token:Gt,components:Ct,override:Object.assign({override:Gt},Ct),cssVar:ia})},[ri]);return Dn&&(di=E.createElement(Oe.DesignTokenContext.Provider,{value:Zi},di)),qr.warning&&(di=E.createElement(ye.WarningContext.Provider,{value:qr.warning},di)),Yn!==void 0&&(di=E.createElement(be.DisabledContextProvider,{disabled:Yn},di)),E.createElement(le.ConfigContext.Provider,{value:qr},di)},Tn=or=>{const Lt=E.useContext(le.ConfigContext),en=E.useContext(J.default);return E.createElement(yn,Object.assign({parentContext:Lt,legacyLocale:en},or))};Tn.ConfigContext=le.ConfigContext,Tn.SizeContext=ft.default,Tn.config=Le,Tn.useConfig=et.default,Object.defineProperty(Tn,"SizeContext",{get:()=>ft.default});var lr=W.default=Tn},82932:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return q.useResetIconStyle}});var q=D(3184)},25633:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(27590)),E=q(D(52040));const fe={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},G.default),timePickerLocale:Object.assign({},E.default)};var $=W.default=fe},51130:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.VariantContext=W.NoStyleItemContext=W.NoFormStyle=W.FormProvider=W.FormItemPrefixContext=W.FormItemInputContext=W.FormContext=void 0;var E=G(D(67294)),fe=E,$=D(43589),se=q(D(18475));const ce=W.FormContext=fe.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),ye=W.NoStyleItemContext=fe.createContext(null),ae=Q=>{const le=(0,se.default)(Q,["prefixCls"]);return fe.createElement($.FormProvider,Object.assign({},le))};W.FormProvider=ae;const He=W.FormItemPrefixContext=fe.createContext({prefixCls:""}),J=W.FormItemInputContext=fe.createContext({}),me=Q=>{let{children:le,status:ee,override:be}=Q;const et=(0,E.useContext)(J),tt=(0,E.useMemo)(()=>{const wt=Object.assign({},et);return be&&delete wt.isFormItemInput,ee&&(delete wt.status,delete wt.hasFeedback,delete wt.feedbackIcon),wt},[ee,be,et]);return fe.createElement(J.Provider,{value:tt},le)};W.NoFormStyle=me;const Oe=W.VariantContext=(0,E.createContext)(void 0)},96424:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.Variants=void 0;var q=D(67294),G=D(51130);const E=W.Variants=["outlined","borderless","filled"],fe=function(se){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const ye=(0,q.useContext)(G.VariantContext);let ae;typeof se!="undefined"?ae=se:ce===!1?ae="borderless":ae=ye!=null?ye:"outlined";const He=E.includes(ae);return[ae,He]};var $=W.default=fe},2197:function(_t,W,D){"use strict";"use client";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var q=D(67294),G=W.default=(0,q.createContext)(void 0)},10815:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0,W.triggerFocus=gt;var E=G(D(67294)),fe=q(D(93967)),$=q(D(67656)),se=D(75531),ce=q(D(49314)),ye=D(71434),ae=D(13594),He=D(31929),J=q(D(93319)),me=q(D(14893)),Oe=q(D(65693)),Q=D(51130),le=q(D(96424)),ee=D(46549),be=q(D(81722)),et=q(D(89858)),tt=D(36714),wt=function(Ae,Be){var Ze={};for(var ut in Ae)Object.prototype.hasOwnProperty.call(Ae,ut)&&Be.indexOf(ut)<0&&(Ze[ut]=Ae[ut]);if(Ae!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tn=0,ut=Object.getOwnPropertySymbols(Ae);tn<ut.length;tn++)Be.indexOf(ut[tn])<0&&Object.prototype.propertyIsEnumerable.call(Ae,ut[tn])&&(Ze[ut[tn]]=Ae[ut[tn]]);return Ze};function gt(Ae,Be){if(!Ae)return;Ae.focus(Be);const{cursor:Ze}=Be||{};if(Ze){const ut=Ae.value.length;switch(Ze){case"start":Ae.setSelectionRange(0,0);break;case"end":Ae.setSelectionRange(ut,ut);break;default:Ae.setSelectionRange(0,ut);break}}}const ft=(0,E.forwardRef)((Ae,Be)=>{var Ze;const{prefixCls:ut,bordered:tn=!0,status:De,size:mt,disabled:Re,onBlur:nt,onFocus:qe,suffix:Ge,allowClear:Dt,addonAfter:yt,addonBefore:Le,className:Zt,style:yn,styles:Tn,rootClassName:lr,onChange:or,classNames:Lt,variant:en}=Ae,hn=wt(Ae,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:Xn,direction:an,input:Pt}=E.default.useContext(He.ConfigContext),zt=Xn("input",ut),je=(0,E.useRef)(null),rt=(0,me.default)(zt),[Ut,U,he]=(0,et.default)(zt,rt),{compactSize:ot,compactItemClassnames:de}=(0,ee.useCompactItemContext)(zt,an),qt=(0,Oe.default)(Mt=>{var wn;return(wn=mt!=null?mt:ot)!==null&&wn!==void 0?wn:Mt}),ln=E.default.useContext(J.default),mn=Re!=null?Re:ln,{status:Dn,hasFeedback:Yn,feedbackIcon:Kn}=(0,E.useContext)(Q.FormItemInputContext),pn=(0,ye.getMergedStatus)(Dn,De),vt=(0,tt.hasPrefixSuffix)(Ae)||!!Yn,Nt=(0,E.useRef)(vt),An=(0,be.default)(je,!0),In=Mt=>{An(),nt==null||nt(Mt)},$n=Mt=>{An(),qe==null||qe(Mt)},pt=Mt=>{An(),or==null||or(Mt)},xe=(Yn||Ge)&&E.default.createElement(E.default.Fragment,null,Ge,Yn&&Kn),Fe=(0,ce.default)(Dt!=null?Dt:Pt==null?void 0:Pt.allowClear),[st,It]=(0,le.default)(en,tn);return Ut(E.default.createElement($.default,Object.assign({ref:(0,se.composeRef)(Be,je),prefixCls:zt,autoComplete:Pt==null?void 0:Pt.autoComplete},hn,{disabled:mn,onBlur:In,onFocus:$n,style:Object.assign(Object.assign({},Pt==null?void 0:Pt.style),yn),styles:Object.assign(Object.assign({},Pt==null?void 0:Pt.styles),Tn),suffix:xe,allowClear:Fe,className:(0,fe.default)(Zt,lr,he,rt,de,Pt==null?void 0:Pt.className),onChange:pt,addonAfter:yt&&E.default.createElement(ee.NoCompactStyle,null,E.default.createElement(Q.NoFormStyle,{override:!0,status:!0},yt)),addonBefore:Le&&E.default.createElement(ee.NoCompactStyle,null,E.default.createElement(Q.NoFormStyle,{override:!0,status:!0},Le)),classNames:Object.assign(Object.assign(Object.assign({},Lt),Pt==null?void 0:Pt.classNames),{input:(0,fe.default)({[`${zt}-sm`]:qt==="small",[`${zt}-lg`]:qt==="large",[`${zt}-rtl`]:an==="rtl"},Lt==null?void 0:Lt.input,(Ze=Pt==null?void 0:Pt.classNames)===null||Ze===void 0?void 0:Ze.input,U),variant:(0,fe.default)({[`${zt}-${st}`]:It},(0,ye.getStatusClassNames)(zt,pn)),affixWrapper:(0,fe.default)({[`${zt}-affix-wrapper-sm`]:qt==="small",[`${zt}-affix-wrapper-lg`]:qt==="large",[`${zt}-affix-wrapper-rtl`]:an==="rtl"},U),wrapper:(0,fe.default)({[`${zt}-group-rtl`]:an==="rtl"},U),groupWrapper:(0,fe.default)({[`${zt}-group-wrapper-sm`]:qt==="small",[`${zt}-group-wrapper-lg`]:qt==="large",[`${zt}-group-wrapper-rtl`]:an==="rtl",[`${zt}-group-wrapper-${st}`]:It},(0,ye.getStatusClassNames)(`${zt}-group-wrapper`,pn,Yn),U)})})))});var Pe=W.default=ft},14104:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),fe=E,$=q(D(93967)),se=q(D(43961)),ce=q(D(49314)),ye=D(71434),ae=D(13594),He=D(31929),J=q(D(93319)),me=q(D(14893)),Oe=q(D(65693)),Q=D(51130),le=q(D(96424)),ee=D(10815),be=q(D(89858)),et=function(gt,ft){var Pe={};for(var Ae in gt)Object.prototype.hasOwnProperty.call(gt,Ae)&&ft.indexOf(Ae)<0&&(Pe[Ae]=gt[Ae]);if(gt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Be=0,Ae=Object.getOwnPropertySymbols(gt);Be<Ae.length;Be++)ft.indexOf(Ae[Be])<0&&Object.prototype.propertyIsEnumerable.call(gt,Ae[Be])&&(Pe[Ae[Be]]=gt[Ae[Be]]);return Pe};const tt=(0,E.forwardRef)((gt,ft)=>{var Pe,Ae;const{prefixCls:Be,bordered:Ze=!0,size:ut,disabled:tn,status:De,allowClear:mt,classNames:Re,rootClassName:nt,className:qe,style:Ge,styles:Dt,variant:yt}=gt,Le=et(gt,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:Zt,direction:yn,textArea:Tn}=fe.useContext(He.ConfigContext),lr=(0,Oe.default)(ut),or=fe.useContext(J.default),Lt=tn!=null?tn:or,{status:en,hasFeedback:hn,feedbackIcon:Xn}=fe.useContext(Q.FormItemInputContext),an=(0,ye.getMergedStatus)(en,De),Pt=fe.useRef(null);fe.useImperativeHandle(ft,()=>{var qt;return{resizableTextArea:(qt=Pt.current)===null||qt===void 0?void 0:qt.resizableTextArea,focus:ln=>{var mn,Dn;(0,ee.triggerFocus)((Dn=(mn=Pt.current)===null||mn===void 0?void 0:mn.resizableTextArea)===null||Dn===void 0?void 0:Dn.textArea,ln)},blur:()=>{var ln;return(ln=Pt.current)===null||ln===void 0?void 0:ln.blur()}}});const zt=Zt("input",Be),je=(0,me.default)(zt),[rt,Ut,U]=(0,be.default)(zt,je),[he,ot]=(0,le.default)(yt,Ze),de=(0,ce.default)(mt!=null?mt:Tn==null?void 0:Tn.allowClear);return rt(fe.createElement(se.default,Object.assign({autoComplete:Tn==null?void 0:Tn.autoComplete},Le,{style:Object.assign(Object.assign({},Tn==null?void 0:Tn.style),Ge),styles:Object.assign(Object.assign({},Tn==null?void 0:Tn.styles),Dt),disabled:Lt,allowClear:de,className:(0,$.default)(U,je,qe,nt,Tn==null?void 0:Tn.className),classNames:Object.assign(Object.assign(Object.assign({},Re),Tn==null?void 0:Tn.classNames),{textarea:(0,$.default)({[`${zt}-sm`]:lr==="small",[`${zt}-lg`]:lr==="large"},Ut,Re==null?void 0:Re.textarea,(Pe=Tn==null?void 0:Tn.classNames)===null||Pe===void 0?void 0:Pe.textarea),variant:(0,$.default)({[`${zt}-${he}`]:ot},(0,ye.getStatusClassNames)(zt,an)),affixWrapper:(0,$.default)(`${zt}-textarea-affix-wrapper`,{[`${zt}-affix-wrapper-rtl`]:yn==="rtl",[`${zt}-affix-wrapper-sm`]:lr==="small",[`${zt}-affix-wrapper-lg`]:lr==="large",[`${zt}-textarea-show-count`]:gt.showCount||((Ae=gt.count)===null||Ae===void 0?void 0:Ae.show)},Ut)}),prefixCls:zt,suffix:hn&&fe.createElement("span",{className:`${zt}-textarea-suffix`},Xn),ref:Pt})))});var wt=W.default=tt},81722:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=G;var q=D(67294);function G(E,fe){const $=(0,q.useRef)([]),se=()=>{$.current.push(setTimeout(()=>{var ce,ye,ae,He;!((ce=E.current)===null||ce===void 0)&&ce.input&&((ye=E.current)===null||ye===void 0?void 0:ye.input.getAttribute("type"))==="password"&&(!((ae=E.current)===null||ae===void 0)&&ae.input.hasAttribute("value"))&&((He=E.current)===null||He===void 0||He.input.removeAttribute("value"))}))};return(0,q.useEffect)(()=>(fe&&se(),()=>$.current.forEach(ce=>{ce&&clearTimeout(ce)})),[]),se}},89858:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genPlaceholderStyle=W.genInputSmallStyle=W.genInputGroupStyle=W.genBasicInputStyle=W.genActiveStyle=W.default=void 0,Object.defineProperty(W,"initComponentToken",{enumerable:!0,get:function(){return $.initComponentToken}}),Object.defineProperty(W,"initInputToken",{enumerable:!0,get:function(){return $.initInputToken}});var q=D(6731),G=D(98078),E=D(78793),fe=D(3184),$=D(25735),se=D(58594);const ce=gt=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:gt,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});W.genPlaceholderStyle=ce;const ye=gt=>({borderColor:gt.activeBorderColor,boxShadow:gt.activeShadow,outline:0,backgroundColor:gt.activeBg});W.genActiveStyle=ye;const ae=gt=>{const{paddingBlockLG:ft,lineHeightLG:Pe,borderRadiusLG:Ae,paddingInlineLG:Be}=gt;return{padding:`${(0,q.unit)(ft)} ${(0,q.unit)(Be)}`,fontSize:gt.inputFontSizeLG,lineHeight:Pe,borderRadius:Ae}},He=gt=>({padding:`${(0,q.unit)(gt.paddingBlockSM)} ${(0,q.unit)(gt.paddingInlineSM)}`,fontSize:gt.inputFontSizeSM,borderRadius:gt.borderRadiusSM});W.genInputSmallStyle=He;const J=gt=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,q.unit)(gt.paddingBlock)} ${(0,q.unit)(gt.paddingInline)}`,color:gt.colorText,fontSize:gt.inputFontSize,lineHeight:gt.lineHeight,borderRadius:gt.borderRadius,transition:`all ${gt.motionDurationMid}`},ce(gt.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:gt.controlHeight,lineHeight:gt.lineHeight,verticalAlign:"bottom",transition:`all ${gt.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},ae(gt)),"&-sm":Object.assign({},He(gt)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}});W.genBasicInputStyle=J;const me=gt=>{const{componentCls:ft,antCls:Pe}=gt;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:gt.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${ft}, &-lg > ${ft}-group-addon`]:Object.assign({},ae(gt)),[`&-sm ${ft}, &-sm > ${ft}-group-addon`]:Object.assign({},He(gt)),[`&-lg ${Pe}-select-single ${Pe}-select-selector`]:{height:gt.controlHeightLG},[`&-sm ${Pe}-select-single ${Pe}-select-selector`]:{height:gt.controlHeightSM},[`> ${ft}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${ft}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,q.unit)(gt.paddingInline)}`,color:gt.colorText,fontWeight:"normal",fontSize:gt.inputFontSize,textAlign:"center",borderRadius:gt.borderRadius,transition:`all ${gt.motionDurationSlow}`,lineHeight:1,[`${Pe}-select`]:{margin:`${(0,q.unit)(gt.calc(gt.paddingBlock).add(1).mul(-1).equal())} ${(0,q.unit)(gt.calc(gt.paddingInline).mul(-1).equal())}`,[`&${Pe}-select-single:not(${Pe}-select-customize-input):not(${Pe}-pagination-size-changer)`]:{[`${Pe}-select-selector`]:{backgroundColor:"inherit",border:`${(0,q.unit)(gt.lineWidth)} ${gt.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Pe}-select-selector`]:{color:gt.colorPrimary}}},[`${Pe}-cascader-picker`]:{margin:`-9px ${(0,q.unit)(gt.calc(gt.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${Pe}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${ft}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${ft}-search-with-button &`]:{zIndex:0}}},[`> ${ft}:first-child, ${ft}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Pe}-select ${Pe}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${ft}-affix-wrapper`]:{[`&:not(:first-child) ${ft}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${ft}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${ft}:last-child, ${ft}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Pe}-select ${Pe}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${ft}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${ft}-search &`]:{borderStartStartRadius:gt.borderRadius,borderEndStartRadius:gt.borderRadius}},[`&:not(:first-child), ${ft}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${ft}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,G.clearFix)()),{[`${ft}-group-addon, ${ft}-group-wrap, > ${ft}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:gt.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${ft}-affix-wrapper,
        & > ${ft}-number-affix-wrapper,
        & > ${Pe}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:gt.calc(gt.lineWidth).mul(-1).equal(),borderInlineEndWidth:gt.lineWidth},[`${ft}`]:{float:"none"},[`& > ${Pe}-select > ${Pe}-select-selector,
      & > ${Pe}-select-auto-complete ${ft},
      & > ${Pe}-cascader-picker ${ft},
      & > ${ft}-group-wrapper ${ft}`]:{borderInlineEndWidth:gt.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${Pe}-select-focused`]:{zIndex:1},[`& > ${Pe}-select > ${Pe}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Pe}-select:first-child > ${Pe}-select-selector,
      & > ${Pe}-select-auto-complete:first-child ${ft},
      & > ${Pe}-cascader-picker:first-child ${ft}`]:{borderStartStartRadius:gt.borderRadius,borderEndStartRadius:gt.borderRadius},[`& > *:last-child,
      & > ${Pe}-select:last-child > ${Pe}-select-selector,
      & > ${Pe}-cascader-picker:last-child ${ft},
      & > ${Pe}-cascader-picker-focused:last-child ${ft}`]:{borderInlineEndWidth:gt.lineWidth,borderStartEndRadius:gt.borderRadius,borderEndEndRadius:gt.borderRadius},[`& > ${Pe}-select-auto-complete ${ft}`]:{verticalAlign:"top"},[`${ft}-group-wrapper + ${ft}-group-wrapper`]:{marginInlineStart:gt.calc(gt.lineWidth).mul(-1).equal(),[`${ft}-affix-wrapper`]:{borderRadius:0}},[`${ft}-group-wrapper:not(:last-child)`]:{[`&${ft}-search > ${ft}-group`]:{[`& > ${ft}-group-addon > ${ft}-search-button`]:{borderRadius:0},[`& > ${ft}`]:{borderStartStartRadius:gt.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:gt.borderRadius}}}})}};W.genInputGroupStyle=me;const Oe=gt=>{const{componentCls:ft,controlHeightSM:Pe,lineWidth:Ae,calc:Be}=gt,Ze=16,ut=Be(Pe).sub(Be(Ae).mul(2)).sub(Ze).div(2).equal();return{[ft]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,G.resetComponent)(gt)),J(gt)),(0,se.genOutlinedStyle)(gt)),(0,se.genFilledStyle)(gt)),(0,se.genBorderlessStyle)(gt)),{'&[type="color"]':{height:gt.controlHeight,[`&${ft}-lg`]:{height:gt.controlHeightLG},[`&${ft}-sm`]:{height:Pe,paddingTop:ut,paddingBottom:ut}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Q=gt=>{const{componentCls:ft}=gt;return{[`${ft}-clear-icon`]:{margin:0,color:gt.colorTextQuaternary,fontSize:gt.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${gt.motionDurationSlow}`,"&:hover":{color:gt.colorTextTertiary},"&:active":{color:gt.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,q.unit)(gt.inputAffixPadding)}`}}}},le=gt=>{const{componentCls:ft,inputAffixPadding:Pe,colorTextDescription:Ae,motionDurationSlow:Be,colorIcon:Ze,colorIconHover:ut,iconCls:tn}=gt;return{[`${ft}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},J(gt)),{display:"inline-flex",[`&:not(${ft}-disabled):hover`]:{zIndex:1,[`${ft}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${ft}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${ft}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:gt.paddingXS}},"&-show-count-suffix":{color:Ae},"&-show-count-has-suffix":{marginInlineEnd:gt.paddingXXS},"&-prefix":{marginInlineEnd:Pe},"&-suffix":{marginInlineStart:Pe}}}),Q(gt)),{[`${tn}${ft}-password-icon`]:{color:Ze,cursor:"pointer",transition:`all ${Be}`,"&:hover":{color:ut}}})}},ee=gt=>{const{componentCls:ft,borderRadiusLG:Pe,borderRadiusSM:Ae}=gt;return{[`${ft}-group`]:Object.assign(Object.assign(Object.assign({},(0,G.resetComponent)(gt)),me(gt)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${ft}-group-addon`]:{borderRadius:Pe,fontSize:gt.inputFontSizeLG}},"&-sm":{[`${ft}-group-addon`]:{borderRadius:Ae}}},(0,se.genOutlinedGroupStyle)(gt)),(0,se.genFilledGroupStyle)(gt)),{[`&:not(${ft}-compact-first-item):not(${ft}-compact-last-item)${ft}-compact-item`]:{[`${ft}, ${ft}-group-addon`]:{borderRadius:0}},[`&:not(${ft}-compact-last-item)${ft}-compact-first-item`]:{[`${ft}, ${ft}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${ft}-compact-first-item)${ft}-compact-last-item`]:{[`${ft}, ${ft}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${ft}-compact-last-item)${ft}-compact-item`]:{[`${ft}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},be=gt=>{const{componentCls:ft,antCls:Pe}=gt,Ae=`${ft}-search`;return{[Ae]:{[`${ft}`]:{"&:hover, &:focus":{borderColor:gt.colorPrimaryHover,[`+ ${ft}-group-addon ${Ae}-button:not(${Pe}-btn-primary)`]:{borderInlineStartColor:gt.colorPrimaryHover}}},[`${ft}-affix-wrapper`]:{borderRadius:0},[`${ft}-lg`]:{lineHeight:gt.calc(gt.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${ft}-group`]:{[`> ${ft}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${Ae}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:gt.borderRadius,borderEndEndRadius:gt.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${Ae}-button:not(${Pe}-btn-primary)`]:{color:gt.colorTextDescription,"&:hover":{color:gt.colorPrimaryHover},"&:active":{color:gt.colorPrimaryActive},[`&${Pe}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${Ae}-button`]:{height:gt.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${Ae}-button`]:{height:gt.controlHeightLG},[`&-small ${Ae}-button`]:{height:gt.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${ft}-compact-item`]:{[`&:not(${ft}-compact-last-item)`]:{[`${ft}-group-addon`]:{[`${ft}-search-button`]:{marginInlineEnd:gt.calc(gt.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${ft}-compact-first-item)`]:{[`${ft},${ft}-affix-wrapper`]:{borderRadius:0}},[`> ${ft}-group-addon ${ft}-search-button,
        > ${ft},
        ${ft}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${ft}-affix-wrapper-focused`]:{zIndex:2}}}}},et=gt=>{const{componentCls:ft,paddingLG:Pe}=gt,Ae=`${ft}-textarea`;return{[Ae]:{position:"relative","&-show-count":{[`> ${ft}`]:{height:"100%"},[`${ft}-data-count`]:{position:"absolute",bottom:gt.calc(gt.fontSize).mul(gt.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:gt.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${ft}`]:{paddingInlineEnd:Pe}},[`&-affix-wrapper${Ae}-has-feedback`]:{[`${ft}`]:{paddingInlineEnd:Pe}},[`&-affix-wrapper${ft}-affix-wrapper`]:{padding:0,[`> textarea${ft}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${ft}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${ft}-clear-icon`]:{position:"absolute",insetInlineEnd:gt.paddingXS,insetBlockStart:gt.paddingXS},[`${Ae}-suffix`]:{position:"absolute",top:0,insetInlineEnd:gt.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},tt=gt=>{const{componentCls:ft}=gt;return{[`${ft}-out-of-range`]:{[`&, & input, & textarea, ${ft}-show-count-suffix, ${ft}-data-count`]:{color:gt.colorError}}}};var wt=W.default=(0,fe.genStyleHooks)("Input",gt=>{const ft=(0,fe.mergeToken)(gt,(0,$.initInputToken)(gt));return[Oe(ft),et(ft),le(ft),ee(ft),be(ft),tt(ft),(0,E.genCompactItemStyle)(ft)]},$.initComponentToken)},25735:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.initComponentToken=void 0,W.initInputToken=G;var q=D(3184);function G(fe){return(0,q.mergeToken)(fe,{inputAffixPadding:fe.paddingXXS})}const E=fe=>{const{controlHeight:$,fontSize:se,lineHeight:ce,lineWidth:ye,controlHeightSM:ae,controlHeightLG:He,fontSizeLG:J,lineHeightLG:me,paddingSM:Oe,controlPaddingHorizontalSM:Q,controlPaddingHorizontal:le,colorFillAlter:ee,colorPrimaryHover:be,colorPrimary:et,controlOutlineWidth:tt,controlOutline:wt,colorErrorOutline:gt,colorWarningOutline:ft,colorBgContainer:Pe}=fe;return{paddingBlock:Math.max(Math.round(($-se*ce)/2*10)/10-ye,0),paddingBlockSM:Math.max(Math.round((ae-se*ce)/2*10)/10-ye,0),paddingBlockLG:Math.ceil((He-J*me)/2*10)/10-ye,paddingInline:Oe-ye,paddingInlineSM:Q-ye,paddingInlineLG:le-ye,addonBg:ee,activeBorderColor:et,hoverBorderColor:be,activeShadow:`0 0 0 ${tt}px ${wt}`,errorActiveShadow:`0 0 0 ${tt}px ${gt}`,warningActiveShadow:`0 0 0 ${tt}px ${ft}`,hoverBg:Pe,activeBg:Pe,inputFontSize:se,inputFontSizeLG:J,inputFontSizeSM:se}};W.initComponentToken=E},58594:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genOutlinedStyle=W.genOutlinedGroupStyle=W.genHoverStyle=W.genFilledStyle=W.genFilledGroupStyle=W.genDisabledStyle=W.genBorderlessStyle=W.genBaseOutlinedStyle=void 0;var q=D(6731),G=D(3184);const E=ee=>({borderColor:ee.hoverBorderColor,backgroundColor:ee.hoverBg});W.genHoverStyle=E;const fe=ee=>({color:ee.colorTextDisabled,backgroundColor:ee.colorBgContainerDisabled,borderColor:ee.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},E((0,G.mergeToken)(ee,{hoverBorderColor:ee.colorBorder,hoverBg:ee.colorBgContainerDisabled})))});W.genDisabledStyle=fe;const $=(ee,be)=>({background:ee.colorBgContainer,borderWidth:ee.lineWidth,borderStyle:ee.lineType,borderColor:be.borderColor,"&:hover":{borderColor:be.hoverBorderColor,backgroundColor:ee.hoverBg},"&:focus, &:focus-within":{borderColor:be.activeBorderColor,boxShadow:be.activeShadow,outline:0,backgroundColor:ee.activeBg}});W.genBaseOutlinedStyle=$;const se=(ee,be)=>({[`&${ee.componentCls}-status-${be.status}:not(${ee.componentCls}-disabled)`]:Object.assign(Object.assign({},$(ee,be)),{[`${ee.componentCls}-prefix, ${ee.componentCls}-suffix`]:{color:be.affixColor}})}),ce=(ee,be)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$(ee,{borderColor:ee.colorBorder,hoverBorderColor:ee.hoverBorderColor,activeBorderColor:ee.activeBorderColor,activeShadow:ee.activeShadow})),{[`&${ee.componentCls}-disabled, &[disabled]`]:Object.assign({},fe(ee))}),se(ee,{status:"error",borderColor:ee.colorError,hoverBorderColor:ee.colorErrorBorderHover,activeBorderColor:ee.colorError,activeShadow:ee.errorActiveShadow,affixColor:ee.colorError})),se(ee,{status:"warning",borderColor:ee.colorWarning,hoverBorderColor:ee.colorWarningBorderHover,activeBorderColor:ee.colorWarning,activeShadow:ee.warningActiveShadow,affixColor:ee.colorWarning})),be)});W.genOutlinedStyle=ce;const ye=(ee,be)=>({[`&${ee.componentCls}-group-wrapper-status-${be.status}`]:{[`${ee.componentCls}-group-addon`]:{borderColor:be.addonBorderColor,color:be.addonColor}}}),ae=ee=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${ee.componentCls}-group`]:{"&-addon":{background:ee.addonBg,border:`${(0,q.unit)(ee.lineWidth)} ${ee.lineType} ${ee.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},ye(ee,{status:"error",addonBorderColor:ee.colorError,addonColor:ee.colorErrorText})),ye(ee,{status:"warning",addonBorderColor:ee.colorWarning,addonColor:ee.colorWarningText})),{[`&${ee.componentCls}-group-wrapper-disabled`]:{[`${ee.componentCls}-group-addon`]:Object.assign({},fe(ee))}})});W.genOutlinedGroupStyle=ae;const He=(ee,be)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${ee.componentCls}-disabled, &[disabled]`]:{color:ee.colorTextDisabled}},be)});W.genBorderlessStyle=He;const J=(ee,be)=>({background:be.bg,borderWidth:ee.lineWidth,borderStyle:ee.lineType,borderColor:"transparent",["input&, & input, textarea&, & textarea"]:{color:be==null?void 0:be.inputColor},"&:hover":{background:be.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:be.activeBorderColor,backgroundColor:ee.activeBg}}),me=(ee,be)=>({[`&${ee.componentCls}-status-${be.status}:not(${ee.componentCls}-disabled)`]:Object.assign(Object.assign({},J(ee,be)),{[`${ee.componentCls}-prefix, ${ee.componentCls}-suffix`]:{color:be.affixColor}})}),Oe=(ee,be)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},J(ee,{bg:ee.colorFillTertiary,hoverBg:ee.colorFillSecondary,activeBorderColor:ee.colorPrimary})),{[`&${ee.componentCls}-disabled, &[disabled]`]:Object.assign({},fe(ee))}),me(ee,{status:"error",bg:ee.colorErrorBg,hoverBg:ee.colorErrorBgHover,activeBorderColor:ee.colorError,inputColor:ee.colorErrorText,affixColor:ee.colorError})),me(ee,{status:"warning",bg:ee.colorWarningBg,hoverBg:ee.colorWarningBgHover,activeBorderColor:ee.colorWarning,inputColor:ee.colorWarningText,affixColor:ee.colorWarning})),be)});W.genFilledStyle=Oe;const Q=(ee,be)=>({[`&${ee.componentCls}-group-wrapper-status-${be.status}`]:{[`${ee.componentCls}-group-addon`]:{background:be.addonBg,color:be.addonColor}}}),le=ee=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${ee.componentCls}-group`]:{"&-addon":{background:ee.colorFillTertiary},[`${ee.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${(0,q.unit)(ee.lineWidth)} ${ee.lineType} ${ee.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${(0,q.unit)(ee.lineWidth)} ${ee.lineType} ${ee.colorSplit}`}}}},Q(ee,{status:"error",addonBg:ee.colorErrorBg,addonColor:ee.colorErrorText})),Q(ee,{status:"warning",addonBg:ee.colorWarningBg,addonColor:ee.colorWarningText})),{[`&${ee.componentCls}-group-wrapper-disabled`]:{[`${ee.componentCls}-group`]:{"&-addon":{background:ee.colorFillTertiary,color:ee.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,q.unit)(ee.lineWidth)} ${ee.lineType} ${ee.colorBorder}`,borderTop:`${(0,q.unit)(ee.lineWidth)} ${ee.lineType} ${ee.colorBorder}`,borderBottom:`${(0,q.unit)(ee.lineWidth)} ${ee.lineType} ${ee.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,q.unit)(ee.lineWidth)} ${ee.lineType} ${ee.colorBorder}`,borderTop:`${(0,q.unit)(ee.lineWidth)} ${ee.lineType} ${ee.colorBorder}`,borderBottom:`${(0,q.unit)(ee.lineWidth)} ${ee.lineType} ${ee.colorBorder}`}}}})});W.genFilledGroupStyle=le},36714:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.hasPrefixSuffix=D;function D(q){return!!(q.prefix||q.suffix||q.allowClear||q.showCount)}},44805:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var q=D(67294);const G=(0,q.createContext)(void 0);var E=W.default=G},18253:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(62273)),E=q(D(1028)),fe=q(D(25633)),$=q(D(52040));const se="${label} is not a valid ${type}",ce={locale:"en",Pagination:G.default,DatePicker:fe.default,TimePicker:$.default,Calendar:E.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:se,method:se,array:se,object:se,number:se,date:se,boolean:se,integer:se,float:se,regexp:se,email:se,url:se,hex:se},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};var ye=W.default=ce},24522:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=W.ANT_MARK=void 0,Object.defineProperty(W,"useLocale",{enumerable:!0,get:function(){return ce.default}});var E=G(D(67294)),fe=D(13594),$=D(10625),se=q(D(44805)),ce=q(D(76647));const ye=W.ANT_MARK="internalMark",ae=J=>{const{locale:me={},children:Oe,_ANT_MARK__:Q}=J;E.useEffect(()=>(0,$.changeConfirmLocale)(me&&me.Modal),[me]);const le=E.useMemo(()=>Object.assign(Object.assign({},me),{exist:!0}),[me]);return E.createElement(se.default.Provider,{value:le},Oe)};var He=W.default=ae},76647:function(_t,W,D){"use strict";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),fe=q(D(44805)),$=q(D(18253));const se=(ye,ae)=>{const He=E.useContext(fe.default),J=E.useMemo(()=>{var Oe;const Q=ae||$.default[ye],le=(Oe=He==null?void 0:He[ye])!==null&&Oe!==void 0?Oe:{};return Object.assign(Object.assign({},typeof Q=="function"?Q():Q),le||{})},[ye,ae,He]),me=E.useMemo(()=>{const Oe=He==null?void 0:He.locale;return He!=null&&He.exist&&!Oe?$.default.locale:Oe},[He]);return[J,me]};var ce=W.default=se},10625:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.changeConfirmLocale=se,W.getConfirmLocale=ce;var G=q(D(18253));let E=Object.assign({},G.default.Modal),fe=[];const $=()=>fe.reduce((ye,ae)=>Object.assign(Object.assign({},ye),ae),G.default.Modal);function se(ye){if(ye){const ae=Object.assign({},ye);return fe.push(ae),E=$(),()=>{fe=fe.filter(He=>He!==ae),E=$()}}E=Object.assign({},G.default.Modal)}function ce(){return E}},46549:function(_t,W,D){"use strict";"use client";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.useCompactItemContext=W.default=W.SpaceCompactItemContext=W.NoCompactStyle=void 0;var E=G(D(93967)),fe=G(D(45598)),$=q(D(67294)),se=D(31929),ce=G(D(65693)),ye=G(D(54277)),ae=function(ee,be){var et={};for(var tt in ee)Object.prototype.hasOwnProperty.call(ee,tt)&&be.indexOf(tt)<0&&(et[tt]=ee[tt]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,tt=Object.getOwnPropertySymbols(ee);wt<tt.length;wt++)be.indexOf(tt[wt])<0&&Object.prototype.propertyIsEnumerable.call(ee,tt[wt])&&(et[tt[wt]]=ee[tt[wt]]);return et};const He=W.SpaceCompactItemContext=$.createContext(null),J=(ee,be)=>{const et=$.useContext(He),tt=$.useMemo(()=>{if(!et)return"";const{compactDirection:wt,isFirstItem:gt,isLastItem:ft}=et,Pe=wt==="vertical"?"-vertical-":"-";return(0,E.default)(`${ee}-compact${Pe}item`,{[`${ee}-compact${Pe}first-item`]:gt,[`${ee}-compact${Pe}last-item`]:ft,[`${ee}-compact${Pe}item-rtl`]:be==="rtl"})},[ee,be,et]);return{compactSize:et==null?void 0:et.compactSize,compactDirection:et==null?void 0:et.compactDirection,compactItemClassnames:tt}};W.useCompactItemContext=J;const me=ee=>{let{children:be}=ee;return $.createElement(He.Provider,{value:null},be)};W.NoCompactStyle=me;const Oe=ee=>{var{children:be}=ee,et=ae(ee,["children"]);return $.createElement(He.Provider,{value:et},be)},Q=ee=>{const{getPrefixCls:be,direction:et}=$.useContext(se.ConfigContext),{size:tt,direction:wt,block:gt,prefixCls:ft,className:Pe,rootClassName:Ae,children:Be}=ee,Ze=ae(ee,["size","direction","block","prefixCls","className","rootClassName","children"]),ut=(0,ce.default)(Dt=>tt!=null?tt:Dt),tn=be("space-compact",ft),[De,mt]=(0,ye.default)(tn),Re=(0,E.default)(tn,mt,{[`${tn}-rtl`]:et==="rtl",[`${tn}-block`]:gt,[`${tn}-vertical`]:wt==="vertical"},Pe,Ae),nt=$.useContext(He),qe=(0,fe.default)(Be),Ge=$.useMemo(()=>qe.map((Dt,yt)=>{const Le=Dt&&Dt.key||`${tn}-item-${yt}`;return $.createElement(Oe,{key:Le,compactSize:ut,compactDirection:wt,isFirstItem:yt===0&&(!nt||(nt==null?void 0:nt.isFirstItem)),isLastItem:yt===qe.length-1&&(!nt||(nt==null?void 0:nt.isLastItem))},Dt)}),[tt,qe,nt]);return qe.length===0?null:De($.createElement("div",Object.assign({className:Re},Ze),Ge))};var le=W.default=Q},35969:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=G=>{const{componentCls:E}=G;return{[E]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var q=W.default=D},54277:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.prepareComponentToken=W.default=void 0;var G=D(3184),E=q(D(35969));const fe=ye=>{const{componentCls:ae,antCls:He}=ye;return{[ae]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${ae}-item:empty`]:{display:"none"},[`${ae}-item > ${He}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},$=ye=>{const{componentCls:ae}=ye;return{[ae]:{"&-gap-row-small":{rowGap:ye.spaceGapSmallSize},"&-gap-row-middle":{rowGap:ye.spaceGapMiddleSize},"&-gap-row-large":{rowGap:ye.spaceGapLargeSize},"&-gap-col-small":{columnGap:ye.spaceGapSmallSize},"&-gap-col-middle":{columnGap:ye.spaceGapMiddleSize},"&-gap-col-large":{columnGap:ye.spaceGapLargeSize}}}},se=()=>({});W.prepareComponentToken=se;var ce=W.default=(0,G.genStyleHooks)("Space",ye=>{const ae=(0,G.mergeToken)(ye,{spaceGapSmallSize:ye.paddingXS,spaceGapMiddleSize:ye.padding,spaceGapLargeSize:ye.paddingLG});return[fe(ae),$(ae),(0,E.default)(ae)]},()=>({}),{resetStyle:!1})},78793:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genCompactItemStyle=G;function D(E,fe,$){const{focusElCls:se,focus:ce,borderElCls:ye}=$,ae=ye?"> *":"",He=["hover",ce?"focus":null,"active"].filter(Boolean).map(J=>`&:${J} ${ae}`).join(",");return{[`&-item:not(${fe}-last-item)`]:{marginInlineEnd:E.calc(E.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[He]:{zIndex:2}},se?{[`&${se}`]:{zIndex:2}}:{}),{[`&[disabled] ${ae}`]:{zIndex:0}})}}function q(E,fe,$){const{borderElCls:se}=$,ce=se?`> ${se}`:"";return{[`&-item:not(${fe}-first-item):not(${fe}-last-item) ${ce}`]:{borderRadius:0},[`&-item:not(${fe}-last-item)${fe}-first-item`]:{[`& ${ce}, &${E}-sm ${ce}, &${E}-lg ${ce}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${fe}-first-item)${fe}-last-item`]:{[`& ${ce}, &${E}-sm ${ce}, &${E}-lg ${ce}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function G(E){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:$}=E,se=`${$}-compact`;return{[se]:Object.assign(Object.assign({},D(E,se,fe)),q($,se,fe))}}},98078:function(_t,W,D){"use strict";"use client";Object.defineProperty(W,"__esModule",{value:!0}),W.genLinkStyle=W.genFocusStyle=W.genFocusOutline=W.genCommonStyle=W.clearFix=void 0,Object.defineProperty(W,"operationUnit",{enumerable:!0,get:function(){return G.operationUnit}}),W.textEllipsis=W.resetIcon=W.resetComponent=void 0;var q=D(6731),G=D(22548);const E=W.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},fe=function(J){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:J.colorText,fontSize:J.fontSize,lineHeight:J.lineHeight,listStyle:"none",fontFamily:me?"inherit":J.fontFamily}};W.resetComponent=fe;const $=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});W.resetIcon=$;const se=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});W.clearFix=se;const ce=J=>({a:{color:J.colorLink,textDecoration:J.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${J.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:J.colorLinkHover},"&:active":{color:J.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:J.linkHoverDecoration,outline:0},"&:focus":{textDecoration:J.linkFocusDecoration,outline:0},"&[disabled]":{color:J.colorTextDisabled,cursor:"not-allowed"}}});W.genLinkStyle=ce;const ye=(J,me,Oe)=>{const{fontFamily:Q,fontSize:le}=J,ee=`[class^="${me}"], [class*=" ${me}"]`;return{[Oe?`.${Oe}`:ee]:{fontFamily:Q,fontSize:le,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[ee]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}};W.genCommonStyle=ye;const ae=J=>({outline:`${(0,q.unit)(J.lineWidthFocus)} solid ${J.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});W.genFocusOutline=ae;const He=J=>({"&:focus-visible":Object.assign({},ae(J))});W.genFocusStyle=He},57253:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=G=>({[G.componentCls]:{[`${G.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${G.motionDurationMid} ${G.motionEaseInOut},
        opacity ${G.motionDurationMid} ${G.motionEaseInOut} !important`}},[`${G.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${G.motionDurationMid} ${G.motionEaseInOut},
        opacity ${G.motionDurationMid} ${G.motionEaseInOut} !important`}}});var q=W.default=D},84460:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.initFadeMotion=W.fadeOut=W.fadeIn=void 0;var q=D(6731),G=D(94631);const E=W.fadeIn=new q.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),fe=W.fadeOut=new q.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),$=function(se){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:ye}=se,ae=`${ye}-fade`,He=ce?"&":"";return[(0,G.initMotion)(ae,E,fe,se.motionDurationMid,ce),{[`
        ${He}${ae}-enter,
        ${He}${ae}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${He}${ae}-leave`]:{animationTimingFunction:"linear"}}]};W.initFadeMotion=$},42836:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"fadeIn",{enumerable:!0,get:function(){return G.fadeIn}}),Object.defineProperty(W,"fadeOut",{enumerable:!0,get:function(){return G.fadeOut}}),Object.defineProperty(W,"genCollapseMotion",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(W,"initFadeMotion",{enumerable:!0,get:function(){return G.initFadeMotion}}),Object.defineProperty(W,"initMoveMotion",{enumerable:!0,get:function(){return E.initMoveMotion}}),Object.defineProperty(W,"initSlideMotion",{enumerable:!0,get:function(){return fe.initSlideMotion}}),Object.defineProperty(W,"initZoomMotion",{enumerable:!0,get:function(){return $.initZoomMotion}}),Object.defineProperty(W,"moveDownIn",{enumerable:!0,get:function(){return E.moveDownIn}}),Object.defineProperty(W,"moveDownOut",{enumerable:!0,get:function(){return E.moveDownOut}}),Object.defineProperty(W,"moveLeftIn",{enumerable:!0,get:function(){return E.moveLeftIn}}),Object.defineProperty(W,"moveLeftOut",{enumerable:!0,get:function(){return E.moveLeftOut}}),Object.defineProperty(W,"moveRightIn",{enumerable:!0,get:function(){return E.moveRightIn}}),Object.defineProperty(W,"moveRightOut",{enumerable:!0,get:function(){return E.moveRightOut}}),Object.defineProperty(W,"moveUpIn",{enumerable:!0,get:function(){return E.moveUpIn}}),Object.defineProperty(W,"moveUpOut",{enumerable:!0,get:function(){return E.moveUpOut}}),Object.defineProperty(W,"slideDownIn",{enumerable:!0,get:function(){return fe.slideDownIn}}),Object.defineProperty(W,"slideDownOut",{enumerable:!0,get:function(){return fe.slideDownOut}}),Object.defineProperty(W,"slideLeftIn",{enumerable:!0,get:function(){return fe.slideLeftIn}}),Object.defineProperty(W,"slideLeftOut",{enumerable:!0,get:function(){return fe.slideLeftOut}}),Object.defineProperty(W,"slideRightIn",{enumerable:!0,get:function(){return fe.slideRightIn}}),Object.defineProperty(W,"slideRightOut",{enumerable:!0,get:function(){return fe.slideRightOut}}),Object.defineProperty(W,"slideUpIn",{enumerable:!0,get:function(){return fe.slideUpIn}}),Object.defineProperty(W,"slideUpOut",{enumerable:!0,get:function(){return fe.slideUpOut}}),Object.defineProperty(W,"zoomBigIn",{enumerable:!0,get:function(){return $.zoomBigIn}}),Object.defineProperty(W,"zoomBigOut",{enumerable:!0,get:function(){return $.zoomBigOut}}),Object.defineProperty(W,"zoomDownIn",{enumerable:!0,get:function(){return $.zoomDownIn}}),Object.defineProperty(W,"zoomDownOut",{enumerable:!0,get:function(){return $.zoomDownOut}}),Object.defineProperty(W,"zoomIn",{enumerable:!0,get:function(){return $.zoomIn}}),Object.defineProperty(W,"zoomLeftIn",{enumerable:!0,get:function(){return $.zoomLeftIn}}),Object.defineProperty(W,"zoomLeftOut",{enumerable:!0,get:function(){return $.zoomLeftOut}}),Object.defineProperty(W,"zoomOut",{enumerable:!0,get:function(){return $.zoomOut}}),Object.defineProperty(W,"zoomRightIn",{enumerable:!0,get:function(){return $.zoomRightIn}}),Object.defineProperty(W,"zoomRightOut",{enumerable:!0,get:function(){return $.zoomRightOut}}),Object.defineProperty(W,"zoomUpIn",{enumerable:!0,get:function(){return $.zoomUpIn}}),Object.defineProperty(W,"zoomUpOut",{enumerable:!0,get:function(){return $.zoomUpOut}});var G=D(84460),E=D(17060),fe=D(17581),$=D(99269),se=q(D(57253))},94631:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.initMotion=void 0;const D=E=>({animationDuration:E,animationFillMode:"both"}),q=E=>({animationDuration:E,animationFillMode:"both"}),G=function(E,fe,$,se){const ye=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${ye}${E}-enter,
      ${ye}${E}-appear
    `]:Object.assign(Object.assign({},D(se)),{animationPlayState:"paused"}),[`${ye}${E}-leave`]:Object.assign(Object.assign({},q(se)),{animationPlayState:"paused"}),[`
      ${ye}${E}-enter${E}-enter-active,
      ${ye}${E}-appear${E}-appear-active
    `]:{animationName:fe,animationPlayState:"running"},[`${ye}${E}-leave${E}-leave-active`]:{animationName:$,animationPlayState:"running",pointerEvents:"none"}}};W.initMotion=G},17060:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.moveUpOut=W.moveUpIn=W.moveRightOut=W.moveRightIn=W.moveLeftOut=W.moveLeftIn=W.moveDownOut=W.moveDownIn=W.initMoveMotion=void 0;var q=D(6731),G=D(94631);const E=W.moveDownIn=new q.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),fe=W.moveDownOut=new q.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),$=W.moveLeftIn=new q.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),se=W.moveLeftOut=new q.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),ce=W.moveRightIn=new q.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ye=W.moveRightOut=new q.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),ae=W.moveUpIn=new q.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),He=W.moveUpOut=new q.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),J={"move-up":{inKeyframes:ae,outKeyframes:He},"move-down":{inKeyframes:E,outKeyframes:fe},"move-left":{inKeyframes:$,outKeyframes:se},"move-right":{inKeyframes:ce,outKeyframes:ye}},me=(Oe,Q)=>{const{antCls:le}=Oe,ee=`${le}-${Q}`,{inKeyframes:be,outKeyframes:et}=J[Q];return[(0,G.initMotion)(ee,be,et,Oe.motionDurationMid),{[`
        ${ee}-enter,
        ${ee}-appear
      `]:{opacity:0,animationTimingFunction:Oe.motionEaseOutCirc},[`${ee}-leave`]:{animationTimingFunction:Oe.motionEaseInOutCirc}}]};W.initMoveMotion=me},17581:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.slideUpOut=W.slideUpIn=W.slideRightOut=W.slideRightIn=W.slideLeftOut=W.slideLeftIn=W.slideDownOut=W.slideDownIn=W.initSlideMotion=void 0;var q=D(6731),G=D(94631);const E=W.slideUpIn=new q.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),fe=W.slideUpOut=new q.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),$=W.slideDownIn=new q.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),se=W.slideDownOut=new q.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),ce=W.slideLeftIn=new q.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),ye=W.slideLeftOut=new q.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),ae=W.slideRightIn=new q.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),He=W.slideRightOut=new q.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),J={"slide-up":{inKeyframes:E,outKeyframes:fe},"slide-down":{inKeyframes:$,outKeyframes:se},"slide-left":{inKeyframes:ce,outKeyframes:ye},"slide-right":{inKeyframes:ae,outKeyframes:He}},me=(Oe,Q)=>{const{antCls:le}=Oe,ee=`${le}-${Q}`,{inKeyframes:be,outKeyframes:et}=J[Q];return[(0,G.initMotion)(ee,be,et,Oe.motionDurationMid),{[`
      ${ee}-enter,
      ${ee}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:Oe.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${ee}-leave`]:{animationTimingFunction:Oe.motionEaseInQuint}}]};W.initSlideMotion=me},99269:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.zoomUpOut=W.zoomUpIn=W.zoomRightOut=W.zoomRightIn=W.zoomOut=W.zoomLeftOut=W.zoomLeftIn=W.zoomIn=W.zoomDownOut=W.zoomDownIn=W.zoomBigOut=W.zoomBigIn=W.initZoomMotion=void 0;var q=D(6731),G=D(94631);const E=W.zoomIn=new q.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),fe=W.zoomOut=new q.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),$=W.zoomBigIn=new q.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),se=W.zoomBigOut=new q.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),ce=W.zoomUpIn=new q.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),ye=W.zoomUpOut=new q.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),ae=W.zoomLeftIn=new q.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),He=W.zoomLeftOut=new q.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),J=W.zoomRightIn=new q.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),me=W.zoomRightOut=new q.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Oe=W.zoomDownIn=new q.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),Q=W.zoomDownOut=new q.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),le={zoom:{inKeyframes:E,outKeyframes:fe},"zoom-big":{inKeyframes:$,outKeyframes:se},"zoom-big-fast":{inKeyframes:$,outKeyframes:se},"zoom-left":{inKeyframes:ae,outKeyframes:He},"zoom-right":{inKeyframes:J,outKeyframes:me},"zoom-up":{inKeyframes:ce,outKeyframes:ye},"zoom-down":{inKeyframes:Oe,outKeyframes:Q}},ee=(be,et)=>{const{antCls:tt}=be,wt=`${tt}-${et}`,{inKeyframes:gt,outKeyframes:ft}=le[et];return[(0,G.initMotion)(wt,gt,ft,et==="zoom-big-fast"?be.motionDurationFast:be.motionDurationMid),{[`
        ${wt}-enter,
        ${wt}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:be.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${wt}-leave`]:{animationTimingFunction:be.motionEaseInOutCirc}}]};W.initZoomMotion=ee},22548:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.operationUnit=void 0;const D=q=>({color:q.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${q.motionDurationSlow}`,"&:focus, &:hover":{color:q.colorLinkHover},"&:active":{color:q.colorLinkActive}});W.operationUnit=D},9064:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.MAX_VERTICAL_CONTENT_RADIUS=void 0,W.default=$,W.getArrowOffsetToken=E;var q=D(51337);const G=W.MAX_VERTICAL_CONTENT_RADIUS=8;function E(se){const{contentRadius:ce,limitVerticalRadius:ye}=se,ae=ce>12?ce+2:12;return{arrowOffsetHorizontal:ae,arrowOffsetVertical:ye?G:ae}}function fe(se,ce){return se?ce:{}}function $(se,ce,ye){const{componentCls:ae,boxShadowPopoverArrow:He,arrowOffsetVertical:J,arrowOffsetHorizontal:me}=se,{arrowDistance:Oe=0,arrowPlacement:Q={left:!0,right:!0,top:!0,bottom:!0}}=ye||{};return{[ae]:Object.assign(Object.assign(Object.assign(Object.assign({[`${ae}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,q.genRoundedArrow)(se,ce,He)),{"&:before":{background:ce}})]},fe(!!Q.top,{[[`&-placement-top > ${ae}-arrow`,`&-placement-topLeft > ${ae}-arrow`,`&-placement-topRight > ${ae}-arrow`].join(",")]:{bottom:Oe,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${ae}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${ae}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-topRight > ${ae}-arrow`]:{right:{_skip_check_:!0,value:me}}})),fe(!!Q.bottom,{[[`&-placement-bottom > ${ae}-arrow`,`&-placement-bottomLeft > ${ae}-arrow`,`&-placement-bottomRight > ${ae}-arrow`].join(",")]:{top:Oe,transform:"translateY(-100%)"},[`&-placement-bottom > ${ae}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${ae}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-bottomRight > ${ae}-arrow`]:{right:{_skip_check_:!0,value:me}}})),fe(!!Q.left,{[[`&-placement-left > ${ae}-arrow`,`&-placement-leftTop > ${ae}-arrow`,`&-placement-leftBottom > ${ae}-arrow`].join(",")]:{right:{_skip_check_:!0,value:Oe},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${ae}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${ae}-arrow`]:{top:J},[`&-placement-leftBottom > ${ae}-arrow`]:{bottom:J}})),fe(!!Q.right,{[[`&-placement-right > ${ae}-arrow`,`&-placement-rightTop > ${ae}-arrow`,`&-placement-rightBottom > ${ae}-arrow`].join(",")]:{left:{_skip_check_:!0,value:Oe},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${ae}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${ae}-arrow`]:{top:J},[`&-placement-rightBottom > ${ae}-arrow`]:{bottom:J}}))}}},51337:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.genRoundedArrow=void 0,W.getArrowToken=G;var q=D(6731);function G(fe){const{sizePopupArrow:$,borderRadiusXS:se,borderRadiusOuter:ce}=fe,ye=$/2,ae=0,He=ye,J=ce*1/Math.sqrt(2),me=ye-ce*(1-1/Math.sqrt(2)),Oe=ye-se*(1/Math.sqrt(2)),Q=ce*(Math.sqrt(2)-1)+se*(1/Math.sqrt(2)),le=2*ye-Oe,ee=Q,be=2*ye-J,et=me,tt=2*ye-ae,wt=He,gt=ye*Math.sqrt(2)+ce*(Math.sqrt(2)-2),ft=ce*(Math.sqrt(2)-1),Pe=`polygon(${ft}px 100%, 50% ${ft}px, ${2*ye-ft}px 100%, ${ft}px 100%)`,Ae=`path('M ${ae} ${He} A ${ce} ${ce} 0 0 0 ${J} ${me} L ${Oe} ${Q} A ${se} ${se} 0 0 1 ${le} ${ee} L ${be} ${et} A ${ce} ${ce} 0 0 0 ${tt} ${wt} Z')`;return{arrowShadowWidth:gt,arrowPath:Ae,arrowPolygon:Pe}}const E=(fe,$,se)=>{const{sizePopupArrow:ce,arrowPolygon:ye,arrowPath:ae,arrowShadowWidth:He,borderRadiusXS:J,calc:me}=fe;return{pointerEvents:"none",width:ce,height:ce,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:ce,height:me(ce).div(2).equal(),background:$,clipPath:{_multi_value_:!0,value:[ye,ae]},content:'""'},"&::after":{content:'""',position:"absolute",width:He,height:He,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,q.unit)(J)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:se,zIndex:0,background:"transparent"}}};W.genRoundedArrow=E},89329:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.defaultTheme=W.defaultConfig=W.DesignTokenContext=void 0;var G=q(D(67294)),E=D(6731),fe=q(D(9924)),$=q(D(98411));const se=W.defaultTheme=(0,E.createTheme)(fe.default),ce=W.defaultConfig={token:$.default,override:{override:$.default},hashed:!0},ye=W.DesignTokenContext=G.default.createContext(ce)},36496:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"PresetColors",{enumerable:!0,get:function(){return q.PresetColors}});var q=D(81342)},81342:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.PresetColors=void 0;const D=W.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(_t,W,D){"use strict";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"DesignTokenContext",{enumerable:!0,get:function(){return me.DesignTokenContext}}),Object.defineProperty(W,"PresetColors",{enumerable:!0,get:function(){return fe.PresetColors}}),Object.defineProperty(W,"calc",{enumerable:!0,get:function(){return He.default}}),Object.defineProperty(W,"defaultConfig",{enumerable:!0,get:function(){return me.defaultConfig}}),Object.defineProperty(W,"genComponentStyleHook",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(W,"genPresetColor",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(W,"genStyleHooks",{enumerable:!0,get:function(){return se.genStyleHooks}}),Object.defineProperty(W,"genSubStyleComponent",{enumerable:!0,get:function(){return se.genSubStyleComponent}}),Object.defineProperty(W,"getLineHeight",{enumerable:!0,get:function(){return J.getLineHeight}}),Object.defineProperty(W,"mergeToken",{enumerable:!0,get:function(){return ye.merge}}),Object.defineProperty(W,"statisticToken",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(W,"useResetIconStyle",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(W,"useStyleRegister",{enumerable:!0,get:function(){return E.useStyleRegister}}),Object.defineProperty(W,"useToken",{enumerable:!0,get:function(){return $.default}});var E=D(6731),fe=D(36496),$=G(D(41401)),se=q(D(3737)),ce=G(D(36219)),ye=q(D(99636)),ae=G(D(54894)),He=G(D(22996)),J=D(62231),me=D(89329)},26162:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getSolidColor=W.getAlphaColor=void 0;var q=D(131);const G=(fe,$)=>new q.TinyColor(fe).setAlpha($).toRgbString();W.getAlphaColor=G;const E=(fe,$)=>new q.TinyColor(fe).darken($).toHexString();W.getSolidColor=E},80373:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.generateNeutralColorPalettes=W.generateColorPalettes=void 0;var q=D(78589),G=D(26162);const E=$=>{const se=(0,q.generate)($);return{1:se[0],2:se[1],3:se[2],4:se[3],5:se[4],6:se[5],7:se[6],8:se[4],9:se[5],10:se[6]}};W.generateColorPalettes=E;const fe=($,se)=>{const ce=$||"#fff",ye=se||"#000";return{colorBgBase:ce,colorTextBase:ye,colorText:(0,G.getAlphaColor)(ye,.88),colorTextSecondary:(0,G.getAlphaColor)(ye,.65),colorTextTertiary:(0,G.getAlphaColor)(ye,.45),colorTextQuaternary:(0,G.getAlphaColor)(ye,.25),colorFill:(0,G.getAlphaColor)(ye,.15),colorFillSecondary:(0,G.getAlphaColor)(ye,.06),colorFillTertiary:(0,G.getAlphaColor)(ye,.04),colorFillQuaternary:(0,G.getAlphaColor)(ye,.02),colorBgLayout:(0,G.getSolidColor)(ce,4),colorBgContainer:(0,G.getSolidColor)(ce,0),colorBgElevated:(0,G.getSolidColor)(ce,0),colorBgSpotlight:(0,G.getAlphaColor)(ye,.85),colorBgBlur:"transparent",colorBorder:(0,G.getSolidColor)(ce,15),colorBorderSecondary:(0,G.getSolidColor)(ce,6)}};W.generateNeutralColorPalettes=fe},9924:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=He;var G=D(78589),E=q(D(54730)),fe=q(D(19216)),$=D(98411),se=q(D(10805)),ce=q(D(81594)),ye=D(80373),ae=q(D(69853));function He(J){const me=Object.keys($.defaultPresetColors).map(Oe=>{const Q=(0,G.generate)(J[Oe]);return new Array(10).fill(1).reduce((le,ee,be)=>(le[`${Oe}-${be+1}`]=Q[be],le[`${Oe}${be+1}`]=Q[be],le),{})}).reduce((Oe,Q)=>(Oe=Object.assign(Object.assign({},Oe),Q),Oe),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},J),me),(0,se.default)(J,{generateColorPalettes:ye.generateColorPalettes,generateNeutralColorPalettes:ye.generateNeutralColorPalettes})),(0,ae.default)(J.fontSize)),(0,fe.default)(J)),(0,E.default)(J)),(0,ce.default)(J))}},98411:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.defaultPresetColors=W.default=void 0;const D=W.defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},q=Object.assign(Object.assign({},D),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var G=W.default=q},10805:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=G;var q=D(131);function G(E,fe){let{generateColorPalettes:$,generateNeutralColorPalettes:se}=fe;const{colorSuccess:ce,colorWarning:ye,colorError:ae,colorInfo:He,colorPrimary:J,colorBgBase:me,colorTextBase:Oe}=E,Q=$(J),le=$(ce),ee=$(ye),be=$(ae),et=$(He),tt=se(me,Oe),wt=E.colorLink||E.colorInfo,gt=$(wt);return Object.assign(Object.assign({},tt),{colorPrimaryBg:Q[1],colorPrimaryBgHover:Q[2],colorPrimaryBorder:Q[3],colorPrimaryBorderHover:Q[4],colorPrimaryHover:Q[5],colorPrimary:Q[6],colorPrimaryActive:Q[7],colorPrimaryTextHover:Q[8],colorPrimaryText:Q[9],colorPrimaryTextActive:Q[10],colorSuccessBg:le[1],colorSuccessBgHover:le[2],colorSuccessBorder:le[3],colorSuccessBorderHover:le[4],colorSuccessHover:le[4],colorSuccess:le[6],colorSuccessActive:le[7],colorSuccessTextHover:le[8],colorSuccessText:le[9],colorSuccessTextActive:le[10],colorErrorBg:be[1],colorErrorBgHover:be[2],colorErrorBorder:be[3],colorErrorBorderHover:be[4],colorErrorHover:be[5],colorError:be[6],colorErrorActive:be[7],colorErrorTextHover:be[8],colorErrorText:be[9],colorErrorTextActive:be[10],colorWarningBg:ee[1],colorWarningBgHover:ee[2],colorWarningBorder:ee[3],colorWarningBorderHover:ee[4],colorWarningHover:ee[4],colorWarning:ee[6],colorWarningActive:ee[7],colorWarningTextHover:ee[8],colorWarningText:ee[9],colorWarningTextActive:ee[10],colorInfoBg:et[1],colorInfoBgHover:et[2],colorInfoBorder:et[3],colorInfoBorderHover:et[4],colorInfoHover:et[4],colorInfo:et[6],colorInfoActive:et[7],colorInfoTextHover:et[8],colorInfoText:et[9],colorInfoTextActive:et[10],colorLinkHover:gt[4],colorLink:gt[6],colorLinkActive:gt[7],colorBgMask:new q.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var G=q(D(78117));function E(fe){const{motionUnit:$,motionBase:se,borderRadius:ce,lineWidth:ye}=fe;return Object.assign({motionDurationFast:`${(se+$).toFixed(1)}s`,motionDurationMid:`${(se+$*2).toFixed(1)}s`,motionDurationSlow:`${(se+$*3).toFixed(1)}s`,lineWidthBold:ye+1},(0,G.default)(ce))}},54730:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=G=>{const{controlHeight:E}=G;return{controlHeightSM:E*.75,controlHeightXS:E*.5,controlHeightLG:E*1.25}};var q=W.default=D},69853:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(62231));const E=$=>{const se=(0,G.default)($),ce=se.map(le=>le.size),ye=se.map(le=>le.lineHeight),ae=ce[1],He=ce[0],J=ce[2],me=ye[1],Oe=ye[0],Q=ye[2];return{fontSizeSM:He,fontSize:ae,fontSizeLG:J,fontSizeXL:ce[3],fontSizeHeading1:ce[6],fontSizeHeading2:ce[5],fontSizeHeading3:ce[4],fontSizeHeading4:ce[3],fontSizeHeading5:ce[2],lineHeight:me,lineHeightLG:Q,lineHeightSM:Oe,fontHeight:Math.round(me*ae),fontHeightLG:Math.round(Q*J),fontHeightSM:Math.round(Oe*He),lineHeightHeading1:ye[6],lineHeightHeading2:ye[5],lineHeightHeading3:ye[4],lineHeightHeading4:ye[3],lineHeightHeading5:ye[2]}};var fe=W.default=E},62231:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=q,W.getLineHeight=D;function D(G){return(G+8)/G}function q(G){const E=new Array(10).fill(null).map((fe,$)=>{const se=$-1,ce=G*Math.pow(2.71828,se/5),ye=$>1?Math.floor(ce):Math.ceil(ce);return Math.floor(ye/2)*2});return E[1]=G,E.map(fe=>({size:fe,lineHeight:D(fe)}))}},78117:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D=G=>{let E=G,fe=G,$=G,se=G;return G<6&&G>=5?E=G+1:G<16&&G>=6?E=G+2:G>=16&&(E=16),G<7&&G>=5?fe=4:G<8&&G>=7?fe=5:G<14&&G>=8?fe=6:G<16&&G>=14?fe=7:G>=16&&(fe=8),G<6&&G>=2?$=1:G>=6&&($=2),G>4&&G<8?se=4:G>=8&&(se=6),{borderRadius:G,borderRadiusXS:$,borderRadiusSM:fe,borderRadiusLG:E,borderRadiusOuter:se}};var q=W.default=D},19216:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=D;function D(q){const{sizeUnit:G,sizeStep:E}=q;return{sizeXXL:G*(E+8),sizeXL:G*(E+4),sizeLG:G*(E+2),sizeMD:G*(E+1),sizeMS:G*E,size:G*E,sizeSM:G*(E-1),sizeXS:G*(E-2),sizeXXS:G*(E-3)}}},41401:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=Oe,W.unitless=W.ignore=W.getComputedToken=void 0;var G=q(D(67294)),E=D(6731),fe=q(D(87629)),$=D(89329),se=q(D(98411)),ce=q(D(27722)),ye=function(Q,le){var ee={};for(var be in Q)Object.prototype.hasOwnProperty.call(Q,be)&&le.indexOf(be)<0&&(ee[be]=Q[be]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,be=Object.getOwnPropertySymbols(Q);et<be.length;et++)le.indexOf(be[et])<0&&Object.prototype.propertyIsEnumerable.call(Q,be[et])&&(ee[be[et]]=Q[be[et]]);return ee};const ae=W.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},He=W.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},J={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},me=(Q,le,ee)=>{const be=ee.getDerivativeToken(Q),{override:et}=le,tt=ye(le,["override"]);let wt=Object.assign(Object.assign({},be),{override:et});return wt=(0,ce.default)(wt),tt&&Object.entries(tt).forEach(gt=>{let[ft,Pe]=gt;const{theme:Ae}=Pe,Be=ye(Pe,["theme"]);let Ze=Be;Ae&&(Ze=me(Object.assign(Object.assign({},wt),Be),{override:Be},Ae)),wt[ft]=Ze}),wt};W.getComputedToken=me;function Oe(){const{token:Q,hashed:le,theme:ee,override:be,cssVar:et}=G.default.useContext($.DesignTokenContext),tt=`${fe.default}-${le||""}`,wt=ee||$.defaultTheme,[gt,ft,Pe]=(0,E.useCacheToken)(wt,[se.default,Q],{salt:tt,override:be,getComputedToken:me,formatToken:ce.default,cssVar:et&&{prefix:et.prefix,key:et.key,unitless:ae,ignore:He,preserve:J}});return[wt,Pe,le?ft:"",gt,et]}},27722:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=se;var G=D(131),E=q(D(98411)),fe=q(D(83609)),$=function(ce,ye){var ae={};for(var He in ce)Object.prototype.hasOwnProperty.call(ce,He)&&ye.indexOf(He)<0&&(ae[He]=ce[He]);if(ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,He=Object.getOwnPropertySymbols(ce);J<He.length;J++)ye.indexOf(He[J])<0&&Object.prototype.propertyIsEnumerable.call(ce,He[J])&&(ae[He[J]]=ce[He[J]]);return ae};function se(ce){const{override:ye}=ce,ae=$(ce,["override"]),He=Object.assign({},ye);Object.keys(E.default).forEach(tt=>{delete He[tt]});const J=Object.assign(Object.assign({},ae),He),me=480,Oe=576,Q=768,le=992,ee=1200,be=1600;if(J.motion===!1){const tt="0s";J.motionDurationFast=tt,J.motionDurationMid=tt,J.motionDurationSlow=tt}return Object.assign(Object.assign(Object.assign({},J),{colorFillContent:J.colorFillSecondary,colorFillContentHover:J.colorFill,colorFillAlter:J.colorFillQuaternary,colorBgContainerDisabled:J.colorFillTertiary,colorBorderBg:J.colorBgContainer,colorSplit:(0,fe.default)(J.colorBorderSecondary,J.colorBgContainer),colorTextPlaceholder:J.colorTextQuaternary,colorTextDisabled:J.colorTextQuaternary,colorTextHeading:J.colorText,colorTextLabel:J.colorTextSecondary,colorTextDescription:J.colorTextTertiary,colorTextLightSolid:J.colorWhite,colorHighlight:J.colorError,colorBgTextHover:J.colorFillSecondary,colorBgTextActive:J.colorFill,colorIcon:J.colorTextTertiary,colorIconHover:J.colorText,colorErrorOutline:(0,fe.default)(J.colorErrorBg,J.colorBgContainer),colorWarningOutline:(0,fe.default)(J.colorWarningBg,J.colorBgContainer),fontSizeIcon:J.fontSizeSM,lineWidthFocus:J.lineWidth*4,lineWidth:J.lineWidth,controlOutlineWidth:J.lineWidth*2,controlInteractiveSize:J.controlHeight/2,controlItemBgHover:J.colorFillTertiary,controlItemBgActive:J.colorPrimaryBg,controlItemBgActiveHover:J.colorPrimaryBgHover,controlItemBgActiveDisabled:J.colorFill,controlTmpOutline:J.colorFillQuaternary,controlOutline:(0,fe.default)(J.colorPrimaryBg,J.colorBgContainer),lineType:J.lineType,borderRadius:J.borderRadius,borderRadiusXS:J.borderRadiusXS,borderRadiusSM:J.borderRadiusSM,borderRadiusLG:J.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:J.sizeXXS,paddingXS:J.sizeXS,paddingSM:J.sizeSM,padding:J.size,paddingMD:J.sizeMD,paddingLG:J.sizeLG,paddingXL:J.sizeXL,paddingContentHorizontalLG:J.sizeLG,paddingContentVerticalLG:J.sizeMS,paddingContentHorizontal:J.sizeMS,paddingContentVertical:J.sizeSM,paddingContentHorizontalSM:J.size,paddingContentVerticalSM:J.sizeXS,marginXXS:J.sizeXXS,marginXS:J.sizeXS,marginSM:J.sizeSM,margin:J.size,marginMD:J.sizeMD,marginLG:J.sizeLG,marginXL:J.sizeXL,marginXXL:J.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:me,screenXSMin:me,screenXSMax:Oe-1,screenSM:Oe,screenSMMin:Oe,screenSMMax:Q-1,screenMD:Q,screenMDMin:Q,screenMDMax:le-1,screenLG:le,screenLGMin:le,screenLGMax:ee-1,screenXL:ee,screenXLMin:ee,screenXLMax:be-1,screenXXL:be,screenXXLMin:be,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new G.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new G.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new G.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),He)}},24312:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(56690)),E=q(D(89728)),fe=q(D(76976)),$=q(D(61655)),se=q(D(38194));const ce="CALC_UNIT";function ye(He){return typeof He=="number"?`${He}${ce}`:He}let ae=W.default=function(He){function J(me){var Oe;return(0,G.default)(this,J),Oe=(0,fe.default)(this,J),Oe.result="",me instanceof J?Oe.result=`(${me.result})`:typeof me=="number"?Oe.result=ye(me):typeof me=="string"&&(Oe.result=me),Oe}return(0,$.default)(J,He),(0,E.default)(J,[{key:"add",value:function(Oe){return Oe instanceof J?this.result=`${this.result} + ${Oe.getResult()}`:(typeof Oe=="number"||typeof Oe=="string")&&(this.result=`${this.result} + ${ye(Oe)}`),this.lowPriority=!0,this}},{key:"sub",value:function(Oe){return Oe instanceof J?this.result=`${this.result} - ${Oe.getResult()}`:(typeof Oe=="number"||typeof Oe=="string")&&(this.result=`${this.result} - ${ye(Oe)}`),this.lowPriority=!0,this}},{key:"mul",value:function(Oe){return this.lowPriority&&(this.result=`(${this.result})`),Oe instanceof J?this.result=`${this.result} * ${Oe.getResult(!0)}`:(typeof Oe=="number"||typeof Oe=="string")&&(this.result=`${this.result} * ${Oe}`),this.lowPriority=!1,this}},{key:"div",value:function(Oe){return this.lowPriority&&(this.result=`(${this.result})`),Oe instanceof J?this.result=`${this.result} / ${Oe.getResult(!0)}`:(typeof Oe=="number"||typeof Oe=="string")&&(this.result=`${this.result} / ${Oe}`),this.lowPriority=!1,this}},{key:"getResult",value:function(Oe){return this.lowPriority||Oe?`(${this.result})`:this.result}},{key:"equal",value:function(Oe){const{unit:Q=!0}=Oe||{},le=new RegExp(`${ce}`,"g");return this.result=this.result.replace(le,Q?"px":""),typeof this.lowPriority!="undefined"?`calc(${this.result})`:this.result}}])}(se.default)},14774:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(56690)),E=q(D(89728)),fe=q(D(76976)),$=q(D(61655)),se=q(D(38194));let ce=W.default=function(ye){function ae(He){var J;return(0,G.default)(this,ae),J=(0,fe.default)(this,ae),J.result=0,He instanceof ae?J.result=He.result:typeof He=="number"&&(J.result=He),J}return(0,$.default)(ae,ye),(0,E.default)(ae,[{key:"add",value:function(J){return J instanceof ae?this.result+=J.result:typeof J=="number"&&(this.result+=J),this}},{key:"sub",value:function(J){return J instanceof ae?this.result-=J.result:typeof J=="number"&&(this.result-=J),this}},{key:"mul",value:function(J){return J instanceof ae?this.result*=J.result:typeof J=="number"&&(this.result*=J),this}},{key:"div",value:function(J){return J instanceof ae?this.result/=J.result:typeof J=="number"&&(this.result/=J),this}},{key:"equal",value:function(){return this.result}}])}(se.default)},38194:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(89728)),E=q(D(56690));let fe=(0,G.default)(function se(){(0,E.default)(this,se)});var $=W.default=fe},22996:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(14774)),E=q(D(24312));const fe=se=>{const ce=se==="css"?E.default:G.default;return ye=>new ce(ye)};var $=W.default=fe},3737:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ee,W.genSubStyleComponent=W.genStyleHooks=void 0;var E=G(D(67294)),fe=D(6731),$=D(56790),se=D(7177),ce=D(98078),ye=G(D(41401)),ae=q(D(22996)),He=q(D(1657)),J=G(D(99636)),me=q(D(54894));const Oe=(wt,gt,ft)=>{var Pe;return typeof ft=="function"?ft((0,J.merge)(gt,(Pe=gt[wt])!==null&&Pe!==void 0?Pe:{})):ft!=null?ft:{}},Q=(wt,gt,ft,Pe)=>{const Ae=Object.assign({},gt[wt]);if(Pe!=null&&Pe.deprecatedTokens){const{deprecatedTokens:Ze}=Pe;Ze.forEach(ut=>{let[tn,De]=ut;var mt;(Ae!=null&&Ae[tn]||Ae!=null&&Ae[De])&&((mt=Ae[De])!==null&&mt!==void 0||(Ae[De]=Ae==null?void 0:Ae[tn]))})}const Be=Object.assign(Object.assign({},ft),Ae);return Object.keys(Be).forEach(Ze=>{Be[Ze]===gt[Ze]&&delete Be[Ze]}),Be},le=(wt,gt)=>`${[gt,wt.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function ee(wt,gt,ft){let Pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const Ae=Array.isArray(wt)?wt:[wt,wt],[Be]=Ae,Ze=Ae.join("-");return function(ut){let tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ut;const[De,mt,Re,nt,qe]=(0,ye.default)(),{getPrefixCls:Ge,iconPrefixCls:Dt,csp:yt}=(0,E.useContext)(se.ConfigContext),Le=Ge(),Zt=qe?"css":"js",yn=(0,ae.default)(Zt),{max:Tn,min:lr}=(0,He.default)(Zt),or={theme:De,token:nt,hashId:Re,nonce:()=>yt==null?void 0:yt.nonce,clientOnly:Pe.clientOnly,order:Pe.order||-999};return(0,fe.useStyleRegister)(Object.assign(Object.assign({},or),{clientOnly:!1,path:["Shared",Le]}),()=>[{"&":(0,ce.genLinkStyle)(nt)}]),(0,me.default)(Dt,yt),[(0,fe.useStyleRegister)(Object.assign(Object.assign({},or),{path:[Ze,ut,Dt]}),()=>{if(Pe.injectStyle===!1)return[];const{token:en,flush:hn}=(0,J.default)(nt),Xn=Oe(Be,mt,ft),an=`.${ut}`,Pt=Q(Be,mt,Xn,{deprecatedTokens:Pe.deprecatedTokens});qe&&Object.keys(Xn).forEach(rt=>{Xn[rt]=`var(${(0,fe.token2CSSVar)(rt,le(Be,qe.prefix))})`});const zt=(0,J.merge)(en,{componentCls:an,prefixCls:ut,iconCls:`.${Dt}`,antCls:`.${Le}`,calc:yn,max:Tn,min:lr},qe?Xn:Pt),je=gt(zt,{hashId:Re,prefixCls:ut,rootPrefixCls:Le,iconPrefixCls:Dt});return hn(Be,Pt),[Pe.resetStyle===!1?null:(0,ce.genCommonStyle)(zt,ut,tn),je]}),Re]}}const be=(wt,gt,ft,Pe)=>{const Ae=ee(wt,gt,ft,Object.assign({resetStyle:!1,order:-998},Pe));return Ze=>{let{prefixCls:ut,rootCls:tn=ut}=Ze;return Ae(ut,tn),null}};W.genSubStyleComponent=be;const et=(wt,gt,ft)=>{function Pe(De){return`${wt}${De.slice(0,1).toUpperCase()}${De.slice(1)}`}const{unitless:Ae={},injectStyle:Be=!0}=ft!=null?ft:{},Ze={[Pe("zIndexPopup")]:!0};Object.keys(Ae).forEach(De=>{Ze[Pe(De)]=Ae[De]});const ut=De=>{let{rootCls:mt,cssVar:Re}=De;const[,nt]=(0,ye.default)();return(0,fe.useCSSVarRegister)({path:[wt],prefix:Re.prefix,key:Re==null?void 0:Re.key,unitless:Object.assign(Object.assign({},ye.unitless),Ze),ignore:ye.ignore,token:nt,scope:mt},()=>{const qe=Oe(wt,nt,gt),Ge=Q(wt,nt,qe,{deprecatedTokens:ft==null?void 0:ft.deprecatedTokens});return Object.keys(qe).forEach(Dt=>{Ge[Pe(Dt)]=Ge[Dt],delete Ge[Dt]}),Ge}),null};return De=>{const[,,,,mt]=(0,ye.default)();return[Re=>Be&&mt?E.default.createElement(E.default.Fragment,null,E.default.createElement(ut,{rootCls:De,cssVar:mt,component:wt}),Re):Re,mt==null?void 0:mt.key]}},tt=(wt,gt,ft,Pe)=>{const Ae=ee(wt,gt,ft,Pe),Be=et(Array.isArray(wt)?wt[0]:wt,ft,Pe);return function(Ze){let ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ze;const[,tn]=Ae(Ze,ut),[De,mt]=Be(ut);return[De,tn,mt]}};W.genStyleHooks=tt},36219:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=G;var q=D(36496);function G(E,fe){return q.PresetColors.reduce(($,se)=>{const ce=E[`${se}1`],ye=E[`${se}3`],ae=E[`${se}6`],He=E[`${se}7`];return Object.assign(Object.assign({},$),fe(se,{lightColor:ce,lightBorderColor:ye,darkColor:ae,textColor:He}))},{})}},83609:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var q=D(131);function G($){return $>=0&&$<=255}function E($,se){const{r:ce,g:ye,b:ae,a:He}=new q.TinyColor($).toRgb();if(He<1)return $;const{r:J,g:me,b:Oe}=new q.TinyColor(se).toRgb();for(let Q=.01;Q<=1;Q+=.01){const le=Math.round((ce-J*(1-Q))/Q),ee=Math.round((ye-me*(1-Q))/Q),be=Math.round((ae-Oe*(1-Q))/Q);if(G(le)&&G(ee)&&G(be))return new q.TinyColor({r:le,g:ee,b:be,a:Math.round(Q*100)/100}).toRgbString()}return new q.TinyColor({r:ce,g:ye,b:ae,a:1}).toRgbString()}var fe=W.default=E},1657:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=G;var q=D(6731);function G(E){return E==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var fe=arguments.length,$=new Array(fe),se=0;se<fe;se++)$[se]=arguments[se];return`max(${$.map(ce=>(0,q.unit)(ce)).join(",")})`},min:function(){for(var fe=arguments.length,$=new Array(fe),se=0;se<fe;se++)$[se]=arguments[se];return`min(${$.map(ce=>(0,q.unit)(ce)).join(",")})`}}}},99636:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=W._statistic_build_=void 0,W.merge=G,W.statistic=void 0;const D=typeof CSSINJS_STATISTIC!="undefined";let q=!0;function G(){for(var ye=arguments.length,ae=new Array(ye),He=0;He<ye;He++)ae[He]=arguments[He];if(!D)return Object.assign.apply(Object,[{}].concat(ae));q=!1;const J={};return ae.forEach(me=>{Object.keys(me).forEach(Q=>{Object.defineProperty(J,Q,{configurable:!0,enumerable:!0,get:()=>me[Q]})})}),q=!0,J}const E=W.statistic={},fe=W._statistic_build_={};function $(){}const se=ye=>{let ae,He=ye,J=$;return D&&typeof Proxy!="undefined"&&(ae=new Set,He=new Proxy(ye,{get(me,Oe){return q&&ae.add(Oe),me[Oe]}}),J=(me,Oe)=>{var Q;E[me]={global:Array.from(ae),component:Object.assign(Object.assign({},(Q=E[me])===null||Q===void 0?void 0:Q.component),Oe)}}),{token:He,keys:ae,flush:J}};var ce=W.default=se},54894:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=D(6731),E=D(98078),fe=q(D(41401));const $=(ce,ye)=>{const[ae,He]=(0,fe.default)();return(0,G.useStyleRegister)({theme:ae,token:He,hashId:"",path:["ant-design-icons",ce],nonce:()=>ye==null?void 0:ye.nonce},()=>[{[`.${ce}`]:Object.assign(Object.assign({},(0,E.resetIcon)()),{[`.${ce} .${ce}-icon`]:{display:"block"}})}])};var se=W.default=$},52040:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const D={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var q=W.default=D},92125:function(_t,W,D){"use strict";"use client";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(93967)),fe=D(92419),$=q(D(67294)),se=D(31929),ce=G(D(15086)),ye=D(48125);const ae=J=>{const{prefixCls:me,className:Oe,placement:Q="top",title:le,color:ee,overlayInnerStyle:be}=J,{getPrefixCls:et}=$.useContext(se.ConfigContext),tt=et("tooltip",me),[wt,gt,ft]=(0,ce.default)(tt),Pe=(0,ye.parseColor)(tt,ee),Ae=Pe.arrowStyle,Be=Object.assign(Object.assign({},be),Pe.overlayStyle),Ze=(0,E.default)(gt,ft,tt,`${tt}-pure`,`${tt}-placement-${Q}`,Oe,Pe.className);return wt($.createElement("div",{className:Ze,style:Ae},$.createElement("div",{className:`${tt}-arrow`}),$.createElement(fe.Popup,Object.assign({},J,{className:gt,prefixCls:tt,overlayInnerStyle:Be}),le)))};var He=W.default=ae},94055:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),fe=q(D(93967)),$=q(D(92419)),se=q(D(60869)),ce=D(56333),ye=D(53683),ae=q(D(74132)),He=D(47419),J=D(13594),me=q(D(96877)),Oe=D(31929),Q=D(46549),le=D(3184),ee=q(D(92125)),be=q(D(15086)),et=D(48125),tt=function(ft,Pe){var Ae={};for(var Be in ft)Object.prototype.hasOwnProperty.call(ft,Be)&&Pe.indexOf(Be)<0&&(Ae[Be]=ft[Be]);if(ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ze=0,Be=Object.getOwnPropertySymbols(ft);Ze<Be.length;Ze++)Pe.indexOf(Be[Ze])<0&&Object.prototype.propertyIsEnumerable.call(ft,Be[Ze])&&(Ae[Be[Ze]]=ft[Be[Ze]]);return Ae};const wt=E.forwardRef((ft,Pe)=>{var Ae,Be;const{prefixCls:Ze,openClassName:ut,getTooltipContainer:tn,overlayClassName:De,color:mt,overlayInnerStyle:Re,children:nt,afterOpenChange:qe,afterVisibleChange:Ge,destroyTooltipOnHide:Dt,arrow:yt=!0,title:Le,overlay:Zt,builtinPlacements:yn,arrowPointAtCenter:Tn=!1,autoAdjustOverflow:lr=!0}=ft,or=!!yt,[,Lt]=(0,le.useToken)(),{getPopupContainer:en,getPrefixCls:hn,direction:Xn}=E.useContext(Oe.ConfigContext),an=(0,J.devUseWarning)("Tooltip"),Pt=E.useRef(null),zt=()=>{var ke;(ke=Pt.current)===null||ke===void 0||ke.forceAlign()};E.useImperativeHandle(Pe,()=>({forceAlign:zt,forcePopupAlign:()=>{an.deprecated(!1,"forcePopupAlign","forceAlign"),zt()}}));const[je,rt]=(0,se.default)(!1,{value:(Ae=ft.open)!==null&&Ae!==void 0?Ae:ft.visible,defaultValue:(Be=ft.defaultOpen)!==null&&Be!==void 0?Be:ft.defaultVisible}),Ut=!Le&&!Zt&&Le!==0,U=ke=>{var at,At;rt(Ut?!1:ke),Ut||((at=ft.onOpenChange)===null||at===void 0||at.call(ft,ke),(At=ft.onVisibleChange)===null||At===void 0||At.call(ft,ke))},he=E.useMemo(()=>{var ke,at;let At=Tn;return typeof yt=="object"&&(At=(at=(ke=yt.pointAtCenter)!==null&&ke!==void 0?ke:yt.arrowPointAtCenter)!==null&&at!==void 0?at:Tn),yn||(0,ae.default)({arrowPointAtCenter:At,autoAdjustOverflow:lr,arrowWidth:or?Lt.sizePopupArrow:0,borderRadius:Lt.borderRadius,offset:Lt.marginXXS,visibleFirst:!0})},[Tn,yt,yn,Lt]),ot=E.useMemo(()=>Le===0?Le:Zt||Le||"",[Zt,Le]),de=E.createElement(Q.NoCompactStyle,null,typeof ot=="function"?ot():ot),{getPopupContainer:qt,placement:ln="top",mouseEnterDelay:mn=.1,mouseLeaveDelay:Dn=.1,overlayStyle:Yn,rootClassName:Kn}=ft,pn=tt(ft,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),vt=hn("tooltip",Ze),Nt=hn(),An=ft["data-popover-inject"];let In=je;!("open"in ft)&&!("visible"in ft)&&Ut&&(In=!1);const $n=E.isValidElement(nt)&&!(0,He.isFragment)(nt)?nt:E.createElement("span",null,nt),pt=$n.props,xe=!pt.className||typeof pt.className=="string"?(0,fe.default)(pt.className,ut||`${vt}-open`):pt.className,[Fe,st,It]=(0,be.default)(vt,!An),Mt=(0,et.parseColor)(vt,mt),wn=Mt.arrowStyle,rr=Object.assign(Object.assign({},Re),Mt.overlayStyle),Er=(0,fe.default)(De,{[`${vt}-rtl`]:Xn==="rtl"},Mt.className,Kn,st,It),[qn,Me]=(0,ce.useZIndex)("Tooltip",pn.zIndex),Te=E.createElement($.default,Object.assign({},pn,{zIndex:qn,showArrow:or,placement:ln,mouseEnterDelay:mn,mouseLeaveDelay:Dn,prefixCls:vt,overlayClassName:Er,overlayStyle:Object.assign(Object.assign({},wn),Yn),getTooltipContainer:qt||tn||en,ref:Pt,builtinPlacements:he,overlay:de,visible:In,onVisibleChange:U,afterVisibleChange:qe!=null?qe:Ge,overlayInnerStyle:rr,arrowContent:E.createElement("span",{className:`${vt}-arrow-content`}),motion:{motionName:(0,ye.getTransitionName)(Nt,"zoom-big-fast",ft.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!Dt}),In?(0,He.cloneElement)($n,{className:xe}):$n);return Fe(E.createElement(me.default.Provider,{value:Me},Te))});wt._InternalPanelDoNotUseOrYouWillBeFired=ee.default;var gt=W.default=wt},15086:function(_t,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.prepareComponentToken=W.default=void 0;var G=D(98078),E=D(42836),fe=q(D(9064)),$=D(3184),se=D(6731),ce=D(51337);const ye=J=>{const{componentCls:me,tooltipMaxWidth:Oe,tooltipColor:Q,tooltipBg:le,tooltipBorderRadius:ee,zIndexPopup:be,controlHeight:et,boxShadowSecondary:tt,paddingSM:wt,paddingXS:gt}=J;return[{[me]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,G.resetComponent)(J)),{position:"absolute",zIndex:be,display:"block",width:"max-content",maxWidth:Oe,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":le,[`${me}-inner`]:{minWidth:et,minHeight:et,padding:`${(0,se.unit)(J.calc(wt).div(2).equal())} ${(0,se.unit)(gt)}`,color:Q,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:le,borderRadius:ee,boxShadow:tt,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${me}-inner`]:{borderRadius:J.min(ee,fe.MAX_VERTICAL_CONTENT_RADIUS)}},[`${me}-content`]:{position:"relative"}}),(0,$.genPresetColor)(J,(ft,Pe)=>{let{darkColor:Ae}=Pe;return{[`&${me}-${ft}`]:{[`${me}-inner`]:{backgroundColor:Ae},[`${me}-arrow`]:{"--antd-arrow-background-color":Ae}}}})),{"&-rtl":{direction:"rtl"}})},(0,fe.default)(J,"var(--antd-arrow-background-color)"),{[`${me}-pure`]:{position:"relative",maxWidth:"none",margin:J.sizePopupArrow}}]},ae=J=>Object.assign(Object.assign({zIndexPopup:J.zIndexPopupBase+70},(0,fe.getArrowOffsetToken)({contentRadius:J.borderRadius,limitVerticalRadius:!0})),(0,ce.getArrowToken)((0,$.mergeToken)(J,{borderRadiusOuter:Math.min(J.borderRadiusOuter,4)})));W.prepareComponentToken=ae;var He=W.default=function(me){let Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,$.genStyleHooks)("Tooltip",le=>{const{borderRadius:ee,colorTextLightSolid:be,colorBgSpotlight:et}=le,tt=(0,$.mergeToken)(le,{tooltipMaxWidth:250,tooltipColor:be,tooltipBorderRadius:ee,tooltipBg:et});return[ye(tt),(0,E.initZoomMotion)(le,"zoom-big-fast")]},ae,{resetStyle:!1,injectStyle:Oe})(me)}},48125:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.parseColor=fe;var G=q(D(93967)),E=D(45471);function fe($,se){const ce=(0,E.isPresetColor)(se),ye=(0,G.default)({[`${$}-${se}`]:se&&ce}),ae={},He={};return se&&!ce&&(ae.background=se,He["--antd-arrow-background-color"]=se),{className:ye,overlayStyle:ae,arrowStyle:He}}},6847:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=J;var E=G(D(67294)),fe=q(D(4121)),$=q(D(83874)),se=q(D(90091)),ce=q(D(93967)),ye=q(D(60938)),ae=q(D(94055)),He=D(81410);function J(me){const{prefixCls:Oe,copied:Q,locale:le={},onCopy:ee,iconOnly:be,tooltips:et,icon:tt,loading:wt}=me,gt=(0,He.toList)(et),ft=(0,He.toList)(tt),{copied:Pe,copy:Ae}=le,Be=Q?(0,He.getNode)(gt[1],Pe):(0,He.getNode)(gt[0],Ae),ut=typeof Be=="string"?Be:Q?Pe:Ae;return E.createElement(ae.default,{key:"copy",title:Be},E.createElement(ye.default,{className:(0,ce.default)(`${Oe}-copy`,{[`${Oe}-copy-success`]:Q,[`${Oe}-copy-icon-only`]:be}),onClick:ee,"aria-label":ut},Q?(0,He.getNode)(ft[1],E.createElement($.default,null),!0):(0,He.getNode)(ft[0],wt?E.createElement(fe.default,null):E.createElement(se.default,null),!0)))}},12385:function(_t,W,D){"use strict";"use client";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ee;var E=G(D(861)),fe=q(D(67294)),$=G(D(45598)),se=G(D(82546));const ce=fe.forwardRef((be,et)=>{let{style:tt,children:wt}=be;const gt=fe.useRef(null);return fe.useImperativeHandle(et,()=>({isExceed:()=>{const ft=gt.current;return ft.scrollHeight>ft.clientHeight},getHeight:()=>gt.current.clientHeight})),fe.createElement("span",{"aria-hidden":!0,ref:gt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},tt)},wt)});function ye(be){const et=typeof be;return et==="string"||et==="number"}function ae(be){let et=0;return be.forEach(tt=>{ye(tt)?et+=String(tt).length:et+=1}),et}function He(be,et){let tt=0;const wt=[];for(let gt=0;gt<be.length;gt+=1){if(tt===et)return wt;const ft=be[gt],Ae=ye(ft)?String(ft).length:1,Be=tt+Ae;if(Be>et){const Ze=et-tt;return wt.push(String(ft).slice(0,Ze)),wt}wt.push(ft),tt=Be}return be}const J=0,me=1,Oe=2,Q=3,le={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function ee(be){const{enableMeasure:et,width:tt,text:wt,children:gt,rows:ft,expanded:Pe,miscDeps:Ae,onEllipsis:Be}=be,Ze=fe.useMemo(()=>(0,$.default)(wt),[wt]),ut=fe.useMemo(()=>ae(Ze),[wt]),tn=fe.useMemo(()=>gt(Ze,!1),[wt]),[De,mt]=fe.useState(null),Re=fe.useRef(null),nt=fe.useRef(null),qe=fe.useRef(null),Ge=fe.useRef(null),[Dt,yt]=fe.useState(!1),[Le,Zt]=fe.useState(J),[yn,Tn]=fe.useState(0);(0,se.default)(()=>{Zt(et&&tt&&ut?me:J)},[tt,wt,ft,et,Ze]),(0,se.default)(()=>{var en,hn,Xn,an;if(Le===me){const Pt=!!(!((en=nt.current)===null||en===void 0)&&en.isExceed());Zt(Pt?Oe:Q),mt(Pt?[0,ut]:null),yt(Pt);const zt=((hn=nt.current)===null||hn===void 0?void 0:hn.getHeight())||0,je=ft===1?0:((Xn=qe.current)===null||Xn===void 0?void 0:Xn.getHeight())||0,rt=((an=Ge.current)===null||an===void 0?void 0:an.getHeight())||0,Ut=je+rt,U=Math.max(zt,Ut);Tn(U+1),Be(Pt)}},[Le]);const lr=De?Math.ceil((De[0]+De[1])/2):0;(0,se.default)(()=>{var en;const[hn,Xn]=De||[0,0];if(hn!==Xn){const Pt=(((en=Re.current)===null||en===void 0?void 0:en.getHeight())||0)>yn;let zt=lr;Xn-hn===1&&(zt=Pt?hn:Xn),mt(Pt?[hn,zt]:[zt,Xn])}},[De,lr]);const or=fe.useMemo(()=>{if(Le!==Oe||!De||De[0]!==De[1]){const en=gt(Ze,!1);return Le!==Q&&Le!==J?fe.createElement("span",{style:Object.assign(Object.assign({},le),{WebkitLineClamp:ft})},en):en}return gt(Pe?Ze:He(Ze,De[0]),Dt)},[Pe,Le,De,Ze].concat((0,E.default)(Ae))),Lt={width:tt,whiteSpace:"normal",margin:0,padding:0};return fe.createElement(fe.Fragment,null,or,Le===me&&fe.createElement(fe.Fragment,null,fe.createElement(ce,{style:Object.assign(Object.assign(Object.assign({},Lt),le),{WebkitLineClamp:ft}),ref:nt},tn),fe.createElement(ce,{style:Object.assign(Object.assign(Object.assign({},Lt),le),{WebkitLineClamp:ft-1}),ref:qe},tn),fe.createElement(ce,{style:Object.assign(Object.assign(Object.assign({},Lt),le),{WebkitLineClamp:1}),ref:Ge},gt([],!0))),Le===Oe&&De&&De[0]!==De[1]&&fe.createElement(ce,{style:Object.assign(Object.assign({},Lt),{top:400}),ref:Re},gt(He(Ze,lr),!0)))}},69274:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),fe=q(D(94055));const $=ce=>{let{enableEllipsis:ye,isEllipsis:ae,children:He,tooltipProps:J}=ce;return!(J!=null&&J.title)||!ye?He:E.createElement(fe.default,Object.assign({open:ae?void 0:!1},J),He)};var se=W.default=$},28460:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),fe=q(D(10875)),$=q(D(93967)),se=q(D(9220)),ce=q(D(45598)),ye=q(D(82546)),ae=q(D(60869)),He=q(D(18475)),J=D(75531),me=D(38882),Oe=q(D(60938)),Q=D(31929),le=q(D(76647)),ee=q(D(94055)),be=q(D(69425)),et=q(D(63985)),tt=q(D(92759)),wt=q(D(67312)),gt=q(D(89652)),ft=q(D(6847)),Pe=q(D(12385)),Ae=q(D(69274)),Be=function(mt,Re){var nt={};for(var qe in mt)Object.prototype.hasOwnProperty.call(mt,qe)&&Re.indexOf(qe)<0&&(nt[qe]=mt[qe]);if(mt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ge=0,qe=Object.getOwnPropertySymbols(mt);Ge<qe.length;Ge++)Re.indexOf(qe[Ge])<0&&Object.prototype.propertyIsEnumerable.call(mt,qe[Ge])&&(nt[qe[Ge]]=mt[qe[Ge]]);return nt};function Ze(mt,Re){let{mark:nt,code:qe,underline:Ge,delete:Dt,strong:yt,keyboard:Le,italic:Zt}=mt,yn=Re;function Tn(lr,or){or&&(yn=E.createElement(lr,{},yn))}return Tn("strong",yt),Tn("u",Ge),Tn("del",Dt),Tn("code",qe),Tn("mark",nt),Tn("kbd",Le),Tn("i",Zt),yn}const ut="...",tn=E.forwardRef((mt,Re)=>{var nt,qe,Ge;const{prefixCls:Dt,className:yt,style:Le,type:Zt,disabled:yn,children:Tn,ellipsis:lr,editable:or,copyable:Lt,component:en,title:hn}=mt,Xn=Be(mt,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:an,direction:Pt}=E.useContext(Q.ConfigContext),[zt]=(0,le.default)("Text"),je=E.useRef(null),rt=E.useRef(null),Ut=an("typography",Dt),U=(0,He.default)(Xn,["mark","code","delete","underline","strong","keyboard","italic"]),[he,ot]=(0,tt.default)(or),[de,qt]=(0,ae.default)(!1,{value:ot.editing}),{triggerType:ln=["icon"]}=ot,mn=Ci=>{var ho;Ci&&((ho=ot.onStart)===null||ho===void 0||ho.call(ot)),qt(Ci)};(0,wt.default)(()=>{var Ci;de||(Ci=rt.current)===null||Ci===void 0||Ci.focus()},[de]);const Dn=Ci=>{Ci==null||Ci.preventDefault(),mn(!0)},Yn=Ci=>{var ho;(ho=ot.onChange)===null||ho===void 0||ho.call(ot,Ci),mn(!1)},Kn=()=>{var Ci;(Ci=ot.onCancel)===null||Ci===void 0||Ci.call(ot),mn(!1)},[pn,vt]=(0,tt.default)(Lt),{copied:Nt,copyLoading:An,onClick:In}=(0,et.default)({copyConfig:vt,children:Tn}),[$n,pt]=E.useState(!1),[xe,Fe]=E.useState(!1),[st,It]=E.useState(!1),[Mt,wn]=E.useState(!1),[rr,Er]=E.useState(!0),[qn,Me]=(0,tt.default)(lr,{expandable:!1,symbol:Ci=>Ci?zt==null?void 0:zt.collapse:zt==null?void 0:zt.expand}),[Te,ke]=(0,ae.default)(Me.defaultExpanded||!1,{value:Me.expanded}),at=qn&&(!Te||Me.expandable==="collapsible"),{rows:At=1}=Me,nn=E.useMemo(()=>!at||Me.suffix!==void 0||Me.onEllipsis||Me.expandable||he||pn,[at,Me,he,pn]);(0,ye.default)(()=>{qn&&!nn&&(pt((0,me.isStyleSupport)("webkitLineClamp")),Fe((0,me.isStyleSupport)("textOverflow")))},[nn,qn]);const cn=E.useMemo(()=>nn?!1:At===1?xe:$n,[nn,xe,$n]),Et=at&&(cn?Mt:st),Qt=at&&At===1&&cn,Qn=at&&At>1&&cn,Sr=(Ci,ho)=>{var go;ke(ho.expanded),(go=Me.onExpand)===null||go===void 0||go.call(Me,Ci,ho)},[Zr,yr]=E.useState(0),Wr=Ci=>{let{offsetWidth:ho}=Ci;yr(ho)},Ei=Ci=>{var ho;It(Ci),st!==Ci&&((ho=Me.onEllipsis)===null||ho===void 0||ho.call(Me,Ci))};E.useEffect(()=>{const Ci=je.current;if(qn&&cn&&Ci){const ho=Qn?Ci.offsetHeight<Ci.scrollHeight:Ci.offsetWidth<Ci.scrollWidth;Mt!==ho&&wn(ho)}},[qn,cn,Tn,Qn,rr,Zr]),E.useEffect(()=>{const Ci=je.current;if(typeof IntersectionObserver=="undefined"||!Ci||!cn||!at)return;const ho=new IntersectionObserver(()=>{Er(!!Ci.offsetParent)});return ho.observe(Ci),()=>{ho.disconnect()}},[cn,at]);let yi={};Me.tooltip===!0?yi={title:(nt=ot.text)!==null&&nt!==void 0?nt:Tn}:E.isValidElement(Me.tooltip)?yi={title:Me.tooltip}:typeof Me.tooltip=="object"?yi=Object.assign({title:(qe=ot.text)!==null&&qe!==void 0?qe:Tn},Me.tooltip):yi={title:Me.tooltip};const wr=E.useMemo(()=>{const Ci=ho=>["string","number"].includes(typeof ho);if(!(!qn||cn)){if(Ci(ot.text))return ot.text;if(Ci(Tn))return Tn;if(Ci(hn))return hn;if(Ci(yi.title))return yi.title}},[qn,cn,hn,yi.title,Et]);if(de)return E.createElement(be.default,{value:(Ge=ot.text)!==null&&Ge!==void 0?Ge:typeof Tn=="string"?Tn:"",onSave:Yn,onCancel:Kn,onEnd:ot.onEnd,prefixCls:Ut,className:yt,style:Le,direction:Pt,component:en,maxLength:ot.maxLength,autoSize:ot.autoSize,enterIcon:ot.enterIcon});const Ai=()=>{const{expandable:Ci,symbol:ho}=Me;return!Ci||Te&&Ci!=="collapsible"?null:E.createElement("a",{key:"expand",className:`${Ut}-${Te?"collapse":"expand"}`,onClick:go=>Sr(go,{expanded:!Te}),"aria-label":Te?zt.collapse:zt==null?void 0:zt.expand},typeof ho=="function"?ho(Te):ho)},pi=()=>{if(!he)return;const{icon:Ci,tooltip:ho}=ot,go=(0,ce.default)(ho)[0]||(zt==null?void 0:zt.edit),jo=typeof go=="string"?go:"";return ln.includes("icon")?E.createElement(ee.default,{key:"edit",title:ho===!1?"":go},E.createElement(Oe.default,{ref:rt,className:`${Ut}-edit`,onClick:Dn,"aria-label":jo},Ci||E.createElement(fe.default,{role:"button"}))):null},_i=()=>pn?E.createElement(ft.default,Object.assign({key:"copy"},vt,{prefixCls:Ut,copied:Nt,locale:zt,onCopy:In,loading:An,iconOnly:Tn==null})):null,Bo=Ci=>[Ci&&Ai(),pi(),_i()],Si=Ci=>[Ci&&!Te&&E.createElement("span",{"aria-hidden":!0,key:"ellipsis"},ut),Me.suffix,Bo(Ci)];return E.createElement(se.default,{onResize:Wr,disabled:!at},Ci=>E.createElement(Ae.default,{tooltipProps:yi,enableEllipsis:at,isEllipsis:Et},E.createElement(gt.default,Object.assign({className:(0,$.default)({[`${Ut}-${Zt}`]:Zt,[`${Ut}-disabled`]:yn,[`${Ut}-ellipsis`]:qn,[`${Ut}-single-line`]:at&&At===1,[`${Ut}-ellipsis-single-line`]:Qt,[`${Ut}-ellipsis-multiple-line`]:Qn},yt),prefixCls:Dt,style:Object.assign(Object.assign({},Le),{WebkitLineClamp:Qn?At:void 0}),component:en,ref:(0,J.composeRef)(Ci,je,Re),direction:Pt,onClick:ln.includes("text")?Dn:void 0,"aria-label":wr==null?void 0:wr.toString(),title:hn},U),E.createElement(Pe.default,{enableMeasure:at&&!cn,text:Tn,rows:At,width:Zr,onEllipsis:Ei,expanded:Te,miscDeps:[Nt,Te,An]},(ho,go)=>{let jo=ho;return ho.length&&go&&!Te&&wr&&(jo=E.createElement("span",{key:"show-content","aria-hidden":!0},jo)),Ze(mt,E.createElement(E.Fragment,null,jo,Si(go)))}))))});var De=W.default=tn},81410:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getNode=q,W.toList=D;function D(G){return G===!1?[!1,!1]:Array.isArray(G)?G:[G]}function q(G,E,fe){return G===!0||G===void 0?E:G||fe&&E}},69425:function(_t,W,D){"use strict";"use client";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(7224)),fe=G(D(93967)),$=G(D(27712)),se=q(D(67294)),ce=D(47419),ye=G(D(14104)),ae=G(D(23461));const He=me=>{const{prefixCls:Oe,"aria-label":Q,className:le,style:ee,direction:be,maxLength:et,autoSize:tt=!0,value:wt,onSave:gt,onCancel:ft,onEnd:Pe,component:Ae,enterIcon:Be=se.createElement(E.default,null)}=me,Ze=se.useRef(null),ut=se.useRef(!1),tn=se.useRef(),[De,mt]=se.useState(wt);se.useEffect(()=>{mt(wt)},[wt]),se.useEffect(()=>{if(Ze.current&&Ze.current.resizableTextArea){const{textArea:Lt}=Ze.current.resizableTextArea;Lt.focus();const{length:en}=Lt.value;Lt.setSelectionRange(en,en)}},[]);const Re=Lt=>{let{target:en}=Lt;mt(en.value.replace(/[\n\r]/g,""))},nt=()=>{ut.current=!0},qe=()=>{ut.current=!1},Ge=Lt=>{let{keyCode:en}=Lt;ut.current||(tn.current=en)},Dt=()=>{gt(De.trim())},yt=Lt=>{let{keyCode:en,ctrlKey:hn,altKey:Xn,metaKey:an,shiftKey:Pt}=Lt;tn.current===en&&!ut.current&&!hn&&!Xn&&!an&&!Pt&&(en===$.default.ENTER?(Dt(),Pe==null||Pe()):en===$.default.ESC&&ft())},Le=()=>{Dt()},Zt=Ae?`${Oe}-${Ae}`:"",[yn,Tn,lr]=(0,ae.default)(Oe),or=(0,fe.default)(Oe,`${Oe}-edit-content`,{[`${Oe}-rtl`]:be==="rtl"},le,Zt,Tn,lr);return yn(se.createElement("div",{className:or,style:ee},se.createElement(ye.default,{ref:Ze,maxLength:et,value:De,onChange:Re,onKeyDown:Ge,onKeyUp:yt,onCompositionStart:nt,onCompositionEnd:qe,onBlur:Le,"aria-label":Q,rows:1,autoSize:tt}),Be!==null?(0,ce.cloneElement)(Be,{className:`${Oe}-edit-content-confirm`}):null))};var J=W.default=He},34528:function(_t,W,D){"use strict";var q,G=D(64836).default,E=D(75263).default;q={value:!0},W.Z=void 0;var fe=E(D(67294)),$=D(13594),se=G(D(28460)),ce=function(J,me){var Oe={};for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&me.indexOf(Q)<0&&(Oe[Q]=J[Q]);if(J!=null&&typeof Object.getOwnPropertySymbols=="function")for(var le=0,Q=Object.getOwnPropertySymbols(J);le<Q.length;le++)me.indexOf(Q[le])<0&&Object.prototype.propertyIsEnumerable.call(J,Q[le])&&(Oe[Q[le]]=J[Q[le]]);return Oe};const ye=[1,2,3,4,5],ae=fe.forwardRef((J,me)=>{const{level:Oe=1}=J,Q=ce(J,["level"]);let le;return ye.includes(Oe)?le=`h${Oe}`:le="h1",fe.createElement(se.default,Object.assign({ref:me},Q,{component:le}))});var He=W.Z=ae},89652:function(_t,W,D){"use strict";"use client";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),fe=q(D(93967)),$=D(75531),se=D(13594),ce=D(31929),ye=q(D(23461)),ae=function(me,Oe){var Q={};for(var le in me)Object.prototype.hasOwnProperty.call(me,le)&&Oe.indexOf(le)<0&&(Q[le]=me[le]);if(me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ee=0,le=Object.getOwnPropertySymbols(me);ee<le.length;ee++)Oe.indexOf(le[ee])<0&&Object.prototype.propertyIsEnumerable.call(me,le[ee])&&(Q[le[ee]]=me[le[ee]]);return Q};const He=E.forwardRef((me,Oe)=>{const{prefixCls:Q,component:le="article",className:ee,rootClassName:be,setContentRef:et,children:tt,direction:wt,style:gt}=me,ft=ae(me,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:Pe,direction:Ae,typography:Be}=E.useContext(ce.ConfigContext),Ze=wt!=null?wt:Ae;let ut=Oe;et&&(ut=(0,$.composeRef)(Oe,et));const tn=Pe("typography",Q),[De,mt,Re]=(0,ye.default)(tn),nt=(0,fe.default)(tn,Be==null?void 0:Be.className,{[`${tn}-rtl`]:Ze==="rtl"},ee,be,mt,Re),qe=Object.assign(Object.assign({},Be==null?void 0:Be.style),gt);return De(E.createElement(le,Object.assign({className:nt,style:qe,ref:ut},ft),tt))});var J=W.default=He},63985:function(_t,W,D){"use strict";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var E=G(D(67294)),fe=q(D(20640)),$=function(ye,ae,He,J){function me(Oe){return Oe instanceof He?Oe:new He(function(Q){Q(Oe)})}return new(He||(He=Promise))(function(Oe,Q){function le(et){try{be(J.next(et))}catch(tt){Q(tt)}}function ee(et){try{be(J.throw(et))}catch(tt){Q(tt)}}function be(et){et.done?Oe(et.value):me(et.value).then(le,ee)}be((J=J.apply(ye,ae||[])).next())})};const se=ye=>{let{copyConfig:ae,children:He}=ye;const[J,me]=E.useState(!1),[Oe,Q]=E.useState(!1),le=E.useRef(null),ee=()=>{le.current&&clearTimeout(le.current)},be={};return ae.format&&(be.format=ae.format),E.useEffect(()=>ee,[]),{copied:J,copyLoading:Oe,onClick:et=>$(void 0,void 0,void 0,function*(){var tt;et==null||et.preventDefault(),et==null||et.stopPropagation(),Q(!0);try{const wt=typeof ae.text=="function"?yield ae.text():ae.text;(0,fe.default)(wt||String(He)||"",be),Q(!1),me(!0),ee(),le.current=setTimeout(()=>{me(!1)},3e3),(tt=ae.onCopy)===null||tt===void 0||tt.call(ae,et)}catch(wt){throw Q(!1),wt}})}};var ce=W.default=se},92759:function(_t,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var G=q(D(67294));function E(fe,$){return G.useMemo(()=>{const se=!!fe;return[se,Object.assign(Object.assign({},$),se&&typeof fe=="object"?fe:null)]},[fe])}},67312:function(_t,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(67294));const E=($,se)=>{const ce=G.useRef(!1);G.useEffect(()=>{ce.current?$():ce.current=!0},se)};var fe=W.default=E},23461:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.prepareComponentToken=W.default=void 0;var q=D(98078),G=D(3184),E=D(48385);const fe=ce=>{const{componentCls:ye,titleMarginTop:ae}=ce;return{[ye]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:ce.colorText,wordBreak:"break-word",lineHeight:ce.lineHeight,[`&${ye}-secondary`]:{color:ce.colorTextDescription},[`&${ye}-success`]:{color:ce.colorSuccess},[`&${ye}-warning`]:{color:ce.colorWarning},[`&${ye}-danger`]:{color:ce.colorError,"a&:active, a&:focus":{color:ce.colorErrorActive},"a&:hover":{color:ce.colorErrorHover}},[`&${ye}-disabled`]:{color:ce.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},[`
        div&,
        p
      `]:{marginBottom:"1em"}},(0,E.getTitleStyles)(ce)),{[`
      & + h1${ye},
      & + h2${ye},
      & + h3${ye},
      & + h4${ye},
      & + h5${ye}
      `]:{marginTop:ae},[`
      div,
      ul,
      li,
      p,
      h1,
      h2,
      h3,
      h4,
      h5`]:{[`
        + h1,
        + h2,
        + h3,
        + h4,
        + h5
        `]:{marginTop:ae}}}),(0,E.getResetStyles)(ce)),(0,E.getLinkStyles)(ce)),{[`
        ${ye}-expand,
        ${ye}-collapse,
        ${ye}-edit,
        ${ye}-copy
      `]:Object.assign(Object.assign({},(0,q.operationUnit)(ce)),{marginInlineStart:ce.marginXXS})}),(0,E.getEditableStyles)(ce)),(0,E.getCopyableStyles)(ce)),(0,E.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},$=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});W.prepareComponentToken=$;var se=W.default=(0,G.genStyleHooks)("Typography",ce=>[fe(ce)],$)},48385:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getTitleStyles=W.getResetStyles=W.getLinkStyles=W.getEllipsisStyles=W.getEditableStyles=W.getCopyableStyles=void 0;var q=D(78589),G=D(6731),E=D(98078);const fe=(J,me,Oe,Q)=>{const{titleMarginBottom:le,fontWeightStrong:ee}=Q;return{marginBottom:le,color:Oe,fontWeight:ee,fontSize:J,lineHeight:me}},$=J=>{const me=[1,2,3,4,5],Oe={};return me.forEach(Q=>{Oe[`
      h${Q}&,
      div&-h${Q},
      div&-h${Q} > textarea,
      h${Q}
    `]=fe(J[`fontSizeHeading${Q}`],J[`lineHeightHeading${Q}`],J.colorTextHeading,J)}),Oe};W.getTitleStyles=$;const se=J=>{const{componentCls:me}=J;return{"a&, a":Object.assign(Object.assign({},(0,E.operationUnit)(J)),{textDecoration:J.linkDecoration,"&:active, &:hover":{textDecoration:J.linkHoverDecoration},[`&[disabled], &${me}-disabled`]:{color:J.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:J.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};W.getLinkStyles=se;const ce=J=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:J.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:J.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:q.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:J.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});W.getResetStyles=ce;const ye=J=>{const{componentCls:me,paddingSM:Oe}=J,Q=Oe;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:J.calc(J.paddingSM).mul(-1).equal(),marginTop:J.calc(Q).mul(-1).equal(),marginBottom:`calc(1em - ${(0,G.unit)(Q)})`},[`${me}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:J.calc(J.marginXS).add(2).equal(),insetBlockEnd:J.marginXS,color:J.colorTextDescription,fontWeight:"normal",fontSize:J.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};W.getEditableStyles=ye;const ae=J=>({[`${J.componentCls}-copy-success`]:{[`
    &,
    &:hover,
    &:focus`]:{color:J.colorSuccess}},[`${J.componentCls}-copy-icon-only`]:{marginInlineStart:0}});W.getCopyableStyles=ae;const He=()=>({[`
  a&-ellipsis,
  span&-ellipsis
  `]:{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});W.getEllipsisStyles=He},87629:function(_t,W,D){"use strict";"use client";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(36245)),E=W.default=G.default},36245:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var D=W.default="5.16.0"},83874:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(71079));function G(fe){return fe&&fe.__esModule?fe:{default:fe}}const E=q;W.default=E,_t.exports=E},43273:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(72225));function G(fe){return fe&&fe.__esModule?fe:{default:fe}}const E=q;W.default=E,_t.exports=E},90091:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(29539));function G(fe){return fe&&fe.__esModule?fe:{default:fe}}const E=q;W.default=E,_t.exports=E},10875:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(54825));function G(fe){return fe&&fe.__esModule?fe:{default:fe}}const E=q;W.default=E,_t.exports=E},7224:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(43552));function G(fe){return fe&&fe.__esModule?fe:{default:fe}}const E=q;W.default=E,_t.exports=E},4121:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;const q=G(D(61929));function G(fe){return fe&&fe.__esModule?fe:{default:fe}}const E=q;W.default=E,_t.exports=E},26545:function(_t,W,D){"use client";"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Ae}});var q=Oe(D(67294)),G=J(D(93967)),E=D(78589),fe=J(D(13357)),$=J(D(46648)),se=D(46338),ce=D(49458);function ye(Be,Ze){(Ze==null||Ze>Be.length)&&(Ze=Be.length);for(var ut=0,tn=new Array(Ze);ut<Ze;ut++)tn[ut]=Be[ut];return tn}function ae(Be){if(Array.isArray(Be))return Be}function He(Be,Ze,ut){return Ze in Be?Object.defineProperty(Be,Ze,{value:ut,enumerable:!0,configurable:!0,writable:!0}):Be[Ze]=ut,Be}function J(Be){return Be&&Be.__esModule?Be:{default:Be}}function me(Be){if(typeof WeakMap!="function")return null;var Ze=new WeakMap,ut=new WeakMap;return(me=function(tn){return tn?ut:Ze})(Be)}function Oe(Be,Ze){if(!Ze&&Be&&Be.__esModule)return Be;if(Be===null||typeof Be!="object"&&typeof Be!="function")return{default:Be};var ut=me(Ze);if(ut&&ut.has(Be))return ut.get(Be);var tn={__proto__:null},De=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in Be)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(Be,mt)){var Re=De?Object.getOwnPropertyDescriptor(Be,mt):null;Re&&(Re.get||Re.set)?Object.defineProperty(tn,mt,Re):tn[mt]=Be[mt]}return tn.default=Be,ut&&ut.set(Be,tn),tn}function Q(Be,Ze){var ut=Be==null?null:typeof Symbol!="undefined"&&Be[Symbol.iterator]||Be["@@iterator"];if(ut!=null){var tn=[],De=!0,mt=!1,Re,nt;try{for(ut=ut.call(Be);!(De=(Re=ut.next()).done)&&(tn.push(Re.value),!(Ze&&tn.length===Ze));De=!0);}catch(qe){mt=!0,nt=qe}finally{try{!De&&ut.return!=null&&ut.return()}finally{if(mt)throw nt}}return tn}}function le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ee(Be){for(var Ze=1;Ze<arguments.length;Ze++){var ut=arguments[Ze]!=null?arguments[Ze]:{},tn=Object.keys(ut);typeof Object.getOwnPropertySymbols=="function"&&(tn=tn.concat(Object.getOwnPropertySymbols(ut).filter(function(De){return Object.getOwnPropertyDescriptor(ut,De).enumerable}))),tn.forEach(function(De){He(Be,De,ut[De])})}return Be}function be(Be,Ze){var ut=Object.keys(Be);if(Object.getOwnPropertySymbols){var tn=Object.getOwnPropertySymbols(Be);Ze&&(tn=tn.filter(function(De){return Object.getOwnPropertyDescriptor(Be,De).enumerable})),ut.push.apply(ut,tn)}return ut}function et(Be,Ze){return Ze=Ze!=null?Ze:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Be,Object.getOwnPropertyDescriptors(Ze)):be(Object(Ze)).forEach(function(ut){Object.defineProperty(Be,ut,Object.getOwnPropertyDescriptor(Ze,ut))}),Be}function tt(Be,Ze){if(Be==null)return{};var ut=wt(Be,Ze),tn,De;if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(Be);for(De=0;De<mt.length;De++)tn=mt[De],!(Ze.indexOf(tn)>=0)&&Object.prototype.propertyIsEnumerable.call(Be,tn)&&(ut[tn]=Be[tn])}return ut}function wt(Be,Ze){if(Be==null)return{};var ut={},tn=Object.keys(Be),De,mt;for(mt=0;mt<tn.length;mt++)De=tn[mt],!(Ze.indexOf(De)>=0)&&(ut[De]=Be[De]);return ut}function gt(Be,Ze){return ae(Be)||Q(Be,Ze)||ft(Be,Ze)||le()}function ft(Be,Ze){if(Be){if(typeof Be=="string")return ye(Be,Ze);var ut=Object.prototype.toString.call(Be).slice(8,-1);if(ut==="Object"&&Be.constructor&&(ut=Be.constructor.name),ut==="Map"||ut==="Set")return Array.from(ut);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return ye(Be,Ze)}}(0,se.setTwoToneColor)(E.blue.primary);var Pe=q.forwardRef(function(Be,Ze){var ut=Be.className,tn=Be.icon,De=Be.spin,mt=Be.rotate,Re=Be.tabIndex,nt=Be.onClick,qe=Be.twoToneColor,Ge=tt(Be,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),Dt=q.useContext(fe.default),yt=Dt.prefixCls,Le=yt===void 0?"anticon":yt,Zt=Dt.rootClassName,yn,Tn=(0,G.default)(Zt,Le,(yn={},He(yn,"".concat(Le,"-").concat(tn.name),!!tn.name),He(yn,"".concat(Le,"-spin"),!!De||tn.name==="loading"),yn),ut),lr=Re;lr===void 0&&nt&&(lr=-1);var or=mt?{msTransform:"rotate(".concat(mt,"deg)"),transform:"rotate(".concat(mt,"deg)")}:void 0,Lt=gt((0,ce.normalizeTwoToneColors)(qe),2),en=Lt[0],hn=Lt[1];return q.createElement("span",et(ee({role:"img","aria-label":tn.name},Ge),{ref:Ze,tabIndex:lr,onClick:nt,className:Tn}),q.createElement($.default,{icon:tn,primaryColor:en,secondaryColor:hn,style:or}))});Pe.displayName="AntdIcon",Pe.getTwoToneColor=se.getTwoToneColor,Pe.setTwoToneColor=se.setTwoToneColor;var Ae=Pe},13357:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return E}});var q=D(67294),G=(0,q.createContext)({}),E=G},46648:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return le}});var q=$(D(67294)),G=D(49458);function E(ee,be,et){return be in ee?Object.defineProperty(ee,be,{value:et,enumerable:!0,configurable:!0,writable:!0}):ee[be]=et,ee}function fe(ee){if(typeof WeakMap!="function")return null;var be=new WeakMap,et=new WeakMap;return(fe=function(tt){return tt?et:be})(ee)}function $(ee,be){if(!be&&ee&&ee.__esModule)return ee;if(ee===null||typeof ee!="object"&&typeof ee!="function")return{default:ee};var et=fe(be);if(et&&et.has(ee))return et.get(ee);var tt={__proto__:null},wt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var gt in ee)if(gt!=="default"&&Object.prototype.hasOwnProperty.call(ee,gt)){var ft=wt?Object.getOwnPropertyDescriptor(ee,gt):null;ft&&(ft.get||ft.set)?Object.defineProperty(tt,gt,ft):tt[gt]=ee[gt]}return tt.default=ee,et&&et.set(ee,tt),tt}function se(ee){for(var be=1;be<arguments.length;be++){var et=arguments[be]!=null?arguments[be]:{},tt=Object.keys(et);typeof Object.getOwnPropertySymbols=="function"&&(tt=tt.concat(Object.getOwnPropertySymbols(et).filter(function(wt){return Object.getOwnPropertyDescriptor(et,wt).enumerable}))),tt.forEach(function(wt){E(ee,wt,et[wt])})}return ee}function ce(ee,be){var et=Object.keys(ee);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(ee);be&&(tt=tt.filter(function(wt){return Object.getOwnPropertyDescriptor(ee,wt).enumerable})),et.push.apply(et,tt)}return et}function ye(ee,be){return be=be!=null?be:{},Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(be)):ce(Object(be)).forEach(function(et){Object.defineProperty(ee,et,Object.getOwnPropertyDescriptor(be,et))}),ee}function ae(ee,be){if(ee==null)return{};var et=He(ee,be),tt,wt;if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(ee);for(wt=0;wt<gt.length;wt++)tt=gt[wt],!(be.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(ee,tt)&&(et[tt]=ee[tt])}return et}function He(ee,be){if(ee==null)return{};var et={},tt=Object.keys(ee),wt,gt;for(gt=0;gt<tt.length;gt++)wt=tt[gt],!(be.indexOf(wt)>=0)&&(et[wt]=ee[wt]);return et}var J={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function me(ee){var be=ee.primaryColor,et=ee.secondaryColor;J.primaryColor=be,J.secondaryColor=et||(0,G.getSecondaryColor)(be),J.calculated=!!et}function Oe(){return se({},J)}var Q=function(ee){var be=ee.icon,et=ee.className,tt=ee.onClick,wt=ee.style,gt=ee.primaryColor,ft=ee.secondaryColor,Pe=ae(ee,["icon","className","onClick","style","primaryColor","secondaryColor"]),Ae=q.useRef(),Be=J;if(gt&&(Be={primaryColor:gt,secondaryColor:ft||(0,G.getSecondaryColor)(gt)}),(0,G.useInsertStyles)(Ae),(0,G.warning)((0,G.isIconDefinition)(be),"icon should be icon definiton, but got ".concat(be)),!(0,G.isIconDefinition)(be))return null;var Ze=be;return Ze&&typeof Ze.icon=="function"&&(Ze=ye(se({},Ze),{icon:Ze.icon(Be.primaryColor,Be.secondaryColor)})),(0,G.generate)(Ze.icon,"svg-".concat(Ze.name),ye(se({className:et,onClick:tt,style:wt,"data-icon":Ze.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Pe),{ref:Ae}))};Q.displayName="IconReact",Q.getTwoToneColors=Oe,Q.setTwoToneColors=me;var le=Q},46338:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0});function q(Oe,Q){for(var le in Q)Object.defineProperty(Oe,le,{enumerable:!0,get:Q[le]})}q(W,{getTwoToneColor:function(){return me},setTwoToneColor:function(){return J}});var G=se(D(46648)),E=D(49458);function fe(Oe,Q){(Q==null||Q>Oe.length)&&(Q=Oe.length);for(var le=0,ee=new Array(Q);le<Q;le++)ee[le]=Oe[le];return ee}function $(Oe){if(Array.isArray(Oe))return Oe}function se(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function ce(Oe,Q){var le=Oe==null?null:typeof Symbol!="undefined"&&Oe[Symbol.iterator]||Oe["@@iterator"];if(le!=null){var ee=[],be=!0,et=!1,tt,wt;try{for(le=le.call(Oe);!(be=(tt=le.next()).done)&&(ee.push(tt.value),!(Q&&ee.length===Q));be=!0);}catch(gt){et=!0,wt=gt}finally{try{!be&&le.return!=null&&le.return()}finally{if(et)throw wt}}return ee}}function ye(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ae(Oe,Q){return $(Oe)||ce(Oe,Q)||He(Oe,Q)||ye()}function He(Oe,Q){if(Oe){if(typeof Oe=="string")return fe(Oe,Q);var le=Object.prototype.toString.call(Oe).slice(8,-1);if(le==="Object"&&Oe.constructor&&(le=Oe.constructor.name),le==="Map"||le==="Set")return Array.from(le);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return fe(Oe,Q)}}function J(Oe){var Q=ae((0,E.normalizeTwoToneColors)(Oe),2),le=Q[0],ee=Q[1];return G.default.setTwoToneColors({primaryColor:le,secondaryColor:ee})}function me(){var Oe=G.default.getTwoToneColors();return Oe.calculated?[Oe.primaryColor,Oe.secondaryColor]:Oe.primaryColor}},71079:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Oe}});var q=ce(D(67294)),G=$(D(25330)),E=$(D(26545));function fe(Q,le,ee){return le in Q?Object.defineProperty(Q,le,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Q[le]=ee,Q}function $(Q){return Q&&Q.__esModule?Q:{default:Q}}function se(Q){if(typeof WeakMap!="function")return null;var le=new WeakMap,ee=new WeakMap;return(se=function(be){return be?ee:le})(Q)}function ce(Q,le){if(!le&&Q&&Q.__esModule)return Q;if(Q===null||typeof Q!="object"&&typeof Q!="function")return{default:Q};var ee=se(le);if(ee&&ee.has(Q))return ee.get(Q);var be={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in Q)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(Q,tt)){var wt=et?Object.getOwnPropertyDescriptor(Q,tt):null;wt&&(wt.get||wt.set)?Object.defineProperty(be,tt,wt):be[tt]=Q[tt]}return be.default=Q,ee&&ee.set(Q,be),be}function ye(Q){for(var le=1;le<arguments.length;le++){var ee=arguments[le]!=null?arguments[le]:{},be=Object.keys(ee);typeof Object.getOwnPropertySymbols=="function"&&(be=be.concat(Object.getOwnPropertySymbols(ee).filter(function(et){return Object.getOwnPropertyDescriptor(ee,et).enumerable}))),be.forEach(function(et){fe(Q,et,ee[et])})}return Q}function ae(Q,le){var ee=Object.keys(Q);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Q);le&&(be=be.filter(function(et){return Object.getOwnPropertyDescriptor(Q,et).enumerable})),ee.push.apply(ee,be)}return ee}function He(Q,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(ee){Object.defineProperty(Q,ee,Object.getOwnPropertyDescriptor(le,ee))}),Q}var J=function(Q,le){return q.createElement(E.default,He(ye({},Q),{ref:le,icon:G.default}))},me=q.forwardRef(J),Oe=me},72225:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Oe}});var q=ce(D(67294)),G=$(D(67303)),E=$(D(26545));function fe(Q,le,ee){return le in Q?Object.defineProperty(Q,le,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Q[le]=ee,Q}function $(Q){return Q&&Q.__esModule?Q:{default:Q}}function se(Q){if(typeof WeakMap!="function")return null;var le=new WeakMap,ee=new WeakMap;return(se=function(be){return be?ee:le})(Q)}function ce(Q,le){if(!le&&Q&&Q.__esModule)return Q;if(Q===null||typeof Q!="object"&&typeof Q!="function")return{default:Q};var ee=se(le);if(ee&&ee.has(Q))return ee.get(Q);var be={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in Q)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(Q,tt)){var wt=et?Object.getOwnPropertyDescriptor(Q,tt):null;wt&&(wt.get||wt.set)?Object.defineProperty(be,tt,wt):be[tt]=Q[tt]}return be.default=Q,ee&&ee.set(Q,be),be}function ye(Q){for(var le=1;le<arguments.length;le++){var ee=arguments[le]!=null?arguments[le]:{},be=Object.keys(ee);typeof Object.getOwnPropertySymbols=="function"&&(be=be.concat(Object.getOwnPropertySymbols(ee).filter(function(et){return Object.getOwnPropertyDescriptor(ee,et).enumerable}))),be.forEach(function(et){fe(Q,et,ee[et])})}return Q}function ae(Q,le){var ee=Object.keys(Q);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Q);le&&(be=be.filter(function(et){return Object.getOwnPropertyDescriptor(Q,et).enumerable})),ee.push.apply(ee,be)}return ee}function He(Q,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(ee){Object.defineProperty(Q,ee,Object.getOwnPropertyDescriptor(le,ee))}),Q}var J=function(Q,le){return q.createElement(E.default,He(ye({},Q),{ref:le,icon:G.default}))},me=q.forwardRef(J),Oe=me},29539:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Oe}});var q=ce(D(67294)),G=$(D(83647)),E=$(D(26545));function fe(Q,le,ee){return le in Q?Object.defineProperty(Q,le,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Q[le]=ee,Q}function $(Q){return Q&&Q.__esModule?Q:{default:Q}}function se(Q){if(typeof WeakMap!="function")return null;var le=new WeakMap,ee=new WeakMap;return(se=function(be){return be?ee:le})(Q)}function ce(Q,le){if(!le&&Q&&Q.__esModule)return Q;if(Q===null||typeof Q!="object"&&typeof Q!="function")return{default:Q};var ee=se(le);if(ee&&ee.has(Q))return ee.get(Q);var be={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in Q)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(Q,tt)){var wt=et?Object.getOwnPropertyDescriptor(Q,tt):null;wt&&(wt.get||wt.set)?Object.defineProperty(be,tt,wt):be[tt]=Q[tt]}return be.default=Q,ee&&ee.set(Q,be),be}function ye(Q){for(var le=1;le<arguments.length;le++){var ee=arguments[le]!=null?arguments[le]:{},be=Object.keys(ee);typeof Object.getOwnPropertySymbols=="function"&&(be=be.concat(Object.getOwnPropertySymbols(ee).filter(function(et){return Object.getOwnPropertyDescriptor(ee,et).enumerable}))),be.forEach(function(et){fe(Q,et,ee[et])})}return Q}function ae(Q,le){var ee=Object.keys(Q);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Q);le&&(be=be.filter(function(et){return Object.getOwnPropertyDescriptor(Q,et).enumerable})),ee.push.apply(ee,be)}return ee}function He(Q,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(ee){Object.defineProperty(Q,ee,Object.getOwnPropertyDescriptor(le,ee))}),Q}var J=function(Q,le){return q.createElement(E.default,He(ye({},Q),{ref:le,icon:G.default}))},me=q.forwardRef(J),Oe=me},54825:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Oe}});var q=ce(D(67294)),G=$(D(57583)),E=$(D(26545));function fe(Q,le,ee){return le in Q?Object.defineProperty(Q,le,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Q[le]=ee,Q}function $(Q){return Q&&Q.__esModule?Q:{default:Q}}function se(Q){if(typeof WeakMap!="function")return null;var le=new WeakMap,ee=new WeakMap;return(se=function(be){return be?ee:le})(Q)}function ce(Q,le){if(!le&&Q&&Q.__esModule)return Q;if(Q===null||typeof Q!="object"&&typeof Q!="function")return{default:Q};var ee=se(le);if(ee&&ee.has(Q))return ee.get(Q);var be={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in Q)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(Q,tt)){var wt=et?Object.getOwnPropertyDescriptor(Q,tt):null;wt&&(wt.get||wt.set)?Object.defineProperty(be,tt,wt):be[tt]=Q[tt]}return be.default=Q,ee&&ee.set(Q,be),be}function ye(Q){for(var le=1;le<arguments.length;le++){var ee=arguments[le]!=null?arguments[le]:{},be=Object.keys(ee);typeof Object.getOwnPropertySymbols=="function"&&(be=be.concat(Object.getOwnPropertySymbols(ee).filter(function(et){return Object.getOwnPropertyDescriptor(ee,et).enumerable}))),be.forEach(function(et){fe(Q,et,ee[et])})}return Q}function ae(Q,le){var ee=Object.keys(Q);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Q);le&&(be=be.filter(function(et){return Object.getOwnPropertyDescriptor(Q,et).enumerable})),ee.push.apply(ee,be)}return ee}function He(Q,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(ee){Object.defineProperty(Q,ee,Object.getOwnPropertyDescriptor(le,ee))}),Q}var J=function(Q,le){return q.createElement(E.default,He(ye({},Q),{ref:le,icon:G.default}))},me=q.forwardRef(J),Oe=me},43552:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Oe}});var q=ce(D(67294)),G=$(D(29260)),E=$(D(26545));function fe(Q,le,ee){return le in Q?Object.defineProperty(Q,le,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Q[le]=ee,Q}function $(Q){return Q&&Q.__esModule?Q:{default:Q}}function se(Q){if(typeof WeakMap!="function")return null;var le=new WeakMap,ee=new WeakMap;return(se=function(be){return be?ee:le})(Q)}function ce(Q,le){if(!le&&Q&&Q.__esModule)return Q;if(Q===null||typeof Q!="object"&&typeof Q!="function")return{default:Q};var ee=se(le);if(ee&&ee.has(Q))return ee.get(Q);var be={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in Q)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(Q,tt)){var wt=et?Object.getOwnPropertyDescriptor(Q,tt):null;wt&&(wt.get||wt.set)?Object.defineProperty(be,tt,wt):be[tt]=Q[tt]}return be.default=Q,ee&&ee.set(Q,be),be}function ye(Q){for(var le=1;le<arguments.length;le++){var ee=arguments[le]!=null?arguments[le]:{},be=Object.keys(ee);typeof Object.getOwnPropertySymbols=="function"&&(be=be.concat(Object.getOwnPropertySymbols(ee).filter(function(et){return Object.getOwnPropertyDescriptor(ee,et).enumerable}))),be.forEach(function(et){fe(Q,et,ee[et])})}return Q}function ae(Q,le){var ee=Object.keys(Q);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Q);le&&(be=be.filter(function(et){return Object.getOwnPropertyDescriptor(Q,et).enumerable})),ee.push.apply(ee,be)}return ee}function He(Q,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(ee){Object.defineProperty(Q,ee,Object.getOwnPropertyDescriptor(le,ee))}),Q}var J=function(Q,le){return q.createElement(E.default,He(ye({},Q),{ref:le,icon:G.default}))},me=q.forwardRef(J),Oe=me},61929:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return Oe}});var q=ce(D(67294)),G=$(D(25828)),E=$(D(26545));function fe(Q,le,ee){return le in Q?Object.defineProperty(Q,le,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Q[le]=ee,Q}function $(Q){return Q&&Q.__esModule?Q:{default:Q}}function se(Q){if(typeof WeakMap!="function")return null;var le=new WeakMap,ee=new WeakMap;return(se=function(be){return be?ee:le})(Q)}function ce(Q,le){if(!le&&Q&&Q.__esModule)return Q;if(Q===null||typeof Q!="object"&&typeof Q!="function")return{default:Q};var ee=se(le);if(ee&&ee.has(Q))return ee.get(Q);var be={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in Q)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(Q,tt)){var wt=et?Object.getOwnPropertyDescriptor(Q,tt):null;wt&&(wt.get||wt.set)?Object.defineProperty(be,tt,wt):be[tt]=Q[tt]}return be.default=Q,ee&&ee.set(Q,be),be}function ye(Q){for(var le=1;le<arguments.length;le++){var ee=arguments[le]!=null?arguments[le]:{},be=Object.keys(ee);typeof Object.getOwnPropertySymbols=="function"&&(be=be.concat(Object.getOwnPropertySymbols(ee).filter(function(et){return Object.getOwnPropertyDescriptor(ee,et).enumerable}))),be.forEach(function(et){fe(Q,et,ee[et])})}return Q}function ae(Q,le){var ee=Object.keys(Q);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Q);le&&(be=be.filter(function(et){return Object.getOwnPropertyDescriptor(Q,et).enumerable})),ee.push.apply(ee,be)}return ee}function He(Q,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(ee){Object.defineProperty(Q,ee,Object.getOwnPropertyDescriptor(le,ee))}),Q}var J=function(Q,le){return q.createElement(E.default,He(ye({},Q),{ref:le,icon:G.default}))},me=q.forwardRef(J),Oe=me},49458:function(_t,W,D){"use strict";Object.defineProperty(W,"__esModule",{value:!0});function q(Pe,Ae){for(var Be in Ae)Object.defineProperty(Pe,Be,{enumerable:!0,get:Ae[Be]})}q(W,{generate:function(){return be},getSecondaryColor:function(){return et},iconStyles:function(){return gt},isIconDefinition:function(){return le},normalizeAttrs:function(){return ee},normalizeTwoToneColors:function(){return tt},svgBaseProps:function(){return wt},useInsertStyles:function(){return ft},warning:function(){return Q}});var G=D(78589),E=D(93399),fe=D(63298),$=ae(D(45520)),se=J(D(67294)),ce=ae(D(13357));function ye(Pe,Ae,Be){return Ae in Pe?Object.defineProperty(Pe,Ae,{value:Be,enumerable:!0,configurable:!0,writable:!0}):Pe[Ae]=Be,Pe}function ae(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}function He(Pe){if(typeof WeakMap!="function")return null;var Ae=new WeakMap,Be=new WeakMap;return(He=function(Ze){return Ze?Be:Ae})(Pe)}function J(Pe,Ae){if(!Ae&&Pe&&Pe.__esModule)return Pe;if(Pe===null||typeof Pe!="object"&&typeof Pe!="function")return{default:Pe};var Be=He(Ae);if(Be&&Be.has(Pe))return Be.get(Pe);var Ze={__proto__:null},ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tn in Pe)if(tn!=="default"&&Object.prototype.hasOwnProperty.call(Pe,tn)){var De=ut?Object.getOwnPropertyDescriptor(Pe,tn):null;De&&(De.get||De.set)?Object.defineProperty(Ze,tn,De):Ze[tn]=Pe[tn]}return Ze.default=Pe,Be&&Be.set(Pe,Ze),Ze}function me(Pe){for(var Ae=1;Ae<arguments.length;Ae++){var Be=arguments[Ae]!=null?arguments[Ae]:{},Ze=Object.keys(Be);typeof Object.getOwnPropertySymbols=="function"&&(Ze=Ze.concat(Object.getOwnPropertySymbols(Be).filter(function(ut){return Object.getOwnPropertyDescriptor(Be,ut).enumerable}))),Ze.forEach(function(ut){ye(Pe,ut,Be[ut])})}return Pe}function Oe(Pe){return Pe.replace(/-(.)/g,function(Ae,Be){return Be.toUpperCase()})}function Q(Pe,Ae){(0,$.default)(Pe,"[@ant-design/icons] ".concat(Ae))}function le(Pe){return typeof Pe=="object"&&typeof Pe.name=="string"&&typeof Pe.theme=="string"&&(typeof Pe.icon=="object"||typeof Pe.icon=="function")}function ee(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(Pe).reduce(function(Ae,Be){var Ze=Pe[Be];switch(Be){case"class":Ae.className=Ze,delete Ae.class;break;default:delete Ae[Be],Ae[Oe(Be)]=Ze}return Ae},{})}function be(Pe,Ae,Be){return Be?se.default.createElement(Pe.tag,me({key:Ae},ee(Pe.attrs),Be),(Pe.children||[]).map(function(Ze,ut){return be(Ze,"".concat(Ae,"-").concat(Pe.tag,"-").concat(ut))})):se.default.createElement(Pe.tag,me({key:Ae},ee(Pe.attrs)),(Pe.children||[]).map(function(Ze,ut){return be(Ze,"".concat(Ae,"-").concat(Pe.tag,"-").concat(ut))}))}function et(Pe){return(0,G.generate)(Pe)[0]}function tt(Pe){return Pe?Array.isArray(Pe)?Pe:[Pe]:[]}var wt={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},gt=`
.anticon {
  display: inline-flex;
  alignItems: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,ft=function(Pe){var Ae=(0,se.useContext)(ce.default),Be=Ae.csp,Ze=Ae.prefixCls,ut=gt;Ze&&(ut=ut.replace(/anticon/g,Ze)),(0,se.useEffect)(function(){var tn=Pe.current,De=(0,fe.getShadowRoot)(tn);(0,E.updateCSS)(ut,"@ant-design-icons",{prepend:!0,csp:Be,attachTo:De})},[])}},98129:function(_t,W,D){"use strict";var q=D(60690);_t.exports=function(fe){fe=fe||{};var $=fe.reporter,se=q.getOption(fe,"async",!0),ce=q.getOption(fe,"auto",!0);ce&&!se&&($&&$.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),se=!0);var ye=G(),ae,He=!1;function J(et,tt){!He&&ce&&se&&ye.size()===0&&Q(),ye.add(et,tt)}function me(){for(He=!0;ye.size();){var et=ye;ye=G(),et.process()}He=!1}function Oe(et){He||(et===void 0&&(et=se),ae&&(ee(ae),ae=null),et?Q():me())}function Q(){ae=be(me)}function le(){ye={},batchSize=0,topLevel=0,bottomLevel=0}function ee(et){var tt=clearTimeout;return tt(et)}function be(et){var tt=function(wt){return setTimeout(wt,0)};return tt(et)}return{add:J,force:Oe}};function G(){var E={},fe=0,$=0,se=0;function ce(He,J){J||(J=He,He=0),He>$?$=He:He<se&&(se=He),E[He]||(E[He]=[]),E[He].push(J),fe++}function ye(){for(var He=se;He<=$;He++)for(var J=E[He],me=0;me<J.length;me++){var Oe=J[me];Oe()}}function ae(){return fe}return{add:ce,process:ye,size:ae}}},60690:function(_t){"use strict";var W=_t.exports={};W.getOption=D;function D(q,G,E){var fe=q[G];return fe==null&&E!==void 0?E:fe}},8874:function(_t){"use strict";_t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(_t,W,D){var q=D(8874),G=D(86851),E=Object.hasOwnProperty,fe=Object.create(null);for(var $ in q)E.call(q,$)&&(fe[q[$]]=$);var se=_t.exports={to:{},get:{}};se.get=function(ae){var He=ae.substring(0,3).toLowerCase(),J,me;switch(He){case"hsl":J=se.get.hsl(ae),me="hsl";break;case"hwb":J=se.get.hwb(ae),me="hwb";break;default:J=se.get.rgb(ae),me="rgb";break}return J?{model:me,value:J}:null},se.get.rgb=function(ae){if(!ae)return null;var He=/^#([a-f0-9]{3,4})$/i,J=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,me=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Oe=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Q=/^(\w+)$/,le=[0,0,0,1],ee,be,et;if(ee=ae.match(J)){for(et=ee[2],ee=ee[1],be=0;be<3;be++){var tt=be*2;le[be]=parseInt(ee.slice(tt,tt+2),16)}et&&(le[3]=parseInt(et,16)/255)}else if(ee=ae.match(He)){for(ee=ee[1],et=ee[3],be=0;be<3;be++)le[be]=parseInt(ee[be]+ee[be],16);et&&(le[3]=parseInt(et+et,16)/255)}else if(ee=ae.match(me)){for(be=0;be<3;be++)le[be]=parseInt(ee[be+1],0);ee[4]&&(ee[5]?le[3]=parseFloat(ee[4])*.01:le[3]=parseFloat(ee[4]))}else if(ee=ae.match(Oe)){for(be=0;be<3;be++)le[be]=Math.round(parseFloat(ee[be+1])*2.55);ee[4]&&(ee[5]?le[3]=parseFloat(ee[4])*.01:le[3]=parseFloat(ee[4]))}else return(ee=ae.match(Q))?ee[1]==="transparent"?[0,0,0,0]:E.call(q,ee[1])?(le=q[ee[1]],le[3]=1,le):null:null;for(be=0;be<3;be++)le[be]=ce(le[be],0,255);return le[3]=ce(le[3],0,1),le},se.get.hsl=function(ae){if(!ae)return null;var He=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,J=ae.match(He);if(J){var me=parseFloat(J[4]),Oe=(parseFloat(J[1])%360+360)%360,Q=ce(parseFloat(J[2]),0,100),le=ce(parseFloat(J[3]),0,100),ee=ce(isNaN(me)?1:me,0,1);return[Oe,Q,le,ee]}return null},se.get.hwb=function(ae){if(!ae)return null;var He=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,J=ae.match(He);if(J){var me=parseFloat(J[4]),Oe=(parseFloat(J[1])%360+360)%360,Q=ce(parseFloat(J[2]),0,100),le=ce(parseFloat(J[3]),0,100),ee=ce(isNaN(me)?1:me,0,1);return[Oe,Q,le,ee]}return null},se.to.hex=function(){var ae=G(arguments);return"#"+ye(ae[0])+ye(ae[1])+ye(ae[2])+(ae[3]<1?ye(Math.round(ae[3]*255)):"")},se.to.rgb=function(){var ae=G(arguments);return ae.length<4||ae[3]===1?"rgb("+Math.round(ae[0])+", "+Math.round(ae[1])+", "+Math.round(ae[2])+")":"rgba("+Math.round(ae[0])+", "+Math.round(ae[1])+", "+Math.round(ae[2])+", "+ae[3]+")"},se.to.rgb.percent=function(){var ae=G(arguments),He=Math.round(ae[0]/255*100),J=Math.round(ae[1]/255*100),me=Math.round(ae[2]/255*100);return ae.length<4||ae[3]===1?"rgb("+He+"%, "+J+"%, "+me+"%)":"rgba("+He+"%, "+J+"%, "+me+"%, "+ae[3]+")"},se.to.hsl=function(){var ae=G(arguments);return ae.length<4||ae[3]===1?"hsl("+ae[0]+", "+ae[1]+"%, "+ae[2]+"%)":"hsla("+ae[0]+", "+ae[1]+"%, "+ae[2]+"%, "+ae[3]+")"},se.to.hwb=function(){var ae=G(arguments),He="";return ae.length>=4&&ae[3]!==1&&(He=", "+ae[3]),"hwb("+ae[0]+", "+ae[1]+"%, "+ae[2]+"%"+He+")"},se.to.keyword=function(ae){return fe[ae.slice(0,3)]};function ce(ae,He,J){return Math.min(Math.max(He,ae),J)}function ye(ae){var He=Math.round(ae).toString(16).toUpperCase();return He.length<2?"0"+He:He}},37620:function(_t,W,D){"use strict";D.d(W,{ZP:function(){return wt},B8:function(){return Ae}});function q(Ge,Dt,yt){Ge.prototype=Dt.prototype=yt,yt.constructor=Ge}function G(Ge,Dt){var yt=Object.create(Ge.prototype);for(var Le in Dt)yt[Le]=Dt[Le];return yt}function E(){}var fe=.7,$=1/fe,se="\\s*([+-]?\\d+)\\s*",ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ye="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ae=/^#([0-9a-f]{3,8})$/,He=new RegExp("^rgb\\("+[se,se,se]+"\\)$"),J=new RegExp("^rgb\\("+[ye,ye,ye]+"\\)$"),me=new RegExp("^rgba\\("+[se,se,se,ce]+"\\)$"),Oe=new RegExp("^rgba\\("+[ye,ye,ye,ce]+"\\)$"),Q=new RegExp("^hsl\\("+[ce,ye,ye]+"\\)$"),le=new RegExp("^hsla\\("+[ce,ye,ye,ce]+"\\)$"),ee={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q(E,wt,{copy:function(Ge){return Object.assign(new this.constructor,this,Ge)},displayable:function(){return this.rgb().displayable()},hex:be,formatHex:be,formatHsl:et,formatRgb:tt,toString:tt});function be(){return this.rgb().formatHex()}function et(){return mt(this).formatHsl()}function tt(){return this.rgb().formatRgb()}function wt(Ge){var Dt,yt;return Ge=(Ge+"").trim().toLowerCase(),(Dt=ae.exec(Ge))?(yt=Dt[1].length,Dt=parseInt(Dt[1],16),yt===6?gt(Dt):yt===3?new Be(Dt>>8&15|Dt>>4&240,Dt>>4&15|Dt&240,(Dt&15)<<4|Dt&15,1):yt===8?ft(Dt>>24&255,Dt>>16&255,Dt>>8&255,(Dt&255)/255):yt===4?ft(Dt>>12&15|Dt>>8&240,Dt>>8&15|Dt>>4&240,Dt>>4&15|Dt&240,((Dt&15)<<4|Dt&15)/255):null):(Dt=He.exec(Ge))?new Be(Dt[1],Dt[2],Dt[3],1):(Dt=J.exec(Ge))?new Be(Dt[1]*255/100,Dt[2]*255/100,Dt[3]*255/100,1):(Dt=me.exec(Ge))?ft(Dt[1],Dt[2],Dt[3],Dt[4]):(Dt=Oe.exec(Ge))?ft(Dt[1]*255/100,Dt[2]*255/100,Dt[3]*255/100,Dt[4]):(Dt=Q.exec(Ge))?De(Dt[1],Dt[2]/100,Dt[3]/100,1):(Dt=le.exec(Ge))?De(Dt[1],Dt[2]/100,Dt[3]/100,Dt[4]):ee.hasOwnProperty(Ge)?gt(ee[Ge]):Ge==="transparent"?new Be(NaN,NaN,NaN,0):null}function gt(Ge){return new Be(Ge>>16&255,Ge>>8&255,Ge&255,1)}function ft(Ge,Dt,yt,Le){return Le<=0&&(Ge=Dt=yt=NaN),new Be(Ge,Dt,yt,Le)}function Pe(Ge){return Ge instanceof E||(Ge=wt(Ge)),Ge?(Ge=Ge.rgb(),new Be(Ge.r,Ge.g,Ge.b,Ge.opacity)):new Be}function Ae(Ge,Dt,yt,Le){return arguments.length===1?Pe(Ge):new Be(Ge,Dt,yt,Le==null?1:Le)}function Be(Ge,Dt,yt,Le){this.r=+Ge,this.g=+Dt,this.b=+yt,this.opacity=+Le}q(Be,Ae,G(E,{brighter:function(Ge){return Ge=Ge==null?$:Math.pow($,Ge),new Be(this.r*Ge,this.g*Ge,this.b*Ge,this.opacity)},darker:function(Ge){return Ge=Ge==null?fe:Math.pow(fe,Ge),new Be(this.r*Ge,this.g*Ge,this.b*Ge,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ze,formatHex:Ze,formatRgb:ut,toString:ut}));function Ze(){return"#"+tn(this.r)+tn(this.g)+tn(this.b)}function ut(){var Ge=this.opacity;return Ge=isNaN(Ge)?1:Math.max(0,Math.min(1,Ge)),(Ge===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ge===1?")":", "+Ge+")")}function tn(Ge){return Ge=Math.max(0,Math.min(255,Math.round(Ge)||0)),(Ge<16?"0":"")+Ge.toString(16)}function De(Ge,Dt,yt,Le){return Le<=0?Ge=Dt=yt=NaN:yt<=0||yt>=1?Ge=Dt=NaN:Dt<=0&&(Ge=NaN),new nt(Ge,Dt,yt,Le)}function mt(Ge){if(Ge instanceof nt)return new nt(Ge.h,Ge.s,Ge.l,Ge.opacity);if(Ge instanceof E||(Ge=wt(Ge)),!Ge)return new nt;if(Ge instanceof nt)return Ge;Ge=Ge.rgb();var Dt=Ge.r/255,yt=Ge.g/255,Le=Ge.b/255,Zt=Math.min(Dt,yt,Le),yn=Math.max(Dt,yt,Le),Tn=NaN,lr=yn-Zt,or=(yn+Zt)/2;return lr?(Dt===yn?Tn=(yt-Le)/lr+(yt<Le)*6:yt===yn?Tn=(Le-Dt)/lr+2:Tn=(Dt-yt)/lr+4,lr/=or<.5?yn+Zt:2-yn-Zt,Tn*=60):lr=or>0&&or<1?0:Tn,new nt(Tn,lr,or,Ge.opacity)}function Re(Ge,Dt,yt,Le){return arguments.length===1?mt(Ge):new nt(Ge,Dt,yt,Le==null?1:Le)}function nt(Ge,Dt,yt,Le){this.h=+Ge,this.s=+Dt,this.l=+yt,this.opacity=+Le}q(nt,Re,G(E,{brighter:function(Ge){return Ge=Ge==null?$:Math.pow($,Ge),new nt(this.h,this.s,this.l*Ge,this.opacity)},darker:function(Ge){return Ge=Ge==null?fe:Math.pow(fe,Ge),new nt(this.h,this.s,this.l*Ge,this.opacity)},rgb:function(){var Ge=this.h%360+(this.h<0)*360,Dt=isNaN(Ge)||isNaN(this.s)?0:this.s,yt=this.l,Le=yt+(yt<.5?yt:1-yt)*Dt,Zt=2*yt-Le;return new Be(qe(Ge>=240?Ge-240:Ge+120,Zt,Le),qe(Ge,Zt,Le),qe(Ge<120?Ge+240:Ge-120,Zt,Le),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ge=this.opacity;return Ge=isNaN(Ge)?1:Math.max(0,Math.min(1,Ge)),(Ge===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ge===1?")":", "+Ge+")")}}));function qe(Ge,Dt,yt){return(Ge<60?Dt+(yt-Dt)*Ge/60:Ge<180?yt:Ge<240?Dt+(yt-Dt)*(240-Ge)/60:Dt)*255}},9187:function(_t){"use strict";_t.exports=W,_t.exports.default=W;function W(Re,nt,qe){qe=qe||2;var Ge=nt&&nt.length,Dt=Ge?nt[0]*qe:Re.length,yt=D(Re,0,Dt,qe,!0),Le=[];if(!yt||yt.next===yt.prev)return Le;var Zt,yn,Tn,lr,or,Lt,en;if(Ge&&(yt=ce(Re,nt,yt,qe)),Re.length>80*qe){Zt=Tn=Re[0],yn=lr=Re[1];for(var hn=qe;hn<Dt;hn+=qe)or=Re[hn],Lt=Re[hn+1],or<Zt&&(Zt=or),Lt<yn&&(yn=Lt),or>Tn&&(Tn=or),Lt>lr&&(lr=Lt);en=Math.max(Tn-Zt,lr-yn),en=en!==0?32767/en:0}return G(yt,Le,qe,Zt,yn,en,0),Le}function D(Re,nt,qe,Ge,Dt){var yt,Le;if(Dt===mt(Re,nt,qe,Ge)>0)for(yt=nt;yt<qe;yt+=Ge)Le=ut(yt,Re[yt],Re[yt+1],Le);else for(yt=qe-Ge;yt>=nt;yt-=Ge)Le=ut(yt,Re[yt],Re[yt+1],Le);return Le&&tt(Le,Le.next)&&(tn(Le),Le=Le.next),Le}function q(Re,nt){if(!Re)return Re;nt||(nt=Re);var qe=Re,Ge;do if(Ge=!1,!qe.steiner&&(tt(qe,qe.next)||et(qe.prev,qe,qe.next)===0)){if(tn(qe),qe=nt=qe.prev,qe===qe.next)break;Ge=!0}else qe=qe.next;while(Ge||qe!==nt);return nt}function G(Re,nt,qe,Ge,Dt,yt,Le){if(Re){!Le&&yt&&me(Re,Ge,Dt,yt);for(var Zt=Re,yn,Tn;Re.prev!==Re.next;){if(yn=Re.prev,Tn=Re.next,yt?fe(Re,Ge,Dt,yt):E(Re)){nt.push(yn.i/qe|0),nt.push(Re.i/qe|0),nt.push(Tn.i/qe|0),tn(Re),Re=Tn.next,Zt=Tn.next;continue}if(Re=Tn,Re===Zt){Le?Le===1?(Re=$(q(Re),nt,qe),G(Re,nt,qe,Ge,Dt,yt,2)):Le===2&&se(Re,nt,qe,Ge,Dt,yt):G(q(Re),nt,qe,Ge,Dt,yt,1);break}}}}function E(Re){var nt=Re.prev,qe=Re,Ge=Re.next;if(et(nt,qe,Ge)>=0)return!1;for(var Dt=nt.x,yt=qe.x,Le=Ge.x,Zt=nt.y,yn=qe.y,Tn=Ge.y,lr=Dt<yt?Dt<Le?Dt:Le:yt<Le?yt:Le,or=Zt<yn?Zt<Tn?Zt:Tn:yn<Tn?yn:Tn,Lt=Dt>yt?Dt>Le?Dt:Le:yt>Le?yt:Le,en=Zt>yn?Zt>Tn?Zt:Tn:yn>Tn?yn:Tn,hn=Ge.next;hn!==nt;){if(hn.x>=lr&&hn.x<=Lt&&hn.y>=or&&hn.y<=en&&ee(Dt,Zt,yt,yn,Le,Tn,hn.x,hn.y)&&et(hn.prev,hn,hn.next)>=0)return!1;hn=hn.next}return!0}function fe(Re,nt,qe,Ge){var Dt=Re.prev,yt=Re,Le=Re.next;if(et(Dt,yt,Le)>=0)return!1;for(var Zt=Dt.x,yn=yt.x,Tn=Le.x,lr=Dt.y,or=yt.y,Lt=Le.y,en=Zt<yn?Zt<Tn?Zt:Tn:yn<Tn?yn:Tn,hn=lr<or?lr<Lt?lr:Lt:or<Lt?or:Lt,Xn=Zt>yn?Zt>Tn?Zt:Tn:yn>Tn?yn:Tn,an=lr>or?lr>Lt?lr:Lt:or>Lt?or:Lt,Pt=Q(en,hn,nt,qe,Ge),zt=Q(Xn,an,nt,qe,Ge),je=Re.prevZ,rt=Re.nextZ;je&&je.z>=Pt&&rt&&rt.z<=zt;){if(je.x>=en&&je.x<=Xn&&je.y>=hn&&je.y<=an&&je!==Dt&&je!==Le&&ee(Zt,lr,yn,or,Tn,Lt,je.x,je.y)&&et(je.prev,je,je.next)>=0||(je=je.prevZ,rt.x>=en&&rt.x<=Xn&&rt.y>=hn&&rt.y<=an&&rt!==Dt&&rt!==Le&&ee(Zt,lr,yn,or,Tn,Lt,rt.x,rt.y)&&et(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;je&&je.z>=Pt;){if(je.x>=en&&je.x<=Xn&&je.y>=hn&&je.y<=an&&je!==Dt&&je!==Le&&ee(Zt,lr,yn,or,Tn,Lt,je.x,je.y)&&et(je.prev,je,je.next)>=0)return!1;je=je.prevZ}for(;rt&&rt.z<=zt;){if(rt.x>=en&&rt.x<=Xn&&rt.y>=hn&&rt.y<=an&&rt!==Dt&&rt!==Le&&ee(Zt,lr,yn,or,Tn,Lt,rt.x,rt.y)&&et(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function $(Re,nt,qe){var Ge=Re;do{var Dt=Ge.prev,yt=Ge.next.next;!tt(Dt,yt)&&wt(Dt,Ge,Ge.next,yt)&&Ae(Dt,yt)&&Ae(yt,Dt)&&(nt.push(Dt.i/qe|0),nt.push(Ge.i/qe|0),nt.push(yt.i/qe|0),tn(Ge),tn(Ge.next),Ge=Re=yt),Ge=Ge.next}while(Ge!==Re);return q(Ge)}function se(Re,nt,qe,Ge,Dt,yt){var Le=Re;do{for(var Zt=Le.next.next;Zt!==Le.prev;){if(Le.i!==Zt.i&&be(Le,Zt)){var yn=Ze(Le,Zt);Le=q(Le,Le.next),yn=q(yn,yn.next),G(Le,nt,qe,Ge,Dt,yt,0),G(yn,nt,qe,Ge,Dt,yt,0);return}Zt=Zt.next}Le=Le.next}while(Le!==Re)}function ce(Re,nt,qe,Ge){var Dt=[],yt,Le,Zt,yn,Tn;for(yt=0,Le=nt.length;yt<Le;yt++)Zt=nt[yt]*Ge,yn=yt<Le-1?nt[yt+1]*Ge:Re.length,Tn=D(Re,Zt,yn,Ge,!1),Tn===Tn.next&&(Tn.steiner=!0),Dt.push(le(Tn));for(Dt.sort(ye),yt=0;yt<Dt.length;yt++)qe=ae(Dt[yt],qe);return qe}function ye(Re,nt){return Re.x-nt.x}function ae(Re,nt){var qe=He(Re,nt);if(!qe)return nt;var Ge=Ze(qe,Re);return q(Ge,Ge.next),q(qe,qe.next)}function He(Re,nt){var qe=nt,Ge=Re.x,Dt=Re.y,yt=-1/0,Le;do{if(Dt<=qe.y&&Dt>=qe.next.y&&qe.next.y!==qe.y){var Zt=qe.x+(Dt-qe.y)*(qe.next.x-qe.x)/(qe.next.y-qe.y);if(Zt<=Ge&&Zt>yt&&(yt=Zt,Le=qe.x<qe.next.x?qe:qe.next,Zt===Ge))return Le}qe=qe.next}while(qe!==nt);if(!Le)return null;var yn=Le,Tn=Le.x,lr=Le.y,or=1/0,Lt;qe=Le;do Ge>=qe.x&&qe.x>=Tn&&Ge!==qe.x&&ee(Dt<lr?Ge:yt,Dt,Tn,lr,Dt<lr?yt:Ge,Dt,qe.x,qe.y)&&(Lt=Math.abs(Dt-qe.y)/(Ge-qe.x),Ae(qe,Re)&&(Lt<or||Lt===or&&(qe.x>Le.x||qe.x===Le.x&&J(Le,qe)))&&(Le=qe,or=Lt)),qe=qe.next;while(qe!==yn);return Le}function J(Re,nt){return et(Re.prev,Re,nt.prev)<0&&et(nt.next,Re,Re.next)<0}function me(Re,nt,qe,Ge){var Dt=Re;do Dt.z===0&&(Dt.z=Q(Dt.x,Dt.y,nt,qe,Ge)),Dt.prevZ=Dt.prev,Dt.nextZ=Dt.next,Dt=Dt.next;while(Dt!==Re);Dt.prevZ.nextZ=null,Dt.prevZ=null,Oe(Dt)}function Oe(Re){var nt,qe,Ge,Dt,yt,Le,Zt,yn,Tn=1;do{for(qe=Re,Re=null,yt=null,Le=0;qe;){for(Le++,Ge=qe,Zt=0,nt=0;nt<Tn&&(Zt++,Ge=Ge.nextZ,!!Ge);nt++);for(yn=Tn;Zt>0||yn>0&&Ge;)Zt!==0&&(yn===0||!Ge||qe.z<=Ge.z)?(Dt=qe,qe=qe.nextZ,Zt--):(Dt=Ge,Ge=Ge.nextZ,yn--),yt?yt.nextZ=Dt:Re=Dt,Dt.prevZ=yt,yt=Dt;qe=Ge}yt.nextZ=null,Tn*=2}while(Le>1);return Re}function Q(Re,nt,qe,Ge,Dt){return Re=(Re-qe)*Dt|0,nt=(nt-Ge)*Dt|0,Re=(Re|Re<<8)&16711935,Re=(Re|Re<<4)&252645135,Re=(Re|Re<<2)&858993459,Re=(Re|Re<<1)&1431655765,nt=(nt|nt<<8)&16711935,nt=(nt|nt<<4)&252645135,nt=(nt|nt<<2)&858993459,nt=(nt|nt<<1)&1431655765,Re|nt<<1}function le(Re){var nt=Re,qe=Re;do(nt.x<qe.x||nt.x===qe.x&&nt.y<qe.y)&&(qe=nt),nt=nt.next;while(nt!==Re);return qe}function ee(Re,nt,qe,Ge,Dt,yt,Le,Zt){return(Dt-Le)*(nt-Zt)>=(Re-Le)*(yt-Zt)&&(Re-Le)*(Ge-Zt)>=(qe-Le)*(nt-Zt)&&(qe-Le)*(yt-Zt)>=(Dt-Le)*(Ge-Zt)}function be(Re,nt){return Re.next.i!==nt.i&&Re.prev.i!==nt.i&&!Pe(Re,nt)&&(Ae(Re,nt)&&Ae(nt,Re)&&Be(Re,nt)&&(et(Re.prev,Re,nt.prev)||et(Re,nt.prev,nt))||tt(Re,nt)&&et(Re.prev,Re,Re.next)>0&&et(nt.prev,nt,nt.next)>0)}function et(Re,nt,qe){return(nt.y-Re.y)*(qe.x-nt.x)-(nt.x-Re.x)*(qe.y-nt.y)}function tt(Re,nt){return Re.x===nt.x&&Re.y===nt.y}function wt(Re,nt,qe,Ge){var Dt=ft(et(Re,nt,qe)),yt=ft(et(Re,nt,Ge)),Le=ft(et(qe,Ge,Re)),Zt=ft(et(qe,Ge,nt));return!!(Dt!==yt&&Le!==Zt||Dt===0&&gt(Re,qe,nt)||yt===0&&gt(Re,Ge,nt)||Le===0&&gt(qe,Re,Ge)||Zt===0&&gt(qe,nt,Ge))}function gt(Re,nt,qe){return nt.x<=Math.max(Re.x,qe.x)&&nt.x>=Math.min(Re.x,qe.x)&&nt.y<=Math.max(Re.y,qe.y)&&nt.y>=Math.min(Re.y,qe.y)}function ft(Re){return Re>0?1:Re<0?-1:0}function Pe(Re,nt){var qe=Re;do{if(qe.i!==Re.i&&qe.next.i!==Re.i&&qe.i!==nt.i&&qe.next.i!==nt.i&&wt(qe,qe.next,Re,nt))return!0;qe=qe.next}while(qe!==Re);return!1}function Ae(Re,nt){return et(Re.prev,Re,Re.next)<0?et(Re,nt,Re.next)>=0&&et(Re,Re.prev,nt)>=0:et(Re,nt,Re.prev)<0||et(Re,Re.next,nt)<0}function Be(Re,nt){var qe=Re,Ge=!1,Dt=(Re.x+nt.x)/2,yt=(Re.y+nt.y)/2;do qe.y>yt!=qe.next.y>yt&&qe.next.y!==qe.y&&Dt<(qe.next.x-qe.x)*(yt-qe.y)/(qe.next.y-qe.y)+qe.x&&(Ge=!Ge),qe=qe.next;while(qe!==Re);return Ge}function Ze(Re,nt){var qe=new De(Re.i,Re.x,Re.y),Ge=new De(nt.i,nt.x,nt.y),Dt=Re.next,yt=nt.prev;return Re.next=nt,nt.prev=Re,qe.next=Dt,Dt.prev=qe,Ge.next=qe,qe.prev=Ge,yt.next=Ge,Ge.prev=yt,Ge}function ut(Re,nt,qe,Ge){var Dt=new De(Re,nt,qe);return Ge?(Dt.next=Ge.next,Dt.prev=Ge,Ge.next.prev=Dt,Ge.next=Dt):(Dt.prev=Dt,Dt.next=Dt),Dt}function tn(Re){Re.next.prev=Re.prev,Re.prev.next=Re.next,Re.prevZ&&(Re.prevZ.nextZ=Re.nextZ),Re.nextZ&&(Re.nextZ.prevZ=Re.prevZ)}function De(Re,nt,qe){this.i=Re,this.x=nt,this.y=qe,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}W.deviation=function(Re,nt,qe,Ge){var Dt=nt&&nt.length,yt=Dt?nt[0]*qe:Re.length,Le=Math.abs(mt(Re,0,yt,qe));if(Dt)for(var Zt=0,yn=nt.length;Zt<yn;Zt++){var Tn=nt[Zt]*qe,lr=Zt<yn-1?nt[Zt+1]*qe:Re.length;Le-=Math.abs(mt(Re,Tn,lr,qe))}var or=0;for(Zt=0;Zt<Ge.length;Zt+=3){var Lt=Ge[Zt]*qe,en=Ge[Zt+1]*qe,hn=Ge[Zt+2]*qe;or+=Math.abs((Re[Lt]-Re[hn])*(Re[en+1]-Re[Lt+1])-(Re[Lt]-Re[en])*(Re[hn+1]-Re[Lt+1]))}return Le===0&&or===0?0:Math.abs((or-Le)/Le)};function mt(Re,nt,qe,Ge){for(var Dt=0,yt=nt,Le=qe-Ge;yt<qe;yt+=Ge)Dt+=(Re[Le]-Re[yt])*(Re[yt+1]+Re[Le+1]),Le=yt;return Dt}W.flatten=function(Re){for(var nt=Re[0][0].length,qe={vertices:[],holes:[],dimensions:nt},Ge=0,Dt=0;Dt<Re.length;Dt++){for(var yt=0;yt<Re[Dt].length;yt++)for(var Le=0;Le<nt;Le++)qe.vertices.push(Re[Dt][yt][Le]);Dt>0&&(Ge+=Re[Dt-1].length,qe.holes.push(Ge))}return qe}},2268:function(_t){"use strict";var W=_t.exports={};W.isIE=function(D){function q(){var E=navigator.userAgent.toLowerCase();return E.indexOf("msie")!==-1||E.indexOf("trident")!==-1||E.indexOf(" edge/")!==-1}if(!q())return!1;if(!D)return!0;var G=function(){var E,fe=3,$=document.createElement("div"),se=$.getElementsByTagName("i");do $.innerHTML="<!--[if gt IE "+ ++fe+"]><i></i><![endif]-->";while(se[0]);return fe>4?fe:E}();return D===G},W.isLegacyOpera=function(){return!!window.opera}},17900:function(_t){"use strict";var W=_t.exports={};W.forEach=function(D,q){for(var G=0;G<D.length;G++){var E=q(D[G]);if(E)return E}}},58229:function(_t,W,D){"use strict";var q=D(2268);_t.exports=function(G){G=G||{};var E=G.reporter,fe=G.batchProcessor,$=G.stateHandler.getState;if(!E)throw new Error("Missing required dependency: reporter.");function se(J,me){function Oe(){me(J)}if(q.isIE(8))$(J).object={proxy:Oe},J.attachEvent("onresize",Oe);else{var Q=ae(J);if(!Q)throw new Error("Element is not detectable by this strategy.");Q.contentDocument.defaultView.addEventListener("resize",Oe)}}function ce(J){var me=G.important?" !important; ":"; ";return(J.join(me)+me).trim()}function ye(J,me,Oe){Oe||(Oe=me,me=J,J=null),J=J||{};var Q=J.debug;function le(ee,be){var et=ce(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),tt=!1,wt=window.getComputedStyle(ee),gt=ee.offsetWidth,ft=ee.offsetHeight;$(ee).startSize={width:gt,height:ft};function Pe(){function Ae(){if(wt.position==="static"){ee.style.setProperty("position","relative",J.important?"important":"");var ut=function(tn,De,mt,Re){function nt(Ge){return Ge.replace(/[^-\d\.]/g,"")}var qe=mt[Re];qe!=="auto"&&nt(qe)!=="0"&&(tn.warn("An element that is positioned static has style."+Re+"="+qe+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Re+" will be set to 0. Element: ",De),De.style.setProperty(Re,"0",J.important?"important":""))};ut(E,ee,wt,"top"),ut(E,ee,wt,"right"),ut(E,ee,wt,"bottom"),ut(E,ee,wt,"left")}}function Be(){tt||Ae();function ut(De,mt){if(!De.contentDocument){var Re=$(De);Re.checkForObjectDocumentTimeoutId&&window.clearTimeout(Re.checkForObjectDocumentTimeoutId),Re.checkForObjectDocumentTimeoutId=setTimeout(function(){Re.checkForObjectDocumentTimeoutId=0,ut(De,mt)},100);return}mt(De.contentDocument)}var tn=this;ut(tn,function(mt){be(ee)})}wt.position!==""&&(Ae(wt),tt=!0);var Ze=document.createElement("object");Ze.style.cssText=et,Ze.tabIndex=-1,Ze.type="text/html",Ze.setAttribute("aria-hidden","true"),Ze.onload=Be,q.isIE()||(Ze.data="about:blank"),$(ee)&&(ee.appendChild(Ze),$(ee).object=Ze,q.isIE()&&(Ze.data="about:blank"))}fe?fe.add(Pe):Pe()}q.isIE(8)?Oe(me):le(me,Oe)}function ae(J){return $(J).object}function He(J){if($(J)){var me=ae(J);me&&(q.isIE(8)?J.detachEvent("onresize",me.proxy):J.removeChild(me),$(J).checkForObjectDocumentTimeoutId&&window.clearTimeout($(J).checkForObjectDocumentTimeoutId),delete $(J).object)}}return{makeDetectable:ye,addListener:se,uninstall:He}}},60787:function(_t,W,D){"use strict";var q=D(17900).forEach;_t.exports=function(G){G=G||{};var E=G.reporter,fe=G.batchProcessor,$=G.stateHandler.getState,se=G.stateHandler.hasState,ce=G.idHandler;if(!fe)throw new Error("Missing required dependency: batchProcessor");if(!E)throw new Error("Missing required dependency: reporter.");var ye=Oe(),ae="erd_scroll_detection_scrollbar_style",He="erd_scroll_detection_container";function J(Pe){Q(Pe,ae,He)}J(window.document);function me(Pe){var Ae=G.important?" !important; ":"; ";return(Pe.join(Ae)+Ae).trim()}function Oe(){var Pe=500,Ae=500,Be=document.createElement("div");Be.style.cssText=me(["position: absolute","width: "+Pe*2+"px","height: "+Ae*2+"px","visibility: hidden","margin: 0","padding: 0"]);var Ze=document.createElement("div");Ze.style.cssText=me(["position: absolute","width: "+Pe+"px","height: "+Ae+"px","overflow: scroll","visibility: none","top: "+-Pe*3+"px","left: "+-Ae*3+"px","visibility: hidden","margin: 0","padding: 0"]),Ze.appendChild(Be),document.body.insertBefore(Ze,document.body.firstChild);var ut=Pe-Ze.clientWidth,tn=Ae-Ze.clientHeight;return document.body.removeChild(Ze),{width:ut,height:tn}}function Q(Pe,Ae,Be){function Ze(mt,Re){Re=Re||function(qe){Pe.head.appendChild(qe)};var nt=Pe.createElement("style");return nt.innerHTML=mt,nt.id=Ae,Re(nt),nt}if(!Pe.getElementById(Ae)){var ut=Be+"_animation",tn=Be+"_animation_active",De=`/* Created by the element-resize-detector library. */
`;De+="."+Be+" > div::-webkit-scrollbar { "+me(["display: none"])+` }

`,De+="."+tn+" { "+me(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+ut,"animation-name: "+ut])+` }
`,De+="@-webkit-keyframes "+ut+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,De+="@keyframes "+ut+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",Ze(De)}}function le(Pe){Pe.className+=" "+He+"_animation_active"}function ee(Pe,Ae,Be){if(Pe.addEventListener)Pe.addEventListener(Ae,Be);else if(Pe.attachEvent)Pe.attachEvent("on"+Ae,Be);else return E.error("[scroll] Don't know how to add event listeners.")}function be(Pe,Ae,Be){if(Pe.removeEventListener)Pe.removeEventListener(Ae,Be);else if(Pe.detachEvent)Pe.detachEvent("on"+Ae,Be);else return E.error("[scroll] Don't know how to remove event listeners.")}function et(Pe){return $(Pe).container.childNodes[0].childNodes[0].childNodes[0]}function tt(Pe){return $(Pe).container.childNodes[0].childNodes[0].childNodes[1]}function wt(Pe,Ae){var Be=$(Pe).listeners;if(!Be.push)throw new Error("Cannot add listener to an element that is not detectable.");$(Pe).listeners.push(Ae)}function gt(Pe,Ae,Be){Be||(Be=Ae,Ae=Pe,Pe=null),Pe=Pe||{};function Ze(){if(Pe.debug){var Pt=Array.prototype.slice.call(arguments);if(Pt.unshift(ce.get(Ae),"Scroll: "),E.log.apply)E.log.apply(null,Pt);else for(var zt=0;zt<Pt.length;zt++)E.log(Pt[zt])}}function ut(Pt){function zt(je){var rt=je.getRootNode&&je.getRootNode().contains(je);return je===je.ownerDocument.body||je.ownerDocument.body.contains(je)||rt}return!zt(Pt)||window.getComputedStyle(Pt)===null}function tn(Pt){var zt=$(Pt).container.childNodes[0],je=window.getComputedStyle(zt);return!je.width||je.width.indexOf("px")===-1}function De(){var Pt=window.getComputedStyle(Ae),zt={};return zt.position=Pt.position,zt.width=Ae.offsetWidth,zt.height=Ae.offsetHeight,zt.top=Pt.top,zt.right=Pt.right,zt.bottom=Pt.bottom,zt.left=Pt.left,zt.widthCSS=Pt.width,zt.heightCSS=Pt.height,zt}function mt(){var Pt=De();$(Ae).startSize={width:Pt.width,height:Pt.height},Ze("Element start size",$(Ae).startSize)}function Re(){$(Ae).listeners=[]}function nt(){if(Ze("storeStyle invoked."),!$(Ae)){Ze("Aborting because element has been uninstalled");return}var Pt=De();$(Ae).style=Pt}function qe(Pt,zt,je){$(Pt).lastWidth=zt,$(Pt).lastHeight=je}function Ge(Pt){return et(Pt).childNodes[0]}function Dt(){return 2*ye.width+1}function yt(){return 2*ye.height+1}function Le(Pt){return Pt+10+Dt()}function Zt(Pt){return Pt+10+yt()}function yn(Pt){return Pt*2+Dt()}function Tn(Pt){return Pt*2+yt()}function lr(Pt,zt,je){var rt=et(Pt),Ut=tt(Pt),U=Le(zt),he=Zt(je),ot=yn(zt),de=Tn(je);rt.scrollLeft=U,rt.scrollTop=he,Ut.scrollLeft=ot,Ut.scrollTop=de}function or(){var Pt=$(Ae).container;if(!Pt){Pt=document.createElement("div"),Pt.className=He,Pt.style.cssText=me(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),$(Ae).container=Pt,le(Pt),Ae.appendChild(Pt);var zt=function(){$(Ae).onRendered&&$(Ae).onRendered()};ee(Pt,"animationstart",zt),$(Ae).onAnimationStart=zt}return Pt}function Lt(){function Pt(){var In=$(Ae).style;if(In.position==="static"){Ae.style.setProperty("position","relative",Pe.important?"important":"");var $n=function(pt,xe,Fe,st){function It(wn){return wn.replace(/[^-\d\.]/g,"")}var Mt=Fe[st];Mt!=="auto"&&It(Mt)!=="0"&&(pt.warn("An element that is positioned static has style."+st+"="+Mt+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+st+" will be set to 0. Element: ",xe),xe.style[st]=0)};$n(E,Ae,In,"top"),$n(E,Ae,In,"right"),$n(E,Ae,In,"bottom"),$n(E,Ae,In,"left")}}function zt(In,$n,pt,xe){return In=In?In+"px":"0",$n=$n?$n+"px":"0",pt=pt?pt+"px":"0",xe=xe?xe+"px":"0",["left: "+In,"top: "+$n,"right: "+xe,"bottom: "+pt]}if(Ze("Injecting elements"),!$(Ae)){Ze("Aborting because element has been uninstalled");return}Pt();var je=$(Ae).container;je||(je=or());var rt=ye.width,Ut=ye.height,U=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),he=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(zt(-(1+rt),-(1+Ut),-Ut,-rt))),ot=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),de=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),qt=me(["position: absolute","left: 0","top: 0"]),ln=me(["position: absolute","width: 200%","height: 200%"]),mn=document.createElement("div"),Dn=document.createElement("div"),Yn=document.createElement("div"),Kn=document.createElement("div"),pn=document.createElement("div"),vt=document.createElement("div");mn.dir="ltr",mn.style.cssText=U,mn.className=He,Dn.className=He,Dn.style.cssText=he,Yn.style.cssText=ot,Kn.style.cssText=qt,pn.style.cssText=de,vt.style.cssText=ln,Yn.appendChild(Kn),pn.appendChild(vt),Dn.appendChild(Yn),Dn.appendChild(pn),mn.appendChild(Dn),je.appendChild(mn);function Nt(){var In=$(Ae);In&&In.onExpand?In.onExpand():Ze("Aborting expand scroll handler: element has been uninstalled")}function An(){var In=$(Ae);In&&In.onShrink?In.onShrink():Ze("Aborting shrink scroll handler: element has been uninstalled")}ee(Yn,"scroll",Nt),ee(pn,"scroll",An),$(Ae).onExpandScroll=Nt,$(Ae).onShrinkScroll=An}function en(){function Pt(ot,de,qt){var ln=Ge(ot),mn=Le(de),Dn=Zt(qt);ln.style.setProperty("width",mn+"px",Pe.important?"important":""),ln.style.setProperty("height",Dn+"px",Pe.important?"important":"")}function zt(ot){var de=Ae.offsetWidth,qt=Ae.offsetHeight,ln=de!==$(Ae).lastWidth||qt!==$(Ae).lastHeight;Ze("Storing current size",de,qt),qe(Ae,de,qt),fe.add(0,function(){if(ln){if(!$(Ae)){Ze("Aborting because element has been uninstalled");return}if(!je()){Ze("Aborting because element container has not been initialized");return}if(Pe.debug){var Dn=Ae.offsetWidth,Yn=Ae.offsetHeight;(Dn!==de||Yn!==qt)&&E.warn(ce.get(Ae),"Scroll: Size changed before updating detector elements.")}Pt(Ae,de,qt)}}),fe.add(1,function(){if(!$(Ae)){Ze("Aborting because element has been uninstalled");return}if(!je()){Ze("Aborting because element container has not been initialized");return}lr(Ae,de,qt)}),ln&&ot&&fe.add(2,function(){if(!$(Ae)){Ze("Aborting because element has been uninstalled");return}if(!je()){Ze("Aborting because element container has not been initialized");return}ot()})}function je(){return!!$(Ae).container}function rt(){function ot(){return $(Ae).lastNotifiedWidth===void 0}Ze("notifyListenersIfNeeded invoked");var de=$(Ae);if(ot()&&de.lastWidth===de.startSize.width&&de.lastHeight===de.startSize.height)return Ze("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(de.lastWidth===de.lastNotifiedWidth&&de.lastHeight===de.lastNotifiedHeight)return Ze("Not notifying: Size already notified");Ze("Current size not notified, notifying..."),de.lastNotifiedWidth=de.lastWidth,de.lastNotifiedHeight=de.lastHeight,q($(Ae).listeners,function(qt){qt(Ae)})}function Ut(){if(Ze("startanimation triggered."),tn(Ae)){Ze("Ignoring since element is still unrendered...");return}Ze("Element rendered.");var ot=et(Ae),de=tt(Ae);(ot.scrollLeft===0||ot.scrollTop===0||de.scrollLeft===0||de.scrollTop===0)&&(Ze("Scrollbars out of sync. Updating detector elements..."),zt(rt))}function U(){if(Ze("Scroll detected."),tn(Ae)){Ze("Scroll event fired while unrendered. Ignoring...");return}zt(rt)}if(Ze("registerListenersAndPositionElements invoked."),!$(Ae)){Ze("Aborting because element has been uninstalled");return}$(Ae).onRendered=Ut,$(Ae).onExpand=U,$(Ae).onShrink=U;var he=$(Ae).style;Pt(Ae,he.width,he.height)}function hn(){if(Ze("finalizeDomMutation invoked."),!$(Ae)){Ze("Aborting because element has been uninstalled");return}var Pt=$(Ae).style;qe(Ae,Pt.width,Pt.height),lr(Ae,Pt.width,Pt.height)}function Xn(){Be(Ae)}function an(){Ze("Installing..."),Re(),mt(),fe.add(0,nt),fe.add(1,Lt),fe.add(2,en),fe.add(3,hn),fe.add(4,Xn)}Ze("Making detectable..."),ut(Ae)?(Ze("Element is detached"),or(),Ze("Waiting until element is attached..."),$(Ae).onRendered=function(){Ze("Element is now attached"),an()}):an()}function ft(Pe){var Ae=$(Pe);Ae&&(Ae.onExpandScroll&&be(et(Pe),"scroll",Ae.onExpandScroll),Ae.onShrinkScroll&&be(tt(Pe),"scroll",Ae.onShrinkScroll),Ae.onAnimationStart&&be(Ae.container,"animationstart",Ae.onAnimationStart),Ae.container&&Pe.removeChild(Ae.container))}return{makeDetectable:gt,addListener:wt,uninstall:ft,initDocument:J}}},63844:function(_t,W,D){"use strict";var q=D(17900).forEach,G=D(68452),E=D(96199),fe=D(75805),$=D(79799),se=D(71724),ce=D(2268),ye=D(98129),ae=D(21931),He=D(58229),J=D(60787);function me(ee){return Array.isArray(ee)||ee.length!==void 0}function Oe(ee){if(Array.isArray(ee))return ee;var be=[];return q(ee,function(et){be.push(et)}),be}function Q(ee){return ee&&ee.nodeType===1}_t.exports=function(ee){ee=ee||{};var be;if(ee.idHandler)be={get:function(Ge){return ee.idHandler.get(Ge,!0)},set:ee.idHandler.set};else{var et=fe(),tt=$({idGenerator:et,stateHandler:ae});be=tt}var wt=ee.reporter;if(!wt){var gt=wt===!1;wt=se(gt)}var ft=le(ee,"batchProcessor",ye({reporter:wt})),Pe={};Pe.callOnAdd=!!le(ee,"callOnAdd",!0),Pe.debug=!!le(ee,"debug",!1);var Ae=E(be),Be=G({stateHandler:ae}),Ze,ut=le(ee,"strategy","object"),tn=le(ee,"important",!1),De={reporter:wt,batchProcessor:ft,stateHandler:ae,idHandler:be,important:tn};if(ut==="scroll"&&(ce.isLegacyOpera()?(wt.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),ut="object"):ce.isIE(9)&&(wt.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),ut="object")),ut==="scroll")Ze=J(De);else if(ut==="object")Ze=He(De);else throw new Error("Invalid strategy name: "+ut);var mt={};function Re(Ge,Dt,yt){function Le(Lt){var en=Ae.get(Lt);q(en,function(Xn){Xn(Lt)})}function Zt(Lt,en,hn){Ae.add(en,hn),Lt&&hn(en)}if(yt||(yt=Dt,Dt=Ge,Ge={}),!Dt)throw new Error("At least one element required.");if(!yt)throw new Error("Listener required.");if(Q(Dt))Dt=[Dt];else if(me(Dt))Dt=Oe(Dt);else return wt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var yn=0,Tn=le(Ge,"callOnAdd",Pe.callOnAdd),lr=le(Ge,"onReady",function(){}),or=le(Ge,"debug",Pe.debug);q(Dt,function(en){ae.getState(en)||(ae.initState(en),be.set(en));var hn=be.get(en);if(or&&wt.log("Attaching listener to element",hn,en),!Be.isDetectable(en)){if(or&&wt.log(hn,"Not detectable."),Be.isBusy(en)){or&&wt.log(hn,"System busy making it detectable"),Zt(Tn,en,yt),mt[hn]=mt[hn]||[],mt[hn].push(function(){yn++,yn===Dt.length&&lr()});return}return or&&wt.log(hn,"Making detectable..."),Be.markBusy(en,!0),Ze.makeDetectable({debug:or,important:tn},en,function(an){if(or&&wt.log(hn,"onElementDetectable"),ae.getState(an)){Be.markAsDetectable(an),Be.markBusy(an,!1),Ze.addListener(an,Le),Zt(Tn,an,yt);var Pt=ae.getState(an);if(Pt&&Pt.startSize){var zt=an.offsetWidth,je=an.offsetHeight;(Pt.startSize.width!==zt||Pt.startSize.height!==je)&&Le(an)}mt[hn]&&q(mt[hn],function(rt){rt()})}else or&&wt.log(hn,"Element uninstalled before being detectable.");delete mt[hn],yn++,yn===Dt.length&&lr()})}or&&wt.log(hn,"Already detecable, adding listener."),Zt(Tn,en,yt),yn++}),yn===Dt.length&&lr()}function nt(Ge){if(!Ge)return wt.error("At least one element is required.");if(Q(Ge))Ge=[Ge];else if(me(Ge))Ge=Oe(Ge);else return wt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");q(Ge,function(Dt){Ae.removeAllListeners(Dt),Ze.uninstall(Dt),ae.cleanState(Dt)})}function qe(Ge){Ze.initDocument&&Ze.initDocument(Ge)}return{listenTo:Re,removeListener:Ae.removeListener,removeAllListeners:Ae.removeAllListeners,uninstall:nt,initDocument:qe}};function le(ee,be,et){var tt=ee[be];return tt==null&&et!==void 0?et:tt}},68452:function(_t){"use strict";_t.exports=function(W){var D=W.stateHandler.getState;function q($){var se=D($);return se&&!!se.isDetectable}function G($){D($).isDetectable=!0}function E($){return!!D($).busy}function fe($,se){D($).busy=!!se}return{isDetectable:q,markAsDetectable:G,isBusy:E,markBusy:fe}}},75805:function(_t){"use strict";_t.exports=function(){var W=1;function D(){return W++}return{generate:D}}},79799:function(_t){"use strict";_t.exports=function(W){var D=W.idGenerator,q=W.stateHandler.getState;function G(fe){var $=q(fe);return $&&$.id!==void 0?$.id:null}function E(fe){var $=q(fe);if(!$)throw new Error("setId required the element to have a resize detection state.");var se=D.generate();return $.id=se,se}return{get:G,set:E}}},96199:function(_t){"use strict";_t.exports=function(W){var D={};function q($){var se=W.get($);return se===void 0?[]:D[se]||[]}function G($,se){var ce=W.get($);D[ce]||(D[ce]=[]),D[ce].push(se)}function E($,se){for(var ce=q($),ye=0,ae=ce.length;ye<ae;++ye)if(ce[ye]===se){ce.splice(ye,1);break}}function fe($){var se=q($);se&&(se.length=0)}return{get:q,add:G,removeListener:E,removeAllListeners:fe}}},71724:function(_t){"use strict";_t.exports=function(W){function D(){}var q={log:D,warn:D,error:D};if(!W&&window.console){var G=function(E,fe){E[fe]=function(){var se=console[fe];if(se.apply)se.apply(console,arguments);else for(var ce=0;ce<arguments.length;ce++)se(arguments[ce])}};G(q,"log"),G(q,"warn"),G(q,"error")}return q}},21931:function(_t){"use strict";var W="_erd";function D(E){return E[W]={},q(E)}function q(E){return E[W]}function G(E){delete E[W]}_t.exports={initState:D,getState:q,cleanState:G}},26729:function(_t){"use strict";var W=Object.prototype.hasOwnProperty,D="~";function q(){}Object.create&&(q.prototype=Object.create(null),new q().__proto__||(D=!1));function G(se,ce,ye){this.fn=se,this.context=ce,this.once=ye||!1}function E(se,ce,ye,ae,He){if(typeof ye!="function")throw new TypeError("The listener must be a function");var J=new G(ye,ae||se,He),me=D?D+ce:ce;return se._events[me]?se._events[me].fn?se._events[me]=[se._events[me],J]:se._events[me].push(J):(se._events[me]=J,se._eventsCount++),se}function fe(se,ce){--se._eventsCount===0?se._events=new q:delete se._events[ce]}function $(){this._events=new q,this._eventsCount=0}$.prototype.eventNames=function(){var ce=[],ye,ae;if(this._eventsCount===0)return ce;for(ae in ye=this._events)W.call(ye,ae)&&ce.push(D?ae.slice(1):ae);return Object.getOwnPropertySymbols?ce.concat(Object.getOwnPropertySymbols(ye)):ce},$.prototype.listeners=function(ce){var ye=D?D+ce:ce,ae=this._events[ye];if(!ae)return[];if(ae.fn)return[ae.fn];for(var He=0,J=ae.length,me=new Array(J);He<J;He++)me[He]=ae[He].fn;return me},$.prototype.listenerCount=function(ce){var ye=D?D+ce:ce,ae=this._events[ye];return ae?ae.fn?1:ae.length:0},$.prototype.emit=function(ce,ye,ae,He,J,me){var Oe=D?D+ce:ce;if(!this._events[Oe])return!1;var Q=this._events[Oe],le=arguments.length,ee,be;if(Q.fn){switch(Q.once&&this.removeListener(ce,Q.fn,void 0,!0),le){case 1:return Q.fn.call(Q.context),!0;case 2:return Q.fn.call(Q.context,ye),!0;case 3:return Q.fn.call(Q.context,ye,ae),!0;case 4:return Q.fn.call(Q.context,ye,ae,He),!0;case 5:return Q.fn.call(Q.context,ye,ae,He,J),!0;case 6:return Q.fn.call(Q.context,ye,ae,He,J,me),!0}for(be=1,ee=new Array(le-1);be<le;be++)ee[be-1]=arguments[be];Q.fn.apply(Q.context,ee)}else{var et=Q.length,tt;for(be=0;be<et;be++)switch(Q[be].once&&this.removeListener(ce,Q[be].fn,void 0,!0),le){case 1:Q[be].fn.call(Q[be].context);break;case 2:Q[be].fn.call(Q[be].context,ye);break;case 3:Q[be].fn.call(Q[be].context,ye,ae);break;case 4:Q[be].fn.call(Q[be].context,ye,ae,He);break;default:if(!ee)for(tt=1,ee=new Array(le-1);tt<le;tt++)ee[tt-1]=arguments[tt];Q[be].fn.apply(Q[be].context,ee)}}return!0},$.prototype.on=function(ce,ye,ae){return E(this,ce,ye,ae,!1)},$.prototype.once=function(ce,ye,ae){return E(this,ce,ye,ae,!0)},$.prototype.removeListener=function(ce,ye,ae,He){var J=D?D+ce:ce;if(!this._events[J])return this;if(!ye)return fe(this,J),this;var me=this._events[J];if(me.fn)me.fn===ye&&(!He||me.once)&&(!ae||me.context===ae)&&fe(this,J);else{for(var Oe=0,Q=[],le=me.length;Oe<le;Oe++)(me[Oe].fn!==ye||He&&!me[Oe].once||ae&&me[Oe].context!==ae)&&Q.push(me[Oe]);Q.length?this._events[J]=Q.length===1?Q[0]:Q:fe(this,J)}return this},$.prototype.removeAllListeners=function(ce){var ye;return ce?(ye=D?D+ce:ce,this._events[ye]&&fe(this,ye)):(this._events=new q,this._eventsCount=0),this},$.prototype.off=$.prototype.removeListener,$.prototype.addListener=$.prototype.on,$.prefixed=D,$.EventEmitter=$,_t.exports=$},69916:function(_t,W){(function(D,q){q(W)})(this,function(D){"use strict";function q(Oe,Q,le,ee){ee=ee||{};var be=ee.maxIterations||100,et=ee.tolerance||1e-10,tt=Oe(Q),wt=Oe(le),gt=le-Q;if(tt*wt>0)throw"Initial bisect points must have opposite signs";if(tt===0)return Q;if(wt===0)return le;for(var ft=0;ft<be;++ft){gt/=2;var Pe=Q+gt,Ae=Oe(Pe);if(Ae*tt>=0&&(Q=Pe),Math.abs(gt)<et||Ae===0)return Pe}return Q+gt}function G(Oe){for(var Q=new Array(Oe),le=0;le<Oe;++le)Q[le]=0;return Q}function E(Oe,Q){return G(Oe).map(function(){return G(Q)})}function fe(Oe,Q){for(var le=0,ee=0;ee<Oe.length;++ee)le+=Oe[ee]*Q[ee];return le}function $(Oe){return Math.sqrt(fe(Oe,Oe))}function se(Oe,Q,le){for(var ee=0;ee<Q.length;++ee)Oe[ee]=Q[ee]*le}function ce(Oe,Q,le,ee,be){for(var et=0;et<Oe.length;++et)Oe[et]=Q*le[et]+ee*be[et]}function ye(Oe,Q,le){le=le||{};var ee=le.maxIterations||Q.length*200,be=le.nonZeroDelta||1.05,et=le.zeroDelta||.001,tt=le.minErrorDelta||1e-6,wt=le.minErrorDelta||1e-5,gt=le.rho!==void 0?le.rho:1,ft=le.chi!==void 0?le.chi:2,Pe=le.psi!==void 0?le.psi:-.5,Ae=le.sigma!==void 0?le.sigma:.5,Be,Ze=Q.length,ut=new Array(Ze+1);ut[0]=Q,ut[0].fx=Oe(Q),ut[0].id=0;for(var tn=0;tn<Ze;++tn){var De=Q.slice();De[tn]=De[tn]?De[tn]*be:et,ut[tn+1]=De,ut[tn+1].fx=Oe(De),ut[tn+1].id=tn+1}function mt(lr){for(var or=0;or<lr.length;or++)ut[Ze][or]=lr[or];ut[Ze].fx=lr.fx}for(var Re=function(lr,or){return lr.fx-or.fx},nt=Q.slice(),qe=Q.slice(),Ge=Q.slice(),Dt=Q.slice(),yt=0;yt<ee;++yt){if(ut.sort(Re),le.history){var Le=ut.map(function(lr){var or=lr.slice();return or.fx=lr.fx,or.id=lr.id,or});Le.sort(function(lr,or){return lr.id-or.id}),le.history.push({x:ut[0].slice(),fx:ut[0].fx,simplex:Le})}for(Be=0,tn=0;tn<Ze;++tn)Be=Math.max(Be,Math.abs(ut[0][tn]-ut[1][tn]));if(Math.abs(ut[0].fx-ut[Ze].fx)<tt&&Be<wt)break;for(tn=0;tn<Ze;++tn){nt[tn]=0;for(var Zt=0;Zt<Ze;++Zt)nt[tn]+=ut[Zt][tn];nt[tn]/=Ze}var yn=ut[Ze];if(ce(qe,1+gt,nt,-gt,yn),qe.fx=Oe(qe),qe.fx<ut[0].fx)ce(Dt,1+ft,nt,-ft,yn),Dt.fx=Oe(Dt),Dt.fx<qe.fx?mt(Dt):mt(qe);else if(qe.fx>=ut[Ze-1].fx){var Tn=!1;if(qe.fx>yn.fx?(ce(Ge,1+Pe,nt,-Pe,yn),Ge.fx=Oe(Ge),Ge.fx<yn.fx?mt(Ge):Tn=!0):(ce(Ge,1-Pe*gt,nt,Pe*gt,yn),Ge.fx=Oe(Ge),Ge.fx<qe.fx?mt(Ge):Tn=!0),Tn){if(Ae>=1)break;for(tn=1;tn<ut.length;++tn)ce(ut[tn],1-Ae,ut[0],Ae,ut[tn]),ut[tn].fx=Oe(ut[tn])}}else mt(qe)}return ut.sort(Re),{fx:ut[0].fx,x:ut[0]}}function ae(Oe,Q,le,ee,be,et,tt){var wt=le.fx,gt=fe(le.fxprime,Q),ft=wt,Pe=wt,Ae=gt,Be=0;be=be||1,et=et||1e-6,tt=tt||.1;function Ze(tn,De,mt){for(var Re=0;Re<16;++Re)if(be=(tn+De)/2,ce(ee.x,1,le.x,be,Q),ft=ee.fx=Oe(ee.x,ee.fxprime),Ae=fe(ee.fxprime,Q),ft>wt+et*be*gt||ft>=mt)De=be;else{if(Math.abs(Ae)<=-tt*gt)return be;Ae*(De-tn)>=0&&(De=tn),tn=be,mt=ft}return 0}for(var ut=0;ut<10;++ut){if(ce(ee.x,1,le.x,be,Q),ft=ee.fx=Oe(ee.x,ee.fxprime),Ae=fe(ee.fxprime,Q),ft>wt+et*be*gt||ut&&ft>=Pe)return Ze(Be,be,Pe);if(Math.abs(Ae)<=-tt*gt)return be;if(Ae>=0)return Ze(be,Be,ft);Pe=ft,Be=be,be*=2}return be}function He(Oe,Q,le){var ee={x:Q.slice(),fx:0,fxprime:Q.slice()},be={x:Q.slice(),fx:0,fxprime:Q.slice()},et=Q.slice(),tt,wt,gt=1,ft;le=le||{},ft=le.maxIterations||Q.length*20,ee.fx=Oe(ee.x,ee.fxprime),tt=ee.fxprime.slice(),se(tt,ee.fxprime,-1);for(var Pe=0;Pe<ft;++Pe){if(gt=ae(Oe,tt,ee,be,gt),le.history&&le.history.push({x:ee.x.slice(),fx:ee.fx,fxprime:ee.fxprime.slice(),alpha:gt}),!gt)se(tt,ee.fxprime,-1);else{ce(et,1,be.fxprime,-1,ee.fxprime);var Ae=fe(ee.fxprime,ee.fxprime),Be=Math.max(0,fe(et,be.fxprime)/Ae);ce(tt,Be,tt,-1,be.fxprime),wt=ee,ee=be,be=wt}if($(ee.fxprime)<=1e-5)break}return le.history&&le.history.push({x:ee.x.slice(),fx:ee.fx,fxprime:ee.fxprime.slice(),alpha:gt}),ee}function J(Oe,Q,le){le=le||{};for(var ee=le.maxIterations||Q.length*100,be=le.learnRate||.001,et={x:Q.slice(),fx:0,fxprime:Q.slice()},tt=0;tt<ee&&(et.fx=Oe(et.x,et.fxprime),le.history&&le.history.push({x:et.x.slice(),fx:et.fx,fxprime:et.fxprime.slice()}),ce(et.x,1,et.x,-be,et.fxprime),!($(et.fxprime)<=1e-5));++tt);return et}function me(Oe,Q,le){le=le||{};var ee={x:Q.slice(),fx:0,fxprime:Q.slice()},be={x:Q.slice(),fx:0,fxprime:Q.slice()},et=le.maxIterations||Q.length*100,tt=le.learnRate||1,wt=Q.slice(),gt=le.c1||.001,ft=le.c2||.1,Pe,Ae=[];if(le.history){var Be=Oe;Oe=function(ut,tn){return Ae.push(ut.slice()),Be(ut,tn)}}ee.fx=Oe(ee.x,ee.fxprime);for(var Ze=0;Ze<et&&(se(wt,ee.fxprime,-1),tt=ae(Oe,wt,ee,be,tt,gt,ft),le.history&&(le.history.push({x:ee.x.slice(),fx:ee.fx,fxprime:ee.fxprime.slice(),functionCalls:Ae,learnRate:tt,alpha:tt}),Ae=[]),Pe=ee,ee=be,be=Pe,!(tt===0||$(ee.fxprime)<1e-5));++Ze);return ee}D.bisect=q,D.nelderMead=ye,D.conjugateGradient=He,D.gradientDescent=J,D.gradientDescentLineSearch=me,D.zeros=G,D.zerosM=E,D.norm2=$,D.weightedSum=ce,D.scale=se})},49685:function(_t,W,D){"use strict";D.d(W,{Ib:function(){return q},WT:function(){return G}});var q=1e-6,G=typeof Float32Array!="undefined"?Float32Array:Array,E=Math.random;function fe(ye){G=ye}var $=Math.PI/180;function se(ye){return ye*$}function ce(ye,ae){return Math.abs(ye-ae)<=q*Math.max(1,Math.abs(ye),Math.abs(ae))}Math.hypot||(Math.hypot=function(){for(var ye=0,ae=arguments.length;ae--;)ye+=arguments[ae]*arguments[ae];return Math.sqrt(ye)})},85975:function(_t,W,D){"use strict";D.r(W),D.d(W,{add:function(){return hn},adjoint:function(){return He},clone:function(){return E},copy:function(){return fe},create:function(){return G},determinant:function(){return J},equals:function(){return je},exactEquals:function(){return zt},frob:function(){return en},fromQuat:function(){return nt},fromQuat2:function(){return Ze},fromRotation:function(){return gt},fromRotationTranslation:function(){return Be},fromRotationTranslationScale:function(){return mt},fromRotationTranslationScaleOrigin:function(){return Re},fromScaling:function(){return wt},fromTranslation:function(){return tt},fromValues:function(){return $},fromXRotation:function(){return ft},fromYRotation:function(){return Pe},fromZRotation:function(){return Ae},frustum:function(){return qe},getRotation:function(){return De},getScaling:function(){return tn},getTranslation:function(){return ut},identity:function(){return ce},invert:function(){return ae},lookAt:function(){return lr},mul:function(){return rt},multiply:function(){return me},multiplyScalar:function(){return an},multiplyScalarAndAdd:function(){return Pt},ortho:function(){return yn},orthoNO:function(){return Zt},orthoZO:function(){return Tn},perspective:function(){return Dt},perspectiveFromFieldOfView:function(){return Le},perspectiveNO:function(){return Ge},perspectiveZO:function(){return yt},rotate:function(){return le},rotateX:function(){return ee},rotateY:function(){return be},rotateZ:function(){return et},scale:function(){return Q},set:function(){return se},str:function(){return Lt},sub:function(){return Ut},subtract:function(){return Xn},targetTo:function(){return or},translate:function(){return Oe},transpose:function(){return ye}});var q=D(49685);function G(){var U=new q.WT(16);return q.WT!=Float32Array&&(U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=0,U[12]=0,U[13]=0,U[14]=0),U[0]=1,U[5]=1,U[10]=1,U[15]=1,U}function E(U){var he=new q.WT(16);return he[0]=U[0],he[1]=U[1],he[2]=U[2],he[3]=U[3],he[4]=U[4],he[5]=U[5],he[6]=U[6],he[7]=U[7],he[8]=U[8],he[9]=U[9],he[10]=U[10],he[11]=U[11],he[12]=U[12],he[13]=U[13],he[14]=U[14],he[15]=U[15],he}function fe(U,he){return U[0]=he[0],U[1]=he[1],U[2]=he[2],U[3]=he[3],U[4]=he[4],U[5]=he[5],U[6]=he[6],U[7]=he[7],U[8]=he[8],U[9]=he[9],U[10]=he[10],U[11]=he[11],U[12]=he[12],U[13]=he[13],U[14]=he[14],U[15]=he[15],U}function $(U,he,ot,de,qt,ln,mn,Dn,Yn,Kn,pn,vt,Nt,An,In,$n){var pt=new q.WT(16);return pt[0]=U,pt[1]=he,pt[2]=ot,pt[3]=de,pt[4]=qt,pt[5]=ln,pt[6]=mn,pt[7]=Dn,pt[8]=Yn,pt[9]=Kn,pt[10]=pn,pt[11]=vt,pt[12]=Nt,pt[13]=An,pt[14]=In,pt[15]=$n,pt}function se(U,he,ot,de,qt,ln,mn,Dn,Yn,Kn,pn,vt,Nt,An,In,$n,pt){return U[0]=he,U[1]=ot,U[2]=de,U[3]=qt,U[4]=ln,U[5]=mn,U[6]=Dn,U[7]=Yn,U[8]=Kn,U[9]=pn,U[10]=vt,U[11]=Nt,U[12]=An,U[13]=In,U[14]=$n,U[15]=pt,U}function ce(U){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function ye(U,he){if(U===he){var ot=he[1],de=he[2],qt=he[3],ln=he[6],mn=he[7],Dn=he[11];U[1]=he[4],U[2]=he[8],U[3]=he[12],U[4]=ot,U[6]=he[9],U[7]=he[13],U[8]=de,U[9]=ln,U[11]=he[14],U[12]=qt,U[13]=mn,U[14]=Dn}else U[0]=he[0],U[1]=he[4],U[2]=he[8],U[3]=he[12],U[4]=he[1],U[5]=he[5],U[6]=he[9],U[7]=he[13],U[8]=he[2],U[9]=he[6],U[10]=he[10],U[11]=he[14],U[12]=he[3],U[13]=he[7],U[14]=he[11],U[15]=he[15];return U}function ae(U,he){var ot=he[0],de=he[1],qt=he[2],ln=he[3],mn=he[4],Dn=he[5],Yn=he[6],Kn=he[7],pn=he[8],vt=he[9],Nt=he[10],An=he[11],In=he[12],$n=he[13],pt=he[14],xe=he[15],Fe=ot*Dn-de*mn,st=ot*Yn-qt*mn,It=ot*Kn-ln*mn,Mt=de*Yn-qt*Dn,wn=de*Kn-ln*Dn,rr=qt*Kn-ln*Yn,Er=pn*$n-vt*In,qn=pn*pt-Nt*In,Me=pn*xe-An*In,Te=vt*pt-Nt*$n,ke=vt*xe-An*$n,at=Nt*xe-An*pt,At=Fe*at-st*ke+It*Te+Mt*Me-wn*qn+rr*Er;return At?(At=1/At,U[0]=(Dn*at-Yn*ke+Kn*Te)*At,U[1]=(qt*ke-de*at-ln*Te)*At,U[2]=($n*rr-pt*wn+xe*Mt)*At,U[3]=(Nt*wn-vt*rr-An*Mt)*At,U[4]=(Yn*Me-mn*at-Kn*qn)*At,U[5]=(ot*at-qt*Me+ln*qn)*At,U[6]=(pt*It-In*rr-xe*st)*At,U[7]=(pn*rr-Nt*It+An*st)*At,U[8]=(mn*ke-Dn*Me+Kn*Er)*At,U[9]=(de*Me-ot*ke-ln*Er)*At,U[10]=(In*wn-$n*It+xe*Fe)*At,U[11]=(vt*It-pn*wn-An*Fe)*At,U[12]=(Dn*qn-mn*Te-Yn*Er)*At,U[13]=(ot*Te-de*qn+qt*Er)*At,U[14]=($n*st-In*Mt-pt*Fe)*At,U[15]=(pn*Mt-vt*st+Nt*Fe)*At,U):null}function He(U,he){var ot=he[0],de=he[1],qt=he[2],ln=he[3],mn=he[4],Dn=he[5],Yn=he[6],Kn=he[7],pn=he[8],vt=he[9],Nt=he[10],An=he[11],In=he[12],$n=he[13],pt=he[14],xe=he[15];return U[0]=Dn*(Nt*xe-An*pt)-vt*(Yn*xe-Kn*pt)+$n*(Yn*An-Kn*Nt),U[1]=-(de*(Nt*xe-An*pt)-vt*(qt*xe-ln*pt)+$n*(qt*An-ln*Nt)),U[2]=de*(Yn*xe-Kn*pt)-Dn*(qt*xe-ln*pt)+$n*(qt*Kn-ln*Yn),U[3]=-(de*(Yn*An-Kn*Nt)-Dn*(qt*An-ln*Nt)+vt*(qt*Kn-ln*Yn)),U[4]=-(mn*(Nt*xe-An*pt)-pn*(Yn*xe-Kn*pt)+In*(Yn*An-Kn*Nt)),U[5]=ot*(Nt*xe-An*pt)-pn*(qt*xe-ln*pt)+In*(qt*An-ln*Nt),U[6]=-(ot*(Yn*xe-Kn*pt)-mn*(qt*xe-ln*pt)+In*(qt*Kn-ln*Yn)),U[7]=ot*(Yn*An-Kn*Nt)-mn*(qt*An-ln*Nt)+pn*(qt*Kn-ln*Yn),U[8]=mn*(vt*xe-An*$n)-pn*(Dn*xe-Kn*$n)+In*(Dn*An-Kn*vt),U[9]=-(ot*(vt*xe-An*$n)-pn*(de*xe-ln*$n)+In*(de*An-ln*vt)),U[10]=ot*(Dn*xe-Kn*$n)-mn*(de*xe-ln*$n)+In*(de*Kn-ln*Dn),U[11]=-(ot*(Dn*An-Kn*vt)-mn*(de*An-ln*vt)+pn*(de*Kn-ln*Dn)),U[12]=-(mn*(vt*pt-Nt*$n)-pn*(Dn*pt-Yn*$n)+In*(Dn*Nt-Yn*vt)),U[13]=ot*(vt*pt-Nt*$n)-pn*(de*pt-qt*$n)+In*(de*Nt-qt*vt),U[14]=-(ot*(Dn*pt-Yn*$n)-mn*(de*pt-qt*$n)+In*(de*Yn-qt*Dn)),U[15]=ot*(Dn*Nt-Yn*vt)-mn*(de*Nt-qt*vt)+pn*(de*Yn-qt*Dn),U}function J(U){var he=U[0],ot=U[1],de=U[2],qt=U[3],ln=U[4],mn=U[5],Dn=U[6],Yn=U[7],Kn=U[8],pn=U[9],vt=U[10],Nt=U[11],An=U[12],In=U[13],$n=U[14],pt=U[15],xe=he*mn-ot*ln,Fe=he*Dn-de*ln,st=he*Yn-qt*ln,It=ot*Dn-de*mn,Mt=ot*Yn-qt*mn,wn=de*Yn-qt*Dn,rr=Kn*In-pn*An,Er=Kn*$n-vt*An,qn=Kn*pt-Nt*An,Me=pn*$n-vt*In,Te=pn*pt-Nt*In,ke=vt*pt-Nt*$n;return xe*ke-Fe*Te+st*Me+It*qn-Mt*Er+wn*rr}function me(U,he,ot){var de=he[0],qt=he[1],ln=he[2],mn=he[3],Dn=he[4],Yn=he[5],Kn=he[6],pn=he[7],vt=he[8],Nt=he[9],An=he[10],In=he[11],$n=he[12],pt=he[13],xe=he[14],Fe=he[15],st=ot[0],It=ot[1],Mt=ot[2],wn=ot[3];return U[0]=st*de+It*Dn+Mt*vt+wn*$n,U[1]=st*qt+It*Yn+Mt*Nt+wn*pt,U[2]=st*ln+It*Kn+Mt*An+wn*xe,U[3]=st*mn+It*pn+Mt*In+wn*Fe,st=ot[4],It=ot[5],Mt=ot[6],wn=ot[7],U[4]=st*de+It*Dn+Mt*vt+wn*$n,U[5]=st*qt+It*Yn+Mt*Nt+wn*pt,U[6]=st*ln+It*Kn+Mt*An+wn*xe,U[7]=st*mn+It*pn+Mt*In+wn*Fe,st=ot[8],It=ot[9],Mt=ot[10],wn=ot[11],U[8]=st*de+It*Dn+Mt*vt+wn*$n,U[9]=st*qt+It*Yn+Mt*Nt+wn*pt,U[10]=st*ln+It*Kn+Mt*An+wn*xe,U[11]=st*mn+It*pn+Mt*In+wn*Fe,st=ot[12],It=ot[13],Mt=ot[14],wn=ot[15],U[12]=st*de+It*Dn+Mt*vt+wn*$n,U[13]=st*qt+It*Yn+Mt*Nt+wn*pt,U[14]=st*ln+It*Kn+Mt*An+wn*xe,U[15]=st*mn+It*pn+Mt*In+wn*Fe,U}function Oe(U,he,ot){var de=ot[0],qt=ot[1],ln=ot[2],mn,Dn,Yn,Kn,pn,vt,Nt,An,In,$n,pt,xe;return he===U?(U[12]=he[0]*de+he[4]*qt+he[8]*ln+he[12],U[13]=he[1]*de+he[5]*qt+he[9]*ln+he[13],U[14]=he[2]*de+he[6]*qt+he[10]*ln+he[14],U[15]=he[3]*de+he[7]*qt+he[11]*ln+he[15]):(mn=he[0],Dn=he[1],Yn=he[2],Kn=he[3],pn=he[4],vt=he[5],Nt=he[6],An=he[7],In=he[8],$n=he[9],pt=he[10],xe=he[11],U[0]=mn,U[1]=Dn,U[2]=Yn,U[3]=Kn,U[4]=pn,U[5]=vt,U[6]=Nt,U[7]=An,U[8]=In,U[9]=$n,U[10]=pt,U[11]=xe,U[12]=mn*de+pn*qt+In*ln+he[12],U[13]=Dn*de+vt*qt+$n*ln+he[13],U[14]=Yn*de+Nt*qt+pt*ln+he[14],U[15]=Kn*de+An*qt+xe*ln+he[15]),U}function Q(U,he,ot){var de=ot[0],qt=ot[1],ln=ot[2];return U[0]=he[0]*de,U[1]=he[1]*de,U[2]=he[2]*de,U[3]=he[3]*de,U[4]=he[4]*qt,U[5]=he[5]*qt,U[6]=he[6]*qt,U[7]=he[7]*qt,U[8]=he[8]*ln,U[9]=he[9]*ln,U[10]=he[10]*ln,U[11]=he[11]*ln,U[12]=he[12],U[13]=he[13],U[14]=he[14],U[15]=he[15],U}function le(U,he,ot,de){var qt=de[0],ln=de[1],mn=de[2],Dn=Math.hypot(qt,ln,mn),Yn,Kn,pn,vt,Nt,An,In,$n,pt,xe,Fe,st,It,Mt,wn,rr,Er,qn,Me,Te,ke,at,At,nn;return Dn<q.Ib?null:(Dn=1/Dn,qt*=Dn,ln*=Dn,mn*=Dn,Yn=Math.sin(ot),Kn=Math.cos(ot),pn=1-Kn,vt=he[0],Nt=he[1],An=he[2],In=he[3],$n=he[4],pt=he[5],xe=he[6],Fe=he[7],st=he[8],It=he[9],Mt=he[10],wn=he[11],rr=qt*qt*pn+Kn,Er=ln*qt*pn+mn*Yn,qn=mn*qt*pn-ln*Yn,Me=qt*ln*pn-mn*Yn,Te=ln*ln*pn+Kn,ke=mn*ln*pn+qt*Yn,at=qt*mn*pn+ln*Yn,At=ln*mn*pn-qt*Yn,nn=mn*mn*pn+Kn,U[0]=vt*rr+$n*Er+st*qn,U[1]=Nt*rr+pt*Er+It*qn,U[2]=An*rr+xe*Er+Mt*qn,U[3]=In*rr+Fe*Er+wn*qn,U[4]=vt*Me+$n*Te+st*ke,U[5]=Nt*Me+pt*Te+It*ke,U[6]=An*Me+xe*Te+Mt*ke,U[7]=In*Me+Fe*Te+wn*ke,U[8]=vt*at+$n*At+st*nn,U[9]=Nt*at+pt*At+It*nn,U[10]=An*at+xe*At+Mt*nn,U[11]=In*at+Fe*At+wn*nn,he!==U&&(U[12]=he[12],U[13]=he[13],U[14]=he[14],U[15]=he[15]),U)}function ee(U,he,ot){var de=Math.sin(ot),qt=Math.cos(ot),ln=he[4],mn=he[5],Dn=he[6],Yn=he[7],Kn=he[8],pn=he[9],vt=he[10],Nt=he[11];return he!==U&&(U[0]=he[0],U[1]=he[1],U[2]=he[2],U[3]=he[3],U[12]=he[12],U[13]=he[13],U[14]=he[14],U[15]=he[15]),U[4]=ln*qt+Kn*de,U[5]=mn*qt+pn*de,U[6]=Dn*qt+vt*de,U[7]=Yn*qt+Nt*de,U[8]=Kn*qt-ln*de,U[9]=pn*qt-mn*de,U[10]=vt*qt-Dn*de,U[11]=Nt*qt-Yn*de,U}function be(U,he,ot){var de=Math.sin(ot),qt=Math.cos(ot),ln=he[0],mn=he[1],Dn=he[2],Yn=he[3],Kn=he[8],pn=he[9],vt=he[10],Nt=he[11];return he!==U&&(U[4]=he[4],U[5]=he[5],U[6]=he[6],U[7]=he[7],U[12]=he[12],U[13]=he[13],U[14]=he[14],U[15]=he[15]),U[0]=ln*qt-Kn*de,U[1]=mn*qt-pn*de,U[2]=Dn*qt-vt*de,U[3]=Yn*qt-Nt*de,U[8]=ln*de+Kn*qt,U[9]=mn*de+pn*qt,U[10]=Dn*de+vt*qt,U[11]=Yn*de+Nt*qt,U}function et(U,he,ot){var de=Math.sin(ot),qt=Math.cos(ot),ln=he[0],mn=he[1],Dn=he[2],Yn=he[3],Kn=he[4],pn=he[5],vt=he[6],Nt=he[7];return he!==U&&(U[8]=he[8],U[9]=he[9],U[10]=he[10],U[11]=he[11],U[12]=he[12],U[13]=he[13],U[14]=he[14],U[15]=he[15]),U[0]=ln*qt+Kn*de,U[1]=mn*qt+pn*de,U[2]=Dn*qt+vt*de,U[3]=Yn*qt+Nt*de,U[4]=Kn*qt-ln*de,U[5]=pn*qt-mn*de,U[6]=vt*qt-Dn*de,U[7]=Nt*qt-Yn*de,U}function tt(U,he){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=he[0],U[13]=he[1],U[14]=he[2],U[15]=1,U}function wt(U,he){return U[0]=he[0],U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=he[1],U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=he[2],U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function gt(U,he,ot){var de=ot[0],qt=ot[1],ln=ot[2],mn=Math.hypot(de,qt,ln),Dn,Yn,Kn;return mn<q.Ib?null:(mn=1/mn,de*=mn,qt*=mn,ln*=mn,Dn=Math.sin(he),Yn=Math.cos(he),Kn=1-Yn,U[0]=de*de*Kn+Yn,U[1]=qt*de*Kn+ln*Dn,U[2]=ln*de*Kn-qt*Dn,U[3]=0,U[4]=de*qt*Kn-ln*Dn,U[5]=qt*qt*Kn+Yn,U[6]=ln*qt*Kn+de*Dn,U[7]=0,U[8]=de*ln*Kn+qt*Dn,U[9]=qt*ln*Kn-de*Dn,U[10]=ln*ln*Kn+Yn,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U)}function ft(U,he){var ot=Math.sin(he),de=Math.cos(he);return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=de,U[6]=ot,U[7]=0,U[8]=0,U[9]=-ot,U[10]=de,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Pe(U,he){var ot=Math.sin(he),de=Math.cos(he);return U[0]=de,U[1]=0,U[2]=-ot,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=ot,U[9]=0,U[10]=de,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Ae(U,he){var ot=Math.sin(he),de=Math.cos(he);return U[0]=de,U[1]=ot,U[2]=0,U[3]=0,U[4]=-ot,U[5]=de,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Be(U,he,ot){var de=he[0],qt=he[1],ln=he[2],mn=he[3],Dn=de+de,Yn=qt+qt,Kn=ln+ln,pn=de*Dn,vt=de*Yn,Nt=de*Kn,An=qt*Yn,In=qt*Kn,$n=ln*Kn,pt=mn*Dn,xe=mn*Yn,Fe=mn*Kn;return U[0]=1-(An+$n),U[1]=vt+Fe,U[2]=Nt-xe,U[3]=0,U[4]=vt-Fe,U[5]=1-(pn+$n),U[6]=In+pt,U[7]=0,U[8]=Nt+xe,U[9]=In-pt,U[10]=1-(pn+An),U[11]=0,U[12]=ot[0],U[13]=ot[1],U[14]=ot[2],U[15]=1,U}function Ze(U,he){var ot=new q.WT(3),de=-he[0],qt=-he[1],ln=-he[2],mn=he[3],Dn=he[4],Yn=he[5],Kn=he[6],pn=he[7],vt=de*de+qt*qt+ln*ln+mn*mn;return vt>0?(ot[0]=(Dn*mn+pn*de+Yn*ln-Kn*qt)*2/vt,ot[1]=(Yn*mn+pn*qt+Kn*de-Dn*ln)*2/vt,ot[2]=(Kn*mn+pn*ln+Dn*qt-Yn*de)*2/vt):(ot[0]=(Dn*mn+pn*de+Yn*ln-Kn*qt)*2,ot[1]=(Yn*mn+pn*qt+Kn*de-Dn*ln)*2,ot[2]=(Kn*mn+pn*ln+Dn*qt-Yn*de)*2),Be(U,he,ot),U}function ut(U,he){return U[0]=he[12],U[1]=he[13],U[2]=he[14],U}function tn(U,he){var ot=he[0],de=he[1],qt=he[2],ln=he[4],mn=he[5],Dn=he[6],Yn=he[8],Kn=he[9],pn=he[10];return U[0]=Math.hypot(ot,de,qt),U[1]=Math.hypot(ln,mn,Dn),U[2]=Math.hypot(Yn,Kn,pn),U}function De(U,he){var ot=new q.WT(3);tn(ot,he);var de=1/ot[0],qt=1/ot[1],ln=1/ot[2],mn=he[0]*de,Dn=he[1]*qt,Yn=he[2]*ln,Kn=he[4]*de,pn=he[5]*qt,vt=he[6]*ln,Nt=he[8]*de,An=he[9]*qt,In=he[10]*ln,$n=mn+pn+In,pt=0;return $n>0?(pt=Math.sqrt($n+1)*2,U[3]=.25*pt,U[0]=(vt-An)/pt,U[1]=(Nt-Yn)/pt,U[2]=(Dn-Kn)/pt):mn>pn&&mn>In?(pt=Math.sqrt(1+mn-pn-In)*2,U[3]=(vt-An)/pt,U[0]=.25*pt,U[1]=(Dn+Kn)/pt,U[2]=(Nt+Yn)/pt):pn>In?(pt=Math.sqrt(1+pn-mn-In)*2,U[3]=(Nt-Yn)/pt,U[0]=(Dn+Kn)/pt,U[1]=.25*pt,U[2]=(vt+An)/pt):(pt=Math.sqrt(1+In-mn-pn)*2,U[3]=(Dn-Kn)/pt,U[0]=(Nt+Yn)/pt,U[1]=(vt+An)/pt,U[2]=.25*pt),U}function mt(U,he,ot,de){var qt=he[0],ln=he[1],mn=he[2],Dn=he[3],Yn=qt+qt,Kn=ln+ln,pn=mn+mn,vt=qt*Yn,Nt=qt*Kn,An=qt*pn,In=ln*Kn,$n=ln*pn,pt=mn*pn,xe=Dn*Yn,Fe=Dn*Kn,st=Dn*pn,It=de[0],Mt=de[1],wn=de[2];return U[0]=(1-(In+pt))*It,U[1]=(Nt+st)*It,U[2]=(An-Fe)*It,U[3]=0,U[4]=(Nt-st)*Mt,U[5]=(1-(vt+pt))*Mt,U[6]=($n+xe)*Mt,U[7]=0,U[8]=(An+Fe)*wn,U[9]=($n-xe)*wn,U[10]=(1-(vt+In))*wn,U[11]=0,U[12]=ot[0],U[13]=ot[1],U[14]=ot[2],U[15]=1,U}function Re(U,he,ot,de,qt){var ln=he[0],mn=he[1],Dn=he[2],Yn=he[3],Kn=ln+ln,pn=mn+mn,vt=Dn+Dn,Nt=ln*Kn,An=ln*pn,In=ln*vt,$n=mn*pn,pt=mn*vt,xe=Dn*vt,Fe=Yn*Kn,st=Yn*pn,It=Yn*vt,Mt=de[0],wn=de[1],rr=de[2],Er=qt[0],qn=qt[1],Me=qt[2],Te=(1-($n+xe))*Mt,ke=(An+It)*Mt,at=(In-st)*Mt,At=(An-It)*wn,nn=(1-(Nt+xe))*wn,cn=(pt+Fe)*wn,Et=(In+st)*rr,Qt=(pt-Fe)*rr,Qn=(1-(Nt+$n))*rr;return U[0]=Te,U[1]=ke,U[2]=at,U[3]=0,U[4]=At,U[5]=nn,U[6]=cn,U[7]=0,U[8]=Et,U[9]=Qt,U[10]=Qn,U[11]=0,U[12]=ot[0]+Er-(Te*Er+At*qn+Et*Me),U[13]=ot[1]+qn-(ke*Er+nn*qn+Qt*Me),U[14]=ot[2]+Me-(at*Er+cn*qn+Qn*Me),U[15]=1,U}function nt(U,he){var ot=he[0],de=he[1],qt=he[2],ln=he[3],mn=ot+ot,Dn=de+de,Yn=qt+qt,Kn=ot*mn,pn=de*mn,vt=de*Dn,Nt=qt*mn,An=qt*Dn,In=qt*Yn,$n=ln*mn,pt=ln*Dn,xe=ln*Yn;return U[0]=1-vt-In,U[1]=pn+xe,U[2]=Nt-pt,U[3]=0,U[4]=pn-xe,U[5]=1-Kn-In,U[6]=An+$n,U[7]=0,U[8]=Nt+pt,U[9]=An-$n,U[10]=1-Kn-vt,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function qe(U,he,ot,de,qt,ln,mn){var Dn=1/(ot-he),Yn=1/(qt-de),Kn=1/(ln-mn);return U[0]=ln*2*Dn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=ln*2*Yn,U[6]=0,U[7]=0,U[8]=(ot+he)*Dn,U[9]=(qt+de)*Yn,U[10]=(mn+ln)*Kn,U[11]=-1,U[12]=0,U[13]=0,U[14]=mn*ln*2*Kn,U[15]=0,U}function Ge(U,he,ot,de,qt){var ln=1/Math.tan(he/2),mn;return U[0]=ln/ot,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=ln,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=-1,U[12]=0,U[13]=0,U[15]=0,qt!=null&&qt!==1/0?(mn=1/(de-qt),U[10]=(qt+de)*mn,U[14]=2*qt*de*mn):(U[10]=-1,U[14]=-2*de),U}var Dt=Ge;function yt(U,he,ot,de,qt){var ln=1/Math.tan(he/2),mn;return U[0]=ln/ot,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=ln,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=-1,U[12]=0,U[13]=0,U[15]=0,qt!=null&&qt!==1/0?(mn=1/(de-qt),U[10]=qt*mn,U[14]=qt*de*mn):(U[10]=-1,U[14]=-de),U}function Le(U,he,ot,de){var qt=Math.tan(he.upDegrees*Math.PI/180),ln=Math.tan(he.downDegrees*Math.PI/180),mn=Math.tan(he.leftDegrees*Math.PI/180),Dn=Math.tan(he.rightDegrees*Math.PI/180),Yn=2/(mn+Dn),Kn=2/(qt+ln);return U[0]=Yn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=Kn,U[6]=0,U[7]=0,U[8]=-((mn-Dn)*Yn*.5),U[9]=(qt-ln)*Kn*.5,U[10]=de/(ot-de),U[11]=-1,U[12]=0,U[13]=0,U[14]=de*ot/(ot-de),U[15]=0,U}function Zt(U,he,ot,de,qt,ln,mn){var Dn=1/(he-ot),Yn=1/(de-qt),Kn=1/(ln-mn);return U[0]=-2*Dn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=-2*Yn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=2*Kn,U[11]=0,U[12]=(he+ot)*Dn,U[13]=(qt+de)*Yn,U[14]=(mn+ln)*Kn,U[15]=1,U}var yn=Zt;function Tn(U,he,ot,de,qt,ln,mn){var Dn=1/(he-ot),Yn=1/(de-qt),Kn=1/(ln-mn);return U[0]=-2*Dn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=-2*Yn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=Kn,U[11]=0,U[12]=(he+ot)*Dn,U[13]=(qt+de)*Yn,U[14]=ln*Kn,U[15]=1,U}function lr(U,he,ot,de){var qt,ln,mn,Dn,Yn,Kn,pn,vt,Nt,An,In=he[0],$n=he[1],pt=he[2],xe=de[0],Fe=de[1],st=de[2],It=ot[0],Mt=ot[1],wn=ot[2];return Math.abs(In-It)<q.Ib&&Math.abs($n-Mt)<q.Ib&&Math.abs(pt-wn)<q.Ib?ce(U):(pn=In-It,vt=$n-Mt,Nt=pt-wn,An=1/Math.hypot(pn,vt,Nt),pn*=An,vt*=An,Nt*=An,qt=Fe*Nt-st*vt,ln=st*pn-xe*Nt,mn=xe*vt-Fe*pn,An=Math.hypot(qt,ln,mn),An?(An=1/An,qt*=An,ln*=An,mn*=An):(qt=0,ln=0,mn=0),Dn=vt*mn-Nt*ln,Yn=Nt*qt-pn*mn,Kn=pn*ln-vt*qt,An=Math.hypot(Dn,Yn,Kn),An?(An=1/An,Dn*=An,Yn*=An,Kn*=An):(Dn=0,Yn=0,Kn=0),U[0]=qt,U[1]=Dn,U[2]=pn,U[3]=0,U[4]=ln,U[5]=Yn,U[6]=vt,U[7]=0,U[8]=mn,U[9]=Kn,U[10]=Nt,U[11]=0,U[12]=-(qt*In+ln*$n+mn*pt),U[13]=-(Dn*In+Yn*$n+Kn*pt),U[14]=-(pn*In+vt*$n+Nt*pt),U[15]=1,U)}function or(U,he,ot,de){var qt=he[0],ln=he[1],mn=he[2],Dn=de[0],Yn=de[1],Kn=de[2],pn=qt-ot[0],vt=ln-ot[1],Nt=mn-ot[2],An=pn*pn+vt*vt+Nt*Nt;An>0&&(An=1/Math.sqrt(An),pn*=An,vt*=An,Nt*=An);var In=Yn*Nt-Kn*vt,$n=Kn*pn-Dn*Nt,pt=Dn*vt-Yn*pn;return An=In*In+$n*$n+pt*pt,An>0&&(An=1/Math.sqrt(An),In*=An,$n*=An,pt*=An),U[0]=In,U[1]=$n,U[2]=pt,U[3]=0,U[4]=vt*pt-Nt*$n,U[5]=Nt*In-pn*pt,U[6]=pn*$n-vt*In,U[7]=0,U[8]=pn,U[9]=vt,U[10]=Nt,U[11]=0,U[12]=qt,U[13]=ln,U[14]=mn,U[15]=1,U}function Lt(U){return"mat4("+U[0]+", "+U[1]+", "+U[2]+", "+U[3]+", "+U[4]+", "+U[5]+", "+U[6]+", "+U[7]+", "+U[8]+", "+U[9]+", "+U[10]+", "+U[11]+", "+U[12]+", "+U[13]+", "+U[14]+", "+U[15]+")"}function en(U){return Math.hypot(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15])}function hn(U,he,ot){return U[0]=he[0]+ot[0],U[1]=he[1]+ot[1],U[2]=he[2]+ot[2],U[3]=he[3]+ot[3],U[4]=he[4]+ot[4],U[5]=he[5]+ot[5],U[6]=he[6]+ot[6],U[7]=he[7]+ot[7],U[8]=he[8]+ot[8],U[9]=he[9]+ot[9],U[10]=he[10]+ot[10],U[11]=he[11]+ot[11],U[12]=he[12]+ot[12],U[13]=he[13]+ot[13],U[14]=he[14]+ot[14],U[15]=he[15]+ot[15],U}function Xn(U,he,ot){return U[0]=he[0]-ot[0],U[1]=he[1]-ot[1],U[2]=he[2]-ot[2],U[3]=he[3]-ot[3],U[4]=he[4]-ot[4],U[5]=he[5]-ot[5],U[6]=he[6]-ot[6],U[7]=he[7]-ot[7],U[8]=he[8]-ot[8],U[9]=he[9]-ot[9],U[10]=he[10]-ot[10],U[11]=he[11]-ot[11],U[12]=he[12]-ot[12],U[13]=he[13]-ot[13],U[14]=he[14]-ot[14],U[15]=he[15]-ot[15],U}function an(U,he,ot){return U[0]=he[0]*ot,U[1]=he[1]*ot,U[2]=he[2]*ot,U[3]=he[3]*ot,U[4]=he[4]*ot,U[5]=he[5]*ot,U[6]=he[6]*ot,U[7]=he[7]*ot,U[8]=he[8]*ot,U[9]=he[9]*ot,U[10]=he[10]*ot,U[11]=he[11]*ot,U[12]=he[12]*ot,U[13]=he[13]*ot,U[14]=he[14]*ot,U[15]=he[15]*ot,U}function Pt(U,he,ot,de){return U[0]=he[0]+ot[0]*de,U[1]=he[1]+ot[1]*de,U[2]=he[2]+ot[2]*de,U[3]=he[3]+ot[3]*de,U[4]=he[4]+ot[4]*de,U[5]=he[5]+ot[5]*de,U[6]=he[6]+ot[6]*de,U[7]=he[7]+ot[7]*de,U[8]=he[8]+ot[8]*de,U[9]=he[9]+ot[9]*de,U[10]=he[10]+ot[10]*de,U[11]=he[11]+ot[11]*de,U[12]=he[12]+ot[12]*de,U[13]=he[13]+ot[13]*de,U[14]=he[14]+ot[14]*de,U[15]=he[15]+ot[15]*de,U}function zt(U,he){return U[0]===he[0]&&U[1]===he[1]&&U[2]===he[2]&&U[3]===he[3]&&U[4]===he[4]&&U[5]===he[5]&&U[6]===he[6]&&U[7]===he[7]&&U[8]===he[8]&&U[9]===he[9]&&U[10]===he[10]&&U[11]===he[11]&&U[12]===he[12]&&U[13]===he[13]&&U[14]===he[14]&&U[15]===he[15]}function je(U,he){var ot=U[0],de=U[1],qt=U[2],ln=U[3],mn=U[4],Dn=U[5],Yn=U[6],Kn=U[7],pn=U[8],vt=U[9],Nt=U[10],An=U[11],In=U[12],$n=U[13],pt=U[14],xe=U[15],Fe=he[0],st=he[1],It=he[2],Mt=he[3],wn=he[4],rr=he[5],Er=he[6],qn=he[7],Me=he[8],Te=he[9],ke=he[10],at=he[11],At=he[12],nn=he[13],cn=he[14],Et=he[15];return Math.abs(ot-Fe)<=q.Ib*Math.max(1,Math.abs(ot),Math.abs(Fe))&&Math.abs(de-st)<=q.Ib*Math.max(1,Math.abs(de),Math.abs(st))&&Math.abs(qt-It)<=q.Ib*Math.max(1,Math.abs(qt),Math.abs(It))&&Math.abs(ln-Mt)<=q.Ib*Math.max(1,Math.abs(ln),Math.abs(Mt))&&Math.abs(mn-wn)<=q.Ib*Math.max(1,Math.abs(mn),Math.abs(wn))&&Math.abs(Dn-rr)<=q.Ib*Math.max(1,Math.abs(Dn),Math.abs(rr))&&Math.abs(Yn-Er)<=q.Ib*Math.max(1,Math.abs(Yn),Math.abs(Er))&&Math.abs(Kn-qn)<=q.Ib*Math.max(1,Math.abs(Kn),Math.abs(qn))&&Math.abs(pn-Me)<=q.Ib*Math.max(1,Math.abs(pn),Math.abs(Me))&&Math.abs(vt-Te)<=q.Ib*Math.max(1,Math.abs(vt),Math.abs(Te))&&Math.abs(Nt-ke)<=q.Ib*Math.max(1,Math.abs(Nt),Math.abs(ke))&&Math.abs(An-at)<=q.Ib*Math.max(1,Math.abs(An),Math.abs(at))&&Math.abs(In-At)<=q.Ib*Math.max(1,Math.abs(In),Math.abs(At))&&Math.abs($n-nn)<=q.Ib*Math.max(1,Math.abs($n),Math.abs(nn))&&Math.abs(pt-cn)<=q.Ib*Math.max(1,Math.abs(pt),Math.abs(cn))&&Math.abs(xe-Et)<=q.Ib*Math.max(1,Math.abs(xe),Math.abs(Et))}var rt=me,Ut=Xn},31437:function(_t,W,D){"use strict";D.d(W,{$X:function(){return ye},AK:function(){return Be},Fv:function(){return Ae},I6:function(){return Le},IH:function(){return ce},JG:function(){return $},Ue:function(){return G},al:function(){return fe},lu:function(){return Tn},t7:function(){return ut},t8:function(){return se},tk:function(){return ft}});var q=D(49685);function G(){var an=new q.WT(2);return q.WT!=Float32Array&&(an[0]=0,an[1]=0),an}function E(an){var Pt=new glMatrix.ARRAY_TYPE(2);return Pt[0]=an[0],Pt[1]=an[1],Pt}function fe(an,Pt){var zt=new q.WT(2);return zt[0]=an,zt[1]=Pt,zt}function $(an,Pt){return an[0]=Pt[0],an[1]=Pt[1],an}function se(an,Pt,zt){return an[0]=Pt,an[1]=zt,an}function ce(an,Pt,zt){return an[0]=Pt[0]+zt[0],an[1]=Pt[1]+zt[1],an}function ye(an,Pt,zt){return an[0]=Pt[0]-zt[0],an[1]=Pt[1]-zt[1],an}function ae(an,Pt,zt){return an[0]=Pt[0]*zt[0],an[1]=Pt[1]*zt[1],an}function He(an,Pt,zt){return an[0]=Pt[0]/zt[0],an[1]=Pt[1]/zt[1],an}function J(an,Pt){return an[0]=Math.ceil(Pt[0]),an[1]=Math.ceil(Pt[1]),an}function me(an,Pt){return an[0]=Math.floor(Pt[0]),an[1]=Math.floor(Pt[1]),an}function Oe(an,Pt,zt){return an[0]=Math.min(Pt[0],zt[0]),an[1]=Math.min(Pt[1],zt[1]),an}function Q(an,Pt,zt){return an[0]=Math.max(Pt[0],zt[0]),an[1]=Math.max(Pt[1],zt[1]),an}function le(an,Pt){return an[0]=Math.round(Pt[0]),an[1]=Math.round(Pt[1]),an}function ee(an,Pt,zt){return an[0]=Pt[0]*zt,an[1]=Pt[1]*zt,an}function be(an,Pt,zt,je){return an[0]=Pt[0]+zt[0]*je,an[1]=Pt[1]+zt[1]*je,an}function et(an,Pt){var zt=Pt[0]-an[0],je=Pt[1]-an[1];return Math.hypot(zt,je)}function tt(an,Pt){var zt=Pt[0]-an[0],je=Pt[1]-an[1];return zt*zt+je*je}function wt(an){var Pt=an[0],zt=an[1];return Math.hypot(Pt,zt)}function gt(an){var Pt=an[0],zt=an[1];return Pt*Pt+zt*zt}function ft(an,Pt){return an[0]=-Pt[0],an[1]=-Pt[1],an}function Pe(an,Pt){return an[0]=1/Pt[0],an[1]=1/Pt[1],an}function Ae(an,Pt){var zt=Pt[0],je=Pt[1],rt=zt*zt+je*je;return rt>0&&(rt=1/Math.sqrt(rt)),an[0]=Pt[0]*rt,an[1]=Pt[1]*rt,an}function Be(an,Pt){return an[0]*Pt[0]+an[1]*Pt[1]}function Ze(an,Pt,zt){var je=Pt[0]*zt[1]-Pt[1]*zt[0];return an[0]=an[1]=0,an[2]=je,an}function ut(an,Pt,zt,je){var rt=Pt[0],Ut=Pt[1];return an[0]=rt+je*(zt[0]-rt),an[1]=Ut+je*(zt[1]-Ut),an}function tn(an,Pt){Pt=Pt||1;var zt=glMatrix.RANDOM()*2*Math.PI;return an[0]=Math.cos(zt)*Pt,an[1]=Math.sin(zt)*Pt,an}function De(an,Pt,zt){var je=Pt[0],rt=Pt[1];return an[0]=zt[0]*je+zt[2]*rt,an[1]=zt[1]*je+zt[3]*rt,an}function mt(an,Pt,zt){var je=Pt[0],rt=Pt[1];return an[0]=zt[0]*je+zt[2]*rt+zt[4],an[1]=zt[1]*je+zt[3]*rt+zt[5],an}function Re(an,Pt,zt){var je=Pt[0],rt=Pt[1];return an[0]=zt[0]*je+zt[3]*rt+zt[6],an[1]=zt[1]*je+zt[4]*rt+zt[7],an}function nt(an,Pt,zt){var je=Pt[0],rt=Pt[1];return an[0]=zt[0]*je+zt[4]*rt+zt[12],an[1]=zt[1]*je+zt[5]*rt+zt[13],an}function qe(an,Pt,zt,je){var rt=Pt[0]-zt[0],Ut=Pt[1]-zt[1],U=Math.sin(je),he=Math.cos(je);return an[0]=rt*he-Ut*U+zt[0],an[1]=rt*U+Ut*he+zt[1],an}function Ge(an,Pt){var zt=an[0],je=an[1],rt=Pt[0],Ut=Pt[1],U=Math.sqrt(zt*zt+je*je)*Math.sqrt(rt*rt+Ut*Ut),he=U&&(zt*rt+je*Ut)/U;return Math.acos(Math.min(Math.max(he,-1),1))}function Dt(an){return an[0]=0,an[1]=0,an}function yt(an){return"vec2("+an[0]+", "+an[1]+")"}function Le(an,Pt){return an[0]===Pt[0]&&an[1]===Pt[1]}function Zt(an,Pt){var zt=an[0],je=an[1],rt=Pt[0],Ut=Pt[1];return Math.abs(zt-rt)<=glMatrix.EPSILON*Math.max(1,Math.abs(zt),Math.abs(rt))&&Math.abs(je-Ut)<=glMatrix.EPSILON*Math.max(1,Math.abs(je),Math.abs(Ut))}var yn=null,Tn=ye,lr=null,or=null,Lt=null,en=null,hn=null,Xn=function(){var an=G();return function(Pt,zt,je,rt,Ut,U){var he,ot;for(zt||(zt=2),je||(je=0),rt?ot=Math.min(rt*zt+je,Pt.length):ot=Pt.length,he=je;he<ot;he+=zt)an[0]=Pt[he],an[1]=Pt[he+1],Ut(an,an,U),Pt[he]=an[0],Pt[he+1]=an[1];return Pt}}()},77160:function(_t,W,D){"use strict";D.d(W,{$X:function(){return ae},AK:function(){return Be},EU:function(){return Le},Fv:function(){return Ae},IH:function(){return ye},JG:function(){return se},Jp:function(){return He},TK:function(){return hn},Ue:function(){return G},VC:function(){return qe},Zh:function(){return an},al:function(){return $},bA:function(){return be},d9:function(){return E},fF:function(){return Re},fS:function(){return lr},kC:function(){return Ze},kE:function(){return fe},kK:function(){return nt},lu:function(){return or},t7:function(){return ut},t8:function(){return ce},tk:function(){return ft}});var q=D(49685);function G(){var je=new q.WT(3);return q.WT!=Float32Array&&(je[0]=0,je[1]=0,je[2]=0),je}function E(je){var rt=new q.WT(3);return rt[0]=je[0],rt[1]=je[1],rt[2]=je[2],rt}function fe(je){var rt=je[0],Ut=je[1],U=je[2];return Math.hypot(rt,Ut,U)}function $(je,rt,Ut){var U=new q.WT(3);return U[0]=je,U[1]=rt,U[2]=Ut,U}function se(je,rt){return je[0]=rt[0],je[1]=rt[1],je[2]=rt[2],je}function ce(je,rt,Ut,U){return je[0]=rt,je[1]=Ut,je[2]=U,je}function ye(je,rt,Ut){return je[0]=rt[0]+Ut[0],je[1]=rt[1]+Ut[1],je[2]=rt[2]+Ut[2],je}function ae(je,rt,Ut){return je[0]=rt[0]-Ut[0],je[1]=rt[1]-Ut[1],je[2]=rt[2]-Ut[2],je}function He(je,rt,Ut){return je[0]=rt[0]*Ut[0],je[1]=rt[1]*Ut[1],je[2]=rt[2]*Ut[2],je}function J(je,rt,Ut){return je[0]=rt[0]/Ut[0],je[1]=rt[1]/Ut[1],je[2]=rt[2]/Ut[2],je}function me(je,rt){return je[0]=Math.ceil(rt[0]),je[1]=Math.ceil(rt[1]),je[2]=Math.ceil(rt[2]),je}function Oe(je,rt){return je[0]=Math.floor(rt[0]),je[1]=Math.floor(rt[1]),je[2]=Math.floor(rt[2]),je}function Q(je,rt,Ut){return je[0]=Math.min(rt[0],Ut[0]),je[1]=Math.min(rt[1],Ut[1]),je[2]=Math.min(rt[2],Ut[2]),je}function le(je,rt,Ut){return je[0]=Math.max(rt[0],Ut[0]),je[1]=Math.max(rt[1],Ut[1]),je[2]=Math.max(rt[2],Ut[2]),je}function ee(je,rt){return je[0]=Math.round(rt[0]),je[1]=Math.round(rt[1]),je[2]=Math.round(rt[2]),je}function be(je,rt,Ut){return je[0]=rt[0]*Ut,je[1]=rt[1]*Ut,je[2]=rt[2]*Ut,je}function et(je,rt,Ut,U){return je[0]=rt[0]+Ut[0]*U,je[1]=rt[1]+Ut[1]*U,je[2]=rt[2]+Ut[2]*U,je}function tt(je,rt){var Ut=rt[0]-je[0],U=rt[1]-je[1],he=rt[2]-je[2];return Math.hypot(Ut,U,he)}function wt(je,rt){var Ut=rt[0]-je[0],U=rt[1]-je[1],he=rt[2]-je[2];return Ut*Ut+U*U+he*he}function gt(je){var rt=je[0],Ut=je[1],U=je[2];return rt*rt+Ut*Ut+U*U}function ft(je,rt){return je[0]=-rt[0],je[1]=-rt[1],je[2]=-rt[2],je}function Pe(je,rt){return je[0]=1/rt[0],je[1]=1/rt[1],je[2]=1/rt[2],je}function Ae(je,rt){var Ut=rt[0],U=rt[1],he=rt[2],ot=Ut*Ut+U*U+he*he;return ot>0&&(ot=1/Math.sqrt(ot)),je[0]=rt[0]*ot,je[1]=rt[1]*ot,je[2]=rt[2]*ot,je}function Be(je,rt){return je[0]*rt[0]+je[1]*rt[1]+je[2]*rt[2]}function Ze(je,rt,Ut){var U=rt[0],he=rt[1],ot=rt[2],de=Ut[0],qt=Ut[1],ln=Ut[2];return je[0]=he*ln-ot*qt,je[1]=ot*de-U*ln,je[2]=U*qt-he*de,je}function ut(je,rt,Ut,U){var he=rt[0],ot=rt[1],de=rt[2];return je[0]=he+U*(Ut[0]-he),je[1]=ot+U*(Ut[1]-ot),je[2]=de+U*(Ut[2]-de),je}function tn(je,rt,Ut,U,he,ot){var de=ot*ot,qt=de*(2*ot-3)+1,ln=de*(ot-2)+ot,mn=de*(ot-1),Dn=de*(3-2*ot);return je[0]=rt[0]*qt+Ut[0]*ln+U[0]*mn+he[0]*Dn,je[1]=rt[1]*qt+Ut[1]*ln+U[1]*mn+he[1]*Dn,je[2]=rt[2]*qt+Ut[2]*ln+U[2]*mn+he[2]*Dn,je}function De(je,rt,Ut,U,he,ot){var de=1-ot,qt=de*de,ln=ot*ot,mn=qt*de,Dn=3*ot*qt,Yn=3*ln*de,Kn=ln*ot;return je[0]=rt[0]*mn+Ut[0]*Dn+U[0]*Yn+he[0]*Kn,je[1]=rt[1]*mn+Ut[1]*Dn+U[1]*Yn+he[1]*Kn,je[2]=rt[2]*mn+Ut[2]*Dn+U[2]*Yn+he[2]*Kn,je}function mt(je,rt){rt=rt||1;var Ut=glMatrix.RANDOM()*2*Math.PI,U=glMatrix.RANDOM()*2-1,he=Math.sqrt(1-U*U)*rt;return je[0]=Math.cos(Ut)*he,je[1]=Math.sin(Ut)*he,je[2]=U*rt,je}function Re(je,rt,Ut){var U=rt[0],he=rt[1],ot=rt[2],de=Ut[3]*U+Ut[7]*he+Ut[11]*ot+Ut[15];return de=de||1,je[0]=(Ut[0]*U+Ut[4]*he+Ut[8]*ot+Ut[12])/de,je[1]=(Ut[1]*U+Ut[5]*he+Ut[9]*ot+Ut[13])/de,je[2]=(Ut[2]*U+Ut[6]*he+Ut[10]*ot+Ut[14])/de,je}function nt(je,rt,Ut){var U=rt[0],he=rt[1],ot=rt[2];return je[0]=U*Ut[0]+he*Ut[3]+ot*Ut[6],je[1]=U*Ut[1]+he*Ut[4]+ot*Ut[7],je[2]=U*Ut[2]+he*Ut[5]+ot*Ut[8],je}function qe(je,rt,Ut){var U=Ut[0],he=Ut[1],ot=Ut[2],de=Ut[3],qt=rt[0],ln=rt[1],mn=rt[2],Dn=he*mn-ot*ln,Yn=ot*qt-U*mn,Kn=U*ln-he*qt,pn=he*Kn-ot*Yn,vt=ot*Dn-U*Kn,Nt=U*Yn-he*Dn,An=de*2;return Dn*=An,Yn*=An,Kn*=An,pn*=2,vt*=2,Nt*=2,je[0]=qt+Dn+pn,je[1]=ln+Yn+vt,je[2]=mn+Kn+Nt,je}function Ge(je,rt,Ut,U){var he=[],ot=[];return he[0]=rt[0]-Ut[0],he[1]=rt[1]-Ut[1],he[2]=rt[2]-Ut[2],ot[0]=he[0],ot[1]=he[1]*Math.cos(U)-he[2]*Math.sin(U),ot[2]=he[1]*Math.sin(U)+he[2]*Math.cos(U),je[0]=ot[0]+Ut[0],je[1]=ot[1]+Ut[1],je[2]=ot[2]+Ut[2],je}function Dt(je,rt,Ut,U){var he=[],ot=[];return he[0]=rt[0]-Ut[0],he[1]=rt[1]-Ut[1],he[2]=rt[2]-Ut[2],ot[0]=he[2]*Math.sin(U)+he[0]*Math.cos(U),ot[1]=he[1],ot[2]=he[2]*Math.cos(U)-he[0]*Math.sin(U),je[0]=ot[0]+Ut[0],je[1]=ot[1]+Ut[1],je[2]=ot[2]+Ut[2],je}function yt(je,rt,Ut,U){var he=[],ot=[];return he[0]=rt[0]-Ut[0],he[1]=rt[1]-Ut[1],he[2]=rt[2]-Ut[2],ot[0]=he[0]*Math.cos(U)-he[1]*Math.sin(U),ot[1]=he[0]*Math.sin(U)+he[1]*Math.cos(U),ot[2]=he[2],je[0]=ot[0]+Ut[0],je[1]=ot[1]+Ut[1],je[2]=ot[2]+Ut[2],je}function Le(je,rt){var Ut=je[0],U=je[1],he=je[2],ot=rt[0],de=rt[1],qt=rt[2],ln=Math.sqrt(Ut*Ut+U*U+he*he),mn=Math.sqrt(ot*ot+de*de+qt*qt),Dn=ln*mn,Yn=Dn&&Be(je,rt)/Dn;return Math.acos(Math.min(Math.max(Yn,-1),1))}function Zt(je){return je[0]=0,je[1]=0,je[2]=0,je}function yn(je){return"vec3("+je[0]+", "+je[1]+", "+je[2]+")"}function Tn(je,rt){return je[0]===rt[0]&&je[1]===rt[1]&&je[2]===rt[2]}function lr(je,rt){var Ut=je[0],U=je[1],he=je[2],ot=rt[0],de=rt[1],qt=rt[2];return Math.abs(Ut-ot)<=q.Ib*Math.max(1,Math.abs(Ut),Math.abs(ot))&&Math.abs(U-de)<=q.Ib*Math.max(1,Math.abs(U),Math.abs(de))&&Math.abs(he-qt)<=q.Ib*Math.max(1,Math.abs(he),Math.abs(qt))}var or=ae,Lt=null,en=null,hn=tt,Xn=null,an=fe,Pt=null,zt=function(){var je=G();return function(rt,Ut,U,he,ot,de){var qt,ln;for(Ut||(Ut=3),U||(U=0),he?ln=Math.min(he*Ut+U,rt.length):ln=rt.length,qt=U;qt<ln;qt+=Ut)je[0]=rt[qt],je[1]=rt[qt+1],je[2]=rt[qt+2],ot(je,je,de),rt[qt]=je[0],rt[qt+1]=je[1],rt[qt+2]=je[2];return rt}}()},98333:function(_t,W,D){"use strict";D.d(W,{AK:function(){return Be},Fv:function(){return Ae},I6:function(){return qe},IH:function(){return ce},JG:function(){return $},Ue:function(){return G},al:function(){return fe},bA:function(){return ee},d9:function(){return E},fF:function(){return De},fS:function(){return Ge},kE:function(){return wt},t7:function(){return ut},t8:function(){return se},we:function(){return gt}});var q=D(49685);function G(){var Lt=new q.WT(4);return q.WT!=Float32Array&&(Lt[0]=0,Lt[1]=0,Lt[2]=0,Lt[3]=0),Lt}function E(Lt){var en=new q.WT(4);return en[0]=Lt[0],en[1]=Lt[1],en[2]=Lt[2],en[3]=Lt[3],en}function fe(Lt,en,hn,Xn){var an=new q.WT(4);return an[0]=Lt,an[1]=en,an[2]=hn,an[3]=Xn,an}function $(Lt,en){return Lt[0]=en[0],Lt[1]=en[1],Lt[2]=en[2],Lt[3]=en[3],Lt}function se(Lt,en,hn,Xn,an){return Lt[0]=en,Lt[1]=hn,Lt[2]=Xn,Lt[3]=an,Lt}function ce(Lt,en,hn){return Lt[0]=en[0]+hn[0],Lt[1]=en[1]+hn[1],Lt[2]=en[2]+hn[2],Lt[3]=en[3]+hn[3],Lt}function ye(Lt,en,hn){return Lt[0]=en[0]-hn[0],Lt[1]=en[1]-hn[1],Lt[2]=en[2]-hn[2],Lt[3]=en[3]-hn[3],Lt}function ae(Lt,en,hn){return Lt[0]=en[0]*hn[0],Lt[1]=en[1]*hn[1],Lt[2]=en[2]*hn[2],Lt[3]=en[3]*hn[3],Lt}function He(Lt,en,hn){return Lt[0]=en[0]/hn[0],Lt[1]=en[1]/hn[1],Lt[2]=en[2]/hn[2],Lt[3]=en[3]/hn[3],Lt}function J(Lt,en){return Lt[0]=Math.ceil(en[0]),Lt[1]=Math.ceil(en[1]),Lt[2]=Math.ceil(en[2]),Lt[3]=Math.ceil(en[3]),Lt}function me(Lt,en){return Lt[0]=Math.floor(en[0]),Lt[1]=Math.floor(en[1]),Lt[2]=Math.floor(en[2]),Lt[3]=Math.floor(en[3]),Lt}function Oe(Lt,en,hn){return Lt[0]=Math.min(en[0],hn[0]),Lt[1]=Math.min(en[1],hn[1]),Lt[2]=Math.min(en[2],hn[2]),Lt[3]=Math.min(en[3],hn[3]),Lt}function Q(Lt,en,hn){return Lt[0]=Math.max(en[0],hn[0]),Lt[1]=Math.max(en[1],hn[1]),Lt[2]=Math.max(en[2],hn[2]),Lt[3]=Math.max(en[3],hn[3]),Lt}function le(Lt,en){return Lt[0]=Math.round(en[0]),Lt[1]=Math.round(en[1]),Lt[2]=Math.round(en[2]),Lt[3]=Math.round(en[3]),Lt}function ee(Lt,en,hn){return Lt[0]=en[0]*hn,Lt[1]=en[1]*hn,Lt[2]=en[2]*hn,Lt[3]=en[3]*hn,Lt}function be(Lt,en,hn,Xn){return Lt[0]=en[0]+hn[0]*Xn,Lt[1]=en[1]+hn[1]*Xn,Lt[2]=en[2]+hn[2]*Xn,Lt[3]=en[3]+hn[3]*Xn,Lt}function et(Lt,en){var hn=en[0]-Lt[0],Xn=en[1]-Lt[1],an=en[2]-Lt[2],Pt=en[3]-Lt[3];return Math.hypot(hn,Xn,an,Pt)}function tt(Lt,en){var hn=en[0]-Lt[0],Xn=en[1]-Lt[1],an=en[2]-Lt[2],Pt=en[3]-Lt[3];return hn*hn+Xn*Xn+an*an+Pt*Pt}function wt(Lt){var en=Lt[0],hn=Lt[1],Xn=Lt[2],an=Lt[3];return Math.hypot(en,hn,Xn,an)}function gt(Lt){var en=Lt[0],hn=Lt[1],Xn=Lt[2],an=Lt[3];return en*en+hn*hn+Xn*Xn+an*an}function ft(Lt,en){return Lt[0]=-en[0],Lt[1]=-en[1],Lt[2]=-en[2],Lt[3]=-en[3],Lt}function Pe(Lt,en){return Lt[0]=1/en[0],Lt[1]=1/en[1],Lt[2]=1/en[2],Lt[3]=1/en[3],Lt}function Ae(Lt,en){var hn=en[0],Xn=en[1],an=en[2],Pt=en[3],zt=hn*hn+Xn*Xn+an*an+Pt*Pt;return zt>0&&(zt=1/Math.sqrt(zt)),Lt[0]=hn*zt,Lt[1]=Xn*zt,Lt[2]=an*zt,Lt[3]=Pt*zt,Lt}function Be(Lt,en){return Lt[0]*en[0]+Lt[1]*en[1]+Lt[2]*en[2]+Lt[3]*en[3]}function Ze(Lt,en,hn,Xn){var an=hn[0]*Xn[1]-hn[1]*Xn[0],Pt=hn[0]*Xn[2]-hn[2]*Xn[0],zt=hn[0]*Xn[3]-hn[3]*Xn[0],je=hn[1]*Xn[2]-hn[2]*Xn[1],rt=hn[1]*Xn[3]-hn[3]*Xn[1],Ut=hn[2]*Xn[3]-hn[3]*Xn[2],U=en[0],he=en[1],ot=en[2],de=en[3];return Lt[0]=he*Ut-ot*rt+de*je,Lt[1]=-(U*Ut)+ot*zt-de*Pt,Lt[2]=U*rt-he*zt+de*an,Lt[3]=-(U*je)+he*Pt-ot*an,Lt}function ut(Lt,en,hn,Xn){var an=en[0],Pt=en[1],zt=en[2],je=en[3];return Lt[0]=an+Xn*(hn[0]-an),Lt[1]=Pt+Xn*(hn[1]-Pt),Lt[2]=zt+Xn*(hn[2]-zt),Lt[3]=je+Xn*(hn[3]-je),Lt}function tn(Lt,en){en=en||1;var hn,Xn,an,Pt,zt,je;do hn=glMatrix.RANDOM()*2-1,Xn=glMatrix.RANDOM()*2-1,zt=hn*hn+Xn*Xn;while(zt>=1);do an=glMatrix.RANDOM()*2-1,Pt=glMatrix.RANDOM()*2-1,je=an*an+Pt*Pt;while(je>=1);var rt=Math.sqrt((1-zt)/je);return Lt[0]=en*hn,Lt[1]=en*Xn,Lt[2]=en*an*rt,Lt[3]=en*Pt*rt,Lt}function De(Lt,en,hn){var Xn=en[0],an=en[1],Pt=en[2],zt=en[3];return Lt[0]=hn[0]*Xn+hn[4]*an+hn[8]*Pt+hn[12]*zt,Lt[1]=hn[1]*Xn+hn[5]*an+hn[9]*Pt+hn[13]*zt,Lt[2]=hn[2]*Xn+hn[6]*an+hn[10]*Pt+hn[14]*zt,Lt[3]=hn[3]*Xn+hn[7]*an+hn[11]*Pt+hn[15]*zt,Lt}function mt(Lt,en,hn){var Xn=en[0],an=en[1],Pt=en[2],zt=hn[0],je=hn[1],rt=hn[2],Ut=hn[3],U=Ut*Xn+je*Pt-rt*an,he=Ut*an+rt*Xn-zt*Pt,ot=Ut*Pt+zt*an-je*Xn,de=-zt*Xn-je*an-rt*Pt;return Lt[0]=U*Ut+de*-zt+he*-rt-ot*-je,Lt[1]=he*Ut+de*-je+ot*-zt-U*-rt,Lt[2]=ot*Ut+de*-rt+U*-je-he*-zt,Lt[3]=en[3],Lt}function Re(Lt){return Lt[0]=0,Lt[1]=0,Lt[2]=0,Lt[3]=0,Lt}function nt(Lt){return"vec4("+Lt[0]+", "+Lt[1]+", "+Lt[2]+", "+Lt[3]+")"}function qe(Lt,en){return Lt[0]===en[0]&&Lt[1]===en[1]&&Lt[2]===en[2]&&Lt[3]===en[3]}function Ge(Lt,en){var hn=Lt[0],Xn=Lt[1],an=Lt[2],Pt=Lt[3],zt=en[0],je=en[1],rt=en[2],Ut=en[3];return Math.abs(hn-zt)<=q.Ib*Math.max(1,Math.abs(hn),Math.abs(zt))&&Math.abs(Xn-je)<=q.Ib*Math.max(1,Math.abs(Xn),Math.abs(je))&&Math.abs(an-rt)<=q.Ib*Math.max(1,Math.abs(an),Math.abs(rt))&&Math.abs(Pt-Ut)<=q.Ib*Math.max(1,Math.abs(Pt),Math.abs(Ut))}var Dt=null,yt=null,Le=null,Zt=null,yn=null,Tn=null,lr=null,or=function(){var Lt=G();return function(en,hn,Xn,an,Pt,zt){var je,rt;for(hn||(hn=4),Xn||(Xn=0),an?rt=Math.min(an*hn+Xn,en.length):rt=en.length,je=Xn;je<rt;je+=hn)Lt[0]=en[je],Lt[1]=en[je+1],Lt[2]=en[je+2],Lt[3]=en[je+3],Pt(Lt,Lt,zt),en[je]=Lt[0],en[je+1]=Lt[1],en[je+2]=Lt[2],en[je+3]=Lt[3];return en}}()},50840:function(_t,W,D){var q;(function(G,E,fe,$){"use strict";var se=["","webkit","Moz","MS","ms","o"],ce=E.createElement("div"),ye="function",ae=Math.round,He=Math.abs,J=Date.now;function me(Ct,Gt,Un){return setTimeout(wt(Ct,Un),Gt)}function Oe(Ct,Gt,Un){return Array.isArray(Ct)?(Q(Ct,Un[Gt],Un),!0):!1}function Q(Ct,Gt,Un){var Fr;if(Ct)if(Ct.forEach)Ct.forEach(Gt,Un);else if(Ct.length!==$)for(Fr=0;Fr<Ct.length;)Gt.call(Un,Ct[Fr],Fr,Ct),Fr++;else for(Fr in Ct)Ct.hasOwnProperty(Fr)&&Gt.call(Un,Ct[Fr],Fr,Ct)}function le(Ct,Gt,Un){var Fr="DEPRECATED METHOD: "+Gt+`
`+Un+` AT 
`;return function(){var Oi=new Error("get-stack-trace"),Yi=Oi&&Oi.stack?Oi.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ea=G.console&&(G.console.warn||G.console.log);return ea&&ea.call(G.console,Fr,Yi),Ct.apply(this,arguments)}}var ee;typeof Object.assign!="function"?ee=function(Gt){if(Gt===$||Gt===null)throw new TypeError("Cannot convert undefined or null to object");for(var Un=Object(Gt),Fr=1;Fr<arguments.length;Fr++){var Oi=arguments[Fr];if(Oi!==$&&Oi!==null)for(var Yi in Oi)Oi.hasOwnProperty(Yi)&&(Un[Yi]=Oi[Yi])}return Un}:ee=Object.assign;var be=le(function(Gt,Un,Fr){for(var Oi=Object.keys(Un),Yi=0;Yi<Oi.length;)(!Fr||Fr&&Gt[Oi[Yi]]===$)&&(Gt[Oi[Yi]]=Un[Oi[Yi]]),Yi++;return Gt},"extend","Use `assign`."),et=le(function(Gt,Un){return be(Gt,Un,!0)},"merge","Use `assign`.");function tt(Ct,Gt,Un){var Fr=Gt.prototype,Oi;Oi=Ct.prototype=Object.create(Fr),Oi.constructor=Ct,Oi._super=Fr,Un&&ee(Oi,Un)}function wt(Ct,Gt){return function(){return Ct.apply(Gt,arguments)}}function gt(Ct,Gt){return typeof Ct==ye?Ct.apply(Gt&&Gt[0]||$,Gt):Ct}function ft(Ct,Gt){return Ct===$?Gt:Ct}function Pe(Ct,Gt,Un){Q(ut(Gt),function(Fr){Ct.addEventListener(Fr,Un,!1)})}function Ae(Ct,Gt,Un){Q(ut(Gt),function(Fr){Ct.removeEventListener(Fr,Un,!1)})}function Be(Ct,Gt){for(;Ct;){if(Ct==Gt)return!0;Ct=Ct.parentNode}return!1}function Ze(Ct,Gt){return Ct.indexOf(Gt)>-1}function ut(Ct){return Ct.trim().split(/\s+/g)}function tn(Ct,Gt,Un){if(Ct.indexOf&&!Un)return Ct.indexOf(Gt);for(var Fr=0;Fr<Ct.length;){if(Un&&Ct[Fr][Un]==Gt||!Un&&Ct[Fr]===Gt)return Fr;Fr++}return-1}function De(Ct){return Array.prototype.slice.call(Ct,0)}function mt(Ct,Gt,Un){for(var Fr=[],Oi=[],Yi=0;Yi<Ct.length;){var ea=Gt?Ct[Yi][Gt]:Ct[Yi];tn(Oi,ea)<0&&Fr.push(Ct[Yi]),Oi[Yi]=ea,Yi++}return Un&&(Gt?Fr=Fr.sort(function(As,Is){return As[Gt]>Is[Gt]}):Fr=Fr.sort()),Fr}function Re(Ct,Gt){for(var Un,Fr,Oi=Gt[0].toUpperCase()+Gt.slice(1),Yi=0;Yi<se.length;){if(Un=se[Yi],Fr=Un?Un+Oi:Gt,Fr in Ct)return Fr;Yi++}return $}var nt=1;function qe(){return nt++}function Ge(Ct){var Gt=Ct.ownerDocument||Ct;return Gt.defaultView||Gt.parentWindow||G}var Dt=/mobile|tablet|ip(ad|hone|od)|android/i,yt="ontouchstart"in G,Le=Re(G,"PointerEvent")!==$,Zt=yt&&Dt.test(navigator.userAgent),yn="touch",Tn="pen",lr="mouse",or="kinect",Lt=25,en=1,hn=2,Xn=4,an=8,Pt=1,zt=2,je=4,rt=8,Ut=16,U=zt|je,he=rt|Ut,ot=U|he,de=["x","y"],qt=["clientX","clientY"];function ln(Ct,Gt){var Un=this;this.manager=Ct,this.callback=Gt,this.element=Ct.element,this.target=Ct.options.inputTarget,this.domHandler=function(Fr){gt(Ct.options.enable,[Ct])&&Un.handler(Fr)},this.init()}ln.prototype={handler:function(){},init:function(){this.evEl&&Pe(this.element,this.evEl,this.domHandler),this.evTarget&&Pe(this.target,this.evTarget,this.domHandler),this.evWin&&Pe(Ge(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ae(this.element,this.evEl,this.domHandler),this.evTarget&&Ae(this.target,this.evTarget,this.domHandler),this.evWin&&Ae(Ge(this.element),this.evWin,this.domHandler)}};function mn(Ct){var Gt,Un=Ct.options.inputClass;return Un?Gt=Un:Le?Gt=Te:Zt?Gt=Qn:yt?Gt=Wr:Gt=wn,new Gt(Ct,Dn)}function Dn(Ct,Gt,Un){var Fr=Un.pointers.length,Oi=Un.changedPointers.length,Yi=Gt&en&&Fr-Oi===0,ea=Gt&(Xn|an)&&Fr-Oi===0;Un.isFirst=!!Yi,Un.isFinal=!!ea,Yi&&(Ct.session={}),Un.eventType=Gt,Yn(Ct,Un),Ct.emit("hammer.input",Un),Ct.recognize(Un),Ct.session.prevInput=Un}function Yn(Ct,Gt){var Un=Ct.session,Fr=Gt.pointers,Oi=Fr.length;Un.firstInput||(Un.firstInput=vt(Gt)),Oi>1&&!Un.firstMultiple?Un.firstMultiple=vt(Gt):Oi===1&&(Un.firstMultiple=!1);var Yi=Un.firstInput,ea=Un.firstMultiple,Ns=ea?ea.center:Yi.center,As=Gt.center=Nt(Fr);Gt.timeStamp=J(),Gt.deltaTime=Gt.timeStamp-Yi.timeStamp,Gt.angle=pt(Ns,As),Gt.distance=$n(Ns,As),Kn(Un,Gt),Gt.offsetDirection=In(Gt.deltaX,Gt.deltaY);var Is=An(Gt.deltaTime,Gt.deltaX,Gt.deltaY);Gt.overallVelocityX=Is.x,Gt.overallVelocityY=Is.y,Gt.overallVelocity=He(Is.x)>He(Is.y)?Is.x:Is.y,Gt.scale=ea?Fe(ea.pointers,Fr):1,Gt.rotation=ea?xe(ea.pointers,Fr):0,Gt.maxPointers=Un.prevInput?Gt.pointers.length>Un.prevInput.maxPointers?Gt.pointers.length:Un.prevInput.maxPointers:Gt.pointers.length,pn(Un,Gt);var al=Ct.element;Be(Gt.srcEvent.target,al)&&(al=Gt.srcEvent.target),Gt.target=al}function Kn(Ct,Gt){var Un=Gt.center,Fr=Ct.offsetDelta||{},Oi=Ct.prevDelta||{},Yi=Ct.prevInput||{};(Gt.eventType===en||Yi.eventType===Xn)&&(Oi=Ct.prevDelta={x:Yi.deltaX||0,y:Yi.deltaY||0},Fr=Ct.offsetDelta={x:Un.x,y:Un.y}),Gt.deltaX=Oi.x+(Un.x-Fr.x),Gt.deltaY=Oi.y+(Un.y-Fr.y)}function pn(Ct,Gt){var Un=Ct.lastInterval||Gt,Fr=Gt.timeStamp-Un.timeStamp,Oi,Yi,ea,Ns;if(Gt.eventType!=an&&(Fr>Lt||Un.velocity===$)){var As=Gt.deltaX-Un.deltaX,Is=Gt.deltaY-Un.deltaY,al=An(Fr,As,Is);Yi=al.x,ea=al.y,Oi=He(al.x)>He(al.y)?al.x:al.y,Ns=In(As,Is),Ct.lastInterval=Gt}else Oi=Un.velocity,Yi=Un.velocityX,ea=Un.velocityY,Ns=Un.direction;Gt.velocity=Oi,Gt.velocityX=Yi,Gt.velocityY=ea,Gt.direction=Ns}function vt(Ct){for(var Gt=[],Un=0;Un<Ct.pointers.length;)Gt[Un]={clientX:ae(Ct.pointers[Un].clientX),clientY:ae(Ct.pointers[Un].clientY)},Un++;return{timeStamp:J(),pointers:Gt,center:Nt(Gt),deltaX:Ct.deltaX,deltaY:Ct.deltaY}}function Nt(Ct){var Gt=Ct.length;if(Gt===1)return{x:ae(Ct[0].clientX),y:ae(Ct[0].clientY)};for(var Un=0,Fr=0,Oi=0;Oi<Gt;)Un+=Ct[Oi].clientX,Fr+=Ct[Oi].clientY,Oi++;return{x:ae(Un/Gt),y:ae(Fr/Gt)}}function An(Ct,Gt,Un){return{x:Gt/Ct||0,y:Un/Ct||0}}function In(Ct,Gt){return Ct===Gt?Pt:He(Ct)>=He(Gt)?Ct<0?zt:je:Gt<0?rt:Ut}function $n(Ct,Gt,Un){Un||(Un=de);var Fr=Gt[Un[0]]-Ct[Un[0]],Oi=Gt[Un[1]]-Ct[Un[1]];return Math.sqrt(Fr*Fr+Oi*Oi)}function pt(Ct,Gt,Un){Un||(Un=de);var Fr=Gt[Un[0]]-Ct[Un[0]],Oi=Gt[Un[1]]-Ct[Un[1]];return Math.atan2(Oi,Fr)*180/Math.PI}function xe(Ct,Gt){return pt(Gt[1],Gt[0],qt)+pt(Ct[1],Ct[0],qt)}function Fe(Ct,Gt){return $n(Gt[0],Gt[1],qt)/$n(Ct[0],Ct[1],qt)}var st={mousedown:en,mousemove:hn,mouseup:Xn},It="mousedown",Mt="mousemove mouseup";function wn(){this.evEl=It,this.evWin=Mt,this.pressed=!1,ln.apply(this,arguments)}tt(wn,ln,{handler:function(Gt){var Un=st[Gt.type];Un&en&&Gt.button===0&&(this.pressed=!0),Un&hn&&Gt.which!==1&&(Un=Xn),this.pressed&&(Un&Xn&&(this.pressed=!1),this.callback(this.manager,Un,{pointers:[Gt],changedPointers:[Gt],pointerType:lr,srcEvent:Gt}))}});var rr={pointerdown:en,pointermove:hn,pointerup:Xn,pointercancel:an,pointerout:an},Er={2:yn,3:Tn,4:lr,5:or},qn="pointerdown",Me="pointermove pointerup pointercancel";G.MSPointerEvent&&!G.PointerEvent&&(qn="MSPointerDown",Me="MSPointerMove MSPointerUp MSPointerCancel");function Te(){this.evEl=qn,this.evWin=Me,ln.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}tt(Te,ln,{handler:function(Gt){var Un=this.store,Fr=!1,Oi=Gt.type.toLowerCase().replace("ms",""),Yi=rr[Oi],ea=Er[Gt.pointerType]||Gt.pointerType,Ns=ea==yn,As=tn(Un,Gt.pointerId,"pointerId");Yi&en&&(Gt.button===0||Ns)?As<0&&(Un.push(Gt),As=Un.length-1):Yi&(Xn|an)&&(Fr=!0),!(As<0)&&(Un[As]=Gt,this.callback(this.manager,Yi,{pointers:Un,changedPointers:[Gt],pointerType:ea,srcEvent:Gt}),Fr&&Un.splice(As,1))}});var ke={touchstart:en,touchmove:hn,touchend:Xn,touchcancel:an},at="touchstart",At="touchstart touchmove touchend touchcancel";function nn(){this.evTarget=at,this.evWin=At,this.started=!1,ln.apply(this,arguments)}tt(nn,ln,{handler:function(Gt){var Un=ke[Gt.type];if(Un===en&&(this.started=!0),!!this.started){var Fr=cn.call(this,Gt,Un);Un&(Xn|an)&&Fr[0].length-Fr[1].length===0&&(this.started=!1),this.callback(this.manager,Un,{pointers:Fr[0],changedPointers:Fr[1],pointerType:yn,srcEvent:Gt})}}});function cn(Ct,Gt){var Un=De(Ct.touches),Fr=De(Ct.changedTouches);return Gt&(Xn|an)&&(Un=mt(Un.concat(Fr),"identifier",!0)),[Un,Fr]}var Et={touchstart:en,touchmove:hn,touchend:Xn,touchcancel:an},Qt="touchstart touchmove touchend touchcancel";function Qn(){this.evTarget=Qt,this.targetIds={},ln.apply(this,arguments)}tt(Qn,ln,{handler:function(Gt){var Un=Et[Gt.type],Fr=Sr.call(this,Gt,Un);Fr&&this.callback(this.manager,Un,{pointers:Fr[0],changedPointers:Fr[1],pointerType:yn,srcEvent:Gt})}});function Sr(Ct,Gt){var Un=De(Ct.touches),Fr=this.targetIds;if(Gt&(en|hn)&&Un.length===1)return Fr[Un[0].identifier]=!0,[Un,Un];var Oi,Yi,ea=De(Ct.changedTouches),Ns=[],As=this.target;if(Yi=Un.filter(function(Is){return Be(Is.target,As)}),Gt===en)for(Oi=0;Oi<Yi.length;)Fr[Yi[Oi].identifier]=!0,Oi++;for(Oi=0;Oi<ea.length;)Fr[ea[Oi].identifier]&&Ns.push(ea[Oi]),Gt&(Xn|an)&&delete Fr[ea[Oi].identifier],Oi++;if(Ns.length)return[mt(Yi.concat(Ns),"identifier",!0),Ns]}var Zr=2500,yr=25;function Wr(){ln.apply(this,arguments);var Ct=wt(this.handler,this);this.touch=new Qn(this.manager,Ct),this.mouse=new wn(this.manager,Ct),this.primaryTouch=null,this.lastTouches=[]}tt(Wr,ln,{handler:function(Gt,Un,Fr){var Oi=Fr.pointerType==yn,Yi=Fr.pointerType==lr;if(!(Yi&&Fr.sourceCapabilities&&Fr.sourceCapabilities.firesTouchEvents)){if(Oi)Ei.call(this,Un,Fr);else if(Yi&&wr.call(this,Fr))return;this.callback(Gt,Un,Fr)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ei(Ct,Gt){Ct&en?(this.primaryTouch=Gt.changedPointers[0].identifier,yi.call(this,Gt)):Ct&(Xn|an)&&yi.call(this,Gt)}function yi(Ct){var Gt=Ct.changedPointers[0];if(Gt.identifier===this.primaryTouch){var Un={x:Gt.clientX,y:Gt.clientY};this.lastTouches.push(Un);var Fr=this.lastTouches,Oi=function(){var Yi=Fr.indexOf(Un);Yi>-1&&Fr.splice(Yi,1)};setTimeout(Oi,Zr)}}function wr(Ct){for(var Gt=Ct.srcEvent.clientX,Un=Ct.srcEvent.clientY,Fr=0;Fr<this.lastTouches.length;Fr++){var Oi=this.lastTouches[Fr],Yi=Math.abs(Gt-Oi.x),ea=Math.abs(Un-Oi.y);if(Yi<=yr&&ea<=yr)return!0}return!1}var Ai=Re(ce.style,"touchAction"),pi=Ai!==$,_i="compute",Bo="auto",Si="manipulation",Ci="none",ho="pan-x",go="pan-y",jo=Wt();function Ke(Ct,Gt){this.manager=Ct,this.set(Gt)}Ke.prototype={set:function(Ct){Ct==_i&&(Ct=this.compute()),pi&&this.manager.element.style&&jo[Ct]&&(this.manager.element.style[Ai]=Ct),this.actions=Ct.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ct=[];return Q(this.manager.recognizers,function(Gt){gt(Gt.options.enable,[Gt])&&(Ct=Ct.concat(Gt.getTouchAction()))}),dt(Ct.join(" "))},preventDefaults:function(Ct){var Gt=Ct.srcEvent,Un=Ct.offsetDirection;if(this.manager.session.prevented){Gt.preventDefault();return}var Fr=this.actions,Oi=Ze(Fr,Ci)&&!jo[Ci],Yi=Ze(Fr,go)&&!jo[go],ea=Ze(Fr,ho)&&!jo[ho];if(Oi){var Ns=Ct.pointers.length===1,As=Ct.distance<2,Is=Ct.deltaTime<250;if(Ns&&As&&Is)return}if(!(ea&&Yi)&&(Oi||Yi&&Un&U||ea&&Un&he))return this.preventSrc(Gt)},preventSrc:function(Ct){this.manager.session.prevented=!0,Ct.preventDefault()}};function dt(Ct){if(Ze(Ct,Ci))return Ci;var Gt=Ze(Ct,ho),Un=Ze(Ct,go);return Gt&&Un?Ci:Gt||Un?Gt?ho:go:Ze(Ct,Si)?Si:Bo}function Wt(){if(!pi)return!1;var Ct={},Gt=G.CSS&&G.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Un){Ct[Un]=Gt?G.CSS.supports("touch-action",Un):!0}),Ct}var dn=1,Fn=2,Bn=4,_n=8,Cn=_n,pr=16,hr=32;function ni(Ct){this.options=ee({},this.defaults,Ct||{}),this.id=qe(),this.manager=null,this.options.enable=ft(this.options.enable,!0),this.state=dn,this.simultaneous={},this.requireFail=[]}ni.prototype={defaults:{},set:function(Ct){return ee(this.options,Ct),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ct){if(Oe(Ct,"recognizeWith",this))return this;var Gt=this.simultaneous;return Ct=ri(Ct,this),Gt[Ct.id]||(Gt[Ct.id]=Ct,Ct.recognizeWith(this)),this},dropRecognizeWith:function(Ct){return Oe(Ct,"dropRecognizeWith",this)?this:(Ct=ri(Ct,this),delete this.simultaneous[Ct.id],this)},requireFailure:function(Ct){if(Oe(Ct,"requireFailure",this))return this;var Gt=this.requireFail;return Ct=ri(Ct,this),tn(Gt,Ct)===-1&&(Gt.push(Ct),Ct.requireFailure(this)),this},dropRequireFailure:function(Ct){if(Oe(Ct,"dropRequireFailure",this))return this;Ct=ri(Ct,this);var Gt=tn(this.requireFail,Ct);return Gt>-1&&this.requireFail.splice(Gt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ct){return!!this.simultaneous[Ct.id]},emit:function(Ct){var Gt=this,Un=this.state;function Fr(Oi){Gt.manager.emit(Oi,Ct)}Un<_n&&Fr(Gt.options.event+Wi(Un)),Fr(Gt.options.event),Ct.additionalEvent&&Fr(Ct.additionalEvent),Un>=_n&&Fr(Gt.options.event+Wi(Un))},tryEmit:function(Ct){if(this.canEmit())return this.emit(Ct);this.state=hr},canEmit:function(){for(var Ct=0;Ct<this.requireFail.length;){if(!(this.requireFail[Ct].state&(hr|dn)))return!1;Ct++}return!0},recognize:function(Ct){var Gt=ee({},Ct);if(!gt(this.options.enable,[this,Gt])){this.reset(),this.state=hr;return}this.state&(Cn|pr|hr)&&(this.state=dn),this.state=this.process(Gt),this.state&(Fn|Bn|_n|pr)&&this.tryEmit(Gt)},process:function(Ct){},getTouchAction:function(){},reset:function(){}};function Wi(Ct){return Ct&pr?"cancel":Ct&_n?"end":Ct&Bn?"move":Ct&Fn?"start":""}function Qi(Ct){return Ct==Ut?"down":Ct==rt?"up":Ct==zt?"left":Ct==je?"right":""}function ri(Ct,Gt){var Un=Gt.manager;return Un?Un.get(Ct):Ct}function Gi(){ni.apply(this,arguments)}tt(Gi,ni,{defaults:{pointers:1},attrTest:function(Ct){var Gt=this.options.pointers;return Gt===0||Ct.pointers.length===Gt},process:function(Ct){var Gt=this.state,Un=Ct.eventType,Fr=Gt&(Fn|Bn),Oi=this.attrTest(Ct);return Fr&&(Un&an||!Oi)?Gt|pr:Fr||Oi?Un&Xn?Gt|_n:Gt&Fn?Gt|Bn:Fn:hr}});function zi(){Gi.apply(this,arguments),this.pX=null,this.pY=null}tt(zi,Gi,{defaults:{event:"pan",threshold:10,pointers:1,direction:ot},getTouchAction:function(){var Ct=this.options.direction,Gt=[];return Ct&U&&Gt.push(go),Ct&he&&Gt.push(ho),Gt},directionTest:function(Ct){var Gt=this.options,Un=!0,Fr=Ct.distance,Oi=Ct.direction,Yi=Ct.deltaX,ea=Ct.deltaY;return Oi&Gt.direction||(Gt.direction&U?(Oi=Yi===0?Pt:Yi<0?zt:je,Un=Yi!=this.pX,Fr=Math.abs(Ct.deltaX)):(Oi=ea===0?Pt:ea<0?rt:Ut,Un=ea!=this.pY,Fr=Math.abs(Ct.deltaY))),Ct.direction=Oi,Un&&Fr>Gt.threshold&&Oi&Gt.direction},attrTest:function(Ct){return Gi.prototype.attrTest.call(this,Ct)&&(this.state&Fn||!(this.state&Fn)&&this.directionTest(Ct))},emit:function(Ct){this.pX=Ct.deltaX,this.pY=Ct.deltaY;var Gt=Qi(Ct.direction);Gt&&(Ct.additionalEvent=this.options.event+Gt),this._super.emit.call(this,Ct)}});function qr(){Gi.apply(this,arguments)}tt(qr,Gi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ci]},attrTest:function(Ct){return this._super.attrTest.call(this,Ct)&&(Math.abs(Ct.scale-1)>this.options.threshold||this.state&Fn)},emit:function(Ct){if(Ct.scale!==1){var Gt=Ct.scale<1?"in":"out";Ct.additionalEvent=this.options.event+Gt}this._super.emit.call(this,Ct)}});function To(){ni.apply(this,arguments),this._timer=null,this._input=null}tt(To,ni,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Bo]},process:function(Ct){var Gt=this.options,Un=Ct.pointers.length===Gt.pointers,Fr=Ct.distance<Gt.threshold,Oi=Ct.deltaTime>Gt.time;if(this._input=Ct,!Fr||!Un||Ct.eventType&(Xn|an)&&!Oi)this.reset();else if(Ct.eventType&en)this.reset(),this._timer=me(function(){this.state=Cn,this.tryEmit()},Gt.time,this);else if(Ct.eventType&Xn)return Cn;return hr},reset:function(){clearTimeout(this._timer)},emit:function(Ct){this.state===Cn&&(Ct&&Ct.eventType&Xn?this.manager.emit(this.options.event+"up",Ct):(this._input.timeStamp=J(),this.manager.emit(this.options.event,this._input)))}});function di(){Gi.apply(this,arguments)}tt(di,Gi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ci]},attrTest:function(Ct){return this._super.attrTest.call(this,Ct)&&(Math.abs(Ct.rotation)>this.options.threshold||this.state&Fn)}});function So(){Gi.apply(this,arguments)}tt(So,Gi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:U|he,pointers:1},getTouchAction:function(){return zi.prototype.getTouchAction.call(this)},attrTest:function(Ct){var Gt=this.options.direction,Un;return Gt&(U|he)?Un=Ct.overallVelocity:Gt&U?Un=Ct.overallVelocityX:Gt&he&&(Un=Ct.overallVelocityY),this._super.attrTest.call(this,Ct)&&Gt&Ct.offsetDirection&&Ct.distance>this.options.threshold&&Ct.maxPointers==this.options.pointers&&He(Un)>this.options.velocity&&Ct.eventType&Xn},emit:function(Ct){var Gt=Qi(Ct.offsetDirection);Gt&&this.manager.emit(this.options.event+Gt,Ct),this.manager.emit(this.options.event,Ct)}});function Zi(){ni.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}tt(Zi,ni,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Si]},process:function(Ct){var Gt=this.options,Un=Ct.pointers.length===Gt.pointers,Fr=Ct.distance<Gt.threshold,Oi=Ct.deltaTime<Gt.time;if(this.reset(),Ct.eventType&en&&this.count===0)return this.failTimeout();if(Fr&&Oi&&Un){if(Ct.eventType!=Xn)return this.failTimeout();var Yi=this.pTime?Ct.timeStamp-this.pTime<Gt.interval:!0,ea=!this.pCenter||$n(this.pCenter,Ct.center)<Gt.posThreshold;this.pTime=Ct.timeStamp,this.pCenter=Ct.center,!ea||!Yi?this.count=1:this.count+=1,this._input=Ct;var Ns=this.count%Gt.taps;if(Ns===0)return this.hasRequireFailures()?(this._timer=me(function(){this.state=Cn,this.tryEmit()},Gt.interval,this),Fn):Cn}return hr},failTimeout:function(){return this._timer=me(function(){this.state=hr},this.options.interval,this),hr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Cn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function io(Ct,Gt){return Gt=Gt||{},Gt.recognizers=ft(Gt.recognizers,io.defaults.preset),new ya(Ct,Gt)}io.VERSION="2.0.7",io.defaults={domEvents:!1,touchAction:_i,enable:!0,inputTarget:null,inputClass:null,preset:[[di,{enable:!1}],[qr,{enable:!1},["rotate"]],[So,{direction:U}],[zi,{direction:U},["swipe"]],[Zi],[Zi,{event:"doubletap",taps:2},["tap"]],[To]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Mo=1,gs=2;function ya(Ct,Gt){this.options=ee({},io.defaults,Gt||{}),this.options.inputTarget=this.options.inputTarget||Ct,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Ct,this.input=mn(this),this.touchAction=new Ke(this,this.options.touchAction),ia(this,!0),Q(this.options.recognizers,function(Un){var Fr=this.add(new Un[0](Un[1]));Un[2]&&Fr.recognizeWith(Un[2]),Un[3]&&Fr.requireFailure(Un[3])},this)}ya.prototype={set:function(Ct){return ee(this.options,Ct),Ct.touchAction&&this.touchAction.update(),Ct.inputTarget&&(this.input.destroy(),this.input.target=Ct.inputTarget,this.input.init()),this},stop:function(Ct){this.session.stopped=Ct?gs:Mo},recognize:function(Ct){var Gt=this.session;if(!Gt.stopped){this.touchAction.preventDefaults(Ct);var Un,Fr=this.recognizers,Oi=Gt.curRecognizer;(!Oi||Oi&&Oi.state&Cn)&&(Oi=Gt.curRecognizer=null);for(var Yi=0;Yi<Fr.length;)Un=Fr[Yi],Gt.stopped!==gs&&(!Oi||Un==Oi||Un.canRecognizeWith(Oi))?Un.recognize(Ct):Un.reset(),!Oi&&Un.state&(Fn|Bn|_n)&&(Oi=Gt.curRecognizer=Un),Yi++}},get:function(Ct){if(Ct instanceof ni)return Ct;for(var Gt=this.recognizers,Un=0;Un<Gt.length;Un++)if(Gt[Un].options.event==Ct)return Gt[Un];return null},add:function(Ct){if(Oe(Ct,"add",this))return this;var Gt=this.get(Ct.options.event);return Gt&&this.remove(Gt),this.recognizers.push(Ct),Ct.manager=this,this.touchAction.update(),Ct},remove:function(Ct){if(Oe(Ct,"remove",this))return this;if(Ct=this.get(Ct),Ct){var Gt=this.recognizers,Un=tn(Gt,Ct);Un!==-1&&(Gt.splice(Un,1),this.touchAction.update())}return this},on:function(Ct,Gt){if(Ct!==$&&Gt!==$){var Un=this.handlers;return Q(ut(Ct),function(Fr){Un[Fr]=Un[Fr]||[],Un[Fr].push(Gt)}),this}},off:function(Ct,Gt){if(Ct!==$){var Un=this.handlers;return Q(ut(Ct),function(Fr){Gt?Un[Fr]&&Un[Fr].splice(tn(Un[Fr],Gt),1):delete Un[Fr]}),this}},emit:function(Ct,Gt){this.options.domEvents&&ps(Ct,Gt);var Un=this.handlers[Ct]&&this.handlers[Ct].slice();if(!(!Un||!Un.length)){Gt.type=Ct,Gt.preventDefault=function(){Gt.srcEvent.preventDefault()};for(var Fr=0;Fr<Un.length;)Un[Fr](Gt),Fr++}},destroy:function(){this.element&&ia(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ia(Ct,Gt){var Un=Ct.element;if(Un.style){var Fr;Q(Ct.options.cssProps,function(Oi,Yi){Fr=Re(Un.style,Yi),Gt?(Ct.oldCssProps[Fr]=Un.style[Fr],Un.style[Fr]=Oi):Un.style[Fr]=Ct.oldCssProps[Fr]||""}),Gt||(Ct.oldCssProps={})}}function ps(Ct,Gt){var Un=E.createEvent("Event");Un.initEvent(Ct,!0,!0),Un.gesture=Gt,Gt.target.dispatchEvent(Un)}ee(io,{INPUT_START:en,INPUT_MOVE:hn,INPUT_END:Xn,INPUT_CANCEL:an,STATE_POSSIBLE:dn,STATE_BEGAN:Fn,STATE_CHANGED:Bn,STATE_ENDED:_n,STATE_RECOGNIZED:Cn,STATE_CANCELLED:pr,STATE_FAILED:hr,DIRECTION_NONE:Pt,DIRECTION_LEFT:zt,DIRECTION_RIGHT:je,DIRECTION_UP:rt,DIRECTION_DOWN:Ut,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:he,DIRECTION_ALL:ot,Manager:ya,Input:ln,TouchAction:Ke,TouchInput:Qn,MouseInput:wn,PointerEventInput:Te,TouchMouseInput:Wr,SingleTouchInput:nn,Recognizer:ni,AttrRecognizer:Gi,Tap:Zi,Pan:zi,Swipe:So,Pinch:qr,Rotate:di,Press:To,on:Pe,off:Ae,each:Q,merge:et,extend:be,assign:ee,inherit:tt,bindFn:wt,prefixed:Re});var os=typeof G!="undefined"?G:typeof self!="undefined"?self:{};os.Hammer=io,q=function(){return io}.call(W,D,W,_t),q!==$&&(_t.exports=q)})(window,document,"Hammer")},47443:function(_t,W,D){var q=D(42118);function G(E,fe){var $=E==null?0:E.length;return!!$&&q(E,fe,0)>-1}_t.exports=G},1196:function(_t){function W(D,q,G){for(var E=-1,fe=D==null?0:D.length;++E<fe;)if(G(q,D[E]))return!0;return!1}_t.exports=W},29750:function(_t){function W(D,q,G){return D===D&&(G!==void 0&&(D=D<=G?D:G),q!==void 0&&(D=D>=q?D:q)),D}_t.exports=W},41848:function(_t){function W(D,q,G,E){for(var fe=D.length,$=G+(E?1:-1);E?$--:++$<fe;)if(q(D[$],$,D))return $;return-1}_t.exports=W},42118:function(_t,W,D){var q=D(41848),G=D(62722),E=D(39375);function fe($,se,ce){return se===se?E($,se,ce):q($,G,ce)}_t.exports=fe},74221:function(_t){function W(D,q,G,E){for(var fe=G-1,$=D.length;++fe<$;)if(E(D[fe],q))return fe;return-1}_t.exports=W},62722:function(_t){function W(D){return D!==D}_t.exports=W},65464:function(_t,W,D){var q=D(29932),G=D(42118),E=D(74221),fe=D(51717),$=D(6450),se=Array.prototype,ce=se.splice;function ye(ae,He,J,me){var Oe=me?E:G,Q=-1,le=He.length,ee=ae;for(ae===He&&(He=$(He)),J&&(ee=q(ae,fe(J)));++Q<le;)for(var be=0,et=He[Q],tt=J?J(et):et;(be=Oe(ee,tt,be,me))>-1;)ee!==ae&&ce.call(ee,be,1),ce.call(ae,be,1);return ae}_t.exports=ye},45652:function(_t,W,D){var q=D(88668),G=D(47443),E=D(1196),fe=D(74757),$=D(23593),se=D(21814),ce=200;function ye(ae,He,J){var me=-1,Oe=G,Q=ae.length,le=!0,ee=[],be=ee;if(J)le=!1,Oe=E;else if(Q>=ce){var et=He?null:$(ae);if(et)return se(et);le=!1,Oe=fe,be=new q}else be=He?[]:ee;e:for(;++me<Q;){var tt=ae[me],wt=He?He(tt):tt;if(tt=J||tt!==0?tt:0,le&&wt===wt){for(var gt=be.length;gt--;)if(be[gt]===wt)continue e;He&&be.push(wt),ee.push(tt)}else Oe(be,wt,J)||(be!==ee&&be.push(wt),ee.push(tt))}return ee}_t.exports=ye},23593:function(_t,W,D){var q=D(58525),G=D(28117),E=D(21814),fe=1/0,$=q&&1/E(new q([,-0]))[1]==fe?function(se){return new q(se)}:G;_t.exports=$},39375:function(_t){function W(D,q,G){for(var E=G-1,fe=D.length;++E<fe;)if(D[E]===q)return E;return-1}_t.exports=W},74691:function(_t,W,D){var q=D(29750),G=D(14841);function E(fe,$,se){return se===void 0&&(se=$,$=void 0),se!==void 0&&(se=G(se),se=se===se?se:0),$!==void 0&&($=G($),$=$===$?$:0),q(G(fe),$,se)}_t.exports=E},51584:function(_t,W,D){var q=D(44239),G=D(37005),E="[object Boolean]";function fe($){return $===!0||$===!1||G($)&&q($)==E}_t.exports=fe},18446:function(_t,W,D){var q=D(90939);function G(E,fe){return q(E,fe)}_t.exports=G},14293:function(_t){function W(D){return D==null}_t.exports=W},81763:function(_t,W,D){var q=D(44239),G=D(37005),E="[object Number]";function fe($){return typeof $=="number"||G($)&&q($)==E}_t.exports=fe},52353:function(_t){function W(D){return D===void 0}_t.exports=W},30236:function(_t,W,D){var q=D(42980),G=D(21463),E=G(function(fe,$,se,ce){q(fe,$,se,ce)});_t.exports=E},28117:function(_t){function W(){}_t.exports=W},97019:function(_t,W,D){var q=D(5976),G=D(45604),E=q(G);_t.exports=E},45604:function(_t,W,D){var q=D(65464);function G(E,fe){return E&&E.length&&fe&&fe.length?q(E,fe):E}_t.exports=G},44908:function(_t,W,D){var q=D(45652);function G(E){return E&&E.length?q(E):[]}_t.exports=G},6158:function(_t){(function(W,D){_t.exports=D()})(this,function(){"use strict";var W,D,q;function G(E,fe){if(!W)W=fe;else if(!D)D=fe;else{var $="var sharedChunk = {}; ("+W+")(sharedChunk); ("+D+")(sharedChunk);",se={};W(se),q=fe(se),typeof window!="undefined"&&(q.workerUrl=window.URL.createObjectURL(new Blob([$],{type:"text/javascript"})))}}return G(["exports"],function(E){"use strict";function fe(u,d){return u(d={exports:{}},d.exports),d.exports}var $=se;function se(u,d,g,A){this.cx=3*u,this.bx=3*(g-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(A-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=A,this.p2x=g,this.p2y=A}se.prototype.sampleCurveX=function(u){return((this.ax*u+this.bx)*u+this.cx)*u},se.prototype.sampleCurveY=function(u){return((this.ay*u+this.by)*u+this.cy)*u},se.prototype.sampleCurveDerivativeX=function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},se.prototype.solveCurveX=function(u,d){var g,A,P,F,j;for(d===void 0&&(d=1e-6),P=u,j=0;j<8;j++){if(F=this.sampleCurveX(P)-u,Math.abs(F)<d)return P;var te=this.sampleCurveDerivativeX(P);if(Math.abs(te)<1e-6)break;P-=F/te}if((P=u)<(g=0))return g;if(P>(A=1))return A;for(;g<A;){if(F=this.sampleCurveX(P),Math.abs(F-u)<d)return P;u>F?g=P:A=P,P=.5*(A-g)+g}return P},se.prototype.solve=function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))};var ce=ye;function ye(u,d){this.x=u,this.y=d}ye.prototype={clone:function(){return new ye(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,d){return this.clone()._rotateAround(u,d)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var d=u.x-this.x,g=u.y-this.y;return d*d+g*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,d){return Math.atan2(this.x*d-this.y*u,this.x*u+this.y*d)},_matMult:function(u){var d=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=d,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var d=Math.cos(u),g=Math.sin(u),A=g*this.x+d*this.y;return this.x=d*this.x-g*this.y,this.y=A,this},_rotateAround:function(u,d){var g=Math.cos(u),A=Math.sin(u),P=d.y+A*(this.x-d.x)+g*(this.y-d.y);return this.x=d.x+g*(this.x-d.x)-A*(this.y-d.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ye.convert=function(u){return u instanceof ye?u:Array.isArray(u)?new ye(u[0],u[1]):u};var ae=typeof self!="undefined"?self:{},He=Math.pow(2,53)-1;function J(u,d,g,A){var P=new $(u,d,g,A);return function(F){return P.solve(F)}}var me=J(.25,.1,.25,1);function Oe(u,d,g){return Math.min(g,Math.max(d,u))}function Q(u,d,g){var A=g-d,P=((u-d)%A+A)%A+d;return P===d?g:P}function le(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var F=P[A];for(var j in F)u[j]=F[j]}return u}var ee=1;function be(){return ee++}function et(){return function u(d){return d?(d^16*Math.random()>>d/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()}function tt(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)}function wt(u,d){u.forEach(function(g){d[g]&&(d[g]=d[g].bind(d))})}function gt(u,d){return u.indexOf(d,u.length-d.length)!==-1}function ft(u,d,g){var A={};for(var P in u)A[P]=d.call(g||this,u[P],P,u);return A}function Pe(u,d,g){var A={};for(var P in u)d.call(g||this,u[P],P,u)&&(A[P]=u[P]);return A}function Ae(u){return Array.isArray(u)?u.map(Ae):typeof u=="object"&&u?ft(u,Ae):u}var Be={};function Ze(u){Be[u]||(typeof console!="undefined"&&console.warn(u),Be[u]=!0)}function ut(u,d,g){return(g.y-u.y)*(d.x-u.x)>(d.y-u.y)*(g.x-u.x)}function tn(u){for(var d=0,g=0,A=u.length,P=A-1,F=void 0,j=void 0;g<A;P=g++)d+=((j=u[P]).x-(F=u[g]).x)*(F.y+j.y);return d}function De(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function mt(u){var d={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(A,P,F,j){var te=F||j;return d[P]=!te||te.toLowerCase(),""}),d["max-age"]){var g=parseInt(d["max-age"],10);isNaN(g)?delete d["max-age"]:d["max-age"]=g}return d}var Re=null;function nt(u){if(Re==null){var d=u.navigator?u.navigator.userAgent:null;Re=!!u.safari||!(!d||!(/\b(iPad|iPhone|iPod)\b/.test(d)||d.match("Safari")&&!d.match("Chrome")))}return Re}function qe(u){try{var d=ae[u];return d.setItem("_mapbox_test_",1),d.removeItem("_mapbox_test_"),!0}catch(g){return!1}}var Ge,Dt,yt,Le,Zt=ae.performance&&ae.performance.now?ae.performance.now.bind(ae.performance):Date.now.bind(Date),yn=ae.requestAnimationFrame||ae.mozRequestAnimationFrame||ae.webkitRequestAnimationFrame||ae.msRequestAnimationFrame,Tn=ae.cancelAnimationFrame||ae.mozCancelAnimationFrame||ae.webkitCancelAnimationFrame||ae.msCancelAnimationFrame,lr={now:Zt,frame:function(u){var d=yn(u);return{cancel:function(){return Tn(d)}}},getImageData:function(u,d){d===void 0&&(d=0);var g=ae.document.createElement("canvas"),A=g.getContext("2d");if(!A)throw new Error("failed to create canvas 2d context");return g.width=u.width,g.height=u.height,A.drawImage(u,0,0,u.width,u.height),A.getImageData(-d,-d,u.width+2*d,u.height+2*d)},resolveURL:function(u){return Ge||(Ge=ae.document.createElement("a")),Ge.href=u,Ge.href},hardwareConcurrency:ae.navigator&&ae.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ae.devicePixelRatio},get prefersReducedMotion(){return!!ae.matchMedia&&(Dt==null&&(Dt=ae.matchMedia("(prefers-reduced-motion: reduce)")),Dt.matches)}},or={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Lt={supported:!1,testSupport:function(u){!en&&Le&&(hn?Xn(u):yt=u)}},en=!1,hn=!1;function Xn(u){var d=u.createTexture();u.bindTexture(u.TEXTURE_2D,d);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Le),u.isContextLost())return;Lt.supported=!0}catch(g){}u.deleteTexture(d),en=!0}ae.document&&((Le=ae.document.createElement("img")).onload=function(){yt&&Xn(yt),yt=null,hn=!0},Le.onerror=function(){en=!0,yt=null},Le.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var an="01",Pt=function(u,d){this._transformRequestFn=u,this._customAccessToken=d,this._createSkuToken()};function zt(u){return u.indexOf("mapbox:")===0}Pt.prototype._createSkuToken=function(){var u=function(){for(var d="",g=0;g<10;g++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",an,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=u.token,this._skuTokenExpiresAt=u.tokenExpiresAt},Pt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Pt.prototype.transformRequest=function(u,d){return this._transformRequestFn&&this._transformRequestFn(u,d)||{url:u}},Pt.prototype.normalizeStyleURL=function(u,d){if(!zt(u))return u;var g=U(u);return g.path="/styles/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},Pt.prototype.normalizeGlyphsURL=function(u,d){if(!zt(u))return u;var g=U(u);return g.path="/fonts/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},Pt.prototype.normalizeSourceURL=function(u,d){if(!zt(u))return u;var g=U(u);return g.path="/v4/"+g.authority+".json",g.params.push("secure"),this._makeAPIURL(g,this._customAccessToken||d)},Pt.prototype.normalizeSpriteURL=function(u,d,g,A){var P=U(u);return zt(u)?(P.path="/styles/v1"+P.path+"/sprite"+d+g,this._makeAPIURL(P,this._customAccessToken||A)):(P.path+=""+d+g,he(P))},Pt.prototype.normalizeTileURL=function(u,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),u&&!zt(u))return u;var g=U(u);g.path=g.path.replace(/(\.(png|jpg)\d*)(?=$)/,(lr.devicePixelRatio>=2||d===512?"@2x":"")+(Lt.supported?".webp":"$1")),g.path=g.path.replace(/^.+\/v4\//,"/"),g.path="/v4"+g.path;var A=this._customAccessToken||function(P){for(var F=0,j=P;F<j.length;F+=1){var te=j[F].match(/^access_token=(.*)$/);if(te)return te[1]}return null}(g.params)||or.ACCESS_TOKEN;return or.REQUIRE_ACCESS_TOKEN&&A&&this._skuToken&&g.params.push("sku="+this._skuToken),this._makeAPIURL(g,A)},Pt.prototype.canonicalizeTileURL=function(u,d){var g=U(u);if(!g.path.match(/(^\/v4\/)/)||!g.path.match(/\.[\w]+$/))return u;var A="mapbox://tiles/";A+=g.path.replace("/v4/","");var P=g.params;return d&&(P=P.filter(function(F){return!F.match(/^access_token=/)})),P.length&&(A+="?"+P.join("&")),A},Pt.prototype.canonicalizeTileset=function(u,d){for(var g=!!d&&zt(d),A=[],P=0,F=u.tiles||[];P<F.length;P+=1){var j=F[P];rt(j)?A.push(this.canonicalizeTileURL(j,g)):A.push(j)}return A},Pt.prototype._makeAPIURL=function(u,d){var g="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",A=U(or.API_URL);if(u.protocol=A.protocol,u.authority=A.authority,u.protocol==="http"){var P=u.params.indexOf("secure");P>=0&&u.params.splice(P,1)}if(A.path!=="/"&&(u.path=""+A.path+u.path),!or.REQUIRE_ACCESS_TOKEN)return he(u);if(!(d=d||or.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+g);if(d[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+g);return u.params=u.params.filter(function(F){return F.indexOf("access_token")===-1}),u.params.push("access_token="+d),he(u)};var je=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function rt(u){return je.test(u)}var Ut=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function U(u){var d=u.match(Ut);if(!d)throw new Error("Unable to parse URL object");return{protocol:d[1],authority:d[2],path:d[3]||"/",params:d[4]?d[4].split("&"):[]}}function he(u){var d=u.params.length?"?"+u.params.join("&"):"";return u.protocol+"://"+u.authority+u.path+d}function ot(u){if(!u)return null;var d=u.split(".");if(!d||d.length!==3)return null;try{return JSON.parse(decodeURIComponent(ae.atob(d[1]).split("").map(function(g){return"%"+("00"+g.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(g){return null}}var de=function(u){this.type=u,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};de.prototype.getStorageKey=function(u){var d,g=ot(or.ACCESS_TOKEN);return d=g&&g.u?ae.btoa(encodeURIComponent(g.u).replace(/%([0-9A-F]{2})/g,function(A,P){return String.fromCharCode(+("0x"+P))})):or.ACCESS_TOKEN||"",u?"mapbox.eventData."+u+":"+d:"mapbox.eventData:"+d},de.prototype.fetchEventData=function(){var u=qe("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(u)try{var A=ae.localStorage.getItem(d);A&&(this.eventData=JSON.parse(A));var P=ae.localStorage.getItem(g);P&&(this.anonId=P)}catch(F){Ze("Unable to read from LocalStorage")}},de.prototype.saveEventData=function(){var u=qe("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(u)try{ae.localStorage.setItem(g,this.anonId),Object.keys(this.eventData).length>=1&&ae.localStorage.setItem(d,JSON.stringify(this.eventData))}catch(A){Ze("Unable to write to LocalStorage")}},de.prototype.processRequests=function(u){},de.prototype.postEvent=function(u,d,g,A){var P=this;if(or.EVENTS_URL){var F=U(or.EVENTS_URL);F.params.push("access_token="+(A||or.ACCESS_TOKEN||""));var j={event:this.type,created:new Date(u).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:an,userId:this.anonId},te=d?le(j,d):j,_e={url:he(F),headers:{"Content-Type":"text/plain"},body:JSON.stringify([te])};this.pendingRequest=qn(_e,function(Ne){P.pendingRequest=null,g(Ne),P.saveEventData(),P.processRequests(A)})}},de.prototype.queueRequest=function(u,d){this.queue.push(u),this.processRequests(d)};var qt,ln,mn=function(u){function d(){u.call(this,"map.load"),this.success={},this.skuToken=""}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.postMapLoadEvent=function(g,A,P,F){this.skuToken=P;var j=!(!F&&!or.ACCESS_TOKEN),te=Array.isArray(g)&&g.some(function(_e){return zt(_e)||rt(_e)});or.EVENTS_URL&&j&&te&&this.queueRequest({id:A,timestamp:Date.now()},F)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){var P=this.queue.shift(),F=P.id,j=P.timestamp;F&&this.success[F]||(this.anonId||this.fetchEventData(),tt(this.anonId)||(this.anonId=et()),this.postEvent(j,{skuToken:this.skuToken},function(te){te||F&&(A.success[F]=!0)},g))}},d}(de),Dn=new(function(u){function d(g){u.call(this,"appUserTurnstile"),this._customAccessToken=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.postTurnstileEvent=function(g,A){or.EVENTS_URL&&or.ACCESS_TOKEN&&Array.isArray(g)&&g.some(function(P){return zt(P)||rt(P)})&&this.queueRequest(Date.now(),A)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var P=ot(or.ACCESS_TOKEN),F=P?P.u:or.ACCESS_TOKEN,j=F!==this.eventData.tokenU;tt(this.anonId)||(this.anonId=et(),j=!0);var te=this.queue.shift();if(this.eventData.lastSuccess){var _e=new Date(this.eventData.lastSuccess),Ne=new Date(te),Xe=(te-this.eventData.lastSuccess)/864e5;j=j||Xe>=1||Xe<-1||_e.getDate()!==Ne.getDate()}else j=!0;if(!j)return this.processRequests();this.postEvent(te,{"enabled.telemetry":!1},function(it){it||(A.eventData.lastSuccess=te,A.eventData.tokenU=F)},g)}},d}(de)),Yn=Dn.postTurnstileEvent.bind(Dn),Kn=new mn,pn=Kn.postMapLoadEvent.bind(Kn),vt=500,Nt=50;function An(){ae.caches&&!qt&&(qt=ae.caches.open("mapbox-tiles"))}function In(u){var d=u.indexOf("?");return d<0?u:u.slice(0,d)}var $n,pt=1/0;function xe(){return $n==null&&($n=ae.OffscreenCanvas&&new ae.OffscreenCanvas(1,1).getContext("2d")&&typeof ae.createImageBitmap=="function"),$n}var Fe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Fe);var st=function(u){function d(g,A,P){A===401&&rt(P)&&(g+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),u.call(this,g),this.status=A,this.url=P,this.name=this.constructor.name,this.message=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},d}(Error),It=De()?function(){return self.worker&&self.worker.referrer}:function(){return(ae.location.protocol==="blob:"?ae.parent:ae).location.href},Mt,wn,rr=function(u,d){if(!(/^file:/.test(g=u.url)||/^file:/.test(It())&&!/^\w+:/.test(g))){if(ae.fetch&&ae.Request&&ae.AbortController&&ae.Request.prototype.hasOwnProperty("signal"))return function(A,P){var F,j=new ae.AbortController,te=new ae.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:It(),signal:j.signal}),_e=!1,Ne=!1,Xe=(F=te.url).indexOf("sku=")>0&&rt(F);A.type==="json"&&te.headers.set("Accept","application/json");var it=function(Bt,vn,xn){if(!Ne){if(Bt&&Bt.message!=="SecurityError"&&Ze(Bt),vn&&xn)return Tt(vn);var Zn=Date.now();ae.fetch(te).then(function(Ln){if(Ln.ok){var fr=Xe?Ln.clone():null;return Tt(Ln,fr,Zn)}return P(new st(Ln.statusText,Ln.status,A.url))}).catch(function(Ln){Ln.code!==20&&P(new Error(Ln.message))})}},Tt=function(Bt,vn,xn){(A.type==="arrayBuffer"?Bt.arrayBuffer():A.type==="json"?Bt.json():Bt.text()).then(function(Zn){Ne||(vn&&xn&&function(Ln,fr,xr){if(An(),qt){var Pr={status:fr.status,statusText:fr.statusText,headers:new ae.Headers};fr.headers.forEach(function(Hr,Ni){return Pr.headers.set(Ni,Hr)});var kr=mt(fr.headers.get("Cache-Control")||"");kr["no-store"]||(kr["max-age"]&&Pr.headers.set("Expires",new Date(xr+1e3*kr["max-age"]).toUTCString()),new Date(Pr.headers.get("Expires")).getTime()-xr<42e4||function(Hr,Ni){if(ln===void 0)try{new Response(new ReadableStream),ln=!0}catch(Xi){ln=!1}ln?Ni(Hr.body):Hr.blob().then(Ni)}(fr,function(Hr){var Ni=new ae.Response(Hr,Pr);An(),qt&&qt.then(function(Xi){return Xi.put(In(Ln.url),Ni)}).catch(function(Xi){return Ze(Xi.message)})}))}}(te,vn,xn),_e=!0,P(null,Zn,Bt.headers.get("Cache-Control"),Bt.headers.get("Expires")))}).catch(function(Zn){Ne||P(new Error(Zn.message))})};return Xe?function(Bt,vn){if(An(),!qt)return vn(null);var xn=In(Bt.url);qt.then(function(Zn){Zn.match(xn).then(function(Ln){var fr=function(xr){if(!xr)return!1;var Pr=new Date(xr.headers.get("Expires")||0),kr=mt(xr.headers.get("Cache-Control")||"");return Pr>Date.now()&&!kr["no-cache"]}(Ln);Zn.delete(xn),fr&&Zn.put(xn,Ln.clone()),vn(null,Ln,fr)}).catch(vn)}).catch(vn)}(te,it):it(null,null),{cancel:function(){Ne=!0,_e||j.abort()}}}(u,d);if(De()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,d,void 0,!0)}var g;return function(A,P){var F=new ae.XMLHttpRequest;for(var j in F.open(A.method||"GET",A.url,!0),A.type==="arrayBuffer"&&(F.responseType="arraybuffer"),A.headers)F.setRequestHeader(j,A.headers[j]);return A.type==="json"&&(F.responseType="text",F.setRequestHeader("Accept","application/json")),F.withCredentials=A.credentials==="include",F.onerror=function(){P(new Error(F.statusText))},F.onload=function(){if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){var te=F.response;if(A.type==="json")try{te=JSON.parse(F.response)}catch(_e){return P(_e)}P(null,te,F.getResponseHeader("Cache-Control"),F.getResponseHeader("Expires"))}else P(new st(F.statusText,F.status,A.url))},F.send(A.body),{cancel:function(){return F.abort()}}}(u,d)},Er=function(u,d){return rr(le(u,{type:"arrayBuffer"}),d)},qn=function(u,d){return rr(le(u,{method:"POST"}),d)},Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Mt=[],wn=0;var Te=function(u,d){if(Lt.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),wn>=or.MAX_PARALLEL_IMAGE_REQUESTS){var g={requestParameters:u,callback:d,cancelled:!1,cancel:function(){this.cancelled=!0}};return Mt.push(g),g}wn++;var A=!1,P=function(){if(!A)for(A=!0,wn--;Mt.length&&wn<or.MAX_PARALLEL_IMAGE_REQUESTS;){var j=Mt.shift();j.cancelled||(j.cancel=Te(j.requestParameters,j.callback).cancel)}},F=Er(u,function(j,te,_e,Ne){P(),j?d(j):te&&(xe()?function(Xe,it){var Tt=new ae.Blob([new Uint8Array(Xe)],{type:"image/png"});ae.createImageBitmap(Tt).then(function(Bt){it(null,Bt)}).catch(function(Bt){it(new Error("Could not load image because of "+Bt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(te,d):function(Xe,it,Tt,Bt){var vn=new ae.Image,xn=ae.URL;vn.onload=function(){it(null,vn),xn.revokeObjectURL(vn.src),vn.onload=null,ae.requestAnimationFrame(function(){vn.src=Me})},vn.onerror=function(){return it(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Zn=new ae.Blob([new Uint8Array(Xe)],{type:"image/png"});vn.cacheControl=Tt,vn.expires=Bt,vn.src=Xe.byteLength?xn.createObjectURL(Zn):Me}(te,d,_e,Ne))});return{cancel:function(){F.cancel(),P()}}};function ke(u,d,g){g[u]&&g[u].indexOf(d)!==-1||(g[u]=g[u]||[],g[u].push(d))}function at(u,d,g){if(g&&g[u]){var A=g[u].indexOf(d);A!==-1&&g[u].splice(A,1)}}var At=function(u,d){d===void 0&&(d={}),le(this,d),this.type=u},nn=function(u){function d(g,A){A===void 0&&(A={}),u.call(this,"error",le({error:g},A))}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(At),cn=function(){};cn.prototype.on=function(u,d){return this._listeners=this._listeners||{},ke(u,d,this._listeners),this},cn.prototype.off=function(u,d){return at(u,d,this._listeners),at(u,d,this._oneTimeListeners),this},cn.prototype.once=function(u,d){return this._oneTimeListeners=this._oneTimeListeners||{},ke(u,d,this._oneTimeListeners),this},cn.prototype.fire=function(u,d){typeof u=="string"&&(u=new At(u,d||{}));var g=u.type;if(this.listens(g)){u.target=this;for(var A=0,P=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];A<P.length;A+=1)P[A].call(this,u);for(var F=0,j=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];F<j.length;F+=1){var te=j[F];at(g,te,this._oneTimeListeners),te.call(this,u)}var _e=this._eventedParent;_e&&(le(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_e.fire(u))}else u instanceof nn&&console.error(u.error);return this},cn.prototype.listens=function(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)},cn.prototype.setEventedParent=function(u,d){return this._eventedParent=u,this._eventedParentData=d,this};var Et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Qt=function(u,d,g,A){this.message=(u?u+": ":"")+g,A&&(this.identifier=A),d!=null&&d.__line__&&(this.line=d.__line__)};function Qn(u){var d=u.value;return d?[new Qt(u.key,d,"constants have been deprecated as of v8")]:[]}function Sr(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var F=P[A];for(var j in F)u[j]=F[j]}return u}function Zr(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function yr(u){if(Array.isArray(u))return u.map(yr);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){var d={};for(var g in u)d[g]=yr(u[g]);return d}return Zr(u)}var Wr=function(u){function d(g,A){u.call(this,A),this.message=A,this.key=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Error),Ei=function(u,d){d===void 0&&(d=[]),this.parent=u,this.bindings={};for(var g=0,A=d;g<A.length;g+=1){var P=A[g];this.bindings[P[0]]=P[1]}};Ei.prototype.concat=function(u){return new Ei(this,u)},Ei.prototype.get=function(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(u+" not found in scope.")},Ei.prototype.has=function(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)};var yi={kind:"null"},wr={kind:"number"},Ai={kind:"string"},pi={kind:"boolean"},_i={kind:"color"},Bo={kind:"object"},Si={kind:"value"},Ci={kind:"collator"},ho={kind:"formatted"},go={kind:"resolvedImage"};function jo(u,d){return{kind:"array",itemType:u,N:d}}function Ke(u){if(u.kind==="array"){var d=Ke(u.itemType);return typeof u.N=="number"?"array<"+d+", "+u.N+">":u.itemType.kind==="value"?"array":"array<"+d+">"}return u.kind}var dt=[yi,wr,Ai,pi,_i,ho,Bo,jo(Si),go];function Wt(u,d){if(d.kind==="error")return null;if(u.kind==="array"){if(d.kind==="array"&&(d.N===0&&d.itemType.kind==="value"||!Wt(u.itemType,d.itemType))&&(typeof u.N!="number"||u.N===d.N))return null}else{if(u.kind===d.kind)return null;if(u.kind==="value"){for(var g=0,A=dt;g<A.length;g+=1)if(!Wt(A[g],d))return null}}return"Expected "+Ke(u)+" but found "+Ke(d)+" instead."}function dn(u,d){return d.some(function(g){return g.kind===u.kind})}function Fn(u,d){return d.some(function(g){return g==="null"?u===null:g==="array"?Array.isArray(u):g==="object"?u&&!Array.isArray(u)&&typeof u=="object":g===typeof u})}var Bn=fe(function(u,d){var g={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function A(te){return(te=Math.round(te))<0?0:te>255?255:te}function P(te){return A(te[te.length-1]==="%"?parseFloat(te)/100*255:parseInt(te))}function F(te){return(_e=te[te.length-1]==="%"?parseFloat(te)/100:parseFloat(te))<0?0:_e>1?1:_e;var _e}function j(te,_e,Ne){return Ne<0?Ne+=1:Ne>1&&(Ne-=1),6*Ne<1?te+(_e-te)*Ne*6:2*Ne<1?_e:3*Ne<2?te+(_e-te)*(2/3-Ne)*6:te}try{d.parseCSSColor=function(te){var _e,Ne=te.replace(/ /g,"").toLowerCase();if(Ne in g)return g[Ne].slice();if(Ne[0]==="#")return Ne.length===4?(_e=parseInt(Ne.substr(1),16))>=0&&_e<=4095?[(3840&_e)>>4|(3840&_e)>>8,240&_e|(240&_e)>>4,15&_e|(15&_e)<<4,1]:null:Ne.length===7&&(_e=parseInt(Ne.substr(1),16))>=0&&_e<=16777215?[(16711680&_e)>>16,(65280&_e)>>8,255&_e,1]:null;var Xe=Ne.indexOf("("),it=Ne.indexOf(")");if(Xe!==-1&&it+1===Ne.length){var Tt=Ne.substr(0,Xe),Bt=Ne.substr(Xe+1,it-(Xe+1)).split(","),vn=1;switch(Tt){case"rgba":if(Bt.length!==4)return null;vn=F(Bt.pop());case"rgb":return Bt.length!==3?null:[P(Bt[0]),P(Bt[1]),P(Bt[2]),vn];case"hsla":if(Bt.length!==4)return null;vn=F(Bt.pop());case"hsl":if(Bt.length!==3)return null;var xn=(parseFloat(Bt[0])%360+360)%360/360,Zn=F(Bt[1]),Ln=F(Bt[2]),fr=Ln<=.5?Ln*(Zn+1):Ln+Zn-Ln*Zn,xr=2*Ln-fr;return[A(255*j(xr,fr,xn+1/3)),A(255*j(xr,fr,xn)),A(255*j(xr,fr,xn-1/3)),vn];default:return null}}return null}}catch(te){}}).parseCSSColor,_n=function(u,d,g,A){A===void 0&&(A=1),this.r=u,this.g=d,this.b=g,this.a=A};_n.parse=function(u){if(u){if(u instanceof _n)return u;if(typeof u=="string"){var d=Bn(u);if(d)return new _n(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3])}}},_n.prototype.toString=function(){var u=this.toArray(),d=u[1],g=u[2],A=u[3];return"rgba("+Math.round(u[0])+","+Math.round(d)+","+Math.round(g)+","+A+")"},_n.prototype.toArray=function(){var u=this.a;return u===0?[0,0,0,0]:[255*this.r/u,255*this.g/u,255*this.b/u,u]},_n.black=new _n(0,0,0,1),_n.white=new _n(1,1,1,1),_n.transparent=new _n(0,0,0,0),_n.red=new _n(1,0,0,1);var Cn=function(u,d,g){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Cn.prototype.compare=function(u,d){return this.collator.compare(u,d)},Cn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var pr=function(u,d,g,A,P){this.text=u,this.image=d,this.scale=g,this.fontStack=A,this.textColor=P},hr=function(u){this.sections=u};hr.fromString=function(u){return new hr([new pr(u,null,null,null,null)])},hr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(u){return u.text.length!==0||u.image&&u.image.name.length!==0})},hr.factory=function(u){return u instanceof hr?u:hr.fromString(u)},hr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(u){return u.text}).join("")},hr.prototype.serialize=function(){for(var u=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];if(A.image)u.push(["image",A.image.name]);else{u.push(A.text);var P={};A.fontStack&&(P["text-font"]=["literal",A.fontStack.split(",")]),A.scale&&(P["font-scale"]=A.scale),A.textColor&&(P["text-color"]=["rgba"].concat(A.textColor.toArray())),u.push(P)}}return u};var ni=function(u){this.name=u.name,this.available=u.available};function Wi(u,d,g,A){return typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255&&typeof g=="number"&&g>=0&&g<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:"Invalid rgba value ["+[u,d,g,A].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof A=="number"?[u,d,g,A]:[u,d,g]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Qi(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof _n||u instanceof Cn||u instanceof hr||u instanceof ni)return!0;if(Array.isArray(u)){for(var d=0,g=u;d<g.length;d+=1)if(!Qi(g[d]))return!1;return!0}if(typeof u=="object"){for(var A in u)if(!Qi(u[A]))return!1;return!0}return!1}function ri(u){if(u===null)return yi;if(typeof u=="string")return Ai;if(typeof u=="boolean")return pi;if(typeof u=="number")return wr;if(u instanceof _n)return _i;if(u instanceof Cn)return Ci;if(u instanceof hr)return ho;if(u instanceof ni)return go;if(Array.isArray(u)){for(var d,g=u.length,A=0,P=u;A<P.length;A+=1){var F=ri(P[A]);if(d){if(d===F)continue;d=Si;break}d=F}return jo(d||Si,g)}return Bo}function Gi(u){var d=typeof u;return u===null?"":d==="string"||d==="number"||d==="boolean"?String(u):u instanceof _n||u instanceof hr||u instanceof ni?u.toString():JSON.stringify(u)}ni.prototype.toString=function(){return this.name},ni.fromString=function(u){return u?new ni({name:u,available:!1}):null},ni.prototype.serialize=function(){return["image",this.name]};var zi=function(u,d){this.type=u,this.value=d};zi.parse=function(u,d){if(u.length!==2)return d.error("'literal' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(!Qi(u[1]))return d.error("invalid value");var g=u[1],A=ri(g),P=d.expectedType;return A.kind!=="array"||A.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(A=P),new zi(A,g)},zi.prototype.evaluate=function(){return this.value},zi.prototype.eachChild=function(){},zi.prototype.outputDefined=function(){return!0},zi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof _n?["rgba"].concat(this.value.toArray()):this.value instanceof hr?this.value.serialize():this.value};var qr=function(u){this.name="ExpressionEvaluationError",this.message=u};qr.prototype.toJSON=function(){return this.message};var To={string:Ai,number:wr,boolean:pi,object:Bo},di=function(u,d){this.type=u,this.args=d};di.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g,A=1,P=u[0];if(P==="array"){var F,j;if(u.length>2){var te=u[1];if(typeof te!="string"||!(te in To)||te==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);F=To[te],A++}else F=Si;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);j=u[2],A++}g=jo(F,j)}else g=To[P];for(var _e=[];A<u.length;A++){var Ne=d.parse(u[A],A,Si);if(!Ne)return null;_e.push(Ne)}return new di(g,_e)},di.prototype.evaluate=function(u){for(var d=0;d<this.args.length;d++){var g=this.args[d].evaluate(u);if(!Wt(this.type,ri(g)))return g;if(d===this.args.length-1)throw new qr("Expected value to be of type "+Ke(this.type)+", but found "+Ke(ri(g))+" instead.")}return null},di.prototype.eachChild=function(u){this.args.forEach(u)},di.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},di.prototype.serialize=function(){var u=this.type,d=[u.kind];if(u.kind==="array"){var g=u.itemType;if(g.kind==="string"||g.kind==="number"||g.kind==="boolean"){d.push(g.kind);var A=u.N;(typeof A=="number"||this.args.length>1)&&d.push(A)}}return d.concat(this.args.map(function(P){return P.serialize()}))};var So=function(u){this.type=ho,this.sections=u};So.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g=u[1];if(!Array.isArray(g)&&typeof g=="object")return d.error("First argument must be an image or text section.");for(var A=[],P=!1,F=1;F<=u.length-1;++F){var j=u[F];if(P&&typeof j=="object"&&!Array.isArray(j)){P=!1;var te=null;if(j["font-scale"]&&!(te=d.parse(j["font-scale"],1,wr)))return null;var _e=null;if(j["text-font"]&&!(_e=d.parse(j["text-font"],1,jo(Ai))))return null;var Ne=null;if(j["text-color"]&&!(Ne=d.parse(j["text-color"],1,_i)))return null;var Xe=A[A.length-1];Xe.scale=te,Xe.font=_e,Xe.textColor=Ne}else{var it=d.parse(u[F],1,Si);if(!it)return null;var Tt=it.type.kind;if(Tt!=="string"&&Tt!=="value"&&Tt!=="null"&&Tt!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,A.push({content:it,scale:null,font:null,textColor:null})}}return new So(A)},So.prototype.evaluate=function(u){return new hr(this.sections.map(function(d){var g=d.content.evaluate(u);return ri(g)===go?new pr("",g,null,null,null):new pr(Gi(g),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null)}))},So.prototype.eachChild=function(u){for(var d=0,g=this.sections;d<g.length;d+=1){var A=g[d];u(A.content),A.scale&&u(A.scale),A.font&&u(A.font),A.textColor&&u(A.textColor)}},So.prototype.outputDefined=function(){return!1},So.prototype.serialize=function(){for(var u=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];u.push(A.content.serialize());var P={};A.scale&&(P["font-scale"]=A.scale.serialize()),A.font&&(P["text-font"]=A.font.serialize()),A.textColor&&(P["text-color"]=A.textColor.serialize()),u.push(P)}return u};var Zi=function(u){this.type=go,this.input=u};Zi.parse=function(u,d){if(u.length!==2)return d.error("Expected two arguments.");var g=d.parse(u[1],1,Ai);return g?new Zi(g):d.error("No image name provided.")},Zi.prototype.evaluate=function(u){var d=this.input.evaluate(u),g=ni.fromString(d);return g&&u.availableImages&&(g.available=u.availableImages.indexOf(d)>-1),g},Zi.prototype.eachChild=function(u){u(this.input)},Zi.prototype.outputDefined=function(){return!1},Zi.prototype.serialize=function(){return["image",this.input.serialize()]};var io={"to-boolean":pi,"to-color":_i,"to-number":wr,"to-string":Ai},Mo=function(u,d){this.type=u,this.args=d};Mo.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g=u[0];if((g==="to-boolean"||g==="to-string")&&u.length!==2)return d.error("Expected one argument.");for(var A=io[g],P=[],F=1;F<u.length;F++){var j=d.parse(u[F],F,Si);if(!j)return null;P.push(j)}return new Mo(A,P)},Mo.prototype.evaluate=function(u){if(this.type.kind==="boolean")return!!this.args[0].evaluate(u);if(this.type.kind==="color"){for(var d,g,A=0,P=this.args;A<P.length;A+=1){if(g=null,(d=P[A].evaluate(u))instanceof _n)return d;if(typeof d=="string"){var F=u.parseColor(d);if(F)return F}else if(Array.isArray(d)&&!(g=d.length<3||d.length>4?"Invalid rbga value "+JSON.stringify(d)+": expected an array containing either three or four numeric values.":Wi(d[0],d[1],d[2],d[3])))return new _n(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new qr(g||"Could not parse color from value '"+(typeof d=="string"?d:String(JSON.stringify(d)))+"'")}if(this.type.kind==="number"){for(var j=null,te=0,_e=this.args;te<_e.length;te+=1){if((j=_e[te].evaluate(u))===null)return 0;var Ne=Number(j);if(!isNaN(Ne))return Ne}throw new qr("Could not convert "+JSON.stringify(j)+" to number.")}return this.type.kind==="formatted"?hr.fromString(Gi(this.args[0].evaluate(u))):this.type.kind==="resolvedImage"?ni.fromString(Gi(this.args[0].evaluate(u))):Gi(this.args[0].evaluate(u))},Mo.prototype.eachChild=function(u){this.args.forEach(u)},Mo.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},Mo.prototype.serialize=function(){if(this.type.kind==="formatted")return new So([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Zi(this.args[0]).serialize();var u=["to-"+this.type.kind];return this.eachChild(function(d){u.push(d.serialize())}),u};var gs=["Unknown","Point","LineString","Polygon"],ya=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ya.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ya.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?gs[this.feature.type]:this.feature.type:null},ya.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ya.prototype.canonicalID=function(){return this.canonical},ya.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ya.prototype.parseColor=function(u){var d=this._parseColorCache[u];return d||(d=this._parseColorCache[u]=_n.parse(u)),d};var ia=function(u,d,g,A){this.name=u,this.type=d,this._evaluate=g,this.args=A};ia.prototype.evaluate=function(u){return this._evaluate(u,this.args)},ia.prototype.eachChild=function(u){this.args.forEach(u)},ia.prototype.outputDefined=function(){return!1},ia.prototype.serialize=function(){return[this.name].concat(this.args.map(function(u){return u.serialize()}))},ia.parse=function(u,d){var g,A=u[0],P=ia.definitions[A];if(!P)return d.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0);for(var F=Array.isArray(P)?P[0]:P.type,j=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,te=j.filter(function(Yo){var fo=Yo[0];return!Array.isArray(fo)||fo.length===u.length-1}),_e=null,Ne=0,Xe=te;Ne<Xe.length;Ne+=1){var it=Xe[Ne],Tt=it[0],Bt=it[1];_e=new af(d.registry,d.path,null,d.scope);for(var vn=[],xn=!1,Zn=1;Zn<u.length;Zn++){var Ln=u[Zn],fr=Array.isArray(Tt)?Tt[Zn-1]:Tt.type,xr=_e.parse(Ln,1+vn.length,fr);if(!xr){xn=!0;break}vn.push(xr)}if(!xn)if(Array.isArray(Tt)&&Tt.length!==vn.length)_e.error("Expected "+Tt.length+" arguments, but found "+vn.length+" instead.");else{for(var Pr=0;Pr<vn.length;Pr++){var kr=Array.isArray(Tt)?Tt[Pr]:Tt.type,Hr=vn[Pr];_e.concat(Pr+1).checkSubtype(kr,Hr.type)}if(_e.errors.length===0)return new ia(A,F,Bt,vn)}}if(te.length===1)(g=d.errors).push.apply(g,_e.errors);else{for(var Ni=(te.length?te:j).map(function(Yo){var fo;return fo=Yo[0],Array.isArray(fo)?"("+fo.map(Ke).join(", ")+")":"("+Ke(fo.type)+"...)"}).join(" | "),Xi=[],Uo=1;Uo<u.length;Uo++){var oo=d.parse(u[Uo],1+Xi.length);if(!oo)return null;Xi.push(Ke(oo.type))}d.error("Expected arguments of type "+Ni+", but found ("+Xi.join(", ")+") instead.")}return null},ia.register=function(u,d){for(var g in ia.definitions=d,d)u[g]=ia};var ps=function(u,d,g){this.type=Ci,this.locale=g,this.caseSensitive=u,this.diacriticSensitive=d};function os(u,d){u[0]=Math.min(u[0],d[0]),u[1]=Math.min(u[1],d[1]),u[2]=Math.max(u[2],d[0]),u[3]=Math.max(u[3],d[1])}function Ct(u,d){return!(u[0]<=d[0]||u[2]>=d[2]||u[1]<=d[1]||u[3]>=d[3])}function Gt(u,d){var g=(180+u[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,P=Math.pow(2,d.z);return[Math.round(g*P*8192),Math.round(A*P*8192)]}function Un(u,d,g){return d[1]>u[1]!=g[1]>u[1]&&u[0]<(g[0]-d[0])*(u[1]-d[1])/(g[1]-d[1])+d[0]}function Fr(u,d){for(var g,A,P,F,j,te,_e,Ne=!1,Xe=0,it=d.length;Xe<it;Xe++)for(var Tt=d[Xe],Bt=0,vn=Tt.length;Bt<vn-1;Bt++){if((F=(g=u)[0]-(A=Tt[Bt])[0])*(_e=g[1]-(P=Tt[Bt+1])[1])-(te=g[0]-P[0])*(j=g[1]-A[1])==0&&F*te<=0&&j*_e<=0)return!1;Un(u,Tt[Bt],Tt[Bt+1])&&(Ne=!Ne)}return Ne}function Oi(u,d){for(var g=0;g<d.length;g++)if(Fr(u,d[g]))return!0;return!1}function Yi(u,d,g,A){var P=A[0]-g[0],F=A[1]-g[1],j=(u[0]-g[0])*F-P*(u[1]-g[1]),te=(d[0]-g[0])*F-P*(d[1]-g[1]);return j>0&&te<0||j<0&&te>0}function ea(u,d,g){for(var A=0,P=g;A<P.length;A+=1)for(var F=P[A],j=0;j<F.length-1;++j)if((it=[(Xe=F[j+1])[0]-(Ne=F[j])[0],Xe[1]-Ne[1]])[0]*(Tt=[(_e=d)[0]-(te=u)[0],_e[1]-te[1]])[1]-it[1]*Tt[0]!=0&&Yi(te,_e,Ne,Xe)&&Yi(Ne,Xe,te,_e))return!0;var te,_e,Ne,Xe,it,Tt;return!1}function Ns(u,d){for(var g=0;g<u.length;++g)if(!Fr(u[g],d))return!1;for(var A=0;A<u.length-1;++A)if(ea(u[A],u[A+1],d))return!1;return!0}function As(u,d){for(var g=0;g<d.length;g++)if(Ns(u,d[g]))return!0;return!1}function Is(u,d,g){for(var A=[],P=0;P<u.length;P++){for(var F=[],j=0;j<u[P].length;j++){var te=Gt(u[P][j],g);os(d,te),F.push(te)}A.push(F)}return A}function al(u,d,g){for(var A=[],P=0;P<u.length;P++){var F=Is(u[P],d,g);A.push(F)}return A}function Gh(u,d,g,A){if(u[0]<g[0]||u[0]>g[2]){var P=.5*A,F=u[0]-g[0]>P?-A:g[0]-u[0]>P?A:0;F===0&&(F=u[0]-g[2]>P?-A:g[2]-u[0]>P?A:0),u[0]+=F}os(d,u)}function Op(u,d,g,A){for(var P=8192*Math.pow(2,A.z),F=[8192*A.x,8192*A.y],j=[],te=0,_e=u;te<_e.length;te+=1)for(var Ne=0,Xe=_e[te];Ne<Xe.length;Ne+=1){var it=Xe[Ne],Tt=[it.x+F[0],it.y+F[1]];Gh(Tt,d,g,P),j.push(Tt)}return j}function Kf(u,d,g,A){for(var P,F=8192*Math.pow(2,A.z),j=[8192*A.x,8192*A.y],te=[],_e=0,Ne=u;_e<Ne.length;_e+=1){for(var Xe=[],it=0,Tt=Ne[_e];it<Tt.length;it+=1){var Bt=Tt[it],vn=[Bt.x+j[0],Bt.y+j[1]];os(d,vn),Xe.push(vn)}te.push(Xe)}if(d[2]-d[0]<=F/2){(P=d)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(var xn=0,Zn=te;xn<Zn.length;xn+=1)for(var Ln=0,fr=Zn[xn];Ln<fr.length;Ln+=1)Gh(fr[Ln],d,g,F)}return te}ps.parse=function(u,d){if(u.length!==2)return d.error("Expected one argument.");var g=u[1];if(typeof g!="object"||Array.isArray(g))return d.error("Collator options argument must be an object.");var A=d.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,pi);if(!A)return null;var P=d.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,pi);if(!P)return null;var F=null;return g.locale&&!(F=d.parse(g.locale,1,Ai))?null:new ps(A,P,F)},ps.prototype.evaluate=function(u){return new Cn(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)},ps.prototype.eachChild=function(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){var u={};return u["case-sensitive"]=this.caseSensitive.serialize(),u["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(u.locale=this.locale.serialize()),["collator",u]};var ou=function(u,d){this.type=pi,this.geojson=u,this.geometries=d};function Uf(u){if(u instanceof ia&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof ou)return!1;var d=!0;return u.eachChild(function(g){d&&!Uf(g)&&(d=!1)}),d}function of(u){if(u instanceof ia&&u.name==="feature-state")return!1;var d=!0;return u.eachChild(function(g){d&&!of(g)&&(d=!1)}),d}function au(u,d){if(u instanceof ia&&d.indexOf(u.name)>=0)return!1;var g=!0;return u.eachChild(function(A){g&&!au(A,d)&&(g=!1)}),g}ou.parse=function(u,d){if(u.length!==2)return d.error("'within' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(Qi(u[1])){var g=u[1];if(g.type==="FeatureCollection")for(var A=0;A<g.features.length;++A){var P=g.features[A].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new ou(g,g.features[A].geometry)}else if(g.type==="Feature"){var F=g.geometry.type;if(F==="Polygon"||F==="MultiPolygon")return new ou(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new ou(g,g)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ou.prototype.evaluate=function(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(g.type==="Polygon"){var j=Is(g.coordinates,P,F),te=Op(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var _e=0,Ne=te;_e<Ne.length;_e+=1)if(!Fr(Ne[_e],j))return!1}if(g.type==="MultiPolygon"){var Xe=al(g.coordinates,P,F),it=Op(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var Tt=0,Bt=it;Tt<Bt.length;Tt+=1)if(!Oi(Bt[Tt],Xe))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(g.type==="Polygon"){var j=Is(g.coordinates,P,F),te=Kf(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var _e=0,Ne=te;_e<Ne.length;_e+=1)if(!Ns(Ne[_e],j))return!1}if(g.type==="MultiPolygon"){var Xe=al(g.coordinates,P,F),it=Kf(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var Tt=0,Bt=it;Tt<Bt.length;Tt+=1)if(!As(Bt[Tt],Xe))return!1}return!0}(u,this.geometries)}return!1},ou.prototype.eachChild=function(){},ou.prototype.outputDefined=function(){return!0},ou.prototype.serialize=function(){return["within",this.geojson]};var yu=function(u,d){this.type=d.type,this.name=u,this.boundExpression=d};yu.parse=function(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");var g=u[1];return d.scope.has(g)?new yu(g,d.scope.get(g)):d.error('Unknown variable "'+g+'". Make sure "'+g+'" has been bound in an enclosing "let" expression before using it.',1)},yu.prototype.evaluate=function(u){return this.boundExpression.evaluate(u)},yu.prototype.eachChild=function(){},yu.prototype.outputDefined=function(){return!1},yu.prototype.serialize=function(){return["var",this.name]};var af=function(u,d,g,A,P){d===void 0&&(d=[]),A===void 0&&(A=new Ei),P===void 0&&(P=[]),this.registry=u,this.path=d,this.key=d.map(function(F){return"["+F+"]"}).join(""),this.scope=A,this.errors=P,this.expectedType=g};function Sf(u,d){for(var g,A=u.length-1,P=0,F=A,j=0;P<=F;)if((g=u[j=Math.floor((P+F)/2)])<=d){if(j===A||d<u[j+1])return j;P=j+1}else{if(!(g>d))throw new qr("Input is not a number.");F=j-1}return 0}af.prototype.parse=function(u,d,g,A,P){return P===void 0&&(P={}),d?this.concat(d,g,A)._parse(u,P):this._parse(u,P)},af.prototype._parse=function(u,d){function g(Ne,Xe,it){return it==="assert"?new di(Xe,[Ne]):it==="coerce"?new Mo(Xe,[Ne]):Ne}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var A=u[0];if(typeof A!="string")return this.error("Expression name must be a string, but found "+typeof A+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var P=this.registry[A];if(P){var F=P.parse(u,this);if(!F)return null;if(this.expectedType){var j=this.expectedType,te=F.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||te.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||te.kind!=="value"&&te.kind!=="string"){if(this.checkSubtype(j,te))return null}else F=g(F,j,d.typeAnnotation||"coerce");else F=g(F,j,d.typeAnnotation||"assert")}if(!(F instanceof zi)&&F.type.kind!=="resolvedImage"&&function Ne(Xe){if(Xe instanceof yu)return Ne(Xe.boundExpression);if(Xe instanceof ia&&Xe.name==="error"||Xe instanceof ps||Xe instanceof ou)return!1;var it=Xe instanceof Mo||Xe instanceof di,Tt=!0;return Xe.eachChild(function(Bt){Tt=it?Tt&&Ne(Bt):Tt&&Bt instanceof zi}),!!Tt&&Uf(Xe)&&au(Xe,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(F)){var _e=new ya;try{F=new zi(F.type,F.evaluate(_e))}catch(Ne){return this.error(Ne.message),null}}return F}return this.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof u+" instead.")},af.prototype.concat=function(u,d,g){var A=typeof u=="number"?this.path.concat(u):this.path,P=g?this.scope.concat(g):this.scope;return new af(this.registry,A,d||null,P,this.errors)},af.prototype.error=function(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];var A=""+this.key+d.map(function(P){return"["+P+"]"}).join("");this.errors.push(new Wr(A,u))},af.prototype.checkSubtype=function(u,d){var g=Wt(u,d);return g&&this.error(g),g};var Ou=function(u,d,g){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(var A=0,P=g;A<P.length;A+=1){var F=P[A],j=F[1];this.labels.push(F[0]),this.outputs.push(j)}};function xs(u,d,g){return u*(1-g)+d*g}Ou.parse=function(u,d){if(u.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");var g=d.parse(u[1],1,wr);if(!g)return null;var A=[],P=null;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);for(var F=1;F<u.length;F+=2){var j=F===1?-1/0:u[F],te=u[F+1],_e=F,Ne=F+1;if(typeof j!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(A.length&&A[A.length-1][0]>=j)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);var Xe=d.parse(te,Ne,P);if(!Xe)return null;P=P||Xe.type,A.push([j,Xe])}return new Ou(P,g,A)},Ou.prototype.evaluate=function(u){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(u);var A=this.input.evaluate(u);if(A<=d[0])return g[0].evaluate(u);var P=d.length;return A>=d[P-1]?g[P-1].evaluate(u):g[Sf(d,A)].evaluate(u)},Ou.prototype.eachChild=function(u){u(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)u(g[d])},Ou.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},Ou.prototype.serialize=function(){for(var u=["step",this.input.serialize()],d=0;d<this.labels.length;d++)d>0&&u.push(this.labels[d]),u.push(this.outputs[d].serialize());return u};var tc=Object.freeze({__proto__:null,number:xs,color:function(u,d,g){return new _n(xs(u.r,d.r,g),xs(u.g,d.g,g),xs(u.b,d.b,g),xs(u.a,d.a,g))},array:function(u,d,g){return u.map(function(A,P){return xs(A,d[P],g)})}}),sf=6/29*3*(6/29),Ed=Math.PI/180,np=180/Math.PI;function jf(u){return u>.008856451679035631?Math.pow(u,1/3):u/sf+4/29}function Sd(u){return u>6/29?u*u*u:sf*(u-4/29)}function yh(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Zh(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Xh(u){var d=Zh(u.r),g=Zh(u.g),A=Zh(u.b),P=jf((.4124564*d+.3575761*g+.1804375*A)/.95047),F=jf((.2126729*d+.7151522*g+.072175*A)/1);return{l:116*F-16,a:500*(P-F),b:200*(F-jf((.0193339*d+.119192*g+.9503041*A)/1.08883)),alpha:u.a}}function wd(u){var d=(u.l+16)/116,g=isNaN(u.a)?d:d+u.a/500,A=isNaN(u.b)?d:d-u.b/200;return d=1*Sd(d),g=.95047*Sd(g),A=1.08883*Sd(A),new _n(yh(3.2404542*g-1.5371385*d-.4985314*A),yh(-.969266*g+1.8760108*d+.041556*A),yh(.0556434*g-.2040259*d+1.0572252*A),u.alpha)}function Qp(u,d,g){var A=d-u;return u+g*(A>180||A<-180?A-360*Math.round(A/360):A)}var lf={forward:Xh,reverse:wd,interpolate:function(u,d,g){return{l:xs(u.l,d.l,g),a:xs(u.a,d.a,g),b:xs(u.b,d.b,g),alpha:xs(u.alpha,d.alpha,g)}}},Vc={forward:function(u){var d=Xh(u),g=d.l,A=d.a,P=d.b,F=Math.atan2(P,A)*np;return{h:F<0?F+360:F,c:Math.sqrt(A*A+P*P),l:g,alpha:u.a}},reverse:function(u){var d=u.h*Ed,g=u.c;return wd({l:u.l,a:Math.cos(d)*g,b:Math.sin(d)*g,alpha:u.alpha})},interpolate:function(u,d,g){return{h:Qp(u.h,d.h,g),c:xs(u.c,d.c,g),l:xs(u.l,d.l,g),alpha:xs(u.alpha,d.alpha,g)}}},Td=Object.freeze({__proto__:null,lab:lf,hcl:Vc}),jl=function(u,d,g,A,P){this.type=u,this.operator=d,this.interpolation=g,this.input=A,this.labels=[],this.outputs=[];for(var F=0,j=P;F<j.length;F+=1){var te=j[F],_e=te[1];this.labels.push(te[0]),this.outputs.push(_e)}};function Ac(u,d,g,A){var P=A-g,F=u-g;return P===0?0:d===1?F/P:(Math.pow(d,F)-1)/(Math.pow(d,P)-1)}jl.interpolationFactor=function(u,d,g,A){var P=0;if(u.name==="exponential")P=Ac(d,u.base,g,A);else if(u.name==="linear")P=Ac(d,1,g,A);else if(u.name==="cubic-bezier"){var F=u.controlPoints;P=new $(F[0],F[1],F[2],F[3]).solve(Ac(d,1,g,A))}return P},jl.parse=function(u,d){var g=u[0],A=u[1],P=u[2],F=u.slice(3);if(!Array.isArray(A)||A.length===0)return d.error("Expected an interpolation type expression.",1);if(A[0]==="linear")A={name:"linear"};else if(A[0]==="exponential"){var j=A[1];if(typeof j!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);A={name:"exponential",base:j}}else{if(A[0]!=="cubic-bezier")return d.error("Unknown interpolation type "+String(A[0]),1,0);var te=A.slice(1);if(te.length!==4||te.some(function(Zn){return typeof Zn!="number"||Zn<0||Zn>1}))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);A={name:"cubic-bezier",controlPoints:te}}if(u.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(!(P=d.parse(P,2,wr)))return null;var _e=[],Ne=null;g==="interpolate-hcl"||g==="interpolate-lab"?Ne=_i:d.expectedType&&d.expectedType.kind!=="value"&&(Ne=d.expectedType);for(var Xe=0;Xe<F.length;Xe+=2){var it=F[Xe],Tt=F[Xe+1],Bt=Xe+3,vn=Xe+4;if(typeof it!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Bt);if(_e.length&&_e[_e.length-1][0]>=it)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Bt);var xn=d.parse(Tt,vn,Ne);if(!xn)return null;Ne=Ne||xn.type,_e.push([it,xn])}return Ne.kind==="number"||Ne.kind==="color"||Ne.kind==="array"&&Ne.itemType.kind==="number"&&typeof Ne.N=="number"?new jl(Ne,g,A,P,_e):d.error("Type "+Ke(Ne)+" is not interpolatable.")},jl.prototype.evaluate=function(u){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(u);var A=this.input.evaluate(u);if(A<=d[0])return g[0].evaluate(u);var P=d.length;if(A>=d[P-1])return g[P-1].evaluate(u);var F=Sf(d,A),j=jl.interpolationFactor(this.interpolation,A,d[F],d[F+1]),te=g[F].evaluate(u),_e=g[F+1].evaluate(u);return this.operator==="interpolate"?tc[this.type.kind.toLowerCase()](te,_e,j):this.operator==="interpolate-hcl"?Vc.reverse(Vc.interpolate(Vc.forward(te),Vc.forward(_e),j)):lf.reverse(lf.interpolate(lf.forward(te),lf.forward(_e),j))},jl.prototype.eachChild=function(u){u(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)u(g[d])},jl.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},jl.prototype.serialize=function(){var u;u=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var d=[this.operator,u,this.input.serialize()],g=0;g<this.labels.length;g++)d.push(this.labels[g],this.outputs[g].serialize());return d};var uf=function(u,d){this.type=u,this.args=d};uf.parse=function(u,d){if(u.length<2)return d.error("Expectected at least one argument.");var g=null,A=d.expectedType;A&&A.kind!=="value"&&(g=A);for(var P=[],F=0,j=u.slice(1);F<j.length;F+=1){var te=d.parse(j[F],1+P.length,g,void 0,{typeAnnotation:"omit"});if(!te)return null;g=g||te.type,P.push(te)}var _e=A&&P.some(function(Ne){return Wt(A,Ne.type)});return new uf(_e?Si:g,P)},uf.prototype.evaluate=function(u){for(var d,g=null,A=0,P=0,F=this.args;P<F.length&&(A++,(g=F[P].evaluate(u))&&g instanceof ni&&!g.available&&(d||(d=g.name),g=null,A===this.args.length&&(g=d)),g===null);P+=1);return g},uf.prototype.eachChild=function(u){this.args.forEach(u)},uf.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},uf.prototype.serialize=function(){var u=["coalesce"];return this.eachChild(function(d){u.push(d.serialize())}),u};var su=function(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d};su.prototype.evaluate=function(u){return this.result.evaluate(u)},su.prototype.eachChild=function(u){for(var d=0,g=this.bindings;d<g.length;d+=1)u(g[d][1]);u(this.result)},su.parse=function(u,d){if(u.length<4)return d.error("Expected at least 3 arguments, but found "+(u.length-1)+" instead.");for(var g=[],A=1;A<u.length-1;A+=2){var P=u[A];if(typeof P!="string")return d.error("Expected string, but found "+typeof P+" instead.",A);if(/[^a-zA-Z0-9_]/.test(P))return d.error("Variable names must contain only alphanumeric characters or '_'.",A);var F=d.parse(u[A+1],A+1);if(!F)return null;g.push([P,F])}var j=d.parse(u[u.length-1],u.length-1,d.expectedType,g);return j?new su(g,j):null},su.prototype.outputDefined=function(){return this.result.outputDefined()},su.prototype.serialize=function(){for(var u=["let"],d=0,g=this.bindings;d<g.length;d+=1){var A=g[d];u.push(A[0],A[1].serialize())}return u.push(this.result.serialize()),u};var Hc=function(u,d,g){this.type=u,this.index=d,this.input=g};Hc.parse=function(u,d){if(u.length!==3)return d.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,wr),A=d.parse(u[2],2,jo(d.expectedType||Si));return g&&A?new Hc(A.type.itemType,g,A):null},Hc.prototype.evaluate=function(u){var d=this.index.evaluate(u),g=this.input.evaluate(u);if(d<0)throw new qr("Array index out of bounds: "+d+" < 0.");if(d>=g.length)throw new qr("Array index out of bounds: "+d+" > "+(g.length-1)+".");if(d!==Math.floor(d))throw new qr("Array index must be an integer, but found "+d+" instead.");return g[d]},Hc.prototype.eachChild=function(u){u(this.index),u(this.input)},Hc.prototype.outputDefined=function(){return!1},Hc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var hc=function(u,d){this.type=pi,this.needle=u,this.haystack=d};hc.parse=function(u,d){if(u.length!==3)return d.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,Si),A=d.parse(u[2],2,Si);return g&&A?dn(g.type,[pi,Ai,wr,yi,Si])?new hc(g,A):d.error("Expected first argument to be of type boolean, string, number or null, but found "+Ke(g.type)+" instead"):null},hc.prototype.evaluate=function(u){var d=this.needle.evaluate(u),g=this.haystack.evaluate(u);if(!g)return!1;if(!Fn(d,["boolean","string","number","null"]))throw new qr("Expected first argument to be of type boolean, string, number or null, but found "+Ke(ri(d))+" instead.");if(!Fn(g,["string","array"]))throw new qr("Expected second argument to be of type array or string, but found "+Ke(ri(g))+" instead.");return g.indexOf(d)>=0},hc.prototype.eachChild=function(u){u(this.needle),u(this.haystack)},hc.prototype.outputDefined=function(){return!0},hc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var wf=function(u,d,g){this.type=wr,this.needle=u,this.haystack=d,this.fromIndex=g};wf.parse=function(u,d){if(u.length<=2||u.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,Si),A=d.parse(u[2],2,Si);if(!g||!A)return null;if(!dn(g.type,[pi,Ai,wr,yi,Si]))return d.error("Expected first argument to be of type boolean, string, number or null, but found "+Ke(g.type)+" instead");if(u.length===4){var P=d.parse(u[3],3,wr);return P?new wf(g,A,P):null}return new wf(g,A)},wf.prototype.evaluate=function(u){var d=this.needle.evaluate(u),g=this.haystack.evaluate(u);if(!Fn(d,["boolean","string","number","null"]))throw new qr("Expected first argument to be of type boolean, string, number or null, but found "+Ke(ri(d))+" instead.");if(!Fn(g,["string","array"]))throw new qr("Expected second argument to be of type array or string, but found "+Ke(ri(g))+" instead.");if(this.fromIndex){var A=this.fromIndex.evaluate(u);return g.indexOf(d,A)}return g.indexOf(d)},wf.prototype.eachChild=function(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)},wf.prototype.outputDefined=function(){return!1},wf.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var u=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),u]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ml=function(u,d,g,A,P,F){this.inputType=u,this.type=d,this.input=g,this.cases=A,this.outputs=P,this.otherwise=F};Ml.parse=function(u,d){if(u.length<5)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(u.length%2!=1)return d.error("Expected an even number of arguments.");var g,A;d.expectedType&&d.expectedType.kind!=="value"&&(A=d.expectedType);for(var P={},F=[],j=2;j<u.length-1;j+=2){var te=u[j],_e=u[j+1];Array.isArray(te)||(te=[te]);var Ne=d.concat(j);if(te.length===0)return Ne.error("Expected at least one branch label.");for(var Xe=0,it=te;Xe<it.length;Xe+=1){var Tt=it[Xe];if(typeof Tt!="number"&&typeof Tt!="string")return Ne.error("Branch labels must be numbers or strings.");if(typeof Tt=="number"&&Math.abs(Tt)>Number.MAX_SAFE_INTEGER)return Ne.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Tt=="number"&&Math.floor(Tt)!==Tt)return Ne.error("Numeric branch labels must be integer values.");if(g){if(Ne.checkSubtype(g,ri(Tt)))return null}else g=ri(Tt);if(P[String(Tt)]!==void 0)return Ne.error("Branch labels must be unique.");P[String(Tt)]=F.length}var Bt=d.parse(_e,j,A);if(!Bt)return null;A=A||Bt.type,F.push(Bt)}var vn=d.parse(u[1],1,Si);if(!vn)return null;var xn=d.parse(u[u.length-1],u.length-1,A);return xn?vn.type.kind!=="value"&&d.concat(1).checkSubtype(g,vn.type)?null:new Ml(g,A,vn,P,F,xn):null},Ml.prototype.evaluate=function(u){var d=this.input.evaluate(u);return(ri(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)},Ml.prototype.eachChild=function(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)},Ml.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})&&this.otherwise.outputDefined()},Ml.prototype.serialize=function(){for(var u=this,d=["match",this.input.serialize()],g=[],A={},P=0,F=Object.keys(this.cases).sort();P<F.length;P+=1){var j=F[P];(it=A[this.cases[j]])===void 0?(A[this.cases[j]]=g.length,g.push([this.cases[j],[j]])):g[it][1].push(j)}for(var te=function(Bt){return u.inputType.kind==="number"?Number(Bt):Bt},_e=0,Ne=g;_e<Ne.length;_e+=1){var Xe=Ne[_e],it=Xe[0],Tt=Xe[1];d.push(Tt.length===1?te(Tt[0]):Tt.map(te)),d.push(this.outputs[outputIndex$1].serialize())}return d.push(this.otherwise.serialize()),d};var cf=function(u,d,g){this.type=u,this.branches=d,this.otherwise=g};cf.parse=function(u,d){if(u.length<4)return d.error("Expected at least 3 arguments, but found only "+(u.length-1)+".");if(u.length%2!=0)return d.error("Expected an odd number of arguments.");var g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);for(var A=[],P=1;P<u.length-1;P+=2){var F=d.parse(u[P],P,pi);if(!F)return null;var j=d.parse(u[P+1],P+1,g);if(!j)return null;A.push([F,j]),g=g||j.type}var te=d.parse(u[u.length-1],u.length-1,g);return te?new cf(g,A,te):null},cf.prototype.evaluate=function(u){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];if(A[0].evaluate(u))return P.evaluate(u)}return this.otherwise.evaluate(u)},cf.prototype.eachChild=function(u){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];u(A[0]),u(P)}u(this.otherwise)},cf.prototype.outputDefined=function(){return this.branches.every(function(u){return u[1].outputDefined()})&&this.otherwise.outputDefined()},cf.prototype.serialize=function(){var u=["case"];return this.eachChild(function(d){u.push(d.serialize())}),u};var Tf=function(u,d,g,A){this.type=u,this.input=d,this.beginIndex=g,this.endIndex=A};function Ad(u,d){return u==="=="||u==="!="?d.kind==="boolean"||d.kind==="string"||d.kind==="number"||d.kind==="null"||d.kind==="value":d.kind==="string"||d.kind==="number"||d.kind==="value"}function Cd(u,d,g,A){return A.compare(d,g)===0}function ys(u,d,g){var A=u!=="=="&&u!=="!=";return function(){function P(F,j,te){this.type=pi,this.lhs=F,this.rhs=j,this.collator=te,this.hasUntypedArgument=F.type.kind==="value"||j.type.kind==="value"}return P.parse=function(F,j){if(F.length!==3&&F.length!==4)return j.error("Expected two or three arguments.");var te=F[0],_e=j.parse(F[1],1,Si);if(!_e)return null;if(!Ad(te,_e.type))return j.concat(1).error('"'+te+`" comparisons are not supported for type '`+Ke(_e.type)+"'.");var Ne=j.parse(F[2],2,Si);if(!Ne)return null;if(!Ad(te,Ne.type))return j.concat(2).error('"'+te+`" comparisons are not supported for type '`+Ke(Ne.type)+"'.");if(_e.type.kind!==Ne.type.kind&&_e.type.kind!=="value"&&Ne.type.kind!=="value")return j.error("Cannot compare types '"+Ke(_e.type)+"' and '"+Ke(Ne.type)+"'.");A&&(_e.type.kind==="value"&&Ne.type.kind!=="value"?_e=new di(Ne.type,[_e]):_e.type.kind!=="value"&&Ne.type.kind==="value"&&(Ne=new di(_e.type,[Ne])));var Xe=null;if(F.length===4){if(_e.type.kind!=="string"&&Ne.type.kind!=="string"&&_e.type.kind!=="value"&&Ne.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(!(Xe=j.parse(F[3],3,Ci)))return null}return new P(_e,Ne,Xe)},P.prototype.evaluate=function(F){var j=this.lhs.evaluate(F),te=this.rhs.evaluate(F);if(A&&this.hasUntypedArgument){var _e=ri(j),Ne=ri(te);if(_e.kind!==Ne.kind||_e.kind!=="string"&&_e.kind!=="number")throw new qr('Expected arguments for "'+u+'" to be (string, string) or (number, number), but found ('+_e.kind+", "+Ne.kind+") instead.")}if(this.collator&&!A&&this.hasUntypedArgument){var Xe=ri(j),it=ri(te);if(Xe.kind!=="string"||it.kind!=="string")return d(F,j,te)}return this.collator?g(F,j,te,this.collator.evaluate(F)):d(F,j,te)},P.prototype.eachChild=function(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)},P.prototype.outputDefined=function(){return!0},P.prototype.serialize=function(){var F=[u];return this.eachChild(function(j){F.push(j.serialize())}),F},P}()}Tf.parse=function(u,d){if(u.length<=2||u.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,Si),A=d.parse(u[2],2,wr);if(!g||!A)return null;if(!dn(g.type,[jo(Si),Ai,Si]))return d.error("Expected first argument to be of type array or string, but found "+Ke(g.type)+" instead");if(u.length===4){var P=d.parse(u[3],3,wr);return P?new Tf(g.type,g,A,P):null}return new Tf(g.type,g,A)},Tf.prototype.evaluate=function(u){var d=this.input.evaluate(u),g=this.beginIndex.evaluate(u);if(!Fn(d,["string","array"]))throw new qr("Expected first argument to be of type array or string, but found "+Ke(ri(d))+" instead.");if(this.endIndex){var A=this.endIndex.evaluate(u);return d.slice(g,A)}return d.slice(g)},Tf.prototype.eachChild=function(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)},Tf.prototype.outputDefined=function(){return!1},Tf.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var u=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),u]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var rp=ys("==",function(u,d,g){return d===g},Cd),Qf=ys("!=",function(u,d,g){return d!==g},function(u,d,g,A){return!Cd(0,d,g,A)}),Yh=ys("<",function(u,d,g){return d<g},function(u,d,g,A){return A.compare(d,g)<0}),sl=ys(">",function(u,d,g){return d>g},function(u,d,g,A){return A.compare(d,g)>0}),$h=ys("<=",function(u,d,g){return d<=g},function(u,d,g,A){return A.compare(d,g)<=0}),_h=ys(">=",function(u,d,g){return d>=g},function(u,d,g,A){return A.compare(d,g)>=0}),_u=function(u,d,g,A,P){this.type=Ai,this.number=u,this.locale=d,this.currency=g,this.minFractionDigits=A,this.maxFractionDigits=P};_u.parse=function(u,d){if(u.length!==3)return d.error("Expected two arguments.");var g=d.parse(u[1],1,wr);if(!g)return null;var A=u[2];if(typeof A!="object"||Array.isArray(A))return d.error("NumberFormat options argument must be an object.");var P=null;if(A.locale&&!(P=d.parse(A.locale,1,Ai)))return null;var F=null;if(A.currency&&!(F=d.parse(A.currency,1,Ai)))return null;var j=null;if(A["min-fraction-digits"]&&!(j=d.parse(A["min-fraction-digits"],1,wr)))return null;var te=null;return A["max-fraction-digits"]&&!(te=d.parse(A["max-fraction-digits"],1,wr))?null:new _u(g,P,F,j,te)},_u.prototype.evaluate=function(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))},_u.prototype.eachChild=function(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)},_u.prototype.outputDefined=function(){return!1},_u.prototype.serialize=function(){var u={};return this.locale&&(u.locale=this.locale.serialize()),this.currency&&(u.currency=this.currency.serialize()),this.minFractionDigits&&(u["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(u["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),u]};var Wc=function(u){this.type=wr,this.input=u};Wc.parse=function(u,d){if(u.length!==2)return d.error("Expected 1 argument, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?d.error("Expected argument of type string or array, but found "+Ke(g.type)+" instead."):new Wc(g):null},Wc.prototype.evaluate=function(u){var d=this.input.evaluate(u);if(typeof d=="string"||Array.isArray(d))return d.length;throw new qr("Expected value to be of type string or array, but found "+Ke(ri(d))+" instead.")},Wc.prototype.eachChild=function(u){u(this.input)},Wc.prototype.outputDefined=function(){return!1},Wc.prototype.serialize=function(){var u=["length"];return this.eachChild(function(d){u.push(d.serialize())}),u};var Mu={"==":rp,"!=":Qf,">":sl,"<":Yh,">=":_h,"<=":$h,array:di,at:Hc,boolean:di,case:cf,coalesce:uf,collator:ps,format:So,image:Zi,in:hc,"index-of":wf,interpolate:jl,"interpolate-hcl":jl,"interpolate-lab":jl,length:Wc,let:su,literal:zi,match:Ml,number:di,"number-format":_u,object:di,slice:Tf,step:Ou,string:di,"to-boolean":Mo,"to-color":Mo,"to-number":Mo,"to-string":Mo,var:yu,within:ou};function Cc(u,d){var g=d[0],A=d[1],P=d[2],F=d[3];g=g.evaluate(u),A=A.evaluate(u),P=P.evaluate(u);var j=F?F.evaluate(u):1,te=Wi(g,A,P,j);if(te)throw new qr(te);return new _n(g/255*j,A/255*j,P/255*j,j)}function we(u,d){return u in d}function oe(u,d){var g=d[u];return g===void 0?null:g}function pe(u){return{type:u}}function Je(u){return{result:"success",value:u}}function sn(u){return{result:"error",value:u}}function fn(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function ir(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function Cr(u){return!!u.expression&&u.expression.interpolated}function Xr(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Bi(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function bo(u){return u}function vo(u,d,g){return u!==void 0?u:d!==void 0?d:g!==void 0?g:void 0}function Na(u,d,g,A,P){return vo(typeof g===P?A[g]:void 0,u.default,d.default)}function Fa(u,d,g){if(Xr(g)!=="number")return vo(u.default,d.default);var A=u.stops.length;if(A===1||g<=u.stops[0][0])return u.stops[0][1];if(g>=u.stops[A-1][0])return u.stops[A-1][1];var P=Sf(u.stops.map(function(F){return F[0]}),g);return u.stops[P][1]}function Ea(u,d,g){var A=u.base!==void 0?u.base:1;if(Xr(g)!=="number")return vo(u.default,d.default);var P=u.stops.length;if(P===1||g<=u.stops[0][0])return u.stops[0][1];if(g>=u.stops[P-1][0])return u.stops[P-1][1];var F=Sf(u.stops.map(function(it){return it[0]}),g),j=function(it,Tt,Bt,vn){var xn=vn-Bt,Zn=it-Bt;return xn===0?0:Tt===1?Zn/xn:(Math.pow(Tt,Zn)-1)/(Math.pow(Tt,xn)-1)}(g,A,u.stops[F][0],u.stops[F+1][0]),te=u.stops[F][1],_e=u.stops[F+1][1],Ne=tc[d.type]||bo;if(u.colorSpace&&u.colorSpace!=="rgb"){var Xe=Td[u.colorSpace];Ne=function(it,Tt){return Xe.reverse(Xe.interpolate(Xe.forward(it),Xe.forward(Tt),j))}}return typeof te.evaluate=="function"?{evaluate:function(){for(var it=[],Tt=arguments.length;Tt--;)it[Tt]=arguments[Tt];var Bt=te.evaluate.apply(void 0,it),vn=_e.evaluate.apply(void 0,it);if(Bt!==void 0&&vn!==void 0)return Ne(Bt,vn,j)}}:Ne(te,_e,j)}function Aa(u,d,g){return d.type==="color"?g=_n.parse(g):d.type==="formatted"?g=hr.fromString(g.toString()):d.type==="resolvedImage"?g=ni.fromString(g.toString()):Xr(g)===d.type||d.type==="enum"&&d.values[g]||(g=void 0),vo(g,u.default,d.default)}ia.register(Mu,{error:[{kind:"error"},[Ai],function(u,d){throw new qr(d[0].evaluate(u))}],typeof:[Ai,[Si],function(u,d){return Ke(ri(d[0].evaluate(u)))}],"to-rgba":[jo(wr,4),[_i],function(u,d){return d[0].evaluate(u).toArray()}],rgb:[_i,[wr,wr,wr],Cc],rgba:[_i,[wr,wr,wr,wr],Cc],has:{type:pi,overloads:[[[Ai],function(u,d){return we(d[0].evaluate(u),u.properties())}],[[Ai,Bo],function(u,d){var g=d[1];return we(d[0].evaluate(u),g.evaluate(u))}]]},get:{type:Si,overloads:[[[Ai],function(u,d){return oe(d[0].evaluate(u),u.properties())}],[[Ai,Bo],function(u,d){var g=d[1];return oe(d[0].evaluate(u),g.evaluate(u))}]]},"feature-state":[Si,[Ai],function(u,d){return oe(d[0].evaluate(u),u.featureState||{})}],properties:[Bo,[],function(u){return u.properties()}],"geometry-type":[Ai,[],function(u){return u.geometryType()}],id:[Si,[],function(u){return u.id()}],zoom:[wr,[],function(u){return u.globals.zoom}],"heatmap-density":[wr,[],function(u){return u.globals.heatmapDensity||0}],"line-progress":[wr,[],function(u){return u.globals.lineProgress||0}],accumulated:[Si,[],function(u){return u.globals.accumulated===void 0?null:u.globals.accumulated}],"+":[wr,pe(wr),function(u,d){for(var g=0,A=0,P=d;A<P.length;A+=1)g+=P[A].evaluate(u);return g}],"*":[wr,pe(wr),function(u,d){for(var g=1,A=0,P=d;A<P.length;A+=1)g*=P[A].evaluate(u);return g}],"-":{type:wr,overloads:[[[wr,wr],function(u,d){var g=d[1];return d[0].evaluate(u)-g.evaluate(u)}],[[wr],function(u,d){return-d[0].evaluate(u)}]]},"/":[wr,[wr,wr],function(u,d){var g=d[1];return d[0].evaluate(u)/g.evaluate(u)}],"%":[wr,[wr,wr],function(u,d){var g=d[1];return d[0].evaluate(u)%g.evaluate(u)}],ln2:[wr,[],function(){return Math.LN2}],pi:[wr,[],function(){return Math.PI}],e:[wr,[],function(){return Math.E}],"^":[wr,[wr,wr],function(u,d){var g=d[1];return Math.pow(d[0].evaluate(u),g.evaluate(u))}],sqrt:[wr,[wr],function(u,d){return Math.sqrt(d[0].evaluate(u))}],log10:[wr,[wr],function(u,d){return Math.log(d[0].evaluate(u))/Math.LN10}],ln:[wr,[wr],function(u,d){return Math.log(d[0].evaluate(u))}],log2:[wr,[wr],function(u,d){return Math.log(d[0].evaluate(u))/Math.LN2}],sin:[wr,[wr],function(u,d){return Math.sin(d[0].evaluate(u))}],cos:[wr,[wr],function(u,d){return Math.cos(d[0].evaluate(u))}],tan:[wr,[wr],function(u,d){return Math.tan(d[0].evaluate(u))}],asin:[wr,[wr],function(u,d){return Math.asin(d[0].evaluate(u))}],acos:[wr,[wr],function(u,d){return Math.acos(d[0].evaluate(u))}],atan:[wr,[wr],function(u,d){return Math.atan(d[0].evaluate(u))}],min:[wr,pe(wr),function(u,d){return Math.min.apply(Math,d.map(function(g){return g.evaluate(u)}))}],max:[wr,pe(wr),function(u,d){return Math.max.apply(Math,d.map(function(g){return g.evaluate(u)}))}],abs:[wr,[wr],function(u,d){return Math.abs(d[0].evaluate(u))}],round:[wr,[wr],function(u,d){var g=d[0].evaluate(u);return g<0?-Math.round(-g):Math.round(g)}],floor:[wr,[wr],function(u,d){return Math.floor(d[0].evaluate(u))}],ceil:[wr,[wr],function(u,d){return Math.ceil(d[0].evaluate(u))}],"filter-==":[pi,[Ai,Si],function(u,d){var g=d[0],A=d[1];return u.properties()[g.value]===A.value}],"filter-id-==":[pi,[Si],function(u,d){var g=d[0];return u.id()===g.value}],"filter-type-==":[pi,[Ai],function(u,d){var g=d[0];return u.geometryType()===g.value}],"filter-<":[pi,[Ai,Si],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P<F}],"filter-id-<":[pi,[Si],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A<P}],"filter->":[pi,[Ai,Si],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P>F}],"filter-id->":[pi,[Si],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A>P}],"filter-<=":[pi,[Ai,Si],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P<=F}],"filter-id-<=":[pi,[Si],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A<=P}],"filter->=":[pi,[Ai,Si],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P>=F}],"filter-id->=":[pi,[Si],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A>=P}],"filter-has":[pi,[Si],function(u,d){return d[0].value in u.properties()}],"filter-has-id":[pi,[],function(u){return u.id()!==null&&u.id()!==void 0}],"filter-type-in":[pi,[jo(Ai)],function(u,d){return d[0].value.indexOf(u.geometryType())>=0}],"filter-id-in":[pi,[jo(Si)],function(u,d){return d[0].value.indexOf(u.id())>=0}],"filter-in-small":[pi,[Ai,jo(Si)],function(u,d){var g=d[0];return d[1].value.indexOf(u.properties()[g.value])>=0}],"filter-in-large":[pi,[Ai,jo(Si)],function(u,d){var g=d[0],A=d[1];return function(P,F,j,te){for(;j<=te;){var _e=j+te>>1;if(F[_e]===P)return!0;F[_e]>P?te=_e-1:j=_e+1}return!1}(u.properties()[g.value],A.value,0,A.value.length-1)}],all:{type:pi,overloads:[[[pi,pi],function(u,d){var g=d[1];return d[0].evaluate(u)&&g.evaluate(u)}],[pe(pi),function(u,d){for(var g=0,A=d;g<A.length;g+=1)if(!A[g].evaluate(u))return!1;return!0}]]},any:{type:pi,overloads:[[[pi,pi],function(u,d){var g=d[1];return d[0].evaluate(u)||g.evaluate(u)}],[pe(pi),function(u,d){for(var g=0,A=d;g<A.length;g+=1)if(A[g].evaluate(u))return!0;return!1}]]},"!":[pi,[pi],function(u,d){return!d[0].evaluate(u)}],"is-supported-script":[pi,[Ai],function(u,d){var g=u.globals&&u.globals.isSupportedScript;return!g||g(d[0].evaluate(u))}],upcase:[Ai,[Ai],function(u,d){return d[0].evaluate(u).toUpperCase()}],downcase:[Ai,[Ai],function(u,d){return d[0].evaluate(u).toLowerCase()}],concat:[Ai,pe(Si),function(u,d){return d.map(function(g){return Gi(g.evaluate(u))}).join("")}],"resolved-locale":[Ai,[Ci],function(u,d){return d[0].evaluate(u).resolvedLocale()}]});var _a=function(u,d){this.expression=u,this._warningHistory={},this._evaluator=new ya,this._defaultValue=d?function(g){return g.type==="color"&&Bi(g.default)?new _n(0,0,0,0):g.type==="color"?_n.parse(g.default)||null:g.default===void 0?null:g.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null};function Ba(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Mu}function Ca(u,d){var g=new af(Mu,[],d?function(P){var F={color:_i,string:Ai,number:wr,enum:Ai,boolean:pi,formatted:ho,resolvedImage:go};return P.type==="array"?jo(F[P.value]||Si,P.length):F[P.type]}(d):void 0),A=g.parse(u,void 0,void 0,void 0,d&&d.type==="string"?{typeAnnotation:"coerce"}:void 0);return A?Je(new _a(A,d)):sn(g.errors)}_a.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,F){return this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=g,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)},_a.prototype.evaluate=function(u,d,g,A,P,F){this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=g||null,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=F||null;try{var j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new qr("Expected value to be one of "+Object.keys(this._enumValues).map(function(te){return JSON.stringify(te)}).join(", ")+", but found "+JSON.stringify(j)+" instead.");return j}catch(te){return this._warningHistory[te.message]||(this._warningHistory[te.message]=!0,typeof console!="undefined"&&console.warn(te.message)),this._defaultValue}};var Xa=function(u,d){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!of(d.expression)};Xa.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,F){return this._styleExpression.evaluateWithoutErrorHandling(u,d,g,A,P,F)},Xa.prototype.evaluate=function(u,d,g,A,P,F){return this._styleExpression.evaluate(u,d,g,A,P,F)};var ba=function(u,d,g,A){this.kind=u,this.zoomStops=g,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!of(d.expression),this.interpolationType=A};function cs(u,d){if((u=Ca(u,d)).result==="error")return u;var g=u.value.expression,A=Uf(g);if(!A&&!fn(d))return sn([new Wr("","data expressions not supported")]);var P=au(g,["zoom"]);if(!P&&!ir(d))return sn([new Wr("","zoom expressions not supported")]);var F=function j(te){var _e=null;if(te instanceof su)_e=j(te.result);else if(te instanceof uf)for(var Ne=0,Xe=te.args;Ne<Xe.length&&!(_e=j(Xe[Ne]));Ne+=1);else(te instanceof Ou||te instanceof jl)&&te.input instanceof ia&&te.input.name==="zoom"&&(_e=te);return _e instanceof Wr||te.eachChild(function(it){var Tt=j(it);Tt instanceof Wr?_e=Tt:!_e&&Tt?_e=new Wr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):_e&&Tt&&_e!==Tt&&(_e=new Wr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),_e}(g);return F||P?F instanceof Wr?sn([F]):F instanceof jl&&!Cr(d)?sn([new Wr("",'"interpolate" expressions cannot be used with this property')]):Je(F?new ba(A?"camera":"composite",u.value,F.labels,F instanceof jl?F.interpolation:void 0):new Xa(A?"constant":"source",u.value)):sn([new Wr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ba.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,F){return this._styleExpression.evaluateWithoutErrorHandling(u,d,g,A,P,F)},ba.prototype.evaluate=function(u,d,g,A,P,F){return this._styleExpression.evaluate(u,d,g,A,P,F)},ba.prototype.interpolationFactor=function(u,d,g){return this.interpolationType?jl.interpolationFactor(this.interpolationType,u,d,g):0};var Ws=function(u,d){this._parameters=u,this._specification=d,Sr(this,function g(A,P){var F,j,te,_e=P.type==="color",Ne=A.stops&&typeof A.stops[0][0]=="object",Xe=Ne||!(Ne||A.property!==void 0),it=A.type||(Cr(P)?"exponential":"interval");if(_e&&((A=Sr({},A)).stops&&(A.stops=A.stops.map(function(oo){return[oo[0],_n.parse(oo[1])]})),A.default=_n.parse(A.default?A.default:P.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!Td[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(it==="exponential")F=Ea;else if(it==="interval")F=Fa;else if(it==="categorical"){F=Na,j=Object.create(null);for(var Tt=0,Bt=A.stops;Tt<Bt.length;Tt+=1){var vn=Bt[Tt];j[vn[0]]=vn[1]}te=typeof A.stops[0][0]}else{if(it!=="identity")throw new Error('Unknown function type "'+it+'"');F=Aa}if(Ne){for(var xn={},Zn=[],Ln=0;Ln<A.stops.length;Ln++){var fr=A.stops[Ln],xr=fr[0].zoom;xn[xr]===void 0&&(xn[xr]={zoom:xr,type:A.type,property:A.property,default:A.default,stops:[]},Zn.push(xr)),xn[xr].stops.push([fr[0].value,fr[1]])}for(var Pr=[],kr=0,Hr=Zn;kr<Hr.length;kr+=1){var Ni=Hr[kr];Pr.push([xn[Ni].zoom,g(xn[Ni],P)])}var Xi={name:"linear"};return{kind:"composite",interpolationType:Xi,interpolationFactor:jl.interpolationFactor.bind(void 0,Xi),zoomStops:Pr.map(function(oo){return oo[0]}),evaluate:function(oo,Yo){var fo=oo.zoom;return Ea({stops:Pr,base:A.base},P,fo).evaluate(fo,Yo)}}}if(Xe){var Uo=it==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:Uo,interpolationFactor:jl.interpolationFactor.bind(void 0,Uo),zoomStops:A.stops.map(function(oo){return oo[0]}),evaluate:function(oo){return F(A,P,oo.zoom,j,te)}}}return{kind:"source",evaluate:function(oo,Yo){var fo=Yo&&Yo.properties?Yo.properties[A.property]:void 0;return fo===void 0?vo(A.default,P.default):F(A,P,fo,j,te)}}}(this._parameters,this._specification))};function zs(u){var d=u.key,g=u.value,A=u.valueSpec||{},P=u.objectElementValidators||{},F=u.style,j=u.styleSpec,te=[],_e=Xr(g);if(_e!=="object")return[new Qt(d,g,"object expected, "+_e+" found")];for(var Ne in g){var Xe=Ne.split(".")[0],it=A[Xe]||A["*"],Tt=void 0;if(P[Xe])Tt=P[Xe];else if(A[Xe])Tt=$a;else if(P["*"])Tt=P["*"];else{if(!A["*"]){te.push(new Qt(d,g[Ne],'unknown property "'+Ne+'"'));continue}Tt=$a}te=te.concat(Tt({key:(d&&d+".")+Ne,value:g[Ne],valueSpec:it,style:F,styleSpec:j,object:g,objectKey:Ne},g))}for(var Bt in A)P[Bt]||A[Bt].required&&A[Bt].default===void 0&&g[Bt]===void 0&&te.push(new Qt(d,g,'missing required property "'+Bt+'"'));return te}function dc(u){var d=u.value,g=u.valueSpec,A=u.style,P=u.styleSpec,F=u.key,j=u.arrayElementValidator||$a;if(Xr(d)!=="array")return[new Qt(F,d,"array expected, "+Xr(d)+" found")];if(g.length&&d.length!==g.length)return[new Qt(F,d,"array length "+g.length+" expected, length "+d.length+" found")];if(g["min-length"]&&d.length<g["min-length"])return[new Qt(F,d,"array length at least "+g["min-length"]+" expected, length "+d.length+" found")];var te={type:g.value,values:g.values};P.$version<7&&(te.function=g.function),Xr(g.value)==="object"&&(te=g.value);for(var _e=[],Ne=0;Ne<d.length;Ne++)_e=_e.concat(j({array:d,arrayIndex:Ne,value:d[Ne],valueSpec:te,style:A,styleSpec:P,key:F+"["+Ne+"]"}));return _e}function dl(u){var d=u.key,g=u.value,A=u.valueSpec,P=Xr(g);return P==="number"&&g!=g&&(P="NaN"),P!=="number"?[new Qt(d,g,"number expected, "+P+" found")]:"minimum"in A&&g<A.minimum?[new Qt(d,g,g+" is less than the minimum value "+A.minimum)]:"maximum"in A&&g>A.maximum?[new Qt(d,g,g+" is greater than the maximum value "+A.maximum)]:[]}function ff(u){var d,g,A,P=u.valueSpec,F=Zr(u.value.type),j={},te=F!=="categorical"&&u.value.property===void 0,_e=!te,Ne=Xr(u.value.stops)==="array"&&Xr(u.value.stops[0])==="array"&&Xr(u.value.stops[0][0])==="object",Xe=zs({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Bt){if(F==="identity")return[new Qt(Bt.key,Bt.value,'identity function may not have a "stops" property')];var vn=[],xn=Bt.value;return vn=vn.concat(dc({key:Bt.key,value:xn,valueSpec:Bt.valueSpec,style:Bt.style,styleSpec:Bt.styleSpec,arrayElementValidator:it})),Xr(xn)==="array"&&xn.length===0&&vn.push(new Qt(Bt.key,xn,"array must have at least one stop")),vn},default:function(Bt){return $a({key:Bt.key,value:Bt.value,valueSpec:P,style:Bt.style,styleSpec:Bt.styleSpec})}}});return F==="identity"&&te&&Xe.push(new Qt(u.key,u.value,'missing required property "property"')),F==="identity"||u.value.stops||Xe.push(new Qt(u.key,u.value,'missing required property "stops"')),F==="exponential"&&u.valueSpec.expression&&!Cr(u.valueSpec)&&Xe.push(new Qt(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(_e&&!fn(u.valueSpec)?Xe.push(new Qt(u.key,u.value,"property functions not supported")):te&&!ir(u.valueSpec)&&Xe.push(new Qt(u.key,u.value,"zoom functions not supported"))),F!=="categorical"&&!Ne||u.value.property!==void 0||Xe.push(new Qt(u.key,u.value,'"property" property is required')),Xe;function it(Bt){var vn=[],xn=Bt.value,Zn=Bt.key;if(Xr(xn)!=="array")return[new Qt(Zn,xn,"array expected, "+Xr(xn)+" found")];if(xn.length!==2)return[new Qt(Zn,xn,"array length 2 expected, length "+xn.length+" found")];if(Ne){if(Xr(xn[0])!=="object")return[new Qt(Zn,xn,"object expected, "+Xr(xn[0])+" found")];if(xn[0].zoom===void 0)return[new Qt(Zn,xn,"object stop key must have zoom")];if(xn[0].value===void 0)return[new Qt(Zn,xn,"object stop key must have value")];if(A&&A>Zr(xn[0].zoom))return[new Qt(Zn,xn[0].zoom,"stop zoom values must appear in ascending order")];Zr(xn[0].zoom)!==A&&(A=Zr(xn[0].zoom),g=void 0,j={}),vn=vn.concat(zs({key:Zn+"[0]",value:xn[0],valueSpec:{zoom:{}},style:Bt.style,styleSpec:Bt.styleSpec,objectElementValidators:{zoom:dl,value:Tt}}))}else vn=vn.concat(Tt({key:Zn+"[0]",value:xn[0],valueSpec:{},style:Bt.style,styleSpec:Bt.styleSpec},xn));return Ba(yr(xn[1]))?vn.concat([new Qt(Zn+"[1]",xn[1],"expressions are not allowed in function stops.")]):vn.concat($a({key:Zn+"[1]",value:xn[1],valueSpec:P,style:Bt.style,styleSpec:Bt.styleSpec}))}function Tt(Bt,vn){var xn=Xr(Bt.value),Zn=Zr(Bt.value),Ln=Bt.value!==null?Bt.value:vn;if(d){if(xn!==d)return[new Qt(Bt.key,Ln,xn+" stop domain type must match previous stop domain type "+d)]}else d=xn;if(xn!=="number"&&xn!=="string"&&xn!=="boolean")return[new Qt(Bt.key,Ln,"stop domain value must be a number, string, or boolean")];if(xn!=="number"&&F!=="categorical"){var fr="number expected, "+xn+" found";return fn(P)&&F===void 0&&(fr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qt(Bt.key,Ln,fr)]}return F!=="categorical"||xn!=="number"||isFinite(Zn)&&Math.floor(Zn)===Zn?F!=="categorical"&&xn==="number"&&g!==void 0&&Zn<g?[new Qt(Bt.key,Ln,"stop domain values must appear in ascending order")]:(g=Zn,F==="categorical"&&Zn in j?[new Qt(Bt.key,Ln,"stop domain values must be unique")]:(j[Zn]=!0,[])):[new Qt(Bt.key,Ln,"integer expected, found "+Zn)]}}function hf(u){var d=(u.expressionContext==="property"?cs:Ca)(yr(u.value),u.valueSpec);if(d.result==="error")return d.value.map(function(A){return new Qt(""+u.key+A.key,u.value,A.message)});var g=d.value.expression||d.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!g.outputDefined())return[new Qt(u.key,u.value,'Invalid data expression for "'+u.propertyKey+'". Output values must be contained as literals within the expression.')];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!of(g))return[new Qt(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!of(g))return[new Qt(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!au(g,["zoom","feature-state"]))return[new Qt(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Uf(g))return[new Qt(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pc(u){var d=u.key,g=u.value,A=u.valueSpec,P=[];return Array.isArray(A.values)?A.values.indexOf(Zr(g))===-1&&P.push(new Qt(d,g,"expected one of ["+A.values.join(", ")+"], "+JSON.stringify(g)+" found")):Object.keys(A.values).indexOf(Zr(g))===-1&&P.push(new Qt(d,g,"expected one of ["+Object.keys(A.values).join(", ")+"], "+JSON.stringify(g)+" found")),P}function Gc(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(var d=0,g=u.slice(1);d<g.length;d+=1){var A=g[d];if(!Gc(A)&&typeof A!="boolean")return!1}return!0;default:return!0}}Ws.deserialize=function(u){return new Ws(u._parameters,u._specification)},Ws.serialize=function(u){return{_parameters:u._parameters,_specification:u._specification}};var bh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Jf(u){if(u==null)return{filter:function(){return!0},needGeometry:!1};Gc(u)||(u=ip(u));var d=Ca(u,bh);if(d.result==="error")throw new Error(d.value.map(function(g){return g.key+": "+g.message}).join(", "));return{filter:function(g,A,P){return d.value.evaluate(g,A,{},P)},needGeometry:function g(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var P=1;P<A.length;P++)if(g(A[P]))return!0;return!1}(u)}}function Mp(u,d){return u<d?-1:u>d?1:0}function ip(u){if(!u)return!0;var d,g=u[0];return u.length<=1?g!=="any":g==="=="?Rp(u[1],u[2],"=="):g==="!="?op(Rp(u[1],u[2],"==")):g==="<"||g===">"||g==="<="||g===">="?Rp(u[1],u[2],g):g==="any"?(d=u.slice(1),["any"].concat(d.map(ip))):g==="all"?["all"].concat(u.slice(1).map(ip)):g==="none"?["all"].concat(u.slice(1).map(ip).map(op)):g==="in"?Af(u[1],u.slice(2)):g==="!in"?op(Af(u[1],u.slice(2))):g==="has"?Pp(u[1]):g==="!has"?op(Pp(u[1])):g!=="within"||u}function Rp(u,d,g){switch(u){case"$type":return["filter-type-"+g,d];case"$id":return["filter-id-"+g,d];default:return["filter-"+g,u,d]}}function Af(u,d){if(d.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",d]];case"$id":return["filter-id-in",["literal",d]];default:return d.length>200&&!d.some(function(g){return typeof g!=typeof d[0]})?["filter-in-large",u,["literal",d.sort(Mp)]]:["filter-in-small",u,["literal",d]]}}function Pp(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function op(u){return["!",u]}function ap(u){return Gc(yr(u.value))?hf(Sr({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function d(g){var A=g.value,P=g.key;if(Xr(A)!=="array")return[new Qt(P,A,"array expected, "+Xr(A)+" found")];var F,j=g.styleSpec,te=[];if(A.length<1)return[new Qt(P,A,"filter array must have at least 1 element")];switch(te=te.concat(pc({key:P+"[0]",value:A[0],valueSpec:j.filter_operator,style:g.style,styleSpec:g.styleSpec})),Zr(A[0])){case"<":case"<=":case">":case">=":A.length>=2&&Zr(A[1])==="$type"&&te.push(new Qt(P,A,'"$type" cannot be use with operator "'+A[0]+'"'));case"==":case"!=":A.length!==3&&te.push(new Qt(P,A,'filter array for operator "'+A[0]+'" must have 3 elements'));case"in":case"!in":A.length>=2&&(F=Xr(A[1]))!=="string"&&te.push(new Qt(P+"[1]",A[1],"string expected, "+F+" found"));for(var _e=2;_e<A.length;_e++)F=Xr(A[_e]),Zr(A[1])==="$type"?te=te.concat(pc({key:P+"["+_e+"]",value:A[_e],valueSpec:j.geometry_type,style:g.style,styleSpec:g.styleSpec})):F!=="string"&&F!=="number"&&F!=="boolean"&&te.push(new Qt(P+"["+_e+"]",A[_e],"string, number, or boolean expected, "+F+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<A.length;Ne++)te=te.concat(d({key:P+"["+Ne+"]",value:A[Ne],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":F=Xr(A[1]),A.length!==2?te.push(new Qt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):F!=="string"&&te.push(new Qt(P+"[1]",A[1],"string expected, "+F+" found"));break;case"within":F=Xr(A[1]),A.length!==2?te.push(new Qt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):F!=="object"&&te.push(new Qt(P+"[1]",A[1],"object expected, "+F+" found"))}return te}(u)}function eh(u,d){var g=u.key,A=u.style,P=u.styleSpec,F=u.value,j=u.objectKey,te=P[d+"_"+u.layerType];if(!te)return[];var _e=j.match(/^(.*)-transition$/);if(d==="paint"&&_e&&te[_e[1]]&&te[_e[1]].transition)return $a({key:g,value:F,valueSpec:P.transition,style:A,styleSpec:P});var Ne,Xe=u.valueSpec||te[j];if(!Xe)return[new Qt(g,F,'unknown property "'+j+'"')];if(Xr(F)==="string"&&fn(Xe)&&!Xe.tokens&&(Ne=/^{([^}]+)}$/.exec(F)))return[new Qt(g,F,'"'+j+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ne[1])+" }`.")];var it=[];return u.layerType==="symbol"&&(j==="text-field"&&A&&!A.glyphs&&it.push(new Qt(g,F,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&Bi(yr(F))&&Zr(F.type)==="identity"&&it.push(new Qt(g,F,'"text-font" does not support identity functions'))),it.concat($a({key:u.key,value:F,valueSpec:Xe,style:A,styleSpec:P,expressionContext:"property",propertyType:d,propertyKey:j}))}function Ip(u){return eh(u,"paint")}function xh(u){return eh(u,"layout")}function Od(u){var d=[],g=u.value,A=u.key,P=u.style,F=u.styleSpec;g.type||g.ref||d.push(new Qt(A,g,'either "type" or "ref" is required'));var j,te=Zr(g.type),_e=Zr(g.ref);if(g.id)for(var Ne=Zr(g.id),Xe=0;Xe<u.arrayIndex;Xe++){var it=P.layers[Xe];Zr(it.id)===Ne&&d.push(new Qt(A,g.id,'duplicate layer id "'+g.id+'", previously used at line '+it.id.__line__))}if("ref"in g)["type","source","source-layer","filter","layout"].forEach(function(vn){vn in g&&d.push(new Qt(A,g[vn],'"'+vn+'" is prohibited for ref layers'))}),P.layers.forEach(function(vn){Zr(vn.id)===_e&&(j=vn)}),j?j.ref?d.push(new Qt(A,g.ref,"ref cannot reference another ref layer")):te=Zr(j.type):d.push(new Qt(A,g.ref,'ref layer "'+_e+'" not found'));else if(te!=="background")if(g.source){var Tt=P.sources&&P.sources[g.source],Bt=Tt&&Zr(Tt.type);Tt?Bt==="vector"&&te==="raster"?d.push(new Qt(A,g.source,'layer "'+g.id+'" requires a raster source')):Bt==="raster"&&te!=="raster"?d.push(new Qt(A,g.source,'layer "'+g.id+'" requires a vector source')):Bt!=="vector"||g["source-layer"]?Bt==="raster-dem"&&te!=="hillshade"?d.push(new Qt(A,g.source,"raster-dem source can only be used with layer type 'hillshade'.")):te!=="line"||!g.paint||!g.paint["line-gradient"]||Bt==="geojson"&&Tt.lineMetrics||d.push(new Qt(A,g,'layer "'+g.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):d.push(new Qt(A,g,'layer "'+g.id+'" must specify a "source-layer"')):d.push(new Qt(A,g.source,'source "'+g.source+'" not found'))}else d.push(new Qt(A,g,'missing required property "source"'));return d=d.concat(zs({key:A,value:g,valueSpec:F.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return $a({key:A+".type",value:g.type,valueSpec:F.layer.type,style:u.style,styleSpec:u.styleSpec,object:g,objectKey:"type"})},filter:ap,layout:function(vn){return zs({layer:g,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(xn){return xh(Sr({layerType:te},xn))}}})},paint:function(vn){return zs({layer:g,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(xn){return Ip(Sr({layerType:te},xn))}}})}}}))}function th(u){var d=u.value,g=u.key,A=Xr(d);return A!=="string"?[new Qt(g,d,"string expected, "+A+" found")]:[]}var Gs={promoteId:function(u){var d=u.key,g=u.value;if(Xr(g)==="string")return th({key:d,value:g});var A=[];for(var P in g)A.push.apply(A,th({key:d+"."+P,value:g[P]}));return A}};function nh(u){var d=u.value,g=u.key,A=u.styleSpec,P=u.style;if(!d.type)return[new Qt(g,d,'"type" is required')];var F,j=Zr(d.type);switch(j){case"vector":case"raster":case"raster-dem":return zs({key:g,value:d,valueSpec:A["source_"+j.replace("-","_")],style:u.style,styleSpec:A,objectElementValidators:Gs});case"geojson":if(F=zs({key:g,value:d,valueSpec:A.source_geojson,style:P,styleSpec:A,objectElementValidators:Gs}),d.cluster)for(var te in d.clusterProperties){var _e=d.clusterProperties[te],Ne=_e[0],Xe=typeof Ne=="string"?[Ne,["accumulated"],["get",te]]:Ne;F.push.apply(F,hf({key:g+"."+te+".map",value:_e[1],expressionContext:"cluster-map"})),F.push.apply(F,hf({key:g+"."+te+".reduce",value:Xe,expressionContext:"cluster-reduce"}))}return F;case"video":return zs({key:g,value:d,valueSpec:A.source_video,style:P,styleSpec:A});case"image":return zs({key:g,value:d,valueSpec:A.source_image,style:P,styleSpec:A});case"canvas":return[new Qt(g,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pc({key:g+".type",value:d.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,styleSpec:A})}}function df(u){var d=u.value,g=u.styleSpec,A=g.light,P=u.style,F=[],j=Xr(d);if(d===void 0)return F;if(j!=="object")return F.concat([new Qt("light",d,"object expected, "+j+" found")]);for(var te in d){var _e=te.match(/^(.*)-transition$/);F=F.concat(_e&&A[_e[1]]&&A[_e[1]].transition?$a({key:te,value:d[te],valueSpec:g.transition,style:P,styleSpec:g}):A[te]?$a({key:te,value:d[te],valueSpec:A[te],style:P,styleSpec:g}):[new Qt(te,d[te],'unknown property "'+te+'"')])}return F}var Vf={"*":function(){return[]},array:dc,boolean:function(u){var d=u.value,g=u.key,A=Xr(d);return A!=="boolean"?[new Qt(g,d,"boolean expected, "+A+" found")]:[]},number:dl,color:function(u){var d=u.key,g=u.value,A=Xr(g);return A!=="string"?[new Qt(d,g,"color expected, "+A+" found")]:Bn(g)===null?[new Qt(d,g,'color expected, "'+g+'" found')]:[]},constants:Qn,enum:pc,filter:ap,function:ff,layer:Od,object:zs,source:nh,light:df,string:th,formatted:function(u){return th(u).length===0?[]:hf(u)},resolvedImage:function(u){return th(u).length===0?[]:hf(u)}};function $a(u){var d=u.value,g=u.valueSpec,A=u.styleSpec;return g.expression&&Bi(Zr(d))?ff(u):g.expression&&Ba(yr(d))?hf(u):g.type&&Vf[g.type]?Vf[g.type](u):zs(Sr({},u,{valueSpec:g.type?A[g.type]:g}))}function ue(u){var d=u.value,g=u.key,A=th(u);return A.length||(d.indexOf("{fontstack}")===-1&&A.push(new Qt(g,d,'"glyphs" url must include a "{fontstack}" token')),d.indexOf("{range}")===-1&&A.push(new Qt(g,d,'"glyphs" url must include a "{range}" token'))),A}function We(u,d){d===void 0&&(d=Et);var g=[];return g=g.concat($a({key:"",value:u,valueSpec:d.$root,styleSpec:d,style:u,objectElementValidators:{glyphs:ue,"*":function(){return[]}}})),u.constants&&(g=g.concat(Qn({key:"constants",value:u.constants,style:u,styleSpec:d}))),xt(g)}function xt(u){return[].concat(u).sort(function(d,g){return d.line-g.line})}function Pn(u){return function(){for(var d=[],g=arguments.length;g--;)d[g]=arguments[g];return xt(u.apply(this,d))}}We.source=Pn(nh),We.light=Pn(df),We.layer=Pn(Od),We.filter=Pn(ap),We.paintProperty=Pn(Ip),We.layoutProperty=Pn(xh);var ur=We,Br=ur.light,fi=ur.paintProperty,Ii=ur.layoutProperty;function Xo(u,d){var g=!1;if(d&&d.length)for(var A=0,P=d;A<P.length;A+=1)u.fire(new nn(new Error(P[A].message))),g=!0;return g}var Wo=da;function da(u,d,g){var A=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var P=new Int32Array(this.arrayBuffer);u=P[0],this.d=(d=P[1])+2*(g=P[2]);for(var F=0;F<this.d*this.d;F++){var j=P[3+F],te=P[3+F+1];A.push(j===te?null:P.subarray(j,te))}var _e=P[3+A.length+1];this.keys=P.subarray(P[3+A.length],_e),this.bboxes=P.subarray(_e),this.insert=this._insertReadonly}else{this.d=d+2*g;for(var Ne=0;Ne<this.d*this.d;Ne++)A.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=g,this.scale=d/u,this.uid=0;var Xe=g/d*u;this.min=-Xe,this.max=u+Xe}da.prototype.insert=function(u,d,g,A,P){this._forEachCell(d,g,A,P,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(A),this.bboxes.push(P)},da.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},da.prototype._insertCell=function(u,d,g,A,P,F){this.cells[P].push(F)},da.prototype.query=function(u,d,g,A,P){var F=this.min,j=this.max;if(u<=F&&d<=F&&j<=g&&j<=A&&!P)return Array.prototype.slice.call(this.keys);var te=[];return this._forEachCell(u,d,g,A,this._queryCell,te,{},P),te},da.prototype._queryCell=function(u,d,g,A,P,F,j,te){var _e=this.cells[P];if(_e!==null)for(var Ne=this.keys,Xe=this.bboxes,it=0;it<_e.length;it++){var Tt=_e[it];if(j[Tt]===void 0){var Bt=4*Tt;(te?te(Xe[Bt+0],Xe[Bt+1],Xe[Bt+2],Xe[Bt+3]):u<=Xe[Bt+2]&&d<=Xe[Bt+3]&&g>=Xe[Bt+0]&&A>=Xe[Bt+1])?(j[Tt]=!0,F.push(Ne[Tt])):j[Tt]=!1}}},da.prototype._forEachCell=function(u,d,g,A,P,F,j,te){for(var _e=this._convertToCellCoord(u),Ne=this._convertToCellCoord(d),Xe=this._convertToCellCoord(g),it=this._convertToCellCoord(A),Tt=_e;Tt<=Xe;Tt++)for(var Bt=Ne;Bt<=it;Bt++){var vn=this.d*Bt+Tt;if((!te||te(this._convertFromCellCoord(Tt),this._convertFromCellCoord(Bt),this._convertFromCellCoord(Tt+1),this._convertFromCellCoord(Bt+1)))&&P.call(this,u,d,g,A,vn,F,j,te))return}},da.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},da.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},da.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,d=3+this.cells.length+1+1,g=0,A=0;A<this.cells.length;A++)g+=this.cells[A].length;var P=new Int32Array(d+g+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;for(var F=d,j=0;j<u.length;j++){var te=u[j];P[3+j]=F,P.set(te,F),F+=te.length}return P[3+u.length]=F,P.set(this.keys,F),P[3+u.length+1]=F+=this.keys.length,P.set(this.bboxes,F),F+=this.bboxes.length,P.buffer};var $s=ae.ImageData,Rl=ae.ImageBitmap,Es={};function Ji(u,d,g){g===void 0&&(g={}),Object.defineProperty(d,"_classRegistryKey",{value:u,writeable:!1}),Es[u]={klass:d,omit:g.omit||[],shallow:g.shallow||[]}}for(var Pl in Ji("Object",Object),Wo.serialize=function(u,d){var g=u.toArrayBuffer();return d&&d.push(g),{buffer:g}},Wo.deserialize=function(u){return new Wo(u.buffer)},Ji("Grid",Wo),Ji("Color",_n),Ji("Error",Error),Ji("ResolvedImage",ni),Ji("StylePropertyFunction",Ws),Ji("StyleExpression",_a,{omit:["_evaluator"]}),Ji("ZoomDependentExpression",ba),Ji("ZoomConstantExpression",Xa),Ji("CompoundExpression",ia,{omit:["_evaluate"]}),Mu)Mu[Pl]._classRegistryKey||Ji("Expression_"+Pl,Mu[Pl]);function Eh(u){return u&&typeof ArrayBuffer!="undefined"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function qh(u){return Rl&&u instanceof Rl}function Ka(u,d){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(Eh(u)||qh(u))return d&&d.push(u),u;if(ArrayBuffer.isView(u)){var g=u;return d&&d.push(g.buffer),g}if(u instanceof $s)return d&&d.push(u.data.buffer),u;if(Array.isArray(u)){for(var A=[],P=0,F=u;P<F.length;P+=1)A.push(Ka(F[P],d));return A}if(typeof u=="object"){var j=u.constructor,te=j._classRegistryKey;if(!te)throw new Error("can't serialize object of unregistered class");var _e=j.serialize?j.serialize(u,d):{};if(!j.serialize){for(var Ne in u)if(u.hasOwnProperty(Ne)&&!(Es[te].omit.indexOf(Ne)>=0)){var Xe=u[Ne];_e[Ne]=Es[te].shallow.indexOf(Ne)>=0?Xe:Ka(Xe,d)}u instanceof Error&&(_e.message=u.message)}if(_e.$name)throw new Error("$name property is reserved for worker serialization logic.");return te!=="Object"&&(_e.$name=te),_e}throw new Error("can't serialize object of type "+typeof u)}function Cs(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||Eh(u)||qh(u)||ArrayBuffer.isView(u)||u instanceof $s)return u;if(Array.isArray(u))return u.map(Cs);if(typeof u=="object"){var d=u.$name||"Object",g=Es[d].klass;if(!g)throw new Error("can't deserialize unregistered class "+d);if(g.deserialize)return g.deserialize(u);for(var A=Object.create(g.prototype),P=0,F=Object.keys(u);P<F.length;P+=1){var j=F[P];if(j!=="$name"){var te=u[j];A[j]=Es[d].shallow.indexOf(j)>=0?te:Cs(te)}}return A}throw new Error("can't deserialize object of type "+typeof u)}var vc=function(){this.first=!0};vc.prototype.update=function(u,d){var g=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=g,!0))};var Ui={"Latin-1 Supplement":function(u){return u>=128&&u<=255},Arabic:function(u){return u>=1536&&u<=1791},"Arabic Supplement":function(u){return u>=1872&&u<=1919},"Arabic Extended-A":function(u){return u>=2208&&u<=2303},"Hangul Jamo":function(u){return u>=4352&&u<=4607},"Unified Canadian Aboriginal Syllabics":function(u){return u>=5120&&u<=5759},Khmer:function(u){return u>=6016&&u<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(u){return u>=6320&&u<=6399},"General Punctuation":function(u){return u>=8192&&u<=8303},"Letterlike Symbols":function(u){return u>=8448&&u<=8527},"Number Forms":function(u){return u>=8528&&u<=8591},"Miscellaneous Technical":function(u){return u>=8960&&u<=9215},"Control Pictures":function(u){return u>=9216&&u<=9279},"Optical Character Recognition":function(u){return u>=9280&&u<=9311},"Enclosed Alphanumerics":function(u){return u>=9312&&u<=9471},"Geometric Shapes":function(u){return u>=9632&&u<=9727},"Miscellaneous Symbols":function(u){return u>=9728&&u<=9983},"Miscellaneous Symbols and Arrows":function(u){return u>=11008&&u<=11263},"CJK Radicals Supplement":function(u){return u>=11904&&u<=12031},"Kangxi Radicals":function(u){return u>=12032&&u<=12255},"Ideographic Description Characters":function(u){return u>=12272&&u<=12287},"CJK Symbols and Punctuation":function(u){return u>=12288&&u<=12351},Hiragana:function(u){return u>=12352&&u<=12447},Katakana:function(u){return u>=12448&&u<=12543},Bopomofo:function(u){return u>=12544&&u<=12591},"Hangul Compatibility Jamo":function(u){return u>=12592&&u<=12687},Kanbun:function(u){return u>=12688&&u<=12703},"Bopomofo Extended":function(u){return u>=12704&&u<=12735},"CJK Strokes":function(u){return u>=12736&&u<=12783},"Katakana Phonetic Extensions":function(u){return u>=12784&&u<=12799},"Enclosed CJK Letters and Months":function(u){return u>=12800&&u<=13055},"CJK Compatibility":function(u){return u>=13056&&u<=13311},"CJK Unified Ideographs Extension A":function(u){return u>=13312&&u<=19903},"Yijing Hexagram Symbols":function(u){return u>=19904&&u<=19967},"CJK Unified Ideographs":function(u){return u>=19968&&u<=40959},"Yi Syllables":function(u){return u>=40960&&u<=42127},"Yi Radicals":function(u){return u>=42128&&u<=42191},"Hangul Jamo Extended-A":function(u){return u>=43360&&u<=43391},"Hangul Syllables":function(u){return u>=44032&&u<=55215},"Hangul Jamo Extended-B":function(u){return u>=55216&&u<=55295},"Private Use Area":function(u){return u>=57344&&u<=63743},"CJK Compatibility Ideographs":function(u){return u>=63744&&u<=64255},"Arabic Presentation Forms-A":function(u){return u>=64336&&u<=65023},"Vertical Forms":function(u){return u>=65040&&u<=65055},"CJK Compatibility Forms":function(u){return u>=65072&&u<=65103},"Small Form Variants":function(u){return u>=65104&&u<=65135},"Arabic Presentation Forms-B":function(u){return u>=65136&&u<=65279},"Halfwidth and Fullwidth Forms":function(u){return u>=65280&&u<=65519}};function Cf(u){for(var d=0,g=u;d<g.length;d+=1)if(Md(g[d].charCodeAt(0)))return!0;return!1}function Md(u){return!(u!==746&&u!==747&&(u<4352||!(Ui["Bopomofo Extended"](u)||Ui.Bopomofo(u)||Ui["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Ui["CJK Compatibility Ideographs"](u)||Ui["CJK Compatibility"](u)||Ui["CJK Radicals Supplement"](u)||Ui["CJK Strokes"](u)||!(!Ui["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Ui["CJK Unified Ideographs Extension A"](u)||Ui["CJK Unified Ideographs"](u)||Ui["Enclosed CJK Letters and Months"](u)||Ui["Hangul Compatibility Jamo"](u)||Ui["Hangul Jamo Extended-A"](u)||Ui["Hangul Jamo Extended-B"](u)||Ui["Hangul Jamo"](u)||Ui["Hangul Syllables"](u)||Ui.Hiragana(u)||Ui["Ideographic Description Characters"](u)||Ui.Kanbun(u)||Ui["Kangxi Radicals"](u)||Ui["Katakana Phonetic Extensions"](u)||Ui.Katakana(u)&&u!==12540||!(!Ui["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Ui["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Ui["Unified Canadian Aboriginal Syllabics"](u)||Ui["Unified Canadian Aboriginal Syllabics Extended"](u)||Ui["Vertical Forms"](u)||Ui["Yijing Hexagram Symbols"](u)||Ui["Yi Syllables"](u)||Ui["Yi Radicals"](u))))}function Kh(u){return!(Md(u)||function(d){return!!(Ui["Latin-1 Supplement"](d)&&(d===167||d===169||d===174||d===177||d===188||d===189||d===190||d===215||d===247)||Ui["General Punctuation"](d)&&(d===8214||d===8224||d===8225||d===8240||d===8241||d===8251||d===8252||d===8258||d===8263||d===8264||d===8265||d===8273)||Ui["Letterlike Symbols"](d)||Ui["Number Forms"](d)||Ui["Miscellaneous Technical"](d)&&(d>=8960&&d<=8967||d>=8972&&d<=8991||d>=8996&&d<=9e3||d===9003||d>=9085&&d<=9114||d>=9150&&d<=9165||d===9167||d>=9169&&d<=9179||d>=9186&&d<=9215)||Ui["Control Pictures"](d)&&d!==9251||Ui["Optical Character Recognition"](d)||Ui["Enclosed Alphanumerics"](d)||Ui["Geometric Shapes"](d)||Ui["Miscellaneous Symbols"](d)&&!(d>=9754&&d<=9759)||Ui["Miscellaneous Symbols and Arrows"](d)&&(d>=11026&&d<=11055||d>=11088&&d<=11097||d>=11192&&d<=11243)||Ui["CJK Symbols and Punctuation"](d)||Ui.Katakana(d)||Ui["Private Use Area"](d)||Ui["CJK Compatibility Forms"](d)||Ui["Small Form Variants"](d)||Ui["Halfwidth and Fullwidth Forms"](d)||d===8734||d===8756||d===8757||d>=9984&&d<=10087||d>=10102&&d<=10131||d===65532||d===65533)}(u))}function Of(u){return u>=1424&&u<=2303||Ui["Arabic Presentation Forms-A"](u)||Ui["Arabic Presentation Forms-B"](u)}function mc(u,d){return!(!d&&Of(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Ui.Khmer(u))}function Jp(u){for(var d=0,g=u;d<g.length;d+=1)if(Of(g[d].charCodeAt(0)))return!0;return!1}var Sh=null,nc="unavailable",rh=null,Rd=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(nc="error"),Sh&&Sh(u)};function Pd(){Lp.fire(new At("pluginStateChange",{pluginStatus:nc,pluginURL:rh}))}var Lp=new cn,e0=function(){return nc},Oc=function(){if(nc!=="deferred"||!rh)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");nc="loading",Pd(),rh&&Er({url:rh},function(u){u?Rd(u):(nc="loaded",Pd())})},pf={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return nc==="loaded"||pf.applyArabicShaping!=null},isLoading:function(){return nc==="loading"},setState:function(u){nc=u.pluginStatus,rh=u.pluginURL},isParsed:function(){return pf.applyArabicShaping!=null&&pf.processBidirectionalText!=null&&pf.processStyledBidirectionalText!=null},getPluginURL:function(){return rh}},Sa=function(u,d){this.zoom=u,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new vc,this.transition={})};Sa.prototype.isSupportedScript=function(u){return function(d,g){for(var A=0,P=d;A<P.length;A+=1)if(!mc(P[A].charCodeAt(0),g))return!1;return!0}(u,pf.isLoaded())},Sa.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Sa.prototype.getCrossfadeParameters=function(){var u=this.zoom,d=u-Math.floor(u),g=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*d}};var gc=function(u,d){this.property=u,this.value=d,this.expression=function(g,A){if(Bi(g))return new Ws(g,A);if(Ba(g)){var P=cs(g,A);if(P.result==="error")throw new Error(P.value.map(function(j){return j.key+": "+j.message}).join(", "));return P.value}var F=g;return typeof g=="string"&&A.type==="color"&&(F=_n.parse(g)),{kind:"constant",evaluate:function(){return F}}}(d===void 0?u.specification.default:d,u.specification)};gc.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},gc.prototype.possiblyEvaluate=function(u,d,g){return this.property.possiblyEvaluate(this,u,d,g)};var pl=function(u){this.property=u,this.value=new gc(u,void 0)};pl.prototype.transitioned=function(u,d){return new Qh(this.property,this.value,d,le({},u.transition,this.transition),u.now)},pl.prototype.untransitioned=function(){return new Qh(this.property,this.value,null,{},0)};var vl=function(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)};vl.prototype.getValue=function(u){return Ae(this._values[u].value.value)},vl.prototype.setValue=function(u,d){this._values.hasOwnProperty(u)||(this._values[u]=new pl(this._values[u].property)),this._values[u].value=new gc(this._values[u].property,d===null?void 0:Ae(d))},vl.prototype.getTransition=function(u){return Ae(this._values[u].transition)},vl.prototype.setTransition=function(u,d){this._values.hasOwnProperty(u)||(this._values[u]=new pl(this._values[u].property)),this._values[u].transition=Ae(d)||void 0},vl.prototype.serialize=function(){for(var u={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(u[A]=P);var F=this.getTransition(A);F!==void 0&&(u[A+"-transition"]=F)}return u},vl.prototype.transitioned=function(u,d){for(var g=new wh(this._properties),A=0,P=Object.keys(this._values);A<P.length;A+=1){var F=P[A];g._values[F]=this._values[F].transitioned(u,d._values[F])}return g},vl.prototype.untransitioned=function(){for(var u=new wh(this._properties),d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d];u._values[A]=this._values[A].untransitioned()}return u};var Qh=function(u,d,g,A,P){this.property=u,this.value=d,this.begin=P+A.delay||0,this.end=this.begin+A.duration||0,u.specification.transition&&(A.delay||A.duration)&&(this.prior=g)};Qh.prototype.possiblyEvaluate=function(u,d,g){var A=u.now||0,P=this.value.possiblyEvaluate(u,d,g),F=this.prior;if(F){if(A>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(A<this.begin)return F.possiblyEvaluate(u,d,g);var j=(A-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(u,d,g),P,function(te){if(te<=0)return 0;if(te>=1)return 1;var _e=te*te,Ne=_e*te;return 4*(te<.5?Ne:3*(te-_e)+Ne-.75)}(j))}return P};var wh=function(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)};wh.prototype.possiblyEvaluate=function(u,d,g){for(var A=new Id(this._properties),P=0,F=Object.keys(this._values);P<F.length;P+=1){var j=F[P];A._values[j]=this._values[j].possiblyEvaluate(u,d,g)}return A},wh.prototype.hasTransition=function(){for(var u=0,d=Object.keys(this._values);u<d.length;u+=1)if(this._values[d[u]].prior)return!0;return!1};var Mf=function(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)};Mf.prototype.getValue=function(u){return Ae(this._values[u].value)},Mf.prototype.setValue=function(u,d){this._values[u]=new gc(this._values[u].property,d===null?void 0:Ae(d))},Mf.prototype.serialize=function(){for(var u={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(u[A]=P)}return u},Mf.prototype.possiblyEvaluate=function(u,d,g){for(var A=new Id(this._properties),P=0,F=Object.keys(this._values);P<F.length;P+=1){var j=F[P];A._values[j]=this._values[j].possiblyEvaluate(u,d,g)}return A};var rc=function(u,d,g){this.property=u,this.value=d,this.parameters=g};rc.prototype.isConstant=function(){return this.value.kind==="constant"},rc.prototype.constantOr=function(u){return this.value.kind==="constant"?this.value.value:u},rc.prototype.evaluate=function(u,d,g,A){return this.property.evaluate(this.value,this.parameters,u,d,g,A)};var Id=function(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)};Id.prototype.get=function(u){return this._values[u]};var ko=function(u){this.specification=u};ko.prototype.possiblyEvaluate=function(u,d){return u.expression.evaluate(d)},ko.prototype.interpolate=function(u,d,g){var A=tc[this.specification.type];return A?A(u,d,g):u};var Ao=function(u,d){this.specification=u,this.overrides=d};Ao.prototype.possiblyEvaluate=function(u,d,g,A){return new rc(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},g,A)}:u.expression,d)},Ao.prototype.interpolate=function(u,d,g){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new rc(this,{kind:"constant",value:void 0},u.parameters);var A=tc[this.specification.type];return A?new rc(this,{kind:"constant",value:A(u.value.value,d.value.value,g)},u.parameters):u},Ao.prototype.evaluate=function(u,d,g,A,P,F){return u.kind==="constant"?u.value:u.evaluate(d,g,A,P,F)};var Ql=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A,P,F){if(g.value===void 0)return new rc(this,{kind:"constant",value:void 0},A);if(g.expression.kind==="constant"){var j=g.expression.evaluate(A,null,{},P,F),te=g.property.specification.type==="resolvedImage"&&typeof j!="string"?j.name:j,_e=this._calculate(te,te,te,A);return new rc(this,{kind:"constant",value:_e},A)}if(g.expression.kind==="camera"){var Ne=this._calculate(g.expression.evaluate({zoom:A.zoom-1}),g.expression.evaluate({zoom:A.zoom}),g.expression.evaluate({zoom:A.zoom+1}),A);return new rc(this,{kind:"constant",value:Ne},A)}return new rc(this,g.expression,A)},d.prototype.evaluate=function(g,A,P,F,j,te){if(g.kind==="source"){var _e=g.evaluate(A,P,F,j,te);return this._calculate(_e,_e,_e,A)}return g.kind==="composite"?this._calculate(g.evaluate({zoom:Math.floor(A.zoom)-1},P,F),g.evaluate({zoom:Math.floor(A.zoom)},P,F),g.evaluate({zoom:Math.floor(A.zoom)+1},P,F),A):g.value},d.prototype._calculate=function(g,A,P,F){return F.zoom>F.zoomHistory.lastIntegerZoom?{from:g,to:A}:{from:P,to:A}},d.prototype.interpolate=function(g){return g},d}(Ao),ju=function(u){this.specification=u};ju.prototype.possiblyEvaluate=function(u,d,g,A){if(u.value!==void 0){if(u.expression.kind==="constant"){var P=u.expression.evaluate(d,null,{},g,A);return this._calculate(P,P,P,d)}return this._calculate(u.expression.evaluate(new Sa(Math.floor(d.zoom-1),d)),u.expression.evaluate(new Sa(Math.floor(d.zoom),d)),u.expression.evaluate(new Sa(Math.floor(d.zoom+1),d)),d)}},ju.prototype._calculate=function(u,d,g,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:g,to:d}},ju.prototype.interpolate=function(u){return u};var Vu=function(u){this.specification=u};Vu.prototype.possiblyEvaluate=function(u,d,g,A){return!!u.expression.evaluate(d,null,{},g,A)},Vu.prototype.interpolate=function(){return!1};var ml=function(u){for(var d in this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],u){var g=u[d];g.specification.overridable&&this.overridableProperties.push(d);var A=this.defaultPropertyValues[d]=new gc(g,void 0),P=this.defaultTransitionablePropertyValues[d]=new pl(g);this.defaultTransitioningPropertyValues[d]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=A.possiblyEvaluate({})}};Ji("DataDrivenProperty",Ao),Ji("DataConstantProperty",ko),Ji("CrossFadedDataDrivenProperty",Ql),Ji("CrossFadedProperty",ju),Ji("ColorRampProperty",Vu);var Zc=function(u){function d(g,A){if(u.call(this),this.id=g.id,this.type=g.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},g.type!=="custom"&&(this.metadata=(g=g).metadata,this.minzoom=g.minzoom,this.maxzoom=g.maxzoom,g.type!=="background"&&(this.source=g.source,this.sourceLayer=g["source-layer"],this.filter=g.filter),A.layout&&(this._unevaluatedLayout=new Mf(A.layout)),A.paint)){for(var P in this._transitionablePaint=new vl(A.paint),g.paint)this.setPaintProperty(P,g.paint[P],{validate:!1});for(var F in g.layout)this.setLayoutProperty(F,g.layout[F],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Id(A.paint)}}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},d.prototype.getLayoutProperty=function(g){return g==="visibility"?this.visibility:this._unevaluatedLayout.getValue(g)},d.prototype.setLayoutProperty=function(g,A,P){P===void 0&&(P={}),A!=null&&this._validate(Ii,"layers."+this.id+".layout."+g,g,A,P)||(g!=="visibility"?this._unevaluatedLayout.setValue(g,A):this.visibility=A)},d.prototype.getPaintProperty=function(g){return gt(g,"-transition")?this._transitionablePaint.getTransition(g.slice(0,-11)):this._transitionablePaint.getValue(g)},d.prototype.setPaintProperty=function(g,A,P){if(P===void 0&&(P={}),A!=null&&this._validate(fi,"layers."+this.id+".paint."+g,g,A,P))return!1;if(gt(g,"-transition"))return this._transitionablePaint.setTransition(g.slice(0,-11),A||void 0),!1;var F=this._transitionablePaint._values[g],j=F.property.specification["property-type"]==="cross-faded-data-driven",te=F.value.isDataDriven(),_e=F.value;this._transitionablePaint.setValue(g,A),this._handleSpecialPaintPropertyUpdate(g);var Ne=this._transitionablePaint._values[g].value;return Ne.isDataDriven()||te||j||this._handleOverridablePaintPropertyUpdate(g,_e,Ne)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!1},d.prototype.isHidden=function(g){return!!(this.minzoom&&g<this.minzoom)||!!(this.maxzoom&&g>=this.maxzoom)||this.visibility==="none"},d.prototype.updateTransitions=function(g){this._transitioningPaint=this._transitionablePaint.transitioned(g,this._transitioningPaint)},d.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},d.prototype.recalculate=function(g,A){g.getCrossfadeParameters&&(this._crossfadeParameters=g.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(g,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(g,void 0,A)},d.prototype.serialize=function(){var g={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(g.layout=g.layout||{},g.layout.visibility=this.visibility),Pe(g,function(A,P){return!(A===void 0||P==="layout"&&!Object.keys(A).length||P==="paint"&&!Object.keys(A).length)})},d.prototype._validate=function(g,A,P,F,j){return j===void 0&&(j={}),(!j||j.validate!==!1)&&Xo(this,g.call(ur,{key:A,layerType:this.type,objectKey:P,value:F,styleSpec:Et,style:{glyphs:!0,sprite:!0}}))},d.prototype.is3D=function(){return!1},d.prototype.isTileClipped=function(){return!1},d.prototype.hasOffscreenPass=function(){return!1},d.prototype.resize=function(){},d.prototype.isStateDependent=function(){for(var g in this.paint._values){var A=this.paint.get(g);if(A instanceof rc&&fn(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1},d}(cn),Th={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Jh=function(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ss=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function bu(u,d){d===void 0&&(d=1);var g=0,A=0;return{members:u.map(function(P){var F=Th[P.type].BYTES_PER_ELEMENT,j=g=k0(g,Math.max(d,F)),te=P.components||1;return A=Math.max(A,F),g+=F*te,{name:P.name,type:P.type,components:te,offset:j}}),size:k0(g,Math.max(A,d)),alignment:d}}function k0(u,d){return Math.ceil(u/d)*d}Ss.serialize=function(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}},Ss.deserialize=function(u){var d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d},Ss.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ss.prototype.clear=function(){this.length=0},Ss.prototype.resize=function(u){this.reserve(u),this.length=u},Ss.prototype.reserve=function(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}},Ss.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ah=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var F=2*g;return this.int16[F+0]=A,this.int16[F+1]=P,g},d}(Ss);Ah.prototype.bytesPerElement=4,Ji("StructArrayLayout2i4",Ah);var sp=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,F)},d.prototype.emplace=function(g,A,P,F,j){var te=4*g;return this.int16[te+0]=A,this.int16[te+1]=P,this.int16[te+2]=F,this.int16[te+3]=j,g},d}(Ss);sp.prototype.bytesPerElement=8,Ji("StructArrayLayout4i8",sp);var Ch=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,te){var _e=this.length;return this.resize(_e+1),this.emplace(_e,g,A,P,F,j,te)},d.prototype.emplace=function(g,A,P,F,j,te,_e){var Ne=6*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.int16[Ne+2]=F,this.int16[Ne+3]=j,this.int16[Ne+4]=te,this.int16[Ne+5]=_e,g},d}(Ss);Ch.prototype.bytesPerElement=12,Ji("StructArrayLayout2i4i12",Ch);var ic=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,te){var _e=this.length;return this.resize(_e+1),this.emplace(_e,g,A,P,F,j,te)},d.prototype.emplace=function(g,A,P,F,j,te,_e){var Ne=4*g,Xe=8*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.uint8[Xe+4]=F,this.uint8[Xe+5]=j,this.uint8[Xe+6]=te,this.uint8[Xe+7]=_e,g},d}(Ss);ic.prototype.bytesPerElement=8,Ji("StructArrayLayout2i4ub8",ic);var ih=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var F=2*g;return this.float32[F+0]=A,this.float32[F+1]=P,g},d}(Ss);ih.prototype.bytesPerElement=8,Ji("StructArrayLayout2f8",ih);var yc=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,te,_e,Ne,Xe,it){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,g,A,P,F,j,te,_e,Ne,Xe,it)},d.prototype.emplace=function(g,A,P,F,j,te,_e,Ne,Xe,it,Tt){var Bt=10*g;return this.uint16[Bt+0]=A,this.uint16[Bt+1]=P,this.uint16[Bt+2]=F,this.uint16[Bt+3]=j,this.uint16[Bt+4]=te,this.uint16[Bt+5]=_e,this.uint16[Bt+6]=Ne,this.uint16[Bt+7]=Xe,this.uint16[Bt+8]=it,this.uint16[Bt+9]=Tt,g},d}(Ss);yc.prototype.bytesPerElement=20,Ji("StructArrayLayout10ui20",yc);var t0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt){var vn=this.length;return this.resize(vn+1),this.emplace(vn,g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt)},d.prototype.emplace=function(g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn){var xn=12*g;return this.int16[xn+0]=A,this.int16[xn+1]=P,this.int16[xn+2]=F,this.int16[xn+3]=j,this.uint16[xn+4]=te,this.uint16[xn+5]=_e,this.uint16[xn+6]=Ne,this.uint16[xn+7]=Xe,this.int16[xn+8]=it,this.int16[xn+9]=Tt,this.int16[xn+10]=Bt,this.int16[xn+11]=vn,g},d}(Ss);t0.prototype.bytesPerElement=24,Ji("StructArrayLayout4i4ui4i24",t0);var Hf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=3*g;return this.float32[j+0]=A,this.float32[j+1]=P,this.float32[j+2]=F,g},d}(Ss);Hf.prototype.bytesPerElement=12,Ji("StructArrayLayout3f12",Hf);var lp=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint32[1*g+0]=A,g},d}(Ss);lp.prototype.bytesPerElement=4,Ji("StructArrayLayout1ul4",lp);var n0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,te,_e,Ne,Xe){var it=this.length;return this.resize(it+1),this.emplace(it,g,A,P,F,j,te,_e,Ne,Xe)},d.prototype.emplace=function(g,A,P,F,j,te,_e,Ne,Xe,it){var Tt=10*g,Bt=5*g;return this.int16[Tt+0]=A,this.int16[Tt+1]=P,this.int16[Tt+2]=F,this.int16[Tt+3]=j,this.int16[Tt+4]=te,this.int16[Tt+5]=_e,this.uint32[Bt+3]=Ne,this.uint16[Tt+8]=Xe,this.uint16[Tt+9]=it,g},d}(Ss);n0.prototype.bytesPerElement=20,Ji("StructArrayLayout6i1ul2ui20",n0);var ed=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,te){var _e=this.length;return this.resize(_e+1),this.emplace(_e,g,A,P,F,j,te)},d.prototype.emplace=function(g,A,P,F,j,te,_e){var Ne=6*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.int16[Ne+2]=F,this.int16[Ne+3]=j,this.int16[Ne+4]=te,this.int16[Ne+5]=_e,g},d}(Ss);ed.prototype.bytesPerElement=12,Ji("StructArrayLayout2i2i2i12",ed);var td=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j){var te=this.length;return this.resize(te+1),this.emplace(te,g,A,P,F,j)},d.prototype.emplace=function(g,A,P,F,j,te){var _e=4*g,Ne=8*g;return this.float32[_e+0]=A,this.float32[_e+1]=P,this.float32[_e+2]=F,this.int16[Ne+6]=j,this.int16[Ne+7]=te,g},d}(Ss);td.prototype.bytesPerElement=16,Ji("StructArrayLayout2f1f2i16",td);var r0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,F)},d.prototype.emplace=function(g,A,P,F,j){var te=12*g,_e=3*g;return this.uint8[te+0]=A,this.uint8[te+1]=P,this.float32[_e+1]=F,this.float32[_e+2]=j,g},d}(Ss);r0.prototype.bytesPerElement=12,Ji("StructArrayLayout2ub2f12",r0);var vf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=3*g;return this.uint16[j+0]=A,this.uint16[j+1]=P,this.uint16[j+2]=F,g},d}(Ss);vf.prototype.bytesPerElement=6,Ji("StructArrayLayout3ui6",vf);var Wf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn,xn,Zn,Ln,fr){var xr=this.length;return this.resize(xr+1),this.emplace(xr,g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn,xn,Zn,Ln,fr)},d.prototype.emplace=function(g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn,xn,Zn,Ln,fr,xr){var Pr=24*g,kr=12*g,Hr=48*g;return this.int16[Pr+0]=A,this.int16[Pr+1]=P,this.uint16[Pr+2]=F,this.uint16[Pr+3]=j,this.uint32[kr+2]=te,this.uint32[kr+3]=_e,this.uint32[kr+4]=Ne,this.uint16[Pr+10]=Xe,this.uint16[Pr+11]=it,this.uint16[Pr+12]=Tt,this.float32[kr+7]=Bt,this.float32[kr+8]=vn,this.uint8[Hr+36]=xn,this.uint8[Hr+37]=Zn,this.uint8[Hr+38]=Ln,this.uint32[kr+10]=fr,this.int16[Pr+22]=xr,g},d}(Ss);Wf.prototype.bytesPerElement=48,Ji("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Wf);var i0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn,xn,Zn,Ln,fr,xr,Pr,kr,Hr,Ni,Xi,Uo,oo,Yo,fo,Ha){var ua=this.length;return this.resize(ua+1),this.emplace(ua,g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn,xn,Zn,Ln,fr,xr,Pr,kr,Hr,Ni,Xi,Uo,oo,Yo,fo,Ha)},d.prototype.emplace=function(g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn,xn,Zn,Ln,fr,xr,Pr,kr,Hr,Ni,Xi,Uo,oo,Yo,fo,Ha,ua){var Co=34*g,Wa=17*g;return this.int16[Co+0]=A,this.int16[Co+1]=P,this.int16[Co+2]=F,this.int16[Co+3]=j,this.int16[Co+4]=te,this.int16[Co+5]=_e,this.int16[Co+6]=Ne,this.int16[Co+7]=Xe,this.uint16[Co+8]=it,this.uint16[Co+9]=Tt,this.uint16[Co+10]=Bt,this.uint16[Co+11]=vn,this.uint16[Co+12]=xn,this.uint16[Co+13]=Zn,this.uint16[Co+14]=Ln,this.uint16[Co+15]=fr,this.uint16[Co+16]=xr,this.uint16[Co+17]=Pr,this.uint16[Co+18]=kr,this.uint16[Co+19]=Hr,this.uint16[Co+20]=Ni,this.uint16[Co+21]=Xi,this.uint16[Co+22]=Uo,this.uint32[Wa+12]=oo,this.float32[Wa+13]=Yo,this.float32[Wa+14]=fo,this.float32[Wa+15]=Ha,this.float32[Wa+16]=ua,g},d}(Ss);i0.prototype.bytesPerElement=68,Ji("StructArrayLayout8i15ui1ul4f68",i0);var nd=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.float32[1*g+0]=A,g},d}(Ss);nd.prototype.bytesPerElement=4,Ji("StructArrayLayout1f4",nd);var Rf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=3*g;return this.int16[j+0]=A,this.int16[j+1]=P,this.int16[j+2]=F,g},d}(Ss);Rf.prototype.bytesPerElement=6,Ji("StructArrayLayout3i6",Rf);var z0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=4*g;return this.uint32[2*g+0]=A,this.uint16[j+2]=P,this.uint16[j+3]=F,g},d}(Ss);z0.prototype.bytesPerElement=8,Ji("StructArrayLayout1ul2ui8",z0);var Gf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var F=2*g;return this.uint16[F+0]=A,this.uint16[F+1]=P,g},d}(Ss);Gf.prototype.bytesPerElement=4,Ji("StructArrayLayout2ui4",Gf);var mf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint16[1*g+0]=A,g},d}(Ss);mf.prototype.bytesPerElement=2,Ji("StructArrayLayout1ui2",mf);var o0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,F)},d.prototype.emplace=function(g,A,P,F,j){var te=4*g;return this.float32[te+0]=A,this.float32[te+1]=P,this.float32[te+2]=F,this.float32[te+3]=j,g},d}(Ss);o0.prototype.bytesPerElement=16,Ji("StructArrayLayout4f16",o0);var _=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return g.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},g.x1.get=function(){return this._structArray.int16[this._pos2+2]},g.y1.get=function(){return this._structArray.int16[this._pos2+3]},g.x2.get=function(){return this._structArray.int16[this._pos2+4]},g.y2.get=function(){return this._structArray.int16[this._pos2+5]},g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.anchorPoint.get=function(){return new ce(this.anchorPointX,this.anchorPointY)},Object.defineProperties(d.prototype,g),d}(Jh);_.prototype.size=20;var S=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new _(this,g)},d}(n0);Ji("CollisionBoxArray",S);var x=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},g.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},g.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},g.segment.get=function(){return this._structArray.uint16[this._pos2+10]},g.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},g.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},g.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},g.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},g.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},g.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},g.placedOrientation.set=function(A){this._structArray.uint8[this._pos1+37]=A},g.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},g.hidden.set=function(A){this._structArray.uint8[this._pos1+38]=A},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+10]=A},g.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(d.prototype,g),d}(Jh);x.prototype.size=48;var O=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new x(this,g)},d}(Wf);Ji("PlacedSymbolArray",O);var k=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},g.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},g.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},g.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},g.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},g.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},g.key.get=function(){return this._structArray.uint16[this._pos2+8]},g.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},g.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},g.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},g.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},g.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},g.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},g.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},g.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},g.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},g.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},g.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},g.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},g.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+12]=A},g.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},g.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},g.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},g.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(d.prototype,g),d}(Jh);k.prototype.size=68;var Z=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new k(this,g)},d}(i0);Ji("SymbolInstanceArray",Z);var K=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getoffsetX=function(g){return this.float32[1*g+0]},d}(nd);Ji("GlyphOffsetArray",K);var ge=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getx=function(g){return this.int16[3*g+0]},d.prototype.gety=function(g){return this.int16[3*g+1]},d.prototype.gettileUnitDistanceFromAnchor=function(g){return this.int16[3*g+2]},d}(Rf);Ji("SymbolLineVertexArray",ge);var Ve=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(d.prototype,g),d}(Jh);Ve.prototype.size=8;var ct=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new Ve(this,g)},d}(z0);Ji("FeatureIndexArray",ct);var jt=bu([{name:"a_pos",components:2,type:"Int16"}],4).members,Vt=function(u){u===void 0&&(u=[]),this.segments=u};function Xt(u,d){return 256*(u=Oe(Math.floor(u),0,255))+Oe(Math.floor(d),0,255)}Vt.prototype.prepareSegment=function(u,d,g,A){var P=this.segments[this.segments.length-1];return u>Vt.MAX_VERTEX_ARRAY_LENGTH&&Ze("Max vertices per segment is "+Vt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+u),(!P||P.vertexLength+u>Vt.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==A)&&(P={vertexOffset:d.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},A!==void 0&&(P.sortKey=A),this.segments.push(P)),P},Vt.prototype.get=function(){return this.segments},Vt.prototype.destroy=function(){for(var u=0,d=this.segments;u<d.length;u+=1){var g=d[u];for(var A in g.vaos)g.vaos[A].destroy()}},Vt.simpleSegment=function(u,d,g,A){return new Vt([{vertexOffset:u,primitiveOffset:d,vertexLength:g,primitiveLength:A,vaos:{},sortKey:0}])},Vt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ji("SegmentVector",Vt);var En=bu([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),gn=fe(function(u){u.exports=function(d,g){var A,P,F,j,te,_e,Ne,Xe;for(P=d.length-(A=3&d.length),F=g,te=3432918353,_e=461845907,Xe=0;Xe<P;)Ne=255&d.charCodeAt(Xe)|(255&d.charCodeAt(++Xe))<<8|(255&d.charCodeAt(++Xe))<<16|(255&d.charCodeAt(++Xe))<<24,++Xe,F=27492+(65535&(j=5*(65535&(F=(F^=Ne=(65535&(Ne=(Ne=(65535&Ne)*te+(((Ne>>>16)*te&65535)<<16)&4294967295)<<15|Ne>>>17))*_e+(((Ne>>>16)*_e&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(Ne=0,A){case 3:Ne^=(255&d.charCodeAt(Xe+2))<<16;case 2:Ne^=(255&d.charCodeAt(Xe+1))<<8;case 1:F^=Ne=(65535&(Ne=(Ne=(65535&(Ne^=255&d.charCodeAt(Xe)))*te+(((Ne>>>16)*te&65535)<<16)&4294967295)<<15|Ne>>>17))*_e+(((Ne>>>16)*_e&65535)<<16)&4294967295}return F^=d.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}}),kn=fe(function(u){u.exports=function(d,g){for(var A,P=d.length,F=g^P,j=0;P>=4;)A=1540483477*(65535&(A=255&d.charCodeAt(j)|(255&d.charCodeAt(++j))<<8|(255&d.charCodeAt(++j))<<16|(255&d.charCodeAt(++j))<<24))+((1540483477*(A>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),P-=4,++j;switch(P){case 3:F^=(255&d.charCodeAt(j+2))<<16;case 2:F^=(255&d.charCodeAt(j+1))<<8;case 1:F=1540483477*(65535&(F^=255&d.charCodeAt(j)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}}),un=gn,zn=kn;un.murmur3=gn,un.murmur2=zn;var tr=function(){this.ids=[],this.positions=[],this.indexed=!1};tr.prototype.add=function(u,d,g,A){this.ids.push(Ir(u)),this.positions.push(d,g,A)},tr.prototype.getPositions=function(u){for(var d=Ir(u),g=0,A=this.ids.length-1;g<A;){var P=g+A>>1;this.ids[P]>=d?A=P:g=P+1}for(var F=[];this.ids[g]===d;)F.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return F},tr.serialize=function(u,d){var g=new Float64Array(u.ids),A=new Uint32Array(u.positions);return function P(F,j,te,_e){for(;te<_e;){for(var Ne=F[te+_e>>1],Xe=te-1,it=_e+1;;){do Xe++;while(F[Xe]<Ne);do it--;while(F[it]>Ne);if(Xe>=it)break;Or(F,Xe,it),Or(j,3*Xe,3*it),Or(j,3*Xe+1,3*it+1),Or(j,3*Xe+2,3*it+2)}it-te<_e-it?(P(F,j,te,it),te=it+1):(P(F,j,it+1,_e),_e=it)}}(g,A,0,g.length-1),d&&d.push(g.buffer,A.buffer),{ids:g,positions:A}},tr.deserialize=function(u){var d=new tr;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d};var gr=Math.pow(2,53)-1;function Ir(u){var d=+u;return!isNaN(d)&&d<=gr?d:un(String(u))}function Or(u,d,g){var A=u[d];u[d]=u[g],u[g]=A}Ji("FeaturePositionMap",tr);var zr=function(u,d){this.gl=u.gl,this.location=d},ii=function(u){function d(g,A){u.call(this,g,A),this.current=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))},d}(zr),Hi=function(u){function d(g,A){u.call(this,g,A),this.current=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1f(this.location,g))},d}(zr),Fi=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1]))},d}(zr),po=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2]))},d}(zr),Vo=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0,0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]&&g[3]===this.current[3]||(this.current=g,this.gl.uniform4f(this.location,g[0],g[1],g[2],g[3]))},d}(zr),$r=function(u){function d(g,A){u.call(this,g,A),this.current=_n.transparent}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g.r===this.current.r&&g.g===this.current.g&&g.b===this.current.b&&g.a===this.current.a||(this.current=g,this.gl.uniform4f(this.location,g.r,g.g,g.b,g.a))},d}(zr),Kt=new Float32Array(16),Ya=function(u){function d(g,A){u.call(this,g,A),this.current=Kt}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(var A=1;A<16;A++)if(g[A]!==this.current[A]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}},d}(zr);function yo(u){return[Xt(255*u.r,255*u.g),Xt(255*u.b,255*u.a)]}var Qo=function(u,d,g){this.value=u,this.uniformNames=d.map(function(A){return"u_"+A}),this.type=g};Qo.prototype.setUniform=function(u,d,g){u.set(g.constantOr(this.value))},Qo.prototype.getBinding=function(u,d,g){return this.type==="color"?new $r(u,d):new Hi(u,d)};var Oa=function(u,d){this.uniformNames=d.map(function(g){return"u_"+g}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Oa.prototype.setConstantPatternPositions=function(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr},Oa.prototype.setUniform=function(u,d,g,A){var P=A==="u_pattern_to"?this.patternTo:A==="u_pattern_from"?this.patternFrom:A==="u_pixel_ratio_to"?this.pixelRatioTo:A==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&u.set(P)},Oa.prototype.getBinding=function(u,d,g){return g.substr(0,9)==="u_pattern"?new Vo(u,d):new Hi(u,d)};var fa=function(u,d,g,A){this.expression=u,this.type=g,this.maxValue=0,this.paintVertexAttributes=d.map(function(P){return{name:"a_"+P,type:"Float32",components:g==="color"?2:1,offset:0}}),this.paintVertexArray=new A};fa.prototype.populatePaintArray=function(u,d,g,A,P){var F=this.paintVertexArray.length,j=this.expression.evaluate(new Sa(0),d,{},A,[],P);this.paintVertexArray.resize(u),this._setPaintValue(F,u,j)},fa.prototype.updatePaintArray=function(u,d,g,A){var P=this.expression.evaluate({zoom:0},g,A);this._setPaintValue(u,d,P)},fa.prototype._setPaintValue=function(u,d,g){if(this.type==="color")for(var A=yo(g),P=u;P<d;P++)this.paintVertexArray.emplace(P,A[0],A[1]);else{for(var F=u;F<d;F++)this.paintVertexArray.emplace(F,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}},fa.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Go=function(u,d,g,A,P,F){this.expression=u,this.uniformNames=d.map(function(j){return"u_"+j+"_t"}),this.type=g,this.useIntegerZoom=A,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=d.map(function(j){return{name:"a_"+j,type:"Float32",components:g==="color"?4:2,offset:0}}),this.paintVertexArray=new F};Go.prototype.populatePaintArray=function(u,d,g,A,P){var F=this.expression.evaluate(new Sa(this.zoom),d,{},A,[],P),j=this.expression.evaluate(new Sa(this.zoom+1),d,{},A,[],P),te=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(te,u,F,j)},Go.prototype.updatePaintArray=function(u,d,g,A){var P=this.expression.evaluate({zoom:this.zoom},g,A),F=this.expression.evaluate({zoom:this.zoom+1},g,A);this._setPaintValue(u,d,P,F)},Go.prototype._setPaintValue=function(u,d,g,A){if(this.type==="color")for(var P=yo(g),F=yo(A),j=u;j<d;j++)this.paintVertexArray.emplace(j,P[0],P[1],F[0],F[1]);else{for(var te=u;te<d;te++)this.paintVertexArray.emplace(te,g,A);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(A))}},Go.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Go.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Go.prototype.setUniform=function(u,d){var g=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,A=Oe(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);u.set(A)},Go.prototype.getBinding=function(u,d,g){return new Hi(u,d)};var xa=function(u,d,g,A,P,F){this.expression=u,this.type=d,this.useIntegerZoom=g,this.zoom=A,this.layerId=F,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P};xa.prototype.populatePaintArray=function(u,d,g){var A=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(A,u,d.patterns&&d.patterns[this.layerId],g)},xa.prototype.updatePaintArray=function(u,d,g,A,P){this._setPaintValues(u,d,g.patterns&&g.patterns[this.layerId],P)},xa.prototype._setPaintValues=function(u,d,g,A){if(A&&g){var P=A[g.min],F=A[g.mid],j=A[g.max];if(P&&F&&j)for(var te=u;te<d;te++)this.zoomInPaintVertexArray.emplace(te,F.tl[0],F.tl[1],F.br[0],F.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],F.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(te,F.tl[0],F.tl[1],F.br[0],F.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],F.pixelRatio,j.pixelRatio)}},xa.prototype.upload=function(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,En.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,En.members,this.expression.isStateDependent))},xa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var aa=function(u,d,g){this.binders={},this._buffers=[];var A=[];for(var P in u.paint._values)if(g(P)){var F=u.paint.get(P);if(F instanceof rc&&fn(F.property.specification)){var j=Vl(P,u.type),te=F.value,_e=F.property.specification.type,Ne=F.property.useIntegerZoom,Xe=F.property.specification["property-type"],it=Xe==="cross-faded"||Xe==="cross-faded-data-driven";if(te.kind==="constant")this.binders[P]=it?new Oa(te.value,j):new Qo(te.value,j,_e),A.push("/u_"+P);else if(te.kind==="source"||it){var Tt=Ls(P,_e,"source");this.binders[P]=it?new xa(te,_e,Ne,d,Tt,u.id):new fa(te,j,_e,Tt),A.push("/a_"+P)}else{var Bt=Ls(P,_e,"composite");this.binders[P]=new Go(te,j,_e,Ne,d,Bt),A.push("/z_"+P)}}}this.cacheKey=A.sort().join("")};aa.prototype.getMaxValue=function(u){var d=this.binders[u];return d instanceof fa||d instanceof Go?d.maxValue:0},aa.prototype.populatePaintArrays=function(u,d,g,A,P){for(var F in this.binders){var j=this.binders[F];(j instanceof fa||j instanceof Go||j instanceof xa)&&j.populatePaintArray(u,d,g,A,P)}},aa.prototype.setConstantPatternPositions=function(u,d){for(var g in this.binders){var A=this.binders[g];A instanceof Oa&&A.setConstantPatternPositions(u,d)}},aa.prototype.updatePaintArrays=function(u,d,g,A,P){var F=!1;for(var j in u)for(var te=0,_e=d.getPositions(j);te<_e.length;te+=1){var Ne=_e[te],Xe=g.feature(Ne.index);for(var it in this.binders){var Tt=this.binders[it];if((Tt instanceof fa||Tt instanceof Go||Tt instanceof xa)&&Tt.expression.isStateDependent===!0){var Bt=A.paint.get(it);Tt.expression=Bt.value,Tt.updatePaintArray(Ne.start,Ne.end,Xe,u[j],P),F=!0}}}return F},aa.prototype.defines=function(){var u=[];for(var d in this.binders){var g=this.binders[d];(g instanceof Qo||g instanceof Oa)&&u.push.apply(u,g.uniformNames.map(function(A){return"#define HAS_UNIFORM_"+A}))}return u},aa.prototype.getBinderAttributes=function(){var u=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof fa||g instanceof Go)for(var A=0;A<g.paintVertexAttributes.length;A++)u.push(g.paintVertexAttributes[A].name);else if(g instanceof xa)for(var P=0;P<En.members.length;P++)u.push(En.members[P].name)}return u},aa.prototype.getBinderUniforms=function(){var u=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof Qo||g instanceof Oa||g instanceof Go)for(var A=0,P=g.uniformNames;A<P.length;A+=1)u.push(P[A])}return u},aa.prototype.getPaintVertexBuffers=function(){return this._buffers},aa.prototype.getUniforms=function(u,d){var g=[];for(var A in this.binders){var P=this.binders[A];if(P instanceof Qo||P instanceof Oa||P instanceof Go)for(var F=0,j=P.uniformNames;F<j.length;F+=1){var te=j[F];if(d[te]){var _e=P.getBinding(u,d[te],te);g.push({name:te,property:A,binding:_e})}}}return g},aa.prototype.setUniforms=function(u,d,g,A){for(var P=0,F=d;P<F.length;P+=1){var j=F[P],te=j.name,_e=j.property;this.binders[_e].setUniform(j.binding,A,g.get(_e),te)}},aa.prototype.updatePaintBuffers=function(u){for(var d in this._buffers=[],this.binders){var g=this.binders[d];if(u&&g instanceof xa){var A=u.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;A&&this._buffers.push(A)}else(g instanceof fa||g instanceof Go)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}},aa.prototype.upload=function(u){for(var d in this.binders){var g=this.binders[d];(g instanceof fa||g instanceof Go||g instanceof xa)&&g.upload(u)}this.updatePaintBuffers()},aa.prototype.destroy=function(){for(var u in this.binders){var d=this.binders[u];(d instanceof fa||d instanceof Go||d instanceof xa)&&d.destroy()}};var ta=function(u,d,g){g===void 0&&(g=function(){return!0}),this.programConfigurations={};for(var A=0,P=u;A<P.length;A+=1){var F=P[A];this.programConfigurations[F.id]=new aa(F,d,g)}this.needsUpload=!1,this._featureMap=new tr,this._bufferOffset=0};function Vl(u,d){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(d+"-","").replace(/-/g,"_")]}function Ls(u,d,g){var A={color:{source:ih,composite:o0},number:{source:nd,composite:ih}},P=function(F){return{"line-pattern":{source:yc,composite:yc},"fill-pattern":{source:yc,composite:yc},"fill-extrusion-pattern":{source:yc,composite:yc}}[F]}(u);return P&&P[g]||A[d][g]}ta.prototype.populatePaintArrays=function(u,d,g,A,P,F){for(var j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(u,d,A,P,F);d.id!==void 0&&this._featureMap.add(d.id,g,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0},ta.prototype.updatePaintArrays=function(u,d,g,A){for(var P=0,F=g;P<F.length;P+=1){var j=F[P];this.needsUpload=this.programConfigurations[j.id].updatePaintArrays(u,this._featureMap,d,j,A)||this.needsUpload}},ta.prototype.get=function(u){return this.programConfigurations[u]},ta.prototype.upload=function(u){if(this.needsUpload){for(var d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}},ta.prototype.destroy=function(){for(var u in this.programConfigurations)this.programConfigurations[u].destroy()},Ji("ConstantBinder",Qo),Ji("CrossFadedConstantBinder",Oa),Ji("SourceExpressionBinder",fa),Ji("CrossFadedCompositeBinder",xa),Ji("CompositeExpressionBinder",Go),Ji("ProgramConfiguration",aa,{omit:["_buffers"]}),Ji("ProgramConfigurationSet",ta);var lu=Math.pow(2,14)-1,Us=-lu-1;function ll(u){for(var d=8192/u.extent,g=u.loadGeometry(),A=0;A<g.length;A++)for(var P=g[A],F=0;F<P.length;F++){var j=P[F],te=Math.round(j.x*d),_e=Math.round(j.y*d);j.x=Oe(te,Us,lu),j.y=Oe(_e,Us,lu),(te<j.x||te>j.x+1||_e<j.y||_e>j.y+1)&&Ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return g}function Il(u,d){return{type:u.type,id:u.id,properties:u.properties,geometry:d?ll(u):[]}}function Mc(u,d,g,A,P){u.emplaceBack(2*d+(A+1)/2,2*g+(P+1)/2)}var Hu=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Ah,this.indexArray=new vf,this.segments=new Vt,this.programConfigurations=new ta(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function Zf(u,d){for(var g=0;g<u.length;g++)if(Yf(d,u[g]))return!0;for(var A=0;A<d.length;A++)if(Yf(u,d[A]))return!0;return!!Dp(u,d)}function _c(u,d,g){return!!Yf(u,d)||!!Oh(d,u,g)}function Xf(u,d){if(u.length===1)return Rc(d,u[0]);for(var g=0;g<d.length;g++)for(var A=d[g],P=0;P<A.length;P++)if(Yf(u,A[P]))return!0;for(var F=0;F<u.length;F++)if(Rc(d,u[F]))return!0;for(var j=0;j<d.length;j++)if(Dp(u,d[j]))return!0;return!1}function Xc(u,d,g){if(u.length>1){if(Dp(u,d))return!0;for(var A=0;A<d.length;A++)if(Oh(d[A],u,g))return!0}for(var P=0;P<u.length;P++)if(Oh(u[P],d,g))return!0;return!1}function Dp(u,d){if(u.length===0||d.length===0)return!1;for(var g=0;g<u.length-1;g++)for(var A=u[g],P=u[g+1],F=0;F<d.length-1;F++)if(up(A,P,d[F],d[F+1]))return!0;return!1}function up(u,d,g,A){return ut(u,g,A)!==ut(d,g,A)&&ut(u,d,g)!==ut(u,d,A)}function Oh(u,d,g){var A=g*g;if(d.length===1)return u.distSqr(d[0])<A;for(var P=1;P<d.length;P++)if(Mi(u,d[P-1],d[P])<A)return!0;return!1}function Mi(u,d,g){var A=d.distSqr(g);if(A===0)return u.distSqr(d);var P=((u.x-d.x)*(g.x-d.x)+(u.y-d.y)*(g.y-d.y))/A;return u.distSqr(P<0?d:P>1?g:g.sub(d)._mult(P)._add(d))}function Rc(u,d){for(var g,A,P,F=!1,j=0;j<u.length;j++)for(var te=0,_e=(g=u[j]).length-1;te<g.length;_e=te++)(A=g[te]).y>d.y!=(P=g[_e]).y>d.y&&d.x<(P.x-A.x)*(d.y-A.y)/(P.y-A.y)+A.x&&(F=!F);return F}function Yf(u,d){for(var g=!1,A=0,P=u.length-1;A<u.length;P=A++){var F=u[A],j=u[P];F.y>d.y!=j.y>d.y&&d.x<(j.x-F.x)*(d.y-F.y)/(j.y-F.y)+F.x&&(g=!g)}return g}function rd(u,d,g){var A=g[0],P=g[2];if(u.x<A.x&&d.x<A.x||u.x>P.x&&d.x>P.x||u.y<A.y&&d.y<A.y||u.y>P.y&&d.y>P.y)return!1;var F=ut(u,d,g[0]);return F!==ut(u,d,g[1])||F!==ut(u,d,g[2])||F!==ut(u,d,g[3])}function Wu(u,d,g){var A=d.paint.get(u).value;return A.kind==="constant"?A.value:g.programConfigurations.get(d.id).getMaxValue(u)}function xl(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function oc(u,d,g,A,P){if(!d[0]&&!d[1])return u;var F=ce.convert(d)._mult(P);g==="viewport"&&F._rotate(-A);for(var j=[],te=0;te<u.length;te++)j.push(u[te].sub(F));return j}Hu.prototype.populate=function(u,d,g){var A=this.layers[0],P=[],F=null;A.type==="circle"&&(F=A.layout.get("circle-sort-key"));for(var j=0,te=u;j<te.length;j+=1){var _e=te[j],Ne=_e.feature,Xe=_e.id,it=_e.index,Tt=_e.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,vn=Il(Ne,Bt);if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),vn,g)){var xn=F?F.evaluate(vn,{},g):void 0,Zn={id:Xe,properties:Ne.properties,type:Ne.type,sourceLayerIndex:Tt,index:it,geometry:Bt?vn.geometry:ll(Ne),patterns:{},sortKey:xn};P.push(Zn)}}F&&P.sort(function(Xi,Uo){return Xi.sortKey-Uo.sortKey});for(var Ln=0,fr=P;Ln<fr.length;Ln+=1){var xr=fr[Ln],Pr=xr.geometry,kr=xr.index,Hr=xr.sourceLayerIndex,Ni=u[kr].feature;this.addFeature(xr,Pr,kr,g),d.featureIndex.insert(Ni,Pr,kr,Hr,this.index)}},Hu.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},Hu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Hu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Hu.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,jt),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},Hu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Hu.prototype.addFeature=function(u,d,g,A){for(var P=0,F=d;P<F.length;P+=1)for(var j=0,te=F[P];j<te.length;j+=1){var _e=te[j],Ne=_e.x,Xe=_e.y;if(!(Ne<0||Ne>=8192||Xe<0||Xe>=8192)){var it=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),Tt=it.vertexLength;Mc(this.layoutVertexArray,Ne,Xe,-1,-1),Mc(this.layoutVertexArray,Ne,Xe,1,-1),Mc(this.layoutVertexArray,Ne,Xe,1,1),Mc(this.layoutVertexArray,Ne,Xe,-1,1),this.indexArray.emplaceBack(Tt,Tt+1,Tt+2),this.indexArray.emplaceBack(Tt,Tt+3,Tt+2),it.vertexLength+=4,it.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,{},A)},Ji("CircleBucket",Hu,{omit:["layers"]});var Pf=new ml({"circle-sort-key":new Ao(Et.layout_circle["circle-sort-key"])}),If={paint:new ml({"circle-radius":new Ao(Et.paint_circle["circle-radius"]),"circle-color":new Ao(Et.paint_circle["circle-color"]),"circle-blur":new Ao(Et.paint_circle["circle-blur"]),"circle-opacity":new Ao(Et.paint_circle["circle-opacity"]),"circle-translate":new ko(Et.paint_circle["circle-translate"]),"circle-translate-anchor":new ko(Et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ko(Et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ko(Et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ao(Et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ao(Et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ao(Et.paint_circle["circle-stroke-opacity"])}),layout:Pf},rs=typeof Float32Array!="undefined"?Float32Array:Array;function Gu(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function xu(u,d,g){var A=d[0],P=d[1],F=d[2],j=d[3],te=d[4],_e=d[5],Ne=d[6],Xe=d[7],it=d[8],Tt=d[9],Bt=d[10],vn=d[11],xn=d[12],Zn=d[13],Ln=d[14],fr=d[15],xr=g[0],Pr=g[1],kr=g[2],Hr=g[3];return u[0]=xr*A+Pr*te+kr*it+Hr*xn,u[1]=xr*P+Pr*_e+kr*Tt+Hr*Zn,u[2]=xr*F+Pr*Ne+kr*Bt+Hr*Ln,u[3]=xr*j+Pr*Xe+kr*vn+Hr*fr,u[4]=(xr=g[4])*A+(Pr=g[5])*te+(kr=g[6])*it+(Hr=g[7])*xn,u[5]=xr*P+Pr*_e+kr*Tt+Hr*Zn,u[6]=xr*F+Pr*Ne+kr*Bt+Hr*Ln,u[7]=xr*j+Pr*Xe+kr*vn+Hr*fr,u[8]=(xr=g[8])*A+(Pr=g[9])*te+(kr=g[10])*it+(Hr=g[11])*xn,u[9]=xr*P+Pr*_e+kr*Tt+Hr*Zn,u[10]=xr*F+Pr*Ne+kr*Bt+Hr*Ln,u[11]=xr*j+Pr*Xe+kr*vn+Hr*fr,u[12]=(xr=g[12])*A+(Pr=g[13])*te+(kr=g[14])*it+(Hr=g[15])*xn,u[13]=xr*P+Pr*_e+kr*Tt+Hr*Zn,u[14]=xr*F+Pr*Ne+kr*Bt+Hr*Ln,u[15]=xr*j+Pr*Xe+kr*vn+Hr*fr,u}Math.hypot||(Math.hypot=function(){for(var u=arguments,d=0,g=arguments.length;g--;)d+=u[g]*u[g];return Math.sqrt(d)});var Lf,cp=xu;function Ld(u,d,g){var A=d[0],P=d[1],F=d[2],j=d[3];return u[0]=g[0]*A+g[4]*P+g[8]*F+g[12]*j,u[1]=g[1]*A+g[5]*P+g[9]*F+g[13]*j,u[2]=g[2]*A+g[6]*P+g[10]*F+g[14]*j,u[3]=g[3]*A+g[7]*P+g[11]*F+g[15]*j,u}Lf=new rs(3),rs!=Float32Array&&(Lf[0]=0,Lf[1]=0,Lf[2]=0),function(){var u=new rs(4);rs!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0)}();var Sv=(function(){var u=new rs(2);rs!=Float32Array&&(u[0]=0,u[1]=0)}(),function(u){function d(g){u.call(this,g,If)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new Hu(g)},d.prototype.queryRadius=function(g){var A=g;return Wu("circle-radius",this,A)+Wu("circle-stroke-width",this,A)+xl(this.paint.get("circle-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,te,_e,Ne){for(var Xe=oc(g,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),te.angle,_e),it=this.paint.get("circle-radius").evaluate(A,P)+this.paint.get("circle-stroke-width").evaluate(A,P),Tt=this.paint.get("circle-pitch-alignment")==="map",Bt=Tt?Xe:function(Ni,Xi){return Ni.map(function(Uo){return Mh(Uo,Xi)})}(Xe,Ne),vn=Tt?it*_e:it,xn=0,Zn=F;xn<Zn.length;xn+=1)for(var Ln=0,fr=Zn[xn];Ln<fr.length;Ln+=1){var xr=fr[Ln],Pr=Tt?xr:Mh(xr,Ne),kr=vn,Hr=Ld([],[xr.x,xr.y,0,1],Ne);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?kr*=Hr[3]/te.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(kr*=te.cameraToCenterDistance/Hr[3]),_c(Bt,Pr,kr))return!0}return!1},d}(Zc));function Mh(u,d){var g=Ld([],[u.x,u.y,0,1],d);return new ce(g[0]/g[3],g[1]/g[3])}var oh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Hu);function gf(u,d,g,A){var P=d.width,F=d.height;if(A){if(A instanceof Uint8ClampedArray)A=new Uint8Array(A.buffer);else if(A.length!==P*F*g)throw new RangeError("mismatched image size")}else A=new Uint8Array(P*F*g);return u.width=P,u.height=F,u.data=A,u}function U0(u,d,g){var A=d.width,P=d.height;if(A!==u.width||P!==u.height){var F=gf({},{width:A,height:P},g);gm(u,F,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,A),height:Math.min(u.height,P)},g),u.width=A,u.height=P,u.data=F.data}}function gm(u,d,g,A,P,F){if(P.width===0||P.height===0)return d;if(P.width>u.width||P.height>u.height||g.x>u.width-P.width||g.y>u.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>d.width||P.height>d.height||A.x>d.width-P.width||A.y>d.height-P.height)throw new RangeError("out of range destination coordinates for image copy");for(var j=u.data,te=d.data,_e=0;_e<P.height;_e++)for(var Ne=((g.y+_e)*u.width+g.x)*F,Xe=((A.y+_e)*d.width+A.x)*F,it=0;it<P.width*F;it++)te[Xe+it]=j[Ne+it];return d}Ji("HeatmapBucket",oh,{omit:["layers"]});var Np=function(u,d){gf(this,u,1,d)};Np.prototype.resize=function(u){U0(this,u,1)},Np.prototype.clone=function(){return new Np({width:this.width,height:this.height},new Uint8Array(this.data))},Np.copy=function(u,d,g,A,P){gm(u,d,g,A,P,1)};var Yc=function(u,d){gf(this,u,4,d)};Yc.prototype.resize=function(u){U0(this,u,4)},Yc.prototype.replace=function(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u},Yc.prototype.clone=function(){return new Yc({width:this.width,height:this.height},new Uint8Array(this.data))},Yc.copy=function(u,d,g,A,P){gm(u,d,g,A,P,4)},Ji("AlphaImage",Np),Ji("RGBAImage",Yc);var Dy={paint:new ml({"heatmap-radius":new Ao(Et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ao(Et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ko(Et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vu(Et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ko(Et.paint_heatmap["heatmap-opacity"])})};function a0(u){var d={},g=u.resolution||256,A=u.clips?u.clips.length:1,P=u.image||new Yc({width:g,height:A}),F=function(vn,xn,Zn){d[u.evaluationKey]=Zn;var Ln=u.expression.evaluate(d);P.data[vn+xn+0]=Math.floor(255*Ln.r/Ln.a),P.data[vn+xn+1]=Math.floor(255*Ln.g/Ln.a),P.data[vn+xn+2]=Math.floor(255*Ln.b/Ln.a),P.data[vn+xn+3]=Math.floor(255*Ln.a)};if(u.clips)for(var j=0,te=0;j<A;++j,te+=4*g)for(var _e=0,Ne=0;_e<g;_e++,Ne+=4){var Xe=_e/(g-1),it=u.clips[j];F(te,Ne,it.start*(1-Xe)+it.end*Xe)}else for(var Tt=0,Bt=0;Tt<g;Tt++,Bt+=4)F(0,Bt,Tt/(g-1));return P}var Fp=function(u){function d(g){u.call(this,g,Dy),this._updateColorRamp()}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new oh(g)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="heatmap-color"&&this._updateColorRamp()},d.prototype._updateColorRamp=function(){this.colorRamp=a0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},d.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},d}(Zc),Ny={paint:new ml({"hillshade-illumination-direction":new ko(Et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ko(Et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ko(Et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ko(Et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ko(Et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ko(Et.paint_hillshade["hillshade-accent-color"])})},Fy=function(u){function d(g){u.call(this,g,Ny)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},d}(Zc),ym=bu([{name:"a_pos",components:2,type:"Int16"}],4).members,j0=_m,By=_m;function _m(u,d,g){g=g||2;var A,P,F,j,te,_e,Ne,Xe=d&&d.length,it=Xe?d[0]*g:u.length,Tt=xg(u,0,it,g,!0),Bt=[];if(!Tt||Tt.next===Tt.prev)return Bt;if(Xe&&(Tt=function(xn,Zn,Ln,fr){var xr,Pr,kr,Hr=[];for(xr=0,Pr=Zn.length;xr<Pr;xr++)(kr=xg(xn,Zn[xr]*fr,xr<Pr-1?Zn[xr+1]*fr:xn.length,fr,!1))===kr.next&&(kr.steiner=!0),Hr.push(wv(kr));for(Hr.sort(xm),xr=0;xr<Hr.length;xr++)Em(Hr[xr],Ln),Ln=Dd(Ln,Ln.next);return Ln}(u,d,Tt,g)),u.length>80*g){A=F=u[0],P=j=u[1];for(var vn=g;vn<it;vn+=g)(te=u[vn])<A&&(A=te),(_e=u[vn+1])<P&&(P=_e),te>F&&(F=te),_e>j&&(j=_e);Ne=(Ne=Math.max(F-A,j-P))!==0?1/Ne:0}return s0(Tt,Bt,g,A,P,Ne),Bt}function xg(u,d,g,A,P){var F,j;if(P===zp(u,d,g,A)>0)for(F=d;F<g;F+=A)j=zd(F,u[F],u[F+1],j);else for(F=g-A;F>=d;F-=A)j=zd(F,u[F],u[F+1],j);return j&&kp(j,j.next)&&(fp(j),j=j.next),j}function Dd(u,d){if(!u)return u;d||(d=u);var g,A=u;do if(g=!1,A.steiner||!kp(A,A.next)&&Hl(A.prev,A,A.next)!==0)A=A.next;else{if(fp(A),(A=d=A.prev)===A.next)break;g=!0}while(g||A!==d);return d}function s0(u,d,g,A,P,F,j){if(u){!j&&F&&function(Xe,it,Tt,Bt){var vn=Xe;do vn.z===null&&(vn.z=l0(vn.x,vn.y,it,Tt,Bt)),vn.prevZ=vn.prev,vn.nextZ=vn.next,vn=vn.next;while(vn!==Xe);vn.prevZ.nextZ=null,vn.prevZ=null,function(xn){var Zn,Ln,fr,xr,Pr,kr,Hr,Ni,Xi=1;do{for(Ln=xn,xn=null,Pr=null,kr=0;Ln;){for(kr++,fr=Ln,Hr=0,Zn=0;Zn<Xi&&(Hr++,fr=fr.nextZ);Zn++);for(Ni=Xi;Hr>0||Ni>0&&fr;)Hr!==0&&(Ni===0||!fr||Ln.z<=fr.z)?(xr=Ln,Ln=Ln.nextZ,Hr--):(xr=fr,fr=fr.nextZ,Ni--),Pr?Pr.nextZ=xr:xn=xr,xr.prevZ=Pr,Pr=xr;Ln=fr}Pr.nextZ=null,Xi*=2}while(kr>1)}(vn)}(u,A,P,F);for(var te,_e,Ne=u;u.prev!==u.next;)if(te=u.prev,_e=u.next,F?ky(u,A,P,F):Eg(u))d.push(te.i/g),d.push(u.i/g),d.push(_e.i/g),fp(u),u=_e.next,Ne=_e.next;else if((u=_e)===Ne){j?j===1?s0(u=c1(Dd(u),d,g),d,g,A,P,F,2):j===2&&bm(u,d,g,A,P,F):s0(Dd(u),d,g,A,P,F,1);break}}}function Eg(u){var d=u.prev,g=u,A=u.next;if(Hl(d,g,A)>=0)return!1;for(var P=u.next.next;P!==u.prev;){if(Rh(d.x,d.y,g.x,g.y,A.x,A.y,P.x,P.y)&&Hl(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function ky(u,d,g,A){var P=u.prev,F=u,j=u.next;if(Hl(P,F,j)>=0)return!1;for(var te=P.x>F.x?P.x>j.x?P.x:j.x:F.x>j.x?F.x:j.x,_e=P.y>F.y?P.y>j.y?P.y:j.y:F.y>j.y?F.y:j.y,Ne=l0(P.x<F.x?P.x<j.x?P.x:j.x:F.x<j.x?F.x:j.x,P.y<F.y?P.y<j.y?P.y:j.y:F.y<j.y?F.y:j.y,d,g,A),Xe=l0(te,_e,d,g,A),it=u.prevZ,Tt=u.nextZ;it&&it.z>=Ne&&Tt&&Tt.z<=Xe;){if(it!==u.prev&&it!==u.next&&Rh(P.x,P.y,F.x,F.y,j.x,j.y,it.x,it.y)&&Hl(it.prev,it,it.next)>=0||(it=it.prevZ,Tt!==u.prev&&Tt!==u.next&&Rh(P.x,P.y,F.x,F.y,j.x,j.y,Tt.x,Tt.y)&&Hl(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;it&&it.z>=Ne;){if(it!==u.prev&&it!==u.next&&Rh(P.x,P.y,F.x,F.y,j.x,j.y,it.x,it.y)&&Hl(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;Tt&&Tt.z<=Xe;){if(Tt!==u.prev&&Tt!==u.next&&Rh(P.x,P.y,F.x,F.y,j.x,j.y,Tt.x,Tt.y)&&Hl(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function c1(u,d,g){var A=u;do{var P=A.prev,F=A.next.next;!kp(P,F)&&u0(P,A,A.next,F)&&Bd(P,F)&&Bd(F,P)&&(d.push(P.i/g),d.push(A.i/g),d.push(F.i/g),fp(A),fp(A.next),A=u=F),A=A.next}while(A!==u);return Dd(A)}function bm(u,d,g,A,P,F){var j=u;do{for(var te=j.next.next;te!==j.prev;){if(j.i!==te.i&&V0(j,te)){var _e=kd(j,te);return j=Dd(j,j.next),_e=Dd(_e,_e.next),s0(j,d,g,A,P,F),void s0(_e,d,g,A,P,F)}te=te.next}j=j.next}while(j!==u)}function xm(u,d){return u.x-d.x}function Em(u,d){if(d=function(A,P){var F,j=P,te=A.x,_e=A.y,Ne=-1/0;do{if(_e<=j.y&&_e>=j.next.y&&j.next.y!==j.y){var Xe=j.x+(_e-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(Xe<=te&&Xe>Ne){if(Ne=Xe,Xe===te){if(_e===j.y)return j;if(_e===j.next.y)return j.next}F=j.x<j.next.x?j:j.next}}j=j.next}while(j!==P);if(!F)return null;if(te===Ne)return F;var it,Tt=F,Bt=F.x,vn=F.y,xn=1/0;j=F;do te>=j.x&&j.x>=Bt&&te!==j.x&&Rh(_e<vn?te:Ne,_e,Bt,vn,_e<vn?Ne:te,_e,j.x,j.y)&&(it=Math.abs(_e-j.y)/(te-j.x),Bd(j,A)&&(it<xn||it===xn&&(j.x>F.x||j.x===F.x&&Bp(F,j)))&&(F=j,xn=it)),j=j.next;while(j!==Tt);return F}(u,d)){var g=kd(d,u);Dd(d,d.next),Dd(g,g.next)}}function Bp(u,d){return Hl(u.prev,u,d.prev)<0&&Hl(d.next,u,u.next)<0}function l0(u,d,g,A,P){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-g)*P)|u<<8))|u<<4))|u<<2))|u<<1))|(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-A)*P)|d<<8))|d<<4))|d<<2))|d<<1))<<1}function wv(u){var d=u,g=u;do(d.x<g.x||d.x===g.x&&d.y<g.y)&&(g=d),d=d.next;while(d!==u);return g}function Rh(u,d,g,A,P,F,j,te){return(P-j)*(d-te)-(u-j)*(F-te)>=0&&(u-j)*(A-te)-(g-j)*(d-te)>=0&&(g-j)*(F-te)-(P-j)*(A-te)>=0}function V0(u,d){return u.next.i!==d.i&&u.prev.i!==d.i&&!function(g,A){var P=g;do{if(P.i!==g.i&&P.next.i!==g.i&&P.i!==A.i&&P.next.i!==A.i&&u0(P,P.next,g,A))return!0;P=P.next}while(P!==g);return!1}(u,d)&&(Bd(u,d)&&Bd(d,u)&&function(g,A){var P=g,F=!1,j=(g.x+A.x)/2,te=(g.y+A.y)/2;do P.y>te!=P.next.y>te&&P.next.y!==P.y&&j<(P.next.x-P.x)*(te-P.y)/(P.next.y-P.y)+P.x&&(F=!F),P=P.next;while(P!==g);return F}(u,d)&&(Hl(u.prev,u,d.prev)||Hl(u,d.prev,d))||kp(u,d)&&Hl(u.prev,u,u.next)>0&&Hl(d.prev,d,d.next)>0)}function Hl(u,d,g){return(d.y-u.y)*(g.x-d.x)-(d.x-u.x)*(g.y-d.y)}function kp(u,d){return u.x===d.x&&u.y===d.y}function u0(u,d,g,A){var P=Fd(Hl(u,d,g)),F=Fd(Hl(u,d,A)),j=Fd(Hl(g,A,u)),te=Fd(Hl(g,A,d));return P!==F&&j!==te||!(P!==0||!Nd(u,g,d))||!(F!==0||!Nd(u,A,d))||!(j!==0||!Nd(g,u,A))||!(te!==0||!Nd(g,d,A))}function Nd(u,d,g){return d.x<=Math.max(u.x,g.x)&&d.x>=Math.min(u.x,g.x)&&d.y<=Math.max(u.y,g.y)&&d.y>=Math.min(u.y,g.y)}function Fd(u){return u>0?1:u<0?-1:0}function Bd(u,d){return Hl(u.prev,u,u.next)<0?Hl(u,d,u.next)>=0&&Hl(u,u.prev,d)>=0:Hl(u,d,u.prev)<0||Hl(u,u.next,d)<0}function kd(u,d){var g=new c0(u.i,u.x,u.y),A=new c0(d.i,d.x,d.y),P=u.next,F=d.prev;return u.next=d,d.prev=u,g.next=P,P.prev=g,A.next=g,g.prev=A,F.next=A,A.prev=F,A}function zd(u,d,g,A){var P=new c0(u,d,g);return A?(P.next=A.next,P.prev=A,A.next.prev=P,A.next=P):(P.prev=P,P.next=P),P}function fp(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function c0(u,d,g){this.i=u,this.x=d,this.y=g,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function zp(u,d,g,A){for(var P=0,F=d,j=g-A;F<g;F+=A)P+=(u[j]-u[F])*(u[F+1]+u[j+1]),j=F;return P}function Sg(u,d,g,A,P){(function F(j,te,_e,Ne,Xe){for(;Ne>_e;){if(Ne-_e>600){var it=Ne-_e+1,Tt=te-_e+1,Bt=Math.log(it),vn=.5*Math.exp(2*Bt/3),xn=.5*Math.sqrt(Bt*vn*(it-vn)/it)*(Tt-it/2<0?-1:1);F(j,te,Math.max(_e,Math.floor(te-Tt*vn/it+xn)),Math.min(Ne,Math.floor(te+(it-Tt)*vn/it+xn)),Xe)}var Zn=j[te],Ln=_e,fr=Ne;for(Zu(j,_e,te),Xe(j[Ne],Zn)>0&&Zu(j,_e,Ne);Ln<fr;){for(Zu(j,Ln,fr),Ln++,fr--;Xe(j[Ln],Zn)<0;)Ln++;for(;Xe(j[fr],Zn)>0;)fr--}Xe(j[_e],Zn)===0?Zu(j,_e,fr):Zu(j,++fr,Ne),fr<=te&&(_e=fr+1),te<=fr&&(Ne=fr-1)}})(u,d,g||0,A||u.length-1,P||Ph)}function Zu(u,d,g){var A=u[d];u[d]=u[g],u[g]=A}function Ph(u,d){return u<d?-1:u>d?1:0}function H0(u,d){var g=u.length;if(g<=1)return[u];for(var A,P,F=[],j=0;j<g;j++){var te=tn(u[j]);te!==0&&(u[j].area=Math.abs(te),P===void 0&&(P=te<0),P===te<0?(A&&F.push(A),A=[u[j]]):A.push(u[j]))}if(A&&F.push(A),d>1)for(var _e=0;_e<F.length;_e++)F[_e].length<=d||(Sg(F[_e],d,1,F[_e].length-1,W0),F[_e]=F[_e].slice(0,d));return F}function W0(u,d){return d.area-u.area}function wg(u,d,g){for(var A=g.patternDependencies,P=!1,F=0,j=d;F<j.length;F+=1){var te=j[F].paint.get(u+"-pattern");te.isConstant()||(P=!0);var _e=te.constantOr(null);_e&&(P=!0,A[_e.to]=!0,A[_e.from]=!0)}return P}function Sm(u,d,g,A,P){for(var F=P.patternDependencies,j=0,te=d;j<te.length;j+=1){var _e=te[j],Ne=_e.paint.get(u+"-pattern").value;if(Ne.kind!=="constant"){var Xe=Ne.evaluate({zoom:A-1},g,{},P.availableImages),it=Ne.evaluate({zoom:A},g,{},P.availableImages),Tt=Ne.evaluate({zoom:A+1},g,{},P.availableImages);it=it&&it.name?it.name:it,Tt=Tt&&Tt.name?Tt.name:Tt,F[Xe=Xe&&Xe.name?Xe.name:Xe]=!0,F[it]=!0,F[Tt]=!0,g.patterns[_e.id]={min:Xe,mid:it,max:Tt}}}return g}_m.deviation=function(u,d,g,A){var P=d&&d.length,F=Math.abs(zp(u,0,P?d[0]*g:u.length,g));if(P)for(var j=0,te=d.length;j<te;j++)F-=Math.abs(zp(u,d[j]*g,j<te-1?d[j+1]*g:u.length,g));var _e=0;for(j=0;j<A.length;j+=3){var Ne=A[j]*g,Xe=A[j+1]*g,it=A[j+2]*g;_e+=Math.abs((u[Ne]-u[it])*(u[Xe+1]-u[Ne+1])-(u[Ne]-u[Xe])*(u[it+1]-u[Ne+1]))}return F===0&&_e===0?0:Math.abs((_e-F)/F)},_m.flatten=function(u){for(var d=u[0][0].length,g={vertices:[],holes:[],dimensions:d},A=0,P=0;P<u.length;P++){for(var F=0;F<u[P].length;F++)for(var j=0;j<d;j++)g.vertices.push(u[P][F][j]);P>0&&g.holes.push(A+=u[P-1].length)}return g},j0.default=By;var ah=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ah,this.indexArray=new vf,this.indexArray2=new Gf,this.programConfigurations=new ta(u.layers,u.zoom),this.segments=new Vt,this.segments2=new Vt,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};ah.prototype.populate=function(u,d,g){this.hasPattern=wg("fill",this.layers,d);for(var A=this.layers[0].layout.get("fill-sort-key"),P=[],F=0,j=u;F<j.length;F+=1){var te=j[F],_e=te.feature,Ne=te.id,Xe=te.index,it=te.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Bt=Il(_e,Tt);if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),Bt,g)){var vn=A?A.evaluate(Bt,{},g,d.availableImages):void 0,xn={id:Ne,properties:_e.properties,type:_e.type,sourceLayerIndex:it,index:Xe,geometry:Tt?Bt.geometry:ll(_e),patterns:{},sortKey:vn};P.push(xn)}}A&&P.sort(function(Ni,Xi){return Ni.sortKey-Xi.sortKey});for(var Zn=0,Ln=P;Zn<Ln.length;Zn+=1){var fr=Ln[Zn],xr=fr.geometry,Pr=fr.index,kr=fr.sourceLayerIndex;if(this.hasPattern){var Hr=Sm("fill",this.layers,fr,this.zoom,d);this.patternFeatures.push(Hr)}else this.addFeature(fr,xr,Pr,g,{});d.featureIndex.insert(u[Pr].feature,xr,Pr,kr,this.index)}},ah.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},ah.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var F=P[A];this.addFeature(F,F.geometry,F.index,d,g)}},ah.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ah.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ah.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ym),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0},ah.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ah.prototype.addFeature=function(u,d,g,A,P){for(var F=0,j=H0(d,500);F<j.length;F+=1){for(var te=j[F],_e=0,Ne=0,Xe=te;Ne<Xe.length;Ne+=1)_e+=Xe[Ne].length;for(var it=this.segments.prepareSegment(_e,this.layoutVertexArray,this.indexArray),Tt=it.vertexLength,Bt=[],vn=[],xn=0,Zn=te;xn<Zn.length;xn+=1){var Ln=Zn[xn];if(Ln.length!==0){Ln!==te[0]&&vn.push(Bt.length/2);var fr=this.segments2.prepareSegment(Ln.length,this.layoutVertexArray,this.indexArray2),xr=fr.vertexLength;this.layoutVertexArray.emplaceBack(Ln[0].x,Ln[0].y),this.indexArray2.emplaceBack(xr+Ln.length-1,xr),Bt.push(Ln[0].x),Bt.push(Ln[0].y);for(var Pr=1;Pr<Ln.length;Pr++)this.layoutVertexArray.emplaceBack(Ln[Pr].x,Ln[Pr].y),this.indexArray2.emplaceBack(xr+Pr-1,xr+Pr),Bt.push(Ln[Pr].x),Bt.push(Ln[Pr].y);fr.vertexLength+=Ln.length,fr.primitiveLength+=Ln.length}}for(var kr=j0(Bt,vn),Hr=0;Hr<kr.length;Hr+=3)this.indexArray.emplaceBack(Tt+kr[Hr],Tt+kr[Hr+1],Tt+kr[Hr+2]);it.vertexLength+=_e,it.primitiveLength+=kr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},Ji("FillBucket",ah,{omit:["layers","patternFeatures"]});var Ud=new ml({"fill-sort-key":new Ao(Et.layout_fill["fill-sort-key"])}),wm={paint:new ml({"fill-antialias":new ko(Et.paint_fill["fill-antialias"]),"fill-opacity":new Ao(Et.paint_fill["fill-opacity"]),"fill-color":new Ao(Et.paint_fill["fill-color"]),"fill-outline-color":new Ao(Et.paint_fill["fill-outline-color"]),"fill-translate":new ko(Et.paint_fill["fill-translate"]),"fill-translate-anchor":new ko(Et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ql(Et.paint_fill["fill-pattern"])}),layout:Ud},G0=function(u){function d(g){u.call(this,g,wm)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.recalculate=function(g,A){u.prototype.recalculate.call(this,g,A);var P=this.paint._values["fill-outline-color"];P.value.kind==="constant"&&P.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},d.prototype.createBucket=function(g){return new ah(g)},d.prototype.queryRadius=function(){return xl(this.paint.get("fill-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,te,_e){return Xf(oc(g,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),te.angle,_e),F)},d.prototype.isTileClipped=function(){return!0},d}(Zc),jd=bu([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Tg=f0;function f0(u,d,g,A,P){this.properties={},this.extent=g,this.type=0,this._pbf=u,this._geometry=-1,this._keys=A,this._values=P,u.readFields(Ag,this,d)}function Ag(u,d,g){u==1?d.id=g.readVarint():u==2?function(A,P){for(var F=A.readVarint()+A.pos;A.pos<F;){var j=P._keys[A.readVarint()],te=P._values[A.readVarint()];P.properties[j]=te}}(g,d):u==3?d.type=g.readVarint():u==4&&(d._geometry=g.pos)}function Ih(u){for(var d,g,A=0,P=0,F=u.length,j=F-1;P<F;j=P++)A+=((g=u[j]).x-(d=u[P]).x)*(d.y+g.y);return A}f0.types=["Unknown","Point","LineString","Polygon"],f0.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var d,g=u.readVarint()+u.pos,A=1,P=0,F=0,j=0,te=[];u.pos<g;){if(P<=0){var _e=u.readVarint();A=7&_e,P=_e>>3}if(P--,A===1||A===2)F+=u.readSVarint(),j+=u.readSVarint(),A===1&&(d&&te.push(d),d=[]),d.push(new ce(F,j));else{if(A!==7)throw new Error("unknown command "+A);d&&d.push(d[0].clone())}}return d&&te.push(d),te},f0.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var d=u.readVarint()+u.pos,g=1,A=0,P=0,F=0,j=1/0,te=-1/0,_e=1/0,Ne=-1/0;u.pos<d;){if(A<=0){var Xe=u.readVarint();g=7&Xe,A=Xe>>3}if(A--,g===1||g===2)(P+=u.readSVarint())<j&&(j=P),P>te&&(te=P),(F+=u.readSVarint())<_e&&(_e=F),F>Ne&&(Ne=F);else if(g!==7)throw new Error("unknown command "+g)}return[j,_e,te,Ne]},f0.prototype.toGeoJSON=function(u,d,g){var A,P,F=this.extent*Math.pow(2,g),j=this.extent*u,te=this.extent*d,_e=this.loadGeometry(),Ne=f0.types[this.type];function Xe(Bt){for(var vn=0;vn<Bt.length;vn++){var xn=Bt[vn];Bt[vn]=[360*(xn.x+j)/F-180,360/Math.PI*Math.atan(Math.exp((180-360*(xn.y+te)/F)*Math.PI/180))-90]}}switch(this.type){case 1:var it=[];for(A=0;A<_e.length;A++)it[A]=_e[A][0];Xe(_e=it);break;case 2:for(A=0;A<_e.length;A++)Xe(_e[A]);break;case 3:for(_e=function(Bt){var vn=Bt.length;if(vn<=1)return[Bt];for(var xn,Zn,Ln=[],fr=0;fr<vn;fr++){var xr=Ih(Bt[fr]);xr!==0&&(Zn===void 0&&(Zn=xr<0),Zn===xr<0?(xn&&Ln.push(xn),xn=[Bt[fr]]):xn.push(Bt[fr]))}return xn&&Ln.push(xn),Ln}(_e),A=0;A<_e.length;A++)for(P=0;P<_e[A].length;P++)Xe(_e[A][P])}_e.length===1?_e=_e[0]:Ne="Multi"+Ne;var Tt={type:"Feature",geometry:{type:Ne,coordinates:_e},properties:this.properties};return"id"in this&&(Tt.id=this.id),Tt};var Vd=Df;function Df(u,d){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(Hd,this,d),this.length=this._features.length}function Hd(u,d,g){u===15?d.version=g.readVarint():u===1?d.name=g.readString():u===5?d.extent=g.readVarint():u===2?d._features.push(g.pos):u===3?d._keys.push(g.readString()):u===4&&d._values.push(function(A){for(var P=null,F=A.readVarint()+A.pos;A.pos<F;){var j=A.readVarint()>>3;P=j===1?A.readString():j===2?A.readFloat():j===3?A.readDouble():j===4?A.readVarint64():j===5?A.readVarint():j===6?A.readSVarint():j===7?A.readBoolean():null}return P}(g))}function Tm(u,d,g){if(u===3){var A=new Vd(g,g.readVarint()+g.pos);A.length&&(d[A.name]=A)}}Df.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var d=this._pbf.readVarint()+this._pbf.pos;return new Tg(this._pbf,d,this.extent,this._keys,this._values)};var Lh={VectorTile:function(u,d){this.layers=u.readFields(Tm,{},d)},VectorTileFeature:Tg,VectorTileLayer:Vd},Z0=Lh.VectorTileFeature.types,X0=Math.pow(2,13);function $c(u,d,g,A,P,F,j,te){u.emplaceBack(d,g,2*Math.floor(A*X0)+j,P*X0*2,F*X0*2,Math.round(te))}var Pc=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Ch,this.indexArray=new vf,this.programConfigurations=new ta(u.layers,u.zoom),this.segments=new Vt,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function uu(u,d){return u.x===d.x&&(u.x<0||u.x>8192)||u.y===d.y&&(u.y<0||u.y>8192)}Pc.prototype.populate=function(u,d,g){this.features=[],this.hasPattern=wg("fill-extrusion",this.layers,d);for(var A=0,P=u;A<P.length;A+=1){var F=P[A],j=F.feature,te=F.id,_e=F.index,Ne=F.sourceLayerIndex,Xe=this.layers[0]._featureFilter.needGeometry,it=Il(j,Xe);if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),it,g)){var Tt={id:te,sourceLayerIndex:Ne,index:_e,geometry:Xe?it.geometry:ll(j),properties:j.properties,type:j.type,patterns:{}};this.hasPattern?this.features.push(Sm("fill-extrusion",this.layers,Tt,this.zoom,d)):this.addFeature(Tt,Tt.geometry,_e,g,{}),d.featureIndex.insert(j,Tt.geometry,_e,Ne,this.index,!0)}}},Pc.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.features;A<P.length;A+=1){var F=P[A];this.addFeature(F,F.geometry,F.index,d,g)}},Pc.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},Pc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Pc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Pc.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,jd),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},Pc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Pc.prototype.addFeature=function(u,d,g,A,P){for(var F=0,j=H0(d,500);F<j.length;F+=1){for(var te=j[F],_e=0,Ne=0,Xe=te;Ne<Xe.length;Ne+=1)_e+=Xe[Ne].length;for(var it=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Tt=0,Bt=te;Tt<Bt.length;Tt+=1){var vn=Bt[Tt];if(vn.length!==0&&!((Wa=vn).every(function(Ra){return Ra.x<0})||Wa.every(function(Ra){return Ra.x>8192})||Wa.every(function(Ra){return Ra.y<0})||Wa.every(function(Ra){return Ra.y>8192})))for(var xn=0,Zn=0;Zn<vn.length;Zn++){var Ln=vn[Zn];if(Zn>=1){var fr=vn[Zn-1];if(!uu(Ln,fr)){it.vertexLength+4>Vt.MAX_VERTEX_ARRAY_LENGTH&&(it=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var xr=Ln.sub(fr)._perp()._unit(),Pr=fr.dist(Ln);xn+Pr>32768&&(xn=0),$c(this.layoutVertexArray,Ln.x,Ln.y,xr.x,xr.y,0,0,xn),$c(this.layoutVertexArray,Ln.x,Ln.y,xr.x,xr.y,0,1,xn),$c(this.layoutVertexArray,fr.x,fr.y,xr.x,xr.y,0,0,xn+=Pr),$c(this.layoutVertexArray,fr.x,fr.y,xr.x,xr.y,0,1,xn);var kr=it.vertexLength;this.indexArray.emplaceBack(kr,kr+2,kr+1),this.indexArray.emplaceBack(kr+1,kr+2,kr+3),it.vertexLength+=4,it.primitiveLength+=2}}}}if(it.vertexLength+_e>Vt.MAX_VERTEX_ARRAY_LENGTH&&(it=this.segments.prepareSegment(_e,this.layoutVertexArray,this.indexArray)),Z0[u.type]==="Polygon"){for(var Hr=[],Ni=[],Xi=it.vertexLength,Uo=0,oo=te;Uo<oo.length;Uo+=1){var Yo=oo[Uo];if(Yo.length!==0){Yo!==te[0]&&Ni.push(Hr.length/2);for(var fo=0;fo<Yo.length;fo++){var Ha=Yo[fo];$c(this.layoutVertexArray,Ha.x,Ha.y,0,0,1,1,0),Hr.push(Ha.x),Hr.push(Ha.y)}}}for(var ua=j0(Hr,Ni),Co=0;Co<ua.length;Co+=3)this.indexArray.emplaceBack(Xi+ua[Co],Xi+ua[Co+2],Xi+ua[Co+1]);it.primitiveLength+=ua.length/3,it.vertexLength+=_e}}var Wa;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},Ji("FillExtrusionBucket",Pc,{omit:["layers","features"]});var Nf={paint:new ml({"fill-extrusion-opacity":new ko(Et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ao(Et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ko(Et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ko(Et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ql(Et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ao(Et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ao(Et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ko(Et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Y0=function(u){function d(g){u.call(this,g,Nf)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new Pc(g)},d.prototype.queryRadius=function(){return xl(this.paint.get("fill-extrusion-translate"))},d.prototype.is3D=function(){return!0},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,te,_e,Ne){var Xe=oc(g,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),te.angle,_e),it=this.paint.get("fill-extrusion-height").evaluate(A,P),Tt=this.paint.get("fill-extrusion-base").evaluate(A,P),Bt=function(xn,Zn,Ln,fr){for(var xr=[],Pr=0,kr=xn;Pr<kr.length;Pr+=1){var Hr=kr[Pr],Ni=[Hr.x,Hr.y,0,1];Ld(Ni,Ni,Zn),xr.push(new ce(Ni[0]/Ni[3],Ni[1]/Ni[3]))}return xr}(Xe,Ne),vn=function(xn,Zn,Ln,fr){for(var xr=[],Pr=[],kr=fr[8]*Zn,Hr=fr[9]*Zn,Ni=fr[10]*Zn,Xi=fr[11]*Zn,Uo=fr[8]*Ln,oo=fr[9]*Ln,Yo=fr[10]*Ln,fo=fr[11]*Ln,Ha=0,ua=xn;Ha<ua.length;Ha+=1){for(var Co=[],Wa=[],Ra=0,ls=ua[Ha];Ra<ls.length;Ra+=1){var qo=ls[Ra],vs=qo.x,Sl=qo.y,Xl=fr[0]*vs+fr[4]*Sl+fr[12],wl=fr[1]*vs+fr[5]*Sl+fr[13],Tl=fr[2]*vs+fr[6]*Sl+fr[14],eu=fr[3]*vs+fr[7]*Sl+fr[15],Pu=Tl+Ni,qu=eu+Xi,Kc=Xl+Uo,ac=wl+oo,Qc=Tl+Yo,hu=eu+fo,Iu=new ce((Xl+kr)/qu,(wl+Hr)/qu);Iu.z=Pu/qu,Co.push(Iu);var za=new ce(Kc/hu,ac/hu);za.z=Qc/hu,Wa.push(za)}xr.push(Co),Pr.push(Wa)}return[xr,Pr]}(F,Tt,it,Ne);return function(xn,Zn,Ln){var fr=1/0;Xf(Ln,Zn)&&(fr=Up(Ln,Zn[0]));for(var xr=0;xr<Zn.length;xr++)for(var Pr=Zn[xr],kr=xn[xr],Hr=0;Hr<Pr.length-1;Hr++){var Ni=Pr[Hr],Xi=[Ni,Pr[Hr+1],kr[Hr+1],kr[Hr],Ni];Zf(Ln,Xi)&&(fr=Math.min(fr,Up(Ln,Xi)))}return fr!==1/0&&fr}(vn[0],vn[1],Bt)},d}(Zc);function rl(u,d){return u.x*d.x+u.y*d.y}function Up(u,d){if(u.length===1){for(var g,A=0,P=d[A++];!g||P.equals(g);)if(!(g=d[A++]))return 1/0;for(;A<d.length;A++){var F=d[A],j=u[0],te=g.sub(P),_e=F.sub(P),Ne=j.sub(P),Xe=rl(te,te),it=rl(te,_e),Tt=rl(_e,_e),Bt=rl(Ne,te),vn=rl(Ne,_e),xn=Xe*Tt-it*it,Zn=(Tt*Bt-it*vn)/xn,Ln=(Xe*vn-it*Bt)/xn,fr=P.z*(1-Zn-Ln)+g.z*Zn+F.z*Ln;if(isFinite(fr))return fr}return 1/0}for(var xr=1/0,Pr=0,kr=d;Pr<kr.length;Pr+=1)xr=Math.min(xr,kr[Pr].z);return xr}var Tv=bu([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,zy=bu([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Cg=Lh.VectorTileFeature.types,Uy=Math.cos(Math.PI/180*37.5),Am=Math.pow(2,14)/.5,Ic=function(u){var d=this;this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(g){return g.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(g){d.gradients[g.id]={}}),this.layoutVertexArray=new ic,this.layoutVertexArray2=new ih,this.indexArray=new vf,this.programConfigurations=new ta(u.layers,u.zoom),this.segments=new Vt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(g){return g.isStateDependent()}).map(function(g){return g.id})};Ic.prototype.populate=function(u,d,g){this.hasPattern=wg("line",this.layers,d);for(var A=this.layers[0].layout.get("line-sort-key"),P=[],F=0,j=u;F<j.length;F+=1){var te=j[F],_e=te.feature,Ne=te.id,Xe=te.index,it=te.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Bt=Il(_e,Tt);if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),Bt,g)){var vn=A?A.evaluate(Bt,{},g):void 0,xn={id:Ne,properties:_e.properties,type:_e.type,sourceLayerIndex:it,index:Xe,geometry:Tt?Bt.geometry:ll(_e),patterns:{},sortKey:vn};P.push(xn)}}A&&P.sort(function(Ni,Xi){return Ni.sortKey-Xi.sortKey});for(var Zn=0,Ln=P;Zn<Ln.length;Zn+=1){var fr=Ln[Zn],xr=fr.geometry,Pr=fr.index,kr=fr.sourceLayerIndex;if(this.hasPattern){var Hr=Sm("line",this.layers,fr,this.zoom,d);this.patternFeatures.push(Hr)}else this.addFeature(fr,xr,Pr,g,{});d.featureIndex.insert(u[Pr].feature,xr,Pr,kr,this.index)}},Ic.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},Ic.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var F=P[A];this.addFeature(F,F.geometry,F.index,d,g)}},Ic.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ic.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ic.prototype.upload=function(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,zy)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Tv),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},Ic.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ic.prototype.lineFeatureClips=function(u){if(u.properties&&u.properties.hasOwnProperty("mapbox_clip_start")&&u.properties.hasOwnProperty("mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}},Ic.prototype.addFeature=function(u,d,g,A,P){var F=this.layers[0].layout,j=F.get("line-join").evaluate(u,{}),te=F.get("line-cap"),_e=F.get("line-miter-limit"),Ne=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(var Xe=0,it=d;Xe<it.length;Xe+=1)this.addLine(it[Xe],u,j,te,_e,Ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},Ic.prototype.addLine=function(u,d,g,A,P,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var j=0;j<u.length-1;j++)this.totalDistance+=u[j].dist(u[j+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var te=Cg[d.type]==="Polygon",_e=u.length;_e>=2&&u[_e-1].equals(u[_e-2]);)_e--;for(var Ne=0;Ne<_e-1&&u[Ne].equals(u[Ne+1]);)Ne++;if(!(_e<(te?3:2))){g==="bevel"&&(P=1.05);var Xe,it=this.overscaling<=16?122880/(512*this.overscaling):0,Tt=this.segments.prepareSegment(10*_e,this.layoutVertexArray,this.indexArray),Bt=void 0,vn=void 0,xn=void 0,Zn=void 0;this.e1=this.e2=-1,te&&(Zn=u[Ne].sub(Xe=u[_e-2])._unit()._perp());for(var Ln=Ne;Ln<_e;Ln++)if(!(vn=Ln===_e-1?te?u[Ne+1]:void 0:u[Ln+1])||!u[Ln].equals(vn)){Zn&&(xn=Zn),Xe&&(Bt=Xe),Xe=u[Ln],Zn=vn?vn.sub(Xe)._unit()._perp():xn;var fr=(xn=xn||Zn).add(Zn);fr.x===0&&fr.y===0||fr._unit();var xr=xn.x*Zn.x+xn.y*Zn.y,Pr=fr.x*Zn.x+fr.y*Zn.y,kr=Pr!==0?1/Pr:1/0,Hr=2*Math.sqrt(2-2*Pr),Ni=Pr<Uy&&Bt&&vn,Xi=xn.x*Zn.y-xn.y*Zn.x>0;if(Ni&&Ln>Ne){var Uo=Xe.dist(Bt);if(Uo>2*it){var oo=Xe.sub(Xe.sub(Bt)._mult(it/Uo)._round());this.updateDistance(Bt,oo),this.addCurrentVertex(oo,xn,0,0,Tt),Bt=oo}}var Yo=Bt&&vn,fo=Yo?g:te?"butt":A;if(Yo&&fo==="round"&&(kr<F?fo="miter":kr<=2&&(fo="fakeround")),fo==="miter"&&kr>P&&(fo="bevel"),fo==="bevel"&&(kr>2&&(fo="flipbevel"),kr<P&&(fo="miter")),Bt&&this.updateDistance(Bt,Xe),fo==="miter")fr._mult(kr),this.addCurrentVertex(Xe,fr,0,0,Tt);else if(fo==="flipbevel"){if(kr>100)fr=Zn.mult(-1);else{var Ha=kr*xn.add(Zn).mag()/xn.sub(Zn).mag();fr._perp()._mult(Ha*(Xi?-1:1))}this.addCurrentVertex(Xe,fr,0,0,Tt),this.addCurrentVertex(Xe,fr.mult(-1),0,0,Tt)}else if(fo==="bevel"||fo==="fakeround"){var ua=-Math.sqrt(kr*kr-1),Co=Xi?ua:0,Wa=Xi?0:ua;if(Bt&&this.addCurrentVertex(Xe,xn,Co,Wa,Tt),fo==="fakeround")for(var Ra=Math.round(180*Hr/Math.PI/20),ls=1;ls<Ra;ls++){var qo=ls/Ra;if(qo!==.5){var vs=qo-.5;qo+=qo*vs*(qo-1)*((1.0904+xr*(xr*(3.55645-1.43519*xr)-3.2452))*vs*vs+(.848013+xr*(.215638*xr-1.06021)))}var Sl=Zn.sub(xn)._mult(qo)._add(xn)._unit()._mult(Xi?-1:1);this.addHalfVertex(Xe,Sl.x,Sl.y,!1,Xi,0,Tt)}vn&&this.addCurrentVertex(Xe,Zn,-Co,-Wa,Tt)}else if(fo==="butt")this.addCurrentVertex(Xe,fr,0,0,Tt);else if(fo==="square"){var Xl=Bt?1:-1;this.addCurrentVertex(Xe,fr,Xl,Xl,Tt)}else fo==="round"&&(Bt&&(this.addCurrentVertex(Xe,xn,0,0,Tt),this.addCurrentVertex(Xe,xn,1,1,Tt,!0)),vn&&(this.addCurrentVertex(Xe,Zn,-1,-1,Tt,!0),this.addCurrentVertex(Xe,Zn,0,0,Tt)));if(Ni&&Ln<_e-1){var wl=Xe.dist(vn);if(wl>2*it){var Tl=Xe.add(vn.sub(Xe)._mult(it/wl)._round());this.updateDistance(Xe,Tl),this.addCurrentVertex(Tl,Zn,0,0,Tt),Xe=Tl}}}}},Ic.prototype.addCurrentVertex=function(u,d,g,A,P,F){F===void 0&&(F=!1);var j=d.y*A-d.x,te=-d.y-d.x*A;this.addHalfVertex(u,d.x+d.y*g,d.y-d.x*g,F,!1,g,P),this.addHalfVertex(u,j,te,F,!0,-A,P),this.distance>Am/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(u,d,g,A,P,F))},Ic.prototype.addHalfVertex=function(u,d,g,A,P,F,j){var te=.5*(this.lineClips?this.scaledDistance*(Am-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u.x<<1)+(A?1:0),(u.y<<1)+(P?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(F===0?0:F<0?-1:1)|(63&te)<<2,te>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var _e=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_e),j.primitiveLength++),P?this.e2=_e:this.e1=_e},Ic.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ic.prototype.updateDistance=function(u,d){this.distance+=u.dist(d),this.updateScaledDistance()},Ji("LineBucket",Ic,{omit:["layers","patternFeatures"]});var Cm=new ml({"line-cap":new ko(Et.layout_line["line-cap"]),"line-join":new Ao(Et.layout_line["line-join"]),"line-miter-limit":new ko(Et.layout_line["line-miter-limit"]),"line-round-limit":new ko(Et.layout_line["line-round-limit"]),"line-sort-key":new Ao(Et.layout_line["line-sort-key"])}),h0={paint:new ml({"line-opacity":new Ao(Et.paint_line["line-opacity"]),"line-color":new Ao(Et.paint_line["line-color"]),"line-translate":new ko(Et.paint_line["line-translate"]),"line-translate-anchor":new ko(Et.paint_line["line-translate-anchor"]),"line-width":new Ao(Et.paint_line["line-width"]),"line-gap-width":new Ao(Et.paint_line["line-gap-width"]),"line-offset":new Ao(Et.paint_line["line-offset"]),"line-blur":new Ao(Et.paint_line["line-blur"]),"line-dasharray":new ju(Et.paint_line["line-dasharray"]),"line-pattern":new Ql(Et.paint_line["line-pattern"]),"line-gradient":new Vu(Et.paint_line["line-gradient"])}),layout:Cm},Om=new(function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A){return A=new Sa(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),u.prototype.possiblyEvaluate.call(this,g,A)},d.prototype.evaluate=function(g,A,P,F){return A=le({},A,{zoom:Math.floor(A.zoom)}),u.prototype.evaluate.call(this,g,A,P,F)},d}(Ao))(h0.paint.properties["line-width"].specification);Om.useIntegerZoom=!0;var Og=function(u){function d(g){u.call(this,g,h0),this.gradientVersion=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ou,this.gradientVersion=(this.gradientVersion+1)%He)},d.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},d.prototype.recalculate=function(g,A){u.prototype.recalculate.call(this,g,A),this.paint._values["line-floorwidth"]=Om.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,g)},d.prototype.createBucket=function(g){return new Ic(g)},d.prototype.queryRadius=function(g){var A=g,P=Av(Wu("line-width",this,A),Wu("line-gap-width",this,A)),F=Wu("line-offset",this,A);return P/2+Math.abs(F)+xl(this.paint.get("line-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,te,_e){var Ne=oc(g,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),te.angle,_e),Xe=_e/2*Av(this.paint.get("line-width").evaluate(A,P),this.paint.get("line-gap-width").evaluate(A,P)),it=this.paint.get("line-offset").evaluate(A,P);return it&&(F=function(Tt,Bt){for(var vn=[],xn=new ce(0,0),Zn=0;Zn<Tt.length;Zn++){for(var Ln=Tt[Zn],fr=[],xr=0;xr<Ln.length;xr++){var Pr=Ln[xr],kr=Ln[xr+1],Hr=xr===0?xn:Pr.sub(Ln[xr-1])._unit()._perp(),Ni=xr===Ln.length-1?xn:kr.sub(Pr)._unit()._perp(),Xi=Hr._add(Ni)._unit();Xi._mult(1/(Xi.x*Ni.x+Xi.y*Ni.y)),fr.push(Xi._mult(Bt)._add(Pr))}vn.push(fr)}return vn}(F,it*_e)),function(Tt,Bt,vn){for(var xn=0;xn<Bt.length;xn++){var Zn=Bt[xn];if(Tt.length>=3){for(var Ln=0;Ln<Zn.length;Ln++)if(Yf(Tt,Zn[Ln]))return!0}if(Xc(Tt,Zn,vn))return!0}return!1}(Ne,F,Xe)},d.prototype.isTileClipped=function(){return!0},d}(Zc);function Av(u,d){return d>0?d+2*u:u}var bc=bu([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mm=bu([{name:"a_projected_pos",components:3,type:"Float32"}],4),$0=(bu([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),bu([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Mg=(bu([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),bu([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ue=bu([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Yt(u,d,g){return u.sections.forEach(function(A){A.text=function(P,F,j){var te=F.layout.get("text-transform").evaluate(j,{});return te==="uppercase"?P=P.toLocaleUpperCase():te==="lowercase"&&(P=P.toLocaleLowerCase()),pf.applyArabicShaping&&(P=pf.applyArabicShaping(P)),P}(A.text,d,g)}),u}bu([{name:"triangle",components:3,type:"Uint16"}]),bu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),bu([{type:"Float32",name:"offsetX"}]),bu([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var On={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Mr=function(u,d,g,A,P){var F,j,te=8*P-A-1,_e=(1<<te)-1,Ne=_e>>1,Xe=-7,it=g?P-1:0,Tt=g?-1:1,Bt=u[d+it];for(it+=Tt,F=Bt&(1<<-Xe)-1,Bt>>=-Xe,Xe+=te;Xe>0;F=256*F+u[d+it],it+=Tt,Xe-=8);for(j=F&(1<<-Xe)-1,F>>=-Xe,Xe+=A;Xe>0;j=256*j+u[d+it],it+=Tt,Xe-=8);if(F===0)F=1-Ne;else{if(F===_e)return j?NaN:1/0*(Bt?-1:1);j+=Math.pow(2,A),F-=Ne}return(Bt?-1:1)*j*Math.pow(2,F-A)},ei=function(u,d,g,A,P,F){var j,te,_e,Ne=8*F-P-1,Xe=(1<<Ne)-1,it=Xe>>1,Tt=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,Bt=A?0:F-1,vn=A?1:-1,xn=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(te=isNaN(d)?1:0,j=Xe):(j=Math.floor(Math.log(d)/Math.LN2),d*(_e=Math.pow(2,-j))<1&&(j--,_e*=2),(d+=j+it>=1?Tt/_e:Tt*Math.pow(2,1-it))*_e>=2&&(j++,_e/=2),j+it>=Xe?(te=0,j=Xe):j+it>=1?(te=(d*_e-1)*Math.pow(2,P),j+=it):(te=d*Math.pow(2,it-1)*Math.pow(2,P),j=0));P>=8;u[g+Bt]=255&te,Bt+=vn,te/=256,P-=8);for(j=j<<P|te,Ne+=P;Ne>0;u[g+Bt]=255&j,Bt+=vn,j/=256,Ne-=8);u[g+Bt-vn]|=128*xn},Rr=br;function br(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}br.Varint=0,br.Fixed64=1,br.Bytes=2,br.Fixed32=5;var Li=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function hi(u){return u.type===br.Bytes?u.readVarint()+u.pos:u.pos+1}function ki(u,d,g){return g?4294967296*d+(u>>>0):4294967296*(d>>>0)+(u>>>0)}function Di(u,d,g){var A=d<=16383?1:d<=2097151?2:d<=268435455?3:Math.floor(Math.log(d)/(7*Math.LN2));g.realloc(A);for(var P=g.pos-1;P>=u;P--)g.buf[P+A]=g.buf[P]}function ji(u,d){for(var g=0;g<u.length;g++)d.writeVarint(u[g])}function $i(u,d){for(var g=0;g<u.length;g++)d.writeSVarint(u[g])}function bi(u,d){for(var g=0;g<u.length;g++)d.writeFloat(u[g])}function Vi(u,d){for(var g=0;g<u.length;g++)d.writeDouble(u[g])}function dr(u,d){for(var g=0;g<u.length;g++)d.writeBoolean(u[g])}function Ur(u,d){for(var g=0;g<u.length;g++)d.writeFixed32(u[g])}function xi(u,d){for(var g=0;g<u.length;g++)d.writeSFixed32(u[g])}function ro(u,d){for(var g=0;g<u.length;g++)d.writeFixed64(u[g])}function ai(u,d){for(var g=0;g<u.length;g++)d.writeSFixed64(u[g])}function eo(u,d){return(u[d]|u[d+1]<<8|u[d+2]<<16)+16777216*u[d+3]}function wi(u,d,g){u[g]=d,u[g+1]=d>>>8,u[g+2]=d>>>16,u[g+3]=d>>>24}function qi(u,d){return(u[d]|u[d+1]<<8|u[d+2]<<16)+(u[d+3]<<24)}function si(u,d,g){u===1&&g.readMessage(vi,d)}function vi(u,d,g){if(u===3){var A=g.readMessage(Ho,{}),P=A.width,F=A.height,j=A.left,te=A.top,_e=A.advance;d.push({id:A.id,bitmap:new Np({width:P+6,height:F+6},A.bitmap),metrics:{width:P,height:F,left:j,top:te,advance:_e}})}}function Ho(u,d,g){u===1?d.id=g.readVarint():u===2?d.bitmap=g.readBytes():u===3?d.width=g.readVarint():u===4?d.height=g.readVarint():u===5?d.left=g.readSVarint():u===6?d.top=g.readSVarint():u===7&&(d.advance=g.readVarint())}function va(u){for(var d=0,g=0,A=0,P=u;A<P.length;A+=1){var F=P[A];d+=F.w*F.h,g=Math.max(g,F.w)}u.sort(function(xn,Zn){return Zn.h-xn.h});for(var j=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),g),h:1/0}],te=0,_e=0,Ne=0,Xe=u;Ne<Xe.length;Ne+=1)for(var it=Xe[Ne],Tt=j.length-1;Tt>=0;Tt--){var Bt=j[Tt];if(!(it.w>Bt.w||it.h>Bt.h)){if(it.x=Bt.x,it.y=Bt.y,_e=Math.max(_e,it.y+it.h),te=Math.max(te,it.x+it.w),it.w===Bt.w&&it.h===Bt.h){var vn=j.pop();Tt<j.length&&(j[Tt]=vn)}else it.h===Bt.h?(Bt.x+=it.w,Bt.w-=it.w):it.w===Bt.w?(Bt.y+=it.h,Bt.h-=it.h):(j.push({x:Bt.x+it.w,y:Bt.y,w:Bt.w-it.w,h:it.h}),Bt.y+=it.h,Bt.h-=it.h);break}}return{w:te,h:_e,fill:d/(te*_e)||0}}br.prototype={destroy:function(){this.buf=null},readFields:function(u,d,g){for(g=g||this.length;this.pos<g;){var A=this.readVarint(),P=A>>3,F=this.pos;this.type=7&A,u(P,d,this),this.pos===F&&this.skip(A)}return d},readMessage:function(u,d){return this.readFields(u,d,this.readVarint()+this.pos)},readFixed32:function(){var u=eo(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=qi(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=eo(this.buf,this.pos)+4294967296*eo(this.buf,this.pos+4);return this.pos+=8,u},readSFixed64:function(){var u=eo(this.buf,this.pos)+4294967296*qi(this.buf,this.pos+4);return this.pos+=8,u},readFloat:function(){var u=Mr(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=Mr(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var d,g,A=this.buf;return d=127&(g=A[this.pos++]),g<128?d:(d|=(127&(g=A[this.pos++]))<<7,g<128?d:(d|=(127&(g=A[this.pos++]))<<14,g<128?d:(d|=(127&(g=A[this.pos++]))<<21,g<128?d:function(P,F,j){var te,_e,Ne=j.buf;if(te=(112&(_e=Ne[j.pos++]))>>4,_e<128||(te|=(127&(_e=Ne[j.pos++]))<<3,_e<128)||(te|=(127&(_e=Ne[j.pos++]))<<10,_e<128)||(te|=(127&(_e=Ne[j.pos++]))<<17,_e<128)||(te|=(127&(_e=Ne[j.pos++]))<<24,_e<128)||(te|=(1&(_e=Ne[j.pos++]))<<31,_e<128))return ki(P,te,F);throw new Error("Expected varint not more than 10 bytes")}(d|=(15&(g=A[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&Li?function(g,A,P){return Li.decode(g.subarray(A,P))}(this.buf,d,u):function(g,A,P){for(var F="",j=A;j<P;){var te,_e,Ne,Xe=g[j],it=null,Tt=Xe>239?4:Xe>223?3:Xe>191?2:1;if(j+Tt>P)break;Tt===1?Xe<128&&(it=Xe):Tt===2?(192&(te=g[j+1]))==128&&(it=(31&Xe)<<6|63&te)<=127&&(it=null):Tt===3?(_e=g[j+2],(192&(te=g[j+1]))==128&&(192&_e)==128&&((it=(15&Xe)<<12|(63&te)<<6|63&_e)<=2047||it>=55296&&it<=57343)&&(it=null)):Tt===4&&(_e=g[j+2],Ne=g[j+3],(192&(te=g[j+1]))==128&&(192&_e)==128&&(192&Ne)==128&&((it=(15&Xe)<<18|(63&te)<<12|(63&_e)<<6|63&Ne)<=65535||it>=1114112)&&(it=null)),it===null?(it=65533,Tt=1):it>65535&&(it-=65536,F+=String.fromCharCode(it>>>10&1023|55296),it=56320|1023&it),F+=String.fromCharCode(it),j+=Tt}return F}(this.buf,d,u)},readBytes:function(){var u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d},readPackedVarint:function(u,d){if(this.type!==br.Bytes)return u.push(this.readVarint(d));var g=hi(this);for(u=u||[];this.pos<g;)u.push(this.readVarint(d));return u},readPackedSVarint:function(u){if(this.type!==br.Bytes)return u.push(this.readSVarint());var d=hi(this);for(u=u||[];this.pos<d;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==br.Bytes)return u.push(this.readBoolean());var d=hi(this);for(u=u||[];this.pos<d;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==br.Bytes)return u.push(this.readFloat());var d=hi(this);for(u=u||[];this.pos<d;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==br.Bytes)return u.push(this.readDouble());var d=hi(this);for(u=u||[];this.pos<d;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==br.Bytes)return u.push(this.readFixed32());var d=hi(this);for(u=u||[];this.pos<d;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==br.Bytes)return u.push(this.readSFixed32());var d=hi(this);for(u=u||[];this.pos<d;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==br.Bytes)return u.push(this.readFixed64());var d=hi(this);for(u=u||[];this.pos<d;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==br.Bytes)return u.push(this.readSFixed64());var d=hi(this);for(u=u||[];this.pos<d;)u.push(this.readSFixed64());return u},skip:function(u){var d=7&u;if(d===br.Varint)for(;this.buf[this.pos++]>127;);else if(d===br.Bytes)this.pos=this.readVarint()+this.pos;else if(d===br.Fixed32)this.pos+=4;else{if(d!==br.Fixed64)throw new Error("Unimplemented type: "+d);this.pos+=8}},writeTag:function(u,d){this.writeVarint(u<<3|d)},realloc:function(u){for(var d=this.length||16;d<this.pos+u;)d*=2;if(d!==this.length){var g=new Uint8Array(d);g.set(this.buf),this.buf=g,this.length=d}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),wi(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),wi(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),wi(this.buf,-1&u,this.pos),wi(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),wi(this.buf,-1&u,this.pos),wi(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(d,g){var A,P;if(d>=0?(A=d%4294967296|0,P=d/4294967296|0):(P=~(-d/4294967296),4294967295^(A=~(-d%4294967296))?A=A+1|0:(A=0,P=P+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(F,j,te){te.buf[te.pos++]=127&F|128,F>>>=7,te.buf[te.pos++]=127&F|128,F>>>=7,te.buf[te.pos++]=127&F|128,F>>>=7,te.buf[te.pos++]=127&F|128,te.buf[te.pos]=127&(F>>>=7)}(A,0,g),function(F,j){var te=(7&F)<<4;j.buf[j.pos++]|=te|((F>>>=3)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F)))))}(P,g)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var d=this.pos;this.pos=function(A,P,F){for(var j,te,_e=0;_e<P.length;_e++){if((j=P.charCodeAt(_e))>55295&&j<57344){if(!te){j>56319||_e+1===P.length?(A[F++]=239,A[F++]=191,A[F++]=189):te=j;continue}if(j<56320){A[F++]=239,A[F++]=191,A[F++]=189,te=j;continue}j=te-55296<<10|j-56320|65536,te=null}else te&&(A[F++]=239,A[F++]=191,A[F++]=189,te=null);j<128?A[F++]=j:(j<2048?A[F++]=j>>6|192:(j<65536?A[F++]=j>>12|224:(A[F++]=j>>18|240,A[F++]=j>>12&63|128),A[F++]=j>>6&63|128),A[F++]=63&j|128)}return F}(this.buf,u,this.pos);var g=this.pos-d;g>=128&&Di(d,g,this),this.pos=d-1,this.writeVarint(g),this.pos+=g},writeFloat:function(u){this.realloc(4),ei(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),ei(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var d=u.length;this.writeVarint(d),this.realloc(d);for(var g=0;g<d;g++)this.buf[this.pos++]=u[g]},writeRawMessage:function(u,d){this.pos++;var g=this.pos;u(d,this);var A=this.pos-g;A>=128&&Di(g,A,this),this.pos=g-1,this.writeVarint(A),this.pos+=A},writeMessage:function(u,d,g){this.writeTag(u,br.Bytes),this.writeRawMessage(d,g)},writePackedVarint:function(u,d){d.length&&this.writeMessage(u,ji,d)},writePackedSVarint:function(u,d){d.length&&this.writeMessage(u,$i,d)},writePackedBoolean:function(u,d){d.length&&this.writeMessage(u,dr,d)},writePackedFloat:function(u,d){d.length&&this.writeMessage(u,bi,d)},writePackedDouble:function(u,d){d.length&&this.writeMessage(u,Vi,d)},writePackedFixed32:function(u,d){d.length&&this.writeMessage(u,Ur,d)},writePackedSFixed32:function(u,d){d.length&&this.writeMessage(u,xi,d)},writePackedFixed64:function(u,d){d.length&&this.writeMessage(u,ro,d)},writePackedSFixed64:function(u,d){d.length&&this.writeMessage(u,ai,d)},writeBytesField:function(u,d){this.writeTag(u,br.Bytes),this.writeBytes(d)},writeFixed32Field:function(u,d){this.writeTag(u,br.Fixed32),this.writeFixed32(d)},writeSFixed32Field:function(u,d){this.writeTag(u,br.Fixed32),this.writeSFixed32(d)},writeFixed64Field:function(u,d){this.writeTag(u,br.Fixed64),this.writeFixed64(d)},writeSFixed64Field:function(u,d){this.writeTag(u,br.Fixed64),this.writeSFixed64(d)},writeVarintField:function(u,d){this.writeTag(u,br.Varint),this.writeVarint(d)},writeSVarintField:function(u,d){this.writeTag(u,br.Varint),this.writeSVarint(d)},writeStringField:function(u,d){this.writeTag(u,br.Bytes),this.writeString(d)},writeFloatField:function(u,d){this.writeTag(u,br.Fixed32),this.writeFloat(d)},writeDoubleField:function(u,d){this.writeTag(u,br.Fixed64),this.writeDouble(d)},writeBooleanField:function(u,d){this.writeVarintField(u,!!d)}};var Ki=function(u,d){var g=d.pixelRatio,A=d.version,P=d.stretchX,F=d.stretchY,j=d.content;this.paddedRect=u,this.pixelRatio=g,this.stretchX=P,this.stretchY=F,this.content=j,this.version=A},Ri={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ri.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ri.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ri.tlbr.get=function(){return this.tl.concat(this.br)},Ri.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ki.prototype,Ri);var Jr=function(u,d){var g={},A={};this.haveRenderCallbacks=[];var P=[];this.addImages(u,g,P),this.addImages(d,A,P);var F=va(P),j=new Yc({width:F.w||1,height:F.h||1});for(var te in u){var _e=u[te],Ne=g[te].paddedRect;Yc.copy(_e.data,j,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},_e.data)}for(var Xe in d){var it=d[Xe],Tt=A[Xe].paddedRect,Bt=Tt.x+1,vn=Tt.y+1,xn=it.data.width,Zn=it.data.height;Yc.copy(it.data,j,{x:0,y:0},{x:Bt,y:vn},it.data),Yc.copy(it.data,j,{x:0,y:Zn-1},{x:Bt,y:vn-1},{width:xn,height:1}),Yc.copy(it.data,j,{x:0,y:0},{x:Bt,y:vn+Zn},{width:xn,height:1}),Yc.copy(it.data,j,{x:xn-1,y:0},{x:Bt-1,y:vn},{width:1,height:Zn}),Yc.copy(it.data,j,{x:0,y:0},{x:Bt+xn,y:vn},{width:1,height:Zn})}this.image=j,this.iconPositions=g,this.patternPositions=A};Jr.prototype.addImages=function(u,d,g){for(var A in u){var P=u[A],F={x:0,y:0,w:P.data.width+2,h:P.data.height+2};g.push(F),d[A]=new Ki(F,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(A)}},Jr.prototype.patchUpdatedImages=function(u,d){for(var g in u.dispatchRenderCallbacks(this.haveRenderCallbacks),u.updatedImages)this.patchUpdatedImage(this.iconPositions[g],u.getImage(g),d),this.patchUpdatedImage(this.patternPositions[g],u.getImage(g),d)},Jr.prototype.patchUpdatedImage=function(u,d,g){if(u&&d&&u.version!==d.version){u.version=d.version;var A=u.tl;g.update(d.data,void 0,{x:A[0],y:A[1]})}},Ji("ImagePosition",Ki),Ji("ImageAtlas",Jr);var zo={horizontal:1,vertical:2,horizontalOnly:3},ie=function(){this.scale=1,this.fontStack="",this.imageName=null};ie.forText=function(u,d){var g=new ie;return g.scale=u||1,g.fontStack=d,g},ie.forImage=function(u){var d=new ie;return d.imageName=u,d};var lo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ma(u,d,g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn,xn){var Zn,Ln=lo.fromFeature(u,P);it===zo.vertical&&Ln.verticalizePunctuation();var fr=pf.processBidirectionalText,xr=pf.processStyledBidirectionalText;if(fr&&Ln.sections.length===1){Zn=[];for(var Pr=0,kr=fr(Ln.toString(),cu(Ln,Ne,F,d,A,Bt,vn));Pr<kr.length;Pr+=1){var Hr=kr[Pr],Ni=new lo;Ni.text=Hr,Ni.sections=Ln.sections;for(var Xi=0;Xi<Hr.length;Xi++)Ni.sectionIndex.push(0);Zn.push(Ni)}}else if(xr){Zn=[];for(var Uo=0,oo=xr(Ln.text,Ln.sectionIndex,cu(Ln,Ne,F,d,A,Bt,vn));Uo<oo.length;Uo+=1){var Yo=oo[Uo],fo=new lo;fo.text=Yo[0],fo.sectionIndex=Yo[1],fo.sections=Ln.sections,Zn.push(fo)}}else Zn=function(Co,Wa){for(var Ra=[],ls=Co.text,qo=0,vs=0,Sl=Wa;vs<Sl.length;vs+=1){var Xl=Sl[vs];Ra.push(Co.substring(qo,Xl)),qo=Xl}return qo<ls.length&&Ra.push(Co.substring(qo,ls.length)),Ra}(Ln,cu(Ln,Ne,F,d,A,Bt,vn));var Ha=[],ua={positionedLines:Ha,text:Ln.toString(),top:Xe[1],bottom:Xe[1],left:Xe[0],right:Xe[0],writingMode:it,iconsInText:!1,verticalizable:!1};return function(Co,Wa,Ra,ls,qo,vs,Sl,Xl,wl,Tl,eu,Pu){for(var qu=0,Kc=-17,ac=0,Qc=0,hu=Xl==="right"?1:Xl==="left"?0:.5,Iu=0,za=0,Ks=qo;za<Ks.length;za+=1){var pa=Ks[za];pa.trim();var hs=pa.getMaxScale(),yf=24*(hs-1),Zs={positionedGlyphs:[],lineOffset:0};Co.positionedLines[Iu]=Zs;var Qs=Zs.positionedGlyphs,du=0;if(pa.length()){for(var Ec=0;Ec<pa.length();Ec++){var ws=pa.getSection(Ec),Gd=pa.getSectionIndex(Ec),lh=pa.getCharCode(Ec),dp=0,pu=null,pp=null,ad=null,Pv=24,v0=!(wl===zo.horizontal||!eu&&!Md(lh)||eu&&(Hn[lh]||(mp=lh,Ui.Arabic(mp)||Ui["Arabic Supplement"](mp)||Ui["Arabic Extended-A"](mp)||Ui["Arabic Presentation Forms-A"](mp)||Ui["Arabic Presentation Forms-B"](mp))));if(ws.imageName){var Q0=ls[ws.imageName];if(!Q0)continue;ad=ws.imageName,Co.iconsInText=Co.iconsInText||!0,pp=Q0.paddedRect;var vp=Q0.displaySize;ws.scale=24*ws.scale/Pu,dp=yf+(24-vp[1]*ws.scale),Pv=(pu={width:vp[0],height:vp[1],left:1,top:-3,advance:v0?vp[1]:vp[0]}).advance;var Iv=v0?vp[0]*ws.scale-24*hs:vp[1]*ws.scale-24*hs;Iv>0&&Iv>du&&(du=Iv)}else{var Lg=Ra[ws.fontStack],Zd=Lg&&Lg[lh];if(Zd&&Zd.rect)pp=Zd.rect,pu=Zd.metrics;else{var J0=Wa[ws.fontStack],Dg=J0&&J0[lh];if(!Dg)continue;pu=Dg.metrics}dp=24*(hs-ws.scale)}v0?(Co.verticalizable=!0,Qs.push({glyph:lh,imageName:ad,x:qu,y:Kc+dp,vertical:v0,scale:ws.scale,fontStack:ws.fontStack,sectionIndex:Gd,metrics:pu,rect:pp}),qu+=Pv*ws.scale+Tl):(Qs.push({glyph:lh,imageName:ad,x:qu,y:Kc+dp,vertical:v0,scale:ws.scale,fontStack:ws.fontStack,sectionIndex:Gd,metrics:pu,rect:pp}),qu+=pu.advance*ws.scale+Tl)}Qs.length!==0&&(ac=Math.max(qu-Tl,ac),Eu(Qs,0,Qs.length-1,hu,du)),qu=0;var Vy=vs*hs+du;Zs.lineOffset=Math.max(du,yf),Kc+=Vy,Qc=Math.max(Vy,Qc),++Iu}else Kc+=vs,++Iu}var mp,uh=Kc- -17,gp=il(Sl),Nh=gp.horizontalAlign,Vp=gp.verticalAlign;(function(ch,Nm,ev,tv,Lv,Fm,Bm,km,Ng){var m0,nv=(Nm-ev)*Lv;m0=Fm!==Bm?-km*tv- -17:(-tv*Ng+.5)*Bm;for(var g0=0,Dv=ch;g0<Dv.length;g0+=1)for(var y0=0,rv=Dv[g0].positionedGlyphs;y0<rv.length;y0+=1){var Nv=rv[y0];Nv.x+=nv,Nv.y+=m0}})(Co.positionedLines,hu,Nh,Vp,ac,Qc,vs,uh,qo.length),Co.top+=-Vp*uh,Co.bottom=Co.top+uh,Co.left+=-Nh*ac,Co.right=Co.left+ac}(ua,d,g,A,Zn,j,te,_e,it,Ne,Tt,xn),!function(Co){for(var Wa=0,Ra=Co;Wa<Ra.length;Wa+=1)if(Ra[Wa].positionedGlyphs.length!==0)return!1;return!0}(Ha)&&ua}lo.fromFeature=function(u,d){for(var g=new lo,A=0;A<u.sections.length;A++){var P=u.sections[A];P.image?g.addImageSection(P):g.addTextSection(P,d)}return g},lo.prototype.length=function(){return this.text.length},lo.prototype.getSection=function(u){return this.sections[this.sectionIndex[u]]},lo.prototype.getSectionIndex=function(u){return this.sectionIndex[u]},lo.prototype.getCharCode=function(u){return this.text.charCodeAt(u)},lo.prototype.verticalizePunctuation=function(){this.text=function(u){for(var d="",g=0;g<u.length;g++){var A=u.charCodeAt(g+1)||null,P=u.charCodeAt(g-1)||null;d+=A&&Kh(A)&&!On[u[g+1]]||P&&Kh(P)&&!On[u[g-1]]||!On[u[g]]?u[g]:On[u[g]]}return d}(this.text)},lo.prototype.trim=function(){for(var u=0,d=0;d<this.text.length&&Hn[this.text.charCodeAt(d)];d++)u++;for(var g=this.text.length,A=this.text.length-1;A>=0&&A>=u&&Hn[this.text.charCodeAt(A)];A--)g--;this.text=this.text.substring(u,g),this.sectionIndex=this.sectionIndex.slice(u,g)},lo.prototype.substring=function(u,d){var g=new lo;return g.text=this.text.substring(u,d),g.sectionIndex=this.sectionIndex.slice(u,d),g.sections=this.sections,g},lo.prototype.toString=function(){return this.text},lo.prototype.getMaxScale=function(){var u=this;return this.sectionIndex.reduce(function(d,g){return Math.max(d,u.sections[g].scale)},0)},lo.prototype.addTextSection=function(u,d){this.text+=u.text,this.sections.push(ie.forText(u.scale,u.fontStack||d));for(var g=this.sections.length-1,A=0;A<u.text.length;++A)this.sectionIndex.push(g)},lo.prototype.addImageSection=function(u){var d=u.image?u.image.name:"";if(d.length!==0){var g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(ie.forImage(d)),this.sectionIndex.push(this.sections.length-1)):Ze("Reached maximum number of images 6401")}else Ze("Can't add FormattedSection with an empty image.")},lo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Hn={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},jr={};function Qa(u,d,g,A,P,F){if(d.imageName){var j=A[d.imageName];return j?j.displaySize[0]*d.scale*24/F+P:0}var te=g[d.fontStack],_e=te&&te[u];return _e?_e.metrics.advance*d.scale+P:0}function Jl(u,d,g,A){var P=Math.pow(u-d,2);return A?u<d?P/2:2*P:P+Math.abs(g)*g}function Xu(u,d,g){var A=0;return u===10&&(A-=1e4),g&&(A+=150),u!==40&&u!==65288||(A+=50),d!==41&&d!==65289||(A+=50),A}function Ja(u,d,g,A,P,F){for(var j=null,te=Jl(d,g,P,F),_e=0,Ne=A;_e<Ne.length;_e+=1){var Xe=Ne[_e],it=Jl(d-Xe.x,g,P,F)+Xe.badness;it<=te&&(j=Xe,te=it)}return{index:u,x:d,priorBreak:j,badness:te}}function cu(u,d,g,A,P,F,j){if(F!=="point")return[];if(!u)return[];for(var te,_e=[],Ne=function(Zn,Ln,fr,xr,Pr,kr){for(var Hr=0,Ni=0;Ni<Zn.length();Ni++){var Xi=Zn.getSection(Ni);Hr+=Qa(Zn.getCharCode(Ni),Xi,xr,Pr,Ln,kr)}return Hr/Math.max(1,Math.ceil(Hr/fr))}(u,d,g,A,P,j),Xe=u.text.indexOf("\u200B")>=0,it=0,Tt=0;Tt<u.length();Tt++){var Bt=u.getSection(Tt),vn=u.getCharCode(Tt);if(Hn[vn]||(it+=Qa(vn,Bt,A,P,d,j)),Tt<u.length()-1){var xn=!((te=vn)<11904||!(Ui["Bopomofo Extended"](te)||Ui.Bopomofo(te)||Ui["CJK Compatibility Forms"](te)||Ui["CJK Compatibility Ideographs"](te)||Ui["CJK Compatibility"](te)||Ui["CJK Radicals Supplement"](te)||Ui["CJK Strokes"](te)||Ui["CJK Symbols and Punctuation"](te)||Ui["CJK Unified Ideographs Extension A"](te)||Ui["CJK Unified Ideographs"](te)||Ui["Enclosed CJK Letters and Months"](te)||Ui["Halfwidth and Fullwidth Forms"](te)||Ui.Hiragana(te)||Ui["Ideographic Description Characters"](te)||Ui["Kangxi Radicals"](te)||Ui["Katakana Phonetic Extensions"](te)||Ui.Katakana(te)||Ui["Vertical Forms"](te)||Ui["Yi Radicals"](te)||Ui["Yi Syllables"](te)));(jr[vn]||xn||Bt.imageName)&&_e.push(Ja(Tt+1,it,Ne,_e,Xu(vn,u.getCharCode(Tt+1),xn&&Xe),!1))}}return function Zn(Ln){return Ln?Zn(Ln.priorBreak).concat(Ln.index):[]}(Ja(u.length(),it,Ne,_e,0,!0))}function il(u){var d=.5,g=.5;switch(u){case"right":case"top-right":case"bottom-right":d=1;break;case"left":case"top-left":case"bottom-left":d=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":g=1;break;case"top":case"top-right":case"top-left":g=0}return{horizontalAlign:d,verticalAlign:g}}function Eu(u,d,g,A,P){if(A||P)for(var F=u[g],j=(u[g].x+F.metrics.advance*F.scale)*A,te=d;te<=g;te++)u[te].x-=j,u[te].y+=P}function Su(u,d,g,A,P,F){var j,te=u.image;if(te.content){var _e=te.content,Ne=te.pixelRatio||1;j=[_e[0]/Ne,_e[1]/Ne,te.displaySize[0]-_e[2]/Ne,te.displaySize[1]-_e[3]/Ne]}var Xe,it,Tt,Bt,vn=d.left*F,xn=d.right*F;g==="width"||g==="both"?(Bt=P[0]+vn-A[3],it=P[0]+xn+A[1]):it=(Bt=P[0]+(vn+xn-te.displaySize[0])/2)+te.displaySize[0];var Zn=d.top*F,Ln=d.bottom*F;return g==="height"||g==="both"?(Xe=P[1]+Zn-A[0],Tt=P[1]+Ln+A[2]):Tt=(Xe=P[1]+(Zn+Ln-te.displaySize[1])/2)+te.displaySize[1],{image:te,top:Xe,right:it,bottom:Tt,left:Bt,collisionPadding:j}}jr[10]=!0,jr[32]=!0,jr[38]=!0,jr[40]=!0,jr[41]=!0,jr[43]=!0,jr[45]=!0,jr[47]=!0,jr[173]=!0,jr[183]=!0,jr[8203]=!0,jr[8208]=!0,jr[8211]=!0,jr[8231]=!0;var Ll=function(u){function d(g,A,P,F){u.call(this,g,A),this.angle=P,F!==void 0&&(this.segment=F)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)},d}(ce);function Yu(u,d){var g=d.expression;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new Sa(u+1))};if(g.kind==="source")return{kind:"source"};for(var A=g.zoomStops,P=g.interpolationType,F=0;F<A.length&&A[F]<=u;)F++;for(var j=F=Math.max(0,F-1);j<A.length&&A[j]<u+1;)j++;j=Math.min(A.length-1,j);var te=A[F],_e=A[j];return g.kind==="composite"?{kind:"composite",minZoom:te,maxZoom:_e,interpolationType:P}:{kind:"camera",minZoom:te,maxZoom:_e,minSize:g.evaluate(new Sa(te)),maxSize:g.evaluate(new Sa(_e)),interpolationType:P}}function Lc(u,d,g){var A=d.uSize,P=g.lowerSize;return u.kind==="source"?P/128:u.kind==="composite"?xs(P/128,g.upperSize/128,d.uSizeT):A}function wu(u,d){var g=0,A=0;if(u.kind==="constant")A=u.layoutSize;else if(u.kind!=="source"){var P=u.interpolationType,F=P?Oe(jl.interpolationFactor(P,d,u.minZoom,u.maxZoom),0,1):0;u.kind==="camera"?A=xs(u.minSize,u.maxSize,F):g=F}return{uSizeT:g,uSize:A}}Ji("Anchor",Ll);var ka=Object.freeze({__proto__:null,getSizeData:Yu,evaluateSizeForFeature:Lc,evaluateSizeForZoom:wu,SIZE_PACK_FACTOR:128});function xc(u,d,g,A,P){if(d.segment===void 0)return!0;for(var F=d,j=d.segment+1,te=0;te>-g/2;){if(--j<0)return!1;te-=u[j].dist(F),F=u[j]}te+=u[j].dist(u[j+1]),j++;for(var _e=[],Ne=0;te<g/2;){var Xe=u[j],it=u[j+1];if(!it)return!1;var Tt=u[j-1].angleTo(Xe)-Xe.angleTo(it);for(Tt=Math.abs((Tt+3*Math.PI)%(2*Math.PI)-Math.PI),_e.push({distance:te,angleDelta:Tt}),Ne+=Tt;te-_e[0].distance>A;)Ne-=_e.shift().angleDelta;if(Ne>P)return!1;j++,te+=Xe.dist(it)}return!0}function Os(u){for(var d=0,g=0;g<u.length-1;g++)d+=u[g].dist(u[g+1]);return d}function Jo(u,d,g){return u?.6*d*g:0}function es(u,d){return Math.max(u?u.right-u.left:0,d?d.right-d.left:0)}function fs(u,d,g,A,P,F){for(var j=Jo(g,P,F),te=es(g,A)*F,_e=0,Ne=Os(u)/2,Xe=0;Xe<u.length-1;Xe++){var it=u[Xe],Tt=u[Xe+1],Bt=it.dist(Tt);if(_e+Bt>Ne){var vn=(Ne-_e)/Bt,xn=xs(it.x,Tt.x,vn),Zn=xs(it.y,Tt.y,vn),Ln=new Ll(xn,Zn,Tt.angleTo(it),Xe);return Ln._round(),!j||xc(u,Ln,te,j,d)?Ln:void 0}_e+=Bt}}function fu(u,d,g,A,P,F,j,te,_e){var Ne=Jo(A,F,j),Xe=es(A,P),it=Xe*j,Tt=u[0].x===0||u[0].x===_e||u[0].y===0||u[0].y===_e;return d-it<d/4&&(d=it+d/4),function Bt(vn,xn,Zn,Ln,fr,xr,Pr,kr,Hr){for(var Ni=xr/2,Xi=Os(vn),Uo=0,oo=xn-Zn,Yo=[],fo=0;fo<vn.length-1;fo++){for(var Ha=vn[fo],ua=vn[fo+1],Co=Ha.dist(ua),Wa=ua.angleTo(Ha);oo+Zn<Uo+Co;){var Ra=((oo+=Zn)-Uo)/Co,ls=xs(Ha.x,ua.x,Ra),qo=xs(Ha.y,ua.y,Ra);if(ls>=0&&ls<Hr&&qo>=0&&qo<Hr&&oo-Ni>=0&&oo+Ni<=Xi){var vs=new Ll(ls,qo,Wa,fo);vs._round(),Ln&&!xc(vn,vs,xr,Ln,fr)||Yo.push(vs)}}Uo+=Co}return kr||Yo.length||Pr||(Yo=Bt(vn,Uo/2,Zn,Ln,fr,xr,Pr,!0,Hr)),Yo}(u,Tt?d/2*te%d:(Xe/2+2*F)*j*te%d,d,Ne,g,it,Tt,!1,_e)}function Dh(u,d,g,A,P){for(var F=[],j=0;j<u.length;j++)for(var te=u[j],_e=void 0,Ne=0;Ne<te.length-1;Ne++){var Xe=te[Ne],it=te[Ne+1];Xe.x<d&&it.x<d||(Xe.x<d?Xe=new ce(d,Xe.y+(d-Xe.x)/(it.x-Xe.x)*(it.y-Xe.y))._round():it.x<d&&(it=new ce(d,Xe.y+(d-Xe.x)/(it.x-Xe.x)*(it.y-Xe.y))._round()),Xe.y<g&&it.y<g||(Xe.y<g?Xe=new ce(Xe.x+(g-Xe.y)/(it.y-Xe.y)*(it.x-Xe.x),g)._round():it.y<g&&(it=new ce(Xe.x+(g-Xe.y)/(it.y-Xe.y)*(it.x-Xe.x),g)._round()),Xe.x>=A&&it.x>=A||(Xe.x>=A?Xe=new ce(A,Xe.y+(A-Xe.x)/(it.x-Xe.x)*(it.y-Xe.y))._round():it.x>=A&&(it=new ce(A,Xe.y+(A-Xe.x)/(it.x-Xe.x)*(it.y-Xe.y))._round()),Xe.y>=P&&it.y>=P||(Xe.y>=P?Xe=new ce(Xe.x+(P-Xe.y)/(it.y-Xe.y)*(it.x-Xe.x),P)._round():it.y>=P&&(it=new ce(Xe.x+(P-Xe.y)/(it.y-Xe.y)*(it.x-Xe.x),P)._round()),_e&&Xe.equals(_e[_e.length-1])||F.push(_e=[Xe]),_e.push(it)))))}return F}function bn(u,d,g,A){var P=[],F=u.image,j=F.pixelRatio,te=F.paddedRect.w-2,_e=F.paddedRect.h-2,Ne=u.right-u.left,Xe=u.bottom-u.top,it=F.stretchX||[[0,te]],Tt=F.stretchY||[[0,_e]],Bt=function(ls,qo){return ls+qo[1]-qo[0]},vn=it.reduce(Bt,0),xn=Tt.reduce(Bt,0),Zn=te-vn,Ln=_e-xn,fr=0,xr=vn,Pr=0,kr=xn,Hr=0,Ni=Zn,Xi=0,Uo=Ln;if(F.content&&A){var oo=F.content;fr=Lr(it,0,oo[0]),Pr=Lr(Tt,0,oo[1]),xr=Lr(it,oo[0],oo[2]),kr=Lr(Tt,oo[1],oo[3]),Hr=oo[0]-fr,Xi=oo[1]-Pr,Ni=oo[2]-oo[0]-xr,Uo=oo[3]-oo[1]-kr}var Yo=function(ls,qo,vs,Sl){var Xl=co(ls.stretch-fr,xr,Ne,u.left),wl=wa(ls.fixed-Hr,Ni,ls.stretch,vn),Tl=co(qo.stretch-Pr,kr,Xe,u.top),eu=wa(qo.fixed-Xi,Uo,qo.stretch,xn),Pu=co(vs.stretch-fr,xr,Ne,u.left),qu=wa(vs.fixed-Hr,Ni,vs.stretch,vn),Kc=co(Sl.stretch-Pr,kr,Xe,u.top),ac=wa(Sl.fixed-Xi,Uo,Sl.stretch,xn),Qc=new ce(Xl,Tl),hu=new ce(Pu,Tl),Iu=new ce(Pu,Kc),za=new ce(Xl,Kc),Ks=new ce(wl/j,eu/j),pa=new ce(qu/j,ac/j),hs=d*Math.PI/180;if(hs){var yf=Math.sin(hs),Zs=Math.cos(hs),Qs=[Zs,-yf,yf,Zs];Qc._matMult(Qs),hu._matMult(Qs),za._matMult(Qs),Iu._matMult(Qs)}var du=ls.stretch+ls.fixed,Ec=qo.stretch+qo.fixed;return{tl:Qc,tr:hu,bl:za,br:Iu,tex:{x:F.paddedRect.x+1+du,y:F.paddedRect.y+1+Ec,w:vs.stretch+vs.fixed-du,h:Sl.stretch+Sl.fixed-Ec},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ks,pixelOffsetBR:pa,minFontScaleX:Ni/j/Ne,minFontScaleY:Uo/j/Xe,isSDF:g}};if(A&&(F.stretchX||F.stretchY))for(var fo=vr(it,Zn,vn),Ha=vr(Tt,Ln,xn),ua=0;ua<fo.length-1;ua++)for(var Co=fo[ua],Wa=fo[ua+1],Ra=0;Ra<Ha.length-1;Ra++)P.push(Yo(Co,Ha[Ra],Wa,Ha[Ra+1]));else P.push(Yo({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:te+1},{fixed:0,stretch:_e+1}));return P}function Lr(u,d,g){for(var A=0,P=0,F=u;P<F.length;P+=1){var j=F[P];A+=Math.max(d,Math.min(g,j[1]))-Math.max(d,Math.min(g,j[0]))}return A}function vr(u,d,g){for(var A=[{fixed:-1,stretch:0}],P=0,F=u;P<F.length;P+=1){var j=F[P],te=j[0],_e=j[1],Ne=A[A.length-1];A.push({fixed:te-Ne.stretch,stretch:Ne.stretch}),A.push({fixed:te-Ne.stretch,stretch:Ne.stretch+(_e-te)})}return A.push({fixed:d+1,stretch:g}),A}function co(u,d,g,A){return u/d*g+A}function wa(u,d,g,A){return u-d*g/A}var qs=function(u,d,g,A,P,F,j,te,_e,Ne){if(this.boxStartIndex=u.length,_e){var Xe=F.top,it=F.bottom,Tt=F.collisionPadding;Tt&&(Xe-=Tt[1],it+=Tt[3]);var Bt=it-Xe;Bt>0&&(Bt=Math.max(10,Bt),this.circleDiameter=Bt)}else{var vn=F.top*j-te,xn=F.bottom*j+te,Zn=F.left*j-te,Ln=F.right*j+te,fr=F.collisionPadding;if(fr&&(Zn-=fr[0]*j,vn-=fr[1]*j,Ln+=fr[2]*j,xn+=fr[3]*j),Ne){var xr=new ce(Zn,vn),Pr=new ce(Ln,vn),kr=new ce(Zn,xn),Hr=new ce(Ln,xn),Ni=Ne*Math.PI/180;xr._rotate(Ni),Pr._rotate(Ni),kr._rotate(Ni),Hr._rotate(Ni),Zn=Math.min(xr.x,Pr.x,kr.x,Hr.x),Ln=Math.max(xr.x,Pr.x,kr.x,Hr.x),vn=Math.min(xr.y,Pr.y,kr.y,Hr.y),xn=Math.max(xr.y,Pr.y,kr.y,Hr.y)}u.emplaceBack(d.x,d.y,Zn,vn,Ln,xn,g,A,P)}this.boxEndIndex=u.length},Ft=function(u,d){if(u===void 0&&(u=[]),d===void 0&&(d=rn),this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(var g=(this.length>>1)-1;g>=0;g--)this._down(g)};function rn(u,d){return u<d?-1:u>d?1:0}function Rn(u,d,g){d===void 0&&(d=1),g===void 0&&(g=!1);for(var A=1/0,P=1/0,F=-1/0,j=-1/0,te=u[0],_e=0;_e<te.length;_e++){var Ne=te[_e];(!_e||Ne.x<A)&&(A=Ne.x),(!_e||Ne.y<P)&&(P=Ne.y),(!_e||Ne.x>F)&&(F=Ne.x),(!_e||Ne.y>j)&&(j=Ne.y)}var Xe=Math.min(F-A,j-P),it=Xe/2,Tt=new Ft([],Tr);if(Xe===0)return new ce(A,P);for(var Bt=A;Bt<F;Bt+=Xe)for(var vn=P;vn<j;vn+=Xe)Tt.push(new _r(Bt+it,vn+it,it,u));for(var xn=function(fr){for(var xr=0,Pr=0,kr=0,Hr=fr[0],Ni=0,Xi=Hr.length,Uo=Xi-1;Ni<Xi;Uo=Ni++){var oo=Hr[Ni],Yo=Hr[Uo],fo=oo.x*Yo.y-Yo.x*oo.y;Pr+=(oo.x+Yo.x)*fo,kr+=(oo.y+Yo.y)*fo,xr+=3*fo}return new _r(Pr/xr,kr/xr,0,fr)}(u),Zn=Tt.length;Tt.length;){var Ln=Tt.pop();(Ln.d>xn.d||!xn.d)&&(xn=Ln,g&&console.log("found best %d after %d probes",Math.round(1e4*Ln.d)/1e4,Zn)),Ln.max-xn.d<=d||(Tt.push(new _r(Ln.p.x-(it=Ln.h/2),Ln.p.y-it,it,u)),Tt.push(new _r(Ln.p.x+it,Ln.p.y-it,it,u)),Tt.push(new _r(Ln.p.x-it,Ln.p.y+it,it,u)),Tt.push(new _r(Ln.p.x+it,Ln.p.y+it,it,u)),Zn+=4)}return g&&(console.log("num probes: "+Zn),console.log("best distance: "+xn.d)),xn.p}function Tr(u,d){return d.max-u.max}function _r(u,d,g,A){this.p=new ce(u,d),this.h=g,this.d=function(P,F){for(var j=!1,te=1/0,_e=0;_e<F.length;_e++)for(var Ne=F[_e],Xe=0,it=Ne.length,Tt=it-1;Xe<it;Tt=Xe++){var Bt=Ne[Xe],vn=Ne[Tt];Bt.y>P.y!=vn.y>P.y&&P.x<(vn.x-Bt.x)*(P.y-Bt.y)/(vn.y-Bt.y)+Bt.x&&(j=!j),te=Math.min(te,Mi(P,Bt,vn))}return(j?1:-1)*Math.sqrt(te)}(this.p,A),this.max=this.d+this.h*Math.SQRT2}Ft.prototype.push=function(u){this.data.push(u),this.length++,this._up(this.length-1)},Ft.prototype.pop=function(){if(this.length!==0){var u=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),u}},Ft.prototype.peek=function(){return this.data[0]},Ft.prototype._up=function(u){for(var d=this.data,g=this.compare,A=d[u];u>0;){var P=u-1>>1,F=d[P];if(g(A,F)>=0)break;d[u]=F,u=P}d[u]=A},Ft.prototype._down=function(u){for(var d=this.data,g=this.compare,A=this.length>>1,P=d[u];u<A;){var F=1+(u<<1),j=d[F],te=F+1;if(te<this.length&&g(d[te],j)<0&&(F=te,j=d[te]),g(j,P)>=0)break;d[u]=j,u=F}d[u]=P};var jn=Number.POSITIVE_INFINITY;function Jn(u,d){return d[1]!==jn?function(g,A,P){var F=0,j=0;switch(A=Math.abs(A),P=Math.abs(P),g){case"top-right":case"top-left":case"top":j=P-7;break;case"bottom-right":case"bottom-left":case"bottom":j=7-P}switch(g){case"top-right":case"bottom-right":case"right":F=-A;break;case"top-left":case"bottom-left":case"left":F=A}return[F,j]}(u,d[0],d[1]):function(g,A){var P=0,F=0;A<0&&(A=0);var j=A/Math.sqrt(2);switch(g){case"top-right":case"top-left":F=j-7;break;case"bottom-right":case"bottom-left":F=7-j;break;case"bottom":F=7-A;break;case"top":F=A-7}switch(g){case"top-right":case"bottom-right":P=-j;break;case"top-left":case"bottom-left":P=j;break;case"left":P=A;break;case"right":P=-A}return[P,F]}(u,d[0])}function Vn(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function on(u,d,g,A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn){var xn=function(Pr,kr,Hr,Ni,Xi,Uo,oo,Yo){for(var fo=Ni.layout.get("text-rotate").evaluate(Uo,{})*Math.PI/180,Ha=[],ua=0,Co=kr.positionedLines;ua<Co.length;ua+=1)for(var Wa=Co[ua],Ra=0,ls=Wa.positionedGlyphs;Ra<ls.length;Ra+=1){var qo=ls[Ra];if(qo.rect){var vs=qo.rect||{},Sl=4,Xl=!0,wl=1,Tl=0,eu=(Xi||Yo)&&qo.vertical,Pu=qo.metrics.advance*qo.scale/2;if(Yo&&kr.verticalizable&&(Tl=Wa.lineOffset/2-(qo.imageName?-(24-qo.metrics.width*qo.scale)/2:24*(qo.scale-1))),qo.imageName){var qu=oo[qo.imageName];Xl=qu.sdf,Sl=1/(wl=qu.pixelRatio)}var Kc=Xi?[qo.x+Pu,qo.y]:[0,0],ac=Xi?[0,0]:[qo.x+Pu+Hr[0],qo.y+Hr[1]-Tl],Qc=[0,0];eu&&(Qc=ac,ac=[0,0]);var hu=(qo.metrics.left-Sl)*qo.scale-Pu+ac[0],Iu=(-qo.metrics.top-Sl)*qo.scale+ac[1],za=hu+vs.w*qo.scale/wl,Ks=Iu+vs.h*qo.scale/wl,pa=new ce(hu,Iu),hs=new ce(za,Iu),yf=new ce(hu,Ks),Zs=new ce(za,Ks);if(eu){var Qs=new ce(-Pu,Pu- -17),du=-Math.PI/2,Ec=12-Pu,ws=new ce(22-Ec,-(qo.imageName?Ec:0)),Gd=new(Function.prototype.bind.apply(ce,[null].concat(Qc)));pa._rotateAround(du,Qs)._add(ws)._add(Gd),hs._rotateAround(du,Qs)._add(ws)._add(Gd),yf._rotateAround(du,Qs)._add(ws)._add(Gd),Zs._rotateAround(du,Qs)._add(ws)._add(Gd)}if(fo){var lh=Math.sin(fo),dp=Math.cos(fo),pu=[dp,-lh,lh,dp];pa._matMult(pu),hs._matMult(pu),yf._matMult(pu),Zs._matMult(pu)}var pp=new ce(0,0),ad=new ce(0,0);Ha.push({tl:pa,tr:hs,bl:yf,br:Zs,tex:vs,writingMode:kr.writingMode,glyphOffset:Kc,sectionIndex:qo.sectionIndex,isSDF:Xl,pixelOffsetTL:pp,pixelOffsetBR:ad,minFontScaleX:0,minFontScaleY:0})}}return Ha}(0,g,te,P,F,j,A,u.allowVerticalPlacement),Zn=u.textSizeData,Ln=null;Zn.kind==="source"?(Ln=[128*P.layout.get("text-size").evaluate(j,{})])[0]>32640&&Ze(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Zn.kind==="composite"&&((Ln=[128*Bt.compositeTextSizes[0].evaluate(j,{},vn),128*Bt.compositeTextSizes[1].evaluate(j,{},vn)])[0]>32640||Ln[1]>32640)&&Ze(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),u.addSymbols(u.text,xn,Ln,te,F,j,Ne,d,_e.lineStartIndex,_e.lineLength,Tt,vn);for(var fr=0,xr=Xe;fr<xr.length;fr+=1)it[xr[fr]]=u.text.placedSymbolArray.length-1;return 4*xn.length}function Gn(u){for(var d in u)return u[d];return null}function $t(u,d,g,A){var P=u.compareText;if(d in P){for(var F=P[d],j=F.length-1;j>=0;j--)if(A.dist(F[j])<g)return!0}else P[d]=[];return P[d].push(A),!1}var er=Lh.VectorTileFeature.types,Nr=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Dr(u,d,g,A,P,F,j,te,_e,Ne,Xe,it,Tt){var Bt=te?Math.min(32640,Math.round(te[0])):0,vn=te?Math.min(32640,Math.round(te[1])):0;u.emplaceBack(d,g,Math.round(32*A),Math.round(32*P),F,j,(Bt<<1)+(_e?1:0),vn,16*Ne,16*Xe,256*it,256*Tt)}function gi(u,d,g){u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g)}function oi(u){for(var d=0,g=u.sections;d<g.length;d+=1)if(Jp(g[d].text))return!0;return!1}var Ti=function(u){this.layoutVertexArray=new t0,this.indexArray=new vf,this.programConfigurations=u,this.segments=new Vt,this.dynamicLayoutVertexArray=new Hf,this.opacityVertexArray=new lp,this.placedSymbolArray=new O};Ti.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ti.prototype.upload=function(u,d,g,A){this.isEmpty()||(g&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,bc.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,Mm.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,Nr,!0),this.opacityVertexBuffer.itemSize=1),(g||A)&&this.programConfigurations.upload(u))},Ti.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ji("SymbolBuffers",Ti);var Fo=function(u,d,g){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new g,this.segments=new Vt,this.collisionVertexArray=new r0};Fo.prototype.upload=function(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,$0.members,!0)},Fo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ji("CollisionBuffers",Fo);var wo=function(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Gu([]),this.placementViewportMatrix=Gu([]);var d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Yu(this.zoom,d["text-size"]),this.iconSizeData=Yu(this.zoom,d["icon-size"]);var g=this.layers[0].layout,A=g.get("symbol-sort-key"),P=g.get("symbol-z-order");this.canOverlap=g.get("text-allow-overlap")||g.get("icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&A.constantOr(1)!==void 0,this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(function(F){return zo[F]})),this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id}),this.sourceID=u.sourceID};wo.prototype.createArrays=function(){this.text=new Ti(new ta(this.layers,this.zoom,function(u){return/^text/.test(u)})),this.icon=new Ti(new ta(this.layers,this.zoom,function(u){return/^icon/.test(u)})),this.glyphOffsetArray=new K,this.lineVertexArray=new ge,this.symbolInstances=new Z},wo.prototype.calculateGlyphDependencies=function(u,d,g,A,P){for(var F=0;F<u.length;F++)if(d[u.charCodeAt(F)]=!0,(g||A)&&P){var j=On[u.charAt(F)];j&&(d[j.charCodeAt(0)]=!0)}},wo.prototype.populate=function(u,d,g){var A=this.layers[0],P=A.layout,F=P.get("text-font"),j=P.get("text-field"),te=P.get("icon-image"),_e=(j.value.kind!=="constant"||j.value.value instanceof hr&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),Ne=te.value.kind!=="constant"||!!te.value.value||Object.keys(te.parameters).length>0,Xe=P.get("symbol-sort-key");if(this.features=[],_e||Ne){for(var it=d.iconDependencies,Tt=d.glyphDependencies,Bt=d.availableImages,vn=new Sa(this.zoom),xn=0,Zn=u;xn<Zn.length;xn+=1){var Ln=Zn[xn],fr=Ln.feature,xr=Ln.id,Pr=Ln.index,kr=Ln.sourceLayerIndex,Hr=A._featureFilter.needGeometry,Ni=Il(fr,Hr);if(A._featureFilter.filter(vn,Ni,g)){Hr||(Ni.geometry=ll(fr));var Xi=void 0;if(_e){var Uo=A.getValueAndResolveTokens("text-field",Ni,g,Bt),oo=hr.factory(Uo);oi(oo)&&(this.hasRTLText=!0),(!this.hasRTLText||e0()==="unavailable"||this.hasRTLText&&pf.isParsed())&&(Xi=Yt(oo,A,Ni))}var Yo=void 0;if(Ne){var fo=A.getValueAndResolveTokens("icon-image",Ni,g,Bt);Yo=fo instanceof ni?fo:ni.fromString(fo)}if(Xi||Yo){var Ha=this.sortFeaturesByKey?Xe.evaluate(Ni,{},g):void 0;if(this.features.push({id:xr,text:Xi,icon:Yo,index:Pr,sourceLayerIndex:kr,geometry:Ni.geometry,properties:fr.properties,type:er[fr.type],sortKey:Ha}),Yo&&(it[Yo.name]=!0),Xi){var ua=F.evaluate(Ni,{},g).join(","),Co=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(zo.vertical)>=0;for(var Wa=0,Ra=Xi.sections;Wa<Ra.length;Wa+=1){var ls=Ra[Wa];if(ls.image)it[ls.image.name]=!0;else{var qo=Cf(Xi.toString()),vs=ls.fontStack||ua,Sl=Tt[vs]=Tt[vs]||{};this.calculateGlyphDependencies(ls.text,Sl,Co,this.allowVerticalPlacement,qo)}}}}}}P.get("symbol-placement")==="line"&&(this.features=function(Xl){var wl={},Tl={},eu=[],Pu=0;function qu(Qs){eu.push(Xl[Qs]),Pu++}function Kc(Qs,du,Ec){var ws=Tl[Qs];return delete Tl[Qs],Tl[du]=ws,eu[ws].geometry[0].pop(),eu[ws].geometry[0]=eu[ws].geometry[0].concat(Ec[0]),ws}function ac(Qs,du,Ec){var ws=wl[du];return delete wl[du],wl[Qs]=ws,eu[ws].geometry[0].shift(),eu[ws].geometry[0]=Ec[0].concat(eu[ws].geometry[0]),ws}function Qc(Qs,du,Ec){var ws=Ec?du[0][du[0].length-1]:du[0][0];return Qs+":"+ws.x+":"+ws.y}for(var hu=0;hu<Xl.length;hu++){var Iu=Xl[hu],za=Iu.geometry,Ks=Iu.text?Iu.text.toString():null;if(Ks){var pa=Qc(Ks,za),hs=Qc(Ks,za,!0);if(pa in Tl&&hs in wl&&Tl[pa]!==wl[hs]){var yf=ac(pa,hs,za),Zs=Kc(pa,hs,eu[yf].geometry);delete wl[pa],delete Tl[hs],Tl[Qc(Ks,eu[Zs].geometry,!0)]=Zs,eu[yf].geometry=null}else pa in Tl?Kc(pa,hs,za):hs in wl?ac(pa,hs,za):(qu(hu),wl[pa]=Pu-1,Tl[hs]=Pu-1)}else qu(hu)}return eu.filter(function(Qs){return Qs.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Xl,wl){return Xl.sortKey-wl.sortKey})}},wo.prototype.update=function(u,d,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,g),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,g))},wo.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},wo.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},wo.prototype.upload=function(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},wo.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},wo.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},wo.prototype.addToLineVertexArray=function(u,d){var g=this.lineVertexArray.length;if(u.segment!==void 0){for(var A=u.dist(d[u.segment+1]),P=u.dist(d[u.segment]),F={},j=u.segment+1;j<d.length;j++)F[j]={x:d[j].x,y:d[j].y,tileUnitDistanceFromAnchor:A},j<d.length-1&&(A+=d[j+1].dist(d[j]));for(var te=u.segment||0;te>=0;te--)F[te]={x:d[te].x,y:d[te].y,tileUnitDistanceFromAnchor:P},te>0&&(P+=d[te-1].dist(d[te]));for(var _e=0;_e<d.length;_e++){var Ne=F[_e];this.lineVertexArray.emplaceBack(Ne.x,Ne.y,Ne.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}},wo.prototype.addSymbols=function(u,d,g,A,P,F,j,te,_e,Ne,Xe,it){for(var Tt=u.indexArray,Bt=u.layoutVertexArray,vn=u.segments.prepareSegment(4*d.length,Bt,Tt,this.canOverlap?F.sortKey:void 0),xn=this.glyphOffsetArray.length,Zn=vn.vertexLength,Ln=this.allowVerticalPlacement&&j===zo.vertical?Math.PI/2:0,fr=F.text&&F.text.sections,xr=0;xr<d.length;xr++){var Pr=d[xr],kr=Pr.tl,Hr=Pr.tr,Ni=Pr.bl,Xi=Pr.br,Uo=Pr.tex,oo=Pr.pixelOffsetTL,Yo=Pr.pixelOffsetBR,fo=Pr.minFontScaleX,Ha=Pr.minFontScaleY,ua=Pr.glyphOffset,Co=Pr.isSDF,Wa=Pr.sectionIndex,Ra=vn.vertexLength,ls=ua[1];Dr(Bt,te.x,te.y,kr.x,ls+kr.y,Uo.x,Uo.y,g,Co,oo.x,oo.y,fo,Ha),Dr(Bt,te.x,te.y,Hr.x,ls+Hr.y,Uo.x+Uo.w,Uo.y,g,Co,Yo.x,oo.y,fo,Ha),Dr(Bt,te.x,te.y,Ni.x,ls+Ni.y,Uo.x,Uo.y+Uo.h,g,Co,oo.x,Yo.y,fo,Ha),Dr(Bt,te.x,te.y,Xi.x,ls+Xi.y,Uo.x+Uo.w,Uo.y+Uo.h,g,Co,Yo.x,Yo.y,fo,Ha),gi(u.dynamicLayoutVertexArray,te,Ln),Tt.emplaceBack(Ra,Ra+1,Ra+2),Tt.emplaceBack(Ra+1,Ra+2,Ra+3),vn.vertexLength+=4,vn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ua[0]),xr!==d.length-1&&Wa===d[xr+1].sectionIndex||u.programConfigurations.populatePaintArrays(Bt.length,F,F.index,{},it,fr&&fr[Wa])}u.placedSymbolArray.emplaceBack(te.x,te.y,xn,this.glyphOffsetArray.length-xn,Zn,_e,Ne,te.segment,g?g[0]:0,g?g[1]:0,A[0],A[1],j,0,!1,0,Xe)},wo.prototype._addCollisionDebugVertex=function(u,d,g,A,P,F){return d.emplaceBack(0,0),u.emplaceBack(g.x,g.y,A,P,Math.round(F.x),Math.round(F.y))},wo.prototype.addCollisionDebugVertices=function(u,d,g,A,P,F,j){var te=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),_e=te.vertexLength,Ne=P.layoutVertexArray,Xe=P.collisionVertexArray,it=j.anchorX,Tt=j.anchorY;this._addCollisionDebugVertex(Ne,Xe,F,it,Tt,new ce(u,d)),this._addCollisionDebugVertex(Ne,Xe,F,it,Tt,new ce(g,d)),this._addCollisionDebugVertex(Ne,Xe,F,it,Tt,new ce(g,A)),this._addCollisionDebugVertex(Ne,Xe,F,it,Tt,new ce(u,A)),te.vertexLength+=4;var Bt=P.indexArray;Bt.emplaceBack(_e,_e+1),Bt.emplaceBack(_e+1,_e+2),Bt.emplaceBack(_e+2,_e+3),Bt.emplaceBack(_e+3,_e),te.primitiveLength+=4},wo.prototype.addDebugCollisionBoxes=function(u,d,g,A){for(var P=u;P<d;P++){var F=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,A?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,g)}},wo.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fo(ed,Mg.members,Gf),this.iconCollisionBox=new Fo(ed,Mg.members,Gf);for(var u=0;u<this.symbolInstances.length;u++){var d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}},wo.prototype._deserializeCollisionBoxesForSymbol=function(u,d,g,A,P,F,j,te,_e){for(var Ne={},Xe=d;Xe<g;Xe++){var it=u.get(Xe);Ne.textBox={x1:it.x1,y1:it.y1,x2:it.x2,y2:it.y2,anchorPointX:it.anchorPointX,anchorPointY:it.anchorPointY},Ne.textFeatureIndex=it.featureIndex;break}for(var Tt=A;Tt<P;Tt++){var Bt=u.get(Tt);Ne.verticalTextBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},Ne.verticalTextFeatureIndex=Bt.featureIndex;break}for(var vn=F;vn<j;vn++){var xn=u.get(vn);Ne.iconBox={x1:xn.x1,y1:xn.y1,x2:xn.x2,y2:xn.y2,anchorPointX:xn.anchorPointX,anchorPointY:xn.anchorPointY},Ne.iconFeatureIndex=xn.featureIndex;break}for(var Zn=te;Zn<_e;Zn++){var Ln=u.get(Zn);Ne.verticalIconBox={x1:Ln.x1,y1:Ln.y1,x2:Ln.x2,y2:Ln.y2,anchorPointX:Ln.anchorPointX,anchorPointY:Ln.anchorPointY},Ne.verticalIconFeatureIndex=Ln.featureIndex;break}return Ne},wo.prototype.deserializeCollisionBoxes=function(u){this.collisionArrays=[];for(var d=0;d<this.symbolInstances.length;d++){var g=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}},wo.prototype.hasTextData=function(){return this.text.segments.get().length>0},wo.prototype.hasIconData=function(){return this.icon.segments.get().length>0},wo.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},wo.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},wo.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},wo.prototype.addIndicesForPlacedSymbol=function(u,d){for(var g=u.placedSymbolArray.get(d),A=g.vertexStartIndex+4*g.numGlyphs,P=g.vertexStartIndex;P<A;P+=4)u.indexArray.emplaceBack(P,P+1,P+2),u.indexArray.emplaceBack(P+1,P+2,P+3)},wo.prototype.getSortedSymbolIndexes=function(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var d=Math.sin(u),g=Math.cos(u),A=[],P=[],F=[],j=0;j<this.symbolInstances.length;++j){F.push(j);var te=this.symbolInstances.get(j);A.push(0|Math.round(d*te.anchorX+g*te.anchorY)),P.push(te.featureIndex)}return F.sort(function(_e,Ne){return A[_e]-A[Ne]||P[Ne]-P[_e]}),F},wo.prototype.addToSortKeyRanges=function(u,d){var g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===d?g.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})},wo.prototype.sortFeatures=function(u){var d=this;if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var g=0,A=this.symbolInstanceIndexes;g<A.length;g+=1){var P=this.symbolInstances.get(A[g]);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach(function(F,j,te){F>=0&&te.indexOf(F)===j&&d.addIndicesForPlacedSymbol(d.text,F)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ji("SymbolBucket",wo,{omit:["layers","collisionBoxArray","features","compareText"]}),wo.MAX_GLYPHS=65535,wo.addDynamicAttributes=gi;var Ro=new ml({"symbol-placement":new ko(Et.layout_symbol["symbol-placement"]),"symbol-spacing":new ko(Et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ko(Et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ao(Et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ko(Et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ko(Et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ko(Et.layout_symbol["icon-ignore-placement"]),"icon-optional":new ko(Et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ko(Et.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ao(Et.layout_symbol["icon-size"]),"icon-text-fit":new ko(Et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ko(Et.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ao(Et.layout_symbol["icon-image"]),"icon-rotate":new Ao(Et.layout_symbol["icon-rotate"]),"icon-padding":new ko(Et.layout_symbol["icon-padding"]),"icon-keep-upright":new ko(Et.layout_symbol["icon-keep-upright"]),"icon-offset":new Ao(Et.layout_symbol["icon-offset"]),"icon-anchor":new Ao(Et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ko(Et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ko(Et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ko(Et.layout_symbol["text-rotation-alignment"]),"text-field":new Ao(Et.layout_symbol["text-field"]),"text-font":new Ao(Et.layout_symbol["text-font"]),"text-size":new Ao(Et.layout_symbol["text-size"]),"text-max-width":new Ao(Et.layout_symbol["text-max-width"]),"text-line-height":new ko(Et.layout_symbol["text-line-height"]),"text-letter-spacing":new Ao(Et.layout_symbol["text-letter-spacing"]),"text-justify":new Ao(Et.layout_symbol["text-justify"]),"text-radial-offset":new Ao(Et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ko(Et.layout_symbol["text-variable-anchor"]),"text-anchor":new Ao(Et.layout_symbol["text-anchor"]),"text-max-angle":new ko(Et.layout_symbol["text-max-angle"]),"text-writing-mode":new ko(Et.layout_symbol["text-writing-mode"]),"text-rotate":new Ao(Et.layout_symbol["text-rotate"]),"text-padding":new ko(Et.layout_symbol["text-padding"]),"text-keep-upright":new ko(Et.layout_symbol["text-keep-upright"]),"text-transform":new Ao(Et.layout_symbol["text-transform"]),"text-offset":new Ao(Et.layout_symbol["text-offset"]),"text-allow-overlap":new ko(Et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ko(Et.layout_symbol["text-ignore-placement"]),"text-optional":new ko(Et.layout_symbol["text-optional"])}),sa={paint:new ml({"icon-opacity":new Ao(Et.paint_symbol["icon-opacity"]),"icon-color":new Ao(Et.paint_symbol["icon-color"]),"icon-halo-color":new Ao(Et.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ao(Et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ao(Et.paint_symbol["icon-halo-blur"]),"icon-translate":new ko(Et.paint_symbol["icon-translate"]),"icon-translate-anchor":new ko(Et.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ao(Et.paint_symbol["text-opacity"]),"text-color":new Ao(Et.paint_symbol["text-color"],{runtimeType:_i,getOverride:function(u){return u.textColor},hasOverride:function(u){return!!u.textColor}}),"text-halo-color":new Ao(Et.paint_symbol["text-halo-color"]),"text-halo-width":new Ao(Et.paint_symbol["text-halo-width"]),"text-halo-blur":new Ao(Et.paint_symbol["text-halo-blur"]),"text-translate":new ko(Et.paint_symbol["text-translate"]),"text-translate-anchor":new ko(Et.paint_symbol["text-translate-anchor"])}),layout:Ro},ha=function(u){this.type=u.property.overrides?u.property.overrides.runtimeType:yi,this.defaultValue=u};ha.prototype.evaluate=function(u){if(u.formattedSection){var d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default},ha.prototype.eachChild=function(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)},ha.prototype.outputDefined=function(){return!1},ha.prototype.serialize=function(){return null},Ji("FormatSectionOverride",ha,{omit:["defaultValue"]});var Ds=function(u){function d(g){u.call(this,g,sa)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.recalculate=function(g,A){if(u.prototype.recalculate.call(this,g,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var P=this.layout.get("text-writing-mode");if(P){for(var F=[],j=0,te=P;j<te.length;j+=1){var _e=te[j];F.indexOf(_e)<0&&F.push(_e)}this.layout._values["text-writing-mode"]=F}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},d.prototype.getValueAndResolveTokens=function(g,A,P,F){var j=this.layout.get(g).evaluate(A,{},P,F),te=this._unevaluatedLayout._values[g];return te.isDataDriven()||Ba(te.value)||!j?j:function(_e,Ne){return Ne.replace(/{([^{}]+)}/g,function(Xe,it){return it in _e?String(_e[it]):""})}(A.properties,j)},d.prototype.createBucket=function(g){return new wo(g)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype._setPaintOverrides=function(){for(var g=0,A=sa.paint.overridableProperties;g<A.length;g+=1){var P=A[g];if(d.hasPaintOverride(this.layout,P)){var F,j=this.paint.get(P),te=new ha(j),_e=new _a(te,j.property.specification);F=j.value.kind==="constant"||j.value.kind==="source"?new Xa("source",_e):new ba("composite",_e,j.value.zoomStops,j.value._interpolationType),this.paint._values[P]=new rc(j.property,F,j.parameters)}}},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!(!this.layout||A.isDataDriven()||P.isDataDriven())&&d.hasPaintOverride(this.layout,g)},d.hasPaintOverride=function(g,A){var P=g.get("text-field"),F=sa.paint.properties[A],j=!1,te=function(Xe){for(var it=0,Tt=Xe;it<Tt.length;it+=1)if(F.overrides&&F.overrides.hasOverride(Tt[it]))return void(j=!0)};if(P.value.kind==="constant"&&P.value.value instanceof hr)te(P.value.value.sections);else if(P.value.kind==="source"){var _e=function(Xe){j||(Xe instanceof zi&&ri(Xe.value)===ho?te(Xe.value.sections):Xe instanceof So?te(Xe.sections):Xe.eachChild(_e))},Ne=P.value;Ne._styleExpression&&_e(Ne._styleExpression.expression)}return j},d}(Zc),Wl={paint:new ml({"background-color":new ko(Et.paint_background["background-color"]),"background-pattern":new ju(Et.paint_background["background-pattern"]),"background-opacity":new ko(Et.paint_background["background-opacity"])})},sh=function(u){function d(g){u.call(this,g,Wl)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Zc),Rg={paint:new ml({"raster-opacity":new ko(Et.paint_raster["raster-opacity"]),"raster-hue-rotate":new ko(Et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ko(Et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ko(Et.paint_raster["raster-brightness-max"]),"raster-saturation":new ko(Et.paint_raster["raster-saturation"]),"raster-contrast":new ko(Et.paint_raster["raster-contrast"]),"raster-resampling":new ko(Et.paint_raster["raster-resampling"]),"raster-fade-duration":new ko(Et.paint_raster["raster-fade-duration"])})},qc=function(u){function d(g){u.call(this,g,Rg)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Zc),jy=function(u){function d(g){u.call(this,g,{}),this.implementation=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},d.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},d.prototype.recalculate=function(){},d.prototype.updateTransitions=function(){},d.prototype.hasTransition=function(){},d.prototype.serialize=function(){},d.prototype.onAdd=function(g){this.implementation.onAdd&&this.implementation.onAdd(g,g.painter.context.gl)},d.prototype.onRemove=function(g){this.implementation.onRemove&&this.implementation.onRemove(g,g.painter.context.gl)},d}(Zc),jp={circle:Sv,heatmap:Fp,hillshade:Fy,fill:G0,"fill-extrusion":Y0,line:Og,symbol:Ds,background:sh,raster:qc},d0=ae.HTMLImageElement,Rm=ae.HTMLCanvasElement,jE=ae.HTMLVideoElement,f1=ae.ImageData,Pm=ae.ImageBitmap,Cv=function(u,d,g,A){this.context=u,this.format=g,this.texture=u.gl.createTexture(),this.update(d,A)};Cv.prototype.update=function(u,d,g){var A=u.width,P=u.height,F=!(this.size&&this.size[0]===A&&this.size[1]===P||g),j=this.context,te=j.gl;if(this.useMipmap=!!(d&&d.useMipmap),te.bindTexture(te.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===te.RGBA&&(!d||d.premultiply!==!1)),F)this.size=[A,P],u instanceof d0||u instanceof Rm||u instanceof jE||u instanceof f1||Pm&&u instanceof Pm?te.texImage2D(te.TEXTURE_2D,0,this.format,this.format,te.UNSIGNED_BYTE,u):te.texImage2D(te.TEXTURE_2D,0,this.format,A,P,0,this.format,te.UNSIGNED_BYTE,u.data);else{var _e=g||{x:0,y:0},Ne=_e.x,Xe=_e.y;u instanceof d0||u instanceof Rm||u instanceof jE||u instanceof f1||Pm&&u instanceof Pm?te.texSubImage2D(te.TEXTURE_2D,0,Ne,Xe,te.RGBA,te.UNSIGNED_BYTE,u):te.texSubImage2D(te.TEXTURE_2D,0,Ne,Xe,A,P,te.RGBA,te.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&te.generateMipmap(te.TEXTURE_2D)},Cv.prototype.bind=function(u,d,g){var A=this.context.gl;A.bindTexture(A.TEXTURE_2D,this.texture),g!==A.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=A.LINEAR),u!==this.filter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,u),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,g||u),this.filter=u),d!==this.wrap&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,d),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,d),this.wrap=d)},Cv.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Cv.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ov=function(u){var d=this;this._callback=u,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){d._triggered=!1,d._callback()})};Ov.prototype.trigger=function(){var u=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){u._triggered=!1,u._callback()},0))},Ov.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Im=function(u,d,g){this.target=u,this.parent=d,this.mapId=g,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},wt(["receive","process"],this),this.invoker=new Ov(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=De()?u:ae};function VE(u,d,g){var A=2*Math.PI*6378137/256/Math.pow(2,g);return[u*A-2*Math.PI*6378137/2,d*A-2*Math.PI*6378137/2]}Im.prototype.send=function(u,d,g,A,P){var F=this;P===void 0&&(P=!1);var j=Math.round(1e18*Math.random()).toString(36).substring(0,10);g&&(this.callbacks[j]=g);var te=nt(this.globalScope)?void 0:[];return this.target.postMessage({id:j,type:u,hasCallback:!!g,targetMapId:A,mustQueue:P,sourceMapId:this.mapId,data:Ka(d,te)},te),{cancel:function(){g&&delete F.callbacks[j],F.target.postMessage({id:j,type:"<cancel>",targetMapId:A,sourceMapId:F.mapId})}}},Im.prototype.receive=function(u){var d=u.data,g=d.id;if(g&&(!d.targetMapId||this.mapId===d.targetMapId))if(d.type==="<cancel>"){delete this.tasks[g];var A=this.cancelCallbacks[g];delete this.cancelCallbacks[g],A&&A()}else De()||d.mustQueue?(this.tasks[g]=d,this.taskQueue.push(g),this.invoker.trigger()):this.processTask(g,d)},Im.prototype.process=function(){if(this.taskQueue.length){var u=this.taskQueue.shift(),d=this.tasks[u];delete this.tasks[u],this.taskQueue.length&&this.invoker.trigger(),d&&this.processTask(u,d)}},Im.prototype.processTask=function(u,d){var g=this;if(d.type==="<response>"){var A=this.callbacks[u];delete this.callbacks[u],A&&(d.error?A(Cs(d.error)):A(null,Cs(d.data)))}else{var P=!1,F=nt(this.globalScope)?void 0:[],j=d.hasCallback?function(Xe,it){P=!0,delete g.cancelCallbacks[u],g.target.postMessage({id:u,type:"<response>",sourceMapId:g.mapId,error:Xe?Ka(Xe):null,data:Ka(it,F)},F)}:function(Xe){P=!0},te=null,_e=Cs(d.data);if(this.parent[d.type])te=this.parent[d.type](d.sourceMapId,_e,j);else if(this.parent.getWorkerSource){var Ne=d.type.split(".");te=this.parent.getWorkerSource(d.sourceMapId,Ne[0],_e.source)[Ne[1]](_e,j)}else j(new Error("Could not find function "+d.type));!P&&te&&te.cancel&&(this.cancelCallbacks[u]=te.cancel)}},Im.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Dl=function(u,d){u&&(d?this.setSouthWest(u).setNorthEast(d):u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))};Dl.prototype.setNorthEast=function(u){return this._ne=u instanceof El?new El(u.lng,u.lat):El.convert(u),this},Dl.prototype.setSouthWest=function(u){return this._sw=u instanceof El?new El(u.lng,u.lat):El.convert(u),this},Dl.prototype.extend=function(u){var d,g,A=this._sw,P=this._ne;if(u instanceof El)d=u,g=u;else{if(!(u instanceof Dl))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(Dl.convert(u)):this.extend(El.convert(u)):this;if(g=u._ne,!(d=u._sw)||!g)return this}return A||P?(A.lng=Math.min(d.lng,A.lng),A.lat=Math.min(d.lat,A.lat),P.lng=Math.max(g.lng,P.lng),P.lat=Math.max(g.lat,P.lat)):(this._sw=new El(d.lng,d.lat),this._ne=new El(g.lng,g.lat)),this},Dl.prototype.getCenter=function(){return new El((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Dl.prototype.getSouthWest=function(){return this._sw},Dl.prototype.getNorthEast=function(){return this._ne},Dl.prototype.getNorthWest=function(){return new El(this.getWest(),this.getNorth())},Dl.prototype.getSouthEast=function(){return new El(this.getEast(),this.getSouth())},Dl.prototype.getWest=function(){return this._sw.lng},Dl.prototype.getSouth=function(){return this._sw.lat},Dl.prototype.getEast=function(){return this._ne.lng},Dl.prototype.getNorth=function(){return this._ne.lat},Dl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Dl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Dl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Dl.prototype.contains=function(u){var d=El.convert(u),g=d.lng,A=d.lat,P=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=A&&A<=this._ne.lat&&P},Dl.convert=function(u){return!u||u instanceof Dl?u:new Dl(u)};var El=function(u,d){if(isNaN(u)||isNaN(d))throw new Error("Invalid LngLat object: ("+u+", "+d+")");if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};El.prototype.wrap=function(){return new El(Q(this.lng,-180,180),this.lat)},El.prototype.toArray=function(){return[this.lng,this.lat]},El.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},El.prototype.distanceTo=function(u){var d=Math.PI/180,g=this.lat*d,A=u.lat*d,P=Math.sin(g)*Math.sin(A)+Math.cos(g)*Math.cos(A)*Math.cos((u.lng-this.lng)*d);return 63710088e-1*Math.acos(Math.min(P,1))},El.prototype.toBounds=function(u){u===void 0&&(u=0);var d=360*u/40075017,g=d/Math.cos(Math.PI/180*this.lat);return new Dl(new El(this.lng-g,this.lat-d),new El(this.lng+g,this.lat+d))},El.convert=function(u){if(u instanceof El)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new El(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new El(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Pg=2*Math.PI*63710088e-1;function Lm(u){return Pg*Math.cos(u*Math.PI/180)}function ix(u){return(180+u)/360}function Mv(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function ox(u,d){return u/Lm(d)}function h1(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}var Dm=function(u,d,g){g===void 0&&(g=0),this.x=+u,this.y=+d,this.z=+g};Dm.fromLngLat=function(u,d){d===void 0&&(d=0);var g=El.convert(u);return new Dm(ix(g.lng),Mv(g.lat),ox(d,g.lat))},Dm.prototype.toLngLat=function(){return new El(360*this.x-180,h1(this.y))},Dm.prototype.toAltitude=function(){return this.z*Lm(h1(this.y))},Dm.prototype.meterInMercatorCoordinateUnits=function(){return 1/Pg*(u=h1(this.y),1/Math.cos(u*Math.PI/180));var u};var hp=function(u,d,g){this.z=u,this.x=d,this.y=g,this.key=Lo(0,u,u,d,g)};hp.prototype.equals=function(u){return this.z===u.z&&this.x===u.x&&this.y===u.y},hp.prototype.url=function(u,d){var g,A,P,F,j,te=(A=this.y,P=this.z,F=VE(256*(g=this.x),256*(A=Math.pow(2,P)-A-1),P),j=VE(256*(g+1),256*(A+1),P),F[0]+","+F[1]+","+j[0]+","+j[1]),_e=function(Ne,Xe,it){for(var Tt,Bt="",vn=Ne;vn>0;vn--)Bt+=(Xe&(Tt=1<<vn-1)?1:0)+(it&Tt?2:0);return Bt}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_e).replace("{bbox-epsg-3857}",te)},hp.prototype.getTilePoint=function(u){var d=Math.pow(2,this.z);return new ce(8192*(u.x*d-this.x),8192*(u.y*d-this.y))},hp.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var $u=function(u,d){this.wrap=u,this.canonical=d,this.key=Lo(u,d.z,d.z,d.x,d.y)},js=function(u,d,g,A,P){this.overscaledZ=u,this.wrap=d,this.canonical=new hp(g,+A,+P),this.key=Lo(d,u,g,A,P)};function Lo(u,d,g,A,P){(u*=2)<0&&(u=-1*u-1);var F=1<<g;return(F*F*u+F*P+A).toString(36)+g.toString(36)+d.toString(36)}js.prototype.equals=function(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)},js.prototype.scaledTo=function(u){var d=this.canonical.z-u;return u>this.canonical.z?new js(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new js(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)},js.prototype.calculateScaledKey=function(u,d){var g=this.canonical.z-u;return u>this.canonical.z?Lo(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):Lo(this.wrap*+d,u,u,this.canonical.x>>g,this.canonical.y>>g)},js.prototype.isChildOf=function(u){if(u.wrap!==this.wrap)return!1;var d=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d},js.prototype.children=function(u){if(this.overscaledZ>=u)return[new js(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var d=this.canonical.z+1,g=2*this.canonical.x,A=2*this.canonical.y;return[new js(d,this.wrap,d,g,A),new js(d,this.wrap,d,g+1,A),new js(d,this.wrap,d,g,A+1),new js(d,this.wrap,d,g+1,A+1)]},js.prototype.isLessThan=function(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))},js.prototype.wrapped=function(){return new js(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},js.prototype.unwrapTo=function(u){return new js(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)},js.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},js.prototype.toUnwrapped=function(){return new $u(this.wrap,this.canonical)},js.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},js.prototype.getTilePoint=function(u){return this.canonical.getTilePoint(new Dm(u.x-this.wrap,u.y))},Ji("CanonicalTileID",hp),Ji("OverscaledTileID",js,{omit:["posMatrix"]});var Wd=function(u,d,g){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(g&&g!=="mapbox"&&g!=="terrarium")return Ze('"'+g+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=d.height;var A=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=g||"mapbox";for(var P=0;P<A;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(A,P)]=this.data[this._idx(A-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,A)]=this.data[this._idx(P,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)]};Wd.prototype.get=function(u,d){var g=new Uint8Array(this.data.buffer),A=4*this._idx(u,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(g[A],g[A+1],g[A+2])},Wd.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Wd.prototype._idx=function(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)},Wd.prototype._unpackMapbox=function(u,d,g){return(256*u*256+256*d+g)/10-1e4},Wd.prototype._unpackTerrarium=function(u,d,g){return 256*u+d+g/256-32768},Wd.prototype.getPixels=function(){return new Yc({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Wd.prototype.backfillBorder=function(u,d,g){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");var A=d*this.dim,P=d*this.dim+this.dim,F=g*this.dim,j=g*this.dim+this.dim;switch(d){case-1:A=P-1;break;case 1:P=A+1}switch(g){case-1:F=j-1;break;case 1:j=F+1}for(var te=-d*this.dim,_e=-g*this.dim,Ne=F;Ne<j;Ne++)for(var Xe=A;Xe<P;Xe++)this.data[this._idx(Xe,Ne)]=u.data[this._idx(Xe+te,Ne+_e)]},Ji("DEMData",Wd);var Gl=function(u){this._stringToNumber={},this._numberToString=[];for(var d=0;d<u.length;d++){var g=u[d];this._stringToNumber[g]=d,this._numberToString[d]=g}};Gl.prototype.encode=function(u){return this._stringToNumber[u]},Gl.prototype.decode=function(u){return this._numberToString[u]};var Zl=function(u,d,g,A,P){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=g,u._y=A,this.properties=u.properties,this.id=P},p0={geometry:{configurable:!0}};p0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},p0.geometry.set=function(u){this._geometry=u},Zl.prototype.toJSON=function(){var u={geometry:this.geometry};for(var d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u},Object.defineProperties(Zl.prototype,p0);var Rv=function(){this.state={},this.stateChanges={},this.deletedStates={}};Rv.prototype.updateState=function(u,d,g){var A=String(d);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][A]=this.stateChanges[u][A]||{},le(this.stateChanges[u][A],g),this.deletedStates[u]===null)for(var P in this.deletedStates[u]={},this.state[u])P!==A&&(this.deletedStates[u][P]=null);else if(this.deletedStates[u]&&this.deletedStates[u][A]===null)for(var F in this.deletedStates[u][A]={},this.state[u][A])g[F]||(this.deletedStates[u][A][F]=null);else for(var j in g)this.deletedStates[u]&&this.deletedStates[u][A]&&this.deletedStates[u][A][j]===null&&delete this.deletedStates[u][A][j]},Rv.prototype.removeFeatureState=function(u,d,g){if(this.deletedStates[u]!==null){var A=String(d);if(this.deletedStates[u]=this.deletedStates[u]||{},g&&d!==void 0)this.deletedStates[u][A]!==null&&(this.deletedStates[u][A]=this.deletedStates[u][A]||{},this.deletedStates[u][A][g]=null);else if(d!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][A])for(g in this.deletedStates[u][A]={},this.stateChanges[u][A])this.deletedStates[u][A][g]=null;else this.deletedStates[u][A]=null;else this.deletedStates[u]=null}},Rv.prototype.getState=function(u,d){var g=String(d),A=le({},(this.state[u]||{})[g],(this.stateChanges[u]||{})[g]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){var P=this.deletedStates[u][d];if(P===null)return{};for(var F in P)delete A[F]}return A},Rv.prototype.initializeTileState=function(u,d){u.setFeatureState(this.state,d)},Rv.prototype.coalesceChanges=function(u,d){var g={};for(var A in this.stateChanges){this.state[A]=this.state[A]||{};var P={};for(var F in this.stateChanges[A])this.state[A][F]||(this.state[A][F]={}),le(this.state[A][F],this.stateChanges[A][F]),P[F]=this.state[A][F];g[A]=P}for(var j in this.deletedStates){this.state[j]=this.state[j]||{};var te={};if(this.deletedStates[j]===null)for(var _e in this.state[j])te[_e]={},this.state[j][_e]={};else for(var Ne in this.deletedStates[j]){if(this.deletedStates[j][Ne]===null)this.state[j][Ne]={};else for(var Xe=0,it=Object.keys(this.deletedStates[j][Ne]);Xe<it.length;Xe+=1)delete this.state[j][Ne][it[Xe]];te[Ne]=this.state[j][Ne]}g[j]=g[j]||{},le(g[j],te)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(var Tt in u)u[Tt].setFeatureState(g,d)};var id=function(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Wo(8192,16,0),this.grid3D=new Wo(8192,16,0),this.featureIndexArray=new ct,this.promoteId=d};function q0(u,d,g,A,P){return ft(u,function(F,j){var te=d instanceof Id?d.get(j):null;return te&&te.evaluate?te.evaluate(g,A,P):te})}function d1(u){for(var d=1/0,g=1/0,A=-1/0,P=-1/0,F=0,j=u;F<j.length;F+=1){var te=j[F];d=Math.min(d,te.x),g=Math.min(g,te.y),A=Math.max(A,te.x),P=Math.max(P,te.y)}return{minX:d,minY:g,maxX:A,maxY:P}}function Ig(u,d){return d-u}id.prototype.insert=function(u,d,g,A,P,F){var j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,A,P);for(var te=F?this.grid3D:this.grid,_e=0;_e<d.length;_e++){for(var Ne=d[_e],Xe=[1/0,1/0,-1/0,-1/0],it=0;it<Ne.length;it++){var Tt=Ne[it];Xe[0]=Math.min(Xe[0],Tt.x),Xe[1]=Math.min(Xe[1],Tt.y),Xe[2]=Math.max(Xe[2],Tt.x),Xe[3]=Math.max(Xe[3],Tt.y)}Xe[0]<8192&&Xe[1]<8192&&Xe[2]>=0&&Xe[3]>=0&&te.insert(j,Xe[0],Xe[1],Xe[2],Xe[3])}},id.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Lh.VectorTile(new Rr(this.rawTileData)).layers,this.sourceLayerCoder=new Gl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},id.prototype.query=function(u,d,g,A){var P=this;this.loadVTLayers();for(var F=u.params||{},j=8192/u.tileSize/u.scale,te=Jf(F.filter),_e=u.queryGeometry,Ne=u.queryPadding*j,Xe=d1(_e),it=this.grid.query(Xe.minX-Ne,Xe.minY-Ne,Xe.maxX+Ne,Xe.maxY+Ne),Tt=d1(u.cameraQueryGeometry),Bt=this.grid3D.query(Tt.minX-Ne,Tt.minY-Ne,Tt.maxX+Ne,Tt.maxY+Ne,function(Pr,kr,Hr,Ni){return function(Xi,Uo,oo,Yo,fo){for(var Ha=0,ua=Xi;Ha<ua.length;Ha+=1){var Co=ua[Ha];if(Uo<=Co.x&&oo<=Co.y&&Yo>=Co.x&&fo>=Co.y)return!0}var Wa=[new ce(Uo,oo),new ce(Uo,fo),new ce(Yo,fo),new ce(Yo,oo)];if(Xi.length>2){for(var Ra=0,ls=Wa;Ra<ls.length;Ra+=1)if(Yf(Xi,ls[Ra]))return!0}for(var qo=0;qo<Xi.length-1;qo++)if(rd(Xi[qo],Xi[qo+1],Wa))return!0;return!1}(u.cameraQueryGeometry,Pr-Ne,kr-Ne,Hr+Ne,Ni+Ne)}),vn=0,xn=Bt;vn<xn.length;vn+=1)it.push(xn[vn]);it.sort(Ig);for(var Zn,Ln={},fr=function(Pr){var kr=it[Pr];if(kr!==Zn){Zn=kr;var Hr=P.featureIndexArray.get(kr),Ni=null;P.loadMatchingFeature(Ln,Hr.bucketIndex,Hr.sourceLayerIndex,Hr.featureIndex,te,F.layers,F.availableImages,d,g,A,function(Xi,Uo,oo){return Ni||(Ni=ll(Xi)),Uo.queryIntersectsFeature(_e,Xi,oo,Ni,P.z,u.transform,j,u.pixelPosMatrix)})}},xr=0;xr<it.length;xr++)fr(xr);return Ln},id.prototype.loadMatchingFeature=function(u,d,g,A,P,F,j,te,_e,Ne,Xe){var it=this.bucketLayerIDs[d];if(!F||function(Xi,Uo){for(var oo=0;oo<Xi.length;oo++)if(Uo.indexOf(Xi[oo])>=0)return!0;return!1}(F,it)){var Tt=this.sourceLayerCoder.decode(g),Bt=this.vtLayers[Tt].feature(A);if(P.needGeometry){var vn=Il(Bt,!0);if(!P.filter(new Sa(this.tileID.overscaledZ),vn,this.tileID.canonical))return}else if(!P.filter(new Sa(this.tileID.overscaledZ),Bt))return;for(var xn=this.getId(Bt,Tt),Zn=0;Zn<it.length;Zn++){var Ln=it[Zn];if(!(F&&F.indexOf(Ln)<0)){var fr=te[Ln];if(fr){var xr={};xn!==void 0&&Ne&&(xr=Ne.getState(fr.sourceLayer||"_geojsonTileLayer",xn));var Pr=le({},_e[Ln]);Pr.paint=q0(Pr.paint,fr.paint,Bt,xr,j),Pr.layout=q0(Pr.layout,fr.layout,Bt,xr,j);var kr=!Xe||Xe(Bt,fr,xr);if(kr){var Hr=new Zl(Bt,this.z,this.x,this.y,xn);Hr.layer=Pr;var Ni=u[Ln];Ni===void 0&&(Ni=u[Ln]=[]),Ni.push({featureIndex:A,feature:Hr,intersectionZ:kr})}}}}}},id.prototype.lookupSymbolFeatures=function(u,d,g,A,P,F,j,te){var _e={};this.loadVTLayers();for(var Ne=Jf(P),Xe=0,it=u;Xe<it.length;Xe+=1)this.loadMatchingFeature(_e,g,A,it[Xe],Ne,F,j,te,d);return _e},id.prototype.hasLayer=function(u){for(var d=0,g=this.bucketLayerIDs;d<g.length;d+=1)for(var A=0,P=g[d];A<P.length;A+=1)if(u===P[A])return!0;return!1},id.prototype.getId=function(u,d){var g=u.id;return this.promoteId&&typeof(g=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]])=="boolean"&&(g=Number(g)),g},Ji("FeatureIndex",id,{omit:["rawTileData","sourceLayerCoder"]});var Ru=function(u,d){this.tileID=u,this.uid=be(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ru.prototype.registerFadeDuration=function(u){var d=u+this.timeAdded;d<lr.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)},Ru.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ru.prototype.loadVectorData=function(u,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){for(var A in u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(Ne,Xe){var it={};if(!Xe)return it;for(var Tt=function(){var xn=vn[Bt],Zn=xn.layerIds.map(function(xr){return Xe.getLayer(xr)}).filter(Boolean);if(Zn.length!==0){xn.layers=Zn,xn.stateDependentLayerIds&&(xn.stateDependentLayers=xn.stateDependentLayerIds.map(function(xr){return Zn.filter(function(Pr){return Pr.id===xr})[0]}));for(var Ln=0,fr=Zn;Ln<fr.length;Ln+=1)it[fr[Ln].id]=xn}},Bt=0,vn=Ne;Bt<vn.length;Bt+=1)Tt();return it}(u.buckets,d.style),this.hasSymbolBuckets=!1,this.buckets){var P=this.buckets[A];if(P instanceof wo){if(this.hasSymbolBuckets=!0,!g)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var F in this.buckets){var j=this.buckets[F];if(j instanceof wo&&j.hasRTLText){this.hasRTLText=!0,pf.isLoading()||pf.isLoaded()||e0()!=="deferred"||Oc();break}}for(var te in this.queryPadding=0,this.buckets){var _e=this.buckets[te];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(te).queryRadius(_e))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new S},Ru.prototype.unloadVectorData=function(){for(var u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ru.prototype.getBucket=function(u){return this.buckets[u.id]},Ru.prototype.upload=function(u){for(var d in this.buckets){var g=this.buckets[d];g.uploadPending()&&g.upload(u)}var A=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Cv(u,this.imageAtlas.image,A.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Cv(u,this.glyphAtlasImage,A.ALPHA),this.glyphAtlasImage=null)},Ru.prototype.prepare=function(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)},Ru.prototype.queryRenderedFeatures=function(u,d,g,A,P,F,j,te,_e,Ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:A,cameraQueryGeometry:P,scale:F,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:te,params:j,queryPadding:this.queryPadding*_e},u,d,g):{}},Ru.prototype.querySourceFeatures=function(u,d){var g=this.latestFeatureIndex;if(g&&g.rawTileData){var A=g.loadVTLayers(),P=d?d.sourceLayer:"",F=A._geojsonTileLayer||A[P];if(F)for(var j=Jf(d&&d.filter),te=this.tileID.canonical,_e=te.z,Ne=te.x,Xe=te.y,it={z:_e,x:Ne,y:Xe},Tt=0;Tt<F.length;Tt++){var Bt=F.feature(Tt);if(j.needGeometry){var vn=Il(Bt,!0);if(!j.filter(new Sa(this.tileID.overscaledZ),vn,this.tileID.canonical))continue}else if(!j.filter(new Sa(this.tileID.overscaledZ),Bt))continue;var xn=g.getId(Bt,P),Zn=new Zl(Bt,_e,Ne,Xe,xn);Zn.tile=it,u.push(Zn)}}},Ru.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ru.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ru.prototype.setExpiryData=function(u){var d=this.expirationTime;if(u.cacheControl){var g=mt(u.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){var A=Date.now(),P=!1;if(this.expirationTime>A)P=!1;else if(d)if(this.expirationTime<d)P=!0;else{var F=this.expirationTime-d;F?this.expirationTime=A+Math.max(F,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ru.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ru.prototype.setFeatureState=function(u,d){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(u).length!==0){var g=this.latestFeatureIndex.loadVTLayers();for(var A in this.buckets)if(d.style.hasLayer(A)){var P=this.buckets[A],F=P.layers[0].sourceLayer||"_geojsonTileLayer",j=g[F],te=u[F];if(j&&te&&Object.keys(te).length!==0){P.update(te,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});var _e=d&&d.style&&d.style.getLayer(A);_e&&(this.queryPadding=Math.max(this.queryPadding,_e.queryRadius(P)))}}}},Ru.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ru.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<lr.now()},Ru.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ru.prototype.setHoldDuration=function(u){this.symbolFadeHoldUntil=lr.now()+u},Ru.prototype.setDependencies=function(u,d){for(var g={},A=0,P=d;A<P.length;A+=1)g[P[A]]=!0;this.dependencies[u]=g},Ru.prototype.hasDependency=function(u,d){for(var g=0,A=u;g<A.length;g+=1){var P=this.dependencies[A[g]];if(P){for(var F=0,j=d;F<j.length;F+=1)if(P[j[F]])return!0}}return!1};var od=ae.performance,K0=function(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},od.mark(this._marks.start)};K0.prototype.finish=function(){od.mark(this._marks.end);var u=od.getEntriesByName(this._marks.measure);return u.length===0&&(od.measure(this._marks.measure,this._marks.start,this._marks.end),u=od.getEntriesByName(this._marks.measure),od.clearMarks(this._marks.start),od.clearMarks(this._marks.end),od.clearMeasures(this._marks.measure)),u},E.Actor=Im,E.AlphaImage=Np,E.CanonicalTileID=hp,E.CollisionBoxArray=S,E.Color=_n,E.DEMData=Wd,E.DataConstantProperty=ko,E.DictionaryCoder=Gl,E.EXTENT=8192,E.ErrorEvent=nn,E.EvaluationParameters=Sa,E.Event=At,E.Evented=cn,E.FeatureIndex=id,E.FillBucket=ah,E.FillExtrusionBucket=Pc,E.ImageAtlas=Jr,E.ImagePosition=Ki,E.LineBucket=Ic,E.LngLat=El,E.LngLatBounds=Dl,E.MercatorCoordinate=Dm,E.ONE_EM=24,E.OverscaledTileID=js,E.Point=ce,E.Point$1=ce,E.Properties=ml,E.Protobuf=Rr,E.RGBAImage=Yc,E.RequestManager=Pt,E.RequestPerformance=K0,E.ResourceType=Fe,E.SegmentVector=Vt,E.SourceFeatureState=Rv,E.StructArrayLayout1ui2=mf,E.StructArrayLayout2f1f2i16=td,E.StructArrayLayout2i4=Ah,E.StructArrayLayout3ui6=vf,E.StructArrayLayout4i8=sp,E.SymbolBucket=wo,E.Texture=Cv,E.Tile=Ru,E.Transitionable=vl,E.Uniform1f=Hi,E.Uniform1i=ii,E.Uniform2f=Fi,E.Uniform3f=po,E.Uniform4f=Vo,E.UniformColor=$r,E.UniformMatrix4f=Ya,E.UnwrappedTileID=$u,E.ValidationError=Qt,E.WritingMode=zo,E.ZoomHistory=vc,E.add=function(u,d,g){return u[0]=d[0]+g[0],u[1]=d[1]+g[1],u[2]=d[2]+g[2],u},E.addDynamicAttributes=gi,E.asyncAll=function(u,d,g){if(!u.length)return g(null,[]);var A=u.length,P=new Array(u.length),F=null;u.forEach(function(j,te){d(j,function(_e,Ne){_e&&(F=_e),P[te]=Ne,--A==0&&g(F,P)})})},E.bezier=J,E.bindAll=wt,E.browser=lr,E.cacheEntryPossiblyAdded=function(u){++pt>Nt&&(u.getActor().send("enforceCacheSizeLimit",vt),pt=0)},E.clamp=Oe,E.clearTileCache=function(u){var d=ae.caches.delete("mapbox-tiles");u&&d.catch(u).then(function(){return u()})},E.clipLine=Dh,E.clone=function(u){var d=new rs(16);return d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},E.clone$1=Ae,E.clone$2=function(u){var d=new rs(3);return d[0]=u[0],d[1]=u[1],d[2]=u[2],d},E.collisionCircleLayout=Ue,E.config=or,E.create=function(){var u=new rs(16);return rs!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},E.create$1=function(){var u=new rs(9);return rs!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u},E.create$2=function(){var u=new rs(4);return rs!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u},E.createCommonjsModule=fe,E.createExpression=Ca,E.createLayout=bu,E.createStyleLayer=function(u){return u.type==="custom"?new jy(u):new jp[u.type](u)},E.cross=function(u,d,g){var A=d[0],P=d[1],F=d[2],j=g[0],te=g[1],_e=g[2];return u[0]=P*_e-F*te,u[1]=F*j-A*_e,u[2]=A*te-P*j,u},E.deepEqual=function u(d,g){if(Array.isArray(d)){if(!Array.isArray(g)||d.length!==g.length)return!1;for(var A=0;A<d.length;A++)if(!u(d[A],g[A]))return!1;return!0}if(typeof d=="object"&&d!==null&&g!==null){if(typeof g!="object"||Object.keys(d).length!==Object.keys(g).length)return!1;for(var P in d)if(!u(d[P],g[P]))return!1;return!0}return d===g},E.dot=function(u,d){return u[0]*d[0]+u[1]*d[1]+u[2]*d[2]},E.dot$1=function(u,d){return u[0]*d[0]+u[1]*d[1]+u[2]*d[2]+u[3]*d[3]},E.ease=me,E.emitValidationErrors=Xo,E.endsWith=gt,E.enforceCacheSizeLimit=function(u){An(),qt&&qt.then(function(d){d.keys().then(function(g){for(var A=0;A<g.length-u;A++)d.delete(g[A])})})},E.evaluateSizeForFeature=Lc,E.evaluateSizeForZoom=wu,E.evaluateVariableOffset=Jn,E.evented=Lp,E.extend=le,E.featureFilter=Jf,E.filterObject=Pe,E.fromRotation=function(u,d){var g=Math.sin(d),A=Math.cos(d);return u[0]=A,u[1]=g,u[2]=0,u[3]=-g,u[4]=A,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},E.getAnchorAlignment=il,E.getAnchorJustification=Vn,E.getArrayBuffer=Er,E.getImage=Te,E.getJSON=function(u,d){return rr(le(u,{type:"json"}),d)},E.getRTLTextPluginStatus=e0,E.getReferrer=It,E.getVideo=function(u,d){var g,A,P=ae.document.createElement("video");P.muted=!0,P.onloadstart=function(){d(null,P)};for(var F=0;F<u.length;F++){var j=ae.document.createElement("source");g=u[F],A=void 0,(A=ae.document.createElement("a")).href=g,(A.protocol!==ae.document.location.protocol||A.host!==ae.document.location.host)&&(P.crossOrigin="Anonymous"),j.src=u[F],P.appendChild(j)}return{cancel:function(){}}},E.identity=Gu,E.invert=function(u,d){var g=d[0],A=d[1],P=d[2],F=d[3],j=d[4],te=d[5],_e=d[6],Ne=d[7],Xe=d[8],it=d[9],Tt=d[10],Bt=d[11],vn=d[12],xn=d[13],Zn=d[14],Ln=d[15],fr=g*te-A*j,xr=g*_e-P*j,Pr=g*Ne-F*j,kr=A*_e-P*te,Hr=A*Ne-F*te,Ni=P*Ne-F*_e,Xi=Xe*xn-it*vn,Uo=Xe*Zn-Tt*vn,oo=Xe*Ln-Bt*vn,Yo=it*Zn-Tt*xn,fo=it*Ln-Bt*xn,Ha=Tt*Ln-Bt*Zn,ua=fr*Ha-xr*fo+Pr*Yo+kr*oo-Hr*Uo+Ni*Xi;return ua?(u[0]=(te*Ha-_e*fo+Ne*Yo)*(ua=1/ua),u[1]=(P*fo-A*Ha-F*Yo)*ua,u[2]=(xn*Ni-Zn*Hr+Ln*kr)*ua,u[3]=(Tt*Hr-it*Ni-Bt*kr)*ua,u[4]=(_e*oo-j*Ha-Ne*Uo)*ua,u[5]=(g*Ha-P*oo+F*Uo)*ua,u[6]=(Zn*Pr-vn*Ni-Ln*xr)*ua,u[7]=(Xe*Ni-Tt*Pr+Bt*xr)*ua,u[8]=(j*fo-te*oo+Ne*Xi)*ua,u[9]=(A*oo-g*fo-F*Xi)*ua,u[10]=(vn*Hr-xn*Pr+Ln*fr)*ua,u[11]=(it*Pr-Xe*Hr-Bt*fr)*ua,u[12]=(te*Uo-j*Yo-_e*Xi)*ua,u[13]=(g*Yo-A*Uo+P*Xi)*ua,u[14]=(xn*xr-vn*kr-Zn*fr)*ua,u[15]=(Xe*kr-it*xr+Tt*fr)*ua,u):null},E.isChar=Ui,E.isMapboxURL=zt,E.keysDifference=function(u,d){var g=[];for(var A in u)A in d||g.push(A);return g},E.makeRequest=rr,E.mapObject=ft,E.mercatorXfromLng=ix,E.mercatorYfromLat=Mv,E.mercatorZfromAltitude=ox,E.mul=cp,E.multiply=xu,E.mvt=Lh,E.nextPowerOfTwo=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},E.normalize=function(u,d){var g=d[0],A=d[1],P=d[2],F=g*g+A*A+P*P;return F>0&&(F=1/Math.sqrt(F)),u[0]=d[0]*F,u[1]=d[1]*F,u[2]=d[2]*F,u},E.number=xs,E.offscreenCanvasSupported=xe,E.ortho=function(u,d,g,A,P,F,j){var te=1/(d-g),_e=1/(A-P),Ne=1/(F-j);return u[0]=-2*te,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*_e,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*Ne,u[11]=0,u[12]=(d+g)*te,u[13]=(P+A)*_e,u[14]=(j+F)*Ne,u[15]=1,u},E.parseGlyphPBF=function(u){return new Rr(u).readFields(si,[])},E.pbf=Rr,E.performSymbolLayout=function(u,d,g,A,P,F,j){u.createArrays(),u.tilePixelRatio=8192/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;var te=u.layers[0].layout,_e=u.layers[0]._unevaluatedLayout._values,Ne={};if(u.textSizeData.kind==="composite"){var Xe=u.textSizeData,it=Xe.maxZoom;Ne.compositeTextSizes=[_e["text-size"].possiblyEvaluate(new Sa(Xe.minZoom),j),_e["text-size"].possiblyEvaluate(new Sa(it),j)]}if(u.iconSizeData.kind==="composite"){var Tt=u.iconSizeData,Bt=Tt.maxZoom;Ne.compositeIconSizes=[_e["icon-size"].possiblyEvaluate(new Sa(Tt.minZoom),j),_e["icon-size"].possiblyEvaluate(new Sa(Bt),j)]}Ne.layoutTextSize=_e["text-size"].possiblyEvaluate(new Sa(u.zoom+1),j),Ne.layoutIconSize=_e["icon-size"].possiblyEvaluate(new Sa(u.zoom+1),j),Ne.textMaxSize=_e["text-size"].possiblyEvaluate(new Sa(18));for(var vn=24*te.get("text-line-height"),xn=te.get("text-rotation-alignment")==="map"&&te.get("symbol-placement")!=="point",Zn=te.get("text-keep-upright"),Ln=te.get("text-size"),fr=function(){var kr=Pr[xr],Hr=te.get("text-font").evaluate(kr,{},j).join(","),Ni=Ln.evaluate(kr,{},j),Xi=Ne.layoutTextSize.evaluate(kr,{},j),Uo=Ne.layoutIconSize.evaluate(kr,{},j),oo={horizontal:{},vertical:void 0},Yo=kr.text,fo=[0,0];if(Yo){var Ha=Yo.toString(),ua=24*te.get("text-letter-spacing").evaluate(kr,{},j),Co=function(za){for(var Ks=0,pa=za;Ks<pa.length;Ks+=1)if(hs=pa[Ks].charCodeAt(0),Ui.Arabic(hs)||Ui["Arabic Supplement"](hs)||Ui["Arabic Extended-A"](hs)||Ui["Arabic Presentation Forms-A"](hs)||Ui["Arabic Presentation Forms-B"](hs))return!1;var hs;return!0}(Ha)?ua:0,Wa=te.get("text-anchor").evaluate(kr,{},j),Ra=te.get("text-variable-anchor");if(!Ra){var ls=te.get("text-radial-offset").evaluate(kr,{},j);fo=ls?Jn(Wa,[24*ls,jn]):te.get("text-offset").evaluate(kr,{},j).map(function(za){return 24*za})}var qo=xn?"center":te.get("text-justify").evaluate(kr,{},j),vs=te.get("symbol-placement"),Sl=vs==="point"?24*te.get("text-max-width").evaluate(kr,{},j):0,Xl=function(){u.allowVerticalPlacement&&Cf(Ha)&&(oo.vertical=Ma(Yo,d,g,P,Hr,Sl,vn,Wa,"left",Co,fo,zo.vertical,!0,vs,Xi,Ni))};if(!xn&&Ra){for(var wl=qo==="auto"?Ra.map(function(za){return Vn(za)}):[qo],Tl=!1,eu=0;eu<wl.length;eu++){var Pu=wl[eu];if(!oo.horizontal[Pu])if(Tl)oo.horizontal[Pu]=oo.horizontal[0];else{var qu=Ma(Yo,d,g,P,Hr,Sl,vn,"center",Pu,Co,fo,zo.horizontal,!1,vs,Xi,Ni);qu&&(oo.horizontal[Pu]=qu,Tl=qu.positionedLines.length===1)}}Xl()}else{qo==="auto"&&(qo=Vn(Wa));var Kc=Ma(Yo,d,g,P,Hr,Sl,vn,Wa,qo,Co,fo,zo.horizontal,!1,vs,Xi,Ni);Kc&&(oo.horizontal[qo]=Kc),Xl(),Cf(Ha)&&xn&&Zn&&(oo.vertical=Ma(Yo,d,g,P,Hr,Sl,vn,Wa,qo,Co,fo,zo.vertical,!1,vs,Xi,Ni))}}var ac=void 0,Qc=!1;if(kr.icon&&kr.icon.name){var hu=A[kr.icon.name];hu&&(ac=function(za,Ks,pa){var hs=il(pa),yf=Ks[0]-za.displaySize[0]*hs.horizontalAlign,Zs=Ks[1]-za.displaySize[1]*hs.verticalAlign;return{image:za,top:Zs,bottom:Zs+za.displaySize[1],left:yf,right:yf+za.displaySize[0]}}(P[kr.icon.name],te.get("icon-offset").evaluate(kr,{},j),te.get("icon-anchor").evaluate(kr,{},j)),Qc=hu.sdf,u.sdfIcons===void 0?u.sdfIcons=hu.sdf:u.sdfIcons!==hu.sdf&&Ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(hu.pixelRatio!==u.pixelRatio||te.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0))}var Iu=Gn(oo.horizontal)||oo.vertical;u.iconsInText=!!Iu&&Iu.iconsInText,(Iu||ac)&&function(za,Ks,pa,hs,yf,Zs,Qs,du,Ec,ws,Gd){var lh=Zs.textMaxSize.evaluate(Ks,{});lh===void 0&&(lh=Qs);var dp,pu=za.layers[0].layout,pp=pu.get("icon-offset").evaluate(Ks,{},Gd),ad=Gn(pa.horizontal),Pv=Qs/24,v0=za.tilePixelRatio*Pv,Q0=za.tilePixelRatio*lh/24,vp=za.tilePixelRatio*du,Iv=za.tilePixelRatio*pu.get("symbol-spacing"),Lg=pu.get("text-padding")*za.tilePixelRatio,Zd=pu.get("icon-padding")*za.tilePixelRatio,J0=pu.get("text-max-angle")/180*Math.PI,Dg=pu.get("text-rotation-alignment")==="map"&&pu.get("symbol-placement")!=="point",Vy=pu.get("icon-rotation-alignment")==="map"&&pu.get("symbol-placement")!=="point",mp=pu.get("symbol-placement"),uh=Iv/2,gp=pu.get("icon-text-fit");hs&&gp!=="none"&&(za.allowVerticalPlacement&&pa.vertical&&(dp=Su(hs,pa.vertical,gp,pu.get("icon-text-fit-padding"),pp,Pv)),ad&&(hs=Su(hs,ad,gp,pu.get("icon-text-fit-padding"),pp,Pv)));var Nh=function(Um,Gy){Gy.x<0||Gy.x>=8192||Gy.y<0||Gy.y>=8192||function(vu,sd,HE,iv,ov,Zy,Fg,ld,Bg,kg,zg,Ug,jg,Xy,jm,Gr,av,Hp,Yy,_0,Ff,oa,$y,yp,Fv){var sv,sc,Al,_f,Vm,Hm=vu.addToLineVertexArray(sd,HE),v1=0,m1=0,qy=0,Vg=0,Ky=-1,Qy=-1,_p={},Fh=un(""),fh=0,b0=0;if(ld._unevaluatedLayout.getValue("text-radial-offset")===void 0?(fh=(sv=ld.layout.get("text-offset").evaluate(Ff,{},yp).map(function(ao){return 24*ao}))[0],b0=sv[1]):(fh=24*ld.layout.get("text-radial-offset").evaluate(Ff,{},yp),b0=jn),vu.allowVerticalPlacement&&iv.vertical){var na=ld.layout.get("text-rotate").evaluate(Ff,{},yp)+90;_f=new qs(Bg,sd,kg,zg,Ug,iv.vertical,jg,Xy,jm,na),Fg&&(Vm=new qs(Bg,sd,kg,zg,Ug,Fg,av,Hp,jm,na))}if(ov){var Hg=ld.layout.get("icon-rotate").evaluate(Ff,{}),g1=ld.layout.get("icon-text-fit")!=="none",Jy=bn(ov,Hg,$y,g1),x0=Fg?bn(Fg,Hg,$y,g1):void 0;Al=new qs(Bg,sd,kg,zg,Ug,ov,av,Hp,!1,Hg),v1=4*Jy.length;var Wg=vu.iconSizeData,tu=null;Wg.kind==="source"?(tu=[128*ld.layout.get("icon-size").evaluate(Ff,{})])[0]>32640&&Ze(vu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Wg.kind==="composite"&&((tu=[128*oa.compositeIconSizes[0].evaluate(Ff,{},yp),128*oa.compositeIconSizes[1].evaluate(Ff,{},yp)])[0]>32640||tu[1]>32640)&&Ze(vu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),vu.addSymbols(vu.icon,Jy,tu,_0,Yy,Ff,!1,sd,Hm.lineStartIndex,Hm.lineLength,-1,yp),Ky=vu.icon.placedSymbolArray.length-1,x0&&(m1=4*x0.length,vu.addSymbols(vu.icon,x0,tu,_0,Yy,Ff,zo.vertical,sd,Hm.lineStartIndex,Hm.lineLength,-1,yp),Qy=vu.icon.placedSymbolArray.length-1)}for(var y1 in iv.horizontal){var hh=iv.horizontal[y1];if(!sc){Fh=un(hh.text);var WE=ld.layout.get("text-rotate").evaluate(Ff,{},yp);sc=new qs(Bg,sd,kg,zg,Ug,hh,jg,Xy,jm,WE)}var Sc=hh.positionedLines.length===1;if(qy+=on(vu,sd,hh,Zy,ld,jm,Ff,Gr,Hm,iv.vertical?zo.horizontal:zo.horizontalOnly,Sc?Object.keys(iv.horizontal):[y1],_p,Ky,oa,yp),Sc)break}iv.vertical&&(Vg+=on(vu,sd,iv.vertical,Zy,ld,jm,Ff,Gr,Hm,zo.vertical,["vertical"],_p,Qy,oa,yp));var Wp=sc?sc.boxStartIndex:vu.collisionBoxArray.length,Ta=sc?sc.boxEndIndex:vu.collisionBoxArray.length,Bv=_f?_f.boxStartIndex:vu.collisionBoxArray.length,E0=_f?_f.boxEndIndex:vu.collisionBoxArray.length,ol=Al?Al.boxStartIndex:vu.collisionBoxArray.length,Gg=Al?Al.boxEndIndex:vu.collisionBoxArray.length,Bh=Vm?Vm.boxStartIndex:vu.collisionBoxArray.length,e_=Vm?Vm.boxEndIndex:vu.collisionBoxArray.length,ud=-1,Zg=function(ao,kh){return ao&&ao.circleDiameter?Math.max(ao.circleDiameter,kh):kh};ud=Zg(sc,ud),ud=Zg(_f,ud),ud=Zg(Al,ud);var $o=(ud=Zg(Vm,ud))>-1?1:0;$o&&(ud*=Fv/24),vu.glyphOffsetArray.length>=wo.MAX_GLYPHS&&Ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ff.sortKey!==void 0&&vu.addToSortKeyRanges(vu.symbolInstances.length,Ff.sortKey),vu.symbolInstances.emplaceBack(sd.x,sd.y,_p.right>=0?_p.right:-1,_p.center>=0?_p.center:-1,_p.left>=0?_p.left:-1,_p.vertical||-1,Ky,Qy,Fh,Wp,Ta,Bv,E0,ol,Gg,Bh,e_,kg,qy,Vg,v1,m1,$o,0,jg,fh,b0,ud)}(za,Gy,Um,pa,hs,yf,dp,za.layers[0],za.collisionBoxArray,Ks.index,Ks.sourceLayerIndex,za.index,v0,Lg,Dg,Ec,vp,Zd,Vy,pp,Ks,Zs,ws,Gd,Qs)};if(mp==="line")for(var Vp=0,ch=Dh(Ks.geometry,0,0,8192,8192);Vp<ch.length;Vp+=1)for(var Nm=ch[Vp],ev=0,tv=fu(Nm,Iv,J0,pa.vertical||ad,hs,24,Q0,za.overscaling,8192);ev<tv.length;ev+=1){var Lv=tv[ev];ad&&$t(za,ad.text,uh,Lv)||Nh(Nm,Lv)}else if(mp==="line-center")for(var Fm=0,Bm=Ks.geometry;Fm<Bm.length;Fm+=1){var km=Bm[Fm];if(km.length>1){var Ng=fs(km,J0,pa.vertical||ad,hs,24,Q0);Ng&&Nh(km,Ng)}}else if(Ks.type==="Polygon")for(var m0=0,nv=H0(Ks.geometry,0);m0<nv.length;m0+=1){var g0=nv[m0],Dv=Rn(g0,16);Nh(g0[0],new Ll(Dv.x,Dv.y,0))}else if(Ks.type==="LineString")for(var y0=0,rv=Ks.geometry;y0<rv.length;y0+=1){var Nv=rv[y0];Nh(Nv,new Ll(Nv[0].x,Nv[0].y,0))}else if(Ks.type==="Point")for(var Hy=0,zm=Ks.geometry;Hy<zm.length;Hy+=1)for(var Wy=0,ax=zm[Hy];Wy<ax.length;Wy+=1){var p1=ax[Wy];Nh([p1],new Ll(p1.x,p1.y,0))}}(u,kr,oo,ac,A,Ne,Xi,Uo,fo,Qc,j)},xr=0,Pr=u.features;xr<Pr.length;xr+=1)fr();F&&u.generateCollisionDebugBuffers()},E.perspective=function(u,d,g,A,P){var F,j=1/Math.tan(d/2);return u[0]=j/g,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=j,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,P!=null&&P!==1/0?(u[10]=(P+A)*(F=1/(A-P)),u[14]=2*P*A*F):(u[10]=-1,u[14]=-2*A),u},E.pick=function(u,d){for(var g={},A=0;A<d.length;A++){var P=d[A];P in u&&(g[P]=u[P])}return g},E.plugin=pf,E.polygonIntersectsPolygon=Zf,E.postMapLoadEvent=pn,E.postTurnstileEvent=Yn,E.potpack=va,E.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],E.register=Ji,E.registerForPluginStateChange=function(u){return u({pluginStatus:nc,pluginURL:rh}),Lp.on("pluginStateChange",u),u},E.renderColorRamp=a0,E.rotate=function(u,d,g){var A=d[0],P=d[1],F=d[2],j=d[3],te=Math.sin(g),_e=Math.cos(g);return u[0]=A*_e+F*te,u[1]=P*_e+j*te,u[2]=A*-te+F*_e,u[3]=P*-te+j*_e,u},E.rotateX=function(u,d,g){var A=Math.sin(g),P=Math.cos(g),F=d[4],j=d[5],te=d[6],_e=d[7],Ne=d[8],Xe=d[9],it=d[10],Tt=d[11];return d!==u&&(u[0]=d[0],u[1]=d[1],u[2]=d[2],u[3]=d[3],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15]),u[4]=F*P+Ne*A,u[5]=j*P+Xe*A,u[6]=te*P+it*A,u[7]=_e*P+Tt*A,u[8]=Ne*P-F*A,u[9]=Xe*P-j*A,u[10]=it*P-te*A,u[11]=Tt*P-_e*A,u},E.rotateZ=function(u,d,g){var A=Math.sin(g),P=Math.cos(g),F=d[0],j=d[1],te=d[2],_e=d[3],Ne=d[4],Xe=d[5],it=d[6],Tt=d[7];return d!==u&&(u[8]=d[8],u[9]=d[9],u[10]=d[10],u[11]=d[11],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15]),u[0]=F*P+Ne*A,u[1]=j*P+Xe*A,u[2]=te*P+it*A,u[3]=_e*P+Tt*A,u[4]=Ne*P-F*A,u[5]=Xe*P-j*A,u[6]=it*P-te*A,u[7]=Tt*P-_e*A,u},E.scale=function(u,d,g){var A=g[0],P=g[1],F=g[2];return u[0]=d[0]*A,u[1]=d[1]*A,u[2]=d[2]*A,u[3]=d[3]*A,u[4]=d[4]*P,u[5]=d[5]*P,u[6]=d[6]*P,u[7]=d[7]*P,u[8]=d[8]*F,u[9]=d[9]*F,u[10]=d[10]*F,u[11]=d[11]*F,u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15],u},E.scale$1=function(u,d,g){return u[0]=d[0]*g,u[1]=d[1]*g,u[2]=d[2]*g,u[3]=d[3]*g,u},E.scale$2=function(u,d,g){return u[0]=d[0]*g,u[1]=d[1]*g,u[2]=d[2]*g,u},E.setCacheLimits=function(u,d){vt=u,Nt=d},E.setRTLTextPlugin=function(u,d,g){if(g===void 0&&(g=!1),nc==="deferred"||nc==="loading"||nc==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");rh=lr.resolveURL(u),nc="deferred",Sh=d,Pd(),g||Oc()},E.sphericalToCartesian=function(u){var d=u[0],g=u[1],A=u[2];return g+=90,g*=Math.PI/180,A*=Math.PI/180,{x:d*Math.cos(g)*Math.sin(A),y:d*Math.sin(g)*Math.sin(A),z:d*Math.cos(A)}},E.sqrLen=function(u){var d=u[0],g=u[1];return d*d+g*g},E.styleSpec=Et,E.sub=function(u,d,g){return u[0]=d[0]-g[0],u[1]=d[1]-g[1],u[2]=d[2]-g[2],u},E.symbolSize=ka,E.transformMat3=function(u,d,g){var A=d[0],P=d[1],F=d[2];return u[0]=A*g[0]+P*g[3]+F*g[6],u[1]=A*g[1]+P*g[4]+F*g[7],u[2]=A*g[2]+P*g[5]+F*g[8],u},E.transformMat4=Ld,E.translate=function(u,d,g){var A,P,F,j,te,_e,Ne,Xe,it,Tt,Bt,vn,xn=g[0],Zn=g[1],Ln=g[2];return d===u?(u[12]=d[0]*xn+d[4]*Zn+d[8]*Ln+d[12],u[13]=d[1]*xn+d[5]*Zn+d[9]*Ln+d[13],u[14]=d[2]*xn+d[6]*Zn+d[10]*Ln+d[14],u[15]=d[3]*xn+d[7]*Zn+d[11]*Ln+d[15]):(P=d[1],F=d[2],j=d[3],te=d[4],_e=d[5],Ne=d[6],Xe=d[7],it=d[8],Tt=d[9],Bt=d[10],vn=d[11],u[0]=A=d[0],u[1]=P,u[2]=F,u[3]=j,u[4]=te,u[5]=_e,u[6]=Ne,u[7]=Xe,u[8]=it,u[9]=Tt,u[10]=Bt,u[11]=vn,u[12]=A*xn+te*Zn+it*Ln+d[12],u[13]=P*xn+_e*Zn+Tt*Ln+d[13],u[14]=F*xn+Ne*Zn+Bt*Ln+d[14],u[15]=j*xn+Xe*Zn+vn*Ln+d[15]),u},E.triggerPluginCompletionEvent=Rd,E.uniqueId=be,E.validateCustomStyleLayer=function(u){var d=[],g=u.id;return g===void 0&&d.push({message:"layers."+g+': missing required property "id"'}),u.render===void 0&&d.push({message:"layers."+g+': missing required method "render"'}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&d.push({message:"layers."+g+': property "renderingMode" must be either "2d" or "3d"'}),d},E.validateLight=Br,E.validateStyle=ur,E.values=function(u){var d=[];for(var g in u)d.push(u[g]);return d},E.vectorTile=Lh,E.version="1.13.3",E.warnOnce=Ze,E.webpSupported=Lt,E.window=ae,E.wrap=Q}),G(["./shared"],function(E){"use strict";function fe(Me){var Te=typeof Me;if(Te==="number"||Te==="boolean"||Te==="string"||Me==null)return JSON.stringify(Me);if(Array.isArray(Me)){for(var ke="[",at=0,At=Me;at<At.length;at+=1)ke+=fe(At[at])+",";return ke+"]"}for(var nn=Object.keys(Me).sort(),cn="{",Et=0;Et<nn.length;Et++)cn+=JSON.stringify(nn[Et])+":"+fe(Me[nn[Et]])+",";return cn+"}"}function $(Me){for(var Te="",ke=0,at=E.refProperties;ke<at.length;ke+=1)Te+="/"+fe(Me[at[ke]]);return Te}var se=function(Me){this.keyCache={},Me&&this.replace(Me)};se.prototype.replace=function(Me){this._layerConfigs={},this._layers={},this.update(Me,[])},se.prototype.update=function(Me,Te){for(var ke=this,at=0,At=Me;at<At.length;at+=1){var nn=At[at];this._layerConfigs[nn.id]=nn;var cn=this._layers[nn.id]=E.createStyleLayer(nn);cn._featureFilter=E.featureFilter(cn.filter),this.keyCache[nn.id]&&delete this.keyCache[nn.id]}for(var Et=0,Qt=Te;Et<Qt.length;Et+=1){var Qn=Qt[Et];delete this.keyCache[Qn],delete this._layerConfigs[Qn],delete this._layers[Qn]}this.familiesBySource={};for(var Sr=0,Zr=function(pi,_i){for(var Bo={},Si=0;Si<pi.length;Si++){var Ci=_i&&_i[pi[Si].id]||$(pi[Si]);_i&&(_i[pi[Si].id]=Ci);var ho=Bo[Ci];ho||(ho=Bo[Ci]=[]),ho.push(pi[Si])}var go=[];for(var jo in Bo)go.push(Bo[jo]);return go}(E.values(this._layerConfigs),this.keyCache);Sr<Zr.length;Sr+=1){var yr=Zr[Sr].map(function(pi){return ke._layers[pi.id]}),Wr=yr[0];if(Wr.visibility!=="none"){var Ei=Wr.source||"",yi=this.familiesBySource[Ei];yi||(yi=this.familiesBySource[Ei]={});var wr=Wr.sourceLayer||"_geojsonTileLayer",Ai=yi[wr];Ai||(Ai=yi[wr]=[]),Ai.push(yr)}}};var ce=function(Me){var Te={},ke=[];for(var at in Me){var At=Me[at],nn=Te[at]={};for(var cn in At){var Et=At[+cn];if(Et&&Et.bitmap.width!==0&&Et.bitmap.height!==0){var Qt={x:0,y:0,w:Et.bitmap.width+2,h:Et.bitmap.height+2};ke.push(Qt),nn[cn]={rect:Qt,metrics:Et.metrics}}}}var Qn=E.potpack(ke),Sr=new E.AlphaImage({width:Qn.w||1,height:Qn.h||1});for(var Zr in Me){var yr=Me[Zr];for(var Wr in yr){var Ei=yr[+Wr];if(Ei&&Ei.bitmap.width!==0&&Ei.bitmap.height!==0){var yi=Te[Zr][Wr].rect;E.AlphaImage.copy(Ei.bitmap,Sr,{x:0,y:0},{x:yi.x+1,y:yi.y+1},Ei.bitmap)}}}this.image=Sr,this.positions=Te};E.register("GlyphAtlas",ce);var ye=function(Me){this.tileID=new E.OverscaledTileID(Me.tileID.overscaledZ,Me.tileID.wrap,Me.tileID.canonical.z,Me.tileID.canonical.x,Me.tileID.canonical.y),this.uid=Me.uid,this.zoom=Me.zoom,this.pixelRatio=Me.pixelRatio,this.tileSize=Me.tileSize,this.source=Me.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Me.showCollisionBoxes,this.collectResourceTiming=!!Me.collectResourceTiming,this.returnDependencies=!!Me.returnDependencies,this.promoteId=Me.promoteId};function ae(Me,Te,ke){for(var at=new E.EvaluationParameters(Te),At=0,nn=Me;At<nn.length;At+=1)nn[At].recalculate(at,ke)}function He(Me,Te){var ke=E.getArrayBuffer(Me.request,function(at,At,nn,cn){at?Te(at):At&&Te(null,{vectorTile:new E.vectorTile.VectorTile(new E.pbf(At)),rawData:At,cacheControl:nn,expires:cn})});return function(){ke.cancel(),Te()}}ye.prototype.parse=function(Me,Te,ke,at,At){var nn=this;this.status="parsing",this.data=Me,this.collisionBoxArray=new E.CollisionBoxArray;var cn=new E.DictionaryCoder(Object.keys(Me.layers).sort()),Et=new E.FeatureIndex(this.tileID,this.promoteId);Et.bucketLayerIDs=[];var Qt,Qn,Sr,Zr,yr={},Wr={featureIndex:Et,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ke},Ei=Te.familiesBySource[this.source];for(var yi in Ei){var wr=Me.layers[yi];if(wr){wr.version===1&&E.warnOnce('Vector tile source "'+this.source+'" layer "'+yi+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ai=cn.encode(yi),pi=[],_i=0;_i<wr.length;_i++){var Bo=wr.feature(_i),Si=Et.getId(Bo,yi);pi.push({feature:Bo,id:Si,index:_i,sourceLayerIndex:Ai})}for(var Ci=0,ho=Ei[yi];Ci<ho.length;Ci+=1){var go=ho[Ci],jo=go[0];jo.minzoom&&this.zoom<Math.floor(jo.minzoom)||jo.maxzoom&&this.zoom>=jo.maxzoom||jo.visibility!=="none"&&(ae(go,this.zoom,ke),(yr[jo.id]=jo.createBucket({index:Et.bucketLayerIDs.length,layers:go,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ai,sourceID:this.source})).populate(pi,Wr,this.tileID.canonical),Et.bucketLayerIDs.push(go.map(function(Fn){return Fn.id})))}}}var Ke=E.mapObject(Wr.glyphDependencies,function(Fn){return Object.keys(Fn).map(Number)});Object.keys(Ke).length?at.send("getGlyphs",{uid:this.uid,stacks:Ke},function(Fn,Bn){Qt||(Qt=Fn,Qn=Bn,dn.call(nn))}):Qn={};var dt=Object.keys(Wr.iconDependencies);dt.length?at.send("getImages",{icons:dt,source:this.source,tileID:this.tileID,type:"icons"},function(Fn,Bn){Qt||(Qt=Fn,Sr=Bn,dn.call(nn))}):Sr={};var Wt=Object.keys(Wr.patternDependencies);function dn(){if(Qt)return At(Qt);if(Qn&&Sr&&Zr){var Fn=new ce(Qn),Bn=new E.ImageAtlas(Sr,Zr);for(var _n in yr){var Cn=yr[_n];Cn instanceof E.SymbolBucket?(ae(Cn.layers,this.zoom,ke),E.performSymbolLayout(Cn,Qn,Fn.positions,Sr,Bn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Cn.hasPattern&&(Cn instanceof E.LineBucket||Cn instanceof E.FillBucket||Cn instanceof E.FillExtrusionBucket)&&(ae(Cn.layers,this.zoom,ke),Cn.addFeatures(Wr,this.tileID.canonical,Bn.patternPositions))}this.status="done",At(null,{buckets:E.values(yr).filter(function(pr){return!pr.isEmpty()}),featureIndex:Et,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fn.image,imageAtlas:Bn,glyphMap:this.returnDependencies?Qn:null,iconMap:this.returnDependencies?Sr:null,glyphPositions:this.returnDependencies?Fn.positions:null})}}Wt.length?at.send("getImages",{icons:Wt,source:this.source,tileID:this.tileID,type:"patterns"},function(Fn,Bn){Qt||(Qt=Fn,Zr=Bn,dn.call(nn))}):Zr={},dn.call(this)};var J=function(Me,Te,ke,at){this.actor=Me,this.layerIndex=Te,this.availableImages=ke,this.loadVectorData=at||He,this.loading={},this.loaded={}};J.prototype.loadTile=function(Me,Te){var ke=this,at=Me.uid;this.loading||(this.loading={});var At=!!(Me&&Me.request&&Me.request.collectResourceTiming)&&new E.RequestPerformance(Me.request),nn=this.loading[at]=new ye(Me);nn.abort=this.loadVectorData(Me,function(cn,Et){if(delete ke.loading[at],cn||!Et)return nn.status="done",ke.loaded[at]=nn,Te(cn);var Qt=Et.rawData,Qn={};Et.expires&&(Qn.expires=Et.expires),Et.cacheControl&&(Qn.cacheControl=Et.cacheControl);var Sr={};if(At){var Zr=At.finish();Zr&&(Sr.resourceTiming=JSON.parse(JSON.stringify(Zr)))}nn.vectorTile=Et.vectorTile,nn.parse(Et.vectorTile,ke.layerIndex,ke.availableImages,ke.actor,function(yr,Wr){if(yr||!Wr)return Te(yr);Te(null,E.extend({rawTileData:Qt.slice(0)},Wr,Qn,Sr))}),ke.loaded=ke.loaded||{},ke.loaded[at]=nn})},J.prototype.reloadTile=function(Me,Te){var ke=this,at=this.loaded,At=Me.uid,nn=this;if(at&&at[At]){var cn=at[At];cn.showCollisionBoxes=Me.showCollisionBoxes;var Et=function(Qt,Qn){var Sr=cn.reloadCallback;Sr&&(delete cn.reloadCallback,cn.parse(cn.vectorTile,nn.layerIndex,ke.availableImages,nn.actor,Sr)),Te(Qt,Qn)};cn.status==="parsing"?cn.reloadCallback=Et:cn.status==="done"&&(cn.vectorTile?cn.parse(cn.vectorTile,this.layerIndex,this.availableImages,this.actor,Et):Et())}},J.prototype.abortTile=function(Me,Te){var ke=this.loading,at=Me.uid;ke&&ke[at]&&ke[at].abort&&(ke[at].abort(),delete ke[at]),Te()},J.prototype.removeTile=function(Me,Te){var ke=this.loaded,at=Me.uid;ke&&ke[at]&&delete ke[at],Te()};var me=E.window.ImageBitmap,Oe=function(){this.loaded={}};function Q(Me,Te){if(Me.length!==0){le(Me[0],Te);for(var ke=1;ke<Me.length;ke++)le(Me[ke],!Te)}}function le(Me,Te){for(var ke=0,at=0,At=0,nn=Me.length,cn=nn-1;At<nn;cn=At++){var Et=(Me[At][0]-Me[cn][0])*(Me[cn][1]+Me[At][1]),Qt=ke+Et;at+=Math.abs(ke)>=Math.abs(Et)?ke-Qt+Et:Et-Qt+ke,ke=Qt}ke+at>=0!=!!Te&&Me.reverse()}Oe.prototype.loadTile=function(Me,Te){var ke=Me.uid,at=Me.encoding,At=Me.rawImageData,nn=me&&At instanceof me?this.getImageData(At):At,cn=new E.DEMData(ke,nn,at);this.loaded=this.loaded||{},this.loaded[ke]=cn,Te(null,cn)},Oe.prototype.getImageData=function(Me){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Me.width,Me.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Me.width,this.offscreenCanvas.height=Me.height,this.offscreenCanvasContext.drawImage(Me,0,0,Me.width,Me.height);var Te=this.offscreenCanvasContext.getImageData(-1,-1,Me.width+2,Me.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new E.RGBAImage({width:Te.width,height:Te.height},Te.data)},Oe.prototype.removeTile=function(Me){var Te=this.loaded,ke=Me.uid;Te&&Te[ke]&&delete Te[ke]};var ee=E.vectorTile.VectorTileFeature.prototype.toGeoJSON,be=function(Me){this._feature=Me,this.extent=E.EXTENT,this.type=Me.type,this.properties=Me.tags,"id"in Me&&!isNaN(Me.id)&&(this.id=parseInt(Me.id,10))};be.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Me=[],Te=0,ke=this._feature.geometry;Te<ke.length;Te+=1){var at=ke[Te];Me.push([new E.Point$1(at[0],at[1])])}return Me}for(var At=[],nn=0,cn=this._feature.geometry;nn<cn.length;nn+=1){for(var Et=[],Qt=0,Qn=cn[nn];Qt<Qn.length;Qt+=1){var Sr=Qn[Qt];Et.push(new E.Point$1(Sr[0],Sr[1]))}At.push(Et)}return At},be.prototype.toGeoJSON=function(Me,Te,ke){return ee.call(this,Me,Te,ke)};var et=function(Me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=E.EXTENT,this.length=Me.length,this._features=Me};et.prototype.feature=function(Me){return new be(this._features[Me])};var tt=E.vectorTile.VectorTileFeature,wt=gt;function gt(Me,Te){this.options=Te||{},this.features=Me,this.length=Me.length}function ft(Me,Te){this.id=typeof Me.id=="number"?Me.id:void 0,this.type=Me.type,this.rawGeometry=Me.type===1?[Me.geometry]:Me.geometry,this.properties=Me.tags,this.extent=Te||4096}gt.prototype.feature=function(Me){return new ft(this.features[Me],this.options.extent)},ft.prototype.loadGeometry=function(){var Me=this.rawGeometry;this.geometry=[];for(var Te=0;Te<Me.length;Te++){for(var ke=Me[Te],at=[],At=0;At<ke.length;At++)at.push(new E.Point$1(ke[At][0],ke[At][1]));this.geometry.push(at)}return this.geometry},ft.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Me=this.geometry,Te=1/0,ke=-1/0,at=1/0,At=-1/0,nn=0;nn<Me.length;nn++)for(var cn=Me[nn],Et=0;Et<cn.length;Et++){var Qt=cn[Et];Te=Math.min(Te,Qt.x),ke=Math.max(ke,Qt.x),at=Math.min(at,Qt.y),At=Math.max(At,Qt.y)}return[Te,at,ke,At]},ft.prototype.toGeoJSON=tt.prototype.toGeoJSON;var Pe=Be,Ae=wt;function Be(Me){var Te=new E.pbf;return function(ke,at){for(var At in ke.layers)at.writeMessage(3,Ze,ke.layers[At])}(Me,Te),Te.finish()}function Ze(Me,Te){var ke;Te.writeVarintField(15,Me.version||1),Te.writeStringField(1,Me.name||""),Te.writeVarintField(5,Me.extent||4096);var at={keys:[],values:[],keycache:{},valuecache:{}};for(ke=0;ke<Me.length;ke++)at.feature=Me.feature(ke),Te.writeMessage(2,ut,at);var At=at.keys;for(ke=0;ke<At.length;ke++)Te.writeStringField(3,At[ke]);var nn=at.values;for(ke=0;ke<nn.length;ke++)Te.writeMessage(4,nt,nn[ke])}function ut(Me,Te){var ke=Me.feature;ke.id!==void 0&&Te.writeVarintField(1,ke.id),Te.writeMessage(2,tn,Me),Te.writeVarintField(3,ke.type),Te.writeMessage(4,Re,ke)}function tn(Me,Te){var ke=Me.feature,at=Me.keys,At=Me.values,nn=Me.keycache,cn=Me.valuecache;for(var Et in ke.properties){var Qt=nn[Et];Qt===void 0&&(at.push(Et),nn[Et]=Qt=at.length-1),Te.writeVarint(Qt);var Qn=ke.properties[Et],Sr=typeof Qn;Sr!=="string"&&Sr!=="boolean"&&Sr!=="number"&&(Qn=JSON.stringify(Qn));var Zr=Sr+":"+Qn,yr=cn[Zr];yr===void 0&&(At.push(Qn),cn[Zr]=yr=At.length-1),Te.writeVarint(yr)}}function De(Me,Te){return(Te<<3)+(7&Me)}function mt(Me){return Me<<1^Me>>31}function Re(Me,Te){for(var ke=Me.loadGeometry(),at=Me.type,At=0,nn=0,cn=ke.length,Et=0;Et<cn;Et++){var Qt=ke[Et],Qn=1;at===1&&(Qn=Qt.length),Te.writeVarint(De(1,Qn));for(var Sr=at===3?Qt.length-1:Qt.length,Zr=0;Zr<Sr;Zr++){Zr===1&&at!==1&&Te.writeVarint(De(2,Sr-1));var yr=Qt[Zr].x-At,Wr=Qt[Zr].y-nn;Te.writeVarint(mt(yr)),Te.writeVarint(mt(Wr)),At+=yr,nn+=Wr}at===3&&Te.writeVarint(De(7,1))}}function nt(Me,Te){var ke=typeof Me;ke==="string"?Te.writeStringField(1,Me):ke==="boolean"?Te.writeBooleanField(7,Me):ke==="number"&&(Me%1!=0?Te.writeDoubleField(3,Me):Me<0?Te.writeSVarintField(6,Me):Te.writeVarintField(5,Me))}function qe(Me,Te,ke,at){Ge(Me,ke,at),Ge(Te,2*ke,2*at),Ge(Te,2*ke+1,2*at+1)}function Ge(Me,Te,ke){var at=Me[Te];Me[Te]=Me[ke],Me[ke]=at}function Dt(Me,Te,ke,at){var At=Me-ke,nn=Te-at;return At*At+nn*nn}Pe.fromVectorTileJs=Be,Pe.fromGeojsonVt=function(Me,Te){Te=Te||{};var ke={};for(var at in Me)ke[at]=new wt(Me[at].features,Te),ke[at].name=at,ke[at].version=Te.version,ke[at].extent=Te.extent;return Be({layers:ke})},Pe.GeoJSONWrapper=Ae;var yt=function(Me){return Me[0]},Le=function(Me){return Me[1]},Zt=function(Me,Te,ke,at,At){Te===void 0&&(Te=yt),ke===void 0&&(ke=Le),at===void 0&&(at=64),At===void 0&&(At=Float64Array),this.nodeSize=at,this.points=Me;for(var nn=Me.length<65536?Uint16Array:Uint32Array,cn=this.ids=new nn(Me.length),Et=this.coords=new At(2*Me.length),Qt=0;Qt<Me.length;Qt++)cn[Qt]=Qt,Et[2*Qt]=Te(Me[Qt]),Et[2*Qt+1]=ke(Me[Qt]);(function Qn(Sr,Zr,yr,Wr,Ei,yi){if(!(Ei-Wr<=yr)){var wr=Wr+Ei>>1;(function Ai(pi,_i,Bo,Si,Ci,ho){for(;Ci>Si;){if(Ci-Si>600){var go=Ci-Si+1,jo=Bo-Si+1,Ke=Math.log(go),dt=.5*Math.exp(2*Ke/3),Wt=.5*Math.sqrt(Ke*dt*(go-dt)/go)*(jo-go/2<0?-1:1);Ai(pi,_i,Bo,Math.max(Si,Math.floor(Bo-jo*dt/go+Wt)),Math.min(Ci,Math.floor(Bo+(go-jo)*dt/go+Wt)),ho)}var dn=_i[2*Bo+ho],Fn=Si,Bn=Ci;for(qe(pi,_i,Si,Bo),_i[2*Ci+ho]>dn&&qe(pi,_i,Si,Ci);Fn<Bn;){for(qe(pi,_i,Fn,Bn),Fn++,Bn--;_i[2*Fn+ho]<dn;)Fn++;for(;_i[2*Bn+ho]>dn;)Bn--}_i[2*Si+ho]===dn?qe(pi,_i,Si,Bn):qe(pi,_i,++Bn,Ci),Bn<=Bo&&(Si=Bn+1),Bo<=Bn&&(Ci=Bn-1)}})(Sr,Zr,wr,Wr,Ei,yi%2),Qn(Sr,Zr,yr,Wr,wr-1,yi+1),Qn(Sr,Zr,yr,wr+1,Ei,yi+1)}})(cn,Et,at,0,cn.length-1,0)};Zt.prototype.range=function(Me,Te,ke,at){return function(At,nn,cn,Et,Qt,Qn,Sr){for(var Zr,yr,Wr=[0,At.length-1,0],Ei=[];Wr.length;){var yi=Wr.pop(),wr=Wr.pop(),Ai=Wr.pop();if(wr-Ai<=Sr)for(var pi=Ai;pi<=wr;pi++)yr=nn[2*pi+1],(Zr=nn[2*pi])>=cn&&Zr<=Qt&&yr>=Et&&yr<=Qn&&Ei.push(At[pi]);else{var _i=Math.floor((Ai+wr)/2);yr=nn[2*_i+1],(Zr=nn[2*_i])>=cn&&Zr<=Qt&&yr>=Et&&yr<=Qn&&Ei.push(At[_i]);var Bo=(yi+1)%2;(yi===0?cn<=Zr:Et<=yr)&&(Wr.push(Ai),Wr.push(_i-1),Wr.push(Bo)),(yi===0?Qt>=Zr:Qn>=yr)&&(Wr.push(_i+1),Wr.push(wr),Wr.push(Bo))}}return Ei}(this.ids,this.coords,Me,Te,ke,at,this.nodeSize)},Zt.prototype.within=function(Me,Te,ke){return function(at,At,nn,cn,Et,Qt){for(var Qn=[0,at.length-1,0],Sr=[],Zr=Et*Et;Qn.length;){var yr=Qn.pop(),Wr=Qn.pop(),Ei=Qn.pop();if(Wr-Ei<=Qt)for(var yi=Ei;yi<=Wr;yi++)Dt(At[2*yi],At[2*yi+1],nn,cn)<=Zr&&Sr.push(at[yi]);else{var wr=Math.floor((Ei+Wr)/2),Ai=At[2*wr],pi=At[2*wr+1];Dt(Ai,pi,nn,cn)<=Zr&&Sr.push(at[wr]);var _i=(yr+1)%2;(yr===0?nn-Et<=Ai:cn-Et<=pi)&&(Qn.push(Ei),Qn.push(wr-1),Qn.push(_i)),(yr===0?nn+Et>=Ai:cn+Et>=pi)&&(Qn.push(wr+1),Qn.push(Wr),Qn.push(_i))}}return Sr}(this.ids,this.coords,Me,Te,ke,this.nodeSize)};var yn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Me){return Me}},Tn=function(Me){this.options=an(Object.create(yn),Me),this.trees=new Array(this.options.maxZoom+1)};function lr(Me,Te,ke,at,At){return{x:Me,y:Te,zoom:1/0,id:ke,parentId:-1,numPoints:at,properties:At}}function or(Me,Te){var ke=Me.geometry.coordinates,at=ke[1];return{x:hn(ke[0]),y:Xn(at),zoom:1/0,index:Te,parentId:-1}}function Lt(Me){return{type:"Feature",id:Me.id,properties:en(Me),geometry:{type:"Point",coordinates:[(at=Me.x,360*(at-.5)),(Te=Me.y,ke=(180-360*Te)*Math.PI/180,360*Math.atan(Math.exp(ke))/Math.PI-90)]}};var Te,ke,at}function en(Me){var Te=Me.numPoints,ke=Te>=1e4?Math.round(Te/1e3)+"k":Te>=1e3?Math.round(Te/100)/10+"k":Te;return an(an({},Me.properties),{cluster:!0,cluster_id:Me.id,point_count:Te,point_count_abbreviated:ke})}function hn(Me){return Me/360+.5}function Xn(Me){var Te=Math.sin(Me*Math.PI/180),ke=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return ke<0?0:ke>1?1:ke}function an(Me,Te){for(var ke in Te)Me[ke]=Te[ke];return Me}function Pt(Me){return Me.x}function zt(Me){return Me.y}function je(Me,Te,ke,at,At,nn){var cn=At-ke,Et=nn-at;if(cn!==0||Et!==0){var Qt=((Me-ke)*cn+(Te-at)*Et)/(cn*cn+Et*Et);Qt>1?(ke=At,at=nn):Qt>0&&(ke+=cn*Qt,at+=Et*Qt)}return(cn=Me-ke)*cn+(Et=Te-at)*Et}function rt(Me,Te,ke,at){var At={id:Me===void 0?null:Me,type:Te,geometry:ke,tags:at,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(nn){var cn=nn.geometry,Et=nn.type;if(Et==="Point"||Et==="MultiPoint"||Et==="LineString")Ut(nn,cn);else if(Et==="Polygon"||Et==="MultiLineString")for(var Qt=0;Qt<cn.length;Qt++)Ut(nn,cn[Qt]);else if(Et==="MultiPolygon")for(Qt=0;Qt<cn.length;Qt++)for(var Qn=0;Qn<cn[Qt].length;Qn++)Ut(nn,cn[Qt][Qn])}(At),At}function Ut(Me,Te){for(var ke=0;ke<Te.length;ke+=3)Me.minX=Math.min(Me.minX,Te[ke]),Me.minY=Math.min(Me.minY,Te[ke+1]),Me.maxX=Math.max(Me.maxX,Te[ke]),Me.maxY=Math.max(Me.maxY,Te[ke+1])}function U(Me,Te,ke,at){if(Te.geometry){var At=Te.geometry.coordinates,nn=Te.geometry.type,cn=Math.pow(ke.tolerance/((1<<ke.maxZoom)*ke.extent),2),Et=[],Qt=Te.id;if(ke.promoteId?Qt=Te.properties[ke.promoteId]:ke.generateId&&(Qt=at||0),nn==="Point")he(At,Et);else if(nn==="MultiPoint")for(var Qn=0;Qn<At.length;Qn++)he(At[Qn],Et);else if(nn==="LineString")ot(At,Et,cn,!1);else if(nn==="MultiLineString"){if(ke.lineMetrics){for(Qn=0;Qn<At.length;Qn++)ot(At[Qn],Et=[],cn,!1),Me.push(rt(Qt,"LineString",Et,Te.properties));return}de(At,Et,cn,!1)}else if(nn==="Polygon")de(At,Et,cn,!0);else{if(nn!=="MultiPolygon"){if(nn==="GeometryCollection"){for(Qn=0;Qn<Te.geometry.geometries.length;Qn++)U(Me,{id:Qt,geometry:Te.geometry.geometries[Qn],properties:Te.properties},ke,at);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qn=0;Qn<At.length;Qn++){var Sr=[];de(At[Qn],Sr,cn,!0),Et.push(Sr)}}Me.push(rt(Qt,nn,Et,Te.properties))}}function he(Me,Te){Te.push(qt(Me[0])),Te.push(ln(Me[1])),Te.push(0)}function ot(Me,Te,ke,at){for(var At,nn,cn=0,Et=0;Et<Me.length;Et++){var Qt=qt(Me[Et][0]),Qn=ln(Me[Et][1]);Te.push(Qt),Te.push(Qn),Te.push(0),Et>0&&(cn+=at?(At*Qn-Qt*nn)/2:Math.sqrt(Math.pow(Qt-At,2)+Math.pow(Qn-nn,2))),At=Qt,nn=Qn}var Sr=Te.length-3;Te[2]=1,function Zr(yr,Wr,Ei,yi){for(var wr,Ai=yi,pi=Ei-Wr>>1,_i=Ei-Wr,Bo=yr[Wr],Si=yr[Wr+1],Ci=yr[Ei],ho=yr[Ei+1],go=Wr+3;go<Ei;go+=3){var jo=je(yr[go],yr[go+1],Bo,Si,Ci,ho);if(jo>Ai)wr=go,Ai=jo;else if(jo===Ai){var Ke=Math.abs(go-pi);Ke<_i&&(wr=go,_i=Ke)}}Ai>yi&&(wr-Wr>3&&Zr(yr,Wr,wr,yi),yr[wr+2]=Ai,Ei-wr>3&&Zr(yr,wr,Ei,yi))}(Te,0,Sr,ke),Te[Sr+2]=1,Te.size=Math.abs(cn),Te.start=0,Te.end=Te.size}function de(Me,Te,ke,at){for(var At=0;At<Me.length;At++){var nn=[];ot(Me[At],nn,ke,at),Te.push(nn)}}function qt(Me){return Me/360+.5}function ln(Me){var Te=Math.sin(Me*Math.PI/180),ke=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return ke<0?0:ke>1?1:ke}function mn(Me,Te,ke,at,At,nn,cn,Et){if(at/=Te,nn>=(ke/=Te)&&cn<at)return Me;if(cn<ke||nn>=at)return null;for(var Qt=[],Qn=0;Qn<Me.length;Qn++){var Sr=Me[Qn],Zr=Sr.geometry,yr=Sr.type,Wr=At===0?Sr.minX:Sr.minY,Ei=At===0?Sr.maxX:Sr.maxY;if(Wr>=ke&&Ei<at)Qt.push(Sr);else if(!(Ei<ke||Wr>=at)){var yi=[];if(yr==="Point"||yr==="MultiPoint")Dn(Zr,yi,ke,at,At);else if(yr==="LineString")Yn(Zr,yi,ke,at,At,!1,Et.lineMetrics);else if(yr==="MultiLineString")pn(Zr,yi,ke,at,At,!1);else if(yr==="Polygon")pn(Zr,yi,ke,at,At,!0);else if(yr==="MultiPolygon")for(var wr=0;wr<Zr.length;wr++){var Ai=[];pn(Zr[wr],Ai,ke,at,At,!0),Ai.length&&yi.push(Ai)}if(yi.length){if(Et.lineMetrics&&yr==="LineString"){for(wr=0;wr<yi.length;wr++)Qt.push(rt(Sr.id,yr,yi[wr],Sr.tags));continue}yr!=="LineString"&&yr!=="MultiLineString"||(yi.length===1?(yr="LineString",yi=yi[0]):yr="MultiLineString"),yr!=="Point"&&yr!=="MultiPoint"||(yr=yi.length===3?"Point":"MultiPoint"),Qt.push(rt(Sr.id,yr,yi,Sr.tags))}}}return Qt.length?Qt:null}function Dn(Me,Te,ke,at,At){for(var nn=0;nn<Me.length;nn+=3){var cn=Me[nn+At];cn>=ke&&cn<=at&&(Te.push(Me[nn]),Te.push(Me[nn+1]),Te.push(Me[nn+2]))}}function Yn(Me,Te,ke,at,At,nn,cn){for(var Et,Qt,Qn=Kn(Me),Sr=At===0?Nt:An,Zr=Me.start,yr=0;yr<Me.length-3;yr+=3){var Wr=Me[yr],Ei=Me[yr+1],yi=Me[yr+2],wr=Me[yr+3],Ai=Me[yr+4],pi=At===0?Wr:Ei,_i=At===0?wr:Ai,Bo=!1;cn&&(Et=Math.sqrt(Math.pow(Wr-wr,2)+Math.pow(Ei-Ai,2))),pi<ke?_i>ke&&(Qt=Sr(Qn,Wr,Ei,wr,Ai,ke),cn&&(Qn.start=Zr+Et*Qt)):pi>at?_i<at&&(Qt=Sr(Qn,Wr,Ei,wr,Ai,at),cn&&(Qn.start=Zr+Et*Qt)):vt(Qn,Wr,Ei,yi),_i<ke&&pi>=ke&&(Qt=Sr(Qn,Wr,Ei,wr,Ai,ke),Bo=!0),_i>at&&pi<=at&&(Qt=Sr(Qn,Wr,Ei,wr,Ai,at),Bo=!0),!nn&&Bo&&(cn&&(Qn.end=Zr+Et*Qt),Te.push(Qn),Qn=Kn(Me)),cn&&(Zr+=Et)}var Si=Me.length-3;Wr=Me[Si],Ei=Me[Si+1],yi=Me[Si+2],(pi=At===0?Wr:Ei)>=ke&&pi<=at&&vt(Qn,Wr,Ei,yi),Si=Qn.length-3,nn&&Si>=3&&(Qn[Si]!==Qn[0]||Qn[Si+1]!==Qn[1])&&vt(Qn,Qn[0],Qn[1],Qn[2]),Qn.length&&Te.push(Qn)}function Kn(Me){var Te=[];return Te.size=Me.size,Te.start=Me.start,Te.end=Me.end,Te}function pn(Me,Te,ke,at,At,nn){for(var cn=0;cn<Me.length;cn++)Yn(Me[cn],Te,ke,at,At,nn,!1)}function vt(Me,Te,ke,at){Me.push(Te),Me.push(ke),Me.push(at)}function Nt(Me,Te,ke,at,At,nn){var cn=(nn-Te)/(at-Te);return Me.push(nn),Me.push(ke+(At-ke)*cn),Me.push(1),cn}function An(Me,Te,ke,at,At,nn){var cn=(nn-ke)/(At-ke);return Me.push(Te+(at-Te)*cn),Me.push(nn),Me.push(1),cn}function In(Me,Te){for(var ke=[],at=0;at<Me.length;at++){var At,nn=Me[at],cn=nn.type;if(cn==="Point"||cn==="MultiPoint"||cn==="LineString")At=$n(nn.geometry,Te);else if(cn==="MultiLineString"||cn==="Polygon"){At=[];for(var Et=0;Et<nn.geometry.length;Et++)At.push($n(nn.geometry[Et],Te))}else if(cn==="MultiPolygon")for(At=[],Et=0;Et<nn.geometry.length;Et++){for(var Qt=[],Qn=0;Qn<nn.geometry[Et].length;Qn++)Qt.push($n(nn.geometry[Et][Qn],Te));At.push(Qt)}ke.push(rt(nn.id,cn,At,nn.tags))}return ke}function $n(Me,Te){var ke=[];ke.size=Me.size,Me.start!==void 0&&(ke.start=Me.start,ke.end=Me.end);for(var at=0;at<Me.length;at+=3)ke.push(Me[at]+Te,Me[at+1],Me[at+2]);return ke}function pt(Me,Te){if(Me.transformed)return Me;var ke,at,At,nn=1<<Me.z,cn=Me.x,Et=Me.y;for(ke=0;ke<Me.features.length;ke++){var Qt=Me.features[ke],Qn=Qt.geometry,Sr=Qt.type;if(Qt.geometry=[],Sr===1)for(at=0;at<Qn.length;at+=2)Qt.geometry.push(xe(Qn[at],Qn[at+1],Te,nn,cn,Et));else for(at=0;at<Qn.length;at++){var Zr=[];for(At=0;At<Qn[at].length;At+=2)Zr.push(xe(Qn[at][At],Qn[at][At+1],Te,nn,cn,Et));Qt.geometry.push(Zr)}}return Me.transformed=!0,Me}function xe(Me,Te,ke,at,At,nn){return[Math.round(ke*(Me*at-At)),Math.round(ke*(Te*at-nn))]}function Fe(Me,Te,ke,at,At){for(var nn=Te===At.maxZoom?0:At.tolerance/((1<<Te)*At.extent),cn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ke,y:at,z:Te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Et=0;Et<Me.length;Et++){cn.numFeatures++,st(cn,Me[Et],nn,At);var Qt=Me[Et].minX,Qn=Me[Et].minY,Sr=Me[Et].maxX,Zr=Me[Et].maxY;Qt<cn.minX&&(cn.minX=Qt),Qn<cn.minY&&(cn.minY=Qn),Sr>cn.maxX&&(cn.maxX=Sr),Zr>cn.maxY&&(cn.maxY=Zr)}return cn}function st(Me,Te,ke,at){var At=Te.geometry,nn=Te.type,cn=[];if(nn==="Point"||nn==="MultiPoint")for(var Et=0;Et<At.length;Et+=3)cn.push(At[Et]),cn.push(At[Et+1]),Me.numPoints++,Me.numSimplified++;else if(nn==="LineString")It(cn,At,Me,ke,!1,!1);else if(nn==="MultiLineString"||nn==="Polygon")for(Et=0;Et<At.length;Et++)It(cn,At[Et],Me,ke,nn==="Polygon",Et===0);else if(nn==="MultiPolygon")for(var Qt=0;Qt<At.length;Qt++){var Qn=At[Qt];for(Et=0;Et<Qn.length;Et++)It(cn,Qn[Et],Me,ke,!0,Et===0)}if(cn.length){var Sr=Te.tags||null;if(nn==="LineString"&&at.lineMetrics){for(var Zr in Sr={},Te.tags)Sr[Zr]=Te.tags[Zr];Sr.mapbox_clip_start=At.start/At.size,Sr.mapbox_clip_end=At.end/At.size}var yr={geometry:cn,type:nn==="Polygon"||nn==="MultiPolygon"?3:nn==="LineString"||nn==="MultiLineString"?2:1,tags:Sr};Te.id!==null&&(yr.id=Te.id),Me.features.push(yr)}}function It(Me,Te,ke,at,At,nn){var cn=at*at;if(at>0&&Te.size<(At?cn:at))ke.numPoints+=Te.length/3;else{for(var Et=[],Qt=0;Qt<Te.length;Qt+=3)(at===0||Te[Qt+2]>cn)&&(ke.numSimplified++,Et.push(Te[Qt]),Et.push(Te[Qt+1])),ke.numPoints++;At&&function(Qn,Sr){for(var Zr=0,yr=0,Wr=Qn.length,Ei=Wr-2;yr<Wr;Ei=yr,yr+=2)Zr+=(Qn[yr]-Qn[Ei])*(Qn[yr+1]+Qn[Ei+1]);if(Zr>0===Sr)for(yr=0,Wr=Qn.length;yr<Wr/2;yr+=2){var yi=Qn[yr],wr=Qn[yr+1];Qn[yr]=Qn[Wr-2-yr],Qn[yr+1]=Qn[Wr-1-yr],Qn[Wr-2-yr]=yi,Qn[Wr-1-yr]=wr}}(Et,nn),Me.push(Et)}}function Mt(Me,Te){var ke=(Te=this.options=function(At,nn){for(var cn in nn)At[cn]=nn[cn];return At}(Object.create(this.options),Te)).debug;if(ke&&console.time("preprocess data"),Te.maxZoom<0||Te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Te.promoteId&&Te.generateId)throw new Error("promoteId and generateId cannot be used together.");var at=function(At,nn){var cn=[];if(At.type==="FeatureCollection")for(var Et=0;Et<At.features.length;Et++)U(cn,At.features[Et],nn,Et);else U(cn,At.type==="Feature"?At:{geometry:At},nn);return cn}(Me,Te);this.tiles={},this.tileCoords=[],ke&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Te.indexMaxZoom,Te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(at=function(At,nn){var cn=nn.buffer/nn.extent,Et=At,Qt=mn(At,1,-1-cn,cn,0,-1,2,nn),Qn=mn(At,1,1-cn,2+cn,0,-1,2,nn);return(Qt||Qn)&&(Et=mn(At,1,-cn,1+cn,0,-1,2,nn)||[],Qt&&(Et=In(Qt,1).concat(Et)),Qn&&(Et=Et.concat(In(Qn,-1)))),Et}(at,Te)).length&&this.splitTile(at,0,0,0),ke&&(at.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wn(Me,Te,ke){return 32*((1<<Me)*ke+Te)+Me}function rr(Me,Te){var ke=Me.tileID.canonical;if(!this._geoJSONIndex)return Te(null,null);var at=this._geoJSONIndex.getTile(ke.z,ke.x,ke.y);if(!at)return Te(null,null);var At=new et(at.features),nn=Pe(At);nn.byteOffset===0&&nn.byteLength===nn.buffer.byteLength||(nn=new Uint8Array(nn)),Te(null,{vectorTile:At,rawData:nn.buffer})}Tn.prototype.load=function(Me){var Te=this.options,ke=Te.log,at=Te.minZoom,At=Te.maxZoom,nn=Te.nodeSize;ke&&console.time("total time");var cn="prepare "+Me.length+" points";ke&&console.time(cn),this.points=Me;for(var Et=[],Qt=0;Qt<Me.length;Qt++)Me[Qt].geometry&&Et.push(or(Me[Qt],Qt));this.trees[At+1]=new Zt(Et,Pt,zt,nn,Float32Array),ke&&console.timeEnd(cn);for(var Qn=At;Qn>=at;Qn--){var Sr=+Date.now();Et=this._cluster(Et,Qn),this.trees[Qn]=new Zt(Et,Pt,zt,nn,Float32Array),ke&&console.log("z%d: %d clusters in %dms",Qn,Et.length,+Date.now()-Sr)}return ke&&console.timeEnd("total time"),this},Tn.prototype.getClusters=function(Me,Te){var ke=((Me[0]+180)%360+360)%360-180,at=Math.max(-90,Math.min(90,Me[1])),At=Me[2]===180?180:((Me[2]+180)%360+360)%360-180,nn=Math.max(-90,Math.min(90,Me[3]));if(Me[2]-Me[0]>=360)ke=-180,At=180;else if(ke>At){var cn=this.getClusters([ke,at,180,nn],Te),Et=this.getClusters([-180,at,At,nn],Te);return cn.concat(Et)}for(var Qt=this.trees[this._limitZoom(Te)],Qn=[],Sr=0,Zr=Qt.range(hn(ke),Xn(nn),hn(At),Xn(at));Sr<Zr.length;Sr+=1){var yr=Qt.points[Zr[Sr]];Qn.push(yr.numPoints?Lt(yr):this.points[yr.index])}return Qn},Tn.prototype.getChildren=function(Me){var Te=this._getOriginId(Me),ke=this._getOriginZoom(Me),at="No cluster with the specified id.",At=this.trees[ke];if(!At)throw new Error(at);var nn=At.points[Te];if(!nn)throw new Error(at);for(var cn=this.options.radius/(this.options.extent*Math.pow(2,ke-1)),Et=[],Qt=0,Qn=At.within(nn.x,nn.y,cn);Qt<Qn.length;Qt+=1){var Sr=At.points[Qn[Qt]];Sr.parentId===Me&&Et.push(Sr.numPoints?Lt(Sr):this.points[Sr.index])}if(Et.length===0)throw new Error(at);return Et},Tn.prototype.getLeaves=function(Me,Te,ke){var at=[];return this._appendLeaves(at,Me,Te=Te||10,ke=ke||0,0),at},Tn.prototype.getTile=function(Me,Te,ke){var at=this.trees[this._limitZoom(Me)],At=Math.pow(2,Me),nn=this.options,cn=nn.radius/nn.extent,Et=(ke-cn)/At,Qt=(ke+1+cn)/At,Qn={features:[]};return this._addTileFeatures(at.range((Te-cn)/At,Et,(Te+1+cn)/At,Qt),at.points,Te,ke,At,Qn),Te===0&&this._addTileFeatures(at.range(1-cn/At,Et,1,Qt),at.points,At,ke,At,Qn),Te===At-1&&this._addTileFeatures(at.range(0,Et,cn/At,Qt),at.points,-1,ke,At,Qn),Qn.features.length?Qn:null},Tn.prototype.getClusterExpansionZoom=function(Me){for(var Te=this._getOriginZoom(Me)-1;Te<=this.options.maxZoom;){var ke=this.getChildren(Me);if(Te++,ke.length!==1)break;Me=ke[0].properties.cluster_id}return Te},Tn.prototype._appendLeaves=function(Me,Te,ke,at,At){for(var nn=0,cn=this.getChildren(Te);nn<cn.length;nn+=1){var Et=cn[nn],Qt=Et.properties;if(Qt&&Qt.cluster?At+Qt.point_count<=at?At+=Qt.point_count:At=this._appendLeaves(Me,Qt.cluster_id,ke,at,At):At<at?At++:Me.push(Et),Me.length===ke)break}return At},Tn.prototype._addTileFeatures=function(Me,Te,ke,at,At,nn){for(var cn=0,Et=Me;cn<Et.length;cn+=1){var Qt=Te[Et[cn]],Qn=Qt.numPoints,Sr={type:1,geometry:[[Math.round(this.options.extent*(Qt.x*At-ke)),Math.round(this.options.extent*(Qt.y*At-at))]],tags:Qn?en(Qt):this.points[Qt.index].properties},Zr=void 0;Qn?Zr=Qt.id:this.options.generateId?Zr=Qt.index:this.points[Qt.index].id&&(Zr=this.points[Qt.index].id),Zr!==void 0&&(Sr.id=Zr),nn.features.push(Sr)}},Tn.prototype._limitZoom=function(Me){return Math.max(this.options.minZoom,Math.min(+Me,this.options.maxZoom+1))},Tn.prototype._cluster=function(Me,Te){for(var ke=[],at=this.options,At=at.reduce,nn=at.minPoints,cn=at.radius/(at.extent*Math.pow(2,Te)),Et=0;Et<Me.length;Et++){var Qt=Me[Et];if(!(Qt.zoom<=Te)){Qt.zoom=Te;for(var Qn=this.trees[Te+1],Sr=Qn.within(Qt.x,Qt.y,cn),Zr=Qt.numPoints||1,yr=Zr,Wr=0,Ei=Sr;Wr<Ei.length;Wr+=1){var yi=Qn.points[Ei[Wr]];yi.zoom>Te&&(yr+=yi.numPoints||1)}if(yr>=nn){for(var wr=Qt.x*Zr,Ai=Qt.y*Zr,pi=At&&Zr>1?this._map(Qt,!0):null,_i=(Et<<5)+(Te+1)+this.points.length,Bo=0,Si=Sr;Bo<Si.length;Bo+=1){var Ci=Qn.points[Si[Bo]];if(!(Ci.zoom<=Te)){Ci.zoom=Te;var ho=Ci.numPoints||1;wr+=Ci.x*ho,Ai+=Ci.y*ho,Ci.parentId=_i,At&&(pi||(pi=this._map(Qt,!0)),At(pi,this._map(Ci)))}}Qt.parentId=_i,ke.push(lr(wr/yr,Ai/yr,_i,yr,pi))}else if(ke.push(Qt),yr>1)for(var go=0,jo=Sr;go<jo.length;go+=1){var Ke=Qn.points[jo[go]];Ke.zoom<=Te||(Ke.zoom=Te,ke.push(Ke))}}}return ke},Tn.prototype._getOriginId=function(Me){return Me-this.points.length>>5},Tn.prototype._getOriginZoom=function(Me){return(Me-this.points.length)%32},Tn.prototype._map=function(Me,Te){if(Me.numPoints)return Te?an({},Me.properties):Me.properties;var ke=this.points[Me.index].properties,at=this.options.map(ke);return Te&&at===ke?an({},at):at},Mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mt.prototype.splitTile=function(Me,Te,ke,at,At,nn,cn){for(var Et=[Me,Te,ke,at],Qt=this.options,Qn=Qt.debug;Et.length;){at=Et.pop(),ke=Et.pop(),Te=Et.pop(),Me=Et.pop();var Sr=1<<Te,Zr=wn(Te,ke,at),yr=this.tiles[Zr];if(!yr&&(Qn>1&&console.time("creation"),yr=this.tiles[Zr]=Fe(Me,Te,ke,at,Qt),this.tileCoords.push({z:Te,x:ke,y:at}),Qn)){Qn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Te,ke,at,yr.numFeatures,yr.numPoints,yr.numSimplified),console.timeEnd("creation"));var Wr="z"+Te;this.stats[Wr]=(this.stats[Wr]||0)+1,this.total++}if(yr.source=Me,At){if(Te===Qt.maxZoom||Te===At)continue;var Ei=1<<At-Te;if(ke!==Math.floor(nn/Ei)||at!==Math.floor(cn/Ei))continue}else if(Te===Qt.indexMaxZoom||yr.numPoints<=Qt.indexMaxPoints)continue;if(yr.source=null,Me.length!==0){Qn>1&&console.time("clipping");var yi,wr,Ai,pi,_i,Bo,Si=.5*Qt.buffer/Qt.extent,Ci=.5-Si,ho=.5+Si,go=1+Si;yi=wr=Ai=pi=null,_i=mn(Me,Sr,ke-Si,ke+ho,0,yr.minX,yr.maxX,Qt),Bo=mn(Me,Sr,ke+Ci,ke+go,0,yr.minX,yr.maxX,Qt),Me=null,_i&&(yi=mn(_i,Sr,at-Si,at+ho,1,yr.minY,yr.maxY,Qt),wr=mn(_i,Sr,at+Ci,at+go,1,yr.minY,yr.maxY,Qt),_i=null),Bo&&(Ai=mn(Bo,Sr,at-Si,at+ho,1,yr.minY,yr.maxY,Qt),pi=mn(Bo,Sr,at+Ci,at+go,1,yr.minY,yr.maxY,Qt),Bo=null),Qn>1&&console.timeEnd("clipping"),Et.push(yi||[],Te+1,2*ke,2*at),Et.push(wr||[],Te+1,2*ke,2*at+1),Et.push(Ai||[],Te+1,2*ke+1,2*at),Et.push(pi||[],Te+1,2*ke+1,2*at+1)}}},Mt.prototype.getTile=function(Me,Te,ke){var at=this.options,At=at.extent,nn=at.debug;if(Me<0||Me>24)return null;var cn=1<<Me,Et=wn(Me,Te=(Te%cn+cn)%cn,ke);if(this.tiles[Et])return pt(this.tiles[Et],At);nn>1&&console.log("drilling down to z%d-%d-%d",Me,Te,ke);for(var Qt,Qn=Me,Sr=Te,Zr=ke;!Qt&&Qn>0;)Qn--,Sr=Math.floor(Sr/2),Zr=Math.floor(Zr/2),Qt=this.tiles[wn(Qn,Sr,Zr)];return Qt&&Qt.source?(nn>1&&console.log("found parent tile z%d-%d-%d",Qn,Sr,Zr),nn>1&&console.time("drilling down"),this.splitTile(Qt.source,Qn,Sr,Zr,Me,Te,ke),nn>1&&console.timeEnd("drilling down"),this.tiles[Et]?pt(this.tiles[Et],At):null):null};var Er=function(Me){function Te(ke,at,At,nn){Me.call(this,ke,at,At,rr),nn&&(this.loadGeoJSON=nn)}return Me&&(Te.__proto__=Me),(Te.prototype=Object.create(Me&&Me.prototype)).constructor=Te,Te.prototype.loadData=function(ke,at){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=at,this._pendingLoadDataParams=ke,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Te.prototype._loadData=function(){var ke=this;if(this._pendingCallback&&this._pendingLoadDataParams){var at=this._pendingCallback,At=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var nn=!!(At&&At.request&&At.request.collectResourceTiming)&&new E.RequestPerformance(At.request);this.loadGeoJSON(At,function(cn,Et){if(cn||!Et)return at(cn);if(typeof Et!="object")return at(new Error("Input data given to '"+At.source+"' is not a valid GeoJSON object."));(function yr(Wr,Ei){var yi,wr=Wr&&Wr.type;if(wr==="FeatureCollection")for(yi=0;yi<Wr.features.length;yi++)yr(Wr.features[yi],Ei);else if(wr==="GeometryCollection")for(yi=0;yi<Wr.geometries.length;yi++)yr(Wr.geometries[yi],Ei);else if(wr==="Feature")yr(Wr.geometry,Ei);else if(wr==="Polygon")Q(Wr.coordinates,Ei);else if(wr==="MultiPolygon")for(yi=0;yi<Wr.coordinates.length;yi++)Q(Wr.coordinates[yi],Ei);return Wr})(Et,!0);try{if(At.filter){var Qt=E.createExpression(At.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Qt.result==="error")throw new Error(Qt.value.map(function(yr){return yr.key+": "+yr.message}).join(", "));var Qn=Et.features.filter(function(yr){return Qt.value.evaluate({zoom:0},yr)});Et={type:"FeatureCollection",features:Qn}}ke._geoJSONIndex=At.cluster?new Tn(function(yr){var Wr=yr.superclusterOptions,Ei=yr.clusterProperties;if(!Ei||!Wr)return Wr;for(var yi={},wr={},Ai={accumulated:null,zoom:0},pi={properties:null},_i=Object.keys(Ei),Bo=0,Si=_i;Bo<Si.length;Bo+=1){var Ci=Si[Bo],ho=Ei[Ci],go=ho[0],jo=E.createExpression(ho[1]),Ke=E.createExpression(typeof go=="string"?[go,["accumulated"],["get",Ci]]:go);yi[Ci]=jo.value,wr[Ci]=Ke.value}return Wr.map=function(dt){pi.properties=dt;for(var Wt={},dn=0,Fn=_i;dn<Fn.length;dn+=1){var Bn=Fn[dn];Wt[Bn]=yi[Bn].evaluate(Ai,pi)}return Wt},Wr.reduce=function(dt,Wt){pi.properties=Wt;for(var dn=0,Fn=_i;dn<Fn.length;dn+=1){var Bn=Fn[dn];Ai.accumulated=dt[Bn],dt[Bn]=wr[Bn].evaluate(Ai,pi)}},Wr}(At)).load(Et.features):function(yr,Wr){return new Mt(yr,Wr)}(Et,At.geojsonVtOptions)}catch(yr){return at(yr)}ke.loaded={};var Sr={};if(nn){var Zr=nn.finish();Zr&&(Sr.resourceTiming={},Sr.resourceTiming[At.source]=JSON.parse(JSON.stringify(Zr)))}at(null,Sr)})}},Te.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Te.prototype.reloadTile=function(ke,at){var At=this.loaded;return At&&At[ke.uid]?Me.prototype.reloadTile.call(this,ke,at):this.loadTile(ke,at)},Te.prototype.loadGeoJSON=function(ke,at){if(ke.request)E.getJSON(ke.request,at);else{if(typeof ke.data!="string")return at(new Error("Input data given to '"+ke.source+"' is not a valid GeoJSON object."));try{return at(null,JSON.parse(ke.data))}catch(At){return at(new Error("Input data given to '"+ke.source+"' is not a valid GeoJSON object."))}}},Te.prototype.removeSource=function(ke,at){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),at()},Te.prototype.getClusterExpansionZoom=function(ke,at){try{at(null,this._geoJSONIndex.getClusterExpansionZoom(ke.clusterId))}catch(At){at(At)}},Te.prototype.getClusterChildren=function(ke,at){try{at(null,this._geoJSONIndex.getChildren(ke.clusterId))}catch(At){at(At)}},Te.prototype.getClusterLeaves=function(ke,at){try{at(null,this._geoJSONIndex.getLeaves(ke.clusterId,ke.limit,ke.offset))}catch(At){at(At)}},Te}(J),qn=function(Me){var Te=this;this.self=Me,this.actor=new E.Actor(Me,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:J,geojson:Er},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ke,at){if(Te.workerSourceTypes[ke])throw new Error('Worker source with name "'+ke+'" already registered.');Te.workerSourceTypes[ke]=at},this.self.registerRTLTextPlugin=function(ke){if(E.plugin.isParsed())throw new Error("RTL text plugin already registered.");E.plugin.applyArabicShaping=ke.applyArabicShaping,E.plugin.processBidirectionalText=ke.processBidirectionalText,E.plugin.processStyledBidirectionalText=ke.processStyledBidirectionalText}};return qn.prototype.setReferrer=function(Me,Te){this.referrer=Te},qn.prototype.setImages=function(Me,Te,ke){for(var at in this.availableImages[Me]=Te,this.workerSources[Me]){var At=this.workerSources[Me][at];for(var nn in At)At[nn].availableImages=Te}ke()},qn.prototype.setLayers=function(Me,Te,ke){this.getLayerIndex(Me).replace(Te),ke()},qn.prototype.updateLayers=function(Me,Te,ke){this.getLayerIndex(Me).update(Te.layers,Te.removedIds),ke()},qn.prototype.loadTile=function(Me,Te,ke){this.getWorkerSource(Me,Te.type,Te.source).loadTile(Te,ke)},qn.prototype.loadDEMTile=function(Me,Te,ke){this.getDEMWorkerSource(Me,Te.source).loadTile(Te,ke)},qn.prototype.reloadTile=function(Me,Te,ke){this.getWorkerSource(Me,Te.type,Te.source).reloadTile(Te,ke)},qn.prototype.abortTile=function(Me,Te,ke){this.getWorkerSource(Me,Te.type,Te.source).abortTile(Te,ke)},qn.prototype.removeTile=function(Me,Te,ke){this.getWorkerSource(Me,Te.type,Te.source).removeTile(Te,ke)},qn.prototype.removeDEMTile=function(Me,Te){this.getDEMWorkerSource(Me,Te.source).removeTile(Te)},qn.prototype.removeSource=function(Me,Te,ke){if(this.workerSources[Me]&&this.workerSources[Me][Te.type]&&this.workerSources[Me][Te.type][Te.source]){var at=this.workerSources[Me][Te.type][Te.source];delete this.workerSources[Me][Te.type][Te.source],at.removeSource!==void 0?at.removeSource(Te,ke):ke()}},qn.prototype.loadWorkerSource=function(Me,Te,ke){try{this.self.importScripts(Te.url),ke()}catch(at){ke(at.toString())}},qn.prototype.syncRTLPluginState=function(Me,Te,ke){try{E.plugin.setState(Te);var at=E.plugin.getPluginURL();if(E.plugin.isLoaded()&&!E.plugin.isParsed()&&at!=null){this.self.importScripts(at);var At=E.plugin.isParsed();ke(At?void 0:new Error("RTL Text Plugin failed to import scripts from "+at),At)}}catch(nn){ke(nn.toString())}},qn.prototype.getAvailableImages=function(Me){var Te=this.availableImages[Me];return Te||(Te=[]),Te},qn.prototype.getLayerIndex=function(Me){var Te=this.layerIndexes[Me];return Te||(Te=this.layerIndexes[Me]=new se),Te},qn.prototype.getWorkerSource=function(Me,Te,ke){var at=this;return this.workerSources[Me]||(this.workerSources[Me]={}),this.workerSources[Me][Te]||(this.workerSources[Me][Te]={}),this.workerSources[Me][Te][ke]||(this.workerSources[Me][Te][ke]=new this.workerSourceTypes[Te]({send:function(At,nn,cn){at.actor.send(At,nn,cn,Me)}},this.getLayerIndex(Me),this.getAvailableImages(Me))),this.workerSources[Me][Te][ke]},qn.prototype.getDEMWorkerSource=function(Me,Te){return this.demWorkerSources[Me]||(this.demWorkerSources[Me]={}),this.demWorkerSources[Me][Te]||(this.demWorkerSources[Me][Te]=new Oe),this.demWorkerSources[Me][Te]},qn.prototype.enforceCacheSizeLimit=function(Me,Te){E.enforceCacheSizeLimit(Te)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new qn(self)),qn}),G(["./shared"],function(E){"use strict";var fe=E.createCommonjsModule(function(_){function S(k){return!x(k)}function x(k){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var K,ge,Ve=new Blob([""],{type:"text/javascript"}),ct=URL.createObjectURL(Ve);try{ge=new Worker(ct),K=!0}catch(jt){K=!1}return ge&&ge.terminate(),URL.revokeObjectURL(ct),K}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var K=document.createElement("canvas");K.width=K.height=1;var ge=K.getContext("2d");if(!ge)return!1;var Ve=ge.getImageData(0,0,1,1);return Ve&&Ve.width===K.width}()?(O[Z=k&&k.failIfMajorPerformanceCaveat]===void 0&&(O[Z]=function(K){var ge=function(ct){var jt=document.createElement("canvas"),Vt=Object.create(S.webGLContextAttributes);return Vt.failIfMajorPerformanceCaveat=ct,jt.probablySupportsContext?jt.probablySupportsContext("webgl",Vt)||jt.probablySupportsContext("experimental-webgl",Vt):jt.supportsContext?jt.supportsContext("webgl",Vt)||jt.supportsContext("experimental-webgl",Vt):jt.getContext("webgl",Vt)||jt.getContext("experimental-webgl",Vt)}(K);if(!ge)return!1;var Ve=ge.createShader(ge.VERTEX_SHADER);return!(!Ve||ge.isContextLost())&&(ge.shaderSource(Ve,"void main() {}"),ge.compileShader(Ve),ge.getShaderParameter(Ve,ge.COMPILE_STATUS)===!0)}(Z)),O[Z]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Z}_.exports?_.exports=S:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=S,window.mapboxgl.notSupportedReason=x);var O={};S.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),$={create:function(_,S,x){var O=E.window.document.createElement(_);return S!==void 0&&(O.className=S),x&&x.appendChild(O),O},createNS:function(_,S){return E.window.document.createElementNS(_,S)}},se=E.window.document&&E.window.document.documentElement.style;function ce(_){if(!se)return _[0];for(var S=0;S<_.length;S++)if(_[S]in se)return _[S];return _[0]}var ye,ae=ce(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);$.disableDrag=function(){se&&ae&&(ye=se[ae],se[ae]="none")},$.enableDrag=function(){se&&ae&&(se[ae]=ye)};var He=ce(["transform","WebkitTransform"]);$.setTransform=function(_,S){_.style[He]=S};var J=!1;try{var me=Object.defineProperty({},"passive",{get:function(){J=!0}});E.window.addEventListener("test",me,me),E.window.removeEventListener("test",me,me)}catch(_){J=!1}$.addEventListener=function(_,S,x,O){O===void 0&&(O={}),_.addEventListener(S,x,"passive"in O&&J?O:O.capture)},$.removeEventListener=function(_,S,x,O){O===void 0&&(O={}),_.removeEventListener(S,x,"passive"in O&&J?O:O.capture)};var Oe=function(_){_.preventDefault(),_.stopPropagation(),E.window.removeEventListener("click",Oe,!0)};function Q(_){var S=_.userImage;return!!(S&&S.render&&S.render())&&(_.data.replace(new Uint8Array(S.data.buffer)),!0)}$.suppressClick=function(){E.window.addEventListener("click",Oe,!0),E.window.setTimeout(function(){E.window.removeEventListener("click",Oe,!0)},0)},$.mousePos=function(_,S){var x=_.getBoundingClientRect();return new E.Point(S.clientX-x.left-_.clientLeft,S.clientY-x.top-_.clientTop)},$.touchPos=function(_,S){for(var x=_.getBoundingClientRect(),O=[],k=0;k<S.length;k++)O.push(new E.Point(S[k].clientX-x.left-_.clientLeft,S[k].clientY-x.top-_.clientTop));return O},$.mouseButton=function(_){return E.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&E.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button},$.remove=function(_){_.parentNode&&_.parentNode.removeChild(_)};var le=function(_){function S(){_.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new E.RGBAImage({width:1,height:1}),this.dirty=!0}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.isLoaded=function(){return this.loaded},S.prototype.setLoaded=function(x){if(this.loaded!==x&&(this.loaded=x,x)){for(var O=0,k=this.requestors;O<k.length;O+=1){var Z=k[O];this._notify(Z.ids,Z.callback)}this.requestors=[]}},S.prototype.getImage=function(x){return this.images[x]},S.prototype.addImage=function(x,O){this._validate(x,O)&&(this.images[x]=O)},S.prototype._validate=function(x,O){var k=!0;return this._validateStretch(O.stretchX,O.data&&O.data.width)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchX" value'))),k=!1),this._validateStretch(O.stretchY,O.data&&O.data.height)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchY" value'))),k=!1),this._validateContent(O.content,O)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "content" value'))),k=!1),k},S.prototype._validateStretch=function(x,O){if(!x)return!0;for(var k=0,Z=0,K=x;Z<K.length;Z+=1){var ge=K[Z];if(ge[0]<k||ge[1]<ge[0]||O<ge[1])return!1;k=ge[1]}return!0},S.prototype._validateContent=function(x,O){return!(x&&(x.length!==4||x[0]<0||O.data.width<x[0]||x[1]<0||O.data.height<x[1]||x[2]<0||O.data.width<x[2]||x[3]<0||O.data.height<x[3]||x[2]<x[0]||x[3]<x[1]))},S.prototype.updateImage=function(x,O){O.version=this.images[x].version+1,this.images[x]=O,this.updatedImages[x]=!0},S.prototype.removeImage=function(x){var O=this.images[x];delete this.images[x],delete this.patterns[x],O.userImage&&O.userImage.onRemove&&O.userImage.onRemove()},S.prototype.listImages=function(){return Object.keys(this.images)},S.prototype.getImages=function(x,O){var k=!0;if(!this.isLoaded())for(var Z=0,K=x;Z<K.length;Z+=1)this.images[K[Z]]||(k=!1);this.isLoaded()||k?this._notify(x,O):this.requestors.push({ids:x,callback:O})},S.prototype._notify=function(x,O){for(var k={},Z=0,K=x;Z<K.length;Z+=1){var ge=K[Z];this.images[ge]||this.fire(new E.Event("styleimagemissing",{id:ge}));var Ve=this.images[ge];Ve?k[ge]={data:Ve.data.clone(),pixelRatio:Ve.pixelRatio,sdf:Ve.sdf,version:Ve.version,stretchX:Ve.stretchX,stretchY:Ve.stretchY,content:Ve.content,hasRenderCallback:!!(Ve.userImage&&Ve.userImage.render)}:E.warnOnce('Image "'+ge+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}O(null,k)},S.prototype.getPixelSize=function(){var x=this.atlasImage;return{width:x.width,height:x.height}},S.prototype.getPattern=function(x){var O=this.patterns[x],k=this.getImage(x);if(!k)return null;if(O&&O.position.version===k.version)return O.position;if(O)O.position.version=k.version;else{var Z={w:k.data.width+2,h:k.data.height+2,x:0,y:0},K=new E.ImagePosition(Z,k);this.patterns[x]={bin:Z,position:K}}return this._updatePatternAtlas(),this.patterns[x].position},S.prototype.bind=function(x){var O=x.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new E.Texture(x,this.atlasImage,O.RGBA),this.atlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE)},S.prototype._updatePatternAtlas=function(){var x=[];for(var O in this.patterns)x.push(this.patterns[O].bin);var k=E.potpack(x),Z=k.w,K=k.h,ge=this.atlasImage;for(var Ve in ge.resize({width:Z||1,height:K||1}),this.patterns){var ct=this.patterns[Ve].bin,jt=ct.x+1,Vt=ct.y+1,Xt=this.images[Ve].data,En=Xt.width,gn=Xt.height;E.RGBAImage.copy(Xt,ge,{x:0,y:0},{x:jt,y:Vt},{width:En,height:gn}),E.RGBAImage.copy(Xt,ge,{x:0,y:gn-1},{x:jt,y:Vt-1},{width:En,height:1}),E.RGBAImage.copy(Xt,ge,{x:0,y:0},{x:jt,y:Vt+gn},{width:En,height:1}),E.RGBAImage.copy(Xt,ge,{x:En-1,y:0},{x:jt-1,y:Vt},{width:1,height:gn}),E.RGBAImage.copy(Xt,ge,{x:0,y:0},{x:jt+En,y:Vt},{width:1,height:gn})}this.dirty=!0},S.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},S.prototype.dispatchRenderCallbacks=function(x){for(var O=0,k=x;O<k.length;O+=1){var Z=k[O];if(!this.callbackDispatchedThisFrame[Z]){this.callbackDispatchedThisFrame[Z]=!0;var K=this.images[Z];Q(K)&&this.updateImage(Z,K)}}},S}(E.Evented),ee=tt,be=tt,et=1e20;function tt(_,S,x,O,k,Z){this.fontSize=_||24,this.buffer=S===void 0?3:S,this.cutoff=O||.25,this.fontFamily=k||"sans-serif",this.fontWeight=Z||"normal",this.radius=x||8;var K=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=K,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(K*K),this.gridInner=new Float64Array(K*K),this.f=new Float64Array(K),this.d=new Float64Array(K),this.z=new Float64Array(K+1),this.v=new Int16Array(K),this.middle=Math.round(K/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function wt(_,S,x,O,k,Z,K){for(var ge=0;ge<S;ge++){for(var Ve=0;Ve<x;Ve++)O[Ve]=_[Ve*S+ge];for(gt(O,k,Z,K,x),Ve=0;Ve<x;Ve++)_[Ve*S+ge]=k[Ve]}for(Ve=0;Ve<x;Ve++){for(ge=0;ge<S;ge++)O[ge]=_[Ve*S+ge];for(gt(O,k,Z,K,S),ge=0;ge<S;ge++)_[Ve*S+ge]=Math.sqrt(k[ge])}}function gt(_,S,x,O,k){x[0]=0,O[0]=-et,O[1]=+et;for(var Z=1,K=0;Z<k;Z++){for(var ge=(_[Z]+Z*Z-(_[x[K]]+x[K]*x[K]))/(2*Z-2*x[K]);ge<=O[K];)K--,ge=(_[Z]+Z*Z-(_[x[K]]+x[K]*x[K]))/(2*Z-2*x[K]);x[++K]=Z,O[K]=ge,O[K+1]=+et}for(Z=0,K=0;Z<k;Z++){for(;O[K+1]<Z;)K++;S[Z]=(Z-x[K])*(Z-x[K])+_[x[K]]}}tt.prototype.draw=function(_){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(_,this.buffer,this.middle);for(var S=this.ctx.getImageData(0,0,this.size,this.size),x=new Uint8ClampedArray(this.size*this.size),O=0;O<this.size*this.size;O++){var k=S.data[4*O+3]/255;this.gridOuter[O]=k===1?0:k===0?et:Math.pow(Math.max(0,.5-k),2),this.gridInner[O]=k===1?et:k===0?0:Math.pow(Math.max(0,k-.5),2)}for(wt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),wt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),O=0;O<this.size*this.size;O++)x[O]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[O]-this.gridInner[O])/this.radius+this.cutoff))));return x},ee.default=be;var ft=function(_,S){this.requestManager=_,this.localIdeographFontFamily=S,this.entries={}};ft.prototype.setURL=function(_){this.url=_},ft.prototype.getGlyphs=function(_,S){var x=this,O=[];for(var k in _)for(var Z=0,K=_[k];Z<K.length;Z+=1)O.push({stack:k,id:K[Z]});E.asyncAll(O,function(ge,Ve){var ct=ge.stack,jt=ge.id,Vt=x.entries[ct];Vt||(Vt=x.entries[ct]={glyphs:{},requests:{},ranges:{}});var Xt=Vt.glyphs[jt];if(Xt===void 0){if(Xt=x._tinySDF(Vt,ct,jt))return Vt.glyphs[jt]=Xt,void Ve(null,{stack:ct,id:jt,glyph:Xt});var En=Math.floor(jt/256);if(256*En>65535)Ve(new Error("glyphs > 65535 not supported"));else if(Vt.ranges[En])Ve(null,{stack:ct,id:jt,glyph:Xt});else{var gn=Vt.requests[En];gn||(gn=Vt.requests[En]=[],ft.loadGlyphRange(ct,En,x.url,x.requestManager,function(kn,un){if(un){for(var zn in un)x._doesCharSupportLocalGlyph(+zn)||(Vt.glyphs[+zn]=un[+zn]);Vt.ranges[En]=!0}for(var tr=0,gr=gn;tr<gr.length;tr+=1)(0,gr[tr])(kn,un);delete Vt.requests[En]})),gn.push(function(kn,un){kn?Ve(kn):un&&Ve(null,{stack:ct,id:jt,glyph:un[jt]||null})})}}else Ve(null,{stack:ct,id:jt,glyph:Xt})},function(ge,Ve){if(ge)S(ge);else if(Ve){for(var ct={},jt=0,Vt=Ve;jt<Vt.length;jt+=1){var Xt=Vt[jt],En=Xt.stack,gn=Xt.id,kn=Xt.glyph;(ct[En]||(ct[En]={}))[gn]=kn&&{id:kn.id,bitmap:kn.bitmap.clone(),metrics:kn.metrics}}S(null,ct)}})},ft.prototype._doesCharSupportLocalGlyph=function(_){return!!this.localIdeographFontFamily&&(E.isChar["CJK Unified Ideographs"](_)||E.isChar["Hangul Syllables"](_)||E.isChar.Hiragana(_)||E.isChar.Katakana(_))},ft.prototype._tinySDF=function(_,S,x){var O=this.localIdeographFontFamily;if(O&&this._doesCharSupportLocalGlyph(x)){var k=_.tinySDF;if(!k){var Z="400";/bold/i.test(S)?Z="900":/medium/i.test(S)?Z="500":/light/i.test(S)&&(Z="200"),k=_.tinySDF=new ft.TinySDF(24,3,8,.25,O,Z)}return{id:x,bitmap:new E.AlphaImage({width:30,height:30},k.draw(String.fromCharCode(x))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ft.loadGlyphRange=function(_,S,x,O,k){var Z=256*S,K=Z+255,ge=O.transformRequest(O.normalizeGlyphsURL(x).replace("{fontstack}",_).replace("{range}",Z+"-"+K),E.ResourceType.Glyphs);E.getArrayBuffer(ge,function(Ve,ct){if(Ve)k(Ve);else if(ct){for(var jt={},Vt=0,Xt=E.parseGlyphPBF(ct);Vt<Xt.length;Vt+=1){var En=Xt[Vt];jt[En.id]=En}k(null,jt)}})},ft.TinySDF=ee;var Pe=function(){this.specification=E.styleSpec.light.position};Pe.prototype.possiblyEvaluate=function(_,S){return E.sphericalToCartesian(_.expression.evaluate(S))},Pe.prototype.interpolate=function(_,S,x){return{x:E.number(_.x,S.x,x),y:E.number(_.y,S.y,x),z:E.number(_.z,S.z,x)}};var Ae=new E.Properties({anchor:new E.DataConstantProperty(E.styleSpec.light.anchor),position:new Pe,color:new E.DataConstantProperty(E.styleSpec.light.color),intensity:new E.DataConstantProperty(E.styleSpec.light.intensity)}),Be=function(_){function S(x){_.call(this),this._transitionable=new E.Transitionable(Ae),this.setLight(x),this._transitioning=this._transitionable.untransitioned()}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getLight=function(){return this._transitionable.serialize()},S.prototype.setLight=function(x,O){if(O===void 0&&(O={}),!this._validate(E.validateLight,x,O))for(var k in x){var Z=x[k];E.endsWith(k,"-transition")?this._transitionable.setTransition(k.slice(0,-11),Z):this._transitionable.setValue(k,Z)}},S.prototype.updateTransitions=function(x){this._transitioning=this._transitionable.transitioned(x,this._transitioning)},S.prototype.hasTransition=function(){return this._transitioning.hasTransition()},S.prototype.recalculate=function(x){this.properties=this._transitioning.possiblyEvaluate(x)},S.prototype._validate=function(x,O,k){return(!k||k.validate!==!1)&&E.emitValidationErrors(this,x.call(E.validateStyle,E.extend({value:O,style:{glyphs:!0,sprite:!0},styleSpec:E.styleSpec})))},S}(E.Evented),Ze=function(_,S){this.width=_,this.height=S,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ze.prototype.getDash=function(_,S){var x=_.join(",")+String(S);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(_,S)),this.dashEntry[x]},Ze.prototype.getDashRanges=function(_,S,x){var O=[],k=_.length%2==1?-_[_.length-1]*x:0,Z=_[0]*x,K=!0;O.push({left:k,right:Z,isDash:K,zeroLength:_[0]===0});for(var ge=_[0],Ve=1;Ve<_.length;Ve++){var ct=_[Ve];O.push({left:k=ge*x,right:Z=(ge+=ct)*x,isDash:K=!K,zeroLength:ct===0})}return O},Ze.prototype.addRoundDash=function(_,S,x){for(var O=S/2,k=-x;k<=x;k++)for(var Z=this.width*(this.nextRow+x+k),K=0,ge=_[K],Ve=0;Ve<this.width;Ve++){Ve/ge.right>1&&(ge=_[++K]);var ct=Math.abs(Ve-ge.left),jt=Math.abs(Ve-ge.right),Vt=Math.min(ct,jt),Xt=void 0,En=k/x*(O+1);if(ge.isDash){var gn=O-Math.abs(En);Xt=Math.sqrt(Vt*Vt+gn*gn)}else Xt=O-Math.sqrt(Vt*Vt+En*En);this.data[Z+Ve]=Math.max(0,Math.min(255,Xt+128))}},Ze.prototype.addRegularDash=function(_){for(var S=_.length-1;S>=0;--S){var x=_[S],O=_[S+1];x.zeroLength?_.splice(S,1):O&&O.isDash===x.isDash&&(O.left=x.left,_.splice(S,1))}var k=_[0],Z=_[_.length-1];k.isDash===Z.isDash&&(k.left=Z.left-this.width,Z.right=k.right+this.width);for(var K=this.width*this.nextRow,ge=0,Ve=_[ge],ct=0;ct<this.width;ct++){ct/Ve.right>1&&(Ve=_[++ge]);var jt=Math.abs(ct-Ve.left),Vt=Math.abs(ct-Ve.right),Xt=Math.min(jt,Vt);this.data[K+ct]=Math.max(0,Math.min(255,(Ve.isDash?Xt:-Xt)+128))}},Ze.prototype.addDash=function(_,S){var x=S?7:0,O=2*x+1;if(this.nextRow+O>this.height)return E.warnOnce("LineAtlas out of space"),null;for(var k=0,Z=0;Z<_.length;Z++)k+=_[Z];if(k!==0){var K=this.width/k,ge=this.getDashRanges(_,this.width,K);S?this.addRoundDash(ge,K,x):this.addRegularDash(ge)}var Ve={y:(this.nextRow+x+.5)/this.height,height:2*x/this.height,width:k};return this.nextRow+=O,this.dirty=!0,Ve},Ze.prototype.bind=function(_){var S=_.gl;this.texture?(S.bindTexture(S.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,S.texSubImage2D(S.TEXTURE_2D,0,0,0,this.width,this.height,S.ALPHA,S.UNSIGNED_BYTE,this.data))):(this.texture=S.createTexture(),S.bindTexture(S.TEXTURE_2D,this.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR),S.texImage2D(S.TEXTURE_2D,0,S.ALPHA,this.width,this.height,0,S.ALPHA,S.UNSIGNED_BYTE,this.data))};var ut=function _(S,x){this.workerPool=S,this.actors=[],this.currentActor=0,this.id=E.uniqueId();for(var O=this.workerPool.acquire(this.id),k=0;k<O.length;k++){var Z=new _.Actor(O[k],x,this.id);Z.name="Worker "+k,this.actors.push(Z)}};function tn(_,S,x){var O=function(k,Z){if(k)return x(k);if(Z){var K=E.pick(E.extend(Z,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Z.vector_layers&&(K.vectorLayers=Z.vector_layers,K.vectorLayerIds=K.vectorLayers.map(function(ge){return ge.id})),K.tiles=S.canonicalizeTileset(K,_.url),x(null,K)}};return _.url?E.getJSON(S.transformRequest(S.normalizeSourceURL(_.url),E.ResourceType.Source),O):E.browser.frame(function(){return O(null,_)})}ut.prototype.broadcast=function(_,S,x){E.asyncAll(this.actors,function(O,k){O.send(_,S,k)},x=x||function(){})},ut.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ut.prototype.remove=function(){this.actors.forEach(function(_){_.remove()}),this.actors=[],this.workerPool.release(this.id)},ut.Actor=E.Actor;var De=function(_,S,x){this.bounds=E.LngLatBounds.convert(this.validateBounds(_)),this.minzoom=S||0,this.maxzoom=x||24};De.prototype.validateBounds=function(_){return Array.isArray(_)&&_.length===4?[Math.max(-180,_[0]),Math.max(-90,_[1]),Math.min(180,_[2]),Math.min(90,_[3])]:[-180,-90,180,90]},De.prototype.contains=function(_){var S=Math.pow(2,_.z),x=Math.floor(E.mercatorXfromLng(this.bounds.getWest())*S),O=Math.floor(E.mercatorYfromLat(this.bounds.getNorth())*S),k=Math.ceil(E.mercatorXfromLng(this.bounds.getEast())*S),Z=Math.ceil(E.mercatorYfromLat(this.bounds.getSouth())*S);return _.x>=x&&_.x<k&&_.y>=O&&_.y<Z};var mt=function(_){function S(x,O,k,Z){if(_.call(this),this.id=x,this.dispatcher=k,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,E.extend(this,E.pick(O,["url","scheme","tileSize","promoteId"])),this._options=E.extend({type:"vector"},O),this._collectResourceTiming=O.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Z)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=tn(this._options,this.map._requestManager,function(O,k){x._tileJSONRequest=null,x._loaded=!0,O?x.fire(new E.ErrorEvent(O)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new De(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles,x.map._requestManager._customAccessToken),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken,x.map._requestManager._customAccessToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setSourceProperty=function(x){this._tileJSONRequest&&this._tileJSONRequest.cancel(),x(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},S.prototype.setTiles=function(x){var O=this;return this.setSourceProperty(function(){O._options.tiles=x}),this},S.prototype.setUrl=function(x){var O=this;return this.setSourceProperty(function(){O.url=x,O._options.url=x}),this},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.loadTile=function(x,O){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme)),Z={request:this.map._requestManager.transformRequest(k,E.ResourceType.Tile),uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,tileSize:this.tileSize*x.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function K(ge,Ve){return delete x.request,x.aborted?O(null):ge&&ge.status!==404?O(ge):(Ve&&Ve.resourceTiming&&(x.resourceTiming=Ve.resourceTiming),this.map._refreshExpiredTiles&&Ve&&x.setExpiryData(Ve),x.loadVectorData(Ve,this.map.painter),E.cacheEntryPossiblyAdded(this.dispatcher),O(null),void(x.reloadCallback&&(this.loadTile(x,x.reloadCallback),x.reloadCallback=null)))}Z.request.collectResourceTiming=this._collectResourceTiming,x.actor&&x.state!=="expired"?x.state==="loading"?x.reloadCallback=O:x.request=x.actor.send("reloadTile",Z,K.bind(this)):(x.actor=this.dispatcher.getActor(),x.request=x.actor.send("loadTile",Z,K.bind(this)))},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.actor&&x.actor.send("abortTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.unloadTile=function(x){x.unloadVectorData(),x.actor&&x.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.hasTransition=function(){return!1},S}(E.Evented),Re=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.dispatcher=k,this.setEventedParent(Z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=E.extend({type:"raster"},O),E.extend(this,E.pick(O,["url","scheme","tileSize"]))}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=tn(this._options,this.map._requestManager,function(O,k){x._tileJSONRequest=null,x._loaded=!0,O?x.fire(new E.ErrorEvent(O)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new De(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.loadTile=function(x,O){var k=this,Z=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);x.request=E.getImage(this.map._requestManager.transformRequest(Z,E.ResourceType.Tile),function(K,ge){if(delete x.request,x.aborted)x.state="unloaded",O(null);else if(K)x.state="errored",O(K);else if(ge){k.map._refreshExpiredTiles&&x.setExpiryData(ge),delete ge.cacheControl,delete ge.expires;var Ve=k.map.painter.context,ct=Ve.gl;x.texture=k.map.painter.getTileTexture(ge.width),x.texture?x.texture.update(ge,{useMipmap:!0}):(x.texture=new E.Texture(Ve,ge,ct.RGBA,{useMipmap:!0}),x.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE,ct.LINEAR_MIPMAP_NEAREST),Ve.extTextureFilterAnisotropic&&ct.texParameterf(ct.TEXTURE_2D,Ve.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ve.extTextureFilterAnisotropicMax)),x.state="loaded",E.cacheEntryPossiblyAdded(k.dispatcher),O(null)}})},S.prototype.abortTile=function(x,O){x.request&&(x.request.cancel(),delete x.request),O()},S.prototype.unloadTile=function(x,O){x.texture&&this.map.painter.saveTileTexture(x.texture),O()},S.prototype.hasTransition=function(){return!1},S}(E.Evented),nt=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),this.type="raster-dem",this.maxzoom=22,this._options=E.extend({type:"raster-dem"},O),this.encoding=O.encoding||"mapbox"}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},S.prototype.loadTile=function(x,O){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Z(K,ge){K&&(x.state="errored",O(K)),ge&&(x.dem=ge,x.needsHillshadePrepare=!0,x.state="loaded",O(null))}x.request=E.getImage(this.map._requestManager.transformRequest(k,E.ResourceType.Tile),function(K,ge){if(delete x.request,x.aborted)x.state="unloaded",O(null);else if(K)x.state="errored",O(K);else if(ge){this.map._refreshExpiredTiles&&x.setExpiryData(ge),delete ge.cacheControl,delete ge.expires;var Ve=E.window.ImageBitmap&&ge instanceof E.window.ImageBitmap&&E.offscreenCanvasSupported()?ge:E.browser.getImageData(ge,1),ct={uid:x.uid,coord:x.tileID,source:this.id,rawImageData:Ve,encoding:this.encoding};x.actor&&x.state!=="expired"||(x.actor=this.dispatcher.getActor(),x.actor.send("loadDEMTile",ct,Z.bind(this)))}}.bind(this)),x.neighboringTiles=this._getNeighboringTiles(x.tileID)},S.prototype._getNeighboringTiles=function(x){var O=x.canonical,k=Math.pow(2,O.z),Z=(O.x-1+k)%k,K=O.x===0?x.wrap-1:x.wrap,ge=(O.x+1+k)%k,Ve=O.x+1===k?x.wrap+1:x.wrap,ct={};return ct[new E.OverscaledTileID(x.overscaledZ,K,O.z,Z,O.y).key]={backfilled:!1},ct[new E.OverscaledTileID(x.overscaledZ,Ve,O.z,ge,O.y).key]={backfilled:!1},O.y>0&&(ct[new E.OverscaledTileID(x.overscaledZ,K,O.z,Z,O.y-1).key]={backfilled:!1},ct[new E.OverscaledTileID(x.overscaledZ,x.wrap,O.z,O.x,O.y-1).key]={backfilled:!1},ct[new E.OverscaledTileID(x.overscaledZ,Ve,O.z,ge,O.y-1).key]={backfilled:!1}),O.y+1<k&&(ct[new E.OverscaledTileID(x.overscaledZ,K,O.z,Z,O.y+1).key]={backfilled:!1},ct[new E.OverscaledTileID(x.overscaledZ,x.wrap,O.z,O.x,O.y+1).key]={backfilled:!1},ct[new E.OverscaledTileID(x.overscaledZ,Ve,O.z,ge,O.y+1).key]={backfilled:!1}),ct},S.prototype.unloadTile=function(x){x.demTexture&&this.map.painter.saveTileTexture(x.demTexture),x.fbo&&(x.fbo.destroy(),delete x.fbo),x.dem&&delete x.dem,delete x.neighboringTiles,x.state="unloaded",x.actor&&x.actor.send("removeDEMTile",{uid:x.uid,source:this.id})},S}(Re),qe=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=k.getActor(),this.setEventedParent(Z),this._data=O.data,this._options=E.extend({},O),this._collectResourceTiming=O.collectResourceTiming,this._resourceTiming=[],O.maxzoom!==void 0&&(this.maxzoom=O.maxzoom),O.type&&(this.type=O.type),O.attribution&&(this.attribution=O.attribution),this.promoteId=O.promoteId;var K=E.EXTENT/this.tileSize;this.workerOptions=E.extend({source:this.id,cluster:O.cluster||!1,geojsonVtOptions:{buffer:(O.buffer!==void 0?O.buffer:128)*K,tolerance:(O.tolerance!==void 0?O.tolerance:.375)*K,extent:E.EXTENT,maxZoom:this.maxzoom,lineMetrics:O.lineMetrics||!1,generateId:O.generateId||!1},superclusterOptions:{maxZoom:O.clusterMaxZoom!==void 0?Math.min(O.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,O.clusterMinPoints||2),extent:E.EXTENT,radius:(O.clusterRadius||50)*K,log:!1,generateId:O.generateId||!1},clusterProperties:O.clusterProperties,filter:O.filter},O.workerOptions)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(O){if(O)x.fire(new E.ErrorEvent(O));else{var k={dataType:"source",sourceDataType:"metadata"};x._collectResourceTiming&&x._resourceTiming&&x._resourceTiming.length>0&&(k.resourceTiming=x._resourceTiming,x._resourceTiming=[]),x.fire(new E.Event("data",k))}})},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setData=function(x){var O=this;return this._data=x,this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(k){if(k)O.fire(new E.ErrorEvent(k));else{var Z={dataType:"source",sourceDataType:"content"};O._collectResourceTiming&&O._resourceTiming&&O._resourceTiming.length>0&&(Z.resourceTiming=O._resourceTiming,O._resourceTiming=[]),O.fire(new E.Event("data",Z))}}),this},S.prototype.getClusterExpansionZoom=function(x,O){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:x,source:this.id},O),this},S.prototype.getClusterChildren=function(x,O){return this.actor.send("geojson.getClusterChildren",{clusterId:x,source:this.id},O),this},S.prototype.getClusterLeaves=function(x,O,k,Z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:x,limit:O,offset:k},Z),this},S.prototype._updateWorkerData=function(x){var O=this;this._loaded=!1;var k=E.extend({},this.workerOptions),Z=this._data;typeof Z=="string"?(k.request=this.map._requestManager.transformRequest(E.browser.resolveURL(Z),E.ResourceType.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(Z),this.actor.send(this.type+".loadData",k,function(K,ge){O._removed||ge&&ge.abandoned||(O._loaded=!0,ge&&ge.resourceTiming&&ge.resourceTiming[O.id]&&(O._resourceTiming=ge.resourceTiming[O.id].slice(0)),O.actor.send(O.type+".coalesce",{source:k.source},null),x(K))})},S.prototype.loaded=function(){return this._loaded},S.prototype.loadTile=function(x,O){var k=this,Z=x.actor?"reloadTile":"loadTile";x.actor=this.actor,x.request=this.actor.send(Z,{type:this.type,uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(K,ge){return delete x.request,x.unloadVectorData(),x.aborted?O(null):K?O(K):(x.loadVectorData(ge,k.map.painter,Z==="reloadTile"),O(null))})},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.aborted=!0},S.prototype.unloadTile=function(x){x.unloadVectorData(),this.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id})},S.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},S.prototype.serialize=function(){return E.extend({},this._options,{type:this.type,data:this._data})},S.prototype.hasTransition=function(){return!1},S}(E.Evented),Ge=E.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Dt=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.dispatcher=k,this.coordinates=O.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Z),this.options=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(x,O){var k=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this.url=this.options.url,E.getImage(this.map._requestManager.transformRequest(this.url,E.ResourceType.Image),function(Z,K){k._loaded=!0,Z?k.fire(new E.ErrorEvent(Z)):K&&(k.image=K,x&&(k.coordinates=x),O&&O(),k._finishLoading())})},S.prototype.loaded=function(){return this._loaded},S.prototype.updateImage=function(x){var O=this;return this.image&&x.url?(this.options.url=x.url,this.load(x.coordinates,function(){O.texture=null}),this):this},S.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})))},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setCoordinates=function(x){var O=this;this.coordinates=x;var k=x.map(E.MercatorCoordinate.fromLngLat);this.tileID=function(K){for(var ge=1/0,Ve=1/0,ct=-1/0,jt=-1/0,Vt=0,Xt=K;Vt<Xt.length;Vt+=1){var En=Xt[Vt];ge=Math.min(ge,En.x),Ve=Math.min(Ve,En.y),ct=Math.max(ct,En.x),jt=Math.max(jt,En.y)}var gn=Math.max(ct-ge,jt-Ve),kn=Math.max(0,Math.floor(-Math.log(gn)/Math.LN2)),un=Math.pow(2,kn);return new E.CanonicalTileID(kn,Math.floor((ge+ct)/2*un),Math.floor((Ve+jt)/2*un))}(k),this.minzoom=this.maxzoom=this.tileID.z;var Z=k.map(function(K){return O.tileID.getTilePoint(K)._round()});return this._boundsArray=new E.StructArrayLayout4i8,this._boundsArray.emplaceBack(Z[0].x,Z[0].y,0,0),this._boundsArray.emplaceBack(Z[1].x,Z[1].y,E.EXTENT,0),this._boundsArray.emplaceBack(Z[3].x,Z[3].y,0,E.EXTENT),this._boundsArray.emplaceBack(Z[2].x,Z[2].y,E.EXTENT,E.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})),this},S.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var x=this.map.painter.context,O=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Ge.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new E.Texture(x,this.image,O.RGBA),this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE)),this.tiles){var Z=this.tiles[k];Z.state!=="loaded"&&(Z.state="loaded",Z.texture=this.texture)}}},S.prototype.loadTile=function(x,O){this.tileID&&this.tileID.equals(x.tileID.canonical)?(this.tiles[String(x.tileID.wrap)]=x,x.buckets={},O(null)):(x.state="errored",O(null))},S.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return!1},S}(E.Evented),yt=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),this.roundZoom=!0,this.type="video",this.options=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1;var O=this.options;this.urls=[];for(var k=0,Z=O.urls;k<Z.length;k+=1)this.urls.push(this.map._requestManager.transformRequest(Z[k],E.ResourceType.Source).url);E.getVideo(this.urls,function(K,ge){x._loaded=!0,K?x.fire(new E.ErrorEvent(K)):ge&&(x.video=ge,x.video.loop=!0,x.video.setAttribute("playsinline",""),x.video.addEventListener("playing",function(){x.map.triggerRepaint()}),x.map&&x.video.play(),x._finishLoading())})},S.prototype.pause=function(){this.video&&this.video.pause()},S.prototype.play=function(){this.video&&this.video.play()},S.prototype.seek=function(x){if(this.video){var O=this.video.seekable;x<O.start(0)||x>O.end(0)?this.fire(new E.ErrorEvent(new E.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+O.start(0)+" and "+O.end(0)+"-second mark."))):this.video.currentTime=x}},S.prototype.getVideo=function(){return this.video},S.prototype.onAdd=function(x){this.map||(this.map=x,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},S.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var x=this.map.painter.context,O=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Ge.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE),O.texSubImage2D(O.TEXTURE_2D,0,0,0,O.RGBA,O.UNSIGNED_BYTE,this.video)):(this.texture=new E.Texture(x,this.video,O.RGBA),this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE)),this.tiles){var Z=this.tiles[k];Z.state!=="loaded"&&(Z.state="loaded",Z.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this.video&&!this.video.paused},S}(Dt),Le=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),O.coordinates?Array.isArray(O.coordinates)&&O.coordinates.length===4&&!O.coordinates.some(function(K){return!Array.isArray(K)||K.length!==2||K.some(function(ge){return typeof ge!="number"})})||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "coordinates"'))),O.animate&&typeof O.animate!="boolean"&&this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'optional "animate" property must be a boolean value'))),O.canvas?typeof O.canvas=="string"||O.canvas instanceof E.window.HTMLCanvasElement||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "canvas"'))),this.options=O,this.animate=O.animate===void 0||O.animate}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof E.window.HTMLCanvasElement?this.options.canvas:E.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new E.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},S.prototype.getCanvas=function(){return this.canvas},S.prototype.onAdd=function(x){this.map=x,this.load(),this.canvas&&this.animate&&this.play()},S.prototype.onRemove=function(){this.pause()},S.prototype.prepare=function(){var x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var O=this.map.painter.context,k=O.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=O.createVertexBuffer(this._boundsArray,Ge.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new E.Texture(O,this.canvas,k.RGBA,{premultiply:!0}),this.tiles){var K=this.tiles[Z];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this._playing},S.prototype._hasInvalidDimensions=function(){for(var x=0,O=[this.canvas.width,this.canvas.height];x<O.length;x+=1){var k=O[x];if(isNaN(k)||k<=0)return!0}return!1},S}(Dt),Zt={vector:mt,raster:Re,"raster-dem":nt,geojson:qe,video:yt,image:Dt,canvas:Le};function yn(_,S){var x=E.identity([]);return E.translate(x,x,[1,1,0]),E.scale(x,x,[.5*_.width,.5*_.height,1]),E.multiply(x,x,_.calculatePosMatrix(S.toUnwrapped()))}function Tn(_,S,x,O,k,Z){var K=function(kn,un,zn){if(kn)for(var tr=0,gr=kn;tr<gr.length;tr+=1){var Ir=un[gr[tr]];if(Ir&&Ir.source===zn&&Ir.type==="fill-extrusion")return!0}else for(var Or in un){var zr=un[Or];if(zr.source===zn&&zr.type==="fill-extrusion")return!0}return!1}(k&&k.layers,S,_.id),ge=Z.maxPitchScaleFactor(),Ve=_.tilesIn(O,ge,K);Ve.sort(lr);for(var ct=[],jt=0,Vt=Ve;jt<Vt.length;jt+=1){var Xt=Vt[jt];ct.push({wrappedTileID:Xt.tileID.wrapped().key,queryResults:Xt.tile.queryRenderedFeatures(S,x,_._state,Xt.queryGeometry,Xt.cameraQueryGeometry,Xt.scale,k,Z,ge,yn(_.transform,Xt.tileID))})}var En=function(kn){for(var un={},zn={},tr=0,gr=kn;tr<gr.length;tr+=1){var Ir=gr[tr],Or=Ir.queryResults,zr=Ir.wrappedTileID,ii=zn[zr]=zn[zr]||{};for(var Hi in Or)for(var Fi=Or[Hi],po=ii[Hi]=ii[Hi]||{},Vo=un[Hi]=un[Hi]||[],$r=0,Kt=Fi;$r<Kt.length;$r+=1){var Ya=Kt[$r];po[Ya.featureIndex]||(po[Ya.featureIndex]=!0,Vo.push(Ya))}}return un}(ct);for(var gn in En)En[gn].forEach(function(kn){var un=kn.feature,zn=_.getFeatureState(un.layer["source-layer"],un.id);un.source=un.layer.source,un.layer["source-layer"]&&(un.sourceLayer=un.layer["source-layer"]),un.state=zn});return En}function lr(_,S){var x=_.tileID,O=S.tileID;return x.overscaledZ-O.overscaledZ||x.canonical.y-O.canonical.y||x.wrap-O.wrap||x.canonical.x-O.canonical.x}var or=function(_,S){this.max=_,this.onRemove=S,this.reset()};or.prototype.reset=function(){for(var _ in this.data)for(var S=0,x=this.data[_];S<x.length;S+=1){var O=x[S];O.timeout&&clearTimeout(O.timeout),this.onRemove(O.value)}return this.data={},this.order=[],this},or.prototype.add=function(_,S,x){var O=this,k=_.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);var Z={value:S,timeout:void 0};if(x!==void 0&&(Z.timeout=setTimeout(function(){O.remove(_,Z)},x)),this.data[k].push(Z),this.order.push(k),this.order.length>this.max){var K=this._getAndRemoveByKey(this.order[0]);K&&this.onRemove(K)}return this},or.prototype.has=function(_){return _.wrapped().key in this.data},or.prototype.getAndRemove=function(_){return this.has(_)?this._getAndRemoveByKey(_.wrapped().key):null},or.prototype._getAndRemoveByKey=function(_){var S=this.data[_].shift();return S.timeout&&clearTimeout(S.timeout),this.data[_].length===0&&delete this.data[_],this.order.splice(this.order.indexOf(_),1),S.value},or.prototype.getByKey=function(_){var S=this.data[_];return S?S[0].value:null},or.prototype.get=function(_){return this.has(_)?this.data[_.wrapped().key][0].value:null},or.prototype.remove=function(_,S){if(!this.has(_))return this;var x=_.wrapped().key,O=S===void 0?0:this.data[x].indexOf(S),k=this.data[x][O];return this.data[x].splice(O,1),k.timeout&&clearTimeout(k.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(k.value),this.order.splice(this.order.indexOf(x),1),this},or.prototype.setMaxSize=function(_){for(this.max=_;this.order.length>this.max;){var S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this},or.prototype.filter=function(_){var S=[];for(var x in this.data)for(var O=0,k=this.data[x];O<k.length;O+=1){var Z=k[O];_(Z.value)||S.push(Z)}for(var K=0,ge=S;K<ge.length;K+=1){var Ve=ge[K];this.remove(Ve.value.tileID,Ve)}};var Lt=function(_,S,x){this.context=_;var O=_.gl;this.buffer=O.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),_.bindElementBuffer.set(this.buffer),O.bufferData(O.ELEMENT_ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};Lt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Lt.prototype.updateData=function(_){var S=this.context.gl;this.context.unbindVAO(),this.bind(),S.bufferSubData(S.ELEMENT_ARRAY_BUFFER,0,_.arrayBuffer)},Lt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var en={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},hn=function(_,S,x,O){this.length=S.length,this.attributes=x,this.itemSize=S.bytesPerElement,this.dynamicDraw=O,this.context=_;var k=_.gl;this.buffer=k.createBuffer(),_.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};hn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},hn.prototype.updateData=function(_){var S=this.context.gl;this.bind(),S.bufferSubData(S.ARRAY_BUFFER,0,_.arrayBuffer)},hn.prototype.enableAttributes=function(_,S){for(var x=0;x<this.attributes.length;x++){var O=S.attributes[this.attributes[x].name];O!==void 0&&_.enableVertexAttribArray(O)}},hn.prototype.setVertexAttribPointers=function(_,S,x){for(var O=0;O<this.attributes.length;O++){var k=this.attributes[O],Z=S.attributes[k.name];Z!==void 0&&_.vertexAttribPointer(Z,k.components,_[en[k.type]],!1,this.itemSize,k.offset+this.itemSize*(x||0))}},hn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Xn=function(_){this.gl=_.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Xn.prototype.get=function(){return this.current},Xn.prototype.set=function(_){},Xn.prototype.getDefault=function(){return this.default},Xn.prototype.setDefault=function(){this.set(this.default)};var an=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var O=this.current;(x.r!==O.r||x.g!==O.g||x.b!==O.b||x.a!==O.a||this.dirty)&&(this.gl.clearColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Xn),Pt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 1},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearDepth(x),this.current=x,this.dirty=!1)},S}(Xn),zt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearStencil(x),this.current=x,this.dirty=!1)},S}(Xn),je=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[!0,!0,!0,!0]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||x[3]!==O[3]||this.dirty)&&(this.gl.colorMask(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Xn),rt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthMask(x),this.current=x,this.dirty=!1)},S}(Xn),Ut=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 255},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.stencilMask(x),this.current=x,this.dirty=!1)},S}(Xn),U=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},S.prototype.set=function(x){var O=this.current;(x.func!==O.func||x.ref!==O.ref||x.mask!==O.mask||this.dirty)&&(this.gl.stencilFunc(x.func,x.ref,x.mask),this.current=x,this.dirty=!1)},S}(Xn),he=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.KEEP,x.KEEP,x.KEEP]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||this.dirty)&&(this.gl.stencilOp(x[0],x[1],x[2]),this.current=x,this.dirty=!1)},S}(Xn),ot=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.STENCIL_TEST):O.disable(O.STENCIL_TEST),this.current=x,this.dirty=!1}},S}(Xn),de=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[0,1]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||this.dirty)&&(this.gl.depthRange(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Xn),qt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.DEPTH_TEST):O.disable(O.DEPTH_TEST),this.current=x,this.dirty=!1}},S}(Xn),ln=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.LESS},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthFunc(x),this.current=x,this.dirty=!1)},S}(Xn),mn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.BLEND):O.disable(O.BLEND),this.current=x,this.dirty=!1}},S}(Xn),Dn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.ONE,x.ZERO]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||this.dirty)&&(this.gl.blendFunc(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Xn),Yn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var O=this.current;(x.r!==O.r||x.g!==O.g||x.b!==O.b||x.a!==O.a||this.dirty)&&(this.gl.blendColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Xn),Kn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.FUNC_ADD},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.blendEquation(x),this.current=x,this.dirty=!1)},S}(Xn),pn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.CULL_FACE):O.disable(O.CULL_FACE),this.current=x,this.dirty=!1}},S}(Xn),vt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.BACK},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.cullFace(x),this.current=x,this.dirty=!1)},S}(Xn),Nt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.CCW},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.frontFace(x),this.current=x,this.dirty=!1)},S}(Xn),An=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.useProgram(x),this.current=x,this.dirty=!1)},S}(Xn),In=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.TEXTURE0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.activeTexture(x),this.current=x,this.dirty=!1)},S}(Xn),$n=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[0,0,x.drawingBufferWidth,x.drawingBufferHeight]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||x[3]!==O[3]||this.dirty)&&(this.gl.viewport(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Xn),pt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindFramebuffer(O.FRAMEBUFFER,x),this.current=x,this.dirty=!1}},S}(Xn),xe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindRenderbuffer(O.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}(Xn),Fe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindTexture(O.TEXTURE_2D,x),this.current=x,this.dirty=!1}},S}(Xn),st=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindBuffer(O.ARRAY_BUFFER,x),this.current=x,this.dirty=!1}},S}(Xn),It=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){var O=this.gl;O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,x),this.current=x,this.dirty=!1},S}(Xn),Mt=function(_){function S(x){_.call(this,x),this.vao=x.extVertexArrayObject}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){this.vao&&(x!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(x),this.current=x,this.dirty=!1)},S}(Xn),wn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 4},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_ALIGNMENT,x),this.current=x,this.dirty=!1}},S}(Xn),rr=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),this.current=x,this.dirty=!1}},S}(Xn),Er=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,x),this.current=x,this.dirty=!1}},S}(Xn),qn=function(_){function S(x,O){_.call(this,x),this.context=x,this.parent=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S}(Xn),Me=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.setDirty=function(){this.dirty=!0},S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var O=this.gl;O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,x,0),this.current=x,this.dirty=!1}},S}(qn),Te=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var O=this.gl;O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_ATTACHMENT,O.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}(qn),ke=function(_,S,x,O){this.context=_,this.width=S,this.height=x;var k=this.framebuffer=_.gl.createFramebuffer();this.colorAttachment=new Me(_,k),O&&(this.depthAttachment=new Te(_,k))};ke.prototype.destroy=function(){var _=this.context.gl,S=this.colorAttachment.get();if(S&&_.deleteTexture(S),this.depthAttachment){var x=this.depthAttachment.get();x&&_.deleteRenderbuffer(x)}_.deleteFramebuffer(this.framebuffer)};var at=function(_,S,x){this.func=_,this.mask=S,this.range=x};at.ReadOnly=!1,at.ReadWrite=!0,at.disabled=new at(519,at.ReadOnly,[0,1]);var At=function(_,S,x,O,k,Z){this.test=_,this.ref=S,this.mask=x,this.fail=O,this.depthFail=k,this.pass=Z};At.disabled=new At({func:519,mask:0},0,0,7680,7680,7680);var nn=function(_,S,x){this.blendFunction=_,this.blendColor=S,this.mask=x};nn.disabled=new nn(nn.Replace=[1,0],E.Color.transparent,[!1,!1,!1,!1]),nn.unblended=new nn(nn.Replace,E.Color.transparent,[!0,!0,!0,!0]),nn.alphaBlended=new nn([1,771],E.Color.transparent,[!0,!0,!0,!0]);var cn=function(_,S,x){this.enable=_,this.mode=S,this.frontFace=x};cn.disabled=new cn(!1,1029,2305),cn.backCCW=new cn(!0,1029,2305);var Et=function(_){this.gl=_,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new an(this),this.clearDepth=new Pt(this),this.clearStencil=new zt(this),this.colorMask=new je(this),this.depthMask=new rt(this),this.stencilMask=new Ut(this),this.stencilFunc=new U(this),this.stencilOp=new he(this),this.stencilTest=new ot(this),this.depthRange=new de(this),this.depthTest=new qt(this),this.depthFunc=new ln(this),this.blend=new mn(this),this.blendFunc=new Dn(this),this.blendColor=new Yn(this),this.blendEquation=new Kn(this),this.cullFace=new pn(this),this.cullFaceSide=new vt(this),this.frontFace=new Nt(this),this.program=new An(this),this.activeTexture=new In(this),this.viewport=new $n(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new xe(this),this.bindTexture=new Fe(this),this.bindVertexBuffer=new st(this),this.bindElementBuffer=new It(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Mt(this),this.pixelStoreUnpack=new wn(this),this.pixelStoreUnpackPremultiplyAlpha=new rr(this),this.pixelStoreUnpackFlipY=new Er(this),this.extTextureFilterAnisotropic=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=_.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=_.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(_.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=_.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=_.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=_.getParameter(_.MAX_TEXTURE_SIZE)};Et.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Et.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Et.prototype.createIndexBuffer=function(_,S){return new Lt(this,_,S)},Et.prototype.createVertexBuffer=function(_,S,x){return new hn(this,_,S,x)},Et.prototype.createRenderbuffer=function(_,S,x){var O=this.gl,k=O.createRenderbuffer();return this.bindRenderbuffer.set(k),O.renderbufferStorage(O.RENDERBUFFER,_,S,x),this.bindRenderbuffer.set(null),k},Et.prototype.createFramebuffer=function(_,S,x){return new ke(this,_,S,x)},Et.prototype.clear=function(_){var S=_.color,x=_.depth,O=this.gl,k=0;S&&(k|=O.COLOR_BUFFER_BIT,this.clearColor.set(S),this.colorMask.set([!0,!0,!0,!0])),x!==void 0&&(k|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(x),this.depthMask.set(!0)),O.clear(k)},Et.prototype.setCullFace=function(_){_.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(_.mode),this.frontFace.set(_.frontFace))},Et.prototype.setDepthMode=function(_){_.func!==this.gl.ALWAYS||_.mask?(this.depthTest.set(!0),this.depthFunc.set(_.func),this.depthMask.set(_.mask),this.depthRange.set(_.range)):this.depthTest.set(!1)},Et.prototype.setStencilMode=function(_){_.test.func!==this.gl.ALWAYS||_.mask?(this.stencilTest.set(!0),this.stencilMask.set(_.mask),this.stencilOp.set([_.fail,_.depthFail,_.pass]),this.stencilFunc.set({func:_.test.func,ref:_.ref,mask:_.test.mask})):this.stencilTest.set(!1)},Et.prototype.setColorMode=function(_){E.deepEqual(_.blendFunction,nn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(_.blendFunction),this.blendColor.set(_.blendColor)),this.colorMask.set(_.mask)},Et.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Qt=function(_){function S(x,O,k){var Z=this;_.call(this),this.id=x,this.dispatcher=k,this.on("data",function(K){K.dataType==="source"&&K.sourceDataType==="metadata"&&(Z._sourceLoaded=!0),Z._sourceLoaded&&!Z._paused&&K.dataType==="source"&&K.sourceDataType==="content"&&(Z.reload(),Z.transform&&Z.update(Z.transform))}),this.on("error",function(){Z._sourceErrored=!0}),this._source=function(K,ge,Ve,ct){var jt=new Zt[ge.type](K,ge,Ve,ct);if(jt.id!==K)throw new Error("Expected Source id to be "+K+" instead of "+jt.id);return E.bindAll(["load","abort","unload","serialize","prepare"],jt),jt}(x,O,k,this),this._tiles={},this._cache=new or(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new E.SourceFeatureState}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){this.map=x,this._maxTileCacheSize=x?x._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(x)},S.prototype.onRemove=function(x){this._source&&this._source.onRemove&&this._source.onRemove(x)},S.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var x in this._tiles){var O=this._tiles[x];if(O.state!=="loaded"&&O.state!=="errored")return!1}return!0},S.prototype.getSource=function(){return this._source},S.prototype.pause=function(){this._paused=!0},S.prototype.resume=function(){if(this._paused){var x=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,x&&this.reload(),this.transform&&this.update(this.transform)}},S.prototype._loadTile=function(x,O){return this._source.loadTile(x,O)},S.prototype._unloadTile=function(x){if(this._source.unloadTile)return this._source.unloadTile(x,function(){})},S.prototype._abortTile=function(x){if(this._source.abortTile)return this._source.abortTile(x,function(){})},S.prototype.serialize=function(){return this._source.serialize()},S.prototype.prepare=function(x){for(var O in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var k=this._tiles[O];k.upload(x),k.prepare(this.map.style.imageManager)}},S.prototype.getIds=function(){return E.values(this._tiles).map(function(x){return x.tileID}).sort(Qn).map(function(x){return x.key})},S.prototype.getRenderableIds=function(x){var O=this,k=[];for(var Z in this._tiles)this._isIdRenderable(Z,x)&&k.push(this._tiles[Z]);return x?k.sort(function(K,ge){var Ve=K.tileID,ct=ge.tileID,jt=new E.Point(Ve.canonical.x,Ve.canonical.y)._rotate(O.transform.angle),Vt=new E.Point(ct.canonical.x,ct.canonical.y)._rotate(O.transform.angle);return Ve.overscaledZ-ct.overscaledZ||Vt.y-jt.y||Vt.x-jt.x}).map(function(K){return K.tileID.key}):k.map(function(K){return K.tileID}).sort(Qn).map(function(K){return K.key})},S.prototype.hasRenderableParent=function(x){var O=this.findLoadedParent(x,0);return!!O&&this._isIdRenderable(O.tileID.key)},S.prototype._isIdRenderable=function(x,O){return this._tiles[x]&&this._tiles[x].hasData()&&!this._coveredTiles[x]&&(O||!this._tiles[x].holdingForFade())},S.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var x in this._cache.reset(),this._tiles)this._tiles[x].state!=="errored"&&this._reloadTile(x,"reloading")},S.prototype._reloadTile=function(x,O){var k=this._tiles[x];k&&(k.state!=="loading"&&(k.state=O),this._loadTile(k,this._tileLoaded.bind(this,k,x,O)))},S.prototype._tileLoaded=function(x,O,k,Z){if(Z)return x.state="errored",void(Z.status!==404?this._source.fire(new E.ErrorEvent(Z,{tile:x})):this.update(this.transform));x.timeAdded=E.browser.now(),k==="expired"&&(x.refreshedUponExpiration=!0),this._setTileReloadTimer(O,x),this.getSource().type==="raster-dem"&&x.dem&&this._backfillDEM(x),this._state.initializeTileState(x,this.map?this.map.painter:null),this._source.fire(new E.Event("data",{dataType:"source",tile:x,coord:x.tileID}))},S.prototype._backfillDEM=function(x){for(var O=this.getRenderableIds(),k=0;k<O.length;k++){var Z=O[k];if(x.neighboringTiles&&x.neighboringTiles[Z]){var K=this.getTileByID(Z);ge(x,K),ge(K,x)}}function ge(Ve,ct){Ve.needsHillshadePrepare=!0;var jt=ct.tileID.canonical.x-Ve.tileID.canonical.x,Vt=ct.tileID.canonical.y-Ve.tileID.canonical.y,Xt=Math.pow(2,Ve.tileID.canonical.z),En=ct.tileID.key;jt===0&&Vt===0||Math.abs(Vt)>1||(Math.abs(jt)>1&&(Math.abs(jt+Xt)===1?jt+=Xt:Math.abs(jt-Xt)===1&&(jt-=Xt)),ct.dem&&Ve.dem&&(Ve.dem.backfillBorder(ct.dem,jt,Vt),Ve.neighboringTiles&&Ve.neighboringTiles[En]&&(Ve.neighboringTiles[En].backfilled=!0)))}},S.prototype.getTile=function(x){return this.getTileByID(x.key)},S.prototype.getTileByID=function(x){return this._tiles[x]},S.prototype._retainLoadedChildren=function(x,O,k,Z){for(var K in this._tiles){var ge=this._tiles[K];if(!(Z[K]||!ge.hasData()||ge.tileID.overscaledZ<=O||ge.tileID.overscaledZ>k)){for(var Ve=ge.tileID;ge&&ge.tileID.overscaledZ>O+1;){var ct=ge.tileID.scaledTo(ge.tileID.overscaledZ-1);(ge=this._tiles[ct.key])&&ge.hasData()&&(Ve=ct)}for(var jt=Ve;jt.overscaledZ>O;)if(x[(jt=jt.scaledTo(jt.overscaledZ-1)).key]){Z[Ve.key]=Ve;break}}}},S.prototype.findLoadedParent=function(x,O){if(x.key in this._loadedParentTiles){var k=this._loadedParentTiles[x.key];return k&&k.tileID.overscaledZ>=O?k:null}for(var Z=x.overscaledZ-1;Z>=O;Z--){var K=x.scaledTo(Z),ge=this._getLoadedTile(K);if(ge)return ge}},S.prototype._getLoadedTile=function(x){var O=this._tiles[x.key];return O&&O.hasData()?O:this._cache.getByKey(x.wrapped().key)},S.prototype.updateCacheSize=function(x){var O=Math.ceil(x.width/this._source.tileSize)+1,k=Math.ceil(x.height/this._source.tileSize)+1,Z=Math.floor(O*k*5),K=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Z):Z;this._cache.setMaxSize(K)},S.prototype.handleWrapJump=function(x){var O=Math.round((x-(this._prevLng===void 0?x:this._prevLng))/360);if(this._prevLng=x,O){var k={};for(var Z in this._tiles){var K=this._tiles[Z];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+O),k[K.tileID.key]=K}for(var ge in this._tiles=k,this._timers)clearTimeout(this._timers[ge]),delete this._timers[ge];for(var Ve in this._tiles)this._setTileReloadTimer(Ve,this._tiles[Ve])}},S.prototype.update=function(x){var O=this;if(this.transform=x,this._sourceLoaded&&!this._paused){var k;this.updateCacheSize(x),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?k=x.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ii){return new E.OverscaledTileID(ii.canonical.z,ii.wrap,ii.canonical.z,ii.canonical.x,ii.canonical.y)}):(k=x.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(k=k.filter(function(ii){return O._source.hasTile(ii)}))):k=[];var Z=x.coveringZoomLevel(this._source),K=Math.max(Z-S.maxOverzooming,this._source.minzoom),ge=Math.max(Z+S.maxUnderzooming,this._source.minzoom),Ve=this._updateRetainedTiles(k,Z);if(Sr(this._source.type)){for(var ct={},jt={},Vt=0,Xt=Object.keys(Ve);Vt<Xt.length;Vt+=1){var En=Xt[Vt],gn=Ve[En],kn=this._tiles[En];if(kn&&!(kn.fadeEndTime&&kn.fadeEndTime<=E.browser.now())){var un=this.findLoadedParent(gn,K);un&&(this._addTile(un.tileID),ct[un.tileID.key]=un.tileID),jt[En]=gn}}for(var zn in this._retainLoadedChildren(jt,Z,ge,Ve),ct)Ve[zn]||(this._coveredTiles[zn]=!0,Ve[zn]=ct[zn])}for(var tr in Ve)this._tiles[tr].clearFadeHold();for(var gr=0,Ir=E.keysDifference(this._tiles,Ve);gr<Ir.length;gr+=1){var Or=Ir[gr],zr=this._tiles[Or];zr.hasSymbolBuckets&&!zr.holdingForFade()?zr.setHoldDuration(this.map._fadeDuration):zr.hasSymbolBuckets&&!zr.symbolFadeFinished()||this._removeTile(Or)}this._updateLoadedParentTileCache()}},S.prototype.releaseSymbolFadeTiles=function(){for(var x in this._tiles)this._tiles[x].holdingForFade()&&this._removeTile(x)},S.prototype._updateRetainedTiles=function(x,O){for(var k={},Z={},K=Math.max(O-S.maxOverzooming,this._source.minzoom),ge=Math.max(O+S.maxUnderzooming,this._source.minzoom),Ve={},ct=0,jt=x;ct<jt.length;ct+=1){var Vt=jt[ct],Xt=this._addTile(Vt);k[Vt.key]=Vt,Xt.hasData()||O<this._source.maxzoom&&(Ve[Vt.key]=Vt)}this._retainLoadedChildren(Ve,O,ge,k);for(var En=0,gn=x;En<gn.length;En+=1){var kn=gn[En],un=this._tiles[kn.key];if(!un.hasData()){if(O+1>this._source.maxzoom){var zn=kn.children(this._source.maxzoom)[0],tr=this.getTile(zn);if(tr&&tr.hasData()){k[zn.key]=zn;continue}}else{var gr=kn.children(this._source.maxzoom);if(k[gr[0].key]&&k[gr[1].key]&&k[gr[2].key]&&k[gr[3].key])continue}for(var Ir=un.wasRequested(),Or=kn.overscaledZ-1;Or>=K;--Or){var zr=kn.scaledTo(Or);if(Z[zr.key]||(Z[zr.key]=!0,!(un=this.getTile(zr))&&Ir&&(un=this._addTile(zr)),un&&(k[zr.key]=zr,Ir=un.wasRequested(),un.hasData())))break}}}return k},S.prototype._updateLoadedParentTileCache=function(){for(var x in this._loadedParentTiles={},this._tiles){for(var O=[],k=void 0,Z=this._tiles[x].tileID;Z.overscaledZ>0;){if(Z.key in this._loadedParentTiles){k=this._loadedParentTiles[Z.key];break}O.push(Z.key);var K=Z.scaledTo(Z.overscaledZ-1);if(k=this._getLoadedTile(K))break;Z=K}for(var ge=0,Ve=O;ge<Ve.length;ge+=1)this._loadedParentTiles[Ve[ge]]=k}},S.prototype._addTile=function(x){var O=this._tiles[x.key];if(O)return O;(O=this._cache.getAndRemove(x))&&(this._setTileReloadTimer(x.key,O),O.tileID=x,this._state.initializeTileState(O,this.map?this.map.painter:null),this._cacheTimers[x.key]&&(clearTimeout(this._cacheTimers[x.key]),delete this._cacheTimers[x.key],this._setTileReloadTimer(x.key,O)));var k=!!O;return k||(O=new E.Tile(x,this._source.tileSize*x.overscaleFactor()),this._loadTile(O,this._tileLoaded.bind(this,O,x.key,O.state))),O?(O.uses++,this._tiles[x.key]=O,k||this._source.fire(new E.Event("dataloading",{tile:O,coord:O.tileID,dataType:"source"})),O):null},S.prototype._setTileReloadTimer=function(x,O){var k=this;x in this._timers&&(clearTimeout(this._timers[x]),delete this._timers[x]);var Z=O.getExpiryTimeout();Z&&(this._timers[x]=setTimeout(function(){k._reloadTile(x,"expired"),delete k._timers[x]},Z))},S.prototype._removeTile=function(x){var O=this._tiles[x];O&&(O.uses--,delete this._tiles[x],this._timers[x]&&(clearTimeout(this._timers[x]),delete this._timers[x]),O.uses>0||(O.hasData()&&O.state!=="reloading"?this._cache.add(O.tileID,O,O.getExpiryTimeout()):(O.aborted=!0,this._abortTile(O),this._unloadTile(O))))},S.prototype.clearTiles=function(){for(var x in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(x);this._cache.reset()},S.prototype.tilesIn=function(x,O,k){var Z=this,K=[],ge=this.transform;if(!ge)return K;for(var Ve=k?ge.getCameraQueryGeometry(x):x,ct=x.map(function(Or){return ge.pointCoordinate(Or)}),jt=Ve.map(function(Or){return ge.pointCoordinate(Or)}),Vt=this.getIds(),Xt=1/0,En=1/0,gn=-1/0,kn=-1/0,un=0,zn=jt;un<zn.length;un+=1){var tr=zn[un];Xt=Math.min(Xt,tr.x),En=Math.min(En,tr.y),gn=Math.max(gn,tr.x),kn=Math.max(kn,tr.y)}for(var gr=function(Or){var zr=Z._tiles[Vt[Or]];if(!zr.holdingForFade()){var ii=zr.tileID,Hi=Math.pow(2,ge.zoom-zr.tileID.overscaledZ),Fi=O*zr.queryPadding*E.EXTENT/zr.tileSize/Hi,po=[ii.getTilePoint(new E.MercatorCoordinate(Xt,En)),ii.getTilePoint(new E.MercatorCoordinate(gn,kn))];if(po[0].x-Fi<E.EXTENT&&po[0].y-Fi<E.EXTENT&&po[1].x+Fi>=0&&po[1].y+Fi>=0){var Vo=ct.map(function(Kt){return ii.getTilePoint(Kt)}),$r=jt.map(function(Kt){return ii.getTilePoint(Kt)});K.push({tile:zr,tileID:ii,queryGeometry:Vo,cameraQueryGeometry:$r,scale:Hi})}}},Ir=0;Ir<Vt.length;Ir++)gr(Ir);return K},S.prototype.getVisibleCoordinates=function(x){for(var O=this,k=this.getRenderableIds(x).map(function(Ve){return O._tiles[Ve].tileID}),Z=0,K=k;Z<K.length;Z+=1){var ge=K[Z];ge.posMatrix=this.transform.calculatePosMatrix(ge.toUnwrapped())}return k},S.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Sr(this._source.type))for(var x in this._tiles){var O=this._tiles[x];if(O.fadeEndTime!==void 0&&O.fadeEndTime>=E.browser.now())return!0}return!1},S.prototype.setFeatureState=function(x,O,k){this._state.updateState(x=x||"_geojsonTileLayer",O,k)},S.prototype.removeFeatureState=function(x,O,k){this._state.removeFeatureState(x=x||"_geojsonTileLayer",O,k)},S.prototype.getFeatureState=function(x,O){return this._state.getState(x=x||"_geojsonTileLayer",O)},S.prototype.setDependencies=function(x,O,k){var Z=this._tiles[x];Z&&Z.setDependencies(O,k)},S.prototype.reloadTilesForDependencies=function(x,O){for(var k in this._tiles)this._tiles[k].hasDependency(x,O)&&this._reloadTile(k,"reloading");this._cache.filter(function(Z){return!Z.hasDependency(x,O)})},S}(E.Evented);function Qn(_,S){var x=Math.abs(2*_.wrap)-+(_.wrap<0),O=Math.abs(2*S.wrap)-+(S.wrap<0);return _.overscaledZ-S.overscaledZ||O-x||S.canonical.y-_.canonical.y||S.canonical.x-_.canonical.x}function Sr(_){return _==="raster"||_==="image"||_==="video"}function Zr(){return new E.window.Worker(o0.workerUrl)}Qt.maxOverzooming=10,Qt.maxUnderzooming=3;var yr="mapboxgl_preloaded_worker_pool",Wr=function(){this.active={}};Wr.prototype.acquire=function(_){if(!this.workers)for(this.workers=[];this.workers.length<Wr.workerCount;)this.workers.push(new Zr);return this.active[_]=!0,this.workers.slice()},Wr.prototype.release=function(_){delete this.active[_],this.numActive()===0&&(this.workers.forEach(function(S){S.terminate()}),this.workers=null)},Wr.prototype.isPreloaded=function(){return!!this.active[yr]},Wr.prototype.numActive=function(){return Object.keys(this.active).length};var Ei,yi=Math.floor(E.browser.hardwareConcurrency/2);function wr(){return Ei||(Ei=new Wr),Ei}function Ai(_,S){var x={};for(var O in _)O!=="ref"&&(x[O]=_[O]);return E.refProperties.forEach(function(k){k in S&&(x[k]=S[k])}),x}function pi(_){_=_.slice();for(var S=Object.create(null),x=0;x<_.length;x++)S[_[x].id]=_[x];for(var O=0;O<_.length;O++)"ref"in _[O]&&(_[O]=Ai(_[O],S[_[O].ref]));return _}Wr.workerCount=Math.max(Math.min(yi,6),1);var _i={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Bo(_,S,x){x.push({command:_i.addSource,args:[_,S[_]]})}function Si(_,S,x){S.push({command:_i.removeSource,args:[_]}),x[_]=!0}function Ci(_,S,x,O){Si(_,x,O),Bo(_,S,x)}function ho(_,S,x){var O;for(O in _[x])if(_[x].hasOwnProperty(O)&&O!=="data"&&!E.deepEqual(_[x][O],S[x][O]))return!1;for(O in S[x])if(S[x].hasOwnProperty(O)&&O!=="data"&&!E.deepEqual(_[x][O],S[x][O]))return!1;return!0}function go(_,S,x,O,k,Z){var K;for(K in S=S||{},_=_||{})_.hasOwnProperty(K)&&(E.deepEqual(_[K],S[K])||x.push({command:Z,args:[O,K,S[K],k]}));for(K in S)S.hasOwnProperty(K)&&!_.hasOwnProperty(K)&&(E.deepEqual(_[K],S[K])||x.push({command:Z,args:[O,K,S[K],k]}))}function jo(_){return _.id}function Ke(_,S){return _[S.id]=S,_}var dt=function(_,S){this.reset(_,S)};dt.prototype.reset=function(_,S){this.points=_||[],this._distances=[0];for(var x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(S||0,.5*this.length),this.paddedLength=this.length-2*this.padding},dt.prototype.lerp=function(_){if(this.points.length===1)return this.points[0];_=E.clamp(_,0,1);for(var S=1,x=this._distances[S],O=_*this.paddedLength+this.padding;x<O&&S<this._distances.length;)x=this._distances[++S];var k=S-1,Z=this._distances[k],K=x-Z,ge=K>0?(O-Z)/K:0;return this.points[k].mult(1-ge).add(this.points[S].mult(ge))};var Wt=function(_,S,x){var O=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(_/x),this.yCellCount=Math.ceil(S/x);for(var Z=0;Z<this.xCellCount*this.yCellCount;Z++)O.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=_,this.height=S,this.xScale=this.xCellCount/_,this.yScale=this.yCellCount/S,this.boxUid=0,this.circleUid=0};function dn(_,S,x,O,k){var Z=E.create();return S?(E.scale(Z,Z,[1/k,1/k,1]),x||E.rotateZ(Z,Z,O.angle)):E.multiply(Z,O.labelPlaneMatrix,_),Z}function Fn(_,S,x,O,k){if(S){var Z=E.clone(_);return E.scale(Z,Z,[k,k,1]),x||E.rotateZ(Z,Z,-O.angle),Z}return O.glCoordMatrix}function Bn(_,S){var x=[_.x,_.y,0,1];qr(x,x,S);var O=x[3];return{point:new E.Point(x[0]/O,x[1]/O),signedDistanceFromCamera:O}}function _n(_,S){return .5+_/S*.5}function Cn(_,S){var x=_[0]/_[3],O=_[1]/_[3];return x>=-S[0]&&x<=S[0]&&O>=-S[1]&&O<=S[1]}function pr(_,S,x,O,k,Z,K,ge){var Ve=O?_.textSizeData:_.iconSizeData,ct=E.evaluateSizeForZoom(Ve,x.transform.zoom),jt=[256/x.width*2+1,256/x.height*2+1],Vt=O?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Vt.clear();for(var Xt=_.lineVertexArray,En=O?_.text.placedSymbolArray:_.icon.placedSymbolArray,gn=x.transform.width/x.transform.height,kn=!1,un=0;un<En.length;un++){var zn=En.get(un);if(zn.hidden||zn.writingMode===E.WritingMode.vertical&&!kn)zi(zn.numGlyphs,Vt);else{kn=!1;var tr=[zn.anchorX,zn.anchorY,0,1];if(E.transformMat4(tr,tr,S),Cn(tr,jt)){var gr=_n(x.transform.cameraToCenterDistance,tr[3]),Ir=E.evaluateSizeForFeature(Ve,ct,zn),Or=K?Ir/gr:Ir*gr,zr=new E.Point(zn.anchorX,zn.anchorY),ii=Bn(zr,k).point,Hi={},Fi=Wi(zn,Or,!1,ge,S,k,Z,_.glyphOffsetArray,Xt,Vt,ii,zr,Hi,gn);kn=Fi.useVertical,(Fi.notEnoughRoom||kn||Fi.needsFlipping&&Wi(zn,Or,!0,ge,S,k,Z,_.glyphOffsetArray,Xt,Vt,ii,zr,Hi,gn).notEnoughRoom)&&zi(zn.numGlyphs,Vt)}else zi(zn.numGlyphs,Vt)}}O?_.text.dynamicLayoutVertexBuffer.updateData(Vt):_.icon.dynamicLayoutVertexBuffer.updateData(Vt)}function hr(_,S,x,O,k,Z,K,ge,Ve,ct,jt){var Vt=ge.glyphStartIndex+ge.numGlyphs,Xt=ge.lineStartIndex,En=ge.lineStartIndex+ge.lineLength,gn=S.getoffsetX(ge.glyphStartIndex),kn=S.getoffsetX(Vt-1),un=ri(_*gn,x,O,k,Z,K,ge.segment,Xt,En,Ve,ct,jt);if(!un)return null;var zn=ri(_*kn,x,O,k,Z,K,ge.segment,Xt,En,Ve,ct,jt);return zn?{first:un,last:zn}:null}function ni(_,S,x,O){return _===E.WritingMode.horizontal&&Math.abs(x.y-S.y)>Math.abs(x.x-S.x)*O?{useVertical:!0}:(_===E.WritingMode.vertical?S.y<x.y:S.x>x.x)?{needsFlipping:!0}:null}function Wi(_,S,x,O,k,Z,K,ge,Ve,ct,jt,Vt,Xt,En){var gn,kn=S/24,un=_.lineOffsetX*kn,zn=_.lineOffsetY*kn;if(_.numGlyphs>1){var tr=_.glyphStartIndex+_.numGlyphs,gr=_.lineStartIndex,Ir=_.lineStartIndex+_.lineLength,Or=hr(kn,ge,un,zn,x,jt,Vt,_,Ve,Z,Xt);if(!Or)return{notEnoughRoom:!0};var zr=Bn(Or.first.point,K).point,ii=Bn(Or.last.point,K).point;if(O&&!x){var Hi=ni(_.writingMode,zr,ii,En);if(Hi)return Hi}gn=[Or.first];for(var Fi=_.glyphStartIndex+1;Fi<tr-1;Fi++)gn.push(ri(kn*ge.getoffsetX(Fi),un,zn,x,jt,Vt,_.segment,gr,Ir,Ve,Z,Xt));gn.push(Or.last)}else{if(O&&!x){var po=Bn(Vt,k).point,Vo=_.lineStartIndex+_.segment+1,$r=new E.Point(Ve.getx(Vo),Ve.gety(Vo)),Kt=Bn($r,k),Ya=Kt.signedDistanceFromCamera>0?Kt.point:Qi(Vt,$r,po,1,k),yo=ni(_.writingMode,po,Ya,En);if(yo)return yo}var Qo=ri(kn*ge.getoffsetX(_.glyphStartIndex),un,zn,x,jt,Vt,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,Ve,Z,Xt);if(!Qo)return{notEnoughRoom:!0};gn=[Qo]}for(var Oa=0,fa=gn;Oa<fa.length;Oa+=1){var Go=fa[Oa];E.addDynamicAttributes(ct,Go.point,Go.angle)}return{}}function Qi(_,S,x,O,k){var Z=Bn(_.add(_.sub(S)._unit()),k).point,K=x.sub(Z);return x.add(K._mult(O/K.mag()))}function ri(_,S,x,O,k,Z,K,ge,Ve,ct,jt,Vt){var Xt=O?_-S:_+S,En=Xt>0?1:-1,gn=0;O&&(En*=-1,gn=Math.PI),En<0&&(gn+=Math.PI);for(var kn=En>0?ge+K:ge+K+1,un=k,zn=k,tr=0,gr=0,Ir=Math.abs(Xt),Or=[];tr+gr<=Ir;){if((kn+=En)<ge||kn>=Ve)return null;if(zn=un,Or.push(un),(un=Vt[kn])===void 0){var zr=new E.Point(ct.getx(kn),ct.gety(kn)),ii=Bn(zr,jt);if(ii.signedDistanceFromCamera>0)un=Vt[kn]=ii.point;else{var Hi=kn-En;un=Qi(tr===0?Z:new E.Point(ct.getx(Hi),ct.gety(Hi)),zr,zn,Ir-tr+1,jt)}}tr+=gr,gr=zn.dist(un)}var Fi=(Ir-tr)/gr,po=un.sub(zn),Vo=po.mult(Fi)._add(zn);Vo._add(po._unit()._perp()._mult(x*En));var $r=gn+Math.atan2(un.y-zn.y,un.x-zn.x);return Or.push(Vo),{point:Vo,angle:$r,path:Or}}Wt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Wt.prototype.insert=function(_,S,x,O,k){this._forEachCell(S,x,O,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(_),this.bboxes.push(S),this.bboxes.push(x),this.bboxes.push(O),this.bboxes.push(k)},Wt.prototype.insertCircle=function(_,S,x,O){this._forEachCell(S-O,x-O,S+O,x+O,this._insertCircleCell,this.circleUid++),this.circleKeys.push(_),this.circles.push(S),this.circles.push(x),this.circles.push(O)},Wt.prototype._insertBoxCell=function(_,S,x,O,k,Z){this.boxCells[k].push(Z)},Wt.prototype._insertCircleCell=function(_,S,x,O,k,Z){this.circleCells[k].push(Z)},Wt.prototype._query=function(_,S,x,O,k,Z){if(x<0||_>this.width||O<0||S>this.height)return!k&&[];var K=[];if(_<=0&&S<=0&&this.width<=x&&this.height<=O){if(k)return!0;for(var ge=0;ge<this.boxKeys.length;ge++)K.push({key:this.boxKeys[ge],x1:this.bboxes[4*ge],y1:this.bboxes[4*ge+1],x2:this.bboxes[4*ge+2],y2:this.bboxes[4*ge+3]});for(var Ve=0;Ve<this.circleKeys.length;Ve++){var ct=this.circles[3*Ve],jt=this.circles[3*Ve+1],Vt=this.circles[3*Ve+2];K.push({key:this.circleKeys[Ve],x1:ct-Vt,y1:jt-Vt,x2:ct+Vt,y2:jt+Vt})}return Z?K.filter(Z):K}return this._forEachCell(_,S,x,O,this._queryCell,K,{hitTest:k,seenUids:{box:{},circle:{}}},Z),k?K.length>0:K},Wt.prototype._queryCircle=function(_,S,x,O,k){var Z=_-x,K=_+x,ge=S-x,Ve=S+x;if(K<0||Z>this.width||Ve<0||ge>this.height)return!O&&[];var ct=[];return this._forEachCell(Z,ge,K,Ve,this._queryCellCircle,ct,{hitTest:O,circle:{x:_,y:S,radius:x},seenUids:{box:{},circle:{}}},k),O?ct.length>0:ct},Wt.prototype.query=function(_,S,x,O,k){return this._query(_,S,x,O,!1,k)},Wt.prototype.hitTest=function(_,S,x,O,k){return this._query(_,S,x,O,!0,k)},Wt.prototype.hitTestCircle=function(_,S,x,O){return this._queryCircle(_,S,x,!0,O)},Wt.prototype._queryCell=function(_,S,x,O,k,Z,K,ge){var Ve=K.seenUids,ct=this.boxCells[k];if(ct!==null)for(var jt=this.bboxes,Vt=0,Xt=ct;Vt<Xt.length;Vt+=1){var En=Xt[Vt];if(!Ve.box[En]){Ve.box[En]=!0;var gn=4*En;if(_<=jt[gn+2]&&S<=jt[gn+3]&&x>=jt[gn+0]&&O>=jt[gn+1]&&(!ge||ge(this.boxKeys[En]))){if(K.hitTest)return Z.push(!0),!0;Z.push({key:this.boxKeys[En],x1:jt[gn],y1:jt[gn+1],x2:jt[gn+2],y2:jt[gn+3]})}}}var kn=this.circleCells[k];if(kn!==null)for(var un=this.circles,zn=0,tr=kn;zn<tr.length;zn+=1){var gr=tr[zn];if(!Ve.circle[gr]){Ve.circle[gr]=!0;var Ir=3*gr;if(this._circleAndRectCollide(un[Ir],un[Ir+1],un[Ir+2],_,S,x,O)&&(!ge||ge(this.circleKeys[gr]))){if(K.hitTest)return Z.push(!0),!0;var Or=un[Ir],zr=un[Ir+1],ii=un[Ir+2];Z.push({key:this.circleKeys[gr],x1:Or-ii,y1:zr-ii,x2:Or+ii,y2:zr+ii})}}}},Wt.prototype._queryCellCircle=function(_,S,x,O,k,Z,K,ge){var Ve=K.circle,ct=K.seenUids,jt=this.boxCells[k];if(jt!==null)for(var Vt=this.bboxes,Xt=0,En=jt;Xt<En.length;Xt+=1){var gn=En[Xt];if(!ct.box[gn]){ct.box[gn]=!0;var kn=4*gn;if(this._circleAndRectCollide(Ve.x,Ve.y,Ve.radius,Vt[kn+0],Vt[kn+1],Vt[kn+2],Vt[kn+3])&&(!ge||ge(this.boxKeys[gn])))return Z.push(!0),!0}}var un=this.circleCells[k];if(un!==null)for(var zn=this.circles,tr=0,gr=un;tr<gr.length;tr+=1){var Ir=gr[tr];if(!ct.circle[Ir]){ct.circle[Ir]=!0;var Or=3*Ir;if(this._circlesCollide(zn[Or],zn[Or+1],zn[Or+2],Ve.x,Ve.y,Ve.radius)&&(!ge||ge(this.circleKeys[Ir])))return Z.push(!0),!0}}},Wt.prototype._forEachCell=function(_,S,x,O,k,Z,K,ge){for(var Ve=this._convertToXCellCoord(_),ct=this._convertToYCellCoord(S),jt=this._convertToXCellCoord(x),Vt=this._convertToYCellCoord(O),Xt=Ve;Xt<=jt;Xt++)for(var En=ct;En<=Vt;En++)if(k.call(this,_,S,x,O,this.xCellCount*En+Xt,Z,K,ge))return},Wt.prototype._convertToXCellCoord=function(_){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(_*this.xScale)))},Wt.prototype._convertToYCellCoord=function(_){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(_*this.yScale)))},Wt.prototype._circlesCollide=function(_,S,x,O,k,Z){var K=O-_,ge=k-S,Ve=x+Z;return Ve*Ve>K*K+ge*ge},Wt.prototype._circleAndRectCollide=function(_,S,x,O,k,Z,K){var ge=(Z-O)/2,Ve=Math.abs(_-(O+ge));if(Ve>ge+x)return!1;var ct=(K-k)/2,jt=Math.abs(S-(k+ct));if(jt>ct+x)return!1;if(Ve<=ge||jt<=ct)return!0;var Vt=Ve-ge,Xt=jt-ct;return Vt*Vt+Xt*Xt<=x*x};var Gi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zi(_,S){for(var x=0;x<_;x++){var O=S.length;S.resize(O+4),S.float32.set(Gi,3*O)}}function qr(_,S,x){var O=S[0],k=S[1];return _[0]=x[0]*O+x[4]*k+x[12],_[1]=x[1]*O+x[5]*k+x[13],_[3]=x[3]*O+x[7]*k+x[15],_}var To=function(_,S,x){S===void 0&&(S=new Wt(_.width+200,_.height+200,25)),x===void 0&&(x=new Wt(_.width+200,_.height+200,25)),this.transform=_,this.grid=S,this.ignoredGrid=x,this.pitchfactor=Math.cos(_._pitch)*_.cameraToCenterDistance,this.screenRightBoundary=_.width+100,this.screenBottomBoundary=_.height+100,this.gridRightBoundary=_.width+200,this.gridBottomBoundary=_.height+200};function di(_,S,x){return S*(E.EXTENT/(_.tileSize*Math.pow(2,x-_.tileID.overscaledZ)))}To.prototype.placeCollisionBox=function(_,S,x,O,k){var Z=this.projectAndGetPerspectiveRatio(O,_.anchorPointX,_.anchorPointY),K=x*Z.perspectiveRatio,ge=_.x1*K+Z.point.x,Ve=_.y1*K+Z.point.y,ct=_.x2*K+Z.point.x,jt=_.y2*K+Z.point.y;return!this.isInsideGrid(ge,Ve,ct,jt)||!S&&this.grid.hitTest(ge,Ve,ct,jt,k)?{box:[],offscreen:!1}:{box:[ge,Ve,ct,jt],offscreen:this.isOffscreen(ge,Ve,ct,jt)}},To.prototype.placeCollisionCircles=function(_,S,x,O,k,Z,K,ge,Ve,ct,jt,Vt,Xt){var En=[],gn=new E.Point(S.anchorX,S.anchorY),kn=Bn(gn,Z),un=_n(this.transform.cameraToCenterDistance,kn.signedDistanceFromCamera),zn=(ct?k/un:k*un)/E.ONE_EM,tr=Bn(gn,K).point,gr=hr(zn,O,S.lineOffsetX*zn,S.lineOffsetY*zn,!1,tr,gn,S,x,K,{}),Ir=!1,Or=!1,zr=!0;if(gr){for(var ii=.5*Vt*un+Xt,Hi=new E.Point(-100,-100),Fi=new E.Point(this.screenRightBoundary,this.screenBottomBoundary),po=new dt,Vo=gr.first,$r=gr.last,Kt=[],Ya=Vo.path.length-1;Ya>=1;Ya--)Kt.push(Vo.path[Ya]);for(var yo=1;yo<$r.path.length;yo++)Kt.push($r.path[yo]);var Qo=2.5*ii;if(ge){var Oa=Kt.map(function(Xc){return Bn(Xc,ge)});Kt=Oa.some(function(Xc){return Xc.signedDistanceFromCamera<=0})?[]:Oa.map(function(Xc){return Xc.point})}var fa=[];if(Kt.length>0){for(var Go=Kt[0].clone(),xa=Kt[0].clone(),aa=1;aa<Kt.length;aa++)Go.x=Math.min(Go.x,Kt[aa].x),Go.y=Math.min(Go.y,Kt[aa].y),xa.x=Math.max(xa.x,Kt[aa].x),xa.y=Math.max(xa.y,Kt[aa].y);fa=Go.x>=Hi.x&&xa.x<=Fi.x&&Go.y>=Hi.y&&xa.y<=Fi.y?[Kt]:xa.x<Hi.x||Go.x>Fi.x||xa.y<Hi.y||Go.y>Fi.y?[]:E.clipLine([Kt],Hi.x,Hi.y,Fi.x,Fi.y)}for(var ta=0,Vl=fa;ta<Vl.length;ta+=1){var Ls;po.reset(Vl[ta],.25*ii),Ls=po.length<=.5*ii?1:Math.ceil(po.paddedLength/Qo)+1;for(var lu=0;lu<Ls;lu++){var Us=lu/Math.max(Ls-1,1),ll=po.lerp(Us),Il=ll.x+100,Mc=ll.y+100;En.push(Il,Mc,ii,0);var Hu=Il-ii,Zf=Mc-ii,_c=Il+ii,Xf=Mc+ii;if(zr=zr&&this.isOffscreen(Hu,Zf,_c,Xf),Or=Or||this.isInsideGrid(Hu,Zf,_c,Xf),!_&&this.grid.hitTestCircle(Il,Mc,ii,jt)&&(Ir=!0,!Ve))return{circles:[],offscreen:!1,collisionDetected:Ir}}}}return{circles:!Ve&&Ir||!Or?[]:En,offscreen:zr,collisionDetected:Ir}},To.prototype.queryRenderedSymbols=function(_){if(_.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var S=[],x=1/0,O=1/0,k=-1/0,Z=-1/0,K=0,ge=_;K<ge.length;K+=1){var Ve=ge[K],ct=new E.Point(Ve.x+100,Ve.y+100);x=Math.min(x,ct.x),O=Math.min(O,ct.y),k=Math.max(k,ct.x),Z=Math.max(Z,ct.y),S.push(ct)}for(var jt={},Vt={},Xt=0,En=this.grid.query(x,O,k,Z).concat(this.ignoredGrid.query(x,O,k,Z));Xt<En.length;Xt+=1){var gn=En[Xt],kn=gn.key;if(jt[kn.bucketInstanceId]===void 0&&(jt[kn.bucketInstanceId]={}),!jt[kn.bucketInstanceId][kn.featureIndex]){var un=[new E.Point(gn.x1,gn.y1),new E.Point(gn.x2,gn.y1),new E.Point(gn.x2,gn.y2),new E.Point(gn.x1,gn.y2)];E.polygonIntersectsPolygon(S,un)&&(jt[kn.bucketInstanceId][kn.featureIndex]=!0,Vt[kn.bucketInstanceId]===void 0&&(Vt[kn.bucketInstanceId]=[]),Vt[kn.bucketInstanceId].push(kn.featureIndex))}}return Vt},To.prototype.insertCollisionBox=function(_,S,x,O,k){(S?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:O,collisionGroupID:k},_[0],_[1],_[2],_[3])},To.prototype.insertCollisionCircles=function(_,S,x,O,k){for(var Z=S?this.ignoredGrid:this.grid,K={bucketInstanceId:x,featureIndex:O,collisionGroupID:k},ge=0;ge<_.length;ge+=4)Z.insertCircle(K,_[ge],_[ge+1],_[ge+2])},To.prototype.projectAndGetPerspectiveRatio=function(_,S,x){var O=[S,x,0,1];return qr(O,O,_),{point:new E.Point((O[0]/O[3]+1)/2*this.transform.width+100,(-O[1]/O[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O[3]*.5}},To.prototype.isOffscreen=function(_,S,x,O){return x<100||_>=this.screenRightBoundary||O<100||S>this.screenBottomBoundary},To.prototype.isInsideGrid=function(_,S,x,O){return x>=0&&_<this.gridRightBoundary&&O>=0&&S<this.gridBottomBoundary},To.prototype.getViewportMatrix=function(){var _=E.identity([]);return E.translate(_,_,[-100,-100,0]),_};var So=function(_,S,x,O){this.opacity=_?Math.max(0,Math.min(1,_.opacity+(_.placed?S:-S))):O&&x?1:0,this.placed=x};So.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Zi=function(_,S,x,O,k){this.text=new So(_?_.text:null,S,x,k),this.icon=new So(_?_.icon:null,S,O,k)};Zi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var io=function(_,S,x){this.text=_,this.icon=S,this.skipFade=x},Mo=function(){this.invProjMatrix=E.create(),this.viewportMatrix=E.create(),this.circles=[]},gs=function(_,S,x,O,k){this.bucketInstanceId=_,this.featureIndex=S,this.sourceLayerIndex=x,this.bucketIndex=O,this.tileID=k},ya=function(_){this.crossSourceCollisions=_,this.maxGroupID=0,this.collisionGroups={}};function ia(_,S,x,O,k){var Z=E.getAnchorAlignment(_),K=-(Z.horizontalAlign-.5)*S,ge=-(Z.verticalAlign-.5)*x,Ve=E.evaluateVariableOffset(_,O);return new E.Point(K+Ve[0]*k,ge+Ve[1]*k)}function ps(_,S,x,O,k,Z){var K=_.x1,ge=_.x2,Ve=_.y1,ct=_.y2,jt=_.anchorPointX,Vt=_.anchorPointY,Xt=new E.Point(S,x);return O&&Xt._rotate(k?Z:-Z),{x1:K+Xt.x,y1:Ve+Xt.y,x2:ge+Xt.x,y2:ct+Xt.y,anchorPointX:jt,anchorPointY:Vt}}ya.prototype.get=function(_){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[_]){var S=++this.maxGroupID;this.collisionGroups[_]={ID:S,predicate:function(x){return x.collisionGroupID===S}}}return this.collisionGroups[_]};var os=function(_,S,x,O){this.transform=_.clone(),this.collisionIndex=new To(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=S,this.retainedQueryData={},this.collisionGroups=new ya(x),this.collisionCircleArrays={},this.prevPlacement=O,O&&(O.prevPlacement=void 0),this.placedOrientations={}};function Ct(_,S,x,O,k){_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0)}os.prototype.getBucketParts=function(_,S,x,O){var k=x.getBucket(S),Z=x.latestFeatureIndex;if(k&&Z&&S.id===k.layerIds[0]){var K=x.collisionBoxArray,ge=k.layers[0].layout,Ve=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),ct=x.tileSize/E.EXTENT,jt=this.transform.calculatePosMatrix(x.tileID.toUnwrapped()),Vt=ge.get("text-pitch-alignment")==="map",Xt=ge.get("text-rotation-alignment")==="map",En=di(x,1,this.transform.zoom),gn=dn(jt,Vt,Xt,this.transform,En),kn=null;if(Vt){var un=Fn(jt,Vt,Xt,this.transform,En);kn=E.multiply([],this.transform.labelPlaneMatrix,un)}this.retainedQueryData[k.bucketInstanceId]=new gs(k.bucketInstanceId,Z,k.sourceLayerIndex,k.index,x.tileID);var zn={bucket:k,layout:ge,posMatrix:jt,textLabelPlaneMatrix:gn,labelToScreenMatrix:kn,scale:Ve,textPixelRatio:ct,holdingForFade:x.holdingForFade(),collisionBoxArray:K,partiallyEvaluatedTextSize:E.evaluateSizeForZoom(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(O)for(var tr=0,gr=k.sortKeyRanges;tr<gr.length;tr+=1){var Ir=gr[tr];_.push({sortKey:Ir.sortKey,symbolInstanceStart:Ir.symbolInstanceStart,symbolInstanceEnd:Ir.symbolInstanceEnd,parameters:zn})}else _.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:zn})}},os.prototype.attemptAnchorPlacement=function(_,S,x,O,k,Z,K,ge,Ve,ct,jt,Vt,Xt,En,gn){var kn,un=[Vt.textOffset0,Vt.textOffset1],zn=ia(_,x,O,un,k),tr=this.collisionIndex.placeCollisionBox(ps(S,zn.x,zn.y,Z,K,this.transform.angle),jt,ge,Ve,ct.predicate);if(!gn||this.collisionIndex.placeCollisionBox(ps(gn,zn.x,zn.y,Z,K,this.transform.angle),jt,ge,Ve,ct.predicate).box.length!==0)return tr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Vt.crossTileID]&&this.prevPlacement.placements[Vt.crossTileID]&&this.prevPlacement.placements[Vt.crossTileID].text&&(kn=this.prevPlacement.variableOffsets[Vt.crossTileID].anchor),this.variableOffsets[Vt.crossTileID]={textOffset:un,width:x,height:O,anchor:_,textBoxScale:k,prevAnchor:kn},this.markUsedJustification(Xt,_,Vt,En),Xt.allowVerticalPlacement&&(this.markUsedOrientation(Xt,En,Vt),this.placedOrientations[Vt.crossTileID]=En),{shift:zn,placedGlyphBoxes:tr}):void 0},os.prototype.placeLayerBucketPart=function(_,S,x){var O=this,k=_.parameters,Z=k.bucket,K=k.layout,ge=k.posMatrix,Ve=k.textLabelPlaneMatrix,ct=k.labelToScreenMatrix,jt=k.textPixelRatio,Vt=k.holdingForFade,Xt=k.collisionBoxArray,En=k.partiallyEvaluatedTextSize,gn=k.collisionGroup,kn=K.get("text-optional"),un=K.get("icon-optional"),zn=K.get("text-allow-overlap"),tr=K.get("icon-allow-overlap"),gr=K.get("text-rotation-alignment")==="map",Ir=K.get("text-pitch-alignment")==="map",Or=K.get("icon-text-fit")!=="none",zr=K.get("symbol-z-order")==="viewport-y",ii=zn&&(tr||!Z.hasIconData()||un),Hi=tr&&(zn||!Z.hasTextData()||kn);!Z.collisionArrays&&Xt&&Z.deserializeCollisionBoxes(Xt);var Fi=function(yo,Qo){if(!S[yo.crossTileID])if(Vt)O.placements[yo.crossTileID]=new io(!1,!1,!1);else{var Oa,fa=!1,Go=!1,xa=!0,aa=null,ta={box:null,offscreen:null},Vl={box:null,offscreen:null},Ls=null,lu=null,Us=0,ll=0,Il=0;Qo.textFeatureIndex?Us=Qo.textFeatureIndex:yo.useRuntimeCollisionCircles&&(Us=yo.featureIndex),Qo.verticalTextFeatureIndex&&(ll=Qo.verticalTextFeatureIndex);var Mc=Qo.textBox;if(Mc){var Hu=function(rs){var Gu=E.WritingMode.horizontal;if(Z.allowVerticalPlacement&&!rs&&O.prevPlacement){var xu=O.prevPlacement.placedOrientations[yo.crossTileID];xu&&(O.placedOrientations[yo.crossTileID]=xu,O.markUsedOrientation(Z,Gu=xu,yo))}return Gu},Zf=function(rs,Gu){if(Z.allowVerticalPlacement&&yo.numVerticalGlyphVertices>0&&Qo.verticalTextBox)for(var xu=0,Lf=Z.writingModes;xu<Lf.length&&(Lf[xu]===E.WritingMode.vertical?(ta=Gu(),Vl=ta):ta=rs(),!(ta&&ta.box&&ta.box.length));xu+=1);else ta=rs()};if(K.get("text-variable-anchor")){var _c=K.get("text-variable-anchor");if(O.prevPlacement&&O.prevPlacement.variableOffsets[yo.crossTileID]){var Xf=O.prevPlacement.variableOffsets[yo.crossTileID];_c.indexOf(Xf.anchor)>0&&(_c=_c.filter(function(rs){return rs!==Xf.anchor})).unshift(Xf.anchor)}var Xc=function(rs,Gu,xu){for(var Lf=rs.x2-rs.x1,cp=rs.y2-rs.y1,Ld=yo.textBoxScale,Sv=Or&&!tr?Gu:null,Mh={box:[],offscreen:!1},oh=zn?2*_c.length:_c.length,gf=0;gf<oh;++gf){var U0=O.attemptAnchorPlacement(_c[gf%_c.length],rs,Lf,cp,Ld,gr,Ir,jt,ge,gn,gf>=_c.length,yo,Z,xu,Sv);if(U0&&(Mh=U0.placedGlyphBoxes)&&Mh.box&&Mh.box.length){fa=!0,aa=U0.shift;break}}return Mh};Zf(function(){return Xc(Mc,Qo.iconBox,E.WritingMode.horizontal)},function(){var rs=Qo.verticalTextBox;return Z.allowVerticalPlacement&&!(ta&&ta.box&&ta.box.length)&&yo.numVerticalGlyphVertices>0&&rs?Xc(rs,Qo.verticalIconBox,E.WritingMode.vertical):{box:null,offscreen:null}}),ta&&(fa=ta.box,xa=ta.offscreen);var Dp=Hu(ta&&ta.box);if(!fa&&O.prevPlacement){var up=O.prevPlacement.variableOffsets[yo.crossTileID];up&&(O.variableOffsets[yo.crossTileID]=up,O.markUsedJustification(Z,up.anchor,yo,Dp))}}else{var Oh=function(rs,Gu){var xu=O.collisionIndex.placeCollisionBox(rs,zn,jt,ge,gn.predicate);return xu&&xu.box&&xu.box.length&&(O.markUsedOrientation(Z,Gu,yo),O.placedOrientations[yo.crossTileID]=Gu),xu};Zf(function(){return Oh(Mc,E.WritingMode.horizontal)},function(){var rs=Qo.verticalTextBox;return Z.allowVerticalPlacement&&yo.numVerticalGlyphVertices>0&&rs?Oh(rs,E.WritingMode.vertical):{box:null,offscreen:null}}),Hu(ta&&ta.box&&ta.box.length)}}if(fa=(Oa=ta)&&Oa.box&&Oa.box.length>0,xa=Oa&&Oa.offscreen,yo.useRuntimeCollisionCircles){var Mi=Z.text.placedSymbolArray.get(yo.centerJustifiedTextSymbolIndex),Rc=E.evaluateSizeForFeature(Z.textSizeData,En,Mi),Yf=K.get("text-padding");Ls=O.collisionIndex.placeCollisionCircles(zn,Mi,Z.lineVertexArray,Z.glyphOffsetArray,Rc,ge,Ve,ct,x,Ir,gn.predicate,yo.collisionCircleDiameter,Yf),fa=zn||Ls.circles.length>0&&!Ls.collisionDetected,xa=xa&&Ls.offscreen}if(Qo.iconFeatureIndex&&(Il=Qo.iconFeatureIndex),Qo.iconBox){var rd=function(rs){var Gu=Or&&aa?ps(rs,aa.x,aa.y,gr,Ir,O.transform.angle):rs;return O.collisionIndex.placeCollisionBox(Gu,tr,jt,ge,gn.predicate)};Go=Vl&&Vl.box&&Vl.box.length&&Qo.verticalIconBox?(lu=rd(Qo.verticalIconBox)).box.length>0:(lu=rd(Qo.iconBox)).box.length>0,xa=xa&&lu.offscreen}var Wu=kn||yo.numHorizontalGlyphVertices===0&&yo.numVerticalGlyphVertices===0,xl=un||yo.numIconVertices===0;if(Wu||xl?xl?Wu||(Go=Go&&fa):fa=Go&&fa:Go=fa=Go&&fa,fa&&Oa&&Oa.box&&O.collisionIndex.insertCollisionBox(Oa.box,K.get("text-ignore-placement"),Z.bucketInstanceId,Vl&&Vl.box&&ll?ll:Us,gn.ID),Go&&lu&&O.collisionIndex.insertCollisionBox(lu.box,K.get("icon-ignore-placement"),Z.bucketInstanceId,Il,gn.ID),Ls&&(fa&&O.collisionIndex.insertCollisionCircles(Ls.circles,K.get("text-ignore-placement"),Z.bucketInstanceId,Us,gn.ID),x)){var oc=Z.bucketInstanceId,Pf=O.collisionCircleArrays[oc];Pf===void 0&&(Pf=O.collisionCircleArrays[oc]=new Mo);for(var If=0;If<Ls.circles.length;If+=4)Pf.circles.push(Ls.circles[If+0]),Pf.circles.push(Ls.circles[If+1]),Pf.circles.push(Ls.circles[If+2]),Pf.circles.push(Ls.collisionDetected?1:0)}O.placements[yo.crossTileID]=new io(fa||ii,Go||Hi,xa||Z.justReloaded),S[yo.crossTileID]=!0}};if(zr)for(var po=Z.getSortedSymbolIndexes(this.transform.angle),Vo=po.length-1;Vo>=0;--Vo){var $r=po[Vo];Fi(Z.symbolInstances.get($r),Z.collisionArrays[$r])}else for(var Kt=_.symbolInstanceStart;Kt<_.symbolInstanceEnd;Kt++)Fi(Z.symbolInstances.get(Kt),Z.collisionArrays[Kt]);if(x&&Z.bucketInstanceId in this.collisionCircleArrays){var Ya=this.collisionCircleArrays[Z.bucketInstanceId];E.invert(Ya.invProjMatrix,ge),Ya.viewportMatrix=this.collisionIndex.getViewportMatrix()}Z.justReloaded=!1},os.prototype.markUsedJustification=function(_,S,x,O){var k;k=O===E.WritingMode.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[E.getAnchorJustification(S)];for(var Z=0,K=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];Z<K.length;Z+=1){var ge=K[Z];ge>=0&&(_.text.placedSymbolArray.get(ge).crossTileID=k>=0&&ge!==k?0:x.crossTileID)}},os.prototype.markUsedOrientation=function(_,S,x){for(var O=S===E.WritingMode.horizontal||S===E.WritingMode.horizontalOnly?S:0,k=S===E.WritingMode.vertical?S:0,Z=0,K=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];Z<K.length;Z+=1)_.text.placedSymbolArray.get(K[Z]).placedOrientation=O;x.verticalPlacedTextSymbolIndex&&(_.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=k)},os.prototype.commit=function(_){this.commitTime=_,this.zoomAtLastRecencyCheck=this.transform.zoom;var S=this.prevPlacement,x=!1;this.prevZoomAdjustment=S?S.zoomAdjustment(this.transform.zoom):0;var O=S?S.symbolFadeChange(_):1,k=S?S.opacities:{},Z=S?S.variableOffsets:{},K=S?S.placedOrientations:{};for(var ge in this.placements){var Ve=this.placements[ge],ct=k[ge];ct?(this.opacities[ge]=new Zi(ct,O,Ve.text,Ve.icon),x=x||Ve.text!==ct.text.placed||Ve.icon!==ct.icon.placed):(this.opacities[ge]=new Zi(null,O,Ve.text,Ve.icon,Ve.skipFade),x=x||Ve.text||Ve.icon)}for(var jt in k){var Vt=k[jt];if(!this.opacities[jt]){var Xt=new Zi(Vt,O,!1,!1);Xt.isHidden()||(this.opacities[jt]=Xt,x=x||Vt.text.placed||Vt.icon.placed)}}for(var En in Z)this.variableOffsets[En]||!this.opacities[En]||this.opacities[En].isHidden()||(this.variableOffsets[En]=Z[En]);for(var gn in K)this.placedOrientations[gn]||!this.opacities[gn]||this.opacities[gn].isHidden()||(this.placedOrientations[gn]=K[gn]);x?this.lastPlacementChangeTime=_:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=S?S.lastPlacementChangeTime:_)},os.prototype.updateLayerOpacities=function(_,S){for(var x={},O=0,k=S;O<k.length;O+=1){var Z=k[O],K=Z.getBucket(_);K&&Z.latestFeatureIndex&&_.id===K.layerIds[0]&&this.updateBucketOpacities(K,x,Z.collisionBoxArray)}},os.prototype.updateBucketOpacities=function(_,S,x){var O=this;_.hasTextData()&&_.text.opacityVertexArray.clear(),_.hasIconData()&&_.icon.opacityVertexArray.clear(),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexArray.clear(),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexArray.clear();var k=_.layers[0].layout,Z=new Zi(null,0,!1,!1,!0),K=k.get("text-allow-overlap"),ge=k.get("icon-allow-overlap"),Ve=k.get("text-variable-anchor"),ct=k.get("text-rotation-alignment")==="map",jt=k.get("text-pitch-alignment")==="map",Vt=k.get("icon-text-fit")!=="none",Xt=new Zi(null,0,K&&(ge||!_.hasIconData()||k.get("icon-optional")),ge&&(K||!_.hasTextData()||k.get("text-optional")),!0);!_.collisionArrays&&x&&(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData())&&_.deserializeCollisionBoxes(x);for(var En=function(zn,tr,gr){for(var Ir=0;Ir<tr/4;Ir++)zn.opacityVertexArray.emplaceBack(gr)},gn=function(zn){var tr=_.symbolInstances.get(zn),gr=tr.numHorizontalGlyphVertices,Ir=tr.numVerticalGlyphVertices,Or=tr.crossTileID,zr=O.opacities[Or];S[Or]?zr=Z:zr||(O.opacities[Or]=zr=Xt),S[Or]=!0;var ii=tr.numIconVertices>0,Hi=O.placedOrientations[tr.crossTileID],Fi=Hi===E.WritingMode.vertical,po=Hi===E.WritingMode.horizontal||Hi===E.WritingMode.horizontalOnly;if(gr>0||Ir>0){var Vo=As(zr.text);En(_.text,gr,Fi?Is:Vo),En(_.text,Ir,po?Is:Vo);var $r=zr.text.isHidden();[tr.rightJustifiedTextSymbolIndex,tr.centerJustifiedTextSymbolIndex,tr.leftJustifiedTextSymbolIndex].forEach(function(ta){ta>=0&&(_.text.placedSymbolArray.get(ta).hidden=$r||Fi?1:0)}),tr.verticalPlacedTextSymbolIndex>=0&&(_.text.placedSymbolArray.get(tr.verticalPlacedTextSymbolIndex).hidden=$r||po?1:0);var Kt=O.variableOffsets[tr.crossTileID];Kt&&O.markUsedJustification(_,Kt.anchor,tr,Hi);var Ya=O.placedOrientations[tr.crossTileID];Ya&&(O.markUsedJustification(_,"left",tr,Ya),O.markUsedOrientation(_,Ya,tr))}if(ii){var yo=As(zr.icon),Qo=!(Vt&&tr.verticalPlacedIconSymbolIndex&&Fi);tr.placedIconSymbolIndex>=0&&(En(_.icon,tr.numIconVertices,Qo?yo:Is),_.icon.placedSymbolArray.get(tr.placedIconSymbolIndex).hidden=zr.icon.isHidden()),tr.verticalPlacedIconSymbolIndex>=0&&(En(_.icon,tr.numVerticalIconVertices,Qo?Is:yo),_.icon.placedSymbolArray.get(tr.verticalPlacedIconSymbolIndex).hidden=zr.icon.isHidden())}if(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData()){var Oa=_.collisionArrays[zn];if(Oa){var fa=new E.Point(0,0);if(Oa.textBox||Oa.verticalTextBox){var Go=!0;if(Ve){var xa=O.variableOffsets[Or];xa?(fa=ia(xa.anchor,xa.width,xa.height,xa.textOffset,xa.textBoxScale),ct&&fa._rotate(jt?O.transform.angle:-O.transform.angle)):Go=!1}Oa.textBox&&Ct(_.textCollisionBox.collisionVertexArray,zr.text.placed,!Go||Fi,fa.x,fa.y),Oa.verticalTextBox&&Ct(_.textCollisionBox.collisionVertexArray,zr.text.placed,!Go||po,fa.x,fa.y)}var aa=!!(!po&&Oa.verticalIconBox);Oa.iconBox&&Ct(_.iconCollisionBox.collisionVertexArray,zr.icon.placed,aa,Vt?fa.x:0,Vt?fa.y:0),Oa.verticalIconBox&&Ct(_.iconCollisionBox.collisionVertexArray,zr.icon.placed,!aa,Vt?fa.x:0,Vt?fa.y:0)}}},kn=0;kn<_.symbolInstances.length;kn++)gn(kn);if(_.sortFeatures(this.transform.angle),this.retainedQueryData[_.bucketInstanceId]&&(this.retainedQueryData[_.bucketInstanceId].featureSortOrder=_.featureSortOrder),_.hasTextData()&&_.text.opacityVertexBuffer&&_.text.opacityVertexBuffer.updateData(_.text.opacityVertexArray),_.hasIconData()&&_.icon.opacityVertexBuffer&&_.icon.opacityVertexBuffer.updateData(_.icon.opacityVertexArray),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexBuffer&&_.iconCollisionBox.collisionVertexBuffer.updateData(_.iconCollisionBox.collisionVertexArray),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexBuffer&&_.textCollisionBox.collisionVertexBuffer.updateData(_.textCollisionBox.collisionVertexArray),_.bucketInstanceId in this.collisionCircleArrays){var un=this.collisionCircleArrays[_.bucketInstanceId];_.placementInvProjMatrix=un.invProjMatrix,_.placementViewportMatrix=un.viewportMatrix,_.collisionCircleArray=un.circles,delete this.collisionCircleArrays[_.bucketInstanceId]}},os.prototype.symbolFadeChange=function(_){return this.fadeDuration===0?1:(_-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},os.prototype.zoomAdjustment=function(_){return Math.max(0,(this.transform.zoom-_)/1.5)},os.prototype.hasTransitions=function(_){return this.stale||_-this.lastPlacementChangeTime<this.fadeDuration},os.prototype.stillRecent=function(_,S){var x=this.zoomAtLastRecencyCheck===S?1-this.zoomAdjustment(S):1;return this.zoomAtLastRecencyCheck=S,this.commitTime+this.fadeDuration*x>_},os.prototype.setStale=function(){this.stale=!0};var Gt=Math.pow(2,25),Un=Math.pow(2,24),Fr=Math.pow(2,17),Oi=Math.pow(2,16),Yi=Math.pow(2,9),ea=Math.pow(2,8),Ns=Math.pow(2,1);function As(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;var S=_.placed?1:0,x=Math.floor(127*_.opacity);return x*Gt+S*Un+x*Fr+S*Oi+x*Yi+S*ea+x*Ns+S}var Is=0,al=function(_){this._sortAcrossTiles=_.layout.get("symbol-z-order")!=="viewport-y"&&_.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};al.prototype.continuePlacement=function(_,S,x,O,k){for(var Z=this._bucketParts;this._currentTileIndex<_.length;)if(S.getBucketParts(Z,O,_[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Z.sort(function(K,ge){return K.sortKey-ge.sortKey}));this._currentPartIndex<Z.length;)if(S.placeLayerBucketPart(Z[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,k())return!0;return!1};var Gh=function(_,S,x,O,k,Z,K){this.placement=new os(_,k,Z,K),this._currentPlacementIndex=S.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=O,this._done=!1};Gh.prototype.isDone=function(){return this._done},Gh.prototype.continuePlacement=function(_,S,x){for(var O=this,k=E.browser.now(),Z=function(){var Ve=E.browser.now()-k;return!O._forceFullPlacement&&Ve>2};this._currentPlacementIndex>=0;){var K=S[_[this._currentPlacementIndex]],ge=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=ge)&&(!K.maxzoom||K.maxzoom>ge)){if(this._inProgressLayer||(this._inProgressLayer=new al(K)),this._inProgressLayer.continuePlacement(x[K.source],this.placement,this._showCollisionBoxes,K,Z))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Gh.prototype.commit=function(_){return this.placement.commit(_),this.placement};var Op=512/E.EXTENT/2,Kf=function(_,S,x){this.tileID=_,this.indexedSymbolInstances={},this.bucketInstanceId=x;for(var O=0;O<S.length;O++){var k=S.get(O),Z=k.key;this.indexedSymbolInstances[Z]||(this.indexedSymbolInstances[Z]=[]),this.indexedSymbolInstances[Z].push({crossTileID:k.crossTileID,coord:this.getScaledCoordinates(k,_)})}};Kf.prototype.getScaledCoordinates=function(_,S){var x=Op/Math.pow(2,S.canonical.z-this.tileID.canonical.z);return{x:Math.floor((S.canonical.x*E.EXTENT+_.anchorX)*x),y:Math.floor((S.canonical.y*E.EXTENT+_.anchorY)*x)}},Kf.prototype.findMatches=function(_,S,x){for(var O=this.tileID.canonical.z<S.canonical.z?1:Math.pow(2,this.tileID.canonical.z-S.canonical.z),k=0;k<_.length;k++){var Z=_.get(k);if(!Z.crossTileID){var K=this.indexedSymbolInstances[Z.key];if(K)for(var ge=this.getScaledCoordinates(Z,S),Ve=0,ct=K;Ve<ct.length;Ve+=1){var jt=ct[Ve];if(Math.abs(jt.coord.x-ge.x)<=O&&Math.abs(jt.coord.y-ge.y)<=O&&!x[jt.crossTileID]){x[jt.crossTileID]=!0,Z.crossTileID=jt.crossTileID;break}}}}};var ou=function(){this.maxCrossTileID=0};ou.prototype.generate=function(){return++this.maxCrossTileID};var Uf=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Uf.prototype.handleWrapJump=function(_){var S=Math.round((_-this.lng)/360);if(S!==0)for(var x in this.indexes){var O=this.indexes[x],k={};for(var Z in O){var K=O[Z];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+S),k[K.tileID.key]=K}this.indexes[x]=k}this.lng=_},Uf.prototype.addBucket=function(_,S,x){if(this.indexes[_.overscaledZ]&&this.indexes[_.overscaledZ][_.key]){if(this.indexes[_.overscaledZ][_.key].bucketInstanceId===S.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(_.overscaledZ,this.indexes[_.overscaledZ][_.key])}for(var O=0;O<S.symbolInstances.length;O++)S.symbolInstances.get(O).crossTileID=0;this.usedCrossTileIDs[_.overscaledZ]||(this.usedCrossTileIDs[_.overscaledZ]={});var k=this.usedCrossTileIDs[_.overscaledZ];for(var Z in this.indexes){var K=this.indexes[Z];if(Number(Z)>_.overscaledZ)for(var ge in K){var Ve=K[ge];Ve.tileID.isChildOf(_)&&Ve.findMatches(S.symbolInstances,_,k)}else{var ct=K[_.scaledTo(Number(Z)).key];ct&&ct.findMatches(S.symbolInstances,_,k)}}for(var jt=0;jt<S.symbolInstances.length;jt++){var Vt=S.symbolInstances.get(jt);Vt.crossTileID||(Vt.crossTileID=x.generate(),k[Vt.crossTileID]=!0)}return this.indexes[_.overscaledZ]===void 0&&(this.indexes[_.overscaledZ]={}),this.indexes[_.overscaledZ][_.key]=new Kf(_,S.symbolInstances,S.bucketInstanceId),!0},Uf.prototype.removeBucketCrossTileIDs=function(_,S){for(var x in S.indexedSymbolInstances)for(var O=0,k=S.indexedSymbolInstances[x];O<k.length;O+=1)delete this.usedCrossTileIDs[_][k[O].crossTileID]},Uf.prototype.removeStaleBuckets=function(_){var S=!1;for(var x in this.indexes){var O=this.indexes[x];for(var k in O)_[O[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,O[k]),delete O[k],S=!0)}return S};var of=function(){this.layerIndexes={},this.crossTileIDs=new ou,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};of.prototype.addLayer=function(_,S,x){var O=this.layerIndexes[_.id];O===void 0&&(O=this.layerIndexes[_.id]=new Uf);var k=!1,Z={};O.handleWrapJump(x);for(var K=0,ge=S;K<ge.length;K+=1){var Ve=ge[K],ct=Ve.getBucket(_);ct&&_.id===ct.layerIds[0]&&(ct.bucketInstanceId||(ct.bucketInstanceId=++this.maxBucketInstanceId),O.addBucket(Ve.tileID,ct,this.crossTileIDs)&&(k=!0),Z[ct.bucketInstanceId]=!0)}return O.removeStaleBuckets(Z)&&(k=!0),k},of.prototype.pruneUnusedLayers=function(_){var S={};for(var x in _.forEach(function(O){S[O]=!0}),this.layerIndexes)S[x]||delete this.layerIndexes[x]};var au=function(_,S){return E.emitValidationErrors(_,S&&S.filter(function(x){return x.identifier!=="source.canvas"}))},yu=E.pick(_i,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),af=E.pick(_i,["setCenter","setZoom","setBearing","setPitch"]),Sf=function(){var _={},S=E.styleSpec.$version;for(var x in E.styleSpec.$root){var O,k=E.styleSpec.$root[x];k.required&&(O=x==="version"?S:k.type==="array"?[]:{})!=null&&(_[x]=O)}return _}(),Ou=function(_){function S(x,O){var k=this;O===void 0&&(O={}),_.call(this),this.map=x,this.dispatcher=new ut(wr(),this),this.imageManager=new le,this.imageManager.setEventedParent(this),this.glyphManager=new ft(x._requestManager,O.localIdeographFontFamily),this.lineAtlas=new Ze(256,512),this.crossTileSymbolIndex=new of,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new E.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",E.getReferrer());var Z=this;this._rtlTextPluginCallback=S.registerForPluginStateChange(function(K){Z.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:K.pluginStatus,pluginURL:K.pluginURL},function(ge,Ve){if(E.triggerPluginCompletionEvent(ge),Ve&&Ve.every(function(jt){return jt}))for(var ct in Z.sourceCaches)Z.sourceCaches[ct].reload()})}),this.on("data",function(K){if(K.dataType==="source"&&K.sourceDataType==="metadata"){var ge=k.sourceCaches[K.sourceId];if(ge){var Ve=ge.getSource();if(Ve&&Ve.vectorLayerIds)for(var ct in k._layers){var jt=k._layers[ct];jt.source===Ve.id&&k._validateLayer(jt)}}}})}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.loadURL=function(x,O){var k=this;O===void 0&&(O={}),this.fire(new E.Event("dataloading",{dataType:"style"}));var Z=typeof O.validate=="boolean"?O.validate:!E.isMapboxURL(x);x=this.map._requestManager.normalizeStyleURL(x,O.accessToken);var K=this.map._requestManager.transformRequest(x,E.ResourceType.Style);this._request=E.getJSON(K,function(ge,Ve){k._request=null,ge?k.fire(new E.ErrorEvent(ge)):Ve&&k._load(Ve,Z)})},S.prototype.loadJSON=function(x,O){var k=this;O===void 0&&(O={}),this.fire(new E.Event("dataloading",{dataType:"style"})),this._request=E.browser.frame(function(){k._request=null,k._load(x,O.validate!==!1)})},S.prototype.loadEmpty=function(){this.fire(new E.Event("dataloading",{dataType:"style"})),this._load(Sf,!1)},S.prototype._load=function(x,O){if(!O||!au(this,E.validateStyle(x))){for(var k in this._loaded=!0,this.stylesheet=x,x.sources)this.addSource(k,x.sources[k],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs);var Z=pi(this.stylesheet.layers);this._order=Z.map(function(ct){return ct.id}),this._layers={},this._serializedLayers={};for(var K=0,ge=Z;K<ge.length;K+=1){var Ve=ge[K];(Ve=E.createStyleLayer(Ve)).setEventedParent(this,{layer:{id:Ve.id}}),this._layers[Ve.id]=Ve,this._serializedLayers[Ve.id]=Ve.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Be(this.stylesheet.light),this.fire(new E.Event("data",{dataType:"style"})),this.fire(new E.Event("style.load"))}},S.prototype._loadSprite=function(x){var O=this;this._spriteRequest=function(k,Z,K){var ge,Ve,ct,jt=E.browser.devicePixelRatio>1?"@2x":"",Vt=E.getJSON(Z.transformRequest(Z.normalizeSpriteURL(k,jt,".json"),E.ResourceType.SpriteJSON),function(gn,kn){Vt=null,ct||(ct=gn,ge=kn,En())}),Xt=E.getImage(Z.transformRequest(Z.normalizeSpriteURL(k,jt,".png"),E.ResourceType.SpriteImage),function(gn,kn){Xt=null,ct||(ct=gn,Ve=kn,En())});function En(){if(ct)K(ct);else if(ge&&Ve){var gn=E.browser.getImageData(Ve),kn={};for(var un in ge){var zn=ge[un],tr=zn.width,gr=zn.height,Ir=zn.x,Or=zn.y,zr=zn.sdf,ii=zn.pixelRatio,Hi=zn.stretchX,Fi=zn.stretchY,po=zn.content,Vo=new E.RGBAImage({width:tr,height:gr});E.RGBAImage.copy(gn,Vo,{x:Ir,y:Or},{x:0,y:0},{width:tr,height:gr}),kn[un]={data:Vo,pixelRatio:ii,sdf:zr,stretchX:Hi,stretchY:Fi,content:po}}K(null,kn)}}return{cancel:function(){Vt&&(Vt.cancel(),Vt=null),Xt&&(Xt.cancel(),Xt=null)}}}(x,this.map._requestManager,function(k,Z){if(O._spriteRequest=null,k)O.fire(new E.ErrorEvent(k));else if(Z)for(var K in Z)O.imageManager.addImage(K,Z[K]);O.imageManager.setLoaded(!0),O._availableImages=O.imageManager.listImages(),O.dispatcher.broadcast("setImages",O._availableImages),O.fire(new E.Event("data",{dataType:"style"}))})},S.prototype._validateLayer=function(x){var O=this.sourceCaches[x.source];if(O){var k=x.sourceLayer;if(k){var Z=O.getSource();(Z.type==="geojson"||Z.vectorLayerIds&&Z.vectorLayerIds.indexOf(k)===-1)&&this.fire(new E.ErrorEvent(new Error('Source layer "'+k+'" does not exist on source "'+Z.id+'" as specified by style layer "'+x.id+'"')))}}},S.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var x in this.sourceCaches)if(!this.sourceCaches[x].loaded())return!1;return!!this.imageManager.isLoaded()},S.prototype._serializeLayers=function(x){for(var O=[],k=0,Z=x;k<Z.length;k+=1){var K=this._layers[Z[k]];K.type!=="custom"&&O.push(K.serialize())}return O},S.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(var O in this._layers)if(this._layers[O].hasTransition())return!0;return!1},S.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},S.prototype.update=function(x){if(this._loaded){var O=this._changed;if(this._changed){var k=Object.keys(this._updatedLayers),Z=Object.keys(this._removedLayers);for(var K in(k.length||Z.length)&&this._updateWorkerLayers(k,Z),this._updatedSources){var ge=this._updatedSources[K];ge==="reload"?this._reloadSource(K):ge==="clear"&&this._clearSource(K)}for(var Ve in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ve].updateTransitions(x);this.light.updateTransitions(x),this._resetUpdates()}var ct={};for(var jt in this.sourceCaches){var Vt=this.sourceCaches[jt];ct[jt]=Vt.used,Vt.used=!1}for(var Xt=0,En=this._order;Xt<En.length;Xt+=1){var gn=this._layers[En[Xt]];gn.recalculate(x,this._availableImages),!gn.isHidden(x.zoom)&&gn.source&&(this.sourceCaches[gn.source].used=!0)}for(var kn in ct){var un=this.sourceCaches[kn];ct[kn]!==un.used&&un.fire(new E.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:kn}))}this.light.recalculate(x),this.z=x.zoom,O&&this.fire(new E.Event("data",{dataType:"style"}))}},S.prototype._updateTilesForChangedImages=function(){var x=Object.keys(this._changedImages);if(x.length){for(var O in this.sourceCaches)this.sourceCaches[O].reloadTilesForDependencies(["icons","patterns"],x);this._changedImages={}}},S.prototype._updateWorkerLayers=function(x,O){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(x),removedIds:O})},S.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},S.prototype.setState=function(x){var O=this;if(this._checkLoaded(),au(this,E.validateStyle(x)))return!1;(x=E.clone$1(x)).layers=pi(x.layers);var k=function(K,ge){if(!K)return[{command:_i.setStyle,args:[ge]}];var Ve=[];try{if(!E.deepEqual(K.version,ge.version))return[{command:_i.setStyle,args:[ge]}];E.deepEqual(K.center,ge.center)||Ve.push({command:_i.setCenter,args:[ge.center]}),E.deepEqual(K.zoom,ge.zoom)||Ve.push({command:_i.setZoom,args:[ge.zoom]}),E.deepEqual(K.bearing,ge.bearing)||Ve.push({command:_i.setBearing,args:[ge.bearing]}),E.deepEqual(K.pitch,ge.pitch)||Ve.push({command:_i.setPitch,args:[ge.pitch]}),E.deepEqual(K.sprite,ge.sprite)||Ve.push({command:_i.setSprite,args:[ge.sprite]}),E.deepEqual(K.glyphs,ge.glyphs)||Ve.push({command:_i.setGlyphs,args:[ge.glyphs]}),E.deepEqual(K.transition,ge.transition)||Ve.push({command:_i.setTransition,args:[ge.transition]}),E.deepEqual(K.light,ge.light)||Ve.push({command:_i.setLight,args:[ge.light]});var ct={},jt=[];(function(Xt,En,gn,kn){var un;for(un in En=En||{},Xt=Xt||{})Xt.hasOwnProperty(un)&&(En.hasOwnProperty(un)||Si(un,gn,kn));for(un in En)En.hasOwnProperty(un)&&(Xt.hasOwnProperty(un)?E.deepEqual(Xt[un],En[un])||(Xt[un].type==="geojson"&&En[un].type==="geojson"&&ho(Xt,En,un)?gn.push({command:_i.setGeoJSONSourceData,args:[un,En[un].data]}):Ci(un,En,gn,kn)):Bo(un,En,gn))})(K.sources,ge.sources,jt,ct);var Vt=[];K.layers&&K.layers.forEach(function(Xt){ct[Xt.source]?Ve.push({command:_i.removeLayer,args:[Xt.id]}):Vt.push(Xt)}),Ve=Ve.concat(jt),function(Xt,En,gn){En=En||[];var kn,un,zn,tr,gr,Ir,Or,zr=(Xt=Xt||[]).map(jo),ii=En.map(jo),Hi=Xt.reduce(Ke,{}),Fi=En.reduce(Ke,{}),po=zr.slice(),Vo=Object.create(null);for(kn=0,un=0;kn<zr.length;kn++)Fi.hasOwnProperty(zn=zr[kn])?un++:(gn.push({command:_i.removeLayer,args:[zn]}),po.splice(po.indexOf(zn,un),1));for(kn=0,un=0;kn<ii.length;kn++)po[po.length-1-kn]!==(zn=ii[ii.length-1-kn])&&(Hi.hasOwnProperty(zn)?(gn.push({command:_i.removeLayer,args:[zn]}),po.splice(po.lastIndexOf(zn,po.length-un),1)):un++,gn.push({command:_i.addLayer,args:[Fi[zn],Ir=po[po.length-kn]]}),po.splice(po.length-kn,0,zn),Vo[zn]=!0);for(kn=0;kn<ii.length;kn++)if(tr=Hi[zn=ii[kn]],gr=Fi[zn],!Vo[zn]&&!E.deepEqual(tr,gr))if(E.deepEqual(tr.source,gr.source)&&E.deepEqual(tr["source-layer"],gr["source-layer"])&&E.deepEqual(tr.type,gr.type)){for(Or in go(tr.layout,gr.layout,gn,zn,null,_i.setLayoutProperty),go(tr.paint,gr.paint,gn,zn,null,_i.setPaintProperty),E.deepEqual(tr.filter,gr.filter)||gn.push({command:_i.setFilter,args:[zn,gr.filter]}),E.deepEqual(tr.minzoom,gr.minzoom)&&E.deepEqual(tr.maxzoom,gr.maxzoom)||gn.push({command:_i.setLayerZoomRange,args:[zn,gr.minzoom,gr.maxzoom]}),tr)tr.hasOwnProperty(Or)&&Or!=="layout"&&Or!=="paint"&&Or!=="filter"&&Or!=="metadata"&&Or!=="minzoom"&&Or!=="maxzoom"&&(Or.indexOf("paint.")===0?go(tr[Or],gr[Or],gn,zn,Or.slice(6),_i.setPaintProperty):E.deepEqual(tr[Or],gr[Or])||gn.push({command:_i.setLayerProperty,args:[zn,Or,gr[Or]]}));for(Or in gr)gr.hasOwnProperty(Or)&&!tr.hasOwnProperty(Or)&&Or!=="layout"&&Or!=="paint"&&Or!=="filter"&&Or!=="metadata"&&Or!=="minzoom"&&Or!=="maxzoom"&&(Or.indexOf("paint.")===0?go(tr[Or],gr[Or],gn,zn,Or.slice(6),_i.setPaintProperty):E.deepEqual(tr[Or],gr[Or])||gn.push({command:_i.setLayerProperty,args:[zn,Or,gr[Or]]}))}else gn.push({command:_i.removeLayer,args:[zn]}),Ir=po[po.lastIndexOf(zn)+1],gn.push({command:_i.addLayer,args:[gr,Ir]})}(Vt,ge.layers,Ve)}catch(Xt){console.warn("Unable to compute style diff:",Xt),Ve=[{command:_i.setStyle,args:[ge]}]}return Ve}(this.serialize(),x).filter(function(K){return!(K.command in af)});if(k.length===0)return!1;var Z=k.filter(function(K){return!(K.command in yu)});if(Z.length>0)throw new Error("Unimplemented: "+Z.map(function(K){return K.command}).join(", ")+".");return k.forEach(function(K){K.command!=="setTransition"&&O[K.command].apply(O,K.args)}),this.stylesheet=x,!0},S.prototype.addImage=function(x,O){if(this.getImage(x))return this.fire(new E.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(x,O),this._afterImageUpdated(x)},S.prototype.updateImage=function(x,O){this.imageManager.updateImage(x,O)},S.prototype.getImage=function(x){return this.imageManager.getImage(x)},S.prototype.removeImage=function(x){if(!this.getImage(x))return this.fire(new E.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(x),this._afterImageUpdated(x)},S.prototype._afterImageUpdated=function(x){this._availableImages=this.imageManager.listImages(),this._changedImages[x]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new E.Event("data",{dataType:"style"}))},S.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},S.prototype.addSource=function(x,O,k){var Z=this;if(k===void 0&&(k={}),this._checkLoaded(),this.sourceCaches[x]!==void 0)throw new Error("There is already a source with this ID");if(!O.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(O).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(O.type)>=0&&this._validate(E.validateStyle.source,"sources."+x,O,null,k))){this.map&&this.map._collectResourceTiming&&(O.collectResourceTiming=!0);var K=this.sourceCaches[x]=new Qt(x,O,this.dispatcher);K.style=this,K.setEventedParent(this,function(){return{isSourceLoaded:Z.loaded(),source:K.serialize(),sourceId:x}}),K.onAdd(this.map),this._changed=!0}},S.prototype.removeSource=function(x){if(this._checkLoaded(),this.sourceCaches[x]===void 0)throw new Error("There is no source with this ID");for(var O in this._layers)if(this._layers[O].source===x)return this.fire(new E.ErrorEvent(new Error('Source "'+x+'" cannot be removed while layer "'+O+'" is using it.')));var k=this.sourceCaches[x];delete this.sourceCaches[x],delete this._updatedSources[x],k.fire(new E.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x})),k.setEventedParent(null),k.clearTiles(),k.onRemove&&k.onRemove(this.map),this._changed=!0},S.prototype.setGeoJSONSourceData=function(x,O){this._checkLoaded(),this.sourceCaches[x].getSource().setData(O),this._changed=!0},S.prototype.getSource=function(x){return this.sourceCaches[x]&&this.sourceCaches[x].getSource()},S.prototype.addLayer=function(x,O,k){k===void 0&&(k={}),this._checkLoaded();var Z=x.id;if(this.getLayer(Z))this.fire(new E.ErrorEvent(new Error('Layer with id "'+Z+'" already exists on this map')));else{var K;if(x.type==="custom"){if(au(this,E.validateCustomStyleLayer(x)))return;K=E.createStyleLayer(x)}else{if(typeof x.source=="object"&&(this.addSource(Z,x.source),x=E.clone$1(x),x=E.extend(x,{source:Z})),this._validate(E.validateStyle.layer,"layers."+Z,x,{arrayIndex:-1},k))return;K=E.createStyleLayer(x),this._validateLayer(K),K.setEventedParent(this,{layer:{id:Z}}),this._serializedLayers[K.id]=K.serialize()}var ge=O?this._order.indexOf(O):this._order.length;if(O&&ge===-1)this.fire(new E.ErrorEvent(new Error('Layer with id "'+O+'" does not exist on this map.')));else{if(this._order.splice(ge,0,Z),this._layerOrderChanged=!0,this._layers[Z]=K,this._removedLayers[Z]&&K.source&&K.type!=="custom"){var Ve=this._removedLayers[Z];delete this._removedLayers[Z],Ve.type!==K.type?this._updatedSources[K.source]="clear":(this._updatedSources[K.source]="reload",this.sourceCaches[K.source].pause())}this._updateLayer(K),K.onAdd&&K.onAdd(this.map)}}},S.prototype.moveLayer=function(x,O){if(this._checkLoaded(),this._changed=!0,this._layers[x]){if(x!==O){var k=this._order.indexOf(x);this._order.splice(k,1);var Z=O?this._order.indexOf(O):this._order.length;O&&Z===-1?this.fire(new E.ErrorEvent(new Error('Layer with id "'+O+'" does not exist on this map.'))):(this._order.splice(Z,0,x),this._layerOrderChanged=!0)}}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be moved.")))},S.prototype.removeLayer=function(x){this._checkLoaded();var O=this._layers[x];if(O){O.setEventedParent(null);var k=this._order.indexOf(x);this._order.splice(k,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[x]=O,delete this._layers[x],delete this._serializedLayers[x],delete this._updatedLayers[x],delete this._updatedPaintProps[x],O.onRemove&&O.onRemove(this.map)}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be removed.")))},S.prototype.getLayer=function(x){return this._layers[x]},S.prototype.hasLayer=function(x){return x in this._layers},S.prototype.setLayerZoomRange=function(x,O,k){this._checkLoaded();var Z=this.getLayer(x);Z?Z.minzoom===O&&Z.maxzoom===k||(O!=null&&(Z.minzoom=O),k!=null&&(Z.maxzoom=k),this._updateLayer(Z)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot have zoom extent.")))},S.prototype.setFilter=function(x,O,k){k===void 0&&(k={}),this._checkLoaded();var Z=this.getLayer(x);if(Z){if(!E.deepEqual(Z.filter,O))return O==null?(Z.filter=void 0,void this._updateLayer(Z)):void(this._validate(E.validateStyle.filter,"layers."+Z.id+".filter",O,null,k)||(Z.filter=E.clone$1(O),this._updateLayer(Z)))}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be filtered.")))},S.prototype.getFilter=function(x){return E.clone$1(this.getLayer(x).filter)},S.prototype.setLayoutProperty=function(x,O,k,Z){Z===void 0&&(Z={}),this._checkLoaded();var K=this.getLayer(x);K?E.deepEqual(K.getLayoutProperty(O),k)||(K.setLayoutProperty(O,k,Z),this._updateLayer(K)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getLayoutProperty=function(x,O){var k=this.getLayer(x);if(k)return k.getLayoutProperty(O);this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style.")))},S.prototype.setPaintProperty=function(x,O,k,Z){Z===void 0&&(Z={}),this._checkLoaded();var K=this.getLayer(x);K?E.deepEqual(K.getPaintProperty(O),k)||(K.setPaintProperty(O,k,Z)&&this._updateLayer(K),this._changed=!0,this._updatedPaintProps[x]=!0):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getPaintProperty=function(x,O){return this.getLayer(x).getPaintProperty(O)},S.prototype.setFeatureState=function(x,O){this._checkLoaded();var k=x.source,Z=x.sourceLayer,K=this.sourceCaches[k];if(K!==void 0){var ge=K.getSource().type;ge==="geojson"&&Z?this.fire(new E.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ge!=="vector"||Z?(x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),K.setFeatureState(Z,x.id,O)):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.removeFeatureState=function(x,O){this._checkLoaded();var k=x.source,Z=this.sourceCaches[k];if(Z!==void 0){var K=Z.getSource().type,ge=K==="vector"?x.sourceLayer:void 0;K!=="vector"||ge?O&&typeof x.id!="string"&&typeof x.id!="number"?this.fire(new E.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Z.removeFeatureState(ge,x.id,O):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.getFeatureState=function(x){this._checkLoaded();var O=x.source,k=x.sourceLayer,Z=this.sourceCaches[O];if(Z!==void 0){if(Z.getSource().type!=="vector"||k)return x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),Z.getFeatureState(k,x.id);this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+O+"' does not exist in the map's style.")))},S.prototype.getTransition=function(){return E.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},S.prototype.serialize=function(){return E.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:E.mapObject(this.sourceCaches,function(x){return x.serialize()}),layers:this._serializeLayers(this._order)},function(x){return x!==void 0})},S.prototype._updateLayer=function(x){this._updatedLayers[x.id]=!0,x.source&&!this._updatedSources[x.source]&&this.sourceCaches[x.source].getSource().type!=="raster"&&(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause()),this._changed=!0},S.prototype._flattenAndSortRenderedFeatures=function(x){for(var O=this,k=function(Hi){return O._layers[Hi].type==="fill-extrusion"},Z={},K=[],ge=this._order.length-1;ge>=0;ge--){var Ve=this._order[ge];if(k(Ve)){Z[Ve]=ge;for(var ct=0,jt=x;ct<jt.length;ct+=1){var Vt=jt[ct][Ve];if(Vt)for(var Xt=0,En=Vt;Xt<En.length;Xt+=1)K.push(En[Xt])}}}K.sort(function(Hi,Fi){return Fi.intersectionZ-Hi.intersectionZ});for(var gn=[],kn=this._order.length-1;kn>=0;kn--){var un=this._order[kn];if(k(un))for(var zn=K.length-1;zn>=0;zn--){var tr=K[zn].feature;if(Z[tr.layer.id]<kn)break;gn.push(tr),K.pop()}else for(var gr=0,Ir=x;gr<Ir.length;gr+=1){var Or=Ir[gr][un];if(Or)for(var zr=0,ii=Or;zr<ii.length;zr+=1)gn.push(ii[zr].feature)}}return gn},S.prototype.queryRenderedFeatures=function(x,O,k){O&&O.filter&&this._validate(E.validateStyle.filter,"queryRenderedFeatures.filter",O.filter,null,O);var Z={};if(O&&O.layers){if(!Array.isArray(O.layers))return this.fire(new E.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var K=0,ge=O.layers;K<ge.length;K+=1){var Ve=ge[K],ct=this._layers[Ve];if(!ct)return this.fire(new E.ErrorEvent(new Error("The layer '"+Ve+"' does not exist in the map's style and cannot be queried for features."))),[];Z[ct.source]=!0}}var jt=[];for(var Vt in O.availableImages=this._availableImages,this.sourceCaches)O.layers&&!Z[Vt]||jt.push(Tn(this.sourceCaches[Vt],this._layers,this._serializedLayers,x,O,k));return this.placement&&jt.push(function(Xt,En,gn,kn,un,zn,tr){for(var gr={},Ir=zn.queryRenderedSymbols(kn),Or=[],zr=0,ii=Object.keys(Ir).map(Number);zr<ii.length;zr+=1)Or.push(tr[ii[zr]]);Or.sort(lr);for(var Hi=function(){var Kt=po[Fi],Ya=Kt.featureIndex.lookupSymbolFeatures(Ir[Kt.bucketInstanceId],En,Kt.bucketIndex,Kt.sourceLayerIndex,un.filter,un.layers,un.availableImages,Xt);for(var yo in Ya){var Qo=gr[yo]=gr[yo]||[],Oa=Ya[yo];Oa.sort(function(xa,aa){var ta=Kt.featureSortOrder;if(ta){var Vl=ta.indexOf(xa.featureIndex);return ta.indexOf(aa.featureIndex)-Vl}return aa.featureIndex-xa.featureIndex});for(var fa=0,Go=Oa;fa<Go.length;fa+=1)Qo.push(Go[fa])}},Fi=0,po=Or;Fi<po.length;Fi+=1)Hi();var Vo=function(Kt){gr[Kt].forEach(function(Ya){var yo=Ya.feature,Qo=gn[Xt[Kt].source].getFeatureState(yo.layer["source-layer"],yo.id);yo.source=yo.layer.source,yo.layer["source-layer"]&&(yo.sourceLayer=yo.layer["source-layer"]),yo.state=Qo})};for(var $r in gr)Vo($r);return gr}(this._layers,this._serializedLayers,this.sourceCaches,x,O,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(jt)},S.prototype.querySourceFeatures=function(x,O){O&&O.filter&&this._validate(E.validateStyle.filter,"querySourceFeatures.filter",O.filter,null,O);var k=this.sourceCaches[x];return k?function(Z,K){for(var ge=Z.getRenderableIds().map(function(En){return Z.getTileByID(En)}),Ve=[],ct={},jt=0;jt<ge.length;jt++){var Vt=ge[jt],Xt=Vt.tileID.canonical.key;ct[Xt]||(ct[Xt]=!0,Vt.querySourceFeatures(Ve,K))}return Ve}(k,O):[]},S.prototype.addSourceType=function(x,O,k){return S.getSourceType(x)?k(new Error('A source type called "'+x+'" already exists.')):(S.setSourceType(x,O),O.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:x,url:O.workerSourceURL},k):k(null,null))},S.prototype.getLight=function(){return this.light.getLight()},S.prototype.setLight=function(x,O){O===void 0&&(O={}),this._checkLoaded();var k=this.light.getLight(),Z=!1;for(var K in x)if(!E.deepEqual(x[K],k[K])){Z=!0;break}if(Z){var ge={now:E.browser.now(),transition:E.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(x,O),this.light.updateTransitions(ge)}},S.prototype._validate=function(x,O,k,Z,K){return K===void 0&&(K={}),(!K||K.validate!==!1)&&au(this,x.call(E.validateStyle,E.extend({key:O,style:this.serialize(),value:k,styleSpec:E.styleSpec},Z)))},S.prototype._remove=function(){for(var x in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),E.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[x].setEventedParent(null);for(var O in this.sourceCaches)this.sourceCaches[O].clearTiles(),this.sourceCaches[O].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},S.prototype._clearSource=function(x){this.sourceCaches[x].clearTiles()},S.prototype._reloadSource=function(x){this.sourceCaches[x].resume(),this.sourceCaches[x].reload()},S.prototype._updateSources=function(x){for(var O in this.sourceCaches)this.sourceCaches[O].update(x)},S.prototype._generateCollisionBoxes=function(){for(var x in this.sourceCaches)this._reloadSource(x)},S.prototype._updatePlacement=function(x,O,k,Z,K){K===void 0&&(K=!1);for(var ge=!1,Ve=!1,ct={},jt=0,Vt=this._order;jt<Vt.length;jt+=1){var Xt=this._layers[Vt[jt]];if(Xt.type==="symbol"){if(!ct[Xt.source]){var En=this.sourceCaches[Xt.source];ct[Xt.source]=En.getRenderableIds(!0).map(function(tr){return En.getTileByID(tr)}).sort(function(tr,gr){return gr.tileID.overscaledZ-tr.tileID.overscaledZ||(tr.tileID.isLessThan(gr.tileID)?-1:1)})}var gn=this.crossTileSymbolIndex.addLayer(Xt,ct[Xt.source],x.center.lng);ge=ge||gn}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((K=K||this._layerOrderChanged||k===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.browser.now(),x.zoom))&&(this.pauseablePlacement=new Gh(x,this._order,K,O,k,Z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ct),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.browser.now()),Ve=!0),ge&&this.pauseablePlacement.placement.setStale()),Ve||ge)for(var kn=0,un=this._order;kn<un.length;kn+=1){var zn=this._layers[un[kn]];zn.type==="symbol"&&this.placement.updateLayerOpacities(zn,ct[zn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.browser.now())},S.prototype._releaseSymbolFadeTiles=function(){for(var x in this.sourceCaches)this.sourceCaches[x].releaseSymbolFadeTiles()},S.prototype.getImages=function(x,O,k){this.imageManager.getImages(O.icons,k),this._updateTilesForChangedImages();var Z=this.sourceCaches[O.source];Z&&Z.setDependencies(O.tileID.key,O.type,O.icons)},S.prototype.getGlyphs=function(x,O,k){this.glyphManager.getGlyphs(O.stacks,k)},S.prototype.getResource=function(x,O,k){return E.makeRequest(O,k)},S}(E.Evented);Ou.getSourceType=function(_){return Zt[_]},Ou.setSourceType=function(_,S){Zt[_]=S},Ou.registerForPluginStateChange=E.registerForPluginStateChange;var xs=E.createLayout([{name:"a_pos",type:"Int16",components:2}]),tc=ys(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),sf=ys(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ed=ys(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),np=ys(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),jf=ys("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Sd=ys(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),yh=ys(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Zh=ys("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Xh=ys("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),wd=ys("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Qp=ys(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),lf=ys(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Vc=ys(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Td=ys(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),jl=ys(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ac=ys(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),uf=ys(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),su=ys(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Hc=ys(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),hc=ys(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),wf=ys(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ml=ys(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),cf=ys(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Tf=ys(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ad=ys(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Cd=ys(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ys(_,S){var x=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,O=S.match(/attribute ([\w]+) ([\w]+)/g),k=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Z=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),K=Z?Z.concat(k):k,ge={};return{fragmentSource:_=_.replace(x,function(Ve,ct,jt,Vt,Xt){return ge[Xt]=!0,ct==="define"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
varying `+jt+" "+Vt+" "+Xt+`;
#else
uniform `+jt+" "+Vt+" u_"+Xt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Xt+`
    `+jt+" "+Vt+" "+Xt+" = u_"+Xt+`;
#endif
`}),vertexSource:S=S.replace(x,function(Ve,ct,jt,Vt,Xt){var En=Vt==="float"?"vec2":"vec4",gn=Xt.match(/color/)?"color":En;return ge[Xt]?ct==="define"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
uniform lowp float u_`+Xt+`_t;
attribute `+jt+" "+En+" a_"+Xt+`;
varying `+jt+" "+Vt+" "+Xt+`;
#else
uniform `+jt+" "+Vt+" u_"+Xt+`;
#endif
`:gn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Xt+" = a_"+Xt+`;
#else
    `+jt+" "+Vt+" "+Xt+" = u_"+Xt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+Xt+" = unpack_mix_"+gn+"(a_"+Xt+", u_"+Xt+`_t);
#else
    `+jt+" "+Vt+" "+Xt+" = u_"+Xt+`;
#endif
`:ct==="define"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
uniform lowp float u_`+Xt+`_t;
attribute `+jt+" "+En+" a_"+Xt+`;
#else
uniform `+jt+" "+Vt+" u_"+Xt+`;
#endif
`:gn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+jt+" "+Vt+" "+Xt+" = a_"+Xt+`;
#else
    `+jt+" "+Vt+" "+Xt+" = u_"+Xt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Xt+`
    `+jt+" "+Vt+" "+Xt+" = unpack_mix_"+gn+"(a_"+Xt+", u_"+Xt+`_t);
#else
    `+jt+" "+Vt+" "+Xt+" = u_"+Xt+`;
#endif
`}),staticAttributes:O,staticUniforms:K}}var rp=Object.freeze({__proto__:null,prelude:tc,background:sf,backgroundPattern:Ed,circle:np,clippingMask:jf,heatmap:Sd,heatmapTexture:yh,collisionBox:Zh,collisionCircle:Xh,debug:wd,fill:Qp,fillOutline:lf,fillOutlinePattern:Vc,fillPattern:Td,fillExtrusion:jl,fillExtrusionPattern:Ac,hillshadePrepare:uf,hillshade:su,line:Hc,lineGradient:hc,linePattern:wf,lineSDF:Ml,raster:cf,symbolIcon:Tf,symbolSDF:Ad,symbolTextAndIcon:Cd}),Qf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Yh(_){for(var S=[],x=0;x<_.length;x++)if(_[x]!==null){var O=_[x].split(" ");S.push(O.pop())}return S}Qf.prototype.bind=function(_,S,x,O,k,Z,K,ge){this.context=_;for(var Ve=this.boundPaintVertexBuffers.length!==O.length,ct=0;!Ve&&ct<O.length;ct++)this.boundPaintVertexBuffers[ct]!==O[ct]&&(Ve=!0);_.extVertexArrayObject&&this.vao&&this.boundProgram===S&&this.boundLayoutVertexBuffer===x&&!Ve&&this.boundIndexBuffer===k&&this.boundVertexOffset===Z&&this.boundDynamicVertexBuffer===K&&this.boundDynamicVertexBuffer2===ge?(_.bindVertexArrayOES.set(this.vao),K&&K.bind(),k&&k.dynamicDraw&&k.bind(),ge&&ge.bind()):this.freshBind(S,x,O,k,Z,K,ge)},Qf.prototype.freshBind=function(_,S,x,O,k,Z,K){var ge,Ve=_.numAttributes,ct=this.context,jt=ct.gl;if(ct.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ct.extVertexArrayObject.createVertexArrayOES(),ct.bindVertexArrayOES.set(this.vao),ge=0,this.boundProgram=_,this.boundLayoutVertexBuffer=S,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=O,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=Z,this.boundDynamicVertexBuffer2=K;else{ge=ct.currentNumAttributes||0;for(var Vt=Ve;Vt<ge;Vt++)jt.disableVertexAttribArray(Vt)}S.enableAttributes(jt,_);for(var Xt=0,En=x;Xt<En.length;Xt+=1)En[Xt].enableAttributes(jt,_);Z&&Z.enableAttributes(jt,_),K&&K.enableAttributes(jt,_),S.bind(),S.setVertexAttribPointers(jt,_,k);for(var gn=0,kn=x;gn<kn.length;gn+=1){var un=kn[gn];un.bind(),un.setVertexAttribPointers(jt,_,k)}Z&&(Z.bind(),Z.setVertexAttribPointers(jt,_,k)),O&&O.bind(),K&&(K.bind(),K.setVertexAttribPointers(jt,_,k)),ct.currentNumAttributes=Ve},Qf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var sl=function(_,S,x,O,k,Z){var K=_.gl;this.program=K.createProgram();for(var ge=Yh(x.staticAttributes),Ve=O?O.getBinderAttributes():[],ct=ge.concat(Ve),jt=x.staticUniforms?Yh(x.staticUniforms):[],Vt=O?O.getBinderUniforms():[],Xt=[],En=0,gn=jt.concat(Vt);En<gn.length;En+=1){var kn=gn[En];Xt.indexOf(kn)<0&&Xt.push(kn)}var un=O?O.defines():[];Z&&un.push("#define OVERDRAW_INSPECTOR;");var zn=un.concat(tc.fragmentSource,x.fragmentSource).join(`
`),tr=un.concat(tc.vertexSource,x.vertexSource).join(`
`),gr=K.createShader(K.FRAGMENT_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(gr,zn),K.compileShader(gr),K.attachShader(this.program,gr);var Ir=K.createShader(K.VERTEX_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(Ir,tr),K.compileShader(Ir),K.attachShader(this.program,Ir),this.attributes={};var Or={};this.numAttributes=ct.length;for(var zr=0;zr<this.numAttributes;zr++)ct[zr]&&(K.bindAttribLocation(this.program,zr,ct[zr]),this.attributes[ct[zr]]=zr);K.linkProgram(this.program),K.deleteShader(Ir),K.deleteShader(gr);for(var ii=0;ii<Xt.length;ii++){var Hi=Xt[ii];if(Hi&&!Or[Hi]){var Fi=K.getUniformLocation(this.program,Hi);Fi&&(Or[Hi]=Fi)}}this.fixedUniforms=k(_,Or),this.binderUniforms=O?O.getUniforms(_,Or):[]}}};function $h(_,S,x){var O=1/di(x,1,S.transform.tileZoom),k=Math.pow(2,x.tileID.overscaledZ),Z=x.tileSize*Math.pow(2,S.transform.tileZoom)/k,K=Z*(x.tileID.canonical.x+x.tileID.wrap*k),ge=Z*x.tileID.canonical.y;return{u_image:0,u_texsize:x.imageAtlasTexture.size,u_scale:[O,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[K>>16,ge>>16],u_pixel_coord_lower:[65535&K,65535&ge]}}sl.prototype.draw=function(_,S,x,O,k,Z,K,ge,Ve,ct,jt,Vt,Xt,En,gn,kn){var un,zn=_.gl;if(!this.failedToCreate){for(var tr in _.program.set(this.program),_.setDepthMode(x),_.setStencilMode(O),_.setColorMode(k),_.setCullFace(Z),this.fixedUniforms)this.fixedUniforms[tr].set(K[tr]);En&&En.setUniforms(_,this.binderUniforms,Vt,{zoom:Xt});for(var gr=(un={},un[zn.LINES]=2,un[zn.TRIANGLES]=3,un[zn.LINE_STRIP]=1,un)[S],Ir=0,Or=jt.get();Ir<Or.length;Ir+=1){var zr=Or[Ir],ii=zr.vaos||(zr.vaos={});(ii[ge]||(ii[ge]=new Qf)).bind(_,this,Ve,En?En.getPaintVertexBuffers():[],ct,zr.vertexOffset,gn,kn),zn.drawElements(S,zr.primitiveLength*gr,zn.UNSIGNED_SHORT,zr.primitiveOffset*gr*2)}}};var _h=function(_,S,x,O){var k=S.style.light,Z=k.properties.get("position"),K=[Z.x,Z.y,Z.z],ge=E.create$1();k.properties.get("anchor")==="viewport"&&E.fromRotation(ge,-S.transform.angle),E.transformMat3(K,K,ge);var Ve=k.properties.get("color");return{u_matrix:_,u_lightpos:K,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[Ve.r,Ve.g,Ve.b],u_vertical_gradient:+x,u_opacity:O}},_u=function(_,S,x,O,k,Z,K){return E.extend(_h(_,S,x,O),$h(Z,S,K),{u_height_factor:-Math.pow(2,k.overscaledZ)/K.tileSize/8})},Wc=function(_){return{u_matrix:_}},Mu=function(_,S,x,O){return E.extend(Wc(_),$h(x,S,O))},Cc=function(_,S){return{u_matrix:_,u_world:S}},we=function(_,S,x,O,k){return E.extend(Mu(_,S,x,O),{u_world:k})},oe=function(_,S,x,O){var k,Z,K=_.transform;if(O.paint.get("circle-pitch-alignment")==="map"){var ge=di(x,1,K.zoom);k=!0,Z=[ge,ge]}else k=!1,Z=K.pixelsToGLUnits;return{u_camera_to_center_distance:K.cameraToCenterDistance,u_scale_with_map:+(O.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(S.posMatrix,x,O.paint.get("circle-translate"),O.paint.get("circle-translate-anchor")),u_pitch_with_map:+k,u_device_pixel_ratio:E.browser.devicePixelRatio,u_extrude_scale:Z}},pe=function(_,S,x){var O=di(x,1,S.zoom),k=Math.pow(2,S.zoom-x.tileID.overscaledZ),Z=x.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:S.cameraToCenterDistance,u_pixels_to_tile_units:O,u_extrude_scale:[S.pixelsToGLUnits[0]/(O*k),S.pixelsToGLUnits[1]/(O*k)],u_overscale_factor:Z}},Je=function(_,S,x){return{u_matrix:_,u_inv_matrix:S,u_camera_to_center_distance:x.cameraToCenterDistance,u_viewport_size:[x.width,x.height]}},sn=function(_,S,x){return x===void 0&&(x=1),{u_matrix:_,u_color:S,u_overlay:0,u_overlay_scale:x}},fn=function(_){return{u_matrix:_}},ir=function(_,S,x,O){return{u_matrix:_,u_extrude_scale:di(S,1,x),u_intensity:O}},Cr=function(_,S,x){var O=_.transform;return{u_matrix:Na(_,S,x),u_ratio:1/di(S,1,O.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},Xr=function(_,S,x,O){return E.extend(Cr(_,S,x),{u_image:0,u_image_height:O})},Bi=function(_,S,x,O){var k=_.transform,Z=vo(S,k);return{u_matrix:Na(_,S,x),u_texsize:S.imageAtlasTexture.size,u_ratio:1/di(S,1,k.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_image:0,u_scale:[Z,O.fromScale,O.toScale],u_fade:O.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},bo=function(_,S,x,O,k){var Z=_.lineAtlas,K=vo(S,_.transform),ge=x.layout.get("line-cap")==="round",Ve=Z.getDash(O.from,ge),ct=Z.getDash(O.to,ge),jt=Ve.width*k.fromScale,Vt=ct.width*k.toScale;return E.extend(Cr(_,S,x),{u_patternscale_a:[K/jt,-Ve.height/2],u_patternscale_b:[K/Vt,-ct.height/2],u_sdfgamma:Z.width/(256*Math.min(jt,Vt)*E.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ve.y,u_tex_y_b:ct.y,u_mix:k.t})};function vo(_,S){return 1/di(_,1,S.tileZoom)}function Na(_,S,x){return _.translatePosMatrix(S.tileID.posMatrix,S,x.paint.get("line-translate"),x.paint.get("line-translate-anchor"))}var Fa=function(_,S,x,O,k){return{u_matrix:_,u_tl_parent:S,u_scale_parent:x,u_buffer_scale:1,u_fade_t:O.mix,u_opacity:O.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(K=k.paint.get("raster-saturation"),K>0?1-1/(1.001-K):-K),u_contrast_factor:(Z=k.paint.get("raster-contrast"),Z>0?1/(1-Z):1+Z),u_spin_weights:Ea(k.paint.get("raster-hue-rotate"))};var Z,K};function Ea(_){_*=Math.PI/180;var S=Math.sin(_),x=Math.cos(_);return[(2*x+1)/3,(-Math.sqrt(3)*S-x+1)/3,(Math.sqrt(3)*S-x+1)/3]}var Aa,_a=function(_,S,x,O,k,Z,K,ge,Ve,ct){var jt=k.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:S?S.uSizeT:0,u_size:S?S.uSize:0,u_camera_to_center_distance:jt.cameraToCenterDistance,u_pitch:jt.pitch/360*2*Math.PI,u_rotate_symbol:+x,u_aspect_ratio:jt.width/jt.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:Z,u_label_plane_matrix:K,u_coord_matrix:ge,u_is_text:+Ve,u_pitch_with_map:+O,u_texsize:ct,u_texture:0}},Ba=function(_,S,x,O,k,Z,K,ge,Ve,ct,jt){var Vt=k.transform;return E.extend(_a(_,S,x,O,k,Z,K,ge,Ve,ct),{u_gamma_scale:O?Math.cos(Vt._pitch)*Vt.cameraToCenterDistance:1,u_device_pixel_ratio:E.browser.devicePixelRatio,u_is_halo:+jt})},Ca=function(_,S,x,O,k,Z,K,ge,Ve,ct){return E.extend(Ba(_,S,x,O,k,Z,K,ge,!0,Ve,!0),{u_texsize_icon:ct,u_texture_icon:1})},Xa=function(_,S,x){return{u_matrix:_,u_opacity:S,u_color:x}},ba=function(_,S,x,O,k,Z){return E.extend(function(K,ge,Ve,ct){var jt=Ve.imageManager.getPattern(K.from.toString()),Vt=Ve.imageManager.getPattern(K.to.toString()),Xt=Ve.imageManager.getPixelSize(),En=Xt.width,gn=Xt.height,kn=Math.pow(2,ct.tileID.overscaledZ),un=ct.tileSize*Math.pow(2,Ve.transform.tileZoom)/kn,zn=un*(ct.tileID.canonical.x+ct.tileID.wrap*kn),tr=un*ct.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:jt.tl,u_pattern_br_a:jt.br,u_pattern_tl_b:Vt.tl,u_pattern_br_b:Vt.br,u_texsize:[En,gn],u_mix:ge.t,u_pattern_size_a:jt.displaySize,u_pattern_size_b:Vt.displaySize,u_scale_a:ge.fromScale,u_scale_b:ge.toScale,u_tile_units_to_pixels:1/di(ct,1,Ve.transform.tileZoom),u_pixel_coord_upper:[zn>>16,tr>>16],u_pixel_coord_lower:[65535&zn,65535&tr]}}(O,Z,x,k),{u_matrix:_,u_opacity:S})},cs={fillExtrusion:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fillExtrusionPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_height_factor:new E.Uniform1f(_,S.u_height_factor),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fill:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},fillPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},fillOutline:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world)}},fillOutlinePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},circle:function(_,S){return{u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_scale_with_map:new E.Uniform1i(_,S.u_scale_with_map),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},collisionBox:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pixels_to_tile_units:new E.Uniform1f(_,S.u_pixels_to_tile_units),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_overscale_factor:new E.Uniform1f(_,S.u_overscale_factor)}},collisionCircle:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_inv_matrix:new E.UniformMatrix4f(_,S.u_inv_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_viewport_size:new E.Uniform2f(_,S.u_viewport_size)}},debug:function(_,S){return{u_color:new E.UniformColor(_,S.u_color),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_overlay:new E.Uniform1i(_,S.u_overlay),u_overlay_scale:new E.Uniform1f(_,S.u_overlay_scale)}},clippingMask:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmap:function(_,S){return{u_extrude_scale:new E.Uniform1f(_,S.u_extrude_scale),u_intensity:new E.Uniform1f(_,S.u_intensity),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmapTexture:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_color_ramp:new E.Uniform1i(_,S.u_color_ramp),u_opacity:new E.Uniform1f(_,S.u_opacity)}},hillshade:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_latrange:new E.Uniform2f(_,S.u_latrange),u_light:new E.Uniform2f(_,S.u_light),u_shadow:new E.UniformColor(_,S.u_shadow),u_highlight:new E.UniformColor(_,S.u_highlight),u_accent:new E.UniformColor(_,S.u_accent)}},hillshadePrepare:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_dimension:new E.Uniform2f(_,S.u_dimension),u_zoom:new E.Uniform1f(_,S.u_zoom),u_unpack:new E.Uniform4f(_,S.u_unpack)}},line:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels)}},lineGradient:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_image:new E.Uniform1i(_,S.u_image),u_image_height:new E.Uniform1f(_,S.u_image_height)}},linePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_texsize:new E.Uniform2f(_,S.u_texsize),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_image:new E.Uniform1i(_,S.u_image),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},lineSDF:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_patternscale_a:new E.Uniform2f(_,S.u_patternscale_a),u_patternscale_b:new E.Uniform2f(_,S.u_patternscale_b),u_sdfgamma:new E.Uniform1f(_,S.u_sdfgamma),u_image:new E.Uniform1i(_,S.u_image),u_tex_y_a:new E.Uniform1f(_,S.u_tex_y_a),u_tex_y_b:new E.Uniform1f(_,S.u_tex_y_b),u_mix:new E.Uniform1f(_,S.u_mix)}},raster:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_tl_parent:new E.Uniform2f(_,S.u_tl_parent),u_scale_parent:new E.Uniform1f(_,S.u_scale_parent),u_buffer_scale:new E.Uniform1f(_,S.u_buffer_scale),u_fade_t:new E.Uniform1f(_,S.u_fade_t),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image0:new E.Uniform1i(_,S.u_image0),u_image1:new E.Uniform1i(_,S.u_image1),u_brightness_low:new E.Uniform1f(_,S.u_brightness_low),u_brightness_high:new E.Uniform1f(_,S.u_brightness_high),u_saturation_factor:new E.Uniform1f(_,S.u_saturation_factor),u_contrast_factor:new E.Uniform1f(_,S.u_contrast_factor),u_spin_weights:new E.Uniform3f(_,S.u_spin_weights)}},symbolIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture)}},symbolSDF:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},symbolTextAndIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texsize_icon:new E.Uniform2f(_,S.u_texsize_icon),u_texture:new E.Uniform1i(_,S.u_texture),u_texture_icon:new E.Uniform1i(_,S.u_texture_icon),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},background:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_color:new E.UniformColor(_,S.u_color)}},backgroundPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image:new E.Uniform1i(_,S.u_image),u_pattern_tl_a:new E.Uniform2f(_,S.u_pattern_tl_a),u_pattern_br_a:new E.Uniform2f(_,S.u_pattern_br_a),u_pattern_tl_b:new E.Uniform2f(_,S.u_pattern_tl_b),u_pattern_br_b:new E.Uniform2f(_,S.u_pattern_br_b),u_texsize:new E.Uniform2f(_,S.u_texsize),u_mix:new E.Uniform1f(_,S.u_mix),u_pattern_size_a:new E.Uniform2f(_,S.u_pattern_size_a),u_pattern_size_b:new E.Uniform2f(_,S.u_pattern_size_b),u_scale_a:new E.Uniform1f(_,S.u_scale_a),u_scale_b:new E.Uniform1f(_,S.u_scale_b),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_tile_units_to_pixels:new E.Uniform1f(_,S.u_tile_units_to_pixels)}}};function Ws(_,S,x,O,k,Z,K){for(var ge=_.context,Ve=ge.gl,ct=_.useProgram("collisionBox"),jt=[],Vt=0,Xt=0,En=0;En<O.length;En++){var gn=O[En],kn=S.getTile(gn),un=kn.getBucket(x);if(un){var zn=gn.posMatrix;k[0]===0&&k[1]===0||(zn=_.translatePosMatrix(gn.posMatrix,kn,k,Z));var tr=K?un.textCollisionBox:un.iconCollisionBox,gr=un.collisionCircleArray;if(gr.length>0){var Ir=E.create(),Or=zn;E.mul(Ir,un.placementInvProjMatrix,_.transform.glCoordMatrix),E.mul(Ir,Ir,un.placementViewportMatrix),jt.push({circleArray:gr,circleOffset:Xt,transform:Or,invTransform:Ir}),Xt=Vt+=gr.length/4}tr&&ct.draw(ge,Ve.LINES,at.disabled,At.disabled,_.colorModeForRenderPass(),cn.disabled,pe(zn,_.transform,kn),x.id,tr.layoutVertexBuffer,tr.indexBuffer,tr.segments,null,_.transform.zoom,null,null,tr.collisionVertexBuffer)}}if(K&&jt.length){var zr=_.useProgram("collisionCircle"),ii=new E.StructArrayLayout2f1f2i16;ii.resize(4*Vt),ii._trim();for(var Hi=0,Fi=0,po=jt;Fi<po.length;Fi+=1)for(var Vo=po[Fi],$r=0;$r<Vo.circleArray.length/4;$r++){var Kt=4*$r,Ya=Vo.circleArray[Kt+0],yo=Vo.circleArray[Kt+1],Qo=Vo.circleArray[Kt+2],Oa=Vo.circleArray[Kt+3];ii.emplace(Hi++,Ya,yo,Qo,Oa,0),ii.emplace(Hi++,Ya,yo,Qo,Oa,1),ii.emplace(Hi++,Ya,yo,Qo,Oa,2),ii.emplace(Hi++,Ya,yo,Qo,Oa,3)}(!Aa||Aa.length<2*Vt)&&(Aa=function(Ls){var lu=2*Ls,Us=new E.StructArrayLayout3ui6;Us.resize(lu),Us._trim();for(var ll=0;ll<lu;ll++){var Il=6*ll;Us.uint16[Il+0]=4*ll+0,Us.uint16[Il+1]=4*ll+1,Us.uint16[Il+2]=4*ll+2,Us.uint16[Il+3]=4*ll+2,Us.uint16[Il+4]=4*ll+3,Us.uint16[Il+5]=4*ll+0}return Us}(Vt));for(var fa=ge.createIndexBuffer(Aa,!0),Go=ge.createVertexBuffer(ii,E.collisionCircleLayout.members,!0),xa=0,aa=jt;xa<aa.length;xa+=1){var ta=aa[xa],Vl=Je(ta.transform,ta.invTransform,_.transform);zr.draw(ge,Ve.TRIANGLES,at.disabled,At.disabled,_.colorModeForRenderPass(),cn.disabled,Vl,x.id,Go,fa,E.SegmentVector.simpleSegment(0,2*ta.circleOffset,ta.circleArray.length,ta.circleArray.length/2),null,_.transform.zoom,null,null,null)}Go.destroy(),fa.destroy()}}var zs=E.identity(new Float32Array(16));function dc(_,S,x,O,k,Z){var K=E.getAnchorAlignment(_),ge=-(K.horizontalAlign-.5)*S,Ve=-(K.verticalAlign-.5)*x,ct=E.evaluateVariableOffset(_,O);return new E.Point((ge/k+ct[0])*Z,(Ve/k+ct[1])*Z)}function dl(_,S,x,O,k,Z,K,ge,Ve,ct,jt){var Vt=_.text.placedSymbolArray,Xt=_.text.dynamicLayoutVertexArray,En=_.icon.dynamicLayoutVertexArray,gn={};Xt.clear();for(var kn=0;kn<Vt.length;kn++){var un=Vt.get(kn),zn=un.hidden||!un.crossTileID||_.allowVerticalPlacement&&!un.placedOrientation?null:O[un.crossTileID];if(zn){var tr=new E.Point(un.anchorX,un.anchorY),gr=Bn(tr,x?ge:K),Ir=_n(Z.cameraToCenterDistance,gr.signedDistanceFromCamera),Or=k.evaluateSizeForFeature(_.textSizeData,ct,un)*Ir/E.ONE_EM;x&&(Or*=_.tilePixelRatio/Ve);for(var zr=dc(zn.anchor,zn.width,zn.height,zn.textOffset,zn.textBoxScale,Or),ii=x?Bn(tr.add(zr),K).point:gr.point.add(S?zr.rotate(-Z.angle):zr),Hi=_.allowVerticalPlacement&&un.placedOrientation===E.WritingMode.vertical?Math.PI/2:0,Fi=0;Fi<un.numGlyphs;Fi++)E.addDynamicAttributes(Xt,ii,Hi);jt&&un.associatedIconIndex>=0&&(gn[un.associatedIconIndex]={shiftedAnchor:ii,angle:Hi})}else zi(un.numGlyphs,Xt)}if(jt){En.clear();for(var po=_.icon.placedSymbolArray,Vo=0;Vo<po.length;Vo++){var $r=po.get(Vo);if($r.hidden)zi($r.numGlyphs,En);else{var Kt=gn[Vo];if(Kt)for(var Ya=0;Ya<$r.numGlyphs;Ya++)E.addDynamicAttributes(En,Kt.shiftedAnchor,Kt.angle);else zi($r.numGlyphs,En)}}_.icon.dynamicLayoutVertexBuffer.updateData(En)}_.text.dynamicLayoutVertexBuffer.updateData(Xt)}function ff(_,S,x){return x.iconsInText&&S?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function hf(_,S,x,O,k,Z,K,ge,Ve,ct,jt,Vt){for(var Xt=_.context,En=Xt.gl,gn=_.transform,kn=ge==="map",un=Ve==="map",zn=kn&&x.layout.get("symbol-placement")!=="point",tr=kn&&!un&&!zn,gr=x.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ir=!1,Or=_.depthModeForSublayer(0,at.ReadOnly),zr=x.layout.get("text-variable-anchor"),ii=[],Hi=0,Fi=O;Hi<Fi.length;Hi+=1){var po=Fi[Hi],Vo=S.getTile(po),$r=Vo.getBucket(x);if($r){var Kt=k?$r.text:$r.icon;if(Kt&&Kt.segments.get().length){var Ya=Kt.programConfigurations.get(x.id),yo=k||$r.sdfIcons,Qo=k?$r.textSizeData:$r.iconSizeData,Oa=un||gn.pitch!==0,fa=_.useProgram(ff(yo,k,$r),Ya),Go=E.evaluateSizeForZoom(Qo,gn.zoom),xa=void 0,aa=[0,0],ta=void 0,Vl=void 0,Ls=null,lu=void 0;if(k)ta=Vo.glyphAtlasTexture,Vl=En.LINEAR,xa=Vo.glyphAtlasTexture.size,$r.iconsInText&&(aa=Vo.imageAtlasTexture.size,Ls=Vo.imageAtlasTexture,lu=Oa||_.options.rotating||_.options.zooming||Qo.kind==="composite"||Qo.kind==="camera"?En.LINEAR:En.NEAREST);else{var Us=x.layout.get("icon-size").constantOr(0)!==1||$r.iconsNeedLinear;ta=Vo.imageAtlasTexture,Vl=yo||_.options.rotating||_.options.zooming||Us||Oa?En.LINEAR:En.NEAREST,xa=Vo.imageAtlasTexture.size}var ll=di(Vo,1,_.transform.zoom),Il=dn(po.posMatrix,un,kn,_.transform,ll),Mc=Fn(po.posMatrix,un,kn,_.transform,ll),Hu=zr&&$r.hasTextData(),Zf=x.layout.get("icon-text-fit")!=="none"&&Hu&&$r.hasIconData();zn&&pr($r,po.posMatrix,_,k,Il,Mc,un,ct);var _c=_.translatePosMatrix(po.posMatrix,Vo,Z,K),Xf=zn||k&&zr||Zf?zs:Il,Xc=_.translatePosMatrix(Mc,Vo,Z,K,!0),Dp=yo&&x.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0,up={program:fa,buffers:Kt,uniformValues:yo?$r.iconsInText?Ca(Qo.kind,Go,tr,un,_,_c,Xf,Xc,xa,aa):Ba(Qo.kind,Go,tr,un,_,_c,Xf,Xc,k,xa,!0):_a(Qo.kind,Go,tr,un,_,_c,Xf,Xc,k,xa),atlasTexture:ta,atlasTextureIcon:Ls,atlasInterpolation:Vl,atlasInterpolationIcon:lu,isSDF:yo,hasHalo:Dp};if(gr&&$r.canOverlap){Ir=!0;for(var Oh=0,Mi=Kt.segments.get();Oh<Mi.length;Oh+=1){var Rc=Mi[Oh];ii.push({segments:new E.SegmentVector([Rc]),sortKey:Rc.sortKey,state:up})}}else ii.push({segments:Kt.segments,sortKey:0,state:up})}}}Ir&&ii.sort(function(Pf,If){return Pf.sortKey-If.sortKey});for(var Yf=0,rd=ii;Yf<rd.length;Yf+=1){var Wu=rd[Yf],xl=Wu.state;if(Xt.activeTexture.set(En.TEXTURE0),xl.atlasTexture.bind(xl.atlasInterpolation,En.CLAMP_TO_EDGE),xl.atlasTextureIcon&&(Xt.activeTexture.set(En.TEXTURE1),xl.atlasTextureIcon&&xl.atlasTextureIcon.bind(xl.atlasInterpolationIcon,En.CLAMP_TO_EDGE)),xl.isSDF){var oc=xl.uniformValues;xl.hasHalo&&(oc.u_is_halo=1,pc(xl.buffers,Wu.segments,x,_,xl.program,Or,jt,Vt,oc)),oc.u_is_halo=0}pc(xl.buffers,Wu.segments,x,_,xl.program,Or,jt,Vt,xl.uniformValues)}}function pc(_,S,x,O,k,Z,K,ge,Ve){var ct=O.context;k.draw(ct,ct.gl.TRIANGLES,Z,K,ge,cn.disabled,Ve,x.id,_.layoutVertexBuffer,_.indexBuffer,S,x.paint,O.transform.zoom,_.programConfigurations.get(x.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Gc(_,S,x,O,k,Z,K){var ge,Ve,ct,jt,Vt,Xt=_.context.gl,En=x.paint.get("fill-pattern"),gn=En&&En.constantOr(1),kn=x.getCrossfadeParameters();K?(Ve=gn&&!x.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=Xt.LINES):(Ve=gn?"fillPattern":"fill",ge=Xt.TRIANGLES);for(var un=0,zn=O;un<zn.length;un+=1){var tr=zn[un],gr=S.getTile(tr);if(!gn||gr.patternsLoaded()){var Ir=gr.getBucket(x);if(Ir){var Or=Ir.programConfigurations.get(x.id),zr=_.useProgram(Ve,Or);gn&&(_.context.activeTexture.set(Xt.TEXTURE0),gr.imageAtlasTexture.bind(Xt.LINEAR,Xt.CLAMP_TO_EDGE),Or.updatePaintBuffers(kn));var ii=En.constantOr(null);if(ii&&gr.imageAtlas){var Hi=gr.imageAtlas,Fi=Hi.patternPositions[ii.to.toString()],po=Hi.patternPositions[ii.from.toString()];Fi&&po&&Or.setConstantPatternPositions(Fi,po)}var Vo=_.translatePosMatrix(tr.posMatrix,gr,x.paint.get("fill-translate"),x.paint.get("fill-translate-anchor"));if(K){jt=Ir.indexBuffer2,Vt=Ir.segments2;var $r=[Xt.drawingBufferWidth,Xt.drawingBufferHeight];ct=Ve==="fillOutlinePattern"&&gn?we(Vo,_,kn,gr,$r):Cc(Vo,$r)}else jt=Ir.indexBuffer,Vt=Ir.segments,ct=gn?Mu(Vo,_,kn,gr):Wc(Vo);zr.draw(_.context,ge,k,_.stencilModeForClipping(tr),Z,cn.disabled,ct,x.id,Ir.layoutVertexBuffer,jt,Vt,x.paint,_.transform.zoom,Or)}}}}function bh(_,S,x,O,k,Z,K){for(var ge=_.context,Ve=ge.gl,ct=x.paint.get("fill-extrusion-pattern"),jt=ct.constantOr(1),Vt=x.getCrossfadeParameters(),Xt=x.paint.get("fill-extrusion-opacity"),En=0,gn=O;En<gn.length;En+=1){var kn=gn[En],un=S.getTile(kn),zn=un.getBucket(x);if(zn){var tr=zn.programConfigurations.get(x.id),gr=_.useProgram(jt?"fillExtrusionPattern":"fillExtrusion",tr);jt&&(_.context.activeTexture.set(Ve.TEXTURE0),un.imageAtlasTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),tr.updatePaintBuffers(Vt));var Ir=ct.constantOr(null);if(Ir&&un.imageAtlas){var Or=un.imageAtlas,zr=Or.patternPositions[Ir.to.toString()],ii=Or.patternPositions[Ir.from.toString()];zr&&ii&&tr.setConstantPatternPositions(zr,ii)}var Hi=_.translatePosMatrix(kn.posMatrix,un,x.paint.get("fill-extrusion-translate"),x.paint.get("fill-extrusion-translate-anchor")),Fi=x.paint.get("fill-extrusion-vertical-gradient"),po=jt?_u(Hi,_,Fi,Xt,kn,Vt,un):_h(Hi,_,Fi,Xt);gr.draw(ge,ge.gl.TRIANGLES,k,Z,K,cn.backCCW,po,x.id,zn.layoutVertexBuffer,zn.indexBuffer,zn.segments,x.paint,_.transform.zoom,tr)}}}function Jf(_,S,x,O,k,Z){var K=_.context,ge=K.gl,Ve=S.fbo;if(Ve){var ct=_.useProgram("hillshade");K.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,Ve.colorAttachment.get());var jt=function(Vt,Xt,En){var gn=En.paint.get("hillshade-shadow-color"),kn=En.paint.get("hillshade-highlight-color"),un=En.paint.get("hillshade-accent-color"),zn=En.paint.get("hillshade-illumination-direction")*(Math.PI/180);En.paint.get("hillshade-illumination-anchor")==="viewport"&&(zn-=Vt.transform.angle);var tr,gr,Ir,Or=!Vt.options.moving;return{u_matrix:Vt.transform.calculatePosMatrix(Xt.tileID.toUnwrapped(),Or),u_image:0,u_latrange:(tr=Xt.tileID,gr=Math.pow(2,tr.canonical.z),Ir=tr.canonical.y,[new E.MercatorCoordinate(0,Ir/gr).toLngLat().lat,new E.MercatorCoordinate(0,(Ir+1)/gr).toLngLat().lat]),u_light:[En.paint.get("hillshade-exaggeration"),zn],u_shadow:gn,u_highlight:kn,u_accent:un}}(_,S,x);ct.draw(K,ge.TRIANGLES,O,k,Z,cn.disabled,jt,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}}function Mp(_,S,x,O,k,Z){var K=_.context,ge=K.gl,Ve=S.dem;if(Ve&&Ve.data){var ct=Ve.dim,jt=Ve.stride,Vt=Ve.getPixels();if(K.activeTexture.set(ge.TEXTURE1),K.pixelStoreUnpackPremultiplyAlpha.set(!1),S.demTexture=S.demTexture||_.getTileTexture(jt),S.demTexture){var Xt=S.demTexture;Xt.update(Vt,{premultiply:!1}),Xt.bind(ge.NEAREST,ge.CLAMP_TO_EDGE)}else S.demTexture=new E.Texture(K,Vt,ge.RGBA,{premultiply:!1}),S.demTexture.bind(ge.NEAREST,ge.CLAMP_TO_EDGE);K.activeTexture.set(ge.TEXTURE0);var En=S.fbo;if(!En){var gn=new E.Texture(K,{width:ct,height:ct,data:null},ge.RGBA);gn.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),(En=S.fbo=K.createFramebuffer(ct,ct,!0)).colorAttachment.set(gn.texture)}K.bindFramebuffer.set(En.framebuffer),K.viewport.set([0,0,ct,ct]),_.useProgram("hillshadePrepare").draw(K,ge.TRIANGLES,O,k,Z,cn.disabled,function(kn,un){var zn=un.stride,tr=E.create();return E.ortho(tr,0,E.EXTENT,-E.EXTENT,0,0,1),E.translate(tr,tr,[0,-E.EXTENT,0]),{u_matrix:tr,u_image:1,u_dimension:[zn,zn],u_zoom:kn.overscaledZ,u_unpack:un.getUnpackVector()}}(S.tileID,Ve),x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),S.needsHillshadePrepare=!1}}function ip(_,S,x,O,k){var Z=O.paint.get("raster-fade-duration");if(Z>0){var K=E.browser.now(),ge=(K-_.timeAdded)/Z,Ve=S?(K-S.timeAdded)/Z:-1,ct=x.getSource(),jt=k.coveringZoomLevel({tileSize:ct.tileSize,roundZoom:ct.roundZoom}),Vt=!S||Math.abs(S.tileID.overscaledZ-jt)>Math.abs(_.tileID.overscaledZ-jt),Xt=Vt&&_.refreshedUponExpiration?1:E.clamp(Vt?ge:1-Ve,0,1);return _.refreshedUponExpiration&&ge>=1&&(_.refreshedUponExpiration=!1),S?{opacity:1,mix:1-Xt}:{opacity:Xt,mix:0}}return{opacity:1,mix:0}}var Rp=new E.Color(1,0,0,1),Af=new E.Color(0,1,0,1),Pp=new E.Color(0,0,1,1),op=new E.Color(1,0,1,1),ap=new E.Color(0,1,1,1);function eh(_,S,x,O){xh(_,0,S+x/2,_.transform.width,x,O)}function Ip(_,S,x,O){xh(_,S-x/2,0,x,_.transform.height,O)}function xh(_,S,x,O,k,Z){var K=_.context,ge=K.gl;ge.enable(ge.SCISSOR_TEST),ge.scissor(S*E.browser.devicePixelRatio,x*E.browser.devicePixelRatio,O*E.browser.devicePixelRatio,k*E.browser.devicePixelRatio),K.clear({color:Z}),ge.disable(ge.SCISSOR_TEST)}function Od(_,S,x){var O=_.context,k=O.gl,Z=x.posMatrix,K=_.useProgram("debug"),ge=at.disabled,Ve=At.disabled,ct=_.colorModeForRenderPass();O.activeTexture.set(k.TEXTURE0),_.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),K.draw(O,k.LINE_STRIP,ge,Ve,ct,cn.disabled,sn(Z,E.Color.red),"$debug",_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments);var jt=S.getTileByID(x.key).latestRawTileData,Vt=Math.floor((jt&&jt.byteLength||0)/1024),Xt=S.getTile(x).tileSize,En=512/Math.min(Xt,512)*(x.overscaledZ/_.transform.zoom)*.5,gn=x.canonical.toString();x.overscaledZ!==x.canonical.z&&(gn+=" => "+x.overscaledZ),function(kn,un){kn.initDebugOverlayCanvas();var zn=kn.debugOverlayCanvas,tr=kn.context.gl,gr=kn.debugOverlayCanvas.getContext("2d");gr.clearRect(0,0,zn.width,zn.height),gr.shadowColor="white",gr.shadowBlur=2,gr.lineWidth=1.5,gr.strokeStyle="white",gr.textBaseline="top",gr.font="bold 36px Open Sans, sans-serif",gr.fillText(un,5,5),gr.strokeText(un,5,5),kn.debugOverlayTexture.update(zn),kn.debugOverlayTexture.bind(tr.LINEAR,tr.CLAMP_TO_EDGE)}(_,gn+" "+Vt+"kb"),K.draw(O,k.TRIANGLES,ge,Ve,nn.alphaBlended,cn.disabled,sn(Z,E.Color.transparent,En),"$debug",_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments)}var th={symbol:function(_,S,x,O,k){if(_.renderPass==="translucent"){var Z=At.disabled,K=_.colorModeForRenderPass();x.layout.get("text-variable-anchor")&&function(ge,Ve,ct,jt,Vt,Xt,En){for(var gn=Ve.transform,kn=Vt==="map",un=Xt==="map",zn=0,tr=ge;zn<tr.length;zn+=1){var gr=tr[zn],Ir=jt.getTile(gr),Or=Ir.getBucket(ct);if(Or&&Or.text&&Or.text.segments.get().length){var zr=E.evaluateSizeForZoom(Or.textSizeData,gn.zoom),ii=di(Ir,1,Ve.transform.zoom),Hi=dn(gr.posMatrix,un,kn,Ve.transform,ii),Fi=ct.layout.get("icon-text-fit")!=="none"&&Or.hasIconData();if(zr){var po=Math.pow(2,gn.zoom-Ir.tileID.overscaledZ);dl(Or,kn,un,En,E.symbolSize,gn,Hi,gr.posMatrix,po,zr,Fi)}}}}(O,_,x,S,x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),k),x.paint.get("icon-opacity").constantOr(1)!==0&&hf(_,S,x,O,!1,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),x.layout.get("icon-rotation-alignment"),x.layout.get("icon-pitch-alignment"),x.layout.get("icon-keep-upright"),Z,K),x.paint.get("text-opacity").constantOr(1)!==0&&hf(_,S,x,O,!0,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),x.layout.get("text-keep-upright"),Z,K),S.map.showCollisionBoxes&&(Ws(_,S,x,O,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),!0),Ws(_,S,x,O,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),!1))}},circle:function(_,S,x,O){if(_.renderPass==="translucent"){var k=x.paint.get("circle-opacity"),Z=x.paint.get("circle-stroke-width"),K=x.paint.get("circle-stroke-opacity"),ge=x.layout.get("circle-sort-key").constantOr(1)!==void 0;if(k.constantOr(1)!==0||Z.constantOr(1)!==0&&K.constantOr(1)!==0){for(var Ve=_.context,ct=Ve.gl,jt=_.depthModeForSublayer(0,at.ReadOnly),Vt=At.disabled,Xt=_.colorModeForRenderPass(),En=[],gn=0;gn<O.length;gn++){var kn=O[gn],un=S.getTile(kn),zn=un.getBucket(x);if(zn){var tr=zn.programConfigurations.get(x.id),gr={programConfiguration:tr,program:_.useProgram("circle",tr),layoutVertexBuffer:zn.layoutVertexBuffer,indexBuffer:zn.indexBuffer,uniformValues:oe(_,kn,un,x)};if(ge)for(var Ir=0,Or=zn.segments.get();Ir<Or.length;Ir+=1){var zr=Or[Ir];En.push({segments:new E.SegmentVector([zr]),sortKey:zr.sortKey,state:gr})}else En.push({segments:zn.segments,sortKey:0,state:gr})}}ge&&En.sort(function(Vo,$r){return Vo.sortKey-$r.sortKey});for(var ii=0,Hi=En;ii<Hi.length;ii+=1){var Fi=Hi[ii],po=Fi.state;po.program.draw(Ve,ct.TRIANGLES,jt,Vt,Xt,cn.disabled,po.uniformValues,x.id,po.layoutVertexBuffer,po.indexBuffer,Fi.segments,x.paint,_.transform.zoom,po.programConfiguration)}}}},heatmap:function(_,S,x,O){if(x.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){var k=_.context,Z=k.gl,K=At.disabled,ge=new nn([Z.ONE,Z.ONE],E.Color.transparent,[!0,!0,!0,!0]);(function(En,gn,kn){var un=En.gl;En.activeTexture.set(un.TEXTURE1),En.viewport.set([0,0,gn.width/4,gn.height/4]);var zn=kn.heatmapFbo;if(zn)un.bindTexture(un.TEXTURE_2D,zn.colorAttachment.get()),En.bindFramebuffer.set(zn.framebuffer);else{var tr=un.createTexture();un.bindTexture(un.TEXTURE_2D,tr),un.texParameteri(un.TEXTURE_2D,un.TEXTURE_WRAP_S,un.CLAMP_TO_EDGE),un.texParameteri(un.TEXTURE_2D,un.TEXTURE_WRAP_T,un.CLAMP_TO_EDGE),un.texParameteri(un.TEXTURE_2D,un.TEXTURE_MIN_FILTER,un.LINEAR),un.texParameteri(un.TEXTURE_2D,un.TEXTURE_MAG_FILTER,un.LINEAR),zn=kn.heatmapFbo=En.createFramebuffer(gn.width/4,gn.height/4,!1),function(gr,Ir,Or,zr){var ii=gr.gl;ii.texImage2D(ii.TEXTURE_2D,0,ii.RGBA,Ir.width/4,Ir.height/4,0,ii.RGBA,gr.extRenderToTextureHalfFloat?gr.extTextureHalfFloat.HALF_FLOAT_OES:ii.UNSIGNED_BYTE,null),zr.colorAttachment.set(Or)}(En,gn,tr,zn)}})(k,_,x),k.clear({color:E.Color.transparent});for(var Ve=0;Ve<O.length;Ve++){var ct=O[Ve];if(!S.hasRenderableParent(ct)){var jt=S.getTile(ct),Vt=jt.getBucket(x);if(Vt){var Xt=Vt.programConfigurations.get(x.id);_.useProgram("heatmap",Xt).draw(k,Z.TRIANGLES,at.disabled,K,ge,cn.disabled,ir(ct.posMatrix,jt,_.transform.zoom,x.paint.get("heatmap-intensity")),x.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,x.paint,_.transform.zoom,Xt)}}}k.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(En,gn){var kn=En.context,un=kn.gl,zn=gn.heatmapFbo;if(zn){kn.activeTexture.set(un.TEXTURE0),un.bindTexture(un.TEXTURE_2D,zn.colorAttachment.get()),kn.activeTexture.set(un.TEXTURE1);var tr=gn.colorRampTexture;tr||(tr=gn.colorRampTexture=new E.Texture(kn,gn.colorRamp,un.RGBA)),tr.bind(un.LINEAR,un.CLAMP_TO_EDGE),En.useProgram("heatmapTexture").draw(kn,un.TRIANGLES,at.disabled,At.disabled,En.colorModeForRenderPass(),cn.disabled,function(gr,Ir,Or,zr){var ii=E.create();E.ortho(ii,0,gr.width,gr.height,0,0,1);var Hi=gr.context.gl;return{u_matrix:ii,u_world:[Hi.drawingBufferWidth,Hi.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ir.paint.get("heatmap-opacity")}}(En,gn),gn.id,En.viewportBuffer,En.quadTriangleIndexBuffer,En.viewportSegments,gn.paint,En.transform.zoom)}}(_,x))},line:function(_,S,x,O){if(_.renderPass==="translucent"){var k=x.paint.get("line-opacity"),Z=x.paint.get("line-width");if(k.constantOr(1)!==0&&Z.constantOr(1)!==0)for(var K=_.depthModeForSublayer(0,at.ReadOnly),ge=_.colorModeForRenderPass(),Ve=x.paint.get("line-dasharray"),ct=x.paint.get("line-pattern"),jt=ct.constantOr(1),Vt=x.paint.get("line-gradient"),Xt=x.getCrossfadeParameters(),En=jt?"linePattern":Ve?"lineSDF":Vt?"lineGradient":"line",gn=_.context,kn=gn.gl,un=!0,zn=0,tr=O;zn<tr.length;zn+=1){var gr=tr[zn],Ir=S.getTile(gr);if(!jt||Ir.patternsLoaded()){var Or=Ir.getBucket(x);if(Or){var zr=Or.programConfigurations.get(x.id),ii=_.context.program.get(),Hi=_.useProgram(En,zr),Fi=un||Hi.program!==ii,po=ct.constantOr(null);if(po&&Ir.imageAtlas){var Vo=Ir.imageAtlas,$r=Vo.patternPositions[po.to.toString()],Kt=Vo.patternPositions[po.from.toString()];$r&&Kt&&zr.setConstantPatternPositions($r,Kt)}var Ya=jt?Bi(_,Ir,x,Xt):Ve?bo(_,Ir,x,Ve,Xt):Vt?Xr(_,Ir,x,Or.lineClipsArray.length):Cr(_,Ir,x);if(jt)gn.activeTexture.set(kn.TEXTURE0),Ir.imageAtlasTexture.bind(kn.LINEAR,kn.CLAMP_TO_EDGE),zr.updatePaintBuffers(Xt);else if(Ve&&(Fi||_.lineAtlas.dirty))gn.activeTexture.set(kn.TEXTURE0),_.lineAtlas.bind(gn);else if(Vt){var yo=Or.gradients[x.id],Qo=yo.texture;if(x.gradientVersion!==yo.version){var Oa=256;if(x.stepInterpolant){var fa=S.getSource().maxzoom,Go=gr.canonical.z===fa?Math.ceil(1<<_.transform.maxZoom-gr.canonical.z):1;Oa=E.clamp(E.nextPowerOfTwo(Or.maxLineLength/E.EXTENT*1024*Go),256,gn.maxTextureSize)}yo.gradient=E.renderColorRamp({expression:x.gradientExpression(),evaluationKey:"lineProgress",resolution:Oa,image:yo.gradient||void 0,clips:Or.lineClipsArray}),yo.texture?yo.texture.update(yo.gradient):yo.texture=new E.Texture(gn,yo.gradient,kn.RGBA),yo.version=x.gradientVersion,Qo=yo.texture}gn.activeTexture.set(kn.TEXTURE0),Qo.bind(x.stepInterpolant?kn.NEAREST:kn.LINEAR,kn.CLAMP_TO_EDGE)}Hi.draw(gn,kn.TRIANGLES,K,_.stencilModeForClipping(gr),ge,cn.disabled,Ya,x.id,Or.layoutVertexBuffer,Or.indexBuffer,Or.segments,x.paint,_.transform.zoom,zr,Or.layoutVertexBuffer2),un=!1}}}}},fill:function(_,S,x,O){var k=x.paint.get("fill-color"),Z=x.paint.get("fill-opacity");if(Z.constantOr(1)!==0){var K=_.colorModeForRenderPass(),ge=x.paint.get("fill-pattern"),Ve=_.opaquePassEnabledForLayer()&&!ge.constantOr(1)&&k.constantOr(E.Color.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Ve){var ct=_.depthModeForSublayer(1,_.renderPass==="opaque"?at.ReadWrite:at.ReadOnly);Gc(_,S,x,O,ct,K,!1)}if(_.renderPass==="translucent"&&x.paint.get("fill-antialias")){var jt=_.depthModeForSublayer(x.getPaintProperty("fill-outline-color")?2:0,at.ReadOnly);Gc(_,S,x,O,jt,K,!0)}}},"fill-extrusion":function(_,S,x,O){var k=x.paint.get("fill-extrusion-opacity");if(k!==0&&_.renderPass==="translucent"){var Z=new at(_.context.gl.LEQUAL,at.ReadWrite,_.depthRangeFor3D);if(k!==1||x.paint.get("fill-extrusion-pattern").constantOr(1))bh(_,S,x,O,Z,At.disabled,nn.disabled),bh(_,S,x,O,Z,_.stencilModeFor3D(),_.colorModeForRenderPass());else{var K=_.colorModeForRenderPass();bh(_,S,x,O,Z,At.disabled,K)}}},hillshade:function(_,S,x,O){if(_.renderPass==="offscreen"||_.renderPass==="translucent"){for(var k=_.context,Z=_.depthModeForSublayer(0,at.ReadOnly),K=_.colorModeForRenderPass(),ge=_.renderPass==="translucent"?_.stencilConfigForOverlap(O):[{},O],Ve=ge[0],ct=0,jt=ge[1];ct<jt.length;ct+=1){var Vt=jt[ct],Xt=S.getTile(Vt);Xt.needsHillshadePrepare&&_.renderPass==="offscreen"?Mp(_,Xt,x,Z,At.disabled,K):_.renderPass==="translucent"&&Jf(_,Xt,x,Z,Ve[Vt.overscaledZ],K)}k.viewport.set([0,0,_.width,_.height])}},raster:function(_,S,x,O){if(_.renderPass==="translucent"&&x.paint.get("raster-opacity")!==0&&O.length)for(var k=_.context,Z=k.gl,K=S.getSource(),ge=_.useProgram("raster"),Ve=_.colorModeForRenderPass(),ct=K instanceof Dt?[{},O]:_.stencilConfigForOverlap(O),jt=ct[0],Vt=ct[1],Xt=Vt[Vt.length-1].overscaledZ,En=!_.options.moving,gn=0,kn=Vt;gn<kn.length;gn+=1){var un=kn[gn],zn=_.depthModeForSublayer(un.overscaledZ-Xt,x.paint.get("raster-opacity")===1?at.ReadWrite:at.ReadOnly,Z.LESS),tr=S.getTile(un),gr=_.transform.calculatePosMatrix(un.toUnwrapped(),En);tr.registerFadeDuration(x.paint.get("raster-fade-duration"));var Ir=S.findLoadedParent(un,0),Or=ip(tr,Ir,S,x,_.transform),zr=void 0,ii=void 0,Hi=x.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;k.activeTexture.set(Z.TEXTURE0),tr.texture.bind(Hi,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(Z.TEXTURE1),Ir?(Ir.texture.bind(Hi,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),zr=Math.pow(2,Ir.tileID.overscaledZ-tr.tileID.overscaledZ),ii=[tr.tileID.canonical.x*zr%1,tr.tileID.canonical.y*zr%1]):tr.texture.bind(Hi,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST);var Fi=Fa(gr,ii||[0,0],zr||1,Or,x);K instanceof Dt?ge.draw(k,Z.TRIANGLES,zn,At.disabled,Ve,cn.disabled,Fi,x.id,K.boundsBuffer,_.quadTriangleIndexBuffer,K.boundsSegments):ge.draw(k,Z.TRIANGLES,zn,jt[un.overscaledZ],Ve,cn.disabled,Fi,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,S,x){var O=x.paint.get("background-color"),k=x.paint.get("background-opacity");if(k!==0){var Z=_.context,K=Z.gl,ge=_.transform,Ve=ge.tileSize,ct=x.paint.get("background-pattern");if(!_.isPatternMissing(ct)){var jt=!ct&&O.a===1&&k===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass===jt){var Vt=At.disabled,Xt=_.depthModeForSublayer(0,jt==="opaque"?at.ReadWrite:at.ReadOnly),En=_.colorModeForRenderPass(),gn=_.useProgram(ct?"backgroundPattern":"background"),kn=ge.coveringTiles({tileSize:Ve});ct&&(Z.activeTexture.set(K.TEXTURE0),_.imageManager.bind(_.context));for(var un=x.getCrossfadeParameters(),zn=0,tr=kn;zn<tr.length;zn+=1){var gr=tr[zn],Ir=_.transform.calculatePosMatrix(gr.toUnwrapped()),Or=ct?ba(Ir,k,_,ct,{tileID:gr,tileSize:Ve},un):Xa(Ir,k,O);gn.draw(Z,K.TRIANGLES,Xt,Vt,En,cn.disabled,Or,x.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}}}},debug:function(_,S,x){for(var O=0;O<x.length;O++)Od(_,S,x[O])},custom:function(_,S,x){var O=_.context,k=x.implementation;if(_.renderPass==="offscreen"){var Z=k.prerender;Z&&(_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),Z.call(k,O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),O.setStencilMode(At.disabled);var K=k.renderingMode==="3d"?new at(_.context.gl.LEQUAL,at.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,at.ReadOnly);O.setDepthMode(K),k.render(O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState(),O.bindFramebuffer.set(null)}}},Gs=function(_,S){this.context=new Et(_),this.transform=S,this._tileTextures={},this.setup(),this.numSublayers=Qt.maxUnderzooming+Qt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new of,this.gpuTimers={}};Gs.prototype.resize=function(_,S){if(this.width=_*E.browser.devicePixelRatio,this.height=S*E.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var x=0,O=this.style._order;x<O.length;x+=1)this.style._layers[O[x]].resize()},Gs.prototype.setup=function(){var _=this.context,S=new E.StructArrayLayout2i4;S.emplaceBack(0,0),S.emplaceBack(E.EXTENT,0),S.emplaceBack(0,E.EXTENT),S.emplaceBack(E.EXTENT,E.EXTENT),this.tileExtentBuffer=_.createVertexBuffer(S,xs.members),this.tileExtentSegments=E.SegmentVector.simpleSegment(0,0,4,2);var x=new E.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(E.EXTENT,0),x.emplaceBack(0,E.EXTENT),x.emplaceBack(E.EXTENT,E.EXTENT),this.debugBuffer=_.createVertexBuffer(x,xs.members),this.debugSegments=E.SegmentVector.simpleSegment(0,0,4,5);var O=new E.StructArrayLayout4i8;O.emplaceBack(0,0,0,0),O.emplaceBack(E.EXTENT,0,E.EXTENT,0),O.emplaceBack(0,E.EXTENT,0,E.EXTENT),O.emplaceBack(E.EXTENT,E.EXTENT,E.EXTENT,E.EXTENT),this.rasterBoundsBuffer=_.createVertexBuffer(O,Ge.members),this.rasterBoundsSegments=E.SegmentVector.simpleSegment(0,0,4,2);var k=new E.StructArrayLayout2i4;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=_.createVertexBuffer(k,xs.members),this.viewportSegments=E.SegmentVector.simpleSegment(0,0,4,2);var Z=new E.StructArrayLayout1ui2;Z.emplaceBack(0),Z.emplaceBack(1),Z.emplaceBack(3),Z.emplaceBack(2),Z.emplaceBack(0),this.tileBorderIndexBuffer=_.createIndexBuffer(Z);var K=new E.StructArrayLayout3ui6;K.emplaceBack(0,1,2),K.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=_.createIndexBuffer(K),this.emptyTexture=new E.Texture(_,{width:1,height:1,data:new Uint8Array([0,0,0,0])},_.gl.RGBA);var ge=this.context.gl;this.stencilClearMode=new At({func:ge.ALWAYS,mask:0},0,255,ge.ZERO,ge.ZERO,ge.ZERO)},Gs.prototype.clearStencil=function(){var _=this.context,S=_.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var x=E.create();E.ortho(x,0,this.width,this.height,0,0,1),E.scale(x,x,[S.drawingBufferWidth,S.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(_,S.TRIANGLES,at.disabled,this.stencilClearMode,nn.disabled,cn.disabled,fn(x),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Gs.prototype._renderTileClippingMasks=function(_,S){if(this.currentStencilSource!==_.source&&_.isTileClipped()&&S&&S.length){this.currentStencilSource=_.source;var x=this.context,O=x.gl;this.nextStencilID+S.length>256&&this.clearStencil(),x.setColorMode(nn.disabled),x.setDepthMode(at.disabled);var k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Z=0,K=S;Z<K.length;Z+=1){var ge=K[Z],Ve=this._tileClippingMaskIDs[ge.key]=this.nextStencilID++;k.draw(x,O.TRIANGLES,at.disabled,new At({func:O.ALWAYS,mask:0},Ve,255,O.KEEP,O.KEEP,O.REPLACE),nn.disabled,cn.disabled,fn(ge.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Gs.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var _=this.nextStencilID++,S=this.context.gl;return new At({func:S.NOTEQUAL,mask:255},_,255,S.KEEP,S.KEEP,S.REPLACE)},Gs.prototype.stencilModeForClipping=function(_){var S=this.context.gl;return new At({func:S.EQUAL,mask:255},this._tileClippingMaskIDs[_.key],0,S.KEEP,S.KEEP,S.REPLACE)},Gs.prototype.stencilConfigForOverlap=function(_){var S,x=this.context.gl,O=_.sort(function(Ve,ct){return ct.overscaledZ-Ve.overscaledZ}),k=O[O.length-1].overscaledZ,Z=O[0].overscaledZ-k+1;if(Z>1){this.currentStencilSource=void 0,this.nextStencilID+Z>256&&this.clearStencil();for(var K={},ge=0;ge<Z;ge++)K[ge+k]=new At({func:x.GEQUAL,mask:255},ge+this.nextStencilID,255,x.KEEP,x.KEEP,x.REPLACE);return this.nextStencilID+=Z,[K,O]}return[(S={},S[k]=At.disabled,S),O]},Gs.prototype.colorModeForRenderPass=function(){var _=this.context.gl;return this._showOverdrawInspector?new nn([_.CONSTANT_COLOR,_.ONE],new E.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?nn.unblended:nn.alphaBlended},Gs.prototype.depthModeForSublayer=function(_,S,x){if(!this.opaquePassEnabledForLayer())return at.disabled;var O=1-((1+this.currentLayer)*this.numSublayers+_)*this.depthEpsilon;return new at(x||this.context.gl.LEQUAL,S,[O,O])},Gs.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Gs.prototype.render=function(_,S){var x=this;this.style=_,this.options=S,this.lineAtlas=_.lineAtlas,this.imageManager=_.imageManager,this.glyphManager=_.glyphManager,this.symbolFadeChange=_.placement.symbolFadeChange(E.browser.now()),this.imageManager.beginFrame();var O=this.style._order,k=this.style.sourceCaches;for(var Z in k){var K=k[Z];K.used&&K.prepare(this.context)}var ge,Ve,ct={},jt={},Vt={};for(var Xt in k){var En=k[Xt];ct[Xt]=En.getVisibleCoordinates(),jt[Xt]=ct[Xt].slice().reverse(),Vt[Xt]=En.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var gn=0;gn<O.length;gn++)if(this.style._layers[O[gn]].is3D()){this.opaquePassCutoff=gn;break}this.renderPass="offscreen";for(var kn=0,un=O;kn<un.length;kn+=1){var zn=this.style._layers[un[kn]];if(zn.hasOffscreenPass()&&!zn.isHidden(this.transform.zoom)){var tr=jt[zn.source];(zn.type==="custom"||tr.length)&&this.renderLayer(this,k[zn.source],zn,tr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:S.showOverdrawInspector?E.Color.black:E.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=S.showOverdrawInspector,this.depthRangeFor3D=[0,1-(_._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){var gr=this.style._layers[O[this.currentLayer]],Ir=k[gr.source],Or=ct[gr.source];this._renderTileClippingMasks(gr,Or),this.renderLayer(this,Ir,gr,Or)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){var zr=this.style._layers[O[this.currentLayer]],ii=k[zr.source],Hi=(zr.type==="symbol"?Vt:jt)[zr.source];this._renderTileClippingMasks(zr,ct[zr.source]),this.renderLayer(this,ii,zr,Hi)}this.options.showTileBoundaries&&(E.values(this.style._layers).forEach(function(Fi){Fi.source&&!Fi.isHidden(x.transform.zoom)&&(Fi.source!==(Ve&&Ve.id)&&(Ve=x.style.sourceCaches[Fi.source]),(!ge||ge.getSource().maxzoom<Ve.getSource().maxzoom)&&(ge=Ve))}),ge&&th.debug(this,ge,ge.getVisibleCoordinates())),this.options.showPadding&&function(Fi){var po=Fi.transform.padding;eh(Fi,Fi.transform.height-(po.top||0),3,Rp),eh(Fi,po.bottom||0,3,Af),Ip(Fi,po.left||0,3,Pp),Ip(Fi,Fi.transform.width-(po.right||0),3,op);var Vo=Fi.transform.centerPoint;(function($r,Kt,Ya,yo){xh($r,Kt-1,Ya-10,2,20,yo),xh($r,Kt-10,Ya-1,20,2,yo)})(Fi,Vo.x,Fi.transform.height-Vo.y,ap)}(this),this.context.setDefault()},Gs.prototype.renderLayer=function(_,S,x,O){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="custom"||O.length)&&(this.id=x.id,this.gpuTimingStart(x),th[x.type](_,S,x,O,this.style.placement.variableOffsets),this.gpuTimingEnd())},Gs.prototype.gpuTimingStart=function(_){if(this.options.gpuTiming){var S=this.context.extTimerQuery,x=this.gpuTimers[_.id];x||(x=this.gpuTimers[_.id]={calls:0,cpuTime:0,query:S.createQueryEXT()}),x.calls++,S.beginQueryEXT(S.TIME_ELAPSED_EXT,x.query)}},Gs.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var _=this.context.extTimerQuery;_.endQueryEXT(_.TIME_ELAPSED_EXT)}},Gs.prototype.collectGpuTimers=function(){var _=this.gpuTimers;return this.gpuTimers={},_},Gs.prototype.queryGpuTimers=function(_){var S={};for(var x in _){var O=_[x],k=this.context.extTimerQuery,Z=k.getQueryObjectEXT(O.query,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(O.query),S[x]=Z}return S},Gs.prototype.translatePosMatrix=function(_,S,x,O,k){if(!x[0]&&!x[1])return _;var Z=k?O==="map"?this.transform.angle:0:O==="viewport"?-this.transform.angle:0;if(Z){var K=Math.sin(Z),ge=Math.cos(Z);x=[x[0]*ge-x[1]*K,x[0]*K+x[1]*ge]}var Ve=[k?x[0]:di(S,x[0],this.transform.zoom),k?x[1]:di(S,x[1],this.transform.zoom),0],ct=new Float32Array(16);return E.translate(ct,_,Ve),ct},Gs.prototype.saveTileTexture=function(_){var S=this._tileTextures[_.size[0]];S?S.push(_):this._tileTextures[_.size[0]]=[_]},Gs.prototype.getTileTexture=function(_){var S=this._tileTextures[_];return S&&S.length>0?S.pop():null},Gs.prototype.isPatternMissing=function(_){if(!_)return!1;if(!_.from||!_.to)return!0;var S=this.imageManager.getPattern(_.from.toString()),x=this.imageManager.getPattern(_.to.toString());return!S||!x},Gs.prototype.useProgram=function(_,S){this.cache=this.cache||{};var x=""+_+(S?S.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[x]||(this.cache[x]=new sl(this.context,_,rp[_],S,cs[_],this._showOverdrawInspector)),this.cache[x]},Gs.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Gs.prototype.setBaseState=function(){var _=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(_.FUNC_ADD)},Gs.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=E.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new E.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Gs.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var nh=function(_,S){this.points=_,this.planes=S};nh.fromInvProjectionMatrix=function(_,S,x){var O=Math.pow(2,x),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(K){return E.transformMat4([],K,_)}).map(function(K){return E.scale$1([],K,1/K[3]/S*O)}),Z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(K){var ge=E.sub([],k[K[0]],k[K[1]]),Ve=E.sub([],k[K[2]],k[K[1]]),ct=E.normalize([],E.cross([],ge,Ve)),jt=-E.dot(ct,k[K[1]]);return ct.concat(jt)});return new nh(k,Z)};var df=function(_,S){this.min=_,this.max=S,this.center=E.scale$2([],E.add([],this.min,this.max),.5)};df.prototype.quadrant=function(_){for(var S=[_%2==0,_<2],x=E.clone$2(this.min),O=E.clone$2(this.max),k=0;k<S.length;k++)x[k]=S[k]?this.min[k]:this.center[k],O[k]=S[k]?this.center[k]:this.max[k];return O[2]=this.max[2],new df(x,O)},df.prototype.distanceX=function(_){return Math.max(Math.min(this.max[0],_[0]),this.min[0])-_[0]},df.prototype.distanceY=function(_){return Math.max(Math.min(this.max[1],_[1]),this.min[1])-_[1]},df.prototype.intersects=function(_){for(var S=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],x=!0,O=0;O<_.planes.length;O++){for(var k=_.planes[O],Z=0,K=0;K<S.length;K++)Z+=E.dot$1(k,S[K])>=0;if(Z===0)return 0;Z!==S.length&&(x=!1)}if(x)return 2;for(var ge=0;ge<3;ge++){for(var Ve=Number.MAX_VALUE,ct=-Number.MAX_VALUE,jt=0;jt<_.points.length;jt++){var Vt=_.points[jt][ge]-this.min[ge];Ve=Math.min(Ve,Vt),ct=Math.max(ct,Vt)}if(ct<0||Ve>this.max[ge]-this.min[ge])return 0}return 1};var Vf=function(_,S,x,O){if(_===void 0&&(_=0),S===void 0&&(S=0),x===void 0&&(x=0),O===void 0&&(O=0),isNaN(_)||_<0||isNaN(S)||S<0||isNaN(x)||x<0||isNaN(O)||O<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=_,this.bottom=S,this.left=x,this.right=O};Vf.prototype.interpolate=function(_,S,x){return S.top!=null&&_.top!=null&&(this.top=E.number(_.top,S.top,x)),S.bottom!=null&&_.bottom!=null&&(this.bottom=E.number(_.bottom,S.bottom,x)),S.left!=null&&_.left!=null&&(this.left=E.number(_.left,S.left,x)),S.right!=null&&_.right!=null&&(this.right=E.number(_.right,S.right,x)),this},Vf.prototype.getCenter=function(_,S){var x=E.clamp((this.left+_-this.right)/2,0,_),O=E.clamp((this.top+S-this.bottom)/2,0,S);return new E.Point(x,O)},Vf.prototype.equals=function(_){return this.top===_.top&&this.bottom===_.bottom&&this.left===_.left&&this.right===_.right},Vf.prototype.clone=function(){return new Vf(this.top,this.bottom,this.left,this.right)},Vf.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var $a=function(_,S,x,O,k){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=k===void 0||k,this._minZoom=_||0,this._maxZoom=S||22,this._minPitch=x==null?0:x,this._maxPitch=O==null?60:O,this.setMaxBounds(),this.width=0,this.height=0,this._center=new E.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Vf,this._posMatrixCache={},this._alignedPosMatrixCache={}},ue={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};$a.prototype.clone=function(){var _=new $a(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return _.tileSize=this.tileSize,_.latRange=this.latRange,_.width=this.width,_.height=this.height,_._center=this._center,_.zoom=this.zoom,_.angle=this.angle,_._fov=this._fov,_._pitch=this._pitch,_._unmodified=this._unmodified,_._edgeInsets=this._edgeInsets.clone(),_._calcMatrices(),_},ue.minZoom.get=function(){return this._minZoom},ue.minZoom.set=function(_){this._minZoom!==_&&(this._minZoom=_,this.zoom=Math.max(this.zoom,_))},ue.maxZoom.get=function(){return this._maxZoom},ue.maxZoom.set=function(_){this._maxZoom!==_&&(this._maxZoom=_,this.zoom=Math.min(this.zoom,_))},ue.minPitch.get=function(){return this._minPitch},ue.minPitch.set=function(_){this._minPitch!==_&&(this._minPitch=_,this.pitch=Math.max(this.pitch,_))},ue.maxPitch.get=function(){return this._maxPitch},ue.maxPitch.set=function(_){this._maxPitch!==_&&(this._maxPitch=_,this.pitch=Math.min(this.pitch,_))},ue.renderWorldCopies.get=function(){return this._renderWorldCopies},ue.renderWorldCopies.set=function(_){_===void 0?_=!0:_===null&&(_=!1),this._renderWorldCopies=_},ue.worldSize.get=function(){return this.tileSize*this.scale},ue.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ue.size.get=function(){return new E.Point(this.width,this.height)},ue.bearing.get=function(){return-this.angle/Math.PI*180},ue.bearing.set=function(_){var S=-E.wrap(_,-180,180)*Math.PI/180;this.angle!==S&&(this._unmodified=!1,this.angle=S,this._calcMatrices(),this.rotationMatrix=E.create$2(),E.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ue.pitch.get=function(){return this._pitch/Math.PI*180},ue.pitch.set=function(_){var S=E.clamp(_,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==S&&(this._unmodified=!1,this._pitch=S,this._calcMatrices())},ue.fov.get=function(){return this._fov/Math.PI*180},ue.fov.set=function(_){_=Math.max(.01,Math.min(60,_)),this._fov!==_&&(this._unmodified=!1,this._fov=_/180*Math.PI,this._calcMatrices())},ue.zoom.get=function(){return this._zoom},ue.zoom.set=function(_){var S=Math.min(Math.max(_,this.minZoom),this.maxZoom);this._zoom!==S&&(this._unmodified=!1,this._zoom=S,this.scale=this.zoomScale(S),this.tileZoom=Math.floor(S),this.zoomFraction=S-this.tileZoom,this._constrain(),this._calcMatrices())},ue.center.get=function(){return this._center},ue.center.set=function(_){_.lat===this._center.lat&&_.lng===this._center.lng||(this._unmodified=!1,this._center=_,this._constrain(),this._calcMatrices())},ue.padding.get=function(){return this._edgeInsets.toJSON()},ue.padding.set=function(_){this._edgeInsets.equals(_)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,_,1),this._calcMatrices())},ue.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},$a.prototype.isPaddingEqual=function(_){return this._edgeInsets.equals(_)},$a.prototype.interpolatePadding=function(_,S,x){this._unmodified=!1,this._edgeInsets.interpolate(_,S,x),this._constrain(),this._calcMatrices()},$a.prototype.coveringZoomLevel=function(_){var S=(_.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/_.tileSize));return Math.max(0,S)},$a.prototype.getVisibleUnwrappedCoordinates=function(_){var S=[new E.UnwrappedTileID(0,_)];if(this._renderWorldCopies)for(var x=this.pointCoordinate(new E.Point(0,0)),O=this.pointCoordinate(new E.Point(this.width,0)),k=this.pointCoordinate(new E.Point(this.width,this.height)),Z=this.pointCoordinate(new E.Point(0,this.height)),K=Math.floor(Math.min(x.x,O.x,k.x,Z.x)),ge=Math.floor(Math.max(x.x,O.x,k.x,Z.x)),Ve=K-1;Ve<=ge+1;Ve++)Ve!==0&&S.push(new E.UnwrappedTileID(Ve,_));return S},$a.prototype.coveringTiles=function(_){var S=this.coveringZoomLevel(_),x=S;if(_.minzoom!==void 0&&S<_.minzoom)return[];_.maxzoom!==void 0&&S>_.maxzoom&&(S=_.maxzoom);var O=E.MercatorCoordinate.fromLngLat(this.center),k=Math.pow(2,S),Z=[k*O.x,k*O.y,0],K=nh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,S),ge=_.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ge=S);var Ve=function(Fi){return{aabb:new df([Fi*k,0,0],[(Fi+1)*k,k,0]),zoom:0,x:0,y:0,wrap:Fi,fullyVisible:!1}},ct=[],jt=[],Vt=S,Xt=_.reparseOverscaled?x:S;if(this._renderWorldCopies)for(var En=1;En<=3;En++)ct.push(Ve(-En)),ct.push(Ve(En));for(ct.push(Ve(0));ct.length>0;){var gn=ct.pop(),kn=gn.x,un=gn.y,zn=gn.fullyVisible;if(!zn){var tr=gn.aabb.intersects(K);if(tr===0)continue;zn=tr===2}var gr=gn.aabb.distanceX(Z),Ir=gn.aabb.distanceY(Z),Or=Math.max(Math.abs(gr),Math.abs(Ir));if(gn.zoom===Vt||Or>3+(1<<Vt-gn.zoom)-2&&gn.zoom>=ge)jt.push({tileID:new E.OverscaledTileID(gn.zoom===Vt?Xt:gn.zoom,gn.wrap,gn.zoom,kn,un),distanceSq:E.sqrLen([Z[0]-.5-kn,Z[1]-.5-un])});else for(var zr=0;zr<4;zr++){var ii=(kn<<1)+zr%2,Hi=(un<<1)+(zr>>1);ct.push({aabb:gn.aabb.quadrant(zr),zoom:gn.zoom+1,x:ii,y:Hi,wrap:gn.wrap,fullyVisible:zn})}}return jt.sort(function(Fi,po){return Fi.distanceSq-po.distanceSq}).map(function(Fi){return Fi.tileID})},$a.prototype.resize=function(_,S){this.width=_,this.height=S,this.pixelsToGLUnits=[2/_,-2/S],this._constrain(),this._calcMatrices()},ue.unmodified.get=function(){return this._unmodified},$a.prototype.zoomScale=function(_){return Math.pow(2,_)},$a.prototype.scaleZoom=function(_){return Math.log(_)/Math.LN2},$a.prototype.project=function(_){var S=E.clamp(_.lat,-this.maxValidLatitude,this.maxValidLatitude);return new E.Point(E.mercatorXfromLng(_.lng)*this.worldSize,E.mercatorYfromLat(S)*this.worldSize)},$a.prototype.unproject=function(_){return new E.MercatorCoordinate(_.x/this.worldSize,_.y/this.worldSize).toLngLat()},ue.point.get=function(){return this.project(this.center)},$a.prototype.setLocationAtPoint=function(_,S){var x=this.pointCoordinate(S),O=this.pointCoordinate(this.centerPoint),k=this.locationCoordinate(_),Z=new E.MercatorCoordinate(k.x-(x.x-O.x),k.y-(x.y-O.y));this.center=this.coordinateLocation(Z),this._renderWorldCopies&&(this.center=this.center.wrap())},$a.prototype.locationPoint=function(_){return this.coordinatePoint(this.locationCoordinate(_))},$a.prototype.pointLocation=function(_){return this.coordinateLocation(this.pointCoordinate(_))},$a.prototype.locationCoordinate=function(_){return E.MercatorCoordinate.fromLngLat(_)},$a.prototype.coordinateLocation=function(_){return _.toLngLat()},$a.prototype.pointCoordinate=function(_){var S=[_.x,_.y,0,1],x=[_.x,_.y,1,1];E.transformMat4(S,S,this.pixelMatrixInverse),E.transformMat4(x,x,this.pixelMatrixInverse);var O=S[3],k=x[3],Z=S[1]/O,K=x[1]/k,ge=S[2]/O,Ve=x[2]/k,ct=ge===Ve?0:(0-ge)/(Ve-ge);return new E.MercatorCoordinate(E.number(S[0]/O,x[0]/k,ct)/this.worldSize,E.number(Z,K,ct)/this.worldSize)},$a.prototype.coordinatePoint=function(_){var S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix),new E.Point(S[0]/S[3],S[1]/S[3])},$a.prototype.getBounds=function(){return new E.LngLatBounds().extend(this.pointLocation(new E.Point(0,0))).extend(this.pointLocation(new E.Point(this.width,0))).extend(this.pointLocation(new E.Point(this.width,this.height))).extend(this.pointLocation(new E.Point(0,this.height)))},$a.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new E.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},$a.prototype.setMaxBounds=function(_){_?(this.lngRange=[_.getWest(),_.getEast()],this.latRange=[_.getSouth(),_.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},$a.prototype.calculatePosMatrix=function(_,S){S===void 0&&(S=!1);var x=_.key,O=S?this._alignedPosMatrixCache:this._posMatrixCache;if(O[x])return O[x];var k=_.canonical,Z=this.worldSize/this.zoomScale(k.z),K=k.x+Math.pow(2,k.z)*_.wrap,ge=E.identity(new Float64Array(16));return E.translate(ge,ge,[K*Z,k.y*Z,0]),E.scale(ge,ge,[Z/E.EXTENT,Z/E.EXTENT,1]),E.multiply(ge,S?this.alignedProjMatrix:this.projMatrix,ge),O[x]=new Float32Array(ge),O[x]},$a.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},$a.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var _,S,x,O,k=-90,Z=90,K=-180,ge=180,Ve=this.size,ct=this._unmodified;if(this.latRange){var jt=this.latRange;k=E.mercatorYfromLat(jt[1])*this.worldSize,_=(Z=E.mercatorYfromLat(jt[0])*this.worldSize)-k<Ve.y?Ve.y/(Z-k):0}if(this.lngRange){var Vt=this.lngRange;K=E.mercatorXfromLng(Vt[0])*this.worldSize,S=(ge=E.mercatorXfromLng(Vt[1])*this.worldSize)-K<Ve.x?Ve.x/(ge-K):0}var Xt=this.point,En=Math.max(S||0,_||0);if(En)return this.center=this.unproject(new E.Point(S?(ge+K)/2:Xt.x,_?(Z+k)/2:Xt.y)),this.zoom+=this.scaleZoom(En),this._unmodified=ct,void(this._constraining=!1);if(this.latRange){var gn=Xt.y,kn=Ve.y/2;gn-kn<k&&(O=k+kn),gn+kn>Z&&(O=Z-kn)}if(this.lngRange){var un=Xt.x,zn=Ve.x/2;un-zn<K&&(x=K+zn),un+zn>ge&&(x=ge-zn)}x===void 0&&O===void 0||(this.center=this.unproject(new E.Point(x!==void 0?x:Xt.x,O!==void 0?O:Xt.y))),this._unmodified=ct,this._constraining=!1}},$a.prototype._calcMatrices=function(){if(this.height){var _=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var S=Math.PI/2+this._pitch,x=this._fov*(.5+_.y/this.height),O=Math.sin(x)*this.cameraToCenterDistance/Math.sin(E.clamp(Math.PI-S-x,.01,Math.PI-.01)),k=this.point,Z=k.x,K=k.y,ge=1.01*(Math.cos(Math.PI/2-this._pitch)*O+this.cameraToCenterDistance),Ve=this.height/50,ct=new Float64Array(16);E.perspective(ct,this._fov,this.width/this.height,Ve,ge),ct[8]=2*-_.x/this.width,ct[9]=2*_.y/this.height,E.scale(ct,ct,[1,-1,1]),E.translate(ct,ct,[0,0,-this.cameraToCenterDistance]),E.rotateX(ct,ct,this._pitch),E.rotateZ(ct,ct,this.angle),E.translate(ct,ct,[-Z,-K,0]),this.mercatorMatrix=E.scale([],ct,[this.worldSize,this.worldSize,this.worldSize]),E.scale(ct,ct,[1,1,E.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ct,this.invProjMatrix=E.invert([],this.projMatrix);var jt=this.width%2/2,Vt=this.height%2/2,Xt=Math.cos(this.angle),En=Math.sin(this.angle),gn=Z-Math.round(Z)+Xt*jt+En*Vt,kn=K-Math.round(K)+Xt*Vt+En*jt,un=new Float64Array(ct);if(E.translate(un,un,[gn>.5?gn-1:gn,kn>.5?kn-1:kn,0]),this.alignedProjMatrix=un,ct=E.create(),E.scale(ct,ct,[this.width/2,-this.height/2,1]),E.translate(ct,ct,[1,-1,0]),this.labelPlaneMatrix=ct,ct=E.create(),E.scale(ct,ct,[1,-1,1]),E.translate(ct,ct,[-1,-1,0]),E.scale(ct,ct,[2/this.width,2/this.height,1]),this.glCoordMatrix=ct,this.pixelMatrix=E.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ct=E.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ct,this._posMatrixCache={},this._alignedPosMatrixCache={}}},$a.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var _=this.pointCoordinate(new E.Point(0,0)),S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix)[3]/this.cameraToCenterDistance},$a.prototype.getCameraPoint=function(){var _=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new E.Point(0,_))},$a.prototype.getCameraQueryGeometry=function(_){var S=this.getCameraPoint();if(_.length===1)return[_[0],S];for(var x=S.x,O=S.y,k=S.x,Z=S.y,K=0,ge=_;K<ge.length;K+=1){var Ve=ge[K];x=Math.min(x,Ve.x),O=Math.min(O,Ve.y),k=Math.max(k,Ve.x),Z=Math.max(Z,Ve.y)}return[new E.Point(x,O),new E.Point(k,O),new E.Point(k,Z),new E.Point(x,Z),new E.Point(x,O)]},Object.defineProperties($a.prototype,ue);var We=function(_){var S,x,O,k;this._hashName=_&&encodeURIComponent(_),E.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(S=this._updateHashUnthrottled.bind(this),x=!1,O=null,k=function(){O=null,x&&(S(),O=setTimeout(k,300),x=!1)},function(){return x=!0,O||k(),O})};We.prototype.addTo=function(_){return this._map=_,E.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},We.prototype.remove=function(){return E.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},We.prototype.getHashString=function(_){var S=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,O=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,O),Z=Math.round(S.lng*k)/k,K=Math.round(S.lat*k)/k,ge=this._map.getBearing(),Ve=this._map.getPitch(),ct="";if(ct+=_?"/"+Z+"/"+K+"/"+x:x+"/"+K+"/"+Z,(ge||Ve)&&(ct+="/"+Math.round(10*ge)/10),Ve&&(ct+="/"+Math.round(Ve)),this._hashName){var jt=this._hashName,Vt=!1,Xt=E.window.location.hash.slice(1).split("&").map(function(En){var gn=En.split("=")[0];return gn===jt?(Vt=!0,gn+"="+ct):En}).filter(function(En){return En});return Vt||Xt.push(jt+"="+ct),"#"+Xt.join("&")}return"#"+ct},We.prototype._getCurrentHash=function(){var _,S=this,x=E.window.location.hash.replace("#","");return this._hashName?(x.split("&").map(function(O){return O.split("=")}).forEach(function(O){O[0]===S._hashName&&(_=O)}),(_&&_[1]||"").split("/")):x.split("/")},We.prototype._onHashChange=function(){var _=this._getCurrentHash();if(_.length>=3&&!_.some(function(x){return isNaN(x)})){var S=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(_[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:S,pitch:+(_[4]||0)}),!0}return!1},We.prototype._updateHashUnthrottled=function(){var _=E.window.location.href.replace(/(#.+)?$/,this.getHashString());try{E.window.history.replaceState(E.window.history.state,null,_)}catch(S){}};var xt={linearity:.3,easing:E.bezier(0,0,.3,1)},Pn=E.extend({deceleration:2500,maxSpeed:1400},xt),ur=E.extend({deceleration:20,maxSpeed:1400},xt),Br=E.extend({deceleration:1e3,maxSpeed:360},xt),fi=E.extend({deceleration:1e3,maxSpeed:90},xt),Ii=function(_){this._map=_,this.clear()};function Xo(_,S){(!_.duration||_.duration<S.duration)&&(_.duration=S.duration,_.easing=S.easing)}function Wo(_,S,x){var O=x.maxSpeed,k=x.linearity,Z=x.deceleration,K=E.clamp(_*k/(S/1e3),-O,O),ge=Math.abs(K)/(Z*k);return{easing:x.easing,duration:1e3*ge,amount:K*(ge/2)}}Ii.prototype.clear=function(){this._inertiaBuffer=[]},Ii.prototype.record=function(_){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.browser.now(),settings:_})},Ii.prototype._drainInertiaBuffer=function(){for(var _=this._inertiaBuffer,S=E.browser.now();_.length>0&&S-_[0].time>160;)_.shift()},Ii.prototype._onMoveEnd=function(_){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var S={zoom:0,bearing:0,pitch:0,pan:new E.Point(0,0),pinchAround:void 0,around:void 0},x=0,O=this._inertiaBuffer;x<O.length;x+=1){var k=O[x].settings;S.zoom+=k.zoomDelta||0,S.bearing+=k.bearingDelta||0,S.pitch+=k.pitchDelta||0,k.panDelta&&S.pan._add(k.panDelta),k.around&&(S.around=k.around),k.pinchAround&&(S.pinchAround=k.pinchAround)}var Z=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,K={};if(S.pan.mag()){var ge=Wo(S.pan.mag(),Z,E.extend({},Pn,_||{}));K.offset=S.pan.mult(ge.amount/S.pan.mag()),K.center=this._map.transform.center,Xo(K,ge)}if(S.zoom){var Ve=Wo(S.zoom,Z,ur);K.zoom=this._map.transform.zoom+Ve.amount,Xo(K,Ve)}if(S.bearing){var ct=Wo(S.bearing,Z,Br);K.bearing=this._map.transform.bearing+E.clamp(ct.amount,-179,179),Xo(K,ct)}if(S.pitch){var jt=Wo(S.pitch,Z,fi);K.pitch=this._map.transform.pitch+jt.amount,Xo(K,jt)}if(K.zoom||K.bearing){var Vt=S.pinchAround===void 0?S.around:S.pinchAround;K.around=Vt?this._map.unproject(Vt):this._map.getCenter()}return this.clear(),E.extend(K,{noMoveStart:!0})}};var da=function(_){function S(O,k,Z,K){K===void 0&&(K={});var ge=$.mousePos(k.getCanvasContainer(),Z),Ve=k.unproject(ge);_.call(this,O,E.extend({point:ge,lngLat:Ve,originalEvent:Z},K)),this._defaultPrevented=!1,this.target=k}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),$s=function(_){function S(O,k,Z){var K=O==="touchend"?Z.changedTouches:Z.touches,ge=$.touchPos(k.getCanvasContainer(),K),Ve=ge.map(function(Vt){return k.unproject(Vt)}),ct=ge.reduce(function(Vt,Xt,En,gn){return Vt.add(Xt.div(gn.length))},new E.Point(0,0)),jt=k.unproject(ct);_.call(this,O,{points:ge,point:ct,lngLats:Ve,lngLat:jt,originalEvent:Z}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),Rl=function(_){function S(O,k,Z){_.call(this,O,{originalEvent:Z}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),Es=function(_,S){this._map=_,this._clickTolerance=S.clickTolerance};Es.prototype.reset=function(){delete this._mousedownPos},Es.prototype.wheel=function(_){return this._firePreventable(new Rl(_.type,this._map,_))},Es.prototype.mousedown=function(_,S){return this._mousedownPos=S,this._firePreventable(new da(_.type,this._map,_))},Es.prototype.mouseup=function(_){this._map.fire(new da(_.type,this._map,_))},Es.prototype.click=function(_,S){this._mousedownPos&&this._mousedownPos.dist(S)>=this._clickTolerance||this._map.fire(new da(_.type,this._map,_))},Es.prototype.dblclick=function(_){return this._firePreventable(new da(_.type,this._map,_))},Es.prototype.mouseover=function(_){this._map.fire(new da(_.type,this._map,_))},Es.prototype.mouseout=function(_){this._map.fire(new da(_.type,this._map,_))},Es.prototype.touchstart=function(_){return this._firePreventable(new $s(_.type,this._map,_))},Es.prototype.touchmove=function(_){this._map.fire(new $s(_.type,this._map,_))},Es.prototype.touchend=function(_){this._map.fire(new $s(_.type,this._map,_))},Es.prototype.touchcancel=function(_){this._map.fire(new $s(_.type,this._map,_))},Es.prototype._firePreventable=function(_){if(this._map.fire(_),_.defaultPrevented)return{}},Es.prototype.isEnabled=function(){return!0},Es.prototype.isActive=function(){return!1},Es.prototype.enable=function(){},Es.prototype.disable=function(){};var Ji=function(_){this._map=_};Ji.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ji.prototype.mousemove=function(_){this._map.fire(new da(_.type,this._map,_))},Ji.prototype.mousedown=function(){this._delayContextMenu=!0},Ji.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new da("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ji.prototype.contextmenu=function(_){this._delayContextMenu?this._contextMenuEvent=_:this._map.fire(new da(_.type,this._map,_)),this._map.listens("contextmenu")&&_.preventDefault()},Ji.prototype.isEnabled=function(){return!0},Ji.prototype.isActive=function(){return!1},Ji.prototype.enable=function(){},Ji.prototype.disable=function(){};var Pl=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._container=_.getContainer(),this._clickTolerance=S.clickTolerance||1};function Eh(_,S){for(var x={},O=0;O<_.length;O++)x[_[O].identifier]=S[O];return x}Pl.prototype.isEnabled=function(){return!!this._enabled},Pl.prototype.isActive=function(){return!!this._active},Pl.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Pl.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Pl.prototype.mousedown=function(_,S){this.isEnabled()&&_.shiftKey&&_.button===0&&($.disableDrag(),this._startPos=this._lastPos=S,this._active=!0)},Pl.prototype.mousemoveWindow=function(_,S){if(this._active){var x=S;if(!(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)){var O=this._startPos;this._lastPos=x,this._box||(this._box=$.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",_));var k=Math.min(O.x,x.x),Z=Math.max(O.x,x.x),K=Math.min(O.y,x.y),ge=Math.max(O.y,x.y);$.setTransform(this._box,"translate("+k+"px,"+K+"px)"),this._box.style.width=Z-k+"px",this._box.style.height=ge-K+"px"}}},Pl.prototype.mouseupWindow=function(_,S){var x=this;if(this._active&&_.button===0){var O=this._startPos,k=S;if(this.reset(),$.suppressClick(),O.x!==k.x||O.y!==k.y)return this._map.fire(new E.Event("boxzoomend",{originalEvent:_})),{cameraAnimation:function(Z){return Z.fitScreenCoordinates(O,k,x._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",_)}},Pl.prototype.keydown=function(_){this._active&&_.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",_))},Pl.prototype.blur=function(){this.reset()},Pl.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&($.remove(this._box),this._box=null),$.enableDrag(),delete this._startPos,delete this._lastPos},Pl.prototype._fireEvent=function(_,S){return this._map.fire(new E.Event(_,{originalEvent:S}))};var qh=function(_){this.reset(),this.numTouches=_.numTouches};qh.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},qh.prototype.touchstart=function(_,S,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=_.timeStamp),x.length===this.numTouches&&(this.centroid=function(O){for(var k=new E.Point(0,0),Z=0,K=O;Z<K.length;Z+=1)k._add(K[Z]);return k.div(O.length)}(S),this.touches=Eh(x,S)))},qh.prototype.touchmove=function(_,S,x){if(!this.aborted&&this.centroid){var O=Eh(x,S);for(var k in this.touches){var Z=O[k];(!Z||Z.dist(this.touches[k])>30)&&(this.aborted=!0)}}},qh.prototype.touchend=function(_,S,x){if((!this.centroid||_.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){var O=!this.aborted&&this.centroid;if(this.reset(),O)return O}};var Ka=function(_){this.singleTap=new qh(_),this.numTaps=_.numTaps,this.reset()};Ka.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ka.prototype.touchstart=function(_,S,x){this.singleTap.touchstart(_,S,x)},Ka.prototype.touchmove=function(_,S,x){this.singleTap.touchmove(_,S,x)},Ka.prototype.touchend=function(_,S,x){var O=this.singleTap.touchend(_,S,x);if(O){var k=_.timeStamp-this.lastTime<500,Z=!this.lastTap||this.lastTap.dist(O)<30;if(k&&Z||this.reset(),this.count++,this.lastTime=_.timeStamp,this.lastTap=O,this.count===this.numTaps)return this.reset(),O}};var Cs=function(){this._zoomIn=new Ka({numTouches:1,numTaps:2}),this._zoomOut=new Ka({numTouches:2,numTaps:1}),this.reset()};Cs.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Cs.prototype.touchstart=function(_,S,x){this._zoomIn.touchstart(_,S,x),this._zoomOut.touchstart(_,S,x)},Cs.prototype.touchmove=function(_,S,x){this._zoomIn.touchmove(_,S,x),this._zoomOut.touchmove(_,S,x)},Cs.prototype.touchend=function(_,S,x){var O=this,k=this._zoomIn.touchend(_,S,x),Z=this._zoomOut.touchend(_,S,x);return k?(this._active=!0,_.preventDefault(),setTimeout(function(){return O.reset()},0),{cameraAnimation:function(K){return K.easeTo({duration:300,zoom:K.getZoom()+1,around:K.unproject(k)},{originalEvent:_})}}):Z?(this._active=!0,_.preventDefault(),setTimeout(function(){return O.reset()},0),{cameraAnimation:function(K){return K.easeTo({duration:300,zoom:K.getZoom()-1,around:K.unproject(Z)},{originalEvent:_})}}):void 0},Cs.prototype.touchcancel=function(){this.reset()},Cs.prototype.enable=function(){this._enabled=!0},Cs.prototype.disable=function(){this._enabled=!1,this.reset()},Cs.prototype.isEnabled=function(){return this._enabled},Cs.prototype.isActive=function(){return this._active};var vc={0:1,2:2},Ui=function(_){this.reset(),this._clickTolerance=_.clickTolerance||1};Ui.prototype.blur=function(){this.reset()},Ui.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ui.prototype._correctButton=function(_,S){return!1},Ui.prototype._move=function(_,S){return{}},Ui.prototype.mousedown=function(_,S){if(!this._lastPoint){var x=$.mouseButton(_);this._correctButton(_,x)&&(this._lastPoint=S,this._eventButton=x)}},Ui.prototype.mousemoveWindow=function(_,S){var x=this._lastPoint;if(x){if(_.preventDefault(),function(O,k){var Z=vc[k];return O.buttons===void 0||(O.buttons&Z)!==Z}(_,this._eventButton))this.reset();else if(this._moved||!(S.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=S,this._move(x,S)}},Ui.prototype.mouseupWindow=function(_){this._lastPoint&&$.mouseButton(_)===this._eventButton&&(this._moved&&$.suppressClick(),this.reset())},Ui.prototype.enable=function(){this._enabled=!0},Ui.prototype.disable=function(){this._enabled=!1,this.reset()},Ui.prototype.isEnabled=function(){return this._enabled},Ui.prototype.isActive=function(){return this._active};var Cf=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.mousedown=function(x,O){_.prototype.mousedown.call(this,x,O),this._lastPoint&&(this._active=!0)},S.prototype._correctButton=function(x,O){return O===0&&!x.ctrlKey},S.prototype._move=function(x,O){return{around:O,panDelta:O.sub(x)}},S}(Ui),Md=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,O){return O===0&&x.ctrlKey||O===2},S.prototype._move=function(x,O){var k=.8*(O.x-x.x);if(k)return this._active=!0,{bearingDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Ui),Kh=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,O){return O===0&&x.ctrlKey||O===2},S.prototype._move=function(x,O){var k=-.5*(O.y-x.y);if(k)return this._active=!0,{pitchDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Ui),Of=function(_){this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset()};Of.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new E.Point(0,0)},Of.prototype.touchstart=function(_,S,x){return this._calculateTransform(_,S,x)},Of.prototype.touchmove=function(_,S,x){if(this._active&&!(x.length<this._minTouches))return _.preventDefault(),this._calculateTransform(_,S,x)},Of.prototype.touchend=function(_,S,x){this._calculateTransform(_,S,x),this._active&&x.length<this._minTouches&&this.reset()},Of.prototype.touchcancel=function(){this.reset()},Of.prototype._calculateTransform=function(_,S,x){x.length>0&&(this._active=!0);var O=Eh(x,S),k=new E.Point(0,0),Z=new E.Point(0,0),K=0;for(var ge in O){var Ve=O[ge],ct=this._touches[ge];ct&&(k._add(Ve),Z._add(Ve.sub(ct)),K++,O[ge]=Ve)}if(this._touches=O,!(K<this._minTouches)&&Z.mag()){var jt=Z.div(K);if(this._sum._add(jt),!(this._sum.mag()<this._clickTolerance))return{around:k.div(K),panDelta:jt}}},Of.prototype.enable=function(){this._enabled=!0},Of.prototype.disable=function(){this._enabled=!1,this.reset()},Of.prototype.isEnabled=function(){return this._enabled},Of.prototype.isActive=function(){return this._active};var mc=function(){this.reset()};function Jp(_,S,x){for(var O=0;O<_.length;O++)if(_[O].identifier===x)return S[O]}function Sh(_,S){return Math.log(_/S)/Math.LN2}mc.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},mc.prototype._start=function(_){},mc.prototype._move=function(_,S,x){return{}},mc.prototype.touchstart=function(_,S,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([S[0],S[1]]))},mc.prototype.touchmove=function(_,S,x){if(this._firstTwoTouches){_.preventDefault();var O=this._firstTwoTouches,k=O[1],Z=Jp(x,S,O[0]),K=Jp(x,S,k);if(Z&&K){var ge=this._aroundCenter?null:Z.add(K).div(2);return this._move([Z,K],ge,_)}}},mc.prototype.touchend=function(_,S,x){if(this._firstTwoTouches){var O=this._firstTwoTouches,k=O[1],Z=Jp(x,S,O[0]),K=Jp(x,S,k);Z&&K||(this._active&&$.suppressClick(),this.reset())}},mc.prototype.touchcancel=function(){this.reset()},mc.prototype.enable=function(_){this._enabled=!0,this._aroundCenter=!!_&&_.around==="center"},mc.prototype.disable=function(){this._enabled=!1,this.reset()},mc.prototype.isEnabled=function(){return this._enabled},mc.prototype.isActive=function(){return this._active};var nc=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._distance,delete this._startDistance},S.prototype._start=function(x){this._startDistance=this._distance=x[0].dist(x[1])},S.prototype._move=function(x,O){var k=this._distance;if(this._distance=x[0].dist(x[1]),this._active||!(Math.abs(Sh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sh(this._distance,k),pinchAround:O}},S}(mc);function rh(_,S){return 180*_.angleWith(S)/Math.PI}var Rd=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},S.prototype._start=function(x){this._startVector=this._vector=x[0].sub(x[1]),this._minDiameter=x[0].dist(x[1])},S.prototype._move=function(x,O){var k=this._vector;if(this._vector=x[0].sub(x[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rh(this._vector,k),pinchAround:O}},S.prototype._isBelowThreshold=function(x){this._minDiameter=Math.min(this._minDiameter,x.mag());var O=25/(Math.PI*this._minDiameter)*360,k=rh(x,this._startVector);return Math.abs(k)<O},S}(mc);function Pd(_){return Math.abs(_.y)>Math.abs(_.x)}var Lp=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},S.prototype._start=function(x){this._lastPoints=x,Pd(x[0].sub(x[1]))&&(this._valid=!1)},S.prototype._move=function(x,O,k){var Z=x[0].sub(this._lastPoints[0]),K=x[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Z,K,k.timeStamp),this._valid)return this._lastPoints=x,this._active=!0,{pitchDelta:(Z.y+K.y)/2*-.5}},S.prototype.gestureBeginsVertically=function(x,O,k){if(this._valid!==void 0)return this._valid;var Z=x.mag()>=2,K=O.mag()>=2;if(Z||K){if(!Z||!K)return this._firstMove===void 0&&(this._firstMove=k),k-this._firstMove<100&&void 0;var ge=x.y>0==O.y>0;return Pd(x)&&Pd(O)&&ge}},S}(mc),e0={panStep:100,bearingStep:15,pitchStep:10},Oc=function(){var _=e0;this._panStep=_.panStep,this._bearingStep=_.bearingStep,this._pitchStep=_.pitchStep,this._rotationDisabled=!1};function pf(_){return _*(2-_)}Oc.prototype.blur=function(){this.reset()},Oc.prototype.reset=function(){this._active=!1},Oc.prototype.keydown=function(_){var S=this;if(!(_.altKey||_.ctrlKey||_.metaKey)){var x=0,O=0,k=0,Z=0,K=0;switch(_.keyCode){case 61:case 107:case 171:case 187:x=1;break;case 189:case 109:case 173:x=-1;break;case 37:_.shiftKey?O=-1:(_.preventDefault(),Z=-1);break;case 39:_.shiftKey?O=1:(_.preventDefault(),Z=1);break;case 38:_.shiftKey?k=1:(_.preventDefault(),K=-1);break;case 40:_.shiftKey?k=-1:(_.preventDefault(),K=1);break;default:return}return this._rotationDisabled&&(O=0,k=0),{cameraAnimation:function(ge){var Ve=ge.getZoom();ge.easeTo({duration:300,easeId:"keyboardHandler",easing:pf,zoom:x?Math.round(Ve)+x*(_.shiftKey?2:1):Ve,bearing:ge.getBearing()+O*S._bearingStep,pitch:ge.getPitch()+k*S._pitchStep,offset:[-Z*S._panStep,-K*S._panStep],center:ge.getCenter()},{originalEvent:_})}}}},Oc.prototype.enable=function(){this._enabled=!0},Oc.prototype.disable=function(){this._enabled=!1,this.reset()},Oc.prototype.isEnabled=function(){return this._enabled},Oc.prototype.isActive=function(){return this._active},Oc.prototype.disableRotation=function(){this._rotationDisabled=!0},Oc.prototype.enableRotation=function(){this._rotationDisabled=!1};var Sa=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._handler=S,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,E.bindAll(["_onTimeout"],this)};Sa.prototype.setZoomRate=function(_){this._defaultZoomRate=_},Sa.prototype.setWheelZoomRate=function(_){this._wheelZoomRate=_},Sa.prototype.isEnabled=function(){return!!this._enabled},Sa.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Sa.prototype.isZooming=function(){return!!this._zooming},Sa.prototype.enable=function(_){this.isEnabled()||(this._enabled=!0,this._aroundCenter=_&&_.around==="center")},Sa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Sa.prototype.wheel=function(_){if(this.isEnabled()){var S=_.deltaMode===E.window.WheelEvent.DOM_DELTA_LINE?40*_.deltaY:_.deltaY,x=E.browser.now(),O=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,S!==0&&S%4.000244140625==0?this._type="wheel":S!==0&&Math.abs(S)<4?this._type="trackpad":O>400?(this._type=null,this._lastValue=S,this._timeout=setTimeout(this._onTimeout,40,_)):this._type||(this._type=Math.abs(O*S)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,S+=this._lastValue)),_.shiftKey&&S&&(S/=4),this._type&&(this._lastWheelEvent=_,this._delta-=S,this._active||this._start(_)),_.preventDefault()}},Sa.prototype._onTimeout=function(_){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},Sa.prototype._start=function(_){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var S=$.mousePos(this._el,_);this._around=E.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(S)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Sa.prototype.renderFrame=function(){var _=this;if(this._frameId&&(this._frameId=null,this.isActive())){var S=this._map.transform;if(this._delta!==0){var x=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,O=2/(1+Math.exp(-Math.abs(this._delta*x)));this._delta<0&&O!==0&&(O=1/O);var k=typeof this._targetZoom=="number"?S.zoomScale(this._targetZoom):S.scale;this._targetZoom=Math.min(S.maxZoom,Math.max(S.minZoom,S.scaleZoom(k*O))),this._type==="wheel"&&(this._startZoom=S.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Z,K=typeof this._targetZoom=="number"?this._targetZoom:S.zoom,ge=this._startZoom,Ve=this._easing,ct=!1;if(this._type==="wheel"&&ge&&Ve){var jt=Math.min((E.browser.now()-this._lastWheelEventTime)/200,1),Vt=Ve(jt);Z=E.number(ge,K,Vt),jt<1?this._frameId||(this._frameId=!0):ct=!0}else Z=K,ct=!0;return this._active=!0,ct&&(this._active=!1,this._finishTimeout=setTimeout(function(){_._zooming=!1,_._handler._triggerRenderFrame(),delete _._targetZoom,delete _._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ct,zoomDelta:Z-S.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Sa.prototype._smoothOutEasing=function(_){var S=E.ease;if(this._prevEase){var x=this._prevEase,O=(E.browser.now()-x.start)/x.duration,k=x.easing(O+.01)-x.easing(O),Z=.27/Math.sqrt(k*k+1e-4)*.01,K=Math.sqrt(.0729-Z*Z);S=E.bezier(Z,K,.25,1)}return this._prevEase={start:E.browser.now(),duration:_,easing:S},S},Sa.prototype.blur=function(){this.reset()},Sa.prototype.reset=function(){this._active=!1};var gc=function(_,S){this._clickZoom=_,this._tapZoom=S};gc.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},gc.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},gc.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},gc.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var pl=function(){this.reset()};pl.prototype.reset=function(){this._active=!1},pl.prototype.blur=function(){this.reset()},pl.prototype.dblclick=function(_,S){return _.preventDefault(),{cameraAnimation:function(x){x.easeTo({duration:300,zoom:x.getZoom()+(_.shiftKey?-1:1),around:x.unproject(S)},{originalEvent:_})}}},pl.prototype.enable=function(){this._enabled=!0},pl.prototype.disable=function(){this._enabled=!1,this.reset()},pl.prototype.isEnabled=function(){return this._enabled},pl.prototype.isActive=function(){return this._active};var vl=function(){this._tap=new Ka({numTouches:1,numTaps:1}),this.reset()};vl.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},vl.prototype.touchstart=function(_,S,x){this._swipePoint||(this._tapTime&&_.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=S[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(_,S,x))},vl.prototype.touchmove=function(_,S,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;var O=S[0],k=O.y-this._swipePoint.y;return this._swipePoint=O,_.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(_,S,x)},vl.prototype.touchend=function(_,S,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(_,S,x)&&(this._tapTime=_.timeStamp)},vl.prototype.touchcancel=function(){this.reset()},vl.prototype.enable=function(){this._enabled=!0},vl.prototype.disable=function(){this._enabled=!1,this.reset()},vl.prototype.isEnabled=function(){return this._enabled},vl.prototype.isActive=function(){return this._active};var Qh=function(_,S,x){this._el=_,this._mousePan=S,this._touchPan=x};Qh.prototype.enable=function(_){this._inertiaOptions=_||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Qh.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Qh.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Qh.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var wh=function(_,S,x){this._pitchWithRotate=_.pitchWithRotate,this._mouseRotate=S,this._mousePitch=x};wh.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},wh.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},wh.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},wh.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Mf=function(_,S,x,O){this._el=_,this._touchZoom=S,this._touchRotate=x,this._tapDragZoom=O,this._rotationDisabled=!1,this._enabled=!0};Mf.prototype.enable=function(_){this._touchZoom.enable(_),this._rotationDisabled||this._touchRotate.enable(_),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Mf.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Mf.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Mf.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Mf.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Mf.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var rc=function(_){return _.zoom||_.drag||_.pitch||_.rotate},Id=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S}(E.Event);function ko(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}var Ao=function(_,S){this._map=_,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ii(_),this._bearingSnap=S.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(S),E.bindAll(["handleEvent","handleWindowEvent"],this);var x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[E.window.document,"mousemove",{capture:!0}],[E.window.document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[E.window,"blur",void 0]];for(var O=0,k=this._listeners;O<k.length;O+=1){var Z=k[O],K=Z[0];$.addEventListener(K,Z[1],K===E.window.document?this.handleWindowEvent:this.handleEvent,Z[2])}};Ao.prototype.destroy=function(){for(var _=0,S=this._listeners;_<S.length;_+=1){var x=S[_],O=x[0];$.removeEventListener(O,x[1],O===E.window.document?this.handleWindowEvent:this.handleEvent,x[2])}},Ao.prototype._addDefaultHandlers=function(_){var S=this._map,x=S.getCanvasContainer();this._add("mapEvent",new Es(S,_));var O=S.boxZoom=new Pl(S,_);this._add("boxZoom",O);var k=new Cs,Z=new pl;S.doubleClickZoom=new gc(Z,k),this._add("tapZoom",k),this._add("clickZoom",Z);var K=new vl;this._add("tapDragZoom",K);var ge=S.touchPitch=new Lp;this._add("touchPitch",ge);var Ve=new Md(_),ct=new Kh(_);S.dragRotate=new wh(_,Ve,ct),this._add("mouseRotate",Ve,["mousePitch"]),this._add("mousePitch",ct,["mouseRotate"]);var jt=new Cf(_),Vt=new Of(_);S.dragPan=new Qh(x,jt,Vt),this._add("mousePan",jt),this._add("touchPan",Vt,["touchZoom","touchRotate"]);var Xt=new Rd,En=new nc;S.touchZoomRotate=new Mf(x,En,Xt,K),this._add("touchRotate",Xt,["touchPan","touchZoom"]),this._add("touchZoom",En,["touchPan","touchRotate"]);var gn=S.scrollZoom=new Sa(S,this);this._add("scrollZoom",gn,["mousePan"]);var kn=S.keyboard=new Oc;this._add("keyboard",kn),this._add("blockableMapEvent",new Ji(S));for(var un=0,zn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];un<zn.length;un+=1){var tr=zn[un];_.interactive&&_[tr]&&S[tr].enable(_[tr])}},Ao.prototype._add=function(_,S,x){this._handlers.push({handlerName:_,handler:S,allowed:x}),this._handlersById[_]=S},Ao.prototype.stop=function(_){if(!this._updatingCamera){for(var S=0,x=this._handlers;S<x.length;S+=1)x[S].handler.reset();this._inertia.clear(),this._fireEvents({},{},_),this._changes=[]}},Ao.prototype.isActive=function(){for(var _=0,S=this._handlers;_<S.length;_+=1)if(S[_].handler.isActive())return!0;return!1},Ao.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ao.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ao.prototype.isMoving=function(){return!!rc(this._eventsInProgress)||this.isZooming()},Ao.prototype._blockedByActive=function(_,S,x){for(var O in _)if(O!==x&&(!S||S.indexOf(O)<0))return!0;return!1},Ao.prototype.handleWindowEvent=function(_){this.handleEvent(_,_.type+"Window")},Ao.prototype._getMapTouches=function(_){for(var S=[],x=0,O=_;x<O.length;x+=1){var k=O[x];this._el.contains(k.target)&&S.push(k)}return S},Ao.prototype.handleEvent=function(_,S){this._updatingCamera=!0;for(var x=_.type==="renderFrame"?void 0:_,O={needsRenderFrame:!1},k={},Z={},K=_.touches?this._getMapTouches(_.touches):void 0,ge=K?$.touchPos(this._el,K):$.mousePos(this._el,_),Ve=0,ct=this._handlers;Ve<ct.length;Ve+=1){var jt=ct[Ve],Vt=jt.handlerName,Xt=jt.handler,En=jt.allowed;if(Xt.isEnabled()){var gn=void 0;this._blockedByActive(Z,En,Vt)?Xt.reset():Xt[S||_.type]&&(gn=Xt[S||_.type](_,ge,K),this.mergeHandlerResult(O,k,gn,Vt,x),gn&&gn.needsRenderFrame&&this._triggerRenderFrame()),(gn||Xt.isActive())&&(Z[Vt]=Xt)}}var kn={};for(var un in this._previousActiveHandlers)Z[un]||(kn[un]=x);this._previousActiveHandlers=Z,(Object.keys(kn).length||ko(O))&&(this._changes.push([O,k,kn]),this._triggerRenderFrame()),(Object.keys(Z).length||ko(O))&&this._map._stop(!0),this._updatingCamera=!1;var zn=O.cameraAnimation;zn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],zn(this._map))},Ao.prototype.mergeHandlerResult=function(_,S,x,O,k){if(x){E.extend(_,x);var Z={handlerName:O,originalEvent:x.originalEvent||k};x.zoomDelta!==void 0&&(S.zoom=Z),x.panDelta!==void 0&&(S.drag=Z),x.pitchDelta!==void 0&&(S.pitch=Z),x.bearingDelta!==void 0&&(S.rotate=Z)}},Ao.prototype._applyChanges=function(){for(var _={},S={},x={},O=0,k=this._changes;O<k.length;O+=1){var Z=k[O],K=Z[0],ge=Z[1],Ve=Z[2];K.panDelta&&(_.panDelta=(_.panDelta||new E.Point(0,0))._add(K.panDelta)),K.zoomDelta&&(_.zoomDelta=(_.zoomDelta||0)+K.zoomDelta),K.bearingDelta&&(_.bearingDelta=(_.bearingDelta||0)+K.bearingDelta),K.pitchDelta&&(_.pitchDelta=(_.pitchDelta||0)+K.pitchDelta),K.around!==void 0&&(_.around=K.around),K.pinchAround!==void 0&&(_.pinchAround=K.pinchAround),K.noInertia&&(_.noInertia=K.noInertia),E.extend(S,ge),E.extend(x,Ve)}this._updateMapTransform(_,S,x),this._changes=[]},Ao.prototype._updateMapTransform=function(_,S,x){var O=this._map,k=O.transform;if(!ko(_))return this._fireEvents(S,x,!0);var Z=_.panDelta,K=_.zoomDelta,ge=_.bearingDelta,Ve=_.pitchDelta,ct=_.around,jt=_.pinchAround;jt!==void 0&&(ct=jt),O._stop(!0),ct=ct||O.transform.centerPoint;var Vt=k.pointLocation(Z?ct.sub(Z):ct);ge&&(k.bearing+=ge),Ve&&(k.pitch+=Ve),K&&(k.zoom+=K),k.setLocationAtPoint(Vt,ct),this._map._update(),_.noInertia||this._inertia.record(_),this._fireEvents(S,x,!0)},Ao.prototype._fireEvents=function(_,S,x){var O=this,k=rc(this._eventsInProgress),Z=rc(_),K={};for(var ge in _)this._eventsInProgress[ge]||(K[ge+"start"]=_[ge].originalEvent),this._eventsInProgress[ge]=_[ge];for(var Ve in!k&&Z&&this._fireEvent("movestart",Z.originalEvent),K)this._fireEvent(Ve,K[Ve]);for(var ct in Z&&this._fireEvent("move",Z.originalEvent),_)this._fireEvent(ct,_[ct].originalEvent);var jt,Vt={};for(var Xt in this._eventsInProgress){var En=this._eventsInProgress[Xt],gn=En.handlerName,kn=En.originalEvent;this._handlersById[gn].isActive()||(delete this._eventsInProgress[Xt],Vt[Xt+"end"]=jt=S[gn]||kn)}for(var un in Vt)this._fireEvent(un,Vt[un]);var zn=rc(this._eventsInProgress);if(x&&(k||Z)&&!zn){this._updatingCamera=!0;var tr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),gr=function(Ir){return Ir!==0&&-O._bearingSnap<Ir&&Ir<O._bearingSnap};tr?(gr(tr.bearing||this._map.getBearing())&&(tr.bearing=0),this._map.easeTo(tr,{originalEvent:jt})):(this._map.fire(new E.Event("moveend",{originalEvent:jt})),gr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Ao.prototype._fireEvent=function(_,S){this._map.fire(new E.Event(_,S?{originalEvent:S}:{}))},Ao.prototype._requestFrame=function(){var _=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(S){delete _._frameId,_.handleEvent(new Id("renderFrame",{timeStamp:S})),_._applyChanges()})},Ao.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ql=function(_){function S(x,O){_.call(this),this._moving=!1,this._zooming=!1,this.transform=x,this._bearingSnap=O.bearingSnap,E.bindAll(["_renderFrameCallback"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getCenter=function(){return new E.LngLat(this.transform.center.lng,this.transform.center.lat)},S.prototype.setCenter=function(x,O){return this.jumpTo({center:x},O)},S.prototype.panBy=function(x,O,k){return x=E.Point.convert(x).mult(-1),this.panTo(this.transform.center,E.extend({offset:x},O),k)},S.prototype.panTo=function(x,O,k){return this.easeTo(E.extend({center:x},O),k)},S.prototype.getZoom=function(){return this.transform.zoom},S.prototype.setZoom=function(x,O){return this.jumpTo({zoom:x},O),this},S.prototype.zoomTo=function(x,O,k){return this.easeTo(E.extend({zoom:x},O),k)},S.prototype.zoomIn=function(x,O){return this.zoomTo(this.getZoom()+1,x,O),this},S.prototype.zoomOut=function(x,O){return this.zoomTo(this.getZoom()-1,x,O),this},S.prototype.getBearing=function(){return this.transform.bearing},S.prototype.setBearing=function(x,O){return this.jumpTo({bearing:x},O),this},S.prototype.getPadding=function(){return this.transform.padding},S.prototype.setPadding=function(x,O){return this.jumpTo({padding:x},O),this},S.prototype.rotateTo=function(x,O,k){return this.easeTo(E.extend({bearing:x},O),k)},S.prototype.resetNorth=function(x,O){return this.rotateTo(0,E.extend({duration:1e3},x),O),this},S.prototype.resetNorthPitch=function(x,O){return this.easeTo(E.extend({bearing:0,pitch:0,duration:1e3},x),O),this},S.prototype.snapToNorth=function(x,O){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(x,O):this},S.prototype.getPitch=function(){return this.transform.pitch},S.prototype.setPitch=function(x,O){return this.jumpTo({pitch:x},O),this},S.prototype.cameraForBounds=function(x,O){x=E.LngLatBounds.convert(x);var k=O&&O.bearing||0;return this._cameraForBoxAndBearing(x.getNorthWest(),x.getSouthEast(),k,O)},S.prototype._cameraForBoxAndBearing=function(x,O,k,Z){var K={top:0,bottom:0,right:0,left:0};if(typeof(Z=E.extend({padding:K,offset:[0,0],maxZoom:this.transform.maxZoom},Z)).padding=="number"){var ge=Z.padding;Z.padding={top:ge,bottom:ge,right:ge,left:ge}}Z.padding=E.extend(K,Z.padding);var Ve=this.transform,ct=Ve.padding,jt=Ve.project(E.LngLat.convert(x)),Vt=Ve.project(E.LngLat.convert(O)),Xt=jt.rotate(-k*Math.PI/180),En=Vt.rotate(-k*Math.PI/180),gn=new E.Point(Math.max(Xt.x,En.x),Math.max(Xt.y,En.y)),kn=new E.Point(Math.min(Xt.x,En.x),Math.min(Xt.y,En.y)),un=gn.sub(kn),zn=(Ve.width-(ct.left+ct.right+Z.padding.left+Z.padding.right))/un.x,tr=(Ve.height-(ct.top+ct.bottom+Z.padding.top+Z.padding.bottom))/un.y;if(!(tr<0||zn<0)){var gr=Math.min(Ve.scaleZoom(Ve.scale*Math.min(zn,tr)),Z.maxZoom),Ir=typeof Z.offset.x=="number"?new E.Point(Z.offset.x,Z.offset.y):E.Point.convert(Z.offset),Or=new E.Point((Z.padding.left-Z.padding.right)/2,(Z.padding.top-Z.padding.bottom)/2).rotate(k*Math.PI/180),zr=Ir.add(Or).mult(Ve.scale/Ve.zoomScale(gr));return{center:Ve.unproject(jt.add(Vt).div(2).sub(zr)),zoom:gr,bearing:k}}E.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},S.prototype.fitBounds=function(x,O,k){return this._fitInternal(this.cameraForBounds(x,O),O,k)},S.prototype.fitScreenCoordinates=function(x,O,k,Z,K){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(E.Point.convert(x)),this.transform.pointLocation(E.Point.convert(O)),k,Z),Z,K)},S.prototype._fitInternal=function(x,O,k){return x?(delete(O=E.extend(x,O)).padding,O.linear?this.easeTo(O,k):this.flyTo(O,k)):this},S.prototype.jumpTo=function(x,O){this.stop();var k=this.transform,Z=!1,K=!1,ge=!1;return"zoom"in x&&k.zoom!==+x.zoom&&(Z=!0,k.zoom=+x.zoom),x.center!==void 0&&(k.center=E.LngLat.convert(x.center)),"bearing"in x&&k.bearing!==+x.bearing&&(K=!0,k.bearing=+x.bearing),"pitch"in x&&k.pitch!==+x.pitch&&(ge=!0,k.pitch=+x.pitch),x.padding==null||k.isPaddingEqual(x.padding)||(k.padding=x.padding),this.fire(new E.Event("movestart",O)).fire(new E.Event("move",O)),Z&&this.fire(new E.Event("zoomstart",O)).fire(new E.Event("zoom",O)).fire(new E.Event("zoomend",O)),K&&this.fire(new E.Event("rotatestart",O)).fire(new E.Event("rotate",O)).fire(new E.Event("rotateend",O)),ge&&this.fire(new E.Event("pitchstart",O)).fire(new E.Event("pitch",O)).fire(new E.Event("pitchend",O)),this.fire(new E.Event("moveend",O))},S.prototype.easeTo=function(x,O){var k=this;this._stop(!1,x.easeId),((x=E.extend({offset:[0,0],duration:500,easing:E.ease},x)).animate===!1||!x.essential&&E.browser.prefersReducedMotion)&&(x.duration=0);var Z=this.transform,K=this.getZoom(),ge=this.getBearing(),Ve=this.getPitch(),ct=this.getPadding(),jt="zoom"in x?+x.zoom:K,Vt="bearing"in x?this._normalizeBearing(x.bearing,ge):ge,Xt="pitch"in x?+x.pitch:Ve,En="padding"in x?x.padding:Z.padding,gn=E.Point.convert(x.offset),kn=Z.centerPoint.add(gn),un=Z.pointLocation(kn),zn=E.LngLat.convert(x.center||un);this._normalizeCenter(zn);var tr,gr,Ir=Z.project(un),Or=Z.project(zn).sub(Ir),zr=Z.zoomScale(jt-K);x.around&&(tr=E.LngLat.convert(x.around),gr=Z.locationPoint(tr));var ii={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||jt!==K,this._rotating=this._rotating||ge!==Vt,this._pitching=this._pitching||Xt!==Ve,this._padding=!Z.isPaddingEqual(En),this._easeId=x.easeId,this._prepareEase(O,x.noMoveStart,ii),this._ease(function(Hi){if(k._zooming&&(Z.zoom=E.number(K,jt,Hi)),k._rotating&&(Z.bearing=E.number(ge,Vt,Hi)),k._pitching&&(Z.pitch=E.number(Ve,Xt,Hi)),k._padding&&(Z.interpolatePadding(ct,En,Hi),kn=Z.centerPoint.add(gn)),tr)Z.setLocationAtPoint(tr,gr);else{var Fi=Z.zoomScale(Z.zoom-K),po=jt>K?Math.min(2,zr):Math.max(.5,zr),Vo=Math.pow(po,1-Hi),$r=Z.unproject(Ir.add(Or.mult(Hi*Vo)).mult(Fi));Z.setLocationAtPoint(Z.renderWorldCopies?$r.wrap():$r,kn)}k._fireMoveEvents(O)},function(Hi){k._afterEase(O,Hi)},x),this},S.prototype._prepareEase=function(x,O,k){k===void 0&&(k={}),this._moving=!0,O||k.moving||this.fire(new E.Event("movestart",x)),this._zooming&&!k.zooming&&this.fire(new E.Event("zoomstart",x)),this._rotating&&!k.rotating&&this.fire(new E.Event("rotatestart",x)),this._pitching&&!k.pitching&&this.fire(new E.Event("pitchstart",x))},S.prototype._fireMoveEvents=function(x){this.fire(new E.Event("move",x)),this._zooming&&this.fire(new E.Event("zoom",x)),this._rotating&&this.fire(new E.Event("rotate",x)),this._pitching&&this.fire(new E.Event("pitch",x))},S.prototype._afterEase=function(x,O){if(!this._easeId||!O||this._easeId!==O){delete this._easeId;var k=this._zooming,Z=this._rotating,K=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,k&&this.fire(new E.Event("zoomend",x)),Z&&this.fire(new E.Event("rotateend",x)),K&&this.fire(new E.Event("pitchend",x)),this.fire(new E.Event("moveend",x))}},S.prototype.flyTo=function(x,O){var k=this;if(!x.essential&&E.browser.prefersReducedMotion){var Z=E.pick(x,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Z,O)}this.stop(),x=E.extend({offset:[0,0],speed:1.2,curve:1.42,easing:E.ease},x);var K=this.transform,ge=this.getZoom(),Ve=this.getBearing(),ct=this.getPitch(),jt=this.getPadding(),Vt="zoom"in x?E.clamp(+x.zoom,K.minZoom,K.maxZoom):ge,Xt="bearing"in x?this._normalizeBearing(x.bearing,Ve):Ve,En="pitch"in x?+x.pitch:ct,gn="padding"in x?x.padding:K.padding,kn=K.zoomScale(Vt-ge),un=E.Point.convert(x.offset),zn=K.centerPoint.add(un),tr=K.pointLocation(zn),gr=E.LngLat.convert(x.center||tr);this._normalizeCenter(gr);var Ir=K.project(tr),Or=K.project(gr).sub(Ir),zr=x.curve,ii=Math.max(K.width,K.height),Hi=ii/kn,Fi=Or.mag();if("minZoom"in x){var po=E.clamp(Math.min(x.minZoom,ge,Vt),K.minZoom,K.maxZoom),Vo=ii/K.zoomScale(po-ge);zr=Math.sqrt(Vo/Fi*2)}var $r=zr*zr;function Kt(aa){var ta=(Hi*Hi-ii*ii+(aa?-1:1)*$r*$r*Fi*Fi)/(2*(aa?Hi:ii)*$r*Fi);return Math.log(Math.sqrt(ta*ta+1)-ta)}function Ya(aa){return(Math.exp(aa)-Math.exp(-aa))/2}function yo(aa){return(Math.exp(aa)+Math.exp(-aa))/2}var Qo=Kt(0),Oa=function(aa){return yo(Qo)/yo(Qo+zr*aa)},fa=function(aa){return ii*((yo(Qo)*(Ya(ta=Qo+zr*aa)/yo(ta))-Ya(Qo))/$r)/Fi;var ta},Go=(Kt(1)-Qo)/zr;if(Math.abs(Fi)<1e-6||!isFinite(Go)){if(Math.abs(ii-Hi)<1e-6)return this.easeTo(x,O);var xa=Hi<ii?-1:1;Go=Math.abs(Math.log(Hi/ii))/zr,fa=function(){return 0},Oa=function(aa){return Math.exp(xa*zr*aa)}}return x.duration="duration"in x?+x.duration:1e3*Go/("screenSpeed"in x?+x.screenSpeed/zr:+x.speed),x.maxDuration&&x.duration>x.maxDuration&&(x.duration=0),this._zooming=!0,this._rotating=Ve!==Xt,this._pitching=En!==ct,this._padding=!K.isPaddingEqual(gn),this._prepareEase(O,!1),this._ease(function(aa){var ta=aa*Go,Vl=1/Oa(ta);K.zoom=aa===1?Vt:ge+K.scaleZoom(Vl),k._rotating&&(K.bearing=E.number(Ve,Xt,aa)),k._pitching&&(K.pitch=E.number(ct,En,aa)),k._padding&&(K.interpolatePadding(jt,gn,aa),zn=K.centerPoint.add(un));var Ls=aa===1?gr:K.unproject(Ir.add(Or.mult(fa(ta))).mult(Vl));K.setLocationAtPoint(K.renderWorldCopies?Ls.wrap():Ls,zn),k._fireMoveEvents(O)},function(){return k._afterEase(O)},x),this},S.prototype.isEasing=function(){return!!this._easeFrameId},S.prototype.stop=function(){return this._stop()},S.prototype._stop=function(x,O){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var k=this._onEaseEnd;delete this._onEaseEnd,k.call(this,O)}if(!x){var Z=this.handlers;Z&&Z.stop(!1)}return this},S.prototype._ease=function(x,O,k){k.animate===!1||k.duration===0?(x(1),O()):(this._easeStart=E.browser.now(),this._easeOptions=k,this._onEaseFrame=x,this._onEaseEnd=O,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},S.prototype._renderFrameCallback=function(){var x=Math.min((E.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},S.prototype._normalizeBearing=function(x,O){x=E.wrap(x,-180,180);var k=Math.abs(x-O);return Math.abs(x-360-O)<k&&(x-=360),Math.abs(x+360-O)<k&&(x+=360),x},S.prototype._normalizeCenter=function(x){var O=this.transform;if(O.renderWorldCopies&&!O.lngRange){var k=x.lng-O.center.lng;x.lng+=k>180?-360:k<-180?360:0}},S}(E.Evented),ju=function(_){_===void 0&&(_={}),this.options=_,E.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ju.prototype.getDefaultPosition=function(){return"bottom-right"},ju.prototype.onAdd=function(_){var S=this.options&&this.options.compact;return this._map=_,this._container=$.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=$.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=$.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),S&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),S===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ju.prototype.onRemove=function(){$.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ju.prototype._setElementTitle=function(_,S){var x=this._map._getUIString("AttributionControl."+S);_.title=x,_.setAttribute("aria-label",x)},ju.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ju.prototype._updateEditLink=function(){var _=this._editLink;_||(_=this._editLink=this._container.querySelector(".mapbox-improve-map"));var S=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||E.config.ACCESS_TOKEN}];if(_){var x=S.reduce(function(O,k,Z){return k.value&&(O+=k.key+"="+k.value+(Z<S.length-1?"&":"")),O},"?");_.href=E.config.FEEDBACK_URL+"/"+x+(this._map._hash?this._map._hash.getHashString(!0):""),_.rel="noopener nofollow",this._setElementTitle(_,"MapFeedback")}},ju.prototype._updateData=function(_){!_||_.sourceDataType!=="metadata"&&_.sourceDataType!=="visibility"&&_.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},ju.prototype._updateAttributions=function(){if(this._map.style){var _=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?_=_.concat(this.options.customAttribution.map(function(ge){return typeof ge!="string"?"":ge})):typeof this.options.customAttribution=="string"&&_.push(this.options.customAttribution)),this._map.style.stylesheet){var S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}var x=this._map.style.sourceCaches;for(var O in x){var k=x[O];if(k.used){var Z=k.getSource();Z.attribution&&_.indexOf(Z.attribution)<0&&_.push(Z.attribution)}}_.sort(function(ge,Ve){return ge.length-Ve.length});var K=(_=_.filter(function(ge,Ve){for(var ct=Ve+1;ct<_.length;ct++)if(_[ct].indexOf(ge)>=0)return!1;return!0})).join(" | ");K!==this._attribHTML&&(this._attribHTML=K,_.length?(this._innerContainer.innerHTML=K,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ju.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Vu=function(){E.bindAll(["_updateLogo"],this),E.bindAll(["_updateCompact"],this)};Vu.prototype.onAdd=function(_){this._map=_,this._container=$.create("div","mapboxgl-ctrl");var S=$.create("a","mapboxgl-ctrl-logo");return S.target="_blank",S.rel="noopener nofollow",S.href="https://www.mapbox.com/",S.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),S.setAttribute("rel","noopener nofollow"),this._container.appendChild(S),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Vu.prototype.onRemove=function(){$.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Vu.prototype.getDefaultPosition=function(){return"bottom-left"},Vu.prototype._updateLogo=function(_){_&&_.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Vu.prototype._logoRequired=function(){if(this._map.style){var _=this._map.style.sourceCaches;for(var S in _)if(_[S].getSource().mapbox_logo)return!0;return!1}},Vu.prototype._updateCompact=function(){var _=this._container.children;if(_.length){var S=_[0];this._map.getCanvasContainer().offsetWidth<250?S.classList.add("mapboxgl-compact"):S.classList.remove("mapboxgl-compact")}};var ml=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ml.prototype.add=function(_){var S=++this._id;return this._queue.push({callback:_,id:S,cancelled:!1}),S},ml.prototype.remove=function(_){for(var S=this._currentlyRunning,x=0,O=S?this._queue.concat(S):this._queue;x<O.length;x+=1){var k=O[x];if(k.id===_)return void(k.cancelled=!0)}},ml.prototype.run=function(_){_===void 0&&(_=0);var S=this._currentlyRunning=this._queue;this._queue=[];for(var x=0,O=S;x<O.length;x+=1){var k=O[x];if(!k.cancelled&&(k.callback(_),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ml.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Zc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Th=E.window.HTMLImageElement,Jh=E.window.HTMLElement,Ss=E.window.ImageBitmap,bu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},k0=function(_){function S(O){var k=this;if((O=E.extend({},bu,O)).minZoom!=null&&O.maxZoom!=null&&O.minZoom>O.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(O.minPitch!=null&&O.maxPitch!=null&&O.minPitch>O.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(O.minPitch!=null&&O.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(O.maxPitch!=null&&O.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Z=new $a(O.minZoom,O.maxZoom,O.minPitch,O.maxPitch,O.renderWorldCopies);if(_.call(this,Z,O),this._interactive=O.interactive,this._maxTileCacheSize=O.maxTileCacheSize,this._failIfMajorPerformanceCaveat=O.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=O.preserveDrawingBuffer,this._antialias=O.antialias,this._trackResize=O.trackResize,this._bearingSnap=O.bearingSnap,this._refreshExpiredTiles=O.refreshExpiredTiles,this._fadeDuration=O.fadeDuration,this._crossSourceCollisions=O.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=O.collectResourceTiming,this._renderTaskQueue=new ml,this._controls=[],this._mapId=E.uniqueId(),this._locale=E.extend({},Zc,O.locale),this._clickTolerance=O.clickTolerance,this._requestManager=new E.RequestManager(O.transformRequest,O.accessToken),typeof O.container=="string"){if(this._container=E.window.document.getElementById(O.container),!this._container)throw new Error("Container '"+O.container+"' not found.")}else{if(!(O.container instanceof Jh))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=O.container}if(O.maxBounds&&this.setMaxBounds(O.maxBounds),E.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return k._update(!1)}),this.on("moveend",function(){return k._update(!1)}),this.on("zoom",function(){return k._update(!0)}),E.window!==void 0&&(E.window.addEventListener("online",this._onWindowOnline,!1),E.window.addEventListener("resize",this._onWindowResize,!1),E.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Ao(this,O),this._hash=O.hash&&new We(typeof O.hash=="string"&&O.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:O.center,zoom:O.zoom,bearing:O.bearing,pitch:O.pitch}),O.bounds&&(this.resize(),this.fitBounds(O.bounds,E.extend({},O.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=O.localIdeographFontFamily,O.style&&this.setStyle(O.style,{localIdeographFontFamily:O.localIdeographFontFamily}),O.attributionControl&&this.addControl(new ju({customAttribution:O.customAttribution})),this.addControl(new Vu,O.logoPosition),this.on("style.load",function(){k.transform.unmodified&&k.jumpTo(k.style.stylesheet)}),this.on("data",function(K){k._update(K.dataType==="style"),k.fire(new E.Event(K.dataType+"data",K))}),this.on("dataloading",function(K){k.fire(new E.Event(K.dataType+"dataloading",K))})}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return S.prototype._getMapId=function(){return this._mapId},S.prototype.addControl=function(O,k){if(k===void 0&&(k=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Z=O.onAdd(this);this._controls.push(O);var K=this._controlPositions[k];return k.indexOf("bottom")!==-1?K.insertBefore(Z,K.firstChild):K.appendChild(Z),this},S.prototype.removeControl=function(O){if(!O||!O.onRemove)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var k=this._controls.indexOf(O);return k>-1&&this._controls.splice(k,1),O.onRemove(this),this},S.prototype.hasControl=function(O){return this._controls.indexOf(O)>-1},S.prototype.resize=function(O){var k=this._containerDimensions(),Z=k[0],K=k[1];if(Z===this.transform.width&&K===this.transform.height)return this;this._resizeCanvas(Z,K),this.transform.resize(Z,K),this.painter.resize(Z,K);var ge=!this._moving;return ge&&this.fire(new E.Event("movestart",O)).fire(new E.Event("move",O)),this.fire(new E.Event("resize",O)),ge&&this.fire(new E.Event("moveend",O)),this},S.prototype.getBounds=function(){return this.transform.getBounds()},S.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},S.prototype.setMaxBounds=function(O){return this.transform.setMaxBounds(E.LngLatBounds.convert(O)),this._update()},S.prototype.setMinZoom=function(O){if((O=O==null?-2:O)>=-2&&O<=this.transform.maxZoom)return this.transform.minZoom=O,this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},S.prototype.getMinZoom=function(){return this.transform.minZoom},S.prototype.setMaxZoom=function(O){if((O=O==null?22:O)>=this.transform.minZoom)return this.transform.maxZoom=O,this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")},S.prototype.getMaxZoom=function(){return this.transform.maxZoom},S.prototype.setMinPitch=function(O){if((O=O==null?0:O)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.minPitch=O,this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},S.prototype.getMinPitch=function(){return this.transform.minPitch},S.prototype.setMaxPitch=function(O){if((O=O==null?60:O)>60)throw new Error("maxPitch must be less than or equal to 60");if(O>=this.transform.minPitch)return this.transform.maxPitch=O,this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")},S.prototype.getMaxPitch=function(){return this.transform.maxPitch},S.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},S.prototype.setRenderWorldCopies=function(O){return this.transform.renderWorldCopies=O,this._update()},S.prototype.project=function(O){return this.transform.locationPoint(E.LngLat.convert(O))},S.prototype.unproject=function(O){return this.transform.pointLocation(E.Point.convert(O))},S.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},S.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},S.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},S.prototype._createDelegatedListener=function(O,k,Z){var K,ge=this;if(O==="mouseenter"||O==="mouseover"){var Ve=!1;return{layer:k,listener:Z,delegates:{mousemove:function(jt){var Vt=ge.getLayer(k)?ge.queryRenderedFeatures(jt.point,{layers:[k]}):[];Vt.length?Ve||(Ve=!0,Z.call(ge,new da(O,ge,jt.originalEvent,{features:Vt}))):Ve=!1},mouseout:function(){Ve=!1}}}}if(O==="mouseleave"||O==="mouseout"){var ct=!1;return{layer:k,listener:Z,delegates:{mousemove:function(jt){(ge.getLayer(k)?ge.queryRenderedFeatures(jt.point,{layers:[k]}):[]).length?ct=!0:ct&&(ct=!1,Z.call(ge,new da(O,ge,jt.originalEvent)))},mouseout:function(jt){ct&&(ct=!1,Z.call(ge,new da(O,ge,jt.originalEvent)))}}}}return{layer:k,listener:Z,delegates:(K={},K[O]=function(jt){var Vt=ge.getLayer(k)?ge.queryRenderedFeatures(jt.point,{layers:[k]}):[];Vt.length&&(jt.features=Vt,Z.call(ge,jt),delete jt.features)},K)}},S.prototype.on=function(O,k,Z){if(Z===void 0)return _.prototype.on.call(this,O,k);var K=this._createDelegatedListener(O,k,Z);for(var ge in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(K),K.delegates)this.on(ge,K.delegates[ge]);return this},S.prototype.once=function(O,k,Z){if(Z===void 0)return _.prototype.once.call(this,O,k);var K=this._createDelegatedListener(O,k,Z);for(var ge in K.delegates)this.once(ge,K.delegates[ge]);return this},S.prototype.off=function(O,k,Z){var K=this;return Z===void 0?_.prototype.off.call(this,O,k):(this._delegatedListeners&&this._delegatedListeners[O]&&function(ge){for(var Ve=ge[O],ct=0;ct<Ve.length;ct++){var jt=Ve[ct];if(jt.layer===k&&jt.listener===Z){for(var Vt in jt.delegates)K.off(Vt,jt.delegates[Vt]);return Ve.splice(ct,1),K}}}(this._delegatedListeners),this)},S.prototype.queryRenderedFeatures=function(O,k){if(!this.style)return[];var Z;if(k!==void 0||O===void 0||O instanceof E.Point||Array.isArray(O)||(k=O,O=void 0),k=k||{},(O=O||[[0,0],[this.transform.width,this.transform.height]])instanceof E.Point||typeof O[0]=="number")Z=[E.Point.convert(O)];else{var K=E.Point.convert(O[0]),ge=E.Point.convert(O[1]);Z=[K,new E.Point(ge.x,K.y),ge,new E.Point(K.x,ge.y),K]}return this.style.queryRenderedFeatures(Z,k,this.transform)},S.prototype.querySourceFeatures=function(O,k){return this.style.querySourceFeatures(O,k)},S.prototype.setStyle=function(O,k){return(k=E.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},k)).diff!==!1&&k.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,k),this):(this._localIdeographFontFamily=k.localIdeographFontFamily,this._updateStyle(O,k))},S.prototype._getUIString=function(O){var k=this._locale[O];if(k==null)throw new Error("Missing UI string '"+O+"'");return k},S.prototype._updateStyle=function(O,k){return this.style&&(this.style.setEventedParent(null),this.style._remove()),O?(this.style=new Ou(this,k||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O):this.style.loadJSON(O),this):(delete this.style,this)},S.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ou(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},S.prototype._diffStyle=function(O,k){var Z=this;if(typeof O=="string"){var K=this._requestManager.normalizeStyleURL(O),ge=this._requestManager.transformRequest(K,E.ResourceType.Style);E.getJSON(ge,function(Ve,ct){Ve?Z.fire(new E.ErrorEvent(Ve)):ct&&Z._updateDiff(ct,k)})}else typeof O=="object"&&this._updateDiff(O,k)},S.prototype._updateDiff=function(O,k){try{this.style.setState(O)&&this._update(!0)}catch(Z){E.warnOnce("Unable to perform style diff: "+(Z.message||Z.error||Z)+".  Rebuilding the style from scratch."),this._updateStyle(O,k)}},S.prototype.getStyle=function(){if(this.style)return this.style.serialize()},S.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():E.warnOnce("There is no style added to the map.")},S.prototype.addSource=function(O,k){return this._lazyInitEmptyStyle(),this.style.addSource(O,k),this._update(!0)},S.prototype.isSourceLoaded=function(O){var k=this.style&&this.style.sourceCaches[O];if(k!==void 0)return k.loaded();this.fire(new E.ErrorEvent(new Error("There is no source with ID '"+O+"'")))},S.prototype.areTilesLoaded=function(){var O=this.style&&this.style.sourceCaches;for(var k in O){var Z=O[k]._tiles;for(var K in Z){var ge=Z[K];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}}return!0},S.prototype.addSourceType=function(O,k,Z){return this._lazyInitEmptyStyle(),this.style.addSourceType(O,k,Z)},S.prototype.removeSource=function(O){return this.style.removeSource(O),this._update(!0)},S.prototype.getSource=function(O){return this.style.getSource(O)},S.prototype.addImage=function(O,k,Z){Z===void 0&&(Z={});var K=Z.pixelRatio;K===void 0&&(K=1);var ge=Z.sdf;ge===void 0&&(ge=!1);var Ve=Z.stretchX,ct=Z.stretchY,jt=Z.content;if(this._lazyInitEmptyStyle(),k instanceof Th||Ss&&k instanceof Ss){var Vt=E.browser.getImageData(k);this.style.addImage(O,{data:new E.RGBAImage({width:Vt.width,height:Vt.height},Vt.data),pixelRatio:K,stretchX:Ve,stretchY:ct,content:jt,sdf:ge,version:0})}else{if(k.width===void 0||k.height===void 0)return this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Xt=k;this.style.addImage(O,{data:new E.RGBAImage({width:k.width,height:k.height},new Uint8Array(k.data)),pixelRatio:K,stretchX:Ve,stretchY:ct,content:jt,sdf:ge,version:0,userImage:Xt}),Xt.onAdd&&Xt.onAdd(this,O)}},S.prototype.updateImage=function(O,k){var Z=this.style.getImage(O);if(!Z)return this.fire(new E.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var K=k instanceof Th||Ss&&k instanceof Ss?E.browser.getImageData(k):k,ge=K.width,Ve=K.height,ct=K.data;return ge===void 0||Ve===void 0?this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ge!==Z.data.width||Ve!==Z.data.height?this.fire(new E.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Z.data.replace(ct,!(k instanceof Th||Ss&&k instanceof Ss)),void this.style.updateImage(O,Z))},S.prototype.hasImage=function(O){return O?!!this.style.getImage(O):(this.fire(new E.ErrorEvent(new Error("Missing required image id"))),!1)},S.prototype.removeImage=function(O){this.style.removeImage(O)},S.prototype.loadImage=function(O,k){E.getImage(this._requestManager.transformRequest(O,E.ResourceType.Image),k)},S.prototype.listImages=function(){return this.style.listImages()},S.prototype.addLayer=function(O,k){return this._lazyInitEmptyStyle(),this.style.addLayer(O,k),this._update(!0)},S.prototype.moveLayer=function(O,k){return this.style.moveLayer(O,k),this._update(!0)},S.prototype.removeLayer=function(O){return this.style.removeLayer(O),this._update(!0)},S.prototype.getLayer=function(O){return this.style.getLayer(O)},S.prototype.setLayerZoomRange=function(O,k,Z){return this.style.setLayerZoomRange(O,k,Z),this._update(!0)},S.prototype.setFilter=function(O,k,Z){return Z===void 0&&(Z={}),this.style.setFilter(O,k,Z),this._update(!0)},S.prototype.getFilter=function(O){return this.style.getFilter(O)},S.prototype.setPaintProperty=function(O,k,Z,K){return K===void 0&&(K={}),this.style.setPaintProperty(O,k,Z,K),this._update(!0)},S.prototype.getPaintProperty=function(O,k){return this.style.getPaintProperty(O,k)},S.prototype.setLayoutProperty=function(O,k,Z,K){return K===void 0&&(K={}),this.style.setLayoutProperty(O,k,Z,K),this._update(!0)},S.prototype.getLayoutProperty=function(O,k){return this.style.getLayoutProperty(O,k)},S.prototype.setLight=function(O,k){return k===void 0&&(k={}),this._lazyInitEmptyStyle(),this.style.setLight(O,k),this._update(!0)},S.prototype.getLight=function(){return this.style.getLight()},S.prototype.setFeatureState=function(O,k){return this.style.setFeatureState(O,k),this._update()},S.prototype.removeFeatureState=function(O,k){return this.style.removeFeatureState(O,k),this._update()},S.prototype.getFeatureState=function(O){return this.style.getFeatureState(O)},S.prototype.getContainer=function(){return this._container},S.prototype.getCanvasContainer=function(){return this._canvasContainer},S.prototype.getCanvas=function(){return this._canvas},S.prototype._containerDimensions=function(){var O=0,k=0;return this._container&&(O=this._container.clientWidth||400,k=this._container.clientHeight||300),[O,k]},S.prototype._detectMissingCSS=function(){E.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&E.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},S.prototype._setupContainer=function(){var O=this._container;O.classList.add("mapboxgl-map"),(this._missingCSSCanary=$.create("div","mapboxgl-canary",O)).style.visibility="hidden",this._detectMissingCSS();var k=this._canvasContainer=$.create("div","mapboxgl-canvas-container",O);this._interactive&&k.classList.add("mapboxgl-interactive"),this._canvas=$.create("canvas","mapboxgl-canvas",k),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Z=this._containerDimensions();this._resizeCanvas(Z[0],Z[1]);var K=this._controlContainer=$.create("div","mapboxgl-control-container",O),ge=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ve){ge[Ve]=$.create("div","mapboxgl-ctrl-"+Ve,K)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},S.prototype._resizeCanvas=function(O,k){var Z=E.browser.devicePixelRatio||1;this._canvas.width=Z*O,this._canvas.height=Z*k,this._canvas.style.width=O+"px",this._canvas.style.height=k+"px"},S.prototype._setupPainter=function(){var O=E.extend({},fe.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),k=this._canvas.getContext("webgl",O)||this._canvas.getContext("experimental-webgl",O);k?(this.painter=new Gs(k,this.transform),E.webpSupported.testSupport(k)):this.fire(new E.ErrorEvent(new Error("Failed to initialize WebGL")))},S.prototype._contextLost=function(O){O.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new E.Event("webglcontextlost",{originalEvent:O}))},S.prototype._contextRestored=function(O){this._setupPainter(),this.resize(),this._update(),this.fire(new E.Event("webglcontextrestored",{originalEvent:O}))},S.prototype._onMapScroll=function(O){if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},S.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},S.prototype._update=function(O){return this.style?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this},S.prototype._requestRenderFrame=function(O){return this._update(),this._renderTaskQueue.add(O)},S.prototype._cancelRenderFrame=function(O){this._renderTaskQueue.remove(O)},S.prototype._render=function(O){var k,Z=this,K=0,ge=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(k=ge.createQueryEXT(),ge.beginQueryEXT(ge.TIME_ELAPSED_EXT,k),K=E.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),!this._removed){var Ve=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ct=this.transform.zoom,jt=E.browser.now();this.style.zoomHistory.update(ct,jt);var Vt=new E.EvaluationParameters(ct,{now:jt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Xt=Vt.crossFadingFactor();Xt===1&&Xt===this._crossFadingFactor||(Ve=!0,this._crossFadingFactor=Xt),this.style.update(Vt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new E.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new E.Event("load"))),this.style&&(this.style.hasTransitions()||Ve)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var En=E.browser.now()-K;ge.endQueryEXT(ge.TIME_ELAPSED_EXT,k),setTimeout(function(){var un=ge.getQueryObjectEXT(k,ge.QUERY_RESULT_EXT)/1e6;ge.deleteQueryEXT(k),Z.fire(new E.Event("gpu-timing-frame",{cpuTime:En,gpuTime:un}))},50)}if(this.listens("gpu-timing-layer")){var gn=this.painter.collectGpuTimers();setTimeout(function(){var un=Z.painter.queryGpuTimers(gn);Z.fire(new E.Event("gpu-timing-layer",{layerTimes:un}))},50)}var kn=this._sourcesDirty||this._styleDirty||this._placementDirty;return kn||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new E.Event("idle")),!this._loaded||this._fullyLoaded||kn||(this._fullyLoaded=!0),this}},S.prototype.remove=function(){this._hash&&this._hash.remove();for(var O=0,k=this._controls;O<k.length;O+=1)k[O].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),E.window!==void 0&&(E.window.removeEventListener("resize",this._onWindowResize,!1),E.window.removeEventListener("orientationchange",this._onWindowResize,!1),E.window.removeEventListener("online",this._onWindowOnline,!1));var Z=this.painter.context.gl.getExtension("WEBGL_lose_context");Z&&Z.loseContext(),Ah(this._canvasContainer),Ah(this._controlContainer),Ah(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new E.Event("remove"))},S.prototype.triggerRepaint=function(){var O=this;this.style&&!this._frame&&(this._frame=E.browser.frame(function(k){O._frame=null,O._render(k)}))},S.prototype._onWindowOnline=function(){this._update()},S.prototype._onWindowResize=function(O){this._trackResize&&this.resize({originalEvent:O})._update()},x.showTileBoundaries.get=function(){return!!this._showTileBoundaries},x.showTileBoundaries.set=function(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())},x.showPadding.get=function(){return!!this._showPadding},x.showPadding.set=function(O){this._showPadding!==O&&(this._showPadding=O,this._update())},x.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},x.showCollisionBoxes.set=function(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())},x.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},x.showOverdrawInspector.set=function(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())},x.repaint.get=function(){return!!this._repaint},x.repaint.set=function(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())},x.vertices.get=function(){return!!this._vertices},x.vertices.set=function(O){this._vertices=O,this._update()},S.prototype._setCacheLimits=function(O,k){E.setCacheLimits(O,k)},x.version.get=function(){return E.version},Object.defineProperties(S.prototype,x),S}(Ql);function Ah(_){_.parentNode&&_.parentNode.removeChild(_)}var sp={showCompass:!0,showZoom:!0,visualizePitch:!1},Ch=function(_){var S=this;this.options=E.extend({},sp,_),this._container=$.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this.options.showZoom&&(E.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(x){return S._map.zoomIn({},{originalEvent:x})}),$.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(x){return S._map.zoomOut({},{originalEvent:x})}),$.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(E.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(x){S.options.visualizePitch?S._map.resetNorthPitch({},{originalEvent:x}):S._map.resetNorth({},{originalEvent:x})}),this._compassIcon=$.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ch.prototype._updateZoomButtons=function(){var _=this._map.getZoom(),S=_===this._map.getMaxZoom(),x=_===this._map.getMinZoom();this._zoomInButton.disabled=S,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",S.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},Ch.prototype._rotateCompassArrow=function(){var _=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=_},Ch.prototype.onAdd=function(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ic(this._map,this._compass,this.options.visualizePitch)),this._container},Ch.prototype.onRemove=function(){$.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ch.prototype._createButton=function(_,S){var x=$.create("button",_,this._container);return x.type="button",x.addEventListener("click",S),x},Ch.prototype._setButtonTitle=function(_,S){var x=this._map._getUIString("NavigationControl."+S);_.title=x,_.setAttribute("aria-label",x)};var ic=function(_,S,x){x===void 0&&(x=!1),this._clickTolerance=10,this.element=S,this.mouseRotate=new Md({clickTolerance:_.dragRotate._mouseRotate._clickTolerance}),this.map=_,x&&(this.mousePitch=new Kh({clickTolerance:_.dragRotate._mousePitch._clickTolerance})),E.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),$.addEventListener(S,"mousedown",this.mousedown),$.addEventListener(S,"touchstart",this.touchstart,{passive:!1}),$.addEventListener(S,"touchmove",this.touchmove),$.addEventListener(S,"touchend",this.touchend),$.addEventListener(S,"touchcancel",this.reset)};function ih(_,S,x){if(_=new E.LngLat(_.lng,_.lat),S){var O=new E.LngLat(_.lng-360,_.lat),k=new E.LngLat(_.lng+360,_.lat),Z=x.locationPoint(_).distSqr(S);x.locationPoint(O).distSqr(S)<Z?_=O:x.locationPoint(k).distSqr(S)<Z&&(_=k)}for(;Math.abs(_.lng-x.center.lng)>180;){var K=x.locationPoint(_);if(K.x>=0&&K.y>=0&&K.x<=x.width&&K.y<=x.height)break;_.lng>x.center.lng?_.lng-=360:_.lng+=360}return _}ic.prototype.down=function(_,S){this.mouseRotate.mousedown(_,S),this.mousePitch&&this.mousePitch.mousedown(_,S),$.disableDrag()},ic.prototype.move=function(_,S){var x=this.map,O=this.mouseRotate.mousemoveWindow(_,S);if(O&&O.bearingDelta&&x.setBearing(x.getBearing()+O.bearingDelta),this.mousePitch){var k=this.mousePitch.mousemoveWindow(_,S);k&&k.pitchDelta&&x.setPitch(x.getPitch()+k.pitchDelta)}},ic.prototype.off=function(){var _=this.element;$.removeEventListener(_,"mousedown",this.mousedown),$.removeEventListener(_,"touchstart",this.touchstart,{passive:!1}),$.removeEventListener(_,"touchmove",this.touchmove),$.removeEventListener(_,"touchend",this.touchend),$.removeEventListener(_,"touchcancel",this.reset),this.offTemp()},ic.prototype.offTemp=function(){$.enableDrag(),$.removeEventListener(E.window,"mousemove",this.mousemove),$.removeEventListener(E.window,"mouseup",this.mouseup)},ic.prototype.mousedown=function(_){this.down(E.extend({},_,{ctrlKey:!0,preventDefault:function(){return _.preventDefault()}}),$.mousePos(this.element,_)),$.addEventListener(E.window,"mousemove",this.mousemove),$.addEventListener(E.window,"mouseup",this.mouseup)},ic.prototype.mousemove=function(_){this.move(_,$.mousePos(this.element,_))},ic.prototype.mouseup=function(_){this.mouseRotate.mouseupWindow(_),this.mousePitch&&this.mousePitch.mouseupWindow(_),this.offTemp()},ic.prototype.touchstart=function(_){_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=$.touchPos(this.element,_.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return _.preventDefault()}},this._startPos))},ic.prototype.touchmove=function(_){_.targetTouches.length!==1?this.reset():(this._lastPos=$.touchPos(this.element,_.targetTouches)[0],this.move({preventDefault:function(){return _.preventDefault()}},this._lastPos))},ic.prototype.touchend=function(_){_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ic.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var yc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function t0(_,S,x){var O=_.classList;for(var k in yc)O.remove("mapboxgl-"+x+"-anchor-"+k);O.add("mapboxgl-"+x+"-anchor-"+S)}var Hf,lp=function(_){function S(x,O){if(_.call(this),(x instanceof E.window.HTMLElement||O)&&(x=E.extend({element:x},O)),E.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=x&&x.anchor||"center",this._color=x&&x.color||"#3FB1CE",this._scale=x&&x.scale||1,this._draggable=x&&x.draggable||!1,this._clickTolerance=x&&x.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=x&&x.rotation||0,this._rotationAlignment=x&&x.rotationAlignment||"auto",this._pitchAlignment=x&&x.pitchAlignment&&x.pitchAlignment!=="auto"?x.pitchAlignment:this._rotationAlignment,x&&x.element)this._element=x.element,this._offset=E.Point.convert(x&&x.offset||[0,0]);else{this._defaultMarker=!0,this._element=$.create("div"),this._element.setAttribute("aria-label","Map marker");var k=$.createNS("http://www.w3.org/2000/svg","svg");k.setAttributeNS(null,"display","block"),k.setAttributeNS(null,"height","41px"),k.setAttributeNS(null,"width","27px"),k.setAttributeNS(null,"viewBox","0 0 27 41");var Z=$.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"stroke","none"),Z.setAttributeNS(null,"stroke-width","1"),Z.setAttributeNS(null,"fill","none"),Z.setAttributeNS(null,"fill-rule","evenodd");var K=$.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");var ge=$.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ge.setAttributeNS(null,"fill","#000000");for(var Ve=0,ct=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ve<ct.length;Ve+=1){var jt=ct[Ve],Vt=$.createNS("http://www.w3.org/2000/svg","ellipse");Vt.setAttributeNS(null,"opacity","0.04"),Vt.setAttributeNS(null,"cx","10.5"),Vt.setAttributeNS(null,"cy","5.80029008"),Vt.setAttributeNS(null,"rx",jt.rx),Vt.setAttributeNS(null,"ry",jt.ry),ge.appendChild(Vt)}var Xt=$.createNS("http://www.w3.org/2000/svg","g");Xt.setAttributeNS(null,"fill",this._color);var En=$.createNS("http://www.w3.org/2000/svg","path");En.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Xt.appendChild(En);var gn=$.createNS("http://www.w3.org/2000/svg","g");gn.setAttributeNS(null,"opacity","0.25"),gn.setAttributeNS(null,"fill","#000000");var kn=$.createNS("http://www.w3.org/2000/svg","path");kn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),gn.appendChild(kn);var un=$.createNS("http://www.w3.org/2000/svg","g");un.setAttributeNS(null,"transform","translate(6.0, 7.0)"),un.setAttributeNS(null,"fill","#FFFFFF");var zn=$.createNS("http://www.w3.org/2000/svg","g");zn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var tr=$.createNS("http://www.w3.org/2000/svg","circle");tr.setAttributeNS(null,"fill","#000000"),tr.setAttributeNS(null,"opacity","0.25"),tr.setAttributeNS(null,"cx","5.5"),tr.setAttributeNS(null,"cy","5.5"),tr.setAttributeNS(null,"r","5.4999962");var gr=$.createNS("http://www.w3.org/2000/svg","circle");gr.setAttributeNS(null,"fill","#FFFFFF"),gr.setAttributeNS(null,"cx","5.5"),gr.setAttributeNS(null,"cy","5.5"),gr.setAttributeNS(null,"r","5.4999962"),zn.appendChild(tr),zn.appendChild(gr),K.appendChild(ge),K.appendChild(Xt),K.appendChild(gn),K.appendChild(un),K.appendChild(zn),k.appendChild(K),k.setAttributeNS(null,"height",41*this._scale+"px"),k.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(k),this._offset=E.Point.convert(x&&x.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ir){Ir.preventDefault()}),this._element.addEventListener("mousedown",function(Ir){Ir.preventDefault()}),t0(this._element,this._anchor,"marker"),this._popup=null}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this.remove(),this._map=x,x.getCanvasContainer().appendChild(this._element),x.on("move",this._update),x.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},S.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),$.remove(this._element),this._popup&&this._popup.remove(),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},S.prototype.getElement=function(){return this._element},S.prototype.setPopup=function(x){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),x){if(!("offset"in x.options)){var O=Math.sqrt(Math.pow(13.5,2)/2);x.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[O,-1*(24.6+O)],"bottom-right":[-O,-1*(24.6+O)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=x,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},S.prototype._onKeyPress=function(x){var O=x.code,k=x.charCode||x.keyCode;O!=="Space"&&O!=="Enter"&&k!==32&&k!==13||this.togglePopup()},S.prototype._onMapClick=function(x){var O=x.originalEvent.target,k=this._element;this._popup&&(O===k||k.contains(O))&&this.togglePopup()},S.prototype.getPopup=function(){return this._popup},S.prototype.togglePopup=function(){var x=this._popup;return x?(x.isOpen()?x.remove():x.addTo(this._map),this):this},S.prototype._update=function(x){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ih(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var O="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?O="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(O="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k="rotateX("+this._map.getPitch()+"deg)"),x&&x.type!=="moveend"||(this._pos=this._pos.round()),$.setTransform(this._element,yc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+k+" "+O)}},S.prototype.getOffset=function(){return this._offset},S.prototype.setOffset=function(x){return this._offset=E.Point.convert(x),this._update(),this},S.prototype._onMove=function(x){if(!this._isDragging){var O=this._clickTolerance||this._map._clickTolerance;this._isDragging=x.point.dist(this._pointerdownPos)>=O}this._isDragging&&(this._pos=x.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new E.Event("dragstart"))),this.fire(new E.Event("drag")))},S.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new E.Event("dragend")),this._state="inactive"},S.prototype._addDragHandler=function(x){this._element.contains(x.originalEvent.target)&&(x.preventDefault(),this._positionDelta=x.point.sub(this._pos).add(this._offset),this._pointerdownPos=x.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},S.prototype.setDraggable=function(x){return this._draggable=!!x,this._map&&(x?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},S.prototype.isDraggable=function(){return this._draggable},S.prototype.setRotation=function(x){return this._rotation=x||0,this._update(),this},S.prototype.getRotation=function(){return this._rotation},S.prototype.setRotationAlignment=function(x){return this._rotationAlignment=x||"auto",this._update(),this},S.prototype.getRotationAlignment=function(){return this._rotationAlignment},S.prototype.setPitchAlignment=function(x){return this._pitchAlignment=x&&x!=="auto"?x:this._rotationAlignment,this._update(),this},S.prototype.getPitchAlignment=function(){return this._pitchAlignment},S}(E.Evented),n0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ed=0,td=!1,r0=function(_){function S(x){_.call(this),this.options=E.extend({},n0,x),E.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){var O;return this._map=x,this._container=$.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),O=this._setupUI,Hf!==void 0?O(Hf):E.window.navigator.permissions!==void 0?E.window.navigator.permissions.query({name:"geolocation"}).then(function(k){O(Hf=k.state!=="denied")}):O(Hf=!!E.window.navigator.geolocation),this._container},S.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),$.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ed=0,td=!1},S.prototype._isOutOfMapMaxBounds=function(x){var O=this._map.getMaxBounds(),k=x.coords;return O&&(k.longitude<O.getWest()||k.longitude>O.getEast()||k.latitude<O.getSouth()||k.latitude>O.getNorth())},S.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},S.prototype._onSuccess=function(x){if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new E.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(x),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("geolocate",x)),this._finish()}},S.prototype._updateCamera=function(x){var O=new E.LngLat(x.coords.longitude,x.coords.latitude),k=x.coords.accuracy,Z=this._map.getBearing(),K=E.extend({bearing:Z},this.options.fitBoundsOptions);this._map.fitBounds(O.toBounds(k),K,{geolocateSource:!0})},S.prototype._updateMarker=function(x){if(x){var O=new E.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(O).addTo(this._map),this._userLocationDotMarker.setLngLat(O).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},S.prototype._updateCircleRadius=function(){var x=this._map._container.clientHeight/2,O=this._map.unproject([0,x]),k=this._map.unproject([1,x]),Z=O.distanceTo(k),K=Math.ceil(2*this._accuracy/Z);this._circleElement.style.width=K+"px",this._circleElement.style.height=K+"px"},S.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},S.prototype._onError=function(x){if(this._map){if(this.options.trackUserLocation)if(x.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var O=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=O,this._geolocateButton.setAttribute("aria-label",O),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(x.code===3&&td)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("error",x)),this._finish()}},S.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},S.prototype._setupUI=function(x){var O=this;if(this._container.addEventListener("contextmenu",function(K){return K.preventDefault()}),this._geolocateButton=$.create("button","mapboxgl-ctrl-geolocate",this._container),$.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",x===!1){E.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var k=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=k,this._geolocateButton.setAttribute("aria-label",k)}else{var Z=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=$.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new lp(this._dotElement),this._circleElement=$.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new lp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(K){K.geolocateSource||O._watchState!=="ACTIVE_LOCK"||K.originalEvent&&K.originalEvent.type==="resize"||(O._watchState="BACKGROUND",O._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),O._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),O.fire(new E.Event("trackuserlocationend")))})},S.prototype.trigger=function(){if(!this._setup)return E.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new E.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ed--,td=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new E.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new E.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var x;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ed>1?(x={maximumAge:6e5,timeout:0},td=!0):(x=this.options.positionOptions,td=!1),this._geolocationWatchID=E.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else E.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},S.prototype._clearWatch=function(){E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},S}(E.Evented),vf={maxWidth:100,unit:"metric"},Wf=function(_){this.options=E.extend({},vf,_),E.bindAll(["_onMove","setUnit"],this)};function i0(_,S,x){var O=x&&x.maxWidth||100,k=_._container.clientHeight/2,Z=_.unproject([0,k]),K=_.unproject([O,k]),ge=Z.distanceTo(K);if(x&&x.unit==="imperial"){var Ve=3.2808*ge;Ve>5280?nd(S,O,Ve/5280,_._getUIString("ScaleControl.Miles")):nd(S,O,Ve,_._getUIString("ScaleControl.Feet"))}else x&&x.unit==="nautical"?nd(S,O,ge/1852,_._getUIString("ScaleControl.NauticalMiles")):ge>=1e3?nd(S,O,ge/1e3,_._getUIString("ScaleControl.Kilometers")):nd(S,O,ge,_._getUIString("ScaleControl.Meters"))}function nd(_,S,x,O){var k,Z,K,ge=(k=x,(Z=Math.pow(10,(""+Math.floor(k)).length-1))*(K=(K=k/Z)>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:function(Ve){var ct=Math.pow(10,Math.ceil(-Math.log(Ve)/Math.LN10));return Math.round(Ve*ct)/ct}(K)));_.style.width=S*(ge/x)+"px",_.innerHTML=ge+"&nbsp;"+O}Wf.prototype.getDefaultPosition=function(){return"bottom-left"},Wf.prototype._onMove=function(){i0(this._map,this._container,this.options)},Wf.prototype.onAdd=function(_){return this._map=_,this._container=$.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Wf.prototype.onRemove=function(){$.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Wf.prototype.setUnit=function(_){this.options.unit=_,i0(this._map,this._container,this.options)};var Rf=function(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof E.window.HTMLElement?this._container=_.container:E.warnOnce("Full screen control 'container' must be a DOM element.")),E.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in E.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in E.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in E.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in E.window.document&&(this._fullscreenchange="MSFullscreenChange")};Rf.prototype.onAdd=function(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=$.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",E.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Rf.prototype.onRemove=function(){$.remove(this._controlContainer),this._map=null,E.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Rf.prototype._checkFullscreenSupport=function(){return!!(E.window.document.fullscreenEnabled||E.window.document.mozFullScreenEnabled||E.window.document.msFullscreenEnabled||E.window.document.webkitFullscreenEnabled)},Rf.prototype._setupUI=function(){var _=this._fullscreenButton=$.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);$.create("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden",!0),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),E.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Rf.prototype._updateTitle=function(){var _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_},Rf.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Rf.prototype._isFullscreen=function(){return this._fullscreen},Rf.prototype._changeIcon=function(){(E.window.document.fullscreenElement||E.window.document.mozFullScreenElement||E.window.document.webkitFullscreenElement||E.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Rf.prototype._onClickFullscreen=function(){this._isFullscreen()?E.window.document.exitFullscreen?E.window.document.exitFullscreen():E.window.document.mozCancelFullScreen?E.window.document.mozCancelFullScreen():E.window.document.msExitFullscreen?E.window.document.msExitFullscreen():E.window.document.webkitCancelFullScreen&&E.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var z0={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Gf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),mf=function(_){function S(x){_.call(this),this.options=E.extend(Object.create(z0),x),E.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new E.Event("open")),this},S.prototype.isOpen=function(){return!!this._map},S.prototype.remove=function(){return this._content&&$.remove(this._content),this._container&&($.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new E.Event("close")),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},S.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},S.prototype.getElement=function(){return this._container},S.prototype.setText=function(x){return this.setDOMContent(E.window.document.createTextNode(x))},S.prototype.setHTML=function(x){var O,k=E.window.document.createDocumentFragment(),Z=E.window.document.createElement("body");for(Z.innerHTML=x;O=Z.firstChild;)k.appendChild(O);return this.setDOMContent(k)},S.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},S.prototype.setMaxWidth=function(x){return this.options.maxWidth=x,this._update(),this},S.prototype.setDOMContent=function(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=$.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this},S.prototype.addClassName=function(x){this._container&&this._container.classList.add(x)},S.prototype.removeClassName=function(x){this._container&&this._container.classList.remove(x)},S.prototype.setOffset=function(x){return this.options.offset=x,this._update(),this},S.prototype.toggleClassName=function(x){if(this._container)return this._container.classList.toggle(x)},S.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=$.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},S.prototype._onMouseUp=function(x){this._update(x.point)},S.prototype._onMouseMove=function(x){this._update(x.point)},S.prototype._onDrag=function(x){this._update(x.point)},S.prototype._update=function(x){var O=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=$.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=$.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Vt){return O._container.classList.add(Vt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ih(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||x)){var k=this._pos=this._trackPointer&&x?x:this._map.project(this._lngLat),Z=this.options.anchor,K=function Vt(Xt){if(Xt){if(typeof Xt=="number"){var En=Math.round(Math.sqrt(.5*Math.pow(Xt,2)));return{center:new E.Point(0,0),top:new E.Point(0,Xt),"top-left":new E.Point(En,En),"top-right":new E.Point(-En,En),bottom:new E.Point(0,-Xt),"bottom-left":new E.Point(En,-En),"bottom-right":new E.Point(-En,-En),left:new E.Point(Xt,0),right:new E.Point(-Xt,0)}}if(Xt instanceof E.Point||Array.isArray(Xt)){var gn=E.Point.convert(Xt);return{center:gn,top:gn,"top-left":gn,"top-right":gn,bottom:gn,"bottom-left":gn,"bottom-right":gn,left:gn,right:gn}}return{center:E.Point.convert(Xt.center||[0,0]),top:E.Point.convert(Xt.top||[0,0]),"top-left":E.Point.convert(Xt["top-left"]||[0,0]),"top-right":E.Point.convert(Xt["top-right"]||[0,0]),bottom:E.Point.convert(Xt.bottom||[0,0]),"bottom-left":E.Point.convert(Xt["bottom-left"]||[0,0]),"bottom-right":E.Point.convert(Xt["bottom-right"]||[0,0]),left:E.Point.convert(Xt.left||[0,0]),right:E.Point.convert(Xt.right||[0,0])}}return Vt(new E.Point(0,0))}(this.options.offset);if(!Z){var ge,Ve=this._container.offsetWidth,ct=this._container.offsetHeight;ge=k.y+K.bottom.y<ct?["top"]:k.y>this._map.transform.height-ct?["bottom"]:[],k.x<Ve/2?ge.push("left"):k.x>this._map.transform.width-Ve/2&&ge.push("right"),Z=ge.length===0?"bottom":ge.join("-")}var jt=k.add(K[Z]).round();$.setTransform(this._container,yc[Z]+" translate("+jt.x+"px,"+jt.y+"px)"),t0(this._container,Z,"popup")}},S.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var x=this._container.querySelector(Gf);x&&x.focus()}},S.prototype._onClose=function(){this.remove()},S}(E.Evented),o0={version:E.version,supported:fe,setRTLTextPlugin:E.setRTLTextPlugin,getRTLTextPluginStatus:E.getRTLTextPluginStatus,Map:k0,NavigationControl:Ch,GeolocateControl:r0,AttributionControl:ju,ScaleControl:Wf,FullscreenControl:Rf,Popup:mf,Marker:lp,Style:Ou,LngLat:E.LngLat,LngLatBounds:E.LngLatBounds,Point:E.Point,MercatorCoordinate:E.MercatorCoordinate,Evented:E.Evented,config:E.config,prewarm:function(){wr().acquire(yr)},clearPrewarmedResources:function(){var _=Ei;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(yr),Ei=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return E.config.ACCESS_TOKEN},set accessToken(_){E.config.ACCESS_TOKEN=_},get baseApiUrl(){return E.config.API_URL},set baseApiUrl(_){E.config.API_URL=_},get workerCount(){return Wr.workerCount},set workerCount(_){Wr.workerCount=_},get maxParallelImageRequests(){return E.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){E.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage:function(_){E.clearTileCache(_)},workerUrl:""};return o0}),q})},92077:function(_t,W,D){var q,G;(function(E,fe){q=fe,G=typeof q=="function"?q.call(W,D,W,_t):q,G!==void 0&&(_t.exports=G)})(this,function(){var E,fe,$="2.0.6",se={},ce={},ye={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},ae={currentLocale:ye.currentLocale,zeroFormat:ye.zeroFormat,nullFormat:ye.nullFormat,defaultFormat:ye.defaultFormat,scalePercentBy100:ye.scalePercentBy100};function He(J,me){this._input=J,this._value=me}return E=function(J){var me,Oe,Q,le;if(E.isNumeral(J))me=J.value();else if(J===0||typeof J=="undefined")me=0;else if(J===null||fe.isNaN(J))me=null;else if(typeof J=="string")if(ae.zeroFormat&&J===ae.zeroFormat)me=0;else if(ae.nullFormat&&J===ae.nullFormat||!J.replace(/[^0-9]+/g,"").length)me=null;else{for(Oe in se)if(le=typeof se[Oe].regexps.unformat=="function"?se[Oe].regexps.unformat():se[Oe].regexps.unformat,le&&J.match(le)){Q=se[Oe].unformat;break}Q=Q||E._.stringToNumber,me=Q(J)}else me=Number(J)||null;return new He(J,me)},E.version=$,E.isNumeral=function(J){return J instanceof He},E._=fe={numberToFormat:function(J,me,Oe){var Q=ce[E.options.currentLocale],le=!1,ee=!1,be=0,et="",tt=1e12,wt=1e9,gt=1e6,ft=1e3,Pe="",Ae=!1,Be,Ze,ut,tn,De,mt,Re,nt,qe,Ge;if(J=J||0,Ze=Math.abs(J),E._.includes(me,"(")?(le=!0,me=me.replace(/[\(|\)]/g,"")):(E._.includes(me,"+")||E._.includes(me,"-"))&&(nt=E._.includes(me,"+")?me.indexOf("+"):J<0?me.indexOf("-"):-1,me=me.replace(/[\+|\-]/g,"")),E._.includes(me,"a")&&(Be=me.match(/a(k|m|b|t)?/),Be=Be?Be[1]:!1,E._.includes(me," a")&&(et=" "),me=me.replace(new RegExp(et+"a[kmbt]?"),""),Ze>=tt&&!Be||Be==="t"?(et+=Q.abbreviations.trillion,J=J/tt):Ze<tt&&Ze>=wt&&!Be||Be==="b"?(et+=Q.abbreviations.billion,J=J/wt):Ze<wt&&Ze>=gt&&!Be||Be==="m"?(et+=Q.abbreviations.million,J=J/gt):(Ze<gt&&Ze>=ft&&!Be||Be==="k")&&(et+=Q.abbreviations.thousand,J=J/ft)),E._.includes(me,"[.]")&&(ee=!0,me=me.replace("[.]",".")),mt=J.toString().split(".")[0],Re=me.split(".")[1],qe=me.indexOf(","),be=(me.split(".")[0].split(",")[0].match(/0/g)||[]).length,Re?(E._.includes(Re,"[")?(Re=Re.replace("]",""),Re=Re.split("["),Pe=E._.toFixed(J,Re[0].length+Re[1].length,Oe,Re[1].length)):Pe=E._.toFixed(J,Re.length,Oe),mt=Pe.split(".")[0],E._.includes(Pe,".")?Pe=Q.delimiters.decimal+Pe.split(".")[1]:Pe="",ee&&Number(Pe.slice(1))===0&&(Pe="")):mt=E._.toFixed(J,0,Oe),et&&!Be&&Number(mt)>=1e3&&et!==Q.abbreviations.trillion)switch(mt=String(Number(mt)/1e3),et){case Q.abbreviations.thousand:et=Q.abbreviations.million;break;case Q.abbreviations.million:et=Q.abbreviations.billion;break;case Q.abbreviations.billion:et=Q.abbreviations.trillion;break}if(E._.includes(mt,"-")&&(mt=mt.slice(1),Ae=!0),mt.length<be)for(var Dt=be-mt.length;Dt>0;Dt--)mt="0"+mt;return qe>-1&&(mt=mt.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+Q.delimiters.thousands)),me.indexOf(".")===0&&(mt=""),Ge=mt+Pe+(et||""),le?Ge=(le&&Ae?"(":"")+Ge+(le&&Ae?")":""):nt>=0?Ge=nt===0?(Ae?"-":"+")+Ge:Ge+(Ae?"-":"+"):Ae&&(Ge="-"+Ge),Ge},stringToNumber:function(J){var me=ce[ae.currentLocale],Oe=J,Q={thousand:3,million:6,billion:9,trillion:12},le,ee,be,et;if(ae.zeroFormat&&J===ae.zeroFormat)ee=0;else if(ae.nullFormat&&J===ae.nullFormat||!J.replace(/[^0-9]+/g,"").length)ee=null;else{ee=1,me.delimiters.decimal!=="."&&(J=J.replace(/\./g,"").replace(me.delimiters.decimal,"."));for(le in Q)if(et=new RegExp("[^a-zA-Z]"+me.abbreviations[le]+"(?:\\)|(\\"+me.currency.symbol+")?(?:\\))?)?$"),Oe.match(et)){ee*=Math.pow(10,Q[le]);break}ee*=(J.split("-").length+Math.min(J.split("(").length-1,J.split(")").length-1))%2?1:-1,J=J.replace(/[^0-9\.]+/g,""),ee*=Number(J)}return ee},isNaN:function(J){return typeof J=="number"&&isNaN(J)},includes:function(J,me){return J.indexOf(me)!==-1},insert:function(J,me,Oe){return J.slice(0,Oe)+me+J.slice(Oe)},reduce:function(J,me){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof me!="function")throw new TypeError(me+" is not a function");var Oe=Object(J),Q=Oe.length>>>0,le=0,ee;if(arguments.length===3)ee=arguments[2];else{for(;le<Q&&!(le in Oe);)le++;if(le>=Q)throw new TypeError("Reduce of empty array with no initial value");ee=Oe[le++]}for(;le<Q;le++)le in Oe&&(ee=me(ee,Oe[le],le,Oe));return ee},multiplier:function(J){var me=J.toString().split(".");return me.length<2?1:Math.pow(10,me[1].length)},correctionFactor:function(){var J=Array.prototype.slice.call(arguments);return J.reduce(function(me,Oe){var Q=fe.multiplier(Oe);return me>Q?me:Q},1)},toFixed:function(J,me,Oe,Q){var le=J.toString().split("."),ee=me-(Q||0),be,et,tt,wt;return le.length===2?be=Math.min(Math.max(le[1].length,ee),me):be=ee,tt=Math.pow(10,be),wt=(Oe(J+"e+"+be)/tt).toFixed(be),Q>me-be&&(et=new RegExp("\\.?0{1,"+(Q-(me-be))+"}$"),wt=wt.replace(et,"")),wt}},E.options=ae,E.formats=se,E.locales=ce,E.locale=function(J){return J&&(ae.currentLocale=J.toLowerCase()),ae.currentLocale},E.localeData=function(J){if(!J)return ce[ae.currentLocale];if(J=J.toLowerCase(),!ce[J])throw new Error("Unknown locale : "+J);return ce[J]},E.reset=function(){for(var J in ye)ae[J]=ye[J]},E.zeroFormat=function(J){ae.zeroFormat=typeof J=="string"?J:null},E.nullFormat=function(J){ae.nullFormat=typeof J=="string"?J:null},E.defaultFormat=function(J){ae.defaultFormat=typeof J=="string"?J:"0.0"},E.register=function(J,me,Oe){if(me=me.toLowerCase(),this[J+"s"][me])throw new TypeError(me+" "+J+" already registered.");return this[J+"s"][me]=Oe,Oe},E.validate=function(J,me){var Oe,Q,le,ee,be,et,tt,wt;if(typeof J!="string"&&(J+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",J)),J=J.trim(),J.match(/^\d+$/))return!0;if(J==="")return!1;try{tt=E.localeData(me)}catch(gt){tt=E.localeData(E.locale())}return le=tt.currency.symbol,be=tt.abbreviations,Oe=tt.delimiters.decimal,tt.delimiters.thousands==="."?Q="\\.":Q=tt.delimiters.thousands,wt=J.match(/^[^\d]+/),wt!==null&&(J=J.substr(1),wt[0]!==le)||(wt=J.match(/[^\d]+$/),wt!==null&&(J=J.slice(0,-1),wt[0]!==be.thousand&&wt[0]!==be.million&&wt[0]!==be.billion&&wt[0]!==be.trillion))?!1:(et=new RegExp(Q+"{2}"),J.match(/[^\d.,]/g)?!1:(ee=J.split(Oe),ee.length>2?!1:ee.length<2?!!ee[0].match(/^\d+.*\d$/)&&!ee[0].match(et):ee[0].length===1?!!ee[0].match(/^\d+$/)&&!ee[0].match(et)&&!!ee[1].match(/^\d+$/):!!ee[0].match(/^\d+.*\d$/)&&!ee[0].match(et)&&!!ee[1].match(/^\d+$/)))},E.fn=He.prototype={clone:function(){return E(this)},format:function(J,me){var Oe=this._value,Q=J||ae.defaultFormat,le,ee,be;if(me=me||Math.round,Oe===0&&ae.zeroFormat!==null)ee=ae.zeroFormat;else if(Oe===null&&ae.nullFormat!==null)ee=ae.nullFormat;else{for(le in se)if(Q.match(se[le].regexps.format)){be=se[le].format;break}be=be||E._.numberToFormat,ee=be(Oe,Q,me)}return ee},value:function(){return this._value},input:function(){return this._input},set:function(J){return this._value=Number(J),this},add:function(J){var me=fe.correctionFactor.call(null,this._value,J);function Oe(Q,le,ee,be){return Q+Math.round(me*le)}return this._value=fe.reduce([this._value,J],Oe,0)/me,this},subtract:function(J){var me=fe.correctionFactor.call(null,this._value,J);function Oe(Q,le,ee,be){return Q-Math.round(me*le)}return this._value=fe.reduce([J],Oe,Math.round(this._value*me))/me,this},multiply:function(J){function me(Oe,Q,le,ee){var be=fe.correctionFactor(Oe,Q);return Math.round(Oe*be)*Math.round(Q*be)/Math.round(be*be)}return this._value=fe.reduce([this._value,J],me,1),this},divide:function(J){function me(Oe,Q,le,ee){var be=fe.correctionFactor(Oe,Q);return Math.round(Oe*be)/Math.round(Q*be)}return this._value=fe.reduce([this._value,J],me),this},difference:function(J){return Math.abs(E(this._value).subtract(J).value())}},E.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(J){var me=J%10;return~~(J%100/10)===1?"th":me===1?"st":me===2?"nd":me===3?"rd":"th"},currency:{symbol:"$"}}),function(){E.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(J,me,Oe){var Q=E._.includes(me," BPS")?" ":"",le;return J=J*1e4,me=me.replace(/\s?BPS/,""),le=E._.numberToFormat(J,me,Oe),E._.includes(le,")")?(le=le.split(""),le.splice(-1,0,Q+"BPS"),le=le.join("")):le=le+Q+"BPS",le},unformat:function(J){return+(E._.stringToNumber(J)*1e-4).toFixed(15)}})}(),function(){var J={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},me={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},Oe=J.suffixes.concat(me.suffixes.filter(function(le){return J.suffixes.indexOf(le)<0})),Q=Oe.join("|");Q="("+Q.replace("B","B(?!PS)")+")",E.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(Q)},format:function(le,ee,be){var et,tt=E._.includes(ee,"ib")?me:J,wt=E._.includes(ee," b")||E._.includes(ee," ib")?" ":"",gt,ft,Pe;for(ee=ee.replace(/\s?i?b/,""),gt=0;gt<=tt.suffixes.length;gt++)if(ft=Math.pow(tt.base,gt),Pe=Math.pow(tt.base,gt+1),le===null||le===0||le>=ft&&le<Pe){wt+=tt.suffixes[gt],ft>0&&(le=le/ft);break}return et=E._.numberToFormat(le,ee,be),et+wt},unformat:function(le){var ee=E._.stringToNumber(le),be,et;if(ee){for(be=J.suffixes.length-1;be>=0;be--){if(E._.includes(le,J.suffixes[be])){et=Math.pow(J.base,be);break}if(E._.includes(le,me.suffixes[be])){et=Math.pow(me.base,be);break}}ee*=et||1}return ee}})}(),function(){E.register("format","currency",{regexps:{format:/(\$)/},format:function(J,me,Oe){var Q=E.locales[E.options.currentLocale],le={before:me.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:me.match(/([\+|\-|\)|\s|\$]*)$/)[0]},ee,be,et;for(me=me.replace(/\s?\$\s?/,""),ee=E._.numberToFormat(J,me,Oe),J>=0?(le.before=le.before.replace(/[\-\(]/,""),le.after=le.after.replace(/[\-\)]/,"")):J<0&&!E._.includes(le.before,"-")&&!E._.includes(le.before,"(")&&(le.before="-"+le.before),et=0;et<le.before.length;et++)switch(be=le.before[et],be){case"$":ee=E._.insert(ee,Q.currency.symbol,et);break;case" ":ee=E._.insert(ee," ",et+Q.currency.symbol.length-1);break}for(et=le.after.length-1;et>=0;et--)switch(be=le.after[et],be){case"$":ee=et===le.after.length-1?ee+Q.currency.symbol:E._.insert(ee,Q.currency.symbol,-(le.after.length-(1+et)));break;case" ":ee=et===le.after.length-1?ee+" ":E._.insert(ee," ",-(le.after.length-(1+et)+Q.currency.symbol.length-1));break}return ee}})}(),function(){E.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(J,me,Oe){var Q,le=typeof J=="number"&&!E._.isNaN(J)?J.toExponential():"0e+0",ee=le.split("e");return me=me.replace(/e[\+|\-]{1}0/,""),Q=E._.numberToFormat(Number(ee[0]),me,Oe),Q+"e"+ee[1]},unformat:function(J){var me=E._.includes(J,"e+")?J.split("e+"):J.split("e-"),Oe=Number(me[0]),Q=Number(me[1]);Q=E._.includes(J,"e-")?Q*=-1:Q;function le(ee,be,et,tt){var wt=E._.correctionFactor(ee,be),gt=ee*wt*(be*wt)/(wt*wt);return gt}return E._.reduce([Oe,Math.pow(10,Q)],le,1)}})}(),function(){E.register("format","ordinal",{regexps:{format:/(o)/},format:function(J,me,Oe){var Q=E.locales[E.options.currentLocale],le,ee=E._.includes(me," o")?" ":"";return me=me.replace(/\s?o/,""),ee+=Q.ordinal(J),le=E._.numberToFormat(J,me,Oe),le+ee}})}(),function(){E.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(J,me,Oe){var Q=E._.includes(me," %")?" ":"",le;return E.options.scalePercentBy100&&(J=J*100),me=me.replace(/\s?\%/,""),le=E._.numberToFormat(J,me,Oe),E._.includes(le,")")?(le=le.split(""),le.splice(-1,0,Q+"%"),le=le.join("")):le=le+Q+"%",le},unformat:function(J){var me=E._.stringToNumber(J);return E.options.scalePercentBy100?me*.01:me}})}(),function(){E.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(J,me,Oe){var Q=Math.floor(J/60/60),le=Math.floor((J-Q*60*60)/60),ee=Math.round(J-Q*60*60-le*60);return Q+":"+(le<10?"0"+le:le)+":"+(ee<10?"0"+ee:ee)},unformat:function(J){var me=J.split(":"),Oe=0;return me.length===3?(Oe=Oe+Number(me[0])*60*60,Oe=Oe+Number(me[1])*60,Oe=Oe+Number(me[2])):me.length===2&&(Oe=Oe+Number(me[0])*60,Oe=Oe+Number(me[1])),Number(Oe)}})}(),E})},3614:function(_t,W,D){"use strict";_t.exports=G;var q=D(80645);function G(De){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(De)?De:new Uint8Array(De||0),this.pos=0,this.type=0,this.length=this.buf.length}G.Varint=0,G.Fixed64=1,G.Bytes=2,G.Fixed32=5;var E=65536*65536,fe=1/E,$=12,se=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");G.prototype={destroy:function(){this.buf=null},readFields:function(De,mt,Re){for(Re=Re||this.length;this.pos<Re;){var nt=this.readVarint(),qe=nt>>3,Ge=this.pos;this.type=nt&7,De(qe,mt,this),this.pos===Ge&&this.skip(nt)}return mt},readMessage:function(De,mt){return this.readFields(De,mt,this.readVarint()+this.pos)},readFixed32:function(){var De=Pe(this.buf,this.pos);return this.pos+=4,De},readSFixed32:function(){var De=Be(this.buf,this.pos);return this.pos+=4,De},readFixed64:function(){var De=Pe(this.buf,this.pos)+Pe(this.buf,this.pos+4)*E;return this.pos+=8,De},readSFixed64:function(){var De=Pe(this.buf,this.pos)+Be(this.buf,this.pos+4)*E;return this.pos+=8,De},readFloat:function(){var De=q.read(this.buf,this.pos,!0,23,4);return this.pos+=4,De},readDouble:function(){var De=q.read(this.buf,this.pos,!0,52,8);return this.pos+=8,De},readVarint:function(De){var mt=this.buf,Re,nt;return nt=mt[this.pos++],Re=nt&127,nt<128||(nt=mt[this.pos++],Re|=(nt&127)<<7,nt<128)||(nt=mt[this.pos++],Re|=(nt&127)<<14,nt<128)||(nt=mt[this.pos++],Re|=(nt&127)<<21,nt<128)?Re:(nt=mt[this.pos],Re|=(nt&15)<<28,ce(Re,De,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var De=this.readVarint();return De%2===1?(De+1)/-2:De/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var De=this.readVarint()+this.pos,mt=this.pos;return this.pos=De,De-mt>=$&&se?ut(this.buf,mt,De):Ze(this.buf,mt,De)},readBytes:function(){var De=this.readVarint()+this.pos,mt=this.buf.subarray(this.pos,De);return this.pos=De,mt},readPackedVarint:function(De,mt){if(this.type!==G.Bytes)return De.push(this.readVarint(mt));var Re=ye(this);for(De=De||[];this.pos<Re;)De.push(this.readVarint(mt));return De},readPackedSVarint:function(De){if(this.type!==G.Bytes)return De.push(this.readSVarint());var mt=ye(this);for(De=De||[];this.pos<mt;)De.push(this.readSVarint());return De},readPackedBoolean:function(De){if(this.type!==G.Bytes)return De.push(this.readBoolean());var mt=ye(this);for(De=De||[];this.pos<mt;)De.push(this.readBoolean());return De},readPackedFloat:function(De){if(this.type!==G.Bytes)return De.push(this.readFloat());var mt=ye(this);for(De=De||[];this.pos<mt;)De.push(this.readFloat());return De},readPackedDouble:function(De){if(this.type!==G.Bytes)return De.push(this.readDouble());var mt=ye(this);for(De=De||[];this.pos<mt;)De.push(this.readDouble());return De},readPackedFixed32:function(De){if(this.type!==G.Bytes)return De.push(this.readFixed32());var mt=ye(this);for(De=De||[];this.pos<mt;)De.push(this.readFixed32());return De},readPackedSFixed32:function(De){if(this.type!==G.Bytes)return De.push(this.readSFixed32());var mt=ye(this);for(De=De||[];this.pos<mt;)De.push(this.readSFixed32());return De},readPackedFixed64:function(De){if(this.type!==G.Bytes)return De.push(this.readFixed64());var mt=ye(this);for(De=De||[];this.pos<mt;)De.push(this.readFixed64());return De},readPackedSFixed64:function(De){if(this.type!==G.Bytes)return De.push(this.readSFixed64());var mt=ye(this);for(De=De||[];this.pos<mt;)De.push(this.readSFixed64());return De},skip:function(De){var mt=De&7;if(mt===G.Varint)for(;this.buf[this.pos++]>127;);else if(mt===G.Bytes)this.pos=this.readVarint()+this.pos;else if(mt===G.Fixed32)this.pos+=4;else if(mt===G.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+mt)},writeTag:function(De,mt){this.writeVarint(De<<3|mt)},realloc:function(De){for(var mt=this.length||16;mt<this.pos+De;)mt*=2;if(mt!==this.length){var Re=new Uint8Array(mt);Re.set(this.buf),this.buf=Re,this.length=mt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(De){this.realloc(4),Ae(this.buf,De,this.pos),this.pos+=4},writeSFixed32:function(De){this.realloc(4),Ae(this.buf,De,this.pos),this.pos+=4},writeFixed64:function(De){this.realloc(8),Ae(this.buf,De&-1,this.pos),Ae(this.buf,Math.floor(De*fe),this.pos+4),this.pos+=8},writeSFixed64:function(De){this.realloc(8),Ae(this.buf,De&-1,this.pos),Ae(this.buf,Math.floor(De*fe),this.pos+4),this.pos+=8},writeVarint:function(De){if(De=+De||0,De>268435455||De<0){He(De,this);return}this.realloc(4),this.buf[this.pos++]=De&127|(De>127?128:0),!(De<=127)&&(this.buf[this.pos++]=(De>>>=7)&127|(De>127?128:0),!(De<=127)&&(this.buf[this.pos++]=(De>>>=7)&127|(De>127?128:0),!(De<=127)&&(this.buf[this.pos++]=De>>>7&127)))},writeSVarint:function(De){this.writeVarint(De<0?-De*2-1:De*2)},writeBoolean:function(De){this.writeVarint(!!De)},writeString:function(De){De=String(De),this.realloc(De.length*4),this.pos++;var mt=this.pos;this.pos=tn(this.buf,De,this.pos);var Re=this.pos-mt;Re>=128&&Oe(mt,Re,this),this.pos=mt-1,this.writeVarint(Re),this.pos+=Re},writeFloat:function(De){this.realloc(4),q.write(this.buf,De,this.pos,!0,23,4),this.pos+=4},writeDouble:function(De){this.realloc(8),q.write(this.buf,De,this.pos,!0,52,8),this.pos+=8},writeBytes:function(De){var mt=De.length;this.writeVarint(mt),this.realloc(mt);for(var Re=0;Re<mt;Re++)this.buf[this.pos++]=De[Re]},writeRawMessage:function(De,mt){this.pos++;var Re=this.pos;De(mt,this);var nt=this.pos-Re;nt>=128&&Oe(Re,nt,this),this.pos=Re-1,this.writeVarint(nt),this.pos+=nt},writeMessage:function(De,mt,Re){this.writeTag(De,G.Bytes),this.writeRawMessage(mt,Re)},writePackedVarint:function(De,mt){mt.length&&this.writeMessage(De,Q,mt)},writePackedSVarint:function(De,mt){mt.length&&this.writeMessage(De,le,mt)},writePackedBoolean:function(De,mt){mt.length&&this.writeMessage(De,et,mt)},writePackedFloat:function(De,mt){mt.length&&this.writeMessage(De,ee,mt)},writePackedDouble:function(De,mt){mt.length&&this.writeMessage(De,be,mt)},writePackedFixed32:function(De,mt){mt.length&&this.writeMessage(De,tt,mt)},writePackedSFixed32:function(De,mt){mt.length&&this.writeMessage(De,wt,mt)},writePackedFixed64:function(De,mt){mt.length&&this.writeMessage(De,gt,mt)},writePackedSFixed64:function(De,mt){mt.length&&this.writeMessage(De,ft,mt)},writeBytesField:function(De,mt){this.writeTag(De,G.Bytes),this.writeBytes(mt)},writeFixed32Field:function(De,mt){this.writeTag(De,G.Fixed32),this.writeFixed32(mt)},writeSFixed32Field:function(De,mt){this.writeTag(De,G.Fixed32),this.writeSFixed32(mt)},writeFixed64Field:function(De,mt){this.writeTag(De,G.Fixed64),this.writeFixed64(mt)},writeSFixed64Field:function(De,mt){this.writeTag(De,G.Fixed64),this.writeSFixed64(mt)},writeVarintField:function(De,mt){this.writeTag(De,G.Varint),this.writeVarint(mt)},writeSVarintField:function(De,mt){this.writeTag(De,G.Varint),this.writeSVarint(mt)},writeStringField:function(De,mt){this.writeTag(De,G.Bytes),this.writeString(mt)},writeFloatField:function(De,mt){this.writeTag(De,G.Fixed32),this.writeFloat(mt)},writeDoubleField:function(De,mt){this.writeTag(De,G.Fixed64),this.writeDouble(mt)},writeBooleanField:function(De,mt){this.writeVarintField(De,!!mt)}};function ce(De,mt,Re){var nt=Re.buf,qe,Ge;if(Ge=nt[Re.pos++],qe=(Ge&112)>>4,Ge<128||(Ge=nt[Re.pos++],qe|=(Ge&127)<<3,Ge<128)||(Ge=nt[Re.pos++],qe|=(Ge&127)<<10,Ge<128)||(Ge=nt[Re.pos++],qe|=(Ge&127)<<17,Ge<128)||(Ge=nt[Re.pos++],qe|=(Ge&127)<<24,Ge<128)||(Ge=nt[Re.pos++],qe|=(Ge&1)<<31,Ge<128))return ae(De,qe,mt);throw new Error("Expected varint not more than 10 bytes")}function ye(De){return De.type===G.Bytes?De.readVarint()+De.pos:De.pos+1}function ae(De,mt,Re){return Re?mt*4294967296+(De>>>0):(mt>>>0)*4294967296+(De>>>0)}function He(De,mt){var Re,nt;if(De>=0?(Re=De%4294967296|0,nt=De/4294967296|0):(Re=~(-De%4294967296),nt=~(-De/4294967296),Re^4294967295?Re=Re+1|0:(Re=0,nt=nt+1|0)),De>=18446744073709552e3||De<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");mt.realloc(10),J(Re,nt,mt),me(nt,mt)}function J(De,mt,Re){Re.buf[Re.pos++]=De&127|128,De>>>=7,Re.buf[Re.pos++]=De&127|128,De>>>=7,Re.buf[Re.pos++]=De&127|128,De>>>=7,Re.buf[Re.pos++]=De&127|128,De>>>=7,Re.buf[Re.pos]=De&127}function me(De,mt){var Re=(De&7)<<4;mt.buf[mt.pos++]|=Re|((De>>>=3)?128:0),De&&(mt.buf[mt.pos++]=De&127|((De>>>=7)?128:0),De&&(mt.buf[mt.pos++]=De&127|((De>>>=7)?128:0),De&&(mt.buf[mt.pos++]=De&127|((De>>>=7)?128:0),De&&(mt.buf[mt.pos++]=De&127|((De>>>=7)?128:0),De&&(mt.buf[mt.pos++]=De&127)))))}function Oe(De,mt,Re){var nt=mt<=16383?1:mt<=2097151?2:mt<=268435455?3:Math.floor(Math.log(mt)/(Math.LN2*7));Re.realloc(nt);for(var qe=Re.pos-1;qe>=De;qe--)Re.buf[qe+nt]=Re.buf[qe]}function Q(De,mt){for(var Re=0;Re<De.length;Re++)mt.writeVarint(De[Re])}function le(De,mt){for(var Re=0;Re<De.length;Re++)mt.writeSVarint(De[Re])}function ee(De,mt){for(var Re=0;Re<De.length;Re++)mt.writeFloat(De[Re])}function be(De,mt){for(var Re=0;Re<De.length;Re++)mt.writeDouble(De[Re])}function et(De,mt){for(var Re=0;Re<De.length;Re++)mt.writeBoolean(De[Re])}function tt(De,mt){for(var Re=0;Re<De.length;Re++)mt.writeFixed32(De[Re])}function wt(De,mt){for(var Re=0;Re<De.length;Re++)mt.writeSFixed32(De[Re])}function gt(De,mt){for(var Re=0;Re<De.length;Re++)mt.writeFixed64(De[Re])}function ft(De,mt){for(var Re=0;Re<De.length;Re++)mt.writeSFixed64(De[Re])}function Pe(De,mt){return(De[mt]|De[mt+1]<<8|De[mt+2]<<16)+De[mt+3]*16777216}function Ae(De,mt,Re){De[Re]=mt,De[Re+1]=mt>>>8,De[Re+2]=mt>>>16,De[Re+3]=mt>>>24}function Be(De,mt){return(De[mt]|De[mt+1]<<8|De[mt+2]<<16)+(De[mt+3]<<24)}function Ze(De,mt,Re){for(var nt="",qe=mt;qe<Re;){var Ge=De[qe],Dt=null,yt=Ge>239?4:Ge>223?3:Ge>191?2:1;if(qe+yt>Re)break;var Le,Zt,yn;yt===1?Ge<128&&(Dt=Ge):yt===2?(Le=De[qe+1],(Le&192)===128&&(Dt=(Ge&31)<<6|Le&63,Dt<=127&&(Dt=null))):yt===3?(Le=De[qe+1],Zt=De[qe+2],(Le&192)===128&&(Zt&192)===128&&(Dt=(Ge&15)<<12|(Le&63)<<6|Zt&63,(Dt<=2047||Dt>=55296&&Dt<=57343)&&(Dt=null))):yt===4&&(Le=De[qe+1],Zt=De[qe+2],yn=De[qe+3],(Le&192)===128&&(Zt&192)===128&&(yn&192)===128&&(Dt=(Ge&15)<<18|(Le&63)<<12|(Zt&63)<<6|yn&63,(Dt<=65535||Dt>=1114112)&&(Dt=null))),Dt===null?(Dt=65533,yt=1):Dt>65535&&(Dt-=65536,nt+=String.fromCharCode(Dt>>>10&1023|55296),Dt=56320|Dt&1023),nt+=String.fromCharCode(Dt),qe+=yt}return nt}function ut(De,mt,Re){return se.decode(De.subarray(mt,Re))}function tn(De,mt,Re){for(var nt=0,qe,Ge;nt<mt.length;nt++){if(qe=mt.charCodeAt(nt),qe>55295&&qe<57344)if(Ge)if(qe<56320){De[Re++]=239,De[Re++]=191,De[Re++]=189,Ge=qe;continue}else qe=Ge-55296<<10|qe-56320|65536,Ge=null;else{qe>56319||nt+1===mt.length?(De[Re++]=239,De[Re++]=191,De[Re++]=189):Ge=qe;continue}else Ge&&(De[Re++]=239,De[Re++]=191,De[Re++]=189,Ge=null);qe<128?De[Re++]=qe:(qe<2048?De[Re++]=qe>>6|192:(qe<65536?De[Re++]=qe>>12|224:(De[Re++]=qe>>18|240,De[Re++]=qe>>12&63|128),De[Re++]=qe>>6&63|128),De[Re++]=qe&63|128)}return Re}},73807:function(_t){"use strict";var W=_t.exports;_t.exports.isNumber=function(D){return typeof D=="number"},_t.exports.findMin=function(D){if(D.length===0)return 1/0;for(var q=D[0],G=1;G<D.length;G++)q=Math.min(q,D[G]);return q},_t.exports.findMax=function(D){if(D.length===0)return-1/0;for(var q=D[0],G=1;G<D.length;G++)q=Math.max(q,D[G]);return q},_t.exports.findMinMulti=function(D){for(var q=W.findMin(D[0]),G=1;G<D.length;G++)q=Math.min(q,W.findMin(D[G]));return q},_t.exports.findMaxMulti=function(D){for(var q=W.findMax(D[0]),G=1;G<D.length;G++)q=Math.max(q,W.findMax(D[G]));return q},_t.exports.inside=function(D,q,G){return D<=G&&G<=q}},53843:function(_t,W,D){"use strict";var q=50,G=2,E=Math.log(2),fe=_t.exports,$=D(73807);function se(ye){return 1-Math.abs(ye)}_t.exports.getUnifiedMinMax=function(ye,ae){return fe.getUnifiedMinMaxMulti([ye],ae)},_t.exports.getUnifiedMinMaxMulti=function(ye,ae){ae=ae||{};var He=!1,J=!1,me=$.isNumber(ae.width)?ae.width:G,Oe=$.isNumber(ae.size)?ae.size:q,Q=$.isNumber(ae.min)?ae.min:(He=!0,$.findMinMulti(ye)),le=$.isNumber(ae.max)?ae.max:(J=!0,$.findMaxMulti(ye)),ee=le-Q,be=ee/(Oe-1);return He&&(Q=Q-2*me*be),J&&(le=le+2*me*be),{min:Q,max:le}},_t.exports.create=function(ye,ae){if(ae=ae||{},!ye||ye.length===0)return[];var He=$.isNumber(ae.size)?ae.size:q,J=$.isNumber(ae.width)?ae.width:G,me=fe.getUnifiedMinMax(ye,{size:He,width:J,min:ae.min,max:ae.max}),Oe=me.min,Q=me.max,le=Q-Oe,ee=le/(He-1);if(le===0)return[{x:Oe,y:1}];for(var be=[],et=0;et<He;et++)be.push({x:Oe+et*ee,y:0});var tt=function(ut){return Math.floor((ut-Oe)/ee)},wt=ce(se,J),gt=wt[J],ft=wt[J-1]-wt[J-2],Pe=0;ye.forEach(function(ut){var tn=tt(ut);if(!(tn+J<0||tn-J>=be.length)){var De=Math.max(tn-J,0),mt=tn,Re=Math.min(tn+J,be.length-1),nt=De-(tn-J),qe=tn+J-Re,Ge=wt[-J-1+nt]||0,Dt=wt[-J-1+qe]||0,yt=gt/(gt-Ge-Dt);nt>0&&(Pe+=yt*(nt-1)*ft);var Le=Math.max(0,tn-J+1);$.inside(0,be.length-1,Le)&&(be[Le].y+=yt*1*ft),$.inside(0,be.length-1,mt+1)&&(be[mt+1].y-=yt*2*ft),$.inside(0,be.length-1,Re+1)&&(be[Re+1].y+=yt*1*ft)}});var Ae=Pe,Be=0,Ze=0;return be.forEach(function(ut){Be+=ut.y,Ae+=Be,ut.y=Ae,Ze+=Ae}),Ze>0&&be.forEach(function(ut){ut.y/=Ze}),be};function ce(ye,ae){for(var He={},J=0,me=-ae;me<=ae;me++)J+=ye(me/ae),He[me]=J;return He}_t.exports.getExpectedValueFromPdf=function(ye){if(!(!ye||ye.length===0)){var ae=0;return ye.forEach(function(He){ae+=He.x*He.y}),ae}},_t.exports.getXWithLeftTailArea=function(ye,ae){if(!(!ye||ye.length===0)){for(var He=0,J=0,me=0;me<ye.length&&(J=me,He+=ye[me].y,!(He>=ae));me++);return ye[J].x}},_t.exports.getPerplexity=function(ye){if(!(!ye||ye.length===0)){var ae=0;return ye.forEach(function(He){var J=Math.log(He.y);isFinite(J)&&(ae+=He.y*J)}),ae=-ae/E,Math.pow(2,ae)}}},32676:function(_t,W,D){var q=D(34155);(function(G,E){_t.exports=E()})(this,function(){"use strict";function G(pt,xe){var Fe={label:0,sent:function(){if(Mt[0]&1)throw Mt[1];return Mt[1]},trys:[],ops:[]},st,It,Mt,wn;return wn={next:rr(0),throw:rr(1),return:rr(2)},typeof Symbol=="function"&&(wn[Symbol.iterator]=function(){return this}),wn;function rr(qn){return function(Me){return Er([qn,Me])}}function Er(qn){if(st)throw new TypeError("Generator is already executing.");for(;Fe;)try{if(st=1,It&&(Mt=qn[0]&2?It.return:qn[0]?It.throw||((Mt=It.return)&&Mt.call(It),0):It.next)&&!(Mt=Mt.call(It,qn[1])).done)return Mt;switch(It=0,Mt&&(qn=[qn[0]&2,Mt.value]),qn[0]){case 0:case 1:Mt=qn;break;case 4:return Fe.label++,{value:qn[1],done:!1};case 5:Fe.label++,It=qn[1],qn=[0];continue;case 7:qn=Fe.ops.pop(),Fe.trys.pop();continue;default:if(Mt=Fe.trys,!(Mt=Mt.length>0&&Mt[Mt.length-1])&&(qn[0]===6||qn[0]===2)){Fe=0;continue}if(qn[0]===3&&(!Mt||qn[1]>Mt[0]&&qn[1]<Mt[3])){Fe.label=qn[1];break}if(qn[0]===6&&Fe.label<Mt[1]){Fe.label=Mt[1],Mt=qn;break}if(Mt&&Fe.label<Mt[2]){Fe.label=Mt[2],Fe.ops.push(qn);break}Mt[2]&&Fe.ops.pop(),Fe.trys.pop();continue}qn=xe.call(pt,Fe)}catch(Me){qn=[6,Me],It=0}finally{st=Mt=0}if(qn[0]&5)throw qn[1];return{value:qn[0]?qn[1]:void 0,done:!0}}}var E=function(){function pt(xe,Fe){this.next=null,this.key=xe,this.data=Fe,this.left=null,this.right=null}return pt}();function fe(pt,xe){return pt>xe?1:pt<xe?-1:0}function $(pt,xe,Fe){for(var st=new E(null,null),It=st,Mt=st;;){var wn=Fe(pt,xe.key);if(wn<0){if(xe.left===null)break;if(Fe(pt,xe.left.key)<0){var rr=xe.left;if(xe.left=rr.right,rr.right=xe,xe=rr,xe.left===null)break}Mt.left=xe,Mt=xe,xe=xe.left}else if(wn>0){if(xe.right===null)break;if(Fe(pt,xe.right.key)>0){var rr=xe.right;if(xe.right=rr.left,rr.left=xe,xe=rr,xe.right===null)break}It.right=xe,It=xe,xe=xe.right}else break}return It.right=xe.left,Mt.left=xe.right,xe.left=st.right,xe.right=st.left,xe}function se(pt,xe,Fe,st){var It=new E(pt,xe);if(Fe===null)return It.left=It.right=null,It;Fe=$(pt,Fe,st);var Mt=st(pt,Fe.key);return Mt<0?(It.left=Fe.left,It.right=Fe,Fe.left=null):Mt>=0&&(It.right=Fe.right,It.left=Fe,Fe.right=null),It}function ce(pt,xe,Fe){var st=null,It=null;if(xe){xe=$(pt,xe,Fe);var Mt=Fe(xe.key,pt);Mt===0?(st=xe.left,It=xe.right):Mt<0?(It=xe.right,xe.right=null,st=xe):(st=xe.left,xe.left=null,It=xe)}return{left:st,right:It}}function ye(pt,xe,Fe){return xe===null?pt:(pt===null||(xe=$(pt.key,xe,Fe),xe.left=pt),xe)}function ae(pt,xe,Fe,st,It){if(pt){st(""+xe+(Fe?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+It(pt)+`
`);var Mt=xe+(Fe?"    ":"\u2502   ");pt.left&&ae(pt.left,Mt,!1,st,It),pt.right&&ae(pt.right,Mt,!0,st,It)}}var He=function(){function pt(xe){xe===void 0&&(xe=fe),this._root=null,this._size=0,this._comparator=xe}return pt.prototype.insert=function(xe,Fe){return this._size++,this._root=se(xe,Fe,this._root,this._comparator)},pt.prototype.add=function(xe,Fe){var st=new E(xe,Fe);this._root===null&&(st.left=st.right=null,this._size++,this._root=st);var It=this._comparator,Mt=$(xe,this._root,It),wn=It(xe,Mt.key);return wn===0?this._root=Mt:(wn<0?(st.left=Mt.left,st.right=Mt,Mt.left=null):wn>0&&(st.right=Mt.right,st.left=Mt,Mt.right=null),this._size++,this._root=st),this._root},pt.prototype.remove=function(xe){this._root=this._remove(xe,this._root,this._comparator)},pt.prototype._remove=function(xe,Fe,st){var It;if(Fe===null)return null;Fe=$(xe,Fe,st);var Mt=st(xe,Fe.key);return Mt===0?(Fe.left===null?It=Fe.right:(It=$(xe,Fe.left,st),It.right=Fe.right),this._size--,It):Fe},pt.prototype.pop=function(){var xe=this._root;if(xe){for(;xe.left;)xe=xe.left;return this._root=$(xe.key,this._root,this._comparator),this._root=this._remove(xe.key,this._root,this._comparator),{key:xe.key,data:xe.data}}return null},pt.prototype.findStatic=function(xe){for(var Fe=this._root,st=this._comparator;Fe;){var It=st(xe,Fe.key);if(It===0)return Fe;It<0?Fe=Fe.left:Fe=Fe.right}return null},pt.prototype.find=function(xe){return this._root&&(this._root=$(xe,this._root,this._comparator),this._comparator(xe,this._root.key)!==0)?null:this._root},pt.prototype.contains=function(xe){for(var Fe=this._root,st=this._comparator;Fe;){var It=st(xe,Fe.key);if(It===0)return!0;It<0?Fe=Fe.left:Fe=Fe.right}return!1},pt.prototype.forEach=function(xe,Fe){for(var st=this._root,It=[],Mt=!1;!Mt;)st!==null?(It.push(st),st=st.left):It.length!==0?(st=It.pop(),xe.call(Fe,st),st=st.right):Mt=!0;return this},pt.prototype.range=function(xe,Fe,st,It){for(var Mt=[],wn=this._comparator,rr=this._root,Er;Mt.length!==0||rr;)if(rr)Mt.push(rr),rr=rr.left;else{if(rr=Mt.pop(),Er=wn(rr.key,Fe),Er>0)break;if(wn(rr.key,xe)>=0&&st.call(It,rr))return this;rr=rr.right}return this},pt.prototype.keys=function(){var xe=[];return this.forEach(function(Fe){var st=Fe.key;return xe.push(st)}),xe},pt.prototype.values=function(){var xe=[];return this.forEach(function(Fe){var st=Fe.data;return xe.push(st)}),xe},pt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},pt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},pt.prototype.minNode=function(xe){if(xe===void 0&&(xe=this._root),xe)for(;xe.left;)xe=xe.left;return xe},pt.prototype.maxNode=function(xe){if(xe===void 0&&(xe=this._root),xe)for(;xe.right;)xe=xe.right;return xe},pt.prototype.at=function(xe){for(var Fe=this._root,st=!1,It=0,Mt=[];!st;)if(Fe)Mt.push(Fe),Fe=Fe.left;else if(Mt.length>0){if(Fe=Mt.pop(),It===xe)return Fe;It++,Fe=Fe.right}else st=!0;return null},pt.prototype.next=function(xe){var Fe=this._root,st=null;if(xe.right){for(st=xe.right;st.left;)st=st.left;return st}for(var It=this._comparator;Fe;){var Mt=It(xe.key,Fe.key);if(Mt===0)break;Mt<0?(st=Fe,Fe=Fe.left):Fe=Fe.right}return st},pt.prototype.prev=function(xe){var Fe=this._root,st=null;if(xe.left!==null){for(st=xe.left;st.right;)st=st.right;return st}for(var It=this._comparator;Fe;){var Mt=It(xe.key,Fe.key);if(Mt===0)break;Mt<0?Fe=Fe.left:(st=Fe,Fe=Fe.right)}return st},pt.prototype.clear=function(){return this._root=null,this._size=0,this},pt.prototype.toList=function(){return Oe(this._root)},pt.prototype.load=function(xe,Fe,st){Fe===void 0&&(Fe=[]),st===void 0&&(st=!1);var It=xe.length,Mt=this._comparator;if(st&&ee(xe,Fe,0,It-1,Mt),this._root===null)this._root=J(xe,Fe,0,It),this._size=It;else{var wn=le(this.toList(),me(xe,Fe),Mt);It=this._size+It,this._root=Q({head:wn},0,It)}return this},pt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(pt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(pt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),pt.prototype.toString=function(xe){xe===void 0&&(xe=function(st){return String(st.key)});var Fe=[];return ae(this._root,"",!0,function(st){return Fe.push(st)},xe),Fe.join("")},pt.prototype.update=function(xe,Fe,st){var It=this._comparator,Mt=ce(xe,this._root,It),wn=Mt.left,rr=Mt.right;It(xe,Fe)<0?rr=se(Fe,st,rr,It):wn=se(Fe,st,wn,It),this._root=ye(wn,rr,It)},pt.prototype.split=function(xe){return ce(xe,this._root,this._comparator)},pt.prototype[Symbol.iterator]=function(){var xe,Fe,st;return G(this,function(It){switch(It.label){case 0:xe=this._root,Fe=[],st=!1,It.label=1;case 1:return st?[3,6]:xe===null?[3,2]:(Fe.push(xe),xe=xe.left,[3,5]);case 2:return Fe.length===0?[3,4]:(xe=Fe.pop(),[4,xe]);case 3:return It.sent(),xe=xe.right,[3,5];case 4:st=!0,It.label=5;case 5:return[3,1];case 6:return[2]}})},pt}();function J(pt,xe,Fe,st){var It=st-Fe;if(It>0){var Mt=Fe+Math.floor(It/2),wn=pt[Mt],rr=xe[Mt],Er=new E(wn,rr);return Er.left=J(pt,xe,Fe,Mt),Er.right=J(pt,xe,Mt+1,st),Er}return null}function me(pt,xe){for(var Fe=new E(null,null),st=Fe,It=0;It<pt.length;It++)st=st.next=new E(pt[It],xe[It]);return st.next=null,Fe.next}function Oe(pt){for(var xe=pt,Fe=[],st=!1,It=new E(null,null),Mt=It;!st;)xe?(Fe.push(xe),xe=xe.left):Fe.length>0?(xe=Mt=Mt.next=Fe.pop(),xe=xe.right):st=!0;return Mt.next=null,It.next}function Q(pt,xe,Fe){var st=Fe-xe;if(st>0){var It=xe+Math.floor(st/2),Mt=Q(pt,xe,It),wn=pt.head;return wn.left=Mt,pt.head=pt.head.next,wn.right=Q(pt,It+1,Fe),wn}return null}function le(pt,xe,Fe){for(var st=new E(null,null),It=st,Mt=pt,wn=xe;Mt!==null&&wn!==null;)Fe(Mt.key,wn.key)<0?(It.next=Mt,Mt=Mt.next):(It.next=wn,wn=wn.next),It=It.next;return Mt!==null?It.next=Mt:wn!==null&&(It.next=wn),st.next}function ee(pt,xe,Fe,st,It){if(!(Fe>=st)){for(var Mt=pt[Fe+st>>1],wn=Fe-1,rr=st+1;;){do wn++;while(It(pt[wn],Mt)<0);do rr--;while(It(pt[rr],Mt)>0);if(wn>=rr)break;var Er=pt[wn];pt[wn]=pt[rr],pt[rr]=Er,Er=xe[wn],xe[wn]=xe[rr],xe[rr]=Er}ee(pt,xe,Fe,rr,It),ee(pt,xe,rr+1,st,It)}}const be=(pt,xe)=>pt.ll.x<=xe.x&&xe.x<=pt.ur.x&&pt.ll.y<=xe.y&&xe.y<=pt.ur.y,et=(pt,xe)=>{if(xe.ur.x<pt.ll.x||pt.ur.x<xe.ll.x||xe.ur.y<pt.ll.y||pt.ur.y<xe.ll.y)return null;const Fe=pt.ll.x<xe.ll.x?xe.ll.x:pt.ll.x,st=pt.ur.x<xe.ur.x?pt.ur.x:xe.ur.x,It=pt.ll.y<xe.ll.y?xe.ll.y:pt.ll.y,Mt=pt.ur.y<xe.ur.y?pt.ur.y:xe.ur.y;return{ll:{x:Fe,y:It},ur:{x:st,y:Mt}}};let tt=Number.EPSILON;tt===void 0&&(tt=Math.pow(2,-52));const wt=tt*tt,gt=(pt,xe)=>{if(-tt<pt&&pt<tt&&-tt<xe&&xe<tt)return 0;const Fe=pt-xe;return Fe*Fe<wt*pt*xe?0:pt<xe?-1:1};class ft{constructor(){this.reset()}reset(){this.xRounder=new Pe,this.yRounder=new Pe}round(xe,Fe){return{x:this.xRounder.round(xe),y:this.yRounder.round(Fe)}}}class Pe{constructor(){this.tree=new He,this.round(0)}round(xe){const Fe=this.tree.add(xe),st=this.tree.prev(Fe);if(st!==null&&gt(Fe.key,st.key)===0)return this.tree.remove(xe),st.key;const It=this.tree.next(Fe);return It!==null&&gt(Fe.key,It.key)===0?(this.tree.remove(xe),It.key):xe}}const Ae=new ft,Be=11102230246251565e-32,Ze=134217729,ut=(3+8*Be)*Be;function tn(pt,xe,Fe,st,It){let Mt,wn,rr,Er,qn=xe[0],Me=st[0],Te=0,ke=0;Me>qn==Me>-qn?(Mt=qn,qn=xe[++Te]):(Mt=Me,Me=st[++ke]);let at=0;if(Te<pt&&ke<Fe)for(Me>qn==Me>-qn?(wn=qn+Mt,rr=Mt-(wn-qn),qn=xe[++Te]):(wn=Me+Mt,rr=Mt-(wn-Me),Me=st[++ke]),Mt=wn,rr!==0&&(It[at++]=rr);Te<pt&&ke<Fe;)Me>qn==Me>-qn?(wn=Mt+qn,Er=wn-Mt,rr=Mt-(wn-Er)+(qn-Er),qn=xe[++Te]):(wn=Mt+Me,Er=wn-Mt,rr=Mt-(wn-Er)+(Me-Er),Me=st[++ke]),Mt=wn,rr!==0&&(It[at++]=rr);for(;Te<pt;)wn=Mt+qn,Er=wn-Mt,rr=Mt-(wn-Er)+(qn-Er),qn=xe[++Te],Mt=wn,rr!==0&&(It[at++]=rr);for(;ke<Fe;)wn=Mt+Me,Er=wn-Mt,rr=Mt-(wn-Er)+(Me-Er),Me=st[++ke],Mt=wn,rr!==0&&(It[at++]=rr);return(Mt!==0||at===0)&&(It[at++]=Mt),at}function De(pt,xe){let Fe=xe[0];for(let st=1;st<pt;st++)Fe+=xe[st];return Fe}function mt(pt){return new Float64Array(pt)}const Re=(3+16*Be)*Be,nt=(2+12*Be)*Be,qe=(9+64*Be)*Be*Be,Ge=mt(4),Dt=mt(8),yt=mt(12),Le=mt(16),Zt=mt(4);function yn(pt,xe,Fe,st,It,Mt,wn){let rr,Er,qn,Me,Te,ke,at,At,nn,cn,Et,Qt,Qn,Sr,Zr,yr,Wr,Ei;const yi=pt-It,wr=Fe-It,Ai=xe-Mt,pi=st-Mt;Sr=yi*pi,ke=Ze*yi,at=ke-(ke-yi),At=yi-at,ke=Ze*pi,nn=ke-(ke-pi),cn=pi-nn,Zr=At*cn-(Sr-at*nn-At*nn-at*cn),yr=Ai*wr,ke=Ze*Ai,at=ke-(ke-Ai),At=Ai-at,ke=Ze*wr,nn=ke-(ke-wr),cn=wr-nn,Wr=At*cn-(yr-at*nn-At*nn-at*cn),Et=Zr-Wr,Te=Zr-Et,Ge[0]=Zr-(Et+Te)+(Te-Wr),Qt=Sr+Et,Te=Qt-Sr,Qn=Sr-(Qt-Te)+(Et-Te),Et=Qn-yr,Te=Qn-Et,Ge[1]=Qn-(Et+Te)+(Te-yr),Ei=Qt+Et,Te=Ei-Qt,Ge[2]=Qt-(Ei-Te)+(Et-Te),Ge[3]=Ei;let _i=De(4,Ge),Bo=nt*wn;if(_i>=Bo||-_i>=Bo||(Te=pt-yi,rr=pt-(yi+Te)+(Te-It),Te=Fe-wr,qn=Fe-(wr+Te)+(Te-It),Te=xe-Ai,Er=xe-(Ai+Te)+(Te-Mt),Te=st-pi,Me=st-(pi+Te)+(Te-Mt),rr===0&&Er===0&&qn===0&&Me===0)||(Bo=qe*wn+ut*Math.abs(_i),_i+=yi*Me+pi*rr-(Ai*qn+wr*Er),_i>=Bo||-_i>=Bo))return _i;Sr=rr*pi,ke=Ze*rr,at=ke-(ke-rr),At=rr-at,ke=Ze*pi,nn=ke-(ke-pi),cn=pi-nn,Zr=At*cn-(Sr-at*nn-At*nn-at*cn),yr=Er*wr,ke=Ze*Er,at=ke-(ke-Er),At=Er-at,ke=Ze*wr,nn=ke-(ke-wr),cn=wr-nn,Wr=At*cn-(yr-at*nn-At*nn-at*cn),Et=Zr-Wr,Te=Zr-Et,Zt[0]=Zr-(Et+Te)+(Te-Wr),Qt=Sr+Et,Te=Qt-Sr,Qn=Sr-(Qt-Te)+(Et-Te),Et=Qn-yr,Te=Qn-Et,Zt[1]=Qn-(Et+Te)+(Te-yr),Ei=Qt+Et,Te=Ei-Qt,Zt[2]=Qt-(Ei-Te)+(Et-Te),Zt[3]=Ei;const Si=tn(4,Ge,4,Zt,Dt);Sr=yi*Me,ke=Ze*yi,at=ke-(ke-yi),At=yi-at,ke=Ze*Me,nn=ke-(ke-Me),cn=Me-nn,Zr=At*cn-(Sr-at*nn-At*nn-at*cn),yr=Ai*qn,ke=Ze*Ai,at=ke-(ke-Ai),At=Ai-at,ke=Ze*qn,nn=ke-(ke-qn),cn=qn-nn,Wr=At*cn-(yr-at*nn-At*nn-at*cn),Et=Zr-Wr,Te=Zr-Et,Zt[0]=Zr-(Et+Te)+(Te-Wr),Qt=Sr+Et,Te=Qt-Sr,Qn=Sr-(Qt-Te)+(Et-Te),Et=Qn-yr,Te=Qn-Et,Zt[1]=Qn-(Et+Te)+(Te-yr),Ei=Qt+Et,Te=Ei-Qt,Zt[2]=Qt-(Ei-Te)+(Et-Te),Zt[3]=Ei;const Ci=tn(Si,Dt,4,Zt,yt);Sr=rr*Me,ke=Ze*rr,at=ke-(ke-rr),At=rr-at,ke=Ze*Me,nn=ke-(ke-Me),cn=Me-nn,Zr=At*cn-(Sr-at*nn-At*nn-at*cn),yr=Er*qn,ke=Ze*Er,at=ke-(ke-Er),At=Er-at,ke=Ze*qn,nn=ke-(ke-qn),cn=qn-nn,Wr=At*cn-(yr-at*nn-At*nn-at*cn),Et=Zr-Wr,Te=Zr-Et,Zt[0]=Zr-(Et+Te)+(Te-Wr),Qt=Sr+Et,Te=Qt-Sr,Qn=Sr-(Qt-Te)+(Et-Te),Et=Qn-yr,Te=Qn-Et,Zt[1]=Qn-(Et+Te)+(Te-yr),Ei=Qt+Et,Te=Ei-Qt,Zt[2]=Qt-(Ei-Te)+(Et-Te),Zt[3]=Ei;const ho=tn(Ci,yt,4,Zt,Le);return Le[ho-1]}function Tn(pt,xe,Fe,st,It,Mt){const wn=(xe-Mt)*(Fe-It),rr=(pt-It)*(st-Mt),Er=wn-rr,qn=Math.abs(wn+rr);return Math.abs(Er)>=Re*qn?Er:-yn(pt,xe,Fe,st,It,Mt,qn)}const lr=(pt,xe)=>pt.x*xe.y-pt.y*xe.x,or=(pt,xe)=>pt.x*xe.x+pt.y*xe.y,Lt=(pt,xe,Fe)=>{const st=Tn(pt.x,pt.y,xe.x,xe.y,Fe.x,Fe.y);return st>0?-1:st<0?1:0},en=pt=>Math.sqrt(or(pt,pt)),hn=(pt,xe,Fe)=>{const st={x:xe.x-pt.x,y:xe.y-pt.y},It={x:Fe.x-pt.x,y:Fe.y-pt.y};return lr(It,st)/en(It)/en(st)},Xn=(pt,xe,Fe)=>{const st={x:xe.x-pt.x,y:xe.y-pt.y},It={x:Fe.x-pt.x,y:Fe.y-pt.y};return or(It,st)/en(It)/en(st)},an=(pt,xe,Fe)=>xe.y===0?null:{x:pt.x+xe.x/xe.y*(Fe-pt.y),y:Fe},Pt=(pt,xe,Fe)=>xe.x===0?null:{x:Fe,y:pt.y+xe.y/xe.x*(Fe-pt.x)},zt=(pt,xe,Fe,st)=>{if(xe.x===0)return Pt(Fe,st,pt.x);if(st.x===0)return Pt(pt,xe,Fe.x);if(xe.y===0)return an(Fe,st,pt.y);if(st.y===0)return an(pt,xe,Fe.y);const It=lr(xe,st);if(It==0)return null;const Mt={x:Fe.x-pt.x,y:Fe.y-pt.y},wn=lr(Mt,xe)/It,rr=lr(Mt,st)/It,Er=pt.x+rr*xe.x,qn=Fe.x+wn*st.x,Me=pt.y+rr*xe.y,Te=Fe.y+wn*st.y,ke=(Er+qn)/2,at=(Me+Te)/2;return{x:ke,y:at}};class je{static compare(xe,Fe){const st=je.comparePoints(xe.point,Fe.point);return st!==0?st:(xe.point!==Fe.point&&xe.link(Fe),xe.isLeft!==Fe.isLeft?xe.isLeft?1:-1:Ut.compare(xe.segment,Fe.segment))}static comparePoints(xe,Fe){return xe.x<Fe.x?-1:xe.x>Fe.x?1:xe.y<Fe.y?-1:xe.y>Fe.y?1:0}constructor(xe,Fe){xe.events===void 0?xe.events=[this]:xe.events.push(this),this.point=xe,this.isLeft=Fe}link(xe){if(xe.point===this.point)throw new Error("Tried to link already linked events");const Fe=xe.point.events;for(let st=0,It=Fe.length;st<It;st++){const Mt=Fe[st];this.point.events.push(Mt),Mt.point=this.point}this.checkForConsuming()}checkForConsuming(){const xe=this.point.events.length;for(let Fe=0;Fe<xe;Fe++){const st=this.point.events[Fe];if(st.segment.consumedBy===void 0)for(let It=Fe+1;It<xe;It++){const Mt=this.point.events[It];Mt.consumedBy===void 0&&st.otherSE.point.events===Mt.otherSE.point.events&&st.segment.consume(Mt.segment)}}}getAvailableLinkedEvents(){const xe=[];for(let Fe=0,st=this.point.events.length;Fe<st;Fe++){const It=this.point.events[Fe];It!==this&&!It.segment.ringOut&&It.segment.isInResult()&&xe.push(It)}return xe}getLeftmostComparator(xe){const Fe=new Map,st=It=>{const Mt=It.otherSE;Fe.set(It,{sine:hn(this.point,xe.point,Mt.point),cosine:Xn(this.point,xe.point,Mt.point)})};return(It,Mt)=>{Fe.has(It)||st(It),Fe.has(Mt)||st(Mt);const{sine:wn,cosine:rr}=Fe.get(It),{sine:Er,cosine:qn}=Fe.get(Mt);return wn>=0&&Er>=0?rr<qn?1:rr>qn?-1:0:wn<0&&Er<0?rr<qn?-1:rr>qn?1:0:Er<wn?-1:Er>wn?1:0}}}let rt=0;class Ut{static compare(xe,Fe){const st=xe.leftSE.point.x,It=Fe.leftSE.point.x,Mt=xe.rightSE.point.x,wn=Fe.rightSE.point.x;if(wn<st)return 1;if(Mt<It)return-1;const rr=xe.leftSE.point.y,Er=Fe.leftSE.point.y,qn=xe.rightSE.point.y,Me=Fe.rightSE.point.y;if(st<It){if(Er<rr&&Er<qn)return 1;if(Er>rr&&Er>qn)return-1;const Te=xe.comparePoint(Fe.leftSE.point);if(Te<0)return 1;if(Te>0)return-1;const ke=Fe.comparePoint(xe.rightSE.point);return ke!==0?ke:-1}if(st>It){if(rr<Er&&rr<Me)return-1;if(rr>Er&&rr>Me)return 1;const Te=Fe.comparePoint(xe.leftSE.point);if(Te!==0)return Te;const ke=xe.comparePoint(Fe.rightSE.point);return ke<0?1:ke>0?-1:1}if(rr<Er)return-1;if(rr>Er)return 1;if(Mt<wn){const Te=Fe.comparePoint(xe.rightSE.point);if(Te!==0)return Te}if(Mt>wn){const Te=xe.comparePoint(Fe.rightSE.point);if(Te<0)return 1;if(Te>0)return-1}if(Mt!==wn){const Te=qn-rr,ke=Mt-st,at=Me-Er,At=wn-It;if(Te>ke&&at<At)return 1;if(Te<ke&&at>At)return-1}return Mt>wn?1:Mt<wn||qn<Me?-1:qn>Me?1:xe.id<Fe.id?-1:xe.id>Fe.id?1:0}constructor(xe,Fe,st,It){this.id=++rt,this.leftSE=xe,xe.segment=this,xe.otherSE=Fe,this.rightSE=Fe,Fe.segment=this,Fe.otherSE=xe,this.rings=st,this.windings=It}static fromRing(xe,Fe,st){let It,Mt,wn;const rr=je.comparePoints(xe,Fe);if(rr<0)It=xe,Mt=Fe,wn=1;else if(rr>0)It=Fe,Mt=xe,wn=-1;else throw new Error(`Tried to create degenerate segment at [${xe.x}, ${xe.y}]`);const Er=new je(It,!0),qn=new je(Mt,!1);return new Ut(Er,qn,[st],[wn])}replaceRightSE(xe){this.rightSE=xe,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const xe=this.leftSE.point.y,Fe=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:xe<Fe?xe:Fe},ur:{x:this.rightSE.point.x,y:xe>Fe?xe:Fe}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(xe){return xe.x===this.leftSE.point.x&&xe.y===this.leftSE.point.y||xe.x===this.rightSE.point.x&&xe.y===this.rightSE.point.y}comparePoint(xe){if(this.isAnEndpoint(xe))return 0;const Fe=this.leftSE.point,st=this.rightSE.point,It=this.vector();if(Fe.x===st.x)return xe.x===Fe.x?0:xe.x<Fe.x?1:-1;const Mt=(xe.y-Fe.y)/It.y,wn=Fe.x+Mt*It.x;if(xe.x===wn)return 0;const rr=(xe.x-Fe.x)/It.x,Er=Fe.y+rr*It.y;return xe.y===Er?0:xe.y<Er?-1:1}getIntersection(xe){const Fe=this.bbox(),st=xe.bbox(),It=et(Fe,st);if(It===null)return null;const Mt=this.leftSE.point,wn=this.rightSE.point,rr=xe.leftSE.point,Er=xe.rightSE.point,qn=be(Fe,rr)&&this.comparePoint(rr)===0,Me=be(st,Mt)&&xe.comparePoint(Mt)===0,Te=be(Fe,Er)&&this.comparePoint(Er)===0,ke=be(st,wn)&&xe.comparePoint(wn)===0;if(Me&&qn)return ke&&!Te?wn:!ke&&Te?Er:null;if(Me)return Te&&Mt.x===Er.x&&Mt.y===Er.y?null:Mt;if(qn)return ke&&wn.x===rr.x&&wn.y===rr.y?null:rr;if(ke&&Te)return null;if(ke)return wn;if(Te)return Er;const at=zt(Mt,this.vector(),rr,xe.vector());return at===null||!be(It,at)?null:Ae.round(at.x,at.y)}split(xe){const Fe=[],st=xe.events!==void 0,It=new je(xe,!0),Mt=new je(xe,!1),wn=this.rightSE;this.replaceRightSE(Mt),Fe.push(Mt),Fe.push(It);const rr=new Ut(It,wn,this.rings.slice(),this.windings.slice());return je.comparePoints(rr.leftSE.point,rr.rightSE.point)>0&&rr.swapEvents(),je.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),st&&(It.checkForConsuming(),Mt.checkForConsuming()),Fe}swapEvents(){const xe=this.rightSE;this.rightSE=this.leftSE,this.leftSE=xe,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let Fe=0,st=this.windings.length;Fe<st;Fe++)this.windings[Fe]*=-1}consume(xe){let Fe=this,st=xe;for(;Fe.consumedBy;)Fe=Fe.consumedBy;for(;st.consumedBy;)st=st.consumedBy;const It=Ut.compare(Fe,st);if(It!==0){if(It>0){const Mt=Fe;Fe=st,st=Mt}if(Fe.prev===st){const Mt=Fe;Fe=st,st=Mt}for(let Mt=0,wn=st.rings.length;Mt<wn;Mt++){const rr=st.rings[Mt],Er=st.windings[Mt],qn=Fe.rings.indexOf(rr);qn===-1?(Fe.rings.push(rr),Fe.windings.push(Er)):Fe.windings[qn]+=Er}st.rings=null,st.windings=null,st.consumedBy=Fe,st.leftSE.consumedBy=Fe.leftSE,st.rightSE.consumedBy=Fe.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const xe=this.prev.consumedBy||this.prev;this._beforeState=xe.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const xe=this.beforeState();this._afterState={rings:xe.rings.slice(0),windings:xe.windings.slice(0),multiPolys:[]};const Fe=this._afterState.rings,st=this._afterState.windings,It=this._afterState.multiPolys;for(let rr=0,Er=this.rings.length;rr<Er;rr++){const qn=this.rings[rr],Me=this.windings[rr],Te=Fe.indexOf(qn);Te===-1?(Fe.push(qn),st.push(Me)):st[Te]+=Me}const Mt=[],wn=[];for(let rr=0,Er=Fe.length;rr<Er;rr++){if(st[rr]===0)continue;const qn=Fe[rr],Me=qn.poly;if(wn.indexOf(Me)===-1)if(qn.isExterior)Mt.push(Me);else{wn.indexOf(Me)===-1&&wn.push(Me);const Te=Mt.indexOf(qn.poly);Te!==-1&&Mt.splice(Te,1)}}for(let rr=0,Er=Mt.length;rr<Er;rr++){const qn=Mt[rr].multiPoly;It.indexOf(qn)===-1&&It.push(qn)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const xe=this.beforeState().multiPolys,Fe=this.afterState().multiPolys;switch(pn.type){case"union":{const st=xe.length===0,It=Fe.length===0;this._isInResult=st!==It;break}case"intersection":{let st,It;xe.length<Fe.length?(st=xe.length,It=Fe.length):(st=Fe.length,It=xe.length),this._isInResult=It===pn.numMultiPolys&&st<It;break}case"xor":{const st=Math.abs(xe.length-Fe.length);this._isInResult=st%2===1;break}case"difference":{const st=It=>It.length===1&&It[0].isSubject;this._isInResult=st(xe)!==st(Fe);break}default:throw new Error(`Unrecognized operation type found ${pn.type}`)}return this._isInResult}}class U{constructor(xe,Fe,st){if(!Array.isArray(xe)||xe.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Fe,this.isExterior=st,this.segments=[],typeof xe[0][0]!="number"||typeof xe[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const It=Ae.round(xe[0][0],xe[0][1]);this.bbox={ll:{x:It.x,y:It.y},ur:{x:It.x,y:It.y}};let Mt=It;for(let wn=1,rr=xe.length;wn<rr;wn++){if(typeof xe[wn][0]!="number"||typeof xe[wn][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let Er=Ae.round(xe[wn][0],xe[wn][1]);Er.x===Mt.x&&Er.y===Mt.y||(this.segments.push(Ut.fromRing(Mt,Er,this)),Er.x<this.bbox.ll.x&&(this.bbox.ll.x=Er.x),Er.y<this.bbox.ll.y&&(this.bbox.ll.y=Er.y),Er.x>this.bbox.ur.x&&(this.bbox.ur.x=Er.x),Er.y>this.bbox.ur.y&&(this.bbox.ur.y=Er.y),Mt=Er)}(It.x!==Mt.x||It.y!==Mt.y)&&this.segments.push(Ut.fromRing(Mt,It,this))}getSweepEvents(){const xe=[];for(let Fe=0,st=this.segments.length;Fe<st;Fe++){const It=this.segments[Fe];xe.push(It.leftSE),xe.push(It.rightSE)}return xe}}class he{constructor(xe,Fe){if(!Array.isArray(xe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new U(xe[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let st=1,It=xe.length;st<It;st++){const Mt=new U(xe[st],this,!1);Mt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Mt.bbox.ll.x),Mt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Mt.bbox.ll.y),Mt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Mt.bbox.ur.x),Mt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Mt.bbox.ur.y),this.interiorRings.push(Mt)}this.multiPoly=Fe}getSweepEvents(){const xe=this.exteriorRing.getSweepEvents();for(let Fe=0,st=this.interiorRings.length;Fe<st;Fe++){const It=this.interiorRings[Fe].getSweepEvents();for(let Mt=0,wn=It.length;Mt<wn;Mt++)xe.push(It[Mt])}return xe}}class ot{constructor(xe,Fe){if(!Array.isArray(xe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof xe[0][0][0]=="number"&&(xe=[xe])}catch(st){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let st=0,It=xe.length;st<It;st++){const Mt=new he(xe[st],this);Mt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Mt.bbox.ll.x),Mt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Mt.bbox.ll.y),Mt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Mt.bbox.ur.x),Mt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Mt.bbox.ur.y),this.polys.push(Mt)}this.isSubject=Fe}getSweepEvents(){const xe=[];for(let Fe=0,st=this.polys.length;Fe<st;Fe++){const It=this.polys[Fe].getSweepEvents();for(let Mt=0,wn=It.length;Mt<wn;Mt++)xe.push(It[Mt])}return xe}}class de{static factory(xe){const Fe=[];for(let st=0,It=xe.length;st<It;st++){const Mt=xe[st];if(!Mt.isInResult()||Mt.ringOut)continue;let wn=null,rr=Mt.leftSE,Er=Mt.rightSE;const qn=[rr],Me=rr.point,Te=[];for(;wn=rr,rr=Er,qn.push(rr),rr.point!==Me;)for(;;){const ke=rr.getAvailableLinkedEvents();if(ke.length===0){const nn=qn[0].point,cn=qn[qn.length-1].point;throw new Error(`Unable to complete output ring starting at [${nn.x}, ${nn.y}]. Last matching segment found ends at [${cn.x}, ${cn.y}].`)}if(ke.length===1){Er=ke[0].otherSE;break}let at=null;for(let nn=0,cn=Te.length;nn<cn;nn++)if(Te[nn].point===rr.point){at=nn;break}if(at!==null){const nn=Te.splice(at)[0],cn=qn.splice(nn.index);cn.unshift(cn[0].otherSE),Fe.push(new de(cn.reverse()));continue}Te.push({index:qn.length,point:rr.point});const At=rr.getLeftmostComparator(wn);Er=ke.sort(At)[0].otherSE;break}Fe.push(new de(qn))}return Fe}constructor(xe){this.events=xe;for(let Fe=0,st=xe.length;Fe<st;Fe++)xe[Fe].segment.ringOut=this;this.poly=null}getGeom(){let xe=this.events[0].point;const Fe=[xe];for(let qn=1,Me=this.events.length-1;qn<Me;qn++){const Te=this.events[qn].point,ke=this.events[qn+1].point;Lt(Te,xe,ke)!==0&&(Fe.push(Te),xe=Te)}if(Fe.length===1)return null;const st=Fe[0],It=Fe[1];Lt(st,xe,It)===0&&Fe.shift(),Fe.push(Fe[0]);const Mt=this.isExteriorRing()?1:-1,wn=this.isExteriorRing()?0:Fe.length-1,rr=this.isExteriorRing()?Fe.length:-1,Er=[];for(let qn=wn;qn!=rr;qn+=Mt)Er.push([Fe[qn].x,Fe[qn].y]);return Er}isExteriorRing(){if(this._isExteriorRing===void 0){const xe=this.enclosingRing();this._isExteriorRing=xe?!xe.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let xe=this.events[0];for(let It=1,Mt=this.events.length;It<Mt;It++){const wn=this.events[It];je.compare(xe,wn)>0&&(xe=wn)}let Fe=xe.segment.prevInResult(),st=Fe?Fe.prevInResult():null;for(;;){if(!Fe)return null;if(!st)return Fe.ringOut;if(st.ringOut!==Fe.ringOut)return st.ringOut.enclosingRing()!==Fe.ringOut?Fe.ringOut:Fe.ringOut.enclosingRing();Fe=st.prevInResult(),st=Fe?Fe.prevInResult():null}}}class qt{constructor(xe){this.exteriorRing=xe,xe.poly=this,this.interiorRings=[]}addInterior(xe){this.interiorRings.push(xe),xe.poly=this}getGeom(){const xe=[this.exteriorRing.getGeom()];if(xe[0]===null)return null;for(let Fe=0,st=this.interiorRings.length;Fe<st;Fe++){const It=this.interiorRings[Fe].getGeom();It!==null&&xe.push(It)}return xe}}class ln{constructor(xe){this.rings=xe,this.polys=this._composePolys(xe)}getGeom(){const xe=[];for(let Fe=0,st=this.polys.length;Fe<st;Fe++){const It=this.polys[Fe].getGeom();It!==null&&xe.push(It)}return xe}_composePolys(xe){const Fe=[];for(let st=0,It=xe.length;st<It;st++){const Mt=xe[st];if(!Mt.poly)if(Mt.isExteriorRing())Fe.push(new qt(Mt));else{const wn=Mt.enclosingRing();wn.poly||Fe.push(new qt(wn)),wn.poly.addInterior(Mt)}}return Fe}}class mn{constructor(xe){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut.compare;this.queue=xe,this.tree=new He(Fe),this.segments=[]}process(xe){const Fe=xe.segment,st=[];if(xe.consumedBy)return xe.isLeft?this.queue.remove(xe.otherSE):this.tree.remove(Fe),st;const It=xe.isLeft?this.tree.add(Fe):this.tree.find(Fe);if(!It)throw new Error(`Unable to find segment #${Fe.id} [${Fe.leftSE.point.x}, ${Fe.leftSE.point.y}] -> [${Fe.rightSE.point.x}, ${Fe.rightSE.point.y}] in SweepLine tree.`);let Mt=It,wn=It,rr,Er;for(;rr===void 0;)Mt=this.tree.prev(Mt),Mt===null?rr=null:Mt.key.consumedBy===void 0&&(rr=Mt.key);for(;Er===void 0;)wn=this.tree.next(wn),wn===null?Er=null:wn.key.consumedBy===void 0&&(Er=wn.key);if(xe.isLeft){let qn=null;if(rr){const Te=rr.getIntersection(Fe);if(Te!==null&&(Fe.isAnEndpoint(Te)||(qn=Te),!rr.isAnEndpoint(Te))){const ke=this._splitSafely(rr,Te);for(let at=0,At=ke.length;at<At;at++)st.push(ke[at])}}let Me=null;if(Er){const Te=Er.getIntersection(Fe);if(Te!==null&&(Fe.isAnEndpoint(Te)||(Me=Te),!Er.isAnEndpoint(Te))){const ke=this._splitSafely(Er,Te);for(let at=0,At=ke.length;at<At;at++)st.push(ke[at])}}if(qn!==null||Me!==null){let Te=null;qn===null?Te=Me:Me===null?Te=qn:Te=je.comparePoints(qn,Me)<=0?qn:Me,this.queue.remove(Fe.rightSE),st.push(Fe.rightSE);const ke=Fe.split(Te);for(let at=0,At=ke.length;at<At;at++)st.push(ke[at])}st.length>0?(this.tree.remove(Fe),st.push(xe)):(this.segments.push(Fe),Fe.prev=rr)}else{if(rr&&Er){const qn=rr.getIntersection(Er);if(qn!==null){if(!rr.isAnEndpoint(qn)){const Me=this._splitSafely(rr,qn);for(let Te=0,ke=Me.length;Te<ke;Te++)st.push(Me[Te])}if(!Er.isAnEndpoint(qn)){const Me=this._splitSafely(Er,qn);for(let Te=0,ke=Me.length;Te<ke;Te++)st.push(Me[Te])}}}this.tree.remove(Fe)}return st}_splitSafely(xe,Fe){this.tree.remove(xe);const st=xe.rightSE;this.queue.remove(st);const It=xe.split(Fe);return It.push(st),xe.consumedBy===void 0&&this.tree.add(xe),It}}const Dn=typeof q!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Yn=typeof q!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Kn{run(xe,Fe,st){pn.type=xe,Ae.reset();const It=[new ot(Fe,!0)];for(let Te=0,ke=st.length;Te<ke;Te++)It.push(new ot(st[Te],!1));if(pn.numMultiPolys=It.length,pn.type==="difference"){const Te=It[0];let ke=1;for(;ke<It.length;)et(It[ke].bbox,Te.bbox)!==null?ke++:It.splice(ke,1)}if(pn.type==="intersection")for(let Te=0,ke=It.length;Te<ke;Te++){const at=It[Te];for(let At=Te+1,nn=It.length;At<nn;At++)if(et(at.bbox,It[At].bbox)===null)return[]}const Mt=new He(je.compare);for(let Te=0,ke=It.length;Te<ke;Te++){const at=It[Te].getSweepEvents();for(let At=0,nn=at.length;At<nn;At++)if(Mt.insert(at[At]),Mt.size>Dn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const wn=new mn(Mt);let rr=Mt.size,Er=Mt.pop();for(;Er;){const Te=Er.key;if(Mt.size===rr){const at=Te.segment;throw new Error(`Unable to pop() ${Te.isLeft?"left":"right"} SweepEvent [${Te.point.x}, ${Te.point.y}] from segment #${at.id} [${at.leftSE.point.x}, ${at.leftSE.point.y}] -> [${at.rightSE.point.x}, ${at.rightSE.point.y}] from queue.`)}if(Mt.size>Dn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(wn.segments.length>Yn)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const ke=wn.process(Te);for(let at=0,At=ke.length;at<At;at++){const nn=ke[at];nn.consumedBy===void 0&&Mt.insert(nn)}rr=Mt.size,Er=Mt.pop()}Ae.reset();const qn=de.factory(wn.segments);return new ln(qn).getGeom()}}const pn=new Kn;var $n={union:function(pt){for(var xe=arguments.length,Fe=new Array(xe>1?xe-1:0),st=1;st<xe;st++)Fe[st-1]=arguments[st];return pn.run("union",pt,Fe)},intersection:function(pt){for(var xe=arguments.length,Fe=new Array(xe>1?xe-1:0),st=1;st<xe;st++)Fe[st-1]=arguments[st];return pn.run("intersection",pt,Fe)},xor:function(pt){for(var xe=arguments.length,Fe=new Array(xe>1?xe-1:0),st=1;st<xe;st++)Fe[st-1]=arguments[st];return pn.run("xor",pt,Fe)},difference:function(pt){for(var xe=arguments.length,Fe=new Array(xe>1?xe-1:0),st=1;st<xe;st++)Fe[st-1]=arguments[st];return pn.run("difference",pt,Fe)}};return $n})},62273:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var D={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},q=W.default=D},27590:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var D={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},q=W.default=D},45598:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=fe;var G=q(D(67294)),E=D(11805);function fe($){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=[];return G.default.Children.forEach($,function(ye){ye==null&&!se.keepEmpty||(Array.isArray(ye)?ce=ce.concat(fe(ye)):(0,E.isFragment)(ye)&&ye.props?ce=ce.concat(fe(ye.props.children,se)):ce.push(ye))}),ce}},3481:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.isStyleSupport=$;var G=q(D(19158)),E=function(ce){if((0,G.default)()&&window.document.documentElement){var ye=Array.isArray(ce)?ce:[ce],ae=window.document.documentElement;return ye.some(function(He){return He in ae.style})}return!1},fe=function(ce,ye){if(!E(ce))return!1;var ae=document.createElement("div"),He=ae.style[ce];return ae.style[ce]=ye,ae.style[ce]!==He};function $(se,ce){return!Array.isArray(se)&&ce!==void 0?fe(se,ce):E(se)}},27712:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var D={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(E){var fe=E.keyCode;if(E.altKey&&!E.ctrlKey||E.metaKey||fe>=D.F1&&fe<=D.F12)return!1;switch(fe){case D.ALT:case D.CAPS_LOCK:case D.CONTEXT_MENU:case D.CTRL:case D.DOWN:case D.END:case D.ESC:case D.HOME:case D.INSERT:case D.LEFT:case D.MAC_FF_META:case D.META:case D.NUMLOCK:case D.NUM_CENTER:case D.PAGE_DOWN:case D.PAGE_UP:case D.PAUSE:case D.PRINT_SCREEN:case D.RIGHT:case D.SHIFT:case D.UP:case D.WIN_KEY:case D.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(E){if(E>=D.ZERO&&E<=D.NINE||E>=D.NUM_ZERO&&E<=D.NUM_MULTIPLY||E>=D.A&&E<=D.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&E===0)return!0;switch(E){case D.SPACE:case D.QUESTION_MARK:case D.NUM_PLUS:case D.NUM_MINUS:case D.NUM_PERIOD:case D.NUM_DIVISION:case D.SEMICOLON:case D.DASH:case D.EQUALS:case D.COMMA:case D.PERIOD:case D.SLASH:case D.APOSTROPHE:case D.SINGLE_QUOTE:case D.OPEN_SQUARE_BRACKET:case D.BACKSLASH:case D.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},q=W.default=D},18545:function(_t,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var G=q(D(67294));function E(fe){var $=G.useRef();$.current=fe;var se=G.useCallback(function(){for(var ce,ye=arguments.length,ae=new Array(ye),He=0;He<ye;He++)ae[He]=arguments[He];return(ce=$.current)===null||ce===void 0?void 0:ce.call.apply(ce,[$].concat(ae))},[]);return se}},82546:function(_t,W,D){"use strict";var q=D(64836).default,G=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.useLayoutUpdateEffect=W.default=void 0;var E=G(D(67294)),fe=q(D(19158)),$=(0,fe.default)()?E.useLayoutEffect:E.useEffect,se=function(He,J){var me=E.useRef(!0);$(function(){return He(me.current)},J),$(function(){return me.current=!1,function(){me.current=!0}},[])},ce=W.useLayoutUpdateEffect=function(He,J){se(function(me){if(!me)return He()},J)},ye=W.default=se},67265:function(_t,W,D){"use strict";var q=D(75263).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var G=q(D(67294));function E(fe,$,se){var ce=G.useRef({});return(!("value"in ce.current)||se(ce.current.condition,$))&&(ce.current.value=fe(),ce.current.condition=$),ce.current.value}},60869:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ce;var G=q(D(27424)),E=q(D(18545)),fe=D(82546),$=q(D(78423));function se(ye){return ye!==void 0}function ce(ye,ae){var He=ae||{},J=He.defaultValue,me=He.value,Oe=He.onChange,Q=He.postState,le=(0,$.default)(function(){return se(me)?me:se(J)?typeof J=="function"?J():J:typeof ye=="function"?ye():ye}),ee=(0,G.default)(le,2),be=ee[0],et=ee[1],tt=me!==void 0?me:be,wt=Q?Q(tt):tt,gt=(0,E.default)(Oe),ft=(0,$.default)([tt]),Pe=(0,G.default)(ft,2),Ae=Pe[0],Be=Pe[1];(0,fe.useLayoutUpdateEffect)(function(){var ut=Ae[0];be!==ut&&gt(be,ut)},[Ae]),(0,fe.useLayoutUpdateEffect)(function(){se(me)||et(me)},[me]);var Ze=(0,E.default)(function(ut,tn){et(ut,tn),Be([tt],tn)});return[wt,Ze]}},78423:function(_t,W,D){"use strict";var q=D(75263).default,G=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=$;var E=G(D(27424)),fe=q(D(67294));function $(se){var ce=fe.useRef(!1),ye=fe.useState(se),ae=(0,E.default)(ye,2),He=ae[0],J=ae[1];fe.useEffect(function(){return ce.current=!1,function(){ce.current=!0}},[]);function me(Oe,Q){Q&&ce.current||J(Oe)}return[He,me]}},11102:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var G=q(D(18698)),E=q(D(45520));function fe(se,ce){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ae=new Set;function He(J,me){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Q=ae.has(J);if((0,E.default)(!Q,"Warning: There may be circular references"),Q)return!1;if(J===me)return!0;if(ye&&Oe>1)return!1;ae.add(J);var le=Oe+1;if(Array.isArray(J)){if(!Array.isArray(me)||J.length!==me.length)return!1;for(var ee=0;ee<J.length;ee++)if(!He(J[ee],me[ee],le))return!1;return!0}if(J&&me&&(0,G.default)(J)==="object"&&(0,G.default)(me)==="object"){var be=Object.keys(J);return be.length!==Object.keys(me).length?!1:be.every(function(et){return He(J[et],me[et],le)})}return!1}return He(se,ce)}var $=W.default=fe},18475:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=E;var G=q(D(42122));function E(fe,$){var se=(0,G.default)({},fe);return Array.isArray($)&&$.forEach(function(ce){delete se[ce]}),se}},75531:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.composeRef=ce,W.fillRef=se,W.supportNodeRef=He,W.supportRef=ae,W.useComposeRef=ye;var G=q(D(18698)),E=D(67294),fe=D(11805),$=q(D(67265));function se(J,me){typeof J=="function"?J(me):(0,G.default)(J)==="object"&&J&&"current"in J&&(J.current=me)}function ce(){for(var J=arguments.length,me=new Array(J),Oe=0;Oe<J;Oe++)me[Oe]=arguments[Oe];var Q=me.filter(function(le){return le});return Q.length<=1?Q[0]:function(le){me.forEach(function(ee){se(ee,le)})}}function ye(){for(var J=arguments.length,me=new Array(J),Oe=0;Oe<J;Oe++)me[Oe]=arguments[Oe];return(0,$.default)(function(){return ce.apply(void 0,me)},me,function(Q,le){return Q.length!==le.length||Q.every(function(ee,be){return ee!==le[be]})})}function ae(J){var me,Oe,Q=(0,fe.isMemo)(J)?J.type.type:J.type;return!(typeof Q=="function"&&!((me=Q.prototype)!==null&&me!==void 0&&me.render)&&Q.$$typeof!==fe.ForwardRef||typeof J=="function"&&!((Oe=J.prototype)!==null&&Oe!==void 0&&Oe.render)&&J.$$typeof!==fe.ForwardRef)}function He(J){return!(0,E.isValidElement)(J)||(0,fe.isFragment)(J)?!1:ae(J)}},94787:function(_t,W){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.default=D;function D(q,G){for(var E=q,fe=0;fe<G.length;fe+=1){if(E==null)return;E=E[G[fe]]}return E}},20059:function(_t,W,D){"use strict";var q=D(64836).default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=ye,W.merge=me;var G=q(D(18698)),E=q(D(42122)),fe=q(D(861)),$=q(D(51589)),se=q(D(94787));function ce(Oe,Q,le,ee){if(!Q.length)return le;var be=(0,$.default)(Q),et=be[0],tt=be.slice(1),wt;return!Oe&&typeof et=="number"?wt=[]:Array.isArray(Oe)?wt=(0,fe.default)(Oe):wt=(0,E.default)({},Oe),ee&&le===void 0&&tt.length===1?delete wt[et][tt[0]]:wt[et]=ce(wt[et],tt,le,ee),wt}function ye(Oe,Q,le){var ee=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Q.length&&ee&&le===void 0&&!(0,se.default)(Oe,Q.slice(0,-1))?Oe:ce(Oe,Q,le,ee)}function ae(Oe){return(0,G.default)(Oe)==="object"&&Oe!==null&&Object.getPrototypeOf(Oe)===Object.prototype}function He(Oe){return Array.isArray(Oe)?[]:{}}var J=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function me(){for(var Oe=arguments.length,Q=new Array(Oe),le=0;le<Oe;le++)Q[le]=arguments[le];var ee=He(Q[0]);return Q.forEach(function(be){function et(tt,wt){var gt=new Set(wt),ft=(0,se.default)(be,tt),Pe=Array.isArray(ft);if(Pe||ae(ft)){if(!gt.has(ft)){gt.add(ft);var Ae=(0,se.default)(ee,tt);Pe?ee=ye(ee,tt,[]):(!Ae||(0,G.default)(Ae)!=="object")&&(ee=ye(ee,tt,He(ft))),J(ft).forEach(function(Be){et([].concat((0,fe.default)(tt),[Be]),gt)})}}else ee=ye(ee,tt,ft)}et([])}),ee}},81550:function(_t){(function(W,D){_t.exports=D()})(this,function(){"use strict";var W=function(Ue){return Ue instanceof Uint8Array||Ue instanceof Uint16Array||Ue instanceof Uint32Array||Ue instanceof Int8Array||Ue instanceof Int16Array||Ue instanceof Int32Array||Ue instanceof Float32Array||Ue instanceof Float64Array||Ue instanceof Uint8ClampedArray},D=function(Ue,Yt){for(var On=Object.keys(Yt),Mr=0;Mr<On.length;++Mr)Ue[On[Mr]]=Yt[On[Mr]];return Ue},q=`
`;function G(Ue){return typeof atob!="undefined"?atob(Ue):"base64:"+Ue}function E(Ue){var Yt=new Error("(regl) "+Ue);throw console.error(Yt),Yt}function fe(Ue,Yt){Ue||E(Yt)}function $(Ue){return Ue?": "+Ue:""}function se(Ue,Yt,On){Ue in Yt||E("unknown parameter ("+Ue+")"+$(On)+". possible values: "+Object.keys(Yt).join())}function ce(Ue,Yt){W(Ue)||E("invalid parameter type"+$(Yt)+". must be a typed array")}function ye(Ue,Yt){switch(Yt){case"number":return typeof Ue=="number";case"object":return typeof Ue=="object";case"string":return typeof Ue=="string";case"boolean":return typeof Ue=="boolean";case"function":return typeof Ue=="function";case"undefined":return typeof Ue=="undefined";case"symbol":return typeof Ue=="symbol"}}function ae(Ue,Yt,On){ye(Ue,Yt)||E("invalid parameter type"+$(On)+". expected "+Yt+", got "+typeof Ue)}function He(Ue,Yt){Ue>=0&&(Ue|0)===Ue||E("invalid parameter type, ("+Ue+")"+$(Yt)+". must be a nonnegative integer")}function J(Ue,Yt,On){Yt.indexOf(Ue)<0&&E("invalid value"+$(On)+". must be one of: "+Yt)}var me=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function Oe(Ue){Object.keys(Ue).forEach(function(Yt){me.indexOf(Yt)<0&&E('invalid regl constructor argument "'+Yt+'". must be one of '+me)})}function Q(Ue,Yt){for(Ue=Ue+"";Ue.length<Yt;)Ue=" "+Ue;return Ue}function le(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ee(Ue,Yt){this.number=Ue,this.line=Yt,this.errors=[]}function be(Ue,Yt,On){this.file=Ue,this.line=Yt,this.message=On}function et(){var Ue=new Error,Yt=(Ue.stack||Ue).toString(),On=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Yt);if(On)return On[1];var Mr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Yt);return Mr?Mr[1]:"unknown"}function tt(){var Ue=new Error,Yt=(Ue.stack||Ue).toString(),On=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Yt);if(On)return On[1];var Mr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Yt);return Mr?Mr[1]:"unknown"}function wt(Ue,Yt){var On=Ue.split(`
`),Mr=1,ei=0,Rr={unknown:new le,0:new le};Rr.unknown.name=Rr[0].name=Yt||et(),Rr.unknown.lines.push(new ee(0,""));for(var br=0;br<On.length;++br){var Li=On[br],hi=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Li);if(hi)switch(hi[1]){case"line":var ki=/(\d+)(\s+\d+)?/.exec(hi[2]);ki&&(Mr=ki[1]|0,ki[2]&&(ei=ki[2]|0,ei in Rr||(Rr[ei]=new le)));break;case"define":var Di=/SHADER_NAME(_B64)?\s+(.*)$/.exec(hi[2]);Di&&(Rr[ei].name=Di[1]?G(Di[2]):Di[2]);break}Rr[ei].lines.push(new ee(Mr++,Li))}return Object.keys(Rr).forEach(function(ji){var $i=Rr[ji];$i.lines.forEach(function(bi){$i.index[bi.number]=bi})}),Rr}function gt(Ue){var Yt=[];return Ue.split(`
`).forEach(function(On){if(!(On.length<5)){var Mr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(On);Mr?Yt.push(new be(Mr[1]|0,Mr[2]|0,Mr[3].trim())):On.length>0&&Yt.push(new be("unknown",0,On))}}),Yt}function ft(Ue,Yt){Yt.forEach(function(On){var Mr=Ue[On.file];if(Mr){var ei=Mr.index[On.line];if(ei){ei.errors.push(On),Mr.hasErrors=!0;return}}Ue.unknown.hasErrors=!0,Ue.unknown.lines[0].errors.push(On)})}function Pe(Ue,Yt,On,Mr,ei){if(!Ue.getShaderParameter(Yt,Ue.COMPILE_STATUS)){var Rr=Ue.getShaderInfoLog(Yt),br=Mr===Ue.FRAGMENT_SHADER?"fragment":"vertex";mt(On,"string",br+" shader source must be a string",ei);var Li=wt(On,ei),hi=gt(Rr);ft(Li,hi),Object.keys(Li).forEach(function(ki){var Di=Li[ki];if(!Di.hasErrors)return;var ji=[""],$i=[""];function bi(Vi,dr){ji.push(Vi),$i.push(dr||"")}bi("file number "+ki+": "+Di.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Di.lines.forEach(function(Vi){if(Vi.errors.length>0){bi(Q(Vi.number,4)+"|  ","background-color:yellow; font-weight:bold"),bi(Vi.line+q,"color:red; background-color:yellow; font-weight:bold");var dr=0;Vi.errors.forEach(function(Ur){var xi=Ur.message,ro=/^\s*'(.*)'\s*:\s*(.*)$/.exec(xi);if(ro){var ai=ro[1];switch(xi=ro[2],ai){case"assign":ai="=";break}dr=Math.max(Vi.line.indexOf(ai,dr),0)}else dr=0;bi(Q("| ",6)),bi(Q("^^^",dr+3)+q,"font-weight:bold"),bi(Q("| ",6)),bi(xi+q,"font-weight:bold")}),bi(Q("| ",6)+q)}else bi(Q(Vi.number,4)+"|  "),bi(Vi.line+q,"color:red")}),typeof document!="undefined"&&!window.chrome?($i[0]=ji.join("%c"),console.log.apply(console,$i)):console.log(ji.join(""))}),fe.raise("Error compiling "+br+" shader, "+Li[0].name)}}function Ae(Ue,Yt,On,Mr,ei){if(!Ue.getProgramParameter(Yt,Ue.LINK_STATUS)){var Rr=Ue.getProgramInfoLog(Yt),br=wt(On,ei),Li=wt(Mr,ei),hi='Error linking program with vertex shader, "'+Li[0].name+'", and fragment shader "'+br[0].name+'"';typeof document!="undefined"?console.log("%c"+hi+q+"%c"+Rr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(hi+q+Rr),fe.raise(hi)}}function Be(Ue){Ue._commandRef=et()}function Ze(Ue,Yt,On,Mr){Be(Ue);function ei(hi){return hi?Mr.id(hi):0}Ue._fragId=ei(Ue.static.frag),Ue._vertId=ei(Ue.static.vert);function Rr(hi,ki){Object.keys(ki).forEach(function(Di){hi[Mr.id(Di)]=!0})}var br=Ue._uniformSet={};Rr(br,Yt.static),Rr(br,Yt.dynamic);var Li=Ue._attributeSet={};Rr(Li,On.static),Rr(Li,On.dynamic),Ue._hasCount="count"in Ue.static||"count"in Ue.dynamic||"elements"in Ue.static||"elements"in Ue.dynamic}function ut(Ue,Yt){var On=tt();E(Ue+" in command "+(Yt||et())+(On==="unknown"?"":" called from "+On))}function tn(Ue,Yt,On){Ue||ut(Yt,On||et())}function De(Ue,Yt,On,Mr){Ue in Yt||ut("unknown parameter ("+Ue+")"+$(On)+". possible values: "+Object.keys(Yt).join(),Mr||et())}function mt(Ue,Yt,On,Mr){ye(Ue,Yt)||ut("invalid parameter type"+$(On)+". expected "+Yt+", got "+typeof Ue,Mr||et())}function Re(Ue){Ue()}function nt(Ue,Yt,On){Ue.texture?J(Ue.texture._texture.internalformat,Yt,"unsupported texture format for attachment"):J(Ue.renderbuffer._renderbuffer.format,On,"unsupported renderbuffer format for attachment")}var qe=33071,Ge=9728,Dt=9984,yt=9985,Le=9986,Zt=9987,yn=5120,Tn=5121,lr=5122,or=5123,Lt=5124,en=5125,hn=5126,Xn=32819,an=32820,Pt=33635,zt=34042,je=36193,rt={};rt[yn]=rt[Tn]=1,rt[lr]=rt[or]=rt[je]=rt[Pt]=rt[Xn]=rt[an]=2,rt[Lt]=rt[en]=rt[hn]=rt[zt]=4;function Ut(Ue,Yt){return Ue===an||Ue===Xn||Ue===Pt?2:Ue===zt?4:rt[Ue]*Yt}function U(Ue){return!(Ue&Ue-1)&&!!Ue}function he(Ue,Yt,On){var Mr,ei=Yt.width,Rr=Yt.height,br=Yt.channels;fe(ei>0&&ei<=On.maxTextureSize&&Rr>0&&Rr<=On.maxTextureSize,"invalid texture shape"),(Ue.wrapS!==qe||Ue.wrapT!==qe)&&fe(U(ei)&&U(Rr),"incompatible wrap mode for texture, both width and height must be power of 2"),Yt.mipmask===1?ei!==1&&Rr!==1&&fe(Ue.minFilter!==Dt&&Ue.minFilter!==Le&&Ue.minFilter!==yt&&Ue.minFilter!==Zt,"min filter requires mipmap"):(fe(U(ei)&&U(Rr),"texture must be a square power of 2 to support mipmapping"),fe(Yt.mipmask===(ei<<1)-1,"missing or incomplete mipmap data")),Yt.type===hn&&(On.extensions.indexOf("oes_texture_float_linear")<0&&fe(Ue.minFilter===Ge&&Ue.magFilter===Ge,"filter not supported, must enable oes_texture_float_linear"),fe(!Ue.genMipmaps,"mipmap generation not supported with float textures"));var Li=Yt.images;for(Mr=0;Mr<16;++Mr)if(Li[Mr]){var hi=ei>>Mr,ki=Rr>>Mr;fe(Yt.mipmask&1<<Mr,"missing mipmap data");var Di=Li[Mr];if(fe(Di.width===hi&&Di.height===ki,"invalid shape for mip images"),fe(Di.format===Yt.format&&Di.internalformat===Yt.internalformat&&Di.type===Yt.type,"incompatible type for mip image"),!Di.compressed)if(Di.data){var ji=Math.ceil(Ut(Di.type,br)*hi/Di.unpackAlignment)*Di.unpackAlignment;fe(Di.data.byteLength===ji*ki,"invalid data for image, buffer size is inconsistent with image format")}else Di.element||Di.copy}else Ue.genMipmaps||fe((Yt.mipmask&1<<Mr)===0,"extra mipmap data");Yt.compressed&&fe(!Ue.genMipmaps,"mipmap generation for compressed images not supported")}function ot(Ue,Yt,On,Mr){var ei=Ue.width,Rr=Ue.height,br=Ue.channels;fe(ei>0&&ei<=Mr.maxTextureSize&&Rr>0&&Rr<=Mr.maxTextureSize,"invalid texture shape"),fe(ei===Rr,"cube map must be square"),fe(Yt.wrapS===qe&&Yt.wrapT===qe,"wrap mode not supported by cube map");for(var Li=0;Li<On.length;++Li){var hi=On[Li];fe(hi.width===ei&&hi.height===Rr,"inconsistent cube map face shape"),Yt.genMipmaps&&(fe(!hi.compressed,"can not generate mipmap for compressed textures"),fe(hi.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ki=hi.images,Di=0;Di<16;++Di){var ji=ki[Di];if(ji){var $i=ei>>Di,bi=Rr>>Di;fe(hi.mipmask&1<<Di,"missing mipmap data"),fe(ji.width===$i&&ji.height===bi,"invalid shape for mip images"),fe(ji.format===Ue.format&&ji.internalformat===Ue.internalformat&&ji.type===Ue.type,"incompatible type for mip image"),ji.compressed||(ji.data?fe(ji.data.byteLength===$i*bi*Math.max(Ut(ji.type,br),ji.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ji.element||ji.copy)}}}}var de=D(fe,{optional:Re,raise:E,commandRaise:ut,command:tn,parameter:se,commandParameter:De,constructor:Oe,type:ae,commandType:mt,isTypedArray:ce,nni:He,oneOf:J,shaderError:Pe,linkError:Ae,callSite:tt,saveCommandRef:Be,saveDrawInfo:Ze,framebufferFormat:nt,guessCommand:et,texture2D:he,textureCube:ot}),qt=0,ln=0;function mn(Ue,Yt){this.id=qt++,this.type=Ue,this.data=Yt}function Dn(Ue){return Ue.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Yn(Ue){if(Ue.length===0)return[];var Yt=Ue.charAt(0),On=Ue.charAt(Ue.length-1);if(Ue.length>1&&Yt===On&&(Yt==='"'||Yt==="'"))return['"'+Dn(Ue.substr(1,Ue.length-2))+'"'];var Mr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ue);if(Mr)return Yn(Ue.substr(0,Mr.index)).concat(Yn(Mr[1])).concat(Yn(Ue.substr(Mr.index+Mr[0].length)));var ei=Ue.split(".");if(ei.length===1)return['"'+Dn(Ue)+'"'];for(var Rr=[],br=0;br<ei.length;++br)Rr=Rr.concat(Yn(ei[br]));return Rr}function Kn(Ue){return"["+Yn(Ue).join("][")+"]"}function pn(Ue,Yt){return new mn(Ue,Kn(Yt+""))}function vt(Ue){return typeof Ue=="function"&&!Ue._reglType||Ue instanceof mn}function Nt(Ue,Yt){return typeof Ue=="function"?new mn(ln,Ue):Ue}var An={DynamicVariable:mn,define:pn,isDynamic:vt,unbox:Nt,accessor:Kn},In={next:typeof requestAnimationFrame=="function"?function(Ue){return requestAnimationFrame(Ue)}:function(Ue){return setTimeout(Ue,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ue){return cancelAnimationFrame(Ue)}:clearTimeout},$n=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function pt(){var Ue={"":0},Yt=[""];return{id:function(On){var Mr=Ue[On];return Mr||(Mr=Ue[On]=Yt.length,Yt.push(On),Mr)},str:function(On){return Yt[On]}}}function xe(Ue,Yt,On){var Mr=document.createElement("canvas");D(Mr.style,{border:0,margin:0,padding:0,top:0,left:0}),Ue.appendChild(Mr),Ue===document.body&&(Mr.style.position="absolute",D(Ue.style,{margin:0,padding:0}));function ei(){var Li=window.innerWidth,hi=window.innerHeight;if(Ue!==document.body){var ki=Ue.getBoundingClientRect();Li=ki.right-ki.left,hi=ki.bottom-ki.top}Mr.width=On*Li,Mr.height=On*hi,D(Mr.style,{width:Li+"px",height:hi+"px"})}var Rr;Ue!==document.body&&typeof ResizeObserver=="function"?(Rr=new ResizeObserver(function(){setTimeout(ei)}),Rr.observe(Ue)):window.addEventListener("resize",ei,!1);function br(){Rr?Rr.disconnect():window.removeEventListener("resize",ei),Ue.removeChild(Mr)}return ei(),{canvas:Mr,onDestroy:br}}function Fe(Ue,Yt){function On(Mr){try{return Ue.getContext(Mr,Yt)}catch(ei){return null}}return On("webgl")||On("experimental-webgl")||On("webgl-experimental")}function st(Ue){return typeof Ue.nodeName=="string"&&typeof Ue.appendChild=="function"&&typeof Ue.getBoundingClientRect=="function"}function It(Ue){return typeof Ue.drawArrays=="function"||typeof Ue.drawElements=="function"}function Mt(Ue){return typeof Ue=="string"?Ue.split():(de(Array.isArray(Ue),"invalid extension array"),Ue)}function wn(Ue){return typeof Ue=="string"?(de(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Ue)):Ue}function rr(Ue){var Yt=Ue||{},On,Mr,ei,Rr,br={},Li=[],hi=[],ki=typeof window=="undefined"?1:window.devicePixelRatio,Di=!1,ji=function(Vi){Vi&&de.raise(Vi)},$i=function(){};if(typeof Yt=="string"?(de(typeof document!="undefined","selector queries only supported in DOM enviroments"),On=document.querySelector(Yt),de(On,"invalid query string for element")):typeof Yt=="object"?st(Yt)?On=Yt:It(Yt)?(Rr=Yt,ei=Rr.canvas):(de.constructor(Yt),"gl"in Yt?Rr=Yt.gl:"canvas"in Yt?ei=wn(Yt.canvas):"container"in Yt&&(Mr=wn(Yt.container)),"attributes"in Yt&&(br=Yt.attributes,de.type(br,"object","invalid context attributes")),"extensions"in Yt&&(Li=Mt(Yt.extensions)),"optionalExtensions"in Yt&&(hi=Mt(Yt.optionalExtensions)),"onDone"in Yt&&(de.type(Yt.onDone,"function","invalid or missing onDone callback"),ji=Yt.onDone),"profile"in Yt&&(Di=!!Yt.profile),"pixelRatio"in Yt&&(ki=+Yt.pixelRatio,de(ki>0,"invalid pixel ratio"))):de.raise("invalid arguments to regl"),On&&(On.nodeName.toLowerCase()==="canvas"?ei=On:Mr=On),!Rr){if(!ei){de(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var bi=xe(Mr||document.body,ji,ki);if(!bi)return null;ei=bi.canvas,$i=bi.onDestroy}br.premultipliedAlpha===void 0&&(br.premultipliedAlpha=!0),Rr=Fe(ei,br)}return Rr?{gl:Rr,canvas:ei,container:Mr,extensions:Li,optionalExtensions:hi,pixelRatio:ki,profile:Di,onDone:ji,onDestroy:$i}:($i(),ji("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Er(Ue,Yt){var On={};function Mr(br){de.type(br,"string","extension name must be string");var Li=br.toLowerCase(),hi;try{hi=On[Li]=Ue.getExtension(Li)}catch(ki){}return!!hi}for(var ei=0;ei<Yt.extensions.length;++ei){var Rr=Yt.extensions[ei];if(!Mr(Rr))return Yt.onDestroy(),Yt.onDone('"'+Rr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Yt.optionalExtensions.forEach(Mr),{extensions:On,restore:function(){Object.keys(On).forEach(function(br){if(On[br]&&!Mr(br))throw new Error("(regl): error restoring extension "+br)})}}}function qn(Ue,Yt){for(var On=Array(Ue),Mr=0;Mr<Ue;++Mr)On[Mr]=Yt(Mr);return On}var Me=5120,Te=5121,ke=5122,at=5123,At=5124,nn=5125,cn=5126;function Et(Ue){for(var Yt=16;Yt<=1<<28;Yt*=16)if(Ue<=Yt)return Yt;return 0}function Qt(Ue){var Yt,On;return Yt=(Ue>65535)<<4,Ue>>>=Yt,On=(Ue>255)<<3,Ue>>>=On,Yt|=On,On=(Ue>15)<<2,Ue>>>=On,Yt|=On,On=(Ue>3)<<1,Ue>>>=On,Yt|=On,Yt|Ue>>1}function Qn(){var Ue=qn(8,function(){return[]});function Yt(Rr){var br=Et(Rr),Li=Ue[Qt(br)>>2];return Li.length>0?Li.pop():new ArrayBuffer(br)}function On(Rr){Ue[Qt(Rr.byteLength)>>2].push(Rr)}function Mr(Rr,br){var Li=null;switch(Rr){case Me:Li=new Int8Array(Yt(br),0,br);break;case Te:Li=new Uint8Array(Yt(br),0,br);break;case ke:Li=new Int16Array(Yt(2*br),0,br);break;case at:Li=new Uint16Array(Yt(2*br),0,br);break;case At:Li=new Int32Array(Yt(4*br),0,br);break;case nn:Li=new Uint32Array(Yt(4*br),0,br);break;case cn:Li=new Float32Array(Yt(4*br),0,br);break;default:return null}return Li.length!==br?Li.subarray(0,br):Li}function ei(Rr){On(Rr.buffer)}return{alloc:Yt,free:On,allocType:Mr,freeType:ei}}var Sr=Qn();Sr.zero=Qn();var Zr=3408,yr=3410,Wr=3411,Ei=3412,yi=3413,wr=3414,Ai=3415,pi=33901,_i=33902,Bo=3379,Si=3386,Ci=34921,ho=36347,go=36348,jo=35661,Ke=35660,dt=34930,Wt=36349,dn=34076,Fn=34024,Bn=7936,_n=7937,Cn=7938,pr=35724,hr=34047,ni=36063,Wi=34852,Qi=3553,ri=34067,Gi=34069,zi=33984,qr=6408,To=5126,di=5121,So=36160,Zi=36053,io=36064,Mo=16384,gs=function(Ue,Yt){var On=1;Yt.ext_texture_filter_anisotropic&&(On=Ue.getParameter(hr));var Mr=1,ei=1;Yt.webgl_draw_buffers&&(Mr=Ue.getParameter(Wi),ei=Ue.getParameter(ni));var Rr=!!Yt.oes_texture_float;if(Rr){var br=Ue.createTexture();Ue.bindTexture(Qi,br),Ue.texImage2D(Qi,0,qr,1,1,0,qr,To,null);var Li=Ue.createFramebuffer();if(Ue.bindFramebuffer(So,Li),Ue.framebufferTexture2D(So,io,Qi,br,0),Ue.bindTexture(Qi,null),Ue.checkFramebufferStatus(So)!==Zi)Rr=!1;else{Ue.viewport(0,0,1,1),Ue.clearColor(1,0,0,1),Ue.clear(Mo);var hi=Sr.allocType(To,4);Ue.readPixels(0,0,1,1,qr,To,hi),Ue.getError()?Rr=!1:(Ue.deleteFramebuffer(Li),Ue.deleteTexture(br),Rr=hi[0]===1),Sr.freeType(hi)}}var ki=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Di=!0;if(!ki){var ji=Ue.createTexture(),$i=Sr.allocType(di,36);Ue.activeTexture(zi),Ue.bindTexture(ri,ji),Ue.texImage2D(Gi,0,qr,3,3,0,qr,di,$i),Sr.freeType($i),Ue.bindTexture(ri,null),Ue.deleteTexture(ji),Di=!Ue.getError()}return{colorBits:[Ue.getParameter(yr),Ue.getParameter(Wr),Ue.getParameter(Ei),Ue.getParameter(yi)],depthBits:Ue.getParameter(wr),stencilBits:Ue.getParameter(Ai),subpixelBits:Ue.getParameter(Zr),extensions:Object.keys(Yt).filter(function(bi){return!!Yt[bi]}),maxAnisotropic:On,maxDrawbuffers:Mr,maxColorAttachments:ei,pointSizeDims:Ue.getParameter(pi),lineWidthDims:Ue.getParameter(_i),maxViewportDims:Ue.getParameter(Si),maxCombinedTextureUnits:Ue.getParameter(jo),maxCubeMapSize:Ue.getParameter(dn),maxRenderbufferSize:Ue.getParameter(Fn),maxTextureUnits:Ue.getParameter(dt),maxTextureSize:Ue.getParameter(Bo),maxAttributes:Ue.getParameter(Ci),maxVertexUniforms:Ue.getParameter(ho),maxVertexTextureUnits:Ue.getParameter(Ke),maxVaryingVectors:Ue.getParameter(go),maxFragmentUniforms:Ue.getParameter(Wt),glsl:Ue.getParameter(pr),renderer:Ue.getParameter(_n),vendor:Ue.getParameter(Bn),version:Ue.getParameter(Cn),readFloat:Rr,npotTextureCube:Di}};function ya(Ue){return!!Ue&&typeof Ue=="object"&&Array.isArray(Ue.shape)&&Array.isArray(Ue.stride)&&typeof Ue.offset=="number"&&Ue.shape.length===Ue.stride.length&&(Array.isArray(Ue.data)||W(Ue.data))}var ia=function(Ue){return Object.keys(Ue).map(function(Yt){return Ue[Yt]})},ps={shape:Oi,flatten:Fr};function os(Ue,Yt,On){for(var Mr=0;Mr<Yt;++Mr)On[Mr]=Ue[Mr]}function Ct(Ue,Yt,On,Mr){for(var ei=0,Rr=0;Rr<Yt;++Rr)for(var br=Ue[Rr],Li=0;Li<On;++Li)Mr[ei++]=br[Li]}function Gt(Ue,Yt,On,Mr,ei,Rr){for(var br=Rr,Li=0;Li<Yt;++Li)for(var hi=Ue[Li],ki=0;ki<On;++ki)for(var Di=hi[ki],ji=0;ji<Mr;++ji)ei[br++]=Di[ji]}function Un(Ue,Yt,On,Mr,ei){for(var Rr=1,br=On+1;br<Yt.length;++br)Rr*=Yt[br];var Li=Yt[On];if(Yt.length-On===4){var hi=Yt[On+1],ki=Yt[On+2],Di=Yt[On+3];for(br=0;br<Li;++br)Gt(Ue[br],hi,ki,Di,Mr,ei),ei+=Rr}else for(br=0;br<Li;++br)Un(Ue[br],Yt,On+1,Mr,ei),ei+=Rr}function Fr(Ue,Yt,On,Mr){var ei=1;if(Yt.length)for(var Rr=0;Rr<Yt.length;++Rr)ei*=Yt[Rr];else ei=0;var br=Mr||Sr.allocType(On,ei);switch(Yt.length){case 0:break;case 1:os(Ue,Yt[0],br);break;case 2:Ct(Ue,Yt[0],Yt[1],br);break;case 3:Gt(Ue,Yt[0],Yt[1],Yt[2],br,0);break;default:Un(Ue,Yt,0,br,0)}return br}function Oi(Ue){for(var Yt=[],On=Ue;On.length;On=On[0])Yt.push(On.length);return Yt}var Yi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ea=5120,Ns=5122,As=5124,Is=5121,al=5123,Gh=5125,Op=5126,Kf=5126,ou={int8:ea,int16:Ns,int32:As,uint8:Is,uint16:al,uint32:Gh,float:Op,float32:Kf},Uf=35048,of=35040,au={dynamic:Uf,stream:of,static:35044},yu=ps.flatten,af=ps.shape,Sf=35044,Ou=35040,xs=5121,tc=5126,sf=[];sf[5120]=1,sf[5122]=2,sf[5124]=4,sf[5121]=1,sf[5123]=2,sf[5125]=4,sf[5126]=4;function Ed(Ue){return Yi[Object.prototype.toString.call(Ue)]|0}function np(Ue,Yt){for(var On=0;On<Yt.length;++On)Ue[On]=Yt[On]}function jf(Ue,Yt,On,Mr,ei,Rr,br){for(var Li=0,hi=0;hi<On;++hi)for(var ki=0;ki<Mr;++ki)Ue[Li++]=Yt[ei*hi+Rr*ki+br]}function Sd(Ue,Yt,On,Mr){var ei=0,Rr={};function br(dr){this.id=ei++,this.buffer=Ue.createBuffer(),this.type=dr,this.usage=Sf,this.byteLength=0,this.dimension=1,this.dtype=xs,this.persistentData=null,On.profile&&(this.stats={size:0})}br.prototype.bind=function(){Ue.bindBuffer(this.type,this.buffer)},br.prototype.destroy=function(){$i(this)};var Li=[];function hi(dr,Ur){var xi=Li.pop();return xi||(xi=new br(dr)),xi.bind(),ji(xi,Ur,Ou,0,1,!1),xi}function ki(dr){Li.push(dr)}function Di(dr,Ur,xi){dr.byteLength=Ur.byteLength,Ue.bufferData(dr.type,Ur,xi)}function ji(dr,Ur,xi,ro,ai,eo){var wi;if(dr.usage=xi,Array.isArray(Ur)){if(dr.dtype=ro||tc,Ur.length>0){var qi;if(Array.isArray(Ur[0])){wi=af(Ur);for(var si=1,vi=1;vi<wi.length;++vi)si*=wi[vi];dr.dimension=si,qi=yu(Ur,wi,dr.dtype),Di(dr,qi,xi),eo?dr.persistentData=qi:Sr.freeType(qi)}else if(typeof Ur[0]=="number"){dr.dimension=ai;var Ho=Sr.allocType(dr.dtype,Ur.length);np(Ho,Ur),Di(dr,Ho,xi),eo?dr.persistentData=Ho:Sr.freeType(Ho)}else W(Ur[0])?(dr.dimension=Ur[0].length,dr.dtype=ro||Ed(Ur[0])||tc,qi=yu(Ur,[Ur.length,Ur[0].length],dr.dtype),Di(dr,qi,xi),eo?dr.persistentData=qi:Sr.freeType(qi)):de.raise("invalid buffer data")}}else if(W(Ur))dr.dtype=ro||Ed(Ur),dr.dimension=ai,Di(dr,Ur,xi),eo&&(dr.persistentData=new Uint8Array(new Uint8Array(Ur.buffer)));else if(ya(Ur)){wi=Ur.shape;var va=Ur.stride,Ki=Ur.offset,Ri=0,Jr=0,zo=0,ie=0;wi.length===1?(Ri=wi[0],Jr=1,zo=va[0],ie=0):wi.length===2?(Ri=wi[0],Jr=wi[1],zo=va[0],ie=va[1]):de.raise("invalid shape"),dr.dtype=ro||Ed(Ur.data)||tc,dr.dimension=Jr;var lo=Sr.allocType(dr.dtype,Ri*Jr);jf(lo,Ur.data,Ri,Jr,zo,ie,Ki),Di(dr,lo,xi),eo?dr.persistentData=lo:Sr.freeType(lo)}else Ur instanceof ArrayBuffer?(dr.dtype=xs,dr.dimension=ai,Di(dr,Ur,xi),eo&&(dr.persistentData=new Uint8Array(new Uint8Array(Ur)))):de.raise("invalid buffer data")}function $i(dr){Yt.bufferCount--,Mr(dr);var Ur=dr.buffer;de(Ur,"buffer must not be deleted already"),Ue.deleteBuffer(Ur),dr.buffer=null,delete Rr[dr.id]}function bi(dr,Ur,xi,ro){Yt.bufferCount++;var ai=new br(Ur);Rr[ai.id]=ai;function eo(si){var vi=Sf,Ho=null,va=0,Ki=0,Ri=1;return Array.isArray(si)||W(si)||ya(si)||si instanceof ArrayBuffer?Ho=si:typeof si=="number"?va=si|0:si&&(de.type(si,"object","buffer arguments must be an object, a number or an array"),"data"in si&&(de(Ho===null||Array.isArray(Ho)||W(Ho)||ya(Ho),"invalid data for buffer"),Ho=si.data),"usage"in si&&(de.parameter(si.usage,au,"invalid buffer usage"),vi=au[si.usage]),"type"in si&&(de.parameter(si.type,ou,"invalid buffer type"),Ki=ou[si.type]),"dimension"in si&&(de.type(si.dimension,"number","invalid dimension"),Ri=si.dimension|0),"length"in si&&(de.nni(va,"buffer length must be a nonnegative integer"),va=si.length|0)),ai.bind(),Ho?ji(ai,Ho,vi,Ki,Ri,ro):(va&&Ue.bufferData(ai.type,va,vi),ai.dtype=Ki||xs,ai.usage=vi,ai.dimension=Ri,ai.byteLength=va),On.profile&&(ai.stats.size=ai.byteLength*sf[ai.dtype]),eo}function wi(si,vi){de(vi+si.byteLength<=ai.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+si.byteLength+" starting from offset "+vi+" to a buffer of size "+ai.byteLength),Ue.bufferSubData(ai.type,vi,si)}function qi(si,vi){var Ho=(vi||0)|0,va;if(ai.bind(),W(si)||si instanceof ArrayBuffer)wi(si,Ho);else if(Array.isArray(si)){if(si.length>0)if(typeof si[0]=="number"){var Ki=Sr.allocType(ai.dtype,si.length);np(Ki,si),wi(Ki,Ho),Sr.freeType(Ki)}else if(Array.isArray(si[0])||W(si[0])){va=af(si);var Ri=yu(si,va,ai.dtype);wi(Ri,Ho),Sr.freeType(Ri)}else de.raise("invalid buffer data")}else if(ya(si)){va=si.shape;var Jr=si.stride,zo=0,ie=0,lo=0,Ma=0;va.length===1?(zo=va[0],ie=1,lo=Jr[0],Ma=0):va.length===2?(zo=va[0],ie=va[1],lo=Jr[0],Ma=Jr[1]):de.raise("invalid shape");var Hn=Array.isArray(si.data)?ai.dtype:Ed(si.data),jr=Sr.allocType(Hn,zo*ie);jf(jr,si.data,zo,ie,lo,Ma,si.offset),wi(jr,Ho),Sr.freeType(jr)}else de.raise("invalid data for buffer subdata");return eo}return xi||eo(dr),eo._reglType="buffer",eo._buffer=ai,eo.subdata=qi,On.profile&&(eo.stats=ai.stats),eo.destroy=function(){$i(ai)},eo}function Vi(){ia(Rr).forEach(function(dr){dr.buffer=Ue.createBuffer(),Ue.bindBuffer(dr.type,dr.buffer),Ue.bufferData(dr.type,dr.persistentData||dr.byteLength,dr.usage)})}return On.profile&&(Yt.getTotalBufferSize=function(){var dr=0;return Object.keys(Rr).forEach(function(Ur){dr+=Rr[Ur].stats.size}),dr}),{create:bi,createStream:hi,destroyStream:ki,clear:function(){ia(Rr).forEach($i),Li.forEach($i)},getBuffer:function(dr){return dr&&dr._buffer instanceof br?dr._buffer:null},restore:Vi,_initBuffer:ji}}var yh=0,Zh=0,Xh=1,wd=1,Qp=4,lf=4,Vc={points:yh,point:Zh,lines:Xh,line:wd,triangles:Qp,triangle:lf,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Td=0,jl=1,Ac=4,uf=5120,su=5121,Hc=5122,hc=5123,wf=5124,Ml=5125,cf=34963,Tf=35040,Ad=35044;function Cd(Ue,Yt,On,Mr){var ei={},Rr=0,br={uint8:su,uint16:hc};Yt.oes_element_index_uint&&(br.uint32=Ml);function Li(Vi){this.id=Rr++,ei[this.id]=this,this.buffer=Vi,this.primType=Ac,this.vertCount=0,this.type=0}Li.prototype.bind=function(){this.buffer.bind()};var hi=[];function ki(Vi){var dr=hi.pop();return dr||(dr=new Li(On.create(null,cf,!0,!1)._buffer)),ji(dr,Vi,Tf,-1,-1,0,0),dr}function Di(Vi){hi.push(Vi)}function ji(Vi,dr,Ur,xi,ro,ai,eo){Vi.buffer.bind();var wi;if(dr){var qi=eo;!eo&&(!W(dr)||ya(dr)&&!W(dr.data))&&(qi=Yt.oes_element_index_uint?Ml:hc),On._initBuffer(Vi.buffer,dr,Ur,qi,3)}else Ue.bufferData(cf,ai,Ur),Vi.buffer.dtype=wi||su,Vi.buffer.usage=Ur,Vi.buffer.dimension=3,Vi.buffer.byteLength=ai;if(wi=eo,!eo){switch(Vi.buffer.dtype){case su:case uf:wi=su;break;case hc:case Hc:wi=hc;break;case Ml:case wf:wi=Ml;break;default:de.raise("unsupported type for element array")}Vi.buffer.dtype=wi}Vi.type=wi,de(wi!==Ml||!!Yt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var si=ro;si<0&&(si=Vi.buffer.byteLength,wi===hc?si>>=1:wi===Ml&&(si>>=2)),Vi.vertCount=si;var vi=xi;if(xi<0){vi=Ac;var Ho=Vi.buffer.dimension;Ho===1&&(vi=Td),Ho===2&&(vi=jl),Ho===3&&(vi=Ac)}Vi.primType=vi}function $i(Vi){Mr.elementsCount--,de(Vi.buffer!==null,"must not double destroy elements"),delete ei[Vi.id],Vi.buffer.destroy(),Vi.buffer=null}function bi(Vi,dr){var Ur=On.create(null,cf,!0),xi=new Li(Ur._buffer);Mr.elementsCount++;function ro(ai){if(!ai)Ur(),xi.primType=Ac,xi.vertCount=0,xi.type=su;else if(typeof ai=="number")Ur(ai),xi.primType=Ac,xi.vertCount=ai|0,xi.type=su;else{var eo=null,wi=Ad,qi=-1,si=-1,vi=0,Ho=0;Array.isArray(ai)||W(ai)||ya(ai)?eo=ai:(de.type(ai,"object","invalid arguments for elements"),"data"in ai&&(eo=ai.data,de(Array.isArray(eo)||W(eo)||ya(eo),"invalid data for element buffer")),"usage"in ai&&(de.parameter(ai.usage,au,"invalid element buffer usage"),wi=au[ai.usage]),"primitive"in ai&&(de.parameter(ai.primitive,Vc,"invalid element buffer primitive"),qi=Vc[ai.primitive]),"count"in ai&&(de(typeof ai.count=="number"&&ai.count>=0,"invalid vertex count for elements"),si=ai.count|0),"type"in ai&&(de.parameter(ai.type,br,"invalid buffer type"),Ho=br[ai.type]),"length"in ai?vi=ai.length|0:(vi=si,Ho===hc||Ho===Hc?vi*=2:(Ho===Ml||Ho===wf)&&(vi*=4))),ji(xi,eo,wi,qi,si,vi,Ho)}return ro}return ro(Vi),ro._reglType="elements",ro._elements=xi,ro.subdata=function(ai,eo){return Ur.subdata(ai,eo),ro},ro.destroy=function(){$i(xi)},ro}return{create:bi,createStream:ki,destroyStream:Di,getElements:function(Vi){return typeof Vi=="function"&&Vi._elements instanceof Li?Vi._elements:null},clear:function(){ia(ei).forEach($i)}}}var ys=new Float32Array(1),rp=new Uint32Array(ys.buffer),Qf=5123;function Yh(Ue){for(var Yt=Sr.allocType(Qf,Ue.length),On=0;On<Ue.length;++On)if(isNaN(Ue[On]))Yt[On]=65535;else if(Ue[On]===1/0)Yt[On]=31744;else if(Ue[On]===-1/0)Yt[On]=64512;else{ys[0]=Ue[On];var Mr=rp[0],ei=Mr>>>31<<15,Rr=(Mr<<1>>>24)-127,br=Mr>>13&1024-1;if(Rr<-24)Yt[On]=ei;else if(Rr<-14){var Li=-14-Rr;Yt[On]=ei+(br+1024>>Li)}else Rr>15?Yt[On]=ei+31744:Yt[On]=ei+(Rr+15<<10)+br}return Yt}function sl(Ue){return Array.isArray(Ue)||W(Ue)}var $h=function(Ue){return!(Ue&Ue-1)&&!!Ue},_h=34467,_u=3553,Wc=34067,Mu=34069,Cc=6408,we=6406,oe=6407,pe=6409,Je=6410,sn=32854,fn=32855,ir=36194,Cr=32819,Xr=32820,Bi=33635,bo=34042,vo=6402,Na=34041,Fa=35904,Ea=35906,Aa=36193,_a=33776,Ba=33777,Ca=33778,Xa=33779,ba=35986,cs=35987,Ws=34798,zs=35840,dc=35841,dl=35842,ff=35843,hf=36196,pc=5121,Gc=5123,bh=5125,Jf=5126,Mp=10242,ip=10243,Rp=10497,Af=33071,Pp=33648,op=10240,ap=10241,eh=9728,Ip=9729,xh=9984,Od=9985,th=9986,Gs=9987,nh=33170,df=4352,Vf=4353,$a=4354,ue=34046,We=3317,xt=37440,Pn=37441,ur=37443,Br=37444,fi=33984,Ii=[xh,th,Od,Gs],Xo=[0,pe,Je,oe,Cc],Wo={};Wo[pe]=Wo[we]=Wo[vo]=1,Wo[Na]=Wo[Je]=2,Wo[oe]=Wo[Fa]=3,Wo[Cc]=Wo[Ea]=4;function da(Ue){return"[object "+Ue+"]"}var $s=da("HTMLCanvasElement"),Rl=da("OffscreenCanvas"),Es=da("CanvasRenderingContext2D"),Ji=da("ImageBitmap"),Pl=da("HTMLImageElement"),Eh=da("HTMLVideoElement"),qh=Object.keys(Yi).concat([$s,Rl,Es,Ji,Pl,Eh]),Ka=[];Ka[pc]=1,Ka[Jf]=4,Ka[Aa]=2,Ka[Gc]=2,Ka[bh]=4;var Cs=[];Cs[sn]=2,Cs[fn]=2,Cs[ir]=2,Cs[Na]=4,Cs[_a]=.5,Cs[Ba]=.5,Cs[Ca]=1,Cs[Xa]=1,Cs[ba]=.5,Cs[cs]=1,Cs[Ws]=1,Cs[zs]=.5,Cs[dc]=.25,Cs[dl]=.5,Cs[ff]=.25,Cs[hf]=.5;function vc(Ue){return Array.isArray(Ue)&&(Ue.length===0||typeof Ue[0]=="number")}function Ui(Ue){if(!Array.isArray(Ue))return!1;var Yt=Ue.length;return!(Yt===0||!sl(Ue[0]))}function Cf(Ue){return Object.prototype.toString.call(Ue)}function Md(Ue){return Cf(Ue)===$s}function Kh(Ue){return Cf(Ue)===Rl}function Of(Ue){return Cf(Ue)===Es}function mc(Ue){return Cf(Ue)===Ji}function Jp(Ue){return Cf(Ue)===Pl}function Sh(Ue){return Cf(Ue)===Eh}function nc(Ue){if(!Ue)return!1;var Yt=Cf(Ue);return qh.indexOf(Yt)>=0?!0:vc(Ue)||Ui(Ue)||ya(Ue)}function rh(Ue){return Yi[Object.prototype.toString.call(Ue)]|0}function Rd(Ue,Yt){var On=Yt.length;switch(Ue.type){case pc:case Gc:case bh:case Jf:var Mr=Sr.allocType(Ue.type,On);Mr.set(Yt),Ue.data=Mr;break;case Aa:Ue.data=Yh(Yt);break;default:de.raise("unsupported texture type, must specify a typed array")}}function Pd(Ue,Yt){return Sr.allocType(Ue.type===Aa?Jf:Ue.type,Yt)}function Lp(Ue,Yt){Ue.type===Aa?(Ue.data=Yh(Yt),Sr.freeType(Yt)):Ue.data=Yt}function e0(Ue,Yt,On,Mr,ei,Rr){for(var br=Ue.width,Li=Ue.height,hi=Ue.channels,ki=br*Li*hi,Di=Pd(Ue,ki),ji=0,$i=0;$i<Li;++$i)for(var bi=0;bi<br;++bi)for(var Vi=0;Vi<hi;++Vi)Di[ji++]=Yt[On*bi+Mr*$i+ei*Vi+Rr];Lp(Ue,Di)}function Oc(Ue,Yt,On,Mr,ei,Rr){var br;if(typeof Cs[Ue]!="undefined"?br=Cs[Ue]:br=Wo[Ue]*Ka[Yt],Rr&&(br*=6),ei){for(var Li=0,hi=On;hi>=1;)Li+=br*hi*hi,hi/=2;return Li}else return br*On*Mr}function pf(Ue,Yt,On,Mr,ei,Rr,br){var Li={"don't care":df,"dont care":df,nice:$a,fast:Vf},hi={repeat:Rp,clamp:Af,mirror:Pp},ki={nearest:eh,linear:Ip},Di=D({mipmap:Gs,"nearest mipmap nearest":xh,"linear mipmap nearest":Od,"nearest mipmap linear":th,"linear mipmap linear":Gs},ki),ji={none:0,browser:Br},$i={uint8:pc,rgba4:Cr,rgb565:Bi,"rgb5 a1":Xr},bi={alpha:we,luminance:pe,"luminance alpha":Je,rgb:oe,rgba:Cc,rgba4:sn,"rgb5 a1":fn,rgb565:ir},Vi={};Yt.ext_srgb&&(bi.srgb=Fa,bi.srgba=Ea),Yt.oes_texture_float&&($i.float32=$i.float=Jf),Yt.oes_texture_half_float&&($i.float16=$i["half float"]=Aa),Yt.webgl_depth_texture&&(D(bi,{depth:vo,"depth stencil":Na}),D($i,{uint16:Gc,uint32:bh,"depth stencil":bo})),Yt.webgl_compressed_texture_s3tc&&D(Vi,{"rgb s3tc dxt1":_a,"rgba s3tc dxt1":Ba,"rgba s3tc dxt3":Ca,"rgba s3tc dxt5":Xa}),Yt.webgl_compressed_texture_atc&&D(Vi,{"rgb atc":ba,"rgba atc explicit alpha":cs,"rgba atc interpolated alpha":Ws}),Yt.webgl_compressed_texture_pvrtc&&D(Vi,{"rgb pvrtc 4bppv1":zs,"rgb pvrtc 2bppv1":dc,"rgba pvrtc 4bppv1":dl,"rgba pvrtc 2bppv1":ff}),Yt.webgl_compressed_texture_etc1&&(Vi["rgb etc1"]=hf);var dr=Array.prototype.slice.call(Ue.getParameter(_h));Object.keys(Vi).forEach(function(bn){var Lr=Vi[bn];dr.indexOf(Lr)>=0&&(bi[bn]=Lr)});var Ur=Object.keys(bi);On.textureFormats=Ur;var xi=[];Object.keys(bi).forEach(function(bn){var Lr=bi[bn];xi[Lr]=bn});var ro=[];Object.keys($i).forEach(function(bn){var Lr=$i[bn];ro[Lr]=bn});var ai=[];Object.keys(ki).forEach(function(bn){var Lr=ki[bn];ai[Lr]=bn});var eo=[];Object.keys(Di).forEach(function(bn){var Lr=Di[bn];eo[Lr]=bn});var wi=[];Object.keys(hi).forEach(function(bn){var Lr=hi[bn];wi[Lr]=bn});var qi=Ur.reduce(function(bn,Lr){var vr=bi[Lr];return vr===pe||vr===we||vr===pe||vr===Je||vr===vo||vr===Na||Yt.ext_srgb&&(vr===Fa||vr===Ea)?bn[vr]=vr:vr===fn||Lr.indexOf("rgba")>=0?bn[vr]=Cc:bn[vr]=oe,bn},{});function si(){this.internalformat=Cc,this.format=Cc,this.type=pc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Br,this.width=0,this.height=0,this.channels=0}function vi(bn,Lr){bn.internalformat=Lr.internalformat,bn.format=Lr.format,bn.type=Lr.type,bn.compressed=Lr.compressed,bn.premultiplyAlpha=Lr.premultiplyAlpha,bn.flipY=Lr.flipY,bn.unpackAlignment=Lr.unpackAlignment,bn.colorSpace=Lr.colorSpace,bn.width=Lr.width,bn.height=Lr.height,bn.channels=Lr.channels}function Ho(bn,Lr){if(!(typeof Lr!="object"||!Lr)){if("premultiplyAlpha"in Lr&&(de.type(Lr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),bn.premultiplyAlpha=Lr.premultiplyAlpha),"flipY"in Lr&&(de.type(Lr.flipY,"boolean","invalid texture flip"),bn.flipY=Lr.flipY),"alignment"in Lr&&(de.oneOf(Lr.alignment,[1,2,4,8],"invalid texture unpack alignment"),bn.unpackAlignment=Lr.alignment),"colorSpace"in Lr&&(de.parameter(Lr.colorSpace,ji,"invalid colorSpace"),bn.colorSpace=ji[Lr.colorSpace]),"type"in Lr){var vr=Lr.type;de(Yt.oes_texture_float||!(vr==="float"||vr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),de(Yt.oes_texture_half_float||!(vr==="half float"||vr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),de(Yt.webgl_depth_texture||!(vr==="uint16"||vr==="uint32"||vr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(vr,$i,"invalid texture type"),bn.type=$i[vr]}var co=bn.width,wa=bn.height,qs=bn.channels,Ft=!1;"shape"in Lr?(de(Array.isArray(Lr.shape)&&Lr.shape.length>=2,"shape must be an array"),co=Lr.shape[0],wa=Lr.shape[1],Lr.shape.length===3&&(qs=Lr.shape[2],de(qs>0&&qs<=4,"invalid number of channels"),Ft=!0),de(co>=0&&co<=On.maxTextureSize,"invalid width"),de(wa>=0&&wa<=On.maxTextureSize,"invalid height")):("radius"in Lr&&(co=wa=Lr.radius,de(co>=0&&co<=On.maxTextureSize,"invalid radius")),"width"in Lr&&(co=Lr.width,de(co>=0&&co<=On.maxTextureSize,"invalid width")),"height"in Lr&&(wa=Lr.height,de(wa>=0&&wa<=On.maxTextureSize,"invalid height")),"channels"in Lr&&(qs=Lr.channels,de(qs>0&&qs<=4,"invalid number of channels"),Ft=!0)),bn.width=co|0,bn.height=wa|0,bn.channels=qs|0;var rn=!1;if("format"in Lr){var Rn=Lr.format;de(Yt.webgl_depth_texture||!(Rn==="depth"||Rn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(Rn,bi,"invalid texture format");var Tr=bn.internalformat=bi[Rn];bn.format=qi[Tr],Rn in $i&&("type"in Lr||(bn.type=$i[Rn])),Rn in Vi&&(bn.compressed=!0),rn=!0}!Ft&&rn?bn.channels=Wo[bn.format]:Ft&&!rn?bn.channels!==Xo[bn.format]&&(bn.format=bn.internalformat=Xo[bn.channels]):rn&&Ft&&de(bn.channels===Wo[bn.format],"number of channels inconsistent with specified format")}}function va(bn){Ue.pixelStorei(xt,bn.flipY),Ue.pixelStorei(Pn,bn.premultiplyAlpha),Ue.pixelStorei(ur,bn.colorSpace),Ue.pixelStorei(We,bn.unpackAlignment)}function Ki(){si.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ri(bn,Lr){var vr=null;if(nc(Lr)?vr=Lr:Lr&&(de.type(Lr,"object","invalid pixel data type"),Ho(bn,Lr),"x"in Lr&&(bn.xOffset=Lr.x|0),"y"in Lr&&(bn.yOffset=Lr.y|0),nc(Lr.data)&&(vr=Lr.data)),de(!bn.compressed||vr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Lr.copy){de(!vr,"can not specify copy and data field for the same texture");var co=ei.viewportWidth,wa=ei.viewportHeight;bn.width=bn.width||co-bn.xOffset,bn.height=bn.height||wa-bn.yOffset,bn.needsCopy=!0,de(bn.xOffset>=0&&bn.xOffset<co&&bn.yOffset>=0&&bn.yOffset<wa&&bn.width>0&&bn.width<=co&&bn.height>0&&bn.height<=wa,"copy texture read out of bounds")}else if(!vr)bn.width=bn.width||1,bn.height=bn.height||1,bn.channels=bn.channels||4;else if(W(vr))bn.channels=bn.channels||4,bn.data=vr,!("type"in Lr)&&bn.type===pc&&(bn.type=rh(vr));else if(vc(vr))bn.channels=bn.channels||4,Rd(bn,vr),bn.alignment=1,bn.needsFree=!0;else if(ya(vr)){var qs=vr.data;!Array.isArray(qs)&&bn.type===pc&&(bn.type=rh(qs));var Ft=vr.shape,rn=vr.stride,Rn,Tr,_r,jn,Jn,Vn;Ft.length===3?(_r=Ft[2],Vn=rn[2]):(de(Ft.length===2,"invalid ndarray pixel data, must be 2 or 3D"),_r=1,Vn=1),Rn=Ft[0],Tr=Ft[1],jn=rn[0],Jn=rn[1],bn.alignment=1,bn.width=Rn,bn.height=Tr,bn.channels=_r,bn.format=bn.internalformat=Xo[_r],bn.needsFree=!0,e0(bn,qs,jn,Jn,Vn,vr.offset)}else if(Md(vr)||Kh(vr)||Of(vr))Md(vr)||Kh(vr)?bn.element=vr:bn.element=vr.canvas,bn.width=bn.element.width,bn.height=bn.element.height,bn.channels=4;else if(mc(vr))bn.element=vr,bn.width=vr.width,bn.height=vr.height,bn.channels=4;else if(Jp(vr))bn.element=vr,bn.width=vr.naturalWidth,bn.height=vr.naturalHeight,bn.channels=4;else if(Sh(vr))bn.element=vr,bn.width=vr.videoWidth,bn.height=vr.videoHeight,bn.channels=4;else if(Ui(vr)){var on=bn.width||vr[0].length,Gn=bn.height||vr.length,$t=bn.channels;sl(vr[0][0])?$t=$t||vr[0][0].length:$t=$t||1;for(var er=ps.shape(vr),Nr=1,Dr=0;Dr<er.length;++Dr)Nr*=er[Dr];var gi=Pd(bn,Nr);ps.flatten(vr,er,"",gi),Lp(bn,gi),bn.alignment=1,bn.width=on,bn.height=Gn,bn.channels=$t,bn.format=bn.internalformat=Xo[$t],bn.needsFree=!0}bn.type===Jf?de(On.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):bn.type===Aa&&de(On.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Jr(bn,Lr,vr){var co=bn.element,wa=bn.data,qs=bn.internalformat,Ft=bn.format,rn=bn.type,Rn=bn.width,Tr=bn.height;va(bn),co?Ue.texImage2D(Lr,vr,Ft,Ft,rn,co):bn.compressed?Ue.compressedTexImage2D(Lr,vr,qs,Rn,Tr,0,wa):bn.needsCopy?(Mr(),Ue.copyTexImage2D(Lr,vr,Ft,bn.xOffset,bn.yOffset,Rn,Tr,0)):Ue.texImage2D(Lr,vr,Ft,Rn,Tr,0,Ft,rn,wa||null)}function zo(bn,Lr,vr,co,wa){var qs=bn.element,Ft=bn.data,rn=bn.internalformat,Rn=bn.format,Tr=bn.type,_r=bn.width,jn=bn.height;va(bn),qs?Ue.texSubImage2D(Lr,wa,vr,co,Rn,Tr,qs):bn.compressed?Ue.compressedTexSubImage2D(Lr,wa,vr,co,rn,_r,jn,Ft):bn.needsCopy?(Mr(),Ue.copyTexSubImage2D(Lr,wa,vr,co,bn.xOffset,bn.yOffset,_r,jn)):Ue.texSubImage2D(Lr,wa,vr,co,_r,jn,Rn,Tr,Ft)}var ie=[];function lo(){return ie.pop()||new Ki}function Ma(bn){bn.needsFree&&Sr.freeType(bn.data),Ki.call(bn),ie.push(bn)}function Hn(){si.call(this),this.genMipmaps=!1,this.mipmapHint=df,this.mipmask=0,this.images=Array(16)}function jr(bn,Lr,vr){var co=bn.images[0]=lo();bn.mipmask=1,co.width=bn.width=Lr,co.height=bn.height=vr,co.channels=bn.channels=4}function Qa(bn,Lr){var vr=null;if(nc(Lr))vr=bn.images[0]=lo(),vi(vr,bn),Ri(vr,Lr),bn.mipmask=1;else if(Ho(bn,Lr),Array.isArray(Lr.mipmap))for(var co=Lr.mipmap,wa=0;wa<co.length;++wa)vr=bn.images[wa]=lo(),vi(vr,bn),vr.width>>=wa,vr.height>>=wa,Ri(vr,co[wa]),bn.mipmask|=1<<wa;else vr=bn.images[0]=lo(),vi(vr,bn),Ri(vr,Lr),bn.mipmask=1;vi(bn,bn.images[0]),bn.compressed&&(bn.internalformat===_a||bn.internalformat===Ba||bn.internalformat===Ca||bn.internalformat===Xa)&&de(bn.width%4===0&&bn.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Jl(bn,Lr){for(var vr=bn.images,co=0;co<vr.length;++co){if(!vr[co])return;Jr(vr[co],Lr,co)}}var Xu=[];function Ja(){var bn=Xu.pop()||new Hn;si.call(bn),bn.mipmask=0;for(var Lr=0;Lr<16;++Lr)bn.images[Lr]=null;return bn}function cu(bn){for(var Lr=bn.images,vr=0;vr<Lr.length;++vr)Lr[vr]&&Ma(Lr[vr]),Lr[vr]=null;Xu.push(bn)}function il(){this.minFilter=eh,this.magFilter=eh,this.wrapS=Af,this.wrapT=Af,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=df}function Eu(bn,Lr){if("min"in Lr){var vr=Lr.min;de.parameter(vr,Di),bn.minFilter=Di[vr],Ii.indexOf(bn.minFilter)>=0&&!("faces"in Lr)&&(bn.genMipmaps=!0)}if("mag"in Lr){var co=Lr.mag;de.parameter(co,ki),bn.magFilter=ki[co]}var wa=bn.wrapS,qs=bn.wrapT;if("wrap"in Lr){var Ft=Lr.wrap;typeof Ft=="string"?(de.parameter(Ft,hi),wa=qs=hi[Ft]):Array.isArray(Ft)&&(de.parameter(Ft[0],hi),de.parameter(Ft[1],hi),wa=hi[Ft[0]],qs=hi[Ft[1]])}else{if("wrapS"in Lr){var rn=Lr.wrapS;de.parameter(rn,hi),wa=hi[rn]}if("wrapT"in Lr){var Rn=Lr.wrapT;de.parameter(Rn,hi),qs=hi[Rn]}}if(bn.wrapS=wa,bn.wrapT=qs,"anisotropic"in Lr){var Tr=Lr.anisotropic;de(typeof Tr=="number"&&Tr>=1&&Tr<=On.maxAnisotropic,"aniso samples must be between 1 and "),bn.anisotropic=Lr.anisotropic}if("mipmap"in Lr){var _r=!1;switch(typeof Lr.mipmap){case"string":de.parameter(Lr.mipmap,Li,"invalid mipmap hint"),bn.mipmapHint=Li[Lr.mipmap],bn.genMipmaps=!0,_r=!0;break;case"boolean":_r=bn.genMipmaps=Lr.mipmap;break;case"object":de(Array.isArray(Lr.mipmap),"invalid mipmap type"),bn.genMipmaps=!1,_r=!0;break;default:de.raise("invalid mipmap type")}_r&&!("min"in Lr)&&(bn.minFilter=xh)}}function Su(bn,Lr){Ue.texParameteri(Lr,ap,bn.minFilter),Ue.texParameteri(Lr,op,bn.magFilter),Ue.texParameteri(Lr,Mp,bn.wrapS),Ue.texParameteri(Lr,ip,bn.wrapT),Yt.ext_texture_filter_anisotropic&&Ue.texParameteri(Lr,ue,bn.anisotropic),bn.genMipmaps&&(Ue.hint(nh,bn.mipmapHint),Ue.generateMipmap(Lr))}var Ll=0,Yu={},Lc=On.maxTextureUnits,wu=Array(Lc).map(function(){return null});function ka(bn){si.call(this),this.mipmask=0,this.internalformat=Cc,this.id=Ll++,this.refCount=1,this.target=bn,this.texture=Ue.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new il,br.profile&&(this.stats={size:0})}function xc(bn){Ue.activeTexture(fi),Ue.bindTexture(bn.target,bn.texture)}function Os(){var bn=wu[0];bn?Ue.bindTexture(bn.target,bn.texture):Ue.bindTexture(_u,null)}function Jo(bn){var Lr=bn.texture;de(Lr,"must not double destroy texture");var vr=bn.unit,co=bn.target;vr>=0&&(Ue.activeTexture(fi+vr),Ue.bindTexture(co,null),wu[vr]=null),Ue.deleteTexture(Lr),bn.texture=null,bn.params=null,bn.pixels=null,bn.refCount=0,delete Yu[bn.id],Rr.textureCount--}D(ka.prototype,{bind:function(){var bn=this;bn.bindCount+=1;var Lr=bn.unit;if(Lr<0){for(var vr=0;vr<Lc;++vr){var co=wu[vr];if(co){if(co.bindCount>0)continue;co.unit=-1}wu[vr]=bn,Lr=vr;break}Lr>=Lc&&de.raise("insufficient number of texture units"),br.profile&&Rr.maxTextureUnits<Lr+1&&(Rr.maxTextureUnits=Lr+1),bn.unit=Lr,Ue.activeTexture(fi+Lr),Ue.bindTexture(bn.target,bn.texture)}return Lr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Jo(this)}});function es(bn,Lr){var vr=new ka(_u);Yu[vr.id]=vr,Rr.textureCount++;function co(Ft,rn){var Rn=vr.texInfo;il.call(Rn);var Tr=Ja();return typeof Ft=="number"?typeof rn=="number"?jr(Tr,Ft|0,rn|0):jr(Tr,Ft|0,Ft|0):Ft?(de.type(Ft,"object","invalid arguments to regl.texture"),Eu(Rn,Ft),Qa(Tr,Ft)):jr(Tr,1,1),Rn.genMipmaps&&(Tr.mipmask=(Tr.width<<1)-1),vr.mipmask=Tr.mipmask,vi(vr,Tr),de.texture2D(Rn,Tr,On),vr.internalformat=Tr.internalformat,co.width=Tr.width,co.height=Tr.height,xc(vr),Jl(Tr,_u),Su(Rn,_u),Os(),cu(Tr),br.profile&&(vr.stats.size=Oc(vr.internalformat,vr.type,Tr.width,Tr.height,Rn.genMipmaps,!1)),co.format=xi[vr.internalformat],co.type=ro[vr.type],co.mag=ai[Rn.magFilter],co.min=eo[Rn.minFilter],co.wrapS=wi[Rn.wrapS],co.wrapT=wi[Rn.wrapT],co}function wa(Ft,rn,Rn,Tr){de(!!Ft,"must specify image data");var _r=rn|0,jn=Rn|0,Jn=Tr|0,Vn=lo();return vi(Vn,vr),Vn.width=0,Vn.height=0,Ri(Vn,Ft),Vn.width=Vn.width||(vr.width>>Jn)-_r,Vn.height=Vn.height||(vr.height>>Jn)-jn,de(vr.type===Vn.type&&vr.format===Vn.format&&vr.internalformat===Vn.internalformat,"incompatible format for texture.subimage"),de(_r>=0&&jn>=0&&_r+Vn.width<=vr.width&&jn+Vn.height<=vr.height,"texture.subimage write out of bounds"),de(vr.mipmask&1<<Jn,"missing mipmap data"),de(Vn.data||Vn.element||Vn.needsCopy,"missing image data"),xc(vr),zo(Vn,_u,_r,jn,Jn),Os(),Ma(Vn),co}function qs(Ft,rn){var Rn=Ft|0,Tr=rn|0||Rn;if(Rn===vr.width&&Tr===vr.height)return co;co.width=vr.width=Rn,co.height=vr.height=Tr,xc(vr);for(var _r=0;vr.mipmask>>_r;++_r){var jn=Rn>>_r,Jn=Tr>>_r;if(!jn||!Jn)break;Ue.texImage2D(_u,_r,vr.format,jn,Jn,0,vr.format,vr.type,null)}return Os(),br.profile&&(vr.stats.size=Oc(vr.internalformat,vr.type,Rn,Tr,!1,!1)),co}return co(bn,Lr),co.subimage=wa,co.resize=qs,co._reglType="texture2d",co._texture=vr,br.profile&&(co.stats=vr.stats),co.destroy=function(){vr.decRef()},co}function fs(bn,Lr,vr,co,wa,qs){var Ft=new ka(Wc);Yu[Ft.id]=Ft,Rr.cubeCount++;var rn=new Array(6);function Rn(jn,Jn,Vn,on,Gn,$t){var er,Nr=Ft.texInfo;for(il.call(Nr),er=0;er<6;++er)rn[er]=Ja();if(typeof jn=="number"||!jn){var Dr=jn|0||1;for(er=0;er<6;++er)jr(rn[er],Dr,Dr)}else if(typeof jn=="object")if(Jn)Qa(rn[0],jn),Qa(rn[1],Jn),Qa(rn[2],Vn),Qa(rn[3],on),Qa(rn[4],Gn),Qa(rn[5],$t);else if(Eu(Nr,jn),Ho(Ft,jn),"faces"in jn){var gi=jn.faces;for(de(Array.isArray(gi)&&gi.length===6,"cube faces must be a length 6 array"),er=0;er<6;++er)de(typeof gi[er]=="object"&&!!gi[er],"invalid input for cube map face"),vi(rn[er],Ft),Qa(rn[er],gi[er])}else for(er=0;er<6;++er)Qa(rn[er],jn);else de.raise("invalid arguments to cube map");for(vi(Ft,rn[0]),On.npotTextureCube||de($h(Ft.width)&&$h(Ft.height),"your browser does not support non power or two texture dimensions"),Nr.genMipmaps?Ft.mipmask=(rn[0].width<<1)-1:Ft.mipmask=rn[0].mipmask,de.textureCube(Ft,Nr,rn,On),Ft.internalformat=rn[0].internalformat,Rn.width=rn[0].width,Rn.height=rn[0].height,xc(Ft),er=0;er<6;++er)Jl(rn[er],Mu+er);for(Su(Nr,Wc),Os(),br.profile&&(Ft.stats.size=Oc(Ft.internalformat,Ft.type,Rn.width,Rn.height,Nr.genMipmaps,!0)),Rn.format=xi[Ft.internalformat],Rn.type=ro[Ft.type],Rn.mag=ai[Nr.magFilter],Rn.min=eo[Nr.minFilter],Rn.wrapS=wi[Nr.wrapS],Rn.wrapT=wi[Nr.wrapT],er=0;er<6;++er)cu(rn[er]);return Rn}function Tr(jn,Jn,Vn,on,Gn){de(!!Jn,"must specify image data"),de(typeof jn=="number"&&jn===(jn|0)&&jn>=0&&jn<6,"invalid face");var $t=Vn|0,er=on|0,Nr=Gn|0,Dr=lo();return vi(Dr,Ft),Dr.width=0,Dr.height=0,Ri(Dr,Jn),Dr.width=Dr.width||(Ft.width>>Nr)-$t,Dr.height=Dr.height||(Ft.height>>Nr)-er,de(Ft.type===Dr.type&&Ft.format===Dr.format&&Ft.internalformat===Dr.internalformat,"incompatible format for texture.subimage"),de($t>=0&&er>=0&&$t+Dr.width<=Ft.width&&er+Dr.height<=Ft.height,"texture.subimage write out of bounds"),de(Ft.mipmask&1<<Nr,"missing mipmap data"),de(Dr.data||Dr.element||Dr.needsCopy,"missing image data"),xc(Ft),zo(Dr,Mu+jn,$t,er,Nr),Os(),Ma(Dr),Rn}function _r(jn){var Jn=jn|0;if(Jn!==Ft.width){Rn.width=Ft.width=Jn,Rn.height=Ft.height=Jn,xc(Ft);for(var Vn=0;Vn<6;++Vn)for(var on=0;Ft.mipmask>>on;++on)Ue.texImage2D(Mu+Vn,on,Ft.format,Jn>>on,Jn>>on,0,Ft.format,Ft.type,null);return Os(),br.profile&&(Ft.stats.size=Oc(Ft.internalformat,Ft.type,Rn.width,Rn.height,!1,!0)),Rn}}return Rn(bn,Lr,vr,co,wa,qs),Rn.subimage=Tr,Rn.resize=_r,Rn._reglType="textureCube",Rn._texture=Ft,br.profile&&(Rn.stats=Ft.stats),Rn.destroy=function(){Ft.decRef()},Rn}function fu(){for(var bn=0;bn<Lc;++bn)Ue.activeTexture(fi+bn),Ue.bindTexture(_u,null),wu[bn]=null;ia(Yu).forEach(Jo),Rr.cubeCount=0,Rr.textureCount=0}br.profile&&(Rr.getTotalTextureSize=function(){var bn=0;return Object.keys(Yu).forEach(function(Lr){bn+=Yu[Lr].stats.size}),bn});function Dh(){for(var bn=0;bn<Lc;++bn){var Lr=wu[bn];Lr&&(Lr.bindCount=0,Lr.unit=-1,wu[bn]=null)}ia(Yu).forEach(function(vr){vr.texture=Ue.createTexture(),Ue.bindTexture(vr.target,vr.texture);for(var co=0;co<32;++co)if(vr.mipmask&1<<co)if(vr.target===_u)Ue.texImage2D(_u,co,vr.internalformat,vr.width>>co,vr.height>>co,0,vr.internalformat,vr.type,null);else for(var wa=0;wa<6;++wa)Ue.texImage2D(Mu+wa,co,vr.internalformat,vr.width>>co,vr.height>>co,0,vr.internalformat,vr.type,null);Su(vr.texInfo,vr.target)})}return{create2D:es,createCube:fs,clear:fu,getTexture:function(bn){return null},restore:Dh}}var Sa=36161,gc=32854,pl=32855,vl=36194,Qh=33189,wh=36168,Mf=34041,rc=35907,Id=34836,ko=34842,Ao=34843,Ql=[];Ql[gc]=2,Ql[pl]=2,Ql[vl]=2,Ql[Qh]=2,Ql[wh]=1,Ql[Mf]=4,Ql[rc]=4,Ql[Id]=16,Ql[ko]=8,Ql[Ao]=6;function ju(Ue,Yt,On){return Ql[Ue]*Yt*On}var Vu=function(Ue,Yt,On,Mr,ei){var Rr={rgba4:gc,rgb565:vl,"rgb5 a1":pl,depth:Qh,stencil:wh,"depth stencil":Mf};Yt.ext_srgb&&(Rr.srgba=rc),Yt.ext_color_buffer_half_float&&(Rr.rgba16f=ko,Rr.rgb16f=Ao),Yt.webgl_color_buffer_float&&(Rr.rgba32f=Id);var br=[];Object.keys(Rr).forEach(function(bi){var Vi=Rr[bi];br[Vi]=bi});var Li=0,hi={};function ki(bi){this.id=Li++,this.refCount=1,this.renderbuffer=bi,this.format=gc,this.width=0,this.height=0,ei.profile&&(this.stats={size:0})}ki.prototype.decRef=function(){--this.refCount<=0&&Di(this)};function Di(bi){var Vi=bi.renderbuffer;de(Vi,"must not double destroy renderbuffer"),Ue.bindRenderbuffer(Sa,null),Ue.deleteRenderbuffer(Vi),bi.renderbuffer=null,bi.refCount=0,delete hi[bi.id],Mr.renderbufferCount--}function ji(bi,Vi){var dr=new ki(Ue.createRenderbuffer());hi[dr.id]=dr,Mr.renderbufferCount++;function Ur(ro,ai){var eo=0,wi=0,qi=gc;if(typeof ro=="object"&&ro){var si=ro;if("shape"in si){var vi=si.shape;de(Array.isArray(vi)&&vi.length>=2,"invalid renderbuffer shape"),eo=vi[0]|0,wi=vi[1]|0}else"radius"in si&&(eo=wi=si.radius|0),"width"in si&&(eo=si.width|0),"height"in si&&(wi=si.height|0);"format"in si&&(de.parameter(si.format,Rr,"invalid renderbuffer format"),qi=Rr[si.format])}else typeof ro=="number"?(eo=ro|0,typeof ai=="number"?wi=ai|0:wi=eo):ro?de.raise("invalid arguments to renderbuffer constructor"):eo=wi=1;if(de(eo>0&&wi>0&&eo<=On.maxRenderbufferSize&&wi<=On.maxRenderbufferSize,"invalid renderbuffer size"),!(eo===dr.width&&wi===dr.height&&qi===dr.format))return Ur.width=dr.width=eo,Ur.height=dr.height=wi,dr.format=qi,Ue.bindRenderbuffer(Sa,dr.renderbuffer),Ue.renderbufferStorage(Sa,qi,eo,wi),de(Ue.getError()===0,"invalid render buffer format"),ei.profile&&(dr.stats.size=ju(dr.format,dr.width,dr.height)),Ur.format=br[dr.format],Ur}function xi(ro,ai){var eo=ro|0,wi=ai|0||eo;return eo===dr.width&&wi===dr.height||(de(eo>0&&wi>0&&eo<=On.maxRenderbufferSize&&wi<=On.maxRenderbufferSize,"invalid renderbuffer size"),Ur.width=dr.width=eo,Ur.height=dr.height=wi,Ue.bindRenderbuffer(Sa,dr.renderbuffer),Ue.renderbufferStorage(Sa,dr.format,eo,wi),de(Ue.getError()===0,"invalid render buffer format"),ei.profile&&(dr.stats.size=ju(dr.format,dr.width,dr.height))),Ur}return Ur(bi,Vi),Ur.resize=xi,Ur._reglType="renderbuffer",Ur._renderbuffer=dr,ei.profile&&(Ur.stats=dr.stats),Ur.destroy=function(){dr.decRef()},Ur}ei.profile&&(Mr.getTotalRenderbufferSize=function(){var bi=0;return Object.keys(hi).forEach(function(Vi){bi+=hi[Vi].stats.size}),bi});function $i(){ia(hi).forEach(function(bi){bi.renderbuffer=Ue.createRenderbuffer(),Ue.bindRenderbuffer(Sa,bi.renderbuffer),Ue.renderbufferStorage(Sa,bi.format,bi.width,bi.height)}),Ue.bindRenderbuffer(Sa,null)}return{create:ji,clear:function(){ia(hi).forEach(Di)},restore:$i}},ml=36160,Zc=36161,Th=3553,Jh=34069,Ss=36064,bu=36096,k0=36128,Ah=33306,sp=36053,Ch=36054,ic=36055,ih=36057,yc=36061,t0=36193,Hf=5121,lp=5126,n0=6407,ed=6408,td=6402,r0=[n0,ed],vf=[];vf[ed]=4,vf[n0]=3;var Wf=[];Wf[Hf]=1,Wf[lp]=4,Wf[t0]=2;var i0=32854,nd=32855,Rf=36194,z0=33189,Gf=36168,mf=34041,o0=35907,_=34836,S=34842,x=34843,O=[i0,nd,Rf,o0,S,x,_],k={};k[sp]="complete",k[Ch]="incomplete attachment",k[ih]="incomplete dimensions",k[ic]="incomplete, missing attachment",k[yc]="unsupported";function Z(Ue,Yt,On,Mr,ei,Rr){var br={cur:null,next:null,dirty:!1,setFBO:null},Li=["rgba"],hi=["rgba4","rgb565","rgb5 a1"];Yt.ext_srgb&&hi.push("srgba"),Yt.ext_color_buffer_half_float&&hi.push("rgba16f","rgb16f"),Yt.webgl_color_buffer_float&&hi.push("rgba32f");var ki=["uint8"];Yt.oes_texture_half_float&&ki.push("half float","float16"),Yt.oes_texture_float&&ki.push("float","float32");function Di(Ki,Ri,Jr){this.target=Ki,this.texture=Ri,this.renderbuffer=Jr;var zo=0,ie=0;Ri?(zo=Ri.width,ie=Ri.height):Jr&&(zo=Jr.width,ie=Jr.height),this.width=zo,this.height=ie}function ji(Ki){Ki&&(Ki.texture&&Ki.texture._texture.decRef(),Ki.renderbuffer&&Ki.renderbuffer._renderbuffer.decRef())}function $i(Ki,Ri,Jr){if(Ki)if(Ki.texture){var zo=Ki.texture._texture,ie=Math.max(1,zo.width),lo=Math.max(1,zo.height);de(ie===Ri&&lo===Jr,"inconsistent width/height for supplied texture"),zo.refCount+=1}else{var Ma=Ki.renderbuffer._renderbuffer;de(Ma.width===Ri&&Ma.height===Jr,"inconsistent width/height for renderbuffer"),Ma.refCount+=1}}function bi(Ki,Ri){Ri&&(Ri.texture?Ue.framebufferTexture2D(ml,Ki,Ri.target,Ri.texture._texture.texture,0):Ue.framebufferRenderbuffer(ml,Ki,Zc,Ri.renderbuffer._renderbuffer.renderbuffer))}function Vi(Ki){var Ri=Th,Jr=null,zo=null,ie=Ki;typeof Ki=="object"&&(ie=Ki.data,"target"in Ki&&(Ri=Ki.target|0)),de.type(ie,"function","invalid attachment data");var lo=ie._reglType;return lo==="texture2d"?(Jr=ie,de(Ri===Th)):lo==="textureCube"?(Jr=ie,de(Ri>=Jh&&Ri<Jh+6,"invalid cube map target")):lo==="renderbuffer"?(zo=ie,Ri=Zc):de.raise("invalid regl object for attachment"),new Di(Ri,Jr,zo)}function dr(Ki,Ri,Jr,zo,ie){if(Jr){var lo=Mr.create2D({width:Ki,height:Ri,format:zo,type:ie});return lo._texture.refCount=0,new Di(Th,lo,null)}else{var Ma=ei.create({width:Ki,height:Ri,format:zo});return Ma._renderbuffer.refCount=0,new Di(Zc,null,Ma)}}function Ur(Ki){return Ki&&(Ki.texture||Ki.renderbuffer)}function xi(Ki,Ri,Jr){Ki&&(Ki.texture?Ki.texture.resize(Ri,Jr):Ki.renderbuffer&&Ki.renderbuffer.resize(Ri,Jr),Ki.width=Ri,Ki.height=Jr)}var ro=0,ai={};function eo(){this.id=ro++,ai[this.id]=this,this.framebuffer=Ue.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function wi(Ki){Ki.colorAttachments.forEach(ji),ji(Ki.depthAttachment),ji(Ki.stencilAttachment),ji(Ki.depthStencilAttachment)}function qi(Ki){var Ri=Ki.framebuffer;de(Ri,"must not double destroy framebuffer"),Ue.deleteFramebuffer(Ri),Ki.framebuffer=null,Rr.framebufferCount--,delete ai[Ki.id]}function si(Ki){var Ri;Ue.bindFramebuffer(ml,Ki.framebuffer);var Jr=Ki.colorAttachments;for(Ri=0;Ri<Jr.length;++Ri)bi(Ss+Ri,Jr[Ri]);for(Ri=Jr.length;Ri<On.maxColorAttachments;++Ri)Ue.framebufferTexture2D(ml,Ss+Ri,Th,null,0);Ue.framebufferTexture2D(ml,Ah,Th,null,0),Ue.framebufferTexture2D(ml,bu,Th,null,0),Ue.framebufferTexture2D(ml,k0,Th,null,0),bi(bu,Ki.depthAttachment),bi(k0,Ki.stencilAttachment),bi(Ah,Ki.depthStencilAttachment);var zo=Ue.checkFramebufferStatus(ml);!Ue.isContextLost()&&zo!==sp&&de.raise("framebuffer configuration not supported, status = "+k[zo]),Ue.bindFramebuffer(ml,br.next?br.next.framebuffer:null),br.cur=br.next,Ue.getError()}function vi(Ki,Ri){var Jr=new eo;Rr.framebufferCount++;function zo(lo,Ma){var Hn;de(br.next!==Jr,"can not update framebuffer which is currently in use");var jr=0,Qa=0,Jl=!0,Xu=!0,Ja=null,cu=!0,il="rgba",Eu="uint8",Su=1,Ll=null,Yu=null,Lc=null,wu=!1;if(typeof lo=="number")jr=lo|0,Qa=Ma|0||jr;else if(!lo)jr=Qa=1;else{de.type(lo,"object","invalid arguments for framebuffer");var ka=lo;if("shape"in ka){var xc=ka.shape;de(Array.isArray(xc)&&xc.length>=2,"invalid shape for framebuffer"),jr=xc[0],Qa=xc[1]}else"radius"in ka&&(jr=Qa=ka.radius),"width"in ka&&(jr=ka.width),"height"in ka&&(Qa=ka.height);("color"in ka||"colors"in ka)&&(Ja=ka.color||ka.colors,Array.isArray(Ja)&&de(Ja.length===1||Yt.webgl_draw_buffers,"multiple render targets not supported")),Ja||("colorCount"in ka&&(Su=ka.colorCount|0,de(Su>0,"invalid color buffer count")),"colorTexture"in ka&&(cu=!!ka.colorTexture,il="rgba4"),"colorType"in ka&&(Eu=ka.colorType,cu?(de(Yt.oes_texture_float||!(Eu==="float"||Eu==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),de(Yt.oes_texture_half_float||!(Eu==="half float"||Eu==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Eu==="half float"||Eu==="float16"?(de(Yt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),il="rgba16f"):(Eu==="float"||Eu==="float32")&&(de(Yt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),il="rgba32f"),de.oneOf(Eu,ki,"invalid color type")),"colorFormat"in ka&&(il=ka.colorFormat,Li.indexOf(il)>=0?cu=!0:hi.indexOf(il)>=0?cu=!1:cu?de.oneOf(ka.colorFormat,Li,"invalid color format for texture"):de.oneOf(ka.colorFormat,hi,"invalid color format for renderbuffer"))),("depthTexture"in ka||"depthStencilTexture"in ka)&&(wu=!!(ka.depthTexture||ka.depthStencilTexture),de(!wu||Yt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in ka&&(typeof ka.depth=="boolean"?Jl=ka.depth:(Ll=ka.depth,Xu=!1)),"stencil"in ka&&(typeof ka.stencil=="boolean"?Xu=ka.stencil:(Yu=ka.stencil,Jl=!1)),"depthStencil"in ka&&(typeof ka.depthStencil=="boolean"?Jl=Xu=ka.depthStencil:(Lc=ka.depthStencil,Jl=!1,Xu=!1))}var Os=null,Jo=null,es=null,fs=null;if(Array.isArray(Ja))Os=Ja.map(Vi);else if(Ja)Os=[Vi(Ja)];else for(Os=new Array(Su),Hn=0;Hn<Su;++Hn)Os[Hn]=dr(jr,Qa,cu,il,Eu);de(Yt.webgl_draw_buffers||Os.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),de(Os.length<=On.maxColorAttachments,"too many color attachments, not supported"),jr=jr||Os[0].width,Qa=Qa||Os[0].height,Ll?Jo=Vi(Ll):Jl&&!Xu&&(Jo=dr(jr,Qa,wu,"depth","uint32")),Yu?es=Vi(Yu):Xu&&!Jl&&(es=dr(jr,Qa,!1,"stencil","uint8")),Lc?fs=Vi(Lc):!Ll&&!Yu&&Xu&&Jl&&(fs=dr(jr,Qa,wu,"depth stencil","depth stencil")),de(!!Ll+!!Yu+!!Lc<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var fu=null;for(Hn=0;Hn<Os.length;++Hn)if($i(Os[Hn],jr,Qa),de(!Os[Hn]||Os[Hn].texture&&r0.indexOf(Os[Hn].texture._texture.format)>=0||Os[Hn].renderbuffer&&O.indexOf(Os[Hn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Hn+" is invalid"),Os[Hn]&&Os[Hn].texture){var Dh=vf[Os[Hn].texture._texture.format]*Wf[Os[Hn].texture._texture.type];fu===null?fu=Dh:de(fu===Dh,"all color attachments much have the same number of bits per pixel.")}return $i(Jo,jr,Qa),de(!Jo||Jo.texture&&Jo.texture._texture.format===td||Jo.renderbuffer&&Jo.renderbuffer._renderbuffer.format===z0,"invalid depth attachment for framebuffer object"),$i(es,jr,Qa),de(!es||es.renderbuffer&&es.renderbuffer._renderbuffer.format===Gf,"invalid stencil attachment for framebuffer object"),$i(fs,jr,Qa),de(!fs||fs.texture&&fs.texture._texture.format===mf||fs.renderbuffer&&fs.renderbuffer._renderbuffer.format===mf,"invalid depth-stencil attachment for framebuffer object"),wi(Jr),Jr.width=jr,Jr.height=Qa,Jr.colorAttachments=Os,Jr.depthAttachment=Jo,Jr.stencilAttachment=es,Jr.depthStencilAttachment=fs,zo.color=Os.map(Ur),zo.depth=Ur(Jo),zo.stencil=Ur(es),zo.depthStencil=Ur(fs),zo.width=Jr.width,zo.height=Jr.height,si(Jr),zo}function ie(lo,Ma){de(br.next!==Jr,"can not resize a framebuffer which is currently in use");var Hn=Math.max(lo|0,1),jr=Math.max(Ma|0||Hn,1);if(Hn===Jr.width&&jr===Jr.height)return zo;for(var Qa=Jr.colorAttachments,Jl=0;Jl<Qa.length;++Jl)xi(Qa[Jl],Hn,jr);return xi(Jr.depthAttachment,Hn,jr),xi(Jr.stencilAttachment,Hn,jr),xi(Jr.depthStencilAttachment,Hn,jr),Jr.width=zo.width=Hn,Jr.height=zo.height=jr,si(Jr),zo}return zo(Ki,Ri),D(zo,{resize:ie,_reglType:"framebuffer",_framebuffer:Jr,destroy:function(){qi(Jr),wi(Jr)},use:function(lo){br.setFBO({framebuffer:zo},lo)}})}function Ho(Ki){var Ri=Array(6);function Jr(ie){var lo;de(Ri.indexOf(br.next)<0,"can not update framebuffer which is currently in use");var Ma={color:null},Hn=0,jr=null,Qa="rgba",Jl="uint8",Xu=1;if(typeof ie=="number")Hn=ie|0;else if(!ie)Hn=1;else{de.type(ie,"object","invalid arguments for framebuffer");var Ja=ie;if("shape"in Ja){var cu=Ja.shape;de(Array.isArray(cu)&&cu.length>=2,"invalid shape for framebuffer"),de(cu[0]===cu[1],"cube framebuffer must be square"),Hn=cu[0]}else"radius"in Ja&&(Hn=Ja.radius|0),"width"in Ja?(Hn=Ja.width|0,"height"in Ja&&de(Ja.height===Hn,"must be square")):"height"in Ja&&(Hn=Ja.height|0);("color"in Ja||"colors"in Ja)&&(jr=Ja.color||Ja.colors,Array.isArray(jr)&&de(jr.length===1||Yt.webgl_draw_buffers,"multiple render targets not supported")),jr||("colorCount"in Ja&&(Xu=Ja.colorCount|0,de(Xu>0,"invalid color buffer count")),"colorType"in Ja&&(de.oneOf(Ja.colorType,ki,"invalid color type"),Jl=Ja.colorType),"colorFormat"in Ja&&(Qa=Ja.colorFormat,de.oneOf(Ja.colorFormat,Li,"invalid color format for texture"))),"depth"in Ja&&(Ma.depth=Ja.depth),"stencil"in Ja&&(Ma.stencil=Ja.stencil),"depthStencil"in Ja&&(Ma.depthStencil=Ja.depthStencil)}var il;if(jr)if(Array.isArray(jr))for(il=[],lo=0;lo<jr.length;++lo)il[lo]=jr[lo];else il=[jr];else{il=Array(Xu);var Eu={radius:Hn,format:Qa,type:Jl};for(lo=0;lo<Xu;++lo)il[lo]=Mr.createCube(Eu)}for(Ma.color=Array(il.length),lo=0;lo<il.length;++lo){var Su=il[lo];de(typeof Su=="function"&&Su._reglType==="textureCube","invalid cube map"),Hn=Hn||Su.width,de(Su.width===Hn&&Su.height===Hn,"invalid cube map shape"),Ma.color[lo]={target:Jh,data:il[lo]}}for(lo=0;lo<6;++lo){for(var Ll=0;Ll<il.length;++Ll)Ma.color[Ll].target=Jh+lo;lo>0&&(Ma.depth=Ri[0].depth,Ma.stencil=Ri[0].stencil,Ma.depthStencil=Ri[0].depthStencil),Ri[lo]?Ri[lo](Ma):Ri[lo]=vi(Ma)}return D(Jr,{width:Hn,height:Hn,color:il})}function zo(ie){var lo,Ma=ie|0;if(de(Ma>0&&Ma<=On.maxCubeMapSize,"invalid radius for cube fbo"),Ma===Jr.width)return Jr;var Hn=Jr.color;for(lo=0;lo<Hn.length;++lo)Hn[lo].resize(Ma);for(lo=0;lo<6;++lo)Ri[lo].resize(Ma);return Jr.width=Jr.height=Ma,Jr}return Jr(Ki),D(Jr,{faces:Ri,resize:zo,_reglType:"framebufferCube",destroy:function(){Ri.forEach(function(ie){ie.destroy()})}})}function va(){br.cur=null,br.next=null,br.dirty=!0,ia(ai).forEach(function(Ki){Ki.framebuffer=Ue.createFramebuffer(),si(Ki)})}return D(br,{getFramebuffer:function(Ki){if(typeof Ki=="function"&&Ki._reglType==="framebuffer"){var Ri=Ki._framebuffer;if(Ri instanceof eo)return Ri}return null},create:vi,createCube:Ho,clear:function(){ia(ai).forEach(qi)},restore:va})}var K=5126,ge=34962;function Ve(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=K,this.offset=0,this.stride=0,this.divisor=0}function ct(Ue,Yt,On,Mr,ei){for(var Rr=On.maxAttributes,br=new Array(Rr),Li=0;Li<Rr;++Li)br[Li]=new Ve;var hi=0,ki={},Di={Record:Ve,scope:{},state:br,currentVAO:null,targetVAO:null,restore:$i()?ai:function(){},createVAO:eo,getVAO:Vi,destroyBuffer:ji,setVAO:$i()?dr:Ur,clear:$i()?xi:function(){}};function ji(wi){for(var qi=0;qi<br.length;++qi){var si=br[qi];si.buffer===wi&&(Ue.disableVertexAttribArray(qi),si.buffer=null)}}function $i(){return Yt.oes_vertex_array_object}function bi(){return Yt.angle_instanced_arrays}function Vi(wi){return typeof wi=="function"&&wi._vao?wi._vao:null}function dr(wi){if(wi!==Di.currentVAO){var qi=$i();wi?qi.bindVertexArrayOES(wi.vao):qi.bindVertexArrayOES(null),Di.currentVAO=wi}}function Ur(wi){if(wi!==Di.currentVAO){if(wi)wi.bindAttrs();else for(var qi=bi(),si=0;si<br.length;++si){var vi=br[si];vi.buffer?(Ue.enableVertexAttribArray(si),Ue.vertexAttribPointer(si,vi.size,vi.type,vi.normalized,vi.stride,vi.offfset),qi&&qi.vertexAttribDivisorANGLE(si,vi.divisor)):(Ue.disableVertexAttribArray(si),Ue.vertexAttrib4f(si,vi.x,vi.y,vi.z,vi.w))}Di.currentVAO=wi}}function xi(){ia(ki).forEach(function(wi){wi.destroy()})}function ro(){this.id=++hi,this.attributes=[];var wi=$i();wi?this.vao=wi.createVertexArrayOES():this.vao=null,ki[this.id]=this,this.buffers=[]}ro.prototype.bindAttrs=function(){for(var wi=bi(),qi=this.attributes,si=0;si<qi.length;++si){var vi=qi[si];vi.buffer?(Ue.enableVertexAttribArray(si),Ue.bindBuffer(ge,vi.buffer.buffer),Ue.vertexAttribPointer(si,vi.size,vi.type,vi.normalized,vi.stride,vi.offset),wi&&wi.vertexAttribDivisorANGLE(si,vi.divisor)):(Ue.disableVertexAttribArray(si),Ue.vertexAttrib4f(si,vi.x,vi.y,vi.z,vi.w))}for(var Ho=qi.length;Ho<Rr;++Ho)Ue.disableVertexAttribArray(Ho)},ro.prototype.refresh=function(){var wi=$i();wi&&(wi.bindVertexArrayOES(this.vao),this.bindAttrs(),Di.currentVAO=this)},ro.prototype.destroy=function(){if(this.vao){var wi=$i();this===Di.currentVAO&&(Di.currentVAO=null,wi.bindVertexArrayOES(null)),wi.deleteVertexArrayOES(this.vao),this.vao=null}ki[this.id]&&(delete ki[this.id],Mr.vaoCount-=1)};function ai(){var wi=$i();wi&&ia(ki).forEach(function(qi){qi.refresh()})}function eo(wi){var qi=new ro;Mr.vaoCount+=1;function si(vi){de(Array.isArray(vi),"arguments to vertex array constructor must be an array"),de(vi.length<Rr,"too many attributes"),de(vi.length>0,"must specify at least one attribute");for(var Ho=0;Ho<qi.buffers.length;++Ho)qi.buffers[Ho].destroy();qi.buffers.length=0;var va=qi.attributes;va.length=vi.length;for(var Ki=0;Ki<vi.length;++Ki){var Ri=vi[Ki],Jr=va[Ki]=new Ve;if(Array.isArray(Ri)||W(Ri)||ya(Ri)){var zo=ei.create(Ri,ge,!1,!0);Jr.buffer=ei.getBuffer(zo),Jr.size=Jr.buffer.dimension|0,Jr.normalized=!1,Jr.type=Jr.buffer.dtype,Jr.offset=0,Jr.stride=0,Jr.divisor=0,Jr.state=1,qi.buffers.push(zo)}else ei.getBuffer(Ri)?(Jr.buffer=ei.getBuffer(Ri),Jr.size=Jr.buffer.dimension|0,Jr.normalized=!1,Jr.type=Jr.buffer.dtype,Jr.offset=0,Jr.stride=0,Jr.divisor=0,Jr.state=1):ei.getBuffer(Ri.buffer)?(Jr.buffer=ei.getBuffer(Ri.buffer),Jr.size=(+Ri.size||Jr.buffer.dimension)|0,Jr.normalized=!!Ri.normalized||!1,"type"in Ri?(de.parameter(Ri.type,ou,"invalid buffer type"),Jr.type=ou[Ri.type]):Jr.type=Jr.buffer.dtype,Jr.offset=(Ri.offset||0)|0,Jr.stride=(Ri.stride||0)|0,Jr.divisor=(Ri.divisor||0)|0,Jr.state=1,de(Jr.size>=1&&Jr.size<=4,"size must be between 1 and 4"),de(Jr.offset>=0,"invalid offset"),de(Jr.stride>=0&&Jr.stride<=255,"stride must be between 0 and 255"),de(Jr.divisor>=0,"divisor must be positive"),de(!Jr.divisor||!!Yt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ri?(de(Ki>0,"first attribute must not be a constant"),Jr.x=+Ri.x||0,Jr.y=+Ri.y||0,Jr.z=+Ri.z||0,Jr.w=+Ri.w||0,Jr.state=2):de(!1,"invalid attribute spec for location "+Ki)}return qi.refresh(),si}return si.destroy=function(){qi.destroy()},si._vao=qi,si._reglType="vao",si(wi)}return Di}var jt=35632,Vt=35633,Xt=35718,En=35721;function gn(Ue,Yt,On,Mr){var ei={},Rr={};function br(dr,Ur,xi,ro){this.name=dr,this.id=Ur,this.location=xi,this.info=ro}function Li(dr,Ur){for(var xi=0;xi<dr.length;++xi)if(dr[xi].id===Ur.id){dr[xi].location=Ur.location;return}dr.push(Ur)}function hi(dr,Ur,xi){var ro=dr===jt?ei:Rr,ai=ro[Ur];if(!ai){var eo=Yt.str(Ur);ai=Ue.createShader(dr),Ue.shaderSource(ai,eo),Ue.compileShader(ai),de.shaderError(Ue,ai,eo,dr,xi),ro[Ur]=ai}return ai}var ki={},Di=[],ji=0;function $i(dr,Ur){this.id=ji++,this.fragId=dr,this.vertId=Ur,this.program=null,this.uniforms=[],this.attributes=[],Mr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function bi(dr,Ur,xi){var ro,ai,eo=hi(jt,dr.fragId),wi=hi(Vt,dr.vertId),qi=dr.program=Ue.createProgram();if(Ue.attachShader(qi,eo),Ue.attachShader(qi,wi),xi)for(ro=0;ro<xi.length;++ro){var si=xi[ro];Ue.bindAttribLocation(qi,si[0],si[1])}Ue.linkProgram(qi),de.linkError(Ue,qi,Yt.str(dr.fragId),Yt.str(dr.vertId),Ur);var vi=Ue.getProgramParameter(qi,Xt);Mr.profile&&(dr.stats.uniformsCount=vi);var Ho=dr.uniforms;for(ro=0;ro<vi;++ro)if(ai=Ue.getActiveUniform(qi,ro),ai)if(ai.size>1)for(var va=0;va<ai.size;++va){var Ki=ai.name.replace("[0]","["+va+"]");Li(Ho,new br(Ki,Yt.id(Ki),Ue.getUniformLocation(qi,Ki),ai))}else Li(Ho,new br(ai.name,Yt.id(ai.name),Ue.getUniformLocation(qi,ai.name),ai));var Ri=Ue.getProgramParameter(qi,En);Mr.profile&&(dr.stats.attributesCount=Ri);var Jr=dr.attributes;for(ro=0;ro<Ri;++ro)ai=Ue.getActiveAttrib(qi,ro),ai&&Li(Jr,new br(ai.name,Yt.id(ai.name),Ue.getAttribLocation(qi,ai.name),ai))}Mr.profile&&(On.getMaxUniformsCount=function(){var dr=0;return Di.forEach(function(Ur){Ur.stats.uniformsCount>dr&&(dr=Ur.stats.uniformsCount)}),dr},On.getMaxAttributesCount=function(){var dr=0;return Di.forEach(function(Ur){Ur.stats.attributesCount>dr&&(dr=Ur.stats.attributesCount)}),dr});function Vi(){ei={},Rr={};for(var dr=0;dr<Di.length;++dr)bi(Di[dr],null,Di[dr].attributes.map(function(Ur){return[Ur.location,Ur.name]}))}return{clear:function(){var dr=Ue.deleteShader.bind(Ue);ia(ei).forEach(dr),ei={},ia(Rr).forEach(dr),Rr={},Di.forEach(function(Ur){Ue.deleteProgram(Ur.program)}),Di.length=0,ki={},On.shaderCount=0},program:function(dr,Ur,xi,ro){de.command(dr>=0,"missing vertex shader",xi),de.command(Ur>=0,"missing fragment shader",xi);var ai=ki[Ur];ai||(ai=ki[Ur]={});var eo=ai[dr];if(eo&&!ro)return eo;var wi=new $i(Ur,dr);return On.shaderCount++,bi(wi,xi,ro),eo||(ai[dr]=wi),Di.push(wi),wi},restore:Vi,shader:hi,frag:-1,vert:-1}}var kn=6408,un=5121,zn=3333,tr=5126;function gr(Ue,Yt,On,Mr,ei,Rr,br){function Li(Di){var ji;Yt.next===null?(de(ei.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ji=un):(de(Yt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ji=Yt.next.colorAttachments[0].texture._texture.type,Rr.oes_texture_float?(de(ji===un||ji===tr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ji===tr&&de(br.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):de(ji===un,"Reading from a framebuffer is only allowed for the type 'uint8'"));var $i=0,bi=0,Vi=Mr.framebufferWidth,dr=Mr.framebufferHeight,Ur=null;W(Di)?Ur=Di:Di&&(de.type(Di,"object","invalid arguments to regl.read()"),$i=Di.x|0,bi=Di.y|0,de($i>=0&&$i<Mr.framebufferWidth,"invalid x offset for regl.read"),de(bi>=0&&bi<Mr.framebufferHeight,"invalid y offset for regl.read"),Vi=(Di.width||Mr.framebufferWidth-$i)|0,dr=(Di.height||Mr.framebufferHeight-bi)|0,Ur=Di.data||null),Ur&&(ji===un?de(Ur instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ji===tr&&de(Ur instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),de(Vi>0&&Vi+$i<=Mr.framebufferWidth,"invalid width for read pixels"),de(dr>0&&dr+bi<=Mr.framebufferHeight,"invalid height for read pixels"),On();var xi=Vi*dr*4;return Ur||(ji===un?Ur=new Uint8Array(xi):ji===tr&&(Ur=Ur||new Float32Array(xi))),de.isTypedArray(Ur,"data buffer for regl.read() must be a typedarray"),de(Ur.byteLength>=xi,"data buffer for regl.read() too small"),Ue.pixelStorei(zn,4),Ue.readPixels($i,bi,Vi,dr,kn,ji,Ur),Ur}function hi(Di){var ji;return Yt.setFBO({framebuffer:Di.framebuffer},function(){ji=Li(Di)}),ji}function ki(Di){return!Di||!("framebuffer"in Di)?Li(Di):hi(Di)}return ki}function Ir(Ue){return Array.prototype.slice.call(Ue)}function Or(Ue){return Ir(Ue).join("")}function zr(){var Ue=0,Yt=[],On=[];function Mr(ji){for(var $i=0;$i<On.length;++$i)if(On[$i]===ji)return Yt[$i];var bi="g"+Ue++;return Yt.push(bi),On.push(ji),bi}function ei(){var ji=[];function $i(){ji.push.apply(ji,Ir(arguments))}var bi=[];function Vi(){var dr="v"+Ue++;return bi.push(dr),arguments.length>0&&(ji.push(dr,"="),ji.push.apply(ji,Ir(arguments)),ji.push(";")),dr}return D($i,{def:Vi,toString:function(){return Or([bi.length>0?"var "+bi.join(",")+";":"",Or(ji)])}})}function Rr(){var ji=ei(),$i=ei(),bi=ji.toString,Vi=$i.toString;function dr(Ur,xi){$i(Ur,xi,"=",ji.def(Ur,xi),";")}return D(function(){ji.apply(ji,Ir(arguments))},{def:ji.def,entry:ji,exit:$i,save:dr,set:function(Ur,xi,ro){dr(Ur,xi),ji(Ur,xi,"=",ro,";")},toString:function(){return bi()+Vi()}})}function br(){var ji=Or(arguments),$i=Rr(),bi=Rr(),Vi=$i.toString,dr=bi.toString;return D($i,{then:function(){return $i.apply($i,Ir(arguments)),this},else:function(){return bi.apply(bi,Ir(arguments)),this},toString:function(){var Ur=dr();return Ur&&(Ur="else{"+Ur+"}"),Or(["if(",ji,"){",Vi(),"}",Ur])}})}var Li=ei(),hi={};function ki(ji,$i){var bi=[];function Vi(){var ai="a"+bi.length;return bi.push(ai),ai}$i=$i||0;for(var dr=0;dr<$i;++dr)Vi();var Ur=Rr(),xi=Ur.toString,ro=hi[ji]=D(Ur,{arg:Vi,toString:function(){return Or(["function(",bi.join(),"){",xi(),"}"])}});return ro}function Di(){var ji=['"use strict";',Li,"return {"];Object.keys(hi).forEach(function(Vi){ji.push('"',Vi,'":',hi[Vi].toString(),",")}),ji.push("}");var $i=Or(ji).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),bi=Function.apply(null,Yt.concat($i));return bi.apply(null,On)}return{global:Li,link:Mr,block:ei,proc:ki,scope:Rr,cond:br,compile:Di}}var ii="xyzw".split(""),Hi=5121,Fi=1,po=2,Vo=0,$r=1,Kt=2,Ya=3,yo=4,Qo="dither",Oa="blend.enable",fa="blend.color",Go="blend.equation",xa="blend.func",aa="depth.enable",ta="depth.func",Vl="depth.range",Ls="depth.mask",lu="colorMask",Us="cull.enable",ll="cull.face",Il="frontFace",Mc="lineWidth",Hu="polygonOffset.enable",Zf="polygonOffset.offset",_c="sample.alpha",Xf="sample.enable",Xc="sample.coverage",Dp="stencil.enable",up="stencil.mask",Oh="stencil.func",Mi="stencil.opFront",Rc="stencil.opBack",Yf="scissor.enable",rd="scissor.box",Wu="viewport",xl="profile",oc="framebuffer",Pf="vert",If="frag",rs="elements",Gu="primitive",xu="count",Lf="offset",cp="instances",Ld="vao",Sv="Width",Mh="Height",oh=oc+Sv,gf=oc+Mh,U0=Wu+Sv,gm=Wu+Mh,Np="drawingBuffer",Yc=Np+Sv,Dy=Np+Mh,a0=[xa,Go,Oh,Mi,Rc,Xc,Wu,rd,Zf],Fp=34962,Ny=34963,Fy=35632,ym=35633,j0=3553,By=34067,_m=2884,xg=3042,Dd=3024,s0=2960,Eg=2929,ky=3089,c1=32823,bm=32926,xm=32928,Em=5126,Bp=35664,l0=35665,wv=35666,Rh=5124,V0=35667,Hl=35668,kp=35669,u0=35670,Nd=35671,Fd=35672,Bd=35673,kd=35674,zd=35675,fp=35676,c0=35678,zp=35680,Sg=4,Zu=1028,Ph=1029,H0=2304,W0=2305,wg=32775,Sm=32776,ah=519,Ud=7680,wm=0,G0=1,jd=32774,Tg=513,f0=36160,Ag=36064,Ih={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Vd=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Df={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Hd={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Tm={frag:Fy,vert:ym},Lh={cw:H0,ccw:W0};function Z0(Ue){return Array.isArray(Ue)||W(Ue)||ya(Ue)}function X0(Ue){return Ue.sort(function(Yt,On){return Yt===Wu?-1:On===Wu?1:Yt<On?-1:1})}function $c(Ue,Yt,On,Mr){this.thisDep=Ue,this.contextDep=Yt,this.propDep=On,this.append=Mr}function Pc(Ue){return Ue&&!(Ue.thisDep||Ue.contextDep||Ue.propDep)}function uu(Ue){return new $c(!1,!1,!1,Ue)}function Nf(Ue,Yt){var On=Ue.type;if(On===Vo){var Mr=Ue.data.length;return new $c(!0,Mr>=1,Mr>=2,Yt)}else if(On===yo){var ei=Ue.data;return new $c(ei.thisDep,ei.contextDep,ei.propDep,Yt)}else return new $c(On===Ya,On===Kt,On===$r,Yt)}var Y0=new $c(!1,!1,!1,function(){});function rl(Ue,Yt,On,Mr,ei,Rr,br,Li,hi,ki,Di,ji,$i,bi,Vi){var dr=ki.Record,Ur={add:32774,subtract:32778,"reverse subtract":32779};On.ext_blend_minmax&&(Ur.min=wg,Ur.max=Sm);var xi=On.angle_instanced_arrays,ro=On.webgl_draw_buffers,ai={dirty:!0,profile:Vi.profile},eo={},wi=[],qi={},si={};function vi(Ft){return Ft.replace(".","_")}function Ho(Ft,rn,Rn){var Tr=vi(Ft);wi.push(Ft),eo[Tr]=ai[Tr]=!!Rn,qi[Tr]=rn}function va(Ft,rn,Rn){var Tr=vi(Ft);wi.push(Ft),Array.isArray(Rn)?(ai[Tr]=Rn.slice(),eo[Tr]=Rn.slice()):ai[Tr]=eo[Tr]=Rn,si[Tr]=rn}Ho(Qo,Dd),Ho(Oa,xg),va(fa,"blendColor",[0,0,0,0]),va(Go,"blendEquationSeparate",[jd,jd]),va(xa,"blendFuncSeparate",[G0,wm,G0,wm]),Ho(aa,Eg,!0),va(ta,"depthFunc",Tg),va(Vl,"depthRange",[0,1]),va(Ls,"depthMask",!0),va(lu,lu,[!0,!0,!0,!0]),Ho(Us,_m),va(ll,"cullFace",Ph),va(Il,Il,W0),va(Mc,Mc,1),Ho(Hu,c1),va(Zf,"polygonOffset",[0,0]),Ho(_c,bm),Ho(Xf,xm),va(Xc,"sampleCoverage",[1,!1]),Ho(Dp,s0),va(up,"stencilMask",-1),va(Oh,"stencilFunc",[ah,0,-1]),va(Mi,"stencilOpSeparate",[Zu,Ud,Ud,Ud]),va(Rc,"stencilOpSeparate",[Ph,Ud,Ud,Ud]),Ho(Yf,ky),va(rd,"scissor",[0,0,Ue.drawingBufferWidth,Ue.drawingBufferHeight]),va(Wu,Wu,[0,0,Ue.drawingBufferWidth,Ue.drawingBufferHeight]);var Ki={gl:Ue,context:$i,strings:Yt,next:eo,current:ai,draw:ji,elements:Rr,buffer:ei,shader:Di,attributes:ki.state,vao:ki,uniforms:hi,framebuffer:Li,extensions:On,timer:bi,isBufferArgs:Z0},Ri={primTypes:Vc,compareFuncs:Df,blendFuncs:Ih,blendEquations:Ur,stencilOps:Hd,glTypes:ou,orientationType:Lh};de.optional(function(){Ki.isArrayLike=sl}),ro&&(Ri.backBuffer=[Ph],Ri.drawBuffer=qn(Mr.maxDrawbuffers,function(Ft){return Ft===0?[0]:qn(Ft,function(rn){return Ag+rn})}));var Jr=0;function zo(){var Ft=zr(),rn=Ft.link,Rn=Ft.global;Ft.id=Jr++,Ft.batchId="0";var Tr=rn(Ki),_r=Ft.shared={props:"a0"};Object.keys(Ki).forEach(function(Gn){_r[Gn]=Rn.def(Tr,".",Gn)}),de.optional(function(){Ft.CHECK=rn(de),Ft.commandStr=de.guessCommand(),Ft.command=rn(Ft.commandStr),Ft.assert=function(Gn,$t,er){Gn("if(!(",$t,"))",this.CHECK,".commandRaise(",rn(er),",",this.command,");")},Ri.invalidBlendCombinations=Vd});var jn=Ft.next={},Jn=Ft.current={};Object.keys(si).forEach(function(Gn){Array.isArray(ai[Gn])&&(jn[Gn]=Rn.def(_r.next,".",Gn),Jn[Gn]=Rn.def(_r.current,".",Gn))});var Vn=Ft.constants={};Object.keys(Ri).forEach(function(Gn){Vn[Gn]=Rn.def(JSON.stringify(Ri[Gn]))}),Ft.invoke=function(Gn,$t){switch($t.type){case Vo:var er=["this",_r.context,_r.props,Ft.batchId];return Gn.def(rn($t.data),".call(",er.slice(0,Math.max($t.data.length+1,4)),")");case $r:return Gn.def(_r.props,$t.data);case Kt:return Gn.def(_r.context,$t.data);case Ya:return Gn.def("this",$t.data);case yo:return $t.data.append(Ft,Gn),$t.data.ref}},Ft.attribCache={};var on={};return Ft.scopeAttrib=function(Gn){var $t=Yt.id(Gn);if($t in on)return on[$t];var er=ki.scope[$t];er||(er=ki.scope[$t]=new dr);var Nr=on[$t]=rn(er);return Nr},Ft}function ie(Ft){var rn=Ft.static,Rn=Ft.dynamic,Tr;if(xl in rn){var _r=!!rn[xl];Tr=uu(function(Jn,Vn){return _r}),Tr.enable=_r}else if(xl in Rn){var jn=Rn[xl];Tr=Nf(jn,function(Jn,Vn){return Jn.invoke(Vn,jn)})}return Tr}function lo(Ft,rn){var Rn=Ft.static,Tr=Ft.dynamic;if(oc in Rn){var _r=Rn[oc];return _r?(_r=Li.getFramebuffer(_r),de.command(_r,"invalid framebuffer object"),uu(function(Jn,Vn){var on=Jn.link(_r),Gn=Jn.shared;Vn.set(Gn.framebuffer,".next",on);var $t=Gn.context;return Vn.set($t,"."+oh,on+".width"),Vn.set($t,"."+gf,on+".height"),on})):uu(function(Jn,Vn){var on=Jn.shared;Vn.set(on.framebuffer,".next","null");var Gn=on.context;return Vn.set(Gn,"."+oh,Gn+"."+Yc),Vn.set(Gn,"."+gf,Gn+"."+Dy),"null"})}else if(oc in Tr){var jn=Tr[oc];return Nf(jn,function(Jn,Vn){var on=Jn.invoke(Vn,jn),Gn=Jn.shared,$t=Gn.framebuffer,er=Vn.def($t,".getFramebuffer(",on,")");de.optional(function(){Jn.assert(Vn,"!"+on+"||"+er,"invalid framebuffer object")}),Vn.set($t,".next",er);var Nr=Gn.context;return Vn.set(Nr,"."+oh,er+"?"+er+".width:"+Nr+"."+Yc),Vn.set(Nr,"."+gf,er+"?"+er+".height:"+Nr+"."+Dy),er})}else return null}function Ma(Ft,rn,Rn){var Tr=Ft.static,_r=Ft.dynamic;function jn(on){if(on in Tr){var Gn=Tr[on];de.commandType(Gn,"object","invalid "+on,Rn.commandStr);var $t=!0,er=Gn.x|0,Nr=Gn.y|0,Dr,gi;return"width"in Gn?(Dr=Gn.width|0,de.command(Dr>=0,"invalid "+on,Rn.commandStr)):$t=!1,"height"in Gn?(gi=Gn.height|0,de.command(gi>=0,"invalid "+on,Rn.commandStr)):$t=!1,new $c(!$t&&rn&&rn.thisDep,!$t&&rn&&rn.contextDep,!$t&&rn&&rn.propDep,function(Fo,wo){var Ro=Fo.shared.context,sa=Dr;"width"in Gn||(sa=wo.def(Ro,".",oh,"-",er));var ha=gi;return"height"in Gn||(ha=wo.def(Ro,".",gf,"-",Nr)),[er,Nr,sa,ha]})}else if(on in _r){var oi=_r[on],Ti=Nf(oi,function(Fo,wo){var Ro=Fo.invoke(wo,oi);de.optional(function(){Fo.assert(wo,Ro+"&&typeof "+Ro+'==="object"',"invalid "+on)});var sa=Fo.shared.context,ha=wo.def(Ro,".x|0"),Ds=wo.def(Ro,".y|0"),Wl=wo.def('"width" in ',Ro,"?",Ro,".width|0:","(",sa,".",oh,"-",ha,")"),sh=wo.def('"height" in ',Ro,"?",Ro,".height|0:","(",sa,".",gf,"-",Ds,")");return de.optional(function(){Fo.assert(wo,Wl+">=0&&"+sh+">=0","invalid "+on)}),[ha,Ds,Wl,sh]});return rn&&(Ti.thisDep=Ti.thisDep||rn.thisDep,Ti.contextDep=Ti.contextDep||rn.contextDep,Ti.propDep=Ti.propDep||rn.propDep),Ti}else return rn?new $c(rn.thisDep,rn.contextDep,rn.propDep,function(Fo,wo){var Ro=Fo.shared.context;return[0,0,wo.def(Ro,".",oh),wo.def(Ro,".",gf)]}):null}var Jn=jn(Wu);if(Jn){var Vn=Jn;Jn=new $c(Jn.thisDep,Jn.contextDep,Jn.propDep,function(on,Gn){var $t=Vn.append(on,Gn),er=on.shared.context;return Gn.set(er,"."+U0,$t[2]),Gn.set(er,"."+gm,$t[3]),$t})}return{viewport:Jn,scissor_box:jn(rd)}}function Hn(Ft,rn){var Rn=Ft.static,Tr=typeof Rn[If]=="string"&&typeof Rn[Pf]=="string";if(Tr){if(Object.keys(rn.dynamic).length>0)return null;var _r=rn.static,jn=Object.keys(_r);if(jn.length>0&&typeof _r[jn[0]]=="number"){for(var Jn=[],Vn=0;Vn<jn.length;++Vn)de(typeof _r[jn[Vn]]=="number","must specify all vertex attribute locations when using vaos"),Jn.push([_r[jn[Vn]]|0,jn[Vn]]);return Jn}}return null}function jr(Ft,rn,Rn){var Tr=Ft.static,_r=Ft.dynamic;function jn($t){if($t in Tr){var er=Yt.id(Tr[$t]);de.optional(function(){Di.shader(Tm[$t],er,de.guessCommand())});var Nr=uu(function(){return er});return Nr.id=er,Nr}else if($t in _r){var Dr=_r[$t];return Nf(Dr,function(gi,oi){var Ti=gi.invoke(oi,Dr),Fo=oi.def(gi.shared.strings,".id(",Ti,")");return de.optional(function(){oi(gi.shared.shader,".shader(",Tm[$t],",",Fo,",",gi.command,");")}),Fo})}return null}var Jn=jn(If),Vn=jn(Pf),on=null,Gn;return Pc(Jn)&&Pc(Vn)?(on=Di.program(Vn.id,Jn.id,null,Rn),Gn=uu(function($t,er){return $t.link(on)})):Gn=new $c(Jn&&Jn.thisDep||Vn&&Vn.thisDep,Jn&&Jn.contextDep||Vn&&Vn.contextDep,Jn&&Jn.propDep||Vn&&Vn.propDep,function($t,er){var Nr=$t.shared.shader,Dr;Jn?Dr=Jn.append($t,er):Dr=er.def(Nr,".",If);var gi;Vn?gi=Vn.append($t,er):gi=er.def(Nr,".",Pf);var oi=Nr+".program("+gi+","+Dr;return de.optional(function(){oi+=","+$t.command}),er.def(oi+")")}),{frag:Jn,vert:Vn,progVar:Gn,program:on}}function Qa(Ft,rn){var Rn=Ft.static,Tr=Ft.dynamic;function _r(){if(rs in Rn){var $t=Rn[rs];Z0($t)?$t=Rr.getElements(Rr.create($t,!0)):$t&&($t=Rr.getElements($t),de.command($t,"invalid elements",rn.commandStr));var er=uu(function(Dr,gi){if($t){var oi=Dr.link($t);return Dr.ELEMENTS=oi,oi}return Dr.ELEMENTS=null,null});return er.value=$t,er}else if(rs in Tr){var Nr=Tr[rs];return Nf(Nr,function(Dr,gi){var oi=Dr.shared,Ti=oi.isBufferArgs,Fo=oi.elements,wo=Dr.invoke(gi,Nr),Ro=gi.def("null"),sa=gi.def(Ti,"(",wo,")"),ha=Dr.cond(sa).then(Ro,"=",Fo,".createStream(",wo,");").else(Ro,"=",Fo,".getElements(",wo,");");return de.optional(function(){Dr.assert(ha.else,"!"+wo+"||"+Ro,"invalid elements")}),gi.entry(ha),gi.exit(Dr.cond(sa).then(Fo,".destroyStream(",Ro,");")),Dr.ELEMENTS=Ro,Ro})}return null}var jn=_r();function Jn(){if(Gu in Rn){var $t=Rn[Gu];return de.commandParameter($t,Vc,"invalid primitve",rn.commandStr),uu(function(Nr,Dr){return Vc[$t]})}else if(Gu in Tr){var er=Tr[Gu];return Nf(er,function(Nr,Dr){var gi=Nr.constants.primTypes,oi=Nr.invoke(Dr,er);return de.optional(function(){Nr.assert(Dr,oi+" in "+gi,"invalid primitive, must be one of "+Object.keys(Vc))}),Dr.def(gi,"[",oi,"]")})}else if(jn)return Pc(jn)?jn.value?uu(function(Nr,Dr){return Dr.def(Nr.ELEMENTS,".primType")}):uu(function(){return Sg}):new $c(jn.thisDep,jn.contextDep,jn.propDep,function(Nr,Dr){var gi=Nr.ELEMENTS;return Dr.def(gi,"?",gi,".primType:",Sg)});return null}function Vn($t,er){if($t in Rn){var Nr=Rn[$t]|0;return de.command(!er||Nr>=0,"invalid "+$t,rn.commandStr),uu(function(gi,oi){return er&&(gi.OFFSET=Nr),Nr})}else if($t in Tr){var Dr=Tr[$t];return Nf(Dr,function(gi,oi){var Ti=gi.invoke(oi,Dr);return er&&(gi.OFFSET=Ti,de.optional(function(){gi.assert(oi,Ti+">=0","invalid "+$t)})),Ti})}else if(er&&jn)return uu(function(gi,oi){return gi.OFFSET="0",0});return null}var on=Vn(Lf,!0);function Gn(){if(xu in Rn){var $t=Rn[xu]|0;return de.command(typeof $t=="number"&&$t>=0,"invalid vertex count",rn.commandStr),uu(function(){return $t})}else if(xu in Tr){var er=Tr[xu];return Nf(er,function(gi,oi){var Ti=gi.invoke(oi,er);return de.optional(function(){gi.assert(oi,"typeof "+Ti+'==="number"&&'+Ti+">=0&&"+Ti+"===("+Ti+"|0)","invalid vertex count")}),Ti})}else if(jn)if(Pc(jn)){if(jn)return on?new $c(on.thisDep,on.contextDep,on.propDep,function(gi,oi){var Ti=oi.def(gi.ELEMENTS,".vertCount-",gi.OFFSET);return de.optional(function(){gi.assert(oi,Ti+">=0","invalid vertex offset/element buffer too small")}),Ti}):uu(function(gi,oi){return oi.def(gi.ELEMENTS,".vertCount")});var Nr=uu(function(){return-1});return de.optional(function(){Nr.MISSING=!0}),Nr}else{var Dr=new $c(jn.thisDep||on.thisDep,jn.contextDep||on.contextDep,jn.propDep||on.propDep,function(gi,oi){var Ti=gi.ELEMENTS;return gi.OFFSET?oi.def(Ti,"?",Ti,".vertCount-",gi.OFFSET,":-1"):oi.def(Ti,"?",Ti,".vertCount:-1")});return de.optional(function(){Dr.DYNAMIC=!0}),Dr}return null}return{elements:jn,primitive:Jn(),count:Gn(),instances:Vn(cp,!1),offset:on}}function Jl(Ft,rn){var Rn=Ft.static,Tr=Ft.dynamic,_r={};return wi.forEach(function(jn){var Jn=vi(jn);function Vn(on,Gn){if(jn in Rn){var $t=on(Rn[jn]);_r[Jn]=uu(function(){return $t})}else if(jn in Tr){var er=Tr[jn];_r[Jn]=Nf(er,function(Nr,Dr){return Gn(Nr,Dr,Nr.invoke(Dr,er))})}}switch(jn){case Us:case Oa:case Qo:case Dp:case aa:case Yf:case Hu:case _c:case Xf:case Ls:return Vn(function(on){return de.commandType(on,"boolean",jn,rn.commandStr),on},function(on,Gn,$t){return de.optional(function(){on.assert(Gn,"typeof "+$t+'==="boolean"',"invalid flag "+jn,on.commandStr)}),$t});case ta:return Vn(function(on){return de.commandParameter(on,Df,"invalid "+jn,rn.commandStr),Df[on]},function(on,Gn,$t){var er=on.constants.compareFuncs;return de.optional(function(){on.assert(Gn,$t+" in "+er,"invalid "+jn+", must be one of "+Object.keys(Df))}),Gn.def(er,"[",$t,"]")});case Vl:return Vn(function(on){return de.command(sl(on)&&on.length===2&&typeof on[0]=="number"&&typeof on[1]=="number"&&on[0]<=on[1],"depth range is 2d array",rn.commandStr),on},function(on,Gn,$t){de.optional(function(){on.assert(Gn,on.shared.isArrayLike+"("+$t+")&&"+$t+".length===2&&typeof "+$t+'[0]==="number"&&typeof '+$t+'[1]==="number"&&'+$t+"[0]<="+$t+"[1]","depth range must be a 2d array")});var er=Gn.def("+",$t,"[0]"),Nr=Gn.def("+",$t,"[1]");return[er,Nr]});case xa:return Vn(function(on){de.commandType(on,"object","blend.func",rn.commandStr);var Gn="srcRGB"in on?on.srcRGB:on.src,$t="srcAlpha"in on?on.srcAlpha:on.src,er="dstRGB"in on?on.dstRGB:on.dst,Nr="dstAlpha"in on?on.dstAlpha:on.dst;return de.commandParameter(Gn,Ih,Jn+".srcRGB",rn.commandStr),de.commandParameter($t,Ih,Jn+".srcAlpha",rn.commandStr),de.commandParameter(er,Ih,Jn+".dstRGB",rn.commandStr),de.commandParameter(Nr,Ih,Jn+".dstAlpha",rn.commandStr),de.command(Vd.indexOf(Gn+", "+er)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Gn+", "+er+")",rn.commandStr),[Ih[Gn],Ih[er],Ih[$t],Ih[Nr]]},function(on,Gn,$t){var er=on.constants.blendFuncs;de.optional(function(){on.assert(Gn,$t+"&&typeof "+$t+'==="object"',"invalid blend func, must be an object")});function Nr(Ro,sa){var ha=Gn.def('"',Ro,sa,'" in ',$t,"?",$t,".",Ro,sa,":",$t,".",Ro);return de.optional(function(){on.assert(Gn,ha+" in "+er,"invalid "+jn+"."+Ro+sa+", must be one of "+Object.keys(Ih))}),ha}var Dr=Nr("src","RGB"),gi=Nr("dst","RGB");de.optional(function(){var Ro=on.constants.invalidBlendCombinations;on.assert(Gn,Ro+".indexOf("+Dr+'+", "+'+gi+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var oi=Gn.def(er,"[",Dr,"]"),Ti=Gn.def(er,"[",Nr("src","Alpha"),"]"),Fo=Gn.def(er,"[",gi,"]"),wo=Gn.def(er,"[",Nr("dst","Alpha"),"]");return[oi,Fo,Ti,wo]});case Go:return Vn(function(on){if(typeof on=="string")return de.commandParameter(on,Ur,"invalid "+jn,rn.commandStr),[Ur[on],Ur[on]];if(typeof on=="object")return de.commandParameter(on.rgb,Ur,jn+".rgb",rn.commandStr),de.commandParameter(on.alpha,Ur,jn+".alpha",rn.commandStr),[Ur[on.rgb],Ur[on.alpha]];de.commandRaise("invalid blend.equation",rn.commandStr)},function(on,Gn,$t){var er=on.constants.blendEquations,Nr=Gn.def(),Dr=Gn.def(),gi=on.cond("typeof ",$t,'==="string"');return de.optional(function(){function oi(Ti,Fo,wo){on.assert(Ti,wo+" in "+er,"invalid "+Fo+", must be one of "+Object.keys(Ur))}oi(gi.then,jn,$t),on.assert(gi.else,$t+"&&typeof "+$t+'==="object"',"invalid "+jn),oi(gi.else,jn+".rgb",$t+".rgb"),oi(gi.else,jn+".alpha",$t+".alpha")}),gi.then(Nr,"=",Dr,"=",er,"[",$t,"];"),gi.else(Nr,"=",er,"[",$t,".rgb];",Dr,"=",er,"[",$t,".alpha];"),Gn(gi),[Nr,Dr]});case fa:return Vn(function(on){return de.command(sl(on)&&on.length===4,"blend.color must be a 4d array",rn.commandStr),qn(4,function(Gn){return+on[Gn]})},function(on,Gn,$t){return de.optional(function(){on.assert(Gn,on.shared.isArrayLike+"("+$t+")&&"+$t+".length===4","blend.color must be a 4d array")}),qn(4,function(er){return Gn.def("+",$t,"[",er,"]")})});case up:return Vn(function(on){return de.commandType(on,"number",Jn,rn.commandStr),on|0},function(on,Gn,$t){return de.optional(function(){on.assert(Gn,"typeof "+$t+'==="number"',"invalid stencil.mask")}),Gn.def($t,"|0")});case Oh:return Vn(function(on){de.commandType(on,"object",Jn,rn.commandStr);var Gn=on.cmp||"keep",$t=on.ref||0,er="mask"in on?on.mask:-1;return de.commandParameter(Gn,Df,jn+".cmp",rn.commandStr),de.commandType($t,"number",jn+".ref",rn.commandStr),de.commandType(er,"number",jn+".mask",rn.commandStr),[Df[Gn],$t,er]},function(on,Gn,$t){var er=on.constants.compareFuncs;de.optional(function(){function oi(){on.assert(Gn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}oi($t+"&&typeof ",$t,'==="object"'),oi('!("cmp" in ',$t,")||(",$t,".cmp in ",er,")")});var Nr=Gn.def('"cmp" in ',$t,"?",er,"[",$t,".cmp]",":",Ud),Dr=Gn.def($t,".ref|0"),gi=Gn.def('"mask" in ',$t,"?",$t,".mask|0:-1");return[Nr,Dr,gi]});case Mi:case Rc:return Vn(function(on){de.commandType(on,"object",Jn,rn.commandStr);var Gn=on.fail||"keep",$t=on.zfail||"keep",er=on.zpass||"keep";return de.commandParameter(Gn,Hd,jn+".fail",rn.commandStr),de.commandParameter($t,Hd,jn+".zfail",rn.commandStr),de.commandParameter(er,Hd,jn+".zpass",rn.commandStr),[jn===Rc?Ph:Zu,Hd[Gn],Hd[$t],Hd[er]]},function(on,Gn,$t){var er=on.constants.stencilOps;de.optional(function(){on.assert(Gn,$t+"&&typeof "+$t+'==="object"',"invalid "+jn)});function Nr(Dr){return de.optional(function(){on.assert(Gn,'!("'+Dr+'" in '+$t+")||("+$t+"."+Dr+" in "+er+")","invalid "+jn+"."+Dr+", must be one of "+Object.keys(Hd))}),Gn.def('"',Dr,'" in ',$t,"?",er,"[",$t,".",Dr,"]:",Ud)}return[jn===Rc?Ph:Zu,Nr("fail"),Nr("zfail"),Nr("zpass")]});case Zf:return Vn(function(on){de.commandType(on,"object",Jn,rn.commandStr);var Gn=on.factor|0,$t=on.units|0;return de.commandType(Gn,"number",Jn+".factor",rn.commandStr),de.commandType($t,"number",Jn+".units",rn.commandStr),[Gn,$t]},function(on,Gn,$t){de.optional(function(){on.assert(Gn,$t+"&&typeof "+$t+'==="object"',"invalid "+jn)});var er=Gn.def($t,".factor|0"),Nr=Gn.def($t,".units|0");return[er,Nr]});case ll:return Vn(function(on){var Gn=0;return on==="front"?Gn=Zu:on==="back"&&(Gn=Ph),de.command(!!Gn,Jn,rn.commandStr),Gn},function(on,Gn,$t){return de.optional(function(){on.assert(Gn,$t+'==="front"||'+$t+'==="back"',"invalid cull.face")}),Gn.def($t,'==="front"?',Zu,":",Ph)});case Mc:return Vn(function(on){return de.command(typeof on=="number"&&on>=Mr.lineWidthDims[0]&&on<=Mr.lineWidthDims[1],"invalid line width, must be a positive number between "+Mr.lineWidthDims[0]+" and "+Mr.lineWidthDims[1],rn.commandStr),on},function(on,Gn,$t){return de.optional(function(){on.assert(Gn,"typeof "+$t+'==="number"&&'+$t+">="+Mr.lineWidthDims[0]+"&&"+$t+"<="+Mr.lineWidthDims[1],"invalid line width")}),$t});case Il:return Vn(function(on){return de.commandParameter(on,Lh,Jn,rn.commandStr),Lh[on]},function(on,Gn,$t){return de.optional(function(){on.assert(Gn,$t+'==="cw"||'+$t+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Gn.def($t+'==="cw"?'+H0+":"+W0)});case lu:return Vn(function(on){return de.command(sl(on)&&on.length===4,"color.mask must be length 4 array",rn.commandStr),on.map(function(Gn){return!!Gn})},function(on,Gn,$t){return de.optional(function(){on.assert(Gn,on.shared.isArrayLike+"("+$t+")&&"+$t+".length===4","invalid color.mask")}),qn(4,function(er){return"!!"+$t+"["+er+"]"})});case Xc:return Vn(function(on){de.command(typeof on=="object"&&on,Jn,rn.commandStr);var Gn="value"in on?on.value:1,$t=!!on.invert;return de.command(typeof Gn=="number"&&Gn>=0&&Gn<=1,"sample.coverage.value must be a number between 0 and 1",rn.commandStr),[Gn,$t]},function(on,Gn,$t){de.optional(function(){on.assert(Gn,$t+"&&typeof "+$t+'==="object"',"invalid sample.coverage")});var er=Gn.def('"value" in ',$t,"?+",$t,".value:1"),Nr=Gn.def("!!",$t,".invert");return[er,Nr]})}}),_r}function Xu(Ft,rn){var Rn=Ft.static,Tr=Ft.dynamic,_r={};return Object.keys(Rn).forEach(function(jn){var Jn=Rn[jn],Vn;if(typeof Jn=="number"||typeof Jn=="boolean")Vn=uu(function(){return Jn});else if(typeof Jn=="function"){var on=Jn._reglType;on==="texture2d"||on==="textureCube"?Vn=uu(function(Gn){return Gn.link(Jn)}):on==="framebuffer"||on==="framebufferCube"?(de.command(Jn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+jn+'"',rn.commandStr),Vn=uu(function(Gn){return Gn.link(Jn.color[0])})):de.commandRaise('invalid data for uniform "'+jn+'"',rn.commandStr)}else sl(Jn)?Vn=uu(function(Gn){var $t=Gn.global.def("[",qn(Jn.length,function(er){return de.command(typeof Jn[er]=="number"||typeof Jn[er]=="boolean","invalid uniform "+jn,Gn.commandStr),Jn[er]}),"]");return $t}):de.commandRaise('invalid or missing data for uniform "'+jn+'"',rn.commandStr);Vn.value=Jn,_r[jn]=Vn}),Object.keys(Tr).forEach(function(jn){var Jn=Tr[jn];_r[jn]=Nf(Jn,function(Vn,on){return Vn.invoke(on,Jn)})}),_r}function Ja(Ft,rn){var Rn=Ft.static,Tr=Ft.dynamic,_r={};return Object.keys(Rn).forEach(function(jn){var Jn=Rn[jn],Vn=Yt.id(jn),on=new dr;if(Z0(Jn))on.state=Fi,on.buffer=ei.getBuffer(ei.create(Jn,Fp,!1,!0)),on.type=0;else{var Gn=ei.getBuffer(Jn);if(Gn)on.state=Fi,on.buffer=Gn,on.type=0;else if(de.command(typeof Jn=="object"&&Jn,"invalid data for attribute "+jn,rn.commandStr),"constant"in Jn){var $t=Jn.constant;on.buffer="null",on.state=po,typeof $t=="number"?on.x=$t:(de.command(sl($t)&&$t.length>0&&$t.length<=4,"invalid constant for attribute "+jn,rn.commandStr),ii.forEach(function(Fo,wo){wo<$t.length&&(on[Fo]=$t[wo])}))}else{Z0(Jn.buffer)?Gn=ei.getBuffer(ei.create(Jn.buffer,Fp,!1,!0)):Gn=ei.getBuffer(Jn.buffer),de.command(!!Gn,'missing buffer for attribute "'+jn+'"',rn.commandStr);var er=Jn.offset|0;de.command(er>=0,'invalid offset for attribute "'+jn+'"',rn.commandStr);var Nr=Jn.stride|0;de.command(Nr>=0&&Nr<256,'invalid stride for attribute "'+jn+'", must be integer betweeen [0, 255]',rn.commandStr);var Dr=Jn.size|0;de.command(!("size"in Jn)||Dr>0&&Dr<=4,'invalid size for attribute "'+jn+'", must be 1,2,3,4',rn.commandStr);var gi=!!Jn.normalized,oi=0;"type"in Jn&&(de.commandParameter(Jn.type,ou,"invalid type for attribute "+jn,rn.commandStr),oi=ou[Jn.type]);var Ti=Jn.divisor|0;"divisor"in Jn&&(de.command(Ti===0||xi,'cannot specify divisor for attribute "'+jn+'", instancing not supported',rn.commandStr),de.command(Ti>=0,'invalid divisor for attribute "'+jn+'"',rn.commandStr)),de.optional(function(){var Fo=rn.commandStr,wo=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Jn).forEach(function(Ro){de.command(wo.indexOf(Ro)>=0,'unknown parameter "'+Ro+'" for attribute pointer "'+jn+'" (valid parameters are '+wo+")",Fo)})}),on.buffer=Gn,on.state=Fi,on.size=Dr,on.normalized=gi,on.type=oi||Gn.dtype,on.offset=er,on.stride=Nr,on.divisor=Ti}}_r[jn]=uu(function(Fo,wo){var Ro=Fo.attribCache;if(Vn in Ro)return Ro[Vn];var sa={isStream:!1};return Object.keys(on).forEach(function(ha){sa[ha]=on[ha]}),on.buffer&&(sa.buffer=Fo.link(on.buffer),sa.type=sa.type||sa.buffer+".dtype"),Ro[Vn]=sa,sa})}),Object.keys(Tr).forEach(function(jn){var Jn=Tr[jn];function Vn(on,Gn){var $t=on.invoke(Gn,Jn),er=on.shared,Nr=on.constants,Dr=er.isBufferArgs,gi=er.buffer;de.optional(function(){on.assert(Gn,$t+"&&(typeof "+$t+'==="object"||typeof '+$t+'==="function")&&('+Dr+"("+$t+")||"+gi+".getBuffer("+$t+")||"+gi+".getBuffer("+$t+".buffer)||"+Dr+"("+$t+'.buffer)||("constant" in '+$t+"&&(typeof "+$t+'.constant==="number"||'+er.isArrayLike+"("+$t+".constant))))",'invalid dynamic attribute "'+jn+'"')});var oi={isStream:Gn.def(!1)},Ti=new dr;Ti.state=Fi,Object.keys(Ti).forEach(function(sa){oi[sa]=Gn.def(""+Ti[sa])});var Fo=oi.buffer,wo=oi.type;Gn("if(",Dr,"(",$t,")){",oi.isStream,"=true;",Fo,"=",gi,".createStream(",Fp,",",$t,");",wo,"=",Fo,".dtype;","}else{",Fo,"=",gi,".getBuffer(",$t,");","if(",Fo,"){",wo,"=",Fo,".dtype;",'}else if("constant" in ',$t,"){",oi.state,"=",po,";","if(typeof "+$t+'.constant === "number"){',oi[ii[0]],"=",$t,".constant;",ii.slice(1).map(function(sa){return oi[sa]}).join("="),"=0;","}else{",ii.map(function(sa,ha){return oi[sa]+"="+$t+".constant.length>"+ha+"?"+$t+".constant["+ha+"]:0;"}).join(""),"}}else{","if(",Dr,"(",$t,".buffer)){",Fo,"=",gi,".createStream(",Fp,",",$t,".buffer);","}else{",Fo,"=",gi,".getBuffer(",$t,".buffer);","}",wo,'="type" in ',$t,"?",Nr.glTypes,"[",$t,".type]:",Fo,".dtype;",oi.normalized,"=!!",$t,".normalized;");function Ro(sa){Gn(oi[sa],"=",$t,".",sa,"|0;")}return Ro("size"),Ro("offset"),Ro("stride"),Ro("divisor"),Gn("}}"),Gn.exit("if(",oi.isStream,"){",gi,".destroyStream(",Fo,");","}"),oi}_r[jn]=Nf(Jn,Vn)}),_r}function cu(Ft,rn){var Rn=Ft.static,Tr=Ft.dynamic;if(Ld in Rn){var _r=Rn[Ld];return _r!==null&&ki.getVAO(_r)===null&&(_r=ki.createVAO(_r)),uu(function(Jn){return Jn.link(ki.getVAO(_r))})}else if(Ld in Tr){var jn=Tr[Ld];return Nf(jn,function(Jn,Vn){var on=Jn.invoke(Vn,jn);return Vn.def(Jn.shared.vao+".getVAO("+on+")")})}return null}function il(Ft){var rn=Ft.static,Rn=Ft.dynamic,Tr={};return Object.keys(rn).forEach(function(_r){var jn=rn[_r];Tr[_r]=uu(function(Jn,Vn){return typeof jn=="number"||typeof jn=="boolean"?""+jn:Jn.link(jn)})}),Object.keys(Rn).forEach(function(_r){var jn=Rn[_r];Tr[_r]=Nf(jn,function(Jn,Vn){return Jn.invoke(Vn,jn)})}),Tr}function Eu(Ft,rn,Rn,Tr,_r){var jn=Ft.static,Jn=Ft.dynamic;de.optional(function(){var Ro=[oc,Pf,If,rs,Gu,Lf,xu,cp,xl,Ld].concat(wi);function sa(ha){Object.keys(ha).forEach(function(Ds){de.command(Ro.indexOf(Ds)>=0,'unknown parameter "'+Ds+'"',_r.commandStr)})}sa(jn),sa(Jn)});var Vn=Hn(Ft,rn),on=lo(Ft,_r),Gn=Ma(Ft,on,_r),$t=Qa(Ft,_r),er=Jl(Ft,_r),Nr=jr(Ft,_r,Vn);function Dr(Ro){var sa=Gn[Ro];sa&&(er[Ro]=sa)}Dr(Wu),Dr(vi(rd));var gi=Object.keys(er).length>0,oi={framebuffer:on,draw:$t,shader:Nr,state:er,dirty:gi,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(oi.profile=ie(Ft,_r),oi.uniforms=Xu(Rn,_r),oi.drawVAO=oi.scopeVAO=cu(Ft,_r),!oi.drawVAO&&Nr.program&&!Vn&&On.angle_instanced_arrays){var Ti=!0,Fo=Nr.program.attributes.map(function(Ro){var sa=rn.static[Ro];return Ti=Ti&&!!sa,sa});if(Ti&&Fo.length>0){var wo=ki.getVAO(ki.createVAO(Fo));oi.drawVAO=new $c(null,null,null,function(Ro,sa){return Ro.link(wo)}),oi.useVAO=!0}}return Vn?oi.useVAO=!0:oi.attributes=Ja(rn,_r),oi.context=il(Tr,_r),oi}function Su(Ft,rn,Rn){var Tr=Ft.shared,_r=Tr.context,jn=Ft.scope();Object.keys(Rn).forEach(function(Jn){rn.save(_r,"."+Jn);var Vn=Rn[Jn];jn(_r,".",Jn,"=",Vn.append(Ft,rn),";")}),rn(jn)}function Ll(Ft,rn,Rn,Tr){var _r=Ft.shared,jn=_r.gl,Jn=_r.framebuffer,Vn;ro&&(Vn=rn.def(_r.extensions,".webgl_draw_buffers"));var on=Ft.constants,Gn=on.drawBuffer,$t=on.backBuffer,er;Rn?er=Rn.append(Ft,rn):er=rn.def(Jn,".next"),Tr||rn("if(",er,"!==",Jn,".cur){"),rn("if(",er,"){",jn,".bindFramebuffer(",f0,",",er,".framebuffer);"),ro&&rn(Vn,".drawBuffersWEBGL(",Gn,"[",er,".colorAttachments.length]);"),rn("}else{",jn,".bindFramebuffer(",f0,",null);"),ro&&rn(Vn,".drawBuffersWEBGL(",$t,");"),rn("}",Jn,".cur=",er,";"),Tr||rn("}")}function Yu(Ft,rn,Rn){var Tr=Ft.shared,_r=Tr.gl,jn=Ft.current,Jn=Ft.next,Vn=Tr.current,on=Tr.next,Gn=Ft.cond(Vn,".dirty");wi.forEach(function($t){var er=vi($t);if(!(er in Rn.state)){var Nr,Dr;if(er in Jn){Nr=Jn[er],Dr=jn[er];var gi=qn(ai[er].length,function(Ti){return Gn.def(Nr,"[",Ti,"]")});Gn(Ft.cond(gi.map(function(Ti,Fo){return Ti+"!=="+Dr+"["+Fo+"]"}).join("||")).then(_r,".",si[er],"(",gi,");",gi.map(function(Ti,Fo){return Dr+"["+Fo+"]="+Ti}).join(";"),";"))}else{Nr=Gn.def(on,".",er);var oi=Ft.cond(Nr,"!==",Vn,".",er);Gn(oi),er in qi?oi(Ft.cond(Nr).then(_r,".enable(",qi[er],");").else(_r,".disable(",qi[er],");"),Vn,".",er,"=",Nr,";"):oi(_r,".",si[er],"(",Nr,");",Vn,".",er,"=",Nr,";")}}}),Object.keys(Rn.state).length===0&&Gn(Vn,".dirty=false;"),rn(Gn)}function Lc(Ft,rn,Rn,Tr){var _r=Ft.shared,jn=Ft.current,Jn=_r.current,Vn=_r.gl;X0(Object.keys(Rn)).forEach(function(on){var Gn=Rn[on];if(!(Tr&&!Tr(Gn))){var $t=Gn.append(Ft,rn);if(qi[on]){var er=qi[on];Pc(Gn)?$t?rn(Vn,".enable(",er,");"):rn(Vn,".disable(",er,");"):rn(Ft.cond($t).then(Vn,".enable(",er,");").else(Vn,".disable(",er,");")),rn(Jn,".",on,"=",$t,";")}else if(sl($t)){var Nr=jn[on];rn(Vn,".",si[on],"(",$t,");",$t.map(function(Dr,gi){return Nr+"["+gi+"]="+Dr}).join(";"),";")}else rn(Vn,".",si[on],"(",$t,");",Jn,".",on,"=",$t,";")}})}function wu(Ft,rn){xi&&(Ft.instancing=rn.def(Ft.shared.extensions,".angle_instanced_arrays"))}function ka(Ft,rn,Rn,Tr,_r){var jn=Ft.shared,Jn=Ft.stats,Vn=jn.current,on=jn.timer,Gn=Rn.profile;function $t(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var er,Nr;function Dr(Ro){er=rn.def(),Ro(er,"=",$t(),";"),typeof _r=="string"?Ro(Jn,".count+=",_r,";"):Ro(Jn,".count++;"),bi&&(Tr?(Nr=rn.def(),Ro(Nr,"=",on,".getNumPendingQueries();")):Ro(on,".beginQuery(",Jn,");"))}function gi(Ro){Ro(Jn,".cpuTime+=",$t(),"-",er,";"),bi&&(Tr?Ro(on,".pushScopeStats(",Nr,",",on,".getNumPendingQueries(),",Jn,");"):Ro(on,".endQuery();"))}function oi(Ro){var sa=rn.def(Vn,".profile");rn(Vn,".profile=",Ro,";"),rn.exit(Vn,".profile=",sa,";")}var Ti;if(Gn){if(Pc(Gn)){Gn.enable?(Dr(rn),gi(rn.exit),oi("true")):oi("false");return}Ti=Gn.append(Ft,rn),oi(Ti)}else Ti=rn.def(Vn,".profile");var Fo=Ft.block();Dr(Fo),rn("if(",Ti,"){",Fo,"}");var wo=Ft.block();gi(wo),rn.exit("if(",Ti,"){",wo,"}")}function xc(Ft,rn,Rn,Tr,_r){var jn=Ft.shared;function Jn(on){switch(on){case Bp:case V0:case Nd:return 2;case l0:case Hl:case Fd:return 3;case wv:case kp:case Bd:return 4;default:return 1}}function Vn(on,Gn,$t){var er=jn.gl,Nr=rn.def(on,".location"),Dr=rn.def(jn.attributes,"[",Nr,"]"),gi=$t.state,oi=$t.buffer,Ti=[$t.x,$t.y,$t.z,$t.w],Fo=["buffer","normalized","offset","stride"];function wo(){rn("if(!",Dr,".buffer){",er,".enableVertexAttribArray(",Nr,");}");var sa=$t.type,ha;if($t.size?ha=rn.def($t.size,"||",Gn):ha=Gn,rn("if(",Dr,".type!==",sa,"||",Dr,".size!==",ha,"||",Fo.map(function(Wl){return Dr+"."+Wl+"!=="+$t[Wl]}).join("||"),"){",er,".bindBuffer(",Fp,",",oi,".buffer);",er,".vertexAttribPointer(",[Nr,ha,sa,$t.normalized,$t.stride,$t.offset],");",Dr,".type=",sa,";",Dr,".size=",ha,";",Fo.map(function(Wl){return Dr+"."+Wl+"="+$t[Wl]+";"}).join(""),"}"),xi){var Ds=$t.divisor;rn("if(",Dr,".divisor!==",Ds,"){",Ft.instancing,".vertexAttribDivisorANGLE(",[Nr,Ds],");",Dr,".divisor=",Ds,";}")}}function Ro(){rn("if(",Dr,".buffer){",er,".disableVertexAttribArray(",Nr,");",Dr,".buffer=null;","}if(",ii.map(function(sa,ha){return Dr+"."+sa+"!=="+Ti[ha]}).join("||"),"){",er,".vertexAttrib4f(",Nr,",",Ti,");",ii.map(function(sa,ha){return Dr+"."+sa+"="+Ti[ha]+";"}).join(""),"}")}gi===Fi?wo():gi===po?Ro():(rn("if(",gi,"===",Fi,"){"),wo(),rn("}else{"),Ro(),rn("}"))}Tr.forEach(function(on){var Gn=on.name,$t=Rn.attributes[Gn],er;if($t){if(!_r($t))return;er=$t.append(Ft,rn)}else{if(!_r(Y0))return;var Nr=Ft.scopeAttrib(Gn);de.optional(function(){Ft.assert(rn,Nr+".state","missing attribute "+Gn)}),er={},Object.keys(new dr).forEach(function(Dr){er[Dr]=rn.def(Nr,".",Dr)})}Vn(Ft.link(on),Jn(on.info.type),er)})}function Os(Ft,rn,Rn,Tr,_r){for(var jn=Ft.shared,Jn=jn.gl,Vn,on=0;on<Tr.length;++on){var Gn=Tr[on],$t=Gn.name,er=Gn.info.type,Nr=Rn.uniforms[$t],Dr=Ft.link(Gn),gi=Dr+".location",oi;if(Nr){if(!_r(Nr))continue;if(Pc(Nr)){var Ti=Nr.value;if(de.command(Ti!==null&&typeof Ti!="undefined",'missing uniform "'+$t+'"',Ft.commandStr),er===c0||er===zp){de.command(typeof Ti=="function"&&(er===c0&&(Ti._reglType==="texture2d"||Ti._reglType==="framebuffer")||er===zp&&(Ti._reglType==="textureCube"||Ti._reglType==="framebufferCube")),"invalid texture for uniform "+$t,Ft.commandStr);var Fo=Ft.link(Ti._texture||Ti.color[0]._texture);rn(Jn,".uniform1i(",gi,",",Fo+".bind());"),rn.exit(Fo,".unbind();")}else if(er===kd||er===zd||er===fp){de.optional(function(){de.command(sl(Ti),"invalid matrix for uniform "+$t,Ft.commandStr),de.command(er===kd&&Ti.length===4||er===zd&&Ti.length===9||er===fp&&Ti.length===16,"invalid length for matrix uniform "+$t,Ft.commandStr)});var wo=Ft.global.def("new Float32Array(["+Array.prototype.slice.call(Ti)+"])"),Ro=2;er===zd?Ro=3:er===fp&&(Ro=4),rn(Jn,".uniformMatrix",Ro,"fv(",gi,",false,",wo,");")}else{switch(er){case Em:de.commandType(Ti,"number","uniform "+$t,Ft.commandStr),Vn="1f";break;case Bp:de.command(sl(Ti)&&Ti.length===2,"uniform "+$t,Ft.commandStr),Vn="2f";break;case l0:de.command(sl(Ti)&&Ti.length===3,"uniform "+$t,Ft.commandStr),Vn="3f";break;case wv:de.command(sl(Ti)&&Ti.length===4,"uniform "+$t,Ft.commandStr),Vn="4f";break;case u0:de.commandType(Ti,"boolean","uniform "+$t,Ft.commandStr),Vn="1i";break;case Rh:de.commandType(Ti,"number","uniform "+$t,Ft.commandStr),Vn="1i";break;case Nd:de.command(sl(Ti)&&Ti.length===2,"uniform "+$t,Ft.commandStr),Vn="2i";break;case V0:de.command(sl(Ti)&&Ti.length===2,"uniform "+$t,Ft.commandStr),Vn="2i";break;case Fd:de.command(sl(Ti)&&Ti.length===3,"uniform "+$t,Ft.commandStr),Vn="3i";break;case Hl:de.command(sl(Ti)&&Ti.length===3,"uniform "+$t,Ft.commandStr),Vn="3i";break;case Bd:de.command(sl(Ti)&&Ti.length===4,"uniform "+$t,Ft.commandStr),Vn="4i";break;case kp:de.command(sl(Ti)&&Ti.length===4,"uniform "+$t,Ft.commandStr),Vn="4i";break}rn(Jn,".uniform",Vn,"(",gi,",",sl(Ti)?Array.prototype.slice.call(Ti):Ti,");")}continue}else oi=Nr.append(Ft,rn)}else{if(!_r(Y0))continue;oi=rn.def(jn.uniforms,"[",Yt.id($t),"]")}er===c0?rn("if(",oi,"&&",oi,'._reglType==="framebuffer"){',oi,"=",oi,".color[0];","}"):er===zp&&rn("if(",oi,"&&",oi,'._reglType==="framebufferCube"){',oi,"=",oi,".color[0];","}"),de.optional(function(){function sh(jp,d0){Ft.assert(rn,jp,'bad data or missing for uniform "'+$t+'".  '+d0)}function Rg(jp){sh("typeof "+oi+'==="'+jp+'"',"invalid type, expected "+jp)}function qc(jp,d0){sh(jn.isArrayLike+"("+oi+")&&"+oi+".length==="+jp,"invalid vector, should have length "+jp,Ft.commandStr)}function jy(jp){sh("typeof "+oi+'==="function"&&'+oi+'._reglType==="texture'+(jp===j0?"2d":"Cube")+'"',"invalid texture type",Ft.commandStr)}switch(er){case Rh:Rg("number");break;case V0:qc(2,"number");break;case Hl:qc(3,"number");break;case kp:qc(4,"number");break;case Em:Rg("number");break;case Bp:qc(2,"number");break;case l0:qc(3,"number");break;case wv:qc(4,"number");break;case u0:Rg("boolean");break;case Nd:qc(2,"boolean");break;case Fd:qc(3,"boolean");break;case Bd:qc(4,"boolean");break;case kd:qc(4,"number");break;case zd:qc(9,"number");break;case fp:qc(16,"number");break;case c0:jy(j0);break;case zp:jy(By);break}});var sa=1;switch(er){case c0:case zp:var ha=rn.def(oi,"._texture");rn(Jn,".uniform1i(",gi,",",ha,".bind());"),rn.exit(ha,".unbind();");continue;case Rh:case u0:Vn="1i";break;case V0:case Nd:Vn="2i",sa=2;break;case Hl:case Fd:Vn="3i",sa=3;break;case kp:case Bd:Vn="4i",sa=4;break;case Em:Vn="1f";break;case Bp:Vn="2f",sa=2;break;case l0:Vn="3f",sa=3;break;case wv:Vn="4f",sa=4;break;case kd:Vn="Matrix2fv";break;case zd:Vn="Matrix3fv";break;case fp:Vn="Matrix4fv";break}if(rn(Jn,".uniform",Vn,"(",gi,","),Vn.charAt(0)==="M"){var Ds=Math.pow(er-kd+2,2),Wl=Ft.global.def("new Float32Array(",Ds,")");rn("false,(Array.isArray(",oi,")||",oi," instanceof Float32Array)?",oi,":(",qn(Ds,function(sh){return Wl+"["+sh+"]="+oi+"["+sh+"]"}),",",Wl,")")}else sa>1?rn(qn(sa,function(sh){return oi+"["+sh+"]"})):rn(oi);rn(");")}}function Jo(Ft,rn,Rn,Tr){var _r=Ft.shared,jn=_r.gl,Jn=_r.draw,Vn=Tr.draw;function on(){var ha=Vn.elements,Ds,Wl=rn;return ha?((ha.contextDep&&Tr.contextDynamic||ha.propDep)&&(Wl=Rn),Ds=ha.append(Ft,Wl)):Ds=Wl.def(Jn,".",rs),Ds&&Wl("if("+Ds+")"+jn+".bindBuffer("+Ny+","+Ds+".buffer.buffer);"),Ds}function Gn(){var ha=Vn.count,Ds,Wl=rn;return ha?((ha.contextDep&&Tr.contextDynamic||ha.propDep)&&(Wl=Rn),Ds=ha.append(Ft,Wl),de.optional(function(){ha.MISSING&&Ft.assert(rn,"false","missing vertex count"),ha.DYNAMIC&&Ft.assert(Wl,Ds+">=0","missing vertex count")})):(Ds=Wl.def(Jn,".",xu),de.optional(function(){Ft.assert(Wl,Ds+">=0","missing vertex count")})),Ds}var $t=on();function er(ha){var Ds=Vn[ha];return Ds?Ds.contextDep&&Tr.contextDynamic||Ds.propDep?Ds.append(Ft,Rn):Ds.append(Ft,rn):rn.def(Jn,".",ha)}var Nr=er(Gu),Dr=er(Lf),gi=Gn();if(typeof gi=="number"){if(gi===0)return}else Rn("if(",gi,"){"),Rn.exit("}");var oi,Ti;xi&&(oi=er(cp),Ti=Ft.instancing);var Fo=$t+".type",wo=Vn.elements&&Pc(Vn.elements);function Ro(){function ha(){Rn(Ti,".drawElementsInstancedANGLE(",[Nr,gi,Fo,Dr+"<<(("+Fo+"-"+Hi+")>>1)",oi],");")}function Ds(){Rn(Ti,".drawArraysInstancedANGLE(",[Nr,Dr,gi,oi],");")}$t?wo?ha():(Rn("if(",$t,"){"),ha(),Rn("}else{"),Ds(),Rn("}")):Ds()}function sa(){function ha(){Rn(jn+".drawElements("+[Nr,gi,Fo,Dr+"<<(("+Fo+"-"+Hi+")>>1)"]+");")}function Ds(){Rn(jn+".drawArrays("+[Nr,Dr,gi]+");")}$t?wo?ha():(Rn("if(",$t,"){"),ha(),Rn("}else{"),Ds(),Rn("}")):Ds()}xi&&(typeof oi!="number"||oi>=0)?typeof oi=="string"?(Rn("if(",oi,">0){"),Ro(),Rn("}else if(",oi,"<0){"),sa(),Rn("}")):Ro():sa()}function es(Ft,rn,Rn,Tr,_r){var jn=zo(),Jn=jn.proc("body",_r);return de.optional(function(){jn.commandStr=rn.commandStr,jn.command=jn.link(rn.commandStr)}),xi&&(jn.instancing=Jn.def(jn.shared.extensions,".angle_instanced_arrays")),Ft(jn,Jn,Rn,Tr),jn.compile().body}function fs(Ft,rn,Rn,Tr){wu(Ft,rn),Rn.useVAO?Rn.drawVAO?rn(Ft.shared.vao,".setVAO(",Rn.drawVAO.append(Ft,rn),");"):rn(Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"):(rn(Ft.shared.vao,".setVAO(null);"),xc(Ft,rn,Rn,Tr.attributes,function(){return!0})),Os(Ft,rn,Rn,Tr.uniforms,function(){return!0}),Jo(Ft,rn,rn,Rn)}function fu(Ft,rn){var Rn=Ft.proc("draw",1);wu(Ft,Rn),Su(Ft,Rn,rn.context),Ll(Ft,Rn,rn.framebuffer),Yu(Ft,Rn,rn),Lc(Ft,Rn,rn.state),ka(Ft,Rn,rn,!1,!0);var Tr=rn.shader.progVar.append(Ft,Rn);if(Rn(Ft.shared.gl,".useProgram(",Tr,".program);"),rn.shader.program)fs(Ft,Rn,rn,rn.shader.program);else{Rn(Ft.shared.vao,".setVAO(null);");var _r=Ft.global.def("{}"),jn=Rn.def(Tr,".id"),Jn=Rn.def(_r,"[",jn,"]");Rn(Ft.cond(Jn).then(Jn,".call(this,a0);").else(Jn,"=",_r,"[",jn,"]=",Ft.link(function(Vn){return es(fs,Ft,rn,Vn,1)}),"(",Tr,");",Jn,".call(this,a0);"))}Object.keys(rn.state).length>0&&Rn(Ft.shared.current,".dirty=true;")}function Dh(Ft,rn,Rn,Tr){Ft.batchId="a1",wu(Ft,rn);function _r(){return!0}xc(Ft,rn,Rn,Tr.attributes,_r),Os(Ft,rn,Rn,Tr.uniforms,_r),Jo(Ft,rn,rn,Rn)}function bn(Ft,rn,Rn,Tr){wu(Ft,rn);var _r=Rn.contextDep,jn=rn.def(),Jn="a0",Vn="a1",on=rn.def();Ft.shared.props=on,Ft.batchId=jn;var Gn=Ft.scope(),$t=Ft.scope();rn(Gn.entry,"for(",jn,"=0;",jn,"<",Vn,";++",jn,"){",on,"=",Jn,"[",jn,"];",$t,"}",Gn.exit);function er(Fo){return Fo.contextDep&&_r||Fo.propDep}function Nr(Fo){return!er(Fo)}if(Rn.needsContext&&Su(Ft,$t,Rn.context),Rn.needsFramebuffer&&Ll(Ft,$t,Rn.framebuffer),Lc(Ft,$t,Rn.state,er),Rn.profile&&er(Rn.profile)&&ka(Ft,$t,Rn,!1,!0),Tr)Rn.useVAO?Rn.drawVAO?er(Rn.drawVAO)?$t(Ft.shared.vao,".setVAO(",Rn.drawVAO.append(Ft,$t),");"):Gn(Ft.shared.vao,".setVAO(",Rn.drawVAO.append(Ft,Gn),");"):Gn(Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"):(Gn(Ft.shared.vao,".setVAO(null);"),xc(Ft,Gn,Rn,Tr.attributes,Nr),xc(Ft,$t,Rn,Tr.attributes,er)),Os(Ft,Gn,Rn,Tr.uniforms,Nr),Os(Ft,$t,Rn,Tr.uniforms,er),Jo(Ft,Gn,$t,Rn);else{var Dr=Ft.global.def("{}"),gi=Rn.shader.progVar.append(Ft,$t),oi=$t.def(gi,".id"),Ti=$t.def(Dr,"[",oi,"]");$t(Ft.shared.gl,".useProgram(",gi,".program);","if(!",Ti,"){",Ti,"=",Dr,"[",oi,"]=",Ft.link(function(Fo){return es(Dh,Ft,Rn,Fo,2)}),"(",gi,");}",Ti,".call(this,a0[",jn,"],",jn,");")}}function Lr(Ft,rn){var Rn=Ft.proc("batch",2);Ft.batchId="0",wu(Ft,Rn);var Tr=!1,_r=!0;Object.keys(rn.context).forEach(function(Dr){Tr=Tr||rn.context[Dr].propDep}),Tr||(Su(Ft,Rn,rn.context),_r=!1);var jn=rn.framebuffer,Jn=!1;jn?(jn.propDep?Tr=Jn=!0:jn.contextDep&&Tr&&(Jn=!0),Jn||Ll(Ft,Rn,jn)):Ll(Ft,Rn,null),rn.state.viewport&&rn.state.viewport.propDep&&(Tr=!0);function Vn(Dr){return Dr.contextDep&&Tr||Dr.propDep}Yu(Ft,Rn,rn),Lc(Ft,Rn,rn.state,function(Dr){return!Vn(Dr)}),(!rn.profile||!Vn(rn.profile))&&ka(Ft,Rn,rn,!1,"a1"),rn.contextDep=Tr,rn.needsContext=_r,rn.needsFramebuffer=Jn;var on=rn.shader.progVar;if(on.contextDep&&Tr||on.propDep)bn(Ft,Rn,rn,null);else{var Gn=on.append(Ft,Rn);if(Rn(Ft.shared.gl,".useProgram(",Gn,".program);"),rn.shader.program)bn(Ft,Rn,rn,rn.shader.program);else{Rn(Ft.shared.vao,".setVAO(null);");var $t=Ft.global.def("{}"),er=Rn.def(Gn,".id"),Nr=Rn.def($t,"[",er,"]");Rn(Ft.cond(Nr).then(Nr,".call(this,a0,a1);").else(Nr,"=",$t,"[",er,"]=",Ft.link(function(Dr){return es(bn,Ft,rn,Dr,2)}),"(",Gn,");",Nr,".call(this,a0,a1);"))}}Object.keys(rn.state).length>0&&Rn(Ft.shared.current,".dirty=true;")}function vr(Ft,rn){var Rn=Ft.proc("scope",3);Ft.batchId="a2";var Tr=Ft.shared,_r=Tr.current;Su(Ft,Rn,rn.context),rn.framebuffer&&rn.framebuffer.append(Ft,Rn),X0(Object.keys(rn.state)).forEach(function(Jn){var Vn=rn.state[Jn],on=Vn.append(Ft,Rn);sl(on)?on.forEach(function(Gn,$t){Rn.set(Ft.next[Jn],"["+$t+"]",Gn)}):Rn.set(Tr.next,"."+Jn,on)}),ka(Ft,Rn,rn,!0,!0),[rs,Lf,xu,cp,Gu].forEach(function(Jn){var Vn=rn.draw[Jn];Vn&&Rn.set(Tr.draw,"."+Jn,""+Vn.append(Ft,Rn))}),Object.keys(rn.uniforms).forEach(function(Jn){Rn.set(Tr.uniforms,"["+Yt.id(Jn)+"]",rn.uniforms[Jn].append(Ft,Rn))}),Object.keys(rn.attributes).forEach(function(Jn){var Vn=rn.attributes[Jn].append(Ft,Rn),on=Ft.scopeAttrib(Jn);Object.keys(new dr).forEach(function(Gn){Rn.set(on,"."+Gn,Vn[Gn])})}),rn.scopeVAO&&Rn.set(Tr.vao,".targetVAO",rn.scopeVAO.append(Ft,Rn));function jn(Jn){var Vn=rn.shader[Jn];Vn&&Rn.set(Tr.shader,"."+Jn,Vn.append(Ft,Rn))}jn(Pf),jn(If),Object.keys(rn.state).length>0&&(Rn(_r,".dirty=true;"),Rn.exit(_r,".dirty=true;")),Rn("a1(",Ft.shared.context,",a0,",Ft.batchId,");")}function co(Ft){if(!(typeof Ft!="object"||sl(Ft))){for(var rn=Object.keys(Ft),Rn=0;Rn<rn.length;++Rn)if(An.isDynamic(Ft[rn[Rn]]))return!0;return!1}}function wa(Ft,rn,Rn){var Tr=rn.static[Rn];if(!Tr||!co(Tr))return;var _r=Ft.global,jn=Object.keys(Tr),Jn=!1,Vn=!1,on=!1,Gn=Ft.global.def("{}");jn.forEach(function(er){var Nr=Tr[er];if(An.isDynamic(Nr)){typeof Nr=="function"&&(Nr=Tr[er]=An.unbox(Nr));var Dr=Nf(Nr,null);Jn=Jn||Dr.thisDep,on=on||Dr.propDep,Vn=Vn||Dr.contextDep}else{switch(_r(Gn,".",er,"="),typeof Nr){case"number":_r(Nr);break;case"string":_r('"',Nr,'"');break;case"object":Array.isArray(Nr)&&_r("[",Nr.join(),"]");break;default:_r(Ft.link(Nr));break}_r(";")}});function $t(er,Nr){jn.forEach(function(Dr){var gi=Tr[Dr];if(An.isDynamic(gi)){var oi=er.invoke(Nr,gi);Nr(Gn,".",Dr,"=",oi,";")}})}rn.dynamic[Rn]=new An.DynamicVariable(yo,{thisDep:Jn,contextDep:Vn,propDep:on,ref:Gn,append:$t}),delete rn.static[Rn]}function qs(Ft,rn,Rn,Tr,_r){var jn=zo();jn.stats=jn.link(_r),Object.keys(rn.static).forEach(function(Vn){wa(jn,rn,Vn)}),a0.forEach(function(Vn){wa(jn,Ft,Vn)});var Jn=Eu(Ft,rn,Rn,Tr,jn);return fu(jn,Jn),vr(jn,Jn),Lr(jn,Jn),jn.compile()}return{next:eo,current:ai,procs:function(){var Ft=zo(),rn=Ft.proc("poll"),Rn=Ft.proc("refresh"),Tr=Ft.block();rn(Tr),Rn(Tr);var _r=Ft.shared,jn=_r.gl,Jn=_r.next,Vn=_r.current;Tr(Vn,".dirty=false;"),Ll(Ft,rn),Ll(Ft,Rn,null,!0);var on;xi&&(on=Ft.link(xi)),On.oes_vertex_array_object&&Rn(Ft.link(On.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Gn=0;Gn<Mr.maxAttributes;++Gn){var $t=Rn.def(_r.attributes,"[",Gn,"]"),er=Ft.cond($t,".buffer");er.then(jn,".enableVertexAttribArray(",Gn,");",jn,".bindBuffer(",Fp,",",$t,".buffer.buffer);",jn,".vertexAttribPointer(",Gn,",",$t,".size,",$t,".type,",$t,".normalized,",$t,".stride,",$t,".offset);").else(jn,".disableVertexAttribArray(",Gn,");",jn,".vertexAttrib4f(",Gn,",",$t,".x,",$t,".y,",$t,".z,",$t,".w);",$t,".buffer=null;"),Rn(er),xi&&Rn(on,".vertexAttribDivisorANGLE(",Gn,",",$t,".divisor);")}return Rn(Ft.shared.vao,".currentVAO=null;",Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"),Object.keys(qi).forEach(function(Nr){var Dr=qi[Nr],gi=Tr.def(Jn,".",Nr),oi=Ft.block();oi("if(",gi,"){",jn,".enable(",Dr,")}else{",jn,".disable(",Dr,")}",Vn,".",Nr,"=",gi,";"),Rn(oi),rn("if(",gi,"!==",Vn,".",Nr,"){",oi,"}")}),Object.keys(si).forEach(function(Nr){var Dr=si[Nr],gi=ai[Nr],oi,Ti,Fo=Ft.block();if(Fo(jn,".",Dr,"("),sl(gi)){var wo=gi.length;oi=Ft.global.def(Jn,".",Nr),Ti=Ft.global.def(Vn,".",Nr),Fo(qn(wo,function(Ro){return oi+"["+Ro+"]"}),");",qn(wo,function(Ro){return Ti+"["+Ro+"]="+oi+"["+Ro+"];"}).join("")),rn("if(",qn(wo,function(Ro){return oi+"["+Ro+"]!=="+Ti+"["+Ro+"]"}).join("||"),"){",Fo,"}")}else oi=Tr.def(Jn,".",Nr),Ti=Tr.def(Vn,".",Nr),Fo(oi,");",Vn,".",Nr,"=",oi,";"),rn("if(",oi,"!==",Ti,"){",Fo,"}");Rn(Fo)}),Ft.compile()}(),compile:qs}}function Up(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Tv=34918,zy=34919,Cg=35007,Uy=function(Ue,Yt){if(!Yt.ext_disjoint_timer_query)return null;var On=[];function Mr(){return On.pop()||Yt.ext_disjoint_timer_query.createQueryEXT()}function ei(xi){On.push(xi)}var Rr=[];function br(xi){var ro=Mr();Yt.ext_disjoint_timer_query.beginQueryEXT(Cg,ro),Rr.push(ro),bi(Rr.length-1,Rr.length,xi)}function Li(){Yt.ext_disjoint_timer_query.endQueryEXT(Cg)}function hi(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ki=[];function Di(){return ki.pop()||new hi}function ji(xi){ki.push(xi)}var $i=[];function bi(xi,ro,ai){var eo=Di();eo.startQueryIndex=xi,eo.endQueryIndex=ro,eo.sum=0,eo.stats=ai,$i.push(eo)}var Vi=[],dr=[];function Ur(){var xi,ro,ai=Rr.length;if(ai!==0){dr.length=Math.max(dr.length,ai+1),Vi.length=Math.max(Vi.length,ai+1),Vi[0]=0,dr[0]=0;var eo=0;for(xi=0,ro=0;ro<Rr.length;++ro){var wi=Rr[ro];Yt.ext_disjoint_timer_query.getQueryObjectEXT(wi,zy)?(eo+=Yt.ext_disjoint_timer_query.getQueryObjectEXT(wi,Tv),ei(wi)):Rr[xi++]=wi,Vi[ro+1]=eo,dr[ro+1]=xi}for(Rr.length=xi,xi=0,ro=0;ro<$i.length;++ro){var qi=$i[ro],si=qi.startQueryIndex,vi=qi.endQueryIndex;qi.sum+=Vi[vi]-Vi[si];var Ho=dr[si],va=dr[vi];va===Ho?(qi.stats.gpuTime+=qi.sum/1e6,ji(qi)):(qi.startQueryIndex=Ho,qi.endQueryIndex=va,$i[xi++]=qi)}$i.length=xi}}return{beginQuery:br,endQuery:Li,pushScopeStats:bi,update:Ur,getNumPendingQueries:function(){return Rr.length},clear:function(){On.push.apply(On,Rr);for(var xi=0;xi<On.length;xi++)Yt.ext_disjoint_timer_query.deleteQueryEXT(On[xi]);Rr.length=0,On.length=0},restore:function(){Rr.length=0,On.length=0}}},Am=16384,Ic=256,Cm=1024,h0=34962,Om="webglcontextlost",Og="webglcontextrestored",Av=1,bc=2,Mm=3;function $0(Ue,Yt){for(var On=0;On<Ue.length;++On)if(Ue[On]===Yt)return On;return-1}function Mg(Ue){var Yt=rr(Ue);if(!Yt)return null;var On=Yt.gl,Mr=On.getContextAttributes(),ei=On.isContextLost(),Rr=Er(On,Yt);if(!Rr)return null;var br=pt(),Li=Up(),hi=Rr.extensions,ki=Uy(On,hi),Di=$n(),ji=On.drawingBufferWidth,$i=On.drawingBufferHeight,bi={tick:0,time:0,viewportWidth:ji,viewportHeight:$i,framebufferWidth:ji,framebufferHeight:$i,drawingBufferWidth:ji,drawingBufferHeight:$i,pixelRatio:Yt.pixelRatio},Vi={},dr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ur=gs(On,hi),xi=Sd(On,Li,Yt,ai),ro=ct(On,hi,Ur,Li,xi);function ai(Jo){return ro.destroyBuffer(Jo)}var eo=Cd(On,hi,xi,Li),wi=gn(On,br,Li,Yt),qi=pf(On,hi,Ur,function(){Ho.procs.poll()},bi,Li,Yt),si=Vu(On,hi,Ur,Li,Yt),vi=Z(On,hi,Ur,qi,si,Li),Ho=rl(On,br,hi,Ur,xi,eo,qi,vi,Vi,ro,wi,dr,bi,ki,Yt),va=gr(On,vi,Ho.procs.poll,bi,Mr,hi,Ur),Ki=Ho.next,Ri=On.canvas,Jr=[],zo=[],ie=[],lo=[Yt.onDestroy],Ma=null;function Hn(){if(Jr.length===0){ki&&ki.update(),Ma=null;return}Ma=In.next(Hn),Lc();for(var Jo=Jr.length-1;Jo>=0;--Jo){var es=Jr[Jo];es&&es(bi,null,0)}On.flush(),ki&&ki.update()}function jr(){!Ma&&Jr.length>0&&(Ma=In.next(Hn))}function Qa(){Ma&&(In.cancel(Hn),Ma=null)}function Jl(Jo){Jo.preventDefault(),ei=!0,Qa(),zo.forEach(function(es){es()})}function Xu(Jo){On.getError(),ei=!1,Rr.restore(),wi.restore(),xi.restore(),qi.restore(),si.restore(),vi.restore(),ro.restore(),ki&&ki.restore(),Ho.procs.refresh(),jr(),ie.forEach(function(es){es()})}Ri&&(Ri.addEventListener(Om,Jl,!1),Ri.addEventListener(Og,Xu,!1));function Ja(){Jr.length=0,Qa(),Ri&&(Ri.removeEventListener(Om,Jl),Ri.removeEventListener(Og,Xu)),wi.clear(),vi.clear(),si.clear(),qi.clear(),eo.clear(),xi.clear(),ro.clear(),ki&&ki.clear(),lo.forEach(function(Jo){Jo()})}function cu(Jo){de(!!Jo,"invalid args to regl({...})"),de.type(Jo,"object","invalid args to regl({...})");function es(_r){var jn=D({},_r);delete jn.uniforms,delete jn.attributes,delete jn.context,delete jn.vao,"stencil"in jn&&jn.stencil.op&&(jn.stencil.opBack=jn.stencil.opFront=jn.stencil.op,delete jn.stencil.op);function Jn(Vn){if(Vn in jn){var on=jn[Vn];delete jn[Vn],Object.keys(on).forEach(function(Gn){jn[Vn+"."+Gn]=on[Gn]})}}return Jn("blend"),Jn("depth"),Jn("cull"),Jn("stencil"),Jn("polygonOffset"),Jn("scissor"),Jn("sample"),"vao"in _r&&(jn.vao=_r.vao),jn}function fs(_r){var jn={},Jn={};return Object.keys(_r).forEach(function(Vn){var on=_r[Vn];An.isDynamic(on)?Jn[Vn]=An.unbox(on,Vn):jn[Vn]=on}),{dynamic:Jn,static:jn}}var fu=fs(Jo.context||{}),Dh=fs(Jo.uniforms||{}),bn=fs(Jo.attributes||{}),Lr=fs(es(Jo)),vr={gpuTime:0,cpuTime:0,count:0},co=Ho.compile(Lr,bn,Dh,fu,vr),wa=co.draw,qs=co.batch,Ft=co.scope,rn=[];function Rn(_r){for(;rn.length<_r;)rn.push(null);return rn}function Tr(_r,jn){var Jn;if(ei&&de.raise("context lost"),typeof _r=="function")return Ft.call(this,null,_r,0);if(typeof jn=="function")if(typeof _r=="number")for(Jn=0;Jn<_r;++Jn)Ft.call(this,null,jn,Jn);else if(Array.isArray(_r))for(Jn=0;Jn<_r.length;++Jn)Ft.call(this,_r[Jn],jn,Jn);else return Ft.call(this,_r,jn,0);else if(typeof _r=="number"){if(_r>0)return qs.call(this,Rn(_r|0),_r|0)}else if(Array.isArray(_r)){if(_r.length)return qs.call(this,_r,_r.length)}else return wa.call(this,_r)}return D(Tr,{stats:vr})}var il=vi.setFBO=cu({framebuffer:An.define.call(null,Av,"framebuffer")});function Eu(Jo,es){var fs=0;Ho.procs.poll();var fu=es.color;fu&&(On.clearColor(+fu[0]||0,+fu[1]||0,+fu[2]||0,+fu[3]||0),fs|=Am),"depth"in es&&(On.clearDepth(+es.depth),fs|=Ic),"stencil"in es&&(On.clearStencil(es.stencil|0),fs|=Cm),de(!!fs,"called regl.clear with no buffer specified"),On.clear(fs)}function Su(Jo){if(de(typeof Jo=="object"&&Jo,"regl.clear() takes an object as input"),"framebuffer"in Jo)if(Jo.framebuffer&&Jo.framebuffer_reglType==="framebufferCube")for(var es=0;es<6;++es)il(D({framebuffer:Jo.framebuffer.faces[es]},Jo),Eu);else il(Jo,Eu);else Eu(null,Jo)}function Ll(Jo){de.type(Jo,"function","regl.frame() callback must be a function"),Jr.push(Jo);function es(){var fs=$0(Jr,Jo);de(fs>=0,"cannot cancel a frame twice");function fu(){var Dh=$0(Jr,fu);Jr[Dh]=Jr[Jr.length-1],Jr.length-=1,Jr.length<=0&&Qa()}Jr[fs]=fu}return jr(),{cancel:es}}function Yu(){var Jo=Ki.viewport,es=Ki.scissor_box;Jo[0]=Jo[1]=es[0]=es[1]=0,bi.viewportWidth=bi.framebufferWidth=bi.drawingBufferWidth=Jo[2]=es[2]=On.drawingBufferWidth,bi.viewportHeight=bi.framebufferHeight=bi.drawingBufferHeight=Jo[3]=es[3]=On.drawingBufferHeight}function Lc(){bi.tick+=1,bi.time=ka(),Yu(),Ho.procs.poll()}function wu(){Yu(),Ho.procs.refresh(),ki&&ki.update()}function ka(){return($n()-Di)/1e3}wu();function xc(Jo,es){de.type(es,"function","listener callback must be a function");var fs;switch(Jo){case"frame":return Ll(es);case"lost":fs=zo;break;case"restore":fs=ie;break;case"destroy":fs=lo;break;default:de.raise("invalid event, must be one of frame,lost,restore,destroy")}return fs.push(es),{cancel:function(){for(var fu=0;fu<fs.length;++fu)if(fs[fu]===es){fs[fu]=fs[fs.length-1],fs.pop();return}}}}var Os=D(cu,{clear:Su,prop:An.define.bind(null,Av),context:An.define.bind(null,bc),this:An.define.bind(null,Mm),draw:cu({}),buffer:function(Jo){return xi.create(Jo,h0,!1,!1)},elements:function(Jo){return eo.create(Jo,!1)},texture:qi.create2D,cube:qi.createCube,renderbuffer:si.create,framebuffer:vi.create,framebufferCube:vi.createCube,vao:ro.createVAO,attributes:Mr,frame:Ll,on:xc,limits:Ur,hasExtension:function(Jo){return Ur.extensions.indexOf(Jo.toLowerCase())>=0},read:va,destroy:Ja,_gl:On,_refresh:wu,poll:function(){Lc(),ki&&ki.update()},now:ka,stats:Li});return Yt.onDone(null,Os),Os}return Mg})},86851:function(_t,W,D){"use strict";var q=D(89594),G=Array.prototype.concat,E=Array.prototype.slice,fe=_t.exports=function(se){for(var ce=[],ye=0,ae=se.length;ye<ae;ye++){var He=se[ye];q(He)?ce=G.call(ce,E.call(He)):ce.push(He)}return ce};fe.wrap=function($){return function(){return $(fe(arguments))}}},89594:function(_t){_t.exports=function(D){return!D||typeof D=="string"?!1:D instanceof Array||Array.isArray(D)||D.length>=0&&(D.splice instanceof Function||Object.getOwnPropertyDescriptor(D,D.length-1)&&D.constructor.name!=="String")}},69848:function(_t){(function(W,D){_t.exports=D()})(this,function(){"use strict";function W(Pe,Ae,Be,Ze,ut,tn){if(!(ut-Ze<=Be)){var De=Ze+ut>>1;D(Pe,Ae,De,Ze,ut,tn%2),W(Pe,Ae,Be,Ze,De-1,tn+1),W(Pe,Ae,Be,De+1,ut,tn+1)}}function D(Pe,Ae,Be,Ze,ut,tn){for(;ut>Ze;){if(ut-Ze>600){var De=ut-Ze+1,mt=Be-Ze+1,Re=Math.log(De),nt=.5*Math.exp(2*Re/3),qe=.5*Math.sqrt(Re*nt*(De-nt)/De)*(mt-De/2<0?-1:1),Ge=Math.max(Ze,Math.floor(Be-mt*nt/De+qe)),Dt=Math.min(ut,Math.floor(Be+(De-mt)*nt/De+qe));D(Pe,Ae,Be,Ge,Dt,tn)}var yt=Ae[2*Be+tn],Le=Ze,Zt=ut;for(q(Pe,Ae,Ze,Be),Ae[2*ut+tn]>yt&&q(Pe,Ae,Ze,ut);Le<Zt;){for(q(Pe,Ae,Le,Zt),Le++,Zt--;Ae[2*Le+tn]<yt;)Le++;for(;Ae[2*Zt+tn]>yt;)Zt--}Ae[2*Ze+tn]===yt?q(Pe,Ae,Ze,Zt):(Zt++,q(Pe,Ae,Zt,ut)),Zt<=Be&&(Ze=Zt+1),Be<=Zt&&(ut=Zt-1)}}function q(Pe,Ae,Be,Ze){G(Pe,Be,Ze),G(Ae,2*Be,2*Ze),G(Ae,2*Be+1,2*Ze+1)}function G(Pe,Ae,Be){var Ze=Pe[Ae];Pe[Ae]=Pe[Be],Pe[Be]=Ze}function E(Pe,Ae,Be,Ze,ut,tn,De){for(var mt=[0,Pe.length-1,0],Re=[],nt,qe;mt.length;){var Ge=mt.pop(),Dt=mt.pop(),yt=mt.pop();if(Dt-yt<=De){for(var Le=yt;Le<=Dt;Le++)nt=Ae[2*Le],qe=Ae[2*Le+1],nt>=Be&&nt<=ut&&qe>=Ze&&qe<=tn&&Re.push(Pe[Le]);continue}var Zt=Math.floor((yt+Dt)/2);nt=Ae[2*Zt],qe=Ae[2*Zt+1],nt>=Be&&nt<=ut&&qe>=Ze&&qe<=tn&&Re.push(Pe[Zt]);var yn=(Ge+1)%2;(Ge===0?Be<=nt:Ze<=qe)&&(mt.push(yt),mt.push(Zt-1),mt.push(yn)),(Ge===0?ut>=nt:tn>=qe)&&(mt.push(Zt+1),mt.push(Dt),mt.push(yn))}return Re}function fe(Pe,Ae,Be,Ze,ut,tn){for(var De=[0,Pe.length-1,0],mt=[],Re=ut*ut;De.length;){var nt=De.pop(),qe=De.pop(),Ge=De.pop();if(qe-Ge<=tn){for(var Dt=Ge;Dt<=qe;Dt++)$(Ae[2*Dt],Ae[2*Dt+1],Be,Ze)<=Re&&mt.push(Pe[Dt]);continue}var yt=Math.floor((Ge+qe)/2),Le=Ae[2*yt],Zt=Ae[2*yt+1];$(Le,Zt,Be,Ze)<=Re&&mt.push(Pe[yt]);var yn=(nt+1)%2;(nt===0?Be-ut<=Le:Ze-ut<=Zt)&&(De.push(Ge),De.push(yt-1),De.push(yn)),(nt===0?Be+ut>=Le:Ze+ut>=Zt)&&(De.push(yt+1),De.push(qe),De.push(yn))}return mt}function $(Pe,Ae,Be,Ze){var ut=Pe-Be,tn=Ae-Ze;return ut*ut+tn*tn}var se=function(Pe){return Pe[0]},ce=function(Pe){return Pe[1]},ye=function(Ae,Be,Ze,ut,tn){Be===void 0&&(Be=se),Ze===void 0&&(Ze=ce),ut===void 0&&(ut=64),tn===void 0&&(tn=Float64Array),this.nodeSize=ut,this.points=Ae;for(var De=Ae.length<65536?Uint16Array:Uint32Array,mt=this.ids=new De(Ae.length),Re=this.coords=new tn(Ae.length*2),nt=0;nt<Ae.length;nt++)mt[nt]=nt,Re[2*nt]=Be(Ae[nt]),Re[2*nt+1]=Ze(Ae[nt]);W(mt,Re,ut,0,mt.length-1,0)};ye.prototype.range=function(Ae,Be,Ze,ut){return E(this.ids,this.coords,Ae,Be,Ze,ut,this.nodeSize)},ye.prototype.within=function(Ae,Be,Ze){return fe(this.ids,this.coords,Ae,Be,Ze,this.nodeSize)};var ae={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Pe){return Pe}},He=Math.fround||function(Pe){return function(Ae){return Pe[0]=+Ae,Pe[0]}}(new Float32Array(1)),J=function(Ae){this.options=wt(Object.create(ae),Ae),this.trees=new Array(this.options.maxZoom+1)};J.prototype.load=function(Ae){var Be=this.options,Ze=Be.log,ut=Be.minZoom,tn=Be.maxZoom,De=Be.nodeSize;Ze&&console.time("total time");var mt="prepare "+Ae.length+" points";Ze&&console.time(mt),this.points=Ae;for(var Re=[],nt=0;nt<Ae.length;nt++)Ae[nt].geometry&&Re.push(Oe(Ae[nt],nt));this.trees[tn+1]=new ye(Re,gt,ft,De,Float32Array),Ze&&console.timeEnd(mt);for(var qe=tn;qe>=ut;qe--){var Ge=+Date.now();Re=this._cluster(Re,qe),this.trees[qe]=new ye(Re,gt,ft,De,Float32Array),Ze&&console.log("z%d: %d clusters in %dms",qe,Re.length,+Date.now()-Ge)}return Ze&&console.timeEnd("total time"),this},J.prototype.getClusters=function(Ae,Be){var Ze=((Ae[0]+180)%360+360)%360-180,ut=Math.max(-90,Math.min(90,Ae[1])),tn=Ae[2]===180?180:((Ae[2]+180)%360+360)%360-180,De=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)Ze=-180,tn=180;else if(Ze>tn){var mt=this.getClusters([Ze,ut,180,De],Be),Re=this.getClusters([-180,ut,tn,De],Be);return mt.concat(Re)}for(var nt=this.trees[this._limitZoom(Be)],qe=nt.range(ee(Ze),be(De),ee(tn),be(ut)),Ge=[],Dt=0,yt=qe;Dt<yt.length;Dt+=1){var Le=yt[Dt],Zt=nt.points[Le];Ge.push(Zt.numPoints?Q(Zt):this.points[Zt.index])}return Ge},J.prototype.getChildren=function(Ae){var Be=this._getOriginId(Ae),Ze=this._getOriginZoom(Ae),ut="No cluster with the specified id.",tn=this.trees[Ze];if(!tn)throw new Error(ut);var De=tn.points[Be];if(!De)throw new Error(ut);for(var mt=this.options.radius/(this.options.extent*Math.pow(2,Ze-1)),Re=tn.within(De.x,De.y,mt),nt=[],qe=0,Ge=Re;qe<Ge.length;qe+=1){var Dt=Ge[qe],yt=tn.points[Dt];yt.parentId===Ae&&nt.push(yt.numPoints?Q(yt):this.points[yt.index])}if(nt.length===0)throw new Error(ut);return nt},J.prototype.getLeaves=function(Ae,Be,Ze){Be=Be||10,Ze=Ze||0;var ut=[];return this._appendLeaves(ut,Ae,Be,Ze,0),ut},J.prototype.getTile=function(Ae,Be,Ze){var ut=this.trees[this._limitZoom(Ae)],tn=Math.pow(2,Ae),De=this.options,mt=De.extent,Re=De.radius,nt=Re/mt,qe=(Ze-nt)/tn,Ge=(Ze+1+nt)/tn,Dt={features:[]};return this._addTileFeatures(ut.range((Be-nt)/tn,qe,(Be+1+nt)/tn,Ge),ut.points,Be,Ze,tn,Dt),Be===0&&this._addTileFeatures(ut.range(1-nt/tn,qe,1,Ge),ut.points,tn,Ze,tn,Dt),Be===tn-1&&this._addTileFeatures(ut.range(0,qe,nt/tn,Ge),ut.points,-1,Ze,tn,Dt),Dt.features.length?Dt:null},J.prototype.getClusterExpansionZoom=function(Ae){for(var Be=this._getOriginZoom(Ae)-1;Be<=this.options.maxZoom;){var Ze=this.getChildren(Ae);if(Be++,Ze.length!==1)break;Ae=Ze[0].properties.cluster_id}return Be},J.prototype._appendLeaves=function(Ae,Be,Ze,ut,tn){for(var De=this.getChildren(Be),mt=0,Re=De;mt<Re.length;mt+=1){var nt=Re[mt],qe=nt.properties;if(qe&&qe.cluster?tn+qe.point_count<=ut?tn+=qe.point_count:tn=this._appendLeaves(Ae,qe.cluster_id,Ze,ut,tn):tn<ut?tn++:Ae.push(nt),Ae.length===Ze)break}return tn},J.prototype._addTileFeatures=function(Ae,Be,Ze,ut,tn,De){for(var mt=0,Re=Ae;mt<Re.length;mt+=1){var nt=Re[mt],qe=Be[nt],Ge=qe.numPoints,Dt=void 0,yt=void 0,Le=void 0;if(Ge)Dt=le(qe),yt=qe.x,Le=qe.y;else{var Zt=this.points[qe.index];Dt=Zt.properties,yt=ee(Zt.geometry.coordinates[0]),Le=be(Zt.geometry.coordinates[1])}var yn={type:1,geometry:[[Math.round(this.options.extent*(yt*tn-Ze)),Math.round(this.options.extent*(Le*tn-ut))]],tags:Dt},Tn=void 0;Ge?Tn=qe.id:this.options.generateId?Tn=qe.index:this.points[qe.index].id&&(Tn=this.points[qe.index].id),Tn!==void 0&&(yn.id=Tn),De.features.push(yn)}},J.prototype._limitZoom=function(Ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ae),this.options.maxZoom+1))},J.prototype._cluster=function(Ae,Be){for(var Ze=[],ut=this.options,tn=ut.radius,De=ut.extent,mt=ut.reduce,Re=ut.minPoints,nt=tn/(De*Math.pow(2,Be)),qe=0;qe<Ae.length;qe++){var Ge=Ae[qe];if(!(Ge.zoom<=Be)){Ge.zoom=Be;for(var Dt=this.trees[Be+1],yt=Dt.within(Ge.x,Ge.y,nt),Le=Ge.numPoints||1,Zt=Le,yn=0,Tn=yt;yn<Tn.length;yn+=1){var lr=Tn[yn],or=Dt.points[lr];or.zoom>Be&&(Zt+=or.numPoints||1)}if(Zt>Le&&Zt>=Re){for(var Lt=Ge.x*Le,en=Ge.y*Le,hn=mt&&Le>1?this._map(Ge,!0):null,Xn=(qe<<5)+(Be+1)+this.points.length,an=0,Pt=yt;an<Pt.length;an+=1){var zt=Pt[an],je=Dt.points[zt];if(!(je.zoom<=Be)){je.zoom=Be;var rt=je.numPoints||1;Lt+=je.x*rt,en+=je.y*rt,je.parentId=Xn,mt&&(hn||(hn=this._map(Ge,!0)),mt(hn,this._map(je)))}}Ge.parentId=Xn,Ze.push(me(Lt/Zt,en/Zt,Xn,Zt,hn))}else if(Ze.push(Ge),Zt>1)for(var Ut=0,U=yt;Ut<U.length;Ut+=1){var he=U[Ut],ot=Dt.points[he];ot.zoom<=Be||(ot.zoom=Be,Ze.push(ot))}}}return Ze},J.prototype._getOriginId=function(Ae){return Ae-this.points.length>>5},J.prototype._getOriginZoom=function(Ae){return(Ae-this.points.length)%32},J.prototype._map=function(Ae,Be){if(Ae.numPoints)return Be?wt({},Ae.properties):Ae.properties;var Ze=this.points[Ae.index].properties,ut=this.options.map(Ze);return Be&&ut===Ze?wt({},ut):ut};function me(Pe,Ae,Be,Ze,ut){return{x:He(Pe),y:He(Ae),zoom:1/0,id:Be,parentId:-1,numPoints:Ze,properties:ut}}function Oe(Pe,Ae){var Be=Pe.geometry.coordinates,Ze=Be[0],ut=Be[1];return{x:He(ee(Ze)),y:He(be(ut)),zoom:1/0,index:Ae,parentId:-1}}function Q(Pe){return{type:"Feature",id:Pe.id,properties:le(Pe),geometry:{type:"Point",coordinates:[et(Pe.x),tt(Pe.y)]}}}function le(Pe){var Ae=Pe.numPoints,Be=Ae>=1e4?Math.round(Ae/1e3)+"k":Ae>=1e3?Math.round(Ae/100)/10+"k":Ae;return wt(wt({},Pe.properties),{cluster:!0,cluster_id:Pe.id,point_count:Ae,point_count_abbreviated:Be})}function ee(Pe){return Pe/360+.5}function be(Pe){var Ae=Math.sin(Pe*Math.PI/180),Be=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return Be<0?0:Be>1?1:Be}function et(Pe){return(Pe-.5)*360}function tt(Pe){var Ae=(180-Pe*360)*Math.PI/180;return 360*Math.atan(Math.exp(Ae))/Math.PI-90}function wt(Pe,Ae){for(var Be in Ae)Pe[Be]=Ae[Be];return Pe}function gt(Pe){return Pe.x}function ft(Pe){return Pe.y}return J})},73897:function(_t){function W(D,q){(q==null||q>D.length)&&(q=D.length);for(var G=0,E=new Array(q);G<q;G++)E[G]=D[G];return E}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},85372:function(_t){function W(D){if(Array.isArray(D))return D}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},63405:function(_t,W,D){var q=D(73897);function G(E){if(Array.isArray(E))return q(E)}_t.exports=G,_t.exports.__esModule=!0,_t.exports.default=_t.exports},66115:function(_t){function W(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},76976:function(_t,W,D){var q=D(73808),G=D(69617),E=D(94993);function fe($,se,ce){return se=q(se),E($,G()?Reflect.construct(se,ce||[],q($).constructor):se.apply($,ce))}_t.exports=fe,_t.exports.__esModule=!0,_t.exports.default=_t.exports},56690:function(_t){function W(D,q){if(!(D instanceof q))throw new TypeError("Cannot call a class as a function")}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},89728:function(_t,W,D){var q=D(64062);function G(fe,$){for(var se=0;se<$.length;se++){var ce=$[se];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(fe,q(ce.key),ce)}}function E(fe,$,se){return $&&G(fe.prototype,$),se&&G(fe,se),Object.defineProperty(fe,"prototype",{writable:!1}),fe}_t.exports=E,_t.exports.__esModule=!0,_t.exports.default=_t.exports},73808:function(_t){function W(D){return _t.exports=W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(G){return G.__proto__||Object.getPrototypeOf(G)},_t.exports.__esModule=!0,_t.exports.default=_t.exports,W(D)}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},61655:function(_t,W,D){var q=D(6015);function G(E,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(fe&&fe.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),fe&&q(E,fe)}_t.exports=G,_t.exports.__esModule=!0,_t.exports.default=_t.exports},75263:function(_t,W,D){var q=D(18698).default;function G(fe){if(typeof WeakMap!="function")return null;var $=new WeakMap,se=new WeakMap;return(G=function(ye){return ye?se:$})(fe)}function E(fe,$){if(!$&&fe&&fe.__esModule)return fe;if(fe===null||q(fe)!="object"&&typeof fe!="function")return{default:fe};var se=G($);if(se&&se.has(fe))return se.get(fe);var ce={__proto__:null},ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in fe)if(ae!=="default"&&{}.hasOwnProperty.call(fe,ae)){var He=ye?Object.getOwnPropertyDescriptor(fe,ae):null;He&&(He.get||He.set)?Object.defineProperty(ce,ae,He):ce[ae]=fe[ae]}return ce.default=fe,se&&se.set(fe,ce),ce}_t.exports=E,_t.exports.__esModule=!0,_t.exports.default=_t.exports},69617:function(_t){function W(){try{var D=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(q){}return(_t.exports=W=function(){return!!D},_t.exports.__esModule=!0,_t.exports.default=_t.exports)()}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},79498:function(_t){function W(D){if(typeof Symbol!="undefined"&&D[Symbol.iterator]!=null||D["@@iterator"]!=null)return Array.from(D)}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},68872:function(_t){function W(D,q){var G=D==null?null:typeof Symbol!="undefined"&&D[Symbol.iterator]||D["@@iterator"];if(G!=null){var E,fe,$,se,ce=[],ye=!0,ae=!1;try{if($=(G=G.call(D)).next,q===0){if(Object(G)!==G)return;ye=!1}else for(;!(ye=(E=$.call(G)).done)&&(ce.push(E.value),ce.length!==q);ye=!0);}catch(He){ae=!0,fe=He}finally{try{if(!ye&&G.return!=null&&(se=G.return(),Object(se)!==se))return}finally{if(ae)throw fe}}return ce}}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},12218:function(_t){function W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},42281:function(_t){function W(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},94993:function(_t,W,D){var q=D(18698).default,G=D(66115);function E(fe,$){if($&&(q($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G(fe)}_t.exports=E,_t.exports.__esModule=!0,_t.exports.default=_t.exports},6015:function(_t){function W(D,q){return _t.exports=W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,fe){return E.__proto__=fe,E},_t.exports.__esModule=!0,_t.exports.default=_t.exports,W(D,q)}_t.exports=W,_t.exports.__esModule=!0,_t.exports.default=_t.exports},27424:function(_t,W,D){var q=D(85372),G=D(68872),E=D(86116),fe=D(12218);function $(se,ce){return q(se)||G(se,ce)||E(se,ce)||fe()}_t.exports=$,_t.exports.__esModule=!0,_t.exports.default=_t.exports},51589:function(_t,W,D){var q=D(85372),G=D(79498),E=D(86116),fe=D(12218);function $(se){return q(se)||G(se)||E(se)||fe()}_t.exports=$,_t.exports.__esModule=!0,_t.exports.default=_t.exports},861:function(_t,W,D){var q=D(63405),G=D(79498),E=D(86116),fe=D(42281);function $(se){return q(se)||G(se)||E(se)||fe()}_t.exports=$,_t.exports.__esModule=!0,_t.exports.default=_t.exports},86116:function(_t,W,D){var q=D(73897);function G(E,fe){if(E){if(typeof E=="string")return q(E,fe);var $=Object.prototype.toString.call(E).slice(8,-1);if($==="Object"&&E.constructor&&($=E.constructor.name),$==="Map"||$==="Set")return Array.from(E);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return q(E,fe)}}_t.exports=G,_t.exports.__esModule=!0,_t.exports.default=_t.exports},1449:function(_t,W,D){"use strict";D.d(W,{Tu:function(){return J},tw:function(){return ee},uf:function(){return Oe},yu:function(){return ae},zL:function(){return $}});var q=63710088e-1,G={centimeters:q*100,centimetres:q*100,degrees:q/111325,feet:q*3.28084,inches:q*39.37,kilometers:q/1e3,kilometres:q/1e3,meters:q,metres:q,miles:q/1609.344,millimeters:q*1e3,millimetres:q*1e3,nauticalmiles:q/1852,radians:1,yards:q*1.0936},E={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/q,yards:1.0936133},fe={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function $(Re,nt,qe){qe===void 0&&(qe={});var Ge={type:"Feature"};return(qe.id===0||qe.id)&&(Ge.id=qe.id),qe.bbox&&(Ge.bbox=qe.bbox),Ge.properties=nt||{},Ge.geometry=Re,Ge}function se(Re,nt,qe){switch(qe===void 0&&(qe={}),Re){case"Point":return ce(nt).geometry;case"LineString":return J(nt).geometry;case"Polygon":return ae(nt).geometry;case"MultiPoint":return le(nt).geometry;case"MultiLineString":return Q(nt).geometry;case"MultiPolygon":return ee(nt).geometry;default:throw new Error(Re+" is invalid")}}function ce(Re,nt,qe){if(qe===void 0&&(qe={}),!Re)throw new Error("coordinates is required");if(!Array.isArray(Re))throw new Error("coordinates must be an Array");if(Re.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ut(Re[0])||!ut(Re[1]))throw new Error("coordinates must contain numbers");var Ge={type:"Point",coordinates:Re};return $(Ge,nt,qe)}function ye(Re,nt,qe){return qe===void 0&&(qe={}),Oe(Re.map(function(Ge){return ce(Ge,nt)}),qe)}function ae(Re,nt,qe){qe===void 0&&(qe={});for(var Ge=0,Dt=Re;Ge<Dt.length;Ge++){var yt=Dt[Ge];if(yt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Le=0;Le<yt[yt.length-1].length;Le++)if(yt[yt.length-1][Le]!==yt[0][Le])throw new Error("First and last Position are not equivalent.")}var Zt={type:"Polygon",coordinates:Re};return $(Zt,nt,qe)}function He(Re,nt,qe){return qe===void 0&&(qe={}),Oe(Re.map(function(Ge){return ae(Ge,nt)}),qe)}function J(Re,nt,qe){if(qe===void 0&&(qe={}),Re.length<2)throw new Error("coordinates must be an array of two or more positions");var Ge={type:"LineString",coordinates:Re};return $(Ge,nt,qe)}function me(Re,nt,qe){return qe===void 0&&(qe={}),Oe(Re.map(function(Ge){return J(Ge,nt)}),qe)}function Oe(Re,nt){nt===void 0&&(nt={});var qe={type:"FeatureCollection"};return nt.id&&(qe.id=nt.id),nt.bbox&&(qe.bbox=nt.bbox),qe.features=Re,qe}function Q(Re,nt,qe){qe===void 0&&(qe={});var Ge={type:"MultiLineString",coordinates:Re};return $(Ge,nt,qe)}function le(Re,nt,qe){qe===void 0&&(qe={});var Ge={type:"MultiPoint",coordinates:Re};return $(Ge,nt,qe)}function ee(Re,nt,qe){qe===void 0&&(qe={});var Ge={type:"MultiPolygon",coordinates:Re};return $(Ge,nt,qe)}function be(Re,nt,qe){qe===void 0&&(qe={});var Ge={type:"GeometryCollection",geometries:Re};return $(Ge,nt,qe)}function et(Re,nt){if(nt===void 0&&(nt=0),nt&&!(nt>=0))throw new Error("precision must be a positive number");var qe=Math.pow(10,nt||0);return Math.round(Re*qe)/qe}function tt(Re,nt){nt===void 0&&(nt="kilometers");var qe=G[nt];if(!qe)throw new Error(nt+" units is invalid");return Re*qe}function wt(Re,nt){nt===void 0&&(nt="kilometers");var qe=G[nt];if(!qe)throw new Error(nt+" units is invalid");return Re/qe}function gt(Re,nt){return Pe(wt(Re,nt))}function ft(Re){var nt=Re%360;return nt<0&&(nt+=360),nt}function Pe(Re){var nt=Re%(2*Math.PI);return nt*180/Math.PI}function Ae(Re){var nt=Re%360;return nt*Math.PI/180}function Be(Re,nt,qe){if(nt===void 0&&(nt="kilometers"),qe===void 0&&(qe="kilometers"),!(Re>=0))throw new Error("length must be a positive number");return tt(wt(Re,nt),qe)}function Ze(Re,nt,qe){if(nt===void 0&&(nt="meters"),qe===void 0&&(qe="kilometers"),!(Re>=0))throw new Error("area must be a positive number");var Ge=fe[nt];if(!Ge)throw new Error("invalid original units");var Dt=fe[qe];if(!Dt)throw new Error("invalid final units");return Re/Ge*Dt}function ut(Re){return!isNaN(Re)&&Re!==null&&!Array.isArray(Re)}function tn(Re){return!!Re&&Re.constructor===Object}function De(Re){if(!Re)throw new Error("bbox is required");if(!Array.isArray(Re))throw new Error("bbox must be an Array");if(Re.length!==4&&Re.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Re.forEach(function(nt){if(!ut(nt))throw new Error("bbox must only contain numbers")})}function mt(Re){if(!Re)throw new Error("id is required");if(["string","number"].indexOf(typeof Re)===-1)throw new Error("id must be a number or a string")}},39034:function(_t,W,D){"use strict";D.d(W,{nG:function(){return J},pZ:function(){return G}});var q=D(1449);function G(tt,wt,gt){if(tt!==null)for(var ft,Pe,Ae,Be,Ze,ut,tn,De=0,mt=0,Re,nt=tt.type,qe=nt==="FeatureCollection",Ge=nt==="Feature",Dt=qe?tt.features.length:1,yt=0;yt<Dt;yt++){tn=qe?tt.features[yt].geometry:Ge?tt.geometry:tt,Re=tn?tn.type==="GeometryCollection":!1,Ze=Re?tn.geometries.length:1;for(var Le=0;Le<Ze;Le++){var Zt=0,yn=0;if(Be=Re?tn.geometries[Le]:tn,Be!==null){ut=Be.coordinates;var Tn=Be.type;switch(De=gt&&(Tn==="Polygon"||Tn==="MultiPolygon")?1:0,Tn){case null:break;case"Point":if(wt(ut,mt,yt,Zt,yn)===!1)return!1;mt++,Zt++;break;case"LineString":case"MultiPoint":for(ft=0;ft<ut.length;ft++){if(wt(ut[ft],mt,yt,Zt,yn)===!1)return!1;mt++,Tn==="MultiPoint"&&Zt++}Tn==="LineString"&&Zt++;break;case"Polygon":case"MultiLineString":for(ft=0;ft<ut.length;ft++){for(Pe=0;Pe<ut[ft].length-De;Pe++){if(wt(ut[ft][Pe],mt,yt,Zt,yn)===!1)return!1;mt++}Tn==="MultiLineString"&&Zt++,Tn==="Polygon"&&yn++}Tn==="Polygon"&&Zt++;break;case"MultiPolygon":for(ft=0;ft<ut.length;ft++){for(yn=0,Pe=0;Pe<ut[ft].length;Pe++){for(Ae=0;Ae<ut[ft][Pe].length-De;Ae++){if(wt(ut[ft][Pe][Ae],mt,yt,Zt,yn)===!1)return!1;mt++}yn++}Zt++}break;case"GeometryCollection":for(ft=0;ft<Be.geometries.length;ft++)if(G(Be.geometries[ft],wt,gt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E(tt,wt,gt,ft){var Pe=gt;return G(tt,function(Ae,Be,Ze,ut,tn){Be===0&&gt===void 0?Pe=Ae:Pe=wt(Pe,Ae,Be,Ze,ut,tn)},ft),Pe}function fe(tt,wt){var gt;switch(tt.type){case"FeatureCollection":for(gt=0;gt<tt.features.length&&wt(tt.features[gt].properties,gt)!==!1;gt++);break;case"Feature":wt(tt.properties,0);break}}function $(tt,wt,gt){var ft=gt;return fe(tt,function(Pe,Ae){Ae===0&&gt===void 0?ft=Pe:ft=wt(ft,Pe,Ae)}),ft}function se(tt,wt){if(tt.type==="Feature")wt(tt,0);else if(tt.type==="FeatureCollection")for(var gt=0;gt<tt.features.length&&wt(tt.features[gt],gt)!==!1;gt++);}function ce(tt,wt,gt){var ft=gt;return se(tt,function(Pe,Ae){Ae===0&&gt===void 0?ft=Pe:ft=wt(ft,Pe,Ae)}),ft}function ye(tt){var wt=[];return G(tt,function(gt){wt.push(gt)}),wt}function ae(tt,wt){var gt,ft,Pe,Ae,Be,Ze,ut,tn,De,mt,Re=0,nt=tt.type==="FeatureCollection",qe=tt.type==="Feature",Ge=nt?tt.features.length:1;for(gt=0;gt<Ge;gt++){for(Ze=nt?tt.features[gt].geometry:qe?tt.geometry:tt,tn=nt?tt.features[gt].properties:qe?tt.properties:{},De=nt?tt.features[gt].bbox:qe?tt.bbox:void 0,mt=nt?tt.features[gt].id:qe?tt.id:void 0,ut=Ze?Ze.type==="GeometryCollection":!1,Be=ut?Ze.geometries.length:1,Pe=0;Pe<Be;Pe++){if(Ae=ut?Ze.geometries[Pe]:Ze,Ae===null){if(wt(null,Re,tn,De,mt)===!1)return!1;continue}switch(Ae.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(wt(Ae,Re,tn,De,mt)===!1)return!1;break}case"GeometryCollection":{for(ft=0;ft<Ae.geometries.length;ft++)if(wt(Ae.geometries[ft],Re,tn,De,mt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Re++}}function He(tt,wt,gt){var ft=gt;return ae(tt,function(Pe,Ae,Be,Ze,ut){Ae===0&&gt===void 0?ft=Pe:ft=wt(ft,Pe,Ae,Be,Ze,ut)}),ft}function J(tt,wt){ae(tt,function(gt,ft,Pe,Ae,Be){var Ze=gt===null?null:gt.type;switch(Ze){case null:case"Point":case"LineString":case"Polygon":return wt((0,q.zL)(gt,Pe,{bbox:Ae,id:Be}),ft,0)===!1?!1:void 0}var ut;switch(Ze){case"MultiPoint":ut="Point";break;case"MultiLineString":ut="LineString";break;case"MultiPolygon":ut="Polygon";break}for(var tn=0;tn<gt.coordinates.length;tn++){var De=gt.coordinates[tn],mt={type:ut,coordinates:De};if(wt((0,q.zL)(mt,Pe),ft,tn)===!1)return!1}})}function me(tt,wt,gt){var ft=gt;return J(tt,function(Pe,Ae,Be){Ae===0&&Be===0&&gt===void 0?ft=Pe:ft=wt(ft,Pe,Ae,Be)}),ft}function Oe(tt,wt){J(tt,function(gt,ft,Pe){var Ae=0;if(gt.geometry){var Be=gt.geometry.type;if(!(Be==="Point"||Be==="MultiPoint")){var Ze,ut=0,tn=0,De=0;if(G(gt,function(mt,Re,nt,qe,Ge){if(Ze===void 0||ft>ut||qe>tn||Ge>De){Ze=mt,ut=ft,tn=qe,De=Ge,Ae=0;return}var Dt=lineString([Ze,mt],gt.properties);if(wt(Dt,ft,Pe,Ge,Ae)===!1)return!1;Ae++,Ze=mt})===!1)return!1}}})}function Q(tt,wt,gt){var ft=gt,Pe=!1;return Oe(tt,function(Ae,Be,Ze,ut,tn){Pe===!1&&gt===void 0?ft=Ae:ft=wt(ft,Ae,Be,Ze,ut,tn),Pe=!0}),ft}function le(tt,wt){if(!tt)throw new Error("geojson is required");J(tt,function(gt,ft,Pe){if(gt.geometry!==null){var Ae=gt.geometry.type,Be=gt.geometry.coordinates;switch(Ae){case"LineString":if(wt(gt,ft,Pe,0,0)===!1)return!1;break;case"Polygon":for(var Ze=0;Ze<Be.length;Ze++)if(wt(lineString(Be[Ze],gt.properties),ft,Pe,Ze)===!1)return!1;break}}})}function ee(tt,wt,gt){var ft=gt;return le(tt,function(Pe,Ae,Be,Ze){Ae===0&&gt===void 0?ft=Pe:ft=wt(ft,Pe,Ae,Be,Ze)}),ft}function be(tt,wt){if(wt=wt||{},!isObject(wt))throw new Error("options is invalid");var gt=wt.featureIndex||0,ft=wt.multiFeatureIndex||0,Pe=wt.geometryIndex||0,Ae=wt.segmentIndex||0,Be=wt.properties,Ze;switch(tt.type){case"FeatureCollection":gt<0&&(gt=tt.features.length+gt),Be=Be||tt.features[gt].properties,Ze=tt.features[gt].geometry;break;case"Feature":Be=Be||tt.properties,Ze=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ze=tt;break;default:throw new Error("geojson is invalid")}if(Ze===null)return null;var ut=Ze.coordinates;switch(Ze.type){case"Point":case"MultiPoint":return null;case"LineString":return Ae<0&&(Ae=ut.length+Ae-1),lineString([ut[Ae],ut[Ae+1]],Be,wt);case"Polygon":return Pe<0&&(Pe=ut.length+Pe),Ae<0&&(Ae=ut[Pe].length+Ae-1),lineString([ut[Pe][Ae],ut[Pe][Ae+1]],Be,wt);case"MultiLineString":return ft<0&&(ft=ut.length+ft),Ae<0&&(Ae=ut[ft].length+Ae-1),lineString([ut[ft][Ae],ut[ft][Ae+1]],Be,wt);case"MultiPolygon":return ft<0&&(ft=ut.length+ft),Pe<0&&(Pe=ut[ft].length+Pe),Ae<0&&(Ae=ut[ft][Pe].length-Ae-1),lineString([ut[ft][Pe][Ae],ut[ft][Pe][Ae+1]],Be,wt)}throw new Error("geojson is invalid")}function et(tt,wt){if(wt=wt||{},!isObject(wt))throw new Error("options is invalid");var gt=wt.featureIndex||0,ft=wt.multiFeatureIndex||0,Pe=wt.geometryIndex||0,Ae=wt.coordIndex||0,Be=wt.properties,Ze;switch(tt.type){case"FeatureCollection":gt<0&&(gt=tt.features.length+gt),Be=Be||tt.features[gt].properties,Ze=tt.features[gt].geometry;break;case"Feature":Be=Be||tt.properties,Ze=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ze=tt;break;default:throw new Error("geojson is invalid")}if(Ze===null)return null;var ut=Ze.coordinates;switch(Ze.type){case"Point":return point(ut,Be,wt);case"MultiPoint":return ft<0&&(ft=ut.length+ft),point(ut[ft],Be,wt);case"LineString":return Ae<0&&(Ae=ut.length+Ae),point(ut[Ae],Be,wt);case"Polygon":return Pe<0&&(Pe=ut.length+Pe),Ae<0&&(Ae=ut[Pe].length+Ae),point(ut[Pe][Ae],Be,wt);case"MultiLineString":return ft<0&&(ft=ut.length+ft),Ae<0&&(Ae=ut[ft].length+Ae),point(ut[ft][Ae],Be,wt);case"MultiPolygon":return ft<0&&(ft=ut.length+ft),Pe<0&&(Pe=ut[ft].length+Pe),Ae<0&&(Ae=ut[ft][Pe].length-Ae),point(ut[ft][Pe][Ae],Be,wt)}throw new Error("geojson is invalid")}},97582:function(_t,W,D){"use strict";D.d(W,{CR:function(){return be},Jh:function(){return Oe},Q_:function(){return De},XA:function(){return ee},ZT:function(){return G},_T:function(){return fe},ev:function(){return wt},mG:function(){return me},pi:function(){return E},pr:function(){return tt}});var q=function(yt,Le){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Zt,yn){Zt.__proto__=yn}||function(Zt,yn){for(var Tn in yn)Object.prototype.hasOwnProperty.call(yn,Tn)&&(Zt[Tn]=yn[Tn])},q(yt,Le)};function G(yt,Le){if(typeof Le!="function"&&Le!==null)throw new TypeError("Class extends value "+String(Le)+" is not a constructor or null");q(yt,Le);function Zt(){this.constructor=yt}yt.prototype=Le===null?Object.create(Le):(Zt.prototype=Le.prototype,new Zt)}var E=function(){return E=Object.assign||function(Le){for(var Zt,yn=1,Tn=arguments.length;yn<Tn;yn++){Zt=arguments[yn];for(var lr in Zt)Object.prototype.hasOwnProperty.call(Zt,lr)&&(Le[lr]=Zt[lr])}return Le},E.apply(this,arguments)};function fe(yt,Le){var Zt={};for(var yn in yt)Object.prototype.hasOwnProperty.call(yt,yn)&&Le.indexOf(yn)<0&&(Zt[yn]=yt[yn]);if(yt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Tn=0,yn=Object.getOwnPropertySymbols(yt);Tn<yn.length;Tn++)Le.indexOf(yn[Tn])<0&&Object.prototype.propertyIsEnumerable.call(yt,yn[Tn])&&(Zt[yn[Tn]]=yt[yn[Tn]]);return Zt}function $(yt,Le,Zt,yn){var Tn=arguments.length,lr=Tn<3?Le:yn===null?yn=Object.getOwnPropertyDescriptor(Le,Zt):yn,or;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")lr=Reflect.decorate(yt,Le,Zt,yn);else for(var Lt=yt.length-1;Lt>=0;Lt--)(or=yt[Lt])&&(lr=(Tn<3?or(lr):Tn>3?or(Le,Zt,lr):or(Le,Zt))||lr);return Tn>3&&lr&&Object.defineProperty(Le,Zt,lr),lr}function se(yt,Le){return function(Zt,yn){Le(Zt,yn,yt)}}function ce(yt,Le,Zt,yn,Tn,lr){function or(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var Lt=yn.kind,en=Lt==="getter"?"get":Lt==="setter"?"set":"value",hn=!Le&&yt?yn.static?yt:yt.prototype:null,Xn=Le||(hn?Object.getOwnPropertyDescriptor(hn,yn.name):{}),an,Pt=!1,zt=Zt.length-1;zt>=0;zt--){var je={};for(var rt in yn)je[rt]=rt==="access"?{}:yn[rt];for(var rt in yn.access)je.access[rt]=yn.access[rt];je.addInitializer=function(U){if(Pt)throw new TypeError("Cannot add initializers after decoration has completed");lr.push(or(U||null))};var Ut=(0,Zt[zt])(Lt==="accessor"?{get:Xn.get,set:Xn.set}:Xn[en],je);if(Lt==="accessor"){if(Ut===void 0)continue;if(Ut===null||typeof Ut!="object")throw new TypeError("Object expected");(an=or(Ut.get))&&(Xn.get=an),(an=or(Ut.set))&&(Xn.set=an),(an=or(Ut.init))&&Tn.unshift(an)}else(an=or(Ut))&&(Lt==="field"?Tn.unshift(an):Xn[en]=an)}hn&&Object.defineProperty(hn,yn.name,Xn),Pt=!0}function ye(yt,Le,Zt){for(var yn=arguments.length>2,Tn=0;Tn<Le.length;Tn++)Zt=yn?Le[Tn].call(yt,Zt):Le[Tn].call(yt);return yn?Zt:void 0}function ae(yt){return typeof yt=="symbol"?yt:"".concat(yt)}function He(yt,Le,Zt){return typeof Le=="symbol"&&(Le=Le.description?"[".concat(Le.description,"]"):""),Object.defineProperty(yt,"name",{configurable:!0,value:Zt?"".concat(Zt," ",Le):Le})}function J(yt,Le){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(yt,Le)}function me(yt,Le,Zt,yn){function Tn(lr){return lr instanceof Zt?lr:new Zt(function(or){or(lr)})}return new(Zt||(Zt=Promise))(function(lr,or){function Lt(Xn){try{hn(yn.next(Xn))}catch(an){or(an)}}function en(Xn){try{hn(yn.throw(Xn))}catch(an){or(an)}}function hn(Xn){Xn.done?lr(Xn.value):Tn(Xn.value).then(Lt,en)}hn((yn=yn.apply(yt,Le||[])).next())})}function Oe(yt,Le){var Zt={label:0,sent:function(){if(lr[0]&1)throw lr[1];return lr[1]},trys:[],ops:[]},yn,Tn,lr,or;return or={next:Lt(0),throw:Lt(1),return:Lt(2)},typeof Symbol=="function"&&(or[Symbol.iterator]=function(){return this}),or;function Lt(hn){return function(Xn){return en([hn,Xn])}}function en(hn){if(yn)throw new TypeError("Generator is already executing.");for(;or&&(or=0,hn[0]&&(Zt=0)),Zt;)try{if(yn=1,Tn&&(lr=hn[0]&2?Tn.return:hn[0]?Tn.throw||((lr=Tn.return)&&lr.call(Tn),0):Tn.next)&&!(lr=lr.call(Tn,hn[1])).done)return lr;switch(Tn=0,lr&&(hn=[hn[0]&2,lr.value]),hn[0]){case 0:case 1:lr=hn;break;case 4:return Zt.label++,{value:hn[1],done:!1};case 5:Zt.label++,Tn=hn[1],hn=[0];continue;case 7:hn=Zt.ops.pop(),Zt.trys.pop();continue;default:if(lr=Zt.trys,!(lr=lr.length>0&&lr[lr.length-1])&&(hn[0]===6||hn[0]===2)){Zt=0;continue}if(hn[0]===3&&(!lr||hn[1]>lr[0]&&hn[1]<lr[3])){Zt.label=hn[1];break}if(hn[0]===6&&Zt.label<lr[1]){Zt.label=lr[1],lr=hn;break}if(lr&&Zt.label<lr[2]){Zt.label=lr[2],Zt.ops.push(hn);break}lr[2]&&Zt.ops.pop(),Zt.trys.pop();continue}hn=Le.call(yt,Zt)}catch(Xn){hn=[6,Xn],Tn=0}finally{yn=lr=0}if(hn[0]&5)throw hn[1];return{value:hn[0]?hn[1]:void 0,done:!0}}}var Q=Object.create?function(yt,Le,Zt,yn){yn===void 0&&(yn=Zt);var Tn=Object.getOwnPropertyDescriptor(Le,Zt);(!Tn||("get"in Tn?!Le.__esModule:Tn.writable||Tn.configurable))&&(Tn={enumerable:!0,get:function(){return Le[Zt]}}),Object.defineProperty(yt,yn,Tn)}:function(yt,Le,Zt,yn){yn===void 0&&(yn=Zt),yt[yn]=Le[Zt]};function le(yt,Le){for(var Zt in yt)Zt!=="default"&&!Object.prototype.hasOwnProperty.call(Le,Zt)&&Q(Le,yt,Zt)}function ee(yt){var Le=typeof Symbol=="function"&&Symbol.iterator,Zt=Le&&yt[Le],yn=0;if(Zt)return Zt.call(yt);if(yt&&typeof yt.length=="number")return{next:function(){return yt&&yn>=yt.length&&(yt=void 0),{value:yt&&yt[yn++],done:!yt}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(yt,Le){var Zt=typeof Symbol=="function"&&yt[Symbol.iterator];if(!Zt)return yt;var yn=Zt.call(yt),Tn,lr=[],or;try{for(;(Le===void 0||Le-- >0)&&!(Tn=yn.next()).done;)lr.push(Tn.value)}catch(Lt){or={error:Lt}}finally{try{Tn&&!Tn.done&&(Zt=yn.return)&&Zt.call(yn)}finally{if(or)throw or.error}}return lr}function et(){for(var yt=[],Le=0;Le<arguments.length;Le++)yt=yt.concat(be(arguments[Le]));return yt}function tt(){for(var yt=0,Le=0,Zt=arguments.length;Le<Zt;Le++)yt+=arguments[Le].length;for(var yn=Array(yt),Tn=0,Le=0;Le<Zt;Le++)for(var lr=arguments[Le],or=0,Lt=lr.length;or<Lt;or++,Tn++)yn[Tn]=lr[or];return yn}function wt(yt,Le,Zt){if(Zt||arguments.length===2)for(var yn=0,Tn=Le.length,lr;yn<Tn;yn++)(lr||!(yn in Le))&&(lr||(lr=Array.prototype.slice.call(Le,0,yn)),lr[yn]=Le[yn]);return yt.concat(lr||Array.prototype.slice.call(Le))}function gt(yt){return this instanceof gt?(this.v=yt,this):new gt(yt)}function ft(yt,Le,Zt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yn=Zt.apply(yt,Le||[]),Tn,lr=[];return Tn={},or("next"),or("throw"),or("return"),Tn[Symbol.asyncIterator]=function(){return this},Tn;function or(Pt){yn[Pt]&&(Tn[Pt]=function(zt){return new Promise(function(je,rt){lr.push([Pt,zt,je,rt])>1||Lt(Pt,zt)})})}function Lt(Pt,zt){try{en(yn[Pt](zt))}catch(je){an(lr[0][3],je)}}function en(Pt){Pt.value instanceof gt?Promise.resolve(Pt.value.v).then(hn,Xn):an(lr[0][2],Pt)}function hn(Pt){Lt("next",Pt)}function Xn(Pt){Lt("throw",Pt)}function an(Pt,zt){Pt(zt),lr.shift(),lr.length&&Lt(lr[0][0],lr[0][1])}}function Pe(yt){var Le,Zt;return Le={},yn("next"),yn("throw",function(Tn){throw Tn}),yn("return"),Le[Symbol.iterator]=function(){return this},Le;function yn(Tn,lr){Le[Tn]=yt[Tn]?function(or){return(Zt=!Zt)?{value:gt(yt[Tn](or)),done:!1}:lr?lr(or):or}:lr}}function Ae(yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le=yt[Symbol.asyncIterator],Zt;return Le?Le.call(yt):(yt=typeof ee=="function"?ee(yt):yt[Symbol.iterator](),Zt={},yn("next"),yn("throw"),yn("return"),Zt[Symbol.asyncIterator]=function(){return this},Zt);function yn(lr){Zt[lr]=yt[lr]&&function(or){return new Promise(function(Lt,en){or=yt[lr](or),Tn(Lt,en,or.done,or.value)})}}function Tn(lr,or,Lt,en){Promise.resolve(en).then(function(hn){lr({value:hn,done:Lt})},or)}}function Be(yt,Le){return Object.defineProperty?Object.defineProperty(yt,"raw",{value:Le}):yt.raw=Le,yt}var Ze=Object.create?function(yt,Le){Object.defineProperty(yt,"default",{enumerable:!0,value:Le})}:function(yt,Le){yt.default=Le};function ut(yt){if(yt&&yt.__esModule)return yt;var Le={};if(yt!=null)for(var Zt in yt)Zt!=="default"&&Object.prototype.hasOwnProperty.call(yt,Zt)&&Q(Le,yt,Zt);return Ze(Le,yt),Le}function tn(yt){return yt&&yt.__esModule?yt:{default:yt}}function De(yt,Le,Zt,yn){if(Zt==="a"&&!yn)throw new TypeError("Private accessor was defined without a getter");if(typeof Le=="function"?yt!==Le||!yn:!Le.has(yt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Zt==="m"?yn:Zt==="a"?yn.call(yt):yn?yn.value:Le.get(yt)}function mt(yt,Le,Zt,yn,Tn){if(yn==="m")throw new TypeError("Private method is not writable");if(yn==="a"&&!Tn)throw new TypeError("Private accessor was defined without a setter");if(typeof Le=="function"?yt!==Le||!Tn:!Le.has(yt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return yn==="a"?Tn.call(yt,Zt):Tn?Tn.value=Zt:Le.set(yt,Zt),Zt}function Re(yt,Le){if(Le===null||typeof Le!="object"&&typeof Le!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof yt=="function"?Le===yt:yt.has(Le)}function nt(yt,Le,Zt){if(Le!=null){if(typeof Le!="object"&&typeof Le!="function")throw new TypeError("Object expected.");var yn;if(Zt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");yn=Le[Symbol.asyncDispose]}if(yn===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");yn=Le[Symbol.dispose]}if(typeof yn!="function")throw new TypeError("Object not disposable.");yt.stack.push({value:Le,dispose:yn,async:Zt})}else Zt&&yt.stack.push({async:!0});return Le}var qe=typeof SuppressedError=="function"?SuppressedError:function(yt,Le,Zt){var yn=new Error(Zt);return yn.name="SuppressedError",yn.error=yt,yn.suppressed=Le,yn};function Ge(yt){function Le(yn){yt.error=yt.hasError?new qe(yn,yt.error,"An error was suppressed during disposal."):yn,yt.hasError=!0}function Zt(){for(;yt.stack.length;){var yn=yt.stack.pop();try{var Tn=yn.dispose&&yn.dispose.call(yn.value);if(yn.async)return Promise.resolve(Tn).then(Zt,function(lr){return Le(lr),Zt()})}catch(lr){Le(lr)}}if(yt.hasError)throw yt.error}return Zt()}var Dt={__extends:G,__assign:E,__rest:fe,__decorate:$,__param:se,__metadata:J,__awaiter:me,__generator:Oe,__createBinding:Q,__exportStar:le,__values:ee,__read:be,__spread:et,__spreadArrays:tt,__spreadArray:wt,__await:gt,__asyncGenerator:ft,__asyncDelegator:Pe,__asyncValues:Ae,__makeTemplateObject:Be,__importStar:ut,__importDefault:tn,__classPrivateFieldGet:De,__classPrivateFieldSet:mt,__classPrivateFieldIn:Re,__addDisposableResource:nt,__disposeResources:Ge}}}]);
}());