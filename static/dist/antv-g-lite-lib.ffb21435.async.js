"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[890],{4559:function(Zu,Oi,G){G.d(Oi,{$6:function(){return Be},$p:function(){return Qs},Aw:function(){return me},Cd:function(){return Zn},Cm:function(){return O},Dk:function(){return he},E9:function(){return ge},Ee:function(){return Gn},F6:function(){return zi},G$:function(){return zr},G0:function(){return ai},GL:function(){return mt},GZ:function(){return w},I8:function(){return Xi},L1:function(){return no},N1:function(){return $r},NB:function(){return ae},O4:function(){return Ee},Oi:function(){return Qr},Pj:function(){return Bn},R:function(){return wr},RV:function(){return j},Rr:function(){return kt},Rx:function(){return Za},UL:function(){return zn},V1:function(){return cr},Vl:function(){return q},Xz:function(){return Su},YR:function(){return ds},ZA:function(){return Mt},_O:function(){return At},aH:function(){return Wn},b_:function(){return pi},bn:function(){return _},gz:function(){return En},h0:function(){return R},iM:function(){return oe},jB:function(){return li},jf:function(){return te},k9:function(){return Fn},lu:function(){return ut},mN:function(){return pe},mg:function(){return Nt},o6:function(){return Ba},qA:function(){return dn},s$:function(){return se},ux:function(){return xu},x1:function(){return Un},xA:function(){return Wt},xv:function(){return $t},y$:function(){return Yn}});var H=G(1413),D=G(15671),I=G(43144),ee=G(74902),K=G(53640),J=G(60136),re=G(97685),Kn=G(89093),k=G(77160),le=G(98333),A=G(85975),jt=G(35600),X=G(32945),wt=G(31437),je=G(25897),Fe=G(44078),de=G(95147),We=G(76714),ft=G(81957),Li=G(69877),Jn=G(71523),Qn=G(13882),Di=G(80450),qn=G(8614),jn=G(4848),er=G(75839),Ii=G(99872),tr=G(92455),_i=G(65850),Zi=G(28659),Bi=G(83555),ie=G(71154),Fi=G(5199),nr=G(90134),ht=G(45607),Gi=G(4637),Ui=G(84329),$=G(4942),rr=G(71937),Ge=G(11702),et=G(74165),en=G(15861),tt=G(37762),ze=G(45987);var Yi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof G.g!="undefined"?G.g:typeof self!="undefined"?self:{},ir={exports:{}};(function(n,i){(function(e,t){n.exports=t()})(Yi,function(){function e(y,g,p,x,C){t(y,g,p||0,x||y.length-1,C||s)}function t(y,g,p,x,C){for(;x>p;){if(x-p>600){var N=x-p+1,S=g-p+1,b=Math.log(N),B=.5*Math.exp(2*b/3),F=.5*Math.sqrt(b*B*(N-B)/N)*(S-N/2<0?-1:1),Y=Math.max(p,Math.floor(g-S*B/N+F)),V=Math.min(x,Math.floor(g+(N-S)*B/N+F));t(y,g,Y,V,C)}var L=y[g],U=p,z=x;for(r(y,p,g),C(y[x],L)>0&&r(y,p,x);U<z;){for(r(y,U,z),U++,z--;C(y[U],L)<0;)U++;for(;C(y[z],L)>0;)z--}C(y[p],L)===0?r(y,p,z):(z++,r(y,z,x)),z<=g&&(p=z+1),g<=z&&(x=z-1)}}function r(y,g,p){var x=y[g];y[g]=y[p],y[p]=x}function s(y,g){return y<g?-1:y>g?1:0}var a=function(g){g===void 0&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(g){var p=this.data,x=[];if(!M(g,p))return x;for(var C=this.toBBox,N=[];p;){for(var S=0;S<p.children.length;S++){var b=p.children[S],B=p.leaf?C(b):b;M(g,B)&&(p.leaf?x.push(b):T(g,B)?this._all(b,x):N.push(b))}p=N.pop()}return x},a.prototype.collides=function(g){var p=this.data;if(!M(g,p))return!1;for(var x=[];p;){for(var C=0;C<p.children.length;C++){var N=p.children[C],S=p.leaf?this.toBBox(N):N;if(M(g,S)){if(p.leaf||T(g,S))return!0;x.push(N)}}p=x.pop()}return!1},a.prototype.load=function(g){if(!(g&&g.length))return this;if(g.length<this._minEntries){for(var p=0;p<g.length;p++)this.insert(g[p]);return this}var x=this._build(g.slice(),0,g.length-1,0);if(!this.data.children.length)this.data=x;else if(this.data.height===x.height)this._splitRoot(this.data,x);else{if(this.data.height<x.height){var C=this.data;this.data=x,x=C}this._insert(x,this.data.height-x.height-1,!0)}return this},a.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},a.prototype.clear=function(){return this.data=P([]),this},a.prototype.remove=function(g,p){if(!g)return this;for(var x=this.data,C=this.toBBox(g),N=[],S=[],b,B,F;x||N.length;){if(x||(x=N.pop(),B=N[N.length-1],b=S.pop(),F=!0),x.leaf){var Y=o(g,x.children,p);if(Y!==-1)return x.children.splice(Y,1),N.push(x),this._condense(N),this}!F&&!x.leaf&&T(x,C)?(N.push(x),S.push(b),b=0,B=x,x=x.children[0]):B?(b++,x=B.children[b],F=!1):x=null}return this},a.prototype.toBBox=function(g){return g},a.prototype.compareMinX=function(g,p){return g.minX-p.minX},a.prototype.compareMinY=function(g,p){return g.minY-p.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(g){return this.data=g,this},a.prototype._all=function(g,p){for(var x=[];g;)g.leaf?p.push.apply(p,g.children):x.push.apply(x,g.children),g=x.pop();return p},a.prototype._build=function(g,p,x,C){var N=x-p+1,S=this._maxEntries,b;if(N<=S)return b=P(g.slice(p,x+1)),u(b,this.toBBox),b;C||(C=Math.ceil(Math.log(N)/Math.log(S)),S=Math.ceil(N/Math.pow(S,C-1))),b=P([]),b.leaf=!1,b.height=C;var B=Math.ceil(N/S),F=B*Math.ceil(Math.sqrt(S));Z(g,p,x,F,this.compareMinX);for(var Y=p;Y<=x;Y+=F){var V=Math.min(Y+F-1,x);Z(g,Y,V,B,this.compareMinY);for(var L=Y;L<=V;L+=B){var U=Math.min(L+B-1,V);b.children.push(this._build(g,L,U,C-1))}}return u(b,this.toBBox),b},a.prototype._chooseSubtree=function(g,p,x,C){for(;C.push(p),!(p.leaf||C.length-1===x);){for(var N=1/0,S=1/0,b=void 0,B=0;B<p.children.length;B++){var F=p.children[B],Y=v(F),V=m(g,F)-Y;V<S?(S=V,N=Y<N?Y:N,b=F):V===S&&Y<N&&(N=Y,b=F)}p=b||p.children[0]}return p},a.prototype._insert=function(g,p,x){var C=x?g:this.toBBox(g),N=[],S=this._chooseSubtree(C,this.data,p,N);for(S.children.push(g),c(S,C);p>=0&&N[p].children.length>this._maxEntries;)this._split(N,p),p--;this._adjustParentBBoxes(C,N,p)},a.prototype._split=function(g,p){var x=g[p],C=x.children.length,N=this._minEntries;this._chooseSplitAxis(x,N,C);var S=this._chooseSplitIndex(x,N,C),b=P(x.children.splice(S,x.children.length-S));b.height=x.height,b.leaf=x.leaf,u(x,this.toBBox),u(b,this.toBBox),p?g[p-1].children.push(b):this._splitRoot(x,b)},a.prototype._splitRoot=function(g,p){this.data=P([g,p]),this.data.height=g.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(g,p,x){for(var C,N=1/0,S=1/0,b=p;b<=x-p;b++){var B=l(g,0,b,this.toBBox),F=l(g,b,x,this.toBBox),Y=E(B,F),V=v(B)+v(F);Y<N?(N=Y,C=b,S=V<S?V:S):Y===N&&V<S&&(S=V,C=b)}return C||x-p},a.prototype._chooseSplitAxis=function(g,p,x){var C=g.leaf?this.compareMinX:f,N=g.leaf?this.compareMinY:h,S=this._allDistMargin(g,p,x,C),b=this._allDistMargin(g,p,x,N);S<b&&g.children.sort(C)},a.prototype._allDistMargin=function(g,p,x,C){g.children.sort(C);for(var N=this.toBBox,S=l(g,0,p,N),b=l(g,x-p,x,N),B=d(S)+d(b),F=p;F<x-p;F++){var Y=g.children[F];c(S,g.leaf?N(Y):Y),B+=d(S)}for(var V=x-p-1;V>=p;V--){var L=g.children[V];c(b,g.leaf?N(L):L),B+=d(b)}return B},a.prototype._adjustParentBBoxes=function(g,p,x){for(var C=x;C>=0;C--)c(p[C],g)},a.prototype._condense=function(g){for(var p=g.length-1,x=void 0;p>=0;p--)g[p].children.length===0?p>0?(x=g[p-1].children,x.splice(x.indexOf(g[p]),1)):this.clear():u(g[p],this.toBBox)};function o(y,g,p){if(!p)return g.indexOf(y);for(var x=0;x<g.length;x++)if(p(y,g[x]))return x;return-1}function u(y,g){l(y,0,y.children.length,g,y)}function l(y,g,p,x,C){C||(C=P(null)),C.minX=1/0,C.minY=1/0,C.maxX=-1/0,C.maxY=-1/0;for(var N=g;N<p;N++){var S=y.children[N];c(C,y.leaf?x(S):S)}return C}function c(y,g){return y.minX=Math.min(y.minX,g.minX),y.minY=Math.min(y.minY,g.minY),y.maxX=Math.max(y.maxX,g.maxX),y.maxY=Math.max(y.maxY,g.maxY),y}function f(y,g){return y.minX-g.minX}function h(y,g){return y.minY-g.minY}function v(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function d(y){return y.maxX-y.minX+(y.maxY-y.minY)}function m(y,g){return(Math.max(g.maxX,y.maxX)-Math.min(g.minX,y.minX))*(Math.max(g.maxY,y.maxY)-Math.min(g.minY,y.minY))}function E(y,g){var p=Math.max(y.minX,g.minX),x=Math.max(y.minY,g.minY),C=Math.min(y.maxX,g.maxX),N=Math.min(y.maxY,g.maxY);return Math.max(0,C-p)*Math.max(0,N-x)}function T(y,g){return y.minX<=g.minX&&y.minY<=g.minY&&g.maxX<=y.maxX&&g.maxY<=y.maxY}function M(y,g){return g.minX<=y.maxX&&g.minY<=y.maxY&&g.maxX>=y.minX&&g.maxY>=y.minY}function P(y){return{children:y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Z(y,g,p,x,C){for(var N=[g,p];N.length;)if(p=N.pop(),g=N.pop(),!(p-g<=x)){var S=g+Math.ceil((p-g)/x/2)*x;e(y,S,g,p,C),N.push(g,S,S,p)}}return a})})(ir);var Wi=ir.exports,_=function(n){return n.GROUP="g",n.FRAGMENT="fragment",n.CIRCLE="circle",n.ELLIPSE="ellipse",n.IMAGE="image",n.RECT="rect",n.LINE="line",n.POLYLINE="polyline",n.POLYGON="polygon",n.TEXT="text",n.PATH="path",n.HTML="html",n.MESH="mesh",n}({}),Ct=function(n){return n[n.ZERO=0]="ZERO",n[n.NEGATIVE_ONE=1]="NEGATIVE_ONE",n}({}),zi=function(){function n(){(0,D.Z)(this,n),this.plugins=[]}return(0,I.Z)(n,[{key:"addRenderingPlugin",value:function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)}},{key:"removeAllRenderingPlugins",value:function(){var e=this;this.plugins.forEach(function(t){var r=e.context.renderingPlugins.indexOf(t);r>=0&&e.context.renderingPlugins.splice(r,1)})}}])}(),Xi=function(){function n(i){(0,D.Z)(this,n),this.clipSpaceNearZ=Ct.NEGATIVE_ONE,this.plugins=[],this.config=(0,H.Z)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},i)}return(0,I.Z)(n,[{key:"registerPlugin",value:function(e){var t=this.plugins.findIndex(function(r){return r===e});t===-1&&this.plugins.push(e)}},{key:"unregisterPlugin",value:function(e){var t=this.plugins.findIndex(function(r){return r===e});t>-1&&this.plugins.splice(t,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(e){return this.plugins.find(function(t){return t.name===e})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(e){Object.assign(this.config,e)}}])}(),tn=k.IH,nt=k.JG,Vi=k.Fp,$i=k.VV,ar=k.bA,nn=k.lu,pe=function(){function n(){(0,D.Z)(this,n),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return(0,I.Z)(n,[{key:"update",value:function(e,t){nt(this.center,e),nt(this.halfExtents,t),nn(this.min,this.center,this.halfExtents),tn(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(e,t){tn(this.center,t,e),ar(this.center,this.center,.5),nn(this.halfExtents,t,e),ar(this.halfExtents,this.halfExtents,.5),nt(this.min,e),nt(this.max,t)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){if(!n.isEmpty(e)){if(n.isEmpty(this)){this.setMinMax(e.getMin(),e.getMax());return}var t=this.center,r=t[0],s=t[1],a=t[2],o=this.halfExtents,u=o[0],l=o[1],c=o[2],f=r-u,h=r+u,v=s-l,d=s+l,m=a-c,E=a+c,T=e.center,M=T[0],P=T[1],Z=T[2],y=e.halfExtents,g=y[0],p=y[1],x=y[2],C=M-g,N=M+g,S=P-p,b=P+p,B=Z-x,F=Z+x;C<f&&(f=C),N>h&&(h=N),S<v&&(v=S),b>d&&(d=b),B<m&&(m=B),F>E&&(E=F),t[0]=(f+h)*.5,t[1]=(v+d)*.5,t[2]=(m+E)*.5,o[0]=(h-f)*.5,o[1]=(d-v)*.5,o[2]=(E-m)*.5,this.min[0]=f,this.min[1]=v,this.min[2]=m,this.max[0]=h,this.max[1]=d,this.max[2]=E}}},{key:"setFromTransformedAABB",value:function(e,t){var r=this.center,s=this.halfExtents,a=e.center,o=e.halfExtents,u=t[0],l=t[4],c=t[8],f=t[1],h=t[5],v=t[9],d=t[2],m=t[6],E=t[10],T=Math.abs(u),M=Math.abs(l),P=Math.abs(c),Z=Math.abs(f),y=Math.abs(h),g=Math.abs(v),p=Math.abs(d),x=Math.abs(m),C=Math.abs(E);r[0]=t[12]+u*a[0]+l*a[1]+c*a[2],r[1]=t[13]+f*a[0]+h*a[1]+v*a[2],r[2]=t[14]+d*a[0]+m*a[1]+E*a[2],s[0]=T*o[0]+M*o[1]+P*o[2],s[1]=Z*o[0]+y*o[1]+g*o[2],s[2]=p*o[0]+x*o[1]+C*o[2],nn(this.min,r,s),tn(this.max,r,s)}},{key:"intersects",value:function(e){var t=this.getMax(),r=this.getMin(),s=e.getMax(),a=e.getMin();return r[0]<=s[0]&&t[0]>=a[0]&&r[1]<=s[1]&&t[1]>=a[1]&&r[2]<=s[2]&&t[2]>=a[2]}},{key:"intersection",value:function(e){if(!this.intersects(e))return null;var t=new n,r=Vi([0,0,0],this.getMin(),e.getMin()),s=$i([0,0,0],this.getMax(),e.getMax());return t.setMinMax(r,s),t}},{key:"getNegativeFarPoint",value:function(e){return e.pnVertexFlag===273?nt([0,0,0],this.min):e.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:e.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(e){return e.pnVertexFlag===273?nt([0,0,0],this.max):e.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:e.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(e){return!e||e.halfExtents[0]===0&&e.halfExtents[1]===0&&e.halfExtents[2]===0}}])}(),Hi=function(){function n(i,e){(0,D.Z)(this,n),this.distance=i||0,this.normal=e||k.al(0,1,0),this.updatePNVertexFlag()}return(0,I.Z)(n,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(e){return k.AK(e,this.normal)-this.distance}},{key:"normalize",value:function(){var e=1/k.Zh(this.normal);k.bA(this.normal,this.normal,e),this.distance*=e}},{key:"intersectsLine",value:function(e,t,r){var s=this.distanceToPoint(e),a=this.distanceToPoint(t),o=s/(s-a),u=o>=0&&o<=1;return u&&r&&k.t7(r,e,t,o),u}}])}(),rt=function(n){return n[n.OUTSIDE=4294967295]="OUTSIDE",n[n.INSIDE=0]="INSIDE",n[n.INDETERMINATE=2147483647]="INDETERMINATE",n}({}),Ki=function(){function n(i){if((0,D.Z)(this,n),this.planes=[],i)this.planes=i;else for(var e=0;e<6;e++)this.planes.push(new Hi)}return(0,I.Z)(n,[{key:"extractFromVPMatrix",value:function(e){var t=(0,re.Z)(e,16),r=t[0],s=t[1],a=t[2],o=t[3],u=t[4],l=t[5],c=t[6],f=t[7],h=t[8],v=t[9],d=t[10],m=t[11],E=t[12],T=t[13],M=t[14],P=t[15];k.t8(this.planes[0].normal,o-r,f-u,m-h),this.planes[0].distance=P-E,k.t8(this.planes[1].normal,o+r,f+u,m+h),this.planes[1].distance=P+E,k.t8(this.planes[2].normal,o+s,f+l,m+v),this.planes[2].distance=P+T,k.t8(this.planes[3].normal,o-s,f-l,m-v),this.planes[3].distance=P-T,k.t8(this.planes[4].normal,o-a,f-c,m-d),this.planes[4].distance=P-M,k.t8(this.planes[5].normal,o+a,f+c,m+d),this.planes[5].distance=P+M,this.planes.forEach(function(Z){Z.normalize(),Z.updatePNVertexFlag()})}}])}(),ge=function(){function n(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;(0,D.Z)(this,n),this.x=0,this.y=0,this.x=i,this.y=e}return(0,I.Z)(n,[{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y}}])}(),it=function(){function n(i,e,t,r){(0,D.Z)(this,n),this.x=i,this.y=e,this.width=t,this.height=r,this.left=i,this.right=i+t,this.top=e,this.bottom=e+r}return(0,I.Z)(n,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(e){return new n(e.x,e.y,e.width,e.height)}},{key:"applyTransform",value:function(e,t){var r=le.al(e.x,e.y,0,1),s=le.al(e.x+e.width,e.y,0,1),a=le.al(e.x,e.y+e.height,0,1),o=le.al(e.x+e.width,e.y+e.height,0,1),u=le.Ue(),l=le.Ue(),c=le.Ue(),f=le.Ue();le.fF(u,r,t),le.fF(l,s,t),le.fF(c,a,t),le.fF(f,o,t);var h=Math.min(u[0],l[0],c[0],f[0]),v=Math.min(u[1],l[1],c[1],f[1]),d=Math.max(u[0],l[0],c[0],f[0]),m=Math.max(u[1],l[1],c[1],f[1]);return n.fromRect({x:h,y:v,width:d-h,height:m-v})}}])}(),te="Method not implemented.",at="Use document.documentElement instead.",Ji="Cannot append a destroyed element.";function At(n){return n===void 0?0:n>360||n<-360?n%360:n}var rn=k.Ue();function Ee(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(n)&&n.length===3?t?k.d9(n):k.JG(rn,n):(0,je.Z)(n)?t?k.al(n,i,e):k.t8(rn,n,i,e):t?k.al(n[0],n[1]||i,n[2]||e):k.t8(rn,n[0],n[1]||i,n[2]||e)}var Qi=Math.PI/180;function q(n){return n*Qi}var qi=180/Math.PI;function Ne(n){return n*qi}var ji=.9;function Bu(n){return n%=400,n<0&&(n+=400),n*ji}function Fu(n){return n/360}function ea(n){return 360*n}var Rt=Math.PI/2;function ta(n,i){var e=i[0],t=i[1],r=i[2],s=i[3],a=e*e,o=t*t,u=r*r,l=s*s,c=a+o+u+l,f=e*s-t*r;return f>.499995*c?(n[0]=Rt,n[1]=2*Math.atan2(t,e),n[2]=0):f<-.499995*c?(n[0]=-Rt,n[1]=2*Math.atan2(t,e),n[2]=0):(n[0]=Math.asin(2*(e*r-s*t)),n[1]=Math.atan2(2*(e*s+t*r),1-2*(u+l)),n[2]=Math.atan2(2*(e*t+r*s),1-2*(o+u))),n}function na(n,i){var e,t,r=A.getScaling(k.Ue(),i),s=(0,re.Z)(r,3),a=s[0],o=s[1],u=s[2],l=Math.asin(-i[2]/a);return l<Rt?l>-Rt?(e=Math.atan2(i[6]/o,i[10]/u),t=Math.atan2(i[1]/a,i[0]/a)):(t=0,e=-Math.atan2(i[4]/o,i[5]/o)):(t=0,e=Math.atan2(i[4]/o,i[5]/o)),n[0]=e,n[1]=l,n[2]=t,n}function an(n,i){return i.length===16?na(n,i):ta(n,i)}function ra(n,i,e,t,r){var s=Math.cos(n),a=Math.sin(n);return jt.al(t*s,r*a,0,-t*a,r*s,0,i,e,1)}function ia(n,i,e,t,r,s,a){var o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,u=2*s,l=e-i,c=t-r,f=u/l,h=u/c,v=(e+i)/l,d=(t+r)/c,m,E,T=a-s,M=a*s;return o?(m=-a/T,E=-M/T):(m=-(a+s)/T,E=-2*M/T),n[0]=f,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=h,n[6]=0,n[7]=0,n[8]=v,n[9]=d,n[10]=m,n[11]=-1,n[12]=0,n[13]=0,n[14]=E,n[15]=0,n}function sr(n){var i=n[0],e=n[1],t=n[3],r=n[4],s=Math.sqrt(i*i+e*e),a=Math.sqrt(t*t+r*r),o=i*r-e*t;if(o<0&&(i<r?s=-s:a=-a),s){var u=1/s;i*=u,e*=u}if(a){var l=1/a;t*=l,r*=l}var c=Math.atan2(e,i),f=Ne(c);return[n[6],n[7],s,a,f]}var Le=A.create(),Ce=A.create(),vt=le.Ue(),W=[k.Ue(),k.Ue(),k.Ue()],or=k.Ue();function aa(n,i,e,t,r,s){if(!sa(Le,n)||(A.copy(Ce,Le),Ce[3]=0,Ce[7]=0,Ce[11]=0,Ce[15]=1,Math.abs(A.determinant(Ce))<1e-8))return!1;var a=Le[3],o=Le[7],u=Le[11],l=Le[12],c=Le[13],f=Le[14],h=Le[15];if(a!==0||o!==0||u!==0){vt[0]=a,vt[1]=o,vt[2]=u,vt[3]=h;var v=A.invert(Ce,Ce);if(!v)return!1;A.transpose(Ce,Ce),le.fF(r,vt,Ce)}else r[0]=r[1]=r[2]=0,r[3]=1;if(i[0]=l,i[1]=c,i[2]=f,oa(W,Le),e[0]=k.kE(W[0]),k.Fv(W[0],W[0]),t[0]=k.AK(W[0],W[1]),sn(W[1],W[1],W[0],1,-t[0]),e[1]=k.kE(W[1]),k.Fv(W[1],W[1]),t[0]/=e[1],t[1]=k.AK(W[0],W[2]),sn(W[2],W[2],W[0],1,-t[1]),t[2]=k.AK(W[1],W[2]),sn(W[2],W[2],W[1],1,-t[2]),e[2]=k.kE(W[2]),k.Fv(W[2],W[2]),t[1]/=e[2],t[2]/=e[2],k.kC(or,W[1],W[2]),k.AK(W[0],or)<0)for(var d=0;d<3;d++)e[d]*=-1,W[d][0]*=-1,W[d][1]*=-1,W[d][2]*=-1;return s[0]=.5*Math.sqrt(Math.max(1+W[0][0]-W[1][1]-W[2][2],0)),s[1]=.5*Math.sqrt(Math.max(1-W[0][0]+W[1][1]-W[2][2],0)),s[2]=.5*Math.sqrt(Math.max(1-W[0][0]-W[1][1]+W[2][2],0)),s[3]=.5*Math.sqrt(Math.max(1+W[0][0]+W[1][1]+W[2][2],0)),W[2][1]>W[1][2]&&(s[0]=-s[0]),W[0][2]>W[2][0]&&(s[1]=-s[1]),W[1][0]>W[0][1]&&(s[2]=-s[2]),!0}function sa(n,i){var e=i[15];if(e===0)return!1;for(var t=1/e,r=0;r<16;r++)n[r]=i[r]*t;return!0}function oa(n,i){n[0][0]=i[0],n[0][1]=i[1],n[0][2]=i[2],n[1][0]=i[4],n[1][1]=i[5],n[1][2]=i[6],n[2][0]=i[8],n[2][1]=i[9],n[2][2]=i[10]}function sn(n,i,e,t,r){n[0]=i[0]*t+e[0]*r,n[1]=i[1]*t+e[1]*r,n[2]=i[2]*t+e[2]*r}var oe=function(n){return n[n.ORBITING=0]="ORBITING",n[n.EXPLORING=1]="EXPLORING",n[n.TRACKING=2]="TRACKING",n}({}),on=function(n){return n[n.DEFAULT=0]="DEFAULT",n[n.ROTATIONAL=1]="ROTATIONAL",n[n.TRANSLATIONAL=2]="TRANSLATIONAL",n[n.CINEMATIC=3]="CINEMATIC",n}({}),Se=function(n){return n[n.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",n[n.PERSPECTIVE=1]="PERSPECTIVE",n}({}),ur={UPDATED:"updated"},lr=2e-4,cr=function(){function n(){(0,D.Z)(this,n),this.clipSpaceNearZ=Ct.NEGATIVE_ONE,this.eventEmitter=new Kn.Z,this.matrix=A.create(),this.right=k.al(1,0,0),this.up=k.al(0,1,0),this.forward=k.al(0,0,1),this.position=k.al(0,0,1),this.focalPoint=k.al(0,0,0),this.distanceVector=k.al(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=A.create(),this.projectionMatrixInverse=A.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=oe.EXPLORING,this.trackingMode=on.DEFAULT,this.projectionMode=Se.PERSPECTIVE,this.frustum=new Ki,this.orthoMatrix=A.create()}return(0,I.Z)(n,[{key:"isOrtho",value:function(){return this.projectionMode===Se.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(e){this.enableUpdate=e}},{key:"setType",value:function(e,t){return this.type=e,this.type===oe.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===oe.TRACKING&&t!==void 0&&this.setTrackingMode(t),this}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this}},{key:"setTrackingMode",value:function(e){if(this.type!==oe.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this}},{key:"setWorldRotation",value:function(e){return this.rotateWorld=e,this._getAngles(),this}},{key:"getViewTransform",value:function(){return A.invert(A.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(e,t){var r=A.fromTranslation(A.create(),[e,t,0]);this.jitteredProjectionMatrix=A.multiply(A.create(),r,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this}},{key:"setProjectionMatrix",value:function(e){this.projectionMatrix=e}},{key:"setFov",value:function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this}},{key:"setNear",value:function(e){return this.projectionMode===Se.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this}},{key:"setFar",value:function(e){return this.projectionMode===Se.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this}},{key:"setViewOffset",value:function(e,t,r,s,a,o){return this.aspect=e/t,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.projectionMode===Se.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Se.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(e){return this.zoom=e,this.projectionMode===Se.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Se.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(e,t){var r=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),s=r.x,a=r.y,o=this.roll;this.rotate(0,0,-o),this.setPosition(s,a),this.setFocalPoint(s,a),this.setZoom(e),this.rotate(0,0,o);var u=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),l=u.x,c=u.y,f=k.al(l-s,c-a,0),h=k.AK(f,this.right)/k.kE(this.right),v=k.AK(f,this.up)/k.kE(this.up),d=this.getPosition(),m=(0,re.Z)(d,2),E=m[0],T=m[1],M=this.getFocalPoint(),P=(0,re.Z)(M,2),Z=P[0],y=P[1];return this.setPosition(E-h,T-v),this.setFocalPoint(Z-h,y-v),this}},{key:"setPerspective",value:function(e,t,r,s){var a;this.projectionMode=Se.PERSPECTIVE,this.fov=r,this.near=e,this.far=t,this.aspect=s;var o=this.near*Math.tan(q(.5*this.fov))/this.zoom,u=2*o,l=this.aspect*u,c=-.5*l;if((a=this.view)!==null&&a!==void 0&&a.enabled){var f=this.view.fullWidth,h=this.view.fullHeight;c+=this.view.offsetX*l/f,o-=this.view.offsetY*u/h,l*=this.view.width/f,u*=this.view.height/h}return ia(this.projectionMatrix,c,c+l,o-u,o,e,this.far,this.clipSpaceNearZ===Ct.ZERO),A.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(e,t,r,s,a,o){var u;this.projectionMode=Se.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=r,this.bottom=s,this.near=a,this.far=o;var l=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),f=(this.rright+this.left)/2,h=(this.top+this.bottom)/2,v=f-l,d=f+l,m=h+c,E=h-c;if((u=this.view)!==null&&u!==void 0&&u.enabled){var T=(this.rright-this.left)/this.view.fullWidth/this.zoom,M=(this.top-this.bottom)/this.view.fullHeight/this.zoom;v+=T*this.view.offsetX,d=v+T*this.view.width,m-=M*this.view.offsetY,E=m-M*this.view.height}return this.clipSpaceNearZ===Ct.NEGATIVE_ONE?A.ortho(this.projectionMatrix,v,d,m,E,a,o):A.orthoZO(this.projectionMatrix,v,d,m,E,a,o),A.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],s=Ee(e,t,r);return this._setPosition(s),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],s=k.al(0,1,0);if(this.focalPoint=Ee(e,t,r),this.trackingMode===on.CINEMATIC){var a=k.$X(k.Ue(),this.focalPoint,this.position);e=a[0],t=a[1],r=a[2];var o=k.kE(a),u=Ne(Math.asin(t/o)),l=90+Ne(Math.atan2(r,e)),c=A.create();A.rotateY(c,c,q(l)),A.rotateX(c,c,q(u)),s=k.fF(k.Ue(),[0,1,0],c)}return A.invert(this.matrix,A.lookAt(A.create(),this.position,this.focalPoint,s)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<lr&&(this.distance=lr),this.dollyingStep=this.distance/100;var t=k.Ue();e=this.distance;var r=this.forward,s=this.focalPoint;return t[0]=e*r[0]+s[0],t[1]=e*r[1]+s[1],t[2]=e*r[2]+s[2],this._setPosition(t),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this}},{key:"setAzimuth",value:function(e){return this.azimuth=At(e),this.computeMatrix(),this._getAxes(),this.type===oe.ORBITING||this.type===oe.EXPLORING?this._getPosition():this.type===oe.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(e){return this.elevation=At(e),this.computeMatrix(),this._getAxes(),this.type===oe.ORBITING||this.type===oe.EXPLORING?this._getPosition():this.type===oe.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(e){return this.roll=At(e),this.computeMatrix(),this._getAxes(),this.type===oe.ORBITING||this.type===oe.EXPLORING?this._getPosition():this.type===oe.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var e=X.yY(X.Ue(),[0,0,1],q(this.roll));A.identity(this.matrix);var t=X.yY(X.Ue(),[1,0,0],q((this.rotateWorld&&this.type!==oe.TRACKING||this.type===oe.TRACKING?1:-1)*this.elevation)),r=X.yY(X.Ue(),[0,1,0],q((this.rotateWorld&&this.type!==oe.TRACKING||this.type===oe.TRACKING?1:-1)*this.azimuth)),s=X.Jp(X.Ue(),r,t);s=X.Jp(X.Ue(),s,e);var a=A.fromQuat(A.create(),s);this.type===oe.ORBITING||this.type===oe.EXPLORING?(A.translate(this.matrix,this.matrix,this.focalPoint),A.multiply(this.matrix,this.matrix,a),A.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===oe.TRACKING&&(A.translate(this.matrix,this.matrix,this.position),A.multiply(this.matrix,this.matrix,a))}},{key:"_setPosition",value:function(e,t,r){this.position=Ee(e,t,r);var s=this.matrix;s[12]=this.position[0],s[13]=this.position[1],s[14]=this.position[2],s[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){k.JG(this.right,Ee(le.fF(le.Ue(),[1,0,0,0],this.matrix))),k.JG(this.up,Ee(le.fF(le.Ue(),[0,1,0,0],this.matrix))),k.JG(this.forward,Ee(le.fF(le.Ue(),[0,0,1,0],this.matrix))),k.Fv(this.right,this.right),k.Fv(this.up,this.up),k.Fv(this.forward,this.forward)}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],t=this.distanceVector[1],r=this.distanceVector[2],s=k.kE(this.distanceVector);if(s===0){this.elevation=0,this.azimuth=0;return}this.type===oe.TRACKING?(this.elevation=Ne(Math.asin(t/s)),this.azimuth=Ne(Math.atan2(-e,-r))):this.rotateWorld?(this.elevation=Ne(Math.asin(t/s)),this.azimuth=Ne(Math.atan2(-e,-r))):(this.elevation=-Ne(Math.asin(t/s)),this.azimuth=-Ne(Math.atan2(-e,-r)))}},{key:"_getPosition",value:function(){k.JG(this.position,Ee(le.fF(le.Ue(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){k.kK(this.distanceVector,[0,0,-this.distance],jt.xO(jt.Ue(),this.matrix)),k.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=k.$X(k.Ue(),this.focalPoint,this.position),this.distance=k.kE(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===Se.ORTHOGRAPHIC){var e=this.position,t=X.yY(X.Ue(),[0,0,1],-this.roll*Math.PI/180);A.fromRotationTranslationScaleOrigin(this.orthoMatrix,t,k.al((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),k.al(this.zoom,this.zoom,1),e)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var e=this.getViewTransform(),t=A.multiply(A.create(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(ur.UPDATED)}}},{key:"rotate",value:function(e,t,r){throw new Error(te)}},{key:"pan",value:function(e,t){throw new Error(te)}},{key:"dolly",value:function(e){throw new Error(te)}},{key:"createLandmark",value:function(e,t){throw new Error(te)}},{key:"gotoLandmark",value:function(e,t){throw new Error(te)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(te)}}])}(),ua=function(n){return n[n.Standard=0]="Standard",n}({}),bt=function(n){return n[n.ADDED=0]="ADDED",n[n.REMOVED=1]="REMOVED",n[n.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",n}({}),fr={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new it(0,0,0,0)},R=function(n){return n.COORDINATE="<coordinate>",n.COLOR="<color>",n.PAINT="<paint>",n.NUMBER="<number>",n.ANGLE="<angle>",n.OPACITY_VALUE="<opacity-value>",n.SHADOW_BLUR="<shadow-blur>",n.LENGTH="<length>",n.PERCENTAGE="<percentage>",n.LENGTH_PERCENTAGE="<length> | <percentage>",n.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",n.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",n.LIST_OF_POINTS="<list-of-points>",n.PATH="<path>",n.FILTER="<filter>",n.Z_INDEX="<z-index>",n.OFFSET_DISTANCE="<offset-distance>",n.DEFINED_PATH="<defined-path>",n.MARKER="<marker>",n.TRANSFORM="<transform>",n.TRANSFORM_ORIGIN="<transform-origin>",n.TEXT="<text>",n.TEXT_TRANSFORM="<text-transform>",n}({});function un(n,i,e){n.prototype=i.prototype=e,e.constructor=n}function hr(n,i){var e=Object.create(n.prototype);for(var t in i)e[t]=i[t];return e}function dt(){}var gt=.7,Ot=1/gt,st="\\s*([+-]?\\d+)\\s*",pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",De="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",la=/^#([0-9a-f]{3,8})$/,ca=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),fa=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),ha=new RegExp(`^rgba\\(${st},${st},${st},${pt}\\)$`),va=new RegExp(`^rgba\\(${De},${De},${De},${pt}\\)$`),da=new RegExp(`^hsl\\(${pt},${De},${De}\\)$`),ga=new RegExp(`^hsla\\(${pt},${De},${De},${pt}\\)$`),vr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};un(dt,Lt,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:dr,formatHex:dr,formatHex8:pa,formatHsl:ma,formatRgb:gr,toString:gr});function dr(){return this.rgb().formatHex()}function pa(){return this.rgb().formatHex8()}function ma(){return xr(this).formatHsl()}function gr(){return this.rgb().formatRgb()}function Lt(n){var i,e;return n=(n+"").trim().toLowerCase(),(i=la.exec(n))?(e=i[1].length,i=parseInt(i[1],16),e===6?pr(i):e===3?new ke(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):e===8?Dt(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):e===4?Dt(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=ca.exec(n))?new ke(i[1],i[2],i[3],1):(i=fa.exec(n))?new ke(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=ha.exec(n))?Dt(i[1],i[2],i[3],i[4]):(i=va.exec(n))?Dt(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=da.exec(n))?Er(i[1],i[2]/100,i[3]/100,1):(i=ga.exec(n))?Er(i[1],i[2]/100,i[3]/100,i[4]):vr.hasOwnProperty(n)?pr(vr[n]):n==="transparent"?new ke(NaN,NaN,NaN,0):null}function pr(n){return new ke(n>>16&255,n>>8&255,n&255,1)}function Dt(n,i,e,t){return t<=0&&(n=i=e=NaN),new ke(n,i,e,t)}function ya(n){return n instanceof dt||(n=Lt(n)),n?(n=n.rgb(),new ke(n.r,n.g,n.b,n.opacity)):new ke}function Ea(n,i,e,t){return arguments.length===1?ya(n):new ke(n,i,e,t==null?1:t)}function ke(n,i,e,t){this.r=+n,this.g=+i,this.b=+e,this.opacity=+t}un(ke,Ea,hr(dt,{brighter(n){return n=n==null?Ot:Math.pow(Ot,n),new ke(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?gt:Math.pow(gt,n),new ke(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ke(Xe(this.r),Xe(this.g),Xe(this.b),It(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mr,formatHex:mr,formatHex8:xa,formatRgb:yr,toString:yr}));function mr(){return`#${Ve(this.r)}${Ve(this.g)}${Ve(this.b)}`}function xa(){return`#${Ve(this.r)}${Ve(this.g)}${Ve(this.b)}${Ve((isNaN(this.opacity)?1:this.opacity)*255)}`}function yr(){const n=It(this.opacity);return`${n===1?"rgb(":"rgba("}${Xe(this.r)}, ${Xe(this.g)}, ${Xe(this.b)}${n===1?")":`, ${n})`}`}function It(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Xe(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ve(n){return n=Xe(n),(n<16?"0":"")+n.toString(16)}function Er(n,i,e,t){return t<=0?n=i=e=NaN:e<=0||e>=1?n=i=NaN:i<=0&&(n=NaN),new Ae(n,i,e,t)}function xr(n){if(n instanceof Ae)return new Ae(n.h,n.s,n.l,n.opacity);if(n instanceof dt||(n=Lt(n)),!n)return new Ae;if(n instanceof Ae)return n;n=n.rgb();var i=n.r/255,e=n.g/255,t=n.b/255,r=Math.min(i,e,t),s=Math.max(i,e,t),a=NaN,o=s-r,u=(s+r)/2;return o?(i===s?a=(e-t)/o+(e<t)*6:e===s?a=(t-i)/o+2:a=(i-e)/o+4,o/=u<.5?s+r:2-s-r,a*=60):o=u>0&&u<1?0:a,new Ae(a,o,u,n.opacity)}function ka(n,i,e,t){return arguments.length===1?xr(n):new Ae(n,i,e,t==null?1:t)}function Ae(n,i,e,t){this.h=+n,this.s=+i,this.l=+e,this.opacity=+t}un(Ae,ka,hr(dt,{brighter(n){return n=n==null?Ot:Math.pow(Ot,n),new Ae(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?gt:Math.pow(gt,n),new Ae(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,i=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,t=e+(e<.5?e:1-e)*i,r=2*e-t;return new ke(ln(n>=240?n-240:n+120,r,t),ln(n,r,t),ln(n<120?n+240:n-120,r,t),this.opacity)},clamp(){return new Ae(kr(this.h),_t(this.s),_t(this.l),It(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=It(this.opacity);return`${n===1?"hsl(":"hsla("}${kr(this.h)}, ${_t(this.s)*100}%, ${_t(this.l)*100}%${n===1?")":`, ${n})`}`}}));function kr(n){return n=(n||0)%360,n<0?n+360:n}function _t(n){return Math.max(0,Math.min(1,n||0))}function ln(n,i,e){return(n<60?i+(e-i)*n/60:n<180?e:n<240?i+(e-i)*(240-n)/60:i)*255}function fe(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var e=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var o=i?i.apply(this,s):s[0],u=e.cache;if(u.has(o))return u.get(o);var l=n.apply(this,s);return e.cache=u.set(o,l)||u,l};return e.cache=new(fe.Cache||Map),fe.cacheList.push(e.cache),e}fe.Cache=Map,fe.cacheList=[],fe.clearCache=function(){fe.cacheList.forEach(function(n){return n.clear()})};var O=function(n){return n[n.kUnknown=0]="kUnknown",n[n.kNumber=1]="kNumber",n[n.kPercentage=2]="kPercentage",n[n.kEms=3]="kEms",n[n.kPixels=4]="kPixels",n[n.kRems=5]="kRems",n[n.kDegrees=6]="kDegrees",n[n.kRadians=7]="kRadians",n[n.kGradians=8]="kGradians",n[n.kTurns=9]="kTurns",n[n.kMilliseconds=10]="kMilliseconds",n[n.kSeconds=11]="kSeconds",n[n.kInteger=12]="kInteger",n}({}),Re=function(n){return n[n.kUNumber=0]="kUNumber",n[n.kUPercent=1]="kUPercent",n[n.kULength=2]="kULength",n[n.kUAngle=3]="kUAngle",n[n.kUTime=4]="kUTime",n[n.kUOther=5]="kUOther",n}({}),Ta=function(n){return n[n.kYes=0]="kYes",n[n.kNo=1]="kNo",n}({}),Pa=function(n){return n[n.kYes=0]="kYes",n[n.kNo=1]="kNo",n}({}),Ma=[{name:"em",unit_type:O.kEms},{name:"px",unit_type:O.kPixels},{name:"deg",unit_type:O.kDegrees},{name:"rad",unit_type:O.kRadians},{name:"grad",unit_type:O.kGradians},{name:"ms",unit_type:O.kMilliseconds},{name:"s",unit_type:O.kSeconds},{name:"rem",unit_type:O.kRems},{name:"turn",unit_type:O.kTurns}],ot=function(n){return n[n.kUnknownType=0]="kUnknownType",n[n.kUnparsedType=1]="kUnparsedType",n[n.kKeywordType=2]="kKeywordType",n[n.kUnitType=3]="kUnitType",n[n.kSumType=4]="kSumType",n[n.kProductType=5]="kProductType",n[n.kNegateType=6]="kNegateType",n[n.kInvertType=7]="kInvertType",n[n.kMinType=8]="kMinType",n[n.kMaxType=9]="kMaxType",n[n.kClampType=10]="kClampType",n[n.kTransformType=11]="kTransformType",n[n.kPositionType=12]="kPositionType",n[n.kURLImageType=13]="kURLImageType",n[n.kColorType=14]="kColorType",n[n.kUnsupportedColorType=15]="kUnsupportedColorType",n}({}),Na=function(i){return Ma.find(function(e){return e.name===i}).unit_type},Sa=function(i){return i?i==="number"?O.kNumber:i==="percent"||i==="%"?O.kPercentage:Na(i):O.kUnknown},wa=function(i){switch(i){case O.kNumber:case O.kInteger:return Re.kUNumber;case O.kPercentage:return Re.kUPercent;case O.kPixels:return Re.kULength;case O.kMilliseconds:case O.kSeconds:return Re.kUTime;case O.kDegrees:case O.kRadians:case O.kGradians:case O.kTurns:return Re.kUAngle;default:return Re.kUOther}},Ca=function(i){switch(i){case Re.kUNumber:return O.kNumber;case Re.kULength:return O.kPixels;case Re.kUPercent:return O.kPercentage;case Re.kUTime:return O.kSeconds;case Re.kUAngle:return O.kDegrees;default:return O.kUnknown}},Tr=function(i){var e=1;switch(i){case O.kPixels:case O.kDegrees:case O.kSeconds:break;case O.kMilliseconds:e=.001;break;case O.kRadians:e=180/Math.PI;break;case O.kGradians:e=.9;break;case O.kTurns:e=360;break}return e},cn=function(i){switch(i){case O.kNumber:case O.kInteger:return"";case O.kPercentage:return"%";case O.kEms:return"em";case O.kRems:return"rem";case O.kPixels:return"px";case O.kDegrees:return"deg";case O.kRadians:return"rad";case O.kGradians:return"grad";case O.kMilliseconds:return"ms";case O.kSeconds:return"s";case O.kTurns:return"turn"}return""},Zt=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"toString",value:function(){return this.buildCSSText(Ta.kNo,Pa.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=ot.kUnitType&&this.getType()<=ot.kClampType}}],[{key:"isAngle",value:function(e){return e===O.kDegrees||e===O.kRadians||e===O.kGradians||e===O.kTurns}},{key:"isLength",value:function(e){return e>=O.kEms&&e<O.kDegrees}},{key:"isRelativeUnit",value:function(e){return e===O.kPercentage||e===O.kEms||e===O.kRems}},{key:"isTime",value:function(e){return e===O.kSeconds||e===O.kMilliseconds}}])}(),Aa=function(n){function i(e){var t;return(0,D.Z)(this,i),t=(0,K.Z)(this,i),t.colorSpace=e,t}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"getType",value:function(){return ot.kColorType}},{key:"to",value:function(t){return this}}])}(Zt),mt=function(n){return n[n.Constant=0]="Constant",n[n.LinearGradient=1]="LinearGradient",n[n.RadialGradient=2]="RadialGradient",n}({}),Bt=function(n){function i(e,t){var r;return(0,D.Z)(this,i),r=(0,K.Z)(this,i),r.type=e,r.value=t,r}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"clone",value:function(){return new i(this.type,this.value)}},{key:"buildCSSText",value:function(t,r,s){return s}},{key:"getType",value:function(){return ot.kColorType}}])}(Zt),we=function(n){function i(e){var t;return(0,D.Z)(this,i),t=(0,K.Z)(this,i),t.value=e,t}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"clone",value:function(){return new i(this.value)}},{key:"getType",value:function(){return ot.kKeywordType}},{key:"buildCSSText",value:function(t,r,s){return s+this.value}}])}(Zt),Ra=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t="";return Number.isFinite(i)?t="NaN":i>0?t="infinity":t="-infinity",t+=e},fn=function(i){return Ca(wa(i))},Q=function(n){function i(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O.kNumber;(0,D.Z)(this,i),t=(0,K.Z)(this,i);var s;return typeof r=="string"?s=Sa(r):s=r,t.unit=s,t.value=e,t}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"clone",value:function(){return new i(this.value,this.unit)}},{key:"equals",value:function(t){var r=t;return this.value===r.value&&this.unit===r.unit}},{key:"getType",value:function(){return ot.kUnitType}},{key:"convertTo",value:function(t){if(this.unit===t)return new i(this.value,this.unit);var r=fn(this.unit);if(r!==fn(t)||r===O.kUnknown)return null;var s=Tr(this.unit)/Tr(t);return new i(this.value*s,t)}},{key:"buildCSSText",value:function(t,r,s){var a;switch(this.unit){case O.kUnknown:break;case O.kInteger:a=Number(this.value).toFixed(0);break;case O.kNumber:case O.kPercentage:case O.kEms:case O.kRems:case O.kPixels:case O.kDegrees:case O.kRadians:case O.kGradians:case O.kMilliseconds:case O.kSeconds:case O.kTurns:{var o=-999999,u=999999,l=this.value,c=cn(this.unit);if(l<o||l>u){var f=cn(this.unit);!Number.isFinite(l)||Number.isNaN(l)?a=Ra(l,f):a=l+(f||"")}else a="".concat(l).concat(c)}}return s+=a,s}}])}(Zt),be=new Q(0,"px");new Q(1,"px");var $e=new Q(0,"deg"),hn=function(n){function i(e,t,r){var s,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return(0,D.Z)(this,i),s=(0,K.Z)(this,i,["rgb"]),s.r=e,s.g=t,s.b=r,s.alpha=a,s.isNone=o,s}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"clone",value:function(){return new i(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(t,r,s){return"".concat(s,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(Aa),Pr=new we("unset"),ba=new we("initial"),Oa=new we("inherit"),vn={"":Pr,unset:Pr,initial:ba,inherit:Oa},La=function(i){return vn[i]||(vn[i]=new we(i)),vn[i]},Mr=new hn(0,0,0,0,!0),Nr=new hn(0,0,0,0),Da=fe(function(n,i,e,t){return new hn(n,i,e,t)},function(n,i,e,t){return"rgba(".concat(n,",").concat(i,",").concat(e,",").concat(t,")")}),ne=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O.kNumber;return new Q(i,e)};new Q(50,"%");function Ia(n){var i=n.type,e=n.value;return i==="hex"?"#".concat(e):i==="literal"?e:i==="rgb"?"rgb(".concat(e.join(","),")"):"rgba(".concat(e.join(","),")")}var _a=function(){var n={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},i="";function e(L){throw new Error("".concat(i,": ").concat(L))}function t(){var L=r();return i.length>0&&e("Invalid input not EOF"),L}function r(){return P(s)}function s(){return a("linear-gradient",n.linearGradient,u)||a("repeating-linear-gradient",n.repeatingLinearGradient,u)||a("radial-gradient",n.radialGradient,f)||a("repeating-radial-gradient",n.repeatingRadialGradient,f)||a("conic-gradient",n.conicGradient,f)}function a(L,U,z){return o(U,function(ve){var ye=z();return ye&&(Y(n.comma)||e("Missing comma before color stops")),{type:L,orientation:ye,colorStops:P(Z)}})}function o(L,U){var z=Y(L);if(z){Y(n.startCall)||e("Missing (");var ve=U(z);return Y(n.endCall)||e("Missing )"),ve}}function u(){return l()||c()}function l(){return F("directional",n.sideOrCorner,1)}function c(){return F("angular",n.angleValue,1)}function f(){var L,U=h(),z;return U&&(L=[],L.push(U),z=i,Y(n.comma)&&(U=h(),U?L.push(U):i=z)),L}function h(){var L=v()||d();if(L)L.at=E();else{var U=m();if(U){L=U;var z=E();z&&(L.at=z)}else{var ve=T();ve&&(L={type:"default-radial",at:ve})}}return L}function v(){var L=F("shape",/^(circle)/i,0);return L&&(L.style=B()||m()),L}function d(){var L=F("shape",/^(ellipse)/i,0);return L&&(L.style=S()||m()),L}function m(){return F("extent-keyword",n.extentKeywords,1)}function E(){if(F("position",/^at/,0)){var L=T();return L||e("Missing positioning value"),L}}function T(){var L=M();if(L.x||L.y)return{type:"position",value:L}}function M(){return{x:S(),y:S()}}function P(L){var U=L(),z=[];if(U)for(z.push(U);Y(n.comma);)U=L(),U?z.push(U):e("One extra comma");return z}function Z(){var L=y();return L||e("Expected color definition"),L.length=S(),L}function y(){return p()||C()||x()||g()}function g(){return F("literal",n.literalColor,0)}function p(){return F("hex",n.hexColor,1)}function x(){return o(n.rgbColor,function(){return{type:"rgb",value:P(N)}})}function C(){return o(n.rgbaColor,function(){return{type:"rgba",value:P(N)}})}function N(){return Y(n.number)[1]}function S(){return F("%",n.percentageValue,1)||b()||B()}function b(){return F("position-keyword",n.positionKeywords,1)}function B(){return F("px",n.pixelValue,1)||F("em",n.emValue,1)}function F(L,U,z){var ve=Y(U);if(ve)return{type:L,value:ve[z]}}function Y(L){var U=/^[\n\r\t\s]+/.exec(i);U&&V(U[0].length);var z=L.exec(i);return z&&V(z[0].length),z}function V(L){i=i.substring(L)}return function(L){return i=L,t()}}();function Za(n,i,e,t){var r=q(t.value),s=0,a=0,o=s+i/2,u=a+e/2,l=Math.abs(i*Math.cos(r))+Math.abs(e*Math.sin(r)),c=n[0]+o-Math.cos(r)*l/2,f=n[1]+u-Math.sin(r)*l/2,h=n[0]+o+Math.cos(r)*l/2,v=n[1]+u+Math.sin(r)*l/2;return{x1:c,y1:f,x2:h,y2:v}}function Ba(n,i,e,t,r,s){var a=t.value,o=r.value;t.unit===O.kPercentage&&(a=t.value/100*i),r.unit===O.kPercentage&&(o=r.value/100*e);var u=Math.max((0,Fe.y)([0,0],[a,o]),(0,Fe.y)([0,e],[a,o]),(0,Fe.y)([i,e],[a,o]),(0,Fe.y)([i,0],[a,o]));return s&&(s instanceof Q?u=s.value:s instanceof we&&(s.value==="closest-side"?u=Math.min(a,i-a,o,e-o):s.value==="farthest-side"?u=Math.max(a,i-a,o,e-o):s.value==="closest-corner"&&(u=Math.min((0,Fe.y)([0,0],[a,o]),(0,Fe.y)([0,e],[a,o]),(0,Fe.y)([i,e],[a,o]),(0,Fe.y)([i,0],[a,o]))))),{x:a+n[0],y:o+n[1],r:u}}var Fa=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Ga=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ua=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Sr=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Ya(n){var i,e=n.length;if(n[e-1].length=(i=n[e-1].length)!==null&&i!==void 0?i:{type:"%",value:"100"},e>1){var t;n[0].length=(t=n[0].length)!==null&&t!==void 0?t:{type:"%",value:"0"}}for(var r=0,s=Number(n[0].length.value),a=1;a<e;a++){var o,u=(o=n[a].length)===null||o===void 0?void 0:o.value;if(!(0,de.Z)(u)&&!(0,de.Z)(s)){for(var l=1;l<a-r;l++)n[r+l].length={type:"%",value:"".concat(s+(Number(u)-s)*l/(a-r))};r=a,s=Number(u)}}}var Wa={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},za=fe(function(n){var i;return n.type==="angular"?i=Number(n.value):i=Wa[n.value]||0,ne(i,"deg")}),Xa=fe(function(n){var i=50,e=50,t="%",r="%";if((n==null?void 0:n.type)==="position"){var s=n.value,a=s.x,o=s.y;(a==null?void 0:a.type)==="position-keyword"&&(a.value==="left"?i=0:a.value==="center"?i=50:a.value==="right"?i=100:a.value==="top"?e=0:a.value==="bottom"&&(e=100)),(o==null?void 0:o.type)==="position-keyword"&&(o.value==="left"?i=0:o.value==="center"?e=50:o.value==="right"?i=100:o.value==="top"?e=0:o.value==="bottom"&&(e=100)),((a==null?void 0:a.type)==="px"||(a==null?void 0:a.type)==="%"||(a==null?void 0:a.type)==="em")&&(t=a==null?void 0:a.type,i=Number(a.value)),((o==null?void 0:o.type)==="px"||(o==null?void 0:o.type)==="%"||(o==null?void 0:o.type)==="em")&&(r=o==null?void 0:o.type,e=Number(o.value))}return{cx:ne(i,t),cy:ne(e,r)}}),Va=fe(function(n){if(n.indexOf("linear")>-1||n.indexOf("radial")>-1){var i=_a(n);return i.map(function(o){var u=o.type,l=o.orientation,c=o.colorStops;Ya(c);var f=c.map(function(P){return{offset:ne(Number(P.length.value),"%"),color:Ia(P)}});if(u==="linear-gradient")return new Bt(mt.LinearGradient,{angle:l?za(l):$e,steps:f});if(u==="radial-gradient"&&(l||(l=[{type:"shape",value:"circle"}]),l[0].type==="shape"&&l[0].value==="circle")){var h=Xa(l[0].at),v=h.cx,d=h.cy,m;if(l[0].style){var E=l[0].style,T=E.type,M=E.value;T==="extent-keyword"?m=La(M):m=ne(M,T)}return new Bt(mt.RadialGradient,{cx:v,cy:d,size:m,steps:f})}})}var e=n[0];if(n[1]==="("||n[2]==="("){if(e==="l"){var t=Fa.exec(n);if(t){var r,s=((r=t[2].match(Sr))===null||r===void 0?void 0:r.map(function(o){return o.split(":")}))||[];return[new Bt(mt.LinearGradient,{angle:ne(parseFloat(t[1]),"deg"),steps:s.map(function(o){var u=(0,re.Z)(o,2),l=u[0],c=u[1];return{offset:ne(Number(l)*100,"%"),color:c}})})]}}else if(e==="r"){var a=$a(n);if(a)if((0,We.Z)(a))n=a;else return[new Bt(mt.RadialGradient,a)]}else if(e==="p")return Ha(n)}});function $a(n){var i=Ga.exec(n);if(i){var e,t=((e=i[4].match(Sr))===null||e===void 0?void 0:e.map(function(r){return r.split(":")}))||[];return{cx:ne(50,"%"),cy:ne(50,"%"),steps:t.map(function(r){var s=(0,re.Z)(r,2),a=s[0],o=s[1];return{offset:ne(Number(a)*100,"%"),color:o}})}}return null}function Ha(n){var i=Ua.exec(n);if(i){var e=i[1],t=i[2];switch(e){case"a":e="repeat";break;case"x":e="repeat-x";break;case"y":e="repeat-y";break;case"n":e="no-repeat";break;default:e="no-repeat"}return{image:t,repetition:e}}return null}function Gu(n){return!!n.type&&!!n.value}function wr(n){return n&&!!n.image}function dn(n){return n&&!(0,de.Z)(n.r)&&!(0,de.Z)(n.g)&&!(0,de.Z)(n.b)}var ut=fe(function(n){if(wr(n))return(0,H.Z)({repetition:"repeat"},n);if((0,de.Z)(n)&&(n=""),n==="transparent")return Nr;if(n==="currentColor")n="black";else if(n==="none")return Mr;var i=Va(n);if(i)return i;var e=Lt(n),t=[0,0,0,0];return e!==null&&(t[0]=e.r||0,t[1]=e.g||0,t[2]=e.b||0,t[3]=e.opacity),Da.apply(void 0,t)});function Ka(n,i){if(!(!dn(n)||!dn(i)))return[[Number(n.r),Number(n.g),Number(n.b),Number(n.alpha)],[Number(i.r),Number(i.g),Number(i.b),Number(i.alpha)],function(e){var t=e.slice();if(t[3])for(var r=0;r<3;r++)t[r]=Math.round((0,ft.Z)(t[r],0,255));return t[3]=(0,ft.Z)(t[3],0,1),"rgba(".concat(t.join(","),")")}]}function yt(n,i){if((0,de.Z)(i))return ne(0,"px");if(i="".concat(i).trim().toLowerCase(),isFinite(Number(i))){if("px".search(n)>=0)return ne(Number(i),"px");if("deg".search(n)>=0)return ne(Number(i),"deg")}var e=[];i=i.replace(n,function(r){return e.push(r),"U".concat(r)});var t="U(".concat(n.source,")");return e.map(function(r){return ne(Number(i.replace(new RegExp("U".concat(r),"g"),"").replace(new RegExp(t,"g"),"*0")),r)})[0]}var Cr=function(i){return yt(new RegExp("px","g"),i)},Ja=fe(Cr),Qa=function(i){return yt(new RegExp("%","g"),i)};fe(Qa);var Ar=function(i){return(0,je.Z)(i)||isFinite(Number(i))?ne(Number(i)||0,"px"):yt(new RegExp("px|%|em|rem","g"),i)},gn=fe(Ar),Rr=function(i){return yt(new RegExp("deg|rad|grad|turn","g"),i)},qa=fe(Rr);function ja(n,i,e,t){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s="",a=n.value||0,o=i.value||0,u=fn(n.unit),l=n.convertTo(u),c=i.convertTo(u);return l&&c?(a=l.value,o=c.value,s=cn(n.unit)):(Q.isLength(n.unit)||Q.isLength(i.unit))&&(a=Me(n,r,e),o=Me(i,r,e),s="px"),[a,o,function(f){return t&&(f=Math.max(f,0)),f+s}]}function Te(n){var i=0;return n.unit===O.kDegrees?i=n.value:n.unit===O.kRadians?i=Ne(Number(n.value)):n.unit===O.kTurns?i=ea(Number(n.value)):n.value&&(i=n.value),i}function br(n,i){var e;return Array.isArray(n)?e=n.map(function(t){return Number(t)}):(0,We.Z)(n)?e=n.split(" ").map(function(t){return Number(t)}):(0,je.Z)(n)&&(e=[n]),i===2?e.length===1?[e[0],e[0]]:[e[0],e[1]]:i===4?e.length===1?[e[0],e[0],e[0],e[0]]:e.length===2?[e[0],e[1],e[0],e[1]]:e.length===3?[e[0],e[1],e[2],e[1]]:[e[0],e[1],e[2],e[3]]:i==="even"&&e.length%2===1?[].concat((0,ee.Z)(e),(0,ee.Z)(e)):e}function Me(n,i,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n.unit===O.kPixels)return Number(n.value);if(n.unit===O.kPercentage&&e){var r=e.nodeName===_.GROUP?e.getLocalBounds():e.getGeometryBounds();return(t?r.min[i]:0)+n.value/100*r.halfExtents[i]*2}return 0}var es=function(i){return yt(/deg|rad|grad|turn|px|%/g,i)},ts=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function ns(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(n=n.toLowerCase().trim(),n==="none")return[];for(var i=/\s*([\w-]+)\(([^)]*)\)/g,e=[],t,r=0;t=i.exec(n);){if(t.index!==r)return[];if(r=t.index+t[0].length,ts.indexOf(t[1])>-1&&e.push({name:t[1],params:t[2].split(" ").map(function(s){return es(s)||ut(s)})}),i.lastIndex===n.length)return e}return[]}function Or(n){return n.toString()}var Lr=function(i){return typeof i=="number"?ne(i):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(i)?ne(Number(i)):ne(0)},pn=fe(Lr);fe(function(n){return(0,We.Z)(n)?n.split(" ").map(pn):n.map(pn)});function mn(n,i){return[n,i,Or]}function yn(n,i){return function(e,t){return[e,t,function(r){return Or((0,ft.Z)(r,n,i))}]}}function Dr(n,i){if(n.length===i.length)return[n,i,function(e){return e}]}function En(n){return n.parsedStyle.d.totalLength===0&&(n.parsedStyle.d.totalLength=(0,Li.D)(n.parsedStyle.d.absolutePath)),n.parsedStyle.d.totalLength}function rs(n){return n.parsedStyle.points.totalLength===0&&(n.parsedStyle.points.totalLength=(0,Ge.hE)(n.parsedStyle.points.points)),n.parsedStyle.points.totalLength}function is(n){for(var i=0;i<n.length;i++){var e=n[i-1],t=n[i],r=t[0];if(r==="M"&&e){var s=e[0],a=[t[1],t[2]],o=void 0;s==="L"||s==="M"?o=[e[1],e[2]]:(s==="C"||s==="A"||s==="Q")&&(o=[e[e.length-2],e[e.length-1]]),o&&Ft(a,o)&&(n.splice(i,1),i--)}}}function as(n){for(var i=!1,e=n.length,t=0;t<e;t++){var r=n[t],s=r[0];if(s==="C"||s==="A"||s==="Q"){i=!0;break}}return i}function ss(n){for(var i=[],e=[],t=[],r=0;r<n.length;r++){var s=n[r],a=s[0];a==="M"?(t.length&&(e.push(t),t=[]),t.push([s[1],s[2]])):a==="Z"?t.length&&(i.push(t),t=[]):t.push([s[1],s[2]])}return t.length>0&&e.push(t),{polygons:i,polylines:e}}function Ft(n,i){return n[0]===i[0]&&n[1]===i[1]}function os(n,i){for(var e=[],t=[],r=[],s=0;s<n.length;s++){var a=n[s],o=a.currentPoint,u=a.params,l=a.prePoint,c=void 0;switch(a.command){case"Q":c=(0,Ge.x4)(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=(0,Ge.l5)(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var f=a.arcParams;c=(0,Ge.vp)(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:e.push(o[0]),t.push(o[1]);break}c&&(a.box=c,e.push(c.x,c.x+c.width),t.push(c.y,c.y+c.height)),i&&(a.command==="L"||a.command==="M")&&a.prePoint&&a.nextPoint&&r.push(a)}e=e.filter(function(Z){return!Number.isNaN(Z)&&Z!==1/0&&Z!==-1/0}),t=t.filter(function(Z){return!Number.isNaN(Z)&&Z!==1/0&&Z!==-1/0});var h=(0,Jn.Z)(e),v=(0,Jn.Z)(t),d=(0,Qn.Z)(e),m=(0,Qn.Z)(t);if(r.length===0)return{x:h,y:v,width:d-h,height:m-v};for(var E=0;E<r.length;E++){var T=r[E],M=T.currentPoint,P=void 0;M[0]===h?(P=Gt(T,i),h-=P.xExtra):M[0]===d&&(P=Gt(T,i),d+=P.xExtra),M[1]===v?(P=Gt(T,i),v-=P.yExtra):M[1]===m&&(P=Gt(T,i),m+=P.yExtra)}return{x:h,y:v,width:d-h,height:m-v}}function Gt(n,i){var e=n.prePoint,t=n.currentPoint,r=n.nextPoint,s=Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2),a=Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2),o=Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2),u=Math.acos((s+a-o)/(2*Math.sqrt(s)*Math.sqrt(a)));if(!u||Math.sin(u)===0||(0,Di.Z)(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(r[1]-t[1],r[0]-t[0])),c=Math.abs(Math.atan2(r[0]-t[0],r[1]-t[1]));l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(u/2-l)*(i/2*(1/Math.sin(u/2)))-i/2||0,yExtra:Math.cos(c-u/2)*(i/2*(1/Math.sin(u/2)))-i/2||0};return f}function Ir(n,i){return[i[0]+(i[0]-n[0]),i[1]+(i[1]-n[1])]}var _r=function(i,e){var t=i.x*e.x+i.y*e.y,r=Math.sqrt((Math.pow(i.x,2)+Math.pow(i.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2))),s=i.x*e.y-i.y*e.x<0?-1:1,a=s*Math.acos(t/r);return a},Zr=function(i,e,t,r,s,a,o,u){e=Math.abs(e),t=Math.abs(t),r=(0,qn.Z)(r,360);var l=q(r);if(i.x===o.x&&i.y===o.y)return{x:i.x,y:i.y,ellipticalArcAngle:0};if(e===0||t===0)return{x:0,y:0,ellipticalArcAngle:0};var c=(i.x-o.x)/2,f=(i.y-o.y)/2,h={x:Math.cos(l)*c+Math.sin(l)*f,y:-Math.sin(l)*c+Math.cos(l)*f},v=Math.pow(h.x,2)/Math.pow(e,2)+Math.pow(h.y,2)/Math.pow(t,2);v>1&&(e*=Math.sqrt(v),t*=Math.sqrt(v));var d=Math.pow(e,2)*Math.pow(t,2)-Math.pow(e,2)*Math.pow(h.y,2)-Math.pow(t,2)*Math.pow(h.x,2),m=Math.pow(e,2)*Math.pow(h.y,2)+Math.pow(t,2)*Math.pow(h.x,2),E=d/m;E=E<0?0:E;var T=(s!==a?1:-1)*Math.sqrt(E),M={x:T*(e*h.y/t),y:T*(-(t*h.x)/e)},P={x:Math.cos(l)*M.x-Math.sin(l)*M.y+(i.x+o.x)/2,y:Math.sin(l)*M.x+Math.cos(l)*M.y+(i.y+o.y)/2},Z={x:(h.x-M.x)/e,y:(h.y-M.y)/t},y=_r({x:1,y:0},Z),g={x:(-h.x-M.x)/e,y:(-h.y-M.y)/t},p=_r(Z,g);!a&&p>0?p-=2*Math.PI:a&&p<0&&(p+=2*Math.PI),p%=2*Math.PI;var x=y+p*u,C=e*Math.cos(x),N=t*Math.sin(x),S={x:Math.cos(l)*C-Math.sin(l)*N+P.x,y:Math.sin(l)*C+Math.cos(l)*N+P.y,ellipticalArcStartAngle:y,ellipticalArcEndAngle:y+p,ellipticalArcAngle:x,ellipticalArcCenter:P,resultantRx:e,resultantRy:t};return S};function us(n){for(var i=[],e=null,t=null,r=null,s=0,a=n.length,o=0;o<a;o++){var u=n[o];t=n[o+1];var l=u[0],c={command:l,prePoint:e,params:u,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":r=[u[1],u[2]],s=o;break;case"A":var f=ls(e,u);c.arcParams=f;break}if(l==="Z")e=r,t=n[s+1];else{var h=u.length;e=[u[h-2],u[h-1]]}t&&t[0]==="Z"&&(t=n[s],i[s]&&(i[s].prePoint=e)),c.currentPoint=e,i[s]&&Ft(e,i[s].currentPoint)&&(i[s].prePoint=c.prePoint);var v=t?[t[t.length-2],t[t.length-1]]:null;c.nextPoint=v;var d=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[d[0]-e[0],d[1]-e[1]],c.endTangent=[e[0]-d[0],e[1]-d[1]];else if(l==="Q"){var m=[u[1],u[2]];c.startTangent=[d[0]-m[0],d[1]-m[1]],c.endTangent=[e[0]-m[0],e[1]-m[1]]}else if(l==="T"){var E=i[o-1],T=Ir(E.currentPoint,d);E.command==="Q"?(c.command="Q",c.startTangent=[d[0]-T[0],d[1]-T[1]],c.endTangent=[e[0]-T[0],e[1]-T[1]]):(c.command="TL",c.startTangent=[d[0]-e[0],d[1]-e[1]],c.endTangent=[e[0]-d[0],e[1]-d[1]])}else if(l==="C"){var M=[u[1],u[2]],P=[u[3],u[4]];c.startTangent=[d[0]-M[0],d[1]-M[1]],c.endTangent=[e[0]-P[0],e[1]-P[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[M[0]-P[0],M[1]-P[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[P[0]-M[0],P[1]-M[1]])}else if(l==="S"){var Z=i[o-1],y=Ir(Z.currentPoint,d),g=[u[1],u[2]];Z.command==="C"?(c.command="C",c.startTangent=[d[0]-y[0],d[1]-y[1]],c.endTangent=[e[0]-g[0],e[1]-g[1]]):(c.command="SQ",c.startTangent=[d[0]-g[0],d[1]-g[1]],c.endTangent=[e[0]-g[0],e[1]-g[1]])}else if(l==="A"){var p=Br(c,0),x=p.x,C=p.y,N=Br(c,1,!1),S=N.x,b=N.y;c.startTangent=[x,C],c.endTangent=[S,b]}i.push(c)}return i}function Br(n,i){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t=n.arcParams,r=t.rx,s=r===void 0?0:r,a=t.ry,o=a===void 0?0:a,u=t.xRotation,l=t.arcFlag,c=t.sweepFlag,f=Zr({x:n.prePoint[0],y:n.prePoint[1]},s,o,u,!!l,!!c,{x:n.currentPoint[0],y:n.currentPoint[1]},i),h=Zr({x:n.prePoint[0],y:n.prePoint[1]},s,o,u,!!l,!!c,{x:n.currentPoint[0],y:n.currentPoint[1]},e?i+.005:i-.005),v=h.x-f.x,d=h.y-f.y,m=Math.sqrt(v*v+d*d);return{x:-v/m,y:-d/m}}function Ut(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function xn(n,i){return Ut(n)*Ut(i)?(n[0]*i[0]+n[1]*i[1])/(Ut(n)*Ut(i)):1}function Fr(n,i){return(n[0]*i[1]<n[1]*i[0]?-1:1)*Math.acos(xn(n,i))}function ls(n,i){var e=i[1],t=i[2],r=(0,qn.Z)(q(i[3]),Math.PI*2),s=i[4],a=i[5],o=n[0],u=n[1],l=i[6],c=i[7],f=Math.cos(r)*(o-l)/2+Math.sin(r)*(u-c)/2,h=-1*Math.sin(r)*(o-l)/2+Math.cos(r)*(u-c)/2,v=f*f/(e*e)+h*h/(t*t);v>1&&(e*=Math.sqrt(v),t*=Math.sqrt(v));var d=e*e*(h*h)+t*t*(f*f),m=d?Math.sqrt((e*e*(t*t)-d)/d):1;s===a&&(m*=-1),isNaN(m)&&(m=0);var E=t?m*e*h/t:0,T=e?m*-t*f/e:0,M=(o+l)/2+Math.cos(r)*E-Math.sin(r)*T,P=(u+c)/2+Math.sin(r)*E+Math.cos(r)*T,Z=[(f-E)/e,(h-T)/t],y=[(-1*f-E)/e,(-1*h-T)/t],g=Fr([1,0],Z),p=Fr(Z,y);return xn(Z,y)<=-1&&(p=Math.PI),xn(Z,y)>=1&&(p=0),a===0&&p>0&&(p-=2*Math.PI),a===1&&p<0&&(p+=2*Math.PI),{cx:M,cy:P,rx:Ft(n,[l,c])?0:e,ry:Ft(n,[l,c])?0:t,startAngle:g,endAngle:g+p,xRotation:r,arcFlag:s,sweepFlag:a}}function cs(n,i,e){return n.reduce(function(t,r){var s="";if(r[0]==="M"||r[0]==="L"){var a=k.al(r[1],r[2],0);e&&k.fF(a,a,e),s="".concat(r[0]).concat(a[0],",").concat(a[1])}else if(r[0]==="Z")s=r[0];else if(r[0]==="C"){var o=k.al(r[1],r[2],0),u=k.al(r[3],r[4],0),l=k.al(r[5],r[6],0);e&&(k.fF(o,o,e),k.fF(u,u,e),k.fF(l,l,e)),s="".concat(r[0]).concat(o[0],",").concat(o[1],",").concat(u[0],",").concat(u[1],",").concat(l[0],",").concat(l[1])}else if(r[0]==="A"){var c=k.al(r[6],r[7],0);e&&k.fF(c,c,e),s="".concat(r[0]).concat(r[1],",").concat(r[2],",").concat(r[3],",").concat(r[4],",").concat(r[5],",").concat(c[0],",").concat(c[1])}else if(r[0]==="Q"){var f=k.al(r[1],r[2],0),h=k.al(r[3],r[4],0);e&&(k.fF(f,f,e),k.fF(h,h,e)),s="".concat(r[0]).concat(r[1],",").concat(r[2],",").concat(r[3],",").concat(r[4],"}")}return t+=s},"")}function fs(n,i,e,t){return[["M",n,i],["L",e,t]]}function Gr(n,i,e,t){var r=(-1+Math.sqrt(2))/3*4,s=n*r,a=i*r,o=e-n,u=e+n,l=t-i,c=t+i;return[["M",o,t],["C",o,t-a,e-s,l,e,l],["C",e+s,l,u,t-a,u,t],["C",u,t+a,e+s,c,e,c],["C",e-s,c,o,t+a,o,t],["Z"]]}function hs(n,i){var e=n.map(function(t,r){return[r===0?"M":"L",t[0],t[1]]});return i&&e.push(["Z"]),e}function vs(n,i,e,t,r){if(r){var s=(0,re.Z)(r,4),a=s[0],o=s[1],u=s[2],l=s[3],c=n>0?1:-1,f=i>0?1:-1,h=c+f!==0?1:0;return[["M",c*a+e,t],["L",n-c*o+e,t],o?["A",o,o,0,0,h,n+e,f*o+t]:null,["L",n+e,i-f*u+t],u?["A",u,u,0,0,h,n+e-c*u,i+t]:null,["L",e+c*l,i+t],l?["A",l,l,0,0,h,e,i+t-f*l]:null,["L",e,f*a+t],a?["A",a,a,0,0,h,c*a+e,t]:null,["Z"]].filter(function(v){return v})}return[["M",e,t],["L",e+n,t],["L",e+n,t+i],["L",e,t+i],["Z"]]}function ds(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.getLocalTransform(),e=[];switch(n.nodeName){case _.LINE:var t=n.parsedStyle,r=t.x1,s=r===void 0?0:r,a=t.y1,o=a===void 0?0:a,u=t.x2,l=u===void 0?0:u,c=t.y2,f=c===void 0?0:c;e=fs(s,o,l,f);break;case _.CIRCLE:{var h=n.parsedStyle,v=h.r,d=v===void 0?0:v,m=h.cx,E=m===void 0?0:m,T=h.cy,M=T===void 0?0:T;e=Gr(d,d,E,M);break}case _.ELLIPSE:{var P=n.parsedStyle,Z=P.rx,y=Z===void 0?0:Z,g=P.ry,p=g===void 0?0:g,x=P.cx,C=x===void 0?0:x,N=P.cy,S=N===void 0?0:N;e=Gr(y,p,C,S);break}case _.POLYLINE:case _.POLYGON:var b=n.parsedStyle.points;e=hs(b.points,n.nodeName===_.POLYGON);break;case _.RECT:var B=n.parsedStyle,F=B.width,Y=F===void 0?0:F,V=B.height,L=V===void 0?0:V,U=B.x,z=U===void 0?0:U,ve=B.y,ye=ve===void 0?0:ve,Oe=B.radius,$n=Oe&&Oe.some(function(St){return St!==0});e=vs(Y,L,z,ye,$n&&Oe.map(function(St){return(0,ft.Z)(St,0,Math.min(Math.abs(Y)/2,Math.abs(L)/2))}));break;case _.PATH:var Hn=n.parsedStyle.d.absolutePath;e=(0,ee.Z)(Hn);break}if(e.length)return cs(e,n,i)}function Uu(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=n.map(function(a,o){var u=a[0],l=n[o+1],c=o===0&&(i!==0||e!==0),f=(o===n.length-1||l&&(l[0]==="M"||l[0]==="Z"))&&t!==0&&r!==0,h=c?[i,e]:[0,0],v=_slicedToArray(h,2),d=v[0],m=v[1],E=f?[t,r]:[0,0],T=_slicedToArray(E,2),M=T[0],P=T[1];switch(u){case"M":return"M ".concat(a[1]+d,",").concat(a[2]+m);case"L":return"L ".concat(a[1]+M,",").concat(a[2]+P);case"Q":return"Q ".concat(a[1]," ").concat(a[2],",").concat(a[3]+M," ").concat(a[4]+P);case"C":return"C ".concat(a[1]," ").concat(a[2],",").concat(a[3]," ").concat(a[4],",").concat(a[5]+M," ").concat(a[6]+P);case"A":return"A ".concat(a[1]," ").concat(a[2]," ").concat(a[3]," ").concat(a[4]," ").concat(a[5]," ").concat(a[6]," ").concat(a[7]).concat(f?" L ".concat(a[6]+t,",").concat(a[7]+r):"");case"Z":return"Z";default:return null}}).filter(function(a){return a!==null}).join(" ");return~s.indexOf("NaN")?"":s}var Ur=function(i){if(i===""||Array.isArray(i)&&i.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=(0,jn.A)(i)}catch(v){e=(0,jn.A)(""),console.error("[g]: Invalid SVG Path definition: ".concat(i))}is(e);var t=as(e),r=ss(e),s=r.polygons,a=r.polylines,o=us(e),u=os(o,0),l=u.x,c=u.y,f=u.width,h=u.height;return{absolutePath:e,hasArc:t,segments:o,polygons:s,polylines:a,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(f)?f:0,height:Number.isFinite(h)?h:0}}},gs=fe(Ur);function Yr(n){return(0,We.Z)(n)?gs(n):Ur(n)}function ps(n,i,e){var t=n.curve,r=i.curve;(!t||t.length===0)&&(t=(0,er.Y)(n.absolutePath,!1),n.curve=t),(!r||r.length===0)&&(r=(0,er.Y)(i.absolutePath,!1),i.curve=r);var s=[t,r];t.length!==r.length&&(s=(0,Ii.x)(t,r));var a=(0,tr.b)(s[0])!==(0,tr.b)(s[1])?(0,_i.G)(s[0]):(0,Zi.U)(s[0]);return[a,(0,Bi.g)(s[1],a),function(o){return o}]}function ms(n,i){var e;return(0,We.Z)(n)?e=n.split(" ").map(function(t){var r=t.split(","),s=(0,re.Z)(r,2),a=s[0],o=s[1];return[Number(a),Number(o)]}):e=n,{points:e,totalLength:0,segments:[]}}function ys(n,i){return[n.points,i.points,function(e){return e}]}var ue=null,lt=/\s*(\w+)\(([^)]*)\)/g;function Pe(n){return function(i){var e=0;return n.map(function(t){return t===ue?i[e++]:t})}}function He(n){return n}var Et={matrix:["NNNNNN",[ue,ue,0,0,ue,ue,0,0,0,0,1,0,ue,ue,0,1],He],matrix3d:["NNNNNNNNNNNNNNNN",He],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Pe([ue,ue,new Q(1)]),He],scaleX:["N",Pe([ue,new Q(1),new Q(1)]),Pe([ue,new Q(1)])],scaleY:["N",Pe([new Q(1),ue,new Q(1)]),Pe([new Q(1),ue])],scaleZ:["N",Pe([new Q(1),new Q(1),ue])],scale3d:["NNN",He],skew:["Aa",null,He],skewX:["A",null,Pe([ue,$e])],skewY:["A",null,Pe([$e,ue])],translate:["Tt",Pe([ue,ue,be]),He],translateX:["T",Pe([ue,be,be]),Pe([ue,be])],translateY:["T",Pe([be,ue,be]),Pe([be,ue])],translateZ:["L",Pe([be,be,ue])],translate3d:["TTL",He]};function Wr(n){for(var i=[],e=n.length,t=0;t<e;t++){var r=n[t],s=r[0],a=r.slice(1);s==="translate"||s==="skew"?a.length===1&&a.push(0):s==="scale"&&a.length===1&&a.push(a[0]);var o=Et[s];if(!o)return[];var u=a.map(function(l){return ne(l)});i.push({t:s,d:u})}return i}function zr(n){if(Array.isArray(n))return Wr(n);if(n=(n||"none").trim(),n==="none")return[];var i=[],e,t=0;for(lt.lastIndex=0;e=lt.exec(n);){if(e.index!==t)return[];t=e.index+e[0].length;var r=e[1],s=Et[r];if(!s)return[];var a=e[2].split(","),o=s[0];if(o.length<a.length)return[];for(var u=[],l=0;l<o.length;l++){var c=a[l],f=o[l],h=void 0;if(c?h={A:function(d){return d.trim()==="0"?$e:qa(d)},N:pn,T:gn,L:Ja}[f.toUpperCase()](c):h={a:$e,n:u[0],t:be}[f],h===void 0)return[];u.push(h)}if(i.push({t:r,d:u}),lt.lastIndex===n.length)return i}return[]}function Es(n){if(Array.isArray(n))return Wr(n);if(n=(n||"none").trim(),n==="none")return[];var i=[],e,t=0;for(lt.lastIndex=0;e=lt.exec(n);){if(e.index!==t)return[];t=e.index+e[0].length;var r=e[1],s=Et[r];if(!s)return[];var a=e[2].split(","),o=s[0];if(o.length<a.length)return[];for(var u=[],l=0;l<o.length;l++){var c=a[l],f=o[l],h=void 0;if(c?h={A:function(d){return d.trim()==="0"?$e:Rr(d)},N:Lr,T:Ar,L:Cr}[f.toUpperCase()](c):h={a:$e,n:u[0],t:be}[f],h===void 0)return[];u.push(h)}if(i.push({t:r,d:u}),lt.lastIndex===n.length)return i}return[]}function xs(n){var i,e,t,r;switch(n.t){case"rotateX":return r=q(Te(n.d[0])),[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1];case"rotateY":return r=q(Te(n.d[0])),[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1];case"rotate":case"rotateZ":return r=q(Te(n.d[0])),[Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1,0,0,0,0,1];case"rotate3d":i=n.d[0].value,e=n.d[1].value,t=n.d[2].value,r=q(Te(n.d[3]));var s=i*i+e*e+t*t;if(s===0)i=1,e=0,t=0;else if(s!==1){var a=Math.sqrt(s);i/=a,e/=a,t/=a}var o=Math.sin(r/2),u=o*Math.cos(r/2),l=o*o;return[1-2*(e*e+t*t)*l,2*(i*e*l+t*u),2*(i*t*l-e*u),0,2*(i*e*l-t*u),1-2*(i*i+t*t)*l,2*(e*t*l+i*u),0,2*(i*t*l+e*u),2*(e*t*l-i*u),1-2*(i*i+e*e)*l,0,0,0,0,1];case"scale":return[n.d[0].value,0,0,0,0,n.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[n.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,n.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,n.d[0].value,0,0,0,0,1];case"scale3d":return[n.d[0].value,0,0,0,0,n.d[1].value,0,0,0,0,n.d[2].value,0,0,0,0,1];case"skew":var c=q(Te(n.d[0])),f=q(Te(n.d[1]));return[1,Math.tan(f),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return r=q(Te(n.d[0])),[1,0,0,0,Math.tan(r),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return r=q(Te(n.d[0])),[1,Math.tan(r),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return i=Me(n.d[0],0,null)||0,e=Me(n.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,i,e,0,1];case"translateX":return i=Me(n.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,i,0,0,1];case"translateY":return e=Me(n.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,e,0,1];case"translateZ":return t=Me(n.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,t,1];case"translate3d":return i=Me(n.d[0],0,null)||0,e=Me(n.d[1],0,null)||0,t=Me(n.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,i,e,t,1];case"perspective":var h=Me(n.d[0],0,null)||0,v=h?-1/h:0;return[1,0,0,0,0,1,0,0,0,0,1,v,0,0,0,1];case"matrix":return[n.d[0].value,n.d[1].value,0,0,n.d[2].value,n.d[3].value,0,0,0,0,1,0,n.d[4].value,n.d[5].value,0,1];case"matrix3d":return n.d.map(function(d){return d.value})}}function ks(n,i){return[n[0]*i[0]+n[4]*i[1]+n[8]*i[2]+n[12]*i[3],n[1]*i[0]+n[5]*i[1]+n[9]*i[2]+n[13]*i[3],n[2]*i[0]+n[6]*i[1]+n[10]*i[2]+n[14]*i[3],n[3]*i[0]+n[7]*i[1]+n[11]*i[2]+n[15]*i[3],n[0]*i[4]+n[4]*i[5]+n[8]*i[6]+n[12]*i[7],n[1]*i[4]+n[5]*i[5]+n[9]*i[6]+n[13]*i[7],n[2]*i[4]+n[6]*i[5]+n[10]*i[6]+n[14]*i[7],n[3]*i[4]+n[7]*i[5]+n[11]*i[6]+n[15]*i[7],n[0]*i[8]+n[4]*i[9]+n[8]*i[10]+n[12]*i[11],n[1]*i[8]+n[5]*i[9]+n[9]*i[10]+n[13]*i[11],n[2]*i[8]+n[6]*i[9]+n[10]*i[10]+n[14]*i[11],n[3]*i[8]+n[7]*i[9]+n[11]*i[10]+n[15]*i[11],n[0]*i[12]+n[4]*i[13]+n[8]*i[14]+n[12]*i[15],n[1]*i[12]+n[5]*i[13]+n[9]*i[14]+n[13]*i[15],n[2]*i[12]+n[6]*i[13]+n[10]*i[14]+n[14]*i[15],n[3]*i[12]+n[7]*i[13]+n[11]*i[14]+n[15]*i[15]]}function Ts(n){return n.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:n.map(xs).reduce(ks)}function Xr(n){var i=[0,0,0],e=[1,1,1],t=[0,0,0],r=[0,0,0,1],s=[0,0,0,1];return aa(Ts(n),i,e,t,r,s),[[i,e,t,s,r]]}var Ps=function(){function n(t,r){for(var s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var o=0;o<4;o++)for(var u=0;u<4;u++)s[a][o]+=r[a][u]*t[u][o];return s}function i(t){return t[0][2]===0&&t[0][3]===0&&t[1][2]===0&&t[1][3]===0&&t[2][0]===0&&t[2][1]===0&&t[2][2]===1&&t[2][3]===0&&t[3][2]===0&&t[3][3]===1}function e(t,r,s,a,o){for(var u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)u[l][3]=o[l];for(var c=0;c<3;c++)for(var f=0;f<3;f++)u[3][c]+=t[f]*u[f][c];var h=a[0],v=a[1],d=a[2],m=a[3],E=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];E[0][0]=1-2*(v*v+d*d),E[0][1]=2*(h*v-d*m),E[0][2]=2*(h*d+v*m),E[1][0]=2*(h*v+d*m),E[1][1]=1-2*(h*h+d*d),E[1][2]=2*(v*d-h*m),E[2][0]=2*(h*d-v*m),E[2][1]=2*(v*d+h*m),E[2][2]=1-2*(h*h+v*v),u=n(u,E);var T=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];s[2]&&(T[2][1]=s[2],u=n(u,T)),s[1]&&(T[2][1]=0,T[2][0]=s[0],u=n(u,T)),s[0]&&(T[2][0]=0,T[1][0]=s[0],u=n(u,T));for(var M=0;M<3;M++)for(var P=0;P<3;P++)u[M][P]*=r[M];return i(u)?[u[0][0],u[0][1],u[1][0],u[1][1],u[3][0],u[3][1]]:u[0].concat(u[1],u[2],u[3])}return e}();function Ms(n){return n.toFixed(6).replace(".000000","")}function kn(n,i){var e,t;return n.decompositionPair!==i&&(n.decompositionPair=i,e=Xr(n)),i.decompositionPair!==n&&(i.decompositionPair=n,t=Xr(i)),e[0]===null||t[0]===null?[[!1],[!0],function(r){return r?i[0].d:n[0].d}]:(e[0].push(0),t[0].push(1),[e,t,function(r){var s=Ss(e[0][3],t[0][3],r[5]),a=Ps(r[0],r[1],r[2],s,r[4]),o=a.map(Ms).join(",");return o}])}function Ns(n,i){for(var e=0,t=0;t<n.length;t++)e+=n[t]*i[t];return e}function Ss(n,i,e){var t=Ns(n,i);t=(0,ft.Z)(t,-1,1);var r=[];if(t===1)r=n;else for(var s=Math.acos(t),a=Math.sin(e*s)*1/Math.sqrt(1-t*t),o=0;o<4;o++)r.push(n[o]*(Math.cos(e*s)-t*a)+i[o]*a);return r}function Tn(n){return n.replace(/[XY]/,"")}function Pn(n){return n.replace(/(X|Y|Z|3d)?$/,"3d")}var ws=function(i,e){return i==="perspective"&&e==="perspective"||(i==="matrix"||i==="matrix3d")&&(e==="matrix"||e==="matrix3d")};function Cs(n,i,e){var t=!1;if(!n.length||!i.length){n.length||(t=!0,n=i,i=[]);for(var r=function(){var S=n[s],b=S.t,B=S.d,F=b.substring(0,5)==="scale"?1:0;i.push({t:b,d:B.map(function(Y){return typeof Y=="number"?ne(F):ne(F,Y.unit)})})},s=0;s<n.length;s++)r()}var a=[],o=[],u=[];if(n.length!==i.length){var l=kn(n,i);a=[l[0]],o=[l[1]],u=[["matrix",[l[2]]]]}else for(var c=0;c<n.length;c++){var f=n[c].t,h=i[c].t,v=n[c].d,d=i[c].d,m=Et[f],E=Et[h],T=void 0;if(ws(f,h)){var M=kn([n[c]],[i[c]]);a.push(M[0]),o.push(M[1]),u.push(["matrix",[M[2]]]);continue}else if(f===h)T=f;else if(m[2]&&E[2]&&Tn(f)===Tn(h))T=Tn(f),v=m[2](v),d=E[2](d);else if(m[1]&&E[1]&&Pn(f)===Pn(h))T=Pn(f),v=m[1](v),d=E[1](d);else{var P=kn(n,i);a=[P[0]],o=[P[1]],u=[["matrix",[P[2]]]];break}for(var Z=[],y=[],g=[],p=0;p<v.length;p++){var x=ja(v[p],d[p],e,!1,p);Z[p]=x[0],y[p]=x[1],g.push(x[2])}a.push(Z),o.push(y),u.push([T,g])}if(t){var C=a;a=o,o=C}return[a,o,function(N){return N.map(function(S,b){var B=S.map(function(F,Y){return u[b][1][Y](F)}).join(",");return u[b][0]==="matrix"&&B.split(",").length===16&&(u[b][0]="matrix3d"),u[b][0]==="matrix3d"&&B.split(",").length===6&&(u[b][0]="matrix"),"".concat(u[b][0],"(").concat(B,")")}).join(" ")}]}var As=fe(function(n){if((0,We.Z)(n)){if(n==="text-anchor")return[ne(0,"px"),ne(0,"px")];var i=n.split(" ");return i.length===1&&(i[0]==="top"||i[0]==="bottom"?(i[1]=i[0],i[0]="center"):i[1]="center"),i.length!==2?null:[gn(Vr(i[0])),gn(Vr(i[1]))]}return[ne(n[0]||0,"px"),ne(n[1]||0,"px")]});function Vr(n){return n==="center"?"50%":n==="left"||n==="top"?"0%":n==="right"||n==="bottom"?"100%":n}var Mn=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:R.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:R.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:R.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:R.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:R.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:R.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:R.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:R.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:R.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:R.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:R.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:R.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:R.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:R.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:R.FILTER},{n:"clipPath",syntax:R.DEFINED_PATH},{n:"textPath",syntax:R.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:R.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:R.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:R.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:R.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:R.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:R.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:R.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:R.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:R.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:R.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:R.COORDINATE},{n:"y1",int:!0,l:!0,syntax:R.COORDINATE},{n:"z1",int:!0,l:!0,syntax:R.COORDINATE},{n:"x2",int:!0,l:!0,syntax:R.COORDINATE},{n:"y2",int:!0,l:!0,syntax:R.COORDINATE},{n:"z2",int:!0,l:!0,syntax:R.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:R.PATH,p:50},{n:"points",int:!0,l:!0,syntax:R.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:R.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:R.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:R.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:R.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:R.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:R.NUMBER,d:function(i){return i===_.PATH||i===_.POLYGON||i===_.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:R.MARKER},{n:"markerEnd",syntax:R.MARKER},{n:"markerMid",syntax:R.MARKER},{n:"markerStartOffset",syntax:R.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:R.LENGTH,l:!0,int:!0,d:"0"}],Rs=new Set(Mn.filter(function(n){return!!n.l}).map(function(n){return n.n})),$r={},bs=function(){function n(i){var e=this;(0,D.Z)(this,n),this.runtime=i,Mn.forEach(function(t){e.registerMetadata(t)})}return(0,I.Z)(n,[{key:"registerMetadata",value:function(e){[e.n].concat((0,ee.Z)(e.a||[])).forEach(function(t){$r[t]=e})}},{key:"getPropertySyntax",value:function(e){return this.runtime.CSSPropertySyntaxFactory[e]}},{key:"processProperties",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(e.attributes,t);var s=e.parsedStyle.clipPath,a=e.parsedStyle.offsetPath;Os(e,t);var o=!!r.forceUpdateGeometry;if(!o){for(var u in t)if(Rs.has(u)){o=!0;break}}var l=Hr(e);l.has("fill")&&t.fill&&(e.parsedStyle.fill=ut(t.fill)),l.has("stroke")&&t.stroke&&(e.parsedStyle.stroke=ut(t.stroke)),l.has("shadowColor")&&t.shadowColor&&(e.parsedStyle.shadowColor=ut(t.shadowColor)),l.has("filter")&&t.filter&&(e.parsedStyle.filter=ns(t.filter)),l.has("radius")&&!(0,de.Z)(t.radius)&&(e.parsedStyle.radius=br(t.radius,4)),l.has("lineDash")&&!(0,de.Z)(t.lineDash)&&(e.parsedStyle.lineDash=br(t.lineDash,"even")),l.has("points")&&t.points&&(e.parsedStyle.points=ms(t.points)),l.has("d")&&t.d===""&&(e.parsedStyle.d=(0,H.Z)({},fr)),l.has("d")&&t.d&&(e.parsedStyle.d=Yr(t.d)),l.has("textTransform")&&t.textTransform&&this.runtime.CSSPropertySyntaxFactory[R.TEXT_TRANSFORM].calculator(null,null,{value:t.textTransform},e,null),l.has("clipPath")&&!(0,ie.Z)(t.clipPath)&&this.runtime.CSSPropertySyntaxFactory[R.DEFINED_PATH].calculator("clipPath",s,t.clipPath,e,this.runtime),l.has("offsetPath")&&t.offsetPath&&this.runtime.CSSPropertySyntaxFactory[R.DEFINED_PATH].calculator("offsetPath",a,t.offsetPath,e,this.runtime),l.has("transform")&&t.transform&&(e.parsedStyle.transform=zr(t.transform)),l.has("transformOrigin")&&t.transformOrigin&&(e.parsedStyle.transformOrigin=As(t.transformOrigin)),l.has("markerStart")&&t.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[R.MARKER].calculator(null,t.markerStart,t.markerStart,null,null)),l.has("markerEnd")&&t.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[R.MARKER].calculator(null,t.markerEnd,t.markerEnd,null,null)),l.has("markerMid")&&t.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[R.MARKER].calculator("",t.markerMid,t.markerMid,null,null)),l.has("zIndex")&&!(0,de.Z)(t.zIndex)&&this.runtime.CSSPropertySyntaxFactory[R.Z_INDEX].postProcessor(e),l.has("offsetDistance")&&!(0,de.Z)(t.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[R.OFFSET_DISTANCE].postProcessor(e),l.has("transform")&&t.transform&&this.runtime.CSSPropertySyntaxFactory[R.TRANSFORM].postProcessor(e),l.has("transformOrigin")&&t.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[R.TRANSFORM_ORIGIN].postProcessor(e),o&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e))}},{key:"updateGeometry",value:function(e){var t=e.nodeName,r=this.runtime.geometryUpdaterFactory[t];if(r){var s=e.geometry;s.contentBounds||(s.contentBounds=new pe),s.renderBounds||(s.renderBounds=new pe);var a=e.parsedStyle,o=r.update(a,e),u=o.cx,l=u===void 0?0:u,c=o.cy,f=c===void 0?0:c,h=o.cz,v=h===void 0?0:h,d=o.hwidth,m=d===void 0?0:d,E=o.hheight,T=E===void 0?0:E,M=o.hdepth,P=M===void 0?0:M,Z=[Math.abs(m),Math.abs(T),P],y=a.stroke,g=a.lineWidth,p=g===void 0?1:g,x=a.increasedLineWidthForHitTesting,C=x===void 0?0:x,N=a.shadowType,S=N===void 0?"outer":N,b=a.shadowColor,B=a.filter,F=B===void 0?[]:B,Y=a.transformOrigin,V=[l,f,v];s.contentBounds.update(V,Z);var L=t===_.POLYLINE||t===_.POLYGON||t===_.PATH?Math.SQRT2:.5,U=y&&!y.isNone;if(U){var z=((p||0)+(C||0))*L;Z[0]+=z,Z[1]+=z}if(s.renderBounds.update(V,Z),b&&S&&S!=="inner"){var ve=s.renderBounds,ye=ve.min,Oe=ve.max,$n=a.shadowBlur,Hn=a.shadowOffsetX,St=a.shadowOffsetY,Jt=$n||0,Ti=Hn||0,Pi=St||0,wu=ye[0]-Jt+Ti,Cu=Oe[0]+Jt+Ti,Au=ye[1]-Jt+Pi,Ru=Oe[1]+Jt+Pi;ye[0]=Math.min(ye[0],wu),Oe[0]=Math.max(Oe[0],Cu),ye[1]=Math.min(ye[1],Au),Oe[1]=Math.max(Oe[1],Ru),s.renderBounds.setMinMax(ye,Oe)}F.forEach(function(Si){var wi=Si.name,Qt=Si.params;if(wi==="blur"){var Ci=Qt[0].value;s.renderBounds.update(s.renderBounds.center,k.IH(s.renderBounds.halfExtents,s.renderBounds.halfExtents,[Ci,Ci,0]))}else if(wi==="drop-shadow"){var Ai=Qt[0].value,Ri=Qt[1].value,qt=Qt[2].value,bi=s.renderBounds,Qe=bi.min,qe=bi.max,Lu=Qe[0]-qt+Ai,Du=qe[0]+qt+Ai,Iu=Qe[1]-qt+Ri,_u=qe[1]+qt+Ri;Qe[0]=Math.min(Qe[0],Lu),qe[0]=Math.max(qe[0],Du),Qe[1]=Math.min(Qe[1],Iu),qe[1]=Math.max(qe[1],_u),s.renderBounds.setMinMax(Qe,qe)}}),e.geometry.dirty=!1;var bu=m<0,Ou=T<0,Mi=(bu?-1:1)*(Y?Me(Y[0],0,e,!0):0),Ni=(Ou?-1:1)*(Y?Me(Y[1],1,e,!0):0);(Mi||Ni)&&e.setOrigin(Mi,Ni)}}},{key:"updateSizeAttenuation",value:function(e,t){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/t,e.nodeName===_.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/t)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===_.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))}}])}();function Os(n,i){var e=Hr(n);for(var t in i)e.has(t)&&(n.parsedStyle[t]=i[t])}function Hr(n){return n.constructor.PARSED_STYLE_LIST}var Ls=function(){function n(){(0,D.Z)(this,n),this.mixer=mn}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r,s){return Te(r)}}])}(),Ds=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r,s,a){return r instanceof we&&(r=null),a.sceneGraphService.updateDisplayObjectDependency(e,t,r,s),e==="clipPath"&&s.forEach(function(o){o.childNodes.length===0&&a.sceneGraphService.dirtifyToRoot(o)}),r}}])}(),Is=function(){function n(){(0,D.Z)(this,n),this.parser=ut,this.mixer=Ka}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r,s){return r instanceof we?r.value==="none"?Mr:Nr:r}}])}(),_s=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r){return r instanceof we?[]:r}}])}();function Kr(n){var i=n.parsedStyle,e=i.fontSize;return(0,de.Z)(e)?null:e}var Nn=function(){function n(){(0,D.Z)(this,n),this.mixer=mn}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r,s,a){if((0,je.Z)(r))return r;if(Q.isRelativeUnit(r.unit)){if(r.unit===O.kPercentage)return 0;if(r.unit===O.kEms){if(s.parentNode){var o=Kr(s.parentNode);if(o)return o*=r.value,o}return 0}if(r.unit===O.kRems){var u;if(s!=null&&(u=s.ownerDocument)!==null&&u!==void 0&&u.documentElement){var l=Kr(s.ownerDocument.documentElement);if(l)return l*=r.value,l}return 0}}else return r.value}}])}(),Zs=function(){function n(){(0,D.Z)(this,n),this.mixer=Dr}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r){return r.map(function(s){return s.value})}}])}(),Bs=function(){function n(){(0,D.Z)(this,n),this.mixer=Dr}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r){return r.map(function(s){return s.value})}}])}(),Fs=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r,s){var a;r instanceof we&&(r=null);var o=(a=r)===null||a===void 0?void 0:a.cloneNode(!0);return o&&(o.style.isMarker=!0),o}}])}(),Gs=function(){function n(){(0,D.Z)(this,n),this.mixer=mn}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r){return r.value}}])}(),Us=function(){function n(){(0,D.Z)(this,n),this.mixer=yn(0,1)}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r){return r.value}},{key:"postProcessor",value:function(e){var t=e.parsedStyle,r=t.offsetPath,s=t.offsetDistance;if(r){var a=r.nodeName;if(a===_.LINE||a===_.PATH||a===_.POLYLINE){var o=r.getPoint(s);o&&e.setLocalPosition(o.x,o.y)}}}}])}(),Ys=function(){function n(){(0,D.Z)(this,n),this.mixer=yn(0,1)}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r){return r.value}}])}(),Ws=function(){function n(){(0,D.Z)(this,n),this.parser=Yr,this.mixer=ps}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r){return r instanceof we&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new it(0,0,0,0)}:r}}])}(),zs=(0,I.Z)(function n(){(0,D.Z)(this,n),this.mixer=ys}),Xs=function(n){function i(){var e;(0,D.Z)(this,i);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=(0,K.Z)(this,i,[].concat(r)),e.mixer=yn(0,1/0),e}return(0,J.Z)(i,n),(0,I.Z)(i)}(Nn),Vs=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r,s){return r instanceof we?r.value==="unset"?"":r.value:"".concat(r)}},{key:"postProcessor",value:function(e){e.nodeValue="".concat(e.parsedStyle.text)||""}}])}(),$s=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r,s){var a=s.getAttribute("text");if(a){var o=a;r.value==="capitalize"?o=a.charAt(0).toUpperCase()+a.slice(1):r.value==="lowercase"?o=a.toLowerCase():r.value==="uppercase"&&(o=a.toUpperCase()),s.parsedStyle.text=o}return r.value}}])}(),Yu=function(i){return Object.fromEntries(Object.entries(i).filter(function(e){var t=_slicedToArray(e,2),r=t[1];return r!==void 0}))},Sn=new WeakMap;function Hs(n,i,e){if(n){var t=typeof n=="string"?document.getElementById(n):n;Sn.has(t)&&Sn.get(t).destroy(e),Sn.set(t,i)}}var wn=typeof window!="undefined"&&typeof window.document!="undefined";function Ks(n){return!!n.getAttribute}function Js(n,i){for(var e=0,t=n.length;e<t;){var r=e+t>>>1;Jr(n[r],i)<0?e=r+1:t=r}return e}function Jr(n,i){var e=Number(n.parsedStyle.zIndex||0),t=Number(i.parsedStyle.zIndex||0);if(e===t){var r=n.parentNode;if(r){var s=r.childNodes||[];return s.indexOf(n)-s.indexOf(i)}}return e-t}function Qr(n){var i=n;do{var e,t=(e=i.parsedStyle)===null||e===void 0?void 0:e.clipPath;if(t)return i;i=i.parentElement}while(i!==null);return null}var qr="px";function Qs(n,i,e){wn&&n.style&&(n.style.width=i+qr,n.style.height=e+qr)}function jr(n,i){if(wn)return document.defaultView.getComputedStyle(n,null).getPropertyValue(i)}function qs(n){var i=jr(n,"width");return i==="auto"?n.offsetWidth:parseFloat(i)}function js(n){var i=jr(n,"height");return i==="auto"?n.offsetHeight:parseFloat(i)}var eo=1,to={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Cn=typeof performance=="object"&&performance.now?performance:Date;function Yt(n){return n.nodeName===_.FRAGMENT?!0:n.getRootNode().nodeName===_.FRAGMENT}function no(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",i=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,t=!1,r=!1,s=!!i&&!i.isNone,a=!!e&&!e.isNone;return n==="visiblepainted"||n==="painted"||n==="auto"?(t=s,r=a):n==="visiblefill"||n==="fill"?t=!0:n==="visiblestroke"||n==="stroke"?r=!0:(n==="visible"||n==="all")&&(t=!0,r=!0),[t,r]}var ro=1,io=function(){return ro++},Ie=typeof self=="object"&&self.self===self?self:typeof G.g=="object"&&G.g.global===G.g?G.g:{},ao=Date.now(),so=function(){return Ie.performance&&typeof Ie.performance.now=="function"?Ie.performance.now():Date.now()-ao},xt={},ei=Date.now(),oo=function(i){if(typeof i!="function")throw new TypeError("".concat(i," is not a function"));var e=Date.now(),t=e-ei,r=t>16?0:16-t,s=io();return xt[s]=i,Object.keys(xt).length>1||setTimeout(function(){ei=e;var a=xt;xt={},Object.keys(a).forEach(function(o){return a[o](so())})},r),s},uo=function(i){delete xt[i]},lo=["","webkit","moz","ms","o"],ti=function(i){return typeof i!="string"?oo:i===""?Ie.requestAnimationFrame:Ie["".concat(i,"RequestAnimationFrame")]},co=function(i){return typeof i!="string"?uo:i===""?Ie.cancelAnimationFrame:Ie["".concat(i,"CancelAnimationFrame")]||Ie["".concat(i,"CancelRequestAnimationFrame")]},fo=function(i,e){for(var t=0;i[t]!==void 0;){if(e(i[t]))return i[t];t+=1}},ni=fo(lo,function(n){return!!ti(n)}),An=ti(ni),ri=co(ni);Ie.requestAnimationFrame=An,Ie.cancelAnimationFrame=ri;var ho=function(){function n(){(0,D.Z)(this,n),this.callbacks=[]}return(0,I.Z)(n,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(e,t){this.callbacks.push(t)}},{key:"promise",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.all(this.callbacks.map(function(s){return s.apply(void 0,t)}))}}])}(),vo=function(){function n(){(0,D.Z)(this,n),this.callbacks=[]}return(0,I.Z)(n,[{key:"tapPromise",value:function(e,t){this.callbacks.push(t)}},{key:"promise",value:function(){var i=(0,en.Z)((0,et.Z)().mark(function t(){var r,s,a,o,u=arguments;return(0,et.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.callbacks.length){c.next=14;break}return c.next=3,(r=this.callbacks)[0].apply(r,u);case 3:s=c.sent,a=0;case 5:if(!(a<this.callbacks.length-1)){c.next=13;break}return o=this.callbacks[a],c.next=9,o(s);case 9:s=c.sent;case 10:a++,c.next=5;break;case 13:return c.abrupt("return",s);case 14:return c.abrupt("return",null);case 15:case"end":return c.stop()}},t,this)}));function e(){return i.apply(this,arguments)}return e}()}])}(),xe=function(){function n(){(0,D.Z)(this,n),this.callbacks=[]}return(0,I.Z)(n,[{key:"tap",value:function(e,t){this.callbacks.push(t)}},{key:"call",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=arguments;this.callbacks.forEach(function(a){a.apply(void 0,s)})}}])}(),Rn=function(){function n(){(0,D.Z)(this,n),this.callbacks=[]}return(0,I.Z)(n,[{key:"tap",value:function(e,t){this.callbacks.push(t)}},{key:"call",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.callbacks.length){for(var s=arguments,a=this.callbacks[0].apply(void 0,s),o=0;o<this.callbacks.length-1;o++){var u=this.callbacks[o];a=u(a)}return a}return null}}])}(),go=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],po=/([\"\'])[^\'\"]+\1/;function mo(n){for(var i=n.fontSize,e=i===void 0?16:i,t=n.fontFamily,r=t===void 0?"sans-serif":t,s=n.fontStyle,a=s===void 0?"normal":s,o=n.fontVariant,u=o===void 0?"normal":o,l=n.fontWeight,c=l===void 0?"normal":l,f=(0,je.Z)(e)&&"".concat(e,"px")||"16px",h=r.split(","),v=h.length-1;v>=0;v--){var d=h[v].trim();!po.test(d)&&go.indexOf(d)<0&&(d='"'.concat(d,'"')),h[v]=d}return"".concat(a," ").concat(u," ").concat(c," ").concat(f," ").concat(h.join(","))}function bn(n,i,e){return A.identity(n),n[4]=Math.tan(i),n[1]=Math.tan(e),n}var ce=A.create(),yo=A.create(),Eo={scale:function(i){A.fromScaling(ce,[i[0].value,i[1].value,1])},scaleX:function(i){A.fromScaling(ce,[i[0].value,1,1])},scaleY:function(i){A.fromScaling(ce,[1,i[0].value,1])},scaleZ:function(i){A.fromScaling(ce,[1,1,i[0].value])},scale3d:function(i){A.fromScaling(ce,[i[0].value,i[1].value,i[2].value])},translate:function(i){A.fromTranslation(ce,[i[0].value,i[1].value,0])},translateX:function(i){A.fromTranslation(ce,[i[0].value,0,0])},translateY:function(i){A.fromTranslation(ce,[0,i[0].value,0])},translateZ:function(i){A.fromTranslation(ce,[0,0,i[0].value])},translate3d:function(i){A.fromTranslation(ce,[i[0].value,i[1].value,i[2].value])},rotate:function(i){A.fromZRotation(ce,q(Te(i[0])))},rotateX:function(i){A.fromXRotation(ce,q(Te(i[0])))},rotateY:function(i){A.fromYRotation(ce,q(Te(i[0])))},rotateZ:function(i){A.fromZRotation(ce,q(Te(i[0])))},rotate3d:function(i){A.fromRotation(ce,q(Te(i[3])),[i[0].value,i[1].value,i[2].value])},skew:function(i){bn(ce,q(i[0].value),q(i[1].value))},skewX:function(i){bn(ce,q(i[0].value),0)},skewY:function(i){bn(ce,0,q(i[0].value))},matrix:function(i){A.set(ce,i[0].value,i[1].value,0,0,i[2].value,i[3].value,0,0,0,0,1,0,i[4].value,i[5].value,0,1)},matrix3d:function(i){A.set.apply(A,[ce].concat((0,ee.Z)(i.map(function(e){return e.value}))))}},xo=k.al(1,1,1),ko=k.Ue(),ii={translate:function(i,e){w.sceneGraphService.setLocalScale(i,xo,!1),w.sceneGraphService.setLocalEulerAngles(i,ko,void 0,void 0,!1),w.sceneGraphService.setLocalPosition(i,[e[0].value,e[1].value,0],!1),w.sceneGraphService.dirtifyLocal(i,i.transformable)}};function ai(n,i){if(n.length){if(n.length===1&&ii[n[0].t]){ii[n[0].t](i,n[0].d);return}for(var e=A.identity(yo),t=0;t<n.length;t++){var r=n[t],s=r.t,a=r.d,o=Eo[s];o&&(o(a),A.mul(e,e,ce))}i.setLocalTransform(e)}else i.resetLocalTransform();return i.getLocalTransform()}var To=function(){function n(){(0,D.Z)(this,n),this.parser=Es,this.mixer=Cs}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r,s){return r instanceof we?[]:r}},{key:"postProcessor",value:function(e){ai(e.parsedStyle.transform,e)}}])}(),Po=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"postProcessor",value:function(e){var t=e.parsedStyle.transformOrigin;t[0].unit===O.kPixels&&t[1].unit===O.kPixels?e.setOrigin(t[0].value,t[1].value):e.getGeometryBounds()}}])}(),Mo=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"calculator",value:function(e,t,r,s){return r.value}},{key:"postProcessor",value:function(e){if(e.parentNode){var t=e.parentNode,r=t.renderable,s=t.sortable;r&&(r.dirty=!0),s&&(s.dirty=!0,s.dirtyReason=bt.Z_INDEX_CHANGED)}}}])}(),No=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"update",value:function(e,t){var r=e.cx,s=r===void 0?0:r,a=e.cy,o=a===void 0?0:a,u=e.r,l=u===void 0?0:u;return{cx:s,cy:o,hwidth:l,hheight:l}}}])}(),So=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"update",value:function(e,t){var r=e.cx,s=r===void 0?0:r,a=e.cy,o=a===void 0?0:a,u=e.rx,l=u===void 0?0:u,c=e.ry,f=c===void 0?0:c;return{cx:s,cy:o,hwidth:l,hheight:f}}}])}(),wo=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"update",value:function(e){var t=e.x1,r=e.y1,s=e.x2,a=e.y2,o=Math.min(t,s),u=Math.max(t,s),l=Math.min(r,a),c=Math.max(r,a),f=u-o,h=c-l,v=f/2,d=h/2;return{cx:o+v,cy:l+d,hwidth:v,hheight:d}}}])}(),Co=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"update",value:function(e){var t=e.d,r=t.rect,s=r.x,a=r.y,o=r.width,u=r.height,l=o/2,c=u/2;return{cx:s+l,cy:a+c,hwidth:l,hheight:c}}}])}(),Ao=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"update",value:function(e){if(e.points&&(0,Fi.Z)(e.points.points)){var t=e.points.points,r=Math.min.apply(Math,(0,ee.Z)(t.map(function(h){return h[0]}))),s=Math.max.apply(Math,(0,ee.Z)(t.map(function(h){return h[0]}))),a=Math.min.apply(Math,(0,ee.Z)(t.map(function(h){return h[1]}))),o=Math.max.apply(Math,(0,ee.Z)(t.map(function(h){return h[1]}))),u=s-r,l=o-a,c=u/2,f=l/2;return{cx:r+c,cy:a+f,hwidth:c,hheight:f}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Ro=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"update",value:function(e,t){var r=e.x,s=r===void 0?0:r,a=e.y,o=a===void 0?0:a,u=e.src,l=e.width,c=l===void 0?0:l,f=e.height,h=f===void 0?0:f,v=c,d=h;return u&&!(0,We.Z)(u)&&(v||(v=u.width,e.width=v),d||(d=u.height,e.height=d)),{cx:s+v/2,cy:o+d/2,hwidth:v/2,hheight:d/2}}}])}(),bo=function(){function n(i){(0,D.Z)(this,n),this.globalRuntime=i}return(0,I.Z)(n,[{key:"isReadyToMeasure",value:function(e,t){var r=e.text;return r}},{key:"update",value:function(e,t){var r,s=e.text,a=e.textAlign,o=a===void 0?"start":a,u=e.lineWidth,l=u===void 0?1:u,c=e.textBaseline,f=c===void 0?"alphabetic":c,h=e.dx,v=h===void 0?0:h,d=e.dy,m=d===void 0?0:d,E=e.x,T=E===void 0?0:E,M=e.y,P=M===void 0?0:M;if(!this.isReadyToMeasure(e,t))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var Z=(t==null||(r=t.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0?void 0:r.getConfig())||{},y=Z.offscreenCanvas,g=this.globalRuntime.textService.measureText(s,e,y);e.metrics=g;var p=g.width,x=g.height,C=p/2,N=x/2,S=T+C;o==="center"||o==="middle"?S+=l/2-C:(o==="right"||o==="end")&&(S+=l-C*2);var b=P-N;return f==="middle"?b+=N:f==="top"||f==="hanging"?b+=N*2:f==="alphabetic"||(f==="bottom"||f==="ideographic")&&(b+=0),v&&(S+=v),m&&(b+=m),{cx:S,cy:b,hwidth:C,hheight:N}}}])}(),Oo=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"update",value:function(e,t){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Lo=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"update",value:function(e,t){var r=e.x,s=r===void 0?0:r,a=e.y,o=a===void 0?0:a,u=e.width,l=u===void 0?0:u,c=e.height,f=c===void 0?0:c;return{cx:s+l/2,cy:o+f/2,hwidth:l/2,hheight:f/2}}}])}();function Wu(n){return!!n.type}var Wt=function(){function n(i){(0,D.Z)(this,n),this.eventPhase=n.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ge,this.page=new ge,this.canvas=new ge,this.viewport=new ge,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=i}return(0,I.Z)(n,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(te)}}])}(),si=function(n){function i(){var e;(0,D.Z)(this,i);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=(0,K.Z)(this,i,[].concat(r)),e.client=new ge,e.movement=new ge,e.offset=new ge,e.global=new ge,e.screen=new ge,e}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}},{key:"initMouseEvent",value:function(){throw new Error(te)}}])}(Wt),On=function(n){function i(){var e;(0,D.Z)(this,i);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=(0,K.Z)(this,i,[].concat(r)),e.width=0,e.height=0,e.isPrimary=!1,e}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(si),Ln=function(n){function i(){return(0,D.Z)(this,i),(0,K.Z)(this,i,arguments)}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(si),me=function(n){function i(e,t){var r;return(0,D.Z)(this,i),r=(0,K.Z)(this,i,[null]),r.type=e,r.detail=t,Object.assign(r,t),r}return(0,J.Z)(i,n),(0,I.Z)(i)}(Wt),oi=new WeakMap,ui=function(){function n(){(0,D.Z)(this,n),this.emitter=new Kn.Z}return(0,I.Z)(n,[{key:"on",value:function(e,t,r){return this.addEventListener(e,t,r),this}},{key:"addEventListener",value:function(e,t,r){var s=!1,a=!1;if((0,nr.Z)(r))s=r;else if(r){var o=r.capture;s=o===void 0?!1:o;var u=r.once;a=u===void 0?!1:u}s&&(e+="capture"),t=(0,ht.Z)(t)?t:t.handleEvent;var l=(0,ht.Z)(t)?void 0:t;return a?this.emitter.once(e,t,l):this.emitter.on(e,t,l),this}},{key:"off",value:function(e,t,r){return e?this.removeEventListener(e,t,r):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var e;(e=this.emitter)===null||e===void 0||e.removeAllListeners()}},{key:"removeEventListener",value:function(e,t,r){var s;if(!this.emitter)return this;var a=(0,nr.Z)(r)?r:r==null?void 0:r.capture;a&&(e+="capture"),t=(0,ht.Z)(t)?t:(s=t)===null||s===void 0?void 0:s.handleEvent;var o=(0,ht.Z)(t)?void 0:t;return this.emitter.off(e,t,o),this}},{key:"emit",value:function(e,t){this.dispatchEvent(new me(e,t))}},{key:"dispatchEvent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=oi.get(this);if(!r){var s;this.document?r=this:this.defaultView?r=this.defaultView:r=(s=this.ownerDocument)===null||s===void 0?void 0:s.defaultView,r&&oi.set(this,r)}if(r){if(e.manager=r.getEventService(),!e.manager)return!1;e.defaultPrevented=!1,e.path?e.path.length=0:e.page=[],t||(e.target=this),e.manager.dispatchEvent(e,e.type,t)}else this.emitter.emit(e.type,e);return!e.defaultPrevented}}])}(),ae=function(n){function i(){var e;(0,D.Z)(this,i);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=(0,K.Z)(this,i,[].concat(r)),e.shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.parentNode=null,e}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"textContent",get:function(){var t="";this.nodeName===_.TEXT&&(t+=this.style.text);var r=(0,tt.Z)(this.childNodes),s;try{for(r.s();!(s=r.n()).done;){var a=s.value;a.nodeName===_.TEXT?t+=a.nodeValue:t+=a.textContent}}catch(o){r.e(o)}finally{r.f()}return t},set:function(t){var r=this;this.childNodes.slice().forEach(function(s){r.removeChild(s)}),this.nodeName===_.TEXT&&(this.style.text="".concat(t))}},{key:"getRootNode",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(t){throw new Error(te)}},{key:"lookupNamespaceURI",value:function(t){throw new Error(te)}},{key:"lookupPrefix",value:function(t){throw new Error(te)}},{key:"normalize",value:function(){throw new Error(te)}},{key:"isEqualNode",value:function(t){return this===t}},{key:"isSameNode",value:function(t){return this.isEqualNode(t)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(t){if(t===this)return 0;for(var r=t,s=this,a=[r],o=[s];(u=r.parentNode)!==null&&u!==void 0?u:s.parentNode;){var u;r=r.parentNode?(a.push(r.parentNode),r.parentNode):r,s=s.parentNode?(o.push(s.parentNode),s.parentNode):s}if(r!==s)return i.DOCUMENT_POSITION_DISCONNECTED|i.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|i.DOCUMENT_POSITION_PRECEDING;var l=a.length>o.length?a:o,c=l===a?o:a;if(l[l.length-c.length]===c[0])return l===a?i.DOCUMENT_POSITION_CONTAINED_BY|i.DOCUMENT_POSITION_FOLLOWING:i.DOCUMENT_POSITION_CONTAINS|i.DOCUMENT_POSITION_PRECEDING;for(var f=l.length-c.length,h=c.length-1;h>=0;h--){var v=c[h],d=l[f+h];if(d!==v){var m=v.parentNode.childNodes;return m.indexOf(v)<m.indexOf(d)?c===a?i.DOCUMENT_POSITION_PRECEDING:i.DOCUMENT_POSITION_FOLLOWING:l===a?i.DOCUMENT_POSITION_PRECEDING:i.DOCUMENT_POSITION_FOLLOWING}}return i.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(t){return this.contains(t)}},{key:"contains",value:function(t){for(var r=t;r&&this!==r;)r=r.parentNode;return!!r}},{key:"getAncestor",value:function(t){for(var r=this;t>0&&r;)r=r.parentNode,t--;return r}},{key:"forEach",value:function(t){for(var r=[this];r.length>0;){var s=r.pop(),a=t(s);if(a===!1)break;for(var o=s.childNodes.length-1;o>=0;o--)r.push(s.childNodes[o])}}}],[{key:"isNode",value:function(t){return!!t.childNodes}}])}(ui);ae.DOCUMENT_POSITION_DISCONNECTED=1,ae.DOCUMENT_POSITION_PRECEDING=2,ae.DOCUMENT_POSITION_FOLLOWING=4,ae.DOCUMENT_POSITION_CONTAINS=8,ae.DOCUMENT_POSITION_CONTAINED_BY=16,ae.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var Do=2048,Io=function(){function n(i,e){var t=this;(0,D.Z)(this,n),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=A.create(),this.tmpVec3=k.Ue(),this.onPointerDown=function(r){var s=t.createPointerEvent(r);if(t.dispatchEvent(s,"pointerdown"),s.pointerType==="touch")t.dispatchEvent(s,"touchstart");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var a=s.button===2;t.dispatchEvent(s,a?"rightdown":"mousedown")}var o=t.trackingData(r.pointerId);o.pressTargetsByButton[r.button]=s.composedPath(),t.freeEvent(s)},this.onPointerUp=function(r){var s=Cn.now(),a=t.createPointerEvent(r,void 0,void 0,t.context.config.alwaysTriggerPointerEventOnCanvas?t.rootTarget:void 0);if(t.dispatchEvent(a,"pointerup"),a.pointerType==="touch")t.dispatchEvent(a,"touchend");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;t.dispatchEvent(a,o?"rightup":"mouseup")}var u=t.trackingData(r.pointerId),l=t.findMountedTarget(u.pressTargetsByButton[r.button]),c=l;if(l&&!a.composedPath().includes(l)){for(var f=l;f&&!a.composedPath().includes(f);){if(a.currentTarget=f,t.notifyTarget(a,"pointerupoutside"),a.pointerType==="touch")t.notifyTarget(a,"touchendoutside");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var h=a.button===2;t.notifyTarget(a,h?"rightupoutside":"mouseupoutside")}ae.isNode(f)&&(f=f.parentNode)}delete u.pressTargetsByButton[r.button],c=f}if(c){var v,d=t.clonePointerEvent(a,"click");d.target=c,d.path=[],u.clicksByButton[r.button]||(u.clicksByButton[r.button]={clickCount:0,target:d.target,timeStamp:s});var m=t.context.renderingContext.root.ownerDocument.defaultView,E=u.clicksByButton[r.button];E.target===d.target&&s-E.timeStamp<m.getConfig().dblClickSpeed?++E.clickCount:E.clickCount=1,E.target=d.target,E.timeStamp=s,d.detail=E.clickCount,(v=a.detail)!==null&&v!==void 0&&v.preventClick||(!t.context.config.useNativeClickEvent&&(d.pointerType==="mouse"||d.pointerType==="touch")&&t.dispatchEvent(d,"click"),t.dispatchEvent(d,"pointertap")),t.freeEvent(d)}t.freeEvent(a)},this.onPointerMove=function(r){var s=t.createPointerEvent(r,void 0,void 0,t.context.config.alwaysTriggerPointerEventOnCanvas?t.rootTarget:void 0),a=s.pointerType==="mouse"||s.pointerType==="pen",o=t.trackingData(r.pointerId),u=t.findMountedTarget(o.overTargets);if(o.overTargets&&u!==s.target){var l=r.type==="mousemove"?"mouseout":"pointerout",c=t.createPointerEvent(r,l,u||void 0);if(t.dispatchEvent(c,"pointerout"),a&&t.dispatchEvent(c,"mouseout"),!s.composedPath().includes(u)){var f=t.createPointerEvent(r,"pointerleave",u||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!s.composedPath().includes(f.target);)f.currentTarget=f.target,t.notifyTarget(f),a&&t.notifyTarget(f,"mouseleave"),ae.isNode(f.target)&&(f.target=f.target.parentNode);t.freeEvent(f)}t.freeEvent(c)}if(u!==s.target){var h=r.type==="mousemove"?"mouseover":"pointerover",v=t.clonePointerEvent(s,h);t.dispatchEvent(v,"pointerover"),a&&t.dispatchEvent(v,"mouseover");for(var d=u&&ae.isNode(u)&&u.parentNode;d&&d!==(ae.isNode(t.rootTarget)&&t.rootTarget.parentNode)&&d!==s.target;)d=d.parentNode;var m=!d||d===(ae.isNode(t.rootTarget)&&t.rootTarget.parentNode);if(m){var E=t.clonePointerEvent(s,"pointerenter");for(E.eventPhase=E.AT_TARGET;E.target&&E.target!==u&&E.target!==(ae.isNode(t.rootTarget)&&t.rootTarget.parentNode);)E.currentTarget=E.target,t.notifyTarget(E),a&&t.notifyTarget(E,"mouseenter"),ae.isNode(E.target)&&(E.target=E.target.parentNode);t.freeEvent(E)}t.freeEvent(v)}t.dispatchEvent(s,"pointermove"),s.pointerType==="touch"&&t.dispatchEvent(s,"touchmove"),a&&(t.dispatchEvent(s,"mousemove"),t.cursor=t.getCursor(s.target)),o.overTargets=s.composedPath(),t.freeEvent(s)},this.onPointerOut=function(r){var s=t.trackingData(r.pointerId);if(s.overTargets){var a=r.pointerType==="mouse"||r.pointerType==="pen",o=t.findMountedTarget(s.overTargets),u=t.createPointerEvent(r,"pointerout",o||void 0);t.dispatchEvent(u),a&&t.dispatchEvent(u,"mouseout");var l=t.createPointerEvent(r,"pointerleave",o||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(ae.isNode(t.rootTarget)&&t.rootTarget.parentNode);)l.currentTarget=l.target,t.notifyTarget(l),a&&t.notifyTarget(l,"mouseleave"),ae.isNode(l.target)&&(l.target=l.target.parentNode);s.overTargets=null,t.freeEvent(u),t.freeEvent(l)}t.cursor=null},this.onPointerOver=function(r){var s=t.trackingData(r.pointerId),a=t.createPointerEvent(r),o=a.pointerType==="mouse"||a.pointerType==="pen";t.dispatchEvent(a,"pointerover"),o&&t.dispatchEvent(a,"mouseover"),a.pointerType==="mouse"&&(t.cursor=t.getCursor(a.target));var u=t.clonePointerEvent(a,"pointerenter");for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==(ae.isNode(t.rootTarget)&&t.rootTarget.parentNode);)u.currentTarget=u.target,t.notifyTarget(u),o&&t.notifyTarget(u,"mouseenter"),ae.isNode(u.target)&&(u.target=u.target.parentNode);s.overTargets=a.composedPath(),t.freeEvent(a),t.freeEvent(u)},this.onPointerUpOutside=function(r){var s=t.trackingData(r.pointerId),a=t.findMountedTarget(s.pressTargetsByButton[r.button]),o=t.createPointerEvent(r);if(a){for(var u=a;u;)o.currentTarget=u,t.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch"||(o.pointerType==="mouse"||o.pointerType==="pen")&&t.notifyTarget(o,o.button===2?"rightupoutside":"mouseupoutside"),ae.isNode(u)&&(u=u.parentNode);delete s.pressTargetsByButton[r.button]}t.freeEvent(o)},this.onWheel=function(r){var s=t.createWheelEvent(r);t.dispatchEvent(s),t.freeEvent(s)},this.onClick=function(r){if(t.context.config.useNativeClickEvent){var s=t.createPointerEvent(r);t.dispatchEvent(s),t.freeEvent(s)}},this.onPointerCancel=function(r){var s=t.createPointerEvent(r,void 0,void 0,t.context.config.alwaysTriggerPointerEventOnCanvas?t.rootTarget:void 0);t.dispatchEvent(s),t.freeEvent(s)},this.globalRuntime=i,this.context=e}return(0,I.Z)(n,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var e=this.context.contextService.getBoundingClientRect(),t=1,r=1,s=this.context.contextService.getDomElement();if(s&&e){var a=s.offsetWidth,o=s.offsetHeight;a&&o&&(t=e.width/a,r=e.height/o)}return{scaleX:t,scaleY:r,bbox:e}}},{key:"client2Viewport",value:function(e){var t=this.getScale(),r=t.scaleX,s=t.scaleY,a=t.bbox;return new ge((e.x-((a==null?void 0:a.left)||0))/r,(e.y-((a==null?void 0:a.top)||0))/s)}},{key:"viewport2Client",value:function(e){var t=this.getScale(),r=t.scaleX,s=t.scaleY,a=t.bbox;return new ge((e.x+((a==null?void 0:a.left)||0))*r,(e.y+((a==null?void 0:a.top)||0))*s)}},{key:"viewport2Canvas",value:function(e){var t=e.x,r=e.y,s=this.rootTarget.defaultView,a=s.getCamera(),o=this.context.config,u=o.width,l=o.height,c=a.getPerspectiveInverse(),f=a.getWorldTransform(),h=A.multiply(this.tmpMatrix,f,c),v=k.t8(this.tmpVec3,t/u*2-1,(1-r/l)*2-1,0);return k.fF(v,v,h),new ge(v[0],v[1])}},{key:"canvas2Viewport",value:function(e){var t=this.rootTarget.defaultView,r=t.getCamera(),s=r.getPerspective(),a=r.getViewTransform(),o=A.multiply(this.tmpMatrix,s,a),u=k.t8(this.tmpVec3,e.x,e.y,0);k.fF(this.tmpVec3,this.tmpVec3,o);var l=this.context.config,c=l.width,f=l.height;return new ge((u[0]+1)/2*c,(1-(u[1]+1)/2)*f)}},{key:"setPickHandler",value:function(e){this.pickHandler=e}},{key:"addEventMapping",value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(r,s){return r.priority-s.priority})}},{key:"mapEvent",value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var r=0,s=t.length;r<s;r++)t[r].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type))}}},{key:"dispatchEvent",value:function(e,t,r){if(!r)e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t);else{e.eventPhase=e.AT_TARGET;var s=this.rootTarget.defaultView||null;e.currentTarget=s,this.notifyListeners(e,t)}}},{key:"propagate",value:function(e,t){if(e.target){var r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var s=r.length-1;s>=1;s--)if(e.currentTarget=r[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){var a=r.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var o=a+1;o<r.length;o++)if(e.currentTarget=r[o],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(e){var t=[e],r=this.rootTarget.defaultView||null;if(r&&r===e)return t.unshift(r.document),t;for(var s=0;s<Do&&e!==this.rootTarget;s++)ae.isNode(e)&&e.parentNode&&(t.push(e.parentNode),e=e.parentNode);return r&&t.push(r),t}},{key:"hitTest",value:function(e){var t=e.viewportX,r=e.viewportY,s=this.context.config,a=s.width,o=s.height,u=s.disableHitTesting;return t<0||r<0||t>a||r>o?null:!u&&this.pickHandler(e)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(e,t){var r,s=t==null?void 0:t.target;if((r=s)!==null&&r!==void 0&&r.shadowRoot&&(s=t.composedPath()[0]),s){if(s===e)return!0;if(e&&e.contains)return e.contains(s)}return t!=null&&t.composedPath?t.composedPath().indexOf(e)>-1:!1}},{key:"getExistedHTML",value:function(e){if(e.nativeEvent.composedPath)for(var t=0,r=e.nativeEvent.composedPath();t<r.length;t++){var s=r[t],a=this.nativeHTMLMap.get(s);if(a)return a}return null}},{key:"pickTarget",value:function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})}},{key:"createPointerEvent",value:function(e,t,r,s){var a=this.allocateEvent(On);this.copyPointerData(e,a),this.copyMouseData(e,a),this.copyData(e,a),a.nativeEvent=e.nativeEvent,a.originalEvent=e;var o=this.getExistedHTML(a),u=this.context.contextService.getDomElement();return a.target=r!=null?r:o||this.isNativeEventFromCanvas(u,a.nativeEvent)&&this.pickTarget(a)||s,typeof t=="string"&&(a.type=t),a}},{key:"createWheelEvent",value:function(e){var t=this.allocateEvent(Ln);this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e;var r=this.getExistedHTML(t),s=this.context.contextService.getDomElement();return t.target=r||this.isNativeEventFromCanvas(s,t.nativeEvent)&&this.pickTarget(t),t}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}},{key:"cloneWheelEvent",value:function(e){var t=this.allocateEvent(Ln);return t.nativeEvent=e.nativeEvent,t.originalEvent=e.originalEvent,this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.target=e.target,t.path=e.composedPath().slice(),t.type=e.type,t}},{key:"clonePointerEvent",value:function(e,t){var r=this.allocateEvent(On);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t!=null?t:r.type,r}},{key:"copyPointerData",value:function(e,t){t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist}},{key:"copyMouseData",value:function(e,t){t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.client.copyFrom(e.client),t.movement.copyFrom(e.movement),t.canvas.copyFrom(e.canvas),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global),t.offset.copyFrom(e.offset)}},{key:"copyWheelData",value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}},{key:"copyData",value:function(e,t){t.isTrusted=e.isTrusted,t.timeStamp=Cn.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.page.copyFrom(e.page),t.viewport.copyFrom(e.viewport)}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}},{key:"notifyTarget",value:function(e,t){t=t!=null?t:e.type;var r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}},{key:"notifyListeners",value:function(e,t){var r=e.currentTarget.emitter,s=r._events[t];if(s)if("fn"in s)s.once&&r.removeListener(t,s.fn,void 0,!0),s.fn.call(e.currentTarget||s.context,e);else for(var a=0;a<s.length&&!e.propagationImmediatelyStopped;a++)s[a].once&&r.removeListener(t,s[a].fn,void 0,!0),s[a].fn.call(e.currentTarget||s[a].context,e)}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var t=e[e.length-1],r=e.length-2;r>=0;r--){var s=e[r];if(s===this.rootTarget||ae.isNode(s)&&s.parentNode===t)t=e[r];else break}return t}},{key:"getCursor",value:function(e){for(var t=e;t;){var r=Ks(t)&&t.getAttribute("cursor");if(r)return r;t=ae.isNode(t)&&t.parentNode}}}])}(),li=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"getOrCreateCanvas",value:function(e,t){if(this.canvas)return this.canvas;if(e||w.offscreenCanvas)this.canvas=e||w.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,H.Z)({willReadFrequently:!0},t));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,H.Z)({willReadFrequently:!0},t)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,H.Z)({willReadFrequently:!0},t))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(e,t){return this.context?this.context:(this.getOrCreateCanvas(e,t),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch(e){}try{return document.createElement("canvas")}catch(e){}return null}}])}(),kt=function(n){return n[n.CAMERA_CHANGED=0]="CAMERA_CHANGED",n[n.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",n[n.NONE=2]="NONE",n}({}),_o=function(){function n(i,e){(0,D.Z)(this,n),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new xe,initAsync:new ho,dirtycheck:new Rn,cull:new Rn,beginFrame:new xe,beforeRender:new xe,render:new xe,afterRender:new xe,endFrame:new xe,destroy:new xe,pick:new vo,pickSync:new Rn,pointerDown:new xe,pointerUp:new xe,pointerMove:new xe,pointerOut:new xe,pointerOver:new xe,pointerWheel:new xe,pointerCancel:new xe,click:new xe},this.globalRuntime=i,this.context=e}return(0,I.Z)(n,[{key:"init",value:function(e){var t=this,r=(0,H.Z)((0,H.Z)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(s){s.apply(r,t.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){t.inited=!0,e()}).catch(function(s){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var e=this.context.config.renderer,t=e.getConfig(),r=t.enableDirtyRectangleRendering;return!r||this.context.renderingContext.renderReasons.has(kt.CAMERA_CHANGED)}},{key:"render",value:function(e,t,r){var s=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var a=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(a.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),a.renderReasons.size&&this.inited){a.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var o=a.renderReasons.size===1&&a.renderReasons.has(kt.CAMERA_CHANGED),u=!e.disableRenderHooks||!(e.disableRenderHooks&&o);u&&this.renderDisplayObject(a.root,e,a),this.hooks.beginFrame.call(t),u&&a.renderListCurrentFrame.forEach(function(l){s.hooks.beforeRender.call(l),s.hooks.render.call(l),s.hooks.afterRender.call(l)}),this.hooks.endFrame.call(t),a.renderListCurrentFrame=[],a.renderReasons.clear(),r()}}},{key:"renderDisplayObject",value:function(e,t,r){var s=this,a=t.renderer.getConfig(),o=a.enableDirtyCheck,u=a.enableCulling;function l(m){var E=m.renderable,T=m.sortable,M=o?E.dirty||r.dirtyRectangleRenderingDisabled?m:null:m;if(M){var P=u?s.hooks.cull.call(M,s.context.camera):M;P&&(s.stats.rendered+=1,r.renderListCurrentFrame.push(P))}E.dirty=!1,T.renderOrder=s.zIndexCounter,s.zIndexCounter+=1,s.stats.total+=1,T.dirty&&(s.sort(m,T),T.dirty=!1,T.dirtyChildren=[],T.dirtyReason=void 0)}for(var c=[e];c.length>0;){var f,h=c.pop();l(h);for(var v=((f=h.sortable)===null||f===void 0||(f=f.sorted)===null||f===void 0?void 0:f.length)>0?h.sortable.sorted:h.childNodes,d=v.length-1;d>=0;d--)c.push(v[d])}}},{key:"sort",value:function(e,t){var r,s;(t==null||(r=t.sorted)===null||r===void 0?void 0:r.length)>0&&t.dirtyReason!==bt.Z_INDEX_CHANGED?t.dirtyChildren.forEach(function(a){var o=t.sorted.indexOf(a);o>-1&&t.sorted.splice(o,1);var u=e.childNodes.indexOf(a);if(u>-1)if(t.sorted.length===0)t.sorted.push(a);else{var l=Js(t.sorted,a);t.sorted.splice(l,0,a)}}):t.sorted=e.childNodes.slice().sort(Jr),((s=t.sorted)===null||s===void 0?void 0:s.length)>0&&e.childNodes.filter(function(a){return a.parsedStyle.zIndex}).length===0&&(t.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(kt.DISPLAY_OBJECT_CHANGED)}}])}(),Zo=/\[\s*(.*)=(.*)\s*\]/,Bo=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"selectOne",value:function(e,t){var r=this;if(e.startsWith("."))return t.find(function(u){return((u==null?void 0:u.classList)||[]).indexOf(r.getIdOrClassname(e))>-1});if(e.startsWith("#"))return t.find(function(u){return u.id===r.getIdOrClassname(e)});if(e.startsWith("[")){var s=this.getAttribute(e),a=s.name,o=s.value;return a?t.find(function(u){return t!==u&&(a==="name"?u.name===o:r.attributeToString(u,a)===o)}):null}return t.find(function(u){return t!==u&&u.nodeName===e})}},{key:"selectAll",value:function(e,t){var r=this;if(e.startsWith("."))return t.findAll(function(u){return t!==u&&((u==null?void 0:u.classList)||[]).indexOf(r.getIdOrClassname(e))>-1});if(e.startsWith("#"))return t.findAll(function(u){return t!==u&&u.id===r.getIdOrClassname(e)});if(e.startsWith("[")){var s=this.getAttribute(e),a=s.name,o=s.value;return a?t.findAll(function(u){return t!==u&&(a==="name"?u.name===o:r.attributeToString(u,a)===o)}):[]}return t.findAll(function(u){return t!==u&&u.nodeName===e})}},{key:"is",value:function(e,t){if(e.startsWith("."))return t.className===this.getIdOrClassname(e);if(e.startsWith("#"))return t.id===this.getIdOrClassname(e);if(e.startsWith("[")){var r=this.getAttribute(e),s=r.name,a=r.value;return s==="name"?t.name===a:this.attributeToString(t,s)===a}return t.nodeName===e}},{key:"getIdOrClassname",value:function(e){return e.substring(1)}},{key:"getAttribute",value:function(e){var t=e.match(Zo),r="",s="";return t&&t.length>2&&(r=t[1].replace(/"/g,""),s=t[2].replace(/"/g,"")),{name:r,value:s}}},{key:"attributeToString",value:function(e,t){if(!e.getAttribute)return"";var r=e.getAttribute(t);return(0,de.Z)(r)?"":r.toString?r.toString():""}}])}(),he=function(n){return n.ATTR_MODIFIED="DOMAttrModified",n.INSERTED="DOMNodeInserted",n.MOUNTED="DOMNodeInsertedIntoDocument",n.REMOVED="removed",n.UNMOUNTED="DOMNodeRemovedFromDocument",n.REPARENT="reparent",n.DESTROY="destroy",n.BOUNDS_CHANGED="bounds-changed",n.CULLED="culled",n}({}),_e=function(n){function i(e,t,r,s,a,o,u,l){var c;return(0,D.Z)(this,i),c=(0,K.Z)(this,i,[null]),c.relatedNode=t,c.prevValue=r,c.newValue=s,c.attrName=a,c.attrChange=o,c.prevParsedValue=u,c.newParsedValue=l,c.type=e,c}return(0,J.Z)(i,n),(0,I.Z)(i)}(Wt);_e.ADDITION=2,_e.MODIFICATION=1,_e.REMOVAL=3;function ci(n){var i=n.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0)}var Fo=new _e(he.REPARENT,null,"","","",0,"",""),Go=wt.Ue(),zt=k.Ue(),Uo=k.al(1,1,1),Yo=A.create(),Wo=wt.Ue(),Ue=k.Ue(),ct=A.create(),Ye=X.Ue(),zo=k.Ue(),Xo=X.Ue(),Vo=k.Ue(),Tt=k.Ue(),Ke=k.Ue(),Xt=A.create(),fi=X.Ue(),hi=X.Ue(),Vt=X.Ue(),Dn={affectChildren:!0},$o=function(){function n(i){(0,D.Z)(this,n),this.pendingEvents=new Map,this.boundsChangedEvent=new me(he.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=i}return(0,I.Z)(n,[{key:"matches",value:function(e,t){return this.runtime.sceneGraphSelector.is(e,t)}},{key:"querySelector",value:function(e,t){return this.runtime.sceneGraphSelector.selectOne(e,t)}},{key:"querySelectorAll",value:function(e,t){return this.runtime.sceneGraphSelector.selectAll(e,t)}},{key:"attach",value:function(e,t,r){var s,a=!1;e.parentNode&&(a=e.parentNode!==t,this.detach(e));var o=e.nodeName===_.FRAGMENT,u=Yt(t);e.parentNode=t;var l=o?e.childNodes:[e];(0,je.Z)(r)?l.forEach(function(v){t.childNodes.splice(r,0,v),v.parentNode=t}):l.forEach(function(v){t.childNodes.push(v),v.parentNode=t});var c=t,f=c.sortable;if((f!=null&&(s=f.sorted)!==null&&s!==void 0&&s.length||f.dirty||e.parsedStyle.zIndex)&&(f.dirtyChildren.indexOf(e)===-1&&f.dirtyChildren.push(e),f.dirty=!0,f.dirtyReason=bt.ADDED),!u){if(o)this.dirtifyFragment(e);else{var h=e.transformable;h&&this.dirtifyWorld(e,h)}a&&e.dispatchEvent(Fo)}}},{key:"detach",value:function(e){var t,r;if(e.parentNode){var s=e.transformable,a=e.parentNode,o=a.sortable;(o!=null&&(t=o.sorted)!==null&&t!==void 0&&t.length||(r=e.style)!==null&&r!==void 0&&r.zIndex)&&(o.dirtyChildren.indexOf(e)===-1&&o.dirtyChildren.push(e),o.dirty=!0,o.dirtyReason=bt.REMOVED);var u=e.parentNode.childNodes.indexOf(e);u>-1&&e.parentNode.childNodes.splice(u,1),s&&this.dirtifyWorld(e,s),e.parentNode=null}}},{key:"getOrigin",value:function(e){return e.getGeometryBounds(),e.transformable.origin}},{key:"setOrigin",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t=="number"&&(t=[t,r,s]);var a=e.transformable;if(!(t[0]===a.origin[0]&&t[1]===a.origin[1]&&t[2]===a.origin[2])){var o=a.origin;o[0]=t[0],o[1]=t[1],o[2]=t[2]||0,this.dirtifyLocal(e,a)}}},{key:"rotate",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t=="number"&&(t=k.al(t,r,s));var a=e.transformable;if(e.parentNode===null||!e.parentNode.transformable)this.rotateLocal(e,t);else{var o=Ye;X.Su(o,t[0],t[1],t[2]);var u=this.getRotation(e),l=this.getRotation(e.parentNode);X.JG(Vt,l),X.U_(Vt,Vt),X.Jp(o,Vt,o),X.Jp(a.localRotation,o,u),X.Fv(a.localRotation,a.localRotation),this.dirtifyLocal(e,a)}}},{key:"rotateLocal",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t=="number"&&(t=k.al(t,r,s));var a=e.transformable;X.Su(hi,t[0],t[1],t[2]),X.dC(a.localRotation,a.localRotation,hi),this.dirtifyLocal(e,a)}},{key:"setEulerAngles",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t=="number"&&(t=k.al(t,r,s));var a=e.transformable;if(e.parentNode===null||!e.parentNode.transformable)this.setLocalEulerAngles(e,t);else{X.Su(a.localRotation,t[0],t[1],t[2]);var o=this.getRotation(e.parentNode);X.JG(fi,X.U_(Ye,o)),X.dC(a.localRotation,a.localRotation,fi),this.dirtifyLocal(e,a)}}},{key:"setLocalEulerAngles",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof t=="number"&&(t=k.al(t,r,s));var o=e.transformable;X.Su(o.localRotation,t[0],t[1],t[2]),a&&this.dirtifyLocal(e,o)}},{key:"translateLocal",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t=="number"&&(t=k.al(t,r,s));var a=e.transformable;k.fS(t,zt)||(k.VC(t,t,a.localRotation),k.IH(a.localPosition,a.localPosition,t),this.dirtifyLocal(e,a))}},{key:"setPosition",value:function(e,t){var r,s=e.transformable;if(Ke[0]=t[0],Ke[1]=t[1],Ke[2]=(r=t[2])!==null&&r!==void 0?r:0,!k.fS(this.getPosition(e),Ke)){if(k.JG(s.position,Ke),e.parentNode===null||!e.parentNode.transformable)k.JG(s.localPosition,Ke);else{var a=e.parentNode.transformable;A.copy(Xt,a.worldTransform),A.invert(Xt,Xt),k.fF(s.localPosition,Ke,Xt)}this.dirtifyLocal(e,s)}}},{key:"setLocalPosition",value:function(e,t){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=e.transformable;Tt[0]=t[0],Tt[1]=t[1],Tt[2]=(r=t[2])!==null&&r!==void 0?r:0,!k.fS(a.localPosition,Tt)&&(k.JG(a.localPosition,Tt),s&&this.dirtifyLocal(e,a))}},{key:"scaleLocal",value:function(e,t){var r,s=e.transformable;k.Jp(s.localScale,s.localScale,k.t8(Ue,t[0],t[1],(r=t[2])!==null&&r!==void 0?r:1)),this.dirtifyLocal(e,s)}},{key:"setLocalScale",value:function(e,t){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=e.transformable;k.t8(Ue,t[0],t[1],(r=t[2])!==null&&r!==void 0?r:a.localScale[2]),!k.fS(Ue,a.localScale)&&(k.JG(a.localScale,Ue),s&&this.dirtifyLocal(e,a))}},{key:"translate",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof t=="number"&&(t=k.t8(Ue,t,r,s)),!k.fS(t,zt)&&(k.IH(Ue,this.getPosition(e),t),this.setPosition(e,Ue))}},{key:"setRotation",value:function(e,t,r,s,a){var o=e.transformable;if(typeof t=="number"&&(t=X.al(t,r,s,a)),e.parentNode===null||!e.parentNode.transformable)this.setLocalRotation(e,t);else{var u=this.getRotation(e.parentNode);X.JG(Ye,u),X.U_(Ye,Ye),X.Jp(o.localRotation,Ye,t),X.Fv(o.localRotation,o.localRotation),this.dirtifyLocal(e,o)}}},{key:"setLocalRotation",value:function(e,t,r,s,a){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof t=="number"&&(t=X.t8(Ye,t,r,s,a));var u=e.transformable;X.JG(u.localRotation,t),o&&this.dirtifyLocal(e,u)}},{key:"setLocalSkew",value:function(e,t,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof t=="number"&&(t=wt.t8(Wo,t,r));var a=e.transformable;wt.JG(a.localSkew,t),s&&this.dirtifyLocal(e,a)}},{key:"dirtifyLocal",value:function(e,t){Yt(e)||t.localDirtyFlag||(t.localDirtyFlag=!0,t.dirtyFlag||this.dirtifyWorld(e,t))}},{key:"dirtifyWorld",value:function(e,t){t.dirtyFlag||this.unfreezeParentToRoot(e),this.dirtifyWorldInternal(e,t),this.dirtifyToRoot(e,!0)}},{key:"dirtifyFragment",value:function(e){var t=e.transformable;t&&(t.frozen=!1,t.dirtyFlag=!0,t.localDirtyFlag=!0);var r=e.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0,r.dirty=!0);for(var s=e.childNodes.length,a=0;a<s;a++)this.dirtifyFragment(e.childNodes[a]);e.nodeName===_.FRAGMENT&&this.pendingEvents.set(e,!1)}},{key:"triggerPendingEvents",value:function(){var e=this,t=new Set,r=function(a,o){!a.isConnected||t.has(a)||a.nodeName===_.FRAGMENT||(e.boundsChangedEvent.detail=o,e.boundsChangedEvent.target=a,a.isMutationObserved?a.dispatchEvent(e.boundsChangedEvent):a.ownerDocument.defaultView.dispatchEvent(e.boundsChangedEvent,!0),t.add(a))};this.pendingEvents.forEach(function(s,a){a.nodeName!==_.FRAGMENT&&(Dn.affectChildren=s,s?a.forEach(function(o){r(o,Dn)}):r(a,Dn))}),t.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"dirtifyToRoot",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e;for(r.renderable&&(r.renderable.dirty=!0);r;)ci(r),r=r.parentNode;t&&e.forEach(function(s){ci(s)}),this.informDependentDisplayObjects(e),this.pendingEvents.set(e,t)}},{key:"updateDisplayObjectDependency",value:function(e,t,r,s){if(t&&t!==r){var a=this.displayObjectDependencyMap.get(t);if(a&&a[e]){var o=a[e].indexOf(s);a[e].splice(o,1)}}if(r){var u=this.displayObjectDependencyMap.get(r);u||(this.displayObjectDependencyMap.set(r,{}),u=this.displayObjectDependencyMap.get(r)),u[e]||(u[e]=[]),u[e].push(s)}}},{key:"informDependentDisplayObjects",value:function(e){var t=this,r=this.displayObjectDependencyMap.get(e);r&&Object.keys(r).forEach(function(s){r[s].forEach(function(a){t.dirtifyToRoot(a,!0),a.dispatchEvent(new _e(he.ATTR_MODIFIED,a,t,t,s,_e.MODIFICATION,t,t)),a.isCustomElement&&a.isConnected&&a.attributeChangedCallback&&a.attributeChangedCallback(s,t,t)})})}},{key:"getPosition",value:function(e){var t=e.transformable;return A.getTranslation(t.position,this.getWorldTransform(e,t))}},{key:"getRotation",value:function(e){var t=e.transformable;return A.getRotation(t.rotation,this.getWorldTransform(e,t))}},{key:"getScale",value:function(e){var t=e.transformable;return A.getScaling(t.scaling,this.getWorldTransform(e,t))}},{key:"getWorldTransform",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.transformable;return!t.localDirtyFlag&&!t.dirtyFlag||(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.sync(e,t)),t.worldTransform}},{key:"getLocalPosition",value:function(e){return e.transformable.localPosition}},{key:"getLocalRotation",value:function(e){return e.transformable.localRotation}},{key:"getLocalScale",value:function(e){return e.transformable.localScale}},{key:"getLocalSkew",value:function(e){return e.transformable.localSkew}},{key:"calcLocalTransform",value:function(e){var t=e.localSkew[0]!==0||e.localSkew[1]!==0;if(t){A.fromRotationTranslationScaleOrigin(e.localTransform,e.localRotation,e.localPosition,k.al(1,1,1),e.origin),(e.localSkew[0]!==0||e.localSkew[1]!==0)&&(A.identity(ct),ct[4]=Math.tan(e.localSkew[0]),ct[1]=Math.tan(e.localSkew[1]),A.multiply(e.localTransform,e.localTransform,ct));var r=A.fromRotationTranslationScaleOrigin(ct,X.t8(Ye,0,0,0,1),k.t8(Ue,1,1,1),e.localScale,e.origin);A.multiply(e.localTransform,e.localTransform,r)}else{var s=e.localTransform,a=e.localPosition,o=e.localRotation,u=e.localScale,l=e.origin,c=a[0]!==0||a[1]!==0||a[2]!==0,f=o[3]!==1||o[0]!==0||o[1]!==0||o[2]!==0,h=u[0]!==1||u[1]!==1||u[2]!==1,v=l[0]!==0||l[1]!==0||l[2]!==0;!f&&!h&&!v?c?A.fromTranslation(s,a):A.identity(s):A.fromRotationTranslationScaleOrigin(s,o,a,u,l)}}},{key:"getLocalTransform",value:function(e){var t=e.transformable;return t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.localTransform}},{key:"setLocalTransform",value:function(e,t){var r=A.getTranslation(zo,t),s=A.getRotation(Xo,t),a=A.getScaling(Vo,t);this.setLocalScale(e,a,!1),this.setLocalPosition(e,r,!1),this.setLocalRotation(e,s,void 0,void 0,void 0,!1),this.dirtifyLocal(e,e.transformable)}},{key:"resetLocalTransform",value:function(e){this.setLocalScale(e,Uo,!1),this.setLocalPosition(e,zt,!1),this.setLocalEulerAngles(e,zt,void 0,void 0,!1),this.setLocalSkew(e,Go,void 0,!1),this.dirtifyLocal(e,e.transformable)}},{key:"getTransformedGeometryBounds",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2?arguments[2]:void 0,s=this.getGeometryBounds(e,t);if(!pe.isEmpty(s)){var a=r||new pe;return a.setFromTransformedAABB(s,this.getWorldTransform(e)),a}return null}},{key:"getGeometryBounds",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e,s=r.geometry;s.dirty&&w.styleValueRegistry.updateGeometry(e);var a=t?s.renderBounds:s.contentBounds||null;return a||new pe}},{key:"getBounds",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=e,a=s.renderable;if(!a.boundsDirty&&!r&&a.bounds)return a.bounds;if(!a.renderBoundsDirty&&r&&a.renderBounds)return a.renderBounds;var o=r?a.renderBounds:a.bounds,u=this.getTransformedGeometryBounds(e,r,o),l=e.childNodes;if(l.forEach(function(h){var v=t.getBounds(h,r);v&&(u?u.add(v):(u=o||new pe,u.update(v.center,v.halfExtents)))}),u||(u=new pe),r){var c=Qr(e);if(c){var f=c.parsedStyle.clipPath.getBounds(r);u?f&&(u=f.intersection(u)):u.update(f.center,f.halfExtents)}}return r?(a.renderBounds=u,a.renderBoundsDirty=!1):(a.bounds=u,a.boundsDirty=!1),u}},{key:"getLocalBounds",value:function(e){if(e.parentNode){var t=Yo;e.parentNode.transformable&&(t=A.invert(ct,this.getWorldTransform(e.parentNode)));var r=this.getBounds(e);if(!pe.isEmpty(r)){var s=new pe;return s.setFromTransformedAABB(r,t),s}}return this.getBounds(e)}},{key:"getBoundingClientRect",value:function(e){var t,r,s=this.getGeometryBounds(e);pe.isEmpty(s)||(r=new pe,r.setFromTransformedAABB(s,this.getWorldTransform(e)));var a=(t=e.ownerDocument)===null||t===void 0||(t=t.defaultView)===null||t===void 0?void 0:t.getContextService().getBoundingClientRect();if(r){var o=r.getMin(),u=(0,re.Z)(o,2),l=u[0],c=u[1],f=r.getMax(),h=(0,re.Z)(f,2),v=h[0],d=h[1];return new it(l+((a==null?void 0:a.left)||0),c+((a==null?void 0:a.top)||0),v-l,d-c)}return new it((a==null?void 0:a.left)||0,(a==null?void 0:a.top)||0,0,0)}},{key:"dirtifyWorldInternal",value:function(e,t){var r=this;if(!t.dirtyFlag){t.dirtyFlag=!0,t.frozen=!1,e.childNodes.forEach(function(o){var u=o.transformable;u.dirtyFlag||r.dirtifyWorldInternal(o,u)});var s=e,a=s.renderable;a&&(a.renderBoundsDirty=!0,a.boundsDirty=!0,a.dirty=!0)}}},{key:"syncHierarchy",value:function(e){var t=e.transformable;if(!t.frozen){t.frozen=!0,(t.localDirtyFlag||t.dirtyFlag)&&this.sync(e,t);for(var r=e.childNodes,s=0;s<r.length;s++)this.syncHierarchy(r[s])}}},{key:"sync",value:function(e,t){if(t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.dirtyFlag){var r=e.parentNode,s=r&&r.transformable;r===null||!s?A.copy(t.worldTransform,t.localTransform):A.multiply(t.worldTransform,s.worldTransform,t.localTransform),t.dirtyFlag=!1}}},{key:"unfreezeParentToRoot",value:function(e){for(var t=e.parentNode;t;){var r=t.transformable;r&&(r.frozen=!1),t=t.parentNode}}}])}(),Je={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},vi=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,Ho=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,Ko=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,Jo=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,Qo=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,qo=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,jo=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,eu=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,tu=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,nu=new RegExp("".concat(Ho.source,"|").concat(Jo.source,"|").concat(qo.source,"|").concat(eu.source)),ru=new RegExp("".concat(Ko.source,"|").concat(Qo.source,"|").concat(jo.source,"|").concat(tu.source)),iu=function(){function n(i){var e=this;(0,D.Z)(this,n),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(t,r){return e.isBreakingSpace(r)?!1:!!(t&&(ru.exec(r)||nu.exec(t)))},this.trimByKinsokuShorui=function(t){var r=(0,ee.Z)(t),s=r[r.length-2];if(!s)return t;var a=s[s.length-1];return r[r.length-2]=s.slice(0,-1),r[r.length-1]=a+r[r.length-1],r},this.runtime=i}return(0,I.Z)(n,[{key:"measureFont",value:function(e,t){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var r={ascent:0,descent:0,fontSize:0},s=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(t),a=this.runtime.offscreenCanvasCreator.getOrCreateContext(t,{willReadFrequently:!0});a.font=e;var o=Je.MetricsString+Je.BaselineSymbol,u=Math.ceil(a.measureText(o).width),l=Math.ceil(a.measureText(Je.BaselineSymbol).width),c=Je.HeightMultiplier*l;l=l*Je.BaselineMultiplier|0,s.width=u,s.height=c,a.fillStyle="#f00",a.fillRect(0,0,u,c),a.font=e,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(o,0,l);var f=a.getImageData(0,0,u||1,c||1).data,h=f.length,v=u*4,d=0,m=0,E=!1;for(d=0;d<l;++d){for(var T=0;T<v;T+=4)if(f[m+T]!==255){E=!0;break}if(!E)m+=v;else break}for(r.ascent=l-d,m=h-v,E=!1,d=c;d>l;--d){for(var M=0;M<v;M+=4)if(f[m+M]!==255){E=!0;break}if(!E)m-=v;else break}return r.descent=d-l,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[e]=r,r}},{key:"measureText",value:function(e,t,r){var s=t.fontSize,a=s===void 0?16:s,o=t.wordWrap,u=o===void 0?!1:o,l=t.lineHeight,c=t.lineWidth,f=c===void 0?1:c,h=t.textBaseline,v=h===void 0?"alphabetic":h,d=t.textAlign,m=d===void 0?"start":d,E=t.letterSpacing,T=E===void 0?0:E,M=t.textPath;t.textPathSide,t.textPathStartOffset;var P=t.leading,Z=P===void 0?0:P,y=mo(t),g=this.measureFont(y,r);g.fontSize===0&&(g.fontSize=a,g.ascent=a);var p=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);p.font=y,t.isOverflowing=!1;var x=u?this.wordWrap(e,t,r):e,C=x.split(/(?:\r\n|\r|\n)/),N=new Array(C.length),S=0;if(M){M.getTotalLength();for(var b=0;b<C.length;b++)p.measureText(C[b]).width+(C[b].length-1)*T}else{for(var B=0;B<C.length;B++){var F=p.measureText(C[B]).width+(C[B].length-1)*T;N[B]=F,S=Math.max(S,F)}var Y=S+f,V=l||g.fontSize+f,L=Math.max(V,g.fontSize+f)+(C.length-1)*(V+Z);V+=Z;var U=0;return v==="middle"?U=-L/2:v==="bottom"||v==="alphabetic"||v==="ideographic"?U=-L:(v==="top"||v==="hanging")&&(U=0),{font:y,width:Y,height:L,lines:C,lineWidths:N,lineHeight:V,maxLineWidth:S,fontProperties:g,lineMetrics:N.map(function(z,ve){var ye=0;return m==="center"||m==="middle"?ye-=z/2:(m==="right"||m==="end")&&(ye-=z),new it(ye-f/2,U+ve*V,z+f,V)})}}}},{key:"wordWrap",value:function(e,t,r){var s=this,a=this,o=t.wordWrapWidth,u=o===void 0?0:o,l=t.letterSpacing,c=l===void 0?0:l,f=t.maxLines,h=f===void 0?1/0:f,v=t.textOverflow,d=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),m=u+c,E="";v==="ellipsis"?E="...":v&&v!=="clip"&&(E=v);var T=Array.from(e),M=[],P=0,Z=0,y=0,g={},p=function(U){return s.getFromCache(U,c,g,d)},x=p(E);function C(L,U,z,ve){for(;p(L)<ve&&U<T.length-1&&!a.isNewline(T[U+1]);)U+=1,L+=T[U];for(;p(L)>ve&&U>z;)U-=1,L=L.slice(0,-1);return{lineTxt:L,txtLastCharIndex:U}}function N(L,U){if(!(x<=0||x>m)){if(!M[L]){M[L]=E;return}var z=C(M[L],U,y+1,m-x);M[L]=z.lineTxt+E}}for(var S=0;S<T.length;S++){var b=T[S],B=T[S-1],F=T[S+1],Y=p(b);if(this.isNewline(b)){if(P+1>=h){t.isOverflowing=!0,S<T.length-1&&N(P,S-1);break}y=S-1,P+=1,Z=0,M[P]="";continue}if(Z>0&&Z+Y>m){var V=C(M[P],S-1,y+1,m);if(V.txtLastCharIndex!==S-1){if(M[P]=V.lineTxt,V.txtLastCharIndex===T.length-1)break;S=V.txtLastCharIndex+1,b=T[S],B=T[S-1],F=T[S+1],Y=p(b)}if(P+1>=h){t.isOverflowing=!0,N(P,S-1);break}if(y=S-1,P+=1,Z=0,M[P]="",this.isBreakingSpace(b))continue;this.canBreakInLastChar(b)||(M=this.trimToBreakable(M),Z=this.sumTextWidthByCache(M[P]||"",p)),this.shouldBreakByKinsokuShorui(b,F)&&(M=this.trimByKinsokuShorui(M),Z+=p(B||""))}Z+=Y,M[P]=(M[P]||"")+b}return M.join(`
`)}},{key:"isBreakingSpace",value:function(e){return typeof e!="string"?!1:Je.BreakingSpaces.indexOf(e.charCodeAt(0))>=0}},{key:"isNewline",value:function(e){return typeof e!="string"?!1:Je.Newlines.indexOf(e.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(e){var t=(0,ee.Z)(e),r=t[t.length-2],s=this.findBreakableIndex(r);if(s===-1||!r)return t;var a=r.slice(s,s+1),o=this.isBreakingSpace(a),u=s+1,l=s+(o?0:1);return t[t.length-1]+=r.slice(u,r.length),t[t.length-2]=r.slice(0,l),t}},{key:"canBreakInLastChar",value:function(e){return!(e&&vi.test(e))}},{key:"sumTextWidthByCache",value:function(e,t){return e.split("").reduce(function(r,s){return r+t(s)},0)}},{key:"findBreakableIndex",value:function(e){for(var t=e.length-1;t>=0;t--)if(!vi.test(e[t]))return t;return-1}},{key:"getFromCache",value:function(e,t,r,s){var a=r[e];if(typeof a!="number"){var o=e.length*t,u=s.measureText(e);a=u.width+o,r[e]=a}return a}}])}(),w={},au=function(n){var i=new Ro,e=new Ao;return n={},(0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)(n,_.FRAGMENT,null),_.CIRCLE,new No),_.ELLIPSE,new So),_.RECT,i),_.IMAGE,i),_.GROUP,new Oo),_.LINE,new wo),_.TEXT,new bo(w)),_.POLYLINE,e),_.POLYGON,e),(0,$.Z)((0,$.Z)((0,$.Z)(n,_.PATH,new Co),_.HTML,new Lo),_.MESH,null)}(),su=function(n){var i=new Is,e=new Nn;return n={},(0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)(n,R.PERCENTAGE,null),R.NUMBER,new Gs),R.ANGLE,new Ls),R.DEFINED_PATH,new Ds),R.PAINT,i),R.COLOR,i),R.FILTER,new _s),R.LENGTH,e),R.LENGTH_PERCENTAGE,e),R.LENGTH_PERCENTAGE_12,new Zs),(0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)((0,$.Z)(n,R.LENGTH_PERCENTAGE_14,new Bs),R.COORDINATE,new Nn),R.OFFSET_DISTANCE,new Us),R.OPACITY_VALUE,new Ys),R.PATH,new Ws),R.LIST_OF_POINTS,new zs),R.SHADOW_BLUR,new Xs),R.TEXT,new Vs),R.TEXT_TRANSFORM,new $s),R.TRANSFORM,new To),(0,$.Z)((0,$.Z)((0,$.Z)(n,R.TRANSFORM_ORIGIN,new Po),R.Z_INDEX,new Mo),R.MARKER,new Fs)}(),ou=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof G.g!="undefined"?G.g:{}};w.CameraContribution=cr,w.AnimationTimeline=null,w.EasingFunction=null,w.offscreenCanvasCreator=new li,w.sceneGraphSelector=new Bo,w.sceneGraphService=new $o(w),w.textService=new iu(w),w.geometryUpdaterFactory=au,w.CSSPropertySyntaxFactory=su,w.styleValueRegistry=new bs(w),w.layoutRegistry=null,w.globalThis=ou(),w.enableStyleSyntax=!0,w.enableSizeAttenuation=!1;var di=0;function zu(){di=0}var In=new _e(he.INSERTED,null,"","","",0,"",""),_n=new _e(he.REMOVED,null,"","","",0,"",""),gi=new me(he.DESTROY),uu=function(n){function i(){var e;(0,D.Z)(this,i);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=(0,K.Z)(this,i,[].concat(r)),e.entity=di++,e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.cullable={strategy:ua.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},e.rBushNode={aabb:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.destroyed=!1,e.style={},e.computedStyle={},e.parsedStyle={},e.attributes={},e}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(t){return t!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null}},{key:"cloneNode",value:function(t){throw new Error(te)}},{key:"appendChild",value:function(t,r){var s;if(t.destroyed)throw new Error(Ji);return w.sceneGraphService.attach(t,this,r),(s=this.ownerDocument)!==null&&s!==void 0&&s.defaultView&&(!Yt(this)&&t.nodeName===_.FRAGMENT?this.ownerDocument.defaultView.mountFragment(t):this.ownerDocument.defaultView.mountChildren(t)),this.isMutationObserved&&(In.relatedNode=this,t.dispatchEvent(In)),t}},{key:"insertBefore",value:function(t,r){if(!r)this.appendChild(t);else{t.parentElement&&t.parentElement.removeChild(t);var s=this.childNodes.indexOf(r);s===-1?this.appendChild(t):this.appendChild(t,s)}return t}},{key:"replaceChild",value:function(t,r){var s=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(t,s),r}},{key:"removeChild",value:function(t){var r;return _n.relatedNode=this,t.dispatchEvent(_n),(r=t.ownerDocument)!==null&&r!==void 0&&r.defaultView&&t.ownerDocument.defaultView.unmountChildren(t),w.sceneGraphService.detach(t),t}},{key:"removeChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var r=this.childNodes[t];this.removeChild(r)}}},{key:"destroyChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var r=this.childNodes[t];r.childNodes.length>0&&r.destroyChildren(),r.destroy()}}},{key:"matches",value:function(t){return w.sceneGraphService.matches(t,this)}},{key:"getElementById",value:function(t){return w.sceneGraphService.querySelector("#".concat(t),this)}},{key:"getElementsByName",value:function(t){return w.sceneGraphService.querySelectorAll('[name="'.concat(t,'"]'),this)}},{key:"getElementsByClassName",value:function(t){return w.sceneGraphService.querySelectorAll(".".concat(t),this)}},{key:"getElementsByTagName",value:function(t){return w.sceneGraphService.querySelectorAll(t,this)}},{key:"querySelector",value:function(t){return w.sceneGraphService.querySelector(t,this)}},{key:"querySelectorAll",value:function(t){return w.sceneGraphService.querySelectorAll(t,this)}},{key:"closest",value:function(t){var r=this;do{if(w.sceneGraphService.matches(t,r))return r;r=r.parentElement}while(r!==null);return null}},{key:"find",value:function(t){var r=this,s=null;return this.forEach(function(a){return a!==r&&t(a)?(s=a,!1):!0}),s}},{key:"findAll",value:function(t){var r=this,s=[];return this.forEach(function(a){a!==r&&t(a)&&s.push(a)}),s}},{key:"after",value:function(){var t=this;if(this.parentNode){for(var r=this.parentNode.childNodes.indexOf(this),s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];a.forEach(function(u,l){var c;return(c=t.parentNode)===null||c===void 0?void 0:c.appendChild(u,r+l+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var t,r=this.parentNode.childNodes.indexOf(this),s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];var u=a[0],l=a.slice(1);this.parentNode.appendChild(u,r),(t=u).after.apply(t,(0,ee.Z)(l))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var t=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];s.forEach(function(o){return t.appendChild(o)})}},{key:"prepend",value:function(){for(var t=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];s.forEach(function(o,u){return t.appendChild(o,u)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent(gi),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return w.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return w.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return w.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return w.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return w.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(t){if(typeof t!="symbol"){var r=this.attributes[t];return r}}},{key:"hasAttribute",value:function(t){return this.getAttributeNames().includes(t)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(t){this.setAttribute(t,null),delete this.attributes[t]}},{key:"setAttribute",value:function(t,r,s,a){this.attributes[t]=r}},{key:"getAttributeNS",value:function(t,r){throw new Error(te)}},{key:"getAttributeNode",value:function(t){throw new Error(te)}},{key:"getAttributeNodeNS",value:function(t,r){throw new Error(te)}},{key:"hasAttributeNS",value:function(t,r){throw new Error(te)}},{key:"removeAttributeNS",value:function(t,r){throw new Error(te)}},{key:"removeAttributeNode",value:function(t){throw new Error(te)}},{key:"setAttributeNS",value:function(t,r,s){throw new Error(te)}},{key:"setAttributeNode",value:function(t){throw new Error(te)}},{key:"setAttributeNodeNS",value:function(t){throw new Error(te)}},{key:"toggleAttribute",value:function(t,r){throw new Error(te)}}])}(ae);function j(n){return!!(n!=null&&n.nodeName)}var lu=w.globalThis.Proxy?w.globalThis.Proxy:function(){},Ze=new _e(he.ATTR_MODIFIED,null,null,null,null,_e.MODIFICATION,null,null),Pt=k.Ue(),cu=X.Ue(),se=function(n){function i(e){var t;return(0,D.Z)(this,i),t=(0,K.Z)(this,i),t.isCustomElement=!1,t.isMutationObserved=!1,t.activeAnimations=[],t.config=e,t.id=e.id||"",t.name=e.name||"",(e.className||e.class)&&(t.className=e.className||e.class),t.nodeName=e.type||_.GROUP,e.initialParsedStyle&&Object.assign(t.parsedStyle,e.initialParsedStyle),t.initAttributes(e.style),w.enableStyleSyntax&&(t.style=new lu({setProperty:function(s,a){t.setAttribute(s,a)},getPropertyValue:function(s){return t.getAttribute(s)},removeProperty:function(s){t.removeAttribute(s)},item:function(){return""}},{get:function(s,a){return s[a]!==void 0?s[a]:t.getAttribute(a)},set:function(s,a,o){return t.setAttribute(a,o),!0}})),t}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"destroy",value:function(){(0,rr.Z)(i,"destroy",this,3)([]),this.getAnimations().forEach(function(t){t.cancel()})}},{key:"cloneNode",value:function(t,r){var s=(0,H.Z)({},this.attributes);for(var a in s){var o=s[a];j(o)&&a!=="clipPath"&&a!=="offsetPath"&&a!=="textPath"&&(s[a]=o.cloneNode(t)),r&&(s[a]=r(a,o))}var u=new this.constructor((0,H.Z)((0,H.Z)({},this.config),{},{style:s}));return u.setLocalTransform(this.getLocalTransform()),t&&this.children.forEach(function(l){if(!l.style.isMarker){var c=l.cloneNode(t);u.appendChild(c)}}),u}},{key:"initAttributes",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r={forceUpdateGeometry:!0};w.styleValueRegistry.processProperties(this,t,r),this.renderable.dirty=!0}},{key:"setAttribute",value:function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;(0,ie.Z)(r)||(s||r!==this.attributes[t])&&(this.internalSetAttribute(t,r,{memoize:a}),(0,rr.Z)(i,"setAttribute",this,3)([t,r]))}},{key:"internalSetAttribute",value:function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.renderable,o=this.attributes[t],u=this.parsedStyle[t];w.styleValueRegistry.processProperties(this,(0,$.Z)({},t,r),s),a.dirty=!0;var l=this.parsedStyle[t];if(this.isConnected&&(Ze.relatedNode=this,Ze.prevValue=o,Ze.newValue=r,Ze.attrName=t,Ze.prevParsedValue=u,Ze.newParsedValue=l,this.isMutationObserved?this.dispatchEvent(Ze):(Ze.target=this,this.ownerDocument.defaultView.dispatchEvent(Ze,!0))),this.isCustomElement&&this.isConnected||!this.isCustomElement){var c,f;(c=(f=this).attributeChangedCallback)===null||c===void 0||c.call(f,t,o,r,u,l)}}},{key:"getBBox",value:function(){var t=this.getBounds(),r=t.getMin(),s=(0,re.Z)(r,2),a=s[0],o=s[1],u=t.getMax(),l=(0,re.Z)(u,2),c=l[0],f=l[1];return new it(a,o,c-a,f-o)}},{key:"setOrigin",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return w.sceneGraphService.setOrigin(this,Ee(t,r,s,!1)),this}},{key:"getOrigin",value:function(){return w.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return w.sceneGraphService.setPosition(this,Ee(t,r,s,!1)),this}},{key:"setLocalPosition",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return w.sceneGraphService.setLocalPosition(this,Ee(t,r,s,!1)),this}},{key:"translate",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return w.sceneGraphService.translate(this,Ee(t,r,s,!1)),this}},{key:"translateLocal",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return w.sceneGraphService.translateLocal(this,Ee(t,r,s,!1)),this}},{key:"getPosition",value:function(){return w.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return w.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(t,r,s){return this.scaleLocal(t,r,s)}},{key:"scaleLocal",value:function(t,r,s){return typeof t=="number"&&(r=r||t,s=s||t,t=Ee(t,r,s,!1)),w.sceneGraphService.scaleLocal(this,t),this}},{key:"setLocalScale",value:function(t,r,s){return typeof t=="number"&&(r=r||t,s=s||t,t=Ee(t,r,s,!1)),w.sceneGraphService.setLocalScale(this,t),this}},{key:"getLocalScale",value:function(){return w.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return w.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var t=an(Pt,w.sceneGraphService.getWorldTransform(this)),r=(0,re.Z)(t,3),s=r[2];return Ne(s)}},{key:"getLocalEulerAngles",value:function(){var t=an(Pt,w.sceneGraphService.getLocalRotation(this)),r=(0,re.Z)(t,3),s=r[2];return Ne(s)}},{key:"setEulerAngles",value:function(t){return w.sceneGraphService.setEulerAngles(this,0,0,t),this}},{key:"setLocalEulerAngles",value:function(t){return w.sceneGraphService.setLocalEulerAngles(this,0,0,t),this}},{key:"rotateLocal",value:function(t,r,s){return(0,de.Z)(r)&&(0,de.Z)(s)?w.sceneGraphService.rotateLocal(this,0,0,t):w.sceneGraphService.rotateLocal(this,t,r,s),this}},{key:"rotate",value:function(t,r,s){return(0,de.Z)(r)&&(0,de.Z)(s)?w.sceneGraphService.rotate(this,0,0,t):w.sceneGraphService.rotate(this,t,r,s),this}},{key:"setRotation",value:function(t,r,s,a){return w.sceneGraphService.setRotation(this,t,r,s,a),this}},{key:"setLocalRotation",value:function(t,r,s,a){return w.sceneGraphService.setLocalRotation(this,t,r,s,a),this}},{key:"setLocalSkew",value:function(t,r){return w.sceneGraphService.setLocalSkew(this,t,r),this}},{key:"getRotation",value:function(){return w.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return w.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return w.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return w.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return w.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(t){return w.sceneGraphService.setLocalTransform(this,t),this}},{key:"resetLocalTransform",value:function(){w.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(t,r){var s,a=(s=this.ownerDocument)===null||s===void 0?void 0:s.timeline;return a?a.play(this,t,r):null}},{key:"isVisible",value:function(){var t;return((t=this.parsedStyle)===null||t===void 0?void 0:t.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"}},{key:"isInteractive",value:function(){var t;return((t=this.parsedStyle)===null||t===void 0?void 0:t.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,ee.Z)(this.parentNode.children.map(function(t){return Number(t.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,ee.Z)(this.parentNode.children.map(function(t){return Number(t.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var t=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var o=s[0],u=s[1];return o?(0,Gi.Z)(o)?(Object.keys(o).forEach(function(l){t.setAttribute(l,o[l])}),this):s.length===2?(this.setAttribute(o,u),this):this.attributes[o]:this.attributes}},{key:"getMatrix",value:function(t){var r=t||this.getWorldTransform(),s=A.getTranslation(Pt,r),a=(0,re.Z)(s,2),o=a[0],u=a[1],l=A.getScaling(Pt,r),c=(0,re.Z)(l,2),f=c[0],h=c[1],v=A.getRotation(cu,r),d=an(Pt,v),m=(0,re.Z)(d,3),E=m[0],T=m[2];return ra(E||T,o,u,f,h)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(t){var r=sr(t),s=(0,re.Z)(r,5),a=s[0],o=s[1],u=s[2],l=s[3],c=s[4];this.setEulerAngles(c).setPosition(a,o).setLocalScale(u,l)}},{key:"setLocalMatrix",value:function(t){var r=sr(t),s=(0,re.Z)(r,5),a=s[0],o=s[1],u=s[2],l=s[3],c=s[4];this.setLocalEulerAngles(c).setLocalPosition(a,o).setLocalScale(u,l)}},{key:"show",value:function(){this.forEach(function(t){t.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(t){t.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(t){return this.children[t]||null}},{key:"add",value:function(t,r){return this.appendChild(t,r)}},{key:"set",value:function(t,r){this.config[t]=r}},{key:"get",value:function(t){return this.config[t]}},{key:"moveTo",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(t,r,s),this}},{key:"move",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(t,r,s),this}},{key:"setZIndex",value:function(t){return this.style.zIndex=t,this}}])}(uu);se.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var Zn=function(n){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,D.Z)(this,i),(0,K.Z)(this,i,[(0,H.Z)({type:_.CIRCLE},e)])}return(0,J.Z)(i,n),(0,I.Z)(i)}(se);Zn.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(se.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var fu=["style"],pi=function(n){function i(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.style,s=(0,ze.Z)(t,fu);return(0,D.Z)(this,i),e=(0,K.Z)(this,i,[(0,H.Z)({style:r},s)]),e.isCustomElement=!0,e}return(0,J.Z)(i,n),(0,I.Z)(i)}(se);pi.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Bn=function(n){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,D.Z)(this,i),(0,K.Z)(this,i,[(0,H.Z)({type:_.ELLIPSE},e)])}return(0,J.Z)(i,n),(0,I.Z)(i)}(se);Bn.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(se.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var hu=function(n){function i(){return(0,D.Z)(this,i),(0,K.Z)(this,i,[{type:_.FRAGMENT}])}return(0,J.Z)(i,n),(0,I.Z)(i)}(se);hu.PARSED_STYLE_LIST=new Set(["class","className"]);var Mt=function(n){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,D.Z)(this,i),(0,K.Z)(this,i,[(0,H.Z)({type:_.GROUP},e)])}return(0,J.Z)(i,n),(0,I.Z)(i)}(se);Mt.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var vu=["style"],Fn=function(n){function i(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.style,s=(0,ze.Z)(t,vu);return(0,D.Z)(this,i),e=(0,K.Z)(this,i,[(0,H.Z)({type:_.HTML,style:r},s)]),e.cullable.enable=!1,e}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var t=A.invert(A.create(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!pe.isEmpty(r)){var s=new pe;return s.setFromTransformedAABB(r,t),s}}return this.getBounds()}}])}(se);Fn.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(se.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var Gn=function(n){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,D.Z)(this,i),(0,K.Z)(this,i,[(0,H.Z)({type:_.IMAGE},e)])}return(0,J.Z)(i,n),(0,I.Z)(i)}(se);Gn.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(se.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var du=["style"],Un=function(n){function i(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.style,s=(0,ze.Z)(t,du);(0,D.Z)(this,i),e=(0,K.Z)(this,i,[(0,H.Z)({type:_.LINE,style:(0,H.Z)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},s)]),e.markerStartAngle=0,e.markerEndAngle=0;var a=e.parsedStyle,o=a.markerStart,u=a.markerEnd;return o&&j(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),u&&j(u)&&(e.markerEndAngle=u.getLocalEulerAngles(),e.appendChild(u)),e.transformMarker(!0),e.transformMarker(!1),e}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"attributeChangedCallback",value:function(t,r,s,a,o){t==="x1"||t==="y1"||t==="x2"||t==="y2"||t==="markerStartOffset"||t==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):t==="markerStart"?(a&&j(a)&&(this.markerStartAngle=0,a.remove()),o&&j(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):t==="markerEnd"&&(a&&j(a)&&(this.markerEndAngle=0,a.remove()),o&&j(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1)))}},{key:"transformMarker",value:function(t){var r=this.parsedStyle,s=r.markerStart,a=r.markerEnd,o=r.markerStartOffset,u=r.markerEndOffset,l=r.x1,c=r.x2,f=r.y1,h=r.y2,v=t?s:a;if(!(!v||!j(v))){var d=0,m,E,T,M,P,Z;t?(T=l,M=f,m=c-l,E=h-f,P=o||0,Z=this.markerStartAngle):(T=c,M=h,m=l-c,E=f-h,P=u||0,Z=this.markerEndAngle),d=Math.atan2(E,m),v.setLocalEulerAngles(d*180/Math.PI+Z),v.setLocalPosition(T+Math.cos(d)*P,M+Math.sin(d)*P)}}},{key:"getPoint",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.parsedStyle,a=s.x1,o=s.y1,u=s.x2,l=s.y2,c=(0,Ge.U4)(a,o,u,l,t),f=c.x,h=c.y,v=k.fF(k.Ue(),k.al(f,h,0),r?this.getWorldTransform():this.getLocalTransform());return new ge(v[0],v[1])}},{key:"getPointAtLength",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(t/this.getTotalLength(),r)}},{key:"getTotalLength",value:function(){var t=this.parsedStyle,r=t.x1,s=t.y1,a=t.x2,o=t.y2;return(0,Ge.Xk)(r,s,a,o)}}])}(se);Un.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(se.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var gu=["style"],Yn=function(n){function i(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.style,s=(0,ze.Z)(t,gu);(0,D.Z)(this,i),e=(0,K.Z)(this,i,[(0,H.Z)({type:_.PATH,style:r,initialParsedStyle:{miterLimit:4,d:(0,H.Z)({},fr)}},s)]),e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,u=a.markerEnd,l=a.markerMid;return o&&j(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&j(l)&&e.placeMarkerMid(l),u&&j(u)&&(e.markerEndAngle=u.getLocalEulerAngles(),e.appendChild(u)),e.transformMarker(!0),e.transformMarker(!1),e}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"attributeChangedCallback",value:function(t,r,s,a,o){t==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):t==="markerStartOffset"||t==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):t==="markerStart"?(a&&j(a)&&(this.markerStartAngle=0,a.remove()),o&&j(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):t==="markerEnd"?(a&&j(a)&&(this.markerEndAngle=0,a.remove()),o&&j(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):t==="markerMid"&&this.placeMarkerMid(o)}},{key:"transformMarker",value:function(t){var r=this.parsedStyle,s=r.markerStart,a=r.markerEnd,o=r.markerStartOffset,u=r.markerEndOffset,l=t?s:a;if(!(!l||!j(l))){var c=0,f,h,v,d,m,E;if(t){var T=this.getStartTangent(),M=(0,re.Z)(T,2),P=M[0],Z=M[1];v=Z[0],d=Z[1],f=P[0]-Z[0],h=P[1]-Z[1],m=o||0,E=this.markerStartAngle}else{var y=this.getEndTangent(),g=(0,re.Z)(y,2),p=g[0],x=g[1];v=x[0],d=x[1],f=p[0]-x[0],h=p[1]-x[1],m=u||0,E=this.markerEndAngle}c=Math.atan2(h,f),l.setLocalEulerAngles(c*180/Math.PI+E),l.setLocalPosition(v+Math.cos(c)*m,d+Math.sin(c)*m)}}},{key:"placeMarkerMid",value:function(t){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(c){c.remove()}),t&&j(t))for(var s=1;s<r.length-1;s++){var a=(0,re.Z)(r[s].currentPoint,2),o=a[0],u=a[1],l=s===1?t:t.cloneNode(!0);this.markerMidList.push(l),this.appendChild(l),l.setLocalPosition(o,u)}}},{key:"getTotalLength",value:function(){return En(this)}},{key:"getPointAtLength",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.parsedStyle.d.absolutePath,a=(0,Ui.r)(s,t),o=a.x,u=a.y,l=k.fF(k.Ue(),k.al(o,u,0),r?this.getWorldTransform():this.getLocalTransform());return new ge(l[0],l[1])}},{key:"getPoint",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(t*En(this),r)}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.d.segments,r=[];if(t.length>1){var s=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([s[0]-o[0],s[1]-o[1]]),r.push([s[0],s[1]])):(r.push([a[0],a[1]]),r.push([s[0],s[1]]))}return r}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.d.segments,r=t.length,s=[];if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,u=t[r-1].endTangent;s=[],u?(s.push([o[0]-u[0],o[1]-u[1]]),s.push([o[0],o[1]])):(s.push([a[0],a[1]]),s.push([o[0],o[1]]))}return s}}])}(se);Yn.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(se.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var pu=["style"],Nt=function(n){function i(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.style,s=(0,ze.Z)(t,pu);(0,D.Z)(this,i),e=(0,K.Z)(this,i,[(0,H.Z)({type:_.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},s)]),e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,u=a.markerEnd,l=a.markerMid;return o&&j(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&j(l)&&e.placeMarkerMid(l),u&&j(u)&&(e.markerEndAngle=u.getLocalEulerAngles(),e.appendChild(u)),e.transformMarker(!0),e.transformMarker(!1),e}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"attributeChangedCallback",value:function(t,r,s,a,o){t==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):t==="markerStartOffset"||t==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):t==="markerStart"?(a&&j(a)&&(this.markerStartAngle=0,a.remove()),o&&j(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):t==="markerEnd"?(a&&j(a)&&(this.markerEndAngle=0,a.remove()),o&&j(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):t==="markerMid"&&this.placeMarkerMid(o)}},{key:"transformMarker",value:function(t){var r=this.parsedStyle,s=r.markerStart,a=r.markerEnd,o=r.markerStartOffset,u=r.markerEndOffset,l=r.points,c=l||{},f=c.points,h=t?s:a;if(!(!h||!j(h)||!f)){var v=0,d,m,E,T,M,P;if(E=f[0][0],T=f[0][1],t)d=f[1][0]-f[0][0],m=f[1][1]-f[0][1],M=o||0,P=this.markerStartAngle;else{var Z=f.length;this.parsedStyle.isClosed?(d=f[Z-1][0]-f[0][0],m=f[Z-1][1]-f[0][1]):(E=f[Z-1][0],T=f[Z-1][1],d=f[Z-2][0]-f[Z-1][0],m=f[Z-2][1]-f[Z-1][1]),M=u||0,P=this.markerEndAngle}v=Math.atan2(m,d),h.setLocalEulerAngles(v*180/Math.PI+P),h.setLocalPosition(E+Math.cos(v)*M,T+Math.sin(v)*M)}}},{key:"placeMarkerMid",value:function(t){var r=this.parsedStyle.points,s=r||{},a=s.points;if(this.markerMidList.forEach(function(f){f.remove()}),this.markerMidList=[],t&&j(t)&&a)for(var o=1;o<(this.parsedStyle.isClosed?a.length:a.length-1);o++){var u=a[o][0],l=a[o][1],c=o===1?t:t.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(u,l)}}}])}(se);Nt.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(se.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var mu=["style"],Wn=function(n){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.style,r=(0,ze.Z)(e,mu);return(0,D.Z)(this,i),(0,K.Z)(this,i,[(0,H.Z)({type:_.POLYLINE,style:t,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)])}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"getTotalLength",value:function(){return rs(this)}},{key:"getPointAtLength",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(t/this.getTotalLength(),r)}},{key:"getPoint",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var a=[],o=0,u,l,c=this.getTotalLength();s.forEach(function(T,M){s[M+1]&&(u=[0,0],u[0]=o/c,l=(0,Ge.Xk)(T[0],T[1],s[M+1][0],s[M+1][1]),o+=l,u[1]=o/c,a.push(u))}),this.parsedStyle.points.segments=a}var f=0,h=0;this.parsedStyle.points.segments.forEach(function(T,M){t>=T[0]&&t<=T[1]&&(f=(t-T[0])/(T[1]-T[0]),h=M)});var v=(0,Ge.U4)(s[h][0],s[h][1],s[h+1][0],s[h+1][1],f),d=v.x,m=v.y,E=k.fF(k.Ue(),k.al(d,m,0),r?this.getWorldTransform():this.getLocalTransform());return new ge(E[0],E[1])}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.points.points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.points.points,r=t.length-1,s=[];return s.push([t[r-1][0],t[r-1][1]]),s.push([t[r][0],t[r][1]]),s}}])}(Nt);Wn.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(Nt.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var zn=function(n){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,D.Z)(this,i),(0,K.Z)(this,i,[(0,H.Z)({type:_.RECT},e)])}return(0,J.Z)(i,n),(0,I.Z)(i)}(se);zn.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(se.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var yu=["style"],$t=function(n){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.style,r=(0,ze.Z)(e,yu);return(0,D.Z)(this,i),(0,K.Z)(this,i,[(0,H.Z)({type:_.TEXT,style:(0,H.Z)({fill:"black"},t)},r)])}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"getComputedTextLength",value:function(){var t;return this.getGeometryBounds(),((t=this.parsedStyle.metrics)===null||t===void 0?void 0:t.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var t;return this.getGeometryBounds(),((t=this.parsedStyle.metrics)===null||t===void 0?void 0:t.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(se);$t.PARSED_STYLE_LIST=new Set([].concat((0,ee.Z)(se.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var Eu=function(){function n(){(0,D.Z)(this,n),this.registry={},this.define(_.CIRCLE,Zn),this.define(_.ELLIPSE,Bn),this.define(_.RECT,zn),this.define(_.IMAGE,Gn),this.define(_.LINE,Un),this.define(_.GROUP,Mt),this.define(_.PATH,Yn),this.define(_.POLYGON,Nt),this.define(_.POLYLINE,Wn),this.define(_.TEXT,$t),this.define(_.HTML,Fn)}return(0,I.Z)(n,[{key:"define",value:function(e,t){this.registry[e]=t}},{key:"get",value:function(e){return this.registry[e]}}])}(),xu={number:function(i){return new Q(i)},percent:function(i){return new Q(i,"%")},px:function(i){return new Q(i,"px")},em:function(i){return new Q(i,"em")},rem:function(i){return new Q(i,"rem")},deg:function(i){return new Q(i,"deg")},grad:function(i){return new Q(i,"grad")},rad:function(i){return new Q(i,"rad")},turn:function(i){return new Q(i,"turn")},s:function(i){return new Q(i,"s")},ms:function(i){return new Q(i,"ms")},registerProperty:function(i){var e=i.name,t=i.inherits,r=i.interpolable,s=i.initialValue,a=i.syntax;w.styleValueRegistry.registerMetadata({n:e,inh:t,int:r,d:s,syntax:a})},registerLayout:function(i,e){w.layoutRegistry.registerLayout(i,e)}},ku=function(n){function i(){var e;(0,D.Z)(this,i),e=(0,K.Z)(this,i),e.defaultView=null,e.ownerDocument=null,e.nodeName="document";try{e.timeline=new w.AnimationTimeline(e)}catch(r){}var t={};return Mn.forEach(function(r){var s=r.n,a=r.inh,o=r.d;a&&o&&(t[s]=(0,ht.Z)(o)?o(_.GROUP):o)}),e.documentElement=new Mt({id:"g-root",style:t}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(t,r){if(t==="svg")return this.documentElement;var s=this.defaultView.customElements.get(t);s||(console.warn("Unsupported tagName: ",t),s=t==="tspan"?$t:Mt);var a=new s(r);return a.ownerDocument=this,a}},{key:"createElementNS",value:function(t,r,s){return this.createElement(r,s)}},{key:"cloneNode",value:function(t){throw new Error(te)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(t){}}},{key:"elementsFromBBox",value:function(t,r,s,a){var o=this.defaultView.context.rBushRoot,u=o.search({minX:t,minY:r,maxX:s,maxY:a}),l=[];return u.forEach(function(c){var f=c.displayObject,h=f.parsedStyle.pointerEvents,v=h===void 0?"auto":h,d=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(v);(!d||d&&f.isVisible())&&!f.isCulled()&&f.isInteractive()&&l.push(f)}),l.sort(function(c,f){return f.sortable.renderOrder-c.sortable.renderOrder}),l}},{key:"elementFromPointSync",value:function(t,r){var s=this.defaultView.canvas2Viewport({x:t,y:r}),a=s.x,o=s.y,u=this.defaultView.getConfig(),l=u.width,c=u.height;if(a<0||o<0||a>l||o>c)return null;var f=this.defaultView.viewport2Client({x:a,y:o}),h=f.x,v=f.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:r,viewportX:a,viewportY:o,clientX:h,clientY:v},picked:[]}),m=d.picked;return m&&m[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var e=(0,en.Z)((0,et.Z)().mark(function r(s,a){var o,u,l,c,f,h,v,d,m,E,T;return(0,et.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(o=this.defaultView.canvas2Viewport({x:s,y:a}),u=o.x,l=o.y,c=this.defaultView.getConfig(),f=c.width,h=c.height,!(u<0||l<0||u>f||l>h)){P.next=4;break}return P.abrupt("return",null);case 4:return v=this.defaultView.viewport2Client({x:u,y:l}),d=v.x,m=v.y,P.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:s,y:a,viewportX:u,viewportY:l,clientX:d,clientY:m},picked:[]});case 7:return E=P.sent,T=E.picked,P.abrupt("return",T&&T[0]||this.documentElement);case 10:case"end":return P.stop()}},r,this)}));function t(r,s){return e.apply(this,arguments)}return t}()},{key:"elementsFromPointSync",value:function(t,r){var s=this.defaultView.canvas2Viewport({x:t,y:r}),a=s.x,o=s.y,u=this.defaultView.getConfig(),l=u.width,c=u.height;if(a<0||o<0||a>l||o>c)return[];var f=this.defaultView.viewport2Client({x:a,y:o}),h=f.x,v=f.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:r,viewportX:a,viewportY:o,clientX:h,clientY:v},picked:[]}),m=d.picked;return m[m.length-1]!==this.documentElement&&m.push(this.documentElement),m}},{key:"elementsFromPoint",value:function(){var e=(0,en.Z)((0,et.Z)().mark(function r(s,a){var o,u,l,c,f,h,v,d,m,E,T;return(0,et.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(o=this.defaultView.canvas2Viewport({x:s,y:a}),u=o.x,l=o.y,c=this.defaultView.getConfig(),f=c.width,h=c.height,!(u<0||l<0||u>f||l>h)){P.next=4;break}return P.abrupt("return",[]);case 4:return v=this.defaultView.viewport2Client({x:u,y:l}),d=v.x,m=v.y,P.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:s,y:a,viewportX:u,viewportY:l,clientX:d,clientY:m},picked:[]});case 7:return E=P.sent,T=E.picked,T[T.length-1]!==this.documentElement&&T.push(this.documentElement),P.abrupt("return",T);case 11:case"end":return P.stop()}},r,this)}));function t(r,s){return e.apply(this,arguments)}return t}()},{key:"appendChild",value:function(t,r){throw new Error(at)}},{key:"insertBefore",value:function(t,r){throw new Error(at)}},{key:"removeChild",value:function(t,r){throw new Error(at)}},{key:"replaceChild",value:function(t,r,s){throw new Error(at)}},{key:"append",value:function(){throw new Error(at)}},{key:"prepend",value:function(){throw new Error(at)}},{key:"getElementById",value:function(t){return this.documentElement.getElementById(t)}},{key:"getElementsByName",value:function(t){return this.documentElement.getElementsByName(t)}},{key:"getElementsByTagName",value:function(t){return this.documentElement.getElementsByTagName(t)}},{key:"getElementsByClassName",value:function(t){return this.documentElement.getElementsByClassName(t)}},{key:"querySelector",value:function(t){return this.documentElement.querySelector(t)}},{key:"querySelectorAll",value:function(t){return this.documentElement.querySelectorAll(t)}},{key:"find",value:function(t){return this.documentElement.find(t)}},{key:"findAll",value:function(t){return this.documentElement.findAll(t)}}])}(ae),mi=function(){function n(i){(0,D.Z)(this,n),this.strategies=i}return(0,I.Z)(n,[{key:"apply",value:function(e){var t=e.camera,r=e.renderingService,s=e.renderingContext,a=this.strategies;r.hooks.cull.tap(n.tag,function(o){if(o){var u=o.cullable;return a.length===0?u.visible=s.unculledEntities.indexOf(o.entity)>-1:u.visible=a.every(function(l){return l.isVisible(t,o)}),!o.isCulled()&&o.isVisible()?o:(o.dispatchEvent(new me(he.CULLED)),null)}return o}),r.hooks.afterRender.tap(n.tag,function(o){o.cullable.visibilityPlaneMask=-1})}}])}();mi.tag="Culling";var yi=function(){function n(){var i=this;(0,D.Z)(this,n),this.autoPreventDefault=!1,this.rootPointerEvent=new On(null),this.rootWheelEvent=new Ln(null),this.onPointerMove=function(e){var t,r=(t=i.context.renderingContext.root)===null||t===void 0||(t=t.ownerDocument)===null||t===void 0?void 0:t.defaultView;if(!(r.supportsTouchEvents&&e.pointerType==="touch")){var s=i.normalizeToPointerEvent(e,r),a=(0,tt.Z)(s),o;try{for(a.s();!(o=a.n()).done;){var u=o.value,l=i.bootstrapEvent(i.rootPointerEvent,u,r,e);i.context.eventService.mapEvent(l)}}catch(c){a.e(c)}finally{a.f()}i.setCursor(i.context.eventService.cursor)}},this.onClick=function(e){var t,r=(t=i.context.renderingContext.root)===null||t===void 0||(t=t.ownerDocument)===null||t===void 0?void 0:t.defaultView,s=i.normalizeToPointerEvent(e,r),a=(0,tt.Z)(s),o;try{for(a.s();!(o=a.n()).done;){var u=o.value,l=i.bootstrapEvent(i.rootPointerEvent,u,r,e);i.context.eventService.mapEvent(l)}}catch(c){a.e(c)}finally{a.f()}i.setCursor(i.context.eventService.cursor)}}return(0,I.Z)(n,[{key:"apply",value:function(e){var t=this;this.context=e;var r=e.renderingService,s=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(a){var o=t.context.renderingService.hooks.pickSync.call({position:a,picked:[],topmost:!0}),u=o.picked;return u[0]||null}),r.hooks.pointerWheel.tap(n.tag,function(a){var o=t.normalizeWheelEvent(a);t.context.eventService.mapEvent(o)}),r.hooks.pointerDown.tap(n.tag,function(a){if(!(s.supportsTouchEvents&&a.pointerType==="touch")){var o=t.normalizeToPointerEvent(a,s);if(t.autoPreventDefault&&o[0].isNormalized){var u=a.cancelable||!("cancelable"in a);u&&a.preventDefault()}var l=(0,tt.Z)(o),c;try{for(l.s();!(c=l.n()).done;){var f=c.value,h=t.bootstrapEvent(t.rootPointerEvent,f,s,a);t.context.eventService.mapEvent(h)}}catch(v){l.e(v)}finally{l.f()}t.setCursor(t.context.eventService.cursor)}}),r.hooks.pointerUp.tap(n.tag,function(a){if(!(s.supportsTouchEvents&&a.pointerType==="touch")){var o=t.context.contextService.getDomElement(),u=t.context.eventService.isNativeEventFromCanvas(o,a),l=u?"":"outside",c=t.normalizeToPointerEvent(a,s),f=(0,tt.Z)(c),h;try{for(f.s();!(h=f.n()).done;){var v=h.value,d=t.bootstrapEvent(t.rootPointerEvent,v,s,a);d.type+=l,t.context.eventService.mapEvent(d)}}catch(m){f.e(m)}finally{f.f()}t.setCursor(t.context.eventService.cursor)}}),r.hooks.pointerMove.tap(n.tag,this.onPointerMove),r.hooks.pointerOver.tap(n.tag,this.onPointerMove),r.hooks.pointerOut.tap(n.tag,this.onPointerMove),r.hooks.click.tap(n.tag,this.onClick),r.hooks.pointerCancel.tap(n.tag,function(a){var o=t.normalizeToPointerEvent(a,s),u=(0,tt.Z)(o),l;try{for(u.s();!(l=u.n()).done;){var c=l.value,f=t.bootstrapEvent(t.rootPointerEvent,c,s,a);t.context.eventService.mapEvent(f)}}catch(h){u.e(h)}finally{u.f()}t.setCursor(t.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(e,t,r,s){e.view=r,e.originalEvent=null,e.nativeEvent=s,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var a=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),o=a.x,u=a.y;e.viewport.x=o,e.viewport.y=u;var l=this.context.eventService.viewport2Canvas(e.viewport),c=l.x,f=l.y;return e.canvas.x=c,e.canvas.y=f,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=s.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=to[e.type]||e.type),e}},{key:"normalizeWheelEvent",value:function(e){var t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;var r=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),s=r.x,a=r.y;t.viewport.x=s,t.viewport.y=a;var o=this.context.eventService.viewport2Canvas(t.viewport),u=o.x,l=o.y;return t.canvas.x=u,t.canvas.y=l,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.nativeEvent=e,t.type=e.type,t}},{key:"transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=Cn.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null}},{key:"setCursor",value:function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(e,t){var r=[];if(t.isTouchEvent(e))for(var s=0;s<e.changedTouches.length;s++){var a=e.changedTouches[s];(0,ie.Z)(a.button)&&(a.button=0),(0,ie.Z)(a.buttons)&&(a.buttons=1),(0,ie.Z)(a.isPrimary)&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),(0,ie.Z)(a.width)&&(a.width=a.radiusX||1),(0,ie.Z)(a.height)&&(a.height=a.radiusY||1),(0,ie.Z)(a.tiltX)&&(a.tiltX=0),(0,ie.Z)(a.tiltY)&&(a.tiltY=0),(0,ie.Z)(a.pointerType)&&(a.pointerType="touch"),(0,ie.Z)(a.pointerId)&&(a.pointerId=a.identifier||0),(0,ie.Z)(a.pressure)&&(a.pressure=a.force||.5),(0,ie.Z)(a.twist)&&(a.twist=0),(0,ie.Z)(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=e.type,r.push(a)}else if(t.isMouseEvent(e)){var o=e;(0,ie.Z)(o.isPrimary)&&(o.isPrimary=!0),(0,ie.Z)(o.width)&&(o.width=1),(0,ie.Z)(o.height)&&(o.height=1),(0,ie.Z)(o.tiltX)&&(o.tiltX=0),(0,ie.Z)(o.tiltY)&&(o.tiltY=0),(0,ie.Z)(o.pointerType)&&(o.pointerType="mouse"),(0,ie.Z)(o.pointerId)&&(o.pointerId=eo),(0,ie.Z)(o.pressure)&&(o.pressure=.5),(0,ie.Z)(o.twist)&&(o.twist=0),(0,ie.Z)(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,r.push(o)}else r.push(e);return r}}])}();yi.tag="Event";var Tu=[_.CIRCLE,_.ELLIPSE,_.IMAGE,_.RECT,_.LINE,_.POLYLINE,_.POLYGON,_.TEXT,_.PATH,_.HTML],Pu=function(){function n(){(0,D.Z)(this,n)}return(0,I.Z)(n,[{key:"isVisible",value:function(e,t){var r,s=t.cullable;if(!s.enable)return!0;var a=t.getRenderBounds();if(pe.isEmpty(a))return!1;var o=e.getFrustum(),u=(r=t.parentNode)===null||r===void 0||(r=r.cullable)===null||r===void 0?void 0:r.visibilityPlaneMask;return s.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,a,u||rt.INDETERMINATE,o.planes),s.visible=s.visibilityPlaneMask!==rt.OUTSIDE,s.visible}},{key:"computeVisibilityWithPlaneMask",value:function(e,t,r,s){if(r===rt.OUTSIDE||r===rt.INSIDE)return r;for(var a=rt.INSIDE,o=Tu.indexOf(e.nodeName)>-1,u=0,l=s.length;u<l;++u){var c=1<<u;if(r&c&&!(o&&(u===4||u===5))){var f=s[u],h=f.normal,v=f.distance;if(k.AK(h,t.getPositiveFarPoint(s[u]))+v<0)return rt.OUTSIDE;k.AK(h,t.getNegativeFarPoint(s[u]))+v<0&&(a|=c)}}return a}}])}(),Ei=function(){function n(){(0,D.Z)(this,n),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return(0,I.Z)(n,[{key:"apply",value:function(e){var t=this,r,s=e.renderingService,a=e.renderingContext,o=e.rBushRoot,u=a.root.ownerDocument.defaultView;this.rBush=o;var l=function(m){var E=m.target;E.renderable.dirty=!0,s.dirtify()},c=function(m){t.syncTasks.set(m.target,m.detail.affectChildren),s.dirtify()},f=function(m){var E=m.target;w.enableSizeAttenuation&&w.styleValueRegistry.updateSizeAttenuation(E,u.getCamera().getZoom())},h=function(m){var E=m.target,T=E.rBushNode;T.aabb&&t.rBush.remove(T.aabb),t.syncTasks.delete(E),w.sceneGraphService.dirtifyToRoot(E),s.dirtify()};s.hooks.init.tap(n.tag,function(){u.addEventListener(he.MOUNTED,f),u.addEventListener(he.UNMOUNTED,h),u.addEventListener(he.ATTR_MODIFIED,l),u.addEventListener(he.BOUNDS_CHANGED,c)}),s.hooks.destroy.tap(n.tag,function(){u.removeEventListener(he.MOUNTED,f),u.removeEventListener(he.UNMOUNTED,h),u.removeEventListener(he.ATTR_MODIFIED,l),u.removeEventListener(he.BOUNDS_CHANGED,c),t.syncTasks.clear()});var v=(r=w.globalThis.requestIdleCallback)!==null&&r!==void 0?r:An.bind(w.globalThis);s.hooks.endFrame.tap(n.tag,function(){t.isFirstTimeRendering?(t.isFirstTimeRendering=!1,t.syncing=!0,v(function(){t.syncRTree(!0),t.isFirstTimeRenderingFinished=!0})):t.syncRTree()})}},{key:"syncNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.isConnected){var r=e.rBushNode;r.aabb&&this.rBush.remove(r.aabb);var s=e.getRenderBounds();if(s){var a=e.renderable;t&&(a.dirtyRenderBounds||(a.dirtyRenderBounds=new pe),a.dirtyRenderBounds.update(s.center,s.halfExtents));var o=s.getMin(),u=(0,re.Z)(o,2),l=u[0],c=u[1],f=s.getMax(),h=(0,re.Z)(f,2),v=h[0],d=h[1];r.aabb||(r.aabb={}),r.aabb.displayObject=e,r.aabb.minX=l,r.aabb.minY=c,r.aabb.maxX=v,r.aabb.maxY=d}if(r.aabb&&!isNaN(r.aabb.maxX)&&!isNaN(r.aabb.maxX)&&!isNaN(r.aabb.minX)&&!isNaN(r.aabb.minY))return r.aabb}}},{key:"syncRTree",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!t&&(this.syncing||this.syncTasks.size===0))){this.syncing=!0;var r=[],s=new Set,a=function(u){if(!s.has(u)&&u.renderable){var l=e.syncNode(u,t);l&&(r.push(l),s.add(u))}};this.syncTasks.forEach(function(o,u){o&&u.forEach(a);for(var l=u;l;)a(l),l=l.parentElement}),this.rBush.load(r),r.length=0,this.syncing=!1}}}])}();Ei.tag="Prepare";function Xu(n){return!!n.document}var Be=function(n){return n.READY="ready",n.BEFORE_RENDER="beforerender",n.RERENDER="rerender",n.AFTER_RENDER="afterrender",n.BEFORE_DESTROY="beforedestroy",n.AFTER_DESTROY="afterdestroy",n.RESIZE="resize",n.DIRTY_RECTANGLE="dirtyrectangle",n.RENDERER_CHANGED="rendererchanged",n}({}),xi=500,Mu=.1,Nu=1e3,Ht=new me(he.MOUNTED),Kt=new me(he.UNMOUNTED),Xn=new me(Be.BEFORE_RENDER),ki=new me(Be.RERENDER),Vn=new me(Be.AFTER_RENDER),Su=function(n){function i(e){var t;(0,D.Z)(this,i),t=(0,K.Z)(this,i),t.Element=se,t.inited=!1,t.context={};var r=e.container,s=e.canvas,a=e.renderer,o=e.width,u=e.height,l=e.background,c=e.cursor,f=e.supportsMutipleCanvasesInOneContainer,h=e.cleanUpOnDestroy,v=h===void 0?!0:h,d=e.offscreenCanvas,m=e.devicePixelRatio,E=e.requestAnimationFrame,T=e.cancelAnimationFrame,M=e.createImage,P=e.supportsTouchEvents,Z=e.supportsPointerEvents,y=e.isTouchEvent,g=e.isMouseEvent,p=e.dblClickSpeed,x=o,C=u,N=m||wn&&window.devicePixelRatio||1;return N=N>=1?Math.ceil(N):1,s&&(x=o||qs(s)||s.width/N,C=u||js(s)||s.height/N),t.customElements=new Eu,t.devicePixelRatio=N,t.requestAnimationFrame=E!=null?E:An.bind(w.globalThis),t.cancelAnimationFrame=T!=null?T:ri.bind(w.globalThis),t.supportsTouchEvents=P!=null?P:"ontouchstart"in w.globalThis,t.supportsPointerEvents=Z!=null?Z:!!w.globalThis.PointerEvent,t.isTouchEvent=y!=null?y:function(S){return t.supportsTouchEvents&&S instanceof w.globalThis.TouchEvent},t.isMouseEvent=g!=null?g:function(S){return!w.globalThis.MouseEvent||S instanceof w.globalThis.MouseEvent&&(!t.supportsPointerEvents||!(S instanceof w.globalThis.PointerEvent))},d&&(w.offscreenCanvas=d),t.document=new ku,t.document.defaultView=t,f||Hs(r,t,v),t.initRenderingContext((0,H.Z)((0,H.Z)({},e),{},{width:x,height:C,background:l!=null?l:"transparent",cursor:c!=null?c:"default",cleanUpOnDestroy:v,devicePixelRatio:N,requestAnimationFrame:t.requestAnimationFrame,cancelAnimationFrame:t.cancelAnimationFrame,supportsTouchEvents:t.supportsTouchEvents,supportsPointerEvents:t.supportsPointerEvents,isTouchEvent:t.isTouchEvent,isMouseEvent:t.isMouseEvent,dblClickSpeed:p!=null?p:200,createImage:M!=null?M:function(){return new window.Image}})),t.initDefaultCamera(x,C,a.clipSpaceNearZ),t.initRenderer(a,!0),t}return(0,J.Z)(i,n),(0,I.Z)(i,[{key:"initRenderingContext",value:function(t){this.context.config=t,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(t,r,s){var a=this,o=new w.CameraContribution;o.clipSpaceNearZ=s,o.setType(oe.EXPLORING,on.DEFAULT).setPosition(t/2,r/2,xi).setFocalPoint(t/2,r/2,0).setOrthographic(t/-2,t/2,r/2,r/-2,Mu,Nu),o.canvas=this,o.eventEmitter.on(ur.UPDATED,function(){a.context.renderingContext.renderReasons.add(kt.CAMERA_CHANGED),w.enableSizeAttenuation&&a.getConfig().renderer.getConfig().enableSizeAttenuation&&a.updateSizeAttenuation()}),this.context.camera=o}},{key:"updateSizeAttenuation",value:function(){var t=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){w.styleValueRegistry.updateSizeAttenuation(r,t)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var t=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){t.resolveReadyPromise=function(){r(t)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=arguments.length>1?arguments[1]:void 0;fe.clearCache(),r||this.dispatchEvent(new me(Be.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var s=this.getRoot();t&&(this.unmountChildren(s),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),r||this.dispatchEvent(new me(Be.AFTER_DESTROY));var a=function(u){u.currentTarget=null,u.manager=null,u.target=null,u.relatedNode=null};a(Ht),a(Kt),a(Xn),a(ki),a(Vn),a(Ze),a(In),a(_n),a(gi)}},{key:"changeSize",value:function(t,r){this.resize(t,r)}},{key:"resize",value:function(t,r){var s=this.context.config;s.width=t,s.height=r,this.getContextService().resize(t,r);var a=this.context.camera,o=a.getProjectionMode();a.setPosition(t/2,r/2,xi).setFocalPoint(t/2,r/2,0),o===Se.ORTHOGRAPHIC?a.setOrthographic(t/-2,t/2,r/2,r/-2,a.getNear(),a.getFar()):a.setAspect(t/r),this.dispatchEvent(new me(Be.RESIZE,{width:t,height:r}))}},{key:"appendChild",value:function(t,r){return this.document.documentElement.appendChild(t,r)}},{key:"insertBefore",value:function(t,r){return this.document.documentElement.insertBefore(t,r)}},{key:"removeChild",value:function(t){return this.document.documentElement.removeChild(t)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(t){var r=this;t&&(Xn.detail=t,Vn.detail=t),this.dispatchEvent(Xn);var s=this.getRenderingService();s.render(this.getConfig(),t,function(){r.dispatchEvent(ki)}),this.dispatchEvent(Vn)}},{key:"run",value:function(){var t=this,r=function(a,o){t.render(o),t.frameId=t.requestAnimationFrame(r)};r()}},{key:"initRenderer",value:function(t){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!t)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new Wi,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new yi,new Ei,new mi([new Pu])),this.loadRendererContainerModule(t),this.context.contextService=new this.context.ContextService((0,H.Z)((0,H.Z)({},w),this.context)),this.context.renderingService=new _o(w,this.context),this.context.eventService=new Io(w,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(t,s,!0)):this.context.contextService.initAsync().then(function(){r.initRenderingService(t,s)}).catch(function(a){console.error(a)})}},{key:"initRenderingService",value:function(t){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){r.inited=!0,s?a?r.requestAnimationFrame(function(){r.dispatchEvent(new me(Be.READY))}):r.dispatchEvent(new me(Be.READY)):r.dispatchEvent(new me(Be.RENDERER_CHANGED)),r.readyPromise&&r.resolveReadyPromise(),s||r.getRoot().forEach(function(o){var u=o,l=u.renderable;l&&(l.renderBoundsDirty=!0,l.boundsDirty=!0,l.dirty=!0)}),r.mountChildren(r.getRoot()),t.getConfig().enableAutoRendering&&r.run()})}},{key:"loadRendererContainerModule",value:function(t){var r=this,s=t.getPlugins();s.forEach(function(a){a.context=r.context,a.init(w)})}},{key:"setRenderer",value:function(t){var r=this.getConfig();if(r.renderer!==t){var s=r.renderer;r.renderer=t,this.destroy(!1,!0),(0,ee.Z)((s==null?void 0:s.getPlugins())||[]).reverse().forEach(function(a){a.destroy(w)}),this.initRenderer(t)}}},{key:"setCursor",value:function(t){var r=this.getConfig();r.cursor=t,this.getContextService().applyCursorStyle(t)}},{key:"unmountChildren",value:function(t){var r=this;t.childNodes.forEach(function(s){r.unmountChildren(s)}),this.inited&&(t.isMutationObserved?t.dispatchEvent(Kt):(Kt.target=t,this.dispatchEvent(Kt,!0)),t!==this.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1),t.isCustomElement&&t.disconnectedCallback&&t.disconnectedCallback()}},{key:"mountChildren",value:function(t){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yt(t);this.inited?t.isConnected||(t.ownerDocument=this.document,t.isConnected=!0,s||(t.isMutationObserved?t.dispatchEvent(Ht):(Ht.target=t,this.dispatchEvent(Ht,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName),t.childNodes.forEach(function(a){r.mountChildren(a,s)}),t.isCustomElement&&t.connectedCallback&&t.connectedCallback()}},{key:"mountFragment",value:function(t){this.mountChildren(t,!1)}},{key:"client2Viewport",value:function(t){return this.getEventService().client2Viewport(t)}},{key:"viewport2Client",value:function(t){return this.getEventService().viewport2Client(t)}},{key:"viewport2Canvas",value:function(t){return this.getEventService().viewport2Canvas(t)}},{key:"canvas2Viewport",value:function(t){return this.getEventService().canvas2Viewport(t)}},{key:"getPointByClient",value:function(t,r){return this.client2Viewport({x:t,y:r})}},{key:"getClientByPoint",value:function(t,r){return this.viewport2Client({x:t,y:r})}}])}(ui)}}]);
