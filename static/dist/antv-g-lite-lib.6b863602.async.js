"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[890],{4559:function(Es,Fn,Z){Z.d(Fn,{$6:function(){return Ct},$p:function(){return Fo},Aw:function(){return ft},Cd:function(){return mn},Cm:function(){return O},Dk:function(){return ot},E9:function(){return ut},Ee:function(){return Tn},F6:function(){return $n},G$:function(){return Ke},G0:function(){return sn},GL:function(){return _t},GZ:function(){return M},I8:function(){return jn},L1:function(){return Xo},N1:function(){return Dt},NB:function(){return st},O4:function(){return ht},Oi:function(){return qr},Pj:function(){return En},R:function(){return br},RV:function(){return J},Rr:function(){return Wt},Rx:function(){return Ri},UL:function(){return Sn},V1:function(){return Mr},Vl:function(){return z},Xz:function(){return os},YR:function(){return no},ZA:function(){return Pe},_O:function(){return fe},aH:function(){return Mn},b_:function(){return Ka},bn:function(){return L},gz:function(){return Xe},h0:function(){return b},iM:function(){return j},jU:function(){return xe},jd:function(){return Bt},jf:function(){return $},k9:function(){return xn},lu:function(){return Ft},mN:function(){return ct},mg:function(){return ar},o6:function(){return Ai},qA:function(){return Ue},s$:function(){return xt},ux:function(){return Ja},x1:function(){return Pn},xA:function(){return Te},xv:function(){return sr},y$:function(){return Cn}});var g=Z(97582),Ne=Z(89093),P=Z(77160),R=Z(85975),we=Z(35600),rt=Z(98333),W=Z(32945),cr=Z(31437),Gt=Z(25897),bt=Z(44078),tt=Z(95147),Rt=Z(76714),re=Z(81957),Un=Z(69877),fr=Z(71523),hr=Z(13882),Zn=Z(80450),pr=Z(8614),vr=Z(4848),dr=Z(75839),Wn=Z(99872),gr=Z(92455),Yn=Z(65850),Xn=Z(28659),Hn=Z(83555),q=Z(71154),Vn=Z(5199),yr=Z(90134),le=Z(4637),Kn=Z(84329),zn=Z(90378),kt=Z(11702),Jn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Z.g!="undefined"?Z.g:typeof self!="undefined"?self:{},mr={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(Jn,function(){function t(T,d,y,x,A){n(T,d,y||0,x||T.length-1,A||o)}function n(T,d,y,x,A){for(;x>y;){if(x-y>600){var N=x-y+1,w=d-y+1,k=Math.log(N),B=.5*Math.exp(2*k/3),_=.5*Math.sqrt(k*B*(N-B)/N)*(w-N/2<0?-1:1),U=Math.max(y,Math.floor(d-w*B/N+_)),H=Math.min(x,Math.floor(d+(N-w)*B/N+_));n(T,d,U,H,A)}var I=T[d],Y=y,X=x;for(i(T,y,d),A(T[x],I)>0&&i(T,y,x);Y<X;){for(i(T,Y,X),Y++,X--;A(T[Y],I)<0;)Y++;for(;A(T[X],I)>0;)X--}A(T[y],I)===0?i(T,y,X):(X++,i(T,X,x)),X<=d&&(y=X+1),d<=X&&(x=X-1)}}function i(T,d,y){var x=T[d];T[d]=T[y],T[y]=x}function o(T,d){return T<d?-1:T>d?1:0}var a=function(d){d===void 0&&(d=9),this._maxEntries=Math.max(4,d),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(d){var y=this.data,x=[];if(!S(d,y))return x;for(var A=this.toBBox,N=[];y;){for(var w=0;w<y.children.length;w++){var k=y.children[w],B=y.leaf?A(k):k;S(d,B)&&(y.leaf?x.push(k):C(d,B)?this._all(k,x):N.push(k))}y=N.pop()}return x},a.prototype.collides=function(d){var y=this.data;if(!S(d,y))return!1;for(var x=[];y;){for(var A=0;A<y.children.length;A++){var N=y.children[A],w=y.leaf?this.toBBox(N):N;if(S(d,w)){if(y.leaf||C(d,w))return!0;x.push(N)}}y=x.pop()}return!1},a.prototype.load=function(d){if(!(d&&d.length))return this;if(d.length<this._minEntries){for(var y=0;y<d.length;y++)this.insert(d[y]);return this}var x=this._build(d.slice(),0,d.length-1,0);if(!this.data.children.length)this.data=x;else if(this.data.height===x.height)this._splitRoot(this.data,x);else{if(this.data.height<x.height){var A=this.data;this.data=x,x=A}this._insert(x,this.data.height-x.height-1,!0)}return this},a.prototype.insert=function(d){return d&&this._insert(d,this.data.height-1),this},a.prototype.clear=function(){return this.data=D([]),this},a.prototype.remove=function(d,y){if(!d)return this;for(var x=this.data,A=this.toBBox(d),N=[],w=[],k,B,_;x||N.length;){if(x||(x=N.pop(),B=N[N.length-1],k=w.pop(),_=!0),x.leaf){var U=s(d,x.children,y);if(U!==-1)return x.children.splice(U,1),N.push(x),this._condense(N),this}!_&&!x.leaf&&C(x,A)?(N.push(x),w.push(k),k=0,B=x,x=x.children[0]):B?(k++,x=B.children[k],_=!1):x=null}return this},a.prototype.toBBox=function(d){return d},a.prototype.compareMinX=function(d,y){return d.minX-y.minX},a.prototype.compareMinY=function(d,y){return d.minY-y.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(d){return this.data=d,this},a.prototype._all=function(d,y){for(var x=[];d;)d.leaf?y.push.apply(y,d.children):x.push.apply(x,d.children),d=x.pop();return y},a.prototype._build=function(d,y,x,A){var N=x-y+1,w=this._maxEntries,k;if(N<=w)return k=D(d.slice(y,x+1)),u(k,this.toBBox),k;A||(A=Math.ceil(Math.log(N)/Math.log(w)),w=Math.ceil(N/Math.pow(w,A-1))),k=D([]),k.leaf=!1,k.height=A;var B=Math.ceil(N/w),_=B*Math.ceil(Math.sqrt(w));G(d,y,x,_,this.compareMinX);for(var U=y;U<=x;U+=_){var H=Math.min(U+_-1,x);G(d,U,H,B,this.compareMinY);for(var I=U;I<=H;I+=B){var Y=Math.min(I+B-1,H);k.children.push(this._build(d,I,Y,A-1))}}return u(k,this.toBBox),k},a.prototype._chooseSubtree=function(d,y,x,A){for(;A.push(y),!(y.leaf||A.length-1===x);){for(var N=1/0,w=1/0,k=void 0,B=0;B<y.children.length;B++){var _=y.children[B],U=h(_),H=m(d,_)-U;H<w?(w=H,N=U<N?U:N,k=_):H===w&&U<N&&(N=U,k=_)}y=k||y.children[0]}return y},a.prototype._insert=function(d,y,x){var A=x?d:this.toBBox(d),N=[],w=this._chooseSubtree(A,this.data,y,N);for(w.children.push(d),c(w,A);y>=0&&N[y].children.length>this._maxEntries;)this._split(N,y),y--;this._adjustParentBBoxes(A,N,y)},a.prototype._split=function(d,y){var x=d[y],A=x.children.length,N=this._minEntries;this._chooseSplitAxis(x,N,A);var w=this._chooseSplitIndex(x,N,A),k=D(x.children.splice(w,x.children.length-w));k.height=x.height,k.leaf=x.leaf,u(x,this.toBBox),u(k,this.toBBox),y?d[y-1].children.push(k):this._splitRoot(x,k)},a.prototype._splitRoot=function(d,y){this.data=D([d,y]),this.data.height=d.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(d,y,x){for(var A,N=1/0,w=1/0,k=y;k<=x-y;k++){var B=l(d,0,k,this.toBBox),_=l(d,k,x,this.toBBox),U=E(B,_),H=h(B)+h(_);U<N?(N=U,A=k,w=H<w?H:w):U===N&&H<w&&(w=H,A=k)}return A||x-y},a.prototype._chooseSplitAxis=function(d,y,x){var A=d.leaf?this.compareMinX:f,N=d.leaf?this.compareMinY:p,w=this._allDistMargin(d,y,x,A),k=this._allDistMargin(d,y,x,N);w<k&&d.children.sort(A)},a.prototype._allDistMargin=function(d,y,x,A){d.children.sort(A);for(var N=this.toBBox,w=l(d,0,y,N),k=l(d,x-y,x,N),B=v(w)+v(k),_=y;_<x-y;_++){var U=d.children[_];c(w,d.leaf?N(U):U),B+=v(w)}for(var H=x-y-1;H>=y;H--){var I=d.children[H];c(k,d.leaf?N(I):I),B+=v(k)}return B},a.prototype._adjustParentBBoxes=function(d,y,x){for(var A=x;A>=0;A--)c(y[A],d)},a.prototype._condense=function(d){for(var y=d.length-1,x=void 0;y>=0;y--)d[y].children.length===0?y>0?(x=d[y-1].children,x.splice(x.indexOf(d[y]),1)):this.clear():u(d[y],this.toBBox)};function s(T,d,y){if(!y)return d.indexOf(T);for(var x=0;x<d.length;x++)if(y(T,d[x]))return x;return-1}function u(T,d){l(T,0,T.children.length,d,T)}function l(T,d,y,x,A){A||(A=D(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var N=d;N<y;N++){var w=T.children[N];c(A,T.leaf?x(w):w)}return A}function c(T,d){return T.minX=Math.min(T.minX,d.minX),T.minY=Math.min(T.minY,d.minY),T.maxX=Math.max(T.maxX,d.maxX),T.maxY=Math.max(T.maxY,d.maxY),T}function f(T,d){return T.minX-d.minX}function p(T,d){return T.minY-d.minY}function h(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function v(T){return T.maxX-T.minX+(T.maxY-T.minY)}function m(T,d){return(Math.max(d.maxX,T.maxX)-Math.min(d.minX,T.minX))*(Math.max(d.maxY,T.maxY)-Math.min(d.minY,T.minY))}function E(T,d){var y=Math.max(T.minX,d.minX),x=Math.max(T.minY,d.minY),A=Math.min(T.maxX,d.maxX),N=Math.min(T.maxY,d.maxY);return Math.max(0,A-y)*Math.max(0,N-x)}function C(T,d){return T.minX<=d.minX&&T.minY<=d.minY&&d.maxX<=T.maxX&&d.maxY<=T.maxY}function S(T,d){return d.minX<=T.maxX&&d.minY<=T.maxY&&d.maxX>=T.minX&&d.maxY>=T.minY}function D(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function G(T,d,y,x,A){for(var N=[d,y];N.length;)if(y=N.pop(),d=N.pop(),!(y-d<=x)){var w=d+Math.ceil((y-d)/x/2)*x;t(T,w,d,y,A),N.push(d,w,w,y)}}return a})})(mr);var Qn=mr.exports,L;(function(r){r.GROUP="g",r.CIRCLE="circle",r.ELLIPSE="ellipse",r.IMAGE="image",r.RECT="rect",r.LINE="line",r.POLYLINE="polyline",r.POLYGON="polygon",r.TEXT="text",r.PATH="path",r.HTML="html",r.MESH="mesh"})(L||(L={}));var Kt;(function(r){r[r.ZERO=0]="ZERO",r[r.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(Kt||(Kt={}));var $n=function(){function r(){this.plugins=[]}return r.prototype.addRenderingPlugin=function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)},r.prototype.removeAllRenderingPlugins=function(){var e=this;this.plugins.forEach(function(t){var n=e.context.renderingPlugins.indexOf(t);n>=0&&e.context.renderingPlugins.splice(n,1)})},r}(),jn=function(){function r(e){this.clipSpaceNearZ=Kt.NEGATIVE_ONE,this.plugins=[],this.config=(0,g.pi)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},e)}return r.prototype.registerPlugin=function(e){var t=this.plugins.findIndex(function(n){return n===e});t===-1&&this.plugins.push(e)},r.prototype.unregisterPlugin=function(e){var t=this.plugins.findIndex(function(n){return n===e});t>-1&&this.plugins.splice(t,1)},r.prototype.getPlugins=function(){return this.plugins},r.prototype.getPlugin=function(e){return this.plugins.find(function(t){return t.name===e})},r.prototype.getConfig=function(){return this.config},r.prototype.setConfig=function(e){Object.assign(this.config,e)},r}();function zt(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function Re(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function ce(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function Er(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function qn(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function ti(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function fe(r){return r===void 0?0:r>360||r<-360?r%360:r}function ht(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=0),Array.isArray(r)&&r.length===3?P.d9(r):(0,Gt.Z)(r)?P.al(r,e,t):P.al(r[0],r[1]||e,r[2]||t)}function z(r){return r*(Math.PI/180)}function Tt(r){return r*(180/Math.PI)}function xs(r){return r=r%400,r<0&&(r+=400),r/400*360}function Ts(r){return r/360}function ei(r){return 360*r}function ri(r,e){var t=e[0],n=e[1],i=e[2],o=e[3],a=t*t,s=n*n,u=i*i,l=o*o,c=a+s+u+l,f=t*o-n*i;return f>.499995*c?(r[0]=Math.PI/2,r[1]=2*Math.atan2(n,t),r[2]=0):f<-.499995*c?(r[0]=-Math.PI/2,r[1]=2*Math.atan2(n,t),r[2]=0):(r[0]=Math.asin(2*(t*i-o*n)),r[1]=Math.atan2(2*(t*o+n*i),1-2*(u+l)),r[2]=Math.atan2(2*(t*n+i*o),1-2*(s+u))),r}function ni(r,e){var t,n,i=Math.PI*.5,o=(0,g.CR)(R.getScaling(P.Ue(),e),3),a=o[0],s=o[1],u=o[2],l=Math.asin(-e[2]/a);return l<i?l>-i?(t=Math.atan2(e[6]/s,e[10]/u),n=Math.atan2(e[1]/a,e[0]/a)):(n=0,t=-Math.atan2(e[4]/s,e[5]/s)):(n=0,t=Math.atan2(e[4]/s,e[5]/s)),r[0]=t,r[1]=l,r[2]=n,r}function Ae(r,e){return e.length===16?ni(r,e):ri(r,e)}function ii(r,e,t,n,i){var o=Math.cos(r),a=Math.sin(r);return we.al(n*o,i*a,0,-n*a,i*o,0,e,t,1)}function oi(r,e,t,n,i,o,a,s){s===void 0&&(s=!1);var u=2*o/(t-e),l=2*o/(n-i),c=(t+e)/(t-e),f=(n+i)/(n-i),p,h;return s?(p=-a/(a-o),h=-a*o/(a-o)):(p=-(a+o)/(a-o),h=-2*a*o/(a-o)),r[0]=u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=l,r[6]=0,r[7]=0,r[8]=c,r[9]=f,r[10]=p,r[11]=-1,r[12]=0,r[13]=0,r[14]=h,r[15]=0,r}function xr(r){var e=r[0],t=r[1],n=r[3],i=r[4],o=Math.sqrt(e*e+t*t),a=Math.sqrt(n*n+i*i),s=e*i-t*n;s<0&&(e<i?o=-o:a=-a),o&&(e*=1/o,t*=1/o),a&&(n*=1/a,i*=1/a);var u=Math.atan2(t,e),l=Tt(u);return[r[6],r[7],o,a,l]}var Nt=R.create(),St=R.create(),ne=rt.Ue(),F=[P.Ue(),P.Ue(),P.Ue()],Tr=P.Ue();function ai(r,e,t,n,i,o){if(!si(Nt,r)||(R.copy(St,Nt),St[3]=0,St[7]=0,St[11]=0,St[15]=1,Math.abs(R.determinant(St))<1e-8))return!1;var a=Nt[3],s=Nt[7],u=Nt[11],l=Nt[12],c=Nt[13],f=Nt[14],p=Nt[15];if(a!==0||s!==0||u!==0){ne[0]=a,ne[1]=s,ne[2]=u,ne[3]=p;var h=R.invert(St,St);if(!h)return!1;R.transpose(St,St),rt.fF(i,ne,St)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=l,e[1]=c,e[2]=f,ui(F,Nt),t[0]=P.kE(F[0]),P.Fv(F[0],F[0]),n[0]=P.AK(F[0],F[1]),Oe(F[1],F[1],F[0],1,-n[0]),t[1]=P.kE(F[1]),P.Fv(F[1],F[1]),n[0]/=t[1],n[1]=P.AK(F[0],F[2]),Oe(F[2],F[2],F[0],1,-n[1]),n[2]=P.AK(F[1],F[2]),Oe(F[2],F[2],F[1],1,-n[2]),t[2]=P.kE(F[2]),P.Fv(F[2],F[2]),n[1]/=t[2],n[2]/=t[2],P.kC(Tr,F[1],F[2]),P.AK(F[0],Tr)<0)for(var v=0;v<3;v++)t[v]*=-1,F[v][0]*=-1,F[v][1]*=-1,F[v][2]*=-1;return o[0]=.5*Math.sqrt(Math.max(1+F[0][0]-F[1][1]-F[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-F[0][0]+F[1][1]-F[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-F[0][0]-F[1][1]+F[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+F[0][0]+F[1][1]+F[2][2],0)),F[2][1]>F[1][2]&&(o[0]=-o[0]),F[0][2]>F[2][0]&&(o[1]=-o[1]),F[1][0]>F[0][1]&&(o[2]=-o[2]),!0}function si(r,e){var t=e[15];if(t===0)return!1;for(var n=1/t,i=0;i<16;i++)r[i]=e[i]*n;return!0}function ui(r,e){r[0][0]=e[0],r[0][1]=e[1],r[0][2]=e[2],r[1][0]=e[4],r[1][1]=e[5],r[1][2]=e[6],r[2][0]=e[8],r[2][1]=e[9],r[2][2]=e[10]}function Oe(r,e,t,n,i){r[0]=e[0]*n+t[0]*i,r[1]=e[1]*n+t[1]*i,r[2]=e[2]*n+t[2]*i}var ct=function(){function r(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return r.isEmpty=function(e){return!e||e.halfExtents[0]===0&&e.halfExtents[1]===0&&e.halfExtents[2]===0},r.prototype.update=function(e,t){zt(this.center,e),zt(this.halfExtents,t),Re(this.min,this.center,this.halfExtents),ce(this.max,this.center,this.halfExtents)},r.prototype.setMinMax=function(e,t){ce(this.center,t,e),Er(this.center,this.center,.5),Re(this.halfExtents,t,e),Er(this.halfExtents,this.halfExtents,.5),zt(this.min,e),zt(this.max,t)},r.prototype.getMin=function(){return this.min},r.prototype.getMax=function(){return this.max},r.prototype.add=function(e){if(!r.isEmpty(e)){if(r.isEmpty(this)){this.setMinMax(e.getMin(),e.getMax());return}var t=this.center,n=t[0],i=t[1],o=t[2],a=this.halfExtents,s=a[0],u=a[1],l=a[2],c=n-s,f=n+s,p=i-u,h=i+u,v=o-l,m=o+l,E=e.center,C=E[0],S=E[1],D=E[2],G=e.halfExtents,T=G[0],d=G[1],y=G[2],x=C-T,A=C+T,N=S-d,w=S+d,k=D-y,B=D+y;x<c&&(c=x),A>f&&(f=A),N<p&&(p=N),w>h&&(h=w),k<v&&(v=k),B>m&&(m=B),t[0]=(c+f)*.5,t[1]=(p+h)*.5,t[2]=(v+m)*.5,a[0]=(f-c)*.5,a[1]=(h-p)*.5,a[2]=(m-v)*.5,this.min[0]=c,this.min[1]=p,this.min[2]=v,this.max[0]=f,this.max[1]=h,this.max[2]=m}},r.prototype.setFromTransformedAABB=function(e,t){var n=this.center,i=this.halfExtents,o=e.center,a=e.halfExtents,s=t[0],u=t[4],l=t[8],c=t[1],f=t[5],p=t[9],h=t[2],v=t[6],m=t[10],E=Math.abs(s),C=Math.abs(u),S=Math.abs(l),D=Math.abs(c),G=Math.abs(f),T=Math.abs(p),d=Math.abs(h),y=Math.abs(v),x=Math.abs(m);n[0]=t[12]+s*o[0]+u*o[1]+l*o[2],n[1]=t[13]+c*o[0]+f*o[1]+p*o[2],n[2]=t[14]+h*o[0]+v*o[1]+m*o[2],i[0]=E*a[0]+C*a[1]+S*a[2],i[1]=D*a[0]+G*a[1]+T*a[2],i[2]=d*a[0]+y*a[1]+x*a[2],Re(this.min,n,i),ce(this.max,n,i)},r.prototype.intersects=function(e){var t=this.getMax(),n=this.getMin(),i=e.getMax(),o=e.getMin();return n[0]<=i[0]&&t[0]>=o[0]&&n[1]<=i[1]&&t[1]>=o[1]&&n[2]<=i[2]&&t[2]>=o[2]},r.prototype.intersection=function(e){if(!this.intersects(e))return null;var t=new r,n=qn([0,0,0],this.getMin(),e.getMin()),i=ti([0,0,0],this.getMax(),e.getMax());return t.setMinMax(n,i),t},r.prototype.getNegativeFarPoint=function(e){return e.pnVertexFlag===273?zt([0,0,0],this.min):e.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:e.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},r.prototype.getPositiveFarPoint=function(e){return e.pnVertexFlag===273?zt([0,0,0],this.max):e.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:e.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},r}(),li=function(){function r(e,t){this.distance=e||0,this.normal=t||P.al(0,1,0),this.updatePNVertexFlag()}return r.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},r.prototype.distanceToPoint=function(e){return P.AK(e,this.normal)-this.distance},r.prototype.normalize=function(){var e=1/P.Zh(this.normal);P.bA(this.normal,this.normal,e),this.distance*=e},r.prototype.intersectsLine=function(e,t,n){var i=this.distanceToPoint(e),o=this.distanceToPoint(t),a=i/(i-o),s=a>=0&&a<=1;return s&&n&&P.t7(n,e,t,a),s},r}(),Lt;(function(r){r[r.OUTSIDE=4294967295]="OUTSIDE",r[r.INSIDE=0]="INSIDE",r[r.INDETERMINATE=2147483647]="INDETERMINATE"})(Lt||(Lt={}));var ci=function(){function r(e){if(this.planes=[],e)this.planes=e;else for(var t=0;t<6;t++)this.planes.push(new li)}return r.prototype.extractFromVPMatrix=function(e){var t=(0,g.CR)(e,16),n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],p=t[9],h=t[10],v=t[11],m=t[12],E=t[13],C=t[14],S=t[15];P.t8(this.planes[0].normal,a-n,c-s,v-f),this.planes[0].distance=S-m,P.t8(this.planes[1].normal,a+n,c+s,v+f),this.planes[1].distance=S+m,P.t8(this.planes[2].normal,a+i,c+u,v+p),this.planes[2].distance=S+E,P.t8(this.planes[3].normal,a-i,c-u,v-p),this.planes[3].distance=S-E,P.t8(this.planes[4].normal,a-o,c-l,v-h),this.planes[4].distance=S-C,P.t8(this.planes[5].normal,a+o,c+l,v+h),this.planes[5].distance=S+C,this.planes.forEach(function(D){D.normalize(),D.updatePNVertexFlag()})},r}(),ut=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y},r}(),Jt=function(){function r(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this.left=e,this.right=e+n,this.top=t,this.bottom=t+i}return r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r.applyTransform=function(e,t){var n=rt.al(e.x,e.y,0,1),i=rt.al(e.x+e.width,e.y,0,1),o=rt.al(e.x,e.y+e.height,0,1),a=rt.al(e.x+e.width,e.y+e.height,0,1),s=rt.Ue(),u=rt.Ue(),l=rt.Ue(),c=rt.Ue();rt.fF(s,n,t),rt.fF(u,i,t),rt.fF(l,o,t),rt.fF(c,a,t);var f=Math.min(s[0],u[0],l[0],c[0]),p=Math.min(s[1],u[1],l[1],c[1]),h=Math.max(s[0],u[0],l[0],c[0]),v=Math.max(s[1],u[1],l[1],c[1]);return r.fromRect({x:f,y:p,width:h-f,height:v-p})},r.prototype.toJSON=function(){},r}(),$="Method not implemented.",Qt="Use document.documentElement instead.",fi="Cannot append a destroyed element.",j;(function(r){r[r.ORBITING=0]="ORBITING",r[r.EXPLORING=1]="EXPLORING",r[r.TRACKING=2]="TRACKING"})(j||(j={}));var ie;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.ROTATIONAL=1]="ROTATIONAL",r[r.TRANSLATIONAL=2]="TRANSLATIONAL",r[r.CINEMATIC=3]="CINEMATIC"})(ie||(ie={}));var vt;(function(r){r[r.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",r[r.PERSPECTIVE=1]="PERSPECTIVE"})(vt||(vt={}));var Pr={UPDATED:"updated"},Cr=2e-4,Mr=function(){function r(){this.clipSpaceNearZ=Kt.NEGATIVE_ONE,this.eventEmitter=new Ne.Z,this.matrix=R.create(),this.right=P.al(1,0,0),this.up=P.al(0,1,0),this.forward=P.al(0,0,1),this.position=P.al(0,0,1),this.focalPoint=P.al(0,0,0),this.distanceVector=P.al(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=R.create(),this.projectionMatrixInverse=R.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=j.EXPLORING,this.trackingMode=ie.DEFAULT,this.projectionMode=vt.PERSPECTIVE,this.frustum=new ci,this.orthoMatrix=R.create()}return r.prototype.isOrtho=function(){return this.projectionMode===vt.ORTHOGRAPHIC},r.prototype.getProjectionMode=function(){return this.projectionMode},r.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},r.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},r.prototype.getFrustum=function(){return this.frustum},r.prototype.getPosition=function(){return this.position},r.prototype.getFocalPoint=function(){return this.focalPoint},r.prototype.getDollyingStep=function(){return this.dollyingStep},r.prototype.getNear=function(){return this.near},r.prototype.getFar=function(){return this.far},r.prototype.getZoom=function(){return this.zoom},r.prototype.getOrthoMatrix=function(){return this.orthoMatrix},r.prototype.getView=function(){return this.view},r.prototype.setEnableUpdate=function(e){this.enableUpdate=e},r.prototype.setType=function(e,t){return this.type=e,this.type===j.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===j.TRACKING&&t!==void 0&&this.setTrackingMode(t),this},r.prototype.setProjectionMode=function(e){return this.projectionMode=e,this},r.prototype.setTrackingMode=function(e){if(this.type!==j.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this},r.prototype.setWorldRotation=function(e){return this.rotateWorld=e,this._getAngles(),this},r.prototype.getViewTransform=function(){return R.invert(R.create(),this.matrix)},r.prototype.getWorldTransform=function(){return this.matrix},r.prototype.jitterProjectionMatrix=function(e,t){var n=R.fromTranslation(R.create(),[e,t,0]);this.jitteredProjectionMatrix=R.multiply(R.create(),n,this.projectionMatrix)},r.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},r.prototype.setMatrix=function(e){return this.matrix=e,this._update(),this},r.prototype.setProjectionMatrix=function(e){this.projectionMatrix=e},r.prototype.setFov=function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this},r.prototype.setAspect=function(e){return this.setPerspective(this.near,this.far,this.fov,e),this},r.prototype.setNear=function(e){return this.projectionMode===vt.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this},r.prototype.setFar=function(e){return this.projectionMode===vt.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this},r.prototype.setViewOffset=function(e,t,n,i,o,a){return this.aspect=e/t,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.projectionMode===vt.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},r.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===vt.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},r.prototype.setZoom=function(e){return this.zoom=e,this.projectionMode===vt.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===vt.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},r.prototype.setZoomByViewportPoint=function(e,t){var n=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),i=n.x,o=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(i,o),this.setFocalPoint(i,o),this.setZoom(e),this.rotate(0,0,a);var s=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),u=s.x,l=s.y,c=P.al(u-i,l-o,0),f=P.AK(c,this.right)/P.kE(this.right),p=P.AK(c,this.up)/P.kE(this.up),h=(0,g.CR)(this.getPosition(),2),v=h[0],m=h[1],E=(0,g.CR)(this.getFocalPoint(),2),C=E[0],S=E[1];return this.setPosition(v-f,m-p),this.setFocalPoint(C-f,S-p),this},r.prototype.setPerspective=function(e,t,n,i){var o;this.projectionMode=vt.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=i;var a=this.near*Math.tan(z(.5*this.fov))/this.zoom,s=2*a,u=this.aspect*s,l=-.5*u;if(!((o=this.view)===null||o===void 0)&&o.enabled){var c=this.view.fullWidth,f=this.view.fullHeight;l+=this.view.offsetX*u/c,a-=this.view.offsetY*s/f,u*=this.view.width/c,s*=this.view.height/f}return oi(this.projectionMatrix,l,l+u,a-s,a,e,this.far,this.clipSpaceNearZ===Kt.ZERO),R.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},r.prototype.setOrthographic=function(e,t,n,i,o,a){var s;this.projectionMode=vt.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=i,this.near=o,this.far=a;var u=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,p=c-u,h=c+u,v=f+l,m=f-l;if(!((s=this.view)===null||s===void 0)&&s.enabled){var E=(this.rright-this.left)/this.view.fullWidth/this.zoom,C=(this.top-this.bottom)/this.view.fullHeight/this.zoom;p+=E*this.view.offsetX,h=p+E*this.view.width,v-=C*this.view.offsetY,m=v-C*this.view.height}return this.clipSpaceNearZ===Kt.NEGATIVE_ONE?R.ortho(this.projectionMatrix,p,h,v,m,o,a):R.orthoZO(this.projectionMatrix,p,h,v,m,o,a),R.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},r.prototype.setPosition=function(e,t,n){t===void 0&&(t=this.position[1]),n===void 0&&(n=this.position[2]);var i=ht(e,t,n);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},r.prototype.setFocalPoint=function(e,t,n){t===void 0&&(t=this.focalPoint[1]),n===void 0&&(n=this.focalPoint[2]);var i=P.al(0,1,0);if(this.focalPoint=ht(e,t,n),this.trackingMode===ie.CINEMATIC){var o=P.$X(P.Ue(),this.focalPoint,this.position);e=o[0],t=o[1],n=o[2];var a=P.kE(o),s=Tt(Math.asin(t/a)),u=90+Tt(Math.atan2(n,e)),l=R.create();R.rotateY(l,l,z(u)),R.rotateX(l,l,z(s)),i=P.fF(P.Ue(),[0,1,0],l)}return R.invert(this.matrix,R.lookAt(R.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},r.prototype.getDistance=function(){return this.distance},r.prototype.getDistanceVector=function(){return this.distanceVector},r.prototype.setDistance=function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<Cr&&(this.distance=Cr),this.dollyingStep=this.distance/100;var t=P.Ue();e=this.distance;var n=this.forward,i=this.focalPoint;return t[0]=e*n[0]+i[0],t[1]=e*n[1]+i[1],t[2]=e*n[2]+i[2],this._setPosition(t),this.triggerUpdate(),this},r.prototype.setMaxDistance=function(e){return this.maxDistance=e,this},r.prototype.setMinDistance=function(e){return this.minDistance=e,this},r.prototype.setAzimuth=function(e){return this.azimuth=fe(e),this.computeMatrix(),this._getAxes(),this.type===j.ORBITING||this.type===j.EXPLORING?this._getPosition():this.type===j.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},r.prototype.getAzimuth=function(){return this.azimuth},r.prototype.setElevation=function(e){return this.elevation=fe(e),this.computeMatrix(),this._getAxes(),this.type===j.ORBITING||this.type===j.EXPLORING?this._getPosition():this.type===j.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},r.prototype.getElevation=function(){return this.elevation},r.prototype.setRoll=function(e){return this.roll=fe(e),this.computeMatrix(),this._getAxes(),this.type===j.ORBITING||this.type===j.EXPLORING?this._getPosition():this.type===j.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},r.prototype.getRoll=function(){return this.roll},r.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},r.prototype.computeMatrix=function(){var e=W.yY(W.Ue(),[0,0,1],z(this.roll));R.identity(this.matrix);var t=W.yY(W.Ue(),[1,0,0],z((this.rotateWorld&&this.type!==j.TRACKING||this.type===j.TRACKING?1:-1)*this.elevation)),n=W.yY(W.Ue(),[0,1,0],z((this.rotateWorld&&this.type!==j.TRACKING||this.type===j.TRACKING?1:-1)*this.azimuth)),i=W.Jp(W.Ue(),n,t);i=W.Jp(W.Ue(),i,e);var o=R.fromQuat(R.create(),i);this.type===j.ORBITING||this.type===j.EXPLORING?(R.translate(this.matrix,this.matrix,this.focalPoint),R.multiply(this.matrix,this.matrix,o),R.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===j.TRACKING&&(R.translate(this.matrix,this.matrix,this.position),R.multiply(this.matrix,this.matrix,o))},r.prototype._setPosition=function(e,t,n){this.position=ht(e,t,n);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},r.prototype._getAxes=function(){P.JG(this.right,ht(rt.fF(rt.Ue(),[1,0,0,0],this.matrix))),P.JG(this.up,ht(rt.fF(rt.Ue(),[0,1,0,0],this.matrix))),P.JG(this.forward,ht(rt.fF(rt.Ue(),[0,0,1,0],this.matrix))),P.Fv(this.right,this.right),P.Fv(this.up,this.up),P.Fv(this.forward,this.forward)},r.prototype._getAngles=function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],i=P.kE(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===j.TRACKING?(this.elevation=Tt(Math.asin(t/i)),this.azimuth=Tt(Math.atan2(-e,-n))):this.rotateWorld?(this.elevation=Tt(Math.asin(t/i)),this.azimuth=Tt(Math.atan2(-e,-n))):(this.elevation=-Tt(Math.asin(t/i)),this.azimuth=-Tt(Math.atan2(-e,-n)))},r.prototype._getPosition=function(){P.JG(this.position,ht(rt.fF(rt.Ue(),[0,0,0,1],this.matrix))),this._getDistance()},r.prototype._getFocalPoint=function(){P.kK(this.distanceVector,[0,0,-this.distance],we.xO(we.Ue(),this.matrix)),P.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()},r.prototype._getDistance=function(){this.distanceVector=P.$X(P.Ue(),this.focalPoint,this.position),this.distance=P.kE(this.distanceVector),this.dollyingStep=this.distance/100},r.prototype._getOrthoMatrix=function(){if(this.projectionMode===vt.ORTHOGRAPHIC){var e=this.position,t=W.yY(W.Ue(),[0,0,1],-this.roll*Math.PI/180);R.fromRotationTranslationScaleOrigin(this.orthoMatrix,t,P.al((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),P.al(this.zoom,this.zoom,1),e)}},r.prototype.triggerUpdate=function(){if(this.enableUpdate){var e=this.getViewTransform(),t=R.multiply(R.create(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(Pr.UPDATED)}},r.prototype.rotate=function(e,t,n){throw new Error($)},r.prototype.pan=function(e,t){throw new Error($)},r.prototype.dolly=function(e){throw new Error($)},r.prototype.createLandmark=function(e,t){throw new Error($)},r.prototype.gotoLandmark=function(e,t){throw new Error($)},r.prototype.cancelLandmarkAnimation=function(){throw new Error($)},r}();function lt(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e?e.apply(this,n):n[0],a=t.cache;if(a.has(o))return a.get(o);var s=r.apply(this,n);return t.cache=a.set(o,s)||a,s};return t.cache=new(lt.Cache||Map),t}lt.Cache=Map;var O;(function(r){r[r.kUnknown=0]="kUnknown",r[r.kNumber=1]="kNumber",r[r.kPercentage=2]="kPercentage",r[r.kEms=3]="kEms",r[r.kPixels=4]="kPixels",r[r.kRems=5]="kRems",r[r.kDegrees=6]="kDegrees",r[r.kRadians=7]="kRadians",r[r.kGradians=8]="kGradians",r[r.kTurns=9]="kTurns",r[r.kMilliseconds=10]="kMilliseconds",r[r.kSeconds=11]="kSeconds",r[r.kInteger=12]="kInteger"})(O||(O={}));var mt;(function(r){r[r.kUNumber=0]="kUNumber",r[r.kUPercent=1]="kUPercent",r[r.kULength=2]="kULength",r[r.kUAngle=3]="kUAngle",r[r.kUTime=4]="kUTime",r[r.kUOther=5]="kUOther"})(mt||(mt={}));var Sr;(function(r){r[r.kAll=0]="kAll",r[r.kNonNegative=1]="kNonNegative",r[r.kInteger=2]="kInteger",r[r.kNonNegativeInteger=3]="kNonNegativeInteger",r[r.kPositiveInteger=4]="kPositiveInteger"})(Sr||(Sr={}));var be;(function(r){r[r.kYes=0]="kYes",r[r.kNo=1]="kNo"})(be||(be={}));var ke;(function(r){r[r.kYes=0]="kYes",r[r.kNo=1]="kNo"})(ke||(ke={}));var hi=[{name:"em",unit_type:O.kEms},{name:"px",unit_type:O.kPixels},{name:"deg",unit_type:O.kDegrees},{name:"rad",unit_type:O.kRadians},{name:"grad",unit_type:O.kGradians},{name:"ms",unit_type:O.kMilliseconds},{name:"s",unit_type:O.kSeconds},{name:"rem",unit_type:O.kRems},{name:"turn",unit_type:O.kTurns}],It;(function(r){r[r.kUnknownType=0]="kUnknownType",r[r.kUnparsedType=1]="kUnparsedType",r[r.kKeywordType=2]="kKeywordType",r[r.kUnitType=3]="kUnitType",r[r.kSumType=4]="kSumType",r[r.kProductType=5]="kProductType",r[r.kNegateType=6]="kNegateType",r[r.kInvertType=7]="kInvertType",r[r.kMinType=8]="kMinType",r[r.kMaxType=9]="kMaxType",r[r.kClampType=10]="kClampType",r[r.kTransformType=11]="kTransformType",r[r.kPositionType=12]="kPositionType",r[r.kURLImageType=13]="kURLImageType",r[r.kColorType=14]="kColorType",r[r.kUnsupportedColorType=15]="kUnsupportedColorType"})(It||(It={}));var pi=function(r){return hi.find(function(e){return e.name===r}).unit_type},vi=function(r){return r?r==="number"?O.kNumber:r==="percent"||r==="%"?O.kPercentage:pi(r):O.kUnknown},di=function(r){switch(r){case O.kNumber:case O.kInteger:return mt.kUNumber;case O.kPercentage:return mt.kUPercent;case O.kPixels:return mt.kULength;case O.kMilliseconds:case O.kSeconds:return mt.kUTime;case O.kDegrees:case O.kRadians:case O.kGradians:case O.kTurns:return mt.kUAngle;default:return mt.kUOther}},gi=function(r){switch(r){case mt.kUNumber:return O.kNumber;case mt.kULength:return O.kPixels;case mt.kUPercent:return O.kPercentage;case mt.kUTime:return O.kSeconds;case mt.kUAngle:return O.kDegrees;default:return O.kUnknown}},Nr=function(r){var e=1;switch(r){case O.kPixels:case O.kDegrees:case O.kSeconds:break;case O.kMilliseconds:e=.001;break;case O.kRadians:e=180/Math.PI;break;case O.kGradians:e=.9;break;case O.kTurns:e=360;break}return e},Le=function(r){switch(r){case O.kNumber:case O.kInteger:return"";case O.kPercentage:return"%";case O.kEms:return"em";case O.kRems:return"rem";case O.kPixels:return"px";case O.kDegrees:return"deg";case O.kRadians:return"rad";case O.kGradians:return"grad";case O.kMilliseconds:return"ms";case O.kSeconds:return"s";case O.kTurns:return"turn"}return""},he=function(){function r(){}return r.isAngle=function(e){return e===O.kDegrees||e===O.kRadians||e===O.kGradians||e===O.kTurns},r.isLength=function(e){return e>=O.kEms&&e<O.kDegrees},r.isRelativeUnit=function(e){return e===O.kPercentage||e===O.kEms||e===O.kRems},r.isTime=function(e){return e===O.kSeconds||e===O.kMilliseconds},r.prototype.toString=function(){return this.buildCSSText(be.kNo,ke.kNo,"")},r.prototype.isNumericValue=function(){return this.getType()>=It.kUnitType&&this.getType()<=It.kClampType},r}(),yi=function(r){(0,g.ZT)(e,r);function e(t){var n=r.call(this)||this;return n.colorSpace=t,n}return e.prototype.getType=function(){return It.kColorType},e.prototype.to=function(t){return this},e}(he),_t;(function(r){r[r.Constant=0]="Constant",r[r.LinearGradient=1]="LinearGradient",r[r.RadialGradient=2]="RadialGradient"})(_t||(_t={}));var pe=function(r){(0,g.ZT)(e,r);function e(t,n){var i=r.call(this)||this;return i.type=t,i.value=n,i}return e.prototype.clone=function(){return new e(this.type,this.value)},e.prototype.buildCSSText=function(t,n,i){return i},e.prototype.getType=function(){return It.kColorType},e}(he),dt=function(r){(0,g.ZT)(e,r);function e(t){var n=r.call(this)||this;return n.value=t,n}return e.prototype.clone=function(){return new e(this.value)},e.prototype.getType=function(){return It.kKeywordType},e.prototype.buildCSSText=function(t,n,i){return i+this.value},e}(he),mi=lt(function(r){return r===void 0&&(r=""),r.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}),wr=function(r){return r.split("").map(function(e,t){return e.toUpperCase()===e?"".concat(t!==0?"-":"").concat(e.toLowerCase()):e}).join("")};function Ei(r){if(!r)throw new Error}function $t(r){return typeof r=="function"}function xi(r){return typeof r=="symbol"}var Ps=function(r){return Object.fromEntries(Object.entries(r).filter(function(e){var t=__read(e,2),n=t[1];return n!==void 0}))},Ti={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},Ie=lt(function(r){var e=mi(r),t=Ti[e];return e=(t==null?void 0:t.alias)||e,e}),Pi=function(r,e){e===void 0&&(e="");var t="";return Number.isFinite(r)?(Ei(Number.isNaN(r)),t="NaN"):r>0?t="infinity":t="-infinity",t+=e},De=function(r){return gi(di(r))},V=function(r){(0,g.ZT)(e,r);function e(t,n){n===void 0&&(n=O.kNumber);var i=r.call(this)||this,o;return typeof n=="string"?o=vi(n):o=n,i.unit=o,i.value=t,i}return e.prototype.clone=function(){return new e(this.value,this.unit)},e.prototype.equals=function(t){var n=t;return this.value===n.value&&this.unit===n.unit},e.prototype.getType=function(){return It.kUnitType},e.prototype.convertTo=function(t){if(this.unit===t)return new e(this.value,this.unit);var n=De(this.unit);if(n!==De(t)||n===O.kUnknown)return null;var i=Nr(this.unit)/Nr(t);return new e(this.value*i,t)},e.prototype.buildCSSText=function(t,n,i){var o;switch(this.unit){case O.kUnknown:break;case O.kInteger:o=Number(this.value).toFixed(0);break;case O.kNumber:case O.kPercentage:case O.kEms:case O.kRems:case O.kPixels:case O.kDegrees:case O.kRadians:case O.kGradians:case O.kMilliseconds:case O.kSeconds:case O.kTurns:{var a=-999999,s=999999,u=this.value,l=Le(this.unit);if(u<a||u>s){var c=Le(this.unit);!Number.isFinite(u)||Number.isNaN(u)?o=Pi(u,c):o=u+(c||"")}else o="".concat(u).concat(l)}}return i+=o,i},e}(he),nt=new V(0,"px");new V(1,"px");var Pt=new V(0,"deg"),Be=function(r){(0,g.ZT)(e,r);function e(t,n,i,o,a){o===void 0&&(o=1),a===void 0&&(a=!1);var s=r.call(this,"rgb")||this;return s.r=t,s.g=n,s.b=i,s.alpha=o,s.isNone=a,s}return e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.alpha)},e.prototype.buildCSSText=function(t,n,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},e}(yi),Q=new dt("unset"),Ci=new dt("initial"),Mi=new dt("inherit"),Ge={"":Q,unset:Q,initial:Ci,inherit:Mi},_e=function(r){return Ge[r]||(Ge[r]=new dt(r)),Ge[r]},ve=new Be(0,0,0,0,!0),Rr=new Be(0,0,0,0),Si=lt(function(r,e,t,n){return new Be(r,e,t,n)},function(r,e,t,n){return"rgba(".concat(r,",").concat(e,",").concat(t,",").concat(n,")")}),K=function(r,e){return e===void 0&&(e=O.kNumber),new V(r,e)};new V(50,"%");var Fe;(function(r){r[r.Standard=0]="Standard"})(Fe||(Fe={}));var jt;(function(r){r[r.ADDED=0]="ADDED",r[r.REMOVED=1]="REMOVED",r[r.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(jt||(jt={}));var Ar={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Jt(0,0,0,0)},b;(function(r){r.COORDINATE="<coordinate>",r.COLOR="<color>",r.PAINT="<paint>",r.NUMBER="<number>",r.ANGLE="<angle>",r.OPACITY_VALUE="<opacity-value>",r.SHADOW_BLUR="<shadow-blur>",r.LENGTH="<length>",r.PERCENTAGE="<percentage>",r.LENGTH_PERCENTAGE="<length> | <percentage>",r.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",r.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",r.LIST_OF_POINTS="<list-of-points>",r.PATH="<path>",r.FILTER="<filter>",r.Z_INDEX="<z-index>",r.OFFSET_DISTANCE="<offset-distance>",r.DEFINED_PATH="<defined-path>",r.MARKER="<marker>",r.TRANSFORM="<transform>",r.TRANSFORM_ORIGIN="<transform-origin>",r.TEXT="<text>",r.TEXT_TRANSFORM="<text-transform>"})(b||(b={}));function Ni(r){var e=r.type,t=r.value;return e==="hex"?"#".concat(t):e==="literal"?t:e==="rgb"?"rgb(".concat(t.join(","),")"):"rgba(".concat(t.join(","),")")}var wi=function(){var r={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function t(I){throw new Error(e+": "+I)}function n(){var I=i();return e.length>0&&t("Invalid input not EOF"),I}function i(){return D(o)}function o(){return a("linear-gradient",r.linearGradient,u)||a("repeating-linear-gradient",r.repeatingLinearGradient,u)||a("radial-gradient",r.radialGradient,f)||a("repeating-radial-gradient",r.repeatingRadialGradient,f)||a("conic-gradient",r.conicGradient,f)}function a(I,Y,X){return s(Y,function(at){var Mt=X();return Mt&&(U(r.comma)||t("Missing comma before color stops")),{type:I,orientation:Mt,colorStops:D(G)}})}function s(I,Y){var X=U(I);if(X){U(r.startCall)||t("Missing (");var at=Y(X);return U(r.endCall)||t("Missing )"),at}}function u(){return l()||c()}function l(){return _("directional",r.sideOrCorner,1)}function c(){return _("angular",r.angleValue,1)}function f(){var I,Y=p(),X;return Y&&(I=[],I.push(Y),X=e,U(r.comma)&&(Y=p(),Y?I.push(Y):e=X)),I}function p(){var I=h()||v();if(I)I.at=E();else{var Y=m();if(Y){I=Y;var X=E();X&&(I.at=X)}else{var at=C();at&&(I={type:"default-radial",at})}}return I}function h(){var I=_("shape",/^(circle)/i,0);return I&&(I.style=B()||m()),I}function v(){var I=_("shape",/^(ellipse)/i,0);return I&&(I.style=w()||m()),I}function m(){return _("extent-keyword",r.extentKeywords,1)}function E(){if(_("position",/^at/,0)){var I=C();return I||t("Missing positioning value"),I}}function C(){var I=S();if(I.x||I.y)return{type:"position",value:I}}function S(){return{x:w(),y:w()}}function D(I){var Y=I(),X=[];if(Y)for(X.push(Y);U(r.comma);)Y=I(),Y?X.push(Y):t("One extra comma");return X}function G(){var I=T();return I||t("Expected color definition"),I.length=w(),I}function T(){return y()||A()||x()||d()}function d(){return _("literal",r.literalColor,0)}function y(){return _("hex",r.hexColor,1)}function x(){return s(r.rgbColor,function(){return{type:"rgb",value:D(N)}})}function A(){return s(r.rgbaColor,function(){return{type:"rgba",value:D(N)}})}function N(){return U(r.number)[1]}function w(){return _("%",r.percentageValue,1)||k()||B()}function k(){return _("position-keyword",r.positionKeywords,1)}function B(){return _("px",r.pixelValue,1)||_("em",r.emValue,1)}function _(I,Y,X){var at=U(Y);if(at)return{type:I,value:at[X]}}function U(I){var Y=/^[\n\r\t\s]+/.exec(e);Y&&H(Y[0].length);var X=I.exec(e);return X&&H(X[0].length),X}function H(I){e=e.substring(I)}return function(I){return e=I,n()}}();function Ri(r,e,t,n){var i=z(n.value),o=0,a=0,s=o+e/2,u=a+t/2,l=Math.abs(e*Math.cos(i))+Math.abs(t*Math.sin(i)),c=r[0]+s-Math.cos(i)*l/2,f=r[1]+u-Math.sin(i)*l/2,p=r[0]+s+Math.cos(i)*l/2,h=r[1]+u+Math.sin(i)*l/2;return{x1:c,y1:f,x2:p,y2:h}}function Ai(r,e,t,n,i,o){var a=n.value,s=i.value;n.unit===O.kPercentage&&(a=n.value/100*e),i.unit===O.kPercentage&&(s=i.value/100*t);var u=Math.max((0,bt.y)([0,0],[a,s]),(0,bt.y)([0,t],[a,s]),(0,bt.y)([e,t],[a,s]),(0,bt.y)([e,0],[a,s]));return o&&(o instanceof V?u=o.value:o instanceof dt&&(o.value==="closest-side"?u=Math.min(a,e-a,s,t-s):o.value==="farthest-side"?u=Math.max(a,e-a,s,t-s):o.value==="closest-corner"&&(u=Math.min((0,bt.y)([0,0],[a,s]),(0,bt.y)([0,t],[a,s]),(0,bt.y)([e,t],[a,s]),(0,bt.y)([e,0],[a,s]))))),{x:a+r[0],y:s+r[1],r:u}}var Oi=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,bi=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ki=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Or=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Li(r){var e,t,n,i=r.length;r[i-1].length=(e=r[i-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},i>1&&(r[0].length=(t=r[0].length)!==null&&t!==void 0?t:{type:"%",value:"0"});for(var o=0,a=Number(r[0].length.value),s=1;s<i;s++){var u=(n=r[s].length)===null||n===void 0?void 0:n.value;if(!(0,tt.Z)(u)&&!(0,tt.Z)(a)){for(var l=1;l<s-o;l++)r[o+l].length={type:"%",value:"".concat(a+(Number(u)-a)*l/(s-o))};o=s,a=Number(u)}}}var Ii={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},Di=lt(function(r){var e;return r.type==="angular"?e=Number(r.value):e=Ii[r.value]||0,K(e,"deg")}),Bi=lt(function(r){var e=50,t=50,n="%",i="%";if((r==null?void 0:r.type)==="position"){var o=r.value,a=o.x,s=o.y;(a==null?void 0:a.type)==="position-keyword"&&(a.value==="left"?e=0:a.value==="center"?e=50:a.value==="right"?e=100:a.value==="top"?t=0:a.value==="bottom"&&(t=100)),(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?t=50:s.value==="right"?e=100:s.value==="top"?t=0:s.value==="bottom"&&(t=100)),((a==null?void 0:a.type)==="px"||(a==null?void 0:a.type)==="%"||(a==null?void 0:a.type)==="em")&&(n=a==null?void 0:a.type,e=Number(a.value)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,t=Number(s.value))}return{cx:K(e,n),cy:K(t,i)}}),Gi=lt(function(r){var e;if(r.indexOf("linear")>-1||r.indexOf("radial")>-1){var t=wi(r);return t.map(function(s){var u=s.type,l=s.orientation,c=s.colorStops;Li(c);var f=c.map(function(D){return{offset:K(Number(D.length.value),"%"),color:Ni(D)}});if(u==="linear-gradient")return new pe(_t.LinearGradient,{angle:l?Di(l):Pt,steps:f});if(u==="radial-gradient"&&(l||(l=[{type:"shape",value:"circle"}]),l[0].type==="shape"&&l[0].value==="circle")){var p=Bi(l[0].at),h=p.cx,v=p.cy,m=void 0;if(l[0].style){var E=l[0].style,C=E.type,S=E.value;C==="extent-keyword"?m=_e(S):m=K(S,C)}return new pe(_t.RadialGradient,{cx:h,cy:v,size:m,steps:f})}})}var n=r[0];if(r[1]==="("||r[2]==="("){if(n==="l"){var i=Oi.exec(r);if(i){var o=((e=i[2].match(Or))===null||e===void 0?void 0:e.map(function(s){return s.split(":")}))||[];return[new pe(_t.LinearGradient,{angle:K(parseFloat(i[1]),"deg"),steps:o.map(function(s){var u=(0,g.CR)(s,2),l=u[0],c=u[1];return{offset:K(Number(l)*100,"%"),color:c}})})]}}else if(n==="r"){var a=_i(r);if(a)if((0,Rt.Z)(a))r=a;else return[new pe(_t.RadialGradient,a)]}else if(n==="p")return Fi(r)}});function _i(r){var e,t=bi.exec(r);if(t){var n=((e=t[4].match(Or))===null||e===void 0?void 0:e.map(function(i){return i.split(":")}))||[];return{cx:K(50,"%"),cy:K(50,"%"),steps:n.map(function(i){var o=(0,g.CR)(i,2),a=o[0],s=o[1];return{offset:K(Number(a)*100,"%"),color:s}})}}return null}function Fi(r){var e=ki.exec(r);if(e){var t=e[1],n=e[2];switch(t){case"a":t="repeat";break;case"x":t="repeat-x";break;case"y":t="repeat-y";break;case"n":t="no-repeat";break;default:t="no-repeat"}return{image:n,repetition:t}}return null}function Cs(r){return!!r.type&&!!r.value}function br(r){return r&&!!r.image}function Ue(r){return r&&!(0,tt.Z)(r.r)&&!(0,tt.Z)(r.g)&&!(0,tt.Z)(r.b)}var Ft=lt(function(r){if(br(r))return(0,g.pi)({repetition:"repeat"},r);if((0,tt.Z)(r)&&(r=""),r==="transparent")return Rr;if(r==="currentColor")r="black";else if(r==="none")return ve;var e=Gi(r);if(e)return e;var t=zn.ZP(r),n=[0,0,0,0];return t!==null&&(n[0]=t.r||0,n[1]=t.g||0,n[2]=t.b||0,n[3]=t.opacity),Si.apply(void 0,(0,g.ev)([],(0,g.CR)(n),!1))});function Ui(r,e){if(!(!Ue(r)||!Ue(e)))return[[Number(r.r),Number(r.g),Number(r.b),Number(r.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var n=t.slice();if(n[3])for(var i=0;i<3;i++)n[i]=Math.round((0,re.Z)(n[i],0,255));return n[3]=(0,re.Z)(n[3],0,1),"rgba(".concat(n.join(","),")")}]}function oe(r,e){if((0,tt.Z)(e))return K(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(r)>=0)return K(Number(e),"px");if("deg".search(r)>=0)return K(Number(e),"deg")}var t=[];e=e.replace(r,function(i){return t.push(i),"U"+i});var n="U("+r.source+")";return t.map(function(i){return K(Number(e.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(n,"g"),"*0")),i)})[0]}var kr=function(r){return oe(new RegExp("px","g"),r)},Zi=lt(kr),Wi=function(r){return oe(new RegExp("%","g"),r)};lt(Wi);var ae=function(r){return(0,Gt.Z)(r)||isFinite(Number(r))?K(Number(r)||0,"px"):oe(new RegExp("px|%|em|rem","g"),r)},qt=lt(ae),Ze=function(r){return oe(new RegExp("deg|rad|grad|turn","g"),r)},Lr=lt(Ze);function Yi(r,e,t,n,i){i===void 0&&(i=0);var o="",a=r.value||0,s=e.value||0,u=De(r.unit),l=r.convertTo(u),c=e.convertTo(u);return l&&c?(a=l.value,s=c.value,o=Le(r.unit)):(V.isLength(r.unit)||V.isLength(e.unit))&&(a=Et(r,i,t),s=Et(e,i,t),o="px"),[a,s,function(f){return n&&(f=Math.max(f,0)),f+o}]}function gt(r){var e=0;return r.unit===O.kDegrees?e=r.value:r.unit===O.kRadians?e=Tt(Number(r.value)):r.unit===O.kTurns&&(e=ei(Number(r.value))),e}function Ir(r,e){var t;return Array.isArray(r)?t=r.map(function(n){return Number(n)}):(0,Rt.Z)(r)?t=r.split(" ").map(function(n){return Number(n)}):(0,Gt.Z)(r)&&(t=[r]),e===2?t.length===1?[t[0],t[0]]:[t[0],t[1]]:t.length===1?[t[0],t[0],t[0],t[0]]:t.length===2?[t[0],t[1],t[0],t[1]]:t.length===3?[t[0],t[1],t[2],t[1]]:[t[0],t[1],t[2],t[3]]}function Dr(r){return(0,Rt.Z)(r)?r.split(" ").map(function(e){return qt(e)}):r.map(function(e){return qt(e.toString())})}function Et(r,e,t,n){if(n===void 0&&(n=!1),r.unit===O.kPixels)return Number(r.value);if(r.unit===O.kPercentage&&t){var i=t.nodeName===L.GROUP?t.getLocalBounds():t.getGeometryBounds();return(n?i.min[e]:0)+r.value/100*i.halfExtents[e]*2}return 0}var Xi=function(r){return oe(/deg|rad|grad|turn|px|%/g,r)},Hi=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function Br(r){if(r===void 0&&(r=""),r=r.toLowerCase().trim(),r==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,t=[],n,i=0;n=e.exec(r);){if(n.index!==i)return[];if(i=n.index+n[0].length,Hi.indexOf(n[1])>-1&&t.push({name:n[1],params:n[2].split(" ").map(function(o){return Xi(o)||Ft(o)})}),e.lastIndex===r.length)return t}return[]}function Gr(r){return r.toString()}var te=function(r){return typeof r=="number"?K(r):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(r)?K(Number(r)):K(0)},Ut=lt(te);lt(function(r){return(0,Rt.Z)(r)?r.split(" ").map(Ut):r.map(Ut)});function We(r,e){return[r,e,Gr]}function Ye(r,e){return function(t,n){return[t,n,function(i){return Gr((0,re.Z)(i,r,e))}]}}function _r(r,e){if(r.length===e.length)return[r,e,function(t){return t}]}function Xe(r){return r.parsedStyle.d.totalLength===0&&(r.parsedStyle.d.totalLength=(0,Un.D)(r.parsedStyle.d.absolutePath)),r.parsedStyle.d.totalLength}function Vi(r){return r.parsedStyle.points.totalLength===0&&(r.parsedStyle.points.totalLength=(0,kt.hE)(r.parsedStyle.points.points)),r.parsedStyle.points.totalLength}function Ki(r){for(var e=0;e<r.length;e++){var t=r[e-1],n=r[e],i=n[0];if(i==="M"&&t){var o=t[0],a=[n[1],n[2]],s=void 0;o==="L"||o==="M"?s=[t[1],t[2]]:(o==="C"||o==="A"||o==="Q")&&(s=[t[t.length-2],t[t.length-1]]),s&&de(a,s)&&(r.splice(e,1),e--)}}}function zi(r){for(var e=!1,t=r.length,n=0;n<t;n++){var i=r[n],o=i[0];if(o==="C"||o==="A"||o==="Q"){e=!0;break}}return e}function Ji(r){for(var e=[],t=[],n=[],i=0;i<r.length;i++){var o=r[i],a=o[0];a==="M"?(n.length&&(t.push(n),n=[]),n.push([o[1],o[2]])):a==="Z"?n.length&&(e.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&t.push(n),{polygons:e,polylines:t}}function de(r,e){return r[0]===e[0]&&r[1]===e[1]}function Qi(r,e){for(var t=[],n=[],i=[],o=0;o<r.length;o++){var a=r[o],s=a.currentPoint,u=a.params,l=a.prePoint,c=void 0;switch(a.command){case"Q":c=(0,kt.x4)(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=(0,kt.l5)(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var f=a.arcParams;c=(0,kt.vp)(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:t.push(s[0]),n.push(s[1]);break}c&&(a.box=c,t.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),e&&(a.command==="L"||a.command==="M")&&a.prePoint&&a.nextPoint&&i.push(a)}t=t.filter(function(C){return!Number.isNaN(C)&&C!==1/0&&C!==-1/0}),n=n.filter(function(C){return!Number.isNaN(C)&&C!==1/0&&C!==-1/0});var p=(0,fr.Z)(t),h=(0,fr.Z)(n),v=(0,hr.Z)(t),m=(0,hr.Z)(n);if(i.length===0)return{x:p,y:h,width:v-p,height:m-h};for(var o=0;o<i.length;o++){var a=i[o],s=a.currentPoint,E=void 0;s[0]===p?(E=ge(a,e),p=p-E.xExtra):s[0]===v&&(E=ge(a,e),v=v+E.xExtra),s[1]===h?(E=ge(a,e),h=h-E.yExtra):s[1]===m&&(E=ge(a,e),m=m+E.yExtra)}return{x:p,y:h,width:v-p,height:m-h}}function ge(r,e){var t=r.prePoint,n=r.currentPoint,i=r.nextPoint,o=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),a=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),u=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!u||Math.sin(u)===0||(0,Zn.Z)(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(u/2-l)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return f}function Fr(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}var Ur=function(r,e){var t=r.x*e.x+r.y*e.y,n=Math.sqrt((Math.pow(r.x,2)+Math.pow(r.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2))),i=r.x*e.y-r.y*e.x<0?-1:1,o=i*Math.acos(t/n);return o},Zr=function(r,e,t,n,i,o,a,s){e=Math.abs(e),t=Math.abs(t),n=(0,pr.Z)(n,360);var u=z(n);if(r.x===a.x&&r.y===a.y)return{x:r.x,y:r.y,ellipticalArcAngle:0};if(e===0||t===0)return{x:0,y:0,ellipticalArcAngle:0};var l=(r.x-a.x)/2,c=(r.y-a.y)/2,f={x:Math.cos(u)*l+Math.sin(u)*c,y:-Math.sin(u)*l+Math.cos(u)*c},p=Math.pow(f.x,2)/Math.pow(e,2)+Math.pow(f.y,2)/Math.pow(t,2);p>1&&(e=Math.sqrt(p)*e,t=Math.sqrt(p)*t);var h=Math.pow(e,2)*Math.pow(t,2)-Math.pow(e,2)*Math.pow(f.y,2)-Math.pow(t,2)*Math.pow(f.x,2),v=Math.pow(e,2)*Math.pow(f.y,2)+Math.pow(t,2)*Math.pow(f.x,2),m=h/v;m=m<0?0:m;var E=(i!==o?1:-1)*Math.sqrt(m),C={x:E*(e*f.y/t),y:E*(-(t*f.x)/e)},S={x:Math.cos(u)*C.x-Math.sin(u)*C.y+(r.x+a.x)/2,y:Math.sin(u)*C.x+Math.cos(u)*C.y+(r.y+a.y)/2},D={x:(f.x-C.x)/e,y:(f.y-C.y)/t},G=Ur({x:1,y:0},D),T={x:(-f.x-C.x)/e,y:(-f.y-C.y)/t},d=Ur(D,T);!o&&d>0?d-=2*Math.PI:o&&d<0&&(d+=2*Math.PI),d%=2*Math.PI;var y=G+d*s,x=e*Math.cos(y),A=t*Math.sin(y),N={x:Math.cos(u)*x-Math.sin(u)*A+S.x,y:Math.sin(u)*x+Math.cos(u)*A+S.y,ellipticalArcStartAngle:G,ellipticalArcEndAngle:G+d,ellipticalArcAngle:y,ellipticalArcCenter:S,resultantRx:e,resultantRy:t};return N};function $i(r){for(var e=[],t=null,n=null,i=null,o=0,a=r.length,s=0;s<a;s++){var u=r[s];n=r[s+1];var l=u[0],c={command:l,prePoint:t,params:u,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[u[1],u[2]],o=s;break;case"A":var f=ji(t,u);c.arcParams=f;break}if(l==="Z")t=i,n=r[o+1];else{var p=u.length;t=[u[p-2],u[p-1]]}n&&n[0]==="Z"&&(n=r[o],e[o]&&(e[o].prePoint=t)),c.currentPoint=t,e[o]&&de(t,e[o].currentPoint)&&(e[o].prePoint=c.prePoint);var h=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=h;var v=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[v[0]-t[0],v[1]-t[1]],c.endTangent=[t[0]-v[0],t[1]-v[1]];else if(l==="Q"){var m=[u[1],u[2]];c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[t[0]-m[0],t[1]-m[1]]}else if(l==="T"){var E=e[s-1],m=Fr(E.currentPoint,v);E.command==="Q"?(c.command="Q",c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[t[0]-m[0],t[1]-m[1]]):(c.command="TL",c.startTangent=[v[0]-t[0],v[1]-t[1]],c.endTangent=[t[0]-v[0],t[1]-v[1]])}else if(l==="C"){var C=[u[1],u[2]],S=[u[3],u[4]];c.startTangent=[v[0]-C[0],v[1]-C[1]],c.endTangent=[t[0]-S[0],t[1]-S[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[C[0]-S[0],C[1]-S[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[S[0]-C[0],S[1]-C[1]])}else if(l==="S"){var E=e[s-1],C=Fr(E.currentPoint,v),S=[u[1],u[2]];E.command==="C"?(c.command="C",c.startTangent=[v[0]-C[0],v[1]-C[1]],c.endTangent=[t[0]-S[0],t[1]-S[1]]):(c.command="SQ",c.startTangent=[v[0]-S[0],v[1]-S[1]],c.endTangent=[t[0]-S[0],t[1]-S[1]])}else if(l==="A"){var D=Wr(c,0),G=D.x,T=D.y,d=Wr(c,1,!1),y=d.x,x=d.y;c.startTangent=[G,T],c.endTangent=[y,x]}e.push(c)}return e}function Wr(r,e,t){t===void 0&&(t=!0);var n=r.arcParams,i=n.rx,o=i===void 0?0:i,a=n.ry,s=a===void 0?0:a,u=n.xRotation,l=n.arcFlag,c=n.sweepFlag,f=Zr({x:r.prePoint[0],y:r.prePoint[1]},o,s,u,!!l,!!c,{x:r.currentPoint[0],y:r.currentPoint[1]},e),p=Zr({x:r.prePoint[0],y:r.prePoint[1]},o,s,u,!!l,!!c,{x:r.currentPoint[0],y:r.currentPoint[1]},t?e+.005:e-.005),h=p.x-f.x,v=p.y-f.y,m=Math.sqrt(h*h+v*v);return{x:-h/m,y:-v/m}}function ye(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function He(r,e){return ye(r)*ye(e)?(r[0]*e[0]+r[1]*e[1])/(ye(r)*ye(e)):1}function Yr(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(He(r,e))}function ji(r,e){var t=e[1],n=e[2],i=(0,pr.Z)(z(e[3]),Math.PI*2),o=e[4],a=e[5],s=r[0],u=r[1],l=e[6],c=e[7],f=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,p=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,h=f*f/(t*t)+p*p/(n*n);h>1&&(t*=Math.sqrt(h),n*=Math.sqrt(h));var v=t*t*(p*p)+n*n*(f*f),m=v?Math.sqrt((t*t*(n*n)-v)/v):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var E=n?m*t*p/n:0,C=t?m*-n*f/t:0,S=(s+l)/2+Math.cos(i)*E-Math.sin(i)*C,D=(u+c)/2+Math.sin(i)*E+Math.cos(i)*C,G=[(f-E)/t,(p-C)/n],T=[(-1*f-E)/t,(-1*p-C)/n],d=Yr([1,0],G),y=Yr(G,T);return He(G,T)<=-1&&(y=Math.PI),He(G,T)>=1&&(y=0),a===0&&y>0&&(y=y-2*Math.PI),a===1&&y<0&&(y=y+2*Math.PI),{cx:S,cy:D,rx:de(r,[l,c])?0:t,ry:de(r,[l,c])?0:n,startAngle:d,endAngle:d+y,xRotation:i,arcFlag:o,sweepFlag:a}}function qi(r,e,t){return r.reduce(function(n,i){var o="";if(i[0]==="M"||i[0]==="L"){var a=P.al(i[1],i[2],0);t&&P.fF(a,a,t),o="".concat(i[0]).concat(a[0],",").concat(a[1])}else if(i[0]==="Z")o=i[0];else if(i[0]==="C"){var s=P.al(i[1],i[2],0),u=P.al(i[3],i[4],0),l=P.al(i[5],i[6],0);t&&(P.fF(s,s,t),P.fF(u,u,t),P.fF(l,l,t)),o="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(u[0],",").concat(u[1],",").concat(l[0],",").concat(l[1])}else if(i[0]==="A"){var c=P.al(i[6],i[7],0);t&&P.fF(c,c,t),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(c[0],",").concat(c[1])}else if(i[0]==="Q"){var s=P.al(i[1],i[2],0),u=P.al(i[3],i[4],0);t&&(P.fF(s,s,t),P.fF(u,u,t)),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return n+=o},"")}function to(r,e,t,n){return[["M",r,e],["L",t,n]]}function Xr(r,e,t,n){var i=(-1+Math.sqrt(2))/3*4,o=r*i,a=e*i,s=t-r,u=t+r,l=n-e,c=n+e;return[["M",s,n],["C",s,n-a,t-o,l,t,l],["C",t+o,l,u,n-a,u,n],["C",u,n+a,t+o,c,t,c],["C",t-o,c,s,n+a,s,n],["Z"]]}function eo(r,e){var t=r.map(function(n,i){return[i===0?"M":"L",n[0],n[1]]});return e&&t.push(["Z"]),t}function ro(r,e,t,n,i){if(i){var o=(0,g.CR)(i,4),a=o[0],s=o[1],u=o[2],l=o[3],c=r>0?1:-1,f=e>0?1:-1,p=c+f!==0?1:0;return[["M",c*a+t,n],["L",r-c*s+t,n],s?["A",s,s,0,0,p,r+t,f*s+n]:null,["L",r+t,e-f*u+n],u?["A",u,u,0,0,p,r+t-c*u,e+n]:null,["L",t+c*l,e+n],l?["A",l,l,0,0,p,t,e+n-f*l]:null,["L",t,f*a+n],a?["A",a,a,0,0,p,c*a+t,n]:null,["Z"]].filter(function(h){return h})}return[["M",t,n],["L",t+r,n],["L",t+r,n+e],["L",t,n+e],["Z"]]}function no(r,e){e===void 0&&(e=r.getLocalTransform());var t=[];switch(r.nodeName){case L.LINE:var n=r.parsedStyle,i=n.x1,o=i===void 0?0:i,a=n.y1,s=a===void 0?0:a,u=n.x2,l=u===void 0?0:u,c=n.y2,f=c===void 0?0:c;t=to(o,s,l,f);break;case L.CIRCLE:{var p=r.parsedStyle,h=p.r,v=h===void 0?0:h,m=p.cx,E=m===void 0?0:m,C=p.cy,S=C===void 0?0:C;t=Xr(v,v,E,S);break}case L.ELLIPSE:{var D=r.parsedStyle,G=D.rx,T=G===void 0?0:G,d=D.ry,y=d===void 0?0:d,x=D.cx,E=x===void 0?0:x,A=D.cy,S=A===void 0?0:A;t=Xr(T,y,E,S);break}case L.POLYLINE:case L.POLYGON:var N=r.parsedStyle.points;t=eo(N.points,r.nodeName===L.POLYGON);break;case L.RECT:var w=r.parsedStyle,k=w.width,B=k===void 0?0:k,_=w.height,U=_===void 0?0:_,H=w.x,I=H===void 0?0:H,Y=w.y,X=Y===void 0?0:Y,at=w.radius,Mt=at&&at.some(function(Xt){return Xt!==0});t=ro(B,U,I,X,Mt&&at.map(function(Xt){return(0,re.Z)(Xt,0,Math.min(Math.abs(B)/2,Math.abs(U)/2))}));break;case L.PATH:var Ot=r.parsedStyle.d.absolutePath;t=(0,g.ev)([],(0,g.CR)(Ot),!1);break}if(t.length)return qi(t,r,e)}function Ms(r,e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0);var o=r.map(function(a,s){var u=a[0],l=r[s+1],c=s===0&&(e!==0||t!==0),f=(s===r.length-1||l&&(l[0]==="M"||l[0]==="Z"))&&n!==0&&i!==0;switch(u){case"M":return c?"M ".concat(a[1]+e,",").concat(a[2]+t," L ").concat(a[1],",").concat(a[2]):"M ".concat(a[1],",").concat(a[2]);case"L":return"L ".concat(a[1]+(f?n:0),",").concat(a[2]+(f?i:0));case"Q":return"Q ".concat(a[1]," ").concat(a[2],",").concat(a[3]," ").concat(a[4])+(f?" L ".concat(a[3]+n,",").concat(a[4]+i):"");case"C":return"C ".concat(a[1]," ").concat(a[2],",").concat(a[3]," ").concat(a[4],",").concat(a[5]," ").concat(a[6])+(f?" L ".concat(a[5]+n,",").concat(a[6]+i):"");case"A":return"A ".concat(a[1]," ").concat(a[2]," ").concat(a[3]," ").concat(a[4]," ").concat(a[5]," ").concat(a[6]," ").concat(a[7])+(f?" L ".concat(a[6]+n,",").concat(a[7]+i):"");case"Z":return"Z"}}).join(" ");return~o.indexOf("NaN")?"":o}var Hr=function(r){if(r===""||Array.isArray(r)&&r.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=(0,vr.A)(r)}catch(p){e=(0,vr.A)(""),console.error("[g]: Invalid SVG Path definition: ".concat(r))}Ki(e);var t=zi(e),n=Ji(e),i=n.polygons,o=n.polylines,a=$i(e),s=Qi(a,0),u=s.x,l=s.y,c=s.width,f=s.height;return{absolutePath:e,hasArc:t,segments:a,polygons:i,polylines:o,totalLength:0,rect:{x:Number.isFinite(u)?u:0,y:Number.isFinite(l)?l:0,width:Number.isFinite(c)?c:0,height:Number.isFinite(f)?f:0}}},io=lt(Hr);function Ve(r){return(0,Rt.Z)(r)?io(r):Hr(r)}function oo(r,e,t){var n=r.curve,i=e.curve;(!n||n.length===0)&&(n=(0,dr.Y)(r.absolutePath,!1),r.curve=n),(!i||i.length===0)&&(i=(0,dr.Y)(e.absolutePath,!1),e.curve=i);var o=[n,i];n.length!==i.length&&(o=(0,Wn.x)(n,i));var a=(0,gr.b)(o[0])!==(0,gr.b)(o[1])?(0,Yn.G)(o[0]):(0,Xn.U)(o[0]);return[a,(0,Hn.g)(o[1],a),function(s){return s}]}function Vr(r,e){var t;return(0,Rt.Z)(r)?t=r.split(" ").map(function(n){var i=(0,g.CR)(n.split(","),2),o=i[0],a=i[1];return[Number(o),Number(a)]}):t=r,{points:t,totalLength:0,segments:[]}}function ao(r,e){return[r.points,e.points,function(t){return t}]}var et=null;function yt(r){return function(e){var t=0;return r.map(function(n){return n===et?e[t++]:n})}}function Zt(r){return r}var me={matrix:["NNNNNN",[et,et,0,0,et,et,0,0,0,0,1,0,et,et,0,1],Zt],matrix3d:["NNNNNNNNNNNNNNNN",Zt],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",yt([et,et,new V(1)]),Zt],scalex:["N",yt([et,new V(1),new V(1)]),yt([et,new V(1)])],scaley:["N",yt([new V(1),et,new V(1)]),yt([new V(1),et])],scalez:["N",yt([new V(1),new V(1),et])],scale3d:["NNN",Zt],skew:["Aa",null,Zt],skewx:["A",null,yt([et,Pt])],skewy:["A",null,yt([Pt,et])],translate:["Tt",yt([et,et,nt]),Zt],translatex:["T",yt([et,nt,nt]),yt([et,nt])],translatey:["T",yt([nt,et,nt]),yt([nt,et])],translatez:["L",yt([nt,nt,et])],translate3d:["TTL",Zt]};function Ke(r){if(r=(r||"none").toLowerCase().trim(),r==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,t=[],n,i=0;n=e.exec(r);){if(n.index!==i)return[];i=n.index+n[0].length;var o=n[1],a=me[o];if(!a)return[];var s=n[2].split(","),u=a[0];if(u.length<s.length)return[];for(var l=[],c=0;c<u.length;c++){var f=s[c],p=u[c],h=void 0;if(f?h={A:function(v){return v.trim()==="0"?Pt:Lr(v)},N:Ut,T:qt,L:Zi}[p.toUpperCase()](f):h={a:Pt,n:l[0],t:nt}[p],h===void 0)return[];l.push(h)}if(t.push({t:o,d:l}),e.lastIndex===r.length)return t}return[]}function Kr(r){if(r=(r||"none").toLowerCase().trim(),r==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,t=[],n,i=0;n=e.exec(r);){if(n.index!==i)return[];i=n.index+n[0].length;var o=n[1],a=me[o];if(!a)return[];var s=n[2].split(","),u=a[0];if(u.length<s.length)return[];for(var l=[],c=0;c<u.length;c++){var f=s[c],p=u[c],h=void 0;if(f?h={A:function(v){return v.trim()==="0"?Pt:Ze(v)},N:te,T:ae,L:kr}[p.toUpperCase()](f):h={a:Pt,n:l[0],t:nt}[p],h===void 0)return[];l.push(h)}if(t.push({t:o,d:l}),e.lastIndex===r.length)return t}return[]}function so(r){var e,t,n,i;switch(r.t){case"rotatex":return i=z(gt(r.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=z(gt(r.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=z(gt(r.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=r.d[0].value,t=r.d[1].value,n=r.d[2].value,i=z(gt(r.d[3]));var o=e*e+t*t+n*n;if(o===0)e=1,t=0,n=0;else if(o!==1){var a=Math.sqrt(o);e/=a,t/=a,n/=a}var s=Math.sin(i/2),u=s*Math.cos(i/2),l=s*s;return[1-2*(t*t+n*n)*l,2*(e*t*l+n*u),2*(e*n*l-t*u),0,2*(e*t*l-n*u),1-2*(e*e+n*n)*l,2*(t*n*l+e*u),0,2*(e*n*l+t*u),2*(t*n*l-e*u),1-2*(e*e+t*t)*l,0,0,0,0,1];case"scale":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[r.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,r.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,r.d[0].value,0,0,0,0,1];case"scale3d":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,r.d[2].value,0,0,0,0,1];case"skew":var c=z(gt(r.d[0])),f=z(gt(r.d[1]));return[1,Math.tan(f),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=z(gt(r.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=z(gt(r.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=Et(r.d[0],0,null)||0,t=Et(r.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1];case"translatex":return e=Et(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translatey":return t=Et(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,t,0,1];case"translatez":return n=Et(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,n,1];case"translate3d":return e=Et(r.d[0],0,null)||0,t=Et(r.d[1],0,null)||0,n=Et(r.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1];case"perspective":var p=Et(r.d[0],0,null)||0,h=p?-1/p:0;return[1,0,0,0,0,1,0,0,0,0,1,h,0,0,0,1];case"matrix":return[r.d[0].value,r.d[1].value,0,0,r.d[2].value,r.d[3].value,0,0,0,0,1,0,r.d[4].value,r.d[5].value,0,1];case"matrix3d":return r.d.map(function(v){return v.value})}}function uo(r,e){return[r[0]*e[0]+r[4]*e[1]+r[8]*e[2]+r[12]*e[3],r[1]*e[0]+r[5]*e[1]+r[9]*e[2]+r[13]*e[3],r[2]*e[0]+r[6]*e[1]+r[10]*e[2]+r[14]*e[3],r[3]*e[0]+r[7]*e[1]+r[11]*e[2]+r[15]*e[3],r[0]*e[4]+r[4]*e[5]+r[8]*e[6]+r[12]*e[7],r[1]*e[4]+r[5]*e[5]+r[9]*e[6]+r[13]*e[7],r[2]*e[4]+r[6]*e[5]+r[10]*e[6]+r[14]*e[7],r[3]*e[4]+r[7]*e[5]+r[11]*e[6]+r[15]*e[7],r[0]*e[8]+r[4]*e[9]+r[8]*e[10]+r[12]*e[11],r[1]*e[8]+r[5]*e[9]+r[9]*e[10]+r[13]*e[11],r[2]*e[8]+r[6]*e[9]+r[10]*e[10]+r[14]*e[11],r[3]*e[8]+r[7]*e[9]+r[11]*e[10]+r[15]*e[11],r[0]*e[12]+r[4]*e[13]+r[8]*e[14]+r[12]*e[15],r[1]*e[12]+r[5]*e[13]+r[9]*e[14]+r[13]*e[15],r[2]*e[12]+r[6]*e[13]+r[10]*e[14]+r[14]*e[15],r[3]*e[12]+r[7]*e[13]+r[11]*e[14]+r[15]*e[15]]}function lo(r){return r.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:r.map(so).reduce(uo)}function zr(r){var e=[0,0,0],t=[1,1,1],n=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return ai(lo(r),e,t,n,i,o),[[e,t,n,o,i]]}var co=function(){function r(n,i){for(var o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var s=0;s<4;s++)for(var u=0;u<4;u++)o[a][s]+=i[a][u]*n[u][s];return o}function e(n){return n[0][2]==0&&n[0][3]==0&&n[1][2]==0&&n[1][3]==0&&n[2][0]==0&&n[2][1]==0&&n[2][2]==1&&n[2][3]==0&&n[3][2]==0&&n[3][3]==1}function t(n,i,o,a,s){for(var u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)u[l][3]=s[l];for(var l=0;l<3;l++)for(var c=0;c<3;c++)u[3][l]+=n[c]*u[c][l];var f=a[0],p=a[1],h=a[2],v=a[3],m=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];m[0][0]=1-2*(p*p+h*h),m[0][1]=2*(f*p-h*v),m[0][2]=2*(f*h+p*v),m[1][0]=2*(f*p+h*v),m[1][1]=1-2*(f*f+h*h),m[1][2]=2*(p*h-f*v),m[2][0]=2*(f*h-p*v),m[2][1]=2*(p*h+f*v),m[2][2]=1-2*(f*f+p*p),u=r(u,m);var E=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[2]&&(E[2][1]=o[2],u=r(u,E)),o[1]&&(E[2][1]=0,E[2][0]=o[0],u=r(u,E)),o[0]&&(E[2][0]=0,E[1][0]=o[0],u=r(u,E));for(var l=0;l<3;l++)for(var c=0;c<3;c++)u[l][c]*=i[l];return e(u)?[u[0][0],u[0][1],u[1][0],u[1][1],u[3][0],u[3][1]]:u[0].concat(u[1],u[2],u[3])}return t}();function fo(r){return r.toFixed(6).replace(".000000","")}function ze(r,e){var t,n;return r.decompositionPair!==e&&(r.decompositionPair=e,t=zr(r)),e.decompositionPair!==r&&(e.decompositionPair=r,n=zr(e)),t[0]===null||n[0]===null?[[!1],[!0],function(i){return i?e[0].d:r[0].d}]:(t[0].push(0),n[0].push(1),[t,n,function(i){var o=po(t[0][3],n[0][3],i[5]),a=co(i[0],i[1],i[2],o,i[4]),s=a.map(fo).join(",");return s}])}function ho(r,e){for(var t=0,n=0;n<r.length;n++)t+=r[n]*e[n];return t}function po(r,e,t){var n=ho(r,e);n=(0,re.Z)(n,-1,1);var i=[];if(n===1)i=r;else for(var o=Math.acos(n),a=Math.sin(t*o)*1/Math.sqrt(1-n*n),s=0;s<4;s++)i.push(r[s]*(Math.cos(t*o)-n*a)+e[s]*a);return i}function Je(r){return r.replace(/[xy]/,"")}function Qe(r){return r.replace(/(x|y|z|3d)?$/,"3d")}var vo=function(r,e){return r==="perspective"&&e==="perspective"||(r==="matrix"||r==="matrix3d")&&(e==="matrix"||e==="matrix3d")};function go(r,e,t){var n=!1;if(!r.length||!e.length){r.length||(n=!0,r=e,e=[]);for(var i=function(d){var y=r[d],x=y.t,A=y.d,N=x.substring(0,5)==="scale"?1:0;e.push({t:x,d:A.map(function(w){return typeof w=="number"?K(N):K(N,w.unit)})})},o=0;o<r.length;o++)i(o)}var a=[],s=[],u=[];if(r.length!==e.length){var l=ze(r,e);a=[l[0]],s=[l[1]],u=[["matrix",[l[2]]]]}else for(var o=0;o<r.length;o++){var c=r[o].t,f=e[o].t,p=r[o].d,h=e[o].d,v=me[c],m=me[f],E=void 0;if(vo(c,f)){var l=ze([r[o]],[e[o]]);a.push(l[0]),s.push(l[1]),u.push(["matrix",[l[2]]]);continue}else if(c===f)E=c;else if(v[2]&&m[2]&&Je(c)===Je(f))E=Je(c),p=v[2](p),h=m[2](h);else if(v[1]&&m[1]&&Qe(c)===Qe(f))E=Qe(c),p=v[1](p),h=m[1](h);else{var l=ze(r,e);a=[l[0]],s=[l[1]],u=[["matrix",[l[2]]]];break}for(var C=[],S=[],D=[],G=0;G<p.length;G++){var l=Yi(p[G],h[G],t,!1,G);C[G]=l[0],S[G]=l[1],D.push(l[2])}a.push(C),s.push(S),u.push([E,D])}if(n){var T=a;a=s,s=T}return[a,s,function(d){return d.map(function(y,x){var A=y.map(function(N,w){return u[x][1][w](N)}).join(",");return u[x][0]==="matrix"&&A.split(",").length===16&&(u[x][0]="matrix3d"),u[x][0]==="matrix3d"&&A.split(",").length===6&&(u[x][0]="matrix"),u[x][0]+"("+A+")"}).join(" ")}]}var Jr=lt(function(r){if((0,Rt.Z)(r)){if(r==="text-anchor")return[K(0,"px"),K(0,"px")];var e=r.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[qt(Ee(e[0])),qt(Ee(e[1]))]}else return[K(r[0]||0,"px"),K(r[1]||0,"px")]}),yo=function(r){if((0,Rt.Z)(r)){if(r==="text-anchor")return[K(0,"px"),K(0,"px")];var e=r.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[ae(Ee(e[0])),ae(Ee(e[1]))]}else return[K(r[0]||0,"px"),K(r[1]||0,"px")]};function Ee(r){return r==="center"?"50%":r==="left"||r==="top"?"0%":r==="right"||r==="bottom"?"100%":r}var $e=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:b.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:b.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:b.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:b.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:b.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:b.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:b.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:b.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:b.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:b.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:b.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:b.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:b.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:b.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:b.FILTER},{n:"clipPath",syntax:b.DEFINED_PATH},{n:"textPath",syntax:b.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:b.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:b.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:b.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:b.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:b.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:b.COORDINATE},{n:"y1",int:!0,l:!0,syntax:b.COORDINATE},{n:"z1",int:!0,l:!0,syntax:b.COORDINATE},{n:"x2",int:!0,l:!0,syntax:b.COORDINATE},{n:"y2",int:!0,l:!0,syntax:b.COORDINATE},{n:"z2",int:!0,l:!0,syntax:b.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:b.PATH,p:50},{n:"points",int:!0,l:!0,syntax:b.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:b.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:b.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:b.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:b.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:b.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:b.NUMBER,d:function(r){return r===L.PATH||r===L.POLYGON||r===L.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:b.MARKER},{n:"markerEnd",syntax:b.MARKER},{n:"markerMid",syntax:b.MARKER},{n:"markerStartOffset",syntax:b.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:b.LENGTH,l:!0,int:!0,d:"0"}],Qr=$e.filter(function(r){return!!r.l}).map(function(r){return r.n}),Dt={},ee=new WeakMap,mo=function(r,e){var t=ee.get(r);return!t||t.length===0?!0:t.includes(e)},Eo=function(){function r(e){var t=this;this.runtime=e,$e.forEach(function(n){t.registerMetadata(n)})}return r.prototype.registerMetadata=function(e){(0,g.ev)([e.n],(0,g.CR)(e.a||[]),!1).forEach(function(t){Dt[t]=e})},r.prototype.unregisterMetadata=function(e){delete Dt[e]},r.prototype.getPropertySyntax=function(e){return this.runtime.CSSPropertySyntaxFactory[e]},r.prototype.processProperties=function(e,t,n){var i=this;if(n===void 0&&(n={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var c=n.skipUpdateAttribute,f=n.skipParse,p=n.forceUpdateGeometry,h=n.usedAttributes,v=n.memoize,m=p,E=Object.keys(t);E.forEach(function(C){var S;c||(e.attributes[C]=t[C]),!m&&(!((S=Dt[C])===null||S===void 0)&&S.l)&&(m=!0)}),f||E.forEach(function(C){e.computedStyle[C]=i.parseProperty(C,e.attributes[C],e,v)}),h!=null&&h.length&&(E=Array.from(new Set(E.concat(h)))),E.forEach(function(C){C in e.computedStyle&&(e.parsedStyle[C]=i.computeProperty(C,e.computedStyle[C],e,v))}),m&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e)),E.forEach(function(C){C in e.parsedStyle&&i.postProcessProperty(C,e,E)}),this.runtime.enableCSSParsing&&e.children.length&&E.forEach(function(C){C in e.parsedStyle&&i.isPropertyInheritable(C)&&e.children.forEach(function(S){S.internalSetAttribute(C,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(e.attributes,t);var o=Object.keys(t),a=e.parsedStyle.clipPath,s=e.parsedStyle.offsetPath;e.parsedStyle=Object.assign(e.parsedStyle,t);var u=!!n.forceUpdateGeometry;if(!u){for(var l=0;l<Qr.length;l++)if(Qr[l]in t){u=!0;break}}t.fill&&(e.parsedStyle.fill=Ft(t.fill)),t.stroke&&(e.parsedStyle.stroke=Ft(t.stroke)),t.shadowColor&&(e.parsedStyle.shadowColor=Ft(t.shadowColor)),t.filter&&(e.parsedStyle.filter=Br(t.filter)),(0,tt.Z)(t.radius)||(e.parsedStyle.radius=Ir(t.radius,4)),(0,tt.Z)(t.lineDash)||(e.parsedStyle.lineDash=Ir(t.lineDash,2)),t.points&&(e.parsedStyle.points=Vr(t.points)),t.d===""&&(e.parsedStyle.d=(0,g.pi)({},Ar)),t.d&&(e.parsedStyle.d=Ve(t.d)),t.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:t.textTransform},e,null),(0,q.Z)(t.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",a,t.clipPath,e,this.runtime),t.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",s,t.offsetPath,e,this.runtime),t.transform&&(e.parsedStyle.transform=Ke(t.transform)),t.transformOrigin&&(e.parsedStyle.transformOrigin=Jr(t.transformOrigin)),t.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,t.markerStart,t.markerStart,null,null)),t.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,t.markerEnd,t.markerEnd,null,null)),t.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",t.markerMid,t.markerMid,null,null)),(0,tt.Z)(t.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(e,o),(0,tt.Z)(t.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(e,o),t.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(e,o),t.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(e,o),u&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e))}},r.prototype.parseProperty=function(e,t,n,i){var o=Dt[e],a=t;if((t===""||(0,tt.Z)(t))&&(t="unset"),t==="unset"||t==="initial"||t==="inherit")a=_e(t);else if(o){var s=o.k,u=o.syntax,l=u&&this.getPropertySyntax(u);s&&s.indexOf(t)>-1?a=_e(t):l&&(!i&&l.parserUnmemoize?a=l.parserUnmemoize(t,n):l.parser&&(a=l.parser(t,n)))}return a},r.prototype.computeProperty=function(e,t,n,i){var o=Dt[e],a=n.id==="g-root",s=t;if(o){var u=o.syntax,l=o.inh,c=o.d;if(t instanceof dt){var f=t.value;if(f==="unset"&&(l&&!a?f="inherit":f="initial"),f==="initial")(0,tt.Z)(c)||(t=this.parseProperty(e,$t(c)?c(n.nodeName):c,n,i));else if(f==="inherit"){var p=this.tryToResolveProperty(n,e,{inherited:!0});if((0,tt.Z)(p)){this.addUnresolveProperty(n,e);return}else return p}}var h=u&&this.getPropertySyntax(u);if(h&&h.calculator){var v=n.parsedStyle[e];s=h.calculator(e,v,t,n,this.runtime)}else t instanceof dt?s=t.value:s=t}return s},r.prototype.postProcessProperty=function(e,t,n){var i=Dt[e];if(i&&i.syntax){var o=i.syntax&&this.getPropertySyntax(i.syntax),a=o;a&&a.postProcessor&&a.postProcessor(t,n)}},r.prototype.addUnresolveProperty=function(e,t){var n=ee.get(e);n||(ee.set(e,[]),n=ee.get(e)),n.indexOf(t)===-1&&n.push(t)},r.prototype.tryToResolveProperty=function(e,t,n){n===void 0&&(n={});var i=n.inherited;if(i&&e.parentElement&&mo(e.parentElement,t)){var o=e.parentElement.parsedStyle[t];return o==="unset"||o==="initial"||o==="inherit"?void 0:o}},r.prototype.recalc=function(e){var t=ee.get(e);if(t&&t.length){var n={};t.forEach(function(i){n[i]=e.attributes[i]}),this.processProperties(e,n),ee.delete(e)}},r.prototype.updateGeometry=function(e){var t=e.nodeName,n=this.runtime.geometryUpdaterFactory[t];if(n){var i=e.geometry;i.contentBounds||(i.contentBounds=new ct),i.renderBounds||(i.renderBounds=new ct);var o=e.parsedStyle,a=n.update(o,e),s=a.cx,u=s===void 0?0:s,l=a.cy,c=l===void 0?0:l,f=a.cz,p=f===void 0?0:f,h=a.hwidth,v=h===void 0?0:h,m=a.hheight,E=m===void 0?0:m,C=a.hdepth,S=C===void 0?0:C,D=[Math.abs(v),Math.abs(E),S],G=o,T=G.stroke,d=G.lineWidth,y=d===void 0?1:d,x=G.increasedLineWidthForHitTesting,A=x===void 0?0:x,N=G.shadowType,w=N===void 0?"outer":N,k=G.shadowColor,B=G.filter,_=B===void 0?[]:B,U=G.transformOrigin,H=[u,c,p];i.contentBounds.update(H,D);var I=t===L.POLYLINE||t===L.POLYGON||t===L.PATH?Math.SQRT2:.5,Y=T&&!T.isNone;if(Y){var X=((y||0)+(A||0))*I;D[0]+=X,D[1]+=X}if(i.renderBounds.update(H,D),k&&w&&w!=="inner"){var at=i.renderBounds,Mt=at.min,Ot=at.max,Xt=o,as=Xt.shadowBlur,ss=Xt.shadowOffsetX,us=Xt.shadowOffsetY,Ce=as||0,An=ss||0,On=us||0,ls=Mt[0]-Ce+An,cs=Ot[0]+Ce+An,fs=Mt[1]-Ce+On,hs=Ot[1]+Ce+On;Mt[0]=Math.min(Mt[0],ls),Ot[0]=Math.max(Ot[0],cs),Mt[1]=Math.min(Mt[1],fs),Ot[1]=Math.max(Ot[1],hs),i.renderBounds.setMinMax(Mt,Ot)}_.forEach(function(Ln){var In=Ln.name,Me=Ln.params;if(In==="blur"){var Dn=Me[0].value;i.renderBounds.update(i.renderBounds.center,ce(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[Dn,Dn,0]))}else if(In==="drop-shadow"){var Bn=Me[0].value,Gn=Me[1].value,Se=Me[2].value,_n=i.renderBounds,Ht=_n.min,Vt=_n.max,ds=Ht[0]-Se+Bn,gs=Vt[0]+Se+Bn,ys=Ht[1]-Se+Gn,ms=Vt[1]+Se+Gn;Ht[0]=Math.min(Ht[0],ds),Vt[0]=Math.max(Vt[0],gs),Ht[1]=Math.min(Ht[1],ys),Vt[1]=Math.max(Vt[1],ms),i.renderBounds.setMinMax(Ht,Vt)}}),e.geometry.dirty=!1;var ps=v<0,vs=E<0,bn=(ps?-1:1)*(U?Et(U[0],0,e,!0):0),kn=(vs?-1:1)*(U?Et(U[1],1,e,!0):0);(bn||kn)&&e.setOrigin(bn,kn)}},r.prototype.updateSizeAttenuation=function(e,t){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/t,e.nodeName===L.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/t)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===L.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))},r.prototype.isPropertyInheritable=function(e){var t=Dt[e];return t?t.inh:!1},r}(),xo=function(){function r(){this.parser=Lr,this.parserUnmemoize=Ze,this.parserWithCSSDisabled=null,this.mixer=We}return r.prototype.calculator=function(e,t,n,i){return gt(n)},r}(),To=function(){function r(){}return r.prototype.calculator=function(e,t,n,i,o){return n instanceof dt&&(n=null),o.sceneGraphService.updateDisplayObjectDependency(e,t,n,i),e==="clipPath"&&i.forEach(function(a){a.childNodes.length===0&&o.sceneGraphService.dirtifyToRoot(a)}),n},r}(),Po=function(){function r(){this.parser=Ft,this.parserWithCSSDisabled=Ft,this.mixer=Ui}return r.prototype.calculator=function(e,t,n,i){return n instanceof dt?n.value==="none"?ve:Rr:n},r}(),Co=function(){function r(){this.parser=Br}return r.prototype.calculator=function(e,t,n){return n instanceof dt?[]:n},r}();function $r(r){var e=r.parsedStyle.fontSize;return(0,tt.Z)(e)?null:e}var je=function(){function r(){this.parser=qt,this.parserUnmemoize=ae,this.parserWithCSSDisabled=null,this.mixer=We}return r.prototype.calculator=function(e,t,n,i,o){var a;if((0,Gt.Z)(n))return n;if(V.isRelativeUnit(n.unit)){var s=o.styleValueRegistry;if(n.unit===O.kPercentage)return 0;if(n.unit===O.kEms){if(i.parentNode){var u=$r(i.parentNode);if(u)return u*=n.value,u;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}else if(n.unit===O.kRems){if(!((a=i==null?void 0:i.ownerDocument)===null||a===void 0)&&a.documentElement){var u=$r(i.ownerDocument.documentElement);if(u)return u*=n.value,u;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}}else return n.value},r}(),Mo=function(){function r(){this.mixer=_r}return r.prototype.parser=function(e){var t=Dr((0,Gt.Z)(e)?[e]:e),n;return t.length===1?n=[t[0],t[0]]:n=[t[0],t[1]],n},r.prototype.calculator=function(e,t,n){return n.map(function(i){return i.value})},r}(),So=function(){function r(){this.mixer=_r}return r.prototype.parser=function(e){var t=Dr((0,Gt.Z)(e)?[e]:e),n;return t.length===1?n=[t[0],t[0],t[0],t[0]]:t.length===2?n=[t[0],t[1],t[0],t[1]]:t.length===3?n=[t[0],t[1],t[2],t[1]]:n=[t[0],t[1],t[2],t[3]],n},r.prototype.calculator=function(e,t,n){return n.map(function(i){return i.value})},r}(),No=function(){function r(){}return r.prototype.calculator=function(e,t,n,i){n instanceof dt&&(n=null);var o=n==null?void 0:n.cloneNode(!0);return o&&(o.style.isMarker=!0),o},r}(),wo=function(){function r(){this.mixer=We,this.parser=Ut,this.parserUnmemoize=te,this.parserWithCSSDisabled=null}return r.prototype.calculator=function(e,t,n){return n.value},r}(),Ro=function(){function r(){this.parser=Ut,this.parserUnmemoize=te,this.parserWithCSSDisabled=null,this.mixer=Ye(0,1)}return r.prototype.calculator=function(e,t,n){return n.value},r.prototype.postProcessor=function(e){var t=e.parsedStyle,n=t.offsetPath,i=t.offsetDistance;if(n){var o=n.nodeName;if(o===L.LINE||o===L.PATH||o===L.POLYLINE){var a=n.getPoint(i);a&&e.setLocalPosition(a.x,a.y)}}},r}(),Ao=function(){function r(){this.parser=Ut,this.parserUnmemoize=te,this.parserWithCSSDisabled=null,this.mixer=Ye(0,1)}return r.prototype.calculator=function(e,t,n){return n.value},r}(),Oo=function(){function r(){this.parser=Ve,this.parserWithCSSDisabled=Ve,this.mixer=oo}return r.prototype.calculator=function(e,t,n){return n instanceof dt&&n.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Jt(0,0,0,0)}:n},r}(),bo=function(){function r(){this.parser=Vr,this.mixer=ao}return r}(),ko=function(r){(0,g.ZT)(e,r);function e(){var t=r.apply(this,(0,g.ev)([],(0,g.CR)(arguments),!1))||this;return t.mixer=Ye(0,1/0),t}return e}(je),Lo=function(){function r(){}return r.prototype.calculator=function(e,t,n,i){return n instanceof dt?n.value==="unset"?"":n.value:"".concat(n)},r.prototype.postProcessor=function(e){e.nodeValue="".concat(e.parsedStyle.text)||""},r}(),Io=function(){function r(){}return r.prototype.calculator=function(e,t,n,i){var o=i.getAttribute("text");if(o){var a=o;n.value==="capitalize"?a=o.charAt(0).toUpperCase()+o.slice(1):n.value==="lowercase"?a=o.toLowerCase():n.value==="uppercase"&&(a=o.toUpperCase()),i.parsedStyle.text=a}return n.value},r}(),qe={},Do=0;function Bo(r,e){if(r){var t=typeof r=="string"?r:r.id||Do++;qe[t]&&qe[t].destroy(),qe[t]=e}}var xe=typeof window!="undefined"&&typeof window.document!="undefined";function Go(r){return!!r.getAttribute}function _o(r,e){for(var t=0,n=r.length;t<n;){var i=t+n>>>1;jr(r[i],e)<0?t=i+1:n=i}return t}function jr(r,e){var t=Number(r.parsedStyle.zIndex||0),n=Number(e.parsedStyle.zIndex||0);if(t===n){var i=r.parentNode;if(i){var o=i.childNodes||[];return o.indexOf(r)-o.indexOf(e)}}return t-n}function qr(r){var e,t=r;do{var n=(e=t.parsedStyle)===null||e===void 0?void 0:e.clipPath;if(n)return t;t=t.parentElement}while(t!==null);return null}var tn="px";function Fo(r,e,t){xe&&r.style&&(r.style.width=e+tn,r.style.height=t+tn)}function en(r,e){if(xe)return document.defaultView.getComputedStyle(r,null).getPropertyValue(e)}function Uo(r){var e=en(r,"width");return e==="auto"?r.offsetWidth:parseFloat(e)}function Zo(r){var e=en(r,"height");return e==="auto"?r.offsetHeight:parseFloat(e)}var Wo=1,Yo={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},tr=typeof performance=="object"&&performance.now?performance:Date;function Xo(r,e,t){r===void 0&&(r="auto");var n=!1,i=!1,o=!!e&&!e.isNone,a=!!t&&!t.isNone;return r==="visiblepainted"||r==="painted"||r==="auto"?(n=o,i=a):r==="visiblefill"||r==="fill"?n=!0:r==="visiblestroke"||r==="stroke"?i=!0:(r==="visible"||r==="all")&&(n=!0,i=!0),[n,i]}var Ho=1,Vo=function(){return Ho++},wt=typeof self=="object"&&self.self==self?self:typeof Z.g=="object"&&Z.g.global==Z.g?Z.g:{},Ko=Date.now(),zo=function(){return wt.performance&&typeof wt.performance.now=="function"?wt.performance.now():Date.now()-Ko},se={},rn=Date.now(),Jo=function(r){if(typeof r!="function")throw new TypeError(r+" is not a function");var e=Date.now(),t=e-rn,n=t>16?0:16-t,i=Vo();return se[i]=r,Object.keys(se).length>1||setTimeout(function(){rn=e;var o=se;se={},Object.keys(o).forEach(function(a){return o[a](zo())})},n),i},Qo=function(r){delete se[r]},$o=["","webkit","moz","ms","o"],nn=function(r){return typeof r!="string"?Jo:r===""?wt.requestAnimationFrame:wt[r+"RequestAnimationFrame"]},jo=function(r){return typeof r!="string"?Qo:r===""?wt.cancelAnimationFrame:wt[r+"CancelAnimationFrame"]||wt[r+"CancelRequestAnimationFrame"]},qo=function(r,e){for(var t=0;r[t]!==void 0;){if(e(r[t]))return r[t];t=t+1}},on=qo($o,function(r){return!!nn(r)}),er=nn(on),an=jo(on);wt.requestAnimationFrame=er,wt.cancelAnimationFrame=an;var ta=function(){function r(){this.callbacks=[]}return r.prototype.getCallbacksNum=function(){return this.callbacks.length},r.prototype.tapPromise=function(e,t){this.callbacks.push(t)},r.prototype.promise=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.all(this.callbacks.map(function(n){return n.apply(void 0,(0,g.ev)([],(0,g.CR)(e),!1))}))},r}(),ea=function(){function r(){this.callbacks=[]}return r.prototype.tapPromise=function(e,t){this.callbacks.push(t)},r.prototype.promise=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,g.mG)(this,void 0,void 0,function(){var n,i,o,a;return(0,g.Jh)(this,function(s){switch(s.label){case 0:return this.callbacks.length?[4,(a=this.callbacks)[0].apply(a,(0,g.ev)([],(0,g.CR)(e),!1))]:[3,6];case 1:n=s.sent(),i=0,s.label=2;case 2:return i<this.callbacks.length-1?(o=this.callbacks[i],[4,o(n)]):[3,5];case 3:n=s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2,n];case 6:return[2,null]}})})},r}(),pt=function(){function r(){this.callbacks=[]}return r.prototype.tap=function(e,t){this.callbacks.push(t)},r.prototype.call=function(){var e=arguments;this.callbacks.forEach(function(t){t.apply(void 0,e)})},r}(),rr=function(){function r(){this.callbacks=[]}return r.prototype.tap=function(e,t){this.callbacks.push(t)},r.prototype.call=function(){if(this.callbacks.length){for(var e=arguments,t=this.callbacks[0].apply(void 0,e),n=0;n<this.callbacks.length-1;n++){var i=this.callbacks[n];t=i(t)}return t}return null},r}(),ra=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],na=/([\"\'])[^\'\"]+\1/;function ia(r){for(var e=r.fontSize,t=e===void 0?16:e,n=r.fontFamily,i=n===void 0?"sans-serif":n,o=r.fontStyle,a=o===void 0?"normal":o,s=r.fontVariant,u=s===void 0?"normal":s,l=r.fontWeight,c=l===void 0?"normal":l,f=(0,Gt.Z)(t)&&"".concat(t,"px")||"16px",p=i.split(","),h=p.length-1;h>=0;h--){var v=p[h].trim();!na.test(v)&&ra.indexOf(v)<0&&(v='"'.concat(v,'"')),p[h]=v}return"".concat(a," ").concat(u," ").concat(c," ").concat(f," ").concat(p.join(","))}function nr(r,e,t){return R.identity(r),r[4]=Math.tan(e),r[1]=Math.tan(t),r}var ue=1e-5,oa=R.create(),it=R.create();function sn(r,e){if(r.length){var t=R.identity(oa);r.forEach(function(n){var i=n.t,o=n.d;if(i==="scale"){var a=(o==null?void 0:o.map(function(C){return Math.max(C.value,ue)}))||[1,1];R.fromScaling(it,[a[0],a[1],1])}else if(i==="scalex"){var a=(o==null?void 0:o.map(function(S){return Math.max(S.value,ue)}))||[1];R.fromScaling(it,[a[0],1,1])}else if(i==="scaley"){var a=(o==null?void 0:o.map(function(S){return Math.max(S.value,ue)}))||[1];R.fromScaling(it,[1,a[0],1])}else if(i==="scalez"){var a=(o==null?void 0:o.map(function(S){return Math.max(S.value,ue)}))||[1];R.fromScaling(it,[1,1,a[0]])}else if(i==="scale3d"){var a=(o==null?void 0:o.map(function(S){return Math.max(S.value,ue)}))||[1,1,1];R.fromScaling(it,[a[0],a[1],a[2]])}else if(i==="translate"){var s=o||[nt,nt];R.fromTranslation(it,[s[0].value,s[1].value,0])}else if(i==="translatex"){var s=o||[nt];R.fromTranslation(it,[s[0].value,0,0])}else if(i==="translatey"){var s=o||[nt];R.fromTranslation(it,[0,s[0].value,0])}else if(i==="translatez"){var s=o||[nt];R.fromTranslation(it,[0,0,s[0].value])}else if(i==="translate3d"){var s=o||[nt,nt,nt];R.fromTranslation(it,[s[0].value,s[1].value,s[2].value])}else if(i==="rotate"){var u=o||[Pt];R.fromZRotation(it,z(gt(u[0])))}else if(i==="rotatex"){var u=o||[Pt];R.fromXRotation(it,z(gt(u[0])))}else if(i==="rotatey"){var u=o||[Pt];R.fromYRotation(it,z(gt(u[0])))}else if(i==="rotatez"){var u=o||[Pt];R.fromZRotation(it,z(gt(u[0])))}else if(i==="rotate3d"){var u=o||[nt,nt,nt,Pt];R.fromRotation(it,z(gt(u[3])),[u[0].value,u[1].value,u[2].value])}else if(i==="skew"){var l=(o==null?void 0:o.map(function(C){return C.value}))||[0,0];nr(it,z(l[0]),z(l[1]))}else if(i==="skewx"){var l=(o==null?void 0:o.map(function(S){return S.value}))||[0];nr(it,z(l[0]),0)}else if(i==="skewy"){var l=(o==null?void 0:o.map(function(S){return S.value}))||[0];nr(it,0,z(l[0]))}else if(i==="matrix"){var c=(0,g.CR)(o.map(function(C){return C.value}),6),f=c[0],p=c[1],h=c[2],v=c[3],m=c[4],E=c[5];R.set(it,f,p,0,0,h,v,0,0,0,0,1,0,m,E,0,1)}else i==="matrix3d"&&R.set.apply(R,(0,g.ev)([it],(0,g.CR)(o.map(function(C){return C.value})),!1));R.mul(t,t,it)}),e.setLocalTransform(t)}else e.resetLocalTransform();return e.getLocalTransform()}var aa=function(){function r(){this.parser=Ke,this.parserUnmemoize=Kr,this.parserWithCSSDisabled=Kr,this.mixer=go}return r.prototype.calculator=function(e,t,n,i){return n instanceof dt?[]:n},r.prototype.postProcessor=function(e){var t=e.parsedStyle.transform;sn(t,e)},r}(),sa=function(){function r(){this.parser=Jr,this.parserUnmemoize=yo}return r.prototype.postProcessor=function(e){var t=e.parsedStyle.transformOrigin;t[0].unit===O.kPixels&&t[1].unit===O.kPixels?e.setOrigin(t[0].value,t[1].value):e.getGeometryBounds()},r}(),ua=function(){function r(){this.parser=Ut,this.parserUnmemoize=te}return r.prototype.calculator=function(e,t,n,i){return n.value},r.prototype.postProcessor=function(e){if(e.parentNode){var t=e.parentNode,n=t.renderable,i=t.sortable;n&&(n.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=jt.Z_INDEX_CHANGED)}},r}(),la=function(){function r(){}return r.prototype.update=function(e,t){var n=e.cx,i=n===void 0?0:n,o=e.cy,a=o===void 0?0:o,s=e.r,u=s===void 0?0:s;return{cx:i,cy:a,hwidth:u,hheight:u}},r}(),ca=function(){function r(){}return r.prototype.update=function(e,t){var n=e.cx,i=n===void 0?0:n,o=e.cy,a=o===void 0?0:o,s=e.rx,u=s===void 0?0:s,l=e.ry,c=l===void 0?0:l;return{cx:i,cy:a,hwidth:u,hheight:c}},r}(),fa=function(){function r(){}return r.prototype.update=function(e){var t=e.x1,n=e.y1,i=e.x2,o=e.y2,a=Math.min(t,i),s=Math.max(t,i),u=Math.min(n,o),l=Math.max(n,o),c=s-a,f=l-u,p=c/2,h=f/2;return{cx:a+p,cy:u+h,hwidth:p,hheight:h}},r}(),ha=function(){function r(){}return r.prototype.update=function(e){var t=e.d,n=t.rect,i=n.x,o=n.y,a=n.width,s=n.height,u=a/2,l=s/2;return{cx:i+u,cy:o+l,hwidth:u,hheight:l}},r}(),pa=function(){function r(){}return r.prototype.update=function(e){if(e.points&&(0,Vn.Z)(e.points.points)){var t=e.points.points,n=Math.min.apply(Math,(0,g.ev)([],(0,g.CR)(t.map(function(f){return f[0]})),!1)),i=Math.max.apply(Math,(0,g.ev)([],(0,g.CR)(t.map(function(f){return f[0]})),!1)),o=Math.min.apply(Math,(0,g.ev)([],(0,g.CR)(t.map(function(f){return f[1]})),!1)),a=Math.max.apply(Math,(0,g.ev)([],(0,g.CR)(t.map(function(f){return f[1]})),!1)),s=i-n,u=a-o,l=s/2,c=u/2;return{cx:n+l,cy:o+c,hwidth:l,hheight:c}}return{cx:0,cy:0,hwidth:0,hheight:0}},r}(),va=function(){function r(){}return r.prototype.update=function(e,t){var n=e.x,i=n===void 0?0:n,o=e.y,a=o===void 0?0:o,s=e.src,u=e.width,l=u===void 0?0:u,c=e.height,f=c===void 0?0:c,p=l,h=f;return s&&!(0,Rt.Z)(s)&&(p||(p=s.width,e.width=p),h||(h=s.height,e.height=h)),{cx:i+p/2,cy:a+h/2,hwidth:p/2,hheight:h/2}},r}(),da=function(){function r(e){this.globalRuntime=e}return r.prototype.isReadyToMeasure=function(e,t){var n=e.text,i=e.textAlign,o=e.textBaseline,a=e.fontSize,s=e.fontStyle,u=e.fontWeight,l=e.fontVariant,c=e.lineWidth;return M.enableCSSParsing?n&&a&&s&&u&&l&&i&&o&&!(0,tt.Z)(c):n},r.prototype.update=function(e,t){var n,i,o=e.text,a=e.textAlign,s=a===void 0?"start":a,u=e.lineWidth,l=u===void 0?1:u,c=e.textBaseline,f=c===void 0?"alphabetic":c,p=e.dx,h=p===void 0?0:p,v=e.dy,m=v===void 0?0:v,E=e.x,C=E===void 0?0:E,S=e.y,D=S===void 0?0:S;if(!this.isReadyToMeasure(e,t))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var G=(((i=(n=t==null?void 0:t.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,T=this.globalRuntime.textService.measureText(o,e,G);e.metrics=T;var d=T.width,y=T.height,x=T.lineHeight,A=T.fontProperties,N=d/2,w=y/2,k=C+N;s==="center"||s==="middle"?k+=l/2-N:(s==="right"||s==="end")&&(k+=l-N*2);var B=D-w;return f==="middle"?B+=w:f==="top"||f==="hanging"?B+=w*2:f==="alphabetic"?B+=this.globalRuntime.enableCSSParsing?x-A.ascent:0:(f==="bottom"||f==="ideographic")&&(B+=0),h&&(k+=h),m&&(B+=m),{cx:k,cy:B,hwidth:N,hheight:w}},r}(),ga=function(){function r(){}return r.prototype.update=function(e,t){return{cx:0,cy:0,hwidth:0,hheight:0}},r}(),ya=function(){function r(){}return r.prototype.update=function(e,t){var n=e.x,i=n===void 0?0:n,o=e.y,a=o===void 0?0:o,s=e.width,u=s===void 0?0:s,l=e.height,c=l===void 0?0:l;return{cx:i+u/2,cy:a+c/2,hwidth:u/2,hheight:c/2}},r}();function ma(r){return!!r.type}var Te=function(){function r(e){this.eventPhase=r.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ut,this.page=new ut,this.canvas=new ut,this.viewport=new ut,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return Object.defineProperty(r.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),r.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(r.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),r.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},r.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.initEvent=function(){},r.prototype.initUIEvent=function(){},r.prototype.clone=function(){throw new Error($)},r}(),un=function(r){(0,g.ZT)(e,r);function e(){var t=r.apply(this,(0,g.ev)([],(0,g.CR)(arguments),!1))||this;return t.client=new ut,t.movement=new ut,t.offset=new ut,t.global=new ut,t.screen=new ut,t}return Object.defineProperty(e.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),e.prototype.getModifierState=function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)},e.prototype.initMouseEvent=function(){throw new Error($)},e}(Te),ir=function(r){(0,g.ZT)(e,r);function e(){var t=r.apply(this,(0,g.ev)([],(0,g.CR)(arguments),!1))||this;return t.width=0,t.height=0,t.isPrimary=!1,t}return e.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},e.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},e.prototype.clone=function(){return this.manager.clonePointerEvent(this)},e}(un),or=function(r){(0,g.ZT)(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},e}(un),ft=function(r){(0,g.ZT)(e,r);function e(t,n){var i=r.call(this,null)||this;return i.type=t,i.detail=n,Object.assign(i,n),i}return e}(Te),ln=":",cn=function(){function r(){this.emitter=new Ne.Z}return r.prototype.on=function(e,t,n){return this.addEventListener(e,t,n),this},r.prototype.addEventListener=function(e,t,n){var i=(0,yr.Z)(n)&&n||(0,le.Z)(n)&&n.capture,o=(0,le.Z)(n)&&n.once,a=$t(t)?void 0:t,s=!1,u="";if(e.indexOf(ln)>-1){var l=(0,g.CR)(e.split(ln),2),c=l[0],f=l[1];e=f,u=c,s=!0}if(e=i?"".concat(e,"capture"):e,t=$t(t)?t:t.handleEvent,s){var p=t;t=function(){for(var h,v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];((h=v[0].target)===null||h===void 0?void 0:h.name)===u&&p.apply(void 0,(0,g.ev)([],(0,g.CR)(v),!1))}}return o?this.emitter.once(e,t,a):this.emitter.on(e,t,a),this},r.prototype.off=function(e,t,n){return e?this.removeEventListener(e,t,n):this.removeAllEventListeners(),this},r.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},r.prototype.removeEventListener=function(e,t,n){var i=(0,yr.Z)(n)&&n||(0,le.Z)(n)&&n.capture,o=$t(t)?void 0:t;return e=i?"".concat(e,"capture"):e,t=$t(t)?t:t==null?void 0:t.handleEvent,this.emitter.off(e,t,o),this},r.prototype.emit=function(e,t){this.dispatchEvent(new ft(e,t))},r.prototype.dispatchEvent=function(e,t){var n,i;if(t===void 0&&(t=!1),!ma(e))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var o;if(this.document?o=this:this.defaultView?o=this.defaultView:o=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView,o){if(e.manager=o.getEventService()||null,!e.manager)return!1;e.defaultPrevented=!1,e.path=[],t||(e.target=this),(i=e.manager)===null||i===void 0||i.dispatchEvent(e,e.type,t)}return!e.defaultPrevented},r}(),st=function(r){(0,g.ZT)(e,r);function e(){var t=r.call(this)||this;return t.shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.parentNode=null,t}return e.isNode=function(t){return!!t.childNodes},Object.defineProperty(e.prototype,"textContent",{get:function(){var t,n,i="";this.nodeName===L.TEXT&&(i+=this.style.text);try{for(var o=(0,g.XA)(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.nodeName===L.TEXT?i+=s.nodeValue:i+=s.textContent}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},set:function(t){var n=this;this.childNodes.slice().forEach(function(i){n.removeChild(i)}),this.nodeName===L.TEXT&&(this.style.text="".concat(t))},enumerable:!1,configurable:!0}),e.prototype.getRootNode=function(t){return t===void 0&&(t={}),this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this},e.prototype.hasChildNodes=function(){return this.childNodes.length>0},e.prototype.isDefaultNamespace=function(t){throw new Error($)},e.prototype.lookupNamespaceURI=function(t){throw new Error($)},e.prototype.lookupPrefix=function(t){throw new Error($)},e.prototype.normalize=function(){throw new Error($)},e.prototype.isEqualNode=function(t){return this===t},e.prototype.isSameNode=function(t){return this.isEqualNode(t)},Object.defineProperty(e.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),e.prototype.compareDocumentPosition=function(t){var n;if(t===this)return 0;for(var i=t,o=this,a=[i],s=[o];(n=i.parentNode)!==null&&n!==void 0?n:o.parentNode;)i=i.parentNode?(a.push(i.parentNode),i.parentNode):i,o=o.parentNode?(s.push(o.parentNode),o.parentNode):o;if(i!==o)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var u=a.length>s.length?a:s,l=u===a?s:a;if(u[u.length-l.length]===l[0])return u===a?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var c=u.length-l.length,f=l.length-1;f>=0;f--){var p=l[f],h=u[c+f];if(h!==p){var v=p.parentNode.childNodes;return v.indexOf(p)<v.indexOf(h)?l===a?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:u===a?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING},e.prototype.contain=function(t){return this.contains(t)},e.prototype.contains=function(t){for(var n=t;n&&this!==n;)n=n.parentNode;return!!n},e.prototype.getAncestor=function(t){for(var n=this;t>0&&n;)n=n.parentNode,t--;return n},e.prototype.forEach=function(t,n){n===void 0&&(n=!1),t(this)||(n?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(t)})},e.DOCUMENT_POSITION_DISCONNECTED=1,e.DOCUMENT_POSITION_PRECEDING=2,e.DOCUMENT_POSITION_FOLLOWING=4,e.DOCUMENT_POSITION_CONTAINS=8,e.DOCUMENT_POSITION_CONTAINED_BY=16,e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,e}(cn),Ea=2048,xa=function(){function r(e,t){var n=this;this.globalRuntime=e,this.context=t,this.emitter=new Ne.Z,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=R.create(),this.tmpVec3=P.Ue(),this.onPointerDown=function(i){var o=n.createPointerEvent(i);if(n.dispatchEvent(o,"pointerdown"),o.pointerType==="touch")n.dispatchEvent(o,"touchstart");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;n.dispatchEvent(o,a?"rightdown":"mousedown")}var s=n.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=o.composedPath(),n.freeEvent(o)},this.onPointerUp=function(i){var o,a=tr.now(),s=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);if(n.dispatchEvent(s,"pointerup"),s.pointerType==="touch")n.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var u=s.button===2;n.dispatchEvent(s,u?"rightup":"mouseup")}var l=n.trackingData(i.pointerId),c=n.findMountedTarget(l.pressTargetsByButton[i.button]),f=c;if(c&&!s.composedPath().includes(c)){for(var p=c;p&&!s.composedPath().includes(p);){if(s.currentTarget=p,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")n.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var u=s.button===2;n.notifyTarget(s,u?"rightupoutside":"mouseupoutside")}st.isNode(p)&&(p=p.parentNode)}delete l.pressTargetsByButton[i.button],f=p}if(f){var h=n.clonePointerEvent(s,"click");h.target=f,h.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:h.target,timeStamp:a});var v=n.context.renderingContext.root.ownerDocument.defaultView,m=l.clicksByButton[i.button];m.target===h.target&&a-m.timeStamp<v.dblClickSpeed?++m.clickCount:m.clickCount=1,m.target=h.target,m.timeStamp=a,h.detail=m.clickCount,!((o=s.detail)===null||o===void 0)&&o.preventClick||(!n.context.config.useNativeClickEvent&&(h.pointerType==="mouse"||h.pointerType==="touch")&&n.dispatchEvent(h,"click"),n.dispatchEvent(h,"pointertap")),n.freeEvent(h)}n.freeEvent(s)},this.onPointerMove=function(i){var o=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0),a=o.pointerType==="mouse"||o.pointerType==="pen",s=n.trackingData(i.pointerId),u=n.findMountedTarget(s.overTargets);if(s.overTargets&&u!==o.target){var l=i.type==="mousemove"?"mouseout":"pointerout",c=n.createPointerEvent(i,l,u||void 0);if(n.dispatchEvent(c,"pointerout"),a&&n.dispatchEvent(c,"mouseout"),!o.composedPath().includes(u)){var f=n.createPointerEvent(i,"pointerleave",u||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!o.composedPath().includes(f.target);)f.currentTarget=f.target,n.notifyTarget(f),a&&n.notifyTarget(f,"mouseleave"),st.isNode(f.target)&&(f.target=f.target.parentNode);n.freeEvent(f)}n.freeEvent(c)}if(u!==o.target){var p=i.type==="mousemove"?"mouseover":"pointerover",h=n.clonePointerEvent(o,p);n.dispatchEvent(h,"pointerover"),a&&n.dispatchEvent(h,"mouseover");for(var v=u&&st.isNode(u)&&u.parentNode;v&&v!==(st.isNode(n.rootTarget)&&n.rootTarget.parentNode)&&v!==o.target;)v=v.parentNode;var m=!v||v===(st.isNode(n.rootTarget)&&n.rootTarget.parentNode);if(m){var E=n.clonePointerEvent(o,"pointerenter");for(E.eventPhase=E.AT_TARGET;E.target&&E.target!==u&&E.target!==(st.isNode(n.rootTarget)&&n.rootTarget.parentNode);)E.currentTarget=E.target,n.notifyTarget(E),a&&n.notifyTarget(E,"mouseenter"),st.isNode(E.target)&&(E.target=E.target.parentNode);n.freeEvent(E)}n.freeEvent(h)}n.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&n.dispatchEvent(o,"touchmove"),a&&(n.dispatchEvent(o,"mousemove"),n.cursor=n.getCursor(o.target)),s.overTargets=o.composedPath(),n.freeEvent(o)},this.onPointerOut=function(i){var o=n.trackingData(i.pointerId);if(o.overTargets){var a=i.pointerType==="mouse"||i.pointerType==="pen",s=n.findMountedTarget(o.overTargets),u=n.createPointerEvent(i,"pointerout",s||void 0);n.dispatchEvent(u),a&&n.dispatchEvent(u,"mouseout");var l=n.createPointerEvent(i,"pointerleave",s||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(st.isNode(n.rootTarget)&&n.rootTarget.parentNode);)l.currentTarget=l.target,n.notifyTarget(l),a&&n.notifyTarget(l,"mouseleave"),st.isNode(l.target)&&(l.target=l.target.parentNode);o.overTargets=null,n.freeEvent(u),n.freeEvent(l)}n.cursor=null},this.onPointerOver=function(i){var o=n.trackingData(i.pointerId),a=n.createPointerEvent(i),s=a.pointerType==="mouse"||a.pointerType==="pen";n.dispatchEvent(a,"pointerover"),s&&n.dispatchEvent(a,"mouseover"),a.pointerType==="mouse"&&(n.cursor=n.getCursor(a.target));var u=n.clonePointerEvent(a,"pointerenter");for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==(st.isNode(n.rootTarget)&&n.rootTarget.parentNode);)u.currentTarget=u.target,n.notifyTarget(u),s&&n.notifyTarget(u,"mouseenter"),st.isNode(u.target)&&(u.target=u.target.parentNode);o.overTargets=a.composedPath(),n.freeEvent(a),n.freeEvent(u)},this.onPointerUpOutside=function(i){var o=n.trackingData(i.pointerId),a=n.findMountedTarget(o.pressTargetsByButton[i.button]),s=n.createPointerEvent(i);if(a){for(var u=a;u;)s.currentTarget=u,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&n.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),st.isNode(u)&&(u=u.parentNode);delete o.pressTargetsByButton[i.button]}n.freeEvent(s)},this.onWheel=function(i){var o=n.createWheelEvent(i);n.dispatchEvent(o),n.freeEvent(o)},this.onClick=function(i){if(n.context.config.useNativeClickEvent){var o=n.createPointerEvent(i);n.dispatchEvent(o),n.freeEvent(o)}},this.onPointerCancel=function(i){var o=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);n.dispatchEvent(o),n.freeEvent(o)}}return r.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},r.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},r.prototype.getScale=function(){var e=this.context.contextService.getBoundingClientRect(),t=1,n=1,i=this.context.contextService.getDomElement();if(i&&e){var o=i.offsetWidth,a=i.offsetHeight;o&&a&&(t=e.width/o,n=e.height/a)}return{scaleX:t,scaleY:n,bbox:e}},r.prototype.client2Viewport=function(e){var t=this.getScale(),n=t.scaleX,i=t.scaleY,o=t.bbox;return new ut((e.x-((o==null?void 0:o.left)||0))/n,(e.y-((o==null?void 0:o.top)||0))/i)},r.prototype.viewport2Client=function(e){var t=this.getScale(),n=t.scaleX,i=t.scaleY,o=t.bbox;return new ut((e.x+((o==null?void 0:o.left)||0))*n,(e.y+((o==null?void 0:o.top)||0))*i)},r.prototype.viewport2Canvas=function(e){var t=e.x,n=e.y,i=this.rootTarget.defaultView,o=i.getCamera(),a=this.context.config,s=a.width,u=a.height,l=o.getPerspectiveInverse(),c=o.getWorldTransform(),f=R.multiply(this.tmpMatrix,c,l),p=P.t8(this.tmpVec3,t/s*2-1,(1-n/u)*2-1,0);return P.fF(p,p,f),new ut(p[0],p[1])},r.prototype.canvas2Viewport=function(e){var t=this.rootTarget.defaultView,n=t.getCamera(),i=n.getPerspective(),o=n.getViewTransform(),a=R.multiply(this.tmpMatrix,i,o),s=P.t8(this.tmpVec3,e.x,e.y,0);P.fF(this.tmpVec3,this.tmpVec3,a);var u=this.context.config,l=u.width,c=u.height;return new ut((s[0]+1)/2*l,(1-(s[1]+1)/2)*c)},r.prototype.setPickHandler=function(e){this.pickHandler=e},r.prototype.addEventMapping=function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(n,i){return n.priority-i.priority})},r.prototype.mapEvent=function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,i=t.length;n<i;n++)t[n].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type))}},r.prototype.dispatchEvent=function(e,t,n){if(!n)e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t);else{e.eventPhase=e.AT_TARGET;var i=this.rootTarget.defaultView||null;e.currentTarget=i,this.notifyListeners(e,t)}this.emitter.emit(t||e.type,e)},r.prototype.propagate=function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var i=n.length-1;i>=1;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){var o=n.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var i=o+1;i<n.length;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}},r.prototype.propagationPath=function(e){var t=[e],n=this.rootTarget.defaultView||null;if(n&&n===e)return t.unshift(n.document),t;for(var i=0;i<Ea&&e!==this.rootTarget;i++)st.isNode(e)&&e.parentNode&&(t.push(e.parentNode),e=e.parentNode);return n&&t.push(n),t},r.prototype.hitTest=function(e){var t=e.viewportX,n=e.viewportY,i=this.context.config,o=i.width,a=i.height,s=i.disableHitTesting;return t<0||n<0||t>o||n>a?null:!s&&this.pickHandler(e)||this.rootTarget||null},r.prototype.isNativeEventFromCanvas=function(e,t){var n=t==null?void 0:t.target;if(n!=null&&n.shadowRoot&&(n=t.composedPath()[0]),n){if(n===e)return!0;if(e&&e.contains)return e.contains(n)}return t!=null&&t.composedPath?t.composedPath().indexOf(e)>-1:!1},r.prototype.getExistedHTML=function(e){var t,n;if(e.nativeEvent.composedPath)try{for(var i=(0,g.XA)(e.nativeEvent.composedPath()),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.nativeHTMLMap.get(a);if(s)return s}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return null},r.prototype.pickTarget=function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})},r.prototype.createPointerEvent=function(e,t,n,i){var o=this.allocateEvent(ir);this.copyPointerData(e,o),this.copyMouseData(e,o),this.copyData(e,o),o.nativeEvent=e.nativeEvent,o.originalEvent=e;var a=this.getExistedHTML(o),s=this.context.contextService.getDomElement();return o.target=n!=null?n:a||this.isNativeEventFromCanvas(s,o.nativeEvent)&&this.pickTarget(o)||i,typeof t=="string"&&(o.type=t),o},r.prototype.createWheelEvent=function(e){var t=this.allocateEvent(or);this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e;var n=this.getExistedHTML(t),i=this.context.contextService.getDomElement();return t.target=n||this.isNativeEventFromCanvas(i,t.nativeEvent)&&this.pickTarget(t),t},r.prototype.trackingData=function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]},r.prototype.cloneWheelEvent=function(e){var t=this.allocateEvent(or);return t.nativeEvent=e.nativeEvent,t.originalEvent=e.originalEvent,this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.target=e.target,t.path=e.composedPath().slice(),t.type=e.type,t},r.prototype.clonePointerEvent=function(e,t){var n=this.allocateEvent(ir);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t!=null?t:n.type,n},r.prototype.copyPointerData=function(e,t){t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist},r.prototype.copyMouseData=function(e,t){t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.client.copyFrom(e.client),t.movement.copyFrom(e.movement),t.canvas.copyFrom(e.canvas),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global),t.offset.copyFrom(e.offset)},r.prototype.copyWheelData=function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ},r.prototype.copyData=function(e,t){t.isTrusted=e.isTrusted,t.timeStamp=tr.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.page.copyFrom(e.page),t.viewport.copyFrom(e.viewport)},r.prototype.allocateEvent=function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t},r.prototype.freeEvent=function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)},r.prototype.notifyTarget=function(e,t){t=t!=null?t:e.type;var n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)},r.prototype.notifyListeners=function(e,t){var n=e.currentTarget.emitter,i=n._events[t];if(i)if("fn"in i)i.once&&n.removeListener(t,i.fn,void 0,!0),i.fn.call(e.currentTarget||i.context,e);else for(var o=0;o<i.length&&!e.propagationImmediatelyStopped;o++)i[o].once&&n.removeListener(t,i[o].fn,void 0,!0),i[o].fn.call(e.currentTarget||i[o].context,e)},r.prototype.findMountedTarget=function(e){if(!e)return null;for(var t=e[e.length-1],n=e.length-2;n>=0;n--){var i=e[n];if(i===this.rootTarget||st.isNode(i)&&i.parentNode===t)t=e[n];else break}return t},r.prototype.getCursor=function(e){for(var t=e;t;){var n=Go(t)&&t.getAttribute("cursor");if(n)return n;t=st.isNode(t)&&t.parentNode}},r}(),Ta=function(){function r(){}return r.prototype.getOrCreateCanvas=function(e,t){if(this.canvas)return this.canvas;if(e||M.offscreenCanvas)this.canvas=e||M.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,g.pi)({willReadFrequently:!0},t));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,g.pi)({willReadFrequently:!0},t)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,g.pi)({willReadFrequently:!0},t))}return this.canvas.width=10,this.canvas.height=10,this.canvas},r.prototype.getOrCreateContext=function(e,t){return this.context?this.context:(this.getOrCreateCanvas(e,t),this.context)},r}(),Wt;(function(r){r[r.CAMERA_CHANGED=0]="CAMERA_CHANGED",r[r.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",r[r.NONE=2]="NONE"})(Wt||(Wt={}));var Pa=function(){function r(e,t){this.globalRuntime=e,this.context=t,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new pt,initAsync:new ta,dirtycheck:new rr,cull:new rr,beginFrame:new pt,beforeRender:new pt,render:new pt,afterRender:new pt,endFrame:new pt,destroy:new pt,pick:new ea,pickSync:new rr,pointerDown:new pt,pointerUp:new pt,pointerMove:new pt,pointerOut:new pt,pointerOver:new pt,pointerWheel:new pt,pointerCancel:new pt,click:new pt}}return r.prototype.init=function(e){var t=this,n=(0,g.pi)((0,g.pi)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(n,t.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){t.inited=!0,e()})},r.prototype.getStats=function(){return this.stats},r.prototype.disableDirtyRectangleRendering=function(){var e=this.context.config.renderer,t=e.getConfig().enableDirtyRectangleRendering;return!t||this.context.renderingContext.renderReasons.has(Wt.CAMERA_CHANGED)},r.prototype.render=function(e,t,n){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=o.renderReasons.size===1&&o.renderReasons.has(Wt.CAMERA_CHANGED),s=!e.disableRenderHooks||!(e.disableRenderHooks&&a);s&&this.renderDisplayObject(o.root,e,o),this.hooks.beginFrame.call(t),s&&o.renderListCurrentFrame.forEach(function(u){i.hooks.beforeRender.call(u),i.hooks.render.call(u),i.hooks.afterRender.call(u)}),this.hooks.endFrame.call(t),o.renderListCurrentFrame=[],o.renderReasons.clear(),n()}},r.prototype.renderDisplayObject=function(e,t,n){var i=this,o=t.renderer.getConfig(),a=o.enableDirtyCheck,s=o.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(e);var u=e.renderable,l=a?u.dirty||n.dirtyRectangleRenderingDisabled?e:null:e;if(l){var c=s?this.hooks.cull.call(l,this.context.camera):l;c&&(this.stats.rendered++,n.renderListCurrentFrame.push(c))}e.renderable.dirty=!1,e.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var f=e.sortable;f.dirty&&(this.sort(e,f),f.dirty=!1,f.dirtyChildren=[],f.dirtyReason=void 0),(f.sorted||e.childNodes).forEach(function(p){i.renderDisplayObject(p,t,n)})},r.prototype.sort=function(e,t){t.sorted&&t.dirtyReason!==jt.Z_INDEX_CHANGED?t.dirtyChildren.forEach(function(n){var i=e.childNodes.indexOf(n);if(i===-1){var o=t.sorted.indexOf(n);o>=0&&t.sorted.splice(o,1)}else if(t.sorted.length===0)t.sorted.push(n);else{var a=_o(t.sorted,n);t.sorted.splice(a,0,n)}}):t.sorted=e.childNodes.slice().sort(jr)},r.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},r.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(Wt.DISPLAY_OBJECT_CHANGED)},r}(),Ca=/\[\s*(.*)=(.*)\s*\]/,Ma=function(){function r(){}return r.prototype.selectOne=function(e,t){var n=this;if(e.startsWith("."))return t.find(function(s){return((s==null?void 0:s.classList)||[]).indexOf(n.getIdOrClassname(e))>-1});if(e.startsWith("#"))return t.find(function(s){return s.id===n.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),o=i.name,a=i.value;return o?t.find(function(s){return t!==s&&(o==="name"?s.name===a:n.attributeToString(s,o)===a)}):null}else return t.find(function(s){return t!==s&&s.nodeName===e})},r.prototype.selectAll=function(e,t){var n=this;if(e.startsWith("."))return t.findAll(function(s){return t!==s&&((s==null?void 0:s.classList)||[]).indexOf(n.getIdOrClassname(e))>-1});if(e.startsWith("#"))return t.findAll(function(s){return t!==s&&s.id===n.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),o=i.name,a=i.value;return o?t.findAll(function(s){return t!==s&&(o==="name"?s.name===a:n.attributeToString(s,o)===a)}):[]}else return t.findAll(function(s){return t!==s&&s.nodeName===e})},r.prototype.is=function(e,t){if(e.startsWith("."))return t.className===this.getIdOrClassname(e);if(e.startsWith("#"))return t.id===this.getIdOrClassname(e);if(e.startsWith("[")){var n=this.getAttribute(e),i=n.name,o=n.value;return i==="name"?t.name===o:this.attributeToString(t,i)===o}else return t.nodeName===e},r.prototype.getIdOrClassname=function(e){return e.substring(1)},r.prototype.getAttribute=function(e){var t=e.match(Ca),n="",i="";return t&&t.length>2&&(n=t[1].replace(/"/g,""),i=t[2].replace(/"/g,"")),{name:n,value:i}},r.prototype.attributeToString=function(e,t){if(!e.getAttribute)return"";var n=e.getAttribute(t);return(0,tt.Z)(n)?"":n.toString?n.toString():""},r}(),Bt=function(r){(0,g.ZT)(e,r);function e(t,n,i,o,a,s,u,l){var c=r.call(this,null)||this;return c.relatedNode=n,c.prevValue=i,c.newValue=o,c.attrName=a,c.attrChange=s,c.prevParsedValue=u,c.newParsedValue=l,c.type=t,c}return e.ADDITION=2,e.MODIFICATION=1,e.REMOVAL=3,e}(Te),ot;(function(r){r.REPARENT="reparent",r.DESTROY="destroy",r.ATTR_MODIFIED="DOMAttrModified",r.INSERTED="DOMNodeInserted",r.REMOVED="removed",r.MOUNTED="DOMNodeInsertedIntoDocument",r.UNMOUNTED="DOMNodeRemovedFromDocument",r.BOUNDS_CHANGED="bounds-changed",r.CULLED="culled"})(ot||(ot={}));function fn(r){var e=r.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}var Sa=new Bt(ot.REPARENT,null,"","","",0,"",""),Na=function(){function r(e){var t=this;this.runtime=e,this.pendingEvents=[],this.boundsChangedEvent=new ft(ot.BOUNDS_CHANGED),this.rotate=function(){var n=W.Ue();return function(i,o,a,s,u){a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=!0),typeof o=="number"&&(o=P.al(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)t.rotateLocal(i,o);else{var c=W.Ue();W.Su(c,o[0],o[1],o[2]);var f=t.getRotation(i),p=t.getRotation(i.parentNode);W.JG(n,p),W.U_(n,n),W.Jp(c,n,c),W.Jp(l.localRotation,c,f),W.Fv(l.localRotation,l.localRotation),u&&t.dirtifyLocal(i,l)}}}(),this.rotateLocal=function(){var n=W.Ue();return function(i,o,a,s,u){a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=!0),typeof o=="number"&&(o=P.al(o,a,s));var l=i.transformable;W.Su(n,o[0],o[1],o[2]),W.dC(l.localRotation,l.localRotation,n),u&&t.dirtifyLocal(i,l)}}(),this.setEulerAngles=function(){var n=W.Ue();return function(i,o,a,s,u){a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=!0),typeof o=="number"&&(o=P.al(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)t.setLocalEulerAngles(i,o);else{W.Su(l.localRotation,o[0],o[1],o[2]);var c=t.getRotation(i.parentNode);W.JG(n,W.U_(W.Ue(),c)),W.dC(l.localRotation,l.localRotation,n),u&&t.dirtifyLocal(i,l)}}}(),this.translateLocal=function(){return function(n,i,o,a,s){o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=!0),typeof i=="number"&&(i=P.al(i,o,a));var u=n.transformable;P.fS(i,P.Ue())||(P.VC(i,i,u.localRotation),P.IH(u.localPosition,u.localPosition,i),s&&t.dirtifyLocal(n,u))}}(),this.setPosition=function(){var n=R.create(),i=P.Ue();return function(o,a,s){s===void 0&&(s=!0);var u=o.transformable;if(i[0]=a[0],i[1]=a[1],i[2]=a[2]||0,!P.fS(t.getPosition(o),i)){if(P.JG(u.position,i),o.parentNode===null||!o.parentNode.transformable)P.JG(u.localPosition,i);else{var l=o.parentNode.transformable;R.copy(n,l.worldTransform),R.invert(n,n),P.fF(u.localPosition,i,n)}s&&t.dirtifyLocal(o,u)}}}(),this.setLocalPosition=function(){var n=P.Ue();return function(i,o,a){a===void 0&&(a=!0);var s=i.transformable;n[0]=o[0],n[1]=o[1],n[2]=o[2]||0,!P.fS(s.localPosition,n)&&(P.JG(s.localPosition,n),a&&t.dirtifyLocal(i,s))}}(),this.translate=function(){var n=P.Ue(),i=P.Ue(),o=P.Ue();return function(a,s,u,l,c){u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=!0),typeof s=="number"&&(s=P.t8(i,s,u,l)),!P.fS(s,n)&&(P.IH(o,t.getPosition(a),s),t.setPosition(a,o,c))}}(),this.setRotation=function(){var n=W.Ue();return function(i,o,a,s,u,l){l===void 0&&(l=!0);var c=i.transformable;if(typeof o=="number"&&(o=W.al(o,a,s,u)),i.parentNode===null||!i.parentNode.transformable)t.setLocalRotation(i,o);else{var f=t.getRotation(i.parentNode);W.JG(n,f),W.U_(n,n),W.Jp(c.localRotation,n,o),W.Fv(c.localRotation,c.localRotation),l&&t.dirtifyLocal(i,c)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var n=R.create(),i=P.Ue(),o=W.al(0,0,0,1);return function(a){var s=a.localSkew[0]!==0||a.localSkew[1]!==0;if(s){if(R.fromRotationTranslationScaleOrigin(a.localTransform,a.localRotation,a.localPosition,P.al(1,1,1),a.origin),a.localSkew[0]!==0||a.localSkew[1]!==0){var u=R.identity(n);u[4]=Math.tan(a.localSkew[0]),u[1]=Math.tan(a.localSkew[1]),R.multiply(a.localTransform,a.localTransform,u)}var l=R.fromRotationTranslationScaleOrigin(n,o,i,a.localScale,a.origin);R.multiply(a.localTransform,a.localTransform,l)}else R.fromRotationTranslationScaleOrigin(a.localTransform,a.localRotation,a.localPosition,a.localScale,a.origin)}}()}return r.prototype.matches=function(e,t){return this.runtime.sceneGraphSelector.is(e,t)},r.prototype.querySelector=function(e,t){return this.runtime.sceneGraphSelector.selectOne(e,t)},r.prototype.querySelectorAll=function(e,t){return this.runtime.sceneGraphSelector.selectAll(e,t)},r.prototype.attach=function(e,t,n){var i,o=!1;e.parentNode&&(o=e.parentNode!==t,this.detach(e)),e.parentNode=t,(0,tt.Z)(n)?e.parentNode.childNodes.push(e):e.parentNode.childNodes.splice(n,0,e);var a=t.sortable;(!((i=a==null?void 0:a.sorted)===null||i===void 0)&&i.length||e.parsedStyle.zIndex)&&(a.dirtyChildren.indexOf(e)===-1&&a.dirtyChildren.push(e),a.dirty=!0,a.dirtyReason=jt.ADDED);var s=e.transformable;s&&this.dirtifyWorld(e,s),s.frozen&&this.unfreezeParentToRoot(e),o&&e.dispatchEvent(Sa)},r.prototype.detach=function(e){var t,n;if(e.parentNode){var i=e.transformable,o=e.parentNode.sortable;(!((t=o==null?void 0:o.sorted)===null||t===void 0)&&t.length||!((n=e.style)===null||n===void 0)&&n.zIndex)&&(o.dirtyChildren.indexOf(e)===-1&&o.dirtyChildren.push(e),o.dirty=!0,o.dirtyReason=jt.REMOVED);var a=e.parentNode.childNodes.indexOf(e);a>-1&&e.parentNode.childNodes.splice(a,1),i&&this.dirtifyWorld(e,i),e.parentNode=null}},r.prototype.getOrigin=function(e){return e.getGeometryBounds(),e.transformable.origin},r.prototype.setOrigin=function(e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=0),typeof t=="number"&&(t=[t,n,i]);var o=e.transformable;if(!(t[0]===o.origin[0]&&t[1]===o.origin[1]&&t[2]===o.origin[2])){var a=o.origin;a[0]=t[0],a[1]=t[1],a[2]=t[2]||0,this.dirtifyLocal(e,o)}},r.prototype.setLocalEulerAngles=function(e,t,n,i,o){n===void 0&&(n=0),i===void 0&&(i=0),o===void 0&&(o=!0),typeof t=="number"&&(t=P.al(t,n,i));var a=e.transformable;W.Su(a.localRotation,t[0],t[1],t[2]),o&&this.dirtifyLocal(e,a)},r.prototype.scaleLocal=function(e,t,n){n===void 0&&(n=!0);var i=e.transformable;P.Jp(i.localScale,i.localScale,P.al(t[0],t[1],t[2]||1)),n&&this.dirtifyLocal(e,i)},r.prototype.setLocalScale=function(e,t,n){n===void 0&&(n=!0);var i=e.transformable,o=P.al(t[0],t[1],t[2]||i.localScale[2]);P.fS(o,i.localScale)||(P.JG(i.localScale,o),n&&this.dirtifyLocal(e,i))},r.prototype.setLocalRotation=function(e,t,n,i,o,a){a===void 0&&(a=!0),typeof t=="number"&&(t=W.al(t,n,i,o));var s=e.transformable;W.JG(s.localRotation,t),a&&this.dirtifyLocal(e,s)},r.prototype.setLocalSkew=function(e,t,n){typeof t=="number"&&(t=cr.al(t,n));var i=e.transformable;cr.JG(i.localSkew,t),this.dirtifyLocal(e,i)},r.prototype.dirtifyLocal=function(e,t){t.localDirtyFlag||(t.localDirtyFlag=!0,t.dirtyFlag||this.dirtifyWorld(e,t))},r.prototype.dirtifyWorld=function(e,t){t.dirtyFlag||this.unfreezeParentToRoot(e),this.dirtifyWorldInternal(e,t),this.dirtifyToRoot(e,!0)},r.prototype.triggerPendingEvents=function(){var e=this,t=new Set,n=function(i,o){i.isConnected&&!t.has(i.entity)&&(e.boundsChangedEvent.detail=o,e.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(e.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(e.boundsChangedEvent,!0),t.add(i.entity))};this.pendingEvents.forEach(function(i){var o=(0,g.CR)(i,2),a=o[0],s=o[1];s.affectChildren?a.forEach(function(u){n(u,s)}):n(a,s)}),this.clearPendingEvents(),t.clear()},r.prototype.clearPendingEvents=function(){this.pendingEvents=[]},r.prototype.dirtifyToRoot=function(e,t){t===void 0&&(t=!1);var n=e;for(n.renderable&&(n.renderable.dirty=!0);n;)fn(n),n=n.parentNode;t&&e.forEach(function(i){fn(i)}),this.informDependentDisplayObjects(e),this.pendingEvents.push([e,{affectChildren:t}])},r.prototype.updateDisplayObjectDependency=function(e,t,n,i){if(t&&t!==n){var o=this.displayObjectDependencyMap.get(t);if(o&&o[e]){var a=o[e].indexOf(i);o[e].splice(a,1)}}if(n){var s=this.displayObjectDependencyMap.get(n);s||(this.displayObjectDependencyMap.set(n,{}),s=this.displayObjectDependencyMap.get(n)),s[e]||(s[e]=[]),s[e].push(i)}},r.prototype.informDependentDisplayObjects=function(e){var t=this,n=this.displayObjectDependencyMap.get(e);n&&Object.keys(n).forEach(function(i){n[i].forEach(function(o){t.dirtifyToRoot(o,!0),o.dispatchEvent(new Bt(ot.ATTR_MODIFIED,o,t,t,i,Bt.MODIFICATION,t,t)),o.isCustomElement&&o.isConnected&&o.attributeChangedCallback&&o.attributeChangedCallback(i,t,t)})})},r.prototype.getPosition=function(e){var t=e.transformable;return R.getTranslation(t.position,this.getWorldTransform(e,t))},r.prototype.getRotation=function(e){var t=e.transformable;return R.getRotation(t.rotation,this.getWorldTransform(e,t))},r.prototype.getScale=function(e){var t=e.transformable;return R.getScaling(t.scaling,this.getWorldTransform(e,t))},r.prototype.getWorldTransform=function(e,t){return t===void 0&&(t=e.transformable),!t.localDirtyFlag&&!t.dirtyFlag||(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.sync(e,t)),t.worldTransform},r.prototype.getLocalPosition=function(e){return e.transformable.localPosition},r.prototype.getLocalRotation=function(e){return e.transformable.localRotation},r.prototype.getLocalScale=function(e){return e.transformable.localScale},r.prototype.getLocalSkew=function(e){return e.transformable.localSkew},r.prototype.getLocalTransform=function(e){var t=e.transformable;return t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.localTransform},r.prototype.setLocalTransform=function(e,t){var n=R.getTranslation(P.Ue(),t),i=R.getRotation(W.Ue(),t),o=R.getScaling(P.Ue(),t);this.setLocalScale(e,o,!1),this.setLocalPosition(e,n,!1),this.setLocalRotation(e,i,void 0,void 0,void 0,!1),this.dirtifyLocal(e,e.transformable)},r.prototype.resetLocalTransform=function(e){this.setLocalScale(e,[1,1,1]),this.setLocalPosition(e,[0,0,0]),this.setLocalEulerAngles(e,[0,0,0]),this.setLocalSkew(e,[0,0])},r.prototype.getTransformedGeometryBounds=function(e,t,n){t===void 0&&(t=!1);var i=this.getGeometryBounds(e,t);if(ct.isEmpty(i))return null;var o=n||new ct;return o.setFromTransformedAABB(i,this.getWorldTransform(e)),o},r.prototype.getGeometryBounds=function(e,t){t===void 0&&(t=!1);var n=e.geometry;n.dirty&&M.styleValueRegistry.updateGeometry(e);var i=t?n.renderBounds:n.contentBounds||null;return i||new ct},r.prototype.getBounds=function(e,t){var n=this;t===void 0&&(t=!1);var i=e.renderable;if(!i.boundsDirty&&!t&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&t&&i.renderBounds)return i.renderBounds;var o=t?i.renderBounds:i.bounds,a=this.getTransformedGeometryBounds(e,t,o),s=e.childNodes;if(s.forEach(function(c){var f=n.getBounds(c,t);f&&(a?a.add(f):(a=o||new ct,a.update(f.center,f.halfExtents)))}),a||(a=new ct),t){var u=qr(e);if(u){var l=u.parsedStyle.clipPath.getBounds(t);a?l&&(a=l.intersection(a)):a.update(l.center,l.halfExtents)}}return t?(i.renderBounds=a,i.renderBoundsDirty=!1):(i.bounds=a,i.boundsDirty=!1),a},r.prototype.getLocalBounds=function(e){if(e.parentNode){var t=R.create();e.parentNode.transformable&&(t=R.invert(R.create(),this.getWorldTransform(e.parentNode)));var n=this.getBounds(e);if(!ct.isEmpty(n)){var i=new ct;return i.setFromTransformedAABB(n,t),i}}return this.getBounds(e)},r.prototype.getBoundingClientRect=function(e){var t,n,i,o=this.getGeometryBounds(e);ct.isEmpty(o)||(i=new ct,i.setFromTransformedAABB(o,this.getWorldTransform(e)));var a=(n=(t=e.ownerDocument)===null||t===void 0?void 0:t.defaultView)===null||n===void 0?void 0:n.getContextService().getBoundingClientRect();if(i){var s=(0,g.CR)(i.getMin(),2),u=s[0],l=s[1],c=(0,g.CR)(i.getMax(),2),f=c[0],p=c[1];return new Jt(u+((a==null?void 0:a.left)||0),l+((a==null?void 0:a.top)||0),f-u,p-l)}return new Jt((a==null?void 0:a.left)||0,(a==null?void 0:a.top)||0,0,0)},r.prototype.dirtifyWorldInternal=function(e,t){var n=this;if(!t.dirtyFlag){t.dirtyFlag=!0,t.frozen=!1,e.childNodes.forEach(function(o){var a=o.transformable;a.dirtyFlag||n.dirtifyWorldInternal(o,a)});var i=e.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},r.prototype.syncHierarchy=function(e){var t=e.transformable;if(!t.frozen){t.frozen=!0,(t.localDirtyFlag||t.dirtyFlag)&&this.sync(e,t);for(var n=e.childNodes,i=0;i<n.length;i++)this.syncHierarchy(n[i])}},r.prototype.sync=function(e,t){if(t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.dirtyFlag){var n=e.parentNode,i=n&&n.transformable;n===null||!i?R.copy(t.worldTransform,t.localTransform):R.multiply(t.worldTransform,i.worldTransform,t.localTransform),t.dirtyFlag=!1}},r.prototype.unfreezeParentToRoot=function(e){for(var t=e.parentNode;t;){var n=t.transformable;n&&(n.frozen=!1),t=t.parentNode}},r}(),Yt={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},hn=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,wa=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,Ra=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,Aa=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,Oa=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,ba=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,ka=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,La=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,Ia=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,Da=new RegExp("".concat(wa.source,"|").concat(Aa.source,"|").concat(ba.source,"|").concat(La.source)),Ba=new RegExp("".concat(Ra.source,"|").concat(Oa.source,"|").concat(ka.source,"|").concat(Ia.source)),Ga=function(){function r(e){var t=this;this.runtime=e,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(n,i){return t.isBreakingSpace(i)?!1:!!(n&&(Ba.exec(i)||Da.exec(n)))},this.trimByKinsokuShorui=function(n){var i=(0,g.ev)([],(0,g.CR)(n),!1),o=i[i.length-2];if(!o)return n;var a=o[o.length-1];return i[i.length-2]=o.slice(0,-1),i[i.length-1]=a+i[i.length-1],i}}return r.prototype.measureFont=function(e,t){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var n={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(t),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(t,{willReadFrequently:!0});o.font=e;var a=Yt.MetricsString+Yt.BaselineSymbol,s=Math.ceil(o.measureText(a).width),u=Math.ceil(o.measureText(Yt.BaselineSymbol).width),l=Yt.HeightMultiplier*u;u=u*Yt.BaselineMultiplier|0,i.width=s,i.height=l,o.fillStyle="#f00",o.fillRect(0,0,s,l),o.font=e,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(a,0,u);var c=o.getImageData(0,0,s||1,l||1).data,f=c.length,p=s*4,h=0,v=0,m=!1;for(h=0;h<u;++h){for(var E=0;E<p;E+=4)if(c[v+E]!==255){m=!0;break}if(!m)v+=p;else break}for(n.ascent=u-h,v=f-p,m=!1,h=l;h>u;--h){for(var E=0;E<p;E+=4)if(c[v+E]!==255){m=!0;break}if(!m)v-=p;else break}return n.descent=h-u,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[e]=n,n},r.prototype.measureText=function(e,t,n){var i=t.fontSize,o=i===void 0?16:i,a=t.wordWrap,s=a===void 0?!1:a,u=t.lineHeight,l=t.lineWidth,c=l===void 0?1:l,f=t.textBaseline,p=f===void 0?"alphabetic":f,h=t.textAlign,v=h===void 0?"start":h,m=t.letterSpacing,E=m===void 0?0:m,C=t.textPath;t.textPathSide,t.textPathStartOffset;var S=t.leading,D=S===void 0?0:S,G=ia(t),T=this.measureFont(G,n);T.fontSize===0&&(T.fontSize=o,T.ascent=o);var d=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);d.font=G,t.isOverflowing=!1;var y=s?this.wordWrap(e,t,n):e,x=y.split(/(?:\r\n|\r|\n)/),A=new Array(x.length),N=0;if(C){C.getTotalLength();for(var w=0;w<x.length;w++)var k=d.measureText(x[w]).width+(x[w].length-1)*E}else{for(var w=0;w<x.length;w++){var B=d.measureText(x[w]).width+(x[w].length-1)*E;A[w]=B,N=Math.max(N,B)}var k=N+c,_=u||T.fontSize+c,U=Math.max(_,T.fontSize+c)+(x.length-1)*(_+D);_+=D;var H=0;return p==="middle"?H=-U/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?H=-U:(p==="top"||p==="hanging")&&(H=0),{font:G,width:k,height:U,lines:x,lineWidths:A,lineHeight:_,maxLineWidth:N,fontProperties:T,lineMetrics:A.map(function(Y,X){var at=0;return v==="center"||v==="middle"?at-=Y/2:(v==="right"||v==="end")&&(at-=Y),new Jt(at-c/2,H+X*_,Y+c,_)})}}},r.prototype.setGraphemeOnPath=function(){},r.prototype.wordWrap=function(e,t,n){var i=this,o=t.wordWrapWidth,a=o===void 0?0:o,s=t.letterSpacing,u=s===void 0?0:s,l=t.maxLines,c=l===void 0?1/0:l,f=t.textOverflow,p=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),h=a+u,v="";f==="ellipsis"?v="...":f&&f!=="clip"&&(v=f);for(var m=[],E=0,C=0,S={},D=function(H){return i.getFromCache(H,u,S,p)},G=Array.from(v).reduce(function(H,I){return H+D(I)},0),T=Array.from(e),d=0;d<T.length;d++){var y=T[d],x=e[d-1],A=e[d+1],N=D(y);if(this.isNewline(y)){if(E++,E>=c){t.isOverflowing=!0;break}C=0,m[E]="";continue}if(C>0&&C+N>h){if(E+1>=c){if(t.isOverflowing=!0,G>0&&G<=h){for(var w=m[E].length,k=0,B=w,_=0;_<w;_++){var U=D(m[E][_]);if(k+U+G>h){B=_;break}k+=U}m[E]=(m[E]||"").slice(0,B)+v}break}if(E++,C=0,m[E]="",this.isBreakingSpace(y))continue;this.canBreakInLastChar(y)||(m=this.trimToBreakable(m),C=this.sumTextWidthByCache(m[E]||"",S)),this.shouldBreakByKinsokuShorui(y,A)&&(m=this.trimByKinsokuShorui(m),C+=D(x||""))}C+=N,m[E]=(m[E]||"")+y}return m.join(`
`)},r.prototype.isBreakingSpace=function(e){return typeof e!="string"?!1:Yt.BreakingSpaces.indexOf(e.charCodeAt(0))>=0},r.prototype.isNewline=function(e){return typeof e!="string"?!1:Yt.Newlines.indexOf(e.charCodeAt(0))>=0},r.prototype.trimToBreakable=function(e){var t=(0,g.ev)([],(0,g.CR)(e),!1),n=t[t.length-2],i=this.findBreakableIndex(n);if(i===-1||!n)return t;var o=n.slice(i,i+1),a=this.isBreakingSpace(o),s=i+1,u=i+(a?0:1);return t[t.length-1]+=n.slice(s,n.length),t[t.length-2]=n.slice(0,u),t},r.prototype.canBreakInLastChar=function(e){return!(e&&hn.test(e))},r.prototype.sumTextWidthByCache=function(e,t){return e.split("").reduce(function(n,i){if(!t[i])throw Error("cannot count the word without cache");return n+t[i]},0)},r.prototype.findBreakableIndex=function(e){for(var t=e.length-1;t>=0;t--)if(!hn.test(e[t]))return t;return-1},r.prototype.getFromCache=function(e,t,n,i){var o=n[e];if(typeof o!="number"){var a=e.length*t;o=i.measureText(e).width+a,n[e]=o}return o},r}(),M={},_a=function(){var r,e=new va,t=new pa;return r={},r[L.CIRCLE]=new la,r[L.ELLIPSE]=new ca,r[L.RECT]=e,r[L.IMAGE]=e,r[L.GROUP]=new ga,r[L.LINE]=new fa,r[L.TEXT]=new da(M),r[L.POLYLINE]=t,r[L.POLYGON]=t,r[L.PATH]=new ha,r[L.HTML]=new ya,r[L.MESH]=null,r}(),Fa=function(){var r,e=new Po,t=new je;return r={},r[b.PERCENTAGE]=null,r[b.NUMBER]=new wo,r[b.ANGLE]=new xo,r[b.DEFINED_PATH]=new To,r[b.PAINT]=e,r[b.COLOR]=e,r[b.FILTER]=new Co,r[b.LENGTH]=t,r[b.LENGTH_PERCENTAGE]=t,r[b.LENGTH_PERCENTAGE_12]=new Mo,r[b.LENGTH_PERCENTAGE_14]=new So,r[b.COORDINATE]=new je,r[b.OFFSET_DISTANCE]=new Ro,r[b.OPACITY_VALUE]=new Ao,r[b.PATH]=new Oo,r[b.LIST_OF_POINTS]=new bo,r[b.SHADOW_BLUR]=new ko,r[b.TEXT]=new Lo,r[b.TEXT_TRANSFORM]=new Io,r[b.TRANSFORM]=new aa,r[b.TRANSFORM_ORIGIN]=new sa,r[b.Z_INDEX]=new ua,r[b.MARKER]=new No,r}(),Ua=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof Z.g!="undefined"?Z.g:{}};M.CameraContribution=Mr,M.AnimationTimeline=null,M.EasingFunction=null,M.offscreenCanvasCreator=new Ta,M.sceneGraphSelector=new Ma,M.sceneGraphService=new Na(M),M.textService=new Ga(M),M.geometryUpdaterFactory=_a,M.CSSPropertySyntaxFactory=Fa,M.styleValueRegistry=new Eo(M),M.layoutRegistry=null,M.globalThis=Ua(),M.enableCSSParsing=!1,M.enableDataset=!1,M.enableStyleSyntax=!0,M.enableAttributeDashCased=!1,M.enableSizeAttenuation=!1;var pn=0;function Ss(){pn=0}var vn=new Bt(ot.INSERTED,null,"","","",0,"",""),dn=new Bt(ot.REMOVED,null,"","","",0,"",""),Za=new ft(ot.DESTROY),Wa=function(r){(0,g.ZT)(e,r);function e(){var t=r.call(this)||this;return t.entity=pn++,t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.cullable={strategy:Fe.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.rBushNode={aabb:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.destroyed=!1,t.style={},t.computedStyle=M.enableCSSParsing?{opacity:Q,fillOpacity:Q,strokeOpacity:Q,fill:Q,stroke:Q,transform:Q,transformOrigin:Q,visibility:Q,pointerEvents:Q,lineWidth:Q,lineCap:Q,lineJoin:Q,increasedLineWidthForHitTesting:Q,fontSize:Q,fontFamily:Q,fontStyle:Q,fontWeight:Q,fontVariant:Q,textAlign:Q,textBaseline:Q,textTransform:Q,zIndex:Q,filter:Q,shadowType:Q}:null,t.parsedStyle={},t.attributes={},t}return Object.defineProperty(e.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(t){return t!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){throw new Error($)},e.prototype.appendChild=function(t,n){var i;if(t.destroyed)throw new Error(fi);return M.sceneGraphService.attach(t,this,n),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(t),this.isMutationObserved&&(vn.relatedNode=this,t.dispatchEvent(vn)),t},e.prototype.insertBefore=function(t,n){if(!n)this.appendChild(t);else{t.parentElement&&t.parentElement.removeChild(t);var i=this.childNodes.indexOf(n);i===-1?this.appendChild(t):this.appendChild(t,i)}return t},e.prototype.replaceChild=function(t,n){var i=this.childNodes.indexOf(n);return this.removeChild(n),this.appendChild(t,i),n},e.prototype.removeChild=function(t){var n;return dn.relatedNode=this,t.dispatchEvent(dn),!((n=t.ownerDocument)===null||n===void 0)&&n.defaultView&&t.ownerDocument.defaultView.unmountChildren(t),M.sceneGraphService.detach(t),t},e.prototype.removeChildren=function(){for(var t=this.childNodes.length-1;t>=0;t--){var n=this.childNodes[t];this.removeChild(n)}},e.prototype.destroyChildren=function(){for(var t=this.childNodes.length-1;t>=0;t--){var n=this.childNodes[t];n.childNodes.length&&n.destroyChildren(),n.destroy()}},e.prototype.matches=function(t){return M.sceneGraphService.matches(t,this)},e.prototype.getElementById=function(t){return M.sceneGraphService.querySelector("#".concat(t),this)},e.prototype.getElementsByName=function(t){return M.sceneGraphService.querySelectorAll('[name="'.concat(t,'"]'),this)},e.prototype.getElementsByClassName=function(t){return M.sceneGraphService.querySelectorAll(".".concat(t),this)},e.prototype.getElementsByTagName=function(t){return M.sceneGraphService.querySelectorAll(t,this)},e.prototype.querySelector=function(t){return M.sceneGraphService.querySelector(t,this)},e.prototype.querySelectorAll=function(t){return M.sceneGraphService.querySelectorAll(t,this)},e.prototype.closest=function(t){var n=this;do{if(M.sceneGraphService.matches(t,n))return n;n=n.parentElement}while(n!==null);return null},e.prototype.find=function(t){var n=this,i=null;return this.forEach(function(o){return o!==n&&t(o)?(i=o,!0):!1}),i},e.prototype.findAll=function(t){var n=this,i=[];return this.forEach(function(o){o!==n&&t(o)&&i.push(o)}),i},e.prototype.after=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this);n.forEach(function(a,s){var u;return(u=t.parentNode)===null||u===void 0?void 0:u.appendChild(a,o+s+1)})}},e.prototype.before=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this),a=(0,g.CR)(n),s=a[0],u=a.slice(1);this.parentNode.appendChild(s,o),(t=s).after.apply(t,(0,g.ev)([],(0,g.CR)(u),!1))}},e.prototype.replaceWith=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.after.apply(this,(0,g.ev)([],(0,g.CR)(t),!1)),this.remove()},e.prototype.append=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];n.forEach(function(o){return t.appendChild(o)})},e.prototype.prepend=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];n.forEach(function(o,a){return t.appendChild(o,a)})},e.prototype.replaceChildren=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,(0,g.ev)([],(0,g.CR)(t),!1))},e.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},e.prototype.destroy=function(){this.dispatchEvent(Za),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},e.prototype.getGeometryBounds=function(){return M.sceneGraphService.getGeometryBounds(this)},e.prototype.getRenderBounds=function(){return M.sceneGraphService.getBounds(this,!0)},e.prototype.getBounds=function(){return M.sceneGraphService.getBounds(this)},e.prototype.getLocalBounds=function(){return M.sceneGraphService.getLocalBounds(this)},e.prototype.getBoundingClientRect=function(){return M.sceneGraphService.getBoundingClientRect(this)},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},e.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},e.prototype.getAttribute=function(t){if(xi(t))return M.enableCSSParsing?null:void 0;var n=this.attributes[t];if(n===void 0){if(M.enableAttributeDashCased){var i=Ie(t);n=this.attributes[i]}return M.enableCSSParsing&&(0,tt.Z)(n)?null:n}else return n},e.prototype.hasAttribute=function(t){return this.getAttributeNames().includes(t)},e.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},e.prototype.removeAttribute=function(t){this.setAttribute(t,null),delete this.attributes[t]},e.prototype.setAttribute=function(t,n,i,o){this.attributes[t]=n},e.prototype.getAttributeNS=function(t,n){throw new Error($)},e.prototype.getAttributeNode=function(t){throw new Error($)},e.prototype.getAttributeNodeNS=function(t,n){throw new Error($)},e.prototype.hasAttributeNS=function(t,n){throw new Error($)},e.prototype.removeAttributeNS=function(t,n){throw new Error($)},e.prototype.removeAttributeNode=function(t){throw new Error($)},e.prototype.setAttributeNS=function(t,n,i){throw new Error($)},e.prototype.setAttributeNode=function(t){throw new Error($)},e.prototype.setAttributeNodeNS=function(t){throw new Error($)},e.prototype.toggleAttribute=function(t,n){throw new Error($)},e}(st);function J(r){return!!(r!=null&&r.nodeName)}var gn=M.globalThis.Proxy?M.globalThis.Proxy:function(){},At=new Bt(ot.ATTR_MODIFIED,null,null,null,null,Bt.MODIFICATION,null,null),Ya={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},Xa={fill:ve,stroke:ve,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},Ha=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],Va=(0,g.ev)((0,g.ev)([],(0,g.CR)(Ha),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),yn="data-",xt=function(r){(0,g.ZT)(e,r);function e(t){var n=r.call(this)||this;return n.isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=t,n.id=n.config.id||"",n.name=n.config.name||"",(n.config.className||n.config.class)&&(n.className=n.config.className||n.config.class),n.nodeName=n.config.type||L.GROUP,M.enableCSSParsing?(Object.assign(n.attributes,Ya),Object.assign(n.parsedStyle,Xa,n.config.initialParsedStyle)):n.config.initialParsedStyle&&Object.assign(n.parsedStyle,n.config.initialParsedStyle),n.initAttributes(n.config.style),M.enableDataset&&(n.dataset=new gn({},{get:function(i,o){var a="".concat(yn).concat(wr(o));return i[a]!==void 0?i[a]:n.getAttribute(a)},set:function(i,o,a){return n.setAttribute("".concat(yn).concat(wr(o)),a),!0}})),M.enableStyleSyntax&&(n.style=new gn({setProperty:function(i,o){n.setAttribute(i,o)},getPropertyValue:function(i){return n.getAttribute(i)},removeProperty:function(i){n.removeAttribute(i)},item:function(){return""}},{get:function(i,o){return i[o]!==void 0?i[o]:n.getAttribute(o)},set:function(i,o,a){return n.setAttribute(o,a),!0}})),n}return e.prototype.destroy=function(){r.prototype.destroy.call(this),this.getAnimations().forEach(function(t){t.cancel()})},e.prototype.cloneNode=function(t,n){var i=(0,g.pi)({},this.attributes);for(var o in i){var a=i[o];J(a)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(i[o]=a.cloneNode(t)),n&&(i[o]=n(o,a))}var s=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return s.setLocalTransform(this.getLocalTransform()),t&&this.children.forEach(function(u){if(!u.style.isMarker){var l=u.cloneNode(t);s.appendChild(l)}}),s},e.prototype.initAttributes=function(t){t===void 0&&(t={});var n=this.renderable,i={forceUpdateGeometry:!0};M.enableCSSParsing&&(i.usedAttributes=Va);var o=t;if(M.enableAttributeDashCased){o={};for(var a in t){var s=Ie(a);o[s]=t[a]}}M.styleValueRegistry.processProperties(this,o,i),n.dirty=!0},e.prototype.setAttribute=function(t,n,i,o){i===void 0&&(i=!1),o===void 0&&(o=!0),M.enableAttributeDashCased&&(t=Ie(t)),!(0,q.Z)(n)&&(i||n!==this.attributes[t])&&(this.internalSetAttribute(t,n,{memoize:o}),r.prototype.setAttribute.call(this,t,n))},e.prototype.internalSetAttribute=function(t,n,i){var o;i===void 0&&(i={});var a=this.renderable,s=this.attributes[t],u=this.parsedStyle[t];M.styleValueRegistry.processProperties(this,(o={},o[t]=n,o),i),a.dirty=!0;var l=this.parsedStyle[t];this.isConnected&&(At.relatedNode=this,At.prevValue=s,At.newValue=n,At.attrName=t,At.prevParsedValue=u,At.newParsedValue=l,this.isMutationObserved?this.dispatchEvent(At):(At.target=this,this.ownerDocument.defaultView.dispatchEvent(At,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(t,s,n,u,l)},e.prototype.getBBox=function(){var t=this.getBounds(),n=(0,g.CR)(t.getMin(),2),i=n[0],o=n[1],a=(0,g.CR)(t.getMax(),2),s=a[0],u=a[1];return new Jt(i,o,s-i,u-o)},e.prototype.setOrigin=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),M.sceneGraphService.setOrigin(this,ht(t,n,i)),this},e.prototype.getOrigin=function(){return M.sceneGraphService.getOrigin(this)},e.prototype.setPosition=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),M.sceneGraphService.setPosition(this,ht(t,n,i)),this},e.prototype.setLocalPosition=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),M.sceneGraphService.setLocalPosition(this,ht(t,n,i)),this},e.prototype.translate=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),M.sceneGraphService.translate(this,ht(t,n,i)),this},e.prototype.translateLocal=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),M.sceneGraphService.translateLocal(this,ht(t,n,i)),this},e.prototype.getPosition=function(){return M.sceneGraphService.getPosition(this)},e.prototype.getLocalPosition=function(){return M.sceneGraphService.getLocalPosition(this)},e.prototype.scale=function(t,n,i){return this.scaleLocal(t,n,i)},e.prototype.scaleLocal=function(t,n,i){return typeof t=="number"&&(n=n||t,i=i||t,t=ht(t,n,i)),M.sceneGraphService.scaleLocal(this,t),this},e.prototype.setLocalScale=function(t,n,i){return typeof t=="number"&&(n=n||t,i=i||t,t=ht(t,n,i)),M.sceneGraphService.setLocalScale(this,t),this},e.prototype.getLocalScale=function(){return M.sceneGraphService.getLocalScale(this)},e.prototype.getScale=function(){return M.sceneGraphService.getScale(this)},e.prototype.getEulerAngles=function(){var t=(0,g.CR)(Ae(P.Ue(),M.sceneGraphService.getWorldTransform(this)),3),n=t[2];return Tt(n)},e.prototype.getLocalEulerAngles=function(){var t=(0,g.CR)(Ae(P.Ue(),M.sceneGraphService.getLocalRotation(this)),3),n=t[2];return Tt(n)},e.prototype.setEulerAngles=function(t){return M.sceneGraphService.setEulerAngles(this,0,0,t),this},e.prototype.setLocalEulerAngles=function(t){return M.sceneGraphService.setLocalEulerAngles(this,0,0,t),this},e.prototype.rotateLocal=function(t,n,i){return(0,tt.Z)(n)&&(0,tt.Z)(i)?M.sceneGraphService.rotateLocal(this,0,0,t):M.sceneGraphService.rotateLocal(this,t,n,i),this},e.prototype.rotate=function(t,n,i){return(0,tt.Z)(n)&&(0,tt.Z)(i)?M.sceneGraphService.rotate(this,0,0,t):M.sceneGraphService.rotate(this,t,n,i),this},e.prototype.setRotation=function(t,n,i,o){return M.sceneGraphService.setRotation(this,t,n,i,o),this},e.prototype.setLocalRotation=function(t,n,i,o){return M.sceneGraphService.setLocalRotation(this,t,n,i,o),this},e.prototype.setLocalSkew=function(t,n){return M.sceneGraphService.setLocalSkew(this,t,n),this},e.prototype.getRotation=function(){return M.sceneGraphService.getRotation(this)},e.prototype.getLocalRotation=function(){return M.sceneGraphService.getLocalRotation(this)},e.prototype.getLocalSkew=function(){return M.sceneGraphService.getLocalSkew(this)},e.prototype.getLocalTransform=function(){return M.sceneGraphService.getLocalTransform(this)},e.prototype.getWorldTransform=function(){return M.sceneGraphService.getWorldTransform(this)},e.prototype.setLocalTransform=function(t){return M.sceneGraphService.setLocalTransform(this,t),this},e.prototype.resetLocalTransform=function(){M.sceneGraphService.resetLocalTransform(this)},e.prototype.getAnimations=function(){return this.activeAnimations},e.prototype.animate=function(t,n){var i,o=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return o?o.play(this,t,n):null},e.prototype.isVisible=function(){var t,n;return M.enableCSSParsing?((t=this.parsedStyle)===null||t===void 0?void 0:t.visibility)==="visible":((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)!=="hidden"},Object.defineProperty(e.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"},enumerable:!1,configurable:!0}),e.prototype.isInteractive=function(){var t;return((t=this.parsedStyle)===null||t===void 0?void 0:t.pointerEvents)!=="none"},e.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},e.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,g.ev)([],(0,g.CR)(this.parentNode.children.map(function(t){return Number(t.style.zIndex)})),!1))+1),this},e.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,g.ev)([],(0,g.CR)(this.parentNode.children.map(function(t){return Number(t.style.zIndex)})),!1))-1),this},e.prototype.getConfig=function(){return this.config},e.prototype.attr=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=(0,g.CR)(n,2),a=o[0],s=o[1];return a?(0,le.Z)(a)?(Object.keys(a).forEach(function(u){t.setAttribute(u,a[u])}),this):n.length===2?(this.setAttribute(a,s),this):this.attributes[a]:this.attributes},e.prototype.getMatrix=function(t){var n=t||this.getWorldTransform(),i=(0,g.CR)(R.getTranslation(P.Ue(),n),2),o=i[0],a=i[1],s=(0,g.CR)(R.getScaling(P.Ue(),n),2),u=s[0],l=s[1],c=R.getRotation(W.Ue(),n),f=(0,g.CR)(Ae(P.Ue(),c),3),p=f[0],h=f[2];return ii(p||h,o,a,u,l)},e.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},e.prototype.setMatrix=function(t){var n=(0,g.CR)(xr(t),5),i=n[0],o=n[1],a=n[2],s=n[3],u=n[4];this.setEulerAngles(u).setPosition(i,o).setLocalScale(a,s)},e.prototype.setLocalMatrix=function(t){var n=(0,g.CR)(xr(t),5),i=n[0],o=n[1],a=n[2],s=n[3],u=n[4];this.setLocalEulerAngles(u).setLocalPosition(i,o).setLocalScale(a,s)},e.prototype.show=function(){M.enableCSSParsing?this.style.visibility="visible":this.forEach(function(t){t.style.visibility="visible"})},e.prototype.hide=function(){M.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(t){t.style.visibility="hidden"})},e.prototype.getCount=function(){return this.childElementCount},e.prototype.getParent=function(){return this.parentElement},e.prototype.getChildren=function(){return this.children},e.prototype.getFirst=function(){return this.firstElementChild},e.prototype.getLast=function(){return this.lastElementChild},e.prototype.getChildByIndex=function(t){return this.children[t]||null},e.prototype.add=function(t,n){return this.appendChild(t,n)},e.prototype.set=function(t,n){this.config[t]=n},e.prototype.get=function(t){return this.config[t]},e.prototype.moveTo=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.setPosition(t,n,i),this},e.prototype.move=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.setPosition(t,n,i),this},e.prototype.setZIndex=function(t){return this.style.zIndex=t,this},e}(Wa),mn=function(r){(0,g.ZT)(e,r);function e(t){return t===void 0&&(t={}),r.call(this,(0,g.pi)({type:L.CIRCLE},t))||this}return e}(xt),Ka=function(r){(0,g.ZT)(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,o=(0,g._T)(t,["style"]);return n=r.call(this,(0,g.pi)({style:M.enableCSSParsing?(0,g.pi)({},i):(0,g.pi)({},i)},o))||this,n.isCustomElement=!0,n}return e}(xt),En=function(r){(0,g.ZT)(e,r);function e(t){return t===void 0&&(t={}),r.call(this,(0,g.pi)({type:L.ELLIPSE},t))||this}return e}(xt),Pe=function(r){(0,g.ZT)(e,r);function e(t){return t===void 0&&(t={}),r.call(this,(0,g.pi)({type:L.GROUP},t))||this}return e}(xt),xn=function(r){(0,g.ZT)(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,o=(0,g._T)(t,["style"]);return n=r.call(this,(0,g.pi)({type:L.HTML,style:M.enableCSSParsing?(0,g.pi)({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):(0,g.pi)({},i)},o))||this,n.cullable.enable=!1,n}return e.prototype.getDomElement=function(){return this.parsedStyle.$el},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.getLocalBounds=function(){if(this.parentNode){var t=R.invert(R.create(),this.parentNode.getWorldTransform()),n=this.getBounds();if(!ct.isEmpty(n)){var i=new ct;return i.setFromTransformedAABB(n,t),i}}return this.getBounds()},e}(xt),Tn=function(r){(0,g.ZT)(e,r);function e(t){return t===void 0&&(t={}),r.call(this,(0,g.pi)({type:L.IMAGE},t))||this}return e}(xt),Pn=function(r){(0,g.ZT)(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,o=(0,g._T)(t,["style"]);n=r.call(this,(0,g.pi)({type:L.LINE,style:(0,g.pi)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},o))||this,n.markerStartAngle=0,n.markerEndAngle=0;var a=n.parsedStyle,s=a.markerStart,u=a.markerEnd;return s&&J(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),u&&J(u)&&(n.markerEndAngle=u.getLocalEulerAngles(),n.appendChild(u)),n.transformMarker(!0),n.transformMarker(!1),n}return e.prototype.attributeChangedCallback=function(t,n,i,o,a){t==="x1"||t==="y1"||t==="x2"||t==="y2"||t==="markerStartOffset"||t==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):t==="markerStart"?(o&&J(o)&&(this.markerStartAngle=0,o.remove()),a&&J(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):t==="markerEnd"&&(o&&J(o)&&(this.markerEndAngle=0,o.remove()),a&&J(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1)))},e.prototype.transformMarker=function(t){var n=this.parsedStyle,i=n.markerStart,o=n.markerEnd,a=n.markerStartOffset,s=n.markerEndOffset,u=n.x1,l=n.x2,c=n.y1,f=n.y2,p=t?i:o;if(!(!p||!J(p))){var h=0,v,m,E,C,S,D;t?(E=u,C=c,v=l-u,m=f-c,S=a||0,D=this.markerStartAngle):(E=l,C=f,v=u-l,m=c-f,S=s||0,D=this.markerEndAngle),h=Math.atan2(m,v),p.setLocalEulerAngles(h*180/Math.PI+D),p.setLocalPosition(E+Math.cos(h)*S,C+Math.sin(h)*S)}},e.prototype.getPoint=function(t,n){n===void 0&&(n=!1);var i=this.parsedStyle,o=i.x1,a=i.y1,s=i.x2,u=i.y2,l=(0,kt.U4)(o,a,s,u,t),c=l.x,f=l.y,p=P.fF(P.Ue(),P.al(c,f,0),n?this.getWorldTransform():this.getLocalTransform());return new ut(p[0],p[1])},e.prototype.getPointAtLength=function(t,n){return n===void 0&&(n=!1),this.getPoint(t/this.getTotalLength(),n)},e.prototype.getTotalLength=function(){var t=this.parsedStyle,n=t.x1,i=t.y1,o=t.x2,a=t.y2;return(0,kt.Xk)(n,i,o,a)},e}(xt),Cn=function(r){(0,g.ZT)(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,o=(0,g._T)(t,["style"]);n=r.call(this,(0,g.pi)({type:L.PATH,style:M.enableCSSParsing?(0,g.pi)({d:"",miterLimit:""},i):(0,g.pi)({},i),initialParsedStyle:M.enableCSSParsing?null:{miterLimit:4,d:(0,g.pi)({},Ar)}},o))||this,n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var a=n.parsedStyle,s=a.markerStart,u=a.markerEnd,l=a.markerMid;return s&&J(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),l&&J(l)&&n.placeMarkerMid(l),u&&J(u)&&(n.markerEndAngle=u.getLocalEulerAngles(),n.appendChild(u)),n.transformMarker(!0),n.transformMarker(!1),n}return e.prototype.attributeChangedCallback=function(t,n,i,o,a){t==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):t==="markerStartOffset"||t==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):t==="markerStart"?(o&&J(o)&&(this.markerStartAngle=0,o.remove()),a&&J(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):t==="markerEnd"?(o&&J(o)&&(this.markerEndAngle=0,o.remove()),a&&J(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):t==="markerMid"&&this.placeMarkerMid(a)},e.prototype.transformMarker=function(t){var n=this.parsedStyle,i=n.markerStart,o=n.markerEnd,a=n.markerStartOffset,s=n.markerEndOffset,u=t?i:o;if(!(!u||!J(u))){var l=0,c,f,p,h,v,m;if(t){var E=(0,g.CR)(this.getStartTangent(),2),C=E[0],S=E[1];p=S[0],h=S[1],c=C[0]-S[0],f=C[1]-S[1],v=a||0,m=this.markerStartAngle}else{var D=(0,g.CR)(this.getEndTangent(),2),C=D[0],S=D[1];p=S[0],h=S[1],c=C[0]-S[0],f=C[1]-S[1],v=s||0,m=this.markerEndAngle}l=Math.atan2(f,c),u.setLocalEulerAngles(l*180/Math.PI+m),u.setLocalPosition(p+Math.cos(l)*v,h+Math.sin(l)*v)}},e.prototype.placeMarkerMid=function(t){var n=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(l){l.remove()}),t&&J(t))for(var i=1;i<n.length-1;i++){var o=(0,g.CR)(n[i].currentPoint,2),a=o[0],s=o[1],u=i===1?t:t.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(a,s)}},e.prototype.getTotalLength=function(){return Xe(this)},e.prototype.getPointAtLength=function(t,n){n===void 0&&(n=!1);var i=this.parsedStyle.d.absolutePath,o=(0,Kn.r)(i,t),a=o.x,s=o.y,u=P.fF(P.Ue(),P.al(a,s,0),n?this.getWorldTransform():this.getLocalTransform());return new ut(u[0],u[1])},e.prototype.getPoint=function(t,n){return n===void 0&&(n=!1),this.getPointAtLength(t*Xe(this),n)},e.prototype.getStartTangent=function(){var t=this.parsedStyle.d.segments,n=[];if(t.length>1){var i=t[0].currentPoint,o=t[1].currentPoint,a=t[1].startTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([o[0],o[1]]),n.push([i[0],i[1]]))}return n},e.prototype.getEndTangent=function(){var t=this.parsedStyle.d.segments,n=t.length,i=[];if(n>1){var o=t[n-2].currentPoint,a=t[n-1].currentPoint,s=t[n-1].endTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i},e}(xt),ar=function(r){(0,g.ZT)(e,r);function e(t){t===void 0&&(t={});var n=this,i=t.style,o=(0,g._T)(t,["style"]);n=r.call(this,(0,g.pi)({type:L.POLYGON,style:M.enableCSSParsing?(0,g.pi)({points:"",miterLimit:"",isClosed:!0},i):(0,g.pi)({},i),initialParsedStyle:M.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},o))||this,n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var a=n.parsedStyle,s=a.markerStart,u=a.markerEnd,l=a.markerMid;return s&&J(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),l&&J(l)&&n.placeMarkerMid(l),u&&J(u)&&(n.markerEndAngle=u.getLocalEulerAngles(),n.appendChild(u)),n.transformMarker(!0),n.transformMarker(!1),n}return e.prototype.attributeChangedCallback=function(t,n,i,o,a){t==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):t==="markerStartOffset"||t==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):t==="markerStart"?(o&&J(o)&&(this.markerStartAngle=0,o.remove()),a&&J(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):t==="markerEnd"?(o&&J(o)&&(this.markerEndAngle=0,o.remove()),a&&J(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):t==="markerMid"&&this.placeMarkerMid(a)},e.prototype.transformMarker=function(t){var n=this.parsedStyle,i=n.markerStart,o=n.markerEnd,a=n.markerStartOffset,s=n.markerEndOffset,u=n.points,l=(u||{}).points,c=t?i:o;if(!(!c||!J(c)||!l)){var f=0,p,h,v,m,E,C;if(v=l[0][0],m=l[0][1],t)p=l[1][0]-l[0][0],h=l[1][1]-l[0][1],E=a||0,C=this.markerStartAngle;else{var S=l.length;this.parsedStyle.isClosed?(p=l[S-1][0]-l[0][0],h=l[S-1][1]-l[0][1]):(v=l[S-1][0],m=l[S-1][1],p=l[S-2][0]-l[S-1][0],h=l[S-2][1]-l[S-1][1]),E=s||0,C=this.markerEndAngle}f=Math.atan2(h,p),c.setLocalEulerAngles(f*180/Math.PI+C),c.setLocalPosition(v+Math.cos(f)*E,m+Math.sin(f)*E)}},e.prototype.placeMarkerMid=function(t){var n=this.parsedStyle.points,i=(n||{}).points;if(this.markerMidList.forEach(function(l){l.remove()}),this.markerMidList=[],t&&J(t)&&i)for(var o=1;o<(this.parsedStyle.isClosed?i.length:i.length-1);o++){var a=i[o][0],s=i[o][1],u=o===1?t:t.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(a,s)}},e}(xt),Mn=function(r){(0,g.ZT)(e,r);function e(t){t===void 0&&(t={});var n=t.style,i=(0,g._T)(t,["style"]);return r.call(this,(0,g.pi)({type:L.POLYLINE,style:M.enableCSSParsing?(0,g.pi)({points:"",miterLimit:"",isClosed:!1},n):(0,g.pi)({},n),initialParsedStyle:M.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return e.prototype.getTotalLength=function(){return Vi(this)},e.prototype.getPointAtLength=function(t,n){return n===void 0&&(n=!1),this.getPoint(t/this.getTotalLength(),n)},e.prototype.getPoint=function(t,n){n===void 0&&(n=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],a=0,s,u,l=this.getTotalLength();i.forEach(function(E,C){i[C+1]&&(s=[0,0],s[0]=a/l,u=(0,kt.Xk)(E[0],E[1],i[C+1][0],i[C+1][1]),a+=u,s[1]=a/l,o.push(s))}),this.parsedStyle.points.segments=o}var c=0,f=0;this.parsedStyle.points.segments.forEach(function(E,C){t>=E[0]&&t<=E[1]&&(c=(t-E[0])/(E[1]-E[0]),f=C)});var p=(0,kt.U4)(i[f][0],i[f][1],i[f+1][0],i[f+1][1],c),h=p.x,v=p.y,m=P.fF(P.Ue(),P.al(h,v,0),n?this.getWorldTransform():this.getLocalTransform());return new ut(m[0],m[1])},e.prototype.getStartTangent=function(){var t=this.parsedStyle.points.points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.parsedStyle.points.points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(ar),Sn=function(r){(0,g.ZT)(e,r);function e(t){return t===void 0&&(t={}),r.call(this,(0,g.pi)({type:L.RECT},t))||this}return e}(xt),sr=function(r){(0,g.ZT)(e,r);function e(t){t===void 0&&(t={});var n=t.style,i=(0,g._T)(t,["style"]);return r.call(this,(0,g.pi)({type:L.TEXT,style:M.enableCSSParsing?(0,g.pi)({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},n):(0,g.pi)({fill:"black"},n)},i))||this}return e.prototype.getComputedTextLength=function(){var t;return this.getGeometryBounds(),((t=this.parsedStyle.metrics)===null||t===void 0?void 0:t.maxLineWidth)||0},e.prototype.getLineBoundingRects=function(){var t;return this.getGeometryBounds(),((t=this.parsedStyle.metrics)===null||t===void 0?void 0:t.lineMetrics)||[]},e.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},e}(xt),za=function(){function r(){this.registry={},this.define(L.CIRCLE,mn),this.define(L.ELLIPSE,En),this.define(L.RECT,Sn),this.define(L.IMAGE,Tn),this.define(L.LINE,Pn),this.define(L.GROUP,Pe),this.define(L.PATH,Cn),this.define(L.POLYGON,ar),this.define(L.POLYLINE,Mn),this.define(L.TEXT,sr),this.define(L.HTML,xn)}return r.prototype.define=function(e,t){this.registry[e]=t},r.prototype.get=function(e){return this.registry[e]},r}(),Ja={number:function(r){return new V(r)},percent:function(r){return new V(r,"%")},px:function(r){return new V(r,"px")},em:function(r){return new V(r,"em")},rem:function(r){return new V(r,"rem")},deg:function(r){return new V(r,"deg")},grad:function(r){return new V(r,"grad")},rad:function(r){return new V(r,"rad")},turn:function(r){return new V(r,"turn")},s:function(r){return new V(r,"s")},ms:function(r){return new V(r,"ms")},registerProperty:function(r){var e=r.name,t=r.inherits,n=r.interpolable,i=r.initialValue,o=r.syntax;M.styleValueRegistry.registerMetadata({n:e,inh:t,int:n,d:i,syntax:o})},registerLayout:function(r,e){M.layoutRegistry.registerLayout(r,e)}},Qa=function(r){(0,g.ZT)(e,r);function e(){var t=r.call(this)||this;t.defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new M.AnimationTimeline(t)}catch(i){}var n={};return $e.forEach(function(i){var o=i.n,a=i.inh,s=i.d;a&&s&&(n[o]=$t(s)?s(L.GROUP):s)}),t.documentElement=new Pe({id:"g-root",style:n}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),e.prototype.createElement=function(t,n){if(t==="svg")return this.documentElement;var i=this.defaultView.customElements.get(t);i||(console.warn("Unsupported tagName: ",t),i=t==="tspan"?sr:Pe);var o=new i(n);return o.ownerDocument=this,o},e.prototype.createElementNS=function(t,n,i){return this.createElement(n,i)},e.prototype.cloneNode=function(t){throw new Error($)},e.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(t){}},e.prototype.elementsFromBBox=function(t,n,i,o){var a=this.defaultView.context.rBushRoot,s=a.search({minX:t,minY:n,maxX:i,maxY:o}),u=[];return s.forEach(function(l){var c=l.displayObject,f=c.parsedStyle.pointerEvents,p=f===void 0?"auto":f,h=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(p);(!h||h&&c.isVisible())&&!c.isCulled()&&c.isInteractive()&&u.push(c)}),u.sort(function(l,c){return c.sortable.renderOrder-l.sortable.renderOrder}),u},e.prototype.elementFromPointSync=function(t,n){var i=this.defaultView.canvas2Viewport({x:t,y:n}),o=i.x,a=i.y,s=this.defaultView.getConfig(),u=s.width,l=s.height;if(o<0||a<0||o>u||a>l)return null;var c=this.defaultView.viewport2Client({x:o,y:a}),f=c.x,p=c.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:n,viewportX:o,viewportY:a,clientX:f,clientY:p},picked:[]}).picked;return h&&h[0]||this.documentElement},e.prototype.elementFromPoint=function(t,n){return(0,g.mG)(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,p,h;return(0,g.Jh)(this,function(v){switch(v.label){case 0:return i=this.defaultView.canvas2Viewport({x:t,y:n}),o=i.x,a=i.y,s=this.defaultView.getConfig(),u=s.width,l=s.height,o<0||a<0||o>u||a>l?[2,null]:(c=this.defaultView.viewport2Client({x:o,y:a}),f=c.x,p=c.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:t,y:n,viewportX:o,viewportY:a,clientX:f,clientY:p},picked:[]})]);case 1:return h=v.sent().picked,[2,h&&h[0]||this.documentElement]}})})},e.prototype.elementsFromPointSync=function(t,n){var i=this.defaultView.canvas2Viewport({x:t,y:n}),o=i.x,a=i.y,s=this.defaultView.getConfig(),u=s.width,l=s.height;if(o<0||a<0||o>u||a>l)return[];var c=this.defaultView.viewport2Client({x:o,y:a}),f=c.x,p=c.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:n,viewportX:o,viewportY:a,clientX:f,clientY:p},picked:[]}).picked;return h[h.length-1]!==this.documentElement&&h.push(this.documentElement),h},e.prototype.elementsFromPoint=function(t,n){return(0,g.mG)(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,p,h;return(0,g.Jh)(this,function(v){switch(v.label){case 0:return i=this.defaultView.canvas2Viewport({x:t,y:n}),o=i.x,a=i.y,s=this.defaultView.getConfig(),u=s.width,l=s.height,o<0||a<0||o>u||a>l?[2,[]]:(c=this.defaultView.viewport2Client({x:o,y:a}),f=c.x,p=c.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:t,y:n,viewportX:o,viewportY:a,clientX:f,clientY:p},picked:[]})]);case 1:return h=v.sent().picked,h[h.length-1]!==this.documentElement&&h.push(this.documentElement),[2,h]}})})},e.prototype.appendChild=function(t,n){throw new Error(Qt)},e.prototype.insertBefore=function(t,n){throw new Error(Qt)},e.prototype.removeChild=function(t,n){throw new Error(Qt)},e.prototype.replaceChild=function(t,n,i){throw new Error(Qt)},e.prototype.append=function(){throw new Error(Qt)},e.prototype.prepend=function(){throw new Error(Qt)},e.prototype.getElementById=function(t){return this.documentElement.getElementById(t)},e.prototype.getElementsByName=function(t){return this.documentElement.getElementsByName(t)},e.prototype.getElementsByTagName=function(t){return this.documentElement.getElementsByTagName(t)},e.prototype.getElementsByClassName=function(t){return this.documentElement.getElementsByClassName(t)},e.prototype.querySelector=function(t){return this.documentElement.querySelector(t)},e.prototype.querySelectorAll=function(t){return this.documentElement.querySelectorAll(t)},e.prototype.find=function(t){return this.documentElement.find(t)},e.prototype.findAll=function(t){return this.documentElement.findAll(t)},e}(st),$a=function(){function r(e){this.strategies=e}return r.prototype.apply=function(e){var t=e.camera,n=e.renderingService,i=e.renderingContext,o=this.strategies;n.hooks.cull.tap(r.tag,function(a){if(a){var s=a.cullable;return o.length===0?s.visible=i.unculledEntities.indexOf(a.entity)>-1:s.visible=o.every(function(u){return u.isVisible(t,a)}),!a.isCulled()&&a.isVisible()?a:(a.dispatchEvent(new ft(ot.CULLED)),null)}return a}),n.hooks.afterRender.tap(r.tag,function(a){a.cullable.visibilityPlaneMask=-1})},r.tag="Culling",r}(),ja=function(){function r(){var e=this;this.autoPreventDefault=!1,this.rootPointerEvent=new ir(null),this.rootWheelEvent=new or(null),this.onPointerMove=function(t){var n,i,o,a,s=(a=(o=e.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView;if(!(s.supportsTouchEvents&&t.pointerType==="touch")){var u=e.normalizeToPointerEvent(t,s);try{for(var l=(0,g.XA)(u),c=l.next();!c.done;c=l.next()){var f=c.value,p=e.bootstrapEvent(e.rootPointerEvent,f,s,t);e.context.eventService.mapEvent(p)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var n,i,o,a,s=(a=(o=e.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView,u=e.normalizeToPointerEvent(t,s);try{for(var l=(0,g.XA)(u),c=l.next();!c.done;c=l.next()){var f=c.value,p=e.bootstrapEvent(e.rootPointerEvent,f,s,t);e.context.eventService.mapEvent(p)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}e.setCursor(e.context.eventService.cursor)}}return r.prototype.apply=function(e){var t=this;this.context=e;var n=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var a=t.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}).picked;return a[0]||null}),n.hooks.pointerWheel.tap(r.tag,function(o){var a=t.normalizeWheelEvent(o);t.context.eventService.mapEvent(a)}),n.hooks.pointerDown.tap(r.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var u=t.normalizeToPointerEvent(o,i);if(t.autoPreventDefault&&u[0].isNormalized){var l=o.cancelable||!("cancelable"in o);l&&o.preventDefault()}try{for(var c=(0,g.XA)(u),f=c.next();!f.done;f=c.next()){var p=f.value,h=t.bootstrapEvent(t.rootPointerEvent,p,i,o);t.context.eventService.mapEvent(h)}}catch(v){a={error:v}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}t.setCursor(t.context.eventService.cursor)}}),n.hooks.pointerUp.tap(r.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var u=t.context.contextService.getDomElement(),l=t.context.eventService.isNativeEventFromCanvas(u,o),c=l?"":"outside",f=t.normalizeToPointerEvent(o,i);try{for(var p=(0,g.XA)(f),h=p.next();!h.done;h=p.next()){var v=h.value,m=t.bootstrapEvent(t.rootPointerEvent,v,i,o);m.type+=c,t.context.eventService.mapEvent(m)}}catch(E){a={error:E}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}t.setCursor(t.context.eventService.cursor)}}),n.hooks.pointerMove.tap(r.tag,this.onPointerMove),n.hooks.pointerOver.tap(r.tag,this.onPointerMove),n.hooks.pointerOut.tap(r.tag,this.onPointerMove),n.hooks.click.tap(r.tag,this.onClick),n.hooks.pointerCancel.tap(r.tag,function(o){var a,s,u=t.normalizeToPointerEvent(o,i);try{for(var l=(0,g.XA)(u),c=l.next();!c.done;c=l.next()){var f=c.value,p=t.bootstrapEvent(t.rootPointerEvent,f,i,o);t.context.eventService.mapEvent(p)}}catch(h){a={error:h}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}t.setCursor(t.context.eventService.cursor)})},r.prototype.bootstrapEvent=function(e,t,n,i){e.view=n,e.originalEvent=null,e.nativeEvent=i,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var o=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=o.x,s=o.y;e.viewport.x=a,e.viewport.y=s;var u=this.context.eventService.viewport2Canvas(e.viewport),l=u.x,c=u.y;return e.canvas.x=l,e.canvas.y=c,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Yo[e.type]||e.type),e},r.prototype.normalizeWheelEvent=function(e){var t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;var n=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),i=n.x,o=n.y;t.viewport.x=i,t.viewport.y=o;var a=this.context.eventService.viewport2Canvas(t.viewport),s=a.x,u=a.y;return t.canvas.x=s,t.canvas.y=u,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.nativeEvent=e,t.type=e.type,t},r.prototype.transferMouseData=function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=tr.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null},r.prototype.setCursor=function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default")},r.prototype.normalizeToPointerEvent=function(e,t){var n=[];if(t.isTouchEvent(e))for(var i=0;i<e.changedTouches.length;i++){var o=e.changedTouches[i];(0,q.Z)(o.button)&&(o.button=0),(0,q.Z)(o.buttons)&&(o.buttons=1),(0,q.Z)(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),(0,q.Z)(o.width)&&(o.width=o.radiusX||1),(0,q.Z)(o.height)&&(o.height=o.radiusY||1),(0,q.Z)(o.tiltX)&&(o.tiltX=0),(0,q.Z)(o.tiltY)&&(o.tiltY=0),(0,q.Z)(o.pointerType)&&(o.pointerType="touch"),(0,q.Z)(o.pointerId)&&(o.pointerId=o.identifier||0),(0,q.Z)(o.pressure)&&(o.pressure=o.force||.5),(0,q.Z)(o.twist)&&(o.twist=0),(0,q.Z)(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,n.push(o)}else if(t.isMouseEvent(e)){var a=e;(0,q.Z)(a.isPrimary)&&(a.isPrimary=!0),(0,q.Z)(a.width)&&(a.width=1),(0,q.Z)(a.height)&&(a.height=1),(0,q.Z)(a.tiltX)&&(a.tiltX=0),(0,q.Z)(a.tiltY)&&(a.tiltY=0),(0,q.Z)(a.pointerType)&&(a.pointerType="mouse"),(0,q.Z)(a.pointerId)&&(a.pointerId=Wo),(0,q.Z)(a.pressure)&&(a.pressure=.5),(0,q.Z)(a.twist)&&(a.twist=0),(0,q.Z)(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(e);return n},r.tag="Event",r}(),qa=[L.CIRCLE,L.ELLIPSE,L.IMAGE,L.RECT,L.LINE,L.POLYLINE,L.POLYGON,L.TEXT,L.PATH,L.HTML],ts=function(){function r(){}return r.prototype.isVisible=function(e,t){var n,i,o=t.cullable;if(!o.enable)return!0;var a=t.getRenderBounds();if(ct.isEmpty(a))return!1;var s=e.getFrustum(),u=(i=(n=t.parentNode)===null||n===void 0?void 0:n.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return o.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,a,u||Lt.INDETERMINATE,s.planes),o.visible=o.visibilityPlaneMask!==Lt.OUTSIDE,o.visible},r.prototype.computeVisibilityWithPlaneMask=function(e,t,n,i){if(n===Lt.OUTSIDE||n===Lt.INSIDE)return n;for(var o=Lt.INSIDE,a=qa.indexOf(e.nodeName)>-1,s=0,u=i.length;s<u;++s){var l=1<<s;if(n&l&&!(a&&(s===4||s===5))){var c=i[s],f=c.normal,p=c.distance;if(P.AK(f,t.getPositiveFarPoint(i[s]))+p<0)return Lt.OUTSIDE;P.AK(f,t.getNegativeFarPoint(i[s]))+p<0&&(o|=l)}}return o},r}(),es=function(){function r(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return r.prototype.apply=function(e){var t=this,n,i=e.renderingService,o=e.renderingContext,a=e.rBushRoot,s=o.root.ownerDocument.defaultView;this.rBush=a;var u=function(h){var v=h.target;v.renderable.dirty=!0,i.dirtify()},l=function(h){var v=h.detail.affectChildren,m=h.target;v&&m.forEach(function(C){t.toSync.add(C)});for(var E=m;E;)E.renderable&&t.toSync.add(E),E=E.parentElement;i.dirtify()},c=function(h){var v=h.target;M.enableSizeAttenuation&&M.styleValueRegistry.updateSizeAttenuation(v,s.getCamera().getZoom()),M.enableCSSParsing&&M.styleValueRegistry.recalc(v),M.sceneGraphService.dirtifyToRoot(v),i.dirtify()},f=function(h){var v=h.target,m=v.rBushNode;m.aabb&&t.rBush.remove(m.aabb),t.toSync.delete(v),M.sceneGraphService.dirtifyToRoot(v),i.dirtify()};i.hooks.init.tap(r.tag,function(){s.addEventListener(ot.MOUNTED,c),s.addEventListener(ot.UNMOUNTED,f),s.addEventListener(ot.ATTR_MODIFIED,u),s.addEventListener(ot.BOUNDS_CHANGED,l)}),i.hooks.destroy.tap(r.tag,function(){s.removeEventListener(ot.MOUNTED,c),s.removeEventListener(ot.UNMOUNTED,f),s.removeEventListener(ot.ATTR_MODIFIED,u),s.removeEventListener(ot.BOUNDS_CHANGED,l),t.toSync.clear()});var p=(n=M.globalThis.requestIdleCallback)!==null&&n!==void 0?n:er.bind(M.globalThis);i.hooks.endFrame.tap(r.tag,function(){t.isFirstTimeRendering?(t.isFirstTimeRendering=!1,t.syncing=!0,p(function(){t.syncRTree(!0),t.isFirstTimeRenderingFinished=!0})):t.syncRTree()})},r.prototype.syncRTree=function(e){var t=this;if(e===void 0&&(e=!1),!(!e&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var n=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var o=i.rBushNode;o&&o.aabb&&t.rBush.remove(o.aabb);var a=i.getRenderBounds();if(a){var s=i.renderable;e&&(s.dirtyRenderBounds||(s.dirtyRenderBounds=new ct),s.dirtyRenderBounds.update(a.center,a.halfExtents));var u=(0,g.CR)(a.getMin(),2),l=u[0],c=u[1],f=(0,g.CR)(a.getMax(),2),p=f[0],h=f[1];o.aabb||(o.aabb={}),o.aabb.displayObject=i,o.aabb.minX=l,o.aabb.minY=c,o.aabb.maxX=p,o.aabb.maxY=h}o.aabb&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.minX)&&!isNaN(o.aabb.minY)&&n.push(o.aabb)}),this.rBush.load(n),n.length=0,this.toSync.clear(),this.syncing=!1}},r.tag="Prepare",r}();function Ns(r){return!!r.document}var Ct;(function(r){r.READY="ready",r.BEFORE_RENDER="beforerender",r.RERENDER="rerender",r.AFTER_RENDER="afterrender",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.RESIZE="resize",r.DIRTY_RECTANGLE="dirtyrectangle",r.RENDERER_CHANGED="rendererchanged"})(Ct||(Ct={}));var Nn=500,rs=.1,ns=1e3,ur=new ft(ot.MOUNTED),lr=new ft(ot.UNMOUNTED),wn=new ft(Ct.BEFORE_RENDER),is=new ft(Ct.RERENDER),Rn=new ft(Ct.AFTER_RENDER),os=function(r){(0,g.ZT)(e,r);function e(t){var n=r.call(this)||this;n.Element=xt,n.inited=!1,n.context={},n.document=new Qa,n.document.defaultView=n,n.customElements=new za;var i=t.container,o=t.canvas,a=t.offscreenCanvas,s=t.width,u=t.height,l=t.devicePixelRatio,c=t.renderer,f=t.background,p=t.cursor,h=t.document,v=t.requestAnimationFrame,m=t.cancelAnimationFrame,E=t.createImage,C=t.supportsPointerEvents,S=t.supportsTouchEvents,D=t.supportsCSSTransform,G=t.supportsMutipleCanvasesInOneContainer,T=t.useNativeClickEvent,d=t.alwaysTriggerPointerEventOnCanvas,y=t.isTouchEvent,x=t.isMouseEvent,A=t.dblClickSpeed;G||Bo(i,n);var N=s,w=u,k=l;return o&&(k=l||xe&&window.devicePixelRatio||1,k=k>=1?Math.ceil(k):1,N=s||Uo(o)||o.width/k,w=u||Zo(o)||o.height/k),a&&(M.offscreenCanvas=a),n.devicePixelRatio=k,n.requestAnimationFrame=v!=null?v:er.bind(M.globalThis),n.cancelAnimationFrame=m!=null?m:an.bind(M.globalThis),n.supportsTouchEvents=S!=null?S:"ontouchstart"in M.globalThis,n.supportsPointerEvents=C!=null?C:!!M.globalThis.PointerEvent,n.isTouchEvent=y!=null?y:function(B){return n.supportsTouchEvents&&B instanceof M.globalThis.TouchEvent},n.isMouseEvent=x!=null?x:function(B){return!M.globalThis.MouseEvent||B instanceof M.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(B instanceof M.globalThis.PointerEvent))},n.dblClickSpeed=A!=null?A:200,n.initRenderingContext({container:i,canvas:o,width:N,height:w,renderer:c,offscreenCanvas:a,devicePixelRatio:k,cursor:p||"default",background:f||"transparent",createImage:E,document:h,supportsCSSTransform:D,useNativeClickEvent:T,alwaysTriggerPointerEventOnCanvas:d}),n.initDefaultCamera(N,w,c.clipSpaceNearZ),n.initRenderer(c,!0),n}return e.prototype.initRenderingContext=function(t){this.context.config=t,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},e.prototype.initDefaultCamera=function(t,n,i){var o=this,a=new M.CameraContribution;a.clipSpaceNearZ=i,a.setType(j.EXPLORING,ie.DEFAULT).setPosition(t/2,n/2,Nn).setFocalPoint(t/2,n/2,0).setOrthographic(t/-2,t/2,n/2,n/-2,rs,ns),a.canvas=this,a.eventEmitter.on(Pr.UPDATED,function(){o.context.renderingContext.renderReasons.add(Wt.CAMERA_CHANGED),M.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=a},e.prototype.updateSizeAttenuation=function(){var t=this.getCamera().getZoom();this.document.documentElement.forEach(function(n){M.styleValueRegistry.updateSizeAttenuation(n,t)})},e.prototype.getConfig=function(){return this.context.config},e.prototype.getRoot=function(){return this.document.documentElement},e.prototype.getCamera=function(){return this.context.camera},e.prototype.getContextService=function(){return this.context.contextService},e.prototype.getEventService=function(){return this.context.eventService},e.prototype.getRenderingService=function(){return this.context.renderingService},e.prototype.getRenderingContext=function(){return this.context.renderingContext},e.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.readyPromise=new Promise(function(n){t.resolveReadyPromise=function(){n(t)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,n){if(t===void 0&&(t=!0),n===void 0&&(n=!1),n||this.dispatchEvent(new ft(Ct.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var o=this.getRoot();this.unmountChildren(o),t&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),t&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),n||this.dispatchEvent(new ft(Ct.AFTER_DESTROY))},e.prototype.changeSize=function(t,n){this.resize(t,n)},e.prototype.resize=function(t,n){var i=this.context.config;i.width=t,i.height=n,this.getContextService().resize(t,n);var o=this.context.camera,a=o.getProjectionMode();o.setPosition(t/2,n/2,Nn).setFocalPoint(t/2,n/2,0),a===vt.ORTHOGRAPHIC?o.setOrthographic(t/-2,t/2,n/2,n/-2,o.getNear(),o.getFar()):o.setAspect(t/n),this.dispatchEvent(new ft(Ct.RESIZE,{width:t,height:n}))},e.prototype.appendChild=function(t,n){return this.document.documentElement.appendChild(t,n)},e.prototype.insertBefore=function(t,n){return this.document.documentElement.insertBefore(t,n)},e.prototype.removeChild=function(t){return this.document.documentElement.removeChild(t)},e.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},e.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},e.prototype.render=function(t){var n=this;t&&(wn.detail=t,Rn.detail=t),this.dispatchEvent(wn);var i=this.getRenderingService();i.render(this.getConfig(),t,function(){n.dispatchEvent(is)}),this.dispatchEvent(Rn)},e.prototype.run=function(){var t=this,n=function(i,o){t.render(o),t.frameId=t.requestAnimationFrame(n)};n()},e.prototype.initRenderer=function(t,n){var i=this;if(n===void 0&&(n=!1),!t)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new Qn,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new ja,new es,new $a([new ts])),this.loadRendererContainerModule(t),this.context.contextService=new this.context.ContextService((0,g.pi)((0,g.pi)({},M),this.context)),this.context.renderingService=new Pa(M,this.context),this.context.eventService=new xa(M,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(t,n,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(t,n)})},e.prototype.initRenderingService=function(t,n,i){var o=this;n===void 0&&(n=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){o.inited=!0,n?i?o.requestAnimationFrame(function(){o.dispatchEvent(new ft(Ct.READY))}):o.dispatchEvent(new ft(Ct.READY)):o.dispatchEvent(new ft(Ct.RENDERER_CHANGED)),o.readyPromise&&o.resolveReadyPromise(),n||o.getRoot().forEach(function(a){var s=a.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}),o.mountChildren(o.getRoot()),t.getConfig().enableAutoRendering&&o.run()})},e.prototype.loadRendererContainerModule=function(t){var n=this,i=t.getPlugins();i.forEach(function(o){o.context=n.context,o.init(M)})},e.prototype.setRenderer=function(t){var n=this.getConfig();if(n.renderer!==t){var i=n.renderer;n.renderer=t,this.destroy(!1,!0),(0,g.ev)([],(0,g.CR)(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(o){o.destroy(M)}),this.initRenderer(t)}},e.prototype.setCursor=function(t){var n=this.getConfig();n.cursor=t,this.getContextService().applyCursorStyle(t)},e.prototype.unmountChildren=function(t){var n=this;t.childNodes.forEach(function(i){n.unmountChildren(i)}),this.inited&&(t.isMutationObserved?t.dispatchEvent(lr):(lr.target=t,this.dispatchEvent(lr,!0)),t!==this.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1),t.isCustomElement&&t.disconnectedCallback&&t.disconnectedCallback()},e.prototype.mountChildren=function(t){var n=this;this.inited?t.isConnected||(t.ownerDocument=this.document,t.isConnected=!0,t.isMutationObserved?t.dispatchEvent(ur):(ur.target=t,this.dispatchEvent(ur,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName),t.childNodes.forEach(function(i){n.mountChildren(i)}),t.isCustomElement&&t.connectedCallback&&t.connectedCallback()},e.prototype.client2Viewport=function(t){return this.getEventService().client2Viewport(t)},e.prototype.viewport2Client=function(t){return this.getEventService().viewport2Client(t)},e.prototype.viewport2Canvas=function(t){return this.getEventService().viewport2Canvas(t)},e.prototype.canvas2Viewport=function(t){return this.getEventService().canvas2Viewport(t)},e.prototype.getPointByClient=function(t,n){return this.client2Viewport({x:t,y:n})},e.prototype.getClientByPoint=function(t,n){return this.viewport2Client({x:t,y:n})},e}(cn)}}]);
